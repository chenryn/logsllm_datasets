    This is how I broke our build.
    % pwd
    /home/rog/src/go/src/local/gobug
    % ls
    % cat > foo.go
    package foo
    var X = 0
    ^D
    % cat > bar.go
    package foo
    var Y = 0
    ^D
    % cat > foo_test.go
    package foo_test
    import (
        "testing"
        foo "local/gobug"
    )
    func TestX(t *testing.T){
        _ = foo.X
    }
    ^D
    % go test
    PASS
    ok      local/gobug 0.011s
    % go install
    % rm foo.go      # as it happens, i actually moved it elsewhere.
    % go build
    % go install
    % go test
    PASS
    ok      local/gobug 0.011s
    # everything looks just fine, so i pushed to trunk here, breaking
    # the build.
    % touch *.go
    % go test
    # local/gobug_test
    ./foo_test.go:7: undefined: foo.X
    FAIL    local/gobug [build failed]
    % 
    I wonder if the go tool should look at the mtime of the
    directory as well as the source files when determining
    whether to rebuild.