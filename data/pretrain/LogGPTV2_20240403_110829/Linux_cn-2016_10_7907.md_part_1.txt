---
author: Vik Paruchuri
category: 软件开发
comments_data:
- date: '2016-10-28 14:19:00'
  message: 这篇文章翻译的真不容易，感谢组长……
  postip: 61.48.40.26
  username: 来自北京的 Firefox 49.0|Windows 7 用户
- date: '2016-12-06 15:49:43'
  message: 很赞！！！
  postip: 121.35.210.225
  username: 来自广东深圳的 Chrome 45.0|Windows 10 用户
count:
  commentnum: 2
  favtimes: 4
  likes: 0
  sharetimes: 0
  viewnum: 7815
date: '2016-10-28 10:21:55'
editorchoice: false
excerpt: 数据科学公司在决定雇佣时越来越关注你在数据科学方面的作品集。这其中的一个原因是，这样的作品集是判断某人的实际技能的最好的方法。好消息是构建这样的作品集完全要看你自己。只要你在这方面付出了努力，你一定可以取得让这些公司钦佩的作品集。
fromurl: https://www.dataquest.io/blog/data-science-portfolio-machine-learning/
id: 7907
islctt: true
largepic: /data/attachment/album/201610/28/102139w8yn68zmpl7ipzn8.jpg
permalink: /article-7907-1.html
pic: /data/attachment/album/201610/28/102139w8yn68zmpl7ipzn8.jpg.thumb.jpg
related:
- displayorder: 0
  raid: 8987
reviewer: ''
selector: ''
summary: 数据科学公司在决定雇佣时越来越关注你在数据科学方面的作品集。这其中的一个原因是，这样的作品集是判断某人的实际技能的最好的方法。好消息是构建这样的作品集完全要看你自己。只要你在这方面付出了努力，你一定可以取得让这些公司钦佩的作品集。
tags:
- 大数据
- 数据科学
- 预测
thumb: false
title: 构建你的数据科学作品集：机器学习项目
titlepic: true
translator: kokialoves,zky001,vim-kakali,cposture,ideas4u
updated: '2016-10-28 10:21:55'
---
> 
> 这是[这个系列](https://www.dataquest.io/blog/data-science-portfolio-project/)发布的第三篇关于如何构建数据 科学作品集   （    Data Science Portfolio    ） 的文章。如果你喜欢这个系列并且想继续关注，你可以在订阅页面的底部找到[链接](https://www.dataquest.io/blog/data-science-portfolio-machine-learning/#email-signup)。
> 
> 
> 
数据科学公司在决定雇佣时越来越关注你在数据科学方面的 作品集   （    Portfolio    ） 。这其中的一个原因是，这样的作品集是判断某人的实际技能的最好的方法。好消息是构建这样的作品集完全要看你自己。只要你在这方面付出了努力，你一定可以取得让这些公司钦佩的作品集。
![](/data/attachment/album/201610/28/102139w8yn68zmpl7ipzn8.jpg)
构建高质量的作品集的第一步就是知道需要什么技能。公司想要在数据科学方面拥有的、他们希望你能够运用的主要技能有：
* 沟通能力
* 协作能力
* 技术能力
* 数据推理能力
* 动机和主动性
任何好的作品集都由多个项目表现出来，其中每个都能够表现出以上一到两点。这是本系列的第三篇，本系列我们主要讲包括如何打造面面俱到的数据科学作品集。在这一篇中，我们主要涵盖了如何构建组成你的作品集的第二个项目，以及如何创建一个端对端的机器学习项目。在最后，我们将拥有一个展示你的数据推理能力和技术能力的项目。如果你想看一下的话，[这里](https://github.com/dataquestio/loan-prediction)有一个完整的例子。
### 一个端到端的项目
作为一个数据科学家，有时候你会拿到一个数据集并被问如何[用它来讲故事](https://www.dataquest.io/blog/data-science-portfolio-project/)。在这个时候，沟通就是非常重要的，你需要用它来完成这个事情。像我们在前一篇文章中用过的，类似 Jupyter notebook 这样的工具，将对你非常有帮助。在这里你能找到一些可以用的报告或者总结文档。
不管怎样，有时候你会被要求创建一个具有操作价值的项目。具有操作价值的项目将直接影响到公司的日常业务，它会使用不止一次，经常是许多人使用。这个任务可能像这样 “创建一个算法来预测周转率”或者“创建一个模型来自动对我们的文章打标签”。在这种情况下，技术能力比讲故事更重要。你必须能够得到一个数据集，并且理解它，然后创建脚本处理该数据。这个脚本要运行的很快，占用系统资源很小。通常它可能要运行很多次，脚本的可使用性也很重要，并不仅仅是一个演示版。可使用性是指整合进操作流程，并且甚至是是面向用户的。
端对端项目的主要组成部分:
* 理解背景
* 浏览数据并找出细微差别
* 创建结构化项目，那样比较容易整合进操作流程
* 运行速度快、占用系统资源小的高性能代码
* 写好安装和使用文档以便其他人用
为了有效的创建这种类型的项目，我们可能需要处理多个文件。强烈推荐使用 [Atom](https://atom.io/) 这样的文本编辑器或者 [PyCharm](https://www.jetbrains.com/pycharm/) 这样的 IDE。这些工具允许你在文件间跳转，编辑不同类型的文件，例如 markdown 文件，Python 文件，和 csv 文件等等。结构化你的项目还利于版本控制，并上传一个类似 [Github](https://github.com/) 这样的协作开发工具上也很有用。
![](/data/attachment/album/201610/28/100707fwx12ctoj9lp654v.png)
*Github 上的这个项目*
在这一节中我们将使用 [Pandas](http://pandas.pydata.org/) 和 [scikit-learn](http://scikit-learn.org/) 这样的库，我们还将大量用到 Pandas [DataFrames](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.html)，它使得 python 读取和处理表格数据更加方便。
### 找到好的数据集
为一个端到端的作品集项目的找到好的数据集很难。在内存和性能的限制下，数据集需要尽量的大。它还需要是实际有用的。例如，[这个数据集](https://collegescorecard.ed.gov/data/)，它包含有美国院校的录取标准、毕业率以及毕业以后的收入，是个很好的可以讲故事的数据集。但是，不管你如何看待这个数据，很显然它不适合创建端到端的项目。比如，你能告诉人们他们去了这些大学以后的未来收入，但是这个快速检索却并不足够呈现出你的技术能力。你还能找出院校的招生标准和更高的收入相关，但是这更像是常理而不是你的技术结论。
这里还有内存和性能约束的问题，比如你有几千兆的数据，而且当你需要找到一些差异时，就需要对数据集一遍遍运行算法。
一个好的可操作的数据集可以让你构建一系列脚本来转换数据、动态地回答问题。一个很好的例子是股票价格数据集，当股市关闭时，就会给算法提供新的数据。这可以让你预测明天的股价，甚至预测收益。这不是讲故事，它带来的是真金白银。
一些找到数据集的好地方：
* [/r/datasets](https://reddit.com/r/datasets) – 有上百的有趣数据的 subreddit（Reddit 是国外一个社交新闻站点，subreddit 指该论坛下的各不同版块）。
* [Google Public Datasets](https://cloud.google.com/bigquery/public-data/#usa-names) – 通过 Google BigQuery 使用的公开数据集。
* [Awesome datasets](https://github.com/caesar0301/awesome-public-datasets) – 一个数据集列表，放在 Github 上。
当你查看这些数据集时，想一下人们想要在这些数据集中得到什么答案，哪怕这些问题只想过一次（“房价是如何与标准普尔 500 指数关联的?”），或者更进一步（“你能预测股市吗?”）。这里的关键是更进一步地找出问题，并且用相同的代码在不同输入（不同的数据）上运行多次。
对于本文的目标，我们来看一下  房利美   （    Fannie Mae    ） [贷款数据](http://www.fanniemae.com/portal/funding-the-market/data/loan-performance-data.html)。房利美是一家在美国的政府赞助的企业抵押贷款公司，它从其他银行购买按揭贷款，然后捆绑这些贷款为贷款证券来转卖它们。这使得贷款机构可以提供更多的抵押贷款，在市场上创造更多的流动性。这在理论上会带来更多的住房和更好的贷款期限。从借款人的角度来说，它们大体上差不多，话虽这样说。
房利美发布了两种类型的数据 – 它获得的贷款的数据，和贷款偿还情况的数据。在理想的情况下，有人向贷款人借钱，然后还款直到还清。不管怎样，有些人多次不还，从而丧失了抵押品赎回权。抵押品赎回权是指没钱还了被银行把房子给收走了。房利美会追踪谁没还钱，并且哪个贷款需要收回抵押的房屋（取消赎回权）。每个季度会发布此数据，发布的是滞后一年的数据。当前可用是 2015 年第一季度数据。
“贷款数据”是由房利美发布的贷款发放的数据，它包含借款人的信息、信用评分，和他们的家庭贷款信息。“执行数据”，贷款发放后的每一个季度公布，包含借贷人的还款信息和是否丧失抵押品赎回权的状态，一个“贷款数据”的“执行数据”可能有十几行。可以这样理解，“贷款数据”告诉你房利美所控制的贷款，“执行数据”包含该贷款一系列的状态更新。其中一个状态更新可以告诉我们一笔贷款在某个季度被取消赎回权了。
![](/data/attachment/album/201610/28/100856wgsknycgcksccpsc.jpg)
*一个没有及时还贷的房子就这样的被卖了*
### 选择一个角度
这里有几个我们可以去分析房利美数据集的方向。我们可以：
* 预测房屋的销售价格。
* 预测借款人还款历史。
* 在获得贷款时为每一笔贷款打分。
最重要的事情是坚持单一的角度。同时关注太多的事情很难做出效果。选择一个有着足够细节的角度也很重要。下面的角度就没有太多细节：
* 找出哪些银行将贷款出售给房利美的多数被取消赎回权。
* 计算贷款人的信用评分趋势。
* 找到哪些类型的家庭没有偿还贷款的能力。
* 找到贷款金额和抵押品价格之间的关系。
上面的想法非常有趣，如果我们关注于讲故事，那是一个不错的角度，但是不是很适合一个操作性项目。
在房利美数据集中，我们将仅使用申请贷款时有的那些信息来预测贷款是否将来会被取消赎回权。实际上, 我们将为每一笔贷款建立“分数”来告诉房利美买还是不买。这将给我们打下良好的基础，并将组成这个漂亮的作品集的一部分。
### 理解数据
我们来简单看一下原始数据文件。下面是 2012 年 1 季度前几行的贷款数据：
```
100000853384|R|OTHER|4.625|280000|360|02/2012|04/2012|31|31|1|23|801|N|C|SF|1|I|CA|945||FRM|
100003735682|R|SUNTRUST MORTGAGE INC.|3.99|466000|360|01/2012|03/2012|80|80|2|30|794|N|P|SF|1|P|MD|208||FRM|788
100006367485|C|PHH MORTGAGE CORPORATION|4|229000|360|02/2012|04/2012|67|67|2|36|802|N|R|SF|1|P|CA|959||FRM|794
```
下面是 2012 年 1 季度的前几行执行数据：
```
100000853384|03/01/2012|OTHER|4.625||0|360|359|03/2042|41860|0|N||||||||||||||||
100000853384|04/01/2012||4.625||1|359|358|03/2042|41860|0|N||||||||||||||||
100000853384|05/01/2012||4.625||2|358|357|03/2042|41860|0|N||||||||||||||||
```
在开始编码之前，花些时间真正理解数据是值得的。这对于操作性项目优为重要，因为我们没有交互式探索数据，将很难察觉到细微的差别，除非我们在前期发现他们。在这种情况下，第一个步骤是阅读房利美站点的资料：
* [概述](http://www.fanniemae.com/portal/funding-the-market/data/loan-performance-data.html)
* [有用的术语表](https://loanperformancedata.fanniemae.com/lppub-docs/lppub_glossary.pdf)
* [常见问答](https://loanperformancedata.fanniemae.com/lppub-docs/lppub_faq.pdf)
* [贷款和执行文件中的列](https://loanperformancedata.fanniemae.com/lppub-docs/lppub_file_layout.pdf)
* [贷款数据文件样本](https://loanperformancedata.fanniemae.com/lppub-docs/acquisition-sample-file.txt)
* [执行数据文件样本](https://loanperformancedata.fanniemae.com/lppub-docs/performance-sample-file.txt)
在看完这些文件后后，我们了解到一些能帮助我们的关键点：
* 从 2000 年到现在，每季度都有一个贷款和执行文件，因数据是滞后一年的，所以到目前为止最新数据是 2015 年的。
* 这些文件是文本格式的，采用管道符号`|`进行分割。
* 这些文件是没有表头的，但我们有个文件列明了各列的名称。
* 所有一起，文件包含 2200 万个贷款的数据。
* 由于执行数据的文件包含过去几年获得的贷款的信息，在早些年获得的贷款将有更多的执行数据（即在 2014 获得的贷款没有多少历史执行数据）。
这些小小的信息将会为我们节省很多时间，因为这样我们就知道如何构造我们的项目和利用这些数据了。
### 构造项目
在我们开始下载和探索数据之前，先想一想将如何构造项目是很重要的。当建立端到端项目时，我们的主要目标是：
* 创建一个可行解决方案
* 有一个快速运行且占用最小资源的解决方案
* 容易可扩展
* 写容易理解的代码
* 写尽量少的代码
为了实现这些目标，需要对我们的项目进行良好的构造。一个结构良好的项目遵循几个原则：
* 分离数据文件和代码文件
* 从原始数据中分离生成的数据。
* 有一个 `README.md` 文件帮助人们安装和使用该项目。
* 有一个 `requirements.txt` 文件列明项目运行所需的所有包。
* 有一个单独的 `settings.py` 文件列明其它文件中使用的所有的设置
	+ 例如，如果从多个 `Python` 脚本读取同一个文件，让它们全部 `import` 设置并从一个集中的地方获得文件名是有用的。
* 有一个 `.gitignore` 文件，防止大的或密码文件被提交。
* 分解任务中每一步可以单独执行的步骤到单独的文件中。
	+ 例如，我们将有一个文件用于读取数据，一个用于创建特征，一个用于做出预测。
* 保存中间结果，例如，一个脚本可以输出下一个脚本可读取的文件。
	+ 这使我们无需重新计算就可以在数据处理流程中进行更改。
我们的文件结构大体如下：
```
loan-prediction
├── data
├── processed
├── .gitignore
├── README.md
├── requirements.txt
├── settings.py
```
### 创建初始文件