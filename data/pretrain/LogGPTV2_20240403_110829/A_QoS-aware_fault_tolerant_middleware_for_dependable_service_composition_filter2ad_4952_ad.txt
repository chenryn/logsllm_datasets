Data:ServiceplanSP,ConstraintsGC,LC,CandidatesSResult:CandidatesindexρforSP.n=|SLT|+|SFT|,nl=|SLT|,mi=|si|;1qold=flowQoS(SP,q1ρ1,...,qnρn);2uold=utility(qold);3wt=(cid:4)1aifqall==0qtallgct/(cid:2)at=1qtallgctifqall(cid:7)=0;4for(i=1;i≤n;i++)do5for(j=1;j≤mi;j++)do6ifj==ρithenContinue;7q=qij;8ifi>nlthenq=flowQoS(SP,qi1j,...,qirij);9if∃x(qxlcxij>1)thenContinue;10qnew=flowQoS(SP,q1ρ1,.qij..,qnρn);11if∃x(qxnewgcx>1)thenContinue;12uij=utility(qnew);13vij=(cid:2)at=1wtqt−qtoldgct;14end15end16if∃xy(uxy<uold&&vxy<0&&vxy≤allvij)then17ρx=y;18elseif∃xy(uxy<uold&&uold−uxyvxy≥alluold−uijvij)then19ρx=y;20end21returnρ22Algorithm6:FeasibleUpgradeoftheSolutionTheFT-HEUalgorithmhasconvergenceproperty,since1)Step4nevermakesanyfeasiblepropertiestobecomein-feasibleorinfeasiblepropertiestobemoreinfeasible,andforeachexchange,thepropertywiththemaximalinfeasiblefactorwillbeimproved;2)Step5alwaysupgradestheutil-ityvalueofthesolutions.Becausethereareonlyaﬁnitenumberoffeasiblesolutions,thealgorithmcannotcauseanyinﬁnitelooping.Forcalculatingtheupperboundoftheworst-casecom-putationalcomplexityoftheFT-HEUalgorithm(pct=0%),weassumetherearentasks,mcandidatesforeachtaskandcqualityproperties.InStep3,whenﬁndingtheinitialsolution(Algorithm4),thecomputationofλijisO(nm).InStep4,ﬁndingaexchangecandidate(Al-gorithm5)requiresamaximumofn(m−1)ofcalcu-lationofthealternativecandidates,andeachcalculationwillinvokeafunctionflowQoS,whichhasthecompu-tationcomplexityofO(nc).Therefore,thecomputationcomplexityisO(n2(m−1)c)ofeachexchange.ThefindExchangeCandidate()functionwillbeinvokedatmostn(m−1)timessincethereareatmost(m−1)upgradesforeachtask.Therefore,thetotalcomputationcomplexityofStep4isO(n3(m−1)2c).InStep5,foreachupgrade,therearen(m−1)iterationforthealterna-tivecandidatesandforeachiteration.Foreachiteration,theflowQoSfunction,whichhascomplexityO(nc),isin-voked.SothecomputationcomplexityofeachupgradeisO(n2)(m−1)c.Therearetotallyn(m−1)upgradesforthewholeserviceplan,sothetotalcomputationcomplex-0153045607590105120135150020004000600080001000012000(a) Number of TasksComputation Time (ms)(Candidates=20, QoS=8)  FT−LocalFT−HEUFT−BABFT−ALL010203040506070809010002000400060008000(b) Number of CandidatesComputation Time (ms)(Tasks=30, QoS=8)  FT−LocalFT−HEUFT−BABFT−ALL051015202530354045500200400600800100012001400(c) Number of QoS PropertiesComputation Time (ms)(Tasks=20, Candidates=20)  FT−LocalFT−HEUFT−BABFT−ALL0510152025303540455002000400060008000100001200014000Computation Time (ms)(Candidates=20, QoS=8)(d) Number of Tasks  pct=0%pct=20%pct=40%pct=60%pct=80%pct=100%Figure3.PerformanceofComputationTimeityofStep5isO(n3(m−1)2c).SinceStep3,Step4andStep5areinsequence,thusthecombinedcomplexityoftheFT-HEUalgorithmisO(n3(m−1)2c).5.ImplementationandExperimentsTostudytheperformanceofdifferentselectionalgo-rithms(FT-Local,FT-ALL,FT-BAB,FT-HEU,FT-BABHEUetc.),weuseanInternettopologygeneratorInet3.0[9]tocreate10000randomnodesforpresentingdifferentWebservicesintheInternet.Wethenrandomlyselectdiffer-entnumberofnodestocreateserviceplanswithdiffer-entcompositionalstructuresandexecutionroutes.TheFT-LocalalgorithmpresentstheselectionalgorithmwithlocalconstraintsproposedinAlgorithm2,theFT-ALLpresentstheexhaustivesearchingapproachintroducedinSection4.3,theFT-HEUpresentstheheuristicalgorithm(pct=0%),FT-BABpresentstheBranch-and-Boundal-gorithm(pct=100%)forsolvingtheIPproblem,andFT-BABHEUpresentsthehybridalgorithmshowninAlgo-rithm3.AllthealgorithmsareimplementedintheJavalan-guageandtheLP-SOLVEpackage(lpsolve.sourceforge.net)isemployedfortheimplementationoftheFT-BABalgo-rithm.Theconﬁgurationsofthecomputersforrunningtheexperimentsare:Intel(R)Core(TM)22.13GCPUwith1GRAM,100Mbits/secEthernetcard,WindowXPandJDK6.0.Inthefollowing,wepresenttheexperimentalresultsofcomputationtimeandselectionresults.5.1.ComputationTimeFigure3(a),(b),and(c)showsthecomputationtimeper-formanceofdifferentalgorithmswithdifferentnumberofthetasks,candidatesandQoSproperties,respectively.Theexperimentalresultshows:1)thecomputationtimeofFT-ALLincreaseexponentiallyevenwithverysmallproblem978-1-4244-4421-2/09/$25.00 c(cid:13)2009 IEEE
247
Authorized licensed use limited to: Tsinghua University. Downloaded on March 20,2021 at 09:59:04 UTC from IEEE Xplore.  Restrictions apply. 
1020304050607080901000.9750.980.9850.990.9951(a) Number of TasksUtility(IP)/Utility(HEU)(Candidates=20)  QoS=40QoS=30QoS=20QoS=101020304050607080901000.9750.980.9850.990.9951(b) Number of CandidatesUtility(IP)/Utility(HEU)(Tasks=20)  QoS=40QoS=30QoS=20QoS=101020304050607080901000.9750.980.9850.990.9951(c) Number of QoS PropertiesUtility(IP)/Utility(HEU)(Tasks=20, Candidates=20)  1020304050607080901000.990.9920.9940.9960.9981Utility(IP)/Utility(BABHEU)(Candidates=20, QoS=10)(d) Number of Tasks  pct=0%pct=20%pct=40%pct=60%pct=80%pct=100%Figure4.PerformanceofSelectionResultssize;2)thecomputationtimeofFT-BABisacceptablewhentheproblemsizeissmall,however,itincreasesquicklywhenthenumberoftasks,candidatesandQoSpropertiesislarge;3)thecomputationtimeofFT-HEUisverysmallinalltheexperimentsevenwithlargeproblemsize;4)thecomputationtimeperformanceofFT-Localisthebest(nearzero),however,FT-Localcannotsupportglobalconstraints.Figure3(d)showsthecomputationtimeperformanceofFT-BABHEUwithdifferentpctsettings.Figure3(d)showsthatthecomputationperformanceofFT-BABHEUisinﬂuencedbypct,indicatingthatbysettingthepctparameter,theFT-BABHEUalgorithmcanadapttodifferentenvironments.5.2.SelectionResultsFigure4comparestheselectionresultsoftheFT-BABandFT-HEUalgorithmswithdifferentnumberoftasks,candidatesandQoSproperties.They-axisoftheFigure4isthevaluesofUtility(IP)/Utility(HEU),whicharetheutil-ityratiosofthetwoalgorithms,wherethevalueof1meanstheselectionresultsbyFT-HEUisidenticaltotheoptimalresultobtainedbytheFT-BAB.Figure4(a)and(b)showtheexperimentalresultsofFT-BABandFT-HEUwithdifferentnumberoftasksandcandi-dates,respectively.Theexperimentalresultsshowthat:1)underdifferentnumberofQoSproperties(10,20,30and40intheexperiment),theutilityvaluesofFT-HEUarenearFT-BAB(largerthan0.975intheexperiment)withdifferentnumberoftasks,candidates;2)withtheincreasingofthetasknumber,theperformanceofFT-HEUbecomesbetter.Figure4(c)showstheselectionresultofFT-BABandFT-HEUwithdifferentnumberofQoSproperties.TheresultshowsthattheperformanceofFT-HEUissteadywithdif-ferentnumberofQoSpropertiesintheexperiments.Fig-ure4(d)showstheutilityratiosoftheFT-BABHEUwithdifferentpctsettings.Theexperimentalresultsshowthat1)theselectionresultsareinﬂuencedbythevaluesofpct,indicatingthatbysettingthevalueofpct,wecanadjusttheselectionresultsoftheFT-BABHEUalgorithm;2)whenpct=0%,theutilityratioisstilllargerthan99%,indicat-ingtheperformanceoftheFT-HEUalgorithm.TheaboveexperimentalresultsshowthattheFT-HEUalgorithmcanprovidenearoptimalsolutionswithexcellentcomputationtimeperformanceevenunderlargeproblemsize.BycombiningtheaccuracyfeatureoftheFT-BABalgorithmandthespeedinessfeatureoftheFT-HEUalgo-rithm,ourFT-BABHEUalgorithmisadjustableandcanbeemployedindifferentenvironments,suchasthereal-timeapplications(requirequick-response),mobileWebservices(limitedcomputationresource),andlarge-scaleservice-orientedsystems(largeproblemsize).ThedesignoftheparameterpctinFT-BABHEUmakesfaulttolerancestrat-egypersonalizationbecomeeasy(e.g.,smallpctforquickresponseandlargepctforaccurateselectionresults).6.DiscussionandRelatedWorkAnumberoffaulttolerancestrategiesforWebserviceshavebeenproposedintherecentliterature[5,8,15,21,25,30].Themajorapproachescanbedividedintotwotypes:1)sequentialstrategies,whereaprimaryserviceisinvokedtoprocesstherequestandthebackupservicesareinvokedonlywhentheprimaryservicefails.SequentialstrategieshavebeenemployedinFT-SOAP[7]andFT-CORBA[24];2)parallelstrategies,whereallthecandidatesareinvokedatthesametime.ParallelstrategieshavebeenemployedinFTWeb[22],Thema[14]andWS-Replication[20].Inthispaper,wenotonlyprovidesystematicintroductiononthecommonly-usedfaulttolerancestrategies,butalsoproposeascalablemiddlewareframeworkfordynamicfaulttoler-ancestrategyreselectionandreconﬁgurationtodealwiththefrequentlycontextinformationchanges.Recently,dynamicWebservicecompositionhasat-tractedgreatinterest,wherecomplexapplicationsarespec-iﬁedasserviceplansandtheoptimalservicecandidatesaredynamicallydeterminedatruntimebysolvingoptimiza-tionproblems.AlthoughtheproblemofdynamicWebserviceselectionhasbeenstudiedbyanumberoflitera-ture[1,3,26,27,28],veryfewpreviousworkfocusesontheproblemofdynamicoptimalfaulttolerancestrategyde-termination,especiallyforstatefulWebservices.Inthispaper,weaddressthisproblembyproposingahybridal-gorithmFT-BABHEU,whichisadjustableandcanadapttodifferentenvironmentseasily.TheWS-Reliability[17]canbeemployedinourmid-dlewareforenablingreliablecommunication.WSRF[16],whichdescribesthestateasXMLdatasheets,canbeem-ployedfortransferringstatesbetweenreplicas.Thepro-posedmiddlewarecanbeintegratedintotheSOArun-978-1-4244-4421-2/09/$25.00 c(cid:13)2009 IEEE
248
Authorized licensed use limited to: Tsinghua University. Downloaded on March 20,2021 at 09:59:04 UTC from IEEE Xplore.  Restrictions apply. 
timegovernanceframework[10]andappliedtoindustryprojects.7.ConclusionInthispaper,wehaveprovidedapracticalsolutionforbuildingdependableservice-orientedsystemsbyproposingaQoS-awarefaulttolerantmiddleware.Themainfeaturesofthismiddlewareare:1)supportingstatefulWebservices,2)user-collaboratedQoSmodel,3)scalablemiddlewareframeworkdesigntomakereplacementoftheQoSproper-tiesandfaulttolerancestrategieseasily,4)thecombinationoftheglobalconstraintsandlocalconstraintsforspecifyinguserrequirements,5)acontext-awarealgorithmfordynam-icallyandautomaticallyoptimalfaulttolerancestrategyde-termination.OurfutureworkwillconsiderthestatesynchronizationbetweendifferentfunctionallyequivalentWebservices,thedependabilityguaranteeofthemiddleware,andtheinvesti-gationofmoreQoSproperties.AcknowledgementTheworkdescribedinthispaperwasfullysupportedbyagrantfromtheResearchGrantsCounciloftheHongKongSpecialAdministrativeRegion,China(ProjectNo.CUHK4158/08E),andagrantfromtheResearchCommit-teeofTheChineseUniversityofHongKong(ProjectNo.CUHK3/06C-SF).References[1]D.ArdagnaandB.Pernici.Adaptiveservicecompositioninﬂexibleprocesses.IEEETrans.SoftwareEng.,pages369–384,2007.[2]B.Benatallah,M.Dumas,Q.Z.Sheng,andA.H.H.Ngu.Declarativecompositionandpeer-to-peerprovisioningofdynamicwebservices.InICDE,2002.[3]P.A.BonattiandP.Festa.Onoptimalserviceselection.InWWW,pages530–538,2005.[4]C.-L.HwangandK.Yoon.Multiplecriteriadecisionmak-ing.LectureNotesinEconomicsandMathematicalSystems,1981.[5]P.P.-W.Chan,M.R.Lyu,andM.Malek.Makingservicesfaulttolerant.InISAS,pages43–61,2006.[6]T.Cormen,C.Leiserson,andR.Rivest.IntroductiontoAl-gorithms.TheMITPress,Cambridge,MA,1990.[7]C.-L.Fang,D.Liang,F.Lin,andC.-C.Lin.Faulttolerantwebservices.J.Syst.Archit.,53(1):21–38,2007.[8]H.Foster,S.Uchitel,J.Magee,andJ.Kramer.Model-basedveriﬁcationofwebservicecompositions.InASE,2003.[9]J.W.S.Jamin.Inet-3.0:Internettopologygenerator.Tech-nicalReport,CSE-TR-456-02,2002.[10]M.Kavianpour.Soaandlargescaleandcomplexenterprisetransformation.InICSOC,pages530–545,2007.[11]M.R.Lyu.SoftwareFaultTolerance.TrendsinSoftware,Wiley,1995.[12]R.-Y.Ma,Y.-W.Wu,X.-X.Meng,S.-J.Liu,andL.Pan.Grid-enabledworkﬂowmanagementsystembasedonbpel.Int.J.HighPerform.Comput.Appl.,22(3):238–249,2008.[13]D.A.Menasc.Qosissuesinwebservices.IEEEInternetComputing,6(6):72–75,2002.[14]M.G.Merideth,A.Iyengar,T.Mikalsen,S.Tai,I.Rouvel-lou,andP.Narasimhan.Thema:Byzantine-fault-tolerantmiddlewareforweb-serviceapplications.InSRDS’05:Pro-ceedingsofthe24thIEEESymposiumonReliableDis-tributedSystems,pages131–142,2005.[15]T.Moritsu,M.A.Hiltunen,R.D.Schlichting,J.Toyouchi,andY.Namba.Usingwebservicetransformationstoim-plementcooperativefaulttolerance.InISAS,pages76–91,2006.[16]OASIS.Webserviceresourceframework.Inwww.oasis-open.org/committees/wsrf/,2005.[17]OASIS.Webservicesreliablemessaging.Inhttp://specs.xmlsoap.org/ws/2005/02/rm/ws-reliablemessaging.pdf,2005.[18]ObjectManagementGroup(OMG).BusinessProcessMod-elingNotation(BPMN)version1.1.,January2008.[19]J.O’Sullivan,D.Edmond,andA.H.M.terHofstede.What’sinaservice?DistributedandParallelDatabases,12(2/3):117–133,2002.[20]J.Salas,F.Perez-Sorrosal,n.-M.MartaPatiandR.Jim´enez-Peris.Ws-replication:aframeworkforhighlyavailablewebservices.InWWW,pages357–366,2006.[21]N.SalatgeandJ.-C.Fabre.Faulttoleranceconnectorsforunreliablewebservices.InDSN,pages51–60,2007.[22]G.T.Santos,L.C.Lung,andC.Montez.Ftweb:Afaulttolerantinfrastructureforwebservices.InEDOC’05:Pro-ceedingsoftheNinthIEEEInternationalEDOCEnterpriseComputingConference,pages95–105,2005.[23]E.G.M.ShahadatKhan,KinF.LiandM.Akbar.Solv-ingtheknapsackproblemforadaptivemultimediasystems.StudiaInformaticaUniversalis,2(1):157–178,2002.[24]G.-W.Sheu,Y.-S.Chang,D.Liang,S.-M.Yuan,andW.Lo.Afault-tolerantobjectserviceoncorba.InICDCS,page393,1997.[25]M.Vieira,N.Laranjeiro,andH.Madeira.Assessingrobust-nessofweb-servicesinfrastructures.InDSN,pages131–136,2007.[26]T.Yu,Y.Zhang,andK.-J.Lin.Efﬁcientalgorithmsforwebservicesselectionwithend-to-endqosconstraints.ACMTrans.Web,1(1):6,2007.[27]L.Zeng,B.Benatallah,A.H.Ngu,M.Dumas,J.Kalagnanam,andH.Chang.Qos-awaremiddlewareforwebservicescomposition.IEEETrans.Softw.Eng.,30(5):311–327,2004.[28]Z.ZhengandM.R.Lyu.Adistributedreplicationstrategyevaluationandselectionframeworkforfaulttolerantwebservices.InICWS,pages145–152,2008.[29]Z.ZhengandM.R.Lyu.Aqos-awaremiddlewareforfaulttolerantwebservices.InISSRE,pages97–106,Seattle,USA,November2008.[30]Z.ZhengandM.R.Lyu.Ws-dream:Adistributedreliabil-ityassessmentmechanismforwebservices.InDSN,pages392–397,Anchorage,Alaska,USA,June2008.