IPv6 Primer
Gene Cronk – CISSP, NSA-IAM
SME – North American IPv6 Task Force
Systems Admin – The Robin Shepherd Group
PI:EMAIL
Why IPv6?  Quick History 
• 1992
• Internet Engineering Task Force (IETF)
• Global shortage of IPv4 addresses
• Technical limitations of IPv4
• 1993
• RFC1550 created
• 1995
• Next generation internet protocol (IPv6) 
chosen as IPng (IP Next Generation)
Why IPv6?  Comparison with IPv4
• IPv4
• 32 bit address space (4.3 billion possible 
addresses) 
• IPv6 
• 128 bit address space (3.4 * 10^38  or 
340 undecillion addresses)
• 64 billion IPs for every square 
centimeter on earth
Why IPv6?  Comparison with IPv4
• IPv4
• 20 some odd years ago
• Many band-aids applied to address needs 
• IPv6
• Integrates many network improvements 
made over that time
Why IPv6?  Comparison with IPv4
• Stateless autoconfiguration
• IPv4 
• DHCP server is possible, but not mandatory. 
• IPv6
• Automagic Link Local address as soon as you boot 
the machine (see RFC 2462)
• Mechanism is similar to getting a 169.xxx.xxx.xxx 
address on boot in IPv4
Why IPv6?  Comparison with IPv4
• Security & QoS
• IPv4
•IPSec and QoS are add-ons
• IPv6
•Encryption, IPSec and QoS built in
Why IPv6?  Comparison with IPv4
• A cure for routing table growth
• IPv4
• Backbone routing table size has become a 
monsterous headache to ISPs and backbone 
operators. (113,000 as of 2003)
• IPv6
• Maximum amount of routes a router will see in the 
default-free zone is 8192.
Why IPv6?  Comparison with IPv4
● From www.mcvax.org/~jhma/routing/bgp-hist.html :
Why IPv6?  Comparison with IPv4
• Roaming becomes much easier
• Use of Mobile IPv6 and AnyCast
• Cell phone roaming much cleaner
• Cell phone can automatically identify 
new routing information from a new 
tower
• Cell phone keeps the same IP
Why IPv6?  Comparison with IPv4
• IPv6 reestablishes end to end 
connectivity
• The internet was originally designed for 
hosts to communicate directly with each 
other
• One of the “fixes” to keep IPv4 working 
(NAT) breaks end to end connectivity
What do I need to know about IPv6?
● 6Bone
● Experimental IPv6 beta network
● IPv6 “Islands” connected via IPv4 tunnels
● Connectivity 
● Native
● Tunnel Broker and other tunneling methods
● Number of networks continues to grow
● http://www.cs-ipv6.lancs.ac.uk
What do I need to know about IPv6?
● Global adoption
● Earliest adopters
● Asia -- Japan & China expect full conversion by 2005
● European Union
● Resistive adopters
● United States
● US has roughly 70% of the world's IPv4 addresses
● Detractors claim excessive level of effort to implement
● New Developments
● US DoD mandated all new network infrastructure 
equipment be IPv6 capable as of 10/2003
● Full conversion for DoD expected by 2008
● NTT/Verio, SpeakEasy, Hurricane Electric and others
● Moonv6 Project (http://www.moonv6.org)
IPv6 – Addressing
● 3ffe:80ee:16f9:3481:efab:1092:aaaa:3ff1
● Each block in the address represents 16 bits
● Just 2 words of an IPv6 address cover the entire IPv4 internet
● The first word defines the type of address
● 3ffe -- 6 Bone address (experimental globally routable IP)
● Depreciated in leiu of 2001:: addresses (RFC 3701)
● fe80 -- Link Local address, used to get information about the 
network (routers, etc.)
● ::1 -- localhost (127.0.0.1 in the IPv4 world)
● :: -- equivalent to 0.0.0.0
IPv6 – Addressing
EUI-64
● Extended Unique Identifier (EUI-64)
● Clients can receive IPv6 address based on MAC
● 64 bit prefix assigned by Router Advertiser or   
  DHCPv6, last 64 bits assigned by EUI-64
● FF-FE inserted between 3rd and 4th bytes
● 00-0B-3C-F4-22-CE becomes 00-0B-3C-FF-FE-F4-22-CE
IPv6 – Addressing
EUI-64
● Using MAC address as part of IP considered 
a privacy issue
● Not addressed in RFC 2373 
● RFC 3041 describes a randomly-generated 
interface identifier that changes over time to 
provide a level of anonymity
IPv6 – Addressing
• 2001 -- production globally routable IPv6 networks
• 2002 -- used for automatic 6to4 tunneling
• FEC0 – (Site Local Address) equivalent to 
192.168.xxx.xxx/24 or 10.xxx.xxx.xxx/8 addresses 
(DEPRECIATED). 
● To be replaced by FC00::/7  
• FF01, FF02 and FF05 are multicast addresses
IPv6 – OS Support
● FreeBSD, OpenBSD, NetBSD, Apple OSX and BSDi --   
include the Kame IPv6 stack 
● http://www.kame.net
● IPv6 is enabled by default
● Linux kernel 2.4.xx -- very buggy IPv6 implementation 
● can be augmented by patches from the USAGI project
● http://www.linux-ipv6.org
● USAGI is a port of the KAME project to Linux
● Linux kernel 2.6.xx -- USAGI patches included by default
● Solaris 8.x and above -- native support
● Novell Netware 6.x and above – native support
●  load BSDSOCK.NLM
IPv6 – OS Support
● Windows 9x/Me -- no Microsoft supported IPv6 capability
● Windows NT 4 -- very early beta IPv6 stack  
● Windows 2000 -- beta quality IPv6 stack
● Windows XP and Windows 2003 Server -- IPv6 stacks 
built in  
● Typing “ipv6 install” in a command shell (Windows XP) 
or adding the stack in network properties (Windows 
XP/2003) enables these stacks.
● “netsh” to control IPv6 from CLI (Windows XP/2003)
IPv6 – Tunnel Brokers
● Top North American IPv6 Providers
● NTT/Verio, Freenet6, Hurricane Electric (SpeakEasy 
soon)
● NTT/Verio  
● Supplies tunnelling services to its customers in urban 
and rural areas
● Hurricane Electric and Freenet6
● Open tunnelling servers 
● Anyone with an IPv4 address can tunnel IPv6
● http://www.tunnelbroker.net (static v4 IP)
● http://www.freenet6.net (dynamic v4 IP)
● Other tunnel brokers available worldwide
● Most only require on-line registration
IPv6 – Tunnelling & Transition 
Methods
• ISATAP (Intra Site Automatic Tunnelling Addressing 
Protocol -- ::0:5EFE:w.x.y.z prefix)
• 6to4 (Tunnel Brokers – 3ffe or 2001 prefix)
• Automatic 6to4 (Dynamic Tunnels – 2002 prefix)
• Teredo and Silkroad (6to4 tunnelling over UDP)
• NAT/PT (Network Address Translation/Protocol 
Translation)
• Bump In The Stack/Bump In The API (BIS/BIA)
• Dual Stack Transitioning Mechanism (DSTM)
• Transport Relay Translator (TRT)
IPv6 – Tunnelling & Transition Methods 
-- ISATAP
● Used mostly for IPv6 connectivty                                                 
  between hosts on a LAN, VLAN or                                               
  WAN
● Requires a 6to4 gateway for packets                                            
  to leave the local LAN
● Can be used for an IPv6 NAT
● IPv6 address includes IPv4 address.
● 2002:836B:1:5:0:5EFE:10.40.1.29
● IPv4 becomes the link layer for IPv6
IPv6 – Tunnelling & Transition Methods -- 
6to4 Via a Tunnel Broker
● Currently the most popular way to connect via IPv6
● Requires IP Protocol Type 41
● Does not work with NAT'ed IPv4 hosts unless the host is a 1 to 1 
NAT
● Most tunnel brokers will give a /48 or a /64 subnet for the rest of your 
network
● /48 = 1,208,925,819,614,629,174,706,176 IPs
● /64 = 18,446,744,073,709,551,616 IPs
● Very easy to set up and change
● Frequently used as an attack vector, since tunnels can be set up to 
different countries easily
● http://www.sixxs.net has a 6to4 proxy that only shows the IPv6 
source address
IPv6 – Tunnelling & Transition Methods -- 
6to4 Via Auto Tunnelling
● Fairly easy to set up
● Convert your IPv4 address to hex, then put a 2002 in front of it:
● 69.3.46.44 becomes 2002:4503:2e2c::/48
● One IPv4 IP becomes a /48 subnet for IPv6
● Set default route for IPv6 traffic to 192.88.99.1
● Uses BGP to find the nearest 6to4 router and connect to the 
IPv6 internet
● Security questionable
● you have little choice where your traffic is routed
● Windows XP SP1 auto tunnels by default
●Not included with OpenBSD
IPv6 – Tunnelling & Transition Methods 
-- Teredo