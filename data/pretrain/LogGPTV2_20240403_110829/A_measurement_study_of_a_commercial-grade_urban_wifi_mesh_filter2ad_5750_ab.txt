a
r
F
1
2
3
4 5 6 7 8 910
20
30 40
Average degree of MAPs (in Logscale)
Figure 3: Plot showing the fraction of MAPs with a
given average degree for MadMesh and Roofnet
• What does the neighborhood of each MAP look like?
What kind of connectivity does each MAP have with
its peers?
• How robust is the deployment to failure scenarios?
• What are the link-level error rates and the signal qual-
ities on the backbone and access links? What are their
contribution causes?
• Does the network topology lend itself to new routing
mechanisms such as network coding and opportunistic
routing?
3.1 Average MAP degree
We deﬁne the degree of a MAP as the number of neigh-
boring MAPs with link quality above a threshold (14 dB for
this study). The average degree of the MAPs in the net-
work helps us determine the connectivity properties of the
deployed mesh network. A low degree of connectivity would
imply that the MAPs are constrained in their choices of par-
ent links, which in turn implies limited re-routing choices in
presence of losses. Similarly, an extremely high degree of
connectivity would imply over-provisioning in the deploy-
ment apart from increased possibility of self interference.
Figure 3 plots the CDF of the degree for all the MAPs in
the mesh. We can observe that 20% of the MAPs have a
degree of less than 2 and about 60% of the MAPs have a de-
gree of more than 3. This observation is interesting because
more than 70% of the MAPs use directional sector antenna
systems with a 45 degree beam for the backbone, and we
would have expected a much lower connectedness. Overall,
the connectivity of the MAPs within the mesh is fairly good.
However, it is interesting to note that the neighborhood
distribution of MadMesh is still much lower than an organ-
ically grown mesh, such as the Roofnet. The latter is a
network deployed in Cambridge, MA, in and around MIT.
Roofnet comprises of a set of wireless nodes that are hosted
in homes and apartments of willing volunteers, and hence,
there is limited ﬁdelity in controlling its growth and struc-
ture.
In Figure 3 we also plot the degree of nodes in the
Roofnet network, and we believe that the large variation
in node density is a consequence of its unplanned growth.
In contrast, the deployment of MadMesh is well structured,
and was preceded by detailed site surveys. Additionally, po-
sitioning of MAPs are continuously changed based on perfor-
mance requirements. Finally, MAPs in MadMesh are con-
tinuously available, and are tightly managed by the network
operators, making their uptimes more predictable. There-
fore, it is logical to expect that the density of MAPs in
MadMesh is much lower than RoofNet.
3.2 Robustness of the deployment
To gauge the quality of the mesh planning one also needs
to measure the robustness of the deployment against link
failures. A well deployed network should have more than one
distinct path to the wired Internet connection. We study the
robustness of the mesh topology by looking at the min-cut of
each MAP – the minimum number of edges, whose removal
would disconnect the MAP from the graph. To understand
this, we build a graph out of connectivity reports obtained
through SNMP logs and calculate the min-cut of each MAP
from the diﬀerent RAPs. Figure 4, shows the scatter-plot
of the average min-cut of all the MAPs as it varied against
average degree. As can be seen from the plot, around 8% of
the MAPs have a mincut less than 2. This implies that the
MAPs would get disconnected from the rest of the network
if less than 2 other speciﬁc MAPs fail. The ﬁgure also shows
that MAPs with neighbor degree as high as 7 can still have a
min-cut lower than 2. This can be the case, if the neighbors
of a MAP have a common ancestor in the path to the RAP.
Figure 4 shows a speciﬁc instance of this phenomenon where
a group of MAPs are connected to the rest of the network
via a single path (at a speciﬁc time instant). In this case,
failure of the common MAP would result in a disconnected
topology.
The analysis presented above assumes that all MAPs in
the mesh have equal failure probability. However, in reality
the failure of a MAP can be triggered by many independent
factors including hardware failures, channel ﬂuctuations or
 11
e
d
o
N
f
o
t
u
c
n
M
i
 9
 7
 5
 3
 1
 1  2  3  4  5  6  7  8  9  10 11
Average Degree of Node
path to the root
mincut = 1
0
11
3
17
18
19
58
23
21
34
160
39
48
102
56
Connectivity for the
highlighted node
Figure 4: Scatter plot of the mincut and average
degree of MAPs
external interference in the medium. Thus the exact fail-
ure probability of each MAP may be diﬀerent depending
on aforementioned factors and this information needs to be
coupled with the mincut values to provide a better estimate
of the robustness of a MAP. One way of estimating the fail-
ure probability of a MAP is to track the uptimes of all the
MAPs in the system. Unfortunately, we currently do not
have access to this information for Madmesh and we hope
to provide more details on node failure in our future work.
But we still believe that tracking the mincut of the MAPs
in the mesh provides a reasonable estimate of the robust-
ness of the mesh and network planners should examine the
path diversity in their mesh deployments. More speciﬁcally,
they need to ensure that multiple paths do exist between
each MAP and the diﬀerent RAPs, that can help tide over
individual failures, and a high neighbor degree of each MAP
does not automatically guarantee robustness.
3.3 Error rates of backbone and client access
links
The mesh network utilizes two diﬀerent spectral bands
(2.4 GHz for access links and 5 GHz for backbone links)
for communication. We now characterize the relative per-
formance of access and backbone links. In order to do this,
we ﬁrst compare the packet error rates (PER) for the ac-
cess and backbone links. We deﬁne PER as the fraction of
unicast wireless frames for which no corresponding acknowl-
edgment was received. For the calculation of PER on the
backbone links, we utilize two SNMP counters which report
the number of packets for which the MAP did not receive an
acknowledgment (F ) and the number of transmitted pack-
ets for which an acknowledgment was successfully received
(T ). We then calculate PER for the backbone links using
F/(T + F ). However, the SNMP data for calculating the
PER on access links was not available to us. We therefore
carried out a set of directed active measurements to estimate
the PER of the access side. As part of our active measure-
ment experiments, we randomly selected a set of 35 locations
in the coverage area, and at each location we connected with
the MAP with the strongest signal and performed three sets
of TCP iperf sessions, each session lasting 120 seconds. Our
iperf server was running on the mesh controller. We were
also capturing packets in the monitor mode (on a diﬀerent
interface), from which we determine the number of retrans-
missions (and hence the loss rates). We observed a total
of 15 distinct MAP’s in this active measurement procedure.
# of MAPs 15
# of MAPs 224
# of MAPs 224
# of MAPs 224
1.0
0.8
0.6
0.4
0.2
n
o
i
t
c
a
r
F
1.0
0.8
0.6
0.4
0.2
n
o
i
t
c
a
r
F
.05 .1 .15 .2 .25 .3 .35
MAC level Error Rate
(a) PER of Access
.02 .04 .06 .08 .10 .12
MAC level Error Rate
(b) PER of Backbone
Figure 5: Plot showing the CDF of (a) PER of Ac-
cess (2.4 GHz) and (b) Backbone (5.2 GHz) band.
The PER is averaged for each MAP over all the runs at
diﬀerent locations.
We have plotted our results in Figure 5. The ﬁgure shows
the CDF of the PER for all the backbone (5.2 GHz) and the
access (2.4 GHz) bands. We observe that the PER on the
access side is much higher than that on the backbone side.
This result indicates that the errors rate in 2.4 GHz access
band is much higher than the 5.2 GHz backbone band, which
can be attributed to much higher level of interference and
noise in the 2.4 GHz band, used widely by most wireless
access points to serve end clients. Further, on the access
side, the client to MAP link is more vulnerable due to the
lower transmit power of the client devices as compared to
the MAP. This link asymmetry which can lead to packet
losses from client to MAP, even though the signal strength
from the MAP to the client is high.
We validated this assumption using a client device with
a higher transmit power, and as expected the PER on the
access band was signiﬁcantly lower for that client.
Since client devices typically have lower transmit power,
the performance on an end-to-end mesh path will be severely
impacted by the interference and errors observed on the
access link. Even if the mesh backbone is of high quality
(which is the case for MadMesh), the performance observed
by clients will be limited by the interference and error eﬀects
on its direct connection to the ﬁrst MAP.
3.4 Channel selection in backbone and access
links
As described before, the packet error rates on the access
links are signiﬁcantly higher than those of the backbone
links. In order to understand this contrast, we ﬁrst examine
the signal-to-noise ratio (SNR) of the backbone links. For a
link operating on a higher SNR, there is a higher probabil-
ity of successful packet transmissions. Similarly, links with
low SNR values can result in high packet error rates. Such
low SNR values could be because of presence of high levels
of ambient interference in the network or due to a very low
received signal strength. In Figure 6(a) we plot the CDF of
the SNR values reported for all the backbone links across
the duration of study. We observe that nearly 99% of the
links have an SNR above 15 dB. These high values of SNR
explain the minimal values of PER seen on the backbone
links.
We next turn out attention to the quality of the access
links. Similar to the backbone links, high SNR values in
the access would imply that the clients would experience
relatively low losses on the access links. To study the char-
acteristics of the access links ideally we would like to plot
the SNR for these links. However, diﬀerent client radios
n
o
i
t
c
a
r
F
0.9
0.8
0.7
0.6
0.5
0.4
0.3
0.2
0.1
 10  15  20  25  30  35  40  45  50
SNR (in dB)
(a) SNR of Backbone
 100
 80
 60
 40
 20
n
o
i
t
c
a
r
F
Best
Current
 0
−100 −90 −80 −70 −60 −50 −40
Interference (in dBm)
(b) Interference in Ac-
cess
Figure 6: Plot showing the (a) CDF of SNR for all
backbone links and (b) CDF of Interference of all
MAPS for access, along with the least interference
possible (in another channel).
use diﬀerent radios (quality/brand) and diﬀerent transmit
powers. This makes the reported SNR a function of the
client device used and also its proximity to the MAP, which
are diﬃcult to quantify. We therefore analyzed the amount
of ambient noise (the raw power received from non-802.11
sources operating in the same channel) and the amount of
interference (raw power received from 802.11 sources other
than the client in communication). These values are re-
ported periodically in the SNMP records for the duration
of study. We observed that the ambient noise ﬂoor was at
an acceptable level of -90 dBm, for nearly 90% of the access
links.
In contrast, we observed that the amount of inter-
ference was very high. Figure 6(b) shows the CDF of the
amount of interference for all the access links. As can be
seen from the plot, more than 20% of the access links expe-
rience a high interference of −70 dBm. We attribute such
high values of interference to be one of the main reasons for
high PER seen on the access links. Another possible rea-
son could be the low RSS of the client radios, however we
could not verify this as we did not have access to the MAP
software.
A possible remedy for the losses would involve a) forc-
ing the clients to use a better RSSI while talking with the
MAPs and b) ensure that the access link operates in the
channel with the least amount of ambient noise and inter-
ference. While, the signal strengths from the clients can not
be controlled by the MAPs, they can ensure that they oper-
ate in the best possible channel (channel with least amount
of interference and ambient noise). To ﬁnd out whether the
MAPs are indeed working in the best channel, we plot the
CDF of the least amount of interference present in any given
channel for all the SNMP snapshots in Figure 6(b). The
plot shows the MAPs are not working in the best channel
available. We believe that adoption of a channel of opera-
tion selection algorithm would result in better performance
in the mesh. Designing such channel selection algorithm is
nontrivial, since while selecting the locally best channel of
operation the MAPs have to ensure that they operate in
independent channels to avoid interfering with each other.
However given the huge loss rates observed in the current
settings, we believe that this optimization would result in
improvement of overall mesh performance.
3.5 Feasibility of Network Coding
A good degree of connectivity in the mesh network has
an implication in context of current ongoing research in the
i
n
a
g
i
g
n
d
o
c
m
u
m
x
a
M
i
 6
 5
 4
 3
 2