VehicleAccelerationArbiterAdaptive CruiseControl (ACC)Collision Avoidance (CA)DriverAccelerationCommandBrakePedalThrottlePedalRear CollisionAvoidance (RCA)Park Assist(PA)Lane ChangeAssist (LCA)SteeringWheelVehicleSteeringSteeringCommandAccelerationRequestSteeringRequestHuman-Machine Interface (HMI)Figure2.Semi-autonomousautomotivesystemA⇒B(19)ORreductionismorerestrictivebecausesomefunction-alityofthesystemthatwouldbeotherwisebeaccept-ableisprohibited.Inequation17,thestateA∧¬X∧¬Bisacceptable,butinequation19itisnot.Anotherwaytomakethegoalmorerestrictiveistoincreasethesafetyenvelopeofagivenvariable.Con-sideragoalthatprohibitsvehicleaccelerationaboveacertainthresholdAccelerationLimit.Asubgoalforsubsystemsthatcontrolvehicleaccelerationmightpro-hibitvehicleaccelerationabovealowerthreshold,per-hapsAccelerationLimit−SafetyEnvelope.Atrun-time,ifthesystemgoalsandsubgoalsarenotmateriallyequivalent(i.e.,thegoalisnotfullycom-posedbythesubgoals),falsepositiveandfalsenegativedetectionsmayresult.Aviolationofasubgoalthatdoesnotcorrespondtoaviolationofitsparentgoalisconsid-eredafalsepositive(thesubgoalsindicateahazardousstatebutthesystemisnotinahazardousstate).Aviola-tionofagoalthatdoesnotcorrespondtoaviolationofasubgoalisconsideredafalsenegative(thesubgoalsdonotindicateahazardousstatebutthesystemisinahaz-ardousstate).Falsenegativescanoccurwhentheun-known/unrealizablesubgoal(s)arethecauseofthegoalviolation.Falsepositivescanoccurwhenthesubgoalsaremorerestrictivethantheoriginalsafetygoal.4.Semi-autonomousautomotivesystemICPAwasappliedtoanautomotivevehiclewithsafety-criticalsemi-autonomousfeaturesfromanautomotiveresearchlab.Thevehiclewasintendedasaplatformforresearchinsensorfusionandautonomouscontrol,andwasnotaproductionsystem.Atthetimeofthiswork,thesystemdesign,implementation,andsimulationen-vironmentwerefunctionalbutincomplete.ThevehiclesubsystemsincludedinthisstudyareshowninFigure2.Thefeaturesubsystemsincludetwoactivesafetyfeaturesandthreedriverconveniencefeatures.Colli-sionAvoidance(CA)detectsobjectsintheforwardpathandstopsthevehiclebeforeacollisionoccurs.RearCollisionAvoidance(RCA)performsasimilarfunctionwhenthevehicleismovinginreverse.AdaptiveCruiseControl(ACC)commandsthevehicletoaspeedsetbythedriver,ortoasetfollowdistancebehindaslowerleadvehicle.LaneChangeAssist(LCA)worksincon-junctionwithACCtoperformalanechangemaneuverwhenrequestedbythedriver.ParkAssist(PA)ﬁndsaparkingspaceandparksthevehicle,alsowhenre-questedbythedriver.Thisautomotivesystemissemi-autonomousbecausesubsystemscontrolvehiclemotionunderdriversuper-vision.InCAandRCA,thedriverhasprimaryrespon-sibilityfordetectingimminentcollisionsandavoidingthembysomemeans,suchasslowing,stopping,orsteeringthevehicle.Inthiscase,CAandRCAprovidebackupsafetybehaviorifthedriverfailstostoptheve-hicleintimetoavoidthecollision.InACC,LCA,andPA,thedriverisresponsibleformonitoringthefeaturebehaviorsandinterveningifneeded(e.g.ifadeerisheadingtowardtheroadbutnotyetdetectableintheve-hiclepath).Thedrivermayoverrideanyfeaturebehav-iorexceptanemergencystop,inwhichcasethedriverisonlypermittedtobrakeharderthanthefeature.4.1.Vehicle-levelsafetygoalsRequirementsfortheresearchvehiclewerenotwritteninaformalspeciﬁcationlanguage.Inaddition,therewerenospeciﬁcsafetygoalsdeﬁnedintherequire-mentsdocumentation.Thus,ourﬁrststepwastoiden-tifyandformallyspecifythesystemsafetygoals.Thesesafetygoalswerederivedfrominspectionofthefunc-tionalrequirements,thehazardanalysisthathadbeenperformedonthepreliminarysystemrequirements,and978-1-4244-4421-2/09/$25.00 c(cid:13)2009 IEEE
374
Authorized licensed use limited to: Tsinghua University. Downloaded on March 20,2021 at 05:37:55 UTC from IEEE Xplore.  Restrictions apply. 
Table1.Safetygoalsforsemi-autonomousautomotivesystemSystemSafetyGoalsS-01Goal:Achieve[AutoAccelBelowThreshold]InformalDef:Vehicleaccelerationcausedbyautonomousvehiclecontrolshallnotexceed2m/s2.FormalDef:∀va:VehicleAcceleration;IsSubsystem(va.source)⇒va.value≤2m/s2S-02Goal:Achieve[AutoJerkBelowThreshold]InformalDef:Vehiclejerkcausedbyautonomousvehiclecontrolshallnotexceed2.5m/s3.FormalDef:∀vj:VehicleJerk;IsSubsystem(vj.source)⇒vj.value≤2.5m/s3S-03Goal:Achieve[SubsystemAccelSteeringAgreement]InformalDef:Ifasubsystemrequestscontrolofaccelerationandsteeringandisgrantedcontrolofeitheraccelerationorsteering,thesubsystemshallcontrolbothaccelerationandsteering.FormalDef:∀ac:AccelerationCommand,sc:SteeringCommand,sn:SubsystemName●RequestingAcceleration(sn)∧●RequestingSteering(sn)∧((ac.source=sn)∨(sc.source=sn))⇒(ac.source=sc.source=sn)∧(ac.value=●RequestedAcceleration(sn))∧(sc.value=●RequestedSteering(sn))S-04Goal:Achieve[NoAutoAccelFromStop]InformalDef:Ifa)thevehicleisstoppedforadurationofStoppedTimeandb)thethrottlepedalhasnotbeenappliedwithintheprecedingAccelerationDelayandc)asubsystemiscontrollingaccelerationandd)theHMIhasnotsentagosignaltothecontrollingsubsystemwithintheprecedingAccelerationDelay,thenthereshallbenovehicleacceleration.FormalDef:∀va:VehicleAcceleration,vsp:VehicleSpeed,sn:SubsystemName,hmi:HumanMachineInterface,tp:ThrottlePedal,st:StoppedTime,ad:AccelerationDelay●■<stIsStopped(vsp.value)∧¬●(cid:2)<adApplied(tp)∧(va.source=sn)∧¬●(cid:2)<adApplied(hmi.go,sn)⇒NotAccelerating(va.value)anincompletesystemimplementation.Allofthesafetygoalspertaintolongitudinalaccelerationandlateralsteering.Inthissystem,allfeaturesattempttocontrolacceleration,andLCAandPAattempttocontrolsteer-ing.CA,ACC,andLCAareonlyoperationalwhenthevehicleisinforwardmotion,RCAisonlyoperationalinreverse,andPAoperatesinboth.Table1listssomeofthesafetygoalsidentiﬁed.Anhistoricconcernforautomotivesystemsisunin-tended,orsuddenacceleration[24].Althoughmostin-cidentsofunintendedaccelerationhavebeenattributedtodrivererror,asvehiclesmoveclosertofullyau-tonomouscontrol,itbecomesincreasinglypossibleforsuchaccelerationstobecausedbysystemdefects.TheﬁrstguardagainstunintendedaccelerationsaresafetygoalsS-01,whichprohibitsautonomousvehicleaccelerationandautonomousvehiclejerkthatexceedreasonablelimitsforcomfortinvehiclemotion[21].Thevehicleis,however,allowedtocauseuncomfort-ablelevelsofnegativeacceleration(deceleration)whenitperformssudden,uncomfortablestopstoavoidcolli-sions.SafetygoalS-04prohibitsautonomousacceler-ationswhenthevehicleisstopped(e.g.,ifACCstopsvehiclebehindastoppingleadvehicleorifCAstopsthevehicletoavoidanobjectintheroad).Thedriverisrequiredtoinitiateaccelerationbysendinga“go”sig-nalfromtheHuman-MachineInterface(HMI),orbypressingthethrottlepedal.Anotherconcernisfeatureinteraction[6],whichoc-curswhenthecombinedbehavioroftwofeaturesisun-deﬁnedinthespeciﬁcationofeither.Ifonefeaturecon-trolssteeringwhileanothercontrolsacceleration,abe-haviormayoccurthatisundeﬁnedbyeither,orbythesystemspeciﬁcation.SafetygoalS-03prohibitscon-trolofaccelerationandsteeringbydifferentsubsystemsifeitherisattemptingtocontrolboth.Itispossible,though,forthedrivertooverrideaccelerationorsteer-ing.Thesystemarchitectureincludesanarbitertose-lectthecontrolsourceofsteeringandacceleration.Thisuseofanarbiterisadesignchoiceofthedevelopersandnotnecessarilyrequiredtomeetthesafetygoals.4.2.ICPANext,weappliedICPAtothesystemsafetygoalsinTa-ble1toidentifysubgoalsforthesubsystems.Welim-itedtheanalysistotheﬁvefeaturesubsystemsandthearbitrationsubsystem.Table2liststhesafetysubgoalsforthearbiter(S-A-X)andfeatures(S-F-X).ThegoalcoveragestrategyforgoalsS-01,S-02,andS-04isredundantresponsibility.Astheﬁnalsourceofsystemaccelerationandsteeringcommands,thear-biterbecomestheprimarysourceformeetingthesys-temsafetygoal.Thesecondarysafetygoalsofthefea-turesubsystemsprovideprotectionagainstsomesingle-pointfailuresofthearbiter.Ifthearbiterfailsbychoosinganaccelerationorsteeringcommandfromthewrongfeaturesubsystemsource,thenthesystemshouldstillmeetthesafetygoal.However,ifthearbiterfailsinadifferentway(e.g.,summingrequestsfromdifferentfeatures),thenthefeatureswillnotprovidebackuppro-tectionagainstthefailure.ThegoalcoveragestrategyforgoalS-03issingleresponsibility,withthearbiterastheonlysourcesatisfyingthegoal.Analternativeredundantresponsibilitystrategycouldrequirefeaturestomonitorotherfeaturerequestsandcanceltheirown978-1-4244-4421-2/09/$25.00 c(cid:13)2009 IEEE
375
Authorized licensed use limited to: Tsinghua University. Downloaded on March 20,2021 at 05:37:55 UTC from IEEE Xplore.  Restrictions apply. 
Table2.Safetysubgoalsforsemi-autonomousautomotivesubsystemsSubsystemSafetySubgoalsS-A-01Goal:Achieve[AutoAccelCommandBelowThreshold](Arbiter)InformalDef:Accelerationcommandscausedbyautonomousvehiclecontrolshallnotexceed2m/s2.FormalDef:∀ac:AccelerationCommand,ar:AccelerationRequest(ac.source=●ar.source)⇒(ac.value≤2m/s2)S-A-02Goal:Achieve[AutoJerkCommandBelowThreshold](Arbiter)InformalDef:Accelerationcommandscausedbyautonomousvehiclecontrolshallnotcausejerktoexceed2.5m/s3.FormalDef:∀ac:AccelerationCommand,ar:AccelerationRequest;(ac.source=●ar.source)⇒(VehicleJerkResponse(ac.value,●ac.value)≤2.5m/s3)S-A-03Goal:Achieve[SubsystemAccelSteeringCommandAgreement](Arbiter)InformalDef:Ifasubsystemrequestscontroloftheaccelerationcommandandthesteeringcommandandisgrantedcontrolofeithertheaccelerationcommandorsteeringcommand,thesubsystemshallcontrolbothaccelerationandsteering.FormalDef:∀ac:AccelerationCommand,ar:AccelerationRequest,sc:SteeringCommand,sn:SubsystemName●ar.active∧●sr.active∧(●ar.source=●sr.source)∧((ac.source=●ar.source)∨(sc.source=●sr.source))⇒(ac.source=sc.source=●ar.source=●sr.source)∧(ac.value=●ar.value)∧(sc.value=●sr.value)S-A-04Goal:Achieve[NoAutoAccelFromStop](Arbiter)InformalDef:Ifa)thevehicleisstoppedforadurationofStoppedTimeandb)thethrottlepedalhasnotbeenappliedwithintheprecedingAccelerationDelayandc)asubsystemiscontrollingtheaccelerationcommandandd)theHMIhasnotsentagosignaltothecontrollingsubsystemwithintheprecedingAccelerationDelay,thentheaccelerationcommandshallbezero.FormalDef:∀ac:AccelerationCommand,vsp:VehicleSpeed,sn:SubsystemName,hmi:HumanMachineInterface,tp:ThrottlePedal,st:StoppedTime,ad:AccelerationDelay●■<stIsStopped(vsp.value)∧¬●(cid:2)<adApplied(tp)∧(ac.source=sn)∧¬●(cid:2)<adApplied(hmi.go,sn)⇒NotAccelerating(ac.value)S-F-01Goal:Achieve[AutoAccelRequestBelowThreshold](CA,RCA,ACC,LCA,PA)InformalDef:Accelerationrequestsshallnotexceed2m/s2.FormalDef:∀ar:AccelerationRequest;❑(va.value≤2m/s2)S-F-02Goal:Achieve[AutoJerkRequestBelowThreshold](CA,RCA,ACC,LCA,PA)InformalDef:Accelerationrequestsshallnotcausejerktoexceed2.5m/s3.FormalDef:∀vj:VehicleJerk;❑(VehicleJerkResponse(ar.value,●ar.value)≤2.5m/s3)S-F-04Goal:Achieve[NoAutoAccelRequestFromStop](CA,RCA,ACC,LCA,PA)InformalDef:Ifa)thevehicleisstoppedforadurationofStoppedTimeandb)thethrottlepedalhasnotbeenappliedwithintheprecedingAccelerationDelayandc)theHMIhasnotsentagosignaltothecontrollingsubsystemwithintheprecedingAccelerationDelay,thenaccelerationrequestsshallbezero.FormalDef:∀ar:AccelerationRequest,vsp:VehicleSpeed,sn:SubsystemName,hmi:HumanMachineInterface,tp:ThrottlePedal,st:StoppedTime,at:AccelerationTime●■<stIsStopped(vsp.value)∧¬●(cid:2)<adApplied(tp)∧¬●(cid:2)<adApplied(hmi.go,sn)⇒NotAccelerating(ar.value)whenhigher-priorityfeaturesrequestcontrol.However,thisrequiresthearbitrationlogictobebuiltandmain-tainedinmultiplesubsystems,whichisimpracticalinthisdistributeddevelopmentenvironment.5.EvaluationandresultsAlthoughitisimpossibletodetermineiftheun-known/unrealizablepartofthesystemsafetygoalhasbeenminimized,itispossibletodeterminewhetherornotthesubgoalsproducedbyICPAareuseful.Thepur-poseofgoalelaborationistwofold.First,itisimportanttoidentifysubsystembehaviorsthatcontributetohaz-ardsatdesign-timesothatthesubsystemdevelopmentteamcandesignandbuildthesubsystemtohelpsatisfythesystemgoal.Moreover,deﬁningsubsystem-levelsafetybehaviorshelpsﬁndpotentialproblemsearly,be-foresystemintegration.Asecondaimistomonitorthesubsystembehaviorsatrun-timetodeterminewhetherasubsystemisviolatingitssafetygoals.Violationsofsubgoalsmaybepredictorsofsystem-levelgoalviola-tions.Inthiswork,thesafetygoalsandsubgoalsweremonitoredinanimplementationofthevehicleinasim-ulationenvironment.5.1.SetupandevaluationscenariosThevehiclesystemwaspartiallyimplementedbyacommercialautomotiveresearchlabasaSimulinkR(cid:2)(versionR2008a)modelembeddedintheCarSimR(cid:2)(version7.01)simulationenvironmentfromMechani-calSimulation.CarSimR(cid:2)isasoftwaresystemforsim-ulatingvehicledynamicresponsestodifferentaccel-erationandsteeringinputs.Forcustomizeddesigns,modelsfromothersimulationenvironmentssuchasSimulinkR(cid:2)orLabviewTMcanbelinkedtothemodels.Althoughthefeatureswerepartiallyfunctionalatthetimeofthisevaluation,theimplementationofthevehi-978-1-4244-4421-2/09/$25.00 c(cid:13)2009 IEEE
376
Authorized licensed use limited to: Tsinghua University. Downloaded on March 20,2021 at 05:37:55 UTC from IEEE Xplore.  Restrictions apply. 