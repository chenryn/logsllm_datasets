low intra-cluster peer forwarding. Consider the node v and
its immediate neighbor v(cid:1)
in Figure 2(b). After receiving
a health status update from the CH, v(cid:1)
will forward the re-
port to v upon the request from v (which is made at the end
of fds.R-3, a timeout for report receiving). Peer forwarding
would also allow node v to receive messages from the DCH
of which v is not an immediate neighbor (see Figure 2(a)).
In that case, v(cid:1)
may perform forwarding based on its knowl-
edge about the DCH’s inability to reach v (learned from the
digest received from the DCH).
Energy Considerations. We prefer peer forwarding over
the retransmission by the DCH (or CH) because of energy-
balancing considerations. However, a potential problem
with intra-cluster peer forwarding is that multiple neigh-
bors may respond to a forwarding request simultaneously.
That may result in serious wastage of energy if a cluster
has a dense population. Thus we use the following strategy:
When a node v broadcasts a forwarding request, each of
v’s in-cluster neighbors will set a waiting period for the re-
quested forwarding. The waiting period could be a function
of the node’s NID (which is globally unique in the network)
and be inversely proportional to the node’s remaining en-
ergy, which would allow each of v’s neighbors to have a
unique waiting period and would balance energy. Accord-
ingly, the neighbors would not perform forwarding simul-
taneously. Rather, after one of them successfully forwards
the message, the other neighbors will quit upon overhearing
an acknowledgment from v.
4.3 Inter-Cluster Failure Report Forwarding
If at the end of fds.R-3 a GW in a cluster C receives an
update from the CH that indicates a newly detected failure,
the GW will forward the update as a failure report to the
CH(s) of the neighboring cluster(s) it connects to. In addi-
tion to the NID of the newly detected failed node, a failure
report may also include the NIDs of the previously detected
failed nodes. That enables the detection service to provide
a better probabilistic guarantee of the completeness prop-
erty (if an earlier failure report could not successfully reach
some cluster, the cluster may eventually be able to learn the
missed failure information). On the other hand, an update
that does not indicate any newly detected failures will not
yield any inter-cluster forwarding. Accordingly, the clus-
ters in the system will interpret the absence of such a report
from cluster C as “no news is good news.” However, if a
cluster sends a failure report to its neighboring clusters, we
must ensure that with high probability, the report will be
successfully forwarded to all other clusters in the system.
A major challenge in inter-cluster forwarding is that we
Proceedings of the 2004 International Conference on Dependable Systems and Networks (DSN’04) 
0-7695-2052-9/04 $ 20.00 © 2004 IEEE 
Authorized licensed use limited to: Tsinghua University. Downloaded on March 20,2021 at 10:03:37 UTC from IEEE Xplore.  Restrictions apply. 
must mitigate the effect of message loss during the failure
report forwarding and meanwhile keep the costs of trans-
mission and retransmission low. Speciﬁcally, retransmis-
sion, the means for tolerating link failure along the inter-
clustering forwarding, needs to be activated by the absence
of an acknowledgment from the intended recipient. This
suggests that each across-cluster forwarding would always
involve two acknowledgments, which is not acceptable due
to energy limitations. To meet this challenge, we again
take advantage of the nodes’ promiscuous receiving mode
in ad hoc wireless settings to reduce the cost of retransmis-
sion. The ﬁrst mechanism is illustrated in Figure 3. Specif-
ically, we make use of the message that is forwarded by
the successor forwarding node (GWi) and is overheard by
the sender (CHi) as an implicit acknowledgment3, to reduce
the number of messages involved in inter-cluster forward-
ing. Accordingly, CHi will set its timer to 2 Thop right af-
ter forwarding a message to GWi; then, if CHi does not
overhear GWi’s forwarding by timer expiration, CHi will
assume that the ﬁrst transmission is unsuccessful and thus
will retransmit the message.
CHi
CHi
GWi
CHj
GWi
CHj
(a)
CHi
sends a message
(b)
GWi
forwards the message
Figure 3: Implicit Acknowledgment
We note that in addition to its ability to take over from
a failed GW, a BGW can be employed to enable energy-
balanced message-loss recovery. Accordingly, we devise a
mechanism to enable BGW-assisted forwarding as follows.
Suppose that between two neighboring clusters C and
(cid:1)
there are n BGWs, each of which has a unique rank
C
k (k ∈ {1, . . . , n}). Upon overhearing a message m for-
warded by the CH of C and realizing further forwarding to
(cid:1)
is necessary, a BGW ranked k will set a timeout period
C
k 2Thop that it uses to see if m is successfully forwarded to
(cid:1)
C
If the
BGW does not overhear an implicit acknowledgment from
(cid:1)
by timer expiration, it will forward m by itself
the CH of C
and then wait for (n+1) 2Thop to see if an implicit acknowl-
(cid:1)
. This BGW will
edgment can be heard from the CH of C
release itself from standby if it hears such an acknowledg-
ment prior to its timer expiration.
by the GW or a BGW with a rank j (j < k).
(cid:1)
As to the GW (between C and C
), it will forward m
immediately after receiving the message and learning of the
3A similar mechanism to eliminate the need for explicit acknowledg-
ments in order to reduce the cost of retransmission was independently pro-
posed by [17].
need to forward. In order to allow the BGWs to assist in re-
forwarding m if the GW’s forwarding is unsuccessful, the
GW will set its timer to (n+1) 2Thop and will not re-forward
(cid:1)
m unless the implicit acknowledgment from the CH of C
has not been heard by timer expiration.
5 Probabilistic Analysis
The quantitative study presented in this section evaluates
a number of probabilistic measures concerning the com-
pleteness and accuracy properties of the FDS. In the analy-
sis, we assume that all the hosts have a transmission range
of 100 meters and that each cluster will have 50 to 100 op-
erational hosts whose locations are statistically uniformly
distributed. Furthermore, we let p denote the message loss
probability4. More precisely, we assume that if a node v
transmits a message, the message may fail to reach a neigh-
bor of v with probability p (as assumed by others in similar
settings; see [6, 3], for example). In addition, based on our
assumption of appreciable message loss probability, we let
[0.05, 0.5] be the range of p. Finally, as shown in the follow-
ing sections, we chose to deﬁne probabilistic measures on a
local cluster basis. The rationales for this choice are as fol-
lows: 1) global-level measures will require the assumptions
of an inter-cluster routing algorithm and a network topol-
ogy, and 2) the proposed FDS emphasizes localized algo-
rithms and thus the per-cluster level measures will sufﬁce
for the purpose of an initial demonstration.
5.1 Measures Concerning Accuracy
Recall that as deﬁned in Section 4.1, “accuracy” means
that “no operational node will be suspected by other oper-
ational nodes.” As the FDS executes locally in the clusters
and there is no message creation or alteration over the net-
work, the accuracy property will be affected only if a CH (or
DCH) reports a false detection. Hence, we deﬁne a measure
P (False detection), which is the probability that an opera-
tional host will be mistakenly judged to be a failed host in an
FDS execution. To evaluate P (False detection), we identify
the conditions under which a false detection will happen:
C1) The CH receives neither the heartbeat from an oper-
ational node v nor the digest sent by v by the end of
fds.R-2; and
C2) None of the digests that the CH receives during fds.R-2
show that v is alive.
We note that the number of in-cluster neighbors that a
(non-CH) host v can have depends on its position in the
cluster. In particular, as illustrated in Figures 4(a) and 4(b),
the farther v is from the center, the smaller the overlapping
region (the area with vertical lines) between cluster C (the
4Collision-caused message losses at the sender side are not considered
here, as they will be masked by a CSMA scheme at the MAC layer.
Proceedings of the 2004 International Conference on Dependable Systems and Networks (DSN’04) 
0-7695-2052-9/04 $ 20.00 © 2004 IEEE 
Authorized licensed use limited to: Tsinghua University. Downloaded on March 20,2021 at 10:03:37 UTC from IEEE Xplore.  Restrictions apply. 
shaded circle) and the neighborhood area of v (the dashed
circle) is, and thus the lower the chance that v will have
many in-cluster neighbors that can hear its heartbeat and
report it via a digest to the CH.
cally, if the cluster is densely or moderately densely popu-
lated (i.e., N = 100 or N = 75, respectively), the values
of ˆP (False detection) are very small, even when p equals
0.5. Even with a reduced node population density, namely
N = 50, the results of the measure are still very reasonable.
Au
Au
R
v
An
(a)
v
c
An
(b)
Figure 4: Transmission Range Overlapping
It follows that a host v that locates on the circumfer-
ence of a cluster will represent the worst case (see Fig-
ure 4(b)). Accordingly, we evaluate the upper bound of
P (False detection) based on that case, and let this measure
be denoted by ˆP (False detection). From the false detec-
tion conditions discussed above (namely C1 and C2) and
the assumption that hosts are approximately uniformly dis-
tributed, we formulate ˆP (False detection) as follows:
N−2(cid:1)
ˆP (False detection) = p2
(cid:3)(N−2)−k(cid:2)
(cid:2)
1 − An
Au
(cid:2)
N − 2
(cid:2)
(cid:3)k k(cid:1)
k
(cid:3)
×
(cid:3)
(1 − p)jpk−jpj
k
j
j=0
k=0
An
Au
c
0
(cid:6)
(cid:7)
(cid:5)√
dx, where c =
R2 − x2 − 0.5R
where N is the number of nodes in the cluster, Au is the
total area of the cluster (the shaded area in Figure 4(b)),
and An is v’s neighborhood area within C (the shaded
(cid:4)
area with vertical lines in Figure 4(b)). Thus An =
R2 − (0.5R)2
4
(see Figure 4(b)). Note that in the above equation, the co-
efﬁcient p2 computes the probability that C1 is true, while
each summand of the inner summation evaluates the condi-
tional probability that C2 is true given that v has k in-cluster
neighbors. More precisely, the inner summation enumerates
1) the probability that v’s heartbeat is not overheard by any
of its k in-cluster neighbors during fds.R-1 (i.e., j = 0),
and 2) the probabilities that v’s heartbeat is overheard by j
in-cluster neighbors during fds.R-1 (0 < j ≤ k), but none
of their digests are received by the CH during fds.R-2. Fi-
)(N−2)−k( An
)k evaluates the
nally, the term
Au
probability that v has k in-cluster neighbors.
We then evaluate ˆP (False detection) as a function of p.
The results are displayed in Figure 5, where the top, mid-
dle, and bottom curves correspond to the cases in which
the node population sizes of C are 50, 75, and 100, respec-
tively. As illustrated by the curves, the FDS behaves well
in terms of being resilient to message loss. More speciﬁ-
(cid:5)
N−2
k
(1 − An
Au
(cid:6)
1
)
n
o
i
t
c
e
t
e
d
e
s
l
a
F
(
^P
1e-05
1e-10
1e-15
1e-20