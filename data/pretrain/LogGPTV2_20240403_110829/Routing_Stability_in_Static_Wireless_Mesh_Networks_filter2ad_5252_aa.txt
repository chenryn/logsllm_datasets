title:Routing Stability in Static Wireless Mesh Networks
author:Krishna N. Ramachandran and
Irfan Sheriff and
Elizabeth M. Belding and
Kevin C. Almeroth
Routing Stability in Static Wireless Mesh Networks
Krishna Ramachandran, Irfan Sheriff, Elizabeth Belding, and Kevin Almeroth
University of California, Santa Barbara
Abstract. Considerable research has focused on the design of routing protocols
for wireless mesh networks. Yet, little is understood about the stability of routes
in such networks. This understanding is important in the design of wireless rout-
ing protocols, and in network planning and management. In this paper, we present
results from our measurement-based characterization of routing stability in two
network deployments, the UCSB MeshNet and the MIT Roofnet. To conduct
these case studies, we use detailed link quality information collected over sev-
eral days from each of these networks1. Using this information, we investigate
routing stability in terms of route-level characteristics, such as prevalence, per-
sistence and ﬂapping. Our key ﬁndings are the following: wireless routes are
weakly dominated by a single route; dominant routes are extremely short-lived
due to excessive route ﬂapping; and simple stabilization techniques, such as hys-
teresis thresholds, can provide a signiﬁcant improvement in route persistence.
1 Introduction
Applications, such as ‘last-mile’ Internet delivery, public safety, and distributed sensing,
are driving the deployment of large-scale multi-hop wireless networks, also known as
mesh networks. Although wireless routers in such networks are typically stationary,
routes in these networks are expected to be unstable. One reason is that wireless links
vary widely in their qualities because of multi-path fading effects, external interference
and weather conditions. Link quality ﬂuctuations can lead to variations in the quality of
mesh routes, which can result in route ﬂuctuations. This type of instability is unique to
wireless networks.
Current routing protocols are not intelligent enough to consider routing stability dur-
ing the selection of routes. A majority of the routing protocols [6] [14] ignore the fact
that a route initially discovered has become sub-optimal over time. Route rediscovery
is typically triggered by only route breaks and route timeouts. This approach can be
detrimental to network performance.
Other routing protocols [2][7] periodically re-evaluate the quality of a route. The
evaluation periodicity depends on the rate at which routing protocol control messages
are exchanged. This approach fails to adapt to route quality variations that occur at
smaller time-scales. However, by always picking the best route available, the resulting
routing instability can lead to routing pathologies, such as packet reordering [3], which
can severely degrade network performance.
1 The collected datasets are available for download at
http://moment.cs.ucsb.edu/meshnet/datasets.
S. Uhlig, K. Papagiannaki, and O. Bonaventure (Eds.): PAM 2007, LNCS 4427, pp. 73–82, 2007.
c(cid:2) Springer-Verlag Berlin Heidelberg 2007
74
K. Ramachandran et al.
We require a routing protocol that provides the best tradeoff between performance
adaptability and routing stability. A detailed investigation of routing stability can help
us design such a routing protocol.
Another reason such an analysis is important is because routing stability impacts
mesh network management. As an example, channel management schemes [15,16] in
multi-radio mesh networks assign channels to frequency diversify routes in the mesh.
If routes are expected to change, the mesh radios should also be re-assigned channels
in order to ensure optimal network performance.
An understanding of routing stability can also help in network planning, such as
router placement and radio conﬁguration. For example, stability analysis may suggest
that routes to certain regions in the coverage area ﬂuctuate frequently. The reason could
be either poor placement of routers or radio misconﬁguration.
Although considerable research has focused on the design of routing protocols and
routing metrics for wireless mesh networks, there exists no formal study of routing
stability in such networks. This paper presents the ﬁrst measurement-based character-
ization of routing stability in static wireless mesh networks. We perform our study by
answering questions such as: (1) Is there a clear choice of an optimal route between a
source-destination pair? (2) If not, how long do such routes persist before a route change
(ﬂap) occurs? (3) What beneﬁt does a route ﬂap provide? and (4) What measures can
help reduce route ﬂaps?
In order to perform our measurement-based characterization of routing stability, we
analyze link-quality information collected over a period of 2-3 days from two mesh
network deployments, the UCSB MeshNet2, and the MIT Roofnet3. The MeshNet is
a 20-node multi-radio 802.11a/b network deployed indoors on ﬁve ﬂoors of a typical
ofﬁce building on the UCSB campus. The MIT Roofnet is a 22-node outdoor network
spread over four square kilometers in Cambridge, MA.
Clearly, routing stability analysis is inﬂuenced by the routing protocol. In order to
investigate routing stability independent of any particular routing protocol, we compute
high-throughputroutes between all pairs of nodes assuming global knowledge of the col-
lected link qualities. Routes are computed greedily, on a per-minute basis in our analysis,
using the Dijkstra algorithm with the Weighted Cumulative Expected Transmission Time
(WCETT) [7] as the path selection metric. We use WCETT because it has been shown
to discover high throughput paths [7]. We compute routes greedily because we want to
establish an upper bound on route capacities deliverable by a mesh network. Using the
maximum capacities, we seek to understand the tradeoffs with respect to route instability.
The major ﬁndings from our study are as follows:
– Mesh routes are weakly dominated by a single route. The median prevalence of the
dominant routes on the MeshNet and Roofnet are 65% and 57% respectively.
– Dominant routes are short-lived because of an excessive number of route ﬂaps,
most of which last only one minute.
– In a large number of cases, a route ﬂap provides marginal improvement in through-
put. 50% of the route ﬂaps on the MeshNet, and 27% on the Roofnet, provide less
than a 10% throughput improvement.
2 http://moment.cs.ucsb.edu/meshnet
3 http://pdos.csail.mit.edu/roofnet
Routing Stability in Static Wireless Mesh Networks
75
– Avoidance of routes that either last only one minute or provide only 10% through-
put improvement increases the lifetime of the dominant route up to ﬁve-fold on the
MeshNet and up to four-fold on the Roofnet.
Although the above ﬁndings are speciﬁc to the two networks we have analyzed, we
believe that the trends observed are generally applicable. Some of the ﬁndings discussed
in this paper are well-known. A major contribution of this paper is a quantitative char-
acterization of the extent of instability.
2 Related Work
Many studies have analyzed routing stability for wireline networks. Paxson reported on
routing loops, routing stability, and routing symmetry by analyzing route information
collected using traceroute [17]. Paxson found that Internet paths are typically domi-
nated by a single route, and that a majority of Internet routes persist for either days or
weeks. Labovitz et al. investigated Internet routing stability by analyzing BGP routing
messages collected at key vantage points in the Internet [13]. Govindan et al. studied the
growth of the Internet from 1994 to 1995 and found that route availability had degraded
with the Internet’s growth [9]. More recently, considerable attention has been given to
routing pathologies because of BGP conﬁguration faults [8,18].
In the domain of wireless networks, various routing protocols [2,6,14] have been
proposed for multi-hop wireless networks. Although the discovery of routes has been
extensively studied by these efforts, to the best of our knowledge, there exists no for-
mal study of routing stability in such networks. Studies have investigated connectivity
between source-destination pairs in mobile ad hoc networks in terms of the lifetime of
routes [1]. However, in such networks, node mobility inﬂuences the route lifetime. Our
focus is on static mesh networks where mobility has little bearing on routing stability.
Instead, the stability is inﬂuenced by the network topology and variations in link quality.
3 Methodology
Our analysis of routing stability is based on link quality information collected from the
UCSB MeshNet and the MIT Roofnet. We start this section by brieﬂy describing the two
deployments. We then discuss the technique used to collect link quality information,
following which we present the route computation engine that uses the link qualities
to compute routes. We end this section with a discussion of some shortcomings in our
methodology.
3.1 Network Deployments
The UCSB MeshNet is a multi-radio 802.11a/b network consisting of 20 PC-nodes
deployed indoors on ﬁve ﬂoors of a typical ofﬁce building in the UCSB campus. Each
node is equipped with two types of PCMCIA radios: a Winstron Atheros-chipset
802.11a radio and a Senao Prism2-chipset 802.11b radio. Each type of radio operates on
a band-speciﬁc common channel. For rate adaptation, the 802.11b and 802.11a radios
76
K. Ramachandran et al.
use auto-rate feedback [10] and SampleRate [2] respectively. There are 802.11b access
points deployed in the building, which operate on various 802.11b channels. There is
no external interference in the 802.11a band.
The MIT Roofnet consists of 22-nodes spread over four square kilometers in Cam-
bridge, MA. Each node is a PC equipped with a Prism2-chipset 802.11b radio and an
omni-directional antenna that is either roof-mounted or projecting out of a window. All
radios operate on the same 802.11b channel. The Roofnet nodes experience interference
from other, non-Roofnet access points.
3.2 Link Quality Estimation
Link quality is measured using the Expected Transmission Time (ETT) metric [7],
which estimates the total time to transmit a packet on a link. The ETT is calculated from
a link’s loss rate and its data rate. ETT is given by the equation: [(packetsize)/(d1 ∗
d2 ∗ bw)], where d1 and d2 are the link’s delivery ratios in the forward and reverse di-
rections, and bw is the average of the link data rate reported by the two end nodes on
the link. packetsize is assumed to be 1500 bytes.
In the case of the MeshNet, the link quality information was collected on three dif-
ferent days. The loss rate was calculated by having each node issue a broadcast probe
of size 524 bytes every second on each of its radios. Each node records the number
of probes received from each of its neighbors in a 10 second window. The ratio of the
number of packets received to the number of packets sent (10) yields a link’s delivery
ratio. The link data rate is measured using packet pair probing [11]. Every 10 seconds,
each node issues packet-pair unicast probes of size 134 bytes and 1134 bytes on each
of its radios. The difference in transmission time of the packet pair, as measured by a
neighbor, is piggybacked on packet pairs issued by that neighbor. Every 10 seconds,
each node reports each of its link’s delivery ratio and data rate to a central repository.
In the case of the Roofnet, link delivery ratios are available4 on a per-minute basis
for each 802.11b data rate. Since bandwidth information is not available for ETT com-
putation, we set the link’s ETT to be the ETT at the lowest data rate. In order to compute
link delivery ratios, every 3 seconds, each Roofnet node broadcasts a 1500 byte probe
at each of the 802.11b data rates, and a 134 byte probe at 1 Mbps. The 1500 byte probe
is used to estimate the delivery probability of a large data packet at each of 802.11b
data rates, whereas the 134 byte probe is used to estimate the delivery probability of
a 802.11b acknowledgment. We use link delivery ratios on the 12th and 13th of May
2004 in our analysis.
3.3 Route Computation
We compute routes between all source-destination pairs for each minute recorded in
our two data sets using an implementation of the Dijkstra’s shortest-path algorithm. The
quality of a route is computed using the Weighted Cumulative Expected Transmission
Time (WCETT) metric [7]. The WCETT of a route is an estimate of the time a packet
will take to traverse that route. The estimate is computed by taking into account the data
4 http://pdos.csail.mit.edu/roofnet
Routing Stability in Static Wireless Mesh Networks
77
rates, reliabilities, and channel assignments of all links on the path. We set WCETT’s
channel diversiﬁcation parameter to 0.5. This setting gives equal weight to a path’s
channel diversiﬁcation and its packet delivery rate [7]. In the case of the Roofnet, all
radios operated on a common channel. Hence, channel diversiﬁcation did not play a
role in the route computation for the Roofnet. A total of 6,345 and 11,470 unique routes
were observed for the MeshNet and the Roofnet, respectively.
3.4 Shortcomings
Some noteworthy shortcomings in our analysis methodology are worth considering.
First, we do not explicitly account for the impact of network load and external networks
on the link quality measurements. In the case of the UCSB MeshNet, there was no data
trafﬁc on the mesh during the collection period. We are unable to say for a fact that
this was the case with the MIT Roofnet because the Roofnet was operational during the
link quality monitoring. Both networks experienced interference on the 802.11b band.
We believe that the outcome of our analysis does not change per se. However, with our
current methodology, we are unable to quantify the extent of the impact of these factors
on our results. We plan to address this shortcoming in our future work.
A second consideration is the relationship between routing stability and time-of-
day patterns. Routing behavior is expected to be more stable during off-peak hours
when external interference and the load on the network are typically low. Our current
analysis does not differentiate routing behavior based on time-of-day patterns. We plan
to investigate this effect in our future work.
Finally, the conﬁguration of a radio, such as its transmission power, receive sensi-
tivity, and carrier sense threshold, is likely to inﬂuence routing stability. A majority of
current radios and their drivers do not permit ﬁne-grained control of conﬁguration set-
tings. As a result, an empirical-based analysis of the impact of radio conﬁguration on
routing stability is challenging. Software-deﬁned radios are likely to help address this
limitation.
4 Stability Analysis
We use three stability metrics in our analysis. First, prevalence is the probability of ob-
serving a given route [17]. Second, persistence represents the duration for which a route
lasts before a route change occurs [17]. Third, route ﬂap refers to a change in route.
4.1 Route Prevalence and Persistence
For a given source-destination pair, we analyze its routing prevalence in terms of its
dominant route. The dominant route is the route observed the most number of times.
In order to compute pd, the prevalence of the dominant route, we note np, the total
number of times any route was available between the given pair as is observed in the set
of routes computed using the technique described in Section 3.3; and kp, the number of
times the dominant route was observed in the same route set. The prevalence pd is then
given as pd = kp/np.
78
K. Ramachandran et al.
y
t
i
l
i
b
a
b
o
r
p
e
v
i
t
l
a
u
m
u
C
 1
 0.9
 0.8
 0.7
 0.6
 0.5
 0.4
 0.3
 0.2
 0.1
 0
 0.1  0.2  0.3  0.4  0.5  0.6  0.7  0.8  0.9
Prevalence of dominant route
MeshNet
Roofnet
y
t
i
l
i
b
a
b
o
r
p
e
v
i
t
l
a
u
m
u
C
 1
 1
 0.9
 0.8
 0.7
 0.6
 0.5
 0.4
 0.3
 0.2
 0.1
 0
MeshNet
Roofnet
 1
 10
 100
 1000
Persistence of dominant route (minutes)
Fig. 1. Prevalence of the dominant route for
all source-destination pairs
Fig. 2. Persistence of the dominant routes
between all source-destination pairs
s
r
i
a
p
e
d
o
n
f
o
n
o
i
t
c
a
r
F
 1
 0.9
 0.8
 0.7
 0.6
 0.5
 0.4
 0.3
 0.2
 0.1
 0
MeshNet
Roofnet
 0
 20
 40
 60
 80
 100
Number of unique routes
Fig. 3. Number of unique routes for all source-destination pairs
Figure 1 shows the cumulative distribution of the prevalence of the dominant route
for all source-destination pairs in the MeshNet and Roofnet. We observe that the domi-
nant routes in both networks have a wide distribution of prevalence values. The median
prevalence on the MeshNet and Roofnet are 65% and 57%, respectively. This observation
suggests that routes in static mesh networks are weakly dominated by a single route.
We next analyze the persistence of the dominant routes. In order to calculate the per-
sistence of the dominant route, we record all the durations observed for each dominant
route. The persistence of a dominant route is then computed as the average of all its
recorded durations.
Figure 2 plots the cumulative distribution of the persistence values in minutes for
the dominant routes. For better clarity, only persistence values in the range of 1-1200
minutes are depicted on the x-axis. We observe that the dominant routes for both net-
works have a wide distribution of persistence values. The median persistence value for
the MeshNet is 9.6 minutes, and the corresponding value for the Roofnet is 3.2 minutes.
This result suggests that routes in static mesh networks are short-lived.
Note that, in general, the prevalence and persistence of the dominant route in the
MeshNet are higher than in the Roofnet. To investigate the reason, we examined the
number of unique routes computed between all pairs of nodes in the two networks.
Figure 3 shows the cumulative distribution of the number of unique routes for all source-
destination pairs. For the median node pair, the MeshNet offers 7 unique routes while
the Roofnet offers as many as 17 unique routes. In general, the number of unique routes
available between node pairs in the Roofnet is much higher than in the MeshNet. There-
fore, there exists a higher probability for a Roofnet node-pair to choose a route other
Routing Stability in Static Wireless Mesh Networks
79
than the dominant route, compared to a MeshNet node-pair. This reason could explain
the lower prevalence and persistence values in the Roofnet compared to the MeshNet.
One plausible explanation for the higher number of available routes in the Roofnet
lies in the difference in the design of the two networks. The Roofnet is an outdoor
802.11b network, whereas the MeshNet is an indoor 802.11a/b network. In spite of be-