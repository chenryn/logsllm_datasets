title:Maximizing system lifetime by battery scheduling
author:Marijn R. Jongerden and
Boudewijn R. Haverkort and
Henrik C. Bohnenkamp and
Joost-Pieter Katoen
978-1-4244-4421-2/09/$25.00 c(cid:13)2009 IEEE
63
Authorized licensed use limited to: Tsinghua University. Downloaded on March 20,2021 at 09:56:40 UTC from IEEE Xplore.  Restrictions apply. 
MaximizingSystemLifetimebyBatteryScheduling∗MarijnJongerden†¶BoudewijnHaverkort†‡HenrikBohnenkamp§Joost-PieterKatoen†§†UniversityofTwenteCentreforTelematicsandInformationTechnology7500AEEnschede,TheNetherlands{jongerdenmr,brh}@ewi.utwente.nlPhone/Fax:+31534898041/4524‡EmbeddedSystemsInstituteEindhoven,TheNetherlandsboudewijn.haverkort@esi.nlPhone:+31402474720§RWTHAachenUniversitySoftwareModelingandVeriﬁcation52056Aachen,Germany{henrik,katoen}@cs.rwth-aachen.dePhone/Fax:+492418021201/22217AbstractTheuseofmobiledevicesislimitedbythebatterylife-time.Somedeviceshavetheoptiontoconnectanextrabat-tery,ortousesmartbattery-packswithmultiplecellstoex-tendthelifetime.Inthesecases,schedulingthebatteriesovertheloadtoexploitrecoverypropertiesusuallyextendsthesystemlifetime.Straightforwardschedulingschemes,likeroundrobinorchoosingthebestbatteryavailable,al-readyprovideabigimprovementcomparedtoasequentialdischargeofthebatteries.Inthispaperwecomparetheseschedulingschemeswiththeoptimalschedulingschemeproducedwithapriced-timedautomatonbatterymodel(im-plementedandevaluatedinUppaalCora).Weseethatinsomecasestheresultsofthesimpleschedulingschemesareclosetooptimal.However,theoptimalschedulesalsoclearlyshowthatthereisstillroomforimprovingthebat-terylifetimes.Keywords.Scheduling,EmbeddedSystems,Batteries,LifetimeOptimization,KineticBatteryModel,Priced-TimedAutomata.1.IntroductionMobiledevicesusuallyrelyonbatteriesfortheirpowersupply.Thecapacityofthebatteriesisﬁnite,andthedu-rationwithwhichonecanusethedeviceislimitedbythebatterylifetime.Lifetime,here,isthetimeofonedischarge∗Theauthorsdeclarethatthecontentofthispaperhasbeenclearedforpublicationbytheauthorsrespectiveinstitution.ThisworkispartiallysupportedbyEU-ProjectICT-FP7-STREP214755(Quasimodo).¶CorrespondingAuthor.periodofthebattery,fromfulltoempty.Whilethebat-terylifetimedependsmostlyonitscapacityandtheleveloftheloadappliedtoit,anotherimportantinﬂuence,onwhichwewillfocusinthispaper,ishowthebatteryisused,i.e.,itsusagepattern[10].Whenabatteryiscontinuouslydis-charged,ahighcurrentwillcauseittoprovidelessenergyuntiltheendofitslifetimethanalowercurrent.Thiseffectistermedtherate-capacityeffect.Ontheotherhand,duringperiodsoflowornodischargecurrent,thebatterycanre-covertoacertainextend.Thisistermedtherecoveryeffect.ThesetwoeffectsaremodeledintheKineticBatteryModel(KiBaM)ofManwellandMcGowan[17,18,19].Oneapproachtoimprovesystemlifetimeistoconnectoneormoreextrabatteries,whicharechosenfollowingsomescheduleorschedulingpolicy.Inmostsystems,thebatteriesareusedsequentially,i.e.,onlywhenonebatteryisemptytheotherisused.However,byswitchingbackandforthbetweenthetwobatteriesonecanmakeuseoftherecoveryeffectofthebatteriesandextendtheoverallsystemlifetime.SomeresearchonbatteryschedulinghasbeendonebyChiasserinietal.[9]andBeninietal.[7].Inthesepapers,severalstraightforwardschedulingschemes,likeroundrobinorchoosingthebestbatteryavailable,arecompared.Althoughtheydoshowthatsystemlifetimecanbeextendedbyusingbatteryscheduling,itisstillunclearwhatthemaximumpossiblelifetimeis.Inthispaper,weproposeanapproachtoﬁndoptimalbatteryschedulesforagivenload.Wemodelthebehaviorofbatteries,basedonadiscretizedversionoftheKiBaM,aslinearpricedtimedautomata(LPTA)[2,4],andusethemodelcheckerCora—whichisamemberoftheUPPAALfamily[22]—togeneratetheoptimalschedules[5]usingthewell-developedmodel-checkingtechniquesforLPTA.Weshowthatthepriced-timedautomatamodeloftheKiBaMismodelingthebehavioroftherate-capacityandrecoveryeffectfaithfully.Thegeneratedoptimalschedulesshowthat978-1-4244-4421-2/09/$25.00 c(cid:13)2009 IEEE
64
Authorized licensed use limited to: Tsinghua University. Downloaded on March 20,2021 at 09:56:40 UTC from IEEE Xplore.  Restrictions apply. 
y2y11-cci(t)h1h2kboundchargeavailablechargeFigure1.SchematicpictureoftheKineticBatteryModelincertaincasestheroundrobinandbest-batteryschedulingpoliciescomeclosetothemaximalsystemlifetime,butareinsomecasesfarfromgood.Therestofthispaperisstructuredasfollows.InSec-tion2weintroducetheKineticBatteryModelandproposeadiscretizedversionofit.InSection3wegivebackgroundonpriced-timedautomata.Section4describeshowthebat-terymodelistranslatedintothetimedautomatasetting,andhowthemodelcanbeusedtoﬁndtheoptimalschedule.ThebatterymodelisvalidatedinSection5inaone-batterysetting.Resultsonmultiple-batteryschedulingaregiveninSection6.WeconcludeinSection7.2Kineticbatterymodel2.1IntroductionThebatterymodelweuseistheKineticBatteryModel[17,18,19].Thismodelisveryintuitive,andthesimplestmodelthatincludesthetwoimportantnon-linearbatteryproperties,therate-capacityeffectandtherecoveryeffect[16].Therate-capacityeffectistheeffectthatlesschargecanbedrawnfromthebatterywhenthedischargecurrentisincreased.However,someofthechargeleftbehindinthebatteryafteraperiodwithahighdischargecurrentwillbeavailableforusageafteraperiodwithnoorlowcurrent.Thisistherecoveryeffect.IntheKiBaMthebatterychargeisdistributedovertwowells:theavailable-chargewellandthebound-chargewell(cf.Figure1).Afractioncofthetotalcapacityisputintheavailablechargewell,andafraction1−cintheboundchargewell.Theavailablechargewellsupplieselec-tronsdirectlytotheload(i(t)),wheretdenotesthetime,whereasthebound-chargewellsupplieselectronsonlytotheavailable-chargewell.Thechargeﬂowsfromtheboundchargewelltotheavailablechargewellthrougha“valve”withﬁxedconductance,k.Nexttothisparameter,therateatwhichchargeﬂowsbetweenthewellsdependsontheheightdifferencebetweenthetwowells.Theheightsofthetwowellsaregivenby:h1=y1candh2=y21−c.Thechangeofthechargeinbothwellsisgivenbythefollowingsystemofdifferentialequations:⎧⎨⎩dy1dt=−i(t)+k(h2−h1),dy2dt=−k(h2−h1),(1)withinitialconditionsy1(0)=c·Candy2(0)=(1−c)·C,whereCisthetotalbatterycapacity.Thebatteryiscon-sideredemptywhenthereisnochargeleftintheavailablechargewell,i.e.,wheny1(t)=0.2.2CoordinatetransformationAlthoughthedifferentialequations(1)nicelydescribethedischargeprocessofthebattery,andananalyticalso-lutioncanbeobtainedforconstantdischargecurrents[17],theequationscanbemademoresimplewhenacoordinatetransformisapplied.Inthiswayevenmoreinsightcanbeobtainedinthewaythemodelbehaves.From(1),onecanseethattheheightdifferencebetweenthetwowells(h2−h1)playsamajorroleinthemodel.Thisisoneofthecoordinatesafterthetransformation,theotheristhetotalchargeinthebattery.So,thetransforma-tionchangesthecoordinatesfromy1andy2toδ=h2−h1andγ=y1+y2.Thistransformationchangesthedifferen-tialequationsto:⎧⎨⎩dδdt=i(t)c−k(cid:2)δ,dγdt=−i(t),(2)wherek(cid:2)=k/(1−c)c.Theinitialconditionschangeinto:δ(0)=0andγ(0)=C.Inthenewcoordinatesystemtheconditionforthebatterytobeemptyis:γ(t)=(1−c)δ(t).(3)2.3DiscretizationoftheKiBaMTobeabletousetheKiBaMinthetimedautomataset-ting,oneneedstodiscretizethemodel,inparticulartime,charge,andheightdifference.WerefertothediscretizationoftheKiBaMasthedKiBaM.From(2)onecanseethatthetotalchargeonlychangeswhenacurrentisdrawnfromthebattery.Theheightdiffer-encechangesbytwoprocesses:itincreaseswhenacurrentisdrawn,anddecreaseswhenchargeﬂowsfromtheboundchargewelltotheavailablechargewell.Inthediscretiza-tionofthemodelweseparatethesetwoprocesses.WediscretizetimeinstepsofsizeT.Withinatimestepthedischargecurrentisassumedconstant.Foraconstant978-1-4244-4421-2/09/$25.00 c(cid:13)2009 IEEE