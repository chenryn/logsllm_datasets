1000000
stes-meti
100000 )elacs-gol(
10000 fo
rebmuN
1000
0.2 0.4 0.6 0.8 1
Min-support
(b)SRdataset
Fig.2. Relationshipbetweennumberofmineditem-setsandmin-supportandmax-length.
On the other hand, if the goal is to thoroughly explore the root causes for smaller groups,
withlessconcernsabouttheruntime,wecouldsetthemin-supporttoasmallervaluesuchas
0.4. In this case, max-length should be set sufficiently high so that second filter discussed in
Section3.6canbeeffectivetoimproveinterpretability.Forexample,ifaruleofinterestisdescribed
by {A,B,C,D,E} ⇒ Y,butmax-lengthissmallerthan5,upto (cid:0) 5 (cid:1) item-setscouldbe
max−lenдth
generatedtorepresentthisruleatthesamesupport,whereasifmax-lengthissetto5,theexact
ruleofinterestwouldbecreatedandtherestitem-setswithsmallerlengthswouldbedroppedby
thesecondfilterinSection3.6,aslongastheruleofinteresthasahigherlift.
ThesametrendsareobservedinFigure2bfortheservicerequest(SR)datasetwhenincreasing
min-supportormax-length,buttheredoesnotexistaclearconvergencepoint.Additionally,the
numberofitem-setsarenon-zerowhenmin-supportisashighas1,implyingtherearemultiple
item-sets with support being 1 at the different max-lengths. In practice, these item-sets with
supportbeing1oftencouldberepresentedbymorespecificitem-sets,i.e.supersets,andtherefore
couldbefilteredoutbythefiltersinSection3.6ifthesupersetshavehigherlift.Figure2aand
Figure 2b demonstrate that the relationship between the number of mined item-sets and min-
supportisdataset-dependent,andtheconvergencepointofdifferentmax-lengthsdeterminedby
thecomplexityofthedatasets.
Proc.ACMMeas.Anal.Comput.Syst.,Vol.4,No.2,Article31.Publicationdate:June2020.
FastDimensionalAnalysisforRootCauseInvestigation 31:15
4.1.3 RuntimeImprovement. AnadvantageofAprioriisthatitiseasilyparallelizable,bysplitting
upthecandidategenerationateachlength.Theoptimalparallelismleveldependsonthenumber
ofcandidates,sinceeachthreadinducesadditionaloverhead.Figure3illustratestheruntimeof
Aprioriatdifferentlevelsofparallelism,basedontheASEdataset.Theruntimeisreportedbased
onamachinewithapproximately50GBmemoryand25processors.Asshowninthefigure,a
9-threadparallelismresultedintheshortestruntimeduetoabetterbalancebetweentheruntime
reductionfromparallelprocessingandtheruntimeincreasefromparallelizationoverheads.Every
parallelismlevelupto24threadsoutperformsthesingle-threadedexecution.
1 5 9 24
200
)sdnoces(
150
100
emitnuR
50
0
1 0 0 0 0 2 0 0 0 0 3 0 0 0 0 4 0 0 0 0 5 0 0 0 0 6 0 0 0 0
Number of item-sets
Fig.3. RuntimeofAprioriatdifferentthreadcounts,basedontheASEdataset.
InFigure4,wecomparetheruntimeofApriori[2],parallelizedApriori,andFP-Growth[3,6,
13,18,25],atdifferentnumberofitem-sets.Notethatthe9-threadconfigurationfromFigure3is
usedasthemulti-threadedcasehere.ItisclearthatFP-Growthoutperformssingle-threadedand
multi-threadedApriori,exceptwhenthenumberofitem-setsissmall,astheoverheadofsetting
uptheFP-Growthalgorithm(seeSection3.3)islargerthanthebenefitofnotrunningApriori’s
candidategenerationstep.However,inourexperiments,FP-Growthisneverslowerformorethan
1second.TheruntimedifferencecouldbecomemoresignificantwhenthisRCAframeworkis
deployedonaresource-limitedplatform,suchasanembeddedsystem.InFigure4b,weseethatfor
theSRdataset,Aprioricanbefasterwhenthenumberofitem-setsissmallerthan10000,which
happenswhenmax-length<4or(max-length=4andmin-support≥ 0.8).FortheASEdataset,
multi-threadedAprioriisfasterthanFP-Growthwhenthenumberofitem-setsissmallerthan
2000,whichhappenswhenmin-support≥ 0.4.Foragivendataset,runninganinitialscanoverthe
algorithms,lengths,andsupportscanhelpoptimizethechoiceofalgorithmandmin-support.
4.2 InterpretabilityImprovement
AsdescribedinSection3.1,liftisusedwhenfilteringtheminedfrequentitem-setsbasedontheir
abilityindecidingwhetherasamplesatisfyingtheitem-setwouldbepositive(e.g.beinthetarget
failurestates).Figure5ashowsthenumberofassociationrulesgivendifferentmin-liftthresholds
ontheASEdataset,whenmin-supportissetto0.4andmax-lengthissetto5.
Thereisacleardropaftermin-lift=1,whichindicatesrulesthatarestrongerthanrandomness.
Thenumberofassociationrulesremainsconstantlyat6whenmin-liftisbetween2.7and7.9.In
practice,wecansetthemin-lifttoanywherebetween2.7and7.9tooutputthese6rulesasthe
potentialrootcauses,astheyaretherelativelystrongerandmorestablerulesinthedataset.The
Proc.ACMMeas.Anal.Comput.Syst.,Vol.4,No.2,Article31.Publicationdate:June2020.
31:16 Lin,etal.
(a)ASEdataset
(b)SRdataset
Fig.4. Analysisruntimevs.numberofitem-sets.
trianglemarkerindicateswhenanexampleactionableinsightappearsatthehighestmin-liftvalue
(morediscussionsinSection5.1).
Figure5bshowsthesameanalysisbasedontheSRdataset,withmin-supportsetto0.5and
max-lengthsetto5.Thenumberofassociationrulesreporteddropssignificantlyinseveralsteps.
Thisisbecausetheredoesnotexistaclearconvergencepointfordifferentmax-lengthvalues,as
seeninFigure2b,manyofthereportedassociationrulesactuallydescribethesameunderlying
rules,andthereforearefilteredouttogetherasmin-liftincreases.Thetrianglemarkershowswhen
anexampleactionableinsightappearsatthehighestmin-liftvalue(morediscussionsinSection5.2).
ComparedtotheASEdataset,theliftismuchlargerintheSRdataset.
TounderstandthelargertrendacrossallassociationrulesintheASEdataset,weconsidermore
item-setsbyloweringmin-supportto0.1.Anexponentiallydecreasingtrendcanbeobservedin
Figure6.Forreference,wekeptthesametrianglemarkeratmin-lift=7.9,representingahighly
Proc.ACMMeas.Anal.Comput.Syst.,Vol.4,No.2,Article31.Publicationdate:June2020.
FastDimensionalAnalysisforRootCauseInvestigation 31:17
80
selur
60
noitaicossa
40
fo
20 rebmuN
0
2 4 6 8
Min-lift
(a)ASEdataset
40
selur
30
noitaicossa
20
fo
10 rebmuN
0
5000 10000 15000 20000 25000
Min-lift
(b)SRdataset
Fig.5. Numberofreportedassociationrulesvs.min-liftthreshold.Thetrianglemarkswhenatargetrule
appearsintheusecasesdiscussedinSection5.
actionableinsightconfirmedbyserviceengineers.Thisgraphalsoillustratestheimportanceof
settingasufficientlyhighmin-supporttoreducenoise.Whenusingmin-support0.4derivedfrom
Figure5a,wehavesixrulesabovelift7comparedto1200formin-support0.1.
Withthetwopost-processingfiltersdescribedinSection3.6,atmax-length=5andmin-lift=1,
wekeptonly2%and26%oftheminedrulesfromtheASEdatasetwhenmin-supportis0.1and0.4,
whilewekeptonly0.4%and1%oftheminedrulesfromtheSRdatasetwhenmin-supportis0.1
and0.5.Thepost-processingreducesthenumberofminedassociationrulessignificantlywithout
losingtheimportantrootcauseinformation,whichmakestheoutputreportmucheasierforhuman
toexamineanddebugquickly.Whiletheworkin[18]integratestheFP-Growthalgorithmwiththe
Sparkplatformforprocessinglargedatasetsandusesliftforpruningmineditem-sets,itdidnot
providewell-formulatedpost-processingstepsorcharacterizetherelationshipbetweenmin-lift
andthemineditem-sets.
4.3 LessonsLearned
WhiletheresultspresentedinthispaperdemonstrateeffectiveRCA,inpractice,therelationships
betweentheseparametersarehighlydependentonthenatureofthedatasets.Thereforewepresent
methodsforoptimizingtheperformanceandinterpretability.Firstofall,min-supportisavariable
Proc.ACMMeas.Anal.Comput.Syst.,Vol.4,No.2,Article31.Publicationdate:June2020.
31:18 Lin,etal.
2000
selur
1500
noitaicossa
1000
fo
500 rebmuN
0
50 100 150 200
Min-lift
Fig.6. Numberofassociationrulesatdifferentmin-liftthresholdsbasedontheASEdataset,whenmin-
supportissetto0.1.ThetrianglemarkswhenatargetruleappearsintheusecasediscussedinSection5.
thatcontrolshowgranularthereportedruleswouldbe.Inareal-timeanalysisordebug,alower
max-lengthcanbesettoreduceruntime,andahighermin-supportcanbeappliedtoreportonly
themostdominantissuesinthedataset.Inamorethoroughanalysisthatislesstime-sensitive,a
highermax-lengthcanbeappliedtogenerateasetofrulesthatareoverallmoredescriptive,based
onthefilteringcriteriainSection3.6.
Ifthereexistsaclearconvergencepointgivendifferentmax-lengths,alowermax-lengthshould
beusedtoavoidunnecessarycomputation.IftheRCAapplicationisverysensitivetoruntimeand
thenumberofitem-setsissmall,onecouldfirstruntheanalysissimilartotheonepresentedin
Figure4andusemulti-threadedAprioriintheregionwhereitoutperformsFP-Growth.
Theadvantageofsupportandliftisthattheyareveryinterpretableandintuitivemetricsthat
anyserviceengineercanadjust.Oneintuitionbehindtheliftvalueistomakesurewehandlethe
edgecasewherealabelvalue,e.g.specificfailurestates,hasattributionX,andnootherlabelvalues
hasattributionX.
5 USECASESTUDY
Themethoddiscussedinthispaperhasbeenproductionizedinmultiplehardware,software,and
toolingapplicationsinourlarge-scaleserviceinfrastructure.Deploymentofthisframeworkallows
forfastrootcauseanalysisaswellasautomaticalertingonnewcorrelationsinthedatasets,which
mayindicateunexpectedchangesinthesystems.Inthissectionwepresentsomeoftheapplications
andtheinsights(aftersanitizingthedata)thatwereextractedbytheproposedframework.
5.1 AnomalousHardwareandSoftwareConfigurations
Inalargeinfrastructure,maintenanceactivitiesareconstantlyundertakenbythemanagement
system-forinstance,wemightneedtoprovisionnewservicesonaparticularserverplatform.
Insuchscenarios,theremightbereasonstorebootservers.Onerootcauseexamplehereisto
detectwhetherallservershavebootedbackupafteramaintenanceevent.Usingourframework,
wefoundagroupofserversthatfailedtocomebackonlineascomparedtotherestofthecohorts.
Withoutourproposedrootcauseanalysis,theissuewasisolatedtoacombinationof1)aspecific
firmwareversioninonecomponent,2)aparticularcomponentmodelfromamanufacturer,and3)
aparticularservermodel,byexperiencedexpertsafterhoursofinvestigation.
Proc.ACMMeas.Anal.Comput.Syst.,Vol.4,No.2,Article31.Publicationdate:June2020.
FastDimensionalAnalysisforRootCauseInvestigation 31:19
Toemulatehowtheproposedfastdimensionalanalysiscouldhavehelpedwiththerootcause
analysis,welookedatthehistoricaldataandlabeledtheserversbywhethertherebootsweresuc-
cessfulonthem.Forexample,sincetheserversthatstayedofflineisourtargetoftheinvestigation,
welabeledthemaspositive,andtherestwheretherebootsweresuccessfulasnegative.Thenwe
compiledadatasetthatjoinsthelabelswithabout20attributesoftheservers,suchastheserver
model,thetypeofservicestheserverswererunning,firmwareandkernelversions,component
vendors/models/firmwareversions.Theseattributesarewhereweexpecttofindpotentialcor-
relationsfordistinguishingbetweenthepositiveandnegativesamples.Thisisthefirstdataset
presentedintheexperimentalresultsinSection4,i.e.theanomalousserverevent(ASE)dataset.
Withthisdataset,thefastdimensionalanalysisframeworkidentifiedthecorrelationbasedon
exactlythethreeattributesin2seconds.Theliftvaluewherethistargetassociationruleshowsup
ismarkedbythetriangleinFigure5a.Throughourmethodology,wesignificantlyreducedthe
investigationtimefromhourstoseconds.Notethatinthiscase,thereweremultiplecombinations
of feature values that correlate to the positive samples equally. For example, a combination of
{firmware version, component model, server model} would show the same support and lift as a
combinationof{storageinterface,componentmodel,CPUmodel},onthisspecificdataset.Purely
basedonthisdataset,thealgorithmwouldnotbeabletotellwhichcombinationismoreuseful
giventhetypeoffailures.Furtheranalysiscandeterminethemosteffectivewaytoreducethe
numberofcombinationsreported,potentiallybasedonthepastreports.Thereportedcombinations
alreadyprovidesstrongcorrelationstothefailuresandanengineerwithsomeexperiencecan
quicklyconcludetheissuefromthereport.
5.2 AnomalousServiceInteractions
Allthecommunicationsbetweenbackendservicesinourlarge-scalesystemarelogged.Thisinfor-
mationisusedtoinvestigateerrorsinthecommunicationamongservices,basedoncharacteristics
suchaslatency,timeouts,requests,responses,traffic(volume,sourceanddestinationregions).This
istheseconddataset,i.e.theservicerequest(SR)datasetpresentedintheexperimentalresultsin
Section4.
Thenaiveinvestigationwhereengineersaggregatethevariousparametersthroughagroup-by
operationdoesnotscale,astherearetoomanydistinctcombinationsofthecolumnvalues.We
deployed the fast dimensional analysis framework to analyze two types of anomalous service
interactions:errorsandlatency.Theanalysisquicklyidentifiedattributesofservicecommunication
thatwouldleadtodifferenttypesoferrorsandreportedthefindings.Inoneexampleforaglobally
distributedservice,itwasreportedthattheerrorswerecausedonlyforcommunicationsbetween