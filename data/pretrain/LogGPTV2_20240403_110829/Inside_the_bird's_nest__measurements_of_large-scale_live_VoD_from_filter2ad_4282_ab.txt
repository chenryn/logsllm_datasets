the three largest sources. These are the oﬃcial Olympics
video web site (Oﬀ ), the largest social networking site in
China (Soc), and the oﬃcial Olympics video syndication
site (Synd ). Table 1 summarizes the relevant aspects of
these three providers. These providers diﬀered in two main
aspects that we discuss below.
Business models: Oﬀ provided traditional video services
for users from all over China. Soc not only provides por-
tal services (e.g., news, entertainment reports, blogs) but
also had special services for its own user group (e.g., instant
messaging, online games). Synd was not directly released to
the public. Rather, it was used by about 174 other websites
around China on their front pages. Most of its users came
from these websites. The three sources also diﬀer in their
advertising strategies too. Both Synd and Oﬀ embedded
advertisements at the start of videos, while Soc did not.
Content presentation: Oﬀ provides a rich spectrum of
videos with durations varying from a few seconds to a few
hours. To provide the videos quickly, Oﬀ released the videos
as soon as possible after the respective events, usually within
45 minutes. There are about 13700 videos including full-time
games, highlights of events, interviews and on-line commen-
taries. Soc released around 20000 video contents similarly.
Synd provided much less content compared to the other two.
It served around 30 diﬀerent highlights and fragments of
the games played every day, each less than 5 minutes long.
These videos were also replaced on a daily basis. As a portal,
End UsersRTMPCDNMedia PortalDATA SourceIDCSynchronizing by rsync tool(cid:7246)(cid:7246)(cid:7246)(cid:7246)Top LayerEdge Layer(cid:7246)(cid:7246)(cid:7246)(cid:7246)BeijingShanghaiGSLBManagementMonitor(cid:7246)(cid:7246)Flash Player 1(cid:7246)(cid:7246)FMS originFMS originFMS originFMS originFMS edgeFMS edgeFMS edgeFMS edgeMiddle LayerFMSedgeFMSedgeFMSedgeFMSedgeFlash Player 2Flash Player nFlash Player 1Flash Player 2Flash Player nRTMPCCCCCCCCChengduXi’anWuhanGuangzhouNanjingShanghaiBeijingShenyangCDistrict of Deployment444Content Type
Content Length
Content Resolution
Codes
Bit-rate
Content Indexing
Advertising
Navigation
Oﬀ
News, matches, highlights, inter-
views, commentaries etc.
Varying from 10 seconds to 2.5
hours
480 × 360
On2 VP6 (Video) / MP3 (Audio)
432 kbps CBR (Constant Bit-rate)
Indexed by nations, matches,
highlights, etc.
2 pieces of embedded video adver-
tisements
From its own portal, and linked by
the syndication site
Soc
News, matches, highlights, inter-
views, commentaries etc.
Mostly in 5 minutes
400 × 300
Sorenson H.263 (Video) / MP3
(Audio)
400 kbps CBR
Indexed by nations, matches,
highlights, etc.
No embedded advertisements
From its own portal
Synd
Mainly fragments of matches
Mostly 5 minutes
320 × 240
On2 VP6 (Video) / MP3 (Audio)
332 kbps CBR
No indexing
2 pieces of embedded video adver-
tisements
Linked by about 174 web sites
Table 1: Comparison of the three content providers. Oﬀ is the oﬃcial Olympics video website. Soc is the
largest social networking site in China. Synd is the oﬃcial Olympics video syndication site.
Oﬀ provided well-organized navigation capabilities for users
by providing sitemaps, event categories, search features etc.
The video player also provided thumbnails of related videos
to guide viewers. Soc provided similar navigation features.
Additionally, it also used client software to prompt and en-
gage users (e.g., using instant messages). Soc, however, did
not provide links to related videos. Synd was limited by
the capabilities provided by the 174 web sites that linked
to it; we do not have an extensive understanding of what
presentation features these sites employed.
2.4 Data Collection and Processing
Each FMS server generates an access log that tracks the
behaviors of server programs and end users. We collect the
log ﬁles from all edge FMSes between Aug. 6th to Aug. 31th,
2008, spanning the duration of the Olympic Games. Each
FMS server periodically reports a log every 15 minutes to
the OSS and the uploaded logs are then merged on a daily
basis.
Each entry in the access log represents diﬀerent server
and user actions. For example, these include server actions
like server-start, server-stop and user actions (e.g., connect,
disconnect, play, pause, unpause, seek, stop). Our focus in
this paper is primarily on the user actions. We focus on
six relevant types of ﬁelds from the access log described in
Table 2. During this period, more than 3.5 million unique
clients accessed over 34,000 video ﬁles in the system gen-
erating around 170 million lines of full log traces from the
edge FMS servers.
We analyze the events in the access logs to capture the
process of a user accessing a video. We refer to a set of
events having the same client IP and client ID ﬁelds as a
connection. The process of a user accessing a video might
span multiple events in the log. To model user actions within
a connection, we developed a simple state machine model to
capture user actions (see Figure 3).2 In the simplest case,
it involves ﬁve actions in order: connect-pending, connect,
play, stop, disconnect. These actions are associated by the
common connection identiﬁer of the user which is speciﬁed
by client IP and ID ﬁelds in the log. We further split a
connection into sessions (see Figure 4). Each session starts
# Category Description
1 Action
Action name, such as connect, play,
and status code, such as “200” which
means success, “404” which means a
ﬁle-not-found failure.
Date and time when this action oc-
curred, and also the time duration of
this action.
FMS server’s IP address, load, and pro-
cess information.
User IP address, client ID (a unique
number generated on a FMS server
for diﬀerent client connections), user
agent, referrer URL.
Content’s URL (include the domain
name for publishing this content), pro-
tocol, ﬁle name, length, size in bytes,
and accessed position in milliseconds.
Network traﬃc from server to client,
and also from client to server.
2 Time
3
Server
4 User
5 Content
6 Traﬃc
Table 2: Description of diﬀerent types of data col-
lected in the access logs
with the action “play” and ends with a “stop” action with a
number of operations between these.
2.5 Summary Statistics
Table 3 summarizes our access logs. More than 3.5 million
unique clients established around 18 million connections and
accessed over 34,000 video ﬁles in 20.4 million sessions. The
VoD system used dedicated FMS servers for each provider.
Thus, we can classify the events according to the three diﬀer-
ent content providers by simply using the edge FMS servers
used to serve the speciﬁc content. Note that since all the
users and servers are located in the same time zone, we
have a completely synchronized view of the events. This
is especially useful as it allows to study diﬀerent temporal
patterns and analyze the data at diﬀerent time granularities
(e.g., per-minute, hourly, daily).
3. UNDERSTANDING LIVE VOD
2Some connections have undeﬁned transitions; this leads to
an error state and we discard these entries. More than 97%
connections were valid.
In this section, we present the broad characteristics of
the Live VoD measurements and qualitatively compare these
with measurements reported from traditional VoD and UGC
445Content
Provider
# Log
entries
(millions)
Soc
Oﬀ
Synd
118
47
5
IPs
# Unique # Connxns
/ Sessions
(millions)
14/14.2
(millions)
2.5
1
0.12
4/5.8
0.15/0.4
# Videos
accessed
(thousands)
20
13.7
0.05
Table 3: Summary statistics across the three diﬀer-
ent content providers
Figure 3: State machine for a connection process
Figure 4: Illustrating the deﬁnition of a connection
and session
deployments. We refer to our workload as Live VoD, in the
sense that the content is changing in real-time similar to a
live streaming workload and at the same time the videos
are stored to be served later on-demand, this is similar to
a VoD workload. In particular, the real-time, event-driven
nature of the Olympics gave rise to unique patterns in the
distribution of video lengths (Section 3.1), temporal access
patterns (Section 3.2), and evolution in the popularity of
content over time (Section 3.3).
3.1 Video Lengths
In Live VoD, the video length is very diverse, ranging
from a few seconds to a few hours. This was an eﬀect of
(1) the nature of the actual events: diﬀerent sports con-
tests spanning diﬀerent durations (e.g., swimming, volley-
ball, archery), press conferences, award ceremonies etc., and
(2) the segmentation of a longer event into multiple smaller
videos so that the content providers could give their users a
near real-time feed. Traditional VoD systems see far less di-
versity in video durations. For example, in the case of VoD
for distributing TV episodes or movies, the video lengths
show a clear concentration in speciﬁc ranges: between 30–60
minutes for TV episodes, or 90–120 minutes for movies [28].
Similarly, in UGC sites (e.g., YouTube), 98% of the videos
are less than 600s [14].
Figure 5 shows the CDF of the video lengths in the three
content providers. For Synd , the CDF shows a sharp peak
at 300 seconds. For Oﬀ , 70% of the videos are less than 1000
seconds. The linear pattern in Oﬀ between 70% to 100%
Figure 5: CDF of video length
suggests a uniform distribution of longer videos. Soc has
much shorter videos; the 80th percentile of video duration
is around 300 seconds.
Most videos in Synd are edited to 300 seconds and pub-
lished signiﬁcantly after a live event occurred. Thus it does
not capture the real-time, event-driven features of live VoD.
As such, for the following results, we do not include results
from Synd .
3.2 Temporal Access Patterns
Figure 6 shows the total number of videos accessed per day
over the 24 day period from August 8 to August 31. While
the number of accesses across the three providers is diﬀerent,
we see a similar pattern: a peak on Aug 8/9 with a gradual
decrease subsequently. There are also two obvious peaks on
Aug 8/9 and Aug 18. Aug 8 was the opening ceremony; as
expected a large number of viewers tuned in to view it. Aug
18 is particularly interesting; an injury forced the popular
Chinese athlete Liu Xiang to withdraw from the 110-meter
hurdles in the ﬁrst round [7]. While the Aug 8 peak was
anticipated, the Aug 18 peak certainly was not.
Looking at the number of accesses per hour in Figures 7(a)
and 7(b), we see some time-of-day eﬀects, with the average
traﬃc volume peaking around 10 pm every day (ignoring
the large spikes in the graph). The time series plots clearly
show sharp peaks in certain hours indicative of ﬂash crowd
like behavior. For example, the number of accesses spikes
to 160,000 for Soc; this is ﬁve times the average number of
accesses per hour.
For each day, we identify the rush hour – the hour of day
that attracts the most accesses within the day – and plot the
proportion of daily accesses contributed by the rush hour in
Figure 8. We see that the rush hour attracts a signiﬁcant
STARTEDPENDINGCONNECTEDPLAYINGSTOPPEDDISCONNECTEDPAUSEDconnect-pendingconnectplaydisconnectdisconnectseekpauseunpauseseekstopplaystopUniqueIPiIdentified by IPConnection 1Identified by Client IP + Client ID(cid:258)(cid:258)Connection jConnection Ciconnectdisconnect(cid:258)(cid:258)Session1SessionSjSessionkplaystopOperation 1seek/pause/unpauseOperationOkseek/pause/unpause(cid:258)(cid:258)(cid:258)(cid:258)(cid:258)(cid:258) 0 10 20 30 40 50 60 70 80 90 100 0 1000 2000 3000 4000 5000 6000 7000 8000 9000Percentage of videosVideo length (sec)OffSocSyndOffSocSynd446(a) Oﬀ
(b) Soc
(c) Synd
Figure 6: Daily accesses (covering the Olympics in Aug 2008)
portion of the total number of accesses with each day. For
example, in Soc, this can be as high as 17.6%, on Aug 13
12:00 pm.
Measurements of traditional VoD systems have shown