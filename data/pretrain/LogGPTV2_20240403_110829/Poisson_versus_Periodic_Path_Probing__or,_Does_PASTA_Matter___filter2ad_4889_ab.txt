Kolmogorov-Smirnov (KS) test. This test, however, as-
sumes that the underlying distributions are continuous.
Furthermore, it is quite sensitive to that assumption be-
cause it focuses on the maximum vertical distance be-
tween the two empirical CDFs. It is important to note
that the RTT distribution at an Internet path can be al-
most discontinuous when several probing packets mea-
sure the same RTT value that is determined by constant
propagation and transmission delays. This discontinu-
ity is located at the minimum (or close to the minimum)
measurement, and it is more likely in lightly loaded paths
with small queueing delays because the latter can only
increase the RTT measurements.
For example, Figure 2 shows the two RTT empiri-
cal CDFs measured in a session from MIT to U-Oregon
(I=20ms, L=480 bytes). Note that for all practical pur-
USENIX Association
Internet Measurement Conference 2005  
121
−0.02−0.0100.010.0200.10.20.30.40.50.60.70.80.91TCDFI=10msI=20msI=50msI=100msI=500msI=1000ms809010011012013014015016000.10.20.30.40.50.60.70.80.91RTT (ms)CDFMeasurements with Poisson ProbingMeasurements with Periodic ProbingKS−test P−value: 0.08KL−test P−value: 0.88−Poisson   PeriodicMean (ms)      89.5       89.6Median (ms)   87.5       87.5Std−Dev (ms) 7.82       7.89Loss%             4.41       4.29Figure 3: An example of the KL distance distribution for
a particular session.
Figure 4: Distribution of P-values for the null hypothesis
H0, applied to RTT sessions.
Figure 2, the KL test reports a P-value of 0.88, meaning
that the null hypothesis cannot be rejected.
Figure 4 shows the distribution of P-values reported
by the KL test for various probing interarrivals I. We see
that we can reject H0 for only 5-10% of the sessions at a
signiﬁcance level of 10%. The rest of the sessions have
signiﬁcantly higher P-values, meaning that we cannot re-
ject H0. So, for more than 90% of the measurement ses-
sions we can assume that the RTT distributions observed
by Poisson and Periodic probing are identical.
Note that the two larger average probing periods,
500ms and 1000ms, result in lower P-values, implying
wider (but still not statistically signiﬁcant) differences
between the two RTT distributions. When I is 500ms
and 1000ms the measurement process lasts for 300sec
and 600sec, respectively, and the underlying process
shows signiﬁcant variability during that time window.
Consequently, the two probing processes are more likely
to observe different values of the underlying process.
4 Loss rate measurements
For the loss rate estimates, we used the same set of ses-
sions as in the case of RTTs, except that we now use only
the 600 probing packets from the source to the destina-
Figure 5: The difference l between Poisson and Periodic
loss rate estimates.
tion (ignoring the packets in the reverse direction). Let
le and lp be the loss rates, deﬁned as the fraction of lost
packets from the Poisson and Periodic streams respec-
tively, in a given session. The difference between the two
loss rates is l = le − lp. Figure 5 shows the empirical
CDF of l, for the sessions in which we observed some
loss, either in Poisson probes, or Periodic probes, i.e., for
sessions where (le + lp) > 0, but neither le or lp exceeds
10%. Note that in about 80% of the sessions the two loss
rates are within 1%, while the maximum loss rate differ-
ence is less than 3%.
In theory, we could compare the two loss rates le and
lp using a hypothesis test for the equality of two pro-
portions. Such tests however assume that the underlying
loss events are independent, which is not true for Inter-
net losses. Instead, we examine the agreement between
Poisson and Periodic probing categorically, classifying
the sessions in six classes depending on the loss rate esti-
mated by the Poisson probes. These categories are: loss-
less (le = 0), low loss (le ∈ (0, 1%]), medium loss (le ∈
[0.9%, 5%]), high loss (le ∈ [4.5%, 10%]), very high loss
(le ∈ [9%, 20%]), and broken (le ∈ [18%, 100%]). The
categories have a small overlap to avoid boundary effects
when examining the agreement between the two probing
processes. Note that for this categorization and in the
following analysis we include the sessions that have a
higher loss rate than 10%.
Figure 6 shows the fraction of sessions in each cate-
gory (the number at the top of each group). About 78%
of the sessions are classiﬁed as lossless or low loss. For
each category we also show, with two or three adjacent
bars, the fraction of sessions for which the loss rate es-
timates with Poisson and Periodic probing agree (central
bar), as well as the fraction of sessions for which Peri-
odic probing leads to a lower (left bar) or higher (right
bar) category. Notice that the two probing techniques
agree in more than 70% of the sessions. Given that the
loss process in a congested link can be highly bursty,
122
Internet Measurement Conference 2005
USENIX Association
00.050.10.150.20.2500.10.20.30.40.50.60.70.80.91KL DistanceCDFP−valueTheKLDistancedistribution betweenportions of PoissonSampleKLDistance between thePoisson and Periodic Samples00.10.20.30.40.50.60.70.80.9100.10.20.30.40.50.60.70.80.91P−valueCDFI=10 msI=20 msI=50 msI=100 msI=500 msI=1000 ms−0.03−0.02−0.0100.010.020.0300.10.20.30.40.50.60.70.80.91lCDFI=10msI=20msI=50msI=100 msI=500 msI=1000 msFigure 6: Classiﬁcation of loss rate estimates in six cate-
gories.
Figure 8: Distribution of P-values for the null hypothesis
H0, applied to dispersion sessions.
∆e+∆p
from the Poisson and Periodic probing streams, respec-
tively, for a particular session. We deﬁne the rela-
tive difference between the two dispersion medians as
∆ = 2 ∆e−∆p
. Figure 7 shows the empirical CDF of ∆.
Note that about 90% of the sessions have |∆| <2.5%,
while the relative difference does not exceed 8%. Conse-
quently, as in the case of RTTs, we see that the Poisson
and Periodic probing processes estimate practically the
same dispersion, at least in terms of a point estimate for
the ﬁrst moment.
Goodness-of-ﬁt test: We also examined whether the
two probing processes observe the same dispersion dis-
tribution. To do so, we used again the KL test described
in § 3. This time the null hypothesis H0 is that the two
dispersion samples (Poisson and Periodic) for a given
session follow an identical distribution. Figure 8 shows
the distribution of P-values reported by the KL test, for
various probing interarrivals I. Notice that the P-value is
less than 10% for only 5-10% of the sessions. The rest of
the sessions have signiﬁcantly higher P-values, implying
that we can assume H0 to be true.
6 Discussion
The experimental results in this paper indicate that there
may not be a signiﬁcant difference between Poisson and
Periodic probing, at least in the context of real Internet
measurements. This does not mean that we recommend
the use of Periodic probing over Poisson probing. We
note however that measurement studies that use, or have
used, Periodic probing should not be dismissed based on
that fact, and they may also have practical beneﬁts com-
pared to Poisson probing. A few additional remarks on
the accuracy of Poisson and Periodic probing follow.
First, it is important to note that the fraction of dropped
Poisson probing packets at a network queue does not es-
timate the packet loss rate, i.e., the fraction of dropped
packets among all arrived packets; instead, it estimates
the fraction of time that the queue is full. The latter is
Figure 7: The relative difference ∆ between Poisson and
Periodic dispersion medians.
and since our sample size is rather small to accurately
estimate low loss rates, it is not surprising that about 10-
30% of the sessions observe different loss categories with
Poisson and Periodic probing.
5 Packet pair dispersion measurements
Comparison of median dispersions:
In the dispersion measurements, we send back-to-back
packet pairs of size L from the source to the destination.
The latter measures the time spacing (“dispersion”) ∆
between the arrival of the ﬁrst and the second packet.
The dispersion at the destination is related to the cross
trafﬁc load and available bandwidth in the network path
[4]. Speciﬁcally, the higher the cross trafﬁc load is at the
path’s bottleneck, the wider the dispersion of the packet
pairs at the destination due to the interference of cross
trafﬁc between the probing pair.
For these measurements, if one of the two packets is
lost, the corresponding pair is ignored. Note that the av-
erage probing interarrival I controls the time spacing be-
tween successive packet pairs, not between packets of the
same pair, which are always sent back-to-back.
Let ∆e and ∆p be the median dispersions estimated
USENIX Association
Internet Measurement Conference 2005  
123
losslesslowmediumhighvery highbroken00.10.20.30.40.50.60.70.80.91Sessions with lplower categorySessions with lpand lein same categorySessions with lpin higher category65%13%9%2%5%8%−0.05−0.04−0.03−0.02−0.0100.010.020.030.040.0500.10.20.30.40.50.60.70.80.91∆CDFI=10 msI=20 msI=50 msI=100 msI=500 msI=1000 ms00.10.20.30.40.50.60.70.80.9100.10.20.30.40.50.60.70.80.91P−valueCDFI=10 msI=20 msI=50 msI=100 msI=500 msI=1000 msequal to the loss rate in a queue with Poisson packet ar-
rivals; this follows applying the PASTA property to all
packets (not only the probing packets). For more bursty
trafﬁc, however, the packet loss rate can be higher than
the fraction of time that the queue is full. Consequently,
even if Poisson and Periodic probing observe the same
loss rate, that fraction should not be expected to be equal
to the underlying loss rate.
Second, Periodic probing at a certain interarrival I
cannot ”see” effects that occur in lower time scales (or
higher frequency). In the case of loss rate estimation, in
particular, loss events in Drop-Tail queues can be very
bursty. If the duration of loss bursts is much lower than
I, then Periodic probing may underestimate both the full-
queue probability and the loss rate. Poisson probing,
however, with a sufﬁciently large number of samples,
should be able to estimate the full-queue probability.
Third, it is important to note that even if we gener-
ate a Poisson probing stream at the source, the probing
packets may not arrive at the bottleneck link as a Pois-
son process. Consider, for instance, that the output of an
M/D/1 queue is not a Poisson process. In more prac-
tical terms, if the probing packets go through a store-
and-forward link with capacity C, then their interarrivals
after that link cannot be lower than L/C, where L is the
packet size. Consequently, the probing packets will no
longer be a Poisson stream and PASTA will not apply.
This issue is important for Internet measurements, given
that most network paths go through multiple queues.
Appendix: Density estimation
Suppose that we are given two samples S1 and S2 that
take values in a range RS. We want to approximate the
probability density functions of the two samples with the
probability mass functions q1(i) and q2(i) deﬁned over
a set of bins Q, such that q1(i) and q2(i) is the frac-
tion of measurements in the i0th bin from S1 and S2,
respectively, andPi∈Q q1(i)=Pi∈Q q2(i)=1. We select
the initial bin size w based on the Freedman-Diaconis
rule as w = 2n−1/3IQ, where n is the number of sam-
ples in the joint sample S1∪S2 and IQ is the interquartile
range of RS [10]. We then proceed to determine the bin
boundaries, with the ﬁrst bin placed based on the min-
imum measurement, and to estimate the functions q1(i)
and q2(i).
The problem, however, is that some bins may not in-
clude enough measurements from each sample. When
that is the case we are not able to accurately estimate the
of Equation 2. To guarantee
“likelihood ratio” log2
that each bin contains at least a certain number of mea-
surements from both samples, we use an adaptive his-
togram approach. Speciﬁcally, if a bin does not include
at least 1% of the measurements from each sample, we
merge that bin with the bin at its right. The process is
q1(i)
q2(i)
repeated until the previous constraint is met. If there are
no measurements from that sample at any of the right
bins, we merge the problematic bin with the bin at its
left. In practice, we found that the previous heuristic is
quite robust, as long as the two samples take values over
approximately the same range.
Acknowledgments
We are grateful to Prof. Paul Kvam (ISYE, Georgia
Tech) for suggesting the use of relative entropy in a
goodness-of-ﬁt test. This work was supported in part by
the NSF CAREER award ANIR-0347374, NSF award
ANI-024085, and by a gift from DoCoMo USA Labs.
References
[1] V. Paxson, G.Almes, J.Madhavi, and M.Mathis,
Framework for IP Performance Metrics, May 1998,
RFC 2330.
[2] V. Paxson, Measurements and Analysis of End-to-
End Internet Dynamics, Ph.D. thesis, University of
California, Berkeley, Apr. 1997.
[3] Y. Zhang, N. Dufﬁeld, V. Paxson, and S. Shenker,
“On the Constancy of Internet Path Properties,” in
Proceedings of ACM/USENIX Internet Measure-
ment Workshop (IMW), Nov. 2001, pp. 197–211.
[4] J. Strauss, D. Katabi, and F. Kaashoek, “A Mea-
surement Study of Available Bandwidth Estimation
Tools,” in Proceedings of ACM/USENIX Internet
Measurement Conference (IMC), 2003.
[5] D. Papagiannaki, S. Moon, C. Fraleigh, P. Thiran,
F. Tobagi, and C. Diot,
“Analysis of Measured
Single-Hop Delay from an Operational Backbone
Network,”
in Proceedings of IEEE INFOCOM,
2002.
[6] R. Caceres, N. G. Dufﬁeld, J. Horowitz, and
“Multicast-Based Inference of
D. Towsley,
Network-Internal Loss Characteristics,”
IEEE
Transactions in Information Theory, pp. 2462–
2480, 1999.
[7] R. Wolff, “Poisson Arrivals See Time Averages,”
Operations Research, vol. 30, no. 2, pp. 223–231,
1982.
[8] J. Sommers, P. Barford, N. G. Dufﬁeld, and A. Ron,
“Improving Accuracy in End-to-End Packet Loss
Measurements,” in Proceedings ACM SIGCOMM,
Aug. 2005.
[9] M. Lexa, “Useful Facts about the Kullback-Leibler
Discrimination Distance,” Tech. Rep., Rice Univer-
sity, 2004.
[10] D. Scott, Multivariate Density Estimation: Theory,
Practice and Visualization, Prentice Hall, 1992.
124
Internet Measurement Conference 2005
USENIX Association