User: 请解答这个和日志有关的问题How to set up a desktop GUI with an Amazon EC2 instance? I need to get familiar with some software that doesn't run on any of my home machines (windows/mac). So I decided to spin up an EC2 instance and try it there.

However, getting EC2 to support a remote desktop session is proving to be harder than it has a right to be.  I have tried techniques found through web searches but all are out of date and no longer relevant.

So far I have tried all these suggested solutions - none have worked so far:


This one fails with timeout, even with port open, logs say nothing.
With this one, the packages suggested are not available.



[ec2-user@ip-xxx.xxx.xxx.xxx ~]$ yum groups list
Loaded plugins: priorities, update-motd, upgrade-helper
Installed groups:
   Editors
   Legacy UNIX compatibility
   Mail Server
   Network Servers
   Perl Support
   System Tools
Available Groups:
   Console internet tools
   DNS Name Server
   Development Libraries
   Development tools
   FTP Server
   Java Development
   MySQL Database
   MySQL Database client
   NFS file server
   Networking Tools
   PHP Support
   Performance Tools
   PostgreSQL Database client (version 8)
   PostgreSQL Database server (version 8)
   Scientific support
   TeX support
   Technical Writing
   Web Server
   Web Servlet Engine
Done



Nothing that says it will give me an X session.


Tried some other things such as this: The community ami he suggests does not exist anymore.
Tried this as well: freenx is no longer around, no machine server is now 4.3 and doesn't seem to work in the free version.
x2go fails also.
also tried this one: https://www.nomachine.com/AR10K00710.  Xvfb is not available.


Has anybody worked the kinks out of the setup and got it working recently?

P.S. A few people asked why not use a VirtualBox VM - forgot to mention that I definitely tried that first and for whatever reason none of them worked.  I started with the most recent and worked backwards through each version - could not get them to launch or run.  (My machine is a Cintiq Companion with Windows 8).

Assistant: Following suggestion from Matt in the comments

Set up an SSH tunnel plus a local private key using instructions from this link:  http://www.serverwatch.com/server-tutorials/setting-up-vnc-on-ubuntu-in-the-amazon-ec2-page-2.html

on ec2 ran these installers (not sure which ones are overkill - only that it eventually worked)

sudo apt-get update
sudo apt-get install ubuntu-desktop
sudo apt-get install vnc4server
sudo apt-get install x11vnc
x11vnc -storepasswd
sudo apt-get install gnome-core gnome-session-fallback

vncserver
vncserver -kill :1  #(to get the default xstartup file)


edit $HOME/.vnc/xstartup to look like this:

#!/bin/sh

# Uncomment the following two lines for normal desktop:
unset SESSION_MANAGER
#exec /etc/X11/xinit/xinitrc
gnome-session --session=gnome-classic &amp;

[ -x /etc/vnc/xstartup ] &amp;&amp; exec /etc/vnc/xstartup
[ -r $HOME/.Xresources ] &amp;&amp; xrdb $HOME/.Xresources
xsetroot -solid grey
vncconfig -iconic &amp;
#x-terminal-emulator -geometry 80×24+10+10 -ls -title “$VNCDESKTOP Desktop” &amp;
#x-window-manager &amp;


had to set a password for the ubuntu user (gnome desktop seems to need this?)

sudo passwd ubuntu


had to reboot the instance

then ran

 sudo x11vnc -xkb -noxrecord -noxfixes -noxdamage -display :0 -auth /var/run/lightdm/root/:0 -usepw


Then I could connect via TightVNC and see the Ubuntu desktop

Not sure what other troubles I may run into, but at least I got this far

Thank you Matt