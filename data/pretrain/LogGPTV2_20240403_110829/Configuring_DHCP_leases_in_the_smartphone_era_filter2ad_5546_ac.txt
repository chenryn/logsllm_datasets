expenses of running the server (including power).
We do this in two steps: ﬁrst, we look at the behavior of
the devices in isolation when varying the lease times over
several orders of magnitude. Then, based on those behav-
iors, determine an approach that best meets the above goals.
We wrote a simulator that, given a trace, reproduces the
DHCP behavior and outputs the above metrics.
6There are various sleep policies: never sleep, never sleep
when plugged in, sleep when screen turns oﬀ, sleep after 15
min, etc.
7We conﬁrmed this with the educational network adminis-
trators, who also say that this was one of the reasons that
they set the lease time to a relatively short 900 seconds.
368)
%
(
n
o
i
t
a
z
i
l
i
t
U
k
a
e
P
s
e
g
a
s
s
e
M
t
s
a
c
d
a
o
r
B
d
a
o
L
r
e
v
r
e
S
P
C
H
D
100
50
0
100
104
102
100
100
104
102
100
100
(a) − Corporate
(a) − Educational
101
101
103
102
Lease Time (sec)
(b) − Corporate
102
103
Lease Time (sec)
(c) − Corporate
104
104
105
105
iOS
Android
Windows
Mac OS X
iOS
Android
Windows
Mac OS X
iOS
Android
Windows
Mac OS X
)
%
(
n
o
i
t
a
z
i
l
i
t
U
k
a
e
P
s
e
g
a
s
s
e
M
t
s
a
c
d
a
o
r
B
d
a
o
L
r
e
v
r
e
S
P
C
H
D
101
102
103
Lease Time (sec)
104
105
100
50
0
100
101
104
102
102
103
Lease Time (sec)
(b) − Educational
101
103
102
Lease Time (sec)
(c) − Educational
100
100
104
102
105
105
104
104
100
100
101
102
103
Lease Time (sec)
104
105
Figure 5: (a) Address space utilization (b) Broadcast messages (c) Server load, versus lease time, averaged per day
and per device.
Figure 5 shows the results from our simulator. Broadly,
one can see the tension between the goals in the three sets
of graphs. Shorter lease times utilize the address space most
eﬃciently, but cause large amounts of broadcast traﬃc and
high server load. Large lease times minimize broadcasts and
server load, but at the expense of poor address space uti-
lization.
Looking more closely, in Figure 5a we see that address
space utilization stays relatively ﬂat versus lease times for
each device type up until some threshold, after which utiliza-
tion starts to grow logarithmically. In the corporate network
and for iOS devices, the threshold is 103 seconds; for An-
droids, 2 ∗ 103 seconds, and for laptops, 4 ∗ 103 seconds. In
the educational network, the same pattern holds, but with
half the threshold. This is an artifact of the shorter active
periods in the educational network as illustrated in Figure
4. As lease times go up, many leases are wasted on devices
that have transitioned into the inactive period. This issue
becomes more prevailent in smartphone devices since users
have shorter access times and are more mobile compared to
laptops.
In Figure 5b we observe that lease duration does not af-
fect the number of broadcast messages generated by the
laptops in both networks. Laptop users have long active
times, therefore the majority of their DHCP messages are
renews, which are unicast. In contrast, the number of broad-
casts generated by smartphones is sensitive to the lease time.
Shorter lease times incur larger numbers of broadcasts. This
is because short lease time results in smartphones generating
more request messages from the “selecting” state, as leases
expire faster, and new leases require a full DCHP handshake,
which incurs extra broadcast traﬃc.
In Figure 5c, we see that server load levels oﬀ at about
1,000 seconds for smartphones, but 10,000 seconds for lap-
tops. This is due to the longer active times of the laptop
users, as was shown in Figure 4.
Given these behaviors, we evaluated and compared the
following DHCP lease policies:
minutes, and 12 hours, for all devices.
• Static policies: Fixed lease times of 15 minutes, 30
• Exponential adaptation [11], which allocates a short
lease to a client once it arrives, and doubles the lease
time every time the client renews its lease.
• Diﬀerential lease, which allocates diﬀerent lease times
based on the device type. We choose values based on
our analysis of Figure 5. In the corporate network: iOS
devices get 1000 seconds, Androids 2000 seconds, and
Windows and Mac OS X 4000 seconds. In the educa-
tional network: iOS devices get 500 seconds, Androids
1000 seconds, and Windows and Mac OS X 2000 sec-
onds.
Figure 6 shows the results of our simulations. We see that
our diﬀerential lease policy provides a good tradeoﬀ between
our goals for both networks. It is very eﬃcient in address
utilization, almost as much as the 15 minute lease policies,
yet creates less broadcast traﬃc and server load. Exponen-
tial adaptation, on the other hand, uses a large amount of
address space, but produces low amounts of broadcast traﬃc
and DHCP server load on a daily basis.
Diﬀerent environments may have diﬀerent priorities among
the goals outlined above, depending on their address space
size, distribution of clients (smartphones vs.
laptops), etc.
However, using static values requires a manual tuning pro-
cess to determine the right tradeoﬀ for the environment.
Moreover, setting small static leases may have an adverse
impact on the user experience. Devices have to reassociate
in the wireless network when a lease expires, which in some
cases can take several seconds. Our diﬀerential lease policy
allows devices that tend to have longer active times to re-
ceive longer leases. Hence, it should work well across many
environments, with less administrative intervention as the
mixture of devices continues to change.
5. RELATED WORK
Although most wireless networks are conﬁgured to dy-
namically allocate IP addresses, relatively few studies exam-
369Exp. Adapt
Diff. Lease
Static 12h
Static 30min
Static 15min
0
500
1000
Exp. Adapt
Diff. Lease
Static 12h
Static 30min
Static 15min
0
500
1000
(a) − corporate
(b) − corporate
(c) − corporate
Exp. Adapt
Diff. Lease
Static 12h
Static 30min
Static 15min
Exp. Adapt
Diff. Lease
Static 12h
Static 30min
Static 15min
3000
3500
4000
0
0.5
1
Broadcast Messages
1.5
2
x 106
(b) − educational
0
0.5
1
1.5
2
DHCP Server Load
(c) − educational
2.5
x 104
1500
2000
2500
Peak Utilization
(a) − educational
Exp. Adapt
Diff. Lease
Static 12h
Static 30min
Static 15min
Exp. Adapt
Diff. Lease
Static 12h
Static 30min
Static 15min
3000
3500
4000
0
0.5
1
Broadcast Messages
1.5
2
x 106
0
0.5
1500
2000
2500
Peak Utilization
1
1.5
DHCP Server Load
2
2.5
x 104
Figure 6: (a) Address space utilization (b) Broadcast messages (c) Server load, for various policies averaged per day
ine DHCP. Brick et al. [7] investigated the impact of lease
times on DHCP performance. Khadikar et al. [11] studied
the eﬀects of longer DHCP lease times on address space uti-
lization. Our work is the ﬁrst to diﬀerentiate the device
types and study the DHCP usage patterns of smartphones.
Additionally, in contrast to previous studies, we combine
DHCP and TCP/UDP behavior in order to better under-
stand network usage patterns for each device type. Finally,
our work is the ﬁrst to propose DHCP leasing policies that
account for the various device types and their behaviours.
With respect to device classiﬁcation, Maier et al. [12] used
a combination of IP TTL and HTTP user-agent informa-
tion to classify device types among smartphones. Similarly,
Erman et al. [9] identiﬁed devices based on the user-agent
string only. Gember et al. [10] cross-validated the user-agent
results with the organization unique identiﬁer of the MAC
address.
In contrast, we use a diﬀerent classiﬁcation ap-
proach based solely on DHCP information. Our approach,
in addition to being more accurate compared to the previ-
ous art, enables new DHCP leasing policies that account for
diﬀerent device types. Using our device classiﬁcation tech-
nique, such policies can be implemented in current DHCP
server software without requiring any protocol changes.
6. CONCLUSION
It has become of increasing importance for network ad-
ministrators to properly allocate DHCP lease times, due to
the variety of devices connected to wireless local area net-
works. In this paper, we show that smartphones are primary
responsible for the increase in the network address utiliza-
tion, and ﬁxed lease time policies are far from optimal, even
when DHCP lease times are as low as one hour.
In con-
trast, ﬁx leased times of 15 minutes, while they signiﬁcantly
decrease address utilization, produce unnecessary DHCP re-
lated overhead. To reduce this overhead, we propose a dif-
ferential lease policy that assigns diﬀerent lease values to
each device type. The policy makes use of a novel device
ﬁngerprinting technique done at the DHCP server, without
requiring any protocol changes. The main beneﬁt of this
new DHCP lease policy is that it is insensitive to the ac-
tual mixture between laptop and smartphone devices, thus
removing the need to manually tune DHCP lease times as
the mixture of devices continues to change.
7. REFERENCES
[1] The Bro network security monitor. http://bro-ids.org/.
[2] Ethernet number registration.
http://www.iana.org/assignments/ethernet-numbers.
[3] Microsoft DHCP vendor and user classes.
http://support.microsoft.com/kb/266675.
[4] B. Aboba, J. Carlson, and S. Cheshire. RFC 4436 -
Detecting Network Attachment in IPv4 (DNAv4). IETF -
http://www.ietf.org/rfc/rfc4436.txt, March 2006.
[5] R. Agrawal, R. Srikant, et al. Fast algorithms for mining
association rules. In VLDB, 1994.
[6] Apple. DHCP client software.
http://www.opensource.apple.com/source/bootp/
bootp-198.2/IPConfiguration.bproj/dhcp.c.
[7] V. Brik, J. Stroik, and S. Banerjee. Debugging DHCP
performance. In Proceedings of the 7th ACM SIGCOMM
Internet Measurement Conference, pages 257–262. ACM,
2004.
[8] R. Droms. Dynamic host conﬁguration protocol. IETF
RFC, March 2007.
[9] J. Erman, A. Gerber, K. Ramakrishnan, S. Sen, and
O. Spatscheck. Over the top video: The gorilla in cellular
networks. In IMC. ACM, 2011.
[10] A. Gember, A. Anand, and A. Akella. A comparative study
of handheld and non-handheld traﬃc in campus wi-ﬁ
networks. In Passive and Active Measurement, pages
173–183. Springer, 2011.
[11] M. Khadilkar, N. Feamster, M. Sanders, and R. Clark.
Usage-based DHCP lease time optimization. In Proceedings
of the 7th ACM SIGCOMM Internet Measurement
Conference, pages 71–76. ACM, 2007.
[12] G. Maier, F. Schneider, and A. Feldmann. A ﬁrst look at
mobile hand-held device traﬃc. In Passive and Active
Measurement. Springer, 2010.
[13] D. Simmons. Rapid DHCP redux.
http://cafbit.com/entry/rapid_dhcp_redux.
370