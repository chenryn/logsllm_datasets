> 
> ### 投币装置
> 
> 
> 在街机模拟社区里，让投币装置工作在模拟器上工作就会和商业产品太接近了。这就意味着你有潜在的可能对使用你机器的人收取费用。这不仅仅只是不正当，考虑到运行在你自己街机上的那些游戏的来源，这将会是非法的。这很显然违背了模拟的精神。不过，我们和其他热爱者觉得一个能工作的投币装置更进一步地靠近了街机的真实，而且值得付出努力来营造对那个过去街机的怀念。丢个10便士硬币到投币口然后再听到机器发出增加点数的声音，没有什么比得上这种感受了。
> 
> 
> 实际上难度也不大。取决于你街机上的投币装置，以及它如何发信号通知投了几个币。大多数投币装置分为两个部分。较大的一部分是硬币接收和验证装置。这是投币过程的物理部分，用于检测硬币是否真实以及确定它的价值。这是通过一个游戏点数逻辑电路板来实现的，通常用一个排线连接，上边还带有很多DIP开关。这些开关用来决定接受哪种硬币，以及一个硬币能产生多少点数。然后就是简单地找到输出开关，每个点数都会触发它一次，然后把它接到JAMMA连接头的投币输入上，或者直接接到J-Pac。我们的投币装置型号是Mars MS111，在90年代早期的英国很常见，网上有大量关于每个DIP开关作用的信息，也有如何重新编程控制器来接受新硬币的方法。我们还能在这个装置的12V上接个小灯用来照亮投币孔。
> 
> 
> 
#### 第四步：软件
MAME是这种规模项目唯一可行的模拟器，它如今支持运行在数不清的不同平台上的各种各样的游戏，从第一代街机到一些最近的机器。从这个项目中还孕育出了MESS，一个多模拟器的超级系统，针对的平台是80到90年代的家庭电脑以及电视游戏机。
如何配置MAME本身都可以写上六页的文章了。它是一个复杂的，无序的，伟大的软件程序，模拟了如此之多的CPU，声卡，芯片，控制器以及那么多的选项，就像MythTV，你都永远不能真正配置好它。
但是也有个相对省事的方式，一个特别为树莓派构建的版本。它叫PiMAME。它是一个可下载的发布版和脚本，基于Raspbian，这是树莓派的默认发布版。它不仅仅会把MAME装到树莓派上（这很有用因为没有哪个默认仓库里有这个），还会安装其他一些精选出来的模拟器，并通过一个前端来管理他们。MAME，举个例子，是一个有数十个参数的命令行应用。但是PiMAME还有一个妙招 - 它安装了一个简单的网页服务器，可以在连接上网络后让你通过浏览器来安装新游戏。这是一个很好的优点，因为把游戏文件放到正确的目录下是使用MAME的困难之一，这还能让你连接到树莓派的存储设备得到最优使用。还有，PiMAME会通过用来安装它的脚本更新自己，所以保持最新版本就太简单了。目前来说这个非常有用，因为在编写这个项目的时候，正好在0.8版这样一个重大更新发布的时间点上。我们在三月份早期时发现有一些轻微的不稳定，但是我们确定在你读到这篇文章的时候一切都会解决。
安装PiMAME最好的方式就是先装Raspbian。你可以通过NOOBS安装，使用电脑上的图形工具，或者通过dd命令把Raspbian的内容直接写入到你的SD卡中。就像我们上个月的BrewPi教程里曾提到的，这个过程在之前已经被记录过很多次，所以就不再浪费口水了。想简单点就装一下NOOBS，参照树莓派网站上的指引。在装好Raspbian并跑起来以后，请确保使用配置工具来释放SD卡上的空间，以及确保系统已经更新到最新（sudo apt-get update; sudo apt-get upgrade）。然后再确保已经安装好了git工具包。当前任意Raspbian版本都会自带git，不过你仍然可以通过命令sudo apt-get install git检查一下。
然后再在终端里输入下面的命令把PiMAME安装器从项目的GitHub仓库克隆到本地：
```
git clone https://github.com/ssilverm/pimame_installer
```
之后，如果命令工作正常的话你应该能看到如下的反馈输出：
```
Cloning into ‘pimame_installer’...
remote: Reusing existing pack: 2306, done.
remote: Total 2306 (delta 0), reused 0 (delta 0)
Receiving objects: 100% (2306/2306), 4.61 MiB | 11 KiB/s, done.
Resolving deltas: 100% (823/823), done.
```
这个命令会创建一个叫‘pimame\_installer’的新目录，然后下一步就是进入这个目录再执行它里面的脚本：
```
cd pimame_installer/
sudo ./install.sh
```
这个命令会安装和配置很多软件。所需的时间长短也取决于你的因特网速度，因为需要下载大量的包。我们那个简陋的树莓派加15Mb因特网连接用了差不多45分钟来执行完这个脚本，在这之后你会收到重启机器的提示。你现在可以安全的通过输入sudo shutdown -r来重启了，因为这个命令会自动处理剩下的SD卡写入操作。
这就是安装的全部事情了。在重启树莓派后，就会自动登录，然后会出现PiMAME启动菜单。在0.8版本里这是个非常漂亮的界面，有每个支持平台的图片，还有红色图标提示已经安装了多少个游戏。现在应该可以用控制器来操作了。如果需要检查控制器是否正确连接，可以用SSH连接到树莓派然后检查一下文件**/dev/input/by-id/usb-Ultimarc*I-PAC*Ultimarc\_I-PAC-event-kbd**是否存在。
默认的按键配置就可以让你选择要在你的街机上运行哪个模拟器。我们最感兴趣的就是第一个，名字叫‘AdvMAME’，不过你也许会很惊讶看到还有一个MAME可选的，MAME4ALL。MAME4ALL是特别为树莓派构建的，使用了旧版的MAME源代码，所以它所支持的ROMS的性能也是最佳的。这是很合理的，因为你的树莓派不可能玩那些要求很高的游戏，所以没有理由苛求模拟器的没必要的兼容性。现在剩下的事情就是找些游戏装到你的系统里（参考下面的方法），然后尽情享受吧！
![](/data/attachment/album/201411/13/153557ae10ad9ep2iyy2hq.png)
---
via: 
作者：[Ben Everard](http://www.linuxvoice.com/author/ben_everard/) 译者：[zpl1025](https://github.com/zpl1025) 校对：[wxy](https://github.com/wxy)
本文由 [LCTT](https://github.com/LCTT/TranslateProject) 原创翻译，[Linux中国](http://linux.cn/) 荣誉推出