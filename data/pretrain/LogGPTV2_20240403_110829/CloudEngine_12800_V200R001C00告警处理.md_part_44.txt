Trap Buffer 信息解释
The size of the local buffer for originating IS-IS LSPs is smaller than the size of the received
LSP. (isisSysInstance=[isisSysInstance], isisSysLevelIndex=[isisSysLevelIndex],
isisCircIndex=[isisCircIndex], isisCircIfIndex=[isisCircIfIndex],
isisPduLspId=[isisPduLspId], isisPduOriginatingBufferSize=[isisPduOriginatingBufferSize],
ifIndex=[ifIndex], IfName=[IfName])
收到的LSP报文大小大于本地生成LSP缓冲区的大小。
Trap 属性
Trap属性 描述
Alarm or Event Event
Trap Severity Error
Mnemonic Code isisOrigLSPBuffSizeMismatch
Trap OID 1.3.6.1.3.37.2.0.15
Alarm ID 该Trap是事件Trap，不涉及告警ID。
Alarm Type 该Trap是事件Trap，不涉及告警类型。
Raise or Clear 该Trap是事件Trap，不涉及告警产生或恢复。
Match trap 该Trap是事件Trap，不涉及配对Trap。
Trap Buffer 信息参数
参数名称 参数含义
isisSysInstance IS-IS进程号。
isisSysLevelIndex IS-IS级别。
l 1：Level-1
l 2：Level-2
isisCircIndex IS-IS接口分配的索引。
isisCircIfIndex 接口索引。
isisPduLspId LSP ID。
isisPduOriginatingBufferSize LSP缓冲大小。
ifIndex 接口索引。
IfName 接口名。
文档版本 06 (2017-09-12) 华为专有和保密信息 346
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 26 IS-IS
VB 信息参数
VB OID VB Name VB Index
1.3.6.1.3.37.1.1.1.1.1 isisSysInstance isisSysInstance
1.3.6.1.3.37.1.2.1.1.1 isisSysLevelIndex isisSysInstance
isisSysLevelIndex
1.3.6.1.3.37.1.3.1.1.2 isisCircIfIndex isisSysInstance
isisCircIndex
1.3.6.1.3.37.1.10.1.1.1 isisPduLspId isisSysInstance
1.3.6.1.3.37.1.10.1.1.7 isisPduOriginatingBufferSiz isisSysInstance
e
对系统的影响
无法学到路由，影响流量转发。
可能原因
收到的LSP报文大小大于本地接收LSP缓冲区的大小。
处理步骤
步骤1 在本地设备上使用命令display current-configuration configuration isis查看LSP的大
小，如果查看不到，证明该取值为系统默认值，使用display default-parameter isis命令
查看LSP-Receive-Length字段。
步骤2 通过告警输出信息中的lsp-id字段的值找到生成该LSP的源，使用命令display current-
configuration configuration isis查看LSP的大小，如果查看不到，证明该取值为系统默
认值，使用display default-parameter isis命令查看LSP-Originate-Length字段。
步骤3 将上述两个步骤查看到的数据进行对比，查看步骤1得到的数据是否小于步骤2得到的
数据。
l 如果是，请执行步骤4。
l 如果不是，请执行步骤7。
步骤4 根据情况执行以下步骤：
l 若本地接收LSP缓冲区为系统默认值，请执行步骤5。
l 若源设备LSP大小为系统默认值，请执行步骤6。
步骤5 在源的IS-IS进程下使用lsp-length originate max-size命令修改IS-IS生成LSP的大小，确
保源生成的LSP小于等于本地接收LSP的缓冲区大小。查看告警是否解除。
l 如果是，请执行步骤8。
l 如果不是，请执行步骤7。
步骤6 在本地的IS-IS进程下使用lsp-length receive max-size命令修改IS-IS接收LSP的大小，确
保本地可接收的LSP大小大于等于源设备发送的LSP大小。查看告警是否解除。
文档版本 06 (2017-09-12) 华为专有和保密信息 347
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 26 IS-IS
l 如果是，请执行步骤8。
l 如果不是，请执行步骤7。
步骤7 请收集告警信息、日志信息和配置信息，并联系技术支持人员。
步骤8 结束。
----结束
26.16 ISIS_1.3.6.1.3.37.2.0.16
isisProtocolsSupportedMismatch
Trap Buffer 信息解释
The protocol of received Protocol TLV is mismatched with local configuration.
(isisSysInstance=[isisSysInstance], isisSysLevelIndex=[isisSysLevelIndex],
isisCircIndex=[isisCircIndex], isisCircIfIndex=[isisCircIfIndex],
isisPduProtocolsSupported=[isisPduProtocolsSupported], isisPduLspId=[isisPduLspId],
isisPduFragment=[isisPduFragment], ifIndex=[ifIndex], IfName=[IfName])
收到的PDU中的协议支持TLV中的值与本地配置不一致。
Trap 属性
Trap属性 描述
Alarm or Event Event
Trap Severity Critical
Mnemonic Code isisProtocolsSupportedMismatch
Trap OID 1.3.6.1.3.37.2.0.16
Alarm ID 该Trap是事件Trap，不涉及告警ID。
Alarm Type 该Trap是事件Trap，不涉及告警类型。
Raise or Clear 该Trap是事件Trap，不涉及告警产生或恢复。
Match trap 该Trap是事件Trap，不涉及配对Trap。
Trap Buffer 信息参数
参数名称 参数含义
isisSysInstance IS-IS进程号。
isisSysLevelIndex IS-IS级别。
l 1：Level-1
l 2：Level-2
文档版本 06 (2017-09-12) 华为专有和保密信息 348
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 26 IS-IS
参数名称 参数含义
isisCircIndex 接口索引。
isisCircIfIndex 接口索引。
isisPduProtocolsSupported 支持的协议。
isisPduLspId LSP ID。
isisPduFragment 64字节报文头缩略。
ifIndex 接口IF索引。
IfName 接口名。
VB 信息参数
VB OID VB Name VB Index
1.3.6.1.3.37.1.1.1.1.1 isisSysInstance isisSysInstance
1.3.6.1.3.37.1.2.1.1.1 isisSysLevelIndex isisSysInstance
isisSysLevelIndex
1.3.6.1.3.37.1.3.1.1.2 isisCircIfIndex isisSysInstance
isisCircIndex
1.3.6.1.3.37.1.10.1.1.8 isisPduProtocolsSupported isisSysInstance
1.3.6.1.3.37.1.10.1.1.1 isisPduLspId isisSysInstance
1.3.6.1.3.37.1.10.1.1.2 isisPduFragment isisSysInstance
对系统的影响
无法学到LSP，不能生成路由。
可能原因
收到的LSP源支持的协议类型与本地不一致。
处理步骤
步骤1 TLV中支持的协议类型字段的值与本地支持的协议类型值不匹配，10分钟后再次检查
告警是否消除。
l 如果是，请执行步骤3。
l 如果不是，请执行步骤2。
步骤2 请收集告警信息、日志信息和配置信息，并联系技术支持人员。
文档版本 06 (2017-09-12) 华为专有和保密信息 349
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 26 IS-IS
步骤3 结束。
----结束
26.17 ISIS_1.3.6.1.3.37.2.0.17 isisAdjacencyChange
Trap Buffer 信息解释
ISIS adjacency state change. (SysInstance=[IsisSysInstance], SysLevel=[IsisSysLevelIndex],
CircIndex=[IsisCircIndex], CircIfIndex=[IsisCircIfIndex], LspId=[IsisPduLspId],
AdjState=[IsisAdjState], IfIndex=[IfIndex], IfName=[IfName],
Reason=[HwIsisAdjChgReason], SubReason=[HwIsisAdjChgSubReason])
ISIS邻居状态发生改变。
Trap 属性
Trap属性 描述
Alarm or Event Alarm
Trap Severity Critical
Mnemonic Code isisAdjacencyChange
Trap OID 1.3.6.1.3.37.2.0.17
Alarm ID 0x0001009e
Alarm Type communicationsAlarm
Raise or Clear None
Match trap ISIS_1.3.6.1.3.37.2.0.17 isisAdjacencyChange，故障告警Trap
和业务恢复Trap使用同一个Trap，通过Reason参数区分。只
有当Reason为The alarm was cleared时，此Trap为业务恢复
Trap，其余情况下此Trap为故障告警Trap。
Trap Buffer 信息参数
参数名称 参数含义
SysInstance IS-IS进程号。
SysLevel IS-IS邻居类型。
CircIndex 接口索引。
CircIfIndex 接口IF索引。
LspId LSP ID。
AdjState 邻居状态。
文档版本 06 (2017-09-12) 华为专有和保密信息 350
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 26 IS-IS
参数名称 参数含义
IfIndex 接口IF索引。
IfName 接口名。
Reason 邻居状态改变的原因：
l 1：邻居保持时间超时
l 2：物理接口改变
l 3：协议原因
l 4：BFD会话状态变为Down
l 5：配置改变
l 6：邻居路由器原因
l 100：告警清除
文档版本 06 (2017-09-12) 华为专有和保密信息 351
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 26 IS-IS
参数名称 参数含义
SubReason 邻居状态改变的详细原因：
l 1：邻接关系建立
l 2：删除邻接关系
l 3：删除接口
l 4：接口被抑制
l 5：收到无效的Hello报文
l 6：认证失败
l 7：系统ID冲突
l 8：最大区域地址数不匹配
l 9：Level区域的区域地址不匹配
l 10：没有收到Hello报文
l 11：接口状态变为Down
l 12：协议不匹配
l 13：删除邻居
l 14：BFD会话变为Down状态
l 15：Level改变
l 16：P2P协商改变
l 17：reset邻居
l 18：接口类型发生改变
l 19：reset IS-IS
l 20：删除NET的配置
l 21：去使能IS-IS
l 22：Level不匹配
l 23：没有携带广播地址的SNP报文
l 24：三次握手不成功
l 25：拓扑不匹配
l 26：接口ID不匹配
l 27：三次握手状态为Down
l 28：其他错误
l 29：optional checksum检查失败
VB 信息参数
VB OID VB Name VB Index
1.3.6.1.3.37.1.1.1.1.1 isisSysInstance isisSysInstance
文档版本 06 (2017-09-12) 华为专有和保密信息 352
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 26 IS-IS
VB OID VB Name VB Index
1.3.6.1.3.37.1.2.1.1.1 isisSysLevelIndex isisSysInstance
isisSysLevelIndex
1.3.6.1.3.37.1.3.1.1.2 isisCircIfIndex isisSysInstance
isisCircIndex
1.3.6.1.3.37.1.10.1.1.1 isisPduLspId isisSysInstance
1.3.6.1.3.37.1.10.1.1.9 isisAdjState isisSysInstance
对系统的影响
可能导致IS-IS重新计算路由，造成路由振荡，以及业务流量振荡。
可能原因
原因1：The adjacency HoldTimer expired.(邻居保持时间超时。)
原因2：The physical interface went Down.(物理接口变为down状态。)
原因3：Protocol reason.(协议原因。)
原因4：BFD detected that the neighbor went Down.(BFD检测到邻居状态变为down。)
原因5：Configurations changed.(配置更改。)
原因6：Peer router reason.(邻居设备原因。)
原因100：The alarm was cleared.(告警恢复)
处理步骤
l 原因1：The adjacency HoldTimer expired.
a. 使用ping命令检查到对端路由器的链路状态是否良好。
n 如果是，请执行步骤2。
n 如果不是，请执行步骤4。
b. 使用display current-configuration configuration isis检查对端路由器IS-IS配置
是否正确。
n 如果是，请执行步骤3。
n 如果不是，请执行步骤5。
c. 使用display cpu命令，查看CPU占用率是否过高。
n 如果是，请执行步骤6。
n 如果不是，请执行步骤7。
d. 检查链路配置，并请执行步骤7。
e. 根据IS-IS协议修改配置，检查邻居状态是否Up。
n 如果是，请执行步骤8。
n 如果不是，请执行步骤7。
文档版本 06 (2017-09-12) 华为专有和保密信息 353
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 26 IS-IS
f. 使用display current-configuration命令检查路由器配置，删除不必要的配置，
检查邻居状态是否Up。
n 如果是，请执行步骤8。
n 如果不是，请执行步骤7。
g. 请收集该设备的告警信息、日志信息和配置信息，并联系技术支持人员。
h. 结束。
l 原因2：The physical interface went Down.
a. 使用display isis interface命令检查路由器接口状态是否为down。
n 如果是，请执行步骤2。
n 如果不是，请执行步骤3。