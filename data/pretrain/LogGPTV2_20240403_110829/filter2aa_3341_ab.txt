  “I	
  exist”	
– Every	
  other	
  node	
  keeps	
  track	
  of	
  number	
  of	
  hops	
  an	
originator	
  msg	
  took	
  to	
  reach	
  them	
BATMAN	
hTp://www.open-­‐mesh.org/projects/open-­‐mesh/wiki/The-­‐olsr-­‐story	
•  Simplify:	
  Only	
  plan	
  ﬁrst	
  step	
  in	
  route	
– Direct	
  packets	
  along	
  route	
  with	
  lowest	
  originator	
msg.	
  hop	
  count	
BATMAN	
•  OLSR	
  s.ll	
  the	
  most	
  popular	
•  BATMAN	
  gaining	
  trac.on	
•  We	
  can	
  do	
  beTer	
  and	
  so	
  can	
  you	
•  If	
  you	
  are	
  working	
  in	
  the	
  space,	
  please	
  email	
  us.	
Where	
  Are	
  We	
  Today?	
Smart	
  Phones	
  Have	
  Sensors!	
•  BaTery	
–  Don’t	
  send	
  packets	
  to	
  phones	
  going	
  dead	
–  Send	
  more	
  packets	
  to	
  phones	
  plugged	
  in	
•  GPS	
–  Form	
  routes	
  to	
  phones	
  closer	
  to	
  you	
–  Form	
  routes	
  to	
  phones	
  that	
  don’t	
  move	
  osen	
•  Accelerometer	
–  Don’t	
  send	
  packets	
  to	
  phones	
  in	
  mo.on	
–  Predict	
  phone	
  movement	
  and	
  send	
  packets	
  to	
  phones	
moving	
  in	
  the	
  right	
  direc.on	
Reac.ve	
  Protocols	
•  Stale	
  rou.ng	
  table	
  =	
  What	
  rou.ng	
  table?	
•  No	
  we	
  can	
  play	
  with	
  mo.on	
  and	
  loca.on	
  in	
  a	
useful	
  way	
•  Don’t	
  forget	
  that	
  if	
  you	
  pack	
  node	
  loca.on	
into	
  the	
  headers	
  it	
  can	
  been	
  seen	
  by	
  others	
•  Downsides	
  come	
  with	
  throughput	
  issues	
An	
  aside	
  on	
  Delay	
  tolerance	
•  Disconnected	
  nodes	
  act	
  as	
  disjoint	
  message	
queues	
•  The	
  protocol	
  thinks	
  of	
  the	
  device	
  as	
  a	
  carrier	
pigeon	
  (RFC	
  2549)	
•  Fall	
  back	
  to	
  message	
  passing	
Scale,	
  Delay	
  and	
  Hopping	
•  Though	
  we	
  see	
  great	
  improvements,	
  simple	
proac.ve	
  rou.ng	
  uses	
  a	
  ton	
  of	
  bandwidth	
  to	
stabilize	
  the	
  network	
– S.ll,	
  we	
  can	
  predict	
  bandwidth	
  and	
  throughput	
metrics	
– VoiP	
  good	
  un.l	
  we	
  scale	
  quite	
  large	
•  Reac.ve	
  rou.ng	
  has	
  less	
  chaTer	
  with	
  the	
same	
  bandwidth	
  but	
  is	
  laggy	
•  Mix	
  them	
  FTW.	
More	
  Tunnels	
  and	
  some	
  preliminary	
Security	
•  Jumping	
  over	
  the	
  cell	
  network	
  or	
  Wi-­‐Fi	
(Mimicking	
  VPN	
  with	
  standard	
  Tunnels)	
•  Tunneling	
  the	
  mesh	
  through	
  the	
  Internets!	
– VPN	
  clusters	
  and	
  remote	
  enclaves	
•  Securing	
  the	
  mesh	
  from	
  unwanted	
  guests	
•  Jumping	
  through	
  unsecured	
  mobile	
  nodes	
Jumping	
  over	
  the	
  cell	
  network	
or	
  Wi-­‐Fi	
•  Your	
  phone	
  has	
  at	
  least	
  2	
  network	
  ports	
(Wi-­‐Fi	
  &	
  Cell):	
– We	
  can	
  connect	
  them	
– We	
  can	
  bridge	
  them	
•  Tablet	
  with	
  no	
  cell	
  chip?	
– Plug	
  in	
  an	
  ALFA	
  wireless	
  USB	
  dongle	
•  Virtual	
  mesh	
  networks	
  connected	
  using	
  simple	
VPN	
  tunnels	
IP	
  Address	
  Assignment	
•  Sta.c	
  IP	
  assignment	
•  Generate	
  a	
  unique	
  IP	
  based	
  on	
  phone	
  MAC	
address,	
  IMEI,	
  etc.	
•  DHCP	
  requires	
  a	
  server	
  or	
  global	
  knowledge	
  of	
IPs	
  in	
  use	
A	
  Security	
  Paradigm?	
•  Use	
  Bluetooth	
  or	
  NFC	
  to	
  Bump	
  transfer	
conﬁgura.on	
  info	
  and	
  keys	
•  Secure	
  each	
  link	
  /	
  node	
  with	
  its	
  own	
  keys	
•  Encrypt	
  network	
  data	
  such	
  that	
  bounce	
  or	
  hop	
nodes	
  cannot	
  decrypt	
Security	
•  Share	
  symmetric	
  key	
  in	
  conﬁg	
  ﬁle	
  distributed	
in-­‐person	
  via	
  NFC	
•  Symmetric	
  encryp.on	
  using	
  P2P	
  Diﬃe-­‐Helman	
key	
  exchanges	
•  Asymmetric	
  encryp.on	
  using	
  public	
  /	
  private	
key	
  pair	
•  A	
  third	
  party	
  cer.ﬁcate	
  authority	
  isn’t	
prac.cal	
Security	
hTp://servalpaul.blogspot.com/2012/04/making-­‐security-­‐simple.html	
•  Serval	
  public	
  keys	
  double	
  as	
  network	
  addresses	
•  256-­‐bit	
  Curve25519	
  public	
  keys	
  based	
  on	
  the	
CryptoBox	
  NaCl	
  crypto	
  library	
•  Network	
  intrinsically	
  distributes	
  keys!	
•  Uses	
  CryptoBox	
  authen.cated	
  encryp.on	
  for	
unicast	
  traﬃc	
•  Uses	
  CryptoSign	
  veriﬁed	
  signing	
  for	
  publicly	
readable	
  broadcast	
  traﬃc	
•  CryptoSign	
  uses	
  a	
  handwriTen	
  sign	
  to	
  conﬁrm	
iden.ty	
ICS	
  &	
  Wi-­‐Fi	
  Direct:	
android.net.wiﬁ.p2p	
  API	
•  “Provides	
  classes	
  to	
  create	
  peer-­‐to-­‐peer	
  (P2P)	
connec.ons	
  over	
  Wi-­‐Fi	
  Direct”	
•  Ini.al	
  ICS	
  drop	
  is	
  a	
  very	
  lame	
  par.al	
implementa.on	
  of	
  the	
  spec	
– Kind	
  of	
  works	
  like	
  Bluetooth	
  pairing	
– Wi-­‐Fi	
  doesn’t	
  support	
  connec.ng	
  to	
  an	
  AP	
  and	
P2P	
  at	
  the	
  same	
  .me	
•  Possible	
  upgrade	
  in	
  JB?	
Root	
  required	
•  Need	
  root	
  to	
  modify	
  iptables	
  /	
  rou.ng	
  tables	
•  Need	
  root	
  to	
  mess	
  with	
  Wi-­‐Fi	
  driver	
  and	
  put	
phone	
  in	
  ad-­‐hoc	
  mode	
•  Grab	
  Zerg,	
  wrap	
  in	
  APK	
  and	
  pop	
  the	
  phone	
  on	
install	
•  Over	
  the	
  Air	
  install?	
What	
  about	
  my…?	
•  A:	
– iPhone:	
  In	
  Theory	
– Black	
  Berry:	
  Maybe?	
– Windows	
  Phone:	
  Yes	
  (why	
  do	
  you	
  own	
  one?)	
– Arduino	
  /	
  GumS.x:	
  Yes	
– Netbook	
  /	
  Linux	
  /	
  Mac	
  /	
  Windows	
  Box:	
  Yes	
– Toaster:	
  Yes	
  but	
  Why?	
•  Framework	
  is	
  a	
  mix	
  of	
  Java	
  and	
  C	
– If	
  your	
  box	
  can	
  run	
  those…	
iOS?	
•  Apple	
  gave	
  us	
  a	
  built	
  in	
  Wi-­‐Fi	
  proxy	
conﬁgurable	
  with	
  the	
  iPhone	
  Conﬁgura.on	
U.lity	
•  Ooohhh,	
  is	
  that	
  an	
  APN	
  serng	
  as	
  well?	
•  Cool,	
  now	
  all	
  we	
  need	
  is	
  a	
  simple	
  server	
  to	
proxy	
  and	
  route	
  our	
  data	
What	
  else	
  can	
  we	
  use	
  the	
Mesh	
  for?	
•  Mobile	
  data	
  redundancy	
  using	
  the	
  Torrent	
protocol	
  to	
  raid	
  data	
  across	
  all	
  devices?	
•  Distribute	
  threads	
  and	
  tasks	
  across	
  a	
  cloud	
  of	
unused	
  processors?	
•  Spooﬁng?	
Similar	
  Projects	
•  Collabora.on?	
Freifunk	
hTp://wiki.freifunk.net/	
hTp://berlin.freifunk.net/	
•  German	
  for	
  "Free	
  radio”	
•  Non-­‐commercial	
  open	
  grassroots	
  ini.a.ve	
  to	
support	
  free	
  open	
  radio	
  networks	
  in	
  Germany	
•  Oﬀers	
  specialized	
  OpenWrt-­‐ﬁrmware	
– Rou.ng	
  based	
  on	
  OLSR	
  or	
  BATMAN	
•  Freifunk	
  Berlin	
  has	
  500+	
  nodes	
hTp://www.servalproject.org/	
•  Android	
  ad-­‐hoc	
  network	
  framework	
•  Implemented	
  features	
–  VOIP	
  calls	
  between	
  Serval	
  Mesh-­‐enabled	
  phones	
–  MeshMS,	
  free	
  mesh-­‐based	
  SMS	
•  Features	
  under	
  development	
–  Serval	
  Rhizome,	
  distributed	
  mesh-­‐based	
  data	
  distribu.on	
plaoorm	
–  Serval	
  Maps,	
  mesh-­‐based	
  mapping	
  applica.on	
–  Serval	
  Morse,	
  distributed	
  micro-­‐blogging	
  service	
–  A	
  simple	
  API	
  for	
  using	
  Serval	
  services	
Future	
  Work	
•  VOIP	
  over	
  the	
  mesh	
•  IP	
  address	
  assignment	
•  Evaluate	
  and	
  improve	
  Serval’s	
  approach	
  to	
security	
•  iOS	
  and	
  Windows	
  8	
  port	
Dumb	
  enough	
  to	
  aTempt	
  a	
  demo!	
•  Oh	
  wait,	
  we	
  already	
  did?	
Shameless	
  Plug	
•  GitHub	
  repo:	
– hTps://github.com/monk-­‐dot	
Open	
  Source	
  Projects	
  Used	
•  Wireless	
  Tether	
  for	
  Root	
  Users	
–  “This	
  program	
  enables	
  tethering	
  (via	
  wiﬁ)	
  for	
  rooted	
  handsets.”	
–  hTp://code.google.com/p/android-­‐wiﬁ-­‐tether/	
•  olsrd	
–  “An	
  adhoc	
  wireless	
  mesh	
  rou.ng	
  daemon”	
–  hTp://www.olsr.org/	
•  monou.l	
–  “A	
  simple	
  tool	
  for	
  network	
  monitoring”	
  using	
  neoilter	
–  hTp://code.google.com/p/monou.l/	
•  Processing	
  for	
  Android	
–  “Processing	
  is	
  a	
  language	
  and	
  environment	
  for	
  people	
  who	
  want	
  to	
create	
  images,	
  anima.ons,	
  and	
  interac.ons.”	
–  hTp://wiki.processing.org/w/Android	
•  Linux:	
  iwconﬁg,	
  iptables,	
  dnsmasq,	
  tcpdump,	
  etc.