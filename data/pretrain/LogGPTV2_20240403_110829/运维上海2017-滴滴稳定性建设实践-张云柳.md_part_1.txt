# OCR Output
## Page 1
CNUTCon 2017
CNUT
全球运维技术大会
滴滴稳定性建设实践
张云柳
滴滴资深运维工程师
Geekbang>.InfoQ
主办方
极客邦科技
---
## Page 2
QCon
九折即将结束
团购还享更多优惠，折扣有效期至9月17日
全球软件开发大会
扫描右方二维码即可查看大会信息及购票
10月17-19日上海·宝华万豪酒店
如果在使用过程中遇到任何问题，可联系大会主办方，欢迎咨询！
扫码锁定席位
微信：qcon-0410
电话：010-84782011
七折即将截止立省2040元
ArchSummit
使用限时优惠码AS200，
以目前最优惠价格报名ArchSummit
全球架构师峰会2017
仅限前20名用户，优惠码有效期至9月19日
扫描右方二维码即可使用
扫码锁定席位
如果在使用过程中遇到任何问题，可联系大会主办方，欢迎咨询！
12月8-9日北京·国际会议中心
微信：aschina666
电话：15201647919
---
## Page 3
Geekbang>.
极客邦科技
极客搜索
全站干货，一键触达，只为技术
s.geekbang.org
扫描二维码立即体验
有没有一种搜索方式，能整合InfoQ 中文站、极客邦科技旗下12大微信公众号矩阵的全部资源？
极客搜索，这款针对极客邦科技全站内容资源的轻量级搜索引擎，做到了！
扫描上方二维码，极客搜索！
---
## Page 4
EGO
EXTRA GEEKS' ORGANIZATION
NETWORKS
这里只有
KAZAKHSTAN MONGOLIA CHINA
CHINA
TURKEYn
IRAN
技术领导者
CHINA
ARABIA
EGO会员第二季招募季正式开启
报名时间：9月1日－9月15日
TECHNOLOGY
扫描添加E小欧,
邀您进入EGO会员预报名群
EGO
立即报名
E小欧
---
## Page 5
TABLEOFCONTENTS
滴滴稳定性建设随业务规模增长的演进
适合自己，才是最好的
CNUTCon2017
主办方Geekbang>.InfoQ
CNUT
全球运维技术大会
---
## Page 6
TABLEOFCONTENTS
滴滴如何看稳定性
稳定性建设阶段演进
稳定性技术竞赛
稳定性建设心得
CNUTCon2017
主协方Geekbang>.InfoQ
CNUT
全球运维技术大会
---
## Page 7
滴滴简介
世界上发展最快的公司之一
·2012年成立，到目前仅5年
网络出行平台领头羊
4亿+乘客
1700万+司机
覆盖400+城市
出行服务
出租车、快车、专车
顺风车、企业用车、公交、小巴
代驾、租车
CNUTCon2017
Geekbang). InfoQ
CNUT)
主办方
全球运维技术大会
---
## Page 8
稳定性建设挑战
·系统持续过载
·年均500%请求增长
业务送代频繁
·每周3000+次变更
基础待完善
运维标准缺失
稳定性衡量手段欠缺
CNUTCon2017
Geekbang). InfoQ
CNUT)
主办方
全球运维技术大会
---
## Page 9
稳定性建设思路
故障预防
故障处理
预防
发现
定位
止损
恢复
防止异常发生
及时报出
或扩大为故障
故障发生
定位到可以
确定一个止损预案
使用户体验、经济
影响降低到可接受范围
稳定性建设原则：
重点预防、先止损后排查
还原至正常状态
CNUTCon 2017
Geekbang>. InfoQ
CNUT)
主办方
全球运维技术大会
---
## Page 10
稳定性建设思路
故障预防
故障处理
预防
发现
定位
止损
恢复
防止异常发生
及时报出
或扩大为故障
故障发生
定位到可以
确定一个止损预案
使用户体验、经济
影响降低到可接受范围
稳定性建设原则：
重点预防、先止损后排查
还原至正常状态
CNUTCon 2017
Geekbang>. InfoQ
CNUT)
主办方
全球运维技术大会
---
## Page 11
TABLEOFCONTENTS
滴滴如何看稳定性
稳定性建设阶段演进
稳定性技术竞赛
稳定性建设心得
CNUTCon2017
主协方Geekbang>.InfoQ
CNUT
全球运维技术大会
---
## Page 12
稳定性基础
杜绝裸跑
开源解决方案Nagios
自研监控平台
监控大盘
服务 Dashboard
【监控平台/监控大盘】
业务系统监控/机器基础监控/内网监控
发现/定位
CNUTCon2017
Geekbang). InfoQ
CNUT)
主办方
全球运维技术大会
---
## Page 13
基础监控技术能力沉淀
采集
01
操作系统、业务系统日志、业务系统主动上报
采集
存储
02
展现
从InfluxDB到Open-Falcon
存储
异常检测
03
聚合
异常
手工配置报警阀值
检测
展现
04
通用曲线图：服务Dashboard
CNUTCon2017
Geekbang>. InfoQ
CNUT)
主办方
全球运维技术大会
---
## Page 14
监控与生俱来的缺点
监控永远加不完
不是所有的系统异常都影响业务
CNUTCon2017
Geekbang). InfoQ
CNUT)
主办方
全球运维技术大会
---
## Page 15
监控需要不忘初心
监控，最本质的目标是及时发现业务故障
，万变不离其中，针对主要业务场景做监控兜底
用车发起量
乘客叫车
在线司机量
订单响应量
司机接单
空闲司机量
乘客上车
订单完成量
乘客到达，支付
CNUTCon2O17
Geekbang>. InfoQ
CNUT)
主办方
全球运维技术大会
---
## Page 16
监控需要不忘初心
监控，最本质的目标是及时发现业务故障
，万变不离其中，针对主要业务场景做监控兜底
快车
专车
代驾
用车发起量
乘客叫车
在线司机量
订单响应量
司机接单
出租车
小巴
空闲司机量
乘客上车
顺风车
订单完成量
乘客到达，支付
CNUTCon 2017
Geekbang>. InfoQ
CNUT)
主办方
全球运维技术大会
---
## Page 17
业务受损作为故障发现主要渠道
核心业务指标监
控】
发现
【监控平台/监控大盘】
业务系统监控/机器基础监控/内网监控
定位
CNUTCon2017
Geekbang>. InfoQ
CNUT)
主办方
全球运维技术大会
---
## Page 18
业务监控首探“智能
采集
01
业务DB数据采集
采集
异常检测
02
展现
三次指数平滑法智能检测
存储
聚合
异常
检测
CNUTCon2017
Geekbang). InfoQ
CNUT)
主办方
全球运维技术大会
---
## Page 19
如何快速找出影响业务的异常系统？
，内部系统繁多，需要逐个排查
故障时刻，一般是报警轰炸
系统可用性没有直接量化
监控指标多，是否异常需要研发确认
2
CNUTCon2017
Geekbang). InfoQ
CNUT)
主办方
全球运维技术大会
---
## Page 20
系统红绿灯“灭火图
业务级
场景级
系统级
成功率
用户端/
专快
呼叫
服务端
存储/组
流量
顺风车
抢单
件
内/外依
出租车
支付
赖
平响
CNUTCon2017
Geekbang>. InfoQ
CNUT)
主办方
全球运维技术大会
---
## Page 21
系统红绿灯“灭火图
添加模块
顺风车业务场景顺风车核心模块
查看方式：卡片
排序
返回产品
最近1分钟请求成功率
今天：99.9149%
最近1分钟请求成功率
今天：99.9998%
最近1分钟请求成功率
今天：99.9553%
最近1分钟请求成功率
今天：99.9996%
99.9177 %
本周：99.9072%
100%
本周：
%8666*66
99.9531 %
本周：99.9540%
100%
本周：99.9997%
本月：99.9058%
本月：99.9998%
本月：99.9565%
本月：99.9994%
本季：99.9231%
本季：99.9998%
本季：99.9617%
本季：99.9996%
曲线图
曲线图
由线图
曲线图
最近1分钟请求成功率
今天：100%
最近1分钟请求成功率
今天：99.9917%
最近1分钟请求成功率
今天：99.7754%
今天：99.9865%
08-101小时2小时天周月季
100%
本周：100%
100%
本周：99.9966%
99.5134 %
本周：99.7784%
% 8066'66
本周：99.9858%
本月：100%
本月：99.9970%
本月：99.7729%
本月：99.9846%
本季：99.9995%
本季：99.9975%
本季：99.6953%
本季：99.9666%
C
曲线图
曲线图
曲线图