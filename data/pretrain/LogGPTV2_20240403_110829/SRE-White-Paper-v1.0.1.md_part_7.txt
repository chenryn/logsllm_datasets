交拉取请求（Pull Request）并使用 Git 来加速和简化 Kubernetes 的应
用程序部署和运维任务。每个环境都应该有一个代码仓库，用于定
义给定集群的期望状态，然后 GitOps operator 会持续监控特定分支
（通常是master分支），并在探测到 Git 发生变更后，将此次变更传递
到集群，并更新 Kubernetes etcd中的状态。通过使用像 Git 这样的简
单熟悉工具，开发人员可以更高效地将注意力集中在创建新功能而
不是运维相关任务上。
3.3.1.3 数据库存储适配
为确保项目数据库运行的稳定性、可靠性、可扩展性、安全性
以及高性能，SRE 应该对数据库存储进行适配或优化，确保可以为
应用程序提供高质量、高性能、稳定性强的数据存储和访问服务。
主要包含以下几个方面：
选择合适的数据库类型。根据项目需求、项目架构设计和数据
模型等，选择合适的数据库类型，如果数据具有固定的结构和关
⽹址：SRE-Elite.com 44 微信：SRE精英联盟
SRE实践白皮书（2023年）
系，那么关系型数据库（如 MySQL、PostgreSQL、Oracle 等）可能
是更好的选择。如果数据具有动态的结构，那么非关系型数据库
（如 MongoDB、Cassandra、Redis 等）是更推荐的选择。除数据模型
外，在评估数据库类型的时候还需要考虑项目的数据规模、业务场
景、可扩展性、性能、一致性、可用性、成本等因素，综合考虑数
据库选型。
数据库部署和配置。选择合适的服务器部署数据库服务，并进
行最佳的数据库参数配置，如调整内存、连接数、缓存等参数，以
满足项目所需的数据库运行的性能和资源需求。
数据库高可用和扩展。根据项目需求，实现数据库的高可用和
扩展，如搭建主从复制、分布式设计、读写分离等。
数据库监控和告警。实施数据库监控，收集数据库关键性能指
标（如 QPS、慢查询、磁盘空间等），并设置合适的告警阈值，以便
在出现问题时及时发现并处理。
数据库备份和恢复。制定数据库备份策略，定期备份数据，确
保数据安全。同时，要熟悉并掌握数据库恢复流程，以便在发生数
据丢失或损坏时能够快速恢复。
数据库性能优化。分析数据库性能瓶颈，优化查询语句、索
引、表结构等，提高数据库性能。
数据库安全。保障数据库安全，如设置合理的权限、防止 SQL
注入攻击、加密敏感数据等。
⽹址：SRE-Elite.com 45 微信：SRE精英联盟
SRE实践白皮书（2023年）
3.3.1.4 信创适配
在政策推动下，自主可控成为当下热点。各大企业均在进行自
主可控替代，加大信创布局。信创产品相较于传统商业产品，信创
产品的技术成熟度、生态成熟度存在着客观差距。对于 SRE 来说，
针对含有信创产品的运行环境适配，需要建立以下工作流程：总体
目标制定、信创产品选型、产品验证测试、推动适配改造、业务测
试、割接上线、运行保障。
总体目标制定。根据发展趋势，企业在整体 IT 投入中，明确对
信创产品的采购比例。从而制定企业自主可控的总体战略目标，即
年度含信创替代的项目计划，以及项目中进行信创替代的比例和对
象，绘制全局信创替换后的架构图，重点标注端到端自主可控列
表，包含硬件、数据库存储、容器平台及组件、终端等。每一次的
信创项目完成后，均可以更新端到端的全局信创架构图以及具体的
信创产品应用清单。
信创端到端全局示意图
信创产品选型。确定项目的信创替代目标后，具体在哪一层进
行信创产品的替代也随之明确。根据项目的生产环境及业务场景，
对替换对象进行选型。以数据库存储、硬件、中间件这些为例，
⽹址：SRE-Elite.com 46 微信：SRE精英联盟
SRE实践白皮书（2023年）
SRE有以下维度的选型策略。
1）数据库存储
在信创过程中，SRE 参与各类信创项目的开展，为确保生产运
维的可维护性，SRE 需要在组件选型适配上重点关注。项目需要通
过不同的业务场景完成数据库选型，从联机事务处理过程、后台批
量事务处理过程、联机分析等业务场景构建出业务主要特征，根据
操作特性、数据量、实时性、一致性和 SQL 依赖等主要特征来适配
业务场景。
2）硬件（服务器、操作系统）
在操作系统选型上需要从管理清晰度、公司战略、使用成本和
可维护性为出发点，综合考虑开源和商业的使用版本。
3）中间件
在中间件选型上要根据业务开发语言的适配程度、改造难度、
可维护性等综合考虑，更多的了解实例基础配置的差异性，以及各
类中间件产品的特性，维护过程中的复杂性等确认选型产品。
产品验证测试。针对各个产品，搭建同比于生产规模的产品测
试环境，主要包含计算环境以及网络环境。对产品自身的相关项进
行测试，以体现产品的能力。测试完后，输出详细总结报告，报告
中应包含每一个测试项的结果指标、现存 bug、和原有的非信创产品
的横向指标比对。
以数据库产品测试为例，会进行数据类型及语法测试、数据库
性能测试（包含数据查询、更新、删除、聚合、多表关联等场景）、
⽹址：SRE-Elite.com 47 微信：SRE精英联盟
SRE实践白皮书（2023年）
业务 SQL 测试、高可用测试、数据备份和恢复测试、可维护性测试
（包含错误检测和提示、日志信息、在线升级等）。完成所有产品测
试后，把测试过程中发现的问题和风险整合到产品测试报告，以供
选型决策参考。
推动适配改造。确定好信创替代产品后，根据信创产品的特
性，需要已有应用架构做关联适配，主要包含两类，一类是集成部
署架构的适配改造，如一些国产化的操作系统，部署配置应按照其
系统路径进行调整；另一类是应用的代码适配改造，确保兼容信创
产品后不影响系统稳定性。以下列了分布信创的适配改造场景：
1）针对硬件（服务器、操作系统类）
进行编译适配：针对语言编译类型选择不同方案适配 CPU 架
构；通过容器封装或者构建相似环境实现操作系统适配；
2）针对数据库
进行数据库解耦及开发框架升级：将与数据库多样化交互收敛
到中间层，降低 90%换库导致的应用改造工作量；将分布式事务控
制在应用层；禁用存储过程和数据库链，禁止面向特定特性进行编
码，实现面向对象编程。
3）针对终端
进行代码适配：业务 SQL 类、函数类调整，CSS 布局，渲染适
配调整；弹窗异常、回调事件不触发、按钮无效、无法投屏等适
配。
业务测试。在应用架构根据信创产品进行适配改造后，进入业
⽹址：SRE-Elite.com 48 微信：SRE精英联盟
SRE实践白皮书（2023年）
务测试阶段，首先在测试环境上，使用测试数据进行功能、性能测
试，并进行切换演练。确认过程无误后，在真实环境搭建的信创新
集群上进行测试。
1）功能测试
第一轮采用生产核心的业务场景或回归测试用例，对信创集群
进行接口调用。梳理报错场景进行分析改进。
2）性能测试
使用自动化压测平台，对信创集群进行压测，根据新集群和生
产集群的比例，对比压测后的响应结果，评估集群的性能情况。
3）非功能测试及切换演练
针对评审中因引入信创产品后，可能引起的非功能性，比如由
于数据库中间件的新增，需要重点测试批量数据操作的性能，由于
开发框架的调整，需要重点测试故障转移、接口超时设置生效、服
务熔断能力等。
此外，由于信创集群的引入，在割接中当晚会使用流量倒换的
模式，把部分流量切换到信创集群/平面。所以需重点测试切换能力
是否可以快速生效。
割接上线。通常情况下，为确保生产业务的稳定性，涉及信创
产品替代的项目，采用先单平面改造上线，通过流量控制，把一部
分生产流量引导信创平面进行验证，并行运行稳定后，再进行全量
替换的方案。
割接当晚首选不停服发布，首先把部分流量引入到信平面，进
⽹址：SRE-Elite.com 49 微信：SRE精英联盟
SRE实践白皮书（2023年）
行功能、性能及其他非功能性测试验证。验证无误后，把新老平面
并行运行，并进行相应的测试验证。重点测试平面间切换开关的演
练，如果次日业务量高峰时新平面出现问题，可随时启动切换开
关，把流量全部引导到原有的老平面。
运行保障。针对信创项目割接，建设应急处理的三板斧，切
流、重启、扩容，首先应保证割接次日系统异常时可通过切流快速
应急恢复，其次信创平面的容器云平面，可实现自动重启。此外，
还应具备弹性扩缩容或人工接入时的一键扩容能力。确保生产业务
系统的稳定性。
在可观测维度，重点关注将信创领域的关键指标整合进统一的
运维监控体系中。鉴于信创涉及从端到端的技术栈改造，其磨合过
程可能较为漫长，因此，我们可以考虑采用 eBPF 技术来实现对网
络、系统和应用的全链路监测，从而为系统故障诊断和持续稳定运
行提供坚实的支撑。
3.3.2 运行环境交付
3.3.2.1 基础资源服务
围绕稳定性系统下，SRE 需要提供一个可恢复性、可扩展性的
基础资源服务。基础资源包括：服务器、存储、网络、数据库、中
间件等。SRE 应推动通过服务化方式交付基础资源。主要需要完善
如下方面的内容：
推动可恢复性的基础设施环境建设。可恢复性的基础设施环境
是指信息系统依赖的硬件基础设施环境、应用平台、中间件、数据
⽹址：SRE-Elite.com 50 微信：SRE精英联盟
SRE实践白皮书（2023年）
库等资源能够有效地从故障中恢复。为了达到可恢复性，这些基础
设施在技术选型、构建、运行保障中，需持续考虑到各种风险，包
括自然灾害、技术灾难、请求激增、人为错误或外部攻击等，并采
取预防性、冗余性、高可用架构等以减少潜在的损失。它还具有在
发生灾难后快速恢复的能力，这包括备份、冗余、快速恢复服务和
关键信息系统的保护。可恢复性的基础设施环境还强调在设计和规
划阶段就考虑到恢复能力，而不仅仅是灾害应对和恢复阶段。
以云的方式交付基础设施环境。SRE 应推动混合云的平台服务
能力建设，以支持按需选择一个能够满足需求的云服务。 SRE 根据
应用程序的要求、用户的数量、数据流量等因素，在云平台的服务
目录，在线选择资源池的 CPU 、内存、存储、网络、数据库、中间
件、平台应用服务等资源，并提交相关申请。 SRE 可以在线查看已
分配的资源和运行的应用程序，并可以通过管理终端对应用程序进
行管理和维护，例如，启动、停止、重启、删除等操作。当不再需