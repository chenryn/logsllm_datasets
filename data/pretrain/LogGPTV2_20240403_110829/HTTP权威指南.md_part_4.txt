13.2.3 与安全性相关的数据（A1） ..................................................................................310
13.2.4 与报文有关的数据（A2） ......................................................................................310
13.2.5 摘要算法总述 .........................................................................................................311
13.2.6 摘要认证会话 .........................................................................................................312
13.2.7 预授权 .....................................................................................................................312
13.2.8 随机数的选择 .........................................................................................................315
13.2.9 对称认证 .................................................................................................................315
13.3 增强保护质量 .......................................................................................................................316
13.3.1 报文完整性保护 .....................................................................................................316
13.3.2 摘要认证首部 .........................................................................................................317
13.4 应该考虑的实际问题 ...........................................................................................................317
13.4.1 多重质询 .................................................................................................................318
13.4.2 差错处理 .................................................................................................................318
13.4.3 保护空间 .................................................................................................................318
13.4.4 重写URI .................................................................................................................319
13.4.5 缓存 .........................................................................................................................319
13.5 安全性考虑 ...........................................................................................................................320
13.5.1 首部篡改 .................................................................................................................320
13.5.2 重放攻击 .................................................................................................................320
13.5.3 多重认证机制 .........................................................................................................320
13.5.4 词典攻击 .................................................................................................................321
13.5.5 恶意代理攻击和中间人攻击 .................................................................................321
13.5.6 选择明文攻击 .........................................................................................................321
13.5.7 存储密码 .................................................................................................................322
13.6 更多信息 ...............................................................................................................................322
第14章 安全HTTP .....................................................................................................................323
14.1 保护HTTP的安全 ...............................................................................................................324
14.2 数字加密 ...............................................................................................................................326
10 ｜ 目录
14.2.1 密码编制的机制与技巧 .........................................................................................326
14.2.2 密码 .........................................................................................................................327
14.2.3 密码机 .....................................................................................................................328
14.2.4 使用了密钥的密码 .................................................................................................328
14.2.5 数字密码 .................................................................................................................328
14.3 对称密钥加密技术 ...............................................................................................................330
14.3.1 密钥长度与枚举攻击 .............................................................................................330
14.3.2 建立共享密钥 .........................................................................................................332
14.4 公开密钥加密技术 ...............................................................................................................332
14.4.1 RSA .........................................................................................................................333
14.4.2 混合加密系统和会话密钥 .....................................................................................334
14.5 数字签名 ...............................................................................................................................334
14.6 数字证书 ...............................................................................................................................336
14.6.1 证书的主要内容 .....................................................................................................336
14.6.2 X.509 v3证书 .........................................................................................................337
14.6.3 用证书对服务器进行认证 .....................................................................................338
14.7 HTTPS——细节介绍 ...........................................................................................................339
14.7.1 HTTPS概述 ............................................................................................................339
14.7.2 HTTPS方案 ............................................................................................................340
14.7.3 建立安全传输 .........................................................................................................341
14.7.4 SSL握手 .................................................................................................................341
14.7.5 服务器证书 .............................................................................................................343
14.7.6 站点证书的有效性 .................................................................................................344
14.7.7 虚拟主机与证书 .....................................................................................................345
14.8 HTTPS客户端实例 ..............................................................................................................345
14.8.1 OpenSSL .................................................................................................................346
14.8.2 简单的HTTPS客户端 ...........................................................................................347
14.8.3 执行OpenSSL客户端 ...........................................................................................350
14.9 通过代理以隧道形式传输安全流量 ...................................................................................351
14.10 更多信息 .............................................................................................................................353
14.10.1 HTTP安全性 ......................................................................................................353
14.10.2 SSL与TLS .........................................................................................................353
14.10.3 公开密钥基础设施 .............................................................................................354
14.10.4 数字密码 .............................................................................................................354
第四部分 实体、编码和国际化
第15章 实体和编码 .....................................................................................................................357
15.1 报文是箱子，实体是货物 ...................................................................................................359
15.2 Content-Length: 实体的大小 .......................................................................................361
目录 ｜ 11
15.2.1 检测截尾 .................................................................................................................361
15.2.2 错误的Content-Length ...................................................................................362
15.2.3 Content-Length与持久连接 ............................................................................362
15.2.4 内容编码 .................................................................................................................362
15.2.5 确定实体主体长度的规则 .....................................................................................362
15.3 实体摘要 ...............................................................................................................................364
15.4 媒体类型和字符集 ...............................................................................................................364
15.4.1 文本的字符编码 .....................................................................................................365
15.4.2 多部分媒体类型 .....................................................................................................365
15.4.3 多部分表格提交 .....................................................................................................366
15.4.4 多部分范围响应 .....................................................................................................367
15.5 内容编码 ...............................................................................................................................368
15.5.1 内容编码过程 .........................................................................................................368
15.5.2 内容编码类型 .........................................................................................................369
15.5.3 Accept-Encoding首部 .....................................................................................369
15.6 传输编码和分块编码 ...........................................................................................................371
15.6.1 可靠传输 .................................................................................................................371
15.6.2 Transfer-Encoding首部 .................................................................................372
15.6.3 分块编码 .................................................................................................................373
15.6.4 内容编码与传输编码的结合 .................................................................................375
15.6.5 传输编码的规则 .....................................................................................................375
15.7 随时间变化的实例 ...............................................................................................................375
15.8 验证码和新鲜度 ...................................................................................................................376
15.8.1 新鲜度 .....................................................................................................................377
15.8.2 有条件的请求与验证码 .........................................................................................378
15.9 范围请求 ...............................................................................................................................380
15.10 差异编码 .............................................................................................................................382
15.11 更多信息 .............................................................................................................................385
第16章 国际化 ..............................................................................................................................387
16.1 HTTP对国际性内容的支持 ................................................................................................388
16.2 字符集与HTTP ....................................................................................................................389
16.2.1 字符集是把字符转换为二进制码的编码 .............................................................389
16.2.2 字符集和编码如何工作 .........................................................................................390
16.2.3 字符集不对，字符就不对 .....................................................................................391
16.2.4 标准化的MIME charset值 ...............................................................................391
16.2.5 Content-Type首部和Charset首部以及META标志 .................................393
16.2.6 Accept-Charset首部 ........................................................................................393
16.3 多语言字符编码入门 ...........................................................................................................394
16.3.1 字符集术语 .............................................................................................................394
16.3.2 字符集的命名很糟糕 .............................................................................................395
12 ｜ 目录
16.3.3 字符 .........................................................................................................................396
16.3.4 字形、连笔以及表示形式 .....................................................................................396
16.3.5 编码后的字符集 .....................................................................................................397
16.3.6 字符编码方案 .........................................................................................................399
16.4 语言标记与HTTP ................................................................................................................402
16.4.1 Content-Language首部 ...................................................................................402
16.4.2 Accept-Language首部 .....................................................................................403
16.4.3 语言标记的类型 .....................................................................................................404
16.4.4 子标记 .....................................................................................................................404
16.4.5 大小写 .....................................................................................................................405
16.4.6 IANA语言标记注册 ..............................................................................................405
16.4.7 第一个子标记——名字空间 .................................................................................405
16.4.8 第二个子标记——名字空间 .................................................................................406
16.4.9 其余子标记——名字空间 .....................................................................................407
16.4.10 配置和语言有关的首选项 ...................................................................................407
16.4.11 语言标记参考表 ...................................................................................................407
16.5 国际化的URI .......................................................................................................................408
16.5.1 全球性的可转抄能力与有意义的字符的较量 .....................................................408
16.5.2 URI字符集合 .........................................................................................................408
16.5.3 转义和反转义 .........................................................................................................409
16.5.4 转义国际化字符 .....................................................................................................409
16.5.5 URI中的模态切换 .................................................................................................410
16.6 其他需要考虑的地方 ...........................................................................................................410
16.6.1 首部和不合规范的数据 .........................................................................................410
16.6.2 日期 .........................................................................................................................411
16.6.3 域名 .........................................................................................................................411
16.7 更多信息 ...............................................................................................................................411
16.7.1 附录 .........................................................................................................................411
16.7.2 互联网的国际化 .....................................................................................................411
16.7.3 国际标准 .................................................................................................................412
第17章 内容协商与转码 ............................................................................................................413
17.1 内容协商技术 .......................................................................................................................414
17.2 客户端驱动的协商 ...............................................................................................................415
17.3 服务器驱动的协商 ...............................................................................................................415
17.3.1 内容协商首部集 .....................................................................................................416
17.3.2 内容协商首部中的质量值 .....................................................................................417
17.3.3 随其他首部集而变化 .............................................................................................417
17.3.4 Apache中的内容协商 ............................................................................................417
17.3.5 服务器端扩展 .........................................................................................................418
17.4 透明协商 ...............................................................................................................................419
目录 ｜ 13
17.4.1 进行缓存与备用候选 .............................................................................................419
17.4.2 Vary首部 ...............................................................................................................420
17.5 转码 .......................................................................................................................................422
17.5.1 格式转换 .................................................................................................................422
17.5.2 信息综合 .................................................................................................................423
17.5.3 内容注入 .................................................................................................................423
17.5.4 转码与静态预生成的对比 .....................................................................................423
17.6 下一步计划 ...........................................................................................................................424
17.7 更多信息 ...............................................................................................................................424
第五部分 内容发布与分发
第18章 Web主机托管 ...............................................................................................................429
18.1 主机托管服务 .......................................................................................................................430
18.2 虚拟主机托管 .......................................................................................................................431
18.2.1 虚拟服务器请求缺乏主机信息 .............................................................................432
18.2.2 设法让虚拟主机托管正常工作 .............................................................................433
18.2.3 HTTP/1.1的Host首部 .........................................................................................437
18.3 使网站更可靠 .......................................................................................................................438
18.3.1 镜像的服务器集群 .................................................................................................438
18.3.2 内容分发网络 .........................................................................................................440
18.3.3 CDN中的反向代理缓存 .......................................................................................440
18.3.4 CDN中的代理缓存 ...............................................................................................440
18.4 让网站更快 ...........................................................................................................................441
18.5 更多信息 ...............................................................................................................................441
第19章 发布系统 .........................................................................................................................443
19.1 FrontPage为支持发布而做的服务器扩展 .........................................................................444
19.1.1 FrontPage服务器扩展 ...........................................................................................444
19.1.2 FrontPage术语表 ...................................................................................................445
19.1.3 FrontPage的RPC协议 ..........................................................................................445
19.1.4 FrontPage的安全模型 ...........................................................................................448
19.2 WebDAV与协作写作 ..........................................................................................................449
19.2.1 WebDAV的方法.....................................................................................................449
19.2.2 WebDAV与XML ...................................................................................................450
19.2.3 WebDAV首部集.....................................................................................................451
19.2.4 WebDAV的锁定与防止覆写.................................................................................452
19.2.5 LOCK方法 .............................................................................................................453
19.2.6 UNLOCK方法 .......................................................................................................456
19.2.7 属性和元数据 .........................................................................................................456
14 ｜ 目录
19.2.8 PROPFIND方法 .....................................................................................................457
19.2.9 PROPPATCH方法 ..................................................................................................459
19.2.10 集合与名字空间管理 ...........................................................................................460
19.2.11 MKCOL方法 ........................................................................................................460
19.2.12 DELETE方法 .......................................................................................................461
19.2.13 COPY与MOVE方法 .........................................................................................462
19.2.14 增强的HTTP/1.1方法 .........................................................................................465
19.2.15 WebDAV中的版本管理.......................................................................................466
19.2.16 WebDAV的未来发展...........................................................................................466
19.3 更多信息 ...............................................................................................................................467
第20章 重定向与负载均衡 .......................................................................................................469
20.1 为什么要重定向 ...................................................................................................................470
20.2 重定向到何地 .......................................................................................................................471
20.3 重定向协议概览 ...................................................................................................................471
20.4 通用的重定向方法 ...............................................................................................................474
20.4.1 HTTP重定向 ..........................................................................................................474
20.4.2 DNS重定向 ............................................................................................................475
20.4.3 任播寻址 .................................................................................................................480