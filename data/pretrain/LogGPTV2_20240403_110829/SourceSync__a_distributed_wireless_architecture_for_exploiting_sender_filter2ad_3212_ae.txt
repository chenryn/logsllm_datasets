c
f
o
n
o
i
t
c
a
r
F
 1
 0.8
 0.6
 0.4
 0.2
 0
Single Best AP
SourceSync
High
Medium
Low
SNR Regime
 0
 5
 10
 15
 20
 25
 30
 35
 40
Throughput (Mbps)
Figure 15: Power gains. SourceSync achieves a 2–3 dB gain over a
single sender across the range of SNRs.
8.2 Power and Diversity Gains
As explained earlier, allowing multiple senders to transmit simulta-
neously provides both power gains from the addition of the senders’
powers, and frequency diversity gains because it is unlikely that the
same frequency experiences a fade from all senders to the receiver. In
this section, we verify that SourceSync actually provides these gains.
Method. We place the receiver and two transmitters at various
random locations in our testbed. For each set of locations, we measure
the average SNR across subcarriers, as well as the SNR per subcarrier
when each sender transmits separately, and when the two senders
transmit in combination using SourceSync. We group the locations
into three categories based on the SNRs of the senders transmitting
separately: low (12dB).
Results. Fig. 15 plots the average SNR across subcarriers, both
for senders transmitting separately, and for joint transmission using
SourceSync. As we can see, SourceSync improves the average SNR
by 2–3 dB for all SNR ranges. The increase in SNR is due to the
addition of power from both senders to the receiver. In particular,
simultaneous transmission from two senders whose signals arrive at
the receiver with equal power results in an SNR increase of 3 dB.
To understand the gains further, we plot the SNR per subcarrier for
all three SNR ranges. We see from Figs. 16(a)-(c) that SourceSync not
only improves the average SNR, but has a ﬂatter SNR proﬁle than that
of either sender transmitting separately. This shows that SourceSync
is able to exploit sender diversity on a per-subcarrier basis. These
gains are due to SourceSync’s smart combiner (§6) that uses space
time block codes at a subcarrier granularity to enable signals from
multiple transmitters to combine constructively. The ﬂatter SNR
proﬁle is important in channels like 802.11, which exhibit frequency
selective fading and different SNRs across subcarriers. Since it is
unlikely that both senders will simultaneously experience a fade in
the same subcarrier, SourceSync has a ﬂatter SNR curve. 802.11
convolutional codes can be affected by even a few bad subcarriers,
and hence, a ﬂatter proﬁle allows the system to achieve signiﬁcantly
higher bitrates with SourceSync than without SourceSync.
8.3 Last Hop Diversity
We now examine the gains from using SourceSync in a last-hop
scenario to harness sender diversity gains.
Method. We place the two transmitters, acting as APs, and the
receiver, acting as a client, in random testbed locations. For each set
of positions, we compute the throughput with each AP acting alone,
as well as the throughput of the combined system with SourceSync,
using SampleRate [3] for rate adaptation. We repeat the experiment
with different sets of random locations.
Results. Fig. 17 shows the CDF of the throughputs obtained
for each set of positions using the best AP for the client in that
Figure 17: SourceSync at the last hop. The red dotted line is the
CDF of throughput using selective diversity (i.e. single best AP). The
blue solid line is the CDF of throughput using sender diversity across
both APs with SourceSync. The CDFs show that sender diversity
produces a median gain of 1.57× over selective diversity.
conﬁguration, as well as the throughputs when leveraging diversity
across APs using SourceSync. As can be seen, SourceSync provides
beneﬁts over selective diversity (i.e. using the single best AP) at all
client throughputs, with a median throughput gain of 1.57×.
8.4 Opportunistic Routing with SourceSync
We evaluate the gains of SourceSync with opportunistic routing.
Method. We create a ﬁve node topology as follows. We place two
nodes, acting as source and destination, at random locations in our
testbed. For each choice of source and destination, we place nodes
acting as relays in three other random locations between the source
and destination location. We measure pairwise loss rates between
the nodes, compute the ETX metric for each link, and evaluate three
schemes: (a) a single path routing scheme that picks the best relay
to route the packets from source to destination, (b) ExOR, which
opportunistically uses any of the three relays as forwarders, and
(c) a combination of ExOR and SourceSync which also exploits
sender diversity to forward from relays to the destination. Since rate
adaptation for opportunistic routing protocols is still an open area,
we conﬁgure the entire network to run at 6 Mbps, and at 12 Mbps,
and pick the conﬁguration that provides the highest throughput. We
repeat the experiment for 20 different topologies at each rate.
Results. Figs. 18(a) and (b) show the CDF of the throughputs
with single-path routing, ExOR, and the combination of ExOR and
SourceSync. As would be expected, ExOR can harness gains from
receiver diversity from the source to the relays, and provide a median
throughput gain of 1.26–1.4× over single path routing. SourceSync
can provide additional gains of 1.35–1.45× over the receiver diver-
sity in ExOR by exploiting sender diversity from the relays to the
destination. Further, SourceSync and ExOR work in tandem and
provide a median throughput gain of 1.7–2× over single path routing.
9 Conclusion
This paper introduces SourceSync, a distributed wireless architecture
that exploits sender diversity and demonstrates its practicality via
implementation and testbed evaluation. It integrates sender diversity
with last-hop diversity and opportunistic routing, showing that this
synergy can signiﬁcantly improve throughput.
We believe that SourceSync has wider implications for wireless
design than explored here. Techniques such as distributed beam-
forming [34] and lattice codes [28] promise signiﬁcant throughput
improvements in theory. However, these techniques have hitherto not
181 20
 18
 16
 14
 12
)
B
d
(
R
N
S
 10
-10
 16
 14
 12
 10
 8
 6
 4
 2
 0
-10
-5
 0
 5
 10
Frequency (Mhz)
(a) High SNR
-5
 0
 5
 10
Frequency (Mhz)
(b) Medium SNR
 10
 8
 6
 4
 2
 0
-2
-4
-6
-8
-10
-10
Sender1
Sender2
SrcSync
-5
 0
 5
 10
Frequency (Mhz)
(c) Low SNR
Figure 16: Frequency diversity gains. SourceSync improves the SNR in each sub-carrier and creates a ﬂatter SNR proﬁle.
s
t
n
e
i
l
c
f
o
n
o
i
t
c
a
r
F
 1
 0.8
 0.6
 0.4
 0.2
 0
s
t
n
e
i
l
c
f
o
n
o
i
t
c
a
r
F
 1
 0.8
 0.6
 0.4
 0.2
 0
Single path
ExOR
SourceSync
Single path
ExOR
SourceSync
 0.8  1  1.2  1.4  1.6  1.8  2  2.2  2.4  2.6  2.8
 1  1.5  2  2.5  3  3.5  4  4.5  5  5.5  6
Throughput (Mbps)
(a) Bitrate of 6 Mbps
Throughput (Mbps)
(b) Bitrate of 12 Mbps
Figure 18: SourceSync with opportunistic routing. SourceSync together with ExOR provides gains both over ExOR alone, and over
traditional single path routing. The median gains are 1.26-1.4× over single path routing, and 1.35-1.45× over ExOR, depending on the bitrate.
been used in practice because they require some form of symbol syn-
chronization. The synchronization mechanisms in this paper provide
a ﬁrst step toward practical implementations of these techniques.
Acknowledgments: We thank the reviewers, and our shepherd, Matt
Welsh, for their comments. This work is funded by DARPA IT-
MANET and an NSF award CNS-0831660.
References
[1] D. Agrawal, V. Tarokh, A. Naguib, and N. Seshadri. Space-time coded OFDM for high
data-rate wireless communication over wideband channels. In IEEE VTC, volume 3, 1998.
[20] G. Kramer, I. Mari´c, and R. Yates. Cooperative communications. Found. in Networking, 1(3),
2006.
[21] J. N. Laneman, D. N. C. Tse, and G. W. Wornell. Cooperative diversity in wireless networks:
Efﬁcient protocols and outage behavior. IEEE Trans. on Inform. Theory, Dec 2004.
[22] X. Li. Space-time coded multi-transmission among distributed transmitters without perfect
synchronization. Signal Processing Letters, IEEE, 11(12):948 – 951, Dec. 2004.
[23] J. Manweiler, N. Santhapuri, S. Sen, R. Roy Choudhury, S. Nelakuditi, and K. Munagala.
Order matters: transmission reordering in wireless networks. In ACM MobiCom, Beijing, 2009.
[24] H. Meyr, M. Moeneclaey, and S. A. Fechtel. Digital Communication Receivers:
Synchronization, Channel Estimation, and Signal Processing. John Wiley, 1998.
[25] A. Miu, H. Balakrishnan, and C. E. Koksal. Improving loss resilience with multi-radio diversity
in wireless networks. In ACM MobiCom, Cologne, Germany, 2005.
[26] A. K. L. Miu, G. Tan, H. Balakrishnan, and J. G. Apostolopoulos. Divert: Fine-grained path
selection for wireless lans. In ACM MobiSys, Boston, MA, 2004.
[27] Local and metropolitan area networks–speciﬁc requirements part 11: Wireless LAN medium
access control (MAC) and physical layer (PHY) speciﬁcations. IEEE Std 802.11n, Oct. 2009.
[28] B. Nazer and M. Gastpar. The case for structured random codes in network capacity theorems.
[2] S. Alamouti. A simple transmit diversity technique for wireless communications. IEEE Journal
European Transactions on Telecommunications, 19(4):455–474, 2008.
on selected areas in communications, 16(8):1451–1458, 1998.
[3] J. Bicket. Bit-rate selection in wireless networks. Master’s thesis, MIT, 2005.
[4] S. Biswas and R. Morris. Opportunistic routing in multi-hop wireless networks. In ACM
SIGCOMM, Philadelphia, PA, 2005.
[5] S. Chachulski, M. Jennings, S. Katti, and D. Katabi. Trading structure for randomness in
wireless opportunistic routing. In ACM SIGCOMM, Kyoto, Japan, 2007.
[6] W. Choi and J. G. Andrews. Downlink performance and capacity of distributed antenna systems
in a multicell environment. IEEE Trans. on Wireless Comms., 6(1):69–73, January 2007.
[7] Distributed Antenna Systems - No Re-
placement for Wireless Strategy. http://medicalconnectivity.com/2008/02/05/
distributed-antenna-systems-no-replacement-for-wireless-strategy/.
[29] A. V. Oppenheim, A. S. Willsky, and S. H. Nawab. Signals & systems. Prentice-Hall, 1996.
[30] H. Rahul, F. Edalat, D. Katabi, and C. Sodini. Frequency-Aware Rate Adaptation and MAC
Protocols. In ACM MobiCom, Beijing, China, September 2009.
[31] E. Rozner, J. Seshadri, Y. Mehta, and L. Qiu. SOAR: Simple Opportunistic Adaptive Routing
Protocol for Wireless Mesh Networks. In IEEE TMC , 2009.
[32] A. Sendonaris, E. Erkip, and B. Aazhang. User cooperation diversity. Part I. System
description. IEEE Trans. on Comms., 51(11):1927–1938, 2003.
[33] A. Sendonaris, E. Erkip, and B. Aazhang. User cooperation diversity. Part II. Implementation
aspects and performance analysis. IEEE Trans. on Comms., 51(11):1939–1948, Nov. 2003.
[34] S. Shamai, O. Somekh, and B. M. Zaidel. Multi-cell communications: An information theoretic
perspective. In Workshop on Communications and coding, 2004.
[8] D. S. J. De Couto, D. Aguayo, J. Bicket, and R. Morris. A high-throughput path metric for
multi-hop wireless routing. In ACM MobiCom, San Diego, California, September 2003.
[35] O. Shin, A. Chan, H. Kung, V. Tarokh, et al. Design of an OFDM cooperative space-time
diversity system. IEEE Transactions on Vehicular Technology, 56(4):2203, 2007.
[9] A. Dutta, D. Saha, D. Grunwald, and D. Sicker. SMACK: a SMart ACKnowledgment scheme
[36] Further advancements for E-UTRA: Physical layer aspects, rel. 9, June 2009. Tech
for broadcast messages in wireless networks. In ACM SIGCOMM, Barcelona, Spain, 2009.
Speciﬁcation Group Radio Access Network.
[10] F. Edalat. Real-time Sub-carrier Adaptive Modulation and Coding in Wideband OFDM
Wireless Systems. PhD thesis, Massachusetts Institute of Technology, 2008.
[37] Local and metropolitan area networks–speciﬁc requirements part 11: Wireless LAN medium
access control (MAC) and physical layer (PHY) speciﬁcations. IEEE Std 802.11a, June 2003.
[11] Local and metropolitan area networks–speciﬁc requirements part 11: Wireless LAN medium
access control (MAC) and physical layer (PHY) speciﬁcations. IEEE Std 802.11g, June 2003.
[38] Local and metropolitan area networks, part 16: Air interface for ﬁxed broadband wireless
access systems: Amendment 1: Multihop relay speciﬁcation, May 2009. IEEE.
[12] A. Goldsmith. Wireless Communications. Cambridge University Press, 2005.
[13] S. Gollakota and D. Katabi. ZigZag Decoding: Combating Hidden Terminals in Wireless
Networks. In ACM SIGCOMM, Seattle, WA, 2008.
[39] V. Tarokh, N. Seshadri, and A. Calderbank. Space-time codes for high data rate wireless
communication: Performance criterion and code construction. IEEE Trans. on Inform. Theory,
44(2), 1998.
[14] D. Halperin, T. Anderson, and D. Wetherall. Taking the sting out of carrier sense: Interference
Cancellation for wireless LANs. In ACM Mobicom, San Francisco, CA, 2008.
[40] S. Verdu. Multiuser Detection. Cambridge University, 1998.
[41] M. Vutukuru, H. Balakrishnan, and K. Jamieson. Cross-Layer Wireless Bit Rate Adaptation. In
[15] J. Heiskala and J. Terry. OFDM Wireless LANs: A Theoretical and Practical Guide. Sams
ACM SIGCOMM, Barcelona, Spain, August 2009.
Publishing, 2001.
[16] H. Jafarkhani. A quasi-orthogonal space-time block code. IEEE Trans. on Comms., 2001.
[17] S. Jakubczak, D. Andersen, M. Kaminsky, K. Papagiannaki, and S. Seshan. Link-alike: Using
Wireless to Share Network Resources in a Neighborhood. In MC2R, 2008.
[42] C. Williams, S. McLaughlin, and M. Beach. Robust OFDM timing synchronisation in
multipath channels. EURASIP Jrnl on Wireless Comm. and Networking, 2008:7, 2008.
[43] S. H. Y. Wong, H. Yang, S. Lu, and V. Bharghavan. Robust rate adaptation for 802.11 wireless
networks. In ACM MobiCom, Los Angeles, CA, 2006.
[18] S. Katti, S. Gollakota, and D. Katabi. Embracing Wireless Interference: Analog Network
[44] G. Woo, P. Kheradpour, and D. Katabi. Beyond the bits: Cooperative packet recovery using
Coding. In ACM SIGCOMM, Kyoto, Japan, 2007.
PHY information. In ACM MobiCom, Montreal, QC, 2007.
[19] S. Katti, D. Katabi, H. Balakrishnan, and M. Medard. Symbol-level Network Coding for
Wireless Mesh Networks. In ACM SIGCOMM, Seattle, WA, 2008.
[45] J. Zhang, J. Jia, Q. Zhang, and E. M. K. Lo. Implementation and Evaluation of Cooperative
Communications in Software-Deﬁned Radio Testbed. In INFOCOM, San Diego, CA, 2010.
182