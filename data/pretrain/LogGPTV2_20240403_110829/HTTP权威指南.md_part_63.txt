Content-Language: fr
Content-Language首部不仅限于文本文档。音频片段、电影以及应用程序都有可
能是面向特定语言受众的。任何面向特定语言受众的媒体类型都可以有Content-
Language首部。在图16-8中，音频文件标记为面向纳瓦霍15（Navajo）听众。
http://www.canyonrecords.com/wav/534.wav
HTTP/1.1 200 OK
Content-type: audio/x-wav
Content-length: 289772
Content-language: i-navajo
00100101110100100101
01010010100111101001
01010101011100000101
01011111001000011...
图16-8 Content-Language首部把名为Rain Song（ 雨之歌）的音频片段标记为面向纳
瓦霍听众
如果内容是面向多种语言受众的，可以列出多种语言。就像在HTTP规范中建议的，
一份同时用英语和毛利语写的“Treaty of Waitangi”16（怀唐伊条约）译稿，可以这
样描述：
Content-Language: mi, en
不过，不能仅根据有多种语言在实体中出现就认为它是面向多种语言受众的。为初
学者编写的语言入门教材，比如“A First Lesson in Latin”（拉丁语第一课），显然
是为英语受众准备的，应当只用en来描述。
16.4.2 Accept-Language首部
我们绝大多数人至少懂一种语言。HTTP允许我们把语言方面的限制和优先选择都
发送给网站服务器。如果网站服务器有以多种语言表示的资源版本，它就能把内容
用我们最优选的语言表示出来。17
注15：美国最大的印地安部落。（译者注）
注16：英国政府与新西兰毛利酋长们在1840年签署的条约，是新西兰的“建国文献”。（译者注）
注17： 服务器也可以根据Accept-Language首部生成适合用户语言的动态内容，或据此选择图像，或
选择适合目标语言的商业促销等。
国际化 ｜ 403
这里有个例子，客户端请求西班牙语内容：
Accept-Language: es
可以在Accept-Language首部中放入多个语言标记以枚举所支持的全部语言及其
优先顺序（从左到右）。这里有个例子，客户端首选英语，但也接受瑞士德语（标准
语言标记是de-CH）或其他德语变种（标记是de）：
Accept-Language: en, de-CH, de
客户端使用Accept-Language首部和Accept-Charset首部请求可以理解的内
容。第17章将研究这些机制的细节。
16.4.3 语言标记的类型
在RFC 3066，“Tags for the Identification of Languages”（标识语言的标记）中记录
了语言标记的标准化语法。可以用语言标记来表示：
• 一般的语言分类（比如es代表西班牙语）；
• 特定国家的语言（比如en-GB代表英国英语）；
385 • 语言的方言（比如no-bok指挪威的书面语）；
• 地区性的语言（比如sgn-US-MA代表美国马撒葡萄园岛上的手语）；
• 标准化的非变种语言（比如i-navajo）；
• 非标准的语言（比如x-snowboarder-slang18）。
16.4.4 子标记
语言标记有一个或多个部分，用连字号分隔，称为子标记：
• 第一个子标记称为主子标记，其值是标准化的；
• 第二个子标记是可选的，遵循它自己的命名标准；
• 其他尾随的子标记都是未注册的。
主子标记中只能含有字母（A～Z）。其后的子标记可以含有字母和数字，长度最多
8个字符。图16-9中给出了一个示例。
注18：描述由“酷爱滑雪者们”（shredders）使用的一种俚语。（译者注）
404 ｜ 第16章
马撒葡萄 园岛上的手语
sgn-US-MA
第一个 第二个 第三个
子标记 子标记 子标记
（手语） （美国）（马萨诸塞州
的地区性变体）
图16-9 语言标记被分隔为子标记
16.4.5 大小写
所有的标记都是不区分大小写的，也就是说，标记en和eN是等价的。但是，习惯
上用全小写来表示一般的语言，而用全大写来表示特定的国家。例如，fr表示所有
分类为法语的语言，而FR表示国家法国19。
16.4.6 IANA语言标记注册
第一个和第二个语言子标记的值由各种标准文档以及相关的维护组织定义。IANA20
依据RFC 3066中概括的规则来管理标准的语言标记列表。
如果语言标记由标准的国家和语言值组成，标记就不需要专门注册。只有那些无法
用标准的国家和语言值构成的语言标记才需要专门向IANA注册21。下面几节概括 386
了RFC 3066中关于第一子标记和第二子标记的标准。
16.4.7 第一个子标记——名字空间
第一个子标记通常是标准化的语言记号，选自ISO 639中的语言标准集合。不过也
可以用字母i来标识在IANA中注册的名字，或用x表示私有的或者扩展的名字。
下面是各种规则。
如果第一个子标记含有：
• 2个字符，那就是来自ISO 63922和639-1标准的语言代码；
注19：这种惯用法是ISO标准3166中推荐的。
注20：参见http://www.iana.org和RFC 2860。
注21： 编写本书的时候，IANA中只显式注册了21种语言标记，包括汉语中的广东话（标记是zh-yue）、
新挪威语（标记是no-nyn）、卢森堡语（标记是i-lux）以及克林根语（语言标记是i-klingon）。在因
特网上使用的其余数百种口语的标记均由标准的组件构成。
注22： 参见ISO标准639，“Codes for the representation of names of languages—Part2：Alpha-3code”（表示
语言名字的代码——第2部分：Alpha-3代码）。
国际化 ｜ 405
• 3个字符，那就是来自ISO 639-223标准及其扩展的语言代码；
• 字母i，该语言标记是在IANA显式注册的；
• 字母x，该语言标记是私有的、非标准的，或扩展的子标记。
附录G中总结了ISO 639和639-2中的名字。表16-5中给出了一些示例。
表16-5 ISO 639和ISO 639-2中的语言代码示例
语 言 ISO 639 ISO 639-2
阿拉伯语 ar ara
汉语 zh chi/zho
荷兰语 nl dut/nla
英语 en eng
法语 fr fra/fre
德语 de deu/ger
现代希腊语 el ell/gre
希伯来语 he heb
意大利语 it ita
日语 ja jpn
韩语 ko kor
挪威语 no nor
俄语 ru rus
387 西班牙语 es esl/spa
瑞典语 sv sve/swe
土耳其语 tr tur
16.4.8 第二个子标记——名字空间
第二个子标记通常是标准化的国家记号，选自ISO 3166中的国家代码和地区标准集
合。不过也可以是在IANA注册过的其他字符串。下面是各种规则。
如果第二个子标记含有：
• 2个字符，那就是ISO 316624中定义的国家/地区；
注23： 参见ISO 639-2，“Codes for the representation of names of languages—Part 2: Alpha-3 code”（表示语言
名字的代码——第2部分：Alpha-3代码）。
注24： 国家代码AA、QM-QZ、XA-XZ以及ZZ是在ISO 3166中保留的作为用户分配的代码。一定不能用
这些值来构造语言标记。
406 ｜ 第16章
• 3~8个字符，可能是在IANA中注册的值；
• 单个字符，这是非法的情况。
表16-6中列出了ISO 3166中的部分国家代码。附录G中列出了完整的国家代码。
表16-6 ISO 3166中的国家代码示例
国 家 代 码
巴西 BR
加拿大 CA
中国 CN
法国 FR
德国 DE
梵蒂冈 VA
印度 IN
意大利 IT
日本 JP
黎巴嫩 LB
墨西哥 MX
巴基斯坦 PK
俄罗斯联邦 RU
英国 GB
美国 US 388
16.4.9 其余子标记——名字空间
除了最长可以到8个字符（字母和数字）之外，第三个和其后的子标记没有特殊规则。
16.4.10 配置和语言有关的首选项
可以在浏览器的配置文件中配置和语言有关的首选项。
网景公司的Navigator的设置方法是：编辑→首选项→语言，而微软公司的Internet
Explorer浏览器的设置方法是：工具→Internet选项→语言。
16.4.11 语言标记参考表
为便于使用，附录G中给出了语言标记的参考表。
• 表G-1列出了在IANA注册的语言标记。
• 表G-2列出了ISO 639中的语言代码。
• 表G-3列出了ISO 3166中的国家代码。
国际化 ｜ 407
16.5 国际化的URI
直到今天，URI还没有为国际化提供足够的支持。除了少数（定义得很糟的）例外，
URI如今还是由US-ASCII字符的一个子集组成的。人们正在努力使主机名和URL
的路径中能包含更丰富的集合中的字符，但直到现在，这些标准还没有被广泛接受
和部署。现在让我们来回顾一下当前的一些尝试。
16.5.1 全球性的可转抄能力与有意义的字符的较量
URI的设计者们希望世界上每个人都能通过电子邮件、电话、公告板，甚至无线电
来共享URI。他们还希望URI容易使用和记忆，但这两个目标是相互冲突的。
为了让世界各地的人们都能够便捷地输入、操控，以及共享URI，设计者们为URI
选择了常用字符的一个很有限的子集（基本的拉丁字母表中的字母、数字以及少数
特殊符号）。世界上绝大多数软件和键盘都支持这个小的字符集合。
但不幸的是，限制了字符集的话，URI就无法被全球的人们方便地使用和记忆。世
389 界上有很大一部分人甚至都不认识拉丁字母，他们几乎无法把URI当作抽象模式来
记忆。
URI的设计者们觉得确保资源标识符的可转抄能力（transcribability）和共享能力比
让它们由最有意义的字符组成更加重要，因此（如今的）URI基本上是由ASCII字
符的受限子集构成的。
16.5.2 URI字符集合
URI中允许出现的US-ASCII字符的子集，可以被分成保留、未保留以及转义字符
这几类。未保留的字符可用于URI允许其出现的任何部分。保留的字符在很多URI
中都有特殊的含义，因此一般来说不能使用它们。表16-7中列出了全部未保留、保
留，以及转义字符。
表16-7 URI字符语法
字符类别 字符列表
未保留 [A-Za-z0-9] | "-" | "_" | "." | "!" | "~" | "*" | " ' " | "(" | ")"
保留 ";" | "/" | "?" | ":" | "@" | "&" | "=" | "" | "$" | ","
转义 "%"  
408 ｜ 第16章
16.5.3 转义和反转义
URI转义提供了一种安全的方式，可以在URI内部插入保留字符以及原本不支持的
字符（比如各种空白）。每个转义是一组3字符序列，由百分号（%）后面跟上两个
十六进制数字的字符。这两个十六进制数字就表示一个US-ASCII字符的代码。
例如，要在URL中插入一个空白（ASCII 32），可以用转义%20，因为20是32的
十六进制表示。类似地，如果想插入一个百分号并且不想让它被当作转义，就可以
输入%25，25是百分号的ASCII代码的十六进制值。
图16-10展示了URI中的概念性字符是如何转换为当前字符集中字符的代码字节
的。需要处理URI时，转义会被反转义回来，产生它们代表的ASCII代码的字节。
概念性的字符 编码后的URI字节 反转义之后的ASCII代码字节
... ...
o=111 111
JJooee’’ss m i= =1 10 09 1 10 09
aatt / = 4 7 4 7
SSaallee
BBiigg b = 9 8 9 8
5 5
g=103 103
http://www.joes-hardware.com/big%20sale.txt %=37
2=50 32
0=48
s=115 115
... ...
外部形式 输入和发送的内容 处理的内容
（电子邮件、网页、公告板、无线电） （用当前字符集） （用US-ASCII字符集）