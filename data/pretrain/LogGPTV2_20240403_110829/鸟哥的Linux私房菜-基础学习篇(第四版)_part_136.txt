将 /etc/passwd 的 shell 字段写成 /sbin/nologin ，即可让该帐号暂时无法登陆主机；
将 /etc/shadow 内的密码字段，增加一个 * 号在最前面，这样该帐号亦无法登陆！
将 /etc/shadow 的第八个字段关于帐号取消日期的那个，设置小于目前日期的数字，那么他就无法登陆系统了！
我在使用 useradd 的时候，新增的帐号里面的 UID, GID 还有其他相关的密码控制，都是在哪几个文件里面设置的？
在 /etc/login.defs 还有 /etc/default/useradd 里面规定好的！
我希望我在设置每个帐号的时候（ 使用 useradd ），默认情况中，他们的主文件夹就含有一个名称为 www 的子目录，我应该怎么作比
较好？
由于使用 useradd 的时候，会自动以 /etc/skel 做为默认的主文件夹，所以，我可以在 /etc/skel 里面新增加一个名称为 www 的目录即可！
简单说明系统帐号与一般使用者帐号的差别？
一般而言，为了让系统能够顺利以较小的权限运行，系统会有很多帐号， 例如 mail, bin, adm 等等。而为了确保这些帐号能够在系统上面具有独一无二
的权限， 一般来说 Linux 都会保留一些 UID 给系统使用。在 CentOS 5.x 上面，小于 500 以下的帐号 （UID） 即是所谓的 System account。
简单说明，为何 CentOS 创建使用者时，他会主动的帮使用者创建一个群组，而不是使用 /etc/default/useradd 的设置？
不同的 linux distributions 对于使用者 group 的创建机制并不相同。主要的机制分为：
Public group schemes: 使用者将会直接给予一个系统指定的群组，一般来说即是 users ， 可以 SuSE Server 9 为代表；
Private group schemes: 系统会创建一个与帐号一样的群组名称！以 CentOS 7.x 为例！
如何创建一个使用者名称 alex, 他所属群组为 alexgroup, 预计使用 csh, 他的全名为 "Alex Tsai"， 且他还得要加入 users 群组当中！
groupadd alexgroup
useradd -c "Alex Tsai" -g alexgroup -G users -m alex
务必先创建群组，才能够创建使用者喔！
由于种种因素，导致你的使用者主文件夹以后都需要被放置到 /account 这个目录下。 请问，我该如何作，可以让使用 useradd 时，默认
的主文件夹就指向 /account ？
最简单的方法，编辑 /etc/default/useradd ，将里头的 HOME=/home 改成 HOME=/account 即可。
我想要让 dmtsai 这个使用者，加入 vbird1, vbird2, vbird3 这三个群组，且不影响 dmtsai 原本已经支持的次要群组时，该如何动作？
usermod -a -G vbird1,vbird2,vbird3 dmtsai
[1]最完整与详细的密码档说明，可参考各 distribution 内部的 man page。 本文中以 CentOS 7.x 的“ man 5 passwd ”及“ man 5 shadow ”的
内容说明；
[2]MD5, DES, SHA 均为加密的机制，详细的解释可参考维基百科的说明：
MD5：http://zh.wikipedia.org/wiki/MD5
DES：http://en.wikipedia.org/wiki/Data_Encryption_Standard
SHA家族：https://en.wikipedia.org/wiki/Secure_Hash_Algorithm
在早期的 Linux 版本中，主要使用 MD5 加密演算法，近期则使用 SHA512 作为默认演算法。
[3]telnet 与 ssh 都是可以由远端用户主机连线到 Linux 服务器的一种机制！详细数据可查询鸟站文章： 远端连线服务
器：http://linux.vbird.org/linux_server/0310telnetssh.php
[4]详细的说明请参考 man sudo ，然后以 5 作为关键字搜寻看看即可了解。
[5]详细的 PAM 说明可以参考如下链接：
维基百科：http://en.wikipedia.org/wiki/Pluggable_Authentication_Modules
Linux-PAM网页： http://www.kernel.org/pub/linux/libs/pam/
2002/05/15：第一次完成
2003/02/10：重新编排与加入 FAQ
2005/08/25：加入一个大量创建帐号的实例，简单说明一下而已！
2005/08/29：将原本的旧文放置到 此处
2005/08/31：因为 userconf 已经不再这么好用了，使用指令模式比较简单，所以，将他拿掉了～
2005/09/05：终于将大量创建帐号的那支程序写完了～真是高兴啊！
2006/03/02：更新使用者 UID 号码，由 65535 升级到 2^32-1 这么大！
2007/04/15：原本写的 /etc/pam.d/limits.conf 错了！应该是 /etc/security/limits.conf 才对！
2008/04/28：sudo 关于密码重新输入的部分写错了！已经更新，在这里查阅看看。感谢网友 superpmo 的告知！
2009/02/18：将基于 FC4 版本的旧文章移动到 此处。
2009/02/26：加入 chage 以及“ chage -d 0 帐号”的功能！
2009/02/27：加入 acl 的控制项目！
2009/03/04：加入一个简单的帐号新增范例，以及修改原本的帐号新增范例！
2009/04/28：取消 sudo 内的 -c 选项功能说明！之前说的是错的～
2009/09/09：加入一些仿真题，修改一些语词的用法。
2010/04/27：情境仿真第三步骤的程序脚本错了！原本是：“useradd -G youcan -s -m $username”！感谢 linux_task 兄的说明呢！
2015/07/17：将旧的基于 CentOS 5 的版本备份到这里。
2015/07/27：忘记加入 authconfig-tui 的说明！今日补上！
第第第第十十十十四四四四章章章章、、、、磁磁磁磁盘盘盘盘配配配配额额额额（（（（QQuuoottaa））））与与与与进进进进阶阶阶阶文文文文件件件件系系系系统统统统管管管管理理理理
最近更新日期：2015/07/28
夦杀恌瘨 Linux 昵剅嘌暭垦Ð 瓌懛缴巜嫼卺拦挒斚，ã 个缵扈㤽暭伣瓌义苏砐发孝酳瘨傧帗伣瓌，硥发郱顁 （Quota） 寕旓 頝霂巜暭瓌瘨嶉儛！厊墺，夦杀
伄瘨瓌懛巜巜払忌硥发孝酳² 壃瓌，遇û 旸轿窥瘨攫亚粟纃寕弻褥嬊丄嬊丄。 曐窄憵亐亡乯繱硥发闙冻 （RAID） 卮迟輵匛輘攫亚粟纃 （LVM），载丿嶉儛邡厓争峦前伄
筅玪³ 缵扈伣瓌义厓瓌瘨硥发孝酳念！
Quota 这个玩意儿就字面上的意思来看，就是有多少“限额”的意思啦！如果是用在零用钱上面， 就是类似“有多少零用钱一个月”的意思
之类的。如果是在计算机主机的磁盘使用量上呢？以 Linux 来说，就是有多少容量限制的意思啰。我们可以使用 quota 来让磁盘的容量使用较
为公平， 下面我们会介绍什么是 quota ，然后以一个完整的范例来介绍 quota 的实作喔！
在 Linux 系统中，由于是多用户多任务的环境，所以会有多人共同使用一个硬盘空间的情况发生， 如果其中有少数几个使用者大量的占
掉了硬盘空间的话，那势必压缩其他使用者的使用权力！ 因此管理员应该适当的限制硬盘的容量给使用者，以妥善的分配系统资源！避免有人
抗议呀！
举例来说，我们使用者的默认主文件夹都是在 /home 下面，如果 /home 是个独立的 partition ， 假设这个分区有 10G 好了，而 /home 下
面共有 30 个帐号，也就是说，每个使用者平均应该会有 333MB 的空间才对。 偏偏有个使用者在他的主文件夹下面塞了好多只影片，占掉了
8GB 的空间，想想看，是否造成其他正常使用者的不便呢？ 如果想要让磁盘的容量公平的分配，这个时候就得要靠 quota 的帮忙啰！
Quota 的的一一般般用用途途 [1]
quota 比较常使用的几个情况是：
针对 WWW server ，例如：每个人的网页空间的容量限制！
针对 mail server，例如：每个人的邮件空间限制。
针对 file server，例如：每个人最大的可用网络硬盘空间 （教学环境中最常见！）
上头讲的是针对网络服务的设计，如果是针对 Linux 系统主机上面的设置那么使用的方向有下面这一些：
限制某一群组所能使用的最大磁盘配额 （使用群组限制）：
你可以将你的主机上的使用者分门别类，有点像是目前很流行的付费与免付费会员制的情况， 你比较喜好的那一群的使用配额就可以给
高一些！呵呵！ ^_^...
限制某一使用者的最大磁盘配额 （使用使用者限制）：
在限制了群组之后，你也可以再继续针对个人来进行限制，使得同一群组之下还可以有更公平的分配！
限制某一目录 （directory, project） 的最大磁盘配额：
在旧版的 CentOS 当中，使用的默认文件系统为 EXT 家族，这种文件系统的磁盘配额主要是针对整个文件系统来处理，所以大多针对“挂
载点”进行设计。 新的 xfs 可以使用 project 这种模式，就能够针对个别的目录 （非文件系统喔） 来设计磁盘配额耶！超棒的！
大概有这些实际的用途啦！基本上，quota 就是在回报管理员磁盘使用率以及让管理员管理磁盘使用情况的一个工具就是了！ 比较特别
的是，XFS 的 quota 是整合到文件系统内，并不是其他外挂的程序来管理的，因此，通过 quota 来直接回报磁盘使用率，要比 unix 工具来的快
速！ 举例来说， du 这东西会重新计算目录下的磁盘使用率，但 xfs 可以通过 xfs_quota 来直接回报各目录使用率，速度上是快非常多！
Quota 的的使使用用限限制制
虽然 quota 很好用，但是使用上还是有些限制要先了解的：
在 EXT 文件系统家族仅能针对整个 filesystem：
EXT 文件系统家族在进行 quota 限制的时候，它仅能针对整个文件系统来进行设计，无法针对某个单一的目录来设计它的磁盘配额。 因
此，如果你想要使用不同的文件系统进行 quota 时，请先搞清楚该文件系统支持的情况喔！因为 XFS 已经可以使用 project 模式来设计
不同目录的磁盘配额。
核心必须支持 quota ：
Linux 核心必须有支持 quota 这个功能才行：如果你是使用 CentOS 7.x 的默认核心， 嘿嘿！那恭喜你了，你的系统已经默认有支持
quota 这个功能啰！如果你是自行编译核心的， 那么请特别留意你是否已经“真的”打开了 quota 这个功能？否则下面的功夫将全部都视
为“白工”。
只对一般身份使用者有效：
这就有趣了！并不是所有在 Linux 上面的帐号都可以设置 quota 呢，例如 root 就不能设置 quota ， 因为整个系统所有的数据几乎都是他
的啊！ ^_^
若启用 SELinux，非所有目录均可设置 quota ：
新版的 CentOS 默认都有启用 SELinux 这个核心功能，该功能会加强某些细部的权限控制！由于担心管理员不小心设置错误，因此默认
的情况下， quota 似乎仅能针对 /home 进行设置而已～因此，如果你要针对其他不同的目录进行设置，请参考到后续章节查阅解开
SELinux 限制的方法喔！ 这就不是 quota 的问题了...
新版的 CentOS 使用的 xfs 确实比较有趣！不但无须额外的 quota 纪录档，也能够针对文件系统内的不同目录进行配置！相当有趣！ 只
是不同的文件系统在 quota 的处理情况上不太相同，因此这里要特别强调，进行 quota 前，先确认你的文件系统吧！
Quota 的的规规范范设设置置项项目目：：
quota 这玩意儿针对 XFS filesystem 的限制项目主要分为下面几个部分：
分别针对使用者、群组或个别目录 （user, group & project）：
XFS 文件系统的 quota 限制中，主要是针对群组、个人或单独的目录进行磁盘使用率的限制！
容量限制或文件数量限制 （block 或 inode）：
我们在第七章谈到文件系统中，说到文件系统主要规划为存放属性的 inode 与实际文件数据的 block 区块，Quota 既然是管理文件
系统，所以当然也可以管理 inode 或 block 啰！ 这两个管理的功能为：
限制 inode 用量：可以管理使用者可以创建的“文件数量”；
限制 block 用量：管理使用者磁盘容量的限制，较常见为这种方式。
柔性劝导与硬性规定 （soft/hard）：
既然是规范，当然就有限制值。不管是 inode/block ，限制值都有两个，分别是 soft 与 hard。 通常 hard 限制值要比 soft 还要高。
举例来说，若限制项目为 block ，可以限制 hard 为 500MBytes 而 soft 为 400MBytes。这两个限值的意义为：
hard：表示使用者的用量绝对不会超过这个限制值，以上面的设置为例， 使用者所能使用的磁盘容量绝对不会超过 500MBytes ，若
超过这个值则系统会锁住该用户的磁盘使用权；
soft：表示使用者在低于 soft 限值时 （此例中为 400MBytes），可以正常使用磁盘，但若超过 soft 且低于 hard 的限值 （介于
400~500MBytes 之间时），每次使用者登陆系统时，系统会主动发出磁盘即将爆满的警告讯息， 且会给予一个宽限时间 （grace
time）。不过，若使用者在宽限时间倒数期间就将容量再次降低于 soft 限值之下， 则宽限时间会停止。
会倒数计时的宽限时间 （grace time）：
刚刚上面就谈到宽限时间了！这个宽限时间只有在使用者的磁盘用量介于 soft 到 hard 之间时，才会出现且会倒数的一个咚咚！
由于达到 hard 限值时，使用者的磁盘使用权可能会被锁住。为了担心使用者没有注意到这个磁盘配额的问题， 因此设计了 soft 。当你
的磁盘用量即将到达 hard 且超过 soft 时，系统会给予警告，但也会给一段时间让使用者自行管理磁盘。 一般默认的宽限时间为七天，
如果七天内你都不进行任何磁盘管理，那么 soft 限制值会即刻取代 hard 限值来作为 quota 的限制。
以上面设置的例子来说，假设你的容量高达 450MBytes 了，那七天的宽限时间就会开始倒数， 若七天内你都不进行任何删除文
件的动作来替你的磁盘用量瘦身， 那么七天后你的磁盘最大用量将变成 400MBytes （那个 soft 的限制值），此时你的磁盘使用权就会
被锁住而无法新增文件了。