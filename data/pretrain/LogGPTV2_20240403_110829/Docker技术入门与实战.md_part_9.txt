当然，如何编写一个高质量的Dockerfile并不是一件容易的事情，DockerHub和
另外，可以通过.dockerignore文件（每一行添加一条匹配模式）来让Docker忽略
$ sudo dockerbuild -tbuild_repo/first_image /tmp/docker_builder/
基本的格式为dockerbuild[选项］路径，该命令将读取指定路径下（包括子目录）
本章主要介绍围绕Dockerfle配置文件的重要概念，包括基本结构、所支持的内部指
例如，指定Dockerile所在路径为/tmp/docker_builder/，并且希望生成镜像标
要指定镜像的标签信息，
编写完成Dockerfle之后，
本章小结
创建镜像
，可以通过-七选项。
，可以通过dockerbuild命令来创建镜像。
第8章
使用Dockerfile创建镜像
---
## Page 69
■
■
实战案例
目
第二部分Pat
第17章
第16章
第
第
第12
第11章
第10章
第9章操作系统
14
13
真
真
章
章
真
Docker实践之道
在公有云上使用Docker
Web服务器与应用
创建支持SSH服务的镜像
构建Docker容器集群
使用私有仓库
编程语言
数据库应用
---
## Page 70
Docker.
行探讨。
的编程环境。
Java、PHP、Python、Perl、Ruby、JavaScript、Go等，以及如何用Docker来快速构建相应
的SQL和NoSQL数据库软件。
Weblogic、LAMP、CMS等流行的Web解决方案。
CentOS、Fedora，以及基于Docker的特色操作系统CoreOS。
在生产环境中进行应用。
56第二部分实战案例
通过第二部分的实战案例学习，读者可以在实际的工作、生产环境中更加高效地使用
编程开发也可以从Docker中获得方便。第13章将介绍流行的编程语言，包括C/C++、
第12章通过MySQL、Oracle XE和MongoDB等典型例子，展示在Docker 中运行常见
第9章介绍通过Docker来运行典型的操作系统环境，
最后，结合Docker，对个人学习、技术创业以及企业的生产实践中的常见需求和问题进
第14章具体介绍使用docker-registry创建和使用私有仓库的更多技术细节。
第11章介绍利用Docker来提供典型的Web服务，包括Apache、Nginx、Tomcat、
第10章介绍如何为一个镜像添加SSH服务的支持，以及探讨访问容器内部的合理方案。
在第二部分中，笔者将展示大量的Docker应用案例，更加深人地展示Docker技术如何
接下来，会以国内的阿里云为例，讲解在公有云平台部署Docker的过程和一些特色服务。
第15章探讨利用Docker创建容器集群要解决的核心问题和可行方案。
通过第一部分的学习，读者应该掌握了Docker的核心概念和常用操作。
实战是检验技术的唯一标准。
包括BusyBox、Debian/Ubuntu
---
## Page 71
使用官方镜像
工具，如 grep、find、mount 以及telnet。可以说，BusyBox是Linux系统的瑞士军刀。
如Linux（包括Android）、Hurd、FreeBSD等。
执行文件中提供了精简的Unix工具集。BusyBox可运行于多款POSIX环境的操作系统中，
9.1
CoreOs等操作系统。
所有的Linux服务器系统能实现的功能。
括各种虚拟化技术都难以实现的。虽然Docker的镜像一般都很精简，但是它几乎可以实现
决于读者的具体需求。同时，社区还推出了完全基于Docker的Linux发行版CoreOS。
BusyBox既包含了一些简单实用的工具，如 cat 和echo，也包含了一些更大、更复杂的
本章将介绍如何使用Docker安装和使用Busybox、Debian/Ubuntu、CentOS/Fedora、
BusyBox是一个集成了一百多个最常用Linux命令和工具的软件工具箱，它在单一的可
使用Docker，读者只需要一个命令就能得到Linux发行版的Docker镜像，这是以往包
$sudo docker search busybox
在DockerHub中搜索Busybox相关的镜像。
前者以自带软件包版本较新而出名；后者则宣称运行更稳定一些。选择哪个操作系统取
目前最常用的Linux发行版包括Ubuntu系列和CentOS系列。
Busybox
操作系统
1.
第9章
园
Chiapter9
---
## Page 72
运行Busybox
镜像十分精巧，
58第二部分实战案例
$ sudo docker run -it busybox
启动一个Busybox容器，并在容器中执行grep 命令。
/#grep
$ sudo docker images
如果不指定标签信息，
busybox
REPOSITORY
Status:Downloaded
df7546f9f060:Pul1
511136ea3c5a:
e72ac664f4f0:Pull
e433a6c5b276:Pu11
busybox:latest: The image you are pulling has been verified
$sudodocker pull busybox
下面使用dockerpull命令下载这个镜像：
读者可以看到最受欢迎的镜像同时带有offcel标记，说明它是官方镜像。
papa99do/busybox
jpetazzo/busybox
jbeda/busybox
opensvc/busybox
dlacewell/busybox
alars/busybox-go-webapp
microcloud/busybox-fs
flynn/busybox
abashek/busybox
yungsang/busybox
marcuslinke/busybox
radial/busyboxplus
onsi/grace-busybox
peer60/newrelic-sysmond
skomma/busybox-data
virtuald/nsq
centurylink/ngrok
maxexcloo/data
lgsd/diamond
progrium/busybox
busybox
NAME
只有2.433MB。
Pull
latest
TAG
newer image for busybox:latest
Busybox base image.
complete
complete
complete
Automated build for NsQ usingbusybox+of...
Diamond is the smallest lightweight Docker..
DESCRIPTION
，则Docker会下载最新版本的Busybox镜像，可以看到Busybox
complete
Derived from
version of busybox with netcat installed.
A Docker image for ngrok,introspected tun..
Docker base imagewith/data defined as a.
Full-chain,Internet enabled,busybox made..
Docker image suitable for data volume cont...1
Busybox from Ubuntu 13.10 with libc
Me privat busybox
https://github.com/jpetazzo/docker-busybox
NewRelic monitoring in a docker image.Bas...1
e72ac664f4f0
IMAGEI
busybox,
STARS
with an infitine loo..
CREATED
OFFICIAL
AUTOMATED
2.433MB
VIRTUAL SIZE
2
83
2
9
#
[OK]
[OK]
[OK]
[OK]
[OK]
[OK]
[OK]
[OK]
[OK]
---
## Page 73
proc on /proc/sysrq-trigger type proc (ro,nosuid,nodev,noexec,relatime)
proc on /proc/sys type proc （ro,nosuid,nodev,noexec,relatime)
mode=620,ptmxmode=000)
devpts on /dev/console type devpts (rw,nosuid, noexec,relatime, gid=5
(rw,relatime,errors=remount-ro,data=ordered)
/dev/disk/by-uuid/b1f2dba7-d91b-4165-a377-bfla8bed3f61 on /etc/hosts type ext4
ext4(rw,relatime,errors=remount-ro,data=ordered)
ext4 (rw, relatime, errors=remount-ro, data=ordered)
sysfs on /sys type sysfs (ro,nosuid,nodev,noexec,
ptmxmode=666)
devpts on /dev/pts type devpts (rw, nosuid, noexec, relatime, gid=5,mode=620,
shm on /dev/shm type tmpfs (rw,nosuid,nodev,noexec,relatime,size=65536k)
tmpfs on /dev type
none on/type aufs （rw,relatime,si=b455817946f8505c)
/#mount
查看容器内的挂载信息。
Search for PATTERN in FILEs （or stdin)
[FILE]..
Usage:grep [-HhnlLoqvsriwFE][-m N][-A/B/C N] PATTERN/-e PATTERN.../-f FILE
/type rootfs
mAB
E日
PTRN Pattern to match
Z
Z
Same as'-AN
Print N lines
Print N lines
PATTERN is an extended regexp
PATTERN is a literal (not regexp)
Match wholelinesonly
Matchwhole
Ignore case
Suppress open and read errors
Quiet.
Showonlynamesof filesthat
Do not addfilename:
lecurse
nowonly
（rw)
Return
count
words
leading context
of
only
files that
prefix
noexec,relatime)
ofline
lines
don'tmatch
match
relatime)
1otherwise
第9章操作系统59
uduyeidal
---
## Page 74
镜像。
搜索Ubuntu
搜索Debian
都可以直接搜索到官方版本。
9.2
60第二部分实战案例
Ubuntu相关的镜像有很多，
$ sudo docker search -s 10 ubuntu
Debian和 Ubuntu都是目前较为流行的Debian系的服务器操作系统，在Docker Hub上
tutum/ubuntu
clue/ttrss
ansible/ubuntu14.04-ansibleUbuntu 14.04 LTS with ansible
mbentley/ubuntu-django-uwsgi-nginx
ubuntu-upstart
crashsystems/gitlab-docker
dockerfile/ubuntu
ubuntu
NAME
eboraas/apache
maxexcloo/java
eddelbuettel/docker-debian-r
hanswesterbeek/google-debian-oracle-jdk Oracle's JDK installed on top of
yesnault/docker-phabricator
toke/owncloud7
eboraas/apache-php PHP5 on Apache (with SSL support),built o..
tianon/debian
google/debian
NAME
$sudo docker search debian
Busybox镜像虽然小巧，但提供了常见的Linux命令，读者可以用它快速熟悉Linux命令。
tmpfs on /proc/kcore type tmpfs (rw,nosuid,mode=755)
Google's
Debian/Ubuntu
Official Ubuntu base
DESCRIPTION
(Semi)Official Debian base image.
DESCRIPTION
Upstart is an event-based replacement,for 
Apache(with SSL support),built on Debian
Docker framework container with theOracle...
Basic image with Owncloud 7from debian pa.
use"debian"instead-https://index.docke..
STARS
，因此这里使用“-s”参数，
A trusted,regularly updated build of GitL...
image
Debian Jessie/Apache2/Mysql/Phabric..
STARS
OFFICIAL
OFFICIAL
AUTOMATED
只搜索那些被收藏10次以上的
AUTOMATED
S
199
15
840
5[OK]
[OK]
[OK]
[OK]
[OK]
[OK]
[OK]
[OK]
[OK]
[OK]
[OK]
[OK]
[OK]
[OK]
[OK]
OK
---
## Page 75
将默认的软件源改为国内的源：
getupdate命令来更新一次，读者也可以自已编辑/etc/apt/sources.list文件
curl。因为，Docker镜像为了精简镜像容量，默认删除了这些信息，需要我们使用apt-
验一番吧！
root@7d93de07bf76:/#curl
The following extra packages will be installed:
Building dependency tree
更新完之后就可以安装软件了：
E:Unable to locate package curl
Reading state information..
Building dependency tree
root@7d93de07bf76:/# apt-get insta11 curl
Reading state information..
Reading package lists... Done
root@7d93de07bf76:/#apt-get instal1 curl
Get:1 http://archive.ubuntu.com trusty Release.gpg [933 B]
root@7d93de07bf76:/#apt-getupdate
当我们试图安装一个cur1软件的时候，
Codename:
Description:
Distributor ID:Ubuntu
No LSB modules are available.
$sudo docker run -ti ubuntu:14.04/bin/bash
使用-ti参数进人，查看Ubuntu的版本号：
下面就以Ubuntu 14.04为例，让我们进去一个Docker版的Ubuntu:14.04操作系统来体
根据搜索出来的结果，用户可以自行选择下载镜像并使用。