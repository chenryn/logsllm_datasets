---
## Page 76
在这种情况下这些法则就与2.2.3节中的完全一样了。
当 αP=αQ，则有
L2 (PIQ)/s=(P/(s ↑aP))(Q/(s aQ))
算子/s对并行组合有分配律，即
件如不在αP中就一定在αQ中。由此，我们有L1
一个迹。同理可证(t“aQ)也是Q的一个迹。另外，中每个事
样(t“αP)就是有P参加的所有事件组成的迹，因而也就是P的
生存期内发生的事件；不属于αP的事件发生时，不需P参加。这
2.3.3迹
我们可类似地推断
因此 t1E traces(NOISYVMgCUST)
且 tl faCUST =
则t1 ↑aNOISYVM=
假设tl=
X1泰看2.3节X1。
else if ismember(x,B)then aux(P,Q(x))
else if ismember(x, A)then aux(P(x),Q)
alse if ismember(x,A) Aismember(x, B)then aux(P(x),
假设(PIQ)的迹为。则t中属于αP的每个事件都是在P的
举例
αux(P,Q) =
traces(PIQ)={tl(t ↑aP)∈traces(P)
sαP=s↑αQ=s
A(t ↑aQ)∈ traces(Q)At∈(aPUaQ)*)
else"BLEEP
属于traces(CUST)
属于traces(NOISYV M)
Q(x))
---
## Page 77
其它线段连接（图2.3）。也可以再添加进程R，aR={e,e}，进程
由这个方框再引出儿条线段，每条线段都用字母表中不同事件标
(PIQ)的含义就与交互作用的含义完全相同了(2.2节）。
αP=aQ，迹中的每个事件都同时属于P和Q的字母表，此时
明（图2,1)。类似地，字母表为{b，c,d)的进程Q如图2.2所示。
是纯穿插（1.9.3节)，例如2.3节中X2。另一种极端的情形，即
字母表中共有的事件只发生一次。如果αP∩αQ={}则P和Q的迹
时发生，只不过我们已决定不提供记录两个事件同时发生的方法
13B
L3A
罢了。
这就说明curse和clink的记录顺序可以不同。它们有可能还会同
标记的事件只属于其中一个进程的字母表，则这条线段不与任何
就象是个网络，具有相同标记的线段连接在一起，但是如果线段上
54
总之，（PIQ)的迹是P和Q的迹的某种穿插，穿插时P和Q
我们用一个标有P的方框来表示字母表为{α，b,c}的进程P，
当把这两个进程连到一起并行运行时，所得的系统的示意图
如果aPaQ={}
如果αP=αQ
traces(PQ) = {s| 3t:traces(P). 3u:traces(Q).
(coin,curse ,clink>E traces(NOISYVM|CUST)
traces(P|Q)= traces(P)∩traces(Q)
图2.1
2.4
s interleaves(t,u)}
示意图
图2.2
d
门
---
## Page 78
三个数乘积（3×4×5)构成；但-构成后，它也只是一个数，和
统也还是一个进程，因此应当画成一个方框（如图2.5)。60可由
意图被称做为连接框图。
参加，其它的事件如α、d、e就只与单个进程有关了。这类的示
要P、Q、R三个进程同时参加，
R加到示意图上去，形成图2.4。在这个框图里，事件o的发生需
但这些示意图可能会引起误解。出这三个进程构成的··个系
2.5
(PlQIR)
事件b需要P、
2.4
2.3
Q两个进程同时
Ia
55
---
## Page 79
座缅号。
这里是模数为5的加法，因此1就是第i位哲学家右侧的邻
出事件的有关集合。对PHIL，集合定义为
2.5.1字母表
又有一位哲学家要用这把叉子，他只能等头一位哲学家用完了再
也拿起来不可。一且吃完了，他就放下两把叉子，站起来回到他
嘴里，必须用第二把叉子。所以这位哲学家非得把他右边的叉子
一顿细条通心面。可事情并不这么简单，要把缠结的通心面送到
饿了，他就去餐厅，坐在他的椅子上，拿起放在左边的叉子，吃
围坐在桌旁。
PHIL，PHIL，PHIL，PHILa，PHIL，并且以道时针次序
把椅子，每把椅子上都标有一位哲学家的名字。他们的名字是
以在里面专心思考；但是餐厅是公共的，里面摆了一-张圆桌，五
为五位杰山的哲学家提供食宿。每个哲学家都有一个房间，他可
到它的构成方式了。
它的构成方式就不再有什么关系了，甚至也不可能从它本身观察
说。
房间里继续思考去。当然，一把叉子一次只能由一个人用。如果
着--个大碗，
αPHIL= fi,sits down,i.gets up,
哲学家本来就是要把他的主要时间用于思考的；但如果觉得
现在我们把这个系统做成了一个数学模型。首先我们必须选
古时候，一位非常富有的慈善家山钱资助一所学院，让学院
里面盛着细条通心面，而且随时地有人添加着。
，在每位哲学家的左侧放者一把金叉，桌子正中间摆
i,puts down fork.i,i.puts down fork.(i①1)}
i.picks up fork.i,i.picks up fork.(i1),
2.5
举例：哲学家就餐问题
---
## Page 80
2.6所示。
要两个密切相关的演员参加，一位哲学家和一把双子，如连接图
这里表示模数为5的减法。
叉子另一边的主人的邻居使用。
子上贴的号与它主人的号相同。
行为的客观反映。
何事件，所以就不相互作用或通信一一这是那个时代哲学家们的
3.gets up
5.tis down
aFORK;={i.picks up fork.i,(iO1).picks up fork.i,
在我们这个小剧月里的其它演员就是那五把叉子了，每把叉
fork.4
3.putr down
这样，除了坐下和站起来的事件之外，其它的每个事件都需
汪意每个哲学家的字母表是相互独立的，他们不在-块做任
4.sits down!
PHIL,
fork.3
3.puis dowa
i.puts down fork.i,(iOl).puts down fork.i)
FORX.
PHIL,
fork.3
dFORK,
2.purs down
14.geis#p
4.picksup
down fork.0
4.puta
fork,0
fork.3.
图2.6
FORK,
PHIL
，则第i把叉子的字母表为
一把叉子或由其主人使用，或由
O.sitls down
down fork.0
0.purs
fork.0
0.pickr up7
fork.1
FORK,!
PHIL-O
FORK,
0.geis up
PHIL, 1.gets u
0.puzs down.
7
fort.1
Fork.1
1.puts down
I-sis dowre
---
## Page 81
起放在旁边的那把叉子，但是要想坐下或站起来，·必须两只手帮
放下他们的叉子，即分别看哲学家每只手的行为。每只手都能拿
所以整个学院的行为就是各个组成部分的行为的并发组合
地拿起来或放下（两个动作都由同一-个人做)，即
是六个事件为--个周期，不断重复，即
2.5.2行为
忙。这样就有
PHIL;= (i,sits down-→i.picks up fork.i-→
aRIGHT,={i.picks up fork.(i①1),
aLEFT;={i.picks up fork.i, i.puts.down fork.i,
除了我们有意忽略的思考和吃饭两作事外，哲学家的生活就
RIGHT;=(i.sits doun-→i.picks up fork.(i①1)→
我们这个故事稍加有趣变动，允许哲学家以任意次序拿起或
双子扮演的角色很简单；它就是被坐在它旁边的哲学家重复
LEFT;=(i.sits down→i.picks up fork.i-
COLLEGE= (PHILOSIFORKS)
FORKS=(FORK,IFORK,IFORK,FORK,FORK)
PHILOS=(PHIL|PHIL,IPHIL,IPHILPHIL)
[(iO1).picks up fork.i→
i.puts down fork.(i1)→i.gets up→PHIL)
i.picks up fork.(iDl)-i.puts down fork.i
(iOi).puts down fork.iFORK;)
i.puts down fork.(iGl)-→i.gets up-
i,puts down fork.i→i.gets up→LEFT;)
RIGHT)
i.puts down fork.(i1),i.sits down,i.gets up}
i.sits down, i.gets up)
---
## Page 82
为用联立递归式定义就更简单些。
这位仆人得到秘密指示，最多只能让四个人同时吃饭。则他的行
椅了，他的字母表是
样的理山，也难决定再买一把专归某一位，而再买五把叉太贵了。
子时总是先拿右邻的—但很难使他们一致同意由谁这样做1同
了，他们总会提出解决办法的。譬如说，他们中的一位拿第一把叉
有能力做更多的动作，但他们中的任意两个都不能合作地往工做，
在了。在这种尴尬的情况下，他们必定要挨饿。尽管每个演员都
拿起属于他的那把叉子，然后去拿另一把一一这另一把叉子却不
这五位哲学家在大致同一时间里都饿了，他们都到餐厅里坐下来，
2.5.3死锁！
允许有一种重复的动作，例如
拿起来或放下去很多次。这样，
叉予的操作则是任意交义的。
证了只有当哲学家人座后，才能拿起叉子来。除此之外，对两把
坐下和站起来时需要LEFT；和RIGHT；的同步工作，这一点就保
最后采取的解决办法是找位男仆，他的职责就是为每个人挪
尽管如此，我们这个故事的结尾不会这么惨，同题一旦发现
数学模型建立起来了，但它揭示了一个严重的问题。如果说
LEFT;=(i.sits down->
我们把这个故事再变一变，
PHIL;=LEFT,IRIGHT;
μX.Ci.picks up fork.i→i.puts down fork.i→X
[i.gets up→LEFT;)).
，他两只手的行为就要有所改动，
当哲学家坐下后，他可以把叉子
59.
---
## Page 83
没有死锁问题的学院定义为
父仆人已帮助i位哲学家就座后的行为，则
我们知道有
其中U和D的定义如上。因为（由2.3.3节的L1)
我们定义入座的哲学家的人数为
件，以它延伸s后得到的序列仍在traces(NEWCOLLEGE)。
对全部8Etraces（NEWCOLLEGE）都成立。证明时先任取达
们必须要证的东西可形式地叙述为
NEWCOLLEGE中就没有死锁问题，还需认真地证明一番。我
2.5.4死锁不存在的证明
个进程的一个迹$，然后证明在任何情况下，至少能找到一个事
自 Carel S,Scholten。
编写这个故事的是Edsger W.Dijkatra。属一位仆人的主意则来
的哲学家还可以拿起他左边的叉子。如果已拿起四把，则坐在空
的个数。如果只有或还不足三把叉子被拿在手里，则有一位就座
放下他左手拿的叉子。如果没人在吃，就看看被拿在手里的叉子
的人都举着两把叉子)。如果有人正在吃，则正吃的一位总是可以
死锁。
如果seated（s)≤3，则至少还能再容-一个人入座，所以不会出现
8
在COLLEGE中死锁问题并远非明显，因此，如果说在
FOOT,=(y:U→F00T)
F00T,=(x:D→F00T,)
当seated（s）=4时，数一下正在吃的哲学家有几位（正吃
NEWCOLLEGE = (COLLEGE|FOOT。)
seated(s)=#(s↑D)-#(s ↑U)
(NEWCOLLEGEIS)≠STOP
s ↑(UU D)∈traces(FOOT)
seated(s)≤4
j∈[1,2,3}
---
## Page 84
的叉子。这个周期可能无限循环下去，这样就会有一位人座的哲
等了好久的那位右边的哲学家，他来不及拿到那把他们两人合用
上叉饿了，又跑回来，坐下，抓起两把叉子又饱餐一顿，只苦了
半天吃不完。好不容易吃完了放下两把叉子，离开座位。可是马
就闯了进来，坐下来，一下子就把他左右的两把叉子都拿起来了，