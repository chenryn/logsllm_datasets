o
t
n
e
c
r
e
P
0
0
10
20
100
s
h
t
a
p
d
e
l
i
a
f
f
o
t
n
e
c
r
e
P
80
60
40
20
0
0
20
Tree (analytical)
Tree (simulation)
Hypercube (analytical)
Hypercube (simulation)
XOR (analytical)
XOR (simulation)
60
80
70
90
30
40
50
Node failure probability (%)
Ring (analytical)
Ring (simulation)
40
60
Node failure probability (%)
80
(a)
(b)
Figure 6. Both plots show the percentage of failed paths (i.e. 1-routability) for varying node failure probability and system size
of N=216. (a) Analysis vs simulation: The simulation data points are reproduced from [2]. For all three routing geometries, the
analytical curves show a great ﬁt to the simulation curves. (b) Analysis vs simulation (ring): For the ring routing algorithm, the
discrepancy between the analytical and simulation curve is due to the algorithm’s property that suboptimal hops contribute non-
trivially to the routing process. In effect, the analytical curve provides an upper bound for percentage of failed paths. Note that the
analytical curve is very close to simulation in the region of practical interest (i.e. for failure probability less than 20%)
.
s
h
t
a
p
d
e
l
i
a
f
f
o
t
n
e
c
r
e
P
100
80
60
40
20
0
0
Unscalable
Scalable
20
40
60
Node failure probability (%)
100
)
%
(
y
t
i
l
i
t
b
a
u
o
R
80
60
40
20
0
Scalable
Unscalable
Hypercube
Chord
XOR
Tree
Symphony
105
System size
1010
Hypercube
Chord
XOR
Tree
Symphony
80
(a) System Size N=2100
(b) Failure Probability q=0.1
Figure 7. (a) Asymptotic limit: This ﬁgure plots the percentage of failed paths (i.e. 1-routability) for varying node failure probability in the
asymptotic limit. The curves are obtained by evaluating the analytical expressions at N=2100. Note that the curves for tree and symphony are very
close to a step function, which is consistent with our analysis. In addition, the curves for the other three geometries are very close to the case for
N=216. (b) Routability vs N: This plot shows the routability of the routing geometries for varying system size and a constant failure probability
(q=0.1). This ﬁgure clearly demonstrates the lack of scalability of the tree and Symphony routing geometries. As the system scales, the routability
of both the tree and Symphony routing systems monotonically degrades toward zero. In contrast, the other three geometries remain highly routable
in the face of failure even as the systems scale to billions of nodes. (In both plots, we set the number of near neighbors and the number of shortcuts
equal to one for Symphony.)
Proceedings of the 2006 International Conference on Dependable Systems and Networks (DSN’06) 
0-7695-2607-1/06 $20.00 © 2006 IEEE 
In addition, one can easily see by inspection that the n(h)
expression for the ring geometry is given by: n(h) = 2h−1.
4.3.4 Symphony
Theorem 1 allows us to conveniently convert our prob-
lem of determining the convergence of an inﬁnite product
to a simpler inﬁnite sum. Thus, p(h, q) is convergent if and
only if
Q(m) converges.
(cid:10)
A similar Markov chain model can be constructed for the
Symphony routing geometry. We will simply give the re-
sults due to space constraints (see [5] for detail derivation):
1−q (cid:8)(cid:1)
(cid:7) d
Qsym = qkn+ks
≈ qkn+ks(
(1 − ks
d
1 − (1 − ks
j=0
d
1 − (1 − ks
− qkn+ks)j
− qkn+ks) d
− qkn+ks)
d
1−q +1
The symbols kn and ks denote the number of near neigh-
bors and shortcuts respectively. The n(h) expression for
the Symphony routing algorithm is given by: n(h) = 2h−1.
5 Scalability of DHT Routing Protocols un-
der Random Failure
For a DHT routing system to be scalable, its routabil-
ity must converge to a non-zero value as the system size
goes to inﬁnity (Deﬁnition 2). Alternatively, we examine
the asymptotic behavior of p(h, q) with h set to the aver-
age routing distance in the system (i.e. h = O(log N) or
O(log2 N) for Symphony). Using Eq. 3, it is simple to
show that the equivalent condition for scalability is as fol-
lows:
h→∞ p(h, q) > 0 for 0  0
lim
(10)
h(cid:6)
For hypercube routing, p(h, q) is given by p(h, q) =
(1 − qm) (Eq. 2). By invoking Theorem 1, it is triv-
qm converges for 0 < q < 1 − pc. Thus,
m=1
ial to see that
the hypercube routing geometry is scalable.
(cid:10)
5.3 XOR
In XOR routing, the Q(m) expression given by Eq. 6.
It is simple to show that the Q(m) series involves only qm
Q(m) is convergent and the XOR
and mqm terms. Thus,
routing scheme is scalable.
(cid:10)
5.4 Ring
We will demonstrate that the ring routing geometry is
also scalable by showing that the XOR results derived above
is a lower bound for the ring geometry. If one constructs
the Markov chain model for the ring geometry and com-
pares the constructed model with the model for the XOR
geometry (Fig. 5(b)), one will note that the transition prob-
abilities for the suboptimal hops in ring are strictly greater
than the corresponding probabilities for XOR. For exam-
ple, in ring routing, note that the transition probabilities for
S0 → (0, 1), (0, 1) → (0, 2) and so forth are given by
q(1−qh−1). These probabilities are strictly greater than the
corresponding transition probabilities in Fig. 5(b). Thus, by
comparing these two Markov chain models, it is simple to
show that the p(h, q) expression for the ring routing geom-
etry is strictly greater than the p(h, q) expression for XOR
routing. Thus, the ring routing geometry is also scalable.
5.5 Symphony
(cid:10)
In Symphony routing, the Q(m) expression given by
Eq. 7. Note that the Q(m) expression is given by a constant
Q(m) is divergent and the Symphony
term. Therefore,
routing scheme is unscalable.
Proceedings of the 2006 International Conference on Dependable Systems and Networks (DSN’06) 
0-7695-2607-1/06 $20.00 © 2006 IEEE 
Please refer to Fig.
above scalability results.
7(a) and 7(b) for plots of the
6 Concluding Remarks
In this work, we present
the reachable component
method (RCM) which is an analytical framework for char-
acterizing DHT system performance under random failures.
The method’s efﬁcacy is demonstrated through an analysis
of ﬁve important existing DHT systems and the good agree-
ment of the RCM predictions for each system with simu-
lation results from the literature. Researchers involved in
P2P system design and implementation can use the method
to assess the performance of proposed architectures and to
choose robust routing algorithms for application develop-
ment. In addition, although the analysis presented in this
work assumes fully-populated identiﬁer spaces, analytical
results for real world DHTs with non-fully-populated iden-
tiﬁer spaces can be similarly derived. Detail investigation
in this area will be left for future work.
One of the most interesting implications of this analy-
sis is that in the large-network limit, some DHT routing
systems are incapable of routing to a constant fraction of
the network if there is any non-zero probability of random
node failure. These DHT algorithms are therefore consid-
ered to be unscalable. Other algorithms are more robust to
random node failures, allowing each node to route to a con-
stant fraction of the network even as the system size goes to
inﬁnity. These systems are considered to be scalable. Now
that real DHT implementations have on the order of mil-
lions of highly transient nodes, it is increasingly important
to characterize how the size and failure conditions of a DHT
will affect its routing performance.
7 Acknowledgments
We would like to thank Krishna Gummadi for furnish-
ing the simulation results for DHT systems. We wish to
thank Nikolaos Kontorinis for his feedback and sugges-
tions. This work was in part supported by the NSF grants
ITR:ECF0300635 and BIC:EMT0524843.
References
[1] O. Angel, I. Benjamini, E. Ofek, and U. Wieder. Routing
complexity of faulty networks.
In Proceedings of PODC
’05, pages 209–217, New York, NY, USA, 2005. ACM
Press.
[2] K. Gummadi, R. Gummadi, S. Gribble, S. Ratnasamy,
S. Shenker, and I. Stoica. The impact of dht routing ge-
ometry on resilience and proximity. In Proceedings of SIG-
COMM ’03, pages 381–394, New York, NY, USA, 2003.
ACM Press.
[3] J. Kleinberg. The Small-World Phenomenon: An Algorith-
mic Perspective. In Proceedings of the 32nd ACM Sympo-
sium on Theory of Computing, 2000.
[4] K. Knopp. Theory and Application of Inﬁnite Series. Dover
Publications, New York, 1990. Republication of the second
English edition, 1951.
[5] J. S. Kong,
J. Bridgewater,
framework
for
A general
mance analysis of dht
routing systems.
http://www.arxiv.org/abs/cs.DC/0603112, 2006.
and V. Roychowdhury.
scalability
perfor-
pre-print
and
[6] S. Krishnamurthy, S. El-Ansary, E. Aurell, and S. Haridi.
A statistical theory of chord under churn.
In 4th Inter-
national Workshop on Peer-To-Peer Systems, Ithaca, New
York, USA, February 2005.
[7] S. S. Lam and H. Liu. Failure recovery for structured p2p
networks: protocol design and performance evaluation. SIG-
METRICS Perform. Eval. Rev., 32(1):199–210, 2004.
[8] J. Li, J. Stribling, R. Morris, M. F. Kaashoek, and T. M. Gil.
A performance vs. cost framework for evaluating dht design
tradeoffs under churn. In Proceedings of the 24th Infocom,
Miami, Florida, USA, March 2005.
[9] D. Liben-Nowell, H. Balakrishnan, and D. Karger. Analysis
of the Evolution of Peer-to-Peer Systems. In 21st ACM Sym-
posium on Principles of Distributed Computing (PODC),
Monterey, CA, July 2002.
[10] D. Loguinov, A. Kumar, V. Rai, and S. Ganesh. Graph-
theoretic analysis of structured peer-to-peer systems: rout-
ing distances and fault resilience.
In Proceedings of SIG-
COMM ’03, pages 395–406, New York, NY, USA, 2003.
ACM Press.
[11] G. S. Manku, M. Bawa, and P. Raghavan. Symphony: Dis-
tributed hashing in a small world. Proc. 4th USENIX Sympo-
sium on Internet Technologies and Systems, pages 127–140,
2003.
[12] P. Maymounkov and D. Mazi`eres. Kademlia: A peer-to-peer
information system based on the xor metric. In Proceedings
of IPTPS ’01, pages 53–65, London, UK, 2002. Springer-
Verlag.
[13] A. Parker. Peer-to-peer in 2005. Technical report, CacheL-
ogic, 2005.
[14] C. G. Plaxton, R. Rajaraman, and A. W. Richa. Accessing
nearby copies of replicated objects in a distributed environ-
ment.
In Proceedings of SPAA ’97, pages 311–320, New
York, NY, USA, 1997. ACM Press.
[15] S. Ratnasamy, P. Francis, M. Handley, R. Karp, and
S. Shenker. A scalable content addressable network. In Pro-
ceedings of ACM SIGCOMM 2001, 2001.
[16] D. Stauffer and A. Aharony.
Introduction to Percolation
Theory. Taylor & Francis, 1991.
[17] I. Stoica, R. Morris, D. Liben-Nowell, D. R. Karger, M. F.
Kaashoek, F. Dabek, and H. Balakrishnan. Chord: a scal-
able peer-to-peer lookup protocol for internet applications.
IEEE/ACM Trans. Netw., 11(1):17–32, 2003.
[18] S. Wang, D. Xuan, and W. Zhao. Analyzing and enhancing
the resilience of structured peer-to-peer systems. J. Parallel
Distrib. Comput., 65(2):207–219, 2005.
Proceedings of the 2006 International Conference on Dependable Systems and Networks (DSN’06) 
0-7695-2607-1/06 $20.00 © 2006 IEEE