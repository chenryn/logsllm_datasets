### 概述
- 约25名后端工程师
- 2个数据中心
- 约30个后端服务
- 7种客户端

### 引言
在本节中，我们将探讨如何通过敏捷运维来提升运营效率，并同步增加我们的价值。

### 敏捷运维
我们需要从将服务器视为“宠物”的心态，转向将硬件集群视为“牲口”的心态。这种转变从根本上改变了我们处理工具和操作流程的方式。

### 核心工程价值
自公司成立之初，我们就强调自主性和信任。然而，随着对运维流程的深入了解，技术组织正经历更大的变革，这促使我们重新评估方法。过去，我们在讨论服务时，经常关注单个服务器的状态，如磁盘空间或CPU负载。这是因为每个服务器都有其独特性，只有了解这些特性，才能优化使用。此外，每台健康的服务器都是某人的“宠物”，通过观察服务器的维护情况，可以判断服务是否健康。

### 不良习惯的形成
最初，Spotify构建并使用的工具假设服务器安装后会长期运行，且预配新服务器是一个不常见的事件。因此，这些工具的执行时间较长，需要频繁的手动干预。然而，到2011年，我们安装新服务器的频率远超预期，导致运维团队不得不频繁介入手动修复问题。对于一家拥有少量服务器的小型公司来说，这不是问题，但对于我们目前的规模（两个数据中心、第三个正在启用），这种方法变得难以维持。

### 打破不良习惯
行业内的运维模式正在发生变化，尽管有些人预见到了这一趋势，但对其具体影响并不完全清楚。对我们而言，关键在于调整硬件以适应我们的需求，而不是反过来。这种转变对许多人来说很困难，因为大家已经习惯了现有的工作方式。事实上，这种心态的改变花了几年时间才完成，部分原因是缺乏合适的工具支持。2011年底，另一个重要的变化开始出现：功能开发人员开始以新的方式组织自己，例如通过自组织团队和章节。整个开发部门正逐步过渡到一个可扩展的敏捷组织结构，而运维团队则在一旁观察这一变化。

### 关键收获
- 从以服务器为中心转变为以服务为中心的思维模式，并使工具反映这一点。
- 敏捷矩阵组织模型的引入迫使我们重新思考运维的角色定位。

### 无法扩展的系统：2012
- 近25名运维工程师
- 近70名后端工程师
- 三个数据中心，几千台服务器
- 近50个后端服务

### 引言
在本节中，我们将讨论运维团队与组织一同扩展所面临的挑战。

### 迭代胜过失败
有效的扩展仍然非常困难，仅仅放弃责任是不够的。我们需要重新审视Spotify的运维策略。默认情况下，运维经验应该是必需的，因为中央运维团队无法无限扩展。我们需要将运维责任更多地转移到开发人员身上，使其成为一种普遍技能。

### 当前状况
2012年，随着Spotify用户群的增长，我们面临着新的可扩展性和稳定性问题。运维小组由不到十名SRE组成，负责数十项后端服务的维护，包括部署、容量规划、系统设计评审等。我们的后端现在在三个数据中心运行，第四个即将投入使用，我们必须管理更多的资源。为此，我们组建了一个专门的工具自动化团队，开发了配置管理数据库（CMDB）等早期产品。由于配置定制化程度高，预测性较差，运维所有者和服务开发者必须紧密合作，确保服务符合生产就绪标准。

### 手工运维的瓶颈
尽管我们不断进行手动或通过配置管理进行部署，但持续交付机制尚未建立。我们仍能快速发布更新，但这依赖于大量手工工作。