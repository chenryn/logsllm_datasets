ICS 35.240
L 78
  -----------------------------------------------------------------------
  -----------------------------------------------------------------------
YD
中华人民共和国通信行业标准
XX/T s---XXXX
  -----------------------------------------------------------------------
  -----------------------------------------------------------------------
  -----------------------------------------------------------------------
云上软件工程 软件质量 可观测性平台技术要求
    Technical capability requirements for distributed middleware service
part II-Observablility 
  -----------------------------------------------------------------------
  （工作组讨论稿）
  -----------------------------------------------------------------------
  2021年10月22日
  -----------------------------------------------------------------------
XXXX -    - XX发布
XXXX - XX -   实施
中华人民共和国工业和信息化部  发 布
[]{#_Toc518476290 .anchor}目 次
[目 次 [I](#_Toc518476290)](#_Toc518476290)
[前 言 [II](#_Toc21792723)](#_Toc21792723)
[分布式中间件服务技术能力要求 第x部分 可观测性平台
[1](#_Toc85805515)](#_Toc85805515)
[1 范围 [1](#_Toc322631613)](#_Toc322631613)
[2 规范性引用文件 [1](#_Toc322631242)](#_Toc322631242)
[3 术语定义和缩略语 [1](#_Toc4574515)](#_Toc4574515)
[3.1.1 可观测性 Observability [1](#_Toc74241867)](#_Toc74241867)
[3.1.2 指标 Metrics [1](#_Toc74241868)](#_Toc74241868)
[3.1.3 日志 Logs [1](#_Toc74241869)](#_Toc74241869)
[3.1.4 链路追踪 Traces [2](#_Toc74241870)](#_Toc74241870)
[3.1.5 标签 Tags [2](#_Toc74241871)](#_Toc74241871)
[3.1.6 代理 Agent [2](#_Toc74241872)](#_Toc74241872)
[3.1.7 采集周期 Cycle [2](#_Toc74241873)](#_Toc74241873)
[3.1.8 数据聚合 Aggregation [2](#_Toc74241874)](#_Toc74241874)
[3.1.9 告警 Alerting [2](#_Toc74241875)](#_Toc74241875)
[4 框架图 [2](#_Toc74241876)](#_Toc74241876)
[5 可观测性平台分级规则 [3](#_Toc85805529)](#_Toc85805529)
[6 平台数据处理要求 [3](#_Toc74241877)](#_Toc74241877)
[7 业务系统支撑能力 [6](#_Toc85805531)](#_Toc85805531)
[8 平台运维支撑能力要求 [7](#_Toc74241879)](#_Toc74241879)
[9 平台安全能力要求 [9](#_Toc74241880)](#_Toc74241880)
[10 性能项要求 [10](#_Toc5195557)](#_Toc5195557)
[11 可观测性应用场景 [11](#_Toc535935999)](#_Toc535935999)
[]{#_Toc21792723 .anchor}前 言
本标准属于"云上软件工程 软件质量"系列标准。
本标准/本部分按照GB/T 1.1---2009给出的规则起草。
请注意本文件的某些内容可能涉及专利。本文件的发布机构不承担识别这些专利的责任。
本标准/本部分由中国通信标准化协会提出并归口。
本标准/本部分起草单位：中国信息通信研究院、
本标准/本部分主要起草人：郑立、李修莹、陈屹力
云上软件工程 软件质量 可观测性平台技术要求
1.  []{#_Toc322631613 .anchor}范围
本标准定义了软件质量领域可观测性平台的技术规范和能力要求。该标准内容包括五个部分：第一部分是可观测性应用能力要求；第二部分是可观测性功能要求；第三部分是可观测性运维支持能力要求；第四部分对可观测性安全方面的规范进行了描述；第五部分对于可观测性的性能要求提出了衡量指标；
本标准同时适用于服务商提供的公有云服务和私有云软件产品，即面向公共用户提供公有云服务和私有环境下的软件产品或解决方案;依据交付形式的差异，本标准针对不同的使用场景其技术指标要求略有不同。
2.  []{#_Toc322631242 .anchor}规范性引用文件
下列文件对于本文件的应用是必不可少的。凡是注日期的引用文件，仅所注日期的版本适用于本文件。凡是不注日期的引用文件，其最新版本（包括所有的修改单）适用于本文件。
3.  []{#_Toc4574515 .anchor}术语定义和缩略语
下列术语和定义适用于本文件。
1.  术语定义
    []{#_Toc74241867 .anchor}3.1.1 可观测性 Observability
对基础设施以及服务或应用程序的运行状态进行度量和观测的能力及相关技术，可观测性主要包括指标（Metrics）、日志（Logging）、链路追踪（Tracing）3大维度。
[]{#_Toc74241868 .anchor}3.1.2 指标 Metrics
一段时间内可聚合状态的数字表示，是基础设施、程序、业务指标的量化，如CPU使用率、程序接口请求量、业务活跃用户数等。
[]{#_Toc74241869 .anchor}3.1.3 日志 Logs
表示结构化或者利于可读的离散事件，主要是系统/应用输出的时间相关的记录，包括系统日志、应用程序的日志、服务的变更记录、报警记录等。
[]{#_Toc74241870 .anchor}3.1.4 链路追踪 Traces
用户请求从用户端到服务端到底层组件的整个链路和拓扑关系，也包括客户端的页面或视图的请求关系。为应用程序发送的消息添加唯一标识符，可以追踪各个事务在分布式系统中移动的路径。
[]{#_Toc74241871 .anchor}3.1.5 标签 Tags
标签是在数据上报时添加维度的方式，使用它们便于在管理界面中可视化的进行数据的过滤、聚合和对比。
[]{#_Toc74241872 .anchor}3.1.6 代理 Agent
代理是安装在主机、容器或应用程序侧的轻量级软件。它通过集成、命令行或API从应用程序上采集Metircs、Logs和Traces数据上报给服务端。
[]{#_Toc74241873 .anchor}3.1.7 采集周期 Cycle
对目标指标（如CPU、memory、I/O或应用发布的指标接口）进行在周期性数据采集时，相邻两次实测之间的时间间隔。
[]{#_Toc74241874 .anchor}3.1.8 数据聚合 Aggregation
将多个维度的数据进行基于时间、标签的聚合，可以支持多种数学函数，如非负求导。
[]{#_Toc74241875 .anchor}3.1.9 告警 Alerting
告警是根据所设定的指标进行一系列异常检测（通过简单阈值或机器学习）后生成的事件，这种事件通常通过短信、电话或者即时通讯软件快速发给相关问题负责人。
2.  缩略语
下列缩略语适用于本标准：
API 应用编程接口 Application Programming Interface
SSL 安全套接层 Secure Sockets Layer
RCA 根因分析 Root Cause Analysis
4.  []{#_Toc74241876 .anchor}可观测性技术框架图
5.  []{#_Toc85805529 .anchor}可观测性平台分级规则
    可观测性的三类支柱数据是指标、日志、链路。可观测性平台能力成熟度也是围绕着这三类数据的实时性、关联性、统一性来展开。整体上我们把所有的能力分成三个等级，各级别服务能力描述如下：
    \--基础级：离散式可观测-离散式可观测主要的特点就是针对复杂的分布式系统,针对某一个组件进行定制式的观测或者组合式的观测,不能反映整个分布式系统状态的全貌,属于部分可观测;
    能够基本实现功能要求；
    \--增强级：集中式可观测-集中式可观测主要的特点就是把所有观测对象的观测结果统一存储,统一分析,但采集的方式并不统一,数据结构并不统一,虽然可以通过数据治理达到了整体可观测,但没有一个标准模型,无法达到接入即可观测.
    在基础级能力上，具备较高级的功能实现；
    \--先进级：统一全链路可观测-统一全链路可观测的特点是自采集起就是具备一个统一的数据模型,从前端到后端,从请求开始到请求结束,所有数据可采可查可预警,
    达到了接入即可观测的标准.
    在增强级能力上，具备行业内领先的功能实现。
6.  []{#_Toc74241877 .anchor}平台数据处理要求
    1.  数据采集能力
描述：可观测的基础是全面的数据采集能力,采集能力的强弱直接决定了可观测能力的强弱。
采集范围:
基础资源：包含云,主机,容器,网络,
采集的对象包含指标(实时状态,多维统计),日志(运行日志,出错日志)
中间件：包含数据库,消息队列,应用容器,存储,日志等,
采集数据范围包括日志(运行日志,出错日志), 指标(实时状态,多维统计),
链路(延迟,通讯量,错误率,饱和度)
IOT设备：包含各种边缘设备,采集的数据范围包括指标((实时状态,多维统计))
前端应用：包含H5,ios,android,小程序等,采集范围包括指标(实时状态,多维统计),链路(延迟,通讯量,错误率,饱和度),日志(运行日志,出错日志)
后端应用：包含java python nodejs c#
go等,采集范围包括指标(实时状态,多维统计),链路(延迟,通讯量,错误率,饱和度),日志(运行日志,出错日志)
1 级能力要求如下：
2 级能力要求如下：
3 级能力要求如下：
1.  支持采集基础资源、中间件、IOT设备等系统指标；
2.  支持采集应用的前端应用、后端应用的服务指标、业务运行指标；
3.  系统可以使用多种集成方式采集事件日志和时间序列指标数据。如通过安装Agent、通用配置模版集成或自定义API集成。
4.  支持适配4种及4种以上环境，如安超OS、NeoKylin、 Redflag
    Linux、Harmony OS、Mac OS
    X、Windows、Debian、Ubuntu、CentOS、RedHat、SUSE、AIX、Docker、Kubernetes、Openshift等
5.  支持Java、C++、Python、.Net
    Core、PHP、NodeJS、Golang、LUA、Ruby、Rust等4种及4种以上语言SDK或探针；
    1.  数据上报治理能力
描述：数据上报治理功能为采集端构建"可控可管"的能力，具有较强的较灵活性，确保业务的稳定运营。
要求：
1\)
采样率动态调整,可按租户、服务名、服务Endpoint等维度配置不同采样规则；
2\) 采集端具备数据聚合、压缩、补报等能力；
3\)
采集端具备一定的熔断与降级机制，实现采集的动态调整、暂停、恢复等能力。
4）数据上报支持对敏感信息进行脱敏，如日志中的密码，追踪中的SQL请求中的用户ID。
5）支持Push和Pull两种数据采集上报模式