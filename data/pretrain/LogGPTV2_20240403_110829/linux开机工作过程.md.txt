# 计算机组成
![](media/image1.png){width="5.768055555555556in"
height="4.544346019247594in"}
# 计算机开机
这是一个神秘的过程。我们只是按了开机键，就看到屏幕上的进度条或者一行行的输出，直到我们到达登录界面。然而，计算机开机又是个异常脆弱的过程，我们满心期望的登录界面可能并不会出现，而是一个命令行或者错误信息。了解计算机开机过程有助于我们修复开机可能出现的问题。
## 1-最初始阶段(BIOS)
当我们打开计算机电源，计算机会自动从主板的BIOS(Basic Input/Output
System)读取其中所存储的程序。这一程序通常知道一些直接连接在主板上的硬件(硬盘，网络接口，键盘，串口，并口)。现在大部分的BIOS允许你从软盘、光盘或者硬盘中选择一个来启动计算机。
## 2-主引导记录(MBR)
下一步，计算机将从你所选择的存储设备中读取起始的512
bytes(比如光盘一开是的512 bytes，如果我们从光盘启动的话)。这512
bytes叫做主引导记录MBR (master boot record)。
## 3-加载程序(boot loader)
MBR会告诉电脑从该设备的某一个分区(partition)来装载引导加载程序(boot
loader)。Boot
loader储存有操作系统(OS)的相关信息，比如操作系统名称，操作系统内核
(内核)所在位置等。常用的boot loader有GRUB和LILO。
## 4-加载内核(kernel)
随后，boot
loader会帮助我们加载内核(kernel)。内核实际上是一个用来操作计算机的程序，它是计算机操作系统的内核，主要的任务是管理计算机的硬件资源，充当软件和硬件的接口。操作系统上的任何操作都要通过内核传达给硬件。Windows和Linux各自有自己内核。狭义的操作系统就是指内核，广义的操作系统包括内核以及内核之上的各种应用。
（Linus Torvalds与其说是Linux之父，不如说是Linux
内核之父。他依然负责Linux 内核的开发和维护。至于Ubuntu, Red Hat,
它们都是基于相同的内核之上，囊括了不同的应用和界面构成的一个更加完整的操作系统版本。)
### 多操作系统的原理
实际上，我们可以在多个分区安装boot
loader，每个引导加载程序对应不同的操作系统，在读取MBR的时候选择我们想要启动的引导加载程序。这就是多操作系统的原理。
## 5-1号进程init process
如果我们加载的是Linux内核，Linux内核开始工作。内核会首先预留自己运行所需的内存空间，然后通过驱动程序(driver)检测计算机硬件。这样，操作系统就可以知道自己有哪些硬件可用。随后，内核会启动一个init进程。它是Linux系统中的1号进程(Linux系统没有0号进程)。到此，内核就完成了在计算机启动阶段的工作，交接给init来管理。
小结: 内核 -\> init process
## 6-登录对话框login
(根据boot loader的选项，Linux此时可以进入单用户模式(single user
mode)。在此模式下，初始脚本还没有开始执行，我们可以检测并修复计算机可能存在的错误)
随后，init会运行一系列的初始脚本(startup
scripts)，这些脚本是Linux中常见的shell scripts。这些脚本执行如下功能：
设置计算机名称，时区，检测文件系统，挂载硬盘，清空临时文件，设置网络......
当这些初始脚本，操作系统已经完全准备好了，只是，还没有人可以登录。init会给出登录(login)对话框，或者是图形化的登录界面。
输入用户名(比如说vamei)和密码，DONE！
在此后的过程中，你将以用户(user)vamei的身份操作电脑。此外，根据你创建用户时的设定，Linux还会将你归到某个组(group)中，比如可以是stupid组，或者是vamei组。
所以你将是用户vamei，
同时是vamei组的组员。(注意，组vamei和用户vamei只是重名而已，就好想你可以叫Dell,
同时还是Dell公司的老板一样。你完全也可以是用户vamei，同时为stupid组的组员)
## 总结
BIOS -\> MBR -\> 引导加载程序 -\> 内核 -\> init process -\> login
# BIOS
BIOS是英文\"Basic Input Output System\"的缩略词：基本输入输出系统。
在IBM
PC兼容系统上，是一种业界标准的固件接口。BIOS这个字眼是在1975年第一次由CP/M操作系统中出现。BIOS是个人电脑启动时加载的第一个软件。
其实，它是一组固化到计算机内主板上一个ROM芯片上的程序，它保存着计算机最重要的基本输入输出的程序、开机后自检程序和系统自启动程序，它可从CMOS中读写系统设置的具体信息。
其主要功能是为计算机提供最底层的、最直接的硬件设置和控制。此外，BIOS还向作业系统提供一些系统参数。系统硬件的变化是由BIOS隐藏，程序使用BIOS功能而不是直接控制硬件。现代作业系统会忽略BIOS提供的抽象层并直接控制硬件组件。
当今，此系统已成为一些病毒木马的目标。一旦此系统被破坏，其后果不堪设想。
# CMOS 
CMOS是Complementary Metal Oxide
Semiconductor（互补金属氧化物半导体）的缩写。它是指制造大规模集成电路芯片用的一种技术或用这种技术制造出来的芯片，是电脑主板上的一块可读写的RAM芯片。因为可读写的特性，所以在电脑主板上用来保存BIOS设置完电脑硬件参数后的数据，这个芯片仅仅是用来存放数据的。
# ROM （只读存储器）
ROM 是 ROM image（只读内存镜像）的简称，常用于手机定制系统玩家的圈子中。
一般手机刷机的过程，就是将只读内存镜像（ROM
image）写入只读内存（ROM）的过程。 常见的 ROM image 有 img、zip
等格式，前者通常用 fastboot 程序通过数据线刷入（线刷），后者通常用
recovery 模式从 sd刷入（卡刷），故 img 镜像也被称为线刷包，zip
镜像也被称为卡刷包。
国内的定制系统开发者，经常会陷入自己的产品究竟是应该称为 OS还是
UI的争论，为了避免此类争论和表示谦虚，会自称为
ROM。很多定制系统玩家也会统一将定制系统称为 ROM。
# RAM（可读写存储器）
随机存取存储器（英语：Random Access
Memory，缩写：RAM），也叫主存，是与CPU直接交换数据的内部存储器。\[1\]它可以随时读写（刷新时除外，见下文），而且速度很快，通常作为操作系统或其他正在运行中的程序的临时数据存储介质。
主存（Main
memory）即计算机内部最主要的存储器，用来加载各式各样的程序与数据以供CPU直接运行与运用。由于DRAM的性价比很高，且扩展性也不错，是现今一般计算机主存的最主要部分。2014年生产计算机所用的主存主要是DDR3
SDRAM，而2016年开始DDR4
SDRAM逐渐普及化，笔电厂商如华硕及宏碁开始在笔电以DDR4存储器取代DDR3L。