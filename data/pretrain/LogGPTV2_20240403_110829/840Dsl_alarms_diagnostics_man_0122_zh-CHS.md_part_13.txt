### 诊断手册
**版本**: 01/2022  
**编号**: 6FC5398-6BP40-6RA6

#### NC 报警

**说明**: 转换数据记录出错。以下错误号详细说明了错误原因：

1. **转换类型不明确**：`$NT_TRAFO_TYPE[n]` 包含无效的名称。
2. **机床运动结构未定义**：`$NT_T_CHAIN_LAST_ELEM[n]` 和 `$NT_P_CHAIN_LAST_ELEM[n]` 均不包含机床运动学中运动链系单元的参考。
3. **运动链系单元与主要单元无连接**：
   - `具有 $NT_T_CHAIN_LAST_ELEM[n] 中所包含名称的运动链系单元与主要单元无连接。`
   - `具有 $NT_P_CHAIN_LAST_ELEM[n] 中所包含名称的运动链系单元与主要单元无连接。`
4. **运动链系单元未找到**：
   - `具有 $NT_T_CHAIN_LAST_ELEM[n] 中所包含名称的运动链系单元未找到。`
   - `不存在运动链系单元（MD18880 $MN_MM_MAXNUM_KIN_CHAIN_ELEM 为零）。`
   - `具有 $NT_P_CHAIN_LAST_ELEM[n] 中所包含名称的运动链系单元未找到。`
   - `具有 $NT_T_REF_ELEM[n] 中所包含名称的运动链系单元未找到。`
5. **旋转轴未在运动链系中找到**：
   - `在 $NT_ROT_AX_NAME[n,0] 中定义的旋转轴未在运动链系中找到。`
   - `在 $NT_ROT_AX_NAME[n,1] 中定义的旋转轴未在运动链系中找到。`
   - `在 $NT_ROT_AX_NAME[n,2] 中定义的旋转轴未在运动链系中找到。`
6. **旋转轴被多次定义**：
   - `在 $NT_ROT_AX_NAME[n,1] 中定义的旋转轴被多次定义。`
   - `在 $NT_ROT_AX_NAME[n,2] 中定义的旋转轴被多次定义。`
7. **线性轴未在运动链系中找到**：
   - `在 $NT_GEO_AX_NAME[n,0] 中定义的线性轴未在运动链系中找到。`
   - `在 $NT_GEO_AX_NAME[n,1] 中定义的线性轴未在运动链系中找到。`
   - `在 $NT_GEO_AX_NAME[n,2] 中定义的线性轴未在运动链系中找到。`
8. **线性轴被多次定义**：
   - `在 $NT_GEO_AX_NAME[n,1] 中定义的线性轴被多次定义。`
   - `在 $NT_GEO_AX_NAME[n,2] 中定义的线性轴被多次定义。`
9. **同一根机床轴被多次指定**：
   - `转换的运动描述中不止一次指定了一根线性轴（至少有两个类型为 AXIS_LIN 的链系单元在组件 $NK_AXIS[n] 中指定至同一根机床轴）。`
   - `转换的运动描述中不止一次指定了一根回转轴（至少有两个类型为 AXIS_ROT 的链系单元在组件 $NK_AXIS[n] 中指定至同一根机床轴）。`
10. **基准定向未定义**：
    - `基准定向未定义，即：$NT_BASE_ORIENT[n, 0..2] 的所有三个组件均为零。`
    - `定向标准矢量未定义，即：$NT_BASE_ORIENT_NORMAL[n, 0..2] 的所有三个组件均为零。`
    - `用于定义基准定位（$NT_BASE_ORIENT[n, 0..2]）和基准标准向量（$NT_BASE_ORIENT_NORMAL[n, 0..2]）的向量是平行的。`
11. **旋转轴数量不一致**：
    - `在 Part 链系中找到的相关旋转轴的数量与 $NT_ROT_AX_CNT[n,0] 中的数量不一致。`
    - `在 Tool 链系中找到的相关旋转轴的数量与 $NT_ROT_AX_CNT[n,1] 中的数量不一致。`
12. **定向转换问题**：
    - `定向转换的第一和第二定向轴是平行的。`
    - `定向转换的第二和第三定向轴是平行的。`
    - `未定义定向轴（定向转换至少需要一个定向轴）。`
    - `无效的 3 轴定向转换：定向轴与两个几何轴所构成的平面不垂直。`
13. **系统变量问题**：
    - `系统变量 $NT_CLOSE_CHAIN_P 在当前软件版本中禁用且只可包含空串。`
    - `$NT_CLOSE_CHAIN_T 中指定的运动链系单元未找到。`
14. **几何轴定义问题**：
    - `定义用于定向转换或倾斜轴转换的几何轴少于两个。`
    - `对于带有不止一个定向轴的定向转换并未定义所有的三个几何轴。`
    - `几何轴 1 和 2 平行。`
    - `几何轴 1 和 3 平行。`
    - `几何轴 2 和 3 平行。`
    - `3 个几何轴位于同一平面。`
15. **功能未定义**：
    - `未定义用于该转换的功能“关闭Part链系”。`
    - `未定义用于该转换的功能“关闭Tool链系”。`
16. **定向轴定义顺序问题**：
    - `非法的定向轴定义顺序。$NT_ROT_AX_NAME[n, 0..2] 中的定义轴必须在索引0时以无间隙方式定义。$NT_ROT_AX_NAME[n, 0..2] 中的轴顺序必须与运动链系中的轴顺序相同（在从Part链系末尾到Tool链系末尾穿过链系时）。`
    - `一个定向轴被多次编程。`
    - `无法将第一个定向轴设为主轴。`
    - `无法将第二个定向轴设为主轴。`
    - `无法将第三个定向轴设为主轴。`
17. **切端面轴设置错误**：
    - `第一定向轴设为切端面轴错误，即：MD30502 $MA_INDEX_AX_DENOMINATOR, MD30501 $MA_INDEX_AX_NUMERATOR 或 MD30330 $MA_MODULO_RANGE（用于取模轴）中至少有一个为零。`
    - `第二定向轴设为切端面轴错误，错误原因与错误号 87 相同。`
    - `第三定向轴设为切端面轴错误，错误原因与错误号 87 相同。`
18. **运动链系单元数量超出限制**：
    - `超出运动链系单元（线性轴、旋转轴和恒定单元的总和）的最大数量。该情况下，未被轴中断的链系中的恒定单元系列仅被视为一个单元。此时，定向转换中允许最多 15 个运动单元。`
    - `超出了运动链系中用于定义转换的旋转轴的最大数量。`
    - `超出了运动链系中用于定义刀具的单元的最大数量。`
    - `超出了运动链系中用于定义工件的单元的最大数量。`
    - `超出了在转换激活时不可以运动的恒定转换轴（冗余旋转轴）的最大数量。此时，定向转换中允许最多 6 个旋转轴。`
    - `超出了机床运动内部显示的最大允许的运动链系单元数量。`
19. **运动链系单元未找到**：
    - `包含 $NT_T_CHAIN_FIRST_ELEM[n] 中所含名称的运动链系单元未找到。`
    - `包含 $NT_P_CHAIN_FIRST_ELEM[n] 中所含名称的运动链系单元未找到。`
20. **几何轴互换问题**：
    - `用于记录几何轴互换的由三个位组成的数字（Transmit或Tracyl的$NT_CNTRL[n]中的位11到位13）包含大于5的值。`
    - `不允许进行几何轴互换（Transmit或Tracyl的$NT_CNTRL[n]中的位11到位13）。将几何轴分配至转换的输入轴时不允许更换已占用的位。`
    - `Transmit或Tracyl转换的参数设置需要一个中心偏移轴。`
    - `必须在且只能在 $NT_ROT_AX_NAME[n, 1] 中输入轴名称。`
    - `在极轴($NT_ROT_AX_NAME[n, 1])之后的工件零点方向上的运动链系中输入无效偏移。`
    - `如果在Transmit或Tracyl的$NT_CNTRL[n]中设置了位19，运动链系的最后一个单元必须是回转轴或恒定旋转。`
    - `在极轴($NT_ROT_AX_NAME[n, 1])后的工件零点方向上出现了不允许的旋转（恒定旋转或恒定回转轴）。`
21. **链系单元类型问题**：
    - `不允许的链系单元类型（系统错误）。`
22. **几何轴名称未输入**：
    - `$NT_GEO_AX_NAME[n, 0] 中未输入轴名称。`
    - `$NT_GEO_AX_NAME[n, 1] 中未输入轴名称，尽管已经指定了中心偏移轴。`
23. **唯一定义的几何轴**：
    - `唯一定义的几何轴必须在 $NT_GEO_AX_NAME[n, 2] 中。`
    - `参数 $NT_GEO_AX_NAME[n, 2] 为空。$NT_GEO_AX_NAME[n, 2] 中必须始终有输入。`
24. **主轴定义问题**：
    - `没有定义主轴（“插补车削”转换需要一根主轴）。`
    - `定义了不止一根旋转轴（“插补车削”转换只需要一根定义为主轴的旋转轴）。`
    - `在“插补车削”转换中，必须在 $NT_ROT_AX_NAME[n, 0] 中定义一根主轴。`
    - `在“插补车削”转换中，在 $NT_ROT_AX_NAME[n, 0] 中配置了一根旋转轴，但没有将它定义为主轴。`
    - `在“插补车削”转换中，没有在 $NK_OFF_DIR 中输入主轴方向：(0,0,-1)。`
25. **校正元素问题**：
    - `尽管在 $NT_CNTRL[n] 中设置了位7（关闭Part链系），但仍在Part链系末尾定义了校正元素。`
    - `尽管在 $NT_CNTRL[n] 中设置了位8（关闭Tool链系），但仍在Tool链系开头定义了校正元素。`
26. **未找到运动链系单元**：
    - `未找到通过 $NT_CORR_ELEM_P[n, 0] 指明的运动链系单元。`
    - `未找到通过 $NT_CORR_ELEM_P[n, 1] 指明的运动链系单元。`
    - `未找到通过 $NT_CORR_ELEM_P[n, 2] 指明的运动链系单元。`
    - `未找到通过 $NT_CORR_ELEM_P[n, 3] 指明的运动链系单元。`
    - `未找到通过 $NT_CORR_ELEM_T[n, 0] 指明的运动链系单元。`
    - `未找到通过 $NT_CORR_ELEM_T[n, 1] 指明的运动链系单元。`
    - `未找到通过 $NT_CORR_ELEM_T[n, 2] 指明的运动链系单元。`
    - `未找到通过 $NT_CORR_ELEM_T[n, 3] 指明的运动链系单元。`
27. **运动链系单元不在相应的程序段中**：
    - `通过 $NT_CORR_ELEM_P[n, 0] 指明的运动链系单元不在相应的程序段中。`
    - `通过 $NT_CORR_ELEM_P[n, 1] 指明的运动链系单元不在相应的程序段中。`
    - `通过 $NT_CORR_ELEM_P[n, 2] 指明的运动链系单元不在相应的程序段中。`
    - `通过 $NT_CORR_ELEM_P[n, 3] 指明的运动链系单元不在相应的程序段中。`
    - `通过 $NT_CORR_ELEM_T[n, 0] 指明的运动链系单元不在相应的程序段中。`
    - `通过 $NT_CORR_ELEM_T[n, 1] 指明的运动链系单元不在相应的程序段中。`
    - `通过 $NT_CORR_ELEM_T[n, 2] 指明的运动链系单元不在相应的程序段中。`
    - `通过 $NT_CORR_ELEM_T[n, 3] 指明的运动链系单元不在相应的程序段中。`
28. **链系转换问题**：
    - `在链系转换中未定义转换链，必须通过 $NT_TRACON_CHAIN[] 定义至少一个转换。`
    - `未定义在 $NT_TRACON_CHAIN[n, 0] 中给定的转换。`
    - `未定义在 $NT_TRACON_CHAIN[n, 1] 中给定的转换。`
    - `未定义在 $NT_TRACON_CHAIN[n, 2] 中给定的转换。`
    - `未定义在 $NT_TRACON_CHAIN[n, 3] 中给定的转换。`
    - `给定的转换数据组在激活链系转换时出错。`
    - `定义转换链会导致无限循环。`
    - `在定义转换链时定义了过多的链系转换（最多可以有 8 个）。`
    - `在链系转换中配置了一个不允许的零件转换链。`
29. **OEM转换问题**：
    - `无法激活OEM转换，因为该转换未经CC注册。`
    - `OEM转换作为定向转换注册，但未配置。`
    - `OEM转换作为定向转换配置，但未注册。`
    - `激活的OEM转换的工作方式与定向转换相同，即使该转换未针对定向进行配置和注册。`
    - `针对激活的OEM转换未定义几何轴（未由CC或在系统变量 $NT_GEO_AX_NAME[n, i] 中定义）。`
    - `针对激活的OEM转换未定义定向轴，即使该转换已配置为定向转换（未由CC或在系统变量 $NT_ROT_AX_NAME[n, i] 中定义）。`
    - `OEM转换不支持定向旋转，即使该转换配置了3根定向轴。`
    - `针对定向旋转创建了OEM转换，但未进行配置（少于3根定向轴）。`
    - `OEM转换报告一个常规运动分析错误。（例如：当方法 analyseChain() 未在CC中实施时出现）。`
    - `通过OEM转换分析运动链时发现一个未知单元。`
    - `在OEM转换的运动链中有一个偏移单元布局错误。`
    - `不允许运动链中的线性轴的指定布局。`
    - `不允许运动链中的回转轴的指定布局。`
    - `不允许运动链中的线性轴的指定方向。`
    - `不允许运动链中的回转轴的指定旋转方向。`
    - `预留用于编译循环的运动分析的故障信息。`
30. **初始位置上的刀具定向问题**：
    - `初始位置上的刀具定向必须与坐标轴X、Y或Z中的其中一根平行（变量 $NT_BASE_ORIENT[i] 的值）。`
    - `初始位置上的刀具定向不可以与X轴方向平行（变量 $NT_BASE_ORIENT[0] 的值）。`
    - `初始位置上的刀具定向不可以与Y轴方向平行（变量 $NT_BASE_ORIENT[1] 的值）。`
    - `初始位置上的刀具定向不可以与Z轴方向平行（变量 $NT_BASE_ORIENT[2] 的值）。`
    - `初始位置上的刀具法矢必须与坐标轴X、Y或Z中的其中一根平行（变量 $NT_BASE_ORIENT_NORMAL[i] 的值）。`
    - `初始位置上的刀具法矢不可以与X轴方向平行（变量 $NT_BASE_ORIENT_NORMAL[0] 的值）。`
    - `初始位置上的刀具法矢不可以与Y轴方向平行（变量 $NT_BASE_ORIENT_NORMAL[1] 的值）。`
    - `初始位置上的刀具法矢不可以与Z轴方向平行（变量 $NT_BASE_ORIENT_NORMAL[2] 的值）。`
31. **预留用于编译循环的转换参数分析的故障信息**：
    - `预留用于编译循环的转换参数分析的故障信息。`
32. **不允许的冗余旋转轴**：
    - `不允许的冗余旋转轴。当前定向转换中只允许一个冗余的旋转轴。该旋转轴必须为运动链系中的第一个轴。`

**提示**:
- 参数4包含用"|"隔开的参数5和6的说明。
- 5 = 转换数据组索引
- 6 = 故障编号

**反应**:
- 解释器终止。
- 本通道NC启动禁止。
- 已设置接口信号。
- 报警显示。
- 在程序段结尾报警时NC停止。

**排除方法**:
- 定义有效的转换数据组。
- 程序继续：用复位键清除报警，重新启动子程序。

---

**报警代码: 4349**
**说明**: [通道%1：] 没有剩余存储空间可用于转换。
- 参数： %1 = 通道号
- %2 = 已经生效的转换的数量

**解释**:
- NCK中的每个运动转换都需要一定的存储空间。如果机床数据 MD18866 $MN_MM_NUM_KIN_TRAFOS 不等于零，则该数据可以给定在NCK中有多少运动转换可以同时生效。
- 如果机床数据 MD18866 $MN_MM_NUM_KIN_TRAFOS 等于零，则自动确定同时生效的运动转换（必须和当前通道数量相乘）。

**反应**:
- 重组补偿程序段。
- 已设置接口信号。
- 报警显示。
- 在程序段结尾报警时NC停止。

**排除方法**:
- 提高机床数据 MD18866 $MN_MM_NUM_KIN_TRAFOS 的值。

**程序继续**:
- 按下 CYCLE START 键或 RESET 键清除报警，继续运行程序。

---

**报警代码: 4400**
**说明**: 机床数据的修改将导致缓冲存储器的重组（类型%1），（数据丢失！）- %2
- 参数： %1 = 存储器类型
- %2 = 机床数据标识符

**解释**:
- 用于配置缓冲存储器的机床数据已经被更改。如果NC使用更改后的数据启动，将会导致缓冲存储器的重组并且因此丢失所有缓存的用户数据（零件程序、刀具数据、GUD、丝杠螺距误差补偿）。
- 第1个参数的含义：
  - 0x00 缓冲存储器（内部）
  - 0x01 缓冲存储器

**反应**:
- 报警显示。

**排除方法**:
- 如果控制器包含尚未保存的用户数据，则在下次NC加电之前必须进行数据备份。通过手动将更改后的MD重置到最后一次加电之前的值，可以避免存储器的重组。

**程序继续**:
- 报警原因和报警提示会同时消失。不需要其他处理。

---

**报警代码: 4402**
**说明**: %1 影响机床数据的复位
- 参数： %1 = 机床数据

**解释**:
- 如果设置了该机床数据，则在下次引导启动时使用预先设置的值重写机床数据的当前值。在某些情况下这样做有可能会导致数据丢失（在缓冲存储器中也有可能）。

**反应**:
- 报警显示。

**排除方法**:
- 请通知授权人员/维修部门。如果控制器包含尚未保存的用户数据，则在下次NCK加电之前必须进行数据备份。通过手动将更改后的MD重置到最后一次加电之前的值，可以避免存储器的重组。

**程序继续**:
- 报警原因和报警提示会同时消失。不需要其他处理。

---

**报警代码: 4500**
**说明**: 写入AMR备份文件%1时会报错%2（数据丢失！）
- 参数： %1 = 文件名
- %2 = 出错代码

**解释**:
- 写入AMR备份文件时发生错误，可能导致数据丢失。

**反应**:
- 报警显示。

**排除方法**:
- 检查文件路径和权限，确保有足够的磁盘空间，并检查是否有其他进程锁定该文件。

**程序继续**:
- 报警原因和报警提示会同时消失。需要进一步处理以恢复数据。