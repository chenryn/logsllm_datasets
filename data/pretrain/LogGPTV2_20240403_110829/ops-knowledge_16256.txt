User: How to use the iptables tool that comes with the Linux system to implement the firewall function?
Assistant: iptables is a firewall tool that comes with the Linux system. The following are the steps to use iptables to implement the firewall function: 1. View the current iptables rules ``` iptables -L -n ``` 2. Clear the current iptables rules ``` iptables -F ``` 3. Set the default policy ``` iptables -P INPUT DROP # Input traffic is rejected by default iptables -P FORWARD DROP # Forwarded traffic is rejected by default iptables -P OUTPUT ACCEPT # Output traffic is allowed by default``` 4. Loopback traffic is allowed``` iptables -A INPUT -i lo -j ACCEPT # Allow all loopback traffic``` 5. Allow established connections``` iptables -A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT # Allow established connections``` 6. Allow specified ports For example, allow SSH ports to enter and exit: ``` iptables -A INPUT -p tcp --dport 22 -j ACCEPT # Allow SSH ports to enter iptables -A OUTPUT -p tcp --sport 22 -j ACCEPT # Allow SSH ports to go out`` ` 7. Other common rules``` # Allow PING iptables -A INPUT -p icmp --icmp-type echo-request -j ACCEPT iptables -A OUTPUT -p icmp --icmp-type echo-reply -j ACCEPT # Allow DNS query iptables -A OUTPUT -p udp --dport 53 -j ACCEPT ``` 8. Save iptables rules The iptables rules are not saved in the file and will be lost after restarting. You can use the following command to save iptables rules: ``` iptables-save > /etc/sysconfig/iptables ``` 9. Start iptables service ``` systemctl start iptables ``` The above are the basic iptables rules, which can be modified according to actual needs Revise.