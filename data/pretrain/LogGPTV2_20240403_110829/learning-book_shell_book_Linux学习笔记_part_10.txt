20) Jordan
37) Qatar
4) Bahrain
21) Kazakhstan
38) Russia
5) Bangladesh
22) Korea (North)
39) Saudi Arabia
 6) Bhutan
23) Korea (South)
40) Singapore
7) Brunei
24) Kuwait
41) Sri Lanka
8) Cambodia
25) Kyrgyzstan
42) Syria
9) China
26) Laos
43) Taiwan
10) Cyprus
27) Lebanon
44) Tajikistan
11) East Timor
28) Macau
45) Thailand
12) Georgia
29) Malaysia
46) Turkmenistan
13) Hong Kong
30) Mongolia
47) United Arab Emirates
14) India
31) Myanmar (Burma) 48) Uzbekistan
15) Indonesia
32) Nepal
49) Vietnam
16) Iran
33) Oman
50) Yemen
17) Iraq
34) Pakistan
?输入9，中国
Please select one of the following time zone regions.
1) east China - Bejing, Guangdong, Shanghai, etc.
---
## Page 55
2) Heilongjiang
3) central China - Gansu, Guizhou, Sichuan, Yunnan, etc.
4) Tibet & most of Xinjiang Uyghur
 5) southwest Xinjiang Uyghur
#？输入1，北京时间
The following information has been given:
China
east China - Beijing, Guangdong, Shanghai, etc.
Therefore TZ=′Asia/Shanghai' will be used.
Local time is now:
Fri Jul 7 10:32:18 CST 2006.
Universal Time is now: Fri Jul  7 02:32:18 UTC 2006.
Is the above information OK?
1) Yes
2) No
#？输入1，确认
如果不用tzselect命令，可以修改文件变更时区。
# vi /etc/sysconfig/clock
Z/Shanghai (查/usr/share/zoneinfo 下i面i的文件)
UTC=false
ARC=false
# rm /etc/localtime
# In -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime
重新启动即可。
2.4、图形界面设置时区命令timeconfig
2.5、时间同步
例1：同步时间
# ntpdate 210.72.145.44
（210.72.145.44是中国国家授时中心的官方服务器）
例2：定时同步时间
#crontab-e添加脚本例子如下：
*/20 * * * *
/usr/sbin/ntpdate 210.72.145.44
//每20分钟执行一次
30 5 * * *
/usr/sbin/ntpdate 210.72.145.44
//每天早晨5点半执行
※前面五个*号代表五个数字，数字的取值范围和含义如下：分钟（0-59）小时（0-23）日期（1-31）
月份（1-12）星期（0-6）//0代表星期天设定完毕后，可使用#crontab-1查看上面的设定。
八、启动引导
1、Linux的启动流程
1) BIOS 自检
2）启动 GRUB/LILO
3)运行 Linux kernel 并检测硬件
4）挂载根文件系统
5）运行Linux系统的第一个进程init（其PID永远为1，是所有其它进程的父进程）
6)init读取系统引导配置文件/etc/inittab中的信息进行初始化
---
## Page 56
7）执行系统初始化脚本一/etc/rc.d/rc.sysinit，执行系统初始化（包括很多内容)
8)根据指定的运行级别（runlevell来运行服务器脚本程序，再执行脚本/etc/rc.d/rc.local
9）运行一些其他的特别服务，
一般为/sbin/mingetty和1/etc/X11/prefdm
10)Linux控制台（console)提示用户输入用户名、密码进行登陆。
总结：BIOS初始化→检查外围设备→检查启动设备→读区MBR
Linux
亲统启动流程简圈
LILO
BIOS
Linuxkernel
init
Read
/etc/inittab
/etc/re.d/
rc.sysinit
RunLevel3
RunLevel 5
/etc/re.d/
Other Progarms
/etc/re.d/
rc3
in/etc/inittab
re5
Login
Shell
2、在Linux中常用的启动引导工具：grub和lilo
在Linux和 WINDOWS两系统并存时就需要安装 GRUB（Grand Unified Bootloader），GRUB 被广泛地
用于替代lilo,GRUB支持在启动时使用命令行模式，支持mdS加密保护还可以从ext2/ext3、ReiseFS、JFS、
FAT、minix及FFS文件系统上启动其配置文件为/boot/grub/grub.conf,更改grub.conf 即可立时生效如果
硬盘上的MBR被更动过，可以用/sbin/grub-install/dev/hda来重安装grub现在我们打开
/boot/grub/grub.conf 查看—下
# vim /boot/grub/grub.conf
内容如下：
# grub.conf generated by anaconda
#
# Note that you do not have to rerun grub after making changes to this file
# NOTICE: You have a /boot partition. This means that
#
all kernel and initrd paths are relative to /boot/, eg.
root (hdo,0)
并
kernel /vmlinuz-version ro root=/dev/sda2
---
## Page 57
#
initrd /initrd-version.img
#boot=/dev/sda
default=0
#default=0表示默认启动第一个系统，如果系统有两个系统是用什么做为分隔符的呢？title就是系统的分
隔符，第一个title后面就是第一个系统，用0表示。
timeout=5
#timout=5，就是默认在启动选择界面停留的时间，单位是秒。等待5秒自动进入默认操作系统
splashimage=(hdo,0)/grub/splash.xpm.gz
#splashimage是grub启动背景画面，如果是自己写grub.conf文件，这个可以不用写。
hiddenmenu
title RedHatEnterpriseLinuxServer(2.6.18-53.el5)
#title后面就是系统在启动时候显示的名字
root (hd0,0)
#root 启动文件所在位置
kernel/vmlinuz-2.6.18-53.el5roroot=LABEL=/rhgb quiet
#kernel内核所在位置和名字
initrd/initrd-2.6.18-53.el5.img
#initrd内核镜象的名字
grub.conf的范例：
timeout=10
#等待10秒自动进入默认操作系统
splashimage=(hd0,0)/grub/splash.xpm-gz #grub 启动背景画面
default=0#默认进入第一个标题
title Red Hat Linux (2.4.20-18)#Red Hat Linux 标题
root（hd0.0）#根文件系统位置
kemel/vmlinuz-2.4.20-18 ro root=LABEL=/ #核心位置与核心加较参数
initrd /initrd-2.4.20-18.img#启动) initrd ram 盘
title windows
#另一个操作系统的标题
rootnoverify (hd0,1）#操作系统存放在hd0,1上，不要在 grub里mount
chainloader+1#从hd0,1的第一个扇面启动
九、运行级别
1、Linux系统的运行级别（runlevel)
Linux系统有7个运行级别，Linux系统任何时候都运行在一个指定的运行级别上，不同的运行级
别所运行的程序和服务不尽相同，所要完成的工作和要达到的目的也不相同
·运行级别0系统停机（halt）状态，系统的默认运行级别不能设为0，否则不能正常启动
·运行级别1单用户工作(single user)状态，root 权限，用于系统维护，禁止远程登陆
·运行级别2多用户（multiuser)状态（没有NFS）
·运行级别3完全的多用户(muliuser)状态（有 NFS)，登陆后进入控制台命令行模式
·运行级别4系统未使用，保留
·运行级别5X11控制台（xdm、gdm、kdm)，登陆后进入图形GUI模式
---
## Page 58
·运行级别6系统正常关闭并重启（reboot)，默认运行级别不能设为6，否则不能正常启动
2、运行级别的原理
在目录/etc/rc.d/init.d下有许多服务器脚本程序，一般称为服务（service)，在/etc/rc.d下
有7个名为rcN.d的目录，其中N=0-6，对应于系统的7个运行级别，rcN.d目录下，都是
一些符号链接文件，这些链接文件都指向init.d目录下的service脚本文件，这些链接文件的命
名规则是“K+nn+服务名”或“S+nn+服务名"，其中nn为2位数字：
例：rc3.d目录下的链接文件S80sendmail就指向service脚本文件/init.d/sendmail
系统会根据指定的runlevel进入对应的rcN.d目录，并按照文件名顺序检索目录下的链接文件
·对于以K为开头的链接文件，系统将终止对应的服务
·对于以S为开头的链接文件，系统将启动对应的服务
通过这种方式来实现“不同的运行级别运行不同的程序和服务”
3、/etc/inittab配置文件详解
init的进程号是1，从这一点就能看出，init进程是系统所有进程的起点，Linux在完成核内引导以后，
就开始运行init程序，init程序需要读取设置文件/etc/inittab。inittab是个不可执行的文本文件，他有若
干行指令所组成。在Redhat系统中，inittab的内容如下所示（以“#"开始的中注释为笔者增加的）：
（如果你改变了inittab文件，那么要使他立即生效，需要使用一个命令：initq）
#
# inittab
This file describes how the INIT process should set up
#
the system in a certain run-level.
#
# Author:
Miquel van Smoorenburg, 
#
Modified for RHS Linux by Marc Ewing and Donnie Barnes
#
# Default runlevel. The runlevels used by RHS are:
#
0 - halt (Do NOT set initdefault to this)
 1 - Single user mode
 2 - Multiuser, without NFS (The same as 3, if you do not have networking)
#
 3 - Full multiuser mode
#
4 - unused
#5-X11
6 - reboot (Do NOT set initdefault to this)
#
##表示当前缺省运行级别为5(initdefault)：
id:5:initdefault:
##启动时自动执行/etc/rc.d/rc.sysinit 脚本(sysinit)
# System initialization.
si::sysinit:/etc/rc.d/rc.sysinit
I0:0:wait:/etc/rc.d/rc 0
11:1:wait:/etc/rc.d/rc 1
2:2:wait:/etc/rc.d/rc 2
---
## Page 59
13:3:wait:/etc/rc.d/rc 3
14:4:wait:/etc/rc.d/rc 4
##当运行级别为5时，以5为参数运行/etc/rc.d/rc脚本，init将等待其返回（wait)
15:5:wait:/etc/rc.d/rc 5
16:6:wait:/etc/rc.d/rc 6
###在启动过程中允许按CTRL-ALT-DELETE重启系统
# Trap CTRL-ALT-DELETE
ca:ctrlaltdel:/sbin/shutdown -t3 -r now
# When our UPS tells us power has failed, assume we have a few minutes
# of power left. Schedule a shutdown for 2 minutes from now.
# This does, of course, assume you have powerd installed and your
# UPS connected and working correctly.
pf:powerfail:/sbin/shutdown -f -h +2 *Power Failure; System Shutting Down”
# If power was restored before the shutdown kicked in, cancel it.
pr:12345:powerokwait:/sbin/shutdown -c "Power Restored; Shutdown Cancelled*
##在2、3、4、5级别上以ttyX为参数执行/sbin/mingetty程序，打开ttyX终端用于用户登录，
##如果进程退出则再次运行mingetty程序(respawn)
# Run gettys in standard runlevels
1:2345:respawn:/sbin/mingetty tty1
2:2345:respawn:/sbin/mingetty tty2
3:2345:respawn:/sbin/mingetty tty3
4:2345:respawn:/sbin/mingetty tty4
5:2345:respawn:/sbin/mingetty tty5
6:2345:respawn:/sbin/mingetty tty6
##在5级别上运行xdm程序，提供xdm图像方式登录界面，并在退出时重新执行（respawn)
# Run xdm in runlevel 5
x:5:respawn:/etc/X11/prefdm -nodaemon
以上面的inittab文件为例，来说明一下inittab 的格式。其中以#开始的行是注释行，除了注释行之
外，每一行都有以下格式：
id:runlevel:action:process
对上面各项的周详解释如下：
1. id
号相同，否则getty程序将不能正常工作。
---
## Page 60
2. runlevel
runlevel是init所处于的运行级别的标识，一般使用0一6及S或s.0、1、6运行级别被系统保留：
其中0作为shutdown动作，1作为重启至单用户模式，6为重启：S和s意义相同，表示单用户模式，
且无需inittab文件，因此也不在inittab 中出现，实际上，进入单用户模式时，init直接在控制台
（/dev/console）上运行/sbin/sulogin。在一般的系统实现中，都使用了2、3、4、5儿个级别，在Redhat
系统中，2表示无NFS支持的多用户模式，3表示完全多用户模式（也是最常用的级别），4保留给用户
自定义，5表示XDM图像登录方式。7一9级别也是能使用的，传统的Unix系统没有定义这几个级别。
runlevel能是并列的多个值，以匹配多个运行级别，对大多数action来说，仅当runlevel和当前运行级
别匹配成功才会执行。