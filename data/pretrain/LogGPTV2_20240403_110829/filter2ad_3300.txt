title:LokVaani: demonstrating interactive voice in Lo3
author:Vijay Gabale and
Bhaskaran Raman and
Kameswari Chebrolu and
Purushottam Kulkarni
LokVaani: Demonstrating Interactive Voice in Lo3
Vijay Gabale, Bhaskaran Raman, Kameswari Chebrolu, and Purushottam Kulkarni
Dept. of Computer Science, IIT Bombay
PI:EMAIL, PI:EMAIL, PI:EMAIL,
Mumbai, Maharashtra, India
PI:EMAIL
ABSTRACT
In this work, we consider the goal of enabling eﬀective voice
communication in a TDMA, multi-hop mesh network, using
low cost and low power platforms. We consider two primary
usage scenarios: (1) enabling a local voice communication
within a village-like setting, in developing regions (2) sup-
porting an on-site local communication among a team of
users e.g. during emergency response systems.
While there is plentiful literature on the use of TDMA
for multi-hop wireless mesh networks, a practical multi-hop
TDMA system remains elusive. Our contributions in this
regard are three-fold. (1) We demonstrate the working of
an 802.15.4-based low-cost, low-power, local communica-
tion system (referred as Lo3) using custom made handsets
and oﬀ-the-shelf platforms. (2) We show the practicability
of LiT: a full-ﬂedged TDMA-based multi-hop, multi-channel
MAC protocol for real-time applications; especially on re-
source constrained platforms, (3) We present implementation-
based evaluations results of LiT and show that our protocol
achieves practical synchronization, and robust operation in
the face of wireless packet errors. As the part of the demo,
we showcase LokVaani: an interactive voice application for
local communication with the help of Lo3 prototype.
Categories and Subject Descriptors
C.2.1 [Computer-Communication Networks]: Network
Architecture and Design—Centralized networks, Wireless com-
munication
General Terms
Design, Experimentation
Keywords
802.15.4, TDMA-based multi-hop MAC, Voice applications
1.
INTRODUCTION
In this work, we consider the goal of enabling eﬀective
voice communication in a multi-hop wireless mesh network,
especially using low cost and low power platforms. To achieve
this goal, we envision Lo3 [1], a low-cost, lo-power, local
communication system using 802.15.4 technology. In Lo3,
we wish to enable applications such as two-way interactive
Copyright is held by the author/owner(s).
SIGCOMM’10, August 30–September 3, 2010, New Delhi, India.
ACM 978-1-4503-0201-2/10/08.
Figure 1: LokVaani: Demonstrating an interactive
voice in Lo3
voice, stored voice messaging and community alerts. Such a
system can be viewed as a PABX (private automatic branch
exchange), for use within a village. This system can also
be used to support an on-site local communication among a
team of users e.g. during emergency response. The use of
mesh network helps reduce the cost of the network and we
envision the overall infrastructure cost to be about U.S.$1-
2K (Sec. 3).
While 802.15.4 is most appropriate for Lo3, it was orig-
inally designed for embedded wireless messaging and it is
quite challenging to enable an eﬀective voice communica-
tion on low data rate (250Kbps), duty cycled resource con-
stained platforms. In this regard, our work makes following
contributions.
• Importantly, we demonstrate the working of an 802.15.4
based Lo3 prototype through custom-made handsets and oﬀ-
the-shelf Tmote-Sky platforms.
• We show the practicability of LiT: a full-ﬂedged TDMA-
based, centrally-controlled, multi-hop, multi-channel MAC
protocol for real-time applications; especially on resource
constrained platforms.
• We present implementation-based evaluations results of
LiT and show that our protocol achieves practical synchro-
nization, and robust operation in the face of wireless packet
errors, while having minimal control overhead.
As the part of the demo, we showcase LokVaani: an in-
teractive voice application for local communication with the
help of Lo3 prototype. As shown in Fig. 1, we establish a
two-way interactive voice call using 802.15.4-enabled mobile
handsets. The call is routed through a multi-hop mesh net-
work. The nodes in the network run the LiT MAC protocol.
461gracefully.
In our evaluation, we have found that such a
soft-state based approach has minimal overhead while being
eﬀective.
3. LOKVAANI: DEMONSTRATING INTER-
ACTIVE VOICE
We now describe the set up of LokVaani for demonstrat-
ing interactive voice in Lo3 system. Lo3 has two types of
nodes (1) infrastructure nodes which serve as intermediate
nodes for broadcasting control packets and supporting data
ﬂows (2) handset nodes which originate voice calls1. The
network activities are centrally-controlled by a special in-
frastructure node, root. For infrastructure nodes, we employ
802.15.4 based Tmote-sky platform which uses an MSP 430
micro-controller and CC2420 radio. It runs TinyOS (v2.1.0)
software platform. Our initial experimentation showed that
the Tmote-sky platform is not powerful enough to handle
voice processing for implementing handset functionalities.
Hence, for handset nodes, we have built a custom hand-
set using TI-based C5505 USB stick module. In our hand-
set, we interfaced this C5505 module with the 802.15.4 com-
pliant CC2520 radio. The C5505 USB stick module has a
TMS320VC5505 DSP (100Mhz CPU, 320 KB RAM) which
eﬀectively supports voice processing. The stick also has a
AIC 3204 codec chip which enables voice input and output
functions. The voice sampled by AIC 3204 at 64kbps is
encoded into a 5.9kbps voice stream using a Speex imple-
mentation on the C5505 DSP platform.
We now describe the working of LokVaani: an interactive
voice in the Lo3 prototype which will be shown in the demo.
As shown in a sample set up in Fig. 1, out of 9 nodes, 7 nodes
are used as infrastructure nodes and 2 nodes as handsets.
LiT TDMA MAC is implemented on all the nodes. We set
the TDMA frame length to be 60ms (approx) comprising
of 1 control slot of 12ms, 1 contention slot of 10ms and 4
data slots, each of 9ms (approx). Now, we enable a two-
way interactive voice between two 802.15.4 handsets. The
5.9kbps Speex codec generates 15 bytes every 20ms. Thus,
the 45 byte packets generated every 60 ms by the source are
transmited to destination over multiple hops in the network.
We thoroughly evaluated LiT on a 19-node testbed. To
quantify the performance of time synchronization mecha-
nism (important for any TDMA system), we measure the
relative clock drift between the sending and receiving nodes.
This value is largely 1 or 2 ticks (1 tick corresponds to
30.5µs) over 30 second period which is quite eﬀective . Next,
we measure the usage of the contention slots over multiple
hops (since contention slots are used for call set-up). The
usage is mostly less than 2% leaving enough contention slots
for use. The worst-case ﬂow-set-up latency is 2 sec which is
very much tolerable in practice. The data-path delay (which
is function of number of hops) is mostly less than 300ms.
The average jitter in data-path is also quite small (1-2ms)
leading to a MOS socre of 3.8 (considered good in practice).
These results demonstrate the suitability of LiT for real-time
voice.
4. REFERENCES
[1] B. Raman and K. Chebrolu. Lo3: Low-cost,
Low-power, Local Voice and Messaging for Developing
Regions. In NSDR’09, Oct 2009.
1Handset nodes never serve as intermediate nodes.
Figure 2: Design of LiT
To our knowledge, ours is the ﬁrst system to demonstrate
the working of a wireless multi-hop TDMA system for real-
time applications.
2. DESIGN OF THE LIT MAC
What is challenging in the design of LiT? We have to
support real-time (and non real-time) applications for Lo3,
in the face of several non-trivial requirements: (1) built-
in time-synchronization (2) dynamic routing (3) dynamic
ﬂow setup and tear-down (4) ﬂexibility in accommodating
scheduling algorithm (5) robust and graceful handling of
wireless errors (6) duty-cycling support.
Fig. 2 describes how LiT is designed to address the above
requirements. There are four important design choices in
LiT which enable its practical implementation. (1) LiT is
TDMA-based. A TDMA system provides good support
for scheduling and duty-cycling over multi-hop mesh net-
works. As shown in Fig. 2, the TDMA MAC frame has
three-types of slots, control for broadcasting the schedule
information in the network over multiple hops, contention
for infrequent routing and ﬂow-set-up messaging and data
for carrying data (voice) packets end-to-end.
(2) LiT is
centrally controlled, which lends itself to a simpler de-
sign for coordinating network tree (routing), time-slots and
multiple channels (scheduling) as compared to a distributed
approach, especially in a multi-hop network. Fig. 2 shows a
centrally computed control schedule and data schedule for
broadcasting over multiple hops. (3) LiT is multi-channel
capable which gives better throughput than single channel,
if the channel coordination can be done eﬃciently. Our
centralized-TDMA-based approach eases the issue of multi-
channel coordination signiﬁcantly. The same slotting mech-
anism used by the TDMA mechanism is also used as the
granularity of any channel switching (i.e. slot level switch-
ing). (4) LiT is connection-oriented which means that
a higher layer can use it only after a connection formation
phase. With central control, the connection formation phase
is used to specify the time-slot and channel of operation of
each node in a data ﬂow path.
Apart from these choices, LiT makes extensive use of soft-
state based mechanisms for maintaining network state and
handling wireless errors gracefully. Soft-state is especially
used to avoid inconsistencies in schedule dissemination over
multiple hops that may arise due loss of schedule packets and
to maintain routing state at the root to handle node failures
462