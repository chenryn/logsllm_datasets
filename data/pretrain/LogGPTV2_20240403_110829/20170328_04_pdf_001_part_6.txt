RETURNS DOUBLE PRECISION
LANGUAGE SQL
DETERMINISTIC
CONTAINS SQL
RETURNS NULL ON NULL INPUT,
7.2.18 SQL routines on type MultiLineString
7.2.18.1 Supported routines
The SQL/MM routines supported by GeomCollection shall be supported for geometries of type
MultiLineString.
Copyright © 2007 Open Geospatial Consortium, Inc. All Rights Reserved. xlix
OGC 06-104r4 Copyright © 2007 Open Geospatial Consortium, Inc. All Rights Reserved.
7.2.18.2 Declarations from SQL/MM (informative)
CREATE TYPE ST_MultiLineString
UNDER ST_MultiCurve
INSTANTIABLE
NOT FINAL
OVERRIDING METHOD ST_Geometries()
RETURNS ST_LineString ARRAY[ST_MaxGeometryArrayElements],
OVERRIDING METHOD ST_Geometries(ageometryarray ST_Geometry
ARRAY[ST_MaxGeometryArrayElements])
RETURNS ST_MultiLineString
7.2.19 SQL routines on type MultiSurface
7.2.19.1 Supported routines
The SQL/MM ST_Centroid, ST_PointOnSurface, and ST_Area routines and the routines
supported by GeomCollection shall be supported for geometries of type MultiSurface.
7.2.19.2 Declarations from SQL/MM (informative)
CREATE TYPE ST_MultiSurface
UNDER ST_GeomCollection
INSTANTIABLE
NOT FINAL
METHOD ST_Centroid()
RETURNS ST_Point
LANGUAGE SQL
DETERMINISTIC
CONTAINS SQL
RETURNS NULL ON NULL INPUT,
Copyright © 2007 Open Geospatial Consortium, Inc. All Rights Reserved.
Copyright © 2007 Open Geospatial Consortium, Inc. All Rights Reserved. OGC 06-104r4
METHOD ST_PointOnSurface()
RETURNS ST_Point
LANGUAGE SQL
DETERMINISTIC
CONTAINS SQL
RETURNS NULL ON NULL INPUT,
METHOD ST_Area()
RETURNS DOUBLE PRECISION
LANGUAGE SQL
DETERMINISTIC
CONTAINS SQL
RETURNS NULL ON NULL INPUT,
METHOD ST_Area(aunit CHARACTER VARYING(ST_MaxUnitNameLength))
RETURNS DOUBLE PRECISION
LANGUAGE SQL
DETERMINISTIC
CONTAINS SQL
RETURNS NULL ON NULL INPUT,
OVERRIDING METHOD ST_Geometries()
RETURNS ST_Surface ARRAY[ST_MaxGeometryArrayElements],
OVERRIDING METHOD ST_Geometries
(ageometryarray ST_Geometry
ARRAY[ST_MaxGeometryArrayElements])
RETURNS ST_MultiSurface
7.2.20 SQL routines on type Text
The Annotation_Text, Annotation_Text_Element, and Annotation_Text_Element_Array
provide text functionality as SQL objects.
CREATE TYPE ANNOTATION_TEXT AS
{
PrivateEnvelope AS GEOMETRY,
PrivateElement_Array AS ANNOTATION_TEXT_ELEMENT_ARRAY
}
Copyright © 2007 Open Geospatial Consortium, Inc. All Rights Reserved. li
OGC 06-104r4 Copyright © 2007 Open Geospatial Consortium, Inc. All Rights Reserved.
CONSTRUCTOR METHOD ANNOTATION_TEXT(anArray ANNOTATION_TEXT_ELEMENT_ARRAY)
RETURNS ANNOTATION_TEXT
SELF AS RESULT
LANGUAGE SQL
DETERMINISTIC
CONTAINS SQL
RETURNS NULL ON NULL INPUT,
METHOD CONCAT(b ANNOTATION_TEXT)
RETURNS ANNOTATION_TEXT
SELF AS RESULT
LANGUAGE SQL
DETERMINISTIC
CONTAINS SQL
RETURNS NULL ON NULL INPUT,
METHOD ENVELOPE ()
RETURNS GEOMETRY
LANGUAGE SQL
DETERMINISTIC
CONTAINS SQL
RETURNS NULL ON NULL INPUT
METHOD ELEMENT_ARRAY ()
RETURNS ANNOTATION_TEXT_ELEMENT_ARRAY
LANGUAGE SQL
DETERMINISTIC
CONTAINS SQL
RETURNS NULL ON NULL INPUT
CREATE TYPE ANNOTATION_TEXT_ELEMENT_ARRAY AS
VARING ARRAY (MaxArraySize) OF ANNOTATION_TEXT_ELEMENT,
Copyright © 2007 Open Geospatial Consortium, Inc. All Rights Reserved.
Copyright © 2007 Open Geospatial Consortium, Inc. All Rights Reserved. OGC 06-104r4
METHOD ElementN (aposition INTEGER)
RETURNS ANNOTATION_TEXT_ELEMENT
LANGUAGE SQL
DETERMINISTIC
CONTAINS SQL
RETURNS NULL ON NULL INPUT
METHOD ElementN (element ANNOTATION_TEXT_ELEMENT
aposition INTEGER)
RETURNS ANNOTATION_TEXT_ELEMENT_ARRAY
SELF AS RESULT
LANGUAGE SQL
DETERMINISTIC
CONTAINS SQL
RETURNS NULL ON NULL INPUT
CREATE TYPE ANNOTATION_TEXT_ELEMENT AS
(
privateValue AS CHARACTER VARYING (MaxArraySize),
privateLocation AS GEOMETRY,
privateLeaderLine AS GEOMETRY,
privateTextAttributes AS CHARACTER VARYING (MaxArraySize)
)
CONSTRUCTOR METHOD AnnotationTextElement
( value CHARACTER VARYING (MaxArraySize),
location GEOMETRY,
leaderLine GEOMETRY,
textAttributes CHARACTER VARYING (MaxArraySize))
RETURNS ANNOTATION_TEXT_ELEMENT
SELF AS RESULT
LANGUAGE SQL
DETERMINISTIC
CONTAINS SQL
RETURNS NULL ON NULL INPUT,
METHOD Value ()
RETURNS CHARACTER VARYING (MaxArraySize)
LANGUAGE SQL
DETERMINISTIC
CONTAINS SQL
RETURNS NULL ON NULL INPUT,
Copyright © 2007 Open Geospatial Consortium, Inc. All Rights Reserved. liii
OGC 06-104r4 Copyright © 2007 Open Geospatial Consortium, Inc. All Rights Reserved.
METHOD Value (value RETURNS ANNOTATION_TEXT_ELEMENT
RETURNS ANNOTATION_TEXT_ELEMENT
SELF AS RESULT
LANGUAGE SQL
DETERMINISTIC
CONTAINS SQL
RETURNS NULL ON NULL INPUT,
METHOD TextAttributes ()
RETURNS CHARACTER VARYING (MaxArraySize)
LANGUAGE SQL
DETERMINISTIC
CONTAINS SQL
RETURNS NULL ON NULL INPUT,
METHOD TextAttributes (attributes CHARACTER VARYING (MaxArraySize))
RETURNS ANNOTATION_TEXT_ELEMENT
SELF AS RESULT
LANGUAGE SQL
DETERMINISTIC
CONTAINS SQL
RETURNS NULL ON NULL INPUT,
METHOD Location ()
RETURNS GEOMETRY
LANGUAGE SQL
DETERMINISTIC
CONTAINS SQL
RETURNS NULL ON NULL INPUT,
METHOD Location (location GEOMETRY)
RETURNS ANNOTATION_TEXT_ELEMENT
SELF AS RESULT
LANGUAGE SQL
DETERMINISTIC
CONTAINS SQL
RETURNS NULL ON NULL INPUT,
Copyright © 2007 Open Geospatial Consortium, Inc. All Rights Reserved.
Copyright © 2007 Open Geospatial Consortium, Inc. All Rights Reserved. OGC 06-104r4
METHOD LeaderLine ()
RETURNS GEOMETRY
LANGUAGE SQL
DETERMINISTIC
CONTAINS SQL
RETURNS NULL ON NULL INPUT,
METHOD LeaderLine (leaderLine GEOMETRY)
RETURNS ANNOTATION_TEXT_ELEMENT
SELF AS RESULT
LANGUAGE SQL
DETERMINISTIC
CONTAINS SQL
RETURNS NULL ON NULL INPUT
Copyright © 2007 Open Geospatial Consortium, Inc. All Rights Reserved. lv
OGC 06-104r4 Copyright © 2007 Open Geospatial Consortium, Inc. All Rights Reserved.
Annex A
(normative)
Abstract Test Suite
A.1 Purpose of this annex
This annex outlines the requirements for a comprehensive test suite for each class of compliance for this standard.
Each conformance clause defined in Section A.2 will address testing methods for a coherent set of requirements
from the normative Clauses in this standard or other standards. Each compliance level or class, defined in Section
A.4 below, will address a specified set of conformance clauses.
Some of the conformance clauses are "parameterize" in the sense that they specify use of "appropriate" test from
another clause. This is done to keep the number of clauses to a minimum while allowing for a finer degree of
separation between conformance classes. Each time a parameterized conformance clause is used in defining an
conformance class, it parameter must be specified.
A.2 Conformance Tests
A.2.1 Feature tables
Test Purpose: To test the capability to create, access, query and modify feature tables (Section 7.1.4 or 7.2.3)
and using the appropriate geometric types, as defined in the associated geometry conformance clause.
Test Method: Each test will consist of:
a) Reading a feature schema from a set of SQL statements
b) Loading feature and geometry tables from a set of text load files containing SQL statements, or file of
similar content as defined for the SQL version being used.
c) Making attribute and spatial queries against the table so loaded above
d) Getting an acceptable answer as tested by an export of the query results defined above.
A.2.1.1 Features using geometry in predefined types
Use the feature implementation defined in 7.1.4.
A.2.1.2 Features using Binary or SQL geometry types
Use the feature implementation defined in 7.2.3.
Copyright © 2007 Open Geospatial Consortium, Inc. All Rights Reserved.
Copyright © 2007 Open Geospatial Consortium, Inc. All Rights Reserved. OGC 06-104r4
A.2.2 Geometry tables or type
A.2.2.1 Normalized geometry schema
Test Purpose: To test the capability to create, access, query and modify feature spatial attributes using the
appropriate geometric implementation as described in Clauses 6.1.5.1 Normalized geometry schema, 7.1.5.2
Geometry stored using SQL numeric types with metadata as in 7.1.5,Geometry columns information.
Test Method: Each test will consist of:
a) Incorporating the appropriate geometric types in the feature table test of A.2.1
A.2.2.2 Binary geometry
Test Purpose: To test the capability to create, access, query and modify feature spatial attributes using the
appropriate geometric types, Section 6.1.5.2 Binary geometry schema, 7.1.5.3 Geometry stored using SQL binary
types with metadata as in 7.1.3,Geometry columns information.
Test Method: Each test will consist of:
a) Incorporating the appropriate geometric types in the feature table test of A.2.1
A.2.2.3 SQL/MM geometry schema
Test Purpose: To test the capability to create, access, query and modify feature spatial attributes using the
appropriate geometric types, Section 6.1.5.3 SQL/MM geometry schema, 7.2 Components — SQL with Geometry
Types implementation of feature tables, with metadata as in 7.1.3,Geometry columns information.
Test Method: Each test will consist of:
a) Incorporating the appropriate geometric types in the feature table test of A.2.1
A.2.3 Spatial reference systems
A.2.3.1 2D Spatial reference systems
Test Purpose: To test the capability of creating, and using 2D coordinate systems, coordinates in X and Y.
Test Method: Each test will consist of:
a) Defining a 2D coordinate systems compatible with a test feature and geometry test as defined in A.2.1,
and A.2.1.1, for geometries compatible with a 2D coordinate system
b) Execute the test as defined, and obtain appropriate query results.
Copyright © 2007 Open Geospatial Consortium, Inc. All Rights Reserved. lvii
OGC 06-104r4 Copyright © 2007 Open Geospatial Consortium, Inc. All Rights Reserved.
A.2.3.2 3D Spatial reference systems
Test Purpose: To test the capability of creating, and using 3D coordinate systems, coordinates in X, Y and Z. This
includes the capability to create both 2D and 3D coordinate systems and to use them to describe geometry values.
Test Method: Each test will consist of:
a) All tests in A.2.3.1
b) Defining a 3D coordinate systems compatible with a test feature and geometry test as defined in A.2.1,
and A.2.1.1, for geometries compatible with a 3D coordinate system
c) Execute the test as defined, and obtain appropriate query results.
Note: Spatial reference systems must still be defined on a column basis, and a feature table shall not mix
geometry values from different spatial reference systems within a single attribute column.
A.2.3.3 Measured Spatial reference systems
Test Purpose: To test the capability of creating, and using Measured coordinate systems coordinates having an M.
This includes the ability to create geometry values both with and without measured coordinates.
Test Method: Each test will consist of:
a) Defining a measured coordinate systems compatible with a test feature and geometry test as defined in
A.2.1, and A.2.1.1, for geometries compatible with a measured coordinate system
b) Execute the test as defined, and obtain appropriate query results.
Note: Spatial reference systems must still be defined on a column basis, and a feature table shall not mix
geometry values from different spatial reference systems within a single attribute column.
A.2.4 Geometric format supported
Test Purpose: To test the capability of creating and using geometric values in a particular representation format
from one of the following Clauses.
A.2.4.1 Geometry stored using SQL numeric types
Perform the test using Section 7.1.5.2 Geometry stored using SQL numeric types (Table)
Copyright © 2007 Open Geospatial Consortium, Inc. All Rights Reserved.
Copyright © 2007 Open Geospatial Consortium, Inc. All Rights Reserved. OGC 06-104r4
A.2.4.2 Geometry stored using SQL binary types
Perform the test using Section 7.1.5.3 Geometry stored using SQL binary types (Binary Type)
A.2.4.3 SQL Geometry Types
Perform the test using Section 7.2.2 SQL Geometry Types (SQL Type)
A.2.5 Geometric categories supported
Test Purpose: To test the capability of creating and using geometric types as defined in the subclauses below
Test Method: Each test will consist of
a) Perform a test from Conformance Clause A.2 using appropriate geometry types.
b) Creating and using geometry types including those defined in this Section according to the types defined
in the appropriate section as listed below.
A.2.5.1 Basic Geometric categories supported
Perform the test with types in Part 1 Section 6.1.3 through 6.1.15, except 6.1.12
A.2.5.2 Tins and Basic Geometric categories supported
Perform the test with types the basic test and with the addition of TINs for 6.1.12.
A.2.5.3 Full Geometric categories supported
Perform the test with types in Part 1 Section 6.1.3 through 6.1.15.
A.2.6 Text
Test purpose: To test the capability of creating and using annotations of the appropriate types from one of the
following Clauses.
a) Section 6.2.9 (using predefined types – a table implementation)
b) Section 7.2.20 (using SQL UDT types)
Note: No binary implementation of annotations has been specified.
A.2.6.1 Text using predefined types supported
Perform the test with annotation text as defined in Section 6.2.9 (using predefined types – a table implementation)
Copyright © 2007 Open Geospatial Consortium, Inc. All Rights Reserved. lix
OGC 06-104r4 Copyright © 2007 Open Geospatial Consortium, Inc. All Rights Reserved.
A.2.6.2 Text using SQL UDT types supported
Perform the test with annotation text as defined in Section 7.2.20 (using SQL UDT types)
A.3 Composite Conformance Clauses
A.4 Conformance Classes
A.4.1 Types of conformance classes
All conformant applications (SQL data servers) must support features (one of the tests in A.2.1), but may support
the other aspects of this standard dependent on a set of five choices. Conformance class choices are base on the
following parameters:
a) Format of geometry supported
gT (table using predefined types) (not valid with M, 3D, or Text S)) A.2.4.1 and A.2.1.1
gB (binary type) (tests A.2.4.2 and A.2.1.2) or
gS (SQL type) ( tests A.2.4.3 and A.2.1.2)
b) Types of geometry supported
b - Basic (no polyhedral surfaces) A.2.5.1,
t - Basic plus TINS (must be 3D) A.2.5.2 or
f - Full (must be 3D) A.2.5.3
c) Dimension of coordinate systems supported
2D (two-dimensional) A.2.3.1 or
3D (3-dimensional) includes 2D (test A.2.3.2) (only valid with geometry choices gB or gS)
d) Measured or unmeasured Coordinate system
M (measured) (only valid with geometry B or S) (test A.2.3.3) or
N (not measured) (no additional test)
e) Types of annotation text supported
tT - table using predefined types) (test A.2.6.1) (valid only with geometry gB) (no additional test) or
tS - SQL type (only valid with geometry gS) (test A.2.6.2) or
tN - no text support (no additional tests), included for compatibility of SFA v1.1 (earlier) versions
This means that a conformance class may be defined by a string of 5 characters from the list above in order sbject
to the restrictions listed.
Copyright © 2007 Open Geospatial Consortium, Inc. All Rights Reserved.
Copyright © 2007 Open Geospatial Consortium, Inc. All Rights Reserved. OGC 06-104r4
For example, the maximum compliance level for SQL types is (gS, f, 3D, M, tS). The minimal compliance level for
v1.1, table geometry is (gT, b, 2D, N, tN). The other equivalences between V1.1 conformance classes () and
those in this version are given in Table A 1.
Table A 1 - Equivalences between V1.1 and V1.2 complinace classes
V1.1 Conformance Class Equivalent V1.2 Conformance Class
Normalized geometry schema (gT, b, 2D, N, tN)
Binary geometry schema (gB, b, 2D, N, tN)