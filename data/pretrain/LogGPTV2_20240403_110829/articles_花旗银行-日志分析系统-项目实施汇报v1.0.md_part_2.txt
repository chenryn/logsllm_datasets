  juniper防火墙   花旗两台数据主机对外事物量趋势            曲线图的形式展现
                  端口状态更改                              表格的形式展现
                  用户登录记录                              表格的形式展现
                  策略修改记录                              表格的形式展现
                  策略修改详细记录                          表格的形式展现
  交换机路由器    端口状态更改记录                          表格的形式展现
  -------------------------------------------------------------------------------------------------------------------------------------
### 需求实现方式
2.2.2章节的需求，实现的方式概述如下表：
  ----------------------------------------------------------------------------------------------------------------------------------------------
  **操作系统\                                                    **需求项**          **应用的windows log中的事件ID**
  (win7/2008和winxp日志信息以及格式不一致)**                                         
  -------------------------------------------------------------- ------------------- -----------------------------------------------------------
  **win2008-win7**                                               用户登录成功        EventCode:4624
                                                                 用户登录失败        EventCode:4625
                                                                 用户被锁定          EventCode:4740
                                                                 创建用户            EventCode:4720
                                                                 创建用户组          EventCode:4731
                                                                 修改用户密码        EventCode:4724重置 4723 更改
                                                                 删除文件            EventCode:4663并且massage包含DELETE
                                                                 修改文件            EventCode:4663并且massage包含AppendData和WriteData
                                                                 新增文件            EventCode:4663并且massage包含WriteAttributes
                                                                 删除审核日志        EventCode:1102
                                                                 添加用户到组        EventCode:4732
                                                                 修改文件/目录权限   EventCode:4670
                                                                 审核策略修改        EventCode:4719
  **windowsXP\                                                   用户登录成功        event_id:528
  **(winxp系统中的文件操作行为和win7/2008不一致，显示的是子串)                       
                                                                 用户登录失败        event_id:529
                                                                 用户被锁定          event_id:539
                                                                 创建用户            event_id:624
                                                                 创建用户组          event_id:635
                                                                 修改用户密码        event_id:628
                                                                 删除文件            event_id:560并且包含1537
                                                                 修改文件            event_id:560并且包含4418
                                                                 新增文件            event_id:560并且包含4424
                                                                 删除审核日志        event_id:517
                                                                 添加用户到组        event_id:636
                                                                 修改文件/目录权限   event_id:560并且包含1539
                                                                 审核策略修改        event_id:612
  **juniper防火墙**                                              traffic流量日志     告警组=system-notification-00257(traffic)
                                                                 端口状态更改        告警组=system-notification-00513
                                                                 用户登录记录        告警组=system-warning-00519
                                                                 策略修改记录        告警组=system-notification-00018并且message包含\"Policy
                                                                                     ID\"
                                                                 策略修改详细记录    告警组=system-notification-00018并且message不包含\"Policy
                                                                                     ID\"
  **交换机路由器端口状态记录**                                   端口状态更改        告警组LINEPROTO-5-UPDOWN或LINK-3-UPDOWN
  ----------------------------------------------------------------------------------------------------------------------------------------------
我们是如何确定实现的方式？
参考官网资料：
windows审核日志开启详细介绍
*https://technet.microsoft.com/zh-cn/library/mt431795(v=vs.85).aspx*
windows事件ID详细介绍
*https://www.ultimatewindowssecurity.com/securitylog/encyclopedia/Default.aspx*
# 平台使用操作说明
## 平台登录引导
日志易web登录链接：
用户名密码(初始):admin/PI:EMAIL
登录界面展示：
![](media/image2.png){width="5.772222222222222in"
height="2.7847222222222223in"}
日志易manager管理控制台链接：
用户名密码(初始):admin/admin
登录界面展示：
此模块用户对日志易各模块可用性的统计监控和管理
![](media/image3.png){width="5.772222222222222in"
height="3.0208333333333335in"}
![](media/image4.png){width="5.772222222222222in"
height="2.5930555555555554in"}
可对各模块进行启停操作
![](media/image5.png){width="5.772222222222222in"
height="2.6708333333333334in"}
看到对日志的处理性能情况
![](media/image6.png){width="5.772222222222222in"
height="2.613888888888889in"}
各模块的状态监控
![](media/image7.png){width="5.772222222222222in"
height="2.5833333333333335in"}
版本信息以及license的注册
![](media/image8.png){width="5.772222222222222in"
height="2.995138888888889in"}
## 平台功能使用介绍
根据需求的实现方式，用户使用操作集中在web页面中的"应用表格查看"以及"仪表盘"两个功能模块。
### 表格模块功能使用
登录web页面之后，点击应用，将会看到场景表格列表，如下图：
![](media/image9.png){width="5.772222222222222in"
height="2.8201388888888888in"}
表格中的操作方法大致一致。
1、可以自定义时间范围搜索。
![](media/image10.png){width="5.772222222222222in"
height="1.9555555555555555in"}
2、可以通过动态字段进行筛选过滤
![](media/image11.png){width="5.772222222222222in"
height="2.8006944444444444in"}
3、对于某字段项比较多的情况，我们提供了搜索的方式进行筛选。
比如删除文件清单，文件数目较大，下拉框比较多，所以我们提供了通过搜索文件名来搜索相关的数据。
注意：所有某个文件名需要用正则\*匹配前后的字符。比如\*filename\*
![](media/image12.png){width="5.772222222222222in"
height="2.8027777777777776in"}
### 仪表盘模块使用
登录web页面，点击仪盘表，我们看到我们根据当前的环境实现的一部分场景。
下图问仪表盘场景清单列表。
![](media/image13.png){width="5.772222222222222in"
height="2.829861111111111in"}
1、花旗2台数据主机文件的增删比对比柱状图
![](media/image14.png){width="5.772222222222222in"
height="3.1979166666666665in"}
2、花旗两台数据主机用户登录情况的柱状对比图
![](media/image15.png){width="5.772222222222222in"
height="3.0909722222222222in"}
3、花旗两台数据主机最近一天内文件访问的趋势(访问包含增删改)
![](media/image16.png){width="5.772222222222222in"
height="3.2368055555555557in"}
4、7天内用户登录失败的占比
![](media/image17.png){width="5.772222222222222in"
height="3.2104166666666667in"}
5、最近一天内花旗主机对外的事物量趋势图
我们根据juniper防火墙花旗两台数据主机对外的策略中traffic日志记录判断其事物量。
![](media/image18.png){width="5.772222222222222in"
height="3.2305555555555556in"}
### 搜索模块的使用
除了以上已经做成场景的模块，另外我们还可根据历史日志记录查询我们想要的日志记录信息。
点击搜索，我们可以自定义时间范围，可以在搜索框中填写我们想要搜索的日志关键字。
![](media/image19.png){width="5.772222222222222in"
height="3.0229166666666667in"}
结果栏左侧，我们还可以根据已经解析出的信息来快速过滤，比如，通过纳入的对象快速过滤
比如：按照下面的操作顺序，我们将快速过滤出最近10min内juniper防火墙的所有日志记录
![](media/image20.png){width="5.772222222222222in" height="3.04375in"}
搜索SPL语句详细见《日志易搜索参考v1.8.0.docx》
# 实施进度说明
  ----------------------------------------------------------------------------------
  **项目进度安排**                                     **时间安排**
  ---------------------------------------------------- -----------------------------
  日志分析系统平台实施规划及部署                       2017 1/18-1/19
  各管控对象的日志接入                                 2017 1/20-1/22
  windows2008（windows2007）系统日志审计的开发实施     2017 1/21-2/8
  windowsXP系统日志审计开发实施                        2017 2/9-2/10
  windows系统日志审计需求逐条测试及修改                2017 2/13-2/14
  交换机、路由器以及防火墙日志审计需求实现             2017 2/15-2/16
  交换机、路由器以及防火墙日志审计需求逐条测试及修改   2017 2/13-2/14
  提交文档编写                                         2017 2/20-2/24
  ----------------------------------------------------------------------------------
# 其他
我们平台可以实现的功能不仅于此，如果还需要其他场景，可以与我们沟通，
我们在评估之后，会做一个合理的解决方案。