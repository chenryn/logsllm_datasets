而不是通常的一次中断一个.当这项特性被打开时,操作系统
处理磁盘I/O的开销降低30-50%.在许多系统上,它也会在任何
地方增加5% - 50% 的数据流量大多数驱动器支持最小的设置
为2,4,8或,16个(扇区).较大的设置也可能存在,这取决于驱
动器.在许多系统上设置为16或32看起来是最理想的.
Western Digital在他们的许多驱动器上推荐设置为4或8.
归因于微小的(32kB)磁盘缓冲和非最优化的缓冲算法.
选项
.B -i
被用来查出一个已安装驱动器支持的最大设置
(在输出中查找 MaxMultSect 值).一些驱动器声称支持多重扇区模式,
但在某些设置下丢失数据.在极少的情况下,这样的失败会导致
.B 严重的文件系统损坏.
.TP
.I -p
尝试为指定的PIO模式对IDE接口芯片重编程,或者尝试为驱动器支持
的最佳的PIO模式进行自动调整.核心中仅针对于一些"知名"的芯片组
支持这项特性,甚至这种支持不一定是最好的.一些IDE芯片组不能为
一个单一的驱动器改变PIO模式,在这种情况下此选项可能导致PIO
模式的设置影响到
.I 两个
驱动器.许多IDE芯片组支持少于或多于标准的六个(0到5)PIO模式,
所以实际实现的精确速度设置将由芯片组和驱动器复杂的配合改变.
.I 谨慎使用.
这项特性不包含任何针对不谨慎的保护措施,一个不成功的结果
可能导致
.I 严重的文件系统损坏.
.TP
.I -P
为驱动器的内部预读机制设置最大扇区数.
不是所有的驱动器都支持这项特性.
.TP
.I -q
安静的操作下一个标志,压制正常输出.
当从/etc/rc.c/rc.local运行时,可用来减轻屏幕混乱程度.
不适用于
.I -i
或
.I -v
或
.I -t
或
.I -T
标志.
.TP
.I -r
获得/设置驱动器的只读标志.当被设置时,设备上的写操作被禁止.
.TP
.I -R
登记一个IDE接口.
.B 危险.
参见
.B -U
选项获取更多信息.
.TP
.I -S
设置驱动器待机(低速运转)超时值.
驱动器根据此值决定在关闭主轴电机以节约能耗之前等待多长
时间(没有磁盘操作).在这种状态下,驱动器可能需要来响应一
个接下来的磁盘访问,虽然大多数驱动器要快很多.超时值的编
码有些特别.值0表示"关".值1到240被指定为5秒的倍数,
也就是超时可以从5秒到20分钟.值241到251指定30分钟的1到11倍,
也就是超时可以从30分钟到5.5个小时.值252表示超时21分钟,
253设置一个销售商定义的超时,255表示21分15秒.
.TP
.I -T
用于以基准测试和比较为目的的缓存读取计时.要得到有意义的结果,
应该在内存不少于2M,系统没有其它活动(没有其它活动的程序)
的条件下,重复操作2-3次.它显示了不存取磁盘直接从Linux缓存
读取数据的速度.这项测量实际上标示了被测系统的处理器,缓存
和内存的吞吐量.
如果标志
.I -t
也被指定,那么一个基于
.I -T
输出结果的修正量将被综合到
.I -t
操作报告的结果中.
.TP
.I -t
用于以基准测试和比较为目的的缓存读取计时.要得到有意义的结果,
应该在内存不少于2M,系统没有其它活动(没有其它活动的程序)
的条件下,重复操作2-3次.它显示了不使用预先的数据缓冲从磁盘
这项测量标示了Linux下没有任何文件系统开销时磁盘可以支持多快
的连续数据读取.为确保测量的精确,缓存在
.I -t
的过程中通过BLKFLSBUF控制被刷新.
如果标志
.I -T
也被指定,那么一个基于
.I -T
数促结果的修正量将被综合到
.I -t
操作报告的结果中.
.TP
.I -u
获得/设置驱动器"不屏蔽中断"标志.设置为
.B 1
允许驱动器在磁盘中断处理过程中不屏蔽别的中断,
它极大改善了Linux的响应性能,并排除了"串行端口溢出"错误.
.B 谨慎使用:
一些驱动器/控制器组合不能承受可能是潜在的 I/O 增长,
而导致
.B 严重的文件系统损坏.
特别,
.B CMD-640B
和
.B RZ1000
(E)IDE 接口可能是
.B 不可靠的
(由于某种硬件缺陷),当在早于 2.0.16 版本的核心下使用此选项时.
关闭这些接口的(通常通过设置BIOS/CMOS)
.B IDE 预读
特性可以安全的解决这个问题.
.TP
.I -U
注销一个IDE接口.
.B 危险.
.B -R
的对应选项.
是为特别设计用来做热交换的硬件准备的(很罕见!). 
使用时要有充分的知识和 
.B 非常的谨慎 
,因为它很容易终止或破坏你的系统.
hdparm 的源代码包括一个 'contrib' 目录,里面有一些
用户捐赠的在一台 ThinkPad 600E的UltraBay上作热交换的记录.
自己去冒险吧.
.TP
.I -v 
显示所有的设置, 除了 -i (像 -acdgkmnru 对于 IDE, -gr 对于 SCSI 
或 -adgr 对于 XT).  这也是未指定任何标志时的默认操作.
.TP
.I -W
关闭/打开 IDE 驱动器的写缓存特性 (通常默认为 OFF ).
.TP
.I -X 
为较新的 (E)IDE/ATA2 驱动器设置 IDE 传输模式 .
特别是当在一个被支持的接口芯片组(像 Intel 430FX Triton) 
上打开通向一个驱动器的DMA时与选项 
.I -d1 
组合使用,在这里用  
.I -X34 
来选择多字 DMA 模式2 传输.
对于支持 UltraDMA burst timings 的系统,用 
.I -X66 
来选择 UltraDMA mode2 传输 (你需要在这之前为 UltraDMA 
准备好被支持的芯片组).
另外, 
.I 几乎没有必要
使用此标志,因为大多数/全部现代 IDE 驱动器默认它们最快的
 PIO 传输模式为打开. 所以摆弄它是没有必要的也是冒险的.
在支持 alternate 传输模式的驱动器上,
.I -X
可以被
.I 仅
用来选择模式.
在改变传输模式之前, 应该为新模式的设置给 IDE 接口跳线或编程(见
.I -p
标志)
以防止数据的丢失或损坏.
.I 请非常小心地使用它!
对于 Linux 使用的 PIO 传输模式,此值就是要求的
PIO 模式号加 8.
这样, 值 09 设置 PIO mode1, 10 设置 PIO mode2,
 11 设置 PIO mode3.
设置为 00 还原驱动器的默认 PIO 模式,  01 关闭 IORDY.
对于多字 DMA, 使用的值时要求的 DMA 模式号加 32.
对于 UltraDMA ,相应的值是要求 UltraDMA 模式号加64.
.TP
.I -y
迫使一个 IDE 驱动器立即进入低能耗 
.B 待机
模式, 通常使它低速运转.
当前能耗模式状态可以用
.B -C
标志来检查.
.TP
.I -Y
迫使一个 IDE 驱动器立即进入最低能耗 
.B 睡眠
模式, 使它完全关闭. 一个来自硬件或软件的重置
可以重新唤醒驱动器.
( 如果需要,Linux IDE 驱动器将自动产生一个重置 ).
.TP
.I -Z
关闭某些 Seagate 驱动器(STxxx 型?)的自动节能功能,
以防止它们在不适当的时候空转或低速运转.
.SH BUGS
像上面提到的, 
.B -m 扇区数
和
.B -u 1
选项尤其要小心使用, 最好在一个只读文件系统上使用.
大多数驱动器和这些特性配合得很好,但有一些驱动器/控制器
组合不是100%兼容的.使用可能导致文件系统损坏. 
请在实验之前给所有的数据作备份!
.PP
某些选项 (例如: -r 对于 SCSI) 可能在旧的核心下因为核心不
支持必要的 icctl() 而不能工作.
.PP
虽然这个命令只是为使用 (E)IDE 硬盘设备准备的,但有几个选项
也能够(允许)用于带有 XT 接口的 SCSI 硬盘设备和 MFM/RLL 硬盘.
.SH 作者
.B hdparm
是由 Mark Lord , Linux (E)IDE 驱动程序
的主要开发者和维护者编写的,并听取了很多网友的建议.
.PP
关闭 Seagate 自动节能的代码是征得
 Tomi Leppikangas(PI:EMAIL)允许使用的.
.SH 另见
.B AT Attachment Interface for Disk Drives,
ANSI ASC X3T9.2 working draft, revision 4a, April 19, 1993.
.PP
.B AT Attachment Interface with Extensions (ATA-2),
ANSI ASC X3T9.2 working draft, revision 2f, July 26, 1994.
.PP
.B Western Digital Enhanced IDE Implementation Guide,
by Western Digital Corporation, revision 5.0, November 10, 1993.
.PP
.B Enhanced Disk Drive Specification,
by Phoenix Technologies Ltd., version 1.0, January 25, 1994.