新一代的恐怖袭击
基于树莓派的
渗透测试
锦龙信安(威客众测平台)
高级安全工程师 ——MXi4oyu
什么是树莓派
Raspberry  Pi(中文名为“树莓派”,简写为RPi，或者RasPi/RPi)是只有信
用卡 大小的微型计算机。
树莓派之父：埃本·阿普顿（Eben  Epton）
初心：能够在帮助小孩学习的同时，也能让他感受到在学习编程过程中的
愉悦感。
树莓派的特点
(1)可编程、可拓展（可编程控制GPIO口，可接各种传感器模块等）
(2)可学习、可娱乐（集学习和娱乐于一身）
(3)携带方便（一张标准的信用卡大小）
(4)成本低（25美元）
主要版本
树莓派B
树莓派B+
树莓派接线图
小试牛刀-­准备工作
(1)树莓派B+
(2)HDMI连接线1根
(3)SD卡(至少4G)
(4)网线一根
(5)外接键盘
(6)  Mini  usb  数据线(输出电压5V，给树莓派供电)
小试牛刀-­系统烧录
(1)下载系统镜像
http://www.raspberrypi.org/downloads
(2)使用Win32Disk  Imager 进行镜像恢复
http://sourceforge.net/projects/win32diskimager/
(3)写入系统镜像
小试牛刀-­基本设置
小试牛刀-­基本配置
小试牛刀-­登录系统
渗透测试系统-­Pwn  Pi
http://www.pwnpi.com/
树莓派安装Kali——准备工作
(1)树莓派B+    (必备)
(2)Micro  SD卡 （至少4G,必备)
(3)Mini  usb  数据线 (输出电压5V,必备)
(4)HDMI连接线
(5)9寸车载Mini显示器
(6)无线键盘+鼠标套装
(7)3G/4G上网卡
(8)无线网卡（支持监听模式)
(9)读卡器
树莓派安装kali——系统烧录
树莓派安装Kali——开机启动
https://www.offensive-­security.com/kali-­linux-­vmware-­arm-­
image-­download/
摆渡攻击
狭义上的网络渗透的必然途径只能是互联网或者电话。当我们的目标处在
一个规格严密的内网中，我们有什么好的办法，达到我们想要的目的？
在现实生活中，被河流隔断的两岸往往利用渡船进行摆渡实现相互交通。而
在网络渗透中我们可以采取一种称之为“摆渡攻击”的手段。而今天的树
莓派就是我们摆渡的船。
攻击流程图
1.设备准备与信息收集
2.以社工等手段把树莓派送入内网
3.攻击路由器，无线AP，个人手机、平板、PC和服务器
4.以内部机器作为跳板漫游内网
供电
内网穿透
SSH  Tunnel-­SSH
A主机：外网，www.91duofanli.com，sshd端口：22
B主机：内网，sshd端口：22
SSH  Tunnel——证书登录
SSH  Tunnel-­AutoSSH
SSH  Tunnel-­AutoSSH
接入互联网
利用3G/4G信号接入互联网
隐秘安装树莓派——机器内部
隐秘安装树莓派——伪装成礼物
信息收集
隐秘安装树莓派——放到不宜察觉的地方
搜索附近无线热点
云检索
将ESSID:BSSID做为key。
若此key不存在云端服务器中，则将其添加到云服务器中，value为password
列表，默认为空。
若此key存在云端服务器中，则将查询结果返回到树莓派。
根据检索密码自动连接无线热点
尝试破解wps
airmon-­ng  start  wlan0
wash  -­i  mon0  –C
nohup  sudo  reaver  -­i  mon0  -­b  00:00:00:00:00:00  -­a  -­S  –N  -­v  -­d2  -­t  5  -­c  11  -­
o  fbi  &  
wpa/wpa2  无线密码破解
树莓派超级计算机与计算机集群
搭建钓鱼wifi
(1)桥接方式设置热点
(2)路由方式设置热点
中间人攻击
找到跳板机
Python编程控制树莓派GPIO
通过GPIO控制继电器