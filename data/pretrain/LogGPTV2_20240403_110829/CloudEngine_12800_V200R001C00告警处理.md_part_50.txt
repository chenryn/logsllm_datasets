对系统的影响
如果是正常运行信息，则PWE3业务恢复。
可能原因
原因2：VC was created（创建VC）
原因5：LDP Session Up（LDP会话重新建立）
原因11：LDP New Mapping Received（重新收到LDP Mapping报文）
文档版本 06 (2017-09-12) 华为专有和保密信息 391
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 27 L2VPN
原因18：Interface Up（AC接口状态变为Up）
原因23：Tunnel was Up（隧道UP）
原因30：LDP Notification Forwarding（收到LDP Notification报文）
原因42：Local PSN Fault Resume（本地PSN错误修复）
原因44：BFD for pw status changed to UP（BFD的PW状态为UP）
原因48：Manual set was disabled（去使能manual set pw-ac-fault）
原因51：Vrrp status changed to Master（VRRP状态变为Master）
原因52：Vrrp status changed to Backup（VRRP状态变为Backup）
原因54：Vrrp was deleted（删除VRRP）
原因55：Track vrrp（VRRP监测）
原因56：Undo track vrrp（未监测VRRP）
原因59：MTU matched（MTU值匹配）
处理步骤
l 如果出现本条告警，无论可能原因是什么，则都是正常运行信息，无需处理。
----结束
文档版本 06 (2017-09-12) 华为专有和保密信息 392
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 28 L3VPNBASE
28
L3VPNBASE
关于本章
28.1 L3VPN_1.3.6.1.2.1.10.166.11.0.1 mplsL3VpnVrfUp
28.2 L3VPN_1.3.6.1.2.1.10.166.11.0.2 mplsL3VpnVrfDown
28.3 L3VPN_1.3.6.1.2.1.10.166.11.0.3 mplsL3VpnVrfRouteMidThreshExceeded
28.4 L3VPN_1.3.6.1.2.1.10.166.11.0.4 mplsL3VpnVrfNumVrfRouteMaxThreshExceeded
28.5 L3VPN_1.3.6.1.2.1.10.166.11.0.6 mplsL3VpnNumVrfRouteMaxThreshCleared
28.6 L3VPN_1.3.6.1.4.1.2011.5.25.177.1.3.8 hwL3vpnVrfRouteMidThreshCleared
28.7 L3VPN_1.3.6.1.4.1.2011.5.25.177.8.1 hwTnl2VpnTrapEvent
相关主题
MPLS-L3VPN-STD-MIB
HUAWEI-BGP-VPN-MIB
文档版本 06 (2017-09-12) 华为专有和保密信息 393
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 28 L3VPNBASE
28.1 L3VPN_1.3.6.1.2.1.10.166.11.0.1 mplsL3VpnVrfUp
Trap Buffer 信息解释
The interface bound to the VPN instance went Up. (VpnInstanceName=[VpnInstanceName],
IfName=[IfName], IfCurRowStatus=[IfCurRowStatus],
VRFOperationStatus=[VRFOperationStatus])
在所有绑定VPN实例且状态为Down的接口中，其中一个接口状态变为Up。
Trap 属性
Trap属性 描述
Alarm or Event Alarm
Trap Severity Critical
Mnemonic Code L3VPN_MIB_TRAP_VRF_UP
Trap OID 1.3.6.1.2.1.10.166.11.0.1
Alarm ID 0x09110000
Alarm Type communicationsAlarm
Raise or Clear Clear
Match trap L3VPN_1.3.6.1.2.1.10.166.11.0.2_mplsL3VpnVrfDown
Trap Buffer 信息参数
参数名称 参数含义
VpnInstanceName VPN实例的名称。
IfName 接口名。
IfCurRowStatus 接口行状态。包括：
l 1：Active
l 2：Not in Service
l 3：Not Ready
l 4：Create and Go
l 5：Create and Wait
l 6：Destroy
VRFOperationStatus VRF操作状态。包括：
l 1：Up
l 2：Down
文档版本 06 (2017-09-12) 华为专有和保密信息 394
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 28 L3VPNBASE
VB 信息参数
VB OID VB Name VB Index
1.3.6.1.2.1.10.166.11.1.2.1.1 mplsL3VpnIfConfRowStatu mplsL3VpnVrfName;
.5 s
mplsL3VpnIfConfIndex;
1.3.6.1.2.1.10.166.11.1.2.2.1 mplsL3VpnVrfOperStatus mplsL3VpnVrfName;
.6
对系统的影响
表明VPN实例至少绑定了一个可用的接口。
可能原因
原因1：如果VPN实例被零个接口绑定，当一个Up的接口绑定到VPN实例上。
原因2：如果VPN实例被一个接口绑定，当接口状态由Down变为Up。
原因3：如果VPN实例被多个接口绑定，所有被绑定的接口状态为Down，当其中第一
个接口状态变为Up。
处理步骤
l 正常运行信息，无需处理。
----结束
参考信息
L3VPN_1.3.6.1.2.1.10.166.11.0.2_mplsL3VpnVrfDown
28.2 L3VPN_1.3.6.1.2.1.10.166.11.0.2 mplsL3VpnVrfDown
Trap Buffer 信息解释
The interface bound to the VPN instance went Down.
(VpnInstanceName=[VpnInstanceName], IfName=[IfName],
IfCurRowStatus=[IfCurRowStatus], VRFOperationStatus=[VRFOperationStatus])
绑定VPN实例的接口中，最后一个状态为Up的接口变为Down。
Trap 属性
Trap属性 描述
Alarm or Event Alarm
Trap Severity Critical
文档版本 06 (2017-09-12) 华为专有和保密信息 395
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 28 L3VPNBASE
Trap属性 描述
Mnemonic Code L3VPN_MIB_TRAP_VRF_DOWN
Trap OID 1.3.6.1.2.1.10.166.11.0.2
Alarm ID 0x09110000
Alarm Type communicationsAlarm
Raise or Clear Raise
Match trap L3VPN_1.3.6.1.2.1.10.166.11.0.1 mplsL3VpnVrfUp
Trap Buffer 信息参数
参数名称 参数含义
VpnInstanceName VPN实例的名称。
IfName 接口名。
IfCurRowStatus 接口行状态。包括：
l 1：Active
l 2：Not in Service
l 3：Not Ready
l 4：Create and Go
l 5：Create and Wait
l 6：Destroy
VRFOperationStatus VRF操作状态。包括：
l 1：Up
l 2：Down
VB 信息参数
VB OID VB Name VB Index
1.3.6.1.2.1.10.166.11.1.2.1.1 mplsL3VpnIfConfRowStatu mplsL3VpnVrfName;
.5 s
mplsL3VpnIfConfIndex;
1.3.6.1.2.1.10.166.11.1.2.2.1 mplsL3VpnVrfOperStatus mplsL3VpnVrfName;
.6
对系统的影响
表明该VPN实例没有绑定任何一个可用的接口。
文档版本 06 (2017-09-12) 华为专有和保密信息 396
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 28 L3VPNBASE
可能原因
原因1：VPN实例被一个接口绑定，当这个接口的状态由Up变为Down。
原因2：VPN实例被多个接口绑定，所有接口状态都由Up变为Down，当最后一个Up的
接口状态变为Down。
原因3：最后一个状态为Up的接口与VPN实例去绑定。
处理步骤
步骤1 使用命令display ip vpn-instance verbose vpn-instance-name查看Interfaces项，检查这个
VPN实例被哪些接口绑定。
l 如果没有绑定接口，查看日志文件，搜索关键字“undo ip binding vpn-instance”查
看日志文件中是否存在与告警同时产生的包含该关键字的日志。
– 如果是，且该VPN实例确实需要去绑定，则问题解决；否则在接口视图下执
行ip binding vpn-instance vpn-instance-name命令，配置VPN实例与接口绑
定，并执行ip adress ipv4-address命令配置接口IP地址。
n 如果出现该VPN实例的L3VPN_1.3.6.1.2.1.10.166.11.0.1 mplsL3VpnVrfUp
告警信息，则问题解决；
n 否则请执行步骤5。
– 如果不是，则请执行步骤5。
l 如果绑定了接口，则请执行步骤2。
步骤2 使用display ip interface brief查看该VPN实例绑定的接口是否有状态为Up的。
l 如果是，则请执行步骤5。
l 如果不是，则请执行步骤3。
步骤3 查看VPN实例绑定的接口是否都配置了IP地址。
l 如果是，则请执行步骤4。
l 根据需要为该VPN实例绑定的接口执行ip adress ipv4-address命令配置IP地址。之
后，
– 如果显示该VPN实例的L3VPN_1.3.6.1.2.1.10.166.11.0.1 mplsL3VpnVrfUp告警
信息，则问题解决；
– 如果不是，则请执行步骤4。
步骤4 在与VPN实例绑定的接口的视图下执行display this命令，查看该接口是否有shutdown
命令。
l 如果是，根据需要，执行undo shutdown命令，开启该接口。之后，
– 如果显示该VPN实例的L3VPN_1.3.6.1.2.1.10.166.11.0.1 mplsL3VpnVrfUp告警
信息，则问题解决；
– 如果不是，则请执行步骤5。
l 如果不是，则请执行步骤5。
步骤5 请收集该设备的告警信息、日志信息和配置信息，并联系技术支持人员。
步骤6 结束。
----结束
文档版本 06 (2017-09-12) 华为专有和保密信息 397
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 28 L3VPNBASE
参考信息
L3VPN_1.3.6.1.2.1.10.166.11.0.1 mplsL3VpnVrfUp
28.3 L3VPN_1.3.6.1.2.1.10.166.11.0.3
mplsL3VpnVrfRouteMidThreshExceeded
Trap Buffer 信息解释
The number of prefixes in the VPN instance exceeded the middle threshold.
(VpnInstanceName=[VpnInstanceName],
VpnInstanceRouteCount=[VpnInstanceRouteCount],
MidThresholdValue=[MidThresholdValue])
公网路由前缀数量超过ip prefix-limit number alert-percent [ route-unchanged ]命令配置
的公网路由前缀中限阈值。
VPN实例的路由前缀数量超过prefix limit number alert-percent [ route-unchanged ]命令
配置的私网路由前缀中限阈值。
Trap 属性
Trap属性 描述
Alarm or Event Alarm
Trap Severity Warning
Mnemonic Code L3VPN_MIB_TRAP_MID_THRESH_EXCEED
Trap OID 1.3.6.1.2.1.10.166.11.0.3
Alarm ID 0x09110002
Alarm Type qualityOfServiceAlarm
Raise or Clear Raise
Match trap L3VPN_1.3.6.1.4.1.2011.5.25.177.1.3.8
hwL3vpnVrfRouteMidThreshCleared
Trap Buffer 信息参数
参数名称 参数含义
VpnInstanceName VPN实例的名称。
说明
若VPN实例名称为“_public_”，则此告警是
由公网路由前缀超限触发。
VpnInstanceRouteCount 当前路由前缀数量。
文档版本 06 (2017-09-12) 华为专有和保密信息 398
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 28 L3VPNBASE
参数名称 参数含义
MidThresholdValue 配置的路由前缀总数的告警阈值。
VB 信息参数
VB OID VB Name VB Index
1.3.6.1.2.1.10.166.11.1.3.1.1 mplsL3VpnVrfPerfCurrNu N/A
.3 mRoutes
1.3.6.1.2.1.10.166.11.1.2.2.1 mplsL3VpnVrfConfMidRte mplsL3VpnVrfName;
.9 Thresh
对系统的影响
公网路由前缀数量超过告警阈值，还能继续加入路由。暂时不会导致路由丢失和流量
中断。
VPN路由前缀数量超过告警阈值，还能继续加入路由。暂时不会导致路由丢失和流量
中断。
可能原因
1、公网路由表下的公网路由前缀数量超过命令ip prefix-limit配置的公网路由表的路由
前缀数量的告警阈值，但小于最大路由前缀数。
2、VPN实例路由表下的私网路由前缀数量超过命令prefix limit配置的该私网路由表的
路由前缀数量的告警阈值，但小于最大路由前缀数。
处理步骤
l 原因1：公网路由表下的公网路由前缀数量超过命令ip prefix-limit配置的公网路由
表的路由前缀数量的告警阈值，但小于最大路由前缀数。
a. 使用display ip routing-table limit命令确认公网路由前缀数量的超限情况。
b. 使用display ip routing-table statistics命令确认当前公网路由前缀数量是否属
于正常情况。
n 如果是，则请执行步骤4。
n 如果不是，则请执行步骤3。
c. 去除多余公网路由后，路由前缀总数或者前缀数量是否仍然超过对应的告警
阈值。
n 如果是，则请执行步骤5。
n 如果不是，则请执行步骤6。
d. 进入系统视图，运行命令display this查看ip prefix-limit的配置，确认公网路
由前缀的告警阈值设置是否合理。
n 如果是，则请执行步骤5。
文档版本 06 (2017-09-12) 华为专有和保密信息 399
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 28 L3VPNBASE
n 如果不是，则请使用命令ip prefix-limit number { alert-percent | simply-
alert }，配置合理的路由前缀总数的告警阈值。
e. 请收集该设备的告警信息、日志信息和配置信息，并联系技术支持人员。
f. 结束。
l 原因2：VPN实例路由表下的私网路由前缀数量超过命令prefix limit配置的该私网
路由表的路由前缀数量的告警阈值，但小于最大路由前缀数。
a. 使用display ip routing-table limit vpn-instance vpn-instance-name命令确认本
VPN实例前缀数量的超限情况。
b. 使用display ip routing-table vpn-instance vpn-instance-name statistics命令确认