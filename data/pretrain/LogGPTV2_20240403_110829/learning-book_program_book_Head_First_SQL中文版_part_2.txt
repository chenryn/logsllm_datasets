Xxxi
读我
xxxii
技术审阅团队
Xxxiv
致谢
XXXV
ix
---
## Page 16
目录
数据和表
保存所有东西的地方
你是否也很讨厌总是找不到东西？找不到你的车钥匙、Urban
Outfitter75折优惠券以及应用程序的数据吗？在最需要的时候，偏偏找不到需
要的东西，还有什么比这更糟？提到应用程序，存储程序重要信息的最佳场所
非表莫属。所以请翻到下一页，踏入关系数据库的世界吧。
定义数据
2
从分类的角度看数据
7
什么是数据库？
8
戴上X光眼镜，看穿数据库
10
数据库包含关联数据
12
放大表
13
接受命令！
17
设定表：CREATETABLE语句
19
创建更复杂的表
20
看，设计SQL是多么简单
21
创建my_contacts表（终于！）
22
您的表已经准备好了
23
认识一下其他数据类型
24
请看您的表
28
不可以重建已存在的表或数据库！
30
辞旧迎新
32
为了把数据添加进表里，您需要INSERT语句
34
各种INSERT语句
41
上X光通镜，
看穿数据库的外表
没有值的列
42
?
以SELECT语句窥探表
43
SQL真情指数：NULL的真情告白
44
控制内心的NULL
45
NOTNULL出现在DESC的结果中
47
用DEFAULT填补空白
48
你的SQL工具包
50
---
## Page 17
SELECT语句
目录
2
取得精美包装里的数据
施予真的胜过取得吗？在数据库的世界里，取得数据的需求很可能与
插人数据的需求一样多。这就是本章的目的：各位将见识到功能非常强大的
SELECT语句，并且学习到如何取得放在表里的重要信息。我们还会学到如何
利用WHERE、AND、OR选择数据，甚至可以过滤掉不想选择的数据。
要约会吗？
54
更好的SELECT
57
*究竞是什么？
58
如何查询数据类型
64
更多标点问题
65
不成对的单引号
66
单引号是特殊字符
67
INSERT包含单引I号的数据
68
SELECT特定列来限制结果数量
73
SELECT特定列以加快结果呈现
73
结合查询
80
查找数值
83
顺利运用比较运算符
86
利用比较运算符取得数字数据
88
对文本数据套用比较运算符
91
OR，只要符合一项条件
93
AND与OR的差异
96
用ISNULL找到NULL
99
节省时间就用关键字：LIKE
101
我是大明显！
调用通配符
101
利用AND和比较运算符选取一个范围
105
偷偷告诉你·BETWEEN更好
106
约会后，你的评价是IN.
109
..不然就是NOTIN
110
更多NOT
111
你的SQL工具包
116
xi
---
## Page 18
目录
DELETE和UPDATE
改变是件好事
一直在改变你的心意吗？现在没有问题了！有了接下来会提到的
命令一DELETE和UPDATE，我们不再受限于6个月前所做的决定，当时
可能适合捕捞鱼，但现在已经不是季节了。有了UPDATE，我们可以改
变数据，而DELETE则可删除不需要的数据。这一章不只是给你鱼竿，还
会教你如何选择性地使用这些新能力，避免舍弃了需要的数据。
小丑真恐怖
120
追踪小丑
121
小丑的行踪飘忽不定
122
如何输人小丑数据
126
Bonzo，我们出问题了
128
用DELETE删除记录
129
运用新学会的DELETE语句
131
DELETE 的规则
132
INSERT-DELETE双步运作
135
慎用DELETE
140
DELETE不精确的麻烦
144
以UPDATE改变数据
146
UPDATE的规则
147
UPDATE是我们的新INSERT-DELETE
148
UPDATE在行动
149
更新小丑的活动
152
UPDATE定价
154
只需要一次UPDATE
156
你的SQL工具包
158
我们吓到你了
xii
---
## Page 19
目录
聪明的表设计
为什么要规范化？
你已经创建了一些表，但都没有经过仔细考虑。没有关系，
这些表都可以用。你可以从中SELECT、INSERT、DELETE、UPDATE列，
但随着取得的数据越来越多，你一定希望以前能多考虑一点，好让现在
的WHERE子句简单一点。我们需要让表更正常、更规范。
两张鱼的表
160
表都是关于关系的
164
原子性数据
168
原子性数据和你的表
170
原子性数据的规则
171
规范化的原因
174
规范化表的优点
175
小丑不太标准
176
达成INF的半路上
177
主键规则
178
朝规范化前进
181
修理Greg的表
182
我们设计的CREATETABLE
183
给我有内容的表
184
节省时间的命令
185
加上主键的CREATETABLE
186
1.2、3…自动递增
188
为现有的表添加主键
192
等一下。我的表已险装满了数据。你不能
ALTERTABLE并添加PRIMARYKEY
只为了给每条记录创建主键，就像第1意那样豪
193
襄地使用PROPTABLE说善就善，然后重新输入所
你的SQL工具包
194
有数据
xii
---
## Page 20
目录
ALTER
5
改写历史
你可曾希望更正以前年少无知犯下的错误？现在，你的机会来了。
使用ALTER命令，你能对几天前、几个月前，甚至是几年前设计的表套用新
学到的设计方法。更好的是，套用时不会影响现有数据。随着熟悉本章的过
程，各位还会学到规范化的真正意义，并且能让你的所有表都符合规范化，无
论它是过去的还是未来的产物。
我们需要一些改变
198
修改表
203
终极表美容沙龙
204
表的改名换姓
205
需要好好地计划一下
207
重新装备列
208
结构上的修改
209
ALTER 和 CHANGE
210
MyGable
以一条SQL语句改变两个列
211
快！卸除那一列
215
仔细研究不具原子性的location列
222
寻找模式
223
一些便利的字符串函数
224
以现有列的内容填入新列
229
你现在该把那个二手摄装的破烂老
UPDATE和SET搭档的成功之道
230
梦车表预成新新的数搁万人违、
把表调校到前所求有的境界。
你的SQL工具包
232
xiv
---
## Page 21
目录
SELECT进阶
6
以新视角看你的数据
现在该为SQL工具包添加一些功能了。我们已经知道如何用SELECT和
WHERE子句选出数据，但有时候我们需要比SELECT加上WHERE子句更精确的选
取工具。在本章中，我们将学习如何给数据排序和归组，还会学习如何对查询结果
套用数学运算。
DatavilleVideo影片出租店要改装升级
236
当前表的问题
237
比对现有数据
238
产生新列
239
使用CASE表达式来UPDATE
242
看来我们遇到问题了
244
表可能会变得乱七八槽
249
我们需要一种方式来组织我们SELECT出的数据
250
有点秩序吧：ORDERBY
253
按单列排序
254
按两列排序
257
按多列排序
DATAVILLe
258
有秩序的movie_table
259
VIDeo
以DESC反转排序
261
GirlSprout的饼干销售冠军问题
263
SUM能为我们加总
265
利用GROUPBY完成分组加总
266
AVG搭配GROUPBY
267
MIN和MAX
268
COUNT，计算天数
269
选出与众不同的值
271
LIMIT查询结果的数量
274
LIMIT，只限第二名出现
275
你的SQL工具包
278
XV
---
## Page 22
目录
多张表的数据库设计
拓展你的表
到了某个时候，只有一张表就不够了。数据变得越来越复杂，你
所使用的唯一一张表实在装不下了。表里充满了多余的数据，既浪费存储
空间，又会拖慢查询的速度。一张表的负荷已经接近极限了，但是外面的
世界还很宽广。我们将用不只一张表来记录数据、控制数据，最后它将成
为你的数据库的主人。
Nigel需要一点爱
282
一切都失败了…….等一下
293
跳出一张表的思考框框
294
小丑追踪数据库中的多张表
295
clown_tracking数据库模式
296
如何从一张表变成两张
298
连接你的表
303
外键约束
305
为什么要找外键的麻烦？
306
创建带有外键的表
307
表间的关系
309
数据模式：一对一
309
数据模式：使用一对一的时机
310
数据模式：一对多
311
vity._id 0
divity
数据模式：认清多对多
312
数据模式：我们需要junctiontable
315
数据模式：多对多
316
终于符合INF
321
组合键使用了多个列
322
速记符号
324
部分函数依赖
325
传递函数依赖
326
第二范式
330
interests
int_id
第三范式（终于到了这一步）
336
interest
终于，Regis（还有gregs_list）从此过着幸福美满的日子
339
你的SQL工具包
340
xvi
---
## Page 23
目录
联接与多张表的操作
不能单独存在吗？
欢迎来到多张表的世界。数据库中有多张表是件好事，但我们也需要学习
一些操控多张表的新技术与工具。混乱状态与多张表一起出现，所以你需要别名
来让表更清楚简单。联接则有助于联系表，取得分布在各张表里的内容。准备
好，再度取回数据库的控制权吧！
自我重复、自我重复
344
预填充表
345
我得了“表难以规范化”的忧郁症
347
特殊的兴趣列
348
保存兴趣
349
UPDATE所有兴趣列
350
取得所有兴趣
351
条条大路通罗马
352
同时（几乎同时啦）CREATE、SELECT、INSERT
352
同一时间CREATE、SELECT、INSERT
353
AS到底是怎么一回事？
354
列的别名
355
表的别名，谁会需要？
356
关于内联接的二三事
357
交叉联接
358
释放你的内联接
363
.达就是小型
内联接上场了：相等联接（cquijoin）
结累表的同途啊。
364
内联接上场了：不等联接（non-equijoin）
367
最后一种内联接：自然联接（naturaljoin）
368
联合查询？
375
SQL真情指数：表与列的别名篇：你们在隐藏什么？
376
你的SQL工具包
377
xvii
---
## Page 24
目录
子查询
查询中的查询
Jack，请给我被分成两部分的问题，谢谢。有了联接的确很好，但
有时要问数据库的问题不只一个。或者需要把甲查询的结果作为乙查询的输
入。这时候就该是子查询出场了。子查询有助于避免数据重复，让查询更加动
态灵活，甚至能引人高端概念。（最后一项不一定会成真，不过三项好处中有
两项是真的也很好嘛！）
Greg踏入招聘服务行列
380
Greg加入了更多表
381
Greg使用内联接
382
但是他想试试其他查询
384
子查询
386
以子查询合二为一
387
在单一查询不够用的时候：请用子查询
388
子查询示范
389
子查询规则
391