情况也很多。
该类型L3交换机的价格在500~1000万日元左右2。
表4-8列出了主要的高端L3交换机产品信息。
（表4-8）各公司高端L3交换机产品的性能比较
Cisco Systems
Juniper Networks
ALAXALA Networks
Catalyst 6509
EX8216
AX6708S
机框高度
15RU
21RU
9RU
8
16
8
最大线卡模块插槽数
最大背板容量
1.4Tbit/s
12.4Tbit/s
1.15Tbit/s
最大电力消耗
最大8700W
最大15000W
最大4400W
①在M+N的余结构中，为了获得M台设备的性能，需要使用N台余系统。例如，为了获得100W电力供应，如
果使用1+1的余结构，则需要使用两个100W电源模块，即使其中一个模块发生故障，另外一个也能保障100W的
电力供应；在N+1余结构且N=2时，就需要3个50W电源模块，当其中一个发生故障时，剩余两个模块能够保障
100W的电源供应。在N+N余结构且N=2时，需要使用4个50W电源模块，每两块成对使用，使得无论哪个电
源发生故障，都有另一电源模块对接替，从而保障100W电力的供应。
②例如思科公司的Catalyst6500系列、Catalyst4500系列以及JuniperNetworks公司的EX8200系列等。
---
## Page 234
220第4章理解L3交换机的性能与功能
（续）
Cisco Systems
Juniper Networks
ALAXALA Networks
Catalyst 6509
EX8216
AX6708S
单槽交换性能
80Gbit/s
320Gbit/s
单台机框所支持的最大千兆端口数
576
768
192
单台机框所支持的最大万兆端口数
130
128
64
外观
中端L3交换机
中端L3交换机一般为箱式交换机或最大插槽数为4的机框式（模块式）交换机，用于将企
业核心交换机和边缘交换机进行汇聚交换，价格在100万~500万日元左右?。
表4-9各公司中端L3交换机的性能比较
Cisco Systems
JuniperNetworks EX4500
ALAXALA Networks
Catalyst4503
AX5404S
机框高度
7RU
2RU
6.5RU
最大线卡模块插槽数
2
N/A
4
最大背板容量
64Gbit/s
480Gbit/s
48Gbit/s
最大电力消耗
最大6000W（每个线卡可用
最大364W
1100W
最大1500W的PoE）
单台机框所支持的最大千兆
96
48
192
端口数
单台机框所支持的最大万兆
28
48
N/A
端口数
外观
①其中的代表有思科公司的Catalyst4500系列、Catalyst4900系列，juniper公司的EX4500系列、EX4200系列，日立
电线公司的Apresia15000系列、Apresia13200系列等。
---
## Page 235
04.04L3交换机搭载的特殊功能|221
■低端L3交换机
低端L3交换机一般为箱式交换机或桌面式交换机，作为企业的接人交换机（边缘交换机）
使用，1RU大小的设备支持24端口或48端口。有些产品作为IP电话或无线LAN的访问接人
点，还能直接使用来自以太网的电源供电（PoE）。该类型L3交换机价格约几万日元至100万
日元。
表4-10
各公司低端L3交换机产品的性能比较
Cisco Systems Catalyst3750
Juniper Networks
ALAXALANetworks
(WS-C3750G-48TS-E)
EX2200-48P-4G
AX3630S-48TW
机框高度
1RU
1RU
1RU
最大背板容量
32Gbit/s
104Gbit/s
96Gbit/s
最大电力消耗
160W
91w（不支持PoE）
134W
405W（支持PoE）
单台机框所支持的最大千兆端口数
48+4
48
48
单台机框所支持的最大万兆端口数
N/A
48
N/A
外观
04.04L3交换机搭载的特殊功能
04.04.01L3交换机功能的分类
尽管各制造厂商的L3交换机产品提供了的功能不同，但这些功能大致可以分为如表4-11所
示的几个类别。
表4-11
L3交换机的功能
OSI参考模型
分类
功能
应用层
认证类、管理类
SNMP、RMON、syslog、DHCP、NetFloW、FTP、IEEE802.1X等
网络层、传输层
路由选择协议
静态路由、RIPv1/Vv2、OSPF、BGPv4、IS-IS、多播路由选择、RIPng、
OSPFv3、BGP4+、基于策略的路由选择等
QoS
IEEE802.1p、LLQ、WFQ、RED、Shaping、带宽控制等
IP隧道
IPv4overIPv6、IPv6overIPv4等
其他
过滤、负载均衡、VRRP等
---
## Page 236
222第4章理解L3交换机的性能与功能
（续）
OSI参考模型
分类
功能
数据链路层
VLAN
端口VLAN、IEEE802.1Q（tagVLAN）ProtocolVLAN、私有VLAN
Uplink-VLAN等
STP
STP（IEEE802.1D）RSTP（IEEE802.1W)、PVST+、MSTP（IEEE
802.1s）等
STP、SNMP、RMON、NetFlow等相关内容请参考本书02.08节，QoS相关内容请参考
03.06节。
在L3交换机中，只有使用这些功能对分组进行的管理是由CPU（软件）直接处理的。用户
之间的通信均如图4-13所示，是由ASIC（硬件）处理实现分组的高速转发的。
图4-13使用ASIC完成高速分组转发
软件处理
L3交换机
种类
分组管理
BPDU (Bridge Protocol Data Unit)
RIP/RiP2(Routing InformationProtocol)
OSPF(OpenShortestPathFirst)
DVMRP(Distance Vector Multicast Routing Protocol)
ASIC
ASIC
PIM(Personal Information Manager)
硬件处理
L3交换机
种类
单播转发
多播转发
过滤处理
ASIC
队列处理
端口镜像
04.04.02VLAN
由1台或者多台交换集线器所组成的1个广播域可以称为是一个扁平网络（flatnetwork）。
该网络只由L2组成，相互连接的硬件会接收所有网络发来的广播帧。因此，随着连接硬件数量
的增加，广播数量也会增加，网络状况也就越发混杂。
这种情况下就需要采用能够将整个扁平网络进行逻辑分段的VLAN（VirtualLAN）技术。各
个VLAN均使用同1个广播域，因此能够控制该域内广播通信的规模。（图4-14）
交换机通过设置（configuration）能够轻易更改物理端口的属性，使该物理端口附加到某个
---
## Page 237
04.04L3交换机搭载的特殊功能223
VLAN之中，因此当连接交换机的用户终端发生变化时，也无需更改所对应的物理配线。
VLAN之间的通信需要使用路由选择，不借助路由器就无法与不同VLAN的终端进行通信，
因此安全性也有了保障。
VLAN在1998年的IEEE802.1Q中完成了标准化。
基于端口的VLAN
基于端口的VLAN（PortVLAN）是指在1台交换机上完成VLAN构建的功能。
基于端口的VLAN是在交换机的端口上设置VLANID信息，将拥有相同VLANID的多个
端口构成一个VLAN。符合IEEE802.1Q标准的交换机在初始状态时所有端口默认VLANID=1
（即VLAN1），但是使用者能够对任意一个端口进行VLANID=2的设置，从而使该端口归属
VLAN2。
图4-14
LAN与VLAN的比较
LAN
该交换机内有
该交换机内有
1个广播域
1个广播域
LANA
LANB
VLAN
该交换机内有两个
广播域（VLAN）
LANA
LANB
标签VLAN（IEEE802.1Q）
当需要跨越多个交换机创建VLAN时，一般会用到使用中继端口（trunkport）的标签VLAN
（tagVLAN）。标签VLAN通过中继端口完成以太网数据顿的收发，其中以太网数据顿上需添加
4字节IEEE802.1Q所定义的首部（即VLAN标签信息）（图4-15）。为以太网数据帧添加标签的
---
## Page 238
224第4章理解L3交换机的性能与功能
过程称为tagging。当tagging完成后，以太网数据帧的最大长度将从1518字节变为1522字节，
因为其中还包含了12bit的VLANID信息，因此最多可以支持的VLAN数也达到了4096个。
图4-15使用标签VLAN时的以太网数据帧格式
（没有使用标签时的IEEE802.3以太网数据帧）
7位
6
2
46~1500
首部
SFD目的
源地址
长度/数据
FCS
地址
类型
（使用标签时的IEEE802.3以太网数据帧）
7位
6
2
2
46~1500
4
SFD目的
源地址
TPIDTCI长度/数据
FCS
地址
类型
3bit --
12
被添加的4字节IEEE802.1Q首
PCP
CFI
VID
部（VLAN标签信息）
SFD：StartFrameDelimiter（帧首定界符）
TPID：TagProtocolIdentifier（标签协议标识）
在以太网中，TPID的值为0x8100。如果发送源地址后面的值不是0x8100，那么该域则不表
示TPID信息，而是作为“长度/类型”数据域被识别。顺便一提，当“长度/类型”数据域的值
在0x05DC（10进制数为1500）以下时，表示该以太网数据顿的长度；在0x0600以上时，则表示
该以太网数据帧的类型。表示以太网数据顿类型的值分别是：IPv4为0x0800，ARP为0x0806、
IPv6为0x86DD等。