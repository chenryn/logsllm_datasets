User: Please describe how to implement container network intercommunication and how to intercommunicate with external networks.
Assistant: Container network intercommunication: 1. Ways of container network intercommunication: Common container orchestration tools (such as Docker Compose, Kubernetes, and Mesos) have their own network solutions, the most common of which are the Bridge network and Overlay network that comes with Docker. 2. Bridge network: Bridge network is a network form that comes with Docker. Its feature is that containers belonging to the same Bridge network can communicate with each other through the same network segment. Therefore, when we need to communicate with multiple containers, we can connect these containers to the same Bridge network to realize network communication between containers. 3. Overlay network: Overlay network is a common container network solution. Its principle is to use VXLAN technology to establish a virtual network between containers on different hosts. Another tool to implement the Overlay network is Weave, which realizes the intercommunication of containers by creating a virtual network link on each host. Communication with external network: 1. Method 1: port mapping. We can use the -p option of Docker to map the port of the container to the port of the host, and then access the container through the IP address and port number of the host on the external network. 2. Method 2: Use docker network mode. Docker provides three network modes: bridge, none, host. Among them, the bridge mode is a way for the Docker container to communicate with the external network. When using bridge mode, each container will be assigned an IP address (usually a private address) and forwarded by Docker's bridge network. 3. Method 3: Docker network plug-in. The network plug-in provided by Docker allows us to customize the network architecture and create our own network, so as to realize the intercommunication between the container and the external network. For example, using network plug-ins such as Flannel, you can create a globally accessible network and allow containers to communicate with each other in this network.