从持续集成制品库获取应用版本后，对实例进行部署变更，可
以定义当次变更的以下内容：
 单个实例部署的超时时间。
 分组间并发度及分组内并发度。
 部署维度，定义是按分组维度来部署还是部署分组内的部
分实例。
3．业务价值
1）部署能力
通过自研基于 dumb-int 的基础镜像，结合镜像仓库及持续集成
等制品存储，持续部署实现了业务应用部署的全生命周期管理。
⽹址：SRE-Elite.com 19 3 微信：SRE精英联盟
SRE实践白皮书（2023年）
2）自定义部署设置
基于大量丰富的部署设置实现了无状态及有状态两套业务容器
方案，充分满足不同的业务需求。其中无状态容器通过自研 k8s
statefulsets crd 实现，有状态容器通过 k8s 原生 pod 及自研 agent 实
现。
3）GPU资源利用
除了基础资源，持续部署还与 GPU 资源深度结合，允许用户创
建带 GPU资源的容器。
4）健康检查及告警
通过 k8s 探针及 agent 建立容器的生命周期管理机制，同时实现
了自动告警、自动拉起等预警保活机制。
3.7.1.5 部署编排
在持续部署的基础上，部署编排将跨应用的发布进一步组织起
来，允许用户通过一个编排计划发布多个业务应用、降低发布复杂
度，以及提升发布效率。
1．应用概念描述
1）编排计划
用于将跨应用的多个分组组织到一起的逻辑概念，由一个个编
排任务组成，同时可以控制这些任务的顺序及串并行。
2）编排任务
组成编排计划的最小单元，涵盖多个领域的不同任务类型，在
编排计划中用于不同的分工。
⽹址：SRE-Elite.com 19 4 微信：SRE精英联盟
SRE实践白皮书（2023年）
3）监控模板
通过打通云监控，实现了多个指标的对接，同时允许用户设置
监控超阈时的动作用以及时止损。可直接与编排计划关联，用于监
控整个编排计划的发布过程，也可用在部署计划中自由添加并指定
监控时长，用于单点验证。
4）通知模板
通知模板用于在编排计划的生命周期内，对不同的时机发送不
同的用户通知。
2．核心功能
1）编排实例部署
部署编排对实例部署的编排主要通过以下几个方面来实现：
 发布顺序及串并行控制：用户可以将若干应用的多个分组
编排进一个编排计划内，将其以用户自定义的串并行方式进
行部署。
 精细化暂停点管理：为用户提供丰富的实例暂停点控制设
置：允许用户按实例、实例比例、全部实例等规则选择暂停
点；允许用户自定义暂停点的手自动通过方式及卡点时间。
 实例分批次发布：提供了实例分批次发布的能力，允许用
户将单个分组内的实例划分为任意个数的批次，并拆分成不
同的编排部署任务；允许用户在同一个分组的不同实例批次
之间任意插入需要的其他任务。
2）编排任务
⽹址：SRE-Elite.com 19 5 微信：SRE精英联盟
SRE实践白皮书（2023年）
编排任务主要分为三类：
 核心任务：部署、卡点、监控。
 其他任务：覆盖了诸如自动化测试、扩缩容、实例批量操
作、静态部署、自定义脚本等与发布相关的各个方面。
 定制化任务：用户可以自己定义任务的内容，以插件的形
式接入编排。
3）智能监控
通过与云监控的紧密结合，我们为用户提供了不同的指标、告
警及使用方式：在指标及告警方面，当前已经对接了业务黄金指
标、自定义指标监控（日志监控、自定义监控、指定时序数据库
等）告警、调用链指标、及量化发布指标（自定义指标及调用链接
口）。
在这些监控能力的使用方面，我们提供了部署计划级监控及监
控任务，既允许用户在整个发布过程中进行监控，同时也允许用户
在某个指定时间段内进行监控。
4）通知
在部署编排执行的过程中，虽然自动化程度较高，但有些情况
仍需用户关注，因此我们允许编排计划及编排任务关联通知模板。
在通知模板中，用户可设置以下内容：
 通知时机：分为计划级别的时机和任务级别的时机，涵盖
了计划及任务的生命周期。，时机包含编排计划的开始、成
功、取消、超时，编排任务的开始、成功、跳过、超时、失
⽹址：SRE-Elite.com 19 6 微信：SRE精英联盟
SRE实践白皮书（2023年）
败等；接收人可以指定角色，也可以指定具体的员工工号。
 接收人：允许用户灵活配置通知接收人的服务树角色或指
定的接收人工号。
 通知渠道：除直接的 TT 消息外，允许用户添加告警机器
人，在通知时自动发送 TT群内消息。
3．业务价值
1）发布提质提效
通过编排计划将流程固化，以及将多个应用的发布流程串联，
最大化地降低了发布过程中人为操作的出错以及跨应用之间的沟通
延时及误差，从而降低了故障率及提升了发布质量。
同时，由于部署编排对接了测试平台及云监控，实现了发布自
动验收及发布故障自动止损，进一步提升了发布质量及发布效率。
2）精细化实例管理
除了允许用户为实例逐个设置暂停点外，部署编排还允许用户
以下几个方式来管理暂停点：
 按一定规则为整个分组的实例设定暂停点，例如全部实
例、实例百分比、实例下标等。
 为不同的实例定制暂停点手自动通过方式及卡点时间，从
而便于用户更精细化地管理。
而对于实例本身的管理，部署编排还允许用户对单个分组的实
例实行分批次管理，在批次之间可以任意插入编排任务，从而更好
地管控实例发布。
⽹址：SRE-Elite.com 19 7 微信：SRE精英联盟
SRE实践白皮书（2023年）
3.7.1.6 可观测
为了确保我们的应用平台的高效运行，我们需要构建一个全面
的可观测性框架。这一框架应包括以下几个关键组件：
（1）日志管理：日志是可观测性的基础。我们将实现一个集中
式日志管理系统，该系统能够收集、存储和查询来自平台上所有服
务和应用的日志数据。此外，我们将采用标准化的日志格式和丰富
的元数据，以便于搜索和分析。
（2）监控与警报：监控系统将实时收集关于系统性能的指标，
如响应时间、吞吐量和错误率。当这些指标超出预定的阈值时，警
报系统将通知运维团队，以便他们能够迅速采取行动。
（3）分布式跟踪：在微服务架构中，一个用户请求可能跨多个
服务。分布式跟踪系统能够追踪请求的整个生命周期，帮助我们识
别性能瓶颈和故障点。
（4）服务健康检查：健康检查机制将定期检查服务状态，确保
服务的可用性和可靠性。这包括从简单的 HTTP 检查到复杂的业务
逻辑验证。
（5）性能分析：我们将部署性能分析工具来收集关键应用和服
务的性能数据。通过分析这些数据，我们可以优化系统配置，提升
资源利用率和响应速度。
（6）可视化仪表盘：所有的监控数据和分析结果都将通过一个
可视化仪表盘展示，这使得任何非技术人员也能轻松理解系统的当
前状态和性能。
⽹址：SRE-Elite.com 19 8 微信：SRE精英联盟
SRE实践白皮书（2023年）
（7）事件管理和自动化处理：通过事件管理系统，我们可以跟
踪和响应系统中发生的事件。结合自动化工具，我们可以实现对某
些类型事件的自动化处理，减少对人工干预的依赖。
通过上述组件的整合，我们将能够实现对整个应用平台的深入
洞察。这不仅仅是为了解决问题，更重要的是预防问题的发生。我
们将能够实时监控应用的性能，预测潜在的系统瓶颈，并在问题影
响用户之前主动地解决它们。
3.7.1.7 成本（定价、用量、出账）
1．资源的计量计费：
资源的计量计费是企业内部平台管理中至关重要的一环。随着
资源使用频率和范围的提升，业务部门渴望了解资源的使用情况，
而成本作为一个统一的度量，能够为业务方提供量化的使用感知。
因此，资源的计量计费成为必不可少的手段。为实现企业内部平台
与公有云一样的计量、计价和出账能力，需要设计可监测且可计量
的平台能力项，并确定其计价策略，监控统计各业务的服务用量，
最终通过量价输出各业务的成本账单。
2．计量
每个平台能力项对业务方提供的服务不一样，因此需要制定特
有的计量指标，可参考以下通用计量模型设计流程：
（1）定义平台能力项： 在各公共平台部门中，根据服务功能的
不同，制定面向使用方角度的平台能力项，作为计量的承载主体。
（2）业务对象标签： 定义平台所服务的业务方结算主体，主要
⽹址：SRE-Elite.com 19 9 微信：SRE精英联盟
SRE实践白皮书（2023年）
目的是建立财务与技术之间统一的成本主体概念，可以直接引用应
用元信息的业务概念或者以应用元信息为基础制定归集映射策略，
与财务结算单元对齐。
（3）成本驱动因素： 针对平台服务功能的不同，每个平台定义
相应的计量指标（根据平台的实际情况，可设计一个或多个计量指
标）。计量指标应该是面向业务方角度，对业务方有感知的指标，例
如任务调用量、审核量、数据存储量等。
数据采集与统计： 平台能力项需搭建成本驱动因素的日常数据
采集能力，为计量提供基础数据信息，至少实现 T+1 按天维度的数
据采集粒度，能细化实现小时或者分钟采集粒度更优，计量应该以
业务对象标签维度进行统计。
3．定价
平台能力项的服务定价，也就是成本驱动因素的平均单价，参