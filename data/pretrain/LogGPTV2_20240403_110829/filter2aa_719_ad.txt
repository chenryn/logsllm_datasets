  on	
  devices	
  that	
  authenDcate	
  or	
  download	
conﬁgs	
  from	
  a	
  standard	
  network	
– Hold	
  down	
  buOon	
  on	
  boot	
  or	
  mode	
  change	
  to	
access	
  special	
  debug	
  features	
– Special	
  ﬁle	
  name	
  on	
  a	
  USB	
  sDck,	
  etc.	
Bring	
  On	
  The	
  AOack	
  -­‐	
  Physical	
•  Some	
  ﬁnal	
  thoughts	
  on	
  physical	
  access:	
– Physical	
  access	
  always	
  wins	
– All	
  physical	
  protecDons	
  will	
  fall	
  in	
  Dme	
– Be	
  aware	
  that	
  when	
  you’re	
  evaluaDng	
  you’ll	
  most	
likely	
  need	
  a	
  couple	
  “donor”	
  devices	
  that	
  will	
  be	
destroyed.	
•  Most	
  “secure”	
  devices	
  get	
  destroyed	
  at	
  least	
  once	
  J	
Bring	
  On	
  The	
  AOack	
  –	
  Provisioning	
•  Things	
  we’ll	
  cover	
  under	
  the	
  provisioning	
secDon:	
– How	
  provisioning	
  works	
– How	
  devices	
  are	
  provisioned	
  and	
  managed	
– Connectors	
– Debugging	
  Ports	
Bring	
  On	
  The	
  AOack	
  –	
  Provisioning	
•  What	
  is	
  provisioning:	
–  Provisioning	
  is	
  the	
  process	
  by	
  which	
  a	
  raw	
  (un-­‐
programmed)	
  device	
  is	
  made	
  ready	
  for	
  operaDon	
–  Most	
  devices	
  need	
  to	
  be	
  provisioned,	
  because	
  the	
device	
  and	
  soUware	
  are	
  built	
  as	
  separate	
  units	
•  Every	
  consumer	
  device	
  usually	
  has	
  a	
  provisioning	
mechanism	
•  Most	
  devices	
  are	
  a	
  Factory	
  or	
  a	
  Field	
  provisioned	
device	
–  Important	
  to	
  understand	
  the	
  diﬀerence,	
  because	
  their	
methods	
  are	
  diﬀerent	
•  IdenDfying	
  common	
  connectors	
  for	
provisioning:	
– The	
  Mictor	
  from	
  Agilent	
•  Pic	
•  Why	
  you	
  will	
  hate	
  this	
  connector:	
–  $$$	
–  Tiny	
  pins,	
  hard	
  to	
  solder	
–  Designed	
  for	
  large	
  shops	
•  Why	
  you	
  will	
  love	
  it:	
–  Impedance	
  matched	
  with	
  ground	
  plane	
–  One	
  connector	
  to	
  rule	
  them	
  all	
Bring	
  On	
  The	
  AOack	
  –	
  Provisioning	
Bring	
  On	
  The	
  AOack	
  –	
  Provisioning	
•  The	
  ARM	
  standard	
  JTAG	
Bring	
  On	
  The	
  AOack	
  –	
  Provisioning	
•  The	
  MIPS	
  eJTAG	
Bring	
  On	
  The	
  AOack	
  –	
  Provisioning	
•  The	
  Xilinx	
  JTAG	
Bring	
  On	
  The	
  AOack	
  –	
  Provisioning	
•  MSP430	
  JTAG	
Bring	
  On	
  The	
  AOack	
  –	
  Provisioning	
•  Motorola	
  /	
  Freescale	
  BDM	
  (Background	
Debugging	
  Module)	
– 6	
  pin	
– 26	
  pin	
Bring	
  On	
  The	
  AOack	
  –	
  Provisioning	
•  The	
  “common”	
  10	
  pin	
  JTAG	
•  How	
  common	
  is	
  common?	
•  A	
  very	
  subjecDve	
  quesDon	
  and	
  it	
  depends	
  on	
what	
  you’re	
  asked	
  to	
  analyze.	
Bring	
  On	
  The	
  AOack	
  –	
  Provisioning	
•  The	
  Motorola	
  PPC	
  JTAG	
– Extremely	
  common	
  in	
  a	
  lot	
  of	
  embedded	
  devices	
Bring	
  On	
  The	
  AOack	
  –	
  Provisioning	
•  Others	
  we’ll	
  not	
  speciﬁcally	
  cover:	
–  LaVce	
  ISPDOWNLOAD	
  (JTAG	
  and	
  ISP)	
  8	
  and	
  10	
  pin	
–  IBM	
  RISCWatch	
  16-­‐pin	
–  Motorola	
  “ONCE”	
  On	
  Chip	
  EmulaDon	
  14	
  pin	
  (JTAG)	
–  Philips	
  MIPS	
  JTAG	
  20-­‐pin	
–  ST	
  FlashLink	
  14	
  pin	
–  Xilinx	
  9	
  pin	
  (Serial	
  Slave	
  and	
  JTAG)	
–  Check	
  out	
  thist	
  site	
  for	
  some	
  decent	
  informaDon	
  onall	
of	
  these.	
hOp://www.jtagtest.com/pinouts/	
Bring	
  On	
  The	
  AOack	
  –	
  Provisioning	
•  Our	
  all-­‐Dme	
  favorite:	
  TTL	
  Serial	
–  Three	
  pins,	
  oUen	
  Ded	
  to	
  on	
  chip	
  boot	
  loaders,	
  debuggers,	
and	
  things	
  the	
  manufacture	
  would	
  hate	
  you	
  to	
  get	
  ahold	
of	
–  Pro	
  Tips:	
•  TTL	
  serial	
  mean	
  Transistor-­‐to-­‐Transistor	
  Level	
  Serial	
•  This	
  operates	
  at	
  between	
  3.3	
  and	
  5.0	
  volts	
  (0-­‐VCC	
  technically)	
  for	
logic	
  signaling	
  in	
  most	
  cases	
•  This	
  is	
  not	
  the	
  serial	
  port	
  on	
  a	
  computer	
  (That’s	
  RS-­‐232	
  serial	
  port)	
•  This	
  will	
  destroy	
  the	
  chip	
  if	
  you	
  aOempt	
  to	
  aOach	
  it	
  to	
  the	
  RS-­‐232	
•  Buy	
  an	
  adaptor	
  on	
  Amazon,	
  search	
  for	
  FTDI	
  or	
  SILABS	
  Chip,	
  which	
have	
  manufactures	
  reference	
  drivers	
  available	
•  Don’t	
  install	
  the	
  drive	
  that	
  comes	
  with	
  the	
  board	
  unless	
  it’s	
  signed	
•  “Cavet	
  Emptor”	
Examples	
  of	
  TTL	
  Serial	
Yes,	
  that’s	
  a	
  hard	
  drive!	
This	
  unit	
  supports	
  Transmit	
  (TX),	
  Receive	
  (RX),	
Reset	
  (RST),	
  5	
  Volts+	
  (VCC5),	
  3.3	
  Volts+	
(VCC33),	
  and	
  Ground	
  (GND).	
These	
  are	
  easy	
  to	
  ﬁnd	
  on	
  eBay	
  or	
  Amazon	
  and	
are	
  extremely	
  useful	
  to	
  have	
  around!	
Examples	
  of	
  TTL	
  Serial	
(Wireless	
  Access	
  Points	
  have	
  it	
  J)	
Bring	
  On	
  The	
  AOack	
  –	
  Provisioning	
•  Edge	
  Card	
  Connectors	
– Some	
  manufactures	
  will	
  use	
  a	
  card	
  edge	
technique	
  to	
  provision	
– This	
  is	
  dependent	
  on	
  where	
  it’s	
  being	
  provisioned	
in	
  a	
  lot	
  of	
  cases.	
•  The	
  edge	
  card	
  connector	
  makes	
  it	
  possible	
  for	
  unskilled	
labor	
  to	
  provision	
  these	
  at	
  a	
  domesDc	
  locaDon.	
•  SomeDmes	
  done	
  if	
  soUware	
  isn’t	
  complete	
  by	
  the	
  Dme	
hardware’s	
  to	
  manufacture.	
•  SomeDmes	
  no	
  good	
  reason	
  at	
  all	
  …	
Close-­‐up	
  of	
  Edge	
  Card	
  Provisioning	
  Adapter.	
–  Credit:	
•  Credit	
  for	
this	
  to	
  “asbokid”.	
•  h"p://hackingbtbusinesshub.wordpress.com/2012/01/16/discovering-­‐2wire-­‐
card-­‐edge-­‐pinout-­‐for-­‐jtag-­‐i2c/	
Bring	
  On	
  The	
  AOack	
  –	
  Provisioning	
•  A	
  quick	
  demo	
  of	
  using	
  TTL	
  serial	
  for	
communicaDon	
  to	
  a	
  Bluetooth	
  Board	
  or	
  Hard	
drive.	
– Live	
  Demo	
  Goes	
  Here	
  J	
– Who	
  wants	
  to	
  try	
  to	
  associate	
  with	
  the	
  Bluetooth	
slave	
  node	
  here?	
  Any	
  takers	
  J?	
Debugging	
  Ports	
•  Remember	
  that	
  chip	
  inventory	
  we	
  were	
  talking	
about?	
•  Let’s	
  look	
  at	
  an	
  example,	
  which	
  type	
  of	
debugging	
  port	
  do	
  you	
  see?	
–  JTAG	
–  BDM	
–  ISP	
–  SPI	
–  I2C	
–  CAN	
–  NAND	
  ﬂash	
Debugging	
  Ports	
•  JTAG	
  Port	
  IdenDﬁcaDon	
– What’s	
  JTAG:	
•  JTAG	
  is	
  the	
  “Joint	
  Test	
  AcDon	
  Group”	
  standard	
  for	
circuit	
  level	
  debugging.	
– What	
  can	
  JTAG	
  do:	
•  Manipulate	
  individual	
  pins	
  on	
  components	
•  Change	
  component	
  state	
•  Alter	
  ﬂash	
  memory	
•  Has	
  access	
  to	
  many	
  debug	
  uDliDes	
Debugging	
  Ports	
•  JTAG	
  allows	
  control	
  of	
  all	
  devices	
  on	
  the	
  JTAG	
  bus	
–  Usually	
  seen	
  aOached	
  to	
  the	
  SPI	
  bus	
–  Pic	
•  JTAG	
  and	
  access	
  to	
  Flash	
–  JTAG	
  controls	
  individual	
  chip	
  lines	
  on	
  devices.	
–  If	
  there	
  is	
  a	
  ﬂash	
  chip	
  aOached	
  to	
  a	
  chip	
  with	
  JTAG	
  (like	
  a	
  NAND	
  Flash)	
chip,	
  you	
  CAN	
  get	
  the	
  contents	