User:  Write a script to automatically back up the specified log files on the server and set the automatic deletion of historical backups.
Assistant: #!/bin/bash # Specify the log file to be backed up and deleted logfile=/var/log/myapp.log bakfile=/var/log/myapp.log.bak # Set the number of backups and expiration time backup_count=7 backup_time=30 # Check if the backup file exists, create it if it does not exist if [ ! -f "$bakfile" ]; then touch "$bakfile" fi # backup file cp "$logfile" "$bakfile.$(date +%Y-%m -%d-%H-%M-%S)" # Delete expired backups, only keep the specified number of backup files find "${bakfile}.*" -mtime +${backup_time} -exec rm {} \; ls -t "${bakfile}.*" | tail -n +$((${backup_count}+1)) | xargs rm -f