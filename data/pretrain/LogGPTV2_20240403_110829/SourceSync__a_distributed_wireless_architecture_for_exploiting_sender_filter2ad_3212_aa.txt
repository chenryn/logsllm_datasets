title:SourceSync: a distributed wireless architecture for exploiting sender
diversity
author:Hariharan Rahul and
Haitham Hassanieh and
Dina Katabi
SourceSync: A Distributed Wireless Architecture for
Exploiting Sender Diversity
Hariharan Rahul, Haitham Hassanieh, and Dina Katabi
Massachusetts Institute of Technology
ABSTRACT
Diversity is an intrinsic property of wireless networks. Recent years
have witnessed the emergence of many distributed protocols like
ExOR, MORE, SOAR, SOFT, and MIXIT that exploit receiver diver-
sity in 802.11-like networks. In contrast, the dual of receiver diversity,
sender diversity, has remained largely elusive to such networks.
This paper presents SourceSync, a distributed architecture for har-
nessing sender diversity. SourceSync enables concurrent senders
to synchronize their transmissions to symbol boundaries, and co-
operate to forward packets at higher data rates than they could
have achieved by transmitting separately. The paper shows that
SourceSync improves the performance of opportunistic routing proto-
cols. Speciﬁcally, SourceSync allows all nodes that overhear a packet
in a wireless mesh to simultaneously transmit it to their nexthops, in
contrast to existing opportunistic routing protocols that are forced to
pick a single forwarder from among the overhearing nodes. Such si-
multaneous transmission reduces bit errors and improves throughput.
The paper also shows that SourceSync increases the throughput of
802.11 last hop diversity protocols by allowing multiple APs to trans-
mit simultaneously to a client, thereby harnessing sender diversity.
We have implemented SourceSync on the FPGA of an 802.11-like
radio platform. We have also evaluated our system in an indoor
wireless testbed, empirically showing its beneﬁts.
Categories and Subject Descriptors C.2.2 [Computer Sys-
tems Organization]: Computer-Communications Networks
General Terms Algorithms, Design, Performance
1 Introduction
Diversity across nodes is an intrinsic property of wireless networks.
The wireless environment exhibits both receiver diversity and sender
diversity. Receiver diversity is the property that a single transmitted
packet traverses different channels to different receivers, and hence
is unlikely to suffer fading at all receivers at the same time. Sender
diversity, on the other hand, is the property that a packet transmitted
simultaneously from multiple senders traverses different channels
to the same receiver, and hence is unlikely to suffer fading from all
senders at the same time. In the context of 802.11 networks, the
Permission to make digital or hard copies of all or part of this work for
personal or classroom use is granted without fee provided that copies are
not made or distributed for proﬁt or commercial advantage and that copies
bear this notice and the full citation on the ﬁrst page. To copy otherwise, to
republish, to post on servers or to redistribute to lists, requires prior speciﬁc
permission and/or a fee.
SIGCOMM 2010, August 30–September 3, 2010, New Delhi, India.
Copyright 2010 ACM 978-1-4503-0201-2/10/08 . . . $10.00.
ability to have multiple transmitters simultaneously forward a packet
to a receiver can harness both frequency diversity and power gains.
Speciﬁcally, 802.11 channels span a relatively wide bandwidth (20–
40 MHz), where different senders experience deep fading in different
frequencies. Enabling multiple transmitters to simultaneously for-
ward a packet to a receiver ensures that no frequency is deeply faded
at the receiver, and reduces the overall bit error rate for a particular
transmission power. Second, simultaneously forwarding a packet
enables senders to combine their transmission power and thereby
deliver a higher SNR to the receiver, as compared to a single sender.1
Despite the beneﬁts of simultaneous forwarding from multiple
transmitters, existing approaches for sender diversity in 802.11 net-
works restrict themselves to only one sender transmitting at a time,
using mechanisms like picking the sender with the best channel [26].
This is in sharp contrast to receiver diversity where many practical sys-
tems like ExOR, MORE, SOAR, SOFT, and MIXIT [4, 5, 31, 44, 19]
leverage simultaneous reception across multiple receivers.
Simultaneous transmission from multiple senders has challenged
802.11 for three main reasons.
• First, senders need to be synchronized to the symbol level in order
that their signals combine on the medium in a manner that reduces
the overall packet error rate. Such ﬁne-grained transmitter synchro-
nization is difﬁcult to achieve in a distributed manner, as has been
observed by past research [9, 18, 13, 30]. The difﬁculty arises
because the different transmitters need to time their transmissions
so that they are synchronized accurately (to within tens of ns) [9]
at the receiver. In the absence of a shared clock or a central con-
troller, the only mechanism for synchronization is for senders to
use packet reception as a reference. However, such a mechanism
requires transmitters to compensate for differences in propagation
delays, and hardware turnaround times from reception to transmis-
sion. These measurements are challenging because a node does
not detect packet reception at the exact instant when the signal
arrives at its antenna, but rather incurs a random delay depending
on the noise in the environment and the receiver hardware. This
variability is usually on the order of hundreds of ns [42], which is
too high for accurate symbol-level synchronization.
• Second, the received signal is a combination of signals from multi-
ple senders. Each of these signals has traversed a different path,
and has hence experienced a different channel. One might think
that the receiver could compensate for the channel distortion of
the composite signal in the same manner as it would compensate
for the channel distortion of a signal from a single sender. Unfor-
tunately, this approach does not work since the composite channel
has fundamentally different characteristics from single sender-
receiver channels. Speciﬁcally, unlike single sender-receiver chan-
nels, which have a constant attenuation throughout a packet, the
attenuation of the composite channel varies even within a single
packet. This is because the oscillators of different senders naturally
1The FCC limits the maximum transmission power of a single sender, and combining
transmissions therefore increases the maximum received power.
171have slightly different operating frequencies, and hence the signals
from different senders continuously rotate relative to each other.
• Finally, transmitted signals are complex numbers which have
phases. Unless these signals are carefully orchestrated at the
senders, they can add up constructively, enhancing each other,
or destructively, weakening each other.
This paper introduces SourceSync, a practical architecture for
harnessing sender diversity. SourceSync is designed for OFDM,
which is the transmission scheme for most modern wireless networks,
including 802.11 a/g/n, WiMax, LTE etc. SourceSync has three
components that harness sender diversity in a distributed manner:
Symbol Level Synchronizer (SLS). SourceSync has a distributed
synchronization algorithm that leverages packet reception as a time
reference, computes robust estimates of the propagation delays from
all senders to the receiver, as well as hardware turnaround times at
each of the senders, and compensates for these delays at the senders
prior to transmission, in order to ensure that the packets arrive syn-
chronized at symbol boundaries at the receiver. The key feature that
allows SourceSync to achieve tight synchronization is that it can
prevent the inherent variability in packet detection from inducing
variability in its propagation delay and turnaround time estimates.
SourceSync has a mechanism that allows it to accurately measure
the delay between the ﬁrst sample of a packet and when the receiver
detects that packet, and account for the delay when computing its
estimates. Further, SourceSync can leverage data packets to track
changes in propagation delay over time, and hence keep senders
synchronized without the need for active measurements.
Joint Channel Estimator (JCE). A SourceSync receiver decodes
the combined signal from multiple synchronized senders. However,
SourceSync differs from prior schemes, where transmitted signals
interfere, and hence decoding the signals either requires multiple
transmissions from each sender, as in ZigZag [13], or a large differ-
ence in power (or code rate) between them, as in Successive Interfer-
ence Cancellation [14, 40]. In contrast, SourceSync does not need
to treat senders as interfering, and can decode a single simultaneous
transmission from multiple senders, even when they have comparable
powers. It estimates the individual channels from each sender, com-
putes how they interact to create the composite channel, and tracks
the variations of the composite channel through the combined packet.
Smart Combiner (SC). Since signals from multiple senders rotate
continuously relative to each other, naively transmitting the same
packet from all senders will cause the signals to combine destruc-
tively at some points within the packet. Therefore, senders need to
have a joint strategy for manipulating the phase of the signal prior to
transmission to ensure that their transmitted codewords do not com-
bine destructively. SourceSync leverages the rich body of research
on space-time block codes [39, 2, 16], which are typically used in
MIMO systems to control how signals from different antennas on a
single transmit node combine at a receiver. In contrast to MIMO sys-
tems, however, SourceSync uses these codes in a distributed manner
across multiple transmit nodes.
We use SourceSync to develop the following two protocols.
1.1 Combining Sender Diversity with Opportunistic
Routing
Opportunistic routing protocols leverage receiver diversity; they ex-
ploit the fact that since wireless receptions are probabilistic, it is
unlikely that all nodes closer to the destination are unable to receive
a packet, as shown in Fig. 1(a). Protocols like ExOR, MORE, SOAR,
ABCDAEF


ED
EE	CD




ABCDAEF

ABCDAEF

	

ED
EE	CD




ABCDAEF

	
FD
EE	CD
(a) First-hop receiver diversity
(b) Second hop sender diversity
Figure 1: Opportunistic routing with sender diversity.
SourceSync enables multiple forwarders to transmit jointly to the
destination.

	AB




	AB

CDEF
AE
D
	A
	A
(a) Uplink receiver diversity
(b) Downlink sender diversity
Figure 2: Last-hop with sender diversity. SourceSync enables
multiple APs to transmit jointly on the downlink.
and MIXIT therefore allow any downstream node that receives a
packet to forward it to the destination. However, none of these
schemes take advantage of the analogous opportunity of sender diver-
sity presented by the fact that multiple nodes often receive the same
packet. SourceSync complements the opportunistic receptions ex-
ploited by current protocols with opportunistic synchronous transmis-
sions by multiple forwarders. Speciﬁcally, since multiple forwarders
are likely to receive a packet, they can transmit it simultaneously as
shown in Fig. 1(b). This provides two types of gains. First, since
different forwarders experience fades in different frequencies [30],
joint transmission reduces the likelihood that a frequency experiences
a deep fade at the receiver, and hence decreases the overall bit error
rate. Second, since joint transmission allows forwarders to combine
their power, it improves the receiver SNR, and thereby its bit rate.
1.2 Combining Sender Diversity with Last-hop Receiver
Diversity
Protocols like MRD, SOFT and Link-Alike [25, 44, 17] all exploit
different aspects of the same concept: last-hop diversity. Consider,
for example, a sender that has poor connectivity to multiple nearby
APs. A transmitted packet is unlikely to reach any speciﬁed AP, but
is likely to be received by at least one AP. All the above protocols
exploit this receiver diversity by allowing APs to combine received
bits or packets over the wired network, and hence can increase uplink
reliability without any retransmissions, as shown in Fig. 2(a). How-
ever, none of these schemes can similarly address a lossy downlink
without expending medium time on retransmissions. SourceSync
complements all these protocols by harnessing sender diversity to
increase downlink reliability without any retransmissions, analogous
to existing receiver diversity mechanisms on the uplink. Speciﬁcally,
instead of requiring that a client receive packets from only one AP
at a time, in SourceSync, multiple neighboring APs can transmit
simultaneously to the client as in Fig. 2(b), and increase throughput.
1721.3 Results
We implemented SourceSync on the FPGA of the WiGLAN radio
platform [10]. We also implemented proofs of concept of both last-
hop diversity, and opportunistic routing with sender diversity. Results
from an indoor wireless testbed reveal the following:
• SourceSync’s symbol level synchronization is accurate. Testbed
evaluations show that two randomly chosen transmitters using
SourceSync have a 95th percentile synchronization error of at
most 20 ns across the range of operational SNRs of 802.11.
• SourceSync increases the gains of opportunistic routing by exploit-
ing sender diversity. Evaluating across multiple deployments with
different bitrates and link loss rates, we show that the combination
of SourceSync and ExOR achieves a median throughput gain of up
to 45% over ExOR alone, and up to 2× over single-path routing.
• SourceSync is effective in harnessing last-hop sender diversity.
Speciﬁcally, by having two APs transmit simultaneously to a client,
SourceSync provides a median throughput gain of 57%. This is
because the higher power resulting from simultaneous transmission
from APs allows the combined transmission to use a higher 802.11
rate than a transmission by either AP alone.
1.4 Contributions
This paper makes the following contributions:
• It demonstrates via a design, implementation and testbed evalua-
tion the practicality and beneﬁts of simultaneous transmission in
802.11 networks.
• It presents a distributed algorithm for symbol level synchronization
and an empirical study of its accuracy.
• It reveals the synergy between opportunistic routing and sender
diversity by showing that opportunistic receptions can be further
used to enable concurrent forwarding to downstream nodes.
2 Related Work
Sender diversity was pioneered by Laneman and Wornell’s work on
cooperative diversity, which theoretically demonstrated the gains of
spatially diverse senders cooperating to relay information [21, 32].
Since then, many papers have analyzed aspects of sender spatial di-
versity focusing on signal processing and coding algorithms at the
relays [35, 20, 33]. These papers focus on theoretical gains, ignore
practical issues such as transmitter synchronization and oscillator
offsets, and do not present a practical working system. Cellular net-
works today attempt to exploit sender diversity using Distributed
Antenna Systems (DAS) [6]. DAS do not allow separate transmitters
to send simultaneously; rather, they consist of a single transmitter
with geographically distributed antennas connected using long, low
attenuation cables. These systems are expensive and inﬂexible [7],
and hence there is increasing interest in exploiting simultaneous
transmissions from multiple senders in future cellular networks. The
most recent WiMax multihop relay standard [38] includes simulta-
neous transmissions from multiple relays as an optional feature, and
cooperative relays are also being considered for the future 3GPP
LTE-Advanced standards [36]. However, there is no published work
currently demonstrating a practical design and implementation of
simultaneous transmissions for cellular systems, and further these sys-
tems operate under different constraints as they have the beneﬁt of a
centralized scheduler and a shared GPS clocking mechanism. 802.11
networks have also shown interest in exploiting sender diversity; how-
ever they still restrict themselves to only one sender transmitting at a
time, using mechanisms like picking the sender with the best chan-
nel [26], which can neither exploit frequency diversity across senders,
nor the power gain from combining multiple senders. Concurrent
with our work, Zhang et al. [45] have demonstrated an implementa-
tion of cooperative diversity with nodes connected to a single shared
clock. In contrast, our approach requires no shared clocks and applies
to practical wireless networks, and also demonstrates the synergy of
sender diversity with opportunistic routing.
Additionally, there has been recent work on systems that exploit
concurrent transmissions from multiple senders, but cannot provide
any sender diversity gains since they do not synchronize transmissions
at the symbol level. These include systems like SMACK [9] for group
acknowledgments, Message-in-Message [23] for exposed terminals,
interference cancellation [14] and ZigZag [13] for hidden terminals,
and ANC [18] for network coding.
Finally, SourceSync builds on past work on space-time block
codes. These codes are used by different antennas on a single MIMO
transmitter and do not extend to different transmitters due to lack
of synchronization [39, 1, 2, 16], or because of oscillator frequency
offsets [22]. SourceSync addresses synchronization and oscillator
offset issues, showing that these codes can be implemented in a
distributed manner to collect the gains of sender diversity in practice.
3 SourceSync Overview
SourceSync enables multiple senders to concurrently forward a
packet to one or more receivers in order to collect diversity and power
gains. It does so via a fully distributed joint PHY-MAC architecture.
(a) MAC: Medium access for concurrent transmissions is done by
one of the senders, which we call the lead sender. Any node in the
network can be a lead sender for a transmission. The lead sender ac-
cesses the medium via carrier sense, just as in 802.11. When the lead
sender acquires the medium, it transmits a synchronization header.
Other nodes that hear the synchronization header, and have the packet
being transmitted, can then join the lead sender’s transmission.
(b) PHY: The PHY layer ensures that concurrent transmissions are
decodable at their intended receiver(s). It does so using three com-
ponents: (a) a Symbol Level Synchronizer that ensures that trans-
missions from multiple nodes are synchronized, and can be decoded
jointly at the receiver, (b) a Joint Channel Estimator which estimates
the composite channel from the concurrent senders, and compen-
sates for the resulting distortions, and (c) a Smart Combiner that
encodes the concurrent transmissions to ensure that they combine on