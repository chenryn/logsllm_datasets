# A Study of MVNO Data Paths and Performance

**Authors:**
- Paul Schmitt
- Morgan Vigil
- Elizabeth M. Belding

**Affiliation:**
University of California, Santa Barbara, USA

**Contact:**
- pschmitt@cs.ucsb.edu
- mvigil@cs.ucsb.edu
- ebelding@cs.ucsb.edu

## Abstract
Characterizing mobile data traffic performance is challenging due to the inherent complexity and opacity of mobile networks. However, this is increasingly important as emerging wireless standards approach wireline-like latencies. Mobile Virtual Network Operators (MVNOs) add to this complexity with additional infrastructure and network configurations. We collected and analyzed traces from mobile carriers in the United States and their corresponding MVNOs to identify differences in network performance and behavior. Our findings indicate that traffic on MVNO networks often takes more circuitous and less efficient paths to reach content servers compared to base operators. Factors such as the location of the destination server and the provider's network design are critical in understanding these behaviors and their implications on performance.

## 1. Introduction
What factors cause one mobile Internet provider to be faster than another, even if they share common core infrastructure? Traditional metrics for speed may not perfectly correlate with end-user performance and are heavily influenced by the design and behavior of the underlying mobile data network. The challenge of mobile network characterization is further compounded by the rise in popularity of Mobile Virtual Network Operators (MVNOs). In this paper, we shed light on observable traffic behaviors exhibited by mobile networks that affect performance metrics and user experience. We examine mobile data network behavior when connecting to popular content delivery networks (CDNs) used to serve media. We are particularly interested in performance comparisons between the four major mobile carriers in the United States and MVNOs that license the use of the underlying base carrier infrastructure. Ultimately, we aim to explore network topology factors that affect traffic in mobile data networks.

MVNOs have gained popularity due to relaxed contract terms and have quickly grown their market share in recent years [1–3]. They operate by leasing access to base mobile network operator (MNO) infrastructure, thus avoiding the high costs of building their own networks or licensing spectrum. While MVNO data networks are often assumed to perform worse, previous work [4] has shown that application performance does indeed suffer when using MVNOs compared to MNOs. We investigate MVNOs and MNOs, searching for potential causes of degraded performance, such as server resolution location and inefficient (e.g., excess hop counts and geographically indirect) paths.

We focus on traffic to CDNs, which improve performance for end users by replicating identical content across geographically diverse locations [5]. CDNs are crucial for user experience as they typically deliver large web objects. The exact CDN server chosen by the client when browsing is dependent on DNS resolution, with the expectation that the client is 'near' the DNS resolver. However, accurately localizing mobile users is a difficult challenge [6], leading to issues where the closest or best server depends on the mobile network core topology and peering arrangements between content providers and mobile carriers. We study geographic paths taken by traffic on all mobile networks to better understand the obtained performance and routing behavior. Specifically, we address the following questions:
- Can we identify reasons behind MVNOs performing worse than MNOs?
- Can we find potential areas for improvement to reduce performance gaps between mobile carriers?
- Do we observe marked differences between full and light MVNOs?

## 2. Background
### 2.1 CDNs and DNS
The use of CDNs to deliver content from distributed replica servers is common to improve performance, especially as Internet content has become increasingly heavy and media-rich. Client DNS requests resolve to particular replica server IP addresses, ideally choosing the server with the lowest round trip time (RTT) to maximize application performance [7,8]. For mobile data networks, the limited number of public-facing gateways in the cellular core network and the location of cellular network DNS resolvers make localizing clients difficult. Peering arrangements, or lack thereof, between mobile providers and content providers can also lead to inefficient traffic routes, even with nearby replicas [9].

### 2.2 MVNOs
MVNOs have recently increased in popularity worldwide. They offer telecommunications services without owning all the mobile infrastructure, instead leasing access from MNOs. The rise in popularity of MVNOs is often attributed to more flexible contract terms, such as pay-as-you-go and pre-paid plans, compared to traditional post-paid plans. MVNOs can be classified as either full or light. Full MVNOs license only the radio network of the base carrier and implement their own core, including authentication and billing services. Light MVNOs, or resellers, fully use the base carrier infrastructure and are often created to target specific demographics or to lower consumer costs by cutting back on support services.

## 3. Data Collection
We collected data from eight mobile devices running on eight different carriers between March 6 and March 20, 2015. The experiment was conducted over two weeks to account for performance differences attributable to time-of-day patterns. All measurement phones were located in Santa Barbara, CA, and left in a static location. All phones reported 'good' or 'great' signal strength via the Android telephony API throughout the experiment. We focused on routes and performance associated with the popular social media sites Facebook and Instagram, which are responsible for significant amounts of mobile Internet traffic and are widely replicated across many well-known CDN data centers. This allowed us to explore geographic differences between carriers. The list of CDNs used as measurement points can be found on our project repository at https://github.com/schmittpaul/mobileCDNs, including 108 servers: 72 associated with Facebook and 36 with Instagram.

### 3.1 Carriers and Phones
We collected data on all four major base carriers in the United States, identified as A, B, C, and D. Carriers A and C are GSM networks, while carriers B and D use CDMA technology. MVNO carriers are identified as A-1, B-1, C-1, and D-1, with their letters indicating the underlying base carrier. MVNO B-1 is a light MVNO, with full access to the infrastructure of carrier B. Carriers A-1, C-1, and D-1 are full MVNOs with different SIM cards and contracts specifying the base carrier used. All phones run Android 4.4 and were kept in a high-power state to avoid latency due to radios entering low-power states. All phones were attached to their carrier (i.e., not roaming). We chose to run all experiments while connected via 3G rather than 4G due to uneven 4G LTE coverage in our area between carriers. Recent work [9] has found that 3G and 4G mobile networks in the U.S. have few Internet ingress points, meaning 4G networks will exhibit similar behavior in terms of routes and CDN resolution as 3G networks.

### 3.2 Traceroute and Location Data
Each hour of the testing period, each device recorded a traceroute to each of the servers in the CDN server list, resulting in 14 × 24 × 8 × 108 = 290,304 records. We used multiple techniques to estimate the location of each IP address in the traceroute records. First, we employed the IP2Location DB5 database to map traceroute IP addresses to latitude and longitude coordinates. Prior work has established that IP geolocation databases can be inaccurate [11]. We verified the IP-location mapping through a manual sanity check, finding improbable mappings. To correct inaccuracies, we used nslookup to resolve the human-readable name of the IP address and used Internet looking glass servers available through traceroute.org to further estimate location. Overall, out of 5,172 unique IP addresses, we manually estimated the location for 1,988 addresses (36.4%).

We ran whois on each observed IP address to determine the associated Autonomous System (AS) number. With this information, we created a dataset for each attempted traceroute that includes the number of hops, the IP address associated with each hop, the geographic coordinates, the AS number for each hop, and the observed RTTs for three traceroute probes.

## 4. Network Analysis
We measured traffic on the four major mobile network operator networks in the United States and MVNO carriers operating on each of them. We first looked at network performance using standard metrics such as round trip times (RTTs), hop counts, and autonomous system paths. We then combined geographic information and traceroute records to explore traffic route path characteristics.

### 4.1 Round Trip Times (RTTs)
We began by investigating RTTs for packets traversing the mobile networks to the 73 non-location-specific servers specified in our CDN server list. RTT is a critical metric in network performance as most TCP variants rely on RTT to determine throughput [12]. Figure 1 shows a cumulative distribution function (CDF) plot of measured RTT values for all carriers in our study. We observed considerable performance variance between the networks despite all measurements originating from the same location.

We also observed significant performance differences between base carriers and MVNO carriers operating on the corresponding base carrier infrastructure. For instance, in Figure 1, we see a 772.03 ms difference between the median RTT values for carrier A and the MVNO carrier A-1. Surprisingly, MVNO carriers A-1 and B-1 outperformed their respective base carriers in terms of achieved RTTs, with a 772 ms lower median value for A-1 and an 87.24 ms median difference between B and B-1. These results contradict the expectation that MVNOs universally offer inferior performance. Previous work has established the widespread use of transparent middleboxes on mobile networks [13], which could help explain why networks with better RTT performance do not necessarily outperform others, as such middleboxes likely ignore our measurement traffic. To fully understand round trip performance, we must also consider the locations of servers to which client traffic is resolved, explored in the next section.

### 4.2 Location-Specific RTTs
We studied performance by examining the data center locations to which carriers are most likely to resolve. We recorded the geographic location for the destination server in all of the traceroutes corresponding to non-location-specific requests and found that the vast majority of requests resolve to data centers in nine US cities, with most carriers heavily favoring relatively few server locations. We then measured RTT performance to all locations using our list of location-specific servers, identified using 3-character airport codes in server names (e.g., scontent-a-lax.cdninstagram.com corresponds to an Instagram server in Los Angeles). Figure 2 shows RTT CDFs for each of the data center locations and highlights each carrier’s top three 'preferred' locations. We determined location preference by calculating the percent of 'hits' at each location for all non-location-specific requests.