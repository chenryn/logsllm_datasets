equivalents in existing extensions. Architectural
to keep all developments and applied tools freely
aspects, user-behavior, potential changes of usage or
available.
information on the building renovation/refurbishment
The 3DCityDB scheme is derived from the CityGML status are just a few parameters to be mentioned here,
model and currently available in the SQL languages which are summarized in a “soft factors” class.
PostgreSQL and Oracle. By combining the In order to keep the core database in its original
3DCityDB tool and PostGIS, it is possible to display shape and to maintain the compatibility with the
3D rendered CityGML datasets. As the CityGML 3DCityDB-importer, both ADEs are decoupled from
structure was originally developed for urban planning the 3DCityDatabase schema. Technically, this is
purposes, it is necessary to expand its capabilities for realized via transfer classes, such as the
this project. In addition to geometrical and “campus_building” table, which represent a unique
geographical data, building performance values and interface between the basic structure and the newly
measured energetic values need to be processed. added extensions. Hence, the developed database
There are prefabricated expansions called ADE schema in this version meets all the project specific
(Application Domain Extension) to meet certain requirements and is well-suited for the necessary
additional requirements to CityGML. ”CityGML purposes and it is possible to store and retrieve the
EnergyADE“, for example, contains information mandatory minimum required data for the city quarter
about the thermal energetic characteristics of simulation and, even more, all relevant parameters for
buildings, and ”CityGML UtilityNetworksADE“ a detailed building observation.
models the underground supply grids. These However, these extensions clearly show the need for
extensions contain necessary relationships that meet revisions of the CityGML-related standards in order
the specifications required by the project with respect to better reflect energy-related issues.
to the thermal and energetic perspective of the
campus properties. These relationships are captured
in UML diagrams and are implemented into the
relational database schema of 3DCityDB as depicted
in Figure 2.
Figure 3. Three main tables of the developed
PostgreSQL database schema
Figure 3 describes a small area of the database
Figure 2.The developed PostgreSQL database
structure. The DB class “building energy” is used to
schema
store necessary minimal datasets for the teaser
Figure 2 shows the combination of 3DCityDB and application in a singular table. This approach makes
two of the ADE extensions. 3DCityDB and it simple to retrieve information for simulation by a
UtilityNetworksADE are kept coherent while aspects standardized script such as Python. With automated
of the EnergyADE are fragmented into smaller interaction of database and simulation tools, building
subdivisions. This is done in order to utilize functions models can be created in an instance and hence more
given by the EnergyADE in varying context as variations can be calculated in less time. As the
238
C-03-2 Database development with “3D-CityGML”- and
“EnergyADE”- schema for city-district-simulation modelling
TEASER application can be used with varying depth Table 1 illustrates the connections of identifiers
of information, it is possible to import the best dataset between those different building parts and their
for each appliance. For this purpose, there is room for corresponding datasets.
all the detailed information in class tables as well. In
Every building, regardless of its data sources, has its
the “energy building” table, for example, properties
own serial ID. The building complex is based on data
such as net floor area, year of construction, etc. are
from FM and has neither a root nor a parent ID but a
maintained. Furthermore, building-specific
unique ID, here 13493 in this example. The building
information like facade type or window-fraction-area
wings have the same id_root and id_parent and refer
is contained, which drastically improves the modeling
to the ID of the building complex. The individual
accuracy of TEASER, if available. Even a
parts of the building relate with their id_root to the
combination of minimal and enriched datasets in one
complex and with its id_parent to the wing of the
simulation cycle is possible. This flexible variation of
building. Due to these circumstances, properties that
the focus and detail enables an extended research in a
are only available for the building complex can be
city district environment taking into account
inherited to other parts of buildings. This gives the
restrictions in terms of limited available information
advantage of linking CityGML geometry information
and/or limitations in computing power or modeling
to the record of the building characteristics based on
constraints (e.g., in Modelica).
the FM and thus for the visualization in GIS, for
Another important factor are inheritance IDs that instance.
allow for coherent entities between different data
Tabelle 1:
sources. For instance, the root or parent IDs of a
Context between id, id_root and id_parent
building allows linking different data from the
campus facility management, the onsite-view and the id name id_ id_
CityGML for each individual building. Figure 4 root parent
illustrates this in detail. The examined building
13493 2222
consists of four building parts and three structural
entities. Energy consumption, however, is given for 13494 2222_1 13493 13493
the building-complex in total. With hierarchical
13500 2222_1_004 13493 13494
conjunctions as shown in Figure 4 it is possible to
connect data of varying level of detail to one 13495 2222_2 13493 13493
consistent dataset. In this example, the first four
13497 2222_2_001 13493 13495
numbers represent the building-number given by the
13499 2222_2_003 13493 13495
FM and the second column identifies the part of the
building. In addition, the last set of numbers describe 13496 2222_3 13493 13493
the LOD2-blocks the building consists of.
13498 2222_3_002 13493 13496
2222
2222_2_001
2222_2
2222_1_004 2222_3_002
2222_1 2222_3
2222_2_003
2222_3_002
LOD2
Onsiteview
FM-Data
Figure 4.Example for one building complex (Facility
Management data) consisting of three building wing
s(determined by onsite views) and four sub-buildings
(geometry information from CityGML data)
239
C-03-2 Database development with “3D-CityGML”- and
“EnergyADE”- schema for city-district-simulation modelling
APPLICATION
In addition to the queries in order to build thermal
energy performance building models in an automated
way, the 3D geometries stored in the EnEff:Campus
database are of essential benefit for the visualization
of the campus properties. For the visualization, both
the geometric information from a laser scanning (in
CityGML format) as well as the three-dimensional
building geometries are available, the latter created
by SketchUp Make. Due to the enlargement of the
”3D City database“ by the “Energy ADE” is it Figure 5. Distribution to the age of the campus
possible to assign for instance energy consumption buildings of the RWTH Aachen University
data to building geometries and to visualize this
content geographically. For example, by using the Through such a view, the scenario-based retrofitting
following SQL command: potential of the building stock can be geographically
identified. Another option is to view the geographical
SELECT distribution of the heating energy consumption as
time_series_regular_test.id,
shown in Figure 6, for example.
surface_geometry.geometry,
surface_geometry.height,
building.measured_height,
...
building_energy.year_of_construction,
...
time_series_regular.values,
FROM
public.building,
...
public.time_series,
public.time_series_regular,
public.surface_geometry
WHERE
... Figure 6. Specific energy consumption for heating of
building_energy.id_building_campus = the RWTH Aachen campus properties
building_campus.campus_building_parent_id
AND
... LIMITATIONS AND DISCUSSION
thematic_surface.building_id = building.id
AND The challenge of minimizing potential sources of
... error comes along with the complexity of this project.
thematic_surface.lod2_multi_surface_id AND
As for all simulation approaches, the quality of the
provided data determines the quality of the results. In
thematic_surface.type = 'GroundSurface';
this case there are a lot of unknowns and issues
This code matches geometrical representations of the concerning data acquisition and data quality. Thus, it
buildings to their particular properties, stored in the is very important to verify physical input parameters,
table ”building_energy“. Hence, a geographical design restrictions and environmental conditions.
distribution of year of construction of the campus Hopfe and Hensen pointed out identification methods
buildings can be represented graphically in QGIS, as through sensitivity analysis and Monte Carlo
illustrated in Figure 5. simulations [Hopfe, Hensen 2011]. In this low-level
approach, great emphasis is placed on appropriately
modeling energy performance characteristics with a
reasonable minimum of very few parameters, which
comes along with uncertainties related to those
parameters. Unrecognized relations such as user-
behavior, usage of process heat or infiltration can
greatly influence results . User-behavior in particular
is difficult to estimate and to measure, although it
impacts energy demand prediction.
To determine systematic errors evoked especially by
simplified models, detailed comparative simulations
240
C-03-2 Database development with “3D-CityGML”- and
“EnergyADE”- schema for city-district-simulation modelling
are carried out. Physical parameters and support, Energy and Building, Volume 43, 2789-
environmental aspects are statistically tested and 2805
random samples are compared to empirical data taken
IEA, Technology Roadmap: Energy Efficient
from on-site visits.
Building Envelopes, OECD/IEA 2013.
Another issue is related to the level of detail of
https://www.iea.org/publications/freepublications
modelling and the total number of represented
/publication/TechnologyRoadmapEnergyEfficien
buildings. With the statistical approach on hand, a
tBuildingEnvelopes.pdf
given number of buildings can be modeled while the
(downloaded 12.03.2016),
overall accuracy is still acceptable. A comparison
between detected U-values by on-site view and those Kolbe, T. H., Yao Z., Nagel C., Kunde F., et. al.
put out by TEASER show that for ten selected 2015. 3D City Database for CityGML Version
facades, seven facades differ about 13 % and three 3.0.0 Documentation.
facades differ between 20-50 % [Riedel2015]. This
first comparison shows that if the number of Lauster M., Teichmann J., et. al. 2014. Low order
buildings decreases, the accuracy may drop thermal network models for dynamic simulations
significantly. This makes it difficult to develop of buildings on city district scale. Building and
remediation plans for individual buildings, which is, Environment, Volume 73, Pages 223-231. ISSN
on the other side not in the scope of this work and 0360-1323.
would require other modelling methods. Hence, the http://dx.doi.org/10.1016/j.buildenv.2013.12.016
focus of this project lies on interdependencies of all
Müller D., Monti A, Stinner S, Schlösser T., et. al.
involved sectors and this approach brings forth the
2015. Demand side management for city
potential of an integrated perception. Furthermore, a
districts, Building and Environment, Volume 91,
reduction of energy demand influences the
September 2015, Pages 283-293, ISSN 0360-
production and distribution side as well, for example.
1323,
In order to optimize not only certain aspects but the
http://dx.doi.org/10.1016/j.buildenv.2015.03.026
campus system as a whole, interdependencies and
(http://www.sciencedirect.com/science/article/pii
synergies need to be uncovered.
/S0360132315001432)
The development of this integrated database-driven
approach enables researchers to gather and store PostgreSQL, 2015. PostgreSQL 9.3.
information about the whole energy cycle in one http://www.postgresql.org/
place. With this comprehensive data, different (downloaded .13/03/2016)
viewpoints on energy efficiency and production
QGIS. 2015. QGIS User Guide Release 2.8.
demand balance can be obtained and optimized
http://qgis.org/en/docs/index.html
solutions can be proposed even in an ongoing process
(downloaded .26/11/2015)
of adapting to ever-changing environmental and user-
related restrictions. Remmen P., Lauster M., et. al. 2016. CityGML
Import and export for dynamic building
ACKNOWLEDGEMENTS
performance 1 simulation in modelica
We gratefully acknowledge the financial support of
Riedel B., 2015. Datenbankgestützte Erfassung und
this work by the German Federal Ministry of
Visualisierung ausgewählter Lehr- und
Economics and Energy (BMWi) as per resolution of
Forschungseinrichtungen der RWTH-Aachen
the German Parliament under the funding code
mithilfe eines Geoinformations-systems (GIS)
03ET1260A.
SketchUp. 2016.
REFERENCES
https://www.sketchup.com/de/products/sketchup-
make (downloaded .02/02/2016)
CityGML Energy ADE. 2016.
http://www.citygmlwiki.org/index.php/CityGML Special Interest Group 3D. 2015. Energy ADE
_Energy_ADE development.
http://en.wiki.energy.sig3d.org/index.php/Main_
Energy ADE. 2016.
Page (downloaded 11/12/2015)
http://www.citygmlwiki.org/index.php/CityGML
_Energy_ADE (downloaded .13/03/2016) UNEP, 2009. Sustainable Buildings & Construction
Initiative, Buildings and Climate Change -
Häfele, K.H., 2013. - City Geography Markup
Summary for Decision-Makers,
Language,
http://www.unep.org/sbci/pdfs/SBCI-
http://www.citygmlwiki.org/index.php/Main_Pag
BCCSummary.pdf (downloaded 18/02/2016)
e (downloaded .11/12/2015)
Hopfe C., Hensen J., 2011. Uncertainty analysis in
building performance simulation for design
241