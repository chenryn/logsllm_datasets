## IMPORTANT: DevOps Kit (AzSK) is being sunset by end of FY21. More details [here](../../../ReleaseNotes/AzSKSunsetNotice.md)
----------------------------------------------
SQLDatabaseDescription & RationaleControlSeverityAutomatedFix ScriptEnable Azure AD admin for the SQL DatabaseUsing the native enterprise directory for authentication ensures that there is a built-in high level of assurance in the user identity established for subsequent access control. All Enterprise subscriptions are automatically associated with their enterprise directory (xxx.onmicrosoft.com) and users in the native directory are trusted for authentication to enterprise subscriptions.HighYesYesTransparent data encryption (TDE) must be enabledUsing this feature ensures that sensitive data is stored encrypted at rest. This minimizes the risk of data loss from physical theft and also helps meet regulatory compliance requirements.HighYesYesEnable SQL Server threat detection with email admins option. Do not exclude any detection typesEnabling threat detection helps generate alerts about suspicious activity that might indicate attacks such as SQL Injection, login from a new location, unusual usage patterns and related attacks in a timely manner.HighYesYesEnable SQL Database threat detection with email admins option. Do not exclude any detection typesEnabling threat detection helps generate alerts about suspicious activity that might indicate attacks such as SQL Injection, login from a new location, unusual usage patterns and related attacks in a timely manner.HighYesYesIn a SQL Server with multiple databases, setup firewall rules also at the database levelUsing the IP firewall rules ensures that access to the data or the service is restricted to a specific set of IPs. While this may not be feasible in all scenarios, when it can be used, it provides an extra layer of access control protection for critical assets and makes your database more portable.HighNoNoDo not use SQL Authentication. Use AAD-authentication insteadUsing the native enterprise directory for authentication ensures that there is a built-in high level of assurance in the user identity established for subsequent access control. All Enterprise subscriptions are automatically associated with their enterprise directory (xxx.onmicrosoft.com) and users in the native directory are trusted for authentication to enterprise subscriptions.HighNoNoClient-side encryption should be used where appropriateUsing client-side encryption in 'Always Encrypted' mode helps protect sensitive data at rest on the server, during movement between client and server and ensures that only client applications or app servers that have access to the encryption keys can access plaintext data.MediumNoNoAccess to SQL Servers and DBs must be granted in accordance with the principle of least privilegeGranting minimum access ensures that users are granted just enough permissions to perform their tasks. This minimizes exposure of the resources in case of user/service account compromise.MediumNoNoConfigure only the required IP addresses on SQL firewall. Do not use Any-to-Any IP range 0.0.0.0-255.255.255.255Using the firewall feature ensures that access to the data or the service is restricted to a specific set/group of clients. While this may not be feasible in all scenarios, when it can be used, it provides an extra layer of access control protection for critical assets.HighYesNoEnable SQL Server audit with selected event types and retention period of minimum 365 daysAuditing enables log collection of important system events pertinent to security. Regular monitoring of audit logs can help to detect any suspicious and malicious activity early and respond in a timely manner.MediumYesYesEnable SQL Database audit with selected event types and retention period of minimum 365 daysAuditing enables log collection of important system events pertinent to security. Regular monitoring of audit logs can help to detect any suspicious and malicious activity early and respond in a timely manner.MediumYesYesLogs should be reviewed routinelyPeriodic reviews of diagnostics, activity and audit logs ensures that anomalous activity can be identified early enough instead of after a major compromise.MediumNoNoReview the Data Masking policy for SQL Database sensitive data columns if in use.Database dynamic data masking limits sensitive data exposure by masking it to non-privileged users and hides the sensitive data in the result set of a query over designated database fields. When used dynamic data masking should cover all sensitive columns.MediumYesNoUse the 'Allow access to Azure services' flag only if required.The 'Allow access to Azure services' setting configures a very broad range of IP addresses from Azure as permitted to access the SQL Server. Please make sure your scenario really requires this setting before enabling it. Turning it ON exposes your SQL Server to risk of attacks from resources (IPs) owned by others in the Azure region.MediumYesNo