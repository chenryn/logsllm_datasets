âˆ‘
ğ‘›ğ‘–ğœ‹(ğ’”) =ğ‘
Proof: Since the sum of the total population in a state is
ğ‘€âˆ‘
constant, we can writeâˆ‘
(4)
for any partition of states ğ‘† âŠ† ğ¸ğµğ´ğ‘†, where we omit ğ‘›ğ‘– = 0
since the corresponding term in the summation is zero. Deï¬ne
ğ‘† as the set of states where the blocked queue list is m and
queue ğ‘— has population ğ‘›ğ‘— in phase ğ‘˜ğ‘—, thus the right hand
side becomes ğ‘ ğœ‹(ğ‘›ğ‘—, ğ‘˜ğ‘—, ğ’). Denote by ğ’”ğ‘˜ the components
of ğ’” different from ğ‘›ğ‘–, ğ‘˜ğ‘–, ğ‘›ğ‘—, ğ‘˜ğ‘—, ğ’. We can equivalently
rewrite the above expression as
ğ’”âˆˆğ‘†
ğ‘€âˆ‘
ğ¾ğ‘–âˆ‘
ğ¹ğ‘–âˆ‘
ğ‘–=1
ğ‘˜ğ‘–=1
ğ‘›ğ‘–=1
âˆ‘
ğ’”ğ‘˜
ğ‘›ğ‘–
ğœ‹(ğ‘›ğ‘–, ğ‘˜ğ‘–, ğ‘›ğ‘—, ğ‘˜ğ‘—, ğ’”ğ‘˜, ğ’) =ğ‘ ğœ‹ (ğ‘›ğ‘—, ğ‘˜ğ‘—, ğ’)
(5)
However, the inner summation on ğ’”ğ‘˜ gives the QR marginal
ğœ‹(ğ‘›ğ‘–, ğ‘˜ğ‘–, ğ‘›ğ‘—, ğ‘˜ğ‘—, ğ’) which proves the theorem.
The above characterization generalizes in a weaker form also
to second-order queue-length moments.
Corollary 1: The second-order joint moments of queue-
lengths in a MAP network with BAS blocking satisfy
ğ‘€âˆ‘
ğ‘€âˆ‘
ğ¾ğ‘–âˆ‘
ğ¾ğ‘—âˆ‘
ğ¹ğ‘–âˆ‘
ğ¹ğ‘—âˆ‘
âˆ‘
ğ‘›ğ‘–ğ‘›ğ‘—ğœ‹(ğ‘›ğ‘–, ğ‘˜ğ‘–, ğ‘›ğ‘—, ğ‘˜ğ‘—, ğ’) = ğ‘ 2
ğ‘–=1
ğ‘—=1
ğ‘˜ğ‘–=1
ğ‘˜ğ‘— =1
ğ‘›ğ‘–=1
ğ‘›ğ‘— =1
ğ’
(6)
Proof: Using the same argument of Theorem 2 we have
)2
(
ğ‘€âˆ‘
âˆ‘
ğ’”âˆˆğ‘†
ğ‘–=1
âˆ‘
ğ’”âˆˆğ‘†
for all 1 â‰¤ ğ‘– â‰¤ ğ‘€, 1 â‰¤ ğ‘— â‰¤ ğ‘€, 1 â‰¤ ğ‘˜ğ‘— â‰¤ ğ¾ğ‘—.
The proof is qualitatively similar to the one used for non-
blocking MAP queueing networks, we point the interested
reader to [8, Thm. 4] for a complete derivation.
D. Marginal Balance Conditions
The theorems in the previous section provide a characteriza-
tion of basic properties of utilization and queue-lengths in the
QR marginal representation. However, these properties depend
very loosely on the inter-dependencies between stations, such
as the ï¬‚ows of jobs between queues and the rules of BAS
blocking. A strong characterization of BAS blocking and
job ï¬‚ows is provided by the following marginal balance
conditions. Such conditions express (by the QR marginals)
the probability ï¬‚ux balance resulting from cuts of the Markov
chain that separate states with a marginal population ğ‘›ğ‘– from
those where queue ğ‘– has population ğ‘›ğ‘– + 1.
Theorem 4 (Marginal balance): The arrival ï¬‚ow of queue ğ‘–
when the local queue-length is of ğ‘›ğ‘– jobs, 0  0) toward queue ğ‘–. After these
departures, the population of ğ‘– becomes ğ‘›ğ‘– + 1, except in the
case where ğ‘— = ğ‘“ and ğ»ğ‘’ğ‘ğ‘‘(m) =ğ‘–, i.e., queue ğ‘– is unblocked
by the departure from ğ‘“. In this case, queue ğ‘– is waiting for
free space in ğ‘“ and, because of the simultaneous transitions,
the population in ğ‘– remains equal to ğ‘›ğ‘–. As a consequence,
when ğ‘— = ğ‘“, the condition ğ»ğ‘’ğ‘ğ‘‘(m) âˆ•= ğ‘– must be also true,
this corresponds to the second term of the left side of (9).
The right hand side of the equation considers all departures
from queue ğ‘– with population equal to ğ‘›ğ‘– + 1. After these de-
partures, ğ‘–â€™s population becomes ğ‘›ğ‘–. These departures include:
âˆ™ Case a: Transitions from ğ‘– towards any queue ğ‘—, ğ‘— âˆ•= ğ‘–.
Note that these transitions are always possible because
queue ğ‘— does not have ï¬nite capacity, and for queue ğ‘“
this transition can occur when ğ‘›ğ‘“ < ğ¹ğ‘“ ; this is the ï¬rst
term of the right side. When queue ğ‘“ is full, a transition
from ğ‘– is still possible if queue ğ‘– is not blocked, that is ğ‘–
is not in the m list; this case corresponds to the second
term of the right side of (9).
âˆ™ Case b: Transitions from node ğ‘“ to any other node ğ‘¤,
ğ‘¤ âˆ•= ğ‘“, ğ‘¤ âˆ•= ğ‘– when ğ‘“ is full and node ğ‘– is the ï¬rst
blocked one, that is ğ»ğ‘’ğ‘ğ‘‘(m) = ğ‘–. These transitions
trigger a simultaneous transition from queue ğ‘–,
thus
decrease its population to ğ‘›ğ‘–. This is the third term on
the right side of (9).
ğ‘– = ğ‘˜}.
Let ğ‘†(ğ‘˜, ğ‘›ğ‘–) â‰¡ {s = (s1, s2, . . . sM)âˆ£si : ğ‘›â€²
Since the theorem requires ğ‘›ğ‘– â‰¤ ğ¹ğ‘– âˆ’ 1,
there always
exists the related set Â¯ğ‘†(ğ‘˜, ğ‘›ğ‘–) â‰¡ {s = (s1, s2, . . . sM)âˆ£si
:
ğ‘– = ğ‘˜}. The equilibrium probability ï¬‚ux
ğ‘– â‰¥ ğ‘›ğ‘– + 1, ğ‘˜â€²
ğ‘›â€²
ğ‘˜=1ğ‘†(ğ‘˜, ğ‘›ğ‘–) and âˆªğ¾ğ‘–
exchanged by âˆªğ¾ğ‘–
Â¯ğ‘†(ğ‘˜, ğ‘›ğ‘–) must be in
balance because their union is the entire state space. We seek
for a representation of the exchanged probability ï¬‚ux using
the QR marginal probabilities. The ï¬‚ux ğ¹ from âˆªğ¾ğ‘–
Â¯ğ‘†(ğ‘˜, ğ‘›ğ‘–)
to âˆªğ¾ğ‘–
ğ‘˜=1ğ‘†(ğ‘˜, ğ‘›ğ‘–) needs to decrease the queue-length of queue ğ‘–
to ğ‘›ğ‘–. By considering that batch completions are not allowed,
these transitions correspond to the two cases described above.
Therefore, ğ¹ is the following ï¬‚ux of completions:
ğ‘– â‰¤ ğ‘›ğ‘–, ğ‘˜â€²
ğ‘˜=1
ğ‘˜=1
âˆ‘
âˆ‘
ğ¾ğ‘–âˆ‘
ğ‘–,ğ‘— ğœ‹(sâ€²)
ğ‘ğ‘˜,â„
ğ¾ğ‘–âˆ‘
ğ‘–,ğ‘— ğœ‹(sâ€²)
ğ‘ğ‘˜,â„
sâ€²:ğ‘›â€²
ğ‘–=ğ‘›ğ‘–+1,ğ‘›â€²
ğ‘“ =ğ‘›ğ‘“
â„=1
ğ‘—=1,ğ‘—âˆ•=ğ‘–