图2.21 Grub启动界面
用户做出选择后，如果是选择了我，那么G大叔就像刚刚这样，来到我屋里，叫我起床，于是我这个Ubuntu系统就启动了。
2.4.2 多系统的共存
可能有同学会问，那G大叔除了叫你之外，还能去叫谁呢？G大叔是个启动管理器，如果只负责引导我一个系统，那还怎么称得上"管理"二字呢？G大叔能够支持多种系统的引导。比如那个水果公司的Mac
OS系统、与我们Linux同宗的BSD系统、微软公司的"查皮"Windows
XP系统、"喂死它"Vista系统、"温妻"Windows
7系统，甚至"剁死"（DOS）系统等，G大叔都能够支持。
具体怎样才能让G大叔引导其他系统呢？这个不用您操心，我们Ubuntu系统在安装的时候，会派G大叔去检查硬盘上已经存在的系统，然后根据情况制定出合理的计划。这一切都是G大叔自动完成的，您装完系统重启计算机后，就能看到硬盘上已有的系统已经被G大叔正确识别出来了。
![alt](images/00011.jpeg){.tpzz}**提示：**[Max
OS需要安装在主分区才能够正确地被Grub引导。]{.kai1}
就拿我定居的这台电脑做例子吧。
我们来之前，电脑里已经住进了一个操作系统，就是微软公司的Windows
7。Windows
7一个人住的时候，传达室是没人的，只放了一个简单的类似门铃的装置。BIOS来传达室叫人的时候，只要按一下那个铃，那边的启动管理器就会去叫Windows
7起床了。
G大叔搬进去的时候，会考虑到原有的Windows 7系统，查看一下叫醒Windows
7的那个门铃连到了哪里。一般是连到一个叫做Bootmgr.exe的程序，一按门铃，Bootmgr.exe就被叫醒了。于是G大叔记好Bootmgr的位置，再记录好我的位置，生成一个grub.cfg文件，放到/boot/grub/目录下。咱不是说过么，我们软件要想记住点什么东西，都得写成文件放到硬盘里，G大叔也不例外。
当用户启动电脑，G大叔被叫醒的时候，他就会一脸严肃地问用户：要用哪个系统？一个Ubuntu一个Windows
7，给你10秒，快选！如果用户选我，G大叔就来叫醒我，如果选Windows
7，G大叔就去按照之前记录的位置，找到Bootmge，一脚把他踹醒。
虽然G大叔说话有点不客气，不过工作还是尽职尽责的，多数常见的操作系统、常用的分区格式，G大叔都不在话下。他总说，传达室不是某一个系统专用的传达室，在传达室工作的软件，就该为硬盘上的每一个系统都服务好。
![alt](images/00011.jpeg){.tpzz}**提示：**[Windows
XP之前的NT内核系统使用的是ntldr作为启动管理器，从Vista开始换成了Bootmgr。新版的Grub对这两者都可以完美支持。]{.kai1}
2.4.3 重装Windows后Grub的修复
可是Windows 7那边的作风就不一样了。
如果硬盘上已经住进了我，门房里已经有了G大叔，这时候重装或者新装Windows
7系统的话，Windows
7就不管三七二十一地把G大叔赶出来，在传达室装好他的"起床铃"就走了，不管我这边的情况。电脑再启动的时候，BIOS就找不到G大叔，只能去按那个铃，直接启动Windows
7，我的存在就完全被无视了。
如果这样的惨剧不幸发生了怎么办呢？没关系，他能把G大叔赶出来，我照样能让G大叔再搬进去！想强拆？没门！不过具体怎么操作呢？再重装一遍Ubuntu系统？不用。还记得那张安装光盘么？还记得我说系统出问题的时候可以用它来修复么？没错，就是那张，赶紧让你家狗狗把他叼回来，现在用上了！
像安装的时候一样，用LiveCD启动电脑，选择试用，这样就启动了光盘上的Ubuntu系统。这时候，电脑可就归我们Linux管啦！嘿嘿，小小的Windows
7算什么，你想把我们的G大叔撵走就霸占整个硬盘了？想得美！LiveCD启动之后，打开命令行，运行sudo
-i，获取权限。然后运行：
![alt](images/00045.jpeg){.calibre3}
![alt](images/00011.jpeg){.tpzz}**提示：**[\$符号是普通用户的命令提示符，不是命令的一部分，不需输入。]{.kai1}
这里sdax就是你安装Ubuntu的时候用作根目录"/"的那个分区，如果你还单独分了"/boot"分区，那么还得运行：
![alt](images/00046.jpeg){.calibre3}
当然，这里的sdax，sday都需要根据你的实际分区情况修改，可能是sda1，sda4，或者sdb2，sdc8，都没准儿。mount好了之后，运行：
![alt](images/00047.jpeg){.calibre3}
运行完了就好了。最后重启电脑，熟悉的G大叔又回来了。
当然，以上说的都是以后可能发生的情况，目前在我这里还没有这样的事情，隔壁那个Windows
7睡得像死猪一样，不会有什么举动的。而G大叔早在安装的时候就自动设置好了多重系统启动，刚刚就是用户告诉G大叔来叫醒我去干活的。
2.4.4 Grub的简单配置
起床之后，用户似乎对G大叔的举动不是很满意，打算要修改一下G大叔的配置文件。
刚才我们说了，G大叔启动的时候会去找/boot/grub/grub.cfg文件，这里面记录了G大叔应该做的一些事情。不过用户要想修改这些设置，可不需要修改这个文件，而是要改/etc/default/grub文件。这个文件里，简单明了地记录了G大叔应该做的一些动作。
![alt](images/00011.jpeg){.tpzz}**提示：**[旧版Grub的配置文件为/boot/grub/menu.lst，新版Grub将原有的一个配置文件分为/boot/grub/grub.cfg和/etc/default/grub两个。前者更加复杂，提供给Grub读取，以提供更复杂的功能。后者更加简明，提供给用户，用于一些简单的配置。]{.kai1}
只见用户下达了命令：
![alt](images/00048.jpeg){.calibre3}
这么命令的意思就是，以root用户的身份，命令gedit软件，去打开/etc/default/grub文件。输入这个命令之后，我会要求用户再输入一遍他自己的密码，注意，是当前用户的密码（比如我这里，就是lanwoniu这个用户），不是root的密码，真正的root用户的密码......是个迷。关于这个sudo，咱们后面还会见到它，这里暂且不表，您只需要知道命令就这么敲就行了。命令运行后，就会看到打开了一个gedit软件，里面显示的就是grub文件的内容，大约就是这样：
![alt](images/00049.jpeg){.calibre3}
这一大堆看着有点乱，不过别害怕。首先，所有以#开头的行都是注释，那是给人类看的，G大叔会直接忽略掉这些行。剩下的就不多了，好，慢慢介绍。
![alt](images/00011.jpeg){.tpzz}**提示：**[Linux下的绝大多数配置文件和脚本都以#作为注释行的开头。]{.kai1}
![alt](images/00002.jpeg){.tpzz} 解释1：GRUB_DEFAULT=0这一行的意思，就是让G大叔在用户没有选择的情况下，默认来叫醒我。因为在电脑启动的时候，G大叔给用户的选项里，叫醒我是排在第1个的（但是G大叔数数喜欢从0开始数，所以是"=0"）。这里也可以写saved，意思就是记住上一次开机的选择。上次选的谁，这次就默认选谁。
![alt](images/00002.jpeg){.tpzz} 解释2：GRUB_HIDDEN_TIMEOUT_QUIET=true是说倒计时的过程中不显示秒数，只默默地计时。如果这一行设为false，则G大叔会显示倒计时还剩下多少秒。
![alt](images/00002.jpeg){.tpzz} 解释3：GRUB_TIMEOUT=10这一行是G大叔给用户选择的时间，也就是10秒钟。如果不选就根据GRUB_DEFAULT的设置，选择默认的系统去了。如果不希望有时间限制，就设置为--1。
![alt](images/00002.jpeg){.tpzz} 解释4：GRUB_CMDLINE_LINUX_DEFAULT=\"quiet
splash\"这一行是启动时Grub大叔要传给我这个Linux内核的启动参数。这个参数只有在正常启动的时候会传给我，recover模式就不传了。quiet的意思是告诉我，启动时不要打印任何信息。splash是告诉我要显示启动画面。
![alt](images/00002.jpeg){.tpzz} 解释5：GRUB_CMDLINE_LINUX=\"\"也是启动参数，跟上面那一行不一样的是，这一行设置的参数无论是什么启动模式，都会传给我。
我这个用户主要是想改改默认启动的系统，于是把GRUB_DEFAULT改成了4。我掐指一算，改成4，也就是启动时G大叔给用户的第5个选项......哦，是去叫醒Windows
7。哎......看来还是不喜欢我啊。另外GRUB_TIMEOU也被用户改成了5，看来这个用户还是个急性子。
改完了之后，保存好这个文件，但还不算完，光改这个文件是不管用的，G大叔真正关心的是/boot/grub/grub.cfg文件。还得运行一下：
![alt](images/00050.jpeg){.calibre3}
这样，就会根据刚才修改的grub文件，自动生成一个给G大叔看新的grub.cfg文件，这就算修改完了。
![alt](images/00011.jpeg){.tpzz}**提示：**[在Linux系统的终端中输入密码时，密码不会回显。]{.kai1}
[2.5 更多选择]{.kai}
从安装到第一次启动，我还算比较顺利。可能是我遇到的这个用户运气好，也可能是我运气好，遇到个水平比较高的用户，到底是谁运气好，这是个哲学问题......不过总之，会有一些人安装Ubuntu不是那么顺利，或者因为种种原因安装遇到阻碍。不过没关系，没有什么困难是不能克服的，我们Ubuntu系统的安装方法多着呢。
2.5.1 基于Windows的wubi安装
有人说，我就遇到困难了。你刚才讲了这幺半天，那么多步骤，还得分区，还得设什么BIOS，太复杂了，听不懂啊。有简单点的办法没有？我告诉你，有。
为了使更多已经装了Windows
7之类系统的人能够更加简单地安装和体验我们Ubuntu系统，我们的光盘里带了一个软件，叫做wubi。您可别误会，他可不是个输入法，不要妄想用五笔字型输入"我要装系统！"就能把Ubuntu装上。这个wubi是Windows
UBuntu Installer的缩写。这家伙是运行在Windows
7系统下的软件，他的功能，就是帮助你在Windows
7系统下安装我们Ubuntu系统。不用你懂分区，不用你知道挂载，不用改变当前硬盘的状态，一切全都交给他就好。并且我们这个光盘还设置好了自动运行，光盘放进去就会看到wubi运行的界面了，就是图2.22所示的这样。
![alt](images/00051.jpeg){.calibre3}
图2.22 wubi运行界面
第1个选项，就是之前说的光盘安装。选了这个选项之后电脑就会重启，然后从光盘启动（当然还得设好BIOS），之后就跟我们说的光盘安装没有区别了，不选这个（不选你说那幺半天！）。看第2个选项，"在Windows中安装"，这个看着新鲜吧？好，就是它了！
单击"在Windows中安装"按钮之后，就看到一个如图2.23所示的设置窗口。
![alt](images/00052.jpeg){.calibre3}
图2.23 wubi安装设置窗口
要设置的东西不多，也都挺简单的，咱们一个一个说。