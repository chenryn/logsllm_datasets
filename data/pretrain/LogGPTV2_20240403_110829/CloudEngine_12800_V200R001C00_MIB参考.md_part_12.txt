CloudEngine 12800系列交换机
MIB参考 3 MIB典型使用实例
节点 OID值
ipNetToPhysicalType 1.3.6.1.2.1.4.35.1.6
ipNetToPhysicalState 1.3.6.1.2.1.4.35.1.7
ipNetToPhysicalRowStatus 1.3.6.1.2.1.4.35.1.8
3.7.1 查询 ARP 表项信息
通过ipNetToPhysicalTable能够获取到设备的ARP表项信息，如图3-24所示。
图3-24 通过ipNetToPhysicalTable查询ARP表项信息
l 通过ipNetToPhysicalPhysAddress节点查询ARP表项信息（MAC地址）
图3-25 通过ipNetToPhysicalPhysAddress节点查询ARP表项信息
如图3-25所示，返回值的含义以第一行为例：622代表接口索引，1.4代表IPv4地址
类型，192.168.80.1代表IPv4地址，80:FB:06:B0:A8:95代表MAC地址。
l 通过ipNetToPhysicalLastUpdated节点查询ARP表项信息（最后一次更新的时间）
文档版本 06 (2017-09-12) 华为专有和保密信息 35
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
MIB参考 3 MIB典型使用实例
图3-26 通过ipNetToPhysicalLastUpdated节点查询ARP表项信息
如图3-26所示，返回值的含义以第一行为例：622代表接口索引，1.4代表IPv4地址
类型，192.168.80.1代表IPv4地址，0 days 00h:02m:30s.51th代表该表项最后一次更
新的时间（即该表项是150.51秒前更新的）。
l 通过ipNetToPhysicalType节点查询ARP表项信息（ARP表项的类型）
图3-27 通过ipNetToPhysicalType节点查询ARP表项信息
如图3-27所示，返回值的含义以第一行为例：622代表接口索引，1.4代表IPv4地址
类型，192.168.80.1代表IPv4地址，dynamic代表该表项为动态ARP表项。
l 通过ipNetToPhysicalState节点查询ARP表项信息（邻居可达性探测的状态）
图3-28 通过ipNetToPhysicalState节点查询ARP表项信息
如图3-28所示，返回值的含义以第一行为例：622代表接口索引，1.4代表IPv4地址
类型，192.168.80.1代表IPv4地址，reachable代表该表项的邻居可达性探测的状
态。
l 通过ipNetToPhysicalRowStatus节点查询ARP表项信息（ARP表项的行状态）
文档版本 06 (2017-09-12) 华为专有和保密信息 36
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
MIB参考 3 MIB典型使用实例
图3-29 通过ipNetToPhysicalRowStatus节点查询ARP表项信息
如图3-29所示，返回值的含义以第一行为例：622代表接口索引，1.4代表IPv4地址
类型，192.168.80.1代表IPv4地址，active代表该表项的行状态。
3.8 查询各种路由协议的 IP 路由总数
hwRouteStatTable该表为直连、Static、OSPF、RIP、IS-IS、BGP六种协议的路由统计
表，属于HUAWEI-RM-EXT-MIB。该表列出hwRouteStatTable各个节点的数据类型，含
义以及实现规格和状态等信息。
该表的OID前缀为1.3.6.1.4.1.2011.5.25.145.1.2.1，该表的详细描述参见69.4.1
hwRouteStatTable详细描述。
该表的索引是hwRouteStatVpnName和hwRouteStatProtocolId。
l hwRouteStatVpnName的是VPN索引，格式为X.X，如公网的索引为1.0。.
l hwRouteStatProtocolId是路由协议的索引，整数形式，如BGP的索引为8
可以通过该表查询各种路由协议的IP路由总数。以查询公网BGP路由总数为例，首
先，确定公网BGP路由的索引值为1.0.8。通过MIB工具查询公网BGP的路由数量如下
图：
图3-30 查询公网BGP路由数量
此表在对应的设备上查询的结果如下图：
文档版本 06 (2017-09-12) 华为专有和保密信息 37
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
MIB参考 3 MIB典型使用实例
图3-31 在设备上查询公网BGP路由数量
3.9 QoS 查询
3.9.1 查询 Diffserv 模板及其应用状态
通过hwXQosBaCfgInfoTable可以查询设备上配置的Diffserv模板及其使用情况。
1. 查询hwXQosBaName得到Diffserv模板的索引值。如图3-32所示，ISR模板的索引为
1。
图3-32 查询Diffserv模板的索引值
2. 根据Diffserv模板的索引值查询此模板的应用状态。如图3-33所示，ISR模板的应用
状态为active。
图3-33 查询Diffserv模板的应用状态
3.9.2 查询 Diffserv 模板入方向映射关系
通过hwXQosBaPhbCfgInfoTable可以查询设备Diffserv模板中外部优先级与内部优先
级、颜色的对应关系。
1. 查询hwXQosBaName得到Diffserv模板的索引值hwXQoSBaIndex。如图3-34所示，
1212模板的索引为3。
图3-34 查询Diffserv模板的索引值
2. 查询hwXQoSBaIndex、hwXQoSBaPhbType和hwXQoSBaPhbPri得到内部优先级
hwXQosBaPhbCos的值。其中：
– hwXQoSBaIndex表示Diffserv模板索引值。
– hwXQoSBaPhbType表示优先级字段类型，优先级为802.1p时
hwXQoSBaPhbType为1，优先级为dscp时hwXQoSBaPhbType为2。
– hwXQoSBaPhbPri表示优先级字段的值。
文档版本 06 (2017-09-12) 华为专有和保密信息 38
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
MIB参考 3 MIB典型使用实例
– hwXQosBaPhbCos表示内部优先级的值。内部优先级值与服务等级之间的关
系请参见89.4.2 hwXQoSBaPhbCfgInfoTable详细描述。
如图3-35所示，hwXQosBaPhbCos.A.B.C为hwXQosBaPhbCos的值，其中A代表
hwXQoSBaIndex，B代表hwXQoSBaPhbType，C代表hwXQoSBaPhbPri。即
hwXQoSBaIndex、hwXQoSBaPhbType和hwXQoSBaPhbPri可以唯一确定内部优先
级hwXQosBaPhbCos的值。图3-35中的hwXQosBaPhbCos.3.1.0为1的含义是Diffserv
模板1212中入方向802.1p值0映射为内部优先级BE。
图3-35 查询内部优先级的值
3. 查询hwXQoSBaIndex、hwXQoSBaPhbType和hwXQoSBaPhbPri得到报文颜色
hwXQosBaPhbColour。如图3-36所示，hwXQosBaPhbColour.A.B.C为
hwXQosBaPhbColour，其中A代表hwXQoSBaIndex，B代表hwXQoSBaPhbType，C
代表hwXQoSBaPhbPri。即hwXQoSBaIndex、hwXQoSBaPhbType和
hwXQoSBaPhbPri可以唯一确定报文颜色hwXQosBaPhbColour。图3-35中的
hwXQosBaPhbColour.3.1.0为yellow的含义是Diffserv模板1212中入方向802.1p值0映
射为黄色。
图3-36 查询报文颜色
3.9.3 查询 Diffserv 模板出方向映射关系
通过hwXQoSBaMapCfgInfoTable可以查询设备Diffserv模板中内部优先级、颜色与外部
优先级的对应关系。
1. 查询hwXQosBaName得到Diffserv模板的索引值hwXQoSBaIndex。如图3-37所示，
1212模板的索引为3。
图3-37 查询Diffserv模板的索引值
2. 查询hwXQosBaIndex、hwXQosBaMapType、hwXQosBaMapCos和
hwXQosBaMapColour得到hwXQosBaMapPri的值。其中：
– hwXQoSBaIndex表示Diffserv模板索引值。
– hwXQosBaMapType表示外部优先级字段类型，优先级为802.1p时
hwXQosBaMapType为1，优先级为dscp时hwXQosBaMapType为2。
– hwXQosBaMapCos表示内部优先级的值。内部优先级值与服务等级之间的关
系请参见89.4.2 hwXQoSBaPhbCfgInfoTable详细描述。
– hwXQosBaMapColour表示报文颜色，报文为绿色时hwXQosBaMapColour为
1，报文为黄色时hwXQosBaMapColour为2，报文为红色时
hwXQosBaMapColour为3。
– hwXQosBaMapPri表示外部优先级的值。
如图3-38所示，hwXQosBaMapPri.A.B.C.D为hwXQosBaMapPri的值，其中A代表
hwXQosBaIndex，B代表hwXQosBaMapType，C代表hwXQosBaMapCos，D代表
文档版本 06 (2017-09-12) 华为专有和保密信息 39
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
MIB参考 3 MIB典型使用实例
hwXQosBaMapColour。即hwXQosBaIndex、hwXQosBaMapType、
hwXQosBaMapCos和hwXQosBaMapColour可以唯一确定外部优先级
hwXQosBaMapPri的值。图3-38中的hwXQosBaPhbCos.3.1.2.2为7的含义是Diffserv
模板1212中出方向内部优先级为AF2的黄色报文映射到外部优先级7。
图3-38 查询外部优先级的值
3.9.4 查询接口队列统计信息
通过hwXQoSIfQueueRunInfoTable可以查询接口上8个队列的统计信息。
1. 查询接口索引值hwXQoSIfQueueIfIndex，查询方法请参见3.2 接口信息查询，假设
我们已经从该表中获取40GE 4/0/17的队列索引为25。
2. 查询hwXQoSIfQueueIfIndex、hwXQoSIfQueueVlanID和hwXQoSIfQueueCosType得
到队列通过包数hwXQoSIfQueuePassedPackets的值。其中：
– hwXQoSIfQueueIfIndex表示接口索引值。
– hwXQoSIfQueueVlanID表示VLAN ID，目前这个参数无效，始终为0。
– hwXQoSIfQueueCosType表示端口队列号，BE队列为1，AF1队列为2，AF2对
列为3，AF3队列为4，AF4队列为5，EF队列为6，CS6队列为7，CS7队列为
8。
如图3-39所示，hwXQoSIfQueuePassedPackets.A.B.C为
hwXQoSIfQueuePassedPackets的值，其中A代表hwXQoSIfQueueIfIndex，B代表
hwXQoSIfQueueVlanID，C代表hwXQoSIfQueueCosType。即
hwXQoSIfQueueIfIndex、hwXQoSIfQueueVlanID和hwXQoSIfQueueCosType可以唯
一确定队列通过包数hwXQoSIfQueuePassedPackets的值。图3-39中的
hwXQoSIfQueuePassedPackets.25.0.1为1785396的含义是40GE 4/0/17上BE队列通过
的包数为1785396。
图3-39 查询队列通过的包数
3. 查询hwXQoSIfQueueIfIndex、hwXQoSIfQueueVlanID和hwXQoSIfQueueCosType得
到队列通过字节数hwXQoSIfQueuePassedBytes的值。方法同上。
如图3-40所示，hwXQoSIfQueuePassedBytes.25.0.1为228530688的含义是40GE
4/0/17上BE队列通过的字节数为228530688。
图3-40 查询队列通过的字节数
4. 查询hwXQoSIfQueueIfIndex、hwXQoSIfQueueVlanID和hwXQoSIfQueueCosType得
到队列丢弃包数hwXQoSIfQueueDiscardedPackets的值。方法同上。
如图3-41所示，hwXQoSIfQueueDiscardedPackets.25.0.1为21266484的含义是40GE
4/0/17上BE队列丢弃的包数为21266484。
图3-41 查询队列丢弃的包数
文档版本 06 (2017-09-12) 华为专有和保密信息 40
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
MIB参考 3 MIB典型使用实例
5. 查询hwXQoSIfQueueIfIndex、hwXQoSIfQueueVlanID和hwXQoSIfQueueCosType得
到队列丢弃字节数hwXQoSIfQueueDiscardedBytes的值。方法同上。
如图3-42所示，hwXQoSIfQueueDiscardedBytes.25.0.1为2722109952的含义是40GE
4/0/17上BE队列丢弃的字节数为2722109952。
图3-42 查询队列丢弃的字节数
3.9.5 查询流分类
通过hwCBQoSClassifierCfgInfoTable可以查询设备上配置的流分类信息。
1. 查询流分类名称hwCBQoSClassifierName得到对应流分类的索引
hwCBQoSClassifierIndex。如图3-43所示，流分类ISR对应的流分类索引
hwCBQoSClassifierIndex为2。
图3-43 查询流分类索引
2. 查询hwCBQoSClassifierRuleCount和hwCBQoSClassifierOperator得到其中某一条流
分类的信息。其中：
– hwCBQoSClassifierRuleCount表示流分类中匹配规则数目。
– hwCBQoSClassifierOperator表示流分类中匹配规则之间的关系。
如图3-44所示，hwCBQoSClassifierRuleCount.A为hwCBQoSClassifierRuleCount的
值，hwCBQoSClassifierOperator.A为hwCBQoSClassifierOperator的值，其中A代表
hwCBQoSClassifierIndex。即hwCBQoSClassifierRuleCount和
hwCBQoSClassifierOperator可以唯一确定其中某一条流分类的信息。图3-44中的
hwCBQoSClassifierRuleCount.2为2的含义是流分类ISR有2条rule，
hwCBQoSClassifierOperator.2为or的含义是流分类ISR两条规则之间的逻辑关系为
OR。hwCBQoSClassifierLayer信息不用关注。
图3-44 查询流分类匹配规则数目和规则之间关系
3. 查询hwCBQoSClassifierIndex、hwCBQoSMatchRuleIndex和
hwCBQoSMatchVlanBeginId得到流分类某个规则的匹配内容。其中：
– hwCBQoSClassifierIndex为流分类索引值。
– hwCBQoSMatchRuleIndex为匹配规则的索引值。
文档版本 06 (2017-09-12) 华为专有和保密信息 41
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
MIB参考 3 MIB典型使用实例
– hwCBQoSMatchVlanBeginId无效，为0。
如图3-45所示，hwCBQoSMatchRuleIfNot.A.B.C为hwCBQoSMatchRuleIfNot的值，
hwCBQoSMatchRuleType.A.B.C为hwCBQoSMatchRuleType的值，
hwCBQoSMatchRuleStringValue.A.B.C为hwCBQoSMatchRuleStringValue的值。其
中A代表hwCBQoSClassifierIndex，B代表hwCBQoSMatchRuleIndex，C代表
hwCBQoSMatchVlanBeginId。即hwCBQoSClassifierIndex、
hwCBQoSMatchRuleIndex和hwCBQoSMatchVlanBeginId可以唯一确定流分类某个
规则的匹配内容hwCBQoSMatchRuleIfNot、hwCBQoSMatchRuleType和
hwCBQoSMatchRuleStringValue。图3-45中的hwCBQoSMatchRuleIfNot.2.1.0，
hwCBQoSMatchRuleType.2.1.0和hwCBQoSMatchRuleStringValue.2.1.0的含义是流分
类ISR中第一条规则匹配内容为匹配VLAN为400的报文。
图3-45 查询流分类中规则内容
3.9.6 查询流量监管配置信息
hwCBQoSCarCfgInfoTable该表为流量监管配置信息表，属于HUAWEI-CBQOS-MIB。
根据该表的配置来对流量进行速率的限制，以维护不同客户的权利，提供公平可靠的
服务。
该表的索引是hwCBQoSBehaviorIndex，该表的OID前缀为
1.3.6.1.4.1.2011.5.25.32.1.1.2.3.1，该表的详细描述参见16.4.4
hwCBQoSCarCfgInfoTable详细描述。
以查询平均速率（1.3.6.1.4.1.2011.5.25.32.1.1.2.3.1.1）、瞬间能够通过的承诺突发流量
（1.3.6.1.4.1.2011.5.25.32.1.1.2.3.1.2）、最大能够通过的速率
（1.3.6.1.4.1.2011.5.25.32.1.1.2.3.1.3）、瞬间能够通过的峰值突发流量
（1.3.6.1.4.1.2011.5.25.32.1.1.2.3.1.4）为例：
1. 首先通过hwCBQoSBehaviorCfgInfoTable查询到流行为的索引，如图3-46所示，流
行为I的索引为1。
文档版本 06 (2017-09-12) 华为专有和保密信息 42
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
MIB参考 3 MIB典型使用实例
图3-46 通过hwCBQoSBehaviorCfgInfoTable查询到流行为的索引
2. 然后通过hwCBQoSCarCfgInfoTable查询索引为1的流量监管配置，如图3-47所示，
平均速率为100000kbps，瞬间能够通过的承诺突发流量为12500000bytes，最大能
够通过的速率为100000kbps，瞬间能够通过的峰值突发流量为12500000bytes。
图3-47 通过hwCBQoSCarCfgInfoTable查询流量监管配置
查询重标记配置信息（hwCBQoSRemarkCfgInfoTable）、流的过滤配置信息
（hwCBQoSFirewallCfgInfoTable）、流的镜像配置信息
（hwCBQoSMirrorCfgInfoTable）、流的计数器配置信息
（hwCBQoSCountCfgInfoTable）的方法与上述步骤类似，首先通过
hwCBQoSBehaviorCfgInfoTable查询到流行为的索引，然后再通过相应的表查询对应
的信息。
3.9.7 查询基于流策略的统计信息
查询基于流策略的统计信息包括两个表，分别为hwCBQoSMultiPolicyStatisticsTable和
hwCBQoSMultiPolicyStatisticsClassifierTable，通过这两个表均可以查询应用在VLAN和
接口上流策略统计信息。
通过 hwCBQoSMultiPolicyStatisticsTable 表查询基于流策略的统计信息
hwCBQoSMultiPolicyStatisticsTable表示查询基于流策略的统计信息，该表索引：
hwCBQoSIfApplyMultiPolicyIfIndex、hwCBQoSIfApplyMultiPolicyDirection、
hwCBQoSVlanApplyMultiPolicyVlanId、hwCBQoSMultiPolicyIndex。其各节点的含义如
表3-15所示。
文档版本 06 (2017-09-12) 华为专有和保密信息 43
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
MIB参考 3 MIB典型使用实例
表3-15 hwCBQoSMultiPolicyStatisticsTable表内字段含义
节点 数据类 最大访问权限 含义 实现规格
型
hwCBQoS Integer32 read-only 流策 整数形式，取值范围为0
MultiPolic 略索 ～255。
yIndex 引。
[11]
hwCBQoS Counter6 read-only 匹配 实现与MIB文件定义一
MultiPolic 4 流策 致。
yMatchedP 略中
ackets [12] 流分
类规
则的
报文
数。
hwCBQoS Counter6 read-only 匹配 实现与MIB文件定义一
MultiPolic 4 流策 致。
yMatched 略中
Bytes [13] 流分
类规
则的
字节
数。
hwCBQoS Counter6 read-only 不匹 实现与MIB文件定义一
MultiPolic 4 配流 致。
yUnmatche 策略
dPackets 中流
[14] 分类
规则
的报
文
数。
hwCBQoS Counter6 read-only 不匹 实现与MIB文件定义一
MultiPolic 4 配流 致。
yUnmatche 策略
dBytes 中流
[15] 分类
规则
的字
节
数。
文档版本 06 (2017-09-12) 华为专有和保密信息 44
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
MIB参考 3 MIB典型使用实例
节点 数据类 最大访问权限 含义 实现规格
型
hwCBQoS Counter6 read-only 匹配 实现与MIB文件定义一
MultiPolic 4 流策 致。
yMatchedP 略中
assPackets 流分
[16] 类规
则且
通过
的报
文
数。
hwCBQoS Counter6 read-only 匹配 实现与MIB文件定义一
MultiPolic 4 流策 致。
yMatchedP 略中
assBytes 流分
[17] 类规
则且
通过
的字
节
数。
hwCBQoS Counter6 read-only 匹配 实现与MIB文件定义一
MultiPolic 4 流策 致。
yMatched 略中
DropPacke 流分
ts [18] 类规
则但
被丢
弃的