CFS=1 CFS report level 1.
CFS=2 CFS report level 2.
CHLAUTH=1/2 CHLAUTH report level.
ONAM=20 chars The optional ONAM subparameter allows you to specify the object name,
up to a maximum of 20 characters, to limit data printed to objects
starting with characters in ONAM.
CLUS=1 Cluster report including the cluster repository known on the queue
manager.
CLUS=2 Cluster report showing cluster registrations.
CLXQ=1 Cluster XMITQ report level 1.
CLXQ=2 Cluster XMITQ report level 2.
ONAM=20 chars The optional ONAM subparameter allows you to specify the object name,
up to a maximum of 20 characters, to limit data printed to objects
starting with characters in ONAM.
CMD=0/1/2 Command trace table display level.
D=1/2/3 Detail level for some reports.
Db2=1 Db2 report level 1.
DMC=1, DMC report level 1.
ONAM=48 chars The optional ONAM subparameter allows you to specify the object name,
up to a maximum of 48 characters, to limit data printed to objects
starting with characters in ONAM.
DMC=2, DMC report level 2.
ONAM=48 chars The optional ONAM subparameter allows you to limit the objects printed
to those with names beginning with the characters specified in ONAM (up
to a maximum of 48 characters).
DMC=3, DMC report level 3.
ONAM=48 chars The optional ONAM subparameter allows you to limit the objects printed
to those with names beginning with the characters specified in ONAM (up
to a maximum of 48 characters).
GR=1 Group indoubt report level 1.
IMS=1 IMS report level 1
IBM MQ troubleshooting and support 277
Table 19. Resource manager dump formatting keywords (J -P)
Keyword What is formatted
JOBNAME= xxxxxxxx Job name
LKM=1 LKM report level 1.
LKM=2/3, LKM report level 2/3.
,NAME=up to 48 chars Name (character)
,NAMEX= xxxxxxxxxxxxxxxx Name (Hex)
,NAMESP=1/2/3/4/5/6/7/8 Namespace
,TYPE=DMCP/QUALNM/TOPIC/ Lock type
STGCLASS
Lock qualification
,QUAL=GET/PUT/CRE/DFXQ/
PGSYNC/CHGCNT/ LKM report level 3
DELETE/EXPIRE LKM report level 4
LKM=3
LKM=4
,JOBNAME= xxxxxxxx
,ASID= xxxx
LMC=1 LMC report level 1.
MAXTR= nnnnnnnnn Max trace entries to format
MHASID= xxxx Message handle ASID for properties
MMC=1 MMC report level 1
OBJ=MQLO/MQSH/MQRO/
MQAO/MQMO/MCHL/ Object type
MNLS/MSTC/MPRC/ : ' The optional ONAM subparameter allows you to limit the objects printed
to those with names beginning with the characters specified in ONAM (up
MAUT
to a maximum of 48 characters).
ONAM
MMC=2 MMC report level 2
ONAM=48 chars The optional ONAM subparameter allows you to limit the objects printed
to those with names beginning with the characters specified in ONAM (up
to a maximum of 48 characters).
MSG=nnnnnnnnnnnnnnnn Format the message at pointer.
MASID=xxxx MASID allows storage in other address spaces.
LEN=xxxxxxxx LEN limits amount of storage to format.
MSGD=S/D MSGD controls level of detail.
MSGD=S/D Message details in DMC=3, BMC=3/4, PSID reports.
The parameter controls level of details, S is summary and D is detailed.
MSGH = nnnnnnnnnnnnnnnn Message handle
278 Troubleshooting and Support for IBM MQ
Table 19. Resource manager dump formatting keywords (J -P) (continued)
Keyword What is formatted
MT Message properties trace
MQVCX MQCHARVs in hexadecimal format
PROPS= nnnnnnnnnnnnnnnn Message properties pointer
PSID= nnnnnnnn Page set to format page
PSTRX Properties strings in hex format
Table 20. Resource manager dump formatting keywords (R -Z)
Keyword What is formatted
RPR= nnnnnnnn Page or record to format
SHOWDEL Show deleted records for DMC=3
SMC=1/2/3 Storage manager
TC= TT data char format, concatenated
* print all in suitable character set
A always print ASCII
E always print EBCDIC
0 never print either
TFMT=H/M Time format - human or STCK
THR= nnnnnnnn Thread address
THR=*/2/3 Set thread report level
TOP=1 TOP report level 1
TOP=2 TOP report level 2
TOP= nnnnnnnnnnnnnnnn Tnode 64bit address or
/TSTR=48 chars Topic string (wildcard with % at start or end)'
This will be converted EBCDIC to ASCII, but only invariant characters
/TSTRX=hex 1208 str
Hexadecimal of topic string in 1208 always wildcard character at start.
TOP=3 TOP report level 3
TOP=4 TOP report level 4
TSEG=M(RU)/Q(P64) Search process for 64-bit trace
I(NTERPOLATE) Guess missing TSEG address or addresses
F(WD) Force forward sort
D(EBUG) Debug search process
TSEG=(M,Q,I,F,D) Specify multiple TSEG options
W=0/1/2/3 TT width format
XA=1 XA report level 1
ZMH = nnnnnnnnnnnnnnnn ZST message handle
IBM MQ troubleshooting and support 279
If the dump is initiated by the operator, there is no information in the summary portion of the dump. Table
21 on page 280 shows additional keywords that you can use in the CSQWDMP control statement.
Table 21. Summary dump keywords for the IBM MQ for z/OS dump formatting control statement
Keyword Description
SUBSYS= aaaa Use this keyword if the summary dump portion is not available, or not to be
used, to give the name of the subsystem to format information for. aaaa is a 1
through 4-character subsystem name.
SUMDUMP=NO Use this keyword if the dump has a summary portion, but you do not want
to use it. (You would usually only do this if so directed by your IBM support
center.)
The following list shows some examples of how to use these keywords:
• For default formatting of all address spaces, using information from the summary portion of the dump,
use:
VERBX CSQWDMP
• To display the trace table from a dump of subsystem named MQMT, which was initiated by an operator
(and so does not have a summary portion) use:
VERBX CSQWDMP 'TT,SUBSYS=MQMT'
• To display all the control blocks and the trace table from a dump produced by a subsystem abend, for an
address space with ASID (address space identifier) 1F, use:
VERBX CSQWDMP 'TT,LG,SA=1F'
• To display the portion of the trace table from a dump associated with a particular EB thread, use:
VERBX CSQWDMP 'TT,EB= nnnnnnnn '
• To display message manager 1 report for local non-shared queue objects with a name begins with 'ABC'
use:
VERBX CSQWDMP 'MMC=1,ONAM=ABC,Obj=MQLO'
Table 22 on page 280 shows some other commands that are used frequently for analyzing dumps. For
more information about these sub commands, see the z/OS MVS IPCS Commands manual.
Table 22. IPCS subcommands used for dump analysis
Subcommand Description
STATUS To display data usually examined during the initial part of the problem
determination process.
STRDATA LISTNUM(ALL) To format coupling facility structure data.
ENTRYPOS(ALL) DETAIL
VERBEXIT LOGDATA To format the in-storage LOGREC buffer records present before the dump
was taken. LOGDATA locates the LOGREC entries that are contained in the
LOGREC recording buffer and invokes the EREP program to format and print
the LOGREC entries. These entries are formatted in the style of the normal
detail edit report.
280 Troubleshooting and Support for IBM MQ
Table 22. IPCS subcommands used for dump analysis (continued)
Subcommand Description
VERBEXIT TRACE To format the system trace entries for all address spaces.
VERBEXIT SYMPTOM To format the symptom strings contained in the header record of a system
dump such as stand-alone dump, SVC dump, or an abend dump requested
with a SYSUDUMP DD statement.
VERBEXIT GRSTRACE To format diagnostic data from the major control blocks for global resource
serialization.
VERBEXIT SUMDUMP To locate and display the summary dump data that an SVC dump provides.
VERBEXIT DAEDATA To format the dump analysis and elimination (DAE) data for the dumped
system.
Related concepts
“Formatting a dump from the channel initiator on z/OS ” on page 281
Use this topic to understand how to format a channel initiator dump for IBM MQ for z/OS using line mode
IPCS commands.
Formatting a dump from the channel initiator on z/OS
Use this topic to understand how to format a channel initiator dump for IBM MQ for z/OS using line mode
IPCS commands.
The IPCS VERBEXIT CSQXDPRD enables you to format a channel initiator dump. You can select the data
that is formatted by specifying keywords.
This section describes the keywords that you can specify.
Table 23 on page 281 describes the keywords that you can specify with CSQXDPRD.
Table 23. Keywords for the IPCS VERBEXIT CSQXDPRD
Keyword What is formatted
SUBSYS= aaaa The control blocks of the channel initiator associated with the named
subsystem. It is required for all new formatted dumps.
CHST=1, CNAM= channel name, All channel information.
DUMP=S|F|C
The optional CNAM subparameter allows you to specify the name of
a channel, up to a maximum of 20 characters, for which to format
details.
The optional DUMP subparameter allows you to control the extent of
formatting, as follows:
• Specify DUMP=S (for "short") to format the first line of the
hexadecimal dump of the channel data.
• Specify DUMP=F (for "full") to format all lines of the data.
• Specify DUMP=C (for "compressed᾿) to suppress the formatting
of all duplicate lines in the data containing only X'00'. This is the
default option
CHST=2, CNAM= channel name, A summary of all channels, or of the channel specified by the CNAM
keyword.
See CHST=1 for details of the CNAM subparameter.
IBM MQ troubleshooting and support 281
Table 23. Keywords for the IPCS VERBEXIT CSQXDPRD (continued)
Keyword What is formatted
CHST=3, CNAM= channel name, Data provided by CHST=2 and a program trace, line trace and
formatted semaphore table print of all channels in the dump.
See CHST=1 for details of the CNAM subparameter.
CLUS=1 Cluster report including the cluster repository known on the queue
manager.
CLUS=2 Cluster report showing cluster registrations.
CTRACE=S|F, Select either a short (CTRACE=S) or full (CTRACE=F) CTRACE.
The optional DPRO subparameter allows you to specify a CTRACE for
DPRO= nnnnnnnn,
the DPRO specified.
TCB= nnnnnnn
The optional TCB subparameter allows you to specify a CTRACE for
the job specified.
DISP=1, DUMP=S|F|C Dispatcher report
See CHST=1 for details of the DUMP subparameter.
BUF=1 Buffer report
XSMF=1 Format channel initiator SMF data that is available in a dump.
Related concepts
“Formatting an IBM MQ for z/OS dump” on page 275
Use this topic to understand how to format a queue manager dump using line mode IPCS commands.
Processing an IBM MQ for z/OS dump using IPCS in batch
Use this topic to understand how IBM MQ for z/OS dumps can be formatted by IPCS commands in batch
mode.
To use IPCS in batch, insert the required IPCS statements into your batch job stream (see Figure 50 on
page 283 ).
Change the data set name (DSN=) on the DUMP00 statement to reflect the dump you want to process,
and insert the IPCS subcommands that you want to use.
282 Troubleshooting and Support for IBM MQ
//*************************************************
//* RUNNING IPCS IN A BATCH JOB *
//*************************************************
//MQMDMP EXEC PGM=IKJEFT01,REGION=5120K
//STEPLIB DD DSN=mqm.library-name,DISP=SHR
//SYSTSPRT DD SYSOUT=*
//IPCSPRNT DD SYSOUT=*
//IPCSDDIR DD DSN=dump.directory-name,DISP=OLD
//DUMP00 DD DSN=dump.name,DISP=SHR
//SYSTSIN DD *
IPCS NOPARM TASKLIB(SCSQLOAD)
SETDEF PRINT TERMINAL DDNAME(DUMP00) NOCONFIRM
**************************************************
* INSERT YOUR IPCS COMMANDS HERE, FOR EXAMPLE: *
VERBEXIT LOGDATA
VERBEXIT SYMPTOM
VERBEXIT CSQWDMP 'TT,SUBSYS=QMGR'
**************************************************
CLOSE ALL
END
/*
Figure 50. Sample JCL for printing dumps through IPCS in the z/OS environment
Related concepts
“Processing a dump using the IBM MQ for z/OS dump display panels” on page 271
You can use commands available through IPCS panels to process dumps. Use this topic to understand the
IPCS options.
“Processing an IBM MQ for z/OS dump using line mode IPCS” on page 275
Use the IPCS commands to format a dump.
“Analyzing the dump and interpreting dump titles on z/OS” on page 283
Use this topic to understand how IBM MQ for z/OS dump titles are formatted, and how to analyze a dump.
Analyzing the dump and interpreting dump titles on z/OS
Use this topic to understand how IBM MQ for z/OS dump titles are formatted, and how to analyze a dump.
• Analyzing the dump
• Dump title variation with PSW and ASID
Analyzing the dump
The dump title includes the abend completion and reason codes, the failing load module and CSECT
names, and the release identifier. For more information on the dump title see Dump title variation with
PSW and ASID
The formats of SVC dump titles vary slightly, depending on the type of error.
Figure 51 on page 283 shows an example of an SVC dump title. Each field in the title is described after the
figure.
ssnm,ABN=5C6-00D303F2,U=AUSER,C=R3600. 710.LOCK-CSQL1GET,
M=CSQGFRCV,LOC=CSQLLPLM.CSQL1GET+0246
Figure 51. Sample SVC dump title
ssnm,ABN=compltn-reason
• ssnm is the name of the subsystem that issued the dump.
IBM MQ troubleshooting and support 283
• compltn is the 3-character hexadecimal abend completion code (in this example, X'5C6'), prefixed
by U for user abend codes.
• reason is the 4-byte hexadecimal reason code (in this example, X'00D303F2').
Note: The abend and reason codes might provide sufficient information to resolve the problem. See
the IBM MQ for z/OS messages, completion, and reason codes for an explanation of the reason code.
U=userid
• userid is the user identifier of the user (in this example, AUSER). This field is not present for
channel initiators.
C=compid.release.comp-function
• compid is the last 5 characters of the component identifier. The value R3600 uniquely identifies
IBM MQ for z/OS.
• release is a 3-digit code indicating the version, release, and modification level of IBM MQ for z/OS
(in this example, 710 ).
• comp is an acronym for the component in control at the time of the abend (in this example, LOCK).
• function is the name of a function, macro, or routine in control at the time of abend (in this
example, CSQL1GET). This field is not always present.
M=module
• module is the name of the FRR or ESTAE recovery routine (in this example, CSQGFRCV). This field is
not always present.
Note: This is not the name of the module where the abend occurred; that is given by LOC.