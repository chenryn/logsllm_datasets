图5.9 IEs4Linux运行界面
按照图5.9进行选择后，单击"确定"按钮即开始自动化安装及配置过程。运行IEs4Linux脚本前请确认已正确安装Wine。
【IE的困惑】
"唉，最近呀不知道怎么了，我这个脑子出问题了吧还是怎么回事，怎么总是昏昏沉沉的呢？而且好像记忆还不好了，要不就是有幻觉。我隐约地记得昨天明明起床干活了，好像是去了个银行，不过记得不怎么清楚，模模糊糊的感觉，好像做梦一样。
"我以前可不是这样的啊！我可是名门之后，血统纯正，我祖上从来也没有失忆的毛病。想当年啊，我们的祖先IE5，就是如图5.10所示的这位。他那时候就跟着Windows
98混。那时候有个家伙叫Netscape，可能有人见过，图5.11所示的是他的头像。这家伙觉得自己挺牛，基本上那时候上网的都得用它。可是，哼哼，有本事不如有靠山！我前辈IE5老先生虽然论本事......不比那NetScape强，可是他聪明啊，死粘着Windows
98老大，有了这强大的后台，慢慢地大家都开始用IE5了，NetScape从此就销声匿迹。后来的IE6也是如法炮制啊，粘着Windows
XP，后来IE7横空出世了，就取代了IE6的位置，也跟着XP干......咳，我怎么说起这些了，看来脑子真是不行了啊。
![alt](images/00205.jpeg){.calibre3}
图5.10 Internet Explorer 5
![alt](images/00206.jpeg){.calibre3}
图5.11 Netscape的logo
"我明明记得昨天去了银行的网站，还是Windows
7叫我去的，可是今天我问他，昨天你说话声音怎么有点不对劲呢？是不是感冒了？他斜眼看着我问：'昨天？哪有活啊？'我说不对呀，昨天不是你让我去那个什么××银行查余额么？他直接扭过头，扔下一句：'做梦呢吧你。我挠挠头，难道我真的是在梦游？
"说是梦，却很清晰，说是真的，可还有点模糊。或者......那是我前世的记忆？前世......靠，为啥我前世还是浏览器？！等等，我前世要是浏览器的话......难道我前世就是那个NetScape？！不行，越想越晕了，再这样下去非精神分裂不可，想办法找人聊聊诉诉苦吧。
"Windows
7反正不理我，去找cmd聊聊吧，他是专门负责跟人聊天的，问问他我这到底是怎么回事。结果他说我是参数打错了，唉，他也不知道别的。问问游戏组那哥儿几个，扫雷说我是踩着雷了，空档接龙说我是牌放错了，这都哪跟哪啊。再去问问记事本，直接被嘲笑，说我这天天上网见多识广的，竟然还来问他这么一个大门不出二门不迈的抄写员。唉，想想也是，看来只有我不正常了。正灰心呢，那个长得很喜感的企鹅蹦蹦跳跳地过来了，神秘兮兮地对着我说：'我也梦游了！'我惊讶地望了他3秒钟------难道他......传染了我？"
![alt](images/00011.jpeg){.tpzz}**提示：**[目前模拟运行IE6比较稳定，IE7及以上版本还有些问题，推荐使用IE6。]{.kai1}
5.1.4 Wine的使用和配置
【使用Wine运行EXE文件】
红酒大师驯服了IE后，整个内存里上上下下的软件，全都对大师佩服得五体投地。内存外的懒蜗牛同学也很高兴，没想到竟然能够在Linux下运行IE，于是好奇心起，赶紧又去找其他的Windows软件试试。
要想让红酒大师催眠一个Windows下的软件很简单，只需要告诉红酒大师这个软件的位置就可以了，也就是运行类似这样的命令：
![alt](images/00207.jpeg){.calibre3}
其中，Path就是那个EXE文件所在的路径，xxx.exe就是文件名了。不过一般一个软件是要先安装才能使用的，就跟Windows下一样。所以要先用Wine运行那个软件的安装程序，把软件安装到我们这个系统中。一个Windows程序被红酒大师安装到系统中后，就可以通过我们的"应用程序"菜单找到他了，跟其他程序一样。
![alt](images/00011.jpeg){.tpzz}**提示：**[由Wine安装的Windows软件一般都被放在当前用户的家目录中，不会影响其他用户。]{.kai1}
【Wine的配置】
等红酒大师闲下来的时候，我们就好奇地拉着红酒大师问这问那，想知道他是怎么骗过IE之类的软件，让他们以为自己运行在Windows
7系统中的。
（1）虚拟的磁盘分区
我先问红酒大师，IE要用的这些东西都是什么呀？还有什么C盘D盘的是什么意思？红酒大师解释说："是这样的，Windows管理磁盘的方法，跟咱们Linux不一样，他们用C，D，E，F这样的字母来区别各个分区。"
fdisk抢过来问："那分到Z怎么办？而且，为什么没有A，B？"大师向他点点头道："嗯，你问得很好，分到Z怎么办呢？我也不知道。"fdisk一脸黑线......大师继续说："不过为什么没有A，B我倒是知道。他们管软驱叫做A，B，虽然现在计算机上已经没有软驱了，但是这两个字母还是一直给软驱留着。"围观群众纷纷点头。
fdisk又问："我看Windows
7那里有几间屋子，每间的门口又没挂着牌，IE管你要C盘的文件的时候，你怎么知道哪个是C盘呢？"大师很诚实："我也不知道。"fdisk又一脸黑线......大师继续说："不过IE管我要东西的时候，那个所谓的C盘，其实就在咱们屋里，就是～/.wine/drive_c/这个目录而已，并不是真正的隔壁那Windows
7的屋子，只是我仿造的一个目录。除了C盘以外，还可以通过winecfg创造出D盘、E盘等。"
![alt](images/00011.jpeg){.tpzz}**提示：**[可以通过winecfg工具手动为Wine设置更多盘符。运行winecfg工具，切换到"驱动器"标签。通过"添加"、"删除"按钮可以新建、删除一个盘符，如图5.12所示。但C：盘符不可删除，也不可修改位置。]{.kai1}
![alt](images/00208.jpeg){.calibre3}
图5.12 设置Wine的驱动器
（2）虚拟的系统版本和注册表
"winecfg又是什么？？"这回是gconf-editor问的。大师解释："winecfg是我带来的一个配置工具，方便用户对我进行配置。比如说可以选择Windows系统的版本，显示窗口的大小，以及Windows里那些"我的文档"、"桌面"文件夹的位置，还有音频设备等。这些，都可以通过winecfg设置。而且他是图形界面的，我这里还有一张他的照片，你们看。"说着，红酒大师掏出一张照片，就是图5.13所示这张。
![alt](images/00209.jpeg){.calibre3}
图5.13 winecfg界面
"除了这个之外还有很多工具，"红酒大师继续介绍道，"比如regedit。这个工具跟Windows下同名的那个一样，就是用来改注册表的，用户都应该挺熟悉，你们看看。"说着，红酒大师又掏出一张照片，就是图5.14所示这张。
![alt](images/00210.jpeg){.calibre3}
图5.14 Wine的注册表管理器
（3）虚拟的动态链接库
心有灵犀又过来问："那你仿造的目录里面也得有Windows
XP那些东西啊，这些东西你是怎么弄来的？"大师满含感激地说："这就要感谢那些开源的热心人士了。很多的DLL文件都是他们做出来的，跟Windows
XP那里的不一样，是专门供我糊弄那些Windows软件用的。"
心有灵犀又问："DLL是什么文件？"大师说："就跟咱们用的.so文件一样，是动态链接库。""哦......"心有灵犀点点头，"那所有的DLL你这里都有么？"大师很谦虚地回答："当然不是全有，只有最常用的一些，但是如果没有也没关系，可以让懒蜗牛同学手动把隔壁Windows
XP那屋子里相应的DLL复制到我那个虚拟的C盘下相应的目录里就可以了。关于这些库，还可以用winecfg来配置，是使用原生的，还是内建的。"
![alt](images/00011.jpeg){.tpzz}**提示：**[在winecfg工具中的"函数库"标签中可以设置函数库的使用方式，如图5.15所示。在"新增函数库顶替"下拉列表框中选择要操作的函数库，并单击"添加"按钮，之后就可以选中该函数库并单击"编辑"按钮以选择使用Windows原装函数库，还是使用Wine内建函数库。具体该使用哪个，要根据所运行的Windows软件的不同而改变。]{.kai1}
![alt](images/00211.jpeg){.calibre3}
图5.15 设置Wine函数库
5.1.5 更多程序被Wine
再后来，越来越多的Windows软件像集体旅游似的经常来我们这里转悠。
比如那个聊天用的QQ就经常过来，主要也是因为我们这边的QQ for
Linux太不争气；还有那个长得很恐怖的War3，这家伙是个游戏，还挺耗费资源的，红酒大师催眠他还费了挺大劲；还有他那个兄弟，长得也挺难看的，叫做WOW，魔兽世界，也是一样经常被红酒大师领着来我们这里干活；再有经常来串门的就是迅雷国际版，这家伙是个下载软件，虽然速度确实挺快的，但是听奔流说，他老跟别的BT软件耍流氓，因此别的BT软件都不愿意理他。总之，有不少的软件都被红酒大师带过来转悠，图5.16～图5.18所示都是曾经来我们这边转悠过的软件。
![alt](images/00212.jpeg){.calibre3}
图5.16 用Wine在Ubuntu下运行使命召唤4
![alt](images/00213.jpeg){.calibre3}
图5.17 用Wine在Ubuntu下运行QQ
![alt](images/00214.jpeg){.calibre3}
图5.18 用Wine在Ubuntu下运行刺客信条2
![alt](images/00011.jpeg){.tpzz}**提示：**[可以在http://appdb.winehq.org/这个地址找到目前常用的一些Windows软件在Wine下工作的情况。]{.kai1}
5.1.6 扩展阅读：为什么Windows 7的程序不能在Ubuntu下运行
【可执行文件也有不同格式】
前面咱们说了，红酒大师可以让Windows
7的程序运行在我们的Linux系统上。有的同学可能想问，这个编译好的程序，不就是一些二进制机器码吗？既然是机器码，那么只要在相同的硬件平台上（比如x86平台）就应该能执行啊，怎么不同的系统之间的二进制程序还不一样呢？到底Windows
7那边的软件和你这里的有什么不同呢？
这件事情，说起来有些复杂。简单来说，可执行文件也是有不同的格式的。Windows
7那里的可执行文件是PE格式的，我们这里的文件是ELF格式的。这就好像同样是图片，有JPG的，有PNG的，只支持JPG格式的软件就看不了PNG的图片。那么ELF和PE格式有什么区别呢？那得先说说可执行文件的空间结构。
【可执行文件的结构】
一个可执行文件分为4个部分：代码段、数据段、BSS段以及堆栈段。就好像你有头胸腹3部分------什么？你不是昆虫？那你也得有头胸腹呀！好吧，咱们不再纠缠这个问题了。总之，程序运行的时候占用的空间就是这么几个部分。那么这几个部分分别是干什么用的呢？
（1）代码段
首先，这个软件本身得占用一定空间。就像你去公司上班，你自己得有个坐的地方吧。就算你不坐着，站的地方也得有一小块吧。总之，自身会占用一定的空间。软件本身是由一条一条的二进制代码组成的，这段代码就是机器码，这部分软件程序自身占用的空间就是代码段。
这个代码段的大小在程序进入内存运行前就确定了。他在硬盘里睡觉的时候多大，读进内存里就多大。这很明白吧，就像你在家睡觉的时候是一米七五，不可能到单位就缩成一米六零了吧。