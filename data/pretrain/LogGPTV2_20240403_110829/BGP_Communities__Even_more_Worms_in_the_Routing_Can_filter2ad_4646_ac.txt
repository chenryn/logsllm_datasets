in a centralized manner and redistribute it to connected member
routers. Thus, PCH offers BGP routing information for most of
the IXP members [52].
Looking Glasses: We use looking glasses of certain ASes, when
available, to confirm (i) community availability and propagation,
(ii) route changes, as well as (iii) reachability of prefixes.
Active Measurements: We use the RIPE Atlas platform [16] to
ping and traceroute to multiple targets during and after routing
experiments. RIPE Atlas is an open distributed Internet mea-
surement platform with roughly 10K active measurement nodes.
When studying traffic shifting and/or dropping attacks, we use
traceroutes along the expected and the altered path to ensure
the effect of the routing attack on the data plane.
4.2 BGP Communities Use: A first look
As a first step, we measure how wide-spread community use is.
Overall, our results validate previous observations [28, 29, 34, 36]
that it has increased significantly over the last five years, see Fig-
ure 3. Indeed, today more than 5K ASes offer community-based
283
services4 and we observe more than 63K different communities in
our dataset from April 2018. This is an increase of 18% over 2017.
Overall, we find that more than 75% of all BGP announcements
at the more than 190 BGP collectors have at least one community
set. This means that we can indeed use these collectors to study
community use and propagation. Interestingly, some collectors ob-
serve more communities than others. Figure 4(a) shows for each
BGP collector the fraction of their updates which have at least
one community set (in increasing order for each of the four plat-
forms). A large number of our observation points allow us to study
community propagation.
We also measure the number of distinct ASes for which we see
communities at each BGP collector, see Table 2. We see more than
60K unique communities from more than 5.6K ASes which are not
directly peering with the respective BGP collector. This suggests
that communities are propagated beyond direct BGP neighbors; or
one would only see communities associated with direct BGP-peers
of the collector.
Next, we measure the number of communities per BGP announce-
ment, see Figure 4(b). Recall, 75% carry at least one BGP community.
Moreover, 51% have more than two communities set and 0.06% have
more than 50 communities set (blue dots). These communities are
often (41%) associated with more than a single AS (orange triangle).
This is yet another signal that communities are indeed transitive.
4.3 BGP Communities Propagation Properties
Next, we measure how far communities propagate. We rely on
the format convention, i.e.: AS:value. Consider a BGP update for
prefix p originated at AS1 and observed at AS5 with AS path AS5
AS4 AS3 AS2 AS1. Assume that the update is tagged with AS1:X
and AS3:Y. We assume that AS1 tagged the route with community
AS1:X since it is the origin AS. The second community is tagged
with AS3 and can be either a community received by AS3 from
AS2 on ingress or set by AS3 on egress towards AS4. To estimate
how far communities propagate we conservatively assume that the
route is tagged with the community AS3:Y by AS3 rather than by
AS2.
However, there is a significant number (21K) of communities of
the form ASX:Y where ASX is not on the AS path. We call these
communities łoff-pathž and the others łon-pathž. The former can
occur, e.g., at an IXP where the IXP’s AS provides the service sig-
naled by the community but, by convention, IXPs are not on the
AS path. Other reasons involve widespread tagging (community
bundling) to simplify configuration, see, e.g., as reported by Giotsas
et al. [36]. Overall, see Table 2, we find that 4K ASes are encoded in
the on-path communities and 2K in off-path communities. Among
the off-path communities there are roughly 400 private ASes [49].
Private ASes are per se off-path as they are not routed. They are
often used by networks with large AS numbers which do not fit into
the 32-bit community format. Thus, we focus on the communities
with public AS numbers.
For on-path communities Figure 5(a) shows an ECDF of the num-
ber of AS hops that each community is relayed along the AS path.
The red triangles represent the all BGP communities we observed.
4This statistic is computed under the assumption that communities follow the format
convention, namely, AS:value.
IMC ’18, October 31–November 2, 2018, Boston, MA, USA
F. Streibelt et al.
1.0
0.8
0.6
0.4
0.2
s
e
i
t
i
n
u
m
m
o
c
f
o
n
o
i
t
c
a
r
F
●
0
●
●
●
●
●
●
●
●
●
●
●
● Blackholing
All
s
e
i
t
i
n
u
m
m
o
c
f
o
n
o
i
t
c
a
r
F
1.0
0.8
0.6
0.4
0.2
0.0
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
AS path length 3
AS path length 4
AS path length 5
AS path length 6
AS path length 7
AS path length 8
AS path length 9
AS path length 10
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
2
4
6
8
10
0.1
0.3
0.5
0.7
0.9
Hop count
Relative propagation distance
(a) Propagation distance ECDF: path communities.
(b) Propagation distance ECDF: by AS path length.
(c) Top-10 values for off- and on-path communities.
Figure 5: BGP communities propagation properties.
Source
Total
# of ASes
RIS
RV
IS
PCH
Total
4,931
5,383
4,728
4,170
5,659
w/o
collector
peer
4,925
5,375
4,723
4,118
5,630
on-path
off-path
off-path
w/o private
3,647
3,510
3,513
3,002
3,958
1,826
1,668
1,757
1,585
2,154
1,480
1,279
1,420
1,259
1,721
Table 2: Summary of ASes with observed BGP communities.
We find that a significant number of communities are propagated
multiple hops. Almost 50% of the communities travel more than
four hops (the mean hop length of all announcements [51]). The
maximum hop distance we observed is 11 which, given the highly
connected AS graph, is rather large.
To check if specific classes of communities are more likely to be
propagated we consider blackholing communities as a case study.
Hereby, we identify blackholing communities either by the value
666 as defined in RFC7999 [47] or based on the list of verified and
inferred blackholing communities from previous work [36]. The
resulting ECDF is shown by the purple squares in Figure 5(a). The
difference between the two ECDFs clearly shows that blackholing
communities do not travel (on average) as far as other BGP commu-
nities. Around 50% of the blackholing communities travel only up to
two AS hops, about 80% travel up to four. This is a clear indication
that blackholing communities are treated differently by network
operators. On the other hand, we still observe some blackholing
communities with large hop counts ś up to 11.
To check to which extent the above observations are biased by
the AS-path length, Figure 5(b) shows the ECDF of the number
AS edges that each community is relayed on for different AS path
lengths. Hereby, we do not consider communities of the monitor
AS but do include the edge to the monitor. The color gradient
corresponds to the respective AS path lengthÐlight green for path
length of three up to dark blue with a path length of 10 ASes.
This plot highlights that a significant number of the communities
travel more than 50% of the AS-path distance. However, as the path