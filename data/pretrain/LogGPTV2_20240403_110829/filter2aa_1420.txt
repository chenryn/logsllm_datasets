Welcome Home!
Internet Open Telemetry
Martin Hron
security researcher
HITCON 2018
Buzzword
2
A word or phrase which has become fashionable or
popular, or sounds technical or important and is used to
impress people
3
So let’s talk about IoT
What is IoT?
4
Flashback: How it has started
5
• Make my house smart. DYI way.
Flashback: How it has started
6
• Many smart devices or devices that can be made smart ☺
7
Babylon of “standards”
8
• You can go two ways:
• use one vendor and one solution, one cloud
• you have many devices from different vendors or even dumb 
devices which need to be made smart
9
Babylon of “standards”
10
• Physical layer / data link
• Bluetooth
• RS232, RS485, CAN, eBUS
• WiFi, Ethernet
• ZigBee
• 433, 866 MHz
• and many others
Babylon of “standards”
11
• Transport / application layer
• Textual data
• JSON
• HTTP
• XML
• Binary oriented protocols
• Proprietary protocols
12
Message Queue Telemetry Transport - MQTT
13
• publisher - subscriber model
• payload agnostic
• topics can be organized in tree like structure
• when subscribing wildcards can be used
• usually operates through TCP on port 1883
• supports  “last will” and persistent topics
MQTT topics
14
• Examples of topics:
/house/attic/light
/house/basement/door
/house/basement/light
• Tree like organized structure. When subscribing, you can use 
wildcards. # for all levels from here down the tree or + for any 
single level.
• Subscription to  /house/+/light  delivers all light topics in any 
room
• Subscription to only # delivers every topic published by anyone 
to this MQTT server/broker.
MQTT Broker use case in “smart home”
15
MQTT Broker
sensor
(switch)
sensor
(door contact)
sensor
(thermometer)
“smart 
breaker“ box 
with MQTT 
bridge
actor
(smart bulb)
actor
(garage doors)
actor/sensor
(heating unit)
bridge
sensor
(switch)
actor
(dumb bulb)
bridge
bridge
simple wire
ZigBee
ETH / WiFi
eBUS
bussines logic
Typical implementation
16
• Various smart and dumb devices bridged to MQTT
• One namespace of topics spans whole building
• MQTT broker, Mosquitto is commonly used one
• Business logic usually provided by some server software which connects  
to MQTT
• It usually provides some dashboard and frontend
Domoticz, openHAB, Home Assistant, MQTT dash, Node-Red and many 
others
17
And what about security?
Yes! There is! 
Welcome home!
18
Welcome home!
19
Welcome home!
20
• Many dashboards have no password set
• There are ~45K MQTT servers available to connect
• There are ~26K MQTT servers opened without any 
password set
• Remember? You can subscribe to #
• If there is password you can still get there……
21
Rules of the house
no exploits
use what is available
cause no harm
even if you are tempted to do so ;)
22
So let’s talk about IoT
23
DEMO TIME
24
Domoticz
Home Assistant
Home automation systems
25
• Similar concept
• Provide business logic
• Provide  frontend / dashboard
• Usually Integrate with MQTT
26
Domoticz
27
Home Assistant: case study
28
Home Assistant: at the same IP 
29
Home Assistant: at the same IP 
30
Home Assistant: give me your secrets
31
Home Assistant: Welcome Home!
32
MQTT DASH
MQTT Dash
33
• Simple Android/IOS app 
• MQTT centric, simple UI that directly reflects state or 
controls devices through MQTT topics
• Interesting concept of storing/loading whole 
configuration by publishing it to the “persistent” topic
34
35
DEMO TIME
36
OWNTRACKS
PWNTRACKS
Your “personal” GPS tracker
37
• Basically Android and IOS application for creating GPS 
tracking log
• Supports MQTT 
• Forget about unsecured cameras, this is even worse.
38
DEMO TIME
Conclusion
39
• Real world example how bad the situation is
• Educate people more about security
• Let’s stick to security as an opt-out choice everywhere it 
is possible
• Please, pretty please
• I beg you
• DON’T STORE PASSWORDS IN PLAINTEXT
THERE IS ONLY ONE SECURITY
40
STOP SAYING IoT SECURITY!
41
MQTT can be also used for automation of your garden
But the risks can sometimes be “high”
Go ahead and ask!
42
Thank You!
Martin Hron
@thinkcz
PI:EMAIL
www.avast.com