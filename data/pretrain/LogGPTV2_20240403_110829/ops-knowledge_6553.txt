User: 请解答这个和日志有关的问题httpd ldap and file authentication error We have SVN running via Apache httpd. For authentication we use Active Directory and if the user isn't in AD, we fallback to file authentication. This works fine, except for the error messages in case of file authentication. The error message we get over and over again:

auth_ldap authenticate: user &lt;user&gt; authentication failed; URI /svn/some/uri [User not found][No such object]

We would like to filter out these messages since our log files grows rapidly due to this unnecessary log message.

Assistant: Sorry for answering my own question, but I have implemented a solution that I wanted to share wit you since you were helping me out and it may be of value to others.

Basically its rather simple, I didn't change the logging at all, I just changed the log rotation (/etc/logrotate.d/httpd) to:

/var/log/httpd/*log {
        compress
        compresscmd /usr/bin/bzip2
        compressext .bz2
        daily
        dateext
        maxage 31
        rotate 14
        size=+4096k
        notifempty
        missingok
        sharedscripts
        prerotate
                /bin/sed -i '/User not found/d' /var/log/httpd/*svn_error_log
        endscript
        postrotate
                /sbin/service httpd graceful &gt; /dev/null 2&gt;/dev/null || true
        endscript
}


This way all false positives are removed from the log file on a daily basis. The size of the log files is reduced and doesn't grow over time, since the files are removed after 31 days (max).