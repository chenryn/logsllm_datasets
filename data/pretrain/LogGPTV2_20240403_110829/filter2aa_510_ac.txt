creating configuration files for other servers. You can edit the file directly or create 
scripts to create customized configuration files for any number of servers that use 
similar hardware.
To save a template configuration file during server setup:
1 In the final pane of the Server Assistant, after you review the settings, click Save As.
2 In the dialog that appears, choose Configuration File next to “Save as” and click OK.
So you can later edit the file, don’t select “Save in Encrypted Format.”
3 Choose a location to save the file and click Save.
LL2354.book  Page 21  Monday, October 20, 2003  9:47 AM
22
Chapter 2    Installing Server Software and Finishing Basic Setup
To create a template configuration file at any time after initial setup:
1 Open the Server Assistant (in /Applications/Server).
2 In the Welcome pane, choose “Save setup information in a file or directory record” and 
click Continue.
3 Enter settings on the remaining panes, then, after you review the settings in the final 
pane, click Save As.
4 In the dialog that appears, choose Configuration File next to “Save as” and click OK.
So you can later edit the file, don’t select “Save in Encrypted Format.”
5 Choose a location to save the file and click Save.
Creating Customized Configuration Files from the Template File
After you create a template configuration file, you can modify it directly using a text 
editor or write a script to automatically generate custom configuration files for a group 
of servers.
The file uses XML format to encode the setup information. The name of an XML key 
reveals the setup parameter it contains. 
The following example shows the basic structure and contents of a configuration file 
for a server with the following configuration:
• An administrative user named “Administrator” (short name “admin”) with a user ID of 
501 and the password “secret”
• A computer name and host name of “server1.company.com”
• A single Ethernet network interface set to get its address from DHCP
• No server services set to start automatically
AdminUser
exists
name
admin
password
secret
realname
Administrator
uid
501
ComputerName
server1.company.com
LL2354.book  Page 22  Monday, October 20, 2003  9:47 AM
Chapter 2    Installing Server Software and Finishing Basic Setup
23
DS
DSClientInfo
2 - NetInfo client - broadcast dhcp static -192.168.42.250 
network
DSClientType
2
DSType
2 - directory client
HostName
server1.company.com
InstallLanguage
English
Keyboard
DefaultFormat
0
DefaultScript
0
ResID
0
ResName
U.S.
ScriptID
0
NetworkInterfaces
ActiveAT
ActiveTCPIP
DNSDomains
company.com
DNSServers
192.168.100.10
DeviceName
en0
EthernetAddress
00:0a:93:bc:6d:1a
PortName
Built-in Ethernet
Settings
DHCPClientID
LL2354.book  Page 23  Monday, October 20, 2003  9:47 AM
24
Chapter 2    Installing Server Software and Finishing Basic Setup
Type
DHCP Configuration
NetworkTimeProtocol
UsingNTP
Rendezvous
RendezvousEnabled
RendezvousName
beasbe3
SerialNumber
a-123-bcd-456-efg-789-hij-012-klm-345-n
ServicesAutoStart
Apache
File
MacManager
Mail
Print
QTSS
WebDAV
TimeZone
US/Pacific
VersionNumber
1
Note:  The actual contents of a configuration file depend on the hardware configuration 
of the computer on which it’s created. This is one reason you should start from a 
template configuration file created on a computer similar to those you plan to set up.
LL2354.book  Page 24  Monday, October 20, 2003  9:47 AM
Chapter 2    Installing Server Software and Finishing Basic Setup
25
Naming Configuration Files
The Server Assistant recognizes configuration files with these names:
• MAC-address-of-server.plist
• IP-address-of-server.plist
• hardware-serial-number-of-server.plist
• full-host-name-of-server.plist
• generic.plist
The Server Assistant uses the file to set up the server with the matching address, name, 
or serial number. If the Server Assistant cannot find a file named for a particular server, 
it will use the file named generic.plist.
Storing a Configuration File in an Accessible Location
The Server Assistant looks for configuration files in the following locations:
/Volumes/vol/Auto Server Setup/
where vol is any device volume mounted in the /Volumes directory.
Devices you can use to provide configuration files include
• A partition on one of the server’s hard disks
• An iPod
• An optical (CD or DVD) drive
• A USB or FireWire drive
• Any other portable storage device that mounts in the /Volumes directory
Changing Server Settings
After initial setup, you can use a variety of commands to view or change Mac OS X 
Server configuration settings.
For information on changing general system preferences, see Chapter 4, “Setting 
General System Preferences,” on page 31.
For information on changing network settings, see Chapter 5, “Network Preferences,” on 
page 37.
For information on changing service-specific settings, see the chapter that covers the 
service.
LL2354.book  Page 25  Monday, October 20, 2003  9:47 AM
26
Chapter 2    Installing Server Software and Finishing Basic Setup
Viewing, Validating, and Setting the Software 
Serial Number
You can use the serversetup command to view or set the server’s software serial 
number or to validate a server software serial number. The serversetup utility is 
located in /System/Library/ServerSetup.
To display the server’s software serial number:
$ serversetup -getSerialNumber
To set the server software serial number:
$ sudo serversetup -setSerialNumber serialnumber
To validate a server software serial number:
$ serversetup -verifySerialNumber serialnumber
Displays 0 if the number is valid, 1 if it isn’t.
Updating Server Software
You can use the softwareupdate command to check for and install software updates 
over the web from Apple’s website.
To check for available updates:
$ softwareupdate --list
To install an update:
$ softwareupdate --install update-version
To view command help:
$ softwareupdate --help
Parameter
Description
serialnumber
A valid Mac OS X Server software serial number, as found on the 
software packaging that comes with the software.
Parameter
Description
update-version
The hyphenated product version string that appears in the list of 
updates when you use the --list option.
LL2354.book  Page 26  Monday, October 20, 2003  9:47 AM
Chapter 2    Installing Server Software and Finishing Basic Setup
27
Moving a Server
Try to place a server in its final network location (subnet) before setting it up for the 
first time. If you’re concerned about unauthorized or premature access, you can set up 
a firewall to protect the server while you're finalizing its configuration. 
If you must move a server after initial setup, you need to change settings that are 
sensitive to network location before the server can be used. For example, the server's IP 
address and host name—stored in both directories and configuration files that reside 
on the server—must be updated.
When you move a server, consider these guidelines:
• Minimize the time the server is in its temporary location so the information you need 
to change is limited.
• Don’t configure services that depend on network settings until the server is in its 
final location. Such services include Open Directory replication, Apache settings 
(such as virtual hosts), DHCP, and other network infrastructure settings that other 
computers depend on.
• Wait to import final user accounts. Limit accounts to test accounts so you minimize 
the user-specific network information (such as home directory location) that will 
need to change after the move.
• After you move the server, use the changeip tool to change IP addresses, host 
names, and other data stored in Open Directory NetInfo and LDAP directories on the 
server. See “Changing a Server’s IP Address” on page 39. You may need to manually 
adjust some network configurations, such as the local DNS database, after using the 
tool.
• Reconfigure the search policy of computers (such as user computers and DHCP 
servers) that have been configured to use the server in its original location.
LL2354.book  Page 27  Monday, October 20, 2003  9:47 AM
LL2354.book  Page 28  Monday, October 20, 2003  9:47 AM
3
29
3 Restarting or Shutting Down a 
Server
Commands you can use to shut down or restart a local or 
remote server.
Restarting a Server
You can use the reboot or shutdown -r command to restart a server at a specific 
time. For more information, see the man pages.
Examples
To restart the local server:
$ shutdown -r now
To restart a remote server immediately:
$ ssh -l root server shutdown -r now
To restart a remote server at a specific time:
$ ssh -l root server shutdown -r hhmm
Automatic Restart
You can also use the systemsetup command to set up the server to start automatically 
after a power failure or system freeze. See “Viewing or Changing Automatic Restart 
Settings” on page 33.
Parameter
Description
server
The IP address or DNS name of the server.
hhmm
The hour and minute when the server restarts.
LL2354.book  Page 29  Monday, October 20, 2003  9:47 AM
30
Chapter 3    Restarting or Shutting Down a Server
Changing a Remote Server’s Startup Disk
You can change a remote server’s startup disk using SSH.
To change the startup disk:
Log in to the remote server using SSH and type
$ bless -folder "/Volumes/disk/System/Library/CoreServices" -setOF
For information on using SSH to log in to a remote server, see “Sending Commands to 
a Remote Server” on page 16.
Shutting Down a Server
You can use the shutdown command to shut down a server at a specific time. For more 
information, see the man page.
Examples
To shut down a remote server immediately:
$ ssh -l root server shutdown -h now
To shut down the local server in 30 minutes:
$ shutdown -h +30
Parameter
Description
disk
The name of the disk that contains the desired startup volume.
Parameter
Description
server
The IP address or DNS name of the server.
LL2354.book  Page 30  Monday, October 20, 2003  9:47 AM
4
31
4 Setting General System 
Preferences
Commands you can use to set system preferences, 
usually set using the System Preferences GUI application.
Computer Name
You can use the systemsetup command to view or change a server’s computer name 
(the name used to browse for AFP share points on the server), which would otherwise 
be set using the Sharing pane of System Preferences.
Viewing or Changing the Computer Name
To display the server’s computer name:
$ sudo systemsetup -getcomputername
or
$ sudo networksetup -getcomputername
To change the computer name:
$ sudo systemsetup -setcomputername computername
or
$ sudo networksetup -setcomputername computername
Date and Time
You can use the systemsetup or serversetup command to view or change:
• A server’s system date or time
• A server’s time zone
• Whether a server uses a network time server
These settings would otherwise be changed using the Date & Time pane of System 
Preferences.
LL2354.book  Page 31  Monday, October 20, 2003  9:47 AM
32
Chapter 4    Setting General System Preferences
Viewing or Changing the System Date
To view the current system date:
$ sudo systemsetup -getdate
or
$ serversetup -getDate
To set the current system date:
$ sudo systemsetup -setdate mm:dd:yy
or
$ sudo serversetup -setDate mm/dd/yy
Viewing or Changing the System Time
To view the current system time:
$ sudo systemsetup -gettime
or
$ serversetup -getTime
To change the current system time:
$ sudo systemsetup -settime hh:mm:ss
or
$ sudo serversetup -setTime hh:mm:ss
Viewing or Changing the System Time Zone
To view the current time zone:
$ sudo systemsetup -gettimezone
or
$ serversetup -getTimeZone
To view the available time zones:
$ sudo systemsetup -listtimezones
To change the system time zone:
$ sudo systemsetup -settimezone timezone
or
$ sudo serversetup -setTimeZone timezone
LL2354.book  Page 32  Monday, October 20, 2003  9:47 AM
Chapter 4    Setting General System Preferences
33
Viewing or Changing Network Time Server Usage
To see if a network time server is being used:
$ sudo systemsetup -getusingnetworktime
To enable or disable use of a network time server:
$ sudo systemsetup -setusingnetworktime (on|off)
To view the current network time server:
$ sudo systemsetup -getnetworktimeserver
To specify a network time server:
$ sudo systemsetup -setnetworktimeserver timeserver
Energy Saver Settings
You can use the systemsetup command to view or change a server’s energy saver 
settings, which would otherwise be set using the Energy Saver pane of System 
Preferences.
Viewing or Changing Sleep Settings
To view the idle time before sleep:
$ sudo systemsetup -getsleep
To set the idle time before sleep:
$ sudo systemsetup -setsleep minutes
To see if the system is set to wake for modem activity:
$ sudo systemsetup -getwakeonmodem
To set the system to wake for modem activity:
$ sudo systemsetup -setwakeonmodem (on|off)
To see if the system is set to wake for network access:
$ sudo systemsetup -getwakeonnetworkaccess
To set the system to wake for network access:
$ sudo systemsetup -setwakeonnetworkaccess (on|off)
Viewing or Changing Automatic Restart Settings
To see if the system is set to restart after a power failure:
$ sudo systemsetup -getrestartpowerfailure
To set the system to restart after a power failure:
$ sudo systemsetup -setrestartpowerfailure (on|off)
To see how long the system waits to restart after a power failure:
$ sudo systemsetup -getWaitForStartupAfterPowerFailure
LL2354.book  Page 33  Monday, October 20, 2003  9:47 AM
34
Chapter 4    Setting General System Preferences
To set how long the system waits to restart after a power failure:
$ sudo systemsetup -setWaitForStartupAfterPowerFailure seconds
To see if the system is set to restart after a system freeze:
$ sudo systemsetup -getrestartfreeze
To set the system to restart after a system freeze:
$ sudo systemsetup -setrestartfreeze (on|off)
Power Management Settings
You can use the pmset command to change a variety of power management settings, 
including:
• Display dim timer
• Disk spindown timer
• System sleep timer
• Wake on network activity
• Wake on modem activity
• Restart after power failure
• Dynamic processor speed change
• Reduce processor speed
• Sleep computer on power button press
For more information, see the pmset man page.
Startup Disk Settings
You can use the systemsetup command to view or change a server’s computer startup 
disk, which would otherwise be set using the Startup Disk pane of System Preferences.
Viewing or Changing the Startup Disk
To view the current startup disk:
$ sudo systemsetup -getstartupdisk
To view the available startup disks:
$ sudo systemsetup -liststartupdisks
To change the current startup disk:
$ sudo systemsetup -setstartupdisk path
Parameter
Description
seconds
Must be a multiple of 30 seconds.
LL2354.book  Page 34  Monday, October 20, 2003  9:47 AM
Chapter 4    Setting General System Preferences
35
Sharing Settings
You can use the systemsetup command to view or change settings that would 
otherwise be set using the Sharing pane of System Preferences.
Viewing or Changing Remote Login Settings
You can use SSH to log in to a remote server if remote login is enabled.
To see if the system is set to allow remote login:
$ sudo systemsetup -getremotelogin
To enable or disable remote login:
$ sudo systemsetup -setremotelogin (on|off)
or
$ serversetup -enableSSH
Telnet access is disabled by default because it isn’t as secure as SSH. You can, however, 
enable Telnet access. See “Using Telnet” on page 18.
Viewing or Changing Apple Event Response
To see if the system is set to respond to remote events:
$ sudo systemsetup -getremoteappleevents
To set the server to respond to remote events:
$ sudo systemsetup -setremoteappleevents (on|off)
International Settings
You can use the serversetup command to view or change language settings that 
would otherwise be set using the Sharing pane of System Preferences.
Viewing or Changing Language Settings
To view the current primary language:
$ serversetup -getPrimaryLanguage
To view the installed primary language:
$ serversetup -getInstallLanguage
To change the install language:
$ sudo serversetup -setInstallLanguage language
To view the script setting:
$ serversetup -getPrimaryScriptCode
LL2354.book  Page 35  Monday, October 20, 2003  9:47 AM
36
Chapter 4    Setting General System Preferences
Login Settings
Disabling the Restart and Shutdown Buttons
To disable or enable the Restart and Shutdown buttons in the login dialog:
$ sudo serversetup -setDisableRestartShutdown (0|1)
0 disables the buttons.
1 enables the buttons.
To view the current setting:
$ serversetup -getDisableRestartShutdown
LL2354.book  Page 36  Monday, October 20, 2003  9:47 AM
5
37
5 Network Preferences
Commands you can use to change a server’s network 
settings.
Network Interface Information
This section describes commands you address to a specific hardware device 
(for example, en0) or port (for example, Built-in Ethernet).
If you prefer to work with network port configurations following the approach used in 
the Network preferences pane of System Preferences, see the commands in “Network 
Port Configurations” on page 38.
Viewing Port Names and Hardware Addresses
To list all port names: