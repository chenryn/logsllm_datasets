# 优化后的文本

## 4.02.0 原始页面与第三方重写对比

### 网络条件
- **100 ms**
- **50 ms**
- **20 ms**
- **5 ms**

### 最后一英里（有线）延迟
- **图13**：在蜂窝网络条件下，TPTR为25%的页面PLT。
- **图14**：在有线网络条件下，TPTR为25%的页面PLT。

类似地，在比较TPTR为25%和5%的网页在图13、14以及图15、16中的PLT时，我们观察到通过重写第三方URL可以减少PLT。然而，对于这些网页，改进效果不如在图11和12中观察到的明显，因为这些网页的TPTR较低。例如，在图13和图14中，具有重写第三方URL的网页在公平移动条件下和20毫秒端到端有线延迟下的中位数PLT和TPTR分别比原始网页低15%和10%。同样，在图15和图16中，相同条件下的中位数PLT和TPTR分别比原始网页低3%和2.2%。

### 注意事项
对于希望为其网页启用第三方内容加速的CP客户，只有当CDN提供商与个别第三方提供商签订法律协议以终止HTTPS连接并缓存请求内容时，才应对所有通过HTTPS提供的第三方对象进行URL重写。此外，URL重写不会给CP引入任何操作复杂性。当CDN提供商从其CP客户获取HTML时，CDN可以解析HTML并对关键路径上的第三方对象应用URL重写。进一步地，随着CDN缓存第三方对象，这些对象可以像CDN刷新其CP客户的内容一样进行刷新。

### 图15和图16
- **图15**：在蜂窝网络条件下，TPTR为5%的页面PLT。
- **图16**：在有线网络条件下，TPTR为5%的页面PLT。

## 讨论

PLT的改进取决于TPTR值——TPTR值越高，降低PLT的潜力越大。尽管我们的URL重写技术展示了PLT的改进，但我们认为对于某些第三方，重写URL可能会降低性能。例如，在图17中，我们比较了一个流行的第三方资源在DNS查找时间、TCP握手时间、首次收到数据的时间、下载时间和总加载时间方面的性能，分别从主要CDN提供商网络和第三方服务器加载。我们观察到，第三方资源的DNS查找时间显著低于主要CDN提供商的DNS查找时间，可能是因为用于此实验的一方域名不够流行，因此未被本地DNS解析器缓存。TCP握手、首次收到数据的时间和下载时间在从第三方或一方服务器下载同一对象时相似。因此，总加载时间主要受DNS查找时间的影响。

同样，在图18中，我们展示了另一个第三方资源的相同性能指标。我们观察到，虽然DNS查找时间仍然较高，但TCP握手和首次收到数据的时间在从一方服务器下载资源时显著较低，从而导致使用重写URL时总加载时间更短。因此，我们认为在传输带有重写URL的HTML之前，应对每个关键的第三方资源进行仔细的性能分析。

### 图19和图20
- **图19**：重写h2页面URL后的PLT分布。
- **图20**：显示3P加载时间变化的分布。

## 结论
我们的大规模调查揭示了第三方内容最多可影响整体网页加载时间达50%。通过广泛的实验，我们证明将第三方流量重定向到一方基础设施可以改善网页加载时间。因此，我们建议一方提供商调查网页关键路径上是否存在第三方资源，并利用URL重写来提高最终用户的Web性能。未来，我们计划在生产Web流量上进行更大规模的测量。

### 致谢
感谢Ilya Grigorik, Shantharaju Jayanna, Wontaek Na和Kanika Shah的帮助。我们也感谢国家科学基金会通过CNS-1555591和CNS-1527097资助这项工作。

### 参考文献
[此处省略具体参考文献链接]

---

以上是对原文本的优化，使其更加清晰、连贯和专业。如果有任何特定部分需要进一步调整，请告知。