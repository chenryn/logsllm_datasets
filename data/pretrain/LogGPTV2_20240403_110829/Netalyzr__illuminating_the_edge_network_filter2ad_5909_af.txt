are frequently blocked, and that email-related ports are more than
twice as likely to be blocked as other ports [3]. Reis et al. used
JavaScript-based “web tripwires” to detect modiﬁcations to HTTP-
borne HTML documents [20]. Of the 50,000 unique IP addresses
from which users visited their test website, approximately 0.1%
experienced content modiﬁcations. Nottingham provided a cache
ﬁdelity test for XMLHttpRequest implementations [18], analyzing
a large variety of caching properties including HTTP header val-
ues, content validation and freshness, caching freshness, and vari-
ant treatment. NetPolice [28] measured trafﬁc differentiation in
18 large ISPs for several popular services in terms of packet loss,
using multiple end points inside a given ISP to transmit application-
layer trafﬁc to destinations using the same ISP egress points. They
found clear indications of preferential treatments for different kinds
of service. Finally, subsequent to Netalyzr’s release, Huang et al.
released a network tester for smartphones to detect hidden proxies
and service blocks using methodology inspired by Netalyzr [13].
257COUNTRY WIN
99
BLOCKED (%)
SMTP MSSQL
ISP
Comcast
RoadRunner
Verizon
SBC
Deutsche Telekom
Cox Cable
Charter Comm.
Qwest
BE Un Limited
BellSouth
Telefonica
Arcor
Shaw Cable
British Telecom
Alice DSL
Telecom Italia
Virgin Media
Rogers Cable
Optimum Online
Comcast Business
SESSIONS
14,765
6,321
4,341
3,363
2,694
2,524
1,888
1,502
1,439
1,257
1,206
1,206
1,198
1,098
1,080
1,075
1,028
994
983
847
US
US
US
US
DE
US
US
US
UK
US
ES
DE
US
UK
DE
IT
UK
CA
US
US
DNS
WILDCARDING
TYPE
%
37
www
64
www
www
84
88
36
96
13
all
all
all
all
www
all
www
all
www
49
30
63
50
62
63
66
77
79
PPPOE
(%)
MEDIUM
33
55
69
19
80
5
5
74
67
DSL/Fiber
Cable
Cable
DSL
DSL
Cable
Cable
DSL
DSL
DSL
DSL
DSL
Cable
DSL
DSL
DSL
Fiber
Cable
Cable
Cable
8
21
74
77
22
6
49
69
7
59
5
79
79
10
7
52
76
93
95
18
59
32
5
10
30
8
90
95
98
93
Table 3: Policies detected for the top 20 ISPs. We indicate blocking when > 5% of sessions manifested outbound ﬁltering, with WIN
corresponding to Windows services (TCP 135/139/445). We infer PPPoE from path MTUs of 1492 B.
Address ﬁdelity. Casado and Freeman investigated the reliabil-
ity of using a client’s IP address—as seen by a public server—in
order to identify the client [4]. Their basic methodology somewhat
resembles ours in that they used active web content to record and
measure various connection properties, but also differs signiﬁcantly
with regard to the process of users running the measurements. They
instrumented several websites to serve an iframe “web bug”,
leading to narrow data collection—users had to coincidentally visit
those sites, and remained oblivious to the fact that measurement
was occurring opportunistically. They found that 60% of the ob-
served clients reside behind NATs, which typically translated no
more than seven clients, while 15% of the clients arrived via HTTP
proxies, often originating from a diverse geographical region. Fi-
nally, Maier et al. [15] found that DHCP-based address reuse is
frequent, with 50% of all addresses being assigned at least twice
per day.
7. FUTURE WORK
The main goal of Netalyzr is to provide a comprehensive suite of
network functionality tests to a wide range of users. To this end,
we are currently enhancing the test reports to become more acces-
sible for non-technical users, and have partnered with websites in
Germany, Poland, the UK, and the US to bring Netalyzr to an in-
creasingly diverse audience.
Additionally, we are developing several additional tests we ex-
pect to deploy in the near future, including a command-line client to
enable Netalyzr’s inclusion in large test suites, a path MTU tracer-
oute to ﬁnd the location of path MTU failures, advanced DNS prob-
ing of the DNS proxies provided by NATs, and an IPv6 test suite,
including IPv6 differential latency, path MTU, traceroute, and ser-
vice reachability.
8. SUMMARY
The Netalyzr system demonstrates the possibility of developing
a browser-based tool that provides detailed diagnostics, discovery,
and debugging for end-user network connectivity. Visitors who
ran the Netalyzr applet conducted 130,000 measurement sessions
from 99,000 public IP Addresses. Netalyzr reveals speciﬁc prob-
lems to individual users in a detailed report that enables them to
understand and potentially ﬁx the trouble, and forms the foundation
for a broad, longitudinal survey of edge-network behavior. Some
systemic problems revealed include difﬁculties with fragmentation,
the unreliability of path MTU discovery, restrictions on DNSSEC
deployment, legacy network blocks, frequent over-buffering of ac-
cess devices, poor DNS performance for many clients, and deliber-
ate manipulations of DNS results. We believe these results to be of
signiﬁcant interest to implementors and operators, and have to date
been approached by several organizations with speciﬁc inquiries
about our ﬁndings.
Netalyzr remains in active use and we aim to support it indeﬁ-
nitely as an ongoing service for illuminating edge network neutral-
ity, security, and performance.
9. ACKNOWLEDGEMENTS
We are deeply grateful to the Netalyzr users for enabling this
study and to our beta testers for the insightful comments and feed-
back. We would particularly like to thank Mark Allman, Paul Bar-
ford, Scott Bradner, John Brzozowski, Randy Bush, Niels Bakker,
Richard Clayton, Chris Cowart, Keith Dawson, Adrian Dimcev,
Holger Dreger, Brandon Enright, Kevin Fall, Carrie Gates, Andrei
Gurtov, Mark Handley, Theodore Hong, Kelly Kane, Matthew Ko-
gan, Keith Medcalf, Thomas Narten, Michael Ross, Chris Switzer,
Wooter Wijngaards, and Richard Woundy. We thank Amazon.com
for supporting our EC2 deployment. This work was supported by
the National Science Foundation under grants NSF CNS-0722035,
NSF-0433702, and CNS-0905631, with additional support from
Google.
10. REFERENCES
[1] D. Ardelean, E. Blanton, and M. Martynov. Remote active
queue management. In NOSSDAV ’08: Proceedings of the
18th International Workshop on Network and Operating
Systems Support for Digital Audio and Video, pages 21–26,
New York, NY, USA, 2008. ACM.
258[2] J. Bennett, C. Partridge, and N. Shectman. Packet reordering
is not pathological network behavior. IEEE/ACM
Transactions on Networking (TON), 7:789–798, 1999.
[3] R. Beverly, S. Bauer, and A. Berger. The Internet’s Not a Big
Truck: Toward Quantifying Network Neutrality. In Proc.
PAM, 2007.
[4] M. Casado and M. Freedman. Peering through the Shroud:
The Effect of Edge Opacity on IP-based Client Identiﬁcation.
In Proc. NSDI, 2007.
[5] Chad R. Dougherty. CERT Vulnerability Note VU 800113:
Multiple DNS implementations vulnerable to cache
poisoning, July 2008.
[6] What ports are blocked by Comcast High-Speed Internet?
http://lite.help.comcast.net/content/faq/
What−ports−are−blocked−by−Comcast−High−
Speed−Internet.
Increased DNS Forgery Resistance Through 0x20-bit
Encoding. In Proc. CCS, 2008.
[7] D. Dagon, M. Antonakakis, P. Vixie, T. Jinmei, and W. Lee.
[8] M. Dischinger, A. Haeberlen, K. P. Gummadi, and S. Saroiu.
Characterizing Residential Broadband Networks. In Proc.
IMC, 2007.
[9] M. Dischinger, A. Mislove, A. Haeberlen, and K. Gummadi.
Detecting BitTorrent Blocking. In Proc. IMC, 2008.
[10] R. Erzs and R. Bush. Clariﬁcations to the DNS Speciﬁcation.
RFC 2181, IETF, July 1997.
[11] M. Fauenfelder. How to get rid of Vimax ads.
[12] R. Giobbi. CERT Vulnerability Note VU 435052:
http://boingboing.net/2009/01/16/how−to−get−
rid−of−vi.html, January 2009.
Intercepting proxy servers may incorrectly rely on HTTP
headers to make connections, February 2009.
[13] J. Huang, Q. Xu, B. Tiwana, and M. Mao. The UMich
Smartphone 3G Test.
http://www.eecs.umich.edu/3gtest/.
[14] C. Kent and J. Mogul. Fragmentation considered harmful.
ACM SIGCOMM Computer Communication Review,
25(1):87, 1995.
[15] G. Maier, A. Feldmann, V. Paxson, and M. Allman. On
dominant characteristics of residential broadband internet
trafﬁc. In Proc. IMC, 2009.
[16] M. Mathis and J. Heffner. Packetization Layer Path MTU
Discovery. RFC 4821, IETF, March 2007.
[17] Mozilla. Effective TLD names. http://mxr.mozilla.
org/mozilla−central/source/netwerk/dns/src/
effective_tld_names.dat.
[18] M. Nottingham. XMLHttpRequest Caching Tests.
http://www.mnot.net/javascript/
xmlhttprequest/cache.html, December 2008.
[19] V. Paxson. An analysis of using reﬂectors for distributed
denial-of-service attacks. ACM SIGCOMM Computer
Communication Review, 31(3):38–47, 2001.
[20] C. Reis, S. Gribble, T. Kohno, and N. Weaver. Detecting
In-Flight Page Changes with Web Tripwires. In Proc. NSDI,
2008.
[21] A. Ritacco, C. Wills, and M. Claypool. How’s My Network?
A Java Approach to Home Network Measurement. In
ICCCN 2009, pages 1–7. IEEE, 2009.
[22] S. Saroiu, P. Gummadi, S. Gribble, et al. A measurement
study of peer-to-peer ﬁle sharing systems. In Proceedings of
Multimedia Computing and Networking, volume 2002, page
152, 2002.
[23] P. Savola. MTU and Fragmentation Issues with
In-the-Network Tunneling. RFC 4459, 2006.
[24] M. Tariq, M. Motiwala, N. Feamster, and M. Ammar.
Detecting network neutrality violations with causal
inference. In Proc. Emerging Networking Experiments and
Technologies, 2009.
[25] P. Vixie. Extension Mechanisms for DNS (EDNS0). RFC
2671, IETF, August 1999.
[26] Wikipedia. http://en.wikipedia.org/wiki/Usage_
share_of_operating_systems, January 2010.
[27] Wikipedia. http://en.wikipedia.org/wiki/Usage_
share_of_web_browsers, January 2010.
[28] Y. Zhang, Z. M. Mao, and M. Zhang. Detecting trafﬁc
differentiation in backbone ISPs with NetPolice. In Proc.
IMC, 2009.
259