# 下一座圣杯——2019
##### 译文声明
本文是翻译文章，文章原作者 DJ的札记，文章来源：DJ的札记
原文地址：
译文仅供参考，具体内容表达以及含义原文为准。
今年的圣杯文章拖延很久，原因是笔者公司也在做这方向产品，所以故意押后几个月才发：先看清市场有没有跟随者以及其理解程度。毕竟创业公司要辛苦谋生度日，竞争态势也需要时刻注意。每年的圣杯文章预测两年后初见成功的新安全产品。今年笔者挑选的方向注定是个红海；初创公司要谨慎进入，因为必然会直面大厂发起的凶猛竞争。
## 应用安全的发展
最近十年，应用安全从未缺席行业热点关注。公众号留言希望笔者写写有关应用安全的要求也从未间断过。还记得2015年关于安全新趋势的文章吗？数据是新中心、身份是新边界、行为是新控制、情报是新服务。每一点都代表着创业公司的市场机会。唯独没有应用安全。应用安全不重要吗？当然不是。软件定义世界，没有人会否认软件自身安全性的重要程度。可惜的是，在2015年，笔者并没看到应用安全出现新技术变革。基础设施演进给应用安全市场带来了新机会，也只是交付方式的改变，导致新增容量大部分被云基础设施大厂瓜分殆尽。过去数年间，缺乏技术变革，还要面对CSP逐步蚕食份额，应用安全厂商感觉压力山大，都在发愁如何把乏善可陈的产品做出亮点。在此大环境下，专注技术创新的初创公司也很难孵化出明星。
为了佐证此论断，我们不妨对比2004年与2017年OWASP Top
10的变化。下图中，笔者用箭头画出了相差十三年两份列表的内容对应关系。透过表象看实质：仔细研究其详细解释，就会发现除了列表标题文字表达有些许差异外，具体安全控制点在两份文档中几乎都可以一条不落地找到。
例如，2004 A10 Insecure Configuration Management具体解释中第一点即明确提到unpatched security
flaws in the server software，与2017 A9 Using Components with Known
Vulnerabilities并无本质区别。2017 A4 XXE是新出现的条目，自然是由于XML广泛应用所引起的，但是让我们看一眼2004 A1
Unvalidated Input的解释：Attackers can tamper with any part of an HTTP request,
including the url, querystring, headers, cookies, form fields, and hidden
fields, to try to bypass the site’s security mechanisms.
显然，XXE只是其中一种表现，并不新鲜。而反序列化漏洞代替缓冲区溢出，揭示着应用系统架构的变迁，Java等开发语言逐渐占据统治地位。消失在前十的2004
A9 Application Denial of Service，把它挪到2017
A11的位置，相信绝大部分读者都没有异议。2017年真正意义上新出现的条目只有一个：A10 Insufficient Logging &
Monitoring，而这正是整个安全业界对于防御和检测的心态发生了根本转变才有的认识。
不知道各位看官有没有像笔者当时一样感到十分惊叹。假设2004年你已经掌握了Web攻击的基础知识并充分实践，恭喜你，十几年后，你即使并没努力学习新技术，即使一直原地踏步，也不会被无情淘汰。这在飞速发展的计算机领域简直太不可思议了。举个例子做对比，同样这十五年间，操作系统等软件的安全性至少上了四五个大台阶，如果你不能持续跟进新技术发展，内网横向移动必然举步维艰。
回顾应用安全领域的标杆产品WAF的发展历程，也可以看到类似现象。开源ModSecurity发布于2002年，虽然易用性和支持性比不过商业产品，但事实上一直代表着此领域的技术发展水平。把时间拨回到2015年，笔者能看到的创新，也只有SQL注入的词法分析，始于2012年开源的libinjection。这个目前WAF厂商还在重点宣传的新功能，ModSecurity在2013年初就已经集成并提供。题外话，libinjection的作者后来作为CTO共同创立了引人注目的Signal
Sciences，成为WAF市场后起之秀。在此之后，ModSecurity于2014年引入模糊哈希方法ssdeep检测webshell，其所用技术CTPH早在2006年面世，实际效果差强人意，难以大张旗鼓宣传。从那时到现在，大家又记得WAF检测技术出现了什么新变化吗？
笔者还观察到一个有趣现象，无论美国亦或国内，如果你跟NGFW或其它产品方向的领先厂商的技术人员交流，总会有一种感觉，他们对WAF根本不重视，言谈中隐隐流露出认为其技术老旧缺乏壁垒、市场规模有限、所以不愿意投入的意思。
但笔者十分重视WAF市场。熟悉的朋友都知道我近几年多次讲到十分后悔2015年纠结了半年时间最终没有坚定投入WAF产品。那时候，我看到了WAF在国内市场的巨大潜力：少有的预算增速和预算份额远超美国市场的安全产品，这是由于当时国内电商和线上业务发展速度已经显露出全面超过美国的迹象。但是我也看到了缺乏技术革新带来的产品同质化严重，同时高估了大厂的产品研发和市场进攻执行力，还有重金砸销售与那时公司运营模式不同的挑战，等等各种貌似正确的理由，最终错失了一次市场爆发机会。每日三省吾身，交过学费的自然要牢记并且避免再犯错。这几年来，笔者一直念念不忘试图寻找进入应用安全领域的切入点。
上文提及，云增量被CSP吃掉。早在2015年，笔者就认为云WAF位列云安全产品收入前三，应是云服务商重点投入方向，参见本公众号文章《安全，是云基础设施的核心竞争力之一》。那年，业界还在争论，云服务商应不应该做安全、能不能做好安全。白驹过隙，四年后市场给出了强有力的答案：今年各路分析师报告，全球前十WAF厂商里有一半是云基础设施服务商。新机会由交付方式改变而引发，并非技术变革，导致WAF市场发展不是创新驱动而是投资驱动，因此头部CSP能拥有巨大竞争优势。
应用安全其它领域的需求亦很强劲，只是难以规模化成长，独立支撑起一个上市公司的难度颇大。例如RASP，2015年RSAC创新沙盒冠军Waratek，现在也转向RASP与WAF结合，走Signal
Sciences的道路；成立十年之久，规模却落后太多。近两年新趋势，厂商同时提供RASP和WAF集成，弥补各自不足之处。Shape
Security当年猛吹动态变形，究其原理也是RASP路数，想做到上市也困难重重，历经转换方向尝试，到现在早已改成RASP+WAF+SDK。Imperva起家其实是靠数据库安全。美国WAF市场启动与国内同步甚至略慢，到现在也已经变成红海，收购整合一直在进行中。另外，今年创新沙盒入围者ShiftLeft，数学方法辅助自动化代码漏洞挖掘，笔者虽然很喜欢其技术，但也知道很多美国投资者并不看好代码审计类产品，因为他们投了近二十年的代码审计初创公司，最好的结果是被收购。应用安全厂商面对窘境，无不积极寻找转折机会。横跨半步，已成为安全行业扩大规模的普遍策略，常见的有，威胁情报厂商销售IDS，漏扫厂商通过DAST产品进入SDL，代表厂商如Rapid7，等等。
洋洋洒洒写了两千多字，显然不是废话去浪费大家时间，而是要为中心思想做铺垫：虽然过去十年美国市场涌现出不少应用安全创业公司，但成功者十分稀少。就在眼下，应用安全领域出现了一个少见的拥有巨大市场空间的创业机会：API安全。新应用风险，新安全战场。或许很多读者已经猜到此答案，因为从去年底开始，笔者已经多次在小型沙龙和大型行业会议中公开介绍过API安全的基础知识。新基础设施必然会带来新安全产品机遇。作为连接一切应用并交付数据和功能的方式，API已成为安全团队不得不重视的关键风险控制点。
## 新形势与新机遇
过去五年，云计算已经深入到数字化经济基础设施的方方面面，市场竞争态势的巨大变革导致诸多厂商盛衰沉浮，不乏跟不上趋势从此一蹶不振的。未来五年，影响深远的技术架构变革会是什么？一千个读者心中有一千个哈姆雷特，不同解读在所难免。但是，微服务、Serverless、边缘计算，应该能覆盖大部分读者心中的答案。听起来区别颇大的三个方向，却都有一点共同特征：API是必不可少的基础模块。
业内容易有个认知误区，微服务常常被认为等同于容器，其实不然：容器只是提供了大规模部署的便捷管理方法，容器离开微服务架构就没有大发展机会，而微服务离开容器仍将继续快速前行。容器的易用性必然会带来额外资源消耗、性能波动、治理复杂度、以及其它相对应的局限，因此如今也有企业在部署微服务时，出现从容器回退到虚拟机甚至物理机的现象。或相反方向，使用更抽象化更易管理的计算方式支持微服务，类似Serverless用于搭建Microservices，