想想用不同的方式到试送
个使用情节的功能性，如
3.测试..
到试运行当错的情况。
目前位置
241
---
## Page 278
自箱测试
以下是来自BeatBox项目中的一个使用情节。你的任务是为黑箱测试或灰箱测试提供三
个思路，并且描述实施这些测试时需要做的事情。
答案
标题，传送片给其经用户
给其绝用户（只需实持JP格式）三个
这置是我们给出的三个测试，如累
不货的测试，温有其系由该希本接要文件
你…你只是对需际测试有更多的思路，
始选项，线运的文得的大小温希障制。
优先额：
20
估计值：
1.测试·.传送的PEG文件给另外一个用户
运行两个BeatBox实例，在第一个实例上，掌告“SenPictane”
银岁图像选择对话弹出时通择Smallmase.ips并单击“OK”
然后检查和殊认莱三.个Beex.器示插收图像对活框..单击.K
...摘救图法。粮囊照胜解正确显示。
这是黑荷测试，还要注参到我
们需量一些EG资源以支持该
项测试。然而，你应该把运业
资源纳入版本控制，供以后使
2.谢试··.佛送一个目法的2PEC立件给易一个用户
用.
运行高个BeaBo实例，在第一个实例，单击
"SendPictate
换解。当图像退择对语相殊出时，退择3limege.iP料单盖
..K...
认第二个BeatBow温有器示蕴收恩洋对活框.外.确认两个宾
例都没有例外情况出码
.......
这些测试更像皮药测试。
你常如BeatBox如例
3.谢试….….在传送图像时，新开通接。
处理这些条件，如果出
高动高个BeatBax实例，在第一个实例上
羊击“SenPicte
晚情误时，例外情况下。
图件金被伟送到哪里。
."OK"..
检素第二个BeetBox实例是置显示搞收图片对活框兵单黄OK
用集正在诚传递（续图件大到几个MB，消样传送就常震一级时
用）新掉第二个BetBex实例检叠第一个BeaBar实例需示的对
活框善诉得送是数并没有例外的情况出现。
242
第7章
---
## Page 279
测试和连续集成
白箱测试利用系统的内部知识
最深层次的测试是白箱测试。这时，你确切地知道代码内部正在
出现什么样的情况，并且你能尽力让代码中断。当代码被分段
时，如果你把要“修补的代码”这一事实放在一边，白箱测试会
自箱测试
很有趣：深入挖掘程序代码和产生引起错误和系统崩遗的原因，
变成一项非常有挑战的事情。
在进行白箱测试时，你应该熟悉你将要测试的代码。你仍然要
注意系统的功能性，但你也应该考虑这样一个事实，例如，变数
X即将被除以你要输入的的一个数值该数值被适当地检查过
吗？采用白箱测试，一般地要寻求：
当延行条件都是预期的部
口
测试代码的所有逻辑分支，采用白箱测试，你应该检查全部代码。你
样的语，大多数的代码
都送行得非常好，这得的
预期象件脱是所说的“快
么类型的数据能让你正在检查的类执行到每一分支。
乐路程”（Happy path）
但如集运行提交不是预明
口
妥善地处理错误。如果你把非法的数据输入到一个方法中，你能得到相
的部样，情况金怎样呢：
应的错误结果吗？你的代码在使用资源之后是否能相应地释放这些资源
吗？像文件句柄（file handle），同步互斥镇（mutexes）或分配的内存。
黑能别试检壹得误信
口
如文档说明的那样运行。假如一个方法申明是线程安全（thread-
与，然两，它事情出
错时，代码所户生物
safe），就以多线程（multiple thrcads）来测试这个方法，假如文档说
息西又通付么呢：部
明告诉你可以传递一个mull参数给一个方法并得到一组特定的值，情况
真是那样吗？如果方法申明需要一定的安全角色（Securityrole）去调
童的东面
用它，在有角色和没有角色的条件下，试一下该方法。
口
适当处理资源受限的状况。如果方法试图占据资源，像内存、磁盘空
间或网络连接。如果它无法得到它需要的资源，代码会微什么？这些
问题能得到合适地处理吗？你能够编写一个测试程序去强制该代码面
对这类的问题状况吗？
白箱测试倾向于代码测试代码
由于所有的白箱测试倾向于更贴近、更有针对性地测试要测试的代码，因此你通常
看到用代码编写的测试程序运行在机器上，而不是由人来微手工测试。现在我们就
编写一些测试程序…
目前位置
243
---
## Page 280
测试功能性
以下是Bob为BeatBox项目的演示程序构建的一段代码（在客户面前失败过的那段程
序）和软件版本重点实现的两个使用情节。在下一页是需要通过的三项测试。你如
何用测试程序来做测试？
标图：
传送一条POKE信息给其
标品，传运一体的片险其线
用户
±“Sm.Poe城u..
用户
一多可听，可视的信都关营的
描述：
得送一练墨片给最他用户（只走持PEG格
这些使用情节翼
在iemo中通行
原必须测试其动
A
你只是显引起的们的注卷：
的性。
优先级：
20
售计值：
优先级：
2
借计值：
public class RenoteReader implements Runnable (
boolean[] checkboxState = nu11;
String nameToShow. = nul1;
object obj = nul1;
public void run() (
try(
while ((obj = in.readobject ())1- nu11)1
System.out .println (*got an object from server");
System.out -print1n (obj .getClass (11)
String nameToShow = (String) obj
checkboxState = (boolean[1) in.readCbject ())
你如何测试这费
覆盖了处理
i.f (nameToShov,equals (PICTURE_START_SEQUENCE)) (
代莓以确保容们
POKE_START_
receIveJPEG () :
继运行，即使有
SEQUENCE命今
其他的问延户生！
的程序号：
else{
otherSeqsMap-put (nameToShow,
1istVector add (nameToShow) ;
checkboxState) 1
incomingList .setListData (1istVector) :
// now reset the sequence to be this
1// close while
}catch (Exception ex)(
ex-printStackTrace ():
1// close run
244
第7章
---
## Page 281
测试和连续集成
这是例代础（Psesocode)
如果你需
某种资源，级定你一定细得到它。运置是
你常要的在代码级的基本少称。
1.谢试·**傅区PCTURE_START_SEQUENCE，测试洋传送功能
建立网络追传送PJCTURE_START_SEQUENCE
伟送空的取方快陈列（没有声音）传送图件
运里是你常
数搏检证照片敷摄统操收热正殊演示
要做的测试。
无帮你完成这个，以
便给你一些用于指述
测试的务代码的想法。
2.试POKE_START_SEQUENCE
建立网络通接
运项测试署做什么：选应值
通的代码，你打算写什么样
的代础以实施这项测试。
3.测试·.….需给所有客户端伟送标准的文本信息
建立网络连指
目前位置
245
---
## Page 282
建立测试
以下是Bob为BeatBox项目的演示程序构建的一段代码（在客户面前失败过的那段程
每习
序）和软件版本重点实现的两个使用情节。你的任务是对至少三种情形做白箱测试。
答案
测试
伟送PCTURE_START_SEQUENCE.测试图片传送功能
由于这是具中的一个使用情节
国此，暑测试基本的图片功能性。
建立网络通接伟送
但要深入到所色含的代码。
PCTURE_START_SEQUENCE伟送空的税取方
耕融列（湿有声音）传送图片监搭舱证图片
数据施提收并正确地演示
这比使仅用GU更深入：你实际上
在用持定的输入测试持定的方法，
以便确认结果是所期望的。
别试
伟POKE_START_SEQUENCE
建立网络速接伟送POKE_START_
你可能看通过观察一个正在这
SEQUENCE传送空的核取方块降列（温
行的聊天害户端，验证它在进
行—一没有美系，可使用任例
有声音）验证听到警示声音和警示信
做正确测试的东面。
乌得别.显.&.
送一项基于其他的使用情节
用测试表POKE_START_SEOUENCE，在物客
做演示剪，你可以卷待是需失啦，避免惊悦。
潮试
要给所有客户端传送标准的支本信息
建立网络通接传送信息“测试信息”传送有
效的核服方缺降列（有声音）验证所有的客户
端都收到测试信息料县核服方快属到更新币
别选了测似原本应该致够进行的
.急传送过来的障列值规咖合
东西，它身测试新功能一样坐要。
你可能想得到更多的一些测试一
一像是测试点击信息时能否正确地得到核取方块的阵列，以及测试失
败的条件。如果太多核取方块值以阵列的方式传送，会发生什么事情？或是太少呢？看看你能有多少
方式让BeatBox项目失败。
246
第7章
---
## Page 283
测试和连续集成
但是，没有别试方聚（Testing framt
works）能常我们定成这些事情响？为
什飞我们要自己写这些代码？
编写测试程序是你的任务
有很多好的测试方案，但它们只是执行你的测试任务：它们不是为你
编写的测试程序（注1），测试方案实际上只是一组工具，这些工具
能帮助表达你的测试。即使这些工具真的非常有用，但还有很多事情
你需要记住：
首先，你需要弄清楚你必须测试什么，弄清楚测试什么和你如何表达
你的测试常常是两件不同的事情。不管你的测试方案如何，你需要考
虑功能性测试、性能测试、边界情况（Boundary or edge cases）、竞
争（race）条件、安全风险、合法数据、非法数据等。
其次，对测试方案的选择几乎肯定会影响你的测试方式。那未必是一
件坏的事情，但不要忘记它。这可能表示你需要用多种方式去测试你
的软件系统。例如，如果你决定对你的桌面应用程序采用代码级的测
试方案，而无法顾及GUI中的错误，因此，你也可能希望能用其他的
方式测试它。另一个很好的例子是：你编写3-D游戏软件，测试后端
（backend）的代码不是很难，但确保游戏能正确地展示图形，游戏中
的人物在你的游戏世界中不能穿墙或失败还是有难度的。那可是一团
混乱，没有任何测试方案可以为你生成这些测试。
实际上，有些测试方象能为你生成测试，但他们有非常持殊的
①标。有美应用系统安金的到试方亲是常见的例于、到试方案
能为你的收件给出一维常见的安金错慎，在看会道生什么，但
这不能替代真正的应用款件测试，以确保系统能描照你承望的
那样工作（用时用户手望系统能运样）
图绕测试方家做测试
我们正在讨论测试方案，但测试方案真正意味着什么？显而易见的测试方式是让
某个人使用你的应用软件，但是，如果我们能让测试工作自动化，让电脑帮助我
们做测试，我们能更有效并且知道我们的测试每次都能以相同的方式运行，那是
重要的，因为持续一致的测试不是人类最擅长的。
目前位置
247
---
## Page 284
一健测试
一个步骤测试每件事情
F实际上就是一个指今
使你的测试工作自动化有很多优点。它不需要你坐在哪儿并且是手工的
方式测试你的软件，你也可以构建你的测试库（Library oftests），你
每次运行测试套件（Test suite）时，测试库能在同一时间完整地测试你
的软件。
构建测试套件。
当你的软件系统变大时，需要进行的应用测试工作也增多了。首先，这可
能会有一点吓人，特别是如果你通过手工方式进行软件的测试时。实际
上讲，大型软件系统能有上千种测试，这些测试工作要花费开发人员几天
的时间去执行。如果你把测试工作自动化，你可以把针对你的软件的所
有测试都集中起来放在一个库，然后按照你的意愿执行这些测试，而不
需要依赖某个人，可能一个发现了你的错误的、可怜的测试工程师，手工
执行这些测试需要一天或更多的时间。
?
用一个命令执行所有的测试。
在测试方案中，一且你有一个测试套件能自动地进行测试，下一步是去构
建一组测试，这样你可以用一个命令执行所有的测试。测试套件运行越容
易，测试套件使用的次数就越多，就意味着你软件的质量将提高。任何新
的测试可以简单地增加到测试套件，于是，每个人从你编写的测试软件中
获益。
3
免费获得国归测试（Regression testing）。
创建单一命令测试套件的最大优势是你能免费地做回归测试，单一命令测
试套件能连续地添加测试，就如同你为软件增加代码一样。检测你的软件
系统是否因为增加了新的修改而实际上对已有的软件引入了错误时，这项
工作被称为软件回归（SoftwareRegression），为软件增加新的修改，对
使用旧的或继承的代码的开发人员来讲，都隐含一定的危险性，处理这类
回归问题所带来的威胁的最好的方式是：不要仅仅测试你新增加的代码，
也要执行所有的测试。
现在，因为你将要在你的测试套件中增加新的测试，你会免费地得到这件
事情。你必须做的所有事情是增加你的测试到已有的测试套件，然后用一
个命令使测试工作开始，你将通过回归测试完成你对代码修改后的测试。
当然，这取决子已有的代础己
经具有有效的测试套件
加以护充。叠看第（0参，看香
当不是这种情况的是般什么，
248
第7章
---
## Page 285
测试和连续集成
嗯吧，每次都刹试每停幕情不是要花很长时间吗？有
没有变选的方法，以便开发人员在需要时能做回归副试，
得险可手动，选择要测试什么。
调整你的测试套件，因时制宜
一个不幸的事实是庞大的单元测试套件是比较笨拙的，并且，因此面
变得不好用，有一项技术可以把快速测试和缓慢测试分开来，以便开
发人员在修改和增加代码时能经常性地执行所有的快速测试，但当他
们认为需要时，才执行完整的测试套件。
什么样的测试会被分类到快速测试或缓慢测试，实际上取决于特定项
目的需要，并且因开发工作的不同，可以变更两个类中的测试。举例
来讲，如果你没有极少修改的代码，并且需要很长时间去微测试，那
么，它就是慢速测试套件的良好的候选。然面，如果你正在其上面工
作的代码会对极少修改的代码有影响的话，在你做修改时，你可能考
虑把测试移到快速测试套件中。
让我们试试广受欢迎而且免费的Java测试方案，该免费的测试方案被
称为Unit.
没有愚囊的问题
通缓懂测试、果8章
下载孔Unir 测试方象，冰间
有更多地说哦
http :/ / ww.juxit ong
完整测试套件？
答：