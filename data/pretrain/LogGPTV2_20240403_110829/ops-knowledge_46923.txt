### 安全影响：使用公共密码的免费Wi-Fi

我们希望提供一个公共且免费的Wi-Fi网络。那么，相比完全不设置密码，使用一个所有人都知道的密码是否能为使用该网络的人提供额外的安全优势？换句话说，黑客在没有密码的Wi-Fi网络上能否比在一个他知道密码的网络上造成更大的破坏？

经过与@epeleg的讨论，我认为我可以给出一个更全面且清晰的答案。

### 概要
使用预共享密钥（PSK）对Wi-Fi网络进行加密所提供的保护程度直接取决于PSK的复杂性和对其的保护措施。在任何环境中，这都需要在安全性和可用性之间找到一个平衡点。

- **最低安全性/最高可用性**：无加密。
- **最高安全性/最低可用性**：WPA2-AES、高复杂度PSK、MAC地址过滤、无线入侵检测/预防系统。要求用户和设备注册以获取PSK并添加到MAC过滤器中。

如果你打算向社区提供免费Wi-Fi服务，平衡点可能介于这两者之间，并且可能更倾向于前者。然而，即使后者也是一个可行的选择，只要你愿意投入必要的努力。

无论如何，通过任何手段保护“免费Wi-Fi”网络并不会完全防止攻击，但会使攻击变得更加困难。

### 加密的重要性
无论何时，加密Wi-Fi连接中的网络流量都比明文传输更安全。虽然不是不可能，但对于外部人员来说，将WPA2加密的流量解码成明文是非常困难且耗时的。然而，大多数家庭办公（SOHO）和“免费Wi-Fi”网络必须依赖密码或预共享密钥（PSK）来保护加密机制。

实施密码提供的保护程度始终与密码的复杂性和保护该密码的努力成正比。无线网络也不例外。

### 配置场景及优缺点
以下是几种可能的配置场景及其优缺点：

#### 场景1：未受保护的网络
- **优点**：最易于使用，几乎不需要管理开销。
- **缺点**：这是最脆弱的网络。所有未使用其他加密协议（如HTTPS）的流量都会以明文形式发送。这种网络很容易被嗅探、欺骗和其他方式操纵，即使是对经验不足的攻击者也是如此。

#### 场景2：使用强PSK保护的网络，公开发布SSID和PSK
- **优点**：无线网络上的数据是加密的，没有PSK无法读取数据或连接到无线网络。对于最终用户来说，这种网络也相对容易加入，且几乎不需要管理开销。
- **缺点**：公开发布PSK使得任何人只要在范围内就可以轻松获取并连接到网络。攻击者不太可能被这种方法所阻止。

#### 场景3：使用强PSK保护的网络，公开联系方式供用户获取密码
- **优点**：无线网络上的数据是加密的，没有PSK无法读取数据或连接到无线网络。通过这种方式，你可以与每个用户建立某种程度的个人联系，这有助于减少他们在网络上的匿名感，可能会阻止一些寻求更容易目标的潜在攻击者。
- **缺点**：需要有人在合理的时间内（广告中注明时间范围）通过电话或电子邮件提供登录凭证。用户也可能通过口口相传来绕过此措施。

#### 场景4：使用强PSK保护的网络，实施用户和设备注册过程
- **优点**：无线网络上的数据是加密的，没有PSK无法读取数据。只有同时拥有PSK和已注册的MAC地址才能连接到无线网络。通过这种方式，你可以监控网络使用情况并识别不当使用行为。你还可以制定可接受使用政策，告知用户不当使用行为不会被容忍，并可能减轻你的法律责任。潜在攻击者可能会选择更容易的目标，尤其是当他们看到AUP中提到的监控条款时。用户也不容易通过传递PSK来绕过设备注册。必要时，你可以通过取消注册MAC地址或更改PSK来撤销用户的访问权限。
- **缺点**：这是所有场景中管理开销最大的一种。需要有人在合理的时间内完成整个用户注册过程，包括收集个人信息、设备信息（帮助不知道如何操作的用户）、归档文件以及在网络中注册新设备。为了有效，还需要定期检查日志以发现可疑活动，或者部署某种形式的IDS/IPS。获得PSK的攻击者可以轻松伪造已注册设备的MAC地址，从而绕过设备过滤或冒充该设备的用户。

### 一般注意事项
- 提供无条件的免费Wi-Fi总是有可能让恶意用户进入你的网络，无论你采用何种注册或PSK分发流程。
- 对于所有现有的PSK保护的Wi-Fi系统（WEP、WPA、WPA2），都有已知的攻击向量，允许经过身份验证的用户像在明文中一样嗅探其他用户的数据流（前提是这些数据流未使用其他加密手段如HTTPS）。
- 确保所有网络设备的管理接口都受到强密码保护，且这些密码既不是默认密码，也不与你分发的任何PSK相似。
- 根据当地法律，你可能对你Wi-Fi网络上的用户行为负有法律责任。
- 你的ISP合同可能不允许随意共享你的互联网连接。

### 最后的问题
- 黑客在一个没有密码的Wi-Fi网络上能否比在一个他知道密码的网络上造成更大的破坏？

对于无条件免费的Wi-Fi网络，问题的关键不在于攻击者能造成多大的破坏，而在于他们能够多么容易地进行攻击。希望上述内容已经清楚地解答了这个问题。

*注：我不是律师，以上内容不构成法律建议。*