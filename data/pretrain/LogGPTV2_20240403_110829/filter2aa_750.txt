# 宝宝树安全总监：王利

## 个人简介
- **姓名**：王利
- **职位**：宝宝树安全总监
- **工作经验**：曾在宝宝树、爱奇艺等多家互联网公司担任重要职务，积累了丰富的甲乙双方工作经验。
- **兴趣爱好**：产品经理、白帽子、羊毛党

## 公司介绍
- **名称**：宝宝树
- **规模**：中国最大的孕婴社区平台之一，拥有约1000名员工。
- **内容生产**：每天产生数百万级别的文字、图片、音频和视频内容。
- **用户群体**：主要服务于全国范围内的年轻一代准妈妈及婴儿母亲。

## 讨论主题
1. **安全体系构建**（涵盖社区与电商）
2. **风控边控联动**（包括反爬虫、反扫描及防火墙自动化）
3. **风控系统设计**（涉及引擎、指纹识别与数据分析）
4. **开源工具应用**（如扫描平台与HIDS）
5. **数据安全保障**（加密、脱敏及DLP实施）

### 宝宝树社区&电商平台常见攻击类型
- 中等规模的社区电商平台面临的安全挑战及其应对策略。
- 在预算有限且需要跨多个IDC部署的情况下，如何构建有效的安全防护机制。

#### 日志平台与防火墙联动实现自动化拦截
- **前提条件**：使用日志管理平台（如ELK或Splunk）以及具备API接口支持的WAF。
- **业务价值**：增强对扫描器、爬虫及其他自动化渗透工具的防御能力；提高防火墙运维效率；加强访问控制服务管理。
- **具体步骤**：
  1. 收集Nginx访问日志及WAF防火墙日志。
  2. 配置拦截规则并通过API将这些规则写入WAF。
  3. 根据设定的策略执行IP地址、会话标识符乃至特定特征值的拦截操作。
  4. 当APP接收到HTTP状态码时，能够根据返回代码自定义错误页面显示，从而减少误报引发的用户投诉。

#### 实施过程中遇到的问题及解决方案
- 高频次爬虫导致额外网络费用增加——通过优化WAF返回页面大小来降低成本。
- IP封锁可能误伤正常用户——采用更精准的方法如基于会话或设备特征进行过滤。
- WAF存储空间不足影响查询性能——定期清理旧日志并及时归档至外部存储。
- 单纯依靠IP封禁无法有效抵御来自不同代理池的攻击——引入设备指纹技术和浏览器指纹技术作为补充手段。
- 针对撞库攻击需加强客户端验证措施——例如在APP中加入设备指纹SDK，并结合JavaScript指纹技术提升防护水平。

### 简易风控系统的搭建
- 利用现有资源快速搭建一个简易但实用的风险控制系统，包括但不限于利用Redis缓存加速数据访问速度、通过API接口提供实时风险评估服务等功能模块。

### 设备指纹技术的应用
- 详细介绍如何集成设备指纹SDK到移动应用当中，并说明其对于人机区分、设备识别等方面的重要性。同时强调不要过度依赖单一验证方式（比如图形验证码），而是应该综合运用多种技术手段共同构建坚固的安全防线。

### 开源工具推荐
- 推荐了一些优秀的开源项目用于辅助企业内部的安全建设工作，比如OWASP提供的漏洞管理工具DefectDojo、主动/被动式安全扫描框架等。

### 数据保护实践
- 强调了数据加密、敏感信息脱敏处理以及部署数据泄露预防系统(DLP)对企业信息安全的重要性，并给出了具体的实施方案建议。

### 致谢
- 感谢所有参与和支持过项目的同事朋友们。
- 分享者希望通过分享自己的经验和教训，能够帮助更多同行更好地理解和应对日益复杂多变的信息安全环境。