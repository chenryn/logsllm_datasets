title:Availability, usage, and deployment characteristics of the domain
name system
author:Jeffrey Pang and
James Hendricks and
Aditya Akella and
Roberto De Prisco and
Bruce M. Maggs and
Srinivasan Seshan
Availability, Usage, and Deployment Characteristics of the
Domain Name System(cid:3)
Jeffrey Pang
Carnegie Mellon University
PI:EMAIL
James Hendricks
Carnegie Mellon University
PI:EMAIL
Aditya Akella
Carnegie Mellon University
PI:EMAIL
Roberto De Priscoy
University of Salerno
PI:EMAIL
Bruce Maggsy
Carnegie Mellon University
Srinivasan Seshan
Carnegie Mellon University
PI:EMAIL
PI:EMAIL
ABSTRACT
The Domain Name System (DNS) is a critical part of the Internet’s
infrastructure, and is one of the few examples of a robust, highly-
scalable, and operational distributed system. Although a few stud-
ies have been devoted to characterizing its properties, such as its
workload and the stability of the top-level servers, many key com-
ponents of DNS have not yet been examined. Based on large-scale
measurements taken from servers in a large content distribution net-
work, we present a detailed study of key characteristics of the DNS
infrastructure, such as load distribution, availability, and deploy-
ment patterns of DNS servers. Our analysis includes both local
DNS servers and servers in the authoritative hierarchy. We ﬁnd
that (1) the vast majority of users use a small fraction of deployed
name servers, (2) the availability of most name servers is high, and
(3) there exists a larger degree of diversity in local DNS server de-
ployment and usage than for authoritative servers. Furthermore,
we use our DNS measurements to draw conclusions about feder-
ated infrastructures in general. We evaluate and discuss the impact
of federated deployment models on future systems, such as Dis-
tributed Hash Tables.
Categories and Subject Descriptors
C.2 [Computer Systems Organization]: Computer-Communication
Networks; C.2.4 [Computer-Communication Networks]: Dis-
tributed Systems
(cid:3)This work was supported by funding from IBM, the US ARO (via
the C3S center – grant number DAAD19-02-1-0389), and the NSF
(via ITR Awards ANI – grant number 033153, and CCR – grant
number 0205523).
yRoberto De Prisco and Bruce Maggs are also afﬁliated with Aka-
mai Technologies.
Permission to make digital or hard copies of all or part of this work for
personal or classroom use is granted without fee provided that copies are
not made or distributed for proﬁt or commercial advantage and that copies
bear this notice and the full citation on the ﬁrst page. To copy otherwise, to
republish, to post on servers or to redistribute to lists, requires prior speciﬁc
permission and/or a fee.
IMC’04, October 25–27, 2004, Taormina, Sicily, Italy.
Copyright 2004 ACM 1-58113-821-0/04/0010 ...$5.00.
General Terms
Measurement, Reliability
Keywords
DNS, federated, availability
1.
INTRODUCTION
The Domain Name System (DNS) is an important part of the
Internet’s infrastructure and has grown to be one of the largest dis-
tributed systems in existence. DNS is also fairly complex, consist-
ing of many different components ranging from the root and top-
level nameservers to authoritative servers, local name servers, and
client resolvers. Despite its complexity and importance to the func-
tionality of nearly all network applications today, in-depth stud-
ies of its characteristics have only been carried out in the past few
years. However, no attempt has yet been made to characterize the
properties of the DNS infrastructure itself: How available is it?
How are servers deployed? And which servers are used the most?
In this paper we present a large scale measurement study of the
DNS infrastructure currently deployed in the Internet, focusing on
characteristics that are indicative of how DNS servers are deployed
and managed. In particular, we analyze availability and load char-
acteristics of DNS servers, as well as deployment styles within dif-
ferent organizations.
Understanding these properties is important not only for the
study of DNS, but also for the study of federated infrastructures
in general — that is, the study of infrastructures that are man-
aged independently by multiple organizations. For example, the
DNS infrastructure gives us insight into how well infrastructure
deployed primarily by publishers (authoritative name servers) is
managed, versus infrastructure deployed by organizations primar-
ily for the beneﬁt of their users (local nameservers). Several recent
studies [18, 28, 35] propose wide-area infrastructures to provide
scalable, automated, and fault-tolerant lookup services, and some
advocate or suggest deployment in a federated manner. Like DNS,
future global-scale Internet infrastructures may be managed by a
multitude of large and small organizations, rather than by a single
entity. Hence, it is important to understand the characteristics of
current federated deployment styles.
Our results indicate that a large fraction of all end-users use a
small number of local DNS servers. We ﬁnd that the majority of
local and authoritative DNS servers are highly available, without a
Figure 1 shows an example of the interaction between the var-
ious components [25] in DNS during a name lookup. A lookup
is made by a client resolver, a software library implementing the
DNS protocol on an end-user machine. These requests are for-
warded to a local DNS (LDNS) server, which is usually deployed
by the client’s organization (for example, its university department
or ISP). LDNS servers are important to DNS scalability because
they cache DNS records. LDNS servers iteratively query the au-
thoritative DNS servers (described next) to satisfy lookup requests
on behalf of their clients. First the root servers are queried, then the
gTLD servers, and then one or more additional authoritative DNS
servers (though caching of DNS records usually makes the ﬁrst few
queries unnecessary).
The DNS database itself is distributed across the hierarchy of
authoritative DNS (ADNS) servers. At the top of this hierarchy are
the root and top-level domain nameservers. These servers do not
generally maintain name-to-address records for Internet hosts (A
records), but instead maintain records for locating ADNS servers
at lower levels of the hierarchy (NS records), which contain the
actual name-to-address records. ADNS servers at lower levels are
deployed by a litany of organizations and store name-to-address
records for resources associated with a particular organization (e.g.,
a university or company’s web site).
Hence, LDNS and ADNS servers are two examples of feder-
ated service deployments. However, the motivations for maintain-
ing each class of DNS server differ. LDNS servers are typically
deployed within an organization to serve its own user population,
while ADNS servers are typically deployed by publishers (or by
enterprises that service publishers) in order to advertise a service
or location to potential clients. One question we seek to answer is
whether these different motivations and constraints on server de-
ployment are correlated with observable characteristics, such as
availability.
Answering this and related questions about availability, usage,
and deployment characteristics may be important for future fed-
erated services, since such services could have deployment and
management models similar to DNS. Indeed, several recent pro-
posals [9, 28] have suggested moving DNS itself to a more de-
centralized lookup architecture due to the administrative problems
and vulnerabilities associated with the existing hierarchical model.
Other Internet naming layers have also been proposed [4, 35] to
supplement or replace it.
2.2 Infrastructure Characteristics
We seek to understand three particular attributes about DNS in-
frastructure, listed below:
1. Load Distribution: The amount of load on each nameserver,
which we deﬁne as the number of queries that it receives, is
indicative of the number of users that access it.
2. Availability: The availability of a server determines how of-
ten it will be able to service requests. We deﬁne availability
as the fraction of time during which the server machine is
online when its local network can be reached. Both these
conditions are usually necessary in order for the service to
be available; nameservers and other services often require
connectivity to regions of the network other than their own.
3. Deployment Styles: A ﬁnal area of interest in this study is the
style in which individual organizations deploy sets of name-
servers. For example, we are interested in whether an organi-
zation partitions its users equally among several local name
servers, or if there is more diversity in the load among differ-
ent nameservers within the same organization. These styles
Figure 1: DNS Infrastructure Components: DNS infrastruc-
ture is comprises 3 types of components: client resolvers, local
DNS (LDNS) servers, and authoritative DNS (ADNS) servers,
of which the Root and Top Level Domain (gTLD) servers are
special cases. To perform a lookup, client resolvers make
a request to their conﬁgured LDNS server, which iteratively
queries the ADNS servers required to resolve the requested
name-to-address mapping.
single observed failure. The remainder have consistent availability
periods lasting days, weeks, or longer, and recovery rarely requires
more than a few hours. However there exists a fraction with only
“one 9” (or less) of availability. In addition, we ﬁnd that there is a
slight positive correlation between usage and availability for both
local and authoritative servers. Authoritative servers tend to have
higher availability than local servers, especially if they have high
usage, though the difference is not substantial. We also observe
that there is a larger degree of diversity in local DNS server deploy-
ment and usage, with many behind dynamic IP addresses and some
with diurnal availability patterns. Finally, we observe that local
DNS server deployments within organizations range from a very
few highly used servers to a very large number of lightly loaded
ones, suggesting different levels of partitioning of administrative
domains within different organizations.
The remainder of this paper is organized as follows: Section 2
provides a brief overview of the different types of DNS servers
and the infrastructure deployment styles that they exemplify. Sec-
tion 3 describes our data collection methodology, our measure-
ment testbed, and the data sets used in our analysis. Section 4
describes our measurement results and analyzes the load charac-
teristics, availability, and deployment styles of DNS servers. To
demonstrate the utility of our measurements, Section 5 presents
an evaluation of a Distributed Hash Table (DHT) having DNS-
like availability characteristics. Section 6 lists previous and related
work. Section 7 concludes.
2. BACKGROUND
In this section we provide an overview of the different compo-
nents that make up the DNS infrastructure and explain how their
characteristics may be representative of other federated infrastruc-
ture deployments.
In addition, we deﬁne the characteristics we
measure and explain their signiﬁcance.
2.1 DNS Infrastructure
The Domain Name System is a distributed database responsi-
ble for translating names to addresses of network locations, and its
functionality is a critical component to almost all network appli-
cations including web browsing and email. Despite its simplicity
of purpose, the implementation of DNS comprises many different
components.
indicate the degree of locality that might exist in federated
deployments and the number of servers that may be located
within each administrative domain.
Data Set
DNS Server Sample Sets
ldns-all
3.1.1
Sec.
Description
We next describe how we infer these characteristics from cur-
rently deployed DNS servers. We then explain the salient obser-
vations we made about these characteristics for DNS. Finally, we
evaluate and discuss how our observations can be used in the de-
velopment of future distributed systems.
3. MEASUREMENT SETUP
To infer the characteristics of interest, we collected and corre-
lated several data sets concerning DNS servers. To infer relative
load characteristics about DNS servers, we examined DNS access
logs from Akamai, a large content distribution network (CDN), and
correlated HTTP request logs from a set of Web caches over a pe-
riod of a week. To infer availability, we performed active probes to
a large number of servers over a two week period. Finally, to study
deployment patterns, we examined the relative load characteristics
of servers located within the same organization.
The remainder of this section describes how we obtained our
DNS server sample sets and relative load estimates, the methodol-
ogy behind our active measurement study of availability, and sev-
eral steps we used to ﬁlter and reduce the data we collected to elim-
inate outliers and observed anomalies.
Figure 2 summarizes the data sets we used in our measurement
results and analysis.
3.1 Sample Sets and Load Estimation
Here we describe our collection of logs to obtain samples of
LDNS and ADNS servers and estimations of their relative loads.
3.1.1 LDNS Servers
The sample of LDNS servers we use in our relative load estima-
tions and active probing measurements were obtained through the
collection of DNS logs from Akamai’s “low-level” servers, which
should be close to the LDNS servers that access them. For each
DNS record requested, the logs contain the time of access, the IP
of the requester, and the name and type of the DNS record accessed.
Akamai operates the authoritative DNS for parts of a large num-
ber of popular websites (in particular, the parts of websites for
which Akamai also hosts the contents, such as images), and we
expect that the volume of requests a single LDNS server makes
to this Akamai service is a good relative estimator of the actual
load or client population behind it. For example, in a set of HTTP
logs collected from a number of Web caches (described in Sec-
tion 3.1.2), we observed that 14% of all HTTP requests made went
to this Akamai service, and this Akamai service served the DNS for
26 of the top 100 most popular web site domains. Moreover, the
DNS records returned by Akamai to LDNS servers have a TTL of
only 20 seconds, so it is more likely that we will see a DNS request
for each HTTP request than if examining ADNS logs with longer
TTL records (though TTLs are not always respected).
Due to constraints in our log collection infrastructures, we could
only collect DNS logs for approximately one eighth of the 8,500
active servers in Akamai. We ensured that we collected logs from
all the servers in a particular region (e.g., ISP X in Chicago, IL) so
that we would observe all the requests coming from LDNS servers
in that region (Akamai’s top-level DNS servers try to direct LDNS
servers to the low-level server that yields the best performance,
which is typically also close geographically). This portion of Aka-
mai included regions from 49 different countries; 60% of the re-
gions were in the U.S, and many were in Europe and Southeast
ldns-probed
3.1.1
ldns-nondynamic
3.3.2
adns-all
3.1.2
adns-probed
3.1.2
adns-web
3.1.2
DNS Server Measurements
ldns-load
3.1.1
adns-load
3.1.2
ldns-avail
3.2
adns-avail
3.2
All the LDNS servers that accessed the por-
tion of Akamai for which we collected logs
during the period from March 17 to March
24, 2004. (823,694 distinct IPs)
A set of LDNS servers that were used when
gathering the ldns-avail measurements.
These servers were obtained by randomly
sampling LDNS arrivals to Akamai servers
during the period from March 17 to March
24, 2004. (273,541 distinct IPs)
A conservatively chosen subset of ldns-
probed, which we determined were un-
likely to be using dynamic IP addresses, and
we use for the majority of our availability
analysis. (164,040 distinct IPs)
the ADNS servers that we observed
All
during a “reverse-crawl” of
the .in-
addr.arpa authoritative hierarchy during
December 2003. (87,111 distinct IPs)
The subset of adns-all that mapped to a
valid IP address and were still responsive to
DNS requests in the middle of April 2004.
(68,155 distinct IPs)
All the ADNS servers that were authorita-
tive for at least one website (ignoring those
that were served by Akamai) in logs collected
from several Web caches collected from May
3, 2004 to May 9, 2004. (85,719 distinct IPs)
Relative load on ldns-all, estimated
based on the number of requests each made
to Akamai during the 1-week period from
March 17 to March 24, 2004.
Relative load on adns-web, estimated
based on the number of requests made to
websites they are authoritative for, as seen
from several Web caches during a 1-week pe-
riod from May 3, 2004 to May 9, 2004.
A set of exponentially (mean 1 hour) spaced
DNS and/or ICMP ping probes to each server
in ldns-probed made during a three week
period (two weeks of probes for each LDNS
site) from March 18 to April 11, 2004. Sec-
tion 3.3 describes steps taken to ﬁlter
this
data.
A set of exponentially (mean 1 hour) spaced
DNS and/or ICMP ping probes to each server
in adns-probed made during a two week
period from April 15 to May 1, 2004. Sec-
tion 3.3 describes steps taken to ﬁlter
this
data.
Figure 2: Measurement Data Set Summary: This table
presents a summary of the sample sets of DNS servers we used
for each of our measurement experiments (top) and the mea-
surement data sets we collected (bottom).
Asia, in addition to other regions. Hence, our sample included
LDNS servers deployed around the entire world. Moreover, the
relative load distribution of LDNS servers observed in this sample
set is nearly identical to the relative load distribution across LDNS
servers seen by a larger (60%) fraction of Akamai servers during a
shorter time interval, so we believe that any bias introduced by only
having observed this subset of regions is unlikely to be signiﬁcant.
We collected two sample sets over a one-week period from March
17 to March 24, 2004:
ldns-all: This data set includes all 823,694 distinct LDNS IPs
seen in the logs collected from the subset of Akamai servers. We
deﬁne the relative load on these LDNS servers as number of valid
A-requests they made to Akamai during the week, calling this data
set ldns-load. We only examined A-requests because those are
the only records that properly behaving LDNS servers access from
Akamai’s low-level servers (higher level DNS servers in Akamai
serve NS records). Erroneous A-requests constituted less than 1%
of the DNS logs .
ldns-probed: This data set includes all the LDNS IPs we in-
cluded in our active probing experiment, described in Section 3.2.
To collect this sample, we continually downloaded the most recent
2 minutes of a log on a random server in Akamai (not restricted
to the regions for which we collected full logs). We then immedi-
ately (within 3 minutes of the LDNS having made the DNS request
to Akamai) probed the server with a DNS request for A.ROOT-
SERVERS.NET and an ICMP ping (retrying each request 3 times
over 30 seconds). We did this to ensure that we only tracked LDNS