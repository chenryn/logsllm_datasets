《企业级 AIOps 实施建议白皮书》V1.0 
场景：智能客服 
| 业务价值 | 阶段 | 详细描述 |
|---|---|---|
| 实 现 基 于 FAQ 库，知 识 图 谱 的 智 能 聊 天 机 器 人 ， 达 到 减 缓 人 工 客 服 的 人 力 成 本 ， 提 升 运 维 团 队 的 效 率。 |建立阶段 |1. 可以选择几个关键的业务场景，例如发布，变更，异常查询等。收集必要 的常见问题库和知识库，最终目标是实现基于机器学习的智能客服，代替传统 客服的大多数工作，提升整个部门和公司的运维效率。 2. 选择应用场景的关键在于该场景是否处于长期运行的状态，所形成的知识 库和 FAQ 库是否处于一直积累的状态，是否有一定的专家经验，数据采集和 汇总的能力是否具备。 || 实 现 基 于 FAQ 库，知 识 图 谱 的 智 能 聊 天 机 器 人 ， 达 到 减 缓 人 工 客 服 的 人 力 成 本 ， 提 升 运 维 团 队 的 效 率。 |响应阶段 |1. 针对建立阶段所收集的数据，构建必要的常见问题库和知识库，通过知识 库形成必要的知识图谱。 2. 通过知识库和知识图谱，可以收集常见的问题类型，进行必要的问题分 类，进行词语库和问题库的可视化操作，为了建立精准的机器学习模型而做准 备。 |
| 实 现 基 于 FAQ 库，知 识 图 谱 的 智 能 聊 天 机 器 人 ， 达 到 减 缓 人 工 客 服 的 人 力 成 本 ， 提 升 运 维 团 队 的 效 率。 |积极阶段 |1. 基于之前在建立阶段和响应阶段所做的准备，根据必要的用户标注数据，了解文本本身的内在信息。在文本处理上面，可以使用开源的切词工具，TF-IDF，Word2Vec 等技巧，把词语进行向量化，把文本的问题转化成机器学习的 问题。 2. 结合数据本身的性质，使用不同的机器学习模型。例如 LSTM，Seq2Seq 等 深度学习模型，以实现智能客服的功能，达到把专家规则机器学习化的作用。 || 实 现 基 于 FAQ 库，知 识 图 谱 的 智 能 聊 天 机 器 人 ， 达 到 减 缓 人 工 客 服 的 人 力 成 本 ， 提 升 运 维 团 队 的 效 率。 |扩展阶段 |1. 在少量业务场景成功运转之后，通过迁移学习和强化学习等方案，把之前 的成功业务案例推广到其余业务上，在多个业务上都实现智能问答。 2. 在实现了智能问答技术之后，在多个业务上使用了之后，达到效率和成本 的最优化。 |
第 40 页共 74 页
《企业级 AIOps 实施建议白皮书》V1.0 
场景：舆情分析 
| 业务价值 | 阶段 | 详细描述 |
|---|---|---|
| 基 于 用 户 反 馈 和 投 诉 等 数 据 ， 智 能 地 监 控 业 务 是 否 处 于 稳 定 和 高 效 的 状态。 |建立阶段 |1. 明确业务的场景，开启用户投诉或者反馈的必要渠道，包括从外网获取数 据，从内部获取用户反馈数据等。 2. 选择场景的关键在与需要选择一些有用户量的数据，能否基于一定量数据 的基础上实现智能识别用户的意图，并且消除人工规则监控的模式。 || 基 于 用 户 反 馈 和 投 诉 等 数 据 ， 智 能 地 监 控 业 务 是 否 处 于 稳 定 和 高 效 的 状态。 |响应阶段 |1. 选择恰当的业务场景之后，分析该场景的文本，图片，语音数据，对不同 的数据实现不同的可视化展示方式。 2. 明确了业务场景之后，根据实际的情况进行数据分析和必要的信息提取。 |
| 基 于 用 户 反 馈 和 投 诉 等 数 据 ， 智 能 地 监 控 业 务 是 否 处 于 稳 定 和 高 效 的 状态。 |积极阶段 |1. 实现文本，图片，语音等数据的内容理解功能，通过神经网络等技术，实 现文本，图片，语音等数据的向量化。例如 Word2Vec，Doc2Vec 等技术方 案。 2. 结合业务的具体场景和必要的标注数据，实现情感分类，内容理解，关键 词提取，意图识别等功能。通过机器学习的技术来实现舆情的智能分析。 || 基 于 用 户 反 馈 和 投 诉 等 数 据 ， 智 能 地 监 控 业 务 是 否 处 于 稳 定 和 高 效 的 状态。 |扩展阶段 |1. 基于单个或者少量业务的成功案例，通过迁移学习或者强化学习等技术，将之前业务的成功经验推广到多个业务线上。 2. 从少量业务出发，逐步构建整个业务线的舆情监控体系，让所有业务线都 能够使用到智能的舆情监控技术。 |
7.4 其他关注点 
	AIOps 不是一门孤立的技术，AIOps 的成功实施不仅依赖于技术的落地，其与企业的文化、团队组织、运 维流程等方面也密切相关。企业需要逐步去适应甚至建立 AIOps 的文化，而在 AIOps 实践的过程中，传统运 维职能将会发生变化，需要组织配备或演变 AIOps 团队角色，培养相应的技能，推动 AIOps 在企业中逐步落 地和成熟，随着 AIOps 逐步成熟，传统运维流程中的环节，也会随之发生变化。l文化 
	AIOps 是 AI 这种发展多年的技术在其适宜的 Ops 领域下的应用，AIOps 既不是阳春白雪，也不是洪水猛 兽 ，企业应当充分理解 AIOps，结合企业自身现状，充分分析与规划最佳实践路径，以积极的态度面对和拥 抱 AIOps。 
	IT 运维长期以来都存在个人英雄主义情结，将控制权交给一台机器将是最困难的转变之一，运维人员需 逐步接受与信任将大部分工作交给 AIOps 系统去完成，而自身投入到 AIOps 系统的建设中。 
第 41 页共 74 页
《企业级 AIOps 实施建议白皮书》V1.0 
	l团队 
	如果 AIOps 平台将故障响应和故障分析活动从 IT 运维人员的工作中剥离出来，那么 IT 运维人员的角色 将会演变。拥有专业领域知识的运维人员将不再需要专注从战术上解决问题，而是需要与运维开发工程师、运维 AI 工程师配合，将这些运维知识与场景提炼出来形成知识从而训练系统。企业需要在现有团队成员中培 养 AIOps 新技能，或者引进具备这种技能的人才。在 AIOPS 实践过程中，运维工程师、运维开发工程师、运维 AI 工程师，三种角色之间交叉部分将会产生 一些新的职能，需要相互配合或者技能融合来承接，如 AIOps 场景设计、数据质量保证等。三者皆精通的工 程师，将成为团队的领头羊。 
图 7-2 AIOps 团队 
	l流程 
	运维发展至今，基于ITIL的最佳实践和DevOps文化已经形成了诸多运维流程，如事件管理、变更管理、问题管理等，运维流程将与 AIOps 体系相融合：一方面，运维流程生成操作流程相关的执行参数、状态和结 果，为 AIOps 实践提供数据支持，实现信息的便捷同步与分享；另一方面，AIOps 可以提升运维流程的效率，减少人为干预，降低因故障发现/处理不及时、人为误操作带来性能下降等问题造成的 SLA 损失。总而言之，AIOps 可与运维流程紧密结合，成为运维整体体系不可分割的部分，形成运维即服务的能力。第 42 页共 74 页
《企业级 AIOps 实施建议白皮书》V1.0 
8、AIOps 实施及关键技术
AIOps 是将大数据与人工智能技术应用于运维领域，基于运维数据，通过机器学习的方式来进一步解决 自动化运维没办法解决的问题。所以 AIOps 的两大关键核心要素是数据和算法，其中数据又是算法的基础依 赖。本章将围绕数据和算法给出具体的实践方法及相关的技术介绍，阐述过程中会围绕运维核心价值（质量、效率和成本）分别举例给出实践案例，以帮助大家更好的理解和尝试落地 AIOps。
8.1 运维数据及相关技术 
	运维数据主要分为日志、指标和事件，不同类型的数据在不同规模的场景需要有不同的技术去解决数据 的采集、加工、存储及计算等需求。在大数据技术突飞猛进的今天，各阶段的技术也是百花齐放，选择合适 的技术会帮助大家事半功倍。本节将围绕数据处理的这几个关键环节，介绍对应的技术及适应场景，并对比 较核心的数据仓库技术在运维领域的应用做重点介绍。8.1.1 常见的数据采集、处理与存储技术 
	数据采集指用主动或者被动等形式，将系统产生的运维数据通过批量或者流式收集到运维数据系统中。
当下大数据数据技术已经日趋成熟，新的技术也层出不穷，这里列举一些常用的技术方案，以供参考。常见 的数据采集技术（表 8-1）： 
| 采集方案  | 特点  |
|---|---|
| 脚本  |脚本是最传统的数据采集方法，适合绝大部分的数据类型。优点是灵活度 高、定制性强，而相对其他采集方式，它人工投入成本较高。一般适合从 API、命令等采集数据的场景。  |
| Logstash  |Logstash 是 ELK（ElasticSearch、Logstash、Kibana）组件中的一员，是一 个开箱即用的日志采集软件。支持日志、数据库表增量的采集，支持写入到 ElasticSearch、Hadoop、终端等输出源。  || Flume  |Apache Flume 是一个分布式、可靠、高可用的海量日志采集、聚合和传输的 系统。它支持在日志系统中定制各类数据发送方，用于收集数据；同时，Flume 提供对数据进行简单处理能力，具备较好的定制性。  |
| File Beats  |FileBeats 是一款轻量级的日志采集器，机器资源占用小。支持输出的存储有 ElasticSearch、Kalfa、Redis、Console、File 等。  |
表 8-1 数据采集常见技术 
第 43 页共 74 页
	《企业级 AIOps 实施建议白皮书》V1.0 	数据存储是 AIOps 平台的数据落地的地方，可以根据不同的数据类型以及数据的消费和使用场景，可选 择不同的数据存储方式。数据存储常用的技术（表 8-2）：
| 产品  | 适用场景  | 简介  |
|---|---|---|| 产品  | 适用场景  | 简介  |
|---|---|---|
| Hadoop/HDFS  |离线数据存储  |HDFS 适用存储结构化和非结构化的数据，存储空间可以水平 扩展，支持 EB 级别数据存储  |
| Greenplum  |实时数据存储  |Greenplum 基于 PostgreSQL 数据库的集群处理方案，采用了 MPP 的无共享方式，查询性能好；支持海量的数据存储，适合 OLAP 的场景。最初是收费软件，已经于 2015 年开源。  |
| HBase  |NoSQL 存储  |Hbase 是面向列设计的 NoSQL 存储系统，是 BigTable 的开源实 现。依托于 Hadoop 生态系，Hbase 具备低延迟、高可用、海量 存储等特性。  || Cassandra  |NoSQL 存储  |Apache Cassandra 是一个开源的、分布式、无中心、  支持水平扩展、高可用的 keyvalue 类型的 NoSQL 数据库,支持 多数据中心识别，可以做到数据中心级别容灾  |
| MongoDB  |NoSQL 存储  |MongoDB 介于关系数据库和非关系数据库之间，支持的数据结 构非常松散，支持类似 json 的 bson 格式，可以存储比较复杂 的数据类型。  |
| Kafka  |实时消息队列  |Apache kafka 是一个分布式的支持发布&订阅模型的 消息队列存储系统。  |
| RocketMQ  |实时消息队列  |ApacheRcoketMQ 是一款低延迟、高可靠、可伸缩、易于使用 的消息中间件。  || Druid  |实时数据存储  |Druid 按照列存的方式设计存储，定位是 OLAP 的分析型数据 库，也支持时间序列数据的存储；支持 SQL 查询语言。对于运 维存储大规模的实时数据同样比较适合。  |
| ElasticSearch  |实时数据存储  |ElasticSearch 基于 Lucene 开发，支持全文搜索，是 ELK 套件 中的核心组件。  |
第 44 页共 74 页
《企业级 AIOps 实施建议白皮书》V1.0 
| Clickhouse | 实时数据存储 | ClickHouse 是一种高性能开源的列式存储数据库管理系统；支持海量数据实时入库与分析查询，适合 OLAP 场景，同时保 留原始事件以提供更为灵活的查询分析 |
|---|---|---|
| OpenTSDB |时间序列存储  |OpenTSDB 是一个基于 Hbase 的分布式的，可伸缩的时间序列数 据库。它可用来存储运维数据仓库的时间需求数据  || InfluxDB  |时间序列存储  |InfluxDB 是一个开源的时间序列数据库，支持类 SQL 查询。开 源版本当前还不支持分布式模式  |
| Prometheus  |时间序列存储  |Prometheus 不仅仅一套时间序列存储系统，也是一套开源的 系统监控报警框架，它支持强大的多维度数据模型，并且具有 多种可视化图形界面  |
| Graphite  |时间序列存储  |Graphite 是一个用 Python 写的 web 应用，可以在企业级应用 的系统监控工具  |
表 8-2 数据存储常用的技术 
	数据处理大类上分为离线批处理和实时流处理两种，场景包括数据预处理，数据从非结构化到结构化的 解析，数据清洗，格式转换，以及数据（如性能指标）的聚合计算等。数据处理常用的技术（表 8-3）： 