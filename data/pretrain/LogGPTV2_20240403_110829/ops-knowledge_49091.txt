User: How to configure SSL certificate in Nginx?
Assistant: 1. Generate a certificate request First, generate a CSR (Certificate Signing Request) on the server where the certificate is to be installed. A CSR can be generated using the openssl command. ``` openssl req -new -newkey rsa:2048 -nodes -keyout domain.key -out domain.csr ``` where domain.key is the path of the key file, and domain.csr is the path of the certificate request. During this process, you will be asked to provide some information such as country, address, email address, etc. 2. Purchasing an SSL certificate There is usually a fee to purchase and obtain an SSL certificate. You can purchase certificates through various certificate authorities (CAs), such as DigiCert, Comodo, or GlobalSign, among others. Once the certificate is obtained, you will receive a zipped file containing 3 files: - SSL certificate file (.crt file) - Intermediate CA certificate file (.ca-bundle file) - Personal certificate key file (.key file) 3. Nginx SSL configuration file On the Nginx server, you need to add SSL settings in the configuration file. ``` server { listen 443 ssl; server_name example.com; ssl_certificate /path/to/ssl.crt; ssl_certificate_key /path/to/ssl.key; ssl_trusted_certificate /path/to/ca-bundle.crt; ... } ``` In this example, you need to replace ssl.crt with the path to the certificate file, ssl.key with the path to the key file, and ca-bundle.crt with the path to the intermediate CA certificate file. Among them, the listen command configures important ports. 4. Reload Nginx After completing the configuration file changes, Nginx needs to be reloaded to apply the SSL settings. You can reload Nginx with the following command: ``` sudo service nginx reload ``` 5. Test the SSL settings If everything is set up correctly, your SSL certificate should be working. You can use a browser to visit your website, and pay attention to whether the URL of the web page starts with "https". If SSL is enabled, you should see a green lock icon indicating that the site is secure.