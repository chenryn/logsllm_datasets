3.2 Crowd-Sourced Measurement
PhoneLab Deployment. PhoneLab [5] is a smartphone testbed located at the
University at Buﬀalo with more than 200 participants. Each participant receives
a Nexus 5 device running Android Lollipop with unlimited Sprint data plan.
Developers can deploy experiments on the devices by modifying the Android
system.
To understand handover policies and performance impacts, we add a system
service called HandoverTrackerService in Android system. This service monitors
context information of the device and triggers active measurements. The lower
layer information and measurement results are uploaded to servers. At the begin-
ning of deployment, we keep collecting lower layer messages and perform active
measurement periodically to avoid bias in the collected data. After analyzing
the data and understanding when handover is triggered, we update the deploy-
ment and leverage the context-triggered measurement framework to reduce the
measurement overhead.
To guarantee minimal inﬂuence of active measurements on user experience,
heavy-weight measurements such as throughput are performed only when the
screen is oﬀ and users are not interacting with the device. To control the power
consumption of issued active measurements, we build an energy model for all
measurements, and stop all measurements when the power consumption reaches
10% of total battery resources after the device is unplugged from the power
source. We also enforce a limit on the daily data usage generated by the active
measurements.
We deploy the measurement system on PhoneLab testbed and collect a
dataset PHONELAB for 5 months from January 2016 to May 20162. In total we
observe 8403 cells and 283,556 intra-LTE handover events. For active measure-
ments, we collect 49,594 throughput measurements, 159,210 ping measurements
and 50,409 UDP burst measurements.
2 We conﬁrm the inferred handover policy from PHONELAB are still current with
the newer MobileInsight dataset as described later in Sect. 4.
10
S. Xu et al.
Local Deployment. We also deploy our measurement setup to 20 local users
with unlimited AT&T data plans. We install an app called HandoverTrackerApp
on their devices. The app collects the same information as HandoverTrackerSer-
vice in PhoneLab deployment. We also collect data from a local device with
T-Mobile service.
Both the crowd-sourced measurements and local deployment were IRB appro-
ved. The descriptions of the experiment and collected data are presented to the
participants and they have the option to opt-out the experiment data collection.
MobileInsight Dataset. MobileInsight dataset [1]
is a publicly available
dataset containing lower layer cellular messages3 collected from more than 8
US/Chinese network carriers spanning 3 years from year 2015 to 2018 using
the tool MobileInsight [15]. The types of lower layer information collected by
MobileInsight is similar to our data collection deployed on PhoneLab.
4 Handover Policy Inference
In LTE networks, the cells make decisions on when to initiate handovers. The
handover decision process is not standardized in the 3GPP speciﬁcation and is
left to be deﬁned using carriers’ network conﬁgurations. To infer handover trig-
ger policies in practice, we implement an RRC stack emulator that keeps track of
the current device information, such as RRC connected state, connected cell ID,
measurement conﬁgurations, and processes handover related messages. We feed
RRC messages from each device to the emulator and output information includ-
ing recent measurement reports and corresponding measurement conﬁgurations
when processing handover initialization commands.
We ﬁrst characterize the deployment of the cells and analyze how many cells
the device usually observes from the signal strength measurements of neighboring
cells in the PhoneLab dataset. We ﬁnd that in 77.4% of cases the device observes
at least one neighboring cell. In 41.9% of cases, the devices observe multiple
neighboring cells. These neighboring cells can be of good signal strength. Among
all the measurements, in 18.5% of cases, there is at least 1 neighbor cell with
RSRP no worse than 5 dBm lower than the serving cell. This indicates that
carriers deploy cells densely to ensure connectivity and the potential chances of
performing handovers between cells are high.
We ﬁnd a strong correlation between measurement reports sent from the UE to
the cell (shown in Fig. 1) and handover events observed on the UE. As illustrated
in Fig. 3, 95.4% of handovers in Sprint occur within 100 ms after the measure-
ment report is sent. If we consider a measurement report helps trigger the han-
dover when a handover occurs within 500 ms after a measurement report is sent,
for all carriers studied, more than 99.4% of handovers are triggered by measure-
ment reports, as shown in Table 2. Such close timing proximity implies potential
causality.
3 The MobileInsight dataset does not have active measurements on network perfor-
mance.
Leveraging Context-Triggered Measurements
11
Table 2. Overall statistics of handovers.
Carriers
Sprint T-Mobile AT&T
Handovers triggered from events
99.84% 100%
99.40%
Handovers triggered from event A3 98.39% 89.51% 94.41%
Event A3 triggering handovers
91.87% 88.73% 87.58%
Handover count
Handover-involved cell count
283,556 286
6,304
33
330
45
F
D
C
 100
 80
 60
 40
 20
 0
 0
 50
 100  150  200  250  300
Handover delay (ms)
Fig. 3. Measured delay from the last measurement report to the time when handover
starts (Sprint).
− signalserving
We ﬁnd the majority type of measurement reports that triggers handovers
> threshold.
is event A3. Event A3 indicates that signalneighbor
98.39% of all handovers in Sprint network are triggered by event A3 reports.
On the other hand, event A3 measurement reports have a high success rate
of triggering handover. In Sprint network, for 91.9% of event A3 reports, the
cell initiates a handover within 500 ms. For 98.1% of event A3 reports, the cell
initiates a handover within 2 s. One reason why some reports fail to trigger
handovers is that the device releases the RRC connection or the data collector
stops collecting data before the handover occurs.
We ﬁnd for each pair of cells, the threshold value of event A3 that triggers
handover is statically conﬁgured and does not change over a long period. In
the Sprint network, for the pairs of cells that have more than 100 handovers,
10.4% always set the threshold to 2 dBm and 2.9% always set it to 4 dBm.
The other cells used the threshold of 2 dBm at the ﬁrst 2 months of our data
collection period and then changed to 4 dBm. The threshold of event A3 can
aﬀect how often handover happens. A lower threshold can be met more easily,
thus encouraging more frequent handovers.
To understand whether handovers occur mostly for devices experiencing poor
signal strength, we plot the distribution of the serving cell’s RSRP values right
before handovers in Fig. 4. As shown, there is no direct relationship between cur-
rent serving cell signal strength and handover occurrence. Handover occurs even
when serving cell signal strength is already strong. For AT&T and Sprint, more
than 20% of handovers happen when serving RSRP is stronger than −100 dBm.
This is due to the fact that most of the handover events are triggered by event
A3 using the relative signal strength threshold.
12
S. Xu et al.
F
D
C
 100
 80
 60
 40
 20
 0
-80
-130
RSRP serving cell before handover (dBm)
AT&T
T-Mobile
Sprint
-120
-90
-110
-100
F
D
C
 100
 80
 60
 40
 20
 0
AT&T
T-Mobile
Sprint
-20 -15 -10 -5
 0
 5  10  15  20
RSRP Improvement (dbm)
Fig. 4. RSRP of serving cell before
the handover. Despite strong signal
strength, handovers still occur.
Fig. 5. In 90% of cases, signal strength
improves after intra-LTE handover.
From the deﬁnition of the measurement report events, we know that han-
dovers triggered by event A3 are likely to improve the signal strength of the UE.
This is conﬁrmed by Fig. 5, showing the signal strength improvement after the
handover.
We also validate our observation using the MobileInsight dataset. Among
the 4873 observed handover events in the dataset, 86.5% are triggered by event
A3 measurement reports. For 99.1% of the cell pairs, the A3 threshold value
triggering handover is ﬁxed. This conﬁrms similar handover policies are used
across time across diﬀerent carriers. We next study the performance implications
of such handover policies.
5 Performance Impact of Handover
We characterize the disruption during handover and the performance change
after handover.
5.1 Performance Disruption During Handover
Due to the underlying physical radio layer transmission mechanism, during intra-
LTE handovers, the device has to disconnect from the currently connected cell
before connecting to the target cell, thus introducing a period during which
the device is detached from the network preventing any data exchange. This
unavoidably generates an interruption to ongoing traﬃc during handover. In
intra-LTE handovers, the detach time is deﬁned as the interval from the time
when the device receives handover initialization message from the source cell
and the time when the device successfully connects to the target cell.
To maintain good user experience during handover, the detach time needs
to be kept low. In our observation, the detach time of successful handovers
is within 35 ms, which is quite minimal. However, handovers can fail due to
various reasons such as insuﬃcient radio resources in the target cell. When a
handover fails, detach time can increase dramatically. If the UE fails to connect
to the target cell, the UE aborts the handover process and initiates connec-
tion re-establishment procedure with the source cell instead, which increase the
detach time up to 775 ms from our observations. Moreover, in some cases, the
)
s
m
(
y
a
e
d
l
y
a
w
e
n
O
 250
 200
 150
 100
 50
 0
-4
-3
 0
-1
-2
 2
Packet received time (s)
 1
Leveraging Context-Triggered Measurements
13
F
D
C
 100
 80
 60
 40
 20
 0
 3
 4
 10
 100
 1000
s
s
o
l
t
e
k
c
a
P
 800
 600
 400
 200
 0
 0
 200  400  600  800  1000  1200
Data pause time (ms)
Bytes in flight (KB)
Fig. 6. An example of
data pause
caused by
handover. 0 is the time
when the handover occurs
(Sprint).
Fig. 7. Data pause
in
UDP burst measurement
during handover (Sprint)
Fig. 8. TCP packet
loss
during handover due to lim-
ited buﬀer size in source
cell
for lossless handovers
(AT&T)
re-establishment request is rejected by the source cell, and the UE is forced to
release the connection and establish a new connection. This can further increase
the detach time to 2.7 s. The handover failure rate observed in Sprint is 0.18%.
Low detach time does not necessarily mean low impact on application-layer
traﬃc. After the UE connects to the target cell, it may not resume data trans-
mission from the new cell immediately. We use UDP burst measurement to
characterize the data pause time during handover. Figure 6 shows an example of
UDP measurement results. After the handover, the ﬁrst few packets are delayed
for about 200 ms. As Fig. 7 shows, the median data pause time is 66 ms, which
increases traﬃc jitter and may degrade real-time applications such as VoIP.
We examine packet losses during handover. During the handover, some data