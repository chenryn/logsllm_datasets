User:  How to install and configure LDAP service on CentOS system?
Assistant: The following are the steps to install and configure the LDAP service on the CentOS system: 1. Install the LDAP package ``` yum install openldap openldap-servers openldap-clients ``` 2. Configure LDAP Edit the /etc/openldap/slapd.conf file to perform configuration. Here is an example configuration: ``` # Define global options include /etc/openldap/schema/core.schema pidfile /var/run/openldap/slapd.pid argsfile /var/run/openldap/slapd.args # Define the database database bdb suffix "dc=mydomain,dc=com" rootdn "cn=admin,dc=mydomain,dc=com" rootpw {SSHA}xxxxxxxxxxxxxx directory /var/lib/ldap # Add indexes for faster searching index objectClass eq index cn pres ,sub,eq index sn pres,sub,eq index uid pres,sub,eq ``` Among them, suffix specifies the root node of the LDAP server, rootdn specifies the administrator account, and rootpw is the password of the administrator account. directory specifies the directory where the database is stored. If you do not want passwords to be stored in clear text in configuration files, you can use the ldappasswd tool to generate hashes. 3. Start the LDAP service ``` systemctl start slapd ``` 4. Create an LDAP database Use the slaptest command to create an LDAP database: ``` slaptest -f /etc/openldap/slapd.conf -F /etc/openldap/slapd.d ``` Then restart the LDAP service: ``` systemctl restart slapd ``` 5. Add users Use the ldapadd command to add users: ``` ldapadd -x -D "cn=admin,dc=mydomain,dc=com" -w password -f user.ldif ``` Among them, the -D parameter specifies the administrator account, the -w parameter specifies the administrator password, and the -f parameter specifies the user information file to be added. The following is an example content of a user.ldif file: ``` dn: cn=john doe,dc=mydomain,dc=com cn: john doe sn: doe objectClass: top objectClass: person objectClass: organizationalPerson objectClass: inetOrgPerson userPassword: {SHA }wk5XOMX7c2kNbyp3t8P6G9X7+cE= uid: jdoe mail: jdoe@mydomain.com ``` 6. Verify the user Use the ldapsearch command to verify whether the added user can be successfully queried: ``` ldapsearch -x uid=jdoe -b "dc=mydomain ,dc=com" ```