5 www.peeringdb.com.
6 http://bit.ly/1Uv9hNF.
Mind the Gap Between HTTP and HTTPS in Mobile Networks
223
Fig. 5. Comparing OS per-device volume: daily aggregate (left) and related percentage
of HTTPS (right).
Device type: We here investigate the relationship between device type and
consumed volume. Figure 5 (left) shows the boxplots (5th, 25th, 50th, 75th,
95th percentiles) of the users absolute volume consumption per vendor. Notice
the y-axis in logscale. For the sake of visibility, we only report on vendors with
at least 1% of users and we group the remaining vendors as “other”. The ﬁgure
shows that Apple devices consume 3.6× and 1.6× (median values) more traﬃc
than Microsoft and Android devices, respectively. If we focus on the fraction of
HTTPS traﬃc (Fig. 4, right), we notice that the share of HTTPS is inversely
proportional to the absolute volume, e.g., 50% of the Microsoft devices only
consume about 2 MB, out of which 90% is HTTPS.
We further investigate the HTTPS traﬃc generated by Microsoft devices and
ﬁnd that, on average, 60% of their traﬃc is addressed to Windows services like
*.bing.* and *.live.*. A similar result holds for Motorola devices as well (having
Google instead of Microsoft services). This suggests that most of this HTTPS
traﬃc consists of “background noise”, i.e., communications generated by the
operating system and apps but not strictly triggered by users activity. However,
corroborating this belief with numbers is hard based on the available data.
Second Level Domain: Finally, we process the transaction hostnames to
understand if they oﬀer visibility on the HTTPS services. Recall that for HTTPS
the hostname corresponds to the SNI communicated in the TLS handshake.
From each hostname, we remove the Top Level Domain (TLD) using the Mozilla
Public Suﬃx list [7]. Then, for each Second Level Domain (SLD) found we com-
pute the total number of bytes, and the associated share of HTTP and HTTPS.
Overall, we ﬁnd 1.6M SLDs, out of which 92% and 15% are used in HTTP and
HTTPS transactions respectively. The heatmaps in Fig. 6 show the top-50 (left)
and top-1000 (right) SLDs which account for 79.5% and 93.8% of volume in the
whole day. SLDs mostly coincide with CDN providers; however, in some cases
they accurately identify actual services (e.g., streaming – googlevideo, spotify;
social network – facebook, instagram, twitter, snapchat, whatsapp; gaming –
appliﬁer, etc.).
224
A. Finamore et al.
Fig. 6. Top Second Level Domain (SLD) volume breakdown.
Takeaways: We observed and quantiﬁed a “traﬃc gap” between HTTP and
HTTPS. This gap originates from the diﬀerent mix of services behind each pro-
tocol as well as OS (and device vendors). It follows that focusing on either one of
the two protocols only for traﬃc-based analysis introduces a substantial bias not
only on the overall volume, but also to capture device type diversity, and accessed
services. A proper characterization of these aspects is key for mobile operators.
5 Spatial and Temporal Analysis
Mobile operators are extremely interested in understanding where/how/when
their customers consume data when moving across the network. This is crucial
to drive investments (e.g., where to deploy/upgrade towers) and to support novel
services such as geofencing and SON (Self Organizing Networks). In the liter-
ature, Call Data Records (CDRs) have been largely exploited to study human
mobility [14]. However, a recent study [9] shows that UDRs (see Sect. 1) oﬀer
a richer vision on user mobility. We argue that web-logs enable an even ﬁner
grained spatial-temporal analysis than UDRs. This is because UDRs aggregate
activities in (large) time windows, and associate them with coarse spatial infor-
mation. Unfortunately, our dataset does not include UDRs and we thus cannot
further quantify this intuition.
We here explore to which extent HTTP traﬃc is representative of how users
consume content across time and space when compared with HTTPS. As done
in the literature [9], we approximate a user location with the position of the
Mind the Gap Between HTTP and HTTPS in Mobile Networks
225
Fig. 7. HTTP and HTTPS activity
over time (30 k random users).
Fig. 8. Number of towers used (all
users).
Fig. 9. Percentage of users consuming HTTP, HTTPS, and TCP-oth traﬃc with
respect to time of the day.
cell towers she is connected to. Note also that HTTP(S) transactions can be
associated to diﬀerent towers during their lifetime due to user mobility and/or
load balancing at the radio layer. Our enrichment process (see Sect. 3) allows to
identify all the towers associated to a transaction.
Traﬃc discontinuity: For each user we group HTTP and HTTPS transactions
in 10 min bins. Each bin has a binary value depending if at least 1 transaction
has been found or not. Figure 7 shows the obtained bitmaps for 30,000 random
users (results hold for other users). Notice how HTTP traﬃc (left plot) is more
“discontinued” than HTTPS (right plot), i.e., HTTP activity is more occasional
and sparse across the day.
Figure 9 shows a more detailed quantiﬁcation of traﬃc variation across the
day. We partition the day in 6 h bins starting from midnight. Within each bin,
we compute the percentage of users having 0%, >50%, or >80% of volume
over HTTP(S). Notice how HTTP better captures users activity during daily
hours; instead, at night time (00:00–05:00) 50% of the users do not generate any
HTTP traﬃc. As also observed for the device analysis (see Sect. 4), this suggests
226
A. Finamore et al.
that HTTP traﬃc better captures real user activity rather than (automatic)
background services.
Cell tower perspective: We here investigate how HTTP and HTTPS are
consumed from a cell tower perspective. Figure 8 reports the CDF of the number
of distinct towers each device connect to during the day. When focusing on HTTP
traﬃc only, we underestimate the set of towers contacted by a device. Speciﬁcally,
only 6% of devices contact more than 10 towers, while such value doubles when
focusing on HTTPS traﬃc only. The ﬁgure also shows that the HTTPS curve
matches quite well the “all traﬃc” curve, which suggests that HTTPS is a very
good “proxy” of the overall activity.
Next, we quantify how traﬃc is distributed among towers with the goal to
identify per user “hot spots”, i.e., which towers carry most of the traﬃc for
each user. We do this in term of number of transactions rather than volume as
the presence of undetectable persistent connections in HTTPS can introduce a
non-negligible error. Speciﬁcally, it is not easy to accurately split the volume
of an HTTPS transaction across the towers it uses (see Sect. 3). We ﬁnd that,
for HTTP, 93% of the users consume at least 80% of their HTTP traﬃc in
just 5 hot spots; this percentage reduces to 80% of the users when considering
HTTPS. In term of hot spot similarity, we ﬁnd a strong intersection: for 70%
of the users, 7 out of 10 HTTP hot spots are also HTTPS hot spots. In other
words, HTTP traﬃc alone seems to capture well the important locations where
content is consumed.
Mass centers: To further corroborate on the previous result, we conclude
our spatial analysis investigating “how distant in space” is HTTP traﬃc from
HTTPS, and vice-versa. For each user, we compute a mass center [9] represent-
ing where HTTP, HTTPS, and the whole traﬃc is consumed. A mass center
is computed as the average of towers coordinates weighted by their number
of transactions. Let us call those points mass-HTTP, mass-HTTPS, and mass-
ALL respectively. We then compute the Euclidean distance between (mass-ALL,
mass-HTTP) and (mass-ALL, mass-HTTPS) for each user. Figure 10 (left)
shows the CDF of the obtained distances. Results show that HTTP content
tends to be consumed further away than the majority of the traﬃc. This result
is independent from users activity, e.g., the plot obtained for very active HTTP
users (trans > 1,000) is not signiﬁcantly diﬀerent from the plot obtained for the
whole set of users.
To further quantify the “spatial gap” between HTTP and HTTPS, we nor-
malize the euclidean distances with respect to the user radius of gyration com-
puted considering the whole traﬃc activity. The gyration radius is a well estab-
lished metric to characterize user mobility [9,14]; it captures the average distance
between a point (the mass center) and another set of points (all towers locations).
For each user, we normalize the Euclidean distance between (mass-ALL, mass-
HTTP) and (mass-ALL, mass-HTTPS) with the gyration obtained considering
the whole traﬃc. Figure 10 reports the CDFs of the normalized Euclidean dis-
tances. The ﬁgure shows that HTTPS captures very well user mobility, e.g., 97%
of users have a normalized Euclidean distance <0.5. The mobility observed from
Mind the Gap Between HTTP and HTTPS in Mobile Networks
227
Fig. 10. Euclidean distance between mass centers (left) and normalized distance with
respect to overall gyration (right).
HTTP is very close to the overall one, and the normalized Euclidean distance
tends to decrease for heavy HTTP users.
We conjecture that the latter result derives from the human component of
the mobility problem. Users do not explicitly choose to use HTTP or HTTPS;
the presence of a traﬃc type is an “artifact” of the device and applications
used. However, a user chooses the location to visit and, as far as some traﬃc is
consumed, this is enough to characterize her mobility pattern.
Takeaways: The “time gap” between HTTP and HTTPS is substantial, with
each protocol being respectively the most popular one at diﬀerent points in time.
Conversely, the “spatial gap” between HTTP and HTTPS is limited and both
protocol are quite good in approximating user mobility.
6 Conclusions
In this work we presented the ﬁrst comparative study between HTTP and
HTTPS traﬃc for mobile networks. The input of our study was a unique dataset
including HTTP and HTTPS traﬃc, radio-layer information, and device infor-
mation from a 10M-subscriber European mobile operator. Our analysis high-
lighted three diﬀerent “gaps” between HTTP and HTTPS. First, a “traﬃc
gap” related to how diﬀerent services and OS/vendors use HTTP and HTTPS.
Second, a “time gap” due to protocols being more used at diﬀerent time of the
day. Third a surprisingly small “spatial gap”, probably motivated by the human
component of mobility.
From an operator perspective, logging non-HTTP traﬃc implies additional
investments. Based on the available dataset, we estimate that for a mid/large
mobile operator such logging requires few additional TB of storage each day.
This is an aﬀordable investment compared to the potential need to upgrade the
processing cluster along with the monitoring solution. Similarly, the extensive
adoption of persistent connections represent a hassle for monitoring network
metrics that accurately reﬂect service performance. Overall, we argue that state
228
A. Finamore et al.
of the art monitoring solutions are not yet ready to properly characterize HTTPS
traﬃc. We hope that the results provided in this work quantify the importance
of monitoring HTTPS, and they further stimulate the discussion in the research
community towards creating better monitoring systems.
References
1. CAIDA: As rank. http://as-rank.caida.org
2. Casas, P., Fiadino, P., B¨ar, A.: Understanding HTTP traﬃc and CDN behav-
ior from the eyes of a mobile ISP. In: Faloutsos, M., Kuzmanovic, A. (eds.)
PAM 2014. LNCS, vol. 8362, pp. 268–271. Springer, Cham (2014). doi:10.1007/
978-3-319-04918-2 28
3. Erman, J., Ramakrishnan, K.: Understanding the super-sized traﬃc of the super
bowl. In: Proceedings of the ACM Internet Measurement Conference (IMC), Octo-
ber 2013
4. Erman, J.E., Gerber, A., Hajiaghayi, M., Pei, D.: To cache or not to cache: The
3G case. IEEE Internet Comput. 15(2), 27–34 (2011)
5. Falaki, H., Lymberopoulos, D., Mahajan, R., Kandula, S., Estrin, D.: A ﬁrst look
at traﬃc on smartphones. In: Proceedings of the ACM Internet Measurement Con-
ference (IMC), November 2010
6. Keralapura, R., Nucci, A., Zhang, Z.L., Gao, L.: Proﬁling users in a 3G network
using hourglass co-clustering. In: Proceedings of the ACM MobiCom, September
2010
7. Mozilla: Public suﬃx list. http://publicsuﬃx.org/
8. Mucelli, E., Oliveira, R., Carneiro, A.V., Naveen, K.P., Sarraute, C.: Measurement-
driven mobile data traﬃc modeling in a large metropolitan area. In: Proceedings
of the IEEE Conference on Pervasive Computing and Communications (PerCom),
St. Luis, March 2015
9. Ranjan, G., Zang, H., Zhang, Z.L., Bolot, J.: Are call detail records biased for
sampling human mobility? ACM SIGCOMM Mob. Comput. Commun. Rev. 16(3),
33–44 (2012)
10. Sandvine, Global Internet Phenomena: Spotlight: encrypted internet traﬃc.
https://www.sandvine.com/trends/encryption.html
11. Shaﬁq, M.Z., Ji, L., Liu, A.X., Pang, J., Venkataraman, S., Wang, J.: A ﬁrst look at
cellular network performance during crowded events. In: Proceedings of the ACM
SIGMETRICS, June 2013
12. Trestian, I., Ranjan, S., Kuzmanovic, A., Nucci, A.: Measuring serendipity: con-
necting people, locations and interests in a mobile 3G network. In: Proceedings of
the ACM Internet Measurement Conference (IMC), November 2009
13. Vallina-Rodriguez, N., Sundaresan, S., Kreibich, C., Weaver, N., Paxson, V.:
Beyond the radio: illuminating the higher layers of mobile networks. In: Proceed-
ings of the ACM MobiSys, November 2015
14. Blondel, V.D., Adeline Decuyper, G.K.: A survey of results on mobile phone
datasets analysis. CoRR arXiv arXiv:1502.03406 (2015)
15. Vni, C.: The Zettabyte Era: Trends and analysis. http://www.cisco.com/
c/en/us/solutions/collateral/service-provider/visual-networking-index-vni/
vni-hyperconnectivity-wp.html
16. Xu, Q., Erman, J., Gerber, A., Mao, Z., Pang, J., Venkataraman, S.: Identifying
diverse usage behaviors of smartphone apps. In: Proceedings of the ACM Internet
Measurement Conference (IMC), November 2011