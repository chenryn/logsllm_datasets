数据库选型关键指标
digoal
指标对比
• SQL兼容性 • 应用场景
• 功能 • 社区状态
• 性能 • 社区活跃度
• 稳定性(都久经考验) • 生态
• 可靠性 • 未来发展潜力
• 代码成熟度 • 应用案例
• 平台兼容性 • 学习成本
• 服务端编程语言 • 开发成本
• 内核扩展能力 • 开源许可
• scale up 能力
• scale out 能力
兼容性
SQL
• PostgreSQL 9.5
– 兼容 SQL:2011 子集
– http://www.postgresql.org/docs/9.5/static/featur
es-sql-standard.html
• MySQL 5.7
– 兼容 SQL:1999 子集
功能差异 高级
- SQL
• 递归查询, connect by, 树形查询
– PostgreSQL 通过(with 或 tablefunc支持)支持，MySQL 不支持
– 例子
– https://yq.aliyun.com/articles/240
– http://www.postgresql.org/docs/9.5/static/tablefunc.html
• 窗口查询, window over
– PostgreSQL 支持，MySQL 不支持
– 例子
– http://blog.163.com/digoal@126/blog/static/16387704020137154137930
– http://blog.163.com/digoal@126/blog/static/16387704020121024102312302/
– http://blog.163.com/digoal@126/blog/static/16387704020124239390354/
– http://www.postgresql.org/docs/9.5/static/functions-window.html
• rollup, grouping sets, cube
– PostgreSQL 支持，MySQL 不支持
– 例子
– http://www.postgresql.org/docs/9.5/static/queries-table-expressions.html#QUERIES-GROUPING-SETS
– http://blog.163.com/digoal@126/blog/static/16387704020154269591874/
• 高级聚合(json,数组,相关性,标准差(采样,全局),截距,斜率,方差(采样,全
局),mode,percentile_cont,distc,rank,dense_rank,percent_rank,cume_dist,grouping)
– PostgreSQL 支持，MySQL 不支持
– 例子
– http://www.postgresql.org/docs/9.5/static/functions-aggregate.html
– http://blog.163.com/digoal@126/blog/static/1638770402015224124337/
– http://blog.163.com/digoal@126/blog/static/1638770402015379286873/
– http://blog.163.com/digoal@126/blog/static/16387704020153713222764
功能差异 高级
- SQL
• hash join
– PostgreSQL 支持，MySQL 不支持
• merge join
– PostgreSQL 支持，MySQL 不支持
• nestloop join
– 都支持
• 例子
• http://www.postgresql.org/docs/9.5/static/xoper-optimization.html
• http://www.postgresql.org/docs/9.5/static/planner-optimizer.html
• 哈希聚合
– PostgreSQL 支持, MySQL 不支持
– 例子
– http://www.postgresql.org/docs/9.5/static/runtime-config-query.html#RUNTIME-CONFIG-QUERY-ENABLE
• 事务间共享事务快照
– PostgreSQL 支持，MySQL 不支持
– 例子
– http://www.postgresql.org/docs/9.5/static/functions-admin.html#FUNCTIONS-SNAPSHOT-SYNCHRONIZATION
– http://www.postgresql.org/docs/9.5/static/sql-set-transaction.html
– http://www.postgresql.org/docs/9.5/static/app-pgdump.html
– http://blog.163.com/digoal@126/blog/static/163877040201326829943/
– http://blog.163.com/digoal@126/blog/static/163877040201241134721101/
功能差异 约束
-
• foreign key
– PostgreSQL 支持, MySQL 仅 innodb 引擎支持FK
– 例子
– http://www.postgresql.org/docs/9.5/static/ddl-constraints.html
• for no key update, for key share 粒度锁
– PostgreSQL 支持, MySQL 不支持
– 例子
– http://www.postgresql.org/docs/9.5/static/explicit-locking.html#LOCKING-ROWS
– http://blog.163.com/digoal@126/blog/static/16387704020130249109133/
– http://blog.163.com/digoal@126/blog/static/16387704020130305109687/
• check 约束
– PostgreSQL 支持, MySQL不支持(仅支持语法，实际不生效，不严谨)
– 例子
– http://www.postgresql.org/docs/9.5/static/ddl-constraints.html
• exclusion 约束
– PostgreSQL 支持, MySQL不支持
– 例子
– http://www.postgresql.org/docs/9.5/static/ddl-constraints.html
功能差异 易用性
-
• 表空间
– 都支持
• alter 列值转表达式(alter table alter column c1 type newtype using (expression(...)) )
– PostgreSQL 支持, MySQL 不支持
– 例子
– http://www.postgresql.org/docs/9.5/static/sql-altertable.html
– https://yq.aliyun.com/articles/30470
• alter table 需要重组表的操作
– MySQL ( innodb )
• optimize table, 添加列，删除列, 重排, 修改row_format, key_block_size, mark column null, not null, 修改字段
长度, 修改字段数据类型, 添加主键, 删除主键, 转换字符集, 指定字符集, rebuild table
• http://dev.mysql.com/doc/refman/5.7/en/innodb-create-index-overview.html
– PostgreSQL
• vacuum full, cluster, 修改字段数据类型, (修改长度不需要重组表)
• http://www.postgresql.org/docs/9.5/static/sql-altertable.html
• 分区表
– 都支持
– PostgreSQL 通过继承支持分区表, 阿里RDS PostgreSQL支持分区表语法
– 例子
– http://www.postgresql.org/docs/9.5/static/ddl-partitioning.html
– https://yq.aliyun.com/articles/113
功能差异 易用性
-
• 物化视图
– PostgreSQL 支持, MySQL 暂不支持
– 例子
– http://www.postgresql.org/docs/9.5/static/sql-creatematerializedview.html
• 物化视图增量刷新
– PostgreSQL 支持, MySQL 暂不支持
– 例子
– http://www.postgresql.org/docs/9.5/static/sql-refreshmaterializedview.html
• 表继承关系
– PostgreSQL 支持, MySQL 暂不支持
– 例子
– http://www.postgresql.org/docs/9.5/static/tutorial-inheritance.html
• 使用 like 建结构类似的表
– PostgreSQL 支持, MySQL 暂不支持
– 例子
– http://www.postgresql.org/docs/9.5/static/sql-createtable.html
功能差异 开发功能
-
• 客户端开发语言支持
– C, java, python, ...
• 函数
– void, 单行，SRF，事件触发器(MySQL 不支持)，触发器
– 例子
– http://blog.163.com/digoal@126/blog/static/16387704020132131361949/
– http://www.postgresql.org/docs/9.5/static/event-triggers.html
• 2PC
– PostgreSQL 支持, MySQL 仅innodb支持
• 服务端绑定变量
– PostgreSQL 支持, MySQL 不支持
– 例子
– http://www.postgresql.org/docs/9.5/static/sql-prepare.html
• savepoint
– PostgreSQL 支持, MySQL 仅innodb支持
功能差异 开发功能
-
• 异步消息
– PostgreSQL 支持, MySQL 不支持
– 例子
– http://www.postgresql.org/docs/9.5/static/sql-notify.html
– http://www.postgresql.org/docs/9.5/static/sql-listen.html
• 游标
– 都支持
• 数组FOR循环，query FOR循环，游标FOR循环
– PostgreSQL 全支持
• 例子
• http://www.postgresql.org/docs/9.5/static/plpgsql-control-structures.html
• http://www.postgresql.org/docs/9.5/static/plpgsql-cursors.html
– MySQL 不支持数组
功能差异 类型支持
-
• 数据类型
– PostgreSQL
• 高精度numeric, 浮点, 自增序列，货币，字节流，时间，日期，时间戳，布尔，
枚举，平面几何，立体几何，多维几何，地球，PostGIS，网络，比特流，全
文检索，UUID，XML，JSON，数组，复合类型，域类型，范围，树类型，化
学类型，基因序列，FDW, 大对象, 图像
– MySQL
• 数字，时间，字符串，简单的GIS，JSON
• 支持索引的数据类型
– PostgreSQL
• 高精度numeric, 浮点, 自增序列，货币，字节流，时间，日期，时间戳，布尔，
枚举，平面几何，立体几何，多维几何，地球，PostGIS，网络，比特流，全
文检索，UUID，XML，JSON，数组，复合类型，域类型，范围，树类型，化
学，基因序列
– MySQL
• 数字，字符串，比特流，时间，全文检索，GIS
功能差异 索引支持
-
• 索引方法
– PostgreSQL 支持 btree, hash, gist, sp-gist, gin, brin , bloom , rum 索引
– MySQL 支持 btree, gis类型索引
• 规则表达式、前后模糊查询，支持索引检索
– PostgreSQL 支持
– MySQL 不支持
• 数组支持索引
– PostgreSQL 支持，MySQL不支持数组
• 全文检索支持索引
– 都支持
• 索引扩展功能
– PostgreSQL 支持 表达式索引，部分索引，联合索引
– MySQL 支持 联合索引
• 图像相似度、文本相似度搜索
– PostgreSQL 支持索引加速
– MySQL不支持
• 自定义索引方法
– PostgreSQL支持
– MySQL 不支持
功能差异 并发能力
-
• 隔离级别
– PostgreSQL 支持 RC, RR, 以及高于SQL 92标准的串行隔离级别
– MySQL 支持 RU，RC，RR，以及SQL 92标准的串行隔离级别
• slave库支持RR隔离级别查询
– 都支持
• 锁粒度
– PostgreSQL 支持 行锁，对象锁，页锁，预锁，应用锁，自旋锁，共享锁，
排它锁
– MySQL 不支持 应用锁，预锁
• 死锁检测
– 都支持