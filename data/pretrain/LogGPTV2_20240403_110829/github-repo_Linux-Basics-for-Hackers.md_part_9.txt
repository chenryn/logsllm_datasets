*图4-2:Synaptic包管理器接口*
现在您可以搜索您正在寻找的包，只需单击Search选项卡打开一个搜索窗口。因为您再次寻找Snort，所以在搜索窗口中输入Snort并单击search。向下滚动搜索结果以找到您要查找的包。选中snort旁边的复选框，然后单击Apply选项卡，如图4-3所示。Synaptic现在将从存储库下载并安装Snort以及任何必要的依赖项。
![](media/a2ef41728e4be58a27dc8d0931c6f698.jpg)
*图4-3:从Synaptic包管理器下载Snort*
### 使用GIT安装软件
有时，您想要的软件在任何存储库中都不可用——尤其是在它是全新的情况下——但是它可能在github
(https://www.github.com/)上可用，这个站点允许开发人员与其他人共享他们的软件，以便下载、使用和提供反馈。例如，如果您想要蓝牙攻击和渗透套件bluediving，但是在Kali存储库中找不到它，那么您可以通过在浏览器搜索栏中输入*bluediving*来搜索。如果它存在于github上，您应该在搜索结果中看到它的存储库。
在github上找到软件后，可以通过输入git clone命令及其github
URL从终端安装软件。例如，bluediving位于https://www.github.com/balle/bluediving.git。要将其克隆到您的系统中，请输入清单4-7所示的命令。
kali \>git clone
https://[www.github.com/balle/bluediving.git](http://www.github.com/balle/bluediving.git)
Cloning into 'bluediving'...
remote: Counting objects: 131, Done.
remote: Total 131 (delta 0), reused 0 (delta 0), pack­reused 131 Receiving
objects: 100% (131/131), 900.81 KiB \| 646.00 KiB/s, Done.
Resolving deltas: 100% (9/9), Done.
Checking connectivity... Done.
*清单4-7:使用git clone 克隆bluediving*
git
clone命令将所有数据和文件从该位置复制到您的系统中。您可以使用目标目录上的长列表命令ls
-l检查它们是否已成功下载，如下所示:
kali \>ls -l
如果您已经成功地将bluediving克隆到您的系统中，您应该会看到以下输出:
total 80
drwxr­xr­x 7 root root 4096 Jan 10 22:19 bluediving
drwxr­xr­x 2 root root 4096 Dec 5 11:17 Desktop
drwxr­xr­x 2 root root 4096 Dec 5 11:17 Documents
drwxr­xr­x 2 root root 4096 Dec 5 11:17 Downloads
drwxr­xr­x 2 root root 4096 Dec 5 11:17 Music
­­snip­­
如您所见，bluediving已成功地克隆到系统中，并为其文件创建了一个名为bluediving的新目录。
### 总结
在本章中，您学习了许多在Linux系统上下载和安装新软件的方法。软件包管理器(如apt)、基于gui的安装程序和git
clone是有抱负的黑客需要知道的最常见和最关键的方法。你很快就会发现自己对它们都很熟悉了。
5
-
控制文件和目录权限
------------------
CONTROLLING FILE AND DIRECTORY PERMISSIONS
![](media/451fdbee142e8cd4684d71b24707d050.jpg)
并非操作系统的每个用户都应具有相同级别的文件和目录访问权限。与任何专业操作系统一样，Linux具有保护文件和目录访问的方法。系统允许系统管理员（root用户或文件所有者）通过赋予用户读取，写入或执行文件的权限来保护其文件免受不必要的访问或篡改。对于每个文件和目录，我们可以为文件所有者、特定用户组以及所有其他用户指定权限状态，这在多用户操作系统中是必要的。
在本章中，我将向您展示如何检查和更改选定用户的文件和目录的权限，如何设置默认文件和目录权限以及如何设置特殊权限。最后，您将看到黑客对权限的理解如何帮助他们攻击系统。
### 多类型用户
在Linux系统中，root用户非常强大。root用户基本上可以执行任何操作。系统上的其他用户拥有有限的权限，不可能具有root用户具有的所有访问权限。
这些其他用户通常被收集到通常共享相似的组功能。在商业实体中，这些组可能是财务、工程、销售等。在IT环境中，这些组可能包括开发人员、网络管理员和数据库管理员。我们的想法是将具有相似需求的人员放入被授予相关权限的组中，然后该组的每个成员都会继承组权限。这主要是为了便于管理权限，从而确保安全性。
默认情况下，root用户是root组的一部分。必须将系统上的每个新用户添加到组中才能继承该组的权限。
### 赋予权限
必须为每个文件和目录分配使用它的不同身份的特定级别的权限。三个级别的许可如下：
**r** 读权限。赋予用户打开与查看权限
**w** 写权限。赋予用户查看与编辑写入权限
**x** 执行权限。赋予用户执行一个文件（但是没有必要查看或者编辑它）
通过这种方式，root用户可以根据用户需要的权限向用户授予一定级别的权限。创建文件时，通常创建文件的用户是文件的所有者，用户组是用户的当前组。该文件的所有者可以授予它各种访问权限。让我们看看如何更改权限以将所有权赋予给单个用户和组。
#### *赋予个人用户权限*
将文件的所有权转移到其他用户以便他们能够控制权限，我们可以使用chown（或更改文件所有者）命令：
kali \>chown ➊bob ➋/tmp/bobsfile
在这里，我们给出命令，我们给予所有权的用户的名称，然后是相关文件的位置和名称。此命令授予Bob➊对文件bobsfile➋所有权的用户帐户。
#### *赋予用户组权限*
要将文件的所有权从一个组转移到另一个组，我们可以使用chgrp（或更改组）命令。
黑客通常更有可能单独工作而不是团体工作，但对于一些黑客或测试者在项目上一起工作并不是闻所未闻，在这种情况下，使用组是必要的。例如，您可能有一组测试人员和一组安全团队成员在同一个项目上工作。此示例中的测试者是根组，这意味着他们具有所有权限和访问权限。root组需要访问黑客工具，而安全人员只需要访问防御工具，如入侵检测系统（IDS）。假设根组下载并安装名为newIDS的程序，根组需要将所有权更改为安全组，以便安全组可以随意使用它。为此，根组只需输入以下命令：
kali \>chgrp ➊security ➋newIDS
此命令改变安全组➊newIDS➋的所有权。
现在您需要知道如何检查这些分配是否有效。你可以通过检查文件的权限来做到这一点。
### 检查权限
如果要查找为文件或目录的哪些用户授予的权限，请使用带有**-l**（long）开关的**ls**命令来显示目录的内容。**ls
-l**命令在文件/ usr / share /
hashcat（我最喜欢的密码破解工具之一）上，以便查看我们可以在那里了解的文件。
kali \>ls –l /usr/share/hashcat
total 32952
➊➋ ➌ ➍ ➎ ➏ ➐
drwxr­xr­x 5 root root 4096 Dec 5 10:47 charsets
­rw­r­­r­­ 1 root root 33685504 June 28 2018 hashcat.hcstat
­rw­r­­r­­ 1 root root 33685504 June 28 2018 hashcat.hctune
drwxr ­xr­x 2 root root 4096 Dec 5 10:47 masks
drwxr ­xr­x 2 root root 4096 Dec 5 10:47 OpenCL
drwxr ­xr­x 3 root root 4096 Dec 5 10:47 rules
*清单 5­1:使用ls -l命令检查文件的权限*
我们获取有关以下内容的信息：
➊ 文件类型
➋ 所有者，组和用户的文件权限
➌ 链接数量（本主题超出了本书的范围。）
➍ 文件所有者
➎ 文件的大小（以字节为单位）
➏ 文件创建或上次修改时间
➐ 文件名
现在，让我们关注每条线左边看似难以理解的字母和短划线。它们告诉我们一个项目是文件还是目录，以及它上面有哪些权限（如果有的话）。
第一个字符告诉您文件类型，其中**d**代表目录，短划线（ **-**
）表示文件。这是两种最常见的文件类型。
下一节定义文件的权限。有三组三个字符，由read（**r**），write（**w**）和execute（**x**）的某种组合按顺序组成。第一组代表所有者的权限，第二组代表用户所在组的权限以及最后一个，所有其他用户的权限。
无论您正在查看哪一组三个字母，如果您首先看到**r**，该用户或用户组都有权打开和读取该文件或目录。作为中间字母的**w**意味着它们可以写入（修改）文件或目录，并且最后的**x**意味着它们可以执行（或运行）文件或目录。如果用短划线（
-
）替换任何r，w或x，则未给出相应的权限。请注意，用户只能执行二进制文件或脚本的权限。
让我们使用清单 5-1中的第三行输出作为示例：
­rw­r­­r­­ 1 root root 33685504 June 28 2018 hashcat.hcstat
正如我们从行的右端*hashcat.hcstat*所知，调用该文件。初始化（表示它是一个文件）之后，权限rw-告诉我们所有者具有读写权限但没有执行权限。
下一组权限（r--）表示该组的权限，并显示该组具有读取权限但不具有写入或执行权限。最后，我们看到其他用户也只有读取权限（r--）。
这些权限不是一成不变的。作为root用户或文件所有者，您可以更改它们。接下来，我们会做到这一点。
### 改变用户权限
我们可以使用Linux命令**chmod**来更改权限。
只有root用户或文件所有者才能更改权限。在本节中，我们使用**chmod**来更改hashcat.hcstat的权限两个不同的方法。首先，我们使用权限的数字表示，然后我们使用符号表示。
#### *十进制权限改变法*
我们可以使用快捷方式通过使用单个数字来表示一个rwx权限集来引用权限。与操作系统下的所有内容一样，权限以二进制表示，因此ON和OFF开关分别由1和0表示。您可以将rwx权限视为三个ON/OFF开关，因此当授予所有权限时，这相当于111的二进制。
这样的二进制集很容易通过将其转换为八进制来表示为一位数，八位数字系统以0开头并以7结尾。八进制数字表示一组三位二进制数字，这意味着我们可以表示整个rwx集用一位数。下表5-1包含所有可能的权限组合及其八进制和二进制代表。
表 5­1: 八进制和二进制权限表示
| **二进制** | **十进制** | **权限(rwx)** |
|------------|------------|---------------|
| 000        | 0          | \---          |
| 001        | 1          | \--x          |
| 010        | 2          | \-w-          |
| 011        | 3          | \-wx          |
| 100        | 4          | r--           |
| 101        | 5          | r-x           |
| 110        | 6          | Rw-           |
| 111        | 7          | rwx           |
通过这些信息，我们来看一些例子。首先，如果我们只想设置读权限，我们可以查询表5-1并找到read的值：
r w x
4 ­ ­
接下来，如果我们想要将权限设置为wx，我们可以使用相同的方法并查找设置w的权限以及设置x的权限：
r w x
­ 2 1
请注意，在表5-1中，-wx的八进制表示为3，这恰好是我们在设置w和x时添加两个值时获得的值相同：2
+ 1 = 3。
最后，当所有三个权限都打开时，它看起来像这样：
r w x
4 2 1
并且4 + 2 + 1 =
7。这里，我们看到在Linux中，当所有权限开关都打开时，它们由八进制等效值7表示。
因此，如果我们想要表示所有者，组和所有用户的所有权限，我们可以按如下方式编写它：
7 7 7
这是快捷方式的来源。通过传递**chmod**三个八进制数字（每个rwx一个）后跟文件名，我们可以为每种类型的用户更改该文件的权限。在命令行中输入以下内容：
kali \>chmod 774 hashcat.hcstat
看表5-1，我们可以看到这个语句给了所有者所有权限，分组所有权限，其他所有人（其他）只有读取权限。
现在我们可以通过在目录上运行**ls
-l**并查看hashcat.hcstat行来查看这些权限是否已更改。导航到该目录并立即运行该命令：