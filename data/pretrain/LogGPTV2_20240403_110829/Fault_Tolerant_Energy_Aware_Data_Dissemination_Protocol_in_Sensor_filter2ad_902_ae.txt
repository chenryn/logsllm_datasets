### Energy Consumption and Delay Analysis of SPIN and SPMS

**Figure 7: Energy Consumption by SPIN and SPMS with Different Transmission Radii (Number of Nodes = 169)**

- **Energy Consumption (Joules)**
  - 500
  - 400
  - 300
  - 200
  - 100
  - 0
- **Transmission Radius (m)**
  - 0
  - 10
  - 20
  - 30

**Comparison of Delay in SPIN and SPMS**

We compare the delay incurred in transmitting packets under SPIN and SPMS. The delay is measured from the time the ADV packet is sent out by the source to the time the data packet is received at the destination. The delay varies for different source-destination pairs, and the average delay across all packets is plotted.

**Figure 8: End-to-End Delay with Varying Number of Nodes for Static Nodes with and without Failures**

- **Delay (Seconds)**
  - 80
  - 60
  - 40
  - 20
  - 0
- **Number of Nodes**
  - 0
  - 100
  - 200
  - 300

SPMS transmits packets almost 10 times faster than SPIN. The delay difference between SPIN and SPMS increases with the number of nodes. This is because the delay to a node increases more rapidly in SPIN, as each round of SPIN where data is transmitted to all nodes in a zone takes longer than a corresponding round in SPMS. With an increasing sensor field size, more rounds are required to reach a given destination.

**Effect of Transmission Radius on Delay**

The effect of the transmission radius on the delay is shown in Figure 9. As the radius increases, the delay decreases for both SPIN and SPMS. Initially, one might expect that an increase in the number of nodes would increase the delay. However, as the radius increases, the number of nodes in the zone that hear the ADV packet also increases, leading to more nodes acquiring the data packet in the same round. In contrast, for a smaller transmission radius, the data must propagate through multiple zones in multiple rounds before reaching the destination. The decrease in delay with increasing radius offsets the increase due to increased contention at the MAC layer as the number of nodes in a zone increases.

**Figure 9: End-to-End Delay with Transmission Radius for Static Nodes with Transient Failures**

- **Delay (Seconds)**
  - 60
  - 40
  - 20
  - 0
- **Transmission Radius (m)**
  - 0
  - 5
  - 10
  - 15
  - 20
  - 25
  - 30

### Static Failure Case

We test SPMS and SPIN under failure scenarios, referred to as F-SPMS and F-SPIN, respectively. The type of failures considered is transient node failures. Nodes fail with an exponential inter-arrival time (mean \(\lambda\)) and stay failed for a time drawn from a uniform distribution (\(repair_{min}, repair_{max}\)). During the repair time, any received message is dropped, and any scheduled packet transfer is canceled. We assume recovery is always successful. In our implementation, the routing table keeps only the shortest (i.e., least cost) and the second shortest path to the destination, which tolerates only one failure during the recovery window.

To compare the results against the failure-free runs, the number of new packets generated by each node is kept the same. As expected, the delay increases in the failure cases (Figure 8, plots 1 & 3) because some nodes in the zone have to wait for the timer \(T_{ADV}\) or \(T_{DAT}\) to go off and then request the packet through the alternate path. The delay difference between the failure and failure-free runs for small radii is small due to fewer intermediate hops. As the radius increases, the failure of relay nodes induces additional delay in SPMS. Scalability tests show that for a small number of nodes, the path length is shorter, and thus the number of activated failures is smaller. Therefore, the difference between the failure-free and failure cases is not substantial, but it becomes pronounced as the number of nodes increases.

### Mobile Failure-Free Cases

In this set of experiments, nodes are allowed to move. As nodes move, the routing tables must be modified, and no packet transfer can take place until the routing tables converge. At discrete times in the simulator clock, a predefined fraction of nodes move. The nodes that move and their destinations are chosen randomly. Once the routing tables converge, data transmission starts again. The energy expended in SPMS for forming routing tables is included in the energy measurement. Even with mobility, SPMS performs better than SPIN, although the percentage of energy savings decreases (varies from 5%-21%). As the frequency of node motion increases, more energy is required for setting up the routing tables. Our calculations, considering the cost of running Bellman-Ford and the energy gain of SPMS over SPIN, lead us to conclude that at least 239.18 packets must be successfully transmitted between two instances of network mobility for SPMS to save energy compared to SPIN.

### Cluster-Based Communication

Cluster heads are responsible for collecting data and requesting it if needed. Other nodes in the zone of the source node can also be interested in data with a probability of 5%. Energy consumption is measured by varying the zone radius. In SPMS, communication between nodes and the cluster head is multi-hop, compared to direct transmission in SPIN. In Figure 10 (plots 1 & 3), we see that SPMS consumes 35-59% less energy than SPIN for the failure-free case. As the transmission radius increases, a cluster has a larger radius, providing more scope for multi-hop communication in SPMS, thus increasing the energy difference. Next, node failures are injected for all-to-all communication. As seen in Figure 10 (plots 2 & 4), the energy expended by the protocols in failure cases is much higher than in failure-free runs.

**Figure 10: Energy Consumed with Transmission Radius for Cluster-Based Hierarchical Communication**

- **Energy Consumption (Joules)**
  - 400
  - 300
  - 200
  - 100
  - 0
- **Transmission Radius (m)**
  - 0
  - 10
  - 20
  - 30

### Conclusion

In this paper, we present a protocol called SPMS for data dissemination in energy-constrained wireless sensor networks. The protocol uses metadata exchange prior to data exchange to determine if a node requires the data. It employs a hybrid push-pull mechanism, pushing the advertisement of the data from the source followed by a pull from the interested destination. Unlike the earlier published protocol SPIN, which also uses metadata exchange, SPMS uses shortest distance multi-hop routing for request and data transfers, allowing substantial energy savings. Additionally, SPMS reduces end-to-end data latency. The low-power transmission reduces contention for the shared wireless MAC channel, thus reducing the delay due to MAC layer backoff.

We provide a theoretical analysis of the energy expenditure and delay in SPMS and compare it to SPIN. As the transmission radius increases, the delay in SPIN approaches that in SPMS, but its energy consumption increases substantially, reaching up to three orders of magnitude higher. The simulation study compares the behavior of SPMS and SPIN under two communication patterns, node failure, and mobile sensor node cases. SPMS performs better in static cases, while in mobile cases, it incurs the cost of routing table formation but still outperforms SPIN up to a threshold.

For future work, we propose extending SPMS to disseminate data when the source and destination are in separate zones with no interested nodes in the intermediate zones. This would require the use of zone routing and the request phase of the protocol to go across zones. We are also investigating the issue of data caching at intermediate nodes that route the data but are not receivers, which can improve the fault-tolerant property of the protocol.

### References

[1] Kim, S., Son, S. H., Stankovic, J., Li, S., Cho, Y., "SAFE: A Data Dissemination Protocol for Periodic Updates in Sensor Network", International Workshop on Data Distribution for Real-Time Systems, 2003.

[2] Ye, F., Luo, H., Cheng, J., Lu, S., and Zhang, L., "A two-tier data dissemination model for large-scale wireless sensor networks", MobiCom 2002, September 2002.

[3] Heinzelman, W.B., Chandrakasan, A.P., Balakrishnan, H., "An application-specific protocol architecture for wireless microsensor networks", IEEE Transactions on Wireless Communications, October 2002, pp. 660-670.

[4] Hass, Z., Pearlman, M.R., "The Performance of Query Control Schemes for the Zone Routing Protocol", IEEE/ACM Transactions on Networking, vol 9, No.4, pp.427-438, August 2001.

[5] Heinzelman, W.R., Kulik, J., and Balakrishnan, H., "Adaptive Protocol for Information Dissemination in Wireless Sensor Networks", Mobicom 1999.

[6] Lindsey, S., Raghavendra, C., and Sivalingam, K.M., "Data Gathering Algorithms in Sensor Networks Using Energy Metrics", IEEE TPDS, vol 13 No.9, pp. 924-935, September 2002.

[7] Kim, J.H. and Lee, J.K., "Performance analysis of Mac protocols for wireless LAN in Rayleigh and shadow fast fading", GLOBECOM'97 IEEE, Vol 1, 3-8 Nov 1997.

[8] Khattab, Hadidi, and Mourad, "Analysis of Wireless CSMA/CA Network using Single Station superposition (SSS)", AEU, Vol 56 No. 2, Mar/Apr 2002.

[9] Nuggehalli, P., Srinivasan, V., Chiasserini, C.F., "Energy Efficient Caching Strategies in Ad Hoc Wireless Networks", MobiHoc 2003, pp 25-34, June 1-3, 2003.

[10] Kulik, J., Heinzelman, W., Balakrishnan, H., "Negotiation protocols based for disseminating information in wireless sensor networks", ACM Wireless Networks, Vol. 8, Mar-May 2002, pp. 169-185.

[11] Hill, J., Szewczyk, R., Woo, A., Hollar, S., Culler, D., and Pister, K., "System Architecture Directions for Network Sensors", ASPLOS 2000.

[12] Savvides, A., Srivastava, M.B., "A Distributed Computation Platform for Wireless Embedded Sensing", Proceedings of ICCD 2002.

[13] Tamminen, J., "2.4 Ghz Wireless Radio Interface", www.radionet.fi/res/277/TUT_WLAN_Seminar.pdf.

[14] Rodoplu, V., Meng, T., "Minimum energy mobile wireless networks," In Proceedings of the 1998 IEEE ICC, June 1998.

[15] Perkins, C.E., Royer, E., and Das, S.R., "Ad hoc on demand MANET distance vector (AODV) routing." IETF working group, November 2001.

[16] Johnson, D., Maltz, D.A., Hu, Y.C., and Jetcheva, J.G., "The dynamic source routing protocol for mobile ad hoc networks," Internet Draft (IETF) MANET working group.

[17] Intanagonwiwat, C., Govindan, R., and Estrin, D., "Directed Diffusion: A Scalable and Robust Communication Paradigm for Sensor Networks," Mobicom 2000.