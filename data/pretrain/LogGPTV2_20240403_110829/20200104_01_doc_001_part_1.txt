PG+mongo助力企业去O
阿里云
digoal
目录
• PG和mongo的渊源
• 去O的大背景
• 去O难点
• PG+mongo的优势
• 参考资料
PG的起源
l 每年发布大版本，
l 1.5个月左右发布小版本，
l 每个大版本维护5～6年。
l 历史版本特征矩阵:
https://www.postgresql.org/about/featurematrix/
DeveloperWeek采访数据
l SQL + NoSQL数据库使用：75.6%
l SQL + SQL数据库使用：14.6%
l NoSQL + NoSQL数据库使用：9.8%
DeveloperWeek采访数据
l MySQL + MongoDB：34.15%
l MySQL + PostgreSQL：9.76%
l MongoDB + PostgreSQL：7.32%
l MongoDB + Redis：7.32%
l MySQL + MongoDB + PostgreSQL：4.88%
l MySQL + MongoDB + PostgreSQL + Redis：4.88%
DB-Engines 榜单好基友
2013 2014 2017 2018
年度数据库 年度数据库 年度数据库 年度数据库
mongo mongo PG PG
PG、mongo 社区互动
2014 PG年度峰会 – 深圳 TJ - MongoDB的特点及应用
2018 PG年度峰会 – 杭州 TJ - MongoDB 4.0 - 开创 NoSQL + ACID 新纪元
2019 沙龙 MongoDB + PostgreSQL中文社区 南京技术大会
2019 PG象行中国（重庆站） 唐峰 - MongoDB技术特点及典型应用场景
2019 PG年度峰会 – 北京 TJ - 数据中台的技术实现方案
开发者喜爱的特性
• JSON
• Mongo: BSON
• PG: JSON、JSONB、SQL/json path language、plv8、GIN倒排索引
• GIS
• Mongo: GeoJSON
• PG: PostGIS(geometry、geography、2D|3D|4D)
• FDW
• PG: mongo_fdw
目录
• PG和mongo的渊源
• 去O的大背景
• 去O难点
• PG+mongo的优势
• 参考资料
2007 全球数据库软件市场份额
Gartner Worldwide RDBMS Market Share Reports
只手遮天
48.6% 20.7% 18.1%
O D MSS
2008
分解、尝试、拆分、开源框架开始流行
英
RDBMS NoSQL
雄
商业数据库
辈
O D M
出
贵!!!
MPP
BigData
2008 -> 2013
大事记 大事记 大事记 大事记 大事记
加入SKY，负责数据库、存储。 业务发展迅猛。 PG9.0发布，支持物理复制ADG PG中文社区成立， 最后一台小型机下线
O:核心业务 上市准备。 O全部替换为PG， 第一届PG大会（暨南大学）
PG:社交业务 O逐渐替换为PG。 同年nasdaq上市
mongo:日志
2008 2009 2010 2011 2013
第一次提出去”IOE”
商业趋势
• 1、提高安全、合规、正版化意识是全球趋势
• 2、PG是用户去O开源数据库首选
• 语法、功能与O最接近
• 3、PG是厂商首选
• 与O最接近，避免重复造轮子，
• 避免重复构建生态
• 渠道型厂商，包装PG，快速布局线下市场
• 开源协议友好
目录
• PG和mongo的渊源
• 去O的大背景
• 去O难点
• PG+mongo的优势
• 参考资料
核心诉求
• 决策层诉求
• 去O理由（贵、技术路线、业务发展、政策、）、
• 额外动机（变革价值？）、
• O2?：
• 产品背书、
• 人才、
• Support、
• 产品生命力、
• 法律风险、
• 解决业务问题。
• 开发者诉求
• 使用习惯，学习成本
• 开发工具、框架、语言支持
• DBA诉求
• 使用习惯，学习成本
• 管理能力
• 稳定性、性能
PG 定位-企业级
开放接口：
OLTP、OLAP、
时空、GIS、图像
创
SMP并行计算、
文本、时序、
新
GPU并行计算、 向量相似、图谱
价
列存储、 混合 流计算、异构、
值 机器学习、
多模
JIT、向量计算
多维计算、shard
负载
Oracle
0丢失+高可用:
企业级
quorum based sync repl
商 社区版：
安全: 兼容
SSL\SQL防火墙插件\TDE(13)
orafce
用
弹性:
阿里云：
价 插件化 sharding(citus)
模块化扩展 POLARDB 兼容
值
性能:
Oracle版
32C TPCC 100万+
并行计算
武汉大学、
P G 生 态
人大、
...
超图、odoo、SAP、用友、
乘数科技、
金蝶、云堡垒机...
成都文武、