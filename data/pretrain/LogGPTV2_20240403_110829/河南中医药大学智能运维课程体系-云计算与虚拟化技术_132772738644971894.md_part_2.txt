### 1. 虚拟化技术概述
#### 1.2 虚拟化技术发展历程

**形成阶段**
- x86平台上的服务器虚拟化技术逐渐发展，存储虚拟化也从NAS/SAN向VTL演进。
- 网络虚拟化伴随着服务器虚拟化的兴起而出现。
- 1998年，VMware公司成立；1999年，Xen相关研究开始起步。
- 2001年，VMware推出基于RedHat 7.2的ESX Server，标志着VMware正式进入企业级虚拟化市场。
- 2000年，NAS和SAN技术的兴起推动了VTL、数据复制和重复数据删除等新技术的发展。

**商用阶段**
- 2005年8月，Intel首次公布了其硬件虚拟化技术细节，并于同年11月宣布VT技术已商用。
- 2006年5月，AMD推出了首款支持SVM硬件虚拟化技术的商用产品Athlon 64。

**成熟阶段**
- x86虚拟化技术进一步发展并广泛商用，市场竞争激烈。桌面和应用虚拟化成为新的热点。
- 2009年2月，Citrix发布了免费版的企业级XenServer平台，该平台具备管理工具XenCenter和实时迁移功能XenMotion。同年5月，Citrix更新了XenServer 5.5版本，增强了管理功能。2015年1月，Citrix发布了全64位的XenServer 6.5。
- 2009年3月，Cisco推出了统一计算系统（UCS），整合了服务器和网络硬件及管理软件。在同年8月的VMworld 2009大会上，Cisco UCS获得了硬件类金奖，展示了其在数据中心硬件整合方面的卓越能力。
- 2009年4月，VMware发布了vSphere 4.0，这是一款全面的虚拟化解决方案。目前最新版本为vSphere 6.7，而vSphere 5.5则是较为成熟的版本之一。
- 2009年5月，微软发布了Hyper-V R2，对第一代Hyper-V进行了重要改进，包括热迁移、集群共享卷等功能，使微软与VMware在虚拟化市场上的竞争更加激烈。

### 1.3 虚拟化技术的分类
虚拟化技术可以按照被虚拟化的资源类型进行分类，常见的类型包括：
- **服务器虚拟化**：将一台物理服务器划分为多个独立的虚拟服务器。
- **桌面虚拟化**：通过虚拟化技术提供远程访问的桌面环境。
- **存储虚拟化**：将多个存储设备抽象成一个逻辑存储池。
- **网络虚拟化**：通过虚拟化技术创建虚拟网络设备和连接。
- **应用虚拟化**：将应用程序与其底层操作系统解耦，实现灵活部署和管理。

### 2. 架构模式
#### 2.1 传统基础架构模式
传统的IT基础平台采用分散建设模式，典型做法是集中管理网络，根据业务重要性对数据进行分块存储和分级处理。然而，这种模式存在以下问题：
- 硬件资源利用率低下且资源紧张。
- IT资源部署周期长，难以快速响应业务需求。
- 机房空间和电力供应紧张。

#### 2.2 虚拟基础架构模式
虚拟基础架构利用一台或多台物理服务器作为资源池，借助虚拟化软件构建多个虚拟机平台。虚拟基础架构的优势包括：
- **标准化软硬件配置和资源部署流程**。
- **集中化管理**。
- **提高设备资源利用率**。
- **响应绿色行动计划**，减少空间占用和电力消耗。
- **自动化资源部署**，缩短系统交付时间。
- **全局资源共享**，提高系统整体可用性和数据安全性。
- **易于维护**。

### 3. 服务器虚拟化
#### 3.1 服务器虚拟化的概念
服务器虚拟化技术主要分为两类：
- **分区虚拟化**：将一台物理服务器划分为多个独立的逻辑服务器。
- **网格虚拟化**：将多台分散的物理服务器虚拟化为一个大的逻辑服务器。

本讲关注的是通过虚拟化层实现的服务器虚拟化，使得多个虚拟机在同一物理机上独立并行运行。每个虚拟机可以加载不同的操作系统和应用程序，并将其视为一组一致的标准化硬件。

#### 3.2 服务器虚拟化的层次
根据虚拟化层的实现方式，服务器虚拟化可分为寄居虚拟化和裸机虚拟化两种：

**寄居虚拟化**
- **虚拟机监控器（VMM）**：安装在宿主操作系统之上，负责管理虚拟机。
- **灵活性较差**：所有虚拟服务器必须运行同一操作系统。
- **性能较高**：由于使用单一标准操作系统，管理相对容易。

**裸机虚拟化**
- **Hypervisor**：直接运行在物理硬件之上，不依赖于宿主操作系统。
- **灵活性高**：每个虚拟机可以运行不同的操作系统。
- **性能较低**：需要额外的Hypervisor层来管理虚拟机。

**示例**
- 在采用服务器虚拟化之前，三个不同的操作系统及应用分别运行在三台独立的物理服务器上。
- 采用服务器虚拟化后，这三个操作系统及应用运行在三个独立的虚拟服务器上，而这三个虚拟服务器可以由一台物理服务器托管。

```
业务系统1   业务系统2   业务系统3
操作系统1   操作系统2   操作系统3
虚拟机1     虚拟机2     虚拟机3
物理服务器
```

**寄居虚拟化架构图**
```
客户1   客户2   客户3
虚拟机1 虚拟机2 虚拟机3
虚拟机管理器（VMM）
主机操作系统
物理机（底层硬件）
```

河南中医药大学 / 阮晓龙 / 13938213680 / http://cloud.xg.hactcm.edu.cn / http://www.51xueweb.cn