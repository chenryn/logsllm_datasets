title:A Longitudinal Characterization of Local and Global BitTorrent Workload
Dynamics
author:Niklas Carlsson and
Gy&quot;orgy D&apos;an and
Anirban Mahanti and
Martin F. Arlitt
A Longitudinal Characterization of Local
and Global BitTorrent Workload Dynamics
Niklas Carlsson1, Gy¨orgy D´an2, Anirban Mahanti3, and Martin Arlitt4,5
1 Link¨oping University, Sweden
2 KTH Royal Institute of Technology, Sweden
3 NICTA, Australia
4 HP Labs, USA
5 University of Calgary, Canada
Abstract. Workload characterization is important for understanding
how systems and services are used in practice and to help identify design im-
provements. To better understand the longitudinal workload dynamics of
chunk-based content delivery systems, this paper analyzes the BitTorrent
usage as observed from two diﬀerent vantage points. Using two simultane-
ously collected 48-week long traces, we analyze the diﬀerences in download
characteristics and popularity dynamics observed locally at a university
campus versus at a global scale. We ﬁnd that campus users typically down-
load larger ﬁles and are early adopters of new content, in the sense that they
typically download ﬁles well before the time at which the global popularity
of the ﬁles peak. The noticeable exception is music ﬁles, which the campus
users are late to download. We also ﬁnd that there typically is high churn
in the set of ﬁles that are popular each week, both locally and globally, and
that the most popular ﬁles peak signiﬁcantly later than their release date.
These ﬁndings provide insights that may improve the eﬃciency of content
sharing locally, and thus increase the scalability of the global system.
1
Introduction
Today, the Internet is heavily used for content delivery. To reduce the content
delivery cost, many scalable delivery techniques have been proposed. These in-
clude both server-based and peer-to-peer based designs. One promising approach
is to split large ﬁles into smaller chunks, and allow clients to download these
chunks in parallel from servers and/or other clients (i.e., their peers). While this
chunk-based approach has proven highly eﬀective, an open problem is how to
best manage large-scale content replication systems. For example, a content dis-
tributor may want to allocate and manage resources to best match the current
workload characteristics. One of the main reasons that this problem remains is
due to the adage that “You cannot manage what you do not measure.” In par-
ticular, the large scale of many of these content delivery systems have made the
task of measuring and understanding the relationships between the workloads
observed in diﬀerent parts of the network very challenging.
As a ﬁrst step towards understanding these distributed workload dynamics,
this paper analyzes BitTorrent usage as observed both locally and globally. Bit-
Torrent is the original and most successful chunk-based protocol. While the use
N. Taft and F. Ricciato (Eds.): PAM 2012, LNCS 7192, pp. 252–262, 2012.
c(cid:2) Springer-Verlag Berlin Heidelberg 2012
Global and Local Dynamics
253
of BitTorrent for sharing copyrighted material has resulted in the shutdown of
some large trackers and ﬁle hosting sites, the protocol is still responsible for a
sizable fraction of Internet traﬃc.
In this study, we measure BitTorrent content popularity from two diﬀerent
vantage points over a 48-week period. First, we used passive measurements to
capture all non-encrypted peer-to-tracker communication to/from a large uni-
versity campus. Second, we simultaneously used active measurements to perform
weekly “scrapes” of 721 unique BitTorrent trackers to extract a list of the ﬁles
each maintained information on (i.e., tracked). Overall, the two datasets pro-
vide the longitudinal popularity patterns for more than 50 thousand and 10
million torrents, respectively. Our analysis is the ﬁrst longitudinal multi-torrent
analysis, and the ﬁrst to capture the diﬀerences in the download characteristics
and popularity dynamics of a large set of ﬁles observed both locally and globally.
What makes this comparison particularly interesting is that there is a signiﬁcant
overlap in the ﬁles observed in the two datasets; 93.1% of the ﬁles downloaded
on campus were observed in the globally collected tracker-based dataset. This
overlap is a testament to the scope of our extensive global measurements.
Some of our key ﬁndings include: the campus users typically download larger
ﬁles, particularly movies and TV shows; they typically download ﬁles well before
the time at which the global popularity of the ﬁles peaks, with the exception
of music ﬁles, which the campus users are late to adopt and show little interest
for. These ﬁndings provide insights into what content in chunk-based systems
should be “cached” locally. This would not only improve the experience for users
on campus, but potentially increase the scalability of the global system as well.
While we ﬁnd that there typically is high churn in the set of ﬁles that are pop-
ular each week, both locally and globally, we observe that most of the popular
ﬁles in fact peak well after their initial use. This is in contrast to the behavior
predicted by ﬂash crowd models, which typically suggest that the popularity
peaks close to the release of a torrent [10,19]. Our results indicate that Bit-
Torrent experiences the eﬀects of the “rich-get-richer” phenomenon [1], which
suggests that the future popularity of a ﬁle is proportional to the current popu-
larity (to date) and ﬁles with many downloads in the past therefore will receive
relatively more downloads in the future. This is particularly encouraging for
chunk-based systems, which rely on peers to upload chunks that they already
have downloaded, and often perform worse under ﬂash crowds.
2 Related Work
Many measurement studies have looked at the characteristics of P2P content
popularity. A signiﬁcant number of works focused on the characteristics of con-
tent popularity over a ﬁxed time interval, e.g., the number of downloads or
the concurrent number of peers in swarms. Some of these works performed the
measurements locally at ISPs or university campuses using deep packet inspec-
tion [9,17]. Other works used global measurements to characterize the popularity
of contents over a time interval, e.g., through monitoring search requests [12,11],
254
N. Carlsson et al.
or by performing tracker scrapes [7,20,19]. Most of these studies show that the
popularity of contents shows Zipf-like characteristics.
A diﬀerent set of studies considered the performance dynamics of individual
swarms over time. These works were either based on measurements of global con-
tent popularity [2,13,14], or on measurements of local content popularity [10,16].
Such studies (e.g., [10,16]) indicate that typical swarms stop growing very soon
after their introduction, while a recent study by Zhang et al. [19] suggests that
most swarms continue to grow after their major ﬂash crowd ends.
Content popularity has been considered in many other contexts too. The ma-
jority of these works have considered the ﬁle popularity distribution over a time
interval and for a speciﬁc system. For example, Zipf-like ﬁle popularity was found
to apply to Web objects [4], to user generated content [6,5,8] and to on-demand
streaming media [18]. Other studies have looked at the temporal evolution of pop-
ularity based on a single system, e.g., for the case of social media [15,3].
In contrast to the above, our work is the ﬁrst to capture and to compare the
temporal popularity dynamics as observed locally (through passive measure-
ments) and globally (through active measurements) for a content distribution
system. Furthermore, to the best of our knowledge both datasets analyzed here
are among the most comprehensive measurement datasets of torrent popularity.
3 Methodology
3.1 BitTorrent Overview
To facilitate scalable and eﬃcient ﬁle sharing, BitTorrent splits content (ﬁles)
into many small chunks. Each chunk may be downloaded from other peers down-
loading the same content. Volunteer trackers maintain state information about
all peers that currently have chunks of a speciﬁc ﬁle. A peer that wants to down-
load a ﬁle can learn about the peers sharing that content by contacting such a
tracker. Upon request, the tracker provides the peer with a subset of the known
peers. In exchange, the peer has to provide the tracker with information about
its download progress. Additionally, the peers must inform the tracker about
changes in their status (i.e., when they join or leave).
Peers typically learn about trackers by downloading a .torrent ﬁle from a
regular Web server, or from a torrent search engine. Users may download these
.torrent ﬁles from many sites, and many trackers may be involved in helping the
local peers. The message format and information communicated to the trackers
is protocol speciﬁc. In this paper, we leverage the protocol speciﬁcations to
capture the information communicated to the trackers in the peer-to-tracker
communication.
3.2 University Campus Measurements
Our ﬁrst dataset is a trace of all non-encrypted peer-to-tracker communica-
tion at the University of Calgary. This university has approximately 35,000 fac-
ulty, staﬀ and students. The data were collected between Sept. 15, 2008 and
Global and Local Dynamics
255
Table 1. Summary of datasets
Property
Trackers
Torrents
Downloads
HTTP requests
Start date
End date
Frequency
University
Global
Mininova
(tracker communication) (tracker scrapes) (screen scrapes)
2, 371
56, 963
1.73M
249M
721
11.2M
37.0B
–
1, 690
911, 687
–
–
Sep. 15, 2008
Aug. 17, 2009
All requests
Sep. 15, 2008
Aug. 17, 2009
Weekly scrapes
Sept. 2008
Aug. 2009
Twice
Aug. 17, 2009. The measurements were collected using a Bro1 script that ex-
tracts the application-layer information about all HTTP transactions across the
University’s Internet link in real time.
For the purpose of this paper, we focus on one speciﬁc type of HTTP trans-
action. In particular, we look at all peer-to-tracker HTTP requests. These trans-
actions can easily be identiﬁed, as the URIs of these requests contain the strings
“peerID”, “info hash”, etc. The URI also contains other useful information, such
as the amount of content downloaded and uploaded thus far to/from the peer. As
a download typically consists of a sequence of these requests, we can track the
ﬁle sharing progress as reported (to the diﬀerent trackers). We do not analyze the
data that the peers downloaded, or otherwise try to assess the indirect impact the
content itself may have on the observed ﬁle popularities and system dynamics.
Our anonymized traces do not allow us to identify individual users across
downloads, but we could identify that most of the downloads were associated
with recent versions of the Vuze (52.78%) and µTorrent (23.7%) clients. Other
common clients where Tranmission (10.6%), the mainline client (5.7%) and Bit-
Comet (4.2%). A more ﬁne grained classiﬁcation augmented with information
about which clients had implemented various extension protocols, suggested that
up to 97.5% of the downloads may have been done by a peer that implemented
the peer-exchange protocol (PEX) and the DHT functionality. While these func-
tionalities may reduce the peers’ incentive for peer-to-tracker communication,
these standard clients are expected to follow the BitTorrent standards and pe-
riodically communicate with the trackers.
3.3 Global Tracker-Based Measurements
Our second dataset is tracker-based, and provides a global view of content
popularity. This dataset is obtained using two kinds of measurements. First,
we performed “screen scrapes” (i.e., systematically extracted information from
Web pages that would normally be viewed on a screen) of the torrent search
engine www.mininova.org, the most popular torrent search engine according to
1
http://www.bro-ids.org/
256
N. Carlsson et al.
r
e
k
c
a
r
t
r
e
p
t
n
u
o
C
106
105
104
103
102
101
100
Unique downloads
Unique torrents
 1
 10
 100
 1000
Rank (tracker)
100
80
60
40
20
)
%
l
(
s
d
a
o
n
w
o
d
r
e
v
o
F
D
C
0
 1
University
Global
 10
 100
 1000
 10000  100000
File size (MB)
Fig. 1. Tracker
tracker, as observed from the University
load and content per
Fig. 2. File size distributions for university
and global dataset
)
%
(
s
d
a
o
n
w
o
D
l
University
Global
60
45
30
15
0
i
e
m
n
A
i
s
k
o
o
B
s
e
m
a
G
i
s
e
v
o
M
i
c