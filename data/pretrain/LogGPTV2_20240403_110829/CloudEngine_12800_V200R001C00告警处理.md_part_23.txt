threshold. (IfIndex=[IfIndex], VlanIndex=[VlanIndex], VsiIndex=[VsiIndex],
Interface=[IfName], VlanID=[VlanId], DiscardedNumber=[DiscardPktAccount])
在不信任接口丢弃的DHCP Reply报文数目超过阈值。
Trap 属性
Trap属性 描述
Alarm or Event Event
文档版本 06 (2017-09-12) 华为专有和保密信息 164
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 11 DHCP Snooping
Trap属性 描述
Trap Severity Warning
Mnemonic Code hwUntrustedReplyPktAlarm
Trap OID 1.3.6.1.4.1.2011.5.25.112.2.4
Alarm ID 该Trap是事件Trap，不涉及告警ID。
Alarm Type 该Trap是事件Trap，不涉及告警类型。
Raise or Clear 该Trap是事件Trap，不涉及告警产生或恢复。
Match trap 该Trap是事件Trap，不涉及配对Trap。
Trap Buffer 信息参数
参数名称 参数含义
IfIndex 接口索引。
VlanIndex VLAN索引。
VsiIndex VSI索引。
Interface 接口名称。
VlanID VLAN编号。
DiscardedNumber 丢弃的报文数量。
VB 信息参数
VB OID VB Name VB Index
1.3.6.1.4.1.2011.5.25.112.1. hwDhcpSnpStatisticIfDescr hwDhcpSnpIfIndex;
15.1.1
hwDhcpSnpVlanIndex;
hwDhcpSnpVsiIndex;
1.3.6.1.4.1.2011.5.25.112.1. hwDhcpSnpStatisticVlanId hwDhcpSnpIfIndex;
15.1.2
hwDhcpSnpVlanIndex;
hwDhcpSnpVsiIndex;
1.3.6.1.4.1.2011.5.25.112.1. hwUntrustedReplyPktNum hwDhcpSnpIfIndex;
15.1.7
hwDhcpSnpVlanIndex;
hwDhcpSnpVsiIndex;
文档版本 06 (2017-09-12) 华为专有和保密信息 165
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 11 DHCP Snooping
对系统的影响
该告警表明网络中存在非法的DHCP服务器，它会发送错误的IP地址给DHCP客户端，
导致客户端无法正常通信。但在配置了信任接口后，非法服务器的应答报文将被丢
弃，不会影响客户端正常通信。
可能原因
网络中存在非法的DHCP服务器发送DHCP Reply报文给客户端。
处理步骤
l 请收集日志文件，并联系技术支持人员。
----结束
11.3 DHCPSNP_1.3.6.1.4.1.2011.5.25.112.2.5
hwNomatchSnpBindTblDhcpPktAlarm
Trap Buffer 信息解释
The number of the discarded DHCP request packets that did not match the binding table
exceeded the threshold on the interface. (IfIndex=[IfIndex], VlanIndex=[VlanIndex],
VsiIndex=[VsiIndex], Interface=[IfName], VlanID=[VlanId],
DiscardedNumber=[DiscardPktAccount])
接口上丢弃的与绑定表不匹配的DHCP请求报文数目超过阈值。
Trap 属性
Trap属性 描述
Alarm or Event Event
Trap Severity Warning
Mnemonic Code hwNomatchSnpBindTblDhcpPktAlarm
Trap OID 1.3.6.1.4.1.2011.5.25.112.2.5
Alarm ID 该Trap是事件Trap，不涉及告警ID。
Alarm Type 该Trap是事件Trap，不涉及告警类型。
Raise or Clear 该Trap是事件Trap，不涉及告警产生或恢复。
Match trap 该Trap是事件Trap，不涉及配对Trap。
文档版本 06 (2017-09-12) 华为专有和保密信息 166
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 11 DHCP Snooping
Trap Buffer 信息参数
参数名称 参数含义
IfIndex 接口索引。
VlanIndex VLAN索引。
VsiIndex VSI索引。
Interface 接口名称。
VlanID VLAN编号。
DiscardedNumber 丢弃的报文数量。
VB 信息参数
VB OID VB Name VB Index
1.3.6.1.4.1.2011.5.25.112.1. hwDhcpSnpStatisticIfDescr hwDhcpSnpIfIndex;
15.1.1
hwDhcpSnpVlanIndex;
hwDhcpSnpVsiIndex;
1.3.6.1.4.1.2011.5.25.112.1. hwDhcpSnpStatisticVlanId hwDhcpSnpIfIndex;
15.1.2
hwDhcpSnpVlanIndex;
hwDhcpSnpVsiIndex;
1.3.6.1.4.1.2011.5.25.112.1. hwNomatchSnpBindTblDhc hwDhcpSnpIfIndex;
15.1.6 pPktNum
hwDhcpSnpVlanIndex;
hwDhcpSnpVsiIndex;
对系统的影响
该告警表明网络中存在仿冒DHCP请求报文的攻击。但在配置了绑定表匹配检查后，非
法DHCP请求报文将被丢弃，不会影响业务运行。
可能原因
网络中存在仿冒者仿造客户端信息与DHCP服务器通信。
处理步骤
l 请收集日志文件，并联系技术支持人员。
----结束
文档版本 06 (2017-09-12) 华为专有和保密信息 167
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 11 DHCP Snooping
11.4 DHCPSNP_1.3.6.1.4.1.2011.5.25.112.2.6
hwDhcpPktRateAlarm
Trap Buffer 信息解释
The rate of DHCP packets exceeded the speed limit.
(DiscardedNumber=[DiscardPktAccount])
因超过DHCP报文速率限制而丢弃的DHCP报文数目超过阈值。
Trap 属性
Trap属性 描述
Alarm or Event Event
Trap Severity Warning
Mnemonic Code hwDhcpPktRateAlarm
Trap OID 1.3.6.1.4.1.2011.5.25.112.2.6
Alarm ID 该Trap是事件Trap，不涉及告警ID。
Alarm Type 该Trap是事件Trap，不涉及告警类型。
Raise or Clear 该Trap是事件Trap，不涉及告警产生或恢复。
Match trap 该Trap是事件Trap，不涉及配对Trap。
Trap Buffer 信息参数
参数名称 参数含义
DiscardedNumber 丢弃的报文数量。
VB 信息参数
VB OID VB Name VB Index
1.3.6.1.4.1.2011.5.25.112.1. hwDhcpPktRateDiscardNu N/A
11 m
对系统的影响
该告警表明网络中存在大量的DHCP报文。但在配置了DHCP报文速率检查功能后，超
过DHCP报文限制速率的报文将被丢弃，可能会丢弃合法用户的DHCP报文，导致合法
用户无法正常上线。
文档版本 06 (2017-09-12) 华为专有和保密信息 168
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 11 DHCP Snooping
可能原因
网络中存在攻击者恶意发送大量的DHCP报文。
处理步骤
l 请收集日志文件，并联系技术支持人员。
----结束
文档版本 06 (2017-09-12) 华为专有和保密信息 169
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 12 DLDP
12
DLDP
关于本章
12.1 DLDP_1.3.6.1.4.1.2011.5.25.173.3.1 hwDldpUnidirectionalLink
12.2 DLDP_1.3.6.1.4.1.2011.5.25.173.3.2 hwDldpLinkResume
相关主题
HUAWEI-DLDP-MIB
文档版本 06 (2017-09-12) 华为专有和保密信息 170
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 12 DLDP
12.1 DLDP_1.3.6.1.4.1.2011.5.25.173.3.1
hwDldpUnidirectionalLink
Trap Buffer 信息解释
Link layer state of the port changed to one way. (IfIndex=[IfIndex], IfName=[IfName],
FaultReason=[FaultReason])
在以下两种情况下检测到单通状态就会发送告警。
·单邻居的情况：两个设备互连，其中一个设备可以收到对端设备的报文，但是对端
却收不到本端设备发送的报文，这种链路称之为单向链路，该设备进入单通状态，这
个设备就会发送单通告警。
·多邻居的情况：某一个设备如果发现它的一个邻居处于单通状态，或者收到disable
报文，该设备就会进入单通状态，该设备会发送单通告警。
Trap 属性
Trap属性 描述
Alarm or Event Alarm
Trap Severity Critical
Mnemonic Code hwDldpUnidirectionalLink
Trap OID 1.3.6.1.4.1.2011.5.25.173.3.1
Alarm ID 0x09aa0000
Alarm Type communicationsAlarm
Raise or Clear Raise
Match trap DLDP_1.3.6.1.4.1.2011.5.25.173.3.2 hwDldpLinkResume
Trap Buffer 信息参数
参数名称 参数含义
IfIndex 发生单通状态告警的接口索引。
Ifname 发生单通状态告警的接口名称。
文档版本 06 (2017-09-12) 华为专有和保密信息 171
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 12 DLDP
VB 信息参数
VB OID VB Name VB Index
1.3.6.1.4.1.2011.5.25.173.2. hwDldpTrapInterfaceIndex None
1
1.3.6.1.4.1.2011.5.25.173.2. hwDldpTrapIfName None
2
1.3.6.1.4.1.2011.5.25.173.2. hwDldpTrapFaultReason None
3
对系统的影响
业务无法在单通链路上正常运行。
可能原因
可能的原因有：
l 原因1：single-channel.（单纤故障）
l 原因2：complect-channel.（光纤交叉连接）
l 原因3：error-loopback.（接口错误环回）
l 原因4：control-packet.（控制报文即disable和link-down导致接口阻塞）
处理步骤
l 原因1：single-channel.
a. 执行display interface interface-type interface-num命令，检查相邻设备直连接口
物理状态是否为Down。
n 如果为Down，则请执行步骤2。
n 如果不为Down，则请执行步骤5。
b. 检查相邻设备直连接口Rx线是否松动。
n 如果是，则请执行步骤3。
n 如果不是，则请执行步骤5。
c. 将相邻设备直连接口的Rx线重新插上。
d. 查看告警是否恢复。
n 如果告警没有恢复，则请执行步骤5。
n 如果告警恢复，则请执行步骤6。
e. 请收集告警信息、日志信息和配置信息，并联系技术支持人员。
f. 结束。
l 原因2：complect-channel.
a. 检查相邻设备直连接口Tx/Rx线是否配对相连。
n 如果不配对，则请执行步骤2。
文档版本 06 (2017-09-12) 华为专有和保密信息 172
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 12 DLDP
n 如果配对，则请执行步骤4。
b. 将相邻设备直连接口的Tx/Rx线配对相连。
c. 查看告警是否恢复。
n 如果告警没有恢复，则请执行步骤4。
n 如果告警恢复，则请执行步骤5。
d. 请收集告警信息、日志信息和配置信息，并联系技术支持人员。
e. 结束。
l 原因3：error-loopback.
a. 1. 检查故障接口Tx线是否直接插入了本接口的Rx口。
n 如果是，则请执行步骤2。
n 如果不是，则请执行步骤4。
b. 将故障接口的Tx/Rx线重新与目标设备相连。
c. 查看告警是否恢复。
n 如果告警没有恢复，则请执行步骤4。
n 如果告警恢复，则请执行步骤5。
d. 请收集告警信息、日志信息和配置信息，并联系技术支持人员。
e. 结束。
l 原因4：control-packet.
a. 执行display dldp命令，检查相邻设备直连接口是否处于disable状态。
n 如果不是，则请执行步骤2。
n 如果是，则请执行步骤3。
b. 在对端设备上执行display interface interface-type interface-num命令，查看对端
设备接口是否处于物理Down状态。
n 如果是，则请执行步骤4。
n 如果不是，则请执行步骤5。
c. 查看对端设备接口的故障原因，并根据原因处理故障，查看故障接口告警是
否恢复。
n 如果告警没有恢复，则请执行步骤5。
n 如果告警恢复，则请执行步骤6。
d. 查看物理链路是否松动。
n 如果是，请重新插拔光纤使其物理Up，并请执行步骤5。
n 如果不是，则请执行步骤6。
e. 查看本端设备告警是否恢复。
n 如果告警没有恢复，则请执行步骤5。
n 如果告警恢复，则请执行步骤6。
f. 请收集告警信息、日志信息和配置信息，并联系技术支持人员。
g. 结束。
----结束
文档版本 06 (2017-09-12) 华为专有和保密信息 173
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 12 DLDP