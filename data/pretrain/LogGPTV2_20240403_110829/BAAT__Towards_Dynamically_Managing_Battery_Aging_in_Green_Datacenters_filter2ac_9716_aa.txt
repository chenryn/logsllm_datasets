title:BAAT: Towards Dynamically Managing Battery Aging in Green Datacenters
author:Longjun Liu and
Chao Li and
Hongbin Sun and
Yang Hu and
Juncheng Gu and
Tao Li
2015 45th Annual IEEE/IFIP International Conference on Dependable Systems and Networks
2015 45th Annual IEEE/IFIP International Conference on Dependable Systems and Networks
BAAT: Towards Dynamically Managing  
Battery Aging in Green Datacenters  
Longjun Liu1,3, Chao Li2, Hongbin Sun1,*, Yang Hu3, Juncheng Gu3 and Tao Li3 
1 School of Electrical and  
Information Engineering  
Xi’an Jiaotong University, China 
PI:EMAIL  
PI:EMAIL 
2 Department of Computer 
Science and Engineering 
 Shanghai Jiao Tong University  
Shanghai, China 
PI:EMAIL 
3 Department of Electrical and  
Computer Engineering  
University of Florida, USA 
 {huyang.ece, gujuncheng}@ufl.edu 
PI:EMAIL 
Abstract—  Energy  storage  devices  (batteries)  have  shown 
great promise in eliminating supply/demand power mismatch 
and  reducing  energy/power  cost  in  green  datacenters.  These 
important components progressively age due to irregular usage 
patterns, which result in less effective capacity and even pose 
serious  threat  to  server  availability.  Nevertheless,  prior 
proposals largely ignore the aging issue of batteries or simply 
use  ad-hoc  discharge  capping  to  extend  their  lifetime.  To  fill 
this critical void, we thoroughly investigate battery aging on a 
heavily instrumented prototype over an observation period of 
six months. We propose battery anti-aging treatment (BAAT), 
a  novel  framework  for  hiding,  reducing,  and  planning  the 
battery aging effects. We show that BAAT can extend battery 
lifetime  by  69%.  It  enables  datacenters  to  maximally  utilize 
energy  storage  resources  to  enhance  availability  and  boost 
performance.  Moreover,  it  reduces  26%  battery  cost  and 
allows datacenters to economically scale in the big data era. 
Keywords—  Battery  Aging,  Analysis,  Green  Datacenters, 
Power Management, System Prototype 
I.  INTRODUCTION 
The growing adoption of massive distributed batteries at the 
server  rack  level  could  fundamentally  transform  the  way  we 
manage  datacenter  power  and  energy  [1-3].  For  example, 
distributed  batteries  are  important  energy  buffers  in  several 
topical  studies  that  exploit  renewable  energy  resources  for 
capping datacenter carbon footprint [4, 5]. They are also the key 
enablers that allow datacenters to smooth out load power peaks 
to  greatly  reduce  total  cost  [6,  7].  In  general,  these  critical 
energy  storage  devices  can  help  today’s  power-constrained 
datacenter servers maintain a continuous balance between power 
supply  and  demand,  thereby  protecting  sensitive  loads  from 
possible  power  disturbances.  As  a  result,  the  world-wide 
installed renewable energy battery is projected to increase by 22 
GW  in  the  next  decade  [8],  which  almost  matches  the  global 
server power demand today [9].  
With  the  dramatic  increase  in  their  quantity,  size,  and 
utilization frequency in datacenters, batteries start to become the 
major design bottleneck. Most of the prior works in this context 
focus on managing server power demand [4-7, 10-13], whereas 
the battery aging effect in datacenters has been largely ignored. 
However,  batteries  progressively  and  inevitably  age.  Without 
smart  control,  datacenter  operators  may  incur  very  high 
maintenance and replacement cost. Even  worse, aged  batteries 
often lose their effective energy storage capacity and may fail to 
handle emergency events, which poses  serious threat to server 
availability.  Therefore,  if  the  aging  issues  are  overlooked,  the 
benefits of carbon emission capping and cost reduction brought 
by batteries can be significantly compromised. 
*Corresponding author: Hongbin Sun.  
978-1-4799-8629-3/15 $31.00 © 2015 IEEE
978-1-4799-8629-3/15 $31.00 © 2015 IEEE
DOI 10.1109/DSN.2015.43
DOI 10.1109/DSN.2015.43
307
307
Battery 
Cabinets
Local Power
Utility Power
Fig. 1. Distributed energy storage devices in emerging green datacenters 
Modular Datacenters
Server Racks
in  Figure  1,  we 
In the past, battery aging or wear-out issues have been well 
studied  by  the  electrochemistry  research  community  with  the 
aim  of  improving  a  battery’s  internal  design  [14-19].  When 
batteries  are  massively  deployed  in  datacenters,  new  aging-
aware  power  management  strategies  at  computer  architecture 
and system levels are highly desired.  
  One goal of this paper is to establish an understanding of the 
battery aging mechanism from a system designer’s perspective. 
As  shown 
investigate  emerging  green 
datacenters that rely on energy storage devices to jointly store 
green  energy  and  shave  load  power  spikes.  In  contrast  to 
conventional  batteries  mainly  deployed  for  handling  power 
outages (rarely used), batteries in green datacenters often incur 
cyclic  usage,  i.e.,  they  are  charged  and  discharged  in  a  much 
more  frequent  and  irregular  manner.  In  addition,  distributed 
battery  units  also  incur  significant  aging  variations  due  to 
imperfect  manufacturing  process  and  different  server  load 
power behaviors. To manage battery aging in such a dynamic, 
complex  environment,  it  is  critical  to  identify  key  factors  that 
correlate with battery aging and develop a holistic management 
strategy that can capture various anti-aging opportunities. 
In this study we conduct a thorough battery aging analysis 
based on our one-year deployment experience on a state-of-the-
art  green  datacenter  prototype.  Our  scaled-down  system 
combines  a  Xeon-based  server  cluster,  solar  panels,  a 
professionally  assembled  battery  array,  and  a  software 
management  console  built  from  scratch.  For  over  six  months, 
we  continuously  monitor  detailed  battery  usage  events  and 
investigate a diverse set of factors that may induce aging.  
  We propose battery anti-aging treatment (BAAT), an aging-
aware  power  management  framework  for  better  coordinating 
massive amount of batteries in green datacenters. The novelty of 
BAAT is two-folded: 1)  it is able to sense the synergistic effect 
of multiple aging factors to assess battery aging; 2) it can further 
leverage a multifaceted approach to manage battery aging at the 
system/architecture level.  
Specifically, BAAT offers three key benefits. First, it hides 
battery aging variation within datacenter. When datacenter adds 
new workloads or consolidates existing workloads, BAAT can 
intelligently identify battery units that wear out much faster than 
others.  It  can  balance  the  aging  effect  across  the  battery  units 
through an aging-driven load management policy. Second, it can 
slow  down  the  battery  aging  process  in  cases  that  a  battery  is 
prone  to  wear  out,  e.g.,  when  it  is  frequently  used  under  low 
state of charge (SoC). BAAT leverages workload migration and 
power  capping  mechanisms  at  critical  points 
to  avoid 
aggressively  discharging  batteries.  Third,  BAAT  can  further 
gainfully plan the battery aging speed to synchronize battery life 
with the end-of-life of IT systems. It proactively predicts battery 
lifetime and trades off unnecessary battery service life for better 
datacenter productivity.  
To the best of our knowledge, this is the first extensive study 
of battery aging in emerging green datacenters. The challenges 
for  BAAT  to  dynamically  and  intelligently  manage  battery 
aging primarily stem from the following four aspects: 1) how to 
assess various battery aging degrees; 2) how to select a battery 
whose aging should be hidden; 3) how to balance battery aging 
and  workload  performance;  4)  how  to  fully  unleash  the 
performance  potential  of  green  datacenter  via  planned  battery 
aging.  This  paper  solves  these  obstacles  and  makes  the 
following contributions:  
(cid:120)  We  investigate  a  diverse  set  of  battery  aging  factors  and 
formulate  five  metrics  (i.e.  Ah  throughput,  charge  factor, 
partial charging, deep discharge time, and discharge rate). 
These  metrics  provide  an  effective  way  to  dynamically 
evaluate battery aging at the system level.  
(cid:120)  We  propose  BAAT,  the  first  battery  aging  management 
framework  tailored  for  green  datacenters.  BAAT  tackles 
battery aging, an important, yet so-far overlooked issues in 
green  datacenters.  It  features  a  multifaceted  approach  to 
managing battery aging.  
(cid:120)  We  build  up  a  prototype  and  describe  the  details  of  our 
implementation.  We  analyze  battery  aging  based  on  real 
deployment  experience  over  six  months.  We  evaluate  the 
effectiveness  of  BAAT  and  show  that  it  can  improve 
battery lifetime by 69%, reduce battery deprecation cost by 
26%, and boost performance by 28%.  
  The  rest  of  this  paper  is  organized  as  follows.  Section  2 
introduces  distributed  batteries  in  green  datacenters  and  their 
aging  mechanisms.  Section  3  formulates  the  battery  aging 
impact  factors.  Section  4  elaborates  BAAT  architecture  and 
aging  management  schemes.  Section  5  describes  experimental 
methodology.  Section  6  presents  evaluation  results.  Section  7 
discusses related work and Section 8 concludes this paper. 
II.  BACKGROUND 
In this section, we first introduce battery usage scenarios in 
the  state-of-the-art  datacenter  design.  We  then  provide  an 
overview of the battery aging mechanisms.  
A.  Battery Deployment in Datacenters 
Many recent designs start to shift battery system from the 
datacenter level to the server rack level, as shown in Figure 2. 
One  of  the  primary  reasons  is  that  such  a  distributed  battery 
system  reduces  power  conversion  loss  and  provides  a  way  to 
manage  power  in  a  fine-grained  manner.  For  example, 
Facebook  proposes  both  external  battery  and  in-rack  battery 
designs  in  their  Open  Rack  project  [3].  Microsoft’s  in-rack 
battery design uses at least two sets of battery packs to provide 
short-term  backup  [2].  To  improve  datacenter  power  usage 
effectiveness (PUE), Google has also tested in-server lead-acid  
308308
AC
DC
Server 
Bay
Power 
Shelf
Battery Unit
(in dark gray)
External Battery Cabinet 
 In-rack Battery
 In-server Battery  
Fig 2. Different methods for integratng battery with computer servers  
TABLE I.   DIFFERENT BATTERY USAGE SCENARIOS IN DATACENTERS 
Usage  
Objective 
Power Backup 
Demand Response 
Power Smoothing 
Aging 
Speed 
Light 
Usage  
Frequency 
Rarely 
Occasionally  Medium  Medium 
Cyclically 
Aging 
Variation 
Small 
Severe 
Large 
batteries  [1].  Several  researchers  at  Hitachi  have  compared 
different battery integration methods in [20].  
Meanwhile, datacenters are aggressively exploiting battery 
for reducing cost and improving sustainability. This is different 
from  conventional  designs  that  mainly  use  battery  to  provide 
power backup upon a grid outage. For example, batteries allow 
datacenters to shift load power, referred to as demand response 
[21].  By  re-shaping  server  power  demand,  primarily  shaving 
power peaks, there are considerable opportunities for reducing 
operational cost (deferring loads to non-peak tariffs) and capital 
cost (under-provision the power infrastructure). 
In addition, datacenters are forced to integrate eco-friendly 
source  of  power  (solar/wind  energy)  due  to  the  ever-growing 
concern on greenhouse gas emission and global climate change. 
Unlike  the  stable  supply  of  grid  power,  renewable  energy 
generation  is  intermittent  and  it  is  not  suitable  to  be  directly 
consumed  by  datacenter  servers.  To  avoid  power  brownout, 
inexpensive lead-acid batteries are used to smooth the variable 
renewable power supply [4, 5]. 
As  new  architecture  emerges  and  usage  pattern  evolves, 
batteries have become the Achilles’s heel in green datacenters. 
In  Table-1  we  briefly  summarize  different  battery  usage 
scenarios.  In  contrast  to  conventional  battery  systems  used  in 
emergency (rarely occurred and only lasts a few minutes [22]), 
emerging battery provisioning schemes result in a much higher 
charging/discharging rate that hastens battery aging. Thus, it is 
necessary 
to  understand  battery  aging  mechanisms  and 
intelligently manage the battery aging issue in datacenters. 
B.  Battery Aging Mechanisms 
Battery aging refers to the processes of gradual deterioration 
of inner materials and the irreversible chemical reactions within 
the  battery  [16].  Different  types  of  batteries  (e.g.,  lithium-ion, 
nickel-cadmium, 
aging 
mechanisms. This study primarily focuses on lead-acid batteries, 
which account for over 97% of industry batteries [23]. They are 
widely deployed in datacenters due to their maturity, low cost, 
and easy maintenance. 
lead-acid)  have  different 
1)  Grids  Corrosion.  The  high  positive  potential  at  the 
positive  electrode  can  result  in  lead  grid  corrosion.  The  aging 
processes  cause  the  cross-section  of  the  grid  to  decrease  and 
grid  resistance  to  increase.  Consequently,  the  battery  voltage 
drops  and  the  maximum  energy  that  can  be  stored  becomes 
lower. The corrosion rate depends on the acid density, electrode 
polarization and battery temperature [24]. 
and 
)
V
(
e
g
a
t
l
o
V
l
i
a
n
m
r
e
T
28.5
28
27.5
27
26.5
26
25.5
25
Apr. May Jun.
Jul. Aug. Sep. Oct.
Fig 3. Measured battery voltage drop 
due to aging over 6 months 
f
o
y
g
r
e
n
E
d
e
g
r
a
h
C
)
h
A
(
l
e
c
y
C
h
c
a
E
37
35
33
31
29
27
25
Apr. May Jun. Jul. Aug. Sep. Oct.