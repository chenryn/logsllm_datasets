令。
aptitude命令是最通用的基于APT的软件包管理工具。
• aptitude提供了一个全屏的交互式文本用户界面。
• aptitude同样也提供了一个命令用户界面。
• aptitude是用于日常软件包管理（例如检查已安装的软件包和搜索可用的软件包）的最合适工具。
• aptitude对硬件资源的要求更高。它消耗更多的内存并且运行速度更慢。
• aptitude提供一个增强的正则表达式来搜索所有的软件包元数据。
• aptitude可以管理软件包的多个版本，并且不使用/etc/apt/preferences，这会十分直观。
2.2.2 命令行中的基础软件包管理操作
下面是使用apt(8),aptitude(8)和apt-get(8)/apt-cache(8)的命令行基本软件包管理操作。
apt/apt-get和aptitude能够混用，没有大问题。
“aptitude why regex”可以通过“aptitude -v why regex”列出更多的信息。类似的信息可以通过”apt
rdepends package”或“apt-cache rdepends package”获取。
当aptitude命令在命令行模式下启动后遇到了一些问题（例如软件包冲突），你可以在之后的提示中按下“e”键切
换到全屏的交互模式。
注意
虽然aptitude命令提供了丰富的功能，例如增强的软件包解析器，但它的复杂程度导致了（或可能导致）一些退
步，例如Bug#411123、Bug#514930及Bug#570377。如有疑问，请使用apt,apt-get和apt-cache命令来
替代aptitude命令。
你可以在“aptitude”后面使用的命令选项。
更多内容参见aptitude(8)和位于“/usr/share/doc/aptitude/README”的“aptitude用户手册”。
2.2.3 aptitude 的交互式使用
要使用交互式的软件包管理，你可以像下面那样以交互模式启动aptitude。
$ sudo aptitude -u
Password:
这将更新档案库信息的本地副本，并以菜单的形式全屏显示软件包列表。aptitude将它的配置放在“~/.aptitude/config”。
Debian参考手册 48/233
apt-get
aptitude /
apt语法 说明
语法 apt-cache
语法
aptitude apt-get
apt update 更新软件包档案库元数据
update update
aptitude apt-get
apt install foo install install安装“foo”软件包的候选版本以及它的依赖
foo foo
aptitude apt-get
apt upgrade 安装已安装的软件包的候选版本并且不移除任何其它的软件包
safe-upgradeupgrade
apt aptitude apt-get安装已安装的软件包的候选版本，并且需要的话会移除其它的软
full-upgrade full-upgradedist-up件gr包ade
aptitude apt-get
apt remove foo remove remove 移除“foo”软件包，但留下配置文件
foo foo
apt-get
apt autoremove N/A 移除不再需要的自动安装的软件包
autoremove
apt-get
aptitude
apt purge foo purge 清除“foo”软件包的配置文件
purge foo
foo
aptitude apt-get
apt clean 完全清除本地仓库的软件包检索文件
clean clean
aptitude apt-get
apt autoclean 清除本地仓库中过时软件包的软件包检索文件
autoclean autoclean
apt-cache
aptitude
apt show foo show 显示“foo”软件包的详细信息
show foo
foo
aptitude apt-cache
apt search 正则
search search 搜索匹配regex的软件包
表达式
regex regex
aptitude
N/A N/A 解释匹配regex的软件包必须被安装的原因
why regex
aptitude
N/A why-not N/A 解释匹配regex的软件包不必安装的原因
regex
aptitude
apt list apt-mark
search 列出手动安装的软件包
--manual-installed showmanual
’~i!~M’
Table2.6: 使用apt(8),aptitude(8)和apt-get(8)/apt-cache(8)的命令行基本软件包管理操作
命令选项 说明
-s 模拟命令的结果
-d 仅下载，不进行安装/更新
-D 在自动安装和删除前，显示简要的说明
Table2.7: aptitude(8)中重要的命令选项
Debian参考手册 49/233
提示
如果你想用root的配置而非使用者的，可以在上面的例子中使用“sudo -H aptitude …”代替“sudo aptitude
…”。
提示
当aptitude以交互模式启动时，会自动设置待执行的动作。如果您不喜欢，您可以通过菜单：“动作”→“取消
待执行的动作”来取消它。
2.2.4 aptitude 的按键绑定
在全屏模式下浏览软件包状态和设置动作的按键如下。
快捷键 键绑定功能
F10或Ctrl-t 菜单
? 显示按键帮助（更加完整的清单）
F10→帮助→用户手册 显示用户手册
u 更新软件包档案库信息
+ 标记该软件包以便升级或安装
- 标记该软件包以便移除（保留配置文件）
_ 标记该软件包以便清除（移除配置文件）
= 将软件包设为保持状态
U 标记所有可升级包（动作如同full-upgrade）
g 开始下载并安装所选择包
q 退出该界面并保存变更
x 退出该界面并清除变更
Enter 查看软件包的信息
C 查看软件包的变更记录
l 变更软件包的显示限制
/ 搜寻匹配的第一个软件包
\ 重复上一个搜索
Table2.8: aptitude的按键绑定
可以通过命令行指定文件名称，也可以通过按“l”或“/”之后在菜单提示下输入下列所述的aptitude正则表达式。
aptitude正则表达式可以使用“~n”开头后接软件包名称的字符串来精确匹配软件包名称。
提示
你需要在可视化界面中按下“U”键让所有的已安装软件包升级到可用版本。否则只有选中的软件包和一些与之有
依赖关系的软件包才能被升级到可用版本。
2.2.5 aptitude 软件包视图
aptitude(8)全屏交互模式下，软件包列表里的软件包会像下面的例子那样显示。
idA libsmbclient -2220kB 3.0.25a-1 3.0.25a-2
该行的从左到右的含义如下。
•“状态”标签（第一个字母）
Debian参考手册 50/233
•“动作”标签（第二个字母）
•“自动”标签（第三个字母）
• 软件包名称
• 该“动作”对磁盘空间的变化
• 软件包当前版本
• 软件包可用版本
提示
您可以在帮助菜单中找到完整的标签列表，按“?”即可在帮助菜单底部显示。
可用版本的选择是依据当前的本地首选项（参见apt_preferences(5)和第 2.7.7 节）。
软件包视图的几种类型都可以在“视图 ”菜单下找到。
视图 视图描述
软件包视图 参见表 2.10(默认)
检查推荐结果 列出推荐安装但还没有安装的软件包
平面软件包列表 不分类地列出软件包(用于正则表达式)
Debtags 浏览器 列出由debtags进行分类的软件包
源代码软件包视图 列出由源代码软件包分组的软件包
Table2.9: aptitude视图
注意
请帮助我们改进用debtags标记的软件包！
标准“软件包视图”分类软件包的方法与带有一些额外功能的dselect有点像。
分类 视图描述
可升级软件包 按照section→area→软件包的顺序显示列出软件包
新软件包 同上
已安装软件包 同上
未安装软件包 同上
过期的和在本地创建的软件包 同上
虚拟软件包 列出同样功能的软件包
软件集 列出一个特定任务所需的不同功能的软件包
Table2.10: 标准软件包视图的分类
提示
软件集视图可以用来为你的任务选出最佳的软件包。
Debian参考手册 51/233
2.2.6 aptitude 搜索方式选项
aptitude提供了几个可以使用正则表达式来搜索软件包的选项。
• shell命令行：
–“aptitude search ’aptitude_regex’”列出安装状态、软件包名称和匹配软件包的剪短描述
–“aptitude show ’package_name’”列出软件包的详细描述
• 全屏交互模式:
– ”l”可以限制匹配软件包的视图
– ”/”搜索匹配的软件包
– ”\”向后搜索匹配的软件包
– ”n”查找下一个
– ”N”查找上一个
提示
字符串package_name被看作软件包名称的精确字符串匹配，除非它是以”~”开头的正则表达式。
2.2.7 aptitude 正则表达式
aptitude正则表达式是类mutt的拓展ERE（参见第 1.6.2 节），aptitude具体的特殊匹配规则扩展如下。
• 正则表达式使用的是ERE，就跟egrep(1)、awk(1)和perl(1)这些典型的类Unix文本工具中所使用的“^”“、.*”“、$”