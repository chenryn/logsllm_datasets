图10.1
攻击时间表：这是红队战役中的一个重要的部分，需要做充分的记录。时间表应充分描述所有主要事件、触发警报的检测时间以及主要的行动步骤。这将允许蓝队对比时间表和记录，查看有什么差距。在真正的攻击中，您能够询问攻击者所做的一切吗？这对防御蓝队非常有帮助。时间轴示例可能如图10.2所示。
图10.2
检测时间（TTD）/缓解时间（TTM）：通常我们可以使用蓝队报告中的TTD/TTM统计数据。总之，我们需要得到蓝队发现每次入侵的时间；扫描事件触发调查之前，经过了多长时间（如果有的话）；蓝队发现网络钓鱼活动需要多长时间。第二部分应讨论采取行动之前的时间统计数据。如果已经识别命令和控制通信或者网络钓鱼攻击，防火墙或DNS服务器阻止该域需要多少时间？我们经常看到公司可能擅长阻止域名，却无法阻止命令和控制服务器使用IP地址通信（反之亦然）。我们希望跟踪事件并且为客户识别事件。另一个重要的TTM衡量标准是他们能否快速隔离确定的突破系统。随着恶意软件变得越来越自动化，我们需要开始利用智能和自动化流程，将系统或网络的一部分与组织的其他部分隔离开。
来自应急响应/取证人员的反馈：我喜欢记录蓝队的反馈，也就是他们从防守的角度如何看待整个行动。我想要了解的是，如果蓝队按照安全防护的规定，由事件牵头人启动调查，管理层深度介入，安全部门与IT部门如何交互促使IT部门改变（防火墙拦截、DNS修改等），以及恐慌或保持冷静的人。
如前所述，红队的目的不是寻找漏洞或破坏环境（尽管这是有趣的部分），红队的目的是提升、改善组织的整体安全流程，并证明组织的安全环境存在某些差距。如今，许多公司对于安全流程过于自信，因此他们不会在被突破之前进行改变。通过红队，我们可以模拟攻击，鼓励做出改变，从而确保不会发生真实的攻击事件。
第11章 继续教育
我总是被问到的问题：“我现在该怎么办？我已阅读所有的“黑客秘笈”系列图书，参加了各种培训课程，并参加了很多会议！”。我现在可以给出的最好建议是，您应该开始从小的项目做起，并为安全社区做出贡献。这是真正测试您的技能的好方法。
下面列出了一些可能有用的想法。
设置博客和您自己的GitHub账户：您应该写下所有经历和学习内容，并与他人分享这些内容，这确实有益于您个人的成长。通过博客记录您所学习的内容将提高写作的能力，以一种更容易理解的方式解释漏洞/漏洞利用，确保您对内容的理解足够深刻，可以向其他人解释清楚。
您的简历应该是您的GitHub账户：我总是告诉我的学生，您的GitHub账户（或博客）应该能够独立存在。无论是各种小的安全项目，例如使得工具变得更高效和更有效，还是您自己的安全项目，您的工作都应该在GitHub上进行介绍。
在当地会议上发言：演讲可能会非常令人生畏，但如果您在简历上有演讲经历，您比其他人更容易进入安全领域。从哪里可以找到演讲的机会？我建议您从本地的聚会开始，找到可以参与的组织。这些组织通常很小，每个人都非常友好。如果您在加利福尼亚州南部地区，我创办并且经营LETHAL，这是一个社区性质的免费安全组织，组织成员每月见面一次。无论如何，参与其中！
Bug Bounties：无论您是攻击者还是防御者，赏金计划都可以真正地帮助您提升能力。HackerOne、BugCrowd和SynAck等Bug赏金计划可以免费注册。您不仅可以正大光明地赚到钱，还可以合法地破解目标网站（当然，需要在计划范围内）。
夺旗竞赛：我知道很难抽出时间做所有这些事情，但我总是告诉我的学生：安全不是工作：这是一种生活方式。访问CTFtime.org，挑选一些CTF比赛，在那些周末开始比赛，然后开始攻击。相信我，您在CTF周末可以学到更多的内容，比任何课程都多。
与您的朋友一起建立一个实验室：在测试实验室模拟公司环境，如果没有这样的测试环境，则很难在实际场景中开展行动。如果没有这个测试环境，那么在运行各种攻击性工具时，您将无法真正了解背后发生的事情。因此，必须构建一个全面的实验室，其中包含虚拟局域网、活动目录、服务器、GPO、用户和计算机、Linux环境、Puppet、Jenkins，以及您可能看到的所有其他常用工具。
向对手学习：对于红队来说，这是一个很重要的因素。我们的行动不应该是理论上的，而是复制另一次真正的攻击。密切关注最新的APT报告，并确保了解对手如何改变他们的攻击方式。
关注“黑客秘笈”系列图书：要了解最新的黑客秘笈新闻，请在此订阅thehackerplaybook。
培训：如果您正在寻找一些培训，可以访问thehackerplaybook网站。
致谢
本书贡献者
Walter Pearce
Kristen Kim
Bill Eyler
Ann Le
Michael Lim
Kevin Bang
Brett Buerhaus
Tony Dow
Tom Gadola
特别感谢
Mark Adams
Tim Medin（nidem）
SpecterOps
Gianni Amato
Casey Smith（@subTee）
Robert David Graham
Ben Ten（@Ben0xA）
blechschmidt
Vincent Yiu（@vysecurity）
Jamieson O'Reilly
Chris Spehn（@ConsciousHacker）
Nikhil Mittal（SamratAshok）
Barrett Adams（peewpw）
Michael（codingo）
Daniel Bohannon
Cn33liz
（@danielbohannon）
Swissky（Swisskyrepo）
Sean Metcalf（@PyroTek3）
Robin Wood（digininja）
@harmj0y
TrustedSec
Matt Graeber（@mattifestation）
David Kennedy（@HackingDave）
Matt Nelson（@enigma0x3）
FireEye
Ruben Boonen（@FuzzySec）
Igandx
Ben Campbell（@Meatballs ）
Alexander Innes（leostat）
Andrew Robbins（@_wald0）
ActiveBreach（mdsecactivebreach）
Raphael Mudge（@rsmudge）
bbb31
Daniel Miessler（@DanielMiessler）
pentestgeek
Gianni Amato（guelfoweb）
SECFORCE
Ahmed Aboul-Ela（aboul3la）
Steve Micallef
Lee Baird（leebaird）
SpiderLabs
Dylan Ayrey（dxa4481）
H.D. Moore
Rapid7（@rapid7）
TheRook
Will Schroeder（@harmj0y）
Ahmed Aboul-Ela（aboul3la）
Ron Bowes（@iagox86）
Emilio（epinna）
SensePost
Dylan Ayrey（dxa4481）
Sekirkity
George Chatzisofroniou（sophron）
Byt3bl33d3r
Derv（derv82）
Karim Shoair（D4Vinci）
Garrett Gee
Chris Truncer
HackerWarehouse
Anshuman Bhartiya
LETHAL
OJ Reeves
n00py
Ben Sadeghipour（@nahamsec）