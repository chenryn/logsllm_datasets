User:  Task 13: How to use iptables to set up a firewall
Assistant: Iptables is a firewall tool commonly used in Linux systems, which can limit network traffic and ensure server security. The following are the steps to use iptables to set up a firewall: 1. View the status of iptables Enter the following command in the terminal to view the current status of iptables: ``` sudo iptables -L ``` If there is no rule in the returned result, it means that iptables is not blocked configuration. 2. Configure iptables rules To use iptables to set up a firewall, you generally need to add the following rules: - Allow this machine to access other machines ``` sudo iptables -A INPUT -i lo -j ACCEPT ``` - Allow established connections to access this machine`` ` sudo iptables -A INPUT -m conntrack --ctstate ESTABLISHED,RELATED -j ACCEPT ``` - allow connections on specified ports such as allowing SSH connections: ``` sudo iptables -A INPUT -p tcp --dport ssh -j ACCEPT ``` - Block all other connections``` sudo iptables -A INPUT -j DROP ``` The meanings of the above rules are: allow this machine to access other machines, allow established connections to access this machine, allow SSH connections, block All other connections. 3. Save the iptables configuration Use the following command to save the iptables configuration: ``` sudo iptables-save > /etc/iptables.rules ``` You can also create a file yourself, save the iptables rules in it, and then use the file as The configuration file used to automatically load iptables rules when the system starts. Edit the /etc/rc.local file, and add the following content before the exit 0 line: ``` sudo iptables-restore < /etc/iptables.rules ``` 4. Check whether the iptables configuration is valid Enter the following command in the terminal to view Whether iptables has taken effect: ``` sudo iptables -L ``` If the returned result contains the rules set above, it means that iptables has taken effect.