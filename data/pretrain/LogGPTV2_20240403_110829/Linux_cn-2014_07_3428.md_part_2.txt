>  sudo rm `which gcc`
>  sudo rm  `which g++`
>  sudo ln -sv /usr/bin/gcc-4.4  /usr/bin/gcc
>  sudo ln -sv /usr/bin/g++-4.4  /usr/bin/g++
> 
> ```
> 
> **这里CentOS没有什么特别要说的。主要因为全部都用默认的，就可以了。各种依赖C6-Media就可以解决** 
> 
> 
> 3.到LFS官网上下载LFS7.5的所有源码: 
> 
> 
> 
### 1.磁盘分区准备
1. plan: 准备一个10到20GB的分区，这一步请谨慎操作
2. action: 创建分区(表)并格式化。创建分区表请使用fdisk , 如果需要图形界面下的请使用GPartion，如果这两种工具都不会请到windows下分区（无需格式化）
```
#格式化分区
sudo mkfs -v -t ext4  /dev/sdaX #这里的X是填上自己的分区号
```
PS:因为现在计算机的内存都比较大，所以可以不需要swap分区。（第一次进行LFS，一个根“/”分区就够了，等以后有经验了，在进行多分区的操作）
### 2.用户准备
直接参考手册上的来就行了。
小建议：
PS1='[\[\e[32m\]#\##\[\e[31m\]\u@\[\e[36m\]\h \w]\$\[\e[m\]'
PS1修改成这个变量看着能舒服点。
注意：每次开机，或是重启后，在进入lfs用户前，都要对 LFS变量进行检查，查看LFS=/mnt/lfs变量是否存在，然后对lfs使用的分区进行挂载
### 前四章的小结：
> 1. 这一部分没有什么难点，准备硬盘分区是因为要让LFS作为独立的硬盘来启动。新建分区、格式化分区、准备lfs用户是Linux操作的基础素质。 **注意** ：为了下面的编译过程能更快，可以在输入make命令时在后面加入-j4，使用4个进程进行同时编译，在多核处理器上编译的速度有明显提升
> 
---
#### 开始进入编译代码的环境（每次开机或重启动后需要进行下面步骤进入lfs用户环境）
> 1. 首先导入LFS变量
> 
> 
> 
> ```
> export LFS=/mnt/lfs
> #建议放到/etc/profile下方便一直用
> 
> ```
> 
>  2. 然后挂载LFS的分区
> 
> 
> 
> ```
> sudo mount -v -t ext4 /dev/sdaX $LFS  #X为你的LFS硬盘分区号
> 
> ```
> 
>  3. 最后就可以切换到lfs用户了
> 
> 
> 
> ```
> su - lfs  #注意中间这个 - 符号是一定要的，代表为lfs用户启动一个login shell 
> 
> ```
> 
> 补充：通常我们在开机后，启动的第一个shell称之为login shell，当进入GUI界面后，不需要输入密码启动的shell称之为non-login shell。这两种shell是有区别的。大家都知道shell的运行是需要环境变量的支持的。配置这些环境变量的文件就是配置shell工作环境的文件。两种shell在读取配置文件时有很大的不同，下面是总结它们分别读取哪些配置文件：
> 
> 
> 1. login shell 启动--->读取/etc/porfile文件--->读取~/.bash\_profile文件
> 2. no-login shell 启动--->读取~/.bashrc文件
> 3. exec env -i /bin/bash命令会开启一个全新的non-login shell。
> 
**注意**：每次重新开机或重启后都需要进行下面的步骤，切换到lfs用户，因为对于新手来说，不可能一天就编译完lfs的所有源，可以把以上步骤保存到一个文件中，每次重启系统进行LFS之前，参照以上步骤进入到LFS编译环境。
C: 第五章的内容：编译得到\$LFS/tools/目录下面的工具包
----------------------------------
+ 第一步，编译出一个全新的与主机系统无关的工具链。这些工具链包含了：compiler(就是我们常用的gcc,g++)，assembler(就是把汇编程序变成a.obj文件的工具)，linker(就是把很多\*.obj文件和库文件链接成可运行文件a.out的工具)，还有各类库文件(为后面编译其它的软件提供基础设施)，当然还有大量的其它工具
+ 第二步，得用第一步编译出来的工具，编译其它的工具（这里可以看出，在制作LFS的过程中，编译的先后顺序是非常生要的，因为有了鸡，才能下蛋）
+ 注意 1：上面两步编译出来的工具都会安装到 \$LFS/tools目录下面（也就是/mnt/lfs/tools目录下面）。LFS手册中把这个称之为临时的文件系统，就是因为\$LFS/tools这个目录在第6章结束时就会被删除，因为$LFS/tools已经使用完了，没有利用价值了。
+ 注意 2：参照LFS手册上的指令进行编译，基本不会遇到错误，因为编译代码的步骤就是老三样：configure && make && make install，但是有一点，一定要注意，所有的安装包一定要打补丁，因为LFS手册没有强调打补丁的过程，所以自己如果发现这个源码包有补丁文件，一定要记得打上。
+ 注意 3：因为需要编译的软件太多，到最后你可能不会愿意自已每个单词都输入到命令行进行编译，所以通常会直接复制LFS手册中的命令。但是复制时，请一定注意先把指令复制到一个空的文件编辑器中，然后检查一下，复制过来的内容是否正确，因为从PDF文件复制到文本中的内容，格式会发生很大的变化。这一点在你尝试的过程中就会发现了。然后在文本编译器或是vim中进行编辑后，在复制到lfs用户的命令行中。
+ 注意 4：在编译perl时，按照官方文档打补丁会出现readonly的错误，下面是是正确的操作命令：
```
cd /mnt/lfs/sources
tar xvf perl-5.16.2
cd perl-5.16.2/hints
cp linux.sh linux.sh.org
cd ..
patch -Np1 -i ../perl-5.16.2-libc-1.patch
cd hints
diff linux.sh linux.sh.org   #输出打补丁情况，则为正常打补丁，编译过程参考手册
```
+ 注意 5：手册上的configure的位置一定刚要注意有三种情况，第一种是在源代码目录之外进行configure，第二种是在源代码目录里面进行configure，第三种（特殊情况）是libstdc++是在gcc源码目录的子目录里面进行configure。所以在执行命令之前一定刚要看好执行命令的前提条件，不妨思考一下LFS的笔者为什么这么写。
+ 温馨提示： 第一次编译GCC时可能会遇到环境问题，不要气馁，失败是正常的（我失败了10次以上）。不过我们可以保证LFS手册上的命令质量是非常高的。经过亲身测试绝对没有错误。