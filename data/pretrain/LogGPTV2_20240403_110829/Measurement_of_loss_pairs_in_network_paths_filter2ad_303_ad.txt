y
t
i
s
n
e
d
y
t
i
l
i
b
a
b
o
r
P
0
−0.2
1.2 milliseconds
−0.1
0
0.1
 (seconds, 100 microseconds bins)
∆
j−1,j
(b) ∆j−1,j for h′ = 5.
1 milliseconds
−3
x 10
8
6
4
2
y
t
i
s
n
e
d
y
t
i
l
i
b
a
b
o
r
P
0.2
0.2
0.12
0.11
0.13
Θ (seconds, 1 millisecond bins)
0.4
0.5
0.3
0.2
0.7
Θ (seconds, 1 millisecond bins)
(c) Θj−1 and Θj for h′ = 9.
0.6
0.14
0.8
0
−0.2
−0.1
0
0.1
 (seconds, 100 microseconds bins)
∆
j−1,j
(d) ∆j−1,j for h′ = 9.
Figure 6: Path queueing delays and their diﬀerences for LP10 and LP01 with S = 1500 bytes on the testbed
for which C (h∗) = 10 Mbits/s, C (h′) = 50 Mbits/s, h∗ = 3, and h′ = {5, 9}.
Table 1: PlanetLab nodes used for the Internet path
measurements.
Aliases
IP addresses
Locations
Average RTTs
PL001
212.235.18.114
Israel
PL002
216.48.80.14
Canada
PL003
202.112.28.98
China
308.24 ms
244.31 ms
83.67 ms
PL004
131.179.50.70
United States
PL005
128.143.6.134
United States
–
–
PL006
165.91.83.23
United States
229.55 ms
PL007
132.72.23.10
Israel
PL008
210.123.39.168
Korea
PL009
140.123.230.248 Taiwan
PL010
134.151.255.181 UK
PL011
142.104.21.241
Canada
358.54 ms
53.34 ms
50.54 ms
273.62 ms
248.99 ms
PL012
194.117.20.214
Portugal
–
PL013
198.82.160.239
United States
237.59 ms
PL014
137.132.80.110
Singapore
38.30 ms
nodes, monitor the resource usages in the nodes, and retrieve
measurement data from the nodes. Each measurement node
executed the measurement tasks to measure the network
paths to the 14 destinations. To avoid self-induced network
congestion, the destinations were evenly divided into two
groups. The sources performed concurrent measurement
for the paths in a group for one minute. Speciﬁcally, the
sources launched HTTP/OneProbe to dispatch a sequence
of Poisson-modulated probe pairs with a mean rate of 5 Hz
and S = 576 bytes to each destination. To augment the path
measurement with route information, tcptraceroute [49] was
performed at both the sources and destinations. At the end
of the minute, the nodes switched to the other group and
repeated the same process. As a result, the average mea-
surement traﬃc generated by each source was less than 48
KB/s (and less than 7 KB/s for each destination).
The measurement was conducted in the period during
which HARNET [3]—a network through which the eight
universities peered with one another—changed the service
provider. In the switch-over process, the eight universities’
networks were ﬁrst switched to a temporary network one by
one between 24 February 2010 14:00 UTC and 27 February
2010 23:00 UTC. They were then migrated back to the new
service provider’s network between 5 March 2010 11:00 UTC
and 7 March 2010 2:00 UTC. As a result of these changes,
we observed diverse network path characteristics even for
the same source-destination pair.
In the stage of pre-processing the measurement data, we
identiﬁed and removed a number of measurement artifacts.
In particular, we identiﬁed artifacts associated with each
source by correlating its measurement results.
If there is
a consistent pattern, such as persistent packet reordering,
appearing in all the results, we conclude that the pattern
is originated from the source or the path segment close to
the source. This diverse-path-correlation method reveals the
following measurement artifacts:
1. Forward-path and reverse-path reordering for UF be-
tween 27 February 2010 and 05 March 2010, and
942. Forward-path and reverse-path reordering for UH dur-
ing the entire period.
Besides the artifacts, we observed system failures in three
PlanetLab nodes PL004, PL005, and PL012 during the mea-
surement period. After eliminating the paths to these des-
tinations, we analyzed the remaining 88 paths for general
packet loss statistics and loss-pair measurement.
5.1 Packet loss behavior: An overview
In this section, we present the overview results on the
packet loss behavior, particularly the loss pairs, observed
from the network paths. We consider the forward and re-
verse paths separately, because HTTP/OneProbe can distin-
guish the two paths for loss measurement. For the forward
path, we deﬁne a loss frequency fF L = PM
i=1 1{Li >0}/M ,
where Li represents the delivery status (i.e., 00, 01, 10, or
11) of the ith probe pair, 1 is the indicator function, and
M is the total number of packet pairs dispatched during a
given time period. Li > 0 if there is at least a packet loss
in the pair, and Li = 0, otherwise. For the reverse path,
we apply a similar procedure to compute the loss frequency
denoted by fRL.
5.1.1 Prevalence of packet losses and loss pairs
We summarize in Table 2 the packet-loss and loss-pair
statistics measured from all the paths for the entire mea-
surement period. The table is organized based on the desti-
nations. That is, the statistics for each destination is com-
puted based on an aggregation of the path measurement
from the eight sources to the destination. The statistics are
also separated into forward and reverse paths. Besides the
fF L and fRL, we also report fP10, fP01, and fP11 which
give the respective percentages of P10, P01, and P11 in the
set of lossy probe pairs. The columns for fR10, fR01, and
fR11 give similar statistics for the reverse path.
We observe the following results from Table 2:
1. Both fP L and fRL were less than 1% for most of the
paths, and the highest loss frequency was 2.2% (i.e.,
PL003’s fRL).
2. Except for PL008 and PL011, the reverse paths suf-
fered from more severe packet loss than the corre-
sponding forward paths according to the loss frequen-
cies. This result, however, is most likely location de-
pendent.
3. Loss pairs were prevalent in the lossy packet pairs, be-
cause fP11 and fR11 were generally below 50% (ex-
cept for PL007’s fP11). The frequencies for some of
the paths were even below 10%.
4. The LP01 dominated the LP10 in both forward paths
and reverse paths, because fP01 (fR01) was consis-
tently higher than fP10 (fR10).
5.1.2 Time series for packet loss events
To analyze the packet loss statistics as a function of time,
we divide the entire measurement period into one-hour bins
for each path. Each bin’s value is set to 1 if there exists
at least a one-minute session with loss frequency greater
than 1%; otherwise, the bin value is set to 0. As a result,
we obtain a time series of bin values for each path. We can
combine the eight sources’ time series for a given destination
by adding their bin values. Alternatively, we can combine
the 11 destinations’ time series for a given source by also
adding their bin values.
Table 2: Packet loss and loss pair statistics (in %)
grouped by destinations.
Forward Paths
Reverse Paths
fF L fP10 fP01 fP11 fRL fR10 fR01 fR11
PL001 0.04 29.01 33.02 37.97 0.13 24.19 33.60 42.21
PL002 0.16 13.09 57.52 29.39 0.35 19.41 42.53 38.06
PL003 0.23 47.72 51.03
1.25
2.22 41.73 41.76 16.51
PL006 0.01 20.56 43.89 35.55 0.10 30.84 38.10 31.06
PL007 0.07 23.08 25.73 51.19 0.15 25.86 33.86 40.28
PL008 0.67 15.25 34.80 49.95 0.33 25.56 31.26 43.18
PL009 0.29 44.41 44.97 10.62 0.69 44.50 45.80
9.71
PL010 0.01 21.72 36.55 41.73 0.16 29.03 37.38 33.59
PL011 0.17 44.75 49.62
5.62
0.09 36.05 41.61 22.34
PL013 0.04 33.15 40.08 26.77 0.11 29.06 36.78 34.16
PL014 0.93 44.46 47.06
8.49
1.93 47.38 48.02
4.59
To eﬀectively visualize the time series, we resort to heat-
map diagrams. Figures 7(a) and 7(b) show the heat-map
time series for the packet loss events in the forward paths
grouped by the sources and destinations, respectively. Since
there are 11 paths per source, the possible values in Fig-
ure 7(a) are 0, 1, . . . 11. A darker color corresponds to a
higher value. We also grey out all the bins with no measure-
ment data. Similarly, the possible values in Figure 7(b) are
0, 1, . . . 8. Moreover, there are three vertical dash lines: the
ﬁrst indicates the completion time for the transition to the
temporary network, the second the beginning of the transi-
tion to the new service provider, and the third the comple-
tion time for the transition to the new service provider. We
also show the diagrams for the reverse paths in Figures 7(c)
and 7(d).
The heat-map diagrams enable us to eﬀectively evaluate
the loss behavior in the spatial and temporal domains:
1. (Loss patterns) The heat maps can quickly identify
loss patterns for a set of paths. In our case, the set of
paths share either the same source or the same destina-
tion for forward/reverse paths. Figure 7(a) shows that
there is no clear loss pattern for all the eight sets of
source-identical forward paths. However, Figure 7(c)
shows intense loss for some of the reverse paths dur-
ing the network transition (between the ﬁrst two dot-
ted lines). On the other hand, Figures 7(b) and 7(d)
depict that the loss is much more prevalent for some
destination-identical paths.
2. (Loss correlations) The heat maps also reveal strong
correlation among diﬀerent sets of source/destination-
identical paths. The most notable one is the periodic,
intense losses for the UE, UF, UG, and UH paths in
Figure 7(c). The similar pattern suggests that they
probably shared the same loss origins. Moreover, Fig-
ure 7(d) shows that all 11 sets of destination-identical
paths share similar reverse-path loss patterns during
the network transition, but they are no longer similar
after migrating to the new service provider’s network.
3. (Loss diagnosis) We use heat maps to further diagnose
the loss behavior by correlating the source-identical
paths and destination-identical paths. Going back to
the intense losses for the UE, UF, UG, and UH paths in
Figure 7(c), we can obtain more insights by comparing
Figure 7(c) and Figure 7(d) in the same ﬁve periods
of heavy losses. Figure 7(d) shows that some destina-
tions contributed losses to most of the reverse paths
95(a) Forward paths (grouped by sources).
(b) Forward paths (grouped by destinations).
(c) Reverse paths (grouped by sources).
(d) Reverse paths (grouped by destinations).
Figure 7: Heat-map time series for the packet loss events in the forward and reverse paths.
(notably PL014). Therefore, the losses for the four
paths actually occurred on multiple locations: some
on the destination side and others on the source side.
4. (Loss anomalies) The heat maps also help reveal loss
anomalies. A time-correlation of the forward-path and
reverse-path measurements based on the destinations
shows that PL014 is a “congested” node. The paths to
and from this node experienced high loss for all paths
in a diurnal pattern until 13 March 2010. The loss
could occur as a result of congestion at the node or the
node’s network. Since this path’s loss measurement is
heavily biased by the destination, a more useful path
measurement can be obtained by replacing this with
another node in the same vicinity. The forward paths
to PL008 and PL009 also experienced periodic high
losses. Unlike PL014, the loss patterns continued to
the end of the measurement period.
5.2 Loss-pair analysis of the paths to PL009
In this section, we use the eight forward paths to PL009 as
a case study of loss-pair analysis. Figure 8 shows the heat-
map time series for the frequency of event P01x– obtained
from the eight paths. We do not give the time series for the
event P10xR00, because it exhibits a similar pattern shown
in Figure 8. We compute the frequency for each path using
one-hour bins and grey out all the bins with no measurement
data. The loss-pair frequencies of the forward paths were 1-
3%, and they distributed in several loss episodes, each of
which lasted for several hours. In the ensuing discussion, we
zoom into two loss episodes e1 and e2 in Figure 8 observed
96Figure 8: Heat-map time series for the frequency of event P01x– from UA–UH to PL009.
on 1 March 2010 (during the period of the temporary net-
work operation) and 16 March 2010 (after the transition to
the new service provider), respectively, with the same time
period between 02:00 and 11:00 UTC on each day.
5.2.1 The loss episode e1
Figure 9 shows the RTT time series for the ﬁrst packets
(i.e., pj−1) for the paths from UA, UB, UD, and UE during
e1.
In each time series, we also superimpose the residual
packets’ RTTs for events P01x– and P10xR00 observed from
the corresponding path. We do not show the time series for
UC, UF, UG, and UH, because the time series for UC is
similar to that for UB, and UF–UH to UE. The following
highlights the main observations from Figure 9:
1. A minimum RTT (minRTT) of 30 ms was found for
the path from UD and 32 ms for the others. Most of
the RTTs were found below 100 ms for each path.
2. Except for the UA path, other paths experienced two
RTT surges at around 02:15 and 06:15 UTC.
3. Forward-path loss pairs were observed between 03:00
and 07:45 UTC from all the paths.
4. Forward-path loss pairs were observed between 07:45
and 11:00 UTC only from the UD–UH paths.
5. The ﬁrst packets’ RTTs remained low and relatively
stable between 02:35 and 06:15 UTC for all the paths.
The loss pairs’ RTTs clustered around the peaks and
most of residual packets’ RTTs for event P10xR00 were
higher than that for event P01x– (which is consistent
with our analysis in §4).
6. The ﬁrst packets’ RTTs became high and unstable af-
ter 06:15 UTC (especially between 06:15 and 09:45
UTC) except for the UD path. A signiﬁcant varia-
tion was also observed from the loss pairs’ RTTs, and
many residual packets’ RTTs for event P10xR00 were
found lower than that for event P01x–.
Since diverse RTT characteristics were observed among
the eight paths, we further analyze the tcptraceroute results
for both the forward and reverse paths between the eight
sources and the destination, and ﬁnd that the sources actu-
ally used diﬀerent IP routes to reach the destination. The
tcptraceroute results also reveal that no IP route change