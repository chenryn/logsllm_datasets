5 Experimental Results on KAD
As a proof of concept, in this section we show the results obtained with FAB-Probe on
over 1300 ADSL hosts participating to the Kademlia DHT [9] used by applications like
eMule. We used the KAD crawler of [12] to retrieve the IP addresses of the KAD hosts
and then selected with the Maxmind database only those connecting through an ADSL
service provider. We have run two different experiments: one aiming at analyzing a
large variety of hosts closely in time, generating a snapshot of the avail-bw distribution,
and another measuring a particular subset of hosts for over 10 days.
5.1 A Snapshot of the Avail-bw Distribution
We have measured 1244 hosts from various ISPs in US and Europe analyzing both
capacity and avail-bw (although we omit the discussion on the capacity, see [1] on this
matter). Avail-bw measurements lasted on average less than 6 seconds per host. Fig. 2(a)
shows the downlink avail-bw range for these hosts. Conﬁrming the results in [14], hosts
are sharply partitioned in two groups, idle or active, since more than 80% have either
s
t
s
o
h
d
e
r
u
s
a
e
m
f
o
n
o
i
t
c
a
r
F
50 %
40 %
30 %
20 %
10 %
0 %
cong. 0−25 10−25 25−50 50−75 75−9090−100
Available bandwidth range (%)
(a) Snapshot of KAD peers.
F
D
C
1
0.8
0.6
0.4
0.2
0
0
Lower bound (avg)
Upper bound (avg)
20
40
Average available bandwidth (%)
60
80
100
(b) Average over 10 days.
Fig. 2. Avail-bw in KAD: snapshot (a) and 10 days average (b) of the downlink avail-bw
100 %
80 %
60 %
40 %
20 %
0 %
Fast Available Bandwidth Sampling
75
100 %
80 %
60 %
40 %
20 %
0
)
y
t
i
c
a
p
a
C
f
o
n
o
i
t
c
a
r
f
(
h
t
i
d
w
d
n
a
B
e
b
a
l
l
i
a
v
A
)
y
t
i
c
a
p
a
C
f
o
n
o
i
t
c
a
r
f
(
h
t
i
d
w
d
n
a
B
e
b
a
l
l
i
a
v
A
Mon 0:00
Tue 0:00
Wed 0:00
Thu
Fri
(a) Daily pattern (zoom).
Sat Sun Mon Tue Wed Thu
(b) No daily pattern.
Fri
Sat Sun
Fig. 3. Avail-bw evolution over time: comparison of two hosts that had different avail-bw pat-
terns. Negative values indicate that the uplink was congested.
over 90% avail-bw or a congested uplink2. Less than 2% of the hosts measured had a
ﬂeet with unclear trend (“grey” in Pathload) resulting in a wider avail-bw range, such
as 50%-90%, so we omitted them from the ﬁgure.
5.2 A Ten-day Case Study
From the hosts participating in KAD, we selected the ones that were continuously on-
line for over one month using the same (static) IP address. These hosts are a good op-
portunity for a long-term analysis of the avail-bw evolution. However, they constitute a
particular subset of eMule hosts that might continuously be seeding the ﬁle distributions
acting as traditional servers. We have selected 82 of these hosts and measured them ev-
ery 5 minutes for over 10 days. The capacity was also monitored to make sure it did
not change during that period. In Fig. 2(b) are shown the average avail-bw lower and
upper bounds considering the entire measurement period. Over 30% of the hosts had
the uplink continuously congested meaning they were always uploading large amounts
of data. Over 25% of the hosts were instead frequently idle, as on average, they had at
least 75% avail-bw. We emphasize that the distribution is less sharp than the snapshot
in Fig. 2(a) because Fig. 2(b) shows the CDF of averages computed over almost 3000
estimates per host, while the latter is a one shot measurement.
Analyzing more closely the results, some hosts showed sharp daily patterns in the
avail-bw, while others did not. For example, Fig. 3(a) shows a host that was basically
idle during night hours while was active during the day, while Fig. 3(b) shows another
host which showed more slow-varying patterns during the measurement campaign. In
general, however, this set of hosts showed little change in their avail-bw between day
and night, yet maintaining an active-inactive pattern with sometimes steep variations.
2 Modern applications for P2P ﬁle distribution employ “tit-for-tat” algorithms that encourage the
the peers to actively participate to the distribution process. This means that peers upload data
while downloading, thus using their bandwidth in a more symmetrical fashion compared to
client-server applications. Now, the uplink of an ADSL being much smaller than the downlink,
this explains why eMule peers suffer from uplink congestion before the downlink is saturated.
76
D. Croce et al.
6 Conclusions
In this paper we presented FAB-Probe, a new measurement tool for non-cooperative
ADSL environments, designed for larger-scale measurements. Rethinking previous
techniques and studying the requirements in terms of accuracy and time, FAB-Probe is
the evolution of ABwProbe, from which the basic algorithm was acquired. We developed
a new sampling strategy, balancing accuracy and measuring time to sample efﬁciently
the avail-bw; we minimized the number of probing ﬂeets; we studied a method to de-
tect uplink congestion; and we improved the cross-trafﬁc ﬁltering technique. We proved
the accuracy of FAB-Probe both “in-lab”, against ADSL hosts under our control, and in
real trafﬁc conditions, with the cooperation of an ISP. Finally, as a proof of concept, we
measured with FAB-Probe over 1300 ADSL hosts participating in KAD, for a snapshot
of the avail-bw distribution as well as a characterization of 82 hosts for over ten days.
Acknowledgments
We are extremely thankful to Marcin Pietrzyk for providing us the traces used in the
validation and to Moritz Steiner for his help in obtaining the IPs of the KAD users.
References
1. Croce, D., En-Najjary, T., Urvoy-Keller, G., Biersack, E.: Capacity Estimation of ADSL
links. In: CoNEXT (December 2008)
2. Croce, D., En-Najjary, T., Urvoy-Keller, G., Biersack, E.: Non-cooperative Available Band-
width Estimation towards ADSL links. In: Proc. Global Internet Symposium 2008 (April
2008)
3. Dischinger, M., Haeberlen, A., Gummadi, K.P., Saroiu, S.: Characterizing residential broad-
band networks. In: IMC (October 2007)
4. Dovrolis, C., Jain, M.: End-to-end available bandwidth: Measurement methodology, dynam-
ics, and relation with TCP throughput. In: SIGCOMM, Pittsburgh, USA (August 2002)
5. The FAB-Probe Project website,
http://www.eurecom.fr/˜btroup/fabprobe.html
6. Haeberlen, A., Dischinger, M., Gummadi, K.P., Saroiu, S.: Monarch: A tool to emulate trans-
port protocol ﬂows over the internet at large. In: IMC (October 2006)
7. Hu, N., Li, L.E., Mao, Z.M., Steenkiste, P., Wang, J.: Locating internet bottlenecks: algo-
rithms, measurements, and implications. In: SIGCOMM, Portland, USA (2004)
8. Lao, L., Dovrolis, C., Sanadidi, M.Y.: The probe gap model can underestimate the available
bandwidth of multihop paths. Computer Communication Review 36(5), 29–34 (2006)
9. Maymounkov, P., Mazieres, D.: Kademlia: A peer-to-peer information system based on the
XOR metric. In: Druschel, P., Kaashoek, M.F., Rowstron, A. (eds.) IPTPS 2002. LNCS,
vol. 2429, p. 53. Springer, Heidelberg (2002)
10. OECD. OECD broadband statistics (June 2007),
http://www.oecd.org/sti/ict/broadband
11. Saroiu, S., Gummadi, P.K., Gribble, S.D.: Sprobe: A fast technique for measuring bottleneck
bandwidth in uncooperative environments (2002),
http://sprobe.cs.washinton.edu
12. Steiner, M., En-Najjary, T., Biersack, E.W.: A Global View of KAD. In: IMC (2007)
13. Windsor, L.: Oaks Group. Annual market outlook report (2006)
14. Zaragoza, D., Belo, C.: Experimental validation of the on-off packet-level model for ip traf-
ﬁc. Comput. Commun. 30(5), 975–989 (2007)