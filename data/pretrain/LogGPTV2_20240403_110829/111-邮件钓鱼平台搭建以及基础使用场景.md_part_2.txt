Landing Pages - 伪造钓⻥⻚⾯
配置好钓⻥邮件后，就可以通过 LandingPages 模块来
新建钓⻥⽹站⻚⾯，此处⽀持⼿写 html ⽂件，也可通过
导⼊⽹站功能，针对⽬标⽹⻚进⾏克隆，克隆如下登陆⻚
⾯。
点击 Import Site。
效果如下所示。
将这两个功能均选上 CaptureSubmitted Data 和
CapturePasswords，记录受害者输⼊的账号和密码。
Redirect to 填写该⻚⾯真实的地址，⽅便受害者点击完
提交按钮后，⾃动跳转⾄真正的⽹站。
Campaigns - 钓⻥测试
配置 Campaigns，填写 Name、选择钓⻥邮件模板、选
择钓⻥⽹站模板、填写钓⻥⽹站 URL、填写发件邮箱、
选择受害者邮件组。
注意点： 其中钓⻥⽹站 URL 根据实际钓⻥邮件测试情
况，填写对应的地址，本次由于使⽤的是 Gophish 默认
的钓⻥⻚⾯，因此填写的是本服务器的地址，（其中
URL 处为了真实的进⾏钓⻥，也可绑定类似的域名地
址，建议使⽤国外的域名和云 vps，由于本次搭建环境
时，使⽤的阿⾥云的服务器和域名， 并且域名未进⾏备
案，导致绑定该钓⻥⻚⾯后，阿⾥云直接识别，并提示需
要备案后，钓⻥⽹站才可正常使⽤，因此本次使⽤的是
IP 直接进⾏访问）。
点击 Launch Campaign 即可成功发起⼀次钓⻥邮件攻
击测试。
Dashboard - 仪表板
通过如下查看钓⻥邮件测试的实际情况。
当点开邮件后，查看 gophish 平台，此时已经有相关的
打开记录，Email Opened。
当点击如下地址时，则会直接跳转⾄钓⻥的⻚⾯。
类似于这样的地址：
http://x.x.x.x/?rid=tSdIyGl
此时查看 gophish 平台，已经有相关的记录。Clicked
Link。
当输⼊完相关的账号和密码，则会跳转⾄设置好的跳转真
实地址（以便受害者更加相信此地址是真实的地址），如
下所示：
此时查看 gophish 平台，已经记录了相关的账号和密
码。
可通过 Export CSV 功能将⽬前的钓⻥情况结果导出
来。
导出的钓⻥测试结果如下所示：
⾄此已经完成相关简单钓⻥邮件测试的需求。
⼩记：⼀些简单的钓⻥邮件场景均可通过此平台完成，也
可与其他平台进⾏结合使⽤。
可能 gophish 的伪造钓⻥⻚⾯功能⽆法满⾜需要，也可
⾃⼰搞个钓⻥⻚⾯服务器，然后将 Campaigns 功能中的
URL 处填写⾃⼰构造的钓⻥⻚⾯地址即可。
常⻅基础钓⻥使⽤场景
场景⼀
通过模仿领导邮件，去钓运维⼈员、内部⼈员相关的个⼈
账号或者 *** 等敏感信息。
场景⼆
以最近某段时间的最新时事展开钓⻥，⽐如：前段时间新
冠肺炎疫情，可以以它为⼀个钓⻥点，发送相关的钓⻥邮
件，获取员⼯相关账号和密码，或者员⼯的个⼈敏感信
息，如姓名、*** 号、家庭住址、家庭情况等敏感信息。
例 1：
例 2：
其中附件也可为 word，word 中携带包含恶意宏代码，
诱导⽤户点击，达到控制个⼈ PC 机的⽬的。
场景三
根据最新爆发的漏洞，然后以伪造公司安全运维管理部⻔
的钓⻥邮箱给全体员⼯发送为防范最 新漏洞，现已将最
新漏洞补丁通过邮件附件形式发放，需要⼤家下载附件中
最新漏洞补丁（exe 为免杀的远控⽊⻢等）如：
场景四
伪造公司服务器被攻击等理由进⾏邮件钓⻥攻击。
如：
此处提前构造相类似的邮件平台。
场景五
构造钓⻥⼆维码，诱导员⼯扫描钓⻥⼆维码，钓员⼯相关
的账号和密码。
扫描完之后，跳转⾄钓⻥⻚⾯（本次仅嵌⼊ baidu.com
搜索⻚⾯做验证）。
邮件钓⻥演练实战
既然介绍了这么多基础知识，那就开始进⾏实战钓⻥邮件
演练呗，⾸先通过上述的钓⻥场景，构造了⼀个模仿领导
邮件，去钓运维⼈员、内部⼈员相关的个⼈账号或者 ***
等敏感信息。
通过 Gophish 发送成功后，那就静静的等⻥⼉上钩呗。
等呀等，⼀直等了快 1 个⼩时，发现没有任何反应，看
来员⼯的安全意识还是不错呀，第⼀份邮件，以失败告
终。
既然这种类型的邮件，发送不过去，那就换种类型呗，于
是乎，就⼜搞了⼀个附件邮件的形式，本次采⽤ exe 后
缀的⽊⻢，为了⽅便，直接通过 CS ⽣成⼀个 exe 的⽊
⻢，过程如下：
⾸先进⾏反弹 shell 监听。
然后⽣成相应的 exe。
利⽤钓⻥场景三进⾏邮件钓⻥，最终的钓⻥邮件形式如下
所示：
然后通过 gophish 平台去进⾏批量发送，这次总该可以
了吧，如下是发送成功的截图，但是⼀直都没有⼀个⽤户
邮箱去打开邮件，最终问了企业内部的管理员才知道，原
来是反垃圾邮件安全⽹关将所有携带 exe 附件的邮件均
进⾏拦截，才导致邮件根本就没有发送到⽤户的邮箱。
那既然不能携带附件，那我直接在邮件内容中嵌⼊⼀个下
载链接，不就可以了，那就再继续制作相应的钓⻥邮件样
本。
然后再制作⼀个钓⻥⻚⾯，作⽤是：当⽤户访问该地址
时，则会直接下载该⽊⻢。
然后再次批量发送⼀次，等了⼀会，发现有不少⽤户收到
了该钓⻥邮件，并且打开了钓⻥邮件，说明该反垃圾邮件
安全⽹关仅拦截了带附件的 exe，但是并未拦截邮件正⽂
中嵌⼊链接的钓⻥邮件。
那再继续等等看，应该会有不少员⼯会点击此钓⻥链接，
下载⽊⻢，果不其然，有⼏个安全意识薄弱的员⼯下载了
该 exe ⽊⻢。
对于真实环境下的邮件钓⻥，只要能钓到⼀个内部员⼯的
相关信息或者控制该员⼯的终端，危害都是不可控制的。
那既然有员⼯都点击了，那肯定会有员⼯点击下载的 exe
⽊⻢的，果不其然，查看 CS，发现有两台主机已上线。
由于客户未允许进⾏内⽹渗透，因此未进⼀步深⼊利⽤，
⾄此第⼀个邮件钓⻥顺利完成。
想着这下可以休息了，但是当时任务要求是发送 2 到 3
个钓⻥邮件模板，那就继续再制作新类型的模板继续进⾏
测试。
接下来这个钓⻥模板就不再沿⽤携带附件⽊⻢了，通过前
期的信息收集，知道他们内部使⽤的是某个 OA 系统，
那就伪造⼀个他们内部的 OA 系统⻚⾯，钓⼀下内部员
⼯的 OA 账号。
使⽤携带链接的钓⻥模板，估计他们内部也识别出来了，
那就伪造⼀个钓⻥⼆维码去钓内部员⼯的 OA 账号，邮
件模板如下所示。
然后直接批量发送，⼤概等了半个多⼩时，发现终于有员
⼯点击，打开钓⻥邮件的⼈数不在少数。
然后再等待⼀会，终于有员⼯中招了，输⼊了⾃⼰的 OA
账号和密码。
既然已经得到了 OA 的账号和密码，那就直接通过账号
密码登录呗，如下所示，登录成功。
既然已经登到了后台，那肯定要拿 shell，已经知道该
OA 的类型，直接通过已有的 exp 打就完事了，此处的
后台处存在任意⽂件上传，可直接上传 webshell，测试
过程如下：
⾸先选择电⼦邮箱。
写邮件处，添加图⽚，如下所示。
⾸先上传⼀个正常的图⽚，抓取到如下的 POST 请求
包。
正常情况下，直接将 png 后缀修改为 php ⽆法进⾏上
传，此处可将 png 改为 php. 绕过限制，真实存储到服
务器的⽂件名不符合 windows 命名规范，系统将⾃动去
掉最后的点号。
Webshell 的地址为：
http://x.x.x.x/upload_temp/2011/452122999.111.php,
冰蝎成功连接。
最⾼权限：
⾄此，钓⻥⼯作顺利完成了。
结尾
本⽂主要介绍邮件钓⻥平台的搭建（Gophish 和
EwoMail，也可使⽤其他平台）和具体的实战演练、最后
简单介绍常规的钓⻥邮件场景以及真实的⼀次钓⻥实战。
全⽂完
本⽂由 简悦 SimpRead 优化，⽤以提升阅读体验
使⽤了 全新的简悦词法分析引擎 beta，点击查看详细说明
|---|--|--|--|
| 0 |  |  |  |
| 1 |  |  |  |
| 2 |  |  |  |