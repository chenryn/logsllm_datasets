**3\. 对于逻辑漏洞、越权、CSRF/XSRF之类的漏洞** ，在没法扩大渗透深度的情况下就可以写这项的报告了。
**4\. 对于SSRF漏洞** ，环境允许的情况下可以很好的利用它进行内网探测与攻击，关于SSRF推荐猪猪侠师傅的《一个只影响有钱人的漏洞》文章。
**5\. 对于任意文件上传漏洞** ，能拿shell就可以做跳板搞内网了。
**6\. 对于任意文件包含和任意读取** ，一般就是远程包含拿shell，本地读取拿文件，特别情况下还可以扩大利用。
**7\. 对于SQL注入漏洞** ，注入要有“度”，能得到管理员密码进后台上shell就知足了，千万别动别的，利用方式上提倡自写脚本。
**8\. 对于XSS漏洞**
，不要习惯性的拿弹窗测试，不建议使用别人搭建的平台，可以利用BlueLotus_XSSReceiver搭建或者利用BeEF或者利用XSSer或者写个小脚本自建。
其他漏洞就不一一举例了，反正在隐秘测试的情况下，能悄悄的就悄悄的。
漏洞挖掘与利用辅助工具也就那些常用的那些，除了上面列举外再举例几个自己比较习惯的：Firefox插件（Hackbar、HackSearch、HttpRequester、Live
Http headers、Modify Headers、Netcraft Anti-Phishing
Toolbar、NoScript、Wappalyzer、Web
Developer）、御剑、椰树、dirb、K8fly、Sqlmap、BurpSuite、AntSword、Hashcat、Hydra、Medusa。
**提权与维权**
**提升权限**
虽说仅仅是个测试，但很多情况下提权还是要的，这是变点为面的前提。当然，提权也未必是在自己拿到的站点服务器或钓到的那个主机上提权，提权目的是有个高权限的机子来方便测试整个内网，比如可以以已有机器为跳板以远程提权方式来打到内网其他主机的高权限，所以只要在内网任意机器上拿到可进一步渗透利用的高级权限就够了。提权方法也有很多，不同环境下有不同的姿势。
**1\. 系统漏洞提权。**
windows下可以用systeminfo查看系统版本和补丁记录，利用没修补的漏洞提权，例如MS11080等；linux下可以用uname
-a查看系统内核版本，利用系统内核漏洞提权（内核提权很容易导致系统崩溃，要小心），例如心脏出血等。
**2\. 数据库提权。**
一方面可以利用数据库漏洞得到数据库执行权的Shell；另一方面可以在站点数据库配置文件找数据库帐号密码，利用数据库系统命令执行功能获得数据库执行权的Shell。数据库漏洞上例如Mssql的JOB提权、Mysql的Mof提权。
**3\. Web中间件漏洞提权。** 通过Web服务的容器漏洞进行本地提权。例如IIS溢出、Tomcat提权等。
**4\. 第三方软件提权。**
很多开机自启的软件都会以system权限运行，或者使用者启动时使用了管理员权限运行。例如Radmin、Filezllia、搜狗拼音提权等
**5\. 系统错误配置提权。** 在windows下可以使用BeRoot工具进行系统配置检查，利用配置错误点进行提权。
**6\. 获取高权限账号提权。** 可以在控制机上利用LaZagne
project（支持linux、windows、mac），可以抓取chats、mails、database、wifi、sysadmin、wallet、browsers、memory中的密码，可以利用抓取到的密码进行高权限帐号密码测试，也可以利用神器mimikatz和mimipenguin，不过在部分时候由于权限问题可能读取不到部分密码。
**维持权限**
维权也是一个必须的点，好不容易搞到的跳板可不能轻易丢了。维权也就是所谓的留后门，无论windows下还是linux下留后门姿势都多种多样，我也就只列举几个吧。
1\.
服务器站点可以采取构造Web漏洞方式维权。我感觉这种方式比放上个马可靠多，同时漏洞构造的隐蔽一些，让其他人给利用了就不好完了。比如可以构造复杂的文件包含漏洞包含放在某个系统目录下的木马图片来获取Shell，也可以构造SQL注入利用Sqlmap的–os-shell参数来执行Shell。
2\. 服务器站点可以使用过狗过盾的复杂马维权。复杂马的构造需要私下自己多实验多构造了。
3\.
Linux、Windows账户维权。这个方法只适合没有做LDAP或堡垒机之类的SSO统一权限管理和没有屏蔽对外端口的情况，可以利用密码读取工具读取到的密码进行保持权限，也可以自建[linux隐藏账户](http://blog.sina.com.cn/s/blog_53aab5c10101dhtt.html)、[windows隐藏账户](http://blog.csdn.net/a956163985/article/details/50112187)的方式保持权限。
4\.
工具法维权。工具概括来说就是主动反弹和被动连接两种。两种方式各有优缺点，例如：主动反弹方式既可以放在有公网IP的服务器站点也可以放在内网钓到的机子上，并且更方便规避防火墙、IPS等阻碍，但需要设定触发机制，不能做到想连就连；被动连接方式能够随时连，但无法利用在内网机子上（除非你拿了上层路由做了端口映射）。利用上例如msf生成后门、nc反弹，[脚本反弹shell](http://www.cnblogs.com/r00tgrok/p/reverse_shell_cheatsheet.html)等。
**内网渗透**
内网渗透基本都是依据当前所获得的网络环境进行策略制定，不同环境方式不同，但内网中能搞得也就常说的那些，在有比较靠谱的防火墙、NIDS、IPS的情况下内网就更加难搞了，时时刻刻还要提防它们。这里也就之列举一下常用的内网思路。
**常用套路**
**1\. 网络拓扑探测**
。探测拓扑是个很头大的事，子内网和防火墙都会阻碍拓扑探测。大多也只能探测到上层网、公共网、内网服务器网的网络环境，再有些其他因素就导致探测的更少了。
**2\. 内网弱口令** 。内网弱口令其实还是蛮多的，可以对同子网个人电脑、内网服务器、交换机、路由器尝试弱口令破解。
**3\. 内网服务器漏洞** 。若在OA之类的内网办公通讯站点，可以挖到漏洞就可以获取到部分有助内网渗透的信息。
**4\. 内网路由器漏洞**
。无论是上层网路由还是内网服务器网路由，只要拿下路由器那就是个很大的帮助，这样就可以进一步做端口映射和转发，更好的其搜集其他内网信息，扩大了攻击面。
**5\. 内网个人电脑漏洞**
。例如利用17010之类的远程漏洞测试同子内网中的个人电脑，进而多搜集信息，以方便测试内网服务器。一个不错的内网信息搜集脚本：[地址](http://www.freebuf.com/sectool/39875.html)
**6\. 内网钓鱼** 。和一般钓鱼思路差不多，不过内网中更容易让别人信任，可以通过OA和办公邮件进行钓鱼。
**7\. 中间人攻击** 。不同环境下可以用不同的姿势，一般用的多的就是ARP欺骗、DNS欺骗、会话劫持，进行中间人攻击的前提是取得一定的内网权限。
**8\. 内网穿透**
。在进行部分攻击时候，可能需要让其他内网电脑穿过外网出口进行辅助测试，这里推荐一篇不错的[穿越边界的姿势](https://www.wxzhi.com/archives/014/ode5hy48icqv32xu/)，另外经过Web站点做代理进行穿透时候还需要做Web端口复用。
**后记**
一场正规测试下清理痕迹就可以省了，所以这里也不写了，但还是需要老老实实供出在人家网络干了哪些事，以免以后出其他乱子扣在自己头上。另外还需要撰写漏洞报告，一个漂亮的报告是渗透测试的满意答卷，漏洞报告上不仅要体现出漏洞危害程度与漏洞细节，相应的修补建议尤其是内网修补建议要详细、规格、严谨。
文段也就写到这里了，师傅们有什么对小文若感觉有什么不妥和建议可以留言，我必虚心接受。
**感谢**
****