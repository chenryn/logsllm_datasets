27
CDR=1
elif [[ $1 =-
-1 ]]
29
then
=0
for
iten in ${cDP[@]}
32
do
=$（（$I+1））
echo =n [$1]
if [[ $I =eq $CDR ]]
then
echo =n
else
39
echo =n
fi
p29
目录
BASH 中文文
---
## Page 41
第四章SHELL内部命令
54.1波恩SHELL的内部命令
+eeee ee ee e ee ee e ee ee e ee ee e ee ee e ee ee e ee ee e ee ee e ee e e .
echo =n *1
echo $item
done
44
else
45
builtin cd $@
46
CDR=$(($CDR + 1))
CDP[$CDR]=$PWD
47
fi
49
E.
continue
continue [m]
继续执行外围的for，while，until或Belect的下一次循环.如果指定n，则继续执行外围第n层的循
环。n必须大于或等于1.返回状态是零，除非n不是大于等于1.
F.eval
eval参数表]
把参数表中的参数连在一起形成一个命令，然后读取并执行这个命令，它的退出状态就是eval的退出状
态。如果没有参数表，或者参数表为空，则退出状态为零。
G.exec
exec[e1][-a名称][命令[参数表]]
如果指定了命令，它就会取代（当前的）shell面不是创建新的进程。如果给定了“-1"选项n记网：Lg，登录，
shell就会在传给命令的第零个参数前加上一个短横。这就是登录程序所做的。“=e”选项助记词：clr，请录使
得命令在空的环境中执行。如果指定“-a”功记词：Altar。改变，shell会把名称作为第零个参数传给命令。如果
没有指定命令，可以用重定向来影响当前的shell环境。如果没有重定向错误，返回状态就是零，否则就是
金非
H.exit
exit[]
退出shell，并在shell的父进程中返回状态n。如果省略了n，则退出状态是最后被执行的命令的退出状态。
EXIT陷阱是在shell结束前执行的。
export
export[-fn][-p][名称[-值]]
BASH 中文文档
目录
p30
---
## Page 42
4.1波恩SHELL的内部命令
第四章SHELL内部命令
把每个名称都传到子进程的环境中。如果给定了“-r"选项助记司：Fun
函数，则名称就是shell 函数：否
则，它是shell变量。“=n”选项助记词：
不表示不再把名称导出到子进程。如果没有给定名称，或者给定
格式化打印，则显示已经导出的名称列表。
“-p”选项能够把输出格式化成可以重
新作为输入的形式。如果名称后面是“-值”的形式，那么这个值就会赋给名称。
这个命令的返回状态是零，除非指定了无效的选项，或者其中一个名称不是有效的shell变量名，或
者“-f"指定的不是一个shell函数的名称。
J.
getopts
getopte选项字符串名称[参数表]
每次使用时，getopte都会把下一个选项放在shell变量名称中（如果名称不存在就初始化它），并把下一个
这个选项就要接受一个参数，这个参数和选项之间用空格分开，选项字符不可以是冒号（“：）或问号（"？”）。
要处理的参数的下标放在变量OPTIND中。每次启动当前的shell或shell脚本时，都把OPTIND初始化为
1。如果某个选项需要参数，getopte就把该参数放在变量OPTARG中.Shell不会自动把OPTIND重置：如
果在同一个shell中多次调用getopte时要使用新的参数，则必须手动重置它。
处理完选项结尾时，getopte会退出并返回一个大于零的状态：OPTIND会指向第一个非选项参数的下
标：而名称被设为"?”。
getopte参演会分析位置参数，但如果参数表中的参数更多，getopte就会转而分析参数表。
getopte可以通过两种方式报错。如果选项字符串的第一个字符是冒号，则忽略报错。正常情况下，如
果遇到无效选项，或者忽略了选项的参数，就会打印诊断信息。如果把变量OPTERR设为0，则不会打印错
误信息，即使选项字符申的第一个字符不是冒号。
如果遇到了无效的选项，
getopte就会在名称里面放入".这时如果不忽略报错，就打印一条错误信
息并重置OPTARG：如果忽略报错，就把该选项放在OPTARG中而不打印错误信息，如果某个必要参数没
有找到，并且getopte没有忽略报错，则在名称中放入间号（"?）并重置OPTARG且打印错误信息。如果
getopt&忽略错误，则在名称中放入冒号（""），并把OPTARG设为找到的选项字符。
K.hash
hash[-r][-p文件名][dt1][名称]
记住参数名称所指定的命令的完整路径，使得以后再启动这个命令时不需要再搜索它，命令是通过搜索
$PATH中列出的目录而找到的。“-p"选项助记词：Path，指定路径可以禁止路径搜索，并用文件名指定命令的位
置。“=r"选项的记词：bdo，重收使得shell忘记所有已经记住的位置。“=d”选项功记词：Deatiaticn，日标使得shell
忘记它已经记住的名称的每个位置。如果指定了“-t"选项助记词：prinr，打印，则打印每个名称对应的完整路
径：如果“-t"指定了多个名称参数，则打印完整路径时还在前面打印记住的命令名称。“-1”选项助记词：
列出把输出格式化成可以重新作为输入的形式。如果没有给定参数，或者只给定了“-1”，则打印与每个所记
住命令的有关信息，返回状态是零，除非没有找到名称，或者遇到了无效的选项。
L.
pwd
pwd [-LP]
打印出当前工作目录的绝对路径。如果给定了“-p"选项助记词：Pysica1，物理路径，则打印的路径中不会包含符
号链接。如果给定了“-L”选项助记词
非在计算当前工作目录时遇到了错误，或者指定了无效的选项。
行号匠接
则打印的路径中可能包含符号链接，返回状态是零，除
p31
目录
BASH 中文文
---
## Page 43
第四章SHELL内部命令
4.1波恩SHELL的内部命令
+ee e ee ee e ee e e e e e ee e e e ee e ee ee e e e ee e e e ee e e e ee ee e ee e @
 M.
readonly
readonly [-aAp][名称[值]]--.
把每个名称标志为只读。后续语句就不可以更改这些名称的值。如果指定了“-f"助记词：Functi，函数，则每
个名称都是指shell函数。“-a”选项的记词：Arry，数组的意思是每个名称都是下标数组变量：“-A"选项功记词：
Array，名称数细的意思是每个名称都是键值数组变量。如果没有给定参数名称，或者给定了“-p”选项助记词：
Frint，打印，则打印所有只读的名称。“p”选项能够把输出格式化成可以重新作为输入的形式。如果变量名
称后面是“值”的形式，变量名称的值就会被设为值。返回状态是零，除非遇到了无效的选项，某个参数名
称是无效的shell变量或函数名，或者“-f"选项指定了一个不是shell函数的名称。
N.return
return [n]
使得shell函数退出并返回状态n。如果没有指定n，则返回状态是函数中最后一个被执行的命令的退出状
态。这个命令也可以用来结束执行一个用内部命令，或Bource执行的脚本，并把n或者这个脚本中最后
一个被执行的命令的退出状态作为脚本的退出状态。如果关联了RETURR陷阱，它就会参函数或脚本退出以
后执行。如果在函数以外，或者在不是用，或Bource执行的脚本中使用，它的退出状态就是非零，
O.shift
shift []
把位置参数向左移动n个位置，位置参数n+1.-$被重命名为$1--$-n，而从$到$#-n+1的位置参
数被重置了。n必须是个小于或等于$#的非负数。如果n是零，或者比S#大，则不会改变位置参数。如
果没有指定n，则默认为1。返回状态是零：除非n比$罐大或者小于零，这时返回零。
P.
test和[
计算条件表达式表达式的值，运算符和运算数都要是独立的参数。表达式是由原子表达式（参见
6.4Bash条件表达式]，p59）组成的。test不接受任何选项，也不能用参数“--"来表示选项的结束。如果
使用【的形式，则这个命令的最后一个参数必须是]。可以用下面的运算符把表达式连起来，这些运算符是
按照优先级的降序排列的，求值结果依赖于参数的个数，如下所示。
！表达式
如果表达式为假，则真。
（表达式）
返回表达式的值，这可以用来改变运算符的正常优先级。
表达式一=8表达式二
如果表达式一和表达式二都为真，则返回真。
表达式一=表达式二
如果表达式一或者表达式二有一个为真，则返回真。
内部命令test和【按照基于参数个数的规则，对表达式进行求值，
0个参数（没有参数）
表达式是假的。
1个参数
当且仅当这个参数非空时，表达式的值为真。
BASH中文文档
目录
p32
---
## Page 44
4.1波恩SHELL的内部命令
第四章SHELL内部命令
2个参数
如果第一个参数是“！"，则当且仅当第二个参数为空时表达式的值才为真。如果第一个参数是
个单目条件运算符（参见56.4Bash条件表达式]，p59），则如果单目测试为真，表达式就为真。如果第
一个参数不是个有效的单目运算符，则表达式为假。
3个参数
如果第二个参数是双目运算符（参见56.4Bash条件表达式]，p59），则表达式的值是把第一
和第三个参数作为运算数的双目测试的结果。如果有三个参数，则"-a”和“-o"就是双目运算符。如
果第一个参数是“！”，则结果是把第二和第三个参数作为运算数的双目测试的结果。如果第一个参数
是“（"且第三个参数是"）”，则结果是第二个参数的单目运算的结果。否则，表达式是假的。
4个参数
如果第一个参数是“！”，则结果就和其余三个参数构成的表达式的值相反。否则根据上面列出
的优先级和规则分析和计算表达式的值。
5个参数
根据上面列出的优先级和规则分析和计算表达式的值。
Q.times
tines
打印出shell及其子进程所使用的用户时间和系统时间。返回状态是零（参见&2[管道]，p7）。
R.trap
trap[-1p[参数][信号指示.-]
当shell接收到信号指示中的信号时，就会读取和执行参数中指定的命令。如果省略了参数（这时只有一
个信号指示）或者参数是“-”，则每个指定信号的处理都重置为shell启动时的值。如果参数是空字符串，则
shell及它所启动的命令会忽略每个信号指示指定的信号。如果省略了参数并给定了“p"选项的记词：rist，打
，则shell会显示每个信号指示所关联的trBap命令。如果没有给定参数或者只给定了“p"选项，trap会
把每个信号数字所关联的命令输出格式化成可以重新作为shell输入的形式。“-1"选项助记词：Lit，列出会使
shel1打印信号名称和它们所对应数字的列表。每个信号指示都是一个信号名称或者信号数字。信号名称对
大小写不敏感，其前面的SIG可以省略。如果信号指示是0或者EXIT，则当shell退出时就会执行参数。
如果参数是DEBUG，则每次执行简单命令、for命令、case命令、Belect命令、算术for命令的每个算术
表达式，以及shell函数的第一个命令之前，都会执行命令参数。关于内部命令ghopt的extglob选项如
何影响DEBUG陷阱的细节，请参见587[内部命令shopt]p46.如果信号指示是ERR，则当一个简单命令因
为下列原因返回非零的值时就执行命令参数。如果失败的命令是紧跟在关键词until或vhile后的命令队
列的一部分，或者是在关键词if或elif后的测试命令的一部分，或者是显或1I命令队列中所执行命令
的一部分，或者该命令的返回状态经由！反转，则不会执行ERR陷阱。errexit选项也服从同样的条件。
如果信号指示是RETURN，则每当由内部命令。或source执行的shell函数或脚本执行结束时，都会执行
命令参数。进入shell时就被忽略的信号不可以再用于陷阱或者被重置。当创建了子进程时，已经设了陷阱
没有被忽略的信号将在子进程中被设为原来的值。
返回状态是零，除非信号指示指定的不是有效信号。
S.
umask
umask [p] [-s] [模式]
把shell进程的文件创建掩码设为模式。如果模式以数字开头，它就当八进制数解释：否则，它就被当作类
似于chnod命令所接受的掩码模式符号。如果忽略了模式，则打印当前的掩码值。如果给定了“-s"选项助
记词：8gbolic，式符号却没有给定参数模式，则以符号形式打印掩码。如果给定“-p"选项的记词：Protty-Frist，格
++++++++++++++++++++++++++++++++++++++++++++*
p33
目录
BASH中文文
---
## Page 45
第四章SHELL内部命令
54.2 BASH的内部命令
式化打印并省略了模式，则把输出格式化成可以重新作为输入的形式。如果模式更改成功或者没有给定模式，
则返回零：否则返回非零。
注意，如果模式当八进制数解释，则掩码中的每个数都要用7去减。所以，掩码为022就会得到755
的权限。
T.
unset
unset[-fv][名称]
删除各个指定的变量或函数名称。如果没有指定选项，或者指定了“-v"选项助记词：Variable，变量，则每个名称
都是指shell变量。如果指定了“-r"选项助记词：Punctio，函数，则每个名称都是指shell 函数，这些函数的定
义将被删除。只读变量和函数不可以剩除。返回状态是零，除非名称是只读的。
S4.2Bash的内部命令
本节介绍在Bash中独特或者经过扩展的内部命令。这些命令中有些在POSIX标准中已经作了规范，
A.
alias