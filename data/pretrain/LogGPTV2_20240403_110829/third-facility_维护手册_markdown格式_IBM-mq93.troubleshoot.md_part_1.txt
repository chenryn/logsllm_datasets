9.3
Troubleshooting and Support for IBM MQ
IBM
Note
Before using this information and the product it supports, read the information in “Notices” on page
503.
This edition applies to version 9 release 3 of IBM® MQ and to all subsequent releases and modifications until otherwise
indicated in new editions.
When you send information to IBM, you grant IBM a nonexclusive right to use or distribute the information in any way it
believes appropriate without incurring any obligation to you.
© Copyright International Business Machines Corporation 2007, 2023.
US Government Users Restricted Rights – Use, duplication or disclosure restricted by GSA ADP Schedule Contract with
IBM Corp.
Contents
Troubleshooting and support................................................................................. 5
Making initial checks....................................................................................................................................6
Making initial checks on AIX..................................................................................................................7
Making initial checks on IBM i..............................................................................................................20
Making initial checks on Linux.............................................................................................................29
Making initial checks on Windows.......................................................................................................42
Making initial checks on z/OS..............................................................................................................51
Detailed troubleshooting...........................................................................................................................64
Troubleshooting AMQP problems........................................................................................................65
Troubleshooting AMS problems...........................................................................................................67
Troubleshooting command problems..................................................................................................68
Troubleshooting distributed publish/subscribe problems..................................................................72
Troubleshooting distributed queue management problems..............................................................76
Troubleshooting IBM MQ Console and REST API problems...............................................................87
Troubleshooting IBM MQ Internet Pass-Thru problems.....................................................................90
Troubleshooting IBM MQ MQI client application problems................................................................93
Troubleshooting IBM MQ .NET problems............................................................................................94
Troubleshooting Java and JMS problems............................................................................................96
Troubleshooting Managed File Transfer problems...........................................................................123
Troubleshooting message problems.................................................................................................177
Troubleshooting MQ Telemetry problems.........................................................................................178
Troubleshooting multicast problems.................................................................................................191
Troubleshooting queue manager problems......................................................................................194
Troubleshooting queue manager cluster problems..........................................................................194
Troubleshooting RDQM configuration problems...............................................................................217
Troubleshooting security problems...................................................................................................231
Troubleshooting WCF custom channel for IBM MQ problems..........................................................242
Troubleshooting XMS .NET problems................................................................................................244
Troubleshooting IBM MQ for z/OS problems....................................................................................247
Contacting IBM Support..........................................................................................................................301
Collecting troubleshooting information for IBM Support.................................................................302
Using error logs........................................................................................................................................353
Error logs on AIX, Linux, and Windows..............................................................................................355
Error logs on IBM i..............................................................................................................................358
Error logs on z/OS...............................................................................................................................361
Error logs in IBM MQ classes for JMS................................................................................................361
Suppressing channel error messages from error logs on Multiplatforms........................................362
First Failure Support Technology (FFST).................................................................................................363
FFST: IBM MQ for AIX or Linux..........................................................................................................364
FFST: IBM MQ for IBM i......................................................................................................................365
FFST: IBM MQ for Windows...............................................................................................................367
FFST: IBM MQ classes for JMS..........................................................................................................369
FFST: WCF XMS First Failure Support Technology............................................................................374
FFDC configuration for XMS .NET applications.................................................................................374
Tracing......................................................................................................................................................375
Tracing on AIX and Linux...................................................................................................................376
Tracing on IBM i..................................................................................................................................381
Tracing on Windows...........................................................................................................................391
Tracing on z/OS..................................................................................................................................395
Tracing the Advanced Message Queuing Protocol (AMQP) Service..................................................412
Tracing the IBM MQ Bridge to blockchain.........................................................................................415
Tracing the IBM MQ Bridge to Salesforce..........................................................................................415
iii
Tracing the IBM MQ Console.............................................................................................................416
Tracing errors in IBM MQ Internet Pass-Thru...................................................................................419
Tracing IBM MQ .NET applications....................................................................................................421
Tracing JMS/Jakarta Messaging and Java applications....................................................................425
Tracing Managed File Transfer resources on Multiplatforms............................................................443
Tracing Managed File Transfer for z/OS resources............................................................................450
Tracing the REST API.........................................................................................................................464
Tracing TLS: runmqakm, strmqikm, and runmqckm functions.......................................................466
Tracing the WCF custom channel for IBM MQ...................................................................................467
Tracing XMS .NET applications..........................................................................................................468
Enabling dynamic tracing of LDAP client library code.......................................................................474
Recovering after failure...........................................................................................................................475
Disk drive failures...............................................................................................................................476
Damaged queue manager object.......................................................................................................477
Damaged single object.......................................................................................................................477
Automatic media recovery failure......................................................................................................477
Example recovery procedures on z/OS.............................................................................................478
Notices..............................................................................................................503
Programming interface information........................................................................................................504
Trademarks..............................................................................................................................................504
iv
IBM MQ troubleshooting and support
If you are having problems with your queue manager network or IBM MQ applications, you can use the
techniques that are described in this information to help you diagnose and solve the problems. If you
need help with a problem, you can contact IBM Support through the IBM Support Site.
About this task
Troubleshooting is the process of finding and eliminating the cause of a problem. If you have a problem
with your IBM software, the troubleshooting process for that problem begins as soon as you ask yourself
"what happened?"
A basic troubleshooting strategy at a high level involves:
1.Recording the symptoms of the problem
2.Re-creating the problem
3.Eliminating possible causes
If you need help with a problem that you are having with IBM MQ, you can contact IBM Support through
the IBM Support Site. You can also subscribe to notifications about IBM MQ fixes, troubleshooting, and
other news. For more information, see “Contacting IBM Support” on page 301.
For more information about recovering after a problem, see “Recovering after failure” on page 475.
Procedure
1.Record the symptoms of the problem.
Depending on the type of problem that you have, whether it be with your application, your server, or
your tools, you might receive a message that indicates that something is wrong. Always record the
error message that you see. As simple as this sounds, error messages sometimes contain codes that
might make more sense as you investigate your problem further. You might also receive multiple error
messages that look similar but have subtle differences. By recording the details of each one, you can
learn more about where your problem exists. Sources of error messages include:
• Problems view
• Local error log
• Eclipse log
• User trace
• Service trace
• Error dialog boxes
For more information, see the following topics:
• “Using error logs” on page 353
• “First Failure Support Technology (FFST)” on page 363
• “Tracing” on page 375
If an IBM MQ component or command has returned an error, and you want more information about a
message that is written to the screen or the log, see Messages and reason codes.
2.Re-create the problem.
Think back to what steps you were doing that led to the problem. Try those steps again to see whether
you can easily re-create the problem. If you have a consistently repeatable test case, it can help to
determine what solutions are necessary.
• How did you first notice the problem?
© Copyright IBM Corp. 2007, 2023 5
• Did you do anything different that made you notice the problem?
• Is the process that is causing the problem a new procedure, or has it worked successfully before?
• If this process worked before, what has changed? (The change can refer to any type of change that
is made to the system, ranging from adding new hardware or software, to reconfiguring existing
software.)
• What was the first symptom of the problem that you witnessed? Were there other symptoms that
were occurring at around the same time?
• Does the same problem occur elsewhere? Does only one machine have the problem or do multiple
machines have the same problem?
• What messages are being generated that might indicate what the problem is?
For more information about these types of question, see “Making initial checks” on page 6 and
“Detailed troubleshooting” on page 64.
3.Eliminate possible causes.
Narrow the scope of your problem by eliminating components that are not causing the problem. By
using a process of elimination, you can simplify your problem and avoid wasting time in areas that are
not responsible. Consult the information in this product documentation and other available resources
to help you with your elimination process. Has anyone else experienced this problem? Is there a fix
that you can download? For more information, see “Contacting IBM Support” on page 301.
Making initial checks
There are some initial checks that you can make that may provide answers to common problems that you
might have.
About this task
Use the information and general advice given in the subtopics to help you to carry out the initial checks for
your platform and rectify the problem.
Procedure
• Carry out the initial checks for your platform:
– “Making initial checks on AIX” on page 7
– “Making initial checks on IBM i” on page 20
– “Making initial checks on Linux” on page 29
– “Making initial checks on Windows” on page 42
– “Making initial checks on z/OS” on page 51
Tips for system administrators
• Check the error logs for messages for your operating system:
– “Error logs on AIX, Linux, and Windows” on page 355
– “Error logs on IBM i” on page 358
– “Diagnostic information produced on IBM MQ for z/OS” on page 253
• Check the contents of qm.ini for any configuration changes or errors.
For more information on changing configuration information, see:
– Changing IBM MQ configuration information on Multiplatforms
– Customizing your queue managers on z/OS
6 Troubleshooting and Support for IBM MQ
• If your application development teams are reporting something unexpected, you use trace to
investigate the problems.
For information about using trace, see “Tracing” on page 375.
Tips for application developers
• Check the return codes from the MQI calls in your applications.
For a list of reason codes, see API completion and reason codes. Use the information provided in the
return code to determine the cause of the problem. Follow the steps in the Programmer response
sections of the reason code to resolve the problem.
• If you are unsure whether your application is working as expected, for example, you are not unsure of
the parameters being passed into the MQI or out of the MQI, you can use trace to collect information
about all the inputs and outputs of your MQI calls.
For more information about using trace, see “Tracing” on page 375. For more information about
handling errors in MQI applications, see Handling program errors.
Related concepts
“Using error logs” on page 353
There are a variety of error logs that you can use to help with problem determination and troubleshooting.
Related tasks
“Contacting IBM Support” on page 301
If you need help with a problem that you are having with IBM MQ, you can contact IBM Support through
the IBM Support Site. You can also subscribe to notifications about IBM MQ fixes, troubleshooting, and
other news.
“Tracing” on page 375
You can use different types of trace to help you with problem determination and troubleshooting.
Making initial checks on AIX
Before you start problem determination in detail on AIX, consider whether there is an obvious cause of
the problem, or an area of investigation that is likely to give useful results. This approach to diagnosis can
often save a lot of work by highlighting a simple error, or by narrowing down the range of possibilities.
About this task
The cause of your problem could be in:
• IBM MQ
• The network
• The application
• Other applications that you have configured to work with IBM MQ
As you go through the list of initial questions to consider and follow the links to more information, make a
note of anything that might be relevant to the problem. Even if your observations do not suggest a cause
straight away, they might be useful later if you have to carry out a systematic problem determination
exercise.
When you open a case with IBM, you can include additional IBM MQ troubleshooting information
(MustGather data) that you have collected to help with investigating the problem. For more information,
see “Collecting troubleshooting information for IBM Support” on page 302.
Procedure
1.Identify characteristics of the problem
There are some initial questions that you can consider to help you to identify the cause of the problem:
• Has IBM MQ run successfully before?
• Have any changes been made since the last successful run?
IBM MQ troubleshooting and support 7
• Have you applied any maintenance updates?
• Has the application run successfully before?
• Are you receiving errors when you use special characters in descriptive text for some commands?
• Are there any error messages or return codes to help you to determine the location and cause of your
problem?
• Can you reproduce the problem?
• Does the problem affect specific parts of the network?
• Does the problem occur at specific times of the day?
• Is the problem intermittent?
2.Investigate potential problems with applications, commands and messages
If you encounter problems with IBM MQ applications, commands, and messages, there are a number
of questions that you can consider to help you to determine the cause of the problem:
• Are messages failing to arrive on the queue?
• Do messages contain unexpected or corrupted information?
• Are unexpected messages received when using distributed queues?
• Have you received no response from a PCF command?
• Are only some of your queues failing?
• Does the problem affect only remote queues?
• Is your application or system running slowly?
3.Investigate any problems connected to IBM MQ resources, including resource usage by IBM MQ
processes, problems related to insufficient resources, and your resource limit configurations.
For more information, see “Additional checks for resource problems on AIX” on page 16.
4.If you need further information to help you with identifying the cause of the problem, see “Detailed
troubleshooting” on page 64.
Related tasks
“Contacting IBM Support” on page 301
If you need help with a problem that you are having with IBM MQ, you can contact IBM Support through
the IBM Support Site. You can also subscribe to notifications about IBM MQ fixes, troubleshooting, and
other news.
“Making initial checks on IBM i” on page 20
Before you start problem determination in detail on IBM i, consider whether there is an obvious cause of
the problem, or an area of investigation that is likely to give useful results. This approach to diagnosis can
often save a lot of work by highlighting a simple error, or by narrowing down the range of possibilities.
“Making initial checks on Linux” on page 29
Before you start problem determination in detail on Linux, consider whether there is an obvious cause of
the problem, or an area of investigation that is likely to give useful results. This approach to diagnosis can
often save a lot of work by highlighting a simple error, or by narrowing down the range of possibilities.
“Making initial checks on Windows” on page 42
Before you start problem determination in detail on Windows, consider whether there is an obvious cause
of the problem, or an area of investigation that is likely to give useful results. This approach to diagnosis
can often save a lot of work by highlighting a simple error, or by narrowing down the range of possibilities.
“Making initial checks on z/OS” on page 51
Before you start problem determination in detail on z/OS, consider whether there is an obvious cause of
the problem, or an area of investigation that is likely to give useful results. This approach to diagnosis can
often save a lot of work by highlighting a simple error, or by narrowing down the range of possibilities.
Related reference
Messages and reason codes
8 Troubleshooting and Support for IBM MQ
Identifying characteristics of the problem on AIX
Some initial questions to consider to help with identifying the cause of the problem.
About this task
Use the following questions as pointers to help you to identify the cause of the problem:
• Has IBM MQ run successfully before?
• Have any changes been made since the last successful run?
• Have you applied any maintenance updates?
• Has the application run successfully before?
• Are you receiving errors when you use special characters in descriptive text for some commands?
• Are there any error messages or return codes to help you to determine the location and cause of your
problem?
• Can you reproduce the problem?
• Does the problem affect specific parts of the network?
• Does the problem occur at specific times of the day?
• Is the problem intermittent?
As you go through the list, make a note of anything that might be relevant to the problem. Even if your
observations do not suggest a cause straight away, they might be useful later if you need to carry out a
systematic problem determination exercise.
When you open a case with IBM, you can include additional IBM MQ troubleshooting information
(MustGather data) that you have collected to help with investigating the problem. For more information,
see “Collecting troubleshooting information for IBM Support” on page 302.
Procedure
1.Has IBM MQ run successfully before?
If IBM MQ has not run successfully before, it is likely that you have not yet set it up correctly. For