### Author：redflog
无论对于甲方还是乙方，信息安全都是一个非常重要且复杂的话题。引用圈内某佬的一句话“安全本身就是个伪概念，没法准确定义，只能说相对妥善而已“。初听时觉得装X，现在想想，确有几丝意味。故而每个投身安全行业的人都值得人们尊敬，因为我们都走在一条永远没有尽头的路上，与君共勉！  
本人出身网工专业（没当过一天网管），同时兼学多种网站开发（为了赚钱吃饭），初碰安全是在11年，当时为了解决一个.net应用下的报错问题（sqli..）就无法自拔的迷恋上安全，走过了啊D，御剑，wvs，metasploit等等这么些个时代，途径2家知名甲方安全公司，一家国企，目前供职于某橙色公司。从在乙方公司忘我日站，和基友们吹比菜刀里的shell是几位数到沉下心分析各种木马，开发代码，挖掘漏洞，再到进入甲方考虑如何“妥善”应对企业里的安全问题，虽然是一路小跑，但也在亦步亦趋中找到了自己的一点方向和理解，简单聊下，不喜勿喷~  
从乙到甲转型的初衷发生在国企呆的那一年，虽是国企确是偏乙方的工作，刚去的时候发现公司的网络被各路“兄弟们”搞得惨不忍睹，更有甚者翻出公司通讯录，直接找到我联系方式，调戏/威胁…，当时就恼怒的要把安全搞好，但是还没等把我的计划部署下去就已经被国企里各种all-known的事情搞得精分。离职后整整思考了一个多月，我那些带有乙方特色的防护方案即使部署了也无济于事，至多在某些领域增强了攻击捕获和拦截能力，完全没有提升整个公司安全水位，而且当时就已经感觉到甲方安全涉及到众多和业务，制度，合规，沟通等与技术没太多关联的东西，很多方案施行起来真的是有心无力。考虑再三，决定投身甲方，学补不足，做更有责任，更有嚼劲的企业安全。  
甲方安全涉及的领域实在太多了，在笔者的所在的公司，安全覆盖了技术，业务，合规，法务，等等多个大部门，但技术一个部门又涵盖了开发，运维，运营，平台等小部门，再往下还可以分为waf，app类，无线，漏洞分析，入侵检测，src等多个小分组。况且这么划分对有些领域还无法覆盖，不甚合理。甲方安全是一个体系化的存在，即在于安全团队内部的体系建设，也在于安全处置流程的体系管理，同样也在于安全与其他部门沟通约定的系统规程。  
正如我所说，甲方的安全太过复杂，没有任何人能cover所有需要关注的领域，所以下面我只是逐一列列我在甲方中关注的某些领域的问题。  
安全资产清理  
这里姑且把人员也当成企业安全运营中的资产。安全资产永远是一个企业的硬伤。说真的从乌云时代各种企业漏洞，到现在各种圈内爆出的秘闻，无不表明没有多少公司能真搞清楚自己的资产，这里所说的资产是广义的，动态的概念。资产不一定仅仅是线上/线下的服务器，有可能包含并购的公司，拉长的业务线，合作的某实验项目，还有可能是公司员工，外包员工，临时实习生，也有可能是新采购的设备，替换的运营商出口，更有可能是进行几小时测试的开发接口，临时申请的域名等等等等，这些都是实时在变，可控性有限的资产，当数据外溢到某个未知资产上时，安全受到就成几何倍数的风险，一个最为直接的例子就是有经验的白帽子往往会在新业务和并购公司上挖洞，难道风险不也是这么来的?
安全资产真的会把人弄得筋疲力尽，但这是一切一切的基础，不得不做！
漏洞扫描  
漏扫看起来简单，其实绝没那么轻松，甲方各家应该都有知名商业漏扫，任性的还可以自己写写，实在不济的也会用用破解版wvs
啥的。在乙方的时候签个渗透测试协议，注明渗透过程中造成的任何风险无需承担即可。但在甲方问题来了，如果把线上业务扫挂了！后果可能是不能承受之惩罚。某甲方公司朋友曾跟我说，每次季度线上漏扫，都要把运维，开发，运营都挨个求爷爷告奶奶问一遍，让大家签字/在场才能进行扫描，碰到不好交流的一脸板砖相。这是甲方普遍出现的问题，我们的解决方案只能是尽可能降低poc危害程度，压低线程，分区域扫描，做好备份计划。有的时候业务的脆弱性远比想象中大的多！漏扫的坑远不至这个，漏扫部署的位置也很重要，外网，内网，测试，专线，应用在哪里扫描理应覆盖哪里，多少公司把漏扫放在办公网，殊不知根本扫不到专线应用。至于漏扫规范，紧急事件漏扫，漏扫能力评估等等问题更是纠缠不断。
漏洞推修  
扫到了漏洞就需要对漏洞进行修复，这也是企业里的老大难问题。生产环境修复涉及业务迁移和波动，如何沟通解决让老大们拍板确定是个问题；测试环境漏洞层出不穷，发现的比修复的还多也是个问题；碰到漏洞实在无法及时修复，但风险又很高，如何调拨安全能力重点关注这些威胁还是问题。笔者在漏洞推修问题上碰到了太多坑，什么原因都有，总之漏洞推修远比乙方渗透报告里那几行字复杂出无数倍。