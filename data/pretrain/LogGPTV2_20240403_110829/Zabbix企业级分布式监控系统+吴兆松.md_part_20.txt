Condito
Action
Remove
(B)
Newcondition
Tnagername
like
Add
图6-18
AND/OR的示例如下：
Host group = Oracle servers
Host group = MySQL servers
Trigger name like'Database is down'
Trigger name like'Database isunavailable'
换成表达式为：
rigger name like'Database is down'or Trigger name like'Database is
unavailable')
Hostgroup和Trigger name同时存在的条件下才能成立。
条件匹配运算符说明如表6-6所示。
表6-6
运算符
描
述
运算符
描
述
=
条件等于
like
部分匹配
>=
条件大于或等于
not like
部分不匹配
Latestevents
gtatusoftriggers
CONFIGURATIONOF MEDIA TYPES
Name
zabbix-mail
TypeEmail
SMTP serverlocalhost
SMTPhelolocalhost
PI:EMAIL
Enabled
Save
Delete
Cancel
图6-24
6.4.2创建用户
创建用户的步骤为：单击Adminstration→Users→CreateUser，如图6-25所示。
Configurationofus
IGURATION
USERGROUPS
Users
8of8found
Alias
Name
Surname
User type
Gr
Admin
Administrator
Zabbix Super Admin
2a
图6-25
用户可以配置Media，发送告警的方式，如邮件、短信等，如图6-26所示。
161
---
## Page 178
Zabbix企业级分布式监控系统
OFUSER
edia
GoogleChrox
Newmedla
Type
Email
Sendto
PI:EMAIL
Whenactive
1-7,00:00-24:00
ayissep son
Information
warning
Average
High
oisaster
Status
Enabted
AddCancel
图6-26
单击“Add”按钮添加后保存，如图6-27所示。
Email
PI:EMAIL
Add Delete selected
Save
Delete
Cancel
图6-27
如果是其他用户的告警邮件设置，其方法相同。
6.4.3
创建Actions
Actions的创建步骤为：单击Configuration→Actions→Createactions，如图6-28
所示。
History:
OFACTIONS
Operation
Namemal to usei
60minimum 60 seconds)
Default Subject(TRIGGER.STATUS}:(TRIGGER.NAME)
STATUS)
Enabled
Save
Clone
DeleteCancel
图6-28
162
---
## Page 179
第6章告警配置
单击Conditions，如图6-29所示为默认的配置参数。
ZADDIA
nceweb1
hosts>Dashboard>Configuration ofproxies>Con
Conditions
Operations
Type of calculatiol
AND
(A)and(B)
Conditions
Label Name
Action
(A)
Remove.
(B)
Remove
Newcondition
Trigger name
ike
Add
sav
clon
Delete
图6-29
如图6-30所示，配置选择发送的用户和组，以及发送介质等信息。如需配置
告警升级，请参考后面的章节。
Operations
Action operations
Steps Details
Startin
Duration(sec） Action
Immediately Default
Edit Remov
Sendmessageto
图6-30
5自定义脚本告警
6.5
1．自定义脚本告警原理
自定义告警脚本的位置在/etc/zabbix/zabbix_server.conf中，配置语句如下。
AlertScriptsPath=/etc/zabbix/alertscripts
Zabbix-Server在调用脚本的时候，会传递三个变量参数给脚本作为位置参数：
$1、$2、$3。其中，$1表示收件人；$2表示主题；$3表示内容。
例如，/etc/zabbix/alertscripts/scripts.sh脚本内容为：
#!/bin/bash
163
---
## Page 180