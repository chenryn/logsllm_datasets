2005
2006
2007
2008
2009
图18-5：住房价格相对于中等价格的住房的价格。住房价格上存
在的差距从2007年早期开始一直增长
地理区别
本节中我们将探索海湾地区不同城市的住房价格变化。因为我们查
看的是平均价格，我们必须注意不要包含只有很少的销售量的城
市。我们决定重点放在每周平均销售量至少10套的所有城市。这种
方式最后筛选出58个城市（总共是245个城市，占24%），共428415
套住房销售量（占销售总量的82%），
1691
---
## Page 1693
然后，我们计算了以周为单位的平均房价。图18-6显示了这些价
格，每个城市使用一条不同的曲线来描绘。统计学家为这种展示方
式起了一个很生动的名字：“意大利面条曲线”。很难从一大堆线条
中查看任何东西。对这种曲线的一种改进方法是对每条线进行平
滑，删除短期的变化，使我们可以重点观察长期趋势。
1.0
MB
2004
2005
图18-6：每个城市的每周平均销售价格。这种类型的绘图通常被
称为“意大利面条曲线”。它需要平滑，因为曲线中这种“周到周”之
间的变化无法检测出趋势
为了创建平滑的曲线，我们使用了广义的可加模型(GM)，它是对线
性模型的范化（Wod2006）。广义可加模型通过优化权衡切近数据并
且线条平滑的方式来拟合线条曲线。实际上，它消除了噪音数据带
来的短期影响，并且将重点集中于长期趋势。这正是我们所需要
的：我们对每天的或者每周的变化不感兴趣，而只对和住房危机相
关的长期变化感兴趣。
图18-7上方显示了平滑化后的结果。这是一个很大的改善。现在我
们可以真正看到一些模式！注意该图和第一个图在规模上的重大区
别：平滑数据已经删除了一些非常昂贵的住房的销售高峰的描述。
我们还会对每个城市指数化，正如我们之前对每个十分数指数化那
样：通过相对初始价格进行划分，使得每个城市可以有一个共同的
规模，允许我们把重点放在变化上。这一点显示在图18-7下方。
现在还存在很多变化，但是我们可以开始看到增长值模式直到2007
年年中，然后后期值开始下降。为了进一步探讨，我们需要分别查
看这些城市，如图18-8所示。该曲线图占了很大空间，但是它提供
了很多额外的信息，因此是值得的。我们可以挑选出一些有趣的模
式：伯克利和旧金山显示的高峰值较低，而下降值较少；而Mountain
View的独特之处在于它的住房价格一点都没有下降。其他城市如
Oakley、Vallejo和SanPablo，则是大起大落，高峰值很高，而跌落值
也很大。
1692
---
## Page 1694
回想一下我们之前关于SanJose城市的讨论，我们注意到，原始数据
本身描述了SanJose城市的很多社区。由于这一点，有时相同的地址
被分配给多个社区，但是该数据还表明这些社区具有鲜明的特点。
Berryessa、东SanJose、北SanJose和南SanJose有相似的曲线，皇现
出很鲜明的高峰和一样鲜明的下降；而另一方面，Cambrian、San
Jose和西SanJose则没有出现这么大幅度的下降。
经过进一步调查，我们发现一个使得城市之间相互区别的主要特
征：在繁荣期价格之间的区别以及它们最近的下降幅度。我们创建
了一个新的变量，称为"价格回落”，它表示在2006年2月（繁荣期的
顶峰）和2008年11月（写本章内容时的“低谷”）之间的平均价格的
相对下降。图18-9通过新的变量对城市进行分组。这些城市的划分
是随机的，但是你可以看到每组城市如何遵循相似的模式：繁荣越
鼎盛，崩溃越惨烈。这意味着这单个数字可以很好地总结住房危机
的繁荣和萧条方面。
1.2
百万）
1.0
销售
2004
2005
2006
2007
2008
2009
1.6
1.0
80
2004
2005
2006
2007
2008
2009
1693
---
## Page 1695
图18-7：平滑后的每周销售价格，每条曲线表示一个城市（上
图）。下图底部的曲线进行了指数化来显示价格的变化比例。模式
开始出现了
我们已经确定城市具有不同的模式，但是还不知道产生这种现象的
可能原因。地理模式，如图18-10所示，没有显示任何特别突出的，
除了受灾最严重的地区通常是旧金山市的北部和东部。这并不能提
供有力的说服力，因此我们需要寻找更多的数据，可以帮助我们获
得更深入的理解。
人口普查信息
美国人口普查局提供了在县、市两个级别的最新调查的人口统计信
息。quickfacts网站（比如
http：//quickfacts.census.gov/qfd/states/06/0649670.html)显示了每个城
市的很多有趣的人口统计变量。遗憾的是，城市级别的数据无法简
单地通过下载获取，但是我们可以采用脚本（正如那些我们使用的
销售数据）来收集人口统计信息，并把它转化为csv格式。此外，在
人口普查数据和销售数据中，城市的定义有一点区别，因此我们从
全部58个城市中只匹配了46个。人口统计数据没有覆盖我们选择的
一些城市，因为这些城市的人口低于某些截断值（阔值）；而另一
方面正如我们之前讨论SanJose城市时所指出的，一些住房数据称之
为“城市"的，实际上是更大城市范围内的社区。
1694
---
## Page 1696
Fairheld
LosGato
North San Jo
Dakl
Pittsbu
SanJose
anRafa
itaC
050709
图18-8：每个城市的销售价格图，已经进行了平滑化和指数化。
这些曲线和图18-7中下方的图的各条交叠的曲线（意大利面条曲
线）完全相同。SanPablo的曲线显示住房市场的繁荣和萧条：伯克
利的曲线显示变化幅度更小：MountainView则是唯一一个价格还在
上升的城市
1695
---
## Page 1697
-0.2.0
0.0.2
1.6
1.4-
1.2
1.0
0.8
0.4,0.6
(0.6,0.8)
(0.8,1]
2
1.0
040506070809040506
080090500
图
18-9：根据城镇的价格回落对曲线进行分组图。图中左上方的
城镇价格下降最大（在0.8和1之间，或80%打破100%）：图中右下
方的城镇(MuntainView)是唯一价格没有下降的。每个组内的模式是
相似的，表明单个数字提供了很有用的方式把城市划分成组
1696
---
## Page 1698
回落
0.10
0.25
0.50
0.75
方向
图18-10：价格回落的地理分布。降价最严重的城镇是北部和东
部。单个环表示MountainView的地理位置，它是唯一销售价格继续
增长的城市
一看人口统计变量就能发现影响最严重的城市有大量的婴儿和小
孩，家庭成员更多，学士学位更少，交通时间更长。更重要的是，
这些城市的平均收入也更低，这可能是导致其他关系的主要因素。
图18-11包含了三个散点图，说明了住房价格回落和收入、大学生比
例以及交通时间的关系。价格回落和交通之间的关联度很低，但是
注意交通时间最长（超过35分钟）的所有城市在价格上有特别大的
回落。住房危机看起来在更贫困的地区，受到的冲击影响更大。
县级人口普查数据包含比城市数据更多的变量，因此我们分析了县
级数据来进一步解释住房危机。图18-12中上方的图显示，对于我们
有销售数据的任何县，描绘了住房单元个数的变化比例（从2000~
2006年）和2008年的平均销售价格比较。在最近住房价值和新建筑
1697
---
## Page 1699
数据之间存在很强的负面关系。换句话说，最近几年绝大多数的建
筑繁荣发生在更贫困的社区，正如我们之前所述，有些地区其后继
的价格疲软是最严重的。特别是SanJoaquin县，它的城镇价格都很
低，从最近几年到现在为止，有更多的新建筑。应该注意的是，这
些城市中，有些我们没有很多的销售数据（比如SanBenito和Santa
Cruz)，但是这些关系的全局的本质还是非常清晰的。图18-12中下方
的图更进一步说明了这个效果，它也显示了住房单元从2000～2006
年的比例变化，但是它是和县级的2005年人均收入比较，从人口普
查数据中获得。我们注意到该图和前一个图存在相似性，而且它进
一步说明了新建筑的密度在相对不富裕的地区更大，即使将统计的