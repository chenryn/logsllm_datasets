## Page 215
应当是一个数字，该指令取出第n个（从o开始的）子句，其中n是该参数的值。
处理。在没有修饰符或参数的情况下，该子句用数值索引选择。～[指令使用一个格式化参数，它
对应的~]，在它们之间是一组由~；所分隔的子句。～[指令的任务是选取一个子句，随后由FORMAT
符串之中的简单控制构造。其中之一是你在第9章里曾经用过的条件指令～[，该指令闭合于一个
18.7
词，指的是以字母和数字组成的字符序列，各单词间由既非字母又非数字的字符分隔。）
将所有单词首字母大写；而同时使用两个修饰符将使全部文本转化成大写形式。（这里所说的单
小写。
都要与一个～）成对使用，由控制字符串中两个标记之间的部分所生成的输出将被全部转化成
出FORMAT中的某些部分。
些它可以处理的情况是很有用的。而我将很快讨论的～[指令可以提供更灵活的方式来有条件地输
·最后一个用来输出英语文本的指令是～（，它允许你控制输出文本中的大小写。每一个～（
除了那些插入参数和修改其他输出的指令以外，FORMAT还提供了一些指令用来实现控制字
198
可以使用@符号来修改～（的行为，将一段文本中第一个词的首字母变成大写；使用冒号可以
如果最后一个子句分隔符是～：;而不是～;，那么最后一个子句将作为默认子句提供。
很明显，~P不能解决所有复数化问题，并且对于生成其他语言的消息也没有帮助，但对于那
(format ni1"~[cero~;uno~;dos~:;mucho~]"3)
如果该参数的值大于子句的数量，那么不打印任何东西。
（formatnil"~:@（~a~）"
(formatnil
(formatnil
(formatnil
（formatnil "~rfamil~:@p"1)
使用e修饰符与冒号修饰符组合使用，~P将输出y或ies。
（formatnil
(formatnil
formatnil
(formatnil
(formatnil"~r file~:p"1)
条件格式化
第18章
"~[cero~;uno~;dos~]"
"~r famil~:@p"
"~r famil~:@p"
一些FORMAT秘诀
www.TopSage.com
0)
10)
→"cxxiv"
→"zero files
→"one file"
→
→"onefamily"
1）
"ten families"
"zero families
→"dos
→“uno"
→"mucho"
→"thequickbrown fox
---
## Page 216
然后处理控制字符串"～a，“，重复操作直到该列表的所有元素都已使用。
FORMAT将重复处理该控制字符串。在下面的示例中，～{使用单个格式化参数，列表（123），
符串来处理，它们从～{指令所使用的列表中取得其参数。只要被迭代的列表尚有元素剩余，
配对使用一样，～{指令也必须和一个闭合的~}成对使用。两个标记间的文本将作为一个控制字
式的FORMAT参数列表上进行迭代。
18.8迭代
可以回过头来再次使用该参数，然后再处理其子句。
注意，任何一个子句都可以是空的，但指令中必须含有～;作为分隔。
“通过或失败”消息，像下面这样：
时处理第一个子句，而在其他情况下处理第二个子句。在第9章里，你曾经使用该~“变体来生成
默默忽略在处理控制字符串时没有被使用的任何参数。
子句。第一个指令使用零到两个参数，第二个指令在需要的时候会再使用一个参数。FORMAT将
然后像这样使用它：
面这样的格式字符串：
的，但回顾一下作为前置参数的#代表需要处理的剩余参数的个数。这样，你可以定义一个像下
不带修饰符时，～{使用一个格式化参数，它必须是一个列表。和～[指令必须与一个~]指令
最后，借助@修饰符，指令～“可以只带一个子句。该指令使用一个参数，并且当它是非空时
(21nsax-asa "[这样的特殊标识，那么有几种方式可以做到
(format nil "I saw 
(0 "'[saA!:J'sa]~*~[a  mes I Iu euiog)
(format nil *english-list*′()) →""
(format nil 
(format nil "I saw ~[no~:;~:*~r~] el~:*~[ves~;f~:;ves~]." 0) → "I saw no elves."
一种用途：
跳，跳，跳
~{~#[~;~a~;~a and ~a~:;~@{~a~#[~;， and ~:;， ~]~}~]~:}")
n1
[~:~!:~ou]~ mes
saw
~rel~:*~
www.TopSage.com
el~:*~[ves~;f~:;ves~]. 
el
2）
↑
→ "I saw zero elves.
:ves~
IT
 saw two elves.
 saw one elf."
18.9跳，跳，跳
21
1
→
saw
one elf.
201
---
## Page 219
的全部指令。但在本章中所讨论的这些指令对于目前来说应当足够使用了。
指令，它允许你调用任意函数来处理下一个格式化参数。还有所有用于生成表格和优美打印输出