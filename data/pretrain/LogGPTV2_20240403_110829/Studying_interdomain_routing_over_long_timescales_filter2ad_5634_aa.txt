title:Studying interdomain routing over long timescales
author:Giovanni Comarela and
Gonca G&quot;ursun and
Mark Crovella
Studying Interdomain Routing over Long Timescales
Giovanni Comarela
Boston University
PI:EMAIL
Boston, USA
Gonca G ¨ursun
Boston University
PI:EMAIL
Boston, USA
Mark Crovella
Boston University
PI:EMAIL
Boston, USA
ABSTRACT
The dynamics of interdomain routing have traditionally been stud-
ied through the analysis of BGP update trafﬁc. However, such stud-
ies tend to focus on the volume of BGP updates rather than their
effects, and tend to be local rather than global in scope. Studying
the global state of the Internet routing system over time requires the
development of new methods, which we do in this paper. We de-
ﬁne a new metric, MRSD, that allows us to measure the similarity
between two preﬁxes with respect to the state of the global routing
system. Applying this metric over time yields a measure of how
the set of total paths to each preﬁx varies at a given timescale. We
implement this analysis method in a MapReduce framework and
apply it to a dataset of more than 1TB, collected daily over 3 dis-
tinct years and monthly over 8 years. We show that this analysis
method can uncover interesting aspects of how Internet routing has
changed over time. We show that on any given day, approximately
1% of the next-hop decisions made in the Internet change, and this
property has been remarkably constant over time; the correspond-
ing amount of change in one month is 10% and in two years is 50%.
Digging deeper, we can decompose next-hop decision changes into
two classes: churn, and structural (persistent) change. We show
that structural change shows a strong 7-day periodicity and that it
represents approximately 2/3 of the total amount of changes.
Categories and Subject Descriptors
C.2.3 [Network Operations]: Network monitoring; C.2.5 [Local
and Wide-Area Networks]: Internet – BGP
General Terms
Measurement
Keywords
BGP; Interdomain Routing
Permission to make digital or hard copies of all or part of this work for personal or
classroom use is granted without fee provided that copies are not made or distributed
for proﬁt or commercial advantage and that copies bear this notice and the full cita-
tion on the ﬁrst page. Copyrights for components of this work owned by others than
ACM must be honored. Abstracting with credit is permitted. To copy otherwise, or re-
publish, to post on servers or to redistribute to lists, requires prior speciﬁc permission
and/or a fee. Request permissions from permissions@acm.org.
IMC’13, October 23–25, 2013, Barcelona, Spain.
Copyright 2013 ACM 978-1-4503-1953-9/13/10 ...$15.00.
http://dx.doi.org/10.1145/2504730.2504771.
1.
INTRODUCTION
There are many aspects of the interdomain routing system that
are important to understand, including its stability, scalability, and
security. However, a particularly difﬁcult problem is understanding
the overall structure of interdomain routing and how it evolves over
time. The immense size, complexity, and continuous growth of the
system make it challenging to gain a useful understanding of the
nature of routing changes over time.
This problem is important because currently there are no metrics
able to provide useful information about the rate of routing changes
of the interdomain routing system. Such metrics could contribute
at the understand the impact of de-peering disputes, link failures,
merging of autonomous systems and any other event that may affect
globally the routing structure of the Internet.
To address this challenge, we focus in this paper on answering
basic questions about how Internet routing has changed over time.
As a ﬁrst step, we are interested in characterizing the rate of change
of the routing system and the dynamics of its change. We seek to
answer these questions for the system as a whole (i.e., globally)
and over long timescales. In this respect we differ from most prior
work which has asked more speciﬁc questions about the evolution
of Internet routing.
We believe that one reason that temporal change has not been ex-
tensively studied to date is that good methods and metrics to study
it have not existed. Accordingly, the ﬁrst contribution we make is to
propose a metric that can be used to capture the dynamics of rout-
ing change, and show how to apply it to available BGP data. The
key idea behind our approach is that the entire state of the global
routing system at any time can be captured as a large set of tuples
that express the next-hop decisions made by each AS with respect
to each preﬁx. From this starting point, we deﬁne a natural mea-
sure of change for this set of next-hop decisions, and then show the
utility of the measure.
This kind of approach to the study of interdomain routing moves
away from studying the system in terms of an AS topology. Rather
than focusing on an imperfectly understood topology, we focus on
the fundamental decisions that are made by each AS, namely, its
next-hop choices. Further, our approach also avoids the problems
of studying routing in terms of BGP update messages, which are
very difﬁcult to interpret in a global fashion. Analyzing BGP up-
dates is problematic, requiring special methods and heuristics, be-
cause BGP trafﬁc represents a variety of effects (table dumps as
well as route changes) and because many messages do not result
in actual changes to the routing systems (e.g., updates that do not
trigger new next-hop decisions in the recipient).
The new metric we develop is based on the general concept of
Routing State Distance (RSD) [7]. However, we show that RSD as
originally used is insufﬁcient to study the dynamics of a system that
227changes over time. Hence, we develop a signiﬁcant improvement
to RSD, called Multiple Next-hop Routing State Distance (MRSD).
MRSD has the advantage of being applicable in a much wider set
of routing systems than the original RSD, while still capturing the
same concept. Further, whereas the original concept of RSD was
developed to compare different preﬁxes, in this study we apply
MRSD to compare routing to the same preﬁx at different times.
We refer to the application of MRSD over time as Temporal MRSD
(TRSD).
We use TRSD to address our motivating questions by apply-
ing it to a large corpus of BGP data. Our raw data comes from
BGP Routing Information Bases (RIBs) made available through the
Route Views and RIPE measurement projects. We convert down-
loaded RIBs to a cleaned format for processing. The converted
data is smaller than the raw RIBs but still comprises more than
1TB (uncompressed); we store it in Hadoop Distributed File Sys-
tem (HDFS) and process it using Hadoop MapReduce.1
Our study looks at routing change at two granularities: at a daily
level, and at a monthly level. At the ﬁner timescale, we study the
daily evolution of the routing system during three distinct years:
2005, 2008 and 2011. At the coarser timescale, we study the
monthly evolution of the routing system over 8 years, from the be-
ginning of 2005 until the end of 2012.
Our results reveal some interesting aspects of Internet routing.
We show that approximately 1% of all visible next-hop decisions
change each day, and that this rate is about 10% at the timescale of
one month and 50% at the timescale of 2 years. Surprisingly, we
show that that these values are remarkably constant over the period
investigated, despite the immense change and growth of the net-
work during our period of study. We also show a decomposition of
the daily TRSD time series in two components, intended to capture
the difference between sustained (policy-driven) changes in routing
versus churn (temporary changes, e.g., due to equipment failures).
About 2/3 of changes on a daily basis fall into the sustained cat-
egory, with the remaining 1/3 classiﬁed as churn.
Interestingly,
we show that sustained changes show a strong weekly periodicity,
with the majority of sustained changes made in the workweek. On
the other hand, routing churn is better described as noise without a
strong periodic component. Finally, we also study the relative rate
of routing changes across different ASes. We show that this rate is
very long-tailed, i.e., that a small fraction of ASes are responsible
for the vast majority of changes to next-hop decisions.
The remaining of this paper is organized as follows. Section
2 brieﬂy summarizes some related work. Section 3 presents the
notation and deﬁnitions while Section 4 presents our data collec-
tion methodology. Measurement results are presented in Section 5
and ﬁnally, discussions, conclusions and future work directions are
stated in Section 6.
2. RELATED WORK
The goals and methods of our study differ from or build on prior
work in a number of ways.
BGP instability measurement: Considerable prior work has
looked at the stability (or instability) of the interdomain routing
system, including [11, 8, 12, 9, 4]. On one hand, these studies
are related to ours in also performing long timescale studies of the
BGP system. However, these studies do not emphasize the global
evolution of routing decisions but focus mainly on the dynamics
of routing trafﬁc. They focus on characterization and analysis of
BGP messages: how to understand BGP trafﬁc dynamics over time,
and how to characterize stability of BGP routing for speciﬁc des-
1Our source code is available by email request to the authors.
tinations. Our focus is on the changes to next-hop decisions made
throughout the global routing system.
Longterm Internet evolution: Some other studies have looked
at global properties of the AS-level Internet over multi-year
timescales. In particular, [13] explores a dataset composed of AS
paths collected from 2005 to 2009, in order to show that the Inter-
net is ﬂattening. Another study is [3], in which the authors ana-
lyzed the growth of the Internet over a period of 10 years, focusing
on the economical roles played by each AS, the types of relation-
ship between ASes, and differences across geographical regions.
Our work complements those studies by looking at similarly long
timescales, but focusing on more basic questions such as the rate
of change in routing, the nature of routing churn, and the ASes re-
sponsible for the most routing changes.
Routing State Distance: Finally, we mention that Routing State
Distance (RSD) was originally used in [7] and [6], but the deﬁnition
of RSD differs in important ways from the more general MRSD
metric we deﬁne here. Our deﬁnition of MRSD is a generalization
of RSD; it extends RSD to additional routing conﬁgurations that
RSD could not handle, while remaining equivalent to RSD for any
cases in which RSD can be used.
3. NOTATION AND DEFINITIONS
In this section we deﬁne the metrics we use to analyze change in
the global routing system.
3.1 Multiple next-hop RSD
Our starting point is the notion of Routing State Distance (RSD)
as deﬁned in [7]. Brieﬂy, RSD is a metric that deﬁnes the ‘distance’
between two destinations (e.g., preﬁxes) as the number of nodes
which choose different next-hops for the two destinations.
While this general concept is a good starting point for studying
routing changes, it has drawbacks. The main problem with RSD as
deﬁned in [7] is that it assumes that each node in the network has
a unique next-hop towards any destination. In interdomain routing,
where nodes are ASes and destinations are preﬁxes, this property
does not hold. In [7], the authors decided to proceed as [10], i.e.,
they partitioned Autonomous Systems in such a way that each of its
parts (denoted “quasi-routers”) did not have more than one routing
option to reach any preﬁx. Although that was a natural choice,
this solution has a number of drawbacks. First, it can not be easily
generalized to other routing sytems with multiple next-hops, such
as OSPF with Equal Cost Multi-Path (ECMP). Second, identifying
quasi-routers optimally is a NP-hard problem [5]. Third, and most
important for our study, there is no natural way to extend the quasi-
router approach to routing systems that change over time, which
introduces serious problems for longitudinal analyses.
Hence, we need to deﬁne a new metric that handles the case
of multiple next-hops in a cleaner, more robust fashion: MRSD.
MRSD avoids the problems of RSD by allowing next-hops deci-
sions to be expressed as sets (instead of unique elements). MRSD
then uses Jaccard distance to compare the next-hop sets.
Formally, let G(V, E) be a directed graph where V is a set of
vertices and E is the set of edges. For all source-destination pairs
(u, v) ∈ V × V we deﬁne Nu,v as the set of next-hops from u