slow/main.go)
Allthat’sleftistoplugtheaddressvariablefromthe
previouscodeexampleintoDial(network,addressstring),and
implementthesameerrorcheckingfromtheprevioussection
totestportavailability.Youshouldalsoaddsomelogicto
closetheconnectionifitwassuccessful;thatway,connections
aren’tleftopen.FINishingyourconnectionsisjustpolite.To
dothat,you’llcallClose()onConn.Listing2-3showsthe
completedportscanner.
packagemain
import(
"fmt"
"net"
)
funcmain(){
fori:=1;i")
returnos.Stdin.Read(b)❸
}
//FooWriterdefinesanio.WritertowritetoStdout.
❹typeFooWriterstruct{}
//WritewritesdatatoStdout.
❺func(fooWriter*FooWriter)Write(b[]byte)(int,error){
fmt.Print("out>")
returnos.Stdout.Write(b)❻
}
funcmain(){
//Instantiatereaderandwriter.