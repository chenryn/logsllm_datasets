3.  **实时性**：对于实时性的讨论，会牵涉到流式处理框架的应用场景。Spark
    Streaming将流式计算分解成多个Spark
    Job，对于每一段数据的处理都会经过Spark
    DAG图分解，以及Spark的任务集的调度过程。对于目前版本的Spark
    Streaming而言，其最小的Batch
    Size的选取在0.5\~2秒钟之间（Storm目前最小的延迟是100ms左右），所以Spark
    Streaming能够满足除对实时性要求非常高（如高频实时交易）之外的所有流式准实时计算场景。
4.  **扩展性与吞吐量：**Spark目前在EC2上已能够线性扩展到100个节点（每个节点4Core），可以以数秒的延迟处理6GB/s的数据量（60M
    records/s），其吞吐量也比流行的Storm高2～5倍，图4是Berkeley利用WordCount和Grep两个用例所做的测试，在Grep这个测试中，Spark
    Streaming中的每个节点的吞吐量是670k records/s，而Storm是115k
    record。
> ![clip_image008](media/image3.jpeg){width="5.09375in"
> height="2.2291666666666665in"}
Spark Streaming与Storm吞吐量比较图
3.  **试验验证**
    1.  **逻辑架构图**
![C:\\Users\\lai\\AppData\\Local\\Temp\\WeChat
Files\\333617307192456392.png](media/image4.png){width="5.770833333333333in"
height="3.9791666666666665in"}
**单Collector单数据源接收验证**
**测试方法：**
通过压数工具制造单一机器数据采集数据源，数据接收端为单collector，以5000eps为基准值，每隔固定时间10分钟，逐级增加2000eps，通过manager界面收集测试数据，直到数据接收性能达到拐点。
**索引日期：**
20170720
+------------+------+----------+--------+----------+-------+-------+
| 测试周期   | eps  | c        | 进     | I/O      | 数据  | tag   |
|            |      | pu使用率 | 程占用 |          | 总量  |       |
|            |      |          |        | （写字节 |       |       |
|            |      | 峰       | 物     | 数/秒）  |       |       |
|            |      | 值/均值  | 理内存 |          |       |       |
+============+======+==========+========+==========+=======+=======+
| 第         | 5000 | 13%/8.8% | 377MB  | 657.8    | 26    | ap    |
| 1个10分钟  |      |          |        |          | 60000 | ache1 |
+------------+------+----------+--------+----------+-------+-------+
| 第         | 7000 | 2        | 380MB  | 1048.3   | 42    | ap    |
| 2个10分钟  |      | 0%/15.9% |        |          | 00000 | ache2 |
+------------+------+----------+--------+----------+-------+-------+
| 第         | 9000 | 4        | 383MB  | 1184.3   | 54    | ap    |
| 3个10分钟  |      | 1%/23.9% |        |          | 00000 | ache3 |
+------------+------+----------+--------+----------+-------+-------+
| 第         | 1    | 5        | 390MB  | 1439.5   | 66    | ap    |
| 4个10分钟  | 1000 | 5%/26.9% |        |          | 00000 | ache4 |
+------------+------+----------+--------+----------+-------+-------+
| 第         | 1    | 62%/37%  | 422MB  | 1672.2   | 78    | ap    |
| 5个10分钟  | 3000 |          |        |          | 00000 | ache5 |
+------------+------+----------+--------+----------+-------+-------+
CPU总体变化趋势：
![](media/image5.png){width="4.21875in" height="2.8229166666666665in"}
内存总体变化趋势：
![](media/image6.png){width="4.239583333333333in" height="2.84375in"}
I/O总体变化趋势：
![](media/image7.png){width="4.375in" height="2.9375in"}
如上述几张图所示：5个凸起波纹分别为5次测试区间内的CPU/内存/磁盘io的趋势变化，单台磁盘写入峰值可达到50000KBps，并未达到性能拐点。
**单Collector多数据源接收测试**
**测试方法：**
通过压数工具制造2个机器数据采集数据源，数据接收端为单collector，以5000eps为基准值，每隔固定时间10分钟，逐级增加2000eps，通过manager界面收集测试数据，直到数据接收性能达到拐点。
**索引日期：**
20170721
+------------+------+-----------+--------+---------+--------+-------+
| 测试周期   | eps  | cpu使用率 | 进     | I/O     | 数     | tag   |
|            |      |           | 程占用 |         | 据总量 |       |
|            |      | 峰值/均值 |        | （      |        |       |
|            |      |           | 物     | 写字节  |        |       |
|            |      |           | 理内存 | 数/秒） |        |       |
+============+======+===========+========+=========+========+=======+
| 第         | 5000 | 27%/23.9% | 379MB  | 1326.2  | 6      | ap    |
| 1个10分钟  |      |           |        |         | 000000 | ache1 |
+------------+------+-----------+--------+---------+--------+-------+
| 第         | 7000 | 42%/34.4% | 447MB  | 1957.4  | 83     | ap    |
| 2个10分钟  |      |           |        |         | 930000 | ache2 |
+------------+------+-----------+--------+---------+--------+-------+
| 第         | 9000 | 66%/40.7% | 578MB  | 2366.6  | 10     | ap    |
| 3个10分钟  |      |           |        |         | 800000 | ache3 |
+------------+------+-----------+--------+---------+--------+-------+
| 第         | 1    | 7         | 656MB  | 2751.6  | 13     | ap    |
| 4个10分钟  | 1000 | 6%/52.57% |        |         | 200000 | ache4 |
+------------+------+-----------+--------+---------+--------+-------+
| 第         | 1    | 9         | 663MB  | 3533.4  | 15     | ap    |
| 5个10分钟  | 3000 | 9%/74.25% |        |         | 600000 | ache5 |
+------------+------+-----------+--------+---------+--------+-------+
CPU总体变化趋势：
![](media/image8.png){width="4.21875in" height="2.8125in"}
内存总体变化趋势：
![](media/image9.png){width="4.291666666666667in" height="2.84375in"}
I/O总体变化趋势：
![](media/image10.png){width="4.322916666666667in"
height="2.8854166666666665in"}
![](media/image11.png){width="4.21875in" height="2.8229166666666665in"}
如上述几张图所示：5个凸起波纹分别为5次测试区间内的CPU/内存/磁盘io的趋势变化，单台磁盘写入峰值可达到75000KBps，并未达到性能拐点。
**Collector集群接收多数据接收测试**
**测试方法：**
通过压数工具制造2个机器数据采集数据源，数据接收端为2个collector组成的集群，以5000eps为基准值，每隔固定时间10分钟，逐级增加2000eps，通过manager界面收集测试数据，直到数据接收性能达到拐点。
**索引日期：**
20170721
  ----------------------------------------------------------------------------------------------------------------------
  测试周期      eps     cpu占用率峰值/均值               进程占用物理内存           I/O写字节数/秒            数据总量
  ------------- ------- -------------------- ----------- ------------------ ------- ---------------- -------- ----------
                        节点1                节点2       节点1              节点2   节点1            节点2    
  第1个10分钟   5000    26%/15.6%            18%/14.5%   367MB              349MB   1301.8           1281     6000000
  第2个10分钟   7000    26%/18.6%            23%/18%     373MB              354MB   2106             2286.4   84000000
  第3个10分钟   9000    28%/23.9%            29%/23.4%   422MB              402MB   2580.3           2498.6   10800000
  第4个10分钟   11000   35%/28%              34%/26.3%   452MB              443MB   3152             3175.1   13200000
  第5个10分钟   13000   54%/30.4             47%/32.8    572MB              565MB   3805.8           3752.2   15600000
  ----------------------------------------------------------------------------------------------------------------------
CPU总体变化趋势：
![](media/image12.png){width="4.260416666666667in"
height="2.8229166666666665in"}
内存总体变化趋势：
![](media/image13.png){width="4.270833333333333in"
height="2.8229166666666665in"}
I/O总体变化趋势：
![](media/image14.png){width="4.239583333333333in" height="2.875in"}
如上述几张图所示：5个凸起波纹分别为5次测试区间内的CPU/内存/磁盘io的趋势变化，单台磁盘写入峰值可达到75000KBps，并未达到性能拐点。增加压测时间物理内存并未随之增长，因为collector的接收数据直接进行写磁盘操作，不会造成内存泄露。使用多collector的情况比使用单一collector，cpu总的使用率明显下降，集群并未出现明显性能拐点。
 在总量1000万条，存在5类不同格式的样本数据量环境下：
  (1)系统响应时间小于3秒；
  (2)并发用户数大于100个；
  (3)性能数据采集时间≤300秒 ；
  (4)资源利用率：CPU\ **参考文献**
《智能电网的关键技术及发展对策研究》 《中国电子商务》 2012 魏婷
《浅谈电网公司一体化、可视化、智能化的信息通信调度理论体系》2013 朱璐
《数据访问技术浅析》 《科学时代》 2012 关嵘
《面向Big Data的数据处理技术概述》 《数字技术与应用》 2012 夏海元