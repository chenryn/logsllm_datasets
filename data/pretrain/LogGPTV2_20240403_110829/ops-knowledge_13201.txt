User: Suppose you need to set up firewall rules on Linux to restrict external traffic to a certain port. Please explain how to set up firewall rules and how to test that the rules are working.
Assistant: You can use the iptables command to set firewall rules on Linux. Suppose we need to restrict external traffic from entering port 80, the specific steps are as follows: 1. Confirm that iptables is installed and enabled You can use the command `sudo systemctl status iptables` to check whether iptables is enabled. 2. Execute the iptables command to add rules Use the following command to add rules to restrict external traffic from entering port 80, and only allow specific IP addresses to access: ``` sudo iptables -A INPUT -p tcp --dport 80 -s 192.168.0.1 -j ACCEPT sudo iptables -A INPUT -p tcp --dport 80 -j DROP ``` The first rule allows specific IP addresses to access port 80, the second rule blocks access from all other IP addresses. 3. Test whether the rule is effective You can use the following command to test whether the rule is effective, try to access the port from the browser of another machine, if the access is successful, it means that the rule is not effective: ``` curl http://localhost:80 ` `` If the rule takes effect, it should prompt an error message that the connection timed out or could not be connected. 4. Save the rule settings If the rule settings are in effect, you can save the rule settings as permanent settings with the following command: ``` sudo service iptables save ```