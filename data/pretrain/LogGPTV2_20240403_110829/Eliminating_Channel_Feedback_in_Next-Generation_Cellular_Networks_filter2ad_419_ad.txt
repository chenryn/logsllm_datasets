  for	
  Phase	
  Oﬀsets	
  (Sec	
  6)	
  a) Hardware	
  Oﬀsets	
  b) Frequency	
  oﬀsets	
  c) Detec0on	
  delay	
  .	
  EsDmate	
  Downlink	
  Channel	
  a) Compute	
  over-­‐the-­‐air	
  .	
  downlink	
  channel	
  (Eq.	
  9)	
  b) Apply	
  reciprocity	
  [9]……...	
  Uplink	
  Channel	
  Over-­‐the-­‐air	
  Channel	
  Representa0on	
  of	
  Signal	
  Paths	
  quency bands by 30 MHz in commercial deployments.
We ensure that the characteristics of our software-radio
based LTE testbed in the whitespaces closely mirror those
of commercial LTE deployments. The clients transmit data
only on 8% of the OFDM subcarriers, and transmit sounding
reference signals once every two subframes (at most once
every 2 ms, as in Verizon’s LTE network conﬁguration). In
all tests we co-locate our base station with one of the LTE
base stations deployed on our campus. This ensures that the
multipath effects experienced by R2F2 base station closely
match the multipath observed by an actual LTE deployment.
Evaluation: We perform our experiments in both indoor
and outdoor settings. We co-locate our base station next to
an operational LTE base stations in both settings. The client
is moved to various locations across multiple buildings in-
doors as well as in outdoor locations along the streets and
between buildings. Fig. 6 plots our testbed with the location
of the base station marked in red and client locations marked
as blue dots. Our experiments are performed across multiple
randomly chosen client locations and the average and stan-
dard deviation of results are presented. The experiments are
evenly split between outdoor and indoor locations. The ex-
periments were conducted over three days and the weather
was mostly clear, with a snow cover present throughout. Our
results report both the measured signal-to-noise ratio (SNR)
measured at the client as well as throughput (in Mb/s). We
note that we measure throughput from SNR across LTE sub-
carriers using the effective SNR (ESNR) metric [17] with
bit-rates adjusted based on the LTE standard [3, 50].
Note that, the delay introduced by USRP software radios
(about 10 seconds) in switching frequencies limits our evalu-
ation to static clients. While we leave an evaluation of R2-F2
for mobile clients to future work, we note that FPGA imple-
mentations of interior-point methods (like the one discussed
in section 5) are fairly standard and converge in hundreds
of microseconds [23]. This time is much lower than the few
mili-seconds of channel coherence time for typical scenarios
[48]. Finally, since R2-F2’s estimates rely on uplink chan-
nels from the client to the base station, rather than the last
downlink channel from the base station to the client, R2-F2’s
channel estimates are more recent than explicit channel feed-
back, thus aiding mobility.
8. RESULTS
In this section, we present the results of an experimental
evaluation of R2-F2.
8.1 Micro Benchmarks
We aim to check whether the model in §4 matches the
empirical measurements. We conduct our experiments in the
testbed described in §7. In each run, the base station trans-
mits to the client, and the client computes the ground truth
channels on the downlink. The client then transmits to the
base station, and the base station computes the uplink chan-
nels. We run R2-F2 on the uplink channels to infer the down-
link channels.
Fig. 7 plots the results from a representative run. Fig. 7(a)
(a)
(b)
Figure 6: Experiment Testbed: (a) plots the indoor testbed
for our experiments. Thick black lines indicate building
boundaries. The ﬂoor map of individual buildings is marked
inside each building. Experiments were conducted in the
publicly accessible spaces across four buildings. (b) is the
outdoor testbed with roads and pathways shown; buildings
have been removed for anonymity. In (a) and (b), the red
square marks the presence of the base station and the blue
dots represent the clients.
edge clients using R2-F2 leads to improved throughput in
LTE networks.
7.
IMPLEMENTATION
We implemented R2-F2 on a ﬁve-antenna Ettus USRP
N210 software radio platform emulating a ﬁve-antenna LTE
base station. The USRPs are synchronized using an external
clock and act as a ﬁve-antenna MIMO node. They transmit
using an OFDMA architecture that transmits 1024 subcar-
riers over 10 MHz, which are parameters identical to com-
mon LTE deployments of major US operators [3]. We imple-
ment LTE’s OFDMA by modifying the Ettus UHD driver for
USRP software radios. Our software radios operate over the
whitespace spectrum in frequency bands up to 10 MHz wide
at center frequencies between 640-690 MHz. We note that
these bands are just 20-30 MHz away from the frequency
bands of commercial LTE deployments of the two major US
cellular operators: AT&T and Verizon [11].
We use a single-antenna USRP software radio to emu-
late an LTE cellular phone. The USRP transmits using SC-
FDMA on bandwidth up to 10 MHz on up to 1024 subcarri-
ers, as per the LTE PHY standard [3]. Unless speciﬁed oth-
erwise, the uplink and downlink bands are at center frequen-
cies of 650 MHz and 680 MHz, separated by 30 MHz. We
note that major US carriers separate uplink and downlink fre-
100 m 50 m 80	m60	m(a)
(d)
(b)
(c)
Figure 7: Microbenchmark: R2-F2 measures wireless channels on the uplink at 650 MHz and predicts the downlink channels
on 680 MHz. The directional power proﬁle for the uplink channel in a particular measurement is shown in (a). We also plot
the downlink proﬁle, obtained using ground truth measurements for reference. As explained in §4, these proﬁles appear very
different. The paths inferred by R2-F2 are plotted in (b). A ‘+’ sign next to a path indicates presence of two paths being plotted
as one due to the plotting resolution. R2-F2 uses these paths to predict channels on 680 MHz. The absolute value of the ratio
of the estimated channels to the ground truth channels is plotted in (c), while (d) plots the phase of this ratio.
plots the Fourier transform of the channel measurements on
uplink and downlink channels. The Fourier transform is plot-
ted with a super resolution factor of 20, (i.e., the Fourier ma-
trix has 5 columns that correspond to the 5 channels and 100
rows). The ﬁgure shows that the Fourier Transforms, and
hence, the corresponding channels differ signiﬁcantly from
the downlink channels and their Fourier Transform, despite
that the uplink and downlink are separated by only 30MHz.
Note that, the ﬁgure shows the uplink and downlinks for the
same OFDM subcarrier on each frequency band.
R2-F2 uses the measured channels on the uplink to infer
the underlying physical paths. The inferred paths are shown
in Fig. 7(b). The R2-F2 algorithm infers 6 different paths
(two sets of two paths are clustered together due to the plot-
ting resolution and are marked by a ‘+’ sign in the ﬁgure).
The downlink channels inferred from these paths strongly
match the ground truth channels measured at the client. The
ratio of the downlink channels estimated by R2-F2 and the
channels measured by the client is shown in Fig. 7(c) and
Fig. 7(c). Notice that the absolute value of the ratio (Fig. 7(c)
is very close to 1. Moreover, the phase error in the channel
ratio (Fig. 7(d) is close to zero. Thus, this example shows that
the model in §4 captures the RF propagation in the testbed.
8.2 Effectiveness of Beamforming
Beamforming is the key function underlying all MIMO
solutions such as MU-MIMO, massive MIMO, etc. Thus, we
would like to examine whether R2-F2 can deliver the same
beamforming gain as ground truth channels.
As before, we run our experiments in the testbed in Fig. 6.
We repeat the experiment for different client locations, and
for each client location, we collect 10 measurements. The
clients were placed at distances of up to 75 meters from the
base station. We measure the ground truth channels as be-
fore. We also measure the signal-to-noise ratio at the client
for signals received from the base station across these exper-
iments.
We compare the results for three different schemes: (1)
Beamforming using the channels inferred by R2-F2; (2)
Beamforming using the ground truth channels; and (3)
Transmission in the absence of beamforming.
Fig. 8(a) depicts the CDF of the signal-to-noise ratio of
these three schemes across experiments. This ﬁgure shows
multiple interesting results. First, beamforming using R2-F2
provides almost the same SNR gains as beamforming using
the ground truth channels. In fact, the average difference in
the SNR of these two schemes is only 0.7dB. This demon-
strates that R2-F2 can deliver accurate beamforming without
any channel feedback, and using a completely passive chan-
nel estimation process.
Second, transmitting without beamforming reduces the
SNR by an average of 6.5 dB. This result matches expec-
tation since the theoretical gain of 5-antenna MIMO beam-
forming is 10 log10 5 = 6.98dB. The gains are lower at low
SNR –i.e., SNR less than 3 dB. This is because channel es-
timation at such low SNR does not work well. This is true
for both the ground truth measurement at the client and the
uplink measurements at the base station.
In order to evaluate the throughput improvement, we plot
the data rates associated with the SNRs for all three schemes
in Fig. 8(b). The ﬁgure shows that R2-F2 can double or trip-
ple throughput in our testbed. The average throughput in-
crease is 1.7x. The throughput gains are large at low to mod-
erate SNRs but are less at higher SNR. This is expected since
the rate is the log of the SNR. Also, at SNR more than 20dB,
the highest data rate is achieved and beamforming doesn’t
help in increasing the rate. Similar to Fig. 8(a), the beam-
forming gains are low at SNR less than 3 dB. This is because
at such low SNR, channel measurements become noisy, giv-
ing R2-F2 a noisy input.
8.3 Performance as a Function of Channel Separation
We study R2-F2’s performance as a function of the sep-
aration between the uplink and downlink channels. We re-
peat our experiments by changing the separation between
uplink and downlink frequency bands between 10 MHz and
40 MHz within the whitespace band of frequencies. Lim-
itations of our white space license do not let us go be-
yond the 40 MHz separation. We measure R2-F2’s SNR
gain due to beamforming, for users at different randomly
chosen locations in the testbed. Fig. 8(c) plots the mean
and standard deviation of gain in SNR using R2-F2’s beam-
forming, across different separations of uplink and down-
link frequency bands. As expected, R2-F2’s gain improves
−1−0.500.5100.20.40.60.811.21.470cos θRel. Power  650 MHz680 MHz−1−0.500.5100.511.522.533.5++cos θRel. Power1234500.511.52Antenna indexAbs of Channel ratio12345−1−0.500.51Antenna index∠ Channel ratio (rad)(a)
(b)
Figure 8: Beamforming: We use the channels estimated by R2-F2 to achieve beamforming towards the client. Figure (a)
depicts the CDF of the SNR at the client without beamforming, using beamforming with the channels predicted by R2-F2 and
using beamforming with the true channels measured at the client. R2-F2 achieves ~6 dB SNR gain over no beamforming, which
is just 0.7 dB less than beamforming with ideal channels. Figure (b) depicts the datarates achieved by the different schemes.
R2-F2 enables a median gain of 1.7x in datarate for clients in our testbed. Figure (c) depicts the median gain in SNR due to
beamforming using channels estimated by R2-F2 as a function of frequency separation.
(c)
station uses the channels to perform interference nulling.
Fig. 9 plots a CDF of the interference power before and
after nulling. The ﬁgure shows that R2-F2 dramatically re-
duces the interference at edge clients. In particular, the aver-
age INR (interference to noise ratio) is reduced from 5.5 dB
to 0.2 dB, and the 90th percentile from 9 dB to 0.9 dB. This
shows that R2-F2 can be used beyond coherent beamform-
ing, to counter inter-cell interference.
8.5 Comparison with Angle-of-Arrival Power Proﬁle
At this stage, one might wonder if it is possible to achieve
gains similar to R2-F2 by using the angle-of-arrival (AoA)
power proﬁles similar to the ones shown in Fig. 2 and
Fig. 3(d). In principle, one could use the measured wire-
less channels on one frequency to compute the AoA power
proﬁle using standard AoA equations. Then, this angle-of-
arrival proﬁle can be treated as a signature of the underlying
physical propagation and can be used to compute the chan-
nels at the target frequency band. We conduct experiments on
our testbed to evaluate this approach and compare the gains
achieved by R2-F2 with the gains achieved by the AoA pro-
ﬁle.
Beamforming: We compare the beamforming gain achieved
by R2-F2 with the gains achieved with the AoA-based ap-
proach. The CDF of the signal to noise ratios achieved with
the two approaches is compared in Fig. 10(a). While the
AoA approach increases the median SNR of the testbed by
2.8 dB, the gain is much lower than R2-F2 which increases
the SNR of the testbed by 6.3 dB. This is understandable,
given the intuition developed in section 4 and 5. While the
AoA power proﬁles of the signal have the same underlying
paths, they are inherently dependent on frequency. Thus, us-
ing these proﬁles directly to estimate channels across fre-
quencies leads to errors in the estimation.
Nulling at Edge Clients: Similar to §8.4, we aim to null the
interference caused by the base station at the edge clients. We
use the channels estimated using the AoA approach to null
the interfering signal at the client. The CDF of the INR (in-
Figure 9: Nulling interference at Edge Clients: R2-F2 can
reduce inter-cell interference by enabling the base station to
null it’s signal to the clients at the cell edge. R2-F2 reduces
the interference at the edge from a median of 5.5 dB to 0.2
dB and the 90th percentile from 9 dB to 0.9 dB.
with a lower separation, with the highest gain achieved for a
10 MHz separation (6.55 dB). However, we observe that the
SNR reduced very slowly with increase in downlink-uplink
separation. Since the separation between the LTE downlink
and uplink for most of the Verizon and AT&T deployments
are 20MHz and 30MHz respectively, we believe that R2-F2
can be used to eliminate channel feedback in these networks.
A potential cause of the degradation of the performance of
R2-F2 with larger frequency separations is the variation in
reﬂection properties of materials across frequencies, as ob-
served in [35] in the context of GPS signals.
8.4
Interference Nulling at Edge Clients
Clients at cell edge can suffer a signiﬁcant amount of in-
terference from neighboring cells which could amount to
10 to 12dB [46]. R2-F2 can be used to reduce interference
at edge-clients located at cell boundaries using interference
nulling. To evaluate this function, we set up our base station
as in Fig. 6, but we move the client to the edge of the cell
to emulate a client from a neighboring cell. We repeat the
experiment from the previous section. However instead of
using the inferred downlink channels to beamform, the base
051015202500.20.40.60.81SNR (dB)CDFEmpirical CDF  No BeamGround TruthR2F2102030405000.20.40.60.81Rate (Mbps)CDFEmpirical CDF  No BeamGround TruthR2F201020304055.566.577.5Frequency Separation (MHz)SNR gain (dB)02468101200.20.40.60.81INR at Edge (dB)CDFEmpirical CDF  R2F2Original INR(a)
(b)
Figure 10: Comparison with AoA Power Proﬁle: (a) AoA proﬁle based channel estimation increases the median SNR of the
testbed by 2.8 dB (as opposed to 6.3 dB for R2-F2). (b) Interference at the edge clients can be brought down from a median of
5.5 dB to 3.5 dB. However, R2-F2 outperforms this approach by nulling to 0.2 dB (median). (c) Simulation results show that
with increase in number of antennas, the gain achieved by R2-F2 closely follows the ideal beamforming gain.
(c)
terference to noise ratio) after nulling is shown in Fig. 10(b).
The median interference SNR is reduced from 5.5 dB to 3.5
dB. However, as expected, the errors in channel estimates
prevent it from going down to the median SNR achieved by
R2-F2 (0.2 dB).
Variation with Number of Antennas: Finally, it is natural
to ask if, with the increase in the number of antennas, the sinc