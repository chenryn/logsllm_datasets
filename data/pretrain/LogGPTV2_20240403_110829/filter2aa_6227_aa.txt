\" 中文版版权所有 Liu JingSong, www.linuxforum.net 2000
\" 本文档可在遵照LDP GENERAL PUBLIC LICENSE，Version 1, September 1998
\" 中描述的条件下进行复制,且该文件发布时必须包含该文档．
\"
.TH bzip2 1
.SH NAME 命令名
.br
bzip2, bunzip2 \- 一种块排序文件压缩软件，v0.9.5
.br
bzcat \- 将文件解压缩至标准输出
.br
bzip2recover \- 恢复损坏的 bzip2 文件
.SH 总览
.ll +8
.B bzip2
.RB [ " \-cdfkqstvzVL123456789 " ]
[
.I "filenames \&..."
]
.br
.ll -8
.B bunzip2
.RB [ " \-fkvsVL " ]
[ 
.I "filenames \&..."
]
.br
.B bzcat
.RB [ " \-s " ]
[ 
.I "filenames \&..."
]
.br
.B bzip2recover
.I "filename"
.SH 描述
.I bzip2
采用 Burrows-Wheeler 块排序文本压缩算法和 Huffman 编码方式压缩文件。
压缩率一般比基于 LZ77/LZ78 的压缩软件好得多，其性能接近 PPM 族统计类
压缩软件。
命令行参数有意设计为非常接近
.I GNU gzip 
的形式，但也不完全相同。
.I bzip2
从命令行读入文件名和参数。 每个文件被名为 "原始文件名.bz2" 的压缩文件替换。
每个压缩文件具有与原文件相同的修改时间、 权限， 如果可能的话，
还具有相同的属主， 因此在解压缩时这些特性将正确地恢复。
在某些文件系统中， 没有权限、 属主或时间的概念，
或者对文件名的长度有严格限制， 例如 MSDOS， 在这种情况下，bzip2
没有保持原文件名、 属主、 权限以及时间的机制，
从这个意义上说，bzip2 对文件名的处理是幼稚的。
.I bzip2
和
.I bunzip2
在缺省情况下不覆盖已有的文件。 如果想覆盖已有的文件，要指定 \-f 选项。
如果未指定文件名，
.I bzip2
将压缩来自标准输入的数据并写往标准输出。在这种情况下，
.I bzip2
会拒绝将压缩结果写往终端，因为这完全无法理解并且是没有意义的。
.I bunzip2
(以及
.I bzip2 \-d) 
对所有指定的文件进行解压缩处理。不是由
.I bzip2
产生的文件将被忽略，同时发出一个警告信息。
.I bzip2
按下列方式由压缩文件名确定解压后的文件名：
       filename.bz2    解压成   filename
       filename.bz     解压成   filename
       filename.tbz2   解压成   filename.tar
       filename.tbz    解压成   filename.tar
       anyothername    解压成   anyothername.out
如果文件名的后缀不是下列之一：
.I .bz2, 
.I .bz, 
.I .tbz2
或
.I .tbz, 
.I .bzip2 
将抱怨无法确定原始文件名，并采用原文件名加
.I .out
作为解压缩文件名。
在压缩时，如果不提供文件名，bzip2 将从标准输入读取数据，压缩结果写往标准输出。
.I bunzip2 
能够正确地解压由两个或更多个压缩文件连在一起的文件。
解压的结果为相应的连在一起的未压缩文件。
 bzip2 也支持对连在一起的压缩文件的完整性检查(\-t选项)。
同样可采用 \-c 选项将文件压缩或解压缩至标准输出。
多个文件可通过这种方式压缩或解压缩。
输出结果被依次送往标准输出。 采用这种方式对多个文件的压缩将生成包含
多个压缩文件的数据流。这样的数据流只能被 0.9.0 版或其后续版本的
.I bzip2
正确解压。较早版本的
.I bzip2
会在解压完第一个文件之后停止。
.I bzcat
(或
.I bzip2 -dc) 
将所有指定文件解压缩至标准输出。
.I bzip2
可从环境变量
.I BZIP2
和
.I BZIP
中依次读取参数， 并在命令行参数之前对其进行处理。 这是提供缺省选项的方便途径。
即使压缩后的文件略大于原文件， 压缩也总是照样进行。
小于大约 100 字节的文件压缩后倾向于变大，
因为会有一个 50 字节的数据头。 对于随机数据 （包括大多数压缩软
件的输出）， 大约每字节压成 8.05 位， 放大率约为 0.5%。
.I bzip2
采用 32 位 CRC 校验码作自我检查，以确认解压后的文件与原始文件相同。
这可用于检测压缩文件是否损坏，并防止
.I bzip2
中未知的缺陷（运气好的话这种可能性非常小）。 数据损坏而未检测到的几率非常之小，
对于每个被处理的文件大约是四十亿分之一。
检查是在解压缩时进行的， 因此它只能说明某个地方出问题了。
它能帮助恢复原始未压缩的数据。可以用
.I bzip2recover
来尝试从损坏的文件中恢复数据。
返回值：正常退出返回 0， 出现环境问题返回 1
（文件未找到，非法的选项，I/O错误等），
返回 2 表明压缩文件损坏，出现导致
.I bzip2
紧急退出的内部一致性错误（例如缺陷）时返回 3。
.SH 选项
.TP
.B \-c --stdout
将数据压缩或解压缩至标准输出。
.TP
.B \-d --decompress
强制解压缩。
.I bzip2, 
.I bunzip2 
以及
.I bzcat 
实际上是同一个程序，进行何种操作将根据程序名确定。
指定该选项后将不考虑这一机制，强制
.I bzip2
进行解压缩。
.TP
.B \-z --compress
\-d 选项的补充：强制进行压缩操作，而不管执行的是哪个程序。
.TP
.B \-t --test
检查指定文件的完整性，但并不对其解压缩。
实际上将对数据进行实验性的解压缩操作，而不输出结果。
.TP
.B \-f --force
强制覆盖输出文件。通常
.I bzip2 
不会覆盖已经存在的文件。该选项还强制
.I bzip2 
打破文件的硬连接，缺省情况下 bzip2 不会这么做。
.TP
.B \-k --keep
在压缩或解压缩时保留输入文件（不删除这些文件）。
.TP
.B \-s --small