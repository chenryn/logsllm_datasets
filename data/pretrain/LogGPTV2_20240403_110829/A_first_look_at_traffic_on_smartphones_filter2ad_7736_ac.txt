Receiver window
Bandwidth
Transport
Application
Unknown
Uplink 
(%)
81.0
4.1
6.8
5.1
0.7
0.0
2.4
Downlink
(%)
61.5
27.4
3.4
2.9
0.0
0.0
4.8
(d) Throughput limits
Uplink
Downlink
0
0
1
10 100 1000
(c) Throughput (kbps)
Figure 6: Performance of TCP transfers in Dataset1.
retransmit 5% of the packets and 10% of them retransmit more than
10% of the packets.
5.3 Throughput
As a ﬁnal measure of smartphone trafﬁc performance, we focus
on the throughput observed by TCP connections in our data. Con-
nection throughput is a function of not only path RTT and loss rate
but also of application-level factors such as the amount of data.
Figure 6(c) shows the throughput of TCP transfers with at least
10 data packets in a given direction. We see that most transfers
have very low throughput. The median is 0.8 Kbps for uplink
and 3.5 Kbps for downlink. The 90th percentile values are 3 and
15 Kbps respectively.
Given that half the transfers in the analysis above have over 25
data packets, the lack of application data or slow TCP dynamics
alone cannot explain the low throughputs that we observe. To
understand the bottlenecks, we conduct the analysis of Zhang et
al. [23]. This analysis estimates the factor that limits the through-
put of a given TCP transfer, based on the timing and sequence of
packets. We refer the reader to the original paper for details. The
accuracy of this analysis has been evaluated in the wired case but
not in a wireless setting. Manual inspection of several cases shows
that it provides accurate answers for our data. This gives us con-
ﬁdence that it can yield an accurate aggregate characterization of
the type that we present below. We will conduct a more rigorous
evaluation in the future.
Figure 6(d) shows the results for transfers that have more than
100 data packets in the given direction. We ﬁnd that with this
threshold the analysis yields reliable, consistent estimates. Simi-
lar results are obtained with a threshold of 50.
We see that packet loss is the primary limiting factor in both
directions, and the large transfers that we focus on are rarely bot-
tlenecked by transport or application dynamics.
Interestingly, sender window limits over a quarter of the down-
link transfers. This suggests that increasing the size of this win-
dow (which holds unacknowledged data) at servers will increase
the throughput of downlink TCP transfers to smartphones.
It is
likely that the current buffer sizes are tuned to wired clients which
tend to have much lower path delays. In future work, we plan to
investigate this issue in detail.
6.
INTERACTION WITH RADIO POWER
MANAGEMENT
The radio is a major power consumer on a smartphone [17], and
the nature of trafﬁc determines the efﬁcacy of its power manage-
ment policy. In this section, we study the interaction between this
policy and real smartphone trafﬁc.
We ﬁrst consider the power signature of current radios. Figure 7
shows the current drawn by an HTC Touch smartphone with Win-
dows Mobile 6.1 when transmitting data over the 3G radio. We see
Figure 7: Current consumption (@4.2V) of HTC Touch.
)
F
D
C
0
9
(
s
t
e
k
c
a
p
0
7
f
o
%
0
5
0
6
3
12 15 18
Inter−packet delay (s)
9
Figure 8: CDF of the inter-packet delays in Dataset1. Each line
corresponds to a different user.
four distinct phases. The radio takes about 1.5 seconds to become
operational from its sleep mode (Phase 1). After data transmission
completes (Phase 2), the radio remains at its highest power level
for 5 seconds (Phase 3) and at a lower level for 12 seconds (Phase
4). It then goes to sleep. This power signature is not unique to
HTC or Windows Mobile. Similar behaviors hold across different
manufacturers and OSes [2], though the exact timer values may be
carrier dependent.
The goal of the tail in Phases 3 and 4 is to enable the radio to
quickly resume packet exchange, without the time and energy cost
of waking up. However, if it is too long, power is unnecessarily
wasted when no transmissions occur. If it is too short, the radio
will oscillate between the sleep and active states, which will waste
energy due to the wake up cost. Given that each wake-up is accom-
panied by signaling to reserve resources for the radio in the carrier
network, an overly short tail will also lead to a higher signaling
overhead for the carrier.
The optimal length of the tail depends on the burstiness of smart-
phone trafﬁc. More bursty trafﬁc, with packet exchanges happen-
ing in clusters rather than being uniformly spread, calls for a shorter
tail. To understand how bursty smartphone trafﬁc is, we consider
packet exchanges in Dataset1. Figure 8 shows the CDF of the delay
between consecutive packets for all users. While there are differ-
ences among users, across all users 95% of the packets are received
or transmitted within 4.5 seconds of the previous packet. The inter-
285)
%
i
(
s
g
n
v
a
s
y
g
r
e
n
E
80
60
40
20
0
Oracle
4.5s
1
3
5
7
User ID
9
Figure 9: Reduction in energy consumed by the radio com-
pared to the current radio power management policy.
)
s
t
e
k
c
a
p
%
(
s
p
u
e
k
a
w
o
d
a
R
i
14
12
10
8
6
4
2
0
Oracle
4.5s
HTC Touch
1
3
5
7
User ID
9
Figure 10: Percentage of overall packets that trigger a radio
wake up across the different approaches.
packet delay for the rest of the packets appears to be roughly uni-
formly distributed over a longer time range.
This result suggests that a 4.5-second long tail before going to
sleep can cover 95% of the packets; longer tails will have dimin-
ishing returns with respect to covering more packets while wasting
more energy. But we saw above that the current tail is 17-second
long, which suggests highly suboptimal power consumption.
To quantify this sub-optimality, we replay packet exchanges for
every user, and we use the timing and power parameters from Fig-
ure 7 to compute the energy consumed by the 3G radio for different
tail lengths. This computation includes the wake-up overhead. Fig-
ure 9 shows the energy savings from using a 4.5-second long tail
compared to a 17-second long tail. It also shows the energy sav-
ings from using an oracle that has perfect knowledge of when the
next packet exchange will occur and can therefore make an optimal
decision of when and for how long the radio should go to sleep.
This oracle can not be implemented in practice but indicates the
maximum energy savings that can be achieved.
With an oracle, the energy consumption of the 3G radio can be
reduced by 60%. A 4.5-second long tail reduces energy consump-
tion by 35% on average across all users. To place these numbers
in context, the radio typically accounts for a third to a quarter of
energy drain on the phone [17].
We ﬁnd that these energy savings have a minimal impact on the
performance of packet exchanges. Figure 10 shows the number of
times that the 3G radio has to wake up to exchange a packet as a
percentage of all packets. With a 4.5-second tail, only an additional
2-5% of the packets are delayed by having to wake up the radio.
This result also suggests that the additional signaling overhead due
to a 4.5-second tail will be low.
In additional experiments, not reported in this paper, we ﬁnd that
the tail length needs to be carefully set based on both radio wake-up
overheads and trafﬁc characteristics. For instance, a tail length of
100 ms, which covers 50% of the packets, hurts energy consump-
tion as well as performance. Energy usage doubles, and 35% of the
packets are delayed due to radio the wake up overhead.
In summary, we show that current radio power management poli-
cies are highly inefﬁcient. Because of temporal characteristics of
smartphone trafﬁc, simply reducing the tail length to 4.5 seconds
can save 35% of the energy consumed by the radio. However, the
oracle algorithm suggests that an additional 25% can be saved. We
are currently investigating how to do so practically, by learning the
trafﬁc patterns of individual users and dynamically adjusting the
radio sleep timers depending on various factors such as the appli-
cation and the time of the day.
7. RELATED WORK
Given the challenge of conducting measurements on mobile de-
vices, existing studies of mobile trafﬁc are based on observations
from the infrastructure [19, 15, 3, 13, 21, 20]. Recently, Maier et
al. study packet-level traces from residential DSL connections at
an aggregation point [15]. Using hints such as HTTP user-agent
strings, they identify trafﬁc from mobile hand-held devices and
observe that this trafﬁc is dominated by multimedia content and
mobile application downloads. Trestian et al. study 3G authenti-
cation traces from a provider to measure the correlations between
location, time-of-day and application usage [20]. Our approach of
monitoring devices is complementary to these studies. It provides a
comprehensive view of monitored devices and enables us to study
aspects of smartphone trafﬁc such as interaction with radio power
management that would otherwise be difﬁcult.
In recent work, we broadly characterized smartphone usage, in-
cluding user interactions, trafﬁc per day, and diurnal patterns [10].
The current paper studies smartphone trafﬁc in detail, including its
composition, transfer sizes, performance, and interaction with ra-
dio power management.
Also complementary to our work are studies that conduct active
measurements using synthetic workloads [12, 4, 5, 16]. Such stud-
ies can analyze network characteristics in a range of conditions.
But they do not provide a view of what users actually experience,
which was our focus.
8. CONCLUSIONS
Based on monitoring the devices of 43 users, we presented a
detailed look at smartphone trafﬁc. We ﬁnd that browsing con-
tributes most trafﬁc, lower layer protocols have a high overhead
due to small transfers sizes, and packet loss is the primary bottle-
neck for trafﬁc throughput. We also ﬁnd that current server-side
transfer buffers and radio power management policies are not well-
tuned for smartphone workloads.
Our analysis points at several simple mechanisms that can im-
prove the efﬁciency, performance, and power consumption of smart-
phone communication. Aggregating multiple small transfers through
an in-cloud proxy can reduce the overhead of small transfers; in-
creasing the socket buffer sizes at servers can improve throughput;
and reducing radio sleep timers can reduce power consumption. In
the future, we plan to investigate in the detail the efﬁcacy of these
mechanisms.
Acknowledgments We are grateful to the users who participated
in our data collection efforts.
2869. REFERENCES
[1] Trends in japanese residential trafﬁc. http://www.
isoc.org/isoc/conferences/bwpanel/docs/
20091111_bandwidth_cho.pdf, 2009.
[2] N. Balasubramanian, A. Balasubramanian, and
A. Venkataramani. Energy consumption in mobile phones: A
measurement study and implications for network
applications. In IMC, 2009.
[3] P. Benko, G. Malicsko, and A. Veres. A large-scale, passive
analysis of end-to-end TCP performance over GPRS. In
INFOCOM, 2004.
[4] R. Chakravorty, S. Banerjee, P. Rodriguez, J. Chesterﬁeld,
and I. Pratt. Performance optimizations for wireless
wide-area networks: Comparative study and experimental
evaluation. In MobiCom, 2004.
[5] J. Chesterﬁeld, R. Chakravorty, J. Crowcroft, P. Rodriguez,
and S. Banerjee. Experiences with multimedia streaming
over 2.5 G and 3G Networks. In BORADNETS, 2004.
[6] K. Claffy. Internet trafﬁc characterization. PhD thesis,
University of California at San Diego, 1994.
[7] L. Cottrell and S. Khan. ICFA SCIC network monitoring
report. http://www.slac.stanford.edu/xorg/
icfa/icfa-net-paper-jan09/report-jan09.
doc, 2009.
[8] F. Dogar and P. Steenkiste. Catnap: Exploiting High
Bandwidth Wireless Interfaces to Save Energy for Mobile
Devices. In MobiSys, 2010.
[9] Mobile data trafﬁc surpasses voice. http://www.
ericsson.com/thecompany/press/releases/
2010/03/1396928.
[10] H. Falaki, R. Mahajan, S. Kandula, D. Lymberopoulos,
R. Govindan, and D. Estrin. Diversity in smartphone usage.
In MobiSys, 2010.
[11] K. Fukuda, K. Cho, and H. Esaki. The impact of residential
broadband trafﬁc on Japanese ISP backbones. SIGCOMM
CCR, 35(1), 2005.
[12] J. Huang, Q. Xu, Z. Mao, M. Zhang, and P. Bahl.
Anatomizing Application Performance Differences on
Smartphones. In MobiSys, 2010.
[13] Y. Lee. Measured TCP Performance in CDMA 1xEV-DO
Network. In PAM, 2006.
[14] G. Maier, A. Feldmann, V. Paxson, and M. Allman. On
dominant characteristics of residential broadband internet
trafﬁc. In IMC, 2009.
[15] G. Maier, F. Schneider, and A. Feldmann. A First Look at
Mobile Hand-Held Device Trafﬁc. In PAM, 2010.
[16] K. Mattar, A. Sridharan, H. Zang, I. Matta, and A. Bestavros.
TCP over CDMA2000 networks: A cross-layer measurement
study. In PAM, 2007.
[17] A. Shye, B. Sholbrock, and M. G. Into the wild: Studying
real user activity patterns to guide power optimization for
mobile architectures. In Micro, 2009.
[18] L. Snol. More smartphones than desktop PCs by 2011.
http://www.pcworld.com/article/171380/
more_smartphones_than_desktop_pcs_by_
2011.html.
[19] P. Svoboda, F. Ricciato, E. Hasenleithner, and R. Pilz.
Composition of GPRS/UMTS trafﬁc: Snapshots from a live
network. IPS MoMe 2006, 4, 2006.
[20] I. Trestian, S. Ranjan, A. Kuzmanovic, and A. Nucci.
Measuring serendipity: Connecting people, locations and
interests in a mobile 3G network. In IMC, 2009.
[21] Y. Won, B. Park, S. Hong, K. Jung, H. Ju, and J. Hong.
Measurement analysis of mobile data networks. PAM, 2007.
[22] N. Wood. Mobile data trafﬁc growth 10 times faster than
ﬁxed over next ﬁve years. http://www.totaltele.
com/view.aspx?ID=448681.
[23] Y. Zhang, L. Breslau, V. Paxson, and S. Shenker. On the
characteristics and origins of Internet ﬂow rates. In
SIGCOMM, 2002.
287