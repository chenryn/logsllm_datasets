1
0
1
5
0
HTTP
NNTP
BitTorrent
eDonkey
 4h
 8h
 12h
 16h
time
 20h
 0h
 4h
 8h
 12h
 16h
 20h
 0h
time
Figure 11: Fraction of active lines using 50%/10% of their
available upstream/downstream bandwidth at least once per
5 minute bin (smoothed).
Figure 13: Number of mean parallel ﬂows with size >50 KB
per application protocol and line (in 5 min bins).
HTTP
NNTP
BitTorrent
eDonkey
y
t
i
s
n
e
d
y
t
i
l
i
b
a
b
o
r
p
6
0
.
4
0
.
2
0
.
0
0
.
0.1
1.0
10.0
Throughput [kbps]
100.0
1000.0
Figure 12: Achieved throughput of ﬂows with size >50 KB by
application protocol.
least one packet, or received at least 5 KB, in each bin. We then
compare these results to the available access bandwidth for each
DSL line, determining how many lines exceeded 10% or 50% of
their bandwidth for at least one second during a given 5 min period.
Figure 11 shows that most lines use only a small fraction of their
bandwidth. Less than a quarter of the active lines exceed 50% of
their bandwidth for even one second over a 5 minute time period.
However, during the day we observe 50–60% of active lines achiev-
ing at least a 10% bandwidth utilization. These results are consis-
tent with ﬁndings from Siekkinen et al. [47].
To gauge whether there is a principle network limitation on ob-
tainable performance, we analyzed the achieved throughput per
unidirectional ﬂow, distinguishing ﬂows by their application-layer
protocol. To do so, we constructed the equivalent of NetFlow data
from our packet traces, using an inactivity timeout of 5 sec. Fig-
ure 12 shows the distribution of the achieved throughput for these
ﬂows, given they transfered at least 50 KB. We observe that HTTP
and NNTP achieve throughputs an order of magnitude larger than
those for P2P and unclassiﬁed trafﬁc (note the logarithmic scale).
We also ﬁnd that other DPD-classiﬁed trafﬁc, as well as trafﬁc on
well-known ports, achieves throughput similar to that for HTTP
and NNTP. These ﬁndings suggest that a portion of unclassiﬁed
trafﬁc is likely P2P. For ﬂows with more data (> 500 KB), the dif-
ference in throughput actually increases slightly. Furthermore, we
see that the throughput for all of these larger ﬂows increases as
well.
Some P2P applications open multiple parallel connections in or-
der to download content from several peers at the same time. To
analyze this behavior, we investigated the mean number of paral-
lel ﬂows per application; see Figure 13. The plot conﬁrms that
P2P protocols use more parallel ﬂows than HTTP. However, the
difference is substantially smaller than the difference in achieved
throughput. As such, the upstream capacity of other peers com-
bined with application restrictions effectively throttles P2P trans-
fers. Interestingly, we ﬁnd that NNTP behaves similar to the P2P
protocols, using a larger number of parallel ﬂows. This is most
likely a result of users using a customized NNTP client for bulk
download, rather than a traditional newsgroup reader.
8. SUMMARY
In this paper we have studied residential broadband Internet traf-
ﬁc using anonymized packet-level traces augmented with DSL ses-
sion information. Our data covers more than 20,000 customers
from a major European ISP. Our initial exploration of the datasets
unearthed a number of surprises that alter some of our mental mod-
els of such trafﬁc.
We started with DSL level characteristics, examining session du-
rations, their termination causes, and the number of concurrent ses-
sions. Session durations are surprisingly short, with a median dura-
tion of only 20–30 minutes, while we would have expected several
hours to days. Our termination cause analysis turned up that most
sessions end due to termination from the user end, which we at-
tribute to default router conﬁgurations based on former timed con-
tracts. As a consequence, IP addresses are reassigned frequently,
with up to 4% of addresses assigned more than 10 times a day.
This indicates that the use of IP addresses as host identiﬁers can
prove quite misleading over fairly short time scales.
100Next we examined usage of different applications and their im-
pact on overall trafﬁc. We observed that P2P no longer dominates
in terms of bytes. Rather, HTTP once more carries most of the
trafﬁc, by a signiﬁcant margin (>50%). While we used Bro’s
DPD [13] to identify applications, we also examined the efﬁcacy
we would obtain from a simple, purely port-based approach for ap-
plication classiﬁcation, ﬁnding it works quite well for our datasets,
due to the prelevance of HTTP, NNTP, and streaming applications.
It does not work as well for P2P, however.
To understand why HTTP is again the dominant application, we
looked at a number of facets of its usage. We found that Flash
Video, the format used by video portals such as youtube.com and
news sites, contributes 25% of all HTTP trafﬁc, followed by RAR
archives. The latter are mostly downloaded from Direct Download
providers associated with ﬁle-sharing. We did not ﬁnd a signiﬁcant
share of HTTP trafﬁc attributable to P2P protocols or application
protocols using HTTP as a transport protocol.
We note that a number of these results agree with those of Erman
et al.’s contemporaneous study [15], suggesting that the trends are
representative for a signiﬁcant fraction of the Internet.
We analyzed transport protocol characteristics in terms of TCP
options. We found that window scaling and SACK have become
more popular since Medina et al.’s previous study [34], with SACK
employed by more than 90% of clients. Window scaling is also
often used, but does not in fact result in larger advertised receiver
windows.
We assessed performance and path characteristics of TCP con-
nections, noting that most DSL lines fail to utilize their available
bandwidth. Examining TCP round-trip-times, we found that for
many TCP connections the access bandwidth-delay product ex-
ceeds the advertised window, thus making it impossible for the
connection to saturate the access link. Our RTT analysis also re-
vealed that, surprisingly, the latency from the DSL-connected host
to its ﬁrst Internet hop dominates the WAN path delay. This dis-
crepancy can however be explained by ADSL’s interleaving mech-
anism. We found that WAN delays are often as little as 13 ms, but
local RTTs not infrequently exceed 1000 ms, a phenomenon that
is likely caused by the use of wireless equipment in the customers
home and ensuing contention on the wireless hop. We also ob-
served that connections from client-server applications, like HTTP
and NNTP, achieve an order of magnitude higher throughput per
ﬂow than P2P connections.
In future work we plan to explore application characteristics and
network capacity issues in more depth, as well as to obtain longi-
tudinal data to perform trend analysis. Furthermore, we plan to in-
vestigate interactive and real-time sensitive trafﬁc such as VoIP and
gaming. Although these do not yet contribute a signiﬁcant number
of bytes, these protocols are important for perceived Quality-of-
Service by customers.
9. ACKNOWLEDGEMENTS
This work was supported in part by US National Science Foun-
dation grants CNS-0722035, CNS-0831535, and a grant from
Deutsche Telekom Laboratories, Berlin. We would like to thank
the anonymous reviewers for numerous valuable comments.
Any opinions, ﬁndings, and conclusions or recommendations ex-
pressed in this material are those of the authors or originators and
do not necessarily reﬂect the views of the National Science Foun-
dation.
10. REFERENCES
[1] ABRAMS, M., STANDRIDGE, C. R., ABDULLA, G.,
WILLIAMS, S., AND FOX, E. A. Caching Proxies:
Limitations and Potentials. In Proc. World Wide Web
Conference (1995).
[2] AIKAT, J., KAUR, J., SMITH, F. D., AND JEFFAY, K.
Variability in TCP Round-trip Times. In Proc. ACM Internet
Measurement Conference (2003).
[3] ANDERSON, N. P2P Trafﬁc Drops as Streaming Video
Grows in Popularity. http://arstechnica.com/old/
content/2008/09/p2p-traffic-drops-as
-streaming-video-grows-in-popularity.ars.
[4] ARLITT, M., AND WILLIAMSON, C. Internet Web Servers:
Workload Characterization and Implications. IEEE/ACM
Trans. Networking (1997).
[5] BARFORD, P., BESTAVROS, A., BRADLEY, A., AND
CROVELLA, M. Changes in Web Client Access Patterns:
Characteristics and Caching Implications. World Wide Web 2
(1999).
[6] BLANTON, E., AND ALLMAN, M. On Making TCP More
Robust to Packet Reordering. ACM Computer
Communication Review 32, 1 (Jan 2002), 20–30.
[7] BONFIGLIO, D., MELLIA, M., MEO, M., ROSSI, D., AND
TOFANELLI, P. Revealing Skype Trafﬁc: When Randomness
Plays With You. In Proc. ACM SIGCOMM (2007).
[8] CHA, M., KWAK, H., RODRIGUEZ, P., AHN, Y.-Y., AND
MOON, S. I Tube, You Tube, Everybody Tubes. In Proc.
ACM Internet Measurement Conference (2007).
[9] CHO, K., FUKUDA, K., ESAKI, H., AND KATO, A. The
Impact and Implications of the Growth in Residential
User-to-User Trafﬁc. In Proc. ACM SIGCOMM (2006).
[10] CHO, K., FUKUDA, K., ESAKI, H., AND KATO, A.
Observing Slow Crustal Movement in Residential User
Trafﬁc. In Proc. ACM CoNEXT (2008).
[11] CROVELLA, M., AND BESTAVROS, A. Self-Similarity in
World Wide Web Trafﬁc: Evidence and Possible Causes.
IEEE/ACM Trans. Networking (1997).
[12] DISCHINGER, M., HAEBERLEN, A., GUMMADI, K. P.,
AND SAROIU, S. Characterizing Residential Broadband
Networks. In Proc. ACM Internet Measurement Conference
(2007).
[13] DREGER, H., FELDMANN, A., MAI, M., PAXSON, V.,
AND SOMMER, R. Dynamic Application-Layer Protocol
Analysis for Network Intrusion Detection. In Proc. Usenix
Security Symp. (2006).
[14] ENDACE MEASUREMENT SYSTEMS.
http://www.endace.com/, 2008.
[15] ERMAN, J., GERBER, A., HAJIAGHAYI, M. T., PEI, D.,
AND SPATSCHECK, O. Network-aware Forward Caching. In
World Wide Web (2009), pp. 291–300.
[16] FELDMANN, A., CACERES, R., DOUGLIS, F., GLASS, G.,
AND RABINOVICH, M. Performance of Web Proxy Caching
in Heterogeneous Bandwidth Environments. In Proc. IEEE
INFOCOM (1999).
[17] FELDMANN, A., GREENBERG, A., LUND, C., REINGOLD,
N., REXFORD, J., AND TRUE, F. Deriving Trafﬁc Demands
for Operational IP Networks: Methodology and Experience.
IEEE/ACM Trans. Networking 9 (2001).
[18] FRALEIGH, C., MOON, S., LYLES, B., COTTON, C.,
KHAN, M., MOLL, D., ROCKELL, R., SEELY, T., AND
DIOT, S. C. Packet-Level Trafﬁc Measurements from the
Sprint IP backbone. IEEE Network Magazine 17, 6 (2003).
101[19] FUKUDA, K., CHO, K., AND ESAKI, H. The Impact of
[39] PADHYE, J., FIROIU, V., TOWSLEY, D., AND KUROSE, J.
Residential Broadband Trafﬁc on Japanese ISP backbones.
ACM Comp. Comm. Review 35, 1 (2005).
[20] GILL, P., ARLITT, M., LI, Z., AND MAHANTI, A.
YouTube Trafﬁc Characterization: A View From the Edge. In
Proc. ACM Internet Measurement Conference (2007).
[21] GOLDER, S., WILKINSON, D., AND HUBERMAN, B. A.
Rhythms of Social Interaction: Messaging within a Massive
Online Network. In International Conference on
Communities and Technologies (2007).
[22] HENDERSON, T., KOTZ, D., AND ABYZOV, I. The
Changing Usage of a Mature Campus-wide Wireless
Network. In Proc. ACM MOBICOM (2004).
[23] HYUN-CHUL, K., CLAFFY, K., FOMENKOV, M., BARMAN,
D., FALOUTSOS, M., AND LEE, K. Internet Trafﬁc
Classiﬁcation Demystiﬁed: Myths, Caveats, and the Best
Practices. In Proc. ACM CoNEXT (2008).
[24] ITU. ADSL standards ITU G.992.1-5.
[25] JIANG, H., AND DOVROLIS, C. Passive Estimation of TCP
Round-Trip Times. ACM Comp. Comm. Review 32, 3 (2002).
[26] KARAGIANNIS, T., BROIDO, A., BROWNLEE, N.,
CLAFFY, K. C., AND FALOUTSOS, M. Is P2P dying or just
hiding? In Proc. IEEE GLOBECOM (Nov 2004).
[27] KARAGIANNIS, T., RODRIGUEZ, P., AND PAPAGIANNAKI,
K. Should Internet Service Providers Fear Peer-Assisted
Content Distribution? In Proc. ACM Internet Measurement
Conference (2005).
[28] KITZ.CO.UK. Interlaving Explained.
http://www.kitz.co.uk/adsl/interleaving.htm.
[29] KOTZ, D., AND ESSIEN, K. Characterizing Usage of a
Campus-wide Wireless Network. Tech. rep., Dept. of
Comp.Sci, Dartmouth College, Mar 2002.
[30] KOTZ, D., AND ESSIEN, K. Analysis of a campus-wide
Wireless Network. Wireless Networks 11, 1-2 (2005),
115–133.
[31] KRISHNAMURTHY, B., AND REXFORD, J. Web Protocols
and Practice. Addison-Wesley, 2001.
Modeling TCP Throughput: A Simple Model and its
Empirical Validation. In ACM SIGCOMM (Sep 1998).
[40] PARKER, A. CacheLogic: P2P Media Summit.
[41] PAXSON, V. Bro: A System for Detecting Network Intruders
in Real-Time. Comuter Networks 31, 23–24 (1999).
[42] RAPIDSHARE. http://www.rapidshare.com/, 2009.
[43] RIGNEY, C., WILLENS, S., LIVINGSTON, RUBENS, A.,
MERIT, SIMPSON, W., AND DAYDREAMER. Remote
Authentication Dial In User Service (RADIUS). RFC 2865,
2000.
[44] SCHNEIDER, F., AGARWAL, S., ALPCAN, T., AND
FELDMANN, A. The New Web: Characterizing AJAX
Trafﬁc. In Proc. Passive and Active Measurement
Conference (2008).
[45] SCHULZE, H., AND MOCHALSKI, K. Ipoque: Internet
Study 2007.
[46] SCHULZE, H., AND MOCHALSKI, K. Ipoque: Internet study
2008/2009.
[47] SIEKKINEN, M., COLLANGE, D., URVOY KELLER, G.,
AND BIERSACK, E. W. Performance Limitations of ADSL
Users: A Case Study. In Proc. Passive and Active
Measurement Conference (2007).
[48] SIEKKINEN, M., URVOY KELLER, G., BIERSACK, E. W.,
AND COLLANGE, D. A Root Cause Analysis Toolkit for
TCP. Comuter Networks 52, 9 (Jun 2008).
[49] SRIPANIDKULCHAI, K., MAGGS, B., AND ZHANG, H. An
Analysis of Live Streaming Workloads on the Internet. In
Proc. ACM Internet Measurement Conference (2004).
[50] TOMLINSON, D. Plusnet report: More Record Breaking
Streaming and the Latest iPlayer News.
http://community.plus.net/blog/2008/07/17/
more-record-breaking-streaming-and-the-
latest-iplayer-news/.
[51] VEAL, B., LI, K., AND LOWENTHAL, D. New Methods for
Passive Estimation of TCP Round-Trip Times. In Proc.
Passive and Active Measurement Conference (2005).
[32] L7FILTER. Application Layer Packet Classiﬁer for Linux.
[52] WIKIPEDIA. Zwangstrennung (in German).
http://l7-filter.sourceforge.net/.
[33] MATHIS, M., SEMKE, J., MAHDAVI, J., AND OTT, T. The
Macroscopic Behavior of the TCP Congestion Avoidance
Algorithm. Computer Communication Review 27, 3 (Jul
1997).
[34] MEDINA, A., ALLMAN, M., AND FLOYD, S. Measuring
the Evolution of Transport Protocols in the Internet. ACM
Comp. Comm. Review 35, 2 (2004).
[35] MOORE, D., SHANNON, C., AND CLAFFY, K. Code-Red: A
Case Study on the Spread and Victims of an Internet Worm.
In Proc. ACM Measurement Workshop (2002), pp. 273–284.
[36] NAZIR, A., RAZA, S., AND CHUAH, C.-N. Unveiling
Facebook: A Measurement Study of Social Network Based
Applications. In Proc. ACM Internet Measurement
Conference (2008).
[37] NETZIKON. Zwangstrennung (in German). http://
netzikon.net/lexikon/z/dsl-zwangstrennung.html,
2009.
[38] OECD. OECD Broadband Portal.
http://www.oecd.org/sti/ict/broadband, 2008.
http://de.wikipedia.org/w/index.php?title=
Zwangstrennung&oldid=56733242, 2009.
[53] WILLS, C., AND MIKHAILOV, M. Studying the impact of
more complete server information on Web caching. In Proc.
of the 5th International Web Caching and Content Delivery
Workshop (2000).
[54] XIE, Y., YU, F., ACHAN, K., GILLUM, E., GOLDSZMIDT,
M., AND WOBBER, T. How Dynamic are IP Addresses? In
Proc. ACM SIGCOMM (2007).
[55] YU, H., ZHENG, D., ZHAO, B. Y., AND ZHENG, W.
Understanding User Behavior in Large-Scale
Video-on-Demand Systems. ACM SIGOPS Operating
System Review 40, 4 (2006).
[56] ZHANG, Y., BRESLAU, L., PAXSON, V., AND SHENKER,
S. On the Characteristics and Origins of Internet Flow Rates.
In Proc. ACM SIGCOMM (2002).
[57] ZINK, M., SUH, K., GU, Y., AND KUROSE., J. Watch
Global, Cache Local: YouTube Network Traces at a Campus
Network - Measurements and Implications. In Proc. ACM
Multimedia Computing and Networking (2008).
102