User: How to use Prometheus to monitor system performance indicators? Please describe the basic monitoring metrics and configuration methods.
Assistant: Prometheus is an open source monitoring system that provides powerful data collection, storage and query functions. The following are the basic monitoring indicators and configuration methods: 1. Basic monitoring indicators: (1) CPU usage (2) Memory usage (3) Disk usage (4) Network traffic (5) Request response time (6) Error rate (7) Number of active connections, etc. 2. Configuration method: (1) Install Prometheus Step 1: Download the Prometheus binary file (linux, prometheus.tar.gz) from the official website https://prometheus.io/download/. Step 2: Unzip the downloaded file tar -zxvf prometheus-*.tar.gz Step 3: Start Prometheus ./prometheus --config.file=prometheus.yml (2) Configure the monitoring target In Prometheus, we need to specify the Which targets to monitor, first configure the targets to be monitored in prometheus.yml. - job_name: 'prometheus' static_configs: - targets: ['localhost:9090'] (3) Configure indicator collection Prometheus uses the HTTP interface by default to obtain indicator information, and configure the indicators to be collected, for example: - job_name: 'node' static_configs : - targets: ['localhost:9100'] metrics_path: /metrics scheme: http (4) Configure alarms Prometheus can not only monitor system indicators, but also configure alarm rules. When certain indicators are abnormal, an alarm will be sent to the administrator information. For example: groups: - name: node-exporter.rules #Alert rule name rules: - alert: HighCpuLoad #Alert rule name expr: node_load1 > 10 #Expression that triggers the alarm for: 10m #Trigger alarm duration labels: severity: warning annotations: summary: "High CPU load detected" #Alarm summary description: "The CPU load is {{ $value }}." #Alert detailed description (5) Query indicator data In Prometheus, you can use PromQL query language to query indicator data , such as querying CPU usage: 100 - (avg(irate(node_cpu{mode='idle'}[5m])) by (instance)) * 100 The above are basic monitoring indicators and configuration methods, using Prometheus to monitor system performance indicators , which can help administrators find problems in time and improve system operation efficiency.