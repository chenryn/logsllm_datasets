• Its configuration is in /opt/apache2/conf/httpd.conf. Apple modified this file by 
configuring it to run the httpd processes as user and group www. If you enable 
WebDAV with Apache 2, note that although your WebDAV clients using version 10.1 
of  Mac OS X or Mac OS X Server will be able to mount Apache2 WebDAV volumes, 
they will not have write access; they will have read-only access. WebDAV clients using 
version 10.2 will not have this problem.
• It is controlled by its own version of the apachectl script, so to start it, type “sudo /
opt/apache2/bin/apachectl start.”
• Although it's possible to run both versions of Apache, you should be cautious when 
doing so. Make sure the two versions do not attempt to listen on the same port. Both 
are configured to listen on port 80, so either edit /opt/apache2/conf/httpd.conf to 
change the Listen directive or use the web section of Server Admin to change the 
port of all your virtual hosts to something other than 80. Also note that if the web 
performance cache is enabled, it may be the process that's actually listening on 
port 80.
JBoss
JBoss is an open-source application server designed for J2EE applications; it runs on 
Java 1.4.1. JBoss is a widely used, full-featured Java application server. It provides a full 
Java 2Platform, Enterprise Edition (J2EE) technology stack with features such as:
• An Enterprise Java Bean (EJB) container
• Java Management Extensions (JMX)
• Java Connector Architecture (JCA)
By default, JBoss uses Tomcat as its web container, but you can use other web 
containers, such as Jetty, if you wish.
You can use the Application Server section of Server Admin and the command-line 
tools in the Terminal application to manage JBoss. Server Admin integrates with the 
watchdog process to ensure continuous availability of JBoss once JBoss has been 
started. You can use Server Admin to start one of the available JBoss configurations, 
stop JBoss, and view the log files. 
Two web-based tools for working with JBoss are also included with Mac OS X Server, 
one for management and configuration of the JBoss server and one for deployment of 
existing applications. Both tools are located in  /Library/JBoss/Application. 
 LL2350.book  Page 56  Friday, August 22, 2003  2:32 PM
Chapter 6    Working With Open-Source Applications
57
For detailed information about JBoss, J2EE, and the tools, see these guides:
• Java application server administration guide, which explains how to deploy and 
manage J2EE applications using JBoss in Mac OS X Server
• Java enterprise applications guide, which explains how to develop J2EE applications
Both guides are available from Apple developer publications.
Additional information about these Java technologies is available online.
• For JBoss, see www.jboss.org/.
• For J2EE, see java.sun.com/j2ee/.
To open the JBoss management tool:
m In Server Admin, click Application Server in the list for the server you want.
To start or stop JBoss:
1 In Server Admin, click Application Server in the list for the server you want.
2 Click Settings in the button bar.
3 Select one of the JBoss options. (Do not select Tomcat Only.)
4 Click Start Service or Stop Service.
JBoss is preconfigured to use a local configuration.
With JBoss turned on, you can use the management tool to configure your server.
For details of configuring JBoss and using the command-line tools for it, see the Java 
application server administration guide, which explains how to deploy and manage 
J2EE applications using JBoss in Mac OS X Server. This guide is available from Apple 
developer publications.
To change the JBoss configuration in use:
1 In Server Admin, click Application Server in the list for the server you want.
2 Click Settings in the button bar.
3 Do one of the following:
• Click Load Remote Configuration and type the location of a JBoss NetBoot server.
• Click Use Local Configuration and choose a configuration from the pop-up menu.
 LL2350.book  Page 57  Friday, August 22, 2003  2:32 PM
58
Chapter 6    Working With Open-Source Applications
To manage JBoss:
1 In Server Admin, click Application Server.
2 Click Settings in the button bar.
3 Click Manage JBoss.
Note:  The JBoss management tool must already be running. You can use the Terminal 
application to set it as a startup item.
4 Make the adjustments you want in the management console.
Backing Up and Restoring JBoss Configurations
You use the Application Server section of Server Admin to back up and restore JBoss 
configurations.
To back up or restore a JBoss configuration:
1 In Server Admin, click Application Server in the list for the server you want.
2 Click Settings in the button bar at the bottom of the window.
3 Click Backup at the top of the window.
4 Click either Backup or Restore and navigate to the location where you want to store or 
have stored configurations.
The current configuration is backed up.
Tomcat
Tomcat is the open source servlet container that is used as the official Reference 
Implementation for the Java Servlet and JavaServer Pages technologies. The Java 
Servlet and JavaServer Pages specifications are developed by Sun under the Java 
Community Process. 
The current production series is the Tomcat 4.1.x series and it implements Java Servlet 
2.3 and JavaServer Pages 1.2 specifications. More information is available from the 
following sources:
• For Java Servlet specifications, see java.sun.com/products/servlets
• For Java ServerPages specifications, see java.sun.com/products/jsp
In Mac OS X Server 10.3, you use the Application Server section of Server Admin to 
manage Tomcat. Once Tomcat is started its life cycle is managed by Server Admin, 
which ensures that Tomcat starts up automatically after a power failure or after the 
server shuts down for any reason.
For more information about Tomcat and documentation for this software, see 
http://jakarta.apache.org/tomcat/
 LL2350.book  Page 58  Friday, August 22, 2003  2:32 PM
Chapter 6    Working With Open-Source Applications
59
For information about Java Servlets that you can use on your server, see
• http://java.sun.com/products/servlet/
• http://java.sun.com/products/jsp/
If you want to use Tomcat, you must activate it. You can use Server Admin or the 
command-line tool to start Tomcat.
To start Tomcat using Server Admin:
1 In Server Admin, click Application Server in the list for the server you want.
2 Click Settings in the button bar.
3 Click Tomcat Only.
4 Click Start Service.
To start Tomcat using Terminal:
1 Open the Terminal application.
2 Type the following commands:
cd /Library/Tomcat/bin
./catalina.sh start
To verify that Tomcat is running, use a browser to access port 9006 of your website by 
entering the URL for your site followed by :9006. If Tomcat is running, this URL will 
display the Tomcat home page.
MySQL
MySQL provides a relational database management solution for your web server. With 
this open-source software, you can link data in different tables or databases and 
provide the information on your website.
The MySQL Manager application simplifies setting up the MySQL database on 
Mac OS X Server. You can use MySQL Manager to initialize the MySQL database, and to 
start and stop the MySQL service.
MySQL is preinstalled on Mac OS X Server, with its various files already in the 
appropriate locations. At some point you may wish to upgrade to a newer version of 
MySQL. You can install the new version in /usr/local/mysql, but MySQL Manager will 
not be aware of the new version of MySQL and will continue to control the pre-
installed version. If you do install a newer version of MySQL, use MySQL Manager to 
stop the preinstalled version, then start the newer version via the config file.
 LL2350.book  Page 59  Friday, August 22, 2003  2:32 PM
60
Chapter 6    Working With Open-Source Applications
Installing MySQL
Mac OS X Server versions 10.3 includes the latest MySQL, version 4.0.14. Since it's 
preinstalled, you won't find it in /usr/local/mysql. Instead, its elements are distributed in 
the file system according to standard UNIX file layout, with executables in /usr/sbin and 
/usr/bin, man pages in /usr/share/man, and other parts in /usr/share/mysql. When 
installed, the MySQL database resides in /var/mysql.
At some point a newer version of MySQL will be posted to http://www.mysql.com. At 
that time you may consider downloading the source and building it yourself (if you 
have the developer packages installed) or downloading the appropriate binary 
distribution and installing it yourself, following the instructions posted on that website. 
By default, such installations reside in /usr/local/mysql/. So if you install your own 
version of MySQL, you'll have two versions of MySQL present on your system. This 
should do no harm as long as you don't try to run both the old one and the new one. 
Just be sure to prefix any commands intended for the new version with the full path 
(starting with /usr/local/mysql), or make sure your shell's path variable is set to search 
in your local directory first.
Note that the MySQL Manager application works only with the preinstalled version of 
MySQL; it does not work with MySQL installed elsewhere. The paths to the various 
preinstalled components of MySQL are stored in the following plist file:
/Applications/Server/MySQL Manager.app/Contents/Resources/tool_strings.
If You Are Updating from Mac OS X Server 10.x and Use MySQL
Mac OS X Server version 10.3 contains a new version of MySQL. Previous versions of the 
server contain MySQL 3.23.x; the version now installed is 4.0.14, which is the latest 
production version. This version is the one recommended by mysql.com.
Your MySQL 3.23.x databases should work with the new version of MySQL, but it’s a 
good idea to back them up before updating.
When using MySQL 4.0.14, there are several commands you can use with your old 
databases to remove dependency on the ISAM table format, which has been 
deprecated over time. 
• Use mysql_fix_privilege_tables to enable new security privilege features.
• Use mysql_convert_table_format (if all existing tables are ISAM or MyISAM) or use 
ALTER TABLE table_name TYPE+MyISAM on all ISAM tables to get away from the 
degraded ISAM table format.
Refer to the instructions provided on the MySQL website at www.mysql.com/doc/en/
Upgrading-from-3.23.html before using these commands.
For more information about MySQL, see www.mysql.com.
 LL2350.book  Page 60  Friday, August 22, 2003  2:32 PM
7
61
7 Installing and Viewing 
Web Modules
Become familiar with the modules that provide key 
features and controls for web service.
The Apache web server includes a series of modules that control the server’s operation. 
In addition, Mac OS X Server provides some modules with specialized functions for the 
Macintosh.
Apache Modules
Modules “plug in” to the Apache web server software and add functionality to your 
website. Apache comes with some standard modules, and you can purchase modules 
from software vendors or download them from the Internet. You can find information 
about available Apache modules at the website www.apache.org/docs/mod.
To work with Apache modules:
• To view a list of web modules installed on your server, in Server Admin click Web in 
the list for the server you want, choose Settings in the button bar, and click Modules.
• To enable a module, select the Enabled box beside its name, and click Save. (Web 
service restarts automatically.)
• To install a module, follow the instructions that came with the module software. The 
web server loads modules from the directory /usr/libexec/httpd/.
Macintosh-Specific Modules
Web service in Mac OS X Server installs some modules specific to the Macintosh. These 
modules are described in this section.
mod_macbinary_apple
This module packages files in the MacBinary format, which allows Macintosh files to be 
downloaded directly from your website. A user can download a MacBinary file using a 
regular web browser by adding “.bin” to the URL used to access the file.
 LL2350.book  Page 61  Friday, August 22, 2003  2:32 PM
62
Chapter 7    Installing and Viewing Web Modules
mod_sherlock_apple
This module lets Apache perform relevance-ranked searches of the website using 
Sherlock. Once you index your site using the Finder, you can provide a search field for 
users to search your website.
m To index a folder’s contents, choose Get Info from the file menu.
Note:  You must be logged in as root for the index to be copied to the web directory in 
order to be searchable by a browser.
Clients must add .sherlock to your website’s URL to access a page that allows them to 
search your site. For example, http://www.example.com/.sherlock.
mod_auth_apple
This module allows a website to authenticate users by looking for them in directory 
service domains within the server’s search policy. When authentication is enabled, 
website visitors are prompted for a user name and password before they can access 
information on the site.
mod_hfs_apple
This module requires users to enter URLs for HFS volumes using the correct case 
(lowercase or uppercase). This module adds security for case-insensitive volumes. If a 
restriction exists for a volume, users receive a message that the URL is not found.
mod_digest_apple
The new mod_digest_apple module enables digest authentication for a WebDAV 
realm.
mod_rendezvous_apple
The new mod_rendezvous_apple module allows administrators to control how 
websites are registered with Rendezvous. See “Enabling Apache Rendezvous 
Registration” on page 51 for more information. 
Open-Source Modules
Mac OS X Server includes these popular open-source modules: Tomcat, PHP: Hypertext 
Preprocessor, and mod_perl.
Tomcat
The Tomcat module, which uses Java-like scripting, is the official reference 
implementation for two complementary technologies developed under the Java 
Community Process. For more information about Tomcat, see “Tomcat” on page 58.
If you want to use Tomcat, you must activate it first. You use the Application Server 
section of Server Admin to start Tomcat. See “Tomcat” on page 58 for instructions.
 LL2350.book  Page 62  Friday, August 22, 2003  2:32 PM
Chapter 7    Installing and Viewing Web Modules
63
PHP:  Hypertext Preprocessor
PHP lets you handle dynamic web content by using a server-side HTML-embedded 
scripting language resembling C. Web developers embed PHP code within HTML code, 
allowing programmers to integrate dynamic logic directly into an HTML script rather 
than write a program that generates HTML.
PHP provides CGI capability and supports a wide range of databases. Unlike client-side 
JavaScript, PHP code is executed on the server. PHP is also used to implement WebMail 
on Mac OS X Server. For more information about this module, see www.php.net.
mod_perl
This module integrates the complete Perl interpreter into the web server, letting 
existing Perl CGI scripts run without modification. This integration means that the 
scripts run faster and consume fewer system resources. For more information about 
this module, see perl.apache.org.
 LL2350.book  Page 63  Friday, August 22, 2003  2:32 PM
 LL2350.book  Page 64  Friday, August 22, 2003  2:32 PM
8
65
8 Solving Problems
If you experience a problem with web service or one of 
its components, check the tips and strategies in this 
chapter.
From time to time you may encounter a problem when setting up or managing web 
services. Some of the situations that may cause a problem for administering web 
service or for client connections are outlined here.
Users Can’t Connect to a Website on Your Server
Try these strategies to uncover the problem:
• Make sure that web service is turned on and the site is enabled.
• Check the Web Service Overview window to verify that the server is running.
• Check the Apache access and error logs. (If you are not sure what the messages 
mean, you’ll find explanations on the Apache website at www.apache.org.)
• Make sure users are entering the correct URL to connect to the web server.
• Make sure that the correct folder is selected as the default web folder. Make sure that 
the correct HTML file is selected as the default document page.
• If your website is restricted to specific users, make sure those users have access 
privileges to your website.
• Verify that users’ computers are configured correctly for TCP/IP. If the TCP/IP settings 
appear correct, use a “pinging” utility that allows you to check network connections.
• Verify that the problem is not a DNS problem. Try to connect with the IP address of 
the server instead of its DNS name.
• Make sure your DNS server’s entry for the website’s IP address and domain name
are correct.
 LL2350.book  Page 65  Friday, August 22, 2003  2:32 PM
66
Chapter 8    Solving Problems
A Web Module Is Not Working as Expected
• Check the error log in Server Admin for information about why the module might 
not be working correctly.
• If the module came with your web server, check the Apache documentation for that 
module and make sure the module is intended to work the way you expected.
• If you installed the module, check the documentation that came with the web 
module to make sure it is installed correctly and is compatible with your server 
software.
For more information on supported Apache modules for Mac OS X Server, see 
Chapter 7, “Installing and Viewing Web Modules,” on page 61 and the Apache website 
at www.apache.org/docs/mod/.
A CGI Will Not Run
• Check the CGI’s file permissions to make sure the CGI is executable by www. If not, 
the CGI won’t run on your server even if you enable CGI execution in Server Admin. 
 LL2350.book  Page 66  Friday, August 22, 2003  2:32 PM
9
67
9 Where to Find More Information
For information about configuration files and other 
aspects of Apache web service, see these resources:
• Apache:  The Definitive Guide, 3rd edition, by Ben Laurie and Peter Laurie (O’Reilly and 
Associates, 2002)
• CGI Programming with Perl, 2nd edition, by Scott Guelick, Shishir Gundavaram, and 
Gunther Birznieks (O’Reilly and Associates, 2000)
• Java Enterprise in a Nutshell, 2nd edition, by William Crawfod, Jim Farley, and David 
Flanagan (O’Reilly and Associates, 2002)