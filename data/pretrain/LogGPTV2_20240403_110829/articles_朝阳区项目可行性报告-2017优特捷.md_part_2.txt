height="3.1555555555555554in"}
我们的configure_linux_rsyslog.sh脚本将为用户自动配置linux的标准rsyslog守护进程(deamon)以转发数据到日志易。
本地上传-日志提供通过简单的命令行上传和拖拽文件直接上传两种方式。用户可以上传单个最大5MB的日志且单条日志信息小于1MB的文件。
![1](media/image19.jpeg){width="5.240972222222222in"
height="2.4069444444444446in"}
用户只需填写tag（标签）、appname（应用名称），选择本地日志文件，或直接拖拽到指定区域即可。
**2）自动解析日志格式**
日志易自动解析Apache，Nginx，JSON等类型的日志，您可以通过分类检索、字段过滤对日志进行统计分析，您会发现我们添加了一个名为\"logtype\"的字段来标识日志类型。对于不能被自动识别的日志，我们会对其全文索引，但是这将无法让您充分使用日志易的字段搜索功能。在本节中我们将介绍日志易支持的日志类型，以及日志无法自动解析时如何处理。
a.可识别的日志格式：
这里主要向您介绍日志易支持的日志格式，对于常见日志通常有详尽的官方文档说明供您进一步参考。另外，我们会持续添加更多的可识别日志格式，如果您的日志暂时不能被正确识别并解析，希望您通知我们，并提供一些日志样本。
我们目前支持以下日志格式：
用户可以在账户中创建新用户，在日志易账户下有三种用户角色：超级管理员（owner）、管理员（admin）和普通用户（user）。三种角色的定义、权限和使用限制如下：
![1](media/image20.jpeg){width="5.084027777777778in"
height="1.698611111111111in"}
b.限制普通用户访问日志的范围
当您添加或编辑新的普通用户时，您可以选择在账户包含的日志中划定一个子集作为新用户的搜索范围，具体实现方式是在"日志分组"中选定一个或多个分组。
**3）日志搜索**
搜索的四种方式包括范围查询、正则表达式、NOT/AND/OR布尔值和字段过滤。
范围查询：可快速发现满足一定条件参数的事件，例如检索Apache
Web服务器响应时间大于200ms的事件。
正则表达式：可以定义查询模版来简化你的搜索输入，假如你有一批名为app01-app99机器，如果你只想搜索前30台，你可以输入"/app\[0-2\]\[0-9\]/"来简化搜索输入。
AND/OR/NOT布尔值：利用AND、OR、NOT和(
)的组合，您可以自由构造各种复杂的组合查询语句。
字段过滤：字段过滤快速显示您所有结构化/半结构化特殊字段的统计聚合，点击其中的字段值进行过滤操作，可快速缩小事件的查询范围。
一个搜索框核心由四个部分构成：
A.日志分组
日志数据的逻辑分组。搜索日志中的源数据必须通过上传日志中定义的主机名（hostname）、应用程序（appname）、标签（tag）进行组合定义。
B.查询语句
搜索框中的查询语句。
C.时间范围
使用下拉菜单快速挑选预设时间方案或设置一个自定义的时间范围。
D.字段过滤
使用字段过滤可以快速增加搜索条件
E.搜索界面剖析
在使用搜索查询语言之前，让我们先大致了解一下搜索功能。您可以不用掌握复杂的搜索语句就可以从搜索界面得到大量信息。
![1](media/image21.jpeg){width="5.134027777777778in"
height="2.3916666666666666in"}
**4）保存搜索**
当您通过搜索得到有价值的数据，您可以选择保存搜索，以便后续直接使用，同时也方便帐户中的其他用户。
保存搜索并周期性运行是日志易提供的快速分析日志的有效方法，通过搜索特定情况下的日志可以精确定位问题，及时发现信息异常。
![1](media/image22.jpeg){width="4.695138888888889in"
height="1.4333333333333333in"}
**5）统计视图**
每次搜索，日志易都会为您生成简单直观的时间序列趋势图，这是搜索时间范围内所有索引日志事件的直方图，你可以利用直方图比较随着时间推移的日志属性。如果您需要更多统计及可视化功能，请使用统计视图，您可以得到更多图表和统计结果。并且可将图表保存到自定义仪表盘上随时查看。
![2](media/image23.jpeg){width="5.374305555555556in"
height="2.615972222222222in"}
> **6）仪表板为用户提供一站式服务，方便您查看帐户中所有日志的基本情况。**每个帐户拥有一个默认仪表盘，其中包含一些常用组件：
a.事件概览：时间轴展示24小时内上传的日志情况。
b.TOP值概览：选择字段将显示该字段中出现频率较高的前20个值。
c.告警：告警及触发状况。
d.已存搜索：已存搜索将被显示在仪表板上。
![1](media/image24.jpeg){width="5.372916666666667in"
height="3.979861111111111in"}
**7) 非结构化数据解析**
![解析](media/image25.png){width="4.925in" height="4.861111111111111in"}
收到一条日志raw_event提取key(token +
appname（appname不存在则使用hostname）)，从ParserCache中找对应的EventParser如果hit
cache 并且处理成功 ，则返回structured event，如果没找到 EventParser 或
EventParser
处理不成功，进入ParserContainer处理，看token+appname是否有对应的Custom配置，如果有则使用按照其配置产生的Parser来处理，如果处理成功则产生event_parser和structured
event,更新cache，若不成功则使用DefaultParser只保留raw_message，不提取任何字段，如果没有，则使用Common配置处理，需要依次使用各种类型的Parser去try,如果处理成功则产生event_parser和structured
event，更新cache，若不成功则使用DefaultParser只保留raw_message，不提取任何字段，返回structured
event。
**2.6项目研究的功能**
日志易是一个配置简单、功能强大、容易使用的日志管理工具，它对日志进行集中采集和准实时索引，提供搜索、分析、可视化和监控告警等功能，帮助我们进行线上业务实时监控、业务异常原因定位、业务日志数据统计分析、及安全与合规审计。系统分为以下模块如下图：
![](media/image26.png){width="5.311805555555556in"
height="2.3541666666666665in"}
a.日志采集模块：在各台服务器上不是本地日志采集模块，采集后上传到中央日志采集模块；
b.日志处理模块：对日志进行处理，抽取关键字段，对一条日志多行的情况进行合并；
c.消息总线系统：对日志进行传输、缓存，如果其他模块宕机，可从这里进行数据恢复；
d.日志索引模块：对日志的关键字段及全文进行索引；
e.日志检索模块：对用户查询请求检索日志索引；
f.日志分析模块：对日志进行统计、分析、数据挖掘；
g.日志告警模块：对日志出现的异常情况进行告警；
h.前端展现模块：对日志及分析结果进行数据可视化展现；
**3、项目创新点；**
**1）创新性**
**技术创新：**
创新点1：自主创新技术时间序列数据分析方法。
一种处理时间序列数据的方法及装置，用以将时间序列数据的时间信息的格式统一化。所述方法包括：根据预设时间信息格式从时间序列数据的记录文档中提取时间信息；根据提取的时间信息确定记录文档中各条时间序列数据所对应的时间信息；将各条时间序列数据所对应的时间信息的格式转换为预设时间格式，能够对时间序列数据的时间信息的格式进行统一，避免因为不支持时间序列数据的时间信息格式，而无法对时间序列数据进行分析，而且时间序列数据以统一的格式记录、展示时间信息，也方便处理、分析、展示这些时间序列数据。
目前，各种不同系统产生的时间序列数据的时间信息的格式会有所不同，当进行数据分析的系统不支持时间序列数据的时间信息格式时，将无法对时间序列数据进行分析。时间信息对于分析数据具有重要意义。该技术为原创技术，已申请专利。
创新点2：自主创新非结构化数据处理技术。
将非结构化数据转化为结构化数据，方法包括：获取用于抽取非结构化数据中关键字段的解析规则；利用所述解析规则，抽取非结构化数据中的关键字段；将抽取的关键字段命名为预设参数，并将所属预设参数赋值为抽取的关键字段，生成结构化数据。
该技术方案可以将非结构化数据转化为结构化数据，从而便于查询统计，节省计算空间和查询时间。该技术为原创技术，已申请专利。
创新点3：自主创新自动告警技术。
自动报警方法包括，对历史日志信息中的关键参量的参量值进行统计，得出关键参量的正常值范围；判断当前日志中关键参量的参量值是否在所述正常值范围内，在当前日志中关键参量的参量值未在正常值范围内时，产生报警信息进行告警。
该技术方案可以减轻操作人员的工作负担，降低误报警率和漏报警率。从而便于企业运维，节省人力资源和提升工作效率。该技术为原创技术，已申请专利。
**2）商业模式创新**
我们提供两种版本的日志易产品------企业部署版和SaaS云端服务。根据流量和日志存储天数设定套餐供用户选择购买使用。
企业部署版分为两种模式：买断和月租用户选择买断方式则根据自己的数据量情况一次性缴费，购买后即可永久使用，但如果数据流量超出购买量则需要根据超出量补交费用；用户选择月租模式则按月收费，每月末按当月数据量缴费。
SaaS版根据用户每日数据量和日志存储天数收费，用户可在既定收费套餐中选择适合自己的套餐。
**4、产品实现的技术路线；**
![](media/image27.png){width="4.9125in" height="2.4458333333333333in"}
日志易产品功能快速迭代，2014年10月SaaS上线以来，日志易又陆续开发完成多行日志解析、日志自定义格式配置、多级统计等功能。每个月都发布新版本，推出更全面的日志分析服务。
**5、项目完成时主要技术指标；**
（1）实现新的实时搜索分析引擎，可处理每秒1000万条数据，每天处理新增数据量200TB，检索1000亿条数据，60秒内返回结果
；