During January 2004, we received QFind experimental results4 from 47 Qﬁnd
volunteers, primarily from within the WPI CS community of undergraduate stu-
dents, graduate students and faculty. These users had 16 diﬀerent ISPs: Charter
(16 users), Verizon (11), Comcast (4), Speakeasy (4), Earthlink (2), AOL (1),
Winternet (1), RR (1), RCN (1), NetAccess (1), MTS (1), Cyberonic (1), Cox
(1), Covad (1) and Adelphia (1). The QFind home nodes had 5 diﬀerent ope-
rating systems: WinXP (18 users), Win2k (11), Linux (6), Mac OS-X (3), and
Win98 (1) and 12 unreported. Approximately one-third of the volunteers had a
wireless LAN connecting their home node to their broadband ISP.
y
t
i
s
n
e
D
e
v
i
t
l
a
u
m
u
C
1
0.9
0.8
0.7
0.6
0.5
0.4
0.3
0.2
0.1
0
All
DSL
Cable
0
50
100 150 200 250 300 350 400 450
Throughput (Kbytes/s)
y
t
i
s
n
e
D
e
v
i
t
l
a
u
m
u
C
1
0.9
0.8
0.7
0.6
0.5
0.4
0.3
0.2
0.1
0
All
DSL
Cable
0
200 400 600 800 1000 1200 1400 1600 1800
Max Ping (seconds)
Fig. 4. Cumulative Density Functions of
Throughput
Fig. 5. Cumulative Density Functions of
Max Ping Times
About 45% of the volunteers used DSL and 55% used cable modems. Figure 4
presents CDFs the throughput for all QFind tests, with separate CDFs for cable
and DSL. The CDF for cable modems show a sharp increase corresponding to a
standard 768 Kbps downlink capacity, which is also the median capacity. Above
this median, however, the distributions separate with cable getting substantially
higher throughput than DSL.
Figure 5 depicts CDFs of the maximum ping times reported for all QFind
tests, with separate CDFs for cable and DSL. The median max ping time is
about 200 ms, but is signiﬁcantly higher for DSL (350 ms) than for cable (175
ms). Ping times of 350 ms are signiﬁcant since this is enough delay to aﬀect
interactive applications [4,5]. In fact, the entire body of the DSL CDF is to the
right of the cable CDF, indicating a signiﬁcant diﬀerence in the max ping times
for DSL versus cable. Also, the maximum ping times for cable can be up to
a second and can be well over a second for DSL, a detriment to any kind of
real-time interaction.
4 The QFind data we collected can be downloaded from http://perform.wpi.edu/-
downloads/#qﬁnd
234
M. Claypool et al.
In analyzing the full data set to infer queue sizes (see the analysis in [3]), it
appeared QFind may not clearly distinguish delays from the access queue from
other system delays. We noted considerable variance in inferred access queue
sizes even for volunteers within the same provider, an unlikely occurrence given
that ISP providers tend to standardize their equipment at the edge by home
users. This suggests that for some experiment runs, the ping delays that QFind
uses to infer the queue size are a result of something other than delay at the
access queue.
To remove data that does not accurately report access queue sizes, we win-
now the full data set by taking advantage of the fact that the QFind volunteers
produced three measurements. For each user’s three measurements, if any pair
have throughputs that diﬀer by more than 10% or maximum ping times that
diﬀer by more than 10%, then all three measurements are removed. This win-
nowing removed the data from 17 users and all subsequent analysis is based on
this winnowed data set.
y
t
i
s
n
e
D
e
v
i
t
l
a
u
m
u
C
1
0.9
0.8
0.7
0.6
0.5
0.4
0.3
0.2
0.1
0
0
10
All
DSL
Cable
30
20
60
Inferred Queue Size (Kbytes)
40
50
70
80
Fig. 6. Cumulative Density Functions of Access Queue Size Inferred by QFind
Figure 6 depicts a CDF of the access queue sizes measured by QFind, with
separate CDFs for DSL and cable. There is a marked diﬀerence between the
DSL and cable inferred queues, with cable having queue sizes under 20 Kbytes
while DSL queues are generally larger. The steep increase in the DSL queue sizes
around 60 Kbytes is near the limit of the receiver window size of most OSes (64
Kbytes), so the actual queue limits may be higher.
Figure 7 depicts CDFs for the access queue sizes for Charter,5 the primary
cable provider in our data set, and non-Charter cable customers. There are some
marked diﬀerences in the distributions, with Charter cable queues appearing to
be slightly smaller than non-Charter cable queues. The extremely large non-
Charter cable queue reported above 0.8 is from one cable provider.
5 http://www.charter.com/
Inferring Queue Sizes in Access Networks by Active Measurement
235
Figure 8 depicts similar CDFs for the access queue sizes for Verizon,6 the
primary DSL provider in our data set, and non-Verizon DSL customers. Here,
there are very few diﬀerences between the diﬀerent DSL provider distributions,
suggesting there may be common queue size settings across providers.
y
t
i
s
n
e
D
e
v
i
t
l
a
u
m
u
C
1
0.9
0.8
0.7
0.6
0.5
0.4
0.3
0.2
0.1
0
Non-Charter Cable
Charter
0
10
20
30
40
50
60
70
Inferred Queue Size (Kbytes)
y
t
i
s
n
e
D
e
v
i
t
l
a
u
m
u
C
1
0.9
0.8
0.7
0.6
0.5
0.4
0.3
0.2
0.1
0
Non-Verizon DSL
Verizon
10
20
30
40
50
60
70
80
Inferred Queue Size (Kbytes)
Fig. 7. Charter-Non-Charter: Inferred
Access Queues
Fig. 8. Verizon-Non-Verizon: Inferred
Access Queues
4 Summary
The QFind methodology for inferring queue sizes is attractive in several ways: 1)
by using a standard ping and a download through a Web browser, QFind does
not require any custom software or special end-host conﬁguration; 2) by using
a single TCP ﬂow, QFind so does not cause excessive congestion. This provides
the potential for QFind to be used to measure access queues from a wide-range
of volunteers.
Simulation and emulation results show that QFind can be eﬀective at in-
ferring queue sizes, even across multiple operating systems, as long as receiver
window sizes are large enough and access queues are not so small as to limit
throughput.
Unfortunately, measurement results suggest QFind is substantially less ac-
curate than in simulation for determining access queue sizes. By doing multiple
QFind experiments, it is possible to ensure analysis on only consistent results,
but this results in the discarding of many data samples, thus somewhat defeating
the purpose of having a readily available, non-intrusive methodology.
Based on the winnowed data set from our 47 QFind volunteers, DSL appears
to have signiﬁcantly smaller access queues than does cable, and the correspon-
ding ping delays when such a queue is full can signiﬁcantly degrade interactive
applications with real-time constraints. A secondary goal of this investigation
was to determine, using both emulation and simulation, to what extent access
link queue sizes can impact the throughput of ﬂows with high round-trip times
6 http://www.verizon.com/
236
M. Claypool et al.
and the delays of ﬂows for delay-sensitive applications, such as IP telephony and
network games. Due to space constraints, these results can only be found in [3].
Future work could include exploring technologies that have been used for
bandwidth estimation (a survey of such technologies is in [9]). In particular,
techniques such as [10] that detect congestion by a ﬁlling router queue may be
used to determine maximum queue sizes. The drawback of such techniques is
they require custom software and may be intrusive, so these drawbacks would
need to be weighed against the beneﬁt of possibly more accurate results.
References
1. Aditya Akella, Srinivasan Seshan, and Anees Shaikh. An Empirical Evaluation of
Wide-Area Internet Bottlenecks. In Proceedings of the ACM Internet Measurement
Conference (IMC), October 2003.
2. Jae Chung, Mark Claypool, and Yali Zhu. Measurement of the Congestion Respon-
siveness of RealPlayer Streaming Video Over UDP. In Proceedings of the Packet
Video Workshop (PV), April 2003.
3. Mark Claypool, Robert Kinicki, Mingzhe Li, James Nichols, and Huahui Wu. In-
ferring Queue Sizes in Access Networks by Active Measurement. Technical Report
WPI-CS-TR-04-04, CS Department, Worcester Polytechnic Institute, February
2004.
4. Spiros Dimolitsas, Franklin L. Corcoran, and John G. Phipps Jr. Impact of Trans-
mission Delay on ISDN Videotelephony. In Proceedings of Globecom ’93 – IEEE
Telecommunications Conference, pages 376 – 379, Houston, TX, November 1993.
5. Tristan Henderson. Latency and User Behaviour on a Multiplayer Game Server.
In Proceedings of the Third International COST Workshop (NGC 2001), number
2233 in LNCS, pages 1–13, London, UK, November 2001. Springer-Verlag.
6. Sharad Jaiswal, Gianluca Iannaccone, Christophe Diot, Jim Kurose, and Don To-
wsley. Inferring TCP Connection Characteristics Through Passive Measurements.
In Proceedings of IEEE Infocom, March 2004.
7. H. Jiang and C. Dovrolis. Source-Level IP Packet Bursts: Causes and Eﬀects. In
Proceedings of the ACM Internet Measurement Conference (IMC), October 2003.
8. Karthik Lakshminarayanan and Venkata Padmanabhan. Some Findings on the
Network Performance of Broadband Hosts. In Proceedings of the ACM Internet
Measurement Conference (IMC), October 2003.
9. R.S. Prasad, M. Murray, C. Dovrolis, and K.C. Claﬀy. Bandwidth Estimation:
Metrics, Measurement Techniques, and Tools. IEEE Network, November-December
2003.
10. Vinay Ribeiro, Rudolf Riedi, Richard Baraniuk, Jiri Navratil, and Les Cottrell.
pathChirp: Eﬃcient Available Bandwidth Estimation for Network Paths. In PAM),
2003.