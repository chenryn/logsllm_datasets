## 前言
本文旨在总结在攻防演练中，攻击方常用的几种突破防御的方法。请注意，本文的视角可能存在局限性，如有不当之处，请各位专家指正。
> **作者：0ne**  
本文的数据来源为18+个省市级别的实战攻防演练及90+份单位失陷报告。本文讨论的方法不包括钓鱼攻击和高危零日漏洞（0day）的应用。

### 突破入口点方法概览
在攻防演练中，主要关注两个得分点：**权限**与**数据**。其中，“权限”分为系统权限和应用权限，并进一步细分为管理员权限与普通用户权限；而“数据”通常指的是个人敏感信息四件套——姓名、手机号码、身份证号以及住址。此外，在特定场景下，如医疗信息系统中，病历资料也被视为敏感数据之一。基于上述统计结果，我们将从使用频率较高的几种方法入手进行详细说明。

## 弱口令 [Web 应用]
弱口令是信息安全中的一个顽疾，在几乎每一场攻防演练中都会发现利用弱口令成功入侵的案例 (共记录 **29** 次)。这里特别指出一些针对Web应用程序的弱口令问题，但不涉及PostgreSQL、Redis等数据库服务或其他工具（如转发器、Jenkins、Adminer）中存在的类似问题。

- **绕过验证码**: 在尝试爆破前，应首先寻找绕过验证码机制的方法，例如利用某些系统存在的逻辑缺陷或刷新频率限制。
- **用户名枚举**: 通过网站提供的找回密码功能，往往可以实施用户名枚举攻击，从而获取有效的账号列表。
- **字典选择**: 根据目标系统的性质（如企业内部网），合理推测可能使用的账号名称格式（比如员工工号、姓名缩写等）。同时，也可以参考登录页面上的JavaScript正则表达式来构造更精确的字典。
- **常用字典推荐**:
  - [SuperWordlist](https://github.com/fuzz-security/SuperWordlist)
  - [Web-Fuzzing-Box](https://github.com/gh0stkey/Web-Fuzzing-Box)

## 弱口令 [其他类型]
除了Web应用外，数据库和其他服务同样存在因配置不当导致的安全隐患。以下是一些值得注意的例子：

- **PostgreSQL** (CVE-2019-9193): 利用该漏洞可执行任意命令。
- **Redis**: 可以通过`INFO`命令获取服务器版本等信息，并据此采取相应措施实现远程代码执行。
- **转发服务**: 如果遇到的是Web形式的转发服务，则可以通过大规模弱口令猜测尝试获取访问权限。
- **Jenkins & Adminer**: 这类工具若配置了简单密码，则极易成为攻击者的目标。

## Shiro反序列化
Shiro框架下的反序列化漏洞近年来频繁出现在各类攻防演练活动中，其影响范围广泛且易于被利用 (累计出现 **28** 次)。针对此类问题，建议采用自动化工具进行识别并加以防范。

- **实用工具链接**:
  - [BurpShiroPassiveScan](https://github.com/pmiaowu/BurpShiroPassiveScan)
  - [shiro_rce_tool](https://github.com/wyzxxz/shiro_rce_tool)
  - [shiro_attack](https://github.com/j1anFen/shiro_attack)

## 任意文件上传
当目标系统允许未经充分验证即上传文件时，攻击者便有机会植入恶意代码 (总计 **10** 例)。这类漏洞多见于客服系统、在线聊天平台等交互性强的服务中。

- **绕过WAF策略**: 通过构造特殊格式的数据包来规避安全设备检测，进而达到上传目的。

## Fastjson反序列化
Fastjson库中存在的反序列化漏洞也是常见的攻击手段之一 (共发现 **6** 起)，特别是在处理JSON数据过程中未对输入内容做严格校验的情况下。

- **检测与绕过技术**:
  - 使用DNSLog服务监听异常流量。
  - 对payload进行编码变形以避开防护规则。

## 敏感信息泄露
即使是小规模的信息泄露事件也不容忽视 (共计 **5** 例)，尤其是在医疗领域内，患者个人信息保护尤为重要。

## UEditor 1.4.3 任意文件上传
对于使用UEditor编辑器的老版本网站而言，存在潜在的安全风险 (同样记录了 **5** 个案例)。攻击者可通过精心构造请求路径的方式达成非法操作目的。

## MSSQL堆叠注入
针对MSSQL数据库实施SQL注入攻击能够直接获得操作系统层面的控制权 (属于基础技能范畴)。

## OA系统
办公自动化(OA)软件由于其复杂度较高且更新维护不够及时，常常成为黑客攻击的重点对象。特别是那些已知但尚未公开修复方案的零日漏洞更是如此。

## 结语
综上所述，在参与网络安全攻防演练的过程中，我们应该优先考虑那些容易被突破的薄弱环节，避免无谓地浪费时间。希望以上分享能为大家提供一定参考价值。