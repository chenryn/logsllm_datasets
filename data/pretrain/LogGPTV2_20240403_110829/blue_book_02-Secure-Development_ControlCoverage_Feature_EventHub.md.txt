## IMPORTANT: DevOps Kit (AzSK) will be sunset by the end of FY21. For more details, see [here](../../../ReleaseNotes/AzSKSunsetNotice.md).

----------------------------------------------

### Event Hub Security Controls and Rationale

| **Control** | **Severity** | **Automated Fix Script** | **Rationale** |
|-------------|--------------|--------------------------|---------------|
| **Event Hub clients (event senders or receivers) must not use 'namespace' level access policies** | Medium | No | A 'namespace' level access policy grants access to all Queues/Topics within a namespace. In contrast, using an access policy at the entity (Queue/Topic) level provides access only to the specific entity, adhering to the principle of least privilege. |
| **Access policies must be defined with minimum required permissions to the Event Hub** | Medium | Yes | Granting minimum necessary permissions ensures that users have just enough access to perform their tasks. This minimizes the potential impact of an attacker in the event of a compromised access policy key. |
| **Access policy keys must be protected at rest** | High | No | Encrypting sensitive data at rest reduces the risk of data loss from physical theft and helps meet regulatory compliance requirements. |
| **Access policy keys must be rotated periodically** | Medium | No | Periodic key rotation is a best security practice as it reduces the likelihood of data loss or compromise due to key theft, brute forcing, or recovery attacks. |
| **Audit logs for Event Hub entities should be reviewed periodically** | Medium | No | Regular reviews of diagnostics, activity, and audit logs help identify anomalous activity early, before a major security incident occurs. |
| **Sensitive data must be encrypted in transit** | High | No | Using HTTPS ensures server/service authentication and protects data in transit from man-in-the-middle, eavesdropping, and session-hijacking attacks. |
| **Expiry time of SAS token should be minimum required** | Medium | No | Minimizing the validity period of a SAS token reduces the window of opportunity for an attacker in the event of a compromise. |
| **Use 'Publisher' tokens to authenticate senders instead of 'Access Policy' tokens** | Medium | No | Publisher tokens provide a scalable solution for managing a large number of senders. Individual time-bound SAS tokens can be created via inheritance from a shared policy, limiting the damage from the compromise of any single token. Additionally, all publisher tokens generated by the same policy can be decommissioned by revoking the corresponding access policy. |
| **All users/identities must be granted minimum required permissions using Role Based Access Control (RBAC)** | Medium | Yes | Leveraging RBAC to grant minimum necessary permissions ensures that users have just enough access to perform their tasks, minimizing the exposure of resources in the event of a user or service account compromise. |
| **Diagnostics logs must be enabled with a retention period of at least 365 days** | Medium | Yes | Retaining logs for at least one year allows for the recreation of activity trails during investigations, which is a common requirement for various compliance standards. |

This table provides a structured overview of the security controls and their rationale, ensuring clarity and ease of understanding.