I upgraded from ansible 1.3 to ansible 1.6 and my asynchronous tasks are not
working properly when those have to be SKIPPED. (when are not skipped
everything works ok). This is my task to reproduce the error:
    - name: Create screen session to run dd on new disk (async mode)
        shell: /bin/dd if={{ ebs_device }} of=/dev/null bs=1024k
        async: 36000
        poll: 0
        tags: rundd 
        when: ebs_iops != 0
This is executed as follows (Note: ebs_iops=0)
    ansible-playbook -i cluster-oe setup.yml -s --ask-vault-pass --tags rundd
Output:
    TASK: [common | Create screen session to run dd on new disk (async mode)] *****
    skipping: [X.X.X.X]
    Traceback (most recent call last):
      File "/usr/bin/ansible-playbook", line 317, in 
        sys.exit(main(sys.argv[1:]))
      File "/usr/bin/ansible-playbook", line 257, in main
        pb.run()
      File "/usr/lib/python2.6/site-packages/ansible/playbook/__init__.py", line 291, in run
        if not self._run_play(play):
      File "/usr/lib/python2.6/site-packages/ansible/playbook/__init__.py", line 644, in _run_play
        if not self._run_task(play, task, False):
      File "/usr/lib/python2.6/site-packages/ansible/playbook/__init__.py", line 421, in _run_task
        results = self._run_task_internal(task)
      File "/usr/lib/python2.6/site-packages/ansible/playbook/__init__.py", line 385, in _run_task_internal
        self.runner_callbacks.on_async_ok(host, res, poller.runner.vars_cache[host]['ansible_job_id'])
    KeyError: 'ansible_job_id'
    TASK: [common | Create screen session to run dd on new disk (async mode)] *****
    skipping: [X.X.X.X]
    Traceback (most recent call last):
      File "/usr/bin/ansible-playbook", line 317, in 
        sys.exit(main(sys.argv[1:]))
      File "/usr/bin/ansible-playbook", line 257, in main
        pb.run()
      File "/usr/lib/python2.6/site-packages/ansible/playbook/__init__.py", line 291, in run
        if not self._run_play(play):
      File "/usr/lib/python2.6/site-packages/ansible/playbook/__init__.py", line 644, in _run_play
        if not self._run_task(play, task, False):
      File "/usr/lib/python2.6/site-packages/ansible/playbook/__init__.py", line 421, in _run_task
        results = self._run_task_internal(task)
      File "/usr/lib/python2.6/site-packages/ansible/playbook/__init__.py", line 385, in _run_task_internal
        self.runner_callbacks.on_async_ok(host, res, poller.runner.vars_cache[host]['ansible_job_id'])
    KeyError: 'ansible_job_id'
Ansible version:
    ansible --version
    ansible 1.6.1