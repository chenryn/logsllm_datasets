report 介绍....
18.2.5
18.2.4
18.2..·置Foreman.......303
18.2.2
18.1..3配置DdashBoar......287
18.1..DashBoard 安装.......285
18.1.4
本章小结.··.
自定义报告处理器·
rrdgraph图?形化报告....280
tagmail 发送邮件报告...
Puppet 信息记录方式..
本章小结··
使用 Foreman 管理
集成 DashBoard...
从 Foreman显示报告...313
安装Foreman...
HTML....
.........15
.....292
..277
区
---
## Page 11
XII
第20章
20.1MCollective 简介...
19.5本章小结·.
19.4 Hiera.-
19.PupeD......?2
19.生成依赖关系图..319
20.1.3
20.1.2
20.1.什么是MCollective....336
19.4.2Hiera 的使用...
19.4.1Hiera 的特点..
19.3.1PuppetDB功能与特性..-322
19.3.5
19.3.3
19.3.2
19.2.3
19.2.2
19.2.1
19.1.2puppet doc 的其他使用
19.3.4
MCo.llective结·....336
2MCollective 角色互换....37
PouppetDB.瓶......32
PuppetDB 配置文件详解-326
MCollective的特.....338
配置与使用PuppetDB....329
关系图说明..322
配置方法.·.
什么是关系图..
........319
.....335
20.6
20.5如何使用.MCollective......355
20.4部署 MCollective 步骤...
20.2消息中间件..
20.8
20.7
MCollective 使用 Shell
20.5..过滤器的使用..358
20.5.2
20.5.1mco基本命令的用法....355
20.4.3MCollective 安装与配置.·.348
20.4.2
20.4.1
20.3.3
20.3.2
20.3.1体系结构与配置…..340
MCollective 控制 Puppet...
20.2.3
20.2.2
20.2.1
20.1.4
执行RPC请求.....356
创建和收集证书.342
Stomp....
带来的.改变..38
MCollective 给 Puppet
部署和配置中间件..344
未来扩展.
安全模型….
ActiveMQ...
..341
..339
....360
...340
....341
.....339
---
## Page 12
置管理。
习 Puppet 的几种工作环境，我们以后能够更好地利用Puppet 实现不同环境的配
例，创建一个属于自己的配置，进而掌握基本的配置方法；最后通过第4章学
装、配置 Puppet 的讲解进一步加深对 Puppet 工作原理的理解；通过第3章的实
来了解Puppet，看看它的发展历程，重点掌握它的工作原理；通过第2章对安
这项工作非常让人振奋呢？那就让我们一起探究Puppet 的奥秘吧！
我们就可以完成所有的动作，并且能查看机器的进度与当前状态。是不是觉得
系统监控来实现运维体系的一体化、流水线化、产品化。通过简单的后台系统
维护简单的关系就能掌握一切。使用Puppet，我们可以从系统安装、配置管理、
具，它可以使系统管理员的工作变得更轻松，从而提升工作效率，并且只需要
本篇主要是为了更好地学习和使用 Puppet 而做的准备。我们通过第1章
Puppet 可谓是配置管理工具中的旗舰产品，有别于chef等其他配置管理工
准备篇
第一部分
---
## Page 13
1.1.2Puppet 起源与发展
配置的一致性。
（C/S）的方式运行，也能独立运行。客户端默认每30分钟会与服务端确认一次更新，以确保
件（在Puppet 2.7.0与 Facter 1.6.0之前是基于 GPLv2 协议授权的），它既能以客户端－服务端
的设计目标就是简化对这些资源的管理以及妥善处理资源之间的依赖关系。
可管理配置文件、用户、Cron、软件包，系统服务等，Puppet把这些统称为“资源”。Puppet
是让 Puppet 成为一个由富有表现力的语言支撑的足够强大的库。这样只需要编写短短的几行
明的语言表达系统配置，通过客户端与服务端之间的连接，维护着关系库。Puppet 的设计目标
1.1.1什么是 Puppet 
1.1Puppet的起源与发展现状
混合使用，以及配置文件的相关知识，这些都是本章将要介绍的内容。
便完全理解。Puppet 最新版本为3.0（截至 2013 年9月），不同版本之间新的特性及是否可以
的组织结构并掌握 Puppet 的工作原理，这是本章的重点，希望读者多次阅读这部分内容，以
将 Puppet 和当前主流开源配置管理工具进行对比，阐述为什么要使用 Puppet。了解 Puppet
代码的自动化应用程序即可实现设计目标。同时Puppet 是开放的，允许添加任何新的功能。
Puppet 是基于 Ruby 语言（http://www.ruby-lang.org/）并使用 Apache 协议授权的开源软
官方的定义是这样的：Puppet 是一个开源的新一代的集中化配置管理工具，它由自己所声
Puppet 主要由Luke Kanies 和他的公司 Puppet Labs 开发，于2005 年正式面世。Luke
本章首先介绍什么是Puppet，为什么它具有这么优秀的特征，以及它的发展历程。随后
认识 Puppet
第1章
ONS
---
## Page 14
表1-1所示。
1.1.3版本语言特征
提示
遇到不可预知的问题。
2.6 或2.7的用户，建设逐步升级，且先升级 Master，然后再升级Agent，平滑过渡，以避免
户，建议升级成最新版。对于新用户，建议直接安装 Puppet 3.0版本。对于正在使用 Puppet
我们掌握 Puppet 的信心。
伴随着版本的更新官方文档也在快速更新当中，这为我们学习提供了很大的便捷，也增强了
格的3 段版本号，最左边为大版本号（功能向后兼容)，中间为新功能变化，最右为修复bug。
传输层，除此之外没有其他大的改动。因此我们可以理解为，只是命令方式的变更。
功能上的改进，为此 Puppet Labs 改变了版本命令方式，增加了新的特性并取消了XML-RPC
装的 Puppet 还是 0.25.x版本。有人会问 2.6 就比 0.25.x性能好吗？其实不然，2.6主要是在
常振奋人心。由此可见，Puppet Labs 的前景不可估量。
发行版操作系统的支持。特别是在 2012 年5月，Puppet Labs 率先与OpenStack 整合，这非
3.0 版本对 Ruby1.9 提供了完美支持、Master在 CPU 消耗上提升了6 倍的性能、提供了更多
迅速，还要极大地提升性能。我们可以看到2.7较之前版本在编译性能上提升了60% 以上，
Mcollective 软件的收购，版本更新也更加迅速，但 Puppet Labs 的目标不只是让版本发行更
2011 年 11月 Puppet Labs 共融资 1600万美元，加上商业软件 Puppet Enterprise 的发布及对
当做配置工具，还把它当做“拯救世界”的工具。特别是在近几年，其发展势头迅猛。截至
语言。
为动作。在Luke Kanies 的努力下终于有了今天这款出色的 Puppet 产品。当然也感谢 Ruby
现的关键是如何使每个资源成为一个合集，每个资源又有自己的行为，并且产生相应的行
时的配置管理软件不满意后，他便想到自己开发一套工具来管理资源。他认为这套工具实
Kanies 于1997 年就涉足 UNIX 和系统管理，由于平常需要进行大量的开发工作，在试用当
运算符
虽然目前 Puppet 在短短 2 年内由 2.6 发展至 3.0，从 3.0.0 版本开始，Puppet 使用的是严
Puppet各版本之间的语言也存在着差异，当然，版本越高，支持的特征越多，具体如
更多 Puppet 版本信息可参考：http://projects.puppetlabs.com/projects//wiki/Release_Notes。
Puppet 从 0.25.x直接跳到大版本 2.6且逐渐不再维护 0.25.x，在 2010 年时通过 Yum安
语法
由于 Puppet 0.2x 支持的特性非常少，不建议再安装使用它。对于正在使用此版本的用
支持
0.24.x
表1-1Puppet 各版本语言特征差异对比
支持
0.25.x
支持
2.6.x
支持
2.7.x
第1章认识Puppet3
支持
3.x
至
---
## Page 15
4·第一部分准备篇
1.1.5
令完全丢弃。具体差异对比如表1-2 所示。
1.1.4
Unless 语法
In 语法
运行阶段
类的参数化
哈希
链接资源
条件表达式
正则表达式
变量表达式
节点正则
C注释风格
类命名
追加变量
类的继承
多资源的关系
Puppet 命令在 2.6 版本发布时进行了变更，且在发布 3.0版本时将 2.6 版本之前的旧命
口增强操作系统与平台支持：对 Ruby1.9 的完美支持，对操作系统 Windows、Solaris 包
口性能提升：目录编译采用 JSON 作为目录缓存。
目前 Puppet 最新版为3.0，其中增添了许多新特性。
语法
和服务的更多支持，Yumrepo 对 SSL 的支持。
Puppet 3.0 新特性
命令差异
Puppetdoc
Filebucket
Puppetqd
Puppetrun
Ralsh
Puppetca
Puppetd
Puppetmasterd
2.6版本之前
不支持
不支持
不支持
不支持
不支持
不支持
不支持
不支持
不支持
不支持
支持
支持
支持
支持
支持
0.24.x
表 1-2 
不支持
不支持
不支持
不支持
不支持
不支持
不支持
支持
支持
支持
支持
支持
支持
支持
支持
0.25.x
不同版本 Puppet 的命令差异对比 
不支持
支持 
支持
支持
支持
支持
支持
支持
支持
支持
支持
支持
支持
支持
支持
2.6.x
 Puppet describe
Puppet doc
Puppet filebucket
 Puppet queue
Puppet kick
 Puppet resource
 Puppet cert
Puppet apply
Puppet master
2.6版本之后
不支持
支持
支持
支持
支持
支持
支持
支持
支持
支持
支持
支持
支持
支持
支持
2.7.x
支持
支持
支持
支持
支持
支持
支持
支持
支持
支持
支持
支持
支持
支持
支持
3.x
（续）
---
## Page 16
方面，Puppet 更胜于 Chef。详细对比如表 1-3 所示。
开发、平台、实例等几个角度出发，帮助读者从中发现 Puppet 的优势。在用户与第三方支持