9/12
97.0%
38.9%
66.7%
Web Browser
35
1/34
100%
Word Processor
Word Processor
Image Editor
Image Viewer
Document
Reader
Windows Shell
Media Player
143
10
66
5
751
298
165
18/110
1/7
2/8
0/5
120/550
32/91
21/41
100%
0.0%
50.0%
N/A
95.8%
84.4%
90.5%
N/A
1,871
255/1,005
88.6%
Table II: Applications and their clusters Identiﬁed by Ocasta.
In column #Clusters, we show two numbers: the number
of clusters that have more than one conﬁguration setting,
followed by the number of all clusters.
Second, we evaluate the effectiveness and performance of
Ocasta, and the beneﬁts of using clustering at recovering
from conﬁguration errors. Finaly, we perform a user study
to evaluate how easy it is for a user to generate a trial,
identify the screenshot showing a ﬁxed application, and use
Ocasta in general. All Windows experiments were performed
on an Intel Core Duo Dual-Core laptop with 2 GB of
memory running Windows 7 and all Linux experiments were
performed on a Intel Core 2 Quad-Core desktop with 4 GB
of memory running Debian 6. We used 11 popular desktop
applications in our evaluations, as listed in Table II.
A. Clustering Analysis
To evaluate the accuracy of Ocasta’s clustering algorithm,
we manually examined all 255 clusters, each of which
contains more than one conﬁguration setting, across all
applications used in our evaluations. First, we try to conﬁrm
whether conﬁguration settings are correlated by examining
their names and values. We identify relations of conﬁgura-
tion settings from their hierarchical names [5] and verify
their relations from their values. Second, we individually
change conﬁguration settings in a cluster and check whether
the corresponding application runs properly after the change.
We conservatively consider a cluster as correctly identiﬁed if
and only if there is a dependency relationship among every
conﬁguration setting of the cluster.
As a result, we deﬁne an oversized cluster as a cluster
that contains one or more extra conﬁguration settings that
are not related with the other conﬁguration settings in the
cluster, and an undersized cluster as a cluster that does not
contain one or more conﬁguration settings that are related
with the conﬁguration settings in the cluster.
We show the accuracy of Ocasta’s clustering algorithm
in Table II. For each application, we compute the ratio of
correctly identiﬁed clusters with more than one setting over
484
Authorized licensed use limited to: Tsinghua University. Downloaded on March 19,2021 at 08:26:43 UTC from IEEE Xplore.  Restrictions apply. 
Case
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
Trace
Windows 7
Windows 7
Windows 7
Windows Vista
Application
MS Outlook
MS Word
Internet Explorer
Explorer
Windows XP
Windows XP
Windows XP
Linux-1
Linux-1
Linux-1
Linux-1
Linux-1
Linux-2
Linux-2
Linux-3
Linux-4
Media
Windows
Player
MS Paint
Explorer
Evolution Mail
Evolution Mail
Evolution Mail
Image Viewer
Text Editor
Chrome Browser
Chrome Browser
Acrobat Reader
Acrobat Reader
Logger
Registry
Registry
Registry
Registry
Registry
Registry
Registry
GConf
GConf
GConf
GConf
GConf
File
File
File
File
Description
User is unable to use Navigation Panel.
User loses the list of recently accessed documents.
Dialog to disable add-ons always pops up.
“Open with” menu does not show installed applications that can
open .ﬂv ﬁle.
Caption is not shown while playing video.
Text tool bar does not pop up automatically when entering text.
Image ﬁles are always opened in a maximized window.
Evolution Mail starts in ofﬂine mode unexpectedly.
Evolution Mail does not mark read mail automatically.
Evolution Mail does not start a reply at the top of an e-mail.
User is unable to print image ﬁles.
User is unable to save any document.
Bookmark bar is missing.
Home button is missing from the tool bar.
Menu bar disappears for certain PDF document.
Find box is missing from the tool bar.
Table III: Real conﬁguration errors used in our evaluation.
the total number of clusters with more than one setting.
The result illustrates that Ocasta has a high accuracy of
identifying clusters with more than one setting, 72.3% on
average (mean accuracy among all applications) and 88.6%
overall (ratio of the total number of correctly identiﬁed
clusters to the total number of clusters across all applica-
tions). Except for four applications (Evolution Mail, Internet
Explorer, Text Editor, and MS Paint) that have a very small
number of clusters (smaller than 20) and a small number of
conﬁguration settings, Ocasta accurately identiﬁed clusters
with more than one setting in 94% of the cases. We elaborate
on our ﬁndings below.
Oversized Clusters: The majority of the incorrectly
identiﬁed clusters are oversized clusters, which are caused
by two major sources. First, Ocasta is limited to using a
minimum of one second as the sliding time window. This
is because the trace collection infrastructure only records
the update time of conﬁguration settings to the precision
of the nearest second. Although the 1-second sliding time
window works well for most applications, one second is long
enough for an application to update more than one group of
dependent conﬁguration settings. For example, one oversized
cluster of Evolution Mail contains six groups of dependent
conﬁguration settings. Second, some conﬁguration settings
may be updated simultaneously as the result of software up-
dates, in which case even independent conﬁguration settings
could be updated together.
Oversized clusters can cause unnecessary conﬁguration
settings to be changed when attempting to ﬁx conﬁguration
errors. As a result, we want to minimize the number of
oversized clusters and the number of extra conﬁguration
settings in oversized clusters. To achieve that, we examined
all 17 oversized clusters of the four applications with the
highest ratio of oversized clusters. We found that 11 of
the oversized clusters are composed of several groups of
dependent conﬁguration settings and that the remaining 6
of them have one extra conﬁguration setting in them. This
indicates that most of the oversized clusters are probably
caused by using a 1-second sliding time window and could
potentially have been eliminated if our trace collection
infrastructure had recorded key modiﬁcation times at a ﬁner
granularity.
Undersized Clusters: Ocasta’s clustering algorithm can
also cause undersized clusters if dependent conﬁguration
settings are not always updated together. Undersized clus-
ters can cause failures in ﬁxing conﬁguration errors, since
dependent conﬁguration settings are not changed together,
or leave conﬁguration settings in an inconsistent state that
can cause application misbehavior. In the next section, we
describe how out of 16 injected errors, Ocasta is able to
ﬁx all but 2 using the default clustering threshold of 2 and
window size of 1 second. The 2 unﬁxed errors are a result
of undersized clusters, which we were able to correct by
tuning of the clustering threshold and window size. We did
not observe any application crashes or misbehavior during
the hundreds of clusters that were changed during the trials
executed by Ocasta to ﬁx these errors.
B. Conﬁguration repair
The traces we collected contain realistic application usage,
interacting with
but because they are collected without
the users of the applications, we are unable to conﬁrm
if conﬁguration errors occurred during trace creation. In
addition, we want to be able to precisely control the time
at which the conﬁguration error occurs in each trace. Thus,
we simulate conﬁguration errors by injecting a write into the
trace at the point in time at which we want the error to occur,
that changes the offending setting to the erroneous value.
If the conﬁguration error is caused by presence or absence
of the offending setting, we insert or delete the setting in
the trace. To simulate the recording phase of Ocasta, we
populate the TTKV of the test machine with one of the
485
Authorized licensed use limited to: Tsinghua University. Downloaded on March 19,2021 at 08:26:43 UTC from IEEE Xplore.  Restrictions apply. 
Case Cl.Size Trials Time(mm:ss)
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
0:30/6:00
0:34/1:01
4:16/5:24
3:02/8:57
5:36/28:40
3:04/3:30
3:30/24:11
1:46/2:11
6:52/8:32
5:28/6:31
0:24/0:56
0:20/0:44
0:36/3:40
0:30/2:58
1:05/8:41
0:28/57:19
15
2
14
33
60
8
134
7
9
12
2
2
7
7
17
157
2
8
2
3
4
8
2
2
2
2
1
1
1
1
1
1
Screens Ocasta NoClust
5
1
11
1
1
1
2
2
9
2
1
1
2
4
2
4
Y
N
Y
N
Y
N
N
Y
N
Y
Y
Y
Y
Y
Y