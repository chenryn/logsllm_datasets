l 如果vlink邻居状态为Full，找到显示信息中interface项所示IP地址，从打出告警的
交换机ping该地址。
– 不能ping通，则=>4。
– 可以ping通，则=>3。
步骤3 查看本交换机以及邻居交换机是否存在告警43.9 OSPF_1.3.6.1.2.1.14.16.2.9
ospfVirtIfRxBadPacket，如果存在，则按照该告警的处理步骤处理，否则=>4。
文档版本 06 (2017-09-12) 华为专有和保密信息 661
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 43 OSPF
步骤4 请收集该设备的告警信息、日志信息和配置信息，并联系技术支持人员。
步骤5 结束。
----结束
43.12 OSPF_1.3.6.1.2.1.14.16.2.12 ospfOriginateLsa
Trap Buffer 信息解释
An LSA is generated. (RouterId=[RouterId], LsdbAreaId=[LsdbAreaId],
LsdbType=[LsdbType], LsdbLsid=[LsdbLsid], LsdbRouterId=[LsdbRouterId])
设备产生的新LSA，可能是由于接口发生Up、Down或OSPF邻居状态变迁，或设备的
角色发生变化(例如引入了路由等)。
Trap 属性
Trap属性 描述
Alarm or Event Event
Trap Severity Informational
Mnemonic Code ospfOriginateLsa
Trap OID 1.3.6.1.2.1.14.16.2.12
Alarm ID 该Trap是事件Trap，不涉及告警ID。
Alarm Type 该Trap是事件Trap，不涉及告警类型。
Raise or Clear 该Trap是事件Trap，不涉及告警产生或恢复。
Match trap 该Trap是事件Trap，不涉及配对Trap。
Trap Buffer 信息参数
参数名称 参数含义
RouterId 路由器标识。
LsdbAreaId LSDB区域标识。
LsdbType LSDB连接状态类型。
LsdbLsid LSDB连接状态标识。
LsdbRouterId LSDB路由器标识。
文档版本 06 (2017-09-12) 华为专有和保密信息 662
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 43 OSPF
VB 信息参数
VB OID VB Name VB Index
1.3.6.1.2.1.14.1.1 ospfRouterId N/A
1.3.6.1.2.1.14.4.1.1 ospfLsdbAreaId ospfLsdbAreaId;
ospfLsdbType;
ospfLsdbLsid;
ospfLsdbRouterId;
1.3.6.1.2.1.14.4.1.2 ospfLsdbType ospfLsdbAreaId;
ospfLsdbType;
ospfLsdbLsid;
ospfLsdbRouterId;
1.3.6.1.2.1.14.4.1.3 ospfLsdbLsid ospfLsdbAreaId;
ospfLsdbType;
ospfLsdbLsid;
ospfLsdbRouterId;
1.3.6.1.2.1.14.4.1.4 ospfLsdbRouterId ospfLsdbAreaId;
ospfLsdbType;
ospfLsdbLsid;
ospfLsdbRouterId;
对系统的影响
如果同时存在告警OSPF_1.3.6.1.2.1.14.16.2.2 ospfNbrStateChange、
OSPF_1.3.6.1.2.1.14.16.2.16 ospfIfStateChange，则可能对业务有影响。
可能原因
原因1：接口Up、Down。
原因2：邻居状态变化。
原因3：OSPF引入的路由发生变化。
处理步骤
步骤1 查看是否存在告警OSPF_1.3.6.1.2.1.14.16.2.2 ospfNbrStateChange、
OSPF_1.3.6.1.2.1.14.16.2.16 ospfIfStateChange。
l 如果存在，则请按照告警的定位过程处理。
l 如果不存在，则请执行步骤2。
步骤2 执行display ip routing-table查看路由表信息是否有变化。
l 如果没有变化，则请执行步骤3。
文档版本 06 (2017-09-12) 华为专有和保密信息 663
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 43 OSPF
l 如果有变化，则继续检查路由变化的原因，请执行步骤3。
步骤3 请收集该设备的告警信息、日志信息和配置信息，并联系技术支持人员。
步骤4 结束。
----结束
43.13 OSPF_1.3.6.1.2.1.14.16.2.13 ospfMaxAgeLsa
Trap Buffer 信息解释
An LSA is aged. (RouterId=[RouterId], LsdbAreaId=[LsdbAreaId], LsdbType=[LsdbType],
LsdbLsid=[LsdbLsid], LsdbRouterId=[LsdbRouterId])
设备LSDB中的LSA已经达到最大老化时间，可能是由于OSPF引入的路由被删除或
OSPF接口状态变为Down。
Trap 属性
Trap属性 描述
Alarm or Event Event
Trap Severity Informational
Mnemonic Code ospfMaxAgeLsa
Trap OID 1.3.6.1.2.1.14.16.2.13
Alarm ID 该Trap是事件Trap，不涉及告警ID。
Alarm Type 该Trap是事件Trap，不涉及告警类型。
Raise or Clear 该Trap是事件Trap，不涉及告警产生或恢复。
Match trap 该Trap是事件Trap，不涉及配对Trap。
Trap Buffer 信息参数
参数名称 参数含义
RouterId 路由器标识。
LsdbAreaId LSDB区域标识。
LsdbType LSDB连接状态类型。
LsdbLsid LSDB连接状态标识。
LsdbRouterId LSDB路由器标识。
文档版本 06 (2017-09-12) 华为专有和保密信息 664
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 43 OSPF
VB 信息参数
VB OID VB Name VB Index
1.3.6.1.2.1.14.1.1 ospfRouterId N/A
1.3.6.1.2.1.14.4.1.1 ospfLsdbAreaId ospfLsdbAreaId;
ospfLsdbType;
ospfLsdbLsid;
ospfLsdbRouterId;
1.3.6.1.2.1.14.4.1.2 ospfLsdbType ospfLsdbAreaId;
ospfLsdbType;
ospfLsdbLsid;
ospfLsdbRouterId;
1.3.6.1.2.1.14.4.1.3 ospfLsdbLsid ospfLsdbAreaId;
ospfLsdbType;
ospfLsdbLsid;
ospfLsdbRouterId;
1.3.6.1.2.1.14.4.1.4 ospfLsdbRouterId ospfLsdbAreaId;
ospfLsdbType;
ospfLsdbLsid;
ospfLsdbRouterId;
对系统的影响
可能会影响路由在正确转发，如果lsdb-ls-id所在网段属于业务路由网段则会影响业务。
可能原因
原因1：接口状态变化。
原因2：邻居状态变化。
原因3：OSPF引入的路由发生变化。
处理步骤
步骤1 查看告警中LSA的LsdbRouterId。
l 如果是本端产生的告警，则请执行步骤2。
l 如果不是本端产生的告警，则请执行步骤4。
步骤2 查看是否存在告警OSPF_1.3.6.1.2.1.14.16.2.2 ospfNbrStateChange、
OSPF_1.3.6.1.2.1.14.16.2.16 ospfIfStateChange。
l 如果存在，则请按照告警定位过程处理。
l 如果不存在，则请执行步骤3。
文档版本 06 (2017-09-12) 华为专有和保密信息 665
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 43 OSPF
步骤3 请联系技术支持人员。
步骤4 结束。
----结束
43.14 OSPF_1.3.6.1.2.1.14.16.2.16 ospfIfStateChange
Trap Buffer 信息解释
The status of the non-virtual interface changes. (RouterId=[RouterId],
IfIpAddress=[IfIpAddress], AddressLessIf=[AddressLessIf], IfState=[IfState],
ProcessId=[ProcessId], AreaId=[AreaId], IfnetIndex=[IfnetIndex],
LocalIfIpAddress=[LocalIfIpAddress], IfName=[IfName], InstanceName=[InstanceName])
OSPF非虚连接接口状态发生变化，可能是由于物理接口状态变为Down。
Trap 属性
Trap属性 描述
Alarm or Event Event
Trap Severity Informational
Mnemonic Code ospfIfStateChange
Trap OID 1.3.6.1.2.1.14.16.2.16
Alarm ID 该Trap是事件Trap，不涉及告警ID。
Alarm Type 该Trap是事件Trap，不涉及告警类型。
Raise or Clear 该Trap是事件Trap，不涉及告警产生或恢复。
Match trap 该Trap是事件Trap，不涉及配对Trap。
Trap Buffer 信息参数
参数名称 参数含义
RouterId 路由器标识。
IfIpAddress 接口地址。
AddressLessIf 接口索引。
IfState 接口状态。
ProcessId 进程标识。
AreaId 区域标识。
IfnetIndex 实接口索引。
文档版本 06 (2017-09-12) 华为专有和保密信息 666
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 43 OSPF
参数名称 参数含义
LocalIfIpAddress 本端接口地址。
IfName 实接口名称。
InstanceName 实例名称。
VB 信息参数
VB OID VB Name VB Index
1.3.6.1.2.1.14.1.1 ospfRouterId N/A
1.3.6.1.2.1.14.7.1.1 ospfIfIpAddress ospfIfIpAddress;
ospfAddressLessIf;
1.3.6.1.2.1.14.7.1.2 ospfAddressLessIf ospfIfIpAddress;
ospfAddressLessIf;
1.3.6.1.2.1.14.7.1.12 ospfIfState ospfIfIpAddress;
ospfAddressLessIf;
对系统的影响
可能会对邻居状态有影响，如果是接口状态下降（例如接口变为Down状态）将会导致
邻居关系中断。
可能原因
原因1：接口状态变化。
原因2：OSPF邻居正在建立。
处理步骤
步骤1 执行display ospf interface命令查看当前接口状态是否为Up。
l 如果是，则请执行步骤3。
l 如果不是，则请执行步骤2。
步骤2 请联系技术支持人员。
步骤3 结束。
----结束
43.15 OSPF_1.3.6.1.2.1.14.16.2.17
ospfNssaTranslatorStatusChange
文档版本 06 (2017-09-12) 华为专有和保密信息 667
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 43 OSPF
Trap Buffer 信息解释
The status of the NSSA translator changes. (ProcessId=[ProcessId], RouterId=[RouterId],
AreaId=[AreaId], NSSATranslatorState=[NSSATranslatorState])
NSSA转换角色改变，可能是由于该设备在Enabled/Elected/Disabled这三个状态间变
化。
Trap 属性
Trap属性 描述
Alarm or Event Event
Trap Severity Warning
Mnemonic Code ospfNssaTranslatorStatusChange
Trap OID 1.3.6.1.2.1.14.16.2.17
Alarm ID 该Trap是事件Trap，不涉及告警ID。
Alarm Type 该Trap是事件Trap，不涉及告警类型。
Raise or Clear 该Trap是事件Trap，不涉及告警产生或恢复。
Match trap 该Trap是事件Trap，不涉及配对Trap。
Trap Buffer 信息参数
参数名称 参数含义
ProcessId 进程ID。
RouterId 路由器标识。
AreaId 区域标识。
NSSATranslatorState 新的NSSA转换状态。
l 1：ENABLED
l 2：ELECTED
l 3：DISABLED
VB 信息参数
VB OID VB Name VB Index
1.3.6.1.2.1.14.1.1 ospfRouterId N/A
1.3.6.1.2.1.14.2.1.1 ospfAreaId ospfAreaId;
文档版本 06 (2017-09-12) 华为专有和保密信息 668
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 43 OSPF
VB OID VB Name VB Index
1.3.6.1.2.1.14.2.1.12 ospfAreaNssaTranslatorStat ospfAreaId;
e
对系统的影响
ABR转换角色的更替，需要flush已从7类LSA转化来的5类LSA，或者新的转换者正在
进行7类LSA到5类LSA的转化，可能会导致ASE路由的短时震荡。此外，非人工干预
的，原因不明的转换角色的更替，是由于骨干区和NSSA区域内拓扑变化引起的。
可能原因
原因1：在该NSSA区域的某个ABR上人工配置或取消了nssa命令的translator-always选
项。
原因2：在该NSSA区域的某个ABR上配置了新的Router ID，并已生效。
原因3：该NSSA区域有新加入，或有退出。
原因4：骨干区或该NSSA区域内某个重启OSPF协议或进行主备倒换，导致区域内拓扑
震荡。
原因5：人工配置命令或修改参数，引起骨干区或该NSSA区域拓扑变化。比如配置或
取消nssa命令的no-summary、no-import-route参数，会导致本与骨干区和NSSA区邻居
重建。
原因6：本变为ABR或者由ABR变为其他角色。
原因7：骨干区或该NSSA区拓扑改变，导致本不能从骨干区或NSSA区路由到另一个
Router ID更大或配置了translator-always选项的ABR。
处理步骤
步骤1 如果本人工配置或取消了nssa translator-always命令，请执行display ospf brief查看本
NSSA转换角色是否正确。
l 如果配置了nssa translator-always，执行display ospf brief查看NSSA Translator状
态是否为always，如果是，则请执行步骤8；如果不是，则请执行步骤7。
l 如果是取消了nssa translator-always配置，执行display ospf brief查看NSSA
Translator状态，如果是Disabled，则请执行步骤2；如果是Elected，则请执行步骤
8。
步骤2 可能是在该NSSA区域的某个ABR上配置了nssa translator-always，可以执行display