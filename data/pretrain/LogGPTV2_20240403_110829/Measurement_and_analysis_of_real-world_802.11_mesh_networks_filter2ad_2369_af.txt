Figure 15 shows the CDF of the fraction of hidden triples to rele-
vant triples for a threshold of 10% (our results don’t change signiﬁ-
cantly as the threshold varies). For each of our 802.11b/g networks,
we used the probe data to determine the number of relevant triples
at each bit rate, and then the proportion of those that were hidden
triples. The CDF is taken over all networks; for example, roughly
13% of networks had fewer than 50% hidden triples at 1Mbit/s.
For the most part, as the bit rate increases, the fraction of hidden
triples to relevant triples also increases. One exception is the results
for 6Mbit/s and 11Mbit/s; there are almost always fewer hidden
133F
D
C
 1
 0.8
 0.6
 0.4
 0.2
 0
 0
1 Mbit/s
6 Mbit/s
11 Mbit/s
12 Mbit/s
24 Mbit/s
36 Mbit/s
48 Mbit/s
 0.2
 0.4
 0.6
 0.8
 1
Fraction of Hidden Triples
Figure 16: Hidden triples at a threshold of 10%, taking into
account the capture effect with a threshold of 10dB.
e
g
n
a
R
n
i
e
g
n
a
h
C
 1.2
 1
 0.8
 0.6
 0.4
 0.2
 0
1
6
12
11
24
Bit Rate (Mbit/s)
36
48
Figure 17: Change in range of APs at different bit rates. The
change is calculated with respect to the range at 1Mbit/s, thus
by deﬁnition the change in range at 1Mbit/s is 1.
triples at 11Mbit/s than at 6Mbit/s. We believe that this exception
is because the 11Mbit/s rate uses DSSS rather than OFDM, which
is known to have better reception in 802.11 at lower SNR values.
(1Mbit/s also uses spread spectrum; all other bit rates use OFDM).
6.1.1 The Capture Effect
In the previous section, we gave a rough upper bound on the
number of hidden terminals that could be present in a network.
Here, we estimate how many of those could potentially be saved
by the capture effect. The capture effect [36] is the property of
802.11 radios where a strong signal can be decoded even when a
weak signal is received at the same time. In the context of our hid-
den terminal example, if AP1 and AP2 both sent to AP3 at the same
time, but AP1 had a much stronger signal, it is possible that AP1’s
communication would not be disrupted by the signal from AP2.
Whether the stronger of the two signals is captured depends on
the difference in their SNRs; if this difference is below a certain
threshold, the stronger signal will not be captured. This threshold
can vary. Ware et al. ﬁnd that under certain conditions a difference
of 5dB is sufﬁcient [36], while others report larger values of over
20dB [26]. In Figure 16, using a relatively conservative estimate
of 10dB, we again estimate the number of hidden triples at each bit
rate (as in Figure 15).
Here, we see that roughly 7% of networks had fewer than 50%
hidden triples at 1Mbit/s, and again, we see the percentage of hid-
den triples increases with the bit rate, with the exception of 6Mbit/s
and 11Mbit/s.
6.1.2 Discussion
Our results show that hidden triples are quite common; the me-
dian value over all the networks even at the lowest 1Mbit/s bit rate
is about 7% of triples when there is only a 10% chance of suc-
cessfully receiving a packet and we consider the capture effect, and
13% of hidden triples when we do not. However, these percent-
ages do not necessarily translate into the percentage of APs in a
network that are involved in hidden triples (i.e., 13% of relevant
triples being hidden triples does not mean that 13% of the APs in
the network are involved in hidden triples). In fact, for each bit rate,
when considering the capture effect, we ﬁnd that a median value of
between 65% and 81% of APs are involved in a hidden triple in any
given network, with between 46% and 63% of APs acting as AP1
or AP2 at some point (i.e., sending data in a hidden triple). When
not considering the capture effect, between 81% and 90% of APs
are involved in a hidden triple, with between 62% and 75% of APs
acting as AP1 or AP2.
We also note that this result is an upper bound on the percentage
of hidden terminals that could occur in these networks, as a hid-
den triple may not always result in a hidden terminal. Of course,
it might be possible to eliminate hidden terminal occurrences alto-
gether by using carrier sensing parameters that are conservative, but
that would reduce transmission opportunities. We note that a 10%
chance of receiving packets at 1Mbit/s is actually symptomatic of
a very low SNR; frame preambles are sent at this bit rate, which
means that in these cases the preamble isn’t being detected 90% of
the time.
As such, this result suggests to us that hidden terminals in real-
world 802.11b/g mesh networks with static APs using current MAC
protocols probably occur in around 7% of triples or more, and in-
volve at least 65% of APs. These values are higher than those as-
sumed by [17], and in some networks, we even see values higher
than those reported by [11]. This knowledge is helpful for systems
like ZigZag [17], which require an accurate model of hidden termi-
nals in a network for their analysis, and also for estimating the loss
in throughput that could be incurred using a perfect bit rate adapta-
tion scheme. The caveat is that, since our data is for static APs, it is
possible that clients experience hidden terminals at higher or lower
rates.
6.2 Range
People colloquially refer to the “range” of radio communication,
but this is an ill-formed notion because receptions are probabilistic
and depend on the bit rate. We formally deﬁne and estimate this
notion as follows: the range of a network at a particular bit rate b
is the number of node pairs that can hear each other at that bit rate.
Because our networks differ in size (in terms of number of APs),
comparing the absolute range across networks is not interesting.
Instead, we measure the change in range of a network. To do this,
we deﬁne R to be the range of the network at a bit rate of 1Mbit/s.
For every other bit rate, we look at how the range differs from R by
plotting the ratio of the range at bit rate b to R. (By deﬁnition, the
change in range for 1Mbit/s is 1.)
This result is plotted in Figure 17. The error bars represent the
standard deviation across all networks. Two important points stand
out. First, as expected, the mean change in range reduces as the
bit rate increases in a steady way. This property has been noted
anecdotally before, but the way in which it drops has not been
well-understood. Second, there is a tremendous variation in the
134drop-off, suggesting that one cannot always conclude that higher
bit rates have poorer reception properties than lower ones under
similar conditions. Indeed, we ﬁnd that roughly 26% of networks
experience at least one pair of bit rates b1 < b2 where the range
at b2 is higher than that at b1. The majority of these cases (73%)
occur with bit rates of 6Mbit/s and 11Mbit/s, again perhaps a result
of 11Mbit/s using DSSS instead of OFDM.
6.3 Impact of Environment
Figures 15 and 16 indicate that not all networks have similar
proportions of hidden terminals; if they did, we would see much
steeper curves in the CDFs. Here we brieﬂy examine the impact
of the environment—indoor or outdoor—on the number of hidden
triples, as well as the range.
We have found that outdoor networks, not surprisingly, have
a larger range than indoor networks (because the absolute range
depends on the size of the network, we measured the quantity
range/size2, where size is the number of APs in the network.) In-
door networks also tend to see a higher percentage of hidden triples
than outdoor networks, most likely due to their density (indoor net-
works are more likely to have nodes closer to each other). In indoor
networks (most of our data set), when taking into account the cap-
ture effect, we see a median of about 7% hidden triples at a 10%
threshold, at 1Mbit/s. When not considering the capture effect, we
see a median of 14%. However, when restricting ourselves to only
outdoor networks, these percentages drop to less than 1% and 2%,
respectively.
7. CONCLUSION
This paper analyzed data collected from over 1407 access points
in 110 commercially deployed Meraki wireless mesh networks,
constituting perhaps the largest published study of real-world
802.11 networks to date. We found that the SNR is not a sufﬁ-
cient determinant of the optimal bit rate within a same network, but
on a given link with static nodes (APs), the SNR can be a good in-
dicator with sufﬁcient training. We found that an ideal opportunis-
tic routing protocol does not reduce the number of transmissions
on the majority of paths as compared to traditional unicast rout-
ing. We also found that “hidden triple” situations, where a triple of
nodes A, B,C have the property that AB and BC can communicate
with each other, but AC cannot are more common than suggested
in previous work (a median of 13% of all triples in our results), and
increase in proportion as the bit rate increases.
These ﬁndings, and others in the paper, shed light on three crit-
ical areas that have seen a great deal of activity in recent years:
bit rate adaptation, mesh network routing, and MAC protocols to
overcome interference. Bit rate adaptation and mesh routing both
signiﬁcantly affect throughput, while interference from hidden ter-
minals can be detrimental to even an ideal bit rate adaptation algo-
rithm. This paper provided more conclusive answers to questions
in all of these areas, using a data set that is larger in scale and di-
versity than any other of which we are aware.
8. ACKNOWLEDGMENTS
We are indebted to Cliff Frey, John Bicket, and Sanjit Biswas at
Meraki Networks for their generous help with the data collection
and for several discussions. We thank Mythili Vutukuru, Lenin
Ravindranath, and the anonymous reviewers for their insightful
comments. This work was supported by the National Science Foun-
dation under grant CNS-0721702 and in part by Foxconn Corpora-
tion.
9. REFERENCES
[1] M. Afanasyev and A. Snoeren. The Importance of Being
Overheard: Throughput Gains in Wireless Mesh Networks.
In Internet Measurement Conference, 2009.
[2] A. Balachandran, G. M. Voelker, P. Bahl, and P. V. Rangan.
Characterizing User Behavior and Network Performance in a
Public Wireless LAN. In ACM SIGMETRICS, 2002.
[3] K. Balachandran, S. R. Kadaba, and S. Nanda. Channel
Quality Estimation and Rate Adaptation for Cellular Mobile
Radio. IEEE Journal on Selected Areas in Communications,
17(7), 1999.
[4] J. Bicket. Bit-rate Selection in Wireless Networks. Master’s
thesis, Massachusetts Institute of Technology, February
2005.
[5] J. Bicket. personal communication, 2009.
[6] J. Bicket, D. Aguayo, S. Biswas, and R. Morris. Architecture
and Evaluation of an Unplanned 802.11b Mesh Network. In
MobiCom, 2005.
[7] S. Biswas and R. Morris. ExOR: Opportunistic Multi-hop
Routing for Wireless Networks. ACM SIGCOMM, 2005.
[8] J. Camp and E. Knightly. Modulation Rate Adaptation in
Urban and Vehicular Environments: Cross-layer
Implementation and Experimental Evaluation. In MobiCom,
2008.
[9] S. Chachulski, M. Jennings, S. Katti, and D. Katabi. Trading
Structure for Randomness in Wireless Opportunistic
Routing. In ACM SIGCOMM, 2007.
[10] C. Chen, E. Seo, H. Luo, and N. H. Vaidya. Rate-adaptive
Framing for Interfered Wireless Networks. In IEEE
INFOCOM, 2007.
[11] Y. Cheng, J. Bellardo, P. Benkö, A. C. Snoeren, G. M.
Voelker, and S. Savage. Jigsaw: Solving the Puzzle of
Enterprise 802.11 Analysis. In ACM SIGCOMM, 2006.
[12] D. S. J. De Couto, D. Aguayo, J. Bicket, and R. Morris. A
High-throughput Path Metric for Multi-hop Wireless
Routing. In MobiCom, 2003.
[13] J. del Prado Pavon and S. Choi. Link Adaptation Strategy for
IEEE 802.11 WLAN via Received Signal Strength
Measurement. In IEEE International Conference on
Communications, 2003.
[14] D. Duchamp and N. F. Reynolds. Measured Performance of
a Wireless LAN. In IEEE Conference on Local Computer
Networks, 1992.
[15] D. Eckhardt and P. Steenkiste. Measurement and Analysis of
the Error Characteristics of an In-Building Wireless
Network. In ACM SIGCOMM, 1996.
[16] D. L. Goeckel. Adaptive Coding for Time-Varying Channels
Using Outdated Fading Estimates. IEEE Transactions on
Communications, 47(6), 1999.
[17] S. Gollakota and D. Katabi. Zigzag Decoding: Combating
Hidden Terminals in Wireless Networks. In ACM
SIGCOMM, 2008.
[18] I. Haratcherev, K. Langendoen, R. Lagendijk, and H. Sips.
Hybrid Rate Control for IEEE 802.11. In MOBIWAC, 2004.
[19] T. Henderson, D. Kotz, and I. Abyzov. The Changing Usage
of a Mature Campus-wide Wireless Network. In MobiCom,
2004.
[20] F. Hernández-Campos and M. Papadopouli. A Comparative
Measurement Study of the Workload of Wireless Access
Points in Campus Networks. In IEEE International
Symposium on Personal, Indoor and Mobile Radio
Communications, 2005.
135[21] G. Holland, N. Vaidya, and P. Bahl. A Rate-adaptive MAC
Protocol for Multi-Hop Wireless Networks. In MobiCom,
2001.
[22] A. P. Jardosh, K. N. Ramachandran, K. C. Almeroth, and
E. M. Belding-Royer. Understanding Link-Layer Behavior in
Highly Congested IEEE 802.11b Wireless Networks. In
E-WIND, 2005.
[23] G. Judd and P. Steenkiste. Using Emulation to Understand
and Improve Wireless Networks and Applications. In
USENIX NSDI, 2005.
[24] G. Judd, X. Wang, and P. Steenkiste. Efﬁcient
Channel-aware Rate Adaptation in Dynamic Environments.
In MobiSys, 2008.
[25] S. Khurana, A. Kahol, and A. P. Jayasumana. Effect of
Hidden Terminals on the Performance of IEEE 802.11 MAC
Protocol. In IEEE Conference on Local Computer Networks,
1998.
[26] J. Lee, W. Kim, S.-J. Lee, D. Jo, J. Ryu, T. Kwon, and
Y. Choi. An Experimental Study on the Capture Effect in
802.11a Networks. In WiNTECH, 2007.
[27] M. McNett and G. M. Voelker. Access and Mobility of
Wireless PDA Users. In SIGMOBILE, 2005.
[28] Meraki Networks. http://meraki.com.
[29] P. C. Ng, S. C. Liew, K. C. Sha, and W. T. To. Experimental
Study of Hidden-node Problem in IEEE 802.11 Wireless
Networks. In ACM SIGCOMM Poster Session, 2005.
[30] M. B. Pursley and C. S. Wilkins. Adaptive Transmission for
Direct-Sequence Spread-Spectrum Communications over
Multipath Channels. International Journal of Wireless
Information Networks, 7(2):69–77, 2004.
[31] M. Rodrig, C. Reis, R. Mahajan, D. Wetherall, and
J. Zahorjan. Measurement-based Characterization of 802.11
in a Hotspot Setting. In E-WIND, 2005.
[32] Roofnet. http://pdos.csail.mit.edu/roofnet.
[33] B. Sadeghi, V. Kanodia, A. Sabharwal, and E. W. Knightly.
Opportunistic Media Access for Multirate Ad Hoc Networks.
In MobiCom, 2002.
[34] D. Schwab and R. Bunt. Characterising the Use of a Campus
Wireless Network. In IEEE INFOCOM, 2004.
[35] D. Tang and M. Baker. Analysis of a Local-Area Wireless
Network. In MobiCom, 2000.
[36] C. Ware, J. Judge, J. Chicharo, and E. Dutkiewicz.
Unfairness and Capture Behaviour in 802.11 Adhoc
Networks. In IEEE International Conference on
Communications, 2000.
[37] A. Willig, M. Kubisch, C. Hoene, and A. Wolisz.
Measurements of a Wireless Link in an Industrial
Environment Using an IEEE 802.11-Compliant Physical
Layer. IEEE Transactions on Industrial Electronics, 49(6),
2002.
[38] S. H. Y. Wong, H. Yang, S. Lu, and V. Bharghavan. Robust
Rate Adaptation for 802.11 Wireless Networks. In
MobiCom, 2006.
[39] J. Zhang, K. Tan, J. Zhao, H. Wu, and Y. Zhang. A Practical
SNR-Guided Rate Adaptation. In IEEE INFOCOM, 2008.
136