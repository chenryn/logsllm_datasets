# 2020我拿下了OSCP
##### 译文声明
本文是翻译文章
译文仅供参考，具体内容表达以及含义原文为准。
## 前言
2020年终于拿下了`OSCP`证书，关于`OSCP`认证是19年了解到的，由于当时工作比较忙就一直没有时间考，等到今年春节放假加上疫情就一直在家线上办公，有了空闲时间学习充电，在官网上报名的时候突然发现，考试费涨价了，并且教材内容也增加了……
## 报名
首先是在网上进行报名，这个流程参考了
但是页面有升级，大致填写信息和流程相似，我报名的是30天lab花了`999`刀。报名交费后是不会马上拿到教材和视频的，要等到lab开始那天才可以拿到教材，于是这段空档期我在`GitHub`上找了些资源：
这几个还都不错，可以作为学习前的预习准备。
## 学习
收到教材后先是初略的看了下大致内容，一共800多页25个章节，后面用了3天把教材过了一遍，因为心疼lab的费用，所以采取了边打lab边看教材的方式学习，这个过程很痛苦，也许是应该先把教材仔细看一遍比较好……
这个过程还是有些经验和大家分享的：
**1、一定要选一个顺手的笔记软件** ：我用的`VNote`没有什么特殊原因就是习惯了，不用安装加压即用；  
 **2、整理lab靶机笔记** ：整理笔记是要有技巧的，我会记录完整的`nmap`扫描记录，枚举服务的信息，判断漏洞的依据，使用及修改过的`exp`代码；  
 **3、整理命令列表** ：常用的命令我都会记录到单独的文档里，这在考试的时候会有帮助的，`Ctrl+c`、`Ctrl+v`快速复制使用很方便；  
 **4、整理常用工具** ：整理下常用的工具，当然kali里已经有了不少工具，但有些脚本还是要做好整理备份，考试的时候就不用现在网上搜索了。
前面说了这个过程变打靶机边看教材是很痛苦的，开始的时候进展很慢，靶机打了5、6台的时候基本把教材有看了一遍，熟悉了教材后靶机练习稍微好了一些，但是我只买了30天的lab，前面浪费了不少时间，后面基本草草的打了些没有依赖关系的靶机，没有打过lab的同学可能不知道什么叫`依赖关系`，简单来说就是当你要获得`B`主机权限的时候，你必须先拿下`A`，在`A`里面获得一些敏感信息才可以拿下`B`，当然lab里是不会告诉你这些依赖关系的，这就需要花时间去尝试。最终30天我拿下来28台靶机，也正是刚刚有了些感觉的时候lab时间就到了……
## 考试
`lab`时间到了后，状态刚好上来，就约了考试，我是在`lab`到期前一周约的考试，`lab`结束第二天考试。考前准备好了护照及摄像头，因为用的台式机需要加配一个摄像头。考试过程比较坎坷，监考通过摄像头和监控我的电脑桌面进行了考前身份核实，然后就悲剧了，我的网络连考试环境连不上，折腾了`3`个小时找了个香港线路才进了考试环境，这里要给官方点赞，再我说明了情况后考试时间给我延长了`3`小时。
我抽到的题目分值分别是`25+25+20+20+10`，好像所有人都是这个比例，我先做的是缓冲区溢出的题目，基本是按照教材里的步骤操作，用之前梳理好的命令列表复制粘贴提速，包括截图30分钟搞定了这25分（
**切记不要录屏，官方是不允许录屏的** ）。
拿下这`25分`后心情很好有点飘，不过当我把其他四台靶机做了全端口扫描后就不那么乐观了，确实发现了一些`web`端口，但访问之后基本都是`默认页面`。稳了稳心情开始新一轮`信息枚举`，这就很考验`细心`和`耐心`，终于还是发现了一些蛛丝马迹，现在回想起来毕竟是考试题，都是预置好的漏洞，只是藏得深一些而已。接下来顺利的拿下了一台`20`分的靶机和另一个`25`分的`user`权限。
考前我是做了些战术安排的，`70`分通过考试，也就是只能放弃`30`分的题目，结合自身的情况，我计划先拿`user`权限，因为提权不熟练尤其是`win`的提权，如果遇到我基本不会浪费时间去深搞。拿到`25`分的`user`权限后发现是台`win`高版本服务器，果断放弃提权，看另一台`20`分的靶机，同样也是拿到user权限后发现是win服务器……
这时有点慌了，因为前面吃饭和休息用掉了一些时间，剩下只有`5-6`个小时了，梳理了一下分数`25+20+25/2+20/2`大概拿到了`67.5`，当然这只是预估的分数，因为官方并没有说拿到`user`权限是给一半分数的，还有就是要结合考试完提交的英文书面报告才知道是不是能通过考试的。
洗了把脸后继续看靶机，这是我采取的策略是搞`10`分的靶机，从分值上看`10`分的应该是难度不大的，而且`10`分的靶机只要求提交`proof`文件，我才一定是可以直接获取`root`权限的，因为其他靶机的要求中都是提交`local`和`proof`两个文件，也就是说有`user`权限的可以获得`local`，那既然没要求`local`那就一定是直接`root`后获得`proof`了。
花了很长时间改`exp`代码终于拿到了`10`分靶机的权限，悲剧的是并非`root`权限，根本没有权限读取`proof`，这时距离考试结束只有`1`个小时了。尝试了很多方法都没有成功，最后还是转向了`win`提权，因为这部分平时工作中遇到的也不多，加上边打lab边看教材是有分心的，这部分也没仔细看，于是最后这一个小时基本是按照教材尝试所有的可能方法，本以为希望不大了，但还是在考试结束前`15`分钟拿下了`20`分的`system`权限，方法就在教材里。
最后`15`分钟我基本上是没有在看其他靶机了，因为我猜分数差不多够用了，撑着瞌睡把所有的截图都过了一遍，检查了每个拿到的`local`和`proof`，确定没有问题后监考结束了我的考试。
结束考试后就直接睡觉了，真的是太累了，没有参加过这种`24`小时考试的同学是无法体会的，睡醒后开始写报告，按照官方给的报告模板加上百度翻译，很快搞定了报告，检查了一遍后，就在线上传并邮件反馈。
三天后接到邮件通知通过考试，我这边和之前听其他同学说要等`10`多天才出考试结果的情况不大一致，不知道是不是现在出结果都很快了。
## 总结
对我来说我觉得考试难度还是不小的，毕竟要在`24`小时内完成`3-4`台靶机的渗透和提权，希望我的考试经历可以给大家一点启发和帮助。现在回想起来我的考前准备还是有一些不足的：  
 **1、教材没有细看** ：导致后面很多都是教材里的方法，我却浪费不很多时间；  
 **2、预判失误** ：对于那台10分的靶机预判失误，导致浪费时间不说，还没有拿到分数；  
 **3、心态不稳** ：找不到漏洞的时候会很心慌，没有领会try harder的精神。
现在回想自己应该是属于侥幸通过，后面还需要继续积累继续磨练。
后续我也会把我整理的资料发到 和大家分享。