show the least intra-DC locality for both the aggregated traffic and
high-priority traffic; the locality of the high-priority traffic for AI
services is much lower than that in terms of the aggregated and
low-priority traffic. These observations indicate the challenges of
WAN traffic engineering, which needs to take the disparity among
services into consideration for service-level bandwidth allocation.
The observations also imply the urgent need of a detailed analysis
on traffic characteristics for different services, which is the object
of this work.
The link utilization analysis reveals the links that carry WAN
traffic experience higher utilization than those in DCs, and we
observe a balanced load among the links carrying WAN traffic. We
also find a high correlation between WAN traffic and DC traffic
time series. These findings show the viability of ECMP in our DCN
in practice considering its simplicity, and suggest a separation of
inter-DC (WAN) and intra-DC traffic into two types of switches (as
opposed to [28]). In doing so, we can avoid interference of the two
types of traffic, simplify the congestion control design, and achieve
low cost and high scalability.
4 TRAFFIC COMMUNICATION
Understanding traffic communication patterns across DCs and clus-
ters (within DCs) is critical for WAN traffic engineering and fabric
design. In this section, we examine both inter-DC (high-priority)
6
0.000.020.040.06Median coefficient-of-variation0.00.20.40.60.81.0CDFxDC-corecore-xDC0h24h48h72h96h120h144h168hTime0.150.200.250.30Utilizationcluster-xDCcluster-DCExamination of WAN Traffic Characteristics in a Large-scale Data Center Network
IMC ’21, November 2–4, 2021, Virtual Event, USA
traffic matrix and inter-cluster (all) traffic matrix. Our major find-
ings include: (1) biased WAN traffic distribution over DC pairs
towards a small set of heavy hitters; (2) the traffic exchange pattern
of these heavy hitters remains stable, leading to a good predictabil-
ity of the aggregated high-priority traffic; (3) the total traffic across
clusters inside a DC is imbalanced and variable.
4.1 Inter-DC Traffic Matrix
Communication patterns among DCs provide a view of load in
interconnect WAN, and guide the design of WAN traffic engineer-
ing and bandwidth allocation. We specially focus on high-priority
traffic, because priority queuing at switches will ensure enough
capacity for the high-priority traffic at first if resource contention
does occur [14]. We find a skewed traffic distribution on the inter-
DC traffic matrix for high-priority traffic, where 8.5% of DC pairs
contribute 80% of high-priority traffic. Moreover, the set of heavy
hitters that contribute 80% of traffic remains the same over time.
Figure 6: Degree centrality of each data center.
To further inspect the interaction patterns among different DCs,
we count the number of DCs that each DC communicates with
(i.e., degree centrality) and plot the distribution in Figure 6. We
observe an extensive communication pattern: out of all DCs, 85%
communicate with more than 75% of the other DCs. We further
look into the heavily-loaded connections, where a connection is
labeled as heavily loaded one if the traffic volume exceeds 1Gbps.
We find that still over 50% of DCs communicate with 40%-60% of
other DCs. These results indicate that although communications
are prevalent among DCs, most of traffic is concentrated on a few
DC connections.
Traffic matrix variation. We next examine the variation of the
high-priority traffic matrix over time, which reflects the flux in the
traffic exchange pattern among DC pairs. For a time point t, the
change rate rT M of a traffic matrix T M is computed as [20]:
rT M(t) =
|T M(t + τ) − T M(t)|
|T M(t)|
(1)
where the numerator is the absolute sum of the entry wide dif-
ferences of the two matrices at adjacent time intervals, and the
denominator is the absolute sum of entries in T M(t), which equals
to the aggregated traffic T(t). For comparison, we also compute the
change rate of the aggregated traffic as:
7
Figure 7: Change rates of the aggregated high-priority traffic
and the traffic matrix of the heavy DC pairs in a week; the
labels on the x-axis mark the hours of the week; each data
point corresponds to a 10-minute interval.
rAдд.(t) =
|T(t + τ) − T(t)|
T(t)
(2)
Note that even the aggregated traffic remains unchanged (i.e.
rAдд. = 0), the exchange traffic pattern among DCs (measured by
rT M ) may change greatly. For instance, let us suppose T M contain
two elements, and T(t) = 4, T M(t) = [2, 2]; at time point t + τ, if
T M(t + τ) = [1, 3], rAдд.(t) = 0, but rT M = 2/4 = 0.5.
Figure 7 plots the rAдд. and rT M on 10-minute intervals during
a week (i.e., τ = 10min). Here we only consider the heavy hitters
(8.5%) that contribute 80% of the traffic. Overall, both the aggre-
gated traffic and the traffic exchange across DCs remain stable with
the change rate below 10% for most of the time intervals. Never-
theless, the traffic exchange pattern among DC pairs may change
in some time intervals when the aggregated traffic remain almost
unchanged (rAдд. close to 0). This observation shows that even
when the aggregate inter-DC traffic remains stable, the traffic ex-
changed among DCs may change. Besides, the change rate of the
inter-DC high-priority traffic follows a typical daily pattern, which
is possibly driven by the variation of load.
Predictability analysis. The above analysis indicates that the
overall inter-DC traffic is relatively stable over time. Next, we give
insight into how the traffic exchanged between each pair of heavy
DCs changes and whether it is predictable on a 1-minute time scale,
which is crucial for bandwidth allocation and traffic engineering
in the WAN [14, 16, 22]. To this end, we compute the fraction of
total traffic contributed by those DC pairs that have no significant
change in traffic like in [6] (i.e., change rate is below the stability
threshold thr on a 1-minute time scale), and depict the distribution
in Figure 8(a), where thr is set to 5%, 10%, 20%. Even with a stringent
stability threshold of 5%, for 80% of 1-minute intervals, over 60% of
the total traffic is contributed by the DC pairs that remain stable in
terms of traffic; this traffic share goes beyond 90%, if we allow 20%
of change (i.e., thr = 20%). In addition, we find that the coefficient of
variation of the high-priority traffic volume for each DC pair ranges
from 0.05 to 0.82 (with 0.32 on median), which is consistent with
the observations in [19]. Taken together, these results imply the
possibility of estimating the aggregated high-priority WAN traffic
based on the historical traffic data. Given the trend of incorporating
multiple service priorities into the WAN traffic engineering [7, 14],
0.00.20.40.60.81.0Degree centrality0.00.20.40.60.81.0% of DCsheavily-loadedall links0h24h48h72h96h120h144h168hTime0.000.050.100.15RaterTMrAgg.IMC ’21, November 2–4, 2021, Virtual Event, USA
Zhaohua Wang, Zhenyu Li, Guangming Liu, Yunfei Chen, Qinghua Wu, Gang Cheng
(a) Distribution of the fraction of total inter-DC traffic under
3 different change rate upper bounds
Figure 9: Change rates of the aggregated traffic and the traf-
fic matrix of the heavy cluster pairs in a week; the labels
on the x-axis mark the hours of the week; each data point
corresponds to a 10-minute interval.
(b) Distribution of run-length of insignificant change
Figure 8: High-priority WAN traffic predictability.
(a) Distribution of the fraction of total inter-Cluster traffic
with 3 different change rate upper bounds
we return to studying the service-level traffic predictability and
traffic estimation in Section 5.
DC-WAN is an expensive resource; in order to make full use of the
network bandwidth, providers usually conduct traffic scheduling
during the time periods when traffic remains stable. We thus further
analyze the persistence of the stability. Specially, we examine the
run-length of the sequence of minutes where change in traffic for
each DC pair remains insignificant, i.e., less than thr compared to
the demand at the beginning of the sequence. Figure 8(b) shows
the results. We observe that 40% of the DC pairs remain predictable
for over 5 minutes when thr = 5%; this percentage goes up to 80%
if we can tolerate 20% of change (i.e. thr = 20%).
4.2 Inter-Cluster Traffic Matrix
Using the same analysis methodologies, we analyze the traffic com-
munication among clusters in a typical DC, in view of the significant
amount of traffic among clusters (see Table 2). A good understand-
ing of inter-cluster traffic characteristics is also useful for the DC
fabric design [27].
We first focus on the inter-Cluster traffic matrix in a typical DC
over one week. Note that as in [27], we consider the aggregated
traffic here without distinguishing high-priority traffic and low-
priority traffic. This matrix shows the similar distribution to that in
Facebook’s DCN [27] that traffic is densely distributed among a few
heavy clusters. About 80% of traffic interactions are owed to the
(b) Distribution of run-length of insignificant change
Figure 10: Inter-cluster traffic predictability.
top 50% of cluster pairs, and the set of heavy cluster pairs remains
not changed over time. A further look at the racks reveals that 80%
of inter-Cluster traffic is from communications among less than
17% of rack pairs; this implies the viable of heterogeneous fabrics
in DCs.
We further plot the rAдд. and the rT M of inter-Cluster traffic
in Figure 9. It shows that the aggregated traffic remains relatively
stable with the median change rate of 4.2%. However, the fluctuation
of traffic exchanges is much greater: the median change rate is about
8
0.00.20.40.60.81.0Traffic fraction0.00.20.40.60.81.0CDF5%10%20%100101102103Mean run-length (minute)0.00.20.40.60.81.0CDF5%10%20%0h24h48h72h96h120h144h168hTime0.00.10.20.30.4RaterTMrAgg.0.00.20.40.60.81.0Traffic fraction0.00.20.40.60.81.0CDF5%10%20%100101Mean run-length (minute)0.00.20.40.60.81.0CDF5%10%20%Examination of WAN Traffic Characteristics in a Large-scale Data Center Network
IMC ’21, November 2–4, 2021, Virtual Event, USA
16.3%, implying dynamic traffic exchanges among different cluster
pairs. A possible reason is that the interconnect within a DC is
often abundant, and traffic within a DC is not well scheduled (i.e.,
more dynamic).
Predictability analysis. Finally, we examine the predictability of
inter-cluster (but intra-DC) traffic. Figure 10(a) plots the distribution
of the fraction of total traffic contributed by those cluster pairs
that have no significant change in traffic on a 1-minute time scale.
Again, we use three different change rate thresholds (5%, 10% and
20%) to identify those pairs experience no significant traffic change.
While for 80% of 1-minute intervals, about 45% of the total traffic
is contributed by the cluster pairs with change rate less than 10%
(thr = 10%), less than 10% of the cluster pairs remain predictable
for over 5 minutes with this moderate change rate threshold (see
Figure 10(b)). This observation implies relatively low stability of
inter-cluster traffic exchanges.
4.3 Summary and Implications
Our analysis reveals the very biased WAN (high-priority) traffic
distribution towards a small portion (8.5%) of DC pairs. Overall,
the aggregated high-priority inter-DC (WAN) traffic and the traffic
exchange patterns among DCs remain stable over time, resulting
in a good predictability of overall traffic demands. The inter-cluster
(all) traffic also shows an imbalanced distribution, especially at the
rack-level communication. We also observe a relatively low stability
of inter-cluster traffic.
The biased distribution of WAN traffic suggests a unbalanced
resource allocation, with more resource to the stable heavy hitters.
The good stability of aggregated WAN traffic between DC pairs
implies to allocate bandwidth based on the historical traffic volume
as proposed in [14, 16]. Nevertheless, providers like Baidu that host
hundreds of services, prefer to allocate WAN bandwidth allocation
at service level [22]; we will return to study the service-level traf-
fic prediction in next section. The observation on the imbalanced
inter-cluster traffic suggests a heterogeneous fabric design. Besides,
network fabric needs to take special consideration to cope with the
inter-cluster traffic dynamics. For instance, as in [11], to cope with
the dynamics of traffic load, network fabrics need to incorporate
randomness in forwarding path selection for individual flows.
5 WAN TRAFFIC CHARACTERISTICS OF
SERVICES
This section examines traffic at the service level, motivated by the
disparity of traffic patterns that we have observed in the previous
analysis. In particular, we study the interaction patterns and tem-
poral correlations among services from the perspective of traffic
volume in WAN. We observe different interactions patterns and
high temporal correlations among services. We next investigate the
predictability of high-priority inter-DC traffic for different services.
Finally, given the differences in terms of traffic predictability across
services, we examine the WAN traffic prediction accuracy at service
level using the widely used methods in SD-WAN solutions.
9
5.1 Service Interaction
Interaction pattern. We first examine the service interaction
pattern across DCs from the perspective of traffic volume. We found
that while many services interact with each other, in aggregation,
traffic distribution over services in WAN is highly skewed: 16% of
services generate 99% of WAN traffic. The interaction matrix of
individual services is also very sparse: as few as 0.2% of service
pairs account for over 80% of traffic, and 20% of traffic comes from
the interaction of services with themselves.
For each category of services, we further inspect the traffic shares
among its interacted services and present the results in Table 3. For
the traffic generated from each type of source services, we compute
its distribution over all types of destination services (i.e. each row
in Table 3). For instance, 28% of the traffic that is generated by Web
services is destined to Computing services. Three observations are
notable. First, Web, DB and Cloud services are the most extensive
self-interactions; they either sync data (e.g. web search indexes)
among DCs [35] (thus generating low-priority traffic), or use geo-
distributed replicas to collaboratively serve Internet users (thus
generating high-priority traffic). Other types of services are less
likely to be called by the services of their own types, which is
particular true for FileSystem services. Second, Web and Computing
services have considerable interactions with other services; this
observation is evidenced by the considerable fractions of traffic
from other types of services towards them. This is possibly because
that Web is the dominant application in this DCN and Computing
services are the foundation for other services. Third, the two newly
types of services, Analytics and AI, also interact with all other
types of services fairly frequently—they are indeed becoming new
foundations for other services.
We also studied the service interaction pattern for high-priority
traffic across DCs as shown in Table 4. Recall high-priority traffic
serves Internet-facing requests, and thus is delay sensitive. Com-
pared with the total traffic shares, we observe much more extensive
self-interactions for the high-priority traffic of Web, DB and Cloud
services. Besides, because Web services are less likely to use Com-
puting services to fulfill requests from Internet users, the traffic
share of Computing services to Web services drop greatly com-
pared to that for aggregated traffic (the ratio declines from 40.3%
to 16.6%). Analytics services, on the other hand, are more likely
to communicate with Computing services when serving Internet-
facing requests (the ratio increases from 15.5% for all traffic to 33.9%
for high-priority traffic). At last, overall, the Web, Computing, Ana-
lytics and AI services still have considerable interactions with other
types of services to respond to Internet-facing requests.
Low rank of service traffic matrix. Extensive traffic interac-
tions of diverse services among DCs may lead to distinct traffic
characteristics of services in WAN networks. Although the overall
inter-DC traffic has diurnal patterns, specific services may hold
different characteristics. Understanding the temporal correlations
between different services is thus important for developing better
strategies for service deployment and traffic scheduling. To this
end, we form the temporal traffic matrix for individual services
M = [m1, m2, . . . , mn], where mi ∈ Rl is the traffic volume of the
i-th service in 10-minute intervals in a day (l = 144), i.e., the j-th
IMC ’21, November 2–4, 2021, Virtual Event, USA
Zhaohua Wang, Zhenyu Li, Guangming Liu, Yunfei Chen, Qinghua Wu, Gang Cheng
Table 3: Service interaction among DCs (over WAN) from the perspective of aggregated traffic (including both high-priority and
low-priority traffic): traffic volume interacted among different types of services; normalized by the total traffic from source
services.
%
Dst service
Src service
Web
Computing
Analytics
DB
Cloud
AI
FileSystem
Map
Security
Web
Computing
Analytics
51.7
40.3
15.5
18.7