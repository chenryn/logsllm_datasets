其中的某个页面时，你就提供
公
1.3.1结构术语
欢关系数据库，很大程度上便是因为其基本概念都简明易懂。
的
就不能再避而不谈有关的术语了。这正是本节的主要内容。本节所描述的术语都是本书要用到
数据库到底是什么样子，我却只字未提。可是，既然我们要设计数据库，并实现它，那么我们
少嗨涩难懂的专业技术术语。事实上，尽管我们对如何使用示例数据库有过大致描述，但关于
2个ad表的构成列有：广告编号、“拥有”该广告的那家公司的编号，以及每点击一次的收费
1.3
从而带来更多的收获。
要你学会了“成员资格更新”的查询，那么便可以将该技巧用于编写“久未复诊患者”的查询，
与“确定最近哪些患者未来复诊”这两个任务便非常相似。它们都是基于日期的查询，因此只
者记录维护、办公记载等那些工作中。例如，“确定联盟里哪些成员需要更新他们的成员资格”
本书里不会看到很多与牙科学有关的查询，但是会看到这里所发现的很多查询都可以应用到患
你所要解决的那些特定问题的。假设你正好就在我前面提到的那个牙科诊所里工作。虽然在这
9
女目。第3个hit表需要记录广告
“告的公司那里获得一点费用。这就是所谓的广告“点击”。为了表示这些信息，你需要用到3
公司签订了合同，满足它们想要在人们访问你网站页面时显示其广告的需要。每当有访客点
来
为，因此希望大家能够熟悉它们。庆幸的是，关系数据库的许多概念都很简单。人们之所以喜
看一个例子。假设你在经营一个网站，它有一项横幅广告服务。你与多家想要刊登广告的
关系数据库是如何把数据组织到表里的呢？又是如何把不同表的信息关联在一起的呢？下
口数据库（DataBase，即RDBMS里的DB）是一个用来存储信息的仓库，它的结构简单、
在数据库领域，MySQL被划分为关系数据库管理系统（RDBMS）。我们下面来拆解一下。
你可能已经注意到了，
口
口
第1章MySQL入门
插入（insert）、检索（retrieve）
基本数据库术语
过，我的定义更有助于表达出RDBMS的用途。）
RDBMS的强大之处在于：它能方便地将这些表里的数据提取出来，并把相关表里的信
过查找两个表里的共同元素，将分别存放于两个表里的信息联系（即匹配）起来。
关系（Relational，即RDBMS里的R）一词表示这是一种特殊的DBMS，其长处在于通
管理系统（Management System，即RDBMS里的MS）是一个软件，
■记录可以包含多项信息；表里的每一列对应于其中的一项。
■表中的每一行称为一条记录（record)。
■数据库里的数据集都被组织成表（table)。
规则。
定义与我在本书中用它的方式有所不同。为此，我先向那些纯粹主义者道歉。
每个表由多个行（row）和列（column）组成。
，尽管这是一本关于数据库的书籍，但到目前为止，你还未遇到过多
供一个嵌有广告的页面发送给访客浏览器，这样你就能从刊登这
告点击量和广告点击日期。
、修改（modify）或删除（delete）记录。
我们可以通过它来
条
击
不
---
## Page 27
现象，因为刚才描述的每一步骤都是一个简单的匹配操作：将一个表的行值与另一个表的行值，
告有3个匹配；*101号广告有2个匹配。
日期范围内的所有匹配行；然后，再统计这些匹配行的数量。最后查询出的结果是：48号厂
号
次，那么就需要像下面那样使用所有的3个表。
例如，想要知道在7月14日那天Pickles公司（Pickles，
量，则只需检查表hit 即可。其他有些问题则可能比较复杂，需要查询多个表才能得到答案。
只需统计一下company表共有多少行即可。同样地，想要了解在某段指定的时间里有多少点击
这些听起来好像很复杂！但这正是关系数据库系统最擅长做的事情。这种复杂性只是表面
(3)对于在ad表里匹配到的每一行，使用该行里的广告编号在hit表里找出日期介于给定
最后找到两条广告，即编号48和101。
(2）在ad表里，利用这个公司编号找出与之匹配的行，从而可以确定出所有相关广告的编
有些问题只用一个表便能回答。例如，想要知道与你签订了合同的公司有多少家，那么你
（1）在company表里查找公司名和
hit表
company_num
ad表
GigaFred&Son
Real Roofing Co.
company表
ad_num
company_name
238713232328132314137
Inc.
称（Pickles，
date
图1-1
15
15
14
14
4
adnum
company_num
48
16
横幅广告的表
14
%
hitfee
0.01
0.02
0.01
Inc.),
2572FamilyAve.
，Inc.）的每一条广告分别被点击了多
address
从而查出该公司的编号（14)。
847-4738
882-4173
phone
1.3基本数据库术语
定
L
---
## Page 28
tools/.
and-click）功能。关于此工具的更多信息，请访问http://www.mysql.com/products/
这是一个基于图形用户界面（Graphical User Interface，GUI）的工具，提供了即点即击（point-
PHP、Python、Java和 Ruby）的编程接口。
库可以被C语言程序直接使用。如果你不习惯C语言,那么也可以选择适用于其他语言（如Perl、
带的标准客户端程序无法满足你的应用需求，你可以利用这个库来编写自己的程序。这个开发
行版本里还包括一些其他的客户端程序。此外，MySQL还提供了一个客户端开发库，如果它目
据库服务器的工作状态，以及执行一些数据库管理相关的任务，如通知服务器关闭。MySQL
mysqldump和 mysqladmin。前者主要用来把表的内容导出到文件里；后者主要用来检查数
的实际情况使用合适的客户端程序。最常用的客户端程序是mysql，它是一个交互式客户端
包时，会有一个单独的服务器RPM包和客户端RPM包，因此应该安装两种包。）请根据自
发起查询，以便将自己想要的信息告知服务器。
1.3.3
悄然地发生变化——它不再是一组怪诞的表达，而是一种有助于信息描述的强大工具。
序员就能学会如何熟练地使用SQL。随着对SQL的深入了解，你对CREATE TABLE的看法也会
是MySQL不是这样子的，因此在创建表时，你必须告知MySQL一些类似下面那样的内容
必须告诉 MySQL该表的结构是什么样子的。很多人都会想到把表与图表或图片联系起来。
式与数据库进行交互。
1.3.2
内容。（如果想了解它们，请阅读 C.J.Date或E.F.Codd的著作。）
三范式”
前结算期内，各家公司应该支付你多少广告费？
分别投放了多少个不同的广告？哪家公司的广告最受欢迎？每个广告带来的收益是多少？在当
器
通过匹配关联起来。
提
服
本书讨论的客户端程序都是基于命令行的。你也可以试试MySQL工作台（MySQLWorkbench），
字，你可以用它来发起查询并查看结果。另外还有两个主要用于管理的客户端程序，
是供它们所查询的信息。另一个程序是MySQL客户端，它主要负责连接到数据库服务器，并
上，主要负责监听网络上的客户端请求，并根据这些请求去访问数据库内容，然后向客户端
服务器”
且各个服务商的实现都各不相同。SQL支持许多不同的语句，可以让你用非常有趣和实用的方
MySQL的大部分发行版本都包括数据库服务器程序和客户端程序。（在Linux下使用RPM
与其他计算机语言一样，初次接触SQL的人往往会觉得它很奇怪。例如，在创建表时，
有了之前讲述的这些关系数据库理论，你就能读懂本书后续的内容了；我们不必了解“第
当使用MySQL的时候，你实际上至少会用到两个程序，因为MySQL采用的是“客户端/
如果对SQL还不太熟悉，那么可能会对这样的语句心生畏惧。不过请放心，你不用成为程
CREATE TABLE company
为了与MySQL交互，需要使用一种名为 SQL的语言。所有主流数据库系统都支持SQL，
第1章MySQL入门
MySQL的体系结构术语
phone
address
company_name:VARCHAR(30)
体系结构。有一个程序是MySQL服务器，即mysqld。它运行在存放数据库的那台机
查询语言术语
”（ThirdNormal Form）、“实体联系图”（Entity-RelationshipDiagram）等这些枯燥乏味的
。这种简单的操作可以有多种变化，用于回答各式各样的问题，如各家公司
VARCHAR(12)
VARCHAR(30)
INT,
发
程
己
---
## Page 29
名也都可以直接使用。在MySQL里，只要每个人都用自己的数据库，那么大家完全可以使用
本书示例中的 sampdb 替换为你实际使用的数据库名称。
MySQL管理员为你分配了另一个名字，那么你需要换一个名字。不管是何种情况，你都需要把
示例数据库的交互。在此过程中，你将学会以下内容。
一个示例数据库和多个表，通过对这些表里的信息执行插入、检索、删除和修改操作，练习与
1.4
种由读它的人决定。 本书假定 SQL的发音为“ess-queue-ell”。
的名字。虽然它们的发音相同，但我们通过字母大小写和字体差异对它们进行了区分。
即使你的系统里有多个用户，且他们都各自拥有自己的示例数据库，本节所有示例里的表
说到发音，MySQL 被读作“my-ess-queue-el”。具体细节可以在 MySQL 参考手册（MySQL
本书将示例数据库命名为 sampdb。如果在你的系统上已经有人占用了这个名字，或者你的
口了解MySQL所能理解的SQL基础知识。（MySQL与其他RDBMS所使用的SQL有所不
本节提供了一个带有多个示例的教程，其目的在于帮助你熟悉MySQL。主要内容包括创建
现在你已具备了所有的预备知识。下面来实际操作一下MySQL。
为避免混淆，我们使用 MySQL 指代完整的 MySQL RDBMS，而 mysq1 指代特定客户端程序
口
口服务器强制执行并发控制，可以防止两个用户同时修改同一条记录。所有客户端请求
MySQL教程
来代替。
先
上；而客户端则是通过网络连接到服务器。本教程主要依赖于客户端程序mysql，它首
MySQL采用的是“客户端/服务器”体系结构。其中，服务器运行在数据库所在的机器
了解MySQL自带的标准客户端程序是如何与MySQL服务器进行通信的。前一节讲过，
熟然
客户端程序进行连接。
果你只想运行一个自属的系统，那么你完全可以把访问权限设置为只允许服务器上的
却只应该有查看记录的权限。总之，你可以把这种访问权限控制细化到每一个人。如
的操作。例如，财务部的Sally应该有查看和更新（修改）记录的权限；而服务台的Phil
全机制，你
以在任意地方运行MySQL客户端程序，它都能够通过网络连接到服务器。距离不是问
不是只有在数据库所在的那台机器上才能登录。MySQL工作在网络环境里，因此你可
发往服务器，然后由服务器来决定执行这些请求的顺序。
同时访问同一个表的情况，它们也不用先找到对方进行协商。它们只需把自己的请求
都要经过服务器，因此服务器会负责安排处理它们的先后顺序。即使出现多个客户端
算
交互的最直接的方式。不过根据需要，有些示例会使用mysqlimport或者mysqlshow
读取你输入的SQL查询语句，把它们发送到服务器执行，然后把执行结果显示在你
悉的版本是否存在差异。）
何人都能够通过互联网看到你的数据呢？答案是“不能”
你带着笔记本电脑旅行到了冰岛，你也仍然可以访问自己的数据库。这是否意味着
！你可以在世界的任何地方访问服务器。例如，你的服务器位于澳大利亚，那么就
你可以设定只有得到授权的人才能访问。此外，你还可以进一步限制这些人
MySQL 与 myBq1 之间的差异
。MySQL有一套灵活的安
1.4MySOL教程
9
---
## Page 30
第13章。
多关于CREATE USER 语句、GRANT 语句、设置MySQL用户账户以及修改密码的信息，请参未
如果root 用户无密码，那么这是个很大的安全漏洞，你应该尽快给它设置一个。想要了解更
密码。如果你还未设置，
输入的密码会被显示为一串星号，即******。这里假设你已经为MySQL的root用户设置
但在本书后面用到它们的地方也要做相应的修改。
务器的MySQL账户，你必须要先连接到该服务器。通常情况下，你需要在运行MySQL服务
本书学习的账户。）
据库及其表。（如果你已有MySQL账户，则可以直接用它。不过，建议你另外建立一个专用于
户
行
的
服务，那么也可以申请使用它。想要自己获得和安装MySQL，请参考附录A。
器
1.4.2基本配置要求
A.3.3节，把该目录的路径名称添加到环境变量PATH里。
下包含着这些程序的bin目录，添加到命令解释器的搜索路径里。具体操作方法是，参考本书
个新的目录。
含了你所需要的许多文件。顺便提个建议：每次你操作数据库里的示例时，最好都能切换到一
可以在附录A里查到。在发行包解压之后，它会自动创建一个名为 sampdb 的子目录，其中包
该发行包里包含了许多用来安装示例数据库的查询语句和数据。发行包的获取办法和安装步骤
1.4.1获取示例数据库发行包
相同的表名，不会有任何问题。MySQL将表限制在各自的数据库里，防止了相互干扰。
户，其用户名为 sampadm，密码为 secret。你也可以把其中的名字和密码更改成自己想用的，
行，那么你可以像下面那样用root身份连接服务器，然后创建一个新的示例数据库管理员账
主机上，以root用户身份登录，然后执行CREATEUSER语句和GRANT语句来创建新的MySQL
10
户，并为其分配数据库权限。如果你是在自己的机器上安装了MySQL服务器，并且正在
位于任何地方。如果你的因特网服务提供商（Internet Service Provider，ISP）提供了MySQL
此时此刻，我们遇到了一个“是先有鸡，还是先有蛋”的难题：为了建立一个用于连接月
里。服务器可以选择安装在你的机器上，这点不强求。只要你有权限连接它，那么服务器
除了MySQL软件，还必须要有一个MySQL账户，这样才能连接到服务器，并创建示例数
如果想要在任何目录里都可以方便地运行MySQL程序，那么你最好能把位于MySQL目录
在创建 sampadm账户之后，请输入 quit，并按回车键，然后退出 mysql 程序。