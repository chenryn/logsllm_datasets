For FTP and email instructions, see Exchanging information with IBM Software Support.
To open or update a case, go to the IBM My Support site.
Note: Always update your case to indicate that data was sent.
If you need to speak with IBM Software Support, contact your country representative. If you need to
speak with IBM Software Support in the US, you can call 1-800-IBM-SERV.
Related tasks
“Troubleshooting distributed queue management problems” on page 76
Troubleshooting information to help you solve problems relating to distributed queue management
(DQM).
Collecting information for client application problems
If you need assistance from IBM Support to resolve a problem with an IBM MQ C, C++, COBOL, .NET,
pTAL, RPG or Visual Basic client application on Multiplatforms, you first need to collect troubleshooting
information to send to IBM Support to help find a solution.
Before you begin
Before you start this task, answer the following questions about the problem:
• What client application problem did you observe on the system?
• What time did the client application problem start and when did it stop?
• What is the client application name, and to which queue manager does it connect?
• Which SVRCONN channel, queues, and other objects does the client application use?
About this task
If the client application problem is happening right now, or if you are able to reproduce it, you can
generate data to provide more information about the problem.
After collecting the troubleshooting information, you can send it to IBM.
Procedure
1.Generate a trace of the client application while the problem is happening:
• “Tracing on AIX and Linux” on page 376
• “Tracing on Windows” on page 391
• “Tracing on IBM i” on page 381
2.If the client application is receiving an unexpected error from a remote queue manager, generate a
simultaneous IBM MQ trace of that queue manager:
• “Tracing on AIX and Linux” on page 376
318 Troubleshooting and Support for IBM MQ
• “Tracing on Windows” on page 391
• “Tracing on IBM i” on page 381
3.
On Linux and UNIX systems, save the output from the mqconfig command and place this mqconfig
data directly in the top-level IBM MQ errors directory.
The automatic and manual data collection processes in Step “4” on page 319 both collect files found
in this directory.
4.Collect the IBM MQ data.
You can do this either automatically or manually:
• Collect the data automatically by using the runmqras command as described in “Collecting
troubleshooting information automatically with runmqras” on page 303. Be sure to collect the
runmqras defs and trace (if the issue was traced) sections, and to specify your case number as
shown in the following example for collecting output from queue manager QMA:
runmqras -section defs,trace -qmlist QMA -caseno TS001234567
• Alternatively, collect the data manually as described in “Collecting troubleshooting information
manually” on page 306.
5.Send the information that you have collected to IBM.
A good description of the problem and the data is the most important information you can provide to
IBM. Do not send data without providing a description!
For FTP and email instructions, see Exchanging information with IBM Software Support.
To open or update a case, go to the IBM My Support site.
Note: Always update your case to indicate that data was sent.
If you need to speak with IBM Software Support, contact your country representative. If you need to
speak with IBM Software Support in the US, you can call 1-800-IBM-SERV.
Collecting information for IBM MQ clustering problems
If you need assistance from IBM Support to resolve a problem when an IBM MQ queue manager
has a problem with cluster queues, topics or channels on Multiplatforms, you first need to collect
troubleshooting information to send to IBM Support to help find a solution.
Before you begin
Before you start this task, answer the following questions about the problem:
• What IBM MQ clustering problem did you observe on the system?
• What time did the IBM MQ clustering problem start and when did it stop?
• What does your cluster topology look like, and where are the full repositories?
• Which cluster queue managers, channels, queues and topics are involved in the problem?
About this task
If the IBM MQ clustering problem is happening right now, or if you are able to reproduce it, you can
generate data to provide more information about the problem.
After collecting the troubleshooting information, you can send it to IBM.
Procedure
1.Generate a trace of the queue manager while the IBM MQ clustering problem is happening:
IBM MQ troubleshooting and support 319
• “Tracing on AIX and Linux” on page 376
• “Tracing on Windows” on page 391
• “Tracing on IBM i” on page 381
2.If the problem involves other queue managers in the cluster, such as the cluster full repositories,
generate IBM MQ trace simultaneously on those queue managers:
• “Tracing on AIX and Linux” on page 376
• “Tracing on Windows” on page 391
• “Tracing on IBM i” on page 381
3.
On Linux and UNIX systems, save the output from the mqconfig command and place this mqconfig
data directly in the top-level IBM MQ errors directory.
The automatic and manual data collection processes in Step “4” on page 320 both collect files found
in this directory.
4.Collect the IBM MQ data.
You can do this either automatically or manually:
• Collect the data automatically by using the runmqras command as described in “Collecting
troubleshooting information automatically with runmqras” on page 303. Be sure to collect the
runmqras defs, cluster, and trace (if the issue was traced) sections, and to specify your case
number as shown in the following example for collecting runmqras output from queue managers
QMA and REPOS1:
runmqras -section defs,cluster,trace -qmlist QMA,REPOS1 -caseno TS001234567
The runmqras output will include all of your cluster definitions as well as the contents of your
cluster repository cache.
• Alternatively, collect the data manually as described in “Collecting troubleshooting information
manually” on page 306.
5.Send the information that you have collected to IBM.
A good description of the problem and the data is the most important information you can provide to
IBM. Do not send data without providing a description!
For FTP and email instructions, see Exchanging information with IBM Software Support.
To open or update a case, go to the IBM My Support site.
Note: Always update your case to indicate that data was sent.
If you need to speak with IBM Software Support, contact your country representative. If you need to
speak with IBM Software Support in the US, you can call 1-800-IBM-SERV.
Related tasks
“Troubleshooting queue manager cluster problems” on page 194
Use the checklist given here, and the advice given in the subtopics, to help you to detect and deal with
problems when you use queue manager clusters.
Collecting information for data conversion problems
If you need assistance from IBM Support to resolve a problem with data conversion on Multiplatforms,
you first need to collect troubleshooting information to send to IBM Support to help find a solution.
Before you begin
Before you start this task, answer the following questions about the problem:
320 Troubleshooting and Support for IBM MQ
• What data conversion problem did you observe on the system?
• What is the MQMD.Format of the message and its original MQMD.CodedCharSetId (CCSID)?
• What is the intended MQMD.CodedCharSetId to which the message should be converted?
• Which specific characters in the message are invalid, and which did you expect to see instead?
About this task
If the data conversion problem is happening right now, or if you are able to reproduce it, you can generate
data to provide more information about the problem.
After collecting the troubleshooting information, you can send it to IBM.
Procedure
1.Browse the message immediately after it has been put to an IBM MQ queue using a sample program
such as amqsbcg.
It is important to see the message in hexadecimal in order to examine the MQMD header and the byte
values of the message data. For example, to browse messages on a queue called 'Target.Queue' on
queue manager called 'QMA', enter this command:
amqsbcg Source.Queue QMA > Source.Queue.browse.txt
2.Generate a trace of the queue manager while the application is putting the message:
• “Tracing on AIX and Linux” on page 376
• “Tracing on Windows” on page 391
• “Tracing on IBM i” on page 381
3.If the message contents are corrupted while flowing over an IBM MQ channel with CONVERT(YES),
generate trace of the queue manager while the message is flowing across the sending channel:
• “Tracing on AIX and Linux” on page 376
• “Tracing on Windows” on page 391
• “Tracing on IBM i” on page 381
4.Browse the message using a sample program such as amqsbcg just before it is retrieved by the target
application.
For example, to browse messages on a queue called 'Target.Queue' on queue manager called 'QMA',
enter this command:
amqsbcg Target.Queue QMA > Target.Queue.browse.txt
5.If the message contents are corrupted when the target application gets the message, generate a trace
of the queue manager while the application is getting the message:
• “Tracing on AIX and Linux” on page 376
• “Tracing on Windows” on page 391
• “Tracing on IBM i” on page 381
6.Collect the IBM MQ data.
You can do this either automatically or manually:
• Collect the data automatically by using the runmqras command as described in “Collecting
troubleshooting information automatically with runmqras” on page 303 to collect the data for both
IBM MQ troubleshooting and support 321
sides of the channel. Be sure to collect the runmqras defs and trace sections, and to specify
your case number as shown in the following example:
runmqras -section defs,cluster,trace -qmlist QMA -caseno TS001234567
• Alternatively, collect the data manually as described in “Collecting troubleshooting information
manually” on page 306.
7.Send the information that you have collected to IBM.
A good description of the problem and the data is the most important information you can provide to
IBM. Do not send data without providing a description!
For FTP and email instructions, see Exchanging information with IBM Software Support.
To open or update a case, go to the IBM My Support site.
Note: Always update your case to indicate that data was sent.
If you need to speak with IBM Software Support, contact your country representative. If you need to
speak with IBM Software Support in the US, you can call 1-800-IBM-SERV.
Related tasks
“Troubleshooting message problems” on page 177
Collecting information for dead-letter queue problems
If an IBM MQ queue manager is placing messages on its dead-letter queue (DLQ) on Multiplatforms, you
might to collect troubleshooting information to help with finding a solution.
Before you begin
Before you start this task, answer the following questions about the problem:
• What dead-letter queue problem did you observe on the system?
• What time did the dead-letter queue problem start and when did it stop?
• Where are the dead-letter messages coming from, and what is their intended route?
About this task
If the messages are going to the dead-letter queue right now, or if you can reproduce the problem that
causes the messages to go there, you can generate data to provide more information about the problem.
After collecting the troubleshooting information, you can send it to IBM.
Procedure
1.Generate a trace of the queue manager while messages are going to the dead-letter queue:
• “Tracing on AIX and Linux” on page 376
• “Tracing on Windows” on page 391
• “Tracing on IBM i” on page 381
2.Browse the messages on the dead-letter queue using a sample program such as amqsbcg just before
it is retrieved by the target application.
For example, to browse messages on a queue called 'Target.Queue' on queue manager called 'QMA',
enter this command:
amqsbcg Target.Queue QMA > Target.Queue.browse.txt
Place the browse output file, that is QMA.DLQ.browse.txt directly in the high-level error log
directory, that is:
322 Troubleshooting and Support for IBM MQ
• var/mqm/errors on Linux.
• MQ_INSTALLATION_PATH\errors on Windows.
Both the automatic and the manual collection processes described in Step 3 collect files found in this
directory.
3.Collect the IBM MQ data.
You can collect do this either automatically or manually:
• Collect the data automatically by using the runmqras command as described in “Collecting
troubleshooting information automatically with runmqras” on page 303. Be sure to collect the
runmqras defs, cluster, and trace sections, and to specify your case number as shown in the
following example:
runmqras -section defs,cluster,trace -qmlist QMA -caseno TS001234567
• Alternatively, collect the data manually as described in “Collecting troubleshooting information
manually” on page 306.
4.Send the information that you have collected to IBM.
A good description of the problem and the data is the most important information you can provide to
IBM. Do not send data without providing a description!
For FTP and email instructions, see Exchanging information with IBM Software Support.
To open or update a case, go to the IBM My Support site.
Note: Always update your case to indicate that data was sent.
If you need to speak with IBM Software Support, contact your country representative. If you need to
speak with IBM Software Support in the US, you can call 1-800-IBM-SERV.
Related tasks
“Troubleshooting message problems” on page 177
Collecting information for error message and FFST problems
If you need assistance from IBM Support to resolve a problem when IBM MQ is logging error messages or
writing FFSTs (FDC files) on Multiplatforms, you first need to collect troubleshooting information to send
to IBM Support to help find a solution.
Before you begin
Before you start this task, answer the following questions about the problem:
• What unexpected error messages or FFSTs did you observe on the system?
• What time did the error messages or FFSTs start and when did they stop?
• Were there any changes made to the system before the problem started?
About this task
If the error message or FFST problem is happening right now, or if you are able to reproduce it, you can
generate data to provide more information about the problem.
After collecting the troubleshooting information, you can send it to IBM.
Procedure
1.Generate a trace of the queue manager while error messages or FFSTs are being logged. Consider
generating a high detail trace if you have plenty of disk space.
• “Tracing on AIX and Linux” on page 376
IBM MQ troubleshooting and support 323
• “Tracing on Windows” on page 391
• “Tracing on IBM i” on page 381
2.Collect the IBM MQ data.
You can do this either automatically or manually:
• Collect the data automatically by using the runmqras command as described in “Collecting
troubleshooting information automatically with runmqras” on page 303. Be sure to collect the
runmqras defs and trace sections, and to specify your case number as shown in the following
example for collecting runmqras output from queue manager QMA:
runmqras -section defs,cluster,trace -qmlist QMA -caseno TS001234567
• Alternatively, collect the data manually as described in “Collecting troubleshooting information
manually” on page 306.
3.Send the information that you have collected to IBM.
A good description of the problem and the data is the most important information you can provide to
IBM. Do not send data without providing a description!
For FTP and email instructions, see Exchanging information with IBM Software Support.
To open or update a case, go to the IBM My Support site.
Note: Always update your case to indicate that data was sent.
If you need to speak with IBM Software Support, contact your country representative. If you need to
speak with IBM Software Support in the US, you can call 1-800-IBM-SERV.
Collecting information for hang and high CPU problems
If you need assistance from IBM Support to resolve a problem with IBM MQ performance, hanging or
excessively high CPU usage on Multiplatforms, you first need to collect troubleshooting information to
send to IBM Support to help find a solution.
Before you begin
Before you start this task, answer the following questions about the problem:
• What performance problem or hang did you observe on the system?
• What time did the problem start and when did it stop?
• Which processes were involved in the performance problem or hang?
• Were there any recent changes to the system or to your applications before the problem?
About this task
In order to identify the cause of the problem, it is essential to gather information from the system when
the performance problem or hang is happening, including stack dumps and other debugging data from the
queue managers and applications that are showing the problem.
After collecting the troubleshooting information, you can send it to IBM.
Procedure
1.Generate data from Managed File Transfer processes:
Generate three javacores from the hanging Managed File Transfer process, delaying approximately
one minute between each one.
a)Generate three agent javacores with the fteSetAgentTraceLevel command as shown in the
following example:
324 Troubleshooting and Support for IBM MQ
fteSetAgentTraceLevel -jc AGENTNAME
...
fteSetAgentTraceLevel -jc AGENTNAME
...
fteSetAgentTraceLevel -jc AGENTNAME
where AGENTNAME is the name of the Managed File Transfer agent that is hanging.
b)Generate three logger javacores with the fteSetLoggerTraceLevel command as shown in the
following example:
fteSetLoggerTraceLevel -jc LOGGERNAME
...
fteSetLoggerTraceLevel -jc LOGGERNAME
...
fteSetLoggerTraceLevel -jc LOGGERNAME