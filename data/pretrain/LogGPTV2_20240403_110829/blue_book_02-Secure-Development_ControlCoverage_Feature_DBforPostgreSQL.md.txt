## IMPORTANT: DevOps Kit (AzSK) is being sunset by end of FY21. More details [here](../../../ReleaseNotes/AzSKSunsetNotice.md)
----------------------------------------------
DBForPostgreSqlDescription & RationaleControlSeverityAutomated
Access to Azure Database for PostgreSQL Servers must be granted in accordance with the principle of least privilegeGranting minimum access ensures that users are granted just enough permissions to perform their tasks. This minimizes exposure of the resources in case of user/service account compromise.HighNoSSL connection must be enabled for Azure Database for PostgreSQLEnforcing SSL connections between your database server and your client applications helps protect against 'man-in-the-middle' attacks by encrypting the data stream between the server and your application.HighYesConfigure only the required IP addresses on PostgreSQL server. Do not use 'Any-to-Any' IP range 0.0.0.0 to 255.255.255.255Using the firewall feature ensures that access to the data or the service is restricted to a specific set/group of clients. NOTE: While this control does provide an extra layer of access control protection, it may not always be feasible to implement in all scenarios.HighYesUse the 'Allow access to Azure services' flag only if requiredThe 'Allow access to Azure services' setting configures a very broad range of IP addresses from Azure as permitted to access the PostgreSQL Server. Please make sure your scenario really requires this setting before enabling it. Turning it ON exposes your PostgreSQL Server to risk of attacks from resources (IPs) owned by others in the Azure region.HighYesBackup and Disaster Recovery must be planned for the default Azure Database for PostgreSQL serviceAzure Database for PostgreSQL offers backup/disaster recovery up to 35 days. It also provides the flexibility to choose between locally redundant or geo-redundant backup storage. When processing critical workloads, a team must have adequate backups of the data.MediumYesAdvanced Threat Protection must be enabled for Azure Database for PostgreSQLAdvanced Threat Protection for Azure Database for PostgreSQL provides a layer of security, which enables customers to detect and respond to potential threats as they occur by providing security alerts on anomalous activities.HighYesConsider using virtual network rules for improved isolationVirtual network rules provides isolation for your Azure Database for PostgreSQL by permitting only the specified virtual networks to access the database server.MediumYesDiagnostics logs must be enabled with a retention period of at least 365 daysLogs should be retained for a long enough period so that activity trail can be recreated when investigations are required in the event of an incident or a compromise. A period of 1 year is typical for several compliance requirements as well.MediumYesDiagnostic and activity logs for Azure Database for PostgreSQL should be reviewed periodicallyPeriodic reviews of diagnostics, activity and audit logs ensures that anomalous activity can be identified early enough instead of after a major compromise.MediumNoEnable PostgreSQL server parameters log_connections and log_disconnectionsPostgreSQL sever logging parameters enable log collection of important system events pertinent to security. Regular monitoring of logs can help to detect any suspicious and malicious activity early and respond in a timely manner.MediumYesEnsure server parameter 'connection_throttling' is set to 'ON'Connection throttling protects your server against password guessing and brute force attacks.HighYes