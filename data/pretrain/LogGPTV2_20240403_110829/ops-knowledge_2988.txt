User: Please write a script that can automate the monitoring and alerting of server resource usage.
Assistant: The following is a basic script framework, which can monitor the CPU, memory, hard disk, network and other resource usage, and give an alarm when the usage exceeds the set threshold: ``` #!/bin/sh # Define the monitoring threshold CPU_THRESHOLD=90 MEM_THRESHOLD =80 DISK_THRESHOLD=80 NETWORK_THRESHOLD=100 # Check CPU usage CPU=$(top -bn1 | grep "Cpu(s)" | awk '{print $2 + $4}') if [ "$CPU" -gt "$CPU_THRESHOLD " ]; then echo "CPU usage exceeds threshold: $CPU%" # TODO: Send alarm email/SMS fi # Check memory usage MEM=$(free | awk '/Mem:/ {print int($3/$2 * 100 )}') if [ "$MEM" -gt "$MEM_THRESHOLD" ]; then echo "Memory usage exceeds threshold: $MEM%" # TODO: Send alarm email/SMS fi # Check hard disk space usage DISK=$(df -h | awk '$NF=="/" {printf "%d", $5}') if [ "$DISK" -gt "$DISK_THRESHOLD" ]; then echo "Disk usage exceeds threshold: $DISK%" # TODO: Send alarm email/SMS fi # Check network bandwidth usage NETWORK=$(ifconfig eth0 | grep "RX packets" | awk '{print $5}') if [ "$NETWORK" -gt "$NETWORK_THRESHOLD" ]; then echo "Network usage exceeds threshold: $NETWORK packets/s" # TODO: Send alarm email/SMS fi # Execute monitoring every 10 seconds sleep 10 ``` You need to save the script as an executable file, and then you can use scheduled tasks (such as cron) to run the script regularly for automated monitoring and alarming.