版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
日志参考 15 DHCPSNP
可能原因
丢弃的CHADDR字段值与源MAC不一致的DHCP报文数量超过阈值。
处理步骤
l 请用户检查DHCP报文Chaddr检查告警阈值设置是否合理，是否受到攻击，是否需
要调整Chaddr检查告警阈值。
l 请收集日志文件，并联系技术支持人员。
----结束
15.10 DHCPSNP/4/REQUESTTRAP
日志信息
DHCPSNP/4/REQUESTTRAP: The number of the discarded DHCP request packets that did
not match the binding table exceeded the threshold on the interface. (IfIndex=[IfIndex],
VlanIndex=[VlanIndex], VsiIndex=[VsiIndex], Interface=[IfName], VlanID=[VlanId],
DiscardedNumber=[DiscardPktAccount])
日志含义
丢弃的与绑定表不匹配的DHCP Request报文数超过了告警阈值。
日志参数
参数名称 参数含义
IfIndex 接口索引。
VlanIndex VLAN索引。
VsiIndex VSI索引。
Interface 接口名称。
VlanId VLAN编号。
DiscardedNumber 丢弃的报文数量。
可能原因
丢弃的与绑定表不匹配的DHCP Request报文数超过告警阈值。
处理步骤
l 请用户检查是否受到攻击，是否需要调整DHCP报文绑定表检查告警阈值。
l 请收集日志文件，并联系技术支持人员。
----结束
文档版本 06 (2017-09-12) 华为专有和保密信息 183
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
日志参考 15 DHCPSNP
15.11 DHCPSNP/4/REQUESTLOG
日志信息
DHCPSNP/4/REQUESTLOG: The number of the discarded DHCP request packets that did
not match the binding table exceeded the threshold on the interface. (IfIndex=[IfIndex],
VlanIndex=[VlanIndex], VsiIndex=[VsiIndex], Interface=[IfName], VlanID=[VlanId],
DiscardedNumber=[DiscardPktAccount])
日志含义
丢弃的与绑定表不匹配的DHCP Request报文数超过了告警阈值。
日志参数
参数名称 参数含义
IfIndex 接口索引。
VlanIndex VLAN索引。
VsiIndex VSI索引。
Interface 接口名称。
VlanId VLAN编号。
DiscardedNumber 丢弃的报文数量。
可能原因
丢弃的与绑定表不匹配的DHCP Request报文数超过告警阈值。
处理步骤
l 请用户检查是否受到攻击，是否需要调整DHCP报文绑定表检查告警阈值。
l 请收集日志文件，并联系技术支持人员。
----结束
15.12 DHCPR/3/INVALIDPKT
日志信息
DHCPR/3/INVALIDPKT: An invalid BOOTP packet is received.(InvalidField=[invalid-
field])
日志含义
DHCP中继或者DHCP Snooping设备接收到非法BOOTP报文。
文档版本 06 (2017-09-12) 华为专有和保密信息 184
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
日志参考 15 DHCPSNP
日志参数
参数名称 参数含义
invalid-field BOOTP报文中的非法字段。
可能原因
原因1：
BOOTP报文里的message type报文类型非请求和应答。
原因2：
BOOTP报文里的giaddr字段中填写的IP地址非法。
原因3：
BOOTP报文里的magic cookie为无效值。
处理步骤
l 正常运行信息，无需处理。
----结束
15.13 DHCPR/3/LARGEHOP
日志信息
DHCPR/3/LARGEHOP: The BOOTP request packet is discarded because the hops exceed
the upper limit.
日志含义
DHCP中继收到跳数超限的报文而丢弃了该报文。
日志参数
参数名称 参数含义
无 无
可能原因
DHCP中继设备收到的BOOTP报文跳数超过了限制。
处理步骤
l 正常运行信息，无需处理。
----结束
文档版本 06 (2017-09-12) 华为专有和保密信息 185
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
日志参考 16 DLDP
16
DLDP
关于本章
16.1 DLDP/2/hwDldpUnidirectionalLink_active
16.2 DLDP/2/hwDldpUnidirectionalLink_clear
16.3 DLDP/3/DLDP_AUTHCHECK
文档版本 06 (2017-09-12) 华为专有和保密信息 186
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
日志参考 16 DLDP
16.1 DLDP/2/hwDldpUnidirectionalLink_active
日志信息
DLDP/2/hwDldpUnidirectionalLink_active:Link layer state of the port changed to one way.
(IfIndex=[IfIndex], IfName=[IfName], FaultReason=[FaultReason])
日志含义
在以下两种情况下检测到单通状态就会发送日志。
单邻居的情况：两个设备互连，其中一个设备可以收到对端设备的报文，但是对端却
收不到本端设备发送的报文，这种链路称之为单向链路，该设备进入单通状态，这个
设备就会发送单通日志。
多邻居的情况：某一个设备如果发现它的一个邻居处于单通状态，或者收到disable报
文，该设备就会进入单通状态，该设备会发送单通日志。
日志参数
参数名称 参数含义
IfIndex 发生单通状态日志的端口索引。
Ifname 发生单通状态日志的端口名称。
FaultReason 发生故障的原因。
可能原因
原因1：
single-channel.（单纤故障）
原因2：
complect-channel.（光纤交叉连接）
原因3：
error-loopback.（端口错误环回）
原因4：
control-packet.（控制报文即disable和link-down导致端口阻塞）
处理步骤
l 原因1：single-channel.
a. 执行display interface interface-type interface-num命令，检查相邻设备直连端口
物理状态是否为Down。
文档版本 06 (2017-09-12) 华为专有和保密信息 187
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
日志参考 16 DLDP
n 如果为Down，则请执行步骤2。
n 如果不为Down，则请执行步骤5。
b. 检查相邻设备直连端口Rx线是否松动。
n 如果是，则请执行步骤3。
n 如果不是，则请执行步骤5。
c. 将相邻设备直连端口的Rx线重新插上。
d. 查看日志是否恢复。
n 如果日志没有恢复，则请执行步骤5。
n 如果日志恢复，则请执行步骤6。
e. 请收集日志信息、日志信息和配置信息，并联系技术支持人员。
f. 结束。
l 原因2：complect-channel.
a. 检查相邻设备直连端口Tx/Rx线是否配对相连。
n 如果不配对，则请执行步骤2。
n 如果配对，则请执行步骤4。
b. 将相邻设备直连端口的Tx/Rx线配对相连。
c. 查看日志是否恢复。
n 如果日志没有恢复，则请执行步骤4。
n 如果日志恢复，则请执行步骤5。
d. 请收集日志信息、日志信息和配置信息，并联系技术支持人员。
e. 结束。
l 原因3：error-loopback.
a. 检查故障端口Tx线是否直接插入了本端口的Rx口。
n 如果是，则请执行步骤2。
n 如果不是，则请执行步骤4。
b. 将故障端口的Tx/Rx线重新与目标设备相连。
c. 查看日志是否恢复。
n 如果日志没有恢复，则请执行步骤4。
n 如果日志恢复，则请执行步骤5。
d. 请收集日志信息、日志信息和配置信息，并联系技术支持人员。
e. 结束。
l 原因4：control-packet.
a. 执行display dldp命令，检查相邻设备直连端口是否处于disable状态。
n 如果不是，则请执行步骤2。
n 如果是，则请执行步骤3。
b. 在对端设备上执行display interface interface-type interface-num命令，查看对端
设备接口是否处于物理Down状态。
n 如果是，则请执行步骤4。
n 如果不是，则请执行步骤5。
文档版本 06 (2017-09-12) 华为专有和保密信息 188
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
日志参考 16 DLDP
c. 查看对端设备端口的故障原因，并根据原因处理故障，查看故障端口日志是
否恢复。
n 如果日志没有恢复，则请执行步骤5。
n 如果日志恢复，则请执行步骤6。
d. 查看物理链路是否松动。
n 如果是，请重新插拔光纤使其物理Up，并请执行步骤5。
n 如果不是，则请执行步骤6。
e. 查看本端设备日志是否恢复。
n 如果日志没有恢复，则请执行步骤6。
n 如果日志恢复，则请执行步骤7。
f. 请收集日志信息和配置信息，并联系技术支持人员。
g. 结束。
----结束
16.2 DLDP/2/hwDldpUnidirectionalLink_clear
日志信息
DLDP/2/hwDldpUnidirectionalLink_clear:Link layer state of the port changed to two way.
(IfIndex=[IfIndex], IfName=[IfName])
日志含义
单向链路故障恢复。
日志参数
参数名称 参数含义
IfIndex 端口索引。
Ifname 端口名称。
可能原因
原因1：
单向链路故障恢复。
处理步骤
l 正常运行信息，无需处理。
----结束
文档版本 06 (2017-09-12) 华为专有和保密信息 189
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
日志参考 16 DLDP
16.3 DLDP/3/DLDP_AUTHCHECK
日志信息
DLDP/3/DLDP_AUTHCHECK:The authentication of peer DLDP failed.
(InterfaceIndex=[IfIndex], InterfaceName=[IfName])
日志含义
DLDP认证失败。
日志参数
参数名称 参数含义
IfIndex 发生单通状态日志的端口索引。
Ifname 发生单通状态日志的端口名称。
可能原因
原因1：
接收端和发送端认证信息不一致。
处理步骤
l 执行命令dldp authentication-mode修改认证信息，保证接收端和发送端认证一
致。
----结束
文档版本 06 (2017-09-12) 华为专有和保密信息 190
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
日志参考 17 DRIVER
17
DRIVER
关于本章
17.1 DRIVER/4/hwBoardBecomeMaster
17.2 DRIVER/4/hwBoardLeaveMaster
17.3 DRIVER/5/DC_SPLIIT_PORT_ALM
17.4 DRIVER/5/PATCH_NOT_RUN
17.5 DRIVER/5/SYSMACCHANGE
17.6 DRIVER/4/WBoardStsChanged
文档版本 06 (2017-09-12) 华为专有和保密信息 191
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
日志参考 17 DRIVER
17.1 DRIVER/4/hwBoardBecomeMaster
日志信息
DRIVER/4/hwBoardBecomeMaster: Board changed to the master state.
(EntPhysicalIndex=[EntPhysicalIndex], EntPhysicalName=[EntPhysicalName],
EntityType=[EntityType], EntityTrapFaultID=[EntityTrapFaultID],Reason=Master/Slave
Board Switchover.)
日志含义
备板变为主用主控板。
日志参数
参数名称 参数含义
EntityPhysicalIndex 实体索引
EntPhysicalIndex 实体索引
EntPhysicalName 实体名称
EntityType 实体类型
EntityTrapFaultID 故障码：133120
Reason 产生原因
可能原因
若不是执行主备倒换，则原主用主控板可能产生故障。
处理步骤
步骤1 检查是否因为执行了主备倒换。
l 如果是，无需处理。
l 如果不是，请执行步骤2。
步骤2 display device [ slot slot-id ]查看原主用主控板是否注册成功。
l 如果是，请执行步骤4。
l 如果不是，请执行步骤3。
步骤3 重新拔插原主用主控板，等待启动成功，查看是否注册成功。
l 如果是，请执行步骤4。
l 如果不是，请执行步骤5。
步骤4 确认原主用主控板是否故障。可以选择通过再次执行主备倒换，查看是否成功。
l 如果是，则无需执行其它步骤。
l 如果不是，请执行步骤5。
文档版本 06 (2017-09-12) 华为专有和保密信息 192
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
日志参考 17 DRIVER
步骤5 请收集告警信息、日志信息和配置信息，并联系技术支持人员。
----结束
17.2 DRIVER/4/hwBoardLeaveMaster
日志信息
DRIVER/4/hwBoardLeaveMaster: Board leave master state.
(EntPhysicalIndex=[EntPhysicalIndex], EntPhysicalName=[EntPhysicalName],
EntityType=[EntityType], EntityTrapFaultID=[EntityTrapFaultID],Reason=Master/Slave
Board Switchover.)
日志含义
主用主控板退出主用状态。
日志参数
参数名称 参数含义