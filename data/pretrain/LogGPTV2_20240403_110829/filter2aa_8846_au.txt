么是配置错误，要么就是非法的流量。
40、两个联网的蜜罐就是蜜网，蜜罐可以延迟入侵者的侵入时间，可以
放一些足以乱真的假文件，攻击者在蜜罐里面花费时间越长，管理员调
查的时间就越多，很多安全专家认为蜜罐能够有效防范零日攻击。通常
将蜜罐和蜜网放在虚拟网络里，可以用快照。
41、关于蜜罐，有个引诱（Enticement）和诱捕（Entrapment）的问题，
只要不是积极唆使访问者访问蜜罐然后控诉其入侵，就行，否则就是非
法诱捕。
42、伪漏洞通常被用在蜜罐中，用来迷惑攻击者，让他们以为成功穿透
系统。但并不是真的漏洞。蜜罐包含了伪漏洞和伪数据，都是为了诱惑
攻击者。
43、填充单元（Padded	cell）与蜜罐类似，当IDS检测到入侵者时，会把
入侵者自动转移到填充单元，这里有实际的网络布局，但入侵者不能执
行任何恶意活动，也不能访问任何机密数据。可以理解为网络的模拟环
境。
44、警告框将基本的策略准则通知给用户和入侵者，ᨀ示他们将会被审
计和监控，措辞很重要，由于未授权用户也能看到，所以要写上“禁止
非法入内”（no	trespassing	）之类的话。也就是说，对授权和非授权用
户都通知到，如果有非授权活动，将被起诉。
45、反恶意软件（anti-malware）以前将注意力放在病毒上，现在扩展到
木马、蠕虫、间谍软件和rootkit等。一个系统上只安装一个反恶意软件，
否则会互相干扰。
46、有许多方法防范恶意软件，有的防火墙有内容过滤能力（病毒防火
墙），有的邮件服务器能过滤恶意代码。
47、用户的权限就是恶意应用的权限，用户权限很低的时候，连安装软
件都不可以。所以最小特权原则是有帮助的。
48、kim给larry发了个笑话，带毒，要教育kim，用公司网络发笑话是不
对的，larry也要教育，打开与工作无关的附件也不对。
49、白名单和黑名单都可以有效阻止未经授权的应用程序，iOS就是一个
典型的白名单例子，只能从苹果商店安装应用。但越狱的iOS设备，可以
对操作系统进行根级别的访问。
50、下一代防火墙有统一威胁管理（unified	threat	management	，UTM）
将几种防火墙的过滤功能结合了起来，包括包过滤防火墙、状态监测、
识别恶意流量、识别恶意软件、IDS／IPS。
51、如果组织外包了服务，那么组织应该向外部表明，这些第三方外包
公司，也是遵守安全要求的。比如PCI	DSS会要求组织保证外包也能遵守
PCI	DSS。换言之，组织不能外包责任。
52、做渗透测试（简称pentest）的时候，要避免业务中断，做测试前，
得到高级管理层的批准是非常重要的（很多人坚持书面批准，写明风
险）。如果可能，在测试系统上作渗透测试，避免影响生产。
53、渗透测试的目的：确定系统对攻击的容忍度；识别员工检测和响应
攻击的能力；识别可以增加的控制措施（比如加个WAF）。
54、内部员工在没有授权的情况下做pentest，组织可能会将他们的行为
视为非法攻击。
55、渗透测试类型：零知识黑盒测试，全知识白盒测试，部分知识灰盒
测试（比如只是知道网络结构和一些配置细节）。
56、白盒（又称水晶盒、透明盒）了解系统版本和打补丁情况，知道所
有配置，能访问源码，
白盒能更经济，更有效定位漏洞，发现漏洞时间也会比较短。
57、全知识团队（比如安全管理人员）有时候往往会有盲点，不会全面
测试每一种可能性。黑盒和灰盒会测得比较充分。
58、渗透测试经常使用社会工程学技术。教育往往是缓解这类攻击的最
有效方法。
59、测试报告是敏感信息。报告概述具体的漏洞、漏洞如何利用、建议。
60、道德黑客（Ethical	Hacking）就是白帽子，就是合法搞渗透测试的人，
了解网络安全并知道如何破解安全性，却不为自己牟利的人，道德黑客
永远停留在法律允许范围内。道德黑客使用了黑客的原始含义。
61、日志将活动（event）记录到日志文件或数据库中，将日志（logging）
和监控（monitoring）联合起来，可以ᨀ供安全的可问责性。
62、识别和认证（identification	and	authentication	）是可问责性的先决条
件，否则有人冒充Darril删除文件，Darril可能就会面临错误指控。
63、通常的日志类型：安全日志、系统日志、应用程序日志、防火墙日
志、代理日志、变更日志
安全日志：记录对资源的访问，如文件、文件夹、打印机等，访问、修改、删
除文件时，安全日志都能够记录下来。
系统日志：系统、服务的开启、关闭等等，主要是怕有人在系统停机和重启之
间，可能会用光盘或U盘启动系统作案，或者把服务关了作案。
应用程序日志：开发人员可以选择在应用程序日志中做哪些记录。
防火墙日志：允许的流量或阻止的流量都可以记录。防火墙日志一般不记录数
据包的实际内容。
代理日志：主要是代理服务器的日志，代理日志记录了哪些用户访问了哪些网
站，用了多长时间。
变更日志：记录变更请求、批准和系统的实际变更。作为DRP（灾难恢复计
划）的一部分，变更日志很有用，灾难恢复时使用变更日志，有助于将系统还原。
64、日志功能通常都是操作系统的自带功能，可以让绝大多数应用系统
和服务使用。对于特权账户的活动（event），一定要记录。
65、保护日志文件免受未授权的访问和修改很重要（否则证据就没
了！）。可以在中央系统上存储日志的副本，对日志文件的备份也很重
要，可以保存一年、三年、甚至可以无限期保存。不需要时，应及时销
毁。如果法规要求保存一年，就绝不要保存十年，否则浪费时间和精力。
66、“监控”使得员工能积极遵守安全策略，意识到日志能够记录活动
的用户，不太会尝试绕过安全控制。所以说，审计跟踪是一种威慑手段。
67、审计踪迹（Audit	Trails），主要是日志中的记录，通过查看这个，安
全专业人员重建导致事件的条件和系统状态。
68、日志的时间戳很重要，网络时间协议NTP服务器就很重要，系统应该
和NTP同步。
69、一些日志文件可以捕获应用程序崩溃时的内容，比如转储文件
（crash	dump	file）可以帮助诊断问题。
70、日志分析应该是周期性的任务（而不是出了事才看），可以检测潜
在的问题，可以手动看，也可以用自动化工具来分析。
71、有很多应用程序可以监控网络上的系统，比如SIEM、SEM、SIM，指
的是安全信息和事件管理。这些工具为组织ᨀ供了系统事件的实时分析。
监控网络流量，读取日志，也可能需要装很多代理。使用数据挖掘技术。
72、还有一些监控工具可以跟踪系统的版本信息、是否打了补丁、有无
安装未授权软件等等。类似青藤云安全。
73、统计学抽样（Statistical	sampling）使用精确的数学函数从大量数据
中抽取有意义信息，允许审计人员快速地从审计跟踪中确定重要的问题；
统计学抽样是建立在科学的基础上的，可以通过抽样比较准确的反映真
实情况。虽然也有不真实的风险。
74、阀值级别（Clipping	Levels），是一种非统计抽样（nonstatistical
sampling），它只选择超过阀值平均值的事件，如果事件未达到此阀值，
系统就会忽略该事件。比如阀值设为30分钟内有5次或5次以上失败登录
时才发布警报。其实这可理解为一种超出基线就处罚异常的报警。注意：
非统计抽样是任意抽样，审计程序有自由裁定权（discretion）。这种方
法不能ᨀ供整体数据的精确代表值，可能会忽略未达到阀值的事件。然
而这更便宜、更容易实现。
75、由于日志太大了，可以用抽样的方法。统计抽样则是在统计了的情
况下再进行的抽样调查，更可靠更精确。非统计抽样要依靠专家来判断
是否有问题。这两种方法都被认为是用来概括大量数据的有效方法。
76、其他监控：除了日志，CCTV也是一种监控工具。击键监控是监控用
户在物理键盘上进行击键的行为。视频录屏可以执行可视化监控。只有
在极端环境下，击键监控才能实际作为一种审计和分析用户活动的方法。
77、其他监控：许多击键监控的组织都通过雇佣协议、安全策略和登录
警告标题来通知经过授权或未经授权的用户存在这样的监控措施。
78、其他监控：流量分析和趋势分析也都是监控的形式，他们对数据包
的流（而不是内容）进行检查，也被称为网络流量监测。如果有一名员
工的账户发送大量的电子邮件给别人，就可能表明该员工的系统中木马
了。
79、出口监控（Egress	monitoring），监控出战的流量，防止数据泄漏。
DLP就是干这个的，主要有两种，基于网络的和基于终端的。
基于网络的DLP：对不加密的流量有深层次检测能力（rar），但对于加
密的，就没有办法了，APT攻击都会加密后再传输的。
基于终端的DLP：可以防止用户把敏感数据复制到USB闪存中。也可以
阻止对某些含关键字的文档的拷贝和打印，可以做的很多，比如终端安
全平台、保密监管平台。
80、隐写术（steganography）在文件中嵌入信息，如果有一个可疑文件
的源文件，就可以检测隐写术。组织可以定期检测很少变化哈希值的内
部文件，如果发现内部员工发出文件的哈希值和原始文件的不一样，就
说明可能含有隐藏信息。
81、水印（watermarking），数字水印是一种在数字文件中秘密嵌入的标
记。比如电影数字拷贝每个副本都有一个不同的标记，可以追踪是谁盗
版了电影。DLP能检测到水印，如果从水印中识别到敏感信息，就会阻止
并向安全人员发出警报。
82、审计是一种针对环境的有条理的审查方式。审计人员负责测试和验
证安全策略或法规的具体落实和相关的过程、程序，通过检查使它们满
足组织的要求，并且还验证工作人员是否遵循这些过程。审计有两重含
义，一个是审计日志和使用监控工具跟踪活动，一个是检查或评估
（Inspection	or	Evaluation）。
83、明确并坚持审计频率是很重要的，通常按照风险的大小来决定审计
的频率（审计是需要时间和成本的，所以对特权账号的审计频率会高一
些）。
84、不执行审计，就是管理层没有Due	Care；审计可以由内部人员做，
也可以由外部做。
85、有关访问控制的审计有两大类，一种是访问审查审计（Access	review	
audit），一种是用户权限审计（user	entitlement	audit）。
访问审查审计：检查访问和账户管理是否符合安全策略，比如检查一
个有较高权限的用户确实是由于工作需要，检查数据是否已经分类，用
户是否知晓分类，用户是否知道自己为什么有高权限，检查用户确保他
们没有过多的权限（clearance）。
用户权限审计：检查用户是否被授予过多的特权（具体的操作特
权）。
86、要对高级别管理组进行审计（High-level	administrator	group），看是
不是有不该在里面的人，可以通过自动化工具监视特权的执行（比如添
加用户），可以通过检查审计踪迹来查看是谁干的。要查看在删除一个
高权限用户这方面，有没有制定流程。
87、许多组织要求管理员拥有两个账户（Dual	administrator	accounts），
一个作为日常使用，一个拥有特权。因为如果有恶意软件感染，用户登
录特权后，恶意软件就可以使用该账户的特权，如果管理员只用工作时
间的十分之一使用特权账户，那么被恶意软件感染的机会就会少。审计
员也可以验证管理员是否适当地使用特权账户，因为按道理他应该用十
分之一的时间登录特权账户，这很容易查闯隼础
88、注意：管理员账户的密码要更长，一般人的口令要8个字符，那管理
员的最少要为15个字符。
89、安全审计至少要看这几个方面：补丁管理、漏洞管理、配置管理、
变更管理。
90、审计报告要包含：审计目的、审计范围、发现问题、具体细节（问
题、事件、条件）、标准和基线、原因、影响、建议的解决方案。
91、审计报告通常包含敏感信息，所以要有一个分类标签，可以访问这
个报告的人：高层管理人员、创建报告的人、负责更正的人。 可以修
改为只给相关的人看相关的内容，高级管理人员可以只看简洁的概述或
总结。
92、审计报告完成后，要按照安全策略，将报告ᨀ交给指定的接收人，
并且经常需要接收人签字。如果其中含有严重安全违规问题或履职问题
时，员工需要将其升级到更高层次的领导。
93、当问题严重到不能等到最终报告一起汇报的时候，审计师可以发临
时报告。