变
量
措
述
BASH
用来调用sbell的完整文件名
BASHOPPS
允许冒号分隔列表形式的shell选项
BASHPID
当前bash shel的进程ID
BASH_ALIAS&D
含有当前所用别名的数组
BASH_ARGC
当前子函数中的参数数量
BASH_ARGV
含有所有指定命令行参数的数组
BASH_CHDS
含有命令的内部散列表的数组
BASH_COMAND
当前正在被执行的命令名
BASH_BV
如果设置了的话，每个bash脚本都会会试在运行前执行由该变量定文的起始文件
BASH_EXECVTIO_STRING
在-c命令行选项中用到的命令
BASH_LINEH0
含有脚本中每个命令的行号的数组
BASH_RSNATCH
含有与指定的正则表达式匹配的文本元素的数组
BASH_S0URCE
含有hell中已声明函数所在源文件名的数组
BASH_SUBSH&LL
当前shell生成的子shell数目
BASH_VERSINFO
含有当前bash shell实例的主版本号和次版本号的数组
BASH_VERSION
当前bash shell实例的版本号
BASH_XTRAC&FD
当设置一个有效的文件描述符整数时，跟踪输出生成，并与诊断和错误信息分离开
文件描逐符必须设置-×启动
COLDN0NS
含有当前bash shell实例使用的终端的宽度
COMP_CHORD
含有变量COM_WORDS的索引I值，COND_WORDS包含当族光标所在的位置
COMP_KEY
调用补全功能的按键
COMP_LINE
当前命令行
COMP_P0INT
当前光标位置相对干当菌命令起始位置的索引
COMP_TYPE
补全类型所对应的整数值
COMP_HORDBREAKS
在进行单词补全时用作单词分隔符的一组字符
COMP_XORDS
含有当族命令行上所有单词的数组
COMPREPLY
含有由shell函数生成的可能补全码的数组
COPROC
含有用于匿名协程IO的文件拖述符的数组
DIRGTACK
含有目录栈当前内容的数组
EACS
如果设置了该环境变量，则shell认为其使用的是emacs shel缓冲区，同时禁止行编
辑功能
EV
当shelC以POSIX模式调用时。每个bash脚本在运行之前都会执行由该环境变量所定
义的起始文件
EUID
当前用户的有效用户ID（数字形式）
FCEDIT
fc命令使用的默认编辑器
FIGNORS
以冒号分隔的后级名列表，在文件名补全时会拨忽略
FUNC(AXE
当前执行的shell函数的名称
FUICNEST
嵌套函数的最高显级
---
## Page 610
附录Abash命令快速指南
595
（续）
GLOBIGMIOR&
以冒号分隔的模式列表。定义了文件名展开时要忽略的文件名集合
GROUPS
含有当前用户属组的数组
histchars
控制历史记录展开的字符（最多可有3个）
HISTCYD
当前命令在历史记录中的编号
HISTCONTROL
控物娜些命令留在历史记录列表中
HISTFILE
保存shel历史记录列表的文件名（默认是.bash_history)
HISTFILESIZE
保存在历史文件中的最大行数
HISTIGIORE
以冒号分隔的模式列表，用来决定哪些命令不存进历史文件
HISTSIZE
最多在历史文件中保存多少条命令
HISTIMEFOFNAT
设置后。决定历史文件条目的时间器的格式字符申
HO6TFILE
含有she目在补全主机名时读取的文件的名称
HOSTNAME
当前主机的名称
HOSTTYFE
当前运行bash shell的机器
IGNORESOF
shel在退出前必须收到连续的ECP字符的数量。如果这个值不存在，默认是1
INPTSC
readine初始化文件名（默认是inputrc)
LA3
shel的语言环境分类
IC_ALL
定义一个语言环境分类，它会覆盖LAIG变量
LC_COLLATE
设置对字符申值排序时用的对照表顺序
LC_CTYPE
决定在进行文件名扩展和模式匹配时。如何解释其中的字符
LC_KESSAGRS
决定解释前置美元符（s）的双引号字符串的语言环境设置
LC_NUMERIC
决定格式化数字时的所使用的语言环境设置
LINENO
即本中当前执行代码的行号
LINES
定义了终端上可见的行数
HACHTYPE
用“cpu-公司-系统”格式定义的系统类型
NAILCHECK
shel多久查看一次新邮件（以秒为单位。默认值是60)
HAPFIL&
含有napfile命令所读入文本的数组，当没有给出变量名的时候。使用该环境变量
0LDPWD
shell之前的工作目录
OPTER
设置为1时，bash sae目会显示getopts命令产生的错误
38A180
定义了shell运行的提作系统
PIPESTATUS
含有前台进程退出状态码的数组
POGIXLY_CORR8CT
如果设置了该环境变量，bash会以LPOSIX模式启动
PPID
bash shell父进程的PID
PRONPT_COMNAND
如果设置该环境变量。在显示命令行主提示符之前会执行这条命令
DS1
主命令行提示符字符申
---
## Page 611
596
附录Abash命令快逸指南
（续）
变
量
措
述
P82
次命令行提示符字符串
PS3
aelect命令的提示符
PS4
如果使用了bash的-x选项，在命令行显示之前显示的提示符
PD
当前工作目录
RAXDOX
返回一个0-32767的随机数，对其赋值可作为随机数生成器的种子
READLINE_LINE
保存了readlime行线冲区中的内容
READLINE_POTVT
当前readine行缓冲区的插入点位置
REPLY
read命令的数认变量
SECONDS
自shell启动到现在的秒数，对其赋值将会重置计时器
SHELL
shell的全路径名
SHELL/0PT8
已启用bash shell选项列表，由冒号分隔
SHL/L
表明shell层级，每次启动一个新的bash shell时计数加1
TIXEFORHAT
指定了shell显示的时间值的格式
TMOUTT
aelect和read喻令在没输人的情况下等特多久（以秒为单位）。默认值为零，表示
无限长
TMPDIR
如果设置成目录名，shell会将其作为临时文件目录
UID
当前用户的真实用户ID（数字形式）
可以用aet内建命令来显示这些环境变量。对于不同的Linux发行版，开机时设置的默认shell
环境变量经常会不一样。
---
## Page 612
附录B
sed和gawk快速指南
本章内容
 sed编辑器基础
gawk必知必会
如
果要在shell脚本中进行数据处理，很可能需要使用sed或gawk程序（有时两者都要用）。
本附录提供了一份sed和gawk的快速参考。在shell脚本中处理数据时，这应该能派上
用场。
B.1sed编辑器
sed编辑器可以基于命令来操作数据流中的数据，这些命令要么从命令行中输人，要么保存
在命令文本文件中。它每次从输人中读取一行数据，并用提供的编辑器命令匹配该数据，按命令
中指定的操作修改数据，然后将生成的新数据输出到STDOUT。
B.1.1启动sed编辑器
sed命令的格式如下：
sed options script file
options参数允许你定制sed命令的行为，可包含表B-1中所列的选项。
表B-1sed命令选项
选
项
描
述
将scripc中指定的命令添加到处理输人时运行的命令中
-ffile
将ri1c文件中指定的命令添加到处理输入时运行的命令中
-
不要为每条命令产生输出，但会等待打印命令
script参数指定了作用在数据流上的单条命令。如果需要不止一条命令，要么用-e选项在
命令行上指定它们，要么用-选项在一个单独文件中指定它们。
---
## Page 613
598
附录Bsed和gawk快逸指南
B.1.2sed命令
sed编辑器脚本含有sed针对输入流中的每行数据执行的命令。本节将会介绍一些较常见的sed
命令。
1.替换
=命令会替换输入流中的文本。=命令的格式如下。
α/pattexn/repzacesent/flaga
其中pattern是要被替换的文本，replacement是sec要插到数据流中的新文本。
flags参数控制如何进行替换。有4种类型的替换标记可用。
口一个数字，表明该模式出现的第儿处应该被替换。
口g：表明所有该文本出现的地方都应该被替换。
口p：表明原来行中的内容应该被打印出来。
wfile：表明替换的结果应该写人到文件file中。
在第一类替换中，你可以指定sed编辑器应该替换第几处匹配模式的地方。举个例子，你可
以用数字2来只替换该模式第二次出现的地方。
2.寻址
默认情况下，你在sed编辑器中使用的命令会作用在文本数据的所有行上。如果你想让命令
只作用在指定行或一组行上，就必须使用行寻址（line addressing）。
在sed编辑器中，有两种形式的行寻址：
口行区间（数字形式）
口可以过滤出特定行的文本模式
两种形式使用相同的格式来指定地址。
address command
当使用数字形式的行寻址时，我们通过行在文本流中的位置来引用行。sed编辑器会给数据
流中的第一行分配行号1，然后对接下来的每行依次顺序增加。
$ sed·2,3s/Gog/cat/* datal
另一个限制命令作用在哪些行上的方法有点复杂。sed编辑器允许你指定一个文本模式，它
会用这个文本模式来为命令过滤出行，格式如下。
/pattezn/command
必须用斜线来将你指定的pattern包围起来。sed编辑器会将commana只作用在包含你指定
的文本模式的行上。
$ sed */rich/s/baah/csh/* /etc/passvd
这个过滤器能够找到含有文本rich的行，然后用csh来替换文本bash。
也可以为某个特定地址将多条命令放在一起。
addreas (
comand2
---
## Page 614
附录Bsed和gawk快速指南
599
comsand2
comnand3)
sed编辑器会将你指定的每条命令作用在匹配指定地址的行上。sed编辑器会处理和地址行对
应的每条命令。
$ sed ·2[
> α/fox/elephant/
> α/dog/cat/
sed编辑器将每一条替换命令都作用在数据文件的第二行上。
3.删除行
删除（delete）命令a与它的名字十分相配。它会删除所有与提供的地址模式匹配的文本行。
使用删除命令时要小心，因为如果你忘记加地址模式，所有的行都会被从数据流中删掉。
[esep ,p, pes $
显然，删除命令跟指定的地址一起使用时才最有用。它允许你从数据流中删除特定的文本行，
要么通过行号指定：
gesep ,pe, pes $
要么通过特定的行区间指定：
$ sed '2,3d' data6
sed编辑器的模式匹配功能也适用于删除命令。
geqep ,p/t xoqumu/, pes $
只有匹配指定文本的行才会被从流中删掉。