Oimage
OFlash
OVideo
OAudlo
OJSON
Feed
Search:
○AII
Go
2014-07-17 16:14:56image.baids.cm/eata/imgisf7pictur_d104878412168coln
Date
Url
Slze
Method
T86
Info
2014-07-17 16:14:5Cimage.baids.cem/eata/imgafe7gicture_J4=10487798245&colun
13D
GET
2014-07-17 16:14:421mage.baids.cem/eata//mgafe/7gicturs_14=104878462358colun
2014-07-17 16:14:46 Image.balda.com/6ata/Imgafe7plcture_14=121565380168colan
T96
13D
596
GET
nfo.
2014-07-17 16:14:37 whols.peo
162
GET
n
2014-07-17 16:14:37pos.baieu.cem/eeem7ec=g23128eal=1.8cfv=64cga18col=zh
cn/ipisan.jsp?ca
38243
GET
2014-07-17 16:14:36.8de5z8.v.9dm8ster.00m.cn/I/e20610,b200450151,c2289,0,m
0
nfe.an
2014-07-17 16:14:36stat.s8.sdo.0om/7actio
=gm&src=Admasterduid=140717093131
2
13D
nfu.xml
2507
GET
2014-07-17 16:14:36emt
135
nfo.xn
hline.eem.cn/plc/3604.html
GET
nfo.xn
2014-07-17 16:13:58imag9.baida
com/@ata/imgiafe7gicture_4=104878094394colun
TL6
GET
51865
info.an
GET
inlean
2014-07-17 16:13:44 image.baidu.com/channel/getpicinfo7idlist=12156538016%2C3
431
GET
2014-07-17 16:13:43)
7191
GET
2014-07-17 16:13041)
com/chasnel/wallpaper
27144
GET
1|2|3|4|5|6|7|8
1 of 8
图6.29显示了捕获文件中的站点
（11）该界面显示了捕获文件中所有访问的站点，从该界面的底部可以看到共有8页
信息。在该界面也可以进行搜索。例如搜索baidu，将显示如图6.30所示的界面。
• 187 *
---
## Page 200
第2篇信息的收集及利用
Xplico Webs. - lceweasel
口
Ele Edt yjiewHigtory BookmarksIoolsHelp
 Xplico .:Webs.
Most Visited
Illoffensive Security , Kali Linux , Kali Docs Exploit-DB Aircrack-ng
Help
Forut
Change passwordLicenses Logout
For a complete vlew of html page set your browser to use Proxy, and
point it to Web server.
Web URLs:
HtmI
Oimage
Flash
OAII
PA
OAudio
Seareh:baidu
OJSON
Go
Date
Uri
Size
981
Method
GET
nfeam
Into
2014-07-17 16:14:501mage.be/0u.0om/dns/ngnfo7pfetare_/01048779e
972
2014-07-17 16:14:46imags.beidu.0om/dns/ingnfo7pietare_/61215653
GET
Infeoml
981
2014-0717 16:14:42mag.aiu.0m/aa/ing7pictare_01048784
GET
infaem
2014-0717 16:14:37gos.bai0u.0om/eom7cec=g23128dai=18(=68cps
985
GET
38243
nfa.on
GET
nfo.om
2014-07-17 16:14:36wrw.baids.cem/ur/scun7ede=%E3%80%90Win7%E5%
2507
GET
nfo.om
2014-07-17 16:14:36cmt.pconlise.cem,es/entry,jsp?arl=http%34//eallpep)
GET
2014-07-17 16:13:58mblum/da/ngn7piete61048780
971
GET
2014-07-17 16:13:47image.haidu.0om/4eta/newindex7eel=%E5%A3%81%
GET
nfeem
51865
wfa.om
2014-07-17 16:13:44image.3aidu.09m/6hannet/grtpicinfe7ielist=121565?
7191
431
L3D
2014-07-17 16:13:43imaga.balidu.0om/ehannel/listjeen7pn=08m=248tag1
GET
27144
nfa.om
2014-07-17 16:13:41 imxge.baidu.0om/channel/wallpaper
2014-07-17 16:13:36imaga.ba/du.0om/
GET
40967
nfo.m
2014-07-17 16:13:33ww.baide.cen/
GET
15075
nfaum
2014-07-17 16:13:19pes.he/6u.00m/eom7ee
40507
GET
GET
nfeom
201.4-0717 16:13:18ges.eiou.00m/m7e=gt5-84dai34ef6&cpe=1
42525
dey
1 |2 |3
1.0f3.
图6.30搜索结果
（12）从该界面可以看到，搜索的结果共有3页。如果想查看目标系统访问过的图片，
单击左侧栏中的Image选项，将显示如图6.31所示的界面。
Xxlic. .:Webs. - Iceweasel 
-
EileEdit ViewHigtoryBookmarksIoolsHelp
 Xplico Webs..
+
mages
+ Google
Most Visited
BIOffensive Security , Kali Linux
, Kali Docs Exploit-DB  Aircrack-ng
Xplico Interface
Forum
Legour
O Case
Search:
Go
evlous
61811911111
1 of 45
图6.31
访问的图片
·188 *
---
## Page 201
第6章漏洞利用
（13）从该界面可以看到目标系统访问过的所有图片信息。
6.5免杀Payload生成工具Veil
Veil是一款利用Metasploit框架生成相兼容的Payload工具，并且在大多数网络环境中
能绕过常见的杀毒软件。本节将介绍Veil工具的安装及使用。
在KaliLinux中，默认没有安装Veil工具。这里首先安装Veil工具，执行如下所示的
命令：
root@kali:~# apt-get install veil
执行以上命令后，如果安装过程没有提示错误的话，则表示Veil工具安装成功。由于
安装该工具依赖的软件较多，所以此过程时间有点长。
启动Veil工具。执行命令如下所示：
root@kali:~# veil-evasion
执行以上命令后，将会输出大量的信息。如下所示：
[*]Executing ./setup/setup.sh
Veil-Evasion Setup Script I [Updated]: 01.15.2015
[Web]:https://www.veil-framework.com I[Twitter]:@VeilFramework
[*] Initializing Apt Dependencies Installation
[*] Adding i386 Architecture To x86_64 System
[*] Updating Apt Package Lists
命中 http://mirrors.ustc.edu.cn kali Release.gpg
命中 http://mirrors.ustc.edu.cn kali/updates Release.gpg
命中 http://mirrors.ustc.edu.cn kali Release
命中 http://mirrors.ustc.edu.cn kali/updates Release
命中http://mirrors.ustc.edu.cn kali/main Sources
命中 http://mirrors.ustc.edu.cn kali/non-free Sources
命中 http://mirrors.ustc.edu.cn kali/contrib Sources
命中 http://mirrors.ustc.edu.cn kali/main amd64 Packages
命中 http://mirrors.ustc.edu.cn kali/non-free amd64 Packages
命中 http://mirrors.ustc.edu.cn kali/contrib amd64 Packages
获取：1http://mirrors.ustc.edu.cn kali/main i386 Packages [8,474 kB]
命中 http://http.kali.org kali Release.gpg
命中 http://security.kali.org kali/updates Release.gpg
命中 http://http.kali.org kali Release
· 189 ·
---
## Page 202
第2篇信息的收集及利用
忽略http://http.kali.org kali/non-free Translation-en
下载17.8MB，耗时20秒（859kB/s）
正在读取软件包列表..完成
[] Installing Wine i386 Binaries
正在读取软件包列表..完成
正在分析软件包的依赖关系树
正在读取状态信息..完成
将会安装下列额外的软件包：
gcc-4.7-base:i386 libasound2:i386 libc-bin libc-dev-bin libc6 libc6:i386
libc6-dev libc6-i686:i386 libdbus-1-3:i386 libdrm-intel1:i386
libdrm-nouveau1a:i386libdrm-radeon1:i386libdrm2:i386 libexpat1:i386
libffi5:i386 libfontconfig1:i386 libfreetype6:i386 libgcc1:i386
[*] Cleaning Up Setup Files
[+]Updating Veil-Framework Configuration
Veil-Framework configuration:
[*] OPERATING_SYSTEM = Kali
[*] TERMINAL_CLEAR = clear
[*] TEMP_DIR = /tmp/
[] MSFVENOM_OPTIONS =
[] METASPLOIT_PATH = /usr/share/metasploit-framework/
[*] PYINSTALLER_PATH = /usr/share/pyinstaller/
[] VEIL_EVASION_PATH = /usr/share/veil-evasion/
[] PAYLOAD_SOURCE_PATH = /root/veil-output/source/
[] Path /root/veil-output/source/* Created
[] PAYLOAD_COMPILED_PATH = /root/veil-output/compiled/
[*] Path /root/veil-output/compiled/ Created
[*]Path /root/veil-output/handlers/ Created
[*] GENERATE_HANDLER_SCRIPT = True
[*] HANDLER_PATH = /root/veil-output/handlers/
[] HASH_LIST = /root/veil-output/hashes.txt
[*] VEIL_CATAPULT_PATH = /usr/share/Veil-Catapult/
[] Path /root/veil-output/catapult/ Created
[] CATAPULT_RESOURCE_PATH = /root/veil-output/catapult/
[*]Path %etc/veil Created
ConfigurationFileWritten To'/etc/veil/settings.py
以上信息只有在第一次运行Veil时才显示。在此过程中，初始化一些脚本、软件包列
表、更新配置及安装需要的软件包。在此过程中以图形界面的形式依次安装了Python及它
的两个模块pywin32-218和pycrypto-2.6。下面依次进行安装。首先弹出的对话框，如图6.32
所示。
该界面是安装Python的初始界面。这里使用默认设置，单击Next按钮，将显示如图
6.33所示的界面。
在该界面单击Next按钮，将显示如图6.34所示的界面。该界面提示C：Python27已存
在，确认是否要覆盖已存在的文件。这里单击Yes按钮，将显示如图6.35所示的界面。
·190 ·
---
## Page 203
第6章
漏洞利用
Python 2.7.5 Setup
Python 2.7.5 Setup
tall Python 2.7.5 fer all
Select Desf
ation Directory
n 2.7.5 fle
Intaoues
uo|Now
Install just for me (no
python
python
windows
windows
Cance
Next >
图6.32Python 初始界面
图6.33选择Python安装位置
dnqes S'Z'z uould
mize Pythen 2.7.5
ory tor the Python: 2.7.5 fie
python27
w
dnsas S'z uod
Ad
sant to
on27), esst
python
SMOPUIM
CIPython27
OMIM
OWS
Dik ysage
Advanced
图6.34确认Python的安装位置
图6.35
自定义Python
在该界面自定义安装Python的一些功能。这里使用默认的设置，单击Next按钮，将
显示如图6.36所示的界面。
Pythen 2.7.5 Setup
houad wdertp,S:
thon for Window
python
windows
Glck: the Finich button to esit the Instaler
图6.36安装完成
·191 ·
---
## Page 204
第2篇信息的收集及利用
该界面提示Python已经安装完成。此时单击Finish按钮，将显示如图6.37所示的界面。
Setup
PVTHON
图6.37安装pywin32-218模块界面
该界面是要求安装pywin32-218模块。这里单击“下一步”按钮，将显示如图6.38所
示的界面。
Setup
POTHON
图6.38设置向导
这里使用默认设置，单击“下一步”按钮，将显示如图6.39所示的界面。
Setup
PVTHON
图6.39准备安装
· 192 ·
---
## Page 205
第6章漏洞利用
该界面用来确实是否要开始安装。如果确认配置正确的话，单击“下一步”按钮，将
显示如图6.40所示的界面。
Setup
PVTHON
图6.40安装完成
从该界面可以看到pywin32-218模块已经安装完成。此时单击“结束”按钮，将显示
如图6.41所示的界面。
Setup
PVTHON
下9N>
图6.41安装pycrypto-2.6模块初始界面
该界面提示需要安装pycrypto-2.6模块。这里单击“下一步”按钮开始安装，如图6.42所示。
dnaas
POUTHON
图6.42设置向导
· 193 ·
---
## Page 206
第2篇信息的收集及利用
这里使用默认设置，单击“下一步”按钮，将显示如图6.43所示的界面。
Setup
PVTHON