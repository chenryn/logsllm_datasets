# Understanding Mobile App Usage Patterns Using In-App Advertisements

## Authors
- Alok Tongaonkar<sup>1</sup>
- Shuaifu Dai<sup>2,3</sup>
- Antonio Nucci<sup>1</sup>
- Dawn Song<sup>3</sup>

### Affiliations
1. Narus Inc, USA
2. Peking University, China
3. University of California, Berkeley, USA

### Contact Information
- {alok, anucci}@narus.com
- [PI:EMAIL]
- [PI:EMAIL]

## Abstract
In recent years, the proliferation of mobile devices such as smartphones and tablets has led to a growing need for network operators to understand the usage patterns of mobile applications (apps) on these devices. Previous studies have relied on instrumented devices or HTTP User-Agent fields to identify apps in network traces. However, these methods are not scalable or reliable, especially for Android platforms where generic strings are often used in the User-Agent field. This paper introduces a novel method for identifying Android apps in network traces using in-app advertisements. Our preliminary experiments with real-world traces demonstrate the potential of this technique for large-scale mobile app usage pattern studies. Additionally, we provide an analysis of the official Android marketplace from an advertising perspective.

## 1. Introduction
The rapid growth in mobile device usage, particularly smartphones and tablets, has significantly changed user behavior and network utilization. According to Canalys [1], 488 million smartphones were sold in 2011, compared to 415 million personal computers. Many of these devices run applications (mobile apps) that require internet access. For example, 84% of the 55,000 randomly selected Android apps in the official Android market required internet permissions. This trend has sparked interest among network operators in understanding mobile app usage patterns.

Recent research has focused on analyzing network traffic to infer app usage behaviors. However, existing methods either rely on techniques that are not applicable to Android apps or require access to specific devices for monitoring. For instance, Xu et al. [3] and Maier et al. [5] use the User-Agent field in HTTP headers to identify apps, but this approach is unreliable for Android due to the use of generic strings. Other approaches, such as manual execution of apps on specific devices, do not scale well and do not provide real-world data.

This paper presents a new technique for identifying app usage patterns based on advertising traffic generated by the apps. We classify network traffic into three categories: origin, content distribution network (CDN) + cloud, and third-party (advertising and analytical services). Previous studies have focused on origin or CDN+cloud traffic, but we propose studying usage behavior based on advertising traffic. Advertising is a critical financial component of the mobile app ecosystem, and many apps use one or more advertising services. Developers must register their apps with advertising service providers and bundle ad libraries into their apps. The information about these ad libraries can be used to understand the distribution of advertisements in apps.

Our main contributions include:
- A systematic study of advertising libraries on the Android platform.
- Analysis of over 50,000 Android apps from an advertising perspective.
- Evaluation of network traces from a Tier 2 cellular service provider.

## 2. App Market Analysis
### 2.1 Background
Google Play Store is the most popular Android app market, hosting over 500,000 apps, including both free and paid ones. Free apps often rely on advertisements for revenue. Android apps are distributed as APK files, which contain metadata in the AndroidManifest.xml file. This metadata includes the app name, permissions, and libraries used.

Developers use third-party advertising service providers like Google Ads or Smaato to display ads. These services provide libraries for user interface and network code. When a developer registers an app, they receive an identifier, which is embedded in the app's manifest file.

### 2.2 Dissecting Google Play Store
We downloaded 55,000 free apps from Google Play Store and analyzed their categories and ad library usage. Approximately 60% of the apps fell into the top 10 categories. We identified 19,000 apps using 30 popular ad libraries. The most popular ad library was Google Ads, followed by Millennial Media and Mobclix. The distribution of ad libraries varied across app categories, with some categories having a higher proportion of apps containing ads.

## 3. Network Trace Analysis
### 3.1 Methodology
We developed a system to analyze Android apps by running each app in a separate emulator. We identified ad flows from the Host field in the HTTP header. We created a database of host names used by different ad networks by collecting network traffic from a few apps using each ad library. We then analyzed real-world network traces from a Tier 2 cellular service provider for a week, focusing on two days: a weekday and a weekend.

### 3.2 Results
Our analysis of the network traces showed that the proposed method can effectively identify Android apps based on advertising traffic. This technique provides valuable insights into mobile app usage patterns and can be scaled for large-scale studies.

## 4. Limitations and Future Work
While our method shows promise, it has limitations. For example, not all ad libraries may be identifiable, and some apps may use multiple ad networks. Future work will focus on improving the accuracy and scalability of the method and extending it to other platforms like iOS and Windows Mobile.

## 5. Conclusions
This paper introduces a novel technique for identifying Android apps in network traces using in-app advertisements. Our preliminary results indicate that this method is promising for large-scale mobile app usage pattern studies. The analysis of the official Android marketplace from an advertising perspective provides valuable insights into the distribution and usage of ad libraries in apps.

---

This revised version aims to improve the clarity, coherence, and professionalism of the original text.