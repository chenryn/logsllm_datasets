Recommended Reading:
Configuration Examples Wiki Mailing Lists
tomcat7.0:jdk1.6
IMAGE
图11-1
CATALINA_HOME/RUNNING.txt
Find aditinal
TomcatWiki
Tomcat 7.o Configuration
Tomcat7.0Documentation
Documentation
COMMAND
Tomcat管理界面
alimportant configuration
,0.0.0.0:49158->8080/tcp cranky_wright
Examples
CREATED
"/run.sh"
TApacheSfware Foundaton
STATUS
toausadscuion
FAQandMailing Lists
Getting Help
4seconds ago
Tomcat Versions
Servlet Specificafions
e.se
PORTS
Host Manager
Manager App
s
Find Help
NAMES
dn
3
---
## Page 115
慧
ssage:
Software Foundation
Manager
Apache Tomcat7.0.56
Far
Home Documentation Configuration
成功进人管理界面如图11-3所示。
CATALA_HOME/COnF/
Managing Tomcat
Developer Quick St
在实际环境中，可以通过使用-v参数来挂载Tomcat的日志文件、程序所在目录、
以及与Tomcat相关的配置。
ThApache
Ifyou're seelng this.you've
users.xal
用户名
Host
tallases
webepp
admin
htp/192.168.1.134:49158请求用户名和密码信惠为：
Considerations How-TO
Examples Wiki Maling Lists
图11-3Apache管理界面
Tomcat Virtual Host Manager
Tomcat wiki
Tomcat 70 Configuration
Tomcat 7.0 Documentation
Documentation
图11-2输人管理员密码
PUNING.X
需要验证
Tomcat HostManager Applicatin
第11章Web服务器与应用101
Host Manager Help(TO
取消
ncat Congratuiationsl
ApacheSotwareFoundaton
FAQ and Mailing Lists
Geting Help
确定
Host Manager
ManagerApp
Server Stalus
Find Help
---
## Page 116
的集群、同步等概念。部署一个集群应用程序，只需要安装一次应用到集群上即可。
写出administartor服务器和node服务器的启动脚本。这样做的优点是：可以使用Weblogic
务和其他资源都部署在这些服务器上。
置、管理域中所有资源的核心。
示例包括计算机定义、可选网络通道、连接器和启动类。
些应用程序组件和服务器实例所需的资源和服务。应用程序和服务器实例使用的资源和服务
实例的组合。一个域可以包含多个群集。域还包含部署在域中的应用程序组件、此域中的这
或多个WebLogic服务器实例，这些实例可以是群集实例、非群集实例，或者群集与非群集
Weblogic的基本概念
方网站下载。
Weblogic，则需要购买Oracle公司的正规商业授权。Weblogic的安装软件可以到Oracle的官
Oracle公司允许开发者在开发模式下使用Weblogic。如果开发者需要在生产环境中使用
上第一个成功商业化的J2EE应用服务器。
用的Java应用服务器。是商业市场上最主要的Java（J2EE）应用服务器软件之一，也是世界
11.4  Weblogic
102第二部分实战案例
如果要使用常规的administrator+node的方式部署，就需要在run.sh脚本中分别
通常，称加人Domain的其他实例为Managed服务器，所有的Web应用、EJB、Web服
Weblogic域是作为单元进行管理的一组相关的WebLogic服务器资源。
与Tomcat不同的是，Weblogic是一个商业软件，所以需要有授权才能使用。不过
口没办法自动扩展集群的计算容量，如需添加节点，需要在administrator上先创建节
口Docker配置复杂了。
缺点是：
一个典型的Weblogic部署应该如图11-4所示。
Managed服务器
域中包含一个特殊的WebLogic服务器实例，叫做Administration服务器，这是用户配
Weblogic域
WebLogic是用于开发、集成、部署和管理大型分布式Web应用、网络应用和数据库应
WebLogic是一个基于Java EE架构的中间件（应用服务器），WebLogic由Oracle公司维护。
Administration服务器
点，然后再配置新的容器run.sh启动脚本，然后再启动容器。
一个域包含一个
---
## Page 117
参考这种方法。
步使用Dockerfle来完成最终的Weblogic镜像创建，对于一些复杂镜像的创建，读者也可以
器完成大部分操作，然后通过dockercommit将这个容器提交为一个镜像，最后再进一
Weblogic服务的镜像。
使用dockercommit+Dockerfile方式创建镜像
恰恰相反。
节点即可，将adminiserver当作Manged server使用。这样做的优点和缺点和传统的部署方法
，并创建Dockerfile和run.sh脚本文件：
下面笔者将以Weblogic12.11、jdk1.6、Ubuntu14.04为例子，创建一个带有
$ sudo docker run -d -v /home/user/weblogic_jdk1.6/wls12i1_generic.jar:/
使用-v-d-P 参数运行之前创建的 sshd_dockerfile镜像：
2.安装Weblogic到容器
Dockerfile
在本地主机上创建weblogic目录，
由于Weblogic 的安装、部署方式较为复杂，
1.准备工作
笔者推荐将应用程序安装在adminiserver上面，需要扩展的时候，启动多个adminiserver
mkdir weblogic_jdk1.6
touch Dockerfile run.sh
cd weblogic_jdk1.6/
jdk
run.sh
节点
wls1211_generic.jar
服务器1
图11-4
B
，从其他主机上传jdk和weblogic安装文件到该目录
典型的Weblogic部署
节点
管理服务器
，笔者将先通过docker run-ti进人容
第11章Web服务器与应用
服务器2
103
---
## Page 118
104第二部分实战案例
dr-xr-xr-x
drwxr-xr-x
drwxr-xr-x
-rwxr-xr-x
drwxr-xr-x
dr-xr-xr-x
drwxr-xr-x
drwxr-xr-x
drwxr-xr-x
drwxr-xr-x
drwxr-xr-x
drwxr-xr-x
drwxr-xr-x
drwxr-xr-x
drwxr-xr-x
drwxr-xr-x
drwxr-xr-x
total997M
root@185546d00925:/#1s-1h
找到映射到容器内的weblogic安装文件：
applicable law.
Ubuntu comes with ABSOLUTELY NO WARRANTY, to the extent permitted by
individual filesin/usr/share/doc/*/copyright.
The programs included with the Ubuntu system are free software;
Welcome
Warning:
Areyousureyouwantto
ECDSA key fingerprint is d1:59:f1:09:3b:09:79:6d:19:16:f4:fd:39:1b:be:27.
beestablished.
Theauthenticityof host
$ ssh 127.0.0.1
通过ssh登录到容器：
seconds
185546d00925
CONTAINER ID
dwj@ubuntu:~/weblogic_jdk1.6s sudo docker ps
在宿主主机查看容器的ssh端口映射情况，可以看到映射到了本地的49159端口：
185546d00925d80c5bfa01320feb8939c838fa10429acc648f8850efb8a1e968
wls1211_generic.jar-v/home/user/weblogic_jdk1.6/jdk:/jdk-P sshd:dockerfile
*Documentation:
eto Ubuntu 14.04LTS(GNU/Linux3.2.0-37-genericx86_64)
253
13
0.0.0.0:49159->22/tcp
2
2
S
Z
4
8
2
83
4
2
2rootroot4.0K
root root
root root4.0K
root root 4.0K Jul
root
root
root
root
root
root
root
root
1000
root
root
root
root
root
-p49159
IMAGE
https://help.ubuntu.com/
root
root4.0K
sshd:dockerfile
root
root
root
root
root
root
root
root
1000
root
root
root
4.0K
4.0K
4.0K
4.0K
4.0K
4.0K
4.0K
4.0K
4.0K
4.0K
340
continue connecting (yes/no)? yes
'[192.168.1.134]:49159 ([192.168.1.134]:49159).can't
300ct
COMMAND
00ct28
Ju
Oct
Oct
Ap
Ju
Jul
Oct
C
Apr
Jul
Oct
Apr
Oct
1703:38
12
27
28
2
17
17
27
28
10
28
28
102014
07:53
03:34
02:51
07:43
307:53
307:53
21:47
07:55
07:55
07:53
03:34
2014
03:34
03:34
03:01
2014
happy_ritchie
CREATED
"/run.sh"
sys
srv
sbin
run.sh
run
root
proc
opt
mnt
media
1ib64
jdk
home
etc
dev
boot
bin
STATUS
2 seconds ago
PORTS
NAMES
Up
---
## Page 119
typing"Exit".
entered previously,type "Previous".
因为我们这里使用的授权时开发模式的，所以选择不接收安全更新。
Enter option number to select OR [Exit][Previous][Next]>
Use above value or select another option:
Choose Middleware Home Directory:
Enter new Middleware Home OR[Exit][Previous] [Next]>/opt/Middleware
Choose Middleware Home Directory:
不使用默认的安装位置，我们将weblogic安装在opt目录下面：
'/root/Oracle/Middleware"]
---
Enter [Exit][Next]>
Type
This installer will guide you through the installation of WebLogic 12.1.1.0.
Welcome:
<----
root@185546d00925:/#./jdk/bin/java -jar wls1211_generic.jar -mode=console
以console模式启动weblogic安装，默认使用图形界面安装：
笔者使用命令行模式，在容器内进行weblogic的安装。
rw-
drwxr-xr-x