with the current partitioning schene before continuing.
Hrite the changes to disks and conf igure LUM?
Yes>
图3.16LVM信息
（5）该界面显示了LVM的配置信息。单击OK按钮，将显示如图3.17所示的界面。
Amount of volume group to use for guided partitioning:
DebianInstallerLivo
《0k>
图3.17使用引导分区的卷组
（6）该界面提示使用引导分区的卷组来安装系统。此时，单击OK按钮，将显示如图
3.18所示的界面。
（7）该界面显示了磁盘的分区表信息，此时提示是否要写入数据。这里单击Yes按钮，
将显示如图3.19所示的界面。
• 61 *
---
## Page 74
第1篇Linux安全渗透测试基础
Debian Installer Livo F
If you continue, the changes listed belou uil1 be written to the disks.
Otheruise, you uill be able to nake further changes Manually.
The partition tables of the following devices are changed:
LUH UG turnkey，LU shap_1
SCS11 (8,θ,8)(sda)
The following partitions are going to be fornatted:
LUH UG turnkey, LU root as ext4
LUM UG turnkey.
LU swap_1 as sHop
partition #1 of SCs11 (8,8,B) (sda) as ext2
Hrite the changes to disks?
图3.20安装GRUB引导
（9）该界面提示是否安装GRUB引导加载程序的主引导记录。这里单击Yes按钮，将
显示如图3.21所示的界面。
Debian Installer Live F
Installation is corplete. You need to restart the conputer in order to
Hould you 1ike to restart nou?
图3.21是否重启系统
（10）该界面显示WordPressTurnkeyLinux已经安装完成，是否现在重新启动系统。
单击Yes按钮，将显示如图3.22所示的界面。
（11）在该界面为Root用户设置一个密码。输入密码后，单击OK按钮，将显示如图
3.23所示的界面。
· 62 ·
---
## Page 75
第3章高级测试实验室
Please enter
neu passhord for the root account
图3.22Root密码
ConfirH passHord
图3.23Root确认密码
（12）该界面要求再次为Root用户输入相同的密码，单击OK按钮，将显示如图3.24
所示的界面。
Please enter new passHord for the MySQL ‘root′ account.
图3.24MySQL密码
（13）在该界面为MySQL服务的Root用户设置一个密码，设置完后单击OK按钮，
将显示如图3.25所示的界面。
ConfirM passHord
图3.25MySQL确认密码
（14）在该界面再次为MySQL服务的Root用户输入相同的密码，然后单击OK按钮，
将显示如图3.26所示的界面。
ardpre
Enter
 passhord for the Hordpress ‘admin′ account
图3.26Wordpress 用户 admin 密码
· 63 ·
---
## Page 76
第1篇Linux安全渗透测试基础
（15）在该界面要求为Wordpress的用户admin设置一个密码，输入密码后，单击OK
按钮，将显示如图3.27所示的界面。
Confirm passHord
图3.27Wordpress 用户admin确认密码
（16）在该界面再次为Wordpress用户admin输入相同的密码，然后单击OK按钮，将
显示如图3.28所示的界面。
account.
gdnineexanple.com
图3.28设置邮件地址
（17）该界面提示为Wordpress用户admin设置一个邮件地址，这里使用默认的
PI:EMAIL。然后单击Apply按钮，将显示如图3.29所示的界面。
nitializeHabseruices
1) TurnKey Backup and Higration: saves changes to files
http ://wsu. turnkey1inux.org/tk1bam
You can start using these servicesinmediately if you
initialize nou. Or you can do this manually later (e.g-;
froH the coresand 1ine / Hebmin)
AP1 Key: (see https://hub. turnkeylinux.org/profile)
图 3.29  Initialize Hub Services
（18）该界面显示了初始化Hub服务信息，在该界面单击Skip按钮，将显示如图3.30
所示的界面。
By default, this systen is configured to autonatically
install security updates on a daily basis:
http ://ver. turnkey1inux.org/security-updates
Far naxinsn protection. He also recorend insta1ling the
latest security updates right nou.
This can take a fen minutes. You meed to be online.
图3.30 Security updates
· 64 ·
---
## Page 77
第3章高级测试实验室
（19）该界面提示是否现在安装安全更新，这里单击Install按钮，将显示如图3.31所
示的界面。
HORDPRESS appliance services
Heb :
http://192.168.41.130
https://192.168.41.130
Web she11:
https://192.168.41.130:12328
PHPMyAdMin:https://192.168.41.138:12322
HebMin:
https://192.168.41.138:12321
SSH/SFTP:r0oto192.168.41.13B (port 22)
TRLBAM (Backup and Migration):NOT INITIALIZED
TurnKey Backups and Cloud DeployMent
https://hub.turnkeylinux.org
图 3.31 WORDPRESS appliance services
（20）该界面显示了WordPress应用服务的详细信息，如Web地址、Webshell地址和
端口、Webmin地址、PHPMyAdmin地址和端口及SSH/SFTP地址和端口等。此时，表明
WordPressTurmkeyLinux就可以使用了。
3.2.3攻击WordPress应用程序
上一小节介绍了WordPress虚拟机的安装。现在就可以启动WordPress虚拟机，在Kali
Press安装版的一些已知的安全漏洞。本小节将介绍使用WPScan工具攻击WordPress应用
程序。
WPScan在KaliLinux中已经默认安装。它的语法格式如下所示：
wpscan[选项][测试]
常用的选项如下所示。
口--update：更新到最新版本。
口--urll-u：指定扫描WordPress的URL（统一资源定位符）或域名。
口--force-f：如果远程站点正运行WordPress，强制WPScan不检查。
口--enumerate｜-e[option(s)]：计算。该参数可用的选项有u、u[10-20]、p、vp、ap、
t、t、vt和at。其中u表示用户名从id1到10；u[10-20]表示用户名从id10到20
（口中的字符必须写）：p表示插件程序；vp表示仅漏洞插件程序；ap表示所有插
件程序（可能需要一段时间）：tt表示timthumbs：t表示主题：vt表示仅漏洞主
题：at表示所有主题（可能需要一段时间）。
【实例3-1】使用WPScan攻击WordPress程序的具体操作步骤如下所示。
（1）在KaliLinux下，查看WPScan的帮助信息。执行命令如下所示：
· 65 ·
---
## Page 78
第1篇Linux安全渗透测试基础
root@localhost:~# wpscan -h
/
A//C
VVII
WordPress Security Scanner by the WPScan Team
Version v2.2
Sponsored by the RandomStorm Open Source Initiative
@_WPScan_,@ethicalhack3r,@erwan_Ir,@gbrindisi,@_FireFart
Help :
Some values are settable in conf/browser.conf.json :
user-agent, proxy, proxy-auth, threads, cache timeout and request timeout
m conf/browser.conf.json).
-wordlist | -w Supply a wordlist for the password bruter and do the brute.
-threads|-t The number of threads to use when multi-threading
requests. (will override the value from conf/browser. conf.json)
-usemame | -U  Only brute force the supplied username.
-help
I-h This help screen.
-verbose |-v Verbose output.
Examples :
-Further help ...
ruby /wpscan.rb --help
-Do 'non-intrusive' checks ...
ruby /wpscan.rb --url www.example.com
-Do wordlist password brute force on enumerated users using 50 threads ...
ruby ./wpscan.rb -url www.example.com --wordllist darkc0de.lst -threads 50
-Do wordlist password brute force on the'admin' username only .
执行以上命令后，会输出大量信息。输出的信息中显示了WPScan的版本信息、使用方法
及WPScan的例子等。由于篇幅的原因，这里贴了一部分内容，其他使用省略号（...）取代。
（2）使用WPScan攻击WordPress虚拟机。本例中，WordPress的IP地址是
192.168.41.130。执行命令如下所示：
root@localhost:~# wpscan -u 192.168.41.130
11
/V
VV/
· 66 ·
---
## Page 79
第3章高级测试实验室
WordPress Security Scanner by the WPScan Team
Version v2.2
Sponsored by the RandomStorm Open Source Initiative
@_WPScan_, @ethicalhack3r, @erwan_lr. @gbrindisi, @_FireFart
|URL: http://192.168.41.130/
| Started: Thu Apr 17 13:49:37 2014
[!] The WordPress http://192.168.41.130/readme.html file exists
[+] Interesting header: SERVER: Apache/2.2.22 (Debian)
[+] Interesting header: X-POWERED-BY: PHP/5.4.4-14+deb7u8
[+] XML-RPC Interface available under: http://192.168.41.130/xmlrpc.php
[+] WordPress version 3.6.1 identified from meta generator
[+] WordPress theme in use: twentythirteen v1.0
|Name: twentythirteen v1.0
↑ Location: http://192.168.41.130/wp-content/themes/twentythirteen/
[+] Enumerating plugins from passive detection ...
No plugins found
[+] Finished: Thu Apr 17 13:49:41 2014
[+] Memory used: 2.414 MB
[+] Elapsed time: 00:00:03
输出的信息显示了WPScan一个简单的攻击过程。
（3）列出用户名列表，执行命令如下所示：
root@localhost:~# wpscan -u 192.168.41.130 -e u vp
/
11//V\
（
V//1
LL/V
WordPress Security Scanner by the WPScan Team
Version v2.2
Sponsored by the RandomStorm Open Source Initiative
@_WPScan_, @ethicalhack3r,@erwan_Ir, @gbrindisi, @_FireFart
|URL: http://192.168.41.130/
|Started:Thu Apr 17 13:50:49 2014
[!] The WordPress http://192.168.41.130/readme.html' file exists
[+] Interesting header: SERVER: Apache/2.2.22 (Debian)
[+] Interesting header: X-POWERED-BY: PHP/5.4.4-14+deb7u8
[+] XML-RPC Interface available under: http://192.168.41.130/xmlrpc.php
[+] WordPress version 3.6.1 identified from meta generator
[+] WordPress theme in use: twentythirteen v1.0
| Name: twentythirteen v1.0
| Location: http://192.168.41.130/wp-content/themes/twentythirteen/
· 67 *
---
## Page 80
第1篇Linux安全渗透测试基础
[+] Enumerating plugins from passive detection .
No plugins found
[+] Enumerating usemames ...
[+] We found the following 1 user/s:
+++..+
| Id | Login | Name
+..+..
|1| admin | admin |
[+] Finished: Thu Apr 17 13:50:54 2014
[+] Memory used: 2.379 MB
[+] Elapsed time: 00:00:04
从输出的信息中可以看到当前系统中只有一个用户，名为admin。
（4）为WPScan指定一个wordlist文件，使用--wordlist选项。执行命令如
下所示：
root@localhost:~# wpscan -u 192.168.41.130 -e u --wordlist /root/ wordllist.txt
//
/
///1I（
VV/T
IL/V
）（
VVI
WordPress Security Scanner by the WPScan Team
Version v2.2
Sponsored by the RandomStorm Open Source Initiative
@_WPScan_, @ethicalhack3r, @erwan_Ir. @gbrindisi, @_FireFart
|URL: http://192.168.41.130/
| Started: Thu Apr 17 13:54:51 2014
[] The WordPress'http://192.168.41.130/readme.html' file exists
[+] Interesting header: SERVER: Apache/2.2.22 (Debian)
[+] Interesting header: X-POWERED-BY: PHP/5.4.4-14+deb7u8
[+] XML-RPC Interface available under: http://192.168.41.130/xmlrpc.php
[+] WordPress version 3.6.1 identified from meta generator
[+] WordPress theme in use: twentythirteen v1.0
| Name: twentythirteen v1.0
|Location:http://192.168.41.130/wp-content/themes/twentythirteen/
[+] Enumerating plugins from passive detection ...
punoj subnid oN
[+] Enumerating usemames ...
[+] We found the following 1 user/s:
+..+.....+......+
|Id | Login | Name|
|1|admin|admin|
· 68 ·
---
## Page 81
第3章高级测试实验室
[+] Starting the password brute forcer
Brute Forcing 'admin' Time: 00:00:00 (59 / 20575)0.28%
ETA:00:00:00
[SUCCESS] Login :admin Password :123456
| Id | Login | Name| Password |
中
|1|admin|admin|123456
+---+---
[+] Finished: Thu Apr 17 13:54:56 2014
[+] Memory used: 2.508 MB
[+] Elapsed time: 00:00:05
从输出的信息中，可以看到WordPress用户admin的密码已被破解出。
· 69 ·
---
## Page 83
第2篇1
信息的收集及利用
M第4章信息收集
第5章漏洞扫描
清华大
第6章漏洞利用
---
## Page 84
第4章信息收集
渗透测试最重要的阶段之一就是信息收集。为了启动渗透测试，用户需要收集关于目
标主机的基本信息。用户得到的信息越多，渗透测试成功的概率也就越高。KaliLinux操
作系统上提供了一些工具，可以帮助用户整理和组织目标主机的数据，使用户得到更好的
后期侦察。本章将介绍Maltego、CaseFile和Nmap工具的使用其主要知识点如下：
口枚举服务；
口测试网络范围；
口识别活跃的主机和查看打开的端口；
口系统指纹识别；
口服务指纹识别：
口其他信息收集手段：
口使用Maltego收集信息：
口绘制网络图。
4.1枚举服务
枚举是一类程序，它允许用户从一个网络中收集某一类的所有相关信息。本节将介绍
DNS枚举和SNMP枚举技术。DNS枚举可以收集本地所有DNS服务和相关条目。DNS
枚举可以帮助用户收集目标组织的关键信息，如用户名、计算机名和IP地址等，为了获取