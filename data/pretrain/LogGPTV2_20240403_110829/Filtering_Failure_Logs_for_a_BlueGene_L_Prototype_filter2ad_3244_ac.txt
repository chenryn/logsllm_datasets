### 优化后的文本

#### 表2. 应用步骤II后的故障日志统计信息

| 组件 | 失败间隔时间 (秒) |
| --- | --- |
| 网络 | 100, 102, 104, 106 |
| 内存 | 700, 600, 500, 400, 300, 200, 100 |
| 中平面交换机 | 100, 102, 104, 106 |

图3展示了在应用过滤步骤II后，网络、内存和中平面交换机的故障间隔时间的累积分布函数（CDF）。注意，x轴采用对数尺度，因为故障间隔时间存在很大的方差。对于网络和内存子系统，90%的故障记录与前一条记录的时间间隔不超过1秒，而中平面交换机的故障则更加分散。

#### 故障突发现象

尽管我们在步骤II中已经使用了2分钟的时间阈值来过滤事件簇，但故障仍然以突发形式出现。需要注意的是，步骤II仅消除了同一位置重复的记录。可能有多个位置/计算芯片同时检测并记录相同的错误。因此，不能简单地使用时间阈值来过滤所有这些事件，因为它们可能是不同的故障。深入研究不同组件的记录以过滤重复事件是非常重要的。

#### 4.3.1 内存故障

BG/L原型包含4,096个计算芯片，分布在128个节点卡上，其中只有22个节点卡报告了内存故障（见图4(a)）。在这22个节点卡中，节点卡40中的芯片报告了90%的故障。此外，从图4(b)可以看出，节点卡40中的所有32个芯片经常几乎在同一时间报告故障（相差几秒钟）。由于32个芯片在同一时间遇到相同的硬件故障的可能性极低（特别是这些芯片不共享内存），这强烈表明某些内存故障可能是由软件错误引起的，例如空指针解引用、跳转到无效地址、访问越界等，而不是硬件故障。同样的软件错误导致在运行该应用程序的不同节点上表现出相同的错误，因此应该只报告一次。

然而，仅仅通过查看事件描述很难区分一个事件是由硬件故障还是软件错误引起的。例如，指令TLB错误既可能是由于硬件问题（类似于我们在图1中展示的i-L2奇偶校验错误），也可能是由于程序试图跳转到无效的指令地址。我们认为，如果以下两个条件成立，则故障更有可能由软件错误引起：(1) 许多运行相同程序的计算芯片在短时间内报告相同的问题；(2) 不同芯片上的故障发生指令/数据地址相同（在硬件错误的情况下，这两个条件同时发生的概率极低）。

过滤由相同错误引起的事件需要将不同芯片上、短时间内且具有相同事件描述的事件进行聚类。我们的过滤算法将每个故障记录表示为一个三属性元组，并输出一个包含故障簇的表，其中簇大小字段表示在时间阈值Tmem内报告此故障的不同芯片数量。当扫描新条目时，我们首先使用哈希结构确定该描述是否之前出现过。如果是第一次看到该描述，它将成为簇头，并将其时间戳和描述插入表中，对应的簇大小字段设置为1。如果描述之前出现过，我们通过比较其时间戳与具有相同描述且时间戳最新的簇头来检查它是否属于某个簇。如果这两个时间戳之间的差距小于阈值，则该条目属于该簇，我们不会将其添加到表中，仅增加簇大小。如果差距大于阈值，则该条目成为新的簇头，并在其结果表中记录其信息。应用此技术后，我们展示了部分Tmem = 60秒时内存故障的结果簇（见表3）。

接下来，我们需要根据上述两个条件判断表3中的簇是软件故障还是硬件故障。我们的算法将那些簇大小大于1的簇标记为由程序错误引起的，因为故障发生时的指令地址或数据地址在报告芯片上完全相同。

与BG/L日志专家的讨论确认了这种方法的有效性。我们在日志中发现的一些常见簇（也在表3中显示）包括：指令存储中断和指令TLB错误中断，这些可以由程序试图跳转到不存在的指令地址引起；数据存储中断，可以由程序试图解引用无效地址引起；程序中断，可以由程序试图执行非法指令引起；以及总线错误（表中标记为L3主要内部错误），由于非法地址出现在总线上引起。合并软件故障后，我们在84天内总共发现了55个硬件故障和21个软件故障。

#### 4.3.2 网络故障

图5(a) 显示了网络故障在所有128个节点卡上的分布情况。这128个节点卡位于8个不同的中平面上，节点卡1-16位于中平面1上，节点卡17-32位于中平面2上，依此类推。在图5(a) 中，中平面边界由八条垂直线标记。有趣的是，故障计数统计数据与它们发生的中平面相关。这表明同一中平面上的芯片可能在记录相同的网络问题，我们需要过滤掉同一个错误的多个记录。图5(b) 更直接地展示了这种行为，显示了所有网络故障的时间（x轴）和位置（y轴）。很明显，许多芯片在大致相同的时间报告故障，并且这些芯片通常来自同一个中平面。在图中，中平面边界由八条水平线标记。

与内存层次结构（不共享）不同，同一硬件错误同时在多个芯片上表现出来的可能性极低，但在不同的计算芯片上检测到相同的网络问题是相当可能的。

---

希望这个优化后的版本能够更好地传达您的意图，并且更加清晰、连贯和专业。如果有任何进一步的修改需求，请告诉我。