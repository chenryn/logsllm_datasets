destination时，管道将丢弃记录。但是与作为流水线或阶段错误处理的一部分丢弃记录不同，您可以监视要丢弃的记录数，可以创建指标和数据警报，还可以检查作为数据预览或监视器快照的一部分发送到垃圾箱的数据。
例如，以下管道根据不同的条件使用流选择器将数据路由到Kafka
Producer和Hadoop
FS目标。流选择器会将其他条件中未包含的所有记录路由到垃圾箱目标。
![https://streamsets.com/documentation/datacollector/latest/help/datacollector/UserGuide/Graphics/TrashPipeline.png](media/image96.png){width="5.763888888888889in"
height="2.421527777777778in"}
垃圾箱目标没有配置选项。要在管道中使用"Trash
destination"目标，只需添加阶段并将管道连接到阶段即可。
#### Send Response to Origin
将响应发送到目标目的地将记录传递到管道中的REST服务源，并允许您为这些记录指定HTTP状态代码。
在微服务管道中将"将响应发送到目的地"目标与REST服务起源一起使用。
在配置"将响应发送到原始"目的地时，您可以为阶段指定名称和可选描述，以及用于阶段接收的记录的状态代码。
配置"Send Response to
Origin"目标，以将具有指定状态代码的记录发送到管道中的REST服务原点。这允许源将记录传递回源REST
API。
在" 常规"选项卡上，配置以下属性：
+--------+-------------------------------------------------------------+
| **一般 | **描述**                                                    |
| 属性** |                                                             |
+========+=============================================================+
| name   | 名称                                                        |
+--------+-------------------------------------------------------------+
| 描述   | 可选说明。                                                  |
+--------+-------------------------------------------------------------+
| 状态码 | 包含在传递给[REST服务源的](https://streamsets.com/documenta |
|        | tion/datacollector/latest/help/datacollector/UserGuide/Orig |
|        | ins/RESTService.html#concept_hfg_2sn_p2b)记录中的状态代码。 |
|        |                                                             |
|        | 有关HTTP状态代码的信息，请参见[Mozilla                      |
|        | HTTP状态文档](                                              |
|        | https://developer.mozilla.org/en-US/docs/Web/HTTP/Status)。 |
+--------+-------------------------------------------------------------+
### 事件触发执行组件
StreamSets工作过程中，数据处理完成后，执行器收到特定事件时会触发任务。事件流中，将事件触发执行组件用作数据流触发器的一部分，以执行事件驱动的与管道相关的任务，如在目的对象关闭时移动完全写入的文件。
事件触发执行组件包括数据库、文件、外部任务、内部任务等种类。StreamSets支持的执行器种类如下：
  -----------------------------------------------------------------------
  **数据库**        **文件**          **外部任务**      **内部任务**
  ----------------- ----------------- ----------------- -----------------
  Hive Query        Amazon S3         Databricks        Pipeline Finisher
  JDBC Query        HDFS File         Email             
                    Metadata                            
                                      MapReduce         
                                      Spark             
                                      Shell             
  -----------------------------------------------------------------------
此处仅以邮件种类为例进行说明，其他组件的说明可参考[StreamSets官方说明](https://streamsets.com/documentation/controlhub/latest/help/datacollector/UserGuide/Executors/Executors-overview.html#concept_stt_2lk_fx)。
#### Email Executor
电子邮件执行程序在收到事件后将配置的电子邮件发送给指定的收件人。您还可以将执行程序配置为根据条件（例如特定事件类型的到来）发送电子邮件。
您可以配置电子邮件执行程序以发送多封电子邮件，每封电子邮件都有其自身的条件，一组收件人和电子邮件。您可以在所有电子邮件字段中使用表达式。
(1)前提条件
在运行包含电子邮件执行程序的管道之前，请在数据收集器 配置文件\$ SDC_CONF
/ sdc.properties中定义电子邮件警报属性。
(2)条件
您可以将电子邮件执行程序配置为根据条件（例如触发电子邮件的事件类型）发送电子邮件。如果您省略条件，则电子邮件执行程序在每次收到事件时都会发送电子邮件。
例如，假设您有一个使用JDBC查询使用者来源的管道。源生成几种类型的事件：一种用于查询成功，一种用于查询失败，另一种用于处理所有可用数据。要使"电子邮件"执行程序仅在查询失败时才发送电子邮件，请在电子邮件条件中使用事件类型，如下所示：
*\${record:eventType() == \'jdbc-query-failure\'}*
事件类型存储在每个事件记录的记录标题属性中。表达式语言提供了record:eventType()返回事件记录的事件类型的功能。
(3)配置
在"属性"面板的" 常规"选项卡上，配置以下属性：
+---------------+------------------------------------------------------+
| **常规属性**  | **说明**                                             |
+===============+======================================================+
| 姓名          | 阶段名称                                             |
+---------------+------------------------------------------------------+
| 说明          | 可选说明                                             |
+---------------+------------------------------------------------------+
| Required      | 必须包含要传递到阶段的记录的数据的字段。             |
| Fields        |                                                      |
|               | 提示：您可以包括阶段使用的字段。                     |
|               |                                                      |
|               | 不包括所                                             |
|               | 有必需字段的记录将根据为管道配置的错误处理进行处理。 |
+---------------+------------------------------------------------------+
| Preconditions | 必须计算为true才能允许                               |
|               | 记录进入处理阶段的条件。单击添加以创建其他前提条件。 |
|               |                                                      |
|               | 不满足所                                             |
|               | 有前提条件的记录将基于为阶段配置的错误处理进行处理。 |
+---------------+------------------------------------------------------+
| On Record     | 阶段的错误记录处理：                                 |
| Error         |                                                      |
|               | 丢弃-丢弃记录。                                      |
|               |                                                      |
|               | 发送到错误-将记录发送到管道以进行错误处理。          |
|               |                                                      |
|               | 停止管道-停止管道。                                  |
+---------------+------------------------------------------------------+
在"电子邮件"选项卡上，配置以下属性：
+----------------+-----------------------------------------------------+
| **电子         | **描述**                                            |
| 邮件配置属性** |                                                     |
+================+=====================================================+
| 条             | 何时发                                              |
| 件 ![https://s | 送电子邮件的可选条件。使用评估为true或false的条件。 |
| treamsets.com/ | 当条件评估为true时，执行程序将发送配置的电子邮件。  |
| documentation/ |                                                     |
| datacollector/ | 如果不使用执行                                      |
| latest/help/da | 程序，则每次执行者收到事件时都会发送一封电子邮件。  |
| tacollector/Us |                                                     |
| erGuide/Graphi |                                                     |
| cs/icon_moreIn |                                                     |
| fo.png](media/ |                                                     |
| image97.png){w |                                                     |
| idth="0.166666 |                                                     |
| 66666666666in" |                                                     |
| hei            |                                                     |
| ght="0.1666666 |                                                     |
| 6666666666in"} |                                                     |
+----------------+-----------------------------------------------------+
| 电邮编号       | 要                                                  |
|                | 使用的电子邮件地址。单击 添加图标以添加其他收件人。 |
+----------------+-----------------------------------------------------+
| 电子邮件主题   | 显示在电子邮件主题字段中的信息。                    |
+----------------+-----------------------------------------------------+
| 电子邮件内文   | 显示在电子邮件正文中的信息。                        |
+----------------+-----------------------------------------------------+
# 表达式语言
数据工厂沿用基于JSP2.0的StreamSets的表达式语言（Expression
Language，以下简称EL）。通过StreamSets的EL语言可以创建用于评估或修改数据的表达式。
使用表达式语言可在处理器中配置表达式和条件，如表达式评估器Expression
Evaluator或流选择器Stream
Selector。一些目标属性还允许使用表达式语言，例如Hadoop
FS目标的目录模板。
可以使用表达式语言来定义表示数字或字符串值的任何阶段或管道属性。还可以使用字段路径表达式来选择要在某些处理器中使用的字段。使用表达式补全确定可以在哪里使用表达式以及可以在该位置使用的表达式元素。
EL表达式语言的语法格式为：\${\....}。可以在表达式中使用下列元素：
-   常数
-   日期时间变量
-   字段名称
-   函数
-   字面量
-   操作符
    1.  ## 表达式语言使用
> EL表达式语言的使用过程中需注意以下信息及提示：
1、若要调用表达式完成功能，请将光标放置在要创建表达式的位置，然后单击
Ctrl+空格栏 显示有效表达式元素的列表，滚动可查看整个列表。
![ExComp-List](media/image98.png){width="2.2060181539807524in"
height="2.552891513560805in"}
可在可使用表达式的任何地方调用表达式完成。
2、对于管道，当数据预览可用时，字段名称显示在列表的顶部。定义后，运行时参数将以紫色参数图标显示在列表中。
在下面的示例中，Directoryroot是一个运行时参数：
![ExComp-FieldsConstants](media/image99.png){width="4.498087270341207in"
height="3.4240988626421696in"}
3、要查看有关元素的更多信息，请单击元素名称：
![ExComp-ListInfo](media/image100.png){width="4.662594050743657in"
height="2.5104166666666665in"}
> 4、若要将元素添加到表达式中，请双击元素名称或按回车键。
>
> 5、您可以通过键入元素名称的前几个字母来筛选元素列表。
>
> 6、若要查看函数的语法，请在添加函数后，单击括号内的内容。
![ExComp-Syntax](media/image101.png){width="5.153871391076115in"
height="0.6560225284339457in"}
关于表达式中简单要素的介绍如下：
### 常量（Constants）
表达式语言提供以下常量：
-   数据类型：数据类型可作为常量使用。这使您可以使用record:type()指定：\${record:type("/appname")=='spring'}
```{=html}
```
-   NULL：在表达式中可以检查是否为空值或将设置为空值
    1.  ### 日期时间变量（Datetime Variables）
表达式语言提供用于表达式的日期时间变量。
可以使用日期时间变量配置HadoopFS、LocalFS或MapRFS为存储目的地时，可基于时间创建目录。
也可以使用日期时间变量配置AmazonS
3或Elasticsearch作为存储目标时，基于时间的分区前缀或基于时间的索引。也可以在Hive元数据处理器的分区值表达式中使用它们。
表达式语言提供以下日期时间变量：
-   \${YYYY()}-四位数年份
-   \${YY()}-两位数年份
-   \${MM()}-两位数月
-   \${DD()}-两位数字日期
-   \${HH()}-两位数小时
-   \${mm()}-两位数分钟
-   \${ss()}-两位数秒
例如，要为HadoopFS目的地每天创建目录，请使用一个年份变量、一个月份变量，然后使用一个日期变量。您可以使用下列日期时间变量进度之一：
*\${YYYY()}-\${MM()}-\${DD()}*
*\${YY()}\_\${MM()}\_\${DD()}*
可以根据需要使用日期时间变量来定义时间格式。
### 直接常量（Literals）
表达式语言包括以下常量：
-   布尔型：true和false
-   整型
-   浮点型
-   带有双引号或单引号的字符串
-   字符串转移符：\\和\\\\
-   null
    1.  ### 保留字段（Reserved Words）
EL有自己的保留关键字，在为变量命名时，应该避免使用这些关键字，包括在使用EL输出已经保存在作用域范围内的变量，也不能使用关键字，如果已经定义了，那么需要修改为其它的变量名。EL的保留关键字如下表所示。
  -----------------------------------------------------------------------
  and                eq                gt               true
  ------------------ ----------------- ---------------- -----------------
  instanceof         or                ne               le
  false              empty             not              lt
  ge                 null              div              mod
  -----------------------------------------------------------------------
### 运算符及逻辑运算介绍（Operators）
EL表达式支持大部分Java所提供的算术和逻辑操作符：
  ----------------------------------------------------------------------------------------------------------------------------------------------------------
  **操作符**   **描述**                           **范例**                                                                                        **结果**
  ------------ ---------------------------------- ----------------------------------------------------------------------------------------------- ----------
  .            访问一个Bean属性或者一个映射条目                                                                                                   
  \[\]         访问一个数组或者链表的元素                                                                                                         
  ( )          组织一个子表达式以改变优先级                                                                                                       
  \+           加                                 \${12+5}                                                                                        17
  \-           减或负                             \${12-5}                                                                                        7
  \*           乘                                 \${12\*5}                                                                                       60
  / or div     除                                 \${12/5}或\${12 div 5}                                                                          2
  \% or mod    取模                               \${13%5}或\${13 mod 5}                                                                          3
  == or eq     测试是否相等                       \${5==5}或\${5 eq 5}                                                                            true
  != or ne     测试是否不等                       \${5!=5}或\${5 ne 5}                                                                            false
  \ or gt     测试是否大于                       \${3\>5}或\${3 gt 5}                                                                            false
  \= or ge    测试是否大于等于                   \${3\>=5}或\${3 ge 5}                                                                           false
  && or and    测试逻辑与                         \${true&&false}或\${true and false}                                                             false
  \|\| or or   测试逻辑或                         \${true\|\|false}或\${true or false}                                                            true