使文档更好：将文档集成到工作流程中
Ríona MacNamara and Shylaja Nukala, with Stas Miasnikoŭ, Aaron Gillies, Jeremy Sharpe, Google, and Niall Richard Murphy, Microsoft
       纵观整个软件行业，工程的文档化程度都让人不太自信。Stack Overflow 2016 开发者调查报告当中，文档是开发者面对的第二头痛的问题。
这是个问题。缺少、不完整、陈旧或不准确的文档会有损于开发效率、软件质量，以及 SRE 最关心的服务可靠性。它所产生的挫折感可能是 开发人员工作不愉快的主要原因。
文档需要时间和精力，这对 SRE 尤其具有挑战性。SRE 通常将 35% 的时间花在运营工作上，而只有 65% 用于开发。花在文档上的时间需要从开发预算中拿出来，如果人们认为创建和维护文档是一项在绩效审核和晋升期间可能无法得到认可或奖励的艰巨工作，那么文档化就算是有挑战性的过程。如何改变这一点？如何使你的组织了解工程文档的价值，鼓励工程师创建和维护它？如何说服管理层和领导层这样做是一项值得认可、资金和奖励的活动？
在 Google，我们很幸运拥有强大的技术写作组织，但我们的文档倾向于受关注、高影响力、高曝光率的项目。事实是，大多数工程和 SRE 团队需要创建和维护自己的文档，他们并不总是发现这很容易或有吸引力。然而，自 2015 年以来，我们在提高内部工程信息的质量和可用性方面取得了重大进展。在本章中，我们分享我们学到的知识，并提供建议，希望这些建议对希望更好地编写文档的 SRE、SWE 或技术编写者有用。我们尤其关注以下方面：
定义文档质量
我们提出了定义文档质量的框架和词汇表，并展示（重点是 SRE 运维）如何使用这些框架和词汇来定义文档要求。
将文档集成到工程工作流中
文档是工程工作的核心部分。至少理论上如此！在实践中，创建和维护文档通常代表着困难的情境切换，因此往往被忽视。我们分享将文档与我们的代码库和工作流工具集成的经验。传达文档的价值
为了推动组织变革，并说服领导相信文档值得投资，你需要能够传达文档工作对业务的影响。
文档可能尚未完全集成到今天的工程实践中。幸运的是，我们可以从以前的软件测试实践中找到灵感、词汇和模型。十年前，测试的情况与文档现在的情况非常相同：临时、非标准化且不可预知。如今在 Google，单元测试、回归测试和集成测试都深深集成到工程流程和工具中，因此将未经测试的代码推送到生产中反而变得很困难。在 Google 进行测试是一种严格、高度接受的实践，且完全集成到工程工作流中。我们可以对文档执行相同的操作。
定义质量：好文档是什么样子的？
 文档质量的定义基本上很简单：
好的文档需要达到其目的。
但是，在测量或报告文档质量之前，我们需要一个描述文档质量的词汇表。在本节中，我们提出了直接从软件测试领域提炼的词汇，用于描述软件质量的各个方面。从本质上讲，文档质量有两个方面，即结构质量和功能质量，每个方面都有助于文档的整体质量。结构质量是描述技术文档时通常想到的，当技术作者戏称自己为“打字员”时，肯定是在谈论结构质量。结构质量描述了文档应该是什么样子。如果文档或文档集满足以下条件，则具有较高的结构质量：
拼写和语法正确
它符合风格和使用指南
它使用正确的语气和称谓
它井井有条，易于导航
结构质量可以相对容易确定：拼写要幺正确，要么不正确；风格是遵循的，或者没有遵循；链接可以打开或不能打开。这种易于测量的特性使得结构质量（作为文档集的默认质量）度量变得很容易。如果你是根据文档的结构质量进行衡量和评估的，则很容易忽视整体质量，因为过分强调遣词造句。文档只需要足够好。如果用来描述一个不断变化的系统，面向内部的文档确实不需要像针对客户的文件那么强调用词造句。另一方面，功能质量关注的是文档的有效性。有高功能质量的文档是满足其规定要求的文档。这些要求通常反映业务目标。例如，故障会有经济损失且对客户体验有害，因此需要快速解决。因此，SRE 所依赖的剧本需要完整和最新；服务概述需要涵盖理解服务所需的基本信息；并且事后需要包括了解所发生事件所需的信息，并提供一系列行动项目，以减少再次发生的可能性且使恢复更加直接。
例如，对于行动手册，我们可以询问它是否提供了 SRE 处理紧急情况或故障所需的全部信息：
行动手册是否提供 100% 的警报覆盖率？
团队能否依靠行动手册来执行轮值的职责？
行动手册是否可靠（高可用）？
创建和更新条目是否容易？
每个警报的描述是否准确和完整？
每个条目是否提供足够的信息来理解和解决警报？
条目是否提供有关上报的指导？
现在，功能质量通常取决于结构质量，这绝对是正确的。如果 SRE 无法打开文档，或者文中的链接失效，或者语言难以理解，那么即使世界上最有用的秘籍也将毫无意义。但事实是，功能质量总是更重要：结构质量高 + 功能质量低 = 整体质量差
一般的结构质量 + 良好的功能质量 = 良好的整体质量
当然，高功能质量且高结构质量是最理想的。但是，这可能不值得追求。SRE 在生产中不追求 100% 的可靠性，所以我们在文档方面也不要求完美。完美的成本太高，可以用来改善其他文档，甚至服务本身。对于内部文档，尤其如此，只要求关键信息的存在和清晰表达。 
因为它与业务和产品目标紧密相连，功能质量与我们认为的价值有着更紧密的关系。我们相信，要实现我们业务的目标，功能质量必须是我们的首要目标。
SRE 文档的功能要求
 在本节中，我们将介绍支持核心 SRE 功能必须提供哪些 SRE 文档，这包括：
监控和指标
建立所需的服务行为，衡量服务的实际行为，并纠正差异
应急响应
发现并有效响应服务故障，以保持服务符合服务级别协议 （SLA）
容量规划
预测未来需求，并确保服务在适当位置有足够的容量来满足该需求容量规划
预测未来需求，并确保服务在适当位置有足够的容量来满足该需求
服务升级和降级
以可预测的方式实例化和删除服务容量，这通常是容量规划的结果
变更管理
更改服务的行为，同时保留所需的服务行为
性能
与可扩展性、隔离性、延迟性、吞吐量和效率相关的设计、开发和工程实施
为了完成工作，SRE 需要有效跨两个域（开发和运维），并且需要通过文档来理解和运行生产中的服务。但是，在本节中，我们仅限于讨论 SRE 赖以运行生产服务的核心文档的示例。其中包括服务概述、行动手册和程序、故障报告、政策和SLA。不幸的是，对所有类型的 SRE 文档的全面讨论超出了本章的范围，常见项目开发人员的文档也超出了本章的范围，但你可以将我们描述的原则应用于所有技术文档。
服务概述服务概述
  这类文档对于 SRE 理解其支持的服务至关重要。SRE 需要了解系统体系结构、组件和依赖关系，以及服务联系人和所有者。服务概述是开发团队和 SRE 团队之间的协作工作。它们旨在指导和确定 SRE 参与的优先级，并发现需要进一步调查的领域。这些概述通常是生产就绪性审核流程的输出。
基本服务概述为 SRE 提供了有关服务的详细信息，以便进行更深入的挖掘，这对新入职的 SRE 特别重要。完整的服务概述详细描述了服务及其与环境的响应，以及 SRE 解决意外问题所需的仪表板、指标和相关信息的链接。