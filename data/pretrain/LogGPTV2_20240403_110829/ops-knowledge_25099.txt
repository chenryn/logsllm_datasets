### 如何进行分流日志采集

在配置日志易 Agent 以实现文件及目录的高效日志采集时，可以通过设置“文件路径白名单”参数来利用正则表达式提取 `Module` 和 `Seq` 两个关键值。基于这些值，日志易 Agent 能够自动对日志流进行分组和排序，从而优化采集过程。

- **按模块分组**：根据 `Module` 值的不同，Agent 会将相关联的日志文件归类到不同的组别中。
- **组内排序**：对于属于同一 `Module` 的文件集合，再依据其 `Seq` 序列号进行升序排列，确保数据处理顺序的一致性与逻辑性。

#### 并发读取机制
默认情况下，对于每一个符合“文件路径白名单”规则的目标文件，日志易 Agent 都会启动一个独立的 Golang 协程来进行并行读取操作。然而，当从指定路径模式中识别出特定的 `Module` 组后，该组下的所有成员文件将共用同一个协程资源，这样可以更有效地管理内存使用情况，并简化了多任务调度复杂度。

#### 应用场景建议
此方法特别适用于那些新部署环境中积累了大量由 logrotate 工具生成的历史回滚日志文件的情况。通过采用上述策略，不仅能够保证日志条目的正确顺序被维护，同时也能显著降低因频繁访问存储介质而导致的磁盘 I/O 操作负担。

#### 示例配置
针对典型的 logrotate 日志格式，一个可能适用的文件路径白名单正则表达式如下：
```regex
(?P<Module>[^/]+)/.*\.log\.?(?P<Seq>\d*)
```
这个正则模式旨在匹配形如 `/path/to/module/somefile.log.12345` 的文件名结构，其中 `<Module>` 对应于目录名称部分，而 `<Seq>` 则代表紧随 `.log` 扩展名之后可能出现的数字序列标识符。