| Character  | 选择一个可用选项或使用"其他"输入自定义字符。            |
|            |                                                         |
|            | 默认值是反斜杠字符（\\）。                              |
+------------+---------------------------------------------------------+
| Quote      | 引用自定义分隔符格式的字符。                            |
| Character  | 选择一个可用选项或使用"其他"输入自定义字符。            |
|            |                                                         |
|            | 默认值是引号字符（"）。                                 |
+------------+---------------------------------------------------------+
| Charset    | 要处理的文件的字符编码。                                |
+------------+---------------------------------------------------------+
(8)对于JSON数据，在"数据格式"选项卡上，配置以下属性：
+--------------+-------------------------------------------------------+
| **JSON       | **说明**                                              |
| Property**   |                                                       |
+==============+=======================================================+
| JSON Content | 编写JSON数据的方法：                                  |
|              |                                                       |
|              | JSON对象数组 - 每个文件包含一个数组。                 |
|              | 在数组中，每个元素都是每条记录的JSON表示。            |
|              |                                                       |
|              | 多个JSON对象 - 每个文件包含多个JSON对象。             |
|              | 每个对象都是记录的JSON表示。                          |
+--------------+-------------------------------------------------------+
| Charset      | 要处理的文件的字符编码                                |
+--------------+-------------------------------------------------------+
(9)对于protobuf数据，在"数据格式"选项卡上，配置以下属性：
+-------------+--------------------------------------------------------+
| **Protobuf  | **说明**                                               |
| Property**  |                                                        |
+=============+========================================================+
| Protobuf    | 要使用的描述符文件（.desc）。                          |
| Descriptor  | 描述符文件必须在数据收集器资源目录\$SDC_RESOURCES中。  |
| File        |                                                        |
|             | 有关环境变量的详细信息，请参阅数据收集器环境配置。有关 |
|             | 生成描述符文件的信息，请参见Protobuf数据格式前提条件。 |
+-------------+--------------------------------------------------------+
| Message     | 读取数据时要使用的消息类型的完全限定名。               |
| Type        |                                                        |
|             | 使用以下格式：\.\。      |
|             |                                                        |
|             | 使用描述符文件中定义的消息类型。                       |
+-------------+--------------------------------------------------------+
(10)对于文本数据，在"数据格式"选项卡上，配置以下属性：
+-------------+--------------------------------------------------------+
| **Text      | **说明**                                               |
| Property**  |                                                        |
+=============+========================================================+
| Text Field  | 包含要写入的文本数据的字段。                           |
| Path        | 所有数据必须合并到指定的字段中。                       |
+-------------+--------------------------------------------------------+
| Record      | 用于分隔记录的字符。 使用任何有效的Java字符串文字。    |
| Separator   | 例如，在写入Windows时，您可以使用\\ r \\ n来分隔记录。 |
|             |                                                        |
|             | 默认情况下，目标使用\\ n。                             |
+-------------+--------------------------------------------------------+
| On Missing  | 当记录不包含文本字段时                                 |
| Field       | ，确定目标是否将缺少的字段报告为错误或忽略缺少的字段。 |
+-------------+--------------------------------------------------------+
| Insert      | 配置为忽略缺                                           |
| Record      | 少的文本字段时，插入配置的记录分隔符字符串以创建空行。 |
| Separator   |                                                        |
| if No Text  | 未选中时，丢弃没有文本字段的记录。                     |
+-------------+--------------------------------------------------------+
| Charset     | 写入数据时使用的字符集。                               |
+-------------+--------------------------------------------------------+
(11)对于整个文件，在"数据格式"选项卡上，配置以下属性：
+-----------+----------------------------------------------------------+
| **Whole   | **说明**                                                 |
| File      |                                                          |
| P         |                                                          |
| roperty** |                                                          |
+===========+==========================================================+
| File Name | 用于文件名的表达式。                                     |
| E         |                                                          |
| xpression | 有                                                       |
|           | 关如何根据输入文件名命名文件的提示，请参阅编写整个文件。 |
+-----------+----------------------------------------------------------+
| [Pe       | 用于定义输出文件的访问权限的表达式。                     |
| rmissions | 表达式应评估为要使用的权限的符号或数字/八进制表示。      |
| Ex        |                                                          |
| pression] | 默认情况                                                 |
| (https:// | 下，如果没有指定的表达式，文件将使用目标系统的默认权限。 |
| streamset |                                                          |
| s.com/doc | 要使用原始源文件访问权限，请使用以下表达式：             |
| umentatio |                                                          |
| n/datacol | \${record:value(\'/fileInfo/permissions\')}              |
| lector/la |                                                          |
| test/help |                                                          |
| /datacoll |                                                          |
| ector/Use |                                                          |
| rGuide/Da |                                                          |
| ta_Format |                                                          |
| s/WholeFi |                                                          |
| le.html#c |                                                          |
| oncept_tt |                                                          |
| m_ywv_1x) |                                                          |
+-----------+----------------------------------------------------------+
| File      | 输出目录中已存在同名文件时要采取的操作。                 |
| Exists    | 使用以下选项之一：                                       |
|           |                                                          |
|           | •发送到错误 - 根据阶段错误记录处理处理记录。             |
|           |                                                          |
|           | •覆盖 - 覆盖现有文件。                                   |
+-----------+----------------------------------------------------------+
| [Include  | 包括整个文件事件记录中的校验和信息。                     |
| Checksum  |                                                          |
| in        | 仅在目标生成事件记录时使用。                             |
| Events]   |                                                          |
| (https:// |                                                          |
| streamset |                                                          |
| s.com/doc |                                                          |
| umentatio |                                                          |
| n/datacol |                                                          |
| lector/la |                                                          |
| test/help |                                                          |
| /datacoll |                                                          |
| ector/Use |                                                          |
| rGuide/Da |                                                          |
| ta_Format |                                                          |
| s/WholeFi |                                                          |
| le.html#c |                                                          |
| oncept_oj |                                                          |
| v_sr4_vx) |                                                          |
+-----------+----------------------------------------------------------+
| Checksum  | 生成校验和的算法。                                       |
| Algorithm |                                                          |
+-----------+----------------------------------------------------------+
#### Kafka Producer
Kafka
Producer目标将数据写入Kafka集群。当在微服务管道中使用时，目的地还可以向微服务源发送响应。
在配置Kafka
Producer时，您将定义连接信息，分区策略和要使用的数据格式。您还可以配置Kafka
Producer来确定要在运行时写入的主题。
Kafka
Producer根据您选择的分区策略将数据传递到Kafka主题中的分区。您可以选择将一批记录作为一条消息写到Kafka集群。当您希望目标将响应发送到微服务管道中的微服务源时，可以指定要发送的响应的类型。
您可以根据需要添加其他Kafka配置属性。您还可以将源配置为使用Kafka安全功能。
您可以将Kafka Producer配置为与Confluent Schema
Registry配合使用。Confluent Schema
Registry是Avro架构的分布式存储层，该架构使用Kafka作为其底层存储机制。
配置Kafka Producer目标，以将数据写入Kafka集群的顺序如下：
(1)在"属性"面板的" 常规"选项卡上，配置以下属性：
+---------------+------------------------------------------------------+
| **常规属性**  | **说明**                                             |
+===============+======================================================+
| 姓名          | 阶段名称                                             |
+---------------+------------------------------------------------------+
| 说明          | 可选说明                                             |
+---------------+------------------------------------------------------+
| Required      | 必须包含要传递到阶段的记录的数据的字段。             |
| Fields        |                                                      |
|               | 提示：您可以包括阶段使用的字段。                     |
|               |                                                      |
|               | 不包括所                                             |
|               | 有必需字段的记录将根据为管道配置的错误处理进行处理。 |
+---------------+------------------------------------------------------+
| Preconditions | 必须计算为true才能允许                               |
|               | 记录进入处理阶段的条件。单击添加以创建其他前提条件。 |
|               |                                                      |
|               | 不满足所                                             |
|               | 有前提条件的记录将基于为阶段配置的错误处理进行处理。 |
+---------------+------------------------------------------------------+
| On Record     | 阶段的错误记录处理：                                 |
| Error         |                                                      |
|               | 丢弃-丢弃记录。                                      |
|               |                                                      |
|               | 发送到错误-将记录发送到管道以进行错误处理。          |
|               |                                                      |
|               | 停止管道-停止管道。                                  |
+---------------+------------------------------------------------------+
(2)在"kafka"选项卡上，配置以下属性：
+----------------+-----------------------------------------------------+
| **Kafka        | **描述**                                            |
| Properties**   |                                                     |
+================+=====================================================+
| Broker URI     | Kafka代                                             |
|                | 理的连接字符串。使用以下格式： \:\。  |
|                |                                                     |
|                | 要确保连接，请输入其他代理URI的逗号分隔列表。       |
+----------------+-----------------------------------------------------+
| Runtime Topic  | 在运行时评估表达式，以确定每个记录要使用的主题。    |
| Resolution     |                                                     |
+----------------+-----------------------------------------------------+
| Topic          | 要使用的主题。                                      |
|                |                                                     |
|                | 使用运行时主题解析时不可用。                        |
+----------------+-----------------------------------------------------+
| Topic          | 该表达式用于确定使用运行时主题解析时每              |
| Expression     | 个记录的写入位置。使用计算结果为主题名称的表达式。  |
+----------------+-----------------------------------------------------+
| Topic White    | 使用运行时主题解析时要写                            |
| List           | 入的有效主题名称的列表。用于避免写入无效的主题。解  |
|                | 析为无效主题名称的记录将传递到阶段以进行错误处理。  |
|                |                                                     |
|                | 使用星号（\*）允许                                  |
|                | 写入任何主题名称。默认情况下，所有主题名称均有效。  |
+----------------+-----------------------------------------------------+
| Partition      | 用于写入分区的策略：                                |
| Strategy       |                                                     |
|                | Round Robin-轮流写入不同的分区。                    |
|                |                                                     |
|                | 随机-随机写入分区。                                 |
|                |                                                     |
|                | 表达式-使用表达式将数据                             |
|                | 写入不同的分区。将记录写到表达式结果指定的分区中。  |
|                |                                                     |
|                | 默认-使用表达式从                                   |
|                | 记录中提取分区键。根据分区键的哈希将记录写入分区。  |
+----------------+-----------------------------------------------------+
| Partition      | 与默认或表达式分区策略一起使用的表达式。            |
| Expression     |                                                     |
|                | 使用默认分区策略时，请指定一个表达式，该表达        |
|                | 式从记录中返回分区键。该表达式必须计算为字符串值。  |
|                |                                                     |
|                | 使用表达式分区策略时，请                            |
|                | 指定一个表达式，该表达式的计算结果为您希望将每个记  |
|                | 录写入的分区。分区号以0开头。表达式必须计算为数值。 |
|                |                                                     |
|                | （可选）单击Ctrl +空格键以帮助创建表达式。          |
+----------------+-----------------------------------------------------+
| One Message    | 对于每个批次，将记录作为一条消息写入每个分区。      |
| per Batch      |                                                     |
+----------------+-----------------------------------------------------+
| Kafka          | 要使用的其他Kafka属性。使用[简单或批量              |
| Configuration  | 编辑模式](https://streamsets.com/documentation/data |
|                | collector/latest/help/datacollector/UserGuide/Pipel |
|                | ine_Configuration/SimpleBulkEdit.html#concept_alb_b |
|                | 3y_cbb)，单击 添加图标，然后定义Kafka属性名称和值。 |
|                |                                                     |
|                | 使用                                                |
|                | Kafka期望的属性名称和值。不要使用broker.list属性。  |
|                |                                                     |
|                | 有关启用与Kafka的安全连接的信息，请                 |
|                | 参阅[启用安全性](https://streamsets.com/documentati |
|                | on/datacollector/latest/help/datacollector/UserGuid |
|                | e/Destinations/KProducer.html#concept_znr_b3c_rw)。 |
+----------------+-----------------------------------------------------+
| Key Serializer | 当配置                                              |
|                | 的数据格式为Avro时，用于序列化Kafka消息密钥的方法。 |
|                |                                                     |
|                | 设置为Confluent以将Avro模式ID嵌入到Kafka            |
|                | Producer编写的每条消息中。                          |
+----------------+-----------------------------------------------------+
| Value          | 当配                                                |
| Serializer     | 置的数据格式为Avro时，用于序列化Kafka消息值的方法。 |
|                |                                                     |
|                | 设置为Confluent以将Avro模式ID嵌入到Kafka            |
|                | Producer编写的每条消息中。                          |
+----------------+-----------------------------------------------------+
(3)在"数据格式"选项卡上，配置以下属性：
+----------------+-----------------------------------------------------+
| **Data Format  | **描述**                                            |
| Property**     |                                                     |
+================+=====================================================+
| Data Format    | 消息的数据格式。使用以下格式之一：                  |
|                |                                                     |
|                | Avro                                                |
|                |                                                     |
|                | Binary                                              |
|                |                                                     |
|                | Delimited                                           |
|                |                                                     |
|                | JSON                                                |
|                |                                                     |
|                | Protobuf                                            |
|                |                                                     |
|                | [SDC                                                |
|                | Record](https://streamsets.com/documentation/d      |
|                | atacollector/latest/help/datacollector/UserGuide/Da |
|                | ta_Formats/SDCRecordFormat.html#concept_qkk_mwk_br) |
|                |                                                     |
|                | Text                                                |
|                |                                                     |
|                | XML                                                 |
|                |                                                     |
|                | 在Data Collector Edge管道中，                       |
|                | 目标仅支持Binary，JSON，SDC Record和Text数据格式。  |
+----------------+-----------------------------------------------------+
#### To Error
To Error目标将记录传递到管道以进行错误处理。使用" To
Error"目标将记录流发送到管道错误处理。
"To
Error"目标没有配置选项。要在管道中使用目标，只需添加阶段并将管道连接到阶段即可。
通常，每条错误记录都是从管道中生成及删除的。使用某些处理器（例如流选择器或JavaScript评估器），您可以创建多个数据流，包括您认为是错误记录的记录流。您可以将错误流连接到To
Error目标，以将记录传递到管道以进行错误处理。
管道根据为管道配置的"错误记录"属性执行错误处理。
与其他目标一样，您可以监视传递到"出错"目标的记录数，还可以创建度量标准和数据警报。您还可以检查作为数据预览或监视器快照的一部分发送到目标的数据。
![](media/image95.png){width="5.763888888888889in"
height="2.8944444444444444in"}
#### Trash
Trash destination将丢弃记录。将"Trash
destination"目标用作从管道中丢弃的记录的直观表示。或者，您可以在开发过程中将"Trash
destination"目标用作临时占位符。
当您使用Trash