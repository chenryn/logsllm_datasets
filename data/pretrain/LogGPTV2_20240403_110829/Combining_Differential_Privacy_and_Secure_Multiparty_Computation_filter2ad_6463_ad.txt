### 1. 引言
在比较非差分隐私和全局预算版本的中位数算法时，我们发现差分隐私版本通常更快。这是由于选择算法（从n个元素中选择第i个排名元素）的运行时间具有高方差，并且对于较大的输入规模，我们只进行了一次运行。运行时间的分布不依赖于实际输入，在运行选择算法之前，输入数据会被随机打乱。在差分隐私版本中，我们需要选择大约ℓ个中间排名的元素，而不仅仅是1或2个，但选择算法的平均运行时间仅增加了(1 + ℓ/n)倍，通常情况下ℓ远小于n。

### 2. 全局预算与就地预算的比较
当我们比较全局预算版本的差分隐私与就地预算版本时，发现额外开销主要取决于n，而不是聚合函数。这是因为我们在两种情况下使用相同的ε-差分隐私聚合函数，但在后一种情况下，我们还需要检查哪些行有足够的预算并减少这些预算。

同样，带有来源预算的差分隐私版本与就地预算版本相比，额外开销也主要取决于n，而不是聚合函数。

### 3. 性能测量
我们还测量了哪些操作占用了大部分运行时间。例如，对于带有来源预算的相关性计算，当n = 200,000且ℓ = 100时，总运行时间为112,300毫秒，其中58,168毫秒用于排序（主要是比较），32,949毫秒用于计算频率表和回传值（包括19,697毫秒的相等性检查和11,707毫秒的乘法）。如第9节所述，如果查询是在与前一个查询相同的值表上进行的，则不需要重新排序，运行时间将为54,132毫秒。如果掩码向量也与前一个查询相同，我们可以省略某些步骤，运行时间将进一步减少到21,183毫秒，这比就地预算版本慢2.5倍，但比完整的来源预算版本快5.3倍。

对于带有就地预算的相关性计算，当n = 2,000,000且ℓ = 1,000时，与全局预算版本相比，额外开销约为21,000毫秒，其中包括13,237毫秒的比较、1,943毫秒的乘法和4,345毫秒的数据库写入操作。这种开销对于其他聚合函数也是类似的。

因此，对于我们实现的差分隐私来说，最重要的操作是整数比较，其次是相等性检查和乘法。对于较大的ℓ/n比率（即较小的n），浮点运算也很重要。

### 4. 讨论
我们的系统是在Sharemind平台上实现的，该平台提供了针对被动攻击者的安全性（同时也提供了针对主动攻击者的隐私保护 [30]）。我们可以考虑在提供主动安全性的SMC平台上，差分隐私的开销会如何变化。其中一个最高效的主动安全协议集是SPDZ [21]。它们使用昂贵的离线预处理阶段，在在线阶段允许每个参与方只需发送两个值给其他参与方（相比之下，Sharemind需要发送五个值，且不使用预处理）。因此，在SPDZ上整数乘法会更快，但它们只是我们算法的一小部分。

对我们来说更重要的是整数比较，在我们的测试中（使用64位整数），每百万元素的比较时间约为6.5秒。乘法则需要0.5秒/百万元素，相等性检查需要3秒/百万元素。根据[21]，SPDZ上的64位整数比较大约比乘法慢90倍，即可能需要18秒/百万元素，比在Sharemind上慢约3倍。相等性检查在[21]中没有提及，但[6]中的最佳相等性检查协议在在线阶段需要对64位整数进行8次秘密值公开（以及更多的预计算），即比乘法多4倍。如果能在SPDZ上实现，可能需要0.8秒/百万元素，比在Sharemind上快约4倍。因此，我们猜测SPDZ在线阶段的通信成本不会比我们的实现高出很多。

### 5. 结论
我们提出了在秘密共享数据上执行差分隐私统计分析的有效算法，并在SMC平台Sharemind上实现了这些算法。当前实现支持计数、求和、算术平均、中位数和线性相关系数等聚合函数，但可以很容易地扩展到其他函数。我们实现了三种不同类型的差分隐私预算并比较了它们的性能。我们可以得出结论，基于秘密共享的SMC平台可以执行各种形式的差分隐私的复杂查询，并且性能足够好，可以在实践中使用。

### 参考文献
[1] G. ´Acs and C. Castelluccia. I have a dream! (differentially private smart metering). In T. Filler, T. Pevn´y, S. Craver, and A. D. Ker, editors, Information Hiding - 13th International Conference, IH 2011, Prague, Czech Republic, May 18-20, 2011, Revised Selected Papers, volume 6958 of Lecture Notes in Computer Science, pages 118–132. Springer, 2011.
...
[33] A. C.-C. Yao. Protocols for secure computations (extended abstract). In FOCS, pages 160–164. IEEE, 1982.

通过这种方式，文本变得更加清晰、连贯和专业。