title:Acyclic type-of-relationship problems on the internet: an experimental
analysis
author:Benjamin Hummel and
Sven Kosub
Acyclic Type-of-Relationship Problems on the Internet:
An Experimental Analysis∗
Benjamin Hummel
Fakultät für Informatik
Technische Universität München
ABSTRACT
An experimental study of the feasibility and accuracy of the
acyclicity approach introduced in [14] for the inference of
business relationships among autonomous systems (ASes)
is provided. We investigate the maximum acyclic type-of-
relationship problem: on a given set of AS paths, ﬁnd a
maximum-cardinality subset which allows an acyclic and
valley-free orientation. Inapproximability and NP-hardness
results for this problem are presented and a heuristic is de-
signed. The heuristic is experimentally compared to most
of the state-of-the-art algorithms on a reliable data set. It
turns out that the proposed heuristic produces the least
number of misclassiﬁed customer-to-provider relationships
among the tested algorithms. Moreover, it is ﬂexible in han-
dling pre-knowledge in the sense that already a small amount
of correct relationships is enough to produce a high-quality
relationship classiﬁcation. Furthermore, the reliable data set
is used to validate the acyclicity assumptions. The ﬁndings
demonstrate that acyclicity notions should be an integral
part of models of AS relationships.
Categories and Subject Descriptors
C.2 [Computer-Communication Networks]: Network
Protocols, Network Operations; F.2.2 [Nonnumerical Al-
gorithms and Problems]: Computations on discrete
structures
General Terms
Measurement, Algorithms
Keywords
Inter-domain Routing, AS Relationships, Algorithms
∗All data
sets
used
and Java
implementations
algorithms
http://www14.in.tum.de/software/BGP/hummel-kosub-
07.html.
available
herein
are
of
online
the
at
Permission to make digital or hard copies of all or part of this work for
personal or classroom use is granted without fee provided that copies are
not made or distributed for proﬁt or commercial advantage and that copies
bear this notice and the full citation on the ﬁrst page. To copy otherwise, to
republish, to post on servers or to redistribute to lists, requires prior speciﬁc
permission and/or a fee.
IMC’07, October 24-26, 2007, San Diego, California, USA.
Copyright 2007 ACM 978-1-59593-908-1/07/0010 ...$5.00.
Sven Kosub
Fakultät für Informatik
Technische Universität München
INTRODUCTION
1.
Interrelationship analysis of autonomous systems (ASes, for
short) has recently attracted much attention in both theoret-
ical and practical research on Internet inter-domain routing
with BGP (see, e.g., [8, 19, 18, 7, 4, 14, 6]). This interest
is motivated by insights how routing stability and quality in
the Internet is inﬂuenced not only by physical connections
between ASes but heavily by their business relationships.
As business contracts are subject to privacy, computational
tools and techniques are required to infer close-to-reality re-
lationship classiﬁcations from publicly available resources
such as WHOIS databases, the Internet Routing Registry
[15], or BGP beacons (e.g., [17, 21]).
A useful approach is the interpretation of observable BGP
routes. Techniques based on this approach usually work as
follows: collect a set of AS paths from BGP routers, obtain
an AS-level connectivity graph (the AS graph) by merging
all AS paths, and label the AS graph with business rela-
tions such that all—actually, as many as possible—collected
AS paths are valley-free. Valley-freeness is a characteristic
property of AS paths based on economic rationality, which
in a simpliﬁed version says that, in the direction of traﬃc,
a customer-to-provider link should never follow a provider-
to-customer link. The implementations range from purely
combinatorial (e.g., [4, 14]) to purely heuristical one’s (e.g.,
[8, 19, 23]). Though there has been some criticism of unreal-
istic classiﬁcations [7], the empirical ﬁndings are encouraging
for further developments.
In [14], acyclicity has been added to valley-freeness as an-
other structural condition of AS graph labelings. The ra-
tionale for acyclicity is that it is unlikely the case that an
AS A is a provider of an AS B, AS B is a provider of an
AS C, and AS C is a provider of AS A. It has turned out
that ﬁnding labelings which are both valley-free on the path
set and acyclic in the AS graph is easy, even if we want
to respect explicit pre-knowledge (following the partialness-
to-entireness methodology [23]). However, this theoretical
feasibility and plausibility of the acyclicity approach to AS
relationship inference has not been supported with empirical
evidence in [14].
In this paper we contribute to the experimental analysis
of acyclic type-of-relationship problems in three ways.
• First, we operationalize acyclicity. In [14], algorithms
have been presented to test whether all paths of a given
path set allow acyclic and valley-free orientations. In
practice, collected path sets are expected to fail this
test. Thus, these algorithms are of theoretical interest
only. We consider the problem to ﬁnd acyclic orienta-
tions which maximize the number of valley-free paths.
We provide lower bounds on the approximability of
this problem (which implies the NP-hardness as well)
and we design a fast heuristic for ﬁnding acyclic orien-
tations which are valley-free on a large part of a given
path set.
• Second, we validate the acyclicity assumptions from
[14].
In doing so, one issue is obtaining a reliable
data set. We report on several techniques employed.
The graph we receive from the reliable data set when
only using customer-to-provider relationship is acylic.
Including peer-to-peer relationships is more problem-
atic. It seems that we do not yet have the right un-
derstanding how peer-to-peer relationships aﬀect the
graph-theoretical structure of BGP routes and the AS
graph.
• Third, we compare the inference quality of our heuris-
tic to a set of standard algorithms from the literature.
On the reliable data set, our heuristic produces the
lowest number of misclassiﬁed customer-to-provider
edges among all algorithms tested (in numbers: ap-
proximately 0.3% of all edges in the set are misclassi-
ﬁed). We further test how the inference quality of the
algorithms depend on initial pre-knowledge. Here, it is
observed that for our approach the relative number of
misclassiﬁed customer-to-provider edges is nearly inde-
pendent of the amount of pre-knowledge. That is, al-
ready a small amount of correct relationships is enough
to infer a high-quality classiﬁcation among the ASes.
All in all, the ﬁndings of this paper indicate that the
method proposed is a feasible and ﬂexible heuristic with ex-
cellent inference quality (at least with respect to customer-
to-provider relationships) and that acyclicity should be an
integral part of any further accuracy improvements.
2. RELATED WORK
Several algorithms have been proposed to infer relation-
ship types from AS paths. The ﬁrst attempt was made in
[8] where the valley-free path model was introduced and a
heuristic was designed based on statistical properties of a
given path set. This approach was pushed further in [19,
23] to combine valley-free path labelings obtained from dif-
ferent observation points and from sources other than AS
paths. In [4] (and some precursor papers), a combinatorial
approach is developped based on expressing valley-freeness
of paths in terms of the 2SAT problem. A combination of the
2SAT-based formulation of valley-freeness and the statistical
properties of path sets in terms of mathematical program-
ming has been proposed in [7, 6]. The acyclicity approach
to interrelationship analysis is from [14]. Computational
techniques not based on AS path interpretation have been
proposed and discussed in, e.g., [18, 23, 5, 6].
3. PRELIMINARIES
We brieﬂy describe a simple, abstract model of inter-domain
routing in the Internet using BGP (see, e.g., [22, 16, 9, 8]).
3.1 The Selective Export Rule
The elementary entities in our Internet world are IP
adresses,
i.e., bit strings of prescribed length. An au-
tonomous system (AS) is a connected group of one or more
provider
AS v exports to
own routes
Yes
customer routes Yes
No
provider routes
peer routes
No
customer
Yes
Yes
Yes
Yes
peer
Yes
Yes
No
No
sibling
Yes
Yes
Yes
Yes
Figure 1: The Selective Export Rule.
IP preﬁxes (i.e., blocks of contiguous IP adresses) run by one
or more network operators which has a single and clearly
deﬁned routing policy [10]. An AS aims at providing global
reachability for its IP adresses. To achieve this goal, ASes
having common physical connections exchange routing in-
formation as governed by their own local routing policies.
BGP is the de facto standard protocol to manage data traf-
ﬁc between ASes for inter-domain routing as well as for route
propagation.
Reachability in the Internet depends on (physical) con-
nectivity and the contractual relationships between ASes.
The most fundamental binary business relationships are
customer-to-provider (where the provider sells routes to the
customer), peer-to-peer (where the involved ASes provide
special routes to their customers but no transit for each
other), and sibling-to-sibling (where both ASes belong to the
same administrative domain). Evidently, sibling-to-sibling
relations are transitive. More peculiar relationships appear
in the real world (see, e.g., [8]). We restrict ourselves to the
three mentioned types of relationships.
More speciﬁcally, let V be a set of AS numbers. The undi-
rected graph G = (V, E) where E corresponds to physical
connections between ASes is called a connectivity graph at
the AS level or simply AS graph. For any AS v ∈ V denote
the set of all siblings of v (including v itself) as Sibl(v), and
R(v) the set of all currently active AS paths in the BGP
routing table of v, i.e., all AS paths that have been an-
nounced from neighboring ASes at a certain time and never
been withdrawn. Assumed that there are no misconﬁgu-
rations of BGP, all AS paths in R(v) are loopless and not
including v. Here, we say that an AS path is loopless when-
ever between two sibling ASes on the path, no non-sibling
AS is passed. Based on the neighborhood classiﬁcation, we
further divide R(v) into four categories. A loopless AS path
(u1, . . . , ur) ∈ R(v) is
a customer route of v ⇐⇒def
a provider route of v ⇐⇒def
a peer route of v ⇐⇒def
an own route of v ⇐⇒def
leftmost ui /∈ Sibl(v) is a customer of v,
leftmost ui /∈ Sibl(v) is a provider of v,
leftmost ui /∈ Sibl(v) is a peering partner of v,
for all 1 ≤ i ≤ r, ui ∈ Sibl(v).
Now, typically (at least, recommendably), ASes set up their
export policies according to the Selective Export Rule [1,
12, 8] as described in Figure 1. In our simpliﬁed model, the
receiving AS gets from an AS those routes destined for it