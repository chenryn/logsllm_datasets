::: para
这些硬件设备都被显示为物理连接到虚拟机，但设备的驱动以不同方式工作。
:::
::: section
::: titlepage
## [⁠]{#chap-Virtualization_Getting_Started-Products.html#sec-Virtualization_Getting_Started-Products-virt-emulated-devices}3.3.1. 虚拟和仿真设备 {.title}
:::
::: para
KVM
在软件中实现了虚拟机的多个核心设备。这些仿真硬件设备对虚拟化操作系统至关重要。
:::
::: para
仿真设备即完全使用软件实现的虚拟化设备。
:::
::: para
仿真驱动可能使用物理设备，或虚拟化软件设备。仿真驱动是虚拟机和 Linux
内核（管理源设备）间的"翻译层"。设备层的指示会由 KVM
虚拟机监控程序进行完全转换。任何可以被 Linux
内核识别的同类设备（储存、网络、键盘和鼠标），都可以作为仿真驱动的后端源设备。
:::
::: variablelist
[虚拟化 CPU （vCPU）]{.term}
:   ::: para
    无论主机 CPU 的数量有多少，主机系统都可以为客机提供多达 160 个虚拟化
    CPU （vCPU）。
    :::
[仿真图形设备]{.term}
:   ::: para
    有两种仿真图形设备可供选择。这类设备可以使用 SPICE （Simple Protocol
    for Independent Computing Environments）协议或 VNC 进行连接：
    :::
    ::: {.itemizedlist xmlns:d="http://docbook.org/ns/docbook"}
    -   ::: para
        Cirrus CLGD 5446 PCI VGA 卡（使用 [*cirrus*]{.emphasis} 设备）
        :::
    -   ::: para
        标准 VGA 图形卡，带有 Bochs VESA
        扩展程序（硬件等级，包括所有非标准模式）
        :::
    :::
[仿真系统组件]{.term}
:   ::: para
    仿真以下核心系统组件来提供基本系统功能：
    :::
    ::: {.itemizedlist xmlns:d="http://docbook.org/ns/docbook"}
    -   ::: para
        Intel i440FX 主机 PCI 网桥
        :::
    -   ::: para
        PIIX3 PCI 到 ISA 的网桥
        :::
    -   ::: para
        PS/2 鼠标和键盘
        :::
    -   ::: para
        EvTouch USB 图形平板设备
        :::
    -   ::: para
        PCI UHCI USB 控制器与虚拟化 USB 集线器
        :::
    -   ::: para
        仿真串口
        :::
    -   ::: para
        EHCI 控制器，虚拟化 USB 存储和 USB 鼠标
        :::
    -   ::: para
        USB 3.0 xHCI 主机控制器（Red Hat Enterprise Linux 7.1 技术预览）
        :::
    :::
[仿真声音设备]{.term}
:   ::: para
    Red Hat Enterprise Linux 6.1 以上版本提供了仿真（Intel） HDA
    声音设备，` intel-hda `{.systemitem}。此设备由以下客机运行系统进行支持：
    :::
    ::: {.itemizedlist xmlns:d="http://docbook.org/ns/docbook"}
    -   ::: para
        Red Hat Enterprise Linux 7，用于 x86_64 架构
        :::
    -   ::: para
        Red Hat Enterprise Linux 6，用于 i386 和 x86_64 架构
        :::
    -   ::: para
        Red Hat Enterprise Linux 5，用于 i386 和 x86_64 架构
        :::
    -   ::: para
        Red Hat Enterprise Linux 4，用于 i386 和 x86_64 架构
        :::
    -   ::: para
        Windows 7，用于 i386 和 x86_64 架构
        :::
    -   ::: para
        Windows 2008 R2，用于 x86_64 架构
        :::
    :::
    ::: para
    以下仿真声音系统同样可供选择，但鉴于与固定客机运行系统兼容性问题，不推荐使用：
    :::
    ::: {.itemizedlist xmlns:d="http://docbook.org/ns/docbook"}
    -   ::: para
        `ac97`{.systemitem}，仿真 Intel 82801AA AC97 音频兼容声卡
        :::
    :::
[仿真监视器设备]{.term}
:   ::: para
    Red Hat Enterprise Linux 6.0
    及以上版本提供了两种仿真监视器设备。监视器可以在虚拟机超载或未响应时，自动重启虚拟机。
    :::
    ::: para
    [watchdog]{.package} 程序包务必安装在客机上。
    :::
    ::: para
    两种可供选择的设备为：
    :::
    ::: {.itemizedlist xmlns:d="http://docbook.org/ns/docbook"}
    -   ::: para
        `i6300esb`{.systemitem}，仿真 Intel 6300 ESB PCI
        监视器设备。它支持客机操作系统 Red Hat Enterprise Linux 版本 6.0
        以上，为推荐使用设备。
        :::
    -   ::: para
        `ib700`{.systemitem}，仿真 iBase 700 ISA
        监视器设备。`ib700`{.systemitem} 监视器仅支持使用 Red Hat
        Enterprise Linux  6.2 以上版本的客机。
        :::
    :::
    ::: para
    两种监视器设备均支持客机操作系统 Red Hat Enterprise Linux 6.2
    以上版本的 i386 与 x86_64 架构。
    :::
[仿真网络设备]{.term}
:   ::: para
    两种仿真网络设备可供选择：
    :::
    ::: {.itemizedlist xmlns:d="http://docbook.org/ns/docbook"}
    -   ::: para
        `e1000`{.systemitem} 设备仿真了 Intel E1000 网络适配器（Intel
        82540EM、82573L、82544GC）。
        :::
    -   ::: para
        `rtl8139`{.systemitem} 设备仿真了 Realtek 8139 网络适配器。
        :::
    :::
[仿真储存驱动]{.term}
:   ::: para
    储存驱动与储存池可以使用这些仿真设备，将储存设备与虚拟机相连。客机使用仿真储存驱动可访问储存池。
    :::
    ::: para
    注意，同所有虚拟设备一样，储存驱动不是储存设备。对于虚拟机器，该驱动作为备用储存设备、文件或储存池容量进行使用。备用储存设备可为任何支持的储存设备、文件、或储存池容量形式。
    :::
    ::: variablelist
    [仿真 IDE 驱动]{.term}
    :   ::: para
        KVM 提供两种仿真 PCI IDE 接口。仿真 IDE
        驱动可以用于将多达四个虚拟化 IDE 硬盘或虚拟化 IDE
        光盘驱动组合与每台虚拟机相连接。仿真 IDE 驱动同样可用于虚拟化
        CD-ROM 和 DVD-ROM 驱动。
        :::
    [仿真软盘驱动]{.term}
    :   ::: para
        仿真软盘驱动用于创造虚拟化软驱。
        :::
    [仿真 AHCI 控制器]{.term}
    :   ::: para
        仿真 Advanced Host Controller Interface（AHCI）是 IDE
        的一种替代产品。它包括在 Red Hat Enterprise Linux 7.1
        中作为技术预览。
        :::
        ::: {.note xmlns:d="http://docbook.org/ns/docbook"}
        ::: admonition_header
        **注意**
        :::
        ::: admonition
        ::: para
        如需了解更多与 KVM 存储相关的信息，请参阅[第 3.4 节
        "储存"](#chap-Virtualization_Getting_Started-Products.html#sec-Virtualization_Getting_Started-Products-Storage){.xref}。
        :::
        :::
        :::
    :::
:::
:::
::: section
::: titlepage
## [⁠]{#chap-Virtualization_Getting_Started-Products.html#sec-Virtualization_Getting_Started-Products-paravirtdevices}3.3.2. 半虚拟化设备 {.title}
:::
::: para
半虚拟化为客机使用主机上的设备提供了快速且高效的通讯方式。KVM
为虚拟机提供准虚拟化设备，它使用 Virtio API
作为虚拟机监控程序和客机的中间层。
:::
::: para
一些半虚拟化设备可以减少 I/O 的延迟，并把 I/O
的吞吐量提高至近裸机水平，而其它准虚拟化设备可以把本来无法使用的功能添加到虚拟机上。当虚拟机运行大小需要密集
I/O 操作的应用程序时，推荐使用半虚拟化设备，而不是使用仿真设备。
:::
::: para
所有 virtio
设备都有两部分：主机设备和客机驱动。半虚拟化设备驱动允许客机操作系统访问主机系统上的物理设备。
:::
::: para
半虚拟化设备的驱动必须安装在客机操作系统上。默认情况下，半虚拟化设备驱动包含在
Red Hat Enterprise Linux 4.7 以上版本、Red Hat Enterprise Linux 5.4
以上版本、以及 Red Hat Enterprise Linux6.0
以上版本中。半虚拟化设备驱动须在 Windows 客机上手动安装。
:::
::: {.note xmlns:d="http://docbook.org/ns/docbook"}
::: admonition_header
**注意**
:::
::: admonition
::: para
关于使用半虚拟化设备和驱动的更多信息，请参照《*Red Hat Enterprise
Linux 7 虚拟化部署与管理指南* 》。
:::
:::
:::
::: variablelist
[半虚拟化网络设备（virtio-net）]{.term}
:   ::: para
    半虚拟化网络设备是虚拟化网络设备，它为虚拟机提供了网络访问能力，并可以提供网络性能及减少网络延迟。
    :::
[半虚拟化块设备（virtio-blk）]{.term}
:   ::: para
    半虚拟化块设备是高性能虚拟化储存设备，它可以为虚拟机提供高性能、低延迟的
    I/O
    存储。半虚拟化块设备由虚拟机监控程序支持，与虚拟机相连（软盘驱动除外，它只能被仿真）。
    :::
[半虚拟化控制器设备（virtio-scsi）]{.term}
:   ::: para
    半虚拟化 SCSI 控制器设备是一种更为灵活且可扩展的 virtio-blk
    替代品。virtio-scsi
    客机能继承目标设备的各种特征，并且能操作几百个设备，相比之下，virtio-blk
    仅能处理 28 台设备。
    :::
    ::: para
    virtio-scsi 完全支持以下客机操作系统：
    :::
    ::: para
    ::: {.itemizedlist xmlns:d="http://docbook.org/ns/docbook"}
    -   ::: para
        Red Hat Enterprise Linux 7
        :::
    -   ::: para
        Red Hat Enterprise Linux 6.4 以上版本。
        :::
    -   ::: para
        Windows Server 2008（32/64 比特）
        :::
    -   ::: para
        Windows Server 2008 R2
        :::
    -   ::: para
        Windows 7（32/64 比特）
        :::
    -   ::: para
        Windows Server 2012
        :::
    -   ::: para
        Windows Server 2012 R2
        :::
    -   ::: para
        Windows 8（32/64 比特）
        :::
    -   ::: para
        Windows 8.1（32/64 比特）
        :::
    :::
    :::