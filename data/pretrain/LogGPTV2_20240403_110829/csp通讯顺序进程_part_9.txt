5
设s为一个二元序列，我们把&中所有第一个元素为×的元
<>=
(f*(s))[]= f(s[i])
s[0]=soAs[i+1]=s'[]
如果0≤i^s)interleaves(t,u)=(t<>At=x
S interleaves(t,u)=s interleaves(u,t)
<>interleaves(t,u)=(t=<>^u=<>)
挑选
Au,=xAs interleaves(t,u'))
Asinterleaves(t',u))V(u≠<>
=
若#s
若讠#8
若s<>
---
## Page 61
结果定义为s↓x。元案对的元素之间我们用--个黑点隔开。这
对第一个自变量是严格的，并以为兵左单位元，
符号√可以说就象胶水·样，它把s和粘到一起；没有这个胶
如果√在的结尾出现了，就将它去掉，把附加到s的剩余的
无法开始，即
列。8和的组合记为(s;t)。如果√没有在s毕出现，则
结尾。设1为一个迹，它记录的是已经终止后才于始的事件序
1.9.7组合
节中定义）。
如果8不是二元序列，则s↓a表示a在s中出现的次数（如1.6.6
且
样如果
它的第一个白变量还是第二个白变量都是单调的。而且组合算予
性质的。象连接一样，它是结合的。与连接不同的是，它不论对
这个组合算子尽管火家不太熟悉，但它还是具备儿条常见的代数
L2A（s^u)=st
出现后的符号都不参与组合，即将它们舍掉，
出现在迹的中间（尽管是不正确的），我们规定凡是在√第一次
水，就粘不上去(L1)。为了确保定义的完整性，考虑到V可能
2(s)t=s
部分，即
L1 s;t=s
L3
5
设符号√表示进程的成功终止，这个符号只能出现在迹的
(x)v=x()
(^t) ↓x=t↓x
<>↓x=<>
若→（in s)
s=
s↓d=<>
↓α=
若一（in s)
若-（ins)
若y≠x
碧
---
## Page 62
以后我们用缩写形式
不能超过投入的硬币数
记载观察到的电压的任意变化的方法是一样的。
示所描述的进程的一个任意迹，这和煎一段中我们用记号：和u"
X1
某一给定时刻为止发生的事件的迹。我们用特殊变量记号tr表
学和工程中使用数学时，很基本的一点就是要理解变量的含义。
在描越中，谓词中的理解为输入电压，u’为输出电压。在科
就是
器的描越，其电压输入范围为1伏，放大约为10倍，表示成谓词
个产品行为的某个可观察到的方面。例如，有这样一个电子放大
为。这类说明是包含儿个自由变量的谓词，每个自由变量表示这
L7 s;=s
如果√仅在迹的结尾出现，那么也是迹的右单位元，即有
L6 ;t=1
L5
L4B s≤t>((s;u)≤(t;u))
L4As≤t>((u;s)≤(u;t))
L3 s,(t;u)=（s;t）；u
对进程而言，能观察到的和进程行为最直接有关的，就是到
<>t=<>
自动售货机的主人不想亏本，他就规定送出巧克力的块数
举例
一般说来，某项产品的功能描述说明这个产品的预期的行
NOLOSS=(#(tr↑{choe})≤#(tr{coin}))
AMP10=(0≤v≤1>|v′-10*|≤1)
若-（<>in（)'）
tr↓c=#(tr})
1.10描
0
---
## Page 63
果输入电压超出了指定范围，输出电压可以是任意值，但这不算
栏说明放大器的输出并不是完全由输入决定的。第四栏表明，如
所有这些观察结果除了最后一栏外都满足AMP10。第二和第三
特性的观察结果
要S中的变量取的是由观察P得到的随时，S就为真，或更形式
7.10.1满足
的要求
多少巧克力
X2顾客也希望自动售货机公平合理，插入多少硬币就能得到
是违背描。
地记为Vtr，tr∈traces(P)>S。臀如，下列表格给出对放大器
其含义是，
X6
X5
X4
表示符号c在tr中出现的次数（见1.6.6节)。
VMS2（1.1.3节X6）的描
设P为满足描迹S的产品，我们说P满足S，缩写为
修改复杂自动售货机的描述，不允许它连续接受三枚硬币
MENDV MC = (tr∈traces(V MC)AVMCFIX)
改进后的机器的描述为
VMSPEG= NOLOSSAFAIR1
可观察到的P的行为都由S所刘画了；换句话说，只
FAIR1=((tr ↓coin)≤(tr ↓choc) + 1)
（在这个简单的例子里，我们排除过高电压会使产
(7 U!--) =XIdDWA .
(≤((tr↓coin)-(tr·↓choc))≤2
=(0≤((tr ↓coin)-(tr ↓choc))≤1)
0.5.52.1
123.45
1
口
口
---
## Page 64
的缩写形式。
作为完整证明
有了这项法则，我们有时可将证明串起来；如果S>T，我们将
可用T来刻画。于是每个满足S的产品也一定满足较弱的描述
S(n)为含变量n的谓词
L3
如果描逃6从逻辑上讲蕴含了另一描述T，
法则L2A可推广到无穷个描迹的逻辑与，即推广到全称量词。设
L2A
如果··产品同时满足两种不同的描述，则它也满足它们的并合，
L2
即
Lt Psattrue
品也能满足这--无意义的、无需求的描述。即
施加任何限制，因此所有产品都满足这一要求，甚至是坏掉的产
品击穿的可能性。）
当P不随n变化时，
以下法则给出满足关系的儿个最一般的性质。true不对产品
Psat S
有Psat(S∧T)
P sat T
PsatS
如果P sat S
如果 Vn.(P sat S(n))
而且 P sat T 
营
如果 Psat S
山介：
Psat T
S=T
Psat(Vn.S(n))
则由6刻画的观察也
t
由L3
---
## Page 65
L4D 
刻画，故有
事件中的任意一个开始，而迹的尾部必须由被选中分支的描逃来
二元选择的情况与前缀类似，区别仅在于，逊可以以两个供选择
L4C
这项法则的推论解决双前缀的问题，有
L4B
所刻画的，即
尾部双是P的--个迹。所以这个尾部一-定是由P的任何一个描述
进程（o→P)的迹一开始是空的。每个后续的迹均以开始，其
L4A STOP sat(tr=)
程什么也不做，故有
自由变景#之外，还可有其它的自由变量。
复杂表达式代换，例如S（tr")。必须强调，
由变量tr。然而我们写明tr的翼正原因在于要说明t：可由别的
Sa
法则，从而可运用数学中的论证方法来确保进程P满足它的描速
譬如几何学或微积分学中的方法。在这一节里，我们要给出一组
足要求，要做到这一点，可能使用有关数学分支中的论证方法，
1.10.2证明
用。在下一节里，我们将给出只适用于进程的其它法则。
不论怎样观察进程STOP，它的迹永远是空迹，因为这个逝
我们有时把描迹写作S（t#r)，以表示一个描逃通常都含有自
在设计产品时，设计人员的责任就是确保他设计的产品能满
以上给出的法则及共解释对所有各类产品及各类描述都适
如果 PsatS(tr)
如果Psat S(tr)
如果PsatS(tr)
则(c→d→P) sat(tr≤V(tr≥AS(tr")))
则
(((,)sV=)A<>=11) s(d0)
Qsat T(tr)
S和S（t#)中除了有
---
## Page 66
X1我们欲证(1,1.2节X2，1.10节X3)
证明
证明。
有来说都是S。我们将在2.8节中用数学理论给出更形式的
的迹。所以这个迹必须满足F"（STOP)的描述，而这个描述对所
n步的行为。故μX.F（X）的每个迹都是某个n的F*（STOP）
山于F(X)是卫式，F*(STOP)至少完至描远了μX.F(X)的前
这项法则的前提条件保证了可用归纳法证明
L6
L5如果P sat S(tr)
P的迹，因此s^tr必须由P所满足的描述来刻画，即，
后继算子的法则简单得出奇。如果tr是(P/s)的迹，则s^tr 是
L4如果 Vx∈B.(P(x) sat S(tr,x))
以上给出的儿条法则都是-般选择法则L4的特例
举例
如果F(X)是卫式
最后，我们还需要一条法则建立递归定义的正确性。
且有s∈traces(P)
(1) STOP sat tr =<>
(x:B→P(x))sat(tr=<>V(tro∈BAS(tr',tro)))
则
(P/s) sat S(s^tr)
(μX.F(X)) sat.S
((X sat S)>(F(X) sat S))
STOP sat S
((,)sV=)A=)s(0←pld0)
F*(STOP) sat S
→ 0 ≤(tr ↓ coin - tr ↓ choc)≤1
VMS sat VMSPEC
(<>↓coin)=（<>↓choc)=0
对一切n
V(tr=dAT(tr)))
43
L4A
---
## Page 67
节中将给出描速和证明某个进程永远不会停止的更一般的方法。
性的问题之后，这些简单的防御措施就不能满足要求了。在3.7
就是永远不停止的进程。可是不论怎么说，在下一章中引入并发
式递归式定义的，就不会停止动作。书写一个能停止的进程只有
不会停止汇作。其实任何进程，只要它是仅由前缀，选择以及卫
也正是由于这个原因，STOP能满足任何进程所满足的描远。
STOP自然不会做错任何事情：但是办法太消极，什么都不做。
然而STOP做为自动售货机可不称职，它对主人和顾客都无用。
击。譬如，因为有
应用L3，再应用L6即得证。
并且↓coin=（↓coin)=↓choc= l
因为<>↓coin=<>choc=↓choc= 0
(2）假设X sat（0≤(（tr↓coin)-(tr↓choc))≤1)
这个结论中隐含着对法则L3的应用。
里B为空集。只要避开了这类写法，我们就能保证写出来的进程
--个办法，就是把STOP明确写上去，或记为（x：B→P(x)），这
应用L3和L4A，我们就可证得
于是
幸运的是，
进程P满足它的描远抖不一定就意味着使用时它能无懈可
tr≥→(tr↓coin= tr"↓coin + 1
(coin-choc-→X) sat (tr≤
STOPsat0≤(r↓coin-tr↓choc)≤1
tr=<>→0≤(tr↓coin-tr↓ohoc)≤1
用另一种推理方法，很容易地可证明VMS永远
Atr↓choc= tr"↓choc + 1)
0≤((tr↓coin)-(tr↓choc))≤1
V(tr≥
Ao≤((tr"↓coin)-(tr"↓choe))
≤1))
L4C.
口
---
## Page 68