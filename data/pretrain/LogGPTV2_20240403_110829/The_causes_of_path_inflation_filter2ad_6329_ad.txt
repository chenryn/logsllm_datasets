while the destination and the optimal peering point are to the west.
The ﬁrst step in understanding the inﬂation of paths caused by
peering policy is understanding which policies are used and why.
Common policies include early-exit and late-exit.1
In early-exit
routing, the upstream ISP uses a ﬁxed peering point per source,
usually the one closest to the source, independent of the destina-
tion. Late-exit is marked by the upstream ISP carrying the packets
further than it needs to reach the closest peering point and towards
the destination of the packet. In the extreme, this policy is source-
independent, as the chosen peering point depends only on the des-
tination. Late-exit requires cooperation among ISPs, because the
upstream ISP cannot by itself know where the packet is destined
inside the downstream ISP. That is, the downstream ISP must pub-
lish information (most likely via MED attributes in BGP) about the
cost to reach destinations from each peering point, while the up-
stream cooperates by carrying trafﬁc accordingly. We also uncover
a third peering policy, that of load-balancing, in which an upstream
ISP balances load across multiple peering links.
We classify routing patterns using the simplest explanation con-
sistent with our traces. We discard ISP pairs for which we ob-
serve only a single peering point. The rest are classiﬁed as early
if only one peering point is seen from each ingress. What remain
are peerings that show “engineering” (assuming early-exit to be the
default), so the ﬁrst question to ask is whether this engineering is
consistent with late-exit.
To discover whether the engineering appears cooperative in pre-
venting latency inﬂation, we identify as late those paths that are
delivered by the upstream ISP to a peering point closer to the desti-
1There are no standard deﬁnitions for peering policies. Our char-
acterization is based on the behaviors we observed in our dataset,
rather than informally used terms.
s
r
i
a
p
P
S
I
y
l
r
a
e
-
n
o
n
f
o
F
D
C
1.0
0.8
0.6
0.4
0.2
0.0
0.0
0.2
0.4
0.6
0.8
1.0
Fraction "late" paths
Figure 8: Of those ISP pairs that choose paths that are
not “early,” this graph shows the fraction of paths that are
“helped” along toward the destination. That is, the ﬁrst ISP
carries the trafﬁc closer to the destination than necessary,
which implies some degree of cooperation and might be termed
“late-exit.” When the fraction of “helped” paths is small, an-
other policy, such as “load-balancing” may be a more likely
explanation.
nation in the downstream ISP. That is, the path length in the down-
stream ISP from peering point to destination is less than from the
early exit to the destination. We use this metric to classify policies
into three broad classes: i) Late exit, often represents a pattern of
late exit for most paths; ii) Late exit, sometimes represents a selec-
tive pattern of late exit for a minority of paths; iii) Engineered, but
not late represents a pattern where the downstream ISP carries traf-
ﬁc over longer paths, perhaps as part of a “load-balancing” strategy.
In Figure 7, we show that while half of all ISP pairs route at
least half of their preﬁxes using early-exit, many do not, hinting at
widespread cooperation among ISPs. Additionally, there is signif-
icant variation in the degree of path engineering. To the right of
the graph, 20–30% of ISP pairs appear to use only early-exit; to
the left, 10–20% route with primarily late-exit; and in between is a
wide range.
For those ISPs that do not always use early-exit, we next consider
how often the ﬁrst ISP carries trafﬁc closer to the destination. In
Figure 8, we show a cumulative distribution of the fraction of late-
exit paths. The cooperation among ISPs is apparent in this graph,
too: most ISP pairs that do not use early-exit route over 75% of
paths closer to the destination. For instance, Qwest routes almost
all preﬁxes destined to Genuity using a late-exit that is independent
of the source. A few ISP pairs route only a few paths close to the
destination: suggesting either micro-engineering of a few preﬁxes
or a limited load balancing policy.
In Figure 9, we summarize the apparent peering policy of tier-1
ISPs we inferred from our traces. We classify each pair of ISPs
once for each direction, since peering policy need not be (and of-
ten is not) symmetric. Those pairs labelled Late-exit, often deliver
more paths late (closer to the destination) than early. Those labelled
Late-exit, sometimes deliver at least 5% of paths late. Source-
dependent early-exit refers to those ISP pairs for which fewer than
5% of paths are routed specially. A threshold is needed to be robust
to anomalous routes during failures. Single peering seen have a sin-
gle peering link in one location, often connecting ISPs on different
continents. Policy has no effect for these ISP pairs. Engineered,
but not late refers to those ISPs with many paths that are not early,
but frequently (at least 1/3 of the time) are not carried closer to the
destination. Finally, some ISP pairs appear to peer based on Route-
Views [20] BGP table archives but were not observed in our dataset.
Cable Wireless
ATT-Disc
D TA G
Colt
ATT
◦
!!
?
?
x
To
!!
?
!!
?
!!
?
!
?
◦
?
•
From
ATT
ATT-Disc
Cable Wireless
Colt
DTAG
Eqip
Genuity
Genuity-europe
Global Crossing
Globix
Hong Kong Telecom
Level3
Netrail
Open Transit
Qwest
Sprint
Teleglobe
Telia
UUNet
Verio
Williams Comm
XO
!!
!
!!
◦
!
•
◦
x
x
•
!!
x
◦
x
!!
?
?
!
“Late exit,” often
(15%)
“Late-exit,” sometimes (10%)
x
◦
?
x
x
!!
!!
•
•
?
•
!
x
•
◦
◦
?
◦
•
◦
◦
◦
◦
!!
•
◦
!
!
•
?
x
?
?
!!
◦
?
◦
•
◦
!!
!
?
•
?
x
?
?
x
?
?
?
?
x
?
◦
GlobalCrossing
Genuity-europe
Genuity
Globix
•
•
?
?
!
?
◦
?
•
!!
?
•
!!
◦
◦
!!
x
•
!!
•
•
?
•
?
?
?
!!
◦
◦
?
•
◦
?
!
!
◦
◦
!
◦
◦
?
•
•
◦
?
!
•
•
!!
•
!
◦
◦
?
•
◦
!
?
◦
◦
?
•
?
?
!
x
?
?
!
Eqip
x
◦
•
◦
?
•
◦
◦
◦
◦
x
!
x
◦
?
!
•
?
!
•
?
•
?
?
◦
!
x
x
!!
!!
•
!
◦
◦
!!
?
?
?
Source-dependent “early-exit” (19%)
Single peering seen
(42%)
Hong Kong Telecom
Open Transit
Netrail
Level3
Q west
Sprint
◦
•
•
x
•
!
!!
x
!!
!!
Teleglobe
Telia
!
Williams Com m
x
•
U U Net
Verio
•
?
•
◦
◦
?
•
?
•
!!
?
◦
!
!
x
!!
?
◦
!!
!!
!!
!!
!
?
•
?
?
•
◦
?
?
x
x
!
X O
x
?
!
?
?
•
x
?
?
•
?
?
x
!!
?
•
x
?
x
?
◦
?
x
?
!
?
?
x
◦
◦
◦
◦
?
•
◦
◦
?
◦
!!
•
◦
!
•
◦
•
x
!!
!
•
•
◦
?
•