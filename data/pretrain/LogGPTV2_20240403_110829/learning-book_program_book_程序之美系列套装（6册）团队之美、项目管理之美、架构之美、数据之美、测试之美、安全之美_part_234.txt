性，PEIR可以完成更多的功能一—最显著的是在数据处理领域，这
在下一节将会介绍。因此，和一个庞大的团队一起并发，必然有其
一定的优势和不足。
数据处理
1324
---
## Page 1326
数据处理是个人数据收集系统最重要、最基础的部分，这部分几乎
都不为用户所见，而且用户也不感兴趣。用户通常是对数据处理的
结果更感兴趣。这就是YFD面临的情况。相反地，PEIR用户可以通
过观察他们的数据是如何处理的而从中受益，而且这反过来也影响
他们诠释数据表示对环境带来的影响和排放的方式。
PEIR的分析组件包含一系列服务端的处理步骤，这包括GPS数据到
对影响和排放的预估。更确切地说，我们可以把PEIR的处理过程分
解为四个独立的阶段。
1.跟踪纠正和标注：只要可能，我们通过预估技术，如利用道路网
进行地图匹配和构建宗地数据(prceldata)来对易于引起错误、抽样
定位的地理位置踪迹进行纠正和标注。因为这些纠正和标注是估计
值，它们确实包含一定的不确定性。
2.活动和地理位置分类：通过使用Web服务，纠正和标注的数据会
自动分类为移动的或者静止的，从而可以为某人在某天的模型输出
提供一级完善。其数据也基于停滞时间，划分为不同的旅途行程。
3.上下文预估：把正确和分类的地理位置数据作为基于Web的信息
资源的输入，这些信息资源包括关气、路面状况和驾驶员行为的汇
总。
4.排放和影响计算：最后，把细粒度、分类和衍生的数据作为地理
空间数据集合和微观环境模型的输入，这些输入反过来文可以用于
提供个人的个性化估计值。
虽然PEIR的重点还是研究这四个步骤的处理过程的结果，但是我们
最终发现用户想要对如何估计影响和排放这些方面有更多的了解。
因此，我们提供每块数据处理过程的细节，比如在高速公路上花费
的时间比、用户旅游地方周边的关气情况。我们还包含了对每个提
供的尺度的详细解释。在这种情况下，预估过程的透明性允许用户
了解他们的行为对环境是如何产生影响和排放的，而不仅仅是了解
他们对周边地区造成的污染有多么大或多么小。当然，也存在如信
息过载的情况，因此我们对于应该展示多少信息量很慎重。这些方
面将在下一节做更多的探讨。
PEIR,http://peir.cens.ucla.edu
1325
---
## Page 1327
数据可视化
一旦数据被收集、上传和处理，用户需要能够访问、评估和浏览他
们的数据。YFD和PEIR的主要设计目标是使得个人数据对于非专业
人员也可以理解。数据必须通过可关联的方式来展示；它需要具有
人性化。通常情况下，我们会过于陷入统计图形和图表之中。这些
图形和图表非常有用，但是同时我们也希望用户能够参与进来，这
样他们可以因为感兴趣而留下来，继续收集数据，不断地回到站点
来衡量他们所跟踪的任何事情的进展。用户必须理解的一点是：数
据是关于他们自已的信息，而且反映的是他们在日常生活中做出的
选择。
我想把数据可视化视为一个故事。故事的主角是用户。我们可以采
取两种方式来讲述这个故事。一个关于图形和图表的故事可能读起
来很像一本教科书，但是，一个包含场景、关系、交互、模式和解
释的故事读起来像是一部小说。这并不是说其中一个比另一个更
好。有很多有趣的教科书，同时也有很多（如果不是更多）庸俗的
小说。当我们对个人数据作可视化分析时，想要的是介于教科书和
小说之间的“故事”。我们想要展示事实，但我们也想提供场景，比
如什么人、什么时间、什么地点以及结果数字的原因是什么。我们
追求的是情感。数据通常是枯燥无味的，但只有当我们以枯燥的方
式来展现时它们才会如此。
PEIR
对于PEIR，我们面临的挑战是如何展示科学数据一“碳"影响、高
密度的颗粒物排放以及对敏感地区（如医院和学校）造成的影响。
影响和排放并没有成为人们每天谈资的一部分。绝大多数人并不知
道一天释放1000千克的碳到底是很多还是很少。排放一小时高密度
的颗粒物是否正常？这些问题都成为PEIR可视化设计的考虑因素。
但是，必须记住一点，虽然结果数据不是可以马上被理解，但是它
们都是通过地理位置数据衍生出来，而地理位置数据本身是非常直
观的。可能很少有如一个人在物理空间的地理位置这样易于被立即
理解的数据。因此，我们使用地图作为数据可视化的锚点，从地图
开始着手。
映射基于地理位置的数据
1326
---
## Page 1328
基于地理位置的数据驱动着PEIR系统，因此交互式的地图是用户界
面的核心。我们最初使用GMapAPI，但很快就由于灵活性原因采取
了另一个方案一采用ModestMaps取而代之。ModestMaps是基于
“贴图"(tlebased)的地图的展现和交互库，它以Flash方式展现，通过
ActionScript3.0实现。ModestMaps提供了一组核心特性，如放大缩
小，而且设计师和并发人员可以很容易地定制展现方式。Modest
Maps的实现方式可以容易地转换地图“贴图”，这些地图“贴图"可以
是微软的，定制的或者以上全部包含。我们可以自由地调整颜色、
布局和全局样式，这些带来了良好的设计实践和有用的可视化展
现。而且由于其灵活性，我们可以在地图上结合或者补充自己的可
视化展现方式。毕竞，我们不想把自己仅仅受限于地图，Modest
Maps为我们提供了这种灵活性。
通过视觉提示（vsualcue）进行实验
在决定最终的映射机制之前，我们实验了多种不同的方式来呈现
PEIR数据。在设计过程中，我们考虑了几种参数：
混乱？
动）的数据块？
如何呈现从所有四个微观环境模型中获取的数据值？
应该采用什么颜色来表示GPS轨迹、影响和排放？
如何把重点转移到实际的数据上，而不是底层的地图“贴图”？
映射多元地理位置轨迹
在设计过程的早期阶段，我们把GPS轨迹以用户通常看见的地理位
置轨迹的方式进行映射：只是简单地一条线从一个点到达另一个
点。在考虑微观环境模型的值之前采用这种方式，因此地图是通过
使用ModestMaps和OpenStreetMap的"贴图”数据的方式做的简单实
现。其GPS轨迹是单一色的，只唯一表示地理位置信息；在轨迹的
最后有个圆圈(crcle)，因此用户可以知道旅程是从哪里并始，然后
在哪里结束。
1327
---
## Page 1329
这在某个范围内是可行的，但是很快我们就需要对更多的数据进行
可视化，因此我们改变了呈现方式一—基于影响和排放值来对轨迹
进行着色。其着色方案采用了五种不同深度的红色。碳影响的级别
越高，其红色就越深。同样地，碳影响级别越低的旅程，其红色就
越浅。
这种呈现方式的隐含意思是用户对环境的影响越大，该旅程在地图
上的显示就越突出。这种实现方式的问题是在地图的轨迹并不明显
（见图1-1）。我们尝试过使用更鲜亮的颜色，但是鲜亮的颜色和地
图上现存的颜色交杂会显得比较混乱。虽然我们希望轨迹显示上能
够很明显，但是我们不希望使用户产生视觉疲劳。为了解决这个问
题，我们尝试了一种不同的映射机制，该机制采用的方式是在地图
上的所有旅程都用单色显示，但是使用了一些圆圈对影响和排放进
行加密。所有的轨迹都是白色的，模型值通过圆圈实现可视化表
示，这些圆圈在旅程的终点展现，其大小不一。模型值越大，圆圈
的面积就越大；反之，模型值越小，圆圈的面积就越小。但是这种
设计策略很快就被淘汰了。
表P-2：架构结构
结构
结构能够·
模块
将设计或实现决定隐藏在一个稳定的接口之后
依赖关系
按照一个模块使用另一个模块的功能的方式来组织模块
进程
封装并隔离一个模块的运行时状态
数据访间
.隔离数据，设置数据访问权限
图1-1：我们在地图上对不同的视觉提示进行实验，通过影响和排
放值来最佳展示地理数据。以上展示了我们初始设计的三次选代。
最左边的地图显示根据碳影响所呈现的彩色GPS轨迹；对于中间的
地图，我们通过单色的圆圈面(aeacircle)来表示影响；对于右边的
地图，我们结合了GPS数据来呈现用户什么时候有空，然后重新采
用单色的颜色编码方案（见彩图1）
只在轨迹的终点（通过圆圈）来表示值，这种显示方式的问题之一
是用户会误认为圆圈意味着每次旅程的终点发生了一些事情。但
是，实际上并不是这样。地图本应该展示的是在旅程的全部过程中
发生了一些事情。
在你旅程的任何地方都释放碳，而不是收集起这些碳然后再在终点
被释放。我们切换回原来的对旅程进行颜色编码的方式，删除表示
1328
---
## Page 1330
模型值的大小不一的圆圈面。在设计过程的这一方面，我们现在有
两种类型的GPS数据：动态的和静止的。动态的GPS数据意味着用
户在运动，不论是徒步行走还是驾车行驶；静态的数据表示用户没
有在运动。她可能坐在桌子上或者被交通拥堵困住。为了展示静态
的数据块，我们并没有完全抛弃在地图上使用圆圈面的方式。圆圈
越大，意味着历时周期越长；相反地，圆圈越小，意味着历时周期
越短。和旅程相似，也是通过线条来表示的，圆面相应地进行着
色。例如，如果用户选择通过颜色来标示颗粒物排放值，在高速公
路上静止的数据块会显示为颜色鲜艳的圆圈。
然而，我们还是面临着与之前相同的问题：试着使轨迹能够在地图
上突出显示而且不会和地图已有的颜色相冲突。我们已经试着为这
些轨迹采用不同的颜色机制，但是尚未尝试改变实际地图的色调。
TruliaSnapshot是为房地产做地图的公司，受到它的启发，我们用灰
色来表示地图“贴图”，对换颜色过滤器，这样把原来颜色很浅的地
图元素的颜色变深，反之亦然。更具体地说，地形原本是浅色的，
那么现在它应该是深灰色的；而马路原本是深色的，现在改为浅灰
色。这种深色调的地图能够突出显示浅色的轨迹，而且由于地图是
灰度模式图，颜色冲突变少了（见图1-2）。用户不需要费很大的劲
儿就能把他们的数据从道路和地形地貌中区分出来。ModestMaps
提供了这种灵活性。
more
图1-2：在当前的映射机制中，我们采用颜色过滤器来高亮显示数
据。地图仅仅是提供上下文信息。链接的直方图显示映射后的数据
的影响和排放分布。当用户通过滚动条看直方图的某一栏，相应的
GPS数据会在地图上高亮显示（见彩图2）
选择一种颜色机制
1329
---
## Page 1331
一旦我们把地图“贴图"通过深色背景显示，而把旅程通过浅色前景
显示，我们确定了需要使用什么颜色。这一点很重要，因为用户会
识别一些颜色表示某些特定事件。例如，红色通常表示停止或者前
方有危险，而绿色则意味着进展或者增长，尤其是站在环境的立场
上看。
另外很重要的一点是不要使用太多颜色对比非常分明的色彩。采用
颜色很不相似的不连续的数据则意味着是分类数据。但是，模型值