表示下一行接续本行，只是由于版面所限而换行。
驱动的种类
虽说驱动只是一个很小的程序，但它也是通过某种编程语言编写而成
的。不过，大家并不需要特意去编写驱动程序，通常情况下DBMS都会
提供相应的驱动程序。需要注意的是，根据DBMS和编程语言的不同，
使用的驱动程序也不一样。说得再细一点，即便是相同的DBMS，其32
位版本和64位版本的驱动也是不一样的（PostgreSQL的JDBC驱动涵盖
了这两个版本的不同，因此在本次学习过程中大家可以不必考虑这种差
异）。如果使用了错误的驱动，就会导致SQL语句无法发送，甚至数据库
无法连接，请大家务必注意。
KEYWORD 现在广泛使用的驱动标准主要有ODBC（Open DataBase Connectivity）
●ODBC
和JDBC（Java Data Base Connectivity）两种。ODBC是1992年微软公司
●JDBC
发布的DBMS连接标准，后来逐步成为了业界标准。JDBC是在此基础上
制定出来的Java应用连接标准。本书也将使用PostgreSQL的JDBC驱动
来实现Java应用和数据库之间的连接。
PostgreSQL的JDBC驱动可以从如下网站下载。不同的PostgreSQL
版本需要使用不同的驱动，请大家选择适当的版本下载。
PostgreSQL JDBC Driver ▲
https://jdbc.postgresql.org/download.html
注A 本书使用Java Version 8作为执行环境，因此需要点击相应的最新版
JDBC的版本是不断更新的，请大 本“9.4.1208 JDBC 42”的链接来下载A。下载后会得到如下文件。
家下载当前的最新版本。
● 288 第9章 通过应用程序连接数据库
postgresql-9.4.1208.jar
这就是驱动程序了，它的文件名会根据版本的不同而变化。“.jar”
这个扩展名看上去比较陌生，它是Java可执行文件的扩展名（后面将要
介绍的类文件的集合体）。
该文件可以保存在电脑的任意文件夹下，不过为了便于之后操作，文
件夹的名称最好比较短，仅由几个英文字母组成，因此我们在第0章安装
PostgreSQL时创建的“C:\PostgreSQL”文件夹下面创建一个名为
“jdbc”的文件夹，用来保存下载的驱动文件（图9-3）。注意文件夹名只
能使用“半角英文字母和数字”，如果使用全角字符的话，将会无法正常
运行。
C:\PostgreSQL\jdbc
图9-3 将驱动文件保存在电脑的文件夹下
至此，通过程序连接数据库的准备工作就完成了。接下来就让我们使
用Java程序来实际连接一下PostgreSQL数据库吧。为了实现该操作，首
先需要了解一下Java基本的编程方法和执行方法。
9-2 Java基础知识 289 ●
第9章 通过应用程序连接数据库
9-2
Java基础知识
● 执行Java 程序时，必须先对源代码进行编译。
学习重点
● 与SQL语句不同，Java源代码的保留字是区分大小写的。
本章使用的编程语言是Java。由于本书并不是Java语言的入门，因
此我们不会深入学习Java的语法和句法，但由于我们要编写一个用来连
接数据库的小程序，因此这里会简单介绍一些必要的知识。如果大家已经
对Java有了一定程度的了解，那么可以略过本小节。
第一个程序Hello,World
KEYWORD 首先我们用Java编写一个简单的示例程序并实际执行一下。这个程
●编程
序并不会连接数据库，程序的内容也非常简单，就是“在画面上显示简短
编写程序的源代码。
的字符串”。输出的字符串是“Hello,World”，直译过来就是“你好，
世界”。这个字符串并没有什么特别的意义，只不过编程界从几十年前就
有一个传统，把Hello,World 作为“最初开始编程时输出的字符串”。
编写源代码，保存为源文件
KEYWORD 由于要实现的功能非常简单，因此Java的源代码也非常简单。
●源代码
应用程序原始的字符串，也就是 代码清单9-1 在画面上显示简短字符串的Java程序
编写出来的程序，也简称为代码。
public class Hello{
public static void main(String[] args){
System.out.print("Hello, World");
}
}
首先，我们使用记事本等文本编辑器把上述示例代码保存到名为
“Hello.java”的文件中，然后将该文件保存在如下文件夹。
● 290 第9章 通过应用程序连接数据库
C:\PostgreSQL\java\src
“src”是“源代码”（source）的简称，经常用来作为保存源代码的文
件夹名称。该文件夹的位置并没有特殊要求，但为了便于理解，我们把它
放在PostgreSQL文件夹下面（图9-4）。
图9-4 把源代码文件保存在文件夹之中
源代码第3行的“Hello,World”就是我们希望显示的字符串。
如果想显示其他字符串，只需要换掉该字符串即可。请大家注意，SQL语
句中的字符串是使用单引号（'）括起来的，而在Java中则需要使用双引
号（"）括起来（请参考法则1-7）。同在第3行的System.out.print
就是在画面上显示字符串的函数A。
注A
其实正确的说法应该是“方法”， 此外，“public class Hello”以及“public static void
不过现在大家还不用在意函数和
方法的区别。 main（String[] args）”这些像咒语一样的字符串，现在也不用太在
意B。源代码的主要部分就是第3行，这一行发出了“在画面上显示字符串”
注B
的命令。
想详细了解的读者可以参考其他
Java的入门书。
9-2 Java基础知识 291 ●
编译和程序执行
把源文件保存到文件夹之后，Java源代码的编写就完成了，但此时程
KEYWORD 序并不能执行，还需要编译（compile）这个步骤。编译本来是“编辑”的
●编译
意思，但是在编程的世界里，它是“将人类书写的源代码转换为机器可以
执行的代码”的意思。
前面我们执行SQL语句时并不需要进行编译，其实那是因为数据库
内部自动进行了编译操作。使用Java或者C等编程语言编写的程序，在
执行之前需要显式地进行编译操作A。
注A
当然也有像Python、PHP这样在执 代码的编译是通过已经安装的JDK自带的“javac.exe”程序进行的，
行之前不需要显式地进行编译的
编程语言。不过，它们的操作过 程序名末尾的“c”是compile的缩写。该程序存放在“C:\PostgreSQL\
程其实是一样的，执行时会（隐
式地）进行编译。 java\jdk\bin”文件夹下，大家可以自行确认一下（图9-5）。
图9-5 编译时使用的javac.exe程序
注B
javac.exe需要通过命令提示符来执行。要启动命令提示符，需要
如果使用的是Window 8/8.1，可以
按照如下步骤启动命令提示符。 使用鼠标右键点击电脑桌面左下角的Windows图标 ，在弹出的菜单中
1. 在电脑的开始画面，同时点击
选择“命令提示符（管理员）（A）”B。命令提示符启动后会弹出如图9-6
键盘上的“Windows”键和“X”键。
2. 在画面左下角显示的菜单一览
所示的窗口。
中点击“命令提示符（管理员）”。
● 292 第9章 通过应用程序连接数据库
图9-6 命令提示符窗口
首先，为了移动到源文件所在的文件夹，需要输入如下命令A。输入
注A
cd是从“change directory”的缩写 之后，按下回车键。
演化而来的命令。directory（目录）
的意思跟文件夹相同，是UNIX／
Linux的OS常用语。 cd命令（移动到指定文件夹）
cd C:\PostgreSQL\java\src
命令执行成功之后并不会显示什么特别的信息（图9-7）。执行失败时
会显示错误信息，这时请确认命令或者文件夹名称字符串是否拼写正确。
此外，请务必在cd后面添加一个半角空格。在命令提示符中使用的字符
串必须全都是半角字符，如果使用全角字符的话可能会发生错误，因此请
勿使用。
图9-7 cd C:\PostgreSQL\java\src的执行结果
使用 命令进行编译，生成类文件
javac
移动到相应的文件夹之后，在命令提示符中输入如下字符串，按下回
注B 车键B。
像“C:\PostgreSQL\java\
jdk\bin\javac”这样输入全 javac命令（编译）
部的文件夹名是非常麻烦的。其实
省略掉文件夹这部分，直接输入 C:\PostgreSQL\java\jdk\bin\javac Hello.java
“javac”也是可以的（需要设置
环境变量PATH）。具体的设置方
稍微等待一会儿，编译就结束了。如果编译成功，就不会显示任何信
法，可以参考相关的Java入门书。
9-2 Java基础知识 293 ●
息（图9-8）。只有发生了某些错误导致编译失败，才会显示错误信息。
图9-8 C:\PostgreSQL\java\jdk\bin\javac Hello.java的执行结果
法则9-1
执行Java程序之前，必须对源代码进行编译。
编译成功之后，在存放源文件的文件夹下会生成一个名为“Hello.
class”的新文件（图9-9）。这是一个可以执行的文件，称为“类文件”。
图9-9 编译成功后会生成类文件
使用java命令执行程序
生成类文件之后，就可以执行程序了。执行程序时需要使用“C:\
● 294 第9章 通过应用程序连接数据库
PostgreSQL\java\jdk\bin”文件夹下的“java.exe”程序。
在命令提示符中输入如下字符串，然后按下回车键。“Hello”是类名，
与文件名中扩展名之前的字符串相同。
命令（执行）
java
C:\PostgreSQL\java\jdk\bin\java Hello
如果命令提示符中显示出了“Hello,World”，就表示执行成功
了（图9-10）。
图9-10 cd C:\PostgreSQL\java\jdk\bin\java Hello的执行结果
使用Java语言进行编程时，必须经过如下3个步骤，请大家务必牢记。
1.编写源代码，保存为源文件
➡
2.使用javac命令进行编译，生成类文件
➡
3.使用java命令执行程序
常见错误
下面我们来介绍一下Java编程和执行时初学者经常犯的一些错误。
大小写错误
SQL语句中的保留字是不区分大小写的，不论写成“SELECT 1;”
还是“select 1;”，都能够正常执行，但是Java却是区分大小写的。
例如，在画面上显示字符串时使用的函数“System.out.print”，
如果全部改成小写，如代码清单9-2那样，结果会如何呢？
9-2 Java基础知识 295 ●
代码清单9-2 “常见错误示例”大小写错误
public class Hello{
public static void main(String[] args){
system.out.print("Hello, World");
}
}
使用javac命令编译上述源文件，会发生如下错误。
执行结果
Hello.java:3: 错误：程序包system不存在
system.out.print("Hello, World");
原因在于“Hello.java”文件的第3行出错了，把“System”
写成了小写的“system”。
法则9-2
Java源代码中的保留字要区分大小写，这是它和数据库的不同点之一。
使用全角空格
如前所述，源代码中是不能使用全角字符的，SQL语句中也一样。虽
然没有人会把英文字母和数字都写成全角，不过偶尔还是会出现把半角空
格写成全角空格的情况。
例如，我们把代码清单9-3第2行开头的空格改成全角。
代码清单9-3 “常见错误示例”使用全角空格
public class Hello{
public static void main(String[] args){
system.out.print("Hello, World");
}
} 虽然看不出来，但是这里使用的是全角空格
使用javac命令编译上述源文件，会发生如下错误。
执行结果
Hello.java：2: 错误：非法字符：'\u3000'
public static void main(String[] args){
^
原因在于“Hello.java”文件的第2行出错了，“\u3000”是表
● 296 第9章 通过应用程序连接数据库
示全角空格的字符代码，也就是说，我们“使用了不应该使用的字符”。
法则9-3
Java源代码中不能出现全角字符／全角空格（注释除外）。
源文件的文件名和类名不一致
例如，让我们把之前创建的源文件“Hello.java”的文件名改成
“Test.java”并进行编译。命令如下所示。
编译
C:\PostgreSQL\java\jdk\bin\javac Test.java
结果就会发生如下错误。
执行结果
Test.java：1: 错误：类Hello是公共的，应在名为Hello.java的文件中声明
public class Hello{
这是由于源文件中创建的类的名称“Hello”与文件名“Test”不
一致，文件名必须和源代码第1行的类名一致。大家需要注意的是，这里
的一致也包括大小写一致。
命令名和文件名错误
编译或者执行时，如果输入了错误的命令名或者文件名，结果当然会
发生错误。尤其要注意不要把javac和java命令的文件夹名写错了。
例如，像下面这样把文件夹名“bin”错写成“vin”，执行就会出错。
执行（文件夹名错误）
C:\PostgreSQL\java\jdk\vin\java Hello
➡
执行结果
系统找不到指定的路径。
原因就在于找不到指定的文件夹。
如果把类名“Hello”错写成“Hallo”，也会出错。
9-2 Java基础知识 297 ●
执行（类名错误）
C:\PostgreSQL\java\jdk\bin\java Hallo
➡
执行结果
错误：找不到或无法加载主类Hallo。
这也是因为找不到指定的类而导致的。
其实，为了减少类似的输入错误，可以设置成省略指定文件夹名这一
步，不过本书中并不需要反复执行这些命令，因此省略了该设置。直接使
用复制粘贴的话，不用每次都输入，也不算太辛苦吧。
专 栏
在命令提示符中的粘贴方法
在Windows 10中，可以在命令提示符画面中使用“Ctrl”快捷键。因此，可
以使用“Ctrl”+“C”键复制文本文件中的字符串，然后在命令提示符画面中使用
A
注A “Ctrl”+“V”键进行粘贴 。
如果Windows 10的命令提示符画面 记住此方法之后，就不需要输入很长的字符串了，十分方便。
中无法使用“Ctrl”+“V”键，请按
照如下步骤启用Ctrl快捷键。