0.2
0.1
1.01
1.03
1.02
0.1
0.2
0.3
0.4
0
0
1
0.5
pgb
SQRT 
100 
50 
nb=25 
1.8
1.7
t
i
m
i
l
1.6
C
M
H
w
o
s
e
h
l
t
r
o
[
f
)
p
(
f
/
]
)
0
(
X
E
m
u
m
x
a
M
i
1.5
1.4
1.3
1.2
1.1
0.9
0.92
0.93
0.96
0.98
0.6
0.7
0.8
0.9
1
1
0
10
20
30
40
60
70
80
90
100
50
ng/nb
Figure 8: Normalized throughput E[X(0)]/f (¯p) versus pgb and
pbg for the comprehensive control; ng = 200 and nb = 50. The
function f is PFTK-simpliﬁed with r = 100 ms and q = 4r.
Figure 9: Maximum normalized throughput E[X(0)]/f (¯p) at-
tained in the slow HMC limit versus ng/nb; thick line is for
SQRT; thin lines are for PFTK-simpliﬁed (r = 100 ms, q =
4r); nb is set as indicated in the graph.
E[X(0)] →
pbg
pbgng + pgbnb
ng
+ pgb
f (1/ng )
nb
f (1/nb)
=
E0
T
[
[θ0]
θ0
f (1/θ0)
E0
T
.
]
Thus, E[X(0)]/f (¯p) for our slow HMC limit is:
ung + nb
1
0(u) =
¯x
)
ung +nb
u ng
f ( u+1
+ nb
∗
at which the global
For a given function f, one may compute u
maximum of ¯x0(u) is attained. For SQRT function, the calculation
is tractable and we obtain u
nb/ng. That is
f (1/nb)
f (1/ng )
∗ =
.
(12)
(cid:9)
(cid:12)
pbg
pgb
=
nb
ng
.
Notice that, the larger the discrepancy of the good and bad states
(larger ng/nb), the smaller the relative number of transitions from
the bad to good state. The last implies that the HMC is most of the
time in the bad state, with occasional short excursions to the good
state. It is for this dynamics of our HMC, when we may expect
signiﬁcant non-conservative behavior (overshoot).
For SQRT function f, the maximum value of ¯x0 is
(cid:12)
(cid:13)(cid:14)(cid:14)(cid:15)2 +
∗ =
¯x
1
2
+
ng
nb
1(cid:16)
ng
nb
.
(13)
which we note is monotonically increasing with ng/nb.
∗
We show in Fig. 9 numerical values of ¯x
(13) versus the ratio
ng/nb, which we recall is for SQRT function. We also show the
results for PFTK-simpliﬁed function by numerical computation of
the maximum of (12). We observe that for sufﬁciently large values
of ng/nb we may have a substantial non-conservative behavior.
4. VALIDATION BY SIMULATION
We conduct ns simulation experiments to validate the claims
made in Section 3.3. Unless otherwise indicated, we consider a
link shared by TFRC and TCP Sack1 connections. The link im-
plements RED queue management of the rate of 15 Mb/s; we set
the buffer length, min thresh, and max thresh to 2.5, 0.25 and 1.25
times the bandwidth delay product, respectively. The round-trip
time is about 50 ms. We mimic this setting from [2].
4.1 Validation of Claim 1
In Fig. 9 we show the normalized throughput for PFTK-standard
formula. We verify, the larger the loss event ratio is, the more con-
servative the control is. We also note that the larger the smoothing
of the loss event interval estimator (larger L) is, the less conserva-
tive the control is. Next, for PFTK-simpliﬁed (Fig. 10) we observe
the results are very close to those with PFTK-standard. We verify
in Fig. 11, the conservativeness with SQRT formula is less pro-
nounced, and less dependent on L. In all the cases, covariance of
the instantaneous value and the estimator of the loss event interval
is small; indicating low autocorrelation of the loss event intervals.
4.2 Validation of Claim 2
We consider a source that sends packets at regular time intervals
(20 ms), but controls packet sizes. The source has a connection
established through a loss module that allows us to tune the packet
drop rate. For such a source, we have the covariance of the send
rate and the interval between two loss events equal to zero. Thus,
by Claim 2 we expect our source to be conservative for f (1/x)
concave with x; conversely, non-conservative for f (1/x) convex
with x. We show the results for two lengths of the loss event in-
terval estimator L = 4 and 8 (resp. Fig. 12 and 13). We verify,
1111.1
1
0.9
0.8
0.7
0.6
0.5
0.4
0.3
0
0.1
0.05
0
-0.05
)
p
(
f
/
]
)
0
(
X
E
[
t
u
p
h
g
u
o
r
h
t
d
e
z
i
l
a
m
r
o
N
]
0
_
a
t
e
h
t
,
h
0
_
a
t
e
h
t
[
v
o
C
d
e
z
i
l
a
m
r
o
N
-0.1
0
L=2
L=4
L=8
L=16
0.02
0.04
0.06
0.08
0.1
0.12
Loss Event Ratio p
0.02
0.04
0.06
0.08
0.1
0.12
Loss Event Ratio p
L=2
L=4
L=8
L=16
Figure 10: Function f is PFTK-standard. The upper graph
shows the normalized throughput E[X(0)]/f (¯p) attained by
TFRC versus the loss event ratio ¯p. The lower graph shows
cov0
T[ˆθ0, θ0] normalized by E0
[ˆθ0].
[θ0]E0
T
T
the control with SQRT is always conservative. For PFTK-standard
and PFTK-simpliﬁed the same holds for a low loss rate, however,
for high loss rate the functions are convex, and thus the control
exhibits non-conservative behavior in this region. Observe from
Fig. 12 and Fig. 13, as the loss event ratio increases, the coefﬁ-
cient of variation of ˆθn gets smaller. Smaller variability of the loss
event estimator makes the control to be either less conservative or
less non-conservative, depending on which behavior is in action.
Contrary, larger variability of ˆθn exaggerates either conservative or
non-conservative behavior.
5. CONSERVATIVE DOES NOT MEAN TCP-
FRIENDLY
We have focused so far on conservativeness, i.e., whether an
adaptive source does indeed satisfy its equation in the long-run.
In this section, we point out that this is not the same as TCP-
friendliness, for two reasons.
• The loss event ratio experienced by TCP and our adaptive
source may differ.
• TCP may not satisfy its own equation.
We address the former point with some detail (within the space
limitation of this article), and illustrate the latter on an example.
1.1
1
0.9
0.8
0.7
0.6
0.5
0.4
0.3
0
0.1
0.05
0
-0.05
)
p
(
f
/
]
)
0
(
X
E
[
t
u
p
h
g
u
o
r
h
t
d
e
z
i
l
a
m
r
o
N
]
0
_
a
t
e
h
t
,
h
0
_
a
t
e
h
t
[
v
o
C
d
e
z
i
l
a
m
r
o
N
-0.1
0
L=2
L=4
L=8
L=16
0.02
0.04
0.06
0.08
0.1
0.12
Loss Event Ratio p
0.02
0.04
0.06
0.08
0.1
0.12
Loss Event Ratio p
L=2
L=4
L=8
L=16
Figure 11: Same setting as with Fig. 10, but function f is PFTK-
simpliﬁed.
5.1 Loss Event Ratio seen by Various Sources
We ﬁrst perform a simple analysis, as follows. Assume that the
sources in the network are driven by the hidden congestion process
Z(t) that evolves in real time, t ∈ R, and takes values on a count-
able state space E. The state transitions are clocked by the point
(cid:5)
(cid:5)
n)n; assumed to be stationary with ﬁnite intensity λ
process (T
.
This is an approximation which ﬁts with the case of a source with
negligible inﬂuence on the global network [15].
the congestion process is in the state i ∈ E. Deﬁne
Let πi := P(Z(0) = i) denote the steady-state probability that
Deﬁne, also, ¯xi = E[X(0)|Z(0) = i]. Note that ¯pi and ¯xi are
the loss event ratio and the average send rate while the congestion
process is in the state i. We show in the appendix
,
(14)
1
¯pi =
[θ0|Z(0) = i] .
E0
T
(cid:2)
(cid:2)
i∈E bi ¯pi ¯xiπi
i∈E bi ¯xiπi
¯p =
(cid:2)
where
bi =
E0
T (cid:1) [
(cid:17)
We would have, bi → 1, as λ
λi = 1/E0
E0
T (cid:1) [
S
T
0)|Z(0) = i]
(cid:1)
n∈Z θn1Tn∈[0,S
0 X(s)ds|Z(0) = i]
(cid:1)
0
.
(cid:1)
→ 0, for i ∈ E (here, by deﬁnition,
[S0|Z(0) = i]). The limit corresponds to the sepa-
λi
112L=2
L=4