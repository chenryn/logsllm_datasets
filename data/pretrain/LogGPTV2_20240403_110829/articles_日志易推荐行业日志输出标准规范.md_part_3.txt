3.  缺省情况下，每个非压缩的日志文件的大小限制为50M。
    1.  # 日志归档
```{=html}
```
1.  交易日志每天归档一次，移出日志目录，备份到相应的日期目录下（日期格式：yyyyMMdd）。
2.  对于有审计需求的日志，需要按照业务规定对这些文件进行归档。
3.  应用程序必须实现定期清理和归档日志空间的功能。
    1.  # 日志备份
> 1.备份方式配置
>
> 对日志备份的时间可进行配置，并最少提供定期独立备份、定期增量备份及实时增量三种处理方式。
>
> 2.备份空间配置
>
> 对日志备份空间进行配置，并提供相应基线，到达基线时提供报警功能。
# 日志清理
应用系统需要包含可配置的日志清理策略组件，默认归档日志保留时间100天。
5.  # 交易日志的功能规范
    1.  # 交易日志的作用和类别
交易日志用来记录交易的逻辑情况，追踪交易的路径，用来快速分离用户、业务、应用和系统的问题，以便有效的进行问题定位，准确发现交易没有按照预定方式运行的状况。因此交易日志主要是是对交易的执行状况的记录，显示交易链中某个步骤在某个时刻或者某个阶段的状态跟踪记录，同时可以映射到应用或者系统的某一项，如某个组件在某个时刻的状态或某一阶段内的状态跟踪记录。
跟踪记录主要包括两方面内容：
1.  行为记录：记录被跟踪对象的内部行为和外部行为，其中
    -   内部行为记录：是针对内部对象状态、数据环境、事件、性能等，用于白盒测试和除错。
    -   外部行为记录：
        是针对对外可见的数据或对象的状态、可见的事件、可访问的功能等，用于黑盒测试、系统间的集成/维护。
2.  跟踪控制：对跟踪方式的定制，如某一跟踪功能的启动/停止、记录格式的选择、记录存储的选择。
跟踪记录可以分为5种类型：
1.  操作记录：记录对象的操作，如某个方法的调用。可进一步分为
    -   内部操作跟踪：记录对象内部的操作。
    -   外部操作跟踪：记录对象对外接口的行为，包括对其他对象的调用、被其他对象的调用。
2.  性能记录：记录对象功能的性能指标，包括完成功能的平均时间、最长时间、最短时间等。
3.  状态记录：记录对象的公共数据属性。
4.  事件记录：记录与对象相关的事件和次序。
5.  错误记录：记录错误消息、异常、和相关的过程信息
    1.  # 交易日志消息文本属性定义
以下为交易日志标准属性名称，在下列范围之外的，各个应用组件可自行定义。必填属性是指在应用和服务的入口和出口，系统调用点，错误异常点，关键步骤点的日志都需要包含相关必填属性（属性解释：各个应用系统交易内容字段，用于日志平台进行个性化监控、视图展示等，需各应用系统决定哪些指标需要监控（可参考《日志平台分析案例》））。
属性值遵循以下原则：
1)  在属性值不包含空格和双引号时，直接记录即可；
2)  在属性值包含空格时，两端用双引号包括；
3)  在属性值包含双引号，双引号前加反斜杠进行转义"\\"。
举例：
1.  transID为平台流水号
2.  transCode为交易代码
3.  messageId为全局流水号
4.  errorCode为错误编码，errorMessage为错误消息
+-------------------+-----------+------+-----------------------------+
| **英文属性名称**  | **中文属  | **   | **说明**                    |
|                   | 性名称**  | 必填 |                             |
|                   |           | 项** |                             |
+===================+===========+======+=============================+
| transCode         | 交易代码  | Y    | 用来唯一标识某一种交易      |
+-------------------+-----------+------+-----------------------------+
| transId           | 平        | Y    | 用来                        |
|                   | 台流水号  |      | 在应用系统内全局标识某一次  |
|                   |           |      | 交易，打印在每一条日志中。  |
+-------------------+-----------+------+-----------------------------+
| subTransSeq       | 子        | Y    | 考虑到交易组合的情况        |
|                   | 交易序号  |      | ，通常需要全局流水号和子交  |
|                   |           |      | 易序号进行组合子交易的识别  |
+-------------------+-----------+------+-----------------------------+
| serviceId         | 服务标识  | Y    | 当前执行的服务的标识        |
|                   |           |      |                             |
|                   |           |      | 可以是                      |
|                   |           |      | 组粒度的服务标识，组件标识  |
|                   |           |      |                             |
|                   |           |      | 也可以是细粒度的类名，      |
|                   |           |      | 方法名，进程号，线程号，某  |
|                   |           |      | 一特定程序段落给出特定名称  |
+-------------------+-----------+------+-----------------------------+
| processName       | 业务      |      | 表示当前业务处理流          |
|                   | 流程名称  |      | 程的名称，用于业务日志分析  |
+-------------------+-----------+------+-----------------------------+
| processId         | 业        |      | 表示当前业务处理流程        |
|                   | 务流程ID  |      | 的实例ID，用于业务日志分析  |
+-------------------+-----------+------+-----------------------------+
| processStep       | 业务流    |      | 表示业务处理流程当前执行步  |
|                   | 程步名称  |      | 骤的名称，用于业务日志分析  |
+-------------------+-----------+------+-----------------------------+
| processStepId     | 业务      |      | 表                          |
|                   | 流程步ID  |      | 示业务处理流程当前执行步骤  |
|                   |           |      | 的实例ID，用于业务日志分析  |
+-------------------+-----------+------+-----------------------------+
| status            | 状态      | Y    | 标识当前交易的状态          |
+-------------------+-----------+------+-----------------------------+
| sourceServiceId   | 交易发    | Y    | 表示交易发起方，服          |
|                   | 起者，服  |      | 务使用方，调用发起方的标识  |
|                   | 务使用者, |      |                             |
|                   |           |      |                             |
|                   | 调        |      |                             |
|                   | 用发起者  |      |                             |
+-------------------+-----------+------+-----------------------------+
| argument(xx)      | 参数值    |      | 其                          |
|                   |           |      | 中xx可以是参数名称或者序号  |
+-------------------+-----------+------+-----------------------------+
| result(xx)        | 结果值    |      | 其                          |
|                   |           |      | 中xx可以是参数名称或者序号  |
+-------------------+-----------+------+-----------------------------+
| config(xx)        | 配置      |      | 其                          |
|                   |           |      | 中xx可以是参数名称或者序号  |
+-------------------+-----------+------+-----------------------------+
| errorCode         | 错误码    | Y    | 出错时必填                  |
+-------------------+-----------+------+-----------------------------+
| errorMessage      | 错误消息  | Y    | 出错时必填                  |
+-------------------+-----------+------+-----------------------------+
| errorResolution   | 错误      |      | 对解决错误的建议            |
|                   | 解决方案  |      |                             |
+-------------------+-----------+------+-----------------------------+
| retCode           | 返回码    |      | 交易返回码（业务意义）      |
+-------------------+-----------+------+-----------------------------+
| messageId         | 全        | Y    | 系统间异步传                |
|                   | 局流水号  |      | 递的消息的全局唯一性标识。  |
|                   |           |      | 包含在系统间的通信报文中。  |
+-------------------+-----------+------+-----------------------------+
| messageRetCode    | 消息中    | Y    | 系统间传递的消息中的返回码  |
|                   | 的返回码  |      |                             |
+-------------------+-----------+------+-----------------------------+
| errorCodeOrg      | 原        |      | 当错误                      |
|                   | 始错误码  |      | 码被转译时，记录原始错误码  |
+-------------------+-----------+------+-----------------------------+
| errorMessageOrg   | 原始      |      | 当错误消息                  |
|                   | 错误消息  |      | 被转译时，记录原始错误消息  |
+-------------------+-----------+------+-----------------------------+
| messageSource     | 消息源    | Y    | 标识消息源头系统            |
+-------------------+-----------+------+-----------------------------+
| m                 | 消        | Y    | 标识消息目标接收系统        |
| essageDestination | 息目的地  |      |                             |
+-------------------+-----------+------+-----------------------------+
| duration          | 耗时      |      | 单位为毫                    |
|                   |           |      | 秒，表示某一服务所用时间。  |
|                   |           |      |                             |
|                   |           |      | 如果一个服务的日志分        |
|                   |           |      | 为在开始、结束都记录了日志  |
|                   |           |      | ，则耗时应放置在结束记录中  |
|                   |           |      | 。或者有程序自动解析生成。  |
+-------------------+-----------+------+-----------------------------+
| ctyp              | 货币类型  |      |                             |
+-------------------+-----------+------+-----------------------------+
| amt               | 交易金额  |      |                             |
+-------------------+-----------+------+-----------------------------+
| userId            | 用户名    |      |                             |
+-------------------+-----------+------+-----------------------------+
| cardId            | 卡        |      | 发起交易的卡号，如不是卡    |
|                   | 号、账号  |      | 类交易，可填写其它帐户信息  |
+-------------------+-----------+------+-----------------------------+
| Merchants         | 机构，商  |      |                             |
|                   | 户，设备  |      |                             |
+-------------------+-----------+------+-----------------------------+
| event             | 事件      |      |                             |
+-------------------+-----------+------+-----------------------------+
| dir               | 路径名    |      | 额外消息附件路径            |
+-------------------+-----------+------+-----------------------------+
| file/objectId     | 文        |      | 额外消息附件或者对象标识    |
|                   | 件名或者  |      |                             |
|                   | 对象标识  |      |                             |
+-------------------+-----------+------+-----------------------------+