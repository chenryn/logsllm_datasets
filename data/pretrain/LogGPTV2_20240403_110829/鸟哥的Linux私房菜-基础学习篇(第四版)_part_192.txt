答：
因为 MBR 的 boot loader 应该要去 （/dev/vda1）/boot/grub2/grub.cfg 读取相关设置才是正常的！所以，你可以使用几种基本的
方式来处理：
因为 CentOS 7 会主动找到其他操作系统，因此你可以在 /dev/vda3 的开机菜单中找到 /dev/vda1 的开机选项，请用该选
项进入系统， 你就能够进入 /dev/vda1 了！
假设没能抓到 /dev/vda1 ，那你可以在 /dev/vda3 下面使用 chroot 来进入 /dev/vda1 喔！
使用救援光盘去抓到正确的 /dev/vda1，然后取得 /dev/vda1 的系统喔！
等到进入系统后，修改 /etc/default/grub 及 /etc/grub.d/40_custom 之后，使用 grub2-mkconfig -o /boot/grub2/grub.cfg ， 然后重
新 grub2-install /dev/vda 就能够让你的 MBR 去取得 /dev/vda1 内的配置文件啰！
问：
依据 19.3.3 小节的第一个练习，我们的测试机目前为 40 秒倒数，且有一个强制进入图形界面的“ My graphical CentOS7 ”菜
单！ 现在我们想要多加两个菜单，一个是回到 MBR 的 chainloader，一个是使用 /dev/vda4 的 chainloader，该如何处理？
答：
因为没有必要重新安装 grub2 ，直接修改即可。修改 40_custom 成为这样：
[root@study ~]# vim /etc/grub.d/40_custom
# 最下面加入这两个项目即可！
menuentry 'Goto MBR' {
insmod chain
insmod part_gpt
set root=（（hd0））
chainloader +1
}
menuentry 'Goto /dev/vda4' {
insmod chain
insmod part_gpt
set root=（（hd0.gpt4））
chainloader +1
}
[root@study ~]# grub2-mkconfig -o /boot/grub2/grub.cfg
最后总结一下：
1. 如果是从其他 boot loader 转成 grub2 时，得先使用 grub2-install 安装 grub2 配置文件；
2. 承上，如果安装到 partition 时，可能需要加上额外的许多参数才能够顺利安装上去！
3. 开始编辑 /etc/default/grub 及 /etc/grub.d/* 这几个重要的配置文件；
4. 使用 grub2-mkconfig -o /boot/grub2/grub.cfg 来创建开机的配置文件！
事实上，前几个小节设置好之后，你的 grub2 就已经在你的 Linux 系统上面了，而且同时存在于 MBR 与 boot sector 当中呢！所以，我
们已经可以重新开机来查阅看看啦！ 另外，如果你正在进行开机，那么请注意，我们可以在默认菜单 （鸟哥的范例当中是 40 秒） 按下任意
键， 还可以进行 grub2 的“线上编修”功能喔！真是棒啊！先来看看开机画面吧！
图19.3.1、grub2 开机画面示意图
由于默认菜单就没有隐藏，因此你会直接看到这 5 个菜单而已，同时会有读秒的咚咚在倒数。 菜单部分的画面其实就是 menuentry 后面
的文字啦！你现在知道如何修改 menuentry 后面的文字了吧！ ^_^。 然后如果你点选了“Goto MBR”与“Goto /dev/vda4”时，怪了！怎么发现到菜
单又重新回来了呢？ 这是因为这两个 Goto 的菜单都是重新读取主配置文件，而 MBR 与 /dev/vda4 配置文件的读取都是来自
（/dev/vda2）/boot/grub2/grub.cfg 的缘故！ 因此这个画面就会重复出现了！这样了解乎？
另外，如果你再仔细看的话，会发现到上图中底部还有一些细部的选项，似乎有个 'e' edit 的样子！ 没错～ grub2 支持线上编修指令
喔！这是个很有用的功能！假如刚刚你将 grub.cfg 的内容写错了，导致出现无法开机的问题时， 我们可以查阅该 menuentry 菜单的内容并加以
修改喔！举例来说，我想要知道第一个菜单的实际内容时，将反白光棒移动到第一个菜单， 再按下 'e' 会进入如下画面：
图19.3.2、grub2 额外的指令编辑模式
因为 CentOS 7 默认没有提供美美的底图给我们使用，因此这里会看到无法分辨的两个区块！事实上它真的是两个区块， 上方是实际你
可以编辑的内容区段，仔细看，这不就是我们在 grub.cfg 里面设置的东西吗？没错！此时你还可以继续进一步修改喔！ 用上/下/左/右按键到你
想要编辑的地方，直接删除、新增即可！
至于下方画面则仅是一些编辑说明，重点在告诉你，编辑完毕之后，若想要取消而回到前一个画面，请使用 [crtl]+c 或者是 [esc] 回去，
若是修改完毕，想要直接开机时，请使用 [crtl]+x 来开机啰！
问：
现在我想要让系统开机的过程中，让这个系统进入救援模式 （rescue） ，而不想要进入系统后使用 systemctl rescue 时，该如
何处理？
答：
仔细看到图 19.3.2 的画面，按下“向下”的方向键，直到出现 linux16 那一行，然后在那一行的最后面加上
systemd.unit=rescue.target ， 画面有点像这样：
然后再按下 [crtl]+x 来进入系统，就能够取得 rescue 的环境了！登陆后有点像这样：
接着下来你就可以开始救援系统啰！
你可能会觉得很讶异！早期 SystemV 的系统中，进入 runlevel 1 的状态是不需要输入 root 密码的，在 systemd 的年代，哇！！ 竟然需
要密码才能够进入救援模式耶！而且是强制要有 root 密码耶！如果你是 root 密码忘记要救援，救个鬼啊～还是需要 root 密码啊！ 那怎办？没
关系～本章稍后会告诉你应该要如何处理的啦！
如果你想要让你的开机画面使用图形显示方式，例如使用中文来显示你的画面啊！因为我们默认的 locale 语系就是 zh_TW.utf8 嘛！ 所
以理论上 grub2 会显是中文出来才对啊！有没有办法达成呢？是有的～通过图形显是的方法即可！不过， 我们得要重新修改 grub.cfg 才行喔！
依据下面的方式来处理：
# 先改重要的配置文件
[root@study ~]# vim /etc/default/grub
.....（前面省略）.....
GRUB_TERMINAL=gfxterm ## 设设置置主主要要的的终终端端机机显显示示为为图图形形界界面面！！
GRUB_GFXMODE=1024x768x24 ## 图图形形界界面面的的 XX,, YY,, 彩彩度度数数据据
GRUB_GFXPAYLOAD_LINUX=keep ## 保保留留图图形形界界面面，，不不要要使使用用 tteexxtt 喔喔！！
# 重新创建配置文件
[root@study ~]# grub2-mkconfig -o /boot/grub2/grub.cfg
再次的重新开机，这时你会看到有点像下面的模样的画面喔！
图19.3.3、使用图形显示模式的开机画面
看到没有？上图中有繁体中文喔！中文喔喔喔喔喔喔～真是开心啊！ 未来如果你有需要在你的开机菜单当中加入许多属于你自己的公
司/企业的画面，那就太容易啰！ ^_^
想像一个环境，如果你管理的是一间计算机教室，这间计算机教室因为可对外开放，但是你又担心某些 partition 被学生不小心的弄乱，
因此你可能会想要将某些开机菜单作个保护。这个时候，为每个菜单作个加密的密码就是个可行的方案啦！
另外，从本章前面的 19.3.6 小节介绍的开机过程中，你会知道使用者可以在开机的过程中于 grub2 内选择进入某个菜单，以及进入
grub2 指令模式去修改菜单的参数数据等。 也就是说，主要的 grub2 控制有： （1）grub2 的菜单指令列修改与 （2）进入选择的菜单开机流
程。好了，如刚刚谈到的计算机教室案例， 你要怎么让某些密码可以完整的掌控 grub2 的所有功能，某些密码则只能进入个别的菜单开机呢？
这就得要牵涉到 grub2 的帐号机制了！
grub2 的的帐帐号号、、密密码码与与菜菜单单设设置置
grub2 有点在仿真 Linux 的帐号管理方案喔！因为在 grub2 的菜单管理中，有针对两种身份进行密码设置：
superusers： 设置系统管理员与相关参数还有密码等，使用这个密码的用户，将可在 grub2 内具有所有修改的权限。 但一旦设置了这个
superusers 的参数，则所有的指令修改将会被变成受限制的！
users： 设置一般帐号的相关参数与密码，可以设置多个用户喔！使用这个密码的用户可以选择要进入某些菜单项目。 不过，菜单项目
也得要搭配相对的帐号才行喔！（一般来说，使用这种密码的帐号并不能修改菜单的内容，仅能选择进入菜单去开机而已）
这样说可能你不是很容易看得懂，我们使用下面的一个范例来说明你就知道怎么处理了。另外，下面的范例是单纯给读者们看看而已的
～ 不能够直接用在我们的测试机器里面喔！
问：
假设你的系统有三个各别的操作系统，分别安装在 （hd0,1）, （hd0,2）, （hd0,3） 当中。假设 （hd0,1） 是所有人都可以选
择进入的系统， （hd0,2） 是只有系统管理员可以进入的系统，（hd0,3）则是另一个一般用户与系统管理员可以进入的系统。
另外，假设系统管理员的帐号/密码设置为 vbird/abcd1234， 而一般帐号为 dmtsai/dcba4321 ，那该如何设置？
答：
如果依据上述的说明，其实没有用到 Linux 的 linux16 与 initrd16 的项目，只需要 chainloader 的项目而已！ 因此，整个
grub.cfg 会有点像下面这样喔：
# 第一个部份是先设置好管理员与一般帐号的帐号名称与密码项目！
set superusers="vbird" ## 这这里里是是设设置置系系统统管管理理员员的的帐帐号号名名称称为为啥啥的的意意思思！！
password vbird abcd1234 ## 当当然然要要给给予予这这个个帐帐号号密密码码啊啊！！
password dmtsai dcba4321 ## 没没有有输输入入 ssuuppeerruusseess 的的其其他他帐帐号号，，当当然然就就是是判判定定为为一一般般帐帐号号
menuentry "大家都可以选择我来开机喔！" --unrestricted {
set root=（hd0,1）
chainloader +1
}
menuentry "只有管理员的密码才有办法使用" --users "" {
set root=（hd0,2）
chainloader +1
}
menuentry "只有管理员与 dmtsai 才有办法使用喔！" --users dmtsai {
set root=（hd0,3）
chainloader +1
}
如上表所示，你得要使用 superuses 来指定哪个帐号是管理员！另外，这个帐号与 Linux 的实体帐号无关，这仅是用来判断密码所代表
的意义而已。 而密码的给予有两种语法：
password_pbkdf2 帐号 “使用grub2-mkpasswd-pbkdf2所产生的密码”
password 帐号 “没加密的明码”
有了帐号与密码之后，在来就是在个别的菜单上面加上是否要取消限制 （--unrestricted） 或者是给予哪个用户 （--users） 的设置项
目。 同时请注意喔，所有的系统管理员所属的密码应该是能够修改所有的菜单，因此你无须在第三个菜单上面加入 vbird 这个管理员帐号！ 这
样说你就可以了解了吧？
你很可能会这样说：“了解个头啦！怎么可能会了解！前面不是才说过：“不要手动去修改 grub.cfg ”吗？这里怎么直接列出 grub.cfg
的内容？ 上面这些项目我是要在哪些环境配置文件里面修改啦？”呵呵～您真内行，没有被骗耶～好厉害～好厉害！
grub2 密密码码设设置置的的文文件件位位置置与与加加密密的的密密码码
还记得我们在前几小节谈到主要的环境设置是在 /etc/grub.d/* 里面吧？里面的文件文件名有用数字开头，那些数字照顺序，就是
grub.cfg 的来源顺序了。 因此最早被读的应该是 00_header，但是那个文件的内容挺重要的，所以 CentOS 7 不建议你改它～那要改谁？就自
己创建一个名为 01_users 的文件即可！ 要注意是两个数字开头接着底线的文件名才行喔！然后将帐号与密码参数给它补进去！
现在让我们将 vbird 与 dmtsai 的密码加密，实际在我们的测试机器上面创建起来吧！
# 1. 先取得 vbird 与 dmtsai 的密码。下面我仅以 vbird 来说明而已！