# 群控进化史，黑产攻击效率提升带来的防守困境
##### 译文声明
本文是翻译文章，文章原作者 威胁猎人，文章来源：威胁猎人
原文地址：[https://mp.weixin.qq.com/s?timestamp=1560996683&src=3&ver=1&signature=uWV-sCYTwVs5kC*XhRRIUV8Dl2JJ7ejMjXUJuDBzHw-yiIsWaayr6fuXbvZr7LsxR51poGvB5b9EkVptGsMJSA6tkflFjaqhU-YZ5ZXWcedfpaDNY6b3C1daLjbN3UbYf6r2ssysHSneQ5qwFf69Jjn7ubIbaa2Xo1SSLAdf57o=](https://mp.weixin.qq.com/s?timestamp=1560996683&src=3&ver=1&signature=uWV-sCYTwVs5kC*XhRRIUV8Dl2JJ7ejMjXUJuDBzHw-yiIsWaayr6fuXbvZr7LsxR51poGvB5b9EkVptGsMJSA6tkflFjaqhU-YZ5ZXWcedfpaDNY6b3C1daLjbN3UbYf6r2ssysHSneQ5qwFf69Jjn7ubIbaa2Xo1SSLAdf57o=)
译文仅供参考，具体内容表达以及含义原文为准。
>
> 导语：黑灰产研究报告系列又和大家见面了。在这篇新报告中，猎人君将带大家了解群控及其进化史，揭秘攻击效率提升背后的逻辑，并提供有效的应对措施。文章由威胁猎人（ID：ThreatHunter）原创发布，并受法律保护。转载、摘编或利用其它方式使用本报告文字或者观点的，如需转载请与我们联系。违反上述声明者，将追究其相关法律责任。
## 0
一波又一波“市面上最好用的群控”
2018年下半年的时候，出现了一家号称“市面上最好用群控”的设备厂商，大肆地鼓吹和宣传自己的产品，据说光占地面积就要比传统群控节约95%。
好奇的猎人君买了一台，并且“采访”了一个大量采购的土豪“工作室”，在此之前他已经拥有了六万台移动设备、十万余个微X账号，大佬做流量生意，刷量啊、投票啊、引流啊，时机合适薅薅羊毛啊……
——“啊，死号率可以的，一到三成吧，抖X、微X都还行，拿facebooX做外贸基本都能保证效果。”
——“主要节约小工，我这儿每个人力2500一个月，提成按他出的量结算，我一块他五毛这种（这里指像“卖茶叶的姑娘”那样，通过伪装人设和大量撒网加人，用诱导诈骗等方式促成购买消费。），原来一个人做一百控（一控即一部手机），就管理设备啊、和加的人聊天，现在一个人能操作两三百个（相当于240~360台手机）吧，分到聊天上的时间多，出的量也跟着涨，他高兴我也高兴……”
——“养号操作比原来快，其他操作他都打包了，不用好几个软件跳（伪装设备指纹的软件，挂代理IP的软件等），确实节约时间。”
还真是，蛮量化的评价呢…
猎人君动手拆了自己的设备，打算一探究竟。这是一个箱型设备，需要连接网线和电源线，以下姑且简称它为箱控。
## 1
玩转谷歌和苹果开源项目的黑产
### 1、群控是啥？
群控——一种通过操作多台手机进行批量攻击的方式，可以说是黑产工作室的刚需了，在市场需求的催生下，群控类设备的供应商都非常擅长与利用各类技术对其进行升级优化。以下是某工作室的群控设备照片。
### 2、箱控是啥？
下图这次的主角——箱控的内部构造。将十二台安卓手机主板通过电路集成方式集成至一块大主板，进行统一供电和管理。
问：手机屏幕呢？
答：扔掉。我们用Apple提供的Darwin Streaming Server
传输手机画面到电脑上。（DSS是一款开源实时流媒体播放服务程序，是很多远程教育、网络监控、视频点播类系统的流媒体解决方案。）
至于设备数量问题，它通过切割内存的方式，将每个手机主板切割为十个分身。最终达到，操作一台箱控相当于操作一百二十个不同手机的观感。原本需要一个大厅存储的手机设备，现在只需要几个货架，大幅缩减了黑产的设备运营成本。
设备数量的问题解决了，如何批量操作呢？
企业大部分业务接口的关键参数都设置有特定算法，在无法对其破解进行直接攻击的时候，黑产常常需要通过模拟点击的方式伪装正常用户操作，达到攻击目的。常见的模拟点击方案是通过识别颜色、文字、形状来定位到需要点击的坐标，这种方式经常需要进行容错判断，再一次通过识别颜色形状等，来判断自己是否点击进入了目标页面，每次识别要消耗时间，速度相对较慢。
箱控使用了appium——基于Google
UiAutomator2的安卓自动化测试工具，通过文字、控件id、控件名称等直接定位到APP的控件进行操作，也就是说和上述方式相比，不用每次点击后截图，也不用根据图片一个像素一个像素的判断该点击的位置，速度得到了提升，而很多企业自身产品的自动化测试就是采用appium完成的……
回想“群控”一路的进化变种，再结合近来的种种事件，猎人君发现了一些规律。
## 2
黑产进化，优化攻击效率和成本
当前互联网黑灰产攻击有两个特点：
**1、六成攻击场景以量取胜：**
随着互联网的发展，黑产形成了一些固定的攻击模式和套路，有大量的攻击场景依附于流量，通过伪装成正常业务，再通过不断重复获利。
**2、重度依赖黑产基础资源：**
在黑产市场，像设备这样需求庞大而稳定的“资源”还有很多：IP、身份证、银行卡、支付账号、改机工具、自动化攻击软件、过滑动验证码、隐秘变现渠道等。也都逐渐形成了像接码平台一样的“服务型黑产协作平台”，这些平台越来越多，组合成了一张庞大的黑灰产基础资源网络。黑产攻击也严重依赖这些基础资源。