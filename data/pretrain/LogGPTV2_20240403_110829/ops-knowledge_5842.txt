User: How to configure network policy through iptables? Please provide common configuration examples for iptables.
Assistant: iptables is a tool for managing Linux firewalls, through which network policies can be configured. Here are some common iptables configuration examples: 1. Allow all local and loopback connections: ```bash iptables -A INPUT -i lo -j ACCEPT iptables -A INPUT -s 127.0.0.0/8 -j ACCEPT iptables -A OUTPUT -o lo -j ACCEPT ``` 2. Allow inbound and outbound connections on the specified port: ```bash iptables -A INPUT -p tcp --dport 22 -j ACCEPT iptables -A OUTPUT -p tcp --sport 22 -j ACCEPT ``` 3. Allow connections from hosts with specified IP addresses: ```bash iptables -A INPUT -s 192.168.1.2 -j ACCEPT ``` 4. Allow communication with specified protocols: ```bash iptables -A INPUT -p tcp -j ACCEPT iptables -A OUTPUT -p tcp -j ACCEPT ``` 5. Enable Network Address Translation (NAT): ```bash iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE ` `` 6. Enable IP forwarding: ```bash echo 1 > /proc/sys/net/ipv4/ip_forward iptables -A FORWARD -i eth0 -o eth1 -j ACCEPT iptables -A FORWARD -i eth1 -o eth0 -m state --state ESTABLISHED,RELATED -j ACCEPT ``` 7. Stop all inbound connections: ```bash iptables -P INPUT DROP ``` 8. Allow all host connections within a certain network range: ```bash iptables -A INPUT -s 192.168.1.0/24 -j ACCEPT ```