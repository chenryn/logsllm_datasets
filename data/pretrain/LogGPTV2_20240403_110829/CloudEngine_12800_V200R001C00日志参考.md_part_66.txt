l 如果当前接口处于其他状态，则查看日志文件，检查是否有对该接口配置
shutdown命令。
– 如果是误操作，则对该接口配置undo shutdown命令；否则请执行步骤4。
– 如果是链路故障，请更换链路，或者请执行步骤3。
步骤3 请联系技术支持人员。
步骤4 结束。
----结束
61.29 OSPFV2COMM/6/OSPF_INTF_STATE_CHANGE
日志信息
OSPFV2COMM/6/OSPF_INTF_STATE_CHANGE: Interface [IfName] state changed from
[OldState] to [NewState]. (Event=[IfEvent], ProcessId=[ProcessId])
日志含义
OSPF接口状态发生变化。
日志参数
参数名称 参数含义
[IfName] 接口名称。
[OldState] 接口之前状态。包括：
l Down
l Loopback
l Waiting
l Point-to-point
l DR Other
l Backup
l DR
文档版本 06 (2017-09-12) 华为专有和保密信息 611
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
日志参考 61 OSPF
参数名称 参数含义
[NewState] 接口当前状态。包括：
l Down
l Loopback
l Waiting
l Point-to-point
l DR Other
l Backup
l DR
Event 接口变化事件。包括：
l InterfaceUp
l WaitTimer
l BackupSeen
l NeighborChange
l LoopInd
l UnloopInd
l InterfaceDown
ProcessId 进程号。
可能原因
原因1：接口状态机发生变化。
处理步骤
步骤1 正常运行信息，无需处理。
----结束
61.30 OSPF/6/OSPF_MAX_AGE_LSA
日志信息
OSPF/6/OSPF_MAX_AGE_LSA: An LSA is aged. (RouterId=[RouterId],
LsdbAreaId=[LsdbAreaId], LsdbType=[LsdbType], LsdbLsid=[LsdbLsid],
LsdbRouterId=[LsdbRouterId])
日志含义
路由器LSDB中的LSA已经达到最大老化时间，可能发生的情况是OSPF引入的路由被
删除，或OSPF接口Down。
文档版本 06 (2017-09-12) 华为专有和保密信息 612
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
日志参考 61 OSPF
日志参数
参数名称 参数含义
[RouterId] 本设备的Router ID。
[LsdbAreaId] 新LSA的区域ID。
[LsdbType] LSA的类型。
[LsdbLsid] LSDB的LS ID。
[LsdbRouterId] LSDB的Router ID。
可能原因
原因1：接口Up、Down。
原因2：邻居状态变化。
原因3：OSPF引入的路由发生变化。
处理步骤
步骤1 请联系技术支持人员。
----结束
61.31 OSPF/4/OSPF_NSSA_TRANS_STATE_CHG
日志信息
OSPF/4/OSPF_NSSA_TRANS_STATE_CHG: The status of the NSSA translator changes.
(RouterId=[RouterId], AreaId=[AreaId], NSSATranslatorState=[NSSATranslatorState])
日志含义
NSSA转换角色改变，可能是由于该交换机在Enabled/Elected/Disabled这三个状态间变
化。
日志参数
参数名称 参数含义
RouterId Router ID。
AreaId NSSA区域的区域ID。
文档版本 06 (2017-09-12) 华为专有和保密信息 613
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
日志参考 61 OSPF
参数名称 参数含义
NSSATranslatorState 当前的NSSA转换状态。
l 1：ENABLED
l 2：ELECTED
l 3：DISABLED
可能原因
原因1：在该NSSA区域的某个ABR上人工配置或取消了nssa命令的translator-always参
数。
原因2：在该NSSA区域的某个ABR上配置了新的Router ID，并已生效。
原因3：该NSSA区域有新交换机加入，或有交换机退出。
原因4：骨干区或该NSSA区域内某个交换机重启OSPF协议或进行主备倒换，导致区域
内拓扑震荡。
原因5：人工配置命令或修改参数，引起骨干区或该NSSA区域拓扑变化。比如配置或
取消nssa命令的no-summary、no-import-route参数，会导致本交换机与骨干区和NSSA
区邻居重建。
原因6：本交换机变为ABR或者由ABR变为其他角色。
原因7：骨干区或该NSSA区拓扑改变，导致本交换机不能从骨干区或NSSA区路由到另
一个Router ID更大或配置了translator-always选项的ABR。
处理步骤
步骤1 如果本交换机人工配置或取消了nssa translator-always命令，请通过display ospf brief
查看本交换机NSSA转换角色是否正确。
l 如果是，则请执行步骤11。
l 如果不是，则请执行步骤2。
步骤2 可能是在该NSSA区域的某个ABR上配置了nssa translator-always，可以通过display
ospf lsdb router命令查看该NSSA区域中是否有某个ABR的Router-LSA的Nt bit有变化，
或者直接查看其他ABR是否配置了nssa translator-always。
l Nt bit有变化，请查看本交换机NSSA转换角色是否正确。
– 如果是，则请执行步骤11。
– 如果不是，则请执行步骤3。
l Nt bit无变化，则请执行步骤3。
步骤3 如果是在本交换机上配置了新的Router ID，并已生效，待区域内拓扑稳定后，请查看
本交换机NSSA转换角色是否正确。
l 如果是，则请执行步骤11。
l 如果不是，则请执行步骤4。
步骤4 可能是在NSSA区域的某个其他ABR上配置了新的Router ID，请查看其他ABR的配置。
确定某个ABR的Router ID有变动，待区域内拓扑稳定后，请查看本交换机NSSA转换角
色是否正确。
文档版本 06 (2017-09-12) 华为专有和保密信息 614
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
日志参考 61 OSPF
l 如果是，则请执行步骤11。
l 如果不是，则请执行步骤5。
步骤5 如果该NSSA区域有新交换机加入，或有路由器退出。
l 加入或退出的交换机中没有ABR，待区域内拓扑稳定后，查看本交换机NSSA转换
角色是否回复原状。
– 如果是，则请执行步骤11。
– 如果不是，则请执行步骤6。
l 加入或退出的交换机中有ABR，待区域内拓扑稳定后，请查看本交换机NSSA转换
角色是否正确。
– 如果是，则请执行步骤11。
– 如果不是，则请执行步骤6。
步骤6 如果是人工配置命令或修改参数，引起的骨干区或该NSSA区域拓扑震荡，请待区域内
拓扑稳定后，查看本交换机NSSA转换角色是否回复原状。
l 如果是，则请执行步骤11。
l 如果不是，则请执行步骤7。
步骤7 请通过display ospf brief检查本交换机的ABR角色是否发生变化。
l 如果是人工配置导致的ABR角色改变，请查看本路由器NSSA转换角色是否正确。
– 如果是，则请执行步骤11。
– 如果不是，则请执行步骤8。
l 没有人工干预情况下的ABR角色改变，请查看本交换机以及邻居交换机是否存在
告警OSPF_1.3.6.1.2.1.14.16.2.2 ospfNbrStateChange。
– 如果是，则请按照告警OSPF_1.3.6.1.2.1.14.16.2.2 ospfNbrStateChange的相关定
位过程定位。
– 如果不是，则请执行步骤8。
步骤8 如果本交换机转换角色从DISABLED转为ELECTED，但NSSA区域存在Router ID更大
的，或配置了translator-always选项的ABR，则通过display ospf routing router-id
[ router-id ]查看是否有到原转发者的骨干区和NSSA区路由。
l 如果是，则请执行步骤10。
l 如果不是，说明骨干区或该NSSA区拓扑改变，则请执行步骤10。
步骤9 请查看本交换机以及邻居交换机是否存在OSPF_1.3.6.1.2.1.14.16.2.2 ospfNbrStateChange
告警：
l 如果存在以上告警，请按照相关处理步骤处理。待区域内拓扑稳定后，查看本路
由器NSSA转换角色是否回复原状。
– 如果是，则请执行步骤11。
– 如果不是，则请执行步骤10。
l 如果不存在以上告警，则请执行步骤11。
步骤10 请收集该设备的告警信息、日志信息和配置信息，并联系技术支持人员。
步骤11 结束。
----结束
文档版本 06 (2017-09-12) 华为专有和保密信息 615
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
日志参考 61 OSPF
61.32 OSPF/6/OSPF_ORIGINATE_LSA
日志信息
OSPF/6/OSPF_ORIGINATE_LSA: An LSA is generated. (RouterId=[RouterId],
LsdbAreaId=[LsdbAreaId], LsdbType=[LsdbType], LsdbLsid=[LsdbLsid],
LsdbRouterId=[LsdbRouterId])
日志含义
路由器产生的新LSA，可能是由于接口发生Up、Down或OSPF邻居状态变迁，或路由
器的角色发生变化(例如，引入了路由等)。
日志参数
参数名称 参数含义
RouterId 本交换机的Router ID。
LsdbAreaId 新LSA的区域ID。
LsdbType LSA的类型。
LsdbLsid LSDB的LS ID。
LsdbRouterId LSDB的Router ID。
可能原因
原因1：接口Up、Down。
原因2：邻居状态变化。
原因3：OSPF引入的路由发生变化。
处理步骤
l 请联系技术支持人员。
----结束
61.33 OSPF/4/OSPF_TX_RETRANSMIT
日志信息
OSPF/4/OSPF_TX_RETRANSMIT: An OSPF packet is retransmitted on a non-virtual
interface. (RouterId=[RouterId], IfIpAddress=[IfIpAddress], AddressLessIf=[AddressLessIf],
NbrIfIpAddress=[NbrIfIpAddress], NbrAddressLessIf=[NbrAddressLessIf],
文档版本 06 (2017-09-12) 华为专有和保密信息 616
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
日志参考 61 OSPF
IfNeighbor=[IfNeighbor], PacketType=[PacketType], LsdbAreaId=[LsdbAreaId],
LsdbType=[LsdbType], LsdbLsid=[LsdbLsid], LsdbRouterId=[LsdbRouterId])
日志含义
OSPF报文在非虚连接接口上重传，可能是由于物理链路不通。
日志参数
参数名称 参数含义
RouterId 本交换机的Router ID。
IfIpAddress 非虚连接接口的IP地址
AddressLessIf 接口索引。
NbrIfIpAddress 邻居接口IP地址。
NbrAddressLessIf 邻居接口索引。
IfNeighbor 邻居的Router ID。
PacketType 报文类型。
LsdbAreaId LSDB的区域ID。
LsdbType LSDB类型。
LsdbLsid LSDB的LS ID。
LsdbRouterId LSDB的Router ID。
可能原因
原因1：无法ping通报文转发的地址。
原因2：对方认为此报文非法。
处理步骤
步骤1 针对每个重传的报文，查看重传的个数。
l 如果重传1或2次而且报文数量比较少，则不用理会，这属于正常现象，则请执行
步骤5。
l 出现了一些报文的大量重传现象，次数很多，而且不停出现，则请执行步骤2。
步骤2 从告警信息中找到重传的邻居的IP地址，然后ping该地址。
l 如果ping不通，则请执行步骤4。
文档版本 06 (2017-09-12) 华为专有和保密信息 617
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
日志参考 61 OSPF
l 如果可以ping通，则请执行步骤3。
步骤3 查看本路由器以及邻居路由器是否存在告警1.3.6.1.2.1.14.16.2.9，并按照该告警的处理
步骤处理，否则请执行步骤4。
步骤4 请联系技术支持人员。
步骤5 结束。
----结束
61.34 OSPF/6/OSPF_RCV_VERIFICATION
日志信息
OSPF/6/OSPF_RCV_VERIFICATION: OSPF-INFO:OSPF receives verification request.
(LocalComp=[LocalComp], PeerComp=[PeerComp], ProducerName=[ProducerName],
Event=[Event])
日志含义
发生对账事件。
日志参数
参数名称 参数含义
LocalComp 本端组件名称。
PeerComp 对端组件名称。
ProducerName 对账生产者名称。
Event 对账事件类型。
l VERIFY_REQUEST：对账请求事件。
l VERIFY_CANCEL：对账取消事件。
可能原因
数据生产者的主动检查数据一致性的行为。
处理步骤
l 正常运行信息，无需处理。
----结束
文档版本 06 (2017-09-12) 华为专有和保密信息 618
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
日志参考 61 OSPF
61.35 OSPF/3/OSPF_SEQ_MIS_RESMOOTH
日志信息
OSPF/3/OSPF_SEQ_MIS_RESMOOTH: OSPF-INFO:The communication components
started transmitting data again from the first piece because of the incorrect sequence number.
(CurSeq=[CurSeq], RecvSeq=[RecvSeq], LocalComp=[LocalComp], PeerComp=[PeerComp]
)
日志含义
由于序列号错误导致通信双方进行重新平滑。
日志参数
参数名称 参数含义
CurSeq 当前序列号。
RecvSeq 接收序列号。
LocalComp 本端组件名称。
PeerComp 对端组件名称。
可能原因
通信双方之间的丢失，导致序列号不匹配。
处理步骤
步骤1 请联系技术支持人员。
----结束
61.36 OSPF/6/OSPF_SMOOTH
日志信息
OSPF/6/OSPF_SMOOTH: OSPF-INFO:Smooth event happen between components.
(LocalComp=[LocalComp], PeerComp=[PeerComp], ProducerName=[ProducerName],
SmoothLevel=[SmoothLevel], ProcessId=[ProcessId], AreaTableId=[AreaTableId],
SmoothEvent=[SmoothEvent])
日志含义
发生平滑事件。
文档版本 06 (2017-09-12) 华为专有和保密信息 619
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
日志参考 61 OSPF
日志参数
参数名称 参数含义