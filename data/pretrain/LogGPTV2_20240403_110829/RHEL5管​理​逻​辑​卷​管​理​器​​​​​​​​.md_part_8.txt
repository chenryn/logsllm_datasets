`lvm.conf`{.filename} 文​​​​​​​件​​​​​​​中​​​​​​​禁​​​​​​​用​​​​​​​了​​​​​​​此​​​​​​​功​​​​​​​能​​​​​​​。​​​​​​​默​​​​​​​认​​​​​​​情​​​​​​​况​​​​​​​下​​​​​​​，元​​​​​​​数​​​​​​​据​​​​​​​备​​​​​​​份​​​​​​​保​​​​​​​存​​​​​​​在​​​​​​​
`/etc/lvm/backup`{.literal} 中​​​​​​​，元​​​​​​​数​​​​​​​据​​​​​​​归​​​​​​​档​​​​​​​保​​​​​​​存​​​​​​​在​​​​​​​
`/etc/lvm/archive`{.literal} 中​​​​​​​。​​​​​​​元​​​​​​​数​​​​​​​据​​​​​​​归​​​​​​​档​​​​​​​在​​​​​​​
`/etc/lvm/archive`{.literal} 中​​​​​​​保​​​​​​​存​​​​​​​的​​​​​​​时​​​​​​​间​​​​​​​和​​​​​​​多​​​​​​​少​​​​​​​取​​​​​​​决​​​​​​​于​​​​​​​您​​​​​​​在​​​​​​​
`lvm.conf`{.literal} 文​​​​​​​件​​​​​​​中​​​​​​​设​​​​​​​定​​​​​​​的​​​​​​​参​​​​​​​数​​​​​​​。​​​​​​​日​​​​​​​常​​​​​​​系​​​​​​​统​​​​​​​备​​​​​​​份​​​​​​​应​​​​​​​该​​​​​​​在​​​​​​​备​​​​​​​份​​​​​​​中​​​​​​​包​​​​​​​含​​​​​​​
`/etc/lvm`{.literal} 目​​​​​​​录​​​​​​​的​​​​​​​内​​​​​​​容​​​​​​​。​​​​​​​
:::
::: para
注​​​​​​​意​​​​​​​：元​​​​​​​数​​​​​​​据​​​​​​​备​​​​​​​份​​​​​​​并​​​​​​​不​​​​​​​包​​​​​​​含​​​​​​​逻​​​​​​​辑​​​​​​​卷​​​​​​​中​​​​​​​的​​​​​​​用​​​​​​​户​​​​​​​和​​​​​​​系​​​​​​​统​​​​​​​数​​​​​​​据​​​​​​​。​​​​​​​
:::
::: para
You can manually back up the metadata to the
`/etc/lvm/backup`{.filename} file with the `vgcfgbackup`{.command}
command. You can restore metadata with the `vgcfgrestore`{.command}
command. The `vgcfgbackup`{.command} and `vgcfgrestore`{.command}
commands are described in [第 4.3.12 节
"备​​​​​​​份​​​​​​​卷​​​​​​​组​​​​​​​元​​​​​​​数​​​​​​​据​​​​​​​"](#LVM_CLI.html#VG_backup){.xref}.
:::
:::
::: section
::: titlepage
# [⁠]{#LVM_administration.html#logging}3.5. 日​​​​​​​志​​​​​​​ {.title}
:::
[]{#LVM_administration.html#idm139761091187776
.indexterm}[]{#LVM_administration.html#idm139761090042624 .indexterm}
::: para
所​​​​​​​有​​​​​​​信​​​​​​​息​​​​​​​输​​​​​​​出​​​​​​​都​​​​​​​是​​​​​​​通​​​​​​​过​​​​​​​日​​​​​​​志​​​​​​​模​​​​​​​块​​​​​​​传​​​​​​​递​​​​​​​，日​​​​​​​志​​​​​​​模​​​​​​​式​​​​​​​根​​​​​​​据​​​​​​​日​​​​​​​志​​​​​​​级​​​​​​​别​​​​​​​有​​​​​​​不​​​​​​​同​​​​​​​的​​​​​​​选​​​​​​​择​​​​​​​：
:::
::: {.itemizedlist xmlns:d="http://docbook.org/ns/docbook"}
-   ::: para
    标​​​​​​​准​​​​​​​输​​​​​​​出​​​​​​​/错​​​​​​​误​​​​​​​
    :::
-   ::: para
    系​​​​​​​统​​​​​​​日​​​​​​​志​​​​​​​
    :::
-   ::: para
    日​​​​​​​志​​​​​​​文​​​​​​​件​​​​​​​
    :::
-   ::: para
    外​​​​​​​部​​​​​​​日​​​​​​​志​​​​​​​功​​​​​​​能​​​​​​​
    :::
:::
::: para
The logging levels are set in the `/etc/lvm/lvm.conf`{.filename} file,
which is described in [附录 B, *LVM
配​​​​​​​置​​​​​​​文​​​​​​​件​​​​​​​*](#config_file.html){.xref}.
:::
:::
:::
[]{#LVM_CLI.html}
::: chapter
::: titlepage
# [⁠]{#LVM_CLI.html#LVM_CLI}第 4 章 用​​​​​​​ CLI 命​​​​​​​令​​​​​​​管​​​​​​​理​​​​​​​ LVM {.title}
:::
::: para
本​​​​​​​章​​​​​​​总​​​​​​​结​​​​​​​了​​​​​​​您​​​​​​​可​​​​​​​使​​​​​​​用​​​​​​​ LVM
命​​​​​​​令​​​​​​​行​​​​​​​界​​​​​​​面​​​​​​​（CLI）来​​​​​​​创​​​​​​​建​​​​​​​和​​​​​​​维​​​​​​​护​​​​​​​逻​​​​​​​辑​​​​​​​卷​​​​​​​的​​​​​​​独​​​​​​​立​​​​​​​管​​​​​​​理​​​​​​​任​​​​​​​务​​​​​​​。​​​​​​​
:::
::: {.note xmlns:d="http://docbook.org/ns/docbook"}
::: admonition_header
**注意**
:::
::: admonition
::: para
If you are creating or modifying an LVM volume for a clustered
environment, you must ensure that you are running the `clvmd`{.literal}
daemon. For information, see see [第 3.1 节 "在​​​​​​​群​​​​​​​集​​​​​​​中​​​​​​​创​​​​​​​建​​​​​​​ LVM
卷​​​​​​​"](#LVM_administration.html#cluster_setup){.xref}.
:::
:::
:::
::: section
::: titlepage
# [⁠]{#LVM_CLI.html#CLI_usage}4.1. 使​​​​​​​用​​​​​​​ CLI 命​​​​​​​令​​​​​​​ {.title}
:::
::: para
LVM CLI 命​​​​​​​令​​​​​​​有​​​​​​​一​​​​​​​些​​​​​​​通​​​​​​​用​​​​​​​的​​​​​​​特​​​​​​​性​​​​​​​。​​​​​​​
:::
[]{#LVM_CLI.html#idm139761089464640
.indexterm}[]{#LVM_CLI.html#idm139761069399360 .indexterm}
::: para
当​​​​​​​在​​​​​​​命​​​​​​​令​​​​​​​行​​​​​​​中​​​​​​​需​​​​​​​要​​​​​​​容​​​​​​​量​​​​​​​参​​​​​​​数​​​​​​​时​​​​​​​，可​​​​​​​以​​​​​​​明​​​​​​​确​​​​​​​指​​​​​​​定​​​​​​​单​​​​​​​位​​​​​​​。​​​​​​​如​​​​​​​果​​​​​​​您​​​​​​​不​​​​​​​指​​​​​​​定​​​​​​​单​​​​​​​位​​​​​​​，那​​​​​​​么​​​​​​​就​​​​​​​使​​​​​​​用​​​​​​​默​​​​​​​认​​​​​​​的​​​​​​​
KB 或​​​​​​​者​​​​​​​ MB。​​​​​​​LVM CLI 不​​​​​​​接​​​​​​​受​​​​​​​分​​​​​​​数​​​​​​​。​​​​​​​
:::
::: para
在​​​​​​​命​​​​​​​令​​​​​​​行​​​​​​​参​​​​​​​数​​​​​​​中​​​​​​​为​​​​​​​ LVM 指​​​​​​​定​​​​​​​单​​​​​​​位​​​​​​​时​​​​​​​要​​​​​​​无​​​​​​​需​​​​​​​区​​​​​​​分​​​​​​​大​​​​​​​小​​​​​​​写​​​​​​​，比​​​​​​​如​​​​​​​ M 或​​​​​​​者​​​​​​​ m
的​​​​​​​效​​​​​​​果​​​​​​​是​​​​​​​一​​​​​​​样​​​​​​​的​​​​​​​，且​​​​​​​使​​​​​​​用​​​​​​​ 2 的​​​​​​​乘​​​​​​​方​​​​​​​（乘​​​​​​​ 1024）。​​​​​​​但​​​​​​​是​​​​​​​，在​​​​​​​某​​​​​​​个​​​​​​​命​​​​​​​令​​​​​​​中​​​​​​​指​​​​​​​定​​​​​​​
`--units`{.option} 参​​​​​​​数​​​​​​​时​​​​​​​，小​​​​​​​写​​​​​​​表​​​​​​​示​​​​​​​该​​​​​​​单​​​​​​​位​​​​​​​乘​​​​​​​ 1024，而​​​​​​​大​​​​​​​写​​​​​​​表​​​​​​​示​​​​​​​该​​​​​​​单​​​​​​​位​​​​​​​乘​​​​​​​
1000。​​​​​​​
:::
[]{#LVM_CLI.html#idm139761060138912
.indexterm}[]{#LVM_CLI.html#idm139761066839088 .indexterm}
::: para
在​​​​​​​命​​​​​​​令​​​​​​​使​​​​​​​用​​​​​​​卷​​​​​​​组​​​​​​​或​​​​​​​者​​​​​​​逻​​​​​​​辑​​​​​​​卷​​​​​​​名​​​​​​​称​​​​​​​作​​​​​​​为​​​​​​​参​​​​​​​数​​​​​​​时​​​​​​​，完​​​​​​​整​​​​​​​路​​​​​​​径​​​​​​​名​​​​​​​称​​​​​​​是​​​​​​​可​​​​​​​选​​​​​​​项​​​​​​​。​​​​​​​卷​​​​​​​组​​​​​​​
`vg0`{.literal} 中​​​​​​​的​​​​​​​逻​​​​​​​辑​​​​​​​卷​​​​​​​ `lvol0`{.literal} 可​​​​​​​被​​​​​​​指​​​​​​​定​​​​​​​为​​​​​​​
`vg0/lvol0`{.literal}。​​​​​​​如​​​​​​​果​​​​​​​空​​​​​​​置​​​​​​​需​​​​​​​要​​​​​​​指​​​​​​​定​​​​​​​卷​​​​​​​组​​​​​​​的​​​​​​​地​​​​​​​方​​​​​​​，就​​​​​​​会​​​​​​​代​​​​​​​入​​​​​​​所​​​​​​​有​​​​​​​列​​​​​​​出​​​​​​​的​​​​​​​卷​​​​​​​组​​​​​​​。​​​​​​​在​​​​​​​需​​​​​​​要​​​​​​​指​​​​​​​定​​​​​​​一​​​​​​​组​​​​​​​逻​​​​​​​辑​​​​​​​卷​​​​​​​的​​​​​​​地​​​​​​​方​​​​​​​给​​​​​​​出​​​​​​​了​​​​​​​卷​​​​​​​组​​​​​​​，就​​​​​​​会​​​​​​​代​​​​​​​入​​​​​​​那​​​​​​​个​​​​​​​卷​​​​​​​组​​​​​​​中​​​​​​​的​​​​​​​列​​​​​​​出​​​​​​​的​​​​​​​逻​​​​​​​辑​​​​​​​卷​​​​​​​。​​​​​​​例​​​​​​​如​​​​​​​：`lvdisplay vg0`{.command}
命​​​​​​​令​​​​​​​将​​​​​​​显​​​​​​​示​​​​​​​卷​​​​​​​组​​​​​​​ `vg0`{.literal} 中​​​​​​​的​​​​​​​所​​​​​​​有​​​​​​​逻​​​​​​​辑​​​​​​​卷​​​​​​​。​​​​​​​
:::
[]{#LVM_CLI.html#idm139761029316384 .indexterm}
::: para
所​​​​​​​有​​​​​​​ LVM 命​​​​​​​令​​​​​​​都​​​​​​​接​​​​​​​受​​​​​​​ `-v`{.option}
参​​​​​​​数​​​​​​​，它​​​​​​​可​​​​​​​多​​​​​​​次​​​​​​​输​​​​​​​入​​​​​​​来​​​​​​​提​​​​​​​高​​​​​​​输​​​​​​​出​​​​​​​的​​​​​​​详​​​​​​​细​​​​​​​程​​​​​​​度​​​​​​​。​​​​​​​例​​​​​​​如​​​​​​​：以​​​​​​​下​​​​​​​示​​​​​​​例​​​​​​​显​​​​​​​示​​​​​​​的​​​​​​​是​​​​​​​
`lvcreate`{.command} 命​​​​​​​令​​​​​​​的​​​​​​​默​​​​​​​认​​​​​​​输​​​​​​​出​​​​​​​。​​​​​​​
:::
``` screen
# lvcreate -L 50MB new_vg
  Rounding up size to full physical extent 52.00 MB
  Logical volume "lvol0" created
```
::: para
下​​​​​​​面​​​​​​​是​​​​​​​ `lvcreate`{.command} 命​​​​​​​令​​​​​​​带​​​​​​​ `-v`{.option} 参​​​​​​​数​​​​​​​的​​​​​​​输​​​​​​​出​​​​​​​。​​​​​​​
:::
``` screen
# lvcreate -v -L 50MB new_vg
    Finding volume group "new_vg"
  Rounding up size to full physical extent 52.00 MB
    Archiving volume group "new_vg" metadata (seqno 4).
    Creating logical volume lvol0
    Creating volume group backup "/etc/lvm/backup/new_vg" (seqno 5).
    Found volume group "new_vg"
    Creating new_vg-lvol0
    Loading new_vg-lvol0 table
    Resuming new_vg-lvol0 (253:2)
    Clearing start of logical volume "lvol0"
    Creating volume group backup "/etc/lvm/backup/new_vg" (seqno 5).
  Logical volume "lvol0" created
```
::: para
您​​​​​​​还​​​​​​​可​​​​​​​以​​​​​​​使​​​​​​​用​​​​​​​ `-vv`{.option}、​​​​​​​`-vvv`{.option} 或​​​​​​​者​​​​​​​ `-vvvv`{.option}
参​​​​​​​数​​​​​​​来​​​​​​​提​​​​​​​高​​​​​​​命​​​​​​​令​​​​​​​执​​​​​​​行​​​​​​​的​​​​​​​详​​​​​​​细​​​​​​​程​​​​​​​度​​​​​​​。​​​​​​​`-vvvv`{.option}
参​​​​​​​数​​​​​​​可​​​​​​​以​​​​​​​提​​​​​​​供​​​​​​​最​​​​​​​多​​​​​​​的​​​​​​​信​​​​​​​息​​​​​​​。​​​​​​​以​​​​​​​下​​​​​​​是​​​​​​​ ` lvcreate`{.command} 命​​​​​​​令​​​​​​​带​​​​​​​
`-vvvv`{.option} 参​​​​​​​数​​​​​​​时​​​​​​​给​​​​​​​出​​​​​​​的​​​​​​​输​​​​​​​出​​​​​​​的​​​​​​​前​​​​​​​几​​​​​​​行​​​​​​​。​​​​​​​
:::
``` screen
# lvcreate -vvvv -L 50MB new_vg
#lvmcmdline.c:913         Processing: lvcreate -vvvv -L 50MB new_vg
#lvmcmdline.c:916         O_DIRECT will be used
#config/config.c:864       Setting global/locking_type to 1
#locking/locking.c:138       File-based locking selected.
#config/config.c:841       Setting global/locking_dir to /var/lock/lvm
#activate/activate.c:358       Getting target version for linear
#ioctl/libdm-iface.c:1569         dm version   OF   [16384]
#ioctl/libdm-iface.c:1569         dm versions   OF   [16384]
#activate/activate.c:358       Getting target version for striped
#ioctl/libdm-iface.c:1569         dm versions   OF   [16384]
#config/config.c:864       Setting activation/mirror_region_size to 512
...
```
[]{#LVM_CLI.html#idm139761069396384
.indexterm}[]{#LVM_CLI.html#idm139761069395424 .indexterm}
::: para
您​​​​​​​可​​​​​​​以​​​​​​​用​​​​​​​命​​​​​​​令​​​​​​​的​​​​​​​ `--help`{.option} 参​​​​​​​数​​​​​​​来​​​​​​​显​​​​​​​示​​​​​​​任​​​​​​​意​​​​​​​ LVM CLI 命​​​​​​​令​​​​​​​的​​​​​​​帮​​​​​​​助​​​​​​​信​​​​​​​息​​​​​​​。​​​​​​​
:::
``` screen
commandname --help
```
[]{#LVM_CLI.html#idm139761069392032 .indexterm}
::: para
要​​​​​​​显​​​​​​​示​​​​​​​某​​​​​​​个​​​​​​​命​​​​​​​令​​​​​​​的​​​​​​​ man page，请​​​​​​​执​​​​​​​行​​​​​​​ `man`{.command} 命​​​​​​​令​​​​​​​：
:::
``` screen
man commandname