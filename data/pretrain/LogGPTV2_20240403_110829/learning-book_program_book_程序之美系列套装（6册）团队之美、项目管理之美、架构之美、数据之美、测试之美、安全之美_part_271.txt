μx=9.0Oy =3.317
Y
=3+0.5X
PY=7.50y=2.03
R2=0.67
图12-1：Anscombe的"四重检测”（Qartet)，
包含统计学上相似的数
据集来说明如何利用可视化帮助人们理解
本着这种思想，绝大多数可视化集中于研究可视化应用的感性和认
知方面，通常是在单用户交互系统的上下文中。然而，在实践中，
可视化分析通常是一个社会过程。人们可能对于如何理解数据有不
1532
---
## Page 1534
同的见解，可能会提供上下文知识来帮助加深理解。由于参与者达
成共识，他们可以从同龄中互相学习。此外，有些数据集很大，由
一个人完全深入探索是不可能的。这意味着为了全面支持有意义的
决策(snse-making)，可视化应该也支持社会交互。
基于这些观点，我和同事MartinWatternberg以及IBM研究院的
FernandaViegas开始调查用于可视化数据的用户界面如何可以更好
地促进“可视化的社交生活”。我们并始启动研究项目，设计和实现
网站sense.us，致力于形成人口统计数据的团体探索。该网站提供了
一套美国过去150年的人口统计数据的可视化的解决方案，以及促
进面向团体的数据分析的协作机制。
在本章的剩余部分，我将分享sense.us网站的设计过程，包括：我们
如何选择和处理数据，开发一套可视化方案，并设计协作特征来促
进社交数据分析。最后，观察人们如何通过该系统协作构建数据。
1533
---
## Page 1535
数据
Martin、Fernanda和我以研究人员的心态开始做这个项目：我们希望
能够理解在可视化分析过程中，应该如何最好地支持社会交互。我
们对数据集的选择不是预先确定的。但是，很显然，好的数据领域
的数据集将会满足某些特定的属性：我们想要大规模的、真实世界
的数据集，它们和普通的大众相关，而且数据丰富，可以保证很多
不同的分析。根据这些标准，人口普查统计的数据看起来很理想。
我还一直对促使人口统计数据更公开、可访问感兴趣：我相信这是
重要的一个方面，通过它我们可以更好地理解自己和历史。
我通过美国人口普查局的网站(htp：//www.census.gov)开始搜索数
据。事实证明，这种方式收效甚微。人口普查局在各种聚集层次提
供了很多不同维度的数据集（如通过邮政编码、都市区域），但是
只在最近几年人口普查才有丰富的数据。我还意识到自己在该网站
搜索数据时不够集中深入。人口普查数据在过去几十年如何收集和
建模的来龙去脉，还函待进一步了解。例如，人口普查局在收集数
据过程中使用的问题以及涉及的范围在过去几十年在不断变化，意
味着即使该网站包含某个人每年的数据，它也并不能保证这些数据
能够很容易具有比较性。
一般情况下，人们在对某个数据领域有了最基本的熟练程度之前，
不应该一下子扎进可视化设计。因此，我的下一个步骤是访问各个
领域的专家们：加州大学伯克利分校的社会学和人口学部门的同
事，那时我是该部门的研究生。通过和他们的讨论，我对人口普查
是如何工作以及人口学家使用哪些数据源研究人口有了更深的理
解。在这个过程中，有人为我介绍了一个宝贵的资源：由明尼苏达
大学人口中心(htp：//www.ipums.org)维护的综合公用微观数据序列
(ItegratedPublicUse Microdata Series,IPUMS)数据库。IPUMS-USA数
据库包含了1850～2000年的美国人口普查数据。其普查周期是10
年，只有1890年例外，没有普查数据；在1921年这些数据记录在商
业大厦(CmmerceBuilding)被大火摧毁。IPUMS数据包含了每10年的
代表性样本数据，占这10年的人口普查记录的总样本数据的1%或
5%。每条记录代表人口样本的某个特征人物。在某些情况下，有某
些特征的人物和家庭被多次代表，因而记录需要和不同的权值关
联。
1534
---
## Page 1536
IPUMS-USA数据库特别吸引人之处在于IPUMS项目为所有的人口统
计学变量开发了统一的代码和文档，这有助于随着时间分析变化
这种“和谐化”是一种宝贵的服务，使得能够进行比较性分析，而且
通过扩展，可以获取一些新的洞察。然而，把分离的数据应用于共
享模式的过程不可避免地引入了人工干预，该问题在后面还会出
现。
诚如之前所述，IPUMS-USA数据库包含413个人口统计学变量，其
涉及的范围从普通的领域如性别、年龄、种族、婚姻状态和职业，
直到多少家庭包含洗衣机、烘干机、抽水马桶和电视（见图12
2）。在很多情况下，一些变量只在某几年有数据记录，而在其他
年份，这些变量完全没有被测量。
Dempgraphie Variables (Persen)
Leet
口
D
口
口
口
口
口
SEMNT
口
口
0.0
口
口
口
NRRISTE
口
口
图12-2：在IPUMS-USA数据库中可访问的人口统计学变量的摘要
IPUMS项目的宗旨是“只用它从善，不作恶"（ueitforgood,neverfor
evil)。幸运的是，在实施该言的过程中，超出了人们在下载数据
摘要时必须点击的复选框。为了保护个人隐私，有些数据的可访问
性受到了限制。举个例子，不包含宗教从属关系，而且详细的人口
统计数据的可访问性也受到很大限制，尤其是对于人口密度低的地
区。
我们决定采用IPUMS-USA作为sense.us应用的主要数据来源。使用
IPUMSWeb界面，我们首先选择了1850～2000年的样本数据（不包
括1890年），然后选择了需要抽取的一组变量。绝大多数变量只是
所有人口统计年份的一个子集。为了对长期的变化进行可视化探
索，我们选择了一组变量，它们至少在一个世纪内都是可访问的。
1535
---
## Page 1537
这组变量由22个变量组成，包括年龄、性别、婚姻状态、出生地
（美国某个州/地区或者其他国家）、职业、种族、学校出勤率以及
地理区域。由于隐私约束，地理数据仅仅局限于粗粒度的区域如新
英格兰和美国西海岸。结果数据的抽取是把520MB的Gzip文件解压
缩为3.3GB的文本文件。
接下来，我不会赘述后续发生的详细细节。数据处理、清洗以及后
续的导入操作是直接但繁琐的过程，最终生成了包含抽取出来的可
查询形式的人口统计数据，保存在MySQL数据库中。为了帮助分
析，我们使用星型模式来组织数据
(htp：//en.wikipedia.org/wiki/Star_schema)：把人口统计的评测方法
存储到一张大的事实维表(fcttable)，该维表的每一列表示一个人口
统计学变量，通过键值表示变量的范围值。维度表集合存储了每个
人口统计变量采用的键值的文本标签和描述。
这种组合方式提供了指导探索性分析的基础。我们通过发布查询生
成数据摘要，这些查询通过选定的维度“向上钻取"(rlledup)数据。
举个例子，我们可以通过对所有其他变量的样本人数进行求和，分
离出年龄、性别和婚姻状态的关系。简而言之，我们拥有探索数据
和原型系统可视化的基础。
可视化
给定人口统计数据的大小和范围，我们早就意识到把单一的可视化
设计应用于所有的数据可能会导致某些灾难。只要有可能，我们就
希望把数据转换成最简单的形式，用于支持广泛的分析。由于我们
的设计需要面对广泛的受众，我们创建了一个可视化数据集合的方
法，它表示选定数据的分片。在本质上，我们希望可视化有用，同
时，它文尽可能地简单。
因此，我们的设计哲学需要理清哪一种数据集合可能是最大的兴趣
点，而哪一种可视化设计和交互技术可以最佳支持对这些维度的积
极探索。为了实现这一点，我们开始同时探索数据本身和可视化设
计空间。
在设计一个界面来帮助别人探索数据之前，我希望首先能够确保数
据本身足够有趣，使得别人愿意去探索它。我在探索中采用了很多
种方法，包括SQL查询、Excel和可视化系统。数据探索最有用的工
具是数据库可视化系统Tableau。使用Tableau工具，人们可以把数据
1536
---
## Page 1538
库的各个字段通过拖拽方式映射到视觉编码中；然后，应用查询该
数据库，对结果进行可视化（披露一下，我是Tableau软件的顾
问）。因此，我们可以对很多不同方法构建可视化原型系统（见图
12-3）。我们生成了一个庞大的数据可视化集合，和同事分享该集
合，收集他们的反馈。使用真实数据快速评估可视化方法的能力为
我们节省了很多实验时间，使得能够为最后的系统设计保留并发精
力。
在探索数据过程中，我记录下了有趣的趋势、模式和发现的游离
点。在某些情况下，有意思的故事是在很多维度的组合下发现的。
例如，通过年龄和性别对婚姻状态的统计结果说明了女性初次结婚
的平均年龄随着时间在增长，在过去一个世纪大约增长了5年。在
其他情况下，根据单一数据类型描绘的曲线随着时间推移，揭示了
很多有意思的故事，如农民工在劳动力市场中的盛衰以及全球不同
的移民浪潮。一般来说，我发现对数据进行转换是很有用的，可任
意把数据看做绝对人口数量，或者看做是十年内人口普查比例。
图12-3：使用Tableau工具构建的显示几十年间婚姻状态分布的原
型系统可视化（见彩图36）
设计考虑
有了原型系统，Martin、Fernanda和我为sense.us应用协作设计了交
互式可视化。在设计中，我们首先简单列出了设计中的一些考虑。
1537
---
## Page 1539
培养个人相关性
如果没有人关心数据，就没有人会去探索它。我们假设熟悉的维度
如地理和时间，使得用户能够快速地在数据和表单叙述中他们自己
（或者和他们相似的人们）。假设我们可以访问的地理数据是有限
的，我们集中于随着时间的变化来表示数据。我们还尝试使用交互
技术，使用户可以快速找到他们感兴趣的数据记录，如特定的职业
或国家起源。
提供有效的视觉编码
自然而然，我们希望使用视觉编码来帮助理解数据。在某些情况
下，这种工作任务直截了当：如果想要检验两个数值之间的关联，
我将很难找到比散点图更好的表示方式。在这种情况下，我们需要
做出很多折中权衡。
对随着时间变化进行可视化的一个通用方法是使用线条图。但是，
乱。取而代之，我们选择堆栈图(sackedgraph)，它们可以把一个图
叠加到另一个图上，从而可以对多条时间序列视觉上求和（见图12-