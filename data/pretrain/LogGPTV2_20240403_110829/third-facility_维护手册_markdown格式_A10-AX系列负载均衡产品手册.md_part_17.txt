Mode Global configuration
page 153 | Document No.: 410-P2-CLI-001 - 6/17/2016
A10 Thunder Series and AX Series—Command Line Interface Reference
logging single-priority
Description Configure single-priority logging to log one specific severity level from among the standard
syslog message severity levels.
Syntax [no] logging single-priority {emergency | alert | critical | error |
warning | notification | information | debugging}
Parameter Description
emergency Log emergency events (severity level 0—system unusable) only.
alert Log alert events (severity level 1—take action immediately) only.
critical Log critical events (severity level 2—system is in critical condition) only.
error Log error events (severity level 3—system has an error condition) only.
warning Log warning events (severity level 4—system has warning conditions) only.
notification Log notifications (severity level 5—normal but significant conditions) only.
information Log informational messages (severity level 6) only.
debugging Log debug level messages (severity level 7) only.
Default Not set (no logging)
Mode Configuration mode
logging syslog
Description Set the syslog logging level for events sent to the syslog host.
Syntax [no] logging syslog
{disable | emergency | alert | critical | error | warning |
notification | information | debugging}
Parameter Description
disable Disable logging of syslog events.
emergency Send emergency events (severity level 0—system unusable) to the syslog host.
alert Send alert events (severity level 1—take action immediately) to the syslog host.
critical Send critical events (severity level 2—system is in critical condition) to the syslog host.
error Send error events (severity level 3—system has an error condition) to the syslog host.
warning Send warning events (severity level 4—system has warning conditions) to the syslog host.
notification Send notifications (severity level 5—normal but significant conditions) to the syslog host.
information Send informational messages (severity level 6) to the syslog host.
debugging Send debug level messages (severity level 7) to the syslog host.
Default Not set (no logging)
Mode Global configuration
Document No.: 410-P2-CLI-001 - 6/17/2016 | page 154
A10 Thunder Series and AX Series—Command Line Interface Reference
logging trap
Description Set the logging level for traps sent to the SNMP host.
Syntax [no] logging trap {disable | emergency | alert | critical}
Parameter Description
disable Disable logging of SNMP traps.
emergency Sent emergency events (severity level 0—system unusable) to the SNMP host.
alert Send alert events (severity level 1—take action immediately) to the SNMP host.
critical Send critical events (severity level 2—system is in critical condition) to the SNMP host.
Default Not set (no logging)
Mode Global configuration
mac-address
Description Configure a static MAC address.
Syntax [no] mac-address mac-address port port-num vlan vlan-id
[trap {source | dest | both}]
Parameter Description
mac-address Hardware address, in the following format:
aabb.ccdd.eeff
port port-num ACOS Ethernet port to which to assign the MAC address.
If the ACOS device is a member of an aVCS virtual chassis, specify
the interface as follows:
DeviceID/Portnum
vlan vlan-id Layer 2 broadcast domain in which to place the device.
trap Send packets to the CPU for processing, instead of switching them
in hardware.:
• source – Send packets that have this MAC as a source address to
the CPU.
• dest – Send packets that have this MAC as a destination address
to the CPU.
• both – Send packets that have this MAC as either a source or
destination address to the CPU.
NOTE: The trap option is supported on only some AX models: AX 3200-12, AX 3400,
AX5200-11 and AX5630.
page 155 | Document No.: 410-P2-CLI-001 - 6/17/2016
A10 Thunder Series and AX Series—Command Line Interface Reference
Default No static MAC addresses are configured by default.
Mode Configuration mode
Example The following command configures static MAC address abab.cdcd.efef on port 5 in VLAN 3:
ACOS(config)#mac-address abab.cdcd.efef port 5 vlan 3
mac-age-time
Description Set the aging time for dynamic (learned) MAC entries. An entry that remains unused for the
duration of the aging time is removed from the MAC table.
Syntax [no] mac-age-time seconds
Replace seconds with the number of seconds a learned MAC entry can remain unused
before it is removed from the MAC table (10-600).
Default 300 seconds
Mode Configuration mode
On some AX models, the actual MAC aging time can be up to 2 times the configured value.
For example, if the aging time is set to 50 seconds, the actual aging time will be between 50
and 100 seconds. (This applies to the AX3200-12, AX 3400, AX 5200-11 and AX5630.)
On other models, the actual MAC aging time can be +/- 10 seconds from the configured
value.
Example The following command changes the MAC aging time to 600 seconds:
ACOS(config)#mac-age-time 600
maximum-paths
Description Change the maximum number of paths a route can have in the forwarding Information Base
(FIB).
Syntax [no] maximum-paths num
Replace num for the maximum number of paths a route can have. You can specify 1-64.
Default 10
Mode Configuration mode
Document No.: 410-P2-CLI-001 - 6/17/2016 | page 156
A10 Thunder Series and AX Series—Command Line Interface Reference
merge-mode-add
Description Use this command to enter “merge” mode and integrate new configurations into the current
running configuration. This is a setting of the “block-merge” command in which any child
instances of the old configuration are retained if not present in the new configuration.
Syntax merge-mode-add slb {server | service-group | virtual-server}
Parameter Description
server Controls block-merge behavior for slb server.
service- Controls block-merge behavior for slb service-group.
group
virtual- Controls block-merge behavior for slb virtual-server.
server
Default N/A
Mode Block-merge configuration mode
mirror-port
Description Specify a port to receive copies of another port’s traffic.
For more information about mirror port configuration, see “Multiple Port-Monitoring Mirror
Ports” in the System Configuration and Administration Guide.
Syntax [no] mirror-port portnum ethernet portnum [input | output | both]
Parameter Description
mirror-port Mirror port index number.
portnum
ethernet Ethernet port number. This is the port that will act as the mirror port.
portnum Mirrored traffic from the monitored port will be copied to and sent out
of this port.
input Configures the mirror port so that only inbound traffic from the moni-
tored port can be sent out of the mirror port.
output Configures the mirror port so that only outbound traffic from the
monitored port can be sent out of the mirror port.
both Configures the mirror port so that both inbound and outbound traffic
from the monitored port can be sent out of the mirror port.
This is the default behavior, meaning that if no traffic direction is spec-
ified, then both inbound and outbound traffic will be mirrored with-
out having to explicitly specify the both option.
page 157 | Document No.: 410-P2-CLI-001 - 6/17/2016
A10 Thunder Series and AX Series—Command Line Interface Reference
Default Not set
Mode Configuration mode
Usage When enabling monitoring on a port, you can specify the mirror port to use. You also can
specify the traffic direction. A monitored port can use multiple mirror ports.
To specify the port to monitor, use the monitor command at the interface configuration
level. (See the “monitor” command in the Network Configuration Guide.)
Example The following command configures Ethernet port 4 so that it is able to send both inbound
and outbound traffic from the monitored port:
ACOS(config)#mirror-port 1 ethernet 4 both
The following commands configure a monitor port, Ethernet port 8, to use Ethernet port 4 as
the mirror port, using mirror index 1 from above:
ACOS(config)#inferface ethernet 8
ACOS(config-if:ethernet:8)#monitor 1 both
Example The following command configures Ethernet port 3 to send only inbound traffic from the
monitored port:
ACOS(config)#mirror-port 2 ethernet 3 input
The following commands configure a monitor port, Ethernet port 6, to use Ethernet port 3 as
the mirror port, using mirror index 2 from above. Note that the input parameter must be
used on the monitor port since the mirror port was also configured with the input
parameter:
ACOS(config)#inferface ethernet 6
ACOS(config-if:ethernet:6)#monitor 2 input
monitor
Description Specify event thresholds for utilization of resources.
Document No.: 410-P2-CLI-001 - 6/17/2016 | page 158
A10 Thunder Series and AX Series—Command Line Interface Reference
Syntax [no] monitor resource-type threshold-value
Parameter Description
resource-type Type of resource for which to set the monitoring threshold:
• buffer-drop – Packet drops (dropped IO buffers)
• buffer-usage – Control buffer utilization
The conn-type resources configure the conn resource type
thresholds per CPU:
• conn-type0 – 32 bytes
• conn-type1 – 64 bytes
• conn-type2 – 128 bytes
• conn-type3 – 256 bytes
• conn-type4 – 512 bytes
• ctrl-cpu – Control CPU utilization
• data-cpu – Data CPUs utilization
• disk – Hard disk utilization
• memory – Memory utilization
The smp-type resources configure the Threshold for SMP
resources for the global session memory pool, shared across all
of the ACOS device’s CPUs:
• smp-type0 – 32 bytes
• smp-type1 – 64 bytes
• smp-type2 – 128 bytes
• smp-type3 – 256 bytes
• smp-type4 – 512 bytes
• warn-temp – CPU temperature
threshold-value The values you can specify depend on the event type and on
the ACOS device model. For information, see the CLI help.
Default The default threshold values depend on the event type and on the ACOS model. For infor-
mation, see the CLI help.
Usage If utilization of a system resource crosses the configured threshold, a log message is gener-
ated. If applicable, an SNMP trap is also generated.
To display the configured event thresholds, see “show monitor” on page323.
Example The following command sets the event threshold for data CPU utilization to 80%:
ACOS(config)#monitor data-cpu 80
multi-config
Description Enable simultaneous admin sessions.
page 159 | Document No.: 410-P2-CLI-001 - 6/17/2016
A10 Thunder Series and AX Series—Command Line Interface Reference
Syntax [no] multi-config enable
Default Enabled
Mode Config
Usage Use the “no” form of the command to disable multiple admin access.
NOTE: Disabling multiple admin access does not terminate currently active admin ses-
sions. For example, if there are 4 active config sessions, disabling multi-user access
will cause the display of a permission prompt when a 5th user attempts to log onto
the device. However, the previous 4 admin sessions will continue to run unaffected.
multi-ctrl-cpu
Description Enable use of more than one CPU for control processing.
Syntax multi-ctrl-cpu num
Replace num with the number of CPUs to use for control processing. Up to one fourth of the
device’s CPUs can be used for control processing.
To display the number of CPUs your device has, enter the show hardware command.
Default One CPU is used for control processing.
Mode Global configuration level
Usage A reboot is required to place this command into effect.
This command is required if you plan to enable use of multiple CPUs for health-check
processing.
NOTE: There is no “no” form of this command. To disable multiple CPUs for control pro-
cessing and restore it back to default, simply configure multi-ctrl-cpu 1.
Example The following commands display the number of CPUs (cores) the device being managed
contains, and enable use of multiple CPUs for control processing.
ACOS(config)# show hardware
AX Series Advanced Traffic Manager AX2500
Serial No : AX2505abcdefghij
CPU : Intel(R) Xeon(R) CPU
8 cores
5 stepping
Storage : Single 74G drive
Memory : Total System Memory 6122 Mbyte, Free Memory 1275
Mbyte
SMBIOS : Build Version: 080015
Document No.: 410-P2-CLI-001 - 6/17/2016 | page 160
A10 Thunder Series and AX Series—Command Line Interface Reference
Release Date: 02/01/2010
SSL Cards : 5 device(s) present
5 Nitrox PX
GZIP : 0 compression device(s) present
FPGA : 0 instance(s) present
L2/3 ASIC : 0 device(s) present
Ports : 12
The first attempt does not succeed because the number of CPUs requested (3) was more
than the number available for control processing on this device.
ACOS(config)# multi-ctrl-cpu 3
The number of control CPUs should be less than a quarter of the total number of CPUs
The next attempt succeeds. The number of CPUs requested (2) is one-fourth of the total
number of CPUs on the device, which is the maximum that can be allocated to control
processing.
ACOS(config)# multi-ctrl-cpu 2
This will modify your boot profile for multiple control CPUs.
It will take effect after the next reboot.
Please confirm: You want to configure multiple control CPUs (N/Y)?:Y
...
After the system is rebooted, the show running-config indicates that multiple CPUs are
being utilized:
ACOS# show running-config
!Current configuration: 961 bytes
!Configuration last updated at 15:16:44 IST Wed Jun 3 2015
!Configuration last saved at 14:08:29 IST Wed Jun 3 2015
!version 2.7.2-P5, build 129 (May-27-2015,06:52)
!
!multi-ctrl-cpu 2 <<-multiple CPUs are being used
...
The output of the show version command also contains information when multiple CPUs are
being utilized:
ACOS# show version
Thunder Series Unified Application Service Gateway TH6630
Copyright 2007-2015 by A10 Networks, Inc. All A10 Networks products are
protected by one or more of the following US patents:
8977749, 8943577, 8918857, 8914871, 8904512, 8897154, 8868765, 8849938
8826372, 8813180. 8782751, 8782221, 8595819, 8595791, 8595383, 8584199
8464333, 8423676, 8387128, 8332925, 8312507, 8291487, 8266235, 8151322
8079077, 7979585. 7804956, 7716378, 7665138, 7647635, 7627672, 7596695
7577833, 7552126, 7392241, 7236491, 7139267, 6748084, 6658114, 6535516
page 161 | Document No.: 410-P2-CLI-001 - 6/17/2016
A10 Thunder Series and AX Series—Command Line Interface Reference
6363075, 6324286, 5931914, 5875185, RE44701, 8392563, 8103770, 7831712
7606912, 7346695, 7287084, 6970933, 6473802, 6374300
64-bit Advanced Core OS (ACOS) version 2.7.2-P5, build 129 (May-27-2015,06:52)
Booted from Hard Disk primary image
Number of control CPUs is set to 2 <<-multiple CPUs are being used
...
Neither line appears in the output if multi-ctrl-cpu is not enabled.
netflow common max-packet-queue-time
Description Specify the maximum amount of time ACOS can hold onto a NetFlow record packet in the
queue before sending it to the NetFlow collector. ACOS holds a NetFlow packet in the queue
until the packet payload is full of record data or until the queue timer expires.
Syntax [no] netflow common max-packet-queue-time queue-time-multiplier
Replace queue-time-multiplier with the multiplier for the maximum queue time.
Multiply this value by 20 to calculate the maximum number of milliseconds (ms) ACOS will
hold a NetFlow packet in the queue before sending it. The multiplier can be 0-50. For
example, to specify a half-second maximum queue time, set the multiplier to 25. Likewise, to
specify a 1-second queue time, set the multiplier to 50.
Setting the multiplier to 0 means that there will be no delay for NetFlow packets to be sent
to the NetFlow collector, and NetFlow records will not be buffered.
Default 50 (1-second maximum queue time)
Mode Global configuration level
netflow monitor
Description Enable ACOS to act as a NetFlow exporter, for monitoring traffic and exporting the data to
one or more NetFlow collectors for analysis.
Syntax [no] netflow monitor monitor-name
Default Replace monitor-name with the name of the NetFlow monitor.
This command changes the CLI to the configuration level for the specified NetFlow monitor,
where the following commands are available.
Command Description
[no] destination Configure the destination where NetFlow records will be sent.
ipaddr [portnum]
disable Disable this NetFlow monitor.
Document No.: 410-P2-CLI-001 - 6/17/2016 | page 162
A10 Thunder Series and AX Series—Command Line Interface Reference
Command Description
[no] flow-timeout Timeout value interval at which flow records will be periodically exported for long-
lived sessions. Flow records for short-lived sessions (if any) are sent upon termination
of the session.
After the specified amount of time has elapsed, the ACOS device will send any flow
records to the NetFlow collector, even if the flow is still active. The flow timeout can
be set to 0-1440 minutes. The flow timeout default value is 10 minutes.
Setting the timeout value to 0 disables the flow timeout feature. Regardless of how
long-lived a flow might be, the ACOS device waits until the flow has ended and the
session is deleted before it sends any flow records for it.
[no] protocol Configure the version of the NetFlow protocol you want to use:
• v9 – Version 9 (default)
• v10 – Version 10
[no] record Configure the NetFlow record types to be exported. (See the “NetFlow v9 and v10
netflow-template-type (IPFIX)” chapter in the System Configuration and Administration Guide.)
[no] resend-template Configure when to resend the NetFlow template. The trigger can be either the num-
{records num | ber of records, or the amount of time that has passed.
timeout seconds}
• records – Specifies the counters by which the ACOS device resends templates to
the collectors. The num can be 0-1000000. The default is 1000.
• timeout – Specifies the time between when templates are resent to the collec-
tors. The num is the number of seconds and can be 0-86400. The default is 1800.
NOTE: Specifying 0 means never resend the template.
[no] sample {ethernet | Enable sampling.
global | nat-pool | ve}
Configure filters for monitoring traffic. Identify the specific type and subset of
resources to monitor.
• ethernet portnum – Specify the list of Ethernet data ports to monitor. Flow
information for the monitored interfaces is sent to the NetFlow collector(s).
• global – (Default) No filters are in effect. Traffic on all interfaces is monitored.
• nat-pool pool-name – NAT pool.
• ve ve-num – Specify the list of Virtual Ethernet (VE) data ports to monitor.
[no] source-address Uses the specified IP address as the source address for exported NetFlow packets. By
{ip ipv4addr | default, the IP address assigned to the egress interface is used. This command does
ipv6 ipv6addr} not change the egress port out which the NetFlow traffic is exported.
[no] source-ip-use-mgmt Use the management interface’s IP address as the source IP for exported NetFlow
packets. This command does not change the egress port out which the NetFlow traf-
fic is exported.
Default Described above, where applicable.