### 1. 引言

本文档分析了Google在全球范围内扩展其服务基础设施的情况。通过定期捕获快照并使用EDNS-client-subnet技术，我们跟踪了Google服务器IP地址的变化，并探讨了这些变化对客户端地理位置精度的影响。

### 2. 数据收集与处理

对于每次捕获的快照，我们使用EDNS-client-subnet来枚举所有返回的www.google.com的IP地址。图5(a)显示了随时间推移观察到的Google IP地址数量的增长情况。从2012年11月到2013年3月，观察到的Google IP地址数量缓慢增长，但在3月中旬出现了一个显著的增长峰值，新增了大约3000个新的服务IP地址。在研究结束时，服务IP地址的数量翻了三倍。图5(b)展示了观察到的/24子网数量的增长趋势。图5(c)显示了起源这些前缀的自治系统（AS）数量增加了82%，这表明这种大规模增长不仅仅是Google在其现有服务位置增加新容量的结果。图6展示了这些自治系统中不同服务站点数量的增长。

### 3. 地理分布

图7展示了我们在测量开始和最近一次快照中观察到的Google服务基础设施的地理分布。我们观察到了两种类型的扩展：首先，在已经托管服务器的国家（如澳大利亚和巴西）的偏远地区出现了新的服务位置；其次，Google在之前未托管其首页的国家（如越南和泰国）建立了新的服务基础设施。在研究过程中出现的新前端IP地址中，92%位于除Google以外的自治系统中。其中，只有13%位于美国或欧洲，而亚洲占45%，北美（美国以外）占23%，南美洲占20%，非洲占8%。图8显示了托管服务基础设施的国家数量从研究开始时的53或56个增加到最近测量中的62个。我们将继续进行这些测量，以持续追踪这一增长。

### 4. 扩展特征

为了更好地理解Google的扩展性质，我们考察了扩展发生的不同类型网络及其服务的客户数量。表3分类了我们在研究开始和结束时观察到的服务基础设施所在的各种自治系统类别。它还展示了每类自治系统中服务的/24客户端前缀数量（总共1000万个）。我们使用UCLA互联网拓扑数据集[33]中的自治系统分类，但只将没有客户的自治系统分类为存根，并引入了一个“小型ISP”类别用于拥有1-4个客户的自治系统。

### 5. 对地理位置精度的影响

Google将更多客户端导向更接近它们的前端的一个副作用是，我们的地理位置技术应该随着时间变得更加准确，因为我们假设前端靠近它们的客户端。为了验证这一假设，我们将基本的地理位置方法应用于三个时间点的数据集。结果显示，从2012年10月到2013年4月，中位误差从817公里减少到475公里。然而，我们的过滤器仍然提供了显著的好处，使中位误差降至22公里。

### 6. 相关工作

最接近我们工作的先前研究包括CDN基础设施映射[12, 2, 32, 1]。Huang等人[12]通过使用数十万个开放的反向DNS解析器来枚举Akamai和Limelight的前端，并使用地理位置数据库以及traceroute的倒数第二跳的位置来进行前端的地理位置和聚类。Ager等人[2]绘制了整个Web托管结构。他们从几十个观测点探测多个域名集合以收集服务IP地址，完全依赖MaxMind[21]进行地理位置，并使用基于特征的聚类来区分属于不同托管基础设施的前端。Torres等人[32]使用少量在美国和欧洲的观测点和约束型地理位置来近似定位YouTube CDN中的服务站点，旨在了解视频服务器选择策略。Adhikari等人[1]使用开放解析器枚举YouTube服务器并使用地理位置数据库对其进行地理位置，旨在逆向工程YouTube基础设施的缓存层次和逻辑组织。

相比之下，我们的枚举有效利用了更多的观测点，我们的地理位置技术利用客户端位置提高准确性而不是依赖地理位置数据库，我们的聚类技术依赖于高维空间中的度量嵌入来区分附近的站点。

### 7. 使用我们的映射

除了迄今为止对Google服务基础设施的评估外，我们的映射对研究社区、关于客户端的信息以及对未来其他服务基础设施的预测都非常有用。我们的结果表明了一次性测量研究的局限性——一个在10月份的快照可能会错过Google基础设施的快速增长并可能误代表他们的策略。我们认为研究社区需要长期测量，我们打算定期更新我们的地图。我们将使我们的持续数据可供研究社区使用，并计划扩展覆盖范围，从Google扩展到其他提供商的服务基础设施。

### 8. 结论

本文通过对Google服务基础设施的详细分析，揭示了其全球扩展的模式和影响。我们发现，Google不仅在现有的服务位置增加了容量，还在新的国家和地区部署了新的基础设施。这种扩展不仅提高了服务的覆盖范围和性能，还对客户端地理位置精度产生了积极影响。未来的研究将继续关注这一趋势，并进一步探索其他服务提供商的基础设施扩展。