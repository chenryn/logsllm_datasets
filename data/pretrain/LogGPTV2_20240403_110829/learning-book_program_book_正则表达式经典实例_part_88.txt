## Page 469
情形下，你可以通过匹配每个完整的记录，然后把它替换成要查找的列索引处的域的
取值（使用向后引用）来得到类似的结果。下面列出的正则表达式会为特定的列索引
讲解抽取的方法。
在所有这些正则表达式中，如果任何记录中所包括的域的个数小于要查找的列索引，
那么这个记录就不会产生匹配，从而也不会发生改变。
匹配一个CSV记录，并把第1列中的值捕获到第1个向后引用中
（（（1[]：）|+[u\x\]：）:）（（1[]：）1+[u\x\]）
正则选项：^和S匹配换行处
正则流派：.NET、Java、JavaScript、PCRE、Perl、Python、Ruby
匹配一个CSV记录，并把第2列中的值捕获到第1个向后引I用中
（▪（1[]：）1+[u\x\]）（n（n1[]：）1+[u\x\]:）
(?:，(?: [^",\r\n]+|"(?:["] I "") *") ?) *
正则选项：和$匹配换行处
正则流派：.NET、Java、JavaScript、PCRE、Perl、Python、Ruby
匹配一个CSV记录，并把第3列中的值捕获到第1个向后引用中
{}（（（1[]：）1+[u\x\]：）:）（*（1[]：）1+[u\\]：）
（[^",\r\n]+|"(?:["]|"") *") ？(?:，(?:[",\r\n]+I"(?:["]|"") *") ?) *
正则选项：和S匹配换行处
正则流派：.NET、Java、JavaScript、PCRE、Perl、Python、Ruby
接着再增加在量词（{1》）之内的数字就可以让最后一个正则式查找第3列之后的内容。
例如，把它修改为（{2}>就可以捕获第4列中的域，改成（{3}）可以捕获第5列，以
此类推。如果要处理的是第3列，那么你也可以把{1}>去掉，因为它在这里不会产生
任何作用。
替代字符串
对于所有这些正则式来说，都可以使用同一个替代字符串（也就是第1个向后引用）。
把每个匹配都替换为第1个向后引用就可以只留下你在查找的域。
$1
替代文本流派：.NET、Java、JavaScript、Perl、PHP
\1
替代文本流派：Python、Ruby
8.12匹配INI段头
问题描述
你想要匹配一个INI文件中的所有段头。
标记语言和数据交换
453
www.TopSage.com
---
## Page 470
解决方案
这个问题很容易解决。INI段头会出现在一行的开始处，它的形式是在两个方括号之间
放一个名称（例如，[Section1]）。这样的规则很容易就可以转换成一个正则表达式：
\[[\]\r\n]+]
正则选项：和S匹配换行处
正则流派：.NET、Java、JavaScript、PCRE、Perl、Python、Ruby
讨论
这个正则表达式并不复杂，所以可以很容易地对它进行分解。
·
前导的）会匹配一行的开始位置，因为我们打开了“和$匹配换行处”的选
项。
>会匹配一个字面的【字符。我们使用了一个反斜杠对它进行转义，以避免【会
作为一个字符类的开始。
来匹配一个INI段头，并且会继续每次
匹配一行，只要这些行都不以【开头。以下面这个目标文本为例：
[Sectionl]
Iteml=Value1
Item2=[Value2]
;[SectionA]
:The SectionA header has been commented out
ItemA=ValueA;ItemA is not commented out,and is part of Sectionl
[Section2]
Item3=Value3
Item4 = Value4
使用上面给出的这个字符串，前面的正则式能找到两个匹配。第一个匹配从字符事的
开头一直到“[Section2]”之前，并且包含它之前的空行。第二个匹配则从Section2头
开始直到字符事的结束。
标记语言和数据交换
455
www.TopSage.com
---
## Page 472
参见
实例8.12讲解如何匹配INI段头。
实例8.14讲解如何匹配INI名称-值对。
8.14匹配INI名称-值对
问题描述
你想要匹配INI参数名称-值对（例如，Iteml=Value1），使用捕获分组把每个匹配分隔
到两个部分中。第1个向后引用中应当包含参数名称（Item1），而第2个向后引用中应
当包含值（Valuel）。
解决方案
下面是完成这个任务的正则表达式（第2个正则式采用了宽松排列模式）：
（[^=;\r\n]+)=（[\r\n]*)
正则选项：和$匹配换行处
正则流派：.NET、Java、JavaScript、PCRE、Perl、Python、Ruby
#一行开始
（[^=;\r\n]+）
#把名称捕获到向后引用#1中
=
#匹配名称和值之间的分隔符
（[^;\r\n]*）
#把直捕获到向后引用#2中
正则选项：和$匹配换行处、宽松排列
正则流派：.NET、Java、PCRE、Perl、Python、Ruby
讨论
与本章中其他INI相关的实例一样，这里我们要处理的也是比较直接的内容。这个正则
开）。这是很重要的，因为如果不能确保匹配是从一行开头开始，那么你就可能会匹配
被注释掉的一行中的一部分。
接下来，这个正则式中使用了一个捕获分组，其中包含一个否定字符类（[=；rn]），
之后跟着一次或多次量词（）来匹配参数的名称，并把它记在第1个向后引用中。
这个否定字符类会匹配除了下面4个字符之外的任意字符：等号、分号、回车（r）
和换行（n）。回车和换行字符都可以被用来作为一个INI参数的结束，而分号可以表
示一个注释的开始，等号则用来分隔参数的名称和值。
在匹配了参数名称之后，这个正则式会匹配一个字面的等号（名称-值分隔符），然后匹
配参数的值。这个值会用第2个捕获分组来匹配，它同用来匹配参数名称的模式很类
似，但是要少两个限制。首先，这第2个子模式允许匹配等号作为值的一部分（也就
456
第8章
www.TopSage.com
---
## Page 473
是说，在字符类中可以少一个否定字符）。其次，它使用了一个*）量词来去掉了必须
至少匹配一个字符的需求（也就是说和名称不一样，值可以为空）。
参见
实例8.12讲解如何匹配INI段头。
实例8.13详细讲解如何匹配INI段块。
标记语言和数据交换
457
www.TopSage.com
---
## Page 474
作者简介
本书的作者是JanGoyvaerts和StevenLevithan，他们都是正则表达式的世界级专家。
JanGoyvaerts领导着JustGreatSoftware公司，他在这个公司设计和开发了一些最流行
的正则表达式软件。他的产品中包括RegexBuddy，世界上唯一可以模拟15种正则表
达式流派特性的正则表达式编辑器，以及PowerGREP，MicrosoftWindows平台上功能
最强大的grep工具。
StevenLevithan是顶尖的JavaScript正则表达式专家，他拥有-个很流行的以正则表达
式为主题的博客http:/blog.stevenlevithan.com。过去几年中，他一直致力于深人研究正
则表达式流派和函数库支持。
封面介绍
本书封面图片是一只麝（英文名muskshrew，俗称铁鼠，请科，麟属）。麝
可以分为多种，包括白齿和红齿的睛、灰麝和红麝。睛原产于非洲南部
和印度。
虽然不同种类的体态特征不同，但是所有睛都拥有很多共同点。例如，被
认为是世界上最小的食虫动物，所有睛都是短腿，每只脚有5个脚趾，长鼻子，触
觉毛。区别包括它们牙齿的颜色不同（主要是白齿睛和红齿请），以及毛发颜色不
同（包括红色、褐色和灰色）。
虽然睛通常以昆虫为食，但它还会吃老鼠或田野里的其他小型啮齿动物，从而帮助
农民控制田里的危害。
许多麝会释放出一种强烈的香气味（它们也因此而得名），并用这种气味来标
记它们的领土。曾经有传闻说麝的气味是如此强烈，甚至会渗透到麝所经过的
任何葡萄酒或啤酒瓶中，从而把酒也污染上麝香的气味，但后来这个传闻被证明是
假的。
封面的图片来自于Lydekker的RoyalNaturalHistory。
www.TopSage.com
---
## Page 475
计算机精品学习资料大放送
软考官方指定教材及同步辅导书下载！软考历年真是解析与答案
软考视频|考试机构|考试时间安排
Java一览无余：Java视频教程|JavaSE丨JavaEE
Net技术精品资料下载汇总：ASP.NET篇
Net技术精品资料下载汇总：C#语言篇
Net技术精品资料下载汇总：VB.NET篇
撼世出击：C/C++编程语言学习资料尽收眼底电子书+视频教程
VisualC++(VC/MFC)学习电子书及开发工具下载
Perl/cGI脚本语言编程学习资源下载地址大全
Python语言编程学习资料（电子书+视频教程)下载汇总
最新最全Ruby、RubyonRails精品电子书等学习资料下载
数据库精品学习资源汇总：MySQL篇丨SQLServer篇丨Oracle篇
最强HTML/XHTML、CSS精品学习资料下载汇总
最新JavaScript、Ajax典藏级学习资料下载分类汇总
网络最强PHP开发工具+电子书+视频教程等资料下载汇总
UML学习电子资下载汇总软件设计与开发人员必备
经典LinuxCBT视频教程系列Linux快速学习视频教程一帖通
天罗地网：精品Linux学习资料大收集(电子书+视频教程)Linux参考资源大系
Linux系统管理员必备参考资料下载汇总
Linuxshell、内核及系统编程精品资料下载汇总
UNIX操作系统精品学习资料分类总汇
FreeBSD/OpenBSD/NetBSD精品学习资源索引含书籍+视频
Solaris/OpenSolaris电子书、视频等精华资料下载索引
www.TopSage.com
---
## Page 476
Software Development/Programming
O'REILLY?
正则表达式经典实例
每个程序员都会遇到需要使用正则表达式的情况，
这是一本严谨的著作，内容非
但是要用好正则表达式却并不容易。本书提供了100
常丰富。仅仅阅读前几章我就
多个实例，以帮助读者使用正则表达式处理数据和
学到了大量的新技巧。”
文本。即使有经验的用户也经常会遇到性能不佳、误报、漏报
——NikolajLindberg
等让人挠头的错误，本书对于如何使用正则表达式来解决一些
计算语言学家
常见的问题给出了按部就班的解决方案，其中包括C#、Java、
STTS语音技术服务公司
JavaScript、Perl、PHP、Python、Ruby和VB.NET的实例。
“本书为紧迫的问题提供了很好
本书主要包括以下内容：
的解决方案。对于实例中所包
含的细节我感到非常震惊。”
·通过一个精练的教程理解正则表达式的基本原理和技巧；
——Zak Greant
·在不同的编程语言和脚本语言中有效使用正则表达式；
开放技术倡导者
·学习如何对输入进行合法性检查和格式化；
和策略专家
·处理单词、文本行、特殊字符和数值；
·学习如何在URL、路径、标记语言和数据交换中使用正则
表达式；
JanGoyvaerts领导着JustGreat
Software公司，他在这个公司
·学习更高深的正则表达式特性中的微妙之处：
设计和开发了一些非常流行的
·理解在不同语言中正则表达式的API、语法和行为之间的
正则表达式软件。
区别；
StevenLevithan是业界顶尖的
创建更好的正则表达式来满足个性化的需求。
JavaScript正则表达式专家，维
护着一个以正则表达式为主题
的人气博客。
www.oreilly.com
O'ReillyMedia,Inc.授权人民邮电出版社出版
此简体中文版仅限于中国大陆（不包含中国香港、澳门特别行政区和中国台湾地区）销售发行
(excluding Hong Kong, Macao and Taiwan)
ISBN978-7-115-22832-1
分类建议：计算机/程序设计
人民邮电出版社网址：www.ptpress.com.cn
定价：69.00元
www.TopSage.com
---