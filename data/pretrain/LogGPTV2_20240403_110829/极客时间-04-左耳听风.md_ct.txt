# 小结好了，我们来总结一下今天分享的主要内容。首先，我描绘了边缘计算的初始模样。接着，我讲了从计算的发展趋势上来看，数据量的不断增大迫使边缘计算成为一个必然。大数据中心的成本问题，也需要通过边缘计算来降低。然后，我列举了边缘计算的业务场景。最后，我介绍了实现边缘计算所需的关键技术。希望对你有帮助。也欢迎你分享一下你对边缘计算的看法如何？有没有什么好的想法？文末给出了《分布式系统设计模式》系列文章的目录，希望你能在这个列表里找到自己感兴趣的内容。-   弹力设计篇    -   [认识故障和弹力设计](https://time.geekbang.org/column/article/3912)    -   [隔离设计        Bulkheads](https://time.geekbang.org/column/article/3917)    -   [异步通讯设计        Asynchronous](https://time.geekbang.org/column/article/3926)    -   [幂等性设计        Idempotency](https://time.geekbang.org/column/article/4050)    -   [服务的状态        State](https://time.geekbang.org/column/article/4086)    -   [补偿事务 Compensating        Transaction](https://time.geekbang.org/column/article/4087)    -   [重试设计 Retry](https://time.geekbang.org/column/article/4121)    -   [熔断设计 Circuit        Breaker](https://time.geekbang.org/column/article/4241)    -   [限流设计        Throttle](https://time.geekbang.org/column/article/4245)    -   [降级设计        degradation](https://time.geekbang.org/column/article/4252)    -   [弹力设计总结](https://time.geekbang.org/column/article/4253)-   管理设计篇    -   [分布式锁 Distributed        Lock](https://time.geekbang.org/column/article/5175)    -   [配置中心 Configuration        Management](https://time.geekbang.org/column/article/5819)    -   [边车模式        Sidecar](https://time.geekbang.org/column/article/5909)    -   [服务网格 Service        Mesh](https://time.geekbang.org/column/article/5920)    -   [网关模式        Gateway](https://time.geekbang.org/column/article/6086)    -   [部署升级策略](https://time.geekbang.org/column/article/6283)-   性能设计篇    -   [缓存 Cache](https://time.geekbang.org/column/article/6282)    -   [异步处理        Asynchronous](https://time.geekbang.org/column/article/7036)    -   [数据库扩展](https://time.geekbang.org/column/article/7045)    -   [秒杀 Flash        Sales](https://time.geekbang.org/column/article/7047)    -   [边缘计算 Edge        Computing](https://time.geekbang.org/column/article/7086)![](Images/1c1e992cf41f5294df097aabed82f9e4.png){savepage-src="https://static001.geekbang.org/resource/image/fc/e9/fcc761001867c60f526665e237f831e9.jpg"}
# 63 \| 区块链技术的本质去年专栏一开始更新的时候，就有读者留言让我发表一下对区块链技术的看法。当时我觉得区块链相关的技术相对比较简单，没什么好说的。并且，"左耳听风"专栏的主要目标是帮助大家学习更为主流的关键技术，所以那会我就把区块链相关的技术文章降级处理了。那为什么现在我又要写这个主题呢？2010 年，我在浏览国外技术网站时，看到好多人在讨论一个叫 bitcoin的东西，还看到有人说用几万个这个东西换了个披萨。随后，我看了一下它的[白皮书](https://bitcoin.org/bitcoin.pdf)，这篇不到10 页的文档读起来还是很容易的，所以建议你读一读。然后，我在一台电脑上尝试安装了一下，就像用 BT或电驴下载一样，连入了这个没有服务器的 P2P网络，下载了账本，还尝试了一下"挖矿"。花了不少的时间，我收到了来自系统奖励的 50个比特币。当时，我默默地看着这个又耗硬盘空间，又非常吃 CPU的家伙，心里想，这什么破软件，太难用了，就删除了。（是的，这 50个比特币也就不知道去哪了。）记得比特币开始有价值的时候，像维基解密这样的机构为了避开被政府控制的银行，会接受比特币的捐款。2012年的时候，比特币已经看涨了，到了 2013年，比特币的市值已经比较高了，突破了 1000 美金。那个时候，中国有好多人在挖矿。记得最厉害的是李笑来，他持有的比特币数量很可观，如果没有卖的话，现在就更为"恐怖"了。在 2016 年的时候，我听说了个叫以太坊的东西。嗯，是区块链 +代码的组合，又被叫作智能合约，这的确给予了区块链有更多的想像空间。还听说了这个项目是被ICO 出来的，然后我就了解了下ICO。同年，我有一个高中同学，搞了个创业项目，据说是中国第一个 ICO项目。当时筹到了 1000 万人民币，然后发币上了二级市场。再然后，2017年的一天有人带我去见薛蛮子。听他说他在很短的一段时间内出手投了好多个和区块链相关的创业项目。见薛蛮子一周后，中国政府出台政策定性ICO 非法，开始治理市场，清除所有一切和 ICO 相关的东西。似乎市场应该就此冷静下来了。``{=html}2018 年 1 月 9 日，真格基金创始人徐小平在一个微信群里对他投资公司的 CEO们说，区块链是一场伟大的技术革命。他要求大家"对区块链不要有怀疑，不要有迟疑，立即动员全体员工，学习如何拥抱这场革命"。随着徐小平这个微信截图的流出又把区块链推到了风口浪尖。我几个关系不错的做技术的朋友也跟着入坑了......各种人，认识我的，不认识我的，全都来找我，问我区块链的事，我不想关注都不成了......所以，我想我还是在这里写上几篇文章吧。一方面，我会很客观地把区块链的技术解释出来（不是那种天马行空完全不知所云的比喻，是实实在在的技术，我保证非技术人员都一定能看得懂），包括区块链、非对称加密、挖矿、共识机制等。另一方面，我会结合现有的一些金融上的交易撮合的中心化标准玩法来让你来比较一下中心化和去中心化的不同。最后，我会谈一些我的观点，可能会上升到哲学层面。当然，最后还是由你自己来做判断。下面是这几篇文章要回答的关键问题。1.  **为什么区块链技术会成为热点技术？它解决了什么问题？**2.  **区块链（blockchain）究竟是个什么技术？这里，我会带你抽丝剥茧看看区块链技术，看看区块链是如何做到不可篡改的。同时，我还会解释什么是"挖矿"，以及为什么要    \" 挖矿 \"，全是技术干货。**3.  **去中心意味着没有一个公司，没有公司就意味着没有服务器，没有服务器的软件是怎样提供服务的？这里主要会讲一下无中心化的系统是怎么运作的，是怎么达成一致的？**4.  **智能合约是个什么鬼？它有什么意思？**5.  **简单地谈一谈金融，你可以自行思考一下，区块链虚拟货币是否有可能取代现有的金融服务？并重组整个社会架构？**6.  **最后，我会提出几个逻辑问题来让你独立思考一下"去中心化"的优劣，以及相关的逻辑和哲学问题。**闲言少叙，我们开始。
# 区块链技术的革命性你一定看过太多的文章用各式各样的比喻来讲区块链技术是什么，以及为什么它是未来。在这里，我尝试用我的话来说明一下区块链技术的革命性。说区块链必然要谈比特币，比特币是一种数字货币。但最令人叫绝的是，比特币号称有下面几个特性。1.  **去中心化**。这意味着没有中心的服务器，不受某个人的控制，整个系统直接由用户端的电脑构成。这样的技术难度是非常大的，并不像手机    App 或是小网站一样，你想发布就发布，这需要有人来跟你一起玩。2.  **数据防篡改**。所有交易记录全量保存，并公开给所有的人，而且还被加密和校验。并不是数据不能被篡改，而是数据被篡改的成本非常大。（有人借此说区块链的不可篡改可以解决人类的信任问题，这个并不一定。）3.  **固定的发行量**。不会像国家中央银行那样乱印钞票，造成通货膨胀。这几个东西加在一起，就可以让那些想作弊的人，尤其是那些有权有势有钱的大公司大组织很难作恶。因为"去中心化"这个事，从本质上来说，造就了整个系统不再需要这些个大的公司和组织，人民可以达到真正意义上的自治，这些大公司都会倒闭。简单说来，相信区块链的人都相信，可以通过区块链这个技术来改变整个社会的组织形成------不再需要银行、中介机构、电商平台、支付宝等中间机构，人们可以通过一个不受任何人控制和操作的P2P 金融系统，进行完全自由和可信的交易。当然，反区块链的人的观点也很明确。他们认为，所谓的去中心化看似很美好，但实则不可能。而且从目前的区块链的应用来看，也没有颠覆什么，连迹象都没有。反而，大家都在疯狂地炒作概念，没有实质的价值。像ICO 和交易所这样的东西里面充满了大量的投机主义，泡沫非常大。于是，这种巨大无比的争议性，把人们分割成了两种阵营，把区块链推向了火热。对此，我这几篇文章会把区块链这个技术一点一点讲解清楚，让你自己判断。其实，对于投资机构来说，在逻辑上，我觉得他们应该感到恐慌才对，因为他们也是被革命的对象啊。如果某个事不再需要公司，人们自治，那么投资人怎么投资啊？投资的实体都没了啊，怎样有回报？如果说，投资机构想扶植一个小公司用区块链技术把大公司干掉，那在逻辑上也说不通啊，因为如果你投资的公司也可能被别人很容易地颠覆掉，那么你怎么可能会投资呢？相关的逻辑问题，我们会放在最后来讨论，还是先看一下区块链的技术。下面会有非常详细的技术细节，如果你不关心技术细节，那么可以只看""技术概要"一节。
# 技术概要首先，我们先看一下中心化和去中心化的业务流是什么样的。下面的图给出了"传统中心化"和"去中心化"的对比。![](Images/eb0d4563491db1b4189f5fcd1f8c4147.png){savepage-src="https://static001.geekbang.org/resource/image/cf/1c/cf7c446b8781434c33a536228c335b1c.png"}```{=html}```中心化结构]{.reference}```{=html}```![](Images/95604c64aae9ca589af95a606dd36516.png){savepage-src="https://static001.geekbang.org/resource/image/93/48/93db9b74de0c73d52e4ed35f559a6348.png"}```{=html}```去中心化的交易]{.reference}```{=html}```去中心化的比特币交易处理流程如下。-   首先，需要交易的用户把交易传到网络中。-   然后，网络上有些机器叫记账结点，它们通过比拼计算力的方式竞争记账权。这也叫"挖矿"。-   获得记账权的结点，会把待记账的交易进行计算打包，并向全网广播。收到新的记账包的结点会对其进行验证，验证通过后加入自己的区块。注意，整个比特币的世界是没有服务器的，其完全是靠大家用自己的电脑拼出来的一个分布式系统。既然这些电脑都是大家自己的，所以这种P2P的去中心化网络有一个前提假设------**"网络中的任何结点都是不能信任的，它们中的任何一个都可能会作恶"**。基于这个前提假设，这个分布式的账本系统就需要有如下的设计：**任何人都可以拿到所有的数据。所以，数据要能很容易被验证是合法的没有被修改过的，而且也要是很难被人修改的。**基于这个设计，比特币使用了两个比较大的技术：**"区块链技术"**和**"工作量证明共识机制"**。
## 区块链第一个技术就是区块链，区块链又叫blockchain，其中有一个一个的区块，每个区块中包括着一组交易信息，然后，每一个区块都会有一个ID（或是一个地址），这些区块通过记录前一个区块的 ID来形成一条链。下面的图有助于你形象地理解这一概念，感兴趣可以看看。![](Images/74ca69a841cd1982bca668ec22e03353.png){savepage-src="https://static001.geekbang.org/resource/image/77/00/7794cf8d3e41046d3d3bf215c5edae00.png"}但需要注意下面这几个方面。-   **每个块的 ID    都是通过其内容生成的**，所以，只要是内容有一丁点儿的变化，这个 ID    都会完全不一样。-   而生成 ID 的内容中还包括上一个块的    ID。于是只要上一个块的内容变了，其 ID    也要跟着变（不然就不合法了），那么后面指向这个块的 ID    也要变。于是，后面指向这个块的 ID    也要重新计算，而变成另一个，这样就会形成一个连锁效应------一个块被修改，后续的所有块都要跟着一起改。于是导致了修改成本的提升。-   这种一处改，处处改的方式，并不代表不能篡改，而只是让修改面比较大，让你的改动麻烦一点。-   越旧的区块的篡改会造成越大面积的修改，于是越旧的区块就不容易篡改，就越安全。反之，越新的区块就越不安全。而真正让区块链做到非常难篡改的是工作量证明的共识机制。