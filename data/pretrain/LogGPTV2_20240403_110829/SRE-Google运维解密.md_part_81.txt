第V部分
397
457
---
## Page 440
459>
编辑：BetsyBeyer
作者：Jennifer Petoff
第33章
398
及这些思想是如何在Google内部应用的，同时也给出了其他行业内部应用这些思想的
这一章中同时介绍了有其他行业经验的资深SRE。我们一起讨论了关键的SRE思想，以
较，我们将这些理念分为4大类：
在本章中，我们会讨论到许多SRE的核心指导思想。为了简化与其他行业最佳实践的比
个问题：
他们之前的工作经历，这些行业也非常注重可靠性。在讨论时，我的目标是回答下列几
可靠性这个问题的。借着编纂本书这个机会，我有幸和许多Google工程师一起讨论了
在深入讨论GoogleSRE的文化和实践时，我们很自然地会联想到其他行业是如何对待
其他行业的实践经验
）结构化的、理智的决策
灾难预案与演习
·Google以及科技行业可以从这些对比中学到什么？
如果其他行业也采用同样的指导思想，那么具体对应的实践是什么样的？
SRE采用的指导思想是否在Google外部也有采用？其他行业是否在用截然不同
的方式解决高可靠性问题？
自动化与降低日常运维负载
书写事后总结的文化
是什么因素导致了这些相似点和不同点的产生？
不同行业之间的具体实践的相似点与不同点是什么？
---
## Page 441
业对安全有着不懈的追求，因为生产过程中涉及的温度极高、压力巨大，生产过程对工
Eddie曾经在某个合成钻石工厂供职6年，是SixSigma黑带、生产流程工程师。这个行
EddieKennedy是Google全球用户体验组的一名项目经理，也是一名机械工程师。
设备损失，以及人员伤亡。
信号系统。这些行业的可靠性极为重要，因为任何一点事故都可能会导致几百万美元的
参与设计实现英国与美国的军用飞机、海上飞机、飞机地勤管理系统，以及英国的列车
AdrianHilton是Google的一名发布协调工程师（LCE）。在之前的职业生涯中，他曾经
会导致治疗不及时等。
回而受到业务损失，甚至会间接导致人身危害的，例如，EKG设备无法与医院通信可能
输救护车上的EKG数据2)。在这些行业里，可靠性方面出现问题是可能导致设备被召
发经验。他曾经负责处理这些行业对接组件的开发（例如，某个设备用数字无线网络传
RonHeiby是Google的一名技术项目经理。Ron有汽车、医疗器械，以及手机行业的开
务出现问题，不仅仅用户体验受到影响，如果E911系统出现故障，则甚至会有人员伤亡
的一员。通信行业也是一个注重高可靠性的行业，用户体验与可靠性直接相关。如果服
统。
GusHartmann与KevinGreer曾经有通信行业的经验，包括维护E911紧急呼叫系
于科技与人在高可靠方面上的经验。
伴随着这项技术的成熟，FDA批准上市，逐渐改进以及普遍运用，他从中学到了很多关
网膜手术（LASIK）的算法与具体实现。这个领域对可靠性非常关注，压力也是很大的。
ErikGross现任Google软件工程师。在加入Google之前，他花了7年时间设计激光视
教练，任职十年。可靠性在这个领域也是很重要的，因为每一刻都是人命关天的。
MikeDoherty是现任GoogleSRE。在加拿大，他曾经是一名救生员，也是一名救生员
运载设施故障或者事故，同时也会造成巨大的经济损失。
GPS与惯性制导系统。在这种系统中，如果出现一丁点儿不可靠的情况，就会造成整个
在之前的职业生涯中，他曾经在美国国防部的一个供应商处任职，负责陆空运载设施的
PeterDahl（我的直接Boss）是GooglePrincipalEngineer（部门总监或者VP级别）
有其他行业背景的资深SRE
例子。最后，以一些模式和反模式作为结尾。
。注Kevin 现在是Google Chrome团队的一名软件工程师，而Gus 是Google IT团队
E911（Enhanced911）：美国内部使用的地理位置信息的紧急报警系统（类似中国的110）。
有其他行业背景的资深SRE
399
461
---
## Page 442
462
400
略有如下几个方面：
在其他行业中，关于如何测试团队的灾难准备情况，以及保障团队应对灾难的能力的策
问题，以便能够：
了解决这个问题（参见文献[Kri12])。在DiRT演习中，SRE在生产环境中创造真正的
致服务停止或者数据丢失之前我们如何避免？我们的年度灾难恢复演习（DiRT）就是为
的态度。SRE的文化是永远保持警惕，不停地提出疑问：什么可能出现故障？在故障导
“愿望不是一个策略”，Google的SRE的这条口号很好地总结了我们对灾难预案与演习
灾难预案与演习
了粗略认识，下面我们就详细论述可靠性的4个大类。
上述是和我们讨论过的所有行业专家，相信读者也对他们之前的行业对可靠性的关注有
用了纵深防御的策略来防止灾难发生。
空公司受损（飞机延迟、改线等），甚至会造成飞机坠毁，人员伤亡。这个行业广泛使
管理软件系统的开发与部署。该系统如果出现故障，可能会导致旅客出行受到影响，航
MatthewToia是存储系统的一名SRE经理。在加入Google之前，他曾经参与空中交通
然环境污染，或者人员伤亡。
潜艇工程师。核动力潜艇的可靠性也非常重要，故障可能会导致设备受损，长期性的自
Jeff Stevenson目前是Google的硬件运维团队经理。过去，他曾经是US海军的一名核
这些防故障系统会在大型事故发生之前终止所有运行，防止事故扩大。
更大。这个行业基本对故障零容忍。设计核设施时包含了一系列防故障系统（failsafe），
的损失：事故可能会导致每天损失数百万美元的收入，同时对员工以及附近居民的威胁
安全顾问。在核工业行业中，可靠性非常重要，因为任何一点问题都可能导致无法挽回
者。财务行业对可靠性要求也很高，因为这可能会导致巨大的财务损失。
JohnLi目前是GoogleSRE。John之前在一个财务交易公司任职系统管理员与软件开发
人有极高的危险性。
·从组织架构层面坚持不懈地对安全进行关注。
：确保系统按我们预想的方式应对故障。
寻找其他提高系统鲁棒性的方式来避免事故发生。
寻找系统中未预料到的弱点。
第33章
其他行业的实践经验
---
## Page 443
注3参见https:/le.wikipedia.org/wiki/Safety_integrity_level。
图拨打这个电话，整个通信系统陷入了一种类似DDoS的状态，造成了大面积的路由错误。
方面有关。例如，某个明星的电话号码在2005年被泄露之后，数以千计的粉丝同时试
某个大型事件发生之前提前部署。同时，系统容量不仅是指系统的绝对容量，也和其他
信平台来提供余容量，以便应对这些情况。这些额外的容量可以应急部署，也可以在
GusHartmann的从业经历中，通信行业利用SOW（switchonwheels）一
件所影响，例如自然灾害等，又或者是大型的可预知的活动，例如奥林匹克运动会。在
系统利用率在通信行业中可能是非常难以预知的。系统容量可能会被无法提前预料的事
余容量
会发展成大事故。
会导致多个相关系统出现故障。核动力海军对日常常规维护非常重视，以确保小问题不
的一个错误都可能产生极为严重的后果。系统相互连接紧密，所以一个区域的事故可能
心情况可能会导致大型潜艇事故的情况非常了解（例如，润滑油的及时补充）。非常小
JeffStevenson回忆起在美国海军的任职经历，所有人对某些小任务执行过程中出现的粗
关注任何细节
标都是为保障交付软件产品的质量。
这些系统的可靠性级别也都是明确定义的（安全整合级别（SIL）1-4）。注3这些规定的目
例如 UK Defense Standard 00-56、IEC 61508、IEC 513、USDO-178B/C、DO-254。同时，
在核动力行业、军用飞机，以及轨道交通信号系统行业中，软件的安全标准是明确定义的
员工对安全的关注是很极为重要的，这样每个员工在他们发现出现问题时可以主动提出，
定的流程，以及保证整个组织从上至下严格遵守该流程来确保不会出现意外事故。每个
面临着格外危险的环境，“每次管理会议都是以安全讨论开头”。制造业通过建立极为确
该理念对工业工程来说格外重要。EddieKennedy 曾经在一个高危制造车间工作，随时
从组织架构层面坚持不懈地对安全进行关注
纵深防御。
超乎寻常地关注对细节要求的收集与系统的设计。
培训与考核。
模拟以及进行线上灾难演习。
余容量。
关注任何细节。
灾难预案与演习
一个移动通
|401
463
---
## Page 444
464
402
的工程师处获取需求是很重要的。在另一个例子里，PeterDahl描述了国防系统中对设
它们的人不会出错。因此，从真正使用这些设备进行手术的医生处，以及维护这些设备
例如，根据ErikGross的经验，激光视网膜手术设备被设计得极为简单明了，确保使用
很不一样。因此，具体的使用情况与维护需求必须从其他来源获取到。
器械来说尤其重要。在很多案例中，某个器械的使用情况或者维护情况与设计者的预想
对详细的需求收集和系统设计的关注
因为在游泳池里救人和在湖边或者海中救人有很大差异。
个救生员跳入水里时，其他团队成员应该做什么）。每个设施都有当地特有的培训课程
出水面），也包括技巧部分（例如急救和CPR），同时还包括日常流程方面（例如，当某
培训课程包括健身部分（救生员必须能够将某个比自已还重的人托住，使得他们肩膀露
Doherty描述了救生员如何通过非常严谨的培训考核过程，同时还要定期接受再考核。
我们的座谈结果显示，培训与考核在涉及人身安全的行业极为重要。例如，Mike
培训与考核
伪落水事故。这些情景会制造得非常逼真，救生员一般无法区分真实和虚构的紧急事故。
一般来说，设施负责人会和一个儿童，或者是某个正在接受训练的救生员一起构造一起
MikeDoherty，曾经的救生员，这个行业采用一种类似“神秘顾客”的方式进行灾难演习
习才能确保不会忘记。
假想练习是有用的，但是却不能真正防止灾难发生。灾难的响应机制必须要经过不断练
括“在可控环境下进行破坏”。实战演习每周进行，每次持续两到三天。对核动力海军来说，
美国核动力海军会同时进行假想练习与真实的实战演习。Jef Stevenson说，实战演习包
风持续时间的发电机。
境灾难。这种理念使得很多通信行业都建设了防水机房，同时内部带有可以运行超过飓
Hartmann同时提到，通信行业一般采用线上演习模式，主要关注于应对飓风或者其他环
控制室与设备在细节上和真实环境高度一致，以确保可以得到真实的测试数据。Gus
上测试。他们则部署了极为逼真的模拟器，这些模拟器使用线上真实数据。在测试中，
演习。例如，MatthewToia指出，航空行业由于设备和人员安全因素无法进行真正的线
用某种灾难情景可能导致的故障的严重程度来决定是使用模拟方式，还是线上方式进行
Google的灾难恢复团队在模拟与线上灾难演习方面与其他行业的关注点非常类似。利
模拟以及进行线上灾难演习
与我们座谈的一些工程师讨论了详细的需求收集与设计文档的重要性。这些实践对医疗
第33章其他行业的实践经验
---
## Page 445
政府监管部门包括FCC（通信行业）、FAA（航空业）、OSHA（制造业与化工业）、FDA
管在灾难预期后果严重的时候是更加紧密的（例如那些会造成人员伤亡的事故）。相关的
很多行业都受到政府部门的严密监管，出现问题时，会有相关的政府部门追责。这样监
后总结的原动力各有不同。
这个词语来指代，因为这个词有验户的意思）。但是，在不同的行业内部，他们进行事
我们的座谈发现了很多行业也进行类似的事后总结活动（但是很多都不会用Postmortem
以便让所有人都能从中受益。
有意义的。事后总结在每次事故发生之后都会进行，同时会在整个SRE团队内部传阅，
找出什么出现了问题，以及如何确保问题不再发生。纠结于“谁”造成了这个故障是没