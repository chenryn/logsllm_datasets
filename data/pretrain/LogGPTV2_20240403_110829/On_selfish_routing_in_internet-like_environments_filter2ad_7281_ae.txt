.
0
=
F
S
L
5
.
0
=
F
S
L
1
=
F
S
L
3
=
F
S
L
5
.
0
=
F
S
L
1
=
F
S
L
3
=
F
S
L
cover=20% cover=40% cover=60% cover=80%cover=100%
all
partial
Figure 11: Effects of partial coverage in ISP T opo with random
node selection on maximum link utilization.
has full control over how its trafﬁc is routed through the physical
network. In the context of OSPF, the only way in which OSPF can
affect overlay trafﬁc is by violating DLS, which effectively reduces
network resources and may therefore degrade both user and system-
wide performance. We also show that like source routing, overlay
source routing reduces latency at the expense of higher network cost.
Finally, we observe that the effects due to partial coverage are small
in backbone topologies.
8.
INTERACTIONS AMONG COMPETING
OVERLAYS
So far we have only considered either a large number of indepen-
dent, small users using source routing (Section 6) or a single selﬁsh
overlay (Section 7). In practice, it is possible that multiple over-
lays and background trafﬁc will share the same physical network,
and these different trafﬁc will compete against one another for the
shared network resources. We call such interactions horizontal in-
teractions.
8.1 What is the relative competitiveness of two
routing schemes?
We start by looking at the interactions between any two types of
trafﬁc. The objective of this subsection is to evaluate the “friend-
liness” of different types of routing schemes. We use R1/R2 to
denote that the routing scheme of the foreground trafﬁc is R1, and
that of the background is R2. Here Ri is either overlay source rout-
ing, overlay optimal routing, or compliant routing. We evaluate the
interactions through four sets of experiments.
Effects of network topologies: First, we study how trafﬁc us-
ing different routing schemes compete against each other in differ-
ent topologies.
In this set of experiments, we put the competing
demands at the same nodes, and we set both the foreground and
background trafﬁc to be 50%. In other words, the two types of com-
peting trafﬁc have the same amount of trafﬁc and the same set of
overlay nodes. Figure 12 shows the results. We make two observa-
tions. First, the performance difference between compliant routing
and the competing overlay routing scheme varies across different
topologies. For example, the performance difference is larger in the
Abovenet and power-law topologies. This is consistent with Fig-
ure 3 and can again be explained by the better connectivity of these
topologies (see Section 6.1 for details). Comparing the results in
Figure 12 with those in Figure 3, we observe that the latency of the
compliant trafﬁc is not substantially increased, which indicates that
selﬁsh routing does not hurt the performance of compliant routing
in this environment. Second, overlay source routing achieves simi-
lar performance compared to overlay optimal routing. This suggests
that the performance gain of cooperative overlay optimal routing
over uncooperative overlay source routing is not signiﬁcant.
load scale factor = 1
)
s
u
(
y
c
n
e
t
a
l
e
g
a
r
e
v
A
25000
20000
15000
10000
5000
0
t
p
o
/
t
p
o
m
o
c
/
c
r
s
m
o
c
/
t
p
o
m
o
c
/
m
o
c
t
p
o
/
c
r
s
c
r
s
/
c
r
s
t
p
o
/
t
p
o
m
o
c
/
c
r
s
m
o
c
/
t
p
o
m
o
c
/
m
o
c
t
p
o
/
c
r
s
c
r
s
/
c
r
s
t
p
o
/
t
p
o
m
o
c
/
c
r
s
m
o
c
/
t
p
o
m
o
c
/
m
o
c
t
p
o
/
c
r
s
c
r
s
/
c
r
s
t
p
o
/
t
p
o
m
o
c
/
c
r
s
m
o
c
/
t
p
o
m
o
c
/
m
o
c
t
p
o
/
c
r
s
c
r
s
/
c
r
s
t
p
o
/
t
p
o
m
o
c
/
c
r
s
m
o
c
/
t
p
o
m
o
c
/
m
o
c
t
p
o
/
c
r
s
c
r
s
/
c
r
s
8.2 Can many overlays coexist well?
Next we study horizontal interactions by varying the number of
overlays. Each overlay uses overlay optimal routing and covers all
network nodes. Figure 14 shows the result for ISP T opo, when the
number of overlays is changed in the following ways: (i) one over-
lay, which includes all the demands; (ii) overlay per source, where
each overlay includes all demands originated from a source; (iii)
overlay per source-destination pair, where each overlay includes all
demands between a source and destination pair; (iv) an inﬁnite num-
ber of overlays, where each overlay has inﬁnitesimal demand. We
use the relaxation framework speciﬁed in the Appendix to compute
the trafﬁc equilibria for (ii) and (iii). For (iv), we note that having
an inﬁnite number of overlays with inﬁnitesimal demands is equiv-
alent to having all the inﬁnitesimal demands on a single overlay,
each of which tries to minimize its own latency. In other words, (iv)
is equivalent to having a single overlay using overlay source rout-
ing. Thus we do not need to use the relaxation framework. From
Figure 14, we observe that there is only a slight difference in user
latency due to variations in the number of overlays. Results from
other topologies conﬁrm this ﬁnding, which suggests that perfor-
mance degradation due to competition among overlays is not signif-
icant.
Abovenet
ATT
Level3
Sprint PowerD10
foreground
background
Figure 12: Coexistence of two routing schemes: varying net-
work topologies.
Effects of network-level routing schemes: Second, we explore
the impact of network-level routing schemes on the horizontal in-
teractions as follows. We set both the foreground and background
trafﬁc in ISP T opo to be 50%, and we vary how OSPF weights
are set. As shown in Figure 13, the foreground and background
trafﬁc experience similar latency in most cases, except when OSPF
weights are set randomly. When OSPF weights are set randomly,
compliant trafﬁc incurs about twice as much delay as that of the
competing overlay source routing or overlay optimal routing. This
indicates that inappropriate OSPF weights can signiﬁcantly degrade
the performance of compliant trafﬁc. In comparison, a selﬁsh over-
lay is able to reduce the latency of its trafﬁc, as it looks for better
alternative paths. Interestingly, this also has a positive side effect:
it helps to reduce the load on the links used by the competing com-
pliant trafﬁc, thereby cutting the latency of the latter by half. When
the network-level routing scheme is conﬁgured reasonably, different
overlay routing schemes can coexist well.
)
s
u
(
y
c
n
e
t
a
l
e
g
a
r
e
v
A
)
%
(
n
o
i
t
a
z
i
l
i
t
u
k
n
i
l
m
u
m
i
x
a
M
10000
9000
8000
7000
6000
5000
4000
3000
2000
1000
0
0.2
one overlay
per src
per src-dest
infinite
0.4
0.6
0.8
1
1.2
1.4
1.6
1.8
2
Load scale factor
(a) Average latency
one overlay
per src
per src-dest
infinite
150
140
130
120
110
100
90
80
0.2
0.4
0.6
0.8
1
1.2
1.4
1.6
1.8
2
(b) Maximum link utilization
Load scale factor
)
s
u
(
y
c
n
e
t
a
l
e
g
a
r
e
v
A
load scale factor = 1
Figure 14: Coexistence of multiple overlays in ISP T opo.
35000
30000
25000
20000
15000
10000
5000
0
m
o
c
/
m
o
c
m
o
c
/
t
p
o
t
p
o
/
t
p
o
m
o
c
/
c
r
s
t
p
o
/
c
r
s
c
r
s
/
c
r
s
m
o
c
/
m
o
c
m
o
c
/
t
p
o
t
p
o
/
t
p
o
m
o
c
/
c
r
s
t
p
o
/
c
r
s
c
r
s
/
c
r
s
m
o
c
/
m
o
c
m
o
c
/
t
p
o