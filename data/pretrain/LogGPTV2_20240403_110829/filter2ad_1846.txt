title:A demonstration of ultra-low-latency data center optical circuit switching
author:Nathan Farrington and
George Porter and
Pang-Chen Sun and
Alex Forencich and
Joseph E. Ford and
Yeshaiahu Fainman and
George Papen and
Amin Vahdat
A Demonstration of Ultra-Low-Latency
Data Center Optical Circuit Switching
Nathan Farrington, George Porter, Pang-Chen Sun, Alex Forencich
Joseph Ford, Yeshaiahu Fainman, George Papen, Amin Vahdat 
UC San Diego
http://mordia.net
ABSTRACT
We designed and constructed a 24×24-port optical circuit switch 
(OCS) prototype with a programming time of 68.5 µs, a switching 
time  of  2.8  µs,  and  a  receiver  electronics  initialization  time  of 
8.7 µs [1]. We demonstrate the operation of this prototype switch in 
a data center testbed under various workloads.
Optical Ring
S1
S2
S3
S4
S5
S6
Categories and Subject Descriptors
C.2.1  [Network  Architecture  and  Design]:  Circuit-
switching Networks
Keywords
data center networks, optical circuit switching
1.  INTRODUCTION
Data center networks are crucial to the scalability and perfor-
mance of data center applications, yet are often under provisioned 
due to their high CAPEX and OPEX [2]. Recent work combines 
both traditional electronic packet switches (EPS) as well as optical 
circuit switches (OCS) [3]–[5] to reduce cost. Unfortunately, the 
relatively slow OCS switching times of 12 ms make them suitable 
for  a  limited  class  of  workloads  such  as  rack-to-rack  backup  or 
virtual  machine  migration.  We  designed  and  constructed  a 
24×24-port optical circuit switch (OCS) prototype, called Mordia, 
for use in data center networks, with the specific goal of supporting 
the much more common class of workloads that exhibit all-to-all 
communication patterns, such as MapReduce and on-line webpage 
rendering using distributed memory caches.
2.   DESIGN & IMPLEMENTATION
The  prototype  is  separated  into  a  data  plane  (Figure  1)  and  a 
control plane (Figure 2). The data plane is constructed as an optical 
ring of six stations. Each station contains all of the optical compo-
nents  to  switch  four  input/output  port  pairs.  We  use  fixed-
wavelength  laser  transmitters  and  tunable  wavelength-selective 
switch (WSS)-based receivers.
The  control  plane  is  responsible  for  programming  the  WSS 
modules and synchronizing with all devices connected to the OCS. 
The  controller  maintains  a  round-robin  schedule  of  input-output 
port mappings. Every 80 µs, the controller programs the six WSS 
modules with the next input-output port mapping in the list. The 
round-robin schedule allows the OCS to support all-to-all commu-
nication patterns at very high speeds and provides throughput and 
latency fairness.
Both  before  and  after  reconfiguring  the  WSS  modules,  the 
controller  broadcasts  a  synchronization  packet  to  connected 
Copyright is held by the author/owner(s).
SIGCOMM’12, August 13–17, 2012, Helsinki, Finland.
ACM 978-1-4503-1419-0/12/06. 
Figure 1. Data plane 
Circuit Switch Controller
Mordia Control Plane
Linux Host
Housekeeper
Process
USB (x6)
USB
SPI (x6)
FPGA
Circuit Scheduler
Process
 Packet Synch
 Process
Wavelength
Selective
Switch (x6)
Ethernet
Switch
1G Ethernet
10G
Ethernet
(x24)
Figure 2. Control plane 
Mirrors
in
motion
Connected
Device (x24)
Ringing
T1
68.5µs
T2
2.8µs
T3
8.7µs
Figure 4. Measurements of switching time 
devices.  This  allows  the  connected  devices  to  learn  the  current 
input-output port mapping and when it is safe to begin transmitting.
Figure  3  shows  that  the  implementation  of  the  prototype 
occupies an entire datacenter rack. Each of the bottom three sliding 
trays  contains  the  components  for  two  stations.  The  FPGA 
placement is challenging because it must connect to all six WSS 
modules with short ribbon cables.
3.   MEASUREMENTS
Figure 4 shows physical measurements of the OCS. We use the 
notation  from  [6].  The  mirrors  are  only  in  motion  for  a  small 
fraction of the total time. The majority of the loss-of-light time is 
due to ringing (T3). Table 1 compares the switching speed of the 
Mordia prototype to Helios [3, 6]. Figure 5 shows measurements of 
the loss-of-light time (T2 +T3) as seen from the connected devices. 
The resulting minimum duty cycle is approximately 85%.
95Table 1. Performance of Helios and Mordia 
(N, µ, σ) = (705, 11.55, 2.36)
y
c
n
e
u
q
e
r
F
 0.016
 0.014
 0.012
 0.01
 0.008
 0.006
 0.004
 0.002
 0
 3.36
 6.72
 10.08
Time (µs)
 13.44
 16.80
Figure 5. Measurements of loss-of-light time (T2+T3) 
Mordia  OCS  prototype  will  may  require  careful  analysis  and 
possible modification of TCP. 
5.   ACKNOWLEDGMENTS
We would like to thank the NSF Center for Integrated Access 
Networks (#0812072) and gifts from Cisco Systems and Google, 
Inc. We would also like to acknowledge technical assistance from 
Mod Marathe at Cisco, Haw-Jyh Liaw of NetLogic, and Patrick 
Geoffray at Myricom, Inc.
REFERENCES
[1]   Farrington, N., Porter, G., Sun, P.-C., Forencich, A., Ford, J., 
Fainman, Y., Papen, G., and Vahdat, A. The Design and 
Implementation of a Fast, Scalable Data Center Optical 
Circuit Switch. Under review.
[2]   Al-Fares, M., Loukissas, A., and Vahdat, A. A Scalable, 
Commodity Data Center Network Architecture. In 
SIGCOMM ’08.
[3]   Farrington, N., Porter, G., Radhakrishnan, S., Bazzaz,  H.H., 
Subramanya, V., Fainman, Y., Papen, G., and Vahdat, A. 
Helios: A Hybrid Electrical/Optical Switch Architecture for 
Modular Data Centers. In SIGCOMM ‘10.
[4]   Wang, G., Andersen, D.G., Kaminsky, M., Papagiannaki, K., 
Ng, T.S.E., Kozuch, M., and Ryan, M. c-Through: Part-time 
Optics in Data Centers. In SIGCOMM ‘10.
[5]   Chen, K., Singla, A., Singh, A., Ramachandran, K., Xu, L., 
Zhang, Y., Wen, X., and Chen, Y. OSA: An Optical Switch-
ing Architecture for Data Center Networks with Unprec-
edented Flexibility. In NSDI ‘12.
[6]    Farrington, N., Fainman, Y., Liu, H., Papen, G., and Vahdat, 
A. Hardware Requirements for Optical Circuit Switched 
Data Center Networks. In Optical Fiber Conference 
(OFC/NFOEC) ‘11.
[7]   Rasmussen, A., Porter, G., Conley, M., Madhyastha, H., 
Mysore, R.N., Pucher, A., Vahdat, A. TritonSort: A Balanced 
Large-Scale Sorting System. In NSDI ’11.
Figure 3. Rack containing Mordia OCS prototype 
These measurements show that Mordia is three orders of magni-
tude faster than Helios and that the performance problems associ-
ated with the original Helios prototype have largely been solved in 
the Mordia prototype.
4.   WORKLOADS
The demonstration consists of various workloads on a 24-node 
compute cluster and a visualization of the communication patterns 
in real time. Each workload can be run on either a traditional EPS 
or the Mordia OCS so as to compare the performance directly.
For example, one workload is a synthetic traffic generator called 
UDP Blaster where each host sends constant bitrate UDP traffic to 
each other host in the cluster. Good performance for this workload 
requires that the connected devices synchronize with the Mordia 
OCS so that they can transmit at the right time.
Another  workload  is TritonSort,  the  world’s  fastest  large  data 
sorting system [7]. TritonSort also has an all-to-all communication 
pattern, but uses TCP instead of UDP, and is rate limited by the disk 
I/O  bandwidth. A  successful  demonstration  of  TritonSort  on  the 
96