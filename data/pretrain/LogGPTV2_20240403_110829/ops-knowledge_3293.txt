User: 请解答这个和日志有关的问题HaProxy - Http and SSL pass through config I've currently got an HaProxy LB solution in place and everything is working fine however we are having an issue with a very few clients who cannot get to our site via HTTPS (SSL) they can browse our site in Http but as soon as they click on an absolute HTTPS link they are taken to our home page instead. Wondering if anyone can look at our config below and see if there's something awry. I believe we are on HaProxy 1.2.17

global
        log 127.0.0.1   local0
        log 127.0.0.1   local1 notice
        #log loghost    local0 info
        maxconn 6144
        #debug
        #quiet
        user haproxy
        group haproxy

defaults
        log     global
        mode    http
        option  httplog
        option  dontlognull
        retries 3
        redispatch
        maxconn 2000
        contimeout      5000
        clitimeout      50000
        srvtimeout      50000
    stats auth      # admin password

    stats uri       /monitor
listen webfarm
#   bind :80,:443
    bind :443
        mode tcp
        balance source
        #cookie SERVERID insert indirect
        #option httpclose
        #option forwardfor
    #option httpchk HEAD /check.cfm HTTP/1.0
    server webA 111.10.10.1
        #server webB 111.10.10.2
    server webB 111.10.10.3
         server webC 111.10.10.4

listen webfarmhttp :80
    mode http
    balance source
#   option httpclose
        option forwardfor
#   option httpchk HEAD /check.cfm HTTP/1.0
    option httpchk /check.cfm
    server webA 111.10.10.1
        #server webB 111.10.10.2
    server webB 111.10.10.3
         server webC 111.10.10.4

listen monitor :8443
        mode http
        balance roundrobin
        #cookie SERVERID insert indirect
        option httpclose
        option forwardfor
        #option httpchk HEAD /check.txt HTTP/1.0
    #option httpchk HEAD /check.cfm HTTP/1.0
    server webA 111.10.10.1
        server webB 111.10.10.2

Assistant: What are you using to cipher/decipher the SSL traffic before haproxy ? Stunnel, nginx, apache, something else ?

I suspect it might be related to the lack of "option httpclose" on your port 80, but it's not clear to me why it would cause an issue to only a few visitors.