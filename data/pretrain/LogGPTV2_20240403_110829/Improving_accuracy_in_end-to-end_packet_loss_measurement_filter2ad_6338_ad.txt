(i.e., a missing probe sequence number) and having a one-way de-
lay greater than (1− α)× OW Dmax. Using the parameters τ and α,
we mark probes as 0 or 1 according to § 5 and form estimates of
loss episode frequency and duration.
This formulation of probe-measured congestion assumes that queu-
ing at intermediate routers is FIFO. Also, we can keep a number of
estimates of OW Dmax, taking the mean when determining whether
a probe is above the (1 − α) × OW D threshold or not. Doing so
effectively ﬁlters loss at end host operating system buffers or in
network interface card buffers, since such losses are unlikely to be
correlated with end-to-end network congestion and delays.
We conducted a series of experiments with constant-bit rate traf-
ﬁc to assess the sensitivity of the loss threshold parameters. Using
a range of values for probe send probability (p), we explored a
cross product of values for α and τ. For α, we selected 0.025, 0.05,
0.10, and 0.20, effectively setting a high-water level of the queue
of 2.5, 5, 10, and 20 milliseconds. For τ, we selected values of 5,
10, 20, 40, and 80 milliseconds. Figure 9(a) shows results for loss
frequency for a range of p, with τ ﬁxed at 80 milliseconds, and α
varying between 0.05, 0.10, and 0.20 (equivalent to 5, 10, and 20
milliseconds). Figure 9(b) ﬁxes α at 0.10 (10 milliseconds) while
letting τ vary over 20, 40, and 80 milliseconds. We see, as expected,
that with larger values of either threshold, estimated frequency in-
creases. There are similar trends for loss duration (not shown). We
also see that there is a trade-off between selecting a higher probe
rate and more “permissive” thresholds. It appears that the break-
even point for τ comes around the expected time between probes
plus one or two standard deviations. The best α appears to depend
both on the probe rate and on the trafﬁc process and level of mul-
llllll2468100.00.20.40.60.81.0bunch length (packets)empirical probability that a probe bunchexperiences no loss during a loss episodelinfinite TCP trafficconstant−bit rate trafficloss episodes at constant duration as described in Section 4. For
the second, we modiﬁed Iperf to create loss episodes of three dif-
ferent durations (50, 100, and 150 milliseconds), with an average
of 10 seconds between loss episodes. In the ﬁnal trafﬁc scenario,
we used Harpoon to generate web-like workloads as described in
§ 4. For all trafﬁc scenarios, BADABING was conﬁgured with probe
sizes of 3 packets and with packet sizes ﬁxed at 600 bytes. The
three packets of each probe were sent back-to-back, according to
the capabilities of our end hosts (approximately 30 microseconds
between packets). For each probe rate, we set τ to the expected
time between probes plus one standard deviation. For α, we used
0.2 for a probe rate of 0.1, 0.1 for probe rates of 0.3 and 0.5, and
0.5 for probe rates of 0.7 and 0.9.
For loss episode duration, results from our experiments described
below conﬁrm the validity of the assumption made in § 5.4 that the
probability yi = 01 is very close to the probability yi = 10. That is,
we appear to be equally likely to measure in practice the beginning
of a loss episode as we are to measure the end. We therefore use
the mean of the estimates derived from these two values of yi.
Table 4 shows results for the constant bit rate trafﬁc with loss
episodes of uniform duration. For values of p other than 0.1, the
loss frequency estimates are close to the true value. For all values
of p, the estimated loss episode duration was within 25% of the
actual value.
Table 5 shows results for the constant bit rate trafﬁc with loss
episodes randomly chosen between 50, 100, and 150 milliseconds.
The overall result is very similar to the constant bit rate setup with
loss episodes of uniform duration. Again, for values of p other than
0.1 (i.e., very low-impact probing), the loss frequency estimates are
close to the true values, and all estimated loss episode durations
were within 25% of the true value.
Table 6 displays results for the setup using Harpoon web-like
trafﬁc to create loss episodes. Since Harpoon is designed to gen-
erate average trafﬁc volumes over relatively long time scales [31],
the actual loss episode characteristics over these experiments vary.
For loss frequency, just as with the constant bit rate trafﬁc scenar-
ios, the estimates are quite close except for the case of p = 0.1. For
loss episode durations, all estimates except for p = 0.3 fall within
a range of 25% of the actual value. The estimate for p = 0.3 falls
just outside this range.
In Tables 4 and 5 we see, over the range of p values, an increas-
ing trend in loss frequency estimated by BADABING. This effect
arises primarily from the problem of selecting appropriate param-
eters α and τ, and is similar in nature to the trends seen in Fig-
ures 9(a) and 9(b). It is also important to note that these trends are
peculiar to the well-behaved CBR trafﬁc sources: such an increas-
ing trend in loss frequency estimation does not exist for the signif-
icantly more bursty Harpoon web-like trafﬁc, as seen in Table 6.
We also note that no such trend exists for loss episode duration
estimates. Empirically, there are somewhat complex relationships
among the choice of p, the selection of α and τ, and estimation ac-
curacy. While we have considered a range of trafﬁc conditions in a
limited, but realistic setting, we have yet to explore these relation-
ships in more complex multi-hop scenarios, and over a wider range
of cross trafﬁc conditions. We intend to establish more rigorous
criteria for BADABING parameter selection in our ongoing work.
Finally, Table 7 shows results from an experiment designed to
understand the trade-off between an increased value of p, and an
increased value of N. We chose p = 0.1, and show results using two
different values of τ, 40 and 80 milliseconds. The background traf-
ﬁc used in these experiments was the simple constant bit rate trafﬁc
with uniform loss episode durations. We see that there is only a
slight improvement in both frequency and duration estimates, with
Figure 8: Queue length during a portion of a loss episode for
different size loss probes. The top plot shows inﬁnite source
TCP trafﬁc with no loss probes. The middle plot shows inﬁ-
nite source TCP trafﬁc with loss probes of three packets, and
the bottom plots shows loss probes of 10 packets. Each plot is
annotated with TCP packet loss events and probe packet loss
events.
tiplexing, which determines how quickly a queue can ﬁll or drain.
Considering such issues, we discuss parameterizing BADABING in
general Internet settings in § 7.
6.2 Measuring Frequency and Duration
The formulation of our new loss probe process in Section 5 calls
for the user to specify two parameters, N and p, where p is the
probability of sending a probe at a given interval. In the next set
of experiments, we explore the effectiveness of BADABING to re-
port loss episode frequency and duration for a ﬁxed N, and p using
values of 0.1, 0.3, 0.5, 0.7, and 0.9 (implying that probe trafﬁc con-
sumed between 0.2% and 1.7% of the bottleneck link). With the
time discretization set at 5 milliseconds, we ﬁxed N for these exper-
iments at 180,000, yielding an experiment duration of 900 seconds.
We also examine the loss frequency and duration estimates for a
ﬁxed p of 0.1 and N of 720,000 from an hour-long experiment.
In these experiments, we used three different background trafﬁc
scenarios. In the ﬁrst scenario, we used Iperf to generate random
11.6611.6811.7011.7211.740.09800.09900.10000.1010no probe traffictime (seconds)queue length (seconds)xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxcross traffic packetcross traffic loss15.2015.2215.2415.2615.2815.300.09800.09900.10000.1010probe train of 3 packetstime (seconds)queue length (seconds)oooooooooooooooooooooooooooooooxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx+++++xo+cross traffic packetcross traffic lossprobeprobe loss14.8014.8214.8414.8614.8814.900.09800.09900.10000.1010probe train of 10 packetstime (seconds)queue length (seconds)xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooo+++++++++++++++++xo+cross traffic packetcross traffic lossprobeprobe loss(a) Estimated loss frequency over a range of values for α while holding τ ﬁxed
at 80 milliseconds.
(b) Estimated loss frequency over a range of values for τ while holding α ﬁxed
at 0.1 (equivalent to 10 milliseconds).
Figure 9: Comparison of the sensitivity of loss frequency estimation to a range of values of α and τ.
most improvement coming from a larger value of τ. Empirically
understanding the convergence of estimates of loss characteristics
as N grows larger is a subject for future experiments.
Table 4: BADABING loss estimates for constant bit rate trafﬁc
with loss episodes of uniform duration.
p
loss frequency
loss duration
(seconds)
BADABING
true
0.0069
0.0069
0.0069
0.0069
0.0069
BADABING
0.0016
0.0065
0.0060
0.0070
0.0078
0.1
0.3
0.5
0.7
0.9
true
0.068
0.068
0.068
0.068
0.068
0.054
0.073
0.051
0.051
0.053
Table 5: BADABING loss estimates for constant bit rate trafﬁc
with loss episodes of 50, 100, or 150 milliseconds.
p
loss frequency
loss duration
(seconds)
BADABING
true
0.0083
0.0083
0.0083
0.0083
0.0083
BADABING
0.0023
0.0076
0.0098
0.0102
0.0105
0.1
0.3
0.5
0.7
0.9
true
0.097
0.097
0.097
0.097
0.097
0.034
0.076
0.090
0.074
0.059
6.3 Comparing Loss Measurement Tools
Our ﬁnal set of experiments compares BADABING with ZING
using the constant-bit rate and Harpoon web-like trafﬁc scenarios.
We set the probe rate of ZING to match the link utilization of BAD-
ABING when p = 0.3 and the packet size is 600 bytes, which is
about 876 kb/s, or about 0.5% of the capacity of the OC3 bottle-
neck. Each experiment was run for 15 minutes. Table 8 summa-
rizes results of these experiments, which are similar to the results
of § 4. (Included in this table are BADABING results from row 2 of
Tables 4 and 6.) For the CBR trafﬁc, the loss frequency measured
by ZING is somewhat close to the true value, but loss episode dura-
tions are not. For the web-like trafﬁc, neither the loss frequency nor
Table 6: BADABING loss estimates for Harpoon web-like trafﬁc
(Harpoon conﬁgured as described in § 4).
p
loss frequency
loss duration
(seconds)
BADABING
true
0.0044
0.0011
0.0114
0.0043
0.0031
BADABING
0.0017
0.0011
0.0117
0.0039
0.0038
0.1
0.3
0.5
0.7
0.9
true
0.060
0.113
0.079
0.071
0.073
0.071
0.143
0.074
0.076
0.062
Table 7: Comparison of loss estimates for p = 0.1 and two dif-
ferent values of N and two different values for the τ threshold
parameter.
N
τ
loss frequency
loss duration
(seconds)
BADABING
180,000
180,000
720,000
720,000
40
80
40
80
true
0.0059
0.0059
0.0059
0.0059
BADABING
0.0006
0.0015
0.0009
0.0018
true
0.068
0.068
0.068
0.068
0.021
0.053
0.020
0.041
the loss episode durations measured by ZING are good matches to