    ```
:::
当您为用户或组群删除覆盖时，此对象的所有覆盖都会被删除。
:::
::: section
::: titlepage
# []{#assembly_sssd-client-side-view_configuring-authentication-and-authorization-in-rhel.html#proc_exporting-and-importing-local-view_assembly_sssd-client-side-view}导出和导入本地视图 {.title}
:::
您的本地覆盖保存在本地 SSSD
缓存中。您可以将用户和组覆盖从此缓存导出到文件，以创建备份。这样可确保即使缓存被清除，您也可以稍后恢复配置。
::: itemizedlist
**先决条件**
-   `root`{.literal} 访问权限
-   已安装 `sssd-tools`{.literal}
:::
::: itemizedlist
**流程**
-   要备份用户和组视图，请使用：
    ``` literallayout
    # sss_override user-export /var/lib/sss/backup/sssd_user_overrides.bak
    # sss_override group-export /var/lib/sss/backup/sssd_group_overrides.bak
    ```
-   要恢复用户和组视图，请使用：
    ``` literallayout
    # sss_override user-import /var/lib/sss/backup/sssd_user_overrides.bak
    # sss_override group-import /var/lib/sss/backup/sssd_group_overrides.bak
    ```
:::
:::
:::
[]{#configuring-a-RHEL-host-to-use-AD-as-an-authentication-provider_configuring-authentication-and-authorization-in-rhel.html}
::: chapter
::: titlepage
# []{#configuring-a-RHEL-host-to-use-AD-as-an-authentication-provider_configuring-authentication-and-authorization-in-rhel.html#configuring-a-RHEL-host-to-use-AD-as-an-authentication-provider_configuring-authentication-and-authorization-in-rhel}第 6 章 配置 RHEL 主机以使用 AD 作为身份验证提供程序 {.title}
:::
作为系统管理员，您可以在不将主机加入 AD 的情况下，使用 Active
Directory(AD)作为 Red Hat Enterprise Linux(RHEL)主机的身份验证供应商。
如果可以实现，例如：
::: itemizedlist
-   您不想向 AD 管理员授予对启用和禁用主机的控制权。
-   主机（可以是一个公司 PC）只表示被您公司中的某一用户使用。
:::
::: {.important style="margin-left: 0.5in; margin-right: 0.5in;"}
### 重要 {.title}
仅在很少情况下使用此方法。
考虑将系统完全加入 AD 或 Red Hat Identity Management(IdM)。将 RHEL
主机加入到域中可方便管理设置。如果您关注与将客户端直接加入 AD
中的客户端访问许可证，请考虑利用与 AD 信任协议中的 IdM 服务器。如需有关
IdM-AD 信任的更多信息，请参阅 [规划 IdM 和 AD 间的跨林信任，并在 IdM 和
AD](https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/planning_identity_management/index?lb_target=production#planning-a-cross-forest-trust-between-idm-and-ad_planning-dns-and-host-names){.link}
[间安装信任。](https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/installing_identity_management/index?lb_target=production#installing-trust-between-idm-and-ad_installing-identity-management){.link}
:::
此流程可让名为 [**AD_user**]{.strong} 的用户使用
[**example.com**]{.strong} 域中 Active Directory(AD)用户设置的密码登录到
[**rhel8_host**]{.strong} 系统。在这个示例中，[**EXAMPLE.COM**]{.strong}
Kerberos realm 对应于 [**example.com**]{.strong} 域。
::: itemizedlist
**先决条件**
-   有到 [**rhel8_host**]{.strong} 的 root 访问权限。
-   [**AD_user**]{.strong} 用户帐户存在于 [**example.com**]{.strong}
    域中。
-   Kerberos realm 是 [**EXAMPLE.COM**]{.strong}。
-   [**rhel8_host**]{.strong} 尚未使用 `realm join`{.literal} 命令加入
    AD。
:::
::: orderedlist
**流程**
1.  在本地创建 [**AD_user**]{.strong} 用户帐户而不为其分配密码：
    ``` literallayout
    # useradd AD_user
    ```
2.  打开 `/etc/nsswitch.conf`{.literal}
    文件进行编辑，并确保该文件包含以下行：
    ``` literallayout
    passwd:     sss files systemd
    group:      sss files systemd
    shadow:     files sss
    ```
3.  打开 `/etc/krb5.conf`{.literal}
    文件进行编辑，并确保该文件包含以下部分和项目：
    ``` literallayout
    # To opt out of the system crypto-policies configuration of krb5, remove the
    # symlink at /etc/krb5.conf.d/crypto-policies which will not be recreated.
    includedir /etc/krb5.conf.d/
    [logging]
        default = FILE:/var/log/krb5libs.log
        kdc = FILE:/var/log/krb5kdc.log
        admin_server = FILE:/var/log/kadmind.log
    [libdefaults]
        dns_lookup_realm = false
        ticket_lifetime = 24h
        renew_lifetime = 7d
        forwardable = true
        rdns = false
        pkinit_anchors = /etc/pki/tls/certs/ca-bundle.crt
        spake_preauth_groups = edwards25519
        default_realm = EXAMPLE.COM
        default_ccache_name = KEYRING:persistent:%{uid}
    [realms]
     EXAMPLE.COM = {
         kdc = ad.example.com
         admin_server = ad.example.com
     }
    [domain_realm]
     .example.com = EXAMPLE.COM
     example.com = EXAMPLE.COM
    ```
4.  创建 `/etc/sssd/sssd.conf`{.literal}
    文件，并将以下部分和行插入到该文件中：
    ``` literallayout
    [sssd]
        services = nss, pam
        domains = EXAMPLE.COM
    [domain/EXAMPLE.COM]
        id_provider = files
        auth_provider = krb5
        krb5_realm = EXAMPLE.COM
        krb5_server = ad.example.com
    ```
5.  更改 `/etc/sssd/sssd.conf`{.literal} 文件的权限：
    ``` literallayout
    # chmod 600 /etc/sssd/sssd.conf
    ```
6.  启动安全性系统服务守护进程（SSSD）：
    ``` literallayout
    # systemctl start sssd
    ```
7.  启用 SSSD：
    ``` literallayout
    # systemctl enable sssd
    ```
8.  打开 `/etc/pam.d/system-auth`{.literal}
    文件，修改该文件使其包含以下部分和行：
    ``` literallayout
    # Generated by authselect on Wed May  8 08:55:04 2019
    # Do not modify this file manually.
    auth        required                                     pam_env.so
    auth        required                                     pam_faildelay.so delay=2000000
    auth        [default=1 ignore=ignore success=ok]         pam_succeed_if.so uid >= 1000 quiet
    auth        [default=1 ignore=ignore success=ok]         pam_localuser.so
    auth        sufficient                                   pam_unix.so nullok try_first_pass
    auth        requisite                                    pam_succeed_if.so uid >= 1000 quiet_success
    auth        sufficient                                   pam_sss.so forward_pass
    auth        required                                     pam_deny.so
    account     required                                     pam_unix.so
    account     sufficient                                   pam_localuser.so
    account     sufficient                                   pam_succeed_if.so uid 
# []{#reporting-on-user-access-on-hosts-using-sssd_configuring-authentication-and-authorization-in-rhel.html#reporting-on-user-access-on-hosts-using-sssd_configuring-authentication-and-authorization-in-rhel}第 7 章 使用 SSSD 报告主机的用户访问权限 {.title}
:::
安全系统服务守护进程(SSSD)跟踪用户可以或无法访问哪些客户端。本章论述了使用
`sssctl`{.literal} 工具创建访问控制报告并显示用户数据。
::: itemizedlist
**先决条件**
-   SSSD 软件包安装在网络环境中
:::
::: section
::: titlepage
# []{#reporting-on-user-access-on-hosts-using-sssd_configuring-authentication-and-authorization-in-rhel.html#the-sssctl-command_reporting-user-access-on-hosts-using-sssd}sssctl 命令 {.title}
:::
`sssctl`{.literal}
是一个命令行工具，提供获取安全系统服务守护进程(SSSD)状态信息的统一方法。
您可以使用 `sssctl`{.literal} 工具收集有关的信息：
::: itemizedlist
-   域状态
-   客户端用户验证
-   特定域的客户端访问
-   有关缓存内容的信息
:::
使用 `sssctl`{.literal} 工具，您可以：
::: itemizedlist
-   管理 SSSD 缓存
-   管理日志
-   检查配置文件
:::
::: {.note style="margin-left: 0.5in; margin-right: 0.5in;"}
### 注意 {.title}
`sssctl`{.literal} 工具取代了 `sss_cache`{.literal} 和
`sss_debuglevel`{.literal} 工具。
:::
::: itemizedlist
**其它资源**
-   `sssctl --help`{.literal}
:::
:::
::: section
::: titlepage
# []{#reporting-on-user-access-on-hosts-using-sssd_configuring-authentication-and-authorization-in-rhel.html#generating-access-control-reports-using-sssctl_reporting-user-access-on-hosts-using-sssd}使用 sssctl 生成访问控制报告 {.title}
:::
您可以列出应用到您要运行报告的机器的访问控制规则，因为 SSSD
控制哪些用户可以登录到客户端。
::: {.note style="margin-left: 0.5in; margin-right: 0.5in;"}
### 注意 {.title}
访问报告不准确，因为这个工具不会跟踪由密钥发布中心（KDC）锁定的用户。
:::
::: itemizedlist
**先决条件**
-   您必须使用管理员权限登录
-   `sssctl`{.literal} 在 RHEL 7 和 RHEL 8 系统中可用
:::
::: itemizedlist