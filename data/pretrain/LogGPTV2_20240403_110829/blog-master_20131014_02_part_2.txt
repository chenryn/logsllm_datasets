probe syscall.read.return {  
  cnt = $count  
  ns = gettimeofday_ns() - @entry(gettimeofday_ns())  
  var1[pid(),execname()] <<< cnt  
  var2[pid(),execname()] <<< ns  
  var3[pid(),execname()] <<< cnt  
  var4[pid(),execname()] <<< ns  
}  
probe timer.s($1) {  
  printf("\npid, execname, hist_log\n----------\n")  
  foreach ([x,y] in var1 @count - limit 3) {  
    printf("size_hist_log: %d, %s\n", x, y)  
    print(@hist_log(var1[x,y]))  
    printf("time_hist_log: %d, %s\n", x, y)  
    print(@hist_log(var2[x,y]))  
  }  
  delete var1  
  delete var2  
}  
probe end {  
  printf("\nEND: pid, execname, hist_log\n----------\n")  
  foreach ([x,y] in var3 @count - limit 3) {  
    printf("size_hist_log: %d, %s\n", x, y)  
    print(@hist_log(var3[x,y]))  
    printf("time_hist_log: %d, %s\n", x, y)  
    print(@hist_log(var4[x,y]))  
  }  
  delete var1  
  delete var2  
  delete var3  
  delete var4  
  exit();  
}  
' 5  
输出 :   
pid, execname, hist_log  
----------  
size_hist_log: 22116, postgres  
value |-------------------------------------------------- count  
    4 |                                                      0  
    8 |                                                      0  
   16 |@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@   1951  
   32 |                                                      0  
   64 |                                                      0  
time_hist_log: 22116, postgres  
value |-------------------------------------------------- count  
  256 |                                                      0  
  512 |                                                      0  
 1024 |@@@@@@@@@@@@@@@@                                    465  
 2048 |@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@   1365  
 4096 |@@@@                                                115  
 8192 |                                                      6  
16384 |                                                      0  
32768 |                                                      0  
size_hist_log: 7096, postgres  
value |-------------------------------------------------- count  
 2048 |                                                    0  
 4096 |                                                    0  
 8192 |@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@                    63  
16384 |                                                    0  
32768 |                                                    0  
time_hist_log: 7096, postgres  
value |-------------------------------------------------- count  
  512 |                                                    0  
 1024 |                                                    0  
 2048 |                                                    1  
 4096 |@@@@@@@@@@@@@@@@@@@@@@@@@@@@                       56  
 8192 |@@@                                                 6  
16384 |                                                    0  
32768 |                                                    0  
size_hist_log: 22118, postgres  
value |-------------------------------------------------- count  
    4 |                                                    0  
    8 |                                                    0  
   16 |@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@    47  
   32 |                                                    0  
   64 |                                                    0  
time_hist_log: 22118, postgres  
value |-------------------------------------------------- count  
  256 |                                                    0  
  512 |                                                    0  
 1024 |@@@@@                                               5  
 2048 |@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@          41  
 4096 |@                                                   1  
 8192 |                                                    0  
16384 |                                                    0  
pid, execname, hist_log  
----------  
size_hist_log: 22116, postgres  
value |-------------------------------------------------- count  
    4 |                                                      0  
    8 |                                                      0  
   16 |@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@   1855  
   32 |                                                      0  
   64 |                                                      0  
time_hist_log: 22116, postgres  
value |-------------------------------------------------- count  
  256 |                                                      0  
  512 |                                                      0  
 1024 |@@@@@@@@@@@@                                        361  
 2048 |@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@   1457  
 4096 |@                                                    34  
 8192 |                                                      3  
16384 |                                                      0  
32768 |                                                      0  
size_hist_log: 1523, irqbalance  
value |-------------------------------------------------- count  
  256 |                                                    0  
  512 |                                                    0  
 1024 |@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@                    62  
 2048 |                                                    0  
 4096 |                                                    0  
time_hist_log: 1523, irqbalance  
  value |-------------------------------------------------- count  
    256 |                                                    0  
    512 |                                                    0  
   1024 |@@@                                                 3  
   2048 |                                                    0  
   4096 |@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@  49  
   8192 |@@                                                  2  
  16384 |@@@@@                                               5  
  32768 |@                                                   1  
  65536 |                                                    0  
 131072 |@                                                   1  
 262144 |@                                                   1  
 524288 |                                                    0  
1048576 |                                                    0  
size_hist_log: 22118, postgres  
value |-------------------------------------------------- count  
    4 |                                                    0  
    8 |                                                    0  
   16 |@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@      45  
   32 |                                                    0  
   64 |                                                    0  
time_hist_log: 22118, postgres  
value |-------------------------------------------------- count  
  256 |                                                    0  
  512 |                                                    0  
 1024 |@@                                                  2  
 2048 |@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@          41  
 4096 |@@                                                  2  
 8192 |                                                    0  
16384 |                                                    0  
pid, execname, hist_log  
----------  
size_hist_log: 22116, postgres  
value |-------------------------------------------------- count  
    4 |                                                      0  
    8 |                                                      0  
   16 |@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@  1789  
   32 |                                                      0  
   64 |                                                      0  
time_hist_log: 22116, postgres  
 value |-------------------------------------------------- count  
   256 |                                                      0  
   512 |                                                      0  
  1024 |@@@@@@@@@@@@@@@                                     407  
  2048 |@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@  1345  
  4096 |@                                                    36  
  8192 |                                                      0  
 16384 |                                                      0  
 32768 |                                                      1  
 65536 |                                                      0  
131072 |                                                      0  
size_hist_log: 22118, postgres  
value |-------------------------------------------------- count  
    4 |                                                    0  
    8 |                                                    0  
   16 |@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@      45  
   32 |                                                    0  
   64 |                                                    0  
time_hist_log: 22118, postgres  
 value |-------------------------------------------------- count  
   256 |                                                    0  
   512 |                                                    0  
  1024 |@@@                                                 3  
  2048 |@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@                35  
  4096 |@@@@                                                4  
  8192 |@@                                                  2  