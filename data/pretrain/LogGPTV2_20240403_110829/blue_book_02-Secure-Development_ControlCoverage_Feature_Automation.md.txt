## IMPORTANT: DevOps Kit (AzSK) will be sunset by the end of FY21. For more details, please refer to the [AzSK Sunset Notice](../../../ReleaseNotes/AzSKSunsetNotice.md).

### Automation Description & Rationale

| Control | Severity | Automated Fix Script | Description and Rationale |
|---------|----------|----------------------|---------------------------|
| **Minimum Required Permissions** | Medium | Yes | All users and identities must be granted the minimum required permissions using Role-Based Access Control (RBAC). This ensures that users have just enough permissions to perform their tasks, thereby minimizing the exposure of resources in case of a user or service account compromise. |
| **Avoid Webhooks for Sensitive Runbooks** | Medium | Yes | Webhooks should not be used for runbooks that perform highly sensitive functions. If the webhook URL is inadequately protected or compromised, unauthorized users could trigger the runbook. |
| **Shorter Validity Period for Webhook URLs** | Medium | Yes | The validity period of webhook URLs should be minimized. In the event of a compromise, a shorter validity period reduces the window of time available to an attacker. |
| **Encrypt Sensitive Data in Automation Account Variables** | High | Yes | Encryption of Automation account variable assets must be enabled when storing sensitive data. Encrypted variables are securely stored by the Azure platform and cannot be retrieved using the `Get-AzAutomationVariable` cmdlet from the Azure PowerShell module. |
| **Avoid Hard-Coding Secure Information** | High | No | Never hard-code secure information in your runbooks. Instead, use Automation account assets such as credentials and encrypted variables. These assets are encrypted and stored securely in the Azure Automation using a unique key generated for each automation account. |
| **Periodic Rotation of Automation Account Keys** | Medium | No | Automation account keys should be rotated periodically according to company standards. This is a good security practice that minimizes the risk of data loss or compromise due to key theft, brute-forcing, or recovery attacks over time. |
| **Regular Deletion and Recreation of Run As Account Credentials** | Medium | No | Credentials for Run As Accounts should be deleted and recreated at regular intervals to ensure that Service Principal connection credentials are not compromised. This is a good security practice that minimizes the risk of data loss or compromise over time. |
| **Limit Assets for Hybrid Runbook Workers** | Medium | No | Automation accounts with the Hybrid Runbook Worker feature enabled should only include assets required for the hybrid runbook functioning. Hybrid worker machines running the Microsoft Monitoring Agent (MMA) have unrestricted access to all assets in the Automation account. Limiting these assets to only those required for the hybrid worker eliminates the risk of compromising a broader set of assets. |
| **Use Dedicated Service Principal for Runbook Authentication** | Medium | No | Runbook authentication should be done using a dedicated service principal instead of an AD User account. A user account typically has broader privileges, while a dedicated service principal can be restricted to only the necessary permissions for the automation job. |
| **Configure Log Analytics for Operational Visibility** | Medium | Yes | Configure Log Analytics to gain greater operational visibility of your Automation jobs. This allows you to monitor jobs, receive alerts for failures, and ensure high availability of important and critical services. |

This table provides a clear and structured overview of the controls, their severity, whether they can be automatically fixed, and a detailed description and rationale for each control.