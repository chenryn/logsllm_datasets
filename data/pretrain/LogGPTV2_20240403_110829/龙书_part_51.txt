费
第
也
江
5
5
E→
四四风
一个增广表达式文法的 LR(O)项集
EEE
↑↑↑
↑
↑
↑↑
iS·要求在输人为e 的时候用 S→iS 进行
将e移人，又因为FOLLOW(S）=e，$}，项
移人/归约冲突。在该项集中，S→S·eS要求
α 表示“所有其他的产生式”。那么我可以用增广产生式S"-→S重写这个文法：
装
归约。
题。为了简化这个讨论，我们考虑这个文法的一个抽象表示，其中i表示if expr then，e表示else,
代
显示在图 4-51 中。产生式1～3 分别是 S→iSeS、S-→iS 和 S→a。
我们可以确定在解决14 中的移入/归约冲突时应该在输人为e 时执行移入动作。使用这个方
表 else 的é只能作为以 iS开头的产生式体的一部分，而现在栈顶内容就是iS。如果输人
我们做--个比较,如果我们不能使用二义性文法来描述条件语句，那么我们将不得不使用例
图 4-51
比如,在处理输入iaea 时，根据正确的“悬空-else”冲突的解决方法，语法分析器执行了图
把这些讨论翻译回 if-then-else 的术语，假
文法(4.67)的 LR(0)项集显示在图 4-50 中。因为文法(4.67)的二义性，在14 中有一个
180
如我们在 4.3.2 节中指出的，这个文法是二义性的，因为它没有解决悬空-else 的二义性问
状态
6
C
23
D
悬空 else 文法的 LR 分析表
3
if expr then stmt
ACTION
rl
s3
B2
acc
GOTO
 S--i SeSiiSlα
S'-→S
S
on000000
图 4-52
2２２２２２２2
栈
山
222
5
Io:
34
图4-50增广文法(4.67)的LR(0)状态
S
SS
S
S
处理输入 iaea 时的语法分析动作
→iSes
→iSes
→S.
→·S
S
iSeS
Sn
符号
iaeas
iiaeas
aea$
ea.$
的
接受
概概
根据
动作
据据
S→iS归约
S
S→α归约
↑
S→ ises.
S
S→a
S
↑
↑
↑
第4章
(4.67)
---
## Page 197
换为对错误处理与过程的调用。
生之前被发现。图
归约动作之后，但是错误仍然会在任何移人动作发
动作。这种修改可能会使得报错延后至一次或多
态，我们将这个状态中的报错条目替换为这个归约
作。对于那些在某些输入上执行特定归约动作的状
法分析表。修改后的表添加了错误检测和恢复的动
4-53中显示的是对这个分析表进行修改后得到的语
例4.68
言
个和某非终结符号对应的状态，因为这样的修改相当于从栈中消除了一个已经被成功分析的语
人符号被删除或移入，并且如果到达输人结束位置时要保证栈会缩小。应该避免从栈中弹出-
谨慎地做出选择，避免LR 语法分析器陷人无限循环。一个安全的策略是保证最终至少有一个转
动作包括在栈和/或输人中删除或插入符号，也包含替换输入符号或将输人符号换位。我们必
目中填写一个指向错误处理例程的指针。该例程将执行编译器设计者所选定的恢复动作。这
输