1.3.6.1.4.1.2011.5.25.155.6. hwOspfv2SelfRouterId hwOspfv2ProcessIdIndex;
1.3
hwOspfv2AreaIdIndex;
hwOspfv2SelfIfnetIndex;
hwOspfv2NbrIpAddrIndex;
1.3.6.1.4.1.2011.5.25.155.6. hwOspfv2SelfIfIpAddress hwOspfv2ProcessIdIndex;
1.4
hwOspfv2AreaIdIndex;
hwOspfv2SelfIfnetIndex;
hwOspfv2NbrIpAddrIndex;
1.3.6.1.4.1.2011.5.25.155.6. hwOspfv2SelfIfName hwOspfv2ProcessIdIndex;
1.5
hwOspfv2AreaIdIndex;
hwOspfv2SelfIfnetIndex;
hwOspfv2NbrIpAddrIndex;
文档版本 06 (2017-09-12) 华为专有和保密信息 677
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 43 OSPF
VB OID VB Name VB Index
1.3.6.1.2.1.14.4.1.3 ospfLsdbLsid ospfLsdbAreaId;
ospfLsdbType;
ospfLsdbLsid;
ospfLsdbRouterId;
1.3.6.1.2.1.14.4.1.4 ospfLsdbRouterId ospfLsdbAreaId;
ospfLsdbType;
ospfLsdbLsid;
ospfLsdbRouterId;
对系统的影响
同一个区域内的非直连的两台配置了相同的IP地址，其中一台作为DR发布network
LSA，导致路由不断振荡。
可能原因
同一个区域内的非直连的两台配置了相同的IP地址，其中一台作为DR发布network
LSA。
处理步骤
步骤1 查看告警中的IntierfaceIpAddress地址，检查区域中是否存在与该IP地址相同的接口。
l 存在，则请执行步骤2。
l 不存在，则请执行步骤3。
步骤2 修改本地接口的IP地址，告警是否消除。
l 如果是，则请执行步骤4。
l 如果不是，则请执行步骤3。
步骤3 请联系技术支持人员。
步骤4 结束。
----结束
43.20 OSPF_1.3.6.1.4.1.2011.5.25.155.31.5
hwOspfv2IntraAreaRouterIdConflictRecovered
Trap Buffer 信息解释
Router IDs confliction is recovered. (ProcessId=[ProcessId], AreaId=[AreaId],
OldRouterId=[OldRouterId], NewRouterId=[NewRouterId])
OSPF在区域内检测到路由器标识冲突后恢复。
文档版本 06 (2017-09-12) 华为专有和保密信息 678
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 43 OSPF
Trap 属性
Trap属性 描述
Alarm or Event Event
Trap Severity Warning
Mnemonic Code hwOspfv2IntraAreaRouterIdConflictRecovered
Trap OID 1.3.6.1.4.1.2011.5.25.155.31.5
Alarm ID 该Trap是事件Trap，不涉及告警ID。
Alarm Type 该Trap是事件Trap，不涉及告警类型。
Raise or Clear 该Trap是事件Trap，不涉及告警产生或恢复。
Match trap 该Trap是事件Trap，不涉及配对Trap。
Trap Buffer 信息参数
参数名称 参数含义
ProcessId 进程号。
AreaId 区域号。
OldRouterId 旧的路由器标识。
NewRouterId 新的路由器标识。
VB 信息参数
VB OID VB Name VB Index
1.3.6.1.4.1.2011.5.25.155.30 hwOspfv2AreaId N/A
.3
1.3.6.1.2.1.14.1.1 ospfRouterId N/A
1.3.6.1.4.1.2011.5.25.155.30 hwOspfv2NewRouterId N/A
.4
对系统的影响
此告警表示Router ID冲突已解决，对系统没有影响。
可能原因
在一个区域内有至少两台非直连路由器的Router ID配置相同，导致Router LSA不断刷
新，路由振荡。设备会自动修改Router ID，解决冲突。
文档版本 06 (2017-09-12) 华为专有和保密信息 679
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 43 OSPF
处理步骤
l 正常运行信息，无需处理。
----结束
43.21 OSPF_1.3.6.1.4.1.2011.5.25.155.31.6
hwOspfv2PeerFlappingSuppressStatusChange
Trap Buffer 信息解释
The status of peer flapping suppress is changed. (ProcessId=[ProcessId], AreaId=[AreaId],
ifAreaId=[ifAreaId], ifIndex=[ifIndex], ifName=[ifName], SuppressStatus=[SuppressStatus],
SuppressReason=[SuppressReason])
OSPF邻居震荡抑制状态发生变化。
Trap 属性
Trap属性 描述
Alarm or Event Event
Trap Severity Informational
Mnemonic Code hwOspfv2PeerFlappingSuppressStatusChange
Trap OID 1.3.6.1.4.1.2011.5.25.155.31.6
Alarm ID 该Trap是事件Trap，不涉及告警ID。
Alarm Type 该Trap是事件Trap，不涉及告警类型。
Raise or Clear 该Trap是事件Trap，不涉及告警产生或恢复。
Match trap 该Trap是事件Trap，不涉及配对Trap。
Trap Buffer 信息参数
参数名称 参数含义
ProcessId 进程号。
AreaId 区域标识。
ifAreaId 接口所在区域。
ifIndex 接口索引。
ifName 接口名称。
文档版本 06 (2017-09-12) 华为专有和保密信息 680
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 43 OSPF
参数名称 参数含义
SuppressStatus 邻居震荡抑制的模式。
l 1：没有进入OSPF邻居震荡抑制阶
段。
l 2：OSPF邻居震荡抑制模式为Hold-
down模式。
l 3：OSPF邻居震荡抑制模式为Hold-
max-cost模式。
SuppressReason 邻居震荡抑制状态变化的原因。
l 1：达到震荡检测恢复门限后退出抑制
状态。
l 2：配置变化（例如，复位OSPF进
程）。
l 3：用户强制退出抑制状态（执行了命
令reset ospf suppress-flapping
peer）。
l 4：邻居频繁震荡。
l 5：退出Hold-down模式并进入Hold-
max-cost模式。
VB 信息参数
VB OID VB Name VB Index
1.3.6.1.4.1.2011.5.25.155.3. hwOspfv2ProcessIdIndex hwOspfv2ProcessIdIndex
1.1
1.3.6.1.4.1.2011.5.25.155.30 hwOspfv2AreaId N/A
.3
1.3.6.1.4.1.2011.5.25.155.6. hwOspfv2SelfIfName hwOspfv2ProcessIdIndex;
1.5
hwOspfv2AreaIdIndex;
hwOspfv2SelfIfnetIndex;
hwOspfv2NbrIpAddrIndex;
1.3.6.1.4.1.2011.5.25.155.30 hwOspfv2PeerFlappingSupp N/A
.5 ressStatus
1.3.6.1.4.1.2011.5.25.155.30 hwOspfv2PeerFlappingSupp N/A
.6 ressInterval
对系统的影响
如果接口不再处于频繁震荡状态，已经恢复正常，但还处于邻居震荡抑制阶段，此时
可能会影响正常的业务。
文档版本 06 (2017-09-12) 华为专有和保密信息 681
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 43 OSPF
可能原因
OSPF接口进入邻居震荡抑制阶段，或者退出邻居震荡抑制阶段。
处理步骤
步骤1 查看接口是否处于频繁震荡。
l 是，则属于正常运行信息，无需处理。
l 否，则请执行步骤2。
步骤2 执行reset ospf process-id suppress-flapping peer [ interface-type interface-number ]
[ notify-peer ]命令强制退出邻居震荡抑制阶段。
步骤3 结束。
----结束
文档版本 06 (2017-09-12) 华为专有和保密信息 682
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 44 OSPFV3
44
OSPFV3
关于本章
44.1 OSPFV3_1.3.6.1.2.1.191.0.2 ospfv3NbrStateChange
44.2 OSPFV3_1.3.6.1.2.1.191.0.4 ifconfigerror
44.3 OSPFV3_1.3.6.1.2.1.191.0.6 ifrxbadpacket
44.4 OSPFV3_1.3.6.1.2.1.191.0.10 ifstatechange
44.5 OSPFV3_1.3.6.1.2.1.191.0.13 nbrrestarthelperstatuschange
44.6 OSPFV3_1.3.6.1.4.1.2011.5.25.147.0.16 hwOspfv3PeerFlappingSuppressStatusChange
相关主题
OSPFV3-MIB
文档版本 06 (2017-09-12) 华为专有和保密信息 683
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 44 OSPFV3
44.1 OSPFV3_1.3.6.1.2.1.191.0.2 ospfv3NbrStateChange
Trap Buffer 信息解释
The status of the non-virtual neighbor has changed. (RouterId=[RouterId],
NbrIfIndex=[NbrIfIndex], NbrIfInstId=[NbrIfInstId], NbrRtrId=[NbrRtrId],
NbrState=[NbrState], IfName=[IfName], Reason=[NbrStateChangeReason],
SubReason=[SubReason])
OSPFv3邻居状态发生变化，可能是由于该邻居所在的接口状态发生变化，或者收到的
hello报文中内容发生改变。
Trap 属性
Trap属性 描述
Alarm or Event Alarm
Trap Severity Critical
Mnemonic Code nbrstatechange
Trap OID 1.3.6.1.2.1.191.0.2
Alarm ID 0x08930003
Alarm Type communicationsAlarm
Raise or Clear None
Match trap 故障告警Trap和业务恢复Trap使用同一个Trap，通过
NbrState参数区分。只有当邻居状态为8: Full时，此Trap为
业务恢复Trap，当邻居为其他状态时，此Trap为故障告警
Trap。
Trap Buffer 信息参数
参数名称 参数含义
RouterId 路由器标识。
NbrIfIndex 接口索引。
NbrIfInstId 邻居接口索引。
NbrRtrId 邻居路由器标识。
文档版本 06 (2017-09-12) 华为专有和保密信息 684
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 44 OSPFV3
参数名称 参数含义
NbrState 邻居状态。
l 1: Down
l 2: Attempt
l 3: Init
l 4: 2-Way
l 5: ExStart
l 6: Exchange
l 7: Loading
l 8: Full
IfName 接口名称。
Reason 邻居状态变化的原因：
l 1：adjacencyHoldTimerExpired，表示
邻接路由器的定时器超时。
l 2：physicalInterfaceChange，表示路由
器的物理接口状态发生变化。
l 3：ospfProtocolReason，表示OSPF协
议原因导致告警。
l 4：bfdSessionStateChange，表示BFD
会话断开。
l 5：configureChange，表示OSPF配置
发生了变化。
l 6：peerRouterReason，表示邻居路由
器原因导致告警。
l 100：alarmCleared，表示业务恢复、
去使能OSPFv3或邻居被删除，告警清
除。
SubReason 详细原因。
VB 信息参数
VB OID VB Name VB Index
1.3.6.1.2.1.191.1.1.1 ospfv3RouterId N/A
1.3.6.1.2.1.191.1.9.1.8 ospfv3NbrState ospfv3NbrIfIndex;
ospfv3NbrIfInstId;
ospfv3NbrRtrId;
文档版本 06 (2017-09-12) 华为专有和保密信息 685
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 44 OSPFV3
对系统的影响
这个告警在非虚连接邻居状态变迁时都会发送，该trap发送表明邻居状态发生改变。如
果邻居状态由较低状态变为较高状态，则属于正常运行，无需关注；如果邻居状态由
较高状态变为较低状态，则可能导致业务中断。
可能原因
原因1：邻居所在接口状态发生改变。
原因2：修改两端设备的接口配置参数，比如Hello、Dead定时器、接口认证和网络类
型。
原因3：通过reset ospfv3命令重启OSPF协议或进行主备倒换。
原因4：报文传输出现问题，表现为ping不通。
处理步骤
步骤1 通过display ipv6 interface和display ospfv3 peer查看连接邻居的接口Up/Down状态。
l 如果物理接口Down，请检查链路使链路Up=>2。
l 如果物理接口Up=>2。