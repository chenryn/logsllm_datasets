mysqli_connectO
mysqli_close()
这是运行MySQL及其中所包含数据库和表的软件的另
一个名字。
mysqli_queryO
这个可选的PHP函数告诉数据库服务器使用哪一个数
据库。
这会打开PHP脚本与MySQL服务器之间的连接使它
mysqli_select_db()
们能够通信。
你现在的位置
66
---
## Page 136
whodoeswhat解答
解答
尽管还没有看到如何集成在一起，先根据你的想法将以下各个
HTML、PHP和MySQL组件与相应的功能配对。
aliendatabase
这是PHP脚本传至MySQL服务器的SQL代码。
aliens_abduction表
这会运行PHP脚本，并向浏览器返回HTML页面，在这个过
report.html
程中通常会与一个数据库通信。
包含aliens_abduction表的数据库的名字。
report.php
HTML表单使用这个请求方法将表单中的数据发送至
一个PHP脚本。
POST
report.html表单中的数据最终要存储在这里。
Web服务器
Owen在这里收集用户的数据。
MySQL数据库服务器
这个PHP函数关闭与MySQL服务器的连接。
这是Owen使用的PHP脚本，用于处理用户在其
Submit按钮
report.html表单输人的数据。
这个PHP函数向MySQL服务器发送一个查询。
查询
网站访问者填写完表单时会使用这个HTML元素。
mysqli_connect()
这是运行MySQL及其中所包含数据库和表的软件的另
mysqli_close()
一个名字。
这个可选的PHP函数告诉数据库服务器使用哪一个数
mysqli_queryO
据库。
这会打开PHP脚本与MySQL服务器之间的连接使它
mysqli_select_db()
们能够通信。
100
---
## Page 137
连接
Dumb Questions
here
reno
在太棒了，不过对于表以及数据库如何创建我还有些
不明白，能讲讲吗？
自己的表，而不只是使用这里提供给你的代码。到目
前为止你已经创建了一个表，但对CREATETABLE语
法并没有太多了解。由于Owen只有这一个表，所以
即使不太了解CREATETABLE语法也没有太大问题，
不过如果需要创建你自己设计的多个表时，这就不行
了。需要更深入地分析新表中将存储的所有数据，并
考虑表示这些数据的最佳方式。这正是下一章要讨论
的重点准备好了吗？
你现在的位置
101
---
## Page 139
3创建与填充数据库
创建你自己的数据
你是牙买加人吗？牙买
加人实在令我神魂颜倒！
别那么急，Vexter。
首先我还需要一些数据。
你并不一定拥有你需要的数据。在真正使用数据之前首先需要创建数据。有
时需要创建数据库表来保存那些数据。另外有时必须创建数据库来保存需要在使
用之前先行创建的数据。是不是有些糊涂了？读过这一章你就会完全明白。准备
好，我们来学习如何创建你自己的数据库和数据库表。如果你还嫌不够尽兴，实
际上在这个过程中你还将构建你的第一个PHP&MySQL应用。
这是新的-章
103
---
## Page 140
急需邮件列表应用！
猫王商店开业
前Elmer已经收集了328个
邮件地址，而且每天还会增
ElmerPriestley的猫王商店（MakeMeElvis.com）开张了。需求
加更多地址。
Elmer的客户邮件列表：
量相当大。他已经售出了大量镶嵌树脂钮扣的连身衣，很多假
络腮胡子，以及成百上千副太阳镜。
Joffe
Kevin
Jilian
Newsome
PI:EMAIL
Garcia
Amanda
PI:EMAIL
每次有人购买商品时，Elmer都会收集到一个新的邮件地
Roundtree
Jo-Ann
Ed
PI:EMAIL
PI:EMAIL
址。他使用这些邮件地址来发送促销商品的最新时讯。目前，
Harte
Briggs
Chris
PI:EMAIL
Toth
Lloyd
Wiey
Anne
PI:EMAIL
PI:EMAIL
Elmer必须手工地逐一查看列表中的每一个邮件地址，通过复
Palumbo
Andrew
Ryan
Tom
PI:EMAIL
制粘贴来发出他的广告邮件。这种做法是可行的，不过太花费
McKinney
Alanna
PI:EMAIL
PI:EMAIL
Moeke
Ciay
时间和精力了。
Ann
PI:EMAIL
ozz
Brian
Mandel
Anne
PI:EMAIL
Tedesco
Debra
PI:EMAIL
Janis
janistedesco@@starbuzzcoffee.com
PI:EMAIL
Szwed
Vikram
Elmer，无可争
这太费时间了。我宁可用这
Joe
PI:EMAIL
Snou
Diana
PI:EMAIL
议的在线猫王
些时间来模仿猫王，而不是
Otto
Edward
PI:EMAIL
商品之王。
手工发送邮件。
Hardy
Glenn
PI:EMAIL
PI:EMAIL
Deal
Mary
Anne
Jagel
PI:EMAIL
Melfi
Ann
PI:EMAIL
PI:EMAIL
Oliver
James
Parker
Anne
Lee
Ricci
neoliveniw
Reno
Peter
Elmer先编写以下邮
Moss
Grace
Day
Clifford
Zelda
件，然后把各个邮件
Blunt
Bolger
aolor
PI:EMAIL
PI:EMAIL
地址复制粘号到“To”
Boling
Anne
域中。
Gares
Lindy
PI:EMAIL
Jacobs
Anne
Fred
PI:EMAIL
这些人都已经加
入Elmer的邮件列
00
表
希望在Elmer
To:
的帮动下能够看
Subject: Big Sale1
上去更像猫王。
Dear Fellow Elvisonians,
Big sale this week at MakeMeElvis.com!
Genuine horse hair sideburns 20s off!
And don't forget the *buy one, get one
free" 1eisure suits - only three days
left !
Elmer要把这些邮件地址复制粘贴到客户邮件应用
的“To”域中，为此花费了太多的时间。他希望能简
化这个任务，能够自动增加新的邮件地址，并成批发
送邮件。
104
第3章
---
## Page 141
创建与填充数据库
Elmer需要一个应用
Web应用是一个
设计用来满足用户
应用就是专门设计用来满足用户某个特定目标的软件程序。Elmer就需要
一个应用来维护他的邮件地址列表，这样他只需点击一个表单按钮就能向
某个特定目标的
邮件列表中的所有人员发送邮件。以下是他所希望的工作方式：
动态网站。
访问一个Web页面，并输入邮件正文。
Y
点击这个页面上的一个提交按钮，这个邮件就会发送到整个
这个邮件应用听起来与Owen的外星人劫持
MakeMeElvis.com邮件列表中的每一个人。
应用很类似，不过这里的区别在于，Elmet
允许新客户通过一个Web表单注册从而支持邮件列表自行构
的邮件列表金自行构建，而且他的邮件会
发送到整个列表中的每一个人。Elme的应
建。
用是全自动的！
基于以上应用需求清单，Elmer可以通过图示描述这个应用辉煌的全
BRAIN
CPOWER
MakeMeElvis.comWeb应用包括两个主要组成部分：其中一个表单向Elmer邮件列表中的人员发送
邮件，另一个表单允许新客户加入邮件列表。基于这两个表单，请大致画出Elmer应用的设计。
你现在的位置
105
---
## Page 142
我们的邮件列表应用设计
Elmer应用设计图示
在深人研究开发细节之前，先图示描述应用的设计往往很有帮助。这表
示需要明确将要涉及的页面和脚本，以及这些内容如何结合在一起，另
这些人都在Elmer的邮件列表中
外也许最重要的是，需要明确如何将数据存储在一个MySQL数据库中。
他们金收到Elmer向邮件列表发
送的邮件。
MokEMEELviS.COM
逐过这种表单/脚本组合，
允许用户加入Elmer的邮件
这个PHP脚本将邮
列表。
件发送到Elmer邮
件列表中的所有
人员。
addemail.php
addemail.html
Web服务器
sendemail.php
MaksMgELviS.COM
elvis store
这是数据库名，你
的数据库名可能与此
不同。
Elmer要填写这
表名
个Web表单来创
建并向列表发送
sendemail.html
邮件。
email list
first_name
last name
email
Elmer的邮件地址列表存储在一个MySQL数
Jon
Matthews
PI:EMAIL
PDG
据库服务器上一个数据库的一个表中。
Wendy
Werlitz
PI:EMAIL
Joe Bob
Franklin
PI:EMAIL
106
第3章
---
## Page 143
创建与填充数据库
那么我们该从哪里入手来构建一个PHP
和MySQL应用呢？是不是应该先写PHP脚本，
然后创建数据库表来存储数据？或者是否应该先
建立数据库表再编写膨本？
Joe：我看不出这有什么区别。无论怎样，应用真正工作之前数据库表和脚本都是
需要的。
Frank:说得没错，不过我觉得应该先写脚本，这样在连接数据库之前就可以先测
试PHP代码。
Jill:不过PHP脚本完全依赖于数据库。如果没有一个与之连接的数据库，将很难对
脚本进行测试。
Frank：难道不能这样做吗？先创建脚本，不过暂时不考虑与数据库连接的具体代
码。这样一来，除了与数据库的交互外，我们可以完成所有其他工作。这会很有
帮助，对不对？
Ftank
Fil
1oe
Joe：那可不一定。要记住，脚本的唯一工作就是获取输入到一个HTML表单的数
据，并把这些数据存放到一个数据库中。或者，如果要向邮件列表发送一个邮件，
脚本需要从数据库读取数据，并为每个用户生成一个邮件。不管哪一项工作，对于
脚本来说数据库都是至关重要的。
Jill：确实如此，不过我们根本没有考虑HTML表单。它在这里起什么作用？我认为需要先创建数据库，然后才能
考虑编写脚本的有关问题。
Frank:正是如此！首先我们创建HTML表单，然后确定数据库中存放哪些数据，一切准备就绪后再用脚本把它
们集成在一起。
Joe：我还不太明白这样做的意义。既然我们无法100%地确定需要从用户得到哪些数据，又该如何创建HTML表
单呢？
Jill：Joe说得对。HTML表单确实还要求我们先明确应用需要的数据。一切均由数据驱动，所以可能应该先构建
数据库和数据库表，然后得HTML表单，最后才是对表单提交做出反应的脚本。
Frank：我同意。那就开始动手吧！
Joe：我认为可能还需要对如何集成这个应用提出一些具体的步骤..
请写出MakeMeElvis.com应用从设计到实现过程中你认为可能涉
及的具体步骤。
你现在的位置
107
---
## Page 144
规划应用
PLAN AHEAD
对于如何集成Elmer的应用我们确实需要有所规划。通过步骤分解，我们可以一
次只关注一个问题，而不至于因为要求太多让人无所适从。
为邮件列表创建一个数据库和数据库表。
elvisstore
这个表将保存Elmer邮件列表中每一个人的姓、名
和邮件地址。
2
创建一个AddEmail（增加邮件）Web表单，并创建将
新客户增加到列表的PHP脚本。
我们将在这一步构建一个表单，并建立脚本，从而允许
客户轻松地输入他们的姓、名和邮件地址，然后将他们
addemail.html
addemail.php
增加到邮件列表。
3
创建一个SendEmail（发送邮件）Web表单，并
创建向邮件列表发送一个邮件的PHP脚本。
最后，我们将构建一个Web表单，允许Elmer编写邮
件正文，更重要的，这一步还人要构建一个脚本，
sendemail.php
表数据库表中的每一个人。
PDG
108
第3章
---
## Page 145
创建与填充数据库