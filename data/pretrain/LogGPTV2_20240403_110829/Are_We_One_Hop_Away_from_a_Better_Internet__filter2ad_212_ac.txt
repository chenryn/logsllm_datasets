### 互联网路径扁平化趋势及其影响

随着云计算和内容分发网络（CDN）的快速发展，互联网路径正变得越来越短。云服务提供商正在扩展其基础设施 [9, 18]，同时对等互联也在增加 [11, 37]。视频 [2] 和互动应用的兴起表明，服务提供商将继续寻求对等互联和分布式基础设施，以降低成本并减少延迟。由于流量集中在较短路径上，针对这种场景优化的解决方案可能会产生显著影响，即使它们在任意互联网路径上的效果不佳。

#### 单跳路径的优势
单跳路径仅涉及直接相关的各方。网页流量的性能取决于路径上每个自治系统（AS）的域内和域间路由决策。源和目标有动力改善性能，因为这直接影响到用户体验和收入。而中间的传输 AS 对路由质量没有直接的利益驱动。相比之下，单跳路径绕过了中间的传输 AS，只有发送者和接收者有动机改进路由。

#### 互联网协议的支持
互联网协议支持邻居之间的通信。一个 AS 可以使用多出口鉴别器（MED）、选择性广告和 BGP 社区来表达可能影响邻居路由的策略。AS 之间愿意通过这些机制进行合作 [41]。然而，这些机制通常只允许与直接邻居通信：MED 和社区通常不会传播超过一跳 [36]，选择性广告只能控制哪些邻居接收到路由。这一限制使得 AS 几乎无法影响其直接邻居之外的路由，但单跳路径只涉及直接邻居。

#### 短路径简化问题
**联合流量工程**
BGP 不支持自治系统之间的路由和流量工程协商。相反，网络运营商通过 MED 和前缀列表预置来向邻居 AS 暗示其对入站流量的偏好。这些提示的粗粒度以及缺乏跨 AS 边界的共同优化机制导致路径延迟增加 [41]。先前的研究提出了相邻 AS 之间的联合优化 [31]，但当需要优化经过中间 AS 的路径时，这样的协议会变得更加复杂 [30]，以至于不清楚它们能保证什么样的公平性和性能属性。相比之下，提供者和最终用户 AS 之间的单跳路径减少了对复杂解决方案的需求，使受益最大的双方能够直接协商。由于 AS 路径是直接的且不涉及互联网的其他部分，可以使用 BGP 以外的通道或协议，而无需广泛采用变更。

**防止欺骗流量**
部署有效的欺骗预防存在重大障碍。首先，过滤器在互联网边缘附近更容易正确部署 [6]；其次，现有方法不能保护部署过滤器的 AS，而是防止该 AS 发起对其他人的攻击。因此，AS 缺乏部署欺骗过滤器的强大动力 [6]。当前互联网中的短路径创造了一种环境，可能通过绕过现有障碍来保护大量互联网免受欺骗攻击。像 Google 这样的云提供商可以直接连接到大多数源，应知道特定对等连接的有效源地址，并能够过滤欺骗流量，可能使用严格的 uRPF 过滤器。直接连接消除了路由复杂性，从而简化了过滤器配置，基本上将互联网核心从路径中移除。作为目的地的云提供商可以通过过滤多个入口链路上的欺骗流量来保护自己 [13]。虽然这些机制不能防止所有攻击 [14]，但它们减少了攻击面，可能是更广泛解决方案的一部分。

**限制前缀劫持**
RPKI 可以验证前缀起源，但不能验证路径上的非起源 AS [28]。因此，拥有直接路径的提供商并不能防止其他 AS 通过更长的路径劫持其前缀。虽然 RPKI 加上直接路径本身不是完整的解决方案，但我们认为它们是实现更安全路由的潜在构建块。如果一个 AS 已经验证了其前缀公告——尤其是重要的内容提供商或一组最终用户——直接对等方似乎可以配置优先级，优先选择单跳、RPKI 验证的公告，而不是竞争性的广告。

**加速路由收敛**
BGP 可能会出现延迟收敛 [25]，这激发了一些替代方案，如 HLP [42] 和具有受限策略的更简单替代方案 [39]。我们关于路径分布扁平化的发现可能使后者更具吸引力。具体来说，对于单跳邻居，基于 BGP 下一跳的受限策略可能就足够了 [39]。在这种情况下，激励结构也非常合适：延迟的路由故障切换会中断热门视频内容，因此内容提供商希望确保快速故障切换以提高用户体验。

**避免中断**
互联网容易受到长时间的部分中断的影响 [23]。传输 AS 缺乏端到端连接的可见性，因此可能无法检测到问题，源和目标也缺乏对传输 AS 的可见性或控制权，使得确定问题位置变得困难 [24]。通过直接路径，一个 AS 对其自身路由有更好的可见性和控制权，可以确定并修复本地问题，或者知道另一方——同样对该连接有利益关系——应该负责。已有提案旨在促进提供商和最终用户网络之间的协调 [19]，此类设计可以实现适应故障和容量变化的反应式内容交付。

### 相关工作
先前的工作通过主动测量 [20]、被动监控 [4, 26] 和建模 [13] 观察到了扁平化和内容中心化的趋势。我们的工作通过测量更大数量的网络扩展了这一观察。早期的研究显示了允许邻居 [31] 和 CDN 与接入 ISP [19] 之间直接协商的优势，类似于我们在直接路径上设想的方法。研究表明，基于下一跳的 BGP 策略 [39] 有助于证明这些方法的潜力。类似地，ARROW 提出许多路由问题可以通过隧道到提供可靠传输的网络来减轻，而扁平化的互联网意味着一个隧道通常就足够了 [35]。我们的工作依赖于类似的观察，但互联网更加扁平。

### 结论
随着大型内容和云提供商不断建设内容分发基础设施并直接对等互联，许多客户端距离重要内容只有一个 AS 跳数。这一趋势很可能会因竞争压力和降低延迟以改善用户体验的需求而加速。这一趋势表明，与目前关注通用解决方案不同，域间路由和流量管理技术可以从优化常见的单跳路径中受益，在这种情况下可能存在更简单、可部署的解决方案。

### 致谢
感谢匿名评审者的宝贵反馈。我们还要感谢 David Choﬀnes 为我们的跟踪运行 Sidewalk Ends AS-path 转换，Matthew Luckie 在 Scamper 方面的帮助，Matt Calder 在 RIPE Atlas 测量方面的帮助，以及 Jitendra Padhye 和 Ratul Mahajan 的有益讨论。感谢 Google 提供的教员研究奖和云信用奖。本研究得到了美国国家科学基金会资助 CNS-1351100 和 CNS-1413978 的部分支持。

### 参考文献
[1] MaxMind GeoLite Database. http://dev.maxmind.com/geoip/legacy/geolite/.

[2] Sandvine 全球互联网现象报告，2014 年。

[3] CAIDA AS 关系数据集。http://www.caida.org/data/as-relationships/，引用日期为 2015 年 2 月。

[4] B. Ager, W. Mühlbauer, G. Smaragdakis, 和 S. Uhlig. Web 内容地图。IMC '11.

[5] B. Augustin, X. Cuvellier, B. Orgogozo, F. Viger, T. Friedman, M. Latapy, C. Magnien, 和 R. Teixeira. 使用 Paris Traceroute 避免 Traceroute 异常。IMC '06.

...

[44] Z. Zhang, Y. Zhang, Y. C. Hu, Z. M. Mao, 和 R. Bush. iSPY: 自动检测 IP 前缀劫持。SIGCOMM '08.

[6] R. Beverly, A. Berger, Y. Hyun, 和 k. claﬀy. 了解已部署的互联网源地址验证过滤的有效性。IMC '09.

[7] K. Butler, T. R. Farley, P. McDaniel, 和 J. Rexford. BGP 安全问题及解决方案综述。IEEE 会议论文集，2010 年 1 月。

...