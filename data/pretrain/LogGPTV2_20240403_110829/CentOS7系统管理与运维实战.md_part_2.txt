第9章双机热备
CentOS7系统管理与运维实战
VIII
10.2
10.1KVM虚拟化.
9.4小结
9.3
9.2
9.1
9.3.1kepalived.....
9.2.3Pacemaker资源配置...
9.2.2Pacemaker安装与配置
9.2.1Pacemaker概述.....
双机热备开源软件Pacemaker.
9.1.1可用性和集群.
8.5.6搭建双机热备HA...
10.1.4使用virt-install创建虚拟机...
10.1.2KVM虚拟机的管理方法.....
8.5.5搭建负载均衡LVS.
10.2.3oVirt Node安装....
10.2.2oVirt管理平台的安装...
10.2.1oVirt-engine 虚拟化管理平台概述....
.............
............
.......
307
298
294
.288
288
288
12
276
273
273
272
270
268
268
268
266
262
258
258
257
256
256
23
2
---
## Page 10
第12章.配置OpenStack私有云
12.4通过RDO部署OpenStack.
12.3Openstack主要部署工.....
12.4.4安装OpenStack
12.4.3安装Packstack..
12.4.1·署前的准.
12.2.5虚拟机镜像管理模块Glance..
12.2.4分布式对象存储模块Swift.
12.2.3
12.2.2
11.2.5在Linux中使用GlusterFS 存储
11.2.4添加不同模式的GlusterFS磁盘..
11.2..添.磁盘到集群.
11.2..Gust.eS.安..
11.1.3GlusterFS集群的模式.
11.1.1布式文件
12.4.2
2配置安装源
2OpenStack部署方式.
计算模块.Noyv.
：
........
目
338
3
329
325
325
23
319
318
315
315
313
308
308
338
3
3
3
3
3
3
3
329
2
326
23
324
308
刘
---
## Page 11
附录ALinux常用命令示例.
第13章
X
13.3
13.2
配置OpenNebula云平台.
A.1.9在文件或目录之间创建链接.
A.1.8
A.1.6
A.1.5
A.1.4
A.1.3
A.1.2
A.1.1复制文件cp....
A.1.7
13.3.5
13.3.4添加虚拟网络和模板.
13.3.3
13.3.2
13.3.1配置VDC 和集群..
13.2.4配置控制端和客户端.
13.2.3
13.2.2控制端安装.
13.2.1控制端环境配置...
OpenNebula安..
13.1.2OpenNebula 概述...
13.1.1云计算概述.
12.5.7
12.5.6
12.5.5
12.5.4
12.5.3
12.5.2用户设置.
过滤文re..
删除文件rm...
创建文件或修改文件时间touch...
创建并访问虚拟机.
添加KVM主机
客户端安装.
........
..........
........
........
391
.387
385
.385
385
.384
383
377
373
373
13
365
362
361
354
33
345
342
389
363
---
## Page 12
A.3
A.2
A.4.2周期任务cron....
A.3.8转换或拷贝文件dd...
A.3.6查
A.3.5
A.3.4
A.3.3
A.3..导出环境变量expor....
A.2.10压缩或解压缩文件和目录bzip2/bunzip2.
A.2.9压缩或解压缩文件和目录gzip/gunzip...
A.2.8
A.2.7
A.2.6查看目录树tre...
A.2.5
A.2.4
A.2.2建立目.录..kd.ir....
A.2.1显示当前工作目录pwd...
A.1.14文本操作 awk和 sed...
A.1.13
A.1.12
A.1.11
A.1.10
查看系统负载uptime....
显示或修改系统时间与日期date...
查看记histo.
压缩或解压缩文件和目录zip/unzip.
查看工作目录文件l.
改变工作目.cd..
文件权限umask.
分割文件li..
显示文件类型file...
524
23
2
419
418
417
414
413
410
409
408
407
405
404
×
---
## Page 13
版本。
内核版本：
内核可以被广泛移植，而且还对多种硬件都适用。
核只提供基本的设备驱动、文件管理、资源管理等功能，是Linux操作系统的核心组件。Linux
1.1.1Linux的内核版本
行版？本节主要介绍这方面的知识。
也有适合企业级的操作系统，如 Red Hat Enterprise Linux。本书主要介绍CentOS系统。
司或个人开发者都选择使用Linux。Linux版本很多，有适合个人开发者的操作系统，如Ubuntu，
Linux内核版本有稳定版和开发版两种。Linux内核版本号一般由3组数字组成，比如2.6.18
前两组数字用于描述内核系列，用户可以通过Linux提供的系统命令查看当前使用的内核
·Linux 内核由C 语言编写，符合POSIX 标准。但是Linux内核并不能称为操作系统，内
Linux是一个开源的软件，发行版众多。Linux常见的内核版本有哪些？Linux又有哪些发
第3组数字18表示修改的次数。
第1组数字2表示目前发布的内核主版本；
本章主要涉及的知识点有：
Linux是一个免费、开源的操作系统软件，是自由软件和开源软件的典型代表，很多大型公
开启Linux系统管理与运维的大门
第2组数字6表示稳定版本，如为奇数则表示开发中版本；
了解CentOs
Linux的发行版本
Linux的内核版本
认识Linux
你必须知道的Linux版本问题
第1章
---
## Page 14
2
源代码，因此也就未包含在CentOS 发行版中。
译而成，但CentOS与RHEL仍有许多不同之处：
权的信息后形成与RHEL版本相对应的CentOS发行版。虽然CentOS是根据RHEL源代码编
操作系统，在这种形式下CentOS应运而生。
但升级和技术支持需要付费，因此一些经费紧张的小型企业无法使用这种昂贵而又十分优秀的
装并使用；另一种形式则为遵循GNU计划规定的源码形式。获得和安装RHEL都无须付费，
通常需要使用两种形式发行同一个版本。第一种称为二进制版，用户可以直接利用这个版本安
式截然不同。由于RHEL采用了GNU计划中的大部分软件，因此红帽子公司在发行RHEL时，
的发行公司通常被称为红帽子公司，其发行的RHEL与Windows这类闭源操作系统的发行模
1.2.1
人员的青睐而发展壮大。
称为RHEL)。由于CentOS 并不向用户收取任何费用，因此得到了大量技术实力较高的运维
主导的操作系统，其来源于Linux的另一个最重要的发行版RedHatEnterpriseLinux（后面简
软件升级服务，它是一个企业级发行版，适用于普通开发者和服务器领域。
则采用的是另外一种包管理机制DPKG（DebianPackage）。
一种包管理机制YaST，Fedora革命性的RPM包管理机制极大地促进了发行版的普及，Debian
FreeBSD发行版则需要经过一定的学习才能有效地使用其系统特性。
自2004年发布后Ubuntu为桌面操作系统做出了极大的努力和贡献。与之对应的Slackware和
都可以得到快速解答。
1.1.2Linux的发行版本
CentOS7系统管理与运维实战
（1）RHEL中包含了红帽自行开发的闭源软件（如红帽集群套件等），这些软件并未开放
CentOS 根据RHEL释出的源代码进行二次编译，并去掉RHEL相关的图标等具有商业版
说到CentOS必然需要先说明RHEL，而说到RHEL又不得不说RHEL的运作模式。RHEL
（3）CentOS 源码来自Red HatEnterpriseLinux（RHEL），其社区提供及时的安全更新和
Linux有众多发行版，很多发行版还很受欢迎，有非常活跃的论坛或邮件列表，许多问题
CentOS（CommunityEnterprise OperatingSystem，社区企业操作系统）最初是由一个社区
（2）openSUSE、Fedora和Debian发行版介于上述几种系统中间。openSUSE引入了另外
（1）Ubuntu发行版提供友好的桌面系统，用户通过简单地学习就可以熟练使用该系统，
（2）CentOS 发行版通常会修改RHEL中存在的一些BUG，并提供了一个 yum 源以便用
CentOS简介
CentoS之于 Linux
---
## Page 15
以高效地管理你的系统。
一些操作方式（例如防火墙、系统服务管理）也会发生改变，这些改变需要运维人员一一适应，
运维人员而言，CentOS 新版本无疑会在功能、操作便捷性和性能等方面带来巨大改变，甚至
行化。
提高资源的使用效率。
配置防火墙之后也不需要重新启动防火墙就可以应用配置了；更新了高性能网络驱动等。
XFS快照。
统将会提速；更新和改进了图形、音频声音驱动等。
I/O性能；优化KVM虚拟化支持；开启固态硬盘和机械硬盘框架，同时使用这两种硬盘的系
虚拟化进行了大量的修改。CentOS7也不例外，其改进主要有：
优化。例如CentOS5发布后，用户惊奇地发现yum包管理器更具人性化了，而CentOS6对
1.2.2
其中不乏像淘宝、网易这样的IT巨头。
管理人员加入，从近些年来的使用情况来看，其发展非常迅猛。许多IT企业都在使用CentOS，
打造CentOS，业界普遍希望此举能让CentOS操作系统更加强大。
了解。值得注意的是2014年初，CentOS与RedHat同时宣布，CentOS 将加入RedHat，共同
到的问题需要用户自行解决，因此CentOS对技术人员的要求更高。
户可以随时更新操作系统。
，（3）网络方面：支持Firewalld（动态防火墙），防火墙现在可以支持区域和网络信任
CentOS 每一次新版本的发布都会提供许多新的功能，并对已经存在的软件进行了大量的
（5）用 Systemd 替换SysVinit：更好的服务管理框架能使存在依赖的服务之间更好地并
虽然CentOS 的技术门槛更高，但其稳定、安全、高效等特点吸引了一大批经验丰富的IT
CentOS7有许多改进，此处不再一
（4）支持Linux容器：Linux容器能提供轻量化的虚拟化，以便隔离进程和资源，这将
（2）文件系统方面：默认支持XFS文件系统，
RHEL与CentOS还有许多不同之处，此处不一一列举，感兴趣的读者可以参考相关资料
（1）更新内核版本为3.10.0：新版本的内核将对swap内存空间进行压缩，这将显著提高
（3）与RHEL提供商业技术支持不同，CentOS并不提供任何形式的技术支持，用户遇
对运维工程师而言，需要了解的知识可以归纳为宏观和微观两个层面。宏观层面需要了解
CentOS7的最新改进
Linux运维工程师的技能
一列举，感兴趣的读者可以阅读相关文档了解。对于
第1章开启Linux系统管理与运维的大门
，并更新了KVM，使其可以支持ext4和
3
---
## Page 16
员，操作系统的网络环境都要运维工程师设置，因此这部分知识必须要掌握。
括为以下几个部分：
员管理网络，因此Linux运维工程师通常无须处理与网络有关的事情。但也有一些小型企业没
务也有不少应用，此处不再一
因此需要熟练使用。
Python和 Perl 也是运维中经常使用的语言，但这二者通常只需要熟练地使用一种即可。
很多，例如 MySQL、PostgreSQL、Oracle 等，但 MySQL 无疑是使用最广泛的数据库软件。
能之一。通常需要了解这两个软件的安装、配置和优化及如何配合 PHP 进行工作，当然最重
核心部分。常见的应用系统服务有：
便排错及优化系统。
这些技能包括：基础命令的使用、系统中的工具（例如 awk、sed、日志工具等）、系统中重要
整个系统的架构，不同的服务是如何一环扣一环协同工作的；而从微观层面则需要运维工程师
CentOS7系统管理与运维实战
运维工程师都须要具备一定的网络知识，以便发生故障时判断问题出在哪儿。网络知识可以概
有专门的网络管理员，这时就需要运维工程师自己亲手建立网络或在已有网络上进行扩展。
1.3.2
当属BashShell脚本，这类脚本普遍存在于Linux系统中，因此必须掌握这类脚本。除此之外，
因此需要熟练地安装MySQL，并能熟练地在MySQL数据库中查询、插入、修改、删除数据。
要的是能通过日志排除故障。
大部分企业都会使用这两个软件搭建网站平台，因此熟悉这两种软件成了运维工程师的必备技
配置文件等。除了这些基础技能之外，运维工程师还需要对Linux系统本身有一定的了解，以
1.3.1
了解系统的每一个工作步骤。本节将试图从不同的技术层面介绍运维工程师需要的技能。
运维工程师做的所有工作都是为了应用系统服务能正常运行，因此这是运维工程师技能的