0,III
1,III
µi(1)
µi(2)
Γi(II)
µi(ni)
Γi(III)
µi(ni)
ni,II
Γi(II)
τj
III: Node j repaired,
rerouting in progress
ni,III
Γi(III)
Figure 5. CTMC model of failed node
Figure 6. CTMC model of non-failed node
are changed to Γi(I). For some nodes the arrival rates
are unchanged, but for the nodes that used to receive
packets from node j the arrival rate is reduced.
In
phase II the rerouting is completed and the arrival rate
is changed to Γi(II) depending on the position of i
relative to j and on the routing probabilities given by
Eq. (6).
However, even the decomposed CTMC model of a single
node might be too complex to obtain symbolic closed form
solution, and too large for numerical solution. This sec-
tion proposes time decomposition [23, 14] where we as-
sume steady state performance in each state and need only
obtain transient solution of the phased recovery model de-
scribed in Section 2.1.
In the CTMC model of the failed node j the pj(t, y, xj) is
obtained with the initial condition pj(0, I, nj) = 1 while
for the non-failed nodes (i #= j) the pi(t, y, xi) is obtained
with the initial condition pi(0, I, xi) = πi(xi). The πi(xi)
are the steady state probabilities in (7) from Section 4.1. Fi-
nally, the global state probabilities are obtained by product
form approximation
p(t, y, #x) ≈
n"i=1
pi(t, y, xi)
(8)
There is no easy way to obtain closed form solutions of
pi(t, y, xi) from the models in Figures 5 and 6. But, nu-
merical solutions can be obtained by means of tools like
SHARPE [26, 15] and SPNP [7] for rather large systems.
However, as the size of the network node model increases,
caused either by a more complicated recovery model or in-
creasing the number of buffers ni, the solution becomes
very resource demanding and slow.
5.1 Phased recovery model
The phased recovery model in Figure 2 describes rerout-
ing and restoration. The system starts in phase I and we
study the system until its return to phase IV . The transient
probabilities p(t, y) of the four phases y = I,··· , IV, in
the model can be obtained by the convolution integration
approach [27]
= e−tαd
αd
αd−τ (e−tτ − e−tαd)
αd−τ# e−tαd−e−tαu
p(t, I)
p(t, II) =
− e−tαu−e−tτ
p(t, III) = αdτ
αu−τ
p(t, IV ) = 1 − p(t, I) − p(t, II) − p(t, III)
under the assumption αd #= τ #= αu. For the case αd = αu
as applied in the examples in Section 8 the solution is even
simpler.
αd−αu
(9)
$
5.2 Survivability model
5 Time-space decomposed model
The space decomposition of the exact model into node
independent models improves the scalability signiﬁcantly.
The time decomposition is a decoupling of the per-
formance and recovery models.
the
steady-state probabilities in the performance models and
the transient solution of the phased recovery model are
This means that
Authorized licensed use limited to: Tsinghua University. Downloaded on March 20,2021 at 13:16:07 UTC from IEEE Xplore.  Restrictions apply. 
International Conference on Dependable Systems & Networks: Anchorage, Alaska, June 24-27 20081-4244-2398-9/08/$20.00 ©2008 IEEE467DSN 2008: Heegaard & Trivediobtained separately and independently of each other, and
pi(t, y, xi) ≈ p(t, y) · πi(xi, y). The transient probabil-
ities p(t, y) are from (9) while the steady-state probabili-
ties πi(xi, y) are the πi(xi) from (7) for different phase de-
pendent arrival intensities Γi(y). Observe that we assume
steady state performance in each phase. The approximation
is good when upon a phase change, the steady-state perfor-
mance in the new phase is reached quickly compared to the
duration of the phase which is the case in our network mod-
els when (Γi, µi) % (αd, τ,α u). The quality of the time
decomposed Markov model approximation depends on the
degree of coupling between the “performance block” and
“phase block” in our Markov matrix [10, 23, 4]. So far
we have justiﬁed the approximation by discussion of typical
system parameters in Section 7 and validated by numerical
results in Section 8.
Then, the global state probabilities are obtained by ap-
proximation using both space decomposition from (8) and
the time decomposition
p(t, y, #x) ≈
n"i=1
pi(t, y, xi) ≈ p(t, y) ·
πi(xi, y)
(10)
n"i=1
When the phased recovery model is as simple as the ex-
ample in Figure 2 we have a closed form solution. This en-
ables efﬁcient evaluation of very large networks with large,
and even inﬁnite, server and buffer capacities, ni. With a
much more complex phased recovery model where a closed
form transient solution is hard or impossible, this time de-
composition approach is still advantageous since the nu-
merical solution is signiﬁcantly faster compared to the node
model in Section 4 because the number of states is reduced.
6 Model scalability
The main purpose of the approximations proposed in this
paper is to reduce the computational effort of obtaining tran-
sient solutions in large network models without an undue
loss in the accuracy. The assumptions made are discussed
in Section 7. The accuracy is demonstrated by two small
network models in Section 8.
The underlying CTMC model of the exact Stochas-
tic Reward Net has a state space that is proportional to
%n
i=1 ni × np where np is the number of phases. The space
decomposed CTMC model will reduce the state space of the
transient solution to&n
i=1 ni × np while for the time-space
decomposed model a transient model with only np states
needs to be solved.
The simulation model is considered to be attractive when
the analytical model fails due to too restrictive modeling as-
sumptions or intractable or inefﬁcient solutions. The strong
side of the simulation approach is that an arbitrary level
In many
of detail applies that suits the study of interest.
cases it is easy to change the modeling assumptions and to
make the model as close to reality as required. However,
it is important to point out that the efﬁciency of the simu-
lation approach depends on the network size and the stiff-
ness of the model, i.e., the ratio between the packet arrival
and departure rates, and the repair and rerouting rates [25].
In addition, simulations become inefﬁcient when the events
of importance to the metrics of interest are infrequent, e.g.
the packet losses are very rare. Then, numerical solutions
might become less computer intensive compared to simu-
lation unless some rare event simulation technique like im-
portance sampling, RESTART or importance splitting [17]
can be applied.
7 Modeling assumptions
In the network models in this paper we have assumed
that external packet arrivals to the source of a virtual con-
nection is a Poisson process. If a bursty arrival process is
required we may use an MMPP or MAP type process [27]
which will produce larger CTMC models. The packet ser-
vice time distribution is assumed to be exponential. The
service time distribution is inﬂuenced by a combination of
the packet size distribution, the aggregation level, and the
header processing time. Non-exponential empirical distri-
butions are observed, for instance in [24] where the empir-
ical distribution of single router service time was ﬁtted to
a Weibull distribution. A phase-type ﬁt for Weibull distri-
bution is possible and will once again yield larger CTMC
models.
In our space decomposition model we assumed indepen-
dence between the network nodes. Independence is not a
fully realistic assumption but a good approximation in net-
works with low loss probability and with high aggregation,
i.e., with multiplexing of a large number of connections.
We have decoupled the performance and recovery mod-
els. We assumed that in each phase we have steady-state
performance. This approximation is good when the steady-
state performance in a phase is reached quickly after the
change of phase compared to the expected duration of the
phase. As a rule of the thumb, the approximation is good if
there is at least two order of magnitude difference between
the time granularity of the events in the performance model
and in the recovery model. E.g.
in medium loaded (30-
50%) high capacity networks (100Mbit/s -10 Gbit/s) you
will observe 3-300 packets/ms, while the routing, rerouting
and repair (at IP level) is in the order of 100s of ms. This
means a few hundred to several thousand packets are ex-
pected in each phase.
The phase time distribution in the recovery model is for
simplicity assumed to be exponential but any general dis-
tribution can be accommodated using semi-Markov mod-
Authorized licensed use limited to: Tsinghua University. Downloaded on March 20,2021 at 13:16:07 UTC from IEEE Xplore.  Restrictions apply. 
International Conference on Dependable Systems & Networks: Anchorage, Alaska, June 24-27 20081-4244-2398-9/08/$20.00 ©2008 IEEE468DSN 2008: Heegaard & Trivediels [27].
The simulation model assumptions are the same as the
assumptions in SRN model to cross validate and to validate
the following model decomposition approximations. The
assumptions in the simulation model are easily relaxed, e.g.,
to change to general arrival process or general service time
distributions. To model the network protocols in more de-
tail, alternatives to DEMOS/SIMULA like ns-2 [11] will be
considered provided that the network size is not too large
and the packet rate is not too high compared to the expected
duration of the transient period after the undesired event.
8 Network examples
In this section two small network examples are studied
by simulation and the analytic approaches described in the
paper.
8.1 Evaluation tools
The simulations in this paper are done by a process-
oriented simulator implemented using the programming
language SIMULA [18] with the DEMOS (Discrete Event
Simulation on SIMULA [3]) class library. The analytic
evaluations of the Stochastic Reward Net are conducted
both in SHARPE [15, 26] and SPNP [7], while the CTMC
models are numerically solved in SHARPE and the sym-
bolic closed form solution is checked in Mathematica.1
8.2 A 4 node example
The ﬁrst example is a network with n = 4 nodes as de-
picted in Figure 4. The performance of the virtual connec-
tion between s = 1 and d = 4 is evaluated after the failure
of node 2 at time t = 500. Each node i is an M/M/1/ni
system with the parameters given in Table 1. The parame-
ters in the phased recovery model are αd = αu = 0.01 and
τ = 0.001.
The network example is studied by simulations and all
three analytical approaches. The estimated performance
metrics from R = 90 simulation replica (Simulations) are
compared against the analytical values of the Stochastic Re-
ward Net model solved by SPNP (SRN model). The loss
probability and the average number of packets in the sys-
tem at different t are shown in Figures 7(a) and 7(b), re-
spectively. The space and time-space decomposed models
are indistinguishable so they are represented by only one
curve (Decomposed CTMC model).
The main observations from the experiments are that the
simulations and SRN models show perfect ﬁt as expected
since the modeling assumptions are identical, and that the
1http://reference.wolfram.com/mathematica/guide/Mathematica.html
 0.7
m
a 
=m
u 
 0.6
 0.5
 0.4
 0.3
 0.2
 0.1
m
0
 0
 0
 7.5
m
0
=m
 7
u
 6.5
 6
 5.5
 5
 4.5
 4
m
a 
 3.5
 0
Decomposed CTMC model
SRN model
Simulations
 200
 400
 600
 800
 1000
 1200
 1400
=t
t
r 
R
undesired event
(a) Loss probability, l(t)
=t
t
r
R
Decomposed CTMC model
Simulations
 500
 1000
 1500
 2000
 2500
 3000
 3500
 4000
undesired event
(b) Mean number in the system, N (t)
Figure 7. Performance in 4 node network
decomposed CTMC models capture the transient perfor-
mance very well. The time-space decomposed model with
the closed form solution are a signiﬁcant simpliﬁcation that
enables studies of large networks with many, and even inﬁ-
nite, buffers. The results show that when the transient per-
formance is dominated by impairments in a single node this
decomposed, product form approximation is a viable ap-
proach.
8.3 A 10 node example
The second example is a network with n = 10 nodes.
The directed graph #G[1,10] for routing virtual connections
Table 1. Parameters in network with 4 nodes
i
1
2
3
4
ni
10
8
10
4
µi
100.0
100.0
100.0
100.0
Γi(IV ) Γi(I) Γi(II)
80.0
80.0
46.9
0.0
78.1
31.2
77.9
69.1
80.0
0.0
31.2
31.0
Γi(III)