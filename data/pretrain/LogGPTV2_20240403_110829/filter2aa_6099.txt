# 安全数据分析平台的架构

本文旨在整合安全领域内各种大数据分析平台的架构，涵盖以下几个方向：
- 商业化产品的技术架构思路
- 公开的技术架构案例

## 通用型大数据平台的技术架构

![通用的大数据平台技术架构](https://image-host-toky.oss-cn-shanghai.aliyuncs.com/20200710162910.png)
图1：通用的大数据平台技术架构[1]

## 综合性威胁分析平台

### 详细版

![综合性威胁分析平台详细版](https://image-host-toky.oss-cn-shanghai.aliyuncs.com/20200710162910.png)
图2：综合性威胁分析平台详细版[1]

### 设计思路

![综合性威胁分析平台设计思路](https://image-host-toky.oss-cn-shanghai.aliyuncs.com/20200710162954.png)
图3：综合性威胁分析平台设计思路[1]

## 基于日志的安全数据分析平台

![基于日志的安全数据分析平台架构](https://image-host-toky.oss-cn-shanghai.aliyuncs.com/image-20201124202954753.png)
图4：基于日志的安全数据分析平台架构[2]

## 参考资料

### AiLPHA大数据智能安全平台

**官网链接**: [AiLPHA大数据智能安全平台](https://www.dbappsecurity.com.cn/show-56-5-1.html)

#### 功能简述

AiLPHA以“AI驱动安全”为核心理念，集成以下安全模块：
- 超大规模存查
- 大数据实时智能分析
- 用户行为（UEBA）分析
- 多维态势安全视图
- 企业安全联动闭环

该平台具备全网流量处理、异构日志集成、核心数据安全分析、办公应用安全威胁挖掘等前沿大数据智能安全威胁挖掘分析与预警管控能力。具体功能包括：
- 大数据量安全信息的存储和查询
- 实时分析
- 用户行为分析模块
- 多种可视化视图
- 相关资产信息查询

应用场景包括：
- 内网流量抓取与处理
- 异构日志集成
- 核心数据安全分析
- 办公应用安全威胁挖掘（如邮件、OA系统等）

#### 产品架构

1. **数据采集**:
   - 实时采集全流量、安全设备日志及应用日志，为下游实时计算提供数据支持。

2. **ETL (Extract, Transform, Load)**:
   - 提供强大的数据抽取、转换和加载能力，解析引擎支持超过300+厂商及3000+种类日志。

3. **数据分析与计算**:
   - 搭建高可用集群HA，以HDFS Federation和YARN为核心，集成了HBase、Kafka、Flink等计算组件。

4. **应用服务**:
   - 个性化展示结果数据，并通过告警系统生成异常结果数据警报。

#### 产品优势

1. **多源异构数据采集**:
   - 支持多种异构安全资产的数据采集，具备全流量7层协议深度解析技术和全网安全日志智能解析采集技术，实现数据的清洗、标准化、存储，并提供离线、实时、全文检索等多种数据订阅及分析功能。

2. **用户行为分析 (UEBA)**:
   - UEBA提供画像及基于各种分析方法的异常检测，评估用户和其他实体（主机、应用程序、网络、数据库等），发现与标准行为相异常的活动，如内部或第三方人员对系统的异常访问，或外部攻击者的入侵。通过对用户日常行为的聚类以及平台的安全域信息，区分不同类别的使用者，并在非职责内操作时标记较高异常评分。

3. **威胁智能溯源**:
   - 利用威胁情报、大数据安全分析、建立情报共享及协同分析，实现全生命周期跟踪安全事件的溯源流程，方便运维人员进行安全威胁排除、攻击链分析、事件溯源，提升企业的整体安全事件分析能力。

4. **模型智能编排**:
   - 计算分析系统支持模型的智能编排，允许用户自定义实现数据挖掘和集群学习基础算法。通过有向连接线标书模型数据的流程，实现多个元素的链接。模型编排完成后可实时输出计算结果，并调用已有模型作为下一个模型的输入。支持使用Python、Java等语言开发数据分析程序。

### 天池云安全管理平台

**官网链接**: [天池云安全管理平台](https://www.dbappsecurity.com.cn/show-55-7-1.html)

## 参考文献

\[1] 数据驱动安全方法论浅谈, jeary, https://xz.aliyun.com/t/3695  
\[2] 海量日志采集、解析实践，邓小刚（奇安信网络安全部），在2020BCS上的分享