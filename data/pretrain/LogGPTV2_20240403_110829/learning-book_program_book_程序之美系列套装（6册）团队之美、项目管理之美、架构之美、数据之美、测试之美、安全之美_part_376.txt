工作，以及更改任何已调度测试的优先级。调度器可能会打乱一些
工作的执行次序以便设法优化利用资源。例如，如果一个测试正在
运行而只有一个内存占用量小到可以同时运行的工作在队列中，那
么这样一个工作会被立即处理，无论它在队列中处于什么位置。
当一个工作被调度的时候，用户会收到一个可用于跟踪测试结果的
RSS订阅的网址。此外，用户可以提供一个电子邮件地址，一旦所
有测试完成，将有一份通知被发送到该地址。
目前，我们一共有455个测试用例，覆盖了大部分模块中的几乎每个
特性。基于现有设备，整个测试套件将需要执行将近3个小时。
当整合一个可以影响每个模块的结构变化时，ANSTE的用处特别
大。这样的整合很容易引起在以前很难找到的一些无法预料的回归
问题。现在几乎每个回归问题都可以不用任何人为干预很快被这个
测试框架发现。
eBox的ANSTE测试样例
第一个例子是对代理模块的测试。
2154
---
## Page 2156
装有eBox的计算机作为一个连接客户端和网关的路由器。该测试需
要检查代理是否配置正确。即，是否允许客户端通过代理浏览互联
网网页。
该场景被定义在一个名为proxy.xml的文件中，其中包括测试所需的
机器。首先定义的是把其余机器与互联网连接的路由器，脚本如
下：
router
Internet Router
hardy-mini
ethl
192.168.3.254
255.255.255.0
通过建立网络接口和配置一些必要的参数，该路由器为其他机器提
供了接入互联网的连接。一个没有路由器的场景是无法访问互联网
的。这个路由器使用一种称为Hardy-mini的基本操作系统，它包含了
一个可使用UbuntuHardy的最小的Linux系统。同时还要添加另外一个
网络接口以便其他机器在该场景下可以连接到路由器上。在这种情
况下，作为将被连接于客户端和网管的这台eBox机器，脚本如下：
2155
---
## Page 2157
ebox-server
eBox server
{Sdist}-ebox-base
ethl 
192.168.2.1
255.255.255.0
eth2
192.168.3.1
255.255.255.0
192.168.3.254
2156
---
## Page 2158
变量可以在XML的场景定义中使用，就像节点中声明
的那样。变量dist可以使测试在不需要对XML做改动的情况下支持各
种场景。
eBox基本映像包括了一个完整、全新的eBox安装。这些基本映像只
生成一次，可被使用无数次。这些映像常常储存于一个RAM磁盘上
以便提高执行速度。
两个静态网络接口已设置好了，接下来就是用安装后的脚本为eBox
导入网络配置，并确保eBox成功启动、运行正常后，再开始执行测
试。
最后一个还没定义的机器将定义为测试场景中的客户端，它将通过
eBox代理来浏览网页。声明如下：
simple client host
hardy-mini
ethl
192.168.2.2
255.255.255.0
192.168.2.1
2157
---
## Page 2159
wget
netcat
hardy-mini映像再次被应用于浏览客户端。这台机器的配置和先前为
eBox设计的网关的设置一样。这样，通过客户端浏览器发出的HTTP
请求将会通过这个代理发出。
要执行该测试场景，需要两种额外的数据包：wget和netcat。它们在
XML的节点中被标记为需要安装。这样，它们将被安装
并可被后续的测试脚本调用。
场景定义文件已经准备就绪，并且终于可以被代理测试套件使用，
另有一个XMIL文件定义该套件。该文件包括对测试套件名称、描述
以及被使用场景的定义，如下所示：
eBoxProxy tests
Contains a set of tests to check
that the eBox HTTP Proxy module works properly
ebox/proxy.xml
2158
---
## Page 2160
配置这些元素之后，测试继续。首先要定义的并不是功能测试，而
是通过网络接口配置eBox的Selenium脚本。尽管它们是为测试网络接
口的正确性这一目的服务的。例如：
EnableModules
Enable network andfrewall modules.
ebox-server
enable-modules
脚本EnableModules可以为eBox的服务器提供所需的模块。启用各模
块是一个很普通的任务，因此几乎每个不同的且被各种测试公用的
模块都有一个相应的脚本。这些脚本可根据测试需求增减。这些脚
本以编程方式在适当地方点击接口链接或者按钮，然后等待直到任
务完成。文件Enable-proxy.html就含有Selenium脚本，用于启动代理
模块，如下所示：
open
/ebox/Summary/Index
2159
---
## Page 2161
click
link=Module status
waitForElementPresent
squid
click
squid
waitForElementPresent
1do
2160
---
## Page 2162
1d
函数open告知浏览器加载的指定路径。一旦页面被加载，我们将通
过函数click使Selenium模拟点击"Modulestatus"链接。然后我们就可以
等待直到waitForElementPresent加载元素squid。与此相同，我们继续
使用click函数点击那些必要的链接，直到启动eBox的Squid模块，
Selenium脚本写起来冗长、枯燥，但幸运的是这些脚本可以在
SeleniumIDE环境中自动生成。SeleniumIDE是一个为Selenium测试开
发的集成并发环境，它可以通过自动记录测试人员在浏览器中执行
的各种步骤来生成一个Selenium测试用例。
Seleniumm能够执行除了打开指定路径并点击链接以外的许多行为。
eBox测试中最经常用到的功能包括：输入文本字段，在选中的下拉
框中选择某一项，以及检查网页中是否含有给定的文本。