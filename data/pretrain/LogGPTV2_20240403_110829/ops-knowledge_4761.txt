User: You need to set up an automated script on your system that periodically scans and cleans log files to free up disk space. Please explain how to write this script and set up a cron job.
Assistant: Scripting: 1. Open a terminal and create a new cleanup script file with the following command: ``` sudo nano /usr/local/bin/cleanup.sh ``` 2. In the new file that opens, enter the following: ``` #!/bin/bash # Define the log file directory LOG_DIR=/var/log # Define the maximum size for log files (in Megabytes) MAX_SIZE=50 # Find all files in the log directory that end with ".log " find ${LOG_DIR} -name "*.log" -type f | while read log_file ; do # If the log file size is greater than the maximum size, then truncate it if [ $(du -m "${log_file} " | cut -f1) -gt ${MAX_SIZE} ] ; then echo "Cleaning up ${log_file}" sudo truncate -s 0 ${log_file} fi done ``` 3. Save and close the file Set cron job: 1 . Open a terminal and use the following command to open the cron editor: ``` crontab -e ``` 2. In the opened file, enter the following line to run the cleanup script every day at midnight (00:00): ``` 0 0 * * * /bin/bash /usr/local/bin/cleanup.sh >/dev/null 2>&1 ``` 3. Save and close the file. The cron program will automatically add the scheduled task to the work queue. Now, whenever the cron process automatically runs the cleanup script at midnight every day, the script will periodically scan and clean up the log files to free up disk space.