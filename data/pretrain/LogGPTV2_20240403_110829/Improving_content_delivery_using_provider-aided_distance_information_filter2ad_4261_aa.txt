title:Improving content delivery using provider-aided distance information
author:Ingmar Poese and
Benjamin Frank and
Bernhard Ager and
Georgios Smaragdakis and
Anja Feldmann
Improving Content Delivery Using
Provider-aided Distance Information
Ingmar Poese
T-Labs/TU Berlin
Benjamin Frank
T-Labs/TU Berlin
Bernhard Ager
T-Labs/TU Berlin
PI:EMAIL
PI:EMAIL
PI:EMAIL
Georgios Smaragdakis
T-Labs/TU Berlin
Anja Feldmann
T-Labs/TU Berlin
PI:EMAIL
PI:EMAIL
ABSTRACT
1.
INTRODUCTION
Content delivery systems constitute a major portion of today’s In-
ternet trafﬁc. While they are a good source of revenue for Internet
Service Providers (ISPs), the huge volume of content delivery traf-
ﬁc also poses a signiﬁcant burden and trafﬁc engineering challenge
for the ISP. The difﬁculty is due to the immense volume of trans-
fers, while the trafﬁc engineering challenge stems from the fact
that most content delivery systems themselves utilize a distributed
infrastructure. They perform their own trafﬁc ﬂow optimization
and realize this using the DNS system. While content delivery sys-
tems may, to some extent, consider the user’s performance within
their optimization criteria, they currently have no incentive to con-
sider any of the ISP’s constraints. As a consequence, the ISP has
“lost control” over a major part of its trafﬁc. To overcome this im-
pairment, we propose a solution where the ISP offers a Provider-
aided Distance Information System (PaDIS). PaDIS uses informa-
tion available only to the ISP to rank any client-host pair based on
distance information, such as delay, bandwidth or number of hops.
In this paper we show that the applicability of the system is sig-
niﬁcant. More than 70% of the HTTP trafﬁc of a major European
ISP can be accessed via multiple different locations. Moreover,
we show that deploying PaDIS is not only beneﬁcial to ISPs, but
also to users. Experiments with different content providers show
that improvements in download times of up to a factor of four are
possible. Furthermore, we describe a high performance implemen-
tation of PaDIS and show how it can be deployed within an ISP.
Categories and Subject Descriptors
C.2.4 [Distributed Systems]: Client/Server; C.2.5 [Local and Wide-
Area Networks]: Internet
General Terms
Measurement, Performance
Keywords
Content Distribution, Host Diversity, Server Selection, DNS Redi-
rection, Residential Traces
Permission to make digital or hard copies of all or part of this work for
personal or classroom use is granted without fee provided that copies are
not made or distributed for proﬁt or commercial advantage and that copies
bear this notice and the full citation on the ﬁrst page. To copy otherwise, to
republish, to post on servers or to redistribute to lists, requires prior speciﬁc
permission and/or a fee.
IMC’10, November 1–3, 2010, Melbourne, Australia.
Copyright 2010 ACM 978-1-4503-0057-5/10/11 ...$10.00.
The Internet has evolved into a system where users can easily
share content with friends and/or other users via applications such
as online social networks, video portals, One-Click Hosters, Web
services, wikis, blogs, or P2P ﬁle-sharing applications. In terms of
volume, multi-media content, including photos, music, and videos,
as well as software downloads and updates, are major contributors
and together responsible for most of the Internet trafﬁc [24, 22, 31,
29]. Indeed, HTTP is used to access this information and therefore
accounts for more than 50 % of the trafﬁc [2, 22, 24, 31, 29]. More-
over, it is hardly (mis-)used as a transport protocol for other appli-
cations [24]. Among the causes for the increase of HTTP trafﬁc are
the increase of streaming content, e.g., offered by youtube.com
and the popularity of the content offered by One-Click Hosters [7]
such as rapidshare.com or uploaded.to.
This content is hosted by the new “Hyper Giants” [22] which in-
clude large content providers, such as Google and Yahoo, as well
as Content Distribution Networks (CDNs), like Akamai and Lime-
light. Most of these Hyper Giants are operating not only a substan-
tial number of data centers but are also building up their own net-
work [21]. Some networking researchers are claiming that, due to
the phenomenal growth of Hyper Giants, the topological structure
of the Internet must be redrawn to include them, together with the
Global transit and backbone networks as part of the Internet core,
resulting in the topology sketched in Figure 1. This may leave the
ISPs as dump pipe providers to the consumer.
To achieve high levels of performance and scalability, most con-
tent delivery architectures, including well provisioned hosting and
content distribution networks, heavily rely on a distributed infras-
tructure. Indeed, some of them have deployed hosts in more than
5000 locations throughout the Internet [23]. What’s more, the con-
tent delivery providers have full control of their transfer process.
Therefore, they can optimize the trafﬁc ﬂows so that it minimizes
operational costs as long as quality of service agreements with the
content producers are met. With the help of the DNS system, they
can redirect requests to hosts within their infrastructure and mini-
mize their operational costs. This may result in sub-optimal content
delivery performance to the end-users, while imposing a heavy bur-
den on the ISP caused by the pure trafﬁc volume of the content as
well as the control loop interactions. If the ISP changes its routing,
e.g., for the purpose of trafﬁc engineering, the content delivery net-
work may re-optimize this delivery strategy and change the trafﬁc
matrix, which may render the trafﬁc engineering choice of the ISP
void [18]. Even though we show in Section 2 that most content is
available at multiple locations throughout the Internet, the ISP has
no choice regarding where users fetch content from. This decision
is, at this point, left to the content delivery network, even though
22Global
Internet
Core
Global Transit/
National 
Backbones
Large Content, Consumer Hosting, CDN
"Hyper Giants"
ISP1
ISP2
ISP3
Reginal
Tier−2
Providers
Customer
IP
Networks
Figure 1: The new Internet Reality [22]?
the content delivery architectures provide a diverse set of hosts for
any requested object.
Nevertheless, the ISP has substantial information at its ﬁngertips
which can be used to improve overall trafﬁc ﬂow and thus lower
network utilization. This, in turn, can increase content delivery
performance. However, this information is not readily available to
the CDN. Rather, the CDN has to infer such information either via
active measurements or client reports. Therefore, we claim that it
is possible to improve content delivery using Provider-Aided Dis-
tance Information (PaDIS), see Section 3, much in the same way as
P2P content delivery can be improved using ISP-P2P collaboration.
Previous work, e.g., [8][19][28] has in principle shown poten-
Indeed, we proposed that each
tial for biasing location choices.
ISP offers a service to the P2P users which explicitly helps them
to choose “good” neighbors by ranking possible peers [4, 3]. Such
trafﬁc localization mechanism for P2P trafﬁc, as proposed by Ag-
garwal et al. [4, 3], Xie et al. [36], Choffnes and Bustamante [11],
are currently under discussion within the IETF ALTO [32] working
group.
Network based information is in particular useful to circumvent
bottlenecks, or to handle application ﬂash crowds and other mov-
ing targets. Moreover, if an ISP has more control over its trafﬁc
ﬂows, it can choose servers more intelligently and thus avoid net-
work bottlenecks or choose closer servers in terms of network hops.
This can both reduce overall trafﬁc volume, as well as network uti-
lization, which may further reduce network based congestion and
thus improve the overall user performance.
We therefore propose to improve content delivery using PaDIS.
Using active measurements, we show that choosing the appropriate
server for content delivery can improve the user’s download expe-
rience by up to a factor of four; see Section 4.
Our contributions in this paper are:
• To show that more than half of the total trafﬁc, including the
dominant HTTP trafﬁc, can be delivered in principle from
multiple servers at diverse network locations based on obser-
vations from passive packet-level monitoring of more than
20,000 residential DSL lines from a major European ISP.
• To capitalize on the diversity of content delivery, we propose
to deploy PaDIS as a content location recommendation sys-
tem, within the ISP. PaDIS can be interfaced with the ISP’s
DNS to redirect trafﬁc, or it can be contacted directly by the
client system.
• To quantify the content delivery performance improvement
when using PaDIS in the wild, within a major European ISP.
We report on our experience of downloading content from
content distribution networks, and show signiﬁcant potential
for performance improvements. More speciﬁcally, we report
on our experience when downloading content from different
content distribution networks as well as One-Click Hosters.
Our results clearly show that the end-user download time
is signiﬁcantly improved, while the ISP regains the ability
to perform trafﬁc engineering by biasing application layer
choices.
To the best of our knowledge, this is the ﬁrst work that pro-
poses application and ISP collaboration based on the observation
that content is usually accessible at multiple locations due to the
prevalence of distributed content delivery architectures. However,
there is a chance that the content delivery architecture may try to
boycott the choice of the ISP by no longer exposing the multiple
locations. However, since the ISPs control the access to the eye-
balls, they can still use the principle approach as a negotiation tool.
Moreover, with the help of the information from the ISP, it is pos-
sible to improve user performance substantially.
The remainder of the paper is structured as follows: In Section 2,
we provide evidence in support of the potential diversity of hosts
from which content can be downloaded. In Section 3, we provide
the architecture of PaDIS and we show how it can be deployed
within an ISP. In Section 4, we quantify the content delivery per-
formance improvement while using PaDIS in the wild. We put our
work in context with previous related research in Section 5 and
conclude in Section 6.
2. CONTENT SERVER DIVERSITY
To highlight that a signiﬁcant amount of trafﬁc can, in princi-
ple, be delivered from multiple different servers at diverse network
locations, we rely on passive network traces to identify popular ser-
vices and active measurements to identify server location diversity.
2.1 Residential ISP Traces
We base our study on three sets of anonymized packet-level ob-
servations of residential DSL connections collected at aggregation
points within a large European ISP. Our monitor, using Endace
monitoring cards, allows us to observe the trafﬁc of more than
20,000 DSL lines to the Internet. The data anonymization, clas-
siﬁcation, as well as application protocol speciﬁc header extrac-
tion and anonymization is performed immediately on the secured
measurement infrastructure using the Bro NIDS [27] with dynamic
protocol detection (DPD) [15].
We use an anonymized 24 h packet trace collected in March 2010
(MAR10) for detailed analysis of the protocol behavior. For study-
ing longer term trends, we used Bro’s online analysis capabilities
to collect an anonymized protocol speciﬁc trace summary (HTTP-
14d) spanning 2 weeks. Additionally, we collected an anonymized
5 day DNS trace (DNS-5d) in February 2010 to achieve a better un-
derstanding of how hostnames are resolved by different sites. Due
to the amount of trafﬁc at our vantage point and the resource inten-
sive analysis, we gathered the online trace summaries one at a time.
Table 1 summarizes the characteristics of the traces, including their
start, duration, size, and protocol volume. It is not possible to de-
termine the exact application mix for the protocol speciﬁc traces, as
we only focus on the speciﬁc protocol. However, we use full traces
to cross check the general application mix evolution.
2.1.1 Popular Services
With regards to the application mix, see Table 1, Maier et al. [24]
ﬁnd that HTTP, BitTorrent, and eDonkey each contribute a signif-
In MAR10 HTTP alone contributes al-
icant amount of trafﬁc.
most 60 % of the overall trafﬁc at our vantage point, BitTorrent
and eDonkey contribute more than 10 %. Similar protocol distribu-
tions have been observed at different times and at other locations
of the same ISP. Moreover, these observations are consistent with
23Table 1: Summaries of anonymized traces.
Name
MAR10
HTTP-14d
DNS-5d
Start date
Type
packet
Thu
log ﬁle Wed
packet Wed
Application Volume
Dur
04 Mar’10 2am 24 h
> 3 TB HTTP, > 5 GB DNS
09 Sep’09 3am 14 d > 200 GB corresponds to > 40 TB HTTP
24 Feb’10 4pm
> 25 GB DNS
Size
>5 TB
5 d
>25 GB
y
n
a
m
r
e
G
i
r
e
a
M
8
0
0
2
y
n
a
m
r
e
G
i
r
e
a
M
9
0
0
2
y
n
a
m
r
e
G
e
u
q
o
p
i
7
0
0
2
y
n
a
m
r
e
G
e
u
q
o
p
i
9
0
0
2
t
s
a
E
d
M
i
e
u
q
o
p
i
7
0
0
2
t
s
a
E
d
M
i
e
u
q
o
p
i
9
0
0
2
i
e
d
w
-
d
l
r
o
W
r
o
b
r
A
7
0
0
2
i
e
d
w
-
d
l
r
o
W
r
o
b
r
A
9
0
0
2
i
e
d
w
-
d
l
r
o
W
i
e
n
v
d
n
a
S
8
0
0
2
i
e
d
w
-