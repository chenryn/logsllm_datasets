  第15次查询   20170722 -- 20170723 1,000,020      1212ms        
  ------------ -------------------- -------------- ------------- -----------
变化值变化主要为查询数据量的差异，耗时会随数据量的增加而线性增长。
全天数据查询：
![](media/image3.png){width="5.775in" height="1.0541666666666667in"}
返回时长：
![](media/image4.png){width="5.770138888888889in"
height="0.7548611111111111in"}
**4.1.2 统计值查询**
**测试方法：**
在查询界面全局时间内进行统计查询，\*\|stats count() by
hostname，观察查询消耗时间，预估2.5亿数据，查询返回8s以内。
**查询语句：**
**"** \* \|stats count() by tag**"**
  ------------ ---------------------- ---------------- ----------- -----------
  测试周期     索引时间范围           机器数据总条数   查询耗时    平均耗时
  第1次查询    20170721 -- 20170722   108,492,156      6352ms      6392.4ms
  第2次查询    20170721 -- 20170722   108,492,156      6582ms      
  第3次查询    20170721 -- 20170722   108,492,156      6369ms      
  第4次查询    20170721 -- 20170722   108,492,156      6290ms      
  第5次查询    20170721 -- 20170722   108,492,156      6342ms      
  第6次查询    20170720 -- 20170722   135,446,082      9061ms      9001.6ms
  第7次查询    20170720 -- 20170722   135,446,082      8845ms      
  第8次查询    20170720 -- 20170722   135,446,082      9159ms      
  第9次查询    20170720 -- 20170722   135,446,082      8754ms      
  第10次查询   20170720 -- 20170722   135,446,082      9189ms      
  第11次查询   20170722 -- 20170723   1,000,020        879ms       985.4ms
  第12次查询   20170722 -- 20170723   1,000,020        1023ms      
  第13次查询   20170722 -- 20170723   1,000,020        925ms       
  第14次查询   20170722 -- 20170723   1,000,020        895ms       
  第15次查询   20170722 -- 20170723   1,000,020        1205ms      
  ------------ ---------------------- ---------------- ----------- -----------
全天数据统计查询：
![](media/image5.png){width="5.775in" height="1.09375in"}
返回时长：
![](media/image6.png){width="5.771527777777778in"
height="0.6590277777777778in"}
**4.1.3 定量查询**
**测试方法：**在查询界面指定时间内进行查询，指定数量，数据总量每次递增100万条，观察splserver机器数据查询消耗时间，计算平均耗时。。
**查询语句：**\*\|limit 1000000
**数据记录：**
  ---------- --------------- ----------- -------------------- ---------- -------------------
  场景编号   场景描述        查询语句    索引时间范围         数据总量   平均耗时(单位:ms)
  1.8        查询测试 -      \*\|limit   20170809--20170810   1000000    1327.6
             定量查询        1000000                                     
                                                              2000000    1423
                                                              3000000    1486.8
                                                              4000000    1569.2
                                                              5000000    1767.6
                                                              6000000    1828.4
                                                              7000000    1930.6
                                                              8000000    1940.8
                                                              9000000    1974.8
                                                              10000000   2018.8
  ---------- --------------- ----------- -------------------- ---------- -------------------
**测试结论：**定量查询返回结果时间随数据总量递增呈线性增长。
**4.2 指标采集能力试验**
客户端开启3进程，每进程48线程。每个线程循环读取apache日志，共7,000,000条，同步发送到broker，每条请求**5000**条数据。另起一脚本监控集群的文档量，每**3**s统计瞬时速度，并长期统计平均速度。
**4.3 测试结果**
![索引速度](media/image7.png){width="5.759722222222222in"
height="3.00625in"}
测试过程共耗时2000s，共灌入约15亿的数据，索引瞬时速度和平均速度如图。
瞬时速度最大832,971doc/s，最小617,703doc/s。灌入过程中，瞬时速度最大时单进程CPU使用率约2300%，最小时单进程CPU使用率约1600%。
整个测试过程中，平均速度为725,000doc/s。
测试过程中索引延时最小为592ms，最大为2200ms。
-   单个集群可搜索和统计的数据量达到数万亿条，索引大小达到2PB
```{=html}
```
-   单集群最多可支持数千个业务数据实时接入
-   单集群支持的统计指标达到数万个
-   每秒的吞吐量达到1000万条，峰值可达到2000万条
-   索引大小60GB时，查询时延100ms；
-   索引膨胀系数：1.69,带Replica的膨胀系数3.4
# 5 结语 {#结语 .list-paragraph}
利用大数据技术建立机器数据搜索分析平台是电力行业运维工作的发展方向，未来还需结合电力行业数据，利用数据分析作进一步研究，通过实践积累经验，完善机器数据搜索分析平台设计方案，通过大数据技术充分挖掘数据价值，提升运维工作效率。
参考文献
\[1\]吴秋莉 智能电网海量数据实时搜索技术研究 \[J\] 电力信息与通信技术
2016,12
\[2\]刘卫昌 马增良 企业综合自动化系统中实时数据库系统设计\[J\].
计算机应用研究 2005, 22(8): 146-149.
\[3 \]田保军，秦昊 实时数据存储管理的研究与设计\[J\].
内蒙古工业大学学报(自然科学版), 2010, 29(3): 180-181.
\[4\]王鹏；张利.大数据处理系统的研究进展与展望\[J\].高技术通讯,2015(Z1)
\[5\] 顾荣 大数据处理技术与系统研究\[D\] 南京：南京大学 2016