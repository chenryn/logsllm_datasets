公式2-4：测试中发现的缺陷的平均成本（Averagecostofatest
bug,ACTB)
发现成本+内部故障成本
ACTB=-
测试的缺陷
公式2-5：正式产品中发现的缺陷的平均成本（Averagecostofa
production bug,ACPB)
外部故障成本
ACTB=-
产品的缺陷
1837
---
## Page 1839
公式2-6：计算测试的投资回报率（TestROI）
（ACPB-ACTB）×测试的缺陷
测试ROI=
发现成本
在RBCS的评估和项目中，我和我的同事发现测试的投资回报率分布
在很低的25%～3500%这么大的区间里。一般来说，外部故障成本相
对于内部故障成本呈上升态势，那么测试的投资回报率也上升。换
句话说，一个组织正式产品中发现的缺陷的成本越大，越应该多投
资在测试上。在设定投资回报率的目标指标时必须小心。有时候对
测试投资回报率（发现缺陷的高效率）的优化可能会降低发现缺陷
百分比，或发现缺陷的侧重点，甚至两者（发现缺陷的有效性）都
有所降低。在评估中，如果测试团队有不错的测试投资回报率，我
们建议只做那些不会降低有效性的改动。我将在下一节讨论这样的
一个例子。现在走向测试之美的第三步，就是建立有效性和高效性
的指标及其目标。在本节中，我使用VictorBasili的“目标-问题-指标”
方法来完成这一点。你已经了解利益相关者的目标和期望，这些就
是“目标”。然后，你要回答什么问题才能知道测试是否达到这些目
标呢？最后，什么指标可以衡量出你完成这些目标的成功程度？这
样一来你可以通过什么能让利息相关者满意来衡量你的测试呢？这
多么美妙啊。
这还没完，你还要考虑美的优雅一面。建立一个优雅的价值体系，
优美地工作，针对利益相关者以服务为本，关注于对公司而言真正
要紧的事情上。多年前，有人发明了一个词叫无私编程。同样，测
试之美也是无私测试。在我们的评估中，RBCS顾问看到一些测试团
队的光辉典范，他们了解利益相关者，了解其目标和期望，并且了
解如何为这些目标和期望实现和衡量成功。这些客户几乎总是测试
得很漂亮。
什么美是内在美
对于测试之美，我们还需要考虑一个因素：内在美。让我们回到测
试团队就像奥运会的马拉松选手和铁人三项全能运动员的比喻。在
皮肤之下，其内部器官都为运动成绩贡献力量。肌肉需要长时间的
训练以提高耐力，消化系统将碳水化合物转化为肌肉的燃料和蛋白
质，并把水发送到人体各处以保持健康的水和作用。因此，我们可
1838
---
## Page 1840
以用消耗的热量、身体脂肪比例和长期的健康来衡量有效、高效和
优雅。
好的测试团队也会显示出类似的内在美。由于测试像是一场马拉
松，我们需要能坚持一个义一个项目的测试团队。
假设你得知你的团队花费了很大比例的时间做手工回归性测试，即
使缺陷发现指标表明不会有太多漏网的缺陷，但手工回归测试乏
味、昂贵、易出错、速度慢、消磨士气。所以，你决定用自动化来
减少手工测试，同时在产品中继续保持低回归风险。对这一目标而
言，你如何确定外界认为其有效和高效呢？
想想以下问题：
我们已经自动化了多大比例的回归测试？
我们覆盖了多大比例有关回归的质量风险？
我们还能加快多少自动回归测试？对于每个问题，制定一个指标。
首先是自动回归测试的百分比，如公式2-7。该指标通常不能也不应
该达到100%。因为有些测试在执行过程中需要人为判断或交互。我
们的许多客户做自动化回归测试达到90%。你需要做一些仔细的分
析来确定目标。
公式2-7：回归测试自动化的百分比（Regression testautomation
percentage,RTA)
自动化回归测试
RTA=
手动回归测试+目动化回归测试
测试自动化应保持或降低回归风险。所以，你应该衡量已经覆盖的
有关回归的质量风险的比例，如公式2-8所示。要计算这个值，你得
能掌握（自动和手工的）测试与其下回归风险之间的关系。（如果
你不熟悉这种测试和测试基础之间的可跟踪性思想，我的
《ManagingtheTestingProcess》（测试流程管理，微软出版社）中会
有所讲述。）
许多测试管理工具能够掌握测试的可追踪性并衡量测试的覆盖范
围。当你将越来越多的测试自动化，回归风险覆盖率指标至少应保
1839
---
## Page 1841
持不变或增加。
公式2-8：回归风险覆盖率（Regressionriskcoverage,RRC）
已覆盖的回归风险
RRC=-
识别出的回归风险
自动化回归测试也应该让回归测试执行得更快。你应该衡量回归测
试执行的加速比，如公式2-9。注意手工和自动的回归测试的执行时
间应该包括执行所有回归测试的时间，即使因为时间限制通常不会
运行所有回归测试。你应该要衡量达到相同的回归风险所节省的时
间。如果你还有一部分测试是手工的，你应该把执行它们的时间也
计算在自动化回归测试的时间之内，以保持此指标的准确性。
公式2-9：回归测试加速比（Accelerationofregression testing,ART）
手工回归测试时间+自动化回归测试时间
ART=-
手工回归测试时间
例如，假设需要20天来手工运行所有回归测试。现在，你可以在一
个晚上运行完，第二天就看到测试的结果分析。你取得了90%的回
归测试加速比。这确实极大地提开了效率。
注意，这个加速比不仅使测试更高效，它还使我们能够容忍不增加
回归风险的较大代码改动。这样做对团队实施敏捷方法至关重要，
没有良好的自动化回归测试，敏捷方法往往导致回归风险显著增
加，最后会在正式产品中发现回归缺陷。
此外，如果我们小心谨慎地对待自动化，上一节中提到的缺陷发现
和内部故障成本就会减少。因此，你可以用自动化回归测试，在不
影响有效性的情况下来提高你的效率。这不是很美吗？
走向测试之美的第四步。你可以从某个内部观点出发为测试团队设
定目标和期望，建立有效性和高效性指标以实现这些目标，并为这
些指标设立目标。那么你就有一套衡量测试的方法了，这能让你多
快好省地完成工作，这多么美妙啊。
1840
---
## Page 1842
不过，不要止步于此。我们又得考虑美的优雅一面，把它加到喜人
的元素中来。你和你的测试同事应当采用最先进的技术，让测试团
队成为测试最佳实践的典范。测试之美意味着工作在一个实践和推
进最先进测试的测试团队里。测试之美提高了所有测试人员的标
准。在测试大家庭中“美丽的”测试人员是乐意与同事们分享他们在
文章、书籍和培训课程中学到的测试知识的。
在评估中，我们有时看到一些测试团队，了解他们的利益相关者及
其目标和期望，有改进内部流程的目标和期望，并且知道如何实现
和衡量所有这些目标和期望的成功。他们把聪明、优雅、令人愉快
的工作风范融入到测试工作中。他们在测试领域中领先一步，并乐
于与他人分享这些领先之处。这些客户每天都在上演测试之美。
结论
测试有许多利益相关者。测试之美令这些利益相关者满意。测试人
员了解利益相关者及其对测试的目标和期望。测试人员与利益相关
者合作，以确保目标和期望切合实际，并确定指标来衡量有效性和
高效性。他还特别关注中立的利益相关者和反利益相关者。
测试人员还知道内部测试流程是如何支持有效性和高效性的，长期
以来一步一步进行改善。通过协力一致持之以恒地改进测试服务和
测试方法，他的工作很有效、高效、优雅。不仅他对自已的工作感
到高兴，其他利益相关者也为之高兴。这样的测试工作堪称美丽。
在这一章中，我讲了一些帮助你把测试变得更加美丽的目标及其指
标的一些想法。你最好进一步深化这些想法，因为这些目标和指标
只是一个起点。我建议你采用以下四个步骤来进行全面彻底的评
估，从而为测试之美的旅程揭开序幕：
1.了解你的利益相关者。
2.了解他们对测试的目标和期望。
3.为利益相关者的目标期望建立指标和目标（外在美）。
4.为测试的目标期望建立指标和目标（内在美）。
一旦你拥有了实现测试之美的框架，就朝那个方向努力吧。虽然不
是一朝一夕的事情，但这四个步骤能迅速地改善你的测试，给你惊
1841
---
## Page 1843
喜。
第3章创建开源的QA社区
MartinSchroder
Clint Talbert
一个并源项目的存亡取决于它的志愿者队伍。越轻量级的项目，越
是如此。随着我们开始使用越来越多的在线社交网络，我们有机会
去把每一个项目，甚至是那些传统意义上的闭源项目，变成一个大
众参与的项目。我们曾参与Mozilla日历项目，也就是一个Mozilla平
台上的日历程序。我们并发两个产品：一个独立运行的日历程序
在该项目的初期，有4个志愿开发人员，还雇用了两名专职的项目人
员。唯一的质量保证（qualityassurance,QA）就是有1个人交替测试
新的功能并根据紧迫性和严重性为新出现的缺陷设定优先级。随着
代码库逐渐成熟，这条聊胜于无的QA之路很明显已经走到头了。我
们决定为日历项目创建一个QA团队。大概花了近6个月，我们才让
一个负责日常QA的团队运转起来。
这一过程很美，无论是在最困难时期还是在最成功时期都是如此。
交流
项目中的交流是至关重要的。我们使用互联网中继聊天（Internet
relaychat,IRC）作为主要交流手段。在IRC，你登录到一个论坛，在
那里所有登录的用户都可以看到彼此间实时的交谈。有一个机制让
社区与你互动是很重要的，社区中成员的相互交流同样如此。如果
人们觉得自己是“大项目”中的一员，他们会从此与大家站在一条战
线上，成为竭力奉献的志愿者。
至于其他交流手段，因为我们做的是质量保证的工作，缺陷追踪系
统几乎充当了一个社交网络站点。我们使用Bugzilla，在每个缺陷的
评论部分往往总会有对好多缺陷的讨论。
一般来说，在互联网上的交流，特别是IRC，总有某些方面的限制需
要解决。在任何电子媒介中，人的情绪都是难以衡量的，分歧很容
1842
---
## Page 1844
易引起争执。请注意，除非问过，否则你永远不会知道志愿者的母
语是什么，因此放手让他们怀疑并努力消除各种误解。很早以前我
们就发现便语不好翻译，所以你得谨慎使用和解释其含义。
如果你有机会与志愿者见面，或组织一个志愿者会议，你应该排除
万难去参加。我们的所有技术都还不能替代面对面的交流，所以如
果你能让社区的人聚一聚，这将大大激励他们为项目发热发光。
志愿者