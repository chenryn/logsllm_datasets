0
2
−
7
0
7
1
0
2
−
0
1
8
1
0
2
−
1
0
8
1
0
2
−
4
0
8
1
0
2
−
7
0
Date (MM−YYYY)
5
1
0
2
−
0
1
6
1
0
2
−
1
0
6
1
0
2
−
4
0
6
1
0
2
−
7
0
6
1
0
2
−
0
1
7
1
0
2
−
1
0
7
1
0
2
−
4
0
7
1
0
2
−
7
0
7
1
0
2
−
0
1
8
1
0
2
−
1
0
8
1
0
2
−
4
0
8
1
0
2
−
7
0
Date (MM−YYYY)
(a) Microsoft IPv4
(b) Microsoft IPv6
Figure 5: Median RTTs by continents for Microsoft (IPv4 and IPv6) and Apple.
5
1
0
2
−
7
0
5
1
0
2
−
0
1
6
1
0
2
−
1
0
6
1
0
2
−
4
0
6
1
0
2
−
7
0
6
1
0
2
−
0
1
7
1
0
2
−
1
0
7
1
0
2
−
4
0
7
1
0
2
−
7
0
7
1
0
2
−
0
1
8
1
0
2
−
1
0
8
1
0
2
−
4
0
8
1
0
2
−
7
0
Date (MM−YYYY)
(c) Apple
AF AS EU OC SA NA
EC−>Other Other−>EC
N
D
C
y
a
d
f
o
r
e
p
n
e
e
s
s
r
e
v
r
e
s
r
e
b
m
u
n
e
g
a
r
e
v
A
AF AS EU OC SA NA
6
4
2
0
5
1
0
2
−
9
0
5
1
0
2
−
0
1
5
1
0
2
−
1
1
5
1
0
2
−
2
1
6
1
0
2
−
1
0
6
1
0
2
−
2
0
6
1
0
2
−
3
0
6
1
0
2
−
4
0
6
1
0
2
−
5
0
6
1
0
2
−
6
0
Time
100
T
T
R
w
e
N
T
T
R
d
O
/
l
5
1
0
2
−
9
0
5
1
0
2
−
0
1
5
1
0
2
−
1
1
5
1
0
2
−
2
1
6
1
0
2
−
1
0
6
1
0
2
−
2
0
6
1
0
2
−
3
0
6
1
0
2
−
4
0
6
1
0
2
−
5
0
6
1
0
2
−
6
0
Time
Figure 6: (a) Average probability of seeing the dominant CDN server preﬁx (/24)
by a client in a day (prevalence). (b) Average number of CDN server preﬁxes seen
by each client in a day.
)
s
m
(
T
T
R
n
a
e
M
200
150
100
50
0
Africa
Asia
South America
0.25 0.50 0.75 1.00 0.25 0.50 0.75 1.00 0.25 0.50 0.75 1.00
Prevalence of the dominant server
Figure 7: Relationship between CDN server prevalence and RTT for developing
regions.
Level3−>Other Other−>Level3
Asia
F
D
C
1.00
0.75
0.50
0.25
0.00
Africa
0.01
10000.00
1.00
100.00
1.00
0.75
0.50
0.25
0.00
10000.00
0.01
1.00
100.00
Old RTT/New RTT
1.00
0.75
0.50
0.25
0.00
Oceania
0.01
10000.00
1.00
100.00
Figure 8: Change in latency observed by clients migrating away and from Level 3.
edge caches and local ISP caches). We ﬁnd that in 73% of cases,
migration towards edge caches leads to improved RTTs for African
clients. Migration towards edge caches also leads to improvements
in RTT for clients in Oceania and Asia in 76% and 64% of cases,
respectively. Additionally, clients suffering with high RTTs beneﬁt
the most from migrating to edge caches. Figure 9 shows the change
in RTT observed by African clients who had high RTTs (greater than
200 ms) before the migration occurred. Clients that migrated towards
edge caches (Other!EC) in 2017 saw an average improvement
of 10X to 100X in RTTs. This observation is in agreement with
10
1
5
1
0
2
t
c
O
5
1
0
2
c
e
D
6
1
0
2
b
e
F
6
1
0
2
r
p
A
6
1
0
2
n
u
J
6
1
0
2
g
u
A
6
1
0
2
p
e
S
6
1
0
2
v
o
N
Time
7
1
0
2
n
a
J
7
1
0
2
r
a
M
7
1
0
2
y
a
M
7
1
0
2
l
u
J
7
1
0
2
g
u
A
7
1
0
2
t
c
O
Figure 9: Change in RTT of African clients when they migrate from towards edge
caches (Other!EC) and when they migrate away from edge caches (EC!Other).
In 2017, the average improvement in RTT when clients migrated towards edge
caches was between 10 and 100X.
the intuition that moving content closer to clients, especially in
developing regions, improves client performance.
7 CONCLUSION
We perform a longitudinal analysis of distribution and performance
of CDNs used by two large content providers, Microsoft and Apple.
We ﬁnd differences in their strategies of pushing software updates
to clients. Microsoft makes extensive use of edge caches to put
content closer to customers while most Apple clients from across
the world receive content from Apple’s own networks. As we dig
into the performance received by Microsoft’s clients in developing
regions, we observe that while there is a downward trend in latency,
there is room for improvement. Our analysis shows that clients
migrating towards edge cache deployments for receiving content
observe major improvements in performance. However, non-North
American clients experience high latency when served content from
the large ISP Level 3. This is especially important for continents such
as Asia and Africa, where a signiﬁcant number of clients receive
Microsoft’s updates from Level 3.
ACKNOWLEDGEMENTS
We would like to thank Emile Aben, Sharad Agarwal, and David
Jensen for their feedback on this work. We also thank our shepherd
Philipp Richter and the anonymous IMC reviewers for their
feedback. This work was funded by NSF Grants: CNS 1700657,
CNS-1651784, CNS-1719386, CNS-1740895, and a Google Faculty
Research Award. Rachee Singh is funded by a Google PhD
fellowship.
REFERENCES
[1] Erik Nygren, Ramesh K. Sitaraman, and Jennifer Sun. The Akamai Network: A
Platform for High-performance Internet Applications. SIGOPS Oper. Syst. Rev.,
44(3):2–19, August 2010.
[2] Noe Garcia. A Quick Guide to Multi-CDNs: What to Consider, What Kind to
Deploy. https://www.maxcdn.com/blog/multi-cdns/, 2017. Online; accessed June
2017.
[3] Emile Aben. RIPE 71, Measuring Multi-CDNs. https://ripe71.ripe.net/presentatio
ns/67-2015-11.multicdn.emileaben.pdf, 2015. Online; accessed May 2017.
[4] Google Public DNS. https://developers.google.com/speed/public-dns/.
[5] Fangfei Chen, Ramesh K. Sitaraman, and Marcelo Torres. End-User Mapping:
Next Generation Request Routing for Content Delivery. In Proceedings of the 2015
ACM Conference on Special Interest Group on Data Communication, SIGCOMM
’15, pages 167–181, New York, NY, USA, 2015. ACM.
[6] Matt Calder, Ashley Flavel, Ethan Katz-Bassett, Ratul Mahajan, and Jitendra
Padhye. Analyzing the Performance of an Anycast CDN. In Proceedings of the
2015 ACM Conference on Internet Measurement Conference, IMC ’15, pages
531–537, New York, NY, USA, 2015. ACM.
[7] CAIDA. Inferred AS to Organization Mapping Dataset. http://www.caida.org/da
ta/as-organizations/, 2017. Online; accessed June 2017.
[8] Andrew Horton. WhatWeb - Next Generation Web Scanner. https://github.com/u
rbanadventurer/WhatWeb, 2017. Online; accessed May 2017.
[9] Visible ASNs: Customer Populations. http://http://stats.labs.apnic.net/aspop. On-
line; accessed September 2018.
[10] Xun Fan, Ethan Katz-Bassett, and John Heidemann. Assessing afﬁnity between
users and cdn sites. In International Workshop on Trafﬁc Monitoring and Analysis,
pages 95–110. Springer, 2015.
[11] Vern Paxson. End-to-End Routing Behavior in the Internet. ACM SIGCOMM
Computer Communication Review, 26(4):25–38, 1996.
[12] Matt Calder, Ryan Gao, Manuel Schröder, Ryan Stewart, Jitendra Padhye, Ratul
Mahajan, Ganesh Ananthanarayanan, and Ethan Katz-Bassett. Odin: Microsoft’s
scalable fault-tolerant CDN measurement system. In 15th USENIX Symposium
on Networked Systems Design and Implementation (NSDI 18), pages 501–517,
Renton, WA, 2018. USENIX Association.
[13] Rupa Krishnan, Harsha V. Madhyastha, Sridhar Srinivasan, Sushant Jain, Arvind
Krishnamurthy, Thomas Anderson, and Jie Gao. Moving Beyond End-to-End
Path Information to Optimize CDN Performance. In ACM IMC, 2009.