# 戴文的Linux内核专题：23 配置内核 (19)

欢迎继续阅读我们的Linux内核系列文章。在这篇文章中，我们将探讨固件驱动和文件系统驱动的配置选项，这标志着我们接近整个配置过程的尾声。

## 固件驱动

### 启动盘检测
BIOS增强磁盘驱动（BIOS Enhanced Disk Drive, EDD）调用可以确定启动盘。在某些情况下，Linux可能无法识别哪个磁盘是启动盘。通过启用此驱动，内核可以从BIOS获取这些信息，并将其存储在sysfs上，以便正确设置引导加载程序。即使BIOS EDD服务已编译到内核中，也可以选择禁用EDD功能。

### kexec支持
当使用kexec加载不同的内核时，可以通过固件提供的内存映射来提升性能。这一选项将内存映射添加至sysfs，以供系统访问。

### Dell硬件管理
“Dell Systems Management Base Driver”提供了对Dell硬件更好的控制，通过sysfs接口暴露硬件信息。启用此驱动后，用户空间可通过`/sys/class/dmi/id/`访问硬件详细信息。DMI代表桌面管理接口，它规范了硬件组件的数据管理和访问方式。SMBIOS（System Management BIOS）标准进一步定义了BIOS中数据与硬件的交互规则。此外，还可以直接从DMI表中读取原始数据。

### iSCSI启动支持
为实现从iSCSI驱动器启动，需要启用相关驱动程序。

### Google专有硬件
"Google Firmware Drivers"适用于特定于Google的硬件。除非你为Google工作或拥有其专用设备，否则无需启用此类驱动。

## 文件系统驱动

### EXT系列文件系统
- **EXT2** 支持基本的第二扩展文件系统。
- **EXT2扩展属性** 允许使用额外的元数据。
- **POSIX ACLs for EXT2** 提供非原生权限模型。
- **安全标签** 增强了SELinux的安全性。
- **就地执行支持** 使可执行文件可以直接在其所在位置运行，而无需先加载到页缓存。

对于**EXT3**，除了上述特性外，还包括：
- **日志记录文件系统支持**
- **默认数据排序模式** 设置为"Ordered"，确保数据写入顺序符合日志记录要求。
- **JBD/JBD2调试支持** 用于块设备日志记录的调试。

**EXT4** 则进一步继承了所有前述特性，并增加了调试支持。

### ReiserFS
Reiser文件系统同样具备类似的扩展属性、ACL以及安全标签等特性，并且还提供了调试模式及统计信息输出。

### JFS 和 XFS
这两个文件系统均支持POSIX ACLs、安全标签、调试选项及统计收集等功能。

### GFS2 和 OCFS2
- **GFS2** 是一种集群共享存储解决方案，包含分布式锁管理机制。
- **OCFS2** 也面向集群环境设计，提供用户空间集群支持、统计信息展示及日志记录等功能。

### Btrfs
Btrfs是一个正在开发中的下一代文件系统，旨在超越EXT4成为主流。当前版本尚不稳定，但已经实现了POSIX ACLs和其他高级特性如完整性检查工具。

### NILFS2
NILFS2是一种基于日志结构的文件系统，支持连续快照创建。

### POSIX文件锁定API
启用此选项可支持flock()系统调用，允许进程在某一时刻独占文件资源。禁用该功能会减少约11KB的内核大小。

### 文件系统通知机制
- **Dnotify** 是一个较老的通知系统，现已逐步被Inotify取代。
- **Inotify** 提供更高效的文件系统事件监听能力。
- **Fanotify** 则进一步增强了Inotify的功能，提供更多关于文件访问的信息。

### 磁盘配额
为了实现存储空间划分，可以启用配额支持及相关警告报告机制。同时，也支持旧版配额格式以保证兼容性。

### 自动挂载远程存储
自动挂载远程存储单元的能力由特定内核模块提供。

### FUSE文件系统
FUSE允许用户在用户空间内创建并运行自定义文件系统，包括字符设备的支持。

下一篇文章将继续讨论缓存、光盘文件系统以及其他有趣的主题。感谢您的关注！

---

via:  
译者：[geekpi](https://github.com/geekpi) 校对：[wxy](https://github.com/wxy)  
本文由 [LCTT](https://github.com/LCTT/TranslateProject) 原创翻译，[Linux中国](http://linux.cn/) 荣誉推出