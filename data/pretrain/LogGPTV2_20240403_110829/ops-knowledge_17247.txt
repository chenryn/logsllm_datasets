User: 请回答以下安全问题使用域凭据的RDP身份验证域中的RDP有一些问题我无法理解。在身份验证过程中，如果我们使用远程机器的本地帐户，那么信誉在SAM中，所以一切都很好。
但与域名账户相比，如何做比较？在这种情况下，RDP身份验证是如何工作的？
好心的

Assistant: RDP使用名为CredSSP的协议来委派凭据。这个过程是这样运作的。
MSTSC提示输入凭据（或使用保存的凭据）
MSTSC使用（1）中的凭据向键入“计算机”字段的计算机请求网络登录票证（Kerberos或NTLM）
与远程计算机建立TLS会话（这就是为什么有时会看到黄色对话框，指示键入的名称与证书名称不匹配）
发送来自（2）的票证以验证客户端计算机
对来自（2）的票证的响应被发送到客户端以验证目标机器
客户端和服务器之间协商加密密钥
客户端对（1）中键入的凭据进行加密
目标解密凭据并将其传递给登录进程
登录过程对这些凭据进行Kerberos身份验证并启动桌面会话
最后一点和你走到电脑前，亲自输入凭据没有什么不同。您也可以用智能卡或证书代替密码。
此交换的安全性在于，您使用Kerberos来验证目标计算机的身份是否为您信任的计算机，因为该名称与Active Directory中的某个服务匹配（是的，您正在委派该信任决定，但如果您不能信任AD，您无论如何都会失败）。