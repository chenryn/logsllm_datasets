# OCR Output
## Page 1
DetailedSolutionsinEigbt
ProgrammingLanguages
puz.
Regular
Expressions
Cookbook
JanGoyvaerts
O'REILLY?
StevenLevithan
---
## Page 2
Programming
RegularExpressionsCookbook
Regularexpressions
areatimeless
Take the guesswork out of using regular expressions. With more
than 1i0 proven recipes, this cookbook provides everything you
tecbnology,and tbe
need to solve a wide range of real-world problems. Novices will
learn basic skills and tools, anxd programmers and cxpcricnccd
Regular Expressions
users will find a wealth of detail. Each recipe provides samples you
Atwe x8 asn ue
Cookbookwillsurely
This reviscd edition covers thc regular exprcssion flavors uscd by
C=, Java, JavaScripx, Perl, PHP, Python, Ruby, and VB.NET. You'll
provetobea
lcarn powerful ncw tricks, avoid flavor-spccific gotchas, andl save
valuable time with this huge library of practical solutions,
consistentsourceo
botbinformation
 Learn regular expression basics through a detailed tutorial
 Use code listings to implement regular expressions with your
andinspirationfor
language of choice
Understand how regular expressions differ from language
to language
—Ben Nadel
 Handle common user input with recipes for validlation and
Chiefsoftwure engineer at
formatting
Epicenter Consulting
Find and manipulate words, special characters, and lines of text
Detect integers, floating-point numbers, and other numerical
formats
 Parse source code and process log files
 Use regular expressions in URLs, paths, and IP addresses
 Manipulate HTML, XML, and data exchange formats
Discoverlittle-known regular expression tricks and techniques
Jan Goyvaerts runs Just Great Software, where he designs and
dlevelops some of the most popular rcgular cxpression software.
Steven Levithan is a lcading JavaScript rcgular cxpression expert
and creator of several open source regular cxpression tools.
Twitter: @oreillymedia
facebook.com/oreilly
US $49.99
CAN $52.99
ISBN : 9781449319434
O'REILLY
oreilly.com
---
## Page 3
SECONDEDITION
RegularExpressionsCookbook
JanGoyvaertsandStevenLevithan
O'REILLY
Beijing · Cambridge - Farnham • Koln • Sebastopol - Tokyo
---
## Page 4
Regular Expressions Cookbook, Second Edition
by Jan Goyvaerts and Steven Levithan
Copyright  2012 Jan Goyvaerts, Steven Levithan. All rights reserved.
Printed in the United States of America.
Published by O'Reilly Media, Inc., 1005 Gravenstein Highway North, Sebastopol, CA 95472.
O°Reilly books may be purchased for educational, busines, or sales promotional use. Online editions
are also available for most titles (http/ny.safizriboolsoline.co). For more information, contact our
corporate/institutional sales department: 800-998-9938 or corporare(@oreilly.cor.
Editor: Andy Oram
Indexer: BIM Publishing Services
Production Editor: Holly Bauer
Cover Designer: Karen Montgomery
Proofreader: BIM Publishing Scrvices
Copyeditor:
Genevieve d’Entremont
Interior Designer: David Futato
Illustrator: Rebecca Demarest
August 2012:
Second Edition.
Revision History for the Second Edition:
2012-08-10
First release
See htp://oreilly.cowu/catafog/errata.csp?isbm=97814493194.34 for release details.
O°Reilly Media, Inc. Regalar Expressions Cookbook, the image of a musk shrew, and related trade dress
Nutshell Handbook, the Nutshell Handbook logo, and the O'Reilly logo are registered trademarlks of
are trademarks of O°Reilly Media, Inc.
Many of the designations used by manufacturers and sellers to distinguish their products are claimed as
trademarks. Where those designations appear in this book, and O'Reilly Media, Inc., was aware of a
trademark claim, the designations have been printed in caps or initial caps.
While every precaution has been taksen in the preparation of this book, the publisher and authors assume
no responsibility for errors or omissions, or for damages resulting from the use of the information con-
tained herein.
ISBN: 978-1-449-31943-4
[1.S1]
1344629030
---
## Page 5
Table of Contents
ix
1.Introduction to Regular Expressions..........
Regular Expressions Defined
1
Search and Replace with Regular Expressions
6
Tools for Working with Regular Expressions
8
2. Basic Regular Expression Skills 
27
2.1 Match Literal Text
28
2.2 Match Nonprintable Characters
30
2.3 Match One of Many Characters
2.4 Match Any Character
38
2.5 Match Something at the Start and/or the End of a Line
40
2.6 Match Whole Words
45
2.7 Unicode Code Points, Categories, Blocks, and Scripts
48
2.8 Match One of Several Alternatives
62
2.9 Group and Capture Parts of the Match
9
2.10 Match Previously Matched Text Again
66
2.11 Capture and Name Parts of the Match
68
2.12 Repeat Part of the Regex a Certain Number of Times
72
2.13 Choose Minimal or Maximal Repetition
75
2.14 Eliminate Needless Backtracking
78
2.15 Prevent Runaway Repetition
81
2.16 Test for a Match Without Adding It to the Overall Match
8
2.17 Match One of Two Altematives Based on a Condition
91
2.18 Add Comments to a Regular Expression
E6
2.19 Insert Literal Text into the Replacement Text
95
2.20 Insert the Regex Match into the Replacement Text
86
2.21 Insert Part of the Regex Match into the Replacement Text
66
2.22 Insert Match Context into the Replacement Text
103
---
## Page 6
3.
Programming with Regular Expressions ..
105
Programming Languages and Regex Flavors
105
3.1 Literal Regular Expressions in Source Code
111
3.2 Import the Regular Expression Library
117
3.3 Create Regular Expression Objects
119
3.4 Set Regular Expression Options
126
3.5 Test If a Match Can Be Found Within a Subject String
133
3.6 Test Whether a Regex Matches the Subject String Entirely
140
3.7 Retrieve the Matched Text
144
3.8 Determine the Position and Length of the Match
151
3.9 Retrieve Part of the Matched Text
156
3.10 Retrieve a List of All Matches
164
3.11 Iterate over All Matches
169
3.12 Validate Matches in Procedural Code
176
3.13 Find a Match Within Another Match
179
3.14 Replace All Matches
184
3.15 Replace Matches Reusing Parts of the Match
192
3.16 Replace Matches with Replacements Generated in Code
197
3.17 Replace All Matches Within the Matches of Another Regex
203
3.18 Replace All Matches Berween the Matches of Another Regex
206
3.19 Split a String
211
3.20 Split a String, Keeping the Regex Matches
219
3.21 Search Line by Line
224
3.22 Construct a Parser
228
4.Validation and Formatting ..........
243
4.1 Validate Email Addresses
243
4.2 Validate and Format North American Phone Numbers
249
4.3 Validate Intermational Phone Numbers
254
4.4 Validate Traditional Date Formats
256
4.5 Validate Traditional Date Formats, Excluding Invalid Dates
4.6 Validate Traditional Time Formats
260
266
4.7 Validate ISO 8601 Dates and Times
269
4.8 Limit Input to Alphanumeric Characters
275
4.9 Limit the Length of Text
278
4.10 Limit the Number of Lines in Text
283
4.11 Validate Affirmative Responses
288
4.12 Validate Social Security Numbers
289
4.13 Validate ISBNs
292
4.14 Validate ZIP Codes
300
4.15 Validate Canadian Postal Codes
301
4.16 Validate U.K. Postcodes
302
4.17 Find Addresses with Post Office Boxes
iv   Table of Contents
---
## Page 7
4.18 Reformat Names From *FirstName LastName" to *LastName,
FirstName”
305
4.19 Validate Password Complexity
80
4.20 Validate Credit Card Numbers
317
4.21 European VAT Numbers
323
5.Words, Lines, and Special Characters ...
331
5.1 Find a Specific Word
331
5.2 Find Any of Multiple Words
5.3 Find Similar Words
336
5.4 Find All Except a Specific Word
340
5.5 Find Any Word Not Followed by a Specific Word
342
5.6 Find Any Word Not Preceded by a Specific Word
5.7 Find Words Near Each Other
5.8 Find Repeated Words
355
5.9 Remove Duplicate Lines
899
5.10 Match Complete Lines That Contain a Word
362
5.11 Match Complete Lines That Do Not Contain a Word
9
5.12 Trim Leading and Trailing Whitespace
365
5.13 Replace Repeated Whitespace with a Single Space
369
5.14 Escape Regular Expression Metacharacters
371
375
6.1 Integer Numbers
375
6.2 Hexadecimal Numbers
379
6.3 Binary Numbers
381
6.4 Octal Numbers
8
6.5 Decimal Numbers
8
6.7 Numbers Within a Certain Range
6.6 Strip Leading Zeros
385
98
6.8 Hexadecimal Numbers Within a Certain Range
392
6.9 Integer Numbers with Separators
395
6.10 Floating-Point Numbers
396