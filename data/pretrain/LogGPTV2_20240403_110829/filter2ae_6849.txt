# 手把手教你如何从Whois数据中收集到有价值的情报
|
##### 译文声明
本文是翻译文章，文章来源：webbreacher
原文地址：
译文仅供参考，具体内容表达以及含义原文为准。
前言
在我的日常工作中，我经常需要去查找某些域名是否已经被我们公司的员工注册了。由于公司的组成结构和部门划分的问题，可能公司已经有人注册过这些域名了，可是我们有时却无法在第一时间得知这些信息。
现在很多公司或个人都会选择使用
GoDaddy，PSI，或者1&1等全球域名注册服务商来进行域名注册和登记。与此同时，我们也经常需要查找与某一邮箱地址（例如“@公司名称.com”）有关的域名注册信息。当我弄清楚了如何来查找这些敏感信息之后，我发现了一些非常有趣的事情。所以在这篇文章中，我将会告诉大家如何来收集这些域名注册信息，并从中发掘出更多有意思的内容。
什么是域名注册？
这一章的内容是写给某些初学者看的，因为有的读者可能还不知道如何去注册一个域名。当某人需要注册一个类似“webbreacher.com”或者“osint.ninja”这样的域名时，他们往往会选择通过例如GoDaddy或者Network
Solutions这样的全球顶级域名注册服务商来进行域名注册。注册完成之后，这个域名就归属于注册者所有了，而域名服务商需要将该域名标记为属于某一特定的个人或者企业组织。
在注册的过程中，我们通常需要将一些个人信息或者公司信息提供给域名注册商，因为域名注册商需要用我们的信息来为我们进行域名注册操作。目前绝大多数的域名注册服务商首先会要求你输入你的信用卡信息，其次是一些个人信息，例如姓名，家庭住址／公司地址，联系电话，以及电子邮箱等。
域名注册是互联网中用于解决地址对应问题的一种方法。域名注册遵循先申请先注册原则，管理机构对申请人提出的域名是否违反了第三方的权利不进行任何实质审查。每个域名都是独一无二的，不可重复的。因此，在网络上，域名是一种相对有限的资源，它的价值将随着注册企业的增多而逐步为人们所重视。在新的经济环境下，域名所具有的商业意义已远远大于其技术意义，而成为企业在新的科学技术条件下参与国际市场竞争的重要手段
，它不仅代表了企业在网络上的独有的位置
，也是企业的产品、服务范围、形象、商誉等的综合体现，是企业无形资产的一部分。除此之外，域名也是工作人员的一种智力成果。
关于域名注册过程中的个人信息问题
当你需要注册一个域名时，你可以要求域名注册服务商隐藏你在购买域名时所提供的个人信息，而且服务商也确实会给你提供这样的选项，这样做的确可以从一定程度上保护你个人信息的安全。但值得注意的是，有的域名服务商实际上并不会使用你所提供的信息来进行域名注册，他们会使用自己的信息，然后在内部系统中进行数据追踪。这样一来，到底谁才是这个域名真正的拥有者呢？
隐藏注册信息这一功能也就引出了我们现在所要解决的问题：公司的员工到底有没有使用公司的信息和电子邮箱来注册域名呢？
Whois又是什么？  
简而言之，Whois实际上就是一个用来查询域名注册信息的工具。我们可以在Unix、Linux、以及Mac系统上使用Whois来查询域名的IP地址和域名所有者的具体信息。用户可以在命令行或者终端窗口中输入例如“whois
example.com”这样的命令，Whois就会将该域名的注册信息返回给用户。返回信息包括注册者的姓名、邮箱地址、联系电话，以及其他的一些信息。当然了，如果注册者使用了域名服务商的信息隐藏功能，那么我们也就无法得到有效的返回数据了。
但我得提醒一下各位，Whois数据库中含有大量老旧数据，而且还有很多错误数据。很多域名注册服务商在进行域名注册时，根本不会对这些注册信息的有效性进行检查。假如我现在想注册“insertmydomainhere.info”这个域名，然后地址填写的是“美国华盛顿特区宾夕法尼亚大道1600号”（白宫的地址…..）。有的服务商根本就不会检测你填写的信息是否真实有效，他们只会高高兴兴地拿钱做事。所以无论Whois返回了什么样的查询数据，你始终不能完全相信这些数据，除非你能够通过收集其他的数据来验证这些信息的有效性。
当然了，无论如何，Whois都是一款非常棒的工具。我现在需要使用Whois来搜索与我公司电子邮件地址有联系的域名，为了完成我的任务，我可能得查询无数的域名地址，然后看看是否能够从中找到与我公司邮箱地址有关的域名信息。当然了，这几乎是一份不可能完成的任务。
ViewDNS.info  
在这里，我要给大家介绍一个非常棒的网站－[ViewDNS.info](http://viewdns.info/)。这个网站允许我们使用域名注册者的信息和通配符（例如“*”）来查询域名数据。举个例子，假如我们现在要查询那些域名使用了形如“dhs.gov”这样的信息，那么[ViewDNS页面](http://viewdns.info/reversewhois/?q=%40dhs.gov)将会返回前五百个符合搜索条件（即@dhs.gov字符串）的域名。下图即为我们的搜索结果：
这样一来，我就可以节省下大量的时间了。ViewDNS还提供了大量功能非常丰富的API接口，我们可以通过一些简单的脚本和程序来使用这些API，并导出XML或JSON格式的数据。
虽然我很开心，但同时我也很困惑，因为我感觉ViewDNS.info的数据也存在错误。在上面这张图片的底部，你可以看到fema.net这个域名，这个域名的注册信息中也包含有字符串“@dhs.gov”。实际上这也能说得通，因为fema.net可能使用了DHS服务，那么为了防止他人注册虚假域名，公司很可能会将其他相似的域名购买下来。但是你发现了吗？为什么“farrellswebservice.com”和“celticwarriorsmc.com”这两个域名看起来不像是DHS域名呢？
接下来，让我们在命令行中使用whois来查询关于“farrellswebservice.com”域名的信息。
好吧，我发现是我多虑了，网站的数据没有任何问题。在上方红色箭头指向的地方，你可以看到一个含有“@dhs.gov”的电子邮箱账号，所以ViewDNS.info才会将这个域名返回给我们。
开启我们的OSINT之旅（公开资源情报计划）  
可能有的朋友会觉得－“这又如何？”好吧！当我们在进行公开资源情报收集活动时，我们往往需要将各种零散的数据拼凑起来，目标的电子邮箱地址、联系电话、以及住址等信息都是我们进行深入调查的关键点。我们可以将这些数据作为一个支点，并以此来丰富我们所收集到的情报数据。
那么接下来该怎么做呢？在此需要注意的是，很多人都会用他们的工作邮箱来进行与工作无关的账号注册活动。虽然我只会在工作过程中使用我的工作邮箱，但是我知道很多其他的人会在工作之外的地方使用他们的工作账号。
如何使用这些数据？
好的，既然我们可以通过一个电子邮箱地址来获取到相关的域名注册信息。那么我们先整理一下我们所获取到的信息。
我们现在得到了：
－注册者的姓名
－家庭住址
－联系电话（可能是工作电话，也可能是个人电话）
－电子邮箱地址（可能是工作邮箱，也可能是个人邮箱）
－个人爱好
－家庭照片
－有的时候我们还会得到很多其他有价值的数据
攻击者可以用这些数据来实现：
－在对某一目标实施网络攻击或者物理攻击之前，收集有价值的情报信息。
－攻击者可以根据这些情报数据来为攻击目标设计出专门用于网络钓鱼攻击的电子邮件或者恶意脚本。
－社会工程学攻击
－网络间谍活动等等
总结  
如何防止这这种事情发生在你身上？很多域名注册服务商都提供了类似“域名信息隐藏”这样的功能，所以你可以隐藏这些信息。当他人试图查询你的域名信息时，显示的将是域名服务商的信息。
除此之外，我们也应该尽量避免在非工作情况下使用工作信息，尤其是当这些数据极有可能变为公开数据时。
如果你对这一话题感兴趣的话，欢迎各位在Twitter上@我。（@[OsintNinja](https://twitter.com/osintninja)或者@[Webbreacher](https://twitter.com/webbreacher)）