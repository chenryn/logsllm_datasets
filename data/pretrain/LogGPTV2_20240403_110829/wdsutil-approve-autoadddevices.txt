wdsutil approve-autoadddevices
Applies to: Windows Server 2022, Windows Server 2019, Windows Server 2016, Windows Server 2012 R2, Windows Server 2012
Approves computers that are pending administrative approval. When the Auto-add policy is enabled, administrative approval is required before unknown computers (those that are not pre-staged) can install an image. You can enable this policy using the PXE Response tab of the server s properties page.
Syntax
wdsutil [Options] /Approve-AutoaddDevices [/Server:] /RequestId:{| ALL} [/MachineName:] [/OU:] [/User:] [/JoinRights:{JoinOnly | Full}] [/JoinDomain:{Yes | No}] [/ReferralServer:] [/BootProgram:] [/WdsClientUnattend:] [/BootImagepath:]
Parameters
Parameter
Description
/Server:
Specifies the name of the server. This can be the NetBIOS name or the FQDN. If no server name is specified, the local server is used.
/RequestId:{Request ID|ALL}
Specifies the request ID assigned to the pending computer. Specify ALL to approve all pending computers.
/Machinename:
Specifies the name of the device to be added. You can't use this option when approving all computers.
[/OU:]
The distinguished name of the organizational unit where the computer account object should be created. For example: OU=MyOU,CN=Test, DC=Domain,DC=com. The default location is the default computer's container.
[/User:]
Sets permissions on the computer account object to give the specified user the necessary rights to join the computer to the domain.
[/JoinRights:{JoinOnly|Full}]
Specifies the type of rights to be assigned to the user.JoinOnly - Requires the administrator to reset the computer account before the user can join the computer to the domain.Full - Gives full access to the user, which includes the right to join the computer to the domain.
[/JoinDomain:{Yes|No}]
Specifies whether the computer should be joined to the domain as this computer account during operating system installation. The default value is Yes.
[/ReferralServer:]
Specifies the name of the server to contact to download the network boot program and boot image by using Trivial File Transfer Protocol (tftp).
[/BootProgram:]
Specifies the relative path from the remoteInstall folder to the network boot program that this computer should receive. For example: boot\x86\pxeboot.com.
[/WdsClientUnattend:]
Specifies the relative path from the remoteInstall folder to the unattend file that automates the Windows Deployment Services client.
[/BootImagepath:]
Specifies the relative path from the remoteInstall folder to the boot image that this computer should receive.
{Request ID|ALL}
{JoinOnly|Full}
{Yes|No}
Examples
To approve the computer with a RequestId of 12, type:
wdsutil /Approve-AutoaddDevices /RequestId:12
To approve the computer with a RequestID of 20 and to deploy the image with the specified settings, type:
wdsutil /Approve-AutoaddDevices /RequestId:20 /MachineName:computer1 /OU:OU=Test,CN=company,DC=Domain,DC=Com /User:Domain\User1
/JoinRights:Full /ReferralServer:MyWDSServer /BootProgram:boot\x86\pxeboot.n12 /WdsClientUnattend:WDSClientUnattend\Unattend.xml /BootImagepath:boot\x86\images\boot.wim
To approve all pending computers, type:
wdsutil /verbose /Approve-AutoaddDevices /RequestId:ALL