title:Fitting second-order acyclic Marked Markovian Arrival Processes
author:Andrea Sansottera and
Giuliano Casale and
Paolo Cremonesi
Fitting 
Second-Order 
Acyclic Marked Markovian Arrival Processes 
Andrea Sansottera*, 
Giuliano 
Casalett, Paolo Cremonesi* 
* Politecnico 
di Milano, Dipartimento 
di Elettronica, 
InJormazione 
t Imperial 
College 
London, Department 
oj Computing, 
e Bioingegneria, 
180 Queen's Gate, SW7 2AZ, London 
Via Ponzio 34/5, 20133, Milan 
+Basque Center Jor Applied Mathematics 
PI:EMAIL, 
PI:EMAIL 
(BCAM), At. de Mazarredo 
PI:EMAIL, 
14, 48009, Bilbao, 
Basque Country, Spain 
Abstract-Markovian Arrival  Processes 
(MAPs) are  a 
useful to model correlated 
such  as those commonly found in network traces 
tractable class  of point-processes 
time  series, 
and  system  logs 
evaluation. 
further allowing the modeling of multi-class 
with cross-correlation 
between multi-class 
In this paper, we present  analytical 
traces, possibly 
arrivals. 
formulas to fit second­
Marked MAPs (MMAPs) generalize MAPs by 
used in performance analysis and reliability 
define closed-form 
order acyclic MMAPs with  an arbitrary number of classes. 
We initially 
formulas to fit second-order 
MMAPs with two classes, where  the underlying MAP is  in 
canonical form. Our approach  leverages 
ward moments, which  have recently been defined, but never 
exploited jointly 
apply these formulas to fit an arbitrary number of classes. 
Representative 
storage traces show the effectiveness 
empirical datasets. 
simulation using 
for fitting 
for fitting. Then, we show  how to sequentially 
examples and trace-driven 
of  our  approach 
forward  and back­
Keywords-Multi-class 
workload, point process, dependence 
I. I N T RODUCTION 
tool for performance 
(MMAPs) have re­
in particular 
to model multi­
[1], [2]. A MMAP gener­
gained 
systems 
Processes 
Marked Markovian 
Arrival 
as a promising 
useful 
a Markovian 
to mark arrivals 
to describe 
attention 
analysis, 
to queueing 
Arrival 
cently 
and reliability 
class arrivals 
alizes 
ability 
the ability 
cesses, 
to other point processes, 
statistical 
that is composable 
However, 
methods 
and more work is needed to understand 
expressive 
power of marked processes. 
e.g., cross-correlated 
fitting 
Process  (MAP) 
by featuring 
the 
with a class label [2], [3]. This gives 
temporal 
multi-class 
flows. Compared 
MMAPs enable describing 
non-Poisson 
dependent 
pro­
the 
for MMAPs are in the early stages 
and fully exploit 
the 
correlations 
between 
with continuous-time 
classes 
Markov chains. 
using a representation 
In this work, we develop 
Only few methods 
MMAPs, restricting 
fitting 
case of models with two states 
classes. 
of MMAPs [1], [4]. To estimate 
Processes, 
Markovian 
an expectation 
maximization 
in [8], [9]. Expectation 
tionally 
intensive 
number of samples. 
and unsuited 
Arrival 
novel analytical 
our attention 
formulas 
to the important 
for 
and an arbitrary 
number of 
are known to fit the parameters 
the parameters 
of Batch 
to MMAPs, 
defined similarly 
approach 
has been presented 
maximization, 
traces 
to analyze 
is computa­
with a large 
however, 
Compared 
to these works, our fitting 
analytical 
formulas 
approach 
leverages 
to second­
are the only ones 
tractable, 
their apparent 
that are specific 
PH (phase-type 
distribution) 
Models with few states 
even when just studying 
closed-form 
order models. 
the properties 
analytically 
or MAP [5]­
of the underlying 
simplicity, 
second-order 
[7]. However, 
despite 
to fit due to the non-linear 
MMAPs are non-trivial 
what to fit, and 
involved, 
options 
the many degrees 
our work 
may serve as a building 
traces, 
superposition. 
problems 
of approaches 
results 
as follows: 
through the generalization 
such as 
to tackle 
block to approximate 
Our main technical 
may be summarized 
they offer. Moreover, 
the multiple 
for choosing 
more complex 
equations 
of freedom 
these 
•  We develop 
a fitting 
methodology 
that first fits the 
first-order 
multi­
[4], 
in  [1], 
the 
MAP, and then matches 
together 
process. 
underlying 
class moments of the types proposed 
possibly 
marking 
that resorting 
form enables 
MMAP, impacting 
degrees 
of freedom. 
with probabilities 
A useful 
to an underlying 
tractability 
characterizing 
is the observation 
MAP in canonical 
for the second-order 
manner on the available 
analytical 
in a limited 
result 
process 
are satisfied 
MMAP parameters 
is not necessarily 
•  When fitting 
to trace data, the 
resulting 
a Markov process 
[4]. Stemming 
unless some constraints 
between 
from this, the complex relationship 
class moments 
is illustrated. 
approximate 
region 
ization 
which allows 
us to project 
one that can be fitted exactly 
a general 
by a second-order 
for the two-state 
moment set into 
and feasibility 
regions 
moment matching, 
of the feasible 
a character­
we develop 
multi­
MMAP. 
MMAP 
For 
•  We show how to sequentially 
apply our methodology 
MMAPs with an arbitrary 
number 
to fit second-order 
of classes. 
Here, classes 
exposing 
method is found to yield accurate 
dataset 
the detail 
also if the 
results 
MMAP. 
is not drawn from a second-order 
are fitted one after the other, 
for each class one-at-a-time. 
This 
This study is also motivated 
by the fact that MMAPs are 
needed to model real systems  where 
tween workloads 
systems. 
to a remote storage 
For instance, 
drive, 
in a natural 
upon issuing 
the operating 
arises 
such as storage 
manner, 
read and write requests 
system can resched-
cross-correlation 
be­
978-1-4799-0181-4/13/$31.00 
©2013 IEEE 
Authorized licensed use limited to: Tsinghua University. Downloaded on March 19,2021 at 07:41:16 UTC from IEEE Xplore.  Restrictions apply. 
performance. 
of the inter-arrival 
are defined by Buchholz 
time following an arrival 
of class c, which 
correlations 
reads 
storage 
violated. 
to optimize 
In tlIese cases, 
non-Poisson 
of successive 
for describing 
where sequences 
flows. Furthermore, 
in such 
between 
the 
we show 
of successive 
writes, 
of independence 
ule and merge requests 
This leads to situations 
are interleaved 
by sequences 
a way that the assumption 
two flows is significantly 
that MMAPs appear promising 
between 
Markovian 
can be efficiently 
out resorting 
in simulation-based 
one could use MMAPs to model tlIe inter-arrival 
between 
study. 
to generate 
to an existing 
systems 
the resulting 
by matrix-analytic 
[10]. MMAPs may also be useful 
times 
types for the system under 
traces 
multi-class 
trace [11]. 
evaluated 
to simulation 
may be helpful 
similar 
Also, Markov-modulated 
that are stochastically 
representation, 
dependability 
events of different 
evaluation. 
For example, 
thanks to their 
processes 
queueing 
measured 
models with­
The remainder 
of this paper is organized 
as follows. 
In 
moments are examined 
II, we give basic notation 
Section 
of multi-class 
fitting 
tion IV introduces 
with two classes. 
The sequential 
trary number of classes 
are given in Section 
world traces. 
Conclusions 
methods 
in Section 
and definitions. 
Properties 
m. Sec­
MMAPs 
for arbi­
for second-order 
fitting approach 
is introduced 
in Section 
V. Results 
VI for both random instances 
and real­
are drawn in Section 
VII. 
sequence 
We consider 
II. BACKGROUND AND N OTATION 
an interval-stationary 
Let Xi E lR.+ be the inter­
i-I and i, for i  1. Moreover, 
each marked with a class label. 
arrival 
arrivals 
let C = {I, ... , m} be the set of class labels 
by Ci E  C the class of the i-th arrival. 
Our goal is to fit 
the marked  arrival  sequence 
required definitions needed 
and denote 
(Xi, Cd. Below, we provide 
for this task. 
time between 
of arrivals, 
A. Multi-Class 
Moments 
Differently 
from single-class 
processes, 
moments of inter-arrival 
in marked point­
times 
processes 
several 
may be defined. 
work [1], [4] by considering 
statistical 
We relate 
our approach 
similar 
moments. 
We define 
with existing 
et al. in [4] as 
Fj,c = E[XiICi-1 = c] 
to as forward moments. 
(3) 
a representation, 
matrix of the underlying 
of producing 
and Ci E {I, ... , m} 
is 
and referred 
Arrival 
In this paper, 
B. Marked Markovian 
Process (MMAP) 
we use MMAPs as a fitting 
(Xi, Ci), i  l. A MMAP of order n with 
(Xi, Ci), i  1, where Xi is an inter-arrival 
arrival 
m classes, 
as a hidden-Markov 
process 
an MMAP[m] of order n, may be seen 
tool for marked 
sequences 
time drawn 
capable 
called 
samples 
in 
states 
degrees 
exactly 
but finite, 
MMAP[2], 
by a set of n x n ma­
on a sufficient 
the available 
are at most eight. 
[4] that the degrees 
It is shown in [1], 
a set of empirical 
The MMAP moment matching 
or approximately, 
large, 
problem 
of (Xi, Ci) match, 
moments 
number 
from a MAP with n transient 
is a class label. 
to find a MMAP such tlIat the moments 
either 
of (Xi, Ci) computed 
of samples. 
of freedom 
of a MMAP[m] of order n are at most mn2. For example, 
a second-order 
of freedom 
for fitting 
A MMAP[m] of order n is specified 
trices (Do, D1,1, D1,2,"" D1,m), called 
where Do is the sub-generator 
PH of order n, and D1,c = ( -Do)Pc where Pc is a 
sub-stochastic 
tlIe 
probability 
started 
tlIat, knowing 
i, the arrival 
(of any class) 
version 
in a phase chosen at random according 
probability 
is of class c and is followed 
that starts 
vector a of the discrete-time 
is 
P  = (_DO)-l D1, where DI = L.c D1,c. Such vector 
the left eigenvector 
to its unitary 
i.e., aP = a, ali = 1, where li is a column vector 
MAP (i.e., 
Note that (Do, D1) is the order-n 