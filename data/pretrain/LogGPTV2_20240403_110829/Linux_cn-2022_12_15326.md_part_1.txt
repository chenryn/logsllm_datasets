---
author: 硬核老王
category: 观点
comments_data:
- date: '2022-12-07 18:41:49'
  message: "好，好，好！\r\n赞，赞，赞！\r\n令我刮目相看..."
  postip: 113.229.157.145
  username: 来自辽宁鞍山的 Chrome 105.0|GNU/Linux 用户
- date: '2022-12-08 13:40:59'
  message: "好好好好好\r\n赢赢赢赢赢\r\n????\r\n✌️✌️✌️✌️"
  postip: 183.92.249.83
  username: 来自湖北随州的 Chrome Mobile iOS 108.0|iOS 16.0 用户
- date: '2022-12-09 10:20:35'
  message: 他认为，如果对标 Debian、Fedora 等操作系统社区来看，在 openEuler 之前，甚至是 openEuler 早期，其实中国是没有一个完整的操作系统社区的。
  postip: 117.136.82.233
  username: 来自117.136.82.233的 Mobile Safari 13.0|iOS 13.2 用户
- date: '2022-12-09 10:21:03'
  message: "作为欧拉社区贡献给开放原子开源基金会后的首个创新版本，此版本中新增了 2012 万行代码，\r\n\r\n其中仅在
    Linux 内核上就新增了 4.8 万行代码，全量代码已达 6.7 亿行！"
  postip: 117.136.82.233
  username: 来自117.136.82.233的 Mobile Safari 13.0|iOS 13.2 用户
count:
  commentnum: 4
  favtimes: 0
  likes: 0
  sharetimes: 0
  viewnum: 3894
date: '2022-12-07 16:26:00'
editorchoice: true
excerpt: “水面下的工作可能并不那么显眼，但实际上它真正是我们这个产业最基础的。”
fromurl: ''
id: 15326
islctt: false
largepic: /data/attachment/album/202212/07/191230jl89zlljlbk47l38.jpg
permalink: /article-15326-1.html
pic: /data/attachment/album/202212/07/191230jl89zlljlbk47l38.jpg.thumb.jpg
related: []
reviewer: ''
selector: ''
summary: “水面下的工作可能并不那么显眼，但实际上它真正是我们这个产业最基础的。”
tags:
- openEuler
- 欧拉
thumb: false
title: 操作系统专家解读 openEuler 22.09 最新技术特性
titlepic: true
translator: ''
updated: '2022-12-07 16:26:00'
---
![](/data/attachment/album/202212/07/191230jl89zlljlbk47l38.jpg)
前不久，欧拉社区发布了今年的创新版本 openEuler 22.09。作为欧拉社区贡献给开放原子开源基金会后的首个创新版本，此版本中新增了 2012 万行代码，其中仅在 Linux 内核上就新增了 4.8 万行代码，全量代码已达 6.7 亿行！
openEuler 采用长期支持（LTS）版本和创新版本间隔的发布方式，每两年发布一个 LTS 版本，期间每半年发布一个创新版本，用于推出实验性的技术特性。本次发布的 openEuler 22.09 创新版就带有不少的创新特性。但是在欧拉社区官方发布的公告中，并没有特别详细地介绍这些特性，因此，我特别邀约了华为服务器 OS 首席架构师、openEuler 社区技术委员会委员熊伟来为我们解读了本次发布中的一些最新、最酷的技术特性。
### 从内核说起
在本次的 openEuler 22.09 发布公告中提及了若干技术特性，比如可编程内核、分布式软总线、嵌入式硬实时，这些新的名称给人一种似曾相识，但又不明其中奥秘的感觉。作为欧拉技术委员会的专家，熊伟针对我的好奇，给出了他的解答：
#### 什么是可编程内核？
“可编程内核”这个名词是我最迷惑的 —— 内核难道不是代码吗？肯定是编程产生的，那这个“可编程”的意思是什么？
对此，熊伟首先解释了“可编程内核”产生的背景，“现在的硬件迭代变化非常快，但是相对而言，软件的变化就有点跟不上。比如说，芯片一般的生命周期就三年，你得花一年时间上传到上游，半年后进入内核社区，而从社区到用户手里还有很长的周期。本质原因在于内核相对是固定的，一次开发完成以后，编译成内核模块后就相对固定了。”因此，openEuler 创新性地借鉴了 eBPF 的思想，将机制和框架分离，框架内置到内核，而实现的功能和策略只需要写完以后注入到内核即可。
在实现上，主要是两个方面：
1. 把这种类似 eBPF 的机制扩展到内核的很多方面。比如说，扩展到内存、可调度性，让它们都成为可变化的；
2. 把内核中的驱动程序和内核主体的绑定解耦。
Linux 内核中的大部分代码都是驱动程序。熊伟说，“我们有一种想法，是不是能把内核驱动也能抽离出来。现在驱动程序跟 Linux 内核绑定得太死了，是不是能把内核驱动也变成可变化？”换言之，让驱动程序和 Linux 内核版本的演进尽量减少关系，这样的话，内核版本可以不断演进，但驱动程序可以在几个大版本内不断复用，而不像现在内核稍微一变化，所有的内核驱动都得重新测试验证甚至重新开发。
而关于“可编程内核”的开发计划，熊伟称，“从现在开始尝试，到明年的下半年，我们期望能推出一个相对比较完整的框架。”
对此，我不禁想到，我们知道内核的各个部分都是模块化的，不但可以在编译内核时选择和配置不同的模块，而且可以在运行中根据需要动态加载。那么，“可编程内核”和内核的模块化有什么关系和区别呢？
熊伟解释称，内核的模块还不是“彻底可变化的”，这些内核模块（KO）插入内核后是固定的，在运行过程中是不能变化的。而“可编程内核，是可以灵活动态进行调整的。”更进一步说，动态加载的不仅仅是模块，更多的是策略，模块加载进去以后可以动态地给它提供新的策略。比如说，可以根据运行的业务使用不同的内核调度器，来适应不同的需求，比如大数据和数据库对内核所采用的调度器是有不同的需求的。
对于这样的一种在内核底层机制层面进行的创新，而不仅仅是某些内核驱动程序或某个子系统，我非常期待在后继的几个版本中看到它变得成熟和更多应用。
#### 什么是分布式软总线？
在最近的几个版本中，openEuler 提到了一个“分布式软总线”，这个名词有的人可能在鸿蒙操作系统中见到过，这是否标志着欧拉和鸿蒙的进一步融合？
熊伟称，openEuler 的“分布式软总线”就是来自于鸿蒙操作系统。“软总线”是鸿蒙的万物互联、自动发现、自动识别、自动认证、自动连通的基础。平移过来以后，凡是基于 openEuler 的操作系统和所有基于鸿蒙的操作系统的设备之间就可以实现同样的特性。在 openEuler 的上个版本中已经开始进行“分布式软总线”的平移，而在此版本中已经基本完成。