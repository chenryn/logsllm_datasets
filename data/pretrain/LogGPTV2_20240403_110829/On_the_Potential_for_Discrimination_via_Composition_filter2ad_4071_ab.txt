geting compositions; the method simply greedily combines the
most skewed individual targetings. Specifically, we approximate
the 1,000 most skewed pairwise targeting compositions by com-
bining pairwise (via a logical and) the 46 most skewed individual
attributes, resulting in 1,035 pairs, and then randomly sampling.9 To
avoid very niche targetings, our method only considers individual
targetings and pairs with a total reach of at least 10,000.
Limitations Our methodology has a number of limitations. First,
our results rely on and are subject to the quality of the ad platforms’
sensitive attribute data. Second, the size statistics provided by these
ad platforms might be affected by the presence of fake accounts, or
by users owning multiple accounts. Third, while we measure the
skew in audiences arising from targeting, the operation of the ad
platform’s ad delivery system might introduce additional skews [4].
4 EXPERIMENTS
We now present our results, starting first with Facebook’s restricted
interface and then examining multiple ad platforms.
4.1 Facebook’s restricted interface
We first motivate our work by using our methodology to investigate
whether targeting compositions could exacerbate the potential for
discrimination on Facebook’s restricted interface for ads in pro-
tected categories. For each set of targetings, we use box-plots to plot
the distribution of representation ratios corresponding to males,
and corresponding to users of ages 18-24 respectively in Figure 1
(and corresponding to other age ranges in Figure 4 of Appendix A).
10 Throughout the paper, to avoid focusing on very niche targetings,
we only show results for targetings that have a total recall 10,000
or more.
Individual targeting For gender, we focus on the Individual col-
umn in the first box plot of the first figure in Figure 1. We see that the
set of 393 targeting attributes that Facebook offers on its restricted
interface show some evidence of gender skew: the targetings with
the 90th and 10th percentile representation ratios corresponding
8We only consider user-attribute-based targeting for Facebook and LinkedIn as both platforms al-
low the composition of these targeting attributes via boolean rules. However, while Google allows
boolean combinations of these attributes for specific kinds of ad campaigns (related to its search
products), it does not show audience size statistics for these; when audience size statistics are avail-
able, user attributes can only be combined via a logical or. Thus, to be able to demonstrate the po-
tential of logical and-based composition, we additionally consider the topic based targeting feature.
9In the case of Google, where we study compositions between targeting options belonging to two
different targeting features, targeting options within the same feature cannot be composed. Thus,
the number of skewed individual options from each feature necessary to obtain 1,000 skewed com-
positions will vary from case to case and has to be computed in each case.
10Each box plot shows the median representation ratio (as a thick red line), the 25-th and 75-th
percentiles (as the edges of the box), the 10-th and 90-th percentiles (as the whiskers), and rep-
resentation ratios in the top and bottom 10 percentiles as outlier points. The representation ratio
thresholds (1.25 and 0.8) described in Section 3 corresponding to the four-fifths rule for detecting
disparate impact are shown for reference.
Figure 1: Distributions of representation ratios corresponding to
males (left) and to ages 18–24 (right), for different sets of targetings
on Facebook’s restricted interface. Only targetings with a total re-
call above 10,000 are included.
to males are 1.84 (i.e., a male is nearly twice as likely to be picked
as a female) and 0.5 (i.e., a female is twice as likely to be picked
as a male), respectively. For age, again focusing on the Individual
column, we observe similar results for all the age ranges studied:
The 10th and 90th percentile representation ratios for the 18–24
age range is 0.39 and 1.39, respectively.
However, despite the presence of some skewed attributes, the
interface is still a highly sanitized interface: the interface excludes a
large number of other highly skewed individual targeting attributes
observed [37] in Facebook’s normal interface, including hundreds
of thousands of free-form attributes (e.g., Interested in Marie Claire,
which has a 0.08 representation ratio towards males).
Compositional targeting We next study whether compositions
of individual targetings (via a logical and) on the sanitized interface
could exacerbate the potential for discriminatory advertising. To
do so, we select 1,000 random pairs of targeting attributes, referred
to as “Random 2-way”; we also use the approach in § 3 to discover
the top 1,000 pairs of targeting attributes most skewed towards
(“Top 2-way”), and against (“Bottom 2-way”) the given sensitive
population.
We compare the resulting skew of these compositions to the
skew exhibited by individual targeting options in Figure 1. We
first observe that the random pairs of attributes often lead to more
skewed distributions, such as with the 18–24 age range (where com-
binations tend to make the resulting audience even more skewed
away the 18–24 group).
To see the extremes of this effect, we focus on the most skewed
combinations. The sets of “Top 2-way” and “Bottom 2-way” target-
ings show additional skew, with 10th percentiles reaching as low
as 0.1 and 90th percentiles as high as 8.98. Thus, while the aver-
age combination of two targeting options shows modest additional
skew (compared to “Individual”), many outlying combinations show
significant additional skew. For example, targeting users interested
in Electrical engineering and Cars yielded a representation ratio
of 12.43 towards males, while targeting each individual attribute
yielded smaller representation ratios (of 3.71 and 2.18 respectively).
We show other illustrative examples of “Top 2-way” targetings
showing how composition can increase skew, in Tables 2 and 3 in
Appendix A.
Finally, we focus how this effect scales by repeating the experi-
ment with three targetings composed instead of two (creating “Top
3-way” and “Bottom 3-way” targetings) for gender in Figure 1. We
IndividualRandom 2-wayTop 2-wayBottom 2-wayTop 3-wayBottom 3-way2−62−52−42−32−22−1202122232425264/5-ths ruleN: 393N: 953N: 928N: 1000N: 822N: 792Repr. ratio MaleIndividualRandom 2-wayTop 2-wayBottom 2-way2−62−52−42−32−22−1202122232425264/5-ths ruleN: 389N: 967N: 958N: 977Repr. ratio age 18-24On the Potential for Discrimination via Composition
IMC ’20, October 27–29, 2020, Virtual Event, USA
find that the skew is indeed amplified further: the 90th percentile
representation ratio for the “Top 3-way” targetings is 19.77 and
the 10th percentile representation ratio for the “Bottom 3-way”
targetings is 0.11, implying a further increase in the degree of skew.
Summary Our findings show that compositions of targeting op-
tions can be abused to target skewed sets of users, exhibiting a
greater degree of skew towards (or away from) particular ages and
genders compared to individual targeting options. That this is true
in the context of a highly sanitized advertising interface—defined
by the settlement of a lawsuit that was focused on discriminatory
ad targeting—indicates that significant additional work is needed
to ensure these systems cannot be used for discriminatory adver-
tising. We use these findings as motivation to explore the extent
to which the same is true on Facebook’s full interface, as well as
other platforms’ interfaces.
4.2 Individual targeting
We now examine the skews arising from targeting the various
default targeting attributes on each of these platforms individually.
Focusing on the Individual column in the three sections of Figure 2
(and of Figure 4 of Appendix A), we make two observations: First,
attributes from different platforms show varying distributions of
skew. For example, LinkedIn’s targeting attributes are generally
more skewed towards males, with a 90th percentile representation
ratio of 2.09; by contrast, Facebook’s targeting attributes are more
skewed toward females, with a comparatively lower 90th percentile
representation ratio (toward males) of 1.45. On the other hand,
Google’s and LinkedIn’s targeting attributes are generally more
skewed away from the youngest users (ages 18–24), and skewed
toward the oldest users (ages 55+). These systematic skews could
potentially be due to various factors such as users’ activities on these
platforms, the data these platforms collect about users, advertiser
needs, etc. Second, in all cases, we concerningly see that there exist
a number of skewed targeting attributes that may violate the four-
fifths rule; such skew is especially concerning in the context of
LinkedIn which focuses on employment.
4.3 Compositional targeting
Next, we explore what happens with composition.
Potential for discrimination We first perform the experiments
from § 4.1 on different ad platforms, plotting the distribution of
representation ratios for random pairs of attributes, and for the
1,000 most skewed pairs, in Figure 2 (and in Figure 4 of Appendix A).
Across ad platforms, we find that randomly chosen pairs of
targeting attributes show modest additional skew, for example,
exacerbating the skew against smaller ages (18–24) on LinkedIn.
This is concerning as it means that even honest advertisers using
targeting compositions could be likely to be targeting users in
a more skewed manner. Additionally, the most skewed pairs of
targeting attributes clearly indicate the exacerbated potential for
discrimination from composition, with over 90 percent of these
falling outside the thresholds of the four-fifths rule.
Recall of targeting compositions We next study if an advertiser
could selectively reach a large number of users (i.e., achieve a high
recall) of a particular sensitive population using the previous highly
Figure 2: Distributions of representation ratios corresponding to
males (top) and ages 18–24 (bottom) on different platforms.
skewed targeting pairs. For each set of targetings previously studied,
we take skewed targetings in the set that fall outside the thresholds
of the four-fifths rule, and plot the distribution of corresponding
recalls of the given sensitive population. For reference, we also
show the distribution of recalls for all individual targeting options,
and for skewed individual targeting options. While we show results
for gender and various age ranges in Figure 5 in Appendix A, we
focus on results for females here.
We find that while skewed pairwise targeting compositions have
substantial recalls, these typically correspond to small fractions of
the overall target sensitive population on the platform. For example,
the 90th percentile recall for the “Top 2-way” skewed compositions
is 5M (4.17%), 30M (25%), 1.7M (0.14%), and 560K (0.79%) respec-
tively for Facebook’s restricted interface, Facebook’s full interface,
Google, and LinkedIn respectively; the respective median recalls
are 570K (0.47%), 1.9M (1.58%), 170K (0.01%), and 46K (0.06%). How-
ever, since most advertisers on these platforms only spend up to a
few hundreds of dollars per ad on average, with tens of thousands
of impressions [13], these recalls may still be appealing. Besides,
we find that even individual targeting options tend to only have
niche recalls: the respective median recalls for all individual op-
tions across the four interfaces are 3.2M (2.67%), 5.2M (4.33%), 11M
(0.92%), and 1.4M (1.97%). Finally, we unsurprisingly observe that
targeting compositions tend to achieve lower recalls than individual
targeting options (achieving lower median recalls, for example).
Increasing recall We then study whether an advertiser could
increase their recall even further by targeting ads across multiple
skewed compositions; this depends on the degree of overlap be-
tween the corresponding audiences. While we focus on results for
females here, more complete results for this analysis are in Table 1
in Appendix A. We measure the pairwise overlaps between the sets
IndividualRandom 2-wayTop 2-wayBottom 2-wayIndividualRandom 2-wayTop 2-wayBottom 2-wayIndividualRandom 2-wayTop 2-wayBottom 2-way2−62−52−42−32−22−1202122232425264/5-ths ruleN: 610N: 634N: 850N: 949N: 3092N: 627N: 655N: 711N: 540N: 725N: 409N: 518Repr. ratio MaleFacebookGoogleLinkedInIndividualRandom 2-wayTop 2-wayBottom 2-wayIndividualRandom 2-wayTop 2-wayBottom 2-wayIndividualRandom 2-wayTop 2-wayBottom 2-way2−62−52−42−32−22−1202122232425264/5-ths ruleN: 604N: 750N: 758N: 439N: 3021N: 559N: 409N: 653N: 540N: 760N: 557N: 919Repr. ratio age 18-24FacebookGoogleLinkedInIMC ’20, October 27–29, 2020, Virtual Event, USA
G. Venkatadri et al.
the corresponding compositions of targetings across platforms.15
However, the compositions of the remaining targeting attributes
still yields highly skewed rules; for example, even with the removal
of the top 10th percentile of male-skewed individual attributes for
Facebook’s restricted interface, the 90th percentile of resulting “Top
2-way” representation ratios was 3.02, and the highest resulting
representation ratio was 5.23.
5 CONCLUDING DISCUSSION
In this paper, we performed the first study that showed that the
potential for discriminatory targeting, previously reported in the
context of Facebook, exists across multiple ad platforms. Moreover,
ad platforms allow advertisers to compose individual ad targeting
options; we showed how such composition exacerbates the poten-
tial for intentional or unintentional discriminatory targeting, even
for a highly sanitized ad interface such as Facebook’s restricted
interface.
Mitigations While prior work [37] showed that disabling the use
of obvious stereotypically skewed targeting attributes was insuf-
ficient (as there could be facially neutral attributes that are still
skewed), this paper further shows that even an approach based
on removing all highly skewed individual targeting attributes is
also likely insufficient. Thus, our work re-enforces the need to base
mitigations against discriminatory advertising on the outcome of
the targeting [37], rather than on the targeting itself. For example,
especially for protected categories, ad platforms could potentially
use anomaly detection based on the outcome of ad targeting to
detect advertisers who consistently target skewed audiences. Any
flagged advertisers could then be subject to further review about
whether their use of targeting options is justifiable.
Our work specifically shows the need to base mitigations upon
the outcome of the composition of targetings specified by an ad-
vertiser, rather than upon the outcomes of the individual targeting
options used. At the very least, while restricting or disabling the
use of skewed targetings, ad platforms should be more aggressive
keeping targeting compositions in mind. In general, our work mo-
tivates the need to not be myopic and simply focus on individual
components of ad platforms when designing mitigations against
discriminatory advertising.
Ethics While conducting this work, we carefully considered the
ethical issues and took care to ensure our work was consistent with
best practices. We did not collect any individual user data; rather,
we only collected high-level, obfuscated audience size statistics
provided by the ad platforms to all advertisers. Additionally, our
experiments did not impact users directly, as we did not run ads.
We also minimized the load placed on the ad platforms by limiting
both the count and rate of API queries we make.
6 ACKNOWLEDGEMENTS
We thank the anonymous reviewers and our shepherd, Marco Mel-
lia, for their valuable comments. This research was supported in
part by NSF grant CNS-1916020. Additionally, Giridhari Venkatadri
acknowledges support from a Facebook Fellowship.
15The minor deviations from monotonicity in the curve for Google could potentially be due to our
greedy method giving us only an approximate set of the most skewed targeting compositions.
Figure 3: Effect of removal of the most skewed individual target-
ings on the skew of pairwise targeting compositions.
of females reached by the top 100 female-skewed targeting com-
positions,11 and find a median pairwise overlap of approximately
22%, 15%, and 0% for Facebook’s restricted interface, Facebook’s full
interface, and LinkedIn respectively;12 this low overlap indicates
the potential to increase recall further.
We further confirm that this is the case by estimating the to-
tal recall of males across the union of the top 10 male-skewed
compositions.13 While the top female-skewed composition on Face-
book’s restricted interface, Facebook’s full interface, and LinkedIn
respectively had a recall of 1.1M (0.9%), 270K (0.2%), and 28K (0.0%);
the total recall across the top 10 female-skewed compositions was
significantly higher, i.e., 6.1M (5.1%), 4M (3.3%), and 1.1M (1.6%)
respectively.
Removing skewed individual targetings We finally study
whether removing the most skewed individual targeting attributes
is sufficient to mitigate against skew in targeting compositions;
for each sensitive population, we successively remove the most
skewed individual targeting attributes in steps of two percentile,
and use the greedy method as before to obtain the “Top 2-way”
and “Bottom 2-way” sets of most skewed compositions.14 We plot
the resulting variation in representation ratio for gender (males)
in Figure 3; we obtain similar results for different age ranges in
Figure 6 of Appendix A.
We observe that the removal of the most skewed individual
targetings leads, perhaps unsurprisingly, to a drop in the skew of
11We measure these overlaps on Facebook and LinkedIn by exploiting their support for boolean com-
binations (logical-and of logical-ors) of targeting attributes. We could not conduct a similar analysis
on Google because, as previously mentioned, Google does not provide audience size statistics when
targeting such boolean combinations.
12The overlaps were conservatively measured by comparing the size of the intersection to the size
of the smaller set in the pair.
13Directly measuring the total recall of the union (logical-or) of a number of compositions (logical-
ands) needs a logical-or of logical-ands. Since Facebook and LinkedIn only support a logical-and
of logical-ors, we instead indirectly estimate total recall by combining multiple logical-and queries,
using the inclusion-exclusion principle.
14As before, we only consider the subset of each set of 1K targeting compositions that has a total
reach of at least 10,000.
202122232425 0 2 4 6 8 1090th percentile Rep ratioTop 2-way compositions maleGoogleFacebook restrictedFacebookLinkedIn2-52-42-32-22-120 0 2 4 6 8 1010th percentile Rep ratioPercentile targetings removedBottom 2-way compositions maleOn the Potential for Discrimination via Composition
IMC ’20, October 27–29, 2020, Virtual Event, USA
REFERENCES
[1] 12 CFR § 202.4 (b) – Discouragement. https://www.law.cornell.edu/cfr/text/12/202.4.
[2] 24 CFR § 100.75 – Discriminatory advertisements, statements and notices. https://www.law.
cornell.edu/cfr/text/24/100.75.
29/623.
[3] 29 USC § 623 – Prohibition of age discrimination. https://www.law.cornell.edu/uscode/text/
[4] M. Ali, P. Sapiezynski, M. Bogen, A. Korolova, A. Mislove, and A. Rieke. Discrimination
through Optimization: How Facebook’s Ad Delivery can Lead to Biased Outcomes. CSCW,
2019.
[5] M. Ali, P. Sapiezynski, A. Korolova, A. Mislove, and A. Rieke. Ad Delivery Algorithms: The
[6] About Audiences for Special Ad Categories.
Hidden Arbiters of Political Messaging. arXiv preprint arXiv:1912.04255, 2019.
2220749868045706.
https://www.facebook.com/business/help/
[7] About Customer Match. https://support.google.com/adwords/answer/6379332?hl=en.
[8] D. Biddle. Adverse Impact and Test Validation: A Practitioner’s Guide to Valid and Defensible
[9] S. Barocas and A. D. Selbst. Big data’s disparate impact. Cal. Law Rev., 104, 2016.
[10] A. Datta, A. Datta, J. Makagon, D. K. Mulligan, and M. C. Tschantz. Discrimination in Online
Employment Testing. Gower, 2005.
[11] A. Datta, M. C. Tschantz, and A. Datta. Automated Experiments on Ad Privacy Settings: A
Personalization: A Multidisciplinary Inquiry. FAT*, 2018.
Tale of Opacity, Choice, and Discrimination. PETS, 2015.
wired.com/story/facebook-advertising-discrimination-settlement/.
[12] E. Dreyfuss. Facebook Changes Its Ad Tech to Stop Discrimination. WIRED. https://www.
[13] L. Edelson, S. Sakhuja, R. Dey, and D. McCoy. An Analysis of United States Online Political
Advertising Transparency. https://arxiv.org/abs/1902.04385.
[14] Exhibit a – Programmatic Relief. https://nationalfairhousing.org/wp-content/uploads/2019/
03/FINAL-Exhibit-A-3-18.pdf.
[15] Facebook Engages in Housing Discrimination with Its Ad Practices, U.S. Says. https://www.
nytimes.com/2019/03/28/us/politics/facebook-housing-discrimination.html.
[16] Facebook Lets Advertisers Exclude Users by Race.
facebook-lets-advertisers-exclude-users-by-race/.
https://www.propublica.org/article/
[17] Facebook: About Facebook Pixel. https://www.facebook.com/business/help/742478679120153.
[18] Facebook: About Lookalike Audiences.
https://www.facebook.com/business/help/
[19] Facebook: Best Practices for Detailed Targeting. https://www.facebook.com/business/help/
164749007013531.
[20] Facebook:
905095143159925.
Brand
1926878614264962.
Safety Controls.
https://www.facebook.com/business/help/
[21] Facebook: Use Detailed Targeting. https://web.archive.org/web/20200429194031/https://www.
facebook.com/business/help/440167386536513.
[22] Get Started with LinkedIn Website Retargeting. http://web.archive.org/web/20200601191411/
https://www.linkedin.com/help/lms/answer/73934.
[23] Google: About audience targeting. https://support.google.com/google-ads/answer/2497941?
[24] Google: About contextual targeting. https://support.google.com/google-ads/answer/2404186?
[25] Google: About managed placements.
https://support.google.com/google-ads/answer/
2470108?hl=en.
[26] Google: About remarketing setup. https://support.google.com/google-ads/answer/2454000?
[27] Google: About similar audiences on the Display Network. https://support.google.com/google-
ads/answer/2676774?hl=en.
[28] Google: About topic targeting. https://support.google.com/google-ads/answer/2497832?hl=
hl=en.
hl=en.
hl=en.
en.
[29] Google: Frequency capping: Definition.
https://support.google.com/google-ads/answer/
[30] Google: How to use combined audiences. https://support.google.com/google-ads/answer/
117579?hl=en.