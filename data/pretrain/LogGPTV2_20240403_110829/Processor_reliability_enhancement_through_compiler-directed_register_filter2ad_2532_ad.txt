Authorized licensed use limited to: Tsinghua University. Downloaded on March 20,2021 at 09:58:58 UTC from IEEE Xplore.  Restrictions apply. 
a0b0a1b0a0b1a1b2a2b1a0b2a1b1a2b0c0c1c2a2b2Another iteration?DQDQDQiteration?AnotherLFSROffsetstatic reg namemultmuxMSBdynamic reg name To RFFig.6.Gate-levellogicfortranslatingregisternameslogicalregisternamestophysicalregisterindicesforthebzip2example.Ascanbeseen,duringloopexecutioneachlogicalregisternameismultipliedbythevalueoftheoffsetregister.Theoffsetvalueismultipliedby2wheneveraloopbranchisencountered,implementedthroughshiftingthe3-bitLFSRonebittotheright.Meanwhile,asinthisexampletheshufﬂewindowiscomposedofregistersfromR1toR7,themostsigniﬁcantbitsofthestaticencodedregisternameareusedtodifferentiatewhethertheregisterfallswithintheshufﬂewindow.Ifitis,theregisterisshiftable,resultingintheuseofthemultiplier’sresultasthephysicalregisterindex.Otherwise,thelogicalnameoftheunshiftableregisterisdirectlyusedtoaccesstheregisterﬁle.ItneedstobenotedthattheimplementationshowninFigure6correspondstotheexampleshowninFigure3.Theimplementationparametersareforillustrativepurposesonly,andcanbecustomizedaccordingtotheregisterutilizationcharacteristicoftheapplication.Moreconcretely,itcanbeclearlyseenfromFigure6thattheproposedregistershufﬂingtechniquerequiresnohardwaremappingtablebutonlyan-bitGFmultiplierandan-bit2-to-1multiplexerforeachregisteraccessport,togetherwithasinglen-bitLFSRtorecordtheshufﬂingoffset.Moreover,withtheselectionofanappropriateﬁeldgeneratingpolynomial,GFmultiplierscanbeefﬁcientlyimplementedusingasmallsetofANDandXORgates.For3to7bitsparallelﬁeldmultipliers,thecost-effectivepolynomialaswellasthetotalgatecountandlongestpathofthecorrespondingimplementationhavebeenlistedinTableIII.TheGFmultipliersshowninTableIIIrequireasizeof2n−1registersfortheshufﬂewindow.Incontrast,themoduloadditioncanbeemployedmoregenerallyastheshufﬂingfunctionforshufﬂewindowsofothersizes.Inthiscase,theproposedregistershufﬂingtechniquerequiresan-bitmoduloadder,an-bitcomparator,andan-bit2-to-1multiplexerforeachregisteraccessport,togetherwithasinglen-bitadderandan-bitregistertocalculateandrecordtheshufﬂingoffset.AlthoughthisadditionalnecessitatedhardwareismorecomplexthanthexorgatebasedimplementationoftheGFmultipliers,itisstillnegligiblysmallcomparedtothemappingtablesusedinconventionalregisterrenamingtechniques.Asboththelogicandthephysicalregisternamespreserveallthetruedatadependenceswithintheloopbody,thebehavioroftherestofthepipeline,suchastheforwardinglogic,wouldnotbeaffectedbytheregistershufﬂingprocess.Moreover,sinceTABLEIIITHEDESIGNCOMPLEXITYOFGFMULTIPLIERSWindowsizeFieldpolynomialGatesLongestpath7regsx3+x+1151AND+2XOR15regsx4+x+1251AND+2XOR31regsx5+x2+1371AND+2XOR63regsx6+x+1541AND+3XOR127regsx7+x+1721AND+3XORregisterwriteaccessesaretypicallyperformedatalaterpipelinestage,thetranslationofregisternamescanbeperformedinparallelwiththecalculationoftheinstructionresult.Evenforregisterreadaccesses,theaccesslatencyofthesmalltranslationlogiccanalsobeeffectivelyhidden,sinceinthetypicalcasecacheaccessesconstitutethelongestpipelinestage.VI.SIMULATIONRESULTSInthissectionweexperimentallyevaluatetheefﬁcacyoftheproposedregisterrotationtechniqueinbalancingregisteraccesses,reducingthechip-widepeaktemperature,andimprov-ingprocessorreliability.Toevaluatetheproposedtechniquefordifferenttypesofapplications,asetofexperimentalstudieshavebeenperformedonboththeMediabench[23]andtheSPECint2000benchmarks.A.RegisterAccessResultsThediscussionspresentedinSectionsIV-DandIV-Eclearlyshowthatthepartitionofshiftable/unshiftableregistersand,hence,theeffectivenessoftheproposedregistershufﬂingtechniquearestronglyrelatedtoregisteraccesscharacteristics.Asaresult,theﬁrststepinourexperimentalevaluationistheexamination,foreachloop,ofthenumbersofread-onlyregisters,conditionallydeﬁnedyetunconditionallyreferredreg-isters,andregistersnotaccessedintheloop.ThisisachievedthroughusingATOM[24]toinstrumenttheassemblycodetoidentifyexecutionhotspots(i.e.,frequentlyexecutedloops)andtogenerateregisterusageproﬁles.Thecontrolﬂowandregisterusageinformationofeachloopareanalyzedthereafter.ThecollectedproﬁlingresultsarepresentedinTableIV.OnlytheproﬁlingresultsfortheselectedSPEC2000bench-marksarepresented,sincethesebenchmarksexhibitamorebalancedregisterutilizationthantheMediabench[23]programsduetotheirrelativelylargerworkingsets.Foreachbenchmark,wereportthenumberofhotloopsthathavebeenidentiﬁed,theiroccupancyinthetotalexecutiontime,aswellassixsetsofregisterusagedata.TableIVliststhemaximal,theaverage,andtheminimalnumberofnot-accessedregistersandlivenot-accessedregisters,aswellasthemaximalandtheaveragenumberofread-only,hotread-only,cond-deﬁned,andhotcond-deﬁnedregisters.Theminimalvaluesarenotlistedforthelastfoursetssincethesevaluesarealways0.Theresultsregardingtheminimalnumberofnot-accessedregistersindicatethatallthehotloopsidentiﬁedbyATOMhaveatleast1freeregister,thusclearlyconﬁrmingthewideapplicabilityoftheproposedregistershufﬂingtechnique.Duetothesmallcodesize,theaveragenumberofregistersaccessedwithinaloopbodyislessthan9.Thishighlyskewedregisterutilizationclearlyconﬁrmsthenecessityforregistershufﬂingtechniques,suchastheonewehereinpropose,soastodeliver978-1-4244-4421-2/09/$25.00 c(cid:13)2009 IEEE
476
Authorized licensed use limited to: Tsinghua University. Downloaded on March 20,2021 at 09:58:58 UTC from IEEE Xplore.  Restrictions apply. 
TABLEIVTHENUMBEROFHOTLOOPS,THEIROCCUPANCYINEXECUTIONTIME,ANDREGISTERUSAGEINFORMATIONBenchmarkartbzip2mcftwolfHotloop#32602961Executiontime79.8%78.3%64.8%71.9%max28292929Not-accessed#aver25.3422.3323.6622.56min1413131max20131319Livenot-accessed#aver10.4753.765.98min0010Read-only#max6677aver1.912.332.242.02Hotread-only#max4433aver11.731.141.08Cond-deﬁned#max1333aver0.060.170.280.21Hotcond-deﬁned#max1113aver0.060.030.030.11amorebalancedaccessdistribution.Meanwhile,TableIValsoshowsthatonaveragealoopcontainsonly2read-onlyregisters,andonly1ofthemneedstoberotatedtopreventlocalheatbuildup.Thenumberofconditionallydeﬁnedyetunconditionallyreferredregistersisevenless,asmosthotloopsarecomposedofalimitednumberofbasicblocks.Thesevaluesclearlyconﬁrmthatahighlylimitednumberofextramovinstructions(lessthantwoonaverage)wouldsufﬁcetomakethissmallsetofhotread-onlyandhotconditionallydeﬁnedregistersshiftable.AccordingtotheregisterusageproﬁlesgeneratedbyATOM,thenewregisternamesarestaticallydetermined,basedonwhichtheSimpleScalartoolset[25]ismodiﬁedtoimplementtheproposedregistershufﬂingtechniqueontopofanin-order2-wayprocessor.Wefurthermorecomparetheproposedtech-niquewiththethermal-awareregisterreassignmenttechnique[20].Assumingthattheregisterﬁleiscomposedof8sub-banks,twosetsofdataarereported,namely,theaccessdis-tributiontoeachindividualregisterandtheaccessdistributiontoeachsub-bank.Thecumulativeratiosofthemostfrequentlyaccessedregistersandsub-banksareshowninFigure7.Ascanbeseen,forthefourSPEC2000benchmarks,theproposedtechniquecanachieveamorebalancedaccessdistri-butiontoeachindividualregisterascomparedtothethermal-awareregisterreassignmenttechnique[20].Moreconcretely,initially81%to94%ofalltheregisteraccessesaremappedto12registerswhich,inacompletelybalancedcase,shouldonlycapture12/32=37.5%oftotalaccesses.Usingstaticregisterreassignment(thetop-leftquadrantinFigure7),64%to80%oftotalaccessesaremappedto12registers,whileusingtheproposedregistershufﬂingtechnique(thetop-rightquadrant),only50%to60%oftotalaccessesaremappedto12registers.Iftheaccessdistributionisevaluatedatthegranularityofregistersub-banks,bothtechniquescanachieveaquitebalancedaccessdistributioninthatonly38%to40%ofalltheregisteraccessesaremappedto12registers.Comparedtothereassignment[20]technique,theproposedshufﬂingtechniqueresults,formcfandtwolf,inaslightlyelevatedartbzip2mcftwolf00.20.40.60.81  4 regs8 regs12 regs16 regs20 regs32 regsartbzip2mcftwolf00.20.40.60.81  artbzip2mcftwolf00.20.40.60.81Cumulative Access Ratio to Sub−banks1bank2banks3banks4banks5banks6banks7banks8banksartbzip2mcftwolf00.20.40.60.81Cumulative Access Ratio to individual registerFig.7.Reductioninpeaktemperatureoftheentirechipamountofaccesses(lessthan2%)hittingtheﬁrstsubbank.ThisisbecauseregisterR0,whichcannotberotatedsinceitsvaluecorrespondsstrictlyto0,happenstobeafrequentlyaccessedregisterwithinseveralloopbodies.Inthereassignment[20]technique,R0canbeplacedintoasubbankwithasetof“cold”registerssoastobalancetheaccesscountstothatsubbank.However,intheproposedtechnique,these“cold”registersareiterativelymappedto“hot”logicalregisters.Theincreasedamountofaccessesthusresultsinthecorrespondingsubbankbeingaccessedslightlymorefrequentlythantheremainingsubbanks.B.TemperatureResultsOurnextstepofevaluationfocusesonthegenerationoftemperatureproﬁles.WATTCH[26]ismodiﬁedtogenerateenergyproﬁlesofeachhardwareresource,especiallyeachreg-isterwithintheregisterﬁle.Thepowerconsumedbythesmall5-bitadderandmultiplexerisalsoincludedineachregisterﬁleaccess.TheaggressiveclockgatingprovidedbyWATTCHisusedtoavoidunnecessarypowerconsumption.Usingtheseenergyproﬁles,Hotspot[6]isemployedtosamplethetransienttemperatureofeachhardwareresource.Thissamplingintervalissetto20,000instructions,whichissubstantiallylessthanthethermaltimeconstantofanyhardwareresource.AnItanium-like[27]processorshowninFigure8isusedastheﬂoorplaninputtoHotspot.Thediesizeissetto8mm×8mm,andtheinitialtemperatureissetto60°C.Theobtainedreductioninchip-widepeaktemperatureispresentedinFigure9.Ascanbeseen,theproposedregisterfalubtbul1dl1ialuiregitlbil1decoderfregdtlbFig.8.Theprocessorﬂoorplanusedinsimulation978-1-4244-4421-2/09/$25.00 c(cid:13)2009 IEEE
477
Authorized licensed use limited to: Tsinghua University. Downloaded on March 20,2021 at 09:58:58 UTC from IEEE Xplore.  Restrictions apply. 
artbzip2mcftwolfadpcmepicgsmmpeg2average7580859095  BaselineRegShuffleFig.9.Reductioninpeaktemperatureoftheentirechipﬁleaccessbalancingtechniquecanachieveareductionof3.1to7.4°Cinchip-widepeaktemperature.Thehighestreductionisachievedinart,whilethelowestreductionoccursinmcf.Thesetemperatureresultsareconsistentwiththeregisteraccessresults,sinceamorebalancedaccessdistributionisachievedinart,ascomparedtomcf.Thesimulationresultsconﬁrmthatbytargetingtheregisterﬁle,oneofthemostoverheatedhardwareunitsinaprocessor,theproposedtechniquecaneffectivelyreducethechip-widepeaktemperatureduringprogramexecution.Whiletheamountoftemperaturereductionseemstobeinsigniﬁcantatﬁrstsight,itactuallycaneffectivelyreducethefaultrateoftheentirechip,sincethefaultratedoublesforevery10°Cincreaseintemperature[12].Meanwhile,previousstudieshaveshownthatalargenumberofdelayviolationswouldoccurifthepeaktemperatureexceeds85°C[4],[6].Itcanbeseenfromtheresultsthatformostbenchmarks,theproposedalgorithmcaneffectivelyreducethepeaktemperaturetobelow84°C.Onaverage,theproposedtechniqueachievesareductionfrom88.8°Cto83.5°C.VII.CONCLUSIONSWehavepresentedinthispaperatechniqueforimprovingthereliabilityofanentirechipthroughreductionsinthepeaktemperatureoftheregisterﬁle,oneofthemostoverheatedmodulesinaprocessor.Peaktemperaturecanbeeffectivelycontrolledthrougharegistershufﬂingprocessthatphysicallyremapstheheavilyaccessedlogicalregistersbeforeheatgetslocallyaccumulated.Furthermore,throughtheexploitationofapplication-speciﬁcaccessproﬁles,thecompilercandetermin-isticallycontroltheregistershufﬂingprocess,thusmaximizingpeakpowerreductionwithinalimitedhardwarebudgetandnegligibleperformancedegradation.Thishighlyreducedhard-warecomplexityenablestheproposedtechniquetobeeasilyincorporatedintomostembeddedprocessorssoastoeffectivelyreducepeaktemperatureoftheentirechip.SimulationresultsofSPEC2000andmediabenchprogramsfurthermoreconﬁrmthattheproposedregistershufﬂingtechniquecanachievea1.5to3timesmorebalancedaccessdistributionandareductionof3.1to7.4°Cinchip-widepeaktemperature.Suchatemperaturereductioninturneffectivelyreducestheamountofrun-timefaults,thusimprovingthereliabilityoftheentirechip.REFERENCES[1]R.BlishandN.Durrant,“Semiconductordevicereliabilityfailuremodels,”InternationalSEMATECH,Tech.Rep.,May2000.[2]R.Viswanath,V.Wakharkar,A.Watwe,andV.Lebonheur,“Ther-malperformancechallengesfromsilicontosystems,”IntelCorp.,Tech.Rep.,2000.[3]H.KuﬂuogluandM.A.Alam,“AcomputationalmodelofNBTIandhotcarrierinjectiontime-exponentsforMOSFETreliability,”JournalofComputationalElectronics,3(3):165–169,Oct.2004.[4]H.Goto,S.Nakamura,andK.Iwasaki,“Experimentalfaultanalysisof1MBSRAMchips,”inVTS’97,pp.31–36,April1997.[5]A.H.Ajami,K.Banerjee,andM.Pedram,“Modelingandanal-ysisofnonuniformsubstratetemperatureeffectsonglobalULSIinterconnects,”IEEETrans.onCAD,24(6):849–861,June2005.[6]K.Skadron,M.Stan,W.Huang,S.Velusamy,K.Sankara-narayanan,andD.Tarjan,“Temperature-awaremicroarchitecture,”in30thISCA,pp.2–12,June2003.[7]A.K.Coskun,T.S.Rosing,K.Whisnant,andK.Gross,“Dy-namictemperature-awareschedulingformultiprocessorSoCs,”IEEETrans.onVLSI,16(9):1127–1140,Sept.2008.[8]B.C.Schafer,Y.Lee,andT.Kim,“Temperature-awarecompilationforVLIWprocessors,”in13thRTCSA,pp.426–431,Aug.2007.[9]S.Manne,A.Klauser,andD.Grunwald,“Pipelinegating:Spec-ulationcontrolforenergyreduction,”in25thISCA,pp.132–141,June1998.[10]K.Skadron,T.Abdelzaher,andM.Stan,“Control-theoretictech-niquesandthermal-RCmodelingforaccurateandlocalizeddy-namicthermalmanagement,”inHPCA-8,pp.17–28,Feb.2002.[11]P.E.Dodd,M.R.Shaneyfelt,J.R.Schwank,andG.Hash,“Neutron-inducedlatchupinSRAMsatgroundlevel,”in41stIRPS,pp.51–55,April2003.[12]C.J.Lasance,“Thermallydrivenreliabilityissuesinmicroelec-tronicsystems:Status-quoandchallenges,”MicroelectronicsReli-ability,43(12):1969–1974,Dec.2003.[13]A.BaniasadiandA.Moshovos,“Instructionﬂow-basedfront-endthrottlingforpower-awarehigh-performanceprocessors,”inISLPED’01,pp.16–21,Aug.2001.[14]D.BrooksandM.Martonosi,“Dynamicthermalmanagementforhigh-performancemicroprocessors,”inHPCA-7,pp.171–182,Jan.2001.[15]S.Heo,K.Barr,andK.Asanovic,“Reducingpowerdensitythroughactivitymigration,”inISLPED’03,pp.217–222,Aug.2003.[16]P.Chaparro,J.Gonzalez,andA.Gonzalez,“Thermal-awareclus-teredmicroarchitectures,”inICCD2004,pp.48–53,Oct.2004.[17]M.D.Powell,M.Gomaa,andT.N.Vijaykumar,“Heat-and-run:LeveragingSMTandCMPtomanagepowerdensitythroughtheoperatingsystem,”inASPLOS’04,pp.260–270,Oct.2004.[18]J.-L.Cruz,A.Gonzalez,M.Valero,andN.P.Topham,“Multiple-bankedregisterﬁlearchitectures,”in27thISCA,June2000,pp.316–325.[19]M.KondoandH.Nakamura,“Asmall,fastandlow-powerregisterﬁlebybit-partitioning,”inHPCA-11,pp.40–49,Jan.2005.[20]X.Zhou,C.Yu,andP.Petrov,“Compiler-drivenregisterreassign-mentforregisterﬁlepower-densityandtemperaturereduction,”in45thDAC,pp.750–753,June2008.[21]W.-W.HsiehandT.-T.Hwang,“Thermal-awarepostcompilationforVLIWarchitectures,”inASP-DAC,pp.606–611,Jan.2009.[22]L.GeorgeandA.W.Appel,“Iteratedregistercoalescing,”ACMTrans.onProgrammingLanguagesandSystems,18(13):300–324,1996.[23]C.Lee,M.Potkonjak,andW.H.Mangione-Smith,“Mediabench:Atoolforevaluatingandsynthesizingmultimediaandcommuni-cationssystems,”in30thMicro,pp.330–335,Dec.1997.[24]A.SrivastavaandA.Eustace,“ATOM:Asystemforbuildingcustomizedprogramanalysistools.”WesternResearchLab,Tech.Rep.,1994.[25]T.Austin,E.Larson,andD.Ernst,“Simplescalar:aninfrastructureforcomputersystemmodeling,”Computer,35(2):59–67,Feb.2002.[26]D.Brooks,V.Tiwari,andM.Martonosi,“WATTCH:Aframeworkforarchitectural-levelpoweranalysisandoptimizations,”in27thISCA,May2000,pp.83–94.[27]S.RusuandG.Singer,“TheﬁrstIA-64microprocessor,”IEEEJournalofSolid-StateCircuits,35(11):1539–1544,Nov2000.