第12章RHCS集群/296
12.8本章小结/352
12.7RHCS集群功能测试/340
12.6管理和维护RHCS集群/333
12.5
12.4安装RHCS/305
12.3RHCS集群的运行原理及功能/299
12.2
12.1RHCS集群概述/296
XVI
12.7.2存储集群测试/352
12.7.1高可用集群测试/340
12.6.5
12.6.4
12.6.3
12.6.2
12.6.1启动RHCS集群/333
12.5.7配置Fence设备/328
12.5.6
12.5.5
12.5.4
12.5.3
12.5.2
12.5.1创建一个cluster/310
配置RHCS高可用集群/309
12.4.4在集群节点上安装和配置iSCSI客户端/309
12.4.3
12.4.2
12.4.1安装前准备工作/306
12.3.7
12.3.6
12.3.5
12.3.4
12.3.3
12.3.2
12.3.1分布式集群管理器（CMAN）/299
12.2.2RHCS集群结构/298
12.2.1RHCS集群的组成/297
RHCS集群的组成与结构/297
www.Linuxidc.com
在集群节点上安装RHCS软件包/308
配置共享存储和RHCS管理端Luci/307
管理和维护GFS2文件系统/338
监控RHCS集群状态/336
管理应用服务/334
关闭RHCS集群/334
创建Service/319
创建Resources/315
创建FailoverDomain/314
RedhatGFS/304
集群配置和管理工具/304
高可用性服务管理器/302
栅设备（Fence）/301
配置文件管理（CCS）/300
锁管理（DLM）/299
配置表决磁盘/325
配置存储集群GFS/322
PDG
---
## Page 19
Linux公社（www.LinuxIDC.com）是专业的Linux系统门户网站，实时发布最新Linux资讯。
第13章OracleRAC集群/353
13.6ASM基本操作维护/411
13.5Oracle CRS的管理与维护/404
13.4安装OracleRAC数据库/361
13.3RAC数据库体系结构与进程/356
13.2
13.1Oracle集群体系结构/353
13.5.6快速卸载CRS/410
13.5.5管理OCR/408
13.5.4
13.5.3
13.5.2
13.5.1查看集群状态/404
13.4.16创建RAC数据库/390
13.4.15
13.4.14
13.4.13
13.4.12
13.4.11
13.4.10设置Oracle用户环境变量/367
13.4.9
13.4.8
13.4.7
13.4.6
13.4.5
13.4.4
13.4.3
13.4.2
13.4.1
13.3.4RAC数据库存储规划/359
13.3.3
13.3.2
13.3.1RAC简介/356
13.2.2OracleClusterWare进程介绍/355
13.2.1
OracleClusterWare体系结构与进程介绍/355
www.Linuxidc .com
管理voting disk/407
启动与关闭CRS/406
启动与关闭集群服务资源/405
创建Oracle用户和组/367
配置系统安全设置/367
配置hangcheck-timer内核模块/366
设置Shell对Oracle用户的限制/365
配置系统内核参数/364
检查所需软件包/364
设置数据库安装资源/363
安装前的系统配置需求/361
RAC进程管理/358
配置主机解析文件/363
OracleRAC的特点/357
安装Oracle数据库/381
OracleClusterWare简介/355
配置OracleNet/387
安装OracleClusterware/373
配置共享存储系统/369
配置节点间SSH信任/368
XVII
PDG
---
## Page 20
Linux公社（www.LinuxIDC.com）是专业的Linux系统门户网站，实时发布最新Linux资讯。
第14章构建MySQL+heartbeat+DRBD+LVS集群应用系统/430
14.6
14.5
14.4
4.1
13.9本章小结/428
13.8测试RAC数据库集群的功能/424
13.7利用srvctl管理RAC数据库/421
XVI
部署MySQL集群要考虑的问题/451
14.4.3高可用Slave集群的一些注意点/451
14.4.2利用LVS+Keepalived搭建高可用MySQLSlave集群/448
14.4.1为什么要搭建Slave集群/448
本章小结/452
搭建Slave集群/448
14.3.7heartbeat 的部署/445
14.3.6
14.3.5
14.3.4
14.3.3
14.3.2
14.3.1配置之前的准备/433
部署MySQL高可用高扩展集群/432
heartbeat+DRBD高可用性方案的实现原理/431
MySQL高可用集群概述/430
13.8.2透明应用失败切换测试/427
13.8.1负载均衡测试/424
13.7.4增加/删除/修改实例（srvctladd/remove/modify）/423
13.7.3
13.7.2
13.7.1
13.6.3管理ASM实例/413
13.6.2ASM的体系结构与后台进程/412
13.6.1ASM的特点/411
www.Linuxidc.com
MySQL的部署/441
DRBD的性能优化/440
DRBD的配置/434
：DRBD的部署/434
DRBD的维护和管理/439
启动/关闭实例（srvctlstart/stop）/423
查看RAC数据库配置信息（srvctlconfig）/422
查看实例状态（srvctlstatus）/422
河
PDG
---
## Page 21
www.Linuxidc.com
第2章
第1章
3章
Memcached应用实战
高性能HTTP加速器Varnish
轻量级HTTP服务器Nginx
Web
歌乎州
---
## Page 22
Linux公社（www.LinuxIDC.com）是专业的Linux系统门户网站，实时发布最新Linux资讯。
很多其他Web服务器无法比拟的性能和优势：
1.2.2选择Nginx的优势所在
Nginx和Apache之间的异同点后基本上就知道了Nginx作为HTTP服务器的优势所在。
用上，Nginx安装包仅仅只有儿百K，和Nginx比起来Apache绝对是庞然大物。在了解了
Fcgi的支持非常好；在处理连接方式上，Nginx支持epoll，而Apache却不支持：在空间使
静态编译，而Nginx模块都是静态编译的，同时，Apache对Fcgi的支持不好，而Nginx对
且占用很多内存资源，而Nginx却恰恰相反：在功能实现上，Apache的所有模块都支持动
URL重写、压缩传输、SSL加密传输等。它们之间最大的差别是Apache的处理速度很慢，
都支持通用的语言接口，如PHP、Perl、Python等，同时还支持正向和反向代理、虚拟主机
1.2.1Nginx与Apache的异同
1.2为什么要选择Nginx
随着Nginx在很多大型网站的广泛使用，其稳定、高效的特性逐渐被越来越多的用户认可。
可以运行在UNIX、GNU/Linux、BSD、MacOSX、Solaris以及MicrosoftWindows等操作系统中。
x"）由俄罗斯的程序设计师IgorSysoev开发（Igor将源代码以类BSD许可证的形式发布），
和反向代理服务器软件，还是一个IMAP/POP3/SMTP代理服务器。Nginx（发音是“engine
1.1什么是Nginx
Nginx安装简单、
更高的访问效率；在功能上，Nginx是优秀的代理服务器和负载均衡服务器：在安装配置上，
Apache相比有以下优势：在性能上，它占用很少的系统资源，能支持更多的并发连接，达到
通过上面的简单介绍，可以看出，Nginx作为HTTP服务器的优势是显而易见的，它有
Nginx和Apache一样，都是HTTP服务器软件，在功能实现上都采用模块化结构设计
相信很多读者都对Apache非常熟悉，Nginx与Apache类似，也是一款高性能的HTTP
本章主要介绍Nginx的配置管理和使用。作为一个轻量级的HTTP服务器，Nginx与
www.Linuxidc .com
第1章
、配置灵活。下面就详细介绍Nginx的配置与使用。
轻量级HTTP服务器Nginx
PDG
---
## Page 23
Linux公社（www.LinuxIDC.com）是专业的Linux系统门户网站，实时发布最新Linux资讯。
块。正是有了这么多模块的支撑，Nginx的功能才会如此强大。
和HTTPAccessKey模块属于第三方模块，用户根据自己的需要开发的模块都属于第三方模
块和HTTPRewrite模块属于基础模块，而HTTPUpstreamRequest Hash模块、Notice模块
块和MAIL模块等属于核心模块，HTTPAccess 模块、HTTPFastCGI模块、HTTPProxy模
完成相应的工作。
一个指令，用于URL匹配），而在这个location中所配置的每个指令将会启动不同的模块去
仅仅通过查找配置文件将客户端请求映射到一个locationblock（location是Nginx配置中的
1.3Nginx的模块与工作原理
Nginx的模块从结构上分为核心模块、基础模块和第三方模块，HTTP模块、EVENT模
图1-1展示了Nginx模块常规的HTTP请求和响应的过程。
主要与后端一些服务比如FastCGI等进行交互，实现服务代理和负载均衡等功能。
口Proxies（代理类模块）。此类模块是Nginx的HTTPUpstream之类的模块，这些模块
口
口Handlers（处理器模块）。此类模块直接处理请求，并进行输出内容和修改headers 信
Nginx的模块从功能上分为如下三类。
Nginx由内核和模块组成，其中，内核的设计非常微小和简洁，完成的工作也非常简单，
口
口
口
口
口作为代理服务器，Nginx可以实现无缓存的反向代理加速，提高网站运行速度。
口作为Web服务器，Nginx处理静态文件、索引文件，自动索引的效率非常高。
后由Nginx输出。
Filters（过滤器模块）。此类模块主要对其他处理器模块输出的内容进行修改操作，最
息等操作。Handlers处理器模块一般只能有一个。
到7×24小时不间断地运行。
情况下，对软件版本或者配置进行升级，即使运行数月也无需重新启动，几乎可以做
在高可用性方面，Nginx支持热部署，启动速度特别迅速，因此可以在不间断服务的
存，因此，类似DOS这样的攻击对Nginx来说基本上是没有任何作用的。
Nginx官方表示，Nginx保持10000个没有活动的连接，而这些连接只占用2.5MB内
在稳定性方面，Nginx采取了分阶段资源分配技术，使得CPU与内存的占用率非常低。
应，而且只占用很低的内存资源。
核Poll模型，可以支持更多的并发连接，最大可以支持对50000个并发连接数的响
在性能方面，Nginx是专门为性能优化而开发的，在实现上非常注重效率。它采用内
代理服务器对外进行服务，同时还支持简单的容错和利用算法进行负载均衡。
作为负载均衡服务器，Nginx既可以在内部直接支持Rails和PHP，也可以支持HTTP
www.Linuxidc.
.com
3
---
## Page 24
Linux公社（www.LinuxIDC.com）是专业的Linux系统门户网站，实时发布最新Linux资讯。
以往稳定版本的汇总，不包含最新的功能。
较慢，但是bug较少，可以作为生产环境的首选，因此通常建议使用稳定版。历史稳定版为
下来，就会被加人稳定版分支中。然而有些新功能不一定会被加到稳定版中去。稳定版更新
较快，包含最新的功能和bug的修复，但同时也可能会出现新的bug。开发版一且更新稳定
得Nginx的最新版本信息。Nginx有三个版本：稳定版、开发版和历史稳定版。开发版更新
1.4.1下载与安装Nginx
1.4Nginx的安装与配置
处理请求只能由一个模块来完成。
否进行加载。在解析配置文件时，Nginx的每个模块都有可能去处理某个请求，但是同一个
模块被自动加载，不像Apache，首先将模块编译为一个so文件，然后在配置文件中指定是
程包含多个线程。Nginx默认为单工作进程模式。
除主进程外，还有一个工作进程，工作进程是单线程的；在多工作进程模式下，每个工作进
4第1篇Web应用篇
Nginx的官方网站是http://sysoev.ru/nginx/，英文主页为http://nginx.net，从这里可以获
Nginx的模块直接被编译进Nginx，因此属于静态编译方式。启动Nginx后，Nginx的
在工作方式上，Nginx分为单工作进程和多工作进程两种模式。在单工作进程模式下，
www.Linuxidc.com
处理器模块
选择--个Handlers
HTTP发出请求
图1-1Nginx模块的HTTP请求和响应过程
Nginx内核
Handlers处理器模块）
Filters（过滤器模块1）
Filters（过滤器模块2）
Filters（过滤器模块N）
N
处理内容
HTTP响应请求
生成内容
---
## Page 25
Linux公社（www.LinuxIDC.com）是专业的Linux系统门户网站，实时发布最新Linux资讯。
为location层，并且一个serverblock中可以包含多个location block。
HTTP等层级，而在HTTP层中又包含有server层，即server block，server block中又可分
可以分为几个层次，整个配置文件中main指令位于最高层，在main层下面可以有Events、
个配置文件是以block的形式组织的。每个block一般以一个大括号“{”来表示，block
1.4.2
NginxStatus功能，以监控Nginx的当前状态。
那么可以通过“--with-http_perl_module”方式进行安装。下面是安装过程：
块。可以通过“/configure--help”选项设置各个模块的使用情况，例如对不需要的http_ssi
点介绍pcre-devel库。
软件库可以通过安装光盘直接选择安装，而pcre-devel库默认不在系统光盘中，所以这里重
Nginx之前，确保系统已经安装了gcc、openssl-devel、pcre-devel和zlib-devel软件库。
Linux开发库是在安装系统时通过手动选择安装的，gcc、openssl-devel、zlib-devel三个
一个完整的配置文件结构如图1-2所示。
Nginx的配置文件是一个纯文本文件，它一般位于Nginx安装目录的conf目录下，整
至此，Nginx已经安装完成了。
在上面的configure选项中，“--with-http_stub_status_module”可以用来启用Nginx的
[rcot@localhost nginx-0.7.65]#make instal1
Nginx的安装非常简单。在默认情况下，经过编译安装的Nginx包含了大部分可用模
2.开始安装Nginx
安装pcre库是为了使Nginx支持HTTPRewrite模块。
1.安装Nginx所需的pcre-devel库
这里选择当前的稳定版本nginx-0.7.65作为介绍对象，开始介绍编译安装。在安装
[root@localhost nginx-0.7.65]#make
[rootalocalhost home]# tar zxvf nginx-0.7.65.tar.gz
[root@localhost pcre-8.02]#make instal1
root@localhost pcre-8.02]#make
root@localhost pcre-8.02)#./configure
[root@localhost home]# tar zxvf pcre-8.02.tar.gz
Nginx配置文件的结构
www.Linuxidc.
--prefix=/opt/nginx
。同理，如果需要“http_perl”模块，
下面进行安装，过程如下：
轻量级HTTP服务器Nginx5
.com
---
## Page 26
Linux公社（www.LinuxIDC.com）是专业的Linux系统门户网站，实时发布最新Linux资讯。
依次讲解。下面就围绕这7个部分进行介绍。
了解Nginx的结构和每个配置选项的含义，这里按照功能点将Nginx配置文件分为7个部分
指令，例如Http SSL模块、Http GzipStatic模块和HttpAddition模块等。
核心模块指令。同时每个部分还可以使用其他HTTP模块