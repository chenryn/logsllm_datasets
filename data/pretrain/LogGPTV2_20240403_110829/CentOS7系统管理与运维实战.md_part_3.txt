由于Linux中的系统服务与网络息息相关，因此无论所在企业是否有专职网络管理人员，
系统作为服务的承载，无论是在安装过程中还是在管理、维护过程中都需要一定的技能，
除以上列举的常见应用系统服务之外，还有一些服务，例如 DNS、邮件服务等，这些服
（4）文件服务：文件服务通常是FTP和Samba，
（3）脚本语言：随着自动化运维的普及，运维工程师会接触到大量的脚本。接触最多的
（2）数据库：与网页服务器协同运行的通常还有数据库，虽然Linux能使用的数据库有
（1）网页服务：Apache、Nginx配合PHP无疑是Linux系统中最常用的网页服务器平台
（1）网络基础知识部分：包括IP地址与子网、路由等。无论企业是否有专职网络管理人
网络承载着所有的网络服务，是运维工作的基础所在。目前大部分企业中通常会有专职人
系统和系统服务
网络知识
“一列举。
目前仍有不少企业仍在使用这类服务，
---
## Page 17
Linux的版本、CentOS 的发展及特点，还有运维工程师需要具备的技能等知识。
公司或个人开发者选择使用Linux。Linux在服务器领域也具有广泛的应用。本章主要介绍了
解对端设备类型、特性就可以完成大部工作。
止攻击、配置防火墙等都需要这些知识。
至少应该了解这些知识，以便准确判断故障发生于何处。
网络知识远不止以上列举的这些，但对于运维工程师而言，不必完全掌握，有时只需要了
Linux是一个免费、开源的操作系统软件，是自由软件和开源软件的典型代表，很多大型
（3）TCP和UDP协议、防火墙：在运维工作中这些知识必不可少，例如优化系统、防
（2）网络结构知识部分：包括VLAN、交换机与路由器配置、网络拓扑等。运维工程师
小结
第1章开启Linux系统管理与运维的大
L5
---
## Page 18
展分区之上再划分可以存放数据的逻辑分区。
因此如果想在一个硬盘上创建4个以上分区，光主分区是不够的。
概念依然存在。因此首先介绍一下分区类型：
方面手动进行分区方案（而不是由安装程序自行分区）可以认识Linux系统中各目录的作用。
学习用户而言，推荐读者使用一个比较合理的静态分区方案。一方面静态分区方案不太复杂，另一
2.1.1磁盘分区
须知道的一些基础知识。
CentOS 中有许多非常专业的概念和软件结构，在正式开始之前，本节将介绍安装CentOS必
Linux，然后介绍Linux的其他安装方式。通过本章，读者可以掌握Linux的系统安装过程。
机器上，也可以采用虚拟机安装。本章首先介绍虚拟机的相关知识，演示如何在虚拟机上安装
（2）扩展分区：扩展分区也是一种主分区，但扩展分区不能用来存放数据，但可以在扩
在Windows 系统中，分区类型是一个已经被淡化的概念，但在Linux系统分区时，这些
安装一个全新的CentOS如同安装全新的Windows一样，都需要先对磁盘进行分区。对于个人
（1）主分区：主分区可以直接用来存放数据，但在一个硬盘上主分区最多只能有4个，
作为一个企业使用的专业操作系统，直接使用CentOS对初学者有较大难度。这是因为
学习Linux首先要了解Linux的安装。安装Linux有多种方法，可以直接将Linux安装到某台
本章主要涉及的知识点有：
（3）逻辑分区：逻辑分区是在扩展分区的基础上建立的，可以用来存放数据
旧版本如何升级
认识虚拟机
安装后如何进行配置
如何安装Linux
安装CentOS必须知道的基础知识
跟我学Centos的安装
第2章
---
## Page 19
就可以使用逻辑卷存放数据了。使用逻辑卷有以下优点：
理卷（PV），然后将物理卷组成卷组（VG），然后在卷组的基础上再划分逻辑卷（LV)，最后
理（Logical Volume Manager，逻辑卷管理常简写为LVM）方案。LVM先将硬盘分区转化为物
间断运行的服务，最好不要使用静态分区方案。
间耗尽后自动停止，即使运维工程师及早发现，也会在更换硬盘时停止服务。因此这类要求不
这类服务会随时间增加逐渐占用大量硬盘空间。如果使用静态分区方案，这类服务会在硬盘空
题。但对于某些特定的生产环境而言，这种方法弊大于利。例如要求不间断运行的数据库中心，
2.1.2
提示
类清晰，读写速度相对更快；另一方面即使存放系统和软件的硬盘损坏，数据也不会有所损失。
作系统和应用软件放在本地硬盘上，数据单独存放于存储或单独的分区中，这种方案一方面分
据具体业务来决定分区方案，生产环境分区方案一般奉行系统、软件与数据分开的原则。即操
到分区中，例如分一个500MB的分区挂载到用户家目录/home下面。如果是生产环境就需要根
统中的这些数据都不会太多，因此推荐将他们都放在一起。
都分到这个分区中。此时该分区中包含了用户家目录、配置文件、数据文件等内容，初学者系
存不足时，系统会将内存中不常用的数据存放到 swap 中，即 swap 此时被当作了虚拟内存。
放系统引导时使用的文件，通常我们称为引导分区。
定不同。对于以学习为目的的初学者而言，一
的分区，这样做的好处是用户可以按自己的需要为某个目录单独扩展空间。
在不同的目录下面，这个过程称为挂载，目录称为挂载点。只要进入挂载点目录就进入了相应
只要进入这些盘符就进入了相应的分区。但在Linux系统中没有盘符的概念，不同的分区被挂
之前首先需要明确一个概念，在Windows系统中，不同的分区被使用C、D、E等盘符替代，
展分区的基础上划分多个逻辑分区。
为了防止需要不间断运行服务因硬盘空间耗尽而停止，此时应该采用更加先进的逻辑卷管
制订分区方案首先需要了解自己的需求，生产环境中的系统与以学习为目的的分区方案肯
明白了分区类型的概念之后，安装CentOS时还需要制订一个分区方案。在制订分区方案
对于普通用户而言，直接对硬盘分区然后挂载这种使用静态分区的方法几乎没有什么问
以上就是一个最简单的分区方案，初学者也可以尝试将再多几个分区，将其他目录也挂载
（3）根分区“/”：根分区的挂载点是“)”，这个目录是系统的起点，可以将剩余的空间
（2）swap分区：这个分区没有挂载点，大小通常为内存的2倍。系统运行时，当物理内
（1）/boot：创建一个约300MB~500MB的分区挂载到/boot下面，这个分区主要用来存
从上面的介绍中可以看出，如果需要划分4个以上分区，就必须使用扩展分区，然后在扩
静态分区的缺点及逻辑卷管理简介
添加新硬盘分区时会用到。
分区类型在安装操作系统时不会有具体体现，但在操作系统安装完成后使用fdisk等工具
一个最简单的分区方案应该包括以下内容：
第2章跟我学CentOS的安装
---
## Page 20
P
Novell NetWare 等。为了读者能更好地使用Workstation，现将一些常见使用技巧列举如下：
不同的客户需求开发了许多虚拟化产品。例如针对个人桌面的Workstation，用于企业环境的
操作系统，拥有相互独立的CPU、内存等硬件，运行时互相不影响。虚拟化技术的好处是将CPU、
2.1.3
静态分区，待系统安装好之后再学习逻辑卷操作。
据的一致性受到影响。
卷组，这个过程也可以在线进行，无须关闭服务。
无须停止服务就可以进行。即使卷组中没有剩余空间，也可以向卷组添加新物理卷为卷组扩容，
了大小，但只要卷组中还有剩余空间，就可为逻辑卷扩容，扩容过程是在线进行的，这意味着
CentOS7系统管理与运维实战
界面如图2.1所示。
VMwarevSphere等。本书中多使用VMware Workstation 作演示，VMwareWorkstation运行时
关的虚拟化软件有许多，但对于初学者普遍推荐使用VMware公司的Workstation。
内存等硬件资源实现动态分配、灵活高度使用，从而提高资源的利用效率。如今虚拟化厂商和相
者可以自行阅读相关文档了解。虽然逻辑卷有诸多好处，但依然建议初学者在安装系统时使用
VMware公司是最早从事虚拟化技术的公司之一，也是虚拟化技术的领导厂商，公司针对
（2）当硬盘空间不足时，可以添加更大的硬盘，从而将卷组中那些容量较小的硬盘移出
虚拟化技术是指在一台计算机上同时运行多个逻辑计算机，这些逻辑计算机可以运行不同的
逻辑卷管理还有许多其他可能，例如减小逻辑卷空间等，此处不再一一介绍，感兴趣的读
Workstation可以虚拟许多操作系统，例如Windows7、各种发行版的Linux和Unix、Solaris、
（1）虚拟机的监视器：打开某个虚拟机的电源之后，Workstation会自动显示虚拟机监视
（3）可以为逻辑卷添加快照卷，利用这一功能可以实现数据备份等操作，而无须担心数
（1）可以解决硬盘空间不足，需要停止服务迁移数据的问题。虽然在划分逻辑卷时指定
虚拟化和VMwareWorkstation简介
E）
图2.1VMwareWorkstation运行界面
---
## Page 21
将选择从哪个镜像站点下载，国内通常可以使用网易、中国科技大学（网址开头为
在下载页面中选择安装镜像类型。此处选择“DVDISO”标准安装镜像即可，接下来的页面
然后在搜索结果中选择其官方网站访问，如图2.2所示。
http://www.centos.org/。可以直接在浏览器中输入网址访问，也可以在搜索引擎中输入CentOS，
2.1.4下载最新的CentOS 安装版本
#示
一介绍，感兴趣的读者可以自行阅读相关文档了解。
后返回作快照的时刻。
中设置。
拟机通信可以使用仅主机模式（Host-Only）：如果宿主机有多个网络，可以在虚拟网络编辑器
桥接模式（bridged）：如果仅想让虚拟机连接网络可以选择NAT模式；如果只想让宿主机与虚
面单击发送Alt+Ctrl+Del。
Alt+Ctrl+Del将被宿主计算机获得，此时可以使用Alt+Ctrl+Insert替代或在菜单栏的虚拟机下
的虚拟机。如果要让宿主计算机重新获得鼠标和键盘的控制权，可以使用Alt+Ctrl快捷键。
器。将鼠标移动到监视器内并单击，Workstation会自动将鼠标和键盘的控制权交给正在运行
目前最新的版本为CentOS7，要安装首先需要从其官方网站上下载，其官方网站为
Workstation是一个功能十分强大的虚拟化软件，
（4）Workstation附带有快照功能，使用快照功能将虚拟机保持在某一刻，使用一段时间
（3）Workstation为虚拟机提供了多种网络：如果要让虚拟机使用宿主机的网络可以使用
（2）当虚拟机获得鼠标和键盘的控制权后，可以进行任何输入和控制，但使用组合键
软件来替代。
VMwareWorkstation是一个收费软件，读者完全可以选择OracleVMVirtualBox这类免费
CEntOSETENTOS
Get Centos7Now
CentOs 7 is here
图2.2CentOS官方网站
YATIG
，其使用方法和技巧有很多，此处不再一
cent0s7fory86_64.Includingmages
COTE
第2章跟我学CentOS的安装
hueyhe
unityBaive
6
---
## Page 22
求用户选择安装来源，如图2.4所示。
的兼容版本，SCSI控制器类型等，此处选择“典型”，然后单击“下一步”。接下来向导会要
2.2.1
环境，因此本节将模拟不同的环境，使用不同的方法安装CentOS。
提示
络安装映像）等，这些安装映像都可以从http://mirrors.163.com/centos/7.0.1406/isos/x86_64/处
CentOS7系统管理与运维实战
0
一步”。接下来向导会提示用户选择操作系统类型，如图2.5所示。
虚拟机向导，如图2.3所示。
下载。
http://centos.ustc.edu.cn）等速度不错的站点。
通常不建议大家在此处选择安装光盘，
除了DVD 标准安装镜像之外，还有 Everything 版（完整版安装光盘）、NetlInstal版（网
在虚拟中单击菜单栏中的“文件”，在弹出的菜单中选择“新建虚拟机”，之后将弹出新建
完成之前的知识积累和软件下载后，就可以开始安装CentOS了。读者可能会遇到不同的
首先需要选择采用什么类型新建虚拟机，如果使用自定义，向导将会要求用户选择虚拟机
创建虚拟机
刻录为光盘使用，虚拟机也可以直接使用映像文件作为光盘使用。
下载完成后是一个扩展名为iso的光盘映像文件，可以使用软碟通等软件将光盘映像文件
安装
Centos
Workstation
mware
图2.3新建虚拟机向导
，此处建议选中“稍后安装操作系统”，并单击“下
您希望使用什么类型的配置？
欢迎使用新建虚拟机向导
---
## Page 23
建页面，如图2.8所示。
在弹出的常规页面中查看文件系统类型。选择好磁盘选项后，单击“下一步”就会弹出完成创
这是因为FAT32不支持4GB以上的单个文件。用户可以在对应的盘符上单击右键选择“属性”，
是由存放虚拟机文件的分区类型决定的。如果文件类型为FAT32，必须选择存储为多个文件，
文件则按文件大小调整硬盘空间大小。之后将选择虚拟磁盘存储为单个文件还是多个文件，这
的目录，最后单击“下一步”进入指定磁盘容量页面，如图2.7所示。
接下来向导会提示用户命名虚拟机，如图2.6所示。
（截至本书编写时CentOS7还没有发布32位版，因此此处选择64位版），然后单击“下一步
在虚拟机名称中输入虚拟机名，然后单击位置后面的“浏览”按钮，选择虚拟机文件保存
如果仅需要安装基本版的CentOS7，磁盘空间10GB已经足够使用了；如果要存放其他
新建色做机同导
在“编辑”首选项“中可更改默认位置
安装程序光盘映像文件（1so（M）:
安装程序光盘（D）：
安装来源：
创建的虚拟机将包含一个空白硬盘。
销后安装操作系统（5)。
DVD RW驱动器（G:）)
图2.6命名虚拟机
图2.4选择安装来源
版本（V)
客户机操作系统
将虚拟磁盘存储为单个文件（0）
CentOS64位的建议大小：20GB
最大磁盘大小（GB(S）
ESX(X)
letWare(E)
Windows(W)
图2.5选择操作系统类型
图2.7指定磁盘容量
第2章跟我学CentOS的安
---
## Page 24
如果要使用U盘、移动硬盘等设备，硬件中必须包含USB控制器；安装时需要使用光盘，因
CentOS7系统管理与运维实战
12
#做01
参数设置。详细步骤如下：
2.2.2
此CD/DVD设备也必不可少。确认以上信息之后就可以单击“完成”按钮，完成虚拟机创建。
定义硬件设备页面中，需要检查内存容量应该大于512MB，否则CentOS将无法启动安装程序：
Linux的安装方法有很多种，本小节主要以光盘安装为例介绍Linux的安装过程及相关的
在完成创建页面中，可以单击“自定义硬件”按钮弹出修改虚拟机的硬件设备页面。在自
2
打开创建的虚拟机，单击“编辑虚拟机设置”
光盘安装CentOS 7
右键单击，并在弹出的菜单中选择“设置”
新建成报#向导
将使用下列设置创建虚拟机：
系统：
图2.9虚拟机设置窗口
添
图2.8完成创建页面
上一#完
，调出虚拟机设置窗口，如图2.9所示。
，或在主窗体右侧库中找到新建的虚拟机
取消
高级
---
## Page 25
程序，此时可以按Enter键或等待数秒待系统自动启动安装程序。
选择第一项，直接安装CentOS7，如果对安装光盘表示怀疑也可选择第二项。
然后再安装，第三个选项主要用来测试内存和启动救援模式修复已存在的CentOS。此示例中
生独02
存设置即可。
此例中选择“使用ISO映像文件”并单击浏览选择下载的光盘文件，完成后单击“确定”保
驱动器”（即使用宿主机的光驱）或“使用ISO映像文件”。读者可根据实际情况进行选择，
选中第一项“InstallCentOS7”并按Enter键，等待数秒后会提示用户按Enter键启动安装
03
画面中给出了三个选项，“Install CentOS 7”、“Test this media& installCentOS 7”和
通过以上步骤完成虚拟机的参数设置，下一步是启动虚拟机，单击“开启虚拟机”
Windows的安装类似，如图2.11所示。
启动后耐心等待安装程序引导完毕，即进入Linux的安装界面。Linux 的安装和
选项或单击其中的绿色箭头即可启动虚拟机，如图2.10所示。
图2.11Linux引导选择画面
Autonatic boot in 59 second
我的电脑
图2.10启动虚拟机
入内容进行搜
Cent087
回Cen
第2章跟我学CentOS的安装
3
---
## Page 26
可继续安装。
步05
左侧选择“中文”，右侧选择“简体中文（中国）”，单击Continue完成设置。
需要注意的是此处选择的语言仅为安装过程中使用的语言，并不影响系统的最终语言。本例中
步骤04
安装程序将需要用户设置的信息分为三个部分：本地化、软件和系统，完成这些设置后方
此处可以保持默认，也可以在左侧选项中选择“中文”，右侧中选择“简体中文（中国)”。
接下来安装程序将显示安装信息摘要界面，如图2.13所示。
安装程序启动后，首先会提示用户在安装过程中使用的语言，如图2.12所示。
Centos
Centos
图2.12安装程序询问安装过程中使用的语言
安装信息摘器
系统
次件
本地化
Fh
nghEnglshsish UntedStote
Eenapyckan
Asturianu
Whatlanguagewoudyoulketousedurng thenstallatonprocess?
图2.13安装信息摘要界面
Afrlkaans
安体置0分区
安装源
湖南（中国）
Bengal
Bulganan
Belarusa
Assamese
Arabhic
Amhianie
Afrikaans
WELCOMETOCENTOS7.
点击“开始安装”按扭
English(Hong Kong SARChia)
English (Nigeria)
English(reland)
English(Austrata)
nalish
English
整件选择（5）
(Canada)
utConte
Zealand)
tedKingdom)
作意的斑盘
---
## Page 27
步骤07