Huawei NE16EX 系列多业务企业路由器
日志参考 12 BGP
日志参数
参数名称 参数含义
MessageType 消息类型。包括四种类型：
l ISSU_BATCH_BAK1：ISSU第一次批量备份消息。
l ISSU_BATCH_BAK2：ISSU第二次批量备份消息。
l ISSU_BATCH_BAK3：ISSU第三次批量备份消息。
l ISSU_SMOOTH_INSIDE：ISSU模块内平滑消息。
可能原因
HA状态变迁时，RM需要通知协议模块做相应操作。
处理步骤
步骤1 正常运行信息，无需处理。
----结束
12.10 BGP/6/INST_EXIT_GR
日志信息
BGP/6/INST_EXIT_GR:The BGP instance [vpn-instance] exited from GR and notified the
RM.
日志含义
BGP实例退出GR，并通知RM。
日志参数
参数名称 参数含义
[vpn-instance] VPN实例。
可能原因
GR正常流程，某BGP实例退出GR时触发。
处理步骤
步骤1 正常运行信息，无需处理。
----结束
文档版本 03 (2017-06-22) 华为专有和保密信息 67
版权所有 © 华为技术有限公司
Huawei NE16EX 系列多业务企业路由器
日志参考 12 BGP
12.11 BGP/3/L2V_MAX_LB_REACHED
日志信息
BGP/3/L2V_MAX_LB_REACHED:The number of label blocks has reached the upper limit
[ULONG].
日志含义
标签信息组已满。
日志参数
参数名称 参数含义
[ULONG] 标签空间大小。
可能原因
标签空间被用尽。
处理步骤
步骤1 检查网络拓扑和配置，确认标签用尽是实际应用需求还是错误的拓扑配置导致。
步骤2 如果是实际应用需求，请扩容。
----结束
12.12 BGP/3/MEMORY_RESTORE
日志信息
BGP/3/MEMORY_RESTORE:The message that memory was restored was received from the
RM.
日志含义
从RM接收到内存恢复消息。
日志参数
参数名称 参数含义
无 无
文档版本 03 (2017-06-22) 华为专有和保密信息 68
版权所有 © 华为技术有限公司
Huawei NE16EX 系列多业务企业路由器
日志参考 12 BGP
可能原因
路由器的内存使用率从MEMORY SHORTAGE状态重新降低到阈值以下。
处理步骤
步骤1 请收集日志信息和配置信息，并联系技术支持人员。
----结束
12.13 BGP/6/RECV_NOTIFY
日志信息
BGP/6/RECV_NOTIFY:The router received NOTIFICATION message from peer [neighbor-
address]. (ErrorCode=[ULONG], SubErrorCode=[ULONG], BgpAddressFamily=[STRING],
ErrorData=[STRING])
日志含义
路由器收到BGP邻居发来的NOTIFICATION报文。
日志参数
参数名称 参数含义
[neighbor-address] 邻居路由器的IP地址。
ErrorCode NOTIFICATION报文中携带的错误码。
SubErrorCode NOTIFICATION报文中携带的错误子码。
BgpAddressFamily BGP地址族标志。分为PUBLIC和VPN两种。
ErrorData NOTIFICATION报文中携带的错误数据摘要。
可能原因
路由器收到BGP邻居发来Notification报文，包括错误码和错误子码内容。
处理步骤
步骤1 请确认BGP邻居断连的原因，是否执行了reset bgp命令。
步骤2 请收集日志信息和配置信息，并联系技术支持人员。
----结束
文档版本 03 (2017-06-22) 华为专有和保密信息 69
版权所有 © 华为技术有限公司
Huawei NE16EX 系列多业务企业路由器
日志参考 12 BGP
12.14 BGP/4/ROUTEADD_REACHLMT
日志信息
BGP/4/ROUTEADD_REACHLMT:Failed to update the route in the [flag] instance because
the number of routes reached the maximum. (InstanceId=[USHORT], AFI=[USHORT],
SAFI=[USHORT])
日志含义
在实例中路由更新失败，原因是路由量达到上限。
日志参数
参数名称 参数含义
[flag] BGP地址族标志。分为PUBLIC和VPN 。
InstanceId 实例ID。
AFI 主地址族。
SAFI 子地址族。
可能原因
路由量超过了路由表阈值，导致BGP路由添加失败。
处理步骤
步骤1 检查网络拓扑和配置，确认路由量超阈值是实际应用需求还是错误的拓扑配置导致。
步骤2 如果是实际应用需求，请扩容。
----结束
12.15 BGP/3/RECV_UNSPT_AFI
日志信息
BGP/3/RECV_UNSPT_AFI:The UPDATE message received from peer [peer-address]
contained unknown address family [address-family-attribute] in path attribute of multi-
protocol unreachable network layer reachable information.
日志含义
从BGP邻居收到的UPDATE报文中，多协议不可达路由信息的路由属性包含未知的地址
族属性。
文档版本 03 (2017-06-22) 华为专有和保密信息 70
版权所有 © 华为技术有限公司
Huawei NE16EX 系列多业务企业路由器
日志参考 12 BGP
日志参数
参数名称 参数含义
[peer-address] 对等体IP地址。
[address-family-attribute] 地址族属性值。
可能原因
Update报文中多协议不可达路由信息的路由属性包含未知的地址族属性。
处理步骤
步骤1 查看两端是否为不同厂商设备，支持的功能范围是否有所不同。
步骤2 请收集日志信息和配置信息，并联系技术支持人员。
----结束
12.16 BGP/4/ROUTPRIX_EXCEED
日志信息
BGP/4/ROUTPRIX_EXCEED:Routes received from peer [neighbor-address] including the
number of prefix [receive-prefix-number] exceeded the max number of prefix [max-prefix-
number]. (BgpAddressFamily=[STRING])
日志含义
从一个邻居路由器收到的前缀数目超过了设定的最大值。
日志参数
参数名称 参数含义
[neighbor-address] 邻居路由器的IP地址。
[receive-prefix-number] 从邻居路由器收到的前缀个数。
[max-prefix-number] 最大的前缀个数。
BgpAddressFamily BGP地址族标志。分为PUBLIC和VPN两种。
可能原因
从一个邻居路由器收到路由数目超过了设定的最大值。
处理步骤
步骤1 检查网络拓扑和配置，确认路由量超限是实际应用需求还是错误的拓扑配置导致。
文档版本 03 (2017-06-22) 华为专有和保密信息 71
版权所有 © 华为技术有限公司
Huawei NE16EX 系列多业务企业路由器
日志参考 12 BGP
步骤2 如果是实际应用需求，请修改peer route-limit的配置。
----结束
12.17 BGP/3/ROUTTHRD_REACHED
日志信息
BGP/3/ROUTTHRD_REACHED:The number of routes received from peer [neighbor-
address] reached route threshold value [threshold-value]. (BgpAddressFamily=[STRING],
CurrentRouteNumber=[ULONG], MaxRouteNumber=[ULONG])
日志含义
从一个邻居路由器收到路由数目超过了设定的阈值。
日志参数
参数名称 参数含义
[neighbor-address] 邻居路由器的IP地址 。
[threshold-value] 路由数阈值。
BgpAddressFamily BGP地址簇。
CurrentRouteNumber 当前路由数；
MaxRouteNumber 最大的路由数。
可能原因
从一个邻居路由器收到路由数目超过了设定的阈值。
处理步骤
步骤1 检查网络拓扑和配置，确认路由量超阈值是实际应用需求还是错误的拓扑配置导致。
步骤2 如果是实际应用需求，请修改Peer route-limit配置。
----结束
12.18 BGP/6/SEND_NOTIFY
日志信息
BGP/6/SEND_NOTIFY:The router sent a NOTIFICATION message to peer [peer-address].
(ErrorCode=[ULONG], SubErrorCode=[ULONG], BgpAddressFamily=[STRING],
ErrorData=[STRING])
日志含义
路由器向BGP邻居发送NOTIFICATION报文。
文档版本 03 (2017-06-22) 华为专有和保密信息 72
版权所有 © 华为技术有限公司
Huawei NE16EX 系列多业务企业路由器
日志参考 12 BGP
日志参数
参数名称 参数含义
[peer-address] 对等体的IP地址。
ErrorCode 发送报文中携带的错误码。
SubErrorCode 错误子码的值。
BgpAddressFamily BGP地址族标志。分为PUBLIC和VPN两种。
ErrorData 发送报文中携带的错误数据摘要。
可能原因
路由器向BGP邻居发送Notification报文，包括错误码和子错误码内容。
处理步骤
步骤1 请确认BGP邻居断连的原因，是否执行了reset bgp命令。
步骤2 错误码和错误子码的描述和可能原因，请参考。
步骤3 请收集日志信息和配置信息，并联系技术支持人员。
----结束
12.19 BGP/6/SNMP_PEER_SHUTDOWN
日志信息
BGP/6/SNMP_PEER_SHUTDOWN:An SNMP command was received to suspend the peer
session for [peer-address]. (InstanceName:[STRING])
日志含义
BGP接收到了一个SNMP命令，将要关闭邻居之间的连接。
日志参数
参数名称 参数含义
[peer-address] 对等体的IP地址。
InstanceName BGP实例名。
可能原因
通过MIB软件设定stop，断连接。
文档版本 03 (2017-06-22) 华为专有和保密信息 73
版权所有 © 华为技术有限公司
Huawei NE16EX 系列多业务企业路由器
日志参考 12 BGP
处理步骤
步骤1 正常运行信息，无需处理。
----结束
12.20 BGP/4/BGP_SPEC_RT_EXCD
日志信息
BGP/4/BGP_SPEC_RT_EXCD:The number of BGP [route-type] routes reached the
maximum value [max-route-value].
日志含义
BGP的某种路由数量达到最大值。
日志参数
参数名称 参数含义
[route-type] 路由类型，比如BGP L2VPN-AD路由。
[max-route-value] 路由数量最大值。
可能原因
BGP的某种路由数量达到最大值，比如L2VPN-AD路由数量达到最大值。
处理步骤
步骤1 检查网络拓扑和配置，确认路由量超限是实际应用需求还是错误的拓扑配置导致。
步骤2 如果是实际应用需求，请联系技术支持人员进行扩容。
----结束
12.21 BGP/4/SPEC_RT_EXCD_THLD
日志信息
BGP/4/SPEC_RT_EXCD_THLD:The number of BGP [STRING] routes reached the
threshold value [ULONG].
日志含义
BGP的某种路由数量达到阈值。
文档版本 03 (2017-06-22) 华为专有和保密信息 74
版权所有 © 华为技术有限公司
Huawei NE16EX 系列多业务企业路由器
日志参考 12 BGP
日志参数
参数名称 参数含义
[route-type] BGP路由类型。
l IPv4：IPv4路由，包括IPv4公网路由和IPv4私网路由
l IPv4 Public：IPv4公网路由
l IPv4 VRF：IPv4私网路由
l IPv6：IPv6路由，包括IPv6公网路由和IPv6私网路由
l IPv6 Public：IPv6公网路由
l IPv6 VRF：IPv6私网路由
l L2AD：BGP L2VPN-AD路由
[threshold-value] BGP的某种路由数量的阈值。
可能原因
BGP的某种路由数量达到阈值上限值。
处理步骤
步骤1 检查网络拓扑和配置，确认路由数量超限是实际应用需求还是异常配置导致。
步骤2 如果是实际应用需求，请联系工程师进行扩容。
----结束
12.22 BGP/3/STATE_CHG_UPDOWN
日志信息
BGP/3/STATE_CHG_UPDOWN:The status of the peer [peer-address] changed from
[previous-state] to [current-state]. (InstanceName=[STRING],
StateChangeReason=[STRING])
日志含义
邻居状态改变。
日志参数
参数名称 参数含义
[peer-address] BGP对等体的IP地址。
[previous-state] 前一状态。
[current-state] 当前状态。
文档版本 03 (2017-06-22) 华为专有和保密信息 75
版权所有 © 华为技术有限公司
Huawei NE16EX 系列多业务企业路由器
日志参考 12 BGP
参数名称 参数含义
InstanceName 实例名称。
StateChangeReason 状态改变原因。
可能原因
BGP连接状态发生切换。
处理步骤
步骤1 正常运行信息，无需处理。
----结束
12.23 BGP/4/UNKNOWN_TYPE
日志信息
BGP/4/UNKNOWN_TYPE:Type of the backup data was unknown. (ID=[USHORT],
Length=[USHORT])
日志含义
主板的备份信息在备板无法被识别。
日志参数
参数名称 参数含义
ID 备份数据的ID。
Length 备份数据的长度。
可能原因
主备板的版本不一致。
处理步骤
步骤1 备板使用与主板相同的版本重新启动。
----结束
文档版本 03 (2017-06-22) 华为专有和保密信息 76
版权所有 © 华为技术有限公司
Huawei NE16EX 系列多业务企业路由器
日志参考 13 CM
13
CM
关于本章
13.1 CM/0/USER_ADDACLFAIL
13.2 CM/5/USER_ACCESSRESULT
13.3 CM/0/VM_USER_ADDACLFAIL
13.4 CM/0/USER_ADDSERVICEFAIL
13.5 CM/5/USER_OFFLINERESULT
13.6 CM/4/USER_ADDCOSFAIL
13.7 CM/3/ALLOCUSERFAIL
13.8 CM/3/USERSPECFULL
文档版本 03 (2017-06-22) 华为专有和保密信息 77
版权所有 © 华为技术有限公司
Huawei NE16EX 系列多业务企业路由器
日志参考 13 CM
13.1 CM/0/USER_ADDACLFAIL
日志信息
CM/0/USER_ADDACLFAIL:The ACL cannot be added for NAC users. Ensure that this
ACL is supported by the NAC service or ACL resources are sufficient. ([STRING])
日志含义
某用户的ACL授权失败，需检查配置的ACL是否支持或ACL资源是否充足。
日志参数
参数名称 参数含义
[STRING] 用户ID和用户MAC
可能原因
l 下发的RADIUS属性文档上没有宣称支持的ACL。
l 由于底层芯片问题，导致下发ACL到底层芯片时失败。
l 由于ACL资源不足，导致下发ACL到底层芯片时失败。
处理步骤
步骤1 执行display access-user user-id user-number命令检查该用户所授权的ACL，是否满足
RADIUS属性文档上所描述的支持项。
l 如果否，则需修改为RADIUS属性文档上所描述的支持项再重新下发给用户，然后
执行display access-user user-id user-number命令检查是否下发成功。
l 如果是，则是底层下发失败导致，请执行步骤2。
步骤2 执行display acl resource slot slot-number命令检查ACL资源是否充足。
l 如果不充足，则请先释放ACL资源，然后执行命令display acl resource slot slot-
number检查是否释放成功。
l 如果充足，则是底层下发失败导致，请执行步骤3。