B=3000 
Frame Loss 
B=3000 
Quality Index, 
B=4500 
Frame Loss, 
B=4500 
1400 
1800 
1600 
Token Rate 
2000 
2200 
Figure 10. QBone Streaming (Dark clip/1.7Mbps enc.): Video 
Quality & Frame Loss vs Token Rate. 
These  first  results  show  very  similar  behavior  for  the  two 
clips, Lost and Dark, which appears to indicate that the different 
motion  characteristics  of  their  content  do  not  significantly  affect 
the  basic  relation  that  exists  between  video  quality  and  network 
resources.  In other words, while video characteristics will clearly 
play a role in determining the absolute level of quality achievable 
given  certain  network  resources,  general  trends  should  remain 
similar across different types of  video clips.  For example,  when 
comparing  the  results  of,  say,  Figure  7  and    Figure  10,  that 
correspond to the 1.7Mbps encoding rate versions of the Lost and 
Dark  clips,  respectively,  we  see  that  for  a  token  bucket  depth of 
3000 bytes and a token rate of 1.9 Mbps, both clips experience a 
similar  frame  loss  of  about  1%,  but  their  respective  quality 
measures  differ,  i.e.,  0.19  versus  0.14.    However,  despite  those 
differences that are actually more pronounced for higher encoding 
rates,  the  general  “shape”  of  the  quality  index  curves  are  similar 
for the two clips. 
There are a number of initial conclusions one can draw based 
on the results obtained from this first set of experiments. The first 
and most interesting one is that the relation between video quality 
and network level performance improvements is highly non-linear.  
For example, we see that in some regions, improvements in frame 
losses hardly affect the quality of the received video that remains 
relatively  poor  until  a  cutoff  point  is  reached.    Once  this  cutoff 
point is passed, video quality improves at a much faster pace than 
the corresponding improvements in frame loss.  The location of the 
cutoff point as well as the subsequent difference in slope between 
video quality and frame losses vary based on the encoding rate as 
well as the type of clip, but the behavior is consistent across all the 
experiments. 
s 
s
o
l
e
m
a
r
F
/
ex
d
n
I
y
t
i
l
a
u
Q
1.00 
0.90 
0.80 
0.70 
0.60 
0.50 
0.40 
0.30 
0.20 
0.10 
0.00 
1200 
Quality Index, 
B=3000 
Frame Loss, 
B=3000 
Quality Index, 
B=4500 
Frame Loss, 
B=4500 
1400 
1600 
1800 
Token Rate 
2000 
2200 
Figure 11. QBone Streaming (Dark clip/1.5Mbps enc.): Video 
Quality & Frame Loss vs Token Rate. 
In  addition  to  this  general  conclusion,  the  experiments  also 
provide  more  specific  information  in  terms  of  the  network 
“service”  parameters  required  to  ensure  adequate  video  quality.  
The first observation is that setting the token rate value below the 
encoding rate is of no use at all.  This is not surprising given the 
dropping actions taken on non-conformant packets by the ingress 
policer. The token rate value needed to achieve good video quality, 
i.e., a score close to 0, depends on the token bucket depth.  We see 
that with a token bucket depth of 3000 bytes (2 Ethernet MTUs), 
the  token  rate  has  to be  set  to  a  value  around  or  even  above  the 
maximum encoding rate of the clip (see Table 2 for rate values) in 
order  to  approach  the  desired quality  score.    However,  when  the 
token bucket depth is increased to 4500 bytes, a token rate set to 
the average (constant) encoding rate is typically sufficient.  Note 
that this is despite the fact that the network level transmission rates 
of the video streams still exhibit significant variations (see Figure 
6).  Nevertheless, this points to the fact that a service built on the 
EF PHB may not be really suitable to the efficient transmission of 
streaming video, because of the constraint it imposes on the token 
bucket depth.  This is not a major surprise in itself, but the results 
of the experiments help quantify this behavior.  In particular, we 
see that although the token bucket depth needed is greater than the 
“typical”  2*MTUs  often  quoted  for  the  EF  PHB,  it  is  not 
significantly larger, at least for video clips using constant bit rate 
encoding.  This  means  that  a  minor  relaxation  on  token  bucket 
depth  limits  may  make  such  a  service  more  useful  to  video 
streaming  applications.    Clearly,  such  relaxation  needs  to  be 
weighed against its impact on delay and losses in the network, but 
depending  on  the  intended  use  of  the  service,  it  may  be  worth 
considering. 
s
s
o
l
e
m
a
r
F
/
x
e
d
n
I
y
t
i
l
a
u
Q
1.00 
0.90 
0.80 
0.70 
0.60 
0.50 
0.40 
0.30 
0.20 
0.10 
0.00 
700 
800 
Quality Index, 
B=3000 
Frame Loss 
B=3000 
Quality Index, 
B=4500 
Frame Loss, 
B=4500 
1000 
1100 
900 
Token Rate 
Figure 12. QBone Streaming (Dark clip/1.0Mbps enc.): Video 
Quality & Frame Loss vs Token Rate. 
The  next  set  of  experiments  carried  out  across  the  QBone 
attempted  to  answer  the  more  general  question  of  the  relation 
between initial video quality and available network resources.  In 
other words, is it better to lose a relatively large number of packets 
from  a  high  quality  video  stream,  or  is  it  better  to  loose  fewer 
packets  from  a  lower  quality  video.    The  latter  seems  the 
intuitively  natural  answer,  but  we  wanted  a  more  quantitative 
assessment  of  this  trade-off.    For  that  purpose,  we  conducted 
another  set  of  experiments,  using  again  the Lost  and  Dark  video 
clips  encoded  at  the  three  rate  values  of  1.0Mbps,  1.5Mbps,  and 
1.7Mbps, and compared the quality of the received video to that of 
the  highest  quality  1.7Mbps  version  of  the  clip.    As  before,  the 
comparison was carried out for different values of the token rate.  
A  token  bucket  depth  of  3000  bytes  was  used  for  all  the 
experiments.  The results are reported in  
Figure 13 and Figure 14 for the Dark and Lost clips, respectively. 
s 
s
o
l
e
m
ra
F
/
x
e
d
n
I
y
t
i
l
a
u
Q
1.00 
0.90 
0.80 
0.70 
0.60 
0.50 
0.40 
0.30 
0.20 
0.10 
0.00 
600 
Quality Index, 
1.5M 
Frame Loss 
1.5M 
Quality Index, 
1M 
Frame Loss 
1M 
Quality Index, 
1.7M 
Frame Loss 
1.7M 
1100 
Token Rate 
1600 
2100 
Figure 13. Frame Loss and Relative (compared to 1.7Mbps 
version) Quality for Dark Clip. 
The  results  from  the  two  figures  essentially  confirm  our 
earlier intuition that one should select an encoding rate that is near 
but below the specified token rate.  This is clear from the data in 
the figures: as for all token rate values the best performing stream 
in  terms  of  quality  score  is  always  the  one  with  the  closest 
encoding rate.  In other words, at least for the range of encoding 
rates available in our experiments, the basic rule of thumb to apply 
is to select the largest encoding rate that is less than the token rate.  
This  seems  to  be  primarily  due  to  the  fact  that  the  impairments 
caused  by  packet  losses  have  a  much  larger  impact  on  video 
quality  than  the  differences  in  raw  video  quality  caused  by 
different encoding rates. 
Quality Index 
1.5Mbps 
Frame Loss 
1.5Mbps 
Quality Index 
1Mbps 
Frame Loss, 
1Mbps 
Quality Index 
1.7Mbps 
Frame Loss, 
1.7Mbps 
s 
s
o
l
e
m
a
r
F
/ 
x
e
d
n
I
y
t
i
l
a
u
Q
1.00 
0.90 
0.80 
0.70 
0.60 
0.50 
0.40 
0.30 
0.20 
0.10 
0.00 
600 
1100 
Token Rate 
1600 
2100 
Figure 14. Frame Loss and Relative (compared to 1.7Mbps 
version) Quality for Lost Clip. 
4.2 Local Testbed Results 
Experiments  conducted  in  the  local  testbed  were  aimed  at 
exploring the same set of issues as those that motivated the QBone 
experiments,  but  this  time  using  a  different  video  server  and 
possibly  more  configurations  because  of  the  accessibility  of  the 
local equipment.  The motivation for using a different server was 
to determine the level of dependency of our initial conclusions on 
the specific characteristics of the video server we used.  The use of 
a different server at the remote site, which would have enabled us 
to  carry  this  new  set  of  experiments  over  the  QBone,  was  not 
feasible  due  to  logistics  constraints.    As  a  result,  this next  set  of 
experiments  was  conducted  over  the  local  testbed  described  in 
Section  3.2.1.  The  basic  conclusion  from 
these  additional 
experiments is that most of the earlier findings remain essentially 
true.    In  particular,  the  fact  that  frame  loss  is  not  an  accurate 
predictor  of  video  quality  still  holds.  As  before,  in  many  cases 
small  differences  in  frame  loss  resulted  in  large  differences  in 
video  quality  and  vice-versa.    These  behaviors  are  illustrated  in 
Figure  15  and  Figure  16,  where  we  can  again  see  areas  of  rate 
changes that yielded substantial reductions in frame losses without 
comparable improvements in video quality, as well as cases where 
a  relatively  small  decrease  in  frame  loss  resulted  in  a  significant 
improvement in video quality.   
Another  behavior  that  was  consistent  with  our  observations 
from experiments over the QBone was the impact of increasing the 
token  bucket  depth.    As  before,  a  small  increase  in  the  token 
bucket  depth,  i.e.,  from  3000  bytes  to  4500  bytes,  resulted  in 
significant  improvements  in  our  ability  to  achieve  nearly  perfect 
video quality using a token rate value close to the encoding rate of 