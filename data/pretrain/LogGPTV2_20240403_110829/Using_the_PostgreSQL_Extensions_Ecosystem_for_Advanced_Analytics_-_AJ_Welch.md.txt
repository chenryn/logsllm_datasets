Using the PostgreSQL
Extension Ecosystem for
Advanced Analytics
ssaalleess@@cchhaarrttiioo..ccoomm
((885555)) 223322--00332200
Agenda
The problem
-
The prevailing view vs. the practical reality
-
A possible solution
-
Or just building blocks?
-
Nearness
-
Near at hand, near to our skill set, near to our capabilities
-
A more complete solution
-
The PostgreSQL extension ecosystem
-
PI:EMAIL
(855) 232-0320
The Problem
The Prevailing View
vs.
The Practical Reality
ssaalleess@@cchhaarrttiioo..ccoomm
((885555)) 223322--00332200
The Prevailing View - Logical
Dimension Relational Non-Relational
Schema objects ● Structured rows and columns ● Unstructured files, docs, etc
● Schema on write ● Schema on read
● Referential integrity ● No referential integrity
● Painful migrations ● No migrations
Query languages ● SQL ● Various
● Declarative ● Procedural
● Easy enough for non-tech users ● Requires some programming skills
Exploratory analysis ● Native support for joins ● No native support for joins
● Interactive/low execution overhead ● OLAP - Batch processing
Data science and ML ● Only descriptive statistics ● Robust ecosystem
● Requires exporting dumps/samples ● Does not require exports
PI:EMAIL
(855) 232-0320
The Prevailing View - Physical
Dimension Relational Non-Relational
Parallel query ● Single node system ● Multiple node system
processing ● Single process per query ● Multiple processes per query
Concurrency ● High concurrency ● OLAP - low concurrency/high
● Single process per connection scheduling overhead
High Availability & ● Async and sync replication ● Async and sync replication
Replication ● HA may not be native ● HA likely to be native
Sharding ● Sharding may not be native ● Sharding likely to be native
● Difficult to manage ● Easy to manage
PI:EMAIL
(855) 232-0320
The Prevailing View - Summary
RDBMS have nice properties for producing rich data
-
ACID, relational integrity, constraints, strong data types
-
Easier for non-tech users and exploratory analysis
-
Probably don’t meet the needs of today’s analysts
-
Data science & Machine Learning
-
Parallel processing
-
Definitely don’t meet the needs of today’s apps
-
Schema migrations
-
Replication and sharding
-
PI:EMAIL
(855) 232-0320
The Practical Reality
PI:EMAIL
(855) 232-0320
The Practical Reality
But we still want more advanced
functionality.
ssaalleess@@cchhaarrttiioo..ccoomm
((885555)) 223322--00332200
A Possible Solution
Or Just Building Blocks?
ssaalleess@@cchhaarrttiioo..ccoomm
((885555)) 223322--00332200
Modern SQL
Many people still think of SQL in terms of SQL-92
-
Since then we’ve had: SQL:1999, SQL:2003, SQL:2006, SQL:2008,
-
SQL:2011
http://use-the-index-luke.com/blog/2015-02/modern-sql
-
Common Table Expressions (CTEs) / Recursive CTEs
-
Window Functions
-
Ordered-set Aggregates
-
Lateral joins
-
Temporal support
-
The list goes on...
-
PI:EMAIL
(855) 232-0320
Procedural Languages
Native
-
pgSQL Tcl Perl Python
Community
-
Java PHP R Javascript Ruby Scheme sh
PI:EMAIL
(855) 232-0320
Building Blocks
These solve some problems.
For others, they are just building blocks.
ssaalleess@@cchhaarrttiioo..ccoomm
((885555)) 223322--00332200
Nearness
Near at Hand
Near to Our Skill Set
Near to Our Capabilities
ssaalleess@@cchhaarrttiioo..ccoomm
((885555)) 223322--00332200
Nearness
http://www.infoq.com/presentations/Simple-Made-Easy
-
PI:EMAIL
(855) 232-0320
Nearness Drives Adoption
Near at hand
-
Easily installable
-
Near to our skill set
-
Familiar tool/language/abstraction
-
Modular and composable
-
Near to our capabilities
-
Capable of solving a problem in our domain
-
PI:EMAIL
(855) 232-0320
A More Complete Solution
The PostgreSQL Extension Ecosystem
ssaalleess@@cchhaarrttiioo..ccoomm
((885555)) 223322--00332200
Postgres Extension Ecosystem Examples
PostgreSQL Extension Network: http://pgxn.org/
-
UDFs & operators: https://github.com/eulerto/pg_similarity
-
UDAs & data types: https://github.com/aggregateknowledge/postgresql-hll
-
Foreign Data Wrappers: http://multicorn.org/, https://github.com/shish/pgosquery
-
Indexes: https://github.com/zombodb/zombodb
-
Composing Extension Methods: http://doc.madlib.net/
-
MPP: https://www.citusdata.com/, https://github.com/greenplum-db/gpdb
-
Composing Extensions
-
Custom Background Workers: https://github.com/no0p/alps
-
Record linking: http://no0p.github.io/2015/10/20/record_linking.html#/
-
PI:EMAIL
(855) 232-0320
Postgres Extension Ecosystem Examples
PostgreSQL Extension Network: http://pgxn.org/
-
UDFs & operators: https://github.com/eulerto/pg_similarity
-
UDAs & data types: https://github.com/aggregateknowledge/postgresql-hll
-
Foreign Data Wrappers: http://multicorn.org/, https://github.com/shish/pgosquery
-
Indexes: https://github.com/zombodb/zombodb
-
Composing Extension Methods: http://doc.madlib.net/
-
MPP: https://www.citusdata.com/, https://github.com/greenplum-db/gpdb
-
Composing Extensions
-
Custom Background Workers: https://github.com/no0p/alps
-
Record linking: http://no0p.github.io/2015/10/20/record_linking.html#/
-
PI:EMAIL
(855) 232-0320
The PostgreSQL Extension Network
Package Manager: pgxn
-
Index/Network: http://pgxn.org/
-
PyPI, RubyGems, CPAN, CRAN
-
PI:EMAIL
(855) 232-0320
The PostgreSQL Extension Network
Near at hand
-
- pgxn search semver - Search github? google? mailing list?
- pgxn info semver - Github README?
- pgxn install semver - git clone; make; make install;
- pgxn load –d somedb semver - psql –c “CREATE EXTENSION IF NOT EXISTS”
- pgxn unload –d somedb semver - psql –c “DROP EXTENSION IF EXISTS”
- pgxn uninstall semver - make uninstall?
PI:EMAIL
(855) 232-0320
Postgres Extension Ecosystem Examples
PostgreSQL Extension Network: http://pgxn.org/
-
UDFs & operators: https://github.com/eulerto/pg_similarity
-
UDAs & data types: https://github.com/aggregateknowledge/postgresql-hll
-
Foreign Data Wrappers: http://multicorn.org/, https://github.com/shish/pgosquery
-
Indexes: https://github.com/zombodb/zombodb
-
Composing Extension Methods: http://doc.madlib.net/
-
MPP: https://www.citusdata.com/, https://github.com/greenplum-db/gpdb
-
Composing Extensions
-
Custom Background Workers: https://github.com/no0p/alps
-
Record linking: http://no0p.github.io/2015/10/20/record_linking.html#/
-
PI:EMAIL
(855) 232-0320
UDFs & Operators: pg_similarity
Near to our capabilities
-
Similarity coefficient algorithms
-
L1 Distance Matching Coefficient
- -
Cosine Distance Monge-Elkan Coefficient
- -
Dice Coefficient Needleman-Wunsch Coefficient
- -
Euclidean Distance Overlap Coefficient
- -
Hamming Distance Q-Gram Distance
- -
Jaccard Coefficient Smith-Waterman Coefficient
- -
Jaro Distance Smith-Waterman-Gotoh Coefficient
- -
Jaro-Winkler Distance Soundex Distance
- -
Levenshtein Distance
-
PI:EMAIL
(855) 232-0320
UDFs & Operators: pg_similarity
Near to our skill set
-
PI:EMAIL
(855) 232-0320
UDFs & Operators: pg_similarity
Implementation
-
PI:EMAIL
(855) 232-0320
Postgres Extension Ecosystem Examples
PostgreSQL Extension Network: http://pgxn.org/
-
UDFs & Operators: https://github.com/eulerto/pg_similarity
-
UDAs & Data Types: https://github.com/aggregateknowledge/postgresql-hll
-
Foreign Data Wrappers: http://multicorn.org/, https://github.com/shish/pgosquery
-
Indexes: https://github.com/zombodb/zombodb
-
Composing Extension Methods: http://doc.madlib.net/
-
MPP: https://www.citusdata.com/, https://github.com/greenplum-db/gpdb
-
Composing Extensions
-
Custom Background Workers: https://github.com/no0p/alps
-
Record linking: http://no0p.github.io/2015/10/20/record_linking.html#/
-
PI:EMAIL
(855) 232-0320
UDAs & Data Types: postgresql-hll
Near to our capabilities & near to our skill set
-
Data type
-
Estimate count distinct with tunable precision
-
1280 bytes estimates tens of billions of distinct values with few percent error
-
PI:EMAIL
(855) 232-0320
UDAs & Data Types: postgresql-hll
PI:EMAIL
(855) 232-0320
UDAs & Data Types: postgresql-hll
Implementation
-
PI:EMAIL
(855) 232-0320
Postgres Extension Ecosystem Examples
PostgreSQL Extension Network: http://pgxn.org/
-
UDFs & Operators: https://github.com/eulerto/pg_similarity
-
UDAs & Data Types: https://github.com/aggregateknowledge/postgresql-hll
-
Foreign Data Wrappers: http://multicorn.org/, https://github.com/shish/pgosquery
-
Indexes: https://github.com/zombodb/zombodb
-
Composing Extension Methods: http://doc.madlib.net/
-
MPP: https://www.citusdata.com/, https://github.com/greenplum-db/gpdb
-
Composing Extensions
-
Custom Background Workers: https://github.com/no0p/alps
-
Record linking: http://no0p.github.io/2015/10/20/record_linking.html#/
-
PI:EMAIL
(855) 232-0320
Foreign Data Wrappers: API
PI:EMAIL
(855) 232-0320
Foreign Data Wrappers: multicorn
Near to our skill set
-
PI:EMAIL
(855) 232-0320
Foreign Data Wrappers: pgosquery
Near at hand
-
PI:EMAIL
(855) 232-0320
Postgres Extension Ecosystem Examples
PostgreSQL Extension Network: http://pgxn.org/
-
UDFs & Operators: https://github.com/eulerto/pg_similarity
-
UDAs & Data Types: https://github.com/aggregateknowledge/postgresql-hll
-
Foreign Data Wrappers: http://multicorn.org/, https://github.com/shish/pgosquery
-
Indexes: https://github.com/zombodb/zombodb
-
Composing Extension Methods: http://doc.madlib.net/
-
MPP: https://www.citusdata.com/, https://github.com/greenplum-db/gpdb
-
Composing Extensions
-
Custom Background Workers: https://github.com/no0p/alps
-
Record linking: http://no0p.github.io/2015/10/20/record_linking.html#/
-
PI:EMAIL
(855) 232-0320
Indexes: ZomboDB
Index Access Method API
-
http://www.postgresql.org/docs/9.4/static/indexam.html
-
PI:EMAIL
(855) 232-0320
Postgres Extension Ecosystem Examples
PostgreSQL Extension Network: http://pgxn.org/
-
UDFs & Operators: https://github.com/eulerto/pg_similarity
-
UDAs & Data Types: https://github.com/aggregateknowledge/postgresql-hll
-
Foreign Data Wrappers: http://multicorn.org/, https://github.com/shish/pgosquery
-
Indexes (GiST, GIN): https://github.com/zombodb/zombodb
-
Composing Extension Methods: http://doc.madlib.net/
-
MPP: https://www.citusdata.com/, https://github.com/greenplum-db/gpdb
-
Composing Extensions
-
Custom Background Workers: https://github.com/no0p/alps
-
Record linking: http://no0p.github.io/2015/10/20/record_linking.html#/
-
PI:EMAIL
(855) 232-0320
Composing Extension Methods: MADlib
Near to our capabilities
PI:EMAIL
(855) 232-0320
Composing Extension Methods: MADlib
Near to our skill set
-
PI:EMAIL
(855) 232-0320
Composing Extension Methods: MADlib
PI:EMAIL
(855) 232-0320
Postgres Extension Ecosystem Examples
PostgreSQL Extension Network: http://pgxn.org/
-
UDFs & Operators: https://github.com/eulerto/pg_similarity
-
UDAs & Data Types: https://github.com/aggregateknowledge/postgresql-hll
-
Foreign Data Wrappers: http://multicorn.org/, https://github.com/shish/pgosquery
-
Indexes: https://github.com/zombodb/zombodb
-
Composing Extension Methods: http://doc.madlib.net/
-
MPP: https://www.citusdata.com/, https://github.com/greenplum-db/gpdb
-
Composing Extensions
-
Custom Background Workers: https://github.com/no0p/alps
-
Record linking: http://no0p.github.io/2015/10/20/record_linking.html#/
-
PI:EMAIL
(855) 232-0320
Parallel Processing
Parallel sequential scan
-
http://rhaas.blogspot.com/2015/11/parallel-sequential-scan-is-committed.html
-
Columnar FDW:
-
- https://github.com/citusdata/cstore_fdw
PI:EMAIL
(855) 232-0320
Postgres Extension Ecosystem Examples
PostgreSQL Extension Network: http://pgxn.org/
-
UDFs & Operators: https://github.com/eulerto/pg_similarity
-
UDAs & Data Types: https://github.com/aggregateknowledge/postgresql-hll
-
Foreign Data Wrappers: http://multicorn.org/, https://github.com/shish/pgosquery
-
Indexes: https://github.com/zombodb/zombodb
-
Composing Extension Methods: http://doc.madlib.net/
-
MPP: https://www.citusdata.com/, https://github.com/greenplum-db/gpdb
-
Composing Extensions
-
Custom Background Workers: https://github.com/no0p/alps
-
Record linking: http://no0p.github.io/2015/10/20/record_linking.html#/
-
PI:EMAIL
(855) 232-0320
Composing Extensions: Alps
PI:EMAIL
(855) 232-0320
Composing Extensions: Record Linking
PI:EMAIL
(855) 232-0320
Beyond Analytics
Web app framework
-
http://blog.aquameta.com/
-
REST API
-
https://github.com/begriffs/postgrest
-
Unit testing framework
-
http://pgtap.org/
-
Firewall
-
https://github.com/uptimejp/sql_firewall
-
More every week!
-
PI:EMAIL
(855) 232-0320
Conclusion
With PostgreSQL, you get
-
more than rows and columns
-
more than SELECT, FROM, WHERE, GROUP BY, ORDER BY
-
more than a single machine
-
Make sure you get the full return on your investment!
-
Get your Chartio free trial!
PI:EMAIL
(855) 232-0320
PI:EMAIL
(855) 232-0320