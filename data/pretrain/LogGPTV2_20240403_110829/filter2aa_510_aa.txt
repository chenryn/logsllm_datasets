Mac OS X Server
Command-Line
Administration
For Version 10.3 or Later
034-2454_Cvr  10/15/03  11:47 AM  Page 1
 Apple Computer, Inc.
© 2003 Apple Computer, Inc. All rights reserved. 
The owner or authorized user of a valid copy of 
Mac OS X Server software may reproduce this 
publication for the purpose of learning to use such 
software. No part of this publication may be reproduced 
or transmitted for commercial purposes, such as selling 
copies of this publication or for providing paid for 
support services.
The Apple logo is a trademark of Apple Computer, Inc., 
registered in the U.S. and other countries. Use of the 
“keyboard” Apple logo (Option-Shift-K) for commercial 
purposes without the prior written consent of Apple 
may constitute trademark infringement and unfair 
competition in violation of federal and state laws. 
Apple, the Apple logo, AirPort, AppleScript, AppleShare, 
AppleTalk, ColorSync, FireWire, iMac, Keychain, Mac, 
Macintosh, Power Mac, Power Macintosh, QuickTime, 
Sherlock, and WebObjects are trademarks of Apple 
Computer, Inc., registered in the U.S. and other 
countries. Extensions Manager and Finder are 
trademarks of Apple Computer, Inc. 
034-2354/10-24-03
LL2354.book  Page 2  Monday, October 20, 2003  9:47 AM
3
1
Contents
Preface
11
About This Book
11
Notation Conventions
11
Summary
11
Commands and Other Terminal Text
11
Command Parameters and Options
12
Default Settings
12
Commands Requiring Root Privileges
Chapter 1
13
Typing Commands
13
Using Terminal
14
Correcting Typing Errors
14
Repeating Commands
14
Including Paths Using Drag-and-Drop
15
Commands Requiring Root Privileges
16
Sending Commands to a Remote Server
16
Sending a Single Command
17
Updating SSH Key Fingerprints
17
Notes on Communication Security and 
servermgrd
18
Using Telnet
18
Getting Online Help for Commands
19
Notes About Specific Commands and Tools
19
serversetup
19
serveradmin
Chapter 2
21
Installing Server Software and Finishing Basic Setup
21
Installing Server Software
21
Automating Server Setup
21
Creating a Configuration File Template
22
Creating Customized Configuration Files from the Template File
25
Naming Configuration Files
25
Storing a Configuration File in an Accessible Location
25
Changing Server Settings
LL2354.book  Page 3  Monday, October 20, 2003  9:47 AM
4
Contents
26
Viewing, Validating, and Setting the Software 
Serial Number
26
Updating Server Software
27
Moving a Server
Chapter 3
29
Restarting or Shutting Down a Server
29
Restarting a Server
29
Examples
29
Automatic Restart
30
Changing a Remote Server’s Startup Disk
30
Shutting Down a Server
30
Examples
Chapter 4
31
Setting General System Preferences
31
Computer Name
31
Viewing or Changing the Computer Name
31
Date and Time
32
Viewing or Changing the System Date
32
Viewing or Changing the System Time
32
Viewing or Changing the System Time Zone
33
Viewing or Changing Network Time Server Usage
33
Energy Saver Settings
33
Viewing or Changing Sleep Settings
33
Viewing or Changing Automatic Restart Settings
34
Power Management Settings
34
Startup Disk Settings
34
Viewing or Changing the Startup Disk
35
Sharing Settings
35
Viewing or Changing Remote Login Settings
35
Viewing or Changing Apple Event Response
35
International Settings
35
Viewing or Changing Language Settings
36
Login Settings
36
Disabling the Restart and Shutdown Buttons
Chapter 5
37
Network Preferences
37
Network Interface Information
37
Viewing Port Names and Hardware Addresses
38
Viewing or Changing MTU Values
38
Viewing or Changing Media Settings
38
Network Port Configurations
38
Creating or Deleting Port Configurations
38
Activating Port Configurations
LL2354.book  Page 4  Monday, October 20, 2003  9:47 AM
Contents
5
39
Changing Configuration Precedence
39
TCP/IP Settings
39
Changing a Server’s IP Address
40
Viewing or Changing IP Address, Subnet Mask, or Router Address
41
Viewing or Changing DNS Servers
42
Enabling TCP/IP
42
AppleTalk Settings
42
Enabling and Disabling AppleTalk
42
Proxy Settings
42
Viewing or Changing FTP Proxy Settings
43
Viewing or Changing Web Proxy Settings
43
Viewing or Changing Secure Web Proxy Settings
43
Viewing or Changing Streaming Proxy Settings
43
Viewing or Changing Gopher Proxy Settings
44
Viewing or Changing SOCKS Firewall Proxy Settings
44
Viewing or Changing Proxy Bypass Domains
44
AirPort Settings
44
Viewing or Changing Airport Settings
44
Computer, Host, and Rendezvous Name
44
Viewing or Changing the Computer Name
45
Viewing or Changing the Local Host Name
45
Viewing or Changing the Rendezvous Name
Chapter 6
47
Working With Disks and Volumes
47
Mounting and Unmounting Volumes
47
Mounting Volumes
47
Unmounting Volumes
47
Checking for Disk Problems
48
Monitoring Disk Space
49
Reclaiming Disk Space Using Log Rolling Scripts
50
Managing Disk Journaling
50
Checking to See if Journaling is Enabled
50
Turning on Journaling for an Existing Volume
51
Enabling Journaling When You Erase a Disk
51
Disabling Journaling
51
Erasing, Partitioning, and Formatting Disks
51
Setting Up a Case-Sensitive HFS+ File System
52
Imaging and Cloning Volumes Using ASR
Chapter 7
53
Working With Users and Groups
53
Creating Server Administrator Users
54
Importing Users and Groups
55
Creating a Character-Delimited User Import File
LL2354.book  Page 5  Monday, October 20, 2003  9:47 AM
6
Contents
57
User Attributes
62
Checking a Server User’s Name, UID, or Password
63
Creating a User’s Home Directory
63
Mounting a User’s Home Directory
63
Creating a Group Folder
63
Checking a User’s Administrator Privileges
Chapter 8
65
Working With File Services
65
Share Points
65
Listing Share Points
66
Creating a Share Point
67
Modifying a Share Point
67
Disabling a Share Point
67
AFP Service
67
Starting and Stopping AFP Service
67
Checking AFP Service Status
67
Viewing AFP Settings
68
Changing AFP Settings
68
List of AFP Settings
72
List of AFP serveradmin Commands
72
Listing Connected Users
73
Sending a Message to AFP Users
73
Disconnecting AFP Users
74
Canceling a User Disconnect
75
Listing AFP Service Statistics
76
Viewing AFP Log Files
76
NFS Service
76
Starting and Stopping NFS Service
76
Checking NFS Service Status
76
Viewing NFS Settings
77
Changing NFS Service Settings
77
FTP Service
77
Starting FTP Service
77
Stopping FTP Service
77
Checking FTP Service Status
77
Viewing FTP Settings
78
Changing FTP Settings
78
FTP Settings
79
List of FTP serveradmin Commands
80
Viewing the FTP Transfer Log
80
Checking for Connected FTP Users
80
Windows (SMB) Service
80
Starting and Stopping SMB Service
LL2354.book  Page 6  Monday, October 20, 2003  9:47 AM
Contents
7
80
Checking SMB Service Status
81
Viewing SMB Settings
81
Changing SMB Settings
82
List of SMB Service Settings
84
List of SMB serveradmin Commands
84
Listing SMB Users
85
Disconnecting SMB Users
86
Listing SMB Service Statistics
86
Updating Share Point Information
87
Viewing SMB Service Logs
Chapter 9
89
Working With Print Service
89
Starting and Stopping Print Service
89
Checking the Status of Print Service
89
Viewing Print Service Settings
90
Changing Print Service Settings
90
Print Service Settings
91
Queue Data Array
93
Print Service serveradmin Commands
93
Listing Queues
93
Pausing a Queue
94
Listing Jobs and Job Information
94
Holding a Job
95
Viewing Print Service Log Files
Chapter 10
97
Working With NetBoot Service
97
Starting and Stopping NetBoot Service
97
Checking NetBoot Service Status
97
Viewing NetBoot Settings
98
Changing NetBoot Settings
98
NetBoot Service Settings
98
General Settings
99
Storage Record Array
99
Filters Record Array
100
Image Record Array
101
Port Record Array
Chapter 11
103
Working With Mail Service
103
Starting and Stopping Mail Service
103
Checking the Status of Mail Service
103
Viewing Mail Service Settings
104
Changing Mail Service Settings
104
Mail Service Settings
LL2354.book  Page 7  Monday, October 20, 2003  9:47 AM
8
Contents
116
Mail serveradmin Commands
117
Listing Mail Service Statistics
118
Viewing the Mail Service Logs
119
Setting Up SSL for Mail Service
119
Generating a CSR and Creating a Keychain
121
Obtaining an SSL Certificate
121
Importing an SSL Certificate Into the Keychain
122
Creating a Passphrase File
122
Setting Up SSL for Mail Service on a Headless Server
Chapter 12
123
Working With Web Technologies
123
Starting and Stopping Web Service
123
Checking Web Service Status
123
Viewing Web Settings
124
Changing Web Settings
124
serveradmin and Apache Settings
124
Changing Settings Using serveradmin
125
Web serveradmin Commands
125
Listing Hosted Sites
125
Viewing Service Logs
126
Viewing Service Statistics
127
Example Script for Adding a Website
Chapter 13
129
Working With Network Services
129