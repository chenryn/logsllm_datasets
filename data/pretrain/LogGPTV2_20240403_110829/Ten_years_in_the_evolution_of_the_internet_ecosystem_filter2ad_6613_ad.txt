o
i
t
c
a
r
f
C
E
n
o
i
t
c
a
r
f
P
T
S
n
o
i
t
c
a
r
f
P
T
L
n
o
i
t
c
a
r
f
P
H
A
C
 0.5
 0.5
 0.5
 0.5
98
99
00
01
02
03
04
05
06
07
98
99
00
01
02
03
04
05
06
07
98
99
00
01
02
03
04
05
06
07
98
99
00
01
02
04
05
06
07
03
year
ripe
arin
ripe
arin
ripe
arin
ripe
arin
Figure 9: Regional distribution of AS types over time.
Geographical trends for each AS type: To classify ASes into
broad geographical regions, we use the “registry” ﬁeld of the cor-
responding WHOIS entries. Figure 9 shows the fraction of ASes
of each AS type that were registered to ARIN (North America) and
RIPE (mostly Europe). The other registries (APNIC, LACNIC and
AFRINIC) account for the remaining small fraction, and are not
shown here. Interestingly, we see that the population of ECs in the
two continents (NA and Europe) converges. It is likely that in the
next few years there will be more ECs registered in Europe than in
North America. This has already happened in the case of STPs, and
the number of STPs is now slightly higher in Europe. LTPs, though,
are mostly still based in North America. On the other hand, the
fraction of CAHPs in Europe has always been higher than in North
America, probably because of the many regional access providers
(several per country) in Europe. These trends imply that the In-
ternet market, in terms of the number of access/hosting, transit and
content providers will soon be larger in Europe than in North Amer-
ica, if this is not happening already.
Rewiring activity for each AS type: The differences in the busi-
ness function and incentives of the four AS types could also appear
in their rewiring activity. To measure this quantity between a pair
of snapshots, we calculate the Jaccard distance for the set of CP
links of each AS. We then compute the average Jaccard distance for
all ASes of the same AS type. The top panel of Figure 10 shows
these averages over time. We see that, clearly, ECs show the lowest
rewiring activity throughout the last ten years. STPs and LTPs have
similar rewiring activity, while CAHPs exhibit the highest rewiring
especially since 2001. CAHPs rewire their CP links frequently, as
they attempt to minimize their transit costs and provide good per-
formance/reliability to their customers.
A related metric is the fraction of nodes in each AS type that are
inert, meaning that they do not undergo any change in their set of
CP links between two successive snapshots. The bottom panel of
Figure 10 shows the fraction of inert nodes for different AS types
over time. We ﬁnd that the fraction of inert ECs increased slightly
with time, from 74% in 2001 to 80% currently. This implies that
ECs at the network edge are becoming increasingly stable with re-
spect to the connectivity to their providers. The fraction of inert
STPs has stayed almost constant since 2001 (between 25% and
30%). We examined the set of STPs that are inert in every pair of
snapshots since 2001, and found that several of the inert STPs are
national monopoly providers or research and educational backbone
networks. Such STPs have a fairly stable customer base, and do
not have the incentive to constantly optimize their connectivity. As
expected, the fraction of inert LTPs is very low and it approaches
zero, because large transit providers have a constant churn in their
customers. The most interesting trend is that the fraction of inert
CAHPs has decreased signiﬁcantly, from 46% to 18%. This again
suggests that such access/hosting/content providers have an incen-
tive to constantly optimize their connectivity.
5. EVOLUTION OF CP RELATIONS:
CUSTOMER-SIDE PROPERTIES
Number of providers per AS type: Figure 11 shows the aver-
age number of providers per customer (or the average multihoming
degree) for each AS type. The median number of providers (not
shown) shows similar trends. The multihoming degree for ECs has
increased very slowly over the last decade (from 1.5 to 1.9), and
is almost constant since 2001. On the other hand, the multihoming
degree for STPs has increased signiﬁcantly (from 1.9 to 3.9), LTPs7
(from 2 to 5.5), and CAHPs (from 2.1 to 8.2). The dramatic increase
in the multihoming degree of content/hosting/access providers and
7Tier-1 ASes are commonly attributed as not having any providers.
Recall, however, that we deﬁne LTPs as the top-30 providers in
terms of average number of AS customers. This set includes ASes
that have providers.
CAHP
LTP
STP
EC
 10
 8
 6
 4
 2
i
e
e
r
g
e
d
r
e
d
v
o
r
p
e
g
a
r
e
v
a
 0
98
99
00
01
02
04
05
06
07
03
year
s
k
n
i
l
f
o
r
e
b
m
u
n
s
k
n
i
l
f
o
r
e
b
m
u
n
s
k
n
i
l
f
o
r
e
b
m
u
n
 25000
 20000
 15000
 10000
 5000
 0
 4000
 3000
 2000
 1000
 0
 3000
 2000
 1000
 0
EC-LTP
EC-STP
98
99
00
01
02
CAHP-LTP
CAHP-STP
98
99
00
01
02
STP-LTP
STP-STP
98
99
00
01
02
04
05
06
07
04
05
06
07
04
05
06
07
03
year
03
year
03
year
Figure 11: Evolution of average number of providers for each
AS type.
Figure 13: Evolution of CP links between different pairs of AS
types.
 1
 0.8
 0.6
 0.4
 0.2
F
D
C
 0
 0
 5
1999.10
2001.10
2003.10
2005.10
2007.10
 10
 20
number of providers of CAHPs
 15
 25
 30
Figure 12: Evolution of the distribution of the number of
providers of CAHPs.
transit providers is probably the main reason behind the densiﬁca-
tion of the Internet, discussed earlier.
We further study the distribution of the number of providers of
different AS types. We ﬁnd that the distribution of the number of
providers for ECs has not changed signiﬁcantly in the last 10 years.
On the other hand, the largest change is for CAHPs. Figure 12
shows the distribution of the number of providers for CAHPs in 5
snapshots over the last 10 years. We see that the distribution has
been shifting consistently towards the right, indicating an increase
in the number of providers for CAHPs. Further, we ﬁnd that the
median number of providers for CAHPs has been quite close to
the average, and 50% of CAHPs in the latest snapshot (2007.10)
have more than 7 providers. This means that the average number
of providers for CAHPs seen in Figure 11 is not biased by a small
number of CAHPs that have many providers.
STPs versus LTPs: We are also interested in differences in the type
of provider that each AS type connects to when acting as the cus-
tomer in a customer-provider relation. Figure 13 shows the num-
ber of links in each transit category over time. Interestingly, we
ﬁnd that both EC-LTP links (meaning, the customer is an EC and
the provider is an LTP) and EC-STP links show an exponential in-
crease up to 2001, which matches the trend of the total number of
CP links. Thereafter the growth rate slowed down, following a lin-
ear increase. We ﬁnd that until 2004 the number of EC-STP links
was almost the same as the number of EC-LTP links. After 2004,
the growth rate of EC-STP links has been higher than that of EC-
LTP links (240 links/month vs 106 links/month), meaning that ECs
increasingly prefer to connect to smaller, regional providers. There
are several possible reasons why ECs may prefer STPs over LTPs.
One possibility is that STPs are cheaper than LTPs. Another pos-
sibility is that ECs connect to STPs due to regional factors such as
national monopolies and regulations, or region-speciﬁc marketing
by STPs.
The middle panel of Figure 13 shows the evolution of provider
links for CAHP customers, while the bottom panel shows the num-
ber of provider links for STP customers. The numbers of CAHP-
LTP and CAHP-STP (also STP-STP and STP-LTP) links have been
increasing at roughly the same rate. Unlike ECs, CAHP and STP
customers do not prefer one type of provider over the other.
Rewiring activity of AS customers: Next, we investigate the rewiring
activity of AS customers according to the broad geographical re-
gion in which they belong. Speciﬁcally, we ﬁrst ﬁnd the set of
active customers (customers that made some change to their set of
providers) between pairs of successive snapshots. Then, we cal-
culate the fraction of those active customers that belong to each
geographical region. Figure 14 shows these trends. The fractions
for Asia-Paciﬁc (APNIC), Latin America (LACNIC) and Africa
(AFRINIC) are practically constant and signiﬁcantly lower than for
Europe (RIPE) and North America (ARIN). Interestingly, we ﬁnd
that after 2004-2005, there are more active customers based in Eu-
rope than in North America. In Section 4, we showed that Europe
is catching up with North America in terms of the population of
ECs, and the population of STPs is already larger in Europe. We
conjecture that this has created a more competitive market in Eu-
rope than in North America, with European customer ASes being
more active in adjusting their upstream connectivity.
6. EVOLUTION OF CP RELATIONS:
PROVIDER-SIDE PROPERTIES
Preferential attachment and preferential detachment: First, we
measure the total number of CP links that were born and died be-
tween two consecutive snapshots. We deﬁne the attractiveness Ap
of a provider p as the fraction of CP links born in the second snap-
shot that connected to provider p. Similarly, the repulsiveness Rp
of a provider p is the fraction of CP links that died in the second
ARIN
RIPE
APNIC
LACNIC
AFRINIC
 0.7
 0.6
 0.5
 0.4
 0.3
 0.2
 0.1
i
n
o
g
e
r
m
o
r
f
s
e
S
A
e
v
i
t
c
a
f
o
n
o
i
t
c
a
r
f
 0
98
99
00
01
02
03