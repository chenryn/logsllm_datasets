C
 0.6
 0.4
 0.2
 0
 0
 1
 0.8
s
F
D
C
 0.6
 0.4
 0.2
 0
n+
802.11n
 5
 10
 15
 20
Throughput [Mb/s]
(b) Throughput of tx1-rx1
n+
802.11n
 0
 5
 10
 15
 20
Throughput [Mb/s]
(c) Throughput of tx2-rx2
 25
 30
 0
 10
 20
 30
Throughput [Mb/s]
 40
 50
(d) Throughput of tx3-rx3
Figure 12—Throughput Comparison. The ﬁgure plots the throughput obtained under n+ and the existing 802.11n design for the scenario
in Fig. 3, where tx1-rx1 is a single-antenna node pair, tx2-rx2 is a 2-antenna node pair, and tx3-rx3 is a 3-antenna node pair.
pair, tx3-rx3, aligns its signal at rx2 along with the interference
from tx1’s transmission. Unlike the nulling experiment, the align-
ment experiment focuses on rx2, where the alignment is happening.
Like the nulling experiment, however, it has three phases: First, tx1
and tx2 transmit concurrently, while tx3 stays silent to allow us to
measure the SNR of the wanted stream at rx2, in the absence of
interference from tx3. Second, tx3 transmits to rx2 alone to mea-
sure the SNR of the unwanted trafﬁc in the absence of alignment.
Last, all three transmitters transmit concurrently, and tx3 aligns its
signal with that of tx1, as described in §2. We measure the differ-
ence in the SNR of rx2’s wanted stream without interference and
with interference alignment. We repeat the experiment with differ-
ent random assignment of nodes to locations in Fig. 10.
Results: Fig. 11 plots the difference in the SNR of the wanted
stream due to the presence of the unwanted stream, after nulling
and alignment. The SNR difference is plotted as a function of the
SNR of the unwanted (i.e., interfering) stream. Different bars re-
fer to different SNRs of the wanted stream. The ﬁgure reveals four
main points.
• When the power of the unwanted stream without nulling or align-
ment is in the range [7.5, 32.5] dB, nulling and alignment reduce
the impact of interference on the wanted signal to [0.5, 3] dB.
• The residual interference after nulling or alignment depends on
the original SNR of the unwanted signal before nulling or align-
ment. Thus, n+ takes this issue into account, and forces a node
that wants to join ongoing transmissions to lower its interference
power below a threshold L = 27 dB, as marked in the ﬁgure.
• Given n+’s threshold,
the average interference power after
nulling is 0.8 dB, and after alignment is 1.3 dB.
• Nulling has a lower residual error than alignment. This is be-
cause nulling requires estimating only the channel from the inter-
fering transmitter to the receiver. Alignment, on the other hand,
also requires estimating the unwanted subspace at the receiver.
Since the latter estimation adds additional noise, alignment is
less accurate than nulling.
6.3 Throughput Comparison
Next, we investigate the impact of nulling and alignment on
throughput. We also compare the throughput obtained with n+ to
that obtained with the existing 802.11n.
Experiment: Again, we consider the scenario in Fig. 3, which has
three node pairs: tx1-rx1, tx2-rx2, and tx3-rx3, which have 1, 2, and
3 antennas respectively. Each run consists of a different assignment
of nodes to locations in Fig. 10. The choice of which nodes win
the contention is done by randomly picking winners. For 802.11n,
an M-antenna node that wins the contention transmits an 1500 byte
packet to its receiver using M concurrent streams. Similarly, for n+,
an M-antenna node that wins the ﬁrst contention transmits an 1500
byte packet using M streams. Latter contention winners in n+ end
their transmissions at the same time as the ﬁrst contention winner.
For both 802.11n and n+, the bitrate is chosen according to the
 1
 0.8
s
F
D
C
 0.6
 0.4
 0.2
 0
 0
total gain
gain of c1-AP1
gain of AP2-c2
gain of AP2-c3
 1
 5
Ratio of the throughput in n+ to that in 802.11n
 2
 3
 4
 1
 0.8
s
F
D
C
 0.6
 0.4
 0.2
 0
 0
 6
total gain
gain of c1-AP1
gain of AP2-c2
gain of AP2-c3
 1
 2
 3
Ratio of the throughput in n+ to that in beamforming
 4
 5
 6
(a) Throughput gain in comparison with 802.11n
(b) Throughput gain in comparison with beamforming
Figure 13—Throughput gain. For the scenario in Fig. 4 where the transmitter and receiver have a different number of antennas, n+ provides
an average network throughput improvement of 2.4x over 802.11n and 1.8x over beamforming.
algorithm in [16], which maps the effective SNR to the optimal bi-
trate. In n+ each node picks its bitrate at the time of joining the con-
current transmission, independently of later contention outcomes.
To achieve this behavior with GNURadios, the RTS-CTS messages
are sent in a staggered fashion. For example, if the three pairs are
each transmitting one stream, then tx1 ﬁrst transmits its RTS mes-
sage alone which is used by rx1 to compute its bitrate. Next, tx2
sends its RTS message in the presence of tx1’s transmission, which
rx2 uses to compute the bitrate for tx2. To compute the bitrate to
be used by tx3, tx3 sends its RTS message in the presence of trans-
missions from both tx1 and tx2. Finally, tx1, tx2 and tx3 use the
bitrates picked above to transmit their data packets concurrently.
Results: Fig. 12 plots the CDFs of the throughputs of each pair and
the total throughput, both under n+ and 802.11n. The CDFs are
taken over different locations. They show:
• On average, the total network throughput doubles when the
nodes use n+, as opposed to current 802.11n.
• Nodes with multiple antennas achieve signiﬁcant throughput
gains, and the gains increase with increased number of antennas.
Speciﬁcally, the 2-antenna pair experiences an average through-
put gain of 1.5x, and the 3-antenna pair experiences an average
throughput gain of 3.5x.
• There are three reasons for these throughput gains. First, n+ al-
lows the nodes to transmit three streams at any point in time,
providing a multiplexing gain. Second, in 802.11n, each trans-
mitter is given an equal chance to transmit a packet. Thus, nodes
that have low throughput occupy more time on the medium than
nodes with high throughput. Since single-antenna nodes typi-
cally have lower throughput as compared to multi-antenna nodes,
which can transmit concurrent streams, the network throughput
of existing 802.11n is bottlenecked by single-antenna nodes. In
contrast, in n+, since multi-antenna transmitters can join the on-
going transmission of single-antenna nodes, it does not matter
that the single-antenna nodes take too much time on the medium.
Third, allowing multiple nodes to transmit simultaneously pro-
vides a power gain [32]. In particular, the FCC limits the maxi-
mum transmission power of a single transmitter. Hence, 802.11n
is limited by the amount of power on any single transmitter. In
contrast, having multiple nodes transmit simultaneously (as in
n+) increases the total power on the medium, which increases
the capacity of the system.
• The reduction in throughput at the single-antenna node is less
than 3%. This number is fairly small because the residual inter-
ference after nulling is 0.8 dB (as shown above), which has a
negligible impact on throughput.
• While the residual interference after alignment is slightly higher
than nulling (1.3 dB), it does not translate to a throughput loss.
This is because the 2-antenna receiver, where alignment occurs,
gains more from concurrent transmissions than the small loss due
to alignment errors.
6.4 Performance with a Different Number of
Transmit and Receive Antennas
We check that n+ increases the throughput even when the trans-
mitter and receiver have a different number of antennas.
Experiment: We repeat the throughput evaluation experiment de-
scribed in the last section but consider the scenario shown in Fig. 4
where a 2-antenna access point, AP1, is receiving from a single-
antenna client, c1, and a 3-antenna AP, AP2, is transmitting to two
2-antenna clients. The rest of the setup mirrors that of the previous
experiment. In addition to comparing the throughput of n+ with
802.11n, we also compare it with prior work on beamforming [7]
which can be applied to this scenario (but does not apply to the pre-
vious one). In particular, when the 3-antenna AP wins contention,
beamforming allows it to transmit three streams concurrently, two
to one client and one to the other.
Result: For space limitation we plot the CDFs of n+’s through-
put gains in comparison with 802.11n in Fig. 13(a) and beamform-
ing [7] in Fig. 13(b), i.e., the ratio of the throughput in n+ to that in
802.11n and beamforming, respectively. The ﬁgures show that the
total network throughput increases by 2.4x and 1.8x over 802.11n
and beamforming. Further, on average, the single-antenna client ex-
periences a negligible reduction in throughput of 3.2%, whereas
the other two clients experience a throughput gain of 3.5-3.6x over
802.11n and 2.5-2.6x over beamforming. As before, the large gains
over 802.11n and beamforming are due to both having more con-
current transmissions and providing multi-antenna nodes more op-
portunities to transmit concurrently with the single-antenna trans-
mitter. These results show that n+ extends to scenarios where the
transmitter and the receiver have a different number of antennas.
7. RELATED WORK
In the last few years, MIMO networks have attracted much atten-
tion from both the theoretical and empirical research communities.
This resulted in new powerful theories including virtual MIMO and
interference alignment [8, 22, 19] and led to pioneering systems
that expanded and validated the theory [13, 31, 7]. Our work builds
on this foundation to provide the ﬁrst random access MIMO proto-
col where nodes contend for both degrees of freedom and medium
time and pick the best bitrate for their transmissions in a fully dis-
tributed manner without a centralized coordinator.
Our work is mostly related to recent empirical work on MIMO
systems [7, 31, 13]. Past systems however require concurrent trans-
missions to be pre-coded together at a single transmitter (as in
beamforming [7]), decoded together at a single receiver (as in
SAM [31]), or the transmitters or the receivers have to be controlled
over the Ethernet by a single master node (as in IAC [13]). In con-
trast, n+ does not require a centralized coordinator.
Our work on carrier sense in the presence of ongoing transmis-
sions is related to packet detection in ZigZag [12] and carrier count-
ing in SAM [31]. These schemes detect the number of concurrent
transmissions using preamble correlation. In contrast, n+ projects
on a space orthogonal to ongoing transmissions, which cancels out
the interference.
n+ also builds on prior theoretical work on MIMO [29, 27]. The
most relevant theoretical work to this paper is past work on multi-
user MIMO, interference alignment and cognitive MIMO. Multi-
user MIMO allows multiple clients to be served simultaneously
by a single base station that has more antennas than any of the
clients. A number of techniques, such as beamforming, dirty paper
coding, linear decorrelators, and successive interference cancella-
tion, have been proposed to achieve the capacity of both the uplink
and the downlink [11, 21, 24]. More recently, work on interference
alignment [8, 19, 22] has shown new capacity results for multi-user
MIMO channels. Finally, theoretical work on cognitive MIMO [10,
26, 25] has advocated the use of MIMO to ensure that secondary
users can coexist with the primary users, without creating interfer-
ence to the primary users. These papers provide only theoretical
solutions and typically target speciﬁc topologies. n+ builds on this
foundational work but differs from it in that it focuses on a random
access protocol where nodes do not have to coordinate explicitly
before they access the medium. Furthermore, n+ is implemented
and shown to work in actual wireless networks.
8. CONCLUSION
This paper presents n+, a random access protocol for heteroge-
neous MIMO networks. We analytically show that n+ can always
use as many degrees of freedom as the transmitter with the max-
imum number of antennas while maintaining the random access
property of 802.11. We show via a prototype implementation that
n+ can signiﬁcantly improve the network throughput. We believe
that as the diversity in the size and processing power of devices
increases, n+ is well positioned to exploit these differences and
provide a better utilization of network resources.
Acknowledgments: We thank Nabeel Ahmed, Arthur Berger,
Haitham Hassanieh, Nate Kushman, Hariharan Rahul, Lenin
Ravindranath, Mythili Vutukuru, and Richard Yang for their in-
sightful comments. This research is supported by DARPA IT-
MANET, NSC and NSF.
9. REFERENCES
[1] 4x4 MIMO Technology.
http://www.quantenna.com/4x4-mimo.html.
[2] ACQUITEK Inc., Fury GPS Disciplined Frequency Standard.
http://www.acquitek.com/fury/.
[3] Ettus Inc., Universal Software Radio Peripheral. http://ettus.com.
[4] System Description and Operating Principles for High Throughput
Enhancements to 802.11. IEEE 802.11-04/0870r, 2004.
[5] IEEE Std 802.11-1997, pages i –445, 1997.
[6] IEEE Std 802.11n-2009, pages c1 –502, 2009.
[7] E. Aryafar, N. Anand, T. Salonidis, and E. W. Knightly. Design and
Experimental Evaluation of Multi-User Beamforming in Wireless
LANs. In ACM MobiCom, 2010.
[8] V. Cadambe and S. Jafar. Interference Alignment and Degrees of
Freedom of the K-User Interference Channel. IEEE Trans. Inf.
Theory, 54(8):3425 –3441, 2008.
[9] O. Edfors, M. Sandell, J. Van de Beek, S. Wilson, and P. Borjesson.
OFDM Channel Estimation by Singular Value Decomposition. IEEE
Trans. Comm., 46(7):931–939, 2002.
[10] S. Ganesan, M. Sellathurai, and T. Ratnarajah. Opportunistic
Interference Projection in Cognitive MIMO Radio with Multiuser
Diversity. In IEEE DySPAN, 2010.
[11] G.J.Foschini. Layered Space-Time Architecture for Wireless
Communication in a Fading Environment When Using
Multi-Element Antennas. In Bell LAbs Technical Journal, 1996.
[12] S. Gollakota and D. Katabi. Zigzag Decoding: Combating Hidden
Terminals in Wireless Networks. In ACM SIGCOMM, 2008.
[13] S. Gollakota, S. D. Perli, and D. Katabi. Interference Alignment and
Cancellation. In ACM SIGCOMM, 2009.
[14] M. Guillaud, D. Slock, and R. Knoop. A Practical Method For
Wireless Channel Reciprocity Exploitation Through Relative
Calibration. In ISSPA, 2005.
[15] M. Guillaud, D. Slock, and R. Knopp. A Practical Method for
Wireless Channel Reciprocity Exploitation through Relative
Calibration. In Signal Processing and Its Applications, 2005.
[16] D. Halperin, W. Hu, A. Sheth, and D. Wetherall. Predictable 802.11
Packet Delivery from Wireless Channel Measurements. In ACM
SIGCOMM, 2010.
[17] R. Handel and M. Huber. Integrated Broadband Networks; An
Introduction to ATM-Based Networks. Addison-Wesley Longman
Publishing Co., Inc., 1991.
[18] J. Heiskala and J. Terry. OFDM Wireless LANs: A Theoretical and
Practical Guide. Sams Indianapolis, IN, USA, 2001.
[19] S. Jafar and S. Shamai. Degrees of Freedom Region of the MIMO X
Channel. IEEE Trans. Inf. Theory, 54(1):151–170, 2008.
[20] K. C.-J. Lin, Y. Chuang, and D. Katabi. A Light-Weight Wireless
Handshake. In MIT Tech Report, 2011.
[21] R. Lupas and S. Verdu. Linear Multiuser Detectors for Synchronous
Code-Division Multiple-Access Channels. IEEE Trans. Inf. Theory,
35(1):123–136, Jan. 1989.
[22] M. Maddah-Ali, A. Motahari, and A. Khandani. Communication
over MIMO X Channels: Interference Alignment, Decomposition,
and Performance Analysis. IEEE Trans. Inf. Theory,
54(8):3457–3470, 2008.
[23] C. D. Meyer. Matrix Analysis and Applied Linear Algebra. SIAM,
2001.
[24] M.K.Varanasi and T.Guess. Optimum Decision Feedback Multiuser
Equalization and Successive Decoding Achieves the Total Capacity
of the Gaussian Multiple-Access Channel. In Proceedings of the
Asilomar Conference on Signals, Systems and Computers, 1997.
[25] B. Nosrat-Makoouei, J. Andrews, and R. Heath. User Admission in
MIMO interference Alignment Networks. In IEEE ICASSP, Prague,
May 2011.
[26] S. Perlaza, N. Fawaz, S. Lasaulce, and M. Debbah. From Spectrum
Pooling to Space Pooling: Opportunistic Interference Alignment in
MIMO Cognitive Networks. IEEE Trans. Signal Process.,
58(7):3728–3741, 2010.
[27] A. Poon, R. Brodersen, and D. Tse. Degrees of Freedom in Multiple
Antenna Channels: a Signal Space Approach. IEEE Trans. Inf.
Theory, 51(2):523–536, 2005.
[28] H. Rahul, H. Hassanieh, and D. Katabi. SourceSync: a Distributed
Wireless Architecture for Exploiting Sender Diversity. In ACM
SIGCOMM, 2010.
[29] A. Sayeed. Deconstructing Multiantenna Fading Channels. IEEE
Trans. Signal Process., 50(10):2563–2579, Oct. 2002.
[30] K. Tan, J. Fang, Y. Zhang, S. Chen, L. Shi, J. Zhang, and Y. Zhang.
Fine-Grained Channel Access in Wireless LAN. In ACM SIGCOMM,
2010.
[31] K. Tan, H. Liu, J. Fang, W. Wang, J. Zhang, M. Chen, and G. M.
Voelker. SAM: Enabling Practical Spatial Multiple Access in
Wireless LAN. In ACM MobiCom, 2009.
[32] D. Tse and P. Vishwanath. Fundamentals of Wireless
Communications. Cambridge University Press, 2005.