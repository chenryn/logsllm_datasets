hwMplsTunnelEgressLSRId
文档版本 06 (2017-09-12) 华为专有和保密信息 485
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 35 MPLS_LSPM
对系统的影响
对业务无影响。
可能原因
隧道Hot-standby LSP建立成功。
处理步骤
l 正常运行信息，无需处理。
----结束
35.9 MPLS_LSPM_1.3.6.1.4.1.2011.5.25.121.2.1.49
hwMplsTunnelHotstandbyDown
Trap Buffer 信息解释
The hot-standby LSP of the tunnel changes to Down. (SessionTunnelId=[SessionTunnelId],
TunnelInstIndex=[TunnelInstIndex], IngressLsrId=[IngressLsrId],
EgressLsrId=[EgressLsrId], mplsTunnelIfName=[mplsTunnelIfName],
hwMplsTunnelDownReason=[hwMplsTunnelDownReason],
hwMplsTunnelDownLSRId=[hwMplsTunnelDownLSRId],
hwMplsTunnelDownIfAddrType=[hwMplsTunnelDownIfAddrType],
hwMplsTunnelDownIfAddr=[hwMplsTunnelDownIfAddr])
隧道热备份LSP进入Down状态。
Trap 属性
Trap属性 描述
Alarm or Event Alarm
Trap Severity Critical
Mnemonic Code hwMplsTunnelHotstandbyDown
Trap OID 1.3.6.1.4.1.2011.5.25.121.2.1.49
Alarm ID 0x09062062
Alarm Type communicationsAlarm
Raise or Clear Raise
Match trap 35.8 MPLS_LSPM_1.3.6.1.4.1.2011.5.25.121.2.1.48
hwMplsTunnelHotstandbyUp
文档版本 06 (2017-09-12) 华为专有和保密信息 486
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 35 MPLS_LSPM
Trap Buffer 信息参数
参数名称 参数含义
SessionTunnelId 隧道标识。
TunnelInstIndex Tunnel的InstIndex。
IngressLsrId Tunnel的入节点LSR ID。
EgressLsrId Tunnel的出节点LSR ID。
mplsTunnelIfName Tunnel的接口名称
VB 信息参数
VB OID VB Name VB Index
1.3.6.1.4.1.2011.5.25.121.1. hwMplsTunnelInterfaceNam hwMplsTunnelIndex
1.1.29 e
hwMplsTunnelInstance
hwMplsTunnelIngressLSRI
d
hwMplsTunnelEgressLSRId
1.3.6.1.4.1.2011.5.25.121.2. hwMplsTunnelDownReason N/A
2.3
1.3.6.1.4.1.2011.5.25.121.2. hwMplsTunnelDownLSRID N/A
2.8
1.3.6.1.4.1.2011.5.25.121.2. hwMplsTunnelDownIfIpAd N/A
2.10 drType
1.3.6.1.4.1.2011.5.25.121.2. hwMplsTunnelDownIfIpAd N/A
2.9 dr
对系统的影响
不依赖该隧道热备份LSP进行流量转发，则对转发流量无影响。若依赖该隧道热备份
LSP进行流量转发，而该隧道还有其他LSP路径，则转发的流量切换到其他LSP，否则
流量中断。
可能原因
原因1：接口状态变为Down。
原因2：删除隧道相关配置。
原因3：链路发生故障。
原因4：主LSP建立成功后，热备份LSP的建立需要排除主LSP路过的节点。
文档版本 06 (2017-09-12) 华为专有和保密信息 487
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 35 MPLS_LSPM
处理步骤
步骤1 在入节点（即产生该条告警的节点）上执行命令display mpls te tunnel-interface tunnel-
name查看隧道的配置：通过查看Tunnel State Desc字段检查Tunnel是否处于Down状态。
执行命令display mpls te tunnel-interface last-error，查看出错提示。
l 如有以下错误提示：
– 显示“Cspf failed to calculate a path for Tunnel.”，表示入节点使能了CSPF，
但CSPF算路失败，请执行步骤2。
– 显示“Trigger Rsvp failed.”请执行步骤2。
– 显示“One LSP is deleted at smooth period.”请执行步骤6。
– 显示“One LSP is deleted at Tunnel aging period”请执行步骤6。
– 其它类型的错误，请执行步骤6。
l 如没有提示错误提示请执行步骤2。
步骤2 在入节点上执行ping命令检查能否Ping通Tunnel的目的地址。
l 如果不能ping通，请排除路由故障，使入节点能够Ping通Tunnel的目的地址，然后
查看是否出现MPLS_LSPM_1.3.6.1.4.1.2011.5.25.121.2.1.48
hwMplsTunnelHotstandbyUp的告警。
– 是，请执行步骤7。
– 不是，请执行步骤3。
l 如果能够ping通，请执行步骤3。
步骤3 在入节点的MPLS视图下执行display this命令，检查是否配置了mpls te cspf命令，即检
查系统是否使能了CSPF。
l 是，请执行步骤4。
l 不是，请执行步骤5。
步骤4 在入节点上执行display mpls te cspf destination命令检查是否存在满足指定约束条件的
路径。如果有，则显示该TE隧道的路径，表示CSPF算路成功，否则显示结果为空，表
示算路失败。
步骤5 执行命令display explicit-path查看在Tunnel沿途经过的各接口并在各个接口的接口视图
下执行display this命令，检查通往目的地址的接口是否使能了MPLS、MPLS TE和
RSVP-TE。
l 如果未使能，在接口视图下执行mpls、mpls te和mpls rsvp-te命令。
l 如果发现接口状态处于非Up状态，请重启接口。即，在接口视图执行shutdown，
然后执行undo shutdown，或在接口视图下执行restart命令。
之后，查看是否出现MPLS_LSPM_1.3.6.1.4.1.2011.5.25.121.2.1.48
hwMplsTunnelHotstandbyUp的告警。
l 是，请执行步骤7。
l 不是，请执行步骤6。
步骤6 请收集该设备的告警信息、日志信息和配置信息，并联系技术支持人员。
步骤7 结束。
----结束
文档版本 06 (2017-09-12) 华为专有和保密信息 488
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 35 MPLS_LSPM
35.10 MPLS_LSPM_1.3.6.1.4.1.2011.5.25.121.2.1.50
hwMplsTunnelOrdinaryUp
Trap Buffer 信息解释
The ordinary LSP of the tunnel changes to Up. (SessionTunnelId=[INTEGER],
TunnelInstIndex=[integer], IngressLsrId=[integer], EgressLsrId=[integer],
mplsTunnelIfName=[octet])
隧道普通备份LSP建立成功。
Trap 属性
Trap属性 描述
Alarm or Event Alarm
Trap Severity Error
Mnemonic Code hwMplsTunnelOrdinaryUp
Trap OID 1.3.6.1.4.1.2011.5.25.121.2.1.50
Alarm ID 0x00f10046
Alarm Type communicationsAlarm
Raise or Clear Clear
Match trap 35.11 MPLS_LSPM_1.3.6.1.4.1.2011.5.25.121.2.1.51
hwMplsTunnelOrdinaryDown
Trap Buffer 信息参数
参数名称 参数含义
SessionTunnelId Tunnel ID。
TunnelInstIndex Tunnel的InstIndex。
IngressLsrId Tunnel的头节点地址。
EgressLsrId Tunnel的目的地址。
mplsTunnelIfName Tunnel的接口名称。
文档版本 06 (2017-09-12) 华为专有和保密信息 489
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 35 MPLS_LSPM
VB 信息参数
VB OID VB Name VB Index
1.3.6.1.4.1.2011.5.25.121.1. hwMplsTunnelInterfaceNam hwMplsTunnelIndex
1.1.29 e
hwMplsTunnelInstance
hwMplsTunnelIngressLSRI
d
hwMplsTunnelEgressLSRId
对系统的影响
无
可能原因
隧道普通备份LSP建立成功。
处理步骤
l 正常运行信息，无需处理。
----结束
35.11 MPLS_LSPM_1.3.6.1.4.1.2011.5.25.121.2.1.51
hwMplsTunnelOrdinaryDown
Trap Buffer 信息解释
The ordinary LSP of the tunnel changes to Down. (SessionTunnelId=[INTEGER],
TunnelInstIndex=[integer], IngressLsrId=[integer], EgressLsrId=[integer],
mplsTunnelIfName=[octet], hwMplsTunnelDownReason=[integer],
hwMplsTunnelDownLSRId=[binary], hwMplsTunnelDownIfAddrType=[integer],
hwMplsTunnelDownIfAddr=[binary])
隧道普通备份LSP进入Down状态。
Trap 属性
Trap属性 描述
Alarm or Event Alarm
Trap Severity Error
Mnemonic Code hwMplsTunnelOrdinaryDown
Trap OID 1.3.6.1.4.1.2011.5.25.121.2.1.51
Alarm ID 0x00f10046
文档版本 06 (2017-09-12) 华为专有和保密信息 490
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 35 MPLS_LSPM
Trap属性 描述
Alarm Type communicationsAlarm
Raise or Clear Raise
Match trap 35.10 MPLS_LSPM_1.3.6.1.4.1.2011.5.25.121.2.1.50
hwMplsTunnelOrdinaryUp
Trap Buffer 信息参数
参数名称 参数含义
SessionTunnelId Tunnel ID。
TunnelInstIndex Tunnel的InstIndex。
IngressLsrId Tunnel的头节点地址。
EgressLsrId Tunnel的目的地址。
mplsTunnelIfName Tunnel的接口名称。
hwMplsTunnelDownReason Tunnel进入Down状态的原因。
hwMplsTunnelDownLSRId 出错节点的LSR ID。
hwMplsTunnelDownIfAddrType 出错接口的IP地址类型。
hwMplsTunnelDownIfAddr 出错接口的IP地址。
VB 信息参数
VB OID VB Name VB Index
1.3.6.1.4.1.2011.5.25.121.1. hwMplsTunnelInterfaceNam hwMplsTunnelIndex
1.1.29 e
hwMplsTunnelInstance
hwMplsTunnelIngressLSRI
d
hwMplsTunnelEgressLSRId
1.3.6.1.4.1.2011.5.25.121.2. hwMplsTunnelDownReason N/A
2.3
1.3.6.1.4.1.2011.5.25.121.2. hwMplsTunnelDownLSRID N/A
2.8
1.3.6.1.4.1.2011.5.25.121.2. hwMplsTunnelDownIfIpAd N/A
2.10 drType
1.3.6.1.4.1.2011.5.25.121.2. hwMplsTunnelDownIfIpAd N/A
2.9 dr
文档版本 06 (2017-09-12) 华为专有和保密信息 491
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 35 MPLS_LSPM
对系统的影响
若不依赖该隧道普通备份LSP进行流量转发，则对转发流量无影响。若依赖该隧道普通
备份LSP进行流量转发，而该隧道配置其他有备份LSP，则转发的流量切换到其他备份
LSP，否则流量中断。
可能原因
原因1：Other.（其它。）
原因2：Static LSP Down.（静态LSP状态为Down。）
原因3：Static CR-LSP Down.（静态CR-LSP状态为Down。）
原因4：The out interface of the RSVP LSP ingress is down.（RSVP LSP的Ingress出接口状
态为Down。）
原因5：The resource of RSVP LSP is preempted.（RSVP LSP的资源被抢占。）
原因6：RSVP message timeout.（RSVP消息超时。）
原因7：RSVP neighbor lost.（RSVP Hello检测到下游节点故障。）
原因8：The bypass-tunnel is down or is unbinded with main tunnel, as bypass-tunnel is in
used.（旁路隧道处于“In Use”状态时，旁路隧道Down或与主隧道解绑定。）
原因9：CSPF fails to compute.（CSPF算路失败。）
原因10：User shutdown.（用户手动Shutdown隧道。）
处理步骤
l 原因1：Other.
a. 请收集该设备的告警信息、日志信息和配置信息，并联系技术支持人员。
l 原因2：Static LSP Down.
a. 检查当前Tunnel接口的配置、RSVP协议和IGP协议的配置，以及整条链路及
其带宽是否满足。
n 如配置错误，修改相应配置后提交，问题解决。
n 否则请执行步骤2。
b. 执行命令display mpls te tunnel-interface last-error，查看出错提示。
n 如有以下错误提示：
○ 显示“Cspf failed to calculate a path for Tunnel.”，表示入节点使能了
CSPF，但CSPF算路失败，检查显式路径是否配置正确，IGP协议是
否使能MPLS TE，路由配置是否正确。
○ 配置错误，修改配置，问题解决。
○ 否则请执行步骤3。
○ 显示“Routing Problem:Bad EXPLICIT_ROUTE object.”或者
“Routing Problem:Bad initial subobject.”，表示入节点没有使能
CSPF，但配置了错误的显式路径，检查并配置正确的显式路径。
○ 问题解决。
○ 否则请执行步骤3。
文档版本 06 (2017-09-12) 华为专有和保密信息 492
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 35 MPLS_LSPM
○ 显示“Routing Problem:No route available toward destination.”，表示
隧道入节点和中间节点都没有使能CSPF，配置了错误的显式路径或
者没有到达目的地址的路由，检查IGP及显式路径的配置。
○ 问题解决。
○ 否则请执行步骤3。
○ 显示“Service preempted”，表示该隧道资源被抢占了，根据实际需
要修改Tunnel接口下配置的抢占优先级。
○ 问题解决。
○ 否则请执行步骤3。
○ 显示“Admission Control failure”表示入节点使能了CSPF，下游节
点未使能CSPF，且CSPF在入节点上沿显式路径计算带宽足够，但下
游节点的链路带宽不足，检测显式路径及带宽配置。
○ 问题解决。