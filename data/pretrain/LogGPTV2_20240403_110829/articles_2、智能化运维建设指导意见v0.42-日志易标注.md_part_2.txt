### 功能描述
【数据源】
-   资源关系数据
资源关系数据应建立在准确的CMDB基础上，需要准确记录主机、主机上的虚拟机、容器、进程、应用、业务等资源关联关系。资源关系后续将参与关联分析，便于溯源。
-   上下游拓扑关系数据
用于描述应用上下游依赖拓扑结构的相关数据
-   故障因果规则库
运维人员在排障中积累了丰富的经验，如主机宕告警产生后，相关的进程、数据库、应用、业务等会产生一系列的告警。需将运维人员积累的故障因果规则入库供根本告警预测
-   告警数据
告警数据是告警根因分析的基础数据，同时告警数据的属性信息可支持资源关系、上下游拓扑、规则库的适配等。
【功能方案】
-   告警根因分析
```{=html}
```
-   基于资源关系的告警根因分析
资源关系的逻辑维度包含了应用实例、模块、集群等层次，物理维度包含机器和机房层次。一个层次同时刻的报警，大多数都存在着一定联系，因而可以由这些资源关系分析出根本告警。例如：一个主机出现故障，主机上的虚拟机、应用都会出现告警，通过资源关系的分析可判断主机告警为根本告警。
-   基于上下游拓扑的告警根因分析
根据应用的上下游依赖拓扑，对同一时刻的上下游告警进行关联，可以准确的将最下游的应用故障定位为根本告警。例如A应用调用数据库集群B，B出现故障时，A应用同样会发生故障告警，此时可以溯源到数据库集群B是根源
-   基于数据挖掘和机器学习的告警根因分析。
通过对大量的历史告警数据进行聚类和关联分析训练，可以发现潜在的告警关联规律，形成告警关联规则库。同时定期将新产生的告警数据输入告警关联分析模型进行训练，可以不断更新已有的告警关联规则，使得关联分析结果日趋准确。当实时告警产生时，可匹配告警关联分析规则来判断根本告警。
-   可视化展现
运维人员可查看基于分析后的关联告警，界面可展现每个告警是否是根本告警的权重，对一段时间的告警数据进行分析，在页面以列表、图表等形式展现。列表可以根据告警信息进行筛选过滤，图表可以展现告警间的关联关系。
-   人工标注（可选）
在基于数据挖掘和机器学习的告警根因分析方案中，支持通过人工对告警根因分析的结果进行标注，保留具有业务关联关系的根因分析规则，删除没有业务关联关系或对分析结果产生干扰的根因分析规则，以人工干预的方式达到提升算法分析结果准确性的目的。
### 适用范围
系统故障期间告警根因分析：
告警根因分析可适用于Iaas、Paas、Saas各层级的多个运维对象产生告警的综合分析。以下列具体故障举例：
![](media/image2.png){width="4.415972222222222in"
height="3.6868055555555554in"}
> 1、交换机端口down，触发交换机端口down告警。
2、由于交换机端口down，网络不通，导致监控采集程序采集主机访问失败，触发服务器宕机告警。
3、同理监控采集程序采集主机上部署的数据库业务应用等信息都访问失败，触发各种告警，如数据库连接告警，http服务告警，应用接口告警，和业务告警等。
从此场景可以看出，主机及其上部署的应用数据库实际并没有故障发生，只是由于网络不通导致触发的告警，根本告警在于交换机端口down告警。可以认为其他告警是由于根本告警引发的子告警，存在着关联关系。通过智能告警根因分析，可判断出交换机端口down告警为此次系统故障的根本告警。
### 预期效果
-   根本告警准确快速定位
    从大量的告警中快速定位到根本告警，缩短故障排查及恢复时间。
## 告警收敛
### 场景描述
在重大故障发生期间，多层次不同纬度的运维对象容易产生告警风暴，重要的告警信息淹没在海量冗余告警中，运维人员需要花费大量精力查看冗余告警。
告警收敛是指将告警中大量相似、重复事件的冗余告警进行收敛，防止重要核心的告警淹没在大量冗余告警中，避免运维人员忽视重要核心告警。
### 功能描述
【数据源】
数据来源与2.1.1中告警根因分析数据源相同。
【功能方案】
告警收敛是基于告警根因分析的输出结果，对告警发送策略进行灵活调整的一种智能化处理方案。在告警根因分析的功能方案基础上，需支持下列功能：
-   冗余告警收敛
    针对具备关联关系的告警集，将其中非根本告警进行压缩处理，不向告警接收人发送。同时建议可在整体故障恢复后发送恢复短信，便于运维人员获知故障处理结果。
-   告警接收人发送策略优先级
    同一告警监控点配置多个接收人时，不同接收人告警发送频率支持分级配置，即最高优先级的接收人和低优先级的接收人的告警发送频次可有所差异。同时需保证原来的告警升级策略需不受到影响。
-   原始告警明细查询
    支持对已经压缩的原始告警明细进行查询和展现，如页面登录、告警短信追加URL等方式。便于定期开展告警收敛成功率的分析和核查。
### 适用范围
-   大型故障告警风暴收敛：
    当出现较大故障时，告警数量会快速增长，有效的告警将会淹没在大量冗余告警中，不利于运维，告警收敛能有效的减少告警数量，方便运维人员快速找到核心告警
-   日常冗余告警收敛：
    日常运维告警数量过多，容易对运维人员造成干扰，日常降低无效和重复告警数量，减少对运维人员工作的打扰。
### 预期效果
-   提升运维效率
系统某一异常事件发生时，大量具有相关性的冗余告警使得真正需要处理的有效异常事件湮没在告警风暴中，对运维人员造成较大干扰。通过告警冗余收敛，减少告警呈现的数量，便于运维人员专注于重要告警并及时响应处理，以提升告警处理效率。
## 智能异常检测
### 场景描述
传统运维工作中的异常检测以静态阈值检测为主，随着业务的动态发展，传统的方式存在一些局限：阈值太高，漏告警多，质量隐患难以发现；阈值太低，告警太多引发告警风暴，干扰运维人员的判断；某些新增异常在问题暴露之前无法配置相对应的阀值。
智能异常检测是指引入智能技术（机器学习算法、深度学习等算法），通过对历史数据学习，实现对系统、业务等运行过程中异常情况的自检测和告警的能力。
### 功能描述
**【数据源】**
-   指标类：
```{=html}
```
-   Iaas层对象指标：
    包括物理资源中及逻辑资源中具有性能指标属性的物理设备和逻辑设备，例如资源池、宿主机集群、宿主机、物理机、FC-SAN、IP-SAN、NAS、防火墙、负载均衡器、交换机等。指标数据包括但不限于CPU
    idle、User、system时间、内存使用量、page
    faultes等，服务器的网络流量、丢包率、TCP连接率等，磁盘使用量、读写延时、IOPS等指标数据。
-   Paas层对象指标：
    包括具有指标属性的PaaS层资源，例如Oracle实例、中间件实例、Redis集群、Hadoop集群、Yarn集群等。指标数据包括但不限于对象CPU使用率、内存使用率、磁盘空间使用情况等资源占有指标数据，对象特有指标数据，比如中间件实例队列个数、服务个数、队列等待数、进程队列消息个数、活动连接数；Oracle表空间大小，使用率、日志空间大小，使用率等指标数据。
-   Saas层对象指标
    包括业务系统相关的关键指标，如BOSS系统每日处理话单量、CRM系统每日交易量、BASS系统加载数据量等。指标数据包括但不限于业务请求量、业务响应时长、失败率、成功率、吞吐量等指标数据。
```{=html}
```
-   日志类
    硬件设备、系统软件或应用软件等生产的各类文本日志，通常是半结构化文本格式，如程序日志、Tracing、syslog日志等。
**【功能模块】**
智能异常检测的功能架构如下：
![](media/image3.png){width="5.326154855643044in"
height="1.701205161854768in"}
-   标准化处理
    对接收的数据按照标准格式进行处理，抽取其中关键字段，明确所处理系统的文件名格式和文件内容字段定义。
-   规则管理
    规则库中可能存在一条或多条规则，规则的检测阈值设置可以直接设置或根据分析对象预先生成，并且能够动态调整。应用场景不同，所选用的规则集合及检测阈值有所不同。当算法引擎执行时，会根据规则执行队列中的执行序列执行规则实例。
-   相关匹配处理
    根据特征库中特征信息，对标准化处理后的数据进行计算匹配，并判定正常或异常，生成异常指标数据，提供给告警或预警模块。
-   异常检测算法
    常用的异常检测算法包括决策树算法、随机森林算法、线性回归算法、逻辑回归算法、Pearson算法、DBSCAN算法、K-Means算法等。
### 适用范围
智能异常检测旨在发现监控指标、日志等文本信息中的异常波动，异常值包括突变的数据、超出波动范围的数据、周期波动的数据、新增异常数据等，通过研究这些异常数据，及时发现异常波动，保证业务的稳定性。可适用的范围可包括：