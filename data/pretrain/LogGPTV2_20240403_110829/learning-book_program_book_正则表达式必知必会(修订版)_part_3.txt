()p\-(∈∈}p\-(∈∈}p\
请注意，语法是正则表达式最容易掌握的部分，真正的挑战是学会
如何运用那些语法把实际问题分解为一系列正则表达式并最终解决。与
学习其他程序设计语言一样，只靠读书是学不会如何灵活运用语法正则
的，你必须通过亲身实践才能真正掌握它们
1.4使用正则表达式
正如前面解释的那样，不存在所谓的正则表达式程序：它既不是可
以直接运行的应用程序，也不是可以从哪里购买或下载来的软件。在绝
大多数的软件产品、编程语言、工具程序和开发环境里，正则表达式语
言都已被实现，
正则表达式的使用方法和具体功能，在不同的应用程序语言中各有
不同。一般来说，应用程序大多使用菜单选项和对话框来访间正则表达
式，面程序设计语言大都在函数或对象类中使用正则表达式。
此外，并非所有的正则表达式实现都是一样的。在不同的应用程序/
语言里，正则表达式的语法和功能往往会有明显（有时也不那么明显）
的差异。
附录A对支持正则表达式的许多应用程序和语言在这方面的细节进
行了汇总，在继续学习下一章之前，你应该先熟悉一下附录A，者者
你们正在使用的应用程序或语言在正则表达式方面都有哪些与众不同
之处。
为了帮助大家尽快入门，我们在这本书的配套网页http://www.forta
com/books/0672325667/上准备 了个名为Regular Expression Tester （ 正则
表达式测试器）的工具软件供大家下载。这个基于Web的工具软件有好几
种版本，它们分别对应者一些比较流行的应用服务器和编程语言，还有
一个版本是专门用来直接测试用JavaScript语言编写出来的正则表达式
---
## Page 16
6第1章正则表达式入门
的。附录C对这个工具软件的用法进行了介绍，这个工具可以简便、快速
地对你们构造出来的正则表达式进行测试，这对大家的学习肯定会有很
大的帮助。
1.5在继续学习之前
在继续学习之前，你还应该了解以下几个事实。
口在使用正则表达式的时候，你将发现几乎所有的问题都有不止一
种解决方案。它们有的比较简单，有的比较快速，有的兼容性更
好，有的功能更全。这么说吧，在编写正则表达式的时候，只有
对、错两种选择的情况是相当少见的—同一个间题往往会有多
种解决方案。
口正如我们前面讲过的那样，正则表达式的不同实现往往会有所差
异。在编写本书的时候，我们已尽了最大努力来保证各章里的示
例能适用于尽可能多的实现：但有些差异和不兼容是无法回避的，
我们针对这种情况都尽可能地进行了注明。
口与其他程序设计语言一样，学习正则表达式的关键是实践，实践，
再实践。
个示例
1.6小结
正则表达式是文本处理方面功能最强大的工具之一。正则表达式语
言用来构造正则表达式（最终构造出来的字符串就称为正则表达式），正
则表达式用来完成搜索和替换操作。
---
## Page 17
第2章
匹配单个字符
在本章里，你将学习如何对一个或多个字符进行简单的字符匹配。
2.1匹配纯文本
Ben是一个正则表达式。因为本身是纯文本，所以看起来可能不像是
一个正则表达式，但它的确是。正则表达式可以包含纯文本（甚至可以
只包含纯文本）。当然，像这样使用正则表达式是一种浪费，但把它作为
我们学习正则表达式的起点还是很不错的。
我们来看一个例子：
文本
Hello, my name is Ben. Please visit
my website at http://www.forta.com/ .
正则表达式
Ben
结果
Hello, ny nane is Ben. Please visit
my website at http: //ww.forta.com/ .
分析
这里使用的正则表达式是纯文本，它将匹配原始文本里的Ben。
再来看一个例子，它使用了与刚才相同的原始文本和另外一个正则
表达式。
---
## Page 18
8
第2章匹配单个字符
文本
Hello, ay nate is Ben. Please visit
my website at http://wnr.forta.com/
正则表达式
my
结果
Hello, my name is Ben. Please visit
my: website at http: //wmw.forta.com/
分析
my也是静态文本，它在原始文本里找到了两个匹配结果。
2.1.1有多个匹配结果
绝大多数正则表达式引擎的默认行为是只返回第1个匹配结果。具体
到上面那个例子，原始文本里的第1个my通常是一个，但第2个往往不是。
怎样才能把两个或更多个匹配结果都找出来呢？绝大多数正则表达
式的实现都提供了一种能够把所有的匹配结果全部找出来的机制（通常
返回为一个数组或是其他的专用格式）。比如说，在JavaScript里，可选的
g（意思是global，全局）标志将返回一个包含着所有匹配的结果数组，
注意如果你想知道在你正在使用的语言或工具里如何进行
全局匹配，请参阅本书的附录A
2.1.2字母的大小写问题
正则表达式是区分字母大小写的，所以Ben不匹配ben。不过，绝
大多数正则表达的式实现也支持不区分字母大小写的匹配操作。比如
说，JavaScript用户可以用i标志来强制执行一次不区分字母大小写的
搜索。
注意如果你想知道你正在使用着的语言或工具里如何进行
不区分字母大小写的搜索操作，请参阅本书的附录A
---
## Page 19
2.2匹配任意字符
9
2.2
匹配任意字符
前面见到的正则表达式都是些静态的纯文本，它们根本体现不出正
则表达式的威力。下面，我们一起来看看如何使用正则表达式去匹配不
可预知的字符。
在正则表达式里，特殊字符（或字符集合）用来给出要搜索的东西。
.字符（英文句号）可以匹配任何一个单个的字符。
提示如果你曾经使用过DOS的文件控索功能，你将发现正则
表达式里的，字符相当于DOS的？字符，SQL用户将注意到正则
表达式里的，字符相当于SQL中的_（下划线）字符。
于是，用正则表达式c.t进行的搜索将匹配到cat和cot（还能匹配到
些毫无意义的单词）。
文本
sales1.x1s
orders3 .x1s
sales2.x1s
sales3.x1s
apac1,x1s
europe2.x1s
na1,x1s
na2.x1s
sa1,x1s
正则表达式
sales.
结果
sales1.xls
orders3.x1s
sales2.x1s
sales3.x1s
apac1.x1s
europe2,x1s
na1,x1s
na2.x1s
sa1.x1s
---
## Page 20
10
第2章医配单个字符
分析
正则表达式sales.将把由字符串sales和另外一个字符构成的文件
名查找出来。9个文件里有3个与这个模式（patterm）相匹配。
提示人们常用模式表示实际的正则表达式。
注意正则表达式可以用来匹配包含着字符串内容的模式，匹
配的并不总是整个字持事，而是与某个模式相匹配的字持，即
使它们只是整个字符串的一部分。在上面的例子里，我们使用
的正则表达式并不能匹配整个文件名，它只匹配了文件名的一
部分。如果你需要把某个正则表达式的医配结果传递到其他代
码或应用程序里做进一步处理，就必须记住这一细节差异。
.字符可以匹配任何单个的字符、字母、数字甚至是，字符本身。
文本
sales.x1s
sales1.x1s
sales2.x1s
orders3.x1s
sales3.x1s
europe2.x1s
apac1.xls
na1,x1s
na2.x1s
sa1.x1s
正则表达式
sales.
结果
sales.x1s
sales1.x1s
sales2.x1s
orders3.x1s
sales3.x1s
---
## Page 21
2.2医配任意字符
11
apac1.x1s
europe2.x1s
na1.x1s
na2.x1s
sa1,x1s
分析
这个例子比上一个多了一个sales.xls文件。因为.能够匹配任何一
个单个的字符，所以这个文件也与模式sales.相匹配。
在同一个正则表达式里允许使用多个，字符，它们既可以连续出现
（一个接着一个一
..将匹配任意两个字符），也可以间隔着出现在模式的
不同位置。
我们再来看一个使用了相同原始文本的例子：把以na（表示北美）或
sa（表示南美）开头的文件（不管它们后面跟着一个什么数字）找出来。
文本
sales1,x1s
sales2.x1s
orders3.x1s
sales3.x1s
apac1.x1s
europe2.x1s
na1,x1s
sa1,x1s
na2.x1s
正则表达式
-a.
结果
sales1.x1s
orders3,x1s
sales2.xls
sales3.xls
apac1.x1s
europe2.x1s
na2.x1s
na1.x1s
sa1.x1s
---
## Page 22
12第2章医配单个字符
分析
正则表达式.a.把nal、na2和sa1找了出来，但它同时还找到了4个预
料之外的匹配结果。为什么会这样？因为我们使用的模式将与第2个字符
是a的任意3个字符相匹配。
我们真正需要的是后面再紧跟着一个英文句号的，a.的模式。再来试
一次：
文本
sales1.x1s
orders3.x1s
sales2.x1s
sales3.x1s
europe2.x1s
apac1.x1s
na1, x1s
na2.x1s
sa1.x1s
正则表达式
-a.,
结果
sales1.x1s
orders3. x1s
sales2.xls
sales3.x1s
apac1.x1s
europe2.x1s
na1, x1s
na2,x1s
sa1,x1s
分析
a.，并不比.a.好多少：新增加的.将匹配任何一个多出来的字符（不
管它是什么）。既然，是一个能够与任何一个单个字符相匹配的特殊字符，
怎样才能搜索，本身呢？
2.3匹配特殊字符
字符在正则表达式里有着特殊的含义。如果模式里需要一个.，就
---
## Page 23