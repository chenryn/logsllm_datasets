说明： 当前版本暂不支持打开该开关，即使用户手动设置为打开，系统内部也会
自动设置为关闭状态。
25.4.6.2 enable_adio_function
参数说明：是否开起ADIO功能。
该参数属于INTERNAL类型参数，为固定参数，用户无法修改此参数，只能查看。
说明： 当前版本暂不支持开启异步IO功能，默认该功能关闭。
取值范围：布尔型
 on/true表示开启此功能。
 off/false表示关闭此功能。
默认值：off
25.4.6.3 enable_fast_allocate
参数说明：磁盘空间快速分配开关。
该参数属于SUSET类型参数，请参考表15-1 中对应设置方法进行设置。只有在XFS
文件系统上才能开启该开关。
取值范围：布尔型
 on/true表示开启此功能。
 off/false表示关闭此功能。
默认值：off
25.4.6.4 prefetch_quantity
参数说明：描述行存储使用ADIO预读取IO量的大小。
南大通用数据技术股份有限公司
1215
GBase 8s V8.8开发者手册
该参数属于USERSET类型参数，请参考表15-1中对应设置方法进行设置。
取值范围：整型，128～131072，单位为8KB。
默认值：32MB(4096*8KB)
25.4.6.5 backwrite_quantity
参数说明：描述行存储使用ADIO写入IO量的大小。
该参数属于USERSET类型参数，请参考表15-1中对应设置方法进行设置。
取值范围：整型，128～131072，单位为8KB。
默认值：8MB(1024*8KB)
25.4.6.6 cstore_prefetch_quantity
参数说明：描述列存储使用ADIO预取IO量的大小。
该参数属于USERSET类型参数，请参考表15-1中对应设置方法进行设置。
取值范围：整型，1024～1048576，单位为KB。
默认值：32MB
25.4.6.7 cstore_backwrite_quantity
参数说明：描述列存储使用ADIO写入IO量的大小。
该参数属于USERSET类型参数，请参考表15-1中对应设置方法进行设置。
取值范围：整型，1024～1048576，单位为KB。
默认值：8MB
25.4.6.8 cstore_backwrite_max_threshold
参数说明：描述列存储使用ADIO写入数据库可缓存最大的IO量。
该参数属于USERSET类型参数，请参考表15-1中对应设置方法进行设置。
取值范围：整型，4096～INT_MAX/2，单位为KB。
默认值：2GB
南大通用数据技术股份有限公司
1216
GBase 8s V8.8开发者手册
25.4.6.9 fast_extend_file_size
参数说明：描述列存储使用ADIO预扩展磁盘的大小。
该参数属于SUSET类型参数，请参考表15-1中对应设置方法进行设置。
取值范围：整型，1024～1048576，单位为KB。
默认值：8MB
25.4.6.10 effective_io_concurrency
参数说明：磁盘子系统可以同时有效处理的请求数。对于RAID阵列，此参数应该是阵
列中驱动器主轴的数量。
该参数属于USERSET类型参数，请参考表15-1中对应设置方法进行设置。
取值范围：整型，0~1000
默认值：1
25.4.6.11 checkpoint_flush_after
参数说明：设置checkpointer线程刷页个数超过设定的阈值时，告知操作系统开始将操
作系统缓存中的页面异步刷盘。GBase8s中，磁盘页大小为8KB。
该参数属于SIGHUP类型参数，请参考表15-1中对应设置方法进行设置。
取值范围：整型，0~256（0表示关闭异步刷盘功能）。例如，取值32，表示checkpointer
线程连续写32个磁盘页，即32*8=256KB磁盘空间后会进行异步刷盘。
默认值：32
25.4.6.12 bgwriter_flush_after
参数说明：设置backgroundwriter线程刷页个数超过设定的阈值时，告知操作系统开始
将操作系统缓存中的页面异步刷盘。GBase8s中，磁盘页大小为8KB。
该参数属于SIGHUP类型参数，请参考表15-1中对应设置方法进行设置。
取值范围：整型，0~256（0表示关闭异步刷盘功能），单位页面（8KB）。例如，取
值64，表示backgroundwriter线程连续写64个磁盘页，即64*8=512KB磁盘空间后会进行
南大通用数据技术股份有限公司
1217
GBase 8s V8.8开发者手册
异步刷盘。
默认值：512KB（即64个页面）
25.4.6.13 backend_flush_after
参数说明：设置backend线程刷页个数超过设定的阈值时，告知操作系统开始将操作系
统缓存中的页面异步刷盘。GBase8s中，磁盘页大小为8KB。
该参数属于USERSET类型参数，请参考表15-1中对应设置方法进行设置。
取值范围：整型，0~256（0表示关闭异步刷盘功能），单位页面（8KB）。例如，取
值64，表示backend线程连续写64个磁盘页，即64*8=512KB磁盘空间后会进行异步刷盘。
默认值：0
25.5预写式日志
25.5.1 设置
25.5.1.1 wal_level
参数说明：设置写入WAL信息量的级别。
该参数属于POSTMASTER类型参数，请参考表15-1中对应设置方法进行设置。
须知：
 如果需要启用WAL日志归档和主备机的数据流复制，必须将此参数设置为archive
或者hot_standby。
 如果此参数设置为minimal，archive_mode必须设置为off，hot_standby必须设置为
off，max_wal_senders参数设置为0，且需为单机环境，否则将导致数据库无法启
动。
 如果此参数设置为archive，hot_standby必须设置为off，否则将导致数据库无法启
动。但是，hot_standby在双机环境中不能设置为off，具体参见hot_standby参数说
南大通用数据技术股份有限公司
1218
GBase 8s V8.8开发者手册
明。
取值范围：枚举类型
 minimal
优点：一些重要操作（包括创建表、创建索引、簇操作和表的复制）都能安全的跳过，
这样就可以使操作变得更快。
缺点：WAL仅提供从数据库服务器崩溃或者紧急关闭状态恢复时所需要的基本信息，
无法用WAL归档日志恢复数据。
 archive
这个参数增加了WAL归档需要的日志信息，从而可以支持数据库的归档恢复。
 hot_standby
这个参数进一步增加了在备机上运行的SQL查询的信息，这个参数只能在数据库服务
重新启动后生效。
为了在备机上开启只读查询，wal_level必须在主机上设置成hot_standby ，并且备机必
须打开hot_standby参数。hot_standby和archive级别之间的性能只有微小的差异，如果它们
的设置对产品的性能影响有明显差异，欢迎反馈。
 logical
这个参数表示WAL日志支持逻辑复制。
默认值：hot_standby
25.5.1.2 fsync
参数说明：设置GBase8s服务器是否使用fsync()系统函数（请参见wal_sync_method）
确保数据的更新及时写入物理磁盘中。
该参数属于SIGHUP类型参数，请参考表15-1中对应设置方法进行设置。
须知：
南大通用数据技术股份有限公司
1219
GBase 8s V8.8开发者手册
 使用fsync()系统函数可以保证在操作系统或者硬件崩溃的情况下将数据恢复到一
个已知的状态。
 如果将此参数关闭，可能会在系统崩溃时无法恢复原来的数据，导致数据库不可用。
取值范围：布尔型
 on表示使用fsync()系统函数。
 off表示不使用fsync()系统函数。
默认值：on
25.5.1.3 synchronous_commit
参数说明：设置当前事务的同步方式。
该参数属于USERSET类型参数，请参考表15-1中对应设置方法进行设置。
通常情况下，一个事务产生的日志的同步顺序如下：
1. 主机将日志内容写入本地内存。
2. 主机将本地内存中的日志写入本地文件系统。
3. 主机将本地文件系统中的日志内容刷盘。
4. 主机将日志内容发送给备机。
5. 备机接受到日志内容，存入备机内存。
6. 备机将备机内存中的日志写入备机文件系统。
7. 备机将备机文件系统中的日志内容刷盘。
8. 备机回放日志，完成对数据文件的增量更新。
取值范围：枚举类型
 on：表示主机事务提交需要等待备机将对应日志刷新到磁盘。
 off：表示主机事务提交无需等待主机自身将对应日志刷新到磁盘，通常也称为异
南大通用数据技术股份有限公司
1220
GBase 8s V8.8开发者手册
步提交。
 local：表示主机事务提交需要等待主机自身将对应日志刷新到磁盘，通常也称为本
地提交。
 remote_write：表示主机事务提交需要等待备机将对应日志写到文件系统（无需刷
新到磁盘）。
 remote_receive：表示主机事务提交需要等待备机接收到对应日志数据（无需写入
文件系统）。
 remote_apply：表示主机事务提交需要等待备机完成对应日志的回放操作。
 true：同on。
 false：同off。
 yes：同on。
 no：同off。
 1：同on。
 0：同off。
 2：同remote_apply。
默认值：on
25.5.1.4 wal_sync_method
参数说明：设置向磁盘强制更新WAL数据的方法。
该参数属于SIGHUP类型参数，请参考表15-1中对应设置方法进行设置。
须知： 如果将fsync关闭，这个参数的设置就没有意义，因为所有数据更新都
不会强制写入磁盘。
取值范围：枚举类型
 open_datasync表示用带O_DSYNC选项的open()打开“WAL”文件。
南大通用数据技术股份有限公司
1221
GBase 8s V8.8开发者手册
 fdatasync表示每次提交的时候都调用fdatasync()。（支持suse10和suse11）。
 fsync_writethrough表示每次提交的时候调用fsync()强制把缓冲区任何数据写入磁
盘。
说明： 由于历史原因，Windows 平台支持将 wal_sync_method 设置为
fsync_writethrough。在Windows平台上fsync_writethrough和fsync等效。
fsync表示每次提交的时候调用fsync()。（支持suse10和suse11）
open_sync表示用带O_SYNC选项的open()写“WAL”文件。（支持suse10和suse11）
说明： 不是所有的平台都支持以上参数。
默认值：fdatasync
25.5.1.5 full_page_writes
参数说明：设置GBase8s服务器在检查点之后对页面的第一次修改时，是否将每个磁
盘页面的全部内容写到WAL日志中。当增量检查点开关和enable_double_write同时打开时，
则不使用full_page_writes。
该参数属于SIGHUP类型参数，请参考表15-1中对应设置方法进行设置。
须知：
 设置这个参数是因为在操作系统崩溃过程中可能磁盘页面只写入了一部分内容，从
而导致在同一个页面中包含新旧数据的混合。在崩溃后的恢复期间，由于在WAL
日志中存储的行变化信息不够完整，因此无法完全恢复该页。把完整的页面影像保
存下来就可以保证页面被正确还原，代价是增加了写入WAL日志的数据量。
 关闭此参数，在系统崩溃的时候，可能无法恢复原来的数据。如果服务器硬件的特
质（比如电池供电的磁盘控制器）可以减小部分页面的写入风险，或者文件系统特
性支持（比如ReiserFS4），并且清楚知道写入风险在一个可以接受的范畴，可以
关闭这个参数。
取值范围：布尔型
南大通用数据技术股份有限公司
1222
GBase 8s V8.8开发者手册
 on表示启用此特性。
 off表示关闭此特性。
默认值：on
25.5.1.6 wal_log_hints
参数说明：设置在检查点之后对页面的第一次修改为页面上元组hintbits的修改时，是
否将整个页面的全部内容写到WAL日志中。不推荐用户修改此设置。
该参数属于POSTMASTER类型参数，请参考表15-1中对应设置方法进行设置。
取值范围：布尔型
 on表示整个页面全部内容写到WAL日志中。
 off表示整个页面内容不会写到WAL日志中。
默认值：on
25.5.1.7 wal_buffers
参数说明：设置用于存放 WAL 数据的共享内存空间的 XLOG_BLCKSZ 数，
XLOG_BLCKSZ的大小默认为8KB。
该参数属于POSTMASTER类型参数，请参考表15-1中对应设置方法进行设置。
取值范围：-1~218
如果设置为-1，表示 wal_buffers 的大小随着参数 shared_buffers 自动调整，为
shared_buffers 的 1/32，这种情况下最小值为 8 个 XLOG_BLCKSZ，最大值为 2048 个
XLOG_BLCKSZ，自动调整后的值小于最小值时会调整为最小值，大于最大值时会调整为
最大值。
如果设置为其他值，当小于4时，会被默认设置为4。
默认值：2048，即16MB
设置建议：每次事务提交时，WAL缓冲区的内容都写入到磁盘中，因此设置为很大的
值不会带来明显的性能提升。如果将它设置成几百兆，就可以在有很多即时事务提交的服务
南大通用数据技术股份有限公司
1223
GBase 8s V8.8开发者手册
器上提高写入磁盘的性能。根据经验来说，默认值可以满足大多数的情况。
25.5.1.8 wal_writer_delay
参数说明：WalWriter进程的写间隔时间。
该参数属于SIGHUP类型参数，请参考表15-1中对应设置方法进行设置。
须知： 如果时间过长可能造成WAL缓冲区的内存不足，时间过短会引起WAL
不断写入，增加磁盘I/O负担。
取值范围：整型， 1～10000，单位为毫秒。
默认值：200ms
25.5.1.9 commit_delay
参数说明：表示一个已经提交的数据在WAL缓冲区中存放的时间。
该参数属于USERSET类型参数，请参考表15-1中对应设置方法进行设置。
须知：
- 设置为非 0 值时事务执行commit后不会立即写入WAL中，而仍存放在WAL缓冲
区中，等待WalWriter进程周期性写入磁盘。
如果系统负载很高，在延迟时间内，其他事务可能已经准备好提交。但如果没有事务准
备提交，这个延迟就是在浪费时间。
取值范围：整型， 0～100000，单位为微秒，其中0表示无延迟。
默认值：0
25.5.1.10 commit_siblings
参数说明：当一个事务发出提交请求时，如果数据库中正在执行的事务数量大于此参数
的值，则该事务将等待一段时间（commit_delay的值），否则该事务则直接写入WAL。
该参数属于USERSET类型参数，请参考表15-1中对应设置方法进行设置。
取值范围：整型， 0～1000
南大通用数据技术股份有限公司
1224
GBase 8s V8.8开发者手册
默认值：5
25.5.1.11 wal_block_size
参数说明：说明WAL日志段文件中日志页面的大小。
该参数属于INTERNAL类型参数，为固定参数，用户无法修改此参数，只能查看。
取值范围：整型，单位为Byte。
默认值：8192
25.5.1.12 wal_segment_size
参数说明：说明WAL日志段文件的大小。
该参数属于INTERNAL类型参数，为固定参数，用户无法修改此参数，只能查看。
取值范围：整型，单位为8KB。
默认值：16MB(2048*8KB)