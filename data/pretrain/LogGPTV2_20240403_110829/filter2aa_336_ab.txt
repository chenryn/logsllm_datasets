### 订票助手的功能升级与GitHub事件

#### 功能升级
订票助手因特殊需求需增加自动更新功能。早期的升级通过自建服务器完成，每次返回的信息量较小（约100-200字节）。然而，12306网站采用HTTPS协议，新版Chrome和Firefox浏览器的安全限制要求引用内容也必须来自HTTPS协议的服务器。

#### GitHub事件
由于作者没有HTTPS协议的服务器，参考了其他脚本的做法，决定使用GitHub作为资源托管平台。但此方案未充分考虑GitHub的服务特性。

- **GitHub的投诉**：2013年1月16日下午，GitHub的OPS团队成员Jesse Newland在订票助手主页上发布了一个Issue，指出该助手在12306网站上引用了GitHub上的资源，导致对GitHub服务产生了负面影响，并请求移除。
- **提前移除**：实际上，在1月10日，新版本的助手已经移除了这些引用。

#### 问题原因
- **高请求量下的不可靠性**：最初移除的原因是GitHub在高请求量下表现不稳定，经常返回403错误。
- **轮询策略**：为尽快让用户升级，早期版本采取了轮询策略，每五秒重试一次。这在GitHub严格的限制下，导致连续的403错误，特别是在订票高峰期。

#### 解决方案
后期与GitHub OPS团队沟通后，将相关文件转移到新浪SAE上，通过重定向请求解决了问题。

#### 流量影响
- **流量统计**：在SAE上，订票助手产生了多少流量？

#### 长城防火墙封锁传闻
- **封锁传闻**：有传言称GitHub被大陆长城防火墙（GFW）封锁，外界普遍认为是因为订票助手事件，铁道部要求封禁。
- **李开复声明**：李开复发表声明抗议封锁。
- **政治敏感话题**：有人提出封锁是因为GitHub上存在政治敏感内容。
- **恢复服务**：几天后，GitHub服务恢复，此次事件被媒体定义为“春运影响世界”的案例。

#### 总结
- **GitHub负载能力**：GitHub作为托管网站，负载能力较低，应避免在高请求量情况下使用。
- **重试操作**：重试型操作应遵循有穷原则，避免无限操作。

### 订票助手与铁道部

#### 背景
- **政府机构**：铁道部作为政府机构，容易与民间产生矛盾。
- **春运压力**：春运期间，铁道部常成为媒体和舆论焦点。
- **用户暴增**：订票助手在春运期间用户激增，引起媒体和网民关注。

#### 功能对比
- **功能反差**：订票助手的强大功能与12306网站本身的功能形成鲜明对比，引发网民和媒体对12306的批评。
- **购票争议**：买不到票的人群质疑订票助手类工具加剧了购票难度。

#### 铁道部的反应
- **约谈手段**：铁道部通过约谈手段要求停止开发并移除下载。
- **企业约谈**：铁道部还约谈了猎豹浏览器的企业负责人，要求停止提供抢票功能。

#### 公平性争论
- **公平性讨论**：媒体和社交界争论焦点在于此类工具是否公平。
- **舆论导向**：基本舆论导向认为这是铁道部自身的问题。
- **政策变化**：工信部否认发文要求停止软件下载，并鼓励创新。

#### 技术对抗
- **政策到技术**：铁道部从政策层面转向技术手段对抗订票助手。
- **频繁升级**：春节前二十天内，订票助手升级四十多个版本，最高一日四次。

#### 反制手段
1. **浏览器限制**：针对猎豹浏览器UA检测，阻止其使用。
2. **页面请求来源限制**：检测跨页面调用，防止非预期调用。
3. **行为限制**：通过用户行为检测助手的存在。
4. **修改页面结构或函数签名**：修改助手依赖的函数名，阻止其运行。

#### 对抗总结
- **简单手段**：铁道部使用的手段较为简单，短期内效果显著，但容易绕过。
- **快速响应**：发现铁道部修改后，半小时内可以发布新版本助手。

#### 应对措施
- **自动检测**：自动检测网站版本变更，提醒用户测试。
- **处理方式**：加强自动检测能力，引入后台请求拦截技术。

### 订票助手的未来
对抗不是最终目的，让购票更方便才是目标。遗憾的是票源有限，总有人买不到票。希望随着社会的发展，人们不再需要背井离乡，这个问题将不复存在。

谢谢！