### 文档版本 06 (2017-09-12) 华为专有和保密信息
版权所有 © 华为技术有限公司

## CloudEngine 12800系列交换机 MIB参考

### 123 RMON-MIB

#### 123.4.5 eventTable 详细描述
`eventTable` 用于控制从设备生成的事件及其提示。该表的索引是 `eventIndex`。

| OID                          | 节点名称        | 数据类型         | 最大访问权限 | 含义                                       | 实现规格 |
|------------------------------|-----------------|------------------|--------------|--------------------------------------------|----------|
| 1.3.6.1.2.1.16.9.1.1         | eventIndex      | Integer32        | Read-only    | 标识本行的索引。                           | 与MIB文件定义一致 |
| 1.3.6.1.2.1.16.9.1.2         | eventDescr      | OCTET STRING(0..127) | Read-create  | 本行的描述字符串（最大127个字符）。       | 与MIB文件定义一致 |
| 1.3.6.1.2.1.16.9.1.3         | eventType       | INTEGER          | Read-create  | 产生提示的类型：<br>- none(1)<br>- log(2)<br>- snmptrap(3)<br>- logandtrap(4) | 与MIB文件定义一致 |
| 1.3.6.1.2.1.16.9.1.4         | eventCommunity  | OCTET STRING(0..127) | Read-create  | 发送SNMP trap时使用的community。           | 与MIB文件定义一致 |
| 1.3.6.1.2.1.16.9.1.5         | eventLastTimeSent | TimeTicks        | Read-only    | 本行最近一次事件的系统时间（sysUpTime），如果没有事件发生则为0。 | 与MIB文件定义一致 |
| 1.3.6.1.2.1.16.9.1.6         | eventOwner      | OwnerString      | Read-create  | 本行的拥有者。                             | 与MIB文件定义一致 |
| 1.3.6.1.2.1.16.9.1.7         | eventStatus     | EntryStatus      | Read-create  | 本行的状态。                               | 与MIB文件定义一致 |

##### 创建约束
- 行创建必须通过设置行状态对象 `eventStatus` 的值为 `valid` 或 `createRequest` 来实现。
  - 如果创建时设置 `eventStatus` 为 `valid`，操作会新增一行事件表，行状态为 `valid`。
  - 如果创建时设置 `eventStatus` 为 `createRequest`，操作会新增一行事件表，但行状态为 `underCreation`。
- `eventType` 的默认值为 `log`，`eventCommunity`、`eventOwner` 和 `eventDescription` 的默认值为 `null`，创建时可以不指定。
- 当事件行创建并有效时，如果与之关联的告警行各参数有效，自动更新它们的状态为 `valid`。当事件无效时，更新与之关联状态为 `valid` 的告警行，使其状态为 `underCreation`。
- 事件表的行数最多为60。

##### 修改约束
- `eventType`、`eventCommunity` 和 `eventDescription` 只有在行状态不为 `valid` 时才能修改。
- `eventOwner` 只要行存在即可修改。

##### 删除约束
- 将 `eventStatus` 设置为 `Invalid`，即将该行从表中删除。同时，与之关联的日志行将被全部删除，并且与之关联状态为 `valid` 的告警行，状态变为 `underCreation`。

##### 读取约束
- 对读操作没有限制。

#### 123.4.6 logTable 详细描述
当事件被触发时，如果RMON日志表的事件类型为 `log` 或 `logandtrap`，则生成 `logTable` 表项。这个表主要用来记录事件的发生。该表的索引是 `logEventIndex` 和 `logIndex`。

| OID                          | 节点名称        | 数据类型         | 最大访问权限 | 含义                                       | 实现规格 |
|------------------------------|-----------------|------------------|--------------|--------------------------------------------|----------|
| 1.3.6.1.2.1.16.9.2.1.1       | logEventIndex   | Integer32        | Read-only    | 产生该日志的事件的索引。                   | 与MIB文件定义一致 |
| 1.3.6.1.2.1.16.9.2.1.2       | logIndex        | Integer32        | Read-only    | 唯一标识本日志行的索引。如果内存不足，老的日志可以被删除。 | 与MIB文件定义一致 |
| 1.3.6.1.2.1.16.9.2.1.3       | logTime         | TimeTicks        | Read-only    | 创建此日志时的系统时间（sysUpTime）。       | 与MIB文件定义一致 |
| 1.3.6.1.2.1.16.9.2.1.4       | logDescr        | OCTET STRING(0..255) | Read-only    | 激活此日志的事件的描述，具体实现相关。     | 与MIB文件定义一致 |

##### 创建约束
- `eventTable` 中相应的事件被触发，且 `eventType` 为 `log` 或 `logandtrap`。
- 每个事件行对应的 `logTable` 最大行数为10。

##### 修改约束
- `logTable` 每项的属性为只读属性，用户不能手工更改。

##### 删除约束
- RMON模块收到 `eventTable` 表行的删除请求，相连的所有日志表被删除。由于 `logEventIndex` 没有自己的行状态，管理员不能指定删除某一特定行。
- 当 `eventTable` 表行对应的 `logTable` 行达到最大行数后，如果又有新的日志事件被触发，那么将覆盖当前第一条记录。

##### 读取约束
- 对读操作没有限制。

#### 123.5 告警节点详细描述

##### 123.5.1 risingAlarm 详细描述
当监控对象的值高于或等于告警上限阈值时，会产生该告警。

| OID                          | 节点名称        | 绑定变量         | 含义                                       | 实现规格 |
|------------------------------|-----------------|------------------|--------------------------------------------|----------|
| 1.3.6.1.2.1.16.0.1           | risingAlarm     | alarmIndex, alarmVariable, alarmSampleType, alarmValue, alarmRisingThreshold | 与MIB文件定义一致 |

##### 123.5.2 fallingAlarm 详细描述
当监控对象的值低于或等于告警下限阈值时，会发出该告警。

| OID                          | 节点名称        | 绑定变量         | 含义                                       | 实现规格 |
|------------------------------|-----------------|------------------|--------------------------------------------|----------|
| 1.3.6.1.2.1.16.0.2           | fallingAlarm    | alarmIndex, alarmVariable, alarmSampleType, alarmValue, alarmFallingThreshold | 与MIB文件定义一致 |

### 124 SNMP-FRAMEWORK-MIB

#### 124.1 功能简介
SNMP引擎可以为发送和接收的信息提供鉴别和加密服务，并且可以通过访问控制实现对目标的管理。这里列举了SNMP引擎和SNMP实体间的一一对应关系。

SNMP引擎包括：
- 信息发送者
- 信息处理子系统
- 安全子系统
- 访问控制子系统

具体关于SNMP引擎的描述请参考RFC2571。

根节点：`iso(1).org(3).dod(6).internet(1).snmpV2(6).snmpModules(3).snmpFrameworkMIB(10)`

#### 124.2 表间关系
无

#### 124.3 单节点详细描述

##### 124.3.1 snmpEngineID 详细描述
| OID                          | 节点名称        | 数据类型         | 最大访问权限 | 含义                                       | 实现规格 |
|------------------------------|-----------------|------------------|--------------|--------------------------------------------|----------|
| 1.3.6.1.6.3.10.2.1.1         | snmpEngineID    | SnmpEngineID     | Read-only    | SNMP引擎ID。该值需要保存在非易失性介质中，以便SNMP引擎初始化时引用。 | 与MIB文件定义一致 |

##### 124.3.2 snmpEngineBoots 详细描述
| OID                          | 节点名称        | 数据类型         | 最大访问权限 | 含义                                       | 实现规格 |
|------------------------------|-----------------|------------------|--------------|--------------------------------------------|----------|
| 1.3.6.1.6.3.10.2.1.2         | snmpEngineBoots | INTEGER (1..2147483647) | Read-only    | 自上一次配置之后SNMP实体启动或重新初始化的次数。 | 与MIB文件定义一致 |

##### 124.3.3 snmpEngineTime 详细描述
| OID                          | 节点名称        | 数据类型         | 最大访问权限 | 含义                                       | 实现规格 |
|------------------------------|-----------------|------------------|--------------|--------------------------------------------|----------|
| 1.3.6.1.6.3.10.2.1.3         | snmpEngineTime  | INTEGER (0..2147483647) | Read-only    | 自上一次 `snmpEngineBoots` 对象的值改变之后的秒数。当改变的秒数超过了 `snmpEngineBoots` 对象的最大值时，此节点的值会变为零。 | 与MIB文件定义一致 |

##### 124.3.4 snmpEngineMaxMessageSize 详细描述
| OID                          | 节点名称                | 数据类型         | 最大访问权限 | 含义                                       | 实现规格 |
|------------------------------|-------------------------|------------------|--------------|--------------------------------------------|----------|
| 1.3.6.1.6.3.10.2.1.4         | snmpEngineMaxMessageSize | INTEGER (484..2147483647) | Read-only    | SNMP能够发送或接收的报文最大尺寸。这个值的下限值是由engine支持的有效值决定的。可以通过命令行进行设置，取值范围在484到17940之间，这个值包括了UDP包头的大小，默认值是1500字节。 | 与MIB文件定义一致 |

#### 124.4 MIB Table 详细描述
无

#### 124.5 告警节点详细描述
无

### 125 SNMP-MPD-MIB

#### 125.1 功能简介
SNMP-MPD-MIB提供了一些MIB对象的集合，对SNMP消息的处理和分发过程进行远程监控。它可以提供因各种原因被丢弃的接收包的数量，包括：
- 因SNMP消息包含了不支持的或无法识别的安全模型而被丢弃的接收包的数量。
- 因SNMP消息包含无效信息而被丢弃的接收包的数量。
- 因无法处理PDU而被丢弃的接收包的数量等。

根节点：`iso(1).org(3).dod(6).internet(1).snmpV2(6).snmpModules(3).snmpMPDMIB(11)`

#### 125.2 表间关系
无

#### 125.3 单节点详细描述

##### 125.3.1 snmpUnknownSecurityModels 详细描述
| OID                          | 节点名称                  | 数据类型         | 最大访问权限 | 含义                                       | 实现规格 |
|------------------------------|---------------------------|------------------|--------------|--------------------------------------------|----------|
| 1.3.6.1.6.3.11.2.1.1         | snmpUnknownSecurityModels | Counter32        | Read-only    | SNMP消息包含了不支持的或无法识别的安全模型而被丢弃的接收包的数量。 | 与MIB文件定义一致 |

##### 125.3.2 snmpInvalidMsgs 详细描述
| OID                          | 节点名称        | 数据类型         | 最大访问权限 | 含义                                       | 实现规格 |
|------------------------------|-----------------|------------------|--------------|--------------------------------------------|----------|
| 1.3.6.1.6.3.11.2.1.2         | snmpInvalidMsgs | Counter32        | Read-only    | 因SNMP消息包含无效信息而被丢弃的接收包的数量。 | 与MIB文件定义一致 |

##### 125.3.3 snmpUnknownPDUHandlers 详细描述
| OID                          | 节点名称                | 数据类型         | 最大访问权限 | 含义                                       | 实现规格 |
|------------------------------|-------------------------|------------------|--------------|--------------------------------------------|----------|
| 1.3.6.1.6.3.11.2.1.3         | snmpUnknownPDUHandlers  | Counter32        | Read-only    | 因无法处理PDU而被丢弃的接收包的数量。例如，尽管有正确的EngineID和PDU类型构成的SNMP报文，如果该类型没有被注册，同样会被丢弃。 | 与MIB文件定义一致 |

#### 125.4 MIB Table 详细描述
无

#### 125.5 告警节点详细描述
无

### 126 SNMP-NOTIFICATION-MIB

#### 126.1 功能简介
无

#### 126.2 表间关系
无

#### 126.3 单节点详细描述
无

#### 126.4 MIB Table 详细描述
无

#### 126.5 告警节点详细描述
无