## IMPORTANT: DevOps Kit (AzSK) is being sunset by end of FY21. More details [here](../../../ReleaseNotes/AzSKSunsetNotice.md)
----------------------------------------------
CosmosDBDescription & RationaleControlSeverityAutomatedFix ScriptCosmos DB firewall should be enabledUsing the firewall feature ensures that access to the data or the service is restricted to a specific set/group of clients. While this may not be feasible in all scenarios, when it can be used, it provides an extra layer of access control protection for critical assets.HighYesNoConfigure only the required IP addresses on Cosmos DB firewallUsing the firewall feature ensures that access to the data or the service is restricted to a specific set/group of clients. For effective usage, whitelist only the required IPs. Whitelisting larger ranges like 0.0.0.0/0, 0.0.0.0/1, 128.0.0.0/1, etc. will defeat the purpose.HighYesNoDo not use 'Eventual' consistencyUsing Eventual consistency might cause undesired effects due to its ordering guarantees. This consistency is the weakest of all and the values returned in reads are always not guaranteed to be latest write.HighYesNoUse global replicationReplication ensures continuity and rapid recovery during disasters.MediumYesNoUse automatic failoverAutomatic failover ensures continuity and auto recovery during disasters.MediumYesNoUse parameterized SQL queriesParameterized SQL queries nullify the possibility of SQL injection by pre-compiling the query. This will treat user input values purely as data.HighNoNoCosmosDb Account keys must be rotated periodicallyPeriodic key/password rotation is a good security hygiene practice as, over time, it minimizes the likelihood of data loss/compromise which can arise from key theft/brute forcing/recovery attacks.MediumNoNoGenerate resource tokens with just enough privileges and expiry needed by clientsUsing appropriate ACLs ensures that data is protected and accessible only to the entities with the appropriate level of access.HighNoNoDo not send resource token with read write (RW) permission to untrusted clientsAn untrusted client might use the read-write resource tokens that it received to make undesirable updates to the resource.HighNoNo