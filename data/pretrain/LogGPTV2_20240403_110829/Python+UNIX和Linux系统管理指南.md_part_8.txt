!cp a.txt b/
%cd??
Namespace:
String Form:
第2章
Pretty print the object and display it through a pager.
Options:
%page[options]OBJECT
-r: page str(object), don't pretty-print it.
 Time execution of a Python statement or expression.
Time execution of a Python statement or expression.
Magic.py
IPythoninternal
>
:'d’ is now an alias for 'ls -F'
: Get help, or more help for object (also works
:Capture sytem command output
after %rehashx,most system commands.work without 1
:System command escape, calls os.system()
Information about IPython's ‘magic'
See help AND source for magic %cd
?obj，
Get list of aliases to
Works if
'alias'
www.TopSage.com
not a python name
'alist'
% functions.
as
DG
---
## Page 57
样的。
%wquickref中的%ho帮助行同使用标准的%who?返回的Docstring部分的第一行信息是一
助信息：
%magic函数的迷你总结，包括全部帮助信息的首行。例如，下面是一个对%who的全部帮
%quickref的起始部分是一个对IPython各种用法的引用。%quickref的其余部分是对
Docstring:
Definition:
File:
Namespace:
String Form:
Base Class:
Type:
In [1]: %who ?
%xmode:
%whos:
%who_Is:
%who:
%upgrade:
%unalias:
 Print all interactive variables, with some minimal formatting.
%who always excludes executed names loaded through your configuration
indicates that the type name for strings is 'str'.
  s     
these are printed. For example:
In [1]: type('hello')
%who function str
Switch modes for the exception handlers.
 Like %who, but gives some extra information about each variable.
 Return a sorted list of all interactive variables.
 Upgrade your IPython installation
 Print all interactive variables, with some minimal formatting.
Remove an alias
Magic.py
/home/jmjones/local/python/psa/lib/python2.5/site-packages/IPython/
IPython internal
>
Magic function
www.TopSage.com
IPython 1 43
PDG
---
## Page 58
44|第2章
这里演示了%l（百分号后跟字母1）的语法，该方法用于将行的其他部分插人到alias中。
理后续参数。
方式。需要显示地操作所有后续参数。下面是一个示例，显示了如何以一个组的方式处
还有一个do-everything方法。该方法与do-nothing方法相似，但采用的是隐含参数传递的
这样做没有传递附加的选项，但也无法显示参数是如何进行处理的。
令中有关80的执行结果，可以这样输入：
加参数都能够组织在一起，就可以采用do-nothing方法。例如，如果想查找netstat命
别名还有一些不同的输入方式，其中之一是do-nothing方法。如果传递给命令的所有附
后跟系统命令（也可以附加该命令的参数）。例如：
建一个IPython的快速方式，用以执行系统命令。定义别名，只需要简单地输入alias:
起到衔接Python与UNIX shell功能的第一个特征是alias魔力函数。通过ailas，可以创
alias
顾两者优点的特征。
能够在我们所熟悉的UNIX中增加Python的功能，将会非常有用。IPython就具有一些兼
具有丰富的工具集，相当简炼容易的语法、标准I/O流、管道、以及重定向等功能。如果
使用UNIX shell，毫无疑问有它的优点。UNIX shelI提供了一个处理问题的统一方法，
UNIX Shell
In [2]: achoo
In [1]: alias achoo echo "|%l|"
In [3]: achoo these are args
will not be shown,
In [3]: nss I grep 80
Proto Recv-Q Send-Q Local Address
In [2]: nss
In [1]: alias nss netstat -lptn
[these are args]
tcp
(Not
tcp
tcp:
Active Internetconnections
(Not all processes could be identified, non-owned process info
D
00.0.0.0:80
0127.0.0.1:631
could be identified, non-owned process info
0.0.0.0:80
(only servers)
www.TopSage.com
0.0.0.0:*
0.0.0.0:*
0.0.0.0:*
Foreign Address
LISTEN
LISTEN
State
LISTEN -
PDG
---
## Page 59
子，保留achoo别名，使得下一次打开IPython时，能够继续使用它，如下所示：
可以用%store魔力函数保留所使用的别名，本章后面会介绍如何实现。继续前面的例
可以看到，foo和bar分别插入到各自的位置，而bam被附加到尾部，这正是它应当被放
而另一方面，如果提供的参数个数多于需要的个数，那么执行起来结果是正确的。
置的位置。
信息。
然而，这存在一点问题。
何插入：
还可以通过命令字符串插入不同的参数，这里使用%s表示字符串。下面示例显示参数如
在这个示例中，事实上不需要加人%]。即使没有加入，也会得到相同的结果。
下面是一个do-nothing示例，重新处理全部参数：
任何内容。
事实上，使用该方法几乎可以在别名之后（在别名所代表的实现命令的中间位置）插人
In [4]: achoo foo bar bam
ERROR: Alias  requires 2 arguments, 1 given.
"|s%l. :puosas ‘Is%l. :asxt ouoa oouoe serre :[t] uI 
AttributeError
In [2]: achoo foo bar
Proto Recv-Q Send-Q Local Address
In [2]: nss 
In [1]: alias nss netstat -lptn %]
tcp
willnotb
tcp
0
grep80
00.0.0.0:80
127.0.0.1:631
you would have to be root to see it all.)
，如果仅提供了一个参数，而需要的是两个参数，则会得到错误
0.0.0.0:80
www.TopSage.com
servers)
Traceback (most recent call last)
0.0.0.0:*
0.0.0.0:*
Foreign Address
0.0.0.0:*
 ==
LISTEN
LISTEN
LISTEN
State
IPython I 45
DG
---
## Page 60
通过美元符（$）前缀，可以将变量传递到shell命令中，例如：
另一个可以简易执行shell命令的方法，是在命令前加一个感叹号（)
Shell的执行
下面是一个示例，展示了如何保存使用感叹号执行的命令结果：
可以看到，上例中列出了所有属于jmjones的bash会话。
In [1]: !netstat -lptn
first: lonel,
In [1]: achoo one two
Do you really want to exit ([y]/n)?
(s% puoas s% :sxt ouoa.z) ooyoe :paxos se
In[5]:storeachoo
oidsdaxasnsdaixe sd=[]u
In [3]: Ips aux 
In [2]: process = 'bash'
In [1]: user ='jmjones'
66
ProtoRecv-QSend-QLocalAddress
Active Internet connections(only
will not be shown, you would have to be root to see it all.)
(psa)jmjones@dinkgutsy:code$ ipython -nobanner
In [5]:1
(Not
5
2: jmjones
[6]：
jmjones
第2章
all
32010
27705
18661
18589
15720
12943
12035
10184
8298
6008
5967
0
,second:|twol
8298
5967
6008
0.00.4
0.0.
0.0
0.0
0.0
| grep $user | grep $process
0.1
0.0
0.0
0.0
0.0
0.00.4212964280pts/2
0.0
127.0.0.1:631
0.0
0.4
0.4
0.4
0.4
0.0
0.4
0.4
0.4
0.4
0.4
0.4
21340
21368
21252
21384
21356
21360
21288
21260
22644
21296
320
21340
4304
4172
4312
4260
4268
4268
5608
4344 pts/0
4168
servers)
16
4304pts/1
4344 pts/0
2pts/6
pts/1
pts/7
pts/15
pts/4
pts/17
pts/5
pts/15
pts/3
pts/2
.fields() available). Value:.
0.0.0.0:*
Foreign Address
Ss+
Ss+
Ss+
S
S
S
Ss+
S
Ss+
Ss+ Apr11
Ss
Ss+
Apr12
Apr12
07:06
07:04
02:37
Apr11
Apr15
Apr11
Apr11
Apr11
Apr11
Apr11
Apr11