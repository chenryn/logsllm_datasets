.indexterm}[]{#ch-manage.html#idm140321009729648
.indexterm}[]{#ch-manage.html#idm140321009728720 .indexterm}
::: para
GFS2 文​​​​​​​件​​​​​​​系​​​​​​​统​​​​​​​不​​​​​​​提​​​​​​​供​​​​​​​对​​​​​​​上​​​​​​​下​​​​​​​文​​​​​​​关​​​​​​​联​​​​​​​路​​​​​​​径​​​​​​​名​​​​​​​（CDPN）的​​​​​​​支​​​​​​​持​​​​​​​，CDPN
允​​​​​​​许​​​​​​​您​​​​​​​生​​​​​​​成​​​​​​​指​​​​​​​向​​​​​​​不​​​​​​​同​​​​​​​目​​​​​​​的​​​​​​​地​​​​​​​文​​​​​​​件​​​​​​​或​​​​​​​者​​​​​​​目​​​​​​​录​​​​​​​的​​​​​​​符​​​​​​​号​​​​​​​链​​​​​​​接​​​​​​​。​​​​​​​在​​​​​​​ GFS2 中​​​​​​​使​​​​​​​用​​​​​​​
`mount`{.command} 命​​​​​​​令​​​​​​​的​​​​​​​ `bind`{.option} 选​​​​​​​项​​​​​​​实​​​​​​​现​​​​​​​此​​​​​​​功​​​​​​​能​​​​​​​。​​​​​​​
:::
::: para
`mount`{.command} 命​​​​​​​令​​​​​​​的​​​​​​​ `bind`{.option}
选​​​​​​​项​​​​​​​允​​​​​​​许​​​​​​​您​​​​​​​在​​​​​​​不​​​​​​​同​​​​​​​位​​​​​​​置​​​​​​​重​​​​​​​新​​​​​​​挂​​​​​​​载​​​​​​​部​​​​​​​分​​​​​​​文​​​​​​​件​​​​​​​结​​​​​​​构​​​​​​​，且​​​​​​​使​​​​​​​其​​​​​​​在​​​​​​​初​​​​​​​始​​​​​​​位​​​​​​​置​​​​​​​仍​​​​​​​可​​​​​​​用​​​​​​​。​​​​​​​该​​​​​​​命​​​​​​​令​​​​​​​的​​​​​​​格​​​​​​​式​​​​​​​如​​​​​​​下​​​​​​​：
:::
``` screen
mount --bind olddir newdir
```
::: para
执​​​​​​​行​​​​​​​此​​​​​​​命​​​​​​​令​​​​​​​后​​​​​​​，*`olddir`* 目​​​​​​​录​​​​​​​中​​​​​​​的​​​​​​​内​​​​​​​容​​​​​​​在​​​​​​​两​​​​​​​个​​​​​​​位​​​​​​​置​​​​​​​可​​​​​​​用​​​​​​​：*`olddir`* 和​​​​​​​
*`newdir`*。​​​​​​​您​​​​​​​还​​​​​​​可​​​​​​​以​​​​​​​使​​​​​​​用​​​​​​​这​​​​​​​个​​​​​​​选​​​​​​​项​​​​​​​生​​​​​​​成​​​​​​​在​​​​​​​两​​​​​​​个​​​​​​​位​​​​​​​置​​​​​​​可​​​​​​​用​​​​​​​的​​​​​​​独​​​​​​​立​​​​​​​文​​​​​​​件​​​​​​​。​​​​​​​
:::
::: para
例​​​​​​​如​​​​​​​：在​​​​​​​执​​​​​​​行​​​​​​​以​​​​​​​下​​​​​​​命​​​​​​​令​​​​​​​后​​​​​​​，`/root/tmp`{.filename} 中​​​​​​​的​​​​​​​内​​​​​​​容​​​​​​​将​​​​​​​和​​​​​​​之​​​​​​​前​​​​​​​挂​​​​​​​载​​​​​​​的​​​​​​​
`/var/log`{.filename} 目​​​​​​​录​​​​​​​内​​​​​​​容​​​​​​​一​​​​​​​致​​​​​​​。​​​​​​​
:::
``` screen
[root@menscryfa ~]# cd ~root
[root@menscryfa ~]# mkdir ./tmp
[root@menscryfa ~]# mount --bind /var/log /tmp
```
::: para
另​​​​​​​外​​​​​​​，您​​​​​​​可​​​​​​​以​​​​​​​使​​​​​​​用​​​​​​​ `/etc/fstab`{.filename}
文​​​​​​​件​​​​​​​中​​​​​​​的​​​​​​​条​​​​​​​目​​​​​​​在​​​​​​​挂​​​​​​​载​​​​​​​时​​​​​​​得​​​​​​​到​​​​​​​同​​​​​​​样​​​​​​​的​​​​​​​结​​​​​​​果​​​​​​​。​​​​​​​`/etc/fstab`{.filename}
中​​​​​​​的​​​​​​​以​​​​​​​下​​​​​​​条​​​​​​​目​​​​​​​可​​​​​​​使​​​​​​​ `/root/tmp`{.filename} 的​​​​​​​内​​​​​​​容​​​​​​​和​​​​​​​ `/var/log`{.filename}
目​​​​​​​录​​​​​​​中​​​​​​​的​​​​​​​内​​​​​​​容​​​​​​​一​​​​​​​致​​​​​​​。​​​​​​​
:::
``` screen
/var/log                /root/tmp               none    bind            0 0
```
::: para
在​​​​​​​您​​​​​​​挂​​​​​​​载​​​​​​​文​​​​​​​件​​​​​​​系​​​​​​​统​​​​​​​后​​​​​​​，您​​​​​​​可​​​​​​​以​​​​​​​使​​​​​​​用​​​​​​​ `mount`{.command}
命​​​​​​​令​​​​​​​查​​​​​​​看​​​​​​​该​​​​​​​文​​​​​​​件​​​​​​​系​​​​​​​统​​​​​​​是​​​​​​​否​​​​​​​被​​​​​​​挂​​​​​​​载​​​​​​​了​​​​​​​，如​​​​​​​下​​​​​​​示​​​​​​​例​​​​​​​所​​​​​​​示​​​​​​​：
:::
``` screen
[root@menscryfa ~]# mount | grep /tmp
/var/log on /root/tmp type none (rw,bind)
```
::: para
对​​​​​​​于​​​​​​​支​​​​​​​持​​​​​​​上​​​​​​​下​​​​​​​文​​​​​​​关​​​​​​​联​​​​​​​路​​​​​​​径​​​​​​​名​​​​​​​的​​​​​​​文​​​​​​​件​​​​​​​系​​​​​​​统​​​​​​​，您​​​​​​​可​​​​​​​以​​​​​​​将​​​​​​​ `/bin`{.filename}
目​​​​​​​录​​​​​​​定​​​​​​​义​​​​​​​为​​​​​​​上​​​​​​​下​​​​​​​文​​​​​​​关​​​​​​​联​​​​​​​路​​​​​​​径​​​​​​​名​​​​​​​，并​​​​​​​根​​​​​​​据​​​​​​​系​​​​​​​统​​​​​​​构​​​​​​​架​​​​​​​将​​​​​​​其​​​​​​​解​​​​​​​析​​​​​​​为​​​​​​​以​​​​​​​下​​​​​​​路​​​​​​​径​​​​​​​之​​​​​​​一​​​​​​​：
:::
``` screen
/usr/i386-bin
/usr/x86_64-bin
/usr/ppc64-bin
```
::: para
您​​​​​​​可​​​​​​​以​​​​​​​通​​​​​​​过​​​​​​​生​​​​​​​成​​​​​​​空​​​​​​​ `/bin`{.filename}
目​​​​​​​录​​​​​​​得​​​​​​​到​​​​​​​同​​​​​​​样​​​​​​​的​​​​​​​结​​​​​​​果​​​​​​​。​​​​​​​然​​​​​​​后​​​​​​​使​​​​​​​用​​​​​​​脚​​​​​​​本​​​​​​​或​​​​​​​者​​​​​​​在​​​​​​​ `/etc/fstab`{.filename}
文​​​​​​​件​​​​​​​中​​​​​​​的​​​​​​​条​​​​​​​目​​​​​​​，将​​​​​​​每​​​​​​​个​​​​​​​独​​​​​​​立​​​​​​​构​​​​​​​架​​​​​​​目​​​​​​​录​​​​​​​使​​​​​​​用​​​​​​​ `mount -bind`{.command} 命​​​​​​​令​​​​​​​挂​​​​​​​载​​​​​​​到​​​​​​​
`/bin`{.filename} 目​​​​​​​录​​​​​​​。​​​​​​​例​​​​​​​如​​​​​​​：您​​​​​​​可​​​​​​​以​​​​​​​使​​​​​​​用​​​​​​​以​​​​​​​下​​​​​​​命​​​​​​​令​​​​​​​作​​​​​​​为​​​​​​​脚​​​​​​​本​​​​​​​中​​​​​​​的​​​​​​​一​​​​​​​行​​​​​​​：
:::
``` screen
mount --bind /usr/i386-bin /bin
```
::: para
另​​​​​​​外​​​​​​​，您​​​​​​​还​​​​​​​可​​​​​​​以​​​​​​​使​​​​​​​用​​​​​​​以​​​​​​​下​​​​​​​行​​​​​​​作​​​​​​​为​​​​​​​ `/etc/fstab`{.filename} 文​​​​​​​件​​​​​​​的​​​​​​​条​​​​​​​目​​​​​​​：
:::
``` screen
/usr/1386-bin             /bin               none    bind            0 0
```
::: para
绑​​​​​​​定​​​​​​​挂​​​​​​​载​​​​​​​可​​​​​​​为​​​​​​​您​​​​​​​提​​​​​​​供​​​​​​​比​​​​​​​上​​​​​​​下​​​​​​​文​​​​​​​关​​​​​​​联​​​​​​​路​​​​​​​径​​​​​​​名​​​​​​​更​​​​​​​大​​​​​​​的​​​​​​​灵​​​​​​​活​​​​​​​性​​​​​​​，因​​​​​​​为​​​​​​​您​​​​​​​可​​​​​​​以​​​​​​​使​​​​​​​用​​​​​​​此​​​​​​​特​​​​​​​性​​​​​​​根​​​​​​​据​​​​​​​您​​​​​​​定​​​​​​​义​​​​​​​的​​​​​​​条​​​​​​​件​​​​​​​挂​​​​​​​载​​​​​​​不​​​​​​​同​​​​​​​的​​​​​​​目​​​​​​​录​​​​​​​（比​​​​​​​如​​​​​​​文​​​​​​​件​​​​​​​系​​​​​​​统​​​​​​​的​​​​​​​
`%fill`{.literal}
值​​​​​​​）。​​​​​​​上​​​​​​​下​​​​​​​文​​​​​​​关​​​​​​​联​​​​​​​路​​​​​​​径​​​​​​​名​​​​​​​对​​​​​​​其​​​​​​​可​​​​​​​处​​​​​​​理​​​​​​​的​​​​​​​环​​​​​​​境​​​​​​​有​​​​​​​更​​​​​​​多​​​​​​​的​​​​​​​限​​​​​​​制​​​​​​​。​​​​​​​请​​​​​​​注​​​​​​​意​​​​​​​：您​​​​​​​将​​​​​​​需​​​​​​​要​​​​​​​根​​​​​​​据​​​​​​​条​​​​​​​件​​​​​​​（比​​​​​​​如​​​​​​​
`%fill`{.literal}）编​​​​​​​写​​​​​​​您​​​​​​​自​​​​​​​己​​​​​​​的​​​​​​​挂​​​​​​​载​​​​​​​脚​​​​​​​本​​​​​​​。​​​​​​​
:::
::: {.warning xmlns:d="http://docbook.org/ns/docbook"}
::: admonition_header
**警​​​​​​​告​​​​​​​**
:::
::: admonition
::: para
当​​​​​​​您​​​​​​​使​​​​​​​用​​​​​​​ `bind`{.option} 选​​​​​​​项​​​​​​​挂​​​​​​​载​​​​​​​文​​​​​​​件​​​​​​​系​​​​​​​统​​​​​​​，且​​​​​​​起​​​​​​​始​​​​​​​文​​​​​​​件​​​​​​​系​​​​​​​统​​​​​​​以​​​​​​​
`rw`{.literal} 挂​​​​​​​载​​​​​​​时​​​​​​​，新​​​​​​​的​​​​​​​文​​​​​​​件​​​​​​​系​​​​​​​统​​​​​​​也​​​​​​​会​​​​​​​被​​​​​​​以​​​​​​​ `rw`{.literal}
形​​​​​​​式​​​​​​​挂​​​​​​​载​​​​​​​，即​​​​​​​使​​​​​​​您​​​​​​​使​​​​​​​用​​​​​​​的​​​​​​​是​​​​​​​ `ro`{.literal} 标​​​​​​​签​​​​​​​，`ro`{.literal}
则​​​​​​​被​​​​​​​静​​​​​​​默​​​​​​​忽​​​​​​​略​​​​​​​了​​​​​​​。​​​​​​​在​​​​​​​这​​​​​​​种​​​​​​​情​​​​​​​况​​​​​​​下​​​​​​​，可​​​​​​​能​​​​​​​会​​​​​​​在​​​​​​​ `/proc/mounts`{.filename}
目​​​​​​​录​​​​​​​中​​​​​​​将​​​​​​​新​​​​​​​的​​​​​​​文​​​​​​​件​​​​​​​系​​​​​​​统​​​​​​​标​​​​​​​记​​​​​​​为​​​​​​​ `ro`{.literal} 而​​​​​​​引​​​​​​​起​​​​​​​误​​​​​​​导​​​​​​​。​​​​​​​
:::
:::
:::
:::
:::
[]{#gfs_upgrade.html}
::: appendix
::: titlepage
# [⁠]{#gfs_upgrade.html#gfs_upgrade}附录 A. 将​​​​​​​文​​​​​​​件​​​​​​​系​​​​​​​统​​​​​​​从​​​​​​​ GFS 转​​​​​​​换​​​​​​​为​​​​​​​ GFS2 {.title}
:::
::: para
要​​​​​​​将​​​​​​​ GFS 文​​​​​​​件​​​​​​​系​​​​​​​统​​​​​​​转​​​​​​​换​​​​​​​为​​​​​​​ GFS2 文​​​​​​​件​​​​​​​系​​​​​​​统​​​​​​​请​​​​​​​使​​​​​​​用​​​​​​​ `gfs2_convert`{.command}
命​​​​​​​令​​​​​​​。​​​​​​​
:::
::: {.orderedlist xmlns:d="http://docbook.org/ns/docbook"}
1.  ::: para
    将​​​​​​​ GFS 文​​​​​​​件​​​​​​​系​​​​​​​统​​​​​​​从​​​​​​​群​​​​​​​集​​​​​​​中​​​​​​​的​​​​​​​所​​​​​​​有​​​​​​​节​​​​​​​点​​​​​​​中​​​​​​​卸​​​​​​​载​​​​​​​。​​​​​​​
    :::
2.  ::: para
    在​​​​​​​ GFS 文​​​​​​​件​​​​​​​系​​​​​​​统​​​​​​​中​​​​​​​执​​​​​​​行​​​​​​​ `gfs_fsck`{.command}
    命​​​​​​​令​​​​​​​以​​​​​​​确​​​​​​​定​​​​​​​没​​​​​​​有​​​​​​​文​​​​​​​件​​​​​​​系​​​​​​​统​​​​​​​崩​​​​​​​溃​​​​​​​。​​​​​​​
    :::
3.  ::: para
    重​​​​​​​新​​​​​​​挂​​​​​​​载​​​​​​​并​​​​​​​备​​​​​​​份​​​​​​​现​​​​​​​有​​​​​​​ GFS 文​​​​​​​件​​​​​​​系​​​​​​​统​​​​​​​。​​​​​​​
    :::
4.  ::: para
    卸​​​​​​​载​​​​​​​文​​​​​​​件​​​​​​​系​​​​​​​统​​​​​​​并​​​​​​​执​​​​​​​行​​​​​​​
    `gfs2_convertgfsfilesystem`{.command}``{=html}``{=html}。​​​​​​​该​​​​​​​系​​​​​​​统​​​​​​​会​​​​​​​显​​​​​​​示​​​​​​​警​​​​​​​告​​​​​​​信​​​​​​​息​​​​​​​并​​​​​​​在​​​​​​​将​​​​​​​
    *`gfsfilesystem`* 转​​​​​​​换​​​​​​​为​​​​​​​ GFS2 之​​​​​​​前​​​​​​​进​​​​​​​行​​​​​​​确​​​​​​​认​​​​​​​。​​​​​​​
    :::
:::
::: para
以​​​​​​​下​​​​​​​示​​​​​​​例​​​​​​​是​​​​​​​在​​​​​​​块​​​​​​​设​​​​​​​备​​​​​​​ `/dev/testvg/testlv`{.filename} 中​​​​​​​将​​​​​​​ GFS
文​​​​​​​件​​​​​​​系​​​​​​​统​​​​​​​转​​​​​​​换​​​​​​​为​​​​​​​ GFS2 文​​​​​​​件​​​​​​​系​​​​​​​统​​​​​​​。​​​​​​​
:::
``` screen
[root@dash-01 ~]# gfs2_convert /dev/testvg/testlv
gfs2_convert version 2 (built Sep 25 2007 12:41:29)
Copyright (C) Red Hat, Inc.  2004-2006  All rights reserved.
This program will convert a gfs1 filesystem to a gfs2 filesystem.
WARNING: This can't be undone.  It is strongly advised that you:
   1. Back up your entire filesystem first.
   2. Run gfs_fsck first to ensure filesystem integrity.
   3. Make sure the filesystem is NOT mounted from any node.
   4. Make sure you have the latest software versions.
Convert /dev/testvg/testlv from GFS1 to GFS2? (y/n)y
Converting resource groups.
Converting inodes.
6 inodes converted.
Fixing file and directory information.
1 directories, 2 dirents fixed.
Converting journals.
Converting journal space to rg space.
Building system structures.
Removing obsolete gfs1 structures.
Committing changes to disk.
/dev/gfs2testvg/gfs2testlv: filesystem converted successfully to gfs2.
[root@dash-01 ~]#
```
:::
[]{#appe-Publican-Revision_History.html}
::: appendix
::: titlepage
# [⁠]{#appe-Publican-Revision_History.html#appe-Publican-Revision_History}附录 B. 修​​​​​​​订​​​​​​​记​​​​​​​录​​​​​​​ {.title}
:::
::: {.para xmlns:d="http://docbook.org/ns/docbook"}
::: revhistory
+-----------------------+-----------------------+-----------------------+
| **修订历史**          |                       |                       |
+:======================+:======================+:======================+
| 修订 3-10.400         | 2013-10-31            | [                     |
|                       |                       | [Rüdiger]{.firstname} |
|                       |                       | [Landmann             |
|                       |                       | ]{.surname}]{.author} |
+-----------------------+-----------------------+-----------------------+
|   --------            |                       |                       |
| --------------------- |                       |                       |
|   Rebuil              |                       |                       |
| d with publican 4.0.0 |                       |                       |
|   --------            |                       |                       |
| --------------------- |                       |                       |
+-----------------------+-----------------------+-----------------------+
| 修订 3-10             | 2012-07-18            | [                     |
|                       |                       | [Anthony]{.firstname} |
|                       |                       | [Towns                |
|                       |                       | ]{.surname}]{.author} |
+-----------------------+-----------------------+-----------------------+
|   -----               |                       |                       |
| --------------------- |                       |                       |
|   Reb                 |                       |                       |
| uild for Publican 3.0 |                       |                       |
|   -----               |                       |                       |
| --------------------- |                       |                       |
+-----------------------+-----------------------+-----------------------+
| 修订 1.0-0            | Thu Jan 29 2009       | [[]{.firstname}       |
|                       |                       | [                     |
|                       |                       | ]{.surname}]{.author} |
+-----------------------+-----------------------+-----------------------+
|   --                  |                       |                       |
|   --                  |                       |                       |
+-----------------------+-----------------------+-----------------------+
:::
:::
:::
[]{#ix01.html}