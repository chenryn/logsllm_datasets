lists for vlans)
• ACL functionality for both layer2 and 
layer3 protocol packets
• Dynamic Trunking Protocol support
• Switchport protected mode
• 802.1x passthrough
• Port-ACLs
• Dynamic Arp Inspection
• DHCP Snooping
• IP device tracking
• Switched Virtual Interfaces
• Layer-3 forwarding over SVIs
• Routing protocol support
VIRL-rev14.pptx
Agenda
• What is VIRL?
• VIRL Architecture
• VIRL Components
• VIRL Installation
• VIRL Basics
• AutoNetkit
• Layer-2 Switching
• VIRL Advanced Features
VIRL-rev14.pptx
88
VIRL Advanced Features
• Live Visualization
– Visualize and Manipulate running simulations
• Management Access
– Connecting to the Outside world
• Routem
– Control-plane Traffic Generator
• Ostinato
– Data-plane Traffic Generator
VIRL-rev14.pptx
89
Live Visualization
• Fast Experimentation Platform
• Interface to running simulation controls
• Run commands on multiple devices
• Aggregated Syslog
• Live Topology Views
– Including Visual Traceroute
VIRL-rev14.pptx
90
Live Visualization
• Topology Plotting
– Overlays: phy, OSPF, ISIS, EIGRP BGP(I or E)
– Node/Interface Controls: Shutdown, Trace From/To, etc.
– Hover-over Tool Tips: Node & Interface status info
• Actions Menu
– Collect various running information
• Interface, Routing, ARP or Route tables, Configs, etc.
• Logs
– Displays collected data
• Syslog
– Provides aggregated Syslog information
VIRL-rev14.pptx
91
VIRL Advanced Features
• Live Visualization
– Visualize and Manipulate running simulations
• Management Access
– Connecting to the Outside world
• Routem
– Control-plane Traffic Generator
• Ostinato
– Data-plane Traffic Generator
VIRL-rev14.pptx
92
VIRL Management Access
• VIRL Topology
• Management Network
– Not shown in topology pane
– IP Addresses assigned at launch
172.16.1.0/24
FLAT
NIC
LXC1
Gi0/0
iosv-2
10.255.0.0/161
Gi0/0
iosv-1
interface GigabitEthernet0/0
interface GigabitEthernet0/0
interface GigabitEthernet0/0
description OOB Management
description OOB Management
description OOB Management
vrf forwarding Mgmt-intf
vrf forwarding Mgmt-intf
vrf forwarding Mgmt-intf
!Configured on launch
!Configured on launch
!Configured on launch
no ip address
no ip address
no ip address
duplex full
duplex full
duplex full
speed auto
speed auto
speed auto
media-type rj45
media-type rj45
media-type rj45
end
end
end
Gi0/0
iosv-3
VIRL-rev14.pptx
1 Private Project/Simulation Networking Only
VIRL Management Access
• Private Simulation Networking
10.255.0.0/16
.4
Gi0/0
iosv-1
LXC
.10
.1
10.255.0.0/16
LXC
.20
.1
.3
Gi0/0
iosv-2
.4
Gi0/0
iosv-1
.3
Gi0/0
iosv-2
172.16.1.0/24
.254
FLAT
NIC
.2
Gi0/0
iosv-3
.2
Gi0/0
iosv-3
Project: Guest
Simulation: A
VIRL-rev14.pptx
Project: Guest
Simulation: B
94
VIRL Management Access
• Private Project Networking
.10
LXC
10.255.0.0/16
.1
LXC
.20
.5
.30
LXC
10.255.0.0/16
.1
.4
Gi0/0
.3
Gi0/0
.8
Gi0/0
.7
Gi0/0
iosv-1
iosv-2
iosv-1
iosv-2
.4
Gi0/0
.3
Gi0/0
iosv-1
iosv-2
172.16.1.0/24
.254
FLAT
NIC
.2
Gi0/0
iosv-3
Project: Guest
Simulation: A
VIRL-rev14.pptx
.6
Gi0/0
iosv-3
Project: Guest
Simulation: B
.2
Gi0/0
iosv-3
Project: Demo
Simulation: A
95
VIRL Management Access
• Shared Flat Networking
172.16.1.0/24
.254
FLAT
NIC
.4
Gi0/0
.3
Gi0/0
.8
Gi0/0
.7
Gi0/0
iosv-1
iosv-2
iosv-1
iosv-2
.9
Gi0/0
.10
Gi0/0
iosv-1
iosv-2
.5
Gi0/0
iosv-3
Project: Guest
Simulation: A
VIRL-rev14.pptx
.6
Gi0/0
iosv-3
Project: Guest
Simulation: B
.11
Gi0/0
iosv-3
Project: Demo
Simulation: A
96
NICs on a VIRL Host
VIRL-rev14.pptx
97
NICs on a VIRL Host
Up to five NICs on each VIRL Host
• MGMT: Mandatory. Management access via this 
interface
• FLAT and FLAT1: Optional. Full, Layer-2
bi-directional connectivity for all VIRL Nodes 
connected to the FLAT and the FLAT1 network 
segment
• SNAT*: Optional. One-way Layer-3 access to 
external networks. VIRL Nodes with specific SNAT 
connector are externally exposed
• Cluster Control: Optional. Needed for clustering 
VIRL hosts (future)
VIRL-rev14.pptx
Courtesy of Cisco Systems
98
*SNAT = Static NAT
NICs on a VIRL Host
Control
• System Control Plane Interfaces
– (Management of some sorts)
• Simulation Data Plane Interfaces
Data
– (Network simulation traffic)
Control
VIRL-rev14.pptx
Courtesy of Cisco Systems
99
VIRL Advanced Features
• Live Visualization
– Visualize and Manipulate running simulations
• Management Access
– Connecting to the Outside world
• Routem
– Control-plane Traffic Generator
• Ostinato
– Data-plane Traffic Generator
VIRL-rev14.pptx
100
Routem – Control-plane Traffic Generator
• Routem SubType
– Routem YouTube Video on VIRL Channel
https://www.youtube.com/watch?v=_URUDAMDpSA
VIRL-rev14.pptx
101
Routem – Control-plane Traffic Generator
• Documentation under UWM
VIRL-rev14.pptx
102
Routem – Control-plane Traffic Generator
• IOSv Router Side Config
• Routem Side Config
int gi0/4
ip addr 10.0.0.99 255.255.0.0
no shut
!
router ospf 1
network 10.0.0.99 255.255.0.0 area 0.0.0.0
end
VIRL-rev14.pptx
ospf_default_dbd_advertise
router ospf
neighbor 10.0.0.99 update-source 10.0.101.1
networkmask 255.255.0.0
router_id 1.0.0.0
area 0.0.0.0
link 1 99.0.0.0/32 1
ext-ip 1 1.0.0.0/32 1
ext-nexthop 1 10.0.101.3
ia-ip 2 2.0.0.0/32 1
no virtual-link
#
router ospf
neighbor 10.0.0.99 update-source 10.0.101.2
networkmask 255.255.0.0
router_id 1.0.1.0
area 0.0.0.0
link 1 99.1.0.0/32 1
ext-ip 1 1.1.0.0/32 1
no virtual-link
VIRL Advanced Features
• Live Visualization
– Visualize and Manipulate running simulations
• Management Access
– Connecting to the Outside world
• Routem
– Control-plane Traffic Generator
• Ostinato
– Data-plane Traffic Generator
VIRL-rev14.pptx
104
Ostinato – Data-plane Traffic Generator
• Ostinato VM Maestro SubType
– Ostinato YouTube Video on VIRL Channel
https://www.youtube.com/watch?v=Ffk_nBlvRfU
VIRL-rev14.pptx
105
Ostinato – Data-plane Traffic Generator
• Ostinato Front End
– Runs on your laptop
– Configures Data Streams
– Can replay PCAP files
VIRL-rev14.pptx
106
Ostinato – Data-plane Traffic Generator
• Features
– Runs on Windows, Linux, BSD and Mac OS X
– User defined script to substitute for an 
– Use via GUI or Python API
– Open, edit, replay and save PCAP files
– Support for the most common standard protocols
– Ethernet/802.3/LLC SNAP
– VLAN (with QinQ)
– ARP, IPv4, IPv6, IP-in-IP a.k.a IP Tunnelling
(6over4, 4over6, 4over4, 6over6)
– TCP, UDP, ICMPv4, ICMPv6, IGMP, MLD
– Any text based protocol (HTTP, SIP, RTSP, NNTP 
etc.)
– More protocols in the works …
– Set a value for any field of any protocol
unimplemented protocol (EXPERIMENTAL)
– Stack protocols in any arbitrary order
– Create and configure multiple streams
– Configure stream rates, bursts, no. of packets
– One agent can control and configure multiple 
ports on multiple computers generating traffic
– Multiple agents can share control over a single 
port on a single computer
– Exclusive control of a port to prevent the OS from 
sending stray packets provides a controlled 
testing environment (Windows only)
– Statistics Window shows realtime port 
receive/transmit statistics and rates
– Vary packet fields across packets at run time e.g. 
– Capture packets and view them (needs Wireshark 
changing IP/MAC addresses
to view the captured packets)
– User provided Hex Dump - specify some or all 
– Framework to add new protocol builders easily
bytes in a packet
VIRL-rev14.pptx
DEMONSTRATION
VIRL-rev14.pptx
VIRL-rev14.pptx
REFERENCE MATERIAL
VIRL-rev14.pptx
Sample Topologies on GitHub
• Includes contributions from INE and CBT Nuggets
https://github.com/VIRL-Open/sample-topologies
VIRL-rev14.pptx
111
CBT Installation Video
• Simplified VMWare Workstation Player Installation
– Presented by Anthony Sequeira of CBT Nuggets
http://www.ajsnetworking.com/installing-and-using-ciscos-virl/
VIRL-rev14.pptx
112