# 企业安全与Git：被打破的安全大门
## 作者简介
- **姓名**：phithon
- **身份**：乌云核心白帽/XDSEC成员
- **研究领域**：Web安全/运维安全

## Git概述
Git是一款分布式版本控制系统，广泛应用于软件开发中以促进团队协作和敏捷开发。

### Git的基本操作
```bash
phithon@fake-demo:~$ git add .
phithon@fake-demo:~$ git commit -m "Initial commit"
```

## Git与信息安全
Git在带来便利的同时，也引入了若干安全隐患：
- **GitHub上的企业敏感信息泄露**
- **通过访问web目录下的`.git`文件夹导致的源码泄露**
- **内网未授权的Git访问造成的信息泄露**

### 案例分析
1. **某电商客户端源码泄露**  
   - [案例详情](http://www.wooyun.org/bugs/wooyun-2014-062243)
2. **内部邮箱泄露事件**  
   - 内部邮件系统因Git配置不当而暴露给外部访问者

## GitHub Hacking 技巧
- **关键词搜索**：如`password`、`@domain.com`、`salt`、`BEGIN RSA PRIVATE KEY`、`smtp`
- **特定域内的电子邮件搜索**：使用`"@domain-inc.com in:file"`查找所有代码中的内部邮箱
- **私钥搜索**：利用`"id_rsa in:path"`定位存储在仓库中的SSH密钥
- **密码搜索**：通过`"password language:yaml"`获取含有密码的YAML配置文件

### 利用Git命令恢复泄露数据
1. 查找并下载树对象
2. 下载Blob对象
3. 使用`git reset`恢复原始文件结构

## 实际案例
- **WooYun-2015-133666**：百度网站漏洞导致至少66万用户数据（含密码）泄露
- **WooYun-2015-121319**：PHP官方多个分站存在Git信息泄露问题
- **WooYun-2015-117925**：盛大某站点源码泄露导致直接入侵内网
- **WooYun-2015-114272**：百度Git信息泄露后进一步实现内网渗透
- **WooYun-2015-93434**：如何通过社交工程手段获得名人关注

## Git私有化解决方案
为避免上述风险，企业可采取以下措施：
1. 将服务器部署于内网，确保代码的绝对私密性。
2. 提高系统的稳定性，并减少对外部平台的依赖。
3. 加速内部开发流程，同时兼容现有认证机制。
4. 对平台拥有完全控制权，防止潜在纠纷。

### Gitlab vs. GitHub
- **Gitlab**提供了更成熟的技术支持及安全性保障。
- **GitHub**则可能面临更多来自黑客的威胁。

## GIT服务的安全隐患
- **权限配置不当**可能导致未经授权的数据访问。
- **开源项目本身的不稳定性**也可能引发新的安全问题。
- **Gitweb滥用**容易成为攻击者的突破口。

### 后渗透阶段的价值
Git不仅有助于源码审计，还能提供丰富的信息收集途径，助力内网渗透测试工作。

---

**联系方式**:
- 邮箱: PI:EMAIL
- 微博: @phithon别跟路人甲BB
- 博客: [http://www.leavesongs.com/](http://www.leavesongs.com/)