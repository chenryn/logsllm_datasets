### 数据分类 {#23.html#-}在真正开始巡视相似度计算方法前，我先给你把度量对象做个简单分类。相似度计算对象是向量，或者叫做高维空间下的坐标，一个意思。那表示这个向量的数值就有两种：1.  实数值；2.  布尔值，也就是 0 或者 1。``{=html}下面介绍的不同计算方法适用于不同的数据种类。
### 1 欧氏距离 {#23.html#1-}欧氏距离，如名字所料，是一个欧式空间下度量距离的方法。两个物体，都在同一个空间下表示为两个点，假如叫做p 和 q，分别都是 n 个坐标。那么欧式距离就是衡量这两个点之间的距离，从 p到 q 移动要经过的距离。欧式距离不适合布尔向量之间。计算方式可以表示如下，我在文稿中放了一个公式，你可以点击查看。]{.MathJax_Preview style="color: inherit; display: none;"} {.MathJax_Display style="text-align: center;"}``{=html}[[E[]{style="display: inline-block; overflow: hidden; height: 1px; width: 0.049em;"}]{#23.html#MathJax-Span-3.mistyle="font-family: MathJax_Math-italic;"}[(]{#23.html#MathJax-Span-4.mo style="font-family: MathJax_Main;"}[p]{#23.html#MathJax-Span-5 .mistyle="font-family: MathJax_Math-italic;"}[,]{#23.html#MathJax-Span-6.mostyle="font-family: MathJax_Main;"}[q[]{style="display: inline-block; overflow: hidden; height: 1px; width: 0.002em;"}]{#23.html#MathJax-Span-7.mistyle="font-family: MathJax_Math-italic; padding-left: 0.191em;"}[)]{#23.html#MathJax-Span-8.mo style="font-family: MathJax_Main;"}[=]{#23.html#MathJax-Span-9 .mostyle="font-family: MathJax_Main; padding-left: 0.285em;"}[[[[[∑]{#23.html#MathJax-Span-13.mostyle="font-family: MathJax_Size2; vertical-align: 0em;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(2.92em, 1001.37em, 4.614em, -999.998em); top: -3.998em; left: 0em;"}[i]{#23.html#MathJax-Span-16.mistyle="font-size: 70.7%; font-family: MathJax_Math-italic;"}[=]{#23.html#MathJax-Span-17.mostyle="font-size: 70.7%; font-family: MathJax_Main;"}[1]{#23.html#MathJax-Span-18.mnstyle="font-size: 70.7%; font-family: MathJax_Main;"}]{#23.html#MathJax-Span-15.mrow}]{#23.html#MathJax-Span-14.texatom}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.391em, 1001.09em, 4.238em, -999.998em); top: -2.915em; left: 0.144em;"}[n]{#23.html#MathJax-Span-21.mistyle="font-size: 70.7%; font-family: MathJax_Math-italic;"}]{#23.html#MathJax-Span-20.mrow}]{#23.html#MathJax-Span-19.texatom}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.438em, 1000.43em, 4.144em, -999.998em); top: -5.127em; left: 0.52em;"}]{style="display: inline-block; position: relative; width: 1.461em; height: 0px;"}]{#23.html#MathJax-Span-12.munderover}(]{#23.html#MathJax-Span-24 .mostyle="font-family: MathJax_Main;"}[p]{#23.html#MathJax-Span-26 .mistyle="font-family: MathJax_Math-italic;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.438em, 1000.52em, 4.332em, -999.998em); top: -3.998em; left: 0em;"}[i]{#23.html#MathJax-Span-29.mistyle="font-size: 70.7%; font-family: MathJax_Math-italic;"}]{#23.html#MathJax-Span-28.mrow}]{#23.html#MathJax-Span-27.texatom}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; top: -3.856em; left: 0.52em;"}]{style="display: inline-block; position: relative; width: 0.802em; height: 0px;"}]{#23.html#MathJax-Span-25.msubsup}[−]{#23.html#MathJax-Span-30 .mostyle="font-family: MathJax_Main; padding-left: 0.238em;"}[q[]{style="display: inline-block; overflow: hidden; height: 1px; width: 0.002em;"}]{#23.html#MathJax-Span-32.mistyle="font-family: MathJax_Math-italic;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.438em, 1000.47em, 4.332em, -999.998em); top: -3.998em; left: 0em;"}[i]{#23.html#MathJax-Span-35.mistyle="font-size: 70.7%; font-family: MathJax_Math-italic;"}]{#23.html#MathJax-Span-34.mrow}]{#23.html#MathJax-Span-33.texatom}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; top: -3.856em; left: 0.426em;"}]{style="display: inline-block; position: relative; width: 0.755em; height: 0px;"}]{#23.html#MathJax-Span-31.msubsup style="padding-left: 0.238em;"}[)]{#23.html#MathJax-Span-37.mostyle="font-family: MathJax_Main;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.108em, 1000.28em, 4.379em, -999.998em); top: -3.998em; left: 0em;"}[2]{#23.html#MathJax-Span-40.mnstyle="font-size: 70.7%; font-family: MathJax_Main;"}]{#23.html#MathJax-Span-39.mrow}]{#23.html#MathJax-Span-38.texatom}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; top: -4.421em; left: 0.379em;"}]{style="display: inline-block; position: relative; width: 0.802em; height: 0px;"}]{#23.html#MathJax-Span-36.msubsup}]{#23.html#MathJax-Span-23 .mrow}]{#23.html#MathJax-Span-22.texatom style="padding-left: 0.191em;"}]{#23.html#MathJax-Span-11.mrow}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(2.308em, 1005.7em, 5.32em, -999.998em); top: -3.998em; left: 0.991em;"}−[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; font-family: MathJax_Main; top: -3.998em; left: -0.092em;"}[−[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; font-family: MathJax_Main; top: -3.998em; left: 5.038em;"}[−[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="font-family: MathJax_Main; position: absolute; top: -3.998em; left: 0.426em;"}[−[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="font-family: MathJax_Main; position: absolute; top: -3.998em; left: 0.896em;"}[−[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="font-family: MathJax_Main; position: absolute; top: -3.998em; left: 1.414em;"}[−[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="font-family: MathJax_Main; position: absolute; top: -3.998em; left: 1.932em;"}[−[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="font-family: MathJax_Main; position: absolute; top: -3.998em; left: 2.449em;"}[−[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="font-family: MathJax_Main; position: absolute; top: -3.998em; left: 2.967em;"}[−[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="font-family: MathJax_Main; position: absolute; top: -3.998em; left: 3.485em;"}[−[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="font-family: MathJax_Main; position: absolute; top: -3.998em; left: 4.002em;"}[−[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="font-family: MathJax_Main; position: absolute; top: -3.998em; left: 4.52em;"}]{style="display: inline-block; position: relative; width: 5.696em; height: 0px;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.579em, 1005.7em, 3.908em, -999.998em); top: -5.362em; left: 0.991em;"}[[√]{style="font-family: MathJax_Size4;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(2.12em, 1001.04em, 5.414em, -999.998em); top: -3.904em; left: 0em;"}]{style="display: inline-block; position: relative; width: 6.732em; height: 0px;"}]{#23.html#MathJax-Span-10.msqrt style="padding-left: 0.285em;"}]{#23.html#MathJax-Span-2.mrow}[]{style="display: inline-block; width: 0px; height: 2.308em;"}]{style="position: absolute; clip: rect(0.52em, 1010.87em, 3.767em, -999.998em); top: -2.304em; left: 0em;"}]{style="display: inline-block; position: relative; width: 10.873em; height: 0px; font-size: 125%;"}[]{style="display: inline-block; overflow: hidden; vertical-align: -1.703em; border-left: 0px solid; width: 0px; height: 3.885em;"}]{#23.html#MathJax-Span-1.mathstyle="width: 13.602em; display: inline-block;"}``{=html}[$$E(p,q) = \sqrt{\sum\limits_{i = 1}^{n}{(p_{i} - q_{i})^{2}}}$$]{.MJX_Assistive_MathML.MJX_Assistive_MathML_Blockrole="presentation"}]{#23.html#MathJax-Element-1-Frame .MathJaxtabindex="0" style="text-align: center; position: relative;"mathml="E(p,q)=∑i=1n(pi−qi)2"role="presentation"}$$$$这个公式就是，每一个坐标上的取值相减，求平方和，最后输出方根。显然，欧式距离得到的值是一个非负数，最大值是正无穷。通常相似度计算度量结果希望是\[-1，1\] 或者 \[0，1\之间，所以欧式距离要么无法直接使用到这个场景中，要么需要经过二次转化得到，我在文稿中放了一个最常用的转化公式，你可以点击查看。]{.MathJax_Preview style="color: inherit; display: none;"} {.MathJax_Display style="text-align: center;"}``{=html}[[[[[1]{#23.html#MathJax-Span-44.mnstyle="font-family: MathJax_Main;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.202em, 1000.43em, 4.144em, -999.998em); top: -4.656em; left: 50%; margin-left: -0.233em;"}1]{#23.html#MathJax-Span-46.mn style="font-family: MathJax_Main;"}[+]{#23.html#MathJax-Span-47 .mostyle="font-family: MathJax_Main; padding-left: 0.238em;"}[E[]{style="display: inline-block; overflow: hidden; height: 1px; width: 0.049em;"}]{#23.html#MathJax-Span-48.mistyle="font-family: MathJax_Math-italic; padding-left: 0.238em;"}[(]{#23.html#MathJax-Span-49.mo style="font-family: MathJax_Main;"}[p]{#23.html#MathJax-Span-50 .mistyle="font-family: MathJax_Math-italic;"}[,]{#23.html#MathJax-Span-51.mostyle="font-family: MathJax_Main;"}[q[]{style="display: inline-block; overflow: hidden; height: 1px; width: 0.002em;"}]{#23.html#MathJax-Span-52.mistyle="font-family: MathJax_Math-italic; padding-left: 0.191em;"}[)]{#23.html#MathJax-Span-53.mo style="font-family: MathJax_Main;"}]{#23.html#MathJax-Span-45.mrow}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.108em, 1004.61em, 4.379em, -999.998em); top: -3.292em; left: 50%; margin-left: -2.351em;"}[[]{style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 4.849em; height: 0px;"}[]{style="display: inline-block; width: 0px; height: 1.085em;"}]{style="position: absolute; clip: rect(0.896em, 1004.85em, 1.226em, -999.998em); top: -1.315em; left: 0em;"}]{style="display: inline-block; position: relative; width: 4.849em; height: 0px; margin-right: 0.144em; margin-left: 0.144em;"}]{#23.html#MathJax-Span-43.mfrac}]{#23.html#MathJax-Span-42.mrow}[]{style="display: inline-block; width: 0px; height: 2.308em;"}]{style="position: absolute; clip: rect(0.802em, 1005.13em, 3.391em, -999.998em); top: -2.304em; left: 0em;"}]{style="display: inline-block; position: relative; width: 5.132em; height: 0px; font-size: 125%;"}[]{style="display: inline-block; overflow: hidden; vertical-align: -1.232em; border-left: 0px solid; width: 0px; height: 3.003em;"}]{#23.html#MathJax-Span-41.mathstyle="width: 6.449em; display: inline-block;"}``{=html}[$$\frac{1}{1 + E(p,q)}$$]{.MJX_Assistive_MathML.MJX_Assistive_MathML_Blockrole="presentation"}]{#23.html#MathJax-Element-2-Frame .MathJaxtabindex="0" style="text-align: center; position: relative;"mathml="11+E(p,q)"role="presentation"}$$$$距离加一后取倒数。这个公式能够把范围为 0 到正无穷的欧式距离转换为 0 到 1的相似度。欧式距离度量的是空间中两个点的绝对差异，适用于分析用户能力模型之间的差异，比如消费能力、贡献内容的能力等。当然，虽然欧式距离计算两个点的距离，实际上，点的坐标表示和我们常说的向量表示是同一回事，希望这句话是废话，你早已懂得。
### 2 余弦相似度 {#23.html#2-}大名鼎鼎的余弦相似度，度量的是两个向量之间的夹角，其实就是用夹角的余弦值来度量，所以名字叫余弦相似度。当两个向量的夹角为0 度时，余弦值为 1，当夹角为 90 度时，余弦值为 0，为 180度时，余弦值则为 -1。余弦相似度在度量文本相似度、用户相似度、物品相似度的时候都较为常用；但是在这里需要提醒你一点，余弦相似度的特点：它与向量的长度无关。因为余弦相似度计算需要对向量长度做归一化：]{.MathJax_Preview style="color: inherit; display: none;"} {.MathJax_Display style="text-align: center;"}``{=html}[[c]{#23.html#MathJax-Span-56 .mistyle="font-family: MathJax_Math-italic;"}[o]{#23.html#MathJax-Span-57.mistyle="font-family: MathJax_Math-italic;"}[s]{#23.html#MathJax-Span-58.mistyle="font-family: MathJax_Math-italic;"}[(]{#23.html#MathJax-Span-59.mo style="font-family: MathJax_Main;"}[p]{#23.html#MathJax-Span-60 .mistyle="font-family: MathJax_Math-italic;"}[,]{#23.html#MathJax-Span-61.mostyle="font-family: MathJax_Main;"}[q[]{style="display: inline-block; overflow: hidden; height: 1px; width: 0.002em;"}]{#23.html#MathJax-Span-62.mistyle="font-family: MathJax_Math-italic; padding-left: 0.191em;"}[)]{#23.html#MathJax-Span-63.mo style="font-family: MathJax_Main;"}[=]{#23.html#MathJax-Span-64 .mostyle="font-family: MathJax_Main; padding-left: 0.285em;"}[[[[[∑]{#23.html#MathJax-Span-68.mostyle="font-family: MathJax_Size1; vertical-align: 0em;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.108em, 1000.99em, 4.379em, -999.998em); top: -3.998em; left: 0em;"}[i]{#23.html#MathJax-Span-71.mistyle="font-size: 70.7%; font-family: MathJax_Math-italic;"}]{#23.html#MathJax-Span-70.mrow}]{#23.html#MathJax-Span-69.texatom}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; top: -3.715em; left: 1.038em;"}]{style="display: inline-block; position: relative; width: 1.367em; height: 0px;"}]{#23.html#MathJax-Span-67.munderover}[[[p]{#23.html#MathJax-Span-75 .mistyle="font-family: MathJax_Math-italic;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.438em, 1000.52em, 4.332em, -999.998em); top: -3.998em; left: 0em;"}[i]{#23.html#MathJax-Span-78.mistyle="font-size: 70.7%; font-family: MathJax_Math-italic;"}]{#23.html#MathJax-Span-77.mrow}]{#23.html#MathJax-Span-76.texatom}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; top: -3.856em; left: 0.52em;"}]{style="display: inline-block; position: relative; width: 0.802em; height: 0px;"}]{#23.html#MathJax-Span-74.msubsup}[q[]{style="display: inline-block; overflow: hidden; height: 1px; width: 0.002em;"}]{#23.html#MathJax-Span-80.mistyle="font-family: MathJax_Math-italic;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.438em, 1000.47em, 4.332em, -999.998em); top: -3.998em; left: 0em;"}[i]{#23.html#MathJax-Span-83.mistyle="font-size: 70.7%; font-family: MathJax_Math-italic;"}]{#23.html#MathJax-Span-82.mrow}]{#23.html#MathJax-Span-81.texatom}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; top: -3.856em; left: 0.426em;"}]{style="display: inline-block; position: relative; width: 0.755em; height: 0px;"}]{#23.html#MathJax-Span-79.msubsup}]{#23.html#MathJax-Span-73 .mrow}]{#23.html#MathJax-Span-72.texatom style="padding-left: 0.191em;"}]{#23.html#MathJax-Span-66.mrow}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.108em, 1003.15em, 4.426em, -999.998em); top: -4.751em; left: 50%; margin-left: -1.551em;"}[[[[[[[∑]{#23.html#MathJax-Span-88.mostyle="font-family: MathJax_Size1; vertical-align: 0em;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.108em, 1000.99em, 4.379em, -999.998em); top: -3.998em; left: 0em;"}[i]{#23.html#MathJax-Span-91.mistyle="font-size: 70.7%; font-family: MathJax_Math-italic;"}]{#23.html#MathJax-Span-90.mrow}]{#23.html#MathJax-Span-89.texatom}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; top: -3.715em; left: 1.038em;"}]{style="display: inline-block; position: relative; width: 1.367em; height: 0px;"}]{#23.html#MathJax-Span-87.munderover}[[[q[]{style="display: inline-block; overflow: hidden; height: 1px; width: 0.002em;"}]{#23.html#MathJax-Span-95.mistyle="font-family: MathJax_Math-italic;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.438em, 1000.47em, 4.332em, -999.998em); top: -3.998em; left: 0em;"}[2]{#23.html#MathJax-Span-98.mnstyle="font-size: 70.7%; font-family: MathJax_Main;"}]{#23.html#MathJax-Span-97.mrow}]{#23.html#MathJax-Span-96.texatom}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.391em, 1000.43em, 4.144em, -999.998em); top: -4.327em; left: 0.52em;"}[i]{#23.html#MathJax-Span-101.mistyle="font-size: 70.7%; font-family: MathJax_Math-italic;"}]{#23.html#MathJax-Span-100.mrow}]{#23.html#MathJax-Span-99.texatom}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.391em, 1000.33em, 4.144em, -999.998em); top: -3.715em; left: 0.426em;"}]{style="display: inline-block; position: relative; width: 0.944em; height: 0px;"}]{#23.html#MathJax-Span-94.msubsup}]{#23.html#MathJax-Span-93 .mrow}]{#23.html#MathJax-Span-92.texatom style="padding-left: 0.191em;"}]{#23.html#MathJax-Span-86.mrow}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.061em, 1002.5em, 4.473em, -999.998em); top: -3.998em; left: 0.991em;"}−[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; font-family: MathJax_Main; top: -3.998em; left: -0.092em;"}[−[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; font-family: MathJax_Main; top: -3.998em; left: 1.838em;"}[−[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="font-family: MathJax_Main; position: absolute; top: -3.998em; left: 0.379em;"}[−[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="font-family: MathJax_Main; position: absolute; top: -3.998em; left: 0.849em;"}[−[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="font-family: MathJax_Main; position: absolute; top: -3.998em; left: 1.367em;"}]{style="display: inline-block; position: relative; width: 2.544em; height: 0px;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.579em, 1002.54em, 3.908em, -999.998em); top: -4.892em; left: 0.991em;"}[[√]{style="font-family: MathJax_Size2;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(2.732em, 1001.04em, 4.802em, -999.998em); top: -3.998em; left: 0em;"}]{style="display: inline-block; position: relative; width: 3.532em; height: 0px;"}]{#23.html#MathJax-Span-85.msqrt}[[[[[∑]{#23.html#MathJax-Span-105 .mostyle="font-family: MathJax_Size1; vertical-align: 0em;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.108em, 1000.99em, 4.379em, -999.998em); top: -3.998em; left: 0em;"}[i]{#23.html#MathJax-Span-108.mistyle="font-size: 70.7%; font-family: MathJax_Math-italic;"}]{#23.html#MathJax-Span-107.mrow}]{#23.html#MathJax-Span-106.texatom}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; top: -3.715em; left: 1.038em;"}]{style="display: inline-block; position: relative; width: 1.367em; height: 0px;"}]{#23.html#MathJax-Span-104.munderover}[[[p]{#23.html#MathJax-Span-112 .mistyle="font-family: MathJax_Math-italic;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.438em, 1000.52em, 4.332em, -999.998em); top: -3.998em; left: 0em;"}[2]{#23.html#MathJax-Span-115.mnstyle="font-size: 70.7%; font-family: MathJax_Main;"}]{#23.html#MathJax-Span-114.mrow}]{#23.html#MathJax-Span-113.texatom}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.391em, 1000.43em, 4.144em, -999.998em); top: -4.327em; left: 0.52em;"}[i]{#23.html#MathJax-Span-118.mistyle="font-size: 70.7%; font-family: MathJax_Math-italic;"}]{#23.html#MathJax-Span-117.mrow}]{#23.html#MathJax-Span-116.texatom}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.391em, 1000.33em, 4.144em, -999.998em); top: -3.715em; left: 0.52em;"}]{style="display: inline-block; position: relative; width: 0.944em; height: 0px;"}]{#23.html#MathJax-Span-111.msubsup}]{#23.html#MathJax-Span-110 .mrow}]{#23.html#MathJax-Span-109.texatom style="padding-left: 0.191em;"}]{#23.html#MathJax-Span-103.mrow}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.061em, 1002.5em, 4.473em, -999.998em); top: -3.998em; left: 0.991em;"}−[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; font-family: MathJax_Main; top: -3.998em; left: -0.092em;"}[−[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; font-family: MathJax_Main; top: -3.998em; left: 1.838em;"}[−[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="font-family: MathJax_Main; position: absolute; top: -3.998em; left: 0.379em;"}[−[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="font-family: MathJax_Main; position: absolute; top: -3.998em; left: 0.849em;"}[−[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="font-family: MathJax_Main; position: absolute; top: -3.998em; left: 1.367em;"}]{style="display: inline-block; position: relative; width: 2.544em; height: 0px;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.579em, 1002.54em, 3.908em, -999.998em); top: -4.892em; left: 0.991em;"}[[√]{style="font-family: MathJax_Size2;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(2.732em, 1001.04em, 4.802em, -999.998em); top: -3.998em; left: 0em;"}]{style="display: inline-block; position: relative; width: 3.532em; height: 0px;"}]{#23.html#MathJax-Span-102.msqrt}]{#23.html#MathJax-Span-84.mrow}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(2.685em, 1007.06em, 4.755em, -999.998em); top: -2.868em; left: 50%; margin-left: -3.527em;"}[[]{style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 7.155em; height: 0px;"}[]{style="display: inline-block; width: 0px; height: 1.085em;"}]{style="position: absolute; clip: rect(0.896em, 1007.15em, 1.226em, -999.998em); top: -1.315em; left: 0em;"}]{style="display: inline-block; position: relative; width: 7.155em; height: 0px; margin-right: 0.144em; margin-left: 0.144em;"}]{#23.html#MathJax-Span-65.mfrac style="padding-left: 0.285em;"}]{#23.html#MathJax-Span-55.mrow}[]{style="display: inline-block; width: 0px; height: 2.308em;"}]{style="position: absolute; clip: rect(0.661em, 1012.19em, 4.191em, -999.998em); top: -2.304em; left: 0em;"}]{style="display: inline-block; position: relative; width: 12.191em; height: 0px; font-size: 125%;"}[]{style="display: inline-block; overflow: hidden; vertical-align: -2.232em; border-left: 0px solid; width: 0px; height: 4.179em;"}]{#23.html#MathJax-Span-54.mathstyle="width: 15.249em; display: inline-block;"}``{=html}[$$cos(p,q) = \frac{\sum\limits_{i}{p_{i}q_{i}}}{\sqrt{\sum\limits_{i}q_{i}^{2}}\sqrt{\sum\limits_{i}p_{i}^{2}}}$$]{.MJX_Assistive_MathML.MJX_Assistive_MathML_Blockrole="presentation"}]{#23.html#MathJax-Element-3-Frame .MathJaxtabindex="0" style="text-align: center; position: relative;"mathml="cos(p,q)=∑ipiqi∑iqi2∑ipi2"role="presentation"}$$$$经过向量长度归一化后的相似度量方式，背后潜藏着这样一种思想：两个向量，只要方向一致，无论程度强弱，都可以视为"相似"。这简直就是：招聘人才时只看价值观，不考核代码能力，只要肯干，搬砖嘛，谁搬不是搬。这样做错不错呢？很显然，有非常大的合理性。比如，我用 140 字的微博摘要了一篇 5000字的博客内容，两者得到的文本向量可以认为方向一致，词频等程度不同，但是余弦相似度仍然认为他们是相似的。在协同过滤中，如果选择余弦相似度，某种程度上更加依赖两个物品的共同评价用户数，而不是用户给予的评分多少。这就是由于余弦相似度被向量长度归一化后的结果。余弦相似度对绝对值大小不敏感这件事，在某些应用上仍然有些问题。举个小例子，用户 A 对两部电影评分分别是 1 分和 2 分，用户 B对同样这两部电影评分是 4 分和 5分。用余弦相似度计算出来，两个用户的相似度达到0.98。这和实际直觉不符，用户 A 明显不喜欢这两部电影。针对这个问题，对余弦相似度有个改进，改进的算法叫做调整的余弦相似度（AdjustedCosineSimilarity）。调整的方法很简单，就是先计算向量每个维度上的均值，然后每个向量在各个维度上都减去均值后，再计算余弦相似度。前面这个小例子，用调整的余弦相似度计算得到的相似度是-0.1，呈现出两个用户口味相反，和直觉相符。
### 3 皮尔逊相关度 {#23.html#3-}皮尔逊相关度，实际上也是一种余弦相似度，不过先对向量做了中心化，向量 p和 q 各自减去向量的均值后，再计算余弦相似度。]{.MathJax_Preview style="color: inherit; display: none;"} {.MathJax_Display style="text-align: center;"}``{=html}[[R]{#23.html#MathJax-Span-121 .mistyle="font-family: MathJax_Math-italic;"}[(]{#23.html#MathJax-Span-122.mo style="font-family: MathJax_Main;"}[p]{#23.html#MathJax-Span-123 .mistyle="font-family: MathJax_Math-italic;"}[,]{#23.html#MathJax-Span-124.mostyle="font-family: MathJax_Main;"}[q[]{style="display: inline-block; overflow: hidden; height: 1px; width: 0.002em;"}]{#23.html#MathJax-Span-125.mistyle="font-family: MathJax_Math-italic; padding-left: 0.191em;"}[)]{#23.html#MathJax-Span-126.mo style="font-family: MathJax_Main;"}[=]{#23.html#MathJax-Span-127 .mostyle="font-family: MathJax_Main; padding-left: 0.285em;"}[[[[[∑]{#23.html#MathJax-Span-131.mostyle="font-family: MathJax_Size1; vertical-align: 0em;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.108em, 1000.99em, 4.379em, -999.998em); top: -3.998em; left: 0em;"}[n]{#23.html#MathJax-Span-134.mistyle="font-size: 70.7%; font-family: MathJax_Math-italic;"}]{#23.html#MathJax-Span-133.mrow}]{#23.html#MathJax-Span-132.texatom}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.532em, 1000.52em, 4.144em, -999.998em); top: -4.468em; left: 1.038em;"}[i]{#23.html#MathJax-Span-137.mistyle="font-size: 70.7%; font-family: MathJax_Math-italic;"}[=]{#23.html#MathJax-Span-138.mostyle="font-size: 70.7%; font-family: MathJax_Main;"}[1]{#23.html#MathJax-Span-139.mnstyle="font-size: 70.7%; font-family: MathJax_Main;"}]{#23.html#MathJax-Span-136.mrow}]{#23.html#MathJax-Span-135.texatom}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.391em, 1001.23em, 4.144em, -999.998em); top: -3.715em; left: 1.038em;"}]{style="display: inline-block; position: relative; width: 2.261em; height: 0px;"}]{#23.html#MathJax-Span-130.munderover}(]{#23.html#MathJax-Span-142 .mostyle="font-family: MathJax_Main;"}[p]{#23.html#MathJax-Span-144 .mistyle="font-family: MathJax_Math-italic;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.438em, 1000.52em, 4.332em, -999.998em); top: -3.998em; left: 0em;"}[i]{#23.html#MathJax-Span-147.mistyle="font-size: 70.7%; font-family: MathJax_Math-italic;"}]{#23.html#MathJax-Span-146.mrow}]{#23.html#MathJax-Span-145.texatom}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; top: -3.856em; left: 0.52em;"}]{style="display: inline-block; position: relative; width: 0.802em; height: 0px;"}]{#23.html#MathJax-Span-143.msubsup}[−]{#23.html#MathJax-Span-148 .mostyle="font-family: MathJax_Main; padding-left: 0.238em;"}[[[p]{#23.html#MathJax-Span-152.mistyle="font-family: MathJax_Math-italic;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.438em, 1000.52em, 4.332em, -999.998em); top: -3.998em; left: 0em;"}[[¯]{#23.html#MathJax-Span-153.mostyle="font-family: MathJax_Main;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.249em, 1000.43em, 3.579em, -999.998em); top: -3.998em; left: 0.096em;"}]{style="display: inline-block; position: relative; width: 0.567em; height: 0px;"}]{#23.html#MathJax-Span-151.munderover}]{#23.html#MathJax-Span-150.mrow}]{#23.html#MathJax-Span-149 .texatomstyle="padding-left: 0.238em;"}[)]{#23.html#MathJax-Span-154 .mostyle="font-family: MathJax_Main;"}[(]{#23.html#MathJax-Span-155 .mostyle="font-family: MathJax_Main;"}[q[]{style="display: inline-block; overflow: hidden; height: 1px; width: 0.002em;"}]{#23.html#MathJax-Span-157.mistyle="font-family: MathJax_Math-italic;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.438em, 1000.47em, 4.332em, -999.998em); top: -3.998em; left: 0em;"}[i]{#23.html#MathJax-Span-160.mistyle="font-size: 70.7%; font-family: MathJax_Math-italic;"}]{#23.html#MathJax-Span-159.mrow}]{#23.html#MathJax-Span-158.texatom}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; top: -3.856em; left: 0.426em;"}]{style="display: inline-block; position: relative; width: 0.755em; height: 0px;"}]{#23.html#MathJax-Span-156.msubsup}[−]{#23.html#MathJax-Span-161 .mostyle="font-family: MathJax_Main; padding-left: 0.238em;"}[[[q[]{style="display: inline-block; overflow: hidden; height: 1px; width: 0.002em;"}]{#23.html#MathJax-Span-165.mistyle="font-family: MathJax_Math-italic;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.438em, 1000.47em, 4.332em, -999.998em); top: -3.998em; left: 0.002em;"}[[¯]{#23.html#MathJax-Span-166.mostyle="font-family: MathJax_Main;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.249em, 1000.43em, 3.579em, -999.998em); top: -3.998em; left: 0.096em;"}]{style="display: inline-block; position: relative; width: 0.614em; height: 0px;"}]{#23.html#MathJax-Span-164.munderover}]{#23.html#MathJax-Span-163.mrow}]{#23.html#MathJax-Span-162 .texatomstyle="padding-left: 0.238em;"}[)]{#23.html#MathJax-Span-167 .mostyle="font-family: MathJax_Main;"}]{#23.html#MathJax-Span-141.mrow}]{#23.html#MathJax-Span-140 .texatomstyle="padding-left: 0.191em;"}]{#23.html#MathJax-Span-129.mrow}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.061em, 1009.23em, 4.426em, -999.998em); top: -4.751em; left: 50%; margin-left: -4.656em;"}[[[[[[[∑]{#23.html#MathJax-Span-172.mostyle="font-family: MathJax_Size1; vertical-align: 0em;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.108em, 1000.99em, 4.379em, -999.998em); top: -3.998em; left: 0em;"}[n]{#23.html#MathJax-Span-175.mistyle="font-size: 70.7%; font-family: MathJax_Math-italic;"}]{#23.html#MathJax-Span-174.mrow}]{#23.html#MathJax-Span-173.texatom}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.532em, 1000.52em, 4.144em, -999.998em); top: -4.468em; left: 1.038em;"}[i]{#23.html#MathJax-Span-178.mistyle="font-size: 70.7%; font-family: MathJax_Math-italic;"}[=]{#23.html#MathJax-Span-179.mostyle="font-size: 70.7%; font-family: MathJax_Main;"}[1]{#23.html#MathJax-Span-180.mnstyle="font-size: 70.7%; font-family: MathJax_Main;"}]{#23.html#MathJax-Span-177.mrow}]{#23.html#MathJax-Span-176.texatom}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.391em, 1001.23em, 4.144em, -999.998em); top: -3.715em; left: 1.038em;"}]{style="display: inline-block; position: relative; width: 2.261em; height: 0px;"}]{#23.html#MathJax-Span-171.munderover}(]{#23.html#MathJax-Span-183 .mostyle="font-family: MathJax_Main;"}[p]{#23.html#MathJax-Span-185 .mistyle="font-family: MathJax_Math-italic;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.438em, 1000.52em, 4.332em, -999.998em); top: -3.998em; left: 0em;"}[i]{#23.html#MathJax-Span-188.mistyle="font-size: 70.7%; font-family: MathJax_Math-italic;"}]{#23.html#MathJax-Span-187.mrow}]{#23.html#MathJax-Span-186.texatom}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; top: -3.856em; left: 0.52em;"}]{style="display: inline-block; position: relative; width: 0.802em; height: 0px;"}]{#23.html#MathJax-Span-184.msubsup}[−]{#23.html#MathJax-Span-189 .mostyle="font-family: MathJax_Main; padding-left: 0.238em;"}[[[p]{#23.html#MathJax-Span-193.mistyle="font-family: MathJax_Math-italic;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.438em, 1000.52em, 4.332em, -999.998em); top: -3.998em; left: 0em;"}[[¯]{#23.html#MathJax-Span-194.mostyle="font-family: MathJax_Main;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.249em, 1000.43em, 3.579em, -999.998em); top: -3.998em; left: 0.096em;"}]{style="display: inline-block; position: relative; width: 0.567em; height: 0px;"}]{#23.html#MathJax-Span-192.munderover}]{#23.html#MathJax-Span-191.mrow}]{#23.html#MathJax-Span-190 .texatomstyle="padding-left: 0.238em;"}[)]{#23.html#MathJax-Span-196 .mostyle="font-family: MathJax_Main;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.108em, 1000.28em, 4.379em, -999.998em); top: -3.998em; left: 0em;"}[2]{#23.html#MathJax-Span-199.mnstyle="font-size: 70.7%; font-family: MathJax_Main;"}]{#23.html#MathJax-Span-198.mrow}]{#23.html#MathJax-Span-197.texatom}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; top: -4.28em; left: 0.379em;"}]{style="display: inline-block; position: relative; width: 0.802em; height: 0px;"}]{#23.html#MathJax-Span-195.msubsup}]{#23.html#MathJax-Span-182 .mrow}]{#23.html#MathJax-Span-181.texatom style="padding-left: 0.191em;"}]{#23.html#MathJax-Span-170.mrow}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.061em, 1006.36em, 4.426em, -999.998em); top: -3.998em; left: 0.991em;"}−[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; font-family: MathJax_Main; top: -3.998em; left: -0.092em;"}[−[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; font-family: MathJax_Main; top: -3.998em; left: 5.649em;"}[−[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="font-family: MathJax_Main; position: absolute; top: -3.998em; left: 0.426em;"}[−[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="font-family: MathJax_Main; position: absolute; top: -3.998em; left: 0.944em;"}[−[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="font-family: MathJax_Main; position: absolute; top: -3.998em; left: 1.461em;"}[−[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="font-family: MathJax_Main; position: absolute; top: -3.998em; left: 1.979em;"}[−[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="font-family: MathJax_Main; position: absolute; top: -3.998em; left: 2.496em;"}[−[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="font-family: MathJax_Main; position: absolute; top: -3.998em; left: 3.061em;"}[−[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="font-family: MathJax_Main; position: absolute; top: -3.998em; left: 3.579em;"}[−[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="font-family: MathJax_Main; position: absolute; top: -3.998em; left: 4.096em;"}[−[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="font-family: MathJax_Main; position: absolute; top: -3.998em; left: 4.614em;"}[−[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="font-family: MathJax_Main; position: absolute; top: -3.998em; left: 5.132em;"}]{style="display: inline-block; position: relative; width: 6.355em; height: 0px;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.579em, 1006.36em, 3.908em, -999.998em); top: -4.845em; left: 0.991em;"}[[√]{style="font-family: MathJax_Size2;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(2.732em, 1001.04em, 4.802em, -999.998em); top: -3.998em; left: 0em;"}]{style="display: inline-block; position: relative; width: 7.344em; height: 0px;"}]{#23.html#MathJax-Span-169.msqrt}[[[[[∑]{#23.html#MathJax-Span-203 .mostyle="font-family: MathJax_Size1; vertical-align: 0em;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.108em, 1000.99em, 4.379em, -999.998em); top: -3.998em; left: 0em;"}[n]{#23.html#MathJax-Span-206.mistyle="font-size: 70.7%; font-family: MathJax_Math-italic;"}]{#23.html#MathJax-Span-205.mrow}]{#23.html#MathJax-Span-204.texatom}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.532em, 1000.52em, 4.144em, -999.998em); top: -4.468em; left: 1.038em;"}[i]{#23.html#MathJax-Span-209.mistyle="font-size: 70.7%; font-family: MathJax_Math-italic;"}[=]{#23.html#MathJax-Span-210.mostyle="font-size: 70.7%; font-family: MathJax_Main;"}[1]{#23.html#MathJax-Span-211.mnstyle="font-size: 70.7%; font-family: MathJax_Main;"}]{#23.html#MathJax-Span-208.mrow}]{#23.html#MathJax-Span-207.texatom}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.391em, 1001.23em, 4.144em, -999.998em); top: -3.715em; left: 1.038em;"}]{style="display: inline-block; position: relative; width: 2.261em; height: 0px;"}]{#23.html#MathJax-Span-202.munderover}(]{#23.html#MathJax-Span-214 .mostyle="font-family: MathJax_Main;"}[q[]{style="display: inline-block; overflow: hidden; height: 1px; width: 0.002em;"}]{#23.html#MathJax-Span-216.mistyle="font-family: MathJax_Math-italic;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.438em, 1000.47em, 4.332em, -999.998em); top: -3.998em; left: 0em;"}[i]{#23.html#MathJax-Span-219.mistyle="font-size: 70.7%; font-family: MathJax_Math-italic;"}]{#23.html#MathJax-Span-218.mrow}]{#23.html#MathJax-Span-217.texatom}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; top: -3.856em; left: 0.426em;"}]{style="display: inline-block; position: relative; width: 0.755em; height: 0px;"}]{#23.html#MathJax-Span-215.msubsup}[−]{#23.html#MathJax-Span-220 .mostyle="font-family: MathJax_Main; padding-left: 0.238em;"}[[[q[]{style="display: inline-block; overflow: hidden; height: 1px; width: 0.002em;"}]{#23.html#MathJax-Span-224.mistyle="font-family: MathJax_Math-italic;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.438em, 1000.47em, 4.332em, -999.998em); top: -3.998em; left: 0.002em;"}[[¯]{#23.html#MathJax-Span-225.mostyle="font-family: MathJax_Main;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.249em, 1000.43em, 3.579em, -999.998em); top: -3.998em; left: 0.096em;"}]{style="display: inline-block; position: relative; width: 0.614em; height: 0px;"}]{#23.html#MathJax-Span-223.munderover}]{#23.html#MathJax-Span-222.mrow}]{#23.html#MathJax-Span-221 .texatomstyle="padding-left: 0.238em;"}[)]{#23.html#MathJax-Span-227 .mostyle="font-family: MathJax_Main;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.108em, 1000.28em, 4.379em, -999.998em); top: -3.998em; left: 0em;"}[2]{#23.html#MathJax-Span-230.mnstyle="font-size: 70.7%; font-family: MathJax_Main;"}]{#23.html#MathJax-Span-229.mrow}]{#23.html#MathJax-Span-228.texatom}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; top: -4.28em; left: 0.379em;"}]{style="display: inline-block; position: relative; width: 0.802em; height: 0px;"}]{#23.html#MathJax-Span-226.msubsup}]{#23.html#MathJax-Span-213 .mrow}]{#23.html#MathJax-Span-212.texatom style="padding-left: 0.191em;"}]{#23.html#MathJax-Span-201.mrow}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.061em, 1006.31em, 4.426em, -999.998em); top: -3.998em; left: 0.991em;"}−[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; font-family: MathJax_Main; top: -3.998em; left: -0.092em;"}[−[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; font-family: MathJax_Main; top: -3.998em; left: 5.649em;"}[−[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="font-family: MathJax_Main; position: absolute; top: -3.998em; left: 0.426em;"}[−[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="font-family: MathJax_Main; position: absolute; top: -3.998em; left: 0.944em;"}[−[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="font-family: MathJax_Main; position: absolute; top: -3.998em; left: 1.461em;"}[−[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="font-family: MathJax_Main; position: absolute; top: -3.998em; left: 1.979em;"}[−[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="font-family: MathJax_Main; position: absolute; top: -3.998em; left: 2.496em;"}[−[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="font-family: MathJax_Main; position: absolute; top: -3.998em; left: 3.014em;"}[−[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="font-family: MathJax_Main; position: absolute; top: -3.998em; left: 3.532em;"}[−[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="font-family: MathJax_Main; position: absolute; top: -3.998em; left: 4.096em;"}[−[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="font-family: MathJax_Main; position: absolute; top: -3.998em; left: 4.614em;"}[−[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="font-family: MathJax_Main; position: absolute; top: -3.998em; left: 5.132em;"}]{style="display: inline-block; position: relative; width: 6.355em; height: 0px;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.579em, 1006.36em, 3.908em, -999.998em); top: -4.845em; left: 0.991em;"}[[√]{style="font-family: MathJax_Size2;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(2.732em, 1001.04em, 4.802em, -999.998em); top: -3.998em; left: 0em;"}]{style="display: inline-block; position: relative; width: 7.344em; height: 0px;"}]{#23.html#MathJax-Span-200.msqrt}]{#23.html#MathJax-Span-168.mrow}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(2.685em, 1014.68em, 4.802em, -999.998em); top: -2.868em; left: 50%; margin-left: -7.339em;"}[[]{style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 14.826em; height: 0px;"}[]{style="display: inline-block; width: 0px; height: 1.085em;"}]{style="position: absolute; clip: rect(0.896em, 1014.83em, 1.226em, -999.998em); top: -1.315em; left: 0em;"}]{style="display: inline-block; position: relative; width: 14.826em; height: 0px; margin-right: 0.144em; margin-left: 0.144em;"}]{#23.html#MathJax-Span-128.mfrac style="padding-left: 0.285em;"}]{#23.html#MathJax-Span-120.mrow}[]{style="display: inline-block; width: 0px; height: 2.308em;"}]{style="position: absolute; clip: rect(0.614em, 1019.25em, 4.191em, -999.998em); top: -2.304em; left: 0em;"}]{style="display: inline-block; position: relative; width: 19.249em; height: 0px; font-size: 125%;"}[]{style="display: inline-block; overflow: hidden; vertical-align: -2.232em; border-left: 0px solid; width: 0px; height: 4.238em;"}]{#23.html#MathJax-Span-119.mathstyle="width: 24.096em; display: inline-block;"}``{=html}[$$R(p,q) = \frac{\sum\limits_{i = 1}^{n}{(p_{i} - \overline{p})(q_{i} - \overline{q})}}{\sqrt{\sum\limits_{i = 1}^{n}{(p_{i} - \overline{p})^{2}}}\sqrt{\sum\limits_{i = 1}^{n}{(q_{i} - \overline{q})^{2}}}}$$]{.MJX_Assistive_MathML.MJX_Assistive_MathML_Blockrole="presentation"}]{#23.html#MathJax-Element-4-Frame .MathJaxtabindex="0" style="text-align: center; position: relative;"mathml="R(p,q)=∑i=1n(pi−p¯)(qi−q¯)∑i=1n(pi−p¯)2∑i=1n(qi−q¯)2"role="presentation"}$$$$皮尔逊相关度计算结果范围在 -1 到 1。-1 表示负相关，1比表示正相关。皮尔逊相关度其实度量的是两个随机变量是不是在同增同减。如果同时对两个随机变量采样，当其中一个得到较大的值另一也较大，其中一个较小时另一个也较小时，这就是正相关，计算出来的相关度就接近1，这种情况属于沆瀣一气，反之就接近 -1。由于皮尔逊相关度度量的时两个变量的变化趋势是否一致，所以不适合用作计算布尔值向量之间相关度，因为两个布尔向量也就是对应两个0-1分布的随机变量，这样的随机变量变化只有有限的两个取值，根本没有"变化趋势，高低起伏"这一说。
### 4 杰卡德（Jaccard）相似度 {#23.html#4-jaccard-}杰卡德相似度，是两个集合的交集元素个数在并集中所占的比例。由于集合非常适用于布尔向量表示，所以杰卡德相似度简直就是为布尔值向量私人定做的。对应的计算方式是：1.  分子是两个布尔向量做点积计算，得到的就是交集元素个数；2.  分母是两个布尔向量做或运算，再求元素和。余弦相似度适用于评分数据，杰卡德相似度适合用于隐式反馈数据。例如，使用用户的收藏行为，计算用户之间的相似度，杰卡德相似度就适合来承担这个任务。
## 总结 {#23.html#-}今天，我介绍了常用的几种相似度计算方法，以及其各自的使用场景。这里的场景是按照数据形式划分的，按照向量维度取值是否是布尔值来看，杰卡德相似度就只适合布尔值向量，余弦相似度弹性略大，适合两种向量。欧式距离度量的是绝对差异，余弦相似度度量的是方向差异，但是调整的余弦相似度则可以避免这个弱点。现在留给你一个问题：如果在一个社交网络中，要计算好友的相似度，你会选择哪种相似度来做？欢迎留言讨论。感谢收听，我们下期再见。![](Images/905508d7cf40f9499b681215f163d778.png){savepage-src="https://static001.geekbang.org/resource/image/dc/2a/dc6f7ddc7a766cf76f1f21aedd16b42a.jpg"}