42
第3章基本的bash shell命令
可以在任何包含子目录的目录中使用带有相对文件路径的cd命令。也可以使用一个特殊字符
来表示相对目录位置。
有两个特殊字符可用于相对文件路径中：
口单点符（.），表示当前目录；
口双点符（），表示当前目录的父目录。
你可以使用单点符，不过对cd命令来说，这没有什么意义。在本章后面你会看到另一个命令
如何有效地在相对文件路径中使用单点符。
双点符在目录层级中移动时非常便利。如果你处在在主目录下的Documents目录中，需要切
换到主目录下的Downloads目录，可以这么做：
christineeserver01:~/Docunents$ pwd
/home/chrietine/Documents
christineeserver01:~/Downloads$ pwd
christine@server011~/Docunents$ cd ../Dovnloada
christinefserver01 1/Dovmloads$
/home/ christine/Down1oads
双点符先将用户带到上一级目录，也就是用户的主目录，然后/Downloads这部分再将用户带
到下一级目录，即Downloads目录。必要时用户也可用多个双点符来向上切换目录。假如现在位
于主目录中（/home/christine），想切换到/etc目录，可以输入如下命令：
christine@server01:~$ ed ../../ete
christine@server011/etcS pmd
christine@server011/etc$
etc
当然，在上面这种情况下，采用相对路径其实比采用绝对路径输人的字符更多，用绝对路径
的话，用户只需输人/etc。因此，只在必要的时候才使用相对文件路径。
说明在shellCLI提示符中加入足够的信息非常方便，本节正是这么做的。不过出于清断性的考
虑，在书中余下的例子置，我们只使用一个简单的s提示符。
既然你已经知道如何通历文件系统和验证当前工作目录，那就可以开始探索各种目录中究竞
都有些什么东西了。下一节将学习如何查看目录中的文件。
3.5文件和目录列表
要想知道系统中有哪些文件，可以使用列表命令（1s）。本节将描述1s命令和可用来格式化
其输出信息的选项。
3.5.1基本列表功能
1s命令最基本的形式会显示当前目录下的文件和目录：
---
## Page 58
3.5
文件和目录列表
43
Deaktop
S 18
Downloads
Kus1c
PicturesTenplates Videos
Documenta
2andadxosAudosep*soduexe
test_file
注意，1s命令输出的列表是按字母排序的（按列排序而不是按行排序）。如果用户用的是支
持彩色的终端仿真器，1s命令还可以用不同的颜色来区分不同类型的文件。LS_COLORs环境变
量控制着这个功能。（第6章中会讲到环境变量。）不同的Linux发行版根据各自终端仿真器的能力
设置这个环境变量。
如果没安装彩色终端仿真器，可用带-F参数的1s命令轻松区分文件和目录。使用-F参数可
以得到如下输出：
S 1s -F
/2Ttqnd +adl.xosAe dosep*sotduexe /squeumoo
Deskt op/
Down1oada /
Music/
PIcturea/ Tenplates/ Videos/
test_file
-F参数在目录名后加了正斜线（/），以方便用户在输出中分辨它们。类似地，它会在可执行
文件（比如上面的my_script文件）的后面加个星号，以便用户找出可在系统上运行的文件。
基本的1s命令在某种意义上有点容易让人误解。它显示了当前目录下的文件和目录，但并没有
将全部都显示出来。Linux经常采用隐藏文件来保存配置信息。在Limux上，隐藏文件通常是文件名
以点号开始的文件。这些文件并没有在默认的1s命令输出中显示出来，因此我们称其为隐藏文件。
要把隐藏文件和普通文件及目录一起显示出来，就得用到-a参数。下面是一个带有-a参数
的1s命令的例子：
$ 1α -a
. comp1z
examplea,deaktop Ruale
test_file
.baah_history
Deaktop
.config
-gatreaner-0.10
 - gconf
Picturea
my_scr ipt
Video8
bash_logout
.ICEauthority
.Xauthority
, dnxc
Pub11c
-profile
.xsesaion-errors,old
. xsession-errora
.bashrc
Documenta
.1ocal
, cache
Down1oads
-nozi1la
Tenplates
所有以点号开头的隐藏文件现在都显示出来了。注意，有三个以.bash开始的文件。它们是bash
shell环境所使用的隐藏文件，在第6章会对其进行详细的讲解。
-R参数是1s命令可用的另一个参数，叫作递归选项。它列出了当前目录下包含的子目录中
的文件。如果目录很多，这个输出就会很长。以下是-R参数输出的简单例子：
S 1s -P -R
Desktop/
Down1oads /
Music/
Pictures/ Tenplates/ Videos/
/0T[qnd+adtxosAue dosep*soduexe /squemoog
test_file
 /Desktop:
/Docunents :
---
## Page 59
44
第3章基本的bash shell命令
. /Dowm1oads :
. /Mus1c:
ILoveL1nux,mp3 
 /Pictures:
- /Pub11c :
- /Tenplates :
- /Videos:
注意，首先-R参数显示了当前目录下的内容，也就是之前例子中用户home目录下的那些文
件。另外，它还显示出了用户home目录下所有子目录及其内容。只有Music子目录中包含了一个
可执行文件ILoveLinux.mp3。
在上一个例子中，子目录中没再包含子目录。如果有更多的子目录，-R参数会继续进行遍历。
正如你所看到的，如果目录结构很庞大，输出内容会变得很长。
3.5.2显示长列表
在基本的输出列表中，1s命令并未输出太多每个文件的相关信息。要显示附加信息，另一个
常用的参数是-1。-1参数会产生长列表格式的输出，包含了目录中每个文件的更多相关信息。
 18 -1
drwxr-xr-x 2 chrietine christine 4096 Apr 22 20:37 Desktop 
tota] 48
drwxr-xr-x 2 chrietine chrietine 4096 Apr 22 20:37 Dowmloads
drwxr-xr-x 2 chrietine chrietine 4096 Apr 22 20:37 Documents
-rw-r--r-- 1 christine christine 8980 Apr 22 13:36 exanples desktop
-rw-rv-r-- 1 christine christine
-W----
1
chrietine chrietine
0 May 21
0 May 21 13:44 fe11
13:44 fa11
-n----
1
christine christine
0 May 21 13:44 fi11
-rw-rv-r-- 1 christine chrietine
0 May 21 13:44 fu11
drwxr-xr-x 2 @
-rw-rv-r-- 1 christine christine
chrietine chrietine 4096 May
0 May 21 13:25 my_file
r 21 11:39 Music
-rv-r--- 1 
christine chrietine
0 May
54 May 21 11:26 my_script
 21 13:25 my_scrapt
-rWxr--- 1 @
christine christine
-n-r-r-- 1 
chrietine chrietine
0 Kay
christine chrietine 4096 Apr 22 20:37 Pictures
r 21 13:42 new_file
drwxr-xr-x 2 chrietine christine 4096 Apr 22 20:37 Public
drwxr-xr-x 2 @
drwxr-xr-x 2 
christine christine 4096 Apr 22 20:37 Templates
-rw-rv-r-- 1 christine christine
0 May 21 11:28 test_file
drwxr-xr-x 2 chrietine christine 4096 Apr 22 20:37 videos
---
## Page 60
3.5文件和目录列表
45
这种长列表格式的输出在每一行中列出了单个文件或目录。除了文件名，输出中还有其他有
用信息。输出的第一行显示了在目录中包含的总块数。在此之后，每一行都包含了关于文件（或
目录）的下述信息：
口文件类型，比如目录（d）、文件（-）、字符型文件（c）或块设备（b）；
口文件的权限（参见第6章）；
口文件的硬链接总数；
口文件属主的用户名；
口文件属组的组名；
口文件的大小（以字节为单位）；
口文件的上次修改时间：
口文件名或目录名。
-1参数是一个强大的工具。有了它，你几乎可以看到系统上任何文件或目录的大部分信息。
在进行文件管理时，ls命令的很多参数都能派上用场。如果在shel提示符中输人man1s，
就能看到可用来修改1s命令输出的参数有好儿页。
别忘了可以将多个参数结合起来使用。你不时地会发现一些参数组合不仅能够显示出所需的
内容，而且还容易记忆，例如1s-alF。
3.5.3过滤输出列表
由前面的例子可知，默认情况下，1s命令会输出目录下的所有非隐藏文件。有时这个输出会
显得过多，当你只需要查看单个少数文件信息时更是如此。
幸而1s命令还支持在命令行中定义过滤器。它会用过滤器来决定应该在输出中显示哪些文件
或目录。
这个过滤器就是一个进行简单文本匹配的字符串。可以在要用的命令行参数之后添加这个过
-rsxrw-r-- 1 christine christine 54 May 21 11:26 my_script
当用户指定特定文件的名称作为过滤器时，1s命令只会显示该文件的信息。有时你可能不知
道要找的那个文件的确切名称。1s命令能够识别标准通配符，并在过滤器中用它们进行模式匹配：
口问号（？）代表一个字符；
口星号（）代表零个或多个字符。
问号可用于过滤器字符串中替代任意位置的单个字符。例如：
x - S
M-rV-r--
1 christine chrietine 0 May 21 13:25 my_scrapt
-rmxrw-r-- 1 christine chrietine 54 May 21 11126 my_script
---
## Page 61
第3章基本的bash shell命令
其中，过滤器my_scr?pt与目录中的两个文件匹配。类似地，星号可匹配零个或多个字符。
 18 -1 my*
-W--
1 christine christine 0 May 21 13:25 my_file
-rw-rv-r-- 1 chrietine christine _0 May 21 13:25 my_scrapt
-rwxrv-r-- 1 chrietine christine 54 May 21 11:26 my_script
使用星号找到了三个名字以my开头的文件。和问号一样，你可以把星号放在过滤器中的任
意位置。
1s -1 my_o*t
-rw-rv-r-- 1 christine chrietine 0 May 21 13:25 my_scrapt
-rwxr-r-- 1 christine chrietine 54 May 21 11:26 my_script
在过滤器中使用星号和问号被称为文件扩晟匹配（fileglobbing），指的是使用通配符进行模
式匹配的过程。通配符正式的名称叫作元宇符通配符（metacharacter wildcards）。除了星号和问
号之外，还有更多的元字符通配符可用于文件扩展匹配。可以使用中括号。
$ 18 -1 my_scr[ai]pt
-rwxrv-r-- 1 ehrietine christine 54 May 21 11:26 my_script
-rw-rv-r-- 1 chrietine christine _0 May 21 13:25 my_scrapt
在这个例子中，我们使用了中括号以及在特定位置上可能出现的两种字符：a或i。中括号表
示一个字符位置并给出多个可能的选择。可以像上面的例子那样将待选的字符列出来，也可以指
定字符范围，例如字母范围[a-i]。
 1s -1 f[a-i]11
-rv-rv-r-- 1 christine christine 0 May 21 13:44 fal1
-rv-rv-r-- 1 christine christine 0 May 21 13:44 fi11
-rv-rv-r-- 1 christine christine 0 May 21 13:44 fel1
$
另外，可以使用感叹号（！）将不需要的内容排除在外。
$ 18 -1 f[1a]11
-rw-rv-r-- 1 chrietine christine 0 May 21 13:44 fe11
-rw-rv-r-- 1 chrietine christine 0 May 21 13:44 fi11
-rw-rv-r-- 1 chrietine christine 0 May 21 13:44 fu11
在进行文件搜索时，文件扩展匹配是一个功能强大的特性。它也可以用于1s以外的其他shell
命令。本章随后的部分会有到更多相关的例子。
3.6处理文件
shell提供了很多在Linux文件系统上操作文件的命令。本节将带你逐步了解文件处理所需要
的一些基本的shell命令。
---
## Page 62
3.6处理文件
3.6.1创建文件
你总会时不时地遇到要创建空文件的情况。例如，有时应用程序希望在它们写人数据之前，
某个日志文件已经存在。这时，可用touch命令轻松创建空文件。
S touch test_one
rvrwr=- 1 chriatine chriatine 0 Kay 21 14:17 test_one
touch命令创建了你指定的新文件，并将你的用户名作为文件的属主。注意，文件的大小是
零，因为touch命令只创建了一个空文件。
touch命令还可用来改变文件的修改时间。这个操作并不需要改变文件的内容。
-rv-rw-r-- 1 chriatine chriatine 0 Kay 21 14:17 test_one
S touch test_one
-rv-rw-r-- 1 chriatine chrietine 0 May 21 14:35 test_one
test_one文件的修改时间现在已经从最初的时间14:17更新到了14:35。如果只想改变访问时
间，可用-a参数。
S touch -a test_one
rvrwr=- 1 chriatine christine 0 Kay 21 14:35 test_one
≤ 1e -1 test_one
 1s -1 --tine=atine test_one
V==*
- 1 chrigtine chriatine 0 Bay 21 14:35 teat_one
-rv-rw-r-- 1 chriatine christine 0 May 21 14:5s teat_one
在上面的例子中，要注意的是，如果只使用1s-1命令，并不会显示访问时间。这是因为默
认显示的是修改时间。要想查看文件的访问时间，需要加人另外一个参数：--time-atime。有
了这个参数，就能够显示出已经更改过的文件访问时间。
创建空文件和更改文件时间截算不上你在Linux系统中的日常工作。不过复制文件可是在使
用shell时经常要干的活儿。
3.6.2复制文件
对系统管理员来说，在文件系统中将文件和目录从一个位置复制到另一个位置可谓家常便
饭。cp命令可以完成这个任务。
在最基本的用法里，cp命令需要两个参数一源对象和目标对象：
cp source destinatlon
当source和destination参数都是文件名时，cp命令将源文件复制成一个新文件，并且以
destination命名。新文件就像全新的文件一样，有新的修改时间。
---
## Page 63
48
第3章基本的bash shell命令
$ cp test_one test_tvo