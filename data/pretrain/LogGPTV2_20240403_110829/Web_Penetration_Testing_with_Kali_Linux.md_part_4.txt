• Identify system types
• Identify available ports
• Identify running services
• Passively social engineer information
• Document findings
Step 2 – Target evaluation
Once a target is identified and researched from Reconnaissance efforts, the next
step is evaluating the target for vulnerabilities. At this point, the Penetration
Tester should know enough about a target to select how to analyze for possible
vulnerabilities or weakness. Examples for testing for weakness in how the web
application operates, identified services, communication ports, or other means.
Vulnerability Assessments and Security Audits typically conclude after this
phase of the target evaluation process.
Capturing detailed information through Reconnaissance improves accuracy
of targeting possible vulnerabilities, shortens execution time to perform target
evaluation services, and helps to avoid existing security. For example, running
a generic vulnerability scanner against a web application server would probably
alert the asset owner, take a while to execute and only generate generic details
about the system and applications. Scanning a server for a specific vulnerability
based on data obtained from Reconnaissance would be harder for the asset owner
to detect, provide a good possible vulnerability to exploit, and take seconds
to execute.
Evaluating targets for vulnerabilities could be manual or automated through
tools. There is a range of tools offered in Kali Linux grouped as a category labeled
Vulnerability Analysis. Tools range from assessing network devices to databases.
The following is the list of Target Evaluation goals:
• Evaluation targets for weakness
• Identify and prioritize vulnerable systems
• Map vulnerable systems to asset owners
• Document findings
[ 18 ]
www.it-ebooks.info
Chapter 1
Step 3 – Exploitation
This step exploits vulnerabilities found to verify if the vulnerabilities are real and what
possible information or access can be obtained. Exploitation separates Penetration
Testing services from passive services such as Vulnerability Assessments and Audits.
Exploitation and all the following steps have legal ramifications without authorization
from the asset owners of the target.
The success of this step is heavily dependent on previous efforts. Most exploits
are developed for specific vulnerabilities and can cause undesired consequences
if executed incorrectly. Best practice is identifying a handful of vulnerabilities and
developing an attack strategy based on leading with the most vulnerable first.
Exploiting targets can be manual or automated depending on the end objective.
Some examples are running SQL Injections to gain admin access to a web application
or social engineering a Helpdesk person into providing admin login credentials.
Kali Linux offers a dedicated catalog of tools titled Exploitation Tools for exploiting
targets that range from exploiting specific services to social engineering packages.
The following is the list of Exploitation goals:
• Exploit vulnerabilities
• Obtain foothold
• Capture unauthorized data
• Aggressively social engineer
• Attack other systems or applications
• Document findings
Step 4 – Privilege Escalation
Having access to a target does not guarantee accomplishing the goal of a penetration
assignment. In many cases, exploiting a vulnerable system may only give limited
access to a target's data and resources. The attacker must escalate privileges granted
to gain the access required to capture the flag, which could be sensitive data, critical
infrastructure, and so on.
Privilege Escalation can include identifying and cracking passwords, user accounts,
and unauthorized IT space. An example is achieving limited user access, identifying
a shadow file containing administration login credentials, obtaining an administrator
password through password cracking, and accessing internal application systems
with administrator access rights.
[ 19 ]
www.it-ebooks.info
Penetration Testing and Setup
Kali Linux includes a number of tools that can help gain Privilege Escalation through
the Password Attacks and Exploitation Tools catalog. Since most of these tools
include methods to obtain initial access and Privilege Escalation, they are gathered
and grouped according to their toolsets.
The following is a list of Privilege Escalation goals:
• Obtain escalated level access to system(s) and network(s)
• Uncover other user account information
• Access other systems with escalated privileges
• Document findings
Step 5 – maintaining a foothold
The final step is maintaining access by establishing other entry points into the target
and, if possible, covering evidence of the penetration. It is possible that penetration
efforts will trigger defenses that will eventually secure how the Penetration Tester
obtained access to the network. Best practice is establishing other means to access
the target as insurance against the primary path being closed. Alternative access
methods could be backdoors, new administration accounts, encrypted tunnels,
and new network access channels.
The other important aspect of maintaining a foothold in a target is removing
evidence of the penetration. This will make it harder to detect the attack thus
reducing the reaction by security defenses. Removing evidence includes erasing
user logs, masking existing access channels, and removing the traces of tampering
such as error messages caused by penetration efforts.
Kali Linux includes a catalog titled Maintaining Access focused on keeping a
foothold within a target. Tools are used for establishing various forms of backdoors
into a target.
The following is a list of goals for maintaining a foothold:
• Establish multiple access methods to target network
• Remove evidence of authorized access
• Repair systems impacting by exploitation
• Inject false data if needed
• Hide communication methods through encryption and other means
• Document findings
[ 20 ]
www.it-ebooks.info
Chapter 1
Introducing Kali Linux
The creators of BackTrack have released a new, advanced Penetration Testing
Linux distribution named Kali Linux. BackTrack 5 was the last major version of
the BackTrack distribution. The creators of BackTrack decided that to move forward
with the challenges of cyber security and modern testing a new foundation was
needed. Kali Linux was born and released on March 13th, 2013. Kali Linux is based
on Debian and an FHS-compliant filesystem.
Kali has many advantages over BackTrack. It comes with many more updated tools.
The tools are streamlined with the Debian repositories and synchronized four times
a day. That means users have the latest package updates and security fixes. The new
compliant filesystems translate into running most tools from anywhere on the system.
Kali has also made customization, unattended installation, and flexible desktop
environments strong features in Kali Linux.
Kali Linux is available for download at http://www.kali.org/.
Kali system setup
Kali Linux can be downloaded in a few different ways. One of the most popular
ways to get Kali Linux is to download the ISO image. The ISO image is available
in 32-bit and 64-bit images.
If you plan on using Kali Linux on a virtual machine such as VMware, there
is a VM image prebuilt. The advantage of downloading the VM image is that
it comes preloaded with VMware tools. The VM image is a 32-bit image with
Physical Address Extension support, or better known as PAE. In theory, a PAE
kernel allows the system to access more system memory than a traditional 32-bit
operating system. There have been some well-known personalities in the world of
operating systems that have argued for and against the usefulness of a PAE kernel.
However, the authors of this book suggest using the VM image of Kali Linux if you
plan on using it in a virtual environment.
Running Kali Linux from external media
Kali Linux can be run without installing software on a host hard drive by accessing
it from an external media source such as a USB drive or DVD. This method is simple
to enable; however, it has performance and operational implementations. Kali Linux
having to load programs from a remote source would impact performance and some
applications or hardware settings may not operate properly. Using read-only storage
media does not permit saving custom settings that may be required to make Kali Linux
operate correctly. It's highly recommended to install Kali Linux on a host hard drive.
[ 21 ]
www.it-ebooks.info
Penetration Testing and Setup
Installing Kali Linux
Installing Kali Linux on your computer is straightforward and similar to installing
other operating systems. First, you'll need compatible computer hardware. Kali
is supported on i386, amd64, and ARM (both armel and armhf) platforms. The
hardware requirements are shown in the following list, although we suggest
exceeding the minimum amount by at least three times. Kali Linux, in general,
will perform better if it has access to more RAM and is installed on newer machines.
Download Kali Linux and either burn the ISO to DVD, or prepare a USB stick with
Kali Linux Live as the installation medium. If you do not have a DVD drive or a
USB port on your computer, check out the Kali Linux Network Install.
The following is a list of minimum installation requirements:
• A minimum of 8 GB disk space for installing Kali Linux.
• For i386 and amd64 architectures, a minimum of 512MB RAM.
• CD-DVD Drive / USB boot support.
• You will also need an active Internet connection before installation. This
is very important or you will not be able to configure and access repositories
during installation.
1. When you start Kali you will be presented with a Boot Install screen.
You may choose what type of installation (GUI-based or text-based)
you would like to perform.
[ 22 ]
www.it-ebooks.info
Chapter 1
2. Select the local language preference, country, and
keyboard preferences.
3. Select a hostname for the Kali Linux host. The default
hostname is Kali.
[ 23 ]
www.it-ebooks.info
Penetration Testing and Setup
4. Select a password. Simple passwords may not work so
chose something that has some degree of complexity.
5. The next prompt asks for your timezone. Modify accordingly
and select Continue. The next screenshot shows selecting
Eastern standard time.
[ 24 ]
www.it-ebooks.info
Chapter 1
The installer will ask to set up your partitions. If you are installing Kali on a virtual
image, select Guided Install – Whole Disk. This will destroy all data on the disk
and install Kali Linux. Keep in mind that on a virtual machine, only the virtual disk
is getting destroyed. Advanced users can select manual configurations to customize
partitions. Kali also offers the option of using LVM, logical volume manager. LVM
allows you to manage and resize partitions after installation. In theory, it is supposed
to allow flexibility when storage needs change from initial installation. However,
unless your Kali Linux needs are extremely complex, you most likely will not need to
use it.
[ 25 ]
www.it-ebooks.info
Penetration Testing and Setup
6. The last window displays a review of the installation settings. If
everything looks correct, select Yes to continue the process as shown
in the following screenshot:
7. Kali Linux uses central repositories to distribute application
packages. If you would like to install these packages, you need to use
a network mirror. The packages are downloaded via HTTP protocol.
If your network uses a proxy server, you will also need to configure
the proxy settings for you network.
[ 26 ]
www.it-ebooks.info
Chapter 1
8. Kali will prompt to install GRUB. GRUB is a multi-bootloader that
gives the user the ability to pick and boot up to multiple operating
systems. In almost all cases, you should select to install GRUB. If you
are configuring your system to dual boot, you will want to make
sure GRUB recognizes the other operating systems in order for it to
give users the options to boot into an alternative operating system.
If it does not detect any other operating systems, the machine will
automatically boot into Kali Linux.
[ 27 ]
www.it-ebooks.info
Penetration Testing and Setup
9. Congratulations! You have finished installing Kali Linux. You will
want to remove all media (physical or virtual) and select Continue
to reboot your system.
[ 28 ]
www.it-ebooks.info
Chapter 1
Kali Linux and VM image first run
On some Kali installation methods, you will be asked to set the root's password.
When Kali Linux boots up, enter the root's username and the password you selected.
If you downloaded a VM image of Kali, you will need the root password. The default
username is root and password is toor.
Kali toolset overview
Kali Linux offers a number of customized tools designed for Penetration Testing.
Tools are categorized in the following groups as seen in the drop-down menu
shown in the following screenshot:
[ 29 ]
www.it-ebooks.info
Penetration Testing and Setup
• Information Gathering: These are Reconnaissance tools used to gather data
on your target network and devices. Tools range from identifying devices to
protocols used.
• Vulnerability Analysis: Tools from this section focus on evaluating systems
for vulnerabilities. Typically, these are run against systems found using the
Information Gathering Reconnaissance tools.
• Web Applications: These are tools used to audit and exploit vulnerabilities
in web servers. Many of the audit tools we will refer to in this book come
directly from this category. However web applications do not always refer
to attacks against web servers, they can simply be web-based tools for
networking services. For example, web proxies will be found under
this section.
• Password Attacks: This section of tools primarily deals with brute force or
the offline computation of passwords or shared keys used for authentication.
• Wireless Attacks: These are tools used to exploit vulnerabilities found in
wireless protocols. 802.11 tools will be found here, including tools such as
aircrack, airmon, and wireless password cracking tools. In addition, this
section has tools related to RFID and Bluetooth vulnerabilities as well. In
many cases, the tools in this section will need to be used with a wireless
adapter that can be configured by Kali to be put in promiscuous mode.
• Exploitation Tools: These are tools used to exploit vulnerabilities found
in systems. Usually, a vulnerability is identified during a Vulnerability
Assessment of a target.
• Sniffing and Spoofing: These are tools used for network packet captures,
network packet manipulators, packet crafting applications, and web
spoofing. There are also a few VoIP reconstruction applications.
• Maintaining Access: Maintaining Access tools are used once a foothold
is established into a target system or network. It is common to find
compromised systems having multiple hooks back to the attacker to
provide alternative routes in the event a vulnerability that is used by
the attacker is found and remediated.
• Reverse Engineering: These tools are used to disable an executable
and debug programs. The purpose of reverse engineering is analyzing
how a program was developed so it can be copied, modified, or lead to
development of other programs. Reverse Engineering is also used for
malware analysis to determine what an executable does or by researchers
to attempt to find vulnerabilities in software applications.
[ 30 ]
www.it-ebooks.info
Chapter 1
• Stress Testing: Stress Testing tools are used to evaluate how much data a
system can handle. Undesired outcomes could be obtained from overloading
systems such as causing a device controlling network communication to
open all communication channels or a system shutting down (also known as
a denial of service attack).
• Hardware Hacking: This section contains Android tools, which could be
classified as mobile, and Ardunio tools that are used for programming and
controlling other small electronic devices.
• Forensics: Forensics tools are used to monitor and analyze computer
network traffic and applications.
• Reporting Tools: Reporting tools are methods to deliver information found
during a penetration exercise.
• System Services: This is where you can enable and disable Kali services.
Services are grouped into BeEF, Dradis, HTTP, Metasploit, MySQL, and SSH.
There are other tools included in the Kali Linux build such as web
browsers, quick links to tune how the Kali Linux build is seen on
the network, search tools, and other useful applications.
Summary
This chapter served as an introduction to Penetration Testing Web Applications
and an overview of setting up Kali Linux. We started off defining best practices
for performing Penetration Testing services including defining risk and differences
between various services. The key takeaway is to understand what makes a
Penetration Test different from other security services, how to properly scope
a level of service and best method to perform services. Positioning the right
expectations upfront with a potential client will better qualify the opportunity
and simplify developing an acceptable scope of work.
This chapter continued with providing an overview of Kali Linux. Topics included
how to download your desired version of Kali Linux, ways to perform the installation,
and brief overview of toolsets available. The next chapter will cover how to perform
Reconnaissance on a target. This is the first and most critical step in delivering
Penetration Testing services.
[ 31 ]
www.it-ebooks.info
www.it-ebooks.info
Reconnaissance
The term Reconnaissance by definition comes from the military warfare strategy of
exploring beyond the area occupied by friendly forces to gain information about the
enemy for future analysis or attack. Reconnaissance of computer systems is similar
in nature, meaning typically a Penetration Tester or hacker will attempt to learn as
much as possible about a target's environment and system traits prior to launching
an attack. This is also known as establishing a Footprint of a target. Reconnaissance
is typically passive in nature and in many cases not illegal (however, we are not
lawyers and cannot offer legal advice) to perform as long as you don't complete a
three-way handshake with an unauthorized system.
Examples of Reconnaissance include anything from researching a target on public
sources such as Google, monitoring employee activity to learn operation patterns,
and scanning networks or systems to gather information, such as manufacture
type, operating system, and open communication ports. The more information that
can be gathered about a target brings a better chance of identifying the easiest and
fastest method to achieve a penetration goal, as well as best method to avoid existing
security. Also, alerting a target will most likely cause certain attack avenues to close
as a reaction to preparing for an attack. Kali's official slogan says this best:
"The quieter you become, the more you are able to hear"
Reconnaissance services should include heavy documentation, because data found