- date: '2014-12-01 09:33:01'
  message: '@Linuxyunwei'
  postip: 125.211.100.68
  username: 微博评论
- date: '2014-12-01 09:33:01'
  message: '//@ASTA谢: //@-神仙-: //@lidaobing:转发微博'
  postip: 125.211.100.68
  username: 微博评论
- date: '2014-12-01 09:33:01'
  message: 收藏
  postip: 125.211.100.68
  username: 微博评论
- date: '2014-12-01 09:43:21'
  message: '@我的印象笔记'
  postip: 58.248.138.4
  username: 来自 - 广东广州 的 Chrome/Windows 用户
- date: '2014-12-01 10:03:03'
  message: '@我的印象笔记'
  postip: 123.112.96.121
  username: 微博评论
- date: '2014-12-01 10:03:03'
  message: '//@ASTA谢: //@-神仙-: //@lidaobing:转发微博'
  postip: 123.112.96.121
  username: 微博评论
- date: '2014-12-01 10:03:03'
  message: '@我的印象笔记 //@n4mine: //@ASTA谢: //@-神仙-: //@lidaobing:转发微博'
  postip: 123.112.96.121
  username: 微博评论
- date: '2014-12-01 10:33:04'
  message: '//@ASTA谢: //@-神仙-: //@lidaobing:转发微博'
  postip: 125.71.90.173
  username: 微博评论
- date: '2014-12-01 12:03:01'
  message: '@我的印象笔记'
  postip: 68.180.228.107
  username: 微博评论
- date: '2014-12-01 17:33:01'
  message: 回头研究一下
  postip: 183.45.70.40
  username: 微博评论
- date: '2014-12-01 18:33:01'
  message: '@热情萧远山 @kykij @cjfeii  //@KissDev:Cool tool //@mylua: //@王关胜://@归文胜://@Linux中国:它的创建者在介绍它时称之为“strace+tcpdump+lsof+上面点缀着lua樱桃的绝妙酱汁”'
  postip: 183.63.102.193
  username: 微博评论
- date: '2014-12-01 19:03:04'
  message: 'mark//@ruochen_SH: @热情萧远山 @kykij @cjfeii //@KissDev:Cool tool //@mylua:
    //@王关胜://@归文胜://@Linux中国:它的创建者在介绍它时称之为“strace+tcpdump+lsof+上面点缀着lua樱桃的绝妙酱汁”'
  postip: 220.181.108.157
  username: 微博评论
- date: '2014-12-01 21:33:03'
  message: //@-浩泓-:转发微博
  postip: 218.30.103.250
  username: 微博评论
- date: '2014-12-01 21:33:03'
  message: '@我的印象笔记'
  postip: 218.30.103.250
  username: 微博评论
- date: '2014-12-02 00:03:09'
  message: 'm//@n4mine: //@ASTA谢: //@-神仙-: //@lidaobing:转发微博'
  postip: 122.64.127.58
  username: 微博评论
- date: '2014-12-02 00:03:09'
  message: '@我的印象笔记'
  postip: 122.64.127.58
  username: 微博评论
- date: '2014-12-02 07:33:04'
  message: '@我的印象笔记 //@团团爱荛六://@lidaobing：转发微博'
  postip: 188.165.15.13
  username: 微博评论
- date: '2014-12-02 10:33:03'
  message: '@我的印象笔记'
  postip: 218.104.143.103
  username: 微博评论
- date: '2014-12-02 20:58:50'
  message: 不错不错
  postip: 124.204.218.236
  username: mine
- date: '2014-12-06 11:33:02'
  message: '@胶布虫 @___枫恋寒'
  postip: 140.237.39.86
  username: 微博评论
- date: '2015-05-17 13:18:21'
  message: 学习了
  postip: 120.85.249.103
  username: chuyi
count:
  commentnum: 67
  favtimes: 8
  likes: 0
  sharetimes: 147
  viewnum: 34112
date: '2014-11-30 21:31:09'
editorchoice: false
excerpt: 当你需要追踪某个进程产生和接收的系统调用时，首先浮现在你脑海中的是什么？你可能会想到strace，那么你是对的。你会使用什么样的命令行工具来监控原始网络通信呢？如果你想到了tcpdump，你又作出了一个极佳的选择。而如果你碰到必须追踪打开的文件（在Unix意义上：一切皆文件）的需求，可能你会使用lsof。
  strace、tcpdump以及lsof，确实是些伟大的工具，它们应该成为每个系统管理员工具集之中的一部分，而这也正是你为什么应该爱上sysdig的原因。它是一个强大的开源工具，用于系统级别的勘察和排障，它的创建者在介绍它时称之为strace+
fromurl: http://xmodulo.com/monitor-troubleshoot-linux-server-sysdig.html
id: 4341
islctt: true
largepic: /data/attachment/album/201411/30/212928sfllnunlu88kpueo.png
permalink: /article-4341-1.html
pic: /data/attachment/album/201411/30/212928sfllnunlu88kpueo.png.thumb.jpg
related: []
reviewer: ''
selector: ''
summary: 当你需要追踪某个进程产生和接收的系统调用时，首先浮现在你脑海中的是什么？你可能会想到strace，那么你是对的。你会使用什么样的命令行工具来监控原始网络通信呢？如果你想到了tcpdump，你又作出了一个极佳的选择。而如果你碰到必须追踪打开的文件（在Unix意义上：一切皆文件）的需求，可能你会使用lsof。
  strace、tcpdump以及lsof，确实是些伟大的工具，它们应该成为每个系统管理员工具集之中的一部分，而这也正是你为什么应该爱上sysdig的原因。它是一个强大的开源工具，用于系统级别的勘察和排障，它的创建者在介绍它时称之为strace+
tags:
- 监控
- sysdig
- strace
- tcpdump
- lsof
thumb: false
title: 系统之锹sysdig：Linux服务器监控和排障利器
titlepic: false
translator: GOLinux
updated: '2014-11-30 21:31:09'
---
当你需要追踪某个进程产生和接收的系统调用时，首先浮现在你脑海中的是什么？你可能会想到strace，那么你是对的。你会使用什么样的命令行工具来监控原始网络通信呢？如果你想到了tcpdump，你又作出了一个极佳的选择。而如果你碰到必须追踪打开的文件（在Unix意义上：一切皆文件）的需求，可能你会使用lsof。
strace、tcpdump以及lsof，确实是些伟大的工具，它们应该成为每个系统管理员工具集之中的一部分，而这也正是你为什么应该爱上[sysdig](http://www.sysdig.org/)的原因。它是一个强大的开源工具，用于系统级别的勘察和排障，它的创建者在介绍它时称之为“strace+tcpdump+lsof+上面点缀着lua樱桃的绝妙酱汁”。抛开幽默不说，sysdig的最棒特性之一在于，它不仅能分析Linux系统的“现场”状态，也能将该状态保存为转储文件以供离线检查。更重要的是，你可以自定义sysdig的行为，或者甚至通过内建的（你也可以自己编写）名为凿子（chisel）的小脚本增强其功能。单独的凿子可以以脚本指定的各种风格分析sysdig捕获的事件流。
![](/data/attachment/album/201411/30/212928sfllnunlu88kpueo.png)
在本教程中，我们将探索sysdig的安装及其基本用法，在Linux上实施系统监控和排障。
### 安装Sysdig
对于本教程，由于为了简便、缩短安装流程以及版本的不可知，我们将选择使用官方网站提供的自动化安装过程。在自动化过程中，安装脚本会自动检测操作系统并安装必需的依赖包。
以root身份运行以下命令来从官方apt/yum仓库安装sysdig：
```
# curl -s https://s3.amazonaws.com/download.draios.com/stable/install-sysdig | bash 
```
![](/data/attachment/album/201411/30/213114hdh8fh9gh1bggfgf.jpg)
安装完成后，我们可以通过以下方法调用sysdig来感受一下它：
```
# sysdig 
```
我们的屏幕将马上被系统上发生的所有事件填满，对于这些信息，不便于我们做更多操作。要进一步处理，我们可以运行：
```
# sysdig -cl | less 
```
来查看可用的凿子列表。
![](/data/attachment/album/201411/30/213117v29uqfeaqjbsp2tk.jpg)
默认有以下类目可用，各个类目中分布有多个内建的凿子。
* CPU Usage：CPU使用量
* Errors：错误
* I/O
* Logs：日志
* Misc：混杂
* Net：网络
* Performance：性能
* Security：安全
* System State：系统状态
要显示指定凿子上的信息（包括详细的命令行用法），运行以下命令：