INFO
INFO
INFO
INFO
Configuration files:
Version:otopi-1.3.1(otopi-1.3.1-1.e17)
Do you want Setup to configure the firewail?
Configure WebSocket Proxy on this host
Configure Engine on this host (Yes, No)
Note:
Setup
Stage: Programs detection
Stage: Environment packages setup
Stage: Environment setup
Stage:Initializing
~]#engine-setup
Stage: Environment setup
NETWORK CONFIGURATION ==
ALL
PACKAGES
PRODUCT OPTIONS
IN ONE CONFIGURATION
rengine-setup-
[] (
[yesl:
(Yes, No) [Yes]: No
---
## Page 303
the internal cA.
Engine database, or prefer to perform that manually? (Automatic, Manual)
Automaticl:
engine to
Yes,
#设置访问密码
#数据库选项通常保持默认
[Yes]: No
#将在后续小节中介绍此设置
#此处跳过ISO域配置
系统配置项
#设置httpd服务
[WARNING] Less than 16384MB of memory is available
INEO
No)
[Yes]:
run.
Configure an NFs share on this server to be used as an Iso Domain? (Yes
Do you wish to set the application as the default page of the web server?
Organization name for certificate [example.com]:
Engine
Setup can configure the local postgresql server automatically for the
-== SYSTEM CONEIGURATION
Where is the Engine database
DATABASE CONFIGURATION
-==END OF CONFIGURATION
-==APACHE CONFIGURATION
-== OVIRT ENGINE CONFIGURATION==-
MISC
admin password:
Setup validation
CONFIGURATION=
第10章KVM虚拟化和oVirt虚拟化管理平台
rd:
located?
use SsL using a
(Local,
Remote)
[Local]:
291
---
## Page 304
292
CentoS7系统管理与运维实战
15:C1:AD:A1:12:04:44:C2:18:13:4F:34:6E:4F:21:52:CD:D4:93:C5
/etc/ovirt-engine-setup.conf.d/20-setup-ovirt-post,conf
[WARNING] Less than 16384MB of memory is available
#以下为安装结束时显示的有关访问信息
LINFO
[INFO
INFO
INFO
INFO
INFO
INFO
INFO
INFO
INFO
INFO
INFO
INFO
INFO
INFO
] Stage: Closing up
Web access is enabled at:
SSH fingerprint: B6:F6:E8:93:80:95:A1:3D:0F:6D:37:F4:B5:2F:2C:D4
] Stage: Transaction commit
] Generating post install configuration file
Internal CA
1 Configuring WebSocket Proxy
1 Stopping ovirt-fence-kdump-listener service
] Stage: Transaction setup
In order to configure firewalld,copy the files from
Please confirm installation settings (OK, Cancel) [oK]:
Engine Host FQDN
Configure Apache SSL
Set application as default page
PKI organization
Engine installation
Engine
Engine
Engine
Engine database
Host FQDN
Update Firewall
Application mode
Creating CA
Stage: Misc configuration
Stage: Package installation
Stage: Misc configuration
Stopping websocket-proxy service
Engine
Engine
=CONFIGURATION PREVIEW ==-
Creating/refreshing Engine database schema
Configuring PostgreSQL
https://ma.example.com:443/ovirt-engine
/etc/ovirt-engine/firewalld to/etc/firewalld/services
SUMMARY
database
database
database
database
database
port
host
user
host
secured
name
name validation
name
connection
:False
:localhost
:engine
ma.example.com
example.com
:engine
ma.example.com
:True
True
True
both
True
True
:False
:False
---
## Page 305
提示
情况，可能会稍有不同。
/var/1og/ovirt-engine/setup/ovirt-engine-setup-20150610195044-8gpxck.1og
[INFo] Generating answer file
安装完成后即可在浏览器中输入地址http://ipaddress/访问管理平台，如图10.14所示。
安装过程中的许多设置保持默认即可。需要注意的是，以上初始化过程根据不同的计算机
[INFO
INFO
INFO
INFO
INEO
INFO
重新初始化。
在初始化oVit管理平台的过程中可能会失败，此时可以继续使用engine-setup命令尝试
] Stage:Pre-termination
Log file is located at
1 Stage:Clean up
J Restarting httpd
l Execution of setup completed successfully
Stage:Termination
Starting engine service
An example of the required configuration for iptables can be found at
The
=END OF SUMMARY
/etc/ovirt-engine/iptables.example
udp:892
udp:7410
udp:662
udp:32769
udp:111
tcp:875
tcp:80
tcp:662
tcp:6100
tcp:5432
firewall-cmd
firewall-cmd
firewall-cmd
firewall-
firewall-
firewall-cmd -service ovirt-postgres
and execute the following commands:
udp:875
tcp:892
tcp:443
tep:32803
tcp:2049
tcp:111
cmd
-cmd -service ovirt-https
-service ovirt-nfs
-service
-service
ovirt-websocket-proxy
第10章KVM虚拟化和oVirt虚拟化管理平台
293
**
---
## Page 306
294
导菜单如图10.15所示。
实现虚拟机运行和基本管理。oVirt Node的下载地址如下所示。
始化过程中设置的admin用户登录管理。
CentOs7系统管理与运维实战
ovirt-node-iso-3.0.4-1.0.201401291204.el6作为示例安装使用。
10.2.3
下载oVirt Node光盘映像并刻录为光盘后，就可以使用光盘引导系统。引导系统后，其引
oVirt Node官方下载地址：http://resources01.phx.ovirt.org/releases/stable/iso/
oVirtNode的作用与VMware的ESXi相似，也是一个基于Linux的操作系统，主要用来
在官方提供的下载地址中，有多个版本的oVirt-node 提供下载，本例中将采用
oVirtNode安装
172.16.45.35/o
OOvirt-Engine
中文（简体）·中国
门户
欢迎使用开救式虚拟化策理器
oVirt
OPEN VIRTUALIZATION MANAGER
图10.15oVirt-node引导菜单
GRasicvidconsole
lode
local driue
图10.14oVirt管理平台
Press [Tabl to edit options
下载
Ovirt-Engine
3.0.4(1.8.201401291204.e16)
oVirt
---
## Page 307
装。接下来安装程序会要求用户选择键盘布局，如图10.17所示。
考相关资料，在BIOS 中打开硬件虚拟化支持选项。确认没有任何问题，可按Enter键继续安
虚拟化。如图10.16所示，安装程序提示没有在当前系统中检测到硬件虚拟化支持，此时可参
装或升级原有系统。
如图10.16所示。
一步安装。接下来安装程序会检测系统中是否已安装有oVirtNode，并要求选择进一步的操作，
由于oVirtNode底层仍然采用的是KVM虚拟化，因此安装程序将检测系统是否支持硬件
如果系统中已安装有oVirtNode，会在安装选择界面中显示，并提示用户选择是否重新安
oVirt Node的引导菜单中提供了比较丰富的功能选项，需要注意的是，如果选择重新安装
Quit
oUirt Node Hypervisor 3.8.4-1.0.2014B1291284.e16
Info: Ho virtualization hardware was detected on this system
Keyboard Layout Selection
Installation
Uirt Mode Hypervisor 3.0.4-1.0.201401291204.e16
lish
natlonal
<Quit)
3/57
Uirt Node Hypervisor 3.0.4-1.0.281401291204.el6
qUirt Node Hypervisor 3.0.4-1.0:281481291284.c16
Installing oUirt Mode Hypervisor
Reguire a passuord for the admin user?
图10.22oVirt Node启动界面
图10.20设置用户密码
图10.21安装完成
系统重启后界面如图10.22所示。
第10章KVM虚拟化和oVirt虚拟化管
(Done)
US
297
---
## Page 310
298
将弹出网络接口配置界面，如图10.24所示。
器地址。最后将光标移动到“Available SystemNICs”下面的网络接口卡etho上，按Enter键，
如图10.23所示。
等。进入oVirt Node系统，选择主界面左侧的“Network”，此时右侧界面将显示网络配置界面，
CentoS7系统管理与运维实战