### 优化后的文本

#### 图12: DailyTop40流的多样性指数和聚类指数：大流 vs. 小流

**图12(c)** 中，最右边的线表示大流的多样性指数，从右数第二条线表示小流的多样性指数。总体而言，大流的多样性更高。然而，令人惊讶的是，即使小流也表现出一定的多样性。例如，50%的小流覆盖了10个或更多的国家。

接下来，我们分析聚类指数。大流的聚类指数非常偏斜，几乎所有大流的聚类指数都在10个国家以内。然而，对于15%的小流，其聚类指数超过10个国家，这表明这些小流在地理上更加分散。

**图12(d)** 显示了时区多样性指数。几乎所有的大流都覆盖了世界的一半以上（即13个或更多时区）。而小流覆盖的时区数量在整个范围内均匀分布。时区聚类指数的行为与国家聚类指数类似。对于90%的大流，聚类指数为4个时区；而对于90%的小流，聚类指数跨越8个时区。

为了理解客户端时区之间的距离和间隔，我们查看了**图13** 中的半径指数。小流的半径指数范围从0（意味着90%的客户端在同一时区）到超过10（意味着客户端均匀分布在多个时区）。对于50%的小流，半径指数大于4，大约跨越两个大陆到整个世界。约65%的大流半径指数为2或更小，这意味着90%的客户端仅在一个大陆内。

#### 不同事件类型对多样性的影响

接下来，我们探讨不同事件类型是否对多样性有影响。我们将大流分为非停顿流和短流两类，并计算与前一节相同的指数。我们发现，短流在自治系统域和城市粒度上更为多样且聚类程度较低。然而，在国家和时区等更大位置粒度上，非停顿流更具多样性。无论事件类型如何，国家和时区的聚类特性相似。由于篇幅限制，我们省略了相关图表。

**图13** 中显示的非停顿流和短流的半径距离差异不大。然而，短流倾向于具有更大的半径指数，覆盖更广的世界范围。

#### 同时在线用户

在前一节中，我们分析了24小时流中客户端的属性。研究结果反映了整个24小时内请求流的所有客户端。在本节中，我们将流进一步划分为每小时段，并对所有每小时段进行相同分析，以近似同时访问流的客户端。如果存在时间效应，我们预期在较小的时间尺度下会看到较少的多样性。

**图14** 显示了国家和时区粒度下的多样性指数和聚类指数。首先，与**图12(c)** 相比，**图14(a)** 中的国家多样性指数向左移动，表明在较小的时间尺度下多样性较低。其次，聚类指数只有轻微差异，表明少数国家仍然占据主导地位，聚类特性在不同时间尺度下保持一致。

时区多样性在较小的时间尺度下也较低，如**图14(b)** 所示。时区聚类与**图12(d)** 相似。尽管时间效应显著影响多样性指数，但对主机的聚类影响较小。

#### 影响

我们发现许多流在多个粒度上都表现出多样性。最有趣的发现是，即使是小规模的流也表现出广泛的多样性。高度多样性对内容分发系统的设计有许多影响。例如，如何设计一个既能提供全球覆盖又能根据客户端数量和频道扩展的内容分发系统是一个挑战。显然，如何在网络中正确放置服务器以达到10,000个同时在线用户跨2,000个自治系统域的目标本身就是一项挑战。增加更多频道，无论是大规模还是小规模，都希望实现全球覆盖，这进一步增加了问题的复杂性。为了实现负载均衡、资源的有效利用以及在客户端分布变化时的良好性能，可能需要动态映射客户端到服务器。

### 客户端参与率和生命周期

在本节中，我们研究了客户端的参与和保留情况。我们提出了两个问题：

- 新客户是否正在加入某个事件？
- 客户的生命周期是多少？

#### 方法

我们用于此分析的数据来自DailyTop40数据集。我们的分析基于事件粒度。我们仅使用至少在3个月期间发生两次的重复事件的数据。重复事件的例子包括全天候广播电台、定期每日脱口秀节目以及每月几次的体育赛事。

为了识别不同的用户，我们使用日志中的播放器ID字段。请注意，该字段仅适用于Windows Media格式。其他两种格式的日志中该字段为空或全零。对于Windows Media，ID是唯一的，除非播放器配置为匿名。匿名ID具有特定的前缀，并从分析中移除。这消除了我们跟踪记录中一半的请求。我们假设用户的参与行为与其是否配置浏览器匿名无关。

虽然我们的分析仅针对一种流媒体格式，但我们还使用客户端IP地址来识别其他格式的独特用户。结果显示趋势相似。但由于使用IP地址作为唯一标识符存在一些弱点（如NAT、防火墙、代理和DHCP可能导致误识别），因此我们未在此论文中报告这些结果。

#### 新客户端的出生率

为了了解新客户端是否正在加入系统，我们查看了客户端出生率，定义为当天出现的新独特用户数量与当天总独特用户数量的比例。注意，“新”是指相对于数据集中之前的所有天数。例如，第一天所有用户都是新生成的，出生率为100%。第三天，只有那些在第一和第二天未出现的用户被视为新用户。**图15(a)** 显示了所有DailyTop40重复事件的平均出生率（不包括第一天）。图中的x轴是平均出生率，y轴是事件的累积分布。出生率从10%到100%不等。

**图15(b) 和 (c)** 分别显示了非停顿流和短流的出生率和独特用户数量随时间的变化。