# 【技术分享】OWASP Top Ten 2017版：得与失

#### 译文声明
本文是翻译文章，原文来源于dzone.com。译文仅供参考，具体内容及含义以原文为准。

译者：[ureallyloveme](http://bobao.360.cn/member/contribute?uid=2586341479)  
预估稿费：200RMB  
投稿方式：发送邮件至linwei#360.cn，或登录网页版在线投稿

## 引言
新版OWASP Top Ten已经发布。让我们看看一位安全研究员对2017年版本的评价及其优缺点。

OWASP Top Ten将常见的Web应用安全漏洞进行了分类，帮助团队专注于关键的安全活动。我在华盛顿大学教授Web应用程序安全课程时，结合了OWASP Top Ten及其框架。在为Security Innovation（美国知名网络安全供应商）执行应用安全评估时，我也使用它来归类和分组发现的安全漏洞。然而，随着实践中使用的增多，其优缺点也逐渐显现。

2017候选版（或称待发版）带来了一些改进，但也引入了新的问题。为了使我的建议更有效，以下按重要程度顺序列出：

1. 将A4“失效的访问控制”改为“失效的授权控制”，以明确并扩展其含义。
2. 简化A7，使其专注于日志记录/审计，这是一个可以完全独立开展的关键安全活动。
3. 删除A10“未受保护的APIs”，并在其他类别中添加有关APIs的内容，或者将该类别改为备份。

## 合并的类别
2017候选版本将2013年版中的“A4-不安全的直接对象引用”和“A7-功能级访问控制缺失”合并为一个单独的类别——“A4失效的访问控制”。我认为这是明智之举，因为它创造了一个更广泛且健壮的、集中于授权控制的类别。然而，我倾向于在该类别的标题中加入“授权”，以便更好地与其他安全框架交互。这也将与他们在A2“缺失的验证和会话管理”中使用的“验证”相呼应。

### 为什么？
新的“A4失效的访问控制”类别被描述为“对通过身份验证的用户的限制没有得到适当的强制执行”。攻击者可以利用这些漏洞访问未经授权的功能和/或数据，如访问其他用户的账户、查看敏感文件、修改其他用户的数据、更改访问权限等。A4假定用户已经通过了身份验证，并且一旦通过验证，它只专注于访问。其实还应该有一句明确且广泛采用的词语——授权。A4并不是关于失效的访问控制，因为“访问”一词在广义上不太相关。它不涉及身份验证，这已经在A2中涵盖。A4只关注与授权相关的问题，因此应将名称中的“访问”替换为“授权”。这样，其标题才能反映真正的意义和具体问题。

虽然这可能看起来只是一个语义问题，但我相信这种措辞的变化对于上下文理解和达成共识非常重要。在业界，身份验证和授权有着明确和特定的含义，因此它们应该反映在OWASP的标准中。

## 新增的类别
今年新增的两个类别是“A7-攻击检测与防范不足”和“A10-未受保护的API”。这两个新类别是为了跟上不断发展的Web应用环境而引入的。然而，我相信OWASP其他类别的覆盖范围会使这两个新类别显得多余。

### A7-攻击检测与防范不足
这个类别被定义为：“大多数应用程序和API缺乏针对手动和自动攻击的检测、防止和响应的基本能力。攻击保护远远超出了基本的输入验证，涉及自动检测、记录、响应甚至阻止攻击对漏洞利用的尝试。应用程序所有者还需要有快速部署修补程序以防止攻击的能力。”

**输入验证的作用**
A7将控件描述为“不仅仅是基本的输入验证，还涉及检测、记录、响应甚至阻止攻击对漏洞利用的尝试。”而这正是输入验证的作用——它检测到恶意或不应出现的用户输入所引发的错误，并通过去除、记录或阻止它来作出响应。如果应用程序请求一美元金额的银行转账，而用户提供的是负数，那么应用程序将识别该恶意输入并通过阻断交易来作出回应。因此，将输入验证与检测和对漏洞利用尝试的响应区分开来显然是不准确和误导性的。

### A9 和 A5 中涉及的修补
A7提到：“应用程序所有者还需要有快速部署修补程序以防止攻击的能力。”而实际上，这与A9-使用已知漏洞的组件以及A5-安全配置错误（包括“软件应该保持更新”）重复了。将修补问题单独作为一个类别显然是多余的，并且降低了分类的价值。

通过上述分析，可以看出OWASP Top Ten 2017版在改进的同时也存在一些需要进一步优化的地方。希望这些改进建议能够有助于提升OWASP Top Ten的实用性和准确性。