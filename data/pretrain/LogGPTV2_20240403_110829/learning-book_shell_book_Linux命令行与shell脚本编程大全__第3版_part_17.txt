告诉sort命令把数字识别成数字而不是字符，并且按值排序。
$sort -n file2
3
Z
10
75
45
100
145
现在好多了！另一个常用的参数是-M，按月排序。Linux的日志文件经常会在每行的起始位
置有一个时间藏，用来表明事件是什么时候发生的。
Sep 13 07:10:09testbox smartd [2718] : Device1 /dev/sda, opened
如果将含有时间藏日期的文件按默认的排序方法来排序，会得到类似于下面的结果
$ sort file3
Aug
Apr
 Dec
Feb
Jan
Ju1
Jun
May
Mar
Nov
Oct
Sep
$
这并不是想要的结果。如果用-M参数，sort命令就能识别三字符的月份名，并相应地排序。
$ sort -M file3
 Jan
 Feb
Mar
Apr
May
Jun
Ju1
Aug
Sep
Oct.
Nov
 Dec
$
还有其他一些方便的sort参数可用，如表4-6所示。
---
## Page 95
80
第4章
更多的bash shell 命令
表4-6sort命令参数
单碳折线
双破折线
描
述
-b
--gnoreLeading-blanke
排序时忽略起始的空白
-C
--cbeck=quiet
不排序，如果数据无序也不要报告
-c
--cbheck
不排序，但检查输入数据是不是已排序：未排序的话，报告
-d
--dictionary-order
仅考虑空白和字母，不考虑特殊字符
- f
--I gnoxe-ckee
默认情况下，会将大写字母排在前面，这个参数会忽略大小写
-genera]-numiber-sort
按通用数值来排序（跟-n不同，把值当浮点数来排序，支持科学
计数法表示的值）
- 1
-gnorenonprLntIng
在排序时忽略不可打印字符
大
-key=FO82 [, P082]
排序从POS1位置开始：如果指定了POS2的话，到POS2位置结
束
-X
-aont:h-8ort
用三字符月份名按月份排序
-m
-merge
将两个已排序数据文件合并
-n
--numexic-gort
按字符申数值来排序（并不转换为浮点数）
-0
--output=file
将排序结果写出到指定的文件中
-R
--randon-gort
按随机生成的散列表的键值排序
-randon-gource=FTL.E
指定-B参数用到的随机字节的源文件
--reverse
反序排序（升序变成降序）
-S
--buffer-aize=ST2E
指定使用的内存大小
- 5
-stable
禁用最后重排序比较
-T
--terporaxy-directoxy=DIR
指定一个位置来存储鞋时工作文件
-t
--fLe1d-separator=SEP
指定一个用来区分健位置的字符
--unique
和-c参数一起使用时，检查严格排序，不和-c参数一起用时，仪
输出第一例相似的两行
--zero-terminated
用NULL字符作为行尾，而不是用换行符
-k和-t参数在对按字段分隔的数据进行排序时非常有用，例如/etc/passwd文件。可以用-t
参数来指定字段分隔符，然后用-k参数来指定排序的字段。举个例子，要对前面提到的密码文件
/etc/passwd根据用户ID进行数值排序，可以这么做：
$ sort -t *:' -k 3 -n /etc/passmd
root 1x:0:0 : root : /root : /bin/bash
daemon:x12:2:daenon1/sbin:/ebin/nologin
bin1x: 1 :1:bin1/bin1/ebin/nologin
adm1x: 3 ±4:adm1 /var/adm: /sbin/no1ogin
1p1x:4:7:1p:/var/epoo1/1pd:/sbin/no1ogin
sync1x:510:aync=/ebin:/bin/eync
ha1t1x:7:0 :ba.1t: /ebin: /alin/ha1t
shutdomn1x: 6 : 0 :shutdomn1 /±bi.n1 / abin/shut down.
mail:x:8:12:mai1 :/var/egool/mai1 //&bin/nologin
news1x: 9 :13 :news 1 /etc/ners 1
uucp1x:10 :14 :uucp1 /var/spool/uucp1/sbin/no1ogi.n
operator1x:1110:operator1/root1/sbin/nologin
---
## Page 96
4.3处理数据文件
81
ganes :x: 12 : 100 : ganes : /usr /games : /abin/no1og1.n
gopher :x: 13 :30 : gopher :/vax/gophex : /abL.n/no1og 1n
ftp:x:14: 50:FTP User : /var/Etp: /sb1n/nologin
现在数据已经按第三个字段一一用户ID的数值排序。
-n参数在排序数值时非常有用，比如au命令的输出。
$ du-gh * 1 sort -nr
1008k
mrtg-2.9.29,tar.gz
972k
b1dg1
8881
fbs2-pdf
760k
680k
raync-2.6.6.tar.gz
Printtest
660k
code
516k
fig1001.tiff
496k
php-common-4 0. 4p11-6mdx. 1585 2pm
te.st.
496k
4481k
MesaGLUT6, 5 1.tar , gz
400k
p1p
注意，-r参数将结果按降序输出，这样就更容易看到目录下的哪些文件占用空间最多。
说明本例中用到的管道命令（1）将du命令的输出重定向到sort命令。我们将在第11章中进
一步讨论。
4.3.2搜索数据
你会经常需要在大文件中找一行数据，面这行数据又理藏在文件的中间。这时并不需要手动
翻看整个文件，用grep命令来帮助查找就行了。grep命令的命令行格式如下。
grep[optione]pattern[{i1e]
grep命令会在输入或指定的文件中查找包含匹配指定模式的字符的行。grep的输出就是包
含了匹配模式的行。
下面两个简单的例子演示了使用grep命令来对4.3.1节中用到的文件file1进行搜索。
$ grep three file1
thxee
$ gzep t filel
thxee
CWO
第一个例子在文件rile1中搜索能匹配模式three的文本。grep命令输出了匹配了该模式的
行。第二个例子在文件file1中搜索能匹配模式t的文本。这个例子里，file1中有两行匹配了
指定的模式，两行都输出了。
由于grep命令非常流行，它经历了大量的更新。有很多功能被加进了grep命令。如果查看
一下它的手册页面，你会发现它是多么的无所不能。
---
## Page 97
第4章更多的bash shell命令
如果要进行反向搜索（输出不匹配该模式的行），可加-v参数。
$ grep -v t file1
one
four
five
如果要显示匹配模式的行所在的行号，可加-n参数。
$ grep -n t file1
2 : two
3 :three
如果只要知道有多少行含有匹配的模式，可用-c参数。
$ grep -e t file1
$
如果要指定多个匹配模式，可用-e参数来指定每个模式。
$ grep -e t -e f file1
three
four
five
$
这个例子输出了含有字符t或字符的所有行。
默认情况下，grep命令用基本的Unix风格正则表达式来匹配模式。Unix风格正则表达式采
用特殊字符来定义怎样查找匹配的模式。
要想进一步了解正则表达式的细节，可以参考第20章的内容。
以下是在grep搜索中使用正则表达式的简单例子。
$ grep[tf] file1
three
four
five
$
正则表达式中的方括号表明grep应该搜索包含t或者r字符的匹配。如果不用正则表达式，
grep就会搜索匹配字符串tf的文本。
egrep命令是grep的一个衍生，支持POSIX扩展正则表达式。POSIX扩展正则表达式含有更
多的可以用来指定匹配模式的字符（参见第20章）。fgrep则是另外一个版本，支持将匹配模式
指定为用换行符分隔的一列固定长度的字符串。这样就可以把这列字符串放到一个文件中，然后
在fgrep命令中用其在一个大型文件中搜索字符串了。
---
## Page 98
4.3处理数据文件
83
4.3.3压缩数据
如果你接触过MicrosofWindows，就必然用过zip文件。它如此流行，以至于微软从Windows
XP开始，就已经将其集成进了自家的操作系统中。zip工具可以将大型文件（文本文件和可执行
文件）压缩成占用更少空间的小文件。
Linux包含了多种文件压缩工具。虽然听上去不错，但这实际上经常会在用户下载文件时造
成混淆。表4-7列出了Linux上的文件压缩工具。
表4-7Linux文件压缩工具
工
f
文件扩展名
描述
bzip2
.be2
采用Burmows-Wheeler块排序文本压缩算法和霍夫曼编码
Z
最初的Unix文件压缩工具，已经快没人用了
gzip
GNU压缩工具,用Lempel-Ziv编码
zip
.zip
Windows.上PKZIP工,具的Unix实现
compress文件压缩工具已经很少在Linux系统上看到了。如果下载了带.Z扩展名的文件，通
常可以用第9章中介绍的软件包安装方法来安装compress包（在很多Linux发行版上叫作
ncompress），然后再用uncompress命令来解压文件。gzip是Linux上最流行的压缩工具。
gzip软件包是GNU项目的产物。意在编写一个能够替代原先Unix中compress工具的免费版
本。这个软件包含有下面的工具。
 gzip：用来压缩文件。
gzcat：用来查看压缩过的文本文件的内容。
gunzip：用来解压文件。
这些工具基本上跟bzip2工具的用法一样。
$ gzip anyprog
-rnwxxwxr-x 1r1ch r1ch 2197 2007-0913 11:29 mypzog g2
S 1s -1 my*
S
gzip命令会压缩你在命令行指定的文件。也可以在命令行指定多个文件名甚至用通配符来
一次性批量压缩文件。
$ gzip my*
$ 1s -1 my *
-rWXr----
1 rich
rich
103 Sep
5178 Sep
6 13:43 myprog.c.gz
-IWX-XE-x
1rich
rich
59 Sep
6 13:43 myprog.gz
-IWXE
1rich
rich
6 13:44 my8eript2.gz
6 13:46 myscript.gz
WXE--[-
1rich
rich
60 Sep
gzip命令会压缩该目录中匹配通配符的每个文件。
---
## Page 99
84
第4章
更多的 bash shell命令
4.3.4归档数据