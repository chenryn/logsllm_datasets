User: How to use iptables for network firewall configuration, and provide a set of commonly used iptables rule sets.
Assistant: The steps of using iptables to configure the network firewall are as follows: 1. Install iptables Usually, iptables has been pre-installed in the Linux system. If not installed, you can use the following command to install: ```bash sudo apt-get install iptables ``` 2. Write iptables rules iptables rules are used to restrict or allow different network communications. Typically, a basic set of iptables rules should include the following: - Allow communication between localhost and localhost - Allow communication between localhost and external networks - Forbid communication between external networks and localhost - Allow certain services, such as SSH and HTTP Here is an example of a basic iptables rule set: ```bash # Clear existing rules to prevent conflicts iptables -F iptables -X # Set default rules to deny all inbound and outbound connections iptables -P INPUT DROP iptables -P OUTPUT DROP # Allow communication between local host and local host iptables -A INPUT -i lo -j ACCEPT iptables -A OUTPUT -o lo -j ACCEPT # Allow SSH connection iptables -A INPUT -p tcp --dport 22 - m state --state NEW,ESTABLISHED -j ACCEPT iptables -A OUTPUT -p tcp --sport 22 -m state --state ESTABLISHED -j ACCEPT # Allow HTTP(S) connections iptables -A INPUT -p tcp --dport 80 -m state --state NEW,ESTABLISHED -j ACCEPT iptables -A OUTPUT -p tcp --sport 80 -m state --state ESTABLISHED -j ACCEPT iptables -A INPUT -p tcp --dport 443 -m state --state NEW, ESTABLISHED -j ACCEPT iptables -A OUTPUT -p tcp --sport 443 -m state --state ESTABLISHED -j ACCEPT ``` 3. Save iptables rules On Linux systems, iptables rules are not permanent. When the system is restarted, all rules are reset. In order to save the rules, the following command can be used: ```bash sudo iptables-save > /etc/iptables.rules ``` This will save the existing rules to a file. 4. Load iptables rules To automatically load iptables rules when the system restarts, the following command can be added to the /etc/rc.local file: ```bash iptables-restore < /etc/iptables.rules ``` These steps will Set up basic iptables rules to protect your Linux server from unauthorized network access. Depending on your specific needs, you may need to adjust the rules to allow or block other types of communication. References: - [How to Set Up a Firewall with Iptables on Ubuntu 18.04](https://www.digitalocean.com/community/tutorials/how-to-set-up-a-firewall-with-iptables-on- ubuntu-18-04) - [Iptables Essentials: Common Firewall Rules and Commands](https://www.digitalocean.com/community/tutorials/iptables-essentials-common-firewall-rules-and-commands)