我们的联系邮箱是PI:EMAIL。
如果您对本书有任何疑问或建议，请您发邮件给我们，并请在邮件标题中注明本书书名，以便我们更高效地做出反馈。
如果您有兴趣出版图书、录制教学视频，或者参与图书翻译、技术审校等工作，可以发邮件给我们；有意出版图书的作者也可以到异步社区在线提交投稿（直接访问http://www.epubit.com/selfpublish/submissionwww.epubit.com/selfpublish/submission即可）。
如果您所在的学校、培训机构或企业想批量购买本书或异步社区出版的其他图书，也可以发邮件给我们。
如果您在网上发现有针对异步社区出品图书的各种形式的盗版行为，包括对图书全部或部分内容的非授权传播，请您将怀疑有侵权行为的链接发邮件给我们。您的这一举动是对作者权益的保护，也是我们持续为您提供有价值的内容的动力之源。
关于异步社区和异步图书
“异步社区”是人民邮电出版社旗下IT专业图书社区，致力于出版精品IT技术图书和相关学习产品，为作译者提供优质出版服务。异步社区创办于2015年8月，提供大量精品IT技术图书和电子书，以及高品质技术文章和视频课程。更多详情请访问异步社区官网https://www.epubit.com。
“异步图书”是由异步社区编辑团队策划出版的精品IT专业图书的品牌，依托于人民邮电出版社近30年的计算机图书出版积累和专业编辑团队，相关图书在封面上印有异步图书的LOGO。异步图书的出版领域包括软件开发、大数据、AI、测试、前端、网络技术等。
异步社区
微信服务号
第1章 赛前准备——安装
作为红队，我们并不太关心攻击的起源。相反，我们想了解攻击事件采用的战术、技术和工具。例如，在查看公共资源时，我们搜索到了FireEye公司的详细攻击分析报告。通过学习FireEye公司的分析报告，我们掌握了恶意软件使用的战术、技术和工具，主要使用了Office文件、JavaScript和PowerShell规避技术。这样，我们可以采用类似的攻击行动，检测您的公司是否可以发现这种攻击行为。
MITRE公司的攻击战术、技术和基本知识列表将APT攻击进行了详细分类。列表中包括所有类型攻击采用的战术、技术和工具。
Windows APT攻击战术、技术和基本知识如表1.1所示。
表1.1
 长期控制
 权限提升
 防御规避
 凭证获取
 探测
 访问特性
 管理访问令牌
 管理访问令牌
 管理账户
 账户发现
 AppCert Dlls
 访问特性
 二进制填充
 暴力破解
 应用程序发现
 AppInit Dlls
 AppCert Dlls
 用户账号控制规避
 凭证导出
 文件和目录发现
 应用程序兼容
 AppInit Dlls
 代码签名
 文件中凭证
 扫描网络服务
 鉴权包
 应用程序兼容
 组件固件
 漏洞利用
 网络共享发现
 Bootkit
 用户账号控制规避
 组件对象模型劫持
 强制鉴权
 外围设备发现
 浏览器扩展
 Dll搜索顺序劫持
 Dll搜索顺序劫持
 钩子
 权限分组发现
MITRE公司还提供了Mac（见表1.2）和Linux的知识列表。现在，我们将根据搜集到的关于TTP/工具/方法的所有数据，制定一个攻击方案，应用于被攻击者的公司。开展这些类型的红队攻击行动将为公司提供真实的攻击场景和防御场景。
MacOS APT攻击战术、技术和基本知识见表1.2。
表1.2
 初始控制
 执行
 长期控制
 权限提升
 防御规避
 凭证获取
 突破驱动
 AppleScript
 .bash_profile和.bashrc
 Dylib劫持
 二进制填充
 Bash历史命令
 公开访问应用程序漏洞利用
 命令行接口
 浏览器扩展
 漏洞利用提升权限
 清空历史命令
 暴力破解
 硬件植入
 客户应用程序漏洞利用
 创建账户
 运行守护进程
 代码签名
 文件中凭证
 鱼叉式网络钓鱼附件
 图形用户接口
 Dylib 劫持
 Plist修改
 禁用安全工具
 漏洞利用从而获取凭证
 鱼叉式网络钓鱼快捷方式
 Launchctl
 隐藏文件和目录
 进程注入
 利用漏洞从而规避防御
 输入捕获
 鱼叉式网络钓鱼服务
 本地任务计划
 核心模块和扩展
 Setuid和setgid
 文件删除