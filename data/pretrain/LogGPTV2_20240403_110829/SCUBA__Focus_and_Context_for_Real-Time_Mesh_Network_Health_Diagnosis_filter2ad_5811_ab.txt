routers and Internet gateways. SCUBA displays routers as blue circles and gateways as
more salient red triangles, as shown in Figure 2 and 3.
Routes: WMN routers relay client packets destined for the Internet via other routers
towards a gateway. The gateways relay packets destined for WMN clients towards the
router with which they are associated. SCUBA visualizes the routes between routers
and gateways as curved solid lines, as illustrated in Figure 2(a). In order to implement
SCUBA: Focus and Context for Real-Time Mesh Network Health Diagnosis
167
our policy of highlighting problems, the thickness of the lines is directly proportional
to the RTT value; the higher the RTT, the thicker the line. On the other hand, the sat-
uration and brightness levels of the line is inversely proportional to the throughput on
an exponential scale using the HSB color scheme; low throughput routes appear bright
red, while higher throughput routes are de-emphasized with a grey color. We also ex-
perimented with a more conventional mapping of throughput to line thickness, which
might be preferable for non-troubleshooting monitoring applications, but the presented
scheme is advantageous when high salience of trouble spots is important.
Links: MAC-layer links between nodes are visualized at the link context. The links are
visualized as dashed lines, as illustrated in Figure 2(a). To maintain our policy of high-
lighting problems, the length of white spaces between dashes are directly proportional
to the ETX value; higher the ETX value, longer are the white spaces, the more broken
the links appear. In order to make up for the reduction in saliency by the increasing gap
sizes, the thickness of the dashed lines are increased proportional to the ETX value.
This visualization feature ensures that the operators’ attention is drawn to poor quality
broken links, and less towards good quality links represented as thin solid lines.
◦
◦
and 360
Clients: The client context of SCUBA shows clients and four related metrics. These
metrics are illustrated in Figure 2(b). In this ﬁgure, the clients are placed around the
router with which they are associated, and are visualized as sectors of a circle. The sub-
, proportional to the
tended angle of the client’s sector is a value between 0
client’s percentage channel utilization share. As a result, a router with client sectors that
form a complete circle has its entire (100%) channel utilized by client frame transmis-
sions. The radius of each client sector is inversely proportional to the RSSI value of
the client’s frames received by the router. As a result, the lower the client’s RSSI, the
farther the client is placed from the router, and the larger the radius. Based on these two
visualization features of client sectors, a client with a large sector angle and large radius
is quickly seen as a potential problem because of high channel utilization and low RSSI.
The client with the largest sector area is highlighted in a bright green color, making it
easy for a WMN operator to locate all problem clients at the client context. The fourth
metric, external interference, is visualized as a grey cloud around routers, as shown in
Figure 2(c). The radius of the cloud is directly proportional to the volume of external
interference. Moreover, when the interference cloud of two or more routers overlap,
SCUBA darkens the color in the region of overlap, indicating more interference.
2.5 SCUBA Views
In this section, we discuss two views of SCUBA, planar and hyperbolic. These views
further ease the diagnosis of problems in large-scale WMNs by facilitating focus and
context interaction [2] of the WMN operator with SCUBA’s contexts. In other words,
using either of the two views operators can choose to focus on a speciﬁc location in the
view while retaining some kind of overview of the whole network, and they can zoom
to a context of their choice for further investigation of problems.
To understand the beneﬁt of these views, we use the Google WMN in Mountain
View, California, which consists of 425 routers and 66 gateways. Since we do not have
access to the actual metrics from this WMN, we use the geo-locations of the routers
168
A.P. Jardosh et al.
(a) Route context.
(b) Link context.
(c) Client context.
Fig. 3. Google WiFi mesh network using SCUBA’s planar view
to create a sample large-scale visualization environment and synthetically generate val-
ues for metrics using simple assumptions. Links between routers and their correspond-
ing ETX values are generated in loose correlation with the physical distances between
routers. Routes are computed using a shortest path algorithm between the routers and
their closest gateways. The throughput and RTT values are computed based on cumula-
tive ETX values of links utilized by the routes to the gateway. Zero or more clients are
matched with routers, such that their total count loosely approximates those published
in a recent news article presenting statistics on the Google WMN [1]. The channel uti-
lization, signal strength, and external interference metrics are randomly chosen from a
uniform distribution.
To clearly demonstrate the advantages of the focus and context visualizations of
SCUBA, in Figure 2(c) we show a screenshot of all seven metrics from each of the
three contexts displayed for the Google WMN. Because of the size of network, the
screenshot appears cluttered, thereby limiting the ability of an operator to extract any
coherent information from the view for problem diagnosis. We now discuss the two
interactive SCUBA views, how they reduce screen clutter, their advantages over each
other, as well as their trade-offs.
Planar View: SCUBA’s planar view is shown in Figure 3. The WMN and its several
contexts are rendered on a ﬂat two-dimensional plane. Figure 3(a) shows the planar
view with only the route context displayed for the entire Google WMN. Figure 3(b)
shows the link context of a small subset of the network, when the WMN operator zooms
to investigate any performance problems identiﬁed at the route context. These ﬁgures
also show an inset overview in the top-right corner that indicates the focal region in the
overall view. Further zooming reveals the client context, illustrated in Figure 3(c). The
focus region in the overview inset is seen to shrink in size, because the operator is now
zoomed to a smaller focus region.
The advantage of SCUBA’s planar view is that it maintains the geographical location
and orientation of all the routers and gateways, even while an operator changes focus
and context. However, the trade-off of planar views is that while operators are zoomed
in on lower metric contexts, they can only see the small inset overview of the whole
SCUBA: Focus and Context for Real-Time Mesh Network Health Diagnosis
169
P’
h
P’
F
P
Side
View
P
F
2-D Plane
Front
View
Hyperbolic
Surface
(a) Side and front views.
(b) With h = 1.
(c) With h = 50.
Fig. 4. Google WiFi mesh network using SCUBA’s hyperbolic view
network, which may not be sufﬁcient to alert them to possible new unusual activity. We
overcome this problem by using hyperbolic views [7].
Hyperbolic View: SCUBA uses the hyperbolic view to render routers, gateways,
clients, and their corresponding metrics on a hyperbolic surface [7]. The basic idea
of a hyperbolic view is to plot the focal point F of a two-dimensional plane at the center
of the screen, and plot the remaining points on a hyperbolic surface, centered at the fo-
cal point. Figure 4(a) illustrates the side and front of a hyperbolic surface transformed
from a simple two-dimensional planar surface. The ﬁgure shows that the non-focal lo-
cation point P on a two-dimensional plane is distorted to P’ when transformed to the
hyperbolic surface. The distortion depends on the height h of the hyperbola.
The hyperbolic view has an advantage over the planar view in that it automatically
renders different contexts of SCUBA based on the position of the node with respect to
the focal point. As shown in Figure 4(b), the node of interest forms the focal point of
the hyperbolic surface and the remaining nodes are rendered on the hyperbolic surface,
using the same orientation to the focal node as in the planar view. Also, as illustrated in
Figure 4(b), SCUBA plots all the metric contexts for the focal node and progressively
reduces the contexts for nodes further away from the focal node. As a result, only the
route context is displayed for the nodes at the edge of the hyperbolic surface. Figure 4(c)
shows that a parameter controls the depth of the hyperbolic surface, which determines
how quickly context displays are reduced between the focus node and the surface edge.
A main advantage of the hyperbolic view is that it shows a complete view of the
WMN at all times, and automatically changes contexts as the operator interactively
changes focus by mouse-dragging. As a result of this automation, the user is required
to only choose his/her focus point, and SCUBA smoothly transitions to display the new
focal region and the corresponding contexts. However, the trade-off of hyperbolic views
is that it distorts the geographic locations of the nodes from that of a planar view. As
a result of these trade-offs between the two views, SCUBA includes an inset overview
similar to the one used in the planar view and allows a WMN operator to quickly toggle
between the planar and hyperbolic views.
170
A.P. Jardosh et al.
(a) Route context shows a drop
in route throughput.
(b) Link context shows a
poor broken link.
(c) Client context shows a
client with 97.49% utilization.
Fig. 5. SCUBA used to diagnose a sample problem in the UCSB MeshNet
3 SCUBA Implementation on the UCSB MeshNet
Our main goal for SCUBA is to make it easily usable and effective in diagnosing prac-
tical WMN problems. To test this capability, we have used SCUBA to study the per-
formance of the UCSB MeshNet, an indoor WMN consisting of 14 multi-radio 802.11
a/g routers and one gateway. The routers collect, compute, and send metrics to a central
SCUBA server via the gateway over the routes. In this section, we show how SCUBA
is used to diagnose a sample performance problem within the MeshNet.
In the route context shown in Figure 5(a), the operator observes the unusually low
throughput and high RTT values of a route indicated by the thick red lines. The op-
erator zooms in the region of the route to access the link context. The link context in
Figure 5(b) clearly shows that the links utilized by the problem route have a high ETX
value, indicated by the sparsely dashed straight lines. To determine the cause, the op-
erator zooms to the client context close to the edge router using the problem route, as
shown in Figure 5(c). In this ﬁgure, the large sector of the circle representing a client
with 97.49% channel utilization looks clearly anomalous. The operator is thus assured
that a single misconﬁgured and/or misbehaving client is overloading the channel with
excess trafﬁc and adversely impacting the performance of an entire route.
The current version of SCUBA allows operators to diagnose several other perfor-
mance problems, such as a ﬂashcrowd of users overloading the network or suboptimal
route topologies caused due to poor links or interference. The set of diagnosable prob-
lems will increase with the number and type of metrics collected. Moreover, the addi-
tion of a time dimension will allow SCUBA to diagnose many more temporal problems,
such as rapid route ﬂaps and client mobility.
4 Conclusions
In this paper, we propose a focus and context visualization framework called SCUBA
for fast and efﬁcient WMN health diagnosis. SCUBA places WMN performance met-
rics into contexts and presents them in two views, planar and hyperbolic. We believe that
visualization frameworks such as SCUBA will form the most structured and efﬁcient
means of WMN health diagnosis.
SCUBA opens several new directions of research. The most prominent one is to
qualitatively and quantitatively determine the best set of metrics and contexts that fa-
cilitate comprehensive diagnosis. To do so, we believe that qualitative usability studies
SCUBA: Focus and Context for Real-Time Mesh Network Health Diagnosis
171
of SCUBA’s visualization methods and the study of various diagnostic approaches pre-
ferred by WMN operators will be very helpful. Another research direction is to reduce
the metrics’ computation and collection overhead to achieve real-time visualization ca-
pabilities. A possible future extension is to make SCUBA use a set of diagnostic rules to
automatically identify problem regions and adjust focus and context accordingly. Such
automation will immediately direct an operator’s attention to the problem and will likely
reduce diagnosis time.
SCUBA is the ﬁrst step towards interactive visualizations for fast and efﬁcient WMN
health diagnosis. We believe that as WMNs are rapidly deployed worldwide and as they
increase in complexity, the need for such visualizations will grow. Faster and efﬁcient
health diagnosis will help operators maintain their WMN’s performance and therefore
achieve the desirable economic success of the metro-scale mesh technology.
Acknowledgments
This work was funded in part by NSF Wireless Networks (WN) award CNS-0722075.
References
1. Tropos Report on Google WiFi Network,
www.muniwireless.com/article/articleview/5403
2. Card, S.K., Mackinlay, J.D., Shneiderman, B.: Readings in Information Visualization: Using
Vision to Think. Morgan Kaufmann Publishers Inc, San Francisco, CA
3. De Couto, D., Aguayo, D., Bicket, J., Morris, R.: A High-throughput Path Metric for Multi-
hop Wireless Routing. Wireless Networks 11(4), 419–434 (2005)
4. Jardosh, A.P., Ramchandran, K.N., Almeroth, K.C., Belding, E.M.: Understanding Conges-
tion in IEEE 802.11b Wireless Networks. In: Proceedings of USENIX IMC, Berkeley, CA
(October 2005)
5. Lundgren, H., Ramachandran, K.N., Belding-Royer, E.M., Almeroth, K.C., Benny, M.,
Hewatt, A., Touma, A., Jardosh, A.P.: Experiences from the Design, Deployment, and Usage
of the UCSB MeshNet Testbed. IEEE Wireless Communications Magazine 13, 18–29 (2006)
6. Marti, S., Giuli, T., Lai, K., Baker, M.: Mitigating Routing Misbehavior in Mobile Ad hoc
Networks. In: Proceedings of MOBICOM, Boston, MA, pp. 255–265 (2000)
7. Munzner, T.: Interactive Visualization of Large Graphs and Networks. PhD thesis, Stanford
University (June 2000)
8. Paxson, V.: Strategies for Sound Internet Measurement. In: Proceedings of IMC, October
2004, pp. 263–271. Taormina, Sicily (2004)
9. Qiu, L., Bahl, P., Rao, A., Zhou, L.: Troubleshooting Wireless Mesh Networks. ACM SIG-
COMM Computer Communication Review 36(5), 17–28 (2006)
10. Sommers, J., Barford, P., Willinger, W.: SPLAT: A Visualization Tool for Mining Internet
Measurements. In: Proceedings of PAM, Adelaide, Australia (March 2006)
11. Tukey, J.: Exploratory Data Analysis. Addison-Wesley, Menlo Park, CA (1977)