### PostgreSQL 连接池 pgbouncer 说明

- **单CPU支持**：pgbouncer 连接池目前仅支持单CPU环境。
- **连接复用条件**：为了实现连接复用，用户（USER）和数据库名（DBNAME）必须相同。不同用户或不同数据库之间的连接无法复用。
- **会话级变量限制**：如果存在会话级变量（例如绑定变量），则无法在不同的连接池连接之间切换。

更多关于PostgresPro内置连接池的信息，请参阅：
- [GitHub项目页面](https://github.com/postgrespro/postgresql.builtin_pool)
- [《PostgresPro 内置连接池版本 原理与测试》](../201805/20180521_03.md)

### MySQL 与 PostgreSQL 的事务隔离级别比较

- **读未提交 (RU)**：允许脏读，MySQL 支持此级别，而 PostgreSQL 不支持。实际上，脏读在大多数场景下并不常用，因为未提交的事务对数据库所做的修改通常不应被访问。
- **读已提交 (RC)**：确保只能读取到已提交的数据。
- **可重复读 (RR)**：适用于金融行业，MySQL 使用悲观锁来实现，这可能导致较差的并发性能；而 PostgreSQL 利用快照机制（乐观锁）实现，从而在高并发情况下性能损失极小。
- **串行化 (SI)**：同样适用于金融行业，MySQL 和 RR 一样使用悲观锁，影响并发性；PostgreSQL 则通过快照机制提供更优的并发性能。
- **严格串行化 (SSI)**：MySQL 不支持该隔离级别，但 PostgreSQL 支持。

### PostgreSQL 临时文件管理

- **自动清理**：当会话结束或者事务完成后，PostgreSQL 会自动清除相关的临时文件。若因某些原因导致临时文件未能及时清理，在数据库重启时也会进行相应的清理操作。
- **产生大量临时文件的原因**：执行复杂的 SQL 查询（如涉及大量的数据联接、分组聚合或排序）可能会生成外部临时文件。此外，递归查询中如果出现逻辑错误形成死循环也会导致临时文件数量激增。
- **优化建议**：对于排序操作，可以通过增加 `WORK_MEM` 参数值并启用快速排序算法以减少对外部临时文件的需求。

### POLARDB 的容量与节点限制

POLARDB 设定的最大存储容量为 100TB，并且最多可以配置 16 个计算节点。这些限制是基于市场需求及当前架构设计的安全性和可靠性考量而制定的。

### 天天象上活动概览

#### 武汉站 (2019年6月22日)

- **地点**：武汉 - 阿里巴巴创新中心, Dream咖啡厅
- **参会人数**：54人
- **主要议题**：
  1. PostgreSQL 生态与社区工作汇报
  2. Oracle 迁移上云
  3. PostgreSQL 数据库优化实践
  4. 阿里云POLARDB for PostgreSQL|Oracle 产品演进
  5. POLARDB 的DBA法宝 - AAS性能洞察
  6. 云数据库时空引擎Ganos
  7. 企业数据库辩论赛
- **参与公司**：包括斑马快跑、中移智行、武汉斗鱼等多家知名企业和机构。

#### 济南站 (2019年7月13日)

- **地点**：济南 - 齐鲁软件园
- **参会人数**：188人
- **主要议题**：
  1. PostgreSQL 生态与社区工作汇报

以上内容总结了近期关于 PostgreSQL 相关技术分享的主要讨论点及其解决方案。希望这对您有所帮助！