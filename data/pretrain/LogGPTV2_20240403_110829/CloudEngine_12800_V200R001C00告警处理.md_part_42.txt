原因1：IS-IS进程重启后，序列号从1开始递增，IS-IS收到邻居发来的序列号更大且
LSP ID相同的LSP。
原因2：与网络中其它的系统ID配置重复，导致LSP不断更新。
处理步骤
步骤1 使用命令display history-command查看本地是否执行reset isis all命令重启了IS-IS进
程。
l 如果是，请执行步骤正常运行信息，无需处理。
l 如果不是，请执行步骤2。
步骤2 使用命令display isis lsdb连续快速查看本地的LSP序列号增长是否很快，即LSP实际刷
新周期比用timer lsp-refresh命令设置的刷新周期小。
l 如果是，请执行步骤3。
l 如果不是，请执行步骤4。
步骤3 使用命令display current-configuration查看网络中是否存在其他与本地的系统ID或者虚
拟系统ID重复。
l 如果是，请执行步骤4。
文档版本 06 (2017-09-12) 华为专有和保密信息 330
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 26 IS-IS
l 如果不是，请执行步骤5。
步骤4 （请谨慎使用undo network-entity命令或者undo virtual-system命令）进入本地或与本
地的系统ID或虚拟ID重复的其他的IS-IS视图，执行undo network-entity命令或者undo
virtual-system命令，删除重复的系统ID或虚拟系统ID，再使用network-entity命令或者
virtual-system命令为配置不同的系统ID或者虚拟系统ID。检查该告警是否消除。
l 如果是，请执行步骤6。
l 如果不是，请执行步骤5。
步骤5 请收集该设备的告警信息、日志信息和配置信息，并联系技术支持人员。
步骤6 结束。
----结束
26.9 ISIS_1.3.6.1.3.37.2.0.9 isisAuthenticationTypeFailure
Trap Buffer 信息解释
The authentication type of received PDU is different from local configuration.
(isisSysInstance=[isisSysInstance], isisSysLevelIndex=[isisSysLevelIndex],
isisCircIndex=[isisCircIndex], isisCircIfIndex=[isisCircIfIndex],
isisPduFragment=[isisPduFragment], ifIndex=[ifIndex], IfName=[IfName])
收到的PDU的认证类型与本地配置不匹配。
Trap 属性
Trap属性 描述
Alarm or Event Event
Trap Severity Error
Mnemonic Code isisAuthenticationTypeFailure
Trap OID 1.3.6.1.3.37.2.0.9
Alarm ID 该Trap是事件Trap，不涉及告警ID。
Alarm Type 该Trap是事件Trap，不涉及告警类型。
Raise or Clear 该Trap是事件Trap，不涉及告警产生或恢复。
Match trap 该Trap是事件Trap，不涉及配对Trap。
Trap Buffer 信息参数
参数名称 参数含义
isisSysInstance IS-IS进程号。
文档版本 06 (2017-09-12) 华为专有和保密信息 331
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 26 IS-IS
参数名称 参数含义
isisSysLevelIndex IS-IS级别。
l 1：Level-1
l 2：Level-2
isisCircIndex 接口索引。
isisCircIfIndex 接口索引。
isisPduFragment 64字节报文头缩略。
ifIndex 接口IF索引。
IfName 接口名。
VB 信息参数
VB OID VB Name VB Index
1.3.6.1.3.37.1.1.1.1.1 isisSysInstance isisSysInstance
1.3.6.1.3.37.1.2.1.1.1 isisSysLevelIndex isisSysInstance
isisSysLevelIndex
1.3.6.1.3.37.1.3.1.1.2 isisCircIfIndex isisSysInstance
isisCircIndex
1.3.6.1.3.37.1.10.1.1.2 isisPduFragment isisSysInstance
对系统的影响
1．如果是Hello报文认证不通过，会导致IS-IS邻居建立不正常。
2．如果是LSP或者SNP认证不通过，会导致LSDB不能同步，但IS-IS邻居仍能正常建
立。
可能原因
原因1：本端在接口或进程下配置了认证。对端配置认证的类型与本端不同。
原因2：本端在接口或进程下配置了认证，而对端没有配置认证。
处理步骤
步骤1 查看告警输出信息中的sysInstance字段确定收到此报文的IS-IS进程号，查看sysLevel字
段确定此报文所在的Level（1表示Level-1报文，2表示Level-2报文，3表示P2P Hello报
文）。
步骤2 查看isisPduFragment的第2个字节，判断此报文的类型。
文档版本 06 (2017-09-12) 华为专有和保密信息 332
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 26 IS-IS
l 14：Hello报文，请执行步骤3。
l 1b：LSP，请执行步骤5。
l 11：SNP，请执行步骤6。
步骤3 对于Hello报文，isisPduFragment的第10-15字节是发送此报文的源设备的System ID。在
源上使用display isis peer命令查看发送此报文的接口。进入接口视图，使用display this
命令查看是否配置了接口认证模式并比较与本地的接口认证模式是否一致。
l 如果是，请执行步骤8。
l 如果不是，请执行步骤4。
步骤4 在源的接口视图下，使用isis authentication-mode命令将认证模式配置为与本地一致，
都是simple、MD5模式，并确保两端认证密码相同。检查告警是否消除。
l 如果是，请执行步骤8。
l 如果不是，请执行步骤7。
步骤5 在源上使用display current-configuration configuration isis命令查看IS-IS进程下是否配
置了区域认证或域认证模式并比较与本地的认证模式是否一致，确保两端认证密码相
同。
l 如果是，请执行步骤8。
l 如果不是，请执行步骤7。
步骤6 在源的IS-IS视图下，使用命令area-authentication-mode（Level-1报文）或domain-
authentication-mode（Level-2报文）将认证类型配置为与本地一致，都是simple、MD5
或者Keychain模式。查看告警是否消除。
l 如果是，请执行步骤8。
l 如果不是，请执行步骤7。
步骤7 请收集该设备的告警信息、日志信息和配置信息，并联系技术支持人员。
步骤8 结束。
----结束
26.10 ISIS_1.3.6.1.3.37.2.0.10 isisAuthenticationFailure
Trap Buffer 信息解释
The authentication password of received PDU is different from local configuration.
(isisSysInstance=[isisSysInstance], isisSysLevelIndex=[isisSysLevelIndex],
isisCircIndex=[isisCircIndex], isisCircIfIndex=[isisCircIfIndex],
isisPduFragment=[isisPduFragment], ifIndex=[ifIndex], IfName=[IfName])
收到的PDU的认证密码与本地配置不匹配。
Trap 属性
Trap属性 描述
Alarm or Event Event
文档版本 06 (2017-09-12) 华为专有和保密信息 333
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 26 IS-IS
Trap属性 描述
Trap Severity Error
Mnemonic Code isisAuthenticationFailure
Trap OID 1.3.6.1.3.37.2.0.10
Alarm ID 该Trap是事件Trap，不涉及告警ID。
Alarm Type 该Trap是事件Trap，不涉及告警类型。
Raise or Clear 该Trap是事件Trap，不涉及告警产生或恢复。
Match trap 该Trap是事件Trap，不涉及配对Trap。
Trap Buffer 信息参数
参数名称 参数含义
isisSysInstance IS-IS进程号。
isisSysLevelIndex IS-IS级别。
l 1：Level-1
l 2：Level-2
isisCircIndex 接口索引。
isisCircIfIndex 接口索引。
isisPduFragment 64字节报文头缩略。
ifIndex 接口IF索引。
IfName 接口名。
VB 信息参数
VB OID VB Name VB Index
1.3.6.1.3.37.1.1.1.1.1 isisSysInstance isisSysInstance
1.3.6.1.3.37.1.2.1.1.1 isisSysLevelIndex isisSysInstance
isisSysLevelIndex
1.3.6.1.3.37.1.3.1.1.2 isisCircIfIndex isisSysInstance
isisCircIndex
1.3.6.1.3.37.1.10.1.1.2 isisPduFragment isisSysInstance
文档版本 06 (2017-09-12) 华为专有和保密信息 334
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 26 IS-IS
对系统的影响
1．如果是Hello报文认证不通过，会导致IS-IS邻居建立不正常。
2．如果是LSP或者SNP认证不通过，会导致LSDB不能同步，但IS-IS邻居仍能正常建
立。
可能原因
本端在接口或进程下配置了认证。对端配置认证的类型与本端相同，但认证密码与本
端不同。
处理步骤
步骤1 通过告警输出信息中的参数查看收到此报文的IS-IS进程号和此报文所在的Level（1表
示Level-1报文，2表示Level-2报文，3表示P2P Hello报文）。对照ISO10589定义的IS-IS
报文格式，从告警输出信息中找到if-index字段的值（十进制）并将其转换为16进制
数。然后，从告警输出信息中找到pdu-fragment字段的内容，在pdu-fragment字段的内
容中找到发送此报文的源的System ID和报文的类型。
l 如果报文类型是Hello，请执行步骤2。
l 如果报文类型是LSP或者SNP，请执行步骤4。
表26-3 IS-IS报文类型和System ID的查找方法
报文类型的查找方法 System ID的查找方法
Hello：[pdu-fragment]字段的第5个字节的 从[pdu-fragment]字段的第10个字节开
值为0f、10或者11。 始，连续的6个字节是System ID。
LSP：[pdu-fragment]字段的第5个字节的 从[pdu-fragment]字段的第13个字节开
值为12或者14。 始，连续的6个字节是System ID。
SNP：[pdu-fragment]字段的第5个字节的 从[pdu-fragment]字段的第11个字节开
值为18、19、1A或者1B。 始，连续的6个字节是System ID。
步骤2 在源上使用display isis peer命令查看发送此报文的接口。在接口视图下使用display this
命令查看是否配置了和本地相同的接口认证密码。
l 如果是，请执行步骤6。
l 如果不是，请执行步骤3。
步骤3 在源的接口视图下，使用命令isis authentication-mode将认证密码配置为与本地一致。
查看告警是否消除。
l 如果是，请执行步骤7。
l 如果不是，请执行步骤6。
步骤4 在源上使用命令display current-configuration configuration isis查看IS-IS进程下是否配
置了和本地相同的area认证或domain认证密码。
l 如果是，请执行步骤6。
l 如果不是，请执行步骤5。
文档版本 06 (2017-09-12) 华为专有和保密信息 335
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 26 IS-IS
步骤5 在源的IS-IS视图下，使用命令area-authentication-mode（Level-1报文）或domain-
authentication-mode（Level-2报文）将认证密码配置为与本地一致。查看告警是否消
除。
l 如果是，请执行步骤7。
l 如果不是，请执行步骤6。
步骤6 请收集该设备的告警信息、日志信息和配置信息，并联系技术支持人员。
步骤7 结束。
----结束
26.11 ISIS_1.3.6.1.3.37.2.0.11 isisVersionSkew
Trap Buffer 信息解释
IS-IS received a PDU with incorrect ProtocolVersion. (isisSysInstance=[isisSysInstance],
isisSysLevelIndex=[isisSysLevelIndex], isisCircIndex=[isisCircIndex],
isisCircIfIndex=[isisCircIfIndex], isisPduProtocolVersion=[isisPduProtocolVersion],
isisPduFragment=[isisPduFragment], ifIndex=[ifIndex], IfName=[IfName])
IS-IS收到一个含错误版本号的PDU。
Trap 属性
Trap属性 描述
Alarm or Event Event
Trap Severity Critical
Mnemonic Code isisVersionSkew
Trap OID 1.3.6.1.3.37.2.0.11
Alarm ID 该Trap是事件Trap，不涉及告警ID。
Alarm Type 该Trap是事件Trap，不涉及告警类型。
Raise or Clear 该Trap是事件Trap，不涉及告警产生或恢复。
Match trap 该Trap是事件Trap，不涉及配对Trap。
Trap Buffer 信息参数
参数名称 参数含义
isisSysInstance IS-IS进程号。
文档版本 06 (2017-09-12) 华为专有和保密信息 336
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 26 IS-IS
参数名称 参数含义
isisSysLevelIndex IS-IS级别。
l 1：Level-1
l 2：Level-2
isisCircIndex 接口索引。
isisCircIfIndex 接口索引。
isisPduProtocolVersion 版本号。
isisPduFragment 64字节报文头缩略。
ifIndex 接口IF索引。
IfName 接口名。
VB 信息参数
VB OID VB Name VB Index
1.3.6.1.3.37.1.1.1.1.1 isisSysInstance isisSysInstance
1.3.6.1.3.37.1.2.1.1.1 isisSysLevelIndex isisSysInstance
isisSysLevelIndex
1.3.6.1.3.37.1.3.1.1.2 isisCircIfIndex isisSysInstance
isisCircIndex
1.3.6.1.3.37.1.10.1.1.5 isisPduProtocolVersion isisSysInstance
1.3.6.1.3.37.1.10.1.1.2 isisPduFragment isisSysInstance
对系统的影响
1．如果是单板改写报文，可能造成路由震荡，CPU使用率升高。
2．如果是互通原因产生的此告警，造成邻居无法建立，路由也无法相互学习。
可能原因
原因1：本地与其他支持的IS-IS版本号不一致。
原因2：报文传输过程中，版本号字段被改写。
处理步骤
步骤1 对照ISO10589定义的IS-IS报文格式，从告警输出信息中找到[pdu-fragment]字段（十六
进制）的内容，定位到源的System ID。并在源上查看version字段的值是否等于1。
l 如果是，请执行步骤2。
文档版本 06 (2017-09-12) 华为专有和保密信息 337
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 26 IS-IS
l 如果不是，请执行步骤4。
表26-4 IS-IS报文类型和System ID的查找方法
报文类型的查找方法 System ID的查找方法
Hello：[pdu-fragment]字段的第5个字节的 从[pdu-fragment]字段的第10个字节开始
值为0f、10或者11。 的连续6个字节是System ID。
LSP：[pdu-fragment]字段的第5个字节的 从[pdu-fragment]字段的第13个字节开始
值为12或者14。 的连续6个字节是System ID。
SNP：[pdu-fragment]字段的第5个字节的 从[pdu-fragment]字段的第11个字节开始
值为18、19、1A或者1B。 的连续6个字节是System ID。
步骤2 通过查看日志、Ping报文等手段查看是否存在单板硬件故障。
l 如果是，请执行步骤3。