### 2 信息增益 {#11.html#2-}IG 即 InformationGain，信息增益，也是一种有监督的关键词选择方法，也需要有标注信息。要理解信息增益，理解了信息熵就差不多了。信息熵，一批文本被标注了类别，那么任意挑出一条文本问你，"猜猜这是什么类别？"如果原来每个类别的文本数量都一样，那你肯定最不好猜，如果其中一个类别的文本C 数远远多于其他类别，那么你猜这条文本属于类别 C就很可能猜对。这两个情况区别就在于信息熵不同：1.  各个类别的文本数量差不多时，信息熵就比较大。2.  其中少数类别的文本数量明显较多时，信息熵就较小。进一步再想一件事，如果从这一堆文本中再挑出包含有词 W的文本数，再来猜任意一条文本的类别时，仍然会有上面两种情况。这时候考虑一个情况：如果在整个文本上的情况是1，但挑出包含词 W 后的情况变成 2 了，那么你想，这个词 W是不是非常有用？因为有了它，我们就能以较高的成功率猜对任意一条文本的类别了。对，上面这个思考过程就是信息增益的思想，信息增益计算也是分成三步：1.  统计全局文本的信息熵；2.  统计每个词的条件熵，就是知道了一个词后再统计文本的信息熵，只不过这里要分别计算包含词和不包含词两部分的信息熵，再按照各自文本比例加权平均；3.  两者相减就是每个词的信息增益。信息增益应用最广就是数据挖掘中的决策树分类算法，经典的决策树分类算法挑选分裂节点时就是计算各个属性的信息增益，始终挑选信息增益最大的节点作为分裂节点。卡方检验和信息增益不同之处在于：前者是针对每一个行为单独筛选一套标签出来，后者是全局统一筛选。这些方法都是在离线阶段批量完成的，把用户的画像生成配置成离线任务，每天更新一遍，次日就可以使用新的用户画像。那么对于一个新用户，能不能在他刚刚进入产品时就能够快速生成一个简单的画像呢？答案是：当然可以。这在后面的专栏中会讲到的MAB 问题。
## 总结 {#11.html#-}用户画像对于推荐系统还是非常必要的，而产品中属文本数据最多，那如何用文本数据构建出用户的画像内容呢？本文按照如下步骤梳理了这一过程：1.  分析用户的文本和物品的文本，使其结构化；2.  为用户挑选有信息量的结构化数据，作为其画像内容。其中，我们提出了把为用户挑选画像标签看成是特征选择问题，除了卡方检验和信息增益，你还知道有哪些特征选择方法呢？欢迎留言一起讨论。感谢你的收听，我们下次再见。![](Images/d3b48a2755db0a3707ef37007c2179c8.png){savepage-src="https://static001.geekbang.org/resource/image/87/b0/873b086966136189db14874181823fb0.jpg"}
# 【内容推荐】画鬼容易画人难：用户画像的"能"和"不能"做好一个推荐系统，总共分三步：1.  认识每一个用户；2.  给他推荐他感兴趣的东西；3.  坐等各项指标上升。开个玩笑，如果这么简单的话，那么你和我都要失业了；但是话说回来，认识用户是必须的，不过不用担心，认识用户不用请他们吃饭，这就是我们常常听说的"用户画像"这个词。今天，我就来跟你聊一聊：用户画像的那些事儿。用户画像比较抽象，就像每个人都听说过鬼，但很少有人见过。事实上，它也没有那么神秘，只是大家对它有误解，要么觉得没什么用，要么觉得它是"银弹"，可能相信后者的人略多一些，但实际上这两种看法都不准确。
## 什么是用户画像 {#12.html#-}先说说"用户画像"这个词，它对应的英文有两个：Personas 和 UserProfile。Personas属于交互设计领域的概念，不在本文讨论范围内，请出门右转去找交互设计师们聊，留下来的人，我们聊聊User Profile 这种用户画像。User Profile原本用于营销领域。营销人员需要对营销的客户有更精准的认识，从而能够更有针对性地对客户和市场制定营销方案。这个理念本身没有错，但是有一个问题：传统营销领域，是以市场销售人员为第一人称视角去看待客户的，也就是用户画像为营销人员服务。在这种用途下谈论的用户画像，和我们即将在推荐系统领域谈论的相差有点大；但是很遗憾，今天在媒体上看到的大多数"用户画像"案例分享，都停留在这个意思上。比如最常见的用户画像出现在高大上的 PPT上：用标签云的方式绘制一个人的形状，或者在一个人物形象旁边列出若干人口统计学属性，以此来表达"用户画像"这个概念。看上去非常酷炫，但是我得悄悄告诉你一个赤裸裸的真相：越酷炫的用户画像越没什么用。**为什么会这样？根本原因是：用户画像应该给机器看，而不是给人看。**既然是给机器看的，那么画像是不是酷炫、是不是像、维度是不是人类可读，都不重要。那它到底是个什么样子呢？先别急，听我慢慢讲。一个推荐系统来到这个世界上，它只有一个使命，就是要在用户（User）和物品（Item）之间建立连接。一般方式就是，对用户和物品之间的匹配评分，也就是预测用户评分或者偏好。推荐系统在对匹配评分前，则首先就要将用户和物品都向量化，这样才能进行计算。而根据推荐算法不同，向量化的方式也不同，最终对匹配评分的做法也不同，在后面讲到具体推荐算法时你会看到这一点。用户向量化后的结果，就是 UserProfile，俗称"用户画像"。**所以，用户画像不是推荐系统的目的，而是在构建推荐系统的过程中产生的一个关键环节的副产品。**另外，通常大型推荐系统一般都分为召回和排序两个阶段，这个在后面我会专门讲到。因为全量物品通常数量非常大，无法为一个用户（User）逐一计算每一个物品（Item）的评分，这时候就需要一个召回阶段，其实就是预先筛选一部分物品（Item），从而降低计算量，用户画像除了用于最终匹配评分，还要用在召回。所以，构建用户画像就要以这两个阶段为目的。
## 用户画像的关键因素 {#12.html#-}举个例子，我想去吃点夜宵，楼下有五家大排档，那么从推荐系统的思路来看，我怎么选择呢？首先就是将五家大排档向量化，我暂定向量的维度有：1.  价格，1\~5 分，最贵的 1 分，最便宜的 5 分；2.  种类，1\~5 分，只烤馒头片的是 1    分，天上飞的、海里游的、地上跑的、地里种的都有就是 5 分；3.  味道，1\~5 分，根据以前吃的，最难吃的是 1 分，最好吃的是 5 分。现在每一个大排档都有一个向量，我自己也要有一个对应的向量，就是你有多看中这三个元素：1.  价格： 1\~5 分，土豪不差钱就是 1 分，囊中羞涩就是 5 分。2.  种类： 1\~5 分，早就想好吃什么了不在乎选择多不多 1 分，看看再说就是    5 分3.  味道： 1\~5 分，只是果腹就是 1 分，资深吃货就是 5 分这样一来就可以对五家大排档做匹配打分了，你很容易得出哪家大排档最适合。假如我的向量是：价格： 3\种类： 5\味道： 5这就是一个大排档推荐系统的简单用户画像了，是不是很简单！这里可以简单计算一下：每一个因素相乘后再相加，就得到每一个大排档的评分了。接下来我来围绕这个大排档推荐系统的用户画像，看看建立用户画像的关键因素：**第一个是维度，第二个是量化。**