Prentice Hall, Englewood Cliffs, New Jersey, 1993.
REFERENCES
[1] Ravindra K. Ahuja, Thomas L. Magnanti, and James B. Orlin. Network Flows.
[2] David Applegate and Edith Cohen. Making intra-domain routing robust to
changing and uncertain traffic demands: Understanding fundamental tradeoffs.
In Proceedings of ACM SIGCOMM, pages 313–324, 2003.
[3] David Applegate, Lee Breslau, and Edith Cohen. Coping with network failures:
Routing strategies for optimal demand oblivious restoration. In Proceedings of the
Joint International Conference on Measurement and Modeling of Computer Systems,
SIGMETRICS ’04/Performance ’04, pages 270–281, 2004.
[4] Abraham Berman and Robert J. Plemmons. Nonnegative Matrices in the Math-
ematical Sciences. Classics in Applied Mathematics. Society for Industrial and
Applied Mathematics, 1994.
[5] Randeep S. Bhatia, Murali Kodialam, T. V. Lakshman, and Sudipta Sengupta.
Bandwidth guaranteed routing with fast restoration against link and node failures.
IEEE/ACM Transactions on Networking, 16(6):1321–1330, December 2008.
[6] Jeremy Bogle, Nikhil Bhatia, Manya Ghobadi, Ishai Menache, Nikolaj Bjorner,
Asaf Valadarsky, and Michael Schapira. Teavar: Striking the right utilization-
availability balance in wan traffic engineering. In Proceedings of ACM SIGCOMM,
2019. (to appear).
[7] Jonathan M. Borwein and Adrian S. Lewis. Convex analysis and nonlinear opti-
mization. Springer, New York, 2000.
[8] James H. Bramble and Bert E. Hubbard. On a finite difference analogue of an
elliptic boundary problem which is neither diagonally dominant nor of non-
negative type. Journal of Mathematics and Physics, 43(1-4):117–132, 1964.
[9] Yiyang Chang, Sanjay Rao, and Mohit Tawarmalani. Robust validation of network
designs under uncertain demands and failures. In 14𝑡ℎ USENIX Symposium on
Networked Systems Design and Implementation (NSDI), pages 347–362, 2017.
[10] Yiyang Chang, Chuan Jiang, Ashish Chandra, Sanjay Rao, and Mohit Tawar-
malani. Lancet: Better network resilience by designing for pruned failure sets.
Proceedings of the ACM on Measurement and Analysis of Computing Systems, 3:
1–26, 12 2019. doi: 10.1145/3366697.
[11] Bernard Fortz and Mikkel Thorup. Robust optimization of OSPF/IS-IS weights.
In Proceedings of International Network Optimization Conference, pages 225–230,
2003.
[12] Phillipa Gill, Navendu Jain, and Nachiappan Nagappan. Understanding network
failures in data centers: Measurement, analysis, and implications. In Proceedings
of ACM SIGCOMM, pages 350–361, 2011.
[13] P. Brighten Godfrey, Igor Ganichev, Scott Shenker, and Ion Stoica. Pathlet routing.
In Proceedings of the ACM SIGCOMM 2009 Conference on Data Communication,
page 111–122, 2009.
[14] Ramesh Govindan, Ina Minei, Mahesh Kallahalla, Bikash Koley, and Amin Vahdat.
Evolve or die: High-availability design principles drawn from googles network
infrastructure. In Proceedings of ACM SIGCOMM, pages 58–72, 2016.
segment routing. In Proceedings of IEEE INFOCOM, pages 1–9, April 2016.
[16] Renaud Hartert, Stefano Vissicchio, Pierre Schaus, Olivier Bonaventure, Clarence
Filsfils, Thomas Telkamp, and Pierre Francois. A declarative and expressive
approach to control forwarding paths in carrier-grade networks. In Proceedings
of ACM SIGCOMM, pages 15–28, 2015.
[17] Chi-Yao Hong, Srikanth Kandula, Ratul Mahajan, Ming Zhang, Vijay Gill, Mohan
Nanduri, and Roger Wattenhofer. Achieving high utilization with software-driven
wan. In Proceedings of ACM SIGCOMM, pages 15–26, 2013.
[18] Chi-Yao Hong, Subhasree Mandal, Mohammad Al-Fares, Min Zhu, Richard Alimi,
Kondapa Naidu B., Chandan Bhagat, Sourabh Jain, Jay Kaimal, Shiyu Liang,
Kirill Mendelev, Steve Padgett, Faro Rabe, Saikat Ray, Malveeka Tewari, Matt
Tierney, Monika Zahn, Jonathan Zolla, Joon Ong, and Amin Vahdat. B4 and after:
Managing hierarchy, partitioning, and asymmetry for availability and scale in
google’s software-defined wan. In Proceedings of the 2018 Conference of the ACM
Special Interest Group on Data Communication, pages 74–87, 2018.
[19] Gurobi Optimization Inc. Gurobi optimizer reference manual, 2016. http://www.
gurobi.com.
[15] Fang Hao, Murali Kodialam, and T. V. Lakshman. Optimizing restoration with
[20] Sushant Jain, Alok Kumar, Subhasree Mandal, Joon Ong, Leon Poutievski, Ar-
jun Singh, Subbaiah Venkata, Jim Wanderer, Junlan Zhou, Min Zhu, Jon Zolla,
Urs Hölzle, Stephen Stuart, and Amin Vahdat. B4: Experience with a globally-
deployed software defined wan. In Proceedings of ACM SIGCOMM, pages 3–14,
2013.
[21] Thomas J. Jech. The axiom of choice. Courier Corporation, 2008.
[22] Simon Knight, Hung Nguyen, Nickolas Falkner, Rhys Bowden, and Matthew
Roughan. The internet topology zoo. IEEE Journal on Selected Areas in Commu-
nications, 29:1765 – 1775, October 2011.
[23] Praveen Kumar, Yang Yuan, Chris Yu, Nate Foster, Robert Kleinberg, Petr La-
pukhov, Chiun Lin Lim, and Robert Soulé. Semi-oblivious traffic engineering:
The road not taken. In 15th USENIX Symposium on Networked Systems Design
and Implementation (NSDI 18), pages 157–170, 2018.
[24] Kin-Wah Kwong, Lixin Gao, Roch Guérin, and Zhi-Li Zhang. On the feasibility
and efficacy of protection routing in ip networks. IEEE/ACM Transactions on
Networking, 19(5):1543–1556, October 2011.
[25] Karthik Lakshminarayanan, Matthew Caesar, Murali Rangan, Tom Anderson,
Scott Shenker, and Ion Stoica. Achieving convergence-free routing using failure-
carrying packets. In Proceedings of ACM SIGCOMM, pages 241–252, 2007.
[26] Hongqiang Harry Liu, Srikanth Kandula, Ratul Mahajan, Ming Zhang, and David
Gelernter. Traffic engineering with forward fault correction. In Proceedings of
ACM SIGCOMM, pages 527–538, 2014.
[27] Athina Markopoulou, Gianluca Iannaccone, Supratik Bhattacharyya, Chen-Nee
Chuah, Yashar Ganjali, and Christophe Diot. Characterization of failures in an
operational ip backbone network. IEEE/ACM Trans. Netw., 16(4):749–762, 2008.
[28] P. Pan, G. Swallow, and A. Atlas. Fast Reroute Extensions to RSVP-TE for LSP
Tunnels. RFC 4090, May 2005.
[29] Michal Pióro and Deepankar Medhi. Routing, Flow, and Capacity Design in
Communication and Computer Networks. Morgan Kaufmann Publishers Inc., San
Francisco, CA, USA, 2004. ISBN 0125571895.
[30] Rahul Potharaju and Navendu Jain. When the network crumbles: An empirical
study of cloud network failures and their impact on services. In Proceedings of the
4th Annual Symposium on Cloud Computing, SOCC ’13, pages 15:1–15:17, 2013.
[31] M. Shand and S. Bryant. IP Fast Reroute Framework. RFC 5714, January 2010.
[32] Rakesh Sinha, Funda Ergun, Kostas N. Oikonomou, and K. K. Ramakrishnan.
Network design for tolerating multiple link failures using Fast Re-route (FRR).
In 2014 10th International Conference on the Design of Reliable Communication
Networks (DRCN), pages 1–8, April 2014.
[33] Martin Suchara, Dahai Xu, Robert Doverspike, David Johnson, and Jennifer
Rexford. Network architecture for joint failure recovery and traffic engineering.
SIGMETRICS Perform. Eval. Rev., 39(1):97–108, 2011.
[34] Jeff Tantsura, Igor Milojevic, Edward Crabbe, Stefano Previdi, Martin Horneffer,
Ahmed Bashandy, Rob Shakir, Clarence Filsfils, Bruno Decraene, Saku Ytti, et al.
Segment routing architecture. IETF Internet draft, 2013.
[35] Daniel Turner, Kirill Levchenko, Alex C. Snoeren, and Stefan Savage. Califor-
nia fault lines: Understanding the causes and impact of network failures. In
Proceedings of the ACM SIGCOMM 2010 Conference, pages 315–326, 2010.
[36] Hao Wang, Haiyong Xie, Lili Qiu, Yang Richard Yang, Yin Zhang, and Albert
Greenberg. COPE: Traffic engineering in dynamic networks. In Proceedings of
ACM SIGCOMM, pages 99–110, 2006.
[37] Ye Wang, Hao Wang, Ajay Mahimkar, Richard Alimi, Yin Zhang, Lili Qiu, and
Yang Richard Yang. R3: Resilient routing reconfiguration. In Proceedings of ACM
SIGCOMM, pages 291–302, 2010.
[38] Baohua Yang, Junda Liu, Scott Shenker, Jun Li, and Kai Zheng. Keep forwarding:
Towards k-link failure resilient routing. In Proceedings of IEEE INFOCOM, pages
1617–1625, April 2014.
[39] Chun Zhang, Zihui Ge, Jim Kurose, Yong Liu, and Don Towsley. Optimal routing
with multiple traffic matrices tradeoff between average and worst case perfor-
mance. In Network Protocols, 2005. ICNP 2005. 13th IEEE International Conference
on, 2005.
[40] Yin Zhang, Zihui Ge, Albert Greenberg, and Matthew Roughan. Network anomog-
raphy. In Proceedings of the 5th ACM SIGCOMM Conference on Internet Measure-
ment, pages 30–30, 2005.
[41] Jiaqi Zheng, Hong Xu, Xiaojun Zhu, Guihai Chen, and Yanhui Geng. We’ve got
you covered: Failure recovery with backup tunnels in traffic engineering. In 2016
IEEE 24th International Conference on Network Protocols (ICNP), pages 1–10, 2016.
A APPENDIX
Appendices are supporting material that has not been peer-reviewed.
Notation in PCF and FFC. In this paper, we use slightly differ-
ent notation than FFC. For example, FFC uses 𝑓 to denote a flow
aggregated by a pair of ingress-egress switches, while we use (𝑠, 𝑡)
to directly denote a flow by its ingress and egress switches. In Ta-
ble 2, we list key notation in PCF and the corresponding notation
in FFC.
Efficiently solving PCF’s models leveraging LP duality. As
presented, converting PCF’s models into LPs would create one
constraint per failure scenario which is not scalable since the failure
scenarios in 𝑌 may be large. Instead, we leverage a dualization
technique, which has been extensively used in prior work [26, 37].
We illustrate with PCF-TF, but note that the same approach may be
used for all of PCF’s schemes. We rewrite (1) as
𝑎𝑙 (1 − 𝑦𝑙) ≥ 𝑧𝑠𝑡𝑑𝑠𝑡 ∀𝑠, 𝑡 ∈ 𝑉 .
(10)

min
𝑦∈𝑌
𝑙∈𝑇 (𝑠,𝑡)
SIGCOMM ’20, August 10–14, 2020, Virtual Event, NY, USA
Chuan Jiang, Sanjay Rao, and Mohit Tawarmalani
PCF
(𝑠, 𝑡)
𝑑𝑠𝑡
𝑇 (𝑠, 𝑡)
𝑓
𝑒 ∈ 𝜏𝑙
𝑧𝑠𝑡𝑑𝑠𝑡
𝑎𝑙
FFC
𝑓
𝑑𝑓
𝑇𝑓
𝑘𝑒
𝐿[𝑡, 𝑒]
𝑏 𝑓
𝑎𝑓 ,𝑡
meaning
A flow aggregated by ingress-egress switches
The bandwidth demand of a flow
The set of tunnels that are set up for a flow
The number of link failures that PCF (FFC) pro-
tects the network against
True (1) if tunnel 𝑙 (𝑡) uses link 𝑒 and False (0)
otherwise
The bandwidth granted to a flow
The bandwidth allocated to a tunnel
Table 2: Different notation used in PCF and FFC
These constraints are reformulated by relaxing the integrality of
𝑦 variables, and expressing the LHS as a maximization problem
leveraging LP duality shown below:
−(𝑓 𝜆𝑠𝑡 +
𝜎𝑒𝑠𝑡 + 
𝑒∈𝐸
𝑙∈𝑇 (𝑠,𝑡)
𝜙𝑙)
(𝐷1) max
𝜋,𝜆,𝜎,𝜙
− 
𝑙:𝑒∈𝜏𝑙
s.t. 𝜋𝑙 + 𝜙𝑙 ≥ 𝑎𝑙 ∀𝑙 ∈ 𝑇 (𝑠, 𝑡)
𝜋𝑙 + 𝜆𝑠𝑡 + 𝜎𝑒𝑠𝑡 ≥ 0 ∀𝑒
𝜋𝑙 ≥ 0 ∀𝑙 ∈ 𝑇 (𝑠, 𝑡)
𝜆𝑠𝑡 ≥ 0
𝜎𝑒𝑠𝑡 ≥ 0 ∀𝑒 ∈ 𝐸
𝜙𝑙 ≥ 0 ∀𝑙 ∈ 𝑇 (𝑥, 𝑦).
Now, we put (𝐷1) into (10) and combine it with the rest of con-
straints in (𝑃1) to obtain the final model below.
(𝐷2) max
s.t. 
𝜎𝑒𝑠𝑡 + 
𝑙∈𝑇 (𝑠,𝑡)
𝑒∈𝐸
𝜋,𝜆,𝜎,𝜙,𝑧,𝑎
𝑙∈𝑇 (𝑠,𝑡)
Θ(𝑧)
𝑎𝑙 − (𝑓 𝜆𝑠𝑡 +

− 
𝑎𝑙 ≥ 0 ∀𝑠, 𝑡 ∈ 𝑉 , 𝑙 ∈ 𝑇 (𝑠, 𝑡)
𝑙:∀𝑠,𝑡 ∈𝑉 ,𝑙∈𝑇 (𝑠,𝑡)
𝜋𝑙 + 𝜙𝑙 ≥ 𝑎𝑙 ∀𝑠, 𝑡 ∈ 𝑉 ,∀𝑙 ∈ 𝑇 (𝑠, 𝑡)
𝜋𝑙 + 𝜆𝑠𝑡 + 𝜎𝑒𝑠𝑡 ≥ 0 ∀𝑒,∀𝑠, 𝑡 ∈ 𝑉
𝑎𝑙𝛿(𝑒 ∈ 𝜏𝑙) ≤ 𝑐𝑒 ∀𝑒 ∈ 𝐸
𝜙𝑙) ≥ 𝑧𝑠𝑡𝑑𝑠𝑡
∀𝑠, 𝑡 ∈ 𝑉
𝑙:𝑒∈𝜏𝑙
𝜋𝑙 ≥ 0 ∀𝑠, 𝑡 ∈ 𝑉 ,∀𝑙 ∈ 𝑇 (𝑠, 𝑡)
𝜆𝑠𝑡 ≥ 0 ∀𝑠, 𝑡 ∈ 𝑉