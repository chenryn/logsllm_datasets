Available onlineatwww.sciencedirect.com
ScienceDirect
CAAITransactionsonIntelligenceTechnology1(2016)61e71
http://www.journals.elsevier.com/caai-transactions-on-intelligence-technology/
Original article
Exploiting structural similarity of log files in fault diagnosis
for Web service composition
Xu Hana,*, Binyang Lib, Kam-Fai Wong c, Zhongzhi Shid
aBeijingKeyLaboratoryofElectronicSystemReliabilityTechnology,CapitalNormalUniversity,Beijing,China
bUniversityofInternationalRelations,Beijing,China
cDepartmentofSystemsEngineering&EngineeringManagement,TheChineseUniversityofHongKong,HongKong,China
dTheKeyLaboratoryofIntelligentInformationProcessing,InstituteofComputingTechnology,ChineseAcademyofSciences,Beijing,China
Availableonline7June2016
Abstract
WithincreasingdeploymentofWebservices,theresearchonthedependabilityandavailabilityofWebservicecompositionbecomesmore
andmoreactive.SinceunexpectedfaultsofWebservicecompositionmayoccurindifferentlevels atruntime,loganalysisasatypicaldata-
drivenapproachforfaultdiagnosisismoreapplicableandscalableinvariousarchitectures.Consideringthetrendthatmoreandmoreservice
logsarerepresentedusingXMLorJSONformatwhichhasgoodflexibilityandinteroperability,faultclassificationproblemofsemi-structured
logs is considered as a challenging issue in this area. However, most existing approaches focus on the log content analysis but ignore the
structuralinformationandleadtopoorperformance.Toimprovetheaccuracyoffaultclassification,weexploitstructuralsimilarityoflogfiles
andproposeasimilaritybasedBayesianlearningapproachforsemi-structuredlogsinthispaper.Oursolutionestimatesdegreesofsimilarity
amongstructuralelementsfromheterogeneouslogdata,constructscombinedBayesiannetwork(CBN),usessimilaritybasedlearningalgorithm
to compute probabilities in CBN, and classifies test log data into most probable fault categories based on the generated CBN. Experimental
resultsshowthat ourapproach outperformsother learningapproaches onstructural logdatasets.
Copyright©2016,ChongqingUniversityofTechnology.ProductionandhostingbyElsevierB.V.ThisisanopenaccessarticleundertheCC
BY-NC-NDlicense (http://creativecommons.org/licenses/by-nc-nd/4.0/).
Keywords:Webservicescomposition;Faultdiagnosis;CombinedBayesiannetwork(CBN);Similarity;Probability
1. Introduction Web services [2] and RESTful Web services [3,4]. Numerous
atomic Web services can be regarded as access points for ap-
In recent years, as a promising computing paradigm, plicationswithout relying on otherWeb services. When a user
service-oriented computing (SOC) [1] has changed theway of request cannot be fulfilled by atomic Web services, composite
design, delivery and consumption of software applications. Web service plays an important role in providing complex
Web services technology aiming at implementing service ori- collaboration and interaction between multiple Web services.
entedarchitecturehasbeenwidelyappliedtodifferentareasfor During the past ten years, a large number of existing
research or business purposes. Accordingly, more and more standards [5] for Web service composition have been defined.
business functions are published as Web services (WS) by Web service orchestration language is one of these standards
various organizations and companies. There are two main ap- for describing executable business processes, which are
proaches of developing Web services, including SOAP-based composed of Web services. Based on OASIS standards, Web
Services Business Process Execution Language (WSBPEL or
BPEL) [6] is an executable orchestration language for
* Correspondingauthor. modelingbusinessprocesseswithWebservices.Dependingon
E-mail addresses: PI:EMAIL (X. Han), PI:EMAIL (B. Li), Web service composition, business processes can be executed
PI:EMAIL(K.-F.Wong),PI:EMAIL(Z.Shi).
bythesupportofBPELenginefromathirdparty.Somerecent
PeerreviewunderresponsibilityofChongqingUniversityofTechnology.
http://dx.doi.org/10.1016/j.trit.2016.03.006
2468-2322/Copyright©2016,ChongqingUniversityofTechnology.ProductionandhostingbyElsevierB.V.ThisisanopenaccessarticleundertheCCBY-NC-
NDlicense(http://creativecommons.org/licenses/by-nc-nd/4.0/).
62 X.Hanetal./CAAITransactionsonIntelligenceTechnology1(2016)61e71
research work has focused on extending BPEL engine to orchestration [8] is supported by fine grained identification of
enable composition of SOAP-based, RESTful and OSGi ser- exception and fault causes and the consequent execution of
vices [7]. Since there are more and more Web services (esp. effective exception and fault handlers [9,10]. As an important
RESTful Web services) used in practice, the complexity of step of fault tolerance, fault diagnosis has attracted wide
Web service composition is becominghigher than before. For attention of academic community increasingly. From the
this reason, how to ensure dependability and availability is methodologyperspective,theexistingworkonfaultdiagnosis
essential for Web service composition. To enhance the inthisareacanbedividedintotwomaincategories,including
dependability of service flow execution, fault tolerant Web model-based diagnosis and data-driven diagnosis.
service orchestration [8] was proposed. As a critical aspect in Withrespecttomodel-basedapproaches,thebasicideaisto
fault tolerance framework, fault diagnosis aims at identifying modelthebehaviorandinnerlogicofthediagnosedservice,and
orlocatingthecauseswithhighprobabilitytoexplainprocess then discover runtime faults based on its model. The on-going
exceptions and failures based on runtime information. Since work has been described in some published papers. WS-
most detailed running information in processes execution is DIAMOND [11] is a European research project which eight
recordedinlogfiles,faultdiagnosisbylearningfromlogdata research agencies have participated in. In this project, model-
is becoming an important issue in this area. baseddiagnosisisadoptedastheprincipalapproach.Yanetal.
Currently, semi-structured data formats, including XML [12,13] presented a model-based approach for diagnosing
and JSON, are used as the standards of information repre- orchestrated Web service processes. In their approach, Web
sentation on the Internet. Due to its good flexibility and serviceswithfaultscanbededucedfromthevariabledependency
interoperability, more and more log files of software running on execution trajectory, which is represented by the generated
information are represented using the XML/JSON format, automata of BPEL description. With the assumption that
especially for Web services. Thus, it becomes a key topic of behavioraldescriptionsofindividualactivitiesmaynotbetotally
fault diagnosis research which focuses on analyzing semi- given, Mayer et al. [14] presented an approach of isolating
structured and XML/JSON like log. Generally, semi- minimalsetsoffaultyactivityexecutionsbasedontheprocess
structured documents have much richer structural informa- structure. Considering composite service adaption to the dy-
tion than flat ones, which has potential influence on classifi- namicexecutionenvironment,Daietal.[15]analyzedtheerror
cation accuracy. Taking this into account, the main task of propagationrelationbetweenanytwoservicesandgaveuncer-
learning from this kind of documents will have more chal- tain casual relation between exceptions and services by
lenges than before. However, for most classification methods computingerrorpropagationdegree.Inaddition,someresearch
of log analysis, IR-based methods are commonly used groupsproposedtestingframeworks[16]andhybridmodels[17]
ignoringasignificantamountofstructuralinformation,which forfaultdiagnosisofWebservicecomposition.
leads to low classification accuracy. Therefore, how to learn For data-driven approaches, the diagnosis problem is usu-
thestructuralinformationfromtheloghasgreatimpactonthe allytransformedintotheclassificationproblem.Thenitcanbe
accuracy of fault classification. solvedby using data mining and machine learning algorithms
Inthispaper,weproposeasimilarity-basedBayesianlearning on log file data. As we know, many reported research efforts
approach for fault classification of semi-structured logs. Our have focused on mining log files of computing systems. And
method is to first estimate similarity degrees of structural ele- there are some common places in log mining methods for
mentsfromheterogeneouslogdata.Thenthebasicstructureof regular computing systems and Web services. For this reason,
combined Bayesian network (CBN) is constructed, and the wecanmakereferencetothoseexistingmethodsintherelated
similarity-based learning algorithm is used to compute proba- area.Consideringthedifferencesbetweentwobasicdatatypes
bilitiesinCBN.Finally,testlogdatacanbeclassifiedintomost e plain text data and semistructured data, mining approaches
probablefaultcategoriesbasedonthegeneratedCBN. are often designed and implemented according to the type of
Therest of this paper is organized as follows. Section 2 in- training and test data. For plain-text log data, Li et al. used
troduces the related work concerning fault diagnosis of Web Bayesmethod[18,19]tocategorizetextmessagesinlogfiles,
service composition and existing classification methods for and utilize the temporal information to improve classification
(semi-)structureddocuments.Section3providesanoverviewof performance. In Ref. [20], Bayes classifier, semi-supervised
the similarity based structural classification approach and the learning, and decision trees, are used to automatically recog-
CBN model. Thedetails of CBNgeneration, including how to nize symptoms of recurrent faults. As for semi-structured log
compute probabilities of CBN using similarity-based learning data, there are also some corresponding classification ap-
algorithm,arepresentedinSection4.Experimentalresultsofthis proaches. InRef. [21],adatabaseoffailuresignaturesagainst
approach compared to other learning approaches are shown in whichundiagnosedfailuredatacanbematched,isconstructed
Section5.Finally,Section6drawstheconclusion. from monitoring data. And then anomaly-based clustering
method is proposed to generate right clusters for diag- nosing
2. Related work failures with low-confidence match. Denoyer and Gallinari
[22] provided a generative model for classification task based
Over the past years, some research work in Web services on Bayesian networks, which can handle both structure and
area has concentrated on how to enhance dependability and content. Zaki and Aggarwal [23] presented an effective rule
availability of Web services. Fault tolerant Web services based classifier for XML data using frequent discriminatory
X.Hanetal./CAAITransactionsonIntelligenceTechnology1(2016)61e71 63
substructureswithinXMLdocuments.AsaBayesianlearning
approach of semi-structured data, our approach is similar to
that given by Denoyer and Gallinari in methodology aspect.
Buttheyaredifferentinnature,becausetheirgenerativemodel
only concerns the training data in identical logic structure,
whereas our approach aims at constructing the CBN model
based on log data in different structures from heterogeneous
sources (which will be discussed later in detail).
In addition, there are other diagnosis mechanisms and
frameworksforWebservices.InRef.[24],aself-healingplug-
inforBPELengineispresented,whichcanenhancetheability
of a standard engine to provide process-based recovery ac-
tions. It only provides the self-healing mechanism at infra-
structurelevelwithoutreferringtodiagnosismethodsindetail.
Ardissono et al. [8] proposed a framework for Web Service
orchestration which employs diagnostic services to support a
fine grained identification of exception causes.
3. A Bayesian network approach to fault diagnosis
As a data-driven approach, the task of fault diagnosis is to
constructthegenerativemodelbasedonthetrainingdatafrom
semi-structured log files, and then classify test log data into
possible fault categories using this model. On account of the
heterogeneity of log file sources in practice, it is a new chal- Fig.1.FragmentsoftwosampleXMLlogfiles.
lengetodevelopmethodsoflearningfromthesemi-structured
log data, which are similar in content but not identical in differences, generating Bayesian network model from the
structure. For this reason, it is important to exploit the struc- training dataset is non-trivial. Herein, how to handle the
tural information contained in XML/JSON documents for similarity relation between schema elementsofF andF can
0 1
learningtask.Forsakeofsimplicity,wetakeXMLlogfilesas be taken as the key point. The objectiveof our approach is to
example in this paper. According to the classical representa- generatetheCBNbylearningfromallrelevantdataintraining
tion, an XML document can be considered as a tree in which dataset based on quantified similarity.
eachnoderepresentsastructuralelement.GiventwoXMLlog To give an overview of the fault diagnosis approach, we
files generated by different service execution engines, the will firstly introduce its principal steps. Suppose the schema
corresponding schema trees can be extracted from them, trees T0 and T1 are extracted from XML log files F0 and F1,
which often have similar content but slightly different struc- thenthemainstepsinthisapproachcanexpressedasfollows:
tures. In this paper, we extend our previous work [25] by
proposing an efficient online learning algorithm for the dy- 1. Estimatethenormalizedsimilaritydegreesofthenodesof
namic environment. Our main idea is to find the similarity T andT ,andthenfindthesimilarnodepairsbyignoring
0 1
between the nodes of these two trees, and then construct the those pairs whose degrees are under the threshold value.
generativemodel bylearningfromthetraining logdatabased 2. Create the basic structure of combined Bayesian network,
onsimilarity degrees. Herein, weproposecombinedBayesian which includes combination part and private part.
network as a generative model for semi-structured log data, 3. Foreachschematree,calculatethecombinationsimilarity
theprobabilitiesofwhichdependontrainingdatadistribution degreesbetweenitsnodesandcorrespondingonesinCBN,
of both corresponding elements and their counterparts with andnormalizethevaluesofcombinationsimilaritydegrees.
high similarity degrees. 4. Compute the probabilities of the constructed CBN on all
relevant data in training dataset using the similarity de-
3.1. Overview of the approach grees obtained from steps 1 and 3.
5. Given a runtime log record in XML format, use the
In this approach, the learning problem is simplified by generative CBN model to classify the test log data, and
limitingthenumberofXMLlogfilestotwo,whichconstitute diagnose possible faults according to the category it
the training dataset. (If the number of log files is more than falls in.
two, the learning problem can be transformed into the equiv-
alent one which consists of several two-file problems.) For As we see, steps 1, 3 and 4 play important role in this
example,supposetherearetwologfilesF andF asshownin approach, which are responsible for the computation of simi-
0 1
Fig. 1. We can find that F and F have similar content but larity degrees. The detailed discussion of these steps will be
0 1
slightly different structures. In view of their structural given in Section 4.
64 X.Hanetal./CAAITransactionsonIntelligenceTechnology1(2016)61e71
3.2. Modeling semi-structured log files with combined counterparts in both T0 and T1. In comparison with combi-
Bayesian networks nation group, the private group is composed of the nodes,
which only have the corresponding nodes in T (or T ).
0 1
The Bayesian network is a suitable model for representing
the dependencies and relations between different elements of 4. Similarity-based Bayesian learning for fault diagnosis
semi-structured data. On account of structural differences of
training data, we propose combined Bayesian network, which In this section, we propose a similarity-based Bayesian
ismodeledbylearningfromheterogeneoustrainingdatabased learning approach for fault diagnosis. Firstly, we introduce
on quantified similarity. As a generative model, CBN is how to estimate similarity degrees of schema elements for
capable of handling both structure and content information, constructing combined Bayesian networks. Then, we present
and can be used to classify test log data. how to learn probabilities o CBNs in detail. Finally, we give
Generally,eachlogfileconsistsofasetoflogdatarecords, the method of classifying log data records using CBNs for
which will be labeled with related fault categories. These fault diagnosis in subsection 4.3. To illustrate this learning
labeled log records constitute the training dataset. We asso- approach, we will continue to use the example given in
ciate a CBN model to each category of the training dataset. Section 3.
Sincedatarecordsinsamecategorymayhavedifferentlogical
structures, a CBN is constructed by combining structural and 4.1.EstimatingsimilaritydegreesforconstructingCBNs
content information of all data records in corresponding
category. Then, the network parameters are learned from all Since the probabilities of CBNs depend on the distribution
training data records in this category. To realize fault diag- of both corresponding data and their similar counterparts in
nosis, we classify test log data records into possible fault trainingdataset,weneedtofindthecorrespondencesbetween
categories by performing inference in constructed CBNs. thenodesofextractedschematrees.Considertheschematrees
ConsiderthesampleXMLlogfilesF0andF1inFig.1.For T andT inpreviousexample.Thereareanumberofnodesin
0 1
thetrainingdatainagivencategoryc,theschemainformation T andT which havesimilarmeaningbutdifferentnames.In
0 1
of each log record can be represented by T or T . According order to discover the correspondences between these nodes,
0 1
to this, we can construct the basic structure of CBN by we will exploit both textual and structural information of T
0
combiningT and T , which contains a set ofstructural nodes and T .
0 1 1
denoted by Ns. In addition, there are also a set of content Thetaskoffindingconsistencybetweensimilarelementsof
nodes (as the leaf nodes in CBN) denoted by Nt for repre- twoschemasisoftenregardedasmatching.Inthissubsection,
senting textual information of log data. For simplicity, the wewillestimateelementsimilaritydegreesbyschemamatch-
discussion below will mainly focus on those structural nodes. ing.Asforthematchingmethod,wehavemadeareferenceto
Fig. 2 shows the basic structure of CBN, which is a directed thesimilarityfloodingalgorithm[26].Thisalgorithmtakestwo
graphwithT andT asitssubgraphs.Infact,eachnodeinthis graphs(schemas,catalogs,orotherdatastructures)asinput,and
0 1
CBN has node c for the corresponding category as its father producesamappingbetweencorrespondingnodesofthegraphs
(which is omitted for sake of simplicity). According to as output. Based on the similarity flooding algorithm, our
quantified similarity results, the structural nodes can be methodtriestofindamappingbetweencorrespondingnodesof
divided into two groups, including combination group and theschematrees.Moreover,weutilizegradedstructuralinfor-
private group. The combination group contains the nodes mation in different stages, which can improve both of initial
which have the corresponding nodes or their similar mappingaccuracyandcomputationefficiency.Inthematching
Fault
FaultCode DetailEntries Description FaultEntries FaultString
name value Scope faultEvent