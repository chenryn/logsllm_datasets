### Component List

#### Capacitors
- **C3, C6, C9, C11, C12, C13, C14, C15, C17, C18, C19, C20, C21, C22**
  - **Manufacturer:** Kemet
  - **Part Number:** C1206C104K5RACTU
  - **Digi-Key Part Number:** 399-1249-1-ND
  - **Description:** 0.1uF ceramic capacitor, 10% tolerance, 50V, X7R, 1206 size

- **C4**
  - **Manufacturer:** Yageo
  - **Part Number:** CC1206KRX7R9BB102
  - **Digi-Key Part Number:** 311-1170-1-ND
  - **Description:** 1000pF ceramic capacitor, 10% tolerance, 50V, X7R, 1206 size

- **C5**
  - **Manufacturer:** Yageo
  - **Part Number:** CC1206KRX7R9BB471
  - **Digi-Key Part Number:** 311-1167-1-ND
  - **Description:** 470pF ceramic capacitor, 10% tolerance, 50V, X7R, 1206 size

- **C7**
  - **Manufacturer:** Kemet
  - **Part Number:** T491A106M016AS
  - **Digi-Key Part Number:** 399-3687-1-ND
  - **Description:** 10uF tantalum capacitor, 20% tolerance, 16V, size A

- **C8, C10**
  - **Manufacturer:** Kemet
  - **Part Number:** T491A475K016AT
  - **Digi-Key Part Number:** 399-3697-1-ND
  - **Description:** 4.7uF tantalum capacitor, 10% tolerance, 16V, size A

#### LED
- **D1**
  - **Manufacturer:** Kingbright
  - **Part Number:** WP59EGW
  - **Digi-Key Part Number:** 754-1232-ND
  - **Description:** Red/Green Bi-Color LED, T-1 3/4 (5mm)

#### Inductor
- **L1**
  - **Manufacturer:** TDK
  - **Part Number:** MPZ2012S221A
  - **Digi-Key Part Number:** 445-1568-1-ND
  - **Description:** Ferrite Bead Inductor, 220Ω @ 100MHz, 3A, 0805 size

#### Connectors
- **P1**
  - **Manufacturer:** Hirose Electric
  - **Part Number:** UX60-MB-5S8
  - **Digi-Key Part Number:** H2960CT-ND
  - **Description:** Mini-USB Connector, 5-pin, SMT with PCB mount

- **P2, P3, P4, P5, P6**
  - **Manufacturer:** TE Connectivity
  - **Part Number:** 282834-5
  - **Digi-Key Part Number:** A98336-ND
  - **Description:** Terminal Block Connector, 5-pin, side entry, 0.1” pitch

- **P7, P8, P9**
  - **Manufacturer:** 3M
  - **Part Number:** 961210-6404-AR
  - **Digi-Key Part Number:** 3M9460-ND
  - **Description:** Dual row Vertical Header, 2x5-pin, 0.1” pitch

#### Transistor
- **Q1**
  - **Manufacturer:** Fairchild
  - **Part Number:** MMBT3904
  - **Digi-Key Part Number:** MMBT3904FSCT-ND
  - **Description:** NPN Transistor, 40V, 200mA, SOT23-3 package

#### Resistors
- **R1, R2, R3, R4, R10**
  - **Manufacturer:** Any
  - **Part Number:** Any
  - **Digi-Key Part Number:** P10KECT-ND
  - **Description:** 10kΩ resistor, 5% tolerance, 1/4W, 1206 size

- **R5**
  - **Manufacturer:** Any
  - **Part Number:** Any
  - **Digi-Key Part Number:** P470ECT-ND
  - **Description:** 470Ω resistor, 5% tolerance, 1/4W, 1206 size

- **R6**
  - **Manufacturer:** Any
  - **Part Number:** Any
  - **Digi-Key Part Number:** P270ECT-ND
  - **Description:** 270Ω resistor, 5% tolerance, 1/4W, 1206 size

- **R7**
  - **Manufacturer:** Any
  - **Part Number:** Any
  - **Digi-Key Part Number:** P18.0KFCT-ND
  - **Description:** 18kΩ resistor, 1% tolerance, 1/4W, 1206 size

- **R8**
  - **Manufacturer:** Any
  - **Part Number:** Any
  - **Digi-Key Part Number:** P8.20KFCT-ND
  - **Description:** 8.2kΩ resistor, 1% tolerance, 1/4W, 1206 size

- **R9**
  - **Manufacturer:** Any
  - **Part Number:** Any
  - **Digi-Key Part Number:** P100KECT-ND
  - **Description:** 100kΩ resistor, 5% tolerance, 1/4W, 1206 size

- **R11, R12, R13**
  - **Manufacturer:** Bourns
  - **Part Number:** 4816P-1-102LF
  - **Digi-Key Part Number:** 4816P-1-102LFCT-ND
  - **Description:** Resistor Array, 8 isolated, 1kΩ, 2% tolerance, 1/6W, SOIC16 package

#### Switch
- **SW1**
  - **Manufacturer:** C&K
  - **Part Number:** KSC201JLFS
  - **Digi-Key Part Number:** 401-1756-1-ND
  - **Description:** SPST Momentary Switch, 120gf, 6.2 x 6.2mm, J-Lead

#### ICs
- **U1**
  - **Manufacturer:** FTDI
  - **Part Number:** FT232RL-REEL
  - **Digi-Key Part Number:** 768-1007-1-ND
  - **Description:** USB-to-UART Bridge IC, SSOP28 package

- **U2**
  - **Manufacturer:** Parallax
  - **Part Number:** P8X32A-Q44
  - **Digi-Key Part Number:** P8X32A-Q44-ND
  - **Description:** Propeller Microcontroller, LQFP44 package

- **U3**
  - **Manufacturer:** Micrel
  - **Part Number:** MIC2025-2YM
  - **Digi-Key Part Number:** 576-1058-ND
  - **Description:** Power Distribution Switch IC, Single-channel, SOIC8 package

- **U4**
  - **Manufacturer:** Microchip
  - **Part Number:** 24LC512-I/SN
  - **Digi-Key Part Number:** 24LC512-I/SN-ND
  - **Description:** Serial EEPROM Memory IC, 64KB, SOIC8 package

- **U5**
  - **Manufacturer:** Analog Devices
  - **Part Number:** AD8655ARZ
  - **Digi-Key Part Number:** AD8655ARZ-ND
  - **Description:** CMOS Rail-to-rail Op. Amp., 220mA Iout, SOIC8 package

- **U6**
  - **Manufacturer:** ST Microelectronics
  - **Part Number:** LD1117S33CTR
  - **Digi-Key Part Number:** 497-1241-1-ND
  - **Description:** Voltage Regulator IC, LDO, 3.3V @ 800mA, SOT223 package

- **U7, U8, U10, U11, U13, U14**
  - **Manufacturer:** ON Semiconductor
  - **Part Number:** NUP4302MR6T1G
  - **Digi-Key Part Number:** NUP4302MR6T1GOSCT-ND
  - **Description:** Schottky Diode Array IC, 4 channel, TSOP6 package

- **U9, U12, U15**
  - **Manufacturer:** Texas Instruments
  - **Part Number:** TXS0108EPWR
  - **Digi-Key Part Number:** 296-23011-1-ND
  - **Description:** Level Translator IC, Bi-directional, TSSOP20 package

- **Y1**
  - **Manufacturer:** ECS
  - **Part Number:** ECS-50-18-4XEN
  - **Digi-Key Part Number:** XC1738-ND
  - **Description:** Crystal, 5.0MHz, 18pF, HC49/US package

- **PCB**
  - **Description:** Fabrication of the PCB
  - **Source:** Any

### Firmware and Commands

#### General Commands
- **Set target system voltage (V):** Set the target system voltage (1.2V-3.3V)
- **Read all channels (R):** Read data from all channels
- **Write all channels (W):** Write data to all channels
- **Print available commands (H):** Print a list of available commands

#### JTAG Commands
- **Identify JTAG pinout via IDCODE scan (I):** Identify JTAG pinout using IDCODE scan
- **Identify JTAG pinout via BYPASS scan (B):** Identify JTAG pinout using BYPASS scan
- **Get Device IDs (D):** Get device IDs with known pinout
- **Test BYPASS (T):** Test BYPASS with known pinout

#### IDCODE Scan
- **32-bit Device ID:** The 32-bit device ID is available in the DR on TAP reset or IC power-up.
- **TAP Reset:** If the device ID is not available, the TAP will reset to BYPASS (LSB = 0).
- **Shift-DR State:** Simply enter the Shift-DR state and clock out on TDO. TDI is not required during IDCODE acquisition.

#### IDCODE Scan 2
- **Device ID Values:** Device ID values vary with part, family, and vendor. Refer to data sheets, BSDL files, or reference code for specific values.
- **Manufacturer ID:** Provided by JEDEC, each manufacturer has a unique identifier. Use this to validate the retrieved IDCODE.
- **JEDEC Reference:** [http://www.jedec.org/standards-documents/results/jep106](http://www.jedec.org/standards-documents/results/jep106)

#### IDCODE Scan 3
- **User Input:** Ask the user for the number of channels to use.
- **Pin Permutations:** For every possible pin permutation (except TDI):
  - Set unused channels to output high (to handle any active low reset pins).
  - Configure JTAG pins on the Propeller.
  - Reset the TAP.
  - Try to get the Device ID by reading the DR.
  - If the Device ID is 0xFFFFFFFF or if bit 0 != 1, ignore it.
  - Otherwise, display the potentially valid JTAG pinout.

#### BYPASS Scan
- **BYPASS Mode:** In BYPASS mode, data shifted into TDI is received on TDO delayed by one clock cycle.

#### BYPASS Scan 2
- **Blind Interrogation:** Determine the number of devices in the chain via "blind interrogation."
  - Force devices into BYPASS (IR of all 1s).
  - Send 1s to fill DRs.
  - Send a 0 and count until it is output on TDO.

#### BYPASS Scan 3
- **User Input:** Ask the user for the number of channels to use.
- **Pin Permutations:** For every possible pin permutation:
  - Set unused channels to output high (to handle any active low reset pins).
  - Configure JTAG pins on the Propeller.
  - Reset the TAP.
  - Perform blind interrogation.
  - If the number of detected devices > 0, display the potentially valid JTAG pinout.

### DEFCON 17 Badge
- **Freescale MC56F8006 Digital Signal Controller:**
  - **ID:** 0x01C0601D
  - **Details:** [www.bsdl.info/details.htm?sid=e82c74686c7522e88ca59b002289d77](http://www.bsdl.info/details.htm?sid=e82c74686c7522e88ca59b002289d77)

### UART Commands
- **Identify UART pinout (U):** Identify UART pinout
- **UART pass through (P):** UART pass-through with known pinout

#### UART Scan
- **User Input:** Ask the user for the desired output string (up to 16 bytes) and the number of channels to use.
- **Pin Permutations:** For every possible pin permutation:
  - Configure UART pins on the Propeller.
  - Set the baud rate.
  - Send the user string.
  - Wait to receive data (20ms maximum per byte).
  - If any bytes are received, display the potentially valid UART pinout and data (up to 16 bytes).

#### UART Scan 2
- **Configuration:** 8 data bits, no parity, 1 stop bit (8N1).
- **Baud Rates:** Stored in a look-up table (75, 110, 150, 300, 900, 1200, 1800, 2400, 3600, 4800, 7200, 9600, 14400, 19200, 28800, 31250, 38400, 57600, 76800, 115200, 153600, 230400, 250000, 307200).

### Linksys WRT54G v2 rXH (with DD-WRT)
- **Broadcom BCM4712:**
  - **ID:** 0x1471217F
  - **Details:** [https://github.com/notch/tjtag/blob/master/tjtag.c](https://github.com/notch/tjtag/blob/master/tjtag.c)
  - **UART:** JP1 (TXD = 4, RXD = 6) @ 115200, 8N1
  - **Reference:** [www.jtagtest.com/pinouts/wrt54](http://www.jtagtest.com/pinouts/wrt54)

### Scan Timing
- **IDCODE and BYPASS Scan Timing:**
  - **# of Channels:** 4, 8, 16, 24
  - **Permutations and Time:** 
    - 4 channels: 24 permutations < 00:01 (IDCODE), 24 permutations 00:02 (BYPASS)
    - 8 channels: 336 permutations 00:02 (IDCODE), 1680 permutations 02:05 (BYPASS)
    - 16 channels: 3360 permutations 00:13 (IDCODE), 43680 permutations 54:27 (BYPASS)
    - 24 channels: 12144 permutations 00:46 (IDCODE), 255024 permutations 317:54 (BYPASS)

- **UART Scan Timing:**
  - **# of Channels:** 4, 8, 16, 24
  - **Permutations and Time:**
    - 4 channels: 12 permutations 00:12
    - 8 channels: 56 permutations 00:57
    - 16 channels: 240 permutations 4:04
    - 24 channels: 552 permutations 9:22

### Possible Limitations
- **Behavior Abnormalities:** Could cause the target to behave abnormally due to "fuzzing" unknown pins.
- **OCD Interface Issues:**
  - Non-standard configuration.
  - Password-protected.
  - System expects a defined reset sequence or pin setting.
- **Physical Disconnection:** OCD interface may be physically disconnected (cut traces, missing jumpers/0 ohm resistors).
- **No OCD Interface:** No OCD interface exists.

### Future Work
- **Add Support for Other Interfaces:**
  - TI Spy-Bi-Wire
  - ARM Serial Wire Debug
  - Microchip ICSP
  - Atmel AVR ISP

### Other Uses
- **Propeller Development Board**
- **Logic Analyzer**
- **Inter-chip Communication/Probing (e.g., Bus Pirate, GoodFET)**

### Get It
- **Website:** [www.jtagulator.com](http://www.jtagulator.com)
- **Documentation:** Schematics, firmware, BOM, block diagram, Gerber plots, photos, and other engineering documentation.
- **Parallax:** [www.parallax.com](http://www.parallax.com)
- **Products:** Assembled units, bare boards, accessories

### A Poem
The End.