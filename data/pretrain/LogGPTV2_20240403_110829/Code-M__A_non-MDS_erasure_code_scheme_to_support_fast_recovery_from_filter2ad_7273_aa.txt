title:Code-M: A non-MDS erasure code scheme to support fast recovery from
up to two-disk failures in storage systems
author:Shenggang Wan and
Qiang Cao and
Changsheng Xie and
Benjamin Eckart and
Xubin He
20lO IEEEIIFIP 
International 
Conference 
on Dependable Systems 
(DSN) 
& Networks 
Code-M: A Non-MDS Erasure Code Scheme to Support Fast Recovery from up 
to Two-Disk Failures 
in Storage Systems 
Shenggang 
Wan, *Qiang 
Cao, Chang sheng Xie 
Huazhong 
School of 
Computer 
University 
Wuhan 430074, China 
Sci. and Tech. 
of Sci. and Tech. 
Ben Eckart, 
Dept. of Electrical 
Xubin He 
and Computer 
Engineering 
Tennessee 
Technological 
University 
Cookeville, 
TN 38505, USA 
hexb} @tntech.edu 
{ caoqiang, 
cs-xie} 
@mail.hust.edu.cn 
{bdeckart21, 
*Corresponding 
author 
Abstract 
In this paper, we present 
a novel coding scheme that can 
the RAID-6 prop­
satisfying 
tolerating 
Separable, 
up to two-diskfailures, 
tolerate 
erty. Our coding scheme, Code-M, is a non-MDS  (Maxi­
mum Distance 
a given amount of redundancy) 
by 
trading rate for fast recovery times. Code-M is lowest den­
sity and its parity chain length is fixed at 2C - 1 for a given 
number of columns in a strip-set 
C. The rate of Code-M, 
or percentage 
of disk space occupied 
(C -l)/C. 
code that is optimized 
maximumfailures 
with 
by non-parity 
data, is 
RAID-6 codes 
horizontal 
RAID-6 storage 
system is 
The first k disk drives are 
data, and the last two, named P and 
6 codes [18, 3, 1, 5, 2, 15, 14] and vertical 
[4,24, 11]. A typical 
composed of k+2 disk drives. 
used to store original 
Q, are used as parity disk drives. 
6 codes have a common disadvantage 
be read to recover 
duces the reconstruction performance 
of single disk or double disk failures. 
been proposed 
including 
have similar 
MDS RAID-
that k elements 
must 
re­
cyclic-codes, 
any other element. 
as horizontal 
that disperse 
weaknesses 
Horizontal 
MDS codes. 
and P-codes, but they still 
X-codes, 
Vertical 
the parity 
codes have 
This limitation 
across all disk drives, 
during the occurrence 
analysis 
We perform theoretical 
and evaluation 
of the 
Our theo­
recon­
analysis 
times compared 
to RDP, another 
coding scheme under different configurations. 
retical 
shows that Code-M has favorable 
struction 
RAID-6 code. The quantitative 
of Code-M 
against 
improve­
ment by a factor of up to 5.18 under single disk failure 
2.8 under double failures 
Overall, Code-M is a RAID-6 type code supporting 
covery with reduced 
comparisons 
recovery performance 
RDP demonstrate 
I/O complexity. 
using the same number of disks. 
fast re­
and 
well-established 
1 Introduction 
Ever since Patterson 
et al [13] brought the concept of 
Inexpensive 
or Independent 
it has become one of the most 
Arrays  of 
systems, 
RAID (Redundant 
Disks) into storage 
popular 
choices 
mance storage 
tary cost. In recent years, however, 
much attention 
failures 
increasing 
importance 
services 
to supply high reliability 
spatial 
with acceptable 
and high perfor­
and mone­
due to the fact that it can tolerate 
concurrent 
RAID-6 has received 
of any two disks, which has been shown to be of 
trends [5, 17]. 
into horizontal 
due to technological 
can be categorized 
RAID-
RAID-6 codes 
disk drive failures.  Unfortunately,  these 
and reconstruction 
code designers 
The performance 
of the read/write 
are of great concern to erasure 
and largely 
reconstruction 
approach 
performance. 
These 
reduce the num­
of one parity 
el­
For 
has been done in this area [16, 20, 22, 
to 
taking part in the generation 
increasing 
operations 
and much research 
6,23]. Non-MDS codes [7, 8, 10] are another 
break the bottleneck 
of reconstruction 
codes use more parity 
elements 
ber of elements 
ement, thereby 
example, 
concurrent multiple 
methods suffer from low rate, as low as 50%. The RAID-
6 form of HoVer codes gets extremely 
performance 
failures, 
is even less than the traditional 
there are spare elements 
spatial 
but in other cases the reconstruction 
in HoVer codes, which also is a 
cases of single and double disk drive 
in certain 
problem. 
utility 
WEAVER codes mostly focus on how to tolerate 
performance. 
performance 
MDS codes. Furthermore, 
high reconstruction 
Most of the time, RAlD-6 is in normal mode. Single 
are the next most likely 
being rare. We consider 
disk failures 
failures 
new scheme, named Code-Mixed, 
build RAlD-6 codes that partition 
strips 
up to two concurrent 
and deploy more parity elements 
mode with double disk 
these cases and propose a 
or Code-M for short, to 
stripes 
We seek to improve the 
disk failures. 
in order to tolerate 
into equal-sized 
978-1-4244-7501-8/10/$26.00 
©2010 IEEE 
51 
DSN 2010: Wan et al. 
Authorized licensed use limited to: Tsinghua University. Downloaded on March 19,2021 at 07:14:18 UTC from IEEE Xplore.  Restrictions apply. 
2010 IEEEIIFIP 
International 
Conference 
on Dependable Systems 
(DSN) 
& Networks 
recovery 
performance 
of RAID-6 under faulty conditions. 
• Vertical 
Code: An erasure 
code where there are both 
We make the following 
contributions 
in this paper: 
data elements 
and parity elements 
in a strip. 
1. We describe 
Code-M, a non-MDS RAID-6 construc­
tion based on strip-sets 
with better recovery 
codes at a small rate cost. 
to easily build RAID-6 codes 
than MDS RAID-6 
performance 
2. The new scheme makes lowest density 
codes that offer 
which means a 
complexity, 
short write/update 
on an element would result 
optimal 
write/update 
additional 
on 
an element of a RAID-6 code would incur at least two 
additional 
writes to the asso­
ciated parity elements 
reads and two additional 
I/O seeks (Typically, 
[8]). 
in minimum 
a short write/update 
3. The new scheme consistently 
decreases 
the I/O and 
complexity 
of reconstruction 
computational 
graded mode with single disk drive failure. 
ple, compared with RDP codes using 12 disk drives, 
Code-M takes 30% percent 
array of 30 disks, Code-M demonstrates 
recovery 
less time on average. 
In an 
a speedup of 
by a factor of 
up to 5.18. 
For exam­
in de­
4. In degraded 
mode with double disk drive failures, 
com­
decreases 
the I/O costs and 
complexity 
of reconstruction 
in nearly 
pared to RDP,  Code-M 
computational 
all configurations. 
the recovery 
up to 2.8 in an array of 
30 disks. 
For example, 
Code-M can speed up 
from double disk failures 
by a factor of 
The rest of this paper continues 
briefly overviews 
chitecture 
our detailed performance 
4. Finally 
the background 
ofCode-M is presented 
analysis 
we conclude 
the paper in Section 
5. 
Section 
as follows: 
2 
and related 
work. The ar­
in Section 
3, followed 
by 
and evaluation 
in Section 
• Horizontal 
Code: An erasure 
code where there are 
only data elements 
or parity elements 
in a strip. 
We only consider 
the failure 
the case of one stripe in this paper. 
of a disk drive means the failure 
on the failed disk drive. It is also easy to see that 
of 
Therefore, 
strips 
the case of multiple 
single stripe 
failure. 
stripe 
failure 
is similar 
to the case of a 
2.2 RAID-6 Based on MDS  Codes 
There are various 
MDS codes that RAID-6 can be based 
codes [15], Liber8tion 
[18], Cauchy Reed­
codes [2], Liberation 
Reed-Solomon  codes 
on, including 
Solomon codes [3], EVENODD codes [1], RDP codes [5], 
Blaum-Roth 
codes [14], Cyclic codes [4], X-codes [24], and P-codes 
[11], and DFDP [12]. Reed-Solomon  codes 
addition 
and multiply 
GF(2W). The addition 
plemented 
tiply operation 
much more complex. 
this problem and improve Reed-Solomon 
ing the complex multiply 
erations. 
over certain 
over GF(2W) can be im­
(XOR), but the mul­
which is 
using tables, 
address 
operations 
operation 
must be implemented 
by exclusive-or 
into additional 
XOR op­
Cauchy Reed-Solomon codes 
codes by chang­
operation 
efficiently 
finite fields 
are based on 
by the strips 
the P parity, 
RDP is another 
complexity. 
on the diagonal. 
for RAID-6. The P par­
computational 
coding technology 
coding technologies 
parity in RAID-4, and the Q parity, 
and this makes 
and recon­
Unlike the generic erasure coding technologies 
of 
codes, EVENODD is a special 
era­
for RAID-6. It is com­
dedicated 
which is just like 
which 
class 
There is a special 
(LD) 
called Lowest Density 
Cauchy Reed-Solomon 
sure coding technology 
posed of two types of parity: 
the horizontal 
is generated 
special 
erasure 
ity of RDP is the same as EVENODD, but the construc­
tion of the Q parity of RDP is different, 
the RDP scheme obtain optimal construction 
struction 
of erasure 
codes. Blaum et al [2] point out that in  a typical 
tal code defined by an r-row-m-column 
ments for RAID-6, if the P parity is fixed to be horizontal 
parity, 
joining 
density. 
all lowest density. 
for RAID-6, lowest density 
tage that they have the near-optimal 
the case of traditional 
codes, and P-codes are vertical 
not in the individual 
redundant 
over all disk drives. 
This fact gives the two codes optimal 
computational 
Compared with other horizontal 
codes 
codes share a common advan­
update complexity 
with 
Cyclic 
codes, for their parities 
disk drives, 
then there must be at least mr + m - 1 elements 
in the generation 
Blaum-Roth, 
of the Q parity to ensure lowest 
RAID-P+Q mode. X-codes, 
and update complexity 
and Liber8tion 
Liberation, 
but dispersed 
matrix of data ele­
horizon­
codes are 
[11]. 
are 
2 Background and Related Work 
2.1 Definitions 
• n: represents 
the result 
of M mod n. It ranges 
from 0 to n-1. 
• Element: 
building 
tinuous 
elements, 
The element is the fundamental 
codes. An element can be a bit up to con­
sectors 
on a disk drive. There are two types of 
unit for 
data elements 
and parity elements. 
• Stripe: 
A stripe 
is an independent 
set of data and par­
the 
code, which can tolerate 
in an erasure 
of both its data and parity elements. 
A strip is a set of all the continuous 
elements 
on 
• Strip: 
ity elements 
failure 
a disk drive in a stripe. 
• Parity Chain: A parity chain contains 
the parity ele­
ment and all the elements 
used to build it. 
• Parity Chain Length: 
The length of a parity 
chain is the 
number of all its elements, 
itself. 
including 
the parity 
element 
978-1-4244-7501-8/10/$26.00 
©201O IEEE 
52 
DSN 2010: Wan et al. 
Authorized licensed use limited to: Tsinghua University. Downloaded on March 19,2021 at 07:14:18 UTC from IEEE Xplore.  Restrictions apply. 
2010 IEEE/IFIP 
International 
Conference 
on Dependable Systems 
(DSN) 
& Networks 
Figures 
1 and 2 show the parity construction 
of two typ­
code that is an RDP code and 
ical MDS codes: a horizontal 
a vertical 
code that is an X-code. From these figures, 
it is 
obvious that RAID-6 schemes based on MDS codes have 
a common disadvantage 
element needs at least n - 2 elements (n is the total number 
of disks in a RAID group) on different 
The long 
parity chain becomes a potential 
that the generation 
performance 
disk drives. 
of each parity 
bottleneck. 
o Da .. 
o 
 RowParity 
1  2 
 Diagonal 
Parity 
o Da" 
4  5 
EI RowParity 
1  2 
 Diagonal 
Parity 
4  5 
o 
(a) Row Parity Chain 
(b) Diagonal 
Parity Chain 
 Row Parity  Diagonal 
Parity 
1  2 
4  5 
 Row Parity  Diagonal 
Parity 
1  2 
4 
5 
Figure 3. Parity layout of a HoVer code with 
6 disk drives. 
parity chain length 
chain length is 4. 
is 6, and the vertical 
In this example, 
parity 
the horizontal 
(a) Row Parity Chain 
(b) Diagonal 
Parity Chain 
MDS 
Figure 1. An example of horizontal 
codes of RDP codes with 6 disk drives, 
where 
the row parity chain length and the diagonal 
parity chain length are both 5. 
3 
2 