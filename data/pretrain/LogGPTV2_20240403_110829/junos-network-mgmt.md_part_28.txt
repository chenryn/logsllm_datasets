SLRs sent : 0
Valid SLRs received : 0
Invalid SLRs received : 0
305
Remote MEP count: 1
Identifier MAC address State Interface
1 00:05:85:76:e5:30 ok ge-5/0/4.11
Meaning
The Ethernet interface details and statistics are displayed. This output indicates that the ge-5/0/4.11
interface is active and its link status is up. Its maintenance domain name is md and its level is 4. The MEP
identifier of the ge-5/0/4.11 interface is indicated as 2 and its direction is up. Under the statistics section,
the output indicates that 10 LMMs were sent and 10 valid LMRs were received by the interface.
SEE ALSO
Introduction to OAM Connectivity Fault Management (CFM) | 19
RELATED DOCUMENTATION
ITU-T Y.1731 Ethernet Service OAM Overview | 204
Configure Ethernet Synthetic Loss Measurements | 324
Configure an Iterator Profile
IN THIS SECTION
Configuring an Iterator Profile | 306
Verifying the Configuration of an Iterator Profile | 309
Managing Iterator Statistics | 314
Configuring a Remote MEP with an Iterator Profile | 322
Use this topic to configure an iterator profile that periodically transmits SLA measurement packets for
delay and loss measurement. You can also view and clear the iterator statistics, and configure a remote
MEP with an iterator profile.
306
Configuring an Iterator Profile
You can create an iterator profile with its parameters to periodically transmit SLA measurement packets
in the form of ITU-Y.1731-compliant frames for delay measurement or loss measurement.
To create an iterator profile:
1. In configuration mode, go to the following hierarchy level:
[edit]
user@host# edit protocols oam ethernet connectivity-fault-management performance-monitoring
2. Configure the SLA measurement monitoring iterator:
[edit protocols oam ethernet connectivity-fault-management performance-monitoring]
user@host# edit sla-iterator-profiles
3. Configure an iterator profile—for example, i1:
[edit protocols oam ethernet connectivity-fault-management performance-monitoring sla-
iterator-profiles]
user@host# set i1
4. (Optional) Configure the cycle time, which is the amount of time (in milliseconds) between back-to-
back transmission of SLA frames for one connection, with values from 10 through 3,600,000. The
default value is 1000 ms.
[edit protocols oam ethernet connectivity-fault-management performance-monitoring sla-
iterator-profiles i1]
user@host# set cycle-time cycle-time-value
5. (Optional) Configure the iteration period, which indicates the maximum number of cycles per
iteration (the number of connections registered to an iterator cannot exceed this value), with values
from 1 through 2000. The default value is 2000.
[edit protocols oam ethernet connectivity-fault-management performance-monitoring sla-
iterator-profiles i1]
user@host# set iteration-period iteration-period-value
307
6. Configure the measurement type as loss measurement, statistical frame-loss measurement, or two-
way delay measurement.
[edit protocols oam ethernet connectivity-fault-management performance-monitoring sla-
iterator-profiles i1]
user@host# set measurement-type (loss | statistical-frame-loss | two-way-delay)
7. (Optional) Configure the calculation weight for delay with values from 1 through 65,535. The
default value is 1 (applicable only for two-way delay measurement).
[edit protocols oam ethernet connectivity-fault-management performance-monitoring sla-
iterator-profiles i1]
user@host# set calculation-weight delay delay-value
8. (Optional) Configure the calculation weight for delay variation with values from 1 through 65,535.
The default value is 1 (applicable only for two-way delay measurement).
[edit protocols oam ethernet connectivity-fault-management performance-monitoring sla-
iterator-profiles i1]
user@host# set calculation-weight delay-variation delay-variation-value
9. (Optional) Configure the threshold value for average frame delay, in microseconds, for two-way
Ethernet frame delay measurement (ETH-DM). When the configured threshold for average frame
delay is exceeded, an SNMP trap is generated for ETH-DM. The range is from 1 through
4294967295 microseconds.
[edit protocols oam ethernet connectivity-fault-management performance-monitoring sla-
iterator-profiles i1]
user@host# set avg-fd-twoway-threshold avg-fd-twoway-threshold-value
10. (Optional) Configure the threshold value for average frame delay variation, in microseconds, for
two-way Ethernet frame delay measurement (ETH-DM). When the configured threshold for
308
average frame delay variationis exceeded, an SNMP trap is generated for ETH-DM. The range is
from 1 through 4294967295 microseconds.
[edit protocols oam ethernet connectivity-fault-management performance-monitoring sla-
iterator-profiles i1]
user@host# set avg-ifdv-twoway-threshold avg-ifdv-twoway-threshold-value
11. (Optional) Configure the threshold value for average frame loss ratio, in milli-percent, in the upward
or forward direction for Ethernet loss measurement (ETH-LM) and Ethernet synthetic loss
measurement (ETH-SLM). When the configured threshold for average forward frame loss ratio is
exceeded, an SNMP trap is generated for ETH-LM and ETH-SLM. The range is from 1 through
100000 milli-percent.
[edit protocols oam ethernet connectivity-fault-management performance-monitoring sla-
iterator-profiles i1]
user@host# set avg-flr-forward-threshold avg-flr-forward-threshold-value
12. (Optional) Configure the threshold value for average frame loss ratio, in milli-percent, in the
backward or downstream direction for Ethernet loss measurement (ETH-LM) and Ethernet
synthetic loss measurement (ETH-SLM). When the configured threshold for average backward
frame loss ratio is exceeded, an SNMP trap is generated for ETH-LM and ETH-SLM. The range is
from 1 through 100000 milli-percent.
[edit protocols oam ethernet connectivity-fault-management performance-monitoring sla-
iterator-profiles i1]
user@host# set avg-flr-backward-threshold avg-flr-backward-threshold-value
13. Configure the disable statement to stop the iterator (that is, disable the iterator profile).
[edit protocols oam ethernet connectivity-fault-management performance-monitoring sla-
iterator-profiles i1]
user@host# set disable
14. Verify the configuration.
[edit protocols oam ethernet connectivity-fault-management performance-monitoring sla-
iterator-profiles]
user@host# show i1
cycle-time cycle-time-value;
309
iteration-period iteration-period-value;
measurement-type (loss | two-way-delay);
avg-fd-twoway-threshold avg-fd-twoway-threshold-value;
avg-ifdv-twoway-threshold avg-ifdv-twoway-threshold-value;
avg-flr-forward-threshold avg-flr-forward-threshold-value;
avg-flr-backward-threshold avg-flr-backward-threshold-value;
calculation-weight {
delay delay-weight;
delay-variation delay-variation-weight;
}
calculation-weight {
delay delay-weight;
delay-variation delay-variation-weight;
}
SEE ALSO
Proactive Mode for SLA Measurement | 214
Verifying the Configuration of an Iterator Profile
IN THIS SECTION
Displaying the Configuration of an Iterator Profile for Two-way Delay Measurement | 310
Displaying the Configuration of an Iterator Profile for Loss Measurement | 311
Displaying the Configuration of a Remote MEP with an Iterator Profile | 312
Disabling an Iterator Profile | 313
The following topics illustrate the configuration of an iterator profile for a two-way delay measurement,
for loss measurement, and for a remote maintenance association end point (MEP). The topics also
illustrate disabling an iterator profile with the disable statement for two-way measurement and
deactivating an iterator profile with the deactivate command for a remote MEP.
310
Displaying the Configuration of an Iterator Profile for Two-way Delay Measurement
IN THIS SECTION
Purpose | 310
Action | 310
Meaning | 311
Purpose
Display the configuration of an iterator profile for two-way delay measurement as configured in the
"Configuring an Iterator Profile" on page 306 topic with the following values:
• profile-name—i1
• cycle-time—1000 milliseconds
• iteration-period—2000 cycles per second
• delay—1
• delay-variation—1:
Action
To display information about the iterator profile, run the show command at the [edit protocols oam ethernet
connectivity-fault-management performance-monitoring sla-iterator-profiles] hierarchy level:
[edit protocols oam ethernet connectivity-fault-management performance-monitoring sla-iterator-
profiles]
user@host# show
i1 {
cycle-time 1000;
iteration-period 2000;
measurement-type two-way-delay;
calculation-weight {
delay 1;
delay-variation 1;
311
}
}
Meaning
The configuration for an iterator profile for two-way measurement is displayed as expected with set
values.
Displaying the Configuration of an Iterator Profile for Loss Measurement
IN THIS SECTION
Purpose | 311
Action | 311
Meaning | 312
Purpose
Display the configuration of an iterator profile for loss measurement as configured in the "Configuring an
Iterator Profile" on page 306 topic with the following values:
• profile-name—12
• cycle-time—1000 milliseconds
• iteration-period—2000 cycles per second
Action
To display information about the iterator profile, run the show command at the [edit protocols oam ethernet
connectivity-fault-management performance-monitoring sla-iterator-profiles] hierarchy level:
[edit protocols oam ethernet connectivity-fault-management performance-monitoring sla-iterator-
profiles]
user@host# show
12 {
cycle-time 1000;
iteration-period 2000;
312
measurement-type loss;
}
Meaning
The configuration for an iterator profile for loss measurement is displayed as expected with set values.
Displaying the Configuration of a Remote MEP with an Iterator Profile
IN THIS SECTION
Purpose | 312
Action | 313
Meaning | 313
Purpose
Display the configuration of a remoteMEP as configured in the "Configuring a Remote MEP with an
Iterator Profile" on page 322 topic with the following values:
• profile-name—i3
• maintenance-domain—default-1
• maintenance-association—1
• short-name-format—2octet
• mep—1
• remote-mep—1
• data-tlv-size—1
• iteration-count—1
• priority—1
313
Action
To display information about the remote MEP, run the show command at the [edit protocols oam ethernet
connectivity-fault-management maintenance-domain default-1 maintenance association ma1 mep 1 remote-mep 1]
hierarchy level:
[edit protocols oam ethernet connectivity-fault-management maintenance-domain default-1
maintenance association 1 short-name-format 2octet mep 1 remote-mep 1]
user@host# show
sla-iterator-profile i3 {
data-tlv-size 1;
iteration-count 1;
priority 1;
}
Meaning
The configuration for a remote MEP for two-way measurement is displayed as expected with set values.
Disabling an Iterator Profile
IN THIS SECTION
Purpose | 313
Action | 314
Purpose
To disable an iterator profile for two-way delay measurement and for a remote MEP.
314
Action
• To disable an iterator profile (for example, i1) with the disable configuration command for two-way
measurement at the [edit protocols oam ethernet connectivity-fault-management performance-monitoring sla-
iterator-profiles i1] hierarchy level:
[edit protocols oam ethernet connectivity-fault-management performance-monitoring sla-
iterator-profiles i1]
user@host# disable
• To disable an iterator profile for a remote MEP (for example, i2) with the deactivate configuration
command at the [edit protocols oam ethernet connectivity-fault-management maintenance-domain default-1
maintenance association ma1 mep 1 remote-mep 1] hierarchy level:
[edit protocols oam ethernet connectivity-fault-management maintenance-domain default-1
maintenance association ma1 mep 1 remote-mep 1]
user@host# deactivate sla-iterator-profile i2
RELATED DOCUMENTATION
Proactive Mode for SLA Measurement | 214
Managing Iterator Statistics
IN THIS SECTION
Displaying Iterator Statistics | 314
Clearing Iterator Statistics | 321
Displaying Iterator Statistics
IN THIS SECTION
Purpose | 315
315
Action | 315
Purpose
Retrieve and display iterator statistics.
Muliple iterators can be associated with a remote MEP. However, by default, only one result pertaining
to one iterator profile is displayed.
Action
• To display the iterator statistics for remote MEP 1 and iterator profile i1 with MEPs belonging to the
maintenance association ma1 and within the maintenance domain default-1 (here, the iterator profile i1
is configured for two-way delay measurement):
user@host> show oam ethernet connectivity-fault-management sla-iterator-statistics sla-
iterator i1 maintenance-domain default-1 maintenance-association ma1 local-mep 1 remote-mep 1
Iterator statistics:
Maintenance domain: md6, Level: 6
Maintenance association: ma6, Local MEP id: 1000
Remote MEP id: 103, Remote MAC address: 00:90:69:0a:43:92
Iterator name: i1, Iterator Id: 1
Iterator cycle time: 10ms, Iteration period: 1 cycles
Iterator status: running, Infinite iterations: true
Counter reset time: 2010-03-19 20:42:39 PDT (2d 18:24 ago)
Reset reason: Adjacency flap
Iterator delay measurement statistics:
Delay weight: 1, Delay variation weight: 1
DMM sent : 23898520
DMM skipped for threshold hit : 11000
DMM skipped for threshold hit window : 0
DMR received : 23851165
DMR out of sequence : 1142
DMR received with invalid time stamps : 36540
Average two-way delay : 129 usec
Average two-way delay variation : 15 usec
Average one-way forward delay variation : 22 usec
Average one-way backward delay variation : 22 usec
316
Weighted average two-way delay : 134 usec
Weighted average two-way delay variation : 8 usec
Weighted average one-way forward delay variation : 6 usec
Weighted average one-way backward delay variation : 2 usec
Output fields are listed in the approximate order in which they appear.
Table 17: Displaying Iterator Statistics for Ethernet Delay Measurement Output Fields
Output Field Name Output Field Description
Maintenance domain Maintenance domain name.
Level Maintenance domain level configured.
Maintenance association Maintenance association name.
Local MEP id Numeric identifier of the local MEP.
Remote MEP id Numeric identifier of the remote MEP.
Remote MAC address Unicast MAC address of the remote MEP.
Iterator name Name of iterator.
Iterator Id Numeric identifier of the iterator.
Iterator cycle time Number of cycles (in milliseconds) taken between back-to-back transmission of SLA
frames for this connection
Iteration period Maximum number of cycles per iteration
Iterator status Current status of iterator whether running or stopped.
Infinite iterations Status of iteration as infinite or finite.
317
Table 17: Displaying Iterator Statistics for Ethernet Delay Measurement Output Fields (Continued)
Output Field Name Output Field Description
Counter reset time Date and time when the counter was reset.
Reset reason Reason to reset counter.
Delay weight Calculation weight of delay.
Delay variation weight Calculation weight of delay variation.
DMM sent Delay measurement message (DMM) PDU frames sent to the peer MEP in this session.
DMM skipped for Number of DMM frames sent to the peer MEP in this session skipped during threshold
threshold hit hit.
DMM skipped for Number of DMM frames sent to the peer MEP in this session skipped during the last
threshold hit window threshold hit window.
DMR received Number of delay measurement reply (DMR) frames received.
DMR out of sequence Total number of DMR out of sequence packets received.
DMR received with Total number of DMR frames received with invalid timestamps.
invalid time stamps
Average two-way delay Average two-way frame delay for the statistics displayed.
Average two-way delay Average two-way “frame jitter” for the statistics displayed.
variation
Average one-way forward Average one-way forward delay variation for the statistics displayed in microseconds.
delay variation
318
Table 17: Displaying Iterator Statistics for Ethernet Delay Measurement Output Fields (Continued)
Output Field Name Output Field Description
Average one-way backward Average one-way backward delay variation for the statistics displayed in microseconds.
delay variation
Weighted average two-way Weighted average two-way delay for the statistics displayed in microseconds.
delay
Weighted average two-way Weighted average two-way delay variation for the statistics displayed in microseconds.
delay variation
Weighted average one-way Weighted average one-way forward delay variation for the statistics displayed in
forward delay variation microseconds.
Weighted average one-way Weighted average one-way backward delay variation for the statistics displayed in
backward delay variation microseconds.
• To display the iterator statistics for remote MEP 1 and iterator profile i2 with MEPs belonging to the
maintenance association ma1 and within the maintenance domain default-1 (here, the iterator profile i1
is configured for loss measurement):
user@host> show oam ethernet connectivity-fault-management sla-iterator-statistics sla-
iterator i2 maintenance-domain default-1 maintenance-association ma1 local-mep 1 remote-mep 1
Iterator statistics:
Maintenance domain: md6, Level: 6
Maintenance association: ma6, Local MEP id: 1000
Remote MEP id: 103, Remote MAC address: 00:90:69:0a:43:92
Iterator name: i2, Iterator Id: 2
Iterator cycle time: 1000ms, Iteration period: 2000 cycles
Iterator status: running, Infinite iterations: true
Counter reset time: 2010-03-19 20:42:39 PDT (2d 18:25 ago)
Reset reason: Adjacency flap
Iterator loss measurement statistics:
LMM sent : 238970
LMM skipped for threshold hit : 60
LMM skipped for threshold hit window : 0
319
LMR received : 238766
LMR out of sequence : 43
Accumulated transmit statistics:
Near-end (CIR) : 0