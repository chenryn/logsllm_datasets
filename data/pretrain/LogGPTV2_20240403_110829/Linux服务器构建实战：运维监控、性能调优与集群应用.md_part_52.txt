从这个输出可以知道GFS2文件系统中的锁类型、锁标识、数据块大小、可挂载节点数
[rootsweb1-]#gfs2_tool df/gfs2
（1）查看GFS2文件系统挂载信息
下面列举几个使用的例子。
gfs2_tool命令的参数较多，但使用并不复杂，该命令主要用来查看、修改GFS2文件系
2.gfs2_tool命令
ourna11-128MB
ournal3
[root@nodelgfs2]#gfs2_tool
inodes
data
Type
Local caching
Local focks=FALSE
Journal number
Mounted
Resource Groups
Journals
ounted
fs2:
multihost
ondisk format=1801
lock table
lock
1lockproto
www.Linuxidc .com
128MB
4
=FALSE
data
table
4096
format = 1900
1084263
1220724
Total Blocks
"mycluster:my-gfs2"
"jid=2:id=65539:first=0"
1
"lock_dlm"
unfreeze
117
136578
Used Blocks
/gfs2
1084146
1084146
Free Blocks
第12章RHCS集群
== =.
11+
980
339
PDG
---
## Page 355
Linux公社（www.LinuxIDC.com）是专业的Linux系统门户网站，实时发布最新Linux资讯。
运行在此节点，Mysql2为备用节点。
组成MySQL集群，运行mysqlserver服务，其中，Mysql1是主节点，在正常状态下，服务
web1是主节点，在正常状态下，服务运行在此节点，web2是备用节点；Mysql1和Mysql2
Mysql2。4个节点之间的关系是：web1和web2组成Web集群，运行webserver服务，其中
12.7.1
可用集群和存储集群功能。
12.7
用程序，它可以对GFS文件系统的元数据进行更新，把它转换为一个GFS2文件系统。
340第6
Aug 24 00:57:09 web1 clurgmgrd[3321]:Member 1 shutting down
然后在web1节点上查看/var/log/messages日志。输出信息如下：
在节点web2上执行正常关机命令。
岩机分为正常关机和异常岩机两种情况，下面分别说明。
1.节点web2岩机时
下面分4种情况来介绍当节点发生岩机时，集群是如何进行切换和工作的。
、前面配置了4个节点的集群系统，每个节点的主机名分别是web1、web2、Mysqll.
[root@web2-]#init0
（1）节点web2正常关机
完成集群配置后，如何知道集群已经配置成功了呢？下面就分情况测试RHCS提供的高
另外，gfs2_quota可用于GFS2文件系统磁盘配额管理。gfs2_convert是一个数据转换应
[root@Mysql1~]#gfs2_jadd-j5/gfs2
将GFS2可同时挂载的节点数目增加到5个。
[root@Mysgl1~]#gfs2_jadd-J64M
设置Jourmals的大小为64MB。
下面列举几个例子。
gfs2_jadd[-cDhJjqV]/path/to/filesystem
gfs2-jadd主要用来配置GFS2的Journals数量和大小，用法非常简单。
3.gfs2-jadd命令
Copyright (C) Red Hat，Inc.
gfs2_too1 0.1.62 (bui1t Mar 31 2010 07:34:25)
[root@web1 ~]#gfs2_toolversion
RHCS 集群功能测试
高可用集群测试
www.Linuxidc.com
2004-2006
All rights reserved.
PDG
---
## Page 356
inux公社（www.LinuxIDC.com）是专业的Linux系统门户网站，实时发布最新Linux资讯。
Aug 24 00:57:49
Aug
Aug
Bn
Aug 2400:57:29web1
Aug 24 00:57:29 web1
5n
2400:57:49web1
24 00:57:49 web1
2400:57:49
component and wil1 1
24
N
24
N
24
2400:57:49
2400:57:49
in recovery.
2400:57:49
24 00:57:49
24 00:57:49
N
24 00:57:49
rep.
N
24
size
size
state.
24 00:57:17 web1 qdiskd[2778]: Node 1 shutdown
00:57:49
00:57:49
00 :57 :49
00:57:49
00:57:49
00:57 : 49
00:57:49
4 00:57:49
00 :57 :49
00:57:49
00:57:49
00:57:49
00:57:49
00:57:49
00:57:49
00:57:49
00:57:49
00:57:49
00:57 :49
00:57:49
00:57:49
00:57:49
00:57:49
00:57:49
00:57:49
00:57:29
(219136 bytes)
：（320000 bytes）
Www.
web1
web1
web1
web1
web1
web1
web1
web1
web
web
web1
web1
web
web
web
web1
web1
openais[2755] :
openais [2755] :
openais[2755]
openais[2755]
openais[2755]:
openais[2755]:
openais [2755]
openais [2755] :
openais
openais
openais
openais
kernel:dlm:
openais
openais[2755]
openai8 [2755]
openais [2755] :
openais [2755]
openais [2755]:
openais[2755]
openais[2755]
openais [2755]
openais [2755]
openais [2755]
openais [2755]
openais[2755]
openais[2755]
openais[2755]
openais [2755]
openais
openais[2755] :
provide service.
openais[2755]:[SYNC ]
openais[2755]:
Denais[2755]
[2755]
[2755]
[2755]
B[2755]
[2755]
[2755]
inuxidc..
clc
[CLM
[CLM
[CLM
[ELO]
[CLM
osing
[CLM
[CLM
[TOTEM]
[TOTEM]
[TOTEM]
[TOTEM]
CLM
CLM
[CLM
[CLM
TO
[TOTEM]
[TOTEM]
[TOTEM]
[TOTEM]
TOTEM]
[TOTEM
TOTEM]
TEM
TEM]
OTEM
OTEM]
[TOTEM]
TEM
[TOTEM]
connecti
aru
previous
Did
position
aru
previous
posit
aru
previ
position
enteri
Saving
Creating
entering
entering
entering OPERATIONAL
Members
New
CLM
Members
New
CLM
Sending
73high
coring
Transmit
Receive
joinlist message from node 3
1This node is within the primary
not
73 high
nodejoin
nodejoin
H
H
CONFIGURATION
r（0）
H
Configuration:
C.
H
Configuration:
H
H
CONFIGURATION CHANGE
.on
ous
ing
(0）
on
(0)
(0）
new
state
Joined:
Left:
Left:
initial ORF token
need
ring
[0]
commit
GATHER
GATHER
ip(192.168.12.231)
ip(192.168.12.230)
ip(192.168.12.240)
ip(192.168.12.232)
ip(192.168.12.230)
 delivered 73 received flag 1
Bu
multicast
member 192.168.12.232:
delivered 73 received flag
delivered 73 received flag 1
sequence
multicast
(192.168.12.231)
8eq3012rep 192.168.12
seq 3012 rep 192.168.12.230
member 192.168.12.230:
message
aru
.com
message
to
state
atate
originate
state
token
CHANGE
192.168.12.232
192.168.12.231
192.168.12.230
state.
id
1because I am the
socket