查找XML风格的标签..
8.2
把标签替换为
.415
8.3
删掉除和之外的所有XML风格标签
.419
8.4
匹配XML名称.....
..422
8.5
添加和标签将纯文本转换为HTML
8.6
在XML风格的标签中查找某个特定属性.
431
8.7
向不包含cellspacing属性的标签中添加该属性
.435
8.8
删除XML风格的注释.
...438
8.9
在XML风格的注释中查找单词
8.10
替换在CSV文件中使用的分隔符
.446
8.11
抽取某个特定列中的CSV域
....450
8.12
匹配INI段头.
.453
8.13
匹配INI段块
454
8.14
匹配INI名称-值对.
...456
4
目录
www.TopSage.com
---
## Page 16
计算机精品学习资料大放送
软考官方指定教材及同步辅导书下载！软考历年真是解析与答案
软考视频|考试机构|考试时间安排
Java一览无余：Java视频教程|JavaSE丨JavaEE
Net技术精品资料下载汇总：ASP.NET篇
Net技术精品资料下载汇总：C#语言篇
Net技术精品资料下载汇总：VB.NET篇
撼世出击：C/C++编程语言学习资料尽收眼底电子书+视频教程
VisualC++(VC/MFC)学习电子书及开发工具下载
Perl/cGI脚本语言编程学习资源下载地址大全
Python语言编程学习资料（电子书+视频教程)下载汇总
最新最全Ruby、RubyonRails精品电子书等学习资料下载
数据库精品学习资源汇总：MySQL篇丨SQLServer篇丨Oracle篇
最强HTML/XHTML、CSS精品学习资料下载汇总
最新JavaScript、Ajax典藏级学习资料下载分类汇总
网络最强PHP开发工具+电子书+视频教程等资料下载汇总
UML学习电子资下载汇总软件设计与开发人员必备
经典LinuxCBT视频教程系列Linux快速学习视频教程一帖通
天罗地网：精品Linux学习资料大收集(电子书+视频教程)Linux参考资源大系
Linux系统管理员必备参考资料下载汇总
Linuxshell、内核及系统编程精品资料下载汇总
UNIX操作系统精品学习资料分类总汇
FreeBSD/OpenBSD/NetBSD精品学习资源索引含书籍+视频
Solaris/OpenSolaris电子书、视频等精华资料下载索引
www.TopSage.com
---
## Page 17
第1章
正则表达式简介
在你打开这本书的时候，很可能已经热切地期望，要在你的代码中插人本书章节中找
到的那些包含诸多括号和问号的笨拙字符串了。如果你已经准备好要“即插即用”，我
们非常欢迎，实际的正则表达式会在第4～8章中给出并加以讲解。
但是从长远来看，阅读本书的最初几章会节省你大量的时间。例如，本章会向读者介
绍许多工具一其中一些工具是本书作者之一的Jan所创建的，这些工具会帮助你测试
和调试一个正则表达式，而不会等到把它们理藏到代码中之后，那时候错误就非常难
以查找了。而且这最初几章还会向读者展示如何使用正则表达式的不同特性和选项，
帮助你轻松应对遇到的问题，并帮助你理解正则表达式，从而可以提高它们的性能，
以及学习不同语言——甚至是你最喜欢的编程语言的不同版本之间—在处理正则表
达式的时候出现的细微差别。
因此，我们在这些背景内容上花费了大量的精力，相信读者在开始读本书之前会阅读
这些内容，或是在使用正则表达式时受到挫折而想要巩固你的理解的时候，会回头来
阅读它们。
1.1正则表达式的定义
在本书的上下文中，正则表达式（regularexpression）是一种可以在许多现代应用程序
和编程语言中使用的特殊形式的代码模式。可以使用它们来验证输入是否符合给定的
文本模式；在一大段文本中查找匹配该模式的文本：用其他文本来替换匹配该模式的
文本或者重新组织匹配文本的一部分，把一块文本划分成一系列更小的文本，或者是
搬起石头砸自已的脚。本书会帮助你确切理解正在做的事情，从而避免可能会造成的
灾难性后果。
www.TopSage.com
---
## Page 18
术语“正则表达式”的历史
数学表达式特点。这样一个表达式可以通过一个确定性有限自动机（DFA）用软件来
实现。一个DFA是一个不使用回溯的有限状态机。
最早版本的grep工具所使用的文本模式是数学意义上的正则表达式。尽管名字看起
来是一样的，然而如今流行的Perl风格的正则表达式已经完全不是数学意义上的正
则表达式了。它们是采用非确定性的有限自动机（NFA）来实现的。你稍后就会学到
和回溯有关的所有内容。关于这条说明，一个实践中的程序员需要记住的所有内容就
是：象牙塔里的一些计算机科学家对于他们拥有良好定义的术语，被用于现实世界中
更为有用的技术而感到非常不满。
如果学会了使用正则表达式的技巧，它们就会简化许多编程和文本处理的任务，并且
使得许多没有正则表达式根本无法实现的任务成为可能。从一个文档中提取所有的
E-mail地址，至少需要几十行，甚至是几百行过程式代码一一这些代码编写起来费事，
而且也很难维护。但是如果采用了合适的正则表达式，例如在实例4.1中所给的一样，
那么就只需要很少的几行代码，或者甚至只要一行代码就可以了。
但是如果你试图想要用一个正则表达式来做太多的事情，或者是在事实上根本不适合
的情形中非要使用正则表达式，那么就会明白为什么会存在如下的说法：
有些人每当遇到一个问题的时候，就会想“我知道怎么做，用正则表达式就可以了。”
那么现在他们就有两个问题需要解决了。
这些人所遇到的第二个问题指的就是他们并不会去阅读用户手册，也就是你现在手里拿
到的这本书。请继续读下去。正则表达式是一个强大的工具。如果你的工作会涉及到在
计算机上操作或是抽取文本，那么牢固地掌握正则表达式就会为你省去很多个不眠之夜。
多种正则表达式流派
说实话，上一小节的标题是在说谎。我们并没有定义正则表达式到底是什么。我们也
不可能给出定义。对于哪些文本模式是正则表达式，而哪些不是正则表达式，并不存
在正式的标准来给出恰如其分的定义。你可以想象得到，每种编程语言的设计人员，
以及每个文本处理程序的开发人员，对于正则表达式应该是什么样子都会有自已不同
的想法。因此，我们就不得不面对这样一大堆不同的正则表达式流派。
幸运的是，绝大多数设计人员与开发人员都比较懒情。如果你可以复制别人已经做好
的工作，为什么非要自已创建一些全新的东西呢？正因为此，所有现代的正则表达
2
第1章
www.TopSage.com
---
## Page 19
式流派，其中当然包含了本书要讨论的这些流派，都可以把它们的历史追溯到Perl这
种编程语言。我们把这些流派都称作Perl风格的正则表达式。它们的正则表达式语法
是非常相似的，而且在大多数情况下是兼容的，但是并不是在所有情况下都完全兼容。
即使是作者有时候也会偷懒。在本书中，我们通常会使用regex或者regexp来指代一
个单个的正则表达式，而使用regexes用来指代其复数形式”。
正则流派并不是和编程语言一一对应的。脚本语言倾向于拥有它们自已的、内置的正
则表达式流派。其他语言则会依赖于函数库来提供正则表达式支持。有些函数库是对
多种语言可用的，而某些特定的语言则会选用一些不同的函数库。
本章要讲解的内容只与正则表达式的流派有关，因此会彻底忽略任何与编程有关的考
虑事项。从第3章开始，我们会给出一些代码列表，因此你可以先跳到第3章的“编
程语言与正则表达式流派”一节，以了解你将会使用哪些流派来工作。但是现在请先
让你可以更方便地探索正则表达式的语法。
本书涉及的正则流派
在本书中，我们选择了如今在使用中的最为流行的正则流派。这些都是Perl风格的正
则流派。有些流派会比其他流派多一些特性。但是如果两种流派拥有同一个特性的话，
那么它们通常都会使用相同的语法。当然也会有例外，当我们遇到这些烦人的不一致
情况时，在书中会加以提示。
所有这些正则流派都属于目前正在活跃开发中的编程语言和函数库的一部分。下面的
流派列表会告诉你本书所用到的是哪些版本。在本书后面，如果所讲解的正则表达式
在所有流派中效果都一样，那么我们在提到该流派时就会不区分其版本。而在几乎所
有情况下都会是这种情况。除了会影响到一些边界情况的bug修复之外，正则表达式
流派一般都不会改变，唯一例外是添加新的特性，从而原来被认为是错误的语法现在
会被指定新的含义。
Perl
Perl对于正则表达式的内置支持是正则表达式今天得以流行的主要原因。本书会涉
及Perl5.6、Perl5.8以及Perl5.10。
许多应用程序和正则库都号称它们使用的是Perl或者与Perl兼容的正则表达式，而
事实上它们仅仅是使用了Perl风格的正则表达式。它们使用一种与Perl相似的正则
语法，但是并不支持相同的正则特性集。最有可能的情形是，它们使用的是这一特
性集中的正则表达式流派之一，而这些流派都是属于Perl风格的。
，中
则简称为“正则式”或“正则”。
正则表达式简介3
www.TopSage.com
---
## Page 20
PCRE
本书会涉及的PCRE版本包括第4版到第7版。
虽然PCRE号称是Perl兼容的，而且与本书中的其他流派相比，它也是与Perl兼容
性最好的，但是实际上它也只能称为是“Perl风格”的正则流派。有些特性，比如
Unicode支持，会与Perl稍微有些不同，并且不能像在Perl中所允许的那样把Perl
代码混合到你的正则表达式之中。
因为它采用了开源许可，并且拥有稳定可靠的实现，所以PCRE被应用到了许多编
程语言和程序中。它被内置到PHP中，并且被包装到了许多个Delphi的组件中。如
果一个应用程序号称它支持“Perl兼容”的正则表达式，而却没有具体列出它实际
使用的正则流派，那么就很可能是PCRE。
.NET
整的Perl风格的正则流派。本书会涉及.NET的1.0～3.5版。而严格来讲，只存在两
个版本的System.Text.RegularExpressions，即1.0和2.0版。在.NET1.1、.NET3.0
和.NET3.5中，并没有对正则表达式的类进行任何修改。
任何.NET编程语言，包括C#、VB.NET、Delphifor.NET，以及甚至是COBOL.NET，
都可以完全访问.NET正则流派。如果一个使用.NET开发的程序为你提供了正则
表达式支持，那么即使它号称使用了“Perl正则表达式”，你也可以完全确定它使用
的是.NET正则流派。令人大跌眼镜的一个例外则是VisualStudio（VS）自身。VS
集成开发环境（IDE）中依然使用的是它一开始就在用的同一个老版本的正则流派，
而这个实现根本就不是Perl风格的。
Java
Java4是提供内置正则表达式支持的第-一个Java版本，它通过java.util.regex包提供
对正则表达式的支持。这个包很快就超越了为Java提供的各种第三方正则库。除了
它是标准的和内置的之外，它还提供了功能完整的Perl风格的正则流派，并且它的
卓越性能完全可以与即使用C编写的应用程序不相上下。本书会讲解在Java4、
Java5和Java6中的java.util.regex包。
如果你在过去几年中用Java开发软件的话，那么使用的任意正则表达式支持都很可能
9
是这里所谓的Java流派。
JavaScript
在本书中，我们使用JavaScript这个术语指代在ECMA-262标准的第3版中定义的
4
第1章
www.TopSage.com
---
## Page 21
正则表达式流派。这个标准定义了ECMAScript编程语言，而这个语言更广为人知
的是它在不同网页浏览器中的JavaScript与JScript实现。InternetExplorer5.5到
InternetExplorer8.0、Firefox、Opera与Safari都实现了ECMA-262的第3版。然而，
所有的浏览器都拥有各种不同的边界情形bug，使得它们与该标准有所背离。我们
会在必要的地方指出这些问题。
如果一个网站充许使用正则表达式进行查找或者过滤，并且不用等待网站服务
器的响应，那么它使用的就是JavaScript正则流派，这是唯-一的可以跨浏览器
的客户端正则流派。即使是微软的VBScript与Adob公司的ActionScript3使用的
也是它。
Python
Python通过它的re模块来支持正则表达式。本书会讲到Python2.4和Python2.5。
Python的正则表达式支持已经多年没有发生变化了。