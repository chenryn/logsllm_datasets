User: Please write a shell script to regularly back up data in a specified directory on the Apache server and automatically delete expired backups.
Assistant: #!/bin/bash # The directory that needs to be backed up backup_dir="/var/www/html/" # The storage location of the backup file backups_dir="/backup" # The prefix name of the backup file, followed by the backup date backup_prefix="backup_ `date +%Y-%m-%d_%H-%M-%S`" # The full path of the backup file backup_file="$backups_dir/$backup_prefix.tar.gz" # Delete expired backups before backup find $backups_dir - name "backup_*" -type f -mtime +3 -exec rm -f {} \; # Create a compressed backup file tar -zcvf $backup_file $backup_dir # After the backup is complete, the file can be uploaded to the cloud backup # FTP, rsync can be used Or the API provided by the service provider # Backup completed echo "Backup completed: $backup_file"