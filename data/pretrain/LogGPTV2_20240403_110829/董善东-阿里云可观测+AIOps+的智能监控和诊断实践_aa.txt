阿里云可观测AIOps的 智能监控和诊断实践
阿里云技术专家/ 董善东博士
个人简介
董善东 博士 
	董善东 （梵登）， 阿里云技术专家。21年加入阿里云云原生可观测团队， 目前为可 观测AIOps负责人，负责可观测AIOps产品Insights的商业化建设、AIOps解决方案的研发、大模型在可观测领域的探索等。期间主导了ARMS在《Gartner APM 2022》/《信通院根 因分析标准 2023》的测评。
	博士毕业于新加坡国立大学电子计算机系， 期间研究方向主要为智能传感系统、信号 处理、机器学习应用。 
Outline
•可观测体系下的AIOps介绍
•阿里云可观测AIOps智能监控&诊断实践•可观测AIOps具体案例
•大模型时代下， 可观测AIOps将走向何方？
AIOps“灵魂”三问
• 1. AIOps是否是个摆设？
• 2. 如何衡量AIOps的业务价值？• 1. AIOps是否是个摆设？
• 2. 如何衡量AIOps的业务价值？
• 3. AIOps如何落地，落地成本有多大？
可观测和AIOps是否能碰撞出新的火花
AIOps：Gartner在16年发布的报告中首先提出了基于大数据及算法（Algorithmic IT Operations）的IT运维概念。在17年将AIOps概念从基于大数据及 算法，扩充为基于人工智能（Artificial Intelligence for IT Operations，AIOps），认为通过大数据、机器学习及高级分析技术，提供具备主动性、人性 化及动态可视化的能力，直接或间接地提升目前传统IT运维（监控、自动化、服务台）的能力。
AIOps概念 	可观测中的
过大 	AIOps
AIOps从模糊概念，到可落地的标准化道路
可观测性标
AIOps能力 
成熟度模型 准体系 根因 分析技术要 求可观测性标
AIOps能力 
成熟度模型 准体系 根因 分析技术要 求
《企业级 
AIOps 实施 
建议》白皮书
Gartner 提 
出AIOps概 
念
国内外对于可观测AIOps理解的差异性
Gartner：6大场景交叉考核如何用好能力
信通院：能力项是否具备的考核
- 变更前后，能否发现异常。 
- 微服务的异常下的连锁反应分析
- 资源层面的根因分析
| 根因 | 如何用好能力 | 行为 | 异常 | 数据 |
|---|---|---|---|---|
| 根因 |如何用好能力 |分析 |异常 |数据 |
| 根因 |如何用好能力 |分析 |告警 |根因 |
| 分析 |如何用好能力 |分析 |告警 |根因 |
| 分析 |如何用好能力 |分析 |告警 |定位 |
业务 
分析
有没有能力
Outline
•可观测体系下的AIOps介绍业务 
分析
有没有能力
Outline
•可观测体系下的AIOps介绍
•阿里云可观测AIOps智能监控&诊断实践•可观测AIOps具体案例
•大模型时代下， 可观测AIOps将走向何方？
可观测AIOps落地场景“三板斧”
| 检测 |  |  | 告警的告 |  |
|---|---|---|---|---|
| 检测 | | |警 | |
| 分析 | 
 | 
 | 代码级 | 
 |
|---|---|---|---|---|
| 分析 |  |  | |  |
| 分析 |定位 |定界 | |析 |
| 分析 |定位 |定界 |定位 |析 |
| 收敛 |  | 告警降噪 |  |  |
|---|---|---|---|---|
| 收敛 |合并 |告警降噪 | |合并 |
挑战1: 如何构建快速且准确的“检测”
• 传统静态阈值难配置、难维护挑战1: 如何构建快速且准确的“检测”
• 传统静态阈值难配置、难维护
• 检测曲线形态各异、异常类别各异
固定阈值对比智能KPI检测，图片来源于清华Netman实验室分享
检测方案总结
| • | 统计算法： k-sigma，箱线图，天/周同比，环比等 | 当前值是否过大或者过小： |
|---|---|---|
| • |时序分析/解类算法： EWMA, STL， RobustSTL |当前值是否过大或者过小： |
| • |预测类算法：Holt-winters， ARIMA, Prophet， LSTM等 |当前值是否过大或者过小： |
| • |机器学习分类算法：孤立森林，One-Class SVM，各类有监督模型 |当前值是否过大或者过小： |
| • |– 环比：对比值的变化率 |当前值是否过大或者过小： |
| • |– 环比：对比值的变化率 |– 历史数据 || • |– 环比：对比值的变化率 |– 历史数据 |
| • 单点比较：−−1 >  threshold | • 单点比较：−−1 >  threshold | 	 • {| = 1. . . }
– 计算样本均值和样本标准差 | 	 • {| = 1. . . }
– 计算样本均值和样本标准差 | 	 • {| = 1. . . }
– 计算样本均值和样本标准差 | 	 • {| = 1. . . }
– 计算样本均值和样本标准差 | 	 • {| = 1. . . }
– 计算样本均值和样本标准差 | 	 • {| = 1. . . }
– 计算样本均值和样本标准差 |
|---|---|---|---|---|---|---|---||---|---|---|---|---|---|---|---|
| 	• 多点比较：푐표  =1 |  − − > ℎ푟ℎ표  > count_num |	 • {| = 1. . . } – 计算样本均值和样本标准差 |	 • {| = 1. . . } – 计算样本均值和样本标准差 |	 • {| = 1. . . } – 计算样本均值和样本标准差 |	 • {| = 1. . . } – 计算样本均值和样本标准差 |	 • {| = 1. . . } – 计算样本均值和样本标准差 |	 • {| = 1. . . } – 计算样本均值和样本标准差 |
| 	• 多点比较：푐표  =1 |  − − > ℎ푟ℎ표  > count_num | • = |1+2+…+ | , = |1 | |  −  2 || – 同比：对比同一个周期的值或多个周期的值 • 突增： > 过去同一周期时刻的值  * max_threshold • 突降：  过去同一周期时刻的值  * max_threshold • 突降：  过去同一周期时刻的值  * max_threshold • 突降：  过去同一周期时刻的值  * max_threshold • 突降：  + 3  or   + 3  or   + 3  or   + 3  or   + 3  or   + 3  or  < − 3   适合数据偏正态/均匀分布的场景 |检测方案总结
•	统计算法： k-sigma，箱线图，天/周同比，环比等
•	时序分析/解类算法： EWMA, STL， RobustSTL
•	预测类算法：Holt-winters， ARIMA, Prophet， LSTM等
•	机器学习分类算法：孤立森林，One-Class SVM，各类有监督模型
STL
适合于周期性明显、且无明显周期漂移的场景
Prophet
预处理
| 样 | 特征提取 | 特征工程 | 适合存在典型周期/ 波动大的指标场景 |
|---|---|---|---|
| 本 |设定参数 |训练模型 |适合存在典型周期/ 波动大的指标场景 |