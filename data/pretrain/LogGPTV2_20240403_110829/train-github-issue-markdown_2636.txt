It appears as though the user-agent header that Symfony2 BrowserKit sets is
incorrect. I've been bashing my head against Behat for a few hours trying to
test against a site running an IIS6 server (fails with IIS7 as well).
The server responds with:  
HTTP/1.1 400 Bad Request (Invalid Header Name) and returns no body.
I did a tshark to observe the headers:
Hypertext Transfer Protocol  
GET / HTTP/1.1\r\n  
[Expert Info (Chat/Sequence): GET / HTTP/1.1\r\n]  
[Message: GET / HTTP/1.1\r\n]  
[Severity level: Chat]  
[Group: Sequence]  
Request Method: GET  
Request URI: /  
Request Version: HTTP/1.1  
User-Agent: Guzzle/3.3.0 curl/7.24.0 PHP/5.3.15\r\n  
User-agent: Symfony2 BrowserKit\r\n  
Host: ******\r\n  
\r\n
I do not believe that the "User-agent" header declaration is valid. I believe
that it should be User-Agent, instead (capital "A"). I'm not sure if multiple
User-Agent fields are allowed, either. Thoughts?