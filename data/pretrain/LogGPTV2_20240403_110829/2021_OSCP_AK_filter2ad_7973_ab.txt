lab分为Public段、IT段、Development段、Admin段、Sandbox组。其中IT、Dev、Admin都是内网段，需要在特定的public机器上拿到密钥才能解锁，并且需要在那台机器上搭隧道，尤其是admin段，要搭两个隧道，非常麻烦。sandbox对应的是pdf的最后一章的域渗透机器组，几台机器组合的非常巧妙，强烈建议做一下。每天有12次重置机器的机会，不够还可以找技术人员刷新。
每位学生都会被分配一台win10，一台win
server，一台debian，可以远程连接，一些练习和lab都需要用到，尤其是bof部分。个人建议使用xfreerdp。
## 考试
###  考试前
考试是需要提前预约的，加上第一次一共可以修改3次。我在完成了pdf的学习后（大概8月初）就预约了10月3号的考试。但实际在9月10号就完成了lab的练习，public网段刷了3遍，刷的实在有点想吐了。发现今年的中秋和国庆不是连在一起的。考虑到冷静期，赶紧修改了时间到9月20号。不过大部分时间都被约走了，只好选了上午11点。
#####  考前注意事项
  * 多看几遍[考前须知](https://help.offensive-security.com/hc/en-us/articles/360040165632)，不要违规！
  * 提前熟悉[录屏方法](https://help.offensive-security.com/hc/en-us/articles/360050299352-Proctoring-Tool-Student-Manual)。考试用的是浏览器应用的录屏，在浏览器里操作就可以，记得开启弹窗。
  * 遇到问题找[Live Chat](https://chat.offensive-security.com/)或者发邮件！工作人员都是很客气的，礼貌一点，在他们的能力范围内都会帮你解决。你付了钱的，大胆一点。
###  考试中
中秋回家，先休息了一天，翻了翻pdf和之前的笔记。确保连接畅通，准备好多个科学上网。这里其实可以先申请一次模拟考的，确认网络状态。但是我没仔细看邮件，也就没去申请。由于考试要持续24小时，晚上11点上床休息，好好睡一觉。
第二天睡到9点起来，吃了早饭，进入监考室（不需要安装软件，都是在浏览器里进行）等待考官。准备一下还是10点，就又复习了一会。到了10点47分，考官进来了，要求我出示双语证件，我把护照给他看了。然后他要我拿着电脑把房间内都扫一遍，看看有没有违规的地方。看了一圈之后他让我把手机藏好，不要放在桌子上。然后重新扫了一圈，就通过考前准备了。
等到11点，一封邮件发过来，里面有用户名和密码，还有6个IP（5台靶机和一台调试机器，调试机器就和你的学生win10机一样，基本就是让你用来调试bof的），控制台（用来重置机器和提交proof）以及提交报告的网址。尝试连接，可以连接。和考官说了一声，运行了附带的一个检查网络的脚本，发给考官看了之后，就可以开始考试了。
**题目的分值分布是：**
  * 25分的BOF
  * 25分、20分、20分、10分的常规机器
满分100分，通过考试需要70分，最快通过的组合就是25bof+20+20+5分练习 或者 25bof+20+25。所以10分的机器比较鸡肋，不用太关注。
**我的做题顺序是这样打算的：**
​ 先做25分的bof，拿下25分，心里有点底。然后两台20分里挑一台。做完之后去做25的，最后做10分的。
但是考试开始，我正在调试bof的时候，发生了断网，连续断了2次，持续了10分钟左右。当时确实是有点慌了，把路由器拔掉电源等了一会重新插上之后才稳定，万幸，后面也没有发生过断网。
25分的bof的找坏字符是最耗费时间的步骤，一定要仔细。还有一件事，一定要重置每台机器！！！虽然考前须知里说了考试开始之前他们会把每台机器都重置一遍，但是实际是根本没有，我的bof的机器如果不是调试软件我忘了怎么恢复初始界面布局，去重置机器，可能这题我就直接卡死，做不出来了！重置机器之前和之后得到的数据地址完全不同，多了我需要的数据。瞬间变得贼简单，本来我还在想有点难啊。bof一定要拿下，白给的25分，非常简单，跟着pdf做都可以。据说还有一台linux的bof，但大概率是win的。
为了节省时间，我用nmap的快捷扫描先扫了两台20分的，扫完之后用autorecon再重新挂着扫一遍，和考官说了一声吃饭去了。吃完回来继续做题。选了一台20分的，一上来就给我卡住了。各个方向都没找到漏洞，就先放弃了，就用nmap的full扫描用扫了一遍（这里很关键，autorecon不知道怎么回事，有几个端口没扫出来，但是nmap扫出来了）。但我仍然没什么头绪，就去看另外一台20分的。没什么头绪的时候一定要果断放弃，每个地方最多花费1小时，我是买了一个有45分钟提示的台灯，每到45分钟就休息5分钟，顺便换个方向。一旦陷入兔子洞不能出来，就容易钻牛角尖，有时候，事情真的不是你想的那样，换个你觉得不可能的方向，反而有可能打通。
好在另外一台20分的挺简单的，比较对我的电波，除了提权比较少见，卡了一会之外，没有太难的。此时我已经有45分。我考虑了一下，选择转战25分的机器。25分的机器相当精彩，相当多的兔子洞，多个网页，多个漏洞的组合利用，要求学生耐心的枚举，尝试每一种可能。最后，在google的帮助下，成功找到了漏洞点，组合利用，拿下25分。
此时我已经有了70分，可以通过考试了，但我担心报告可能会扣分（报告只扣分，不加分），正在此时家人喊我吃晚饭了。我就和考官说了一声，去吃了个晚饭。回来继续，我先去试了试10分的，结果网上的脚本没一个可行的，遂放弃，转战20分。
在重新枚举之后，因为时间有点久了，有点神智不清，意外按到回车，在百度上进行了一次没打完关键词的搜索，结果找到了一篇中文写的漏洞利用文章，非常感谢这位师傅🙏。尝试了漏洞点之后发现确实是可以利用。一顿操作拿下20分。最后只剩下10分。但我的一次msf的机会还没用，尝试修改了一下网上的脚本，还是不行，直接msf一把梭，打穿。此时是晚上7点30分，距离考试开始过了8个半小时，AK了所有的靶机。
完成了之后我询问考官能不能现在开始写报告，得到了可以的回复，我就开始整理截图，写报告。官方给出的报告模版个人觉得不是很好，可以根据自己的习惯进行修改，关键点就是要让检查你报告的人可以跟着你的报告复现出来，那基本就不会扣分。别忘了IP&proof的截图。最后写了108页，写到12点上交报告，和考官说了一声，结束考试。
写完报告就可以提交了，如果你还写完了练习的报告。注意⚠️，练习和考试的报告是分开的，名字也不一样，但要放到同一个7z压缩包里。
###  考试后
等了3天，第3天还做了个噩梦，梦到自己没过，吓了一跳。醒来发现有新邮件，点开是We are
happy…，悬着的心才放下。然后就是点击邮件里的链接，填写证书收货地址，还可以领取网络OSCP标志，装饰在自己的社交网络上。  
证书大概1个月多之后寄到了，速度还挺快，晚上看还在香港，第二天下午就送到家了。
## 工具
端口扫描 — nmap、autorecon
目录扫描 —
gobuster、dirsearch（dirsearch只在gobuster失效的时候用，其他情况一律用gobuster，dirsearch的扩展名爆破有问题）
抓包 — Burp Suite
加密识别 — hashid、hash-identifier
密码爆破 — john、hashcat
凭证爆破 — hrdya、crackmapexec
负载生成 — msfvenom
sql注入 — 手注，任何自动注入工具都是禁止的
漏洞利用 — Google、MSF（只能用一次）
端口转发 — chisel
文件下载 — curl、wget
提权(Linux) — LinEnum.sh、linpeas.sh、linuxprivchecker.py、linux-exploit-suggester.sh
提权(Win) — Windows-Exploit-Suggester、PowerTools、winPEAS、Sherlock
漏洞网站 — [Exploit-DB](https://www.exploit-db.com/)、Google、github  
注意⚠️，linpeas.sh的sudo token模块需要修改，会自动利用提权，详细可以参考[官网文章](https://www.offensive-security.com/offsec/understanding-pentest-tools-scripts/?utm_content=163426837&utm_medium=social&utm_source=twitter&hss_channel=tw-134994790)
## 写在最后
OSCP的考试本质就是枚举，鉴别兔子洞，手工利用。它带来的感觉是其他事情都难以取代的，个人感觉有点像高考，或者科目二和科目三。但它又和高考有所不同，因为渗透测试是爱好。并且它带来的成就感也远超科目二和科目三通过时的感觉。
如果有师傅也想考的，想咨询更多细节，可以发email给我。
Email: [PI:EMAIL](mailto:PI:EMAIL)
最后，永不放弃， **Try Hander !**