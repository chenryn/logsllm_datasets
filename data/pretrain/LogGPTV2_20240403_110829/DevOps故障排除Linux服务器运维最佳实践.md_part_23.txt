### 8.3 HTTP状态码

#### 306 Unused
此状态码已被弃用，不再使用。

#### 305 Use Proxy
服务器在响应中提供了代理信息，客户端需要通过指定的代理来访问请求的资源。

#### 304 Not Modified
如果被请求的资源自上次请求后没有被修改，服务器会返回这个状态码。与401 Unauthorized不同的是，身份验证并不能改变这一结果。

#### 403 Forbidden
当用户无权访问某个资源时，服务器会返回此状态码。这通常意味着即使进行了身份验证，也无法获取该资源。

#### 401 Unauthorized
当前请求需要用户提供有效的身份验证凭据才能继续进行。客户端应以适当的授权重新发送请求。

#### 400 Bad Request
当客户端发送了一个格式错误或无法理解的请求时，服务器会返回此状态码。

#### 410 Gone
表示所请求的资源已永久删除，并且不会再次可用。与404 Not Found的区别在于，410明确指出资源不再存在。

#### 408 Request Timeout
如果客户端完成请求的时间过长，服务器可能会返回此状态码。使用telnet等工具可以帮助诊断此类问题。

#### 5×× Server Error Status Codes
这些状态码指示了服务器在处理请求时遇到的问题。

- **500 Internal Server Error**：服务器遇到了一个未预期的情况，导致其无法完成对请求的处理。
- **501 Not Implemented**：服务器不支持请求中要求的方法。
- **502 Bad Gateway**：作为网关或代理的服务器从上游服务器收到了无效响应。
- **503 Service Unavailable**：由于临时性的过载或维护，服务器当前无法处理请求。
- **504 Gateway Timeout**：作为网关或代理的服务器未能及时从上游服务器获得响应。
- **505 HTTP Version Not Supported**：服务器收到的请求使用的HTTP版本不受支持。

---

### 8.4 分析Web服务器的日志

日志分析是诊断Web服务器问题的重要手段之一。Apache和Nginx等常见的Web服务器都会将访问记录保存到特定的日志文件中，默认情况下这些日志分别位于`/var/log/apache2/`（对于Apache）和`/var/log/nginx/`目录下。每个站点可能还会有独立配置的日志文件。

#### 日志格式说明
每条日志记录包含多个字段，用于提供关于每次请求的详细信息：
- `%h` - 远程主机名或IP地址。
- `%l` - 远程登录名（通常为空）。
- `%u` - 远程用户名（若需权限认证则显示）。
- `%t` - 请求时间戳。
- `"%r"` - 完整的HTTP请求行。
- `>%s` - 响应的状态码。
- `%b` - 已发送给客户端的字节数。
- `"\"%{Referer}i\""` - 引荐页面URL。
- `"\"%{User-Agent}i\""` - 用户代理字符串。

#### 示例命令
以下是一些常用的命令示例，用于从日志中提取有用信息：
- 使用grep过滤特定日期的日志记录：`egrep '04/Jul/2012' access.log`
- 统计来自特定IP地址的请求数量：`grep '10.1.2.3' access.log | wc -l`

#### 注意事项
- 避免直接编辑大型日志文件；建议使用如less这样的工具浏览它们。
- 对于非常大的日志文件，考虑创建一个副本或者只关注感兴趣的那部分内容。

通过合理利用日志分析技术，管理员能够更有效地定位并解决Web服务器出现的问题。