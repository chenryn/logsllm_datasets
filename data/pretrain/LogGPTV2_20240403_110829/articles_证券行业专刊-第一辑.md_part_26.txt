02 安全架构
Gartner对安全架构的定义是：安全架构是计划和设计组织的、概
念的、逻辑的、物理的组件的规程和相关过程，这些组件以一致的
方式进行交互，并与业务需求相适应，以达到和维护一种安全相关
风险可被管理的状态。
ISF报告中，对安全架构的定义是：安全架构是一组表示形式，描
述了环境中安全组件的功能，结构和相互关系。安全组件可以根据
安全架构的类型而有所不同，但通常包括安全控制措施、安全服务
（例如身份验证、访问控制等）和安全产品（例如防火墙、入侵检
在实战攻防演练中，也经常暴露出很多应用层问题，如高危框架或 测等）。
中间件、第三方开源组件漏洞、安全配置错误、设计不当、API未
授权访问等业务逻辑问题、敏感数据保护不足等。 安全人员一直面临着挑战：如何将业务问题、威胁、IT与构建的
防御体系联系起来？安全架构可以解决这类问题。安全架构提供了
一种结构化的方法，向IT服务、应用程序和平台添加安全控制措施，
系统性地解决安全风险问题。
在安全架构的开发过程中，通常会产生许多表示形式。随着业务安
全需求转换为安全控制措施，表示形式变得更加具体，形成了分层
安全架构模型。
…
… （图见下页）
194 195
行
业 证券行业应用安全架构设计实践
专
刊
如Open…Group的OSA和O-ESA。
安全架构框架的一个例子是NIST…CSF。
如何来设计安全架构，有方法论（Methodology）或者框架
（Framework）作为参考。框架是一套系统的控制点和实践的组合，
关于“what”的条目组合，而方法论是一系列从起点到目标的实
施步骤，关于“how”的指南。
… …
安全架构方法论的一个典型例子是SABSA,它建立在Zachman企
业架构方法论的基础上，采用类似的结构，称为SABSA矩阵,用 NIST…CSF是一个通用框架，提供了一种方法为组织定义逻辑安全
于帮助描述组成安全架构的视图和组件。还有其他一些方法论，比 架构，它让用户能够识别业务活动的网络安全风险，然后构建一个
196 197
行
业 证券行业应用安全架构设计实践
专
刊
控制能力概要。 当今安全设计经典理论中，最为经典、被引用最多的是由MIT的
Saltzer教授在1975年首先提出的8大安全设计基本原则，被安
全业界奉为“经典安全原则”。经过业界多年的发展和总结，在原
有8大经典设计原则的基础上，又发展引申出其他一些安全原则，
例如“纵深防御”、“不要轻信”、“保护薄弱环节”、“提升隐私”
原则等。
应当指出的是，并非所有的安全设计原则都需要完全在一个系统中
实现。有些安全设计原则本身就是相互冲突的，需要做出权衡。
…
另一个方法论OSA提供了很多类架构模式、威胁目录以及控制目 04 威胁建模
录，这个社区已经很久没有更新了，但还是具有一定的参考价值。
安全架构设计方法，主要是通过攻击面分析和威胁建模手段识别威
03 安全设计原则 胁、建立风险消减措施，最终形成安全设计方案。
在安全架构设计中，有个很关键地方就是要遵循安全设计原则。安 攻击面是指应用软件任何可被人或其他程序访问的部分，而攻击面
全设计原则，是在安全业界实践中已被证明是成功的抽象概念的集 分析的目的是为了减少应用和数据暴露在不可信用户面前的数量。
合，是无数前辈经验的总结。它告诉我们安全设计的正确做法以及 攻击面分析的核心是识别访问入口及信任边界。访问入口就是数据
为什么这么做。应用系统的设计人员应遵循这些安全设计基本原则 流入流出的入口点，如身份认证入口点、管理页面、传输接口等；
进行威胁分析和安全方案设计，避免由于设计不当引入的安全风 信任边界有网络边界，如互联网、DMZ、核心网、办公网，也有
险，提升应用系统的安全性。 应用或服务边界，其他还有主机边界等。攻击面分析还需要确定应
198 199
行
业 证券行业应用安全架构设计实践
专
刊
用程序中的有价值的数据（例如机密、敏感、合规的）。 与信息安全三要素和信息安全基本的三个属性相关。随着国内
外对个人隐私保护重视程度加大，如果业务涉及个人信息，也
威胁建模是分析应用程序安全性的一种结构化方法，通过识别威 需要考虑对隐私数据的保护。
胁，定义防御或消极威胁控制措施的一个过程。威胁建模主要有6 …
个步骤： 5、记录威胁。根据识别的威胁分析可以实施的缓解措施并记录下
1、识别资产。确定必须要保护的有价值的资产，如敏感数据、隐 来。
私信息等。
6、评估威胁。评估威胁的优先级，需要先解决最重要的威胁。可
2、创建架构概述。目的是为了更好的理解系统架构，为辨别威胁 以采用DREAD风险模型进行威胁风险评级。DREAD从潜在
做准备。具体就是绘制系统架构图，包括标识子系统，信任边 损害、可重复性、可利用性、受影响用户、可发现性5个方面
界和数据流等。 进行评分。一旦获得风险等级，就可以更新记录的威胁并添加
发现的等级。
3、分解应用程序。根据架构图以及功能需求描述，对系统进行数
据流分析，绘制相应的数据流图，识别关键技术，信任边界及 威胁建模的输出包括应用程序体系架构安全方面的文档以及威胁
系统的入口等。 的列表，最终由安全团队输出安全设计方案，开发人员基于安全
设计方案进行系统功能设计和开发，通过设计安全（security…by…
4、威胁识别。威胁分析方法有威胁列表、攻击树、STRIDE方法等。 design）降低安全风险。
比较常用的是STRIDE，STRIDE是从攻击者的角度，把威胁
划分成6个类别，分别是Spooling（仿冒）、Tampering(篡改)、 05 安全架构设计实践
Repudiation（抵赖）、Information…Disclosure（信息泄露）、
Dos(拒绝服务)和Elevation…of…privilege(权限提升)。这6类 从上面威胁建模过程可以看出，流程太重，过于繁琐，且对于人工
投入要求较高，很难适应业务的敏捷快速迭代开发模式。因此在实
际使用中，我们对威胁建模过程进行了优化，将安全需求分析和架
构设计过程结合，设计了轻量级威胁建模，主要包括攻击面分析、
安全威胁库及安全需求库。
安全建设的目标，就是保护信息资产，实现信息安全三要素CIA，
机密性（只有授权用户可以获取信息）、完整性（信息在输入和传
200 201
行
业 证券行业应用安全架构设计实践
专
刊
输的过程中，不被非法授权修改和破坏，保证数据的一致性）和可
用性（保证合法用户对信息和资源的使用不会被不正当地拒绝）。
下面以证券机构某金融APP实际案例，讲解如何通过轻量级威胁
建模，进行安全架构设计。
该产品是一款投行类一体化服务平台，支持移动APP客户端及
Web页面，目标客户既有企业内部人员，也有外部客户，以及第
三方机构。
对项目组进行问卷调研，目的是要了解系统的关键信息，为后面的
攻击面分析及威胁建模做准备。
UI，后端采用微服务架构，且应用和第三方服务有交互；使用场
景，既有外部客户，也有内部用户，暴露的接口有web页面，也
有Restful…API；存在客户敏感数据。从应用的部署架构，可以看
到应用分布区域有互联网、DMZ、核心网及办公网。
…
调研问卷主要包括系统架构、使用场景、重要数据、部署方式等。
其中系统架构关注技术实现方案、系统架构等；使用场景关注用户
场景、用户群体、角色、访问方式等；数据关注是否有敏感数据等；
而部署方式关注部署架构、资产清单等。（见右页首图）
… 根据调研问卷，可以大概了解应用系统的相关信息。本文的安全架
根据系统架构图，可以了解应用的基本结构。前端有APP，Web… 构设计，关注的是通用安全风险，对于业务内部逻辑风险不做展开。
202 203
行