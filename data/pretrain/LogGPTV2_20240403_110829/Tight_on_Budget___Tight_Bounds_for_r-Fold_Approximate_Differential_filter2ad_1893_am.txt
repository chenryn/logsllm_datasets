the noise in the case that Gaussian noise is used or that Laplace noise is used, and this section studies how
much the originally recommended amount of noise improves the degree of privacy, in case Gaussian noise
is used or Laplace noise is used. We stress that while in the case of Vuvuzela there is no utility function
that we have to preserve other than to minimize the bandwidth overhead, our approach is also suited for
applications where a utility function has to be preserved.
In those cases, we would probably reduce the
variance to an appropriate level and then compute tight bounds.
7.2 Tighter privacy analysis for the dialing protocol
For the dialing protocol, we show that with Gaussian noise the noise rate can be reduced by a factor of
almost 5 while still meeting the privacy requirements, and for the conversation protocol the noise rate can be
reduced by a factor of 10 while still meeting the privacy requirements. With Laplace noise the noise rate can
be reduced by a factor of 2 and for the conversation protocol by a factor of 4. We refer to Figures 20 and 21,
placed in the appendix. As the conversation protocol produces more observations (i.e., more compositions)
and the looseness of the bounds that the original Vuvuzela paper used ampliﬁes more heavily for a high the
number of observations, the tightness of our bounds is more pronounced for the conversation protocol.
For comparability, we depict in Figure 15 the original graphs from the Vuvuzela analysis, which show
the epsilon graph and the delta graph with increasing r, respectively, for the dialing protocol and estimated
with the advanced composition result. We extend those Figures with the lowest, magenta graphs (marked
with a ∗) that show the performance of our proposed Gaussian noise that uses nearly 5 times less noise
and is computed with our bucketing approach.15 As our method computes not only one ε, δ pair for each
number of observations r but an entire ε, δ graph, we chose representative  values that are close to (and even
below) the epsilon values for the highest noise conﬁguration LP(20k, 1130) from the original Vuvuzela paper.
The ﬁgure shows that our bounds with the reduced noise and with using Gaussian noise GS(4.1k, 8332) are
below the previous bounds for the highest noise conﬁguration LP(20k, 1130), proving that a noise reduction
of nearly a factor of 5 still yields for the dialing protocol to achieve the privacy requirements of eε ≤ 2 and
δ ≤ 10−4.
15All computations have been conducted with 100, 000 buckets.
44
Figure 15: The privacy bounds for Vuvuzela’s dialing protocol. The left graph shows the eε-values on the
y-axis and the number of observations r on the x-axis (i.e., r-fold composition) in log-scale and the right
graph shows the corresponding δ-values on the y-axis. The solid green (µ = 8k, γ = 500), the dashed red
(µ = 13k, γ = 770k), and the dotted blue line (µ = 20k, γ = 1130) are from the original Vuvuzela paper,
and the solid magenta line (Gaussian noise, µ = 4.1k∗, σ = 320) is computed with this work’s technique.
Next, we illustrate that our method computes bounds that are several orders of magnitude better than
Vuvuzela’s original bounds. For r = 8, 192 observations, Figure 16b illustrates that using the highest
noise conﬁguration with Laplace noise LP(20k, 1130) results in a privacy bound that is almost 3 orders
of magnitude lower, in terms of the delta, and with Gaussian noise GS(20k, 15982) more than 4 orders of
magnitude. The ﬁgure depicts the ε, δ graphs computed by our approach for the highest noise conﬁguration
LP(20k, 1130), for the corresponding Gaussian noise GS(20k, 15982), for the conﬁguration that we propose
GS(4.1k, 8332)), and compares it against Vuvuzela’s previous bounds LP(20k, 1130). We additionally depict
the respective lower bounds, which show that our bounds are quite tight in the sense that there is not much
room for improvement. Moreover, due to the more comprehensive view that a full ε, δ graph provides, we can
see that the the highest noise conﬁguration with Gaussian noise GS(20k, 15982) even achieves the privacy
requirements (δ ≤ 10−4) for less than eε = 1.5 after 8, 192 observations.16
We would like to stress that the lower bounds show that our result is tight up to δ ≥ 10−4 for
GS(4.1k, 8332), δ ≥ 10−6 for LP(20k, 1130), and GS(20k, 15982) for δ ≥ 10−8. This tightness is solely a
scalability issue and ultimately only depends on the number (and hence granularity) of the buckets. A
more optimized implementation (e.g., based on GPUs) would be able to signiﬁcantly increase the number of
buckets, thus achieving even tighter upper and lower bounds.
For completeness, we also show in Figure 16a the ε, δ graphs for the dialing protocol for low r: r = 1024
and the recommended parameters µ = 8k, γ = 500. Here, we can see that our bound is 2 orders of magnitude
lower than Vuvuzela’s previous bounds for the noise level. The ﬁgure also shows that reducing the noise by
a factor of 5, i.e., GS(1.6k, 320), still achieves the privacy requirements (eε ≤ 2 and δ ≤ 10−4).
As a comparison, using Laplace noise only enables a noise reduction of a factor of 2, as shown in Figure 21
in the appendix. Interestingly, the reduced Laplace noise achieves the same privacy bounds as the reduced
Gaussian noise if the Laplace noise has twice the variance as the Gaussian noise (i.e., γ = σ) but a 2.5 times
wider range, as indicated in Section 6. This shows what a signiﬁcant eﬀect the steepness of the Gaussian
noise can have in practice.
16Recall that the variance of GS(µ, (√2x)2) = 2x2 equals the variance of LP(µ, x) = 2x2.
45
1,0004,00016,00012345numberofcompositionsreεdevelopmentofeεoverr8k13k20k4.1k∗1,0004,00016,00000.511.522.53·10−4numberofcompositionsrδdevelopmentofδoverr8k13k20k4.1k∗(a) After r = 1, 024 observations with Gaussian noise
with µ = 1.6k and σ = 320 (solid), Laplace noise µ =
8k, γ = 500 (dashed), and Gaussian noise with µ = 8k
and σ = 707 (dotted), and the red dot represents the
ε, δ combination for µ = 8k, γ = 500 from the original
Vuvuzela paper.
(b) After r = 8, 192 observations with Gaussian noise
with µ = 4.1k and σ = 833 (solid), Laplace noise µ =
20k, γ = 1130 (dashed), and Gaussian noise with µ =
20k and σ = 1598 (dotted), and the red dot represents
the ε, δ combination for µ = 20k, γ = 1130 from the
original Vuvuzela paper.
Figure 16: The (ε, δ) graphs (y-axis and x axis, respectively, y-axis in log10-scale) from our method in
comparison with the bound from the original Vuvuzela paper (for the dialing protocol). The ﬁgure depicts
upper (red) and a lower bounds (blue) and Vuvuzela’s privacy target (green, δ ≤ 10−4, eε ≤ 2).
name
new1
new2
low
µ
15k
45k
150k
medium 300k
450k
high
γ for LP σ2 (used for GS)
—
—
7.3k
13.8k
20k
2.5k2
7.5k2
2 · 7.3k2
2 · 20k2
—
Figure 17: Parameters of our Vuvuzela analysis.
7.3 Tighter privacy analysis for the conversation protocol
Figure 18 depicts the epsilon graph and the delta graph with increasing r, respectively, for the conversation
protocol. We compare Gaussian noise GS-new2 with the previous bounds for the recommended noise conﬁg-
urations. We see that although GS-new2 adds signiﬁcantly less noise, the bounds outperform the ones from
the original analysis.
For r = 524, 288 observations, Figure 19b shows that using LP-high results in bounds for δ that are
almost 4 orders of magnitude lower, and for the corresponding Gaussian noise GS-high more than 6 orders
of magnitude in comparison to their original result. Also, Figure 19b shows the corresponding lower bounds.
We can see that our bounds are tight for reasonably small values of ε. Furthermore, we can see that even
GS-new1 meets the privacy requirements of eε ≤ 2 and δ ≤ 10−4 for r = 524, 288 observations.
For completeness, we also show in Figure 19a the ε, δ graphs for the conversation protocol for r = 65, 536.
Here, we can also see the tightness of our bound for reasonably small ε. We can see that GS-low is more than
7 orders of magnitude lower than Vuvuzela’s previous bounds for the same noise level. Moreover, we can see
that even GS-new2 meets the privacy requirements of eε ≤ 2 and δ ≤ 10−4 for r = 65, 536 observations.
As a comparison, using Laplace noise only enables a noise reduction of a factor of 4, as shown in Figure 20.
46
11.522.5310−1010−910−810−710−610−510−410−310−210−1eεδr=1,024observationsGS(1.6k,3202)∗LP(8k,500)∗GS(8k,7072)∗LP(8k,500)Privacytarget11.522.5310−910−810−710−610−510−410−310−210−1eεδr=8,192observationsGS(4.1k,8332)∗LP(20k,1130)∗GS(20k,15982)∗LP(20k,1130)PrivacytargetFigure 18: Vuvuzela conversation protocol: bounds on ε and δ over r (log-scale). Originally recommended
mechanisms with 150k, 300k, 450k messages overhead per round, analyzed with previous bounds [8], vs our
recommended mechanism with 45k overhead, analyzed using privacy buckets.
(a) After r = 65, 536 observations with Gaussian noise
with µ = 15k and σ = 2.5k (solid), Laplace noise µ =
150k, γ = 7.3k (dashed), and Gaussian noise with µ =
150k and σ = 10.3k (dotted), and the red dot represents
the ε, δ bound for µ = 150k, γ = 7.3k from the original
Vuvuzela paper.
(b) After r = 524, 288 observations with Gaussian noise
with µ = 45k and σ = 7.5k (solid), Laplace noise µ =
450k, γ = 20k (dashed), and Gaussian noise with µ =
450k and σ = 28.2k (dotted), and the red dot represents
the ε, δ bound for µ = 450k, γ = 20k from the original
Vuvuzela paper.
Figure 19: The (ε, δ) graphs (y-axis and x axis, respectively, y-axis in log10-scale) from our method in
comparison with the bound from the original Vuvuzela paper (for the conversation protocol). The ﬁgure
depicts upper (red) and a lower bounds (blue) and Vuvuzela’s privacy target (green area, δ ≤ 10−4, eε ≤ 2).
Also here, we can observe that the Laplace noise has twice the variance of the Gaussian noise and has a 2.5
times wider range, illustrating the advantages of Gaussian noise in practice.
47
10,000100,0001M12345numberofcompositionsreεdevelopmentofeεoverr150k300k450k45k∗10,000100,0001M00.511.522.53·10−4numberofcompositionsrδdevelopmentofδoverr150k300k450k45k∗11.522.533.510−1110−910−710−510−310−1eεδr=65,536observationsGS-new∗1LP-low∗GS-low∗LP-lowPrivacytarget11.522.533.510−1110−910−710−510−310−1eεr=524,288observationsGS-new∗2LP-high∗GS-high∗LP-highPrivacytarget(a) After r = 65, 536 observations with Laplace noise
with µ = 37.5k and σ = 2.3k (solid), Laplace noise
µ = 150k, γ = 7.3k (dashed), and Gaussian noise with
µ = 150k and σ = 10.3k (dotted), and the red dot
represents the ε, δ bound for µ = 150k, γ = 7.3k from
the original Vuvuzela paper.
(b) After r = 524, 288 observations with Laplace noise
with µ = 112.5k and σ = 6.9k (solid), Laplace noise
µ = 450k, γ = 20k (dashed), and Gaussian noise with
µ = 450k and σ = 28.2k (dotted), and the red dot
represents the ε, δ bound for µ = 450k, γ = 20k from
the original Vuvuzela paper.
Figure 20: The (ε, δ) graphs (y-axis and x axis, respectively, y-axis in log10-scale) from our method in
comparison with the bound from the original Vuvuzela paper (for the conversation protocol). The ﬁgure
depicts upper (red) and a lower bounds (blue) and Vuvuzela’s privacy target (green area, δ ≤ 10−4, eε ≤ 2).
8 Conclusion and future work
We have presented privacy buckets, a sound numerical approach for computing upper and lower bounds for
approximate diﬀerential privacy after r-fold composition. We illustrate that our method can derive upper
and lower bounds for diﬀerentially private mechanisms with worst-case distributions. Our method can be
applied in a variety of cases, including adaptive composition, evolving sequences of distributions, and static
distributions. Our bounds have been proven to be sound, and (empirically) illustrated to be tight.
We compared our approach to the Kairouz, Oh and Viswanath’s (KOV) composition theorem, as well as
to the moments accountant (MA) bounds and bounds derived via concentrated diﬀerential privacy (CDP).
We found that the KOV theorem provides reasonably tight bounds for the Laplace mechanism but not for
other distributions, such as the Gauss mechanism or for a pair of histograms of timing-leakage measurements
from the CoverUp system. Our bounds signiﬁcantly improve over MA bounds and CDP bounds, which is
particularly relevant for smaller values of eε. We also observed that the Gauss mechanism behaves much
better under a high number of compositions than a Laplace mechanism with the same variance, and we found
evidence that the (ε, δ)-graph of a Laplace mechanism converges to the (ε, δ)-graph of a Gauss mechanism
with half the variance. By improving the analysis of the anonymity network Vuvuzela we show that tighter
bounds can have a signiﬁcant impact on actual protocols. Our analysis can help to devise better protocols,
e.g., to exchange the Laplace noise with Gaussian noise, for which better results can be achieved.
We encourage the application of our privacy buckets to other ADP mechanisms, such as to the optimal
ADP mechanisms [10, 15] (e.g., comparing their composition behavior to the Gauss mechanism), to measure
the impact of our bounds on precision and recall of privacy-preserving ML methods by using less noise,
and to improve more existing privacy analyses. We consider it interesting for future work to explore the
relationship between the Gauss mechanism and the Laplace mechanism and to analyze the development of
ADP under composition for other noise distributions.
48
11.522.533.510−1110−910−710−510−310−1eεδr=65,536observationsLP(37.5k)∗LP(150k)∗GS(150k)∗LP(150k)Privacytarget11.522.533.510−1110−910−710−510−310−1eεδr=524,288observationsLP(112.5k)∗LP(450k)∗GS(450k)∗LP(450k)Privacytarget9 Acknowledgement
This work has been partially supported by the European Commission through H2020-DS-2014-653497
PANORAMIX, the EPSRC Grant EP/M013-286/1, and the Zurich Information Security Center (ZISC).
We would like to thank the anonymous reviewers of S&P’18 and CCS’18 for their helpful comments and
David Sommer for our discussions and the eﬃcient re-implementation of privacy buckets.
49
References
[1] M. Abadi, A. Chu, I. Goodfellow, H. B. McMahan, I. Mironov, K. Talwar, and L. Zhang. Deep
Learning with Diﬀerential Privacy. In Proceedings of the 2016 ACM SIGSAC Conference on Computer
and Communications Security (CCS), pages 308–318. ACM, 2016.
[2] M. Bun and T. Steinke. Concentrated Diﬀerential Privacy: Simpliﬁcations, Extensions, and Lower
Bounds. In Theory of Cryptography (TCC), pages 635–658. Springer, 2016.
[3] C. Dwork. Diﬀerential Privacy. In Automata, Languages and Programming, 33rd International Collo-
quium, ICALP 2006, Venice, Italy, July 10-14, 2006, Proceedings, Part II, pages 1–12. Springer, 2006.
[4] C. Dwork, K. Kenthapadi, F. McSherry, I. Mironov, and M. Naor. Our Data, Ourselves: Privacy
Via Distributed Noise Generation. In Advances in Cryptology - EUROCRYPT 2006, pages 486–503.
Springer, 2006.
[5] C. Dwork, M. Naor, T. Pitassi, and G. N. Rothblum. Diﬀerential Privacy Under Continual Observation.
In Proceedings of the 42th Annual ACM Symposium on Theory of Computing (STOC), pages 715–724.
ACM, 2010.
[6] C. Dwork and A. Roth. The Algorithmic Foundations of Diﬀerential Privacy. Foundations and Trends
in Theoretical Computer Science, 9(34):211–407, 2014.
[7] C. Dwork and G. N. Rothblum. Concentrated Diﬀerential Privacy. CoRR, abs/1603.01887, 2016.
[8] C. Dwork, G. N. Rothblum, and S. Vadhan. Boosting and diﬀerential privacy. In 2010 51st Annual
IEEE Symposium on Foundations of Computer Science, pages 51–60. IEEE, 2010.
[9] C. Dwork, K. Talwar, A. Thakurta, and L. Zhang. Analyze Gauss: Optimal Bounds for Privacy-
In Proceedings of the 46th Annual ACM Symposium on
preserving Principal Component Analysis.
Theory of Computing (STOC), pages 11–20. ACM, 2014.
[10] Q. Geng and P. Viswanath. The optimal mechanism in diﬀerential privacy. In 2014 IEEE International
Symposium on Information Theory (ISIT), pages 2371–2375. IEEE, 2014.
[11] M. G¨otz, A. Machanavajjhala, G. Wang, X. Xiao, and J. Gehrke. Privacy in Search Logs. CoRR,
abs/0904.0682, 2009.
[12] M. Hardt and G. N. Rothblum. A Multiplicative Weights Mechanism for Privacy-Preserving Data
Analysis. In 2010 51st Annual IEEE Symposium on Foundations of Computer Science, pages 61–70.
Springer, 2010.
[13] T.-H. Hubert Chan, E. Shi, and D. Song. Private and Continual Release of Statistics. In Automata,
Languages and Programming. ICALP 2010, pages 405–417. Springer, 2010.
[14] P. Kairouz, S. Oh, and P. Viswanath. The composition theorem for diﬀerential privacy. IEEE Trans-
actions on Information Theory, 63(6):4037–4049, 2017.
[15] K. Kalantari, L. Sankar, and A. D. Sarwate. Optimal diﬀerential privacy mechanisms under Hamming
distortion for structured source classes. In 2016 IEEE International Symposium on Information Theory
(ISIT), pages 2069–2073. IEEE, 2016.
[16] C. Liu, S. Chakraborty, and P. Mittal. Dependence Makes You Vulnberable: Diﬀerential Privacy Under
Dependent Tuples. In NDSS, 2016.
[17] A. Machanavajjhala, D. Kifer, J. Abowd, J. Gehrke, and L. Vilhuber. Privacy: Theory meets Practice
on the Map. In 2008 IEEE 24th International Conference on Data Engineering, pages 277–286. IEEE,
2008.
[18] S. Meiser. Approximate and Probabilistic Diﬀerential Privacy Deﬁnitions. https://eprint.iacr.org/
2018/277, 2018.
50
[19] S. Meiser and E. Mohammadi. Implementation of privacy buckets (improved implementation by David
Sommer), including FAQ. https://github.com/dabingo/privacybuckets.
[20] I. Mironov. Renyi Diﬀerential Privacy. In Proceedings of the 30th IEEE Computer Security Foundations
Symposium (CSF), pages 263–275. IEEE, 2017.
[21] J. Murtagh and S. Vadhan. The Complexity of Computing the Optimal Composition of Diﬀerential
Privacy. In Proceedings of the 13th International Conference on Theory of Cryptography (TCC), pages
157–175. Springer, 2016.
[22] J. Murtagh and S. P. Vadhan. The Complexity of Computing the Optimal Composition of Diﬀerential
Privacy. CoRR, abs/1507.03113, 2015.
[23] R. M. Rogers, A. Roth, J. Ullman, and S. Vadhan. Privacy Odometers and Filters: Pay-as-you-Go
In Advances in Neural Information Processing Systems 29, pages 1921–1929. Curran
Composition.
Associates, Inc., 2016.
[24] D. Sommer, A. Dhar, L. Malitsa, E. Mohammadi, D. Ronzani, and S. Capkun. Anonymous Com-
munication for Messengers via “Forced” Participation. Technical report, available under https:
//eprint.iacr.org/2017/191, 2017.
[25] J. Tang, A. Korolova, X. Bai, X. Wang, and X. Wang. Privacy Loss in Apple’s Implementation of
Diﬀerential Privacy on MacOS 10.12. ArXiv e-prints, 2017.
[26] J. van den Hooﬀ, D. Lazar, M. Zaharia, and N. Zeldovich. Vuvuzela: Scalable Private Messaging Resis-
tant to Traﬃc Analysis. In Proceedings of the 25th ACM Symposium on Operating Systems Principles
(SOSP 2015), pages 137–152. ACM, 2015.
51
(a) After r = 1, 024 observations with Laplace noise
with µ = 4k and σ = 330 (solid), Laplace noise µ =
8k, γ = 500 (dashed), and Gaussian noise with µ = 8k
and σ = 707 (dotted), and the red dot represents the
ε, δ combination for µ = 8k, γ = 500 from the original
Vuvuzela paper.
(b) After r = 8, 192 observations with Laplace noise
with µ = 10k and σ = 827 (solid), Laplace noise µ =
20k, γ = 1130 (dashed), and Gaussian noise with µ =
20k and σ = 1598 (dotted), and the red dot represents
the ε, δ combination for µ = 20k, γ = 1130 from the
original Vuvuzela paper.
Figure 21: The (ε, δ) graphs (y-axis and x axis, respectively, y-axis in log10-scale) from our method in
comparison with the bound from the original Vuvuzela paper (for the dialing protocol). The ﬁgure depicts
upper (red) and a lower bounds (blue) and Vuvuzela’s privacy target (green, δ ≤ 10−4, eε ≤ 2).
Figure 22: Comparison of bounds for the moments accountant computation.
52
11.522.5310−1010−910−810−710−610−510−410−310−210−1eεδr=1,024observationsLP(4k)∗LP(8k)∗GS(8k)∗LP(8k)Privacytarget11.522.5310−910−810−710−610−510−410−310−210−1eεδr=8,192observationsLP(10k)∗LP(20k)∗GS(20k)∗LP(20k)Privacytarget1002003004002.004.006.008.0010.0012.0014.00numberofepochseεStochasticgradientdescentMAfrombucketsSGDMAoriginalboundSGD