export TEMPLATE_NAME=General_Purpose.dbc
export CHARSET=ZHS16GBK
export PDB_NAME=ORA19CPDB
export CREATE_AS_CDB=true
```
å¤åˆ¶å‚æ•°æ–‡ä»¶
```bash
cd /etc/sysconfig/
cp oracledb_ORCLCDB-19c.conf  oracledb_ORA19C-19c.conf
/etc/init.d/oracledb_ORCLCDB-19c configure
# ç­‰å¾… Oracle æ•°æ®åº“æ‰§è¡Œåˆå§‹åŒ–æ“ä½œå³å¯
```
å¢åŠ ç¯å¢ƒå˜é‡å¤„ç†
```vim
vim /etc/profile.d/oracle19c.sh
export  ORACLE_HOME=/opt/oracle/product/19c/dbhome_1
export  PATH=$PATH:/opt/oracle/product/19c/dbhome_1/bin
export  ORACLE_SID=ORA19C
```
```
source /etc/profile.d/oracle19c.sh
```
```bash
# ä¿®æ”¹ Oracle ç”¨æˆ·çš„å¯†ç :
passwd oracle
# ä½¿ç”¨ Oracle ç™»å½•è¿›è¡Œç›¸å…³çš„å¤„ç†
su - oracle
sqlplus / as sysdba
# æŸ¥çœ‹ pdb ä¿¡æ¯
show pdbs
# ä¿®æ”¹å¯†ç 
alter user system identified by Test1234;
# å¯åŠ¨
startup
exit
# å¯åŠ¨ç›‘å¬å™¨
cd $ORACLE_HOME/bin
lsnrctl start
```
```
systemctl stop firewalld
systemctl disable firewalld
setenforce 0
```
ä½¿ç”¨ navicat è¿æ¥æµ‹è¯•
é»˜è®¤ Oracle æ•°æ®åº“ä¸­çš„ä¸¤ä¸ªå…·æœ‰ DBA æƒé™çš„ç”¨æˆ· Sys å’Œ System çš„ç¼ºçœå¯†ç æ˜¯ managerã€‚
![](../../../assets/img/Integrated/Linux/Power/1.png)
`æ³¨:æˆ‘åœ¨ oracle-database-ee-19c-1.0-1.x86_64 ç¯å¢ƒä¸‹,ä½¿ç”¨ Navicat Premium 12.1.18 å®‰è£… instantclient-basic-windows.x64-12.1.0.2.0 å¯ä»¥æˆåŠŸè¿æ¥`
**æ³¨ : æŠ¥é”™ ORA-03135**
æŠŠæœ¬æœºé˜²ç«å¢™å…³æ‰,é¡ºä¾¿çœ‹ä¸‹æ•°æ®åº“æœåŠ¡å™¨é˜²ç«å¢™æœ‰æ²¡æœ‰æ”¾è¡Œ
**æ³¨ : æŠ¥é”™ ORA-28547:connection to server failed, probable Oracle Net admin error**
`oci.dll` ç‰ˆæœ¬ä¸å¯¹.å› ä¸º Navicat æ˜¯é€šè¿‡ Oracle å®¢æˆ·ç«¯è¿æ¥ Oracle æœåŠ¡å™¨çš„,Oracle çš„å®¢æˆ·ç«¯åˆ†ä¸ºä¸¤ç§,ä¸€ç§æ˜¯æ ‡å‡†ç‰ˆ,ä¸€ç§æ˜¯ç®€æ´ç‰ˆ,å³ Oracle Install Client.è€Œæˆ‘ä»¬ç”¨ Navicat æ—¶é€šå¸¸ä¼šåœ¨è‡ªå·±çš„å®‰è£…è·¯å¾„ä¸‹åŒ…å«å¤šä¸ªç‰ˆæœ¬çš„ OCI,å¦‚æœä½¿ç”¨ Navicat è¿æ¥ Oracle æœåŠ¡å™¨å‡ºç° ORA-28547 é”™è¯¯æ—¶,å¤šæ•°æ˜¯å› ä¸º Navicat æœ¬åœ°çš„ OCI ç‰ˆæœ¬ä¸ Oracle æœåŠ¡å™¨æœåŠ¡å™¨ä¸ç¬¦é€ æˆçš„.
OCI ä¸‹è½½åœ°å€ : https://www.oracle.com/database/technologies/instant-client/downloads.html ,è§£å‹ instantclient-basic-win-x64
æ‰“å¼€ navicat,ä¸€æ¬¡é€‰æ‹©:å·¥å…·->é€‰é¡¹->ç¯å¢ƒ-->OCI ç¯å¢ƒ,é€‰æ‹©åˆšæ‰è§£å‹å¥½çš„ instantclient-basic-win-x64 ç›®å½•ä¸­çš„ oci.dll æ–‡ä»¶å³å¯,é‡å¯ navicat
**æ³¨ : æŠ¥é”™ oracle library is not loaded**
è¿˜æ˜¯ oci.dll ç‰ˆæœ¬ä¸å¯¹,æ¢ä¸ªä½ç‰ˆæœ¬çš„ Instant Client ğŸ¤£
**æ³¨ : æŠ¥é”™ ORA-28040: No matching authentication protocol**
è¿™ä¸ªè¿˜æ˜¯ oci.dll ç‰ˆæœ¬ä¸å¯¹,å†æ¢ä¸ªé«˜ç‰ˆæœ¬çš„ Instant Client ğŸ˜‚
**åˆ›å»ºç”¨æˆ·**
oracle å†…éƒ¨æœ‰ä¸¤ä¸ªé»˜è®¤çš„ç”¨æˆ·ï¼š`system` å’Œ `sys`ã€‚ç”¨æˆ·å¯ç›´æ¥ç™»å½•åˆ° `system` ç”¨æˆ·ä»¥åˆ›å»ºå…¶ä»–ç”¨æˆ·ï¼Œå› ä¸º `system` å…·æœ‰åˆ›å»ºåˆ«çš„ç”¨æˆ·çš„æƒé™ã€‚ åœ¨å®‰è£… oracle æ—¶ï¼Œç”¨æˆ·æˆ–ç³»ç»Ÿç®¡ç†å‘˜é¦–å…ˆå¯ä»¥ä¸ºè‡ªå·±å»ºç«‹ä¸€ä¸ªç”¨æˆ·ã€‚
```
è¯­æ³•[åˆ›å»ºç”¨æˆ·]ï¼š create user ç”¨æˆ·å identified by å£ä»¤[å³å¯†ç ]ï¼›
ä¾‹å­ï¼š create user test identified by test;
è¯­æ³•[æ›´æ”¹ç”¨æˆ·]: alter user ç”¨æˆ·å identified by å£ä»¤[æ”¹å˜çš„å£ä»¤];
ä¾‹å­ï¼š alter user test identified by 123456;
```
> æ³¨æ„ : æ­¤å¤„åªæ˜¯ä¸ºäº†æ–¹ä¾¿æ¼”ç¤º,ç”Ÿäº§ç¯å¢ƒä¸‹è¯·ä¸è¦ä½¿ç”¨ç±»ä¼¼ 123456 è¿™ç±»å¼±å£ä»¤
åˆ›å»ºç”¨æˆ·çš„æ—¶å€™ç”¨æˆ·åä»¥ `c##` æˆ–è€… `C##` å¼€å¤´å³å¯ã€‚
```
é”™è¯¯å†™æ³•ï¼šcreate user test identified by oracle;
æ­£ç¡®å†™æ³•ï¼šcreate user c##test identified by oracle;
```
**å…³é—­**
```
su - oracle
sqlplus / as sysdba
shutdown
```
æ•´ä¸ªå¯åŠ¨å’Œå…³é—­çš„è¿‡ç¨‹éƒ½ä¼šè®°å½•åœ¨ alert æ—¥å¿—æ–‡ä»¶ä¸­ã€‚
**docker éƒ¨ç½²**
```bash
# https://github.com/wnameless/docker-oracle-xe-11g
docker pull wnameless/oracle-xe-11g-r2
docker run -d -p 1521:1521 -e ORACLE_ALLOW_REMOTE=true wnameless/oracle-xe-11g-r2
# https://hub.docker.com/r/gvenzl/oracle-xe
docker pull gvenzl/oracle-xe:11
docker run -d -p 1521:1521 -e ORACLE_PASSWORD=123123123 gvenzl/oracle-xe:11
```
---
#### Mariadb
**å®˜ç½‘**
- https://mariadb.org/
**å®‰è£…**
- Centosä¸‹
  ```bash
  yum install -y mariadb mariadb-server
  ```
- Ubuntuä¸‹
  ```bash
  apt -y install mariadb-server mariadb-client
  ```
**æ•°æ®åº“åˆå§‹åŒ–**
```bash
systemctl start mariadb
mysql_secure_installation
```
|é…ç½®æµç¨‹ 	|è¯´æ˜ |æ“ä½œ|
|------------ | ------------- | ------------|
Enter current password for root (enter for none) |	è¾“å…¥ root å¯†ç  	| åˆæ¬¡è¿è¡Œç›´æ¥å›è½¦
Set root password? [Y/n] |	æ˜¯è®¾ç½® root å¯†ç  |	å¯ä»¥ y æˆ–è€… å›è½¦
New password |	è¾“å…¥æ–°å¯†ç 
Re-enter new password |	å†æ¬¡è¾“å…¥æ–°å¯†ç 
Remove anonymous users? [Y/n] |	æ˜¯å¦åˆ é™¤åŒ¿åç”¨æˆ· | å¯ä»¥ y æˆ–è€…å›è½¦ æœ¬æ¬¡ y
Disallow root login remotely? [Y/n]  |	æ˜¯å¦ç¦æ­¢ root è¿œç¨‹ç™»å½• |  å¯ä»¥ y æˆ–è€…å›è½¦ æœ¬æ¬¡ n
Remove test database and access to it? [Y/n]  |	æ˜¯å¦åˆ é™¤ test æ•°æ®åº“ | y æˆ–è€…å›è½¦ æœ¬æ¬¡ y
Reload privilege tables now? [Y/n] | æ˜¯å¦é‡æ–°åŠ è½½æƒé™è¡¨ | y æˆ–è€…å›è½¦ æœ¬æ¬¡ y
**é…ç½®è¿œç¨‹è®¿é—®**
Mariadb æ•°æ®åº“æˆæƒ root ç”¨æˆ·èƒ½å¤Ÿè¿œç¨‹è®¿é—®
```bash
systemctl start mariadb
mysql -u root -p
select User, host from mysql.user;
GRANT ALL PRIVILEGES ON *.* TO 'root'@'%'IDENTIFIED BY 'toor' WITH GRANT OPTION;
# è¿™å¥è¯çš„æ„æ€ ï¼Œå…è®¸ä»»ä½• IP åœ°å€ï¼ˆä¸Šé¢çš„ % å°±æ˜¯è¿™ä¸ªæ„æ€ï¼‰çš„ç”µè„‘ ç”¨ root å¸æˆ· å’Œå¯†ç  toor æ¥è®¿é—®è¿™ä¸ªæ•°æ®åº“
FLUSH PRIVILEGES;
exit
```
> æ³¨æ„ : æ­¤å¤„åªæ˜¯ä¸ºäº†æ–¹ä¾¿æ¼”ç¤º,ç”Ÿäº§ç¯å¢ƒä¸‹è¯·ä¸è¦ä½¿ç”¨ç±»ä¼¼ toor è¿™ç±»å¼±å£ä»¤
- Centosä¸‹
  ```bash
  firewall-cmd --permanent --add-service=mysql
  firewall-cmd --reload
  systemctl enable mariadb
  systemctl restart mariadb
  ```
- Ubuntuä¸‹
  ```bash
  vim /etc/mysql/mariadb.conf.d/50-server.cnf
  # æ³¨é‡Šæ‰ bind-address = 127.0.0.1 è¿™ä¸€è¡Œ
  systemctl restart mariadb
  ```
**é‡ç½®å¯†ç **
```bash
# å…ˆå…³æœåŠ¡
systemctl stop mariadb
# ç”¨ä»¥ä¸‹å‘½ä»¤åœ¨æ²¡æœ‰æƒé™æ£€æŸ¥çš„æƒ…å†µä¸‹é‡æ–°å¯åŠ¨æ•°æ®åº“
mysqld_safe --skip-grant-tables &
# è¿™é‡Œ, --skip-grant-tables é€‰é¡¹è®©ä½ åœ¨æ²¡æœ‰å¯†ç å’Œæ‰€æœ‰æƒé™çš„æƒ…å†µä¸‹è¿›è¡Œè¿æ¥.å¦‚æœä½¿ç”¨æ­¤é€‰é¡¹å¯åŠ¨æœåŠ¡å™¨,å®ƒè¿˜ä¼šå¯ç”¨ --skip-networking é€‰é¡¹,è¿™ç”¨äºé˜²æ­¢å…¶ä»–å®¢æˆ·ç«¯è¿æ¥åˆ°æ•°æ®åº“æœåŠ¡å™¨.å¹¶ä¸”,& ç¬¦å·ç”¨äºåœ¨åå°è¿è¡Œå‘½ä»¤,å› æ­¤ä½ å¯ä»¥åœ¨ä»¥ä¸‹æ­¥éª¤ä¸­è¾“å…¥å…¶ä»–å‘½ä»¤.è¯·æ³¨æ„,ä¸Šè¿°å‘½ä»¤å¾ˆå±é™©,å¹¶ä¸”ä½ çš„æ•°æ®åº“ä¼šå˜å¾—ä¸å®‰å…¨.ä½ åº”è¯¥åªåœ¨çŸ­æ—¶é—´å†…è¿è¡Œæ­¤å‘½ä»¤ä»¥é‡ç½®å¯†ç .
# æ¥ä¸‹æ¥,ä»¥ root ç”¨æˆ·èº«ä»½ç™»å½• MySQL/MariaDB æœåŠ¡å™¨:
mysql
# åœ¨ mysql > æˆ– MariaDB [(none)] > æç¤ºç¬¦ä¸‹,è¿è¡Œä»¥ä¸‹å‘½ä»¤é‡ç½® root ç”¨æˆ·å¯†ç :
UPDATE mysql.user SET Password=PASSWORD('NEW-PASSWORD') WHERE User='root';
# ä½¿ç”¨ä½ è‡ªå·±çš„å¯†ç æ›¿æ¢ä¸Šè¿°å‘½ä»¤ä¸­çš„ NEW-PASSWORD.
# ç„¶å,è¾“å…¥ä»¥ä¸‹å‘½ä»¤é€€å‡º mysql æ§åˆ¶å°.
FLUSH PRIVILEGES;
exit
# æœ€å,å…³é—­ä¹‹å‰ä½¿ç”¨ --skip-grant-tables é€‰é¡¹è¿è¡Œçš„æ•°æ®åº“.ä¸ºæ­¤,è¿è¡Œ:
mysqladmin -u root -p shutdown
# ç³»ç»Ÿå°†è¦æ±‚ä½ è¾“å…¥åœ¨ä¸Šä¸€æ­¥ä¸­è®¾ç½®çš„ MySQL/MariaDB ç”¨æˆ·å¯†ç .
systemctl start mariadb
mysql -u root -p  # æœ¬åœ°è¿æ¥
```
**è¿æ¥è¿œç¨‹æ•°æ®åº“**
`mysql -u ç”¨æˆ·å -på¯†ç  -h æœåŠ¡å™¨IPåœ°å€ -P æœåŠ¡å™¨ç«¯å£å· -D æ•°æ®åº“å`
- æœåŠ¡å™¨ç«¯å£æ ‡å¿— -P ä¸€å®šè¦å¤§äº›ä»¥åŒºåˆ«äºç”¨æˆ· -p,å¦‚æœç›´æ¥è¿æ¥æ•°æ®åº“æ ‡å¿— -D ä¹Ÿè¦å¤§å†™ï¼›
- å¦‚æœè¦ç›´æ¥è¾“å…¥å¯†ç  -p åé¢ä¸èƒ½ç•™æœ‰ç©ºæ ¼å¦‚ -pmypassword;
- å‘½ä»¤ç»“æŸæ®µæ²¡æœ‰';'åˆ†å·ã€‚
ä¾‹å¦‚ : `mysql -u root -p123456 -h 192.168.1.1 -P 3306 -D test`
**å¯¼å…¥ .sql æ–‡ä»¶**
```sql
mysql -u root -p
use [æ•°æ®åº“]
source /tmp/dbname.sql
```
**docker éƒ¨ç½²**
```bash
docker login
docker run -d -p 3306:3306 --name mariadb-test -e MYSQL_ROOT_PASSWORD=root1234 mariadb:latest
# è¿™é‡Œå¯†ç é‡Œä¸èƒ½å¸¦ !
```
---
#### MySQL
**å®˜ç½‘**
- https://www.mysql.com
**å®‰è£…**
å’Œ Mariadb å·®ä¸å¤š,çœ‹ Mariadb çš„å°±è¡Œäº†
- Ubuntu
  ```
  apt install -y mysql-server mysql-client
  ```
- Centos
  ```bash
  yum install -y yum-utils
  wget https://repo.mysql.com//mysql80-community-release-el7-1.noarch.rpm
  rpm -ivh mysql80-community-release-el7-1.noarch.rpm
  yum-config-manager --disable mysql80-community
  yum-config-manager --enable mysql57-community
  yum install -y mysql-community-server mysql-community-devel
  ```
**é…ç½®**
```bash
systemctl enable mysqld
# åˆå§‹åŒ– mysql
/usr/bin/mysqld -initialize -basedir=/usr/share/mysql -datadir=/var/lib/mysql/data/
# æˆ–
/usr/bin/mysql -initialize -basedir=/usr/share/mysql -datadir=/var/lib/mysql/data/
```
```bash
systemctl start mysqld
mysql -uroot -p
use mysql;
update user set authentication_string=password('123456') where user='root';
FLUSH PRIVILEGES;
exit
```
> æ³¨æ„ : æ­¤å¤„åªæ˜¯ä¸ºäº†æ–¹ä¾¿æ¼”ç¤º,ç”Ÿäº§ç¯å¢ƒä¸‹è¯·ä¸è¦ä½¿ç”¨ç±»ä¼¼ 123456 è¿™ç±»å¼±å£ä»¤
my.cnf é…ç½®æ–‡ä»¶å†…å®¹è§ç¬”è®° [mysql](./å®éªŒ/mysql.md)
**é…ç½®è¿œç¨‹è¿æ¥**
```bash
mysql -u root -p
select User, host from mysql.user;
GRANT ALL PRIVILEGES ON *.* TO 'root'@'%'IDENTIFIED BY '123456' WITH GRANT OPTION;
FLUSH PRIVILEGES;
exit
```
> æ³¨æ„ : æ­¤å¤„åªæ˜¯ä¸ºäº†æ–¹ä¾¿æ¼”ç¤º,ç”Ÿäº§ç¯å¢ƒä¸‹è¯·ä¸è¦ä½¿ç”¨ç±»ä¼¼ 123456 è¿™ç±»å¼±å£ä»¤
```bash
firewall-cmd --permanent --add-service=mysql
firewall-cmd --reload
```
**è¿œç¨‹è®¿é—®æŠ¥é”™ Table 'performance_schema.session_variables' doesn't exist**
```bash
mysql_upgrade -u root -p --force
systemctl restart mysqld
```
---
#### Postgresql
**å®˜ç½‘**
- https://www.postgresql.org
**å®‰è£…**
```bash
yum install -y postgresql-server
postgresql-setup initdb   # åˆå§‹åŒ–æ•°æ®åº“
service postgresql start  # å¯åŠ¨æœåŠ¡
```
PostgreSQL å®‰è£…å®Œæˆå,ä¼šå»ºç«‹ä¸€ä¸‹ â€˜postgresâ€™ ç”¨æˆ·,ç”¨äºæ‰§è¡Œ PostgreSQL,æ•°æ®åº“ä¸­ä¹Ÿä¼šå»ºç«‹ä¸€ä¸ª 'postgres' ç”¨æˆ·,é»˜è®¤å¯†ç ä¸ºè‡ªåŠ¨ç”Ÿæˆ,éœ€è¦åœ¨ç³»ç»Ÿä¸­æ”¹ä¸€ä¸‹.
**ä¿®æ”¹ç”¨æˆ·å¯†ç **
```bash
sudo -u postgres psql postgres
\l                  # æŸ¥çœ‹å½“å‰çš„æ•°æ®åº“åˆ—è¡¨
\password postgres  # ç»™ postgres ç”¨æˆ·è®¾ç½®å¯†ç 
\q                  # é€€å‡ºæ•°æ®åº“
```
**å¼€å¯è¿œç¨‹è®¿é—®**
```vim
vim /var/lib/pgsql/data/postgresql.conf
listen_addresses='*'
```
```vim
vim /var/lib/pgsql/data/pg_hba.conf
# IPv4 local connections:
host    all             all             127.0.0.1/32            md5
host    all             all             0.0.0.0/0               md5
# å…¶ä¸­ 0.0.0.0/0 è¡¨ç¤ºè¿è¡Œä»»æ„ ip åœ°å€è®¿é—®.
# è‹¥è®¾ç½®ä¸º 192.168.1.0/24 åˆ™è¡¨ç¤ºå…è®¸æ¥è‡ª ip ä¸º 192.168.1.0 ~ 192.168.1.255 ä¹‹é—´çš„è®¿é—®.
```
`service postgresql restart` é˜²ç«å¢™è®°å¾—æ”¾è¡Œ
---
### Document
#### MongoDB
**å®˜ç½‘**
- https://www.mongodb.com/
**å®‰è£…**
```vim
vim /etc/yum.repos.d/mongodb-org-4.0.repo
[mongodb-org-4.0]
name=MongoDB Repository
baseurl=https://repo.mongodb.org/yum/redhat/$releasever/mongodb-org/4.0/x86_64/
gpgcheck=1
enabled=1
gpgkey=https://www.mongodb.org/static/pgp/server-4.0.asc
```
```bash
yum install -y mongodb-org
```
**é…ç½®è¿œç¨‹è®¿é—®**
```vim
vim /etc/mongod.conf
# Listen to all ip address
bind_ip = 0.0.0.0
```
```bash
service mongod start
```
**åˆ›å»ºç®¡ç†å‘˜ç”¨æˆ·**
```sql
mongo
>use admin
 db.createUser(
  {
    user: "myUserAdmin",
    pwd: "abc123",
    roles: [ { role: "userAdminAnyDatabase", db: "admin" }, "readWriteAnyDatabase" ]
  }
 )
> show dbs;	    # æŸ¥çœ‹æ•°æ®åº“
> db.version();	# æŸ¥çœ‹æ•°æ®åº“ç‰ˆæœ¬
```
**å¯ç”¨æƒé™ç®¡ç†**
```vim
vim /etc/mongod.conf
#security
security:
authorization: enabled
```
```bash
service mongod restart
```
---
### Key-value
#### Redis