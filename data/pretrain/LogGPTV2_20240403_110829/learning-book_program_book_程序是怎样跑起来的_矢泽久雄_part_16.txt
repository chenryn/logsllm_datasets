图6-7中列出了各种格式的图像文件。其中，原始的图像文件是
BMP格式。通过此图可以看出，JPEG格式和GIF格式的图像文件有
一些模糊。这是因为JIPEG格式的文件是非可逆压缩，因此还原后的
①数码相机中经常用到的JIPEG格式文件，有3种压缩方式。
（1）把构成围像的点阵的颜色信息由RGB（红色、绿色、蓝色）形式转化
成YCbCr（亮度、蓝色色度、红色色度）形式。我们知道，人眼对亮度很
敬感，但对颜色的变化却有些迟钝。因此，人眼比较敏感的亮度Y就是一
个很重要的参数，而表示颜色的Cb、Cr则没有那么重要。于是我们就可
以通过减少Cb和Cr的信息间距来缩小图像数据的大小。
（2）将每个点的色素变化看作是波形的信号变化，进行傅里叶变换。傅里叶变
换是指将波形按照频率分量进行分解。照片等图像文件的特点是低频率（柔和
的颜色变化）的部分较多，高频率（强烈的的颜色变化）的部分较少。因此，这
亚我们就可以把高频率的部分剪切掉。这样一来，图像数据也就会缩小。虽
然剪切掉了高频率部分，但人眼分辨不出什么差别。不过，如果是用Wndows
画笔描绘的简单图形，其中颜色变化强烈的部分就会出现模糊现象。大家不
妨使用Windows西笔做一个图形或者四方形的图形，并将其保存成JIPEG格
式。然后再打开这个JIPEG文件，你就会发现额色变化强烈的部分变模了。
（3）最后，将已经疫身的图像数据通过哈夫曼算法进行压缩。这样就可以
使图像数据进一步缩小。
更多资料请关注裁的新浪薄客http：//blog
---
## Page 126
第6章亲自尝试压维数据
图像信息有一部分是模糊的。而GIF格式的文件虽然是可逆压缩，但
因为有色数不能超过256色的限制，所以还原后颜色信息会有一些缺
失，进面导致了图像模糊。TIFF格式的图像文件虽然不模糊，但却比
原始的BMP格式的文件还要大，这是为什么呢？我们知道，TIFF格
式的文件中带有各种标签信息，是可以选择压缩格式的，而这里选择
的是与BMP同样的无压缩方式。但由于与原始的图像数据相比，TIFF
格式的文件中附加了标签信息，所以结果就比BMP格式的文件更大了。
日释
BMP形式
（30054字节）
S
日释
JPEG形式
（3306字节）
日释
TIFF形式
（40238字节）
S
日释
GIF形式
（2056字节）
S
图6-7各种形式的图像文件的画质对比
---
## Page 127
6.7可逆压维和非可逆压维
压缩算法的种类大概有一二十种。之所以会存在如此多的压缩算
法，是因为压缩比率、压缩需要的处理时间（程序的复杂程度）以及各
种文件的需求等是不一样的。因此，至今学界都不能提出一个万能的
压缩算法。而这也为各位读者提供了一个展露才能的机会。大家不妨
尝试一下，自己原创一个压缩算法。不过有一点需要注意，文本文件
不能进行非可逆压缩。至于原因，想必大家也都清楚了吧。
接下来的一章，我们将会返回到本书的主题，对程序的运行环境
进行说明。
---
## Page 128
CoLUMN
如果是你，
你会怎样介绍？
向沉迷游戏的中学生讲解内存和磁盘
笔者：你现在最想要的东西是什么？
笔者：CD就像唱片一样，是通过
中学生：现在？游戏机呗。
表面的凹凸来存储软件的，这一
笔者：那你都有什么游戏机啊？
点想必你也知道吧。那么盒式题
中学生：任天堂 DS 和 PlayStation。
带中是什么样子你知道吗？
笔者：（太好了！这样就可以向他
中学生：简单啊。里面有内存啊。
讲解内存和磁盘了）嗯嗯。那么，
笔者：了不起！答对了！那你知道
任天堂DS使用的是盒式磁带，
内存是如何存储软件的吗？
PlayStation使用的是 CD，对吧。
中学生：
磁盘和CD有什么不同呢？
笔者：是通过电流的有无来存储
中学生：CD可以存放大量的数据，
的。你可以这样理解，有电流时
另外图像和声音也很有冲击力啊。
是凸，无电流时是凹。
笔者：说得对！说得对！你知道
中学生：那么，为什么CD能存储
吗，任天堂DS 和PlayStation都是
更多的数据呢？
计算机的一种。计算机不仅可以玩
笔者：（噢，这还真是个难题
游戏。也可以进行文档处理和上网，
怎么回答好呢…有了！盒式磁
所以说任天堂DS和 PlayStation 就
带使用大量内存的话也可以放人
是游戏专用的计算机。
大量数据啊。不过，到时候1个
中学生：这个我也知道啊。
盒式磁带就要几千元了。
笔者：计算机是运行软件的机械设
中学生：几千元，买不起啊。
备，这些软件可以放在磁盘及CD
笔者：对啊。正是因为如此，数据
中，这些你知道吧？
量大的软件才放在成本较低的CD
中学生：当然知道了。
中进行存储。不过，CD中存储的
---
## Page 129
软件，也要复制到游戏机的内存
中才能运行。
中学生：那不就是说，最后还是用
笔者：确实是这样，游戏机的内
存，只能故人少量的数据。因此，
游戏机是一边把CD中存储的软件
部分复制入内存，一边运行游戏的。
中学生：怪不得游戏中会出现
Loading..呢。原来如此，明白了。
笔者：对，就是这样！正如刚才所
中学生：原来如此啊。
说的，计算机中用来存储数据的
笔者：明白了吗？
手段，有类似于CD这样的磁盘和
中学生：知道啦。
内存这两种。面且从现状来看。
笔者：确定？
磁盘比内存要便宜。
中学生：确定。我要继续玩游戏
中学生：那么，所有的游戏都放在
去了。
磁盘中的话不也挺好嘛。
笔者：那么，刚才玩游戏时的数
笔者：这个提议显说不错，但正如刚
据，存储在了什么地方你知道吗？
才所说的那样，游戏要在游戏机
中学生：这个话题，咱们就不说
中运行必须要复制到内存中才行。
了吧
中学生：盒式磁盘的数据也要复制
笔者：喂，等一下！
到内存中吗？
中学生：Byebye！
笔者：不用。盒式碰带的情况下。
可以将游戏机主机的内存完整置
换，所以不需要往内存中复制数
据。只有磁盘才必须把数据复制
到内存中。
---
## Page 131
.7
第
章
程序是在何种环境中运行的
热身问答
阅读正文前，让我们先回答下面的问题来热热身吧。
1.应用的运行环境，指的是什么？
2.Macintosh用的操作系统（MacOS），在AT兼容机上能运
行吗？
3.Windows上的应用，在MacOS上能运行吗？
4.FreeBSD提供的Ports，指的是什么？
5.在Macintosh上可以利用的Windows环境模拟器称为什么？
6.Java虚拟机的功能是什么？
更多资料请关注我的新浪薄客t
---
## Page 132
第7章程序是在何种环境中运行的
怎么样？是不是发现有一些问题无法简单地解释清楚呢？下面
是笔者的答案和解析，供大家参考。
1.操作系统和计算机本身（硬件）的种类
2.无法运行
3.无法运行
4.通过使用源代码来提供应用，并根据运行环境进行整合编译，
从而得以在该环境下运行的机制
5. Virtual PC for Mac
6.运行Java应用的字节代码
解析
1.应用的运行环境通常是用类似于Windows（OS）和AT兼容机
（硬件）这样的OS和硬件的种类来表示的。
2.不同的硬件种类需要不同的操作系统。
3.应用是为了在特定操作系统上运行而作成的。
4.FrceBSD是一种Unix操作系统。通过在各个环境中编译Ports
中公开的代码，就可以执行由此生成的本地代码了。
5.模拟器是指在Macintosh上提供虚拟的Windows环境。
6.只要分别为各个环境安装专用的Java虚拟机，同样的字节代码
就能在各种环境下运行了。
---
## Page 133
7.1运行环境=操作系统+硬件
本章
重点
由于同一个程序能被大量用户使用，所以说程序
具有很大的价值。如果将程序拿来出售的话，只要销
量大，肯定就能收到非常可观的利润。而即便是自由软件（free sot）。，
若是有大量用户使用的话，那也是一件让人高兴的事情。大家也都希
望自己编写的程序被尽可能多的用户喜欢并使用吧。但是，如果运行
环境不同，程序是无法运行的。例如，在Macintosh上直接运行
Windows用的程序，基本上是无法实现的。大家都知道这是因为运行
环境不同造成的。那么，运行环境不同指的是什么呢？为什么运行环
境不同，应用就无法运行呢？本章将对这些问题进行解答，并介绍多
个解决方法。
7.1
运行环境=操作系统+硬件
程序中包含着运行环境这一内容。大家手头若是有购买的应用软
件的话，可以稍微观察一下它的安装包或者目录。通常在某个位置会
写有“运行环境”这一项。例如，2007Microsof OfficeSystem（下文
简称为Office2007）需要的运行环境，就如表7-1所示。从中可以看
出，在表示程序的运行环境时，列出了OperatingSystem（操作系统）
和计算机的主机（硬件）两项，由此，大家可以清楚地知道运行环境
是这两者的综合。也就是说，操作系统和硬件决定了程序的运行环境。
①自由软件一般都是免费的。用户可以从互联网上下载，或者从书、杂志等
谢带的D-ROM中获取。
更多资料请关注裁的新浪薄客http：//blo
---
## Page 134
第7章程序是在何种环境中运行的
表7-12007Microsoft Ofice sylem的运行环境（这里省略了部分内容）
日语版操作系统
Microsoft Windows XP Service Pack(SP)2.
Windows Server 2003SP1及以上版本的操作系统
计算机和CPU（PC/AT兼容机）50OMHZ以上的CPU
内存
256MB以上的内存，需要高速检索的情况下，推荐
使用512MB以上的内存
硬盘
2GB以上的剩余空间，安装后，删除硬盘上下载的
安装包的话。会稍微释放出一点空间
显示器
1024x768以上的高解析度显示器
磁盘设备
CD-ROM驱动器或者DVD-ROM驱动器
同一类型的硬件可以选择安装多种操作系统。例如，同样的AT兼
容机中，既可以安装Windows，也可以安装Linux”等操作系统。正因
为如此，Ofice2007的运行环境中，把硬件和操作系统的种类这两方
面内容都列了出来（图7-1）。不过，Windows及Linux操作系统也存在
多种版本。根据应用的具体情况，有时只有在特定版本的操作系统上
才能运行。
从程序的运行环境这一角度来考量硬件时，CPU的种类是特别重
要的参数。为了保证Office2007的正常运行，需要具备Pentium等被
称为x86的CPU（微处理器）。
①AT兼容机是指，可以和IBM开发的PC/AT在硬件上相互景容的计算机的
总称。称为“PC/AT兼容机”和“DOS/V机”。现在审面上销售的大部分
计算机都是AT兼容机。另外，IBM现在已经把计算机事业部卖给了联想。
②Linux是1991年林尔辛基大学的Linus Torvalds开发的Unix系操作系统
发布后得到了很多有志者的协助，为其追加了大量的功能。在服务端操作
系统中占有比较高的比率。
③美国Intel 的微处理器，是按照8086、80286、80386、80486、Pentium
这样的雁序不断升级的。图为这些型号的后面都带有86，所以恶称为x86。