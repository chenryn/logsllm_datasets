User: 请解答这个和日志有关的问题iredmail - Emails go out but don't come in I setup an iredmail server so that my website can send registration emails and all that sort of thing. Problem is, it can send mail just fine (And even inbox) but it can't receive. Port 25 is open, the daemon is running, mx records are set but no go. I used this tool at mxtoolbox.com and it shows this:



with raw connection output of:

Connecting to 167.**.***.***

220 mail.*******.com ESMTP Postfix [658 ms]
EHLO EC2AMAZ-CT1LM3F.mxtoolbox.com
250-mail.*******.com
250-PIPELINING
250-SIZE 15728640
250-ETRN
250-STARTTLS
250-AUTH PLAIN LOGIN
250-ENHANCEDSTATUSCODES
250-8BITMIME
250-DSN
250 SMTPUTF8 [720 ms]
MAIL FROM:&lt;supertool@mxtoolbox.com&gt;
250 2.1.0 Ok [719 ms]
RCPT TO:&lt;test@mxtoolboxsmtpdiag.com&gt;
450 4.7.1 &lt;EC2AMAZ-CT1LM3F.mxtoolbox.com&gt;: Helo command rejected: Host not found [704 ms]

LookupServerv2 3426ms


Hostname redacted from raw log but you can see it in the screenshot if you have some test to run. The email address I'm trying to receive to is site@.

So again, looks good but can't receive to inbox at the domain. I would consider reinstalling everything or maybe using something other than iredmail but when you have a setup that's inboxing (Often difficult to achieve) at major providers, it's a tough decision to tear it down.

Assistant: I'm also using iredmail, works just fine. Just tried to send an email to postmaster@ Check if it arrived (and if not, look in the /var/log/maillog.

I see in the sending mailserver (my server) 
Oct 18 10:35:49 mail2 postfix/smtp[10616]: E42553104C: to=, relay=mail.YourDomain.com[167.xx.xx.xx]:25, delay=326, delays=325/0.02/0.74/0.19, dsn=4.7.1, status=deferred (host mail.YourDomain.com[167.xx.xx.xx] said: 451 4.7.1 : Recipient address rejected: Intentional policy rejection, please try again later (in reply to RCPT TO command)
strong text
This means that the policy server iRedAPD in iRedmail is kicking in. Probably Greylisting. Try first to disable it. See https://docs.iredmail.org/manage.iredapd.html

Just now (10:45 CET) the mail got delivered. That means that the Greylisting timeout is set to 10 minutes in your server. It can be configured in /opt/iredapd/settings.py
See examples in /opt/iredapd/libs/default_settings.py
After modifying, restart the iredapd service