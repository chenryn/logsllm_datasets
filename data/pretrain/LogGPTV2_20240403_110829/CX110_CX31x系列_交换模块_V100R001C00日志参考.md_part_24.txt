日志含义
收到的Level-1的PDU的头部中支持的最大区域地址数与本地支持的最大区域地址数不
匹配。
日志参数
参数名称 参数含义
[isisSysInstance] ISIS进程号。
[isisSysLevelIndex] ISIS级别。
[isisPduMaxAreaAddress] 最大区域地址数。
[isisCircIndex] 接口索引。
文档版本 09 (2017-09-04) 华为专有和保密信息 223
版权所有 © 华为技术有限公司
CX110&CX31x系列 交换模块
日志参考 28 ISIS
参数名称 参数含义
[isisCircIfIndex] 接口IF索引。
[isisPduFragment] 64字节报文头缩略。
[ifIndex] 接口IF索引。
[IfName] 接口名称。
可能原因
1．如果是由于硬件故障触发该日志，可能造成路由震荡，CPU使用率升高。
2．如果是由于设备互通触发该日志，造成邻居无法建立，路由也无法相互学习。
处理步骤
步骤1 对照ISO10589定义的IS-IS报文格式，从输出信息的二进制报文中找到isisPduFragment
字段（十六进制）的内容，查看源的System ID。然后，根据输出信息中的
isisPduMaxAreaAddress字段的值检查最大区域地址数是否被配置为其他值（即非0和3
的值）。
l 如果是，请执行步骤2。
l 如果不是，请执行步骤3。
表28-5 IS-IS报文类型和System ID的查找方法
报文类型的查找方法 System ID的查找方法
Hello：[isisPduFragment]字段的第5个字 从[isisPduFragment]字段的第10个字节开
节的值为0f、10或者11。 始，连续的6个字节是System ID。
LSP：[isisPduFragment]字段的第5个字节 从[isisPduFragment]字段的第13个字节开
的值为12或者14。 始，连续的6个字节是System ID。
SNP：[isisPduFragment]字段的第5个字节 从[isisPduFragment]字段的第11个字节开
的值为18、19、20或者21。 始，连续的6个字节是System ID。
步骤2 修改源最大区域地址数为3。检查问题是否解决。
l 如果是，请执行步骤6。
l 如果不是，请执行步骤3。
步骤3 通过查看日志、Ping报文等手段查看是否存在硬件故障，导致报文被修改。
l 如果是，请执行步骤4。
l 如果不是，请执行步骤5。
步骤4 请联系华为技术支持工程师。
步骤5 结束。
----结束
文档版本 09 (2017-09-04) 华为专有和保密信息 224
版权所有 © 华为技术有限公司
CX110&CX31x系列 交换模块
日志参考 28 ISIS
28.48 ISISCOMM/3/
ISIS_ORIG_LSP_BUFF_SIZE_MISMATCH
日志信息
ISISCOMM/3/ISIS_ORIG_LSP_BUFF_SIZE_MISMATCH: The size of the local buffer for
originating IS-IS LSPs is smaller than the size of the received LSP.
(isisSysInstance=[isisSysInstance], isisSysLevelIndex=[isisSysLevelIndex],
isisCircIndex=[isisCircIndex], isisCircIfIndex=[isisCircIfIndex],
isisPduLspId=[isisPduLspId], isisPduOriginatingBufferSize=[isisPduOriginatingBufferSize],
ifIndex=[ifIndex], IfName=[IfName])
日志含义
收到的LSP报文大小大于本地生成LSP缓冲区的大小。
日志参数
参数名称 参数含义
[isisSysInstance] ISIS进程号。
[isisSysLevelIndex] ISIS级别。
[isisCircIndex] 接口索引。
[isisCircIfIndex] 接口索引。
[isisPduLspId] LSP ID。
[isisPduOriginatingBufferSize] LSP缓冲大小。
[ifIndex] 接口IF索引。
[IfName] 接口名称。
可能原因
源上IS-IS生成LSP的大小大于本地生成LSP的大小。
处理步骤
步骤1 通过输出信息中的isisPduLspId字段的值找到生成该LSP的源，在源上查看IS-IS生成LSP
报文大小，并与本地配置的IS-IS生成LSP的大小进行比较，如果前者大于后者。
l 如果是，请执行步骤2。
文档版本 09 (2017-09-04) 华为专有和保密信息 225
版权所有 © 华为技术有限公司
CX110&CX31x系列 交换模块
日志参考 28 ISIS
l 如果不是，请执行步骤3。
步骤2 在源的IS-IS进程下使用lsp-length orignate命令修改IS-IS生成LSP的大小，确保源生成
的LSP小于等于本地生成LSP的缓冲区大小。
l 如果是，请执行步骤4。
l 如果不是，请执行步骤3。
步骤3 请联系华为技术支持工程师。
步骤4 结束。
----结束
28.49 ISISCOMM/2/ISIS_OWN_LSP_PURGE
日志信息
ISISCOMM/2/ISIS_OWN_LSP_PURGE: ISIS received a self-originated LSP with the age
being 0. (isisSysInstance=[isisSysInstance], isisSysLevelIndex=[isisSysLevelIndex],
isisCircIndex=[isisCircIndex], isisCircIfIndex=[isisCircIfIndex],
isisPduLspId=[isisPduLspId], isisPduRemoteRouterID=[isisPduRemoteRouterID],
ifIndex=[ifIndex], IfName=[IfName])
日志含义
IS-IS收到了一个System ID与本地相同且生存时间为0的LSP。
日志参数
参数名称 参数含义
[isisSysInstance] ISIS进程号。
[isisSysLevelIndex] ISIS级别。
[isisCircIndex] 接口索引。
[isisCircIfIndex] 接口索引。
[isisPduLspId] LSP ID。
[isisPduRemoteRouterID] 远端系统的Router ID。
[ifIndex] 接口IF索引。
[IfName] 接口名称。
文档版本 09 (2017-09-04) 华为专有和保密信息 226
版权所有 © 华为技术有限公司
CX110&CX31x系列 交换模块
日志参考 28 ISIS
可能原因
原因1：本地没有及时刷新自己的LSP，这些LSP在网络中老化后产生purge报文并且被
泛洪到本地。
原因2：因传输故障等原因导致报文被改写，并触发报文purge。
原因3：本地重启，重启后从邻居处收到System ID与本地相同且剩余时间为0的LSP。
处理步骤
步骤1 本地是否重启。
l 如果是，请执行步骤正常运行信息，无需处理=>4。
l 如果不是，请执行步骤2。
步骤2 查看网络中的，是否修改了IS-IS认证的配置，从而产生purge报文并产生该日志。
l 如果是，请执行步骤正常运行信息，无需处理=>4。
l 如果不是，请执行步骤3。
步骤3 请联系华为技术支持工程师。
步骤4 结束。
----结束
28.50 ISISCOMM/2/
ISIS_PROTOCOLS_SUPPORT_MISMATCH
日志信息
ISISCOMM/2/ISIS_PROTOCOLS_SUPPORT_MISMATCH: The protocol of received
Protocol TLV is mismatched with local configuration. (isisSysInstance=[isisSysInstance],
isisSysLevelIndex=[isisSysLevelIndex], isisCircIndex=[isisCircIndex],
isisCircIfIndex=[isisCircIfIndex], isisPduProtocolsSupported=[isisPduProtocolsSupported],
isisPduLspId=[isisPduLspId], isisPduFragment=[isisPduFragment], ifIndex=[ifIndex],
IfName=[IfName])
日志含义
收到的LSP携带协议支持TLV（type为0x81），TLV中支持的协议类型字段的值与本地
支持的协议类型值不匹配。
日志参数
参数名称 参数含义
[isisSysInstance] ISIS进程号。
[isisSysLevelIndex] ISIS级别。
文档版本 09 (2017-09-04) 华为专有和保密信息 227
版权所有 © 华为技术有限公司
CX110&CX31x系列 交换模块
日志参考 28 ISIS
参数名称 参数含义
[isisCircIndex] 接口索引。
[isisCircIfIndex] 接口索引。
[isisPduProtocolsSupported] 支持的协议。
[isisPduLspId] LSP ID。
[isisPduFragment] 64字节报文头缩略。
[ifIndex] 接口IF索引。
[IfName] 接口名称。
可能原因
收到的LSP源支持的协议类型与本地不一致。
处理步骤
步骤1 TLV中支持的协议类型字段的值与本地支持的协议类型值不匹配，10分钟后再次检查
问题是否解决。
l 如果是，请执行步骤3。
l 如果不是，请执行步骤2。
步骤2 请联系华为技术支持工程师。
步骤3 结束。
----结束
28.51 ISISCOMM/3/ISIS_REJECTED_ADJACENCY
日志信息
ISISCOMM/3/ISIS_REJECTED_ADJACENCY: IS-IS failed to establish the adjacency with
its peer. (isisSysInstance=[isisSysInstance], isisSysLevelIndex=[isisSysLevelIndex],
isisCircIndex=[isisCircIndex], isisCircIfIndex=[isisCircIfIndex],
isisPduFragment=[isisPduFragment], ifIndex=[ifIndex], IfName=[IfName])
日志含义
收到了相邻发送的Hello报文，但无法与其建立IS-IS邻居。
文档版本 09 (2017-09-04) 华为专有和保密信息 228
版权所有 © 华为技术有限公司
CX110&CX31x系列 交换模块
日志参考 28 ISIS
日志参数
参数名称 参数含义
[isisSysInstance] ISIS进程号。
[isisSysLevelIndex] ISIS级别。
[isisCircIndex] 接口索引。
[isisCircIfIndex] 接口索引。
[isisPduFragment] 64字节报文头缩略。
[ifIndex] 接口IF索引。
[IfName] 接口名称。
可能原因
1：本地IS-IS的系统ID或者虚拟系统ID与邻居系统ID配置重复。
2：接口下配置的认证模式或认证密码与邻居的不一致导致Hello报文认证不通过。
3：由于链路两端IS-IS Level-1邻居区域地址不同。
4：本地接口收到与本地Level不匹配的Hello报文。
5：在广播网中，本地接口收到IP地址与本地接口不在同一个网段的接口发送的Hello报
文。
6：在P2P网络中，本地接口在没有配置isis peer-ip-ignore的情况下，收到IP地址与本地
接口不在同一个网段的接口发送的Hello报文。
处理步骤
步骤1 查看输出信息中IfName字段的值，确定接收此报文的接口和接口类型。
l 如果是广播接口=>2。
l 如果是P2P接口=>7。
步骤2 查看输出信息中isisPduFragment字段中的内容，从第十个字节开始的连续六个字节为源
的System ID，确定源，分别在链路两端的接口视图和IS-IS进程视图下使用display this
命令，检查链路两端的IS-IS级别和接口级别是否一致。
l 如果不一致=>3。
l 如果一致=>6。
步骤3 在接口视图下使用isis circuit-level命令，将链路两端的IS-IS级别和接口级别修改一致。
检查问题是否解决。
l 如果解决=>15。
l 如果不能解决=>4。
文档版本 09 (2017-09-04) 华为专有和保密信息 229
版权所有 © 华为技术有限公司
CX110&CX31x系列 交换模块
日志参考 28 ISIS
步骤4 使用display ip interface命令查看源接口的IP地址与本地接口的IP地址是否在同一网
段。
l 如果在同一网段=>8。
l 如果不在同一网段=>5。
步骤5 在源和本地的接口视图下使用ip address命令配置两端接口的IP地址在同一网段。检查
问题是否解决。
l 如果解决=>15。
l 如果不能解决=>8。
步骤6 在源和本地的接口视图下使用display this命令检查是否配置了isis peer-ip-ignore。
l 如果配置了isis peer-ip-ignore=>10。
l 如果未配置isis peer-ip-ignore=>7。
步骤7 在源和本地的接口视图下配置isis peer-ip-ignore或者使用ip address命令配置两端接口
的IP地址在同一网段。检查问题是否解决。
l 如果解决=>15。
l 如果不能解决=>10。
步骤8 检查链路两端Level-1的区域地址是否相同。
l 如果相同=>10。
l 如果不相同=>9。
步骤9 在IS-IS视图下使用network-entity命令配置新的区域地址，确保两端的Level-1区域地址
相同。检查问题是否解决。
l 如果解决=>15。
l 如果不能解决=>10。
步骤10 使用display current-configuration命令检查源设备的System ID与本地IS-IS的System ID
或Virtual System ID是否重复。
l 如果是，请执行步骤11。
l 如果不是，请执行步骤12。
步骤11 （请谨慎使用undo network-entity命令。）修改其中一台的系统ID或者虚拟系统ID，
确保链路两端的无重复的系统ID或者虚拟系统ID。检查问题是否解决。
l 如果是，请执行步骤14。
l 如果不是，请执行步骤12。
步骤12 检查链路两端接口上的IS-IS认证模式或者认证密码是否相同。
l 如果是，请执行步骤14。
l 如果不是，请执行步骤13。
步骤13 在链路两端的接口视图下使用isis authentication-mode命令，修改认证方式和认证密
码，使链路两端的IS-IS认证保持一致。或者在链路两端的接口视图下使用undo isis
authentication-mode命令取消IS-IS认证（删除IS-IS认证会降低系统的安全性）。检查
问题是否解决。
l 如果是，请执行步骤15。
l 如果不是，请执行步骤14。
文档版本 09 (2017-09-04) 华为专有和保密信息 230
版权所有 © 华为技术有限公司
CX110&CX31x系列 交换模块
日志参考 28 ISIS
步骤14 请联系华为技术支持工程师。
步骤15 结束。
----结束
28.52 ISISCOMM/2/ISIS_SEQUENCE_NUMBER_SKIP
日志信息
ISISCOMM/2/ISIS_SEQUENCE_NUMBER_SKIP: ISIS received a self-originated LSP with
a greater sequence number. (isisSysInstance=[isisSysInstance],
isisSysLevelIndex=[isisSysLevelIndex], isisCircIndex=[isisCircIndex],
isisCircIfIndex=[isisCircIfIndex], isisPduLspId=[isisPduLspId], ifIndex=[ifIndex],
IfName=[IfName])
日志含义
IS-IS本地LSP更新时序列号没有逐步增加，而是跳跃增加。
日志参数
参数名称 参数含义
[isisSysInstance] ISIS进程号。
[isisSysLevelIndex] ISIS级别。
[isisCircIndex] 接口索引。
[isisCircIfIndex] 接口索引。
[isisPduLspId] LSP ID。
[ifIndex] 接口IF索引。
[IfName] 接口名称。
可能原因
1：IS-IS进程重启后，序列号从1开始递增，IS-IS收到邻居发来的序列号更大且LSP ID
相同的LSP。
2：与网络中其它的系统ID配置重复，导致LSP不断更新。
处理步骤
步骤1 使用命令display history-command查看本地是否执行reset isis all命令重启了IS-IS进
程。
文档版本 09 (2017-09-04) 华为专有和保密信息 231
版权所有 © 华为技术有限公司
CX110&CX31x系列 交换模块
日志参考 28 ISIS
l 如果是，请执行步骤正常运行信息，无需处理=>5。
l 如果不是，请执行步骤2。
步骤2 使用命令display isis lsdb连续快速查看本地的LSP序列号增长是否很快，即LSP实际刷
新周期比用timer lsp-refresh命令设置的刷新周期小。
l 如果是，请执行步骤3。
l 如果不是，请执行步骤4。
步骤3 使用命令display current-configuration查看网络中是否存在其他与本地的系统ID或者虚
拟系统ID重复。
l 如果是，请执行步骤4。
l 如果不是，请执行步骤5。
步骤4 （请谨慎使用undo network-entity命令或者undo virtual-system命令）进入本地或与本
地的系统ID或虚拟ID重复的其他的IS-IS视图，执行undo network-entity命令或者undo
virtual-system命令，删除重复的系统ID或虚拟系统ID，再使用network-entity命令或者
virtual-system命令为配置不同的系统ID或者虚拟系统ID。检查问题是否解决。
l 如果是，请执行步骤6。
l 如果不是，请执行步骤5。
步骤5 请联系华为技术支持工程师。
步骤6 结束。
----结束
28.53 ISISCOMM/6/ISIS_SYS_ID_CONFLICT
日志信息
ISISCOMM/6/ISIS_SYS_ID_CONFLICT: System ID may conflict.