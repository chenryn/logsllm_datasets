功能概述
业务流程挖掘是目前比较热门的分析技术。在数字化转型中，企业通过业务流程挖掘，分析实际流程与标准规范的差异，发掘流程中的待优化问题，提升流程效率和质量。通常用于财务、生产、物流等业务领域，也可以用于 ITSM 等运行维护领域。
需求描述
| 目标客户 | 需求描述 | 状态 |
|---|---|---|
| 华夏银行 |通过工单系统和 ECC 门禁系统日志，挖掘外包人员门禁审批流程 |无 || 广东移动 |家宽业务有标准流程的规范文件，可以做流程挖掘分析。且艺赛旗已有家宽流程挖掘案例。 |无 |
| 客商银行 |全链路日志上附带有业务流水号，可以从业务角度考虑全链路观测 |无 |
可选方案
| 方案介绍 | 优点 | 缺点 |
|---|---|---|
| SPL+pmXXX自定义指令 |初期研发投入较小。 |可处理的数据量受 SPL 框架限制。 页面上不同统计都要完整跑一遍 SPL，可能会多消耗计算资源。 |
| alpha算法 (petrinet 模型)+独立后端和数据库 |方便做一致性检查和预测分析； 前后端数据不局限为二维表格形式，处理更方便。 |高级功能初期性价比不高。 |
功能需求
功能总览
考虑时间进度安排，功能实现优先级如下：
流程列表管理
日志预览和属性映射配置
流程发现页
流程日志查看页
流程对比页
统计分析仪表盘
散点图分析
工作时段配置页流程日志查看页
流程对比页
统计分析仪表盘
散点图分析
工作时段配置页
组织分析
瓶颈分析
社交图谱分析
定时监控
功能总表
| 一级功能 | 二级功能 | 三级功能 | 描述 |
|---|---|---|---|
| 流程模型管理 |模型属性 |名称 | |
| 流程模型管理 |模型属性 |描述 | |
| 流程模型管理 |模型属性 |分类标签 | |
| 流程模型管理 |模型属性 |数据源类型 |支持日志易搜索和本地上传两种类型 |
| 流程模型管理 |模型属性 |数据源查询范围 |搜索类型支持时间范围和查询语句定义 |
| 流程模型管理 |模型属性 |数据源类型映射 | |
| 流程模型管理 |列表管理 |列表查看 |名称、描述、标签、数据源、创建时间、更新时间 |
| 流程模型管理 |列表管理 |列表过滤 |按名称过滤 |
| 流程模型管理 |列表管理 |列表操作 |编辑数据源、查看流程模型、删除 || 流程模型管理 |列表管理 |列表操作 |编辑数据源、查看流程模型、删除 |
| 模型创建 |数据源管理 |日志预览 |输入查询语句或选择CSV文件，点击“预览”发起搜索 |
| 模型创建 |数据源管理 |类型映射 |必选映射字段包括：案例 ID、活动、结束时间戳 可选映射字段包括：开始时间戳、案例属性、活动属性。 活动属性有两个特殊可设项：活动属性(资源)、活动属性(组织)。 |
| 模型创建 |数据源管理 |时间范围 | |
| 模型创建 |编辑保存 |数据源编辑 |允许用户修改数据源的语句、时间范围和映射配置 |
| 模型创建 |编辑保存 |过滤条件保存 |允许用户修改保存过滤条件供后续加载使用 |
| 模型创建 |流程模型查看 |流程图展示 |活动名称、活动数、统计值； 根据统计值大小显示的颜色深浅和连线粗细； 画布可缩放拖动。 || 模型创建 |流程模型查看 |流程耗时运算 |支持根据工作日历和工作时段，计算流程耗时 |
| 模型创建 |流程日志查看 |案例列表 |类似 transaction 列表，第一层展示：caseid、开始时间、结束时间、耗时、活动数。 点击单行展示第二层，该 id 下具体每行日志。 |
| 模型创建 |流程日志查看 |案例 ID 过滤 |在列表上快速筛选单条案例 |
| 模型创建 |流程日志查看 |事件详情操作 |第二层日志展开后，支持点击添加活动过滤和属性过滤 |
| 模型创建 | |甘特图展示 |每一步展示相同变体的活动耗时子弹图，可参考 minit 功能：https://learn.microsoft.com/en-us/power-automate/minit/variants#cases-gantt |
| 模型创建 |流程变体查看 |分布统计 |柱状图展示 top10 和 other 变体的编号、案例数占比、活动数和平均耗时。 || 模型创建 |流程变体查看 |变体流程查看 |选中任意编号变体，查看该变体的流程图 |
| 模型创建 |流程变体查看 |查看全部 |支持点击全部，翻页查看 other 里的所有变体情况。 |
| 模型创建 |属性分布查看 |分布统计 |默认展示“活动数”的 bins=10柱状图 |
| 模型创建 |属性分布查看 |属性切换 |支持切换查看其它属性统计。如果是文本属性，查看 top10；如果是数值属性，查看bins=10。 |
| 模型分析 |展示切换 |次数 |包括案例数、日志数 |
| 模型分析 |展示切换 |耗时统计 |包括均值、最大值、中位数 |
| 模型分析 |敏感度调整 |路径多少比例 |0-100%，默认 10% |
| 模型分析 |敏感度调整 |活动多少比例 |0-100%，默认 100% |
| 模型分析 |过滤条件 |活动 |包含、不包含、为开始、为结束 || 模型分析 |过滤条件 |活动 |包含、不包含、为开始、为结束 |
| 模型分析 |过滤条件 |案例 |案例ID等于、不等于； 总耗时、活动数大于、小于、在范围内 |
| 模型分析 |过滤条件 |属性 |等于、不等于、匹配、不匹配、大于、小于、在范围内 |
| 模型分析 |过滤条件 |路径 |A 直接跟随 B、A 后若干步为 B |
| 模型分析 |过滤条件 |性能 |活动A 到 B 的时差； 大于、小于、在范围内 |
| 模型分析 |过滤条件 |重做 |活动 A 重复次数； 大于、小于、在范围内 |
| 模型分析 |变体对比 |多选对比 |在柱状图上划选多个相邻变体，进行流程对比 |
| 模型分析 |变体对比 |选择基准 |点击“选中对比”，将当前流程图作为基础 |
| 模型分析 |变体对比 |选择对比 |在已有基准变体的前提下，选择其他变体进行流程对比 || 模型分析 |变体对比 |统计对比 |包括属性分布和统计值的对比 https://docs.uipath.com/process-mining/docs/compare |
| 模型分析 |过滤管理 |条件保存 |保存当前过滤条件。 |
| 模型分析 |过滤管理 |临时过滤开关 |支持在过滤区域临时禁用/启用单个过滤项 |
| 模型分析 |过滤管理 |属性快捷过滤 |在属性分布查看上点击钻取，快速生成数值区间或文本等于的过滤条件。 |
| 模型分析 |图形快捷操作 |活动右键 |包含活动、不包含活动、活动耗时区间、以该活动为首、以该活动为结束、过滤该活动的资源属性 |
| 模型分析 |图形快捷操作 |路径右键 |包含路径、不包含路径、路径耗时区间 |
| 统计分析 |流程概览仪表盘 | |通过仪表盘展现流程日志数、案例数、活动数、资源数、耗时的统计指标和时间趋势。 ||  |散点分析 | |通过散点图展示每笔流程案例的分布耗时情况，突出异常流程。 |
|  |组织概览仪表盘 | |针对指定的活动，分析各组织及组织内资源对该活动的耗时分配情况。 |
|  |社交分析 | |分析资源的流程处理过程中，产生的社交关系强弱。支持交接、分包、合作等不同类型。 |
| 流程对比 |自定义过滤条件 | |通过分栏对比方式，左右栏内支持各自定义不同的过滤条件，查看各自的流程差异。 |
|  |加载 BPMN 模型 | | |
|  |加载已存条件 | |支持加载已存的过滤条件，快速进行流程对比。 |
| 系统配置 |工作时段配置 | | |
| 流程配置 |活动分组层级 | |根据日志属性，对活动进行分组，简化复杂流程图。 支持多层次分组，逐次点击展开。 对应 mint 功能：https://learn.microsoft.com/en-us/power-automate/minit/hierarchical-process-mining ||  |自定义指标 | |比默认的平均耗时更适用的自定义统计值，用来替换各种功能。 对应 minit 功能：https://learn.microsoft.com/en-us/power-automate/minit/custom-metrics |
| 定时监控 |监控规则 | |分为性能指标、合规规则。 有 case、activity、path 三种。 https://learn.microsoft.com/en-us/power-automate/minit/business-rules |
|  |告警级别 | | ||  |告警级别 | | |
|  |附加图层 | |https://learn.microsoft.com/en-us/power-automate/minit/business-rules-process-map 对应 appian 功能：https://appian.com/content/appian-aem/en/products/platform/process-mining/_jcr_content/root/container/container/tabs/container/container_copy_copy_2029760154/image.coreimg.gif/1674141985566/screenshot-monitor-act.gif || 一致性分析 |案例回放 | | 对应 celonis 功能：https://docs.celonis.com/en/process-explorer--full-screen-.html#UUID-69fa596c-909c-2244-7320-5a881c8f10ff_id_ProcessExplorerFullScreen-ProcessAnimation 对应 appian 功能：https://appian.com/content/appian-aem/en/products/platform/process-mining/_jcr_content/root/container/container/tabs/item_2/container_copy_copy/image.coreimg.gif/1674141963462/screenshot-conformance-checking.gif ||  |BPMN 模型 |变体保存 |将当前选中变体保存为 BPMN 模型 |
|  |BPMN 模型 |模型审查 |使用基准模型进行变体对比 |
|  |BPMN 模型 |导入导出 |支持模型的导入导出 |
|  |BPMN 模型 |模型编辑 |支持画布拖拽方式编辑模型 |
|  |合规性检查 | |对当前日志，选取特定 BPMN 模型，检查各活动和路径的合规情况，并进行案例影响统计和排序 |
|  |根因分析 | |对不合规行为涉及案例的所有属性，进行具体的根因分析，找到案例数或相关性最大的属性取值 |
功能详情
新建流程模型
照抄即可。
日志预览
大体意思如上。顶部区域换成搜索条。上一步语句带入，默认搜“全部时间”。
内容采用表格，不用事件列表。横向滚动。
类型映射
同上图。表头可以设置类型映射。默认都是“日志属性”。
需要修改有“案例 ID”、“活动”、“结束时间”三个必选类型；需要修改有“案例 ID”、“活动”、“结束时间”三个必选类型；
可以设置有“案例属性”、“日志属性”、“资源”、“组织”、“开始时间”等。“案例属性”和“日志属性”可以有多个。
可以设置为“无效”。比如 index、hostname、logtype、tag、appname、ip、source、agent_send_timestamp、collector_recv_timestamp 这些日志易内置字段默认就是无效的。
为了后续使用方便，我们在这些设置用于后续的 SPL 时，重命名为 XES 国标字段(pm4py中默认也用这些名字)：
case:concept:name
concept:name
time:timestamp
org:resource
org:role
org:group
注意：字段的文本、数值类型也要额外存储，在过滤和分布统计时也有用。
流程图及统计值生成
页面示意如上。流程图及统计值生成
页面示意如上。