curacy of path diversity in the Rocketfuel topologies, we compute
four new ratios for the link- and PoP-disjoint paths in the corre-
sponding Sprintinf -bb and Sprintinf -rev topologies:
RLI−bb = LI−bb(i, j)/LR(i, j), and
RPI−bb = PI−bb(i, j)/PA(i, j) for Sprintinf -bb and
RLI−rev = LI−rev(i, j)/LR(i, j) and
RPI−rev = PI−rev(i, j)/PR(i, j) for Sprintinf -rev.
Figures 3 and 4 present the cumulative distributions of these ra-
tios. From these ﬁgures, we see that both heuristics reduce the
difference in the amount of path diversity, but even after applying
them they overestimate the path diversity for the vast majority of
pair of PoPs. It is interesting to note that, after correcting some
of the false links, path diversity is underestimated for some pairs
of PoPs. Path diversity lower than that of Sprintreal is a reﬂec-
tion of links that Rocketfuel was unable to capture with measure-
ments. Sprintinf -rev’s path diversity is the closest to the path di-
versity found in Sprintreal, yet it only matches the number of link-
disjoint paths of Sprintreal for approximately 20% of the pairs of
PoPs and 28% of the pairs when considering PoP-disjoint paths.
4.2 Active Measurements and Path Diversity
Clearly, the difference in path diversity presented in the previ-
ous section is speciﬁc to the Sprint topology inferred by Rock-
etfuel. Even though Rocketfuel is an improvement in measuring
ISP topologies, active measurement techniques still have limita-
tions that prevent them from accurately capturing path diversity.
These limitations are an obstacle for using such topologies as basis
for studying trafﬁc engineering or robustness of ISP networks.
The process of discovering the topology of an ISP network can
be divided into probing the ISP network to discover links and pro-
cessing those links to infer the ISP topology. Links that are kept
only as backups are not going to be traversed by probes. Topolo-
gies generated from active measurements cannot contain such links
unless there is a failure during the measurement period that causes
probes to be forwarded through backup links. Consequently, in-
ferred topologies capture mostly active path diversity, and in some
cases part of the complete path diversity. In the case of Sprint net-
work, complete path diversity is only 5% more than active on aver-
age. Therefore, in this section, we chose the topology of the Sprint
network without backup links as a basis of comparison.
Below we discuss some sources of inaccuracy introduced in each
step of generating ISP topologies from active measurements and
how they might be addressed. As an example, we analyze the per-
centage of links that were missed and added both during probing
the Sprint network and processing the probed links. Table 1 sum-
marizes the percentage of inter-PoP links missed and added at each
step, computed over the total number of links in Sprintreal. The
last column presents the overall percentage of missed and added
links by combining both steps. We computed this difference by
comparing inter-PoP links from Sprintreal to Sprintinf .
Links
Missed
Added
- Reverse links
- PoPs not connected
- Connected PoPs
Probing
58.57%
37.14%
-
5.71%
31.43%
Processing
-
717.14%
80%
285.71%
351.43%
Overall
8.57%
608.57%
-
117.14%
491.43%
Table 1: Percent of missed and added links in each step of gen-
erating the Rocketfuel PoP topology relative to the number of
links in the Sprintreal topology.
4.2.1 Inaccuracies introduced during probing
We compare Sprintreal without backup links with the topol-
ogy induced by the raw Rocketfuel traces4 to quantify inaccuracies
introduced during probing. We select links from the traces that
connect different PoPs and that are also present in Sprintinf . We
call the topology induced by the set of links discovered by probes
as Sprinttraces. Table 1 shows that the Rocketfuel probes missed
almost 60% of the inter-PoP links in the Sprint network. Active
measurements miss links for two main reasons:
(cid:127) Lack of vantage points: End-to-end measurements only cap-
ture links traversed by probes. A vantage point is a host that
is the source of probes.
Increasing the number of vantage
points and varying their location increases the probability of
ﬁnding links. If there are two paths with the same cost be-
tween two points in the ISP network and probes are always
hashed to the same path, then all links in the alternate path are
missed. Probes from another vantage point may ﬁnd alterna-
tive equal-cost paths. Missing links may cause the resulting
topology to understate the active path diversity.
To capture all inter-PoP links, it is important that probes enter
the ISP network in every PoP and exit to all the other PoPs.
Capturing all the path diversity inside a PoP is harder. Probes
should enter and exit the ISP network through each access
router in a PoP.
(cid:127) Incomplete traceroutes: Probes may be incomplete, i.e.,
there may be some unknown hops (‘*’) in the traceroutes.
In this case, Rocketfuel conservatively ignores incomplete
parts of the traces. Examining the traces for the Sprint net-
work, we observed that there were not many instances of
non-responses to probes in the segment of the trace that tra-
verse the core of the Sprint network. Consequently, we do
not believe that is this a main source of missing links in
Sprinttraces.
More surprising, Sprinttraces contain a number equivalent to
37.14% of the total number of links in Sprintreal that do not exist
in the real network even when considering backup links. Almost all
4Traceroutes used to generate the topologies are available at:
http://www.cs.washington.edu/research/networking/rocketfuel/.
of those extra links are between a pair of PoPs that are connected
in the real network. This may arise because of network topology
changes during the probes. A smaller fraction of links, equivalent
to 5.71% of all links in Sprintreal, connects PoPs that have no
connection in the real network. Those extra links could have been
caused by incorrect DNS resolution.
The two main causes of ﬁnding extra links during probing are:
(cid:127) Changes in the path of a probe: The process of probing
takes time during which its path may change. The path a
probe takes may change for two reasons: a change in the net-
work topology itself, or a routing policy change that impacts
the best forwarding path.
ISPs are constantly maintaining
and upgrading their networks by adding and removing links
from the topology. Failures cause some links to be removed
from the topologies and may cause some backup links to be-
come active.
Changes in the network topology may lead to false connec-
tivity. If the forwarding path to the destination of the probe
changes during the traceroute, then it may appear that there
is a link between two routers that are not connected in the
real network. This is one possible reason for false links in
the Rocketfuel version of the Sprint topology. Eliminating
links that do not have corresponding reverse links, as was
done for the Sprintinf -rev topology, should greatly reduce
such false connectivity.
(cid:127) Incorrect DNS: DNS names are used both to determine which
links belong to a particular ISP network and to map IP ad-
dresses to PoPs. Some addresses may be incorrectly mapped
due to misconﬁguration or change in the ISP topology that
have not been reported to DNS, thereby leading to the inclu-
sion of a false link in the traces.
4.2.2 Inaccuracies from processing probed links
After capturing as many links as possible using active measure-
ments, tools like Rocketfuel process the resulting traces to produce
a more accurate map of the ISP network.
In order to assess the
effects of processing the traces on the ﬁnal topology, we compare
the percentage of inter-PoP links connecting every pair of PoPs in
Sprinttraces with the percentage in Sprintinf . Table 1 shows that
processing the traces adds more than seven times as many links as
the real network for two main reasons:
(cid:127) Alias resolution: After collecting links, measurement tools
perform a series of tests to resolve aliases. If two interfaces
that belong to the same router are not accurately resolved to
the same node, then the resulting topology will have a larger
number of router-disjoint paths than in the real network. On
the other hand, if two interfaces in different routers are mis-
takenly mapped to the same router, then the resulting topol-
ogy will have more link-disjoint paths.
Rocketfuel introduced a number of new techniques to resolve
aliases. One of these techniques is to use information in DNS
names. An interface’s DNS name sometimes encodes the
router that has the interface, and at other times encodes the
router at the other end of the link. This difference in conven-
tion can lead to incorrect grouping of interfaces. Grouping
two interfaces in different routers will result in a router with
more connectivity, thereby overstating the number of link-
disjoint paths. In Table 1, extra links between PoPs that are
connected in Sprintreal represent interfaces that were not
correctly mapped to the same router in a PoP, whereas links
6. REFERENCES
[1] D. G. Andersen, H. Balakrishnan, M. F. Kaashoek, and
R. Morris, “Resilient Overlay Networks,” in Symposium on
Operating Systems Principles, pp. 131 – 145, Oct. 2001.
[2] A. Keromytis, V. Misra, and D. Rubenstein, “”sos: Secure
overlay services”,” in Proceedings of ACM SIGCOMM,
(Pittsburgh, PA), Aug. 2002.
[3] I. Clarke, O. Sandberg, B. Wiley, and T. W. Hong, “Freenet:
A Distributed Anonymous Information Storage and Retrieval
System,” in Proceedings of the ICSI Workshop on Design
Issues in Anonymity, (Berkeley, CA), July 2000.
[4] P. Francis et al., “IDMaps: A Global Internet Host Distance
Estimation Service,” IEEE/ACM Trans. on Networking, Oct.
2001.
[5] T. Ng and H. Zhang, “”towards global network positioning”,”
in Internet Measurement Workshop, Nov. 2001.
[6] A. Rowstron and P. Druschel, “Storage management and
caching in PAST, a large-scale, persistent peer-to-peer
storage utility,” in Proceedings of ACM SOSP, (Lake Louise,
Alberta), Oct. 2001.
[7] N. Spring, R. Mahajan, and D. Wetherall, “Measuring ISP
Topologies with Rocketfuel,” in Proceedings of ACM
SIGCOMM, (Pittsburgh, PA), Aug. 2002.
[8] H. Tangmunarunkit, R. Govindan, S. Jamin, S. Shenker, and
W. Willinger, “Network Topology Generators: Degree-Based
vs. Structural,” in Proceedings of ACM SIGCOMM,
(Pittsburgh, PA), pp. 147 – 159, Aug. 2002.
[9] R. Govindan and H. Tangmunarunkit, “Heuristics for
Internet Map Discovery,” in Proceedings of IEEE
INFOCOM, (Tel Aviv, Israel), Mar. 2000.
[10] Cooperative Association for Internet Data Analysis,
“Skitter.” http://www.caida.org/tools/measurement/skitter/,
Jan. 2000.
[11] F. Giroire, A. Nucci, N. Taft, and C. Diot, “Increasing the
Robustness of IP Backbones in the Absence of Optical Level
Protection,” in Proceedings of IEEE INFOCOM, (San
Francisco, CA), Mar. 2003.
[12] A. Akella et al., “A Measurement-Based Analysis of
Multihoming,” in Proceedings of ACM SIGCOMM,
(Karlsruhe, Germany), Aug. 2003.
[13] R. Teixeira, K. Marzullo, S. Savage, and G. M. Voelker,
“Characterizing and Measuring Path Diversity of Internet
topologies,” in Proceedings of ACM SIGMETRICS (extended
abstract), (San Diego, CA), June 2003.
[14] J. Moy, “OSPF Version 2.” RFC 1247, July 1991.
[15] D. Oran, “OSI IS-IS Intra-domain Routing Protocol.” RFC
1142, Feb. 1990.
[16] R. Mahajan, N. Spring, D. Wetherall, and T. Anderson,
“Inferring Link Weights using End-to-End Measurements,”
in Proceedings of Internet Measurement Workshop,
(Marseille, France), Nov. 2002.
in Sprintinf between PoPs that have no connection in the
real network represent either interfaces in different routers
that were mistakenly collapsed or a router that has an incor-
rect DNS name.
(cid:127) Adding reverse links: Once a probe found a link between
two routers, it is tempting to add a reverse edge between
them. Indiscriminately adding reverse links, however, may
inﬂate the number of links in the inferred topology as com-
pared to the number of links in the real network. Traceroute
reports the incoming interfaces of routers. Hence, if two dif-
ferent vantage points probe the same link from different di-
rections, then it will appear as two different links. If the alias
resolution mechanism was perfect, then it would map all the
interfaces to the same router and considering all links to be
bi-directional would be a safe assumption.
After the alias resolution step, Rocketfuel completes the topol-
ogy by adding reverse links. This step introduces a number of
false links to Sprintinf that is equivalent to 80% of the links
in the real network. This result suggests that, until we have
more accurate techniques for alias resolution, links should be
considered directed in the traces.
Given how sensitive path diversity is to false or missing links, ac-
curately represent path diversity in ISP networks using active mea-
surements remains an open problem. We are working on improving
the accuracy of path diversity in the Rocketfuel topologies, and de-
termining the limits to which active measurement techniques can
capture such topological properties.
5. CONCLUSION
In this paper we describe our efforts to characterize path diversity
in ISP network topologies. First, using the real Sprint IP topology,
we ﬁnd that Sprint has signiﬁcant path diversity. We then charac-
terize path diversity in a larger set of ISP networks using the re-
cent Rocketfuel ISP topologies inferred from active measurements.
However, comparing the real Sprint topology to the one inferred by
Rocketfuel, we ﬁnd that the Rocketfuel topology has signiﬁcantly
higher apparent path diversity. We then evaluate two heuristics that
improve the accuracy of capturing path diversity in the topologies,
but substantial differences remain.
Although the Rocketfuel topologies have beneﬁtted from some
evaluation and validation, this is the ﬁrst time that they have been
systematically compared to a real topology and evaluated from the
perspective of path diversity. Due to constraints faced by active
measurements, these topologies both contain false links and miss
actual links. We show that the post-processing of the traces (in par-
ticular, the alias resolution step) introduces a huge number of false
links in the topology. As a metric, path diversity is particularly sen-
sitive to such errors since each error changes the path diversity by
one for at least one pair of PoPs. We are working on improving
the accuracy of path diversity in the Rocketfuel topologies, and de-
termining the limits to which active measurement techniques can
capture such topological properties.
Acknowledgments
We thank Christophe Diot, Antonio Nucci, Konstantina Papagian-
naki, and Nina Taft for generously providing the Sprint topology.
We also thank Neil Spring and Ratul Mahajan for the insightful dis-
cussions on the Rocketfuel topologies. Support for this work was
provided by DARPA FTN Contract N66001-01-1-8933. Renata
Teixeira was also supported by a fellowship from Capes/Brazil.