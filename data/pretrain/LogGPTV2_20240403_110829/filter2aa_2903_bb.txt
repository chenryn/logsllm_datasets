异常（与版本有关，在XP SP1中存在），另一个供所有Windows线程所
共享。当Windows切换线程时，它把当前线程的状态复制到共享的TSS
中。也就是说，普通的线程切换并不会切换TSS，只有当NMI或 #DF异
常发生时，才会切换TSS，这就是所谓的以软件方式切换线程（任
务）。
使用WinDBG的!idt扩展命令可以列出IDT中的各个表项，不过该命
令做了很多翻译，显示的不是门描述符的原始格式。
lkd> !idt -a 
Dumping IDT:
00:    804dbe13 nt!KiTrap00      // 0号异常，即除0
01:    804dbf6b nt!KiTrap01
02:    Task Selector = 0x0058    // NMI的任务门描述符，显示的是TSS段的段选择
子
03:    804dc2bd nt!KiTrap03
表3-4列出了Windows 8（32位）的IDT设置，对于其他Windows版
本或硬件配置不同的系统，某些表项可能有所不同，但大多数表项是一
致的。
表3-4 IDT表设置一览（Windows 8 32位）
向
量
号
门
类
型
处理例程/TSS选择子
中断/异常
说  明
00
中
断
nt!KiTrap00
除零错误
01
中
断
nt!KiTrap01
调试异常
02
任
务
0x0058
不可屏蔽中断
（NMI）
切换到系统线程处理该中断，
使用的函数是KiTrap02
03
中
断
nt!KiTrap03
断点
04
中
断
nt!KiTrap04
溢出
05
中
断
nt!KiTrap05
数组越界
06
中
断
nt!KiTrap06
无效指令
07
中
断
nt!KiTrap07
数学协处理器
不存在或不可
用
任
双误 （Double
切换到系统线程处理该异常，
08
务
0x0050
Fault）
执行KiTrap08
09
中
断
nt!KiTrap09
协处理器段溢
出
0a
中
断
nt!KiTrap0A
无效的TSS
0b
中
断
nt!KiTrap0B
段不存在
0c
中
断
nt!KiTrap0C
栈段错误
0d
中
断
nt!KiTrap0D
一般保护错误
0e
中
断
nt!KiTrap0E
页错误
0f
中
断
nt!KiTrap0F
保留
KiTrap0F会引发0x7F号蓝屏
10
中
断
nt!KiTrap10
浮点错误
11
中
断
nt!KiTrap11
内存对齐
12
任
务
0x00A0
机器检查
切换到新线程，执行
hal!HalpMcaExceptionHa-
ndlerWrapper
13
中
断
nt!KiTrap13
SIMD浮点错误
14
～
1f
中
断
nt!KiTrap0F
保留
KiTrap0F会引发0x7F号蓝屏
20
～
29
00
NULL
（未使用）
2a
中
断
nt!KiGetTickCount
2b
中
断
nt!KiCallbackReturn
从逆向调用返回（参见卷2）
2c
中
断
nt!KiRaiseAssertion
断言
2d
中
断
nt!KiDebugService
调试服务
2e
中
断
nt!KiSystemService
系统服务
2f
中
断
nt!KiTrap0F
30
中
断
hal!Halp8254ClockInterrupt IRQ0
时钟中断
31
～
3F
中
断
驱动程序通过
KINTERRUPT结构注册的
处理例程
IRQ1～IRQ15
其他硬件设备的中断
40
～