### 优化后的文本

#### 相容代码段和非相容代码段的调用规则
1. **对于相容代码段**：如果代码段的描述符特权级（DPL）大于当前特权级（CPL），则该代码段可以被具有相同或更低特权级的程序调用。即，同等特权级或更低特权级的代码可以调用或跳转到相容代码段。
2. **对于非相容代码段**：只有当调用者的 CPL 等于目标代码段的 DPL 时，才能调用非相容代码段。换句话说，仅允许同特权级别的代码访问非相容代码段。

#### 数据段选择子和描述符的限制
- 当数据段选择子超出描述符表界限时，将引发异常。
- 如果数据段描述符类型不是可读的数据或代码类型，同样会触发异常。
- 若数据段描述符类型为非相容代码且请求者特权级别（RPL）大于 DPL 或 CPL 大于 DPL，则不允许访问，并产生错误。

#### 任务状态段（TSS）相关问题
- 在 TSS 中，指向先前任务的段选择子称为 backlink。
- 正在运行或被挂起的任务被视为繁忙任务；IRET 指令切换回的任务也应标记为繁忙以防止循环切换。
- LTR 指令要求 TSS 段选择子有效且 TI 标志设置正确，否则可能导致无效 TSS 异常。
- IA-32e 模式下禁止使用 286 TSS 类型的段描述符。
- 尝试从不规范基址的 TSS 加载 SS 选择子或 ESP 会导致异常。

#### 异常处理与上下文
- 无效 TSS 异常处理例程必须通过任务门调用，避免因处理器状态不一致而出现问题。
- 错误码包含导致异常的段选择子索引及其来源（IDT/GDT）。EXT 标志指示是否由外部事件引起。
- 根据任务切换阶段的不同，保存的 CS 和 EIP 可能指向原指令或新任务首条指令。
- 在任务移交点前后发生的异常会影响程序状态变化与否及恢复策略的选择。

#### 段不存在异常 (#NP)
- 向量号: 11
- 异常类型: 故障 (Fault)
- 描述: 当段或门描述符的存在位未设置时发生此异常。
- 操作系统可以通过此异常实现虚拟内存机制。

#### 栈错误异常 (#SS)
- 向量号: 12
- 异常类型: 故障 (Fault)
- 描述: 发生栈相关的违规行为时触发，例如加载不存在的栈段或超出段边界等。

#### 一般性保护异常 (#GP)
- 向量号: 13
- 异常类型: 故障 (Fault)
- 描述: 违反 CPU 定义的安全规则时报告此类异常。包括但不限于越界访问、向不可执行段写入等行为。

#### 页错误异常 (#PF)
- 向量号: 14
- 异常类型: 故障 (Fault)
- 描述: 当启用分页机制后尝试访问无效页面时产生此异常，常见于操作系统实现虚拟内存管理时。

以上内容整理自《软件调试》补编章节，旨在提供更清晰连贯的专业说明。