于每个信息数据包在通过防火墙时都必须经过检查和处理， 因此这种类型的防火墙对于网络的性
能会产生负面影响 。 应用级网关防火墙被称为第二代防火墙， 并且在 OSI 模型的应用层(第 7 层)上
工作 。
电路级网关防火墙 电路级网关防火墙用于在可信合作伙伴之间建立通信会话， 在 OSI 模型的
会话层(第 5 层)上工作。 SOCKS(来 自 安全套接字， 就像 TCPIIP 端口一样)是电路级网关防火墙的通
用实现。 电路级网关防火墙也称为电路代理， 在 电路的基础上管理通信 ， 而不是基于通信的内容管
理通信 。 这种防火墙只基于通信电路的终点名称(也就是源地址、 目 的地址以及服务端口号)来许可
或拒绝转发决策。 因 为它们代表对应用级网关防火墙概念的更改， 所 以 电路级网关防火墙仍然被视
为第二代防火墙。
状态检测防火墙 状态检测防火墙(也被称为动态包过滤防火墙)对网络通信的状态或环境进行
评估。 通过查看源地址和 目 的地址、 应用 习惯、 起源地以及当前数据包与同一会话先前数据包之间
的关系， 状态检测防火墙就能够为己授权的用户和活动授予广泛的访问权限， 并且能够积极地监视
和阻止未授权的用户和活动。 状态检测防火墙通常比应用级网关防火墙更有效。 状态检测防火墙被
视为第三代防火墙 ， 并且在 OSI 模型的网络层和传输层(第 3 层和第 4 层)上工作 。
1 . 多宿主防火墙
某些防火墙系统具有多个接口 。 例如， 多宿主防火墙必须至少具有两个过滤通信的接口(具有两
个接口 的防火墙被称为双宿主防火墙)。 应该禁用所有多宿主防火墙的 E 转发功能， 以便使过滤规
则控制所有通信 ， 而非允许接口 之间存在软件支持的捷径。 堡垒主机或屏蔽主机只 是位于专用网络
和不可信网络之间的防火墙系统。 通常， 堡垒主机位于连接专用网络和不可信网络的路由器之后。
第 11 章 网络安全架构与保护网络组件
所有入站通信都被路由至堡垒主机， 随后堡垒主机作为专用网络内所有可信系统的代理。 堡垒主机
不仅负责过滤进入专用网络的通信 ， 而且还负责 保护 内 部客户端的身份。
注意 :
术语 "堡垒" 来源于 中世纪的城堡建筑风格， 其中， 堡垒警戒室住于主入 口 的前面 ， 从而提供
第 一层防御保护。 使用这个术语描述防火墙， 表明 防火墙的作用相 当 于接受入站攻击的牺牲性主机。
屏蔽子网位于两个路由器之间 ， 并且堡垒主机就位于这个子网 内 ， 除此之外， 屏蔽子网与屏蔽
主机(也就是堡垒主机)在概念上相似。 所有入站通信都被定向至堡垒主机， 并且只有白堡垒主机代
理的通信才能够通过第二个路由器进入专用网络。 这种方式会创建一个子网， 在该子网 内 ， 某些外
部访问者被允许与网络提供的资源进行通信。 上面介绍的就是 DMZ 的概念， DMZ是一个被设计为
外部访问 者能够访问 的网络区域， 不过这个区 域仍然与组织的专用网络相隔离。 DMZ 常常是公共
Web、 电子邮件 、 文件 以及其他资源服务器的宿主。
2. 防火墙部署的体系结构
防火墙部署的体系结构一般有三种 : 单层 、 双层和三层(也被称为多层)。
你能从图 1 1.8 中看到， 单层部署将专用网络置于防火墙之后， 防火墙通过路由器连接互联网(或
者其他某些不可信网络)。 单层部署只 用于针对一般的攻击。 这种体系结构只提供最低限度的保护。
防火墙 专用网络
I I
单层
路由器 防火墙 专用网络
路由器 防火墙 防火墙
双层 Il
路由器 防火墙 防火墙
DMZ 事务处理子网 专用 网络
三层 I
路由器 防火墙 事务处理子网 防火墙 专用网络
三层 JI DMZ
I J I I
图门8 防 火墙部署的三种体系结构
327
CISSP 官方学 习指南(第 7 版)
双层部署体系结构可能采用两种不同的设计方式之一。 一种设计使用一个具有三个或更多个接
口 的防火墙， 另一种设计则串联使用两个防火墙 。 这种体系结构允许存在一个 DMZ 或公共可访问
的外部网。 在第一种设计中 ， DMZ 位于主防火墙的其中一个接口 ; 而在第二种设计中 ， DMZ 位于
两个串联的防火墙之间 。 DMZ 用 于驻留外部用户能够访问 的信息服务器系统。 防火墙根据其严格
的过滤规则将通信路由至 DMZ 或可信网络。 这种体系结构引入了 中等级别的路由和过滤复杂性。
三层部署体系结构是在专用网络与互联网之间用防火墙隔离的多个子网部署。 后续的每个防火
墙都使用更严格的过滤规则 ， 只接受可信来源的通信。 最外面的子网往往是 DMZ。 中间的子网可
以作为事务处理子网 ， 在这种子网 内 ， 系统需要支持在 DMZ 中驻留的复杂的 Web 应用程序。 第三
个或后端子网能够支持专用网络。 这种体系结构是最安全的， 不过其设计、 实现和管理也是最复杂的 。
1 1 .6.3 终端安全
终端安全的概念是指每个单独设备必须维护本地安全， 不论其网络或通信信道是否提供安全。
有时这被表示为"末端设备应对自 己的安全负责"。 然而， 一个更清晰的视角是网络中 的任何脆弱点，
无论其是否是在边界上 、 在服务器上或在客户端上 ， 都对组织内 的所有元素构成风险。
传统的安全取决于网络的边界入口 ， 通过诸如应用防火墙、 代理服务器、 集中式病毒扫描程序，
甚至是 IDSIIPSIIDP 解决方案来为网络中的所有内部节点提供安全保障。 这 已经不被认为是最佳行
业实践， 因为内部威胁和外部威胁一样多 。 网络 的安全取决于其最薄弱 的元素。
当更多远程访问服务， 包括拨号 、 无线和 VPN 可能允许外部实体 (己授权或未授权)来访问专用
网络而不必经过边界安全检查时， 缺乏 内部的安全将导致更多 的 问题 。
终端安全应视为在每个单独主机上提供足够安全努力的一个方面。 每个系统都应该有合适的安
全组合， 包含本地主机防火墙 、 反恶意软件扫描 、 身份认证、 授权、 审计和垃圾邮件过滤器以及
IDS/IPS 服务。
328
1 1 .6.4 其他网络设备
当构建一个网络时 ， 会使用 许多设备。 深入了解这些网络组件有助于设计避免单点故障的 IT
基础架构 ， 井且能够提供对可用性 的强大支持。
冲突与广播
当 两个系统同 时在只 支持羊条传输路径的连才i1r质上传送数据时， 就会发生冲突。 当 羊个系统
向所有可能的接收者传输数据时， 就会发生广播。 一般来说， 冲 突往往需要被避免和阻止， 而广播
有时则是有用 的 。 对冲 突和广播的管理引 入 了 一个名 为 "域" 的新术语。
冲 突域是一个互联系统组， 如果纽内 的任何两个(或多个)系统同 时进行传输， 那 么就会发生冲
突。 冲 突域外部的任何 系 统都 不会与 冲 突域内部的任何成员发生冲突。
广播域也是一个互联系统组， 如果组内的某个成员 传输广播信号， 那 么组 内 的其他所有成员 都
会接收到 广 播。 广 播域外部的任何 系 统都不会接收到 来 自 该广播域的 广播信号。
在设计和部署网络时， 应 当 考虑如何管理冲 突域和广播域。 使用任何第二层或更高层设备可以
分隔冲 突域， 即有倒可第二层或更高层设备则可以分隔广播域。 域被分隔时， 就意味着部署设备另
一侧的 系 统是不同域的成员 。
第 11 章 网络安全架构与保护网络组件
下面列出了一些网络中 的硬件设备:
中继器、 集中器和放大器 中 继器、 集中器和放大器用于加强线缆段上的通信信号以及连接使
用相同协议的网段。 通过在较长的线缆上部署一个或多个中继器， 这些设备就能用于延长特定线缆
类型的最大长度。 中继器、 集中器和放大器在 OSI 模型的第 1 层上工作。 中 继器、 集中器或放大器
两侧的系统都位于相 同 的冲突域和广播域内 。
集线器 集线器用于连接多个系统以及连接使用相同协议的网段。 它们将入站通信在所有出 站
端口上进行中继。 这确保了通信将到达预计的主机。 集线器是一种多端 口 的 中继器， 它在 OSI 模型
的第 1 层上工作。 集线器两侧的系统都位于同一冲突域和广播域内。 大多数组织有非集线器的安全
策略来限制或减少窃听的风险， 因 为集线器是一种过时的技术 ， 交换机 己 替代它们 。
调制解调器 传统的陆线调制解调器(调制器-解调器)是一种通信装置， 其在模拟信号和数字信
息之间进行覆盖或调制， 以支持在公共电话网络σsη。线路上进行计算机通信 。 在 20 世纪 60 年代
到 90 年代中期， 调制解调器通常指广域网通信 。 调制解调器后来被包括 ISDN、 DSL 调制解调器、
电缆调制解调器、 802. 1 1 无线调制解调器以及各种形式的无线调制解调器的数字宽带技术替代。
注意 :
调制解调器这个术语通常被不正确地用 于称呼那些并不真正进行调制解调的设备。 大多数被称
为 调制解调 器(电缆、 DSL、 ISDN、 无线调制解调 器等)的现代设备是路由器而 不是调制解调 器。
桥 桥用于将两个网络(即使是拓扑结构、 线缆连接类型和速度不同 的网络)连接在一起， 以便
连接使用相 同协议的网段。 桥将通信从一个网络转发至另一个网络。 将使用不同传输速率的网络连
接在一起的桥可以缓存数据包， 直至这些数据包被转发至较慢的网络， 这被称为存储转发设备。 桥
在 OSI 模型的第 2 层上工作。 桥两侧的系统位于相 同 的广播域 内 ， 不过所在 的冲突域不同。
交换机 如果不使用集线器， 那么可以考虑使用交换机或智能集线器。 交换机知道在每个出 站
端 口上连接的系统的地址。 与在所有出站端 口上中继通信不同， 交换机只在己知存在 的 目 的地所在
的出站端 口外对通信进行中继。 交换机能够更有效地进行流量传递、 建立隔离的冲突域以及提高数
据的总体吞吐量。 在用于创建VL州 时， 交换机也可以创建隔离的广播域。 如果采用这样的配置，
那么广播只允许在单个 VLAN 内 ， 不允许从一个 VL剧 顺利地穿越至另 一个 VL剧。 交换机主要
在 OSI 模型的第 2 层上工作。 当交换机具有额外的功能时(如路由)， 那么也可以在 OSI 模型的第 3
层上工作(例如， 在 VLAN 之间进行路由 的情况)。 在第 2 层上工作的交换机， 其两侧的系统位于同
一广播域内 ， 不过所在的冲突域不同。 在第 3 层上工作的交换机， 其两侧的系统位于不同的广播域
和冲突域 内 。 交换机用于连接使用相同协议的网段。
路由器 路由器用于控制网络上的通信流， 井常用来连接相似的网络以及控制两者之间的通信
流。 路由器既可以利用静态定义的路由表进行工作 ， 也可以采用动态的路由系统。 动态的路由协议
有很多种， 例如 RIP、 OSPF 和 BGP。 路由器在 OSI 模型的第 3 层上工作。 路由器两侧的系统属于
不 同 的广播域和冲突域。 路由器用 于连接使用相 同协议的网段。
桥式路由器 桥式路由器是一种由路由器和桥组成的组合设备。 桥式路由器首先尝试路由 ， 如
果路由失败， 那么就默认进行桥接。 因此， 桥式路由器主要在 OSI 模型的第 3 层上工作， 不过必要
时也可以在第 2 层上工作 。 在第 3 层上工作的桥式路由器， 其两侧的系统位于不 同的广播域和冲突
域内。 在第 2 层上工作的桥式路由器， 其两侧的系统位于相同 的广播域内， 不过所在的冲突域不同 。
桥式路由 器用于连接使用 相 同 协议的网段。
网关 网关能够连接使用不同网络协议的 网络。 通过将通信的格式转换为与每个网络采用的协
329
330