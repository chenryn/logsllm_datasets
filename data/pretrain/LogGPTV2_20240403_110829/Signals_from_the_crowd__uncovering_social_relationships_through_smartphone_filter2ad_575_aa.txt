title:Signals from the crowd: uncovering social relationships through smartphone
probes
author:Marco Valerio Barbera and
Alessandro Epasto and
Alessandro Mei and
Vasile Claudiu Perta and
Julinda Stefa
Signals from the Crowd: Uncovering Social Relationships
through Smartphone Probes
Marco V. Barbera, Alessandro Epasto, Alessandro Mei, Vasile C. Perta, and Julinda Stefa
Department of Computer Science, Sapienza University of Rome, Italy,
{barbera, epasto, mei, perta, stefa}@di.uniroma1.it.
ABSTRACT
The ever increasing ubiquitousness of WiFi access points, cou-
pled with the diffusion of smartphones, suggest that Internet every
time and everywhere will soon (if not already has) become a re-
ality. Even in presence of 3G connectivity, our devices are built
to switch automatically to WiFi networks so to improve user ex-
perience. Most of the times, this is achieved by recurrently broad-
casting automatic connectivity requests (known as Probe Requests)
to known access points (APs), like, e.g., “Home WiFi”, “Campus
WiFi”, and so on. In a large gathering of people, the number of
these probes can be very high. This scenario rises a natural ques-
tion: “Can signiﬁcant information on the social structure of a large
crowd and on its socioeconomic status be inferred by looking at
smartphone probes?”.
In this work we give a positive answer to this question. We or-
ganized a 3-months long campaign, through which we collected
around 11M probes sent by more than 160K different devices. Dur-
ing the campaign we targeted national and international events that
attracted large crowds as well as other gatherings of people. Then,
we present a simple and automatic methodology to build the un-
derlying social graph of the smartphone users, starting from their
probes. We do so for each of our target events, and ﬁnd that they
all feature social-network properties. In addition, we show that, by
looking at the probes in an event, we can learn important sociolog-
ical aspects of its participants—language, vendor adoption, and so
on.
Categories and Subject Descriptors
C.2 [Computer-communication networks]: Network Architec-
ture and Design—Wireless communication
Keywords
Smartphones; Wi-Fi probe requests; social networks.
1. MOTIVATION AND GOALS
WiFi access points (APs) are becoming increasingly ubiquitous
Initially, the APs were
in our homes, ofﬁces and public places.
Permission to make digital or hard copies of all or part of this work for personal or
classroom use is granted without fee provided that copies are not made or distributed
for proﬁt or commercial advantage and that copies bear this notice and the full cita-
tion on the ﬁrst page. Copyrights for components of this work owned by others than
ACM must be honored. Abstracting with credit is permitted. To copy otherwise, or re-
publish, to post on servers or to redistribute to lists, requires prior speciﬁc permission
and/or a fee. Request permissions from permissions@acm.org.
IMC’13, October 23–25, 2013, Barcelona, Spain.
Copyright 2013 ACM 978-1-4503-1953-9/13/10 ...$15.00.
http://dx.doi.org/10.1145/2504730.2504742.
used to free our portable computers (laptops) from the ADSL/LAN
cable. Nowadays, APs also represent a viable option for mobile
devices to get fast and cheap connectivity. So, it is becoming more
and more common for mobile devices to automatically switch to
WiFi connectivity whenever possible. To facilitate this automatic
process, current smartphone OSes store the list of the names (SSID)
of the networks the user typically connects to. Periodically, many
of our smartphones broadcast these SSIDs in the form of Probe
Request to search for available networks [20, 11, 4]. This is done
every few seconds, even when we are far from the WiFi access
points we usually connect to. In a large crowd of people, a very
high number of probe requests are sent every minute. In this paper
we consider the following questions: “What information can we get
on a large crowd from their probe requests?”; “Is it possible to infer
important information on the crowd like its social structure or its so-
cioeconomic status?”; and lastly: “If yes, can this analysis be done
in a simple and automatic way?”. To answer all these questions,
we organized a campaign of probe collection: We targeted large
gatherings of people at city-wide, national, and international events
as well as a university campus. Our campaign lasted three months,
and we managed to collect, using commodity hardware only, a total
of 11,136,711 probes sent by 164,740 different devices.
Our main contribution and ﬁndings in this work are the follow-
ing:
• We develop a simple and automated methodology that al-
lows to extract, starting from our datasets, the existing social
connections among the smartphone owners, and use it to un-
cover, for the ﬁrst time, the underlying social network of the
participants in each event;
• we analyze the properties of these social graphs and show
that they all feature social-network attributes in many aspects
such as diameter, clustering coefﬁcient and degree distribu-
tion;
• we show that important information on the nature of large
events can be learnt from the probes:
– the distribution of the languages of SSIDs, as detected
by our methodology, shows a clear relationship between
the international nature of the event and the density of
foreign participants;
– the distribution of the smartphone vendors varies across
the events and matches the expected socioecomomic
characteristics of the participants.
• by using our datasets, we validate the well-known sociologi-
cal theories of homophily and social inﬂuence in the context
of smartphone vendor adoption;
265• we perform a temporal analysis of the data collected in our
long-term university campus deployment that uncover strong
correlation between the frequency of the co-occurrence of
devices in the same time slot and the strength of the relation-
ship inferred by our methodology;
An anonymized version of the dataset is available online [41]. The
paper is organized as follows: Section 2 reviews the related work
in this area. Section 3 introduces our data collection methodology
and the events targeted by our analysis. Section 4 presents our main
ﬁnding and contribution. Finally, Section 5 draws our conclusions
and discusses possible future works.
2. RELATED WORKS
The use of probe requests as a way to discover nearby known
WiFi networks has recently gained the attention of the community.
In the last few years, the security community has focused on the
potential perils of this technology. Zovi et al. [11], show how both
Windows XP and OSX implementations of this feature exposes
users to a man-in-the-middle attack, where a malicious access point
(AP) pretends to be part of a trusted network (see also Klaus [20]).
More recently, the same concern has been raised for mobile devices
too [4]. In addition, probe requests have been shown to jeopardize
users’ privacy. Franklin et al. [15] show how the timings of pas-
sively collected probe requests can be exploited to ﬁngerprint the
wireless network interface driver. Loh et al. [12] expand on this
idea by noting that not just the driver but also the network device
and the OS can inﬂuence the timings between the probes. Finally,
Pang et al. [28] show how, by combining information leaked by
probe requests with other implicitly revealed identiﬁers, one can
recognize users even when MAC addresses and names are replaced
by pseudonyms.
Probe requests can also help WiFi monitoring and user track-
ing. Musa et al. [32] describe how to exploit probes to passively
track smartphones and infer the trajectory of their users. Rose et
al. [34] show how probes can be used to reveal past behavior of
users. Cunche et al. [9] use probe requests to decide whether two
devices potentially belong to socially linked users. They leverage
the intersection between the SSIDs in the probe requests of the two
devices and use a metric inspired by the Adamic-Adar [1] similar-
ity to smooth out the inﬂuence of frequently used SSIDs. Later on,
Cheng et al. [7] extended the previous analysis with spatial tempo-
ral information on probe requests on a small sample of users. These
works focus on pairs of users, possibly recurrently observed over
time, and aim at best characterizing their relationship.
In this work, we take a different approach: We focus on large
scale events involving thousands of users. We capture the probe
requests of the devices during the event, and, from that, we aim at
building a snapshot of the society that the participants represent. A
snapshot rich enough to reﬂect, as accurately as possible, the socio-
logical features and peculiarities of the crowd in the event (e.g. lan-
guage, wealth), and, simultaneously, the properties and features of
the emerging social-network. Our datasets are collected at a large
scale and target city-wide, campus-like, national, and international
events.
Our methodology builds also on the work of [26, 25, 22, 40, 23],
which analyze the social graphs induced by afﬁliation networks. To
the best of our knowledge, we are the ﬁrst to adapt and reﬁne these
techniques to large datasets of probes. This allows us to introduce
an easily automated methodology through which it is possible to
deﬁne and analyze large-scale social networks of mobile devices
users. Finally, for the ﬁrst time we perform language detection
on the broadcast SSIDs, and exploit the vendor ID of the captured
devices to validate the theory of homophily and social inﬂuence
between smartphone users.
3. DATA COLLECTION METHODOLOGY
According to the 802.11 standard [37], a WiFi access point can
announce its presence by broadcasting Beacons—frames contain-
ing network conﬁguration parameters such as the service set iden-
tiﬁer (SSID) and supported data rates. In particular, the SSID is a
string that identiﬁes the WiFi AP in a human readable format (e.g.,
“Home network”, “Free WiFi”). Client devices—referred to as Sta-
tions by the standard—can use two methods to detect access points
in range: Passive and active scanning. In the former, the client pas-
sively listens for beacons of nearby access points and uses them to
decide which network to connect to. Conversely, with active scan-
ning, it is the client that actively searches for available networks by
sending Probe Request frames. The probe requests can be either
directed to a speciﬁc network, by indicating its SSID, or broadcast
to any network within range. An example of both types of probes
is given in Table 1. Upon receiving a Probe Request, any AP be-
longing to the network the probe is directed to replies with a Probe
Response enabling the client to initiate a connection.
Probe requests are an efﬁcient way for energy-limited devices
(like smartphones) to detect known and unknown WiFi networks
within range. By sending active probes, a mobile device can keep
the WiFi radio on for just a few milliseconds, the amount of time
it takes for any response to be received. Directed probe requests
are also useful for connecting to “hidden” networks whose APs
do not broadcast its SSID. To further improve this mechanism, a
Preferred Network List (from now on PNL) of networks a device
has connected to in the past is maintained by the OS to transparently
connect or switch between known networks whenever possible.
3.1 Probes collection: Technical details
Mobile devices periodically send probe requests with a frequency
that is vendor speciﬁc but that we observed to be typically between
15 and 60 seconds, depending on the power state of the device.
Since probe requests are used in the discovery phase that comes
before the actual association to the access point, they are sent in
the clear over all transmission channels in sequence. This makes
intercepting (snifﬁng) probe requests an easy task, requiring just
commodity hardware like the internal wireless card of a laptop set
in monitor mode.
BCM43xx card;
In our collection campaign we used the following hardware:
• 4 × MacbookPro equipped with a Broadcom
• 1 × ThinkPad X61 equipped with an Atheros network card;
• 1 × ﬁxed external Ubiquity SuperRange Cardbus antenna1.
Overall, we collected around 11M probes sent by around 160K
unique devices. We collected data in more than eight different
events and locations with large gatherings of people. After data
collection we used the tshark network analyzer to ﬁlter out all cor-
rupted probes with a bad checksum (ﬁeld FCS in Table 1). Then,
we built a database that associates each device, as identiﬁed by its
MAC address (ﬁeld SA), to the list of SSIDs (ﬁeld SSID) derived
from its probes.
3.1.1 Description of the datasets
As many metropolises, Rome hosts several important events with
both national and international audience and is a recurrent venue of
large political and religious gatherings. Some of these events be-
came target of our study. In particular, in our data collection cam-
paign we targeted the following scenarios: 1) Events of national
1http://dl.ubnt.com/src_datasheet.pdf
266Frame Ctrl
Duration
DA
SA
. . .
. . .
. . .
. . .
. . .
. . .
ff:ff:ff:ff:ff:ff
ff:ff:ff:ff:ff:ff
ff:ff:ff:ff:ff:ff
10:9a:42:42:42:42
10:9a:42:42:42:42
10:9a:42:42:42:42
BSSID
ff:ff:ff:ff:ff:ff
ff:ff:ff:ff:ff:ff
ff:ff:ff:ff:ff:ff
Seq Ctl
SSID
. . .
. . .
. . .
null (Broadcast)
“Free WiFi”
“Home WiFi”
FCS
. . .
. . .
. . .
Table 1: Example of Probe Requests sent by device with MAC address 10:9a:42:42:42:42. One broadcast probe (on top), and two
directed to the “Free WiFi” and the “Home WiFi” networks respectively.
audience; 2) events of international audience; 3) events with au-
dience consisting of mostly local residents; 4) a train station; 5) a
university campus; 6) other. The ﬁrst four were one-shot events
lasted from 40 minutes to 6 hours each. Data collection was phys-
ically carried out by a team of 5 researchers that joined the event
equipped with their laptops. The ﬁfth dataset was collected through
a ﬁxed hardware placed in a university campus over a continuous
period of 6 weeks. The last dataset includes probes collected by
the research group in other occasions (e.g. commuting from home
to ofﬁce). In the remaining of this section we describe in details
each of the scenarios/events that we targeted. Details on the num-
ber of devices and number of probes of each datasets are given in
Table 2.
3.1.2 National Events
In our collection campaign we targeted the political meetings
of two very large parties in Italy: The Movimento Cinque Stelle
(M5S), a recently-established progressive party that unexpectedly
got 28% of the votes, and the conservative party Popolo della Lib-
ertà (PDL), one of the most important parties in the Italian political
scene. The Movimento Cinque Stelle closed its electoral campaign
in Rome, with a meeting held on February 22th 2013 in one of the
largest square in Rome area (“Piazza San Giovanni”). This event
is denoted in our dataset as Politics 1. The Popolo della Libertà
called for a post-electoral meeting in Rome on March 23rd. The
meeting was held in a famous square in the city center (“Piazza
del Popolo”). This dataset is denoted as Politics 2. As the police
reported, in both cases the event participants came from all over
Italy.
3.1.3 International Events
On February 11th, 2013, Pope Benedict XVI announced his res-
ignation, after 8 years of service as the Head of the Catholic Church.
The day of his farewell Angelus2, February 24th, Vatican City
was literally invaded by pilgrims and tourists from all around the
world, as police reported. The same happened on March 17th,
when the newly elected Pope Francis delivered his ﬁrst Angelus.
The datasets relative to these two events are denoted as Vatican 1
and Vatican 2 respectively.
3.1.4 City-wide probes: The Mall
For this case study we aimed at collecting data from local resi-
dents of Rome. So, we targeted a location known for hosting many
families and groups of friends all at once: One of the biggest malls
in Rome (Porta di Roma). To make sure to get a relevant afﬂuence
of people, we chose to collect the data on a special afternoon, right
before Easter (March 30th, 2013), when many Romans like to shop.
The data collection lasted 3 hours and a half.
3.1.5 Train Station
In this case study we targeted Termini, the Rome central train
station, and collected the probes for a total of 7 hours split in a time
2The Angelus is the Pope’s speech and prayer delivered every Sun-
day at noon from his window overlooking Saint Peter’s square.
range of four days. The collection was carried out by positioning
at vantage points in the station so as to maximize the area covered.
3.1.6 University
This dataset was collected by deploying an antenna in a ﬁxed
point located at one of the main entries of our university campus.
Differently from the other datasets, in this case we collected probes
continuously for a period of 6 weeks, collecting probes requests
mostly transmitted by devices of students entering and leaving the
campus.
3.1.7 Others
This dataset consists of probes collected individually by 3 mem-
bers of our research group during several tours across the city per-
formed in a time span of 4 weeks while, for example, commuting
from home to work or shopping.
3.1.8 All
Our last dataset, denoted as All, is generated by merging all the
previously described datasets together. We will refer to this dataset
when giving global statistics on the aggregate data we collected.
4. DATA ANALYSIS
Our objective is to show how WiFi probe requests collected in
big events or in a given area of a city reveal a number of insights on
the sociological characteristics of the crowd in the event or on the
target population. We do so by means of a methodology compris-
ing social networks analysis techniques, sociological theories and
natural language processing.
4.1 Vendors of the devices in the datasets
Today’s market of mobile devices is very dynamic and lively. Pe-
riodically, the major vendors either launch newer versions of their
ﬂagship products or introduce a product line destined to a new seg-
ment of the market. We hereby investigate what type of inﬂuence
this has on the data we collected. To do so, we grouped by ven-
dor the over 160K devices we detected (see Table 2) and computed
the percentage of devices of each vendor. The vendor of a device
can be obtained by looking at the sequence of the ﬁrst 3 bytes of
the MAC address ﬁeld of any of its WiFi probes and matching it
against the IEEE Public OUI3 list. This is the ofﬁcial database that
lists the space of MAC addresses assigned to each vendor. The 6
most common vendors we found in our datasets are shown in Fig-
ure 1. The most common vendor in out datasets is Apple (57%
of devices), followed by Samsung (17%), Nokia (6%), HTC (1%),
Sony (1%) and RIM (1%). These results do not necessarily mea-
sure the market penetration of these brands—a number of factors
may have inﬂuenced the distribution of the vendors like the range
of the WiFi antennas, the probability that users leave the WiFi in-
terface on, or the frequency with which devices scan for nearby
networks. However, they are qualitatively similar to those obtained
3http://standards.ieee.org/develop/regauth/
oui/oui.txt
267Dataset
Politics 1 (P1)
Politics 2 (P2)
The Mall (M)
Train Station (TS)
University (U)
Vatican 1 (V1)
Vatican 2 (V2)
Others
All
Devices
16,695
12,619
9,731
14,640
17,131
23,430
22,219
60,445
164,740
PNLs (%)
4,677
4,144
3,859
5,371
8,853
7,631
6,817
21,824
59,684
(28.0%)