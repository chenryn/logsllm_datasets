User: Write a shell script for timing backup of MySQL database
Assistant: #!/bin/bash # Database related information mysql_user="root" # MySQL user name mysql_password="password" # MySQL password mysql_host="localhost" # MySQL host name or IP address mysql_port="3306" # MySQL port number mysql_database= "mydb" # Name of the database to be backed up # Backup related information backup_dir="/var/backups/mysql" # Backup save path backup_prefix="mydb_backup" # Backup file name prefix backup_date=$(date +%Y-%m-% d_%H-%M-%S) # Backup date time # MySQL backup command mysql_backup_cmd="mysqldump -h ${mysql_host} -P ${mysql_port} -u${mysql_user} -p ${mysql_password} ${mysql_database} " # Create a backup directory if [ ! -d ${backup_dir} ]; then mkdir -p ${backup_dir} fi # Execute the backup command backup_file="${backup_prefix}_${backup_date}.sql" ${mysql_backup_cmd} > $ {backup_dir}/${backup_file} # Compress the backup file gzip ${backup_dir}/${backup_file} # Delete the backup file 7 days ago find ${backup_dir} -type f -name "${backup_prefix}_*.sql. gz" -mtime +7 -exec rm {} \; echo "MySQL backup completed, the backup file is: ${backup_dir}/${backup_file}.gz"