liminary study as given in Section 2.2.2. We trained QuLog on valuesforthetwoscoresshowthatQuLogisusefulinautomatically
the linguistic representations from the eight systems and eval- assessingthesufficientlinguisticstructureinasystem-agnostic
uated the remaining one. Notably, we identify log instructions manner.Bypointingouttheloginstructionsthatmaybenefitfrom
withinsufficientlinguisticstructureinfourofthetestedsystems: enrichingthestatictext,QuLogimprovesthecomprehensibilityof
Cassandra, HBase, Kafka and Zookeeper, and we report the re- theloginstructions,ultimatelyimprovingtheloggingquality.
sultsforthem.Asbaselines,weconsideredtwopopularbinary
textclassificationmethods,i.e.,SVMandRandomForest(RF)[3],
4.4 PredictionExplainerEvaluation
trainedonthegeneral-purposerepresentationofthelinguisticcate-
gories(BERT)[12].WetrainQuLog‚Äôslinguisticqualityassessment Experimentdesign.Toevaluatethepredictionexplainer,wecon-
partwiththesamevaluesofthehyperparametersasforthelog structanartificialdatasetasinthefollowing.Westartbyrandomly
levelqualityassessment,withsettingthebatchsizeto64.Aseval- sampling100statictextsoftheinstructionswithacorrectloglevel
uationcriteria,weusedF andspecificity.Additionalevaluation predictionofanalreadytrainedmodel(i.e.,QuLog*forloglevel
1
againstrule-basedapproachescanbefoundinAppendixB. assignment).Eachstatictextismanuallyinvestigatedbytwodevel-
opersandmodifiedsuchthatamanuallyselectedwordofthestatic
Table7:Sufficientlinguisticstructureassessment(perfor- textisreplacedwithitsantonym.Thischangestheeventdescription
manceevaluation) creatinganoppositeevent.Forexample,westartwiththeorigi-
nalstatictext"Connectionestablished"withtheoriginalloglevel
F Specificity "info".Wechangethetoken"established"intoitsantonym"refused",
1
System QuLog SVM RF QuLog SVM RF obtainingamodifiedstatictext,i.e.,"Connectionrefused"andmod-
ifiedword"refused".Sincethemodifiedtokenisanantonym,we
Cassandra 1.00 0.99 0.99 1.00 1.00 0.96
changetheoriginalloglevel("info")intothemodifiedloglevel
HBase 0.96 0.96 0.97 0.97 0.94 0.92
("error").Therefore,foreachstatictextweobtainatupleoffive
Kafka 0.99 0.98 0.92 1.00 1.00 0.74
elements‚Äì1)originalstatictext,2)modifiedstatictext,3)modified
Zookeeper 0.99 0.99 0.98 1.00 0.98 0.94
word,4)originallevel,and5)modifiedlevel.Fromtheinitial100,
Average 0.98 0.97 0.96 0.99 0.98 0.89
thetwoannotatorsinitiallyagreedon42changes.Inasubsequent
discussion,thenumberwasincreasedto65instructionsusedinthe
ICPC2022,May21‚Äì22,2022,Pittsburgh,PA,USA Bogatinovski,etal.
evaluation.Theoriginalandmodifiedstatictextsaregiventothe Table8:UseCaseStudyResults
predictionexplainerthatgeneratestheorderedtokenlistofimpor-
tancescores.Themodifiedtokenisusedasgroundtruth.Wecheck LogLevel LinguisticStructure
LogInstructions
howmanytokensshouldthedeveloperexaminebeforefindingthe Recommendations Recommendations
System1 63 52(5/11) 56(4/7)
modifiedtoken,andwemeasureitbytheùëíùëüùëüùëúùëü@ùëò performance
System2 138 120(8/18) 133(3/5)
score.Weconsideredtwologlevelmodels,thetwo-classIE,dueto
itshighperformanceandthethree-classloglevelassignmentIWE.
Asabaseline,weconsidersuggestingarandomlychosentokenas
themostrelevant.
4.6 ThreatstoValidity
ResultsanddiscussionFigure4depictstheexperimentalresults.
The key threats to the validity of this study related are to the
Itisseenthatthepredictionexplanationmodulehasalowerroron
includeddatasetsandtheimplementationdetails.Wechosevetted
correctwordsuggestions(PI:EMAIL)fortheIEmodel.The
systemsforthepreliminarystudyfollowingrelatedworks[34].We
predictionexplanationmodelfortheIWEmodelisabithigher(the
furthercomplementeditwithanotherpublicdatasetcollectionto
PI:EMAIL),however,bothexplainersshowbetterperformance
mitigatedataselectionartefacts.Thedatasetsusedforthesufficient
thantheconsideredbaseline.Theobserveddiscrepancybetween
linguisticstructureandpredictionexplainermightbebiasedby
thepredictionexplanationsoftheIEandIWEisduetothebetter
thehumanannotationprocedure.Therefore,weconsideredtwo
performanceoftheIEmodel(averageF score0.88)asopposed
1
annotatorstoconstructeachofthem.Athird-partyevaluationmay
to the IWE model (average F score of 0.73). It indicates that a
1
helptofurthermitigatethebiasesfromtheannotation.
betterperformingmodellearnsdiscriminativefeaturesbetter.By
consideringùëò relevant tokens (i.e., a developer examines the k
highest-rankedtokens),thethreeexplanationmodelsreducethe 5 RELATEDWORK
error,withIWandIWEhavingsharpdecreases,achieving0.05 LoggingpracticesWediscussedthestudiesonqualityproperties
and0.23onerror@2correspondingly.Thelowvalueoftheone inSection2.1.Alongsidethequalityproperties,severalliterature
errorshowsthatQuLog‚Äôsloglevelpredictionexplainercorrectly studiesareexaminingdiverseloggingpractices.Inoneofthefirst
explainsthepredictions.Therefore,thepredictionexplainergives studies,Yuanetal.[48]quantifythelogpervasivenessandthebene-
valuablesuggestionsonstatictextupdatestoimprovequality. fitofsoftwarelogginginC/C++systemswhileproposingproactive
loggingstrategies.Theyfoundthatdevelopersspentsignificant
4.5 UseCases effortsmodifyingtheloglevels,statictexts,andtheparameters
WefurtherappliedQuLogontwointernalsystems.Forloglevel ofloginstructionsbutdonotchangetheirlocationsoften.Simi-
assignment,weconsideredQuLog*IEmodel.Table8summarizes larobservationsaremadeforJava[6,7,25,40,52]andAndroid
theresults.ForSystem1,onthetaskofloglevelassignment,QuLog softwaresystems[50].Thesestudiesaugmenttheaforenamedby
agrees in 52/63 cases with the original log levels and 56/63 on introducingnewresearchquestionslikestudyinglogbugresolu-
sufficient linguistic structure assessment. Developers examined tion time [6], log instruction update types [7] and evolution of
the11disagreementsforloglevelandthesevendisagreements loggingconfiguration[52].Forexample,Kabinaetal.[25]iden-
onsufficientlinguisticstructure.Theydecidedtochange5/11log tifiedthat20-45%oftheloginstructionschangethroughsystem
levelsandaugmented4/7withadditionallinguisticstructures.The lifetime.Theimportanceofloggingpracticesiswidelyrecognized
remaininglinguisticsuggestionswereconsideredas"unimportant". intheindustry,seenbyseveralloggingpracticestudiesofindustrial
Similarly,forSystem2,QuLogagreedin120/138casesonloglevel, systems[1,5,38].Inafieldstudy,Lietal.[28]demonstratesthe
with 8/18 log levels being changed. On the sufficient linguistic differentcostsofloggingfromdevelopersandresearchperspec-
evaluation,QuLogidentifiedfiveinstructionswithinsufficientstatic tives.Thesimilaritiesofthestatictextconcerningthedifferentlog
text,threeofwhichwereaccepted.Thesetwoexamplesshowcase levelsandthesimilaritiesintheconclusionsregardingthevarious
howQuLog‚Äôsautomaticallyassesstheloginstructions,givinguseful loggingpracticesindifferentprogramminglanguagesmotivateour
suggestionsforimprovingtheloggingquality. workonsoftwaresystemscross-examinationwhenevaluatinglog
instructionquality.
AutomaticLoggingEnhancement.Thereareseveralmethods
thatsupporttheautomaticenhancementofloginstructions[27,
0.8 31, 33, 47, 53]. Based on the enhancement type, we distinguish
infoerror
twogroupsofmethods,i.e.,methodsaddressingtheloginstruc-
0.6 infowarningerror
tionsplacementproblem(where-to-log)[5,9,16,27,32],andmeth- rorreenO
randomassignment
0.4 odsaddressingthechoiceofrelevantlogginginformation(what-
medianlengthlogmessages
to-log) [30, 33, 47, 49]. The latter can further be separated into
0.2
threegroups:1)logmessagegeneration[22],2)relevantvariables
0.0 placement[51],and3)loglevelsuggestion[18,34].Differentfrom
1 2 3 4 5 6 7 previouswork,weutilizesharedlanguagepropertiesbetweendi-
Top-kranks
versesoftwaresystemstodevelopanautomaticsystem-agnostic
approachforloginstructionqualityassessment,definedas1)log
Figure4:Evaluationoftheexplanationmodule
levelassignmentand2)sufficientlinguisticstructureassessments.
QuLog:Data-DrivenApproachforLogInstructionQualityAssessment ICPC2022,May21‚Äì22,2022,Pittsburgh,PA,USA
6 CONCLUSION
[14] EdwardFinegan.2014.Language:Itsstructureanduse(7ed.).CengageLearning,
Writingloginstructionwithsufficientqualityischallengingdueto Florence,AL.289pages.
[15] TheApacheSoftwareFoundation.2022.LoggingServiceProject.Appache. Re-
theabsenceofcompleteloggingguidelinesanddevelopersincom-
trievedJanuary2,2022fromhttps://logging.apache.org/
pleteunderstandingofsystemcomplexity.Inthiswork,weaddress [16] QiangFu,JiemingZhu,WenluHu,Jian-GuangLou,RuiDing,QingweiLin,
theproblemofautomatinglogqualityassessment.Wefirstdoa DongmeiZhang,andTaoXie.2014.WhereDoDevelopersLog?AnEmpirical
StudyonLoggingPracticesinIndustry.InCompanionProceedingsofthe36th
preliminarystudyonninesoftwaresystemstostudythequality InternationalConferenceonSoftwareEngineering.AssociationforComputing
propertiesoftheloginstructions.Theresultsofourstudyidentified Machinery,NewYork,NY,USA,24‚Äì33.
1)loglevelassignmentand2)sufficientlinguisticstructureassess- [17] EvaGibajaandSebasti√°nVentura.2015. ATutorialonMultilabelLearning.
Comput.Surveys47,3(2015),52:1‚Äì52:38.
mentsastwoqualitypropertiesidentifiablesolelybythestatictext [18] AnuHan,ChenJie,ShiWenchang,HouJianwei,LiangBin,andQinBo.2019.
oftheloginstruction.Basedonourobservations,weproposea AnApproachtoRecommendationofVerbosityLogLevelsBasedonLogging
Intention.In2019IEEEInternationalConferenceonSoftwareMaintenanceand
deeplearning-basedapproachforautomaticloginstructionquality
Evolution(ICSME).IEEE,NewYork,USA,125‚Äì134.
assessmentonagiventargetsystem.Ourapproachusesthestatic [19] RobertJ.Hand,DavidJ.andTill.2001.ASimpleGeneralisationoftheAreaUnder
textanditslinguisticstructurerepresentationtoevaluatethetwo theROCCurveforMultipleClassClassificationProblems.MachineLearning45
(2001),171‚Äì186.
properties.Inaddition,weadoptanapproachfromexplainableAI [20] AhmedE.Hassan.2009.Predictingfaultsusingthecomplexityofcodechanges.
toreasonaboutmodelpredictionsandgivesuggestionsforpoten- In2009IEEE31stInternationalConferenceonSoftwareEngineering.IEEEComputer
tialimprovementsoftheinstruction.Ourapproachoutperforms Society,USA,78‚Äì88. https://doi.org/10.1109/ICSE.2009.5070510
[21] MehranHassani,WeiyiShang,EmadShihab,andNikolaosTsantalis.2018.Study-
theconsideredbaselines,achievinghighaccuracyforloglevelas- ingandDetectingLog-RelatedIssues.EmpiricalSoftw.Engg.23(2018),3248‚Äì3280.
signment(0.88)andahighF scoreforsufficientlinguisticstructure https://doi.org/10.1007/s10664-018-9603-z
1
[22] PinjiaHe,ZhuangbinChen,ShilinHe,andMichaelR.Lyu.2018. Character-
assessment(0.99).Theresultshighlightfutureresearchopportuni-
izingtheNaturalLanguageDescriptionsinSoftwareLoggingStatements.In
tiesinusingcross-systemsloginstructionsnotjustinautomatically Proceedingsofthe33rdACM/IEEEInternationalConferenceonAutomatedSoft-
assessingloginstructionquality,butalsotoautomaticallyenhance wareEngineering.AssociationforComputingMachinery,NewYork,NY,USA,