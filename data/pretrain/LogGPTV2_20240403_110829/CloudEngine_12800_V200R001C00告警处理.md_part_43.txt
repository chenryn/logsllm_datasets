l 如果不是，请执行步骤6。
步骤3 更换单板。检查该告警是否已消除。
l 如果是，请执行步骤7。
l 如果不是，请执行步骤6。
步骤4 查看源的IS-IS版本号是否可以修改。
l 如果是，请执行步骤5。
l 如果不是，请执行步骤6。
步骤5 修改源的IS-IS版本号（华为不支持修改IS-IS版本号）。检查告警是否消除。
l 如果是，请执行步骤7。
l 如果不是，请执行步骤6。
步骤6 请收集告警信息、日志信息和配置信息，并联系技术支持人员。
步骤7 结束。
----结束
26.12 ISIS_1.3.6.1.3.37.2.0.12 isisAreaMismatch
Trap Buffer 信息解释
IS-IS received a level-1 Hello PDU whose area address is different from the local area
address. (isisSysInstance=[isisSysInstance], isisSysLevelIndex=[isisSysLevelIndex],
isisCircIndex=[isisCircIndex], isisCircIfIndex=[isisCircIfIndex],
isisPduFragment=[isisPduFragment], ifIndex=[ifIndex], IfName=[IfName])
IS-IS收到的level-1的Hello报文的区域地址与本地的区域地址不同。
文档版本 06 (2017-09-12) 华为专有和保密信息 338
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 26 IS-IS
Trap 属性
Trap属性 描述
Alarm or Event Event
Trap Severity Error
Mnemonic Code isisAreaMismatch
Trap OID 1.3.6.1.3.37.2.0.12
Alarm ID 该Trap是事件Trap，不涉及告警ID。
Alarm Type 该Trap是事件Trap，不涉及告警类型。
Raise or Clear 该Trap是事件Trap，不涉及告警产生或恢复。
Match trap 该Trap是事件Trap，不涉及配对Trap。
Trap Buffer 信息参数
参数名称 参数含义
isisSysInstance IS-IS进程号。
isisSysLevelIndex IS-IS级别。
l 1：Level-1
l 2：Level-2
isisCircIndex 接口索引。
isisCircIfIndex 接口索引。
isisPduFragment 64字节报文头缩略。
ifIndex 接口IF索引。
IfName 接口名。
VB 信息参数
VB OID VB Name VB Index
1.3.6.1.3.37.1.1.1.1.1 isisSysInstance isisSysInstance
1.3.6.1.3.37.1.2.1.1.1 isisSysLevelIndex isisSysInstance
isisSysLevelIndex
1.3.6.1.3.37.1.3.1.1.2 isisCircIfIndex isisSysInstance
isisCircIndex
1.3.6.1.3.37.1.10.1.1.2 isisPduFragment isisSysInstance
文档版本 06 (2017-09-12) 华为专有和保密信息 339
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 26 IS-IS
对系统的影响
1．如果是由于单板硬件故障触发该告警，可能造成路由震荡，CPU使用率升高。
2．如果是配置错误触发该告警，会导致IS-IS邻居建立不起来，路由也无法相互学习。
可能原因
原因1：配置错误。
原因2：区域地址字段被改写。
处理步骤
步骤1 对照ISO10589定义的IS-IS报文格式，从告警输出信息中找到[pdu-fragment]字段（十六
进制）的内容，查看源的System ID。在源的IS-IS视图下使用display this命令查看源是
否配置了与本地相同的区域地址。
l 如果是，请执行步骤3。
l 如果不是，请执行步骤2。
表26-5 IS-IS报文类型和System ID的查找方法
报文类型的查找方法 System ID的查找方法
Hello：[pdu-fragment]字段的第5个字节的 从[pdu-fragment]字段的第10个字节开始
值为0f、10或者11。 的连续6个字节是System ID。
LSP：[pdu-fragment]字段的第5个字节的 从[pdu-fragment]字段的第13个字节开始
值为12或者14。 的连续6个字节是System ID。
SNP：[pdu-fragment]字段的第5个字节的 从[pdu-fragment]字段的第11个字节开始
值为18、19、1A或者1B。 的连续6个字节是System ID。
步骤2 （请谨慎使用undo network-entity命令）在源的IS-IS视图下使用network-entity命令配
置新的IS-IS区域地址，使其与本地的区域地址相同。检查告警是否消除。
l 如果是，请执行步骤4。
l 如果不是，请执行步骤3。
步骤3 请收集告警信息、日志信息和配置信息，并联系技术支持人员。
步骤4 结束。
----结束
26.13 ISIS_1.3.6.1.3.37.2.0.13 isisRejectedAdjacency
Trap Buffer 信息解释
IS-IS failed to establish the adjacency with its peer. (isisSysInstance=[isisSysInstance],
isisSysLevelIndex=[isisSysLevelIndex], isisCircIndex=[isisCircIndex],
文档版本 06 (2017-09-12) 华为专有和保密信息 340
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 26 IS-IS
isisCircIfIndex=[isisCircIfIndex], isisPduFragment=[isisPduFragment], ifIndex=[ifIndex],
IfName=[IfName])
无法建立IS-IS邻居。
Trap 属性
Trap属性 描述
Alarm or Event Event
Trap Severity Error
Mnemonic Code isisRejectedAdjacency
Trap OID 1.3.6.1.3.37.2.0.13
Alarm ID 该Trap是事件Trap，不涉及告警ID。
Alarm Type 该Trap是事件Trap，不涉及告警类型。
Raise or Clear 该Trap是事件Trap，不涉及告警产生或恢复。
Match trap 该Trap是事件Trap，不涉及配对Trap。
Trap Buffer 信息参数
参数名称 参数含义
isisSysInstance IS-IS进程号。
isisSysLevelIndex IS-IS级别。
l 1：Level-1
l 2：Level-2
isisCircIndex 接口索引。
isisCircIfIndex 接口索引。
isisPduFragment 64字节报文缩略。
ifIndex 接口IF索引。
IfName 接口名。
VB 信息参数
VB OID VB Name VB Index
1.3.6.1.3.37.1.1.1.1.1 isisSysInstance isisSysInstance
1.3.6.1.3.37.1.2.1.1.1 isisSysLevelIndex isisSysInstance
isisSysLevelIndex
文档版本 06 (2017-09-12) 华为专有和保密信息 341
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 26 IS-IS
VB OID VB Name VB Index
1.3.6.1.3.37.1.3.1.1.2 isisCircIfIndex isisSysInstance
isisCircIndex
1.3.6.1.3.37.1.10.1.1.2 isisPduFragment isisSysInstance
对系统的影响
邻居不能正常建立。
可能原因
原因1：本地IS-IS的系统ID或者虚拟系统ID与邻居系统ID配置重复。
原因2：接口下配置的认证模式或认证密码与邻居的不一致导致Hello报文认证不通过。
原因3：由于链路两端IS-IS Level-1邻居区域地址不同。
原因4：本地接口收到与本地Level不匹配的Hello报文。
原因5：在广播网中，本地接口收到IP地址与本地接口不在同一个网段的接口发送的
Hello报文。
原因6：在P2P网络中，本地接口在没有配置isis peer-ip-ignore的情况下，收到IP地址与
本地接口不在同一个网段的接口发送的Hello报文。
处理步骤
步骤1 查看告警输出信息中IfName字段的值，确定接收此报文的接口和接口类型。
l 如果是广播接口，请执行步骤2。
l 如果是P2P接口，请执行步骤7。
步骤2 查看告警输出信息中PduFragment字段中的内容，从第十个字节开始的连续六个字节为
源的System ID，确定源，分别在链路两端的接口视图和IS-IS进程视图下使用display
this命令，检查链路两端的IS-IS级别和接口级别是否一致。
l 如果不一致，请执行步骤3。
l 如果一致，请执行步骤6。
步骤3 在接口视图下使用isis circuit-level命令，将链路两端的IS-IS级别和接口级别修改一致。
检查告警是否消除。
l 如果消除，请执行步骤15。
l 如果不能消除，请执行步骤4。
步骤4 使用display ip interface命令查看源接口的IP地址与本地接口的IP地址是否在同一网
段。
l 如果在同一网段，请执行步骤8。
l 如果不在同一网段，请执行步骤5。
步骤5 在源和本地的接口视图下使用ip address命令配置两端接口的IP地址在同一网段。检查
告警是否消除。
文档版本 06 (2017-09-12) 华为专有和保密信息 342
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 26 IS-IS
l 如果消除，请执行步骤15。
l 如果不能消除，请执行步骤8。
步骤6 在源和本地的接口视图下使用display this命令检查是否配置了isis peer-ip-ignore。
l 如果配置了isis peer-ip-ignore，请执行步骤10。
l 如果未配置isis peer-ip-ignore，请执行步骤7。
步骤7 在源和本地的接口视图下配置isis peer-ip-ignore或者使用ip address命令配置两端接口
的IP地址在同一网段。检查告警是否消除。
l 如果消除，请执行步骤15。
l 如果不能消除，请执行步骤10。
步骤8 检查链路两端Level-1的区域地址是否相同。
l 如果相同，请执行步骤10。
l 如果不相同，请执行步骤9。
步骤9 在IS-IS视图下使用network-entity命令配置新的区域地址，确保两端的Level-1区域地址
相同。检查告警是否消除。
l 如果消除，请执行步骤15。
l 如果不能消除，请执行步骤10。
步骤10 使用display current-configuration命令检查源的System ID与本地IS-IS的System ID或
Virtual System ID是否重复。
l Y，请执行步骤11。
l N，请执行步骤12。
步骤11 （请谨慎使用undo network-entity命令。）修改其中一台的系统ID或者虚拟系统ID，
确保链路两端的无重复的系统ID或者虚拟系统ID。检查告警是否消除。
l Y，请执行步骤14。
l N，请执行步骤12。
步骤12 检查链路两端接口上的IS-IS认证模式或者认证密码是否相同。
l Y，请执行步骤14。
l N，请执行步骤13。
步骤13 在链路两端的接口视图下使用isis authentication-mode命令，修改认证方式和认证密
码，使链路两端的IS-IS认证保持一致。或者在链路两端的接口视图下使用undo isis
authentication-mode命令取消IS-IS认证（删除IS-IS认证会降低系统的安全性）。检查
告警是否消除。
l Y，请执行步骤15。
l N，请执行步骤14。
步骤14 请收集告警信息、日志信息和配置信息，并联系技术支持人员。
步骤15 结束。
----结束
26.14 ISIS_1.3.6.1.3.37.2.0.14 isisLSPTooLargeToPropagate
文档版本 06 (2017-09-12) 华为专有和保密信息 343
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 26 IS-IS
Trap Buffer 信息解释
ISIS attempt to propagate an LSP which is larger than the dataLinkBlockSize for the circuit.
(isisSysInstance=[isisSysInstance], isisSysLevelIndex=[isisSysLevelIndex],
isisCircIndex=[isisCircIndex], isisCircIfIndex=[isisCircIfIndex],
isisPduLspSize=[isisPduLspSize], isisPduLspId=[isisPduLspId], ifIndex=[ifIndex],
IfName=[IfName])
ISIS试图发送一个大于接口最大传送单元的LSP报文。
Trap 属性
Trap属性 描述
Alarm or Event Event
Trap Severity Critical
Mnemonic Code isisLSPTooLargeToPropagate
Trap OID 1.3.6.1.3.37.2.0.14
Alarm ID 该Trap是事件Trap，不涉及告警ID。
Alarm Type 该Trap是事件Trap，不涉及告警类型。
Raise or Clear 该Trap是事件Trap，不涉及告警产生或恢复。
Match trap 该Trap是事件Trap，不涉及配对Trap。
Trap Buffer 信息参数
参数名称 参数含义
isisSysInstance IS-IS进程号。
isisSysLevelIndex IS-IS级别。
l 1：Level-1
l 2：Level-2
isisCircIndex IS-IS接口分配的索引。
isisCircIfIndex 接口索引。
isisPduLspSize LSP的长度。
isisPduLspId LSP ID。
ifIndex 接口索引。
IfName 接口名。
文档版本 06 (2017-09-12) 华为专有和保密信息 344
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 26 IS-IS
VB 信息参数
VB OID VB Name VB Index
1.3.6.1.3.37.1.1.1.1.1 isisSysInstance isisSysInstance
1.3.6.1.3.37.1.2.1.1.1 isisSysLevelIndex isisSysInstance
isisSysLevelIndex
1.3.6.1.3.37.1.3.1.1.2 isisCircIfIndex isisSysInstance
isisCircIndex
1.3.6.1.3.37.1.10.1.1.6 isisPduLspSize isisSysInstance
1.3.6.1.3.37.1.10.1.1.1 isisPduLspId isisSysInstance
对系统的影响
无。
可能原因
转发的LSP长度超过接口MTU大小。
处理步骤
步骤1 执行display ip interface interface-type interface-number命令查看接口的MTU值，对应字
段The Maximum Transmit Unit。
步骤2 使用display current-configuration configuration isis命令检查IS-IS进程的LSP的长度设
置，显示字段lsp-length originate表示生成LSP的最大长度。如果执行该命令无法查询到
LSP的长度的设置，则表示LSP的长度设置为缺省值。缺省情况下IS-IS进程生成LSP的
最大长度为1497字节。
步骤3 进入IS-IS视图，使用lsp-length originate max-size命令修改发送LSP报文的长度使其小
于接口MTU长度。
步骤4 检查告警是否消除。
l 如果是，请执行步骤6。
l 如果不是，请执行步骤5。
步骤5 请收集告警信息、日志信息和配置信息，并联系技术支持人员。
步骤6 结束。
----结束
26.15 ISIS_1.3.6.1.3.37.2.0.15
isisOrigLSPBuffSizeMismatch
文档版本 06 (2017-09-12) 华为专有和保密信息 345
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 26 IS-IS