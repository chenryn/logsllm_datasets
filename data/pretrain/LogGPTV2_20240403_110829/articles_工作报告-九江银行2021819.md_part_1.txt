**国产化架构下的安全大数据分析平台**
**工作报告**
*九江银行*
2021年8月
**报告说明**
** ***国产化架构下的安全大数据分析平台*工作报告的编写目的，是为了概括地说明建设国产化架构下的安全大数据分析平台项目的目标范围、作用定位、研究方法、课题成果的具体内容等，以便使读者能够对项目实施过程有一个较系统、全面的了解。
目录
第一章 项目背景 [4](#项目背景)
第二章 名词解释 [4](#第二章-名词解释)
第三章 项目范围、目标和作用 [5](#第三章-项目范围目标和作用)
3.1 项目范围 [5](#项目范围)
3.2 项目目标 [6](#项目目标)
3.3 项目定位和作用 [6](#项目定位和作用)
第四章 \[模型化方法设计\] [6](#模型化方法设计)
第五章 项目产出与适用范围 [16](#_Toc195411177)
第六章 技术创新与特色 [20](#技术创新与特色)
第七章 项目评估 [23](#项目评估)
7.1可行性 [23](#_Toc195411180)
7.2完整性 [23](#_Toc117325880)
7.3兼容性 [23](#_Toc175321509)
第八章 结束语 [24](#结束语)
# 项目背景
> 随着中美贸易争端爆发，我国意识到目前IT产业在标准协议、基础架构、产业生态等方面长时间受制于人。国内相继推出一系列国产化政策，自2019年起，各行业均启动了IT基础设施和业务系统国产化改造进程，2020年成为信创元年。
>
> 网络安全保障是信创产业发展的重要基础，习近平总书记在关于网络安全的重要讲话中说："网络安全的本质在对抗，对抗的本质在攻防两端能力较量。......要以技术对技术，以技术管技术，做到魔高一尺、道高一丈。"
>
> 我行在2018年和2019年2次"护网"对抗演练，也发现目前存在的一系列安全短板：
>
> （1） 综合分析能力薄弱，告警降噪能力不足
>
> （2） 联动处理自动化不足，告警结果未与安全设备形成联动
>
> （3） 新技术，新架构覆盖范围和检测技术不足，如容器，微服务等
>
> （4） 资产信息不完善，未能与攻击信息自动关联
>
> （5） 内网防护策略不足，横向渗透风险高
>
> （6） 日志处理能力不足，海量日志溯源效率低，未能做到全攻击链日志采集
为解决上述问题，我们探索建立国产化架构下的安全大数据分析平台，作为网络攻防演习等日趋常态化重保防守工作中的核心安全管理平台，统一进行攻击监测、告警、可视化及自动化处置，有效提升我行信息安全防护能力，提升我行常态化安全运营能力，实现安全数据集中化、能力完备化、检测智能化、响应自动化。
# 第二章 名词解释 {#第二章-名词解释 .list-paragraph}
（1）SIEM：Security Information Event Management,安全信息与事件管理
SIEM对来自企业和组织中所有IT资产（包括网络、系统和应用)产生的安全信息(包括日志、告警等）进行统一的实时监控、历史分析，对来自外部的入侵和内部的违规、误操作行为进行监控、审计分析、调查取证、出具各种报表报告，实现IT资源合规性管理的目标，同时提升企业和组织的安全运营、威胁管理和应急响应能力。
（2）ES：Elasticsearch
Elasticsearch是一个基于Lucene的搜索服务器。Elasticsearch是用Java语言开发的，并作为Apache许可条款下的开放源码发布，是一种流行的企业级搜索引擎。目前国内90%的日志搜索平台都是基于ES架构上开发，ES已经逐渐成为日志实时大数据分析领域的"卡脖子"技术。
（3）Flink
Flink是由Apache软件基金会开发的开源流处理框架，其核心是用Java和Scala编写的分布式流数据流引擎。Flink以数据并行和流水线方式执行任意流数据程序，Flink的流水线运行时系统可以执行批处理和流处理程序。目前Flink已被阿里收购，属于国产化技术，并已逐步成为主流的流式计算引擎。
（4）SPL：Search Processing Language，搜索处理语言
SPL是一种非结构化数据自助实时建模分析语法，适合安全人员在低代码化建模环境下实现各种复杂安全分析策略，机器学习策略，最早是由Splunk公司（Gartner
SIEM能力象限目前Splunk排名第一）发明，2014年后国内部分安全厂家开始自主开发SPL。
# 第三章 项目范围、目标和作用 {#第三章-项目范围目标和作用 .list-paragraph}
## 3.1 项目范围 {#项目范围 .list-paragraph}
本项目的主要实施范围主要包括以下内容：
1\) 人行数据报送
2\) 安全大数据的采集、处理、存储、共享、可视化
3\) 安全威胁分析与检测
4\) 自动化响应
5\) 威胁情报管理
## 3.2 项目目标 {#项目目标 .list-paragraph}
通过此次信息安全运营平台项目建设，计划实现以下预期目标：
1.  探索国产化架构下的安全大数据分析平台建设思路，统一进行攻击监测、告警、可视化及自动化处置，有效提升信息安全防护能力；
2.  满足人行网络安全态势感知与信息共享平台接入工作要求；
3.  通过安全大数据分析平台提升我行常态化安全运营能力，实现安全数据集中化、能力完备化、检测智能化、响应自动化。
## 3.3 项目定位和作用 {#项目定位和作用 .list-paragraph}
探索国产化架构下的安全大数据分析平台建设思路，实现对全行安全数据的融合，通过对安全大数据、全流量关联分析结合威胁情报实现对安全事件的实时监控、预警及处置，实现安全风险可视化，支撑网络攻防演习等重保防守工作，提升整体信息安全运营水平。
# *\[模型化方法设计\]*
基于国产化架构，设计安全大数据分析平台架构如下图所示：
![](media/image1.jpeg){width="6.595833333333333in"
height="3.1590277777777778in"}
大数据安全基础平台接收多种数据源，将安全数据统一采集，统一解析，并提取安全威胁信息发送给安全分析系统。安全分析系统又分为关联分析子系统、威胁情报分析子系统、流量分析子系统、用户行为分析子系统、终端检测与响应子系统。即在现有的各种网络设备以及安全设备的基础上，安全大数据平台通过对防火墙、WAF、IPS等设备的配置和相关日志信息进行搜集和聚类，获取到准实时性的、覆盖全行各个网络区域的安全情报，然后依据威胁情报和日志展示出的网络层和终端层的事件比如网络连接、DNS请求、网络传输或者终端的注册表变更、敏感命令的执行或者主机上文件的增减情况进行相对应的安全事件分析与处理，最后通过调查取证和告警，制定相应的告警规则并通过联动IT系统和安全设备对网络安全事件进行即时的响应和处理。
一、数据采集：.从安全设备、交换机、负载均衡、中间件、数据库、操作系统、应用、终端等各层面进行日志采集。依据日志采集规范通过Agent、Syslog、ODBC、SNMP
Trap、Socket、File等多种接口，采集各设备、系统和应用的本地型日志等；通过镜像等方式采集网络型日志，在网络层面打通各个网络设备的带外管理地址到日志易服务器的访问控制权限，将安全设备的日志通过syslog的形式通过udp协议发送到日志易服务器上进行日志流的采集。特别注意的是防火墙需要在关注的访问控制策略上勾选日志记录选项。
2.  数据解析：不同设备的日志类型各不相同，将各种形式的日志统一解析
    数据解析流程如下：
    ![解析](media/image2.png){width="5.833333333333333in"
    height="4.861111111111111in"}
```{=html}
```
1.  收到一条原始非结构化数据raw_event；
2.  提取关键信息key(token +
    appname（appname不存在则使用hostname）)，从ParserCache中找对应的解析规则EventParser；
3.  如果找到对应的解析规则并且处理成功 ，则返回structured event；