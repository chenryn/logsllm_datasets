title:Understanding wifi-based connectivity from moving vehicles
author:Ratul Mahajan and
John Zahorjan and
Brian Zill
Understanding WiFi-based Connectivity
from Moving Vehicles
Ratul Mahajan
Microsoft Research University of Washington Microsoft Research
John Zahorjan
Brian Zill
Abstract – Using measurements from VanLAN, a modest-size
testbed that we have deployed, we analyze the fundamental charac-
teristics of WiFi-based connectivity between basestations and vehi-
cles in urban settings. Our results uncover a more complex picture
than previous work which was conducted in more benign settings.
The interval between a vehicle coming into and going out of range
of a basestation is often marred by intermittent periods of very poor
connectivity. These “gray periods” are hard to reliably predict be-
cause their arrival is not signaled by metrics such as signal strength,
loss rate, speed or distance from the basestation. At the same time,
they also do not consistently occur at the same spot. Our analysis
suggests that gray periods are not caused by the motion of the ve-
hicle per se but by the variability in the urban radio environment
combined with the vehicle traversing locations that are poorly cov-
ered by the basestation. We also ﬁnd that knowledge of past con-
nectivity can be used to identify regions where gray periods are
more likely to occur as well as regions where the vehicle is likely
to experience good connectivity.
Categories and Subject Descriptors
C.4 [Performance of systems]: Performance attributes
General Terms
Measurement, performance
Keywords
Vehicular networks, measurement, WiFi
1.
INTRODUCTION
WiFi-based networks are becoming increasingly ubiquitous, and
in many cases entire cities and campuses are being covered [16, 15].
Though it may be possible to get brief periods of connectivity [3],
these networks and the WiFi technology itself are not designed to
provide connectivity to moving vehicles.
Like others before us [10, 7, 3], we ask if WiFi can be leveraged
to provide connectivity (in areas of good coverage) from moving
vehicles. Compared to cellular networks, which can enable such
connectivity today,1 802.11 has two advantages. The key one is
that it is signiﬁcantly cheaper because it operates in an unlicensed
band and does not require regulatory approval. It can also support
1WiMax is another possibility. Because it is not widely deployed yet, we
defer its investigation to future work.
Permission to make digital or hard copies of all or part of this work for
personal or classroom use is granted without fee provided that copies are
not made or distributed for proﬁt or commercial advantage and that copies
bear this notice and the full citation on the ﬁrst page. To copy otherwise, to
republish, to post on servers or to redistribute to lists, requires prior speciﬁc
permission and/or a fee.
IMC’07, October 24-26, 2007, San Diego, California, USA.
Copyright 2007 ACM 978-1-59593-908-1/07/0010 ...$5.00.
higher data rates. For instance, for currently available versions, the
maximum data rate with 802.11 a/g is 54 Mbps and with EVDO
Rev A is 3.1 Mbps [6] (though the actual throughput is lower for
both). This order of magnitude difference persists for the upcoming
versions. 802.11n promises 100-600Mbps [1] and EVDO Rev B
promises 9.3 Mbps [6].
However, it is not clear a priori that 802.11 can be co-opted for
this purpose. At vehicular speeds, its short range could make it
difﬁcult to provide uninterrupted connectivity because basestations
would come in and go out of range quickly. Its radio environment
is also hostile [2], with high variability and interfering sources. Ve-
hicular mobility only makes it worse: the wireless environment will
change rapidly as the vehicle moves.
To investigate feasibility, we have deployed a modest-size, WiFi-
based testbed, called VanLAN. It currently has eleven basestations
and two clients that are mounted on vans. VanLAN has been “op-
erational” since January 2007. More information on the testbed
and some of our measurement data is available at http://research.
microsoft.com/vanlan/.
In this paper, we analyze measurements from VanLAN to un-
derstand connectivity between movings vehicles and basestations.
We are interested in the basic nature of WiFi-based connectivity,
such as how it varies as the vehicle moves and whether it is sta-
ble across traversals of the same location. As such, unlike previous
work [10, 7, 3], we consider raw connectivity rather than perfor-
mance obtained by current transport protocols and do not consider
the impact of overheads such as client authentication and IP address
acquisition.
Our analysis reveals a challenging environment. Instead of be-
ing continuous between the times the client comes in and goes out
of range of a basestation, the connectivity is often marred by in-
termittent “gray” periods of very poor connectivity. This is unlike
the three phases of connectivity – poor quality “entry” and “exit”
phases and a good quality “production” phase – reported in an ear-
lier, smaller-scale study that was conducted in a more controlled
environment [10]. We ﬁnd that the occurrence of gray periods is
hard to predict based on current measurements of, for instance, loss
rate, signal strength, speed, or distance from the basestation. Gray
periods do not consistently occur at the same location, and they are
also unlikely to occur due to vehicular mobility itself. But they
likely occur due to a combination of variability in the urban radio
environment and the vehicle encountering locations that are poorly
covered by the basestation.
On the positive side, information on past performance at a loca-
tion is valuable in this environment. We ﬁnd that it can be used
to predict regions where gray periods are more likely as well as
regions where connectivity is likely to be good. Combined with
the constrained, and therefore predictable, paths in vehicular net-
works, this may be used to inform and prepare applications for fu-
ture conditions and alleviate the impact of the uneven connectivity
characteristics of this environment.
2. RELATED WORK
There are many studies that characterize 802.11 behavior [2, 9,
4, 8, 11] but only a few analyze it in the face of vehicular mobil-
ity [10, 7, 3]. Ott and Kutscher study the performance of UDP and
TCP trafﬁc in a carefully planned setup with two BSs along a high-
way (with few other WiFi users in the vicinity) [10]. They ﬁnd that
the connection between the car and a BS can be roughly divided
into three phases. In the “entry” and “exit” phases, when the car is
far from the BS, the throughput is low. In the “production” phase,
when the car is close to the BS, the throughput is high. Gass et al.
use a single BS besides a highway in a desert to study the impact
of speed and backhaul network properties on application perfor-
mance [7]. In this interference-free environment, they ﬁnd that the
wireless link is not the main bottleneck. Instead, the likely high
delays in the backhaul network, on the order of 100 ms, interact
poorly with applications that require many round trip exchanges.
In contrast, we consider a larger-scale and a more realistic urban
setting which contains interference from 802.11 and non-802.11
sources and obstacles such as trees and buildings in the path be-
tween BSs and vehicles. As a result, we ﬁnd a signiﬁcantly more
challenging wireless environment which cannot be simply divided
into three phases [10].
The CarTel study quantiﬁes the performance of uploading data
from a moving car using urban WiFi APs that happen to be open [3].
It ﬁnds that reasonable performance can be had – the median con-
nection duration is 13s and median upload bandwidth is 30 KBps.
It also ﬁnds that overheads due to association, authentication, and
IP address acquisition are signiﬁcant. In contrast, we focus on the
fundamental characteristics of WiFi-based connectivity.
Like VanLAN, DieselNet [5] employs a testbed of WiFi-equipped
buses as well. However, it has a different technical thrust. While we
focus on vehicle-to-infrastructure connectivity for today’s applica-
tions, it focuses on delay tolerant networks formed using vehicle-
to-vehicle connectivity.
3. THE VANLAN TESTBED
To study the performance of 802.11 in vehicular settings, we
have deployed a modest-size testbed of BSs and vehicles. We use
the testbed nodes to generate and log probe trafﬁc which we then
analyze to understand the characteristics of connectivity. We de-
scribe our testbed in this section.
VanLAN currently consists of eleven BSs and two mobile clients.
The BSs are spread across ﬁve ofﬁce buildings on the Microsoft
campus in Redmond, WA. Their geographic placement is shown in
Figure 1. The box bounds the region in which at least one packet is
received by mobile clients from any BS, though the vast majority
of the packets are received in the right half of the box. The network
of BSs is connected, but not all pairs of BSs can hear each other.
The mobile clients are vans that provide a shuttle service on and
around the campus during the day. They visit the part of the campus
where the BSs are present roughly ten times a day. The roads in this
part are similar to urban neighborhood streets with a speed limit of
around 40 Kmph.
Both BSs and clients are small form factor desktops. BSs are
placed on top ﬂoors of the buildings, but their antennae are mounted
on the roofs. Low-loss coaxial cables connect the radios (inside the
desktops) and antennae. Similarly, the clients are placed inside the
vans and their antennae are mounted on the roof. The client desk-
tops are powered by a dedicated battery that is different from the
van’s main battery. This battery charges when the van is on and
powers the clients for about four hours after the van is switched off.
This time is used for software updates through a wireless connec-
Figure 1: The placement of VanLAN BSs. The box (559m ×
828m) bounds the region in which at least one packet is received
by vans from any BS.
tion with another computer located near the vans’ overnight parking
space. (Basestations have Ethernet connections for this purpose.)
All nodes have two radios. One radio is conﬁgured to Channel 1
of 802.11g and the other to Channel 11. To reduce interference, the
two antennae are separated by at least one foot [12]. By comparing
the cases where only one radio is active to where both are active,
we have conﬁrmed that any residual interference is minimal.
Our radios operate in ad hoc (IBSS) mode using a locally modi-
ﬁed device driver. One modiﬁcation forces the use of a ﬁxed BSSID
instead of a randomly generated one. This prevents (temporary)
network partitions when nodes end up with different BSSIDs. It
also means that a BS and a client that come into range can start
communicating immediately, without waiting for their BSSIDs to
be reconciled. Yet another modiﬁcation lets us log every received
frame along with a hardware timestamp and PHY layer information
such as RSSI while communicating normally (i.e., the radio is not
put in “monitor” mode).
VanLAN uses the following hardware. EnGenius’ EMP-8602
modules, which are based on the Atheros 5213 chipset, are used
as radios. Their output power is 400 mW at 1 Mbps and lower
at higher transmission rates. HyperLink’s HG2403MGU antennae
are used for the vans and HGV-2404U antennae are used for the
basestations. Both types are omnidirectional in the horizontal plane
but radiate less energy directly above and below.
The clients also have an externally mounted GPS unit, so we
know their locations. We use GlobalSat’s BU-353 GPS unit which
is based on the SiRF Star III chipset and outputs data once per
second. The uncertainty in the location estimate of this chipset is
under three meters 95% of the time.
4. CONNECTIVITY SESSIONS
We begin our investigation by studying the basic characteristics
of 802.11-based connectivity between a ﬁxed BS and a moving ve-
hicle. The period of connectivity between a BS and the client can
be divided into sessions, where a session is a contiguous period of
time in which the client can communicate with the BS. To study
the properties of these sessions, we leverage beacons that 802.11
BSs send roughly every 100 ms. Using beacons instead of custom
trafﬁc lets us consider connectivity sessions with not only VanLAN
s
n
o
i
s
s
e
s
f
o
%
100
80
60
40
20
0
100
80
60
40
20
0
s
n
o
i
s
s
e
s
f
o
%
Mini
Meta
50 100 150 200 250 300
duration (seconds)
s
n
o
i
s
s
e
s
f
o
%
100
80
60
40
20
0
100
80
60
40
20
0
s
n
o
i
s
s
e
s
f
o
%
Mini
Meta
50
100
150
duration (seconds)
Mini
Meta
0
50
100
length (meters)
150
Mini
Meta
100 200 300 400 500 600
length (meters)
(a) VanLAN BSs
(b) Other BSs in the environment
Figure 2: Mini sessions are much shorter than meta sessions, implying that meta sessions contain intermittent disruptions. The
graphs plot the CDFs of duration and length of meta and mini sessions. The x-axis ranges differ for the two types of BSs.
BSs but also other BSs encountered by our vans. This helps verify
whether the properties of the BSs in our testbed are similar to those
of other BSs in the environment. However, beacons let us study
connectivity in only one direction – from BSs to the client. We