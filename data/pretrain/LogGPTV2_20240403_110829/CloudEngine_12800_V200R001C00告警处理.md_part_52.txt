步骤1 使用命令display ip vpn-instance verbose vpn-instance-name检查Tunnel Policy字段是否
存在。
l 如果是，则请执行步骤2。
文档版本 06 (2017-09-12) 华为专有和保密信息 407
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 28 L3VPNBASE
l 如果不是，则请执行步骤7。
步骤2 使用display tunnel-policy tunnel-policy-name检查隧道策略的内容。
l 如果隧道策略为隧道类型优先级策略，使用命令display tunnel all检查是否有满足
条件的隧道。
说明
如果一条隧道已经配置了mpls te reserved-for-binding命令用于VPN绑定，那么这条隧道不
能被隧道类型优先级策略所使用。
– 如果是，则请执行步骤8。
– 如果不是，则请执行步骤3。
l 如果隧道策略为隧道绑定策略，使用display interface tunnel检查隧道策略中绑定
的tunnel接口是否UP。
– 如果是，则请执行步骤4。
– 如果不是，则请执行步骤6。
步骤3 根据组网场景配置所需的LSP或CR-LSP隧道，或改变VPN隧道策略，然后看是否出现
告警“L3VPN_1.3.6.1.4.1.2011.5.25.177.8.1 hwTnl2VpnTrapEvent: The tunnel up event is
occurred”。
l 如果是，则请执行步骤9。
l 如果不是，则请执行步骤8。
步骤4 进入Tunnel接口视图，执行display this命令检查Tunnel接口下是否配置了mpls te
reserved-for-binding命令。
l 如果是，则请执行步骤8。
l 如果不是，则请执行步骤5。
步骤5 进入Tunnel接口视图，配置mpls te reserved-for-binding命令，然后看是否出现告警
“L3VPN_1.3.6.1.4.1.2011.5.25.177.8.1 hwTnl2VpnTrapEvent: The tunnel up event is
occurred”。
l 如果是，则请执行步骤9。
l 如果不是，则请执行步骤8。
步骤6 检查TE接口下的配置，并根据TE相关的告警确认和排除问题，然后看是否出现告警
“L3VPN_1.3.6.1.4.1.2011.5.25.177.8.1 hwTnl2VpnTrapEvent: The tunnel up event is
occurred”。
l 如果是，则请执行步骤9。
l 如果不是，则请执行步骤8。
步骤7 检查LDP LSP的配置，并根据LSP相关的告警确认和排除问题，然后看是否出现告警
“L3VPN_1.3.6.1.4.1.2011.5.25.177.8.1 hwTnl2VpnTrapEvent: The tunnel up event is
occurred”。
l 如果是，则请执行步骤9。
l 如果不是，则请执行步骤8。
步骤8 请联系技术支持人员。
步骤9 结束。
----结束
文档版本 06 (2017-09-12) 华为专有和保密信息 408
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 29 LACP
29
LACP
关于本章
29.1 LACP_1.3.6.1.4.1.2011.5.25.41.3.2 hwLacpNegotiateFailed
29.2 LACP_1.3.6.1.4.1.2011.5.25.41.3.3 hwLacpTotalLinkLoss
29.3 LACP_1.3.6.1.4.1.2011.5.25.41.3.4 hwLacpPartialLinkLoss
29.4 LACP_1.3.6.1.4.1.2011.5.25.41.3.13 hwLacpNegotiateResume
29.5 LACP_1.3.6.1.4.1.2011.5.25.41.3.14 hwLacpTotalLinkLossResume
29.6 LACP_1.3.6.1.4.1.2011.5.25.41.3.15 hwLacpPartialLinkLossResume
相关主题
HUAWEI-IF-EXT-MIB
文档版本 06 (2017-09-12) 华为专有和保密信息 409
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 29 LACP
29.1 LACP_1.3.6.1.4.1.2011.5.25.41.3.2
hwLacpNegotiateFailed
Trap Buffer 信息解释
The member of LAG negotiation failed. (TrunkIndex=[TrunkIndex],
PortIfIndex=[PortIfIndex], TrunkId=[TrunkId], TrunkName=[TrunkName],
PortName=[PortName], Reason=[ReasonCode])
聚合组协商不成功。
Trap 属性
Trap属性 描述
Alarm or Event Alarm
Trap Severity Critical
Mnemonic Code hwLacpNegotiateFailed
Trap OID 1.3.6.1.4.1.2011.5.25.41.3.2
Alarm ID 0x09360000
Alarm Type communicationsAlarm
Raise or Clear Raise
Match trap LACP_1.3.6.1.4.1.2011.5.25.41.3.13
hwLacpNegotiateResume
Trap Buffer 信息参数
参数名称 参数含义
TrunkIndex Trunk索引
PortIfIndex 成员端口索引
TrunkId Trunk接口ID
TrunkName Trunk接口名
PortName 成员端口名
Reason 协商不成功的原因。
文档版本 06 (2017-09-12) 华为专有和保密信息 410
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 29 LACP
VB 信息参数
VB OID VB Name VB Index
1.3.6.1.4.1.2011.5.25.41.1.3. hwTrunkIfID hwTrunkIndex
3.1.2
1.3.6.1.2.1.31.1.1.1.1 ifName ifIndex
1.3.6.1.2.1.31.1.1.1.1 ifName ifIndex
对系统的影响
此链路不能承载业务。
可能原因
l 原因1：Interface physical link is down.（接口物理链路down。）
l 原因2：No LACP packet was received from the remote end when the timer expired.
（在超时时间内，没有收到对端的LACP报文。）
l 原因3：Interface is loopback.（环回口。）
l 原因4：Bandwidth of interface is 0.（接口带宽为0。）
l 原因5：System ID is not valid.（系统ID无效。）
l 原因6：Remote end cannot be aggregated.（对端不聚合。）
l 原因7：Remote end delay to be aggregated.（对端延迟聚合。）
l 原因8：Local end delay to be aggregated.（本端延迟聚合。）
l 原因9：Interface negotiation state is unusable.（接口协商状态不可用。）
l 原因10：Interface key of local end is not match with reference port's key.（本端接口
key和参考接口key不一致。）
l 原因11：Number of current active ports is less than least active-number.（当前活动接
口数小于最小活动接口数。）
l 原因12：Number of current active ports is greater than max active-number.（当前活动
接口数大于最大活动接口数。）
l 原因13：Local end cannot be aggregated.（本端不聚合。）
l 原因14：Interface physical link is downing.（接口物理状态为Down。）
l 原因15：Interface key of remote end is not match with reference port's key.（对端接口
key和参考接口key不一致。）
l 原因16：System ID of remote end is not match with reference port's key.（对端系统ID
与参考接口不一致。）
l 原因17：Remote end cannot be synchronized.（对端链路不可同步。）
处理步骤
l 原因1：Interface physical link is down.
a. 请在接口视图下执行命令display this，查看两端接口是否被shutdown。
n 如果接口被shutdown，可执行命令undo shutdown打开接口，然后检查告
警是否被清除。如果未被清除，则请执行步骤2。
文档版本 06 (2017-09-12) 华为专有和保密信息 411
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 29 LACP
n 如果接口未被shutdown，则请执行步骤2。
b. 请查看物理链接是否正常（包括网线、光模块等硬件是否松动或脱落）。
n 如果物理链路工作不正常，可以重新正确连接物理线路，然后检查告警
是否被清除。如果未被清除，则请执行步骤3。
n 如果物理链路工作正常，则请执行步骤3。
c. 请收集告警文件联系技术支持人员。
l 原因2：No LACP packet was received from the remote end when the timer expired.
a. 请在接口视图下执行命令display this，查看两端接口是否被shutdown。
n 如果接口被shutdown，可执行命令undo shutdown打开接口，然后检查告
警是否被清除。如果未被清除，则请执行步骤2。
n 如果接口未被shutdown，则请执行步骤2。
b. 请查看物理链接是否正常（包括网线、光模块等硬件是否松动或脱落）。
n 如果物理链路工作不正常，可以重新正确连接物理线路，然后检查告警
是否被清除。如果未被清除，则请执行步骤3。
n 如果物理链路工作正常，则请执行步骤3。
c. 请在系统视图下执行命令display interface eth-trunk，查看本端和对端是否有
接口退出Eth-Trunk。
n 如果接口是非正常退出Eth-Trunk，可通过在成员接口视图下执行命令
eth-trunk或在Eth-Trunk接口视图下执行命令trunkport将接口重新加入
Eth-Trunk，然后检查告警是否被清除。如果未被清除，则请执行步骤4。
n 如果接口是正常退出Eth-Trunk，则请执行步骤4。
d. 请收集告警文件联系技术支持人员。
l 原因4：Bandwidth of interface is 0.
a. 请在任意视图下执行命令display interface eth-trunk，查看字段Current BW值
是否为0。
n 如果字段Current BW值为0，请执行步骤2。
n 如果字段Current BW值不为0，请执行步骤3。
b. 请在Eth-Trunk接口成员口视图下执行命令display this，查看接口是否被
shutdown。
n 如果接口被shutdown，请在成员口视图下执行命令undo shutdown打开接
口，查看告警是否恢复。
如果告警未恢复，则请执行步骤3。
n 如果接口未被shutdown，则请执行步骤3。
c. 请收集告警文件联系技术支持人员。
l 原因5：System ID is not valid.
请收集告警文件联系技术支持人员。
l 原因6：Remote end cannot be aggregated.
a. 请在对端设备上，任意视图下执行命令display interface eth-trunk，查看Eth-
Trunk接口下是否加入成员口。
n 如果Eth-Trunk接口下未加入成员口，请在需要加入Eth-Trunk的接口视图
下执行命令eth-trunk trunk-id ，为Eth-Trunk加入成员口，查看告警是否
恢复。
如果告警未恢复，则请执行步骤2。
文档版本 06 (2017-09-12) 华为专有和保密信息 412
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 29 LACP
n 如果Eth-Trunk接口下已经正确加入成员口，请执行步骤2。
b. 请收集告警文件联系技术支持人员。
l 原因7：Remote end delay to be aggregated.
请收集告警文件联系技术支持人员。
l 原因8：Local end delay to be aggregated.
请收集告警文件联系技术支持人员。
l 原因9：Interface negotiation state is unusable.
a. 请在接口视图下执行命令display this，查看两端接口是否被shutdown。
n 如果接口被shutdown，可执行命令undo shutdown打开接口，然后检查告
警是否被清除。如果未被清除，则请执行步骤2。
n 如果接口未被shutdown，则请执行步骤2。
b. 请查看物理链接是否正常（包括网线、光模块等硬件是否松动或脱落）。
n 如果物理链路工作不正常，可以重新正确连接物理线路，然后检查告警
是否被清除。如果未被清除，则请执行步骤3。
n 如果物理链路工作正常，则请执行步骤3。
c. 请在系统视图下执行命令display interface eth-trunk，查看本端和对端是否有
接口退出Eth-Trunk。
n 如果接口是非正常退出Eth-Trunk，可通过在成员接口视图下执行命令
eth-trunk或在Eth-Trunk接口视图下执行命令trunkport将接口重新加入
Eth-Trunk，然后检查告警是否被清除。如果未被清除，则请执行步骤4。
n 如果接口是正常退出Eth-Trunk，则请执行步骤4。
d. 请收集告警文件联系技术支持人员。
l 原因10：Interface key of local end is not match with reference port's key.
a. 请在本端设备上，任意视图下执行命令display eth-trunk，查看字段PortKey
值是否一致。
n 如果字段PortKey值不一致，在字段PortKey值不一致的成员口视图下，执
行命令undo eth-trunk，将字段PortKey值不一致的接口退出Eth-Trunk，
查看告警是否恢复。
如果告警未恢复，请执行步骤2。
n 如果字段PortKey值一致，请执行步骤2。
b. 请收集告警文件联系技术支持人员。
l 原因11：Number of current active ports is less than least active-number.
a. 请在任意视图下执行命令display eth-trunk，查看字段Least Active-linknumber
值。
n 如果字段Least Active-linknumber值大于成员口数量，请在Eth-Trunk接口
视图下执行命令least active-linknumber link-number，调整状态为Up的
Eth-Trunk接口成员链路数的下限阈值小于成员口数量，查看告警是否恢
复。
如果告警未恢复，请执行步骤2。
n 如果字段Least Active-linknumber值小于成员口数量，请执行步骤2。
b. 请收集告警文件联系技术支持人员。
l 原因12：Number of current active ports is greater than max active-number.
a. 请在任意视图下执行命令display eth-trunk，查看字段Max Active-linknumber
值。
文档版本 06 (2017-09-12) 华为专有和保密信息 413
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 29 LACP
n 如果字段Max Active-linknumber值小于成员口数量，请在Eth-Trunk接口
视图下执行命令max active-linknumber link-number，调整状态为Up的
Eth-Trunk接口成员链路数的上限阈值大于成员口数量，查看告警是否恢
复。
如果告警未恢复，请执行步骤2。
n 如果字段Max Active-linknumber值大于成员口数量，请执行步骤2。
b. 请收集告警文件联系技术支持人员。
l 原因13：Local end cannot be aggregated.
a. 请在本端设备上，任意视图下执行命令display interface eth-trunk，查看Eth-
Trunk接口下是否加入成员口。
n 如果Eth-Trunk接口下未加入成员口，请在需要加入Eth-Trunk的接口视图
下执行命令eth-trunk trunk-id ，为Eth-Trunk加入成员口，查看告警是否
恢复。
如果告警未恢复，则请执行步骤2。
n 如果Eth-Trunk接口下已经正确加入成员口，请执行步骤2。
b. 请收集告警文件联系技术支持人员。
l 原因14：Interface physical link is downing.
a. 请在接口视图下执行命令display this，查看两端接口是否被shutdown。
n 如果接口被shutdown，可执行命令undo shutdown打开接口，然后检查告
警是否被清除。如果未被清除，则请执行步骤2。
n 如果接口未被shutdown，则请执行步骤2。
b. 请查看物理链接是否正常（包括网线、光模块等硬件是否松动或脱落）。
n 如果物理链路工作不正常，可以重新正确连接物理线路，然后检查告警
是否被清除。如果未被清除，则请执行步骤3。
n 如果物理链路工作正常，则请执行步骤3。
c. 请在系统视图下执行命令display interface eth-trunk，查看本端和对端是否有
接口退出Eth-Trunk。
n 如果接口是非正常退出Eth-Trunk，可通过在成员接口视图下执行命令
eth-trunk或在Eth-Trunk接口视图下执行命令trunkport将接口重新加入
Eth-Trunk，然后检查告警是否被清除。如果未被清除，则请执行步骤4。
n 如果接口是正常退出Eth-Trunk，则请执行步骤4。
d. 请收集告警文件联系技术支持人员。
l 原因15：Interface key of remote end is not match with reference port's key.
a. 请在对端设备上，任意视图下执行命令display eth-trunk，查看字段PortKey
值是否一致。
n 如果字段PortKey值不一致，在PortKey字段值不一致的成员口视图下，执
行命令undo eth-trunk，将PortKey字段值不一致的接口退出Eth-Trunk，
查看告警是否恢复。
如果告警未恢复，请执行步骤2。
n 如果字段PortKey值一致，请执行步骤2。