Input drops: 0 [0]
Input framing errors: 0 [0]
Policed discards: 0 [0]
L3 incompletes: 0 [0]
926
L2 channel errors: 0 [0]
L2 mismatch timeouts: 0 [0]
Carrier transitions: 1 [0]
Output errors: 0 [0]
Output drops: 0 [0]
Aged packets: 0 [0]
Active alarms : None
Active defects: None
Input MAC/Filter statistics:
Unicast packets 73083 [16]
Broadcast packets 3629058 [5]
Multicast packets 3511364 [3]
Oversized frames 0 [0]
Packet reject count 0 [0]
DA rejects 0 [0]
SA rejects 0 [0]
Output MAC/Filter Statistics:
Unicast packets 629555 [28]
Broadcast packets 6494 Multicast packet [0]
NOTE: The output fields that display when you enter the monitor interface interface-name command
are determined by the interface you specify.
user@host> monitor interface traffic
Interface Link Input packets (pps) Output packets (pps) fe-0/0/0
Up 42334 (5) 23306 (3) fe-0/0/1 Up
587525876 (12252) 589621478 (12891)
927
Monitor Interfaces
IN THIS SECTION
Purpose | 927
Action | 927
Purpose
View general information about all physical and logical interfaces for a device.
Action
Enter the following show commands in the CLI to view interface status and traffic statistics.
• show interfaces terse
NOTE: On SRX Series Firewalls, when configuring identical IPs on a single interface, you will
not see a warning message; instead, you will see a syslog message.
• show interfaces extensive
• show interfacesinterface-name
NOTE: If you are using the J-Web user interfaces, select Monitor>Interfaces in the J-Web user
interface. The J-Web Interfaces page displays the following details about each device interface:
• Port—Indicates the interface name.
• Admin Status—Indicates whether the interface is enabled (Up) or disabled (Down).
• Link Status—Indicates whether the interface is linked (Up) or not linked (Down).
• Address—Indicates the IP address of the interface.
• Zone—Indicates whether the zone is an untrust zone or a trust zone.
• Services—Indicates services that are enabled on the device, such as HTTP and SSH.
928
• Protocols—Indicates protocols that are enabled on the device, such as BGP and IGMP.
• Input Rate graph—Displays interface bandwidth utilization. Input rates are shown in bytes per
second.
• Output Rate graph—Displays interface bandwidth utilization. Output rates are shown in bytes per
second.
• Error Counters chart—Displays input and output error counters in the form of a bar chart.
• Packet Counters chart—Displays the number of broadcast, unicast, and multicast packet counters in
the form of a pie chart. (Packet counter charts are supported only for interfaces that support MAC
statistics.)
To change the interface display, use the following options:
• Port for FPC—Controls the member for which information is displayed.
• Start/Stop button—Starts or stops monitoring the selected interfaces.
• Show Graph—Displays input and output packet counters and error counters in the form of charts.
• Pop-up button—Displays the interface graphs in a separate pop-up window.
• Details—Displays extensive statistics about the selected interface, including its general status, traffic
information, IP address, I/O errors, class-of-service data, and statistics.
• Refresh Interval—Indicates the duration of time after which you want the data on the page to be
refreshed.
• Clear Statistics—Clears the statistics for the selected interface.
SEE ALSO
Interfaces User Guide for Security Devices
Monitor PPP
IN THIS SECTION
Purpose | 929
929
Action | 929
Purpose
Display PPP monitoring information, including PPP address pool information, session status for PPP
interfaces, cumulative statistics for all PPP interfaces, and a summary of PPP sessions.
NOTE: PPP monitoring information is available only in the CLI. The J-Web user interface does
not include pages for displaying PPP monitoring information.
Action
Enter the following CLI commands:
• show ppp address-pool pool-name
• show ppp interface interface-name
• show ppp statistics
• show ppp summary
8
PART
Performance Management
Network Analytics | 931
931
Network Analytics
SUMMARY IN THIS SECTION
This section describes the network analytics feature Network Analytics Overview | 931
that provides visibility into the performance and
Understand Network Analytics Streaming
behavior of the data center infrastructure. It collects
Data | 942
data from the switch, analyzes the data by using
sophisticated algorithms, and captures the results in Understand Enhanced Analytics Local File
reports. Network administrators can use the reports Output | 950
to troubleshoot problems, make decisions, and adjust
Understand Network Analytics Configuration
resources as needed.
and Status | 953
Configure Queue and Traffic
Monitoring | 954
Configure a Local File for Network Analytics
Data | 957
Configure a Remote Collector for Streaming
Analytics Data | 958
Example: Configure Queue and traffic
statsistics | 960
Example: Configure Queue and Traffic
Monitoring | 969
Network Analytics Overview
IN THIS SECTION
Analytics Feature Overview | 932
Network Analytics Enhancements Overview | 933
Summary of CLI Changes | 935
The analytics manager (analyticsm) in the Packet Forwarding Engine collects traffic and queue statistics,
and the analytics daemon (analyticsd) in the Routing Engine analyzes the data and generates reports.
932
NOTE: In Junos OS Release 13.2X51-D15, the network analytics feature was enhanced, and
extensive changes were made to the CLI statements and hierarchies. If you upgrade to Junos OS
Release 13.2X51-D15 or later from a release prior to 13.2X51-D15, network analytics
configurations committed in previous releases will appear on your device, but the feature is
disabled. To enable this feature, you must reconfigure it by using the new CLI statements and
hierarchies.
Analytics Feature Overview
You enable network analytics by configuring queue (microburst) monitoring and high-frequency traffic
statistics monitoring.
Queue (microburst) monitoring:
You use microburst monitoring to look at traffic queue conditions on the network. A microburst
occurrence indicates to the Packet Forwarding Engine that a user-specified queue depth or latency
threshold is reached. The queue depth is the buffer (in bytes) containing the data, and latency is the time
(in nanoseconds or microseconds) the data stays in the queue.
You can configure queue monitoring based on either queue depth or latency (but not both), and
configure the frequency (polling interval) at which the Packet Forwarding Engine checks for microbursts
and sends the data to the Routing Engine for processing. You may configure queue monitoring globally
for all physical interfaces on the system, or for a specific interface on the switch. However, the specified
queue monitoring interval applies either to all interfaces, or none; you cannot configure the interval for
each interface.
High-frequency traffic statistics monitoring:
You use high-frequency traffic statistics monitoring to collect traffic statistics at specified polling
intervals. Similar to the queue monitoring interval, the traffic monitoring interval applies either to all
interfaces, or none; you cannot configure the interval for each interface.
Both traffic and queue monitoring are disabled by default. You must configure each type of monitoring
using the CLI. In each case, the configuration for an interface always takes precedence over the global
configuration.
NOTE: You can configure traffic and queue monitoring for physical interfaces only; logical
interfaces and Virtual Chassis port (VCP) interfaces are not supported.
933
The analyticsd daemon in the Routing Engine generates local log files containing queue and traffic
statistics records. You can specify the log filename and size, and the number of log files. If you do not
configure a filename, the data is not saved.
You can display the local log file or specify a server to receive the streaming data containing the queue
and traffic statistics.
For each port, information for the last 10 records of traffic statistics and 100 records of queue statistics
is cached. You may view this information by using the show analytics commands.
To store traceoptions data, you configure the traceoptions statement at the [edit services analytics]
hierarchy level.
Network Analytics Enhancements Overview
Beginning in Junos OS Release 13.2X51-D15, the network analytics feature provides the following
enhancements:
• Resources—Consist of interfaces and system. The interfaces resource allows you to configure an
interface name and an associated resource profile name for each interface. With the system resource,
you can configure the polling intervals for queue monitoring and traffic monitoring, and an associated
resource profile for the system.
• Resource profile—A template that contains the configurations for queue and traffic monitoring, such
as depth threshold and latency threshold values, and whether each type of monitoring is enabled or
disabled. Once a resource profile is configured, you apply it to a system or interfaces resource.
• Collector—A server for collecting queue and traffic monitoring statistics, and can be a local or remote
server. You can configure a local server to store monitoring statistics in a log file, or a remote server
to receive streamed statistics data.
• Export profile—You must configure an export profile if you wish to send streaming data to a remote
collector. In the export profile, you define the category of streamed data (system-wide or interface-
specific) to determine stream type the collector will receive. You can specify both system and
interface stream categories. System data includes system information and status of queue and traffic
monitoring. Interface-specific data includes interface information, queue and traffic statistics, and
link, queue, and traffic status.
• Google Protocol Buffer (GBP) stream format—A new streaming format for monitoring statistics data
that is sent to a remote collector in a single AnRecord message. The format of this stream which
provides nine types of information is shown in Table 108 on page 934.
934
Table 108: Google Protocol Buffer (GBP) stream format
Message Description
System information General system information, including boot time,
model information, serial number, number of ports,
and so on
System queue status Queue status for the system in general
System traffic status Traffic status for the system in general
Interface information Includes SNMP index, slot, port, and other
information
Queue statistics for interfaces Queue statistics for specific interfaces
Traffic statistics for interfaces Traffic statistics for specific interfaces
Link status for interfaces Includes link speed, state, and so on
Queue status for interfaces Queue status for specific interfaces
Traffic status for interfaces Traffic status for specific interfaces
• The analytics.proto file—Provides a template for the GBP stream format. This file can be used for
writing your analytics server application. To download the file, go to: /documentation/en_US/
junos13.2/topics/reference/proto-files/analytics-proto.txt
• Use of threshold values—The Analytics Manager (analyticsm) will generate a queue statistics record
when the lower queue depth or latency threshold value is exceeded.
• User Datagram Protocol (UDP)—Additional transport protocol you can configure, in addition to
Transmission Control Protocol (TCP), for the remote streaming server port.
• Single file for local logging—Replaces the separate log files for queue and traffic statistics.
• Change in latency measurement—Configuration and reporting of latency values have changed from
microseconds to nanoseconds.
935
• Change in reporting of the collection time in UTC format—Statistics collection time is reported in
microseconds instead of milliseconds.
• New operational mode command show analytics collector—Replaces the show analytics streaming-server
command.
• Changes in command output format—Include the following changes:
• Addition of unicast, multicast, and broadcast packet counters in queue and traffic statistics.
• Reversal of the sequence of statistics information in the output. The most recent record is
displayed at the beginning, and the oldest record at the end of the output.
• Removal of traffic or queue monitoring status information from the global portion of the show
analytics configuration and show analytics status command output if there is no global configuration.
• Addition of n/a to the interface-specific portion of the show analytics configuration and show analytics
status command output if a parameter is not configured (for example, depth threshold or latency
threshold).
Summary of CLI Changes
Starting in Junos OS Release 13.2X51-D15, enhancements to the network analytics feature result in
changes in the CLI when you configure the feature. See Table 109 on page 935 for a summary of CLI
changes.
Table 109: Network Analytics CLI Changes
Task CLI for Junos OS Release 13.2X50-D15 CLI for Junos OS Release 13.2X51-D15
and 13.2X51-D10 and later
Configuring global [edit services analytics] [edit services analytics]
queue and traffic
monitoring polling
traffic-statistics { resource {
interval
interval interval; system {
} polling-interval {
queue-statistics { queue-monitoring interval;
interval interval; traffic-monitoring interval;
} }
}
}
936
Table 109: Network Analytics CLI Changes (Continued)
Task CLI for Junos OS Release 13.2X50-D15 CLI for Junos OS Release 13.2X51-D15
and 13.2X51-D10 and later
Configuring local files [edit services analytics] [edit services analytics]
for traffic and queue
statistics reporting
traffic-statistics { collector {
file filename; local {
size size; file filename {
files number; files number;
} size size;
queue-statistics { }
file filename; }
size size; }
files number;
}
937
Table 109: Network Analytics CLI Changes (Continued)
Task CLI for Junos OS Release 13.2X50-D15 CLI for Junos OS Release 13.2X51-D15
and 13.2X51-D10 and later
Enabling queue [edit services analytics] Requires defining a resource profile and
statistics and traffic applying it to the system:
monitoring, and
interfaces { 1. To define a resource profile:
specifying the depth
all {
threshold for all
queue-statistics; [edit services analytics]
interfaces (globally)
traffic-statistics;
depth-threshold {
resource-profiles {
high number;
profile-name{
low number;
queue-monitoring;
}
traffic-monitoring;
}
depth-threshold {
}
high number;
low number;
}
}
}
2. To apply a profile to the system:
[edit services analytics]
resource {
system {
resource-profile profile-
name;
}
}
938
Table 109: Network Analytics CLI Changes (Continued)
Task CLI for Junos OS Release 13.2X50-D15 CLI for Junos OS Release 13.2X51-D15
and 13.2X51-D10 and later
Enabling queue [edit services analytics] Requires defining a resource profile and
statistics and traffic applying it to the interface:
monitoring, and
interfaces { 1. To define a resource profile:
specifying the latency
interface{
threshold for one
queue-statistics; [edit services analytics]
interface
traffic-statistics;
latency-threshold
resource-profiles {
high number;
profile-name{
low number;
queue-monitoring;
}
traffic-monitoring;
}
latency-threshold {
high number;
low number;
}
}
}
2. To apply a profile to the interface:
[edit services analytics]
resource {
interfaces {
interface-name {
resource-profile profile-
name;
}
}
}
939
Table 109: Network Analytics CLI Changes (Continued)
Task CLI for Junos OS Release 13.2X50-D15 CLI for Junos OS Release 13.2X51-D15
and 13.2X51-D10 and later
Configuring the [edit services analytics] Requires defining the stream format in an
streaming data format export profile and applying the profile to
(JSON, CSV, or TSV) to the collector.
streaming-servers {
send to a remote server
address ip-address { 1. To configure the stream format:
NOTE: Junos OS port number {
Release 13.2X51-D15 stream-format format; [edit services analytics]
added support for the }
GPB stream format and }
export-profiles {
configuration of the }
profile-name {
transport protocols
stream-format format;
(TCP or UDP).
}
}
2. To apply an export profile to the
collector:
[edit services analytics]
collector {
address ip-address {