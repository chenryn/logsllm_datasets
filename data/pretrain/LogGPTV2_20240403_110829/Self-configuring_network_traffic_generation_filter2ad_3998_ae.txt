### Optimized Text

#### Platform and Device Configuration
We utilized the Spirent AX/4000 [8] for traffic generation. The Cisco 6500 series, including our 6509 device, can be configured to run either Cisco CatOS, Cisco IOS, or a hybrid of both. The choice depends on anticipated traffic, customer requirements, and installed modules. We configured our 6509 to run native IOS, version 12.1(13)E6.

#### Test Setup
During the tests, the 6509 was connected only to the traffic generation machines and to our management network. We polled specific MIB variables via SNMP over the management network, ensuring no other traffic traversed the router. The Spirent AX/4000 generated traffic over two 1 Gbps Ethernet links, with the traffic returning over another 1 Gbps link. While our tests contrast Harpoon with the AX/4000, the AX/4000's traffic generation model is representative of many tools that generate packets with constant spacing. Therefore, we use the term "constant spacing packet generator" in the discussion and results.

#### Test Design
Our experiments were based on a series of tests described at www.lightreading.com [41] and on benchmarking terminology and methods from RFCs 2285 [39] and 2889 [40]. These tests evaluated the packet forwarding performance of Internet backbone routers under various conditions, including minimum-sized packets and forwarding tables comparable to those found in the Internet backbone. The LightReading tests also examined other performance capabilities such as BGP table capacity, packet filtering, and forwarding performance under unstable path conditions. Our focus was on packet forwarding performance and the impact of workloads on router subsystems.

#### Metrics and Load Tuning
Our primary metric for comparison was the packet forwarding rate. As noted in RFC 2285, reporting forwarding rates without considering packet losses, as defined in RFC 1242 [20], can be problematic. Packet loss rates depend on the offered load and router or switch implementation artifacts. To address this, we determined how to match offered loads between two fundamentally different packet generation methods. Instead of comparing forwarding rates across a broad range of offered loads, we chose two regimes: a "low" load and a "high" load. For each offered load, we polled the 6509 every 20 seconds using SNMP to obtain the forwarding rate, packet loss counts, and other system utilization variables. SNMP variables are updated internally every 10 seconds in the 6509. The 20-second polling period minimized additional load while ensuring updated counters. The low and high offered load regimes were tuned to approximately 60% (≈ 600 Mbps) and 90% (≈ 900 Mbps) of egress bandwidth, respectively. For Harpoon, we used the PF_ileSize and PInterConnection distributions extracted from the Wisconsin data and the algorithm in Figure 4 to determine the number of active session threads needed to generate the intended load levels on the 6509. We then calculated the average offered load from SNMP measurements of the ingress interfaces and used this average to configure the packet-level generator. This tuning approach made it impractical to include other application-level generators, so we compared Harpoon only with the constant load generator. For all tests, Harpoon was initialized with the same random number generator seed to ensure identical sequences in input distributions.

#### Traffic Generation and Tuning
Tuning the offered load is straightforward with a deterministic packet generation tool like the AX/4000. With Harpoon, the load is tuned by adjusting the number of client and server threads.

#### Results
We begin with a qualitative comparison of the time series of bit forwarding rates for Harpoon and the constant spacing generator, as shown in Figure 12(a). In this test, Harpoon was configured to generate roughly 600 Mbps of traffic over a 30-minute period, while the constant spacing generator emitted 1500-byte packets with uniform spacing. Harpoon maintained a high level of offered load, even with variable file sizes and inter-connection times, generating burstiness in packet traffic. As expected, the constant spacing generator presented a virtually unwavering load to the router. Further tests explored how these differences in packet emission processes affect router performance.

Figure 12(b) shows the effects of burst sizes of 1, 465, 697, and 930 on forwarding rates. The vertical bars indicate the range of one standard deviation above and below the average. The router was configured with a forwarding table size of 2^15, and the high regime of offered load was used. The drop in bit forwarding rate for the constant spacing generator at a burst size of 697 accompanied an increase in the number of packets dropped at the egress line card. The drop in forwarding rate between burst sizes of 465 and 930 was approximately 180 Mbps. Despite the increased stress, there was no significant increase in forwarding rate variability, as indicated by the low variation in the height of the vertical bars.

Figure 12(c) illustrates the effects of different packet sizes on forwarding performance. The constant spacing generator was configured to emit packet sizes of 40, 1500, and a trimodal distribution (61% 40 bytes, 17% 576 bytes, and 22% 1500 bytes). The router was configured with a forwarding table size of 2^15, and the high regime of offered load was used. With minimum-sized IPv4 packets, the forwarding rate of the test router under the same offered load dropped by approximately 140 Mbps, with very low variability. Packet loss was measured for the 40-byte case but not for the 1500-byte or trimodal cases.

Figure 13 shows the effect of different forwarding table sizes on forwarding rates. The results from the low and high offered load tests are shown in Figures 13(a) and 13(b), respectively. At low loads, the average bit forwarding rates between Harpoon and the constant packet spacing generator matched closely, while at high loads, the match was poor. The difference in forwarding rate in the high load test was due to packet loss during the Harpoon tests, which did not occur with the constant spacing generator. The variance in bit forwarding rate for Harpoon increased with the forwarding table size, while it remained low for the constant packet spacing generator.

Figure 14(a) shows the time series of packet loss for selected tests. All tests used a 2^15-entry forwarding table and high offered load. The constant spacing generator showed a consistent loss rate, even when emitting bursts of packets. This is expected given its open-loop operation, which does not adjust the offered load in response to packet loss. In contrast, Harpoon, due to its closed-loop nature, is likely to generate some packet loss, which may be correlated and bursty [51].

Figure 14(b) shows the effect of four test configurations on switch fabric utilization. Surprisingly, the constant spacing generator using uniformly spaced 1500-byte packets exhibited a wider range of fabric utilization levels than with 40-byte packets. The highest level of switch fabric utilization was measured during the constant packet spacing generator test using 40-byte packets. Despite sending larger packets and having a lower packet loss rate, the Harpoon test showed fabric utilization within two percent of the highest measured value, with greater variability.

In summary, the variability in bit forwarding rate, loss rate, and switch fabric utilization remained very low for the constant spacing generator, highlighting the differences in performance characteristics between Harpoon and the constant spacing generator.