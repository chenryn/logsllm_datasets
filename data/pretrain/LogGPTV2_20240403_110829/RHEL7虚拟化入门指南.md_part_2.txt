### 虚拟化的优势

当需要升级、添加或卸载一台主机的硬件设备时，虚拟机可以安全地迁移到其他主机上。这意味着单个主机的更改不会导致任何虚拟机停机。

#### 节能
虚拟机可以重新分配到其他主机，空闲的主机可以在低使用率时段关闭以节省能源和成本。

#### 地理迁移
为了实现更低的延迟或其他特殊需求，虚拟机可以迁移到另一个物理位置。

### 第 2 章：虚拟化的优势及误解

虚拟化带来了许多优势，但也伴随着一些误解。本章将探讨这些要点。

#### 2.1 虚拟化的成本
一个常见的误区是认为采用虚拟化技术的成本过高。虽然初期投入可能较大，但从长远来看，虚拟化能够节省成本。进行投资回报分析（ROI）有助于更好地在您的环境中应用虚拟化。以下是一些考虑因素：

- **能耗更少**：虚拟化减少了对实体平台的需求，从而降低了运行和冷却所需的能耗，减少了能源费用。
- **更少的维护任务**：通过充分规划，从实体系统转移到虚拟系统后，维护时间会减少，从而降低零部件和人工成本。
- **延长已安装软件的寿命**：旧版本软件可能无法在最新的裸机上直接运行，但通过在更大的系统上虚拟运行，可以利用新系统的性能，延长软件寿命。
- **可预测的成本**：Red Hat Enterprise Linux 订阅服务为虚拟化提供了一个固定价格的支持模式，使成本易于估算。
- **节省空间**：将服务器整合到较少的机器上可以减少所需物理空间，这些空间可以用于其他用途。

#### 2.2 虚拟化学习曲线
有人误认为学习虚拟化非常困难。实际上，学习虚拟化的难易程度与其他新技术类似。您在管理和支持物理环境时积累的技能可以轻松应用于虚拟环境中。虚拟环境的操作与其对应的物理环境相似，因此学习曲线相对平缓。

#### 2.3 性能
过去由于旧版虚拟化只支持单CPU，虚拟机存在显著的性能局限，这导致了虚拟化处理速度慢的误解。然而，现代虚拟化技术已经大大提高了虚拟机的速度。基准测试显示，虚拟机几乎可以像传统裸机系统一样高效地运行典型的服务器应用程序。

- **SAP SD基准**：使用Red Hat Enterprise Linux 6.2 和 KVM 的虚拟机，在相同硬件配置下，其效率达到85%。
- **SPECvirt_sc2010基准**：Red Hat Enterprise Linux 6.1 和 KVM 在标准性能评估机构 (SPEC) 制定的 SPECvirt_sc2010 基准中达到了创纪录的虚拟化性能标准。

#### 2.4 灾难恢复
虚拟化简化了灾难恢复过程。在物理系统中，严重的故障通常需要完全重装操作系统，导致数小时的恢复时间。而在虚拟化系统中，可以通过实时迁移快速恢复，最长停机时间仅取决于客机数据恢复的时间。此外，虚拟化系统相互独立，一个系统的故障不会影响其他系统。

#### 2.5 安全性
虚拟机使用 SELinux 和 sVirt 来提高虚拟化中的安全性。以下是可供选择的安全特性：

- **SELinux**：由美国国家安全局及其他机构开发，提供强制访问控制（MAC）。所有程序和文件被赋予特定类型，并精确控制对其资源的访问。SELinux 限制攻击者的能力，防止常见的安全问题，如缓冲溢出攻击和特权升级。
- **sVirt**：将 SELinux 与虚拟化技术结合，提高虚拟机使用的安全性。它强化了系统，以应对可能被利用来攻击主机或其他虚拟机的故障。

#### 2.6 服务器和个体机的虚拟化
虚拟化不仅适用于服务器，也适用于个人用户。桌面端虚拟化提供了集中管理、改进的桌面解决方案和更好的灾难恢复。通过连接软件，远程连接桌面成为可能。

对于服务器，虚拟化不仅适用于大型网络服务，也适用于任何有两个以上服务器的情况。它提供实时迁移、高可用性、容错和无缝备份。

##### 2.6.1 虚拟化部署方案
以下是常见的虚拟化部署方案示例及其适用工具：

- **小型部署（最多3个物理主机和10个客机）：virt-manager**  
  virt-manager 适用于小型商务用户，运行多个没有严格运行时间要求或服务水平协议（SLA）的服务器。在这种环境下，一个管理员可能负责整个基础设施，灵活性非常重要。这种环境可能包括网络服务器、文件及打印服务器和应用服务器。

- **大型部署或关键应用系统：Red Hat Enterprise Virtualization (RHEV)**  
  RHEV 适用于企业实施大型部署或运行关键应用系统。在这种环境下，物理基础设施庞大，需要信息技术部门和商业需求根据新需求做出准确响应。适合 RHEV 的大型部署案例可能包括数据库、交易平台或必须无故障持续运行的信息系统。

- **软件开发者开发管理应用程序：libvirt**  
  virt-manager 和 RHEV 都使用 libvirt 管理虚拟机。libvirt 是一个虚拟化 API，软件开发者可以使用它来开发和修改管理应用程序。

### 第 3 章：红帽虚拟化产品介绍

本章介绍了 Red Hat Enterprise Linux 现有的多种虚拟化产品。

#### 3.1 Red Hat Enterprise Linux 的 KVM 和虚拟化