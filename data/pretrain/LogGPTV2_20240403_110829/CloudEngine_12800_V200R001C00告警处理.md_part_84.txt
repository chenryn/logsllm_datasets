ospf lsdb router命令查看该NSSA区域中是否有某个ABR的Router-LSA存在Nt bit，或者
直接查看其他ABR是否配置了nssa translator-always。
l 如果存在Nt bit，或其他ABR配置了nssa translator-always，则请执行步骤8；
l 如果不存在Nt bit，或其他ABR没有配置nssa translator-always，则请执行步骤3。
步骤3 如果是在本上配置了新的Router ID，并已生效，待区域内拓扑稳定后，请查看本NSSA
转换角色是否正确。
l 如果正确，则请执行步骤8。
文档版本 06 (2017-09-12) 华为专有和保密信息 669
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 43 OSPF
l 如果不正确，则请执行步骤4。
步骤4 可能是在NSSA区域的某个其他ABR上配置了新的Router ID，请查看其他ABR的配置。
l 确定某个ABR的Router ID有变动，待区域内拓扑稳定后，请查看新配置的Router
ID是否比本地的Router ID大。
– 如果是，则请执行步骤8。
– 如果不是，则请执行步骤5。
l 如果ABR的配置没有问题，则请执行步骤5。
步骤5 如果该NSSA区域有新加入：
l 加入的是ABR，待区域内拓扑稳定后，查看该ABR的Router ID是否比本地的
Router ID大。
– 如果是，则请执行步骤8。
– 如果不是，则请执行步骤6。
l 加入的不是ABR，则请执行步骤6。
步骤6 请查看本以及邻居是否存在以下告警：
OSPF_1.3.6.1.2.1.14.16.2.2 ospfNbrStateChange
OSPF_1.3.6.1.2.1.14.16.2.16 ospfIfStateChange
l 如果存在以上告警，请按照相关处理步骤处理。
l 如果不存在以上告警，则请执行步骤7。
步骤7 请收集该设备的告警信息、日志信息和配置信息，并联系技术支持人员。
步骤8 结束。
----结束
43.16 OSPF_1.3.6.1.2.1.14.16.2.19
ospfNbrRestartHelperStatusChange
Trap Buffer 信息解释
The neighbor exits from the restart helper state. (RouterId=[RouterId],
NbrIpAddr=[NbrIpAddr], NbrAddressLessIndex=[NbrAddressLessIndex],
NbrRtrId=[NbrRtrId], NbrRestartHelperStatus=[NbrRestartHelperStatus],
NbrRestartHelperAge=[NbrRestartHelperAge],
NbrRestartHelperExitReason=[NbrRestartHelperExitReason])
OSPF邻居平滑重启协助状态改变。
Trap 属性
Trap属性 描述
Alarm or Event Event
Trap Severity Warning
文档版本 06 (2017-09-12) 华为专有和保密信息 670
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 43 OSPF
Trap属性 描述
Mnemonic Code ospfNbrRestartHelperStatusChange
Trap OID 1.3.6.1.2.1.14.16.2.19
Alarm ID 该Trap是事件Trap，不涉及告警ID。
Alarm Type 该Trap是事件Trap，不涉及告警类型。
Raise or Clear 该Trap是事件Trap，不涉及告警产生或恢复。
Match trap 该Trap是事件Trap，不涉及配对Trap。
Trap Buffer 信息参数
参数名称 参数含义
RouterId 路由器标识。
NbrIpAddr 邻居IP地址。
NbrAddressLessIndex 邻居地址索引。
NbrRtrId 邻居路由器标识。
NbrRestartHelperStatus 新的helper状态。
l 1：Normal Router，not-helping
l 2：GR Router, not-helping
l 3：Helper Router, helping
NbrRestartHelperAge 完成GR的剩余时间。
NbrRestartHelperExitReason 退出helper状态的原因。
l 1：not attempted
l 2：restart/helper in progress
l 3：restart/helper completed successfully
l 4：restart/helper exit because of timeout
l 5：restart/helper exit because of
topology changed
VB 信息参数
VB OID VB Name VB Index
1.3.6.1.2.1.14.1.1 ospfRouterId N/A
1.3.6.1.2.1.14.10.1.1 ospfNbrIpAddr ospfNbrIpAddr;
ospfNbrAddressLessIndex;
文档版本 06 (2017-09-12) 华为专有和保密信息 671
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 43 OSPF
VB OID VB Name VB Index
1.3.6.1.2.1.14.10.1.2 ospfNbrAddressLessIndex ospfNbrIpAddr;
ospfNbrAddressLessIndex;
1.3.6.1.2.1.14.10.1.3 ospfNbrRtrId ospfNbrIpAddr;
ospfNbrAddressLessIndex;
1.3.6.1.2.1.14.10.1.12 ospfNbrRestartHelperStatus ospfNbrIpAddr;
ospfNbrAddressLessIndex;
1.3.6.1.2.1.14.10.1.13 ospfNbrRestartHelperAge ospfNbrIpAddr;
ospfNbrAddressLessIndex;
1.3.6.1.2.1.14.10.1.14 ospfNbrRestartHelperExitR ospfNbrIpAddr;
eason
ospfNbrAddressLessIndex;
对系统的影响
该告警表明进入helper状态或者退出helper状态。如果GR失败则会影响路由的正常转
发。
可能原因
在GR过程中，的平滑重启协助状态发生改变。
处理步骤
步骤1 请根据实际情况选择操作。
l 如果是人工进行主备板倒换或者通过GR重启OSPF进程，则请执行步骤3。
l 如果在没有人工干预的情况下出现该告警，则请执行步骤2。
步骤2 请收集该设备的告警信息、日志信息和配置信息，并联系技术支持人员。
步骤3 结束。
----结束
43.17 OSPF_1.3.6.1.2.1.14.16.2.20
ospfVirtNbrRestartHelperStatusChange
Trap Buffer 信息解释
The helper status of the virtual neighbor changes. (VirtNbrAreaId=[area-id],
VirtNbrRtrId=[neighbor-router-id], ProcessId=[process-id], RouterId=[router-id],
VirtNbrRestartHelperStatus=[gr-helper-state], VirtNbrRestartHelperAge=[gr-helper-value],
VirtNbrRestartHelperExitReason=[quit-reason], InstanceName=[instance-name])
表示OSPF虚连接邻居平滑协助状态改变。
文档版本 06 (2017-09-12) 华为专有和保密信息 672
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 43 OSPF
Trap 属性
Trap属性 描述
Alarm or Event Event
Trap Severity Warning
Mnemonic Code ospfVirtNbrRestartHelperStatusChange
Trap OID 1.3.6.1.2.1.14.16.2.20
Alarm ID 该Trap是事件Trap，不涉及告警ID。
Alarm Type 该Trap是事件Trap，不涉及告警类型。
Raise or Clear 该Trap是事件Trap，不涉及告警产生或恢复。
Match trap 该Trap是事件Trap，不涉及配对Trap。
Trap Buffer 信息参数
参数名称 参数含义
VirtNbrAreaId 虚连接所在区域的ID。
VirtNbrRtrId 虚连接的邻居交换机的Router ID。
ProcessId 进程号。
RouterId 本交换机的Router ID。
VirtNbrRestartHelperStatus 新的helper状态。
l 1：Normal Router，not-helping
l 2：Helper Router, helping
VirtNbrRestartHelperAge 进入GR Helper状态后的时间。
VirtNbrRestartHelperExitReason 退出helper状态的原因。
l 1：not attempted
l 2：restart/helper in progress
l 3：restart/helper completed successfully
l 4：restart/helper exit because of timeout
l 5：restart/helper exit because of
topology changed
InstanceName 实例名称。
文档版本 06 (2017-09-12) 华为专有和保密信息 673
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 43 OSPF
VB 信息参数
VB OID VB Name VB Index
1.3.6.1.2.1.14.1.1 ospfRouterId N/A
1.3.6.1.2.1.14.11.1.1 ospfVirtNbrArea ospfVirtNbrArea;
ospfVirtNbrRtrId;
1.3.6.1.2.1.14.11.1.2 ospfVirtNbrRtrId ospfVirtNbrArea;
ospfVirtNbrRtrId;
1.3.6.1.2.1.14.11.1.9 ospfVirtNbrRestartHelperSt ospfVirtNbrArea;
atus
ospfVirtNbrRtrId;
1.3.6.1.2.1.14.11.1.10 ospfVirtNbrRestartHelperA ospfVirtNbrArea;
ge
ospfVirtNbrRtrId;
1.3.6.1.2.1.14.11.1.11 ospfVirtNbrRestartHelperEx ospfVirtNbrArea;
itReason
ospfVirtNbrRtrId;
对系统的影响
该告警表明虚连接邻居进入helper状态或者退出helper状态的变化情况。如果GR失败则
会影响路由的正常转发。
可能原因
在GR过程中交换机虚连接邻居平滑重启协助状态发生改变。
处理步骤
步骤1 请根据实际情况选择操作。
l 如果是人工进行主备板倒换或者通过GR重启OSPF进程=>3。
l 如果在没有人工干预的情况下出现该告警=>2。
步骤2 请收集该设备的告警信息、日志信息和配置信息，并联系技术支持人员。
步骤3 结束。
----结束
43.18 OSPF_1.3.6.1.4.1.2011.5.25.155.31.3
hwOspfv2IntraAreaRouteridConflict
文档版本 06 (2017-09-12) 华为专有和保密信息 674
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 43 OSPF
Trap Buffer 信息解释
Router IDs conflict in an intra area. (ProcessId=[ProcessId], AreaId=[AreaId],
SelfIfnetIndex=[SelfIfnetIndex], NbrIpAddr=[NbrIpAddr], RouterId=[RouterId],
NbrRtrId=[NbrRtrId])
OSPF在区域内检测到路由器标识冲突。
Trap 属性
Trap属性 描述
Alarm or Event Event
Trap Severity Warning
Mnemonic Code hwOspfv2IntraAreaRouteridConflict
Trap OID 1.3.6.1.4.1.2011.5.25.155.31.3
Alarm ID 该Trap是事件Trap，不涉及告警ID。
Alarm Type 该Trap是事件Trap，不涉及告警类型。
Raise or Clear 该Trap是事件Trap，不涉及告警产生或恢复。
Match trap 该Trap是事件Trap，不涉及配对Trap。
Trap Buffer 信息参数
参数名称 参数含义
ProcessId 进程号。
AreaId 区域号。
SelfIfnetIndex 接口索引。
NbrIpAddr 邻居接口地址。
RouterId 本地的路由器标识。
NbrRtrId 邻居的路由器标识。
VB 信息参数
VB OID VB Name VB Index
1.3.6.1.4.1.2011.5.25.155.6. hwOspfv2SelfRouterId hwOspfv2ProcessIdIndex;
1.3
hwOspfv2AreaIdIndex;
hwOspfv2SelfIfnetIndex;
hwOspfv2NbrIpAddrIndex;
文档版本 06 (2017-09-12) 华为专有和保密信息 675
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 43 OSPF
VB OID VB Name VB Index
1.3.6.1.4.1.2011.5.25.155.6. hwOspfv2NbrRouterId hwOspfv2ProcessIdIndex;
1.9
hwOspfv2AreaIdIndex;
hwOspfv2SelfIfnetIndex;
hwOspfv2NbrIpAddrIndex;
对系统的影响
如果Router ID配置相同，导致Router LSA不断刷新，产生路由振荡。
可能原因
在一个区域内有至少两台非直连的Router ID配置相同，导致Router LSA不断刷新，产
生路由振荡。
处理步骤
步骤1 查看告警中的RouterId和NbrRtrId是否相同。
l 相同，则请执行步骤2。
l 不相同，则请修改冲突的Router ID，保证网络上在同一个区域内没有设备的Router
ID配置重复。
步骤2 请联系技术支持人员。
步骤3 结束。
----结束
43.19 OSPF_1.3.6.1.4.1.2011.5.25.155.31.4
hwOspfv2IntraAreaDRIpAddressConflict
Trap Buffer 信息解释
IP addresses of DRs in an intra area conflict. (ProcessId=[ProcessId], AreaId=[AreaId],
SelfIfnetIndex=[SelfIfnetIndex], NbrIpAddr=[NbrIpAddr], RouterId=[RouterId],
InterfaceIpAddress=[InterfaceIpAddress], InterfaceName=[InterfaceName])
由于外部路由不断刷新，OSPF可能发生区域间路由器标识冲突。
Trap 属性
Trap属性 描述
Alarm or Event Event
Trap Severity Warning
文档版本 06 (2017-09-12) 华为专有和保密信息 676
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 43 OSPF
Trap属性 描述
Mnemonic Code hwOspfv2IntraAreaDRIpAddressConflict
Trap OID 1.3.6.1.4.1.2011.5.25.155.31.4
Alarm ID 该Trap是事件Trap，不涉及告警ID。
Alarm Type 该Trap是事件Trap，不涉及告警类型。
Raise or Clear 该Trap是事件Trap，不涉及告警产生或恢复。
Match trap 该Trap是事件Trap，不涉及配对Trap。
Trap Buffer 信息参数
参数名称 参数含义
ProcessId 进程号。
AreaId 区域号。
SelfIfnetIndex 接口索引。
NbrIpAddr 邻居接口地址。
RouterId 本地的路由器标识。
InterfaceIpAddress 接口IP地址。
InterfaceName 接口名称。
VB 信息参数
VB OID VB Name VB Index