### 反对轮值：一次论战
**作者：Niall Richard Murphy，微软**

我们所熟知的“随叫随到”（即轮值）的传统必须停止。这种工作模式不仅对执行任务的人有害，还对收入和家庭生活造成负面影响。例如，《Conversation》网站的文章《轮值和不定期的日程安排如何损害美国劳动力》以及《When I Work》网站的文章《为什么你应该结束轮值调度，用什么来代替》都详细讨论了这些问题。此外，在轮值期间出现误判或操作失误的概率估计超过1%的值班人次。作为保持系统运行的手段，轮值效率低下。考虑到我们现在有能力改变这种工作模式，继续容忍其存在是令人痛苦的。

现在是时候重新评估我们在轮值时所做的事情，更重要的是分析为什么我们要这样做。轮值的历史可以追溯到75年前，例如布莱奇利公园的皇家海军女子服务队（WRNS）就实行了轮值制度。从计算机发明并用于处理紧急情况开始，轮值的工作模式就已经存在。尽管计算系统自那时以来有了显著改进，但非工作时间、面向中断驱动的支持人员（通常称为轮值）基本上保持不变。

无论这个传统是从计算机诞生之初就开始，还是仅仅从过去几十年开始，我们都需要反思一些基本问题，其中最重要的是为什么我们还要这样做？此外，我们这样做好吗？最后，是否有一种真正的替代方法来做这项工作？

### 轮值的理由

许多SRE（站点可靠性工程师）直观地了解为什么需要轮值：让系统恢复正常运行。为了更全面地理解，我们可以参考其他职业中的轮值角色，特别是医学领域。

#### 医学领域的轮值

在医疗领域，随叫随到的医生随时准备响应病患。例如，MedicineNet的文章和免费医学词典提到，被呼叫后30分钟内必须到场。急诊医学中，随叫随到的医生的存在是为了成为一个快速决策者，因为他们具有适当的专业知识，若不能处理则可以召集他人。他们的首要任务是执行分级，快速采集信息，决定患者是否应该转到急诊室（A&E）或尝试让患者更好。

与SRE的相似性在于，急诊医学是强烈的中断驱动工作，为人们提供解决问题的专业知识的广泛背景与SRE的轮值背景完全相同。另一个相似点是对情况分级，尽管通常是通过软件自动警报来实现的。

轮值待命的准备工作也类似。高要求的轮值（可能连续超过24小时）强调不吃垃圾食品，并提前一周支付夜班工作的工资。在待命预案文档中，可以看到类似于SRE的决策清单，即具体、有实战建议的列表，如何回应各种不同类型的身体机能失常。例如，《On Call Principles and Protocols》第六版（Elsevier）中的大部分章节涉及特定的“子系统”失败（如腹痛、胸痛、癫痫发作），并符合帕累托原则（80%的案例来自20%的根源）。

### 与SRE的差异

尽管相似性很强，但软件领域与医学有着根本的不同。SRE关注的许多系统变化非常快，因此，1月份适合某个系统的轮值安排到了6月份可能不再适用。相比之下，A&E的情况较为稳定，尽管遗传多样性和环境因素影响不大。软件行业本身几乎总是在变化，而SRE行业倾向于实现快速更改，因此变化更加成为预期。

### 推动工程师轮值的基本假设

其他职业轮值的理由是为了尽快获取专业知识和资源，从而解决问题，并防止出现类似或更大的问题。医疗专业人员的待命也可实现分流机制，对应于软件行业中SRE使用的监控软件。然而，数据中心的复杂性并不像现实世界那么复杂，因此不需要一个人来轮值应对。

我们仍然让工程师（不仅是运维工程师，有时还包括产品开发工程师）轮值。为什么？一个原因是因为这比解决真正的问题便宜；也就是说，在出现问题时，手动反应和修复问题的成本较低。另一个原因是轮值工作被认为是可怕的，因此未受过培训的产品工程师不愿意这样做，并希望将这项工作交给运维工程师。还有一个假设是，任务关键性、“保持系统运行”的心态以及围绕生产状态培养紧迫感都需要随时待命。然而，这些不过是一种教条，坚定和长期坚持的信念，可能有用也可能没有用。

### 合理理由分类

因此，让我们将原因分为以下几类：

- **已知的有解问题**：这些问题可以通过自动化或其他技术手段解决。
- **未知的复杂问题**：这些问题需要人类的判断和专业知识。
- **成本效益分析**：手动反应和修复问题的成本低于开发软件来解决问题。

通过使用风险管理的语言，我们可以专注于对系统运维有实际影响的事项，而不是依赖可能真实或不可能改变的信念。