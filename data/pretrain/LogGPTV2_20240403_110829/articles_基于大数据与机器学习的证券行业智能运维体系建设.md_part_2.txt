法实现各类运维指标的关联分析，帮助运维人员及时发现问题、定位问题来源。
在异常发现和分析方面采用流式分析引擎技术，通过无监督异常检测、异常
根因定位、自然语言处理等算法，对交易指标和其他关键性能指标进行实时汇聚
和异常检测，以定位系统异常时间点。对文本日志则进行了实时索引。异常发现
可以在大数据环境下有效分析实时流数据并进行告警，从而缩短从产生故障到运
维人员发现并进一步排查的时间间隔。
通过基于微服务架构的服务总线平台将算法api接口和应用程序的不同功能
单元通过服务之间定义良好的接口和契约联系起来。服务总线平台提供统一的标
准接口构建成分布式可扩展又相互独立的智能服务功能，以便后续各应用系统方
便使用服务。
基于现有的运维体系，通过CMDB等配置信息，结合异常发现提供的异常时
段和系统，有效缩小了异常分析的数据范围。针对范围内依然具备一定规模的各
种监控和日志数据，我们利用大数据平台的分布式计算框架，对数据进行了准实
时分析，能够在秒到十秒级别完成对问题的定位分析。
第 章智能运维体系可行性分析
2
当前，证券行业的智能运维体系构建刚刚起步，通过参考其他金融行业在IT
智能运维方面的建设经验以及成功案例，对我司构建智能运维体检建设进行必要
的可行性分析。
2.1 可行性分析
2.1.1 AIOps 智能运维技术分析
在我司的日常IT运维体系建设中，在运维体系和规模上具备了如下的条件：
 具备大量运维数据和标签供智能学习训练
 具备了各种各样的常规运维监控工具
 IT运维成熟度模型已经成型，理解下一阶段IT运维要求和目标
 拥有自主运维大型数据中心的客观条件和要求
 两地三中心的数据中心，保证高可用，规划管理有比较高的要求
经过长期的运维体系建设，运维人员对运维监控处理方式有了更高的要求，
需要机器学习等高效率的手段来解决问题。经过长期的运维体系的思考，从智能
运维场景看大体分成如下：
 智能日志分析
 智能根因定位
 异常指标预警
 智能容量管理
 智能流量预测
 智能故障预测
根据对金融行业内的调研，在实际智能运维项目的实践中，发现上述场景很
难深入的对接现有的IT运维体系和工具，存在很多局限性、需求不清晰等问题。
因此我司在智能运维实践过程中，根据对证券行业 IT 运维的深刻理解，总结出
了几个维度的运维场景和功能设计：
 可以独立运行并开箱即用，快速接入当前IT运维环境中；
 遵循智能运维的零故障趋势（Trend），故障前预警（Predict），故障中
抢修（Rescue），故障后分析（Analysis）；
 包含对产品相关日志（log）和监控数据（monitoring）的混合智能分
析；
产品组件 场景价值 AI算法模型 用户
故障树AI模型 动态阀
可视化交易链路上数字化表现，并直观 值模型 系统知识图谱，
应用系统交易 的深入分析运行状态下应用系统平台的 单KPI异常检测，多KPI
应用支撑
智能分析 动态交易量异常评估、预警和深层次故 联合异常检测 多 KPI 异
障定位 常机器和软件模块定位
调用链分析
动态阀值模型 多 KPI
企业级系统智 结合Aix,Linux,Windows，HP等操作系
异常机器和软件模块定 系统管理员
能感知 统特点，智能评估系统运行稳定性状况
位
以DBA视角智能评估各项数据库核心指
企业级数据库 容量预测模型 指标预
标，并给出数据库性能优化建议，故障 数据库DBA
智能洞察 测模型 性能优化模型
定位功能
企业安全及网 基于安全规范框架，实现数字化环境下 日志分析模型 日志关 安全网络专
络智能防御 的持续自适应安全风险监测和防御 联模型 日志聚合模型 家
在原有监控平台基础上改善优化运维
指标预测模型 日志分
企业级运维智 能力，实现被动规则监控+主动 AI 模型 系统监控管
析模型 故障树 AI 模型
能提升 预警。具有综合故障排查和日志综合分 理员
指标关联关系挖掘
析功能
存储智能运维针对多元，异构，多站点 容量预测模型 异常日
企业级存储智
的数据中心，提供一站式，可视化，自 志模型 存储知识库模型 存储管理员
能评估
动化，易扩展的智能存储运维。 设备故障预测
如下是一个经典的运维场景，通过线条串联方式展现智能运维与自动化体系
结合，实现故障发现、故障止损、故障修复、故障规避。
2.1.2 金融行业案例分析
由于证券行业成熟的经验较少，我们分享一些在金融行业中实施AIOps的真
实项目的实施作为参考，抛砖引玉。
1）典型案例一 数据中心运维大脑
一家大型全国性银行金融机构，覆盖全部银行对公对私业务，是大型金融机
构典型企业。数据中心已经实现了两地三中心的基础架构和大型金融典型数据中
心的所有特征。在建设智能运维的建设思路上，走在了国内银行企业的前列。由
数据中心下属业务支持处，系统运维处，安全网络处，设备维护处，全条线覆盖。
自上而下，高屋建瓴的进行新一代智能数据中心体系化建设。在 2016 年启动智
能运维平台项目的建设工作，借助基于人工智能的智能运维（AIOPS）技术，初
步建立了数据中心的“运维大脑”，以保障业务的安全、稳定运行。
涉及到数据中心业务需求，设计各运维应用场景，通过开发、建模实现大数
据在运维辅助告警、日志异常检测、系统运行趋势分析以及业务增益等方面的运
用并进行灵活展现。从 AB 级系统中挑选交易量大、银联可用率影响较高的 8 套
重点系统，约800分区进行试点上线。
基于Hadoop，在充分考虑到各组件使用场景基础上，充分利用kafka 消息总
线，通过 Spark 进行流式处理，有机结合 Hive、Hbase、Redis、Elasticsearch 等
当前主流组件的特性，应对每日 TB 级增量数据，提供秒级响应体验。
随着业务的扩张及日益的多样化，IT环境中的各类设备也成倍数的增加，并
且大量应用系统间相互共享资源，包括但不限于硬件，软件，网络等，导致 IT
系统中应用及相应架构上事故的诊断需要进行复杂且深入的调查，既耗费时间，
又占用大量资源，甚至造成大量的经济损失。
在数据中心业务和运维价值观点看，通过智能运维平台的使用，统一采集、
管理业务相关的各类运行状态数据和底层机器日志，结合算法对异常点的预警，
统一展示给运维人员，对故障根因的分析判断带来了极大便利，整体缩短了故障
排查的时间。
2）典型案例二 智能运维大数据分析平台
一个国内最大的农信联合社之一，随着业务的快速增长以及新应用系统的不
断上线，业务在变得越来越复杂的同时，运维人员面临的压力与日俱增。考虑到
业务范围是更好的服务联合社下属农村商业银行，业务领域虽然不广。但业务量
大，系统异构建设特点非常复杂。接入管理难度很高。数据和系统建设和外围接
入系统复杂。需要智能运维来更好实现运维管理，主要包括（在农信条线极具复
制性的银行业务系统），在日志采集上，包含ESB、AFA、ODS、前端等在内的20 多
种生产应用日志实时接入；系统部监控工具(ITM)、NMON以及TWS作业时长数据
接入；网络部设备日志接入。
从技术本身的角度来讲，本期项目主要实现了以下技术上的突破以及功能上
的亮点：
 为满足业务日志采集实时性、高吞吐量以及系统资源低消耗的要求，对
Flume在源码层面进行大量改造和验证，保障数据采集层长期稳定运行
 应用微服务设计理念，数据解析实现完全的配置化定义，并对外以
RESTful接口提供调用，快速响应用户需求的变化
 结合缓存集群以及 Structured Streaming 的使用，完成如交易日志合
并、异步消息处理等复杂业务逻辑的实现
 整个运维大数据平台基于虚拟化平台构建，具备完全的资源动态扩容与
调整能力
通过智能运维的实施，完成AIX/Linux平台上日志监控数据类型的采集、解
析以及与运维大数据平台的整合，大大提升系统运维人员的性能分析的效率，提
高了业务和运维价值，主要表现在以下方面：
 统一、集中、灵活的业务应用日志实时检索与统计方式，提升应用运维
人员工作效率，缩短问题排查时间，保障业务应用的稳定运行
 提供针对单笔交易流水穿插在不同业务应用日志中的追踪，并提供面向
ESB的交易路径统计与展现功能，丰富业务运行时状态分析手段
 填补业务应用作业（TWS/ODS）运行时长采集、计算与分析的空白，及时
预测并通知批量作业执行过程中可能存在的异常，进一步保障业务应用
的高可用
2.2 可实现性分析
2.2.1 AIOps 业务实现分析
我司在项目建设中参考了《金融行业智能运维AIOps实施建议白皮书》的运
维金字塔参考模型，指导我们智能运维体系的规划及实施：
运维的本质是提供稳定可靠的服务，所以在规划项目之初，从以下几个角度
来考虑落地和实施：
1) 技术选型上充分利用已经比较成熟的开源 AI 技术
2) 先做“点”的事情，再考虑“面”，AI 技术还不是“平民技术”，并不是所
有场景都适合，要避免凡事尽AI。