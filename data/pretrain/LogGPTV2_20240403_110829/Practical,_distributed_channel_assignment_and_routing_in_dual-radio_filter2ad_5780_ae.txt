tion about the variation and load of link A-B, since c is a
foreign channel. It optimistically assumes that the delivery
ratio deviation is 0 and recalculates a new gateway route us-
ing channel c. After A has dwelled on channel c for a while,
it learns that the link actually exhibits high variation or high
load, and therefore, the metric of the new path degrades. As
a result, A might perform another investigation and ﬁnd a
better path on a diﬀerent channel. To prevent ﬂapping, A
remembers the measured link variation and load, so that it
does not again incorrectly assume that the variability of the
link is 0. Another cause is that when a node A changes its
channels, it occasionally learns of additional potential neigh-
bors, causing it to discover even better alternate routes on
a diﬀerent channel.
Overall, we observe that ROMA’s channel assignment is
stable over fairly long periods of time. By preserving cross-
108)
s
p
b
M
(
t
u
p
h
g
u
o
r
h
T
6
5
4
3
2
1
0
Load unaware
Load aware
0 1 2 3 4 5 6 7 8 9 1011121314151617181920212223
)
s
p
b
M
(
t
u
p
h
g
u
o
r
h
T
6
5
4
3
2
1
0
Load unaware
Load aware
0 1 2 3 4 5 6 7 8 9 1011121314151617181920212223
)
s
p
b
M
(
t
u
p
h
g
u
o
r
h
T
6
5
4
3
2
1
0
Load unaware
Load aware
0 1 2 3 4 5 6 7 8 9 1011121314151617181920212223
Path Number
Path Number
Path Number
Figure 12: At 10% load,
load-
aware ROMA improves performance
slightly.
Figure 13: At 40% load, load-aware
ROMA improves performance signif-
icantly.
Figure 14: At 100% load, load-aware
and load-unaware ROMA choose
identical paths.
Channel Changes
Route Changes w/o Channel Changes
r
e
b
m
u
N
e
d
o
N
 20
 15
 10
 5
 0  2000  4000  6000  8000 10000 12000 14000 16000 18000
Time (s)
Figure 15: Route and channel changes over time
links, a node can sometimes switch to better new routes
to cope with network topology changes without having to
change its channel assignment.
7. RELATED WORK
ROMA builds upon a large body of prior work in multi-
radio mesh protocols. Below, we summarize related work
and point out their relationship to ROMA.
Centralized channel assignment: Centralized solu-
tions aim to ﬁnd the best combination of routes, channel
assignment and transmission schedules given the network
topology on all channels and the traﬃc pattern. Most cen-
tralized optimizations[4, 27, 25, 24, 33, 17] are evaluated
in simulations and lack practical solutions for coordinating
topology measurement and disseminating channel assign-
ments.
In [30, 31], a centralized channel assignment algorithm
(TIC) is implemented and evaluated on a 20-node testbed.
TIC requires that all nodes operate one of its radios on a
common default channel in order to coordinate topology
measurement and disseminate channel switch commands.
The channel assignment algorithm in [30] always takes into
account of external load estimated using received packets.
Distributed channel assignment: Most practical
multi-radio deployments choose not to perform sophisti-
cated channel assignment but use identical channels on all
nodes [16, 13, 8]. Assigning channels dynamically in a dis-
tributed fashion is a hard problem and only two known pro-
tocols do so [20, 32].
In [20], the authors propose a dis-
tributed channel assignment protocol that relies on a com-
mon channel across the network to ensure connectivity. Each
node runs the distributed assignment protocol to select a
channel for its other radio. The assignment prefers chan-
nels that are least used by a node’s interfering neighbors.
Routing is performed independently of channel assignment
using the MR-LQSR protocol [16] with the WECTT met-
ric. The protocol has been implemented and evaluated on a
dual-radio testbed of 14 nodes. In comparison, ROMA does
not require a common channel and can use channels more
eﬃciently to eliminate intra-path interference and improve
aggregate throughput.
Hyacinth [32] is a distributed assignment protocol that is
closest in spirit to ROMA. Hyacinth explicitly builds a span-
ning tree rooted at each gateway node where each node inde-
pendently chooses a channel for one of the radio interfaces
to communicate with its children. Like ROMA, Hyacinth
does not rely on a common channel to keep the network
connected and optimizes channel assignments along routes
between mesh nodes and a few gateways. ROMA diﬀers
from Hyacinth in several ways. One fundamental diﬀerence
is that Hyacinth does not consider link losses and loss ﬂuctu-
ations, one of the most important factors aﬀecting through-
put in mesh networks. Routes consisting of highly lossy
and ﬂuctuating links are bound to perform poorly and Hy-
acinth cannot adapt to changing channel conditions other
than node failures. Furthermore, Hyacinth’s join/leave pro-
tocol for spanning tree construction can be fragile in lossy
environments as it requires reliable delivery of protocol mes-
sages and accurate detection of node failures. Since Hy-
acinth has been primarily evaluated in simulations and a
9-node controlled testbed where there is no reported link
loss, it is unclear how robust its performance is in real de-
ployments. By contrast, ROMA explicitly incorporates link
loss, loss variations and external traﬃc load in the link met-
ric and can quickly adapt to changing channel conditions.
Route selection: WECTT [16] and SIM [13] are two
path metrics that help routing protocols preferentially
choose routes with less intra-path interference. ROMA uses
the SIM metric for choosing paths and extends it to take
into account link variations and external load.
While our modiﬁcation of the ETT metric is similar in
spirit to the mETX metric [22], there exists subtle diﬀer-
ences. While mETX proposes a more accurate model to es-
timate the expected transmission count of a single packet for
time-varying links, it captures the average-case scenario. By
contrast, our modiﬁcation is closer to model the worst-case
109scenario than the average case. The rationale for modeling
the worst-case scenario follows from ROMA’s goal of choos-
ing routes where each link delivers good and predictable per-
formance. In addition, computing mETX requires bit-level
loss information from all corrupted packets. However, most
packet losses do not result in any (corrupted) packet recep-
tion in our testbed.
8. CONCLUSIONS
Designing a high-performance multi-radio protocol faces
many practical constraints and challenges (small node size,
highly ﬂuctuating link qualities, external load). ROMA is a
distributed protocol that performs routing and channel as-
signment to achieve high end-to-end performance in a dual-
radio mesh by eliminating intra-path interference and reduc-
ing inter-path interference. ROMA ﬁnds high-performance
multi-hop paths by leveraging a new path metric that in-
corporates link variations and external load. ROMA also
adapts well to network topology changes while choosing sta-
ble routing paths.
Acknowledgments
David Bindel contributed to an early design and Arthur
Meacham wrote a simulator for ROMA and helped set up
the testbed. We are particularly indebted to the Meraki Net-
works engineers, especially John Bicket and Sanjit Biswas,
who provided invaluable advice and encouragement. We
thank many people who have helped us improve this work:
Frank Dabek, Robert Morris, Yair Sovran, Michael Paik,
our shepherd Dina Katabi and the anonymous reviewers.
9. REFERENCES
[1] Madwiﬁ. http://sourceforge.net/projects/madwifi.
[2] A. Adya, V. Bahl, J. Padhye, A. Wolman, and L. Zhou. A
multi-radio uniﬁcation protocol for ieee 802.11 wireless
networks. In IEEE BroadNets, 2004.
[3] D. Aguayo, J. Bicket, S. Biswas, G. Judd, and R. Morris. A
measurement study of a rooftop 802.11b mesh network. In
Proc. ACM SIGCOMM Conference (SIGCOMM 2004),
September 2004.
[4] M. Alicherry, R. Bhatia, and L. Li. Joint channel assignment
and routing for throughput optimization in multi-radio wireless
mesh networks. In Proc. ACM International Conference on
Mobile Computing and Networking (MobiCom), 2005.
[12] S. M. Das, H. Pucha, K. Papagianakki, and Y. C. Hu.
Understanding wireless routing link metric dynamics. In
Proceedings of the 7th ACM SIGCOMM/USENIX Internet
Measurement Conference, 2007.
[13] S. M. Das, Y. Wu, R. Chandra, and Y. C. Hu. Context based
routing: Technique, applications and experience. In USENIX
NSDI, 2008.
[14] D. S. J. De Couto, D. Aguayo, J. Bicket, and R. Morris. A
high-throughput path metric for multi-hop wireless routing. In
Proceedings of the 9th ACM International Conference on
Mobile Computing and Networking (MobiCom ’03), San
Diego, California, September 2003.
[15] R. Draves, J. Padhye, and B. Zill. Comparison of routing
metrics for static multi-hop wireless networks. In Proc. ACM
SIGCOMM Conference (SIGCOMM 2004), September 2004.
[16] R. Draves, J. Padhye, and B. Zill. Routing in multi-radio,
multi-hop wireless mesh networks. In MobiCom ’04:
Proceedings of the 10th annual international conference on
Mobile computing and networking, 2004.
[17] P. Dutta, S. Jaiswal, and R. Rastogi. Routing and channel
allocation in rural wireless mesh networks. In INFOCOM, 2007.
[18] V. Jacobson. Congestion avoidance and control. In ACM
SIGCOMM, 1988.
[19] G. Judd and P. Steenkiste. Using emulation to understand and
improve wireless networks and applications. In USENIX NSDI,
2005.
[20] B. Ko, V. Misra, J. Padhye, and D. Rubenstein. Distributed
channel assignment in multi-radio 802.11 mesh networks. In
WCNC, 2007.
[21] E. Kohler, R. Morris, B. Chen, J. Jannotti, and M. F.
Kaashoek. The Click modular router. ACM Transactions on
Computer Systems, 18(4), November 2000.
[22] C. Koksal and H. Balakrishnan. Quality-aware routing metrics
for time-varying wireless mesh networks. IEEE Journal on
Selected Areas in Communications, 24(11), 2006.
[23] J. Li, C. Blake, D. S. J. De Couto, H. I. Lee, and R. Morris.
Capacity of ad hoc wireless networks. In Proceedings of the 7th
ACM International Conference on Mobile Computing and
Networking, 2001.
[24] M. Marina and S. Das. A topology control approach for
utilizing multiple channels in multi-radio wireless mesh
networks. In Proceedings of Broadnets, 2005.
[25] S. Merlin, N. H. Vaidya, and M. Zorzi. Resource allocation in
multi-radio multi-channel multi-hop wireless networks. In
UIUC Technical Report, 2007.
[26] V. Mhatre, F. Baccelli, H. lundgren, and C. Diot. Joint
mac-aware routing and load balancing in mesh networks. In
ACM CoNext, 2007.
[27] A. Mohsenian-Rad and V. Wong. Joint logical topology design,
interface assignment, channel allocation and routing for
multi-channel wireless mesh networks. In INFOCOM, 2008.
[28] R. Murty, J. Padhye, R. Chandra, A. Wolman, and B. Zill.
Designing high performance enterprise wi-ﬁ networks. In
USENIX NSDI, 2008.
[5] H. Balakrishnan, V. N. Padmanabhan, and R. H. Katz. The
[29] A. Prabhu, H. Gupta, and S. Das. Minimum-interference
eﬀects of asymmetry on tcp performance. Mobile Networks and
Applications, 4(3), Sept. 1999.
channel assignment in multi-radio wireless mesh networks. In
IEEE SECON, 2007.
[6] J. Bicket. Bit-rate selection in wireless networks. Master’s
thesis, Massachusetts Institute of Technology, February 2005.
[7] J. Bicket, D. Aguayo, S. Biswas, and R. Morris. Architecture
and evaluation of an unplanned 802.11b mesh network. In
ACM Mobicom, 2005.
[8] S. Biswas. Meraki networks’ next generation multi-radio mesh
platform, 2008. private communication.
[9] S. Biswas and R. Morris. Opportunistic routing in multi-hop
wireless networks. In ACM SIGCOMM, 2005.
[10] S. Chachulski, M. Jennings, S. Katti, and D. Katabi. Trading
structure for randomness in opportunistic wireless routing. In
ACM SIGCOMM, 2007.
[11] C. Cheng, P. Hsiao, H. Kung, and D. Vlah. Adjacent channel
interference in dual-radio 802.11 nodes and its impact on
multi-hop networking. In IEEE Global Telecommunications
Conference (GLOBECOM), 2006.
[30] K. Ramachandran and M. M. B. Elizabeth Belding, Kevin
C. Almeroth. Interference-aware channel assignment in
multi-radio wireless mesh networks. In IEEE Infocom, 2006.
[31] K. Ramachandran, I. Sheriﬀ, E. Belding, and K. Almeroth. A
multi-radio 802.11 mesh network architecture. Mobile Networks
and Applications, 13(1-2):132–146, 2008.
[32] A. Raniwala and T. cker Chiueh. Architecture and algorithms
for an IEEE 802.11-based multi-radio wireless mesh networks.
In IEEE Infocom, 2005.
[33] A. Raniwala, K. Gopalan, and T. cker Chiueh. Centralized
channel assignment and routing algorithms for multi-channel
wireless mesh networks. 8(2), 2004.
[34] J. Robinson, K. Papagiannaki, C. Diot, X. Guo, and
L. Krishnamurthy. Experimenting with a multi-radio mesh
networking testbed. In 1st Workshop on Wireless Network
Measurements (Winmee), 2005.
110