Set up, configure, and administer mail services on the server.
Mac OS X Server Web 
Technologies Administration For 
Version 10.3 or Later
Set up and manage a web server, including WebDAV, WebMail, and 
web modules.
Mac OS X Server Network Services 
Administration For Version 10.3 
or Later
Set up, configure, and administer DHCP, DNS, IP firewall, NAT, and 
VPN services on the server.
LL2356.book  Page 8  Thursday, September 4, 2003  3:21 PM
Preface    About This Guide
9
For more information, consult these resources:
• Read Me documents contain important updates and special information. Look for 
them on the Mac OS X Server discs.
• Online help, available from the Help menu in all the server applications, provides 
onscreen instructions for administration tasks as well as late-breaking news and web 
updates.
• Apple support webpages and the AppleCare Knowledge Base provide answers to 
common questions and the latest information updates. These are available at the 
following website:
www.info.apple.com/
• Apple Training offers courses for technical coordinators and system administrators. 
For a course catalog, visit the following website:  
train.apple.com/
• Discussion groups and mailing lists put you in touch with other server administrators, 
who may have already found solutions to problems you encounter. To find discussion 
groups and mailing lists, visit the following websites:  
discussions.info.apple.com/
www.lists.apple.com/
• The Samba website has information about the open source software on which the 
Windows services in Mac OS X Server are based. Visit the Samba website at:
www.samba.org
Mac OS X Server Open Directory 
Administration For Version 10.3 
or Later
Manage directory and authentication services.
Mac OS X Server QuickTime 
Streaming Server Administration 
For Version 10.3 or Later
Set up and manage QuickTime streaming services.
Mac OS X Server:  Java 
Application Server Administration
Deploy and manage J2EE applications using a JBoss application 
server on Mac OS X Server.
Mac OS X Server Command-Line 
Administration For Version 10.3 
or Later
Use commands and configuration files to perform server 
administration tasks in a UNIX command shell.
This guide
Tells you how to 
LL2356.book  Page 9  Thursday, September 4, 2003  3:21 PM
LL2356.book  Page 10  Thursday, September 4, 2003  3:21 PM
1
11
1 Overview of Windows Services
Windows services encompass a primary domain 
controller, SMB file and print services, Windows domain 
browsing, name resolution, and VPN.
Mac OS X Server can provide a variety of services to users of Microsoft Windows 95, 98, 
ME (Millennium Edition), XP, NT 4.0, and 2000.
• File service allows Windows clients to connect to the server using Server Message 
Block (SMB) protocol on a TCP/IP network.
• Print service uses SMB to allow Windows clients to print to PostScript printers on the 
network.
• Windows Internet Naming Service (WINS) allows Windows clients to perform 
name/address resolution across multiple subnets.
• Domain browsing allows Windows clients to browse for available servers across 
subnets.
• Virtual private network (VPN) allows Windows clients to securely connect to 
Mac OS X Server while away from the local network.
• Primary domain controller (PDC) offers:
• Login to the PDC from Windows NT 4.x, Windows 2000, and Windows XP 
workstations
• Users changing their passwords during login
• Login using the same user account on Mac OS X and Windows computers
• Roaming user profiles stored on a Mac OS X Server computer
• Network home directories located on a Mac OS X Server computer
• User-level security for Windows 95, 98, and ME clients
By providing these services, Mac OS X Server can replace Windows NT servers in small 
workgroups. Settings for Windows services are grouped In Workgroup Manager and 
Server Admin, to make them easy to find. These settings are also designed to be 
familiar to experienced Windows administrators.
LL2356.book  Page 11  Thursday, September 4, 2003  3:21 PM
12
Chapter 1    Overview of Windows Services
Windows services in Mac OS X Server are based on Samba 3, an open source SMB/CIFS 
server. For more information about Samba, visit the Samba website:  
www.samba.org
Providing a PDC for Domain Login
Setting up your Mac OS X Server as a Windows primary domain controller (PDC) 
enables domain logins for Windows users on your network. Instead of logging in with a 
user name and password that are defined locally on each workstation, each user can 
log in with a user name and password that are defined on the PDC. A PDC gives each 
Windows user one user name and password for logging in from any Windows 
workstation on the network. 
A user needs only one account on Mac OS X Server to log in to Windows workstations 
and Mac OS X computers. The same user name and password works for Windows 
domain login and Mac OS X login.
Users can change their passwords while logging in to the Windows domain.
Before you can set up Mac OS X Server as a PDC, you must set up the server as an 
Open Directory master. The PDC uses the user and computer information stored in the 
LDAP directory of the Open Directory master. 
You have an opportunity to set up an Open Directory master and a PDC when you use 
Server Assistant after installing Mac OS X Server. You can also set up an Open Directory 
master and a PDC after installation by using Server Admin.
Be careful to set up only one Mac OS X Server as a PDC on your network. The network 
can have multiple Open Directory masters, but only one PDC.
Providing Home Directories and Roaming User Profiles
Setting up your Mac OS X Server as a Windows PDC enables it to host home directories 
and roaming user profiles for Windows users. Alternatively, another Mac OS X Server 
can host home directories and roaming user profiles. 
Each Windows user who logs in to the PDC has a network home directory. If a user puts 
files or folders in his or her home directory, the user can access them after logging in to 
the PDC from any Windows workstation that has joined the PDC. The user also has 
access to the contents of his or her home directory after logging in to a Mac OS X 
computer. The user has the same network home directory whether logging in to a 
Windows computer or a Mac OS X computer. 
LL2356.book  Page 12  Thursday, September 4, 2003  3:21 PM
Chapter 1    Overview of Windows Services
13
A user’s network home directory is located in a share point on a Mac OS X Server. 
A setting in the user account specifies the share point for the home directory. You can 
manage home directories with Workgroup Manager.
With roaming profiles, each user has the same profile when he or she logs in to the 
domain from any Windows workstation on the network. A roaming profile stores a 
Windows user’s preference settings—screensaver, colors, backgrounds, event sounds, 
web cookies, and so on—in a share point on a Mac OS X Server. A user’s roaming 
profile is stored by default in a predetermined folder on the PDC. 
Joining a PDC as a Domain Member
If you have multiple servers with Mac OS X Server on your network, you can set up one 
as a PDC and set up others to provide additional Windows services. It is important that 
only one PDC be present on the network.
You join other servers to the Windows domain of the PDC so they can use the PDC for 
user authentication. Home directories and environment profiles of Windows users can 
be located in share points on servers that are members of the Windows domain.
Providing File, Print, Browsing, and Name Resolution 
Services
Whether you set up a PDC or not, you can set up Mac OS X Server to provide other 
services to Windows users. Starting Windows services on Mac OS X Server enables it to 
provide access to share points via the Windows standard protocol for file service, server 
message block (SMB). Windows services also enable Mac OS X Server to provide SMB 
access to print queues that have been set up for PostScript printers. 
In addition, you can set up Mac OS X Server to provide WINS name resolution for 
Windows clients or to register with an existing WINS server on the network. Mac OS X 
Server can also provide network browsing service as a workgroup master browser or a 
domain master browser for Windows clients.
Providing VPN Service
A Mac OS X Server virtual private network (VPN) can include Windows workstations as 
well as Mac OS X computers. The workstations connect to the server by a private link of 
encrypted data, simulating a local connection as if the remote computer were attached 
to the local area network (LAN).
Mac OS X Server VPN uses Microsoft’s Challenge Handshake Authentication Protocol 
version 2 (MS-CHAPv2) for authentication. MS-CHAPv2 is also the standard Windows 
authentication scheme for VPN.
LL2356.book  Page 13  Thursday, September 4, 2003  3:21 PM
14
Chapter 1    Overview of Windows Services
You can set up VPN service in Mac OS X Server to use the Windows standard protocol 
for encrypted transport of VPN data, which is point-to-point tunneling protocol (PPTP). 
You can also set up Mac OS X Server VPN service to use an additional protocol, layer 
two tunneling protocol, secure Internet protocol (L2TP/IPSec). 
See the VPN chapter of the network services administration guide for additional 
information and setup instructions.
Tools for Managing Windows Services
The Workgroup Manager and Server Admin applications provide a graphical interface 
for managing Windows services in Mac OS X Server. In addition, you can manage 
Windows services from the command line by using Terminal.
Server Admin
You use Server Admin to 
• Set up Mac OS X Server as a PDC, as a Windows domain member, or for standalone 
Windows services. For instructions, see Chapter 2.
• Manage Windows file and print services, WINS name resolution, and domain 
browsing. For instructions, see Chapter 5. 
• Monitor Windows services. For instructions, see Chapter 5.
See chapter on server administration in the getting started guide for basic information 
about using Server Admin.
Server Admin is installed in /Applications/Server/.
Workgroup Manager
You use Workgroup Manager to 
• Set up and manage user, group, and computer accounts. For instructions, see 
Chapter 3 of this guide and the chapters on user, group, and computer accounts in 
the user management guide.
• Manage share points for file service and for user home directories and roaming user 
profiles. For instructions, see Chapter 5 of this guide and the chapter on share points 
in the file services administration guide.
• Access the Inspector, which lets you work with Open Directory entries. For 
instructions, see the maintenance chapter in the Open Directory administration 
guide.
See the chapter on server administration in the getting started guide for basic 
information about using Workgroup Manager. 
Workgroup Manager is installed in /Applications/Server/.
LL2356.book  Page 14  Thursday, September 4, 2003  3:21 PM
Chapter 1    Overview of Windows Services
15
Command-Line Tools
A full range of command-line tools is available for administrators who prefer to 
use command-driven server administration. For remote server management, 
submit commands in a Secure Shell (SSH) session. You can type commands on 
Mac OS X servers and computers using the Terminal application, located in 
/Applications/Utilities/. For instructions, see the command-line administration guide.
LL2356.book  Page 15  Thursday, September 4, 2003  3:21 PM
LL2356.book  Page 16  Thursday, September 4, 2003  3:21 PM
2
17
2 Setting Up Windows Services
You can set up Mac OS X Server to be a standalone 
Windows services provider, a Windows domain member, 
or a primary domain controller. 
Mac OS X Server can provide several native services to Windows clients:
• Primary domain controller allows each user to log in to the domain using the same 
user name and password on any Windows workstation, and provides roaming user 
profiles and network home directories.
• Domain member server automatically authenticates users for its Windows services, 
such as file service, by using the domain login provided by the primary domain 
controller. The member server can also host network home directories and roaming 
user profiles.
• File service allows Windows clients to access files stored in share points on the server 
using Server Message Block (SMB) protocol over TCP/IP.
• Print service uses SMB to allow Windows clients to print to PostScript printers on the 
network.
• Windows Internet Naming Service (WINS) allows clients across multiple subnets to 
perform name/address resolution.
• Windows domain browsing allows clients to browse for available servers across 
subnets.
You set up Windows services by configuring four groups of settings:
• General  Specify the server’s role in providing Windows services and the server’s 
identity among clients of its Windows services.
• Access  Limit the number of clients and control guest access.
• Logging  Choose how much information is recorded in the service log.
• Advanced  Configure WINS registration and domain browsing services, choose a 
code page for clients, and control virtual share points for home directories.
Because the default settings work well if you want to provide only Windows file and 
print services, you may only need to start Windows services. Nonetheless, you should 
take a look at the settings and change anything that isn’t appropriate for your network. 
LL2356.book  Page 17  Thursday, September 4, 2003  3:21 PM
18
Chapter 2    Setting Up Windows Services
You will have to change some settings if you want to set up Mac OS X Server as a 
Windows primary domain controller or as a member of the Windows domain of a 
Mac OS X Server PDC.
In addition to setting up Windows services and clients, you need to set up accounts for 
Windows users, groups, and computers (workstations). For information, see Chapter 3, 
“Administering Windows Users, Groups, Computers, and Share Points.”
For information on Mac OS X Server directory and authentication services, including 
Open Directory master and replicas, see the Open Directory administration guide.
Before You Set Up Windows Services
If you plan to provide Windows services from Mac OS X Server, read the following 
sections for issues you should keep in mind. You should also check the Microsoft 
documentation for your version of Windows to find out more about the capabilities of 
the client software. Although Mac OS X Server does not require any special software or 
configuration on Windows client computers, you may want to read “Supporting 
Windows Client Computers” on page 25.
Ensuring the Best Cross-Platform Experience
Mac OS and Windows computers store and maintain files differently. For the best cross-
platform experience, you should set up at least one share point to be used only by your 
Windows users. See “Managing SMB Share Points” on page 41.
In addition, you can improve the user experience by following these guidelines:
• Use comparable versions of application software on both platforms.
• Modify files only with the application they were created in.
• If you have Mac OS 8 and Mac OS 9 clients, limit Windows file names to 31 characters.
• Don’t use symbols or characters with accents in the names of shared items.
Windows User Password Validation
Mac OS X Server supports several methods of validating user passwords for Windows 
services. A user account’s password type determines the password validation method. 
Open Directory Passwords
If a user’s account has a password type of Open Directory, the user’s password is 
validated for Windows services by the Open Directory Password Server. This is the 
recommended password validation method and is required for Windows domain login 
from a Windows workstation to a Mac OS X Server PDC. An Open Directory password 
can also be used to authenticate for Windows file service.
LL2356.book  Page 18  Thursday, September 4, 2003  3:21 PM
Chapter 2    Setting Up Windows Services
19
Open Directory password validation can be used with user accounts stored in LDAP 
directory domains as well as NetInfo directory domains. The directory domain does not 
store the Open Directory password, just a pointer to the Open Directory Password 
Server and a password ID. The Open Directory Password Server stores passwords in a 
private database file readable only by the root user, and the contents are encrypted. 
The Open Directory Password Server never allows passwords to be read over the 
network—they can only be set and verified.
Shadow Passwords
If a user’s account has a password type of shadow password, the user’s password is 
encrypted and stored in a file on the server. Each user’s shadow password is stored in a 
different file, and these files can be read only by the root user. Only user accounts that 
are stored in a local directory domain can have a shadow password. 
A shadow password can be used to authenticate for Windows file service, but can’t be 
used to log in to the Windows domain of a PDC.
Authentication Manager Password
Mac OS X Server supports user accounts that were configured to use the legacy 
Authentication Manager technology for password validation in Mac OS X Server 
versions 10.0–10.2. After upgrading a server to Mac OS X Server version 10.3, existing 
users can continue to use their same passwords. An existing user account uses 
Authentication Manager if the account is in a NetInfo domain for which Authentication 
Manager has been enabled and the account is set to use a crypt password.
If you migrate a directory domain from NetInfo to LDAP, all user accounts that used 
Authentication Manager for password validation are converted to have a password 
type of Open Directory. 
Setting the Server’s Role and Identity for Windows 
Services
You can set up Mac OS X Server to assume any of three roles in providing Windows 
services:
• Primary domain controller (PDC) The server provides Windows file and print 
services. It also hosts a Windows domain, storing user, group, and computer accounts 
and providing authentication services to the domain. The PDC server can host user 
profiles and home directories for users who have user accounts on the PDC. 
• Domain member The server provides Windows file and print services. It gets 
authentication services from the Mac OS X Server PDC. A domain member can host 
user profiles and home directories for users who have user accounts on the PDC. 
LL2356.book  Page 19  Thursday, September 4, 2003  3:21 PM
20
Chapter 2    Setting Up Windows Services
• Standalone Windows services The server provides Windows file and print services. 
The server authenticates users for its Windows file service, but does not provide 
authentication services for Windows domain login on Windows computers. This is 
the default role.
Note:  Mac OS X Server can host a PDC only if the server is an Open Directory master. 
Important:  If your network has multiple Mac OS X Server systems, set up only one as a 
PDC. The others can be domain members or provide standalone Windows services.
Setting Up a Server of Standalone Windows Services
Using Server Admin, you can set up Mac OS X Server to provide standalone Windows 
services:  file, print, browsing, and Windows Internet Name Service (WINS). The server 
does not provide authentication services for Windows domain login on Windows 
computers. 
To set up standalone Windows services:
1 Open Server Admin and select Windows for a server in the Computers & Services list.
2 Click Settings (near the bottom of the window), then click General (near the top).
3 Choose Standalone Server from the Role pop-up menu, then enter a description, 
computer name, and workgroup.
Description:  This description appears in the Network Neighborhood window on 
Windows computers, and it is optional.
Computer Name:  Enter the name you want Windows users to see when they connect 
to the server. This is the server’s NetBIOS name. The name should contain no more than 
15 characters, no special characters, and no punctuation. If practical, make the server 
name match its unqualified DNS host name. For example, if your DNS server has an 
entry for your server as “server.example.com,” give your server the name “server.”
Workgroup:  Enter a workgroup name. Windows users see the workgroup name in the 
Network Neighborhood window. If you have Windows domains on your subnet, use 
one of them as the workgroup name to make it easier for clients to communicate 
across subnets. Otherwise, consult your Windows network administrator for the correct 
name. The workgroup name cannot exceed 15 characters.
4 Click Save.
For information on configuring individual Windows services, see “Changing Windows 
Services Access Settings” on page 23, “Changing Windows Services Logging Settings” 
on page 23, “Changing Windows Services Advanced Settings” on page 24, and the print 
service administration guide.
LL2356.book  Page 20  Thursday, September 4, 2003  3:21 PM
Chapter 2    Setting Up Windows Services
21
From the Command Line