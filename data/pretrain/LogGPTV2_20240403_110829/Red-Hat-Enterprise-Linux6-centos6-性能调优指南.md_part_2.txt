目录
插.插 . .槽槽 . .接接 . .收 收. . 缓缓. . 存存. . 大大. . 小.小 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .6 .1 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
8.3. 数据包接收概述 62
.C . P. .U . /缓.缓 . .存存 . .亲亲 . .和 和. . 性性. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .6 .2 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
8.4. 解决常见队列/帧丢失问题 62
8.4.1. NIC 硬件缓冲 62
8.4.2. 插槽队列 63
8.5. 多播注意事项 64
修.修 . .订订 . .记记 . .录 录. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .6 .5 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
3
红帽企业版 Linux 6 性能调节指南
4
序言
序序言言
1. 文文档档约约定定
本手册使用几个约定来突出某些用词和短语以及信息的某些片段。
在 PDF 版本以及纸版中，本手册使用在 Liberation 字体套件中选出的字体。如果您在您的系统中安装了
Liberation 字体套件，它还可用于 HTML 版本。如果没有安装，则会显示可替换的类似字体。请注意：红帽
企业 Linux 5 以及其后的版本默认包含 Liberation 字体套件。
1.1. 排排版版约约定定
我们使用四种排版约定突出特定用词和短语。这些约定及其使用环境如下。
单单行行粗粗体体
用来突出系统输入，其中包括 shell 命令、文件名以及路径。还可用来突出按键以及组合键。例如：
要看到文件您当前工作目录中文件 my_next_bestselling_novel 的内容，请在 shell 提示
符后输入 cat my_next_bestselling_novel 命令并按 Enter 键执行该命令。
以上内容包括一个文件名，一个 shell 命令以及一个按键，它们都以固定粗体形式出现，且全部与上下文有
所区别。
按键组合与单独按键之间的区别是按键组合是使用加号将各个按键连在一起。例如：
按 Enter 执行该命令。
按 Ctrl+Alt+F2 切换到虚拟终端。
第一个示例突出的是要按的特定按键。第二个示例突出了按键组合：一组要同时按下的三个按键。
如果讨论的是源码、等级名称、方法、功能、变量名称以及在段落中提到的返回的数值，那么都会以上述形
式出现，即固固定定粗粗体体。例如：
与文件相关的等级包括用于文件系统的 filesystem、用于文件的 file 以及用于目录的
dir。每个等级都有其自身相关的权限。
比比例例粗粗体体
这是指在系统中遇到的文字或者短语，其中包括应用程序名称、对话框文本、标记的按钮、复选框以及单选
按钮标签、菜单标题以及子菜单标题。例如：
在主菜单条中选择““系系统统”” → ““首首选选项项”” → ““鼠鼠标标””启动 鼠鼠标标首首选选项项。在““按按钮钮””标签
中点击““惯惯用用左左手手鼠鼠标标”” 复选框并点击 关关闭闭切换到主鼠标按钮从左向右（让鼠标适合左手使
用）。
要在 gedit 文件中插入特殊字符，请在主菜单栏中选择““应应用用程程序序”” → ““附附件件”” → ““字字符符
映映射射表表””。接下来选择从 Character Map 菜单中选择Search → ““查查找找......””，在““搜搜
索索””字段输入字符名称并点击““下下一一个个””按钮。此时会在““字字符符映映射射表表””中突出您搜索的字
符。双击突出的字符将其放在““要要复复制制的的文文本本””字段中，然后点击““复复制制””按钮。现在返回
您的文档，并选择 gedit 菜单中的““编编辑辑”” → ““粘粘贴贴””。
以上文本包括应用程序名称、系统范围菜单名称及项目、应用程序特定菜单名称以及按钮和 GUI 界面中的文
本，所有都以比例粗体出现并与上下文区别。
5
红帽企业版 Linux 6 性能调节指南
固固定定粗粗斜斜体体 或者 比比例例粗粗斜斜体体
无论固定粗体或者比例粗体，附加的斜体表示是可替换或者变量文本。斜体表示那些不直接输入的文本或者
那些根据环境改变的文本。例如：
要使用 ssh 连接到远程机器，请在 shell 提示符后输入 ssh PI:EMAIL。如果
远程机器是 example.com 且您在该其机器中的用户名为 john，请输入 ssh
PI:EMAIL。
mount -o remount file-system 命令会重新挂载命名的文件系统。例如：要重新挂载
/home 文件系统，则命令为 mount -o remount /home。
要查看目前安装的软件包版本，请使用 rpm -q package 命令。它会返回以下结
果：package-version-release。
请注意上述使用黑斜体的文字 -- username、domain.name、file-system、package、version 和 release。
每个字都是一个站位符，可用作您执行命令时输入的文本，也可作为该系统显示的文本。
不考虑工作中显示标题的标准用法，斜体表示第一次使用某个新且重要的用语。例如：
Publican 是一个 DocBook 发布系统。
1.2. 抬抬升升式式引引用用约约定定
终端输出和源代码列表要与周围文本明显分开。
将发送到终端的输出设定为 Mono-spaced Roman 并显示为：
books Desktop documentation drafts mss photos stuff svn
books_tests Desktop1 downloads images notes scripts svgs
源码列表也设为 Mono-spaced Roman，但添加下面突出的语法：
6
序言
static int kvm_vm_ioctl_deassign_device(struct kvm *kvm,
struct kvm_assigned_pci_dev *assigned_dev)
{
int r = 0;
struct kvm_assigned_dev_kernel *match;
mutex_lock(&kvm->lock);
match = kvm_find_assigned_dev(&kvm->arch.assigned_dev_head,
assigned_dev->assigned_dev_id);
if (!match) {
printk(KERN_INFO "%s: device hasn't been assigned before, "
"so cannot be deassigned\n", __func__);
r = -EINVAL;
goto out;
}
kvm_deassign_device(kvm, match);
kvm_free_assigned_device(kvm, match);
out:
mutex_unlock(&kvm->lock);
return r;
}
1.3. 备备注注及及警警告告
最后，我们使用三种视觉形式来突出那些可能被忽视的信息。
注注意意
备注是对手头任务的提示、捷径或者备选的解决方法。忽略提示不会造成负面后果，但您可能会错过
一个更省事的诀窍。
重重要要
重要框中的内容是那些容易错过的事情：配置更改只可用于当前会话，或者在应用更新前要重启的服
务。忽略‘重要’框中的内容不会造成数据丢失但可能会让您抓狂。
警警告告
警告是不应被忽略的。忽略警告信息很可能导致数据丢失。
2. 获获得得帮帮助助并并提提供供反反馈馈信信息息
2.1. 您您需需要要帮帮助助吗吗？？
如果您对本文档论述的步骤有疑问，请访问红帽客户门户网站 http://access.redhat.com。通过客户门户网
站，您可以：
7
红帽企业版 Linux 6 性能调节指南
搜索或者浏览有关红帽产品技术支持文章的知识库。
向红帽全球支持服务（GSS）提交支持案例。
访问其它红帽文档。
红帽还托管了大量讨论红帽软件和技术的电子邮件列表。公开列表位于
https://www.redhat.com/mailman/listinfo。点击任意列表名称即可订阅该列表或者访问列表归档。
2.2. 我我们们需需要要您您的的反反馈馈！！
如​果​您​发​现​了​排​印​错​误​或​者​有​改​进​本​文​档​的​建​议​，我​们​希​望​能​听​取​您​的​意​见​。​请​在 Bugzilla
http://bugzilla.redhat.com/ 中​根据产品 Red Hat Enterprise Linux 6. 提交​报​告​。​
提交报告时，请​提供​文​档​的​标​识​符​：doc-Performance_Tuning_Guide
如​果​您​有​改​进​本​文​档​的​建​议​，请​尽​量​将​其​明​确​化​。​如​果​您​发​现​了​错​误​，请​指​出​章​节​号​以及上下文​，以​便​我​们​
尽​快​找​到​并​更​正​该​。​
8
第 1 章 概述
第第 1 章章 概概述述
《性能调节指南》是红帽企业版 Linux 配置的完整参考。虽然本发行本也记录了红帽企业版 Linux 5 的性
能，但所有在此提供的步骤都只用于红帽企业版 Linux 6。
本书将分几个章节论述红帽企业版 Linux 中的具体子系统。《性能调节指南》着重论述以下三个主要方面：
性性能能
各个子系统章节论述红帽企业版 Linux 6 中特有的性能。这些章节还论述了红帽企业版 Linux 6 中
具体子系统性能比红帽企业版 Linux 5 的显著改善。
分分析析
本书还模拟每个具体子系统的性能指标。根据具体服务给出这些指标的常用值，帮助您理解其在真
实产品系统中的意义。
另外，《性能调节指南》还演示了查询子系统性能数据（即侧写）的不同方法。注：这里演示的一
些侧写工具在其他文档中有具体论述。
配配置置
可能本文档中大多数重要信息是告诉您如何在红帽企业版 Linux 6 中调整性能。《性能调节指
南》解释了如何为具体服务微调红帽企业版 Linux 6 子系统。
请记住，微调子系统的性能可能会影响其他子系统性能，有时可能是负面影响。红帽企业版 Linux 6 的默认
配置是为大多数在中度负载下运行的服务优化。