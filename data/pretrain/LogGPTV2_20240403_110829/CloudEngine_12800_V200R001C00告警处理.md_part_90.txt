1.39 ressType
1.3.6.1.4.1.2011.5.25.149.4. hwPimInvalidJoinPruneOrig N/A
1.40 in
1.3.6.1.4.1.2011.5.25.149.4. hwPimInvalidJoinPruneGro N/A
1.41 up
1.3.6.1.4.1.2011.5.25.149.4. hwPimInvalidJoinPruneRp N/A
1.42
1.3.6.1.4.1.2011.5.25.149.4. hwPimNeighborUpTime hwPimNeighborIfIndex;
1.2.1.6
hwPimNeighborAddressTyp
e;
hwPimNeighborAddress;
1.3.6.1.4.1.2011.5.25.149.4. hwPimNeighborIfName hwPimNeighborIfIndex;
1.2.1.16
hwPimNeighborAddressTyp
e;
hwPimNeighborAddress;
1.3.6.1.4.1.2011.5.25.149.4. hwPimInstanceID N/A
1.57
1.3.6.1.4.1.2011.5.25.149.4. hwPimInstanceName N/A
1.60
对系统的影响
收到无效的Join/Prune报文，可能导致组成员信息无法到达RP，从而影响组播业务。
可能原因
原因1：收到Join/Prune报文中携带的RP地址和设备上该组的RP地址不一致。
文档版本 06 (2017-09-12) 华为专有和保密信息 718
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 45 PIM
原因2：收到(*,G)或(S,G,RPT)类型的Join/Prune报文，但是该报文中的组地址在本地设
备的SSM范围内。
处理步骤
l 原因1：收到Join/Prune报文中携带的RP地址和设备上该组的RP地址不一致。
a. 使用命令display pim rp-info检查Join/Prune报文发送端设备和本设备对于该组
的RP配置是否一致。
n 如果是，则请执行步骤2。
n 如果不是，则请修改Join/Prune报文发送端设备和本设备对于该组的RP配
置，使得二者一致。
b. 请收集告警信息、日志信息和配置信息，并联系技术支持人员。
l 原因2：收到(*,G)或(S,G,RPT)类型的Join/Prune报文，但是该报文中的组地址在本
地设备的SSM范围内。
a. 使用命令display current-configuration检查本设备和Join/Prune报文发送端设
备，二者SSM范围是否相同。
n 如果是，则请执行步骤2。
n 如果不是，则请配置相同的SSM范围。
b. 请收集告警信息、日志信息和配置信息，并联系技术支持人员。
----结束
45.9 PIM_1.3.6.1.4.1.2011.5.25.149.4.0.4 rp-mapping-change
Trap Buffer 信息解释
The RP changes. (GroupMappingOrigin=[GroupMappingOrigin],
GroupMappingAddressType=[GroupMappingAddressType], szGrpAddr=[szGrpAddr],
GrpPfxLen=[GrpPfxLen], GroupMappingRPAddressType=[GroupMappingRPAddressType],
RPAddr=[RPAddr], GroupMappingPimMode=[GroupMappingPimMode],
Precedence=[Precedence], PimInstanceID=[PimInstanceID],
PimInstanceName=[PimInstanceName])
RP改变。
Trap 属性
Trap属性 描述
Alarm or Event Event
Trap Severity Warning
Mnemonic Code rp-mapping-change
Trap OID 1.3.6.1.4.1.2011.5.25.149.4.0.4
Alarm ID 该Trap是事件Trap，不涉及告警ID。
Alarm Type 该Trap是事件Trap，不涉及告警类型。
文档版本 06 (2017-09-12) 华为专有和保密信息 719
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 45 PIM
Trap属性 描述
Raise or Clear 该Trap是事件Trap，不涉及告警产生或恢复。
Match trap 该Trap是事件Trap，不涉及配对Trap。
Trap Buffer 信息参数
参数名称 参数含义
GroupMappingOrigin RP映射组的类型。
GroupMappingAddressType 组地址类型。
szGrpAddr 组地址。
GrpPfxLen 组地址掩码长度。
GroupMappingRPAddressType RP地址类型。
RPAddr 新RP的地址。
GroupMappingPimMode 当前运行的PIM模式。
Precedence 不同RP类型的对应优先级。
PimInstanceID 实例索引。
PimInstanceName 实例名称。
VB 信息参数
VB OID VB Name VB Index
1.3.6.1.4.1.2011.5.25.149.4. hwPimGroupMappingPimM hwPimGroupMappingOrigi
1.13.1.7 ode n;
hwPimGroupMappingAddre
ssType;
hwPimGroupMappingGrpA
ddress;
hwPimGroupMappingGrpPr
efixLength;
hwPimGroupMappingRpAd
dressType;
hwPimGroupMappingRpAd
dress;
文档版本 06 (2017-09-12) 华为专有和保密信息 720
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 45 PIM
VB OID VB Name VB Index
1.3.6.1.4.1.2011.5.25.149.4. hwPimGroupMappingPrece hwPimGroupMappingOrigi
1.13.1.8 dence n;
hwPimGroupMappingAddre
ssType;
hwPimGroupMappingGrpA
ddress;
hwPimGroupMappingGrpPr
efixLength;
hwPimGroupMappingRpAd
dressType;
hwPimGroupMappingRpAd
dress;
1.3.6.1.4.1.2011.5.25.149.4. hwPimInstanceID N/A
1.57
1.3.6.1.4.1.2011.5.25.149.4. hwPimInstanceName N/A
1.60
对系统的影响
RP改变，可能导致源和组成员的信息交流中断，从而影响组播业务。
可能原因
原因1：网络中重新配置了静态RP，且配置静态RP的命令中携带preferred关键字，优
先选择静态RP。
原因2：网络中出现了优先级较高的C-RP。
处理步骤
l 原因1：网络中重新配置了静态RP，且配置静态RP的命令中携带preferred关键
字，优先选择静态RP。
a. 检查是否是由于用户操作导致RP信息变化。
n 如果是，则请执行步骤5。
n 如果不是，则请执行步骤2。
b. 请在网络中各交换机的PIM视图下执行static-rp rp-address preferred命令配置
静态RP为原来的RP，优先选择静态RP。请执行步骤3。
c. 执行display pim rp-info group-address命令检查RP信息是否符合要求。
n 如果是，则请执行步骤5。
n 如果不是，则请执行步骤4。
d. 请收集告警信息、日志信息和配置信息，并联系技术支持人员。
e. 结束。
l 原因2：网络中出现了优先级较高的C-RP。
文档版本 06 (2017-09-12) 华为专有和保密信息 721
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 45 PIM
a. 检查是否是由于用户操作导致RP信息变化。
n 如果是，则请执行步骤5。
n 如果不是，则请执行步骤2。
b. 请在网络中希望成为RP的交换机的PIM视图下执行c-rp priority priority或c-rp
interface-type interface-number priority priority命令，减小优先级数值，即提高
该C-RP的优先级。请执行步骤3。
c. 执行display pim rp-info group-address命令检查RP信息是否符合要求。
n 如果是，则请执行步骤5。
n 如果不是，则请执行步骤4。
d. 请收集告警信息、日志信息和配置信息，并联系技术支持人员。
e. 结束。
----结束
45.10 PIM_1.3.6.1.4.1.2011.5.25.149.4.0.5 interface-election
Trap Buffer 信息解释
The interface is elected as a DR. (IfIndex=[IfIndex], IfName=[PimInterfaceName],
IfIPverion=[IfIPverion], IfAddrType=[IfAddrType], Addr=[Addr],
PimInstanceID=[PimInstanceID], PimInstanceName=[PimInstanceName])
接口当选DR。
Trap 属性
Trap属性 描述
Alarm or Event Event
Trap Severity Warning
Mnemonic Code interface-election
Trap OID 1.3.6.1.4.1.2011.5.25.149.4.0.5
Alarm ID 该Trap是事件Trap，不涉及告警ID。
Alarm Type 该Trap是事件Trap，不涉及告警类型。
Raise or Clear 该Trap是事件Trap，不涉及告警产生或恢复。
Match trap 该Trap是事件Trap，不涉及配对Trap。
Trap Buffer 信息参数
参数名称 参数含义
IfIndex 接口索引。
文档版本 06 (2017-09-12) 华为专有和保密信息 722
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 45 PIM
参数名称 参数含义
IfName 接口名字。
IfIPverion 接口的IP版本号。
IfAddrType 接口地址类型。
Addr 接口地址。
PimInstanceID 实例索引。
PimInstanceName 实例名称。
VB 信息参数
VB OID VB Name VB Index
1.3.6.1.4.1.2011.5.25.149.4. hwPimInterfaceAddressTyp hwPimInterfaceIfIndex;
1.1.1.3 e
hwPimInterfaceIpVersion;
1.3.6.1.4.1.2011.5.25.149.4. hwPimInterfaceAddress hwPimInterfaceIfIndex;
1.1.1.4
hwPimInterfaceIpVersion;
1.3.6.1.4.1.2011.5.25.149.4. hwPimInterfaceName hwPimInterfaceIfIndex;
1.1.1.29
hwPimInterfaceIpVersion;
1.3.6.1.4.1.2011.5.25.149.4. hwPimInstanceID N/A
1.57
1.3.6.1.4.1.2011.5.25.149.4. hwPimInstanceName N/A
1.60
对系统的影响
源端DR变化，可能导致RP收到错误的Register消息；组成员端DR变化，可能导致RP收
到错误的Join消息，从而影响组播业务。
可能原因
原因1：PIM接口收到新的Hello报文，且此接口的DR优先级或IP地址大于共享网段上其
他接口。
原因2：PIM接口变为Up状态后，在第一个Hello报文周期的时间后，未收到其他接口的
Hello报文。
处理步骤
步骤1 检查是否希望该接口当选DR。
l 如果是，则请执行步骤8。
文档版本 06 (2017-09-12) 华为专有和保密信息 723
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 45 PIM
l 如果不是，则请执行步骤2。
步骤2 执行display pim interface interface-type interface-number命令查看DR地址是否是该接口
的IP地址。如果该接口是当前DR，则在显示信息的接口地址后有local标志。
l 如果是，则请执行步骤3。
l 如果不是，则请执行步骤8。
步骤3 执行display pim interface interface-type interface-number命令查看共享网段上的接口是
否都支持Hello报文中携带DR优先级参数。
l 如果是，则请执行步骤4。
l 如果不是，则请执行步骤5。
步骤4 执行display pim neighbor neighbor-address命令检查各PIM邻居接口的DR优先级是否都
小于该接口。
l 如果是，则请在接口视图下执行pim hello-option dr-priority priority命令将该接口
的DR优先级降低。请执行步骤6。
l 如果不是，则请执行ip address ip-address { mask | mask-length }命令为该接口配置
较小的IP地址。请执行步骤6。
步骤5 执行ip address ip-address { mask | mask-length }命令为该接口配置较小的IP地址。请执
行步骤6。
步骤6 执行display pim interface interface-type interface-number命令查看DR是否已改变。
l 如果是，则请执行步骤8。
l 如果不是，则请执行步骤7。
步骤7 请收集告警信息、日志信息和配置信息，并联系技术支持人员。
步骤8 结束。
----结束
45.11 PIM_1.3.6.1.4.1.2011.5.25.149.4.0.6
hwPimNeighborAdd
Trap Buffer 信息解释
PIM neighbor add. (NbrIntIndex=[NbrIntIndex], NbrAddrType=[NbrAddrType],
NbrAddr=[NbrAddr], NbrExpiryTime=[NbrExpiryTime], InstanceID=[InstanceID],
InstanceName=[InstanceName])
增加新的PIM邻居。
Trap 属性
Trap属性 描述
Alarm or Event Alarm
Trap Severity Critical
文档版本 06 (2017-09-12) 华为专有和保密信息 724
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 45 PIM
Trap属性 描述
Mnemonic Code new-neighbor
Trap OID 1.3.6.1.4.1.2011.5.25.149.4.0.6
Alarm ID 0x08850001
Alarm Type communicationsAlarm
Raise or Clear Clear
Match trap PIM_1.3.6.1.4.1.2011.5.25.149.4.0.1 hwPimNeighborLoss
Trap Buffer 信息参数
参数名称 参数含义
NbrIntIndex 建立邻居的接口索引。
NbrAddrType 建立邻居的接口地址类型。包括：
l 0：
MIB_ADDRESSTYPE_UNKNOWN
l 1：MIB_ADDRESSTYPE_IPV4
l 2：MIB_ADDRESSTYPE_IPV6
l 3：MIB_ADDRESSTYPE_IPV4Z
l 4：MIB_ADDRESSTYPE_IPV6Z
l 16：MIB_ADDRESSTYPE_DNS
l 17：MIB_ADDRESSTYPE_MAX
NbrAddr 建立邻居的接口地址。