Volume II: Collect Earth User Manual for Windows OS
Processing geospatial data with QGIS 58
5.4.2 Create a basic grid with round numbers
It is often useful to create a grid with relatively round numbers. A subset of the points may be used for a
ground-based forest inventory. Coordinates with one or two decimal places will be easier to manually enter
into a GPS unit than coordinates with more digits. (However, various software tools exist to transfer spatial
data onto GPS units.) To simplify the coordinates of the grid, the spatial extent values will be rounded to
whole numbers and manually entered as the spatial extent of the grid.
In the main tool bar, click on
Vector, Research Tools and
Regular points.
Refer to South Africa’s spatial extent, which you pasted in Notepad. Round the X min and Y min values
down, and round X max and Y max values up.
Specify the desired grid spacing. Here, 0.01 degrees
will be the distance between points in the grid.
Specify the name and location for the new grid, click
the box to Add result to canvas and click OK.
Volume II: Collect Earth User Manual for Windows OS
Processing geospatial data with QGIS 59
At first glance, the grid looks like a solid block. Zoom in to view the individual grid points more closely.
Measure the distance between the grid points to confirm that the operation has been properly completed.
Click on the dropdown arrow beside
the ruler icon and select Measure Line.
Left click on a grid point
to start the line. Right
click on an adjacent point
to finish the line.
Measure the east-west
distance instead of the
north-south length. The
length of the line will be
displayed in the
Measurement window.
Volume II: Collect Earth User Manual for Windows OS
Processing geospatial data with QGIS 60
The distance between points is
roughly 1.11 km. This is close to
what one might expect 0.01° to
equal in South Africa, which ranges
from 21° to 35° south of the
equator.
The decimal degree-to-kilometers
estimates in the table are
explained in more detail on
Wikipedia here.
In short, the east-west distance of 1° at the equator is equal to the circumference of the earth (40,075 km)
divided by 360 degrees: 111.32 km. At other latitudes, the distance will be slightly shorter as the
circumference of the earth tapers toward the north and south poles.
Volume II: Collect Earth User Manual for Windows OS
Processing geospatial data with QGIS 61
5.4.3 Reduce the grid layer to only the areas of interest
This fine scale 0.01° grid is extremely large (with over 2.3 million points) and time consuming to process. The
subsequent processes can be implemented more efficiently if the dataset is reduced to the areas of interest.
South Africa will use this fine scale grid in forest areas, which cover less than 2% of the country’s land area.
Very few points in South Africa’s coarse and medium scale grids fall in forest areas.
Load the spatial boundaries of the areas of interest in QGIS. The forest layer appears in blue below.
Volume II: Collect Earth User Manual for Windows OS
Processing geospatial data with QGIS 62
Select Vector in the main tool bar, then
Geoprocessing Tools and Clip.
Use the grid as the input vector layer.
Use the area of interest layer (Forest Patch, in this
case) as the clip layer.
Add a name and location for the new file.
Check the box to add the result to canvas. Then click
OK.
The resulting file includes the grid
points that are located within
forest patches.
Volume II: Collect Earth User Manual for Windows OS
Processing geospatial data with QGIS 63
5.4.4 Add coordinates to the grid’s attributes table
Right click on the grid layer and select Open Attribute Table.
At this point, the table only contains
the point IDs. The total number of
points has been reduced from
2,379,999 to 4,605.
Volume II: Collect Earth User Manual for Windows OS
Processing geospatial data with QGIS 64
Under the Vector menu, click on Geometry Tools and Export/Add geometry columns.
Select the grid layer with points only in the area of
interest as the Input vector layer. Click OK.
Once the process is complete, right click on the
layer and check the data attribute table. Confirm
that the X (longitude), Y (latitude) coordinates
have been added.
Volume II: Collect Earth User Manual for Windows OS
Processing geospatial data with QGIS 65
5.4.5 Acquire SRTM digital elevation data
Visit the CGIAR-CSI (Consultative Group on International Agricultural Research, Consortium for Spatial
Information) website to download 90m resolution digital elevation data. The data, originally from NASA’s
Shuttle Radar Topography Mission, is available in GeoTiff and ArcInfo format.
The global
dataset can be
downloaded
by region
(West,
Northeast and
Southeast) by
clicking on this
link and
entering the
password
listed beside
it.
To download only the tiles covering the area of interest, click on the link SRTM Data Search and Download.
Volume II: Collect Earth User Manual for Windows OS
Processing geospatial data with QGIS 66
On the SRTM Data Search page, select CGIAR-CSI as the server, enable mouse drag as the data selection
method, and choose GeoTiff as the file format. Click and drag the mouse over the relevant tiles. Download
your selection.
Once the download is complete, load the geotiff in QGIS.
Volume II: Collect Earth User Manual for Windows OS
Processing geospatial data with QGIS 67
Right click on the layer and review the metadata to confirm that it is in the same projection as the other
spatial data you are using.
Volume II: Collect Earth User Manual for Windows OS
Processing geospatial data with QGIS 68
5.4.6 Derive slope and aspect data from digital elevation data
Under the Raster menu, click on Analysis and DEM (Terrain models).
Input the SRTM digital elevation data.
Specify the output location and file name.
Check the box for band and select 1 (there is only
one band in the SRTM data).
Click on the dropdown arrow beside mode and select
Slope.
Type in 111120 as the scale for converting meters to
decimal degrees. (For more information on this
conversion, visit the GDAL website:
http://gdal.org/gdaldem.html)
Check the box to load the resulting layer once the
process is complete.
Then click OK.
Volume II: Collect Earth User Manual for Windows OS
Processing geospatial data with QGIS 69
Use the same tool to derive aspect data.
Input the SRTM digital elevation model data.
Specify the output location and file name.
Check the box for band and select 1 (there is
only one band in the SRTM data).
Click on the dropdown arrow beside mode and
select Aspect.
Check the box to return 0 for flat instead of
-9999.
Check the box to load the resulting layer once
the process is complete.
Then click OK.
The resulting slope and aspect layers are raster files separate from the original SRTM elevation raster.
Volume II: Collect Earth User Manual for Windows OS
Processing geospatial data with QGIS 70
5.4.7 Add elevation, slope and aspect data to the grid
There are two parts to this step. In the first part, elevation, slope and aspect data are extracted from the
rasters and associated with each point in the forest grid. This results in three separate point files. The
second part involves consolidating the elevation, slope and aspect data into the main forest grid file, which
already contains the point coordinates.
In QGIS, click on Manage and Install Plugins. Search for and install a plugin called Point sampling tool.
In the QGIS table of contents, check the boxes
for the relevant layers only. Start with the SRTM
elevation layer and the fine 0.01 degree grid over
forest areas.
Under the Plugins
menu, click on
Analyses and Point
sampling tool.
Use point sampling tool to add elevation to the
grid file.
Select the fine forest grid as the layer containing
sampling points.
Select the SRTM elevation data, band 1 raster.
Specify the output location and file name.
Check the box to load the resulting layer once
the process is complete.
Click OK.
Volume II: Collect Earth User Manual for Windows OS
Processing geospatial data with QGIS 71
The resulting shapefile contains the elevation at each point.
Repeat the process for slope and aspect. There should be separate shapefiles for elevation, slope and
aspect.
To consolidate the elevation, slope and aspect data with the main forest grid, click on the Vector menu and
select Data Management Tools, then Join attributes by location.
Volume II: Collect Earth User Manual for Windows OS
Processing geospatial data with QGIS 72
Start by adding elevation data.
Select the forest grid (with coordinates) for the
target vector layer.
Select the elevation points as the vector layer to
join.
Take attributes of the first located feature.
Specify the output location and file name.
Keep only matching records.
Then click OK.
Repeat the process for slope and aspect data,
but remember to change the target vector file
to the most recent join.
Volume II: Collect Earth User Manual for Windows OS
Processing geospatial data with QGIS 73
The intermediary elevation, slope and aspect point files and the first two spatial joins are temporary files
that can be deleted once the final shapefile is produced. The final join should have a clear file name
consistent with the other Collect Earth survey files (no spaces, alpha-numeric characters only).
After consolidating elevation, slope and aspect data with the main forest grid, right-click on the layer and
review the data attributes table to confirm that the process has been completed properly.
Volume II: Collect Earth User Manual for Windows OS
Processing geospatial data with QGIS 74
5.4.8 Format the grid as a CSV compatible with Collect Earth
Collect Earth uses grids in csv format with six basic attributes in a particular order:
 plot ID number
 latitude (y coordinate)
 longitude (x coordinate)
 elevation
 slope
 aspect
Collect Earth South Africa draws upon several additional attributes. Again, the order of the columns is
important for compatibility, but the columns can be empty if such data is not available or up-to-date:
 ADM1_NAME (province name)
 BIOMECODE
 Type
 Forest Type
 Forest Group
 Bio Region
The final shapefile produced is comprised of six separate files.
Open the DBF file in Libre Office or
Microsoft Word.
Volume II: Collect Earth User Manual for Windows OS
Processing geospatial data with QGIS 75
Remove all &, ‘, “ and other symbols that are not alpha-numeric characters from the headers and all of the
rows in the spreadsheet.
Adjust the order and the names of columns. Note that the order of the coordinates must be reversed so
that the y coordinate (latitude) precedes the x coordinate (longitude).
Save the file as a csv.
For Collect Earth South Africa’s Collect Earth, add a column for province name, biome code, biome type,
forest type, forest group and bioregion. If spatial data for these attributes is available, you can use the Join
attributes by location tool in QGIS (see 5.2.7 above) to populate these columns.
If supplementary data is not available, the column headers still must be added, but the rows beneath the
header can remain blank.
Volume II: Collect Earth User Manual for Windows OS
Processing geospatial data with QGIS 76
Move the csv to the survey files folder within the Collect Earth folder.
Open the csv in Collect Earth. Confirm that the points mostly fall within forest areas.
Volume II: Collect Earth User Manual for Windows OS
Processing geospatial data with QGIS 77
Zoom in and measure the distance between points. Confirm that the distance is consistent.
In Google Earth, you can also measure distance in decimal degrees.
Volume II: Collect Earth User Manual for Windows OS
Synergies between the Collect Earth sampling and Wall-to-Wall mapping 78
6 Synergies between the Collect Earth sampling and Wall-to-Wall mapping
6.1 Preparing vector data in Google Fusion Tables
6.1.1 Importing Collect Earth data into Google Fusion Tables
Google Fusion Tables is a web-based service provided by Google for data management.
Collect Earth data can be exported as a CSV that is
compatible with Google Fusion Tables. Regardless
of which CED file is visible in Collect Earth, the
Fusion Table option exports the entire country’s
dataset.
Log into Google Drive: drive.google.com or go directly to
the Google Fusion Table website. You will need a Google
account to proceed.
Within Google Drive, click Create in the upper-left
corner. If you have never used Google’s Fusion Tables
App, click on Connect More Apps at the bottom of the
list.
Type Fusion Tables in the
search field. Click +Connect
to add the app to your
Google Drive.
Select Fusion Table in your updated Google
Drive Create menu.
Volume II: Collect Earth User Manual for Windows OS
Synergies between the Collect Earth sampling and Wall-to-Wall mapping 79
Browse for the Fusion
Table file exported from
Collect Earth. Click Next.
Preview the table
preview.
Click Finish.
Volume II: Collect Earth User Manual for Windows OS
Synergies between the Collect Earth sampling and Wall-to-Wall mapping 80
Fusion Tables can be viewed in a tabular format, as a series of cards…
… in charts
Volume II: Collect Earth User Manual for Windows OS
Synergies between the Collect Earth sampling and Wall-to-Wall mapping 81
… or in a map. This last option is useful for quickly reviewing spatial data that will be used in Earth Engine.
If Google Fusion Tables has difficultly geocoding the data, Earth Engine may not be able to display it. Collect
Earth facilitates data compatibility by concatenating the coordinates of each point into a single column, that
is identified as the location
column. Vector data from
other sources can also be
imported into Fusion Tables
(and later imported into Earth
Engine). If the data does not
properly geocode, the data
may be poorly positioned or a
message may appear
regarding the lack of a
location column.
To indicate which column contains the location data,
return to the Rows tab, click on the header or the column
that contains location data and select Change.
Click on the dropdown arrow under Type and select
Location. Save changes.
Volume II: Collect Earth User Manual for Windows OS
Synergies between the Collect Earth sampling and Wall-to-Wall mapping 82
You can filter the data and use a subset as training data for a supervised classification. For a supervised
classification, it is advisable to use at least 10 points for each band of imagery and land use class. When
using all 13 bands of Landsat 8 imagery to classify an area into the six IPCC recommended land use
categories, it is recommended to use at minimum of 780 training points (10x13x6).
Countries that use Collect Earth as a primary means of classifying land use will have tens of thousands of
points that could be used as training data for a wall-to-wall classification. Papua New Guinea and Mongolia,
for example, have conducted land use assessments using a systematic grid comprised of 25,000-30,000
points. However, using the entire dataset in a classification will not necessarily improve the results.
It is best to use a subset of the data that
surpasses the minimum amount recommended
and (ideally) includes the portion that has been
quality controlled.
The data can be filtered by…
 Land use category to filter out points that
are not assigned to one of the six land use
categories
 Land use category accuracy to filter out the