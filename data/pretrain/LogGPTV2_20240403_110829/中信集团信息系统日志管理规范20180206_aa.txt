中信集团信息系统
日志管理规范
目录
1.	总则	2
1.1	目的和范围	2
1.2	目标	2
1.3	日志的时间	4
2.	日志记录规范	5
2.1	日志记录级别	5
2.2	服务器类日志	6
2.2.1	系统类型	6
2.2.2	记录内容要求	6
2.3	网络和安全产品类日志	7
2.3.1	系统类型	7
2.3.2	记录内容要求	7
2.4	数据库和中间件类日志	9
2.4.1	系统类型	9
2.4.2	记录内容要求	9
2.5	应用系统类日志	10
2.5.1	系统类型	10
2.5.2	应用系统日志功能要求	10
2.5.3	记录内容要求	12
2.5.4	应用系统日志格式	13
2.5.5	日志格式模板的分离	19
2.6	终端类日志	19
2.6.1	系统类型	19
2.6.2	记录内容要求	19
3.	日志采集规范	21
4.	日志存储规范	223.	日志采集规范	21
4.	日志存储规范	22
4.1	存储原则	22
4.2	存储时间	23
4.3	存储格式	24
5.	日志使用规范	25
5.1	日志检索	25
5.2	日志数据可视化	26
5.3	日志导出	27
5.4	对外接口	27
5.5	日志安全	29
6.	定义、术语与缩写，标准与规范	30
总则
目的和范围
本文档用于明确中信集团信息系统日志管理的技术规范。日志管理的范围包括中信集团总部生产系统所有的主机、服务器、网络设备、安全设备、数据库以及各种应用系统，包括IaaS、PaaS、SaaS云服务模式部署的云服务器、云数据库、云中间件、云服务等云化的产品。
对纳入管理的信息系统，系统负责人应按照规范要求进行系统建设，保证日志数据真实、记录准确、内容完整，为日志查询、事件分析、稽核审计、大数据应用等提供保障和依据。
目标目标
日志管理的目标是为准确定位和排除系统故障、发现隐患、改进产品提供客观依据，促进系统的状态跟踪、监控、分析、运营的可视化管理，满足安全、合规、审计等法律法规要求。因此，应对信息系统产生日志的记录、采集、存储、分析应用等提供规范要求。
日志可以根据管理需求有多种分类方法，本规范按日志来源包括如下五类：
| 日志来源分类 | 含义 |
|---|---|
| 服务器类01server |既包括物理服务器，也包括云上的虚拟服务器。服务器上的日志主要通过Windows、Linux、Unix等操作系统日志体现。Docker等虚拟化容器技术归到服务器类。 |
| 网络和安全产品类02networksec |网络产品类,既包括网络路由器、交换机、负载均衡等物理网络设备，也包括云上的虚拟路由器、虚拟交换机、SLB、NAT等云化的产品和服务。 安全产品类，主要是指入侵检测IDS、防火墙、防攻击、防病毒、加解密、账号口令管理等安全类设备和服务。 || 数据库和中间件类 03dbmiddleware |主要是指Oracle、SqlServer、MySql等关系型数据库，Redis、Hbase、MongoDB等NoSQL数据库和大数据系统，Websphere、Weblogic、Tomcat、MQ、Kafka、Storm、Apache等应用中间件。 |
| 应用系统类 04app |主要是指纳入日志管理的应用系统。 |
| 终端类 05terminal |包括PC、笔记本、PAD、手机及各种智能终端设备。这些终端的日志主要是指对有管理要求的用户终端信息采集的数据，不包括终端操作系统等产生的系统日志和操作日志，有特殊规定的除外。 |
对日志的管理应逐渐实现如下目标：
规范日志记录内容格式，特别是可定制系统的格式，规范化的日志记录内容格式有利于日志的快速解析和对日志的快速索引查询。
实现日志的统一存储和集中审计，日志的存储内容和保存时间需满足法律法规的要求。实现日志的统一存储和集中审计，日志的存储内容和保存时间需满足法律法规的要求。
基于各类日志和事件，促进对事件问题的快速定位和响应，并采取行动进行处理。
实现日志使用的规范化，对采集和存储的日志，支持检索和接口数据推送。
基于日志数据，支持通过大数据、机器学习等技术手段进行异常行为检测、监控、预警、业务分析等应用，能够提供主动式的日志服务。
日志的时间
日志的时间采用信息系统的时钟时间。为了保证日志时间的一致性和权威性，若没有特殊情况，信息系统时间应该和公司认可的时间服务器同步。
日志记录规范
日志反应了某信息系统的事件，一般包括谁、何时、何地、做了什么等几个方面的内容，日志消息包括信息、调试、警告、错误、警告等信息类型。日志记录的原则为：法律合规性、必要性、实用性。
日志记录级别
信息系统的日志记录级别包括DEBUG、INFO、WARN、ERROR、FATAL五级。| 代码 | 日志级别 | 含义 | 采取行动 | 适用环境 |
|---|---|---|---|---|
| 1 |DEBUG |表示对调试应用程序有帮助的信息事件，一般用在开发测试过程中。无特殊情况，为避免产生大量调试日志，不允许在生产环境开通DEBUG级别（若开发测试环境不能复现某错误事件，可临时打开此级别并及时关闭）。 |调试； 若在生产环境使用，调试期不能超过一个月 |开发、测试 |
| 2 |INFO |表示突出强调应用程序的运行过程的信息。对INFO日志量较大的系统，不推荐在生产环境中打开。 |定期查看 |（1）开发、测试 （2）开发、测试、生产 |
| 3 |WARN |表示会出现潜在错误的情形，反馈警告信息。生产环境默认打开WARN及以上的日志级别。 |及时关注 |开发、测试、生产 |
| 4 |ERROR |表示发生了某种错误事件，可能不影响系统的整体运行，但应及时排查错误。 |及时处理 |开发、测试、生产 || 5 |FATAL |表示产生了严重的错误事件，可能将会导致应用程序的退出或产生严重的后果。 |立即处理 |开发、测试、生产 |
服务器类日志
系统类型
既包括物理服务器，也包括云上的虚拟服务器。服务器上的日志主要通过Windows、Linux、Unix等操作系统日志体现。Docker等虚拟化容器技术归到服务器类。
记录内容要求
服务器类日志，应至少包含下述信息：
系统的启动和关闭事件。
系统错误。
用户所做的操作及执行状态。
用户认证信息。至少包括用户操作时的用户识别符、登录时间、注销时间、事件发生的日期和时间、事件内容、操作结果等。
应用服务的运行信息，应用服务的启动、关闭，运行错误信息。
包括系统文件和文件属性修改，口令输入、关键文件的改变、增加和改变用户属性、系统启动和关闭等。
必须记录所有系统特权用户命令的操作信息，包括root、administrator、admin等。参照具体操作系统日志记录通常的配置执行。
网络和安全产品类日志
系统类型
网络产品类,既包括网络路由器、交换机、负载均衡等物理网络设备，也包括云上的虚拟路由器、虚拟交换机、SLB、NAT等云化的产品和服务。
安全产品类，主要是指入侵检测IDS、防火墙、防攻击、防病毒、加解密、账号口令管理等安全类设备和服务。
记录内容要求
网络产品类的日志，应至少包含下述信息：
系统的启动和关闭事件。
系统错误。
用户认证信息，操作信息。包括用户登录、修改配置等。
动态路由协议的日志信息，认证信息记录、状态信息的记录、邻居关系变更的记录。
参照具体系统日志记录通常的配置执行。
安全产品类，应至少包含下述信息。
系统的启动和关闭事件。
系统错误。
用户认证信息。
用户所做的操作及执行状态；包括用户操作时的用户识别符、登录时间、注销时间、事件发生的日期和时间、事件内容、操作结果等。
对于防火墙，包括访问策略适配的情况，端口状态信息。对于防火墙，包括访问策略适配的情况，端口状态信息。
对于IDS/IPS,包括检测到的受到攻击的报警信息。系统升级记录。