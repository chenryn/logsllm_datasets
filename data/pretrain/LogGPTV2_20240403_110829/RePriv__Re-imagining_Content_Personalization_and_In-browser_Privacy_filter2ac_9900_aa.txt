title:RePriv: Re-imagining Content Personalization and In-browser Privacy
author:Matthew Fredrikson and
Benjamin Livshits
2011 IEEE Symposium on Security and Privacy
REPRIV: Re-Imagining Content Personalization and In-Browser Privacy
Matthew Fredrikson
University of Wisconsin
Benjamin Livshits
Microsoft Research
Abstract—We present REPRIV, a system that combines the
goals of privacy and content personalization in the browser.
REPRIV discovers user interests and shares them with third-
parties, but only with an explicit permission of the user. We
demonstrate how always-on user interest mining can effectively
infer user interests in a real browser. We go on to discuss an
extension framework that allows third-party code to extract and
disseminate more detailed information, as well as language-based
techniques for verifying the absence of privacy leaks in this
untrusted code. To demonstrate the effectiveness of our model,
we present REPRIV extensions that perform personalization
for Netﬂix, Twitter, Bing, and GetGlue. This paper evaluates
important aspects of REPRIV in realistic scenarios. We show
that REPRIV’s default in-browser mining can be done with no
noticeable overhead to normal browsing, and that the results
it produces converge quickly. We demonstrate that REPRIV
personalization yields higher quality results than those that may
be obtained about the user from public sources. We then go on
to show similar results for each of our case studies: that REPRIV
enables high-quality personalization, as shown by cases studies in
news and search result personalization we evaluated on thousands
of instances, and that the performance impact each case has on
the browser is minimal. We conclude that personalized content
and individual privacy on the web are not mutually exclusive.
I. INTRODUCTION
The motivation for this work comes from the observation
that personalized content on the web is increasingly relevant.
This means more web service providers are interested in
learning as much about their users as they can so that they
can better target their ads or provide this personalization. Users
might welcome content, ad, and site personalization as long
as it does not unduly compromise their privacy.
In today’s web, for service providers, personalization oppor-
tunities are limited. Even if sites like Amazon and Facebook
allow or sometimes require authentication, service providers
only know as much about the user as can be gathered through
interaction with the site. A user might only spend a few
minutes a day on Amazon.com, for example. This is minuscule
compared to the amount of time the same user spends in the
browser. This suggests a simple lesson: the browser knows
much more about you than any particular site you visit. Based
on this observation, we suggest the following strategy, which
forms the basis for REPRIV:
1) Let the browser infer information about the user’s inter-
ests based on his browsing behavior, the sites he visits,
his prior history, and detailed interactions on web sites
of interest to form a user interest proﬁle. Optionally, this
proﬁle can by synched with a cloud storage device for
use on multiple systems.
2) Let the browser control the release of this information.
For instance, upon the request of a site such as Ama-
zon.com or BarnesAndNoble.com, the user will be asked
for a permission to send her high-level interests to the
site. This is similar to prompting for the permission to
obtain the geo-location in today’s mobile browsers. By
default, more explicit information than this, such as the
history of visited URLs would not be exposed to the
requesting site. It is an important design principle of
REPRIV that the user stay in control of what information
is released by the browser.
3) Because the information provided by default user inter-
est mining may not suit all needs, REPRIV allows ser-
vice providers to register extensions that would perform
information extraction within the browser. For instance,
a Netﬂix extension (or miner) may extract information
pertinent to what movies the user is interested in. The
miner may use the history of visiting Fandango.com to
see what movies you saw in theaters in the past. REPRIV
miners are statically veriﬁed at the time of submission
to disallow undesirable privacy leaks.
This approach is attractive for web service providers because
they get access to user’s preferences without the need for
complex data mining machinery, and is in any case based on
limited information. It is also attractive for the user because of
better ad targeting and content personalization opportunities.
Moreover, this approach opens up an interesting new business
model: service providers can incentivize users to release their
preferences in exchange for store credit, ad-free browsing, or
access to premium content. Compared to prior research [14,
34], the appeal of REPRIV is considerably more extensive as
it enables the following broad applications:
1) Personalized search. Search results from a variety of
search engines can be re-ranked to match user’s prefer-
ences as well as their browsing history (Section VI-A).
2) Site personalization. Sites such as Google News,
CNN.com, or Overstock.com can be easily adapted
within the browser to match user’s news or shopping
preferences (Section VI-B).
3) Ad targeting. Although we do not explicitly focus on ad
personalization in this apper, REPRIV enables browser-
based ad targeting as suggested by Adnostic [34] and
Privad [14].
Note that REPRIV is largely orthogonal to in-private browsing
modes supported by modern browsers. While it is still possible
for a determined service provider to perform user tracking
unless the user combines REPRIV with a browser privacy
mode such as InPrivate Browsing in Internet Explorer, it is
our hope that, going forward, the service provider will opt
1081-6011/11 $26.00 © 2011 IEEE
DOI 10.1109/SP.2011.37
131
for explicitly requesting user preferences through the REPRIV
protocol rather than using a back door.
A. Contributions
Our paper makes the following contributions:
• REPRIV. We present REPRIV, a system for controlling
the release of private information within the browser. We
demonstrate how built-in data mining of user interests
can work within an experimental HTML5 platform called
C3 [21].
• REPRIV protocol. We propose a protocol on top of
HTTP that can be used to seamlessly integrate REPRIV
with existing web infrastructure. We also show how
pluggable extensions can be used to extract more detailed
information, and how to check these third-party miners
for unwanted privacy leaks.
• Extension Framework. We developed a browser exten-
sion framework for allowing untrusted third-party code to
make use of REPRIV’s data. We discuss the API and type
system based on the Fine programming language [31]
that ensures these extensions do not introduce privacy
leaks. We developed six realistic miner examples that
demonstrate the utility of this framework.
• Evaluation. We demonstrate that REPRIV mining can be
done with minimal overhead to the end-user latency. We
also show the efﬁcacy of REPRIV mining on real-life
browsing sessions and conclude that REPRIV is able to
learn user preferences quickly and effectively. We demon-
strate the utility of REPRIV by performing two large-scale
case studies, one targeting news personalization, and the
other focusing on search result reordering, both evaluated
on real user data.
• Monetization. In addition to being a way to improve the
current ecosystem, we strongly believe that REPRIV can
replace the current approach of user tracking with a legit-
imate, above-the-table marketplace for user information
that would enable user targeting. This new model would
allow direct interactions between users and services, with
REPRIV acting as a broker in such transactions.
B. Paper Organization
The rest of the paper is organized as follows. Section II
provides some background on web privacy and personaliza-
tion and motivates the problem REPRIV attempts to solve.
Section III talks about REPRIV implementation and resulting
technical issues. Section IV discusses custom REPRIV miners
and their veriﬁcation. Section V describes our experimental
evaluation. Section VI describes two detailed case studies, one
focusing on news and the other on search personalization.
Section VII discusses the topics of incentives for REPRIV
use, usability, deployment, etc. Finally, Sections VIII and
Section IX describe related work and conclude. Our technical
report [9] provides a more comprehensive experimental eval-
uation and contains listings of the miners references in this
paper. A closely related paper on IBEX presents our vision for
veriﬁed browser extensions [13].
132
II. OVERVIEW
We begin with a high-level discussion in Section II-A of
existing efforts to preserve privacy on the web, and how
REPRIV ﬁts into this context. Section II-B talks about site
personalization and Section II-C motivates third-party person-
alization extensions that we call “miners”.
A. Background
One deﬁnition of privacy common in popular thought and
law is summarized as follows: individual privacy is a person’s
right to control information about one’s self, both in terms of
how much information others have access to, and the manner
in which others may use it. The web as it currently stands
is different from how it was initially conceived; it has trans-
formed from a passive medium to an active one where users
take part in shaping the content they receive. One popular form
of active content on the web is personalized content, wherein a
provider uses certain characteristics of a particular user, such
as their demographic or previous behaviors, to ﬁlter, select,
or otherwise modify the content that it ultimately presents.
This transition in content raises serious concerns about privacy,
as arbitrary personal information may be required to enable
personalized content, and a conﬂuence of factors has made it
difﬁcult for users to control where this information ends up,
and how it is used.
Because personalized content presents proﬁt opportunity,
businesses have incentive to adopt
it quickly, oftentimes
without user consent. This creates situations that many users
perceive as a violation of privacy. A prevalent example of
this is already seen with online targeted advertising, such as
that offered by Google AdSense [11]. By default, this system
tracks users who enable browser cookies across all web sites
that choose to partner with it. This tracking can be arbitrarily
invasive as it pertains to the user’s behavior at partner sites,
and in most cases the user is not explicitly notiﬁed that the
content they choose to view also actively tracks their actions,
and transmits it to a third party (Google). While most services
of this type have an opt-out mechanism that any user can
invoke, many users are not even aware that a privacy risk
exists, much less that they have the option of mitigating it.
As a response to concerns about individual privacy on the
web, developers and researchers continue to release solutions
that return various degrees of privacy to the user. One well-
known example is the private browsing modes available in
most modern browsers, which attempt to conceal the user’s
identity across sessions by blocking access to various types of
persistent state in the browser [1]. However, a recent study [1]
demonstrated that none of the major browsers implement this
mode correctly, leading to alarming inconsistencies between
user expectations and the features offered by the browser.
Even if private browsing mode were implemented correctly, it
inherently poses signiﬁcant problems for personalized content
on the web, as sites are not given access to the information
needed to perform personalization.
Others have attempted to build schemes that preserve the
privacy of the user while maintaining the ability to person-
alize content. Most examples [10, 14, 19, 34] concern targeted
advertising, given its prevalence and well-known privacy im-
plications. For example, both PrivAd [14] and Adnostic [34]
are end-to-end systems that preserve privacy by performing
all behavior tracking on the client, downloading all potential
advertisements from the advertisor’s servers, and selecting the
appropriate ad to display locally on the client. Although these
systems differ in details regarding accounting and architecture,
they share a basic strategy for maintaining user privacy: keep
sensitive information local to the user, to simplify the matter
of control.
The goal of REPRIV is to enable general personalized
content on the web in a privacy-conscious manner. Like
PrivAd and Adnostic, REPRIV does this by keeping all of
the sensitive information necessary to perform personalization
close to the user, within the browser. However, REPRIV
differs from these systems both technically and in the notion
of privacy it considers. Because REPRIV does not target a
speciﬁc application, it does not attempt to completely hide all
personal information from the party responsible for providing
personalized content. Aside from the improbable technical
advances needed to make such a system practical, it is not
clear that content providers would take part in such a scheme,
as they would loose access to the valuable user data that they
currently use to improve their products and increase efﬁciency.
Rather, REPRIV leaves it to the user to decide which parties
may access the various types of data stored inside the browser,
and manages dissemination accordingly in a secure manner.
We posit that expecting the user to make this decision is not
only reasonable, but necessary given the constraints discussed
above. The basis of this decision must be two-fold, depending
both on the trust the user has in the content provider, as
well as the incentive the content provider gives the user for
access to his data. However, this type of decision is ultimately
similar to the type of decision a user makes when signing up
for an account at Amazon.com or Netﬂix.com: if she agrees
to the terms in the privacy policy, then he has deemed the
beneﬁt offered by that site worth the reduction in personal
privacy needed to obtain it. This is the same negotiation
that REPRIV relies on to protect user privacy while still
enabling a diverse set of personalized applications. Thus, the
challenge of REPRIV is to facilitate the collection of personal
information from the browser in a manner ﬂexible enough
to enable existing and future personalized applications, while
maintaining explicit user control over how that information is
used and disseminated to third parties on the web.
There are legitimate concerns as to whether users will pro-
vide meaningful policy guidance when prompted at run time.
First, we point out that interface design for policy prompts
is a very active area of research, and recent results [20]
indicate that well-thought out prompt design can signiﬁcantly
improve user comprehension of policy implications. As to
whether users will simply be annoyed by repeated prompts for
permission, potentially leading them to authorize all accesses,
we assert that careful use of general policies, and limited use
of prompts, can minimize this issue.
For example, advocacy groups (e.g. the Electronic Freedom
Foundation [8]) could provide automatic policies based on
known trusted or untrusted domains, in a manner similar to the
DNS-based block lists (DNSBLs) provided free of charge to
the public [5]. Thus, if the user trusts the third-party advocacy
group or policy provider, a large number of prompts can be
avoided.
Our philosophy in REPRIV is to minimize user involvement
whenever possible. We point out that we only rely on users to
be able to understand simple contextual prompts; we do not
expect users to understand miner security policies described
in Section IV.
B. Motivating Personalization Scenarios
Several applications drove the development of REPRIV. We
brieﬂy discuss a sampling of them in this section.
Content Targeting: Commonplace on many online merchant
web sites is content targeting: the inference and strategic place-
ment of content likely to compel the user, based on previous
behavior. Although popular sites such as Amazon.com and
Netﬂix.com already support this functionality without issue,
the amount of personal information collected and maintained
by these sites have real implications for personal privacy that
may surprise many users [26]. Additionally, the fact that the
personal data needed to implement this functionality is vaulted
on a particular site is an inconvenience for the user, who
would ideally like to use their personal information to receive
a better experience on a competitor’s site. By keeping all of
the information needed for this application in the browser,
REPRIV can solve both problems. The content provider can
ask the user’s browser for data as it needs it, and the user
can accept or decline requests either programatically or via a
high-level policy.
Targeted Advertising: Advertising serves as one of the
primary enablers of free content on the web, and targeted
advertising allows merchants to maximize the efﬁciency of
their efforts. REPRIV should facilitate this task in the most
direct way possible by allowing advertisers to consult the
user’s personal information in a consentual manner. Advertis-
ers have incentive to use the accurate data stored by REPRIV,
rather than collecting their own data, as the browser-computed
interests are more representative of the user’s complete brows-
ing behavior. Additionally, consumers are likely to select
businesses who engage in practices that do not seem invasive
or threatening.
C. Personalization Extensions
While the core mining mechanism in REPRIV is meant to
be as general-purpose as possible, the pace at which new per-
sonalized web applications is appearing suggests that REPRIV