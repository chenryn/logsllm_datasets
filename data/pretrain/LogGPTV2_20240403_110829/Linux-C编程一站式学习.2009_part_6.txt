因而
但实际
下一
---
## Page 38
[2] 读者可能会奇怪,
普通字符，
符。
小程序试验-
1、总结前面介绍的转义序列的规律，想想在printf的格式化字符串中怎么表示一个%字符？写个
1. 继续Hello World
上一页
_Trigraph极不常用，
普通字符转特殊字符，
在某些特殊的终端上缺少某些字符，
 为什么需要规定一个转义序列\?呢？因为C语言规定了一些三连符
 介绍这个只是为了让读者理解C语言规定转义序列的作用，
?也是-
全国嵌入式人才培训基地
一种特殊字符。
起始页
极不常用的C语法在本书中通常不会介绍。
例如用??=表示#字
即特殊字符转
3.变量
下一页
8
---
## Page 39
3.变量 请点评
变量是用来存什么的。而像下面这样起名就很好：
作double型的转换说明。给变量起名不能太随意，上面四个变量的名字就不够好，我们猜不出这些
用double类型,
浮点型有三种，
型：
常量有不同的类型，
变量（Variable）是编程语言最重要的概念之一，
L二
页
char
char
char fred;
lastletter;
 firstletter;
一个值（Value）
，float是单精度浮点型，
在中也可以出现在所有之外。
明和语句是有区别的，语句只能出现在凸括号中，而声明既可以出现
示相同的含义。声明和语句类似，也是以;号结尾的，
叫"类型定义"听起来也不错，
始我们会看到类型声明，
学到第2节“定义和声明"我们会看到哪些变量声明不分配存储空间因
章的示例代码中变量声明都是要分配存储空间的，
也可以称为定义（Definition）
种。如果一个变量或函数的声明要求编译器为它分配存储空间，那么
C语言中的声明（Declaration）有变量声明、函数声明和类型声明三
声明和定义请点评
万不是定义。
分配存
，因此变量也有不同的类型，变量的类型也决定了它所占的存储空间的大小。例
储空间的函数声明可以称为函数定义。
，在下一章我们会看到函数的定义和声明也是这样区分
存储的值是可以随时变的，比如这次存个字符a·下次存个字
第 2 章 常量、变量和表达式
，double是双精度浮点型，long double是精度更高的浮点
，声明一个类型是不分配存储空间的，
全国嵌入式人才培训基地
所以在本书中"类型定义"和“类型声明"表
3.变量
因此定义是声明的一种。在接下来几
 变量是计算机存储器中的一块命名的空间，
、从第7章结构体开
因而都是定义，
，但是在语法上声
等
，可以
下一
8
贝
---
## Page 40
2.常量
Practice）是要尽量避免这种情况，这才算是真正理解了。
于这个概念，什么情况不属于这个概念，什么情况虽然属于这个概念但一般推荐的做法（Best
请记住：理解一个概念不是把定义背下来就行了
以免造成命名冲突。
以下划线开头的标识符，所以除非你对编译器和C标准库特别清楚，
和C语言关键字冲突的都是合法的，
还有一点要注意，
union unsigned void volatile while _
register restrict return short signed sizeof static struct switch typedef
auto break case char const continue default do double
要小心一点通常不会误用作标识符。C99规定的关键字有：
在C语言中有些单词有特殊意义，
另外要注意,
标识符 （ldentifier)
序员起名的语法元素
干个字母、数字、下划线,
给变量起名有一定的限制，
名字。从这个例子中我们也看到两个相同类型的变量（hour和minute）可以一起声明。
量hour的取值范围应该是0~23,
我们可以猜得到这些变量是用来存什么的，前两个变量的取值范围应该是'A'～'z'或'a'～'z，
（Reserved Word）
一页
一般来说应避免使用以下划线开头的标识符,
例如以后要讲的函数名、宏定义、结构体成员名等，在C语言中这些统称
但不能有其它字符。例如这些是合法的变量名：Abc、
，C语言规定必须以字母或下划线_
，变量minute的取值范围应该是0~59，所以应该给变量起有意义的
，不允许用作标识符，
 但是往往被编译器用作一些功能扩展，C标准库也定义了很多
全国嵌入式人才培训基地
Bool
其实这个规则不仅适用于变量名，
_Complex _Imaginary 
起始页
上一级
一定要理解它的外延和内涵，
（Underscore）开头，
，以下划线开头的标识符只要不
一般应避免使用这种标识符，
，也适用于所有可以由程
但也不能用作标识符，
，也就是什么情况属
_abc_
后面可以跟若
4.赋值
下一页
变
---
## Page 41
给它初始化所达到的效果是一样的，C语言的很多语法规则既适用于赋值也适用于初始化，
注意变量一定要先声明后使用，
现：
定义了变量之后，我们要把值存到它们所表示的存储空间里，可以用赋值（Assignment）语句实
4.赋值请点评
空
如果在纸上"跑"一个程序（每个初学编程的人都要练这项基本功）
后的学习中你也会了解到它们之间的不同，请在学习过程中注意总结赋值和初始化的相同和不同之
殊的声明,
在初始化语句中，等号右边的值叫做lnitializer，
样写：
在数学上a=7和7=a是一样的，
中表示把变量i的存储空间中的值取出来，再加上1,
和1+1=2的等号是不同的，
变量名，
一块存储空间并给它命名；
间，在框的外边标上变量名，在框里记上它的值，如下图所示。
L二
firstletter
图 2.1.在纸上表示变量
minute = 59;
int
各自代表一块存储空间。
firstletter 
int
而不是一种赋值语句。就目前来看,
hour
hour!
11;
 11,minute
L
hour
这里的等号表示赋值。在数学上不会有i=i+1这种等式成立，
给-
，而在C语言中后者是不合法的。总结一下：
minute
，编译器必须先看到变量声明，
59
，另外，
1*
￥
set minute to 59
第 2章 常量、变量和表达式
全国嵌入式人才培训基地
，变量声明中的类型表明这个变量代表多大的一块存储空
4.赋值
就是把-
先定义一个变量再给它赋值和定义这个变量的同时
 例如上面的'a'、11和59。注意，初始化是一种特
value
，得到的结果再存回i的存储空间中。再比如,
一个值保存到这块存储空间中。
，这里的等号不表示数学里的相等关系
 to hour
，可以用一个框表示变量的存储
正X-
变量的定义和
而在C语
就是分配
但在以
下一
山
---
## Page 42
3.变量
规定，将在第15章数据类型详解详细讨论。
同类型的变量所占的存储空间大小是不同的,
变量名用在等号左边表示赋值，而用在printf中表示把它的存储空间中的值取出来替换在那里。不
用printf打印：
既然可以为变量的存储空间赋值，就应该可以把值取出来用，现在我们取出这些变量的值
注意第3个语句，把"59．赋给minute看起来像是对的，但是类型不对，字符串不能赋给整型变量。
果所赋的值和变量的类型不符会导致编译器报警告或报错（这是一种语义错误），例如：
你可以用不同形状的框表示不同类型的变量,
（Byte）
T
一页
printf("Current time is %d:%d", hour, minute);
minute
hour 
在C语言中char型变量占-
........
"59"
全国嵌入式人才培训基地
个字
WRONG
数据表示方式也不同，
这样可以提醒你给变量赋的值必须符合它的类型。如
起始页
上一级
其它类型的变量占多少字节在不同平台上有不同的
！！
，变量的最小存储单位是字节 
5.表达式
下一页
---
## Page 43
minute的值，再算左边的等号，即把这个值再赋给变量total。同样优先级的运算符是从左到右计
是从右到左计算，
等号运算符还有-
以这个表达式的值和nour＊60＋minute的值相同，也和total_minute的值相同。
任何表达式都有值和类型两个基本属性。hour *
右边的结果然后才做赋值操作，
这个语句就很有意义，
得到的计算结果却没有保存，白算了
这是个合法的语句，
式语句。例如：
前面讲过打印语句和赋值语句，现在我们定义：在任意表达式后面加个;号也是一种语句，称为表达
如(3+4)*5/6应先算3+4，再算*5，再算/6。
和数学上规定的一样，
5.表达式 请点评
型也是int,
来的，
语句。
一优先级的运算从左到右计算，如果不希望按默认的优先级计算则要加()括号（Parenthesis）。
个由运算符和操作数所组成的算式称为表达式（Expression）。
里的+－*/称为运算符（Operator）
常量和变量都可以参与加减乘除运算，
上一页
，称为赋值运算符，
 所以这个表达式的类型也是int型。
total
total_minute 
int total_minute;
hour * 60 + minute;
，它的值是多少呢？C语言规定等号运算符的计算结果就是等号左边被赋予的那个值，
例如：
一个和+－＊/不同的特性，如果一个表达式中出现多个等号，不是从左到右计算而
但这个语句在程序中起不到任何作用，把hour的值和minute的值取出来加乘，
赋值语句就是一种表达式语句，等号的优先级比+和*都低，所以先算出等号
，把计算结果保存在另一个变量total_minute里。事实上等号也是一种运算
hour：
 hour * 60 + minute;
*和/是同一优先级，
＊60+minute这个表达式应该先算乘再算加，
：整个表达式total_minute= hour＊60＋minute加个;号构成一
=hour * 60 + minute;
了一通。再比如：
第 2章 常量、变量和表达式
“而参与运算的常量和变量称为操作数（Operand），上面四
全国嵌入式人才培训基地
同理，
5.表达式
+和-是同一优先级，
＊60＋minute的值是由三个int型的操作数计算出
表达式total_minute=hour ＊ 60＋minute的类
*和/的优先级高于+和-。对于同
也就是说运算符是有优
43
下一
+
贝
---
## Page 44
据语法树生成相应的指令。语法树的末端的是一个个Token，每一步展开利用一条语法规则。
编译器在翻译这条语句时，
用printf打印常量或变量的值，现在可以用printf打印更复杂的表达式的值，例如：
表达式可以是单个的常量或变量，
列的语法规则并没有描述运算符的优先级和结合性。完整的C语法规则请参考[C99]的Annex A。
注意，
语句→printf表达式，表达式，表达式,..
表达式→表达式=表达式
表达式
表达式
表达式→
表达式→标识符
现在我们总结一下到目前为止学过的语法规则：
算还是从右到左计算称为运算符的结合性（Associativity）。+－＊/是左结合的，等号是右结合的。
（=Initializer的部分可以不写）
语句→表达式;
表达式→表达式/
表达式
表达式-
表达式
 本书所列的语法规则都是简化过的，
printf
图 2.2.语法树
→表达式*表达式
→表达式－表达式
minute);
常量
表达式+表达式
(表达式)
字符串字面值
printf("%d:%d is %d minutes after 00:00\n'
ulo:oo Jae sanujw p% s! p%:p%
"%d:%d is %d minutes after 00:00\n"
丨表达式
字符串字面值
，首先根据上述语法规则把这个语句解析成下图所示的语法树，然后再根
表达式
，也可以是根据以上规则组合而成的更复杂的表达式。以前我们
是不准确的，
hour
标识符
hour
达式
our,
minute, hour * 60 + minute);
目的是为了便于初学者理解，比如上面所
minute
标识符
minute
hour*60 +
表达式
表达式
60
minute
标识符
minute
表达式
minute
---
## Page 45
作符为负的时候相当于Ceiing。回到先前的例子，
数轴上向零的方向取整（Truncate toward Zero）
在C语言中整数除法取的既不是Floor也不是Ceiling，无论操作数是正是负总是把小数部分截掉，
向下取整的运算称为Floor，
为int型，只能保存计算结果的整数部分，即使小数部分是0.98也要舍去。
执行结果是1l andＯhours，
关于整数除法运算有一点特殊之处：
b)这个表达式不能再做左值了，因此放在=é的等号左边是错的。
c的值，
我们看一个有意思的例子，
做左值的表达式还有几种，
达式所表示的存储位置称为左值（lvalue）
等号左边的表达式要求表示一个存储位置而不是一个值，这是等号运算符和+－＊/运算符的又-
根据语法规则组合出来的表达式在语义上并不总是正确的，例如：
带来困难。
则时会进一步体会到这一点。从上面的例子可以看出，表达式不宜过度组合，否则会给阅读和调试
我们才可以用简单的常量、变量、表达式、语句搭建出任意复杂的程序，
理解组合（Composition）规则是理解语法规则的关键所在，
能：
根据这些语法规则进一步组合可以写出更复杂的语句，比如在一条语句中完成计算、赋值和打印功
台
也称为右值（rvalue）（只能放在等号右边）
能表示存储位置，
-59/60
-59/60
59/60
59/60
也可以做右值，
表示。
再把这个值赋给a,
printf("%d and %f hours\n", hour, minute / 60.0);
:(09
printf("%d and %d hours\n", hour, minute / 60);
minute + 1 = hour;
hour = 11;
total_minute 
!
=0
，例如：
，而有的表达式只能做右值。
，例如minute＋1这个表达式就不能表示存储位置，
59;
= hour
，如果定义三个变量int a，b，，
用数学符号
而表达式(a = b）= c是不合法的，
以后会讲到。
，也就是说59/60得0，这是因为两个int型操作数相除的表达式仍
60
+ minute);
表示；向上取整的运算称为Ceiing，用数学符
目前我们学过的表达式中只有变量可以做左值，可以
。上面的话换一种说法就是：有的表达式既可以做左
，要得到更精确的结果可以这样：
，表达式a=b= c是合法的，先求b 
 正因为可以根据语法规则任意组合，
，先求(a = b)的值没问题，但(a =
而以前我们所说的表达式的值
，放在等号左边是语义错误。
而有的表达式只能表示值，
，以后我们学习新的语法规
4
一个
表
在
L
1
---
## Page 46
是5；x是16，n是4，则结果是4。
结果是4。如果希望结果取Ceiling应该怎么写表达式呢？例如x是17，n是4，
习题 请点评