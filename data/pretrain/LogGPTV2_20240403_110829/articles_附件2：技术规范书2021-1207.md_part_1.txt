**2021年广东公司新一代BSS-智能日志中心软件开发项目**
**技术规范书**
**中国电信广东公司**
**版权所有**
**简介**
## **目的**
本文档用于描述项目实施的总体技术要求。
## **范围**
本规范书适用于2021年广东分公司新一代BSS-智能日志中心软件开发项目，为项目开发人员，测试人员，运维人员提供技术指导。
## **定义和缩略语**
  ---------- ------------------------------------------------------------------------------------------
  **术语**   **解释**
  物理机     物理机是指一台独立的服务器设备，往往一台物理机上部署多个主机（虚拟主机）
  主机       主机一般指具有独立操作系统的服务器，一个主机通常可以对应一台虚拟机
  仪表盘     仪表盘可以看作是主机类型与指标的关系表，主机类型通过仪表盘可以找到对应的各项指标来展示。
  beaver     智能日志中心搜索引擎
  spl        智能日志中心可编程搜索语言
  ---------- ------------------------------------------------------------------------------------------
## **参考资料**
《2020-2022年中国电信IT系统和数据安全规划和IT安全能力建设规范（试行）》
# **项目建设要求**
## **背景**
当前已实现对广东公司业务系统运维和安全日志数据的统一集中、规范管理与基于运维数据进行统一的分析统计及关系分析，如故障快速查询定位、业务预警、CRM平台统一调用查询、安全分析等，使安全分析能力和运维技能得到极大提升。
但随着业务的不断发展，需求不断演变，对新一代BSS智能日志中心的要求也不断增加，各部门在使用过程中也持续提出业务和安全数据采集和分析扩大需求。
**业务目标：**
1.  黄金指标体系建设：对标HBAT，利用大数据平台梳理并构建适合电信业务关键场景的PaaS、SaaS、IaaS黄金指标体系
2.  按照集团安全规范要求场景增加数据接入范围，新增省公司全部主机数据接入及分析能力；完善安全运营管理模块，通过平台与资产、情报、漏洞数据的关联功能实现安全运营的闭环处理。
**平台效益：**
-   满足集团规范实现主机数据的接入和分析；
-   通过梳理适用于电信的黄金指标体系，提升故障定位效率。
## **建设原则**
2.3.1整体安全
对可能造成主机信息安全泄漏的各种途径进行全方位管理控制，以实现整体安全为设计原则。
2.3.2智能预警
对各种违规行为进行有效预警、分析，增强的联动策略设置和响应，并允许客户定制增强功能，系统可自动处理安全信息事件。
2.3.3标准开放
可提供标准api接口给其他平台使用，将原始日志信息，或统计结果，告警信息，发送给第三方平台。
2.3.4人性设计
系统的可维护性及易操作性。系统的部署整体上采用B/S架构，简化了客户端电脑载荷，减轻了系统维护与升级的成本和工作量，降低了用户的总体成本；系统界面简洁，层次分明，操作简易。
2.3.5扩展性
本系统在设计时遵循可扩展性原则。支持多区域数据采集，对未来日益增加的数据量，支持横向扩展，只需要增加服务器数量即可满足。
## **建设步骤**
系统建设主要分为以下几部分进行：
1.  需求分析
> 分析2021年广东公司BSS-智能日志中心软件开发项目需求
2.  总体方案设计
> 分析2021年广东公司BSS-智能日志中心优化软件开发项目需求,编写总体实现方案
3.  系统功能开发
> 根据实现方案,开发相关功能
4.  系统功能测试
5.  系统上线测试。
6.  验收测试，生产部署
> 编写系统安装、操作手册、维护手册
7.  系统上线
## **系统总体结构**
![](media/image1.png){width="5.772222222222222in"
height="3.645138888888889in"}
如上图所示，智能日志中心采用分布式计算方式，各模块之间都是项目独立并支持横向扩展,其中主要模块有：
数据采集：通过syslog、snmp、agent代理、ODBC、HTTP、FTP等方式采集安全日志
数据ETL：通过对原始日志的字段提取、规范化、字段和内容替换、字段和内删除、字段和内重命名、原始日志修改以及时间规范化等操作将安全日志进行归并操作使其满足规范化要求
数据引擎：提供数据分析算子、数据搜索、可视化分析等功能
数据分析：利用算子建造模型，通过模型完成安全日志分析事件和告警输出
## **系统组网方案**
![](media/image2.png){width="4.686805555555556in"
height="3.7680555555555557in"}
## **项目进度要求**
  ------ -------------- ------------------------------------ --------------
  序号   关键点         任务说明                             计划完成时间
  1      日志调研       完成日志调研工作                     T+1
  2      日志接入       部署agent采集云化系统和主机的日志    T+5
  3      日志解析       对采集的日志进行字段提取             T+10
  4      日志场景实现   对不同的日志实现不同的场景           T+20
  5      功能完善迭代   上线一段时间内逐步补充完善功能细节   T+4
  ------ -------------- ------------------------------------ --------------
T为签合同的时间节点
# **总体技术要求**
## **系统设计原则**
3.1.1整体安全
对可能造成主机信息安全泄漏的各种途径进行全方位管理控制，以实现整体安全为设计原则。
3.1.2智能预警
对各种违规行为进行有效预警、分析，增强的联动策略设置和响应，并允许客户定制增强功能，系统可自动处理安全信息事件。
3.1.3标准开放
可提供标准api接口给其他平台使用，将原始日志信息，或统计结果，告警信息，发送给第三方平台。
3.1.4人性设计
系统的可维护性及易操作性。系统的部署整体上采用B/S架构，简化了客户端电脑载荷，减轻了系统维护与升级的成本和工作量，降低了用户的总体成本；系统界面简洁，层次分明，操作简易。
3.1.5扩展性
本系统在设计时遵循可扩展性原则。支持多区域数据采集，对未来日益增加的数据量，支持横向扩展，只需要增加服务器数量即可满足。
# **应用软件要求** 
## **系统体系结构要求**
![](media/image3.png){width="5.772222222222222in"
height="4.020833333333333in"}
##  **业务功能要求-日志解析**
日志数据录入系统以后，支持自动识别日志的换行规则，并可自定义配置换行规则。数据清洗完成后按照云化改造系统的要求、安全规范中主机分析场景的要求分别进行分析场景的建设。
### **日志规则**
日志数据录入系统以后，支持自动识别日志的换行规则，并可自定义配置换行规则。
### **日志分析场景**
根据安全管理规范开发主机日志的安全分析场景。
## **业务功能要求-指标体系管理**
对电信的各类系统关键指标进行梳理，形成可视化管理界面，并根据依赖关系配置模块实现数字孪生展示，并通过指标时序化统计处理还原指标过程。
### **指标体系管理界面**
提供指标管理界面，对指标进行细致分类，明确指标从属关系以及监控状态，可随时调取指标的监控情况和历史数据。
### **数字孪生关系模块**
支持根据指标的关联关系、依赖关系进行定义和权重的分配，并自动生成依赖关系视图。
### **指标时序化统计**
将指标按照时间顺序进行分桶统计，通过图形化的形式将指标运行状态在时许上进行还原。
## **业务功能要求-安全运营管理**
支持完整闭环的安全运营管理，提供运营管理界面，支持威胁检测发现并联动情报、漏洞、资产信息对安全事件进行分析，利用联动处置和任务管理模块实现安全运营的闭环流程。
### **安全运营管理界面**
提供安全运营整体界面，展示周期性的安全态势状态以及各类威胁事件的关键信息，并支持展示资产、情报、漏洞、任务、联动模块的状态和配置管理。
### **威胁检测规则引擎**
提供威胁检测引擎，通过内置规则实现安全事件的检测，并将情报、漏洞、资产等相关信息关联展示，通过攻击链、时间轴等方式进行攻击过程溯源。
### **情报管理模块**
提供情报对接接口，支持对接主流厂家的在线、离线情报，提供界面手动查询IP信息，并与威胁检测事件进行关联。
### **漏洞管理模块**
提供漏洞报告导入接口，支持对接主流厂家的漏洞扫描报告，提供界面管理报告内容，并与威胁检测事件进行关联。
### **资产管理模块**
提供资产管理模块，支持CSV导入或流量扫描的方式新增资产，支持资产的增删改配置，并与威胁检测事件进行关联。
### **任务管理模块**
提供任务管理模块，可在威胁检测界面进行新建任务触发，配备任务管理界面，支持安全任务的处理时间、处理状态等信息管理。
### **联动处置模块**
提供可视化自定义编排的联动处置模块，通过拖、拉、拽的形式创建处理流程，处置模块支持统计、判断、执行的功能，可实现安全事件从发现到处理闭环全自动流程。
## **系统管理要求**
### **系统审计**
系统应具有完备记录,操作日志、系统日志等,留存日志应满足审计的需要。
### **系统自监控管理**
支持界面化监控日志集群各模块的性能状态,支持各模块告警自动发现;支持界面化升级软件版本、自动下发新增机器安装包,支持界面化模块参数配置。
## **系统接口要求**
### **接口原则**
需提供丰富api接口给外部系统调用，最大化发挥运维日志数据价值。主要功能要求：
1.  配置类API包括，字段提取规则映射API，告警配置API，agent采集配置API，用户管理API，资源分组API，运维日志数据来源API。
2.  搜索类API包括，上下文查询API，下载任务API，搜索API。
### **系统外部接口**
  ---------- ------------------ ---------------- ---------------- ----------------
  **序号**   **服务名称**       **接口方式**     **服务调用方**   **服务提供方**
  1          密码认证接口       HTTP             接入应用系统     智能日志中心
  2          短信获取接口       HTTP             接入应用系统     智能日志中心
  3          短信验证接口       HTTP             接入应用系统     智能日志中心
  4          告警接口           syslog、HTTP     接入应用系统     智能日志中心
  ---------- ------------------ ---------------- ---------------- ----------------
## **非功能性要求**
### **性能要求**
日志采集做到准实时显示，延迟\< 10秒
Agent采集端对应用的性能影响\<1%
### **维护性要求**
支持界面上传agent升级包
根据分组选择过滤显示同组的Agent
更新agent所属分组
根据agent的IP地址过滤显示