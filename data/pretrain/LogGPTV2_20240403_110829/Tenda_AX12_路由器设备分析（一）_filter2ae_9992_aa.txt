# Tenda AX12 路由器设备分析（一）

##### 译文声明
本文为翻译文章，仅供参考。具体内容及含义以原文为准。

## 0x01 前言
首先感谢Tenda提供的AX12路由器评测机会及其设备支持。本文将介绍如何对路由器进行设备分析，并在过程中需注意的关键点，特别是在Tenda设备上通过UART串口获取shell的方法。

## 0x02 Tenda AX12 硬件分析

### 外观设计
Tenda AX12路由器采用塑料外壳，表面处理呈现出金属质感。中间的金色logo在灯光下显得尤为美观。该款路由器外壳坚固耐用，在日常使用中不易因外部撞击而变形。整机配备四根天线，据官方说明，支持5G和2.4G WiFi信号。但从外观上无法确定5G天线的具体数量。此外，这款路由器仅设有一个LED状态指示灯，与传统路由器相比简化了WiFi、LAN口、WAN口及电源等独立的状态指示灯设置。

### 拆解过程
拆卸Tenda AX12相对容易，只需拧开背面两颗梅花螺丝后，利用塑料卡片沿边缘轻轻撬动即可取下顶部盖板。此时可看到内部开发板。移除最外层散热片但保留金属屏蔽罩未拆，从开发板上可以识别出一个疑似串口以及SOP8封装的闪存芯片。进一步观察发现两个分别负责2.4G和5G频段的WiFi芯片组，每个天线均对应单独的WiFi芯片，预示着良好的信号稳定性。

### 关键组件
- **1号芯片**：S0374L87 SLN23
- **2号芯片**：S0393N23 SLMQ3
- **3号芯片**：Winbond 25Q128JVSQ 2104
- **4号芯片**（位于2号下方）：ESMT M15T1G1664A

开发板右侧标注有“3v3”、“OUT”、“IN”、“GND”的接口被推测为用于调试的UART串口。根据UART标准定义，其引脚顺序应为：“VCC”、“TXD”、“RXD”、“GND”。

智能设备固件通常存储于无额外保护措施的Flash中。如果Flash与RAM、CPU分离，则更易于直接读取固件内容；反之若集成且启用加密功能，则提高了安全性。本例中重点关注的是Winbond 25Q128JVSQ 2104型号芯片，可通过查阅其数据手册获取详细信息。该芯片属于25系列SPI Flash，容量为128Mbit。

## 0x03 UART 接入方法
基于上述硬件分析结果，尝试通过FT232模块连接至疑似UART端口，按照TXD—> IN, RXD—> OUT, GND—> GND的方式接线。由于缺乏逻辑分析仪辅助确定波特率，因此先以常见值115200bps进行测试。使用SecureCRT软件查看通电后的启动日志，部分内容如下：

```
U-Boot 2016.07-INTEL-v-3.1.177 (Nov 25 2020 - 09:48:15 +0000)
...
Hit ESC to stop autoboot:  0 
...
[    0.000000] Linux version 4.9.206 (root@ubt1-virtual-machine) (gcc version 8.3.0 (OpenWrt GCC 8.3.0 v19.07.1_intel) ) #0 SMP Fri Nov 13 09:14:24 UTC 2020
...
[    0.000000] User-defined physical RAM map:
[    0.000000]  memory: 08000000 @ 20000000 (usable)
...
```

从日志第20行得知按下ESC键可以中断自动引导过程。第67行显示内核命令行参数包括固件类型为squashfs，波特率为115200bps以及其他初始化配置信息。第89行则提供了不同分区偏移量范围，据此可以从固件中提取特定区域的数据文件，如位于0x000000300000-0x000000f00000区间内的rootfs文件系统。