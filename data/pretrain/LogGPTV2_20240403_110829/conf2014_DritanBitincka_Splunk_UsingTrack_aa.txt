Copyright 
  © 
  2014 
  Splunk 
  Inc. 
Observa;ons 
  and 
Recommenda;ons 
  on 
Splunk 
  Performance
Dritan 
  Bi;ncka 
BD 
  Solu;ons 
  Architecture 
Disclaimer 
During 
  the 
  course 
  of 
  this 
  presenta;on, 
  we 
  may 
  make 
  forward-­‐looking 
  statements 
  regarding 
  future 
  events 
  or 
  the expected 
  performance 
  of 
  the 
  company. 
  We 
  cau;on 
  youcompany. 
  We 
  cau;on 
  you 
  that 
  such 
  statements 
  reflect 
  our 
  current 
  expecta;ons 
  and es;mates 
  based 
  on 
  factors 
  currently 
  known 
  to 
  us 
  and 
  that 
  actual 
  events 
  or 
  results 
  could 
  differ 
  materially. 
  For important 
  factors 
  that 
  may 
  cause 
  actual 
  results 
  to 
  differ 
  from 
  those 
  contained 
  in 
  ourthose 
  contained 
  in 
  our 
  forward-­‐looking 
  statements, please 
  review 
  our 
  filings 
  with 
  the 
  SEC. 
  The 
  forward-­‐looking 
  statements 
  made 
  in 
  the 
  this 
  presenta;on 
  are 
  being 
  made 
  as of 
  the 
  ;me 
  and 
  date 
  of 
  its 
  live 
  presenta;on. 
  If 
  reviewed 
  aRer 
  its 
  live 
  presenta;on, 
  this 
  presenta;on 
  maythis 
  presenta;on 
  may 
  not 
  contain current 
  or 
  accurate 
  informa;on. 
  We 
  do 
  not 
  assume 
  any 
  obliga;on 
  to 
  update 
  any 
  forward-­‐looking 
  statements 
  we 
  may make. 
  In 
  addi;on, 
  any 
  informa;on 
  about 
  our 
  roadmap 
  outlines 
  our 
  general 
  product 
  direc;on 
  and 
  is 
  subject 
  to 
  change at 
  any 
  ;me 
  withoutchange at 
  any 
  ;me 
  without 
  no;ce. 
  It 
  is 
  for 
  informa;onal 
  purposes 
  only, 
  and 
  shall 
  not 
  be 
  incorporated 
  into 
  any 
  contract 
  or other 
  commitment. 
  Splunk 
  undertakes 
  no 
  obliga;on 
  either 
  to 
  develop 
  the 
  features 
  or 
  func;onality 
  described 
  or 
  to include 
  any 
  such 
  feature 
  or 
  func;onality 
  infeature 
  or 
  func;onality 
  in 
  a 
  future 
  release. 
2 
About 
  me 
  Member 
  of 
  BD 
  Solu;ons 
  Architecture 
  team   Large-­‐scale 
  deployments 
  Cloud 
  and 
  Big 
  Data 
  Fourth 
  .Conf 
Agenda 
  Performance 
  & 
  BoWlenecks 
  Understanding 
  Indexing 
–Index-­‐;me 
  pipelines 
–Index 
  tes;ng 
  Understanding 
  searching 
  in 
  isola&on 
  &searching 
  in 
  isola&on 
  & 
  under 
  indexing 
  load –Types 
  of 
  searches 
–Mixed 
  workload 
  impact 
  on 
  resources 
  Best 
  prac;ces 
  & 
  recommenda;ons 
4 
Typical 
  “my 
  Splunk 
  is 
  not 
  performing 
  well” 
  Conversa;on 
A: 
  My 
  Splunk 
  is 
  slow. 
B: 
  Okay, 
  so 
  what exactly 
  is 
  slow? 
A: 
  I 
  dunno, 
  it 
  just 
  feels slow…maybeit 
  just 
  feels slow…maybe 
  I’ll 
  just get 
  some 
  flash 
  drives.  
5 
Splunk 
  is 
  a 
  system 
  with 
  various 
  boWlenecks that 
  manifest 
  themselves 
  differently 
depending 
  on 
  the 
  nature 
  of 
  workloads. 
-­‐ 
  Winston 
  Churchill 
6 
Iden;fying 
  performance 
  boWlenecks 
|  |  |
|---|---|boWlenecks 
|  |  |
|---|---|
|   Understand    data    flows  | Ingest                                (Indexing)  Splunk    >  Consume                                (Search)   |
| 	–Splunk opera;ons pipelines    Instrument  	–Enable    metric    capturing    for    all 	relevant    opera;ons    Run    tests    Draw    conclusions  	–Chart    and    table    metrics,    looks    for 	emerging    paWerns    Make    recommenda&ons  | Ingest                                (Indexing)  Splunk    >  Consume                                (Search)   |7 
Put 
  that 
  in 
  Your 
  Pipeline 
  and 
  Process 
  It
| Input  | UTF-­‐8  | Line 
  Breaker  | Header  | Output  |
|---|---|---|---|---|
| Input  |Converter  |Line    Breaker  |Extrac;on  |Output  |
Pipeline 
Data 
Splunk 
  data 
  flows 
  thru 
  several 
  such 
  pipelines 
  before 
  it 
  gets 
  indexed 
8 
Index-­‐Time 
  Pipelines 
LINE_BREAKER  SHOULD_LINEMERGE  TRANSFORMS-­‐xxx| TRUNCATE  | BREAK_ONLY_BEFORE  | SEDCMD  |
|---|---|---|
| TRUNCATE  |BREAK_ONLY_BEFORE  |ANNOTATE_PUNCT  |
| TRUNCATE  |MUST_BREAK_AFTER  |ANNOTATE_PUNCT  |
TIME_* 
9 
Index-­‐Time 
  Processing 
Event 
Breaking  LINE_BREAKER 
   SHOULD_LINEMERGE 
MAX_TIMESTAMP_LOOKAHEAD 
  in 
  to 
  look 
  for 
  ts>
Timestamp Extrac;on  TIME_PREFIX 
TIME_FORMAT 
Typing  ANNOTATE_PUNCT 
10 
Tes;ng: 
  Dataset 
  A 
  10M 
  syslog-­‐like 
  events: 
  . 
  . 
  . 
  Sat, 
  06 
  Apr 
  2014 
  15:55:39 
  PDT 
  Sat,  
  Sat, 
  06 
  Apr 
  2014 
  15:55:40 
  PDT 
  Sat, 
  06 
  Apr 
  2014 
  15:55:41 
  PDT 
  . 
  . 
  . 
  Push 
  data 
  thru: 
	–Parsing 
  > 
  Merging 
  > 
  Typing 
  Pipelines 	êSkip 
  Indexing 
	–Tweak 
  various 
  props.conf 
  sejngs 
  Measure  MLA: 
  MAX_TIMESTAMP_LOOKAHEAD 
  = 
  30 
TP:= 
  30 
TP: 
  TIME_PREFIX 
  = 
  ^ 
TF: 
  TIME_FORMAT 
  = 
  %a, 
  %d 
  %b 
  %Y 
  %H:%M:%S 
  %Z LM: 
  SHOULD_LINEMERGE 
  = 
  false 
AP: 
  ANNOTATE_PUNCT 
  = 
  false 
11 
Tes;ng 
  Disclaimers 
1. 
2. 
3. Tes;ng 
  conducted 
  on 
  arbitrary 
  datasets “Closed 
  course” 
  (lab) 