from Fig. 28, CIC significantly outperforms FTrack (by 4√ó), standard
LoRa (by 5√ó) and Choir. CIC is able to decode 45 Pkts/sec, 2√ó greater
than 22 Pkts/sec (the maximum possible for any single node) when
the aggregate network traffic is 100 Pkts/sec. Standard LoRa is able
to achieve a highest throughput of about 8 Pkts/sec, roughly one
third of 22 Pkts/sec (the maximum ). FTrack outperforms Standard
LoRa, achieving about 12 Pkts/sec when the aggregate rate is 50
Pkts/sec (25% of the offered load). However, at aggregate network
rates greater than 50 Pkts/sec, its performance degrades; this is due
to the increase in collisions, which in turn leads to higher chance of
collisions where majority of the packets overlap. In such scenarios,
FTRack fails to distinguish between the corresponding frequency
tracks due to its poor frequency resolution.
D2,D3 : High/Low SNR, NLoS. In this scenario as well, CIC sig-
nificantly outperforms FTrack, LoRa as well as Choir by 4√ó. CIC is
able to receive about 40 Pkts/sec, slightly less than the high SNR,
LoS scenario. Standard LoRa‚Äôs performance is consistent and almost
the same as that of high SNR scenario as it successfully captures the
higher SNR packets in case of a collision. As the authors of FTrack
themselves claim, Ftrack fails to detect packets with low SNR, es-
pecially in the presence of stronger transmitters. Consequently,
FTrack‚Äôs performance degrades in the low SNR scenario.
D4 : Wide Area Deployment - SubNoise, NLoS. This deploy-
ment stress tests every scheme the most as the received SNRs are
below noise levels. CIC‚Äôs performance really shines in this regime
providing almost 10√ó the throughput of standard LoRa. As expected
FTrack is unable to decode at these SNRs and completely fails. Choir
and Standard LoRa suffer heavy packet losses due to low SNR as
well as collisions. Curiously, the net throughput of LoRa increases
slightly at higher aggregate rates. This is because, the gateway
successfully captures more packets with higher signal strengths
and most of these packets are from a small subset of transmitters
whose aggregate rate also increases proportionally.
Conclusion. As seen from the above experiments, CIC outper-
forms FTrack as well as other schemes significantly (4√ó), especially
in wide area deployments where received signals strengths can be
below noise levels, where it achieves about 10√ó gains. This superior
performance of CIC stems from its interference cancellation mech-
anism guided by the Heisenberg‚Äôs Time-Frequency uncertainty
principle.
7.3 Preamble Detection Accuracy
Packet detection using preambles is the first and most crucial step
to decoding a packet. As discussed in Section 5.8, CIC modifies the
commonly used preamble detection using up-chirps to using down-
chirps. In this section we ask the question ‚ÄúHow does CIC‚Äôs packet
detection perform under packet collision scenarios and compare
against the conventional approaches?‚Äù Figs. 32, 33, 34, 35, show the
packet detection rate, the ratio of the number of packets detection
(not necessarily correctly decoded) to the total number of packets
transmitted, for each of the deployments and aggregate transmit
rates. We compare the detection performance of CIC to that of
FTrack and Standard LoRa. We are unable to compare the preamble
detection of Choir since the authors do not describe their pream-
ble detection in their paper; in the implementation of Choir, we
therefore assume standard LoRa-based packet detection for Choir.
512
CIC : Decoding Multi-Packet Collisions in LoRa
SIGCOMM ‚Äô21, August 23‚Äì28, 2021, Virtual Event, USA
Fig 27: SNR Distribution for
each of the deployments
Fig 28: Network Capacity for
D1 (High SNR, LoS)
Fig 29: Network Capacity for
D2 (High SNR, NLoS)
Fig 30: Network Capacity for
D3 (Low SNR, NLoS)
Fig 31: Network Capacity for
D4 (Outdoor, SubNoise SNR, NLoS)
Fig 32: Packet Detection :
D1 (High SNR, LoS)
Fig 33: Packet Detection :
D2 (High SNR, NLoS)
Fig 34: Packet Detection :
D3 (Low SNR, NLoS)
Fig 35: Packet Detection :
D4 (Outdoor, SubNoise SNR, NLoS)
D1: High SNR, LoS. As seen in Fig. 32, CIC outperforms FTrack
by a margin of about 20% steadily as the aggregate network traf-
fic (hence packet collision rate) increases. Standard LoRa‚Äôs packet
detection quickly suffers and degrades with aggregate packets trans-
mitted in the network.
D2: High SNR, NLoS. As SNR decreases, the packet detection rates
of both CIC and FTrack suffer, however, CIC still performs better
with a margin of over 20%.
D3: Low SNR, NLoS. As SNR decreases further, the packet detec-
tion rates of FTrack completely flounders and in fact falls below that
of standard LoRa for high aggregate network traffic scenarios. CIC
however, offers close to 80% detection even at very high aggregate
network traffic scenarios.
D4: SubNoise SNR, NLoS. In this deployment, FTrack is simply
unable to detect packets while standard LoRa has a detection rate of
about 5%. While CIC‚Äôs preamble detection performance decreases,
it still offers up to 80% in low traffic and 50% in very high traffic
scenarios.
Conclusions. Based on this analysis, using down-chirps as the
first step for packet detection significantly improves packet de-
tection rate under collisions and especially in low and sub-noise
SNR scenarios that are common to both indoor and outdoor LoRa
deployments in practice.
513
D1D2D3D4-20-1001020304050Mean SNR [dB]0102030405060708090100Aggregate Transmit Rate [Pkts/sec]01020304050Received Throughput [Pkts/sec]CICFTrackChoirStd LoRA0102030405060708090100Aggregate Transmit Rate [Pkts/sec]01020304050Received Throughput [Pkts/sec]CICFTrackChoirStd LoRA0102030405060708090100Aggregate Transmit Rate [Pkts/sec]01020304050Received Throughput [Pkts/sec]CICFTrackChoirStd LoRA0102030405060708090100Aggregate Transmit Rate [Pkts/sec]01020304050Received Throughput [Pkts/sec]CICFTrackChoirStd LoRA0102030405060708090100Aggregate Transmit Rate [Pkts/sec]020406080100Packet Detection Rate [%]CICFTrackStd LoRA0102030405060708090100Aggregate Transmit Rate [Pkts/sec]020406080100Packet Detection Rate [%]CICFTrackStd LoRA0102030405060708090100Aggregate Transmit Rate [Pkts/sec]020406080100Packet Detection Rate [%]CICFTrackStd LoRA0102030405060708090100Aggregate Transmit Rate [Pkts/sec]020406080100Packet Detection Rate [%]CICFTrackStd LoRASIGCOMM ‚Äô21, August 23‚Äì28, 2021, Virtual Event, USA
M. Osama, M. Phillipose, K. Chintalapudi, S. Banerjee, B. Krishnaswamy
Fig 36: Effect of Removing Various
Features from CIC for D1
Fig 37: Effect of Removing Various
Features from CIC for D4
Fig 38: Simulation study of CIC as two pack-
ets collide closer in time.
7.4 Effect of the additional features of CIC
As discussed in Section 2, existing works relies on grouping symbols
from the same transmitter by exploiting various discriminating
features that are distinct to transmitters such as received power and
CFO. As discussed in Section 5.7, CIC makes use of two additional
features ‚Äì Received Power and Carrier Frequency Offset (CFO), to
filter out candidate frequencies, when CIC is unable to cancel them
sufficiently. In this section we ask the question, How much do these
additional features contribute to the overall performance of CIC? To
this end, we use four different versions of CIC.
‚Ä¢ CIC : Implementation of CIC with both Received Power and
‚Ä¢ CIC-(CFO) :Implementation of CIC with only Received Power
‚Ä¢ CIC-(Power) : Implementation of CIC with only CFO i.e without
‚Ä¢ CIC-(Power, CFO) : Implementation of CIC without either Re-
i.e. without CFO as a discriminating feature.
CFO included as discriminating features.
Received Power as additional feature.
ceived Power or CFO as discriminating features.
Figs. 36 and 37 depicts the aggregate network throughput ob-
tained for each of these options in deployments D1 and D4 respec-
tively. D1 (High SNR, LoS) represents the easiest scenario for CIC
and D4 (Outdoor, SubNoise SNR, NLoS) the hardest. Thus, these
two represent the two extreme cases.
D1. As seen in Fig. 36, CIC gains by about 20% using both Received
Power and CFO as discriminating features. However, most of these
gains are due to the Received Power feature rather than CFO. Using
CFO helps CIC marginally, about 2%, whereas using Received Power
helps CIC by almost 18%.
D4. As seen from Fig. 37, even though the net achieved throughput
is lower, the relative gains (in %) due to each of these features is
almost the same.
Conclusion: Received power used as a feature helps CIC the most
and provides close to 18% gains. While CFO also assists CIC, it does
so rather modestly by about 1-2%.
7.5 Effect of Temporally Close Collisions
As discussed in Section 5.5, CIC can effectively cancel transmissions
whose symbol boundaries are far apart. In this section, we try and
understand how CIC is affected by the proximity of the interfering
symbol boundaries. Since synchronizing two COTS LoRa devices to
transmit within sample level accuracies is hard, we rely on simula-
tions. In our simulations, we generate packets with random bits and
generate raw signals as a LoRa transmitter would. Then we super-
impose two such packets with varying sub-symbol time offsets ( 0.1. As the two colliding packets are closer than 10% of the
ùëáùë†
symbol time, CIC starts to experience high SER.
8 CONCLUSION
In this work, we proposed Concurrent Interference Cancellation,
a novel demodulation technique at the LoRa receiver to decode
multiple colliding packets concurrently. CIC cancels out interfering
symbols by selecting the optimal set of sub-symbols. CIC incorpo-
rates prior work on LoRa packet collisions as additional features.
CIC implemented in real outdoor and indoor deployments using 20
COTA LoRa transmitters and USRP as gateway shows significant
improvements in network throughput performance compared to
standard LoRa receiver as well as state-of-the-art research works.
We show that CIC is robust to variations in SNR across LoRa de-
vices, making it suitable for practical LoRa deployments. This work
does not raise any ethical issues.
9 ACKNOWLEDGEMENTS
Suman Banerjee was supported in part through the following US
National Science Foundation(NSF) grants : CNS-1838733, CNS-
1719336, CNS-1647152, CNS-1629833, and CNS-2003129 and an
award from the US Department of Commerce with award number
70NANB21H043. Bhuvana Krishnaswamy and Muhammad Osama
Shahid were partially supported through the following NSF grants
: CCSS - 2034415.
REFERENCES
[1] LoRa. https://www.semtech.com/lora.
[2] E. Asimakopoulou and N. Bessis. Buildings and crowds: Forming smart cities for
more effective disaster management. In 2011 Fifth International Conference on
514
0102030405060708090100Aggregate Transmit Rate [Pkts/sec]05101520Received Throughput [kbps]CICCIC-(CFO)CIC-(Power)CIC-(Power,CFO)0102030405060708090100Aggregate Transmit Rate [Pkts/sec]0246810Received Throughput [kbps]CICCIC-(CFO)CIC-(Power)CIC-(Power,CFO)00.10.20.30.40.50.60.70.80.91Proximity of Colliding Symbols [Fraction of Ts]00.10.20.30.40.50.60.70.80.91Symbol Error Rate (SER)CIC : Decoding Multi-Packet Collisions in LoRa
SIGCOMM ‚Äô21, August 23‚Äì28, 2021, Virtual Event, USA
[13] Shuai Tong, Jiliang Wang, and Yunhao Liu. Combating packet collisions using
non-stationary signal scaling in lpwans. In Proceedings of the 18th International
Conference on Mobile Systems, Applications, and Services, pages 234‚Äì246, 2020.
[14] Rashad Eletreby, Diana Zhang, Swarun Kumar, and Osman Yaƒüan. Empowering
low-power wide area networks in urban settings. In Proceedings of the Conference
of the ACM Special Interest Group on Data Communication, SIGCOMM ‚Äô17, page
309‚Äì321. Association for Computing Machinery, 2017.
[15] Xiong Wang, Linghe Kong, Liang He, and Guihai Chen. mlora: A multi-packet
reception protocol in lora networks. In 2019 IEEE 27th International Conference
on Network Protocols (ICNP), pages 1‚Äì11. IEEE, 2019.
[16] Shuai Tong, Zhenqiang Xu, and Jiliang Wang. Colora: Enabling multi-packet
reception in lora. In IEEE INFOCOM 2020-IEEE Conference on Computer Commu-
nications, pages 2303‚Äì2311. IEEE, 2020.
[17] Leon Cohen. Time-frequency analysis, volume 778. Prentice Hall PTR Englewood
Cliffs, NJ, 1995.
3178.
[18] Aleksandra Checko, Henrik L Christiansen, Ying Yan, Lara Scolari, Georgios
Kardaras, Michael S Berger, and Lars Dittmann. Cloud ran for mobile networks‚Äîa
technology overview. IEEE Communications surveys & tutorials, 17(1):405‚Äì426,
2014.
[19] USRP B200. https://www.ettus.com/all-products/ub200-kit/.
[20] GNU Radio. https://www.gnuradio.org/.
[21] RPPO. https://github.com/rpp0/gr-lora.
[22] Adafruit Feather M0 with RFM95 LoRa Radio. https://www.adafruit.com/product/
[23] RadioHead RFM95 Library. https://www.airspayce.com/mikem/arduino/
RadioHead/classRH__RF95.html.
[24] Orestis Georgiou and Usman Raza. Low power wide area network analysis: Can
lora scale? IEEE Wireless Communications Letters, 6(2):162‚Äì165, 2017.
[25] Jiangbin Lyu, Dan Yu, and Liqun Fu. Achieving max-min throughput in lora
networks. In 2020 International Conference on Computing, Networking and Com-
munications (ICNC), pages 471‚Äì476. IEEE, 2020.
Innovative Mobile and Internet Services in Ubiquitous Computing, pages 229‚Äì234,
2011.
[3] Mar√≠a V Moreno, Miguel A Zamora, and Antonio F Skarmeta. User-centric smart
buildings for energy sustainable smart cities. Transactions on emerging telecom-
munications technologies, 25(1):41‚Äì55, 2014.
[4] Achim Walter, Robert Finger, Robert Huber, and Nina Buchmann. Opinion: Smart
farming is key to developing sustainable agriculture. Proceedings of the National
Academy of Sciences, 114(24):6148‚Äì6150, 2017.
[5] Climate
Smart
Agriculture.
https://www.worldbank.org/en/topic/
climate-smart-agriculture.
[6] Fei Tao, Qinglin Qi, Ang Liu, and Andrew Kusiak. Data-driven smart manufac-
turing. Journal of Manufacturing Systems, 48:157‚Äì169, 2018.
[7] Harsha V Madhyastha and Chinedum Okwudire. Remotely controlled manufac-
turing: A new frontier for systems research. In Proceedings of the 21st International
Workshop on Mobile Computing Systems and Applications, pages 62‚Äì67, 2020.
[8] Alo√øs Augustin, Jiazi Yi, Thomas Clausen, and William Mark Townsley. A study
of lora: Long range & low power networks for the internet of things. Sensors,
16(9):1466, 2016.
[9] Branden Ghena, Joshua Adkins, Longfei Shangguan, Kyle Jamieson, Philip Levis,
and Prabal Dutta. Challenge: Unlicensed lpwans are not yet the path to ubiquitous
connectivity. In The 25th Annual International Conference on Mobile Computing
and Networking, pages 1‚Äì12, 2019.
[10] Martin C Bor, Utz Roedig, Thiemo Voigt, and Juan M Alonso. Do lora low-power
wide-area networks scale? In Proceedings of the 19th ACM International Conference
on Modeling, Analysis and Simulation of Wireless and Mobile Systems, pages 59‚Äì67,
2016.
[11] Brecht Reynders and Sofie Pollin. Chirp spread spectrum as a modulation tech-
nique for long range communication. In 2016 Symposium on Communications and
Vehicular Technologies (SCVT), pages 1‚Äì5. IEEE, 2016.
[12] Xianjin Xia, Yuanqing Zheng, and Tao Gu. Ftrack: Parallel decoding for lora
transmissions. In Proceedings of the 17th Conference on Embedded Networked
Sensor Systems, pages 192‚Äì204, 2019.
515