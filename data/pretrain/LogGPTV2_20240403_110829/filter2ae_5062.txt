**前言**
闲来无事，c佬突然给了一个网站让我去渗透  
**信息收集**  
开始扫目录，发现目标站点使用ue编辑器
网上寻找利用方式，发现需要在本地构造一个上传界面，通过远程请求vps进行文件上传。  
在自己的vps上部署文件开启http功能  
准备一个简单的jpg文件格式为1.jpg?.aspx,因为ue编辑器有一个特性会过滤了？号。  
准备上传发现存在waf导致连接重置  
所以要判断waf是对什么进行过滤，准备一张带马的图片，发现依然存在waf，猜测即对后缀检测，又对文件内容检测。  
因为ue编辑器存在过滤？号的特性，所以构造1.jpg?.?a?s?p?x  
发现上传成功，但是文件内容为空，即使不上传脚本，上传单纯数字也为空
后来转变思路，在本地准备一张带脚本的图片，通过拦截去修改后缀进行绕过  
绕过内容检测的时候因为本人是脚本小子，找了几个马都没有成功，所所以找c牛要了一个马外加垃圾数据填充绕过了waf。
**总结**  
有一个好的老师总事半功倍。