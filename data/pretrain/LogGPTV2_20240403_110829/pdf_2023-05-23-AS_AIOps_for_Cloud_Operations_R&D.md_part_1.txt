AIOps for Cloud Reliability
Research and Development
AIOPS 2023
Academic Saloon
TU Berlin, May 23-25, 2023
https://aiops2023.github.io/aiops2023/
Prof. Jorge Cardoso
E-mail: PI:EMAIL
Chief Engineer for AIOps
Munich Research Center
23.05.2023
Overview
Talk & Conference
AIOps for Cloud Reliability: Research and Development
Abstract.
We started applying machine learning and predictive analytics (aka
AIOps) to anticipate and respond to failures in real-time since 2016.
The objective of our work has been to reduce the human intervention
needed to execute day-to-day operations in HUAWEI CLOUD and
datacenters, and to improve infrastructure reliability and availability.
This presentation provides: 1) an overview of emerging technologies in
the field of automation, monitoring, observability and cloud operations;
2) a timeline of our past work on distributed trace analysis, log analysis,
time series analysis, secure operations, hardware failure prediction,
network verification, and AI-based offloading; 3) a list of future research
topics in our pipeline; and 4) a brief description of our work on the use
of LSTM, BERT, Attention Networks to solve cloud reliability problems.
This talk also discusses concrete problems we have addressed with a
sketch of the solutions developed.
https://aiops2023.github.io/aiops2023/
ULTRA-SCALE AIOPS LAB 1
AI for Cloud Operations
Trends and Hypes
Observability Distributed Tracing
AIOpsPlatforms
eBPF
AI-Enabled Log Monitoring
Observability-Driven
Development
OpenTelemetry
Intent-based Networking
Observability-driven development (ODD)is an engineering practice that Observabilityis the characteristic of software that enables them to be Extended Berkeley Packet Filter (eBPF) is an enhancement to the Linux
provides visibility and context into system state and behavior by designing understood from their behavior. Tools enable to explore high-cardinality kernel that allows specific instruction sets to run inside the kernel.
systems to be observable. It relies on instrumenting code to expose telemetry to explain faulty behavior
system’s internal state, to make it easier to detect, diagnose and resolve AI-enabled log-monitoringapplies ML/AI to traditional log-monitoring to
system anomalies AIOpsplatforms analyze monitoring data, events and operational reduce operator’s cognitive load via context and correlation of large
information to automate IT operations. Five characteristics: cross-domain volumes of log data from multiple data sources
OpenTelemetryis a collection of specifications, tools, APIs and SDKs to data; topology; correlation between events; pattern recognition to detect
support open-source instrumentation and observability for software. incidents and root cause; and remediation. Intent-based networking helps design, provision and operate a network
based on business policies. Four characteristics: (1) translating higher-
level policies to configurations; (2) automating network activities; (3)
awareness of network state/health; and (4) continuous assurance and
dynamic optimization
Among the emerging technologies, O&M-related technologies emerge in large numbers,
focusing on observability and AI-driven analysis
ULTRA-SCALE AIOPS LAB 2
AI for Cloud Reliability
Fields of R&D
Log Analysis Hardware Failure Prediction
Trace Analysis Secure Operations
Flow Analysis
Network Chaos Engineering (Traces, Call Chains)
Root-cause analysis (logs) R •A MM a, cH hD inD e, LO ep at rnic ina gl • • G Syra ny th f ea ti il cu /r fe u zm zo trd ae fl fs ic • • F Al to tew n tm ioo nd ne eli tn wg o rks
• Template Mining, Temporal Correlation, Command Analysis • Random Forests, Grid Search • Network Observability • Decision trees
A c •an l Alo ucm th oa a -El iny ns cd ) oe dit ne gc Vti ao rn ia t( iotr na ac l es, • • S D At tea teeti nps t t iLi oc e na a l n rN n eio tn wi gs oe r kR semoval • • P D Ata e tet et ne p tr iLn oe- nm a nra n et ic tn wh gi on , rBg kE sRT, • [CCGrid2023, DSN 2023] • H anig ah ly c sa isrdinality metric
Bayes (AVB) • [ECML 2020, ICPC 2022] • [to be published]
• Sequence/pairwise alignment Trouble Ticket Analysis Continuous Verification
• Needleman-Wunsch algorithm • Document Question • Template mining
• [CCGRID 2019, Cloud 2019] Network Verification BGP Verification Answering • Log analysis
• A*, Trie, MTBDD • Summarization • Chi-Square, Kullback-
Cloud Analytics AI for Network • SMT solvers • BERT LieblerDivergance
CloudScope
Full-stack Network Verification Data Quality Analysis
VPC/P4 Verification • eBFP (MELT) End2End Network Verification
Time Series • SAT solver, BDD, eBPF • ML, network state inference • Statistics, sequence • Distributed Tracing, eBFP
• [NSDI 2024 ?] • Cross-layer correlation analysis • ML, cross-service correlation
• Multi time-series analysis • LLM, NLP, • Multi time-series analysis
AI-based Offloading • Unit tests for data
Efficient Logging
Auto Change Efficient AI Training (Logs) Blast Radius Analysis
Continuous Verification • Distance/density-based • Structured Logging • eBPFand distributed traces
• Template Mining novelty evaluation • Template Mining • Dynamic service topology
Anomaly detection (metrics) • Pearson's Correlation • Data pruning • Local, decentralized • Causality
Failure prediction • Machine Learning, Clustering • Model generalization analysis • Process mining
• AutoML, outlier detection • [ICDM 2020] Edge/Cloud offloading
• Symbolic Aggregate approXimation(SAX)
• Multi-criteria decision-making (MCDM)
• Uni/multi time-series analysis
• Adaptive Multi-Object Tracking (MOT)
• [AIOPS 2020a, AIOPS 2020b]
• [MIPS 2024 ?]
Nov 2020Huawei-TUB Innovation Lab (AIOps, AI for Networks, Intelligent CDN, Data Analytics)
2016 2018 2020-2021 2023 2024-2025 2026
QuLog: Data-Driven Approach for Log Instruction Quality Assessment. ICPC 2022
Self-Supervised Log Parsing, ECML PKDD 2020
Anomaly Detection and Classification using Distributed Tracing and Deep Learning. CCGRID 2019
Anomaly Detection from System Tracing Data using Multimodal Deep, IEEE Cloud 2019
ULTRA-SCALE AIOPS LAB 3 O Ann l Oin pe t iM cae lm To rary n sL ce ea ik ve D r e Rte ec lit aio bn ili ti yn Sth tue dC yl o bu ad s- eb da os ne d S I Fnf Pra Mst oru nc itt ou rr ie ns g, a ) nA dIO OP SS - le2 v0 e2 l0 M) etric Data, CCGrid2023 S IAe Dlf :- A Int dte irn eti cv te A C nl oa mss aif loic ua sti Von M-B Ma ss Ded e tA en co tim ona il ny D the et e Cc lt oio un d -in b aU sn es dt r Eu nc vtu irr oe nd m L eo ng ts ( A(IC IOD PM S 2 20 02 20 0) )
HiMFP: Hierarchical Intelligent Memory Failure Prediction for Cloud Service Reliability, DSN 2023 Cost-Aware Reachability Policy Management in Public Cloud (NSDI, 2024)
AI for Cloud Reliability
LSTM, Attention, BERT
ATTENTION LOG QUALITY ANALYSIS BERT System Comprehension
NETWORKS
QULOG (2022) • Generatehuman-like descriptions from technical
SECURE OPERATIONS architectures diagrams
Uses Attention Networksto build a language
L DO ETG E A CN TO IOM NALY m pro od jee cl tf sr .o Tm h eG i mtH ou db e lt o isp ur sa ete dd t oo p ee vn a ls uo au terc te h e OPERATORS’ COMMANDS (2023) • A ban ss ew de or nq u ae gs it vio en ns pw roit bh l ere ms /p ce oc nt t eto x ta , ks ny os wte lm ed b ge eh ba av sio er ,
quality of log statements Uses LLMto build a sequence model to documentation.
LogSy analyze commands, parameters and flags • Scan kubernetesclusters, diagnosing and triaging
(2020) issues in English (e.g., k8sgpt.ai)
LSTM U N hs e cie it ocw ds o A r ik mt zt se eon dt dot ei o n tnem
b reu l a l C •h ta eo sts nmE gn tg oici n me lle r oin vg c( rT oe ues dt ci n eg l) poleveD
w gh A u to a t ia py rg e n e la t ra ll iach ba ilii tn ys cfo f.r te ran cd e-t to e- se t.n iod
n i e ( )
normal logs and
TRACE ANOMALY DETECTION logs generated
UD (2 sI 0S e1 sT 9 LR ) SI TB MU TED TRACES/METRIC w i S Os oe .h gl If f ns-e a A 2Nn tu 0te l hn da t t ey Ii Ev lkes C Ey skl as n,s t tSs ee i rf ni m c aa tt ii ogo nan at- iB Coa vs ose nkd ,A en n;o cAm eca okl ey D Ae at te c Mti ao nn noin U (I,n Js D.t r Mu nc ,t u tr ae ld Q B 3 20 0ou t 2gL h 2ao I .tg Ein: E oD Eva s /At ka Ci- , D J M.r ; i Iv nNe tn e e d rA nep alkp tio oro s na k aic , l h S C f . oo ; nr A fL eco k reg e n rI , cn A es t . or ; u nCc Pati r ro d on o g Q s raou m,a J l C.it y a o n mA ds p s K ree a hs o es , nm O se . io n I nnt. , I •nte T d nn o era m tt w- nb as oa il rnas t s se e p d (n e N a fc .t i e u f Wit r cw a all ao rl pnark gn foi ugn rau g Sga e( hgC ee toh ld ,a c e an os ug nc te fr oii gp rM eutin gro eg en ) do .a xf t yi an ,t c e Cen n ots t ge rt ro snoitarepO
L . e t Eo Ii . ; B o n l fi e rJ . n r D, . ; a C ir d i gs o C a )d IK a o y ,, k c l x z a m
Networksto 2020. for SQL)
build a
s me oq du ee ln fc oe r the LOG TEMPLATE MINING SECURE OPERATIONS Standard Operation Procedures (SOP)
distributed TRACE ANOMALY DETECTION COMMUNITY LABELLING (2023) • Dynamically improve SOP procedures by building a
traces and their NULOG (2020) sequence model with BERT to
r T u a t A L I (r ne Cens nh ta Ceaos e o rrce Gm nnp d a Rm ie a no m tl I g iys Dotn . a D n )o No ,a s el e 2 lo td e d de S 0u ec 1e y e t l 9mt kisl o .i t o pnm ei s o s ka sc in ,e i udt S m . .C ; ol Ca ns a s Crdif lo uic s sa o tt e,io rJ ,n . C u a los ni udn d g K aD a nois d,t Or Gib . r u iI dnt e C1d o9 T mtr ha p c I uEin tE ig nE g a / An Cd MDe ep U m a thps eo pe d vls ie c a lA a rf itt r ait o oe bm nn le.t i st To h h on e e f N l lo ome g gt osw gd igo neer glk n i ss se t t r auo a ts et eb e mdu d i e l tfd o nro ta i sm d l ea a nn n tg i fu ya ge D U s g ue sesI q enS e du esT e r tA aR on tt c eI t dB e e d en U m tbt ei yoT o c n td OE e aN pD l n ee f o o nT t mw r S A t ao th aR lr e ok cC us kd s.E t i so T trS t hr ab i eb cu( eu2 i ml sd t0 e o a2 d d 0 t er) la ic se s BMGoareonyutsatllryU ( b e a pE lapxa bs ienM p lgs e c [oOe e ms p) mtid r o ant ntL ad o i ls]o sL a senaM W s ht ites ha , Bi e ln g aci kd n r o r cE r oisx mkp e plac lebta xet il ti s yo n t ao– n M c d $ $ $ $ $ $ $o e r l e mf pa sd mom c x s i vt-x h s 4 a -p - ~ko er li m f / fm -e $ d /s / du e r e/s va di va /ez se /n r ndvta u/o ad s l1 lt d r i ao s 7 n • C •ug B a U asd ne ta noe an s dmp le e e yr td sre.a sa ir sol tii a)z ,n s ne n uo d/ aps b mu tpj hem o eec dr m t t mi v ea &e e nr s ai tTz i, n te r ys io nuo ru g egp b cge ol or e fe a gs t et nTto x iw ir tc t is oo k f’ nor ea k ,rtc f as slt oi neo w dnn ts s tim ete xep t ns t (e.g.,
$ dd if=/dev/random of=/dev/sda classification (e.g., Viable, Enterpret, Cohere, and
$ $ c ga ret p/e otc p/ eh no ss tt as cklog.txt Anecdote).
$ ls /
• Automatically create tags/captionsfor trouble tickets,
e.g., severity, importance, location, system.
Self-Supervised Log Parsing. Nedelkoski, S.; Bogatinovski, J.; Acker, A.;
Cardoso, J. and Kao, O. ECML-PKDD, 2020.
Incident Response
Self-Supervised Anomaly Detection from Distributed Traces.
B 13o tg ha It nin teo rv ns ak ti i, o J n. a; lN Ce od ne fl ek ro es nk ci, e S o. n; C Ua tir ld ito y s ao n, d J C. a lon ud d K Ca oo m, O pu. tI in n gIE (UE CE/ CA )C , M • Summarizes the state of systems in response to
2020 questions during critical incidents (e.g.,
wildmoose.ai)
BERT,
RNN, RNN with Self-attention, RoBERTa GPT-3
GPT, ChatGPT PanGu-Σ
LSTM attention Transformers GPT-2 DeBERTa
ELMo
< 2014 2014 2017 2018 2019 2020 2022 2023 2025 2027
ULTRA-SCALE AIOPS LAB 4
Overview of AIOps Research
1990-2020
Results
▪ Majority of research (670 papers, 62.1%) are associated with
failure management (FM)
• Online failure prediction (26.4%)
• Failure detection (33.7%)
• Root cause analysis (26.7%)
▪ Most common problems in FM
• Software defect prediction, system failure prediction,
anomaly detection, fault localization and root cause
diagnosis
▪ Failure detection has gained particular traction in recent
years (71 publications for the 2018-2019 period)
▪ Root cause analysis (39) and online failure prediction (34)
▪ Failure prevention and remediation are the areas with least
research
1
2
3
A Systematic Mapping Study in AIOps.Notaro, P.; Cardoso, J. and Gerndt, M.In AIOPS
2020 International Workshop on Artificial Intelligence for IT Operations,Springer, 2020.
ULTRA-SCALE AIOPS LAB 5
Hardware Failure Prediction
Memory Failure Prediction
PAIN POINT DESCRIPTION IMPACT
Several incidents of in cloud computing MAIN ACHIEVEMENT Migrate customers VMs before failures
infrastructures are caused by hardware happen
Feature Development and System Design
failures
▪ Expert rules and Bit-level CE features
Fig. Hardware ▪ Hierarchical framework to adapt multi-level failure recovery
failures (e.g., hard techniques
drives, memory,
▪ Outperformed baseline algorithm Intel/ByteDance(2022) by 11%
optical connectors)
are the root cause of (F1)
many cloud failures
HOW IT WORKS
[1] Why Does the Cloud Stop Computing? Lessons from 5
Problem Hundreds of Service Outages 4
▪ In computing infrastructures, memory failure is VM interruption rate dropped ~20% after memory failure
prediction algorithm was deployed in production
the most important cause of system failure
1 2 3
TECHNOLOGIES
PRODUCTION
Combine hierarchical memory features and Possible improvements
ML techniques for failure prediction ▪ Topic extraction to allow to select events using
fuzzy queries, e.g. “network issue” (similar to
Key technology
Twitter hashtag prediction)
1 Static features (manufacturer, frequency, …), ▪ Online log processing and model construction to
MCE Log (CE, UCE Error), Memory Events enable RCA immediately once the issue occurs
(CE storm, overflow, …)
▪ Interactive user interface to simplify browsing
2 Unique deeper level features (bit-level) Design of memory failure prediction pipeline. Only the “star” is running through the report
in production.
3 Combine in-band and out-band data
ASSUMPTIONS & LIMITATIONS
4 Hierarchical MFP framework
▪ Data quality and timeliness are key elements for a proper failure
5 Combine expert rules and ML model prediction
▪ Insight. Bit-level features and patterns are
extremely important in predicting memory failure TRL 9: Algorithm operates in production environment and reduces VM H Ri eM liaF bP il: i tH yi (e Dra Sr Nch '2ic 3a ).l I Qn .t e Yll uig , e en t t a M l..e 2m 0o 2r 3y . Failure Prediction for Cloud Service
for Huawei V5 servers interruptions.
ULTRA-SCALE AIOPS LAB 6
Anomaly Detection
Detecting Faulty Hypervisors
PAIN POINT DESCRIPTION IMPACT
Virtualization APPROACH Predictive Maintenance
failures affect VMs abnormal
failure Quorum change-point detection Migrate customers’ VMs before hypervisors fail
but cannot be propagationVM VM VM VM
▪ Analyzes individual time-series, and uses change points and
observed directly VM VM VM VM
voting to decide whether there is an hypervisor malfunction
VM VM VM VM
▪ Key results: F1 72%(2 VMs); 80+%(3+ VMs)
Fig. VMs exhibit problems VM VM VM VM
when the hypervisor has