# 中移产品文档（6月版本）
（v1.1）
## 记录
  ----------------- -------------------- ----------------- -----------------
  文档版本          文档版本内容         修订人            修订时间
  V1.0              首页内容和告警页面   关慧梅            2021.4.21
  V1.1              补全所有功能页面     关慧梅            2021.4.23
  ----------------- -------------------- ----------------- -----------------
## 需求背景和需求分析
为了更好支撑中移项目要求提供的业务场景，符合客户方使用习惯和业务特性
客户场景（包含6月与11月）：
客户交互要求：
6月版本沟通完成的场景流程图：
内存溢出：
https://www.processon.com/view/link/60755c67e401fd2d6694506b
进程僵死：
https://www.processon.com/view/link/607d354b079129368891bb40
线程使用率异常：
数据库：![](media/image1.png)
# 版本设计
+----------------+-----------------------------------------------------+
| **版本**       | **内容**                                            |
+----------------+-----------------------------------------------------+
| **6月版**      | 1.  **综合首页**                                    |
|                |                                                     |
|                | 2.  **应用异常检测+诊断+自愈 整体方案**             |
|                |                                                     |
|                | 3.  **数据库异常检测+诊断+自愈 整体方案**           |
|                |                                                     |
|                | 4.  **接口异常检测+调用链+应用拓扑+根因分析**       |
+----------------+-----------------------------------------------------+
| **11月版**     | 1.  **应用异常预测+数据库异常预测**                 |
|                |                                                     |
|                | 2.  **数据库空间优化**                              |
|                |                                                     |
|                | 3.  **多源日志分析+容器性能                         |
|                | 异常检测+进程健康度+连接异常检测+用户行为异常检测** |
|                |                                                     |
|                | 4.  **平台能力**                                    |
+----------------+-----------------------------------------------------+
# 产品方案
## 首页（命名为概览）
-   **单值展示区**
    -   展示某个指标某个时间段的统计值（可以通过编辑进行修改）
    -   鼠标停留比较久可以出现编辑按钮，点击编辑按钮从当前页面右侧抽出页面展示可编辑字段（可以直接覆盖首页信息）。
    -   编辑页面可编辑名称，搜索语句，和统计数据项等内容，置灰部分为不可编辑。
        ![](media/image2.png){width="5.766666666666667in"
        height="1.0465277777777777in"}
        ![](media/image3.png){width="5.7652777777777775in"
        height="5.175in"}
        （编辑效果）
-   **场景分类卡片（应用/数据库/接口）**
    -   每个卡片的长宽可以根据屏幕尺寸进行的适配
默认展示3个图表，展示指标为（图1-TOP10异常应用图（TOP定义：告警等级\*告警次数累加之和），显示进程名及异常量，占比；图2-异常总量，已诊断量，已自愈量；右侧表格，告警等级，告警事件，告警内容，诊断结果，自愈结果）
-   点击卡片可以跳转到对应分类自己的概览首页
-   鼠标在卡片停留一段时间可以看到编辑按钮，点击编辑按钮从当前页面右侧抽出页面展示可编辑字段（可以直接覆盖首页信息）。
-   可以编辑视图类型/名称/搜索语句/图表的图例。
-   点击"更多"可以跳转到对应分类下告警列表处
-   点击相应报警可以出现报警处理页面（因为为spl编辑的，需要讨论是否可实现）
    ![1618998786588](media/image4.jpeg){width="5.75625in"
    height="6.050694444444445in"}
    ![1618998862848](media/image6.jpeg){width="5.767361111111111in"
    height="4.201388888888889in"}
    （编辑效果）
## 应用资源分析
-   **告警（首页）**
    -   可以和左侧的导航栏做联动，选择了那个场景只展示该场景的告警信息
    -   默认按照日期展示告警，报警等级越高+最新告警时间排序。
    -   有相应的颜色提示用户关于告警卡片的等级，鼠标移到note上可以浮窗提示：红色为4级告警，橙色为3级告警，黄色为2级告警，绿色为1级告警。
    -   提供场景/报警级别/状态/时间四个维度搜索字段，做and联动搜索
        -   场景选择从场景信息库进行拉取，当左侧导航栏选择场景可以代填进来
        -   报警级别从监控报警中拉取信息
        -   状态：全部/未诊断未自愈/已诊断未自愈/已诊断已自愈
        -   时间采用3.7版本的时间控件交互
            ![WX20210421-185712@2x](media/image7.png){width="5.7659722222222225in"
            height="4.83125in"}
    -   点击告警，从页面下方抽出页面展示告警处理流程，告警进行压缩，不能覆盖（抽屉页面默认是3分2页面占幅），可以不关闭告警详情页面下再次选择告警
        -   根据状态展示到对应的流程节点，如：进入到诊断阶段的告警，点击告警卡片展示就是诊断阶段信息。
        -   点击对应tab页面可以打开对应tab页面的信息。
    -   Tab：告警信息
        -   展示告警信息
        -   告警指标的最近一小时的时序图，提供时间过滤框
            ![](media/image8.png){width="5.767361111111111in"
            height="5.100694444444445in"}
    -   Tab：诊断结果
        -   根据场景配置的诊断流程进行信息展示
        -   一个流程一个卡片，只展示异常结果，点击详情可以看到详细查询信息情况
        -   诊断流程走完之后，输出诊断结果
            ![](media/image9.png){width="5.7625in"
            height="5.100694444444445in"}
            （默认展示效果）
            ![](media/image10.png){width="5.761111111111111in"
            height="5.1090277777777775in"}
            （点击详情效果）
    -   Tab：自愈方案
        -   自愈方案的获取从场景配置中方案全量拉取即可
        -   用户可以自由选择方案，点击确认可触发自愈
            ![](media/image11.png){width="5.7625in"
            height="5.151388888888889in"}
    -   Tab：自愈结果