In this section, we brieﬂy overview the academic literature
on implementing and measuring personalization.
Improving Personalization.
Personalizing search re-
sults to improve Information Retrieval (IR) accuracy has
been extensively studied in the literature [33, 42]. While
these techniques typically use click histories for personaliza-
tion, other features have also been used, including geolo-
cation [2, 53, 54] and demographics (typically inferred from
search and browsing histories) [18, 47]. To our knowledge,
only one study has investigated privacy-preserving person-
alized search [52]. Dou et al. provide a comprehensive
overview of techniques for personalizing search [12]. Several
studies have looked at improving personalization on systems
other than search, including targeted ads on the web [16,49],
news aggregators [9, 24], and even discriminatory pricing on
travel search engines [15].
Training and compar-
Comparing Search Results.
ing IR systems requires being able to compare ranked lists
of search results. Thus, metrics for comparing ranked lists
are an active area of research in the IR community. Classi-
cal metrics such as Spearman’s footrule and ρ [11, 38] and
Kendall’s τ [22] both calculate pairwise disagreement be-
tween ordered lists. Several studies improve on Kendall’s τ
by adding per-rank weights [14,40], and by taking item sim-
ilarity into account [21,39]. DCG and nDCG use a logarith-
mic scale to reduce the scores of bottom ranked items [19].
The Filter Bubble.
Activist Eli Pariser brought
widespread attention to the potential for web personal-
ization to lead to harmful social outcomes; a problem he
dubbed The Internet Filter Bubble [31]. This has motivated
researchers to begin measuring the personalization present
in deployed systems, such as web search engines [17, 27, 50]
and recommender systems [4].
Exploiting Personalization.
Recent work has shown
that it is possible to exploit personalization algorithms for
nefarious purposes. Xing et al. [51] demonstrate that re-
peatedly clicking on speciﬁc search results can cause search
engines to rank those results higher. An attacker can exploit
this to promote speciﬁc results to targeted users. Thus, fully
understanding the presence and extent of personalization to-
day can aid in understanding the potential impact of these
attacks on e-commerce sites.
Personalization of E-commerce.
Two recent stud-
ies by Mikians et al. that measure personalization on e-
commerce sites serve as the inspiration for our own work.
The ﬁrst study examines price steering (referred to as search
discrimination) and price discrimination across a large num-
ber of sites using fake user proﬁles [29]. The second paper
extends the ﬁrst work by leveraging crowdsourced workers to
help detect price discrimination [30]. The authors identify
several e-commerce sites that personalize content, mostly
based on the user’s geolocation. We improve upon these
 0 0.2 0.4 0.6 0.8 104/0504/1204/1904/2605/0305/10Avg. Jaccard(a)-1-0.5 0 0.5 104/0504/1204/1904/2605/0305/10Avg. Kendall’s Tau(b)iOS SafariAndroid 0 0.2 0.4 0.6 0.8 104/0504/1204/1904/2605/0305/10Avg. nDCG(c) 0 5 10 15 2004/0504/1204/1904/2605/0305/10% of Items w/ Diff. Prices(d) 0 20 40 60 8004/0504/1204/1904/2605/0305/10Avg. Price Difference ($)(e)Chrome*IE 8FirefoxSafari on OS XSafari on iOSChrome on Android316studies by introducing duplicated control accounts into all
of our measurements. These additional control accounts are
necessary to conclusively diﬀerentiate inherent noise from
actual personalization.
7. CONCLUDING DISCUSSION
Personalization has become a important feature of many
web services in recent years. However, there is mounting
evidence that e-commerce sites are using personalization al-
gorithms to implement price steering and discrimination.
In this paper, we build a measurement infrastructure to
study price discrimination and steering on 16 top online re-
tailers and travel websites. Our method places great empha-
sis on controlling for various sources of noise in our exper-
iments, since we have to ensure that the diﬀerences we see
are actually a result of personalization algorithms and not
just noise. First, we collect real-world data from 300 AMT
users to determine the extent of personalization that they
experience. This data revealed evidence of personalization
on four general retailers and ﬁve travel sites, including cases
where sites altered prices by hundreds of dollars.
Second, we ran controlled experiments to investigate what
features e-commerce personalization algorithms take into ac-
count when shaping content. We found cases of sites altering
results based on the user’s OS/browser, account on the site,
and history of clicked/purchased products. We also observe
two travel sites conducting A/B tests that steer users to-
wards more expensive hotel reservations.
Comments from Companies.
We reached out to
the six companies we identiﬁed in this study as implement-
ing some form of personalization (Orbitz and Cheaptick-
ets are run by a single company, as are Expedia and Ho-
tels.com) asking for comments on a pre-publication draft of
this manuscript. We received responses from Orbitz and
Expedia. The Vice President for Corporate Aﬀairs at Or-
bitz provided a response conﬁrming that Cheaptickets and
Orbitz oﬀer members-only deals on hotels. However, their
response took issue with our characterization of price dis-
crimination as “anti-consumer”; we removed these assertions
from the ﬁnal draft of this manuscript. The Orbitz repre-
sentative kindly agreed to allow us to publish their letter on
the Web [7].
We also spoke on the phone with the Chief Product Of-
ﬁcer and the Senior Director of Stats Optimization at Ex-
pedia. They conﬁrmed our ﬁndings that Expedia and Ho-
tels.com perform extensive A/B testing on users. However,
they claimed that Expedia does not implement price dis-
crimination on rental cars, and could not explain our results
to the contrary (see Figure 3).
Scope.
In this study we focus on US e-commerce sites.
All queries are made from IP addresses in the US, all re-
tailers and searches are in English, and real world data is
collected from users in the US. We leave the examination of
personalization on e-commerce sites in other countries and
other languages to future work.
Incompleteness.
As a result of our methodology, we
are only able to identify positive instances of price discrimi-
nation and steering; we cannot claim the absence of person-
alization, as we may not have considered other dimensions
along which e-commerce sites might personalize content. We
observe personalization in some of the AMT results (e.g., on
Newegg and Sears) that we cannot explain with the ﬁndings
from our feature-based experiments. These eﬀects might be
explained by measuring the impact of other features, such
as geolocation, HTTP Referer, browsing history, or purchase
history. Given the generality of our methodology, it would
be straightforward to apply it to these additional features,
as well as to other e-commerce sites.
All of our experiments were conducted
Open Source.
in spring of 2014. Although our results are representative for
this time period, they may not hold in the future, as the sites
may change their personalization algorithms. We encourage
other researchers to repeat our measurements by making all
of our crawling and parsing code, as well as the raw data
from § 4 and § 5, available to the research community at
http://personalization.ccs.neu.edu/
Acknowledgements
We thank the anonymous reviewers and our shepherd, Vijay
Erramilli, for their helpful comments. This research was
supported in part by NSF grants CNS-1054233 and CHS-
1408345, ARO grant W911NF-12-1-0556, and an Amazon
Web Services in Education grant.
8. REFERENCES
[1] Bezos calls Amazon experiment ’a mistake’. Puget
Sound Business Journal, 2000.
http://www.bizjournals.com/seattle/stories/
2000/09/25/daily21.html.
[2] L. Andrade and M. J. Silva. Relevance Ranking for
Geographic IR. GIR, 2006.
[3] Amazon mechanical turk. http://mturk.com/.
[4] F. Bakalov, M.-J. Meurs, B. K¨onig-Ries, B. Satel,
R. G. Butler, and A. Tsang. An Approach to
Controlling User Models and Personalization Eﬀects
in Recommender Systems. IUI, 2013.
[5] K. Bhasin. JCPenney Execs Admit They Didn’t
Realize How Much Customers Were Into Coupons.
Business Insider, 2012.
http://www.businessinsider.com/jcpenney-didnt-
realize-how-much-customers-\\were-into-
coupons-2012-5.
[6] P. Belobaba, A. Odoni, and C. Barnhart. The Global
Airline Industry. Wiley, 2009.
[7] C. Chiames. Correspondence with the authors, in
reference to a pre-publication version of this
manuscript, 2014. http://personalization.ccs.neu.
edu/orbitz_letter.pdf.
[8] R. Calo. Digital Market Manipulation. The George
Washington Law Review, 82, 2014.
[9] A. Das, M. Datar, A. Garg, and S. Rajaram. Google
News Personalization: Scalable Online Collaborative
Filtering. WWW, 2007.
[10] C. Duhigg. How Companies Learn Your Secrets. The
New York Times, 2012. http://www.nytimes.com/
2012/02/19/magazine/shopping-habits.html.
[11] P. Diaconis and R. L. Graham. Spearman’s Footrule
as a Measure of Disarray. J. Roy. Stat. B, 39(2), 1977.
[12] Z. Dou, R. Song, and J.-R. Wen. A Large-scale
Evaluation and Analysis of Personalized Search
Strategies. WWW, 2007.
[13] J. H. Dorfman. Economics and Management of the
Food Industry. Routledge, 2013.
317[14] R. Fagin, R. Kumar, and D. Sivakumar. Comparing
top k lists. SODA, 2003.
[15] A. Ghose, P. G. Ipeirotis, and B. Li. Designing
Ranking Systems for Hotels on Travel Search Engines
by Mining User-Generated and Crowdsourced
Content. Marketing Science, 31(3), 2012.
[16] S. Guha, B. Cheng, and P. Francis. Challenges in
Measuring Online Advertising Systems. IMC, 2010.
[17] A. Hannak, P. Sapiezy´nski, A. M. Kakhki, B.
Krishnamurthy, D. Lazer, A. Mislove, and C. Wilson.
Measuring Personalization of Web Search. WWW,
2013.
[18] J. Hu, H.-J. Zeng, H. Li, C. Niu, and Z. Chen.
Demographic Prediction Based on User’s Browsing
Behavior. WWW, 2007.
[19] K. J¨arvelin and J. Kek¨al¨ainen. IR evaluation methods
for retrieving highly relevant documents. SIGIR, 2000.
[20] K. J¨arvelin and J. Kek¨al¨ainen. Cumulated Gain-based
Evaluation of IR Techniques. ACM TOIS, 20(4), 2002.
[34] Panopticlick. https://panopticlick.eff.org.
[35] PhantomJS. 2013. http://phantomjs.org.
[36] A. Ramasastry. Web sites change prices based on
customers’ habits. CNN, 2005. http://edition.cnn.
com/2005/LAW/06/24/ramasastry.website.prices/.
[37] C. Shapiro and H. R. Varian. Information Rules: A
Strategic Guide to the Network Economy. Harvard
Business School Press, 1999.
[38] C. Spearman. The Proof and Measurement of
Association between Two Things. Am J Psychol, 15,
1904.
[39] D. Sculley. Rank Aggregation for Similar Items. SDM,
2007.
[40] G. S. Shieh, Z. Bai, and W.-Y. Tsai. Rank Tests for
Independence—With a Weighted Contamination
Alternative. Stat. Sinica, 10, 2000.
[41] Selenium. 2013. http://selenium.org.
[42] B. Tan, X. Shen, and C. Zhai. Mining long-term
search history to improve search accuracy. KDD, 2006.
[21] R. Kumar and S. Vassilvitskii. Generalized Distances
[43] Top 500 e-retailers.
Between Rankings. WWW, 2010.
http://www.top500guide.com/top-500/.
[22] M. G. Kendall. A New Measure of Rank Correlation.
[44] Top booking sites.
Biometrika, 30(1/2), 1938.
[23] W. H. Kruskal. Ordinal Measures of Association.
Journal of the American Statistical Association,
53(284), 1958.
[24] L. Li, W. Chu, J. Langford, and R. E. Schapire. A
Contextual-Bandit Approach to Personalized News
Article Recommendation. WWW, 2010.
[25] B. D. Lollis. Orbitz: Mac users book fancier hotels
than PC users. USA Today Travel Blog, 2012.
http://travel.usatoday.com/hotels/post/2012/
05/orbitz-hotel-booking-mac-pc-/690633/1.
http://skift.com/2013/11/11/top-25-online-
booking-sites-in-travel/.
[45] T. Vissers, N. Nikiforakis, N. Bielova, and W. Joosen.
Crying Wolf? On the Price Discrimination of Online
Airline Tickets. HotPETs, 2014.
[46] J. Valentino-Devries, J. Singer-Vine, and A. Soltani.
Websites Vary Prices, Deals Based on Users’
Information. Wall Street Journal, 2012.
http://online.wsj.com/news/articles/
SB10001424127887323777204578189391813881534.
[47] I. Weber and A. Jaimes. Who Uses Web Search for
[26] B. D. Lollis. Orbitz: Mobile searches may yield better
What? And How? WSDM, 2011.
hotel deals. USA Today Travel Blog, 2012.
http://travel.usatoday.com/hotels/post/2012/
05/orbitz-mobile-hotel-deals/691470/1.
[27] A. Majumder and N. Shrivastava. Know your
personalization: learning topic level personalization in
online services. WWW, 2013.
[48] T. Wadhwa. How Advertisers Can Use Your Personal
Information to Make You Pay Higher Prices.
Huﬃngton Post, 2014.
http://www.huffingtonpost.com/tarun-wadhwa/
how-advertisers-can-use-y_b_4703013.html.
[49] C. E. Wills and C. Tatar. Understanding What They
[28] D. Mattioli. On Orbitz, Mac Users Steered to Pricier
Do with What They Know. WPES, 2012.
Hotels. The Wall Street Journal, 2012.
http://on.wsj.com/LwTnPH.
[29] J. Mikians, L. Gyarmati, V. Erramilli, and N.
Laoutaris. Detecting Price and Search Discrimination
on the Internet. HotNets, 2012.
[30] J. Mikians, L. Gyarmati, V. Erramilli, and N.
Laoutaris. Crowd-assisted Search for Price
Discrimination in E-Commerce: First results.
CoNEXT, 2013.
[31] E. Pariser. The Filter Bubble: What the Internet is
[50] X. Xing, W. Meng, D. Doozan, N. Feamster, W. Lee,
and A. C. Snoeren. Exposing Inconsistent Web Search
Results with Bobble. PAM, 2014.
[51] X. Xing, W. Meng, D. Doozan, A. C. Snoeren, N.
Feamster, and W. Lee. Take This Personally:
Pollution Attacks on Personalized Services. USENIX
Security, 2013.
[52] Y. Xu, B. Zhang, Z. Chen, and K. Wang.
Privacy-Enhancing Personalized Web Search. WWW,
2007.
Hiding from You. Penguin Press, 2011.
[53] B. Yu and G. Cai. A query-aware document ranking
[32] I. Png. Managerial Economics. Routledge, 2012.
[33] J. Pitkow, H. Sch¨utze, T. Cass, R. Cooley, D.
Turnbull, A. Edmonds, E. Adar, and T. Breuel.
Personalized search. CACM, 45(9), 2002.
method for geographic information retrieval. GIR,
2007.
[54] X. Yi, H. Raghavan, and C. Leggetter. Discovering
Users’ Speciﬁc Geo Intention in Web Search. WWW,
2009.
318