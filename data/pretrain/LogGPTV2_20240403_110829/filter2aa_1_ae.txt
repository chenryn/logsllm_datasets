Page_378
Page_379
Page_381
Page_382
Page_383
Page_384
Page_385
Page_386
Page_387
Page_388
Page_389
Page_390
Bug Bounty Bootcamp
    The Guide to Finding and Reporting Web Vulnerabilities
     Vickie Li
     薇琪李
Bug Bounty Bootcamp.
    Copyright © 2021 by Vickie Li.
    漏洞赏金营地。版权所有 © 2021 Vickie Li。
    All rights reserved. No part of this work may be reproduced or transmitted in any form or by any means, electronic or mechanical, including photocopying, recording, or by any information storage or retrieval system, without the prior written permission of the copyright owner and the publisher.
    版权所有。未经版权所有者和出版者事先书面许可，任何形式或方式的复制或传播本作品均被禁止，包括但不限于电子或机械形式、复印、录制或任何信息存储或检索系统。
    ISBN-13: 978-1-7185-0154-6 (print)
    ISBN-13: 978-1-7185-0155-3 (ebook)
    ISBN-13: 978-1-7185-0154-6（印刷版）ISBN-13: 978-1-7185-0155-3（电子版）
    Publisher: William Pollock
    Production Manager: Rachel Monaghan
    Production Editors: Miles Bond and Dapinder Dosanjh
    Developmental Editor: Frances Saux
    Cover Design: Rick Reese
    Interior Design: Octopod Studios
    Technical Reviewer: Aaron Guzman
    Copyeditor: Sharon Wilkey
    Compositor: Jeff Lytle, Happenstance Type-O-Rama
    Proofreader: James Fraleigh
    出版者：威廉·波洛克
制作经理：瑞秋·莫纳汉
制作编辑：迈尔斯·邦德和达平德·多桑吉
开发编辑：弗朗西斯·索克斯
封面设计：瑞克·里斯
内部设计：八爪鱼工作室
技术审核者：阿龙·古兹曼
校对员：沙龙·威尔基
排版人员：杰夫·莱特尔，偶然类型大杂烩
校对员：詹姆斯·弗雷利
    For information on book distributors or translations, please contact No Starch Press, Inc. directly:
    No Starch Press, Inc.
    245 8th Street, San Francisco, CA 94103
    phone: 1-415-863-9900; PI:EMAIL
     www.nostarch.com
    有关图书分销商或翻译的信息，请直接联系No Starch Press, Inc.：No Starch Press, Inc.245 8th Street，旧金山，CA 94103电话：1-415-863-9900；PI:EMAIL
    Names: Li, Vickie, author.
    Title: Bug bounty bootcamp : the guide to finding and reporting web
    vulnerabilities / Vickie Li.
    Description: San Francisco : No Starch Press, [2021] | Includes index. |
    Identifiers: LCCN 2021023153 (print) | LCCN 2021023154 (ebook) | ISBN
    9781718501546 (print) | ISBN 9781718501553 (ebook)
    Subjects: LCSH: Web sites--Security measures. | Penetration testing
    (Computer security) | Debugging in computer science.
    Classification: LCC TK5105.8855 .L523 2021  (print) | LCC TK5105.8855
    (ebook) | DDC 025.042--dc23
    LC record available at https://lccn.loc.gov/2021023153
    LC ebook record available at https://lccn.loc.gov/2021023154
    姓名：李，薇琪，作者。题目：漏洞赏金训练营: 发现和报告网站漏洞的指南 / 薇琪李。描叙：旧金山: 无淀粉出版社，[2021] | 包括索引。| 标识符: LCCN 2021023153 (print) | LCCN 2021023154 (ebook) | ISBN 9781718501546 (print) | ISBN 9781718501553 (ebook) 主题：LCSH: 网站-安全措施。|穿透测试(计算机安全)|计算机科学中的除错。分类: LCC TK5105.8855 .L523 2021 (print) | LCC TK5105.8855 (ebook) | DDC 025.042--dc23 LC 记录可在 https://lccn.loc.gov/2021023153LC ebook 记录可在 https://lccn.loc.gov/2021023154。
    No Starch Press and the No Starch Press logo are registered trademarks of No Starch Press, Inc. Other product and company names mentioned herein may be the trademarks of their respective owners. Rather than use a trademark symbol with every occurrence of a trademarked name, we are using the names only in an editorial fashion and to the benefit of the trademark owner, with no intention of infringement of the trademark.
    No Starch Press和No Starch Press标识是No Starch Press公司的注册商标。此处提及的其他产品和公司名称可能为其各自所有者的商标。我们没有在每个商标名称出现时使用商标符号，而是仅以编辑方式使用这些名称，以造福商标所有者，无意侵犯商标权。
    The information in this book is distributed on an “As Is” basis, without warranty. While every precaution has been taken in the preparation of this work, neither the author nor No Starch Press, Inc. shall have any liability to any person or entity with respect to any loss or damage caused or alleged to be caused directly or indirectly by the information contained in it.
    本书中的信息是按“原样”分发的，没有任何保证。在书写这本书的过程中，我们采取了谨慎的措施，但无论是作者还是No Starch Press, Inc.，对于任何因所包含的信息直接或间接造成的任何损失或损害，不承担任何责任。
About the Author
    Vickie Li is a developer and security researcher experienced in finding and exploiting vulnerabilities in web applications. She has reported vulnerabilities to firms such as Facebook, Yelp, and Starbucks and contributes to a number of online training programs and technical blogs. She can be found at
     https://vickieli.dev/
    , where she blogs about security news, techniques, and her latest bug bounty findings.
    Vickie Li是一名开发人员和安全研究员，擅长在Web应用程序中发现和利用漏洞。她向Facebook、Yelp和Starbucks等公司报告了漏洞，并为许多在线培训计划和技术博客做出了贡献。她的网站是https://vickieli.dev/，在那里她博客聚焦于安全新闻、技术以及她最新的漏洞赏金发现。
    About the Tech Reviewer
    Aaron Guzman is co-author of
     IoT Penetration Testing Cookbook
    and product security lead with Cisco Meraki. He spends his days building security into IoT products and crafting designs that keep users safe from compromise. A co-chair of Cloud Security Alliance’s IoT Working Group and a technical reviewer for several published security books, he also spearheads many open-source initiatives, raising awareness about IoT hacking and proactive defensive strategies under OWASP’s IoT and Embedded Application Security projects. He has extensive public speaking experience, delivering conference presentations, training, and workshops globally. Follow Aaron on Twitter
     @scriptingxss
    .
    阿龙·古兹曼（Aaron Guzman）是IoT渗透测试食谱的合著者，也是思科Meraki的产品安全负责人。他每天都在将安全性融入IoT产品中，并设计能够保护用户免受妥协的方案。他是云安全联盟（Cloud Security Alliance）IoT工作组的联席主席，也是几本发表的安全书籍的技术审阅人员，他还领导许多开源倡议，提高人们对OWASP IoT和嵌入式应用安全项目下的IoT黑客和积极防御策略的认识。他有丰富的公开演讲经验，在全球范围内提供会议演讲、培训和工作坊。请在Twitter上关注阿龙@scriptingxss。
Foreword
    Twenty or even ten years ago, hackers like me were arrested for trying to do good. Today, we are being hired by some of the world’s most powerful organizations.
    如今，我们这样的黑客被世界上一些最有权力的组织雇用；而在二十年甚至十年前，我们试图做好事还会被逮捕。
    If you’re still considering whether or not you are late to the bug bounty train, know that you’re coming aboard at one of the most exciting times in the industry’s history. This community is growing faster than ever before, as governments are beginning to require that companies host vulnerability disclosure programs, Fortune 500 companies are building such policies in droves, and the applications for hacker-powered security are expanding every day. The value of a human eye will forever be vital in defending against evolving threats, and the world is recognizing
     us
    as the people to provide it.
    如果你仍在考虑是否已经错过了漏洞赏金的列车，那么你要知道的是，你正在一个行业历史上最激动人心的时期加入进来。这个社区正在以前所未有的速度增长，随着政府开始要求公司建立漏洞披露计划，财富500强公司正在纷纷制定这样的政策，而基于黑客的安全应用场景也在不断扩大。人眼的价值将永远在防御不断演变的威胁中起着至关重要的作用，世界正在认识到我们是提供这种服务的人。
    The beautiful thing about the bug bounty world is that, unlike your typical nine-to-five job or consultancy gig, it allows you to participate from wherever you want, whenever you want, and on whatever type of asset you like! All you need is a decent internet connection, a nice coffee (or your choice of beverage), some curiosity, and a passion for breaking things. And not only does it give you the freedom to work on your own schedule, but the threats are evolving faster than the speed of innovation, providing ample opportunities to learn, build your skills, and become an expert in a new area.
    漏洞赏金的美妙之处在于，与你通常的九点到五点的工作或咨询差异较大，它让你在任何你想要的时间、任何你想参加的资产上参与其中！你只需要一个良好的互联网连接、一杯美味的咖啡（或你选择的饮料）、一些好奇心和对挑战的激情。不仅给你自由的工作时间表，而且威胁的演变速度比创新的速度更快，为学习、提高技能和成为新领域专家提供了丰富的机会。
    If you are interested in gaining real-world hacking experience, the bug bounty marketplace makes that possible by providing an endless number of targets owned by giant companies such as Facebook, Google, or Apple! I’m
    not saying that it is an easy task to find a vulnerability in these companies; nevertheless, bug bounty programs deliver the platform on which to hunt, and the bug bounty community pushes you to learn more about new vulnerability types, grow your skill set, and keep trying even when it gets tough. Unlike most labs and Capture the Flags (CTFs), bug bounty programs do not have solutions or a guaranteed vulnerability to exploit. Instead, you’ll always ask yourself whether or not some feature is vulnerable, or if it can force the application or its functionalities to do things it’s not supposed to. This uncertainty can be daunting, but it makes the thrill of finding a bug so much sweeter.
    如果你对获取真实的黑客经验感兴趣，那么漏洞赏金市场提供了一个无数的目标，这些目标是由像 Facebook、Google 或 Apple 这样的大公司所拥有的！我并不是说在这些公司中找到漏洞是一件容易的事情，然而，漏洞赏金计划提供了一个寻找漏洞的平台，漏洞赏金社区会推动你学习更多的新漏洞类型，增强你的技能，即使遇到困难也要继续尝试。与大多数实验室和 Capture the Flags (CTFs) 不同，漏洞赏金计划没有解决方案或保证可利用的漏洞。相反，你总是会问自己是否某个功能存在漏洞，或者它是否可以迫使应用程序或其功能执行不应该执行的操作。这种不确定性可能令人望而却步，但是它使发现漏洞的乐趣倍感甜蜜。
    In this book, Vickie explores a variety of different vulnerability types to advance your understanding of web application hacking. She covers the skills that will make you a successful bug bounty hunter, including step-by-step analyses on how to pick the right program for you, perform proper reconnaissance, and write strong reports. She provides explanations for attacks like cross-site scripting, SQL injection, template injection, and almost any other you need in your toolkit to be successful. Later on, she takes you beyond the basics of web applications and introduces topics such as code review, API hacking, automating your workflow, and fuzzing.
    在这本书中，维基探讨了各种不同的漏洞类型，以提高您对网络应用程序攻击的理解。她涵盖了会使您成为一个成功的漏洞赏金猎人所需的技能，包括逐步分析如何选择适合您的程序、进行适当的侦查和撰写强有力的报告。她解释了像跨站脚本、SQL注入、模板注入等攻击，以及您需要的几乎任何其他攻击来让您成功。随后，她将带领您超越Web应用程序的基础知识，介绍代码审查、API攻击、自动化工作流程和模糊测试等主题。
    For anyone willing to put in the work,
     Bug Bounty Bootcamp
    gives you the foundation you need to make it in bug bounties.
    对于任何愿意付出努力的人来说，漏洞赏金训练营为您提供了在漏洞赏金中取得成功所需的基础。
    —Ben Sadeghipour
    -本·萨德吉普尔
    Hacker, Content Creator, and
    Head of Hacker Education at HackerOne
    黑客、内容创作者、HackerOne黑客教育主管
Introduction
    I still remember the first time I found a high-impact vulnerability. I had already located a few low-impact bugs in the application I was testing, including a CSRF, an IDOR, and a few information leaks. Eventually, I managed to chain these into a full takeover of any account on the website: I could have logged in as anyone, read anyone’s data, and altered it however I wanted. For an instant, I felt like I had superpowers.
    我仍然记得第一次发现高影响漏洞的时候。在我测试的应用程序中，我已经找到了几个低影响的漏洞，包括CSRF、IDOR和一些信息泄漏。最终，我成功地将它们链接在一起，完全接管了网站上的任何帐户：我可以像任何人一样登录、阅读任何人的数据并随心所欲地更改它。一瞬间，我觉得自己拥有了超能力。
    I reported the issue to the company, which promptly fixed the vulnerability. Hackers are probably the closest thing to superheroes I’ve encountered in the real world. They overcome limitations with their skills to make software programs do much more than they were designed for, which is what I love about hacking web applications: it’s all about thinking creatively, challenging yourself, and doing more than what seems possible.
    我已向公司报告此问题，公司迅速修复了漏洞。黑客可能是我在现实世界中遇到的最接近超级英雄的人。他们凭借自己的技能克服限制，使软件程序做到比设计更多的事情，这就是我喜欢黑客攻击网站应用程序的原因：这一切都是关于创造性思维，挑战自我，做出超越可能的事情。
    Also like superheroes, ethical hackers help keep society safe. Thousands of data breaches happen every year in the United States alone. By understanding vulnerabilities and how they happen, you can use your knowledge for good to help prevent malicious attacks, protect applications and users, and make the internet a safer place.
    与超级英雄一样，道德黑客有助于保护社会的安全。仅在美国每年就发生数千起数据泄漏事件。通过了解漏洞和其发生原因，您可以将自己的知识用于预防恶意攻击、保护应用程序和用户，使互联网成为更安全的地方。
    Not too long ago, hacking and experimenting with web applications were illegal. But now, thanks to bug bounty programs, you can hack legally; companies set up bug bounty programs to reward security researchers for finding vulnerabilities in their applications.
     Bug Bounty Bootcamp
    teaches you how to hack web applications and how to do it legally by participating in these programs. You’ll learn how to navigate bug bounty programs, perform reconnaissance on a target, and identify and exploit vulnerabilities.
    不久之前，黑客和对Web应用程序进行实验都是非法的。但现在，归功于漏洞赏金计划，您可以合法地进行黑客攻击；公司设立漏洞赏金计划来奖励安全研究人员在其应用程序中发现漏洞。漏洞赏金训练营教您如何黑入Web应用程序，并通过参加这些计划合法地进行黑客攻击。您将学习如何使用漏洞赏金计划，对目标进行侦察，并识别和利用漏洞。
    Who This Book Is For
    This book will help anyone learn web hacking and bug bounty hunting from scratch. You might be a student looking to get into web security, a web developer who wants to understand the security of a website, or an experienced hacker who wants to understand how to attack web applications. If you are curious about web hacking and web security, this book is for you.
    这本书将帮助任何人从零开始学习网络黑客和漏洞赏金猎人。你可能是一名想要进入网络安全领域的学生，一名想要了解一个网站安全性的网站开发者，或者一个有经验的黑客想要了解如何攻击Web应用程序。如果你对网络黑客和网络安全感到好奇，这本书适合你。
    No technical background is needed to understand and master the material of this book. However, you will find it useful to understand basic programming.
    阅读本书无需有技术背景。不过，如果您了解基本的编程，将对掌握本书材料有所帮助。
    Although this book was written with beginners in mind, advanced hackers may also find it to be a useful reference. In particular, I discuss advanced exploitation techniques and useful tips and tricks I’ve learned along the way.
    尽管本书是针对初学者编写的，但高级黑客也可能会发现它是一本有用的参考书。特别是在讨论高级利用技术和我在学习过程中学到的有用技巧和窍门方面。
    What Is In This Book
     Bug Bounty Bootcamp
    covers everything you need to start hacking web applications and participating in bug bounty programs. This book is broken into four parts: The Industry, Getting Started, Web Vulnerabilities, and Expert Techniques.
    漏洞赏金训练营覆盖了你开始黑客攻击Web应用程序和参加漏洞赏金计划所需的一切。本书分为四个部分：行业、入门、Web漏洞和专家技巧。
     Part I: The Industry
    第一部分：行业
     The first part of the book focuses on the bug bounty industry.
      Chapter 1: Picking a Bug Bounty Program
     explains the various types of bug bounty programs and how to choose one that suits your interests and experience level.
      Chapter 2: Sustaining Your Success
     teaches you the nontechnical skills you need to succeed in the bug bounty industry, like writing a good report, building professional relationships, and dealing with conflict and frustration.
     Part II: Getting Started
    第二部分：入门指南
     The second part of the book prepares you for web hacking and introduces you to the basic technologies and tools you’ll need to successfully hunt for bugs.
       Chapter 3: How the Internet Works
      explains the basics of internet technologies. It also introduces the internet security mechanisms you will encounter, such as session management, token-based authentication, and the same-origin policy.
      第三章，“互联网的工作原理”解释了互联网技术的基础知识。它还介绍了您将遇到的互联网安全机制，例如会话管理、基于令牌的身份验证和同源策略。
       Chapter 4: Environmental Setup and Traffic Interception
      shows you how to set up your hacking environment, configure Burp Suite, and effectively utilize Burp Suite’s various modules to intercept traffic and hunt for bugs.
      第4章：环境设置和流量拦截向您展示如何设置您的黑客环境，配置Burp Suite，并有效地利用Burp Suite的各个模块拦截流量并寻找漏洞。
       Chapter 5: Web Hacking Reconnaissance
      details the recon strategies you can take to gather information about a target. It also includes an introduction to bash scripting and shows you how to create an automated recon tool from scratch.
      第5章：Web黑客侦察详细介绍了您可以采用的侦察策略，以收集有关目标的信息。它还包括对bash脚本的介绍，并向您展示如何从头开始创建自动化侦察工具。
     Part III: Web Vulnerabilities
    第三部分：网站漏洞
     Then we start hacking! This part, the core of the book, dives into the details of specific vulnerabilities. Each chapter is dedicated to a vulnerability and explains what causes that vulnerability, how to prevent it, and how to find, exploit, and escalate it for maximum impact.
      Chapters
       6
      through
       18
      discuss common vulnerabilities you are likely to encounter in real-life applications, including cross-site scripting (XSS), open redirects, clickjacking, cross-site request forgery (CSRF), insecure direct object references (IDOR), SQL injection, race conditions, server-side request forgery (SSRF), insecure deserialization, XML external entity vulnerabilities (XXE), template injection, application logic errors and broken access control, and remote code execution (RCE).
      第6章到第18章讨论现实应用中可能会遇到的常见漏洞，包括跨站脚本(XSS)、开放式重定向、点击劫持、跨站请求伪造(CSRF)、不安全的直接对象引用(IDOR)、SQL注入、竞态条件、服务器端请求伪造(SSRF)、不安全的反序列化、XML外部实体漏洞(XXE)、模板注入、应用逻辑错误和破损的访问控制，以及远程代码执行(RCE)。
       Chapter 19: Same-Origin Policy Vulnerabilities
      dives into a fundamental defense of the modern internet: the same-origin policy. You’ll learn about the mistakes developers make when building applications to work around the same-origin policy and how hackers can exploit these mistakes.
      第19章：同源策略漏洞深入了解了现代互联网的一个基本防御：同源策略。您将会了解到开发人员在构建应用程序以规避同源策略时所犯的错误以及黑客如何利用这些错误。
       Chapter 20: Single-Sign-On Security Issues
      discusses the most common ways applications implement single-sign-on features, the potential weaknesses of each method, and how you can exploit these weaknesses.
      第20章：单点登录安全问题讨论了应用程序实现单点登录功能的最常见方法，每种方法的潜在弱点以及您如何利用这些弱点。
      Finally,
       Chapter 21: Information Disclosure
      discusses several ways of extracting sensitive information from a web application.
      最后，第21章：信息披露介绍了从Web应用程序中提取敏感信息的几种方法。
     Part IV: Expert Techniques
    第四部分：专家技巧
     The final part of the book introduces in-depth techniques for the experienced hacker. This section will help you advance your skills once you understand the basics covered in Part III.
       Chapter 22: Conducting Code Reviews
      teaches you how to identify vulnerabilities in source code. You will also get the chance to practice reviewing a few pieces of code.
      第22章：进行代码审查教您如何识别源代码中的漏洞。您还将有机会练习审查一些代码。
       Chapter 23: Hacking Android Apps
      teaches you how to set up your mobile hacking environment and find vulnerabilities in Android applications.
      第23章：《Android应用程序黑客攻略》教您如何设置移动黑客环境并查找Android应用程序中的漏洞。
       Chapter 24: API Hacking
      discusses application programming interfaces (APIs), an essential part of many modern applications. I discuss types of APIs and how to hunt for vulnerabilities that manifest in them.
      第24章：API黑客讨论应用程序编程接口（APIs），是许多现代应用程序的重要组成部分。 我讨论了API的类型以及如何寻找在它们中表现出的漏洞。
       Chapter 25: Automatic Vulnerability Discovery Using Fuzzers
      wraps up the book by showing you how to automatically hunt for vulnerabilities by using a method called fuzzing. You’ll practice fuzzing a web application with an open source fuzzer.
      第25章：使用模糊测试自动发现漏洞是本书的收尾之笔，会向您展示如何使用一种称为模糊测试的方法自动寻找漏洞。您将使用一个开源模糊测试工具来练习模糊测试一个Web应用程序。
    Happy Hacking!
     Bug Bounty Bootcamp
    is not simply a book about bug bounties. It is a manual for aspiring hackers, penetration testers, and people who are curious about how security works on the internet. In the following chapters, you will learn how attackers exploit common programming mistakes to achieve malicious goals and how you can help companies by ethically reporting these vulnerabilities to their bug bounty programs. Remember to wield this power responsibly! The information in this book should be used strictly for legal purposes. Attack only systems you have permission to hack and always exercise caution when doing so. Happy hacking!
    《漏洞赏金特训营》不仅仅是一本关于漏洞赏金的书。它是一本面向渴望成为黑客、渗透测试者或对网络安全有兴趣的人们的指南。在接下来的章节中，您将学习攻击者如何利用常见的编程错误来达到恶意目的，以及您如何通过合法地向公司报告这些漏洞来帮助它们的漏洞赏金计划。请务必谨慎行使此权力！本书中的信息应严格用于法律目的。只攻击您被授权攻击的系统，并在执行此操作时始终保持警惕。祝您愉快的黑客攻击！
Part I
      The Industry
1
      Picking a Bug Bounty Program
    Bug bounty programs: are they all the same? Finding the right program to target is the first step to becoming a successful bug bounty hunter. Many programs have emerged within the past few years, and it’s difficult to figure out which ones will provide the best monetary rewards, experience, and learning opportunities.
    漏洞赏金计划：它们都一样吗？找到适合的计划是成为成功的漏洞赏金猎人的第一步。在过去的几年里出现了许多计划，很难确定哪些计划会提供最好的货币奖励、经验和学习机会。
    A
     bug bounty program
    is an initiative in which a company invites hackers to attack its products and service offerings. But how should you pick a program? And how should you prioritize their different metrics, such as the asset types involved, whether the program is hosted on a platform, whether it’s public or private, the program’s scope, the payout amounts, and response times?
    一个漏洞赏金计划是一项倡议，其中公司邀请黑客攻击其产品和服务提供。但你应该如何选择一个计划？如何优先考虑不同的指标，例如涉及的资产类型，计划是否托管在平台上，计划是公开还是私人的，计划的范围，支付额度和响应时间？
    In this chapter, we’ll explore types of bug bounty programs, analyze the benefits and drawbacks of each, and figure out which one you should go for.
    在本章中，我们将探讨不同类型的漏洞赏金计划，分析它们的优点和缺点，并确定你应该选择哪一种。