0
0
20
60
80
PLC Throuhgput (Mbps)
40
Figure 7: Throughput vs cable distance between
source and destination for all links of the test-bed
(left). P Berr vs throughput for AV (right).
experiment, we observe that asymmetry was introduced, as
also found in [13].
Conclusion: The spatial variation of the PLC channel
depends on two factors: (i) the structure of the electrical
networks, i.e., the appliances attached and their position
on the grid, (ii) the distance between the stations. PLC
channels are very asymmetric and this is a key feature for
their spatial variability.
To optimize performance not only in terms of through-
put but also delay, hybrid networks need some estimation
of the retransmissions a frame suﬀers due to channel errors.
We also evaluate the relationship of the metric P Berr with
the available throughput. Figure 7 illustrates P Berr vs the
available throughput for all the links of our testbed. It shows
that P Berr decreases as throughput increases, as expected.
However, because the tone maps are updated based on this
metric, some average links might have lower P Berr than
the best links of the testbed. We further study the P Berr
metric in Section 8, by delving into packet retransmissions.
We show that P Berr can be used to predict the expected
number of retransmissions due to errors.
6. TEMPORAL VARIATION OF PLC
Little is known about PLC temporal variation, and we
observe in Section 4 that a temporal-variation study could
improve the quality of service in hybrid networks and the
accuracy of link metrics estimation. We now investigate the
temporal variation of the PLC channel.
We examine separately the two main components of chan-
nel modeling, i.e., the variation of noise generated by the
attached electrical appliances, and the variation of channel
transfer function (or attenuation). We employ BLE to inves-
tigate the main properties of PLC channels by using existing
commercial devices. We show that BLE reﬂects the chan-
nel quality and the fundamental features of PLC channel
modeling explained in Section 5.
We now discuss the timescales within which the channel
varies. These timescales have been introduced for channel
modeling and simulation in [15] (from which we borrow the
terminology to name these timescales). We ﬁrst focus on
noise generated by electrical appliances. It has been shown
by measurements, e.g., in [9], that the noise level varies
across subintervals of the mains cycle7 which yields the ﬁrst
scale governing PLC temporal variation (scale (i)). Due to
the periodic nature of the mains, this noise also varies in a
7The term mains cycle refers to the alternating electrical
current.
330scale of multiples of the mains cycle, which results in another
timescale for the temporal variation (scale (ii)).
We next focus on attenuation. As discussed in Section 5,
attenuation is introduced due mainly to impedance mismatches
in the transmission line (electrical cable) that are created by
connected appliances. As expected, this attenuation changes
when the structure of the electrical network changes hence,
in scales of minutes or hours (scale (iii)). This variability
strongly depends on appliances usage and on switching the
appliances, as this creates impulsive noise in the channel.
As hinted above, our study adopts an analysis of three
timescales that is validated by our measurements in the fol-
lowing subsections. Our work diﬀers from [15] in that we
examine the channel quality from an end-user and practi-
cal perspective, exploring metrics aﬀecting the end-to-end
performance. The three timescales are as follows.
(i) Invariance Scale: subintervals of the mains cycle, such
as the 6 tone-map slots of HPAV;
(ii) Cycle Scale: multiples of the mains cycles – depends
on the noise produced by appliances;
(iii) Random Scale: minutes or hours – related to connec-
tion or switching of electrical appliances and depends
on human activity.
We now introduce our variables, starting with some nota-
tions. For the invariance scale, we use the term tone-map
slots for the subintervals of the mains cycle, as we can mea-
sure the channel quality with respect to tone-map slots by
using PLC devices. Let L be the total number of tone-map
slots of the mains cycle, with each slot s having a duration
Ts, so that the total slots duration PL
s=1 Ts is equal to half
mains period (as speciﬁed in [6]). Let BLEs, 1 ≤ s ≤ L,
denote the BLE of tone-map slot s. In order to study the
channel with respect to the three scales deﬁned above, we
assume that time is discrete, with one time unit having real-
time duration equal to the mains cycle. Let µs ∈ R+ and
σs ∈ R+, 1 ≤ s ≤ L, represent the expected value and the
standard deviation of BLEs, and let νσs be a continuous
random variable with 0 mean and variance equal to σ2
s . In
the cycle scale, the mean and variance of BLEs, µs and σs,
respectively, are considered to be constant, and the varia-
tion of BLEs around its mean is described by νσs . In the
random scale, µs and σs vary with time due to electrical
load variability. Given the above, at any time step t, the
channel quality is described as
Timescale
BLEs
Variability caused by
(i) Invariance
Periodic noise
synchronous to mains
Mains cycle (20 ms)
BLE ˙= PL
s=1 BLEs/L
(ii) Cycle
Noise variability for each
tone-map slot s, 1 ≤ s ≤ L
Multiples of mains
cycle (ms or s)
BLE
(iii) Random
E
Minutes or hours
Electrical-load, hence
attenuation variability
Figure 8: BLE temporal variation.
levels over diﬀerent tone-map slots. Figure 9 shows the in-
stantaneous BLEs from captured frames in typical examples
of good and average links. We observe that in HPAV, the
total duration of the 6 tone-map slots is equal to half of the
mains cycle, thus BLEs changes periodically, with a period
of 10 ms. Each PLC frame uses a diﬀerent BLEs, depending
on which tone-map slot s its transmission takes place.
60
40
20
)
s
p
b
M
(
s
E
L
B
0
0
Link 6-1
20
40
60
80
Time (ms)
)
s
p
b
M
(
s
E
L
B
140
120
100
80
60
Link 0-2
0
20
40
60
80
Time (ms)
Figure 9:
captured PLC frames of saturated traﬃc.
Invariance-scale variation of BLE from
We highlight that this timescale is crucial for capacity es-
timation in PLC. With the examples of Figure 9, we observe
that there might be signiﬁcant variation along the mains cy-
cle, even for good and average links. Thus, link metrics have
to be estimated or averaged over all L = 6 tone-map slots.
We next study the average BLE of all 6 slots to examine the
variability of the average link-quality at longer time-scales,
i.e., (ii), and (iii).
BLEs(t) = µs(t) + νσs(t)(t), 1 ≤ s ≤ L.
(2)
6.2 Cycle Scale
The process νσs is diﬀerent for each link and its distribu-
tion can be time-varying over the random scale for a speciﬁc
link, due to the diﬀerent types of operating appliances and
to diﬀerent channel transfer-functions. The exact character-
ization of νσs is out of the scope of this work. In our study
for cycle-scale variation, we study how often the value of νσs
changes and how σs behaves with respect to the link qual-
ity. Figure 8 illustrates the three timescales and the factors
causing variability. We next examine each timescale.
6.1 Invariance Scale
The invariance scale of BLE is aﬀected by the noise lev-
els that appliances produce at diﬀerent subintervals of the
mains cycle, and it has direct consequences on estimating
link metrics. All our tests showed that noise has varying
We now examine the average time during which the qual-
ity of the links is preserved in the cycle scale. This sheds
light on the average length of probing intervals for link met-
rics, as there exists a tradeoﬀ in probing: too large intervals
might yield a non-accurate estimation, whereas too small
intervals can generate high overhead.
We conduct experiments that last 4 minutes, over all links
of the testbed. During each experiment, we request BLEs,
1 ≤ s ≤ L, every 50 ms, as this is the fastest rate at which
we can currently send MMs to the PLC chip. As we need
to avoid random changes in the channel due to switching
electrical appliances, all the experiments of this subsection
are conducted during nights or weekends (given the oﬃce
environment). For the cycle scale variation of the channel,
we assume that the electrical network structure is ﬁxed.
331.
Here, we evaluate the cycle-scale variation by using BLE
=
P6
s=1 BLEs/6, that is the average BLE over all tone-map
slots. We compare the performance between good and bad
links8. Figure 10 presents the variation for typical good and
bad links of our testbed. Observe that depending on their
quality, links exhibit diﬀerent behaviors. Our ﬁndings, vali-
dated not only by the representative examples shown here,
but also by experiments over one year period in all the links
of our testbed, are as follows.
Bad Links: Bad links, e.g., 11-4 and 6-5, tend to modify
the tone maps much more often than good links do. More-
over, they yield a signiﬁcantly higher standard deviation of
BLE than good links.
Average Links: Average links, e.g., 18-15 and 1-2, vary
less than bad links, and might preserve their tone maps for a
few seconds. During periods when average links vary often,
the standard deviation of BLE can be high, depending on
the channel conditions.
Good Links: The tone maps of good links can be valid
for several seconds, e.g., link 15-18. Good links that update
often the tone maps, such as link 3-1, have insigniﬁcant in-
crements or decrements, e.g., of up to 1%, or have impulsive
drops of BLE, e.g., of up to 5%, with the channel estimation
algorithm needing a few time-steps to converge back to the
average BLE value.
Asymmetry in Temporal Variability: By observing
links 15-18 and 18-15, we ﬁnd that the asymmetry discussed
in Section 5 translates not only in an average performance
asymmetry, but also in a temporal-variation asymmetry.
Channel Estimation Algorithms: Temporal variation
of link 15-18 is the same with HPAV and with HPAV500.
By noticing the impulsive BLE drops in link 18-15 and
by comparing HPAV with HPAV500, we detect a feature
of the channel estimation algorithm that might be vendor-
speciﬁc: The HPAV500 performance oscillation shows that
the estimation algorithm returns very low BLE values when
bursty errors occur. This uncovers that temporal variation
in PLC link quality also depends on the channel estimation
algorithm and future work should focus on comparing link-
metric estimations for diﬀerent vendors and technologies.
We next corroborate the above ﬁndings over all links of our
testbed. Let α be the inter-arrival time of two consecutive
BLE updates. Figure 11 shows the results of the average α
values and the standard deviation of BLE for all links sorted
by increasing BLE order, i.e., link quality. We observe that
good links tend to update less often their tone maps, and
also that BLE variability is smaller compared to bad links.
Although some good links might update BLE at a similar
frequency as bad links (∼ 100 ms), as we discussed above,
these links tend to have small increments and decrements
of BLE, yielding a stable average performance over minutes
and a low BLE standard deviation.
Conclusion: In cycle scales, that is seconds or minutes,
good links should be probed less often than bad links to
reduce overhead. The cycle-scale variation unveils how link
metrics should be updated depending on their quality.
6.3 Random Scale
In Sections 4.2 and 6.2, we observe that during timescales
of minutes, PLC does not vary much, with a standard devi-
8The classiﬁcation of the links based on their capacity de-
pends on the PLC technology thus, we do not introduce
strict thresholds for this characterization.
)
s
p
b
M
(
E
L
B
45
40
35
30
25
20
Oct. ’14
0
50
Link 11-4
Dec. ’14
150
100
Time (s)
Link 18-15
200
HPAV500
Feb. ’15
100
)
s
p
b
M
(
E
L
B
90
80
70
60
HPAV
Sept. ’14
0
50
100
Time (s)
150
200
)
s
p
b
M
(
E
L
B
150
140
130
120
110
100
90
Link 15-18
HPAV500
HPAV March ’14
HPAV Sept. ’14
0
50
150
100
Time (s)
200
30
25
20
15
)
s
p
b
M
(
E
L
B
10
0
90
80
70
60
)
s
p
b
M
(
E
L
B
50
0
122
120
118
116
)
s
p
b
M
(
E
L
B
114
0
Link 6-5
HPAV Dec. ’14
HPAV Sept. ’14
50
100
Time (s)
150
200
Link 1-2
HPAV
Feb. ’15
HPAV
Dec. ’14
50
100
Time (s)
150
200
Link 3-1
HPAV
Dec. ’14
HPAV
Feb. ’15
50
100
Time (s)
150
200
Figure 10: Examples of cycle-scale variation of BLE
for links of various qualities
104
103
102
)
s
m