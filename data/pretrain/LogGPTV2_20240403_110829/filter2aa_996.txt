1
⼀次jsp上传绕过的思考
背景
解决⽅案
jsp利⽤EL表达式绕过
jspx利⽤命名空间绕过
jspx利⽤绕过
@yzddmr6
前⼏天有个⼩伙伴做项⽬的时候遇到⼀个问题来问我，⼤概情况如下：
1. jsp的站，可以任意⽂件上传
2. 上传jsp会把到中的内容替换为空
问有什么突破办法？
背景
2
当时研究了⼀下后jsp和jspx各给了⼀个解决⽅案，发到星球⾥后@hosch3n师傅⼜给了⼀种⽅案，tql
其实问题等价于：
1. jsp不使⽤标签如何执⾏命令
2. jspx不使⽤ 如何执⾏命令
解决⽅案
3
jsp是默认解析el表达式的，并且在没有jsp标签的情况下也可以直接执⾏，这样就可以绕过jsp的限制。
星球⾥⾯@Gh0stFx也提到了这⼀点
因为jspx实际上是jsp的xml写法，所以继承了xml的所有特性，例如cdata跟html实体编码等，同样也继承
了命名空间的特性。
https://www.runoob.com/xml/xml-namespaces.html
jsp利⽤EL表达式绕过
jspx利⽤命名空间绕过
4
在这个标签中，jsp就是默认的命名空间，但是实际上可以随意替换成其他名字
这样就绕过了对的过滤
在jsp中可以利⽤表达式绕过，那么jspx中同样也可以，以下是jsp跟jspx语法的对照：
jspx利⽤绕过
JSP语法
JSP document语法
Page Directive
5
这个⽅法是@hosch3n师傅提出来的，把表达式写到jspx中，同样可以达到执⾏命令的⽬的
Include Directive
Tag Library Directive
xmlns:prefix=”Library URI”
Declartion
 …
Scriplet
 … 
Expression
 …
Comment