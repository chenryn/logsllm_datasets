User: 请解答这个和日志有关的问题how can we run multiple applications with different domain & port numbers in apache I Have two applications running on my server with domains 

 x.abc.com
 admin.x.abc.com

x.abc.com is running on port 80
admin.x.abc.com is running on port 8080


I can able to access x.abc.com from browser, but when I try admin.x.abc.com, it is sending requests to x.abc.com only.

What is the proper way to configure two different web applications with different domain &amp; port on single machine. Listed below my virtualhost files for x.abc.com &amp; admin.x.abc.com respectively

&lt;VirtualHost *:80&gt;
    ServerName www.x.abc.com
    ServerAlias x.abc.com
    RailsEnv test
    DocumentRoot /home/cp/cp/public
   &lt;Directory /home/cp/cp/public/&gt;
   &lt;/Directory&gt;
   LogLevel warn
   ErrorLog /home/cp/cp/log/error.log
   CustomLog /home/cp/cp/access.log combined
   RewriteCond %{HTTP_HOST} ^admin.x.abc.com
   RewriteRule (.*) http://localhost:8080/$1 [R=301,L]
&lt;/VirtualHost&gt;

&lt;VirtualHost *:8080&gt;
    ServerName www.admin.x.abc.com
    ServerAlias admin.x.abc.com
    RailsEnv test
    DocumentRoot /home/cp/cp_admin/public
   &lt;Directory /home/cp/cp_admin/public/&gt;
   &lt;/Directory&gt;
   LogLevel warn
   ErrorLog /home/cp/cp_admin/log/error.log
   CustomLog /home/cp/cp_admin/access.log combined
 &lt;/VirtualHost&gt;

Assistant: You can add mutliple VirtualHost directives for a single port. Apache will process them according to the names, i.e. ServerNameand ServerAlias. Note that Apache defaults to the first VirtualHost configured, if no match is found. The following configuration should work.

&lt;VirtualHost *:80&gt;
    ServerName www.admin.x.abc.com
    ServerAlias admin.x.abc.com
    ...
&lt;/VirtualHost&gt;

&lt;VirtualHost *:80&gt;
    ServerName www.x.abc.com
    ServerAlias x.abc.com
    ...
&lt;/VirtualHost&gt;