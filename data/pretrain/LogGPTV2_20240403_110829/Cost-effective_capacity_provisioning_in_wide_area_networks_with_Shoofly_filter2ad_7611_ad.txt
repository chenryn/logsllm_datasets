<= 3 hops <= 4 hops <= 5 hops
1
3
7
2
Demand scale factor
6
4
5
8
Figure 9: Impact of scaling demands on S’s cost savings.
Cost savings reduce by 2% as demand is scaled to 8X.
(<2%) in the potential cost savings of bypass as the trac demand
matrix is scaled to 8X the maximum present-day demands. Thus,
network operators can provision bypasses proposed by S
using scaled trac demands to make future-proof bypass decisions
without sacricing on cost savings.
Impact of network topology. Next, we evaluate S on
dierent network topologies. We have detailed information about
the network of the cloud provider we study, referred to as cloud
provider WAN or CP-WAN in the gures. Additionally, we eval-
uate S using the network topology and demand matrices
for prominent production networks, released by previous work [5,
23]. We assume that these networks operate a point-to-point op-
tical backbone. Figure 10a shows the percentage of ports saved
by S for the backbone networks of Abilene, B4, Nextgen,
CP-WAN and a custom topology from previous work. We nd that
S shows a consistent potential of saving hardware costs
in all network topologies, ranging from over 55% cost saving in
the Nextgen topology to 15% cost saving in the Custom network
topology. Figure 10b shows the fraction of regions in the networks
that participate in optical bypass. Over 50% of the regions in the
CP-WAN get bypassed by one or more wavelengths, realizing the
bypass potential we found in the inter-regional trac matrices (§2).
4.2 Lower data-rates from optical bypass
One key concern raised by optical bypass is that by forcing signals
to travel longer distances, a bypass-enabled topology can reduce the
capacity between regions. Our evaluation of S shows that
the bypass-enabled topology can not only meet 8X the present-day
trac demands (§4.1) but also enable 30-40% hardware cost savings
(Figure 9).
The reduction in capacity between regions occurs due to a down-
grade in signal modulation formats on shortcuts on account of
increased transmission distance. Figure 11 shows the modulation
formats of the bypasses enabled by S. We observe that fewer
540
SIGCOMM ’21, August 23–27, 2021, Virtual Event, USA
X.et al., Rachee Singh, Nikolaj Bjørner, Sharon Shoham, Yawei Yin, John Arnold, and Jamie Gaudee
)
%
(
d
e
v
a
s
s
t
r
o
P
60
40
20
0
A bilene
<= 3 hops
<= 4 hops
<= 5 hops
B 4
C P − W
C usto m 2
A N
N extgen
A bilene
C usto m 2
A N
N extgen
B 4
C P − W
Network Name
A bilene
B 4
C P − W
C usto m 2
A N
N extgen
)
%
(
d
e
s
s
a
p
y
b
s
n
o
g
e
R
i
100
75
50
25
0
A bilene
A N
C usto m 2
B 4
C P − W
Network name
N extgen
Figure 10: 10a shows that S can save over 40% of hardware costs of long-haul capacity in CP-WAN. 10b showes that majority of regions
in all network topologies get bypassed by one or more wavelengths.
(a) Percent cost saving by S.
(b) Percentage regions bypassed.
d
e
s
s
a
p
y
b
t
n
e
c
r
e
P
)
%
(
s
t
r
o
p
100G
150G
200G
40
30
20
10
0
<= 3 hops <= 4 hops <= 5 hops
Number of hops in shortcuts
Figure 11: Modulation formats on shortcuts of dierent lengths.
As the number of shortcut hops increases, the fraction of ports in
higher modulation formats reduce.
shortcut hops allow S to keep majority of the wavelengths
in higher order modulation formats e.g., of the 3-hop only shortcuts
allocated by S, over 45% can sustain 150 Gbps, 17% can sus-
tain 200 Gbps per wavelength. As S considers shortcuts with
higher hops, it can save more cost (Figure 8) but this higher sav-
ing comes at the cost of longer shortcut lengths and consequently
lower data rates. Figure 11 shows that fraction of bypasses that
can support higher modulation formats reduce as hop lengths in-
crease. When allowed up to 5-hop shortcuts, only 11% of shortcuts
can sustain 200 Gbps. We compare the split of all links based on
modulation formats in the original and bypass-enabled networks
in Figure 17 of Appendix A.2.
Network
Capacity
original  3-hop  4-hop  5-hop
160 G
153.5 G
157.5 G
153.5 G
Table 2: Norm. per-link capacity of the original network and net-
works with 3, 4 and 5 hop shortcuts.
To mitigate the concern of lowered network capacity due to by-
pass, we compute the normalized per-link capacity of the original
network and the bypass-enabled networks in Table 2. The normal-
ized link capacity in the original network is 160 Gbps whereas
bypass-enabled networks lower it by 4% in the worst-case.
5 FAILURE RESILIENT OPTICAL BYPASS
Enabling optical bypasses fundamentally changes the impact of
individual physical link failures on the IP network’s ability to carry
trac. For instance, in point-to-point networks, there is a one-to-
one mapping from physical to IP links. Therefore, the failure of a
541
physical link (e.g., ber cut, amplier failure) leads to an individual
IP link’s failure. However, in a bypass-enabled topology one physi-
cal link can underpin several IP links and the failure of one physical
link can cause multiple IP links to fail. Thus, we must revisit failure
resilience of the backbone network with optical bypasses.
There is a rich body of work that explores link failure resilience
in the context of trac engineering in the WAN. We incorporate their
methods of achieving failure resilience to the capacity provisioning
problem of S. In doing so, not only do we provision network
topologies with link failure resilience baked in, we also show that
S’s optimization can be extended to use various reliability
objectives. Of these, we design and implement two objectives: re-
silience to deterministic [25] and stochastic link failures [5]. The
work on forward fault correction (FFC) ensures that the cloud TE is
resilient to up to k deterministic IP link failures. TVaR introduced
TE in the presence of probabilistic link failures to meet availabil-
ity guarantees [5]. In this section we incorporate the resilience to
possible (§5.1) and probable link failures (§5.2) in S.
5.1 K-wise link failures
First, we discuss provisioning bypass-enabled cloud topologies re-
silient to the possibility of : simultaneous physical link failures.
This resilience guarantees that even if : physical links were to fail,
the resulting network after bypasses can continue to meet trac
demands. This is important since : physical link failures can trans-
late to more than : failures in the bypass-enabled topology. Today,
cloud providers provision to be resilient to :  2 link failures [25].
We formulate the problem of provisioning bypasses under :
simultaneous link failures by building on Alg. 1. In addition to the
objective and constraints of Alg. 1, this formulation includes a set of
constraints for each link failure scenario 8, with set of failing links
SRLG8. For instance, when : = 1, each SRLG8 contains each duplex
edge. Thus, for each failure scenario 8 and its set of failing links the
following constraints ensure that there is a feasible allocation of
ow that meets all demands in the bypass-enabled network:
D 5.1 (S  : ).
Maximize:ÕB |B| · FB
subject to:
(1)
(2)-(8) AllocationConstraints(ow,G , ~, F)
⇡3 ÕC2)3 owC, 83 2 ⇡
Cost-eective capacity provisioning in wide area networks with S
SIGCOMM ’21, August 23–27, 2021, Virtual Event, USA
1.0
0.8
0.6
0.4
t
u
p
h
g
u
o
r
h
t
.
m
r
o
N
0
shoofly
shoofly−k−wise
5
10
15
Demand scale factor
20
Figure 12: Throughput of failure resililent bypass topology.
C,
ow8
C  0,
83 2 ⇡
8C, 4 2 C, 4 2 SRLG8
(F18) ⇡3 ÕC2)3 ow8
for each 8
(F28) AllocationConstraints(ow8,G 8,~ 8,F )
(F38)
Provisioning under k-wise failures solves for the objective of
maximizing cost savings (as described in Alg. 1) while constrain-
ing the problem with the goal of nding feasible ow allocations
under all link failure scenarios. The failure scenario constraints in
Def. 5.1 share the wavelength decision variables, FB (Alg. 1) but
solve for individual ow allocations (ow8
C,G 8,~ 8) for each failure
scenario 8. Thus, the optimization nds wavelength assignments
for optical bypasses while ensuring that feasible ow assignments
are found for the original network and the network under every
failure scenario. The number of constraints of this formulation
grow with the number of failure scenarios considered. Recent work
has shown ways of translating such optimization formulations to
eciently solvable models [7]. Our current experiments use the
less scalable encoding; which is easier to encode and was sucient
for the current evaluation.
S formulates the : failure resilient bypass provisioning
problem using Alg. 1 and Def. 5.1 constraints for all single and
double link failures. We compute vanilla (no additional failure re-
silience), single link failure resilient and double link failure resilient
bypass-enabled topologies. We nd the cost savings from failure
resilient topologies are virtually indistinguishable from the vanilla
topologies (Figure 19 in Appendix). Thus, making S failure
resilient does not reduce hardware cost savings.
Evaluation. We implement and solve maximum ow trac engi-
neering on the two bypass-enabled network topologies: the rst
topology is without failure resilience and the second is resilient to
2 link failures. We solve several instances of the trac engineering
problem by failing 2 randomly selected links in both topologies
for each instance. Thus, each TE problem nds trac allocations
on the bypass-enabled topologies in the event of 2 simultaneous
link failures. Figure 12 shows the throughput of trac engineering
on the topologies as the demand between nodes is scaled from
present-day demands in the cloud network to 20X the present-day
demands. As expected, the throughput rises linearly as demand
scale increases, until the increase becomes sub-linear due to the net-
work capacity limits. At low demand scales, both networks achieve
similar throughput since double link failures do not stress over-
provisioned cloud networks. However, at high demand scales, the
failure resilient S topology achieves 5% higher throughput
than the vanilla topology.
542
5.2 Probabilistic link failures
Recent work has proposed a cloud trac engineering algorithm,
TVaR, that computes ow allocations that minimize the expected
un-met trac demands, called loss or + 0'V, under probabilistic link
failure scenarios [5]. The algorithm takes as input the likelihood of
link failure scenarios (&) and target network availability (V) to com-
pute ow allocations. The minimal loss (+ 0'V) is guaranteed with
probability V and the expectation over all scenarios where the loss
is greater than + 0'V is calculated by ⇠+ 0'V or conditional value
at risk. We augment S with TVaR’s demand constraints