struct reproducible scenarios where dangling data remains;
and bug bounty programs could reward their discovery.
9 Conclusion
We presented DELF, a system to safeguard deletion correct-
ness in large-scale OSNs in presence of developer mistakes
and complex data models. DELF’s main novelty lies in forc-
ing developers to annotate all their data types for deletion
before they are used and then detecting mistakes resulting into
inadvertent retention or inadvertent deletion. DELF entails
overhead during deletion yet the system enables developers
to delete data safely despite mistakes which invariably occur.
We showed how DELF prevented or minimized disruption at
FACEBOOK due to multiple bugs in deletion.
10 Acknowledgements
Many engineers contributed to DELF during its development.
We would like to acknowledge Ben Mathews and Scott Ren-
fro for bootstrapping DELF; and Adarsh Koyya, Akin Il-
erle, Amitsing Chandele, Andrei Bajenov, Anurag Sharma,
Boris Grubic, Gerard Goossen, Cristina Grigoruta, Gustavo
Pacianotto Gouveia, Gustavo Pereira De Castro, Huseyin Ol-
gac, Jordan Webster, Mahdy Nasr, Maria Mateescu, Masha
Kereb, Merna Rezk, Nikita Efanov, Ohad Almagor, Oleksandr
Manzyuk, Prakash Verma, Shradha Budhiraja, Shubhanshu
Agrawal, Sneha Padgalwar, Tudor Tiplea, and Vasil Vasilev
for contributing signiﬁcant components. Our paper builds
upon the work of FACEBOOK developers who annotated their
data models and investigated discrepancies DELF reported.
We would like to thank our shepherd, Sarah Meiklejohn,
the anonymous reviewers, and members of FACEBOOK’s le-
gal team including Bathilde Waquet, Sumit Shah and Scott
Mellon, for their invaluable feedback on prior paper drafts.
References
[1] M. Mondal, J. Messias, S. Ghosh, K. P. Gummadi, and A. Kate, “For-
getting in Social Media: Understanding and Controlling Longitudinal
Exposure of Socially Shared Data,” in Symposium On Usable Privacy
and Security (SOUPS). Denver, CO: USENIX, 2016.
[2] Y. Wang, G. Norcie, S. Komanduri, A. Acquisti, P. G. Leon, and
L. F. Cranor, “"I regretted the minute I pressed share": A Qualitative
Study of Regrets on Facebook,” in Symposium On Usable Privacy and
Security (SOUPS). Pittsburgh, PA: USENIX, 2011.
[3] J. Reardon, D. Basin, and S. Capkun, “SoK: Secure Data Deletion,” in
Symposium on Security and Privacy. Oakland, CA: IEEE, 2013.
[4] K. M. Ramokapane, A. Rashid, and J. M. Such, “"I feel stupid I can’t
delete... " : A Study of Users’ Cloud Deletion Practices and Coping
Strategies,” in Symposium On Usable Privacy and Security (SOUPS).
Santa Clara, CA: USENIX, 2017.
[5] M. Sleeper, J. Cranshaw, P. G. Kelley, B. Ur, A. Acquisti, L. F. Cranor,
and N. Sadeh, “"I read my Twitter the next morning and was aston-
ished": A Conversational Perspective on Twitter Regrets,” in Human
Factors in Computing Systems. Paris, France: ACM, 2013.
[6] L. Bauer, L. F. Cranor, S. Komanduri, M. L. Mazurek, M. K. Reiter,
M. Sleeper, and B. Ur, “The Post Anachronism: The Temporal Dimen-
sion of Facebook Privacy,” in Workshop on Privacy in the Electronic
Society (WPES). Berlin, Germany: ACM, 2013.
[7] “Regulation 2016/679 of the European Parliament and of the Council
of 27 April 2016 on the protection of natural persons with regard
to the processing of personal data and on the free movement of
such data, and repealing Directive 95/46/EC (GDPR).” [Online].
Available: https://eur-lex.europa.eu/legal-content/EN/TXT/PDF/?uri=
CELEX:32016R0679
[8] “California Consumer Privacy Act of 2018.” [Online]. Avail-
https://leginfo.legislature.ca.gov/faces/billTextClient.xhtml?
able:
bill{_}id=201720180AB375
[9] “Facebook
deleted
some
mistakenly
Live
videos.” [Online]. Available: https://techcrunch.com/2018/10/11/
facebook-deleted-live-videos/
people’s
[10] “Even years
later, Twitter doesn’t delete your direct mes-
sages.” [Online]. Available: https://techcrunch.com/2019/02/15/
twitter-direct-messages/
[11] “Myspace loses all content uploaded before 2016.” [Online].
https://www.theguardian.com/technology/2019/mar/18/
Available:
myspace-loses-all-content-uploaded-before-2016
1072    29th USENIX Security Symposium
USENIX Association
users
after
accounts
[12] “TikTok
deleted
[On-
line]. Available: https://www.theverge.com/2019/2/28/18245011/
tiktok-age-coppa-child-privacy-accounts-deleted-ftc-requirement
having
are
the wrong
over
putting
birthdays.”
13
in
their
[13] “Amazon Alexa transcripts live on, even after you delete voice records.”
[Online]. Available: https://cnet.co/2HdQkxk
[14] “Instead of deleting account, New York Times appends ‘1000’
to username and email address.” [Online]. Available: https:
//news.ycombinator.com/item?id=23005060
[15] “Dropbox bug sends years-old deleted ﬁles back to user ac-
counts.” [Online]. Available: https://www.techrepublic.com/article/
dropbox-bug-sends-years-old-deleted-ﬁles-back-to-user-accounts/
[16] “Facebook blames
your deleted
videos.” [Online]. Available: https://newyork.cbslocal.com/2018/
04/03/facebook-deleted-videos-bug/
for not deleting
bug
a
[17] P. Stahlberg, G. Miklau, and B. N. Levine, “Threats to Privacy in the
Forensic Analysis of Database Systems,” in SIGMOD. Beijing, China:
ACM, 2007.
[18] “Should we
[Online].
Available: https://softwareengineering.stackexchange.com/questions/
159232/should-we-ever-delete-data-in-a-database
ever delete
database?”
data
in
a
[19] Daniel Terdiman, “Why Deleting Personal Information On The Internet
Is A Fool’s Errand.” [Online]. Available: https://bit.ly/2JQDlEm
[20] “You just deleted Facebook. Can you trust Facebook to delete your
data?” [Online]. Available: https://bit.ly/2YoL4Ss
[21] N. Bronson, Z. Amsden, G. Cabrera, P. Chakka, P. Dimov, H. Ding,
J. Ferris, A. Giardullo, S. Kulkarni, H. Li, M. Marchukov, D. Petrov,
L. Puzar, Y. J. Song, and V. Venkataramani, “TAO: Facebook’ s
Distributed Data Store for the Social Graph,” in Annual Technical
Conference (ATC). San Jose, CA: USENIX, 2013.
[22] D. Beaver, S. Kumar, H. Li, J. Sobel, and P. Vajgel, “Finding a needle
in Haystack: Facebook’s photo storage,” in Operating Systems Design
and Implementation (OSDI). Vancouver, Canada: USENIX, 2010.
[23] J. Baker, C. Bond, J. C. Corbett, J. J. Furman, A. Khorlin, J. Larson,
L. Jean-Michel, Y. Li, A. Lloyd, and V. Yushprakh, “Megastore -
Providing Scalable, Highly Available Storage for Interactive Services,”
in Conference on Innovative Data Systems Research (CIDR), Asilomar,
California, 2011.
[24] J. C. Corbett, J. Dean, M. Epstein, A. Fikes, C. Frost, J. J. Furman,
S. Ghemawat, A. Gubarev, C. Heiser, P. Hochschild, W. Hsieh, S. Kan-
thak, E. Kogan, A. Lloyd, S. Melnik, D. Mwaura, D. Nagle, S. Quinlan,
R. Rao, L. Rolig, Y. Saito, M. Szymaniak, C. Taylor, R. Wang, and
D. Woodford, “Spanner: Google’s Globally Distributed Database,”
Transactions on Computer Systems, vol. 31, no. 8, 2013.
[25] F. Chang, J. Dean, S. Ghemawat, W. C. Hsieh, D. A. Wallach, M. Bur-
rows, T. D. Chandra, A. Fikes, and R. E. Gruber, “Bigtable: A
Distributed Storage System for Structured Data,” in Operating Systems
Design and Implementation (OSDI). Seattle, WA: USENIX, 2006.
[26] M. Annamalai, K. Ravichandran, H. Srinivas, I. Zinkovsky, L. Pan,
T. Savor, D. Nagle, M. Stumm, and I. Osdi, “Sharding the Shards :
Managing Datastore Locality at Scale with Akkio,” in Symposium on
Operating Systems Principles (SOSP). USENIX, 2018.
[27] A. Lakshman and M. Prashant, “Cassandra-A Decentralized Structured
Storage System,” in Large Scale Distributed Systems and Middleware
(2009). Big Sky, MT: ACM, 2009.
[28] A. Khurana and J. Le Dem, “The Modern Data Architecture The
Deconstructed Database,” USENIX ;login:, 2018.
[29] G. Decandia, D. Hastorun, M. Jampani, G. Kakulapati, A. Lakshman,
A. Pilchin, S. Sivasubramanian, P. Vosshall, and W. Vogels, “Dynamo:
Amazon’s Highly Available Key-value Store,” in Symposium on Oper-
ating Systems Principles (SOSP). Stevenson, WA: ACM, 2007.
[30] J. L. Carlson, Redis in action. Manning, 2013.
[31] “Neo4j Decreases Development Time-to-Market for LinkedIn’s
Chitu App.” [Online]. Available: https://neo4j.com/case-studies/
linkedin-china/?ref=solutions
[32] B. H. Bloom and B. H., “Space/time trade-offs in hash coding with
allowable errors,” Communications of the ACM, vol. 13, no. 7, pp.
422–426, 1970.
[33] P. Flajolet, É. Fusy, O. Gandouet, and F. Meunier, “HyperLogLog:
the analysis of a near-optimal cardinality estimation algorithm,” in
Discrete Mathematics and Theoretical Computer Science (DMTCS),
Nancy, France, 2001.
[34] S. Heule, M. Nunkesser, and A. Hall, “HyperLogLog in Practice: Al-
gorithmic Engineering of a State of The Art Cardinality Estimation
Algorithm,” in Intgernational Conference on Extending Database Tech-
nology / Database Theory (EDBT/ICDT). Genoa, Italy: ACM, 2013.
[35] J. Larisch, D. Choffnes, D. Levin, B. M. Maggs, A. Mislove, and
C. Wilson, “CRLite: A Scalable System for Pushing All TLS Revoca-
tions to All Browsers,” in Symposium on Security and Privacy. San
Jose, CA: IEEE, 2017.
[36] M. Honarkhah and A. Talebzadeh, “HyperLogLog in Presto:
[Online]. Available: https:
Faster cardinality estimation,” 2018.
//code.fb.com/data-infrastructure/hyperloglog/
[37] J. Dean and S. Ghemawat, “MapReduce: Simpliﬁed Data Processing
on Large Clusters,” in Operating Systems Design and Implementation
(OSDI). USENIX, 2004.
[38] K. Shvachko, H. Kuang, S. Radia, and R. Chansler, “The Hadoop
Distributed File System,” in Mass Storage Systems and Technologies
(MSST).
Incline Village, NV: IEEE, 2010.
[39] A. Thusoo, J. S. Sarma, N. Jain, Z. Shao, P. Chakka, N. Zhang,
S. Antony, H. Liu, and R. Murthy, “Hive - A Petabyte Scale Data
Warehouse Using Hadoop,” in International Conference on Data Engi-
neering (ICDE). Long Beach, CA: IEEE, 2010.
[40] Information Commisioners Ofﬁce, “Anonymisation: managing data
[Online]. Available:
protection risk code of practice,” 2012.
https://ico.org.uk/media/1061/anonymisation-code.pdf
[41] Lea Kissner, “Deidentiﬁcation versus anonymization,” 2019. [Online].
Available: https://iapp.org/news/a/de-identiﬁcation-vs-anonymization/
[42] ISO/IEC, “9075-2,” ISO, Tech. Rep., 2016. [Online]. Available:
www.iso.org
[43] MySQL Reference Manual,
“Using FOREIGN KEY Con-
straints.” [Online]. Available: https://dev.mysql.com/doc/refman/
5.6/en/create-table-foreign-keys.html
[44] MongoDB Manual, “Database References.” [Online]. Available:
[45] T.
Schraml,
https://docs.mongodb.com/manual/reference/database-references/
Integrity Workaround,”
in
[Online].
http://www.dbta.com/Columns/Database-Elaborations/
Database Trends And Applications
Available:
The-Referential-Integrity-Workaround-117422.aspx
“The Referential
(DBTA), 2017.
[46] MySQL 8.0 Reference Manual,
“Backup Strategy Sum-
mary.” [Online]. Available: https://dev.mysql.com/doc/refman/8.
0/en/backup-strategy-summary.html
[47] MySQL Reference Manual, “The Binary Log.” [Online]. Available:
https://dev.mysql.com/doc/internals/en/binary-log.html
[48] R. Chandra, T. Kim, M. Shah, N. Narula, and N. Zeldovich, “Intrusion
recovery for database-backed web applications,” in Symposium on
Operating Systems Principles (SOSP). ACM, 2011, pp. 101–114.
[49] “Facebook Reports First Quarter Results,” 2020. [Online]. Avail-
able: https://investor.fb.com/investor-news/press-release-details/2020/
Facebook-Reports-First-Quarter-2020-Results/default.aspx
[50] “MySQL.” [Online]. Available: https://www.mysql.com/
USENIX Association
29th USENIX Security Symposium    1073
[51] A. Torres, R. Galante, M. S. Pimenta, and A. J. B. Martins, “Twenty
years of object-relational mapping: A survey on patterns, solutions, and
their implications on application design,” Information and Software
Technology, vol. 82, feb 2017.
[52] P. Marinescu, C. Parry, M. Pomarole, Y. Tian, P. Tague, and I. Papa-
giannis, “IVD: Automatic Learning and Enforcement of Authorization
Rules in Online Social Networks,” in Symposium on Security and
Privacy. San Jose, CA: IEEE, 2017.
[53] L. Szekeres, M. Payer, L. T. Wei, and R. Sekar, “Eternal war in
memory,” in Symposium on Security and Privacy, IEEE, Ed., Oakland,
CA, 2014.
[54] D. Song, J. Lettner, P. Rajasekaran, Y. Na, S. Volckaert, P. Larsen, and
M. Franz, “SoK: Sanitizing for security,” in Symposium on Security
and Privacy, San Francisco, CA, 2019.
[55] P. Wilson, “Uniprocessor garbage collection techniques,” in Interna-
tional Workshop on Memory Management (IWMM), St.Malo, France,
1992.
[56] “C++ Dynamic memory management.” [Online]. Available: https:
//en.cppreference.com/w/cpp/memory
[57] R. Pang, R. Cáceres, M. Burrows, Z. Chen, P. Dave, N. Germer,
A. Golynski, K. Graney, N. Kang, L. Kissner, J. L. Korn, A. Par-
mar, C. D. Richards, M. Wang, and L. . Google, “Zanzibar: Google’s
Consistent, Global Authorization System,” in Annual Technical Con-
ference (ATC). Renton, WA: IEEE, 2019.
[58] F. Logozzo, M. Fahndrich, I. Mosaad, and P. Hooimeijer, “Zoncolan:
Using static analysis to prevent security issues - Facebook
Engineering,” 2019. [Online]. Available: https://engineering.fb.com/
security/zoncolan/
[59] G. J. Chen, J. L. Wiener, S. Iyer, A. Jaiswal, R. Lei, N. Simha,
W. Wang, K. Wilfong, T. Williamson, and S. Yilmaz, “Realtime Data
Processing at Facebook,” in SIGMOD. San Francisco, CA: ACM,
2016.
[60] M. Marchukov,
“LogDevice:
logs,” 2017.
logdevice-a-distributed-data-store-for-logs/
for
[Online]. Available: https://code.fb.com/core-data/
a distributed data
store
[61] S. Garg, S. Goldwasser, and P. N. Vasudevan, “Formalizing Data
Deletion in the Context of the Right to Be Forgotten,” in EUROCRYPT.
International Association for Cryptologic Research, 2020. [Online].
Available: http://link.springer.com/10.1007/978-3-030-45724-2{_}13
[62] Y. Doshi and H. Shah, “Now You See It, Now You Don’t: Uber’s
Data Deletion Service,” in Privacy Engineering Practice and Respect
(PEPR). Santa Clara, CA: USENIX, 2019.
[63] Lea Kissner, “Now You See It, Now You Don’t: Uber’s Data
Deletion Service talk presentation notes.” [Online]. Available:
https://twitter.com/LeaKissner/status/1161020063182249984
[64] H. Ritzdorf and N. Karapanos, “Assisted Deletion of Related Content,”
in Annual Computer Security Applications Conference (ACSAC), New
Orleans, LA, 2014.
[65] M. Hart, P. Manadhata, and R. Johnson, “Text classiﬁcation for data
loss prevention,” in Privacy Enhancing Technologies (PETS), Waterloo,
Canada, 2011.
[66] Y. Ji, S. Lee, E. Downing, W. Wang, M. Fazzini, T. Kim,
A. Orso, and W. Lee, “Rain: Reﬁnable attack investigation with
on-demand inter-process information ﬂow tracking,” in Computer
and Communications Security (CCS). ACM, 2017, pp. 377–390.
[Online]. Available: https://doi.org/10.1145/3133956.3134045
[67] T. Kim, X. Wang, N. Zeldovich, and M. Kaashoek, “Intrusion Recovery
Using Selective Reexecution,” in Symposium on Operating Systems
Design and Implementation (OSDI). Vancouver, Canada: USENIX,
2010.
[68] R. Chandra, T. Kim, and N. Zeldovich, “Asynchronous intrusion
recovery for interconnected web services,” in Symposium on Operating
Systems Principles (SOSP). ACM, 2013, pp. 213–227. [Online].
Available: http://dx.doi.org/10.1145/2517349.2522725
[69] A. Murillo, A. Kramm, S. Schnorf, and A. De Luca, “"If I press
delete, it’s gone" - User Understanding of Online Data Deletion and
Expiration,” in Symposium On Usable Privacy and Security (SOUPS).
Baltimore, MD: USENIX, 2018.
[70] C. Cachin, K. Haralambiev, H.-C. Hsiao, and A. Sorniotti, “Policy-
based Secure Deletion,” in Computer and Communications Security
(CCS). Berlin, Germany: ACM, 2013.
[71] A. Gutmann and M. Warner, “Fight to be Forgotten: Exploring
the Efﬁcacy of Data Erasure in Popular Operating Systems,” in
Annual Privacy Conference, Rome, Italy, 2019. [Online]. Available:
https://en.oxforddictionaries.com/thesaurus/delete
[72] J. Reardon, H. Ritzdorf, D. Basin, and S. Capkun, “Secure Data Dele-
tion from Persistent Media,” in Computer and Communications Secu-
rity (CCS). Berlin, Germany: ACM, 2013.
[73] S. Sarkar, T. I. Papon, D. Staratzis, and M. Athanassoulis, “Lethe: A
Portland, OR:
Tunable Delete-Aware LSM Engine,” in SIGMOD.
ACM, 2020.
[74] M. Minaei, M. Mondal, P. Loiseau, K. Gummadi, and A. Kate, “Lethe:
Conceal Content Deletion from Persistent Observers,” in Proceed-
ings on Privacy Enhancing Technologies (PETS), Stockholm, Sweden,
2019.
[75] D. Wright and P. De Hert, Privacy Impact Assessment.
Netherlands, 2012.
Springer
1074    29th USENIX Security Symposium
USENIX Association