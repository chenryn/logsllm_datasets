title:Is There WiFi Yet?: How Aggressive Probe Requests Deteriorate Energy
and Throughput
author:Xueheng Hu and
Lixing Song and
Dirk Van Bruggen and
Aaron Striegel
Is There WiFi Yet? How Aggressive Probe Requests
Deteriorate Energy and Throughput
Xueheng Hu, Lixing Song, Dirk Van Bruggen, Aaron Striegel
University of Notre Dame
Notre Dame, Indiana 46556
PI:EMAIL, PI:EMAIL, PI:EMAIL, PI:EMAIL
ABSTRACT
WiFi oﬄoading has emerged as a key component of cellu-
lar operator strategy to meet the rich data needs of modern
mobile devices. Hence, mobile devices tend to aggressively
seek out WiFi in order to provide improved user Quality
of Experience (QoE) and cellular capacity relief. For home
and work environments, aggressive WiFi scans can signif-
icantly improve the speed at which mobile nodes join the
WiFi network. Unfortunately, the same aggressive behav-
ior that excels in the home environment incurs considerable
side eﬀects in crowded wireless environments. In this paper,
we analyze empirical data collected from large (stadium)
and medium (classroom) venues, and show through con-
trolled experiments (laboratory) how aggressive WiFi scans
can have signiﬁcant implications for energy and throughput
for mobile nodes. We close with several thoughts on the dis-
joint incentives for properly balancing WiFi discovery speed
and crowded network interactions.
Categories and Subject Descriptors
C.2 [Computer-Communication Networks]: Miscella-
neous
Keywords
WiFi; Probe Request; Energy; Performance
1.
INTRODUCTION
The past several years have seen a veritable explosion of
data consumption on mobile devices. Smartphones, tablets,
and more recently the Internet of Things (IoT) have created
a nearly insatiable demand for ubiquitous wireless connec-
tivity. While the peak speeds for cellular (LTE) have risen
impressively, dense and indoor environments remain chal-
lenging scenarios. Although LTE-Advanced (LTE-A) will
oﬀer relief with the introduction of small cell support, ques-
tions remain with regards to small cell economic viability
and management complexity [1].
c(cid:13) 2015 Association for Computing Machinery. ACM acknowledges that this con-
tribution was authored or co-authored by an employee, contractor or afﬁliate of the
United States government. As such, the United States Government retains a nonexclu-
sive, royalty-free right to publish or reproduce this article, or to allow others to do so,
for Government purposes only.
IMC’15, October 28-30, 2015, Tokyo, Japan.
c(cid:13) 2015 ACM. ISBN 978-1-4503-3848-6/15/10 ...$15.00.
DOI: http://dx.doi.org/10.1145/2815675.2815709.
For dense or crowded environments, WiFi oﬄoading has
emerged as a cornerstone of wireless network operator strat-
egy. Despite the unlicensed nature of WiFi and potential
issues with unpredictable Quality of Experience (QoE), the
peak speeds of WiFi and more importantly the oﬄoading of
demand from the cellular network remain irresistible. Hence,
nearly all mobile devices aggressively push the user onto
WiFi networks. Whether the mobile device is conﬁgured
to prompt the user anytime WiFi is available or certain ser-
vices are restricted to WiFi only, the desire to oﬄoad is quite
clear. Further eﬀorts by standards bodies on protocols such
as ANDSF (Access Network Discovery and Service Func-
tion) [2], Hotspot 2.0 [3], ANQP (Access Network Query
Protocol), and 802.11ax (successor to 802.11hew) only rein-
force that notion.
However, unlike cellular service, WiFi is neither perva-
sive nor contiguous. Although ANDSF can eﬀectively steer
the user to WiFi and Hotspot 2.0 can streamline the user
joining WiFi, the mobile node must still ﬁnd the channel
in the WiFi spectrum where the intended WiFi service is
located. The root of this discovery process can be found
in the 802.11 Probe Request (PR) whereby a mobile node
will actively scan across the WiFi space (2.4, 5 GHz) for vi-
able 802.11 access points (APs). Access points, if inclined,
can respond with Beacon Responses. The entire process al-
lows the mobile device to quickly locate and join the WiFi
network rather than passively waiting to discover an AP.
Through the aggressive employment of active scans, mobile
nodes can be rapidly directed to WiFi, satisfying both user
QoE and decreasing cellular network load. For the ideal case
of the home and work environment where the density of mo-
bile devices is relatively manageable and the SSIDs are well
known, such a setup tends to work fairly well.
Unfortunately, the tuning that is wonderful for the home
and workplace tends to fare quite badly in the crowded or
ultra-dense environment, namely venues such as sports are-
nas [4], large conferences [5, 6], or large classrooms where
there is a signiﬁcant density of individuals. Moreover, the
ultra-dense environment is where WiFi oﬄoading is needed
most. In our paper, we show that not only do most mobile
nodes excessively waste energy trying to ﬁnd WiFi, we also
show that aggressive scans have signiﬁcant secondary eﬀects
on the legitimate users of any established WiFi networks.
In short, the purpose of our paper is to argue that aggres-
sive Probe Requests in the ultra-dense cases (hundreds or
thousands of nodes) are the wireless equivalent of ‘Are we
there yet?’, just as annoying, wasteful, and infuriating but
with signiﬁcant implications for overall network health and
317performance. While most practitioners in the wireless ﬁeld
would surmise such excessive Probe Requests to be a prob-
lem [7, 8], the degree to which such Probe Requests clutter
the network in today’s wireless devices is simply stunning.
To that end, the contributions of this paper are three-fold:
• Ultra-dense probe request dynamics: We capture and
analyze the dynamics of PRs via packet sniﬀers at four
home football games, measuring PR prevalence both at
the exterior (gates) and interior (bowl) in various man-
ners across those four games. We demonstrate that
most mobile devices continue to unashamedly probe
despite never ﬁnding WiFi. We show that the PR rate
in the stadium approaches nearly an order of magni-
tude more prevalence than even reasonably dense class-
room settings (2,500 per minute in 2.4 GHz, 900 per
minute in 5 GHz vs. 350 / 100 in the classroom). We
further characterize the scanning patterns of various
devices observed in such ultra-dense environments.
• Energy impact of probe requests: While the bulk of our
paper focuses on Probe Request dynamics, we charac-
terize the energy cost of active WiFi scanning, explor-
ing the energy cost of a complete WiFi scan (Probe
Request across all channels with appropriate Preferred
Network Lists (PNLs)). We show that aggressive scan-
ning can burn up to 44% more energy with little to no
adaptation in response to the success or failure of WiFi
scans to ﬁnd available WiFi.
• Throughput impact of probe requests: Finally, we iso-
late the negative eﬀects of aggressive WiFi scanning
across the 2.4 and the 5 GHz bands on network through-
put. We demonstrate that even only a relatively few
UEs (user equipments) under default settings can sig-
niﬁcantly reduce network throughput.
2. RELATED WORK
WiFi has received incredible attention from the research
community. For the purposes of this paper though, we are
chieﬂy concerned with works focusing on increased discov-
ery speed [9] and most notably, improved eﬃciency or accu-
racy for WiFi scanning [5–8, 10–12]. Our work is unique in
that we highlight the prevalence of Probe Requests in the
ultra-dense venue (aﬃrmed by [4]) as well as exploring the
patterns of the various devices observed in said venues.
The ability to eﬃciently and quickly scan is a fundamen-
tal requirement for fast, seamless handoﬀs in WiFi. Teng.
et. al in [9] proposed D-Scan, speciﬁcally targeted at im-
proving scan eﬃciency in dense environments. Monitoring
also plays a key role in distinguishing performance issues
with Yeo in [10] and more contemporary work by Rayanchu
et. al in [11] trying to pin down interference issues related
to WiFi. In their work, Gupta and Mohapatra [12] focused
speciﬁcally on the power consumption of WiFi on phones
while the work by Raghavendra et. al in [5] and Gupta et.
al in [6] looked at larger scale venues (i.e., conferences) and
overall performance. The issue of ultra-dense venues and
WiFi performance was recently discussed in a Cisco slide
deck for the 802.11ax working group meeting in Athens in
late 2014 [4].
Although the notion of needless Probe Requests is not a
new or necessarily a misunderstood topic, the challenge of
how to reduce such spurious PRs has seen some research
attention. Wu et. al proposed the concept of Footprint [8]
while Ananthanarayanan and Stoica proposed Blue-Fi [7] for
the express purpose of using cellular (Footprint) or Blue-
tooth (Blue-Fi) to eﬃciently guide WiFi scans. Unfortu-
nately, while admirable with regards to the focus of the
respective solutions, deployment and in particular the con-
struction of security relationships make such solutions ex-
ceptionally diﬃcult to realize in practice.
Industry stan-
dardization eﬀorts such as Hotspot 2.0, ANDSF, and eﬀorts
by the 802.11ax (previously 802.11hew) working groups are
making some progress but are still must also be deployed.
3. ULTRA-DENSE DATASET
In this section, we summarize the data collected from four
football games and two large class periods at the University
of Notre Dame. We begin with a general description of how
the data was gathered and continue with in-depth analyses
of the data.
3.1 Data Summary
The football data was gathered near gate entrances (dur-
ing normal queuing prior to ticketed entry) and in the bowl
of the stadium. Multiple Linux laptops (Ubuntu 14.04)
were used with extended wireless adapters (TP-Link TL-
WN722N, Airpcap NX-900) placed into monitor mode and
running tcpdump. Notably, the stadium does not have pub-
licly accessible WiFi. Several small WiFi APs line the edge
of the stadium as used for the ticketing system but that WiFi
is not publicly accessible. The stadium itself seats roughly
80,000 with ﬁve separate entrance gates (A-E). Crowds of up
to 150,000 gather around the stadium and tailgate, result-
ing in an exceptionally overwhelmed cellular network where
cellular network coverage is provided via the campus DAS
(Distributed Antenna System) for each of the three major
campus carriers (AT&T, Verizon, Sprint). For the Michi-
gan, Stanford, and North Carolina games, data gathering
commenced roughly one hour before the start of the game
to coincide when most ticket holders began to arrive at the
stadium. For the Northwestern game, data was collected
inside the stadium bowl in the student section during game
time. Two of the games (Stanford, Northwestern) had no-
table weather impacts with the Stanford game having the
most signiﬁcant impact due to consistent rain and abnor-
mally cold temperatures. Furthermore, fan interest had
waned over the course of the season following a mid-season
defeat to Florida State (mid-October) and various subse-
quent losses.
For the classroom venue, data was gathered at various
points in the largest classroom on campus (DeBartolo 101)
across multiple class periods. DeBartolo 101 can hold up
to 450 individuals though attendance at each of the ob-
served periods ranged in multiple hundreds. Each classroom
observation began prior to the start of the class and ran
through the end of the class session which lasted roughly
75 minutes. The classroom venue oﬀers an alternative view
whereby most UEs should have already established WiFi
connectivity with the well-established WiFi infrastructure.
In contrast to the stadium venue where UEs were especially
keen to search for WiFi due to the overloaded cellular net-
work, the classroom venue should demonstrate considerably
less scans once a mobile device is settled and joined to the
network.
318Venue
Date
Time Duration
Weather
Location
Band
# of PRs
# of Source MACs
Mean
Max
PRs / Min
Median
Stdev
Table 1: Probe Request Data Summary
Michigan
2014/09/06
27 min
Warm
Stadium Gate
2.4G
5G
75,791
4,785
2,778
3,721
2,690
460
7,977
1,458
294
596
295
119
Stanford
2014/10/04
42 min
Rainy,Cold
Stadium Gate
2.4G
5G
86,195