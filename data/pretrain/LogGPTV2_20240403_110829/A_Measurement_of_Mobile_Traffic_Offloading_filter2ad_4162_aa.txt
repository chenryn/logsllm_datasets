# A Measurement of Mobile Traffic Offloading

## Authors
Kensuke Fukuda<sup>1</sup> and Kenichi Nagami<sup>2</sup>

<sup>1</sup> National Institute of Informatics, Japan  
<sup>2</sup> INTEC, Inc., Japan

### Abstract
Efficient use of limited 3G mobile resources can be achieved through offloading mobile traffic to WiFi. However, the effectiveness of this approach in real-world scenarios is not well understood. This paper presents the results of a two-day-long user-based measurement of mobile traffic offloading by over 400 Android smartphone users in Japan. We find that the variation in aggregated traffic volume via WiFi is significantly greater than that via 3G. Additionally, traffic offloading through WiFi is common throughout the weekend and weekday nights, although it is less frequent during weekday rush hours. Our analysis reveals that a small fraction of users contributes to a large portion of the offloaded traffic. Specifically, the top 30% of users downloaded over 90% of their total traffic volume via WiFi, while the bottom 20% used only 3G. Furthermore, over 50% of users turned off their WiFi interface during business hours, and 17.4% of the total traffic volume was generated by users whose WiFi traffic was less than 1MB. These findings suggest significant room for improvement in current traffic offloading practices. We also observe that WiFi offloading is primarily performed using home access points (APs), with public WiFi APs being less commonly used.

### 1. Introduction
Smartphones are becoming increasingly popular worldwide. The Ministry of Internal Affairs and Communications of Japan reports that 3G mobile network traffic is doubling every six months in Japan [13]. This rapid increase poses a significant challenge for 3G carriers, as the frequency and bandwidth of 3G networks are limited compared to residential fiber-to-the-home (FTTH) access lines. In addition to the growing number of users, the flat-rate monthly fees for mobile phones contribute to this surge. Some 3G carriers have implemented bandwidth capping for heavy users and are promoting the offloading of 3G traffic to high-capacity, less congested fixed networks. Consequently, offloading 3G traffic through WiFi (IEEE 802.11 {a,b,g,n}) has gained considerable attention.

There are two primary scenarios for traffic offloading via WiFi: 
1. Using public WiFi access points (APs) provided by 3G carriers or other WiFi providers in downtown areas (e.g., cafes, stations, airports) to avoid congestion at 3G base stations. In Japan, the total number of such public APs is estimated to be over 300,000.
2. Using home APs, where high-speed networks have been rapidly deployed. In particular, the penetration of fiber access in residential areas in Japan is reported to be over 40% [3]. Some 3G carriers provide customized WiFi APs to non-professional users to facilitate easy WiFi use at home. Home WiFi APs account for approximately 65% of the total number of residential broadband users.

However, understanding the behavior of mobile traffic through offloading is challenging because 3G carriers cannot track offloaded traffic on their backbone networks, and ISPs providing FTTH services cannot distinguish between traffic generated by smartphones and other devices in homes. Therefore, this paper aims to characterize the usage of 3G and WiFi for smartphones in terms of traffic offloading. We developed special software for Android smartphones to measure their usage and collected two days' worth of traffic data from over 400 smartphone users in Japan. Our key findings are:
1. Traffic offloading in homes is common, with the total amount of traffic via WiFi being much larger than that via 3G. The average traffic offload ratio is 0.64, and the peak offload ratio reaches 0.95, indicating the effectiveness of offloading.
2. A small fraction of users contributes a large portion of the offloaded traffic. The top 30% of users downloaded over 90% of their traffic via WiFi, while the bottom 20% used only 3G. Additionally, 17.4% of the total traffic volume was generated by users whose WiFi traffic was less than 1MB. Over 50% of users turned off their WiFi interface during business hours, and some hybrid users downloaded most of their traffic via WiFi in shorter durations. These results suggest significant potential for improving offloading by promoting WiFi use.
3. WiFi offloading was primarily performed using home APs, with public WiFi APs being less commonly used in our dataset.

### 2. Dataset and Preprocessing
We developed specialized software to measure the traffic volume via 3G and WiFi for Android smartphones. The software reports the byte and packet values of the smartphone's network interfaces to an external server every 10 minutes, along with WiFi information (e.g., ESSID, BSSID), 3G network information (e.g., base station information), and device information (e.g., hardware and OS types). For privacy reasons, the software does not collect user IDs, GPS information, or application usage. We recruited 435 monitor users who own Android smartphones in Japan, sampled from a thousand potential candidates, considering demographics and the market share of 3G carriers. Over 90% of the monitor users reported having WiFi APs at home, indicating a bias towards advanced users. The measurement experiment was conducted on May 13th (Sunday) and 14th (Monday), 2012, spanning 48 hours.

For preprocessing, we removed traffic volume generated by tethering, which involves a smartphone relaying traffic from other devices (e.g., laptops) to the Internet. This was done to focus on traffic patterns generated by the smartphone itself. We also excluded traffic from smartphones with mobile WiMAX interfaces (IEEE 802.16e).

### 3. Results

#### 3.1 Global View
Figure 1 shows the variation in aggregated traffic volumes and the number of packets in 30-minute bins. Each plot represents different types of media: mRx (3G received), mTx (3G sent), wRx (WiFi received), and wTx (WiFi sent). The direction of the traffic is from the user's perspective (i.e., "received" corresponds to the user's download).

First, we observed higher WiFi traffic volumes than 3G, with the peak traffic volume being 1.5 times larger than that of mRx. Volumes on Sunday were higher than those on Monday, though Monday night also saw high WiFi traffic. This suggests lower WiFi availability on weekdays. Second, the peaks in both traffic volumes are not always synchronized, indicating that some users switch between 3G and WiFi based on availability. A sharp peak in mRx traffic volume at 6 PM on Monday, corresponding to rush hour in Japan, did not appear in wRx, suggesting that WiFi was less available during rush hours. The correlation coefficient of time series of mRx bytes and wRx bytes is 0.03, and that of packet-based time series is 0.11. Although each user switches between the two interfaces exclusively, the variations in aggregated traffic volumes do not show a strong positive or negative correlation.

![Figure 1. Traffic variation (bin size = 30 min): (a) bytes and (b) packets](figure1.png)

The Tx volumes are lower than Rx volumes, likely due to the typical client-server nature of smartphone applications. The traffic pattern of Tx resembles that of Rx in 3G packets, while in WiFi, it is synchronized but with some gaps. This suggests that the typical usage and applications of 3G and WiFi are different. These results are consistent with observations that most application traffic in 3G smartphone traffic is client-server [14,15].

```plaintext
(a) Bytes
(b) Packets
```

These findings highlight the need for further research and strategies to improve the efficiency and effectiveness of mobile traffic offloading, particularly during peak usage times and in business hours.