现了相互之间的数据调度、算法编排、模型管理等，使系统更具平台性及扩展性。
知识图谱最初是谷歌为了提升搜索引擎能力而提出的，描述实体与实体之间关系的
数据库模式。运维知识图谱将传统 CMDB 中以配置项为主体的关系型数据库管理模式，转
换到以配置项、系统应用、数据和算法为主要实体类型，之间的关联和配置属性为主要
关系类型的图数据库管理模式。在索引上，利用图数据库的级联查询能力，能够轻松描
述出传统关系型数据库中难以描述的查询需求，轻松获取所需数据；同时，数据的更新
依赖更小，能够对运维图谱的较小局部进行更新，即可完成传统 CMDB更新中对大量表项
和关系更新才能完成的操作。最后，图数据库可以应用丰富的图算法，描述应用故障的
影响传递行为。
3.3 利用数据工厂实现了数据的汇集与处理
日志灵活解析/多种复杂数据格式化: 提供常见日志格式的自动解析，将非格式化日
志转化为格式化日志。同时提供交互友好的提取字段功能。用户可使用鼠标划选日志内
容，系统将自动生成正则表达式,将日志中的有效信息划分为一个个字段，方便查看和检
索。也同时支持在数据接入存储之后，根据搜索统计需求，提取临时字段,并以这些临时
字段进行后续统计分析。解决了数据预先处理的性能损耗、冗余字段的磁盘占用、提取
规则变动时的重建处理等诸多常见问题。
可编程的日志搜索分析平台: 既支持全文索引,让运维人员可以像使用搜索引擎一
样查询日志,同时提供搜索处理语言 SPL（Search Processing Language）,帮助技术人员
在搜索框编写SPL 脚本,完成复杂的查询分析及机器学习算法。
海量数据准实时搜索引擎：分布式搜索引擎，具备高可靠性和高性能。支持时间文
本索引和全文检索，提供丰富的 API 用于索引、检索，能够快速搜索数百亿的日志以及
TB级数据。
3.4 开放式的平台架构
智能运维平台的整体系统架构采用 Hadoop平台作为存储和计算的支撑平台，开放式
的智能模型架构提供智能能力输出，通过基于微服务与分布式消息的数据总线为主线，
搭建而成，这种架构的优势在于随着算法的不断成熟，可以随时接入算法以及数据组合
成为新的智能运维场景。
14
整体架构如下图所示：
自下而上，最下面一层是数据源层，提供各种运维数据库包括结构化数据如关系型
数据库以及非结构化数据,例如各种系统日志，这些数据可以通过代理采集方式获取；另
外一部分数据来源是现有系统，例如监控平台、网管、APM等工具，这些平台本身已经提
供了各自该平台的事件或者性能数据，可以通过 API的方式进行数据采集或者推送；
数据源之上是数据总线，数据总线提供数据的接入、缓存、预处理，以及各个系统
之间的消息传递、API调用。这一层通过搭建异步消息总线例如 Kafka集群来实现消息交
互；
第三层是数据处理层，包括两个方面，首先是数据工厂，数据工厂提供的是数据流
式解析（例如数据加工、实时告警），数据计算以及存储能力；另外一部分是智能算法
层，主要提供、训练各种智能算法模型；
数据处理层之上是接口层，接口层是为了根据不同的智能化运维场景提供接口调用，
包括服务总线，主要提供 API 的注册、接口网关、状态、调用的管理，数据网关主要提
供数据查询、数据网关等功能；采用的架构为微服务架构和总线架构：微服务架构可以
将运维子系统的所有功能、操作、指令全部转变为原子操作，接受 AIOPS 的总体调度。
运维总线架构可以将各类系统的相互通讯模式由网状变为星型，降低关联耦合度，提高
通讯的速度、稳定性、可用性、可扩展性，使得数据通讯不再成为瓶颈；
最上面一层是 AIOps 场景层，该层次是通过调用 API 层提供的各种能力来实现智能
化场景。场景层的设置是根据事件的生命周期进行设置的，例如在发现问题阶段通过自
动基线、日志分类来判断异常，发现问题；到通过关联分析、日志深度检查、应用全链
路监控等来分析问题；通过匹配知识库，调用运维调度平台来定位问题；最后通过智能
预测来预测容量或者故障的发生，另外提供了辅助决策的功能，例如系统画像、用户工
单、请求分析等，本项目目前上线的功能为异常发现、定位、分析的功能，其他场景目
前正在建设中。
15
4、 与当前国内外、行业内同类研究、同类技术的综合比较
4.1 平台对比
选取了全球领先的 IT 管理解决方案提供商 BMC 的 BMC Truesight 作为对比对象，一
方面是因为在多个市场调查报中如 Gartner、Research In Action，BMC均处于AIOps 领
域领先位置，另外一方面我司生产中也部署了该平台，较容易进行对比。
总体来说，BMC Truesight 有完整、成熟的解决方案，如流程平台、自动化平台、容
量平台等，这些产品产品化成熟度很高，通过这些平台的组合可以实现一些智能场景，
但是在数据处理特别是日志数据、平台定制化、实际效果、算法算力以及经济成本方面，
本平台均有很大优势。
创新点 BMC TRUESIGHT 本项目优势
数据处理： 1、仅支持BMC代理进行采集，BMC有多1、数据工厂模块支持多种数据接入，支持多
1、支持多种数据采集； 个 KM(插件)，这些插件对各种组件、操种方式如Agent采集，API调用，数据推送，
2、支持业务指标提取； 作系统进行指标采集； jdbc连接等；
3、搜索存储引擎 2、对日志仅支持关键字告警，不支持对2、数据工厂支持实时、离线计算对指标进行
4、支持操作系统、中间件等日志进行集中采集存储处理，不支持对提取、处理、存储
数据库指标提取 数据库表采集； 3、支持全文检索，支持SPL，进行复杂逻辑查
3、不支持对业务指标进行计算处理 询
平台功能： 1、不支持业务指标标异常检测，仅支持1、无监督算法，针对不同的数据曲线采用不
1、单指标异常监控； 一些通用软件的指标 同的算法检测包括了性能指标、业务运行指标
2、故障定位； 2、需要手工创建业务影响模型，进行故（原则上只要是时序数据就支持）
3、日志异常检测； 障原因定位 2、采用多种算法组合集合图库对数万个指标
4、告警直接生成工单； 3、仅通过关键字进行日志告警 可以在分钟级别定位出异常模块或者指标
5、告警直接调用自动化工具； 4、仅支持调用BMC流程平台生成工单 3、自动触发日志异常检测，通过变量、模板、
5、支持调用简单脚本对简单故障进行处变量值等多种方式自动检测异常日志，分钟级
置 别可以完成对数千万条日志进行检测定位；
4、通过数据总线与我司现有流程平台对接，
实现手工、自动开单
5、考虑到风险管控，自动调用脚本进行故障
自愈尚未开发
其他方面： 1、作为全球顶级运维工具提供商 1、采用的是开源软件，这些都有成熟的生态
1、成熟度 ，成熟度很高； 社区，成熟度较高；
2、架构 2、分布式架构，扩展容易，健壮性高 2、包括各种数据库集群、搜索存储引擎、计
3、定制化开发 3、不支持定制化开发 算资源等均为集群模式，容易扩展；
4、成本 4、经济成本昂贵（每个操作系统的监控3、自主开发、持续迭代、灵活定制
需要数千元，每个组件的监控需要另外4、相对 BMC 软件，主要成本在于开发实施，
收费、平台另外收费），产品复杂，学全面覆盖了操作系统性能监控，极大的降低了
习成本很高 经济成本；开源软件学习成本也相对较低。
16
4.2 异常检测领域
在异常检测领域，传统的异常检测通常会存在着算法选取、参数调优困难、严重依
赖标签、性能不理想或缺乏理论基础等问题。而我们针对于上述问题采用一种基于深度
生成模型的无监督异常检测算法，此算法具有较强的理论解释力，该算法可以利用偶尔
可用的标签，减少对标签的依赖性，更高的实用性。更好的性能与更高算法精度：为所
有算法都计算出每个阈值对应的精度和召回率，通过选择阈值来进行决策。
技术创新点 国内外、同行业现状 本项目优势
无监督异常检测框架 基于人工标注的训练过程，或者人工 根据历史曲线特性进行侧写，自动选择算
选择算法、调节参数适配效果 法调参数，无需标注，无需人工干预，让
大规模进行异常检测成为可能
基于自分编码器的异常检测 主流采用 EWMA、3-sigma 或者 Arima 集成深度学习效果，检测效果更加精准且
算法 等通用检测、预测算法 能够更好地学习曲线特性
模型的无监督异常检测算法，此算法具有较强的理论解释力，该算法可以利用偶尔
可用的标签，减少对标签的依赖性，更高的实用性。更好的性能与更高算法精度：为所
有算法都计算出每个阈值对应的精度和召回率，通过选择阈值来进行决策。
4.3 异常定位领域
指标异常定位方面，传统算法通常通过构建依赖关系图来定位根本原因。但这种方
法无法推断软件服务的依赖关系，准确定位找到根源故障机器。所以我们采用一种可广
泛部署的框架，使用几乎所有软件服务中都可具备的机器 KPI 指标。利用领域知识，通
过算法模型完成分析定位操作，自动准确地定位软件服务故障的根本原因，从而快速操
作来解决服务故障。经过分析将真正故障机器排在第一位。
技术创新点 国内外、同行业现状 本项目优势
自动挖掘机器KPI关联异 提供KPI指标界面展示，利用运 自动进行关联异常挖掘，免去人工检
常 维人员的经验进行判断；或者对大量 查流程，同时采用了轻量级关联算法，相
指标进行在线异常监控，配置规则产 对于在线异常监控，可以精准定位数量级
生告警，由人工对告警进行关联 多上千倍的机器指标
机器自动聚类 利用人工经验关联多台机器的异 通过机器的行为相似度进行聚类，将
常情况 大量分析结果进一步浓缩、摘要，便于运
维人员进一步分析
PointWise排序算法 利用人工经验判断异常程度排序 能够结合历史情况进行学习迭代，免
情况 除人工判断过程，直接从大量分析结果中
摘取最重要的推荐给运维人员
17
4.4 日志聚类与异常定位领域
在日志处理领域，传统都是基于手工配置解析规则进行数据的转换解析，本项目首
次引入AI智能解析，基于自然语言处理技术结合 FT-Tree等算法，对原始日志进行自动
解析，提取特征变量，形成日志模板，从而结合异常检测和定位技术，对日志进行全面
的智能化处理，提升运维日志的利用效率。
技术创新点 国内外、同行业现状 本项目优势
海量日志模板提取 传统CMDB采用关系型数据库进行 本系统构建一种可动态添加分支的频
存储，不够灵活 繁项前缀树结构，准确从日志消息中提取日
志所代表的事件，支持增量式学习，高效地
将日志消息映射到模板上，从而应对日志规
模巨大、设备变更后产生新类型日志、日志
结构复杂且多样带来的挑战
异常日志检测与定位 当前基于人工规则检测单条异常日志 本系统将通过机器学习方法，自动、准确地
的方式存在人工开销大、召回率低、 检测单条异常日志和异常日志序列。此外，
不通用、计算效率低的缺点 由于日志通常是非结构化文本，因此其只有
被准确、高效地解析后才可以用于异常检
测。
4.5 知识图谱领域
同样，在知识图谱领域，传统的 CMDB 多采用关系型数据库存储，要构建复杂的系统
架构关系时不够灵活，且在查询时需要经过多层嵌套查询，系统执行效率低下。在某个
配置需要变更时，需要更新大量的关联关系信息。而我们所采用的知识图谱则采用了图
存储技术，可以在节点之间、应用架构层级之间任意插入节点，保障关系的动态化。
技术创新点 国内外、同行业现状 本项目优势
图数据库索引 传统CMDB采用关系型数据库进行存 采用图数据库进行存储，对需要经过多
储，不够灵活 层嵌套的查询，查询效率和语言组织灵
活度都大大提高