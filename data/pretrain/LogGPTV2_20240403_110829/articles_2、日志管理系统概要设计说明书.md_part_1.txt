![](media/image1.png){width="1.5in" height="0.7013888888888888in"}
日志易V2.1
概要设计说明书
北京优特捷信息技术有限公司
2018年2月
提要
本文档阐述了日志易的技术特性和指标
本文档阐述了日志易的系统组成及应用部署方案
版权所有 2018北京优特捷信息技术有限公司，保留所有权利 2018年2月
未经北京优特捷信息技术有限公司书面许可，本白皮书任何部分的内容不得被复制或抄袭用于任何目的。
本文档并不暗示北京优特捷信息技术有限公司提供的任何产品或服务或其功能与本白皮书描述的内容完全一致。
本文档的内容在未经通知的情形下可能会发生改变，敬请留意。
本文档提及一些产品或技术还可能是其它产品供应商的权益。
日志易是北京优特捷信息技术有限公司的注册商标。
**目 录**
1\. 概述 [1](#概述)
2\. 日志易的技术特性 [1](#日志易的技术特性)
2.1总体 [1](#总体)
2.2技术架构 [2](#技术架构)
2.2.1整体架构 [2](#整体架构)
2.2.2 系统性能 [3](#系统性能)
3\. 日志易的系统组成及应用部署方案 [4](#日志易的系统组成及应用部署方案)
3.1系统组成 [4](#系统组成)
3.1.1日志采集 [4](#日志采集)
3.1.2 资源协调 [5](#资源协调)
3.1.3 消息系统 [6](#消息系统)
3.1.4 日志处理 [7](#日志处理)
3.1.5日志检索 [8](#日志检索)
3.1.6 WEB服务 [9](#web服务)
3.2 应用部署方案 [10](#应用部署方案)
3.2.1应用部署概况 [10](#应用部署概况)
3.2.2 部署规模与资源需求 [10](#部署规模与资源需求)
3.2.3 部署方案 [12](#部署方案)
# 
# 1. 概述
近年来，国家对网络及信息安全越来越重视，2014年2月27日，中央网络安全和信息化领导小组成立，习主席担任组长。基础IT系统国产化是大势所趋。
北京优特捷信息技术有限公司为中国企业量身定制的日志搜索分析管理系统，以极高的性能价格比，成熟稳定的技术架构，服务中国企业客户。
在文档中，我们将从日志易系统的技术特性、日志易应用模式及部署方案两个大的方面，对日志易系统的应用解决方案，在技术上进行全面的阐述。
# 2. 日志易的技术特性
## 2.1总体
日志易的主要技术特点：
采用高性能、低延时的准实时流式处理，根据集群服务器性能和数量，可每秒处理10万条日志，相当于每天TB级的日志量，处理延时可在20秒内。
采用分布式、松耦合、可扩展的集群架构，各模块可水平扩展，如果哪个模块成为性能瓶颈，只需要增加运行那个模块的服务器数量。
提供开放的RESTful API接口，可供第三方做二次开发。
采用冗余容错的架构，所有模块都冗余部署，某台服务器出问题不会导致系统服务中断。
提供完善的系统监控，无论是硬件还是软件故障，都能够及时告警。
## 2.2技术架构
### 2.2.1整体架构
![](media/image2.png){width="5.768056649168854in"
height="2.9672681539807524in"}
图中蓝色部分为日志易的模块，红色部分为可通过RESTful API接入的第三方模块
。
日志采集系统
如果日志在服务器端是文件形式，日志采集可以采用Linux标配的rsyslog或日志易提供的agent。由rsyslog或日志易agent监控服务器的日志文件，读取日志文件及其增量并发送给日志易系统。
如果日志已经存入Hadoop系统或数据库，日志易可提供定制化agent，将日志从Hadoop系统或数据库里读出来并发送给日志易系统。
网络设备可通过syslog协议把日志传送过来。
消息系统
日志易采用分布式消息系统连接各个模块，消息系统也起到缓存的作用。
日志处理系统
日志处理系统能够根据配置的规则抽取日志关键字段，将非结构化的日志转换成结构化数据。抽取关键字段的好处是可以对关键字段进行统计分析。日志易将对关键字段及原始日志进行索引，用户可对关键字段及原始日志进行搜索。
日志易已经配置了常见日志的解析规则，对于日志易没有预先配置解析规则的日志，用户可通过后台或Web页面配置解析规则，抽取关键字段。即使没有抽取关键字段，用户仍然可以通过全文检索搜索日志。
日志易在日志做索引之前抽取关键字段，提高了检索的速度。
日志检索系统
对日志的关键字段及全文做索引，以时间维度将日志存为多个索引文件，方便用户决定保留多长时间的日志。索引文件采用分布式存储，并且有副本，保障高可用。
对于没有在日志处理系统中抽取关键字段的信息，在日志检索系统中，依然可以通过事后提取的方式完成即时的字段统计分析工作。
另外，日志检索系统也支持对不同来源的日志做关联分析。
前台服务系统
进行日志展现、数据可视化，支持各种统计功能及图表展现，实现流畅的图形用户交互。
权限管理系统
日志易支持基于角色的权限管理系统，并通过日志产生的主机、应用、标签三个维度对日志进行来源分组，不同的用户赋予查看不同日志、并基于可见日志范围进行解析、分析、告警等操作的权限。
RESTful API
日志易的一些功能通过RESTful API开放给用户做二次开发。
### 2.2.2 系统性能
日志易的最低硬件配置要求是4核8GB内存的虚拟机，一台这样的虚拟机可支持每秒处理1000条日志，对应的每天日志量约为20GB。
用户根据每天日志量估算硬件需求时，可参考这个指标。由于日志搜索对CPU、内存、硬盘I/O都有要求，具体硬件需求需要具体评估。硬盘推荐使用RAID
0+1或RAID0。
# 3. 日志易的系统组成及应用部署方案
## 3.1系统组成
系统设计兼顾产品、研发、运维多个维度，兼具灵活性和高可用的特点。整个日志易系统由多个模块组成，每个模块均支持多主结构，在线均可以集群方式运行，从而组成了各个子集群。系统组成如下：.
日志采集
资源协调
消息系统
日志处理
日志检索
WEB服务
集群内部各自实现负载均衡、容错、水平扩展等特性。通过如下各个集群概要您可以快速掌握系统整体结构。
### 3.1.1日志采集
一个高可用的，高可靠的，分布式的海量日志采集、聚合和传输的系统，支持在日志系统中定制各类数据发送方，用于收集数据；同时提供对数据进行简单处理，并写到各种数据接受方（可定制）的能力。
![](media/image3.tiff){width="5.768055555555556in"
height="3.1486111111111112in"}
\(1\) 可靠性
当节点出现故障时，日志能够被传送到其他节点上而不会丢失。集群提供了end-to-end模式来保障可靠性：收到数据agent首先将event发送到后端消息队列集群，如果数据发送失败，将event写到磁盘上，可以重新发送。
\(2\) 可扩展性
模块完全是多主平行结构，不存在单点故障问题。
\(3\) 可管理性
每个节点均提供metric
api接口，以json格式数据展现服务状态，方便提供服务指标和运维监控。
模块架构如下：
![](media/image4.png){width="5.768055555555556in"
height="4.292150043744532in"}