## 一次红队经历
上学期临近考试周的一个下午，学校老师邀请我和一位学弟参加一场红队活动。这次经历让我印象深刻，特别是其中一个攻击目标——英语四六级考试网站。

### 攻击准备与信息收集
首先，我们开始了前期的信息收集工作。利用ZoomEye和Nmap对目标IP段进行扫描，收集子域名等信息。在信息收集过程中，我们筛选出了一些可能存在安全漏洞的目标站点。通过一系列测试和批量扫描，最终确定了几个存在漏洞的薄弱点。

### 攻击案例分析

#### 公网暴露路由器
在使用ZoomEye时，我发现了一个有趣的网页标题：“TP-Link xxxx”。这显然是一个暴露在公网上的路由器。经过简单尝试，发现该路由器使用了弱口令（admin/admin）登录后台。进入后台后，我发现了一个“ping”功能，这显然是一个经典的命令注入漏洞。尽管前端JavaScript禁用了特殊字符并设置了最大长度限制，但我们通过修改浏览器控制台中的过滤函数为`return true`并将输入框的最大长度延长，成功绕过了这些限制。最终，我们获得了root权限，并实现了提权。

#### WebLogic中间件漏洞
在对几台主机进行扫描时，我们发现它们存在CVE-2019-2618漏洞。通过直接使用公开的PoC代码上传JSP Shell，我们迅速获取了最高权限。

### 特别有趣的攻击案例
在对某核心域名的子域名进行测试时（得分乘以10！），我们发现了一个非常有意思的站点。该网站的URL格式为`http://domain/xxxController.do?method`。当我们试图访问某个不存在的方法时，系统会报错并列出该控制器的所有方法。这表明其逻辑实现类似于switch/case结构。

进一步探索中，我们发现了三个不同的登录接口：login1、login2和login3。其中，login1是当前正在使用的后台管理界面，没有明显的弱口令；而login2和login3似乎是CMS系统自带的默认模板，虽然存在默认密码但并未启用。然而，在login2中，我们发现了一个重置密码的功能。通过抓包分析，我们得知该功能通过POST请求调用`loginController`的`reqInitFlag`方法。经过一番搜索，我们在网站的手册中找到了默认密码：123qwe???。利用这个密码，我们成功恢复了admin账户的访问权限。随后，我们利用后台文件上传功能中存在的任意文件上传漏洞，最终成功获取了Web Shell。

### 活动总结
此次红队活动不仅让我们积累了许多宝贵的经验，也极大地提升了我们的技能水平。凭借在这次活动中取得的成绩，我们最终获得了不错的排名。希望未来能够参与更多类似的实战演练。
> **备注**：学弟在这几天里似乎有些懈怠，甚至被我抓到他在偷偷玩《彩虹六号》游戏。