由于udev系统是一个正在变化的事物，我在其它文档进行了详细描述，在这里只提供了最少的信息。
Debian参考手册 84/233
3.8.1 内核模块初始化
通过modprobe(8)程序添加和删除内核模块，使我们能够从用户进程来配置正在运行的Linux内核。udev系统(参见
第 3.8 节)自动化它的调用来帮助内核模块初始化。
下面的非硬件模块和特殊的硬件驱动模块，需要被预先加载，把它们在”/etc/modules” 文件里列出 (参见
modules(5)).
• TUN/TAP模块提供虚拟的Point-to-Point网络设备(TUN)和虚拟的Ethernet以太网网络设备(TAP),
• netfilter模块提供netfilter防火墙能力(iptables(8),第 5.7 节),
• watchdogtimer驱动模块。
modprobe(8)程序的配置文件是按modprobe.conf(5)的说明放在”/etc/modprobes.d/”目录下，(如果你想避免
自动加载某些内核模块，考虑把它们作为黑名单放在”/etc/modprobes.d/blacklist”文件里.)
”/lib/modules/version/modules.dep”文件由depmod(8)程序生成，它描述了modprobe(8)程序使用的模块
依赖性.
注意
如果你在启动时出现模块加载问题，或者 modprobe(8) 时出现模块加载问题, ”depmod -a” 可以通过重
构”modules.dep”来解决这些问题。
modinfo(8)程序显示Linux内核模块信息。
lsmod(8)程序以好看的格式展示”/proc/modules”的内容,显示当前内核加载了哪些模块。
提示
你能够精确识别你系统上的硬件。参见第 9.5.3 节.
你可以在启动时配置硬件来激活期望的硬件特征。参见第 9.5.4 节.
你可以重新编译内核来增加你的特殊设备的支持。参见第 9.10 节.
Debian参考手册 85/233
Chapter 4
认证和访问控制
当用户（或程序）需要访问系统时，需要进行认证，确认身份是受信任。
警告
PAM的配置错误可能会锁住你的系统。你必须有一个准备好的救援CD，或者设立一个替代的boot分区。为
了恢复系统，你需要使用它们启动系统并纠正错误。
4.1 一般的 Unix 认证
一般的Unix认证由PAM（PluggableAuthenticationModules，即可插入的验证模块）下的pam_unix(8)模块提供。它
的3个重要文件如下，其内的条目使用“:”分隔。
文件 权限 用户 组 说明
/etc/passwd -rw-r--r-- root root （明文的）用户账号信息
/etc/shadow -rw-r----- root shadow 安全加密的用户账号信息
/etc/group -rw-r--r-- root root 组信息
Table4.1: pam_unix(8)使用的3个重要配置文件
“/etc/passwd”包含下列内容。
...
user1:x:1000:1000:User1 Name,,,:/home/user1:/bin/bash
user2:x:1001:1001:User2 Name,,,:/home/user2:/bin/bash
...
如passwd(5)中所述，这个文件中被“:”分隔的每项含义如下。
• 登录名
• 密码形式说明
• 数字形式的用户ID
• 数字形式的组ID
• 用户名或注释字段
Debian参考手册 86/233
• 用户家目录
• 可选的用户命令解释器
“/etc/passwd”的第二项曾经被用来保存加密后的密码。在引入了“/etc/shadow”后，该项被用来说明密码形
式。
内容 说明
（空） 无需密码的账号
x 加密后的密码保存在“/etc/shadow”
Table4.2: “/etc/passwd”第二项的内容
“/etc/shadow”包含下列内容。
...
user1:$1$Xop0FYH9$IfxyQwBe9b8tiyIkt2P4F/:13262:0:99999:7:::
user2:$1$vXGZLVbS$ElyErNf/agUDsm1DehJMS/:13261:0:99999:7:::
...
如shadow(5)中所述，这个文件中被“:”分隔的每项含义如下。
• 登录名
• 加密后的密码（开头的“$1$”表示使用MD5加密。“*”表示无法登录。）
• 最后一次修改密码的时间，其表示从1970年1月1日起的天数
• 允许用户再次修改密码的天数间隔
• 用户必须修改密码的天数间隔
• 密码失效前的天数，在此期间用户会被警告
• 密码失效后的天数，在次期间密码依旧会被接受
• 账号失效的时间，其表示从1970年1月1日起的天数
• …
“/etc/group”包含下列内容。
group1:x:20:user1,user2
如group(5)中所述，这个文件中被“:”分隔的每项含义如下。
• 组名称
• 加密后的密码（不会被真正使用）
• 数字形式的组ID
• 使用“,”分隔的用户名列表
注意
“/etc/gshadow”为“/etc/group”提供了与“/etc/shadow”相似的功能，但没有被真正地使用。
Debian参考手册 87/233
注意
如 果”auth optional pam_group.so” 这 行 添 加 到 了”/etc/pam.d/common-auth”， 并 且
在”/etc/security/group.conf” 里进行了设置，一个用户的实际组就可以被动态添加。参见 pam_group(8).
注意
base-passwd软件包包含了一份用户和组的官方文档“：/usr/share/doc/base-passwd/users-and-groups.html”。
4.2 管理账号和密码信息
下面是一些管理账号信息的重要命令。
命令 功能
getent passwd user_name 浏览“user_name”的账号信息
getent shadow user_name 浏览用户”user_name”隐藏的账户信息
getent group group_name 浏览“group_name”的组信息
passwd 管理账号密码
passwd -e 为激活的账号设置一次性的密码
chage 管理密码有效期信息
Table4.3: 管理账号信息的命令
其中的一些功能只能被root使用。密码和数据的加密参见crypt(3)。
注意
在设置了 PAM 和 NSS 的系统上（例如 Debian salsa 机器），本地的“/etc/passwd”、“/etc/group”和
“/etc/shadow”可能不会被系统激活使用。上述的命令即使处于这种环境下依旧是有效的。
4.3 好密码
在系统安装时建立一个账号或使用passwd(1)命令时，你应该选择一个好密码，它应该由6到8个字符组成，其中包
含下列根据passwd(1)设定的每个组合中的一个或多个字符。
• 小写字母
• 数字0到9
• 标点符号
警告
密码中不要使用可以猜到的词。账号名、身份证号码、电话号码、地址、生日、家庭成员或宠物的名字、字
典单词、简单的字符序列（例如“12345”或“qwerty”）等都是糟糕的选择。
Debian参考手册 88/233
软件包 流行度 大小 命令 功能
whois V:26,I:259 387 mkpasswd 具备crypt(3)库所有特性的前端
openssl
openssl V:838,I:995 2294 计算密码哈希(OpenSSL).passwd(1ssl)
passwd
Table4.4: 生成密码的工具
4.4 设立加密的密码
下面是一些用于生成加盐的加密密码的独立工具。
4.5 PAM 和 NSS
现代的类 Unix 系统（例如 Debian 系统）提供 PAM （Pluggable Authentication Modules，插入式验证模块） 和 NSS
（NameServiceSwitch，名称服务切换）机制给本地系统管理员，使他们能够配置自己的系统。它们的功能可以概括为
以下几点。
• PAM给应用软件提供了一个灵活的认证机制，因此涉及到了密码数据的交换。
• NSS提供了一个灵活的名称服务机制，它经常被C标准库使用，使例如ls(1)和id(1)这样的程序获得用户和组名
称。
PAM和NSS系统必须保持配置一致。
PAM和NSS系统中重要的软件包如下。
软件包 流行度 大小 说明
libpam-modules V:890,I:999 1005 插入式验证模块（基础服务）
libpam-ldap V:1,I:6 249 允许LDAP接口的插入式验证模块
libpam-cracklib
V:0,I:8 117 启用cracklib支持的插入式验证模块
libpam-systemd V:550,I:932 624 用于logind注册用户会话的插入式验证模块（PAM）
libpam-doc I:0 1002 插入式验证模块（html和文本文档）
libc6 V:925,I:999 12987 GNUC库：同样提供“名称服务切换”服务的共享库
glibc-doc I:9 3502 GNUC库：帮助页面
glibc-doc-reference
I:4 13188 GNUC库：参考手册，有info、pdf和html格式（non-free）
libnss-mdns I:508 141 用于解析组播DNS名称的NSS模块
libnss-ldap V:0,I:6 265 NSS模块，用于使用LDAP作为一个名称服务的
NSS模块，用于使用LDAP作为一个名称服务的
libnss-ldapd I:15 129
（libnss-ldap的新fork）
Table4.5: PAM和NSS系统中重要的软件包
• libpam-doc中“TheLinux-PAMSystemAdministrators’Guide”是了解PAM配置的必要文档。
• glibc-doc-reference中的“SystemDatabasesandNameServiceSwitch”是了解NSS配置的重要文档。
注意
你可以使用“aptitude search ’libpam-|libnss-’”命令查看更多的相关软件包。NSS缩写也可能意味着
“NetworkSecurityService，网络安全服务”，它不同于“NameServiceSwitch，名称服务切换”。
Debian参考手册 89/233
注意
PAM是用来为每个程序使用系统范围的默认值来初始化环境变量的最基础方法。
在systemd下,libpam-systemd软件包被安装用来管理用户登录，通过为logind在systemd控制组层级中注册用
户会话来实现。参见systemd-logind(8)、logind.conf(5)和pam_systemd(8)。
4.5.1 PAM 和 NSS 访问的配置文件
下面是一些PAM和NSS访问的重要配置文件。
配置文件 功能
为“program_name”程序设置PAM配置；参加pam(7)和
/etc/pam.d/program_name
pam.d(5)
/etc/nsswitch.conf 为每个服务条目设置NSS配置。参见nsswitch.conf(5)
/etc/nologin 通过pam_nologin(8)模块限制用户登录
/etc/securetty 通过pam_securetty(8)模块限制root访问tty
/etc/security/access.conf 通过pam_access(8)模块设置访问限制
/etc/security/group.conf 通过pam_group(8)模块设置基于组的限制
/etc/security/pam_env.conf 通过pam_env(8)模块设置环境变量
通过带有“readenv=1”参数的pam_env(8)模块设置额外的环
/etc/environment
境变量
通过带有“readenv=1 envfile=/etc/default/locale”