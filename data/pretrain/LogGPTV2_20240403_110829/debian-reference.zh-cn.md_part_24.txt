### udev系统与内核模块初始化

由于udev系统是一个持续发展的项目，其详细信息已在其他文档中有所描述，在此仅提供最基本的信息。

#### 3.8.1 内核模块初始化
通过`modprobe(8)`程序可以动态地添加和删除内核模块，这使得用户能够配置正在运行的Linux内核。udev系统（参见第3.8节）会自动调用`modprobe(8)`以帮助完成内核模块的初始化过程。

以下是一些需要预先加载的非硬件相关模块和特定硬件驱动模块，它们应在`/etc/modules`文件中列出（详情请参阅`modules(5)`）：
- TUN/TAP模块：提供虚拟点对点网络设备(TUN)及虚拟以太网设备(TAP)。
- Netfilter模块：为iptables防火墙提供功能支持（详见第5.7节）。
- Watchdog定时器驱动模块。

`modprobe(8)`的配置文件遵循`modprobe.conf(5)`规范，并放置于`/etc/modprobe.d/`目录下。若希望阻止某些内核模块被自动加载，可将这些模块列入黑名单，存放在`/etc/modprobe.d/blacklist`文件中。

`/lib/modules/version/modules.dep`文件由`depmod(8)`生成，用于描述`modprobe(8)`使用的模块依赖关系。如果在启动过程中或使用`modprobe(8)`时遇到模块加载问题，可以通过执行`depmod -a`命令重新构建`modules.dep`来尝试解决问题。

`modinfo(8)`程序可用于显示Linux内核模块的相关信息；而`lsmod(8)`则以易读格式展示当前已加载至内核中的所有模块列表（等同于查看`/proc/modules`的内容）。

提示：
- 精确识别你的系统上的硬件，请参考第9.5.3节。
- 在启动时配置硬件以启用所需的特性，请查阅第9.5.4节。
- 若需增加对你特殊设备的支持，考虑重新编译内核，请参见第9.10节。

---

### 认证与访问控制

当用户或应用程序试图访问系统资源时，必须经过身份验证以确保请求者的身份可信。

**警告**：PAM配置错误可能导致系统锁定。因此，强烈建议准备一个恢复CD或者设置备用引导分区以便在出现问题时能够及时修复系统。

#### 4.1 通用Unix认证
在PAM（Pluggable Authentication Modules）框架下，传统的Unix认证由`pam_unix(8)`模块提供。以下是该模块所依赖的三个关键文件及其权限设置：

| 文件         | 权限       | 用户  | 组   | 描述                               |
|--------------|------------|-------|------|------------------------------------|
| /etc/passwd  | -rw-r--r-- | root  | root | 明文存储的用户账户基本信息           |
| /etc/shadow  | -rw-r----- | root  | shadow | 安全加密后的用户密码信息             |
| /etc/group   | -rw-r--r-- | root  | root | 组成员信息                           |

`/etc/passwd`文件包含如下条目：
```
user1:x:1000:1000:User1 Name,,,:/home/user1:/bin/bash
user2:x:1001:1001:User2 Name,,,:/home/user2:/bin/bash
...
```

每个字段的意义如下：
- 登录名
- 密码占位符
- 数字形式的用户ID
- 数字形式的组ID
- 全名或其他注释
- 主目录路径
- 默认shell

注意：“/etc/passwd”中的第二个字段曾经用来存放加密过的密码，但自从引入了“/etc/shadow”之后，这里通常只保留一个指示符如"x"来表示实际密码存储于shadow文件中。

`/etc/shadow`文件示例：
```
user1:$1$Xop0FYH9$IfxyQwBe9b8tiyIkt2P4F/:13262:0:99999:7:::
user2:$1$vXGZLVbS$ElyErNf/agUDsm1DehJMS/:13261:0:99999:7:::
...
```

各字段含义如下：
- 用户名
- 加密密码
- 自上次更改密码以来的天数
- 密码最短有效期限
- 密码最长有效期
- 密码过期前多少天开始警告
- 密码过期后仍可接受登录的时间长度
- 账户失效日期

关于`/etc/group`文件内容：
```
group1:x:20:user1,user2
```

具体字段说明：
- 组名称
- 未使用的加密密码字段
- 组ID号
- 成员用户名列表

此外，“/etc/gshadow”为组提供了类似“/etc/shadow”的安全功能，但在实践中较少被直接使用。

更多关于用户管理和密码策略的信息，请继续阅读后续章节。