## Page 1669
cute
pretty
happy
nice
fun
young
81333
40954
36263
30622
27900
sweet
friendly
coo1
weird
hot
gay
20362
14895
14709
12662
12409
Cute
funny
scary
sexy
old
goofy
12132
11508
11445
11287
10958
10511
emo
shy
10292
10207
最不常见的标签是什么？
Show the least common tags.
>tail (sorted_count, 20)
ubersot
unsa11
1
1
1
your.nose.is.sexymamama!!
我
浅
1
1
1
良
？
haiir!!
1
1
1
白人
贤母
1
1
1
WAA
才夕
1
1
ewkyB
cweeT
xepHA
1
1
KpacHBaA!
1
1
查看一些标签会对范化有问题。“cute"和"Cute"是否应该归并为相同
的标签？标点符号是否应该全部丢掉？看起来很滑稽的亚洲字体的
全角问号（?）是否应该认为和ASCII的问号（?）一样？显然，这取
决于应用。只要可能，我们的本能是慎之又慎，保留原始数据的完
整性。这保护了信息；举个例子，标签"hot"和"HOT！"肯定包含不
同的语义内容。通常，当针对特定的可视化或者分析，对数据进行
归并是更容易的，而不是提前猜测所有的需求，并且被强迫撤销所
有值钱的范化决策。
1668
---
## Page 1670
标签分布的基本绘图查看的是标签的频率相对于其频率的排序。通
常来说，当对单词或者其他词汇项进行计数时，我们看到的是从最
频繁出现的单词很快下降到最不频繁出现的单词。在我们的数据
总共有240万的标签，其中有29万个唯一标签。最高的1000个唯一标
签出现频率是140万——超过所有标签的一半。而在这些标签的出现
频率中，有非常显著的下降趋势。从常用标签表中，我们看到最常
见的标签“cute"出现了3.6万次，而第二常见的标签“pretty"出现的频
率只有它的一半。
For the top 1, 000 tags， >s=sorted_counts[1: 1000]
draw a plot of their counts. >barplot(s)
1935年，语言学家GeorgeZipf观察到词频分布遵循“幂函数定律”
(pwerlaw)，其中第n个单词的频率和（1/ns)成正比，其中s是个常
量。和高斯分布不同，该分布包含有限的变量，这使得它不适合于
某些统计算法。流行的书如NassimNicholasTaleb的《TheBlack
Swan》(Rndom House出版）和Chris Anderson的《TheLong Tail》
(Hperion出版）使得这些分布分别以“重尾"和"长尾"分布而著名。实
际上，我们的数据包含一条很长的长尾：22万个单词，或者词汇的
76%只出现一次。
标签的频率和频率排序最高的1000个标签
F000'08
出现频率
60,000
40,000
20,000
排序有序的标签
1669
---
## Page 1671
图17-10：出现频率最高的1000个标签的标签频率
通过在对数空间描绘我们的单词的出现频率图，我们可以查看这些
单词出现的频率是否满足幂函数定律分布（见图17-11）：
Plot log ranks >log_ranks=log (1: length(sorted_counts))
against log frequency.>
plot (log_ranks, log (sorted_counts) )
词频对数和排序对数
0000
10,000
1,000
使用频率
100-
使
10-
可爱幸福性感电子呆笨屁股野蛮递逼警察
闲聊
排序有序的标签
图17-11：通过对数排序的标签的对数频率，包含幂函数定律模型
的拟合线
幂函数定律分布在对数-对数空间上，看起来应该是线性的：
Fit a model of log count against log rank
model=1m (log(sorted_counts) ~log_ranks)
and draw it on Figure 17-10. >abline (model)
1670
---
## Page 1672
我们发现标签的概率很接近（1/n80）分布。（如果你觉得它看起来
像最佳拟合线，记住所有点的76%是在数据的最右下侧的边上）
如果你在任何文本一一报纸、小说、Web页面等上描绘这种对数-对
数频率的绘图——它看起来都很相似[!l。当然，当FaceStat的用户写
描述标签时，它们参与的是一种语言行为，这种行为和其他类型的
人类通信在本质上很相似。
这些标签如何拟合剩余的数据？第一步需要做的是从标签中随机选
取样本，在我们已经生成的绘图上绘制（见图17-12）。
boobs
secretive pretty
topless
high-strung
gorgeousslunning!
sassy
ehdog?
Sweet
pretty
dbda
averaqe
normal
Loser
nique
dorky
seno@pofy
loser
ack!
chubby
uooB
Strange
kill
fishieFBr's-Most-Wanted
wtf?
stunned
MollyMaid?
geek
图
17-12：基于平滑后的魅力与年龄描绘的标签样本图（见彩图
64)
在该图中，深暗色表示政治背景和魅力的密度的全局分布。单词是
从分布中随机抽样出来的。蓝色词表示男性标签，粉色词表示女性
1671
---
## Page 1673
标签。这么做可以使我们感觉到标签是否和图中的变量一致。数据
看起来很合理，标签“平均”显示在图形的中央，而被标记为“接近顶
尖"的人显示在“自由/魅力”象限，而标记为"土里土气的"则是在“保
守/丑陋"象限。该图可以通过不同的随机种子生成多次，可以查看
全局数据的标签分布。
[1].Zipf,George.1935.《The Psychobiologyof Language》(MT出版社）