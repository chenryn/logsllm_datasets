 Connections and Authentication / Security and Authentication password_encryption on \N \N
\N \N
Server Configuration
 category, name, setting, min_val, max_val, enumvals, unit
 Customized Options custom_variable_classes \N \N \N \N
 Developer Options ignore_system_indexes off \N \N \N \N
 Developer Options post_auth_delay 0 0 2147483647 \N s
 Developer Options allow_system_table_mods on \N \N \N \N
 Developer Options trace_recovery_messages log \N \N
{debug5,debug4,debug3,debug2,debug1,log,notice,warning,error} \N
 Developer Options pre_auth_delay 0 0 60 \N s
 Developer Options zero_damaged_pages off \N \N \N \N
 Developer Options debug_assertions off \N \N \N \N
 Developer Options trace_sort off \N \N \N \N
 Developer Options trace_notify off \N \N \N \N
 Error Handling restart_after_crash on \N \N \N \N
 Error Handling exit_on_error off \N \N \N \N
Server Configuration
 category, name, setting, min_val, max_val, enumvals, unit
 File Locations config_file /pgdata/digoal/1921/data02/pg_root/postgresql.conf \N \N \N \N
 File Locations hba_file /pgdata/digoal/1921/data02/pg_root/pg_hba.conf \N \N \N \N
 File Locations data_directory /pgdata/digoal/1921/data02/pg_root \N \N \N \N
 File Locations ident_file /pgdata/digoal/1921/data02/pg_root/pg_ident.conf \N \N \N \N
 File Locations external_pid_file \N \N \N \N
 Lock Management max_pred_locks_per_transaction 640000 10 2147483647 \N
 Lock Management max_locks_per_transaction 64 10 2147483647 \N
 Lock Management deadlock_timeout 1000 1 2147483647 \N ms
 Preset Options server_version 9.1.3 \N \N \N \N
 Preset Options wal_block_size 8192 8192 8192 \N
 Preset Options server_version_num 90103 90103 90103 \N
 Preset Options block_size 8192 8192 8192 \N
 Preset Options segment_size 131072 131072 131072 \N 8kB
 Preset Options integer_datetimes on \N \N \N \N
 Preset Options max_index_keys 32 32 32 \N
 Preset Options wal_segment_size 8192 8192 8192 \N 8kB
 Preset Options max_identifier_length 63 63 63 \N
 Preset Options max_function_args 100 100 100 \N
Server Configuration
 category, name, setting, min_val, max_val, enumvals, unit
 Query Tuning / Genetic Query Optimizer geqo_effort 5 1 10 \N
 Query Tuning / Genetic Query Optimizer geqo on \N \N \N \N
 Query Tuning / Genetic Query Optimizer geqo_generations 0 0 2147483647 \N
 Query Tuning / Genetic Query Optimizer geqo_pool_size 0 0 2147483647 \N
 Query Tuning / Genetic Query Optimizer geqo_seed 0 0 1 \N \N
 Query Tuning / Genetic Query Optimizer geqo_selection_bias 2 1.5 2 \N \N
 Query Tuning / Genetic Query Optimizer geqo_threshold 12 2 2147483647 \N
 Query Tuning / Other Planner Options constraint_exclusion partition \N \N {partition,on,off}
\N
 Query Tuning / Other Planner Options from_collapse_limit 8 1 2147483647 \N
 Query Tuning / Other Planner Options cursor_tuple_fraction 0.1 0 1 \N \N
 Query Tuning / Other Planner Options join_collapse_limit 8 1 2147483647 \N
 Query Tuning / Other Planner Options default_statistics_target 100 1 10000 \N
Server Configuration
 category, name, setting, min_val, max_val, enumvals, unit
 Query Tuning / Planner Cost Constants cpu_operator_cost 0.0025 0 1.79769e+308 \N \N
 Query Tuning / Planner Cost Constants effective_cache_size 16384 1 2147483647 \N 8kB
 Query Tuning / Planner Cost Constants cpu_index_tuple_cost 0.005 0 1.79769e+308 \N \N
 Query Tuning / Planner Cost Constants cpu_tuple_cost 0.01 0 1.79769e+308 \N \N
 Query Tuning / Planner Cost Constants seq_page_cost 1 0 1.79769e+308 \N \N
 Query Tuning / Planner Cost Constants random_page_cost 4 0 1.79769e+308 \N \N
 Query Tuning / Planner Method Configuration enable_hashjoin on \N \N \N \N
 Query Tuning / Planner Method Configuration enable_indexscan on \N \N \N \N
 Query Tuning / Planner Method Configuration enable_material on \N \N \N \N
 Query Tuning / Planner Method Configuration enable_mergejoin on \N \N \N \N
 Query Tuning / Planner Method Configuration enable_tidscan on \N \N \N \N
 Query Tuning / Planner Method Configuration enable_sort on \N \N \N \N
 Query Tuning / Planner Method Configuration enable_nestloop on \N \N \N \N
 Query Tuning / Planner Method Configuration enable_seqscan off \N \N \N \N
 Query Tuning / Planner Method Configuration enable_bitmapscan on \N \N \N \N
 Query Tuning / Planner Method Configuration enable_hashagg on \N \N \N \N
Server Configuration
 category, name, setting, min_val, max_val, enumvals, unit
 Replication / Master Server max_wal_senders 0 0 8388607 \N
 Replication / Master Server wal_keep_segments 0 0 2147483647 \N
 Replication / Master Server synchronous_standby_names \N \N \N \N
 Replication / Master Server wal_sender_delay 1000 1 10000 \N ms
 Replication / Master Server replication_timeout 60000 0 2147483647 \N ms
 Replication / Master Server vacuum_defer_cleanup_age 0 0 1000000 \N
 Replication / Standby Servers hot_standby off \N \N \N \N
 Replication / Standby Servers max_standby_streaming_delay 30000 -1 2147483647 \N ms
 Replication / Standby Servers hot_standby_feedback off \N \N \N \N
 Replication / Standby Servers wal_receiver_status_interval 10 0 2147483 \N s
 Replication / Standby Servers max_standby_archive_delay 30000 -1 2147483647 \N ms
Server Configuration
 category, name, setting, min_val, max_val, enumvals, unit
 Reporting and Logging / What to Log log_disconnections off \N \N \N \N
 Reporting and Logging / What to Log log_connections off \N \N \N \N
 Reporting and Logging / What to Log log_line_prefix \N \N \N \N
 Reporting and Logging / What to Log log_autovacuum_min_duration -1 -1 2147483647 \N
ms
 Reporting and Logging / What to Log log_hostname off \N \N \N \N
 Reporting and Logging / What to Log log_timezone PRC \N \N \N \N
 Reporting and Logging / What to Log log_checkpoints off \N \N \N \N
 Reporting and Logging / What to Log log_statement none \N \N {none,ddl,mod,all} \N
 Reporting and Logging / What to Log log_duration off \N \N \N \N
 Reporting and Logging / What to Log log_error_verbosity default \N \N {terse,default,verbose}
\N
 Reporting and Logging / What to Log log_lock_waits off \N \N \N \N
 Reporting and Logging / What to Log log_temp_files -1 -1 2147483647 \N kB
 Reporting and Logging / What to Log debug_pretty_print on \N \N \N \N
 Reporting and Logging / What to Log debug_print_parse off \N \N \N \N
 Reporting and Logging / What to Log debug_print_plan off \N \N \N \N
Server Configuration
 category, name, setting, min_val, max_val, enumvals, unit
 Reporting and Logging / What to Log application_name psql \N \N \N \N
 Reporting and Logging / What to Log debug_print_rewritten off \N \N \N \N
 Reporting and Logging / When to Log log_min_duration_statement -1 -1 2147483647 \N
ms
 Reporting and Logging / When to Log log_min_messages warning \N \N
{debug5,debug4,debug3,debug2,debug1,info,notice,warning,error,log,fatal,panic} \N
 Reporting and Logging / When to Log log_min_error_statement error \N \N
{debug5,debug4,debug3,debug2,debug1,info,notice,warning,error,log,fatal,panic} \N
 Reporting and Logging / When to Log client_min_messages notice \N \N
{debug5,debug4,debug3,debug2,debug1,log,notice,warning,error} \N
 Reporting and Logging / Where to Log silent_mode off \N \N \N \N
 Reporting and Logging / Where to Log logging_collector off \N \N \N \N
 Reporting and Logging / Where to Log log_rotation_size 10240 0 2097151 \N kB
 Reporting and Logging / Where to Log log_truncate_on_rotation off \N \N \N \N
 Reporting and Logging / Where to Log log_destination stderr \N \N \N \N
 Reporting and Logging / Where to Log log_filename postgresql-%Y-%m-%d_%H%M%S.log \N \N
\N \N
Server Configuration
 category, name, setting, min_val, max_val, enumvals, unit
 Reporting and Logging / Where to Log log_rotation_age 1440 0 35791394 \N min
 Reporting and Logging / Where to Log log_directory pg_log \N \N \N \N
 Reporting and Logging / Where to Log syslog_ident postgres \N \N \N \N
 Reporting and Logging / Where to Log syslog_facility local0 \N \N
{local0,local1,local2,local3,local4,local5,local6,local7} \N
 Reporting and Logging / Where to Log log_file_mode 0600 0 511 \N
Server Configuration
 category, name, setting, min_val, max_val, enumvals, unit
 Resource Usage / Asynchronous Behavior effective_io_concurrency 1 0 1000 \N
 Resource Usage / Background Writer bgwriter_lru_multiplier 2 0 10 \N \N
 Resource Usage / Background Writer bgwriter_lru_maxpages 100 0 1000 \N
 Resource Usage / Background Writer bgwriter_delay 200 10 10000 \N ms
 Resource Usage / Cost-Based Vacuum Delay vacuum_cost_page_dirty 20 0 10000 \N
 Resource Usage / Cost-Based Vacuum Delay vacuum_cost_page_hit 1 0 10000 \N
 Resource Usage / Cost-Based Vacuum Delay vacuum_cost_page_miss 10 0 10000 \N
 Resource Usage / Cost-Based Vacuum Delay vacuum_cost_delay 0 0 100 \N ms
 Resource Usage / Cost-Based Vacuum Delay vacuum_cost_limit 200 1 10000 \N
 Resource Usage / Kernel Resources shared_preload_libraries \N \N \N \N
 Resource Usage / Kernel Resources max_files_per_process 1000 25 2147483647 \N
 Resource Usage / Memory track_activity_query_size 1024 100 102400 \N
 Resource Usage / Memory shared_buffers 4096 16 1073741823 \N 8kB
 Resource Usage / Memory max_prepared_transactions 0 0 8388607 \N
 Resource Usage / Memory max_stack_depth 2048 100 2147483647 \N kB
 Resource Usage / Memory temp_buffers 1024 100 1073741823 \N 8kB
 Resource Usage / Memory work_mem 1024 64 2147483647 \N kB
 Resource Usage / Memory maintenance_work_mem 16384 1024 2147483647 \N kB
Server Configuration
 category, name, setting, min_val, max_val, enumvals, unit
 Statistics / Monitoring log_parser_stats off \N \N \N \N
 Statistics / Monitoring log_executor_stats off \N \N \N \N
 Statistics / Monitoring log_planner_stats off \N \N \N \N
 Statistics / Monitoring log_statement_stats off \N \N \N \N
 Statistics / Query and Index Statistics Collector stats_temp_directory pg_stat_tmp \N \N \N
\N
 Statistics / Query and Index Statistics Collector track_functions none \N \N {none,pl,all} \N
 Statistics / Query and Index Statistics Collector track_activities on \N \N \N \N
 Statistics / Query and Index Statistics Collector track_counts on \N \N \N \N
 Statistics / Query and Index Statistics Collector update_process_title on \N \N \N \N
Server Configuration
 category, name, setting, min_val, max_val, enumvals, unit
 Version and Platform Compatibility / Other Platforms and Clients transform_null_equals off \N
\N \N \N
 Version and Platform Compatibility / Previous PostgreSQL Versions lo_compat_privileges off \N
\N \N \N
 Version and Platform Compatibility / Previous PostgreSQL Versions quote_all_identifiers off \N
\N \N \N
 Version and Platform Compatibility / Previous PostgreSQL Versions synchronize_seqscans on \N
\N \N \N
 Version and Platform Compatibility / Previous PostgreSQL Versions sql_inheritance on \N \N
\N \N
 Version and Platform Compatibility / Previous PostgreSQL Versions escape_string_warning on \N
\N \N \N
 Version and Platform Compatibility / Previous PostgreSQL Versions backslash_quote safe_encoding \N
\N {safe_encoding,on,off} \N
 Version and Platform Compatibility / Previous PostgreSQL Versions array_nulls on \N \N \N
\N
 Version and Platform Compatibility / Previous PostgreSQL Versions default_with_oids off \N
\N \N \N
Server Configuration
 Version and Platform Compatibility / Previous PostgreSQL Versions standard_conforming_strings on
\N \N \N\N
 Write-Ahead Log / Archiving archive_mode off \N \N \N \N
 Write-Ahead Log / Archiving archive_command (disabled) \N \N \N \N
 Write-Ahead Log / Archiving archive_timeout 0 0 2147483647 \N s
 Write-Ahead Log / Checkpoints checkpoint_timeout 300 30 3600 \N s
 Write-Ahead Log / Checkpoints checkpoint_warning 30 0 2147483647 \N s
 Write-Ahead Log / Checkpoints checkpoint_completion_target 0.5 0 1 \N \N
 Write-Ahead Log / Checkpoints checkpoint_segments 3 1 2147483647 \N
 Write-Ahead Log / Settings wal_level minimal \N \N {minimal,archive,hot_standby} \N
 Write-Ahead Log / Settings wal_buffers 128 -1 2147483647 \N 8kB
 Write-Ahead Log / Settings fsync on \N \N \N \N
 Write-Ahead Log / Settings wal_sync_method fdatasync \N \N {fsync,fdatasync,open_sync}
\N
 Write-Ahead Log / Settings wal_writer_delay 200 1 10000 \N ms
 Write-Ahead Log / Settings full_page_writes on \N \N \N \N
 Write-Ahead Log / Settings commit_delay 0 0 100000 \N
 Write-Ahead Log / Settings synchronous_commit on \N \N {local,on,off} \N
 Write-Ahead Log / Settings commit_siblings 5 0 1000 \N
Server Configuration
 通常初始化完数据库后需要调整的参数
 listen_addresses = '0.0.0.0' -- 监听地址
 port = 5432 -- 可更改为其他端口
 max_connections = 1000 -- 最大允许的连接, 如果并发到达这么高可能需要500核的机器才能处理得过
来, 否则性能会有下降. 有些业务不会释放连接, 所以可能导致连接占用多, 实际在处理请求的少. 因此
这个数字看实际使用环境来设定.
 superuser_reserved_connections = 13 -- 保留给超级用户的连接个数
 unix_socket_directory = '/pgdata/digoal/1921/data02/pg_root' -- 默认是/tmp, 不太安全. 放到$PGDATA比
较靠谱, 因为$PGDATA的目录权限是700的.
 unix_socket_permissions = 0700 -- 修改unix socket文件的权限为700
 tcp_keepalives_idle = 60 -- tcp连接空闲多长时间后发出keepalive包
 tcp_keepalives_interval = 10 -- 间隔多长时间再发一次
 tcp_keepalives_count = 6 -- 总共发几次keepalive包
 shared_buffers = 512MB -- 在第一天的内容中包含了计算shared_buffers的方法
 work_mem = 1MB -- 默认是1MB, 如果发现数据经常使用临时文件排序或group by等, 可以考虑设置为
一个比较大的值.按需使用, 每个排序或merge JOIN用到的哈希表,DISTINCT,都需要消耗work_mem, 如
果一个执行计划中有多个此类操作则最大需要使用多个work_mem.
Server Configuration
 maintenance_work_mem = 512MB -- 用于创建索引的操作,vacuum操作. 按需使用
maintenance_work_mem设置的内存, 当有并发的创建索引和autovacuum等操作时可能造
成内存消耗过度.
 max_stack_depth = 8MB -- 一般设置为ulimit 的stack size一致或略小.
 shared_preload_libraries = 'pg_stat_statements' -- 启动数据库集群时加载的库, 这里表示加
载pg_stat_statements, 一个用于统计SQL执行次数, CPU开销等的模块.
 vacuum_cost_delay = 10ms -- VACUUM操作比较消耗IO, 设置延时是指VACUUM操作消
耗的成本大于vacuum_cost_limit后延迟10毫秒再继续执行.
 bgwriter_delay = 10ms -- 每个background writer运行周期之间延迟10毫秒.
 wal_level = hot_standby -- WAL_level级别, 如果要开启备份必须设置为archive或
hot_standby, 如果要建立hot_standy则必须设置为hot_standby.
 synchronous_commit = off -- 关闭XLOG的同步写. 可以大大提高写事务的处理能力. 不会
破坏数据库一致性, 但是如果数据库异常DOWN机需要recovery时, 恢复后的数据库可能
丢失最后10毫秒(wal_writer_delay)的事务.
 wal_sync_method = fdatasync -- 使用pg_test_fsync测试出系统使用哪种sync 接口效率最高.
 wal_buffers = 16384kB -- 一般繁忙的系统设置为xlog文件段的大小.
Server Configuration
 wal_writer_delay = 10ms -- WAL日志写操作round之间延迟10毫秒
 commit_delay = 0 -- 在事务提交的同时如果系统中有大于等于commit_siblings个未提交
事务时, 等待0毫秒. 合并这些提交事务的IO请求,降低IO请求次数.
 commit_siblings = 5
 checkpoint_segments = 256 -- 多少个xlog rotate后触发checkpoint, checkpoint segments一般
设置为大于shared_buffer的SIZE. 如shared_buffer=1024MB, wal文件单个16MB, 则
checkpoint_segments>=1024/16;
 archive_mode = on -- 开启归档, 修改这个配置需要重启, 所以一般安装好就开启
 archive_command = '/bin/date' -- 这个可以RELOAD, 一般的做法是先设置一个空转命令
 max_wal_senders = 32 -- 修改这个配置需要重启数据库, 所以一般的做法是先设置一个数
字.
 wal_sender_delay = 10ms -- In each round the WAL sender sends any WAL accumulated
since the last round to the standby server. It then sleeps for wal_sender_delay milliseconds, and
repeats. The sleep is interrupted by transaction commit, so the effects of a committed
transaction are sent to standby servers as soon as the commit happens, regardless of this setting.
 wal_keep_segments = 0 -- 在主库中至少保留多少个xlog segment, 哪怕有一些XLOG已经
不需要被数据库recovery使用.
Server Configuration
 #synchronous_standby_names = '' -- 如果打算配置同步流复制, 则需要配置这个参数. 同一
时间只有一个同步复制角色standby, 如果这个节点挂了或者因为某些原因延迟了, 第二个
配置节点将接替同步复制standby的角色.
 hot_standby = on -- 这个是standby节点的配置, 是否允许客户端连接standby进行readonly
操作.
 max_standby_archive_delay = 300s -- 在规定的时间内必须完成archive standby的replay操
作. 不影响接收操作.计时从最近一次replay赶上receive的时间开始算.
 max_standby_streaming_delay = 300s -- 在规定的时间内必须完成streaming standby的
replay操作. 不影响接收操作.计时从最近一次replay赶上receive的时间开始算.
 wal_receiver_status_interval = 10s -- Specifies the minimum frequency for the WAL receiver
process on the standby to send information about replication progress to the primary, where it
can be seen using the pg_stat_replication view. The standby will report the last transaction log
position it has written, the last position it has flushed to disk, and the last position it has
applied. Updates are sent each time the write or flush positions change, or at least as often as
specified by this parameter. Thus, the apply position may lag slightly behind the true position.
 hot_standby_feedback = on -- Specifies whether or not a hot standby will send feedback to the
primary about queries currently executing on the standby.
Server Configuration
 random_page_cost = 2.0 -- 调小后更倾向使用索引, 而非全表扫描.
 effective_cache_size = 12000MB -- 调大后更倾向使用索引, 而非全表扫描.
 log_destination = 'csvlog' -- 便于导入到库中进行分析
 logging_collector = on
 log_directory = '/var/applog/pg_log/集群名/port号'
 log_filename = 'postgresql-%Y-%m-%d_%H%M%S.log'
 log_file_mode = 0600
 log_truncate_on_rotation = on -- 便于维护日志文件