  create database zabbix character set utf8;
  exit;
mysql_upgrade -u root -p
mysql -u root -p
  create user zabbix@'%' identified by '{mysql_zabbix_password}';
  grant all privileges on zabbix.* to zabbix@'%';
  flush privileges;
  exit;
```
**å®‰è£… zabbix**
```bash
rpm -ivh https://repo.zabbix.com/zabbix/4.2/rhel/7/x86_64/zabbix-release-4.2-1.el7.noarch.rpm
yum install -y zabbix-server-mysql zabbix-web-mysql zabbix-java-gateway zabbix-web
cd /usr/share/doc/zabbix-server-mysql-4.2.1
zcat create.sql.gz | mysql -uroot zabbix -p
```
- é…ç½® zabbix å‚æ•°
  ```vim
  vim /etc/zabbix/zabbix_server.conf
  DBPassword={mysql_zabbix_password}
  CacheSize=512M
  HistoryCacheSize=128M
  HistoryIndexCacheSize=128M
  TrendCacheSize=128M
  ValueCacheSize=256M
  Timeout=30
  ```
  å¦‚æœéœ€è¦ç›‘æ§ VMware è™šæ‹Ÿæœº,åˆ™è¿˜éœ€è¦è®¾ç½®ä»¥ä¸‹é€‰é¡¹å‚æ•°:
  ```vim
  StartVMwareCollectors=2
  VMwareCacheSize=256M
  VMwareTimeout=300
  ```
**é…ç½® Apache ä¸­çš„ PHP å‚æ•°**
```vim
vim /etc/httpd/conf.d/zabbix.conf
php_value max_execution_time 600
php_value memory_limit 256M
php_value post_max_size 32M
php_value upload_max_filesize 32M
php_value max_input_time 600
php_value always_populate_raw_post_data -1
date.timezone Asia/Shanghai
```
**é…ç½® PHP å‚æ•°**
```vim
vim /etc/php.ini
php_value post_max_size 32M
max_execution_time 300
max_input_time 300
date.timezone Asia/Shanghai
```
**é‡å¯&èµ·æœåŠ¡**
```bash
systemctl stop mysqld && reboot
systemctl start httpd && systemctl start zabbix-server
systemctl stop firewalld
setenforce 0    # å…³é—­ selinux
```
è®¿é—® `http://ipåœ°å€/zabbix/setup.php`
**Source & Reference**
- [CentOS 7å®‰è£…Zabbix 3.4](https://www.centos.bz/2017/11/centos-7%E5%AE%89%E8%A3%85zabbix-3-4/)
---
## å®¹å™¨&è™šæ‹ŸåŒ–
### Docker
> æ›´å¤š Docker ç›¸å…³çŸ¥è¯†å‚è€ƒ [Dockerç¬”è®°](../å®¹å™¨/Docker.md)
**å®˜ç½‘**
- https://www.docker.com
**å®‰è£…**
- **å®˜æ–¹ä¸€æ¡å‘½ä»¤ç‰ˆ(ä¸å…¼å®¹ kali)**
  ```bash
  curl -sSL https://get.docker.com/ | sh
  ```
- **CentOS7 ä¸‹å®‰è£…**
  ```bash
  yum install -y yum-utils device-mapper-persistent-data lvm2
  wget -O /etc/yum.repos.d/docker-ce.repo https://download.docker.com/linux/centos/docker-ce.repo
  sed -i 's+download.docker.com+mirrors.tuna.tsinghua.edu.cn/docker-ce+' /etc/yum.repos.d/docker-ce.repo
  yum makecache fast
  yum install -y docker
  systemctl start docker
  ```
- **CentOS8 ä¸‹å®‰è£…**
  ```bash
  dnf config-manager --add-repo=https://download.docker.com/linux/centos/docker-ce.repo
  dnf list docker-ce
  dnf install docker-ce --nobest -y
  systemctl start docker
  systemctl enable docker
  docker --version
  ```
- **debian ä¸‹å®‰è£…**
  ```bash
  apt remove docker docker-engine docker.io
  apt-get install -y \
    apt-transport-https \
    ca-certificates \
    curl \
    software-properties-common \
    gnupg
  curl -fsSL https://mirrors.ustc.edu.cn/docker-ce/linux/ubuntu/gpg | apt-key add -
  echo 'deb https://download.docker.com/linux/debian stretch stable'> /etc/apt/sources.list.d/
  apt update
  apt install -y docker-ce
  docker version
  systemctl start docker
  docker login              # ä¸€èˆ¬ä¸éœ€è¦è´¦æˆ·ç™»å½•
  ```
**ä½¿ç”¨**
- å¯åŠ¨,æš‚åœä»¥åŠå¯ç”¨ Docker
  ```
  systemctl start docker
  systemctl enable docker
  systemctl stop docker
  systemctl restart docker
  ```
- æ‹‰å–é•œåƒ
  ```bash
  docker image ls                # æ£€æŸ¥ä¸€ä¸‹ç³»ç»Ÿä¸­å·²ç»æœ‰äº†å“ªäº›é•œåƒ
  docker pull nginx               # æ‹‰å–ä¸€ä¸ªé•œåƒ
  docker search nginx             # æœç´¢ Docker Hub ä¸­çš„æ‰€æœ‰ Nginx é•œåƒ
  docker pull jwilder/nginx-proxy # ä»éå®˜æ–¹æºæ‹‰å–é•œåƒ
  ```
- å¸¸ç”¨å‘½ä»¤
  ```bash
  docker version                              # æŸ¥çœ‹ docker ç‰ˆæœ¬
  docker run -it [docker_image_id] bash       # è¿è¡Œä¸€ä¸ªå®¹å™¨å®ä¾‹
  docker run -d -p ç‰©ç†ç«¯å£1:å®¹å™¨ç«¯å£1 -p ç‰©ç†ç«¯å£2:ç‰©ç†ç«¯å£2 --name å®¹å™¨å :
    docker run --name=test -p 1234:1234 -itd ubuntu /bin/bash
    # ä½¿ç”¨æœ¬åœ° 1234 ç«¯å£è¿æ¥ docker çš„ 1234 ç«¯å£è¿è¡Œ ubuntu é•œåƒï¼Œå¹¶å°†å…¶ä¸´æ—¶å‘½åä¸º test
    # testï¼šä¸ºä¸´æ—¶åç§°ï¼Œå¯ä»¥è‡ªå®šä¹‰å¡«å†™ã€‚
    # -pï¼š ç¬¬ä¸€ä¸ªç«¯å£ä¸ºæœ¬æœºçš„ç«¯å£ï¼Œç¬¬äºŒä¸ªç«¯å£ä¸º Docker çš„ç«¯å£ã€‚
    # -itdï¼šæ„æ€æ˜¯åœ¨åå°è¿è¡Œï¼Œäº¤äº’å¼è¿è¡Œï¼Œå¹¶ä¸”è¾“å‡ºå½“å‰çš„ä¿¡æ¯
    # /bin/bashï¼šè°ƒç”¨ Shell
    docker run -d -p 8080:80 -v æœ¬æœºè·¯å¾„:å®¹å™¨è·¯å¾„ --name å®¹å™¨å  : # ç£ç›˜æŒ‚è½½
  docker stop [docker_name/docker_id]               # åœæ­¢å®¹å™¨
  docker start [options] container [container...]   # å¯åŠ¨ä¸€ä¸ªæˆ–å¤šä¸ªå·²åœæ­¢çš„å®¹å™¨
  docker exec -it [docker_id] bash                  # è·å–å®¹å™¨çš„ shell
  docker kill                                       # æ€æ­»å®¹å™¨
  docker commit [docker_id] [docker_image_id]       # æäº¤å¹¶ä¿å­˜å®¹å™¨çŠ¶æ€
  docker logs [options] [docker_name/docker_id]     # æŸ¥çœ‹dockerå®¹å™¨æ—¥å¿—
  docker logs [options] [docker_name/docker_id] --tail 100  # æ—¥å¿—æœ€åçš„100è¡Œ
  docker inspect --format '{{ .NetworkSettings.IPAddress }}' [docker_name/docker_id]  # æŸ¥çœ‹å®¹å™¨ ip åœ°å€
  docker tag SOURCE_IMAGE[:TAG] TARGET_IMAGE[:TAG]  # æ ‡è®°æœ¬åœ°é•œåƒï¼Œå°†å…¶å½’å…¥æŸä¸€ä»“åº“ã€‚
    docker tag centos centos:v1                     # ç»™ centos é•œåƒæ‰“æ ‡ç­¾
    docker tag ubuntu:15.10 test/ubuntu:v3          # å°†é•œåƒ ubuntu:15.10 æ ‡è®°ä¸º test/ubuntu:v3 é•œåƒã€‚
    docker run -itd centos:v1                       # è¿è¡Œ centos:v1 é•œåƒ
  docker rm [docker_name/docker_id]                 # åˆ é™¤å®¹å™¨
  docker rmi $(docker images -f "dangling=true" -q) # åˆ é™¤ docker æ‚¬ç©ºé•œåƒ
  docker ps                                         # æŸ¥çœ‹å½“å‰è¿è¡Œçš„ docker å®¹å™¨çš„è¿›ç¨‹ä¿¡æ¯
    docker ps -a                                    # æŸ¥çœ‹å½“å‰å®¹å™¨
  docker stats                                      # ç»Ÿè®¡ä¿¡æ¯
  docker cp xxx.txt [docker_id]:/home               # å¤åˆ¶ xxx.txt åˆ°å®¹å™¨çš„ /home ç›®å½•ä¸‹
  docker cp [docker_id]:/home/test.txt /tmp/xxx.txt # å¤åˆ¶å®¹å™¨ /home/text.txt æ–‡ä»¶åˆ°å®¿ä¸»æœº /tmp ç›®å½•
  docker hisotry [docker_name/docker_id]            # æŸ¥çœ‹æŒ‡å®šé•œåƒçš„åˆ›å»ºå†å²
  ```
**å®¹å™¨ä¿æ´»**
```
tail
top
tail -f /var/log/cron.log
init
```
**åŠ é€Ÿ**
- [Docker é•œåƒåŠ é€Ÿ](../../Plan/Misc-Plan.md#Docker)
**æ›´å¤šå†…å®¹**
- [Docker](./å®éªŒ/Docker.md)
#### Docker-Compose
> Docker-Compose æ˜¯ä¸€ä¸ªéƒ¨ç½²å¤šä¸ªå®¹å™¨çš„ç®€å•ä½†æ˜¯éå¸¸å¿…è¦çš„å·¥å…·.
**é¡¹ç›®åœ°å€**
- https://github.com/docker/compose
**å®‰è£…**
ä¸‹è½½äºŒè¿›åˆ¶åŒ… https://github.com/docker/compose/releases
ç„¶åå°†æ–‡ä»¶ä¸Šä¼ åˆ° `/usr/local/bin/` æ–‡ä»¶å¤¹ä¸‹,ç„¶åå°†å…¶é‡å‘½åä¸º docker-compose,ä¿®æ”¹æ­¤æ–‡ä»¶çš„æƒé™,å¢åŠ å¯æ‰§è¡Œæƒé™
```bash
wget https://github.com/docker/compose/releases/download/1.25.5/docker-compose-Linux-x86_64
mv docker-compose-Linux-x86_64 /usr/local/bin/docker-compose
chmod +x /usr/local/bin/docker-compose
```
æˆ–ç›´æ¥é‡‡ç”¨ pip å®‰è£…
```bash
pip3 install docker-compose
```
```bash
docker-compose build
docker-compose up -d
docker-compose stop
```
```bash
docker-compose ps     # æŸ¥çœ‹å½“å‰çš„ä½¿ç”¨ docker-compose up -d å¼€å¯çš„å®¹å™¨è¿›ç¨‹ä¿¡æ¯
docker-compose up -d  # ä½¿ç”¨æœ¬åœ°çš„ docker-compose.yml å¼€å¯ç›¸å…³çš„å®¹å™¨
docker-compose down   # ç»ˆæ­¢å½“å‰çš„ä½¿ç”¨ docker-compose up -d å¼€å¯çš„å®¹å™¨
docker-compose exec [service] sh  # è¿›å…¥å®¹å™¨å†…
```
**å¸¸è§æŠ¥é”™**
- ERROR: Failed to Setup IP tables: Unable to enable SKIP DNAT rule
  åŸå› æ˜¯å…³é—­é˜²ç«å¢™ä¹‹å docker éœ€è¦é‡å¯ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤é‡å¯ docker å³å¯ï¼š
  ```bash
  systemctl daemon-reload
  service docker restart
  ```
- ERROR: Service 'xxxxxx' failed to build : Get https://registry-1.docker.io/v2/: dial tcp: lookup registry-1.docker.io on xx.xx.xx.xx: server misbehaving
  dns æœåŠ¡å™¨çš„é”™è¯¯ï¼ŒæŠŠ dns æœåŠ¡å™¨æ”¹ä¸‹å°±è¡Œ
  ```bash
  vim /etc/resolv.conf
  nameserver 1.1.1.1
  ```
- [3927] Error loading Python lib '/tmp/_MEIuQps8Y/libpython3.9.so.1.0': dlopen: /lib/x86_64-linux-gnu/libc.so.6: version `GLIBC_2.28' not found (required by /tmp/_MEIuQps8Y/libpython3.9.so.1.0)
  python ç‰ˆæœ¬çš„é—®é¢˜, æ¢ python3.7 ä»¥ä¸Šæˆ–ç”¨ pip å®‰è£…å³å¯
**æ›´å¤šå†…å®¹**
- [Docker-Compose](./å®éªŒ/Docker-Compose.md)
#### Docker-Portainer
> Portainer æ˜¯ Docker ä¸€æ¬¾å¯è§†åŒ–ç®¡ç†ç”¨å…·ï¼Œéƒ¨ç½²ç®€å•ï¼Œæ¨èã€‚
**å®˜ç½‘**
- https://www.portainer.io/
**éƒ¨ç½²**
```bash
docker pull portainer/portainer         # æ‹‰å–é•œåƒ
docker volume create portainer_data
docker run -d -p 8000:8000 -p 9000:9000 --name=portainer --restart=always -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer-ce   # éƒ¨ç½²
```
è®¿é—® ip:9000 è¿›å…¥åˆ°è®¾ç½®å¯†ç ç•Œé¢.
#### ctop
> ç”¨äº docker ç‰ˆçš„ top
**ä»“åº“åœ°å€**
- https://github.com/bcicen/ctop
---
### Kubernetes
#### kubectl
**æ˜¾ç¤ºå’ŒæŸ¥æ‰¾èµ„æº**
```bash
kubectl get services                          # åˆ—å‡ºæ‰€æœ‰ namespace ä¸­çš„æ‰€æœ‰ service
kubectl get pods -A                           # åˆ—å‡ºæ‰€æœ‰ namespace ä¸­çš„æ‰€æœ‰ pod
kubectl get pods -o wide                      # åˆ—å‡ºæ‰€æœ‰ pod å¹¶æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯
kubectl get deployment -A                     # åˆ—å‡ºæ‰€æœ‰ deployment
```
**ä¸è¿è¡Œä¸­çš„ Pod äº¤äº’**
```bash
kubectl logs my-pod                                     # è·å– pod æ—¥å¿—ï¼ˆæ ‡å‡†è¾“å‡ºï¼‰
kubectl logs -l name=myLabel                            # è·å–å« name=myLabel æ ‡ç­¾çš„ Pods çš„æ—¥å¿—ï¼ˆæ ‡å‡†è¾“å‡ºï¼‰
kubectl logs my-pod --previous                          # è·å–ä¸Šä¸ªå®¹å™¨å®ä¾‹çš„ pod æ—¥å¿—ï¼ˆæ ‡å‡†è¾“å‡ºï¼‰
kubectl logs my-pod -c my-container                     # è·å– Pod å®¹å™¨çš„æ—¥å¿—ï¼ˆæ ‡å‡†è¾“å‡º, å¤šå®¹å™¨åœºæ™¯ï¼‰
kubectl logs -l name=myLabel -c my-container            # è·å–å« name=myLabel æ ‡ç­¾çš„ Pod å®¹å™¨æ—¥å¿—ï¼ˆæ ‡å‡†è¾“å‡º, å¤šå®¹å™¨åœºæ™¯ï¼‰
kubectl logs my-pod -c my-container --previous          # è·å– Pod ä¸­æŸå®¹å™¨çš„ä¸Šä¸ªå®ä¾‹çš„æ—¥å¿—ï¼ˆæ ‡å‡†è¾“å‡º, å¤šå®¹å™¨åœºæ™¯ï¼‰
kubectl logs -f my-pod                                  # æµå¼è¾“å‡º Pod çš„æ—¥å¿—ï¼ˆæ ‡å‡†è¾“å‡ºï¼‰
kubectl logs -f my-pod -c my-container                  # æµå¼è¾“å‡º Pod å®¹å™¨çš„æ—¥å¿—ï¼ˆæ ‡å‡†è¾“å‡º, å¤šå®¹å™¨åœºæ™¯ï¼‰
kubectl logs -f -l name=myLabel --all-containers        # æµå¼è¾“å‡ºå« name=myLabel æ ‡ç­¾çš„ Pod çš„æ‰€æœ‰æ—¥å¿—ï¼ˆæ ‡å‡†è¾“å‡ºï¼‰
kubectl run -i --tty busybox --image=busybox:1.28 -- sh # ä»¥äº¤äº’å¼ Shell è¿è¡Œ Pod
kubectl run nginx --image=nginx -n mynamespace          # åœ¨ â€œmynamespaceâ€ å‘½åç©ºé—´ä¸­è¿è¡Œå•ä¸ª nginx Pod
kubectl run nginx --image=nginx                         # è¿è¡Œ ngins Pod å¹¶å°†å…¶è§„çº¦å†™å…¥åˆ°åä¸º pod.yaml çš„æ–‡ä»¶
  --dry-run=client -o yaml > pod.yaml
kubectl attach my-pod -i                                # æŒ‚æ¥åˆ°ä¸€ä¸ªè¿è¡Œçš„å®¹å™¨ä¸­
kubectl port-forward my-pod 5000:6000                   # åœ¨æœ¬åœ°è®¡ç®—æœºä¸Šä¾¦å¬ç«¯å£ 5000 å¹¶è½¬å‘åˆ° my-pod ä¸Šçš„ç«¯å£ 6000
kubectl exec my-pod -- ls /                             # åœ¨å·²æœ‰çš„ Pod ä¸­è¿è¡Œå‘½ä»¤ï¼ˆå•å®¹å™¨åœºæ™¯ï¼‰
kubectl exec --stdin --tty my-pod -- /bin/sh            # ä½¿ç”¨äº¤äº’ shell è®¿é—®æ­£åœ¨è¿è¡Œçš„ Pod (ä¸€ä¸ªå®¹å™¨åœºæ™¯)
kubectl exec my-pod -c my-container -- ls /             # åœ¨å·²æœ‰çš„ Pod ä¸­è¿è¡Œå‘½ä»¤ï¼ˆå¤šå®¹å™¨åœºæ™¯ï¼‰
kubectl top pod POD_NAME --containers                   # æ˜¾ç¤ºç»™å®š Pod å’Œå…¶ä¸­å®¹å™¨çš„ç›‘æ§æ•°æ®
kubectl top pod POD_NAME --sort-by=cpu                  # æ˜¾ç¤ºç»™å®š Pod çš„æŒ‡æ ‡å¹¶ä¸”æŒ‰ç…§ 'cpu' æˆ–è€… 'memory' æ’åº
```
**ä»å®¹å™¨ä¸­å¤åˆ¶æ–‡ä»¶å’Œç›®å½•**
```bash
kubectl cp /tmp/foo_dir my-pod:/tmp/bar_dir             # å°† /tmp/foo_dir æœ¬åœ°ç›®å½•å¤åˆ¶åˆ°è¿œç¨‹å½“å‰å‘½åç©ºé—´ä¸­ Pod ä¸­çš„ /tmp/bar_dir
kubectl cp /tmp/foo my-pod:/tmp/bar -c my-container     # å°† /tmp/foo æœ¬åœ°æ–‡ä»¶å¤åˆ¶åˆ°è¿œç¨‹ Pod ä¸­ç‰¹å®šå®¹å™¨çš„ /tmp/bar ä¸‹
kubectl cp /tmp/foo my-namespace/my-pod:/tmp/bar        # å°† /tmp/foo æœ¬åœ°æ–‡ä»¶å¤åˆ¶åˆ°è¿œç¨‹ â€œmy-namespaceâ€ å‘½åç©ºé—´å†…æŒ‡å®š Pod ä¸­çš„ /tmp/bar
kubectl cp my-namespace/my-pod:/tmp/foo /tmp/bar        # å°† /tmp/foo ä»è¿œç¨‹ Pod å¤åˆ¶åˆ°æœ¬åœ° /tmp/bar
```
> kubectl cp è¦æ±‚å®¹å™¨é•œåƒä¸­å­˜åœ¨ â€œtarâ€ äºŒè¿›åˆ¶æ–‡ä»¶ã€‚å¦‚æœ â€œtarâ€ ä¸å­˜åœ¨ï¼Œkubectl cp å°†å¤±è´¥
**ä¸èŠ‚ç‚¹å’Œé›†ç¾¤è¿›è¡Œäº¤äº’**
```bash
kubectl cordon my-node                                                # æ ‡è®° my-node èŠ‚ç‚¹ä¸ºä¸å¯è°ƒåº¦
kubectl drain my-node                                                 # å¯¹ my-node èŠ‚ç‚¹è¿›è¡Œæ¸…ç©ºæ“ä½œï¼Œä¸ºèŠ‚ç‚¹ç»´æŠ¤åšå‡†å¤‡
kubectl uncordon my-node                                              # æ ‡è®° my-node èŠ‚ç‚¹ä¸ºå¯ä»¥è°ƒåº¦
kubectl top node my-node                                              # æ˜¾ç¤ºç»™å®šèŠ‚ç‚¹çš„åº¦é‡å€¼
kubectl cluster-info                                                  # æ˜¾ç¤ºä¸»æ§èŠ‚ç‚¹å’ŒæœåŠ¡çš„åœ°å€
kubectl cluster-info dump                                             # å°†å½“å‰é›†ç¾¤çŠ¶æ€è½¬å‚¨åˆ°æ ‡å‡†è¾“å‡º
kubectl cluster-info dump --output-directory=/path/to/cluster-state   # å°†å½“å‰é›†ç¾¤çŠ¶æ€è¾“å‡ºåˆ° /path/to/cluster-state
# å¦‚æœå·²å­˜åœ¨å…·æœ‰æŒ‡å®šé”®å’Œæ•ˆæœçš„æ±¡ç‚¹ï¼Œåˆ™æ›¿æ¢å…¶å€¼ä¸ºæŒ‡å®šå€¼ã€‚
kubectl taint nodes foo dedicated=special-user:NoSchedule
```
---
### QEMU
> QEMU æ˜¯ä¸€æ¬¾å¼€æºçš„æ¨¡æ‹Ÿå™¨åŠè™šæ‹Ÿæœºç›‘ç®¡å™¨ã€‚QEMU ä¸»è¦æä¾›ä¸¤ç§åŠŸèƒ½ç»™ç”¨æˆ·ä½¿ç”¨ã€‚ä¸€æ˜¯ä½œä¸ºç”¨æˆ·æ€æ¨¡æ‹Ÿå™¨ï¼Œåˆ©ç”¨åŠ¨æ€ä»£ç ç¿»è¯‘æœºåˆ¶æ¥æ‰§è¡Œä¸åŒäºä¸»æœºæ¶æ„çš„ä»£ç ã€‚äºŒæ˜¯ä½œä¸ºè™šæ‹Ÿæœºç›‘ç®¡å™¨ï¼Œæ¨¡æ‹Ÿå…¨ç³»ç»Ÿï¼Œåˆ©ç”¨å…¶ä»–VMM(Xen, KVM, etc)æ¥ä½¿ç”¨ç¡¬ä»¶æä¾›çš„è™šæ‹ŸåŒ–æ”¯æŒï¼Œåˆ›å»ºæ¥è¿‘äºä¸»æœºæ€§èƒ½çš„è™šæ‹Ÿæœºã€‚
**å®˜ç½‘**
- https://www.qemu.org/
**é¡¹ç›®åœ°å€**
- https://github.com/qemu/QEMU
**å®‰è£…**
- Centosä¸‹
  ```bash
  yum install -y qemu
  ```
- Ubuntuä¸‹
  ```bash
  apt-get install -y qemu
  ```
---
## åˆ†å¸ƒå¼
### ZooKeeper
    è¿™ä¸ªLogoæ˜¯ä»€ä¹ˆé¬¼å•ŠğŸ¤£ğŸ¤£ğŸ¤£,ç¬‘æ­»æˆ‘äº†
**å®˜ç½‘**
- https://zookeeper.apache.org/
**å®‰è£…**
ä¾èµ– jdk,å®‰è£…è¿‡ç¨‹è§ [JDK](#jdk)
zookeeper æ”¯æŒä¸¤ç§è¿è¡Œæ¨¡å¼:ç‹¬ç«‹æ¨¡å¼(standalone)å’Œå¤åˆ¶æ¨¡å¼(replicated).
çœŸæ­£ç”¨äºç”Ÿäº§ç¯å¢ƒçš„ Zookeeper è‚¯å®šéƒ½æ˜¯ä½¿ç”¨å¤åˆ¶æ¨¡å¼çš„,è¿™æ ·åšå¯ä»¥é¿å…å•ç‚¹é—®é¢˜.æƒ³è¦ä½¿ç”¨å¤åˆ¶æ¨¡å¼,ä½†ç”±äºæ²¡æœ‰å¯Œä½™çš„æœºå™¨èƒ½å¤Ÿä½¿ç”¨,æ‰€ä»¥å¯ä»¥åœ¨å•å°æœºå™¨ä¸Šé€šè¿‡é…ç½®æ¥ä½¿ç”¨å¤åˆ¶æ¨¡å¼,ä»è€Œæ¨¡æ‹ŸçœŸå®çš„é›†ç¾¤ç¯å¢ƒ.
ç”±äº Zookeeper é›†ç¾¤æ˜¯é€šè¿‡å¤šæ•°é€‰ä¸¾çš„æ–¹å¼äº§ç”Ÿ leader çš„,å› æ­¤,é›†ç¾¤éœ€è¦å¥‡æ•°ä¸ª Zookeeper å®ä¾‹ç»„æˆ,ä¹Ÿå°±æ˜¯è¯´è‡³å°‘éœ€è¦3å°(1å°ä¸èƒ½ç®—"ç¾¤").
è¿™é‡Œé…ç½®çš„ä¸º `ç‹¬ç«‹æ¨¡å¼`
```bash
wget https://mirrors.tuna.tsinghua.edu.cn/apache/zookeeper/zookeeper-3.4.14/zookeeper-3.4.14.tar.gz
mkdir /usr/local/zookeeper
tar -zxvf zookeeper-3.4.14.tar.gz -C /usr/local/zookeeper/
cd /usr/local/zookeeper/zookeeper-3.4.14/conf/
cp zoo_sample.cfg zoo.cfg
```
åˆ›å»ºæ•°æ®å­˜å‚¨ç›®å½•ä¸æ—¥å¿—ç›®å½•
```bash
mkdir /usr/local/zookeeper/zookeeper-3.4.14/dataDir
mkdir /usr/local/zookeeper/zookeeper-3.4.14/dataLogDir
```
ä¿®æ”¹æ•°æ®å­˜å‚¨å’Œæ—¥å¿—ç›®å½•
```vim
vim /usr/local/zookeeper/zookeeper-3.4.14/conf/zoo.cfg
dataDir=/usr/local/zookeeper/zookeeper-3.4.14/dataDir
dataLogDir=/usr/local/zookeeper/zookeeper-3.4.14/dataLogDir
```
```bash
# å¯åŠ¨
/usr/local/zookeeper/zookeeper-3.4.14/bin/zkServer.sh start
# è¿æ¥
/usr/local/zookeeper/zookeeper-3.4.14/bin/zkCli.sh
```
---
## å®‰å…¨æœåŠ¡
### ClamAV