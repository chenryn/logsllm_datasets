### BSV的难度限制

在BSV（Bitcoin SV）中，难度调整机制设定了一个范围，以确保即使区块开采速度过快或过慢，难度也不会超出特定界限。具体而言，比特币的目标时间范围为4倍至0.25倍，而BCH（Bitcoin Cash）和BSV的难度调整范围则为2倍至0.5倍。值得注意的是，哈希算力低于网络总哈希算力50%的自私矿工不受这些限制的影响。

### 0x02 结果

#### 难度调整与窗口宽度

首先，我们分析当新的诚实矿工加入网络时，不同加密货币的难度如何调整。除了以太坊（ETH），周期/窗口宽度是决定难度调整的关键因素。这一宽度指的是在网络中添加算力后，难度完全调整并达到平衡所需的区块数量。例如，BSV和BCH具有144个区块的窗口，这使得它们成为调整最快的加密货币。相比之下，门罗币（Monero）的窗口宽度为675个区块，其中最新75个区块被排除在外。比特币的窗口宽度为2016个区块，是所有加密货币中最长的。以太坊的独特之处在于其难度调整算法（DAA）没有固定的窗口宽度概念，而是通过增量方式调整，因此需要大约10,000个区块才能稳定。

当新的自私矿工（SM）进入网络时，由于他们花费时间在网络中创建分支而不是帮助延长最长链，因此难度不会显著调整。尽管网络中有额外的算力，但链的增长速度基本保持不变。

#### 累积区块获胜率

接下来，我们分析了新诚实矿工的累积区块获胜率。关键发现是，强大的新矿工可以利用初始低难度更快地挖矿。例如，在比特币中，新矿工可以在最初的两周内利用低难度。一个拥有49%算力的新矿工在整个持续时间内每分钟可赢得0.1个区块。一旦难度调整，胜率会逐渐下降。

对于ETH、BCH/BSV和Monero，难度会迅速调整，从而立即降低矿工的获胜率。这意味着矿工可以通过快速切换到其他代币，并从其低难度中获利，然后再放弃该代币使其难度恢复到盈利水平。

如果新矿工是自私矿工，结果有所不同。在四种代币中，α=49%的新自私矿工每分钟获得的区块数量大约是诚实挖矿时的两倍。这些图表明，一个新的自私矿工可以通过孤块阻止链增长，从而使难度几乎不变。因此，DAA的选择在这种情况下变得无关紧要。

#### 自私矿工的获胜率

上图显示了一个新的自私矿工的相应区块获胜率。较高的γ值导致更高的获胜率，并降低了达到收支平衡所需的哈希算力阈值。γ=1允许任何哈希算力的自私矿工至少实现收支平衡。更合理的低γ值则需要约33%的全球哈希算力才能达到收支平衡。

#### γ值对难度的影响

假设自私矿工（SM）隐藏了三个区块（S1, S2, S3）。随后，诚实矿工（HM）在原始父区块上继续挖矿，并使用区块H1创建自己的链。SM发布区块S1以与H1竞争。在γ=0时，HM会在认为自己是可赢的链时尝试在H1区块上挖矿。假设SM在其私密链中挖出第四个区块S4，然后HM在其自己的区块H2中挖矿，两者交替进行。

当挖出区块Hn时，HM有两个选择：在γ=0时，它选择在自己的区块Hn+1上挖矿；在γ=1时，它选择在自私区块Sn+1上挖矿。此选择对难度有重大影响。由于Sn+1比Hn+1早挖出，因此在Sn+1上挖矿的难度更大。因此，选择在自私区块上挖矿等同于选择在较难的链上挖矿。

当α接近50%且n约为数百时，诚实链的难度可能会比自私链的难度低得多。在γ=0时，诚实矿工可以利用较低的难度更快地赶上自私矿工。但在γ=1时，诚实矿工会选择在较难的链上挖矿，从而较慢地追上自私矿工。长期来看，选择较难的链意味着更多的诚实区块被孤立，自私矿工能够将其获胜链延长更长时间。

#### 不同加密货币的差异

在实验中观察到，n约为数百。如果n小于窗口宽度w，则两条链之间的难度差异不会太大。例如，比特币的窗口宽度为2016个区块，而BCH/BSV的窗口宽度为144个区块。当n约为数百时，这对BCH/BSV的难度影响较大。门罗币的窗口宽度约为675个区块，介于比特币和BCH/BSV之间。以太坊虽然理论上应有最大的差距，但由于其增量性质和叔叔奖励机制，实际上并未表现出这种差距。

#### 收益比较

最后，我们展示了自私矿工相对于诚实矿工所赚取的比例。对于BTC、BCH/BSV和XMR，结果类似于原始自私挖矿的结果，但BSV的γ间隙更为明显。对于ETH，无论哈希算力和γ值如何，新的自私矿工至少可以实现收支平衡，这是由于ETH中的叔叔奖励机制所致。

### 0x03 相关工作

本节涵盖了两个研究领域：难度调整算法（DAA）和异常挖矿行为。

#### 难度调整算法

先前的研究重点是哈希算力与难度之间的关系。研究表明，在哈希算力呈指数增长的情况下，比特币的DAA导致平均区块时间比预期短。比较了几种DAA后得出结论，面对算力波动，比特币的DAA无法稳定区块时间。最近的一些研究探讨了利用DAA增加利润的方法。智能挖矿是一种间歇性自私挖矿策略，每次难度调整时在诚实挖矿和空闲之间切换。

#### 异常挖矿行为

自引入以来，自私挖矿研究人员研究了各种环境和策略修改，以了解其盈利能力如何受到影响。对自私挖矿的小修改会导致更高的利润，具体取决于α和γ比率。自私挖矿是在区块链中创建分叉的几种攻击之一。其他攻击包括巨额鲸鱼交易和扣块后分叉攻击。

### 0x04 结论

本文研究了围绕自私挖矿的争议，并评估了其在一系列流行加密货币中的应用。通过间歇性自私挖矿，本文表明，在比特币DAA下进行自私挖矿可以使矿工获利而无需将攻击扩展到难度调整之上。针对BTC、ETH、BCH、BSV和XMR中存在的各种DAA，这项工作量化了自私挖矿作为一种可行策略的有效性。

自私挖矿是一种博弈论攻击，利用了分布式系统中的信息不对称性。这种攻击往往是微妙、意外的，有时甚至违反直觉。告诫外行人不要接受表面上的民间理论。