User: 请解答这个和日志有关的问题htaccess protection of directory does not work any longer? unfortunately the protection of my wp-login.php does not work any longer:

&lt;Files wp-login.php&gt;
AuthName "Forbidden access"
Require ip 1xx.xxx.xx.x/24
&lt;/Files&gt;


This is apache's information:

Server version: Apache/2.4.10 (Debian)
Server built:   Aug 28 2015 16:28:08


Error-logs are not showing anything :-(

Assistant: Apache Basic Auth
If you want to add authentication :
&lt;Location ~ &quot;wp-login.php&quot;&gt;
    AuthName &quot;Auth Name You Want&quot;
    AuthType Basic
    AuthUserFile /opt/web/.htpasswd
    Require valid-user
&lt;/Location&gt;

or
&lt;Files &quot;wp-login.php&quot;&gt;
    AuthName &quot;Auth Name You Want&quot;
    AuthType Basic
    AuthUserFile /opt/web/.htpasswd
    Require valid-user
&lt;/Files&gt;

sources : https://httpd.apache.org/docs/2.4/mod/mod_auth_basic.html
Apache IP restriction
If you want to allow only one ip
&lt;Location ~ &quot;wp-login.php&quot;&gt;
    Require ip w.x.y.z
&lt;/Location&gt;

or
&lt;Files &quot;wp-login.php&quot;&gt;
    Require ip w.x.y.z
&lt;/Files&gt;

sources : https://httpd.apache.org/docs/2.4/fr/howto/access.html
About Apache 2.4
For information this syntax is no more used on apache 2.4
order allow,deny
allow from all

It has been replaced by
Require all granted

Sources : https://httpd.apache.org/docs/2.4/fr/howto/access.html
In your case
If you Want to add authentication + ip restriction in .htaccess
&lt;Files &quot;wp-login.php&quot;&gt;
    &lt;RequireAll&gt;
        AuthName &quot;Auth Name You Want&quot;
        AuthType Basic
        AuthUserFile /opt/web/.htpasswd
        Require valid-user
        Require ip w.x.y.z/24
   &lt;/RequireAll&gt;
&lt;/Files&gt;

I am considering your IP mask is correct
Informations about RequireAll : https://httpd.apache.org/docs/2.4/fr/mod/mod_authz_core.html#requireall