### 第1章 Windows Server 2016的安装与管理

#### 1.5.1 事件查看器
**图1.18 Event Viewer窗口**

- **安全日志**：此日志记录了与资源访问和身份验证相关的审计事件。默认情况下，系统会进行基本的审计，但也可以配置更详细的审计，例如对文件系统的访问审计，以确定哪些用户正在访问或修改文件。
- **系统日志**：此日志记录了操作系统级别的事件，包括驱动程序加载和服务启停等信息。

建议定期检查应用程序日志和系统日志，以识别任何错误或警告。这些项可能指示潜在的问题。通常不需要阅读所有信息事件，但在详细检查软件执行过程时，查看信息、错误和警告事件是非常有用的。

为了简化日志读取，可以筛选特定源的特定事件类型。还可以创建自定义视图，跨多个事件日志搜索并显示符合指定条件的事件。默认存在一个名为“Administrative Events”的自定义视图，该视图显示来自所有事件日志的警告和错误。某些服务器角色也会创建自定义视图，以显示与其相关的事件。

每个事件日志都有一个最大日志大小，通常为20MB或更大，但具体大小因日志而异。可以通过调整最大日志大小来确保日志包含足够的信息以便故障排除。一般来说，日志应有足够的空间容纳至少几个星期的信息。日志中收集的数据量取决于服务器的繁忙程度以及是否出现错误。例如，默认大小为128MB的安全日志在小型组织中可能可以记录几个月的事件，而在大型组织中可能只能记录一个小时的事件。

当事件日志满时，默认情况下会开始覆盖旧事件，以保持最大的事件数量。也可以选择存档达到最大大小的事件日志，但需要注意归档日志的大小，因为它们不会自动删除，可能会填满服务器上的C:驱动器。最后，可以选择在事件日志满时停止收集事件，但这很少使用，因为最近发生的事件通常是最重要的。

如果需要跨多个服务器监视事件，可以配置事件日志订阅，将来自多台服务器的特定事件集中到一台服务器的日志中，从而简化检查工作。有关转发事件日志的详细信息，请参阅Windows Event Collector（网址：https://msdn.microsoft.com/en-us/library/bb427443(v=vs.85).aspx）。

#### 1.5.2 任务管理器
在Windows Server 2016中，任务管理器的默认视图仅显示系统上运行的应用程序名称，不显示资源使用或服务的详细信息。单击“More Details”按钮后，可以看到更多信息，如图1.19所示。

- **进程**：显示服务器上运行的进程列表及其CPU和内存利用率。进程分为应用程序、后台程序和Windows进程。
- **性能**：显示CPU利用率、内存利用率和网络利用率，有助于识别特定资源是否成为性能瓶颈。
- **用户**：显示通过控制台或远程桌面登录到服务器的所有用户及其启动的进程的CPU和内存利用率。
- **详细信息**：显示每个进程的可执行文件名、进程ID、状态、用户名、CPU利用率、内存利用率和描述信息。
- **服务**：显示每个服务的服务名称、进程ID、描述和状态，是快速了解服务信息的好方法。

根据当前查看的选项卡，可以执行各种操作，如停止、启动和重新启动服务，结束无响应的任务，或打开进程的文件位置以标识可执行文件的位置。

#### 1.5.3 资源监视器
资源监视器提供了比任务管理器更详细的性能信息，主要关注四个最可能成为瓶颈的资源：CPU、内存、磁盘和网络（见图1.20）。

- **概述**：显示CPU、内存、磁盘和网络中最常用信息的摘要。
- **CPU**：显示每个进程或服务的CPU利用率，并允许查看所选进程正在访问的所有资源和使用的动态链接库（DLL）文件。
- **内存**：显示每个进程使用的内存及其分配情况。
- **磁盘**：显示每个进程产生的磁盘活动，并提供存储部分的详细信息，包括磁盘队列长度。
- **网络**：显示每个进程的网络利用率，并列出所有TCP连接和监听端口。

资源监视器的一个有用特性是能够基于进程过滤视图。选择特定进程后，视图将只显示该进程的信息。

#### 1.5.4 性能监视器
性能监视器允许监视系统性能的许多详细方面。它提供的数据比任务管理器或资源监视器更详细，但可能更难解释（见图1.21）。

- **性能节点**：概述了通常监视的性能计数器，类似于任务管理器中的性能选项卡。
- **实时监视**：可以在性能监视器节点中添加和删除性能计数器，并选择其显示方式。
- **数据收集器集合**：用于记录系统活动以供以后分析。可以在“User Defined”节点中创建数据收集器集合。
- **报告**：生成并存储在“Reports”节点中，提供收集数据的摘要。

对于特定时间点的性能问题，可以使用性能监视器节点打开数据收集器集合中的日志文件，查看不同时间点的性能计数器值。

### 1.6 本章要点
- **部署过程**：定义一致的部署过程，尽可能自动化，以确保服务器配置的一致性和易于故障排除。
- **虚拟化环境**：对于完全虚拟化的基础架构，建议实现高级部署软件，如VMM或vCenter，以更好地实现流程自动化。
- **版本选择**：选择适合需求的Windows Server 2016版本，标准版和数据中心版的基本功能相同，但数据中心版包含更多高级特性。
- **激活方法**：根据组织规模和需求选择合适的激活方法，如MAK密钥、KMS或Active Directory Based Activation。
- **监控工具**：利用任务管理器、资源监视器和事件查看器等工具进行系统监控和故障排除。对于大型组织，建议使用集中监控软件，如System Center Operations Manager，以主动管理监控并及时通知管理团队。