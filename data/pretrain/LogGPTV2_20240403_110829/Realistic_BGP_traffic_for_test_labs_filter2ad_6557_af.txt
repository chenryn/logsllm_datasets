probability distribution) of the preﬁxes (chosen uniformly)
of a given or randomly chosen AS experience an update burst
starting at the speciﬁed time. Each update burst is real-
ized by selecting the number of involved updates and the
update interarrival time according to the appropriate prob-
ability distribution or it may be taken from a trace. Next
the updates are spaced within the available time frame. To
instantiate a single update the attribute changes have to be
selected. This is done according to the observed attribute
changes: AS path changes, policy changes, or other attribute
changes.
RTG advantages: RTGs approach diﬀers from black-box ap-
proaches that just replay a trace, in that it captures the
structure of BGP traﬃc. It is highly conﬁgurable, parame-
terizable and scalable and therefore allows insights into the
reasons behind certain behaviors. Through its ﬂexibility and
parameterization RTG enables us to study the sensibilities of
test systems in a repeatable and consistent manner while
still providing the possibility of capturing the diﬀerent char-
acteristics from diﬀerent vantage points in the network. On
the other hand the ability of scaling a trace and/or adapting
it to a diﬀerent scenario is rather limited. Traces taken from
diﬀerent vantage points in the network can have signiﬁcantly
diﬀerent characteristics and may or may not be appropriate
for certain tests [23]. In addition traces are usually consid-
ered proprietary. But tools, such as RTG, can be used by
people at diﬀerent locations and companies, that normally
could not share data to normalize their workloads [26]. In
addition it allows us to take one characteristic from one trace
and other characteristics from another trace.
Just consider two examples where RTG may help us: packet
classiﬁcation performance and interactions of routing up-
dates and classiﬁcation. Having a realistic routing table is
crucial for the performance evaluation of the classiﬁcation al-
gorithm, e.g., to determine the memory requirements. Also
the performance of some classiﬁcation algorithms depends
on the depth of a preﬁx in the tree. Each routing update
has the potential to change the routing table and therefore
interact with the forwarding performance. How many up-
dates and what kind of updates are necessary to break a
router depends on the structure of the updates and the size
of the table [20]. RTG allows us to explore this relationship
in a defensible fashion, instead of relying on the traces to
contain the necessary event sequences.
6. VALIDATION
The goal of the workload generator should be to generate
synthetic traﬃc that reﬂects the real workload as accurately
as possible. Therefore its validation is crucial for interpret-
ing the results derived from using the workloads. Ideally the
validation of the workload model is not just a veriﬁcation of
the parameters of the workload but also a demonstration
that the performance of a system subjected to the work-
load is similar to the performance of the system under a
real workload. This is beyond the scope of this paper and
will be subject of another paper which examines the behav-
ior of a router subjected to trace-based and RTG generated
workloads.
Our trace analysis has shown that BGP traﬃc has many
dependencies that are in part captured by our workload
model. To highlight some of RTGs features we examine, in
an exemplary fashion, if the characteristics of the generated
workload are consistent with the characteristics of the mea-
sured workload. For this we concentrate on derived mea-
sures rather than distributions that are already part of RTGs
42y
t
i
s
n
e
d
y
t
i
l
i
b
a
b
o
r
p
5
1
.
0
0
1
.
0
5
0
.
0
0
0
.
0
RRC:2
LISP:2
RTG:0
random
y
t
i
s
n
e
d
y
t
i
l
i
b
a
b
o
r
p
5
.
0
4
.
0
3
.
0
2
.
0
1
.
0
0
.
0
RTG:0
RRC:2−C
LISP:2−A
y
t
i
s
n
e
d
y
t
i
l
i
b
a
b
o
r
p
7
.
0
6
0
.
5
.
0
4
.
0
3
.
0
2
.
0
1
.
0
0
.
0
0
2
4
6
8
10
12
14
16
18
20
1
10
100
1,000
10,000
distance
number of prefixes
RTG:0
RRC:2−C
1
10
100
updates per min
1,000
10,000
Fig. 26: Distance class C.
Fig. 27: Preﬁx dist. per AS.
Fig. 28: Update rate per min..
conﬁguration. We show one example for each of the three
major components of RTG: BGP preﬁx forest, AS path, and
BGP updates.
BGP preﬁx forest: Since distances are not used as pa-
rameterized distribution in the table construction process
we present results about their distributions in order to verify
the nesting, fanout and preﬁx length at the diﬀerent levels.
Figure 26 shows the distribution of the preﬁx distances
for the class C address block, for a RTG generated table
with roughly twice the number of preﬁxes (227,747) and for
the two routing tables RRC:2 and LISP:2. One can observe
good agreement even though the RTG routing table contains
twice the number of preﬁxes as the original routing tables.
The later underlines some of RTGs capabilities. In addition
the plot also contains a routing table with IP addresses cho-
sen randomly and preﬁx mask chosen according to the preﬁx
length distribution. Here we observe a sizeable diﬀerence.
Checks of the other metrics show good agreements at all
depths.
AS path: Figure 27 plots the density of the logarithm
of the number of preﬁxes per AS (this includes transit-
ing and originating). We observe an apparent disagreement
between the curves for the RTG generated table and the two
datasets for small numbers of preﬁxes per AS. But one just
has to recall that the RTG generated table contains twice
the number of preﬁxes as the other two tables but the same
number of ASes. If we double the number of ASes as well we
again observe good agreement. The tails of the distributions
(not shown) agree rather well.
BGP updates: The analysis of Section 4.2 has highlighted
some of the dependencies between BGP updates. Therefore
we cannot hope to ﬁnd a single plot that validates this pro-
cess. Rather we pick one kind of instability creators: preﬁx
addition/deletion which each generates an update burst. We
generate an event log with update bursts based upon the in-
terarrival time distributions of update bursts. In a ﬁrst step
each update burst in the log ﬁle is replaced with an update
burst of the same kind from the actual trace. Figure 28
shows the resulting rate of updates for both the actual
update trace and the generated update trace (with twice as
many preﬁxes).
In a second step we generate the update
bursts according to the burst characteristics (not shown).
Note the good agreement of the rate plot.
7. SUMMARY
This paper motivated and presented our workload model
for BGP traﬃc and its prototype realization, RTG. The work-
load model is based on the key notion of a BGP instability
creator who creates correlated instability bursts via the AS
path, and eﬀects the BGP routing, characterized via the
notion of a preﬁx forest. We show how to derive the dis-
tributional parameters of RTG from actual BGP tables and
updates.
Indeed we present an analysis of instability cre-
ators and instability events involved in the current Internet
routing instabilities. In summary, we ﬁnd that RTG is capa-
ble of generating realistic BGP traﬃc in the lab.
The development of our prototype tool is part of a larger
research eﬀort of bringing the variability of the Internet into
test labs. The goal of the project is to study the impact of
variability in a controlled environment. RTG adds an impor-
tant component, routing, to the existing toolset of work-
load generators and traﬃc shaping tools. A test bed with
all these components will not just enable us to answer the
questions stated in the introduction but experiment with,
evaluate, and judge most Internet components.
Acknowledgments
We are in debt to Jan Bankstahl of SaarGate and the RIPE
RIS project for access to the BGP data. Numerous col-
leagues at Saarland University have provided valuable feed-
back on this work. We thank Jennifer Rexford, Andrew
Moore, Mark Crovella and the anonymous reviewers for their
detailed and insightful comments that greatly improved the
paper. This research has been partly supported by Cisco
Systems and the Defense Advanced Research Projects Agency
(DARPA), under grant N66001-00-8065 from the U.S. De-
partment of Defense. Its contents are solely the responsibil-
ity of the authors and do not necessarily represent the oﬃcial
views of Cisco Systems nor the Department of Defense.
8. REFERENCES
[1] IXIA BGP Routing Protocol Emulation Software, 2002.
http://www.ixiacom.com/.
[2] Chariot, 2002.
http://www.netiq.com/products/chr/default.asp.
[3] TeraRouter Tester, 2002. http://www.netcomsystems.com/
solutions/products/applications/pdf/TeraRouting/index.htm.
[4] A. Kr¨amer, “RIG, A BGP Routing Instability Generator,”
2002. Diploma Thesis, ETH Z¨urich.
http://www.barman.ch/rig/.
[5] T. G. Griﬃn and G. Wilfong, “An analysis of BGP
convergence properties,” in Proc. ACM SIGCOMM, 1999.
[6] A. Shaikh, R. Dube, and A. Varma, “Avoiding instability
during graceful shutdown of OSPF,” in Proc. IEEE
INFOCOM, 2002.
[7] T. Griﬃn, “What is the Sound of One Route Flapping?,”
2002. IPAM talk.
[8] B. Halabi, Internet Routing Architectures. Cisco Press,
1997.
[9] J. W. Stewart, BGP4: Inter-Domain Routing in the
Internet. Addison-Wesley, 1999.
[10] C. Huitema, Routing in the Internet. Prentice Hall, 1999.
43[11] B. Chinoy, “Dynamics of Internet routing information,” in
[35] G. Varghese, R. Govindan, R. Katz, and Z. Mao, “Route
ﬂap damping exacerbates Internet routing convergence,” in
Proc. ACM SIGCOMM, 2002.
[36] M. Faloutsos, P. Faloutsos, and C. Faloutsos, “On
power-law relationships of the Internet topology,” in Proc.
ACM SIGCOMM, 1999.
[37] K. Calvert, M. Doar, and E. W. Zegura, “Modeling Internet
topology,” in IEEE Communication Magazine, 1997.
[38] L. Gao, “On inferring autonomous system relationships in
the Internet,” in Proc. IEEE Global Internet, 2000.
[39] L. Gao and J. Rexford, “Stable Internet routing without
global coordination,” in Proc. ACM SIGMETRICS, 2001.
[40] B. Norton, “The art of peering: The peering playbook,”
2002.
[41] “SSFNet, Scalable Simulation Framework.”
http://www.ssfnet.org/.
[42] O. Maennel and A. Feldmann, “BGPcharacter: Tool for
processing and characterizing BGP data,” February 2002.
NANOG 24 talk.
[43] D. Wetherall, R. Mahajan, and T. Anderson,
“Understanding BGP misconﬁgurations,” in Proc. ACM
SIGCOMM, 2002.
[44] T. G. Griﬃn, F. B. Shepherd, and G. Wilfong, “Policy
disputes in path vector protocols,” in Proc. International
Conference on Network Protocols, 1999.
[45] A. Feldmann and S. Muthukrishnan, “Tradeoﬀs for packet
classiﬁcation,” in Proc. IEEE INFOCOM, 2000.
[46] W. Fang and L. Peterson, “Inter-AS traﬃc patterns and
their implications,” in Proc. IEEE Global Internet, 1999.
[47] H. Tangmunarunkit, R. Govindan, S. Jamin, S. Shenker,
and W. Willinger, “Network topology generators:
Degreebased vs. structural,” in Proc. ACM SIGCOMM,
2002.
[48] B. Krishnamurthy and J. Rexford, Web Protocols and
Practice. Addison-Wesley, 2001.
[49] RIPE’s Routing Information Service Raw Data Page.
http://data.ris.ripe.net/.
[50] SaarGate. http://www.saargate.de/.
[51] University of Oregon RouteViews project.
http://www.routeviews.org/.
[52] Merit. http://www.merit.edu/.
[53] V. Fuller, T. Li., J. Yu, and K. Varadhan, “Classless
Inter-Domain Routing (CIDR): an Address Assignment and
Aggregation Strategy,” 1993. RFC 1519.
[54] Light Reading, “The Internet Core Router Test,” 2001.
[55] G. Huston, “Analyzing the Internet BGP routing table,” in
Internet Protocol Journal, 2001.
[56] A. Broido, E. Nemeth, and K. Claﬀy, “Internet Expansion,
Reﬁnement and Churn,” in ETT, 2002.
[57] L. Subramanian, S. Agarwal, J. Rexford, and R. H. Katz,
“Characterizing the Internet hierarchy from multiple
vantage points,” in Proc. IEEE INFOCOM, 2002.
[58] C. Labovitz, “Multithreaded routing toolkit,” in Merit
Technical Report to the National Science Foundation, 1996.
Proc. ACM SIGCOMM, pp. 45–52, 1993.
[12] R. Govindan and A. Reddy, “An analysis of Internet
inter-domain topology and route stability,” in Proc. IEEE
INFOCOM, 1997.
[13] K. Varadhan, R. Govindan, and D. Estrin, “Persistent
route oscillations in inter-domain routing,” tech. rep.,
96-631, USC/ISI, 1996.
[14] C. Labovitz, R. Malan, and F. Jahanian, “Internet routing
instability,” IEEE/ACM Trans. Networking, vol. 6, no. 5,
pp. 515–558, 1998.
[15] C. Labovitz, R. Malan, and F. Jahanian, “Origins of
Internet routing instability,” in Proc. IEEE INFOCOM,
1999.
[16] C. Labovitz, A. Ahuja, and F. Jahanian, “Experimental
study of Internet stability and wide-area network failures,”
in Proc. International Symposium on Fault-Tolerant
Computing, 1999.
[17] C. Labovitz, A. Ahuja, A. Bose, and F. Jahanian, “Delayed
Internet routing convergence,” in Proc. ACM SIGCOMM,
2000.
[18] T. G. Griﬃn and B. J. Premore, “An experimental analysis
of BGP convergence time,” in Proc. International
Conference on Network Protocols, 2001.
[19] A. Shaikh, L. Kalampoukas, R. Dube, and A. Varma,
“Routing stability in congested networks: Experimentation
and analysis,” in Proc. ACM SIGCOMM, 2000.
[20] D. Chang, R. Govindan, and J. Heidemann, “An Empirical
Study of Router Response to Large BGP Routing Table
Load,” tech. rep., USC/ISI, 2001.
[21] S. Ramachandra, Y. Rekhter, R. Fernando, J. Scudder, and
E. Chen, “Graceful restart mechanism for BGP,” 2001.
Internet Draft (draft-ietf-idr-restart-05.txt).
[22] D. McPerson, V. Gill, D. Walton, and A. Retana, “BGP
persistent route oscillation condition,” 2001. Internet Draft
(draft-ietf-idr-route-oscillation-01.txt).
[23] H. Berkowitz, A. Retana, S. Hares, and P. Krishnaswamy,
“Benchmarking methodology for basic BGP convergence,”
2002. Internet Draft (draft-ietf-bmwg-bgpbas-01.txt).
[24] H. Berkowitz, A. Retana, S. Hares, P. Krishnaswamy, and
M. Lepp, “Terminology for benchmarking external routing
convergence measurements,” 2002. Internet Draft
(draft-ietf-bmwg-conterm-01.txt).
[25] NANOG: The North American Network Operators Group.
http://www.nanog.org/.
[26] S. Hare, P. Krishnaswamy, M. Lepp, A. Retana,
H. Berkowitz, and E. Davis, “BGP convergence
measurement issues,” 2001. IETF/bmwg talk.
[27] P. Barford and M. Crovella, “Generating Representative
Web Workloads for Network and Server Performance
Evaluation,” in Proc. ACM SIGMETRICS, pp. 151–160,
1998.
[28] P. Danzig, R. Caceres, D. Mitzel, and D. Estrin, “An
empirical workload model for driving wide-area TCP/IP
network simulations,” IEEE/ACM Trans. Networking,
vol. 3, no. 1, pp. 1–26, 1992.
[29] P. Danzig and S. Jamin, “tcplib: A Library of TCP
Internetwork Traﬃc Characteristics,” tech. rep., USC, 1991.
[30] C. Huitema, Routing in the Internet. Prentice Hall, 1995.
[31] Y. Rekhter and T. Li, “A Border Gateway Protocol 4
(BGP-4),” 1995. RFC 1771.
[32] C. Villamiyar, R. Chandra, and R. Govindan, “BGP route
ﬂap damping,” 1998. RFC 2439.
[33] C. Panigl, J. Schmitz, P. Smith, and C. Vistoli, “RIPE
Routing-WG Recommendation for Coordinated Route-ﬂap
Damping Parameters ,” 2001.
http://www.ripe.net/ripe/docs/ripe-229.html.
[34] M. Musuvathi, S. Venkatachary, R. Wattenhofer,
C. Labovitz, and A. Ahuja, “BGP-CT: A First Step
Towards Fast Internet Fail-Over,” in Microsoft Research
Technical Report, 2000.
44