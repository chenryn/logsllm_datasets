●
●●
●●●●●●●●●●●●●
●●●
●●
●●●●
●
●●●●●●●
●
●●
●●
●●●●
●
●●●
●●●
●●●●
●●●●●
●●●
●●
●●●●●●●●●●●
●
●●●
●●●
●
●
●●●●●●●●
●●
●●●
●
●●
●
●●●●
●
●●
●
●
●
●
●
●●●
●
●●●
●
●
●●
●●●
●●
●●●●●●
●
●●●●●●●
●
●●●
●●
●●●
●●●●
●●●●●
●●
●●●●
●
●●●
●●
●●●●
●●
●●●●
●
●●
●●
●
●
●
●●●●
●●●
●●
●●●
●
●●●●
●
●
●
●●●●●●●
●●●
●●●●●
●
●●
●
●●
●●●●●
●
●●
●●●
●
●
●
●
●●
●
●●●●●●●●●●●●●
●●●
●●●●
●●
●●●●●●
●
●●●●●●●●●●●●●●
●●●●●●●●●●●●
●
●●●●●●●●●●
●
●
●●●●●●
●●●●
●●●●●●●
●●
●●●
●●
●●
●●●●●●●●●●●
●●●●●●●●●●
●●●●●●●●●●●●●●
●●●●
●●●●●
●●
●●●●
●●●●●●●●
●●●●●●●●●●●●●●
●
●
●●●●●●●●●●●●●●●●
●●●●●●
●●●●●●●●●●●●●
●●
●
●
●●●●●●●
●●●
●●
●●●
●●●●●●
●
●●●●●●●●●●
●
●●●
●●●●●●●●●●●
●●●
●●
●●●●●
●●●●●●●●
●●●●●●●●●
●●●
●●●
●●●●●●●●●
●●
●●
●
●●●●●●●
●●●●●●●●●
●●
●●●●●●●●●●●●
●●●●●●
●
●●●●
●●
●●●●
●●●●
●●●●●●●●●●●
●●●●●
●●
●●●●●●●●●●●
●●●●
●●●
●●
●●●●
●●
●●●●●●●●●●
●
●●
●●
●
●●●
●
●●
●●●●
●●●●
●
●
●
●
●
●
●●
●
●●
●
●
●
●●●●
●
●●
●
●
●●
●
●
●●
●
●
●
●
●●
●●●
●
●●
●
●●●
●
●
●
●
●
●
●
●
●●●●●
●
●
●
●
●
●●
●
●
●
●
●
●●
●
●
●●
●●●●●●●●●
●
●●
●●●
●
●●●●●
●
●●●●●
●●●
●
●
●●●●●
●
●●●
●
●●●
●●●●
●
●●
●●
●●●●●
●
●
●
●●
●●●
●●
●●●
●
●
●
●●
●●
●●●●
●
●
●
●
●
●●
●●
●●
●●
●●
●●
●
●
●
●
●
●●
●●
●●●●
●
●
●
●
●
●
●●
●
●●●●
●
●
●
●●●
●●●
●
●
●
●●●●●
●●
●●●
●
●●
●
●
●
●
●
●●
●●
●●
●
●
●
●
●
●
●
●
●
●●
●●
●●●
●
●
●
●
●●
●●
●●●●
●●●
●
●
●●●●
●●●
●●●
●
●
●●
●
●
●
●
●
●
●●●
●
●
●●
●
●●
●●●
●
●●●●●●
●
●
●●●●●●●
●●●●
●
●
●
●
●●
●●
●●●●
●
●
●
●●
●●
●●
●
●●
●
●●
●
●●
●●
●●
●●●●●
●
●
●●●●●●
●●
●●
●●●
●
●
●
●●
●
●
●
●
●
●
●
●●
●
●
●
●
●
●
●
●
●●
●
●
●
●
●●●
●
●
●●
●●●
●
●●●●
●●
●
●
●
●
●●●
●
●●●●
●●
●●●
●
●
●
●
●
●●●
●
●
●
●
●
●
●
●
●
●
●
●
●●
●
●
●
●
●
●
●
●
●●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
l
)
e
a
c
s
−
g
o
l
(
.
g
r
o
f
o
.
m
u
N
102
101
100
100
101
102
103
104
105
Num. of server IPs (log−scale)
(c) Scatter plot of number of organizations vs. the number of server
IPs for each AS
Figure 6: Heterogeneity of organizations and ASes
that organization (y-axis).3 We observe that operating a highly di-
verse infrastructure is commonplace in today’s Internet and is not
limited to only the Internet’s biggest players, but reporting on the
3While in a few isolated cases, the ASes that host servers from
a given organization are part of that organization (e. g., see [24]),
hand-checking the 143 organizations with more than 1000 servers
conﬁrmed that in almost all cases, these ASes are genuine third-
party networks that are run and operated independently from the
organization whose servers they host.
bewildering array of scenarios we encountered when examining the
extent of the different organizations and the networks they partner
with is beyond the scope of this paper.
The realization that many organizations operate a server infras-
tructure that is spread across many ASes implies that the comple-
mentary view must be equally bewildering in terms of diversity or
heterogeneity. This view is captured in Figure 6(a) by focusing on,
say AS1, and examining how many third-party networks host some
of their servers inside that AS. Thus, yet another way to quantify
how much closer that cartoon ﬁgure is to reality than the traditional
AS-level view with its implicit homogeneity assumption concern-
ing the administrative authority of servers hosted within an AS is
shown in Figure 6(c). Each dot in this ﬁgure represents an AS,
and the number of organizations a given AS hosts is given on the
y-axis while the number of identiﬁed server IPs is shown on the
x-axis. As before, the ﬁgure only shows organizations with more
than 10 servers. We observe that many ASes host a sizable number
of server IPs that belong to many organizations; there are more than
500 ASes that host servers from more than ﬁve organizations, and
more than 200 ASes that support more than 10 organizations.
Indeed, this observation is again fully consistent with public an-
nouncements [1, 6] and content providers’ efforts [5] to install their
own brand of single-purpose CDNs inside various ISPs. The end
effect of such developments is a clear trend towards more hetero-
geneous eyeball ISP networks by virtue of such ASes hosting more
servers from an increasing number of interested third-party net-
works. In view of similar announcements from key companies such
as Google [51, 25, 34], Amazon [2], or Facebook [4], the chal-
lenges of studying, leave alone controlling, such increasingly in-
tertwined networks and trafﬁc are quickly becoming daunting. As
an example, consider a large Web hosting company (AS36351), for
which we identiﬁed more than 40K server IPs belonging to a total
more than 350 different organizations (highlighted in Figure 6(c)
with a square).
5.3 New reality (II): Links are heterogeneous
In Section 5.2, we show that organizations take advantage of net-
work diversity and purposefully spread their infrastructure across
multiple networks. This development creates very ﬂuid and often
transparent network boundaries, which in turn causes havoc when
trying to attribute the right trafﬁc to the right network. The issues
are illustrated in the cartoon Figure 7(a). The ﬁgure shows the tra-
ditional AS-level perspective, whereby Akamai is a member AS
(AS1) of this IXP, and so are a generic AS3 and another generic
(non-Akamai) AS2, and the Akamai AS peers at this IXP with
AS3 which, in turn, peers also with AS2. This traditional AS per-
spective is enriched with member-speciﬁc details that specify that
there is an Akamai server behind/inside (non-Akamai) AS2 and
behind/inside the Akamai AS. Note that in terms of the traditional
AS-level view, the question of how much Akamai trafﬁc is seen at
this IXP is clear-cut and can be simply answered by measuring the
trafﬁc on the peering link between AS3 and the Akamai AS. How-
ever, when accounting for the fact that there is an Akamai server
behind/inside the non-Akamai member AS2, answering that same
question becomes more involved. It requires measuring the traf-
ﬁc on the (Akamai) peering link between AS3 and the Akamai AS
as well as accounting for the Akamai trafﬁc on the (non-Akamai)
peering link between AS3 and (non-Akamai) AS2.
Clearly, for accurately attributing trafﬁc to the responsible par-
ties in today’s network, the trend towards network heterogeniza-
tion creates problems for the traditional AS-level view of the In-
ternet. To illustrate the extent of these problems, we show in Fig-
ure 7(b) what we observe at the IXP for Akamai. Recall that Aka-
343    
Akamai server
S
IXP
Akamai AS
(AS1)
Akamai server
S
non-Akamai AS
(AS2)
member AS
(AS3)
(a) Observing trafﬁc from a direct and a non direct link of Akamai
● Member
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●●
●
●
●●●●
●
●
●
●
●●
●
● ●
●
●
●● ●
●
●
●
●●
●
●
●
● ●
●
●
●
●
●
●●
●●
●
●
●
●
● ●●
●
●
●●
● ●
●●
●
●
●
●
●
●
●
●
●
●
●●
●●
●●
●
●
●●
●
●
●
●
●
●
●●
●●●
●
●
●
●
●
●
●
●
●
●
●
●
●
● ●
●
●
●
●● ●
●
●
●
● ●
●
●
●
●
●●
●
●
●
●
●
●
●
●
●
●●
●
●
●●●
●
●
●
●●
● ●
●
●
●
●●
●
●
●
●
●●
●
●
●
●
●● ●●●
●
●
● ●●
●
● ● ● ● ●
●●
●●
●
●
●
●●
●
●
●●●●
●●●
●
●
●
●
●
●
●●
● ●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●