Copyright © 2010 - 2018 EnterpriseDB Corporation. All rights reserved. 634
EDB Postgres Replication Server User’s Guide
as described in sections 5.2.1 and 5.3.1. For single-master replication systems
only, you then need to change the port numbers stored in the control schema from
the old port numbers to 9051 and 9052. First, perform the procedure described in
Section 7.6.1.2, and then perform the procedure described in Section 5.5.3.
After making the changes as previously described, click the Refresh button of the xDB
Replication Console. The replication tree of the xDB Replication Console should display
the complete set of nodes for the replication systems.
10.3 Resolving Problems
This section contains tips for locating and correcting various problems that may occur.
10.3.1 Error Messages
The following table is a list of certain error messages that can appear from the xDB
Replication Console. The messages are listed in alphabetical order based on the first word
in the message following “a”, “an”, or “the”.
When an error message is displayed by the xDB Replication Console, it may be followed
by a specific reason as denoted by Reason: reason_for_failure as in the following
example:
Authentication failed. Reason: Invalid user name/password.
The various specific reasons are not listed for all messages in the table.
This table also lists only the messages that typically involve initial configuration
operations requiring additional information for resolving the problem. Messages related
to less complicated corrections for simpler operations are not listed in this table.
Table 10-3 - xDB Replication Server Error Messages
Error Messages and Resolutions
Authentication failed. Reason: Invalid user name/password.
Resolution: Occurs when registering a publication server or subscription server. Verify the user name
and password you enter matches the admin user name and password in the xDB Replication Configuration
file on the host you are running the publication server or subscription server. See Section 2.3.1.3.
Cannot register database because it is already registered by a publication
service.
Resolution: Only one publication database definition can be created for any given database. (Oracle is
the exception whereby more than one publication database definition can be created for the same Oracle
database if different Oracle user names are specified in each publication database definition.)
The connection could not be established with the server. Verify that the server
is running and accepting connections. Reason: Connection refused to host:
xxx.xxx.xx.xxx; nested exception is: java.net.ConnectException: Connection
refused
Copyright © 2010 - 2018 EnterpriseDB Corporation. All rights reserved. 635
EDB Postgres Replication Server User’s Guide
Error Messages and Resolutions
Resolution: Occurs whenever a Java RMI connection cannot be made to the publication server, the
subscription server, or a database server. Can occur when registering a publication or subscription server,
adding a publication database or a subscription database, or identifying the publication server for a new
subscription. Verify you have entered the correct host IP address and port number of the server. Verify the
server is running (see Section 10.3.4.2). If the server is running on Linux, verify that in the /etc/hosts
file, the host name is mapped to the correct network IP address, which matches the IP address returned by
the Linux /sbin/ifconfig command, and also matches the IP address you entered in the Host field of
the dialog box. Alternatively, instead of modifying the /etc/hosts file, set configuration option
java.rmi.server.hostname to the IP address of the publication or subscription server (see Section
10.4.1.7). Do not use the loopback address 127.x.x.x for this entry.
Connection refused. Check that the hostname and port are correct and that the
postmaster is accepting TCP/IP connections.
Resolution: Occurs when attempting to save a publication database definition. The publication server
cannot connect to the database server network location given in the Add Database dialog box. Verify that
the correct IP address and port for the database server are given. Verify that the database server is running
and is accessible from the host running the publication server.
Could not connect to the database server. Reason: FATAL: number of requested
standby connections exceeds max_wal_senders (currently n)
Resolution: Occurs when attempting a snapshot replication from a publication database configured with
the log-based method of synchronization replication (that is, WAL based logical replication), and the
additional concurrent connection for logical replication exceeds the current setting, n, of the
max_wal_senders configuration parameter in the postgresql.conf file. Increase the value of
max_wal_senders in the postgresql.conf file of the database server running the publication database.
Restart the database server containing the publication database. See Section 2.2.10.
Currently no publication exists on the publication server. Please create at
least one publication on the server and then retry.
Resolution: Occurs when attempting to create a subscription. If there are no publications in the specified
publication server, then this error message is displayed.
The database cannot be registered because a partial schema already exists. A
manual cleanup is required to proceed. For help with manual cleanup please
check out our product documentation.
Resolution: The metadata database objects from a prior publication already exist in the schema under
which the publication server is attempting to create new metadata database objects. Perform the operation
described in Section 10.3.4.3.
Database cannot be removed. Reason: Publication database connection cannot be
removed as one or more publications are defined against it.
Resolution: Make sure all publications subordinate to the publication database definition have been
removed. If no publications appear under the Publication Database node in the xDB Replication Console
replication tree and the error persists, there may be a problem with the control schema objects. Perform the
operation described in Section 10.3.4.3.
Database cannot be removed. Reason: Publication service failed to clean up
replication control schema tables.
Resolution: The control schema objects under the Oracle publication database user schema or under the
Postgres or SQL Server schemas _edb_replicator_pub, _edb_replicator_sub, or
_edb_scheduler cannot be deleted by the publication server. The control schema objects or schemas
may have already been deleted. The publication database definition cannot be removed using the xDB
Replication Console. Perform the operation described in Section 10.3.4.3.
Database cannot be removed. Reason: The target publication database is
Copyright © 2010 - 2018 EnterpriseDB Corporation. All rights reserved. 636
EDB Postgres Replication Server User’s Guide
Error Messages and Resolutions
currently set as the Controller database and is being referenced by one or more
dependent nodes.
Resolution: Occurs when attempting to remove the publication database currently set as the controller
database. Select another publication database to be used as the controller database. Use the Set As
Controller option in the publication databases’ context menu to set this database as the controller database.
You can then remove the original publication database. See Section 7.7.
Database cannot be set as controller. Reason: Connection refused. Check that
the hostname and port are correct and that the postmaster is accepting TCP/IP
connections.
Resolution: Occurs when attempting to set a publication database as the controller database and the
database is not accessible by the publication server. Verify that the correct IP address and port has been
defined in the publication database definition. Verify that the database server is running and is accessible
from the host running the publication server.
Database connection cannot be added. Connection refused. Check that the
hostname and port are correct and that the postmaster is accepting TCP/IP
connections.
Resolution: Occurs when attempting to save a subscription database definition. The subscription server
cannot connect to the database server network location given in the Add Database dialog box. Verify that
the correct IP address and port for the database server are given. Verify that the database server is running
and is accessible from the host running the subscription server.
Database connection cannot be added. FATAL: no pg_hba.conf entry for host
"xxx.xxx.xx.xxx", user "user_name", database "db_name", SSL off
Resolution: Occurs when attempting to save a subscription database definition. The subscription server
is not permitted to connect to the database at the network location given in the Add Database dialog box.
Verify that the database host IP address, port number, database user name, password, and database
identifier are correct. Verify there is an entry in the pg_hba.conf file permitting access to the database by
the given user name originating from the IP address where the subscription server is running.
Database connection cannot be added. Controller database is not initialized
yet.
Resolution: Occurs when attempting to add a subscription database. Verify that the xDB Replication
Configuration file on the host running the subscription server contains an entry for a valid controller
database. Verify that a publication database has been defined under the publication server as the controller
database and its connection information is recorded in the xDB Replication Configuration file. See Section
2.3.1.3.
The database type for the selected database is different than that of the MDN
database. Each database should be of the same type in a MMR cluster.
Resolution: All database servers in a multi-master replication system must be of the same type – either
all PostgreSQL (or Advanced Server installed in PostgreSQL compatible configuration mode); or all
Advanced Server installed in Oracle compatible configuration mode. This error message is displayed when
attempting to add a master node and the database server type differs from the database server type of the
master definition node. See Section 10.1.3.3.
An error occurred while removing tables from other Master node(s). Please refer
to the user manual for instructions on how to remove shadow tables and triggers
from Master node(s).
Resolution: When a master node of a multi-master replication system is deleted using the xDB
Replication Console or the xDB Replication Server CLI, the control schema objects that were created in
the master node are also dropped. These include schemas _edb_replicator_pub,
Copyright © 2010 - 2018 EnterpriseDB Corporation. All rights reserved. 637
EDB Postgres Replication Server User’s Guide
Error Messages and Resolutions
_edb_replicator_sub, and _edb_scheduler. For the log-based method of synchronization replication
there are shadow tables and triggers on the publication tables as well. If any of these control schema objects
fail to be dropped, this error message is displayed. See Section 10.3.4.3 for directions on how to remove
these control schema objects.
FATAL: no pg_hba.conf entry for host "xxx.xxx.xx.xxx", user "user_name",
database "db_name", SSL off
Resolution: Occurs when attempting to save a publication database definition. The publication server is
not permitted to connect to the database at the network location given in the Add Database dialog box.
Verify that the database host IP address, port number, database user name, password, and database
identifier are correct. Verify there is an entry in the pg_hba.conf file permitting access to the database by
the given user name originating from the IP address where the publication server is running.
Filter cannot be defined for Binary data type column(s)e.g. BYTEA, BLOB, RAW.
Resolution: Occurs when attempting to define a filter rule on a column with a binary data type in a
publication table. Filter rules are not permitted on such columns. See Section 2.2.12.3.
Filter with same name/clause already exist on table/view: schema.table_name
Resolution: When adding a filter rule on a publication table, the same filter name or the same filter
clause (WHERE clause) cannot be used more than once on a given table. Modify the duplicate filter name or
filter clause so it is unique for the table.
The initial snapshot is not performed for this subscription. Please take the
snapshot first and then proceed with the synchronize operation.
Resolution: A snapshot replication must be performed before the first synchronization replication.
Perform an on demand snapshot replication.
It is recommended to use a network IP address, the loopback address may result
in connectivity issues.
Resolution: This warning is given when localhost or 127.0.0.1 is specified as the host address of a
replication system component. If is strongly recommended that all replication system components are
identified by their specific IP address on the network.
The log triggers creation failed for one or more publication tables. Make sure
the database is in valid state and user is granted the required privileges.
Resolution: Either the user does not have the trigger creation privilege or there is a database server
problem. The database server message is displayed as part of the error.
The MMR mode is currently not supported for database_type database.
Resolution: A database server of type database_type cannot be used in a multi-master replication
system. Only Advanced Server or PostgreSQL database servers may be used as master nodes in a multi-
master replication system.
Multiple filters of same table are not allowed.
Resolution: When creating a subscription in a single-master replication system or creating a master
node other than the master definition node in a multi-master replication system, only one filter may be
selected for a given table. Uncheck the additional boxes in the Apply column under the Filter Rules tab if
more than one box is selected.
No JDBC Client driver is configured for the Oracle data source.
Resolution: Occurs when creating an Oracle publication or subscription database definition. Copy the
Oracle JDBC driver file ojdbcx.jar to subdirectory lib/jdbc of where the publication server or
subscription server is installed on the host running the publication server or subscription server. Restart the
Copyright © 2010 - 2018 EnterpriseDB Corporation. All rights reserved. 638
EDB Postgres Replication Server User’s Guide
Error Messages and Resolutions
publication server or subscription server.
No Publication found on MDN node, additional Master node cannot join MMR
cluster.
Resolution: Occurs when attempting to add a second master node to a multi-master replication system,
but no publication has been defined under the master definition node. Create a publication under the master
definition node, then add the additional master nodes. See Section 6.2.3.
None of the target master/subscription databases is accessible, hence the
replication process failed to complete.
Resolution: Synchronization replication failed due to the unavailability of a target database. See the
publication server log file for details. See Section 10.3.2.
One or more master database node(s) are defined against this publication.
Removing the publication will invalidate the MDN.
Resolution: Master nodes are still defined in a multi-master replication system in which an attempt is
being made to delete the publication from the master definition node. All master nodes (other than the
master definition node) must be deleted first before deleting the publication from the master definition
node. Perform this deletion process with the xDB Replication Console or xDB Replication Server CLI.
One or more subscriptions are defined against this publication. Removing the
publication will invalidate the subscription. Do you want to continue?
Resolution: Warning issued when you attempt to remove a publication with subscriptions associated
with it. You can remove the publication, but the subscriptions are no longer usable and should be removed
as well.
Multiple Publications creation is currently not supported.
Resolution: Only one publication is supported in a multi-master replication system and only one such
multi-master replication system can exist for an xDB Replication Server installation.
Only subscription which has subscribed against a publication with transactional
replication type, can be synchronized.
Resolution: You cannot perform synchronization replication on a snapshot-only publication. Perform
snapshot replication instead.
The Oracle/MS SQL Server cannot be registered if the active Controller database
is a non-PG/PPAS database.
Resolution: Occurs when creating an Oracle or SQL Server publication database definition and the
current controller database is not a Postgres database (that is, the controller database is an Oracle or SQL
Server database). In order to create an Oracle or SQL Server publication database, create and designate a
Postgres publication database as the controller database. See Section 7.7.
Parent table table_name is not selected when its child tables are part of the
publication list.
Resolution: Table selected for a publication has a foreign key referencing a parent table that has not
been chosen for the publication. This is only a warning that the parent table will not be part of the
subscription.
Problem occurred in publish process. Reason: Connection refused. Check that the
hostname and port are correct and that the postmaster is accepting TCP/IP
connections.
Resolution: Occurs when attempting synchronization replication and the controller database is not
accessible by the publication server. Verify that the correct IP address and port has been defined in the
publication database definition of the controller database. Verify that the database server is running and is
Copyright © 2010 - 2018 EnterpriseDB Corporation. All rights reserved. 639
EDB Postgres Replication Server User’s Guide
Error Messages and Resolutions
accessible from the host running the publication server.
Problem occurred in publish process. Reason: ERROR: permission denied for
schema _edb_replicator_pub
Resolution: For a Postgres publication, verify that the publication database user has CREATE ON
DATABASE privilege on the publication database, or the database user is a superuser.
Publication cannot be created. One or more tables have no attributes defined
and cannot be published. Unselect the specific tables and retry.
Resolution: In Postgres, it is possible to create a table with no columns. A publication is not allowed to
include a Postgres table with no columns since the corresponding subscription table cannot be created in
Oracle.
Publication cannot be created. Publication publication_name already exists on
the publisher server. Please choose a different name and then proceed.
Resolution: Publication names must be unique within a publication server. Enter a different publication
name.
Publication cannot be created. Table schema.table_name replica identity is set
to replica_identity_setting. To define a Filter, the table replica identity
should be set to FULL.
Resolution: Occurs when a table filter is attempted to be defined on a publication table used in a log-
based replication system. Use the ALTER TABLE statement to change REPLICA IDENTITY to FULL. See
Section 2.2.12.3.
Publication cannot be created. Table table_name does not contain a primary key.
Transactional replication is not supported for a non-pk table.
Resolution: All tables used for synchronization replication must have primary keys. Create a primary
key on the table or add the table to a snapshot-only publication.
Publication cannot be created. The publication creation process timed out as
one or more tables may be locked by another session. Please retry later.
Resolution: For a Postgres publication that is not for snapshot-only, the publication database user must
be able to create triggers on the publication tables. In order to do this, the publication database user must
have the privilege to execute the ALTER TABLE statement on the publication tables and the publication
database user must have CREATE and USAGE privileges on the schema containing the publication tables.
Verify that one of the following is true: 1) All the tables in the publication are owned by the publication
database user and the user has CREATE and USAGE privileges on the publication tables’ schemas, or 2) the
publication database user is a superuser.
Publication cannot be removed. Reason: Publication publication_name cannot be
removed. Reason: Error: cannot drop table
_edb_replicator_pub.rrst_schema_table_name because other objects depend on it.
Resolution: PL/pgSQL custom conflict handler functions may exist in the master definition node that
are dependent upon the publication’s shadow tables. Drop the custom conflict handler functions before
deleting the publication.
Publication cannot be updated. Reason: The parent table schema.table_name is
selected for removal while it has one or more child tables in the publication
list. Make sure that parent-child dependency holds in the publication tables.
Resolution: Choose the child tables for removal as well as the parent table.
Publication defined in MMR cluster cannot be subscribed in SMR cluster.
Resolution: A given publication cannot be used in both a multi-master replication system and a single-
Copyright © 2010 - 2018 EnterpriseDB Corporation. All rights reserved. 640
EDB Postgres Replication Server User’s Guide
Error Messages and Resolutions
master replication system.
Publication does not exist on the publication server. It might have been
removed.
Resolution: The publication does not exist for a given subscription. The subscription is no longer usable
and must be removed.
Publication having subscription against it, cannot be updated by removing
tables from it.
Resolution: Remove the subscription, remove tables from the publication, then add the subscription.
The publication schema cannot be created. Reason: ERROR: Permission denied for
database db_name.
Resolution: Occurs when attempting to create the publication database definition and the specified
publication database user does not have the privilege to create a schema in database db_name. Grant the
CREATE privilege on the database to the publication database user
Publication Service connection failure.
Resolution: Verify that the publication server is running. See Section 10.3.4.2. Verify that the database
server hosting the controller database specified in the xDB Replication Configuration file is running and
the publication server is connected to it. See Section 2.3.1.3.
The replication process could not be completed due to a database failure. Check
the database state and retry.
Resolution: May be caused by characters in the publication data that are illegal for the character set of
the subscription database. Check the snapshot replication failure log file or the database server log file. See
Section 10.4.1.2.
Replication server does not support Oracle to Oracle replication.
Resolution: See Section 10.1.3 for supported database server configurations. Use Oracle products for
Oracle to Oracle replication.
A replication slot is not available on the target database server. Please
configure the max_replication_slots GUC on the database server.
Resolution: Occurs when attempting to add a publication database definition with the log-based method
of synchronization replication, and the max_replication_slots configuration parameter in the
postgresql.conf file is not set to a large enough value to accommodate the additional database.
Increase the value of the max_replication_slots parameter and restart the database server. See Section
2.2.10 for additional information.
Subscription subscription_name already exists on the subscriber server. Please
choose a different name and then proceed.
Resolution: Subscription names must be unique within a subscription server. Enter a different