# Red Team Techniques-通过钓鱼攻击获得访问权限
关于红队如何制作网络钓鱼攻击的帖子很多，但是大多数不是很完整。  
我下面会讲我们最近的一次攻击案例，从0到获得权限，包括域名的创建，制作钓鱼攻击的手段，绕过垃圾邮件过滤器，和电子邮件网关的注意事项，生成bypass
的payload以及绕过AMSI，文章的末尾我列了一份参考文章的清单。
## 重要的注意事项
  * 邮件的来源
    * 使用脚本从本地发送邮件
    * headers中的ip可信度
  * 最近购买的VPS有没有发件人历史记录
  * 链接的可信度和域名的年龄
  * 使用信任度高的发件人，如Mailchimp或Sendgrid
    * 使用这些服务商来验证自己的域名，然后电子邮件就是"`发件人:自己的域名`",而不是`通过Mailchimp for XXX`
  * 匹配目标电子邮件的返回路径
  * 配置SPF（发件人策略框架），DKIM（域名密钥识别邮件），DMARC（DMARC是一种基于现有的SPF和DKIM协议的可扩展电子邮件认证协议，在邮件收发双方建立了邮件反馈机制，便于邮件发送方和邮件接收方共同对域名的管理进行完善和监督。）
  * 时间和发送频率
    * 如果从一个可信度极低的ip一次发送100封电子邮件，基本会被标记为垃圾邮件
  * 在发送的域名和链接中有SSL证书 
  * 死链接（
  * HTML内容的数量
## 远离黑名单
你参与的时间长短决定了你对这件事情的关注度。
  * 对自动化扫描引擎的保护。如果你克隆的站点信任度很高，这一点很重要
    * Scrapers和SEG（安全电子邮件网关）可以发现Office 365和Gmail等网络钓鱼页面。
    * 为自动化平台提供正常的内容，防止被检测到。