r
e
s
s
t
s
e
u
q
e
R
without HH detection
with HH detection (top-10)
 5
 4
 3
 2
 1
)
s
c
e
s
m
n
i
(
e
m
i
t
e
s
n
o
p
s
e
r
 0
 50
 100
 150
 200
 250
 300
 350
 400
 0
 50
CDN1
CDN2
object#
01
02
03
04
05
06
07
08
09
10
without HH detection
with HH detection (top-10)
 100
 150
 200
 250
 300
 350
 400
ﬁle#
01
size
38K
66K
154K
217K
385K
510K
905K
2.48M 05
6.16M 06
17M
07
02
03
04
size
36K
254K
471K
599K
3.4M
4.5M
8.6M
number of IPs per request
number of IPs per request
Figure 10: PaDIS performance: # of requests (left) average response time (right) with in-
creasing query sizes.
Table 3: CDN performance
evaluation: Object sizes.
response time variance was minimal and the software ran stably
throughout all experiments.
DNS load balancing for requests to the CDN. However, the content
is still provided by the content producer.
We repeated the experiment with heavy hitter detection activated
and maintained a list of heavy hitters by considering the top ten
replies, aggregating them every ten seconds. These were then fed
into the ranking function. Our results show that both the number
of requests served by PaDIS as well as the average response time
decreases only slightly.
4. PERFORMANCE EVALUATION
To highlight that CDSs do not necessarily optimize their DNS
load balancing strategies in such a way as to maximize user perfor-
mance, and to show the potential of application ISP collaboration,
which PaDIS enables, we perform extensive active measurements.
Using ten vantage points within the ISP at residential locations and
selected Web services that are responsible for a signiﬁcant frac-
tion of the HTTP trafﬁc, we show that the server location diversity
leads to different service performance results, and that PaDIS can
help realize these. Among the studied Web services are the leading
content providers, including the two most popular CDNs, the most
popular One-Click Hoster (OCH) and the most popular streaming
video provider.
The ten vantage points are deployed within residential locations
with DSL connectivity to the ISP. The downstream bandwidth ranges
from 1 Mbps to 25 Mbps while the upstream ranges from 0.128 Mbps
to 5 Mbps. The measurements started on 1st of May 2010 and
lasted for 14 days. Each client accesses the selected services 24
times during each day. In addition, we perform a DNS query for
the hostname, in order to determine which IP addresses the ser-
vice recommends. This methodology allows us to understand the
possible end-user performance improvements. Moreover, we can
estimate the network distances and thus the network savings. In the
following section we show a selected subset of these measurements
which represent the entire dataset collected.
4.1 Content Delivery Networks
Using the data sets from the residential ISP, see section 2.1, we
identify the two most popular CDNs, referred to as CDN1 and
CDN2. These are responsible for roughly 20 % of all HTTP trafﬁc.
Using the methodology discussed in Section 2, we identify more
than 3,500 unique IP addresses that are caches for CDN1 and more
than 700 unique IP addresses for CDN2. Both of these CDNs have
more than 300 of their cache IP addresses within the ISP. In addi-
tion to CDN services, CDN1 offers an extensive range of service to
content producers, including load-balancing and DNS services. If
a content producer uses these services, it effectively outsources the
After augmenting each identiﬁed CDN IP address with its net-
work path information, see Section 2, we ﬁnd that the cache di-
versity translates not only into cache subnet diversity, but also path
diversity. Thus, PaDIS can in principle be used to take advantage
of both the server and the path diversity. However, at this point, it is
still unclear whether the optimization of the CDN can be improved
by PaDIS in terms of client download time and/or number of hops
traversed within the ISP.
Since recent studies of CDN behavior have shown that any CD-
Nized object is accessible from an arbitrary cache [17, 35], we can
bypass the CDN recommendation. Thus, we request the URL di-
rectly from each of the identiﬁed CDN cache IP addresses regard-
less of their location. We verify this for all caches of CDN1. In
addition, we point out that CDN1 caches also serve content of do-
mains which only use their load balancing or DNS service in the
same manner as if the content was supposed to be delivered by
CDN1.
However, CDN2 is more restrictive. Our measurements show
that CDN2 caches only reply to requests from the same region. In
our case, we observe that European caches do serve the content to
our European clients. However, when these requested content from
North American caches, the delivery was refused.
Since the download performance of Web pages may depend on
the size of the object, we select ten different ﬁles for CDN1 and
seven for CDN2 of different but comparable ﬁle sizes ranging from
36 KB to 17 MB, see Table 3. To be able to repeat the measure-
ments multiple times during a small time period while not over-
whelming the client DSL lines, we subsample the number of caches
of both CDNs. To preserve path diversity, we randomly select one
cache from each of CDN1’s subnets. This reduces the number
of caches to 124 for CDN1. For CDN2 we found ﬁve subnets3
containing caches, yet only two answered our queries with the re-
quested data, as we have already explained. Since we use the raw IP
addresses for accessing the various caches and override the CDN’s
server selection, we also exclude the domain name resolution time
for the CDN recommended download.
Figures 11 and 12 show boxplots of the object retrieval time on
a typical day (May 12th) of our selected caches across time for
CDN1 and CDN2 respectively, for a subset of the objects and one
speciﬁc client. Inspecting the results from the other clients, and for
the other objects, throughout the experiment we see similar results.
3Apparently, CDN2 utilizes well provisioned and well connected
data centers around the world and thus relies on the redundancy
within the data centers and their access to multiple ISPs.
3038K
recommended
PaDIS
00:00
12:00
time
510K
24:00
recommended
PaDIS
00:00
recommended
PaDIS
12:00
time
17MB
24:00
s
n
i
e
m
i
t
l
d
a
o
n
w
o
d
s
n
i
e
m
i
t
l
d
a
o
n
w
o
d
5
.
0
4
.
0
3
.
0
2
.
0
1
.
0
0
.
3
5
.
2
0
.
2
5
.
1
0
.
1
5
.
0
4
1
2
1
0
1
8
s
n
i
e
m
i
t
l
d
a
o
n
w
o
d
6
36K
recommended
PaDIS
00:00
12:00
time
599K
24:00
recommended
PaDIS
00:00
recommended
PaDIS
12:00
time
4.5Mb
24:00
s
n
i
e
m
i
t
l
d
a
o
n
w
o
d
0
3
.
0
5
2
.
0
0
2
.
0
5
1
.
0
s
n
i
e
m
i
t
l
d
a
o
n
w
o
d
0
.
1
8
.
0
6
.
0
4
.
0
s
n
i
e
m
i
t
l
d
a
o
n
w
o
d
0
.
3
5
.
2
0
.
2
00:00
12:00
time
24:00
00:00
12:00
time
24:00
Figure 11: CDN1 performance evaluation: Boxplot of ﬁle
downloads for the caches across time for objects 01, 06, and
10.
Figure 12: CDN2 performance evaluation: Boxplot of ﬁle
downloads for the caches across time for objects 01, 04, and
06.
We use box plots because they are a good exploratory tool allow-
ing the visual inspection of typical value ranges, spread, skewness,
as well as outliers. Each Box analyzes the results of downloading
the selected ﬁle at one point in time from one server in each of
the subnets, e. g., for CDN1 each box consists of 124 data-points.
The Box itself stretches from the 25th to the 75th percentile. The
line within the box corresponds to the 50th percentile (the median).
The whiskers represent the lowest and highest datum still within
1.5 times the interquartile range of the lower and upper quartile
respectively. The dashed lines with triangles corresponds to the ob-
ject download time for the recommended cache by the CDN. The
solid line with squares corresponds to the object download time for
the cache that ranked the highest by PaDIS based on delay.
A ﬁrst observation regarding Figures 11 and 12 is that the down-
load time for the recommended caches by CDN1 and CDN2 are
quite good and close to the median download time over all the
caches examined. Still, there is signiﬁcant space from improvement
especially during peak hours. Overall, PaDIS is able to improve the
download time up to a factor of four.