GrpPfxLen=[GrpPfxLen], GroupMappingRPAddrType=[GroupMappingRPAddrType],
RPAddr=[RPAddr], GroupMappingPimMode=[GroupMappingPimMode],
InvJPAddrType=[InvJPAddrType], InvJPOriginAddr=[InvJPOriginAddr],
InvJPGrpAddr=[InvJPGrpAddr], InvJPRpAddr=[InvJPRpAddr], NbrIfIndex=[NbrIfIndex],
NbrAddrType=[NbrAddrType], NbrAddr=[NbrAddr], NbrUpTime=[NbrUpTime])
PIM收到无效的Join/Prune报文。
Trap 属性
Trap属性 描述
Alarm or Event Event
Trap Severity Warning
Mnemonic Code pimInvalidJoinPrune
Trap OID 1.3.6.1.2.1.157.0.3
Alarm ID 该Trap是事件Trap，不涉及告警ID。
Alarm Type 该Trap是事件Trap，不涉及告警类型。
Raise or Clear 该Trap是事件Trap，不涉及告警产生或恢复。
Match trap 该Trap是事件Trap，不涉及配对Trap。
Trap Buffer 信息参数
参数名称 参数含义
GroupMappingOrigin RP映射组的类型。
GroupMappingAddrType 组地址类型。
GrpAddr Join/Prune报文中的组地址。
GrpPfxLen 组掩码长度。
GroupMappingRPAddrType RP地址的类型。
RPAddr RP地址。
文档版本 06 (2017-09-12) 华为专有和保密信息 703
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 45 PIM
参数名称 参数含义
GroupMappingPimMode 当前运行的PIM模式。
InvJPAddrType 无效的Join/Prune报文的地址类型。
InvJPOriginAddr 无效的Join/Prune报文中的源地址。
InvJPGrpAddr 无效的Join/Prune报文的组地址。
InvJPRpAddr 无效的Join/Prune报文中的RP地址。
NbrIfIndex 邻居接口索引。
NbrAddrType 邻居地址的类型。
NbrAddr 邻居的地址。
NbrUpTime 邻居存活的时间。
VB 信息参数
VB OID VB Name VB Index
1.3.6.1.2.1.157.1.13.1.7 pimGroupMappingPimMod pimGroupMappingOrigin;
e
pimGroupMappingAddress
Type;
pimGroupMappingGrpAddr
ess;
pimGroupMappingGrpPrefi
xLength;
pimGroupMappingRPAddre
ssType;
pimGroupMappingRPAddre
ss;
1.3.6.1.2.1.157.1.39 pimInvalidJoinPruneAddres N/A
sType
1.3.6.1.2.1.157.1.40 pimInvalidJoinPruneOrigin N/A
1.3.6.1.2.1.157.1.41 pimInvalidJoinPruneGroup N/A
1.3.6.1.2.1.157.1.42 pimInvalidJoinPruneRp N/A
1.3.6.1.2.1.157.1.2.1.6 pimNeighborUpTime pimNeighborIfIndex;
pimNeighborAddressType;
pimNeighborAddress;
对系统的影响
收到无效的Join/Prune报文，可能导致组成员信息无法到达RP，从而影响组播业务。
文档版本 06 (2017-09-12) 华为专有和保密信息 704
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 45 PIM
可能原因
原因1：收到Join/Prune报文中携带的RP地址和设备上该组的RP地址不一致。
原因2：收到(*,G)或(S,G,RPT)类型的Join/Prune报文，但是该报文中的组地址在本地设
备的SSM范围内。
处理步骤
l 原因1：收到Join/Prune报文中携带的RP地址和设备上该组的RP地址不一致。
a. 使用命令display pim rp-info检查Join/Prune报文发送端设备和本设备对于该组
的RP配置是否一致。
n 如果是，则请执行步骤2。
n 如果不是，则请修改Join/Prune报文发送端设备和本设备对于该组的RP配
置，使得二者一致。
b. 请收集告警信息、日志信息和配置信息，并联系技术支持人员。
l 原因2：收到(*,G)或(S,G,RPT)类型的Join/Prune报文，但是该报文中的组地址在本
地设备的SSM范围内。
a. 使用命令display current-configuration检查本设备和Join/Prune报文发送端设
备，二者SSM范围是否相同。
n 如果是，则请执行步骤2。
n 如果不是，则请配置相同的SSM范围。
b. 请收集告警信息、日志信息和配置信息，并联系技术支持人员。
----结束
45.4 PIM-STD_1.3.6.1.2.1.157.0.4 pimRPMappingChange
Trap Buffer 信息解释
The RP changes. (GroupMappingOrigin=[GroupMappingOrigin],
GroupMappingAddressType=[GroupMappingAddressType], szGrpAddr=[szGrpAddr],
GrpPfxLen=[GrpPfxLen], GroupMappingRPAddressType=[GroupMappingRPAddressType],
RPAddr=[RPAddr], GroupMappingPimMode=[GroupMappingPimMode],
Precedence=[Precedence])
RP改变。
Trap 属性
Trap属性 描述
Alarm or Event Event
Trap Severity Warning
Mnemonic Code pimRPMappingChange
Trap OID 1.3.6.1.2.1.157.0.4
文档版本 06 (2017-09-12) 华为专有和保密信息 705
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 45 PIM
Trap属性 描述
Alarm ID 该Trap是事件Trap，不涉及告警ID。
Alarm Type 该Trap是事件Trap，不涉及告警类型。
Raise or Clear 该Trap是事件Trap，不涉及告警产生或恢复。
Match trap 该Trap是事件Trap，不涉及配对Trap。
Trap Buffer 信息参数
参数名称 参数含义
GroupMappingOrigin RP映射组的类型。
GroupMappingAddressType 组地址类型。
szGrpAddr 组地址。
GrpPfxLen 组地址掩码长度。
GroupMappingRPAddressType RP地址类型。
RPAddr 新RP的地址。
GroupMappingPimMode 当前运行的PIM模式。
Precedence 不同RP类型的对应优先级。
VB 信息参数
VB OID VB Name VB Index
1.3.6.1.2.1.157.1.13.1.7 pimGroupMappingPimMod pimGroupMappingOrigin;
e
pimGroupMappingAddress
Type;
pimGroupMappingGrpAddr
ess;
pimGroupMappingGrpPrefi
xLength;
pimGroupMappingRPAddre
ssType;
pimGroupMappingRPAddre
ss;
文档版本 06 (2017-09-12) 华为专有和保密信息 706
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 45 PIM
VB OID VB Name VB Index
1.3.6.1.2.1.157.1.13.1.8 pimGroupMappingPreceden pimGroupMappingOrigin;
ce
pimGroupMappingAddress
Type;
pimGroupMappingGrpAddr
ess;
pimGroupMappingGrpPrefi
xLength;
pimGroupMappingRPAddre
ssType;
pimGroupMappingRPAddre
ss;
对系统的影响
RP改变，可能导致源和组成员的信息交流中断，从而影响组播业务。
可能原因
原因1：网络中重新配置了静态RP，且配置静态RP的命令中携带preferred关键字，优
先选择静态RP。
原因2：网络中出现了优先级较高的C-RP。
处理步骤
l 原因1：网络中重新配置了静态RP，且配置静态RP的命令中携带preferred关键
字，优先选择静态RP。
a. 检查是否是由于用户操作导致RP信息变化。
n 如果是，则请执行步骤5。
n 如果不是，则请执行步骤2。
b. 请在网络中各的PIM视图下执行static-rp rp-address preferred命令配置静态RP
为原来的RP，优先选择静态RP。请执行步骤3。
c. 执行display pim rp-info group-address命令检查RP信息是否符合要求。
n 如果是，则请执行步骤5。
n 如果不是，则请执行步骤4。
d. 请收集告警信息、日志信息和配置信息，并联系技术支持人员。
e. 结束。
l 原因2：网络中出现了优先级较高的C-RP。
a. 检查是否是由于用户操作导致RP信息变化。
n 如果是，则请执行步骤5。
n 如果不是，则请执行步骤2。
b. 请在网络中希望成为RP的PIM视图下执行c-rp priority priority或c-rp interface-
type interface-number priority priority命令，减小优先级数值，即提高该C-RP
的优先级。请执行步骤3。
文档版本 06 (2017-09-12) 华为专有和保密信息 707
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 45 PIM
c. 执行display pim rp-info group-address命令检查RP信息是否符合要求。
n 如果是，则请执行步骤5。
n 如果不是，则请执行步骤4。
d. 请收集告警信息、日志信息和配置信息，并联系技术支持人员。
e. 结束。
----结束
45.5 PIM-STD_1.3.6.1.2.1.157.0.5 pimInterfaceElection
Trap Buffer 信息解释
The interface was elected as a DR. (IfIndex=[IfIndex], IfIPverion=[IfIPverion],
IfAddrType=[IfAddrType], Addr=[Addr])
接口当选DR。
Trap 属性
Trap属性 描述
Alarm or Event Event
Trap Severity Warning
Mnemonic Code pimInterfaceElection
Trap OID 1.3.6.1.2.1.157.0.5
Alarm ID 该Trap是事件Trap，不涉及告警ID。
Alarm Type 该Trap是事件Trap，不涉及告警类型。
Raise or Clear 该Trap是事件Trap，不涉及告警产生或恢复。
Match trap 该Trap是事件Trap，不涉及配对Trap。
Trap Buffer 信息参数
参数名称 参数含义
IfIndex 接口索引。
IfIPverion 接口的IP版本号。
IfAddrType 接口地址类型。
Addr 接口地址。
文档版本 06 (2017-09-12) 华为专有和保密信息 708
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 45 PIM
VB 信息参数
VB OID VB Name VB Index
1.3.6.1.2.1.157.1.1.1.3 pimInterfaceAddressType pimInterfaceIfIndex;
pimInterfaceIPVersion;
1.3.6.1.2.1.157.1.1.1.4 pimInterfaceAddress pimInterfaceIfIndex;
pimInterfaceIPVersion;
对系统的影响
源端DR变化，可能导致RP收到错误的Register消息；组成员端DR变化，可能导致RP收
到错误的Join消息，从而影响组播业务。
可能原因
原因1：PIM接口收到新的Hello报文，且此接口的DR优先级或IP地址大于共享网段上其
他接口。
原因2：PIM接口变为Up状态后，在第一个Hello报文周期的时间后，未收到其他接口的
Hello报文。
处理步骤
步骤1 检查是否希望该接口当选DR。
l 如果是，则请执行步骤8。
l 如果不是，则请执行步骤2。
步骤2 执行display pim interface interface-type interface-number命令查看DR地址是否是该接口
的IP地址。如果该接口是当前DR，则在显示信息的接口地址后有local标志。
l 如果是，则请执行步骤3。
l 如果不是，则请执行步骤8。
步骤3 执行display pim interface interface-type interface-number命令查看共享网段上的接口是
否都支持Hello报文中携带DR优先级参数。
l 如果是，则请执行步骤4。
l 如果不是，则请执行步骤5。
步骤4 执行display pim neighbor neighbor-address命令检查各PIM邻居接口的DR优先级是否都
小于该接口。
l 如果是，则请在接口视图下执行pim hello-option dr-priority priority命令将该接口
的DR优先级降低。请执行步骤6。
l 如果不是，则请执行ip address ip-address { mask | mask-length }命令为该接口配置
较小的IP地址。请执行步骤6。
步骤5 执行ip address ip-address { mask | mask-length }命令为该接口配置较小的IP地址。请执
行步骤6。
步骤6 执行display pim interface interface-type interface-number命令查看DR是否已改变。
文档版本 06 (2017-09-12) 华为专有和保密信息 709
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 45 PIM
l 如果是，则请执行步骤8。
l 如果不是，则请执行步骤7。
步骤7 请收集该设备的配置信息、告警信息和日志信息，并联系技术支持人员。
步骤8 结束。
----结束
45.6 PIM_1.3.6.1.4.1.2011.5.25.149.4.0.1
hwPimNeighborLoss
Trap Buffer 信息解释
PIM neighbor loss. (NbrIntIndex=[NbrIntIndex], NbrAddrType=[NbrAddrType],
NbrAddr=[NbrAddr], NbrUpTime=[NbrUpTime], NbrIntName=[NbrIntName],
InstanceID=[InstanceID], InstanceName=[InstanceName],
NeighborLossReason=[NeighborLossReason])
设备收到邻居的Hello报文后会记录邻居的信息，并为邻居启动一个定时器。如果在定
时器超时之前再没有收到该邻居的Hello报文，造成PIM邻居丢失，则上报Trap信息。
Trap 属性
Trap属性 描述
Alarm or Event Alarm
Trap Severity Critical
Mnemonic Code neighbor-loss
Trap OID 1.3.6.1.4.1.2011.5.25.149.4.0.1
Alarm ID 0x08850001
Alarm Type communicationsAlarm