生成集群，一共144 segments  
3、参数   
```
postgres=# select source,category,name,setting,unit from pg_settings where source<>'default' or name ~ '^gp_' or name ~ '^vitesse' order by source,category,name;
        source        |                       category                       |                    name                     |                                     setting                                      | unit 
----------------------+------------------------------------------------------+---------------------------------------------+----------------------------------------------------------------------------------+------
 client               | Reporting and Logging / What to Log                  | application_name                            | psql                                                                             | 
 command line         | Client Connection Defaults / Locale and Formatting   | TimeZone                                    | PRC                                                                              | 
 command line         | Client Connection Defaults / Locale and Formatting   | timezone_abbreviations                      | Default                                                                          | 
 command line         | Connections and Authentication / Connection Settings | listen_addresses                            | *                                                                                | 
 command line         | Connections and Authentication / Connection Settings | port                                        | 15432                                                                            | 
 command line         | Preset Options                                       | gp_contentid                                | -1                                                                               | 
 command line         | Preset Options                                       | gp_dbid                                     | 1                                                                                | 
 command line         | Preset Options                                       | gp_num_contents_in_cluster                  | 144                                                                              | 
 command line         | Preset Options                                       | gp_standby_dbid                             | 0                                                                                | 
 command line         | Reporting and Logging / What to Log                  | log_timezone                                | PRC                                                                              | 
 configuration file   | Append-Only Tables                                   | max_appendonly_tables                       | 10000                                                                            | 
 configuration file   | Client Connection Defaults / Locale and Formatting   | DateStyle                                   | ISO, MDY                                                                         | 
 configuration file   | Client Connection Defaults / Locale and Formatting   | default_text_search_config                  | pg_catalog.english                                                               | 
 configuration file   | Client Connection Defaults / Locale and Formatting   | lc_messages                                 | en_US.utf8                                                                       | 
 configuration file   | Client Connection Defaults / Locale and Formatting   | lc_monetary                                 | en_US.utf8                                                                       | 
 configuration file   | Client Connection Defaults / Locale and Formatting   | lc_numeric                                  | en_US.utf8                                                                       | 
 configuration file   | Client Connection Defaults / Locale and Formatting   | lc_time                                     | en_US.utf8                                                                       | 
 configuration file   | Connections and Authentication / Connection Settings | max_connections                             | 25                                                                               | 
 configuration file   | Developer Options                                    | gp_autostats_mode                           | ON_NO_STATS                                                                      | 
 configuration file   | Developer Options                                    | gp_autostats_on_change_threshold            | 2147483647                                                                       | 
 configuration file   | Developer Options                                    | gp_backup_directIO                          | off                                                                              | 
 configuration file   | Developer Options                                    | gp_backup_directIO_read_chunk_mb            | 20                                                                               | 
 configuration file   | Greenplum Database / Array Tuning                    | gp_connections_per_thread                   | 0                                                                                | 
 configuration file   | Greenplum Database / Array Tuning                    | gp_interconnect_type                        | UDPIFC                                                                           | 
 configuration file   | Greenplum Database / Array Tuning                    | gp_segment_connect_timeout                  | 600                                                                              | s
 configuration file   | Greenplum Database / Array Tuning                    | gp_xliw_agent_enable                        | off                                                                              | 
 configuration file   | Greenplum Database / Array Tuning                    | gp_xliw_log_level                           | 8                                                                                | 
 configuration file   | Greenplum Database / Array Tuning                    | gp_xliw_unix_path                           | /tmp/xliwagent.socket                                                            | 
 configuration file   | Greenplum Database / Array Tuning                    | gp_xliw_worker_num                          | 2                                                                                | 
 configuration file   | Reporting and Logging / What to Log                  | log_autostats                               | off                                                                              | 
 configuration file   | Reporting and Logging / What to Log                  | log_statement                               | all                                                                              | 
 configuration file   | Resource Usage                                       | max_prepared_transactions                   | 250                                                                              | 
 configuration file   | Resource Usage / Free Space Map                      | max_fsm_pages                               | 200000                                                                           | 
 configuration file   | Resource Usage / Memory                              | gp_vmem_protect_limit                       | 8192                                                                             | 
 configuration file   | Resource Usage / Memory                              | shared_buffers                              | 4000                                                                             | 32kB
 configuration file   | Resource Usage / Resources Management                | gp_resqueue_memory_policy                   | eager_free                                                                       | 
 configuration file   | Statistics / ANALYZE Database Contents               | optimizer_analyze_root_partition            | on                                                                               | 
 default              | Append-Only Tables                                   | gp_appendonly_compaction_threshold          | 10                                                                               | 
 default              | Append-Only Tables                                   | gp_default_storage_options                  | appendonly=false,blocksize=32768,compresstype=none,checksum=true,orientation=row | 
 default              | Client Connection Defaults / Other Defaults          | gp_command_count                            | 26                                                                               | 
 default              | Client Connection Defaults / Other Defaults          | gp_connection_send_timeout                  | 3600                                                                             | 
 default              | Client Connection Defaults / Other Defaults          | gp_role                                     | dispatch                                                                         | 
 default              | Client Connection Defaults / Other Defaults          | gp_session_id                               | 505                                                                              | 
 default              | Client Connection Defaults / Other Defaults          | gp_vmem_idle_resource_timeout               | 18000                                                                            | ms
 default              | Customized Options                                   | gp_hadoop_home                              |                                                                                  | 
 default              | Customized Options                                   | gp_hadoop_target_version                    | hadoop                                                                           | 
 default              | Customized Options                                   | vitesse.copy_dump                           |                                                                                  | 
 default              | Customized Options                                   | vitesse_cpuname                             |                                                                                  | 
 default              | Customized Options                                   | vitesse.dbgbreak_mask                       | 0                                                                                | 
 default              | Customized Options                                   | vitesse.enable                              | on                                                                               | 
 default              | Customized Options                                   | vitesse_explain_verbosity                   | 0                                                                                | 
 default              | Customized Options                                   | vitesse.explain_verbosity                   | 0                                                                                | 
 default              | Customized Options                                   | vitesse.exttab_jit                          | on                                                                               | 
 default              | Customized Options                                   | vitesse_jit_time                            | 0                                                                                | 
 default              | Customized Options                                   | vitesse.jit_time                            | 0                                                                                | 
 default              | Customized Options                                   | vitesse_log_level                           | 0                                                                                | 
 default              | Customized Options                                   | vitesse.log_level                           | 0                                                                                | 
 default              | Customized Options                                   | vitesse.motion_opt                          | off                                                                              | 
 default              | Customized Options                                   | vitesse.partsel_opt                         | off                                                                              | 
 default              | Customized Options                                   | vitesse_phi_home                            |                                                                                  | 
 default              | Customized Options                                   | vitesse_plan_cost                           | 72                                                                               | 
 default              | Customized Options                                   | vitesse.plan_cost                           | 72                                                                               | 
 default              | Customized Options                                   | vitesse.print_tree                          | off                                                                              | 
 default              | Customized Options                                   | vitesse_rev                                 | 7615c3b                                                                          | 
 default              | Customized Options                                   | vitesse.rev                                 | 7615c3b                                                                          | 
 default              | Customized Options                                   | vitesse.seqscan_using_pg_pool               | off                                                                              | 
 default              | Customized Options                                   | vitesse.spill_max                           | 0                                                                                | 
 default              | Customized Options                                   | vitesse.stack_trace                         | 0                                                                                | 
 default              | Customized Options                                   | vitesse.support_dump                        |                                                                                  | 
 default              | Customized Options                                   | vitesse.threshold                           | 100                                                                              | 
 default              | Customized Options                                   | vitesse.use_modified_utf8                   | off                                                                              | 
 default              | Customized Options                                   | vitesse_version                             | Deepgreen DB 18.08 [rev 7615c3b on 2018-08-25]                                   | 
 default              | Customized Options                                   | vitesse.version                             | Deepgreen DB 18.08 [rev 7615c3b on 2018-08-25]                                   | 
 default              | Customized Options                                   | vitesse_xdrive_port                         | 6868                                                                             | 
 default              | Customized Options                                   | vitesse.xdrive_port                         | 6868                                                                             | 
 default              | Customized Options                                   | vitesse.xliw                                | 0                                                                                | 
 default              | Developer Options                                    | gp_autostats_mode_in_functions              | NONE                                                                             | 
 default              | Developer Options                                    | gp_debug_linger                             | 0                                                                                | s
 default              | Developer Options                                    | gp_reraise_signal                           | on                                                                               | 
 default              | Developer Options                                    | gp_workfile_compress_algorithm              | none                                                                             | 
 default              | Developer Options                                    | vitesse_dbgbreak_mask                       | 0                                                                                | 
 default              | Developer Options                                    | vitesse_stack_trace                         | 0                                                                                | 
 default              | Developer Options                                    | vitesse_use_modified_utf8                   | off                                                                              | 
 default              | External Tables                                      | gp_external_enable_exec                     | on                                                                               | 
 default              | External Tables                                      | gp_external_enable_filter_pushdown          | off                                                                              | 
 default              | External Tables                                      | gp_external_max_segs                        | 64                                                                               | 
 default              | External Tables                                      | gp_initial_bad_row_limit                    | 1000                                                                             | 
 default              | External Tables                                      | gp_max_csv_line_length                      | 1048576                                                                          | 
 default              | GPDB Error Handling                                  | gp_reject_percent_threshold                 | 300                                                                              | 
 default              | Greenplum Database / Array Tuning                    | gp_cached_segworkers_threshold              | 5                                                                                | 
 default              | Greenplum Database / Array Tuning                    | gp_filerep_ct_batch_size                    | 65536                                                                            | 
 default              | Greenplum Database / Array Tuning                    | gp_filerep_tcp_keepalives_count             | 2                                                                                | 
 default              | Greenplum Database / Array Tuning                    | gp_filerep_tcp_keepalives_idle              | 60                                                                               | s
 default              | Greenplum Database / Array Tuning                    | gp_filerep_tcp_keepalives_interval          | 30                                                                               | s
 default              | Greenplum Database / Array Tuning                    | gp_fts_probe_interval                       | 60                                                                               | s
 default              | Greenplum Database / Array Tuning                    | gp_fts_probe_threadcount                    | 16                                                                               | 
 default              | Greenplum Database / Array Tuning                    | gp_fts_probe_timeout                        | 20                                                                               | s
 default              | Greenplum Database / Array Tuning                    | gp_hashjoin_tuples_per_bucket               | 5                                                                                | 
 default              | Greenplum Database / Array Tuning                    | gp_interconnect_cache_future_packets        | on                                                                               | 
 default              | Greenplum Database / Array Tuning                    | gp_interconnect_debug_retry_interval        | 10                                                                               | 
 default              | Greenplum Database / Array Tuning                    | gp_interconnect_deepmesh_path               | /tmp/dmagent.socket                                                              | 
 default              | Greenplum Database / Array Tuning                    | gp_interconnect_default_rtt                 | 20                                                                               | ms
 default              | Greenplum Database / Array Tuning                    | gp_interconnect_fc_method                   | LOSS                                                                             | 
 default              | Greenplum Database / Array Tuning                    | gp_interconnect_hash_multiplier             | 2                                                                                | 
 default              | Greenplum Database / Array Tuning                    | gp_interconnect_min_retries_before_timeout  | 100                                                                              | 
 default              | Greenplum Database / Array Tuning                    | gp_interconnect_min_rto                     | 20                                                                               | ms
 default              | Greenplum Database / Array Tuning                    | gp_interconnect_queue_depth                 | 4                                                                                | 
 default              | Greenplum Database / Array Tuning                    | gp_interconnect_setup_timeout               | 7200                                                                             | s
 default              | Greenplum Database / Array Tuning                    | gp_interconnect_snd_queue_depth             | 2                                                                                | 
 default              | Greenplum Database / Array Tuning                    | gp_interconnect_tcp_listener_backlog        | 128                                                                              | 
 default              | Greenplum Database / Array Tuning                    | gp_interconnect_timer_checking_period       | 20                                                                               | ms
 default              | Greenplum Database / Array Tuning                    | gp_interconnect_timer_period                | 5                                                                                | ms
 default              | Greenplum Database / Array Tuning                    | gp_interconnect_transmit_timeout            | 3600                                                                             | s
 default              | Greenplum Database / Array Tuning                    | gp_max_packet_size                          | 8192                                                                             | 
 default              | Greenplum Database / Array Tuning                    | gp_udp_bufsize_k                            | 0                                                                                | 
 default              | Greenplum Database / Worker Process Identity         | gp_master_addr                              | 127.0.0.1                                                                        | 
 default              | Preset Options                                       | gp_max_partition_level                      | 0                                                                                | 
 default              | Preset Options                                       | gp_max_slices                               | 0                                                                                | 
 default              | Preset Options                                       | gp_server_version                           | 5.10.2+7615c3b build ga                                                          | 
 default              | Preset Options                                       | gp_server_version_num                       | 51002                                                                            | 
 default              | Query Tuning                                         | vitesse_threshold                           | 100                                                                              | 
 default              | Query Tuning / Other Planner Options                 | gp_enable_fast_sri                          | on                                                                               | 
 default              | Query Tuning / Other Planner Options                 | gp_enable_predicate_propagation             | on                                                                               | 
 default              | Query Tuning / Other Planner Options                 | gp_workfile_checksumming                    | on                                                                               | 
 default              | Query Tuning / Other Planner Options                 | vitesse_enable                              | on                                                                               | 
 default              | Query Tuning / Planner Cost Constants                | gp_motion_cost_per_row                      | 0                                                                                | 
 default              | Query Tuning / Planner Cost Constants                | gp_segments_for_planner                     | 0                                                                                | 
 default              | Query Tuning / Planner Method Configuration          | gp_adjust_selectivity_for_outerjoins        | on                                                                               | 
 default              | Query Tuning / Planner Method Configuration          | gp_dynamic_partition_pruning                | on                                                                               | 
 default              | Query Tuning / Planner Method Configuration          | gp_enable_agg_distinct                      | on                                                                               | 
 default              | Query Tuning / Planner Method Configuration          | gp_enable_agg_distinct_pruning              | on                                                                               | 
 default              | Query Tuning / Planner Method Configuration          | gp_enable_direct_dispatch                   | on                                                                               | 
 default              | Query Tuning / Planner Method Configuration          | gp_enable_fallback_plan                     | on                                                                               | 
 default              | Query Tuning / Planner Method Configuration          | gp_enable_groupext_distinct_gather          | on                                                                               | 
 default              | Query Tuning / Planner Method Configuration          | gp_enable_groupext_distinct_pruning         | on                                                                               | 
 default              | Query Tuning / Planner Method Configuration          | gp_enable_multiphase_agg                    | on                                                                               | 
 default              | Query Tuning / Planner Method Configuration          | gp_enable_preunique                         | on                                                                               | 
 default              | Query Tuning / Planner Method Configuration          | gp_enable_relsize_collection                | off                                                                              | 
 default              | Query Tuning / Planner Method Configuration          | gp_enable_sequential_window_plans           | on                                                                               | 
 default              | Query Tuning / Planner Method Configuration          | gp_enable_sort_distinct                     | on                                                                               | 
 default              | Query Tuning / Planner Method Configuration          | gp_enable_sort_limit                        | on                                                                               | 
 default              | Query Tuning / Planner Method Configuration          | gp_idf_deduplicate                          | auto                                                                             | 
 default              | Query Tuning / Planner Method Configuration          | gp_statistics_pullup_from_child_partition   | on                                                                               | 
 default              | Query Tuning / Planner Method Configuration          | gp_statistics_use_fkeys                     | on                                                                               | 
 default              | Reporting and Logging                                | gp_email_connect_avoid_duration             | 7200                                                                             | 
 default              | Reporting and Logging                                | gp_email_connect_failures                   | 5                                                                                | 
 default              | Reporting and Logging                                | gp_email_connect_timeout                    | 15                                                                               | 
 default              | Reporting and Logging                                | gp_email_from                               |                                                                                  | 
 default              | Reporting and Logging                                | gp_email_smtp_password                      |                                                                                  | 
 default              | Reporting and Logging                                | gp_email_smtp_server                        | localhost:25                                                                     | 
 default              | Reporting and Logging                                | gp_email_smtp_userid                        |                                                                                  | 
 default              | Reporting and Logging                                | gp_email_to                                 |                                                                                  | 
 default              | Reporting and Logging                                | gp_snmp_community                           | public                                                                           | 
 default              | Reporting and Logging                                | gp_snmp_monitor_address                     |                                                                                  | 
 default              | Reporting and Logging                                | gp_snmp_use_inform_or_trap                  | trap                                                                             | 
 default              | Reporting and Logging / What to Log                  | gp_gpperfmon_send_interval                  | 1                                                                                | 
 default              | Reporting and Logging / Where to Log                 | gp_log_format                               | csv                                                                              | 
 default              | Resource Usage                                       | gp_resource_group_bypass                    | off                                                                              | 
 default              | Resource Usage                                       | gp_resource_group_cpu_limit                 | 0.9                                                                              | 
 default              | Resource Usage                                       | gp_resource_group_cpu_priority              | 10                                                                               | 
 default              | Resource Usage                                       | gp_resource_group_memory_limit              | 0.7                                                                              | 
 default              | Resource Usage                                       | gp_resource_manager                         | queue                                                                            | 
 default              | Resource Usage                                       | gp_safefswritesize                          | 0                                                                                | 
 default              | Resource Usage                                       | gp_subtrans_warn_limit                      | 16777216                                                                         | 
 default              | Resource Usage                                       | gp_workfile_limit_files_per_query           | 100000                                                                           | 
 default              | Resource Usage                                       | gp_workfile_limit_per_query                 | 0                                                                                | 
 default              | Resource Usage                                       | gp_workfile_limit_per_segment               | 0                                                                                | 
 default              | Resource Usage / Kernel Resources                    | gp_set_proc_affinity                        | off                                                                              | 
 default              | Resource Usage / Memory                              | gp_max_databases                            | 16                                                                               | 
 default              | Resource Usage / Memory                              | gp_max_filespaces                           | 8                                                                                | 
 default              | Resource Usage / Memory                              | gp_max_local_distributed_cache              | 1024                                                                             | 
 default              | Resource Usage / Memory                              | gp_max_plan_size                            | 0                                                                                | kB
 default              | Resource Usage / Memory                              | gp_max_tablespaces                          | 16                                                                               | 
 default              | Resource Usage / Memory                              | gp_vmem_protect_segworker_cache_limit       | 500                                                                              | 
 default              | Resource Usage / Resources Management                | gp_resgroup_memory_policy                   | eager_free                                                                       | 
 default              | Resource Usage / Resources Management                | gp_resqueue_priority                        | off                                                                              | 
 default              | Resource Usage / Resources Management                | gp_resqueue_priority_cpucores_per_segment   | 4                                                                                | 
 default              | Resource Usage / Resources Management                | gp_resqueue_priority_sweeper_interval       | 1000                                                                             | 
 default              | Resource Usage / Resources Management                | vitesse_index_mem                           | 0                                                                                | 
 default              | Resource Usage / Resources Management                | vitesse_spill_max                           | 0                                                                                | 
 default              | Resource Usage / Resources Management                | vitesse_spillz                              | 1                                                                                | 
 default              | Statistics / ANALYZE Database Contents               | gp_analyze_relative_error                   | 0.25                                                                             | 
 default              | Ungrouped                                            | gp_enable_gpperfmon                         | off                                                                              | 
 default              | Ungrouped                                            | gp_enable_query_metrics                     | off                                                                              | 
 default              | Ungrouped                                            | gp_instrument_shmem_size                    | 5120                                                                             | kB
 default              | Version and Platform Compatibility                   | gp_create_table_random_default_distribution | off                                                                              | 
 default              | Version and Platform Compatibility                   | gp_enable_exchange_default_partition        | off                                                                              | 
 environment variable | Resource Usage / Memory                              | max_stack_depth                             | 2048                                                                             | kB
 override             | Client Connection Defaults / Locale and Formatting   | lc_collate                                  | en_US.utf8                                                                       | 
 override             | Client Connection Defaults / Locale and Formatting   | lc_ctype                                    | en_US.utf8                                                                       | 
 override             | Client Connection Defaults / Locale and Formatting   | server_encoding                             | UTF8                                                                             | 
 override             | Client Connection Defaults / Statement Behavior      | transaction_isolation                       | read committed                                                                   | 
 override             | Client Connection Defaults / Statement Behavior      | transaction_read_only                       | off                                                                              | 
 override             | Preset Options                                       | data_checksums                              | on                                                                               | 
(194 rows)
```
## 6 sf=200 tpc-h 测试  
1、使用gp_tpch测试，200G数据集。TPC-H    
```  
# su - postgres  
$ git clone https://github.com/digoal/gp_tpch  
$ cd gp_tpch  
$ make  
$ ln -s `pwd` /tmp/dss-data  
$ ./dbgen -s 200  
$ for i in `ls *.tbl`; do sed 's/|$//' $i > ${i/tbl/csv}; echo $i; done;  
$ SF=200  
$ mkdir dss/queries  
$ for q in `seq 1 22`  
do  
    DSS_QUERY=dss/templates ./qgen -s $SF $q > dss/queries/$q.sql  
    sed 's/^select/explain select/' dss/queries/$q.sql > dss/queries/$q.explain.sql  