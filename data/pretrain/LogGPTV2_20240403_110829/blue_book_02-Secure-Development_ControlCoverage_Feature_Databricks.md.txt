## IMPORTANT: DevOps Kit (AzSK) is being sunset by the end of FY21. For more details, see [here](../../../ReleaseNotes/AzSKSunsetNotice.md).

---

### Databricks Security Controls

| Description & Rationale | Control Severity | Automated | Recommendations |
|-------------------------|------------------|-----------|-----------------|
| **Secrets and keys must not be in plain text in notebooks and jobs**<br>Storing sensitive information such as connection strings, passwords, and keys in clear text can lead to easy compromise. Storing them in a secret scope ensures that they are protected at rest. | Medium | Yes | Use Azure Key Vault-backed secret scopes to hold secrets. |
| **Use Azure Key Vault-backed secret scope to hold secrets**<br>Using Key Vault-backed secret scopes leads to improved protection and segregation of stored secrets. | Medium | Yes | Ensure each secret scope uses an independent key vault. |
| **Each secret scope should use an independent key vault**<br>Using a separate key vault for each secret scope leads to better segregation of access to secrets via scope-level ACLs. If the same key vault is used for two different scopes, any person with access to either will be able to see keys and secrets in both. | Medium | Yes | - |
| **Personal access tokens (PAT) must have the shortest possible validity period**<br>If a PAT gets compromised, the Databricks assets accessible to the user can be accessed or manipulated by unauthorized users. Minimizing the validity period of the PAT ensures that the window of time available to an attacker in the event of compromise is small. | High | Yes | - |
| **All users/identities must be granted minimum required permissions using Role-Based Access Control (RBAC)**<br>Granting minimum access by leveraging RBAC ensures that users are granted just enough permissions to perform their tasks. This minimizes exposure of the resources in case of user account compromise. | Medium | Yes | - |
| **Minimize the number of workspace admins**<br>Databricks workspace admins have full access to the workspace to perform any operation. Each additional person in the admin role increases the attack surface for the workspace. The number of members in these roles should be kept as low as possible. | Medium | Yes | - |
| **All users must be granted minimum required permissions on clusters**<br>Granting minimum access by leveraging RBAC ensures that users are granted just enough permissions to perform their tasks. This minimizes exposure of the resources in case of user account compromise. | Medium | No | - |
| **Workspace access control should be enabled**<br>Enabling workspace access control allows an admin to manage fine-grained user permissions, ensuring that users can perform only intended operations. This minimizes exposure of data in case of user account compromise. | Medium | Yes | - |
| **Cluster access control should be enabled**<br>Enabling cluster access control allows an admin to provide restricted access to users over clusters, so that users can perform only intended operations. This minimizes exposure of data in case of user or service account compromise. | Medium | Yes | - |
| **Job access control should be enabled**<br>Enabling job access control ensures that users are granted just enough permissions to perform their tasks. This minimizes exposure of data in case of user or service account compromise. | Medium | Yes | - |
| **Do not mount any data sources that may not be required for all users in the workspace**<br>Mounting a data source gives all users within the workspace access to the data from the mount point. Mounting sources with sensitive data onto DBFS can lead to unauthorized access. | Medium | No | - |
| **Guest accounts within the AAD tenant should not be granted admin access**<br>Databricks workspace admins have full access to the workspace to perform any operation. Each guest account in an admin role increases the attack surface for the workspace. Adding guest accounts as admins on the workspace should be avoided. | Medium | Yes | - |
| **Use of any virtual network peerings should be justified**<br>Resources in the peered virtual networks can communicate with each other directly. If the two peered networks are on different sides of a security boundary (e.g., corpnet v. private vNet), this can lead to exposure of corporate data. Hence, any vNet peerings should be closely scrutinized and approved by the network security team. | High | Yes | - |

This table provides a structured overview of the security controls and their rationale, severity, automation status, and recommendations for Databricks environments.