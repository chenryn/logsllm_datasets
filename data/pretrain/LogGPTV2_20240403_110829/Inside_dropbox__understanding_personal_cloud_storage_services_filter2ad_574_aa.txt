# Title: Inside Dropbox: Understanding Personal Cloud Storage Services

## Authors:
- Idilio Drago, University of Twente
- Marco Mellia, Politecnico di Torino
- Maurizio M. Munafò, Politecnico di Torino
- Anna Sperotto, University of Twente
- Ramin Sadre, University of Twente
- Aiko Pras, University of Twente

### Abstract
Personal cloud storage services are becoming increasingly popular. With numerous providers entering the market and offering affordable storage, it is expected that these services will soon generate a significant amount of internet traffic. However, little is known about the architecture, performance, and workload of such systems. This understanding is crucial for designing efficient cloud storage systems and predicting their impact on the network.

This paper presents a detailed analysis of Dropbox, the leading personal cloud storage solution in our datasets. Using passive measurements from four vantage points in Europe over 42 consecutive days, we make three key contributions:
1. We are the first to study Dropbox, which accounts for approximately one-third of the YouTube traffic in campus networks on some days.
2. We characterize the workload generated by users in different environments and its impact on network traffic.
3. Our results highlight potential performance bottlenecks caused by the current system architecture and storage protocol, particularly for users far from data centers.

All measurements used in our analyses are publicly available in anonymized form at the SimpleWeb trace repository: http://traces.simpleweb.org/dropbox/

### Categories and Subject Descriptors
- C.2 [Computer-Communication Networks]: Miscellaneous
- C.4 [Performance of Systems]: Measurement Techniques

### General Terms
- Measurement, Performance

### Permission
Permission to make digital or hard copies of all or part of this work for personal or classroom use is granted without fee provided that copies are not made or distributed for profit or commercial advantage and that copies bear this notice and the full citation on the first page. To copy otherwise, or republish, to post on servers or to redistribute to lists, requires prior specific permission and/or a fee.

### IMC’12
November 14–16, 2012, Boston, Massachusetts, USA.
Copyright 2012 ACM 978-1-4503-1705-4/12/11...$15.00.

### Keywords
- Dropbox, Cloud Storage, Internet Measurement

## 1. Introduction
In recent years, cloud-based services have gained popularity, offering computing and storage capacity on remote data centers while abstracting away the complexity of hardware management. Major players like Microsoft, Google, and Amazon have entered the market, competing with established solutions like Box.com, UbuntuOne, and Dropbox. As of 2012, Dropbox had over 50 million users, uploading more than 500 million files daily.

Despite the growing interest, little is known about the architecture and performance of these systems. Some studies focus on system design and security, but there is limited information on the actual usage and impact of these services. In this paper, we provide a comprehensive analysis of cloud-based storage systems, focusing on Dropbox. We collected and analyzed traffic from two university campuses and two Points of Presence (POPs) in a large Internet Service Provider (ISP) over 42 consecutive days.

Our main findings include:
- Significant traffic related to personal cloud storage, especially in campus networks.
- Performance is heavily influenced by the distance between clients and data centers.
- User behavior significantly affects network requirements, with distinct patterns observed among different user groups.
- Sharing features are widely used, with many users linking multiple devices and sharing folders.

These insights are valuable for researchers, ISPs, and service providers to understand and anticipate the impact of widespread adoption of cloud storage solutions.

## 2. Dropbox Overview

### 2.1 The Dropbox Client
The Dropbox client is primarily implemented in Python, using third-party libraries like librsync. It is available for Windows, macOS, and Linux. The basic unit of data is a chunk up to 4MB in size. Larger files are split into chunks, each identified by a SHA256 hash value. Dropbox uses delta encoding and local metadata storage to reduce data transfer and improve efficiency. Users can also control upload and download speeds.

### 2.2 Understanding Dropbox Internals
To analyze Dropbox usage, we conducted active experiments to observe the protocol. Since most communications are encrypted with TLS, we set up a testbed with a Squid proxy server to decrypt and observe the traffic. This allowed us to understand the client's communication with the control and storage servers.

### 2.3 Client Control Flows
The Dropbox client exchanges control information with servers managed by Dropbox Inc. and Amazon. We identified three types of control servers: notification, metadata administration, and system-log servers. Notification connections are not encrypted and use delayed HTTP responses for push notifications. Metadata and system-log servers handle synchronization and logging, respectively.

### 2.3.1 Notiﬁcation Protocol
The client maintains a continuous TCP connection to a notification server, receiving updates every 60 seconds. Changes are advertised immediately when they occur.

### 2.3.2 Meta-data Information Protocol
Synchronization transactions start with messages to metadata servers, followed by store or retrieve operations through Amazon servers. Successful chunk transfers are acknowledged, and the client sends final messages to conclude transactions.

## 3. Data Collection and Comparison
We collected traffic data from two university campuses and two POPs in an ISP over 42 days. We compared the popularity of different cloud storage systems and found Dropbox to be the most widely used, generating significant traffic.

## 4. Dropbox Performance Characterization
We analyzed the performance of Dropbox, highlighting potential bottlenecks. Performance is significantly affected by the distance between clients and data centers. Short data transfer sizes and per-chunk acknowledgments can impair throughput, which averages around 530 kbits/s. Possible improvements include bundling schemes, delayed acknowledgments, and better placement of storage servers.

## 5. User Habits and Workload
We characterized user habits and the generated workload. Four distinct groups of home users were identified: those who only upload, those who only download, those who do both, and those who rarely exchange files. Sharing features are popular, with many users linking multiple devices and sharing folders.

## 6. Web Interface Usage
While the primary focus is on the Dropbox client, we also discuss the less popular web interface and its usage patterns.

## 7. Conclusion
Our analysis provides valuable insights into the usage and performance of Dropbox and other cloud storage services. These findings are useful for researchers, ISPs, and service providers to understand and anticipate the impact of widespread adoption of such solutions.

## Appendix A
Additional characteristics of Dropbox storage traffic are provided in the appendix.