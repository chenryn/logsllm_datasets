specified CFM maintenance domain.
333
Action
• To display the on-demand ETH-SLM statistics collected for MEPs belonging to maintenance
association ma1 within maintenance domain md1:
user@host> show oam ethernet connectivity-fault-management synthetic-loss-statistics
maintenance-domain md1 maintenance-association ma1
• To display the on-demand ETH-SLM statistics collected for ETH-SLM sessions for the local MEP 201
belonging to maintenance association ma2 within maintenance domain md2:
user@host> show oam ethernet connectivity-fault-management synthetic-loss-statistics
maintenance-domain md2 maintenance-association ma2 local-mep 201
• To display the on-demand ETH-SLM statistics collected for ETH-SLM sessions from local MEPs
belonging to maintenance association ma3 within maintenance domain md3 to the remote MEP 302:
user@host> show oam ethernet connectivity-fault-management synthetic-loss-statistics
maintenance-domain md3 maintenance-association ma3 remote-mep 302
Meaning
The output displays on-demand ETH-SLM statistics for MEPs in the specified maintenance association
within the specified maintenance domain. For details about the output of this command and the
descriptions of the output fields, see show oam ethernet connectivity-fault-management synthetic-loss-statistics.
SEE ALSO
show oam ethernet connectivity-fault-management synthetic-loss-statistics
Displaying ETH-SLM Statistics and Frame Counts
IN THIS SECTION
Purpose | 334
Action | 334
334
Meaning | 334
Purpose
Display on-demand ETH-SLM statistics and ETH-SLM frame counts.
By default, the show oam ethernet connectivity-fault-management mep-statistics command displays on-demand
ETH-SLM statistics and frame counts for MEPs in the specified CFM maintenance association within the
specified CFM maintenance domain.
Action
• To display the on-demand ETH-SLM statistics and ETH-SLM frame counts for MEPs in maintenance
association ma1 within maintenance domain md1:
user@host> show oam ethernet connectivity-fault-management mep-statistics maintenance-domain
md1 maintenance-association ma1
• To display the on-demand ETH-SLM statistics and ETH-SLM frame counts for the local MEP 201 in
maintenance association ma2 within maintenance domain md2:
user@host> show oam ethernet connectivity-fault-management mep-statistics maintenance-domain
md2 maintenance-association ma2 local-mep 201
• To display the on-demand ETH-SLM statistics and ETH-SLM frame counts for the local MEP in
maintenance association ma3 within maintenance domain md3 that participates in an ETH-SLM session
with the remote MEP 302:
user@host> show oam ethernet connectivity-fault-management mep-statistics maintenance-domain
ma3 maintenance-association ma3 remote-mep 302
Meaning
The output displays on-demand ETH-SLM statistics and ETH-SLM frame counts for MEPs in the
specified maintenance association within the specified maintenance domain. For details about the
335
output of this command and the descriptions of the output fields, see show oam ethernet connectivity-fault-
management mep-statistics.
SEE ALSO
show oam ethernet connectivity-fault-management mep-statistics
Displaying ETH-SLM Frame Counts for MEPs by Enclosing CFM Entity
IN THIS SECTION
Purpose | 335
Action | 335
Meaning | 336
Purpose
Display on-demand ETH-SLM frame counts for CFM maintenance association end points (MEPs).
By default, the show oam ethernet connectivity-fault-management mep-database command displays CFM database
information for MEPs in the specified CFM maintenance association within the specified CFM
maintenance domain.
NOTE: At the router attached to the initiator MEP for a one-way session, or at the router
attached to the receiver MEP for a two-way session, you can only display the ETH-SLM frame
counts and not the MEP database details.
Action
• To display CFM database information (including ETH-SLM frame counts) for all MEPs in MA ma1
within maintenance domain md1:
user@host> show oam ethernet connectivity-fault-management mep-database maintenance-domain
ma1 maintenance-association ma1
336
• To display CFM database information (including ETH-SLM frame counts) only for the local MEP 201 in
MA ma1 within maintenance domain md1:
user@host> show oam ethernet connectivity-fault-management mep-database maintenance-domain
md2 maintenance-association ma2 local-mep 201
• To display CFM database information (including ETH-SLM frame counts) only for the remote MEP 302
in MA ma3 within maintenance domain md3:
user@host> show oam ethernet connectivity-fault-management mep-database maintenance-domain
ma3 maintenance-association ma3 remote-mep 302
Meaning
The output displays ETH-SLM frame counts for MEPs within a particular maintenance domain, or for a
specific local or remote MEP. For details about the output of this command and the descriptions of the
output fields, see show oam ethernet connectivity-fault-management mep-database.
Displaying ETH-SLM Frame Counts for MEPs by Interface or Domain Level
IN THIS SECTION
Purpose | 336
Action | 337
Meaning | 337
Purpose
Display on-demand ETH-SLM frame counts for CFM maintenance association end points (MEPs).
By default, the show oam ethernet connectivity-fault-management interfaces command displays CFM database
information for MEPs attached to CFM-enabled Ethernet interfaces on the router or at a maintenance
domain level. For Ethernet interfaces that support ETH-SLM, any frame counts are also displayed when
you specify the detail or extensive command option.
337
NOTE: At the router attached to the initiator MEP, you can only display the ETH-SLM frame
counts and not the MEP database details.
Action
• To display CFM database information (including ETH-SLM frame counts) for all MEPs attached to
CFM-enabled Ethernet interfaces on the router:
user@host> show oam ethernet connectivity-fault-management interfaces detail
• To display CFM database information (including ETH-SLM frame counts) only for the MEPs attached
to CFM-enabled router interface ge-5/2/9.0:
user@host> show oam ethernet connectivity-fault-management interfaces ge-5/2/9.0 detail
• To display CFM database information (including ETH-SLM frame counts) only for MEPs enclosed
within CFM maintenance domains at level 6:
user@host> show oam ethernet connectivity-fault-management interfaces level 6 detail
Meaning
The output displays ETH-SLM frame counts for MEPs for the specified interface. For details about the
output of this command and the descriptions of the output fields, see show oam ethernet connectivity-fault-
management interfaces.
Clearing ETH-SLM Statistics and Frame Counts
IN THIS SECTION
Purpose | 338
Action | 338
338
Purpose
Clear the on-demand ETH-SLM statistics and ETH-SLM frame counts.
By default, statistics and frame counts are deleted for all MEPs attached to CFM-enabled interfaces on
the router. However, you can filter the scope of the command by specifying an interface name.
Action
• To clear the on-demand ETH-SLM statistics and ETH-SLM frame counts for all MEPs attached to
CFM-enabled interfaces on the router:
user@host> clear oam ethernet connectivity-fault-management synthetic-loss-measurement
• To clear the on-demand ETH-SLM statistics and ETH-SLM frame counts only for MEPs attached to
the logical interface ge-0/5.9.0:
user@host> clear oam ethernet connectivity-fault-management synthetic-loss-measurement
ge-0/5/9.0
Clearing Iterator Statistics
IN THIS SECTION
Purpose | 338
Action | 339
Purpose
Clear the existing iterator statistics and proactive ETH-SLM counters.
Multiple iterators can be associated with remote MEP. However, by default, only one result pertaining to
one iterator profile can be cleared.
339
Action
• To clear the iterator statistics for remote MEP 1 and iterator profile i1 with MEPs belonging to the
maintenance association ma1 within the maintenance domain default-1:
user@host> clear oam ethernet connectivity-fault-management sla-iterator-statistics sla-
iterator i1 maintenance-domain default-1 maintenance-association ma1 local-mep 1 remote-mep 1
• To clear the iterator statistics for remote MEP 1 and iterator profile i2 with MEPs belonging to the
maintenance association ma1 within the maintenance domain default-1:
user@host> clear oam ethernet connectivity-fault-management sla-iterator-statistics sla-
iterator i2 maintenance-domain default-1 maintenance-association ma1 local-mep 1 remote-mep 1
RELATED DOCUMENTATION
clear oam ethernet connectivity-fault-management synthetic-loss-measurement
show oam ethernet connectivity-fault-management synthetic-loss-statistics
show oam ethernet connectivity-fault-management interfaces
show oam ethernet connectivity-fault-management mep-statistics
show oam ethernet connectivity-fault-management mep-database
Troubleshooting Failures with ETH-SLM
IN THIS SECTION
Problem | 339
Solution | 340
Problem
Description
The Ethernet synthetic loss measurement (ETH-SLM) application is not working properly for calculation
of frame loss using synthetic frames instead of data traffic
340
Solution
Perform the following steps to analyze and debug any problems with the ETH-SLM functionality.
1. Ensure that ETH-SLM is configured (either proactive or on-demand) to initiate SLM frames. Verify
the configuration settings.
2. Examine any failures that might have occurred in the CFM session for which the ETH-SLM feature is
enabled. The CFM session must be in the up state for the ETH-SLM functionality to work correctly.
Use the show oam ethernet connectivity-fault-management mep-database maintenance-domain md-name maintenance-
association ma-name local-mep mep-id remote-mep remote-mep-id command to verify whether the CFM
session is in the up state.
3. If the MEP sessions are active, use the appropriate show command to verify the ETH-SLM statistics
and to analyze if ETH-SLM frames are transmitted or received.
4. If the transmission of ETH-SLM frames does not happen correctly after you attempt all of the
preceding troubleshooting steps, enable the tracing operations for Ethernet CFM by including the
traceoptions statement at the [edit protocols oam ethernet connectivity-fault-management] hierarchy level.
[edit protocols oam ethernet connectivity-fault-management]
traceoptions {
file  > 
;
flag flag;
no-remote-trace;
}
SEE ALSO
Ethernet Synthetic Loss Measurement Overview | 217
monitor ethernet synthetic-loss-measurement
RELATED DOCUMENTATION
ITU-T Y.1731 Ethernet Service OAM Overview | 204
Configure Ethernet Frame Loss Measurement | 268
341
Ethernet Alarm Indication
IN THIS SECTION
Ethernet Alarm Indication Signal (ETH-AIS) Function Overview | 341
Ethernet Alarm Indication Signal Overview | 346
Configuring ETH-AIS on a CFM MEP | 347
Configuring Alarm Indication Signal on ACX Series Routers | 353
Use the following to understand more about Ethernet alarm indication signal (ETH-AIS) and how to
configure ETH-AIS on devices.
Ethernet Alarm Indication Signal (ETH-AIS) Function Overview
IN THIS SECTION
Understanding ETH-AIS in a Maintenance Domain | 341
Fault Detection in a Maintenance Domain | 342
Terms Defined | 344
Ethernet alarm indication signal (ETH-AIS) function enables a service provider deploying an Ethernet
service to determine whether a connectivity fault exists at the provider’s domain level or at a level
below. When the fault occurs at the provider’s domain level, the service provider addresses the fault,
and when the fault occurs at a level below, the provider can either ignore the fault or contact the
relevant authorities to address the fault.
The following sections explain ETH-AIS, few use cases which determine when to generate and
propagate ETH-AIS packets, and associated terms in detail:
Understanding ETH-AIS in a Maintenance Domain
ITU-T developed Y.1731 as a recommendation for Operation, Administration, and Maintenance (OAM)
functions and mechanisms for Ethernet-based networks, including OAM functions such as ETH-AIS,
Ethernet locked signal (ETH-LCK), Ethernet test signal (ETH-Test), Ethernet automatic protection
switching (ETH-APS), Ethernet maintenance communication channel (ETH-MCC), Ethernet experimental
342
OAM (ETH-EXP), Ethernet vendor-specific OAM (ETH-VSP), and performance monitoring. For
information about maintenance domain and related terms, see "Terms Defined" on page 344.
According to the Y.1731 standards, a server MEP is a combined function of the server layer termination
function and the server Ethernet services layer adaptation function. The server MEP notifies the
Ethernet services (ETH) layer MEPs when it detects a failure. The server layer termination function then
runs the OAM mechanisms specific to the server layer and the alarms are suppressed at the server layer
by ETH-AIS.
Note that ETH-AIS is not applicable to Spanning Tree Protocol (STP) networks.
ETH-AIS enables you to suppress alarms when a fault condition is detected. Using ETH-AIS, a service
provider can differentiate between faults at different levels.
ETH-AIS provides many advantages that include:
• Service providers need not raise alarms if there are lower-level failures.
• Service providers can provide a refund to their subscribers or avail a refund from their Internet
provider based on service unavailability.
MX Series routers support ITU-T Y.1731 ETH-AIS to provide fault management for service providers
who provide carrier Ethernet services using IEEE 802.1ag standard.
NOTE: MX Series Virtual Chassis does not support Ethernet alarm indication signal (ETH-AIS).
Fault Detection in a Maintenance Domain
In the scenario depicted in Figure 1 on page xyz, you have a service provider level and a customer level.
Two service providers—Operator-1 and Operator-2—are considered for illustration purposes. Assume
that a fault occurs in Operator-1 maintenance domain-level that has MEP-A and MEP-B at its
maintenance domain-level boundaries. To notify the faults to a network management system and to
avoid notification of alarms from the customer level for the same fault, MEP-A and MEP-B transmit an
alarm indication signal (AIS) on opposite directions, thereby signaling the higher levels and the
Operator-2 network about the fault, so that the alarms are suppressed.
Signaling is achieved through transmission and propagation of AIS protocol data units (PDUs). You must
enable AIS explicitly on all the MEPs at the service provider level. A MEP that is configured to issue
frames with ETH-AIS information is generally at the server layer and continues to transmit periodic
frames with ETH-AIS information until the defect condition is cleared. When a client MEP receives the
ETH-AIS frames, it suppresses loss-of-continuity alarms associated with its peer MEPs.
343
Note that in the absence of AIS, a client MEP resumes generating loss-of-continuity alarms when it
detects the loss-of-continuity defect conditions from its server layer.
For point-to-point Ethernet services layer connectivity, a MEP has only one peer MEP. Therefore, there
is no ambiguity regarding the peer MEP for which the MEP should suppress alarms when it receives the
ETH-AIS information.
For multipoint Ethernet services layer connectivity, a MEP that receives ETH-AIS information cannot
determine the exact MEP that encountered the fault and, therefore, cannot isolate the exact peer MEP
to suppress the alarms. To avoid this scenario, Y.1731 recommends suppressing alarms for all peer MEPs
in the same domain level irrespective of connectivity status in a multipoint Ethernet services layer
connectivity setup.
Table 19 on page 343 lists the operational mode commands that you can use in a maintenance domain
to check the various parameters pertaining to a MEP.
Table 19: Operational Mode Commands
To Check Operational Mode Commands
Whether the AIS configuration is show protocols oam ethernet connectivity-fault-management action-
configured correctly on a CFM MEP.
profile
Statistics of AIS frames. show oam ethernet connectivity-fault-management interfaces detail
show oam ethernet connectivity-fault-management mep-statistics
maintenance-domain md-name maintenance-association ma-name remote-mep
mep-id local-mep mep-id
344
Table 19: Operational Mode Commands (Continued)
To Check Operational Mode Commands
Whether any event has occurred that show oam ethernet connectivity-fault-management mep-database
triggered AIS.
maintenance-domain md-name maintenance-association ma-name remote-mep
mep-id local-mep mep-id
Status of CFM sessions for faults that show oam ethernet connectivity-fault-management interfaces detail
trigger AIS on the MEP.
Terms Defined
• AIS transmission—A MEP upon detecting a defect condition transmits AIS frames in a direction
opposite to its peer MEPs. The periodicity of AIS frames transmission is on the basis of the AIS
transmission period. An AIS transmission period of 1 second is recommended. The first AIS frame
must always be transmitted immediately following the detection of a defect condition.
• AIS reception—Upon receiving an AIS frame, a MEP examines it to ensure that the frame’s
maintenance domain level is the same as its own maintenance domain level. The period field in the
frame indicates the period at which the AIS frames can be expected. When a MEP receives an AIS
frame, it detects the defect condition. After detection, when no AIS frames are received within an
interval of 3.5 times—the AIS transmission period indicated in the AIS frames received—the MEP
clears the AIS defect condition. When the AIS condition is cleared and defects still exist, then the
MEPs continue to report alarms.
• AIS PDU format—The fields of the AIS PDU format are:
1. MEG Level—Also called the maintenance domain level, it is a 3-bit field that is used to carry the
maintenance domain level of the client MEG.
345
2. Version—Value is always 0.
3. OpCode—Value for this PDU type is AIS (33).
4. Flags—The first five bits are reserved and are set to 0. The 3-bit information element carried in the
three least significant bits are referred to as the period that contains the value of AIS transmission
periodicity as illustrated in Table 20 on page 345:
Table 20: AIS Transmission Periodicity
Flags [3:1] Period Value Comments
000-011 Invalid value Invalid value for AIS
100 1s 1 frame per second
101 Invalid value Invalid value for AIS
110 1 min 1 frame per minute
111 Invalid value Invalid value for AIS
5. TLV offset—Set to 0.
6. End TLV—All-zeroes octet value.
• Server layer and client layer—These layers are part of the ITU-T Recommendation G.805 transport
network functional model. This model is based on the concept of layering within a transport network.
A transport network is divided into several independent transport layer networks that have a client-
server association between adjacent layer networks.
• Maintenance domain—To enable connectivity fault management (CFM) on an Ethernet interface,
maintenance domains, maintenance associations, and maintenance end points (MEPs) are created
and configured in a network. You can configure up to eight maintenance domain levels in a network.
Each maintenance domain level is a part of the network where the connectivity issues can be
monitored and corrected. Provider domain and customer domain are some examples for maintenance
domains. Each maintenance domain has a maintenance association. Each maintenance association
includes MEPs and maintenance intermediate points (MIPs) in that domain. The MEPs are located at
the boundary of the domain and the MIPs are located within the domain. MEPs generate and
transmit continuity check messages (CCMs) at configured intervals to the entire maintenance
association to check the connectivity in the network.
346
• Ethernet services (ETH) layer—A layer in the metro Ethernet network model, where this layer is
responsible for the OAM services that are required to support the Ethernet services in the network.
SEE ALSO
show oam ethernet connectivity-fault-management interfaces
show oam ethernet connectivity-fault-management mep-statistics
Ethernet Alarm Indication Signal Overview
ACX Series routers support ITU-T Y.1731 Ethernet Alarm Indication Signal function (ETH-AIS) to provide
fault management for service providers. ETH-AIS enables you to suppress alarms when a fault condition
is detected. Using ETH-AIS, an administrator can differentiate between faults at customer level or faults
at provider level.
The advantage of ETH-AIS is:
• Customers need not raise alarms due to lower level failures.
• Customers can get refund based on service unavailability.
When a fault condition is detected, a maintenance end point (MEP) generates ETH-AIS packets to the
configured client levels for a specified duration until the fault condition is cleared. Any MEP configured
to generate ETH-AIS packets signals to a level higher than its own. A MEP receiving ETH-AIS recognizes
that the fault is at a lower level and then suppresses alarms at current level.
ACX Series routers support ETH-AIS PDU generation for server MEPs based on the following defect
conditions:
• Loss of connectivity (physical link loss detection)
• Layer 2 circuit or Layer 2 VPN down
Alarm indication signaling is done through the transmission and propagation of ETH-AIS PDUs. ETH-AIS
should be enabled on MEPs. A MEP which is configured to issue packets with ETH-AIS information is
generally of server layer and continues to transmit periodic packets with ETH-AIS information until the
defect condition is cleared. CFM MEPs, upon receiving ETH-AIS PDUs, suppresses loss of continuity
alarms associated with its peer MEPs. A MEP resumes loss of continuity alarm generation upon
detecting loss of continuity defect conditions in the absence of an ETH-AIS condition.
For point-to-point Ethernet connectivity, a MEP has only a single peer MEP. Therefore, a MEP suppress
alarms on its peer MEP when it receives the ETH-AIS information.
For multi-point Ethernet connectivity, a MEP which receives ETH-AIS information cannot determine the
exact MEP encountered a fault condition and therefore it will not be able to isolate the exact peer MEP
347
for alarm suppression. ITU-T Y.1731 recommends suppressing alarms for all peer MEPs irrespective of
the connectivity status.
AIS transmission—A MEP upon detecting a defect condition transmits ETH-AIS PDUs in a direction
opposite to its peer MEPs. The transmission of ETH-AIS PDUs is based on a configured ETH-AIS
transmission period. An ETH-AIS transmission period of 1 second is recommended. The first ETH-AIS
PDU must be transmitted immediately following the detection of a defect condition.
AIS reception—A MEP upon receiving ETH-AIS PDUs examines it to ensure that its maintenance domain
(MD) level corresponds to the same MD level. Upon receiving an ETH-AIS PDU, the MEP detects a
defect condition. Following the detection of a defect condition, if there are no ETH-AIS PDUs received
within an interval of 3.5 times the ETH-AIS transmission period indicated in the ETH-AIS PDUs received
earlier, the MEP clears the defect condition. After the fault condition is cleared, MEPs continue to report