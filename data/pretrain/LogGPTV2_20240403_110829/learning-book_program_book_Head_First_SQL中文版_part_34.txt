red
50
23Maple
6
2
blue
2
1902 Amber Ln
9
2
green
18
1902Amber Ln
12
4
white
28
17 Engleside
12
4
yellow
11
17 Engleside
人
Jnventory列依赖于被标示为组合
这一列或许也需要重新考虑。它其实与
主键的两列，所以它没有部分
玩具本身的关联较多，与库存的关联并
函数依赖性。
不太多。我们的toy_id列应该就足以
找出玩具类型和颜色了。
请注意，当玩具与商店（store_id）相关联
时，store_address会一再重复。如果有修改
store_address的需要，就必须改变每一条引l用这张
表的记录。需要更新的行越多，不知不觉在数据中出现
错误的可能性也会越大。
330
第7章
---
## Page 363
多张表的数据库设计
或许已经达成2NF了.·
只要所有列都是
已符合1NF的表只要其所有列都是主键的一部分，则它
主键的一部分
也就符合2NF。
或者
表中有唯一主键列
创建新的表，以coy_id与store_id为组合主键。我们
符合1NF的表
可以通过新表来连接原有的玩具信息表与商店信息表。
也会符合2NF
玩具的所有信息：
toy_store
Toys
toy_id
商店的所有信息：
store_id
Stores
已符合1NF的表若只拥有一列主键，也会符合2NF。
这也是指定一个AUTO_INCREMENTID列的好理由。
第二范式，又称2NF:
规则一：先符合INF
规则二：没有部分函数依赖性。
我的my_contaets表中应该
没有部分函数依赖性吧，可是
我不确定..
所以说，游戏时间又到了....
当前位置
331
---
## Page 364
与2NF表天人合一
与2NF表天人合一
别留下部分函数依赖性
你的任务是与表合而为一，并移除表中的
部分函数依赖性。请观察下列
这两列构成了具有唯
各个图表，划掉应该从中移除
一性的组合主键。
toy_inventory
的列。
toy_id
store_id
cookie_sales
amount
singers
girl_id
singer_id
date
last_name
girl_name
first_name
troop_leader
agency
total_sales
agency_state
movies
movie_id
title
genre
salary
rented_by
employee_id
due_date
last_name
rating
first_name
salary
manager
employee_email
hire_date
dogbreeds
breed
description
avg_weight
avg_height
club_id
club_state
332
第7章
---
## Page 365
多张表的数据库设计
磨笔
重新设计下列表，改成三张都符合2NF的表。
其中一张表用来记录玩具信息，另一张用来记录商店信息，
最后一张则记录库存量并可连接到另外两张表。
最后，为合适的表添加如下列：phone、manager、cost及
toy_id
toy
weight。你可能必须创建新的tog_ids。
5
whiffleball
6
frisbee
PIAo
store_id
color
6
kite
inventory
store_address
12
0+
o+r-
yoyo
5
1
white
34
23Maple
5
3
yellow
12
100E.North St.
5
1
blue
5
23 Maple
6
2
green
10
1902Amber Ln.
6
4
yellow
24
17 Engleside
6
1
red
50
23Maple
6
2
blue
2
1902AmberLn
9
2
green
18
1902AmberLn
12
4
white
28
17 Engleside
12
4
yellow
11
17 Engleside
当前位置
333
---
## Page 366
与2NF表天人合一解答
与2NF表天人合一
别留下部分函数依赖性解答
你的任任务是与表合而为一，并移除表中
的部分函数依赖性。请观察下
这两列构成了具唯一
列各个图表，划掉应该从中移
性的组合主键。
toy_inventory
除的列。
toy_id
store_id
主键。
cookie_sales
虽然这两列应该改为从
amount
singers
另一张专门记录经纪
girl_id
singer_id
date
一旦移出这些列，其余
last_name
公司的表中抽取出来的
-girl_name
JD值，但它并不具有
列就可以形成组合主键。
first_name
+roop_leader
agency
部分依赖性（因为可能
tetal_sules
agency_state
有两家公司采用相同名
称）。
movies
主键。
movie_id
title
genre
主键。
salary
这些列只有传递西数
rented_by
employee_id
依赖性。
due_date
last_name
虽然这些列应该
rating
first_name
移出，但它们并
salary
未具有部分函数
manager
依赖性。
employee_email
hire_date
dog_breeds
breed
description
组合主键。
avg_weight
avg_height
club_id
club_state
club_id或许属于这张表（如
果它具有一对一的关系），但
club_state绝对不该放在这里。
即使如此，表中的列还是没有部
分面数依赖性。
334
第7章
---
## Page 367
多张表的数据库设计
磨笔上吃
重新设计下列表，改成三张都符合2NF的表。
其中一张表用来记录玩具，另一张用来记录商店信息，最后
一张则记录库存量并可连接到另外两张表。
最后，为合适的表添加如下列：phone、manager、cost及
weight。你可能必须创建新的tog_ids。
toy_id
toy
5
whiffleball
toy_id
color
inventory
store_address
6
frisbee
#+0
#+0
9
kite
5
1
white
34
23Mople
12
yoyo
5
3
yellow
12
100E.North St.
5
1
blue
5
23Maple
6
2
green
10
1902 Amber Ln.
6
4
yellow
24
17 Engleside
9
1
red
50
23Maple
6
2
blue
2
1902Amber Ln
6
2
green
18
1902 Amber Ln
12
4
white
28
17 Engleside
12
4
yellow
11
17 Engleside
store
inventory
组合主键是toy_id和
toy_id
store_id
inventory
store_id.
+0
0+r
1
1
34
2
3
12
toy_info
3
1
5
toy_id
A
toy
2
10
color
cost
weight
5
4
24
1
whiffleball
white
1.95
0.3
6
1
50
2
whiffleball
yellow
2.20
0.4
7
2
2
3
whiffleball
blue
1.95
0.3
8
2
18
4
frisbee
green
3.50
0.5
6
4
28
frisbee
yellow
0.2
10
4
5
1.50
11
6
kite
red
5.75
1.2
1
kite
blue
5.75
1.2
8
kite
store_info
green
3.15
0.8
9
yoyo
white
4.25
0.4
address
phone
了
manager
10
yoyo
yellow
1.50
0.2
1
23Maple
555-6712
Joe
2
1902 Amber Ln.
555-3478
Susan
3
100 E. North St.
555-0987
Tara
4
17 Engleside
555-6554
Gordon
当前位置
335
---
## Page 368
带领表进入3NF
第三范式（终于到了这一步）
如果你的表有
因为本书的表通常会加上人工主键（artificial primary
人工主键且没有
key），所以让表符合第二范式并不算特别困难。任何具
组合主键，则符
有人工主键且没有组合主键的表都符合2NF。
合2NF。
不过，我们必须要确认表是否符合3NF：
第三范式，又称3NF：
还记得吗：传递函数依赖表示任
规则一：符合2NF
何非键列与相同表中的其他非键列
规则二：没有传递函数依赖性
有关联。
如果改变任何非键列可能造成
其他任何非键列的改变，就是
具有可传递依赖性。
如果修改了course_name、instructor、
instructor_phone中任一列的值，请想想
会有什么变化：
在考量3NF的关
口
如果改变了course_name，instruc
键时可以忽略
courses
tor或instructor_phone就都没有改
主键。
course_id
变的必要。
course_name
instructor
如果改变了instructor_phone，in-
instructor_phone
structor或course_name就都没有改
变的必要。
7
现在应该很明显了，如果我