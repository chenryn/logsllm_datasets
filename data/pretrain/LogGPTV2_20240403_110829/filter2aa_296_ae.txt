When a diskless client boots, temporary “shadow” files are stored on the server. You can 
use Server Admin to specify which server volumes are used to store the temporary files.
To use a volume for storing shadow files:
1 Open Server Admin and select NetBoot in the Computers & Services list.
2 Click Settings, then click General.
3 In the list of volumes in the lower half of the window, click the checkbox in the Client 
Data column for the volumes you want to use to store shadow files.
4 Click Save.
From the Command Line
You can also specify that a volume should be used to store shadow files using the 
serveradmin command in Terminal. For more information, see the system image 
chapter of the command-line administration guide.
Warning:  Don’t rename a NetBoot share point or the volume on which it resides. 
Don’t use Workgroup Manager to stop sharing for a NetBoot share point unless you 
first deselect the share point for images and shadow files in Server Admin.
Warning:  Don’t rename a NetBoot share point or the volume on which it resides. 
Don’t use Workgroup Manager to stop sharing for a NetBoot share point unless you 
first deselect the share point for images and shadow files in Server Admin.
LL2348.Book  Page 35  Thursday, August 21, 2003  10:58 AM
36
Chapter 3    Setting Up NetBoot Service
Using Images Stored on Other NFS Servers
You can store boot or install images on NFS servers other than the NetBoot server itself.
To store an image on a separate NFS server:
1 If you haven’t already, create the image on the NetBoot server. This creates an image 
(.nbi) folder for the image in /Library/NetBoot/NetBootSPn on the NetBoot server.
2 Copy the image (.dmg) file from the .nbi folder on the NetBoot server to a shared 
(exported) directory on the other server. Leave the .nbi folder and the other files it 
contains on the NetBoot server.
3 Open the NBImageInfo.plist file for the image using a text editor or the Property List 
Editor and set the value of the RootPath property to point to the new location of the 
image using the following syntax:
host:path:image
where host is the name or IP address of the NFS server, path is the location of the 
image on the server, and image is the name of the image (.dmg) file.
If the mount point specified by path is directly bootable, you don’t need to specify 
image.
For example:
• server3:/Images/OSX/Jaguar:Jag_10_2.dmg points to the image file 
Jag_10_2.dmg in /Images/OSX/Jaguar on the host server3
• 172.16.12.20:/Images/OS_X/Jaguar specifies a directly bootable mount point 
on a server identified by IP address
If the image is already on the remote server, you can create the .nbi folder on the 
NetBoot server by duplicating an existing .nbi folder and adjusting the values in its 
NBImageInfo.plist file.
Moving Images to Headless Servers
Use the Export feature of the Network Image Utility to move images to another server, 
including servers without displays or keyboards.
To copy an image to another server:
1 Open Network Image Utility and click Images.
2 Select the image in the list and click Export, and provide the target information.
Important:  To avoid problems with file permissions, don’t use Terminal or the Finder to 
copy boot or install images across the network to other servers.
LL2348.Book  Page 36  Thursday, August 21, 2003  10:58 AM
Chapter 3    Setting Up NetBoot Service
37
Specifying the Default Image
The default image is the image used when you start a client computer while holding 
down the N key. See “Starting Up Using the N Key” on page 42. If you’ve created more 
than one startup disk image, you can use the NetBoot service settings in Server Admin 
to select the default startup image.
Important:  If you have diskless clients, set their boot image as the default image.
If you have more than one NetBoot server on the network, a client uses the default 
image on the first server that responds. There is no way to control which default image 
is used when more than one is available.
To specify the default boot image:
1 Open Server Admin and select NetBoot in the Computers & Services list.
2 Click Settings, then click Images.
3 Click the button in the Default column next to the image.
4 Click Save.
From the Command Line
You can also specify the default image using the serveradmin command in Terminal. 
For more information, see the system image chapter of the command-line 
administration guide.
Setting an Image for Diskless Booting
You can use Server Admin to make an image available for booting client computers 
that have no local disk drives. Setting an image for diskless booting instructs the 
NetBoot server to allocate space for the client’s shadow files.
To make an image available for diskless booting:
1 Open Server Admin and select NetBoot in the Computers & Services list.
2 Click Settings, then click Images.
3 Click the box in the Diskless column next to the image in the list.
4 Click Save.
Important:  If you have diskless clients, set their boot image as the default image.
For help specifying where the client’s shadow files are stored, see “Choosing Where 
Shadow Files Are Stored” on page 35.
From the Command Line
You can also set an image to boot diskless using the serveradmin command in 
Terminal. For more information, see the system image chapter of the command-line 
administration guide.
LL2348.Book  Page 37  Thursday, August 21, 2003  10:58 AM
38
Chapter 3    Setting Up NetBoot Service
Restricting NetBoot Clients by Filtering Addresses
The filtering feature of NetBoot service lets you restrict NetBoot service based on a 
client computer’s Ethernet hardware (MAC) address. A client’s address is added to the 
filter list automatically the first time it starts up from an image on the server, and is 
allowed access by default, so it is usually not necessary to enter hardware addresses 
manually. 
To restrict client access to NetBoot service: 
1 Open Server Admin and select NetBoot in the Computers & Services list.
2 Click Settings, then click Filters.
3 Select either “Allow only clients listed below” or “Deny only clients listed below.”
4 Select “Enable NetBoot filtering.”
5 Use the Add (+) and Delete (-) buttons to set up the list of client addresses.
To look up a MAC address, type the client’s DNS name in the Host Name field and click 
the Search button.
To find the hardware address for a computer using Mac OS X, look on the TCP/IP pane 
of the computer’s Network preference or run Apple System Profiler. On a Mac OS 9 
computer, open the TCP/IP control panel, choose File > Get Info.
Changing Advanced NetBoot Options
You can control additional NetBoot options by running the bootpd program directly 
and by modifying configuration parameters in NetInfo. For more information, read the 
bootpd man page.
To view the bootpd man page:
1 Open Terminal.
2 Type man bootpd.
LL2348.Book  Page 38  Thursday, August 21, 2003  10:58 AM
4
39
4 Setting Up Clients
This chapter describes how to set up client computers to 
start up from or install software from images on a server.
Supporting Client Computers
See “Client Computer Requirements” on page 14 for a list of supported Macintosh 
computers and the client system requirements for using NetBoot.
Updating the Startup Disk Control Panel
You need to replace the Startup Disk control panel for client computers running 
Mac OS 9 so that the control panel can display the available NetBoot disk images. 
Version 9.2.6 of the Startup Disk control panel is located on the NetBoot for Mac OS 9 CD 
(available separately).
m Drag the new version of the control panel to the System Folder of each client computer 
running Mac OS 9 locally.
Setting Up Diskless Clients
NetBoot makes it possible to configure client computers without locally installed 
operating systems or even without any installed disk drives. “System-less” or diskless 
clients can start up from a NetBoot server using the N key method. (See “Starting Up 
Using the N Key” on page 42.) 
After the client computer has started up, you can use the Startup Disk preference pane 
(Mac OS X) or Startup Disk control panel (Mac OS 9) to select the NetBoot disk image as 
the startup disk for the client. That way you no longer need to use the N key method to 
start up the client from the server.
Removing the system software from client computers gives you additional control over 
users’ environments. By forcing the client to boot from the server and using client 
management to deny access to the client computer’s local hard disk, you can prevent 
users from saving files to the local hard disk.
LL2348.Book  Page 39  Thursday, August 21, 2003  10:58 AM
40
Chapter 4    Setting Up Clients
Selecting a NetBoot Boot Image (Mac OS X)
If your computer is running Mac OS X version 10.2 or later, you use the Startup Disk 
System Preferences pane to select a NetBoot boot image.
To select a NetBoot startup image from Mac OS X:
1 In System Preferences select the Startup Disk pane.
2 Select the network disk image you want to use to start up the computer.
3 Click Restart.
The NetBoot icon appears, and then the computer starts up from the selected image.
Selecting a NetBoot Boot Image (Mac OS 9)
If your computer is running Mac OS 9, you use the Startup Disk control panel to select 
a NetBoot boot image.
Note:  You must update the Startup Disk control panel on client computers running 
Mac OS 9 from their local hard disks so they can see individual NetBoot disk images in 
the control panel. See “Updating the Startup Disk Control Panel” on page 39.
To select a NetBoot startup image from Mac OS 9:
1 Open the Startup Disk control panel.
2 Select the network disk image you want to use to start up the computer.
3 Click Restart in the warning dialog that appears.
The NetBoot icon appears, and then the computer starts up from the selected NetBoot 
disk image.
LL2348.Book  Page 40  Thursday, August 21, 2003  10:58 AM
Chapter 4    Setting Up Clients
41
Selecting a NetBoot Install Image (Mac OS X)
If your computer is running Mac OS X version 10.2 or later, you use the Startup Disk 
System Preferences pane to select a network boot image.
To select an install image from Mac OS X:
1 In System Preferences select the Startup Disk pane.
2 Select the network disk image you want to use to start up the computer.
3 Click Restart.
The NetBoot icon appears, the computer starts up from the selected image, and the 
installer runs.
Selecting a NetBoot Install Image (Mac OS 9)
If your computer is running Mac OS 9, you use the Startup Disk control panel to select 
a network install image.
Note:  You must update the Startup Disk control panel on client computers running 
Mac OS 9 from their local hard disks so they can see individual NetBoot disk images in 
the control panel. See “Updating the Startup Disk Control Panel” on page 39.
To select an install image from Mac OS 9:
1 Open the Startup Disk control panel.
2 Select the install image you want to use to start up the computer.
3 Click Restart in the warning dialog that appears.
The NetBoot icon appears, the computer starts up from the selected NetBoot disk 
image, and the installer runs.
LL2348.Book  Page 41  Thursday, August 21, 2003  10:58 AM
42
Chapter 4    Setting Up Clients
Starting Up Using the N Key
You can use this method to start up any supported client computer from a NetBoot 
disk image. When you start up with the N key, the client computer starts up from the 
default NetBoot disk image. (If multiple servers are present, then the client starts up 
from the default image of the first server to respond.)
If you have an older client computer that requires BootP for IP addressing (a tray-
loading iMac, blue and white PowerMac G3, or older computer), you must use this 
method for starting up from a NetBoot disk image. Older computers don’t support 
selecting a NetBoot startup disk image from the Startup Disk control panel or 
preferences pane.
The N key also provides a way to start up client computers that don’t have system 
software installed. See “Setting Up Diskless Clients” on page 39.
To start up from a NetBoot disk image using the N key:
1 Turn on (or restart) the client computer while holding the N key down on the keyboard.
Hold the N key down until the NetBoot icon appears in the center of the screen 
(Mac OS X) or an arrow appears in the upper-left corner of the screen (Mac OS 9).
2 If a login window appears, enter your name and password.
The network disk image has an icon typical of server volumes.
LL2348.Book  Page 42  Thursday, August 21, 2003  10:58 AM
5
43
5 Managing NetBoot Service
This chapter describes typical day-to-day tasks you might 
perform to keep NetBoot service running efficiently, and 
includes information on load balancing across multiple 
volumes on a server or across multiple servers.
Controlling and Monitoring NetBoot
The following sections show how to stop NetBoot service, disable individual images, 
and monitor or restrict clients.
Turning Off NetBoot Service
The best way to prevent clients from using NetBoot on the server is to disable NetBoot 
service on all Ethernet ports.
To disable NetBoot:
1 Open Server Admin and select NetBoot in the Computers & Services list.
2 Click Stop Service.
To stop service on a specific Ethernet port, click Settings, click General, and deselect the 
Enable checkbox for the port.
To stop serving a particular image, click Settings, click Images, and deselect the Enable 
checkbox for the image.
To stop service to a particular client, click Settings, click Filters, select Enable NetBoot 
Filtering, choose “Deny only clients listed below,” and add the client’s hardware address 
to the list.
From the Command Line
You can also stop NetBoot service or disable images using the serveradmin command 
in Terminal. For more information, see the system image chapter of the command-line 
administration guide.
LL2348.Book  Page 43  Thursday, August 21, 2003  10:58 AM
44
Chapter 5    Managing NetBoot Service
Disabling Individual Boot or Install Images
Disabling an image prevents client computers from starting up using the image.
To disable a NetBoot disk image:
1 Open Server Admin and select NetBoot in the Computers & Services list.
2 Click Settings, then click Images.
3 Deselect the checkbox in the Enable column for the image.
4 Click Save.
From the Command Line
You can also disable images using the serveradmin command in Terminal. For more 
information, see the system image chapter of the command-line administration guide.
Viewing a List of NetBoot Clients
You can use Server Admin to see a list of clients that have booted from the server. 
Note:  This is a cumulative list—a list of all clients that have connected—not a list of 
just currently connected clients. The last boot time is shown for each client.
To view the client list:
1 Open Server Admin and select NetBoot in the Computers & Services list.
2 Click Clients.
Checking the Status of NetBoot and Related Services
You can use Server Admin to check the status of NetBoot service and the other services 
(such as NFS and TFTP) that it uses.
To check NetBoot service status:
1 Open Server Admin and select NetBoot in the Computers & Services list.
2 To see a summary of service status, click Overview. To view the log file, click Logs.
From the Command Line
You can check the status of NetBoot and its supporting services using commands in 
Terminal. See the system image chapter of the command-line administration guide.
Viewing the NetBoot Service Log
You can use Server Admin to view a log containing diagnostic information.
To view NetBoot service log:
1 Open Server Admin and select NetBoot in the Computers & Services list.
2 Click Logs.
From the Command Line
You can see the log by viewing the contents of the log file in Terminal. For more 
information, see the system image chapter of the command-line administration guide.
LL2348.Book  Page 44  Thursday, August 21, 2003  10:58 AM
Chapter 5    Managing NetBoot Service
45
Performance and Load Balancing
For good startup performance, it is critical that the NetBoot server be available to the 
client computer relying on it. To provide responsive and reliable NetBoot service, you 
can set up multiple NetBoot servers in your network infrastructure.
Many sites using NetBoot achieve acceptable responsiveness by staggering the boot 
times of client computers in order to reduce network load. Generally, it isn’t necessary 
to boot all client computers at exactly the same time; rather, client computers are 
booted early in the morning and remain booted throughout the work day. You can 
program staggered startup times using the Energy Saver preferences pane (Mac OS X 
version 10.3 or later) or control panel (Mac OS 9).
Boot Images
If heavy usage and simultaneous client startups are overloading a NetBoot server and 
causing delays, consider adding additional NetBoot servers to distribute the demands 
of the client computers across multiple servers (load balancing). When incorporating 
multiple NetBoot servers, it is important to use switches in your network infrastructure, 
as the shared nature of hubs creates a single shared network on which additional 
servers would have to vie for time.
Distributing Boot Images Across Servers
If you set up more than one NetBoot server on your network, you can place copies of a 
particular boot image on multiple servers to distribute the load. By assigning the 
copies the same image ID in the range 4096–65535, you can advertise them to your 
clients as a single image to avoid confusion.
To distribute an image across servers:
1 Open Network Image Utility on the server where the original image is stored.
2 Click Images (near the top of the window) and select the image in the list.
3 If the image’s Index is 4095 or lower, click Edit and give the image an index in the range 
4096–65535.
4 Use the Export button to place copies of the image on the other servers.
5 On each of the other servers, use Server Admin to enable the image.
Clients still see the image listed only once in their Startup Disk preferences, but the 
server that delivers its copy of the image is automatically selected based on how busy 
the individual servers are.
Smaller improvements can be achieved by distributing boot images across multiple 
disk drives on a single server.
LL2348.Book  Page 45  Thursday, August 21, 2003  10:58 AM
46
Chapter 5    Managing NetBoot Service
Distributing Boot Images Across Server Disk Drives
Even with a single NetBoot server, you might improve performance by distributing 
copies of an image across multiple disk drives on the server. By assigning the copies 
the same image ID in the range 4096–65535, you can advertise them to your clients as 
a single image.
Note:  Don’t distribute images across different partitions of the same physical disk drive. 
Doing so does not improve, and can even reduce, performance.
To distribute an image across disk drives:
1 Open Server Admin and select NetBoot in the Computers & Services list.
2 Click Settings, then click General.
3 Click in the Images column for each volume you want to use for storing images.
Choose volumes on different physical disk drives.
4 Click Save, then click Images.
5 If the image’s ID in the Index column is 4095 or lower, double-click the ID, type an index 
in the range 4096–65535, and save the change.
6 Open Terminal, switch to the root user, and use the cp command to copy the image to 
the NetBootSPn share points on the other volumes. For example: