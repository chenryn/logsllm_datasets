$SHELL: /bin/sh
$PATH: /usr/bin:/bin
```
å¦‚æœæ²¡æœ‰è®¾ç½®ç›¸å…³çš„ç¯å¢ƒå˜é‡ï¼Œä¼šé€ æˆå¦‚ $PATH é—®é¢˜å¯¼è‡´çš„å‘½ä»¤æ‰¾ä¸åˆ°.
å¯ä»¥åœ¨ cron é…ç½®æ–‡ä»¶é¡¶éƒ¨åŠ ä¸Š:
```
SHELL=/bin/bash
PATH=/usr/bin:/bin:/sbin:/usr/sbin
*/5 * * * * root ./run.sh >/dev/null 2>&1
```
**/etc/rc.local**
åœ¨æ–‡ä»¶æœ«å°¾ (exit 0 ä¹‹å‰) åŠ ä¸Šä½ å¼€æœºéœ€è¦å¯åŠ¨çš„ç¨‹åºæˆ–æ‰§è¡Œçš„å‘½ä»¤å³å¯ (æ‰§è¡Œçš„ç¨‹åºéœ€è¦å†™ç»å¯¹è·¯å¾„,æ·»åŠ åˆ°ç³»ç»Ÿç¯å¢ƒå˜é‡çš„é™¤å¤–) ,å¦‚
**/etc/profile.d/**
å°†å†™å¥½çš„è„šæœ¬ (.sh æ–‡ä»¶) æ”¾åˆ°ç›®å½• `/etc/profile.d/` ä¸‹,ç³»ç»Ÿå¯åŠ¨åå°±ä¼šè‡ªåŠ¨æ‰§è¡Œè¯¥ç›®å½•ä¸‹çš„æ‰€æœ‰ shell è„šæœ¬
**at**
> åœ¨ç‰¹å®šçš„æ—¶é—´æ‰§è¡Œä¸€æ¬¡æ€§çš„ä»»åŠ¡
```bash
at now +1 minutes
echo "test" > test.txt
atq		# åˆ—å‡ºç”¨æˆ·çš„è®¡åˆ’ä»»åŠ¡,å¦‚æœæ˜¯è¶…çº§ç”¨æˆ·å°†åˆ—å‡ºæ‰€æœ‰ç”¨æˆ·çš„ä»»åŠ¡,ç»“æœçš„è¾“å‡ºæ ¼å¼ä¸º:ä½œä¸šå·ã€æ—¥æœŸã€å°æ—¶ã€é˜Ÿåˆ—å’Œç”¨æˆ·å
atrm	# æ ¹æ® Job number åˆ é™¤ at ä»»åŠ¡
```
#### SELinux
**æŸ¥çœ‹ SELinux çŠ¶æ€**
```bash
getenforce							# æŸ¥çœ‹ selinux çŠ¶æ€
/usr/sbin/sestatus					# æŸ¥çœ‹å®‰å…¨ç­–ç•¥
```
**å…³é—­ SELinux**
- éœ€è¦é‡å¯
	```vim
	vim /etc/selinux/config
	SELINUX=disabled
	```
- ä¸éœ€è¦é‡å¯
	`setenforce 0`
---
### è´¦å·ç®¡æ§
**ç”¨æˆ·**
```bash
id									# æ˜¾ç¤ºçœŸå®æœ‰æ•ˆçš„ç”¨æˆ· ID(UID)å’Œç»„ ID(GID)
	id -un
whoami								# å½“å‰ç”¨æˆ·
cut -d: -f1 /etc/passwd				# æŸ¥çœ‹ç³»ç»Ÿæ‰€æœ‰ç”¨æˆ·
useradd 					# åˆ›å»ºç”¨æˆ·
useradd -d /home/ -s /sbin/nologin 		# åˆ›å»ºç”¨æˆ·å¹¶æŒ‡å®šå®¶ç›®å½•å’Œ shell
passwd 					# è®¾ç½®ç”¨æˆ·å¯†ç 
userdel 					# åªåˆ é™¤ç”¨æˆ·ä¸åˆ é™¤å®¶ç›®å½•
userdel -r 				# åŒæ—¶åˆ é™¤å®¶ç›®å½•
userdel -f 				# å¼ºåˆ¶åˆ é™¤,å³ä½¿ç”¨æˆ·è¿˜åœ¨ç™»å½•ä¸­
usermod -g  	# ä¿®æ”¹ç”¨æˆ·çš„ä¸»ç»„
usermod -G  	# ä¿®æ”¹ç”¨æˆ·çš„é™„åŠ ç»„
usermod -s /bin/bash 		# ä¿®æ”¹ç”¨æˆ·ç™»å½•çš„ Shell
usermod -L   				# é”å®šç”¨æˆ·
usermod -U  				# è§£é”ç”¨æˆ·
chage								# ä¿®æ”¹å¸å·å’Œå¯†ç çš„æœ‰æ•ˆæœŸé™
	chage -l 				# æŸ¥çœ‹ä¸€ä¸‹ç”¨æˆ·å¯†ç çŠ¶æ€
	chage -d 				# æŠŠå¯†ç ä¿®æ”¹æ›°æœŸå½’é›¶äº†,è¿™æ ·ç”¨æˆ·ä¸€ç™»å½•å°±è¦ä¿®æ”¹å¯†ç 
passwd								# é…ç½® su å¯†ç 
	passwd -l   			# é”å®šç”¨æˆ·
	passwd -u   			# è§£é”ç”¨æˆ·
su 						# åˆ‡æ¢è´¦å·
su -                      # åˆ‡æ¢è´¦å·å¹¶æ”¹å˜å·¥ä½œç›®å½•è‡³ä½¿ç”¨è€…çš„å®¶ç›®å½•
compgen -c                  		# åˆ—å‡ºæ‰€æœ‰å¯ç”¨çš„å‘½ä»¤
ulimit								# æŸ¥çœ‹ã€è®¾ç½®ã€è·å–æ–‡ä»¶æ‰“å¼€çš„çŠ¶æ€å’Œé…ç½®è¯¦æƒ…
	ulimit -a                   	# æ˜¾ç¤ºç™»å½•ç”¨æˆ·çš„èµ„æºé™åˆ¶
	ulimit -n 						# æ˜¾ç¤ºæ‰“å¼€æ–‡ä»¶æ•°é™åˆ¶
	ulimit -c 						# æ˜¾ç¤ºæ ¸å¿ƒè½¬å‚¨æ–‡ä»¶å¤§å°
	ulimit -u 						# æ˜¾ç¤ºç™»å½•ç”¨æˆ·çš„æœ€å¤§ç”¨æˆ·è¿›ç¨‹æ•°é™åˆ¶
	ulimit -f 						# æ˜¾ç¤ºç”¨æˆ·å¯ä»¥æ‹¥æœ‰çš„æœ€å¤§æ–‡ä»¶å¤§å°
	ulimit -m 						# æ˜¾ç¤ºç™»å½•ç”¨æˆ·çš„æœ€å¤§å†…å­˜å¤§å°
	ulimit -v 						# æ˜¾ç¤ºæœ€å¤§å†…å­˜å¤§å°é™åˆ¶
```
**ç»„**
```bash
groups								# å½“å‰ç»„
groupadd 				# åˆ›å»ºç»„
groupadd  		# ç§»åŠ¨ç”¨æˆ·åˆ°ç»„
newgrp 					# åˆ›å»ºç»„
```
**æƒé™**
```bash
chown named.named 		# å°†æ–‡ä»¶ç»™æŒ‡å®šç”¨æˆ·åŠç»„
chmod  				# ç»™æ–‡ä»¶æƒé™
# ç”¨æˆ· rwxã€ç»„ rwxã€å…¶ä»–ç”¨æˆ· rwx  4.2.1 åˆ†åˆ«ä»£è¡¨è¯»,å†™,æ‰§è¡Œ
	chmod 777 
	chmod o=rw 				# ä»£è¡¨åªç»™å…¶ä»–ç”¨æˆ·åˆ†é…è¯»å†™æƒé™
	chmod u=rw,g=r,o= 
	chown -R u+x 			# å¯¹æ–‡ä»¶å¤¹åŠå…¶å­ç›®å½•æ‰€æœ‰æ–‡ä»¶çš„æ‰€æœ‰è€…å¢åŠ æ‰§è¡Œæƒé™
	chmod u+s test_file				# ç»™æ–‡ä»¶å¢åŠ  SUID å±æ€§
	chmod g+s test_dir     			# ç»™ç›®å½•å¢åŠ  SGID å±æ€§
	chmod o+t test_dir     			# ç»™ç›®å½•å¢åŠ  Sticky å±æ€§
chgrp				# æ”¹å˜æ–‡ä»¶æˆ–ç›®å½•æ‰€å±çš„ç”¨æˆ·ç»„
	chgrp user1 file.txt			# Change the owning group of the file file.txt to the group named user1.
	chgrp -hR staff /office/files	# Change the owning group of /office/files, and all subdirectories, to the group staff.
umask 002			# é…ç½®åç ,ä»£è¡¨åˆ›å»ºæ–‡ä»¶æƒé™æ˜¯ 664 å³ rw-rw-r--,é»˜è®¤ 0022(é‡å¯åæ¶ˆå¤±)
# umask å€¼ 002 æ‰€å¯¹åº”çš„æ–‡ä»¶å’Œç›®å½•åˆ›å»ºç¼ºçœæƒé™åˆ†åˆ«ä¸º 6 6 4 å’Œ 7 7 5
# éœ€è¦é•¿æœŸä¿®æ”¹,å¯ä»¥ç›´æ¥æ”¹ vim /etc/profile ä¸­ umask å€¼
chattr				# å¯ä¿®æ”¹æ–‡ä»¶çš„å¤šç§ç‰¹æ®Šå±æ€§
	chattr +i 				# å¢åŠ å,ä½¿æ–‡ä»¶ä¸èƒ½è¢«åˆ é™¤ã€é‡å‘½åã€è®¾å®šé“¾æ¥æ¥ã€å†™å…¥ã€æ–°å¢æ•°æ®
	chattr +a 				# å¢åŠ è¯¥å±æ€§å,åªèƒ½è¿½åŠ ä¸èƒ½åˆ é™¤,érootç”¨æˆ·ä¸èƒ½è®¾å®šè¯¥å±æ€§
	chattr +c 				# è‡ªåŠ¨å‹ç¼©è¯¥æ–‡ä»¶,è¯»å–æ—¶ä¼šè‡ªåŠ¨è§£å‹.Note: This attribute has no effect in the ext2, ext3, and ext4 filesystems.
lsattr 		# è¯¥å‘½ä»¤ç”¨æ¥è¯»å–æ–‡ä»¶æˆ–è€…ç›®å½•çš„ç‰¹æ®Šæƒé™
```
```bash
visudo	# åŠ  sudo æƒé™
user1 ALL=(ALL)     ALL
```
åŠ  sudo æƒé™(ä»…é™ Ubuntu)
```bash
adduser user1 sudo	# å°† user1 åŠ åˆ° sudo ç»„ä¸­
deluser user1 sudo	# å°† user1 ä» sudo ç»„ä¸­åˆ é™¤
```
```bash
sudo -v 			# æŸ¥çœ‹ sudo ä¿¡æ¯
sudo -l 			# æŸ¥çœ‹å½“å‰æƒé™
```
**ACL**
```bash
setfacl -m u:apache:rwx 	# é…ç½® ACL
getfacl 					# æŸ¥çœ‹ ACL æƒé™
setfacl -b 				# åˆ é™¤ ACL
```
å…³äº linux çš„è´¦å·å’Œè®¤è¯æ›´å¤šå†…å®¹å‚è€ƒç¬”è®° [è®¤è¯](./ç¬”è®°/è®¤è¯.md)
---
### è¿›ç¨‹ç®¡ç†
**æœåŠ¡ç®¡ç†**
- service
	```bash
	# æ§åˆ¶ç³»ç»ŸæœåŠ¡çš„å®ç”¨å·¥å…·
	service  status/start/restart/stop
	```
- systemctl
	```bash
	# ç³»ç»ŸæœåŠ¡ç®¡ç†å™¨æŒ‡ä»¤
	systemctl enable crond.service	# è®©æŸä¸ªæœåŠ¡å¼€æœºè‡ªå¯(.service å¯ä»¥çœç•¥)
	systemctl disable crond			# ä¸è®©å¼€æœºè‡ªå¯
	systemctl status crond			# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
	systemctl start crond			# å¯åŠ¨æŸä¸ªæœåŠ¡
	systemctl stop crond			# åœæ­¢æŸä¸ªæœåŠ¡
	systemctl restart crond			# é‡å¯æŸä¸ªæœåŠ¡
	systemctl reload *				# é‡æ–°åŠ è½½æœåŠ¡é…ç½®æ–‡ä»¶
	systemctl is-enabled crond		# æŸ¥è¯¢æœåŠ¡æ˜¯å¦å¼€æœºå¯åŠ¨
	```
- chkconfig
	ä» CentOS7 å¼€å§‹,CentOS çš„æœåŠ¡ç®¡ç†å·¥å…·ç”± SysV æ”¹ä¸ºäº† systemd,ä½†å³ä½¿æ˜¯åœ¨ CentOS7 é‡Œ,ä¹Ÿä¾ç„¶å¯ä»¥ä½¿ç”¨ chkconfig è¿™ä¸ªåŸæœ¬å‡ºç°åœ¨ SysV é‡Œçš„å‘½ä»¤.
	```bash
	# æ£€æŸ¥ã€è®¾ç½®ç³»ç»Ÿçš„å„ç§æœåŠ¡
	chkconfig --list		# åˆ—å‡ºæ‰€æœ‰çš„ç³»ç»ŸæœåŠ¡
	chkconfig --add httpd	# å¢åŠ  httpd æœåŠ¡
	chkconfig --del httpd	# åˆ é™¤ httpd æœåŠ¡
	chkconfig --level httpd 2345 on	# è®¾ç½® httpd åœ¨è¿è¡Œçº§åˆ«ä¸º 2ã€3ã€4ã€5 çš„æƒ…å†µä¸‹éƒ½æ˜¯ on(å¼€å¯)çš„çŠ¶æ€,å¦å¤–å¦‚æœä¸ä¼ å…¥å‚æ•° --level,åˆ™é»˜è®¤é’ˆå¯¹çº§åˆ« 2/3/4/5 æ“ä½œ.
	```
**ç›‘è§†è¿›ç¨‹**
- ps
	```bash
	# æŸ¥çœ‹è¿›ç¨‹
	ps -l 			# é•¿æ ¼å¼æ˜¾ç¤ºè¯¦ç»†çš„ä¿¡æ¯
	ps -a 			# æ˜¾ç¤ºä¸€ä¸ªç»ˆç«¯çš„æ‰€æœ‰è¿›ç¨‹ï¼Œé™¤ä¼šè¯å¼•çº¿å¤–
	ps -A 			# æ˜¾ç¤ºæ‰€æœ‰è¿›ç¨‹ä¿¡æ¯
	ps -u root 		# æŒ‡å®šç”¨æˆ·çš„æ‰€æœ‰è¿›ç¨‹ä¿¡æ¯
	ps -e 			# æ˜¾ç¤ºæ‰€æœ‰è¿›ç¨‹ä¿¡æ¯
	ps aux 			# æŸ¥çœ‹ç³»ç»Ÿä¸­æ‰€æœ‰çš„è¿›ç¨‹æ˜¾ç¤ºæ‰€æœ‰åŒ…å«å…¶ä»–ä½¿ç”¨è€…çš„è¡Œç¨‹
	ps -axjf 		# ä»¥ç¨‹åºæ ‘çš„æ–¹å¼æ˜¾ç¤º
	ps -eLf 		# æ˜¾ç¤ºçº¿ç¨‹ä¿¡æ¯
	ps -ef | grep queue | grep -v grep | wc -l # æŸ¥æ‰¾å«æœ‰ queue å…³é”®è¯çš„è¿›ç¨‹ï¼ˆ-v å»æ‰ grep æœ¬èº«ï¼‰ï¼Œè¾“å‡ºæ‰¾åˆ°çš„è¿›ç¨‹æ•°é‡ã€‚
	ps -aux | awk '$2~/S/ {print $0}' #ç»Ÿè®¡ sleep çŠ¶æ€çš„è¿›ç¨‹
	ps aux | grep root	# æŸ¥çœ‹ root è¿è¡Œçš„ç¨‹åº
	ps -ef | grep root	# æŸ¥çœ‹ root è¿è¡Œçš„ç¨‹åº
	```
```bash
jobs	    # æ˜¾ç¤º Linux ä¸­çš„ä»»åŠ¡åˆ—è¡¨åŠä»»åŠ¡çŠ¶æ€
	jobs -l		    # æ˜¾ç¤ºè¿›ç¨‹å·
	kill %1			# è¡¨ç¤ºæ€æ‰1å·ä½œä¸šä»»åŠ¡
	fg %1			# è¡¨ç¤ºè®©1å·ä½œä¸šå›åˆ°å‰å°
	bg %1			# è½¬åå°è¿è¡Œ
pidof program	    # æ‰¾å‡º program ç¨‹åºçš„è¿›ç¨‹ PID
pidof -x script     # æ‰¾å‡º shell è„šæœ¬ script çš„è¿›ç¨‹ PID
top					# å®æ—¶åŠ¨æ€åœ°æŸ¥çœ‹ç³»ç»Ÿçš„æ•´ä½“è¿è¡Œæƒ…å†µ
free
free -h				# æ˜¾ç¤ºå½“å‰ç³»ç»Ÿæœªä½¿ç”¨çš„å’Œå·²ä½¿ç”¨çš„å†…å­˜æ•°ç›®
vmstat 1			# æ˜¾ç¤ºè™šæ‹Ÿå†…å­˜çŠ¶æ€
ps					# æŠ¥å‘Šå½“å‰ç³»ç»Ÿçš„è¿›ç¨‹çŠ¶æ€
	ps -aux			# æ˜¾ç¤ºç°åœ¨æ‰€æœ‰ç”¨æˆ·æ‰€æœ‰ç¨‹åº
	# ç”±äºpså‘½ä»¤èƒ½å¤Ÿæ”¯æŒçš„ç³»ç»Ÿç±»å‹ç›¸å½“çš„å¤š,æ‰€ä»¥é€‰é¡¹å¤šçš„ç¦»è°±,è¿™é‡Œç•¥
pidstat -u -p ALL	# æŸ¥çœ‹æ‰€æœ‰è¿›ç¨‹çš„ CPU ä½¿ç”¨æƒ…å†µ
watch 		# ä»¥å‘¨æœŸæ€§çš„æ–¹å¼æ‰§è¡Œç»™å®šçš„æŒ‡ä»¤,æŒ‡ä»¤è¾“å‡ºä»¥å…¨å±æ–¹å¼æ˜¾ç¤º.
	-n : æŒ‡å®šæŒ‡ä»¤æ‰§è¡Œçš„é—´éš”æ—¶é—´(ç§’);
	-d : é«˜äº®æ˜¾ç¤ºæŒ‡ä»¤è¾“å‡ºä¿¡æ¯ä¸åŒä¹‹å¤„;
	-t : ä¸æ˜¾ç¤ºæ ‡é¢˜.
```
**è¿›ç¨‹å¤„ç†**
- kill
	```bash
	# æ€æ­»è¿›ç¨‹
	kill -s 							# åˆ é™¤æ‰§è¡Œä¸­çš„ç¨‹åºæˆ–å·¥ä½œ
		kill -l								# æ˜¾ç¤ºä¿¡å·
		kill -HUP 						# æ›´æ”¹é…ç½®è€Œä¸éœ€åœæ­¢å¹¶é‡æ–°å¯åŠ¨æœåŠ¡
		kill -9  && kill -KILL 	# ä¿¡å·(SIGKILL)æ— æ¡ä»¶ç»ˆæ­¢è¿›ç¨‹
	killall 							# ä½¿ç”¨è¿›ç¨‹çš„åç§°æ¥æ€æ­»è¿›ç¨‹
	```
- pkill
	```bash
	# pkill ç”¨äºæ€æ­»ä¸€ä¸ªè¿›ç¨‹ï¼Œä¸ kill ä¸åŒçš„æ˜¯å®ƒä¼šæ€æ­»æŒ‡å®šåå­—çš„æ‰€æœ‰è¿›ç¨‹
	pkill -9 php-fpm	# ç»“æŸæ‰€æœ‰çš„ php-fpm è¿›ç¨‹
	```
```bash
ctrl+z	# å°†å‰å°è¿è¡Œçš„ä»»åŠ¡æš‚åœ,ä»…ä»…æ˜¯æš‚åœ,è€Œä¸æ˜¯å°†ä»»åŠ¡ç»ˆæ­¢.
bg		# è½¬åå°è¿è¡Œ
fg		# è½¬å‰å°è¿è¡Œ
```
```bash
cmdline
# åœ¨Linuxç³»ç»Ÿä¸­,æ ¹æ®è¿›ç¨‹å·å¾—åˆ°è¿›ç¨‹çš„å‘½ä»¤è¡Œå‚æ•°,å¸¸è§„çš„åšæ³•æ˜¯è¯»å– /proc/{PID}/cmdline,å¹¶ç”¨'\0'åˆ†å‰²å…¶ä¸­çš„å­—ç¬¦ä¸²å¾—åˆ°è¿›ç¨‹çš„ args[],ä¾‹å¦‚ä¸‹é¢è¿™ä¸ªä¾‹å­:
	# xxd /proc/7771/cmdline
	0000000: 2f69 746f 612f 6170 702f 6d61 7665 2f62  /itoa/app/mave/b
	0000010: 696e 2f6d 6176 6500 2d70 002f 6974 6f61  in/mave.-p./itoa
	0000020: 2f61 7070 2f6d 6176 6500                 /app/mave.
	é€šè¿‡åˆ†å‰²å…¶ä¸­çš„ 0x00(C è¯­è¨€å­—ç¬¦ä¸²ç»“æŸç¬¦),å¯ä»¥æŠŠè¿™ä¸ªè¿›ç¨‹ args[],è§£æå‡ºæ¥:
	args[0]=/itoa/app/mave/bin/mave
	args[1]=-p
	args[2]=/itoa/app/mave
```
**ä¸æŒ‚æ–­åœ°è¿è¡Œå‘½ä»¤**
- nohup
	```bash
	# nohup å‘½ä»¤è¿è¡Œç”± Command å‚æ•°å’Œä»»ä½•ç›¸å…³çš„ Arg å‚æ•°æŒ‡å®šçš„å‘½ä»¤, å¿½ç•¥æ‰€æœ‰æŒ‚æ–­ (SIGHUP) ä¿¡å·. åœ¨æ³¨é”€åä½¿ç”¨ nohup å‘½ä»¤è¿è¡Œåå°ä¸­çš„ç¨‹åº. è¦è¿è¡Œåå°ä¸­çš„ nohup å‘½ä»¤, æ·»åŠ  & ( è¡¨ç¤º "and" çš„ç¬¦å·)åˆ°å‘½ä»¤çš„å°¾éƒ¨.
	nohup [COMMAND] &			# ä½¿å‘½ä»¤æ°¸ä¹…çš„åœ¨åå°æ‰§è¡Œ
	# e.g.
		sh test.sh &		# å°† sh test.sh ä»»åŠ¡æ”¾åˆ°åå° , å…³é—­ xshell, å¯¹åº”çš„ä»»åŠ¡ä¹Ÿè·Ÿç€åœæ­¢.
		nohup sh test.sh	# å°† sh test.sh ä»»åŠ¡æ”¾åˆ°åå°, å…³é—­æ ‡å‡†è¾“å…¥, ç»ˆç«¯ä¸å†èƒ½å¤Ÿæ¥æ”¶ä»»ä½•è¾“å…¥(æ ‡å‡†è¾“å…¥), é‡å®šå‘æ ‡å‡†è¾“å‡ºå’Œæ ‡å‡†é”™è¯¯åˆ°å½“å‰ç›®å½•ä¸‹çš„ nohup.out æ–‡ä»¶, å³ä½¿å…³é—­ xshell é€€å‡ºå½“å‰ session ä¾ç„¶ç»§ç»­è¿è¡Œ.
		nohup sh test.sh  &	# å°† sh test.sh ä»»åŠ¡æ”¾åˆ°åå°, ä½†æ˜¯ä¾ç„¶å¯ä»¥ä½¿ç”¨æ ‡å‡†è¾“å…¥, ç»ˆç«¯èƒ½å¤Ÿæ¥æ”¶ä»»ä½•è¾“å…¥, é‡å®šå‘æ ‡å‡†è¾“å‡ºå’Œæ ‡å‡†é”™è¯¯åˆ°å½“å‰ç›®å½•ä¸‹çš„ nohup.out æ–‡ä»¶, å³ä½¿å…³é—­ xshell é€€å‡ºå½“å‰ session ä¾ç„¶ç»§ç»­è¿è¡Œ.
	```
- setsid
	```bash
	# setsid ä¸»è¦æ˜¯é‡æ–°åˆ›å»ºä¸€ä¸ª session,å­è¿›ç¨‹ä»çˆ¶è¿›ç¨‹ç»§æ‰¿äº† SessionIDã€è¿›ç¨‹ç»„ ID å’Œæ‰“å¼€çš„ç»ˆç«¯,å­è¿›ç¨‹å¦‚æœè¦è„±ç¦»çˆ¶è¿›ç¨‹,ä¸å—çˆ¶è¿›ç¨‹æ§åˆ¶,æˆ‘ä»¬å¯ä»¥ç”¨è¿™ä¸ª setsid å‘½ä»¤
		setsid [options]  [arguments ...]
			e.g. : setsid ping baidu.com	# setsid åå­è¿›ç¨‹ä¸å—ç»ˆç«¯å½±å“,ç»ˆç«¯é€€å‡º,ä¸å½±å“å­è¿›ç¨‹
			# åˆ«æ€¥,  ps -ef | grep ping ,æ‰¾åˆ° PID kill ç›¸åº”çš„ PID å°±å¯ä»¥å…³æ‰äº†ğŸ˜‚
	```
- disown
	```bash
	# ä½¿ä½œä¸šå¿½ç•¥ HUP ä¿¡å·
	disown [-h] [-ar] [jobspec ... | pid ...]
		# ç¤ºä¾‹1,å¦‚æœæäº¤å‘½ä»¤æ—¶å·²ç»ç”¨"&"å°†å‘½ä»¤æ”¾å…¥åå°è¿è¡Œ,åˆ™å¯ä»¥ç›´æ¥ä½¿ç”¨"disown"
		ping www.baidu.com &
		jobs
		disown -h %1
		ps -ef |grep ping
		# ç¤ºä¾‹2,å¦‚æœæäº¤å‘½ä»¤æ—¶æœªä½¿ç”¨"&"å°†å‘½ä»¤æ”¾å…¥åå°è¿è¡Œ,å¯ä½¿ç”¨ CTRL-z å’Œ"bg"å°†å…¶æ”¾å…¥åå°,å†ä½¿ç”¨"disown"
		ping www.baidu.com
		bg %1
		jobs
		disown -h %1
		ps -ef |grep ping
	```
æ›´å¤šè¿›ç¨‹ç®¡ç†å†…å®¹å‚è€ƒç¬”è®° [è¿›ç¨‹](./ç¬”è®°/è¿›ç¨‹.md)
---
### å†…æ ¸ç®¡ç†
**rmmod**
ç”¨äºä»å½“å‰è¿è¡Œçš„å†…æ ¸ä¸­ç§»é™¤æŒ‡å®šçš„å†…æ ¸æ¨¡å—ã€‚æ‰§è¡Œ rmmod æŒ‡ä»¤ï¼Œå¯åˆ é™¤ä¸éœ€è¦çš„æ¨¡å—ã€‚
```bash
rmmod [options] [arguments ...]
# é€‰é¡¹é‡Šä¹‰
	# -vï¼šæ˜¾ç¤ºæŒ‡ä»¤æ‰§è¡Œçš„è¯¦ç»†ä¿¡æ¯ï¼›
	# -fï¼šå¼ºåˆ¶ç§»é™¤æ¨¡å—ï¼Œä½¿ç”¨æ­¤é€‰é¡¹æ¯”è¾ƒå±é™©ï¼›
	# -wï¼šç­‰å¾…ç€ï¼Œç›´åˆ°æ¨¡å—èƒ½å¤Ÿè¢«é™¤æ—¶åœ¨ç§»é™¤æ¨¡å—ï¼›
	# -sï¼šå‘ç³»ç»Ÿæ—¥å¿—ï¼ˆsyslogï¼‰å‘é€é”™è¯¯ä¿¡æ¯ã€‚
# e.g.
	lsmod | grep raid1
	rmmod raid1			# å¸è½½æ­£åœ¨ä½¿ç”¨çš„Linuxå†…æ ¸æ¨¡å—
	# è­¦å‘Š : åœ¨ä½ ä¸ç¡®å®šè¿™ä¸ªå†…æ ¸æ¨¡å—æ˜¯å¹²ä»€ä¹ˆçš„ä¹‹å‰,ä¸è¦å¸è½½
```
**dmesg**
dmesg å¯ç”¨äºæ‰¾å‡ºå†…æ ¸æœ€æ–°æ¶ˆæ¯ä¸­çš„é”™è¯¯å’Œè­¦å‘Š
```bash
dmesg | less
```
**nmi_watchdog**
â€œçœ‹é—¨ç‹—NMIä¸­æ–­â€çš„æœºåˆ¶ã€‚ï¼ˆNMIï¼šNon Maskable Interrupt. è¿™ç§ä¸­æ–­å³ä½¿åœ¨ç³»ç»Ÿè¢«é”ä½æ—¶ï¼Œä¹Ÿèƒ½è¢«å“åº”ï¼‰ã€‚è¿™ç§æœºåˆ¶å¯ä»¥è¢«ç”¨æ¥è°ƒè¯•å†…æ ¸é”ä½ç°è±¡ã€‚é€šè¿‡å‘¨æœŸæ€§åœ°æ‰§è¡ŒNMIä¸­æ–­ï¼Œå†…æ ¸èƒ½å¤Ÿç›‘æµ‹åˆ°æ˜¯å¦æœ‰CPUè¢«é”ä½ã€‚å½“æœ‰å¤„ç†å™¨è¢«é”ä½æ—¶ï¼Œæ‰“å°è°ƒè¯•ä¿¡æ¯ã€‚
```bash
echo '0' >/proc/sys/kernel/nmi_watchdog 			# å…³é—­linux çœ‹é—¨ç‹—
echo 'kernel.nmi_watchdog=0' >>/etc/sysctl.conf   	# é‡å¯è‡ªåŠ¨å…³é—­
```
---
### è®¾å¤‡ç®¡ç†
æ›´å¤šå†…å®¹è§ç¬”è®° [ä¿¡æ¯](./ç¬”è®°/ä¿¡æ¯.md#ç¡¬ä»¶)
#### å†…å­˜
**è™šæ‹Ÿå†…å­˜**
```bash
free -h	# æŸ¥çœ‹ swap åˆ†åŒº
vmstat
swapon -s
```
å¦‚æœæœºå™¨æ²¡æœ‰å®‰è£… swap åˆ†åŒºå¯ä»¥è‡ªå·±åˆ†é…ä¸€ä¸ª
```bash
# åˆ›å»ºä¸€ä¸ª swap æ–‡ä»¶, å¤§å°ä¸º 1G
dd if=/dev/zero of=/home/f8xswap bs=1M count=1024
# å°†æ–‡ä»¶æ ¼å¼è½¬æ¢ä¸º swap æ ¼å¼çš„
mkswap /home/f8xswap
# æŠŠè¿™ä¸ªæ–‡ä»¶åˆ†åŒºæŒ‚è½½ swap åˆ†åŒº
swapon /home/f8xswap
```
é•¿æœŸæŒ‚è½½
```
echo "/home/f8xswap swap swap default 0 0" >> /etc/fstab