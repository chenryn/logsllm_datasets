total-memory-size-check Gb {kill | log}
}
Parameter Description
fpga-buff-recovery-threshold Minimum required number of free (available) FPGA buffers. If the num-
256-buffer-units ber of free buffers remains below this value until the recovery timeout,
fail-safe software recovery is triggered.
You can specify 1-10 units. Each unit contains 256 buffers.
The default is 2 units (512 buffers).
hw-error-monitor-disable Disables fail-safe monitoring and recovery for hardware errors.
This is enabled by default.
hw-error-monitor-enable Enables fail-safe monitoring and recovery for hardware errors.
This is enabled by default.
hw-error-recovery-timeout minutes Number of minutes fail-safe waits after a hardware error occurs to
reboot the ACOS device. You can specify 1-1440 minutes.
The default is 0 (not set).
session-memory-recovery-threshold Minimum required percentage of system memory that must be free. If
percentage the amount of free memory remains below this value long enough for
the recovery timeout to occur, fail-safe software recovery is triggered.
You can specify 1-100 percent. The default is 30 percent.
sw-error-monitor-enable Enables fail-safe monitoring and recovery for software errors.
This is disabled by default.
sw-error-recovery-timeout minutes Number of minutes (1-1440) the software error condition must remain
in effect before fail-safe occurs:
• If the system resource that is low becomes free again within the
recovery timeout period, fail-safe allows the ACOS device to continue
normal operation. Fail-safe recovery is not triggered.
• If the system resource does not become free, then fail-safe recovery is
triggered.
The default timeout is 3 minutes.
total-memory-size-check Gb Amount of memory the device must have after booting.
{kill | log}
• Gb - Minimum amount of memory required.
• kill – Stops data traffic and generates a message. However, the
management port remains accessible.
• log – Generates a log message but does not stop data traffic.
Default By default, fail-safe automatic recovery is enabled for hardware errors and disabled for soft-
ware errors. You can enable the feature for hardware errors, software errors, or both. When
Document No.: 410-P2-CLI-001 - 6/17/2016 | page 122
A10 Thunder Series and AX Series—Command Line Interface Reference
you enable the feature, the other options have the default values described in the table
above.
Mode Configuration mode
Usage Fail-safe hardware recovery also can be triggered by a “PCI not ready” condition. This fail-safe
recovery option is enabled by default and can not be disabled.
fw
Description Configuration commands for DC Firewall.
For more information, refer to the Data Center Firewall Guide.
glid
Description Configure a global set of IP limiting rules for system-wide IP limiting.
NOTE: This command configures a limit ID (LID) for use with the IP limiting feature. To con-
figure a LID for use with Large-Scale NAT (LSN) instead, see the IPv4-to-IPv6 Transi-
tion Solutions Guide.
Syntax [no] glid num
Replace num with the limit ID (1-1023).
This command changes the CLI to the configuration level for the specified global LID, where
the following command is available.
(The other commands are common to all CLI configuration levels. See “Config Commands:
Global” on page61.)
Command Description
[no] conn-limit num Specifies the maximum number of concurrent connections allowed for a client. You
can specify 0-1048575. Connection limit 0 immediately locks down matching cli-
ents.
There is no default value set for this parameter.
[no] conn-rate-limit num Specifies the maximum number of new connections allowed for a client within the
per num-of-100ms specified limit period. You can specify 1-4294967295 connections. The limit period
can be 100-6553500 milliseconds (ms), specified in increments of 100 ms.
There is no default value set for this parameter.
[no] dns options Configure settings for IPv4 DNS features.
[no] dns64 options Configure settings for IPv6 DNS features.
page 123 | Document No.: 410-P2-CLI-001 - 6/17/2016
A10 Thunder Series and AX Series—Command Line Interface Reference
Command Description
[no] over-limit-action Specifies the action to take when a client exceeds one or more of the limits. The
[forward | reset] command also configures lockout and enables logging. Action can include:
[lockout minutes]
• drop – The ACOS device drops that traffic. If logging is enabled, the ACOS device
[log minutes]
also generates a log message. (There is no drop keyword; this is default action.)
• forward – The ACOS device forwards the traffic. If logging is enabled, the ACOS
device also generates a log message.
• reset – For TCP, the ACOS device sends a TCP RST to the client. If logging is
enabled, the ACOS device also generates a log message.
The lockout option specifies the number of minutes during which to apply the
over-limit action after the client exceeds a limit. The lockout period is activated
when a client exceeds any limit. The lockout period can be 1-1023 minutes. There is
no default lockout period.
The log option generates log messages when clients exceed a limit. When you
enable logging, a separate message is generated for each over-limit occurrence, by
default. You can specify a logging period, in which case the ACOS device holds
onto the repeated messages for the specified period, then sends one message at
the end of the period for all instances that occurred within the period. The logging
period can be 0-255 minutes. The default is 0 (no wait period).
[no] request-limit num Specifies the maximum number of concurrent Layer 7 requests allowed for a client.
You can specify 1-1048575.
[no] request-rate-limit Specifies the maximum number of Layer 7 requests allowed for the client within
num per num-of-100ms the specified limit period. You can specify 1-4294967295 connections. The limit
period can be 100-6553500 milliseconds (ms), specified in increments of 100 ms.
[no] use-nat-pool Binds a NAT pool to the GLID. The pool is used to provide reverse NAT for class-list
pool-name members that are mapped to this GLID. (The use-nat-pool option, available in
GLIDs, is applicable only to transparent traffic, not to SLB traffic.)
Default See descriptions in the table.
Mode Configuration mode
Usage This command uses a single class list for IP limiting. To use multiple class lists for system-wide
IP limiting, use a policy template instead. See the “slb template policy” command in the Com-
mand Line Interface Reference for ADC.
Differences Between GLIDs and LIDs
A Global Limit ID (GLID) is an ID that identifies a set of limiting rules configured globally. This
ID is included in a class-list, as shown in the following example:
glid 10
request-limit 100
class-list HTTP-RL
10.100.0.0/16 lid 1
10.2.0.0/16 lid 2
0.0.0.0/0 glid 10
Document No.: 410-P2-CLI-001 - 6/17/2016 | page 124
A10 Thunder Series and AX Series—Command Line Interface Reference
The limiting rules within a GLID can be reused in different class-list objects, unlike a Local
Limit ID (LID).
A LID is an ID that identifies a set of limiting rules configured inside an SLB template of a
certain type, such as an SLB policy template or an SLB DNS template, that support a class-list.
For example:
slb template policy Policy-HTTP-RL
class-list HTTP-RL
lid 1
request-limit 1000
lid 2
request-limit 10
A local limit ID can be used if the same class-list is used for several different VIPs, and if each
VIP has different limiting rules; using the LID eliminates the need to create many class-lists.
Note that GLIDs and LIDs are optional configurations within a class-list, and they are not
required if the class-list is used as a black-list or a white-list.
Additional Usage Information about GLIDs and LIDs
A policy template is also required if you plan to apply IP limiting rules to individual virtual
servers or virtual ports.
The request-limit and request-rate-limit options apply only to HTTP, fast-HTTP,
and HTTPS virtual ports. For details on configuring these options, see “Request Limiting and
Request-Rate Limiting in Class Lists” on page101.
The over-limit-action log option, when used with the request-limit or
request-rate-limit option, always lists Ethernet port 1 as the interface.
The use-nat-pool option is applicable only to transparent traffic, not to SLB traffic.
Example The following commands configure a global IP limiting rule to be applied to all IP clients (the
clients that match class list “global”):
ACOS(config)#glid 1
ACOS(config-glid:1)#conn-rate-limit 10000 per 1
ACOS(config-glid:1)#conn-limit 2000000
ACOS(config-glid:1)#over-limit forward logging
ACOS(config-glid:1)#exit
ACOS(config)#system glid 1
ACOS(config)#class-list global
ACOS(config-class list)#0.0.0.0/0 glid 1
page 125 | Document No.: 410-P2-CLI-001 - 6/17/2016
A10 Thunder Series and AX Series—Command Line Interface Reference
glm
Description Manually enable a connection to the Global License Manager.
Syntax [no] glm enable-requests
Default Disabled
Mode Configuration mode
The other glm commands are for internal use and testing purposes only.
gslb
Description Configure Global Server Load Balancing (GSLB) parameters. See the Global Server Load Bal-
ancing Guide.
hd-monitor enable
Description Enable hard disk monitoring on your ACOS device.
Syntax [no] hd-monitor enable
Default Hard disk monitoring is disabled by default.
Mode Configuration mode
Example The example below shows how to enable hard disk monitoring.
ACOS(config)#hd-monitor enable
Harddisk monitoring turned on.
Please write mem and reload to take effect.
ACOS(config)#
health global
Description Globally change health monitor parameters.
Syntax health global
Document No.: 410-P2-CLI-001 - 6/17/2016 | page 126
A10 Thunder Series and AX Series—Command Line Interface Reference
This command changes the CLI to the configuration level for global health monitoring
parameters, where the following commands are available.
Parameter Description
[no] health check-rate threshold Change the health-check rate limiting threshold.
Replace threshold with the maximum number of health-check pack-
ets the ACOS device will send in a given 500-millisecond (ms) period.
The valid range is 1-5000 health-check packets per 500-ms period.
When you disable auto-adjust mode, the default threshold is 1000
health-check packets per 500-ms period.
When auto-adjust mode is enabled, you can not manually change the
threshold. To change the threshold, you first must disable auto-adjust
mode. (See below.)
[no] health disable-auto-adjust Disable the auto-adjust mode of health-check rate limiting.
When necessary, the auto-adjust mode dynamically increases the default
interval and timeout for health checks. By increasing these timers, health-
check rate limiting provides more time for health-check processing.
Auto-adjust mode is enabled by default.
[no] health external-rate scripts Specify the maximum number of external health-checks scripts the
per 100-ms-units ACOS device is allowed to perform during a given interval.
• scripts – Maximum number of external health-check scripts, 1-999.
• 100-ms-units – Interval to which the scripts option applies, 1-20
100-ms units.
The default rate is 2 scripts every 200 ms.
interval seconds Number of seconds between health check attempt, 1-180 seconds. A
health check attempt consists of the ACOS device sending a packet to
the server. The packet type and payload depend on the health monitor
type. For example, an HTTP health monitor might send an HTTP GET
request packet. Default is 5 seconds.
multi-process cpus Enable use of multiple CPUs for processing health checks.
Replace cpus with the total number of CPUs to use for processing health
checks.
The default is 1.
retry number Maximum number of times ACOS will send the same health check to an
unresponsive server before determining that the server is down. You can
specify 1-5. Default is 3.
timeout seconds Number of seconds ACOS waits for a reply to a health check, 1-12 sec-
onds. Default is 5 seconds.
up-retry number Number of consecutive times the device must pass the same periodic
health check, in order to be marked Up. You can specify 1-10. The default
is 1.
NOTE: The timeout parameter is not applicable to external health monitors.
page 127 | Document No.: 410-P2-CLI-001 - 6/17/2016
A10 Thunder Series and AX Series—Command Line Interface Reference
You can change one or more parameters on the same command line.
Default See above.
NOTE: To change a global parameter back to its factory default, use the “no” form of the
command (for example: no up-retry 10).
Mode Configuration mode
Usage Globally changing a health monitor parameter changes the default for that parameter. For
example, if you globally change the interval from 5 seconds to 10 seconds, the default inter-
val becomes 10 seconds.
If a parameter is explicitly set on a health monitor, globally changing the parameter does not
affect the health monitor. For example, if the interval on health monitor hm1 is explicitly set
to 20 seconds, the interval remains 20 seconds on hm1 regardless of the global setting.
NOTE: Global health monitor parameter changes automatically apply to all new health
monitors configured after the change. To apply a global health monitor parameter
change to health monitors that were configured before the change, you must
reboot the ACOS device.
Example The following command globally changes the default number of retries to 5:
ACOS(config)# health global retry 5
Example The following command globally changes the timeout to 10 seconds and default number of
retries to 4:
ACOS(config)# health global timeout 10 retry 4
health monitor
Description Configure a health monitor.
Syntax [no] health monitor monitor-name
Document No.: 410-P2-CLI-001 - 6/17/2016 | page 128
A10 Thunder Series and AX Series—Command Line Interface Reference
The monitor-name can be 1-29 characters. This command changes the CLI to the
configuration level for the health monitor.
Default See the “Health Monitoring” chapter in the Application Delivery and Server Load Balancing
Guide for information on the defaults.
Mode Configuration mode
Usage For information about the commands available at the health-monitor configuration level,
see “Config Commands: Health Monitors” on page547.
health-test
Description Test the status of a device at a specified IP address using a defined health monitor.
To configure a health monitor, use the health monitor command.
Syntax health-test ipaddr [count num] [monitorname name] [port portnum]
Parameter Description
ipaddr IPv4 or IPv6 address of the device you want to test.
count num Wait for count tests (1-65535).
The default count is 1.
monitorname name Specify the pre-configured health monitor to use for the test.
port portnum Specify the port to test.
Mode Configuration mode
hostname
Description Set the ACOS device’s hostname.
Syntax [no] hostname string
Replace string with the desired hostname (1-31 characters). The name can contain any
alpha-numeric character (a-z, A-Z, 0-9), hypen (-), period (.), or left or right parentheses
characters.
Default The default hostname is the name of the device; for example, an AX Series 5630 device will
have “AX5630” as the default hostname.
Mode Configuration mode
Usage The CLI command prompt also is changed to show the new hostname.
If the ACOS device is a member of an aVCS virtual chassis, use the device-context
command to specify the device in the chassis to which to apply this command.
page 129 | Document No.: 410-P2-CLI-001 - 6/17/2016
A10 Thunder Series and AX Series—Command Line Interface Reference
Example The following example sets the hostname to “SLBswitch2”:
ACOS(config)# hostname SLBswitch2
SLBswitch2(config)#
hsm template
Description Configure a template for DNSSEC Hardware Security Module (HSM) support.
Syntax [no] hsm template template-name {softHSM | thalesHSM}
Replace template-name with the name of the template (1-63 characters).
This command changes the CLI to the configuration level for the specified template, where
the following command is available:
password hsm-passphrase
This command configures the HSM passphrase.
(The other commands are common to all CLI configuration levels. See “Config Commands:
Global” on page61.)
Default Not set
Mode Configuration mode
icmp-rate-limit
Description Configure ICMP rate limiting, to protect against denial-of-service (DoS) attacks.
Syntax [no] icmp-rate-limit normal-rate lockup max-rate lockup-time
Parameter Description
normal-rate Maximum number of ICMP packets allowed per second. If the ACOS device receives more
than the normal rate of ICMP packets, the excess packets are dropped until the next one-sec-
ond interval begins. The normal rate can be 1-65535 packets per second.
lockup max-rate Maximum number of ICMP packets allowed per second before the ACOS device locks up
ICMP traffic. When ICMP traffic is locked up, all ICMP packets are dropped until the lockup
expires. The maximum rate can be 1-65535 packets per second. The maximum rate must be
larger than the normal rate.
lockup-time Number of seconds for which the ACOS device drops all ICMP traffic, after the maximum rate
is exceeded. The lockup time can be 1-16383 seconds.
Default None
Mode Configuration mode
Usage This command configures ICMP rate limiting globally for all traffic to or through the ACOS
device. To configure ICMP rate limiting on individual Ethernet interfaces, see the icmp-
Document No.: 410-P2-CLI-001 - 6/17/2016 | page 130
A10 Thunder Series and AX Series—Command Line Interface Reference
rate-limit command in the “Config Commands: Interface” chapter in the Network Config-
uration Guide. To configure it in a virtual server template, see “slb template virtual-server” on
page259. If you configure ICMP rate limiting filters at more than one of these levels, all filters
are applicable.
Specifying a maximum rate (lockup rate) and lockup time is optional. If you do not specify
them, lockup does not occur.
Log messages are generated only if the lockup option is used and lockup occurs. Otherwise,
the ICMP rate-limiting counters are still incremented but log messages are not generated.
Example The following command globally configures ICMP rate limiting to allow up to 2048 ICMP
packets per second, and to lock up all ICMP traffic for 10 seconds if the rate exceeds 3000
ICMP packets per second:
ACOS(config)#icmp-rate-limit 2048 lockup 3000 10
icmpv6-rate-limit
Description Configure ICMPv6 rate limiting for IPv6 to protect against denial-of-service (DoS) attacks.
Syntax [no] icmpv6-rate-limit normal-rate lockup max-rate lockup-time
Parameter Description
normal-rate Maximum number of ICMPv6 packets allowed per second. If the ACOS device receives more
than the normal rate of ICMPv6 packets, the excess packets are dropped until the next one-
second interval begins. The normal rate can be 1-65535 packets per second.
lockup max-rate Maximum number of ICMPv6 packets allowed per second before the ACOS device locks up
ICMPv6 traffic. When ICMPv6 traffic is locked up, all ICMPv6 packets are dropped until the
lockup expires. The maximum rate can be 1-65535 packets per second. The maximum rate
must be larger than the normal rate.
lockup-time Number of seconds for which the ACOS device drops all ICMPv6 traffic, after the maximum rate
is exceeded. The lockup time can be 1-16383 seconds.
Default None
Mode Configuration mode
Usage This command configures ICMPv6 rate limiting globally for all traffic to or through the ACOS
device. To configure ICMPv6 rate limiting on individual Ethernet interfaces, see the icmpv6-
rate-limit command in the “Config Commands: Interface” chapter in the Network Config-
uration Guide. To configure it in a virtual server template, see “slb template virtual-server” on
page259. If you configure ICMPv6 rate limiting filters at more than one of these levels, all fil-
ters are applicable.
Specifying a maximum rate (lockup rate) and lockup time is optional. If you do not specify
them, lockup does not occur.
Log messages are generated only if the lockup option is used and lockup occurs. Otherwise,
the ICMPv6 rate-limiting counters are still incremented but log messages are not generated.
page 131 | Document No.: 410-P2-CLI-001 - 6/17/2016
A10 Thunder Series and AX Series—Command Line Interface Reference