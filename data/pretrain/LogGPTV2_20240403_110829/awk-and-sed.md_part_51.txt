## Page 377
plpr一行式打印的预处理器
可用的或哪个是最不忙的。然后调用lpr将这个作业送给该打印机）。
的打印机是否可用。如果不能用，它测试一系列的打印机，以确定其中那个是
可以在使用lpr的地方使用这个命令。它读取lpq命令的输出结果，以确定指定
输出发送到“最好的”打印机（这个shelI脚本是为BSD或LINUX系统编写的，你
我想你可能会将下面的脚本用于办公。他是一个行式打印的预处理器，用于将
们可以使它们转移到相同的循环中。
条目。即使这两个正则表达式都是必要的，标记为x和y的循环也是相同的，我
有必要的。第一个匹配在行的开始处的条目，第二个匹配行中任何其他地方的
这个脚本可以用几种方法简化。第一，用两个正则表达式来提取条目似乎是没
令传递到程序中，与替换反斜杠和空格的替换命令一样。
这个脚本展示了如何将shell变量传递给一个sed脚本。变量用于将可选的sed命
什么是一项艰苦的任务。
其他的程序都容易理解。从上面所显示的这个小的sed程序来断定出它正在处理
当你习惯了阅读awk脚本时，他们看起来好像除了最简单的sed脚本外，比任何
程序gent的注意事项
由TomVanRaalte提供
TMP=/tmp/pr intsum. $ 
#设置临时文件
#!/bin/sh
#
}"$ !$. oyoa
BEGIN{
1 Ni938 . yme | !$d- bdl, =le> 
END{
(start == 1) {
 print summ;
 summ=summ+$1; 
 summ=0;
 start=0;
print test;
test=substr ($0,62,20)
next;
start=1;
QQ群：
awk
50192241
398
第十三章 
脚本的汇总
---
## Page 381
含空白字符的文件名。
那么awk将从标准输入中读取。这个方式比纯粹的$*要好，因为后者不能处理包
我的脚本使用$[1+”$@””在awk命令行中给出文件名，如果没有提供文件名，
到构造被转置的矩阵的行是比较快的，
程序transpose的任务是对输入矩阵进行转置。我编写这个程序是因为当我看到
由Geoff Clare提供
transpose一实现矩阵的转置
的元素单独存储，
序在时间上相比比那个程序有了改善。如果我没有记错，那个原始版本将所有
了寄给Net的一个处理这个工作的程序，但它的效率低的可怕。我基础的这个程
另外应注意，在末尾处的trap语句应在脚本的起始位置，而不是在底部。
命令的输出并做数字比较就是这些任务的一个例子。
本来编写的。
多数情况下，
程序plpr的注意事项
# of fields
NR == 1 
execawk
共
#! /bin/sh 
trap′rm -f $TMP; exit 99’ 23 15
Ipr -P$SELECT $*
#fi
#响应"输出重定向到打印机$i"
#那么
#如果［ $SELECT != $LASERWRITER ］
#现在在选定的打印机上打印
rm $STMP 
#
#echo $SELECT
一个矩阵的转置：假设所有的行都有相同数量的字段
for (i = 1; i n)
二
 print row[i]
row[i]=row[i]
 n= NF
QQ群：
50192241
400
以及他的文章的初稿（我得到已发表
第十三章 
脚本的汇总
---
## Page 383
下一版本（mOb）添加了文件包含功能：
部分是宏的主体。
用来区别被指示的行，并且也标识存在应该扩展的宏。
以下是Jon在一个非常简单的宏处理器中的第一个剪切块。他所做的就是定义和
m4简单的多，很容易学习和应用。
如果你是一个C或C++程序员，
权衡这个版本的简单性与程序运行时间。
定
这个版本寻找以“@define”开始的行。关键词是$1，
扩
易掌握，
统
7
义的宏，在输入行用宏的主体对每个宏做全局替换，然后打印这行。请仔细
展宏。我们将它命名为mOa。在这部分和后面的程序中，
基于宏处理器，能够出现的注释行将被从最终的输出中删除。
通常根据是否定义了宏。
有条件的包含和排除文本。文本的不同部分可以被包含在最终的输出中，这
是可以嵌套的，
包含文件。在数据文件中的特殊包含命令被命名文件的内容取代。包含通常
的主体代替
定义和扩展宏。宏包含两部分，
function dofile(fname)
/^@define[\t]/ 
while (getline o)
，名字和主体。在宏的名字出现的地方都用它
# @include 文件名
# @define name 的值
第十三章
宏名设置为$2。行的剩余
“at”符号（@）被
脚本的汇总
---
## Page 384
介绍了以上实现方法后，
注意，
#
#
#
#
共
#
#
#
#!/bin/awk -f
BEGIN {
H
#
#
#
#
#
@if varname
M1将它的输入文件无改变地复制到输出，除非
awk -f m1.awk [file...]
名字
通过递归调用dofile()来处理嵌套包含文件。
@fi 
@unless varname
@include filename
@default name value
@define name value
@@
@comment Any text 
被某个“宏表达式“更改了。下面的行为后续的处理定义宏：
描述
用法
三
else 
if 