(5-20 dB) and high (>20 dB) SNRs. (d)-(f) Measures the throughput, latency and number of transmissions for Choir and the LoRaWAN baseline across number of
users.
9.3 Extending Range of LP-WANs
In this experiment, we evaluate the promise of Choir in extending
the range of low-power networks in urban settings.
Method: We consider two or more nodes in our testbed physi-
cally separated by the USRP base station by a given distance and
transmitting identical data. In particular, we focus on locations of
nodes from which signals cannot reach the base station, even at the
minimum data rate of LoRaWAN. We then progressively increase
the number of sensors situated at randomly chosen positions in
the testbed that collide at any time. We group the observed data
based on the minimum distance between the nodes that collide and
the base station. We measure two quantities: (1) the throughput
achieved by teams of these sensors in transmitting the desired data
sequence, as the number of sensors broadcasting identical data
increase across a range of distances (and SNR) between the base
station and clients; (2) the maximum distance of the closest trans-
mitter whose collisions were decodable when it collaborates using
Choir with different number of other transmitters to reach the base
station.
Results: Fig. 9(a) measures the throughput of various numbers of
LoRaWAN clients coordinating to transmit a given data sequence
to the base station. We chose these clients so that individually,
their throughput to the base station is zero even at the lowest data
rate. However, collectively their throughput increases substantially
with teams of up to 30 nodes transmitting at data rates as high as
5470 bps. This is because as larger teams of clients collide, their
signals are received at greater power, allowing these clients to
transmit at higher data rates. Next, we study the impact of this on
the range of the LP-WAN network. Fig. 9(b) plots the maximum
of the distance of the closest transmitter to a base station, as it
collaborates with teams of other transmitters to reach the base
station. We observe that while one client in the network could
reach at best a distance of 1 km – a fairly low quantity, in part due
to the tall buildings and hilly topography of CMU campus as well
as hardware limitations of the USRP’s receive chain [35]. Under
identical hardware constraints, teams of colliding 30 clients using
Choir could reach the base station even when the closest of them
was 2.65km away, an improvement of 2.65 ×.
9.4 Exploiting Correlated Sensor Data
In this experiment, we evaluate Choir’s ability to exploit transmis-
sion of sensor data that is spatially correlated
Method: We leverage a testbed of sensor nodes placed in four
different floors of across two large buildings in CMU campus (Fig. 6
plots the sensor locations). Each sensor measures both temperature
and humidity values in the room in which they are placed. We
co-locate 36 LP-WAN radios with these sensors and transmit. These
sensors transmit periodically at a rate of 1 reading per minute. We
then measure the network throughput and resolution of the sensor
data from the base station.
Results: Fig. 11(a) plots the mean percentage error of the observed
sensor data against the true values, for sensors grouped together
using different strategies – randomly, by floor and by relative dis-
tance from the center of the floor. We find that the relative distance
from the center of the floor to be an excellent method to group
together sensors. This stems from the fact that the farther away
these sensors are from the center of the building, the closer they
are to the outside temperature (or humidity). Next, we evaluate the
end-to-end performance of our system compared to the LoRaWAN
baselines. Specifically, our system schedules transmissions from
groups of sensors that are beyond the range of the LP-WAN base
station, while allowing nearby sensor nodes to transmit data as
319
 0 5000 10000 15000 20000 25000 30000 35000LowMediumHighNetwork Thrpt (bits/sec)SNRALOHAOracleChOIR 0 0.2 0.4 0.6 0.8 1 1.2 1.4LowMediumHighLatency/Packet (secs)SNRALOHAOracleChOIR 0 1 2 3 4 5 6 7 8LowMediumHigh# Transmissions/PacketSNRALOHAOracleChOIR 0 20000 40000 60000 80000 100000 120000 140000 2 3 4 5 6 7 8 9 10Network Thrpt (bits/sec)# UsersIdealALOHAOracleChOIR 0 500000 1x106 1.5x106 2x106 2.5x106 3x106 3.5x106 4x106 4.5x106 5x106 5.5x106 2 3 4 5 6 7 8 9 10Latency/Packet (uSec)# UsersALOHAOracleChOIR 0 1 2 3 4 5 6 7 2 3 4 5 6 7 8 9 10# Transmissions/Packet# UsersALOHAOracleChOIRSIGCOMM ’17, August 21–25, 2017, Los Angeles, CA, USA
R. Eletreby, D. Zhang, S. Kumar, and O. Yağan
(a)
(b)
Figure 9: Extending LP-WAN Range: Consider concurrent identical transmissions from several LP-
WAN nodes to a single-antenna LP-WAN base station. (a) Measures throughput gain of Choir over the
LoRaWAN baseline systems across SNRs. (b) Measures the physical range achieved given different num-
ber of concurrent users.
Figure 10: Resolution vs. Distance: Measures
the resolution of the sensor data received from
sensors in a given floor across distance.
(a)
(b)
Figure 12: Comparison with MU-MIMO: Mea-
sures the throughput gain of Choir using both
one and 3-antennas against MU-MIMO [40] on a
3-antenna base station.
Figure 11: Exploiting Sensor Data Correlation: (a) Measures the correlation of sensor data (temper-
ature and humidity) by considering three different ways to group them – random, by floor and by dis-
tance. (b) Measures end-to-end network throughput required to convey data over the network for a mix
of sensors, some close and some far from the base station for Choir and baseline systems.
they collect them. We then apply Choir’s algorithms described in
Sec. 7.2 to decode potential collisions as well as to exploit corre-
lation in sensor data to recover overlapping bits from groups of
sensors that are beyond base station’s range. Fig. 11(b) measures
the network throughput of observed sensor data for Choir and the
baseline systems. We note that our system has a gain of 29.3377×
over LoRaWAN+ALOHA and 5.609× over the LoRaWAN+Oracle
baseline. Finally, one may wonder how the resolution of observed
sensor data from sensors beyond communication range varies with
their distance to base station. Fig. 10 plots the mean percentage er-
ror of the recovered sensor data across an increasingly large group
of sensors as we vary their distance to the base station (relative
to the closest sensor). As expected, we observe a gradual decrease
in resolution with distance, with an error of 13.2% for teams of up
to 30 sensors at a distance of at least 2.5km from the base station.
We note that despite the loss in resolution, Choir is far superior to
the baseline systems, where all of these nodes would be beyond
communication range of the base station.
9.5 Effect of Multiple Antennas
We evaluate the performance of Choir relative to MU-MIMO for
a base station with 3-antennas. Fig. 12 plots the network through-
put of a team of 5 sensors transmitting data to the base station
using: (1) Only one receiver antenna and LoRaWAN+ALOHA; (2)
Only one receiver antenna and LoRaWAN+Oracle; (3) All three
antennas and uplink MU-MIMO; (4) Choir using only one receiver
antenna; (5) Choir run on all three antennas and averaging results.
We observe that while MU-MIMO’s gain over standard LoRaWAN
is capped at 9.994 ×(3.04 ×) vs. LoRaWAN(+Oracle), Choir, with
even a single antenna is at 11.07 ×(3.37 ×). Further, the presence of
multiple antennas can be used to further improve Choir’s gain to
13.8489 ×(4.217 ×), demonstrating that its gains are complementary
to MU-MIMO.
10 CONCLUSION
This paper presents Choir, a system that improves throughput and
range of low-power wide area networks in urban environments.
Choir proposes a novel approach that exploits the natural hardware
offsets between low-power nodes to disentangle collisions from
several LP-WAN transmitters using a single-antenna LP-WAN base
station. Further, Choir allows teams of LP-WAN sensor nodes with
correlated data to reach the base station, despite being individually
beyond communication range. Our system is implemented and
deployed on a large outdoor testbed spanning 10 km2 around CMU
campus.
11 ACKNOWLEDGMENT
This work has been supported in part by National Science Founda-
tion through grants CCF-1617934 and CNS-1657318, as well as the
ARCS Foundation and the Michel, E 1968, 1976, and Kathy Doreau
Graduate Fellowship in Electrical and Computer Engineering. We
thank Prof. Dina Katabi, Prof. Peter Steenkiste, Prof. Srinivasan Se-
shan, Prof. Vyas Sekar, Prof. Anthony Rowe, Craig Hesling, Adwait
Dongare, Khushboo Bhatia, and Artur Balanuta for their support
and insights.
320
 0 500 1000 1500 2000 2500 3000 3500 4000<22-67-1112-1617-2121-2526-30Throughput (bits/sec)# Transmitters 500 1000 1500 2000 2500 30001-1011-2021-30Maximum Distance (m)# Transmitters 0 0.05 0.1 0.15 0.2 0.25 0 500 1000 1500 2000 2500 3000Avg Normalized Error/UserDistance (m)HumidityTemperature 0.05 0.1 0.15 0.2 0.25 0.3 0.35 0.4RandomFloorCenter Dist.ErrorHumidityTemperature 0 5000 10000 15000 20000 25000 30000 35000 40000ALOHAOracleChOIRThroughput (bits/s) 0 2000 4000 6000 8000 10000 12000 14000 16000ALOHAOracleMU-MIMOChOIRChOIR+MU-MIMOThroughput (bits/s)Empowering Low-Power Wide Area Networks in Urban Settings
SIGCOMM ’17, August 21–25, 2017, Los Angeles, CA, USA
[28] LoRA Alliance. 2016. LoRaWAN for Developers. (2016). https://www.lora-alliance.
org/For-Developers/LoRaWANDevelopers.
Vol. 28. Addison-Wesley Reading, MA.
[29] David G Luenberger. 1973. Introduction to linear and nonlinear programming.
[30] Chong Luo, Feng Wu, Jun Sun, and Chang Wen Chen. 2009. Compressive data
gathering for large-scale wireless sensor networks. In Proc. of ACM Mobicom
2009. 145–156.
[31] SigFox Network. 2016. SigFox Technical White Paper. (2016).
[32] Chen Qian, Yunhuai Liu, Hoilun Ngan, and Lionel M Ni. 2010. ASAP: Scalable
identification and counting for contactless RFID systems. In Proc. of IEEE ICDCS
2010. 52–61.
[33] Hariharan Rahul, Swarun Kumar, and Dina Katabi. 2012. MegaMIMO: Scaling
Wireless Capacity with User Demands. In ACM SIGCOMM 2012. Helsinki, Finland.
[34] Rapeepat Ratasuk, Benny Vejlgaard, Nitin Mangalvedhe, and Amitava Ghosh.
2016. NB-IoT system for M2M communication. In Proc. of IEEE WCNC 2016. 1–5.
[35] Ettus Research. 2012. USRP N210 Datasheet. (2012). Available online at https:
//www.ettus.com/content/files/07495_Ettus_N200-210_DS_Flyer_HR_1.pdf.
[36] Anthony Rowe, Dhiraj Goel, and Raj Rajkumar. 2007. Firefly mosaic: A vision-
enabled wireless sensor networking system. In Proc. of IEEE RTSS 2007. 459–468.
[37] Ramon Sanchez-Iborra and Maria-Dolores Cano. 2016. State of the Art in LP-WAN
Solutions for Industrial IoT Services. Sensors 16, 5 (2016), 708.
[38] Wei-Liang Shen, Kate Ching-Ju Lin, Shyamnath Gollakota, and Ming-Syan Chen.
2014. Rate adaptation for 802.11 multiuser MIMO networks. IEEE Transactions
on Mobile Computing 13, 1 (2014), 35–47.
[39] Clayton Shepard, Hang Yu, Narendra Anand, Erran Li, Thomas Marzetta, Richard
Yang, and Lin Zhong. 2012. Argos: Practical Many-antenna Base Stations. In Proc.
of the ACM Mobicom 2012, Istanbul, Turkey. ACM, 53–64.
[40] Kun Tan, He Liu, Ji Fang, Wei Wang, Jiansong Zhang, Mi Chen, and Geoffrey M
Voelker. 2009. SAM: enabling practical spatial multiple access in wireless LAN.
In Proc. of ACM Mobicom 2009, Beijing, China. ACM, 49–60.
[41] Joël Toussaint, Nancy El Rachkidy, and Alexandre Guitton. 2016. Performance
analysis of the on-the-air activation in LoRaWAN. In Proc. of IEEE IEMCON 2016.
1–7.
[42] James E Vander Mey and Timothy J Vander Mey. 1992. Spread spectrum commu-
nications system for networks. (Feb. 18 1992). US Patent 5,090,024.
Addison Wesley Longman Publishing Co., Inc., Redwood City, CA, USA.
[43] Andrew J. Viterbi. 1995. CDMA: Principles of Spread Spectrum Communication.
[44] Jue Wang, Haitham Hassanieh, Dina Katabi, and Piotr Indyk. 2012. Efficient and
reliable low-power backscatter networks. In Proc. of ACM Sigcomm 2012. 61–72.
[45] Yafeng Wu, Gang Zhou, and John A Stankovic. 2010. Acr: Active collision
recovery in dense wireless sensor networks. In Proc. of IEEE INFOCOM 2010. IEEE,
1–9.
[46] Zhengwen Yang, Qiang Wu, Yongqiang Lu, Pei Lu, Yinghong Hou, and Manman
Peng. 2012. Enhanced ALOHA algorithm for chirp spread spectrum positioning.
In Joint International Conference on Pervasive Computing and the Networked World.
Springer, 891–903.
[47] Hang Yu, Lin Zhong, Ashutosh Sabharwal, and David Kao. 2011. Beamforming on
Mobile Devices: A First Study. In Proc. of ACM Mobicom 2011, Las Vegas, Nevada,
USA. ACM, 265–276.
REFERENCES
[1] Omid Abari, Deepak Vasisht, Dina Katabi, and Anantha Chandrakasan. Caraoke:
An e-toll transponder network for smart cities. In Proc. of ACM SIGCOMM 2016,
Vol. 45. ACM, 297–310.
[2] Ferran Adelantado, Xavier Vilajosana, Pere Tuset-Peiro, Borja Martinez, and
Joan Melia. 2016. Understanding the limits of LoRaWAN. arXiv preprint
arXiv:1607.08011 (2016).
[3] Ian F Akyildiz, Weilian Su, Yogesh Sankarasubramaniam, and Erdal Cayirci. 2002.
Wireless sensor networks: a survey. Computer networks 38, 4 (2002), 393–422.
[4] LoRa Alliance. 2015. A Technical Overview of LoRa and LoRaWAN. (2015). https:
//www.lora-alliance.org/portals/0/documents/whitepapers/LoRaWAN101.pdf.
[5] LoRa Alliance. 2015. LoRaWAN Specification. LoRa Alliance (2015).
[6] Narendra Anand, Ryan E Guerra, and Edward W Knightly. The case for UHF-band
[15] Yongjiu Du, Ehsan Aryafar, Joseph Camp, and Mung Chiang. 2014.
MU-MIMO. In Proc. of ACM Mobicom 2014, Maui, Hawaii, USA. 29–40.
[7] Ehsan Aryafar, Narendra Anand, Theodoros Salonidis, and Edward W Knightly.
Design and experimental evaluation of multi-user beamforming in wireless LANs.
In Proc. of ACM Mobicom 2010, Chicago, Illinois, USA. 197–208.
[8] Aloÿs Augustin, Jiazi Yi, Thomas Clausen, and William Mark Townsley. 2016.
A study of LoRa: Long range & low power networks for the internet of things.
Sensors 16, 9 (2016), 1466.
[9] Jean-Paul Bardyn, Thierry Melly, Olivier Seller, and Nicolas Sornin. 2016. IoT:
The era of LPWAN is starting now. In European Solid-State Circuits Conference,
ESSCIRC Conference 2016: 42nd. IEEE, 25–30.
[10] Sugato Basu, Mikhail Bilenko, and Raymond J. Mooney. A Probabilistic Frame-
work for Semi-supervised Clustering. In Proc. of ACM SIGKDD 2004, Seattle, WA,
USA. 59–68.
[11] Martin C. Bor, Utz Roedig, Thiemo Voigt, and Juan M. Alonso. 2016. Do LoRa
Low-Power Wide-Area Networks Scale?. In Proc. of ACM MSWiM 2016, Malta,
Malta. 59–67.
[12] Alexandros-Apostolos A Bouleogeorgos, Panagiotis D Diamantoulakis, and
George K Karagiannidis. 2016. Low Power Wide Area Networks (LPWANs)
for Internet of Things (IoT) Applications: Research Challenges and Future Trends.
arXiv preprint arXiv:1611.07449 (2016).
[13] Marco Centenaro, Lorenzo Vangelista, Andrea Zanella, and Michele Zorzi. 2015.
Long-range communications in unlicensed bands: The rising stars in the IoT and
smart city scenarios. arXiv preprint arXiv:1510.00620 (2015).
[14] Hyeonwoo Cho and Sang Woo Kim. 2012. An anti-collision algorithm for localiza-
tion of multiple chirp-spread-spectrum nodes. Expert Systems with Applications
39, 10 (2012), 8690–8697.
iBeam:
Intelligent client-side multi-user beamforming in wireless networks. In Proc. of
IEEE INFOCOM 2014. IEEE, 817–825.
[16] Mahmoud Elkhodr, Seyed Shahrestani, and Hon Cheung. 2016. Emerging Wireless
Technologies in the Internet of Things: a Comparative Study. arXiv preprint
arXiv:1611.00861 (2016).
[17] Federico Ferrari, Marco Zimmerling, Lothar Thiele, and Olga Saukh. 2011. Ef-
ficient network flooding and time synchronization with glossy. In Proc. of
ACM/IEEE IPSN 2011. 73–84.
[18] Shyamnath Gollakota, Fadel Adib, Dina Katabi, and Srinivasan Seshan. 2011.
Clearing the RF smog: making 802.11 n robust to cross-technology interference.
In ACM SIGCOMM Computer Communication Review, Vol. 41. ACM, 170–181.
[19] Shyamnath Gollakota and Dina Katabi. 2008. ZigZag Decoding: Combating
Hidden Terminals in Wireless Networks. In Proc. of ACM SIGCOMM 2008,Seattle,
WA, USA. ACM, 159–170.
[20] DAVID J Goodman and Adel AM Saleh. 1987. The near/far effect in local ALOHA
radio communications. IEEE Transactions on vehicular technology 36, 1 (1987),
19–27.
[21] Daniel Halperin, Thomas Anderson, and David Wetherall. 2008. Taking the sting
out of carrier sense: Interference cancellation for wireless LANs. In Proc. of ACM
MobiCom 2008.
[22] Ahsanul Haque, Manzur Murshed, and Mortuza Ali. Efficient Contention Reso-
lution in MAC Protocol for Periodic Data Collection in WSNs. In Proc. of ACM
IWCMC 2010, Caen, France. 437–441.
[23] Kyle Jamieson and Hari Balakrishnan. PPR: Partial Packet Recovery for Wireless
Networks. In Proc. of ACM SIGCOMM 2007, Kyoto, Japan.
LPWAN with SDR. In Proceedings of the GNU Radio Conference, Vol. 1.
[25] Mads Lauridsen, István Kovács, Preben Mogensen, Mads Sørensen, and Steffen
Holst. Coverage and Capacity Analysis of LTE-M and NB-IoT in a Rural Area. In
Proc. of IEEE VTC-Fall 2016. 1–5.
[26] Ruizhi Liao, Boris Bellalta, Miquel Oliver, and Zhisheng Niu. 2016. MU-MIMO
MAC Protocols for Wireless Local Area Networks: A Survey. IEEE Communica-
tions Surveys Tutorials 18, 1 (Firstquarter 2016), 162–183.
[27] Kate Ching-Ju Lin, Shyamnath Gollakota, and Dina Katabi. 2011. Random access
heterogeneous MIMO networks. ACM SIGCOMM Computer Communication
Review 41, 4 (2011), 146–157.
[24] Matthew Knight and Balint Seeber. 2016. Decoding LoRa: Realizing a Modern
321