three bit operations 
to assist address 
32 
26 25 
2  1  0 
Salvaging 
Device Address I Offset High I  Group ID  I Offset Low 1 
Group I  Group ID  I  Offset 
32  >:f .... t o 
0001 
11111111000 
....... 
........ 
A-Mask X; 465   11111111... 
Sl1 
1 0000 .. 000011 .. 
111 
492 511 
256 
B-Mask R,oc; 492 
(a) DA and group offset mapping 
-------) 
465 
a 
(b) Two bits masks for logic selection 
Figure 13. Bit operations 
to assist  address 
translation. 
bit-masks 
two 512-bit 
group (group id, offset) is shown in Figure 
The mapping from a PCM device address to 
translation. 
its salvaging 
-- A-mask and 
13(a). We generate 
B-mask as shown in Figure 13(b). Given a group offset 
that the 
X=465, bits 0 to 465 of A-mask are set, indicating 
broken line rank only counts Is of these positions. 
B-mask 
is generated 
and backup spaces. 
PCM), we set the last 5x4=20 bits of the B-mask. 
from Rloe to differentiate 
5 chunks in backup 
Given Rloe=492 
the bits in main PCM 
(i.e., 
Given an address x, we fetch X's bit vector for its 
with A-mask. We then 
group and filter the result 
salvaging 
divide 512 bits into 32 16-bit subgroups. 
16-bit population 
ls  in each subgroup. 
counter is used to  count 
the number of 
in [22]. Ramanarayanan 
et al. used a 3:2 
structure 
to implement 
a 64-bit 
in a single cycle on a 2.1GHz low power 
[22]. The 32 5-bit results 
are 
and Wallace-tree 
counter 
logic proposed 
compressor 
population 
CPU using 65nm technology 
again summarized 
structure 
to get the broken line rank Y. 
Due to space constraints, 
we omit circuit  details 
of the 
using 3:2 compressor 
and Wallace-tree 
second and the third steps. 
logic in these steps to reduce hardware 
skipped if backup PCM contains 
one group exists). 
We reuse the population 
cost. Step 2 can be 
less than 5 chunks (only 
counting 
A 32-way parallel 
We did a custom design of the proposed 
logic using PTM 
We use the fast population  counting 
45nm technology 
and 13KfLm2 die area. The total latency 
[21]. Our design needs 55K transistors 
is 2.68ns (=O.98ns+ 
Authorized licensed use limited to: Tsinghua University. Downloaded on March 18,2021 at 14:31:13 UTC from IEEE Xplore.  Restrictions apply. 
230 
_ ECP-M _ l-ECP  lLS-128x4 
j ::OllU::um::OllU:um ::DllUOU:mu 
M 
M 
mgrid 
Percentage 
100% 90% 80% 70%  50% 100% 90% 80% 70% 50%  100% 90% 80% 70%  50% 100% 90% 80% 70%  50% 100% 90% 80% 70% 50%  100% 90% 80% 70%  50% 
art 
of Healthy Lines 
§ 
 M  
M 
gemsFDTD 
bwaves 
M 
M 
M 
M 
M 
M 
M 
M 
gee 
met 
Figure 14. Performance 
comparison 
of ECP, L-ECP, 
and LLS. 
90% 
_._._.- ECP-M - - -L-ECP -- LLS-64x4 -- LLS-128x4 -- LLS-256x4 .............. Oracle 
 .  --=-=-=-=-=-=-=-=-=-'t=-=- lOO%     .---=-=-=-=-=-=-=-r=-
      ----------l---
_ 
_._. _
_
'_'_'_'_' i_._._
_._._._
'_'_'_'_'_'_'_':"".,
". 
'
:
\i\:' 
I 
_._._
_
_._.
._._
._
.
.-----'-----'-'------1---- 'co>u- ;::
.
.
.
.
_
[ 
't
{ 
.........j.
L-
j 
·0 co "'- 60% 
· 
._
_._:--.
.
._
_
.
  70% 
·
t
"  1   ::: ............
i, ---ji::: 
,::-, -.::::tt.. 
-,::::::
j\
co U  50% 
.., 
-.-_-.-_-.-_-.-_-.-_-.-_-.-_-.-_-.-_-.-_-.-_-.\'.-_-.-_-.-_-.-_-.t_,-.-_-. -.-_-.-_-.-_-.-_-.-_-.-_-.1-_-.-_ .. 
..  40% 
._._._._._._._._._._.-!-._._._._._.-t-._.-,---,-1-,---,-
.t:::!. 40% ._._._._._._._._._._._._.-i-._._._._.;-_._. _._._._ 
. .  _.-
• 
-t
-----------------------t------------ ------
.!::! iii E 30% 
-L._._. -.---:-------------
----
_._._._.! ._.--.-.-.-.-.-.-
..-.- 30% '-'-'-'-'-'-'-'-' 
,i -_ .. -_-.-_-.-_ 
. -_-.-_-.-_I
-.-.-.. 
'-'-'-'-' 
-'-'-'-' 
-'-'-'-' 
j  z  20% __________________________ .Lj _________ -1,____ --------tl ____ 
11.-_ .. -_·.-_·.-_·.lJ·.-_·. ·.-_·.-_·.-_·.-_·.-_·.-_·.l-_·.-_ 
.. -_ .. -_ .. -_ .. __ .. 
-_ .. -_ .. -_ .. -_ .. -_ .. -_ .. -_ .. -
_ ______________________  ____________ I ____ _ 
!; 20% 
1  1 
10% -----------------
----------t-----
-:-----------1-------
Z 
-----1------------ ----
-----------
--i-----
----------
------
-+ 
. , -;---J.---, 
! '   
' .L.-.-
.
0.06 0.08 0.10 0.12  0.14  0.16  0.36 
0.20 0.220.4  0.5 
100% 
90% 
80% 
70% 
60% 
50% 
40% 
30% 
20% 
10% 
0% 
0.18 0.20 0.22 0.24 0.26 0.28 0.5 0.6 
0% 
0.10  0.12  0.14  0.16  0.18 
100% 
90% 
80% 
10% 
0% 
 ·0 co "'-co U .., .. .!::!  E !; Z 
Normalized 
Number of Writes (variation=0.2) Normalized Number 
of Writes (variation=0.25) Normalized 
Number of Writes (variatio
n=0.3) 
Figure 15. Comparing 
the lifetime 
of different 
grouping 
choices. 
1.24ns+0.46ns) 
skipped. 
broken. 
if step 2 is enabled, 
and 1.44ns if step 2 is 
only if the line is 
The translation 
logic is activated 
a bit is associated 
are more failed cells in the extra line (i.e., 
line needs to be accessed). 
with each line, which indicates 
if there 
if the reserved 
Energy consumption 
overhead 
comes from accesses 
to the 
LLS can be built on L-ECP to gain additional 
salvaging 
The inte­
has two benefits. 
First, line failures 
at the cost of hardware overhead. 
opportunities 
gration 
Second, when L-ECP marks a line as broken and activates 
LLS to remap it to backup PCM, the line can release 
its 
occupied 
L-ECP line such that these 
cells may be used to rescue other lines. 
is transparent 
to ensure correctness. 
it needs additional 
cells in the reserved 
to upper levels, 
appear late. 
hardware 
While the integration 
In this section 
we only evaluated 
and compared their 
of L-ECP 
from ECP while LLS achieves  about  8% 
beyond L-ECP' L-ECP's performance 
over­
15 shows that L-ECP extends 10-20% 
i.e. no integration 
implementations, 
stand-alone 
and LLS.  Figure 
extra lifetime 
more lifetime 
head comes from the extra access to the reserved 
14 compares 
with different 
average, 
when 90% and 60% pages survive. 
only 0.5% and 5% overhead, 
of ECP-M, L-ECP, and LLS 
On 
L-ECP has a 10% and 18% performance 
the performance 
percentages 
respectively. 
of surviving 
Instead, 
memory  space. 
overhead 
LLS introduces 
line. Figure 
logic consumes <0.1 nJ per access. 
bitmap cache and translation 
logic. From CACTI, it costs 
about O.4nJ per access for a 256K DRAM bitmap cache. 
However, 
The translation 
is dominated 
note that PCM energy consumption 
by write 
access, 
which is InJ per bit accessed. 
The PCM read energy 
consumption 
[20], and thus, 
this cost can be omitted. 
512 bits, and the read/write 
is less than 10, energy overhead 
access and address 
translation 
consumption: 
indicates 
from the bitmap cache 
is a modest 2% of total energy 
Given that a cache line contains 
ratios of normal benchmarks 
the omitted read energy consumption. 
is < <O. l nJ per bit accessed 
(O.4nJ+O.
To study the sensitivity 
in forming salvaging 
groups, 
number of chunks. The results 
are 
we chose a different 
summarized 
128 chunks with 4 lines per chunk gives a better trade-off 
between lifetime 
in Figure 15. We found that the setting 
and overhead. 
using 
l nJ) out of ( InJx512xO.5+c5)/11). 
c5 
D. LLS and Layered-ECP 
We next discuss  layered-ECP  (L-ECP), 
a page-level  sal­
in [24]. L-ECP reserves 
vaging scheme proposed 
line for each 4KB page, i.e., 64 lines. 
failed 
line is used to fix these cells. 
cells than what ECP can fix per line, then the reserved 
energy overhead, 
one 64B 
If a line contains 
more 
To mitigate 
and salvaging 
leveling 
In this paper, we proposed 
scheme that integrates 
state-of-the-art 
LLS, a line-level 
wear 
mapping 
and low level salvaging 
techniques. 
LLS helps 
VIII. CONCLU SION 
Authorized licensed use limited to: Tsinghua University. Downloaded on March 18,2021 at 14:31:13 UTC from IEEE Xplore.  Restrictions apply. 
231 
IX. ACKNOWLEDGMEMNTS 
We thank the anonymous referees 
for their valuable 
comments and suggestions. 
support from PCM@pitt research 
also supported 
Science 
CAREER-0747242, CNS-1012070,  CCF-0811295, 
0811352, 
The authors acknowledge 
group. This research 
Foundation 
grants CNS­
CCF-
and CNS-0702236. 
by National 
the 
is 
REFERENCES 
[ 1 ]  G. W. Burr, et aI. ,  "Phase Change Memory Technology," 
Vacuum Science & Technology B ,  28(2), 201 0. 
J. of 
[2]  S. Bird, A. Phansalkar, 
Characterization 
dukuru, "Performance 
marks on  Intel' s  Core Microarchitecture 
SPEC Benchmark Workshop, 2007. 
L. K. John, A. Mericas, and R. In­
of SPEC CPU Bench­
based Processor," 
[3] A. Ansari,  S. Gupta, S. Feng, and S. Mahlke, "ZerehCache: 
in High Defect Density Tech­
Symposium on Microar­
Armoring Cache Architectures 
nologies," IEEElACM International 
chitecture, 
2009. 
[4] A. Beaumont-Smith, and C.C. Lim, "Parallel 
Prefix Adder 
Design," IEEE Symposium on Computer Arithmetic, 
200 1 .  
[5] S .  Cho, and H .  Lee, "Flip-N-Write: A Simple Deterministic 
Technique to Improve PRAM Write Performance, Energy and 
Symposium on Microar­
Endurance," 
chitecture, 
2009. 
IEEElACM International 
[6]  A. P. Ferreira,  M. 
Zhou, S. Bock, B.  R. Childers, R. Melhem, 
and D. Mosse, "Increasing 
Design, Automation 
and Test in Europe (DATE), 201 0. 
PCM Main Memory Lifetime," 
[7]  B. Gleixner, F. Pellizzer, 
zation of Phase Change Memory," EPCOS 2009. 
and R. Bez, "Reliability 
Characteri­
[8] The International 
Technology Roadmap for Semiconductors 
report, 2007, 2009. http://www.itrs.netJ. 
Lastras, B .  Abali, "Enhancing lifetime 
based main memory with start-gap 
International 
2009. 
wear leveling," 
Symposium on Microarchitecture, 
and security of PCM­
IEEElACM 
pages 1 4--23, 
[ 1 7] M. K. Qureshi, L. A. Lastras-Montano, M.  M. Franceschini, 
and J. P. Karidis, "Practical 
Memory System via Online Attack Detection," 
the Use of Emerging Storage and Memory Technologies, 
located with 
and Secure PCM-Based Main­
Workshop on 
co­
HPCA 201 0 ,  201 0 .  
[ 1 8] M. K. Qureshi, V. Srinivasan, 
and J. A. Rivers, "Scalable 
High Performance 
Memory Technology," 
Architecture, 
2009. 
Main Memory System using Phase-Change 
International 
Symposium on Computer 
[ 1 9] Nvidia GeForce GTX-480 GPU Specification, 
http://www.n
vidia.comJ. 
[20] Numonyx white  paper, 
"Phase Change Memory (PCM): A 
new memory technology to enable new memory usage  models, 
''http://numonyx.comJDocumentslWhitePaperslNumonyx_Ph
ase 
ChangeMemory _ WhitePaper. 
pdf. 
[21 ]  Y. Cao, "Predictive 
http://www.eas.asu.edu/ptm. 
Technology Model," 
[22] R. Ramanarayanan, 
S. Mathew, V. Erraguntla, 
R. Krishna­
murthy, and S. Gueron, "A 2.1 GHz 6.5mW 64-bit Unified 
PopCountlBitScan Datapath Unit for 65nm High-Performance 
Microprocessor Execution Cores," International 
VLSI Design, 2008. 
Conference on 
[23] N. H. Seong, D.  H. Woo, and H. S .  Lee, "Security Refresh: 
for Phase­
Wear-out and Increase Durability 
Prevent Malicious 
Change Memory with Dynamically Randomized Address Map­
ping," International 
201 0. 
Symposium on Computer Architecture, 
[24]  S. Schechter, 
"Use 
G.  H. Loh, K. Strauss, and D.  Burger, 
ECP, not ECC, for Hard Failures in Resistive Memories," 
International 
Symposium on Computer Architecture, 
201 0 .  
[25] A.  Seznec, "A Phase Change Memory a s  a Secure Main 
Memory," Computer Architecture 
Letters, 
Jan. 201 0 .  
[26] http://www.simics.comJ. 
[27] F. Yeung, et aI. ,  "Ge2Sb2Te5 Confined Structures 
and  In­
Access Memory," 
tegration 
Japanese Journal of Applied Physics, 2005. 
of 64Mb Phase-Change  Random 
[28] W.  Zhang, and T. Li, "Characterizing 
and Mitigating the 
Impact of Process Variations on  Phase  Change  based  Memory 
Systems, " IEEElACM International 
chitecture, 
Symposium on Microar­
2009. 
[29] P. Zhou, B. Zhao, J. Yang, and Y. Zhang, "A Durable  and 
Energy Efficient Main  Memory Using Phase Change Memory 
Technology," 
ture, 2009. 
Symposium on Computer Architec­
International 
PCM space such that lower level-line 
a contiguous 
are hidden from the OS and user applications. 
In 
LLS extends PCM lifetime 
by 24% on average 
provide 
failures 
addition, 
with modest hardware 
[ 1 5]  M.  Lee,  M.  J. 
Breitwisch, and C.  H.  Lam, 
Memory Program Method without Over-Reset," 
Application, 
US20 1 0/0 1 1 0778 A I .  
"Phase Change 
US Patent 
cost and performance 
overhead. 
[ 1 6] M .  K .  Qureshi, J .  Karidis, M .  Franceschini, V. Srinivasan, L. 
[9] Intel Tera-scale research chip overview,  http://www.inteI.comJ. 
[ 1 0] E. Ipek, J. Condit, E. B.  Nightingale,  D.  Burger, 
and T. 
Memory: Building Re­
Moscibroda, "Dynamically Replicated 
liable System from Nanosc1e Resistive Memories," Interna­
tional Conference on Architectural 
Languages and Operating Systems, 201 0 .  
Support for Programming 
[ 1 1 ]  K. Kim and S .  J. Ahn, "Reliability 
Investigation 
for Man­
High Density PRAM," 43rd Annual International 
ufacturable 
Reliability 
Physics Symposium, 2005. 
[ 1 2] S .  Lai, and T. Lowrey, "OUM - A 1 80nm NVM cell element 
technology 
Technical Digest, 200 1 .  
for stand alone and embedded applicati
ons," IEDM 
[ 1 3] S .  Lai, "Current Status o f  the Phase Change Memory and its 
Future," IEDM Technical Digest, 2003. 
[ 14] B.  Lee, E. Ipek, O. Mutlu, and D.  Burger, 
"Architecting 
Phase-Change Memory as a Scalable DRAM Alternative," 
International 
Symposium on Computer Architecture, 
2009. 
Authorized licensed use limited to: Tsinghua University. Downloaded on March 18,2021 at 14:31:13 UTC from IEEE Xplore.  Restrictions apply. 
232