类型元素的大小，然后再调用函数本身。如此循环，当地址加到字符串的结束标志符'\0'
时，递归停止。当然，同样是利用递归，还有人写出了更加简洁的代码：
intmy_strlen( const char* strDest )
{
return *strDest?1+strlen(strDest+1):0;
}
这里很巧妙的利用了问号表达式，但是没有做参数入口校验，同时用*strDest 来代替
('\0'== *strDest)也不是很好。所以，这种写法虽然很简洁，但不符合我们前面所讲的
编码规范。
可以改写一下：
intmy_strlen( const char* strDest )
{
assert(NULL != strDest);
return ('\0' != *strDest)?(1+my_strlen(strDest+1)):0;
}
上面的问题利用函数递归的特性就轻易的搞定了，也就是说每调用一遍my_strlen 函
数，其实只判断了一个字节上的内容。但是，如果传入的字符串很长的话，就需要连续多次
函数调用，而函数调用的开销比循环来说要大得多，所以，递归的效率很低，递归的深度太
大甚至可能出现错误（比如栈溢出）。所以，平时写代码，不到万不得已，尽量不要用递归。
即便是要用递归，也要注意递归的层次不要太深，防止出现栈溢出的错误；同时递归的停止
条件一定要正确，否则，递归可能没完没了。
- 111 -
第七章 文件结构
一个工程是往往由多个文件组成。这些文件怎么管理、怎么命名都是非常重要的。下面
给出一些基本的方法，比较好的管理这些文件，避免错误的发生。
7.1 文件内容的一般规则
【规则7-1】每个头文件和源文件的头部必须包含文件头部说明和修改记录。源文件和
头文件的头部说明必须包含的内容和次序如下：
/*******************************************************************
*****
* File Name : FN_FileName.c/ FN_FileName.h
* Copyright : 2003-2008 XXXX Corporation, All Rights
Reserved.
* Module Name : Draw Engine/Display
* CPU : ARM7
* RTOS : Tron
* Create Date : 2008/10/01
* Author/Corporation : WhoAmI/your company name
**
Abstract Description : Place some description here.
**
-----------------------Revision
History---------------------------------
* No Version Date Revised By Item Description
* 1 V0.95 08.05.18 WhoAmI abcdefghijklm WhatUDo
********************************************************************
****/
【规则7-2】各个源文件必须有一个头文件说明，头文件各部分的书写顺序下：
其中Multi-Include-Prevent Section 是用来防止头文件被重复包含的。
如下例：
#ifndef __FN_FILENAME_H
#define __FN_FILENAME_H
#endif
其中‚FN_FILENAME‛一般为本头文件名大写，这样可以有效避免重复，因为同一工程
- 112 -
中不可能存在两个同名的头文件。
/*******************************************************************
*****
* File Name : FN_FileName.h
* Copyright : 2003-2008 XXXX Corporation, All Rights
Reserved.
* Module Name : Draw Engine/Display
* CPU : ARM7
* RTOS : Tron
* Create Date : 2008/10/01
* Author/Corporation : WhoAmI/your company name
Abstract Description : Place some description here.
**
----------------------------------------Revision
History---------------------------------
* No Version Date Revised By Item Description
* 1 V0.95 08.05.18 WhoAmI abcdefghijklm WhatUDo
********************************************************************
****/
/*******************************************************************
*****
* Multi-Include-Prevent Section
********************************************************************
****/
#ifndef __FN_FILENAME_H
#define __FN_FILENAME_H
/*******************************************************************
*****
* Debug switch Section
********************************************************************
****/
#define D_DISP_BASE
/*******************************************************************
*****
* Include File Section
********************************************************************
****/
#include "IncFile.h"
/*******************************************************************
*****
* Macro Define Section
********************************************************************
****/
#define MAX_TIMER_OUT (4)
- 113 -
/*******************************************************************
*****
* Struct Define Section
********************************************************************
****/
typedef struct CM_RadiationDose
{
unsigned char ucCtgID;
char cPatId_a[MAX_PATI_LEN];
}CM_RadiationDose_st, *CM_RadiationDose_pst;
/*******************************************************************
*****
* Prototype Declare Section
********************************************************************
****/
unsigned intMD_guiGetScanTimes(void);
…
#endif
【规则7-3】源文件各部分的书写顺序如下：
/*******************************************************************
******
* File Name : FN_FileName.c
* Copyright : 2003-2008 XXXX Corporation, All Rights
Reserved.
* Module Name : Draw Engine/Display
* CPU : ARM7
* RTOS : Tron
* Create Date : 2003/10/01
* Author/Corporation : WhoAmI/your company name
Abstract Description : Place some description here.
-----------------------Revision
History---------------------------------
* No Version Date Revised By Item Description
- 114 -
* 1 V0.95 00.05.18 WhoAmI abcdefghijklm WhatUDo
********************************************************************
****/
/*******************************************************************
*****
* Debug switch Section
********************************************************************
****/
#define D_DISP_BASE
/*******************************************************************
*****
* Include File Section
********************************************************************
****/
#include "IncFile.h"
/*******************************************************************
*****
* Macro Define Section
********************************************************************
****/
#define MAX_TIMER_OUT (4)
/*******************************************************************
*****
* Struct Define Section
********************************************************************
****/
typedef struct CM_RadiationDose
{
unsigned char ucCtgID;
char cPatId_a[MAX_PATI_LEN];
}CM_RadiationDose_st, *pCM_RadiationDose_st;
/*******************************************************************
*****
* Prototype Declare Section
********************************************************************
****/
unsigned int MD_guiGetScanTimes(void);
/*******************************************************************
*****
* Global Variable Declare Section
********************************************************************
****/
extern unsigned int MD_guiHoldBreathStatus;
/*******************************************************************
- 115 -
*****
* File Static Variable Define Section
********************************************************************
****/
static unsigned int nuiNaviSysStatus;
/*******************************************************************
*****
* Function Define Section
********************************************************************
****/
【规则7-4】需要对外公开的常量放在头文件中，不需要对外公开的常量放在定义文件
的头部。
7.2 文件名命名的规则
【规则7-5】文件标识符分为两部分，即文件名前缀和后缀。文件名前缀的最前面要使用范
围限定符——模块名（文件名）缩写；
【规则7-6】采用小写字母命名文件，避免使用一些比较通俗的文件名，如：public.c 等。
- 116 -