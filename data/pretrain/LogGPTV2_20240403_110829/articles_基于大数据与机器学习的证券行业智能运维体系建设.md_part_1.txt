### 证券信息技术发展研究中心（上海）2018 年联合研究
### 课题报告
### 基于大数据与机器学习的证券行业智能运维体系建设

**课题主办单位：上海证券交易所**  
**课题承接单位：光大证券股份有限公司、清华大学 NetMan 实验室、合胜科技、日志易**  
**课题组成员：晏强、周雄伟、杨超、吴浩、孙伟、裴丹、鲍捷、王振宇**

---

## 目录
1. 摘要
2. 第1章 绪论
   - 1.1 课题背景
   - 1.2 课题研究目标
   - 1.3 研究方法
3. 第2章 智能运维体系可行性分析
   - 2.1 可行性分析
     - 2.1.1 AIOps智能运维技术分析
     - 2.1.2 金融行业案例分析
   - 2.2 可实现性分析
     - 2.2.1 AIOps业务实现分析
     - 2.2.2 AIOps系统部署分析
   - 2.3 专家团队支持
     - 2.3.1 清华NetMan实验室
     - 2.3.2 日志易团队
4. 第3章 运维数据的采集
   - 3.1 运维数据种类
     - 3.1.1 静态数据
     - 3.1.2 动态数据
     - 3.1.3 模型数据
     - 3.1.4 脱敏数据
   - 3.2 运维数据的采集
     - 3.2.1 数据采集架构
     - 3.2.2 数据采集模式
   - 3.3 数据处理
     - 3.3.1 数据缓存
     - 3.3.2 数据处理
     - 3.3.3 数据存储
5. 第4章 智能算法与AI场景
   - 4.1 智能算法种类
     - 4.1.1 无监督异常检测
     - 4.1.2 异常根因定位
     - 4.1.3 自然语言处理
   - 4.2 AI场景介绍
     - 4.2.1 单指标异常检测
     - 4.2.2 趋势预测分析
     - 4.2.3 多维指标异常定位
     - 4.2.4 日志异常分析与定位
6. 第5章 智能运维体系架构
   - 5.1 体系架构
   - 5.2 数据架构
   - 5.3 基于微服务架构的服务总线
     - 5.3.1 服务网关建设
     - 5.3.2 认证和权限管理
     - 5.3.3 服务的治理和监控
   - 5.4 物理架构
   - 5.5 数据安全设计
     - 5.5.1 数据安全
     - 5.5.2 主机安全
     - 5.5.3 应用安全
     - 5.5.4 数据传输安全
     - 5.5.5 数据存储安全
     - 5.5.6 数据访问控制
   - 5.6 平台自监控
7. 第6章 智能运维场景展示
   - 6.1 运维数据的展示
   - 6.2 智能场景的展示
     - 6.2.1 场景介绍
     - 6.2.2 发现问题 - 单指标异常检测
     - 6.2.3 发现问题 – 日志异常检测
     - 6.2.4 定位问题 – 多指标异常定位
     - 6.2.5 分析问题 - 业务/机器指标的关联分析
8. 第7章 收益及展望
   - 7.1 预期收益
   - 7.2 经验分享
   - 7.3 未来展望
9. 参考文献
10. 附录

---

### 摘要
证券业运维管理通过严格的制度和规范的流程，将复杂系统纳入可预期的管理操作之下。然而，随着金融科技在证券业的深入发展，大量新技术的引入迫使证券业的运维模型向稳态和敏态结合的双态模式转变。简化的流程、快速的迭代和复杂的技术对传统的运维管理方法提出了挑战。在高速变化的环境下，如何保持系统的可用性，需要更先进的IT管理思路和更高级的科技手段。

利用成熟的人工智能技术，可以帮助运维人员在事后快速定位问题，在事中发现故障并实时响应，甚至在事前洞察可能的风险并提前调整优化。基于人工智能的新一代运维方法称为AIOps，它能显著降低IT运维的工作强度，提升反应速度，从而大幅提升运维效率。随着人工智能技术的发展，相关技术也日趋成熟。目前，智能运维在证券行业受到越来越多的关注，并纷纷进行探索实践。

本项目由光大证券信息技术总部主导，整合了清华大学NetMan团队、日志易数据技术团队和合胜技术团队的设计和实践经验。通过对智能运维体系在光大证券的实际落地建设进行剖析，系统性地介绍了AIOps原则、智能运维体系参考架构、运维数据的采集处理、相关机器学习算法、AI场景的选择应用以及体系平台的整体设计等在证券行业的落地方法。该体系在光大证券某应用系统上实现了异常检测和异常定位等AI场景，为运维工作带来了实际收益，对证券行业AIOps的实践具有极强的指导意义。

**关键词**：证券行业、AIOps、大数据平台、机器学习、智能运维、异常检测、异常定位

---

### 第1章 绪论
#### 1.1 课题背景
AIOps即智能运维，通过系统运行过程中产生的数据，运用AI和算法、运筹理论等相关技术，对运维数据进行分析，进而提升运维效率的新一代运维手段和方法。根据Gartner在2016年提出的分析报告，IT运维人员的工作在未来几年内将发生重大变化，到2020年AIOps的采用率将达到50%。目前，AIOps在国内外领先的互联网企业开始逐渐应用，是近年来国内外普遍看好的新技术。

券商作为最先实现电子化的金融机构，经过30多年的发展，已经积累了大量的软硬件基础架构运维的数据及经验。同时，市场竞争加剧要求券商快速响应业务迭代发展的需求，IT运维越来越受到敏态业务带来的交付效率和运维质量的压力。在双态IT运维环境中，如何保证业务系统的稳定性，具备故障的快速定位和根因调查能力，极大地挑战了券商的IT运维团队水平和运维工作的有效性。AIOps技术通过对大量运维数据的分析，提升了传统运维方式的效率。

#### 1.2 课题研究目标
随着金融科技在券商行业的高速发展，给传统IT运维带来了压力，主要表现在：
- 金融科技带来的IT建设规模越来越大，IT运维的复杂度也越来越高；
- 来自监管的IT运维要求越来越高，如99.99%的可用性要求，对连续性管理提出了更高的要求；
- 两地三中心的部署架构，管理的硬件设备数以千计，TB级的运维数据分散在各个复杂的系统中。

面对这些困难，券商近年来在运维方面投入了大量的资源，运维水平得以较大提升。代表性内容包括：
- 通过ITIL和CMDB的建设实现运维标准化；
- 通过自动化运维工具的引入提高运维效率；
- 通过大数据平台建设实现数据处理能力的大幅度提升；
- 通过集中监控和数据采集的建设逐步实现监控和运维数据的统一处理。

经过与多家券商及智能运维厂商的调研和交流，目前券商在智能运维领域处于探索阶段，建设进度参差不齐。部分券商已经建设了大数据平台，并实现了运维数据的集中采集分析；部分券商开始将运维数据结合算法的运维场景在大数据平台进行落地，但均处于以实现应用场景落地为目标的方式进行建设，整体架构尚不清晰，无法将运维数据的价值进一步整合和利用。

本次研究旨在通过光大证券基于大数据与机器学习的证券行业智能运维体系的建设和研究，构建证券行业智能运维AIOps的实施路径及落地方法。

#### 1.3 研究方法
通过研究智能运维体系的建设，将日常运维活动产生的运维数据进行采集和整合，引入成熟的算法和机器学习技术，对数据进行全面智能分析，探索可行的方法和路径。

针对运维系统数据来源广泛、多样性复杂的特征，建立了以Kafka数据管道为核心的数据队列系统，以ElasticSearch等开源数据仓库为持久化平台的数据存储系统。做到实时对多套系统采集的指标和日志等多种数据进行采集汇总，并进行进一步的预处理。

以运维的业务系统为整体监控单位，对核心业务数据、应用日志数据、机器指标数据进行数据采集、异常发现和异常分析，通过大数据平台的计算能力和算法，提升运维效率。