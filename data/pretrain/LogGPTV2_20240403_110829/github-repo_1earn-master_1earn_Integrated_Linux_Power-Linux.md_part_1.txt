# Power-Linux
- `Linux ä¸‹å„ç§å¸¸è§æœåŠ¡çš„æ­å»º/é…ç½®æŒ‡å—`
- `å¤§éƒ¨åˆ†ç¯å¢ƒåœ¨ Centos7,å°‘éƒ¨åˆ† Ubuntu`
- `ä¸»è¦ä»¥å®‰è£…æ­å»ºä¸ºä¸»,è¿‘ä¸€æ­¥çš„é…ç½®è¯·å‚è€ƒå®˜æ–¹æ•™ç¨‹`
---
## å¤§çº²
* **[ğŸ¥© å¸¸è§å·¥å…·](#å¸¸è§å·¥å…·)**
  * [Lvm](#lvm)
  * [Net](#net)
  * [RAID](#raid)
  * [Vim](#vim)
  * [Tmux](#tmux)
* **[ğŸœ ç½‘ç»œæœåŠ¡](#ç½‘ç»œæœåŠ¡)**
  * [AdguardTeam](#adguardteam)
  * [butterfly](#butterfly)
  * [Cacti](#cacti)
  * [Chrony](#chrony)
  * [clash](#clash)
  * [cloud-torrent](#cloud-torrent)
  * [code-server](#code-server)
  * [DHCP](#dhcp)
  * [DNS](#dns)
  * [focalboard](#focalboard)
  * [frp](#frp)
  * [Kicktart](#kicktart)
  * [nps](#nps)
  * [OpenVPN](#openvpn)
  * [PowerDNS](#powerdns)
    * [PowerDNS-Admin](#powerdns-admin)
  * [proxychains-ng](#proxychains-ng)
  * [ss5](#ss5)
  * [SSH](#ssh)
  * [ttyd](#ttyd)
  * [vnc4server](#vnc4server)
* **[ğŸ¦ webæœåŠ¡-ä¸­é—´ä»¶](#webæœåŠ¡-ä¸­é—´ä»¶)**
  * [ActiveMQ](#activemq)
  * [Apache_httpd](#apache_httpd)
  * [Caddy](#caddy)
  * [npm & Node](#npmnode)
  * [Nexus](#nexus)
  * [Nginx](#nginx)
  * [php-cli](#php-cli)
  * [phpMyAdmin](#phpmyadmin)
  * [RabbitMQ](#rabbitmq)
  * [searx](#searx)
  * [Tomcat](#tomcat)
  * [Wordpress](#wordpress)
  * [Mijisou](#mijisou)
* **[ğŸ‰ æ•°æ®åº“](#æ•°æ®åº“)**
  * [Relational](#relational)
    * [Oracle](#oracle)
    * [Mariadb](#mariadb)
    * [MySQL](#mysql)
    * [Postgresql](#postgresql)
  * [Document](#document)
    * [MongoDB](#mongodb)
  * [Key-value](#key-value)
    * [Redis](#redis)
    * [Memcached](#Memcached)
  * [å›¾å½¢](#å›¾å½¢)
    * [Neo4j](#neo4j)
* **[ğŸ£ æ–‡ä»¶æœåŠ¡](#æ–‡ä»¶æœåŠ¡)**
  * [filebrowser](#filebrowser)
  * [NFS](#nfs)
  * [Samba](#samba)
  * [sharry](#sharry)
  * [Vsftp](#vsftp)
* **[ğŸ— ç¼–ç¨‹è¯­è¨€](#ç¼–ç¨‹è¯­è¨€)**
  * [C](#c)
  * [Go](#go)
  * [JDK](#jdk)
  * [Perl](#perl)
  * [PHP](#php)
  * [Python3](#python3)
    * [pip](#pip)
    * [jupyterlab](#jupyterlab)
  * [Ruby](#ruby)
  * [Rust](#rust)
* **[ğŸ ç³»ç»Ÿç›‘ç®¡](#ç³»ç»Ÿç›‘ç®¡)**
  * [BaoTa](#baota)
  * [Jenkins](#jenkins)
  * [JumpServer](#jumpserver)
  * [Loganalyzer](#loganalyzer)
  * [Supervisor](#supervisor)
  * [Webmin](#webmin)
  * [Zabbix](#zabbix)
* **[ğŸŒ­ å®¹å™¨ & è™šæ‹ŸåŒ–](#å®¹å™¨&è™šæ‹ŸåŒ–)**
  * [Docker](#docker)
    * [Docker-Compose](#docker-compose)
    * [Docker-Portainer](#docker-portainer)
  * [Kubernetes](#kubernetes)
    * [kubectl](#kubectl)
  * [QEMU](#qemu)
* **[ğŸ¥• åˆ†å¸ƒå¼](#åˆ†å¸ƒå¼)**
  * [ZooKeeper](#zookeeper)
* **[ğŸ¯ å®‰å…¨æœåŠ¡](#å®‰å…¨æœåŠ¡)**
  * [ClamAV](#clamav)
  * [Fail2Ban](#fail2ban)
  * [OpenLDAP](#openldap)
    * [PhpLdapAdmin](#phpldapadmin)
  * [Snort](#snort)
  * [Suricata](#suricata)
  * [tripwire](#tripwire)
* **[ğŸ· è®¾æ–½é…ç½®](#è®¾æ–½é…ç½®)**
  * [f8x](#f8x)
  * [Terraform](#terraform)
* **[ğŸ¥ å„ç§ä¾èµ–å’ŒæŠ¥é”™](#å„ç§ä¾èµ–å’ŒæŠ¥é”™)**
  * [LuaJIT](#luajit)
---
## å¸¸è§å·¥å…·
### Lvm
> LVM æ˜¯ Logical Volume Manager çš„ç¼©å†™ï¼Œä¸­æ–‡ä¸€èˆ¬ç¿»è¯‘ä¸º "é€»è¾‘å·ç®¡ç†"ï¼Œå®ƒæ˜¯ Linux ä¸‹å¯¹ç£ç›˜åˆ†åŒºè¿›è¡Œç®¡ç†çš„ä¸€ç§æœºåˆ¶ã€‚LVM æ˜¯å»ºç«‹åœ¨ç£ç›˜åˆ†åŒºå’Œæ–‡ä»¶ç³»ç»Ÿä¹‹é—´çš„ä¸€ä¸ªé€»è¾‘å±‚ï¼Œç³»ç»Ÿç®¡ç†å‘˜å¯ä»¥åˆ©ç”¨ LVM åœ¨ä¸é‡æ–°å¯¹ç£ç›˜åˆ†åŒºçš„æƒ…å†µä¸‹åŠ¨æ€çš„è°ƒæ•´åˆ†åŒºçš„å¤§å°ã€‚å¦‚æœç³»ç»Ÿæ–°å¢äº†ä¸€å—ç¡¬ç›˜ï¼Œé€šè¿‡ LVM å°±å¯ä»¥å°†æ–°å¢çš„ç¡¬ç›˜ç©ºé—´ç›´æ¥æ‰©å±•åˆ°åŸæ¥çš„ç£ç›˜åˆ†åŒºä¸Šã€‚
```bash
fdisk -l		        # æŸ¥çœ‹ç£ç›˜æƒ…å†µ
fdisk /dev/sdb	    # åˆ›å»ºç³»ç»Ÿåˆ†åŒº
	n
	p
	1
	åé¢éƒ½æ˜¯é»˜è®¤,ç›´æ¥å›è½¦
	t	  # è½¬æ¢åˆ†åŒºæ ¼å¼
	8e
	w   # å†™å…¥åˆ†åŒºè¡¨
```
**å·ç»„**
åˆ›å»ºä¸€ä¸ªåä¸º datastore çš„å·ç»„,å·ç»„çš„ PE å°ºå¯¸ä¸º 16MB;
```bash
pvcreate /dev/sdb1	                  # åˆå§‹åŒ–ç‰©ç†å·
vgcreate -s 16M datastore /dev/sdb1   # åˆ›å»ºç‰©ç†å·
```
**é€»è¾‘å·**
é€»è¾‘å·çš„åç§°ä¸º database æ‰€å±å·ç»„ä¸º datastore,è¯¥é€»è¾‘å·ç”± 50 ä¸ª PE ç»„æˆ;
```bash
lvcreate -l 50 -n database datastore
```
é€»è¾‘å·çš„åç§°ä¸º database æ‰€å±å·ç»„ä¸º datastore,è¯¥é€»è¾‘å·å¤§å°ä¸º 8GB;
```bash
lvcreate -L 8G -n database datastore
lvdisplay
```
**æ ¼å¼åŒ–**
å°†æ–°å»ºçš„é€»è¾‘å·æ ¼å¼åŒ–ä¸º XFS æ–‡ä»¶ç³»ç»Ÿ,è¦æ±‚åœ¨ç³»ç»Ÿå¯åŠ¨æ—¶èƒ½å¤Ÿè‡ªåŠ¨æŒ‚åœ¨åˆ° /mnt/database ç›®å½•.
```bash
mkfs.xfs /dev/datastore/database
mkdir /mnt/database
```
æ·»åŠ æŒ‚è½½çš„é…ç½®
```diff
vim /etc/fstab
+ /dev/datastore/database /mnt/database/ xfs defaults 0 0
```
é‡å¯éªŒè¯
```bash
shutdown -r now
mount | grep '^/dev'
```
**æ‰©å®¹**
å°† database é€»è¾‘å·æ‰©å®¹è‡³ 15GB ç©ºé—´å¤§å°,ä»¥æ»¡è¶³ä¸šåŠ¡éœ€æ±‚.
```bash
lvextend -L 15G /dev/datastore/database
lvs	    # ç¡®è®¤æœ‰è¶³å¤Ÿç©ºé—´
resize2fs /dev/datastore/database
lvdisplay
```
---
### Net
**centos é…ç½®ç½‘å¡**
```vim
vim /etc/sysconfig/network-scripts/ifcfg-eth0
DEVICE="enoXXXXXX"
BOOTPROTO=static  # ä½¿ç”¨é™æ€ IP,è€Œä¸æ˜¯ç”± DHCP åˆ†é… IP
IPADDR=172.16.102.61
PREFIX=24
ONBOOT=yes
GATEWAY=172.16.102.254
HOSTNAME=dns1.abc.com
DNS1=223.5.5.5
```
**ä¿®æ”¹ä¸»æœºå**
```diff
vim /etc/hosts
+ 127.0.0.1  test localhost
# ä¿®æ”¹ localhost.localdomain ä¸º test,shutdown -r now é‡å¯ä½¿ä¿®æ”¹ç”Ÿæ•ˆ
```
**ä¿®æ”¹ DNS**
```diff
vim /etc/resolv.conf
- search localdomain
+ nameserver 8.8.8.8
```
```bash
service network restart
```
---
### RAID
**å®‰è£…**
```bash
yum remove mdadm # å»ºè®®å…ˆæŠŠåŸæœ¬çš„å¸æ‰é‡è£…
yum install -y mdadm
```
**åˆ†åŒº**
```bash
fdisk /dev/sdb
n åˆ›å»º
p ä¸»åˆ†åŒº
æ¥ä¸‹æ¥ä¸€è·¯å›è½¦é€‰é»˜è®¤å€¼
w å†™å…¥
fdisk /dev/sdc
n åˆ›å»º
p ä¸»åˆ†åŒº
æ¥ä¸‹æ¥ä¸€è·¯å›è½¦é€‰é»˜è®¤å€¼
w å†™å…¥
```
**åˆ›å»ºé˜µåˆ—**
- RAID1
	```bash
  mdadm -Cv /dev/md0 -a yes -l1 -n2 /dev/sd[b,c]1
  - -Cv: åˆ›å»ºä¸€ä¸ªé˜µåˆ—å¹¶æ‰“å°å‡ºè¯¦ç»†ä¿¡æ¯.
	- /dev/md0: é˜µåˆ—åç§°.
	- -a : åŒæ„åˆ›å»ºè®¾å¤‡,å¦‚ä¸åŠ æ­¤å‚æ•°æ—¶å¿…é¡»å…ˆä½¿ç”¨ mknod å‘½ä»¤æ¥åˆ›å»ºä¸€ä¸ª RAID è®¾å¤‡,ä¸è¿‡æ¨èä½¿ç”¨ -a yes å‚æ•°ä¸€æ¬¡æ€§åˆ›å»º;
	- -l1 (l as in "level"): æŒ‡å®šé˜µåˆ—ç±»å‹ä¸º RAID-1 .
	- -n2: æŒ‡å®šæˆ‘ä»¬å°†ä¸¤ä¸ªåˆ†åŒºåŠ å…¥åˆ°é˜µåˆ—ä¸­å»,åˆ†åˆ«ä¸º/dev/sdb1 å’Œ /dev/sdc1
  ```
- RAID5
	```bash
  mdadm -Cv /dev/md0 -a yes -l5 -n3 /dev/sd[b,c,d]1
	cat /proc/mdstat    # æŸ¥çœ‹è¿›åº¦
	mdadm -D /dev/md0   # è·å–é˜µåˆ—ä¿¡æ¯
  ```
**æ ¼å¼åŒ–ä¸º xfs**
```bash
mkfs.xfs /dev/md0
```
**ä»¥ UUID çš„å½¢å¼å¼€æœºè‡ªåŠ¨æŒ‚è½½**
```bash
mkdir /data/ftp_data
blkid	/dev/md0    # æŸ¥ UUID å€¼
```
```diff
vim /etc/fstab
+ UUID=XXXXXXXXXXXXXXXXXXXXXXXXXX    /data/ftp_data  xfs defaults 0 0
```
```bash
shutdown -r now   # é‡å¯éªŒè¯
mount | grep '^/dev'
```
---
### Vim
> VIM æ˜¯ Linux ç³»ç»Ÿä¸Šä¸€æ¬¾æ–‡æœ¬ç¼–è¾‘å™¨ï¼Œå®ƒæ˜¯æ“ä½œæ–‡æœ¬çš„ä¸€æ¬¾åˆ©å™¨ã€‚
**å¸¸ç”¨æ“ä½œ**
```bash
Normal æ¨¡å¼ä¸‹ i è¿›å…¥ insert æ¨¡å¼
:wq                       # å­˜ç›˜+é€€å‡º
dd                        # åˆ é™¤å½“å‰è¡Œ,å¹¶å­˜å…¥å‰ªåˆ‡æ¿
p                         # ç²˜è´´
:q!                       # å¼ºåˆ¶é€€å‡º
:wq!                      # å¼ºåˆ¶ä¿å­˜é€€å‡º
:w !sudo tee %            # æ—  root æƒé™,ä¿å­˜ç¼–è¾‘çš„æ–‡ä»¶
:saveas [path/to/file]    # å¦å­˜ä¸º
æŒ‰ä¸‹ / å³å¯è¿›å…¥æŸ¥æ‰¾æ¨¡å¼,è¾“å…¥è¦æŸ¥æ‰¾çš„å­—ç¬¦ä¸²å¹¶æŒ‰ä¸‹å›è½¦. Vim ä¼šè·³è½¬åˆ°ç¬¬ä¸€ä¸ªåŒ¹é….æŒ‰ä¸‹ n æŸ¥æ‰¾ä¸‹ä¸€ä¸ª,æŒ‰ä¸‹ N æŸ¥æ‰¾ä¸Šä¸€ä¸ª.
:%s/foo/bar               # ä»£è¡¨æ›¿æ¢ foo ä¸º bar
:%!xxd                    # åå…­è¿›åˆ¶ç¼–è¾‘æ¨¡å¼, :%!xxd -r åˆ‡å›å»
insert æ¨¡å¼æŒ‰ ESC é”®,è¿”å› Normal æ¨¡å¼
```
**å¸¸ç”¨é…ç½®**
`vim /etc/vim/vimrc` æˆ– `vim /etc/vimrc` æœ€åé¢ç›´æ¥æ·»åŠ ä½ æƒ³æ·»åŠ çš„é…ç½®,ä¸‹é¢æ˜¯ä¸€äº›å¸¸ç”¨çš„ (ä¸å»ºè®®ç›´æ¥å¤åˆ¶è¿™ä¸ªæˆ–è€…ç½‘ä¸Šçš„,è¦ç†è§£æ¯ä¸ªçš„å«ä¹‰åŠæœ‰ä»€ä¹ˆç”¨,æ ¹æ®è‡ªå·±éœ€è¦æ¥è°ƒæ•´)
```bash
set number                # æ˜¾ç¤ºè¡Œå·
set nobackup              # è¦†ç›–æ–‡ä»¶æ—¶ä¸å¤‡ä»½
set cursorline            # çªå‡ºæ˜¾ç¤ºå½“å‰è¡Œ
set ruler                 # åœ¨å³ä¸‹è§’æ˜¾ç¤ºå…‰æ ‡ä½ç½®çš„çŠ¶æ€è¡Œ
set shiftwidth=4          # è®¾å®š > å‘½ä»¤ç§»åŠ¨æ—¶çš„å®½åº¦ä¸º 4
set softtabstop=4         # ä½¿å¾—æŒ‰é€€æ ¼é”®æ—¶å¯ä»¥ä¸€æ¬¡åˆ æ‰ 4 ä¸ªç©ºæ ¼
set tabstop=4             # è®¾å®š tab é•¿åº¦ä¸º 4(å¯ä»¥æ”¹)
set smartindent           # å¼€å¯æ–°è¡Œæ—¶ä½¿ç”¨æ™ºèƒ½è‡ªåŠ¨ç¼©è¿›
set ignorecase smartcase  # æœç´¢æ—¶å¿½ç•¥å¤§å°å†™,ä½†åœ¨æœ‰ä¸€ä¸ªæˆ–ä»¥ä¸Šå¤§å†™å­—æ¯æ—¶ä» ä¿æŒå¯¹å¤§å°å†™æ•æ„Ÿ
ä¸‹é¢è¿™ä¸ªåœ¨ä»£ç å¤šçš„æ—¶å€™ä¼šæ¯”è¾ƒå¥½
#set showmatch # æ’å…¥æ‹¬å·æ—¶,çŸ­æš‚åœ°è·³è½¬åˆ°åŒ¹é…çš„å¯¹åº”æ‹¬å·
#set matchtime=2 # çŸ­æš‚è·³è½¬åˆ°åŒ¹é…æ‹¬å·çš„æ—¶é—´
```
**ä½¿ç”¨ vim å¯¹æ¯”æ–‡ä»¶**
```bash
vimdiff  FILE_LEFT  FILE_RIGHT
```
**è§£å†³ ssh å vim ä¸­ä¸èƒ½ä½¿ç”¨å°é”®ç›˜çš„é—®é¢˜**
- xshell
  æ›´æ”¹çš„æ–¹æ³•: åœ¨ç»ˆç«¯è®¾ç½®ä¸­é€‰æ‹©ç»ˆç«¯ç±»å‹ä¸º linux
- ubuntu
  ```bash
  apt-get remove vim-common
  apt-get install -y vim
  ```
**[SpaceVim](https://spacevim.org/cn/)** - æ¨¡å—åŒ–çš„ Vim IDE
**[how-to-exit-vim](https://github.com/hakluke/how-to-exit-vim)** - é€€å‡º vim çš„å¤šç§æ–¹å¼
---
### Tmux
- https://github.com/tmux/tmux
**å®‰è£…**
```bash
# Ubuntu æˆ– Debian
apt-get install -y tmux
# CentOS æˆ– Fedora
yum install -y tmux
```
**ä½¿ç”¨**
```bash
tmux  # è¿›å…¥äº† Tmux çª—å£,åº•éƒ¨æœ‰ä¸€ä¸ªçŠ¶æ€æ ã€‚çŠ¶æ€æ çš„å·¦ä¾§æ˜¯çª—å£ä¿¡æ¯ï¼ˆç¼–å·å’Œåç§°ï¼‰ï¼Œå³ä¾§æ˜¯ç³»ç»Ÿä¿¡æ¯
# Ctrl+d åŒä¸‹
exit  # é€€å‡º
tmux info                     # åˆ—å‡ºå½“å‰æ‰€æœ‰ Tmux ä¼šè¯çš„ä¿¡æ¯
tmux source-file ~/.tmux.conf # é‡æ–°åŠ è½½å½“å‰çš„ Tmux é…ç½®
```
**å¸®åŠ©ä¿¡æ¯**
```bash
Ctrl+b
? # æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
Ctrl+b
d # "æœ€å°åŒ–"tmuxçª—å£
tmux list-commands            # åˆ—å‡ºæ‰€æœ‰ Tmux å‘½ä»¤åŠå…¶å‚æ•°
tmux list-keys                # åˆ—å‡ºæ‰€æœ‰å¿«æ·é”®ï¼ŒåŠå…¶å¯¹åº”çš„ Tmux å‘½ä»¤
```
**æ–°å»ºä¼šè¯**
```bash
tmux new -s test
tmux new-session -s 'test'
tmux new-session -s 'test' -d # ä½¿ç”¨ -s å¼€å…³æŒ‡å®šä¼šè¯çš„åå­—ä¸º testï¼Œä½¿ç”¨ -d å¼€å…³ä½¿å¾—åˆ›å»ºåç«‹å³ä¸å…¶è„±ç¦»ã€‚
```
**åˆ†ç¦»ä¼šè¯**
```bash
Ctrl+b
d                       # å°†å½“å‰ä¼šè¯ä¸çª—å£åˆ†ç¦»
tmux detach             # å°†å½“å‰ä¼šè¯ä¸çª—å£åˆ†ç¦»
```
**æ¥å…¥ä¼šè¯**
```bash
tmux attach -t 0        # ä½¿ç”¨ä¼šè¯ç¼–å·
tmux attach -t test     # ä½¿ç”¨ä¼šè¯åç§°
```
**åˆ—å‡ºæ‰€æœ‰ä¼šè¯**
```bash
tmux ls
Ctrl+b
s
```
**æ€æ­»ä¼šè¯**
```bash
tmux kill-session -t 0  # ä½¿ç”¨ä¼šè¯ç¼–å·
tmux kill-session -t    # ä½¿ç”¨ä¼šè¯åç§°
```
**åˆ‡æ¢ä¼šè¯**