[11.1 对BI系统的影响评估 [62](#对bi系统的影响评估)](#对bi系统的影响评估)
[11.2 监控设计 [62](#监控设计)](#监控设计)
[11.2.1 性能估算 [62](#性能估算)](#性能估算)
[11.3 安全设计 [86](#安全设计)](#安全设计)
[11.4 可维护性设计 [86](#可维护性设计)](#可维护性设计)
[12 架构部署设计 [87](#架构部署设计)](#架构部署设计)
[12.1 网络架构图 [87](#网络架构图)](#网络架构图)
[12.2 部署说明 [87](#部署说明)](#部署说明)
[12.3 软件部署修改列表 [87](#软件部署修改列表)](#软件部署修改列表)
[12.4 小型系统割接 [88](#小型系统割接)](#小型系统割接)
[12.5 工程作业 [88](#工程作业)](#工程作业)
[附件 [88](#附件)](#附件)
  -----------------------------------------------------------------------
  市节点NGCRM                         黑色
  ----------------------------------- -----------------------------------
  市节点融合计费                      **褐色**
  省中心NGCRM                         **蓝色**
  省中心融合计费                      **绿色**
  -----------------------------------------------------------------------
# 设计任务流程
## 任务安排表
由任务分配负责人根据需求任务的情况填写下表，安排相关的设计人员
+---------+-------+-----------+---------------------------+----------+
| 角色    | 负    | 手机号码  | 电子邮件                  | 维护人员 |
|         | 责人  |           |                           |          |
+=========+=======+===========+===========================+==========+
| 主      | 辛伟  | 18        | PI:EMAIL       |          |
| 开发商  |       | 903072129 |                           |          |
|         | 林    |           | PI:EMAIL     |          |
|         | 恒诗  | 13        |                           |          |
|         |       | 822272104 | g                         |          |
|         | 王    |           | PI:EMAIL |          |
|         | 志强  | 18        |                           |          |
|         |       | 551406205 |                           |          |
+---------+-------+-----------+---------------------------+----------+
| 配合    |       |           |                           |          |
| 开发商  |       |           |                           |          |
+---------+-------+-----------+---------------------------+----------+
| 需求    | 郭正  | 13        |  |          |
+---------+-------+-----------+---------------------------+----------+
| 设计    | 李    | 13        | liz                       |          |
| 负责人  | 璋琪  | 802881886 | PI:EMAIL |          |
+---------+-------+-----------+---------------------------+----------+
## 需求等级评定表
  --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  **子系统**     **涉及系统功能模块**                                                                                                                                                                                                                                                   **预估总工作量**
  -------------- ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ------------------
  CRM生产节点    前台后系统日志框架改造（100）、产品订购退订(100)、开户(120)、停开机(80)、缴费(40)、充值(100)、补卡(40)业务调用链日志埋点、日志开关控制(40)、账务服务调用接口改造(200)、订单预生成(40)、订单提交(40)、订单拆解(40)、订单行开通(40)、工单发送80)、订单竣工(40)流程改造   1100
  BOSS生产节点   系统日志框架改造（100）、CICS接口改造、DCC接口改造                                                                                                                                                                                                                     245.7
  BOSS省中心                                                                                                                                                                                                                                                                            
  CRM省中心                                                                                                                                                                                                                                                                             
  ESOP                                                                                                                                                                                                                                                                                  
  --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
评定标准详细见"CMGD 业务支撑系统开发商管理办法.doc"
  -----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  序号   指标                               权重   工作量   得分        说明
  ------ ---------------------------------- ------ -------- ------ ---- -------------------------------------------------------------------------------------------------------------------
                                                            主     配   
  1      新增界面数                         1.0                         
  2      修改界面数                         0.5                         
  3      新增业务逻辑数                     2.0                         
  4      修改业务逻辑数                     1.0                         
  5      新增接口命令数                     1.5                         
  6      修改接口命令数                     0.5                         
  7      新增报表数                         3.5                         
  8      修改报表数                         1                           
  9      小型系统割接                       1                           工作量按照有效工作产量计算
  10     工程作业                           1                           工作量按照有效工作产量计算
  11     主开发商合并文档、方案完整性保障   1      3－10                对于多家协作开发的需求，主负责开发商合并文档并且保障方案的统一性，主开发商增加3－10分（人天）。配合方无此工作量。
  12     配置项目                           0.2                         每个配置项目按照0.2分配置计算
         紧急程度                           1      5－10                有紧急版本情况或版本排定后追加排入的需求加5分，如果BOSS需求从提出到实现不足5工作日，则加可加10分
  -----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
# 总体设计思路
## 概述
### 需求概述
根据NG3专题要求，系统增加服务调用链日志生成及日志分析告警能力。
### 需求背景
为了实现对系统内部各个处理环节处理情况的监控，对于系统中的重点业务，实现监控业务在系统间及系统内部处理环节的重点监控，便于定位故障原因及通过服务调用日志来进行业务监控和分析。
### 需求简介
1.建立业务调用链日志服务中心，支持对NGCRM系统生成的调用链日志进行采集、汇聚、分析、展现，使基于服务调用开发的重点业务能够通过本系统实现故障定界、性能监控。
2.改造NGCRM、NGBOSS系统相关业务模块及系统框架，实现对重点关键业务的服务调用日志埋点，生成调用链日志。重点业务包括：产品订购退订、充值、缴费、停机、开机、开户、补卡。
### 实施范围
全省
## 设计思路
  ---------------------- ---------------------------- ---------- ------- ---------- -------------------------------------------------------------------- ----------------------
  开发商分工                                                                                                                                             
  主开发商               华为                                                                                                                            
  配合开发商                                                                                                                                             
  范围                                                                                                                                                   
  涉及模式               NGBOSS                                                                                                                          
  品牌                   全品牌                                                                                                                          
  实施地市               全省                                                                                                                            
  需求功能点                                                                                                                                             
  序号                   需求功能点描述                                             简单描述对应开发/配置点                                              
  1                      服务调用链日志打印                                         针对需求中的关键业务，增加服务调用链日志的打印，生成相关的日志文件   
  2                      服务调用链日志打印控制                                     根据业务类型、地市来控制是否打印服务调用链日志                       
  3                      新增服务调用链日志处理模块                                 BOMC平台提供服务调用链日志采集、存储、分析、展示能力                 
  4                                                                                                                                                      
  5                                                                                                                                                      
  6                                                                                                                                                      
  7                                                                                                                                                      
  8                                                                                                                                                      
  9                                                                                                                                                      
  上载前提条件                                                                                                                                           
  配置要求               配置                                            完成时间                                                                        上线要求
  外围平台要求           协议要求                                                                                                                        上线时间要求
                         无                                                                                                                              
  上线内部数据要求       描述                                                                                                                            
                         *无*                                                                                                                            
  风险分析                                                                                                                                               
  是否对操作习惯的影响   否                           影响备注                                                                                           
  对现有系统功能的影响   否                           影响备注                                                                                           
  对系统核心模块评估     否                           影响备注                                                                                           
  性能要求                                                                                                                                               
  序号                   性能要求描述                                                                                                                    备注
  1                                                                                                                                                      
  2                                                                                                                                                      
  3                                                                                                                                                      
  涉及章节                                                                                                                                               
  序号                   章节                                                                                                                            是否涉及
  3                      界面运行设计                                                                                                                    *是*
  4                      系统配置设计                                                                                                                    *是*
  5                      业务逻辑设计                                                                                                                    *是*
  6                      接口设计                                                                                                                        *是*
  7                      报表设计                                                                                                                        *否*
  8                      数据库设计                                                                                                                      是
  9                      对内部生产系统的影响                                                                                                            *否*
  10                     架构部署设计                                                                                                                    *是*
  ---------------------- ---------------------------- ---------- ------- ---------- -------------------------------------------------------------------- ----------------------
## 技术方案
###  省CRM
不涉及
### 节点CRM
#### 设计思路
通过在节点CRM、节点BOSS应用的服务框架底层增加日志埋点以及业务特殊流程中设置日志埋点的策略，将业务系统内部之间的各个服务之间调用信息以日志的形式记录下来，并上报给服务调用链日志服务中心存储和分析；日志服务中心中心根据制订好的分析策略，进行定时数据统计，完成服务调用链所需要的分析指标并进行监控、展示。
#### 总体架构和方案描述
##### 技术架构
![](media/image2.emf)