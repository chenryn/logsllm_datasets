系统所采用的软件也应该满足安全性，版权合法且无安全漏洞。	一系列恶意行为。
2）移动安全。	对于此类威胁，安全设计方案是：集成第三方代码时，开发人2）移动安全。	对于此类威胁，安全设计方案是：集成第三方代码时，开发人
a) APP 代码保护。基于目前市面上提供了很多或开源或商业的逆 向分析工具，如 apktool，dex2jar，baksmali 等，因此攻击者 很容易就可以获得应用的反编译代码，几乎就是应用源代码。在此基础上，进一步分析应用中存在的安全漏洞以及业务逻辑，并进而攻击服务端。为了提高逆向分析的门槛，可以进行代码 混淆、dex 加壳、so 加壳等方式对代码进行保护。
b) APP 运行时保护。对移动端应用的逆向分析还有动态调试。动 态调试分为 Java 层和 native 层动态调试，通过动态调试，跟踪 应用运行行为，猜测业务逻辑；同时，通过动态调试还可以伪 造或篡改请求 / 响应包，从而攻击服务器端。可以在代码中加 入动态调试检测来进行反调试，如调试器进程名检测、ptrace 检测、xposed…hook 框架检测等。员应尽可能了解第三方代码的功能，以及尽可能保证第三方代 码的安全性。需要在下载、集成、评估、更新升级四个阶段都 注意安全，实现必要的安全措施：从官网安全下载和使用；对 代码进行漏洞扫描，漏洞包括有常见 Android 应用漏洞，例如 组件暴露、webview 漏洞等；代码审计，检查第三方代码是否 实现多余功能或申请过多权限，审计是否有恶意代码、敏感数 据收集及传输等；升级和更新，一方面是漏洞的应急响应，对 于已公布的安全漏洞有及时的响应；另一方面，更新时候需要 重新检测第三方代码新版本的安全性。
d) APP 端业务安全。为了防止 APP 用户恶意注册及薅羊毛等恶 意行为，可以在 APP 中加入设备指纹，进行数据埋点等，将 APP 数据接入业务风控平台，进行业务反欺诈。
可以采用加固工具对 Android…APP 进行加固保护，防止恶意破 	3）Web 安全。解、反编译、二次打包等。国内有很多提供 APP 加固服务厂商，需要注意的是，加固会造成性能的损失，严重情况下可能造成 应用崩溃，因此需要做好兼容性和健壮性测试。
对于 Web 安全，关注常见的 OWASP…TOP…10 漏洞，如注入、身 份认证、敏感信息泄露、安全配置错误等。常见的防御措施有认证、授权、加密、审计、输入验证等。
206 	207
证券行业应用安全架构设计实践
由于篇幅关系，就不做展开了。对所有攻击面进行威胁库匹配，最 
终形成的就是该产品完整的安全解决方案。在实际实施过程中，业 
务也会在实现安全功能的投入和安全风险间进行权衡，并不一定会 
实现所有的安全设计方案。
06 平台化赋能
如今，越来越多的企业开始采用 DevOps 开发模式，实现价值的快 
速交付，也催生出来 DevSecOps 理念，本机构也很早就探索并落速交付，也催生出来 DevSecOps 理念，本机构也很早就探索并落 
地 DevSecOps 实践。在 DevSecOps 中，如何实现安全架构设计 
的快速交付？
4）Restful API 安全。	通过自研三叉戟 SDL 全流程赋能平台，自动化实现基于场景的轻 Restful…API 以 URI 方式对外提供数据服务或功能服务。外部用户 	量级威胁建模。
多数情况下是程序或系统。提供的数据服务或功能服务多数情况 下，是非公开的，即需要对 HTTP 请求来源和身份做识别与认证，再经过授权决策（访问控制）后，提供相应的数据或执行功能。
推荐的安全设计参考有：
●…互联网上暴露 Restful…API( 或 HTTP 服务接口）时，应该加密	（如 HTTPS）；
●…采用 appid、appkey 或 jwt 等方式，来标识访问者身份；●…非公开Restful…API服务，必须在每个端点上做认证和访问控制；●…对接口使用情况进行监控，完整记录接口访问日志；●…对接口调用进行流量控制，控制规则包括最大允许应用程序接 	口调用并发数等，控制措施包括告警、暂停、拒绝等。
其他还要考虑的领域还有数据安全、个人隐私评估、大数据安全等，
…
实现思路为项目组自主进行安全调查问卷的填写，平台基于调查问 卷的业务场景，匹配安全威胁库，关联安全需求库，自动化输出安 全设计方案。安全人员负责安全威胁库及安全需求库等的完善。
208 	209
未来，可以借助人工智能及 NLP 等技术，实现自适应的智能化威 
胁建模。
07 总结
本文介绍了如何进行安全架构设计，以及轻量级威胁建模实践，通
过安全左移，从源头管控安全风险，降低漏洞修复成本。行业机构 证券行业安全日志的几个应用场景 华福证券  张生
可以参考本文的实践，进行自身的安全架构设计探索和落地。
过去的问题 
基于安全日志的产品在 2008 年时兴起 SOC 类安全集中管理，从海基于安全日志的产品在 2008 年时兴起 SOC 类安全集中管理，从海 
量的安全告警日志中提取，分析对网络安全工作有价值的信息，并 
快速归类处理告警事件。
自 2017 年国家出台《网络安全法》，明确要求“采取监测、记录网 
络运行状态、网络安全事件的技术措施，并按照规定留存相关的网 
络日志不少于六个月”。进一步为安全日志集中收集提供法律依据。
作者介绍 SEC-UN    SEC-UN    SEC-UN    SEC-UN    SEC-UN    SEC-UN    SEC-UN    SEC-UN    SEC-UN    SEC-UN    SEC-UN    SEC-UN    SEC-UN    SEC-UN    SEC-UN    SEC-UN    SEC-UN    SEC-UN  未来的问题
安全设备日渐增多，安全日志将成指数级增加，在未来对日志分析安全设备日渐增多，安全日志将成指数级增加，在未来对日志分析
江旺  庄飞，某证券信息安全中心负责人。
处理要求会更高。安全日志的分析除发现已知的问题之外，我们还 应该检测未知，预测已知范围之外的事情。
SEC-UN    SEC-UN    SEC-UN    SEC-UN    SEC-UN    SEC-UN    SEC-UN    SEC-UN    SEC-UN    SEC-UN    SEC-UN    SEC-UN    SEC-UN    SEC-UN    SEC-UN    SEC-UN    SEC-UN    SEC-UN    SEC-UN    SEC-UN    SEC-UN    SEC-UN 
|  |  |
|---|---|
| 210 |211 |
|  | 一、日志的概念 |  |
|---|---|---||  | 一、日志的概念 |  |
|---|---|---|
|  |一、日志的概念 |证券行业安全日志的几个应用场景 |
|  |一、日志的概念 | |
|  |一、日志的概念 |解决了记录哪些日志，输出哪些日志，下一步要做的就是挖掘日志 |
中包含的丰富隐藏财富。
日志是记录系统运行过程中各种重要信息的文件，在系统运行过程 
中由各进程创建并记录。日志的作用是记录系统的运行过程及异常 	二、安全日志的价值 
信息，为快速定位系统运行中出现的问题及开发过程中的程序调试 
问题提供详细信息。	日志能告诉我们很多关于系统中所发生事件的信息，最常见的用法 	是用来排错，解决故障。日志还会成为在事故发生后查明“发生了 早期在软件开发过程缺少日志规范，对日志记录哪些，没有明确定 
	什么”的很好的溯源取证的信息来源。本文列出一些常见的日志用 义和框架，纯依赖于开发者的经验和组织的技术规范。曾在实际工 	例。作检查一个系统称之有日志记录，等我们登录上去一看时，发现只
有登入和登出的两类日志，简直让人啼笑皆非。在安全领域的日志 框架，可参考 GB/T18336 中定义了评估信息技术产品和系统安全 性所需的基础准则，是度量信息技术安全性的基准。针对安全性评 估过程中信息技术产品和系统的安全功能及相应的保证措施提出 一组通用要求，使各种相对独立的安全性评估结果具有可以性。标 准中提出保护轮廓（PP）将信息技术安全要求分为功能和保证两
2.1 故障排错 
事实上大部分情况下日志是为故障排错而设计。如果不检查日志 文件，无法得知系统具体错误，从而入手解决问题。例如下图中 Windows 补丁升级服务（WSUS）的日志文件显示更新报错，给 管理员提供解决问题的方向。
|  | 大部分。例如安全审计可分为： | 大部分。例如安全审计可分为： |  |  |  |  |  |  |  |  |  |  |  |  |  ||---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|
|  | | | | | | | | | | | | | | | |
|  | | |2.2 性能资源管理 |2.2 性能资源管理 | | | | | | | | | | | |
| 212 |… | |日志不仅仅可以告诉你主机 |日志不仅仅可以告诉你主机 | | | | | | | | | | |213 |
| 212 |… | |是否健康运行，还能够告诉 |是否健康运行，还能够告诉 | | | | | | | | | | |213 |
| 212 |… | |你主机上运行的应用程序在 |你主机上运行的应用程序在 | | | | | | | | | | |213 |
| 212 |… | |做什么。往往系统真正宕机 |做什么。往往系统真正宕机 | | | | | | | | | | |213 || 212 |… | |前日志中就展现出硬件和软 |前日志中就展现出硬件和软 | | | | | | | | | | |213 |
| 212 |… | |件的错误。 |件的错误。 | | | | | | | | | | |213 |
证券行业安全日志的几个应用场景