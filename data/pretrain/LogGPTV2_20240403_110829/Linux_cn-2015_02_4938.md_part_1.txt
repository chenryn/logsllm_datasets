---
author: DevynCJohnson
category: 技术
comments_data:
- date: '2015-02-25 13:33:01'
  message: '[思考]'
  postip: 106.120.110.69
  username: 微博评论
- date: '2015-02-25 13:33:01'
  message: Repost
  postip: 106.120.110.69
  username: 微博评论
- date: '2015-02-25 13:33:01'
  message: 难道不是从回收站里找？
  postip: 106.120.110.69
  username: 微博评论
- date: '2015-02-25 13:33:01'
  message: '@我的印象笔记'
  postip: 106.120.110.69
  username: 微博评论
- date: '2015-02-25 13:33:01'
  message: mark
  postip: 106.120.110.69
  username: 微博评论
- date: '2015-02-25 13:33:01'
  message: diskgenius
  postip: 106.120.110.69
  username: 微博评论
- date: '2015-02-25 13:33:01'
  message: 好东西！
  postip: 106.120.110.69
  username: 微博评论
- date: '2015-02-25 13:33:01'
  message: mark
  postip: 106.120.110.69
  username: 微博评论
- date: '2015-02-25 13:54:32'
  message: 命令界面没有回收站。
  postip: 222.93.31.3
  username: you~
- date: '2015-02-25 14:33:04'
  message: '@我的印象笔记'
  postip: 220.181.108.106
  username: 微博评论
- date: '2015-02-25 14:33:04'
  message: Repost
  postip: 220.181.108.106
  username: 微博评论
- date: '2015-02-25 14:33:04'
  message: mark
  postip: 220.181.108.106
  username: 微博评论
- date: '2015-02-25 16:03:01'
  message: 需要。
  postip: 220.181.108.160
  username: 微博评论
- date: '2015-02-25 16:03:01'
  message: 存
  postip: 220.181.108.160
  username: 微博评论
- date: '2015-02-25 16:33:02'
  message: get get get ！
  postip: 157.55.39.41
  username: 微博评论
- date: '2015-02-25 18:03:01'
  message: 【好文分享】testdisk是一款非常优秀的软件
  postip: 60.8.44.170
  username: 微博评论
- date: '2015-02-25 19:03:02'
  message: 原来这也是
  postip: 140.207.22.7
  username: 微博评论
- date: '2015-02-25 19:33:06'
  message: 学习
  postip: 39.186.191.116
  username: 微博评论
- date: '2015-02-25 21:03:01'
  message: '@我的印象笔记'
  postip: 69.162.70.52
  username: 微博评论
- date: '2015-02-26 16:33:01'
  message: '@我的印象笔记'
  postip: 120.40.144.126
  username: 微博评论
- date: '2016-12-09 16:06:24'
  message: 讲解非常详细，关键的地方万字描述清晰，而且配有关键步骤的截图，大赞！！！对着做了以便，能看到已删除的文件，但因为我在恢复前新创建文件了，而且恢复是目录选错了，导致只能恢复一部分......但此文绝对是实用且大好的文章，已收藏，感谢作者
  postip: 116.30.59.84
  username: 来自广东深圳的 Firefox 50.0|Windows 7 用户
- date: '2016-12-09 19:45:37'
  message: 您的赞赏，是我们的骄傲！
  postip: 171.125.186.100
  username: linux [Chrome 54.0|Mac 10.11]
- date: '2017-05-24 17:14:44'
  message: mark
  postip: 58.221.91.150
  username: ppp098123 [Chrome 50.0|Windows 7]
count:
  commentnum: 23
  favtimes: 8
  likes: 0
  sharetimes: 32
  viewnum: 41764
date: '2015-02-25 12:51:00'
editorchoice: false
excerpt: 当用户意外地删除了一个仍然需要的文件时，大多数情况下，是没有简便的方法可以重新找回或重建这个文件。不过，幸运的是文件是可以通过一些方法恢复的。当用户删除了一个文件，该文件并没有消失，只是被隐藏了一段时间。
  这里将解释它是如何工作的。在一个文件系统中，有一个叫做 文件分配表 的东西，这个表跟踪文件在存储单元（如硬盘， MicroSD 卡，闪存驱动器等等）中的位置。当一个文件被删除，文件系统将会在文件分配表中执行以下两个任务之一：这个文件在文件分配表上的条目被标记为
  自由空间 或删除文件分配表里这个文件的条目，且
fromurl: http://www.linux.org/threads/undelete-files-on-linux-systems.4316/
id: 4938
islctt: true
largepic: /data/attachment/album/201502/25/105434g7z0wrwdh76fdw3d.jpg
permalink: /article-4938-1.html
pic: /data/attachment/album/201502/25/105434g7z0wrwdh76fdw3d.jpg.thumb.jpg
related: []
reviewer: ''
selector: ''
summary: 当用户意外地删除了一个仍然需要的文件时，大多数情况下，是没有简便的方法可以重新找回或重建这个文件。不过，幸运的是文件是可以通过一些方法恢复的。当用户删除了一个文件，该文件并没有消失，只是被隐藏了一段时间。
  这里将解释它是如何工作的。在一个文件系统中，有一个叫做 文件分配表 的东西，这个表跟踪文件在存储单元（如硬盘， MicroSD 卡，闪存驱动器等等）中的位置。当一个文件被删除，文件系统将会在文件分配表中执行以下两个任务之一：这个文件在文件分配表上的条目被标记为
  自由空间 或删除文件分配表里这个文件的条目，且
tags:
- 删除
- 恢复
- TestDisk
thumb: false
title: 怎样在 Linux 系统中恢复已删除文件
titlepic: false
translator: FSSlc
updated: '2015-02-25 12:51:00'
---
当用户意外地删除了一个仍然需要的文件时，大多数情况下，是没有简便的方法可以重新找回或重建这个文件。不过，幸运的是文件是可以通过一些方法恢复的。当用户删除了一个文件，该文件并没有消失，只是被隐藏了一段时间。
这里将解释它是如何工作的。在一个文件系统中，有一个叫做 文件分配表 的东西，这个表跟踪文件在存储单元（如硬盘， MicroSD 卡，闪存驱动器等等）中的位置。当一个文件被删除，文件系统将会在文件分配表中执行以下两个任务之一：这个文件在文件分配表上的条目被标记为 “自由空间” 或删除文件分配表里这个文件的条目，且将相应的空间被标记为自由空间 。现在，如果有一个新的文件需要被放置在一个存储单元上，操作系统将会把这个文件放置到标记为空位的地方。在新文件被写入到这个空位后，被删除的文件就彻底消失了。当需要恢复一个已经删除的文件时，用户绝对不能再对任何文件进行操作，因为假如该文件对应的“空位”被占用，这个文件就永远也不能恢复了。
![](/data/attachment/album/201502/25/105434g7z0wrwdh76fdw3d.jpg)
### 恢复软件是如何工作的？
大多数的文件系统（在删除文件时）只是标记空间为空白。在这些文件系统下，恢复软件查看文件分配表这个文件，然后复制被删除的文件到另外的存储单元中。假如该文件被复制到其它需要恢复的被删除的存储单元中，那么用户将有可能会失去那个所需的删除文件。
文件系统很少会擦除文件分配表中的条目。假如文件系统真的这样做了， 这便是恢复软件在恢复文件了。恢复软件在存储单元中扫描文件头，所有文件都拥有一个特殊的编码字符串，它们位于文件的最前面，也被叫做 魔法数字。例如，一个编译的 JAVA 类文件的魔法数字在十六进制中是“CAFEBABE”。所以，假如要恢复该类型的文件，恢复软件会查找 “CAFEBABE” 然后复制文件到另一个存储单元。一些恢复软件可以查找某种特殊的文件类型。若用户想恢复一个 PDF 文件，则恢复软件将会查找十六进制的魔法数字 “25504446”，这恰恰是 ASCII 编码中的 “%PDF”。恢复软件将会查找所有的魔法数字，然后用户可以选择恢复哪个已删除的文件。
假如一个文件的部分被覆写了，则整个文件就会被损坏。通常这个文件可以被恢复，但是其中的内容可能已经没有什么用处。例如，恢复一个已损坏的 JPEG 文件将会是无意义的，因为图片查看器不能从这个损坏的文件产生一幅图片。因此，即使用户拥有了这个文件，该文件也将毫无用处。
### 设备的位置：
在我们继续之前，下面的一些信息将会对指引恢复软件找到正确的存储单元起到一定的帮助。所有的设备均挂载在 /dev/ 目录下。操作系统赋予每个设备的名称（并不是管理员给予每个分区或设备的名称）遵循一定的命名规律。
第一个 SATA 硬盘的第二个分区的名称将会是 sda2。名称的第一个字母暗示了存储类型，在这里指的是 SATA，但字母 “s” 也可能指的是 SCSI、 FireWire（火线端口）或 USB。第二个字母 “d” 指的是 disk(硬盘)。第三个字母指的是设备序数，即字母 “a” 指的是第一个 SATA 而 “b” 指的是第二个。最后的数字代表分区。没有分区数字的设备名代表该设置的所有分区。对于上面的例子，对应的名称为 sda 。作为命名的第一个字母还可能是 “h” ，这对应 PATA 硬盘（IDE）。