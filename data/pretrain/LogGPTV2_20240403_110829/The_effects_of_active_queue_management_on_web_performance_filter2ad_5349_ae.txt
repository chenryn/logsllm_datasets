0.1 
3.6 
7.9 
0 
1.3 
3.9 
6.5 
0 
0.1 
3.7 
6.9 
0.01 
1.8 
5.0 
7.7 
0 
3.3 
5.4 
7.3 
0.02 
1.5 
4.1 
5.1 
0.02 
1.4 
4.8 
6.8 
0 
0.3 
1.8 
2.5 
0 
0.1 
1.7 
2.3 
0 
0.1 
1.7 
2.4 
0 
0.2 
1.6 
2.3 
0.03 
1.3 
4.1 
5.1 
0.02 
1.2 
4.7 
6.3 
We  repeated  each  of  the  above  experiments  with  PI,  REM,  and 
ARED using packet marking and ECN instead of packet drops. Up 
to 80% offered load, ECN has no effect on response times of any 
of the AQM schemes. Figures 15-20 show the results for loads of 
90%  and  98%.  At  90%  load,  with  target  queue  length  of  24,  PI 
performs better with ECN, however, with a target queue length of 
240, there is little change in performance. At 98% load, ECN sig-
nificantly  improves  performance  for  PI  at  both  target  queue 
lengths. REM shows the most significant improvement in perform-
ance  with  ECN.  Although  PI  performed  better  than  REM  when 
used without ECN at almost all  loads, at 90% and 98% loads PI 
and REM with ECN give very similar performance, and ECN has a 
significant effect on PI and REM performance in almost all cases. 
Overall,  and  contrary  to  the  PI  and  REM  results,  ECN  has  very 
little effect on the performance of ARED at all tested target queue 
lengths at all loads.  
Table  2  again  presents  the  link  utilization,  loss  ratios,  and  the 
number of completed requests for each ECN experiment. PI with 
ECN clearly seems to have better loss ratios, although there is little 
difference  in  link  utilization  and  number  of  requests  completed. 
REM’s improvement when ECN is used derives from lowered loss 
ratios,  increases  in  link  utilization,  and  increases  in  number  of 
completed requests. With ARED, there is very little improvement 
in link utilization or number of completed requests. Its loss ratios 
are only marginally better with ECN. 
5.1 Comparisons of PI, REM, & ARED with ECN 
Recall that at 80% load, no AQM scheme provides better response 
time performance than a simple drop-tail queue. This result is not 
changed  by  the  addition  of  ECN.  Here  we  compare  the  best  set-
tings for PI, REM, and ARED when combined with ECN for loads 
of  90%,  98%,  and  105%.  The  results  for  drop-tail  (queue  length 
240) are also included as a baseline for comparison. Figures 21-23 
show  these  results.  At  90%  load,  both  PI  and  REM  provide  re-
sponse time performance that is both surprisingly close to that on 
an un-congested link and is better than drop-tail. At 98% load there 
is  noticeable  response  time  degradation  with  either  PI  or  REM, 
however, the results are far superior to those obtained with drop-
tail. Further, both PI and REM combined with ECN have substan-
tially lower packet loss rates than drop-tail and link utilizations that 
are only modestly lower. At 105% load the performance of PI and 
REM  is  virtually  identical  and  only  marginally  worse  than  was 
observed at 98% load. This is an artifact of our traffic generation 
model  wherein  browsers  generate  requests  less  frequently  as  re-
sponse times increase. Table 2 shows that few additional request-
response exchanges are completed at 105% load than at 98% load. 
For ARED, even when used with ECN, response time performance 
at all load levels is significantly worse than PI and REM except for 
the shortest 40% of responses where performance is comparable. 
Figure 24 shows the tails of the response time distribution at 98% 
load.  For  AQM  with  ECN,  drop-tail  again  eventually  provides 
better  response  time  performance,  however,  the  crossover  point 
occurs  earlier,  at  approximately  5  seconds.  The  1%  of  responses 
experiencing  response  times  longer  than  5  seconds  receive  better 
performance under drop-tail. ARED performance again eventually 
approaches that of drop-tail for a handful of responses.  
6  DISCUSSION 
Our experiments have demonstrated several interesting differences 
in the performance of Web browsing traffic under control theoretic 
and  pure  random-dropping  AQM.  Most  striking  is  the  response 
time performance achieved under PI and REM with ECN at loads 
of  90%  and  98%.  In  particular,  at  90%  load  response  time  per-
formance  surprisingly  approximates  that  achieved  on  an  un-
congested network. Approximately 90% of all responses complete 
in  500  milliseconds  or  less  whereas  only  approximately  95%  of 
responses complete within the same threshold on the un-congested 
network.  
100
80
60
40
20
)
%
(
y
t
i
l
i
b
a
b
o
r
p
e
v
i
t
l
a
u
m
u
C
0
0
Uncongested network
drop-tail 90load - qlen=240
PI 90load - qref=24
PI 90load - qref=240
PI/ECN 90load - qref=24
PI/ECN 90load - qref=240
500
1000
1500
2000
Figure 15: PI performance with/without ECN, 90% load. 
Response time (ms)
100
80
60
40
20
)
%
(
y
t
i
l
i
b
a
b
o
r
p
e
v
i
t
l
a
u
m
u
C
0
0
Uncongested network
drop-tail 90load - qlen=240
REM 90load - qref=24
REM 90load - qref=240
REM/ECN 90load - qref=24
REM/ECN 90load - qref=240
500
1000
1500
2000
Response time (ms)
100
80
60
40
20
)
%
(
y
t
i
l
i
b
a
b
o
r
p
e
v
i
t
l
a
u
m
u
C
0
0
Uncongested network
drop-tail 98load - qlen=240
PI 98load - qref=24
PI 98load - qref=240
PI/ECN 98load - qref=24
PI/ECN 98load - qref=240
500
1000
1500
2000
Figure 16: PI performance with/without ECN, 98% load. 
Response time (ms)
100
80
60
40
20
)
%
(
y
t
i
l
i
b
a
b
o
r
p
e
v
i
t
l
a
u
m
u
C
0
0
Uncongested network
drop-tail 98load - qlen=240
REM 98load - qref=24
REM 98load - qref=240
REM/ECN 98load - qref=24
REM/ECN 98load - qref=240
500
1000
1500
2000
Response time (ms)
Figure 17: REM performance with/without ECN, 90% load. 
Figure 18: REM performance with/without ECN, 98% load. 
100
80
60
40
20
)
%
(
y
t
i
l
i
b
a
b
o
r
p
e
v
i
t
l
a
u
m
u
C
0
0
Uncongested network
drop-tail 90load - qlen=240
ARED 90load - thmin=12 thmax=36 w=1/8192
ARED 90load - thmin=120 thmax=360 w=1/8192
ARED/ECN 90load - thmin=12 thmax=36 w=1/8192
ARED/ECN 90load - thmin=120 thmax=360 w=1/8192
500
1000
1500
2000
Response time (ms)
100
80
60
40
20
)
%
(
y
t
i
l
i
b
a
b
o
r
p
e
v
i
t
l
a
u
m
u
C
0
0
Uncongested network
drop-tail 98load - qlen=240
ARED 98load - thmin=12 thmax=36 w=1/8192
ARED 98load - thmin=120 thmax=360 w=1/8192
ARED/ECN 98load - thmin=12 thmax=36 w=1/8192
ARED/ECN 98load - thmin=120 thmax=360 w=1/8192
500
1000
1500
2000
Response time (ms)
Figure 19: ARED performance with/without ECN, 90% load. 
Figure 20: ARED performance with/without ECN, 98% load. 
To  better  understand PI’s  distributions  of  response  times  and  the 
positive  impact  of  ECN,  Figures  25-26  show  scatter  plots  of  re-
sponse size versus response time for PI at 98% load. (In interpret-
ing  these  plots  it  is  important  to  remember  that  the  median  re-
sponse size is under 1,000 bytes and the 90th percentile response is 
slightly  over  10,000  bytes  (see  Figure  3).)  For  small  responses, 
strong banding effects are seen at multiples of 1 second represent-
ing the effects of timeouts. Of special interest is the density of the 
band at 6 seconds representing the effects of a dropped SYN seg-
ment. While it appears that PI forces a large number of small re-
sponses to experience multi-second response times, PI in fact does 