服​​​​​​​务​​​​​​​器​​​​​​​不​​​​​​​应​​​​​​​该​​​​​​​导​​​​​​​入​​​​​​​ GNBD
使​​​​​​​用​​​​​​​其​​​​​​​作​​​​​​​为​​​​​​​客​​​​​​​户​​​​​​​端​​​​​​​。​​​​​​​如​​​​​​​果​​​​​​​服​​​​​​​务​​​​​​​器​​​​​​​导​​​​​​​出​​​​​​​的​​​​​​​设​​​​​​​备​​​​​​​是​​​​​​​没​​​​​​​有​​​​​​​缓​​​​​​​冲​​​​​​​的​​​​​​​，`gfs`{.command}
也​​​​​​​可​​​​​​​以​​​​​​​使​​​​​​​用​​​​​​​基​​​​​​​本​​​​​​​设​​​​​​​备​​​​​​​。​​​​​​​
:::
:::
:::
::: simplesect
::: titlepage
## [⁠]{#ch-driver-command.html#ss-gndb-export-use}用​​​​​​​法​​​​​​​ {.title}
:::
[]{#ch-driver-command.html#idm140101135707488 .indexterm}
``` screen
gnbd_export -d pathname -e gnbdname [-c][-u][-U
```
::: variablelist
[*`pathname`*]{.term}
:   ::: para
    指​​​​​​​定​​​​​​​要​​​​​​​导​​​​​​​出​​​​​​​的​​​​​​​存​​​​​​​储​​​​​​​设​​​​​​​备​​​​​​​。​​​​​​​
    :::
[*`gnbdname`*]{.term}
:   ::: para
    为​​​​​​​ GNBD 选​​​​​​​择​​​​​​​任​​​​​​​意​​​​​​​指​​​​​​​定​​​​​​​的​​​​​​​名​​​​​​​称​​​​​​​。​​​​​​​它​​​​​​​可​​​​​​​作​​​​​​​为​​​​​​​ GNBD
    客​​​​​​​户​​​​​​​端​​​​​​​中​​​​​​​的​​​​​​​设​​​​​​​备​​​​​​​名​​​​​​​称​​​​​​​。​​​​​​​这​​​​​​​个​​​​​​​名​​​​​​​字​​​​​​​必​​​​​​​须​​​​​​​在​​​​​​​网​​​​​​​络​​​​​​​中​​​​​​​导​​​​​​​出​​​​​​​的​​​​​​​所​​​​​​​有​​​​​​​ GNBD 中​​​​​​​是​​​​​​​唯​​​​​​​一​​​​​​​的​​​​​​​。​​​​​​​
    :::
[`-o`{.option}]{.term}
:   ::: para
    以​​​​​​​只​​​​​​​读​​​​​​​方​​​​​​​式​​​​​​​导​​​​​​​出​​​​​​​该​​​​​​​设​​​​​​​备​​​​​​​。​​​​​​​
    :::
[`-c`{.option}]{.term}
:   ::: para
    启​​​​​​​用​​​​​​​缓​​​​​​​冲​​​​​​​。​​​​​​​从​​​​​​​导​​​​​​​出​​​​​​​的​​​​​​​ GNBD 读​​​​​​​取​​​​​​​并​​​​​​​利​​​​​​​用​​​​​​​ Linux 页​​​​​​​面​​​​​​​缓​​​​​​​存​​​​​​​。​​​​​​​
    :::
    ::: para
    默​​​​​​​认​​​​​​​情​​​​​​​况​​​​​​​下​​​​​​​，`gnbd_export`{.command} 命​​​​​​​令​​​​​​​[*不​​​​​​​*]{.emphasis}启​​​​​​​用​​​​​​​缓​​​​​​​存​​​​​​​。​​​​​​​
    :::
    ::: {.note xmlns:d="http://docbook.org/ns/docbook"}
    ::: admonition_header
    **备​​​​​​​注​​​​​​​**
    :::
    ::: admonition
    ::: para
    当​​​​​​​您​​​​​​​使​​​​​​​用​​​​​​​设​​​​​​​备​​​​​​​映​​​​​​​射​​​​​​​器​​​​​​​多​​​​​​​路​​​​​​​径​​​​​​​配​​​​​​​置​​​​​​​ GNBD 服​​​​​​​务​​​​​​​器​​​​​​​时​​​​​​​，不​​​​​​​要​​​​​​​指​​​​​​​定​​​​​​​ `-c`{.option}
    选​​​​​​​项​​​​​​​。​​​​​​​所​​​​​​​有​​​​​​​是​​​​​​​逻​​​​​​​辑​​​​​​​卷​​​​​​​一​​​​​​​部​​​​​​​分​​​​​​​的​​​​​​​ GNBD 必​​​​​​​须​​​​​​​在​​​​​​​禁​​​​​​​用​​​​​​​缓​​​​​​​存​​​​​​​的​​​​​​​情​​​​​​​况​​​​​​​下​​​​​​​运​​​​​​​行​​​​​​​。​​​​​​​
    :::
    :::
    :::
    ::: {.note xmlns:d="http://docbook.org/ns/docbook"}
    ::: admonition_header
    **备​​​​​​​注​​​​​​​**
    :::
    ::: admonition
    ::: para
    如​​​​​​​果​​​​​​​您​​​​​​​已​​​​​​​经​​​​​​​使​​​​​​​用​​​​​​​了​​​​​​​ GFS 5.2
    或​​​​​​​者​​​​​​​早​​​​​​​期​​​​​​​的​​​​​​​版​​​​​​​本​​​​​​​且​​​​​​​[*不​​​​​​​*]{.emphasis}想​​​​​​​要​​​​​​​更​​​​​​​改​​​​​​​您​​​​​​​的​​​​​​​ GNBD
    设​​​​​​​置​​​​​​​，您​​​​​​​[*应​​​​​​​该​​​​​​​*]{.emphasis}指​​​​​​​定​​​​​​​ `-c`{.option} 选​​​​​​​项​​​​​​​。​​​​​​​在​​​​​​​ GFS 发​​​​​​​行​​​​​​​本​​​​​​​
    5.2.1 之​​​​​​​前​​​​​​​的​​​​​​​版​​​​​​​本​​​​​​​中​​​​​​​，是​​​​​​​默​​​​​​​认​​​​​​​为​​​​​​​ `gnbd_export`{.command} 启​​​​​​​用​​​​​​​ Linux
    缓​​​​​​​存​​​​​​​。​​​​​​​如​​​​​​​果​​​​​​​[*没​​​​​​​有​​​​​​​*]{.emphasis}指​​​​​​​定​​​​​​​ `-c`{.option} 选​​​​​​​项​​​​​​​，那​​​​​​​么​​​​​​​ GNBD
    的​​​​​​​性​​​​​​​能​​​​​​​会​​​​​​​显​​​​​​​著​​​​​​​下​​​​​​​降​​​​​​​。​​​​​​​同​​​​​​​时​​​​​​​，如​​​​​​​果​​​​​​​[*没​​​​​​​有​​​​​​​*]{.emphasis}指​​​​​​​定​​​​​​​ `-c`{.option}
    选​​​​​​​项​​​​​​​，导​​​​​​​出​​​​​​​的​​​​​​​ GNBD 会​​​​​​​出​​​​​​​现​​​​​​​超​​​​​​​时​​​​​​​，使​​​​​​​用​​​​​​​默​​​​​​​认​​​​​​​超​​​​​​​时​​​​​​​值​​​​​​​（`-t`{.option}
    选​​​​​​​项​​​​​​​）。​​​​​​​有​​​​​​​关​​​​​​​ `gnbd_export`{.command} 命​​​​​​​令​​​​​​​的​​​​​​​详​​​​​​​情​​​​​​​及​​​​​​​其​​​​​​​选​​​​​​​项​​​​​​​，请​​​​​​​参​​​​​​​考​​​​​​​
    `gnbd_export`{.command} man page。​​​​​​​
    :::
    :::
    :::
[`-u`{.option} *`uid`*]{.term}
:   ::: para
    为​​​​​​​导​​​​​​​出​​​​​​​的​​​​​​​设​​​​​​​备​​​​​​​手​​​​​​​动​​​​​​​设​​​​​​​定​​​​​​​全​​​​​​​局​​​​​​​识​​​​​​​别​​​​​​​符​​​​​​​。​​​​​​​这​​​​​​​个​​​​​​​选​​​​​​​项​​​​​​​和​​​​​​​ `-e`{.option}
    一​​​​​​​同​​​​​​​使​​​​​​​用​​​​​​​。​​​​​​​UID
    是​​​​​​​设​​​​​​​备​​​​​​​映​​​​​​​射​​​​​​​器​​​​​​​多​​​​​​​路​​​​​​​径​​​​​​​来​​​​​​​决​​​​​​​定​​​​​​​哪​​​​​​​些​​​​​​​设​​​​​​​备​​​​​​​属​​​​​​​于​​​​​​​多​​​​​​​路​​​​​​​径​​​​​​​映​​​​​​​射​​​​​​​。​​​​​​​一​​​​​​​个​​​​​​​设​​​​​​​备​​​​​​​必​​​​​​​须​​​​​​​有​​​​​​​一​​​​​​​个​​​​​​​用​​​​​​​于​​​​​​​多​​​​​​​路​​​​​​​径​​​​​​​的​​​​​​​
    UID 。​​​​​​​但​​​​​​​是​​​​​​​，对​​​​​​​大​​​​​​​多​​​​​​​数​​​​​​​ SCSI 设​​​​​​​备​​​​​​​来​​​​​​​说​​​​​​​，默​​​​​​​认​​​​​​​获​​​​​​​得​​​​​​​ UID 的​​​​​​​命​​​​​​​令​​​​​​​
    `/usr/sbin/gnbd_get_uid`{.command} 将​​​​​​​返​​​​​​​回​​​​​​​适​​​​​​​当​​​​​​​的​​​​​​​值​​​​​​​。​​​​​​​
    :::
    ::: {.note xmlns:d="http://docbook.org/ns/docbook"}
    ::: admonition_header
    **备​​​​​​​注​​​​​​​**
    :::
    ::: admonition
    ::: para
    UID 指​​​​​​​向​​​​​​​要​​​​​​​导​​​​​​​出​​​​​​​的​​​​​​​设​​​​​​​备​​​​​​​，而​​​​​​​不​​​​​​​是​​​​​​​ GNBD
    本​​​​​​​身​​​​​​​。​​​​​​​只​​​​​​​有​​​​​​​在​​​​​​​导​​​​​​​出​​​​​​​同​​​​​​​一​​​​​​​个​​​​​​​基​​​​​​​本​​​​​​​设​​​​​​​备​​​​​​​时​​​​​​​，两​​​​​​​个​​​​​​​ GNBD 设​​​​​​​备​​​​​​​的​​​​​​​ UID
    才​​​​​​​应​​​​​​​该​​​​​​​是​​​​​​​相​​​​​​​等​​​​​​​的​​​​​​​。​​​​​​​这​​​​​​​就​​​​​​​是​​​​​​​说​​​​​​​两​​​​​​​个​​​​​​​ GNBD 服​​​​​​​务​​​​​​​器​​​​​​​连​​​​​​​接​​​​​​​到​​​​​​​同​​​​​​​一​​​​​​​个​​​​​​​物​​​​​​​理​​​​​​​设​​​​​​​备​​​​​​​。​​​​​​​
    :::
    :::
    :::
    ::: {.note xmlns:d="http://docbook.org/ns/docbook"}
    ::: admonition_header
    **警​​​​​​​告​​​​​​​**
    :::
    ::: admonition
    ::: para
    当​​​​​​​ `-U`{.option} *`command`*
    选​​​​​​​项​​​​​​​不​​​​​​​工​​​​​​​作​​​​​​​时​​​​​​​，这​​​​​​​个​​​​​​​选​​​​​​​项​​​​​​​应​​​​​​​该​​​​​​​只​​​​​​​用​​​​​​​于​​​​​​​导​​​​​​​出​​​​​​​共​​​​​​​享​​​​​​​存​​​​​​​储​​​​​​​设​​​​​​​备​​​​​​​。​​​​​​​这​​​​​​​在​​​​​​​ SCSI
    设​​​​​​​备​​​​​​​中​​​​​​​基​​​​​​​本​​​​​​​不​​​​​​​会​​​​​​​发​​​​​​​生​​​​​​​。​​​​​​​如​​​​​​​果​​​​​​​两​​​​​​​个​​​​​​​ GNBD
    设​​​​​​​备​​​​​​​没​​​​​​​有​​​​​​​导​​​​​​​出​​​​​​​同​​​​​​​一​​​​​​​基​​​​​​​本​​​​​​​设​​​​​​​备​​​​​​​，但​​​​​​​给​​​​​​​出​​​​​​​相​​​​​​​同​​​​​​​的​​​​​​​ UID，则​​​​​​​会​​​​​​​发​​​​​​​生​​​​​​​数​​​​​​​据​​​​​​​崩​​​​​​​溃​​​​​​​。​​​​​​​
    :::
    :::
    :::
[`-U`{.option} *`Command`*]{.term}
:   ::: para
    获​​​​​​​得​​​​​​​ UID 的​​​​​​​命​​​​​​​令​​​​​​​。​​​​​​​UID 命​​​​​​​令​​​​​​​是​​​​​​​一​​​​​​​个​​​​​​​为​​​​​​​导​​​​​​​出​​​​​​​的​​​​​​​设​​​​​​​备​​​​​​​获​​​​​​​得​​​​​​​统​​​​​​​一​​​​​​​识​​​​​​​别​​​​​​​符​​​​​​​的​​​​​​​
    `gnbd_export`{.command} 命​​​​​​​令​​​​​​​。​​​​​​​该​​​​​​​ UID 是​​​​​​​使​​​​​​​用​​​​​​​带​​​​​​​ GNBD
    的​​​​​​​设​​​​​​​备​​​​​​​映​​​​​​​射​​​​​​​器​​​​​​​多​​​​​​​路​​​​​​​径​​​​​​​所​​​​​​​必​​​​​​​须​​​​​​​的​​​​​​​。​​​​​​​该​​​​​​​命​​​​​​​令​​​​​​​必​​​​​​​须​​​​​​​使​​​​​​​用​​​​​​​您​​​​​​​要​​​​​​​运​​​​​​​行​​​​​​​的​​​​​​​任​​​​​​​意​​​​​​​可​​​​​​​执​​​​​​​行​​​​​​​全​​​​​​​路​​​​​​​径​​​​​​​。​​​​​​​一​​​​​​​个​​​​​​​命​​​​​​​令​​​​​​​中​​​​​​​可​​​​​​​包​​​​​​​含​​​​​​​
    %M、​​​​​​​%m 或​​​​​​​者​​​​​​​ %n 换​​​​​​​码​​​​​​​序​​​​​​​列​​​​​​​。​​​​​​​%M 可​​​​​​​扩​​​​​​​展​​​​​​​为​​​​​​​导​​​​​​​出​​​​​​​设​​​​​​​备​​​​​​​的​​​​​​​主​​​​​​​号​​​​​​​码​​​​​​​，%m
    可​​​​​​​扩​​​​​​​展​​​​​​​为​​​​​​​导​​​​​​​出​​​​​​​设​​​​​​​备​​​​​​​的​​​​​​​副​​​​​​​号​​​​​​​码​​​​​​​，%n 可​​​​​​​扩​​​​​​​展​​​​​​​为​​​​​​​该​​​​​​​设​​​​​​​备​​​​​​​的​​​​​​​ `sysfs`{.literal}
    名​​​​​​​称​​​​​​​。​​​​​​​如​​​​​​​果​​​​​​​没​​​​​​​有​​​​​​​给​​​​​​​出​​​​​​​命​​​​​​​令​​​​​​​，GNBD 将​​​​​​​默​​​​​​​认​​​​​​​使​​​​​​​用​​​​​​​命​​​​​​​令​​​​​​​
    `/usr/sbin/gnbd_get_uid`{.command}。​​​​​​​这​​​​​​​个​​​​​​​命​​​​​​​令​​​​​​​对​​​​​​​大​​​​​​​多​​​​​​​数​​​​​​​ SCSI
    设​​​​​​​备​​​​​​​都​​​​​​​适​​​​​​​用​​​​​​​。​​​​​​​
    :::
:::
:::
::: simplesect
::: titlepage
## [⁠]{#ch-driver-command.html#ss-gndb-export-ex}示​​​​​​​例​​​​​​​ {.title}
:::
::: para
这​​​​​​​个​​​​​​​示​​​​​​​例​​​​​​​是​​​​​​​配​​​​​​​置​​​​​​​了​​​​​​​ GNBD 多​​​​​​​路​​​​​​​径​​​​​​​的​​​​​​​ GNBD 服​​​​​​​务​​​​​​​器​​​​​​​。​​​​​​​它​​​​​​​将​​​​​​​设​​​​​​​备​​​​​​​
`/dev/sdc2`{.filename} 导​​​​​​​出​​​​​​​为​​​​​​​ `gamma`{.filename}。​​​​​​​默​​​​​​​认​​​​​​​禁​​​​​​​用​​​​​​​缓​​​​​​​冲​​​​​​​。​​​​​​​
:::
``` screen
gnbd_export -d /dev/sdc2 -e gamma -U
```
::: para
这​​​​​​​个​​​​​​​示​​​​​​​例​​​​​​​是​​​​​​​[*没​​​​​​​有​​​​​​​*]{.emphasis}配​​​​​​​置​​​​​​​ GNBD 多​​​​​​​路​​​​​​​径​​​​​​​的​​​​​​​ GNBD 服​​​​​​​务​​​​​​​器​​​​​​​。​​​​​​​它​​​​​​​将​​​​​​​
`/dev/sdb2`{.filename} 设​​​​​​​备​​​​​​​导​​​​​​​出​​​​​​​为​​​​​​​ GNBD `delta`{.filename}，并​​​​​​​禁​​​​​​​用​​​​​​​缓​​​​​​​冲​​​​​​​。​​​​​​​
:::
``` screen
gnbd_export -d /dev/sdb1 -e delta -c
```
::: para
这​​​​​​​个​​​​​​​示​​​​​​​例​​​​​​​将​​​​​​​ `/dev/sdb2`{.filename} 设​​​​​​​备​​​​​​​导​​​​​​​出​​​​​​​为​​​​​​​ GNBD
`delta`{.filename}，并​​​​​​​启​​​​​​​用​​​​​​​缓​​​​​​​冲​​​​​​​。​​​​​​​
:::
``` screen
gnbd_export -d /dev/sdb2 -e delta -c
```
:::
:::
::: section
::: titlepage
# [⁠]{#ch-driver-command.html#s2-gnbd-import}3.2. 在​​​​​​​客​​​​​​​户​​​​​​​端​​​​​​​中​​​​​​​导​​​​​​​入​​​​​​​ GNBD {.title}
:::
[]{#ch-driver-command.html#idm140101177385456
.indexterm}[]{#ch-driver-command.html#idm140101177384048
.indexterm}[]{#ch-driver-command.html#idm140101177382768 .indexterm}
::: para
在​​​​​​​节​​​​​​​点​​​​​​​可​​​​​​​以​​​​​​​导​​​​​​​入​​​​​​​ GNBD 前​​​​​​​必​​​​​​​须​​​​​​​在​​​​​​​其​​​​​​​中​​​​​​​载​​​​​​​入​​​​​​​ `gnbd.ko`{.filename}
内​​​​​​​核​​​​​​​模​​​​​​​块​​​​​​​。​​​​​​​当​​​​​​​导​​​​​​​入​​​​​​​ GNBD 时​​​​​​​，会​​​​​​​在​​​​​​​ `/dev/gnbd/`{.filename}
中​​​​​​​为​​​​​​​其​​​​​​​生​​​​​​​成​​​​​​​设​​​​​​​备​​​​​​​节​​​​​​​点​​​​​​​，并​​​​​​​分​​​​​​​配​​​​​​​给​​​​​​​它​​​​​​​们​​​​​​​导​​​​​​​出​​​​​​​时​​​​​​​的​​​​​​​名​​​​​​​称​​​​​​​。​​​​​​​
:::
::: simplesect
::: titlepage