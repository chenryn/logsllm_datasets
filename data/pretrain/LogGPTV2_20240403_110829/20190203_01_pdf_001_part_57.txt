subscription name.
Subscription subscription_name cannot be removed. Reason: Publication does not
exist on the publication server.
Resolution: Warning issued if the subscription you are attempting to remove does not have an
associated publication. You can still remove the subscription.
Subscription database connection cannot be removed as one or more subscriptions
are defined against it.
Resolution: You cannot remove a subscription database definition if there are subordinate subscriptions.
Copyright © 2010 - 2018 EnterpriseDB Corporation. All rights reserved. 641
EDB Postgres Replication Server User’s Guide
Error Messages and Resolutions
Remove the subscriptions first.
Subscription does not exist on the subscription service. It might have been
removed by some other user.
Resolution: The Subscription node you are trying to select no longer represents an existing subscription.
The subscription may have been removed by a concurrent xDB Replication Console or xDB Replication
Server CLI session. Click the Refresh icon in the xDB Replication Console toolbar to display the current
replication tree.
Subscription Service connection failure.
Resolution: Verify that the subscription server is running. See Section 10.3.4.2
'Synchronize Publication' process failed for one or more master nodes. Please
see logs for more details.
Resolution: Synchronization replication failed to complete for all target databases in the multi-master
replication system due to the unavailability of some target database. See the publication server log file for
details. See Section 10.3.2.
A table with large object type PK attribute cannot be published for
(synchronize) incremental replication.
Resolution: Oracle doesn’t log changes for a large object column. Such a column cannot be referenced
in the triggers that log changes to the shadow tables. Use snapshot-only replication instead.
Test result: Failure
Database connection information test failed. Connection refused. Check that the
hostname and port are correct and that the postmaster is accepting TCP/IP
connections.
Resolution: Occurs when testing the connection of a publication or subscription database definition. The
publication or subscription server cannot connect to the database server network location given in the Add
Database dialog box. Verify that the correct IP address and port for the database server are given. Verify
that the database server is running and is accessible from the host running the publication or subscription
server.
Test result: Failure
Database connection information test failed. FATAL: no pg_hba.conf entry for
host "xxx.xxx.xx.xxx", user "user_name", database "db_name", SSL off
Resolution: Occurs when testing the connection of a publication or subscription database definition. The
publication or subscription server is not permitted to connect to the database at the network location given
in the Add Database dialog box. Verify that the database host IP address, port number, database user name,
password, and database identifier are correct. Verify there is an entry in the pg_hba.conf file permitting
access to the database by the given user name originating from the IP address where the publication or
subscription server is running.
Test result: Failure
Database connection information test failed. IO exception: The Network Adapter
could not establish the connection.
Resolution: Verify that the database server is running. For Oracle, verify that the Oracle listener
program lsnrctl is running.
Test result: Failure
The target database server cannot be registered for WAL based logical
replication. Reason: The database server is not configured for logical
replication. Reason: FATAL: must be superuser or replication role to start
walsender.
Resolution: Occurs when attempting to add a publication database definition with the log-based method
Copyright © 2010 - 2018 EnterpriseDB Corporation. All rights reserved. 642
EDB Postgres Replication Server User’s Guide
Error Messages and Resolutions
of synchronization replication (that is, WAL based logical replication), and the publication database user is
not a superuser or does not have REPLICATION privilege. Grant the publication database user the
appropriate privilege or specify a different database user who has the appropriate privilege for logical
replication as the publication database user. See Section 2.2.10.
Test result: Failure
The target database server cannot be registered for WAL based logical
replication. Reason: The database server is not configured for logical
replication. Reason: FATAL: no pg_hba.conf entry for replication connection
from host "xxx.xxx.xx.xxx", user "user_name", SSL off
Resolution: Occurs when attempting to add a publication database definition with the log-based method
of synchronization replication (that is, WAL based logical replication), and there is no entry in the
pg_hba.conf file where the DATABASE field is set to replication for user_name. The
pg_hba.conf file of the target database server must contain a replication entry for the publication
database user name specified when creating the publication database definition. See Section 2.2.10.
Test result: Failure
The target database server cannot be registered for WAL based logical
replication. Reason: The database server is not configured for logical
replication. Reason: FATAL: number of requested standby connections exceeds
max_wal_senders (currently n)
Resolution: Occurs when attempting to add a publication database definition with the log-based method
of synchronization replication (that is, WAL based logical replication), and the additional concurrent
connection for logical replication exceeds the current setting, n, of the max_wal_senders configuration
parameter in the postgresql.conf file. Increase the value of max_wal_senders in the
postgresql.conf file of the database server running the publication database. Restart the database server
containing the publication database. See Section 2.2.10.
Test result: Failure
The target database server cannot be registered for WAL based logical
replication. Reason: The target database server version x.x does not support
WAL logical decoding.
Resolution: Occurs when attempting to create a publication database definition with the log-based
method of synchronization replication (that is, WAL based logical replication), and the Postgres database
server is not version 9.4 or later. Only Postgres database servers of version 9.4 or later support the log-
based method of synchronization replication. See Section 2.2.10.
Unable to apply DDL changes.
Resolution: The DDL statements in the text file specified for the DDL change replication feature
contain syntax errors or are not supported by the DDL change replication feature. See Section 7.8.
Unable to communicate with remote server.
Resolution: Occurs when attempting an operation such as performing synchronization replication or
creating a schedule on a publication or subscription database that cannot be accessed by the xDB
Replication Console. Verify that the publication and/or subscription servers are running. Verify that the
database servers of the publication and/or subscription databases are running.
Unable to create schema tables in target master database.
Unable to create publication shadow tables.
Unable to create subscription schema tables.
DB-42501: com.edb.util.PSQLException: ERROR: permission denied for relation
pg_class.
Resolution: Occurs when attempting to create an MMR publication database definition and the
publication server is unable to create the control schema objects in the new publication database. This
typically results when creating a second publication database definition and the publication server is unable
Copyright © 2010 - 2018 EnterpriseDB Corporation. All rights reserved. 643
EDB Postgres Replication Server User’s Guide
Error Messages and Resolutions
to copy by snapshot the control schema objects from the controller database to the new publication
database. The publication database user of the new publication database must be a superuser. In addition, in
system catalog table pg_catalog.pg_authid, column rolcatupdate must be set to true for this
superuser. See Section 10.4.4.
Unable to create Subscription subscription_name. Reason: Connection rejected:
FATAL: no pg_hba.conf entry for host "xxx.xxx.xx.xxx" user "user_name",
database "db_name", SSL off
Resolution: Occurs when creating a subscription. The subscription server running on host
xxx.xxx.xx.xxx could not access the controller database. Verify that the pg_hba.conf file on the
controller database server permits access from the subscription server host
Unable to create subscription schema tables. Org.postgresql.util.PSQLException:
FATAL: no pg_hba.conf entry for host "xxx.xxx.xx.xxx" user "user_name",
database "db_name", SSL off
Resolution: Occurs when creating a subscription. The subscription server running on host
xxx.xxx.xx.xxx could not access the publication database. Verify that the pg_hba.conf file on the
publication database server permits access from the subscription server host.
Unable to create subscription schema tables. The database type is not
supported.
Resolution: The subscription database type is not supported for the intended publication database type.
See Section 10.1.3.2 for a list of permitted source and target database server configurations.
Unable to create subscription schema tables. The target database schema already
contains one or more tables with the same name as the table(s) in the source
database.
Resolution: The subscription server was unable to create a subscription table definition in the intended
target schema. Typically, the reason is that a table with the same name already exists in the target schema
of the subscription database. This can occur if you create a subscription, then remove it, but fail to drop the
table definitions created under the target schema, then try to create the subscription a second time.
Unable to create subscription schema tables.
Unable to create publication shadow tables.
Unable to create subscription schema tables.
DB-42501: com.edb.util.PSQLException: ERROR: permission denied for relation
pg_class.
Resolution: Occurs when attempting to create an SMR publication database definition and the
publication server is unable to create the control schema objects in the new publication database. This
typically results when creating a second publication database definition and the publication server is unable
to copy by snapshot the control schema objects from the controller database to the new publication
database. The publication database user of the new publication database must be a superuser. In addition, in
system catalog table pg_catalog.pg_authid, column rolcatupdate must be set to true for this
superuser. See Section 10.4.4.
Unable to perform snapshot for subscription subscription_name. Reason: DB-
42501: com.edb.util.PSQLException: ERROR: permission denied for relation
pg_class.
Resolution: Occurs when attempting a snapshot replication. The database user of the database receiving
the snapshot must be a superuser. In addition, in system catalog table pg_catalog.pg_authid, column
rolcatupdate must be set to true for this superuser. See Section 10.4.4.
Unable to perform snapshot for subscription subscription_name. Reason:
org.postgresql.util.PSQLException: FATAL: no pg_hba.conf entry for host
"xxx.xxx.xx.xxx", user "user_name", database "db_name", SSL off
Copyright © 2010 - 2018 EnterpriseDB Corporation. All rights reserved. 644
EDB Postgres Replication Server User’s Guide
Error Messages and Resolutions
Resolution: Occurs when attempting a snapshot replication. The publication server running on host
xxx.xxx.xx.xxx could not access the subscription database. Verify that the pg_hba.conf file on the
subscription database server permits access from the publication server host.
Unable to synchronize. Reason: FATAL: no pg_hba.conf entry for host
"xxx.xxx.xx.xxx", user "user_name", database "db_name", SSL off
Reason: Occurs during an implicit synchronization following snapshot replication. The publication server
running on host xxx.xxx.xx.xxx could not access the subscription server’s controller database. Verify that
the pg_hba.conf file on the subscription server permits access from the publication server host using
network address xxx.xxx.xx.xxx.
Unable to update publication database information. Reason: Publication control
schema does not exist on target database.
Resolution: The control schema objects in the publication database may have been deleted or corrupted.
For an Oracle publication database the control schema objects are located in the publication database user’s
schema. For a Postgres or SQL Server publication database the metadata database objects are located in
schemas _edb_replicator_pub, _edb_replicator_sub, and _edb_scheduler. See Section
10.3.4.3.
The user has insufficient privileges to manage publications. Grant required
privileges as listed below and then proceed with operation.
Resolution: An Oracle publication database user must have CONNECT, RESOURCE, and CREATE ANY
TRIGGER privileges.
10.3.2 Where to Look for Errors
There are a number of places to look to find more detailed information about a replication
error that may have occurred. This section provides a guide as to where to look for
various types of errors.
10.3.2.1 General Replication Status
In the xDB Replication Console, view the replication history. See Section 7.4.
10.3.2.2 Snapshot Replication Failures
View the log file found in the following path:
For Linux:
/var/log/xdb-x.x/mtk.log
For Windows:
POSTGRES_HOME\.enterprisedb\xdb\x.x\mtk.log
Copyright © 2010 - 2018 EnterpriseDB Corporation. All rights reserved. 645
EDB Postgres Replication Server User’s Guide
POSTGRES_HOME is the home directory of the Windows postgres account
(enterprisedb account for Advanced Server installed in Oracle compatible
configuration mode). The specific location of POSTGRES_HOME is dependent upon your
version of Windows. The xDB Replication Server version number is represented by x.x.
See Section 10.4.1.1 for more information on setting log file options.
10.3.2.3 Synchronization Replication Failures
Check the database server log file.
The typical default location of these files is:
POSTGRES_INSTALL_HOME/data/pg_log
10.3.2.4 Publication and Subscription Server Startup Failures
View the publication server and subscription server log files pubserver.log[.n] and
subserver.log[.n] in the following directory:
For Linux:
/var/log/xdb-x.x
For Windows:
POSTGRES_HOME\.enterprisedb\xdb\x.x
[.n] is an optional, integer suffix whose presence depends upon the
logging.file.count configuration option described in Section 10.4.1.1.
POSTGRES_HOME is the home directory of the Windows postgres account
(enterprisedb account for Advanced Server installed in Oracle compatible
configuration mode). The specific location of POSTGRES_HOME is dependent upon your
version of Windows. The xDB Replication Server version number is represented by x.x.
Note: The severity level of messages logged in these files can be controlled by a
configuration option. See Section 10.4.1.1.
For Linux only: View the publication service and subscription service startup log files
edb-xdbpubserver.log and edb-xdbsubserver.log as well as the service script
log files edb-xdbpubserver_script.log and edb-xdbsubserver_script.log
in directories /var/log/edb/xdbpubserver and /var/log/edb/xdbsubserver.
These log files contain the output from the scripts used to start the publication server and
subscription server, and can typically be used to confirm the port number on which the
publication and subscription servers were started.
Copyright © 2010 - 2018 EnterpriseDB Corporation. All rights reserved. 646
EDB Postgres Replication Server User’s Guide
Note: The publication service and subscription service startup log files are not generated
for Windows and Mac OS X operating systems.
If there is an entry for a controller database in the xDB Replication Configuration file,
verify that this controller database is accessible with the designated connection
information. The controller database parameters are host, port, type, user, and
password.
The following is an example of the content of an xDB Replication Configuration file with
an Oracle database as the controller database:
#xDB Replication Server Configuration Properties
#Tue May 26 13:45:37 GMT-05:00 2015
port=1521
admin_password=ygJ9AxoJEX854elcVIJPTw\=\=
user=pubuser
admin_user=admin
type=oracle
password=ygJ9AxoJEX854elcVIJPTw\=\=
database=xe
host=192.168.2.23
See Section 2.3.1.3 for information on the xDB Replication Configuration file.
Also check the database server log file of the controller database.
10.3.2.5 Database Server Errors
Check the database server log file.
The typical default location of these files is:
POSTGRES_INSTALL_HOME/data/pg_log
10.3.2.6 Oracle Errors
For problems in Oracle, first find the directory locations of the log files by issuing the
following commands in SQL*Plus:
SQL> SHOW PARAMETER USER_DUMP_DEST;
NAME TYPE VALUE
------------------------------------ ----------- ------------------------------
user_dump_dest string /usr/lib/oracle/xe/app/oracle/
admin/XE/udump
The directory given by parameter USER_DUMP_DEST contains errors given by user
processes.
SQL> CONNECT system/password
Connected.
SQL> SHOW PARAMETER BACKGROUND_DUMP_DEST;
Copyright © 2010 - 2018 EnterpriseDB Corporation. All rights reserved. 647
EDB Postgres Replication Server User’s Guide
NAME TYPE VALUE
------------------------------------ ----------- ------------------------------
background_dump_dest string /usr/lib/oracle/xe/app/oracle/
admin/XE/bdump
The directory given by parameter BACKGROUND_DUMP_DEST contains errors given by the
Oracle background processes.
Find the latest log file in the preceding directories to investigate the problem.
10.3.3 Common Problem Checklist
Use the following checklist to verify that the proper configuration steps have been
followed. Omission of one or more of these steps is a common source of errors.
Step 1: Verify that the database server of the publication database, the database server of
the subscription database (for single-master replication systems), and the database servers
of the master nodes (for multi-master replication systems) are all running.
Step 2: When viewing information in the xDB Replication Console, click the Refresh
icon in the toolbar to ensure you are viewing the most current information, especially
after making a configuration change to your replication system.
Step 3: Verify that the publication server and the subscription server (for single-master
replication systems) are running. If they are not running and cannot be started see Section
10.3.4.2.
Step 4: If you are using an Oracle publication or subscription database, verify that the
Oracle JDBC driver file has been copied to the XDB_HOME/lib/jdbc directory.
XDB_HOME is the location where you installed xDB Replication Server.
See Section 5.1.3.1.
Step 5: Verify that the necessary privileges have been granted to the publication database
user.
For an Oracle publication database, verify that the publication database user has
CONNECT, RESOURCE, and CREATE ANY TRIGGER privileges.
See Section 5.1.4.1.
For a SQL Server publication database, verify the following:
 In the msdb database, verify that the database user mapped to the SQL Server
login given in the publication database definition has EXECUTE and SELECT
privileges on schema dbo.
Copyright © 2010 - 2018 EnterpriseDB Corporation. All rights reserved. 648
EDB Postgres Replication Server User’s Guide
 In the publication database, verify that the database user mapped to the SQL
Server login given in the publication database definition has its default schema set
to the schema containing the xDB Replication Server metadata database objects.
 For the same database user discussed in the prior paragraph, verify that this
database user is either the owner of the schema containing the xDB Replication
Server metadata database objects, or has the following privileges on this schema:
ALTER, EXECUTE, SELECT, INSERT, UPDATE, and DELETE.
 For the same database user discussed in the prior paragraph, verify that this
database user has CREATE TABLE and CREATE PROCEDURE privileges.
 For the same database user discussed in the prior paragraph, verify that this
database user has ALTER privilege on the publication tables.
 For any database user that will be updating the publication tables, verify that these
database users have EXECUTE, SELECT, and INSERT privileges on the schema
containing the xDB Replication Server metadata database objects.
See Section 5.1.4.2.