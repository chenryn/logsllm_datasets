总体描述：
功能定义
随着BOMC6.0工程建设，各省BOMC系统的数据管控平台已经全面落地，涵盖数据采集、数据处理、数据存储、数据检索等功能范畴，实现了对生产系统数据和BOMC系统数据的统一管控。本期智能化运维专题将在数据集中管理的基础上，结合业界先进的AIOps理念，将人工智能技术引入IT运维领域，赋予BOMC系统以学习和感知的能力，构建数据智能化应用场景，提升运维智能化水平。
参照《企业级AIOps实施建议白皮书》中对AIOps的定义：AIOps，即 Artificial Intelligence for IT Operations，智能运维，将人工智能应用于运维领域，基于已有的运维数据（日志、监控信息、应用信息等），通过机器学习的方式来进一步解决自动化运维没办法解决的问题。
智能化运维专题旨在利用大数据、机器学习和其他分析技术，通过主动预测、动态分析等方式，增强BOMC系统IT运营能力的智能化水平，为生产系统运维工作提供更高质量、更高效率、更合理成本的服务。整体功能框架
智能运维整体功能框架如下：
智能化运维专题功能框架
原始数据：基于数据管控平台所集中管理的各类业务数据和运维数据，包括生产系统数据和BOMC系统数据，其中生产系统数据包括BOSS、CRM等业务支撑系统产生的应用交易日志、应用运行日志和系统日志等；BOMC系统数据包括运维数据、资源数据、指标数据、探测数据、告警数据等。
数据接入：与各类数据源进行对接，提供数据采集、数据清洗和数据分发等功能，其中数据采集包括有代理和无代理的采集方式；数据清洗支持对满足清洗规则的数据进行丢弃，只保留符合条件的数据；数据分发支持适配不同的数据接收方，例如Oracle、ElasticSearch、Kafka、MongoDB等。
数据处理：为数据智能化分析提供多种数据处理手段，保证数据样本的可用性和准确性，包括数据解析（正则解析、Key-Value解析、分隔符解析）、数据清理（合规检测、缺失值处理、噪声处理）、数据归约（维度归约、数量归约）和数据变换（规范化、离散化、数据汇聚）等处理手段。数据存储：为不同类型数据提供不同的存储方式，包括关系型数据存储、非关系型数据存储和数据缓存等。
AI建模：提供算法分析能力、模型分析能力和模型评估能力，其中模型分析支持基于数据样本和算法进行建模和参数调整，输出数据分析结果；模型评估支持对已有分析模型进行评估，为模型调优提供数据依据；算法分析能力应提供常用算法，例如趋势分析、聚类分析、关联分析和分类等算法，如下：
趋势分析算法：线性回归算法、多元回归算法、ARIMA算法等；
聚类分析算法：DBSCAN算法、K-Means算法、CLARANS算法等；
关联分析算法：Apriori算法、Pearson算法、FP-Growth算法等；
分类分析算法：ID3算法、CART算法、随机森林算法等。
可视化：为数据分析的输出结果提供后续的数据呈现能力支撑，支持以仪表盘的形式进行呈现视图定制，根据数据输出结果的不同，呈现视图应支持多种数据呈现方式，每个仪表盘可包含多个呈现视图。业务场景：基于对日常业务管理、运维支撑的工作场景考虑，通过采用人工智能分析手段对各类业务数据、运维数据等进行计算和分析，构建单场景智能化运维能力，例如告警根因分析、告警收敛、智能异常检测、智能容量管理、智能运维助手等场景。
功能演进
智能化运维专题本期建议在增强数据接入和数据处理能力的基础上，实现基本的AI建模能力，同时结合BOMC日常业务场景构建多个智能化运维场景，最终提升运维工作效率。
| 功能 | 现状 | 本期 | 未来 |
|---|---|---|---|
| 业务场景 |开始进行AIOps探索，形成少量单场景的智能运维能力 |构建单场景的智能运维能力，包括告警根因分析、告警收敛、智能异常检测、智能容量管理、智能运维助手、AI算法实践平台等。 |串联多个单场景的智能运维能力，形成多场景协同的流程化智能运维能力。 |
| 可视化 |具备仪表盘定制能力，能提供多种数据呈现形式。 |无变化 | || 可视化 |具备仪表盘定制能力，能提供多种数据呈现形式。 |无变化 | |
| AI建模 |无 |建设2-3类算法分析（趋势预测、聚类分析、关联分析、分类分析）； 初步建立模型分析和模型评估能力。 |丰富算法类型，完善模型分析和模型评估能力。 |
| 数据存储 |具备关系型数据存储、非关系型数据存储和数据缓存等存储方式。 |无变化 | |
| 数据处理 |提供结构化数据、非结构化数据和流式数据处理。 |建设数据解析（正则解析、Key-Value解析、分隔符解析）、数据清理（合规检测、缺失值处理、噪声处理）、数据归约（维度归约、数量归约）和数据变换（规范化、离散化、数据汇聚）等处理手段。 |丰富数据解析、数据清理、数据归约和数据变换等方面的手段。 |
| 数据接入 |具备数据采集能力，包括有代理和无代理的数据采集方式。 |建设数据清洗和数据分发功能。 | |
智能运维场景实施建议智能运维场景实施建议
告警根因分析
场景描述
随着业务的不断发展，主机、网络、模块、应用、集群各层级运维对象的数量飞速增长，告警的数量和种类日益增多。尤其是系统故障期间运维人员收到数量庞大、类型复杂的告警，如何准确、快速定位到导致故障发生的根本告警以快速响应和处理，对缩短故障恢复时长等起到十分重要的影响。
告警根因分析是指利用资源关系数据、应用上下游依赖拓扑数据、人工梳理的因果规则、数据挖掘和机器学习等技术，分析和发现告警之间的关联关系，最终实现根本告警的定位。
功能描述
【数据源】
资源关系数据
资源关系数据应建立在准确的CMDB基础上，需要准确记录主机、主机上的虚拟机、容器、进程、应用、业务等资源关联关系。资源关系后续将参与关联分析，便于溯源。
上下游拓扑关系数据
用于描述应用上下游依赖拓扑结构的相关数据
故障因果规则库上下游拓扑关系数据
用于描述应用上下游依赖拓扑结构的相关数据
故障因果规则库
运维人员在排障中积累了丰富的经验，如主机宕告警产生后，相关的进程、数据库、应用、业务等会产生一系列的告警。需将运维人员积累的故障因果规则入库供根本告警预测
告警数据
告警数据是告警根因分析的基础数据，同时告警数据的属性信息可支持资源关系、上下游拓扑、规则库的适配等。
【功能方案】
告警根因分析
基于资源关系的告警根因分析
资源关系的逻辑维度包含了应用实例、模块、集群等层次，物理维度包含机器和机房层次。一个层次同时刻的报警，大多数都存在着一定联系，因而可以由这些资源关系分析出根本告警。例如：一个主机出现故障，主机上的虚拟机、应用都会出现告警，通过资源关系的分析可判断主机告警为根本告警。
 基于上下游拓扑的告警根因分析基于上下游拓扑的告警根因分析
根据应用的上下游依赖拓扑，对同一时刻的上下游告警进行关联，可以准确的将最下游的应用故障定位为根本告警。例如A应用调用数据库集群B，B出现故障时，A应用同样会发生故障告警，此时可以溯源到数据库集群B是根源
基于数据挖掘和机器学习的告警根因分析。
通过对大量的历史告警数据进行聚类和关联分析训练，可以发现潜在的告警关联规律，形成告警关联规则库。同时定期将新产生的告警数据输入告警关联分析模型进行训练，可以不断更新已有的告警关联规则，使得关联分析结果日趋准确。当实时告警产生时，可匹配告警关联分析规则来判断根本告警。
可视化展现
运维人员可查看基于分析后的关联告警，界面可展现每个告警是否是根本告警的权重，对一段时间的告警数据进行分析，在页面以列表、图表等形式展现。列表可以根据告警信息进行筛选过滤，图表可以展现告警间的关联关系。
人工标注（可选）人工标注（可选）
在基于数据挖掘和机器学习的告警根因分析方案中，支持通过人工对告警根因分析的结果进行标注，保留具有业务关联关系的根因分析规则，删除没有业务关联关系或对分析结果产生干扰的根因分析规则，以人工干预的方式达到提升算法分析结果准确性的目的。
适用范围
系统故障期间告警根因分析：
告警根因分析可适用于Iaas、Paas、Saas各层级的多个运维对象产生告警的综合分析。以下列具体故障举例：
1、交换机端口down，触发交换机端口down告警。
2、由于交换机端口down，网络不通，导致监控采集程序采集主机访问失败，触发服务器宕机告警。
3、同理监控采集程序采集主机上部署的数据库业务应用等信息都访问失败，触发各种告警，如数据库连接告警，http服务告警，应用接口告警，和业务告警等。从此场景可以看出，主机及其上部署的应用数据库实际并没有故障发生，只是由于网络不通导致触发的告警，根本告警在于交换机端口down告警。可以认为其他告警是由于根本告警引发的子告警，存在着关联关系。通过智能告警根因分析，可判断出交换机端口down告警为此次系统故障的根本告警。
预期效果
根本告警准确快速定位
从大量的告警中快速定位到根本告警，缩短故障排查及恢复时间。
告警收敛
场景描述
在重大故障发生期间，多层次不同纬度的运维对象容易产生告警风暴，重要的告警信息淹没在海量冗余告警中，运维人员需要花费大量精力查看冗余告警。
告警收敛是指将告警中大量相似、重复事件的冗余告警进行收敛，防止重要核心的告警淹没在大量冗余告警中，避免运维人员忽视重要核心告警。
功能描述
【数据源】
数据来源与2.1.1中告警根因分析数据源相同。
【功能方案】【数据源】
数据来源与2.1.1中告警根因分析数据源相同。
【功能方案】
告警收敛是基于告警根因分析的输出结果，对告警发送策略进行灵活调整的一种智能化处理方案。在告警根因分析的功能方案基础上，需支持下列功能：
冗余告警收敛
针对具备关联关系的告警集，将其中非根本告警进行压缩处理，不向告警接收人发送。同时建议可在整体故障恢复后发送恢复短信，便于运维人员获知故障处理结果。
告警接收人发送策略优先级
同一告警监控点配置多个接收人时，不同接收人告警发送频率支持分级配置，即最高优先级的接收人和低优先级的接收人的告警发送频次可有所差异。同时需保证原来的告警升级策略需不受到影响。
原始告警明细查询
支持对已经压缩的原始告警明细进行查询和展现，如页面登录、告警短信追加URL等方式。便于定期开展告警收敛成功率的分析和核查。
适用范围
大型故障告警风暴收敛：适用范围