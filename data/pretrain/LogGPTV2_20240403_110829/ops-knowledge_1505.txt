User: We need to aggregate the log files on multiple servers to a central server for unified management. Please provide a feasible solution with relevant scripts and commands.
Assistant: Solution: 1. Install Logstash and Elasticsearch on the central server as a log collection and analysis platform; 2. Install Filebeat on each server as a log collection tool; 3. Configure Filebeat and add the path of the log file to be collected to the configuration file , and set the IP and interface output to the central server (the default is 5044); 4. Configure Logstash on the central server, use the beats input plug-in to monitor the 5044 interface, receive log data from Filebeat, and use grok filter to parse the log format; 5. Use Elasticsearch as the database for storage and indexing, and store the parsed log data in Elasticsearch; 6. You can use Kibana to visualize the log data. Scripts and commands: 1. Install Logstash and Elasticsearch on the central server: ``` # Install Elasticsearch wget https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-7.14.0-linux-x86_64.tar.gz tar -zxvf elasticsearch-7.14.0-linux-x86_64.tar.gz # Start Elasticsearch cd elasticsearch-7.14.0/bin ./elasticsearch # Install Logstash wget https://artifacts.elastic.co/downloads/logstash/logstash-7.14 .0.tar.gz tar -zxvf logstash-7.14.0.tar.gz ``` 2. Install Filebeat on each server: ``` # Install Filebeat wget https://artifacts.elastic.co/downloads/beats /filebeat/filebeat-7.14.0-linux-x86_64.tar.gz tar -zxvf filebeat-7.14.0-linux-x86_64.tar.gz # Configure Filebeat vim filebeat.yml # Add the log file path to be collected to filebeat .yml file, and set the IP and interface output to the central server # Start Filebeat ./filebeat -e -c filebeat.yml ``` 3. Configure Logstash on the central server: ``` # Create logstash.conf configuration file cd logstash-7.14.0/bin vim logstash.conf # Add the following content input { beats { port => "5044" } } filter { grok { match => { "message" => "%{COMBINEDAPACHELOG}" } } } output { elasticsearch { hosts => ["localhost:9200"] index => "logs-%{+YYYY.MM.dd}" } } # Start Logstash ./logstash -f logstash.conf ``` 4. Use Kibana Visually display log data. The above is a basic log collection and analysis solution, which can be adjusted and optimized according to actual needs.