title:Inferring regional access network topologies: methods and applications
author:Zesen Zhang and
Alexander Marder and
Ricky K. P. Mok and
Bradley Huffaker and
Matthew Luckie and
Kimberly C. Claffy and
Aaron Schulman
Inferring Regional Access Network Topologies:
Methods and Applications
Alexander Marder
CAIDA, UC San Diego
PI:EMAIL
CAIDA, UC San Diego
PI:EMAIL
Ricky Mok
Bradley Huffaker
CAIDA, UC San Diego
PI:EMAIL
Zesen Zhang
UC San Diego
PI:EMAIL
Matthew Luckie
University of Waikato
PI:EMAIL
KC Claffy
CAIDA, UC San Diego
PI:EMAIL
Aaron Schulman
UC San Diego
PI:EMAIL
ABSTRACT
Using a toolbox of Internet cartography methods, and new ways
of applying them, we have undertaken a comprehensive active
measurement-driven study of the topology of U.S. regional access
ISPs. We used state-of-the-art approaches in various combinations
to accommodate the geographic scope, scale, and architectural rich-
ness of U.S. regional access ISPs. In addition to vantage points from
research platforms, we used public WiFi hotspots and public transit
of mobile devices to acquire the visibility needed to thoroughly
map access networks across regions. We observed many different
approaches to aggregation and redundancy, across links, nodes,
buildings, and at different levels of the hierarchy. One result is sub-
stantial disparity in latency from some Edge COs to their backbone
COs, with implications for end users of cloud services. Our meth-
ods and results can inform future analysis of critical infrastructure,
including resilience to disasters, persistence of the digital divide,
and challenges for the future of 5G and edge computing.
CCS CONCEPTS
• Networks → Public Internet; Logical / virtual topologies;
Physical topologies; Network measurement.
KEYWORDS
Internet topology, Access networks, Mobile networks, Traceroute
ACM Reference Format:
Zesen Zhang, Alexander Marder, Ricky Mok, Bradley Huffaker, Matthew
Luckie, KC Claffy, and Aaron Schulman. 2021. Inferring Regional Access
Network Topologies: Methods and Applications. In Internet Measurement
Conference (IMC ’21), November 2–4, 2021, Virtual Event, USA. ACM, New
York, NY, USA, 19 pages. https://doi.org/10.1145/3487552.3487812
This work is licensed under a Creative Commons Attribution International 4.0 License.
IMC ’21, November 2–4, 2021, Virtual Event, USA
© 2021 Association for Computing Machinery.
ACM ISBN 978-1-4503-9129-0/21/11. . . $15.00
https://doi.org/10.1145/3487552.3487812
720
Figure 1: An Internet Service Provider (ISP) network can be
divided into backbone and regional access.
1 INTRODUCTION
ISP regional access networks are an essential component of an ISP’s
infrastructure: they bridge millions of users’ last-mile access links
to the ISP’s nearest backbone routers, which may be hundreds of
miles away, to reach the Internet. Access networks strategically
aggregate traffic in order to balance reliability and performance
against the cost of providing connectivity over large regions (Fig. 1).
Fiber cuts or other hardware failures can lead to large-scale outages
spanning neighborhoods, counties, or entire states. Risk of outages
motivates ISPs to provide redundancy within and across levels of
aggregation. But regional access networks are remarkably opaque,
which makes it challenging for academics to quantitatively study
their role in the continually evolving ecosystem.
We present a measurement-driven exploration of regional access
network topologies, through the lens of aggregation and redun-
dancy as the foundations of scalability. Building on advances in
Internet measurement methods and tools over the last two decades,
we first establish and demonstrate the ability for an independent
third-party to infer the topologies of different regional access net-
works, including aspects of the underlying physical (layer-1) topol-
ogy, using only active measurements. We then perform measure-
ment campaigns to infer and compare how major U.S. wireline
(Comcast, Spectrum, AT&T) and mobile (AT&T, Verizon, T-Mobile)
ISPs incorporate aggregation into their regional access network
topologies. We show how analyzing these topological differences
across providers and even across regions of the same access ISP can
yield insights into the propagation of large correlated last-mile link
failures [23, 62], sources of edge computing latency [58] and how
to minimize it [52], performance limitations of metro-area fiber
networks [42], and the evolving Internet ecosystem [21].
regional networkInternetbackbone networkregional networkEdge COsAggregation COsBackbone COsConsumerIMC ’21, November 2–4, 2021, Virtual Event, USA
Zesen Zhang, Alexander Marder, Ricky Mok, Bradley Huffaker, Matthew Luckie, KC Claffy, and Aaron Schulman
Our methodology synthesizes the state-of-the-art in three di-
mensions of Internet router-level topology analysis: combining
traceroute paths from distributed vantage points; extracting seman-
tics from DNS hostnames and IPv6 addresses of observed topology;
and IP address alias resolution to further refine topology inferences.
Our methodology leverages ideas that are well-established in the
Internet measurement community, but we used them in different
combinations, and with creative refinements, to accommodate the
geographic scope, scale, and architectural richness of U.S. regional
access ISPs. One of our contributions is effectively a recipe book of
how to gain insight into network topology structure under different
sets of constraints.
For example, the largest U.S. cable providers today tend to have
near-universal reverse DNS on their router IPs, but hostnames
are often stale. We devised heuristic methods to filter out stale or
misleading hostnames, facilitating a comprehensive mapping of
their regional topologies.
Networks without geographically meaningful internal hostnames
require another way to infer geographic coverage of routers in the
Central Offices (COs), such as probing from many geographically
distributed VPs in the regional network. This requirement high-
lights the most common challenge in inferring internal network
topologies, well-known to the research community: many networks
provide more (or more accurate) visibility to internal vantage points
than to external ones, especially for mobile networks. For wireline
networks, we obtained internal vantage points by wardriving public
WiFi networks in fast-food chains.
Mobile (cellular) access networks present many challenges: e.g.,
limited rDNS and blocking external probing. To capture this topol-
ogy, we used IPv6 address structure and a new approach to gain
county-wide internal visibility into mobile networks: cross-country
shipping of mobile phones while they actively perform energy-
efficient network measurements.
Our measurement methodology contributions are:
• Cost-effective approaches to procuring vantage points; energy-
efficient approaches to sustaining mobile vantage points
while devices are in transit.
• Analysis of DNS hostnames and IPv6 addresses to infer and
geolocate topology, as well as strategically select probe tar-
gets to fill in coverage gaps.
• Heuristics that leverage active measurement techniques to
filter noise (e.g., stale DNS information) or erroneously in-
ferred hops, and infer missing (e.g., non-responding) IP hops.
Our empirical contributions result from applying our methods
to previously unmapped parts of the infrastructure: wireline and
mobile regional access networks. We gather enough data to ground
the following discoveries:
within and across levels of the hierarchy.
• Topological redundancy—a metric of resilience—varies widely
• Layer 3 topology information, including hostnames and IPv6
addresses, can reveal building locations and building-level
redundancy within access networks.
• Regional access networks leverage a range of aggregation
strategies to accommodate diverse markets, environments,
and technologies. One result is substantial disparity in la-
tency from some Edge COs to their Backbone COs.
721
Figure 2: Routers in EdgeCOs aggregate users while routers
in AggCOs aggregate EdgeCOs.
These measurements inform analysis of critical infrastructure,
including resilience to disasters, persistence of digital divide, and
challenges for edge computing.
2 BACKGROUND
Like any network, regional access networks must balance reliability
and performance against the cost of deploying and operating an
infrastructure. For these networks, an additional challenge is achiev-
ing all these aspirations at scale—in terms of market size and geo-
graphic scope—and adapting to evolution of technology and indus-
try structure. The primary architectural mechanism used to achieve
this scale is aggregation. Regional networks aggregate traffic in Cen-
tral Offices (COs) through a hierarchy of routers (and switches). An
Edge CO (or EdgeCO) aggregates traffic from many thousands of
last-mile links. Similarly, an Aggregation CO (or AggCO) houses
routers to aggregate traffic from dozens of EdgeCOs, often across
metropolitan areas or entire states. Backbone COs (or BackboneCO)
house equipment to aggregate traffic from AggCOs—and sometimes
EdgeCOs, and provide transit services either via the access network
provider’s backbone network, or via other ISPs. Fig. 2 illustrates
how ISPs use redundancy across layers of aggregation to provide
resiliency in case of link or node failures.
The topology of this regional network infrastructure frames
the performance and resilience of the networks, as traffic must
cross the regional access links to reach the nearest Internet PoP.
If the nearest PoP is far away, users may experience significant
minimum latency [54]. The level of redundancy in any component
of the network similarly provides an upper bound on robustness in
different parts of the network.
2.1 Evolution of access networks
We provide some historical background for context on the chal-
lenges and opportunities for measurement of these networks to
study their performance and reliability.
A typical access network is physically constructed of several fiber
rings (Fig. 3). These networks generally use three hierarchical rings.
Backbone COsEdge COsAggregation COsLast-mile linksInternetregional networkbackbone/PoPInferring Regional Access Network Topologies: Methods and Applications
IMC ’21, November 2–4, 2021, Virtual Event, USA
Figure 3: (a) Access networks are physically constructed of a
hierarchy of fiber rings. (b) Overlapping Ethernet star topolo-
gies are built on top of these rings.
Last-mile links (e.g., Cable/Passive Optical/DSL) are aggregated over
Last-mile Loops that reach into neighborhoods and terminate at
EdgeCOs. EdgeCO traffic is aggregated in Edge Rings that terminate
at one or more AggCOs. Then AggCO traffic is aggregated on Core
Ring to BackboneCOs. Early Internet access network architectures
used shared SONET on these fiber rings. All traffic passed through
every CO in reserved time slots to reach aggregation points at the
higher layer, which resulted in suboptimal bandwidth and latency
performance. In the 1990s, in response to exploding demand for
Internet bandwidth in part due to IP convergence (moving all voice
and data services to use IP), access networks gradually replaced
these SONET ring topologies with Ethernet-based star topologies.
Often repurposing the same physical plant that SONET used, ISPs
deployed direct Ethernet links between EdgeCOs, AggCOs, and
BackboneCOs using techniques such as Dense Wave Division Mul-
tiplexing (DWDM) [80].
With DWDM and the addition of reconfigurable optical switches,
operators are now capable of flexibly configuring layer-1 topology
on these physical fiber rings. However, there is no standard way to
design such a topology, i.e., how many or which EdgeCOs connect
to how many or which AggCOs. Designs are driven by demographic
(population), geographic (or geological) and regulatory constraints,
especially when crossing state boundaries. To improve resilience
or accommodate high-traffic regions, some components may use
a full mesh (e.g., between the backbone and aggregation layers
in Fig. 2) rather than star topology. These design choices have
implications for accommodating future services, e.g., low-latency
high-bandwidth edge services in COs [52].
Another driving force in network design is reliability and ro-
bustness in the face of inevitable failures of components. SONET
was especially robust to fiber cuts and router failures, since traf-
fic could travel in either direction around the ring. The Ethernet
star topology does not have this feature. To compensate, ISPs add
redundant routers and/or links over existing fiber rings, creating
“dual ring/star” topologies (Fig. 3).
Each network independently chooses how to implement redun-
dancy: adding routers or links or entire COs, and within or across
Figure 4: Mobile access networks are built of a combination
of wireline access networks and mobile-specific networks.
different levels of aggregation. Some regions connect with only
one backbone CO; others have only one AggCO. Many COs have
redundant routers, and fiber rings have inherent redundancy (i.e.,
“East” and “West” directions in Fig. 3). Redundant backbone COs can
dramatically improve regional reliability given that long-distance
backbone also can be prone to failure [21, 25].
2.2 Mobile access networks
Mobile regional access networks leverage wireline access networks
to provide mobile Internet access over a large geographic area. Mo-
bile access networks consist of two halves (Fig. 4). Mobile devices
communicate wirelessly with base stations, and the base stations
aggregate user traffic over existing wireline networks and hidden
mobile-specific AggCOs that connect to one or more EdgeCOs;
these facilities can also be called Mobile Telephone Switching Of-
fices (MTSO), Mobile Switching Centers (MSC), or mobile data-
centers. This overlay network is called the Radio Access Network
(RAN). These AggCOs serve as a bridge to connect the RAN to
the mobile “Packet Core” which terminates the mobile network at
one or more Packet Gateways (PGW) in an EdgeCO. Then these
EdgeCOs connect directly to one or more regional BackboneCOs to
connect with the rest of the Internet. EdgeCOs in mobile networks
are the primary location where low-latency high-bandwidth IP-
based edge services can be deployed; Verizon is already deploying
edge services at these COs [17].
All mobile Internet traffic traverses both the wireline regional
access networks described above and the mobile packet core. There-
fore, to understand the aggregation and redundancy of mobile
networks we need to also understand the wireline network. Unfor-
tunately, the RAN—and therefore the wireline access network—is
not visible from probes sent by mobile devices. However, by observ-
ing the topology of wireline providers’ regional networks using
their wireline last-mile links, we get insight into the limitations
of some of the RANs. Indeed, in this paper we mapped both the
wireline and mobile networks of AT&T, and the cable providers we
mapped provide backhaul for all major mobile carriers [70].
There can be significant differences in the topology of mobile
access networks because each provider can make their own decision
about how to aggregate their traffic to BackboneCOs. Indeed, they
have significant flexibility because mobile networks are designed
to be an overlay on other networks. The primary factors affecting
mobile network topology are traedeoffs in performance, economics,
and reliability.
722
  b  logical topologya  physical topologyEdge RingWestEastCore RingLast-mile LoopsEdge RingMobilePacketCoreBackbone COWireline Access NetworksBackbone COEdge COInternet access networkRadio Access NetworkHiddenAggCOHiddenEdgeCOHiddenEdgeCOHiddenEdgeCOPGWEdge COPGWPGWPGW(RAN)IMC ’21, November 2–4, 2021, Virtual Event, USA
Zesen Zhang, Alexander Marder, Ricky Mok, Bradley Huffaker, Matthew Luckie, KC Claffy, and Aaron Schulman
3 RELATED WORK
Mapping Wired Networks: In 2002, Spring et al. developed Rock-
etfuel to construct router-level maps of individual networks using
focused traceroutes, alias resolution, DNS hostnames, and BGP rout-
ing tables [45], and used it to map ten transit networks. Researchers
used the Rocketfuel maps to study, interior routing [41], path infla-
tion [64], and the maps sparked lively methodological discussions
(e.g., [68, 75]). In 2007, Mao et al. developed NetworkMD [43], an