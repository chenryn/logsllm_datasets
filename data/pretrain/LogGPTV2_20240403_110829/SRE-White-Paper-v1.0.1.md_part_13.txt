中备用，旨在确保发布的系统在任何情况下都能保持安全和稳定。
应急预案在发布工程中扮演着业务连续性管理的关键角色。即便在
⽹址：SRE-Elite.com 86 微信：SRE精英联盟
SRE实践白皮书（2023年）
充分准备和严格执行的情况下，每次发布变更仍然存在不可预知或
无法评估的风险，SRE 通常通过应急预案来应对这些挑战。在系统
非预期中断的情况下，SRE 可能面临巨大的压力，并且在短时间内
难以全面了解业务系统的上下游状态。这种情况下，临时决策的恢
复方案可能因未全面考虑而引入新问题。因此，为避免引发更严重
的问题，SRE有必要在发布前充分准备应急预案。
制定发布应急预案的整体原则应遵循以下几个步骤：
（1）明确应急预案范围和目标： 详细列出此次发布应急预案的
覆盖范围和应对目标，包括需要关注的模块、业务指标、观测手
段、预案启动条件、实施方案以及实施后的预期表现。这样有助于
协助 SRE在发布过程中做出准确的判断和应急操作。
（2）发布过程和完成后的监测： 在发布过程和完成后，SRE 应
通过监测指标来判断是否发生了非预期状况，并确定是否需要启动
应急预案，以提前发现系统中断。
（3）与发布协调步骤的联动： 当出现超出预期的情况时，应快
速组建故障团队，制定团队人员清单和分工计划，以缩短系统中断
的恢复时间。
SRE发布的应急预案制定步骤如下：
（1）确定应急预案的范围和目标： 明确此次发布应急预案的覆
盖范围和应对目标，包括哪些紧急情况需要应对，以及应急预案的
主要目标是什么。同时，对可能发生的紧急情况进行分类和分级，
制定相应的应急响应计划，包括行动步骤、通信流程、资源调配
⽹址：SRE-Elite.com 87 微信：SRE精英联盟
SRE实践白皮书（2023年）
等。
（2）组建应急响应团队的成员和职责： 确定应急响应团队的成
员和职责，包括开发团队、测试团队、运维团队等。建立紧急联系
方式，包括电话、邮件、即时通讯等，以确保在紧急情况下能够及
时联系。同时，需要定期组织团队审查和更新应急预案，以保持其
有效性和适应性。
（3）制定详细的应急预案内容：包含但不限于：
a. 预发布测试：在正式发布之前进行预发布测试，确保版本的
稳定性和兼容性。
b. 限流措施预案：在版本发布期间采取限流措施，以避免系统
过载和崩溃。
c. 监控和报警预案：加强监控和报警机制，及时检测和响应系
统异常和故障。
d. 回滚计划预案：如果版本发布出现问题，立即启动回滚计
划，将系统恢复到之前的稳定状态。
（4）应急预案演练：根据应急预案制定应急演练计划，并进行
演练，评估应急预案的有效性和实用性。
效果评估：
效果评估方面，可以从以下几个方面来衡量：
（1）有效性：应急预案是否能够有效地应对发布事故，包括是
否能够快速响应、准确识别问题、及时采取措施、有效恢复等。
（2）可操作性：应急预案是否易于操作和使用，包括是否能够
⽹址：SRE-Elite.com 88 微信：SRE精英联盟
SRE实践白皮书（2023年）
提供清晰的指导和说明、是否能够让发布操作人员快速掌握和操
作、是否能够减少人为错误等。
（3）可维护性：应急预案是否易于维护和更新，包括是否能够
及时更新和修订、是否能够保持最新的技术和流程、是否能够在下
一次的发布中继续复用等。
3.4.2 发布实施
3.4.2.1 发布准备
发布准备是指在正式进行发布操作之前所需要操作的一系列步
骤，以确保发布流程的顺利和成功进行。在执行正式发布之前，
SRE（Site Reliability Engineering）工程师需执行如下工作，但不限
于：环境备份、制品预分发、告警屏蔽以及各项准备工作的最后确
认。
（1）发布流程确认。需要在发布前与相关干系人对齐整体发布
内容，需要明确各项发布的时间及执行内容。
（2）风险评估。需要对发布内容进行全面评估，以确定发布对
现有系统的安全性、机器性能、环境依赖等是否会产生影响，通过
风险评估可以避免在变更过程中出现无法回滚、安全漏洞等问题。
（3）环境备份。在发布前，必须对系统的数据、配置以及业务
程序进行备份，以确保在出现问题时能够快速恢复。数据备份范围
包括但不限于业务数据库、文件系统等，而配置备份则包含业务配
置文件、证书文件等。选择适当的备份方式（手动或自动备份），以
确保备份的及时性和完整性。
⽹址：SRE-Elite.com 89 微信：SRE精英联盟
SRE实践白皮书（2023年）
（4）制品预分发。制品预分发是指在发布前将需要更新的文件
提前分发到目标服务器，以便在发布时能够快速更新。这一步骤有
效缩短了发布时间，降低了发布过程中出现问题的风险。完成预分
发后，需要进行验证，确保预分发的制品能够正确地更新到目标服
务器上。
（5）监控告警屏蔽。为防止发布停机时引发不必要的告警，
SRE 在前置工作中需要屏蔽部分监控告警指标，以防止告警风暴的
发生。设置合理的屏蔽时长，并记录屏蔽监控指标的详细信息，包
括指标名称、屏蔽时间范围、屏蔽原因等。同时，需要避免屏蔽敏
感指标或对系统安全性产生负面影响，以确保非发布模块的稳定性
和安全性。
（6）各项准备工作的最后确认。作为发布前准备工作的把关
人，业务 SRE 需确认测试是否充分、发布环境是否准备就绪、备份
和恢复是否有效、风险评估和应急预案是否充足、通知是否及时准
确、发布执行清单是否完整清晰等相关事项。
（7）效果评估。发布前置工作的效果可从以下几个方面考虑：
 发布成功率：衡量发布前置工作效果的重要指标之一是发
布成功率。较高的发布成功率表示前置工作效果较好。
 发布耗时：另一个衡量效果的指标是发布时间。若前置工
作充分，发布时间应缩短，提高发布效率。
 问题处理速度：若出现问题，评估前置工作效果的一个指
标是问题处理速度。充分的前置工作应该能够加速问题解
⽹址：SRE-Elite.com 90 微信：SRE精英联盟
SRE实践白皮书（2023年）
决，减少系统故障时间。
 用户反馈：用户反馈是评估前置工作效果的另一个关键指
标。不良的用户反馈表明前置工作未达到预期效果，需要进
一步改进。
3.4.2.2 发布执行
发布执行是 SRE 团队负责执行一系列发布操作，包括停服、更
新、起服等，以将新功能成功发布到线上正式环境并对用户开放。
为确保每次业务新特性稳定上线， SRE 团队需制定可靠的发布执行
规范和发布意外防范机制，以确保各类对象（如二进制程序、配置
文件、数据库及依赖环境）以可重现、自动化的方式发布到业务生
产环境。
发布执行的主要步骤包括：
 部署：执行部署脚本，将软件部署到指定目录。
 测试：在部署完成后进行功能、性能和安全等测试，以确
保新版本正常运行。
 监控：通过监控告警手段监测发布后运行状态，及时发现
并解决问题，保障系统稳定性和可靠性。
 回滚：如果出现问题，按照已制定的应急预案和操作流
程，及时回滚到上一个版本。
发布执行过程中还应包括以下内容，包括但不限于：
 自服务模型：SRE 发布工程师通过开发工具、制定最佳实
践，使整个发布执行过程自动化，不再需要 SRE 工程师干
⽹址：SRE-Elite.com 91 微信：SRE精英联盟
SRE实践白皮书（2023年）
预。研发团队或其他第三方人员可以自主掌握和执行发布操
作，构建发布执行的自服务模型。
 发布操作的简单化：用户可见的功能应尽快发布上线，以
减少每个版本之间的变更。发布执行时应按小批次进行，易
于理解每次发布对系统的影响。通过逐步改变系统，同时考
虑每次变更对系统的改善和退化，寻找最佳方案。
 发布操作的标准化：统一运维操作入口，降低复杂度，提
高可管理性。避免手工误操作，防范悲剧发生，将原本复杂
易错的手工操作实现标准化运维，使运维操作更加可靠。同
时，减少由运维人员手工误操作所带来的业务风险。
 发布执行的稳定性与灵活性：平衡稳定性和灵活性，通过
构建通用发布流程、实践和工具，提高发布执行的可靠性。
最小化发布执行流程和工具对开发人员灵活性的影响。
 最小化意外复杂度：SRE 团队需不断努力消除发布执行过
程中的必要复杂度，发现并提出抗议，以减少引入的意外复
杂度。
效果评估：
对发布执行效果进行准确性、成功率和效率三个方面的评估：
（1）准确性：操作是否按照计划和目标进行，是否准确无误地
完成了发布操作。
（2）成功率：发布执行的成功率是否高，是否达到预期目标，
是否影响了业务的稳定性和可用性。
⽹址：SRE-Elite.com 92 微信：SRE精英联盟
SRE实践白皮书（2023年）
（3）效率：发布执行的效率是否高，是否在规定时间或提前完
成任务。
3.4.2.3 发布验证
SRE 发布验证是指在软件发布后对已部署的软件进行验证和测
试，以确保软件能够正常运行，并满足预期的功能和性能要求。发
布验证贯穿于 SRE 的整个发布过程中，而不是仅仅存在于部署后。
根据不同的发布计划，存在不同的验证流程，其中包括但不限于以
下几个方面：
1．稳定性验证
稳定性指系统要素在外界影响下表现出的某种稳定状态。对于
应用程序而言，稳定性是保障系统能够满足 SLA（服务水平协议）
所要求的服务等级协议的关键。在应用程序发布过程中，持续关注
关键的基础或业务指标，包括但不限于：
 基础指标：系统负载、内存容量、网卡流量
 业务指标：请求速率、请求时延、请求成功率
确保应用程序能够以一个安全的状态持续运行。如果观察到系
统整体处于非稳定状态，应及时采取相应的应急措施，以将发布的
影响降到最小。
2．确定性验证
应用程序的发布通常旨在修复缺陷或提供新特性，因此发布的
结果应该是确定的。在发布过程中，对应用程序进行持续观察，只