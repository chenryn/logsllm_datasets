创建表
NULL
“实体联系图”、
、“规范化过程”
1.4MySOL教程
15
---
## Page 36
1.4.6.1美史联盟表
数据。到底选择哪一种，需要由应用程序和数据的具体用途来决定。
据时需要考虑哪些问题。
及这样几个方面：它应该包含哪些表、
书专门讲解这些内容，
这里所选择的表示方式并不是绝对的。在其他场合，你可以选用不同的方式来表示相似的
口出生日期和逝世日期。这里唯一需要特殊处理的事情是：因为有些总统依然健在，所
president 表包含一些与美国历任总统生平相关的基本信息。
口member表。用于保存联盟每位成员的最新个人资料。我们可以用它来创建成员名录的
口 president表。其中包含美国历任总统的描述性记录。我们需要用它来实现联盟网站
美史联盟的表相当简单，包括以下两个表。
口
口
1.president表
第1章MySQL入门
以在逝世日期列里用它来表示该位总统“依然健在”
以我们不能要求必须填上逝世日期。特殊值NULL的意思即表示“无值”
放州名与市名。
示。采用单列来表示的做法显得更简单些；但与姓名的情况一样，使用多列能实现某
出生地（城市和州）。与姓名的情况类似，
■如果优先输入姓，
姓名。在表里，表示姓名的方式有好几种，如使用单列包含整个名字，或用不同的列
事情。
印刷版本和在线版本，用它来向到期成员自动发送提醒通知，还可以用它做很多其他
上的在线小测验（对联盟通讯儿童专栏里出现的小测验进行交互式模拟）。
统共有多少位”
值放入数据库之前
的表示形式时，即使只是一个单值，也可能会引发某些问题。它同时还表明：在把数据
义
此我们还需要另外创建一个列，用它来保存姓名后缀。这种情况表明：当你在选择数
常
为
那个“名”列还要存放中间名或其缩写。这种做法不会影响到以后的姓名排序操作，
为
难以查找姓名。例如，想要查找某人的姓，那么必须先使用一种模式，然后去查找与
更复杂的操作。例如，若把州名与市名分开表示，那么像“找出出生在某个州的总
义了解不够，那么在表启用之后，可能还要被迫更改它的结构。虽然这种事不能算作是
个“Jr”应该放在哪里呢？根据英文姓名输出格式习惯，这位总统的名字可以显示
，姓名里的中间名总是排在名字的后面。
我们不太可能对中间名进行排序(也不太可能对名进行排序)。
避免出现这些限制，president表将使用两列分别表示姓和名。
之匹配的姓名。
如果优先输入名，就无法按姓排序。
香
示，因为无论是以“Bush，GeorgeW.”
，所以本书在这里只想说明我们的数据库应该是个什么样子，具体来讲涉
这种类似的操作便能轻易地实现。我们将使用两个单独的列来分别存
前，最好尽可能多地对数据值进行深入的了解。如果对数据值的真正
。
与直接查找姓的做法相比，这种做法的效率很低，速度很慢。
就无法按名在前、
、每个表都应包含什么内容，以及在决定如何表示这些数
，姓在后的顺序显示它们。
，它既可以用一列来表示，也可以用多列表
或“GeorgeW.Bush”
中的哪一种格式来输
另外，姓名也可以正
，因此我们可
含
据
团
因
---
## Page 37
包括各种索引的定义，如果有的话。索引能够加快查找速度，关于这一点请参考第5章的介绍。
其中，tbl_name指的是你要给表指定的名字；column_specs 指的是该表的各列。该语句还会
以下格式：
member 表与刚才介绍的president表很相似。只是member表的每一行还包含了以下这些列。
CREATE TABLE tbl_name (column_specs);
CREATE TABLE president
下面是针对 president 表的 CREATE TABLE 语句：
现在，我们准备创建美史联盟表。为此，我们需要使用CREATE TABLE 语句，该语句具有
3.创建美史联盟表
口
口姓名。我们将沿用与president表相同的3列表示法：姓、名和姓名后缀。
口
口
从每条记录都保存着单独某个人的个人资料这一角度来看，存放“美史联盟”成员列表的
2.member表
特殊兴趣关键字。联盟的每位成员对美国历史肯定都很感兴趣，但他们的兴趣却可能集
电话号码。与地址列相似，主要用于联系成员。
编码就不是一项国际标准；另外，有很多国家都只有“省”的概念，而无“州”的说法。
到一些棘手的问题，必须要解决好不同国家所使用的地址格式不同的问题。例如，邮政
来说，这个假设可能显得有些简单。如果想要处理涉及多个国家的地址，那么你将遭遇
我们假设所有联盟成员都居住在美国。当然，对于那些成员遍布于世界各地的组织机构
编码。
你会需要这条信息。我们将使用多个列来分别存储街道地址、城市名、州名和邮政
通信地址。当与那些没有电子邮件（或者长期没有回复你邮件）的成员进行联系时，
件把每位成员的个人最新资料发送给他们，让他们在必要时更新信息。
不用邮寄信件了。与到邮局寄信相比，这种做法既方便又省钱。你还可以利用电子邮
秘书，在有了这些地址之后，就可以用电子邮件来向成员发送成员资格更新通知，而
电子邮件地址。公开电子邮件地址可以使兴趣相投的成员交流起来更方便。作为联盟的
辑上正好对应于“永不失效”
更新日期也并不能说明该成员下一次的资格更新日期一定是在什么时候。因此，我们
员资格的有效期是一个变值（通常有1年、2年、3年或者5年之分），而最近一次的资格
需要把最近一次资格更新后的起始日期存储起来，但“美史联盟”不需要这样做。
需
有效期。所有成员必须定期更新其成员资格，以避免过期。对于某些应用程序，可能还
行，与你所创建的成员相关的其他表建立关联时，使用编号则会比使用姓名更容易实
MySQL的好处，并找到更多将编号应用于联盟记录的方式。当想要将member表里的
过号，但现在需要所有的记录都更系统化，因此这里需要这个值。
ID编号。这是一个唯一值，为每个首次加入的成员分配一个。联盟此前从未对成员编
作处理。）
些，表中的每一行都由一个关键字和相关成员的ID组成。这点有些复杂，我们暂不
信息来寻找与自己兴趣相投的其他成员。（严格来讲，建立一个独立的表可能会更好
中于某些特定的历史时期。此列便是用于记录这些兴趣。每位成员都可以利用这些
丁以用一个很遥远的日期来表示这种情况，但使用NULL会更合适，因为“无值”在逻
要把成员资格的截止日期存储起来。此外，联盟还提供了终身成员资格。虽然我们
1.4MySOL 教程
，（希望你能不断发现
---
## Page 38
的两列是：suffix（大部分总统的姓名都无后缀）和death（如果总统还健在，则无逝世日期)。
值)。大部分数据列的属性都为 NOT NULL，因为我们要求它们必须要有值。可以有 NULL属性
使用·2013-07-18'，而不能用+07-18-2013+或·18-07-2013'。
YY、MMV、DD分别代表了世纪、世界的年份、月和日。这也是SQL标准规定的日期表示格式（也
期的表示格式可能会让你感到意外。MySQL要求将日期表示为'CCYY-MM-DD'格式，其中的CC、
其数据长度必须要再长一点才能容纳下更长的值。
VARCHAR(2)类型，即表示我们需要以两个字母的缩写形式输入州名。而其他值为字符串类型列
但其长度存在上限。那个 n 的值即表明了你所期望的数据长度。例如，将 state 定义为
存放长度可变的字符型值，且最大长度为n个字符。也就是说，它们包含了长度不定的字符串，
要存放的值的类型)，以及可能有的某些列属性。
参数 (其中包括主机名、用户名和密码)。
并将那个文件放在这个目录里。先进入该目录，然后执行下面这条命令：
create_president.sql 文件。
以在同一行输入整条语句。
的结束位置告知 mysql程序。没有缩进格式也没有关系，你不用像上面那样换行。你完全可
create_president.sql文件里包含的预先编写好的语句。
18
在president 表里，我们用到的列属性只有NULL（可以没有值）和NOT NULL（必须要有
，我们用到的另一个数据类型是DATE。很显然，
president 表用到了两种数据类型：VARCHAR 和 DATE。VARCHAR(n)表示的是：该列可以
现在让我们来仔细看一下CREATE TABLE 语句。该语句会为每一列指定列名、数据类型（列
如果想用预先编写好的描述来创建president 表，那么可以使用 sampdb 发行包里的
CREATE TABLE member
对于member表，其CREATE TABLE语句如下：
无论你采用何种方式调用mysql，都请记得在命令行的命令名后面指定你可能需要的连接
%mysql sampdb DEsCRIBE president;
因此就算我们在member_id定义里省略了NOT NULL，MySQL也会自动加上。）
PRIMARY KEY子句表示为member_id列创建索引，这样能加快查找速度。同时，它还设置
口INT。它表示该列用于存放整数（无小数部分的数值）。
就数据类型而言，member 表里的大部分列（有两个例外）的类型都很普通，都是可变长度
NOT NULL。它表示该列必须要填值，
mysql sampdb<create_member.sql
 UNSIGNED。
与之前一样，你可以手动将这些语句输人 mysql中，也可以利用预先编写好的文件。发行
Field
口
：
death
birth
state
city
suffix
first_name
last_name
成员分配一个唯一的ID变得很简单，
AUTO_INCREMENT的工作原理为：当往member表里添加新记录时，如果没有
interests
phone
zip
state
香
式地将NULL赋给该列，结果也是
。列member_id和expiration是例外，它们分别保存的是序号和日期。
，它表示该值不能为负数。
VARCHAR(255)NULI
VARCHAR(20)NULL,
VARCHAR(10)
date
date
varchar (5)
varchar(15)
varchar(20)
varchar(15)
Type
它
是MySQL的一个特殊属性，表示该列存放的是序号
是DATE。它允许值为NULL，且默认也为NULL，即表示可以不
NULL