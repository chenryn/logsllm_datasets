User: 请解答这个和日志有关的问题dhcpcd ipv6 excessive adding/removing route in log This correlates with router advertising. For now, I removed ipv6rs from the config and added the route manually. Is there a better way to eliminate the excessive log?

Apr 22 16:53:39 prince dhcpcd[2358]: eth1: adding default route via fe80::201:5cff:fe63:c046
Apr 22 16:53:39 prince dhcpcd[2358]: eth1: removing default route via fe80::201:5cff:fe63:c046
Apr 22 16:53:42 prince dhcpcd[2358]: eth1: adding default route via fe80::201:5cff:fe63:c046
Apr 22 16:53:42 prince dhcpcd[2358]: eth1: removing default route via fe80::201:5cff:fe63:c046
Apr 22 16:53:45 prince dhcpcd[2358]: eth1: adding default route via fe80::201:5cff:fe63:c046
Apr 22 16:53:45 prince dhcpcd[2358]: eth1: removing default route via fe80::201:5cff:fe63:c046
Apr 22 16:53:49 prince dhcpcd[2358]: eth1: adding default route via fe80::201:5cff:fe63:c046
Apr 22 16:53:49 prince dhcpcd[2358]: eth1: removing default route via fe80::201:5cff:fe63:c046
Apr 22 16:53:53 prince dhcpcd[2358]: eth1: adding default route via fe80::201:5cff:fe63:c046
Apr 22 16:53:53 prince dhcpcd[2358]: eth1: removing default route via fe80::201:5cff:fe63:c046
Apr 22 16:53:56 prince dhcpcd[2358]: eth1: adding default route via fe80::201:5cff:fe63:c046
Apr 22 16:53:56 prince dhcpcd[2358]: eth1: removing default route via fe80::201:5cff:fe63:c046
Apr 22 16:54:00 prince dhcpcd[2358]: eth1: adding default route via fe80::201:5cff:fe63:c046
Apr 22 16:54:00 prince dhcpcd[2358]: eth1: removing default route via fe80::201:5cff:fe63:c046
Apr 22 16:54:04 prince dhcpcd[2358]: eth1: adding default route via fe80::201:5cff:fe63:c046
Apr 22 16:54:04 prince dhcpcd[2358]: eth1: removing default route via fe80::201:5cff:fe63:c046
Apr 22 16:54:07 prince dhcpcd[2358]: eth1: adding default route via fe80::201:5cff:fe63:c046
Apr 22 16:54:07 prince dhcpcd[2358]: eth1: removing default route via fe80::201:5cff:fe63:c046
Apr 22 16:54:10 prince dhcpcd[2358]: eth1: adding default route via fe80::201:5cff:fe63:c046
Apr 22 16:54:10 prince dhcpcd[2358]: eth1: removing default route via fe80::201:5cff:fe63:c046
Apr 22 16:54:13 prince dhcpcd[2358]: eth1: adding default route via fe80::201:5cff:fe63:c046
Apr 22 16:54:13 prince dhcpcd[2358]: eth1: removing default route via fe80::201:5cff:fe63:c046
Apr 22 16:54:16 prince dhcpcd[2358]: eth1: adding default route via fe80::201:5cff:fe63:c046
Apr 22 16:54:16 prince dhcpcd[2358]: eth1: removing default route via fe80::201:5cff:fe63:c046
Apr 22 16:54:20 prince dhcpcd[2358]: eth1: adding default route via fe80::201:5cff:fe63:c046
Apr 22 16:54:20 prince dhcpcd[2358]: eth1: removing default route via fe80::201:5cff:fe63:c046


And here is the current config:

hostname
duid
persistent
option rapid_commit
option domain_name_servers, domain_name, domain_search, host_name
option classless_static_routes
option ntp_servers
require dhcp_server_identifier
slaac private
nohook lookup-hostname
noipv6rs
interface eth1
#  ipv6rs
#  ipv6ra_own_default
  iaid 1
  ia_pd 1/::/64 eth2/0/64

Assistant: When dhcpcd is being stopped, it will not clear routes added by itself, as expected. However, once dhcpcd is restarted and dhcp is acquired, it will try to add routes again and will remove it's own route because of duplicate, but still mark the route as not added.

The solution, until this behavior is fixed, is to monitor the log for adding/removing and then remove the route it is trying to add. In the above case:

sudo ip -6 route del default via fe80::201:5cff:fe63:c046 dev eth1


Once done, dhcpcd will add the route back and be quiet.