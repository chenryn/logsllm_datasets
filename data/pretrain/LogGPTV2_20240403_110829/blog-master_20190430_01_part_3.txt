NOTICE:  243:     32267.1640122298  
NOTICE:  244:     32423.7404255991  
NOTICE:  245:     32581.0766260144  
NOTICE:  246:     32739.1763003421  
NOTICE:  247:     32898.0431533395  
NOTICE:  248:     33057.6809077411  
NOTICE:  249:     33218.0933043459  
NOTICE:  250:     33379.2841021052  
NOTICE:  251:     33541.2570782107  
NOTICE:  252:     33704.0160281827  
NOTICE:  253:     33867.5647659594  
NOTICE:  254:     34031.9071239863  
NOTICE:  255:     34197.0469533054  
NOTICE:  256:     34362.9881236463  
NOTICE:  257:     34529.7345235163  
NOTICE:  258:     34697.2900602917  
NOTICE:  259:     34865.6586603092  
NOTICE:  260:     35034.8442689584  
NOTICE:  261:     35204.8508507735  
NOTICE:  262:     35375.6823895269  
NOTICE:  263:     35547.342888322  
NOTICE:  264:     35719.8363696876  
NOTICE:  265:     35893.1668756715  
NOTICE:  266:     36067.3384679357  
NOTICE:  267:     36242.3552278514  
NOTICE:  268:     36418.2212565945  
NOTICE:  269:     36594.9406752421  
NOTICE:  270:     36772.5176248688  
NOTICE:  271:     36950.9562666434  
NOTICE:  272:     37130.2607819273  
NOTICE:  273:     37310.4353723716  
NOTICE:  274:     37491.484260016  
NOTICE:  275:     37673.4116873878  
NOTICE:  276:     37856.2219176008  
NOTICE:  277:     38039.919234456  
NOTICE:  278:     38224.5079425412  
NOTICE:  279:     38409.9923673324  
NOTICE:  280:     38596.3768552948  
NOTICE:  281:     38783.6657739851  
NOTICE:  282:     38971.8635121534  
NOTICE:  283:     39160.9744798461  
NOTICE:  284:     39351.0031085096  
NOTICE:  285:     39541.9538510936  
NOTICE:  286:     39733.831182156  
NOTICE:  287:     39926.6395979674  
NOTICE:  288:     40120.3836166166  
NOTICE:  289:     40315.0677781162  
NOTICE:  290:     40510.6966445095  
NOTICE:  291:     40707.274799977  
NOTICE:  292:     40904.8068509439  
NOTICE:  293:     41103.2974261881  
NOTICE:  294:     41302.7511769487  
NOTICE:  295:     41503.1727770348  
NOTICE:  296:     41704.5669229354  
NOTICE:  297:     41906.9383339289  
NOTICE:  298:     42110.2917521943  
NOTICE:  299:     42314.6319429218  
NOTICE:  300:     42519.9636944248  
NOTICE:  301:     42726.291818252  
NOTICE:  302:     42933.6211493001  
NOTICE:  303:     43141.9565459271  
NOTICE:  304:     43351.3028900662  
NOTICE:  305:     43561.6650873402  
NOTICE:  306:     43773.0480671765  
NOTICE:  307:     43985.4567829225  
NOTICE:  308:     44198.8962119616  
NOTICE:  309:     44413.3713558302  
NOTICE:  310:     44628.8872403343  
NOTICE:  311:     44845.4489156681  
NOTICE:  312:     45063.0614565313  
NOTICE:  313:     45281.7299622491  
NOTICE:  314:     45501.459556891  
NOTICE:  315:     45722.2553893908  
NOTICE:  316:     45944.1226336678  
NOTICE:  317:     46167.0664887477  
NOTICE:  318:     46391.0921788843  
NOTICE:  319:     46616.2049536823  
NOTICE:  320:     46842.4100882201  
NOTICE:  321:     47069.7128831732  
NOTICE:  322:     47298.1186649387  
NOTICE:  323:     47527.6327857604  
NOTICE:  324:     47758.2606238533  
NOTICE:  325:     47990.0075835305  
NOTICE:  326:     48222.8790953296  
NOTICE:  327:     48456.8806161397  
NOTICE:  328:     48692.0176293295  
NOTICE:  329:     48928.2956448758  
NOTICE:  330:     49165.7201994925  
NOTICE:  331:     49404.2968567606  
NOTICE:  332:     49644.031207258  
NOTICE:  333:     49884.9288686912  
NOTICE:  334:     50126.9954860265  
NOTICE:  335:     50370.2367316225  
NOTICE:  336:     50614.6583053627  
NOTICE:  337:     50860.2659347895  
NOTICE:  338:     51107.065375238  
NOTICE:  339:     51355.0624099714  
NOTICE:  340:     51604.2628503157  
NOTICE:  341:     51854.6725357969  
NOTICE:  342:     52106.2973342768  
NOTICE:  343:     52359.1431420914  
NOTICE:  344:     52613.2158841884  
NOTICE:  345:     52868.5215142664  
NOTICE:  346:     53125.0660149144  
NOTICE:  347:     53382.8553977518  
NOTICE:  348:     53641.8957035694  
NOTICE:  349:     53902.1930024709  
NOTICE:  350:     54163.7533940154  
NOTICE:  351:     54426.5830073599  
NOTICE:  352:     54690.6880014031  
NOTICE:  353:     54956.0745649299  
NOTICE:  354:     55222.7489167562  
NOTICE:  355:     55490.7173058748  
NOTICE:  356:     55759.9860116015  
NOTICE:  357:     56030.5613437228  
NOTICE:  358:     56302.4496426432  
NOTICE:  359:     56575.6572795341  
NOTICE:  360:     56850.1906564831  
NOTICE:  361:     57126.0562066436  
NOTICE:  362:     57403.2603943864  
NOTICE:  363:     57681.8097154501  
NOTICE:  364:     57961.7106970944  
NOTICE:  365:     58242.969898252  
     comp_x        
-----------------  
 10000122.392516  
(1 row)  
```  
微调第二个参数，结果向1000万靠拢即可。  
## 小结  
1、如果设定的目标为最后一个测算周期，当期的目标，使用等比数列，计算方法如下：  
求X:   
```  
初始周期值*(x^总期数) = 最后一个周期的当期目标  
使用科学计算器即可得到X：  
x^总期数 = 最后一个周期的当期目标/初始周期值  
```  
求每个周期当期的目标（例如12个月）：  
```  
postgres=# select i, 初始周期值*(x^(i)) from generate_series(1,12) i;  
```  
2、如果设定的目标为整个测算周期的总和，那么使用函数，设定初始周期值，输入计算增长比例，得到每个周期的目标值  
函数如下  
```  
postgres=# create or replace function comp_x (  
  v_start float8,    -- 起始月、或起始测算周期的目标营收  
  v_x float8,     -- 每个月、或每个测算周期相比前一个周期的增长率  
  v_terms int    -- 总共多少个周期，如果是一年，每个周期是一个月，则取值12  
) returns float8 as $$  
declare  
  res float8 := 0;  
begin  
    -- 每个月的结果累加  
    -- 例如，要完成全年1000万目标，第一个月目标为a，每个月的增长率为x，公式如下  
    -- a + ax + ax^2 + ax^3 + ... + ax^11 = 1000万  
  for i in 1..v_terms loop  
    res := res + v_start*(v_x^(i-1));  
    raise notice '%: %', i, v_start*(v_x^(i-1));   
  end loop;  
  return res;  
end;  
$$ language plpgsql strict;  
CREATE FUNCTION  
```  
## 参考  
https://www.postgresql.org/docs/11/functions-math.html  
#### [PostgreSQL 许愿链接](https://github.com/digoal/blog/issues/76 "269ac3d1c492e938c0191101c7238216")
您的愿望将传达给PG kernel hacker、数据库厂商等, 帮助提高数据库产品质量和功能, 说不定下一个PG版本就有您提出的功能点. 针对非常好的提议，奖励限量版PG文化衫、纪念品、贴纸、PG热门书籍等，奖品丰富，快来许愿。[开不开森](https://github.com/digoal/blog/issues/76 "269ac3d1c492e938c0191101c7238216").  
#### [9.9元购买3个月阿里云RDS PostgreSQL实例](https://www.aliyun.com/database/postgresqlactivity "57258f76c37864c6e6d23383d05714ea")
#### [PostgreSQL 解决方案集合](https://yq.aliyun.com/topic/118 "40cff096e9ed7122c512b35d8561d9c8")
#### [德哥 / digoal's github - 公益是一辈子的事.](https://github.com/digoal/blog/blob/master/README.md "22709685feb7cab07d30f30387f0a9ae")
![digoal's wechat](../pic/digoal_weixin.jpg "f7ad92eeba24523fd47a6e1a0e691b59")
#### [PolarDB 学习图谱: 训练营、培训认证、在线互动实验、解决方案、生态合作、写心得拿奖品](https://www.aliyun.com/database/openpolardb/activity "8642f60e04ed0c814bf9cb9677976bd4")
#### [购买PolarDB云服务折扣活动进行中, 55元起](https://www.aliyun.com/activity/new/polardb-yunparter?userCode=bsb3t4al "e0495c413bedacabb75ff1e880be465a")
#### [About 德哥](https://github.com/digoal/blog/blob/master/me/readme.md "a37735981e7704886ffd590565582dd0")