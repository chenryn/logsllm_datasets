console {
interactive-commands warning;
}
}
Examples: Assign an Alternative Facility
Log all messages generated on the local routing platform at the error level or higher to the local0 facility
on the remote machine called monitor.mycompany.com:
[edit system syslog]
host monitor.mycompany.com {
any error;
facility-override local0;
}
Configure routing platforms located in California and routing platforms located in New York to send
messages to a single remote machine called central-logger.mycompany.com. The messages from California are
1289
assigned alternative facility local0 and the messages from New York are assigned to alternative facility
local2.
• Configure California routing platforms to aggregate messages in the local0 facility:
[edit system syslog]
host central-logger.mycompany.com {
change-log info;
facility-override local0;
}
• Configure New York routing platforms to aggregate messages in the local2 facility:
[edit system syslog]
host central-logger.mycompany.com {
change-log info;
facility-override local2;
}
On central-logger you can then configure the system logging utility to write messages from the local0
facility to the file california-config and the messages from the local2 facility to the file new-york-config.
System Logging for a TX Matrix or TX Matrix Plus
Router
IN THIS SECTION
Configuring System Logging for a TX Matrix Router | 1290
Configuring System Logging for a TX Matrix Plus Router | 1292
Configuring Message Forwarding to the TX Matrix Router | 1294
Configuring Message Forwarding to the TX Matrix Plus Router | 1295
Impact of Different Local and Forwarded Severity Levels on System Log Messages on a TX Matrix
Router | 1296
1290
Impact of Different Local and Forwarded Severity Levels on System Log Messages on a TX Matrix Plus
Router | 1299
Configuring Optional Features for Forwarded Messages on a TX Matrix Router | 1302
Configuring Optional Features for Forwarded Messages on a TX Matrix Plus Router | 1304
Configuring System Logging Differently on Each T640 Router in a Routing Matrix | 1306
Configuring System Logging Differently on Each T1600 or T4000 Router in a Routing Matrix | 1308
Configuring System Logging for a TX Matrix Router
To configure system logging for all routers in a routing matrix composed of a TX Matrix router and T640
routers, include the syslog statement at the [edit system] hierarchy level on the TX Matrix router. The
syslog statement applies to every router in the routing matrix.
[edit system]
syslog {
archive  ;
console {
facility severity;
}
file filename {
facility severity;
archive }>     ;
explicit-priority;
match "regular-expression";
structured-data {
brief;
}
}
host (hostname | other-routing-engine | scc-master) {
facility severity;
explicit-priority;
facility-override facility;
log-prefix string;
match "regular-expression";
source-address source-address;
port port number;
1291
}
source-address source-address;
time-format (year | millisecond | year millisecond);
(username | *) {
facility severity;
match "regular-expression";
}
}
When included in the configuration on the TX Matrix router, the following configuration statements
have the same effect as on a single-chassis system, except that they apply to every router in the routing
matrix:
• archive—Sets the size and number of log files on each platform in the routing matrix. See "Specifying
Log File Size, Number, and Archiving Properties" on page 1274.
• console—Directs the specified messages to the console of each platform in the routing matrix. See
"Directing System Log Messages to the Console" on page 1315.
• file—Directs the specified messages to a file of the same name on each platform in the routing
matrix. See "Directing System Log Messages to a Log File" on page 1313.
• match—Limits the set of messages logged to a destination to those that contain (or do not contain) a
text string matching a regular expression. See "Using Strings and Regular Expressions to Refine the
Set of Logged Messages" on page 1281.
The separate match statement at the [edit system syslog host scc-master] hierarchy level applies to
messages forwarded from the T640 routers to the TX Matrix router. See "Configuring Optional
Features for Forwarded Messages on a TX Matrix Router" on page 1302.
• port—Specifies the port number of the remote syslog server.
• source-address—Sets the IP address of the router to report in system log messages as the message
source, when the messages are directed to the remote machines specified in all hostname statements
at the [edit system syslog] hierarchy level, for each platform in the routing matrix. On a routing matrix
composed of a TX Matrix router and T640 routers, the address is not reported by the T640 routers in
messages directed to the other Routing Engine on each router or to the TX Matrix router. See
"Specifying an Alternative Source Address for System Log Messages Directed to a Remote
Destination" on page 1316.
• structured-data—Writes messages to a file in structured-data format. See "Logging Messages in
Structured-Data Format" on page 1274.
• time-format—Adds the millisecond, year, or both to the timestamp in each standard-format message.
See "Including the Year or Millisecond in Timestamps" on page 1280.
1292
• user—Directs the specified messages to the terminal session of one or more specified users on each
platform in the routing matrix that they are logged in to. See "Directing System Log Messages to a
User Terminal" on page 1314.
The effect of the other statements differs somewhat for a routing matrix than for a single-chassis
system.
Configuring System Logging for a TX Matrix Plus Router
From the perspective of the user interface, the routing matrix appears as a single router. The TX Matrix
Plus router (also called the switch-fabric chassis SFC) controls all the T1600 or T4000 routers (also
called the line-card chassis LCC) in the routing matrix.
To configure system logging for all routers in a routing matrix composed of a TX Matrix Plus router with
connected T1600 or T4000 LCCs, include the syslog statement at the [edit system] hierarchy level on the
SFC. The syslog statement applies to every router in the routing matrix.
[edit system]
syslog {
archive  ;
console {
facility severity;
}
file filename {
facility severity;
archive }>     ;
explicit-priority;
match "regular-expression";
structured-data {
brief;
}
}
host (hostname | other-routing-engine | sfc0-master) {
facility severity;
explicit-priority;
facility-override facility;
log-prefix string;
match "regular-expression";
}
source-address source-address;
1293
time-format (year | millisecond | year millisecond);
(username | *) {
facility severity;
match "regular-expression";
}
}
When included in the configuration on the TX Matrix Plus router, the following configuration statements
have the same effect as on a single-chassis system, except that they apply to every router in the routing
matrix.
• archive—Sets the size and number of log files on each router in the routing matrix. See "Specifying Log
File Size, Number, and Archiving Properties" on page 1274.
• console—Directs the specified messages to the console of each router in the routing matrix. See
"Directing System Log Messages to the Console" on page 1315.
• file—Directs the specified messages to a file of the same name on each router in the routing matrix.
See "Directing System Log Messages to a Log File" on page 1313.
• match—Limits the set of messages logged to a destination to those that contain (or do not contain) a
text string matching a regular expression. See "Using Strings and Regular Expressions to Refine the
Set of Logged Messages" on page 1281.
The separate match statement at the [edit system syslog host sfc0-master] hierarchy level applies to
messages forwarded from the T1600 or T4000 LCCs to the SFC. See "Configuring Optional Features
for Forwarded Messages on a TX Matrix Plus Router" on page 1304.
• source-address—Sets the IP address of the router as the message source in system log messages when
the messages are directed to the remote machines specified in all host hostname statements at the
[edit system syslog] hierarchy level, for each router in the routing matrix. On a routing matrix
composed of a TX Matrix Plus router with connected T1600 or T4000 LCCs, the address is not
reported by the T1600 or T4000 routers in messages directed to the other Routing Engine on each
router or to the TX Matrix Plus router. See "Specifying an Alternative Source Address for System Log
Messages Directed to a Remote Destination" on page 1316.
• structured-data—Writes messages to a file in structured-data format. See "Logging Messages in
Structured-Data Format" on page 1274.
• time-format—Adds the millisecond, year, or both to the timestamp in each standard-format message.
See "Including the Year or Millisecond in Timestamps" on page 1280.
• user—Directs the specified messages to the terminal session of one or more specified users on each
router in the routing matrix that they are logged in to. See "Directing System Log Messages to a User
Terminal" on page 1314.
1294
The effect of the other statements differs somewhat for a routing matrix than for a single-chassis
system.
Configuring Message Forwarding to the TX Matrix Router
By default, the primary Routing Engine on each T640 router forwards to the primary Routing Engine on
the TX Matrix router all messages from all facilities with severity level of info and higher. To change the
facility, the severity level, or both, include the host scc-master statement at the [edit system syslog]
hierarchy level on the TX Matrix router:
[edit system syslog]
host scc-master {
facility severity;
}
To disable message forwarding, set the facility to any and the severity level to none:
[edit system syslog]
host scc-master {
any none;
}
In either case, the setting applies to all T640 routers in the routing matrix.
To capture the messages forwarded by the T640 routers (as well as messages generated on the TX
Matrix router itself), you must also configure system logging on the TX Matrix router. Direct the
messages to one or more destinations by including the appropriate statements at the [edit system syslog]
hierarchy level on the TX Matrix router:
• To a file, as described in "Directing System Log Messages to a Log File" on page 1313.
• To the terminal session of one or more specific users (or all users), as described in "Directing System
Log Messages to a User Terminal" on page 1314.
• To the console, as described in "Directing System Log Messages to the Console" on page 1315.
• To a remote machine that is running the syslogd utility or to the other Routing Engine. For more
information, see "Directing Messages to a Remote Destination from the Routing Matrix Based on the
TX Matrix Router" on page 1323.
1295
As previously noted, the configuration statements included on the TX Matrix router also configure the
same destinations on each T640 router in the routing matrix.
When specifying the severity level for local messages (at the [edit system syslog (file | host | console |
user)] hierarchy level) and forwarded messages (at the [edit system syslog host scc-master] hierarchy level),
you can set the same severity level for both, set a lower severity level for local messages, or set a higher
severity level for local messages. The following examples describe the consequence of each
configuration. (For simplicity, the examples use the any facility in every case. You can also specify
different severities for different facilities, with more complex consequences.)
Configuring Message Forwarding to the TX Matrix Plus Router
From the perspective of the user interface, the routing matrix appears as a single router. The TX Matrix
Plus router (also called the switch-fabric chassis SFC) controls all the T1600 or T4000 routers (also
called the line-card chassis LCC) in the routing matrix.
By default, the primary Routing Engine on each connected T1600 or T4000 LCC forwards to the primary
Routing Engine on the SFC all messages from all facilities with severity level of info and higher. To
change the facility, the severity level, or both, include the host sfc0-master statement at the [edit system
syslog] hierarchy level on the SFC:
[edit system syslog]
host sfc0-master {
facility severity;
}
To disable message forwarding, set the facility to any and the severity level to none:
[edit system syslog]
host sfc0-master {
any none;
}
In either case, the setting applies to all connected LCCs in the routing matrix.
To capture the messages forwarded by the T1600 or T4000 LCCs (as well as messages generated on the
SFC itself), you must also configure system logging on the SFC. Direct the messages to one or more
destinations by including the appropriate statements at the [edit system syslog] hierarchy level on the
SFC:
• To a file, as described in "Directing System Log Messages to a Log File" on page 1313.
1296
• To the terminal session of one or more specific users (or all users), as described in "Directing System
Log Messages to a User Terminal" on page 1314.
• To the console, as described in "Directing System Log Messages to the Console" on page 1315.
• To a remote machine that is running the syslogd utility or to the other Routing Engine. For more
information, see "Directing Messages to a Remote Destination from the Routing Matrix Based on a
TX Matrix Plus Router" on page 1324.
As previously noted, the configuration statements included on the SFC also configure the same
destinations on each connected LCC.
When specifying the severity level for local messages (at the [edit system syslog (file | host | console |
user)] hierarchy level) and forwarded messages (at the [edit system syslog host sfc0-master] hierarchy
level), you can set the same severity level for both, set a lower severity level for local messages, or set a
higher severity level for local messages. The following examples describe the consequence of each
configuration. (For simplicity, the examples use the any facility in every case. You can also specify
different severities for different facilities, with more complex consequences.)
Impact of Different Local and Forwarded Severity Levels on System Log
Messages on a TX Matrix Router
IN THIS SECTION
Messages Logged When the Local and Forwarded Severity Levels Are the Same | 1297
Messages Logged When the Local Severity Level Is Lower | 1297
Messages Logged When the Local Severity Level Is Higher | 1298
This topic describes the impact of different local and forwarded severity levels configured for system log
messages on a TX Matrix router:
1297
Messages Logged When the Local and Forwarded Severity Levels Are the Same
When the severity level is the same for local and forwarded messages, the log on the TX Matrix router
contains all messages from the logs on the T640 routers. For example, you can specify severity info for
the /var/log/messages file, which is the default severity level for messages forwarded by T640 routers:
[edit system syslog]
file messages {
any info;
}
Table 134 on page 1297 specifies which messages are included in the logs on the T640 routers and the
TX Matrix router.
Table 134: Example: Local and Forwarded Severity Level Are Both info
Log Location Source of Messages Lowest Severity Included
T640 router Local info
TX Matrix router Local info
Forwarded from T640 routers info
Messages Logged When the Local Severity Level Is Lower
When the severity level is lower for local messages than for forwarded messages, the log on the TX
Matrix router includes fewer forwarded messages than when the severities are the same. Locally
generated messages are still logged at the lower severity level, so their number in each log is the same as
when the severities are the same.
For example, on a TX Matrix router, you can specify severity notice for the /var/log/messages file and
severity critical for forwarded messages:
[edit system syslog]
file messages {
any notice;
}
host scc-master {
1298
any critical;
}
Table 135 on page 1298 specifies which messages in a routing matrix are included in the logs on the
T640 routers and the TX Matrix router. The T640 routers forward only those messages with severity
critical and higher, so the log on the TX Matrix router does not include the messages with severity error,
warning, or notice that the T640 routers log locally.
Table 135: Example: Local Severity Is notice, Forwarded Severity Is critical
Log Location Source of Messages Lowest Severity Included
T640 router Local notice
TX Matrix router Local notice
Forwarded from T640 routers critical
Messages Logged When the Local Severity Level Is Higher
When the severity level is higher for local messages than for forwarded messages, the log on the TX
Matrix router includes fewer forwarded messages than when the severities are the same, and all local
logs contain fewer messages overall.
For example, you can specify severity critical for the /var/log/messages file and severity notice for
forwarded messages:
[edit system syslog]
file messages {
any critical;
}
host scc-master {
any notice;
}
Table 136 on page 1299 specifies which messages are included in the logs on the T640 routers and the
TX Matrix router. Although the T640 routers forward messages with severity notice and higher, the TX
Matrix router discards any of those messages with severity lower than critical (does not log forwarded
1299
messages with severity error, warning, or notice). None of the logs include messages with severity error or
lower.
Table 136: Example: Local Severity Is critical, Forwarded Severity Is notice
Log Location Source of Messages Lowest Severity Included
T640 router Local critical
TX Matrix router Local critical
Forwarded from T640 routers critical
Impact of Different Local and Forwarded Severity Levels on System Log
Messages on a TX Matrix Plus Router
IN THIS SECTION
Messages Logged When the Local and Forwarded Severity Levels Are the Same | 1299
Messages Logged When the Local Severity Level Is Lower | 1300
Messages Logged When the Local Severity Level Is Higher | 1301
This topic describes the impact of different local and forwarded severity levels configured for the system
log messages on a TX Matrix Plus router:
Messages Logged When the Local and Forwarded Severity Levels Are the Same
When the severity level is the same for local and forwarded messages, the log on the TX Matrix Plus
router contains all messages from the logs on the T1600 routers in the routing matrix. For example, you
1300
can specify severity info for the /var/log/messages file, which is the default severity level for messages
forwarded by T1600 routers:
[edit system syslog]
file messages {
any info;
}
Table 137 on page 1300 specifies which messages in a routing matrix based on a TX Matrix Plus router
are included in the logs on the T1600 routers and the TX Matrix Plus router:
Table 137: Example: Local and Forwarded Severity Level Are Both info
Log Location Source of Messages Lowest Severity Included
T1600 router Local info
TX Matrix Plus router Local info
Forwarded from T1600 routers info
Messages Logged When the Local Severity Level Is Lower
When the severity level is lower for local messages than for forwarded messages, the log on the TX
Matrix Plus router includes fewer forwarded messages than when the severities are the same. Locally
generated messages are still logged at the lower severity level, so their number in each log is the same as
when the severities are the same.
For example, on a TX Matrix Plus router, you can specify severity notice for the /var/log/messages file
and severity critical for forwarded messages:
[edit system syslog]
file messages {
any notice;
}
host sfc0-master {