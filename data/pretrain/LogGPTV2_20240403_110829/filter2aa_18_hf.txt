### 操作系统的未来趋势与挑战

在未来几年，操作系统必须经历变革以适应新的技术趋势并应对各种挑战。这些趋势和挑战包括基于管理程序的系统、多核处理器、64位地址空间、大规模网络连接、大规模多处理器架构、多媒体应用、掌上无线设备、嵌入式系统及其传感节点。对于操作系统的设计者而言，这将是一个充满机遇与创新的时代。

### 习题

1. **摩尔定律与计算机硬件改进速率限制因素**  
   摩尔定律描述了集成电路中晶体管数量大约每两年翻一番的现象，类似于物种在新环境中无限制增长的情况。然而，随着资源变得有限或遇到其他限制因素（如热耗散问题、制造工艺极限等），这种指数增长最终会趋于平缓，形成S形曲线。请讨论可能最终限制计算机硬件改进速率的因素。

2. **算法范型与事件驱动范型的应用**  
   图13-1展示了两种编程范型：算法范型和事件驱动范型。对于以下程序类型，哪一种范型更适用？
   - a) 编译器
   - b) 照片编辑软件
   - c) 工资单处理程序

3. **苹果Macintosh中的GUI代码存储位置**  
   在某些早期的苹果Macintosh计算机上，图形用户界面（GUI）代码被存储在只读存储器（ROM）中。请解释这样做的原因。

4. **POSIX调用的冗余性分析**  
   给出了一份POSIX调用列表，其中也包含在UNIX版本7中。请指出哪些调用是冗余的，即可以通过其他调用的简单组合实现相同功能且性能相近。

5. **微内核系统中的信号量使用**  
   在一个基于微内核的客户-服务器系统中，如果微内核仅负责消息传递而不执行其他任务，用户进程是否仍可创建和使用信号量？如果是，请说明如何实现；如果不是，请阐述原因。

6. **系统调用性能优化的影响**  
   假设某个系统调用每隔10毫秒被调用一次，平均每次调用耗时2毫秒。如果通过优化使该调用的速度提高一倍，那么原本需要10秒完成的任务现在需要多少时间？

7. **零售商店环境下的机制与策略**  
   请简要讨论在零售商店场景下，操作系统中的“机制”与“策略”的区别及应用。

8. **命名系统的内外部差异**  
   操作系统通常会在外部和内部两个层次上实现命名。这两种命名方式在以下方面有何不同？
   - a) 长度
   - b) 唯一性
   - c) 层次结构

9. **动态调整表大小的方法比较**  
   当处理大小事先未知的表格时，一种方法是将其初始大小固定，但当表格填满时，用一个更大的表格替换它，并将旧数据复制到新表中，然后释放旧表。如果新表的大小是原表的两倍，与新表大小为原表1.5倍相比，各有何优劣？

10. **循环控制变量的作用**  
    在图13-5中，标志`found`用于指示是否找到特定PID。如果不使用`found`，而是在循环结束时检查指针`p`是否到达结尾，这种方法可行吗？

11. **条件编译的应用范围**  
    图13-6中，条件编译用于隐藏Pentium和Ultra SPARC之间的差异。同样的方法能否用于区分拥有IDE磁盘的Pentium与拥有SCSI磁盘的Pentium？这样做是否合理？

12. **间接引用的利弊**  
    间接引用可以增加算法的灵活性，但它是否有缺点？如果有，请列举。

13. **可重入函数与静态全局变量**  
    可重入过程是否可以拥有私有的静态全局变量？请解释你的答案。

14. **宏与过程的效率对比**  
    图13-7b中的宏显然比图13-7a中的过程更高效。除了难以阅读之外，宏还有哪些潜在的缺点？

15. **快速计算32位字中1的个数**  
    设计一种算法，尽可能快地计算一个32位整数中1的数量。如有必要，可以使用最多256KB的RAM来存储辅助表。编写一个宏实现你的算法，并额外编写一个通过遍历32位进行计算的过程。测量两者之间的性能差异。

16. **GIF图像调色板宽度选择**  
    GIF文件使用8位值作为索引检索调色板。同样的思路可以应用于16位宽的调色板。在什么情况下，使用24位宽的调色板会是个好主意？

17. **GIF文件大小与调色板开销平衡**  
    GIF的一个缺点是必须包含调色板，增加了文件大小。对于8位宽和16位宽的调色板，达到收支平衡所需的最小图像尺寸分别是多少？

18. **路径名高速缓存与i节点钉住技术**  
    我们已经展示了对路径名进行高速缓存可以显著加速查找。另一种技术是让守护进程打开根目录中的所有文件并保持它们始终打开，从而强制其i节点保留在内存中。这样的i节点钉住技术能否进一步提升路径查找性能？

19. **远程文件引用的其他有用信息**  
    即使远程文件自上次引用以来没有被删除，也可能发生了更改。在这种情况下，记录哪些额外的信息可能是有用的？

20. **减少远程文件引用错误**  
    考虑一种系统，它将对远程文件的引用作为线索储存，例如（名称，远程主机，远程名称）。如果一个远程文件被悄悄删除后又被重新创建，那么线索可能会指向错误的文件。如何尽量减少这种情况的发生？

21. **局部性优化的局限性**  
    局部性原理经常被用来提升性能。但是，如果一个程序从单一数据源读取输入并连续输出到多个文件中，尝试利用文件系统的局部性是否会降低效率？存在解决这一问题的方法吗？

22. **程序员生产力悖论**  
    Fred Brooks声称一名程序员每年只能编写1000行调试好的代码，然而MINIX的第一版（13,000行代码）是由一个人在三年内完成的。如何解释这一矛盾？

23. **Windows Vista开发成本估算**  
    使用Brooks提出的每名程序员每年1000行代码的标准，估计开发Windows Vista所需的资金。假设每名程序员每年的成本为100,000美元（包括日常开销）。你认为这个答案可信吗？如果不信，请指出问题所在。

24. **全RAM PC的可行性**  
    随着内存价格下降，设想一台计算机完全使用大容量电池供电的RAM替代硬盘。以当前价格计算，低端PC仅使用RAM的成本是多少？假设1GB RAM对于低端机器足够。这样的机器在市场上有竞争力吗？

25. **嵌入式系统中不必要的常规OS特性**  
    列举一些在嵌入式系统中通常不需要的传统操作系统功能。

26. **跨平台双精度加法函数**  
    用C语言编写一个函数，在两个给定参数上执行双精度加法。使用条件编译确保该函数既能在16位机器上运行，也能在32位机器上运行。

27. **字符串搜索算法性能评估**  
    编写一个程序，将随机生成的短字符串输入到数组中，然后使用以下方法在数组中搜索给定的字符串：
    - a) 简单线性搜索（暴力法）
    - b) 你自己选择的更复杂的方法
    对从小型数组到你的系统所能处理的最大数组的各种大小重新编译程序，并评估两种方法的性能。找出收支平衡点。

28. **内存文件系统模拟**  
    编写一个程序，模拟内存中的文件系统。

### 第14章：阅读材料及参考文献

在前13章中，我们已经介绍了操作系统的许多内容。本章旨在为希望进一步研究操作系统的读者提供帮助。14.1节列出了推荐的阅读材料，14.2节按字母顺序列出了本书引用的所有书籍和文章。

除了下面给出的参考书目外，奇数年份举行的ACM操作系统原理学术会议（SOSP）和偶数年份举行的USENIX操作系统设计与实现学术会议（OSDI）也是了解当前操作系统领域研究工作的重要渠道。一年一度的Eurosys 200x会议也发表了许多一流的文章。此外，《ACM Transactions on Computer Systems》和《ACM SIGOPS Operating Systems Review》两份杂志中也收录了一些相关文章。ACM、IEEE和USENIX的许多会议也涉及相关内容。

#### 14.1 进行深入阅读的建议

在以下各小节中，我们将提供一些深入阅读的建议。与本书中标题为“与...有关的研究工作”的小节中引用的那些关于当前研究工作的文章不同，这些参考资料主要属于入门和培训类。不过，它们提供了不同的视角和侧重点，是对本书内容的有益补充。