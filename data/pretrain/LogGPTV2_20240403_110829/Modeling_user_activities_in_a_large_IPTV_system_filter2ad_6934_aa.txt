title:Modeling user activities in a large IPTV system
author:Tongqing Qiu and
Zihui Ge and
Seungjoon Lee and
Jia Wang and
Jun (Jim) Xu and
Qi Zhao
Modeling User Activities in a Large IPTV System∗
Tongqing Qiu
Georgia Tech
Atlanta GA
PI:EMAIL
Jia Wang
AT&T Labs – Research
Florham Park, NJ
PI:EMAIL
Zihui Ge
AT&T Labs – Research
Florham Park, NJ
PI:EMAIL
Jun (Jim) Xu
Georgia Tech
Atlanta GA
PI:EMAIL
AT&T Labs – Research
Seungjoon Lee
Florham Park, NJ
PI:EMAIL
Qi Zhao
AT&T Labs – Research
Florham Park, NJ
PI:EMAIL
ABSTRACT
Internet Protocol Television (IPTV) has emerged as a new deliv-
ery method for TV. In contrast with native broadcast in traditional
cable and satellite TV system, video streams in IPTV are encoded
in IP packets and distributed using IP unicast and multicast. This
new architecture has been strategically embraced by ISPs across the
globe, recognizing the opportunity for new services and its poten-
tial toward a more interactive style of TV watching experience in
the future. Since user activities such as channel switches in IPTV
impose workload beyond local TV or set-top box (different from
broadcast TV systems), it becomes essential to characterize and
model the aggregate user activities in an IPTV network to support
various system design and performance evaluation functions such
as network capacity planning. In this work, we perform an in-depth
study on several intrinsic characteristics of IPTV user activities by
analyzing the real data collected from an operational nation-wide
IPTV system. We further generalize the ﬁndings and develop a se-
ries of models for capturing both the probability distribution and
time-dynamics of user activities. We then combine theses mod-
els to design an IPTV user activity workload generation tool called
SIMULWATCH, which takes a small number of input parameters
and generates synthetic workload traces that mimic a set of real
users watching IPTV. We validate all the models and the prototype
of SIMULWATCH using the real traces. In particular, we show that
SIMULWATCH can estimate the unicast and multicast trafﬁc accu-
rately, proving itself as a useful tool in driving the performance
study in IPTV systems.
Categories and Subject Descriptors
System Organization]:
C.2.3
Computer-
Communication Networks—Network Operations; C.4 [Computer
System Organization]:
Performance of Systems—Modeling
techniques
∗This work is supported in part by the NSF grant CNS-0905169,
funded under the American Recovery and Reinvestment Act of
2009 (Public Law 111-5), and by the NSF grant CNS-0626979.
[Computer
Permission to make digital or hard copies of all or part of this work for
personal or classroom use is granted without fee provided that copies are
not made or distributed for proﬁt or commercial advantage and that copies
bear this notice and the full citation on the ﬁrst page. To copy otherwise, to
republish, to post on servers or to redistribute to lists, requires prior speciﬁc
permission and/or a fee.
IMC’09, November 4–6, 2009, Chicago, Illinois, USA.
Copyright 2009 ACM 978-1-60558-770-7/09/11 ...$10.00.
INTRODUCTION
General Terms
Measurement, Performance
Keywords
IPTV, Network Measurement, Modeling, Workload Generator
1.
In the past several years, there has been a global trend among
telecommunication companies on the rapid deployment of IPTV
(Internet Protocol Television) infrastructure and service, in which
live TV streams are encoded in a series of IP packets and delivered
to users through the residential broadband access network. This
fast growth is motivated in part by commercial reasons – strength-
ening their competitiveness with so-called triple-play package that
combines digital voice, TV and data service together. More im-
portantly, this new technology provides the users with great inter-
active capability and functional ﬂexibility, and creates tremendous
opportunities for a broad range of new applications (e.g., Collab-
oraTV [11]), which may very well deﬁne a next generation of TV
entertainment.
While the industry rushes into the IPTV era, what lags behind
is a comprehensive understanding of the user activities, which di-
rectly dictate the ﬂow of video streams and other bi-directional data
(e.g., for user interactive sessions). Although commercial TV dis-
tribution networks (e.g., cable, satellite) have prevailed for decades,
to the best of our knowledge, no detailed study on modeling indi-
vidual users’ TV watching activities is available in the literature.
This might be partially because there has not been a strong need, as
data ﬂows in conventional TV networks are typically limited to the
downstream direction from servers to set-top boxes (STBs), and
user channel switching (with the exception of pay per view) has
very little system-wide impact. In fact, even tracking the viewer-
ship of TV program – a statistic that bears signiﬁcant commercial
value – is typically done through a third party [1]. In IPTV sys-
tems, by contrast, an understanding of user activities is essential
to many system design and engineering tasks such as evaluation of
various design options, optimal system parameter tuning, improv-
ing customer care, and deﬁning effective system care procedures to
minimize service impact.
Without a realistic user activity model, the research community
often has had to rely on some hypothetical user models when an-
alyzing system performance [17, 19, 2, 20]. Unfortunately, such
models are sometimes quite different from the reality and can po-
tentially lead to incorrect estimation of the system performance.
For example, while a constant-rate Poisson process is widely used
as a workload model in other systems, it is incapable of capturing
430the high bursts of channel switches at around hour boundaries ob-
served in our IPTV data. An alternative is to directly use actual
IPTV trace data for the evaluation of system performance. How-
ever, such data, even when anonymized, can be highly sensitive,
containing too much commercial and user private information to
be publicly distributed. This creates a barrier for research commu-
nity to perform system evaluation against real data traces. In this
work, we bridge this gap by developing realistic models for user
activities in a large IPTV system.
Our work in this paper is based on a large collection of data ob-
tained from a nation-wide operational IPTV network, which in-
cludes the system logs from all of its subscribers’ STBs, con-
trol plane signaling messages, network topology and conﬁguration
data, and TV channel information. Our approach starts with an
in-depth investigation of the user activities, analyzing many intrin-
sic characteristics on attributes such as user viewing sessions, per-
channel dwell time, and channel popularity. While some of our
ﬁndings overlap with a previous study [6], we further abstract and
generalize the chosen characteristics to enable realistic workload
generation, which can be used for various stages of IPTV system
design. Speciﬁcally, we develop a workload generator that faith-
fully mimics the user activities in real IPTV systems—this work-
load generator can turn a limited number of input parameters (pub-
lished in the paper) into synthetic traces having similar statistical
properties to realistic data traces.
We also consider this work a snapshot of user activity workload
for the current IPTV system, which provides a feature set highly
similar to that of conventional TV services such as cable and satel-
lite. We envision that user viewing pattern evolves with more ad-
vanced IPTV features fundamentally changing the way users watch
TV, and this work is used as a baseline to understand and to quan-
tify such changes.
We make three major contributions in this paper. First, we
present in-depth analysis results based on data traces from a nation-
wide operational IPTV system (Section 3). In addition to the largest
scale of such study (using more than a million STBs in four differ-
ent time zones), we identify many interesting characteristics. For
example, we ﬁnd that user activities (such as channel switching)
are often correlated, hence the aggregate activities are much more
bursty than the outcome of a ﬁxed-rate Poisson model that many
previous studies assume [2, 20].
Second, we develop a series of models that capture these intrin-
sic characteristics on each of the attributes (Section 4). We use the
mixture exponential distribution to model various session duration
distributions. To characterize the time-varying nature of user activ-
ities, we apply Fourier Transform and model the periodically corre-
lated events. We distinguish sequential-channel-scans and targeted-
channel-switches and use Zipf-like and exponential distribution to
characterize channel access popularity. We also adopt a mixture
population model to capture the channel popularity dynamics ob-
served at the ﬁner time granularity.
Third, we combine these models and construct a workload gener-
ation tool, namely SIMULWATCH (Section 5), which takes a small
number of parameters as input and outputs a series of synthetic
user traces that mimic a set of real users watching IPTV. We also
validate SIMULWATCH prototype by comparing the synthetic trace
with a real data trace and show that they closely match even for
some properties that we do not explicitly model. Speciﬁcally, we
show that for a given number of STBs, we can accurately estimate
the unicast and multicast trafﬁc bandwidth based on the synthetic
workload, which also illustrates how to use SIMULWATCH to drive
the performance study in an IPTV system.
We also review related work in Section 6 and conclude our work
National Channels
Acquisition
SHO
VHO 4
IP Backbone
Local Channels
Acquisition
VHO 1
VHO 3
VHO 2
Subscriber Home
Residential
Gateway
RG
STB
STB
TV
TV
Phone
PC
Figure 1: IPTV Architecture
in Section 8. In the following section, we ﬁrst overview a typical
IPTV system architecture and describe the data set we use in this
study.
2. BACKGROUND
2.1 Overview of IPTV Architecture
Figure 1 shows a typical IPTV service system [15]. The SHO
(Super Hub Ofﬁce), the primary source of television content, digi-
tally encodes video streams received externally (e.g., via satellite)
and transmits them to multiple VHOs (Video Hub Ofﬁces) through
a high-speed IP backbone network. The VHOs, each responsible
for a metropolitan area, in turn acquire additional local contents
(e.g., local news), perform some further processing (e.g., advertise-
ment insertion) and transmit the processed TV streams to end users
upon request1. Inside a residential home, RG (Residential Gate-
way) connects to a modem and one or more STBs (Set-Top Boxes)
with coaxial cable, receiving and forwarding all data, including live
TV streams, STB control trafﬁc, VoIP and Internet data trafﬁc, into
and out of the subscriber’s home. Finally behind an STB, there
connects a TV.
In order to leverage the one-to-many nature of IPTV trafﬁc and
ease the bandwidth requirement of the VHOs, video streams from
VHOs to STBs are typically delivered using IP multicast. Depend-
ing on the TV channel and the codec used, the bit rate of each video
stream varies widely from around 1.5Mbps (SDTV with H.264)
to around 15Mbps (HDTV with MPEG2). The latency of chan-
nel switch is due to both the multicast group management using
IGMP and the video decoding dependency (e.g., waiting for a next
I-frame). They could add up to a few seconds, which might make
the audience chafe at the bit. This limitation is likely to motivate
IPTV users to perform more targeted channel switches than ran-
dom or sequential channel scans compared to users from conven-
tional TV systems. To address/alleviate this problem2, some IPTV
providers have adopted a fast-channel-switch mechanism in which
a server in the VHO sends the STB a unicast video stream (often
at a rate higher than multicast rate to avoid long decoding latency)
while the STB catches up with the multicast TV stream [17].
IPTV users use a ven-
dor/provider customized remote controller to control the STB. For
example, one may use Up/Down buttons to sequentially switch
channels, use Return button to jump back to the channel previously
watched, or enter a channel number to jump directly to a speciﬁc
channel. On the other hand, IPTV providers often support addi-
tional features, some of which are not offered in conventional TV
services. For example, many IPTV providers add the capability for
1Typically a VHO connects to RGs through a protected optical
network using ﬁber-to-the-node (FTTN) or ﬁber-to-the-premises
(FTTP) technologies. We omit showing the network elements in
between as they are not the focus of our work.
2How to reduce this delay is an active research area.
Similar to conventional TV users,
431a small number of user-deﬁned favorite channel list, so that one
can easily switch between or scan through the favorite channels.
Furthermore, most STBs support the DVR (Digital Video Record-
ing) feature, in which with the help of a local hard drive, a user
can pause, rewind, fast forward (up to live play), and record the TV
program being played. Some IPTV providers support one channel
being recorded to DVR while another channel being played live on
TV. Also depending on the IPTV provider, IPTV users can enjoy
many advanced features such as Picture-In-Picture (PIP), on-line
gaming and chatting, and personalized web services on their TVs.
2.2 Data Set
The data we use in this study are collected from a large scale
IPTV provider in the United States, which has over one million
subscribers and over two million STBs spread throughout four dif-
ferent time zones. As a privacy protection, only anonymous data
was used in this study; no information that could be used to directly
or indirectly identify individual subscribers was included. By com-
bining data from the anonymous STB logs, control plane messages,
network conﬁguration data, and TV channel lists obtained from this
service provider, we were able to model activities such as turning
on/off STBs, switching channels, and playing live or recorded TV
program. In particular, we associate each activity recorded in the
anonymous STB logs with its origin STB and a timestamp (which
is at the precision of one second). To account for different time
zones, we map the STBs to their metropolitan area and convert the
associated timestamps into their local time.
Although we have analyzed and validated data from multiple pe-
riods of time, in this paper, we only present the result based on the
data collected in April 2009. More speciﬁcally, we use the 6 days’
data from April 2nd to 7th for analysis and one day’s data on April
8th for the validation of our model. Unless speciﬁed otherwise, we
use the results based on data on April 2nd 2008 when we present
the properties for a single day, while the results on other days are
qualitatively similar.
There are a few limitations/caveats with the quality of the data
in this study. First, the channel switch events capture user requests
logged at the STB, with the timestamp indicating the time that the
request is received at the STB. Note that this is different from the
time when the request arrives at the VHO, and different from the
time when the streaming content is received at the STB. Requests
that are very rapidly followed by a subsequent request in time may
not be recorded by the STB, hence are missing from our study.
Second, since we do not have any data related to the remote con-
troller, we can only determine the outcome of a user’s action, but
not the action itself. For example, when we observe a channel
switching event, we do not know whether it is done by using the
Up/Down button or by directly inputting the channel number, for
which we have to rely on inference. Third, we do not have detailed
TV program information when DVR is used. From STB logs, we
know a recorded video is being played, but do not know what is
played. In this paper, we use a special channel, 9999, to indicate
user tuning into the DVR mode and playing some recorded con-
tent. Finally, our data regarding the advanced features such as on-
line gaming are unfortunately incomplete. Therefore, we ignore all
the activities with respect to advanced features in this paper.
3. ANALYZING USER ACTIVITIES
Recall that our objective is to deﬁne a mathematical process that
mimics the activities of IPTV users and thus can produce realistic
event series for tasks such as system performance evaluation. To
accomplish this, we ﬁrst need to understand how real users act in
an operational IPTV system. We do so by studying various charac-
100
)
)
x
(
F
−
1
(
0
1
g
o
l
10−2
10−4
10−6
1 sec
On−sessions
Off−sessions
Channel−sessions
1 min
Lasting time (log scale)
1 day 6 days
Figure 2: CCDF of the length for on-, off-, and channel-sessions
teristics of our data traces. In particular, we focus on the aggregate
properties regarding to users’ turning STBs on and off, channel
switches, and channel popularity.
3.1 Turning STBs On and Off
We ﬁrst focus on the length of STB on- and off-sessions. An
on-session is deﬁned as the duration from a STB being switched
on till it gets switched off. Similarly, an off-session is the duration
from the last time a STB was switched off till it gets switched on.
We ﬁrst examine the distribution function of the length of on- and
off-sessions respectively.
Figure 2 shows the complementary cumulative distribution func-
tion (CCDF) of the length of on- and off-sessions. Using CCDF,
we can better illustrate the tail property of the distributions. We
ﬁrst observe that both on-sessions and off-sessions exhibit a very
long tail in their distributions – around 5% of the on-sessions and
off-sessions are over 1 day in length. In fact, we believe the fast
drop in both tails approaching the right end of the x axis is due to
the limit of our dataset, which is 6 days in total. Comparing off-
session and on-session, we ﬁnd that the off-session has a heavier
tail than the on-session. This matches our intuition since it is more
likely that an IPTV user leaves the TV off for a long time (several
days) than leaving the TV on. We also notice that the curve of off-
session is below that of on-session for low session length. This is
likely due to users’ mistake in operating the remote controller – a
user accidentally turning the STB off while watching a TV program
may quickly switch the STB back on, producing a short off-session
of a few seconds.
In Figure 3, we show the time series of the number of on-line
STBs in one-minute precision (normalized by the average number
of on-line STBs). We observe a very strong diurnal pattern, with
daily peak at around 9PM, followed by a quick decrease in number,
reaching daily minimum at around 4AM, and then steadily ramping
up during the course of day. Note that there are a signiﬁcant number
of STBs left on over night.
As both on- and off-sessions are bounded by users’ action in
switching on and off the STBs, it makes sense to observe these
event processes directly. Figures 4a and 4b show a one-day time
series of the event rate for the switching-on and switching-off events
respectively. Both plots are shown in one-minute precision. Here
the event rate is the number of switching-on/-off events during the
interval normalized by the total number of off-line/on-line STBs at
the beginning of the interval. We make two observations. First,
there is a strong time-of-day effect in both ﬁgures.The switching-
on event rate has local peaks at around 7AM and around 9PM and
the switching-off event rate has local peaks at around 7:30AM and
around 12AM, both matching well with our intuition relating to
432e
t
a
R
0.1
0.08
0.06
0.04
0.02
0
0:00
0.02
0.015
e
t
a
R
0.01
0.005
e
t
a
R
0.35
0.3
0.25
0.2
0.15
0.1
0.05
0
0
8:00
24:00
0
0:00
20:00
12:00
Local time
4:00