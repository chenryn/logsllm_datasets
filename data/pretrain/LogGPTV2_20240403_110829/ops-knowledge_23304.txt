User: 请回答以下安全问题如果仅用于SMB服务器发现，SMBv1是否安全？我注意到我在Samba服务器上的SMB共享不再出现在Windows文件资源管理器的Windows 10网络浏览（网络邻居）中。原因是该功能最初一直依赖于SMBv1来工作——默认情况下，SMBv1似乎最晚在Windows 10 1703中就已安装并启用——但后来转而使用WS-Discovery。Samba似乎并不支持后者。
仅使用协议来发现SMB网络服务，而不实际连接到服务器的SMBv1客户端的安全含义是什么？这篇博客文章列出了几个漏洞，但我对SMB的了解还不够，无法确定它们是否仅适用于正在连接/连接到服务器的SMBv1客户端，或者即使它只是坐在那里试图发现服务器而没有尝试连接，它是否适用。

Assistant: 请勿使用SMBv1。它已经被弃用太久了，以至于你实际上必须在Windows上手动启用它才能使其工作。它非常缓慢，不安全，并使主机暴露在互联网上已经存在了20多年的漏洞中。。。不要使用它。
编辑：
SMBv2是对SMBv1的完全重写。每一个对更高阶SMB“版本”的引用都只不过是SMB2的方言（例如，SMB 3.1只是SMB2的一种方言）。作为差异的一个例子：
SMB1为每个文件系统命令发送一个数据包。SMB2为每个数据包发送多个命令。
SMB1具有100多个特定命令。SMB2具有类似的12（这可能不完全准确，但数字非常低）。
它们本质上是不同的协议。不要打开SMBv1。为了一个可以通过提供到共享的驱动器映射来绕过的功能，您将主机暴露在一大堆漏洞中。
针对OP编辑的最终编辑：
SMBv1的问题是SMB中继攻击，最终是攻击者使用它获取凭据。
Windows提供了一种要求对网络通信进行数字签名的方法，特别是与SMB通信相关的网络通信。
将此策略设置为针对本地策略或组策略中的所有SMBv1通信启用：Microsoft网络客户端：对通信进行数字签名（始终）
这可能会中断对SAMBA服务器的访问，除非您可以将其配置为也对SMBv1通信进行数字签名。
FWIW，如果我没有说清楚的话，我不建议使用SMBv1，因为它效率低下，不安全。一旦你在一台主机上误解了这一点，你就启用了当今网络上最常被利用的漏洞之一。祝你好运