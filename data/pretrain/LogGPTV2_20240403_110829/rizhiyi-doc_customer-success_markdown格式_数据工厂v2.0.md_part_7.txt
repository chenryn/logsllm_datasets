| Region         | 托管ElasticSearch域的Amazon Web服务区域。           |
|                |                                                     |
|                | 使用AWS Signature v4身份验证时可用。                |
+----------------+-----------------------------------------------------+
| Access Key ID  | AWS访问密钥I                                        |
|                | D。不将IAM角色与IAM实例配置文件凭据一起使用时需要。 |
|                |                                                     |
|                | 使用AWS签名v4身份验证时可用。                       |
+----------------+-----------------------------------------------------+
| Secret Access  | AWS秘密访问密钥                                     |
| Key            | 。不将IAM角色与IAM实例配置文件凭据一起使用时需要。  |
|                |                                                     |
|                | 使用AWS Signature v4身份验证时可用。                |
+----------------+-----------------------------------------------------+
| SSL Truststore | 信任存储文件的位置。                                |
| Path           |                                                     |
|                | 配置此属性等同于配置shield.ssl.truststore.path      |
|                | elasticsearch属性。                                 |
|                |                                                     |
|                | Elastic Cloud集群不需配置。                         |
+----------------+-----------------------------------------------------+
| SSL Truststore | 信任库文件的密码。                                  |
| Password       |                                                     |
|                | 配置此属性等同于配置shield.ssl.truststore.password  |
|                | elasticsearch属性。                                 |
|                |                                                     |
|                | Elastic Cloud集群不需配置。                         |
+----------------+-----------------------------------------------------+
### 数据转换清洗组件
数据转换清洗组件对输入数据的处理或者分流或者计算，即ETL（抽取Extract、转换Transform、加载Load）过程中转换的过程，可实现对每个字段的过滤、更改、编码、聚合等规范化操作。数据经由该组件采集后，在内部将以SDC
Record格式存在。
StreamSets中支持多种数据处理，如下表所示：
  ----------------------------------------------------------------------------------------------------------
  **编解码**    **字段解析**    **转换处理**   **数据扩充**   **求值计算**   **流控**       **表结构定义**
  ------------- --------------- -------------- -------------- -------------- -------------- ----------------
  Encrypt and   JSON            Field          MongoDB Lookup Databricks ML  Windowing      Schema Generator
  Decrypt                       Flattener                                    Aggregator     
  Whole File    XML             Field Hasher   MongoDB Lookup Expression     Record         PostgreSQL
  Transformer                                                                Deduplicator   Metadata
  Base64        SQL             Field Mapper   JDBC Tee       Groovy         HTTP Router    Hive Metadata
  Encoder                                                                                   
  Base64        Log/apache      Field Masker   Kudu Lookup    JavaScript     Delay          
  Decoder                                                                                   
                Log/grok        Field Merger   HBase Lookup   Jython         Stream         
                                                                             Selector       
                Log/log4j       Field Order    Redis Lookup   MLeap                         
                Log/regex       Field Pivoter  Static Lookup  Spark                         
                Log/cef         Field Remover  Geo IP         TensorFlow                    
                Data/avro       Field Renamer  HTTP Client                                  
                Data/csv        Field Replacer                                              
                Data/netflow    Field Splitter                                              
                Data/protobuf   Type Converter                                              
                Data/syslog     Field Zip                                                   
                Data/collectd   Data Generator                                              
                                XML Flattener                                               
                                JSON Generator                                              
  ----------------------------------------------------------------------------------------------------------
常用的数据转换清洗组件介绍如下：
#### Field Remover/字段删除
Field
Remover处理器从记录中删除字段，配置处理器时，您可以指定字段列表及Field
Remover处理器对这些字段执行的操作：
-   保留列出的字段并删除所有其他字段
-   删除列出的字段
-   删除任何具有特定值的列出字段：空值、空字符串、指定常量
配置Field Remover处理器以从管道中删除不需要的字段的顺序如下：
1、在"属性"面板的"常规"选项卡上，配置以下属性：
+---------------+------------------------------------------------------+
| **常规属性**  | **说明**                                             |
+===============+======================================================+
| 姓名          | 阶段名称                                             |
+---------------+------------------------------------------------------+
| 说明          | 可选说明                                             |
+---------------+------------------------------------------------------+
| [Required     | 必须包含要传递到阶段的记录的数据的字段。             |
| Fie           |                                                      |
| lds](https:// | 提示：您可以包括阶段使用的字段。                     |
| streamsets.co |                                                      |
| m/documentati | 不包括所                                             |
| on/datacollec | 有必需字段的记录将根据为管道配置的错误处理进行处理。 |
| tor/latest/he |                                                      |
| lp/datacollec |                                                      |
| tor/UserGuide |                                                      |
| /Pipeline_Des |                                                      |
| ign/DroppingU |                                                      |
| nwantedRecord |                                                      |
| s.html#concep |                                                      |
| t_dnj_bkm_vq) |                                                      |
+---------------+------------------------------------------------------+
| [Preconditi   | 必须计算为true才能允许                               |
| ons](https:// | 记录进入处理阶段的条件。单击添加以创建其他前提条件。 |
| streamsets.co |                                                      |
| m/documentati | 不满足所                                             |
| on/datacollec | 有前提条件的记录将基于为阶段配置的错误处理进行处理。 |
| tor/latest/he |                                                      |
| lp/datacollec |                                                      |
| tor/UserGuide |                                                      |
| /Pipeline_Des |                                                      |
| ign/DroppingU |                                                      |
| nwantedRecord |                                                      |
| s.html#concep |                                                      |
| t_msl_yd4_fs) |                                                      |
+---------------+------------------------------------------------------+
| [On Record    | 阶段的错误记录处理：                                 |
| Error         |                                                      |
| ](https://str | -   丢弃-丢弃记录。                                  |
| eamsets.com/d |                                                      |
| ocumentation/ | -   发送到错误-将记录发送到管道以进行错误处理。      |
| datacollector |                                                      |
| /latest/help/ | -   停止管道-停止管道。                              |
| datacollector |                                                      |
| /UserGuide/Pi |                                                      |
| peline_Design |                                                      |
| /ErrorHandlin |                                                      |
| g.html#concep |                                                      |
| t_atr_j4y_5r) |                                                      |
+---------------+------------------------------------------------------+
2、在"删除"选项卡上，配置以下属性：
+----------------+-----------------------------------------------------+
| **Field        | **说明**                                            |
| Remover        |                                                     |
| Property**     |                                                     |
+================+=====================================================+
| Action         | 要完成的行动：                                      |
|                |                                                     |
|                | •保留列出的字段                                     |
|                |                                                     |
|                | •删除列出的字段                                     |
|                |                                                     |
|                | •如果其值为null，则删除所有列出的字段               |
|                |                                                     |
|                | •如果其值为空字符串，则删除所有列出的字段           |
|                |                                                     |
|                | •如果其值为null或为空字符串，则删除所有列出的字段   |
|                |                                                     |
|                | •如果其值为指定常量，则删除所有列出的字段           |
+----------------+-----------------------------------------------------+
| Fields         | 要保留或删除的字段列表。                            |
|                |                                                     |
|                | 您可以使用星号通配符表示数组索引和映射元素。        |
|                |                                                     |
|                | 您可                                                |
|                | 以指定单个字段或使用字段路径表达式来指定一组字段。  |
+----------------+-----------------------------------------------------+
| Constant       | 导致删除字段的字段值。                              |
|                |                                                     |
|                | 删除具有指定常量的字段时可用。                      |
+----------------+-----------------------------------------------------+
#### Field Renamer/字段重命名
Field Renamer用来重命名记录中的字段，其配置顺序如下：
1、在"属性"面板的"常规"选项卡上，配置以下属性：
+---------------+------------------------------------------------------+
| **常规属性**  | **说明**                                             |
+===============+======================================================+
| Name          | 阶段名称                                             |
+---------------+------------------------------------------------------+
| Description   | 可选说明                                             |
+---------------+------------------------------------------------------+
| [Required     | 必须包含要传递到阶段的记录的数据的字段。             |
| Fie           |                                                      |
| lds](https:// | 提示：您可以包括阶段使用的字段。                     |
| streamsets.co |                                                      |
| m/documentati | 不包括所                                             |
| on/datacollec | 有必需字段的记录将根据为管道配置的错误处理进行处理。 |
| tor/latest/he |                                                      |
| lp/datacollec |                                                      |
| tor/UserGuide |                                                      |
| /Pipeline_Des |                                                      |
| ign/DroppingU |                                                      |
| nwantedRecord |                                                      |
| s.html#concep |                                                      |
| t_dnj_bkm_vq) |                                                      |
+---------------+------------------------------------------------------+
| [Preconditi   | 必须计算为true才能允许                               |
| ons](https:// | 记录进入处理阶段的条件。单击添加以创建其他前提条件。 |
| streamsets.co |                                                      |
| m/documentati | 不满足所                                             |
| on/datacollec | 有前提条件的记录将基于为阶段配置的错误处理进行处理。 |
| tor/latest/he |                                                      |
| lp/datacollec |                                                      |
| tor/UserGuide |                                                      |
| /Pipeline_Des |                                                      |
| ign/DroppingU |                                                      |
| nwantedRecord |                                                      |
| s.html#concep |                                                      |
| t_msl_yd4_fs) |                                                      |
+---------------+------------------------------------------------------+
| [On Record    | 阶段的错误记录处理：                                 |
| Error         |                                                      |
| ](https://str | 丢弃-丢弃记录。                                      |
| eamsets.com/d |                                                      |
| ocumentation/ | 发送到错误-将记录发送到管道以进行错误处理。          |
| datacollector |                                                      |
| /latest/help/ | 停止管道-停止管道。                                  |
| datacollector |                                                      |
| /UserGuide/Pi |                                                      |
| peline_Design |                                                      |
| /ErrorHandlin |                                                      |
| g.html#concep |                                                      |
| t_atr_j4y_5r) |                                                      |
+---------------+------------------------------------------------------+
2、在"重命名"选项卡上，配置以下属性：
+------------+---------------------------------------------------------+
| **Field    | **Description**                                         |
| Renamer    |                                                         |
| Property** |                                                         |
+============+=========================================================+
| Fields to  | 要重命名字段，请在"源字段表达式"中输入或选择要重        |
| Rename     | 命名的字段，然后在"目标字段表达式"中输入字段的新名称。  |
|            | 单击"添加"以重命名其他字段。                            |
|            |                                                         |
|            | 要重命名字段集，请使用表达式：                          |
|            |                                                         |
|            | -   可以在两个属性中使用正则表达式。                    |
|            |                                                         |
|            | -                                                       |
|            |   可以在"目标字段表达式"属性中使用StreamSet表达式语言。 |
|            |                                                         |
|            | 要重命名数组或                                          |
|            | 映射，可以指定单个数组索引或映射元素，也可以使用通配符  |
|            | \* 表示所有数组索引和映射元素。                         |
|            |                                                         |
|            | 您不能使用正则表达式来选择数组索引和映射元素的子        |
|            | 集。例如，如果Division数组包含20个索引，则不能使用以下  |
|            | 正则表达式重命名前10个索引的字段路径：/Division\[0-9\]  |
|            |                                                         |
|            | 注意：如果重命名列表或列表映射字段中的字段，则          |
|            | 处理器会在列表或列表映射字段的末尾列出重命名的字段。可  |
|            | 以使用"字段顺序"处理器对列表映射字段中的字段重新排序。  |
+------------+---------------------------------------------------------+
| Source     | 记录中不存在源字段时的行为：                            |
| Field Does |                                                         |
| Not Exist  | -   继续 - 继续处理记录，忽略缺少的源字段。             |
|            |                                                         |
|            | -   发送到错误 - 根据为阶段配置的错误处理处理记录。     |
+------------+---------------------------------------------------------+
| Target     | 记录包含与建议目标字段匹配的字段名称时的行为：          |
| Field      |                                                         |
| Already    | -   替换 - 用重命名的字段替换现有字段。                 |
| Exists     |                                                         |
|            | -   附加数字 - 将数字附加到重命名字段中的任何重复项。   |
|            |                                                         |
|            | -   继续 - 继续处理记录，不对现有字段进行更改。         |
|            |                                                         |
|            | -   发送到错误 - 根据为阶段配置的错误处理处理记录。     |
+------------+---------------------------------------------------------+
| Multiple   | 源字段与多个源字段表达式均匹配时的行为：                |
| Source     |                                                         |
| Field      | -   继续 - 继续处理记录，跳过多个匹配的字段。           |
| Matches    |                                                         |
|            | -   发送到错误 - 根据为阶段配置的错误处理处理记录。     |
+------------+---------------------------------------------------------+
#### Field Splitter/字段拆分
Field Splitter根据正则表达式拆分字符串数据，并将分离的数据传递给新字段。
使用Field
Splitter将复杂的字符串值拆分为逻辑组件。例如，如果字段包含由逗号分隔的错误代码和错误消息，则可以使用逗号将代码和消息分隔到不同的字段中。
##### 原理说明
配置Field
Splitter需指定要拆分的字段、用作分隔符的正则表达式以及需要拆分出来的新字段的字段名。可以保持原始字段被拆分或丢弃，还可以配置当记录没有预期的拆分字段时要执行的操作，以及当记录包含更多可能拆分的其他数据时要执行的操作。
1、拆分不足时：
当数据包含的拆分数不如处理器中列出的拆分数时，字段没有足够的拆分。
当字段没有足够的拆分时，字段拆分器可以根据配置的阶段错误处理继续处理记录。处理器将尽可能多地传递带有数据拆分的记录，并为未使用的拆分字段传递空值。
例如，假设字段中的数据只有一个拆分分隔符。这将生成要写入两个拆分字段的数据，但处理器有三个列出的拆分字段。这种情况下，处理器根据"分割不够"属性处理记录。
2、拆分过多时：
当字段包含太多拆分时，Field
Splitter可以包含最后列出的拆分字段中的所有剩余数据，或者它可以将其他拆分写入指定的列表字段。
举例：
Field Splitter使用逗号将数据拆分为两个字段：ErrorCode和ErrorMsg。 Not
Enough
Splits属性将没有足够拆分的记录发送以进行错误处理，并且该阶段配置为丢弃错误记录。
Too Many Splits属性将其他数据写入MoreInfo列表字段。
![https://streamsets.com/documentation/datacollector/latest/help/datacollector/UserGuide/Graphics/FieldSplitter.png](media/image80.png){width="5.763888888888889in"
height="3.578662510936133in"}
假设管道将以下一组记录传递给处理器：