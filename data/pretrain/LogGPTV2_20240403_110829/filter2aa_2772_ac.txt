Common Object File Format
10
SPRAAO8–April 2009
Submit Documentation Feedback
6
Symbol Table Structure and Content
Definedglobalsymbols
Undefinedglobalsymbols
Staticvariables
...
www.ti.com
Symbol Table Structure and Content
The order of symbols in the symbol table is very important; they appear in the sequence shown in
Figure 4.
Figure 4. Symbol Table Contents
Static variables refer to symbols defined in C/C++ that have storage class static outside any function. If
you have several modules that use symbols with the same name, making them static confines the scope
of each symbol to the module that defines it (this eliminates multiple-definition conflicts).
The entry for each symbol in the symbol table contains the symbol's:
•
Name (or an offset into the string table)
•
Type
•
Value
•
Section it was defined in
•
Storage class
For MSP430 and TMS470, the entry for each symbol in the symbol table also contains the symbol's:
•
Basic type (integer, character, etc.)
•
Derived type (array, structure, etc.)
•
Dimensions
•
Line number of the source code that defined the symbol
Section names are also defined in the symbol table.
All symbol entries, regardless of class and type, have the same format in the symbol table. Each symbol
table entry contains the 18 bytes of information listed in Table 16. Each symbol may also have an 18-byte
auxiliary entry; the special symbols listed in Table 17 always have an auxiliary entry. Some symbols may
not have all the characteristics listed above; if a particular field is not set, it is set to null.
Table 16. Symbol Table Entry Contents
Byte Number
Type
Description
0-7
Char
This field contains one of the following: 1) An 8-character symbol name, padded
with nulls. 2) A pointer into the string table if the symbol name is longer than eight
characters.
8-11
Long(1)
Symbol value; storage class dependent
12-13
Short
Section number of the symbol
14-15
Unsigned short
Reserved
16
Char
Storage class of the symbol
17
Char
Number of auxiliary entries (always 0 or 1)
(1)
For C6000 the type is integer.
SPRAAO8–April 2009
Common Object File Format
11
Submit Documentation Feedback
6.1
Special Symbols
6.2
Symbol Name Format
6.3
String Table Structure
’A’
’d’
’a’
’p’
’t’
’i’
’e’
’v’
’t’
’e’
’−’
’F’
’\0’
’r’
’l’
’i’
’f’
’s’
’T’
’i’
’r’
’e’
’F’
’o’
’o’
’r’
’n’
’−’
’a’
’r’
’r’
’u’
’m’
’\0’
38bytes
4bytes
Symbol Table Structure and Content
www.ti.com
The symbol table contains some special symbols that are generated by the compiler, assembler, and link
step. Each special symbol contains ordinary symbol table information as well as an auxiliary entry.
Table 17 lists these symbols.
Table 17. Special Symbols in the Symbol Table
Symbol
Description
.text
Address of the .text section
.data
Address of the .data section
.bss
Address of the .bss section
etext
Next available address after the end of the .text output section
edata
Next available address after the end of the .data output section
end
Next available address after the end of the .bss output section
The first eight bytes of a symbol table entry (bytes 0-7) indicate a symbol's name:
•
If the symbol name is eight characters or less, this field has type character. The name is padded with
nulls (if necessary) and stored in bytes 0-7.
•
If the symbol name is greater than eight characters, this field is treated as two integers. The entire
symbol name is stored in the string table. Bytes 0-3 contain 0, and bytes 4-7 are an offset into the
string table.
The string table stores symbols with names longer than eight characters. The field in the symbol table
entry that would normally contain the symbol's name actually points to the symbol's name in the string
table. The string table contiguously stores names, delimited by a null byte. The first four bytes of the table
contain the table size in bytes; thus, offsets into the string table are greater than or equal to 4.
Figure 5 is a string table that contains two symbol names, Adaptive-Filter and Fourier-Transform. The
index in the string table is 4 for Adaptive-Filter and 20 for Fourier-Transform.
Figure 5. String Table Entries for Sample Symbol Names
Common Object File Format
12
SPRAAO8–April 2009
Submit Documentation Feedback
6.4
Storage Classes
6.5
Symbol Values
6.6
Section Number
www.ti.com
Symbol Table Structure and Content
Byte 16 of the symbol table entry indicates the storage class of the symbol. Storage classes refer to the
method in which the C/C++ compiler accesses a symbol. Table 18 lists valid storage classes.
Table 18. Symbol Storage Classes
Mnemonic
Value
Storage Class
Mnemonic
Value
Storage Class
C_NULL
0
No storage class
C_USTATIC
14
Undefined static
C_AUTO
1
Reserved
C_ENTAG
15
Reserved
C_EXT
2
External definition
C_MOE
16
Reserved
C_STAT
3
Static
C_REGPARM
17
Reserved
C_REG
4
Reserved
C_FIELD
18
Reserved
C_EXTREF
5
External reference
C_UEXT(1)
19
Tentative external definition
C_LABEL
6
Label
C_STATLAB(1)
20
Static load time label
C_ULABEL
7
Undefined label
C_EXTLAB(1)
21
External load time label
C_MOS
8
Reserved
C_VARARG(1)(2)
27
Last declared parameter of a function with a
variable number of arguments
C_ARG
9
Reserved
C_BLOCK
100
Reserved
C_STRTAG
10
Reserved
C_FCN
101
Reserved
C_MOU
11
Reserved
C_EOS
102
Reserved
C_UNTAG
12
Reserved
C_FILE
103
Reserved
C_TPDEF
13
Reserved
C_LINE
104
Used only by utility programs
(1)
Not applicable to C5400 or C5500
(2)
Not applicable to C2800
The .text, .data, and .bss symbols are restricted to the C_STAT storage class.
Bytes 8-11 of a symbol table entry indicate a symbol's value. The C_EXT, C_STAT, and C_LABEL
storage classes hold relocatable addresses.
The value of a relocatable symbol is its virtual address. When the link step relocates a section, the value
of a relocatable symbol changes accordingly.
Bytes 12-13 of a symbol table entry contain a number that indicates in which section the symbol was
defined. Table 19 lists these numbers and the indicated sections.
Table 19. Section Numbers
Mnemonic
Section Number
Description
None
-2
Reserved
N_ABS
-1
Absolute symbol
N_UNDEF
0
Undefined external symbol
None(1)
1
.text section (typical)
None(1)
2
.data section (typical)
None(1)
3
.bss section (typical)
None(1)
4-32 767
Section number of a named section, in the order in which the named
sections are encountered
(1)
For C5500 and C2800, the mnemonic is N_SCNUM
SPRAAO8–April 2009
Common Object File Format
13
Submit Documentation Feedback
6.7
Auxiliary Entries
Symbol Table Structure and Content
www.ti.com
If there were no .text, .data, or .bss sections, the numbering of named sections would begin with 1.
If a symbol has a section number of 0, -1, or -2, it is not defined in a section. A section number of -1
indicates that the symbol has a value but is not relocatable. A section number of 0 indicates a relocatable
external symbol that is not defined in the current file.
Each symbol table entry can have one or noauxiliary entry. An auxiliary symbol table entry contains the
same number of bytes as a symbol table entry (18). Table 20 illustrates the format of auxiliary table
entries.
Table 20. Section Format for Auxiliary Table Entries
Byte Number
Type
Description
0-3
Long(1)
Section length
4-5
Unsigned short
Number of relocation entries
6-7
Unsigned short
Number of line number entries
8-17
Not used (zero filled)
(1)
For C6000 the type is integer.
Common Object File Format
14
SPRAAO8–April 2009
Submit Documentation Feedback
IMPORTANT NOTICE
Texas Instruments Incorporated and its subsidiaries (TI) reserve the right to make corrections, modifications, enhancements, improvements,
and other changes to its products and services at any time and to discontinue any product or service without notice. Customers should
obtain the latest relevant information before placing orders and should verify that such information is current and complete. All products are
sold subject to TI’s terms and conditions of sale supplied at the time of order acknowledgment.
TI warrants performance of its hardware products to the specifications applicable at the time of sale in accordance with TI’s standard
warranty. Testing and other quality control techniques are used to the extent TI deems necessary to support this warranty. Except where
mandated by government requirements, testing of all parameters of each product is not necessarily performed.
TI assumes no liability for applications assistance or customer product design. Customers are responsible for their products and
applications using TI components. To minimize the risks associated with customer products and applications, customers should provide
adequate design and operating safeguards.
TI does not warrant or represent that any license, either express or implied, is granted under any TI patent right, copyright, mask work right,
or other TI intellectual property right relating to any combination, machine, or process in which TI products or services are used. Information
published by TI regarding third-party products or services does not constitute a license from TI to use such products or services or a
warranty or endorsement thereof. Use of such information may require a license from a third party under the patents or other intellectual
property of the third party, or a license from TI under the patents or other intellectual property of TI.
Reproduction of TI information in TI data books or data sheets is permissible only if reproduction is without alteration and is accompanied
by all associated warranties, conditions, limitations, and notices. Reproduction of this information with alteration is an unfair and deceptive
business practice. TI is not responsible or liable for such altered documentation. Information of third parties may be subject to additional
restrictions.
Resale of TI products or services with statements different from or beyond the parameters stated by TI for that product or service voids all
express and any implied warranties for the associated TI product or service and is an unfair and deceptive business practice. TI is not
responsible or liable for any such statements.
TI products are not authorized for use in safety-critical applications (such as life support) where a failure of the TI product would reasonably
be expected to cause severe personal injury or death, unless officers of the parties have executed an agreement specifically governing
such use. Buyers represent that they have all necessary expertise in the safety and regulatory ramifications of their applications, and
acknowledge and agree that they are solely responsible for all legal, regulatory and safety-related requirements concerning their products
and any use of TI products in such safety-critical applications, notwithstanding any applications-related information or support that may be
provided by TI. Further, Buyers must fully indemnify TI and its representatives against any damages arising out of the use of TI products in
such safety-critical applications.
TI products are neither designed nor intended for use in military/aerospace applications or environments unless the TI products are
specifically designated by TI as military-grade or "enhanced plastic." Only products designated by TI as military-grade meet military
specifications. Buyers acknowledge and agree that any such use of TI products which TI has not designated as military-grade is solely at
the Buyer's risk, and that they are solely responsible for compliance with all legal and regulatory requirements in connection with such use.
TI products are neither designed nor intended for use in automotive applications or environments unless the specific TI products are
designated by TI as compliant with ISO/TS 16949 requirements. Buyers acknowledge and agree that, if they use any non-designated
products in automotive applications, TI will not be responsible for any failure to meet such requirements.
Following are URLs where you can obtain information on other Texas Instruments products and application solutions:
Products
Applications
Amplifiers
amplifier.ti.com
Audio
www.ti.com/audio
Data Converters
dataconverter.ti.com
Automotive
www.ti.com/automotive
DLP® Products
www.dlp.com
Broadband
www.ti.com/broadband
DSP
dsp.ti.com
Digital Control
www.ti.com/digitalcontrol
Clocks and Timers
www.ti.com/clocks
Medical
www.ti.com/medical
Interface
interface.ti.com
Military
www.ti.com/military
Logic
logic.ti.com
Optical Networking
www.ti.com/opticalnetwork
Power Mgmt
power.ti.com
Security
www.ti.com/security
Microcontrollers
microcontroller.ti.com
Telephony
www.ti.com/telephony
RFID
www.ti-rfid.com
Video & Imaging
www.ti.com/video
RF/IF and ZigBee® Solutions
www.ti.com/lprf
Wireless
www.ti.com/wireless
Mailing Address: Texas Instruments, Post Office Box 655303, Dallas, Texas 75265
Copyright © 2009, Texas Instruments Incorporated