User: Please write a shell script to monitor the load of the server and trigger an alert notification when the load is too high.
Assistant: #!/bin/bash # Monitor the server load and trigger an alarm notification when the load is too high load_threshold=10 # Set the load threshold, which will trigger an alarm notification recipient="admin@example.com" # Set the notification receiver while true; do load=$(uptime | awk '{print $10}' | cut -d',' -f1) # Get the current system load if [ $(echo "$load > $load_threshold" | bc) -eq 1 ] ; then # Determine whether the load exceeds the threshold echo "The server load is too high, please deal with it in time! The current load value is: $load" | mail -s "Server load alarm" $recipient # Send alarm notification fi sleep 5 # Every 5 seconds Detect a load done # Script description: # 1. Use the uptime command to obtain the system load value; # 2. Use the awk and cut commands to extract the load value; # 3. Use the bc command to calculate whether the load exceeds the threshold; # 4. Use mail Command to send alarm notification; # 5. Use the sleep command to regularly detect the load.