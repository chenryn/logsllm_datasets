# Title: Peering at the Internet's Frontier: A First Look at ISP Interconnectivity in Africa

## Authors:
- Arpit Gupta (Georgia Tech)
- Matt Calder (University of Southern California)
- Nick Feamster (Georgia Tech)
- Marshini Chetty (University of Maryland, Research ICT Africa)
- Enrico Calandro (Research ICT Africa)
- Ethan Katz-Bassett (University of Southern California)

## Abstract
In developing regions, the performance to commonly visited destinations is often dominated by network latency, which in turn depends on the connectivity from ISPs in these regions to the locations that host popular sites and content. This paper provides an initial examination of ISP interconnectivity between various regions in Africa, revealing many circuitous Internet paths that should remain local but often detour through Europe. We investigate the causes of these circuitous paths and evaluate the benefits of increased peering and better cache proxy placement for reducing latency to popular Internet sites.

## 1. Introduction
The quality of an Internet user's experience is heavily influenced by the reliability and performance of the paths to the sites they frequently visit. In developed regions, a rich ecosystem of peering and interconnection exists among a variety of ISPs, ranging from access networks to content providers. However, in developing regions, the situation is more complex. Popular content (e.g., Facebook, Google) may be hosted far away, sometimes even on different continents. Even when the destination or content is nearby, the path to it may be circuitous if two ISPs do not connect directly. For example, a user's path between South Africa and Kenya might "detour" through Europe if the African ISPs do not directly connect with each other. These inefficiencies can significantly degrade Internet performance and impact decisions about where to place content and services. For instance, a content provider might deploy a cache in a particular ISP in one region, expecting to serve a large group of users. If many Internet paths to that ISP from nearby users are circuitous, the cache will provide limited benefit to local users.

In this paper, we characterize the nature of interdomain Internet connectivity in Africa, focusing on the connectivity at two major local Internet exchange points (IXPs): JINX in Johannesburg and KIXP in Nairobi. We perform continual traceroute measurements from BISmark routers in South Africa to Measurement Lab servers deployed in South Africa, Kenya, and Tunisia. These traceroutes help us understand the extent to which Internet paths that should remain local ultimately take a circuitous path through a remote exchange point, typically in Europe. We use detailed BGP routing information from RouteViews, Packet Clearing House (PCH), and Hurricane Electric, as well as information from PeeringDB and IXP websites, to explain why these paths are circuitous.

We also quantify the potential benefits of better peering or more extensive placement of caching proxies (or both) in reducing latency to popular services. We perform trace-driven emulations to recommend specific steps for improving the performance of specific services in Africa. For example, we observe that deploying a Google cache node in a particular ISP will provide no benefit to Internet users in other local ISPs unless that ISP makes specific peering arrangements with ISPs hosting cache nodes. Based on this observation, we study how certain "surgical" peering arrangements within Africa could improve Internet performance by short-circuiting longer routes via European IXPs.

Specifically, we address the following questions:
- **What is the nature of interdomain Internet paths between locations in Africa?** (Section 3) We characterize interdomain peering between various ISPs in Africa, measuring the presence of local ISPs at various African IXPs and the extent to which ISPs (or groups of ISPs) choose to interconnect at these exchanges. We find that 66.8% of the paths between residential access links and Google cache nodes in Africa leave the continent. Many circuitous paths result from the fact that local ISPs are often not present at local exchanges, and, when they are, they often do not peer with one another.
- **What can be done to reduce latency to Internet services in Africa?** (Section 4) We explore how additional peering relationships and proxy cache server deployments could improve the performance of specific services for users in Africa by short-circuiting circuitous paths.

To facilitate further research in this area, we have released the measurement and analysis code for the results in this study [6].

## 2. Measurements
To measure latency between endpoints and infer peering relationships at IXPs, we rely on two datasets:
1. **BGP Routing Tables:** From RouteViews, PCH, and Hurricane Electric.
2. **Periodic Traceroutes:** From BISmark routers deployed across South Africa to globally deployed Measurement Lab servers, IXP participants, and Google cache server deployments across Africa.

### 2.1 Caveats and Limitations
Our data has several caveats. First, many of the Internet paths we measure are either to or from locations in one country, South Africa. Thus, our measurements may not fully reflect the nature of paths in other African countries. We are expanding the deployment across other countries in Africa and hope that this study will encourage others to study similar phenomena. Second, peering in Africa is rapidly evolving, and the characteristics we observe from our current measurements will certainly change. Our study provides a snapshot of the current state of peering in parts of Africa and an evaluation of the benefits of improved peering.

### 2.2 Interdomain Routes: BGP Routing Tables
We use several sources of BGP routing tables: RouteViews, PCH, and Hurricane Electric. The BGP AS path attribute in the routing tables helps us infer peering relationships between ASes at each IXP. Each dataset provides a complementary view into the connectivity between ASes in Africa. For RouteViews and PCH, an AS will peer with a route server at each of these collection points, providing routes to all of its customer ASes but not to its peers. Most ASes at each IXP do not provide routes to RouteViews or PCH, making it difficult to determine the complete set of peering relationships at an IXP. To gain a more complete picture, we crawled the Hurricane Electric web portal, which allows us to see many additional inter-AS relationships not visible in other datasets. If two ASes are adjacent in any AS path we observe and both present at an IXP, we assume a peering relationship exists at that IXP. Unfortunately, none of these datasets allow us to see peering links between customer ASes, so our view of peering is still limited. To augment these measurements, we use traceroute measurements from BISmark nodes, as described below.

### 2.3 Router-Level Paths: BISmark Routers
BISmark (Broadband Internet Service Benchmark) is a combination of OpenWrt-based custom firmware and user-space packages [9]. We deploy the software on home gateway routers immediately downstream of the residential broadband access link. BISmark runs on any OpenWrt-capable device, but we have primarily deployed the software on the NetGear WNDR 3700 and 3800. Because the router is always on and connected directly to the provider, we can perform continuous measurements. The BISmark router deployment in South Africa provides the primary vantage points from access networks for this study. We deployed 17 BISmark routers across 7 ISPs and all 9 provinces in South Africa (Figure 1). We performed regular measurements from these BISmark routers to nine global Measurement Lab servers (Figure 1), including three locations in Africa: Tunis, Johannesburg, and Nairobi. We perform traceroutes between the BISmark nodes and the Measurement Lab servers in both directions every thirty minutes using Paris traceroute. These traceroutes expose the sequence of ASes that these paths traverse. We use the latency information in each traceroute hop to infer when an Internet path may have left Africa and the latency in the last hop of the traceroute to estimate the latency to the corresponding M-Lab server.

We use the BISmark vantage points to send traceroute probes to all the IXP participants to infer the peering relationships at these IXPs. If a router at the IXP appears in the path, we conclude that the peering link is present at the IXP. We discard measurements if the traceroute has missing hop information at a transition between two ASes, as such missing data would prevent us from determining if an additional AS was present between the two we observed. These measurements revealed 40 additional links at JINX and 14 additional links at KIXP. In cases where an IXP participant hosts a BISmark router, this additional visibility is significant. For example, in the case of AS36874 (Cybersmart), which hosts two BISmark routers, we can verify 15 out of 20 visible peering links using these additional measurements.

## 3. A First Look at ISP Interconnectivity in Africa
We first explore the prevalence of high-latency paths, as measured from the BISmark routers in South Africa to the global M-Lab server destinations (Section 3.1). We then explore the causes of these circuitous paths (Section 3.2). Based on our findings, the subsequent sections make recommendations for improving performance to Internet services in Africa.

### 3.1 High-Latency Paths
Figure 3a shows the distribution of median network latencies observed from the BISmark routers in South Africa to various M-Lab servers around the world. We define the latency penalty as the ratio of the observed median latencies to the best-case propagation delay between South Africa and that city (determined by speed-of-light propagation). Figure 3b shows the latency penalties observed for each destination. For both figures, the cities are shown in increasing order of the geographic distance from South Africa. Due to the nature of peering relationships, the increase in latency does not correlate with geographic distance. For example, even though South Africa is geographically closer to Porto Allegre, Brazil than to London, latencies to Porto Allegre are higher because the path between South Africa and Brazil traverses the London Internet Exchange (LINX). Similar issues are evident with other destinations, such as Nairobi, which is geographically close to South Africa but whose paths to South Africa traverse the LINX.

We find that ASes in Africa often do not peer with each other anywhere on the continent. As a result, many Internet paths "detour" through Europe. In the next section, we further explore the extent and causes of these high-latency circuitous paths.