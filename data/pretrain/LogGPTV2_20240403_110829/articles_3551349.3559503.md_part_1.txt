A fault injection platform for learning AIOps models
FrankBagehorn JesusRios SaurabhJha
PI:EMAIL PI:EMAIL PI:EMAIL
IBMResearchGmbH T.J.WatsonResearchCenter,IBM T.J.WatsonResearchCenter,IBM
Switzerland UnitedStates UnitedStates
RobertFilepp NaokiAbe LauraShwartz
PI:EMAIL PI:EMAIL PI:EMAIL
T.J.WatsonResearchCenter,IBM T.J.WatsonResearchCenter,IBM T.J.WatsonResearchCenter,IBM
UnitedStates UnitedStates UnitedStates
XiYang
PI:EMAIL
T.J.WatsonResearchCenter,IBM
UnitedStates
ABSTRACT Engineering(ASE’22),October10–14,2022,Rochester,MI,USA.ACM,New
Intoday’sITenvironmentwithagrowingnumberofcostlyoutages, York,NY,USA,5pages.https://doi.org/10.1145/3551349.3559503
increasingcomplexityofthesystems,andavailabilityofmassive
operationaldata,thereisastrengtheningdemandtoeffectively
leverageArtificialIntelligenceandMachineLearning(AI/ML)to- 1 INTRODUCTION
wardsenhancedresiliency.Inthispaper,wepresentanautomatic
TheUptimeInstitute’s2022OutageAnalysisReport[19]statesthat
faultinjectionplatformtoenableandoptimizethegenerationof
thenumberofpubliclyreportedoutagesthatlastlongerthan24
dataneededforbuildingAI/MLmodelstosupportmodernITop-
hoursincreasedfrom8%to28%overthelast5years.Costanalysis
erations.Themeritsofourplatformincludetheeaseofuse,the
ofoutagesalsoshowsasharpincreasefrom2019to2021:outages
possibilitytoorchestratecomplexfaultscenariosandtooptimize
withanestimatedcostbetween$100,000and$1millionincreased
thedatagenerationforthemodelingtaskathand.Specifically,we
from28%to47%,andoutagescostingover$1milliongrewfrom
designedafaultinjectionservicethat(i)combinesfaultinjection
11%to15%percent.Withthird-partycommercialoperatorssuchas
withdatacollectioninaunifiedframework,(ii)supportshybrid
cloudhostingandcollocationprovidersaccountingforthemajority
andmulti-cloudenvironments,and(iii)doesnotrequireprogram-
71%(in2021)ofoutages,outageswithrootcausesinoperations
mingskillsforitsuse.Ourcurrentimplementationcoversthemost
topthelist.Whilesignificanteffortshavebeenmadeonimproving
commonfaulttypesbothattheapplicationandinfrastructurelev-
bug localization techniques, the research focusing on reducing
els.TheplatformalsoincludessomeAIcapabilities.Inparticular,
operationalissuesforcriticalproductionapplicationsisstilllimited.
wedemonstratetheinterventionalcausallearningcapabilitycur-
Contemporarymicro-servicesarchitecturessimplifiedthescope
rentlyavailableinourplatform.Weshowhowoursystemisable
ofsoftwaredevelopers,buttherolesofOps/SoftwareReliability
tolearnamodeloferrorpropagationinamicro-serviceapplication
Engineers(SREs)havebecomeevenmorecomplex.TodayanIT
inacloudenvironment(whenthecommunicationgraphamong
environmentwithalargenumberofinter-dependentcomponents,
micro-servicesisunknownandonlylogsareavailable)forusein
usingvirtualizationateverylevel,cangeneratemillionsoftrans-
subsequentapplicationssuchasfaultlocalization.
actionsadayanditscomponentscanchangeeveryfewseconds.
ThevastvolumeofobservabilitydataanddynamismoftheITen-
KEYWORDS
vironmentsmakeitdifficulttoassesstheresiliencypostureofan
Faultinjection,Faultdiagnosis,AIsupportedoperations application.Italsocauseslongerissueresolutiontimeinproduc-
tion.Inaddition,softwarereleaseshavebecomemorefrequentdue
ACMReferenceFormat:
FrankBagehorn,JesusRios,SaurabhJha,RobertFilepp,NaokiAbe,Laura towidelyadoptedagiledevelopment,limitingapplicabilityofprior
Shwartz,andXiYang.2022.AfaultinjectionplatformforlearningAIOps knowledgethatOps/SREshaveandincreasingthecomplexityof
models.In37thIEEE/ACMInternationalConferenceonAutomatedSoftware theirrole.
InfusingArtificialIntelligenceandMachineLearning(AI/ML)
Permissiontomakedigitalorhardcopiesofallorpartofthisworkforpersonalor
intoOpstoolsisoneoftheresponsestotheeverincreasingcom-
classroomuseisgrantedwithoutfeeprovidedthatcopiesarenotmadeordistributed
forprofitorcommercialadvantageandthatcopiesbearthisnoticeandthefullcitation plexityofOps/SREsthatisbeingadoptedbymanyenterprisestoday.
onthefirstpage.Copyrightsforcomponentsofthisworkownedbyothersthanthe However,thisapproachheavilyreliesonhistoricaldatawhichcould
author(s)mustbehonored.Abstractingwithcreditispermitted.Tocopyotherwise,or
havelimitedapplicabilityasdescribedabove.Ourautomatedfault
republish,topostonserversortoredistributetolists,requirespriorspecificpermission
and/orafee.Requestpermissionsfrompermissions@acm.org. injection-basedlearningsolutiondescribedinthispaperwasbuilt
ASE’22,October10–14,2022,Rochester,MI,USA byanIBMResearchteamtoalleviatetheissuesthatAIOpsexperi-
©2022Copyrightheldbytheowner/author(s).PublicationrightslicensedtoACM.
encewithstale,incomplete,andpotentiallymisleadinghistorical
ACMISBN978-1-4503-9475-8/22/10...$15.00
https://doi.org/10.1145/3551349.3559503 data.
ASE’22,October10–14,2022,Rochester,MI,USA FrankBagehorn,JesusRios,SaurabhJha,RobertFilepp,NaokiAbe,LauraShwartz,andXiYang
Oursolutionisafaultinjectionservicethatallowsthesimulation knowledgeofmoderninfrastructurecouldbelimited.However,
ofuser-definedfaultsintoanapplication.Theuseofafaultinjection manyexistingchaosengineeringtoolsassumeagreatdealofdevel-
serviceinastagingenvironmentenablesthetrainingofsupervised opmentskillsanddeepunderstandingofcomputeenvironments.
machinelearningmodelsusingdatacollectedduringfaultinjec- Letusillustratethatbylookingatsomeofthemostwidelyused
tionsimulations.Thesemodelscanthenbeusedinrealtimefor chaosengineeringtools.
thelocalizationofactualfaultsandthediscoveryofperformance
• Chaostoolkit[2]supportsalonglistofdifferentfaulttypes
issuesinproduction.Itisworthemphasizingthat,bycouplingthe
fordifferentenvironments,thussupportinghybridclouds.
datacollectionandmachinelearningsteps,oursolutionmakesit
Ithasspawnedanecosystem,whereadditionalfaulttypes
possibletooptimizethecollectionofdataforthelearningtaskat
forspecificplatformsareaddedbythird-partydevelopers.
hand.Alsoperformingtheminastagingenvironmentminimizes
Butitisprovidedasalibrarythatneedsgluecodetocreate
theoverheadduetodatacollectionandlearningduringoperations.
chaosexperiments.
Faultinjectionisacommonpracticeusedinchaosengineering
• Litmus[11],acloudnativechaosengineeringplatform,pro-
orapplicationtesting.WhileChaosEngineeringisusedinproduc-
videsauserinterface(UI)tocreatechaosexperimentsand
tionenvironments,wepositionoursolutionasanautomatedtool
supportsworkflowstoorchestrateasetofthose.However,
operatinginstagingortestingenvironmentstargetingOperations itstillrequiresagoodunderstandingofKubernetes® and
space.Ourinternalteamsusethesolutiona)tolearnabouttheir
itsYAMLconfigurationfiles,asonemighthavetodealwith
applications’operationalbehaviourinafaultystate,b)togenerate
serviceaccountconfigurationandrole-basedprivilegesto
relatedoperationaldatathatcanbeusedfortrainingandvalidation
gettheexperimentstorun.
ofAIOpsmodels.Themodels,withsubsequentlylimitedcalibra-
• Gremlin[5]supportschaosengineeringforavarietyofop-
tion,arecrucialinhelpingOps/SREsinpreventing,predicting,and
eratingsystemsandplatforms,whetherthesearecontainer
resolvingdisruptingandcostlyoutages.
platforms,virtualmachines,orbaremetalservers.Itsserver-
clientarchitecturerequiresanagenttobeinstalledoneach
2 OBSERVATIONSANDCHALLENGES
targetsystem.AttacksarethenconfiguredontheGremlin
Thereisagrowingneedtosupportfeedback-drivenandMAPE- control-planeandexecutedbytheagentthenexttimeit
based1 faultinjectiontechnologiestodevelop,trainandtestthe contactsthecontrol-plane.
AIOpsmodels.TrainingandverificationofAIOpsmodelsaswell
Inordertosupporttheuseoffaultinjectioninthedatascience
as other machine learning tasks are performed mostly by data
community,onemustmoveawayfromthisprogrammingoriented
scientistswhoareusedtofeedback-drivenmethodology.MAPE
paradigmandinsteadfocuson
alsoallowsforpruningofthefaultspacebylearningpreviousfault
injections.Toensureeaseofuse,afaultinjectionframeworkmust • Feedbackloop:Thenumberofpossiblefaultinjectionpoints
alsoprovideinbuiltdatacollectionandobservability. growswiththenumberofapplicationcomponents.Together
Ourexperienceshowsthattheinjectionoffaults(alsoreferredto withapotentiallylargeparameterspaceforeachfault,a
hereasinterventions)inproductionenvironmentsisnotwidelyac- feedbackloophelpstodynamicallyadjustthetestplanand
ceptedduetopossibleadverseeffects.Someinterventionscanturn reducethenumberofteststoanamountfeasibleinpractice.
outtobecostlyorevendangerous[10],andtherefore,conducting • Easeofuse:Faultinjectionscenariosshouldbeconstructed
faultinjectioninproductionenvironmentsishighlyundesirable. andexecutedinanintuitiveway,withoutanykindofpro-
However,whileobservationsofanapplicationinproductioncan grammingordeepapplicationplatformknowledge.
provide some information about the statistical relations among • Orchestration:Realworldcomplexfaultscenariosoftencan
events,onlyinterventionscangeneratedatathatenablesustodif- bereducedtoasetofsimplefaulttypes,thatacttogetherin
ferentiateamongthedifferentcausalstructures.Totakeadvantage anorchestratedway.
ofinterventionallearningweusethefaultinjectionframeworkin • Minimal intrusion: As the application can span multiple
stagingenvironments. systems,clustersorclouds,noinstallationtasksshouldbe
Contemporarycloudapplicationsarecommonlybuiltuponfine- requiredonthosetoexecutethefaultinjection.
grainedmodularity,consistingofmultiplesingle-purposeandloose-
ly-coupledmicro-services,whicharecontainerizedandexecuted 2.1 Exampleuse-case:Learningfailure
onplatformslikeKubernetes® clusters.Micro-service-basedap- propagationandapplication
plicationsaredeployedincloud-native,hybrid,andmulti-cloud
communicationgraph
environments.Infact,only20%oftheapplicationsarefullyde-
ployedinthecloud-nativeenvironment[1];therebylimitingthe Inthispaper,wefocusonshowcasingthepowerofoursolution
useofexistingfaultinjectionandchaostoolkitsfocusedoncon- bydevelopinganAIOpsmodelthatallowsustolearnthecom-
tainerizedapplications. municationgraphforamicro-service-basedapplicationthatmay
DatascientiststaskedwithcreationandmaintenanceofAIOps executeinacloud-native,hybridormulti-cloudenvironment.We
modelshaveskillsetswhicharedifferentfromsoftwareengineers, addresstheproblemoflearningthecommunicationgraphfora
applicationdevelopersandSREs.Theirprogrammingskillsmaybe micro-service-basedapplicationbecausethecommunicationgraph
limitedtocertainprogramminglanguagesorlibraries,andtheir isnoteasilyavailabletotheplatform-providerinhybridormulti-
cloudenvironment.Theknowledgeofthecommunicationgraph
1MAPE:Monitor,Analyze,PlanandExecute. amongmicro-servicesisbeneficialtotheplatformproviderasthe
AfaultinjectionplatformforlearningAIOpsmodels ASE’22,October10–14,2022,Rochester,MI,USA
graphcanbeusedfortrainingavarietyofAIOpsmodelssuchas
optimizingthemanagementandmanydownstreamtaskslikeactive
probing[18],testing[7],performancediagnosisandmitigation[14],
taintanalysis[3]andfaultlocalization[20].
Inmachinelearningterms,learningthecommunicationgraph
can be modeled as an interventional causal learning problem to
inferthepossiblecommunicationlinksthatexistbetweenvarious
micro-servicesinthesystem.Morespecifically,itcanbelearnedvia
interventionsbyfaultinjection:whenprogrammaticallyinjectinga
faultoveracertainmicro-service,otherdependentmicro-services
callingitwillreceiveanerrorandinturnthrowexceptions.By
capturingsuchfaultpropagationamongthemicro-services,itis
possibletoinferthecommunicationgraphanduseitforproper
faultmanagementinproduction.
3 OURAPPROACH
TotacklethechallengesandobservationsdescribedinSec.2we
havedevelopedafaultinjectionplatformthatsupportsAIlearning
tasks.Thearchitecturalprinciplesthatwefollowedare:
• Combinefaultinjectionanddatacollectioninasingleframe-
Figure 1: Architecture of the Fault injection (FI) platform:
work,solearningofAImodelsdoesnotneedtomanually
manualexplorationvs.automatedlearning
collecttheoperationaldataabouttheapplicationfromdif-
ferentsources
• Supporthybridcloudormulti-cloudenvironments
• Makefaultinjectionaccessibletonon-programmers(e.g.,
Q&Atesters,dataanalystsordatascientists)thuspotentially Thecurrentimplementationcoversfaultsfromfourcategories:
reducingthetrainingand/oroperationalcost Kubernetes®resourceerrors,HTTPerrorsinIstio®enabledappli-