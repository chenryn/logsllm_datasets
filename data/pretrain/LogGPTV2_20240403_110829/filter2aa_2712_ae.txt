If you want to change the name or description of a computer in the Windows 
Computers account, use Workgroup Manager to remove the computer and then add 
the computer back with the revised information.
Moving a Windows Computer to a Different Computer Account
You cannot move a Windows computer from the Windows Computers account to a 
different account. Windows computers must be part of the Windows Computers 
account, and computers cannot belong to more than one account.
Deleting the Windows Computers Account
The Windows Computers account cannot be deleted.
LL2356.book  Page 40  Thursday, September 4, 2003  3:21 PM
Chapter 3    Administering Windows Users, Groups, Computers, and Share Points
41
Managing SMB Share Points
Share points for Windows home directories and roaming user profiles are set up 
automatically on a Mac OS X Server primary domain controller (PDC), but you can set 
up other share points. Windows uses the server message block (SMB) protocol to 
access share points.
The default share point for Windows home directories is the same as the share 
point for Mac OS X home directories. The default share point for user profiles is the 
/Users/Profiles/ folder on the PDC server. (This SMB share point is not shown in 
Workgroup Manager.) You can set up alternate SMB share points for home directories 
and user profiles on the PDC server or on domain member servers.
You can set up additional share points for exclusive or nonexclusive use of Windows 
users. For example, you could set up a share point where Windows and Mac OS users 
save shared graphics or word processing files that can be used on either platform. 
Conversely, you could set up a share point for SMB access only, so that Windows users 
have a network location for files that can’t be used on other platforms.
For an overview of share points, including a discussion of issues you may want to 
consider before creating them, see the share points chapter in the file services 
administration guide.
Opportunistic Locking (oplocks)
SMB share points in Mac OS X Server support the improved performance offered by 
opportunistic locking (“oplocks”).
In general, file locking prevents multiple clients from modifying the same information 
at the same time; a client locks the file or part of the file to gain exclusive access. 
Opportunistic locking grants this exclusive access but also allows the client to cache its 
changes locally (on the client computer) for improved performance. 
To enable oplocks, you change the Windows protocol settings for a share point using 
Workgroup Manager.
Important:  Do not enable oplocks for a share point that’s using any protocol other 
than SMB.
Strict Locking
It’s normally the responsibility of a client application to see if a file is locked before it 
tries to open it. A poorly written application may fail to check for locks, and could 
corrupt a file already being used by someone else.
Strict locking, which is enabled by default, helps prevent this. When strict locking is 
enabled, the SMB server itself checks for and enforces file locks.
LL2356.book  Page 41  Thursday, September 4, 2003  3:21 PM
42
Chapter 3    Administering Windows Users, Groups, Computers, and Share Points
Creating an SMB Share Point and Setting Privileges
You use the Sharing module of Workgroup Manager to share volumes (including disks, 
CDs and DVDs), partitions, and individual folders by setting up share points. When you 
create a share point, you can configure it to be shared using any combination of the 
AFP, FTP, SMB, and NFS protocols. You can also control access to the share point and its 
contents by setting access privileges.
Note:  Don’t use a slash (/) in the name of a folder or volume you plan to share. Users 
trying to access the share point might have trouble seeing it.
To create an SMB share point and set privileges:
1 Open Workgroup Manager and click Sharing.
2 Click All and select the item you want to share.
3 Click General.
4 Select “Share this item and its contents.”
5 To control who has access to the share point, change the owner or group of the shared 
item. Type names or drag names from the Users & Groups drawer. 
To open the drawer, click Users & Groups. If you don’t see a recently created user or 
group, click Refresh. To change the autorefresh interval, choose Workgroup Manager > 
Preferences.
6 Use the pop-up menus next to the fields to change the privileges for the Owner, Group, 
and Everyone.
Everyone is any user who can log in to the file server:  registered users and guests.
7 (Optional) To apply the ownership and privileges of the share point to all files and 
folders it contains, click Copy. This overrides privileges that other users may have set.
8 Click Protocols (on the right) and choose Windows File Settings from the pop-up menu.
9 To provide SMB access to the share point, select “Share this item using SMB.”
10 To allow unregistered users access to the share point, select “Allow SMB guest access.”
For greater security, don’t select this item.
11 To change the name that clients see when they browse for and connect to the share 
point using SMB, type a new name in the “Custom SMB name” field. 
Changing the custom SMB name doesn’t affect the name of the share point itself, only 
the name that SMB clients see.
12 To allow clients to use opportunistic file locking, select “Enable oplock.” 
Do not enable oplocks for a share point that’s using any protocol other than SMB. 
For more information on oplocks, see “Opportunistic Locking (oplocks)” on page 41.
To have clients use standard locks on server files, select “Enable strict locking.” 
LL2356.book  Page 42  Thursday, September 4, 2003  3:21 PM
Chapter 3    Administering Windows Users, Groups, Computers, and Share Points
43
13 Choose a method for assigning default access privileges for new files and folders in the 
share point.
To have new items adopt the privileges of the enclosing item, select “Inherit 
permissions from parent.”
To assign specific privileges, select “Assign as follows” and set the Owner, Group, and 
Everyone privileges using the pop-up menus.
14 To prevent AFP access to the new share point, choose Apple File Settings from the pop-
up menu and deselect “Share this item using AFP.”
15 To prevent FTP access to the new share point, choose FTP Settings from the pop-up 
menu and deselect “Share this item using FTP.”
16 To prevent NFS access to the new share point, choose NFS Export Settings from the 
pop-up menu and deselect “Export this item and its contents to.”
17 Click Save.
From the Command Line
You can also set up a share point using the sharing command in Terminal. For more 
information, see the file services chapter of the command-line administration guide.
Changing Windows (SMB) Settings for a Share Point
You can use Workgroup Manager to set whether a share point is available via SMB and 
to change settings such as the share point name that SMB clients see, whether guest 
access is allowed, whether opportunistic locking is allowed, and the default privileges 
for new items.
To change the settings of an SMB share point:
1 Open Workgroup Manager and click Sharing.
2 Click Share Points and select the share point.
3 Click Protocols (on the right) and choose Windows File Settings from the pop-up menu.
4 To provide SMB access to the share point, select “Share this item using SMB.”
5 To allow unregistered users access to the share point, select “Allow SMB guest access.”
For greater security, don’t select this item.
6 To change the name that clients see when they browse for and connect to the share 
point using SMB, type a new name in the “Custom SMB name” field. 
Changing the custom SMB name doesn’t affect the name of the share point itself, only 
the name that SMB clients see.
7 To allow clients to use opportunistic file locking, select “Enable oplock.” 
To have clients use standard locks on server files, select “Enable strict locking.”
Do not enable oplocks for a share point that’s using any protocol other than SMB. For 
more information on oplocks, see “Opportunistic Locking (oplocks)” on page 41.
LL2356.book  Page 43  Thursday, September 4, 2003  3:21 PM
44
Chapter 3    Administering Windows Users, Groups, Computers, and Share Points
8 Choose a method for assigning default access privileges for new files and folders in the 
share point.
To have new items adopt the privileges of the enclosing item, select “Inherit 
permissions from parent.”
To assign specific privileges, select “Assign as follows” and set the Owner, Group, and 
Everyone privileges using the pop-up menus.
9 Click Save.
From the Command Line
You can also change a share point’s SMB settings using the sharing command in 
Terminal. For more information, see the file services chapter of the command-line 
administration guide.
Managing Share Points
For information on typical day-to-day tasks you might perform after you have set up 
share points on your server, see the chapter on share points in the file services 
administration guide. It describes the following tasks:
• Disabling a share point
• Disabling a protocol for a share point
• Viewing share points
• Copying privileges to enclosed items
• Viewing share point settings
• Changing share point owner and privilege settings
• Changing NFS share point client scope
• Allowing guest access to a share point
• Setting up a drop box
LL2356.book  Page 44  Thursday, September 4, 2003  3:21 PM
4
45
4 Migrating Users From a Windows 
Server to Mac OS X Server
You can set up Mac OS X Server user accounts and home 
directories to replace those on existing Windows NT, 
Windows 2000, or Windows 2003 servers.
The following picture summarizes the steps that follow it.
Windows clients
1 Set up 
   Mac OS X 
   Server.
2 Set up home 
   directory 
   infrastructure.
3 Export users.
4 Import users.
5 Transfer login
    scripts.
7 Transfer files
   and settings.
Mac OS X 
Server
6 Join Windows 
   PDC domain.
Windows
server
LL2356.book  Page 45  Thursday, September 4, 2003  3:21 PM
46
Chapter 4    Migrating Users From a Windows Server to Mac OS X Server
Step 1:  Set up Mac OS X Server
Follow the instructions in the getting started guide:
1 Install server software.
2 Perform initial server setup, making sure that you create an Open Directory master 
domain and a Windows primary domain controller (PDC) on the server. The Windows 
PDC lets Windows NT, Windows 2000, and Windows XP workstation users log in to the 
PDC, change passwords during login, and have roaming user profiles and network 
home directories on Mac OS X Server.
In Server Assistant’s Directory Usage pane, choose Open Directory Master from the “Set 
directory usage to” pop-up menu. Then select Enable Windows Primary Domain 
Controller and enter a computer name and domain/workgroup name:
In the Computer Name field, enter the name you want Windows users to see when 
they connect to the server. This is the server’s NetBIOS name. The name should contain 
no more than 15 characters, no special characters, and no punctuation. If practical, 
make the server name match its unqualified DNS host name. For example, if your DNS 
server has an entry for your server as “server.example.com,” give your server the name 
“server.” 
In the Domain/Workgroup field, enter the name of the Windows domain that the server 
will host. The domain name cannot exceed 15 characters. 
Step 2:  Set up the home directory infrastructure
When you import users, you identify a location for their home directories. You can use 
one of the predefined share points, such as the /Users folder. Or you can set up your 
own share point.
1 If you use a predefined share point, select it in Workgroup Manager and go to step 3 in 
this sequence. Otherwise, use step 2 first.
To select a predefined share point in Workgroup Manager, click Sharing. Click Share 
Points and select the share point. 
2 If you want to set up your own share point on Mac OS X Server, create the folder you 
want to serve as the home directory share point and then use Workgroup Manager to 
make the folder a share point.
In Workgroup Manager, click Sharing. Click All and select the folder. Click General and 
select “Share this item and its contents.” Set up the privileges, and then click Save. Click 
Protocols and make sure the folder is shared using AFP or NFS. Click Save again.
3 Set up the share point to mount automatically on client workstations. 
With the share point selected in Workgroup Manager, click Network Mount. Choose 
the PDC server’s LDAP directory from the Where pop-up menu. Click the lock to the 
right of this pop-up menu and authenticate as an administrator of the LDAP directory. 
Select “Create a mount record for this share point.” Choose AFP or NFS from the 
Protocol pop-up menu. Select “Use For User Home Directories” and click Save.
LL2356.book  Page 46  Thursday, September 4, 2003  3:21 PM
Chapter 4    Migrating Users From a Windows Server to Mac OS X Server
47
4 Set up default file access permissions for Windows users.
Click Protocols, choose Windows File Settings from the pop-up menu, and specify 
permissions under “Default permissions for new files and folders.” Click Save.
Step 3:  Export users from the Windows server domain
1 Open the user management application (such as User Manager for Windows NT 4.0 
server) on your Windows server.
2 Export users into a tab-delimited file.
Long names and short names are exported. On Windows NT, these correspond to name 
and user name, respectively. For Windows 2000 Active Directory, they correspond to 
name and pre-windows 2000 logon name, respectively.
Step 4:  Import users on Mac OS X Server
1 Make sure that Windows services are running. 
Open Server Admin, select Windows in the Computers & Services list, and click Start 
Service if required.
2 On the Windows server, map a network drive to Mac OS X Server.
3 Log in as the administrator user you defined when setting up Mac OS X Server.
4 Copy the export file to Mac OS X Server. 
5 On Mac OS X Server, modify the export file:
a Change the Windows line endings to UNIX line endings. You can use the vi 
command-line editor to do this. The following command opens vi for a file named 
MyFile with line endings set to UNIX style:
vi -c "set fileformat=unix" MyFile
b Remove the header inserted during export.
c Reorder the columns so that the short name appears first. A spreadsheet application 
is useful for this type of editing.
d Add the following header as the first line of the file:
0x0D 0x5C 0x09 0x2C dsRecTypeStandard:Users 2 
dsAttrTypeStandard:RecordName dsAttrTypeStandard:RealName
6 Open Workgroup Manager. Make sure the Accounts button is selected in the toolbar 
and the Users button is selected above the list of accounts (on the left). The PDC 
server’s LDAP directory should be the current directory domain. If it’s not, click the 
small globe beneath the toolbar to select the server’s LDAP directory.
7 Define a user account preset in the server’s LDAP directory. The settings you associate 
with a preset are assigned to each imported user, simplifying the definition of user 
profile path, login script, home directory share point, and other values.
LL2356.book  Page 47  Thursday, September 4, 2003  3:21 PM
48
Chapter 4    Migrating Users From a Windows Server to Mac OS X Server
Click New User, and specify values you want all imported Windows users to inherit. For 
details about how to work with most of the user settings, see the user management 
guide. See “Managing Accounts for Windows Users” on page 30 for details about 
Windows user settings.
Set up password options so that users are forced to change their passwords the next 
time they log in. Using this approach means you don’t have to individually specify 
passwords for each user in the export file or in Workgroup Manager after importing the 
users. To access password option settings, click Advanced, then Options.
When you are finished specifying values, choose Save Preset from the Presets pop-up 
menu.
8 In Workgroup Manager, choose Server > Import. 
9 Navigate to the user export file and select it. Then choose a duplicate handling option, 
identify the preset you want to use, and optionally supply a first user ID and a primary 
group ID.
10 Click Import.
11 Optionally define group accounts for controlling access to files.
On Mac OS X computers, file and folder access permissions (Read & Write, Read only, 
Write only, or No Access) are specified for an owner (a user), a group, and all users, 
known as “Everyone.” Mac OS X Server does not support access control lists (ACLs). 
Additional groups can be used to set up group-level permissions for files transferred 
from the Windows server. 
To define a group, select the group list in Workgroup Manager, click New Group, and 
enter group names and a group ID. To add users to the group, click Add (+), select the 
users you want to belong to the group, and drag selected users to the Members list.
Step 5:  Transfer login scripts to Mac OS X Server
1 Copy login scripts from the Windows server to /etc/netlogon/ on Mac OS X Server.
2 In Workgroup Manager, select each Windows PDC user and make sure that the location 
of the login script is correctly specified. The Login Script field should contain the 
relative path to a login script located in /etc/logon/. For example, if you’ve copied a 
script named setup.bat into /etc/logon/, the Login Script field should contain setup.bat.
Step 6:  Join Windows clients to Mac OS X Server PDC
On the workstation of each Windows user for whom you created an account on 
Mac OS X Server, join the Windows PDC domain on the server to enable Open 
Directory authentication for users who log in at the workstation.
Now when a Windows workstation user logs in to Mac OS X Server, his or her home 
directory is automatically created and mounts on the Windows workstation.
LL2356.book  Page 48  Thursday, September 4, 2003  3:21 PM
Chapter 4    Migrating Users From a Windows Server to Mac OS X Server
49
Step 7:  Transfer client files and settings to Mac OS X Server home directories
Each Windows workstation user can now move files from the Windows server to his or 
her home directory on Mac OS X Server. 
1 On a Windows client that’s been set up to join the Mac OS X Server domain, map a 
network drive to Mac OS X Server and log in as one of the imported users.
The first time a Windows user logs in, his or her home directory mounts on the 
Windows workstation.
2 Map a network drive to the Windows server where the files to transfer reside.
3 Copy files of interest to the Mac OS X Server home directory. Default permissions set up 
in step 2 are assigned to each file. 
When you log out, user settings (such as the background picture) are saved on 
Mac OS X Server and used for future login.
LL2356.book  Page 49  Thursday, September 4, 2003  3:21 PM
LL2356.book  Page 50  Thursday, September 4, 2003  3:21 PM
5
51
5 Managing Windows Services
You can use Server Admin to start and stop Windows 
services, monitor them, change their server’s Windows 
identity, manage access to them, manage their logs, and 
change their advanced settings.
For management task descriptions and instructions, see:
• “Starting and Stopping Windows Services” on this page
• “Monitoring Windows Services” on page 52
• “Changing the Server’s Windows Identity” on page 54
• “Managing Access to Windows Services” on page 55
• “Managing Windows Services Logging” on page 56
• “Managing Advanced Windows Services Settings” on page 57
Starting and Stopping Windows Services
You can start and stop Windows services.
Starting Windows Services
You can use Server Admin to start Windows services if they are stopped.
To start Windows services:
1 Open Server Admin and select Windows in the Computers & Services list.
2 Click Start Service. 
From the Command Line
You can also start Windows services by using the serveradmin command in Terminal. 
For more information, see the file services chapter of the command-line administration 
guide.
Stopping Windows Services
You can use Server Admin to stop Windows services.
Important:  When you stop Windows services, connected users will lose any 
information they haven’t saved.
LL2356.book  Page 51  Thursday, September 4, 2003  3:21 PM
52
Chapter 5    Managing Windows Services
To stop Windows services:
1 Open Server Admin and select Windows in the Computers & Services list.
2 Click Stop Service. 
From the Command Line
You can also stop Windows services by using the serveradmin command in Terminal. 
For more information, see the file services chapter of the command-line administration 