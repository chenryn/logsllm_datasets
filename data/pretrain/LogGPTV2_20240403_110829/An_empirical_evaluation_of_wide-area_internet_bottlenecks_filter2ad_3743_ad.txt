bars in the graphs show the probability that the identiﬁed bottleneck
link is of a particular type, based on our observations. For exam-
ple, from Figure 3(a), we see that the bottleneck links on paths to
tier-2 networks consist of links inside tier-1 ISPs 7% of the time,
y
c
n
e
u
q
e
r
F
e
v
i
t
l
a
u
m
u
C
1
0.8
0.6
0.4
0.2
0
0
5
Tier 1
Tier2
Tier3
Tier4
Tier1-Tier1
Tier1-Tier2
Tier1-Tier3
Tier1-Tier4
1
0.8
0.6
0.4
0.2
y
c
n
e
u
q
e
r
F
e
v
i
t
l
a
u
m
u
C
Tier2-Tier2
Tier2-Tier3
Tier3-Tier3
1
0.8
0.6
0.4
0.2
y
c
n
e
u
q
e
r
F
e
v
i
t
l
a
u
m
u
C
15
10
40
Estimate Bottleneck Available Bandwidth (in Mbps)
20
25
30
35
45
50
0
0
5
15
10
40
Estimate Bottleneck Available Bandwidth (in Mbps)
25
30
35
20
45
50
0
0
5
15
10
40
Estimate Bottleneck Available Bandwidth (in Mbps)
25
35
20
30
45
50
(a) intra-ISP
(b) Tier-1 peering
(c) Lower tier peering
Figure 5: Available capacity at bottleneck links: Graph (a) corresponds to bottlenecks within ISPs. Graphs (b) and (c) show the
distribution of available capacity for bottlenecks in peering links involving Tier1 ISPs, and those in peering links not involving Tier1
ISPs, respectively. We do not show the distributions for bottleneck links between tiers 2 and 4 and those between tiers 3 and 4 since
they were very small in number.
tier-2 links 11% of the time, and tier 3 links 3% of the time (bottle-
necks within tier-4 ISPs appear only in 0.2% of the cases). From
Figure 4(a), we see that various types of peering links account for
bottlenecks in tier-2 paths nearly 15% of the time, with tier-1 to
tier-2 links appearing as the most likely among all types of peering
bottleneck links. These two graphs together indicate that approxi-
mately 36% of tier-2 paths we measured had a bottleneck that we
were able to identify. The other 64% appear to have bottlenecks
with an available capacity greater than 50Mbps.
equally split between intra-ISP links and peering links (comparing
the overall height of the bars in Figures 3(a) and 4(a)). This sug-
gests that if there is a bottleneck link on a path, it is equally likely
to be either in the interior of an ISP or between ISPs. Given that
the number of peering links traversed is much smaller, however, the
likelihood that the bottleneck is actually at one of the peering links
is higher. But the fact that the bottleneck on any path is equally
likely to lie either inside an ISP or between ISPs is surprising.
Figures 3(c) and 4(c) show the breakdown of links averaged
across each type of path, for intra-ISP and peering links, respec-
tively. Comparing the heights of components in the left and right
bars gives an indication of the prevalence of the corresponding type
of bottleneck link (left bar), relative to its overall appearance in the
paths (right bar). From Figure 3(c), it ﬁrst appears that lower-tier
intra-ISP links are path bottlenecks in much greater proportion than
their appearance in the paths. For example, Figure 3(c) shows that
tier-3 links make up 17% of the bottlenecks to tier-1 destinations,
but account for only about 2% of the links in these paths.
Note, however, that the right bars in Figure 3(a) show the num-
ber of unique bottlenecks links that we observed. Considering the
ﬁrst set of left and right bars (i.e., all vs. unique bottlenecks for
paths to tier-1 destinations) in Figure 3(a), we notice that there is
a signiﬁcant difference in the proportion of tier-3 bottleneck links.
Upon further examination, we discovered that some of the Plan-
etLab sites were connected to the Internet via a tier-3 ISP. A few
of these ISPs were bottlenecks for many of the paths leaving the
associated PlanetLab site. More generally, though, we see in Fig-
ure 3(c) that lower-tier intra-ISP links seem to be bottlenecks more
frequently than we would expect based on the appearance of these
links in the paths.
A similar examination of Figure 4(c) reveals several details about
the properties of bottlenecks at peering links. Figure 4(c) shows
that tier-1- tier-1 peering links are bottlenecks less frequently than
might be expected, given their proportion in the overall paths. Also,
peering links to or from tier-2, tier-3 or tier-4 ISPs are bottlenecks
more frequently than expected. For example, compare the propor-
tion of tier-2 to tier-4 peering bottlenecks with the proportion of
these links in the corresponding overall path length (e.g., 17% vs.
2% for paths to tier-1, and 17% vs. 4% for paths to tier-2).
Looking at Figures 3(a) and 4(a) together, we can observe some
additional properties of bottleneck links. For example, total path
lengths are around 8–9 hops (adding the heights of the bars in Fig-
ures 3(b) and 4(b)), of which only 1–1.5 hops are links between
different ISPs. However, bottlenecks for these paths seem to be
Another important trend is that the percentage of paths with an
identiﬁed bottleneck link grows as we consider paths to lower-tier
destinations. About 32.5% of the paths to tier-1 destinations have
bottlenecks. For paths to tiers 2, 3, and 4, the percentages are 36%,
50%, and 54%, respectively. Note that while paths to tier-3 appear
to have fewer intra-ISP bottlenecks than paths to tier-2, this may
be because the peering links traversed on tier-3 paths introduce a
greater constraint on available bandwidth.
3.3 Bandwidth Characterization of Bottlenecks
In the previous section, we described the location and relative
prevalence of observed bottleneck links, without detailing the na-
ture of these bottlenecks. Here, we analyze the available bandwidth
at these bottlenecks, as identiﬁed using BFind.
The graphs in Figure 5 illustrate the distribution of available
bandwidth of bottleneck links observed in different parts of the
network. Each graph has several curves, corresponding to differ-
ent types of intra-ISP and peering links. Note that the CDFs do not
go to 100% because many of the paths we traversed had more than
50 Mbps of available bandwidth. Recall that BFind is limited to
measuring bottlenecks of at most 50 Mbps due to ﬁrst hop network
limitations. Hence we did not explore the nature of the bandwidth
distribution above 50 Mbps.
Figure 5(a) shows the bottleneck speeds we observed on intra-
ISP links. The tier-1 and tier-3 ISP links appear to have a clear
advantage in terms of bottleneck bandwidth over tier-2 ISP bottle-
necks. The fact that the tier-3 bottlenecks we identiﬁed offer higher
available capacity than tier-2 bottlenecks was a surprising result.
Links in tier-4 ISPs, on the other hand, exhibit the most limited
available bandwidth distribution as expected.
In Figures 5(b) and (c) we consider the distribution of bottleneck
bandwidth on peering links. Tier-1 to tier-1 peering links are the
least constrained, indicating that links between the largest network
providers are better provisioned when compared to links between
lower-tier networks. Again, we ﬁnd, surprisingly, that tier-2 and
tier-3 links exhibit very similar characteristics, in their peering links
to tier-1 networks (Figure 5(b)). Also, peering links between tier-2
high lat,peering
high lat,intra-ISP
med lat,peering
med lat,intra-ISP
low lat,peering
low lat,intra-ISP
s
k
n
i
l
k
c
e
n
e
l
t
t
o
b
f
o
r
e
b
m
u
n
d
e
z
i
l
a
m
r
o
N
0.6
0.5
0.4
0.3
0.2
0.1
0
paths to Tier-1
paths to Tier-2
paths to Tier-3
paths to Tier-4
(a) Bottleneck Links
s
k
n
i
l
f
o
r
e
b
m
u
n
d
e
z
i
l
a
m
r
o
N
10
9
8
7
6
5
4
3
2
1
0
paths to Tier-1
paths to Tier-2
paths to Tier-3
paths to Tier-4
(b) All Links
s
e
p
y
t
k
n
i
l
f
o
n
o
i
t
c
a
r
F
1
0.9
0.8
0.7
0.6
0.5
0.4
0.3
0.2
0.1
0
paths to Tier-1
paths to Tier-4
(c) Relative proportions: bottleneck links vs. all links
paths to Tier-2
paths to Tier-3
Figure 6: Relative prevalence of bottlenecks of various latencies: Graph (a) shows the average number of bottlenecks of the three
classes of latencies further classiﬁed into those occurring between ISPs and those occurring inside ISPs. Graph (b) shows the actual
number of links (bottleneck or not) of each kind appearing in all the paths. Graph (c) shows the relative fraction of bottleneck links
of various latency types (left bar) and the average path composition of all links (right bar).
and tier-3 are not signiﬁcantly different than tier-2 to tier-2 links
(Figure 5(b)). We do see, however, that bottleneck peering links
involving networks low in the hierarchy provide signiﬁcantly less
available capacity, as expected. This is clearly illustrated in the
bandwidth distributions for tier-1 to tier-4, and tier-3 to tier-3 links.
3.4 Latency Characterization of Bottlenecks
In this section, we analyze the latency of bottlenecks, in partic-
ular exploring the correlation between high-latency links and their
relative likelihood of being bottlenecks. Figure 6 is similar to Fig-
ures 3 and 4, except that rather than classifying links on each type
of path by their location, we separate them into latency classes (and
whether they are peering or intra-ISP links). Low latency links have
a measured latency, (cid:1), of (cid:1) < 5 ms, as determined by the mini-
mum observed round-trip time. Medium latency and high latency
links have minimum round trip times of 5 ≤ (cid:1) ≤ 15 and (cid:1) ≥ 15
ms, respectively. Though this is clearly a rough classiﬁcation, we
chose these classes to correspond to links at a PoP, links connecting
smaller cities to larger PoPs, and long-haul links.
Figure 6(b) shows the overall latency characteristics of the paths.
For example, paths to tier-2 destinations have an average of 5.3
low-latency intra-ISP, 1.4 low latency peering, 0.6 medium latency
intra-ISP, 0.1 medium latency peering, 1.2 high latency intra-ISP,
and 0.4 high latency peering links. In general, all path types have
a high proportion of low-latency hops (both intra-ISP and peering)
and high-latency intra-ISP hops. The latter is indicative of a single
long-haul link on average in most of the paths we measured. While
high latency peering links would seem unlikely, they do occur in
practice. For example, one of the PlanetLab sites uses an ISP that
does not have a PoP within its city. As a result, the link between
the site and its ISP, which is characterized as a peering link, has a
latency that exceeds 15ms.
In Figure 6(c) we illustrate the prevalence of bottlenecks accord-
ing to their latency. We can observe that high-latency peering links
are much more likely to be bottlenecks than their appearance in
the paths would indicate. In observed paths to tier-2 destinations,
for example, these links are 18.5% of all bottlenecks, yet they ac-
count for only 4% of the links. This suggests that whenever a high-