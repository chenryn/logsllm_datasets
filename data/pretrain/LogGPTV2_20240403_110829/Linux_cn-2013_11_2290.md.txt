---
**作者:** 无  
**分类:** 技术  
**评论数据:** []  
**计数:**
- 评论数量: 0
- 收藏次数: 3
- 点赞次数: 2
- 分享次数: 0
- 浏览量: 10344
**日期:** 2013-11-23 21:15:00  
**编辑推荐:** 否  
**摘要:** 当需要了解服务器性能时，"top"命令往往是我的首选。尽管它不是最完美的工具，无法提供长期的系统状态快照，但它能够给出一个不错的实时快照，帮助我们快速理解“当前正在发生什么”。然而，如果用户不了解其输出的具体含义，很容易对其结果产生误解。
**来源链接:** 无  
**ID:** 2290  
**是否为精选:** 是  
**大图:** /data/attachment/album/201311/23/202423a2xaiu4o42g28uu2.png  
**永久链接:** /article-2290-1.html  
**图片:** /data/attachment/album/201311/23/202423a2xaiu4o42g28uu2.png.thumb.jpg  
**相关文章:** []  
**审阅者:** 无  
**选择器:** 无  
**总结:** 当对服务器性能感到好奇时，“top”命令是我的第一选择。虽然它不是最佳选择，不能提供长时间的系统状态快照，但确实能很好地反映某一时刻的状态，并试图回答“现在发生了什么？”这个问题。遗憾的是，如果不充分理解各个显示字段的意义，那么很容易误解top命令的结果。
**标签:**
- Linux
- top
- 命令
- 技巧
- 性能
- 服务器
**是否有缩略图:** 否  
**标题:** 解密 "top" 命令  
**是否有标题图片:** 否  
**翻译者:** geekpi  
**更新时间:** 2013-11-23 21:15:00
---

当想要深入了解服务器性能时，我首先想到的就是使用 "top" 命令。虽然这不是最佳选择，因为它无法提供长时间段内的系统状态记录，但却能非常有效地展示出某个具体时间点上的服务器状况，从而帮助我们快速掌握“此时此刻服务器上正在发生的事情”。不幸的是，对于那些不熟悉各显示项意义的人来说，top命令的输出可能会导致误解。

我不打算在此全面解析top命令的手册页（可以通过[这里](http://www.linuxmanpages.com/man1/top1.php)访问），这需要读者自行花费时间和精力去探索。我想做的是分享一些个人经验——如何通过几个关键点迅速获取系统的概况信息，并据此决定下一步行动方向。在进行故障排除时，top总是我的第一步，但通常不会是唯一的步骤。

![top命令截图](/data/attachment/album/201311/23/202423a2xaiu4o42g28uu2.png)

启动top后，我首先关注的是位于屏幕右上角的平均负载(load average)数值。这个值基于统计采样计算得出，大致反映了CPU被请求执行任务的数量。例如，在单核处理器上，平均负载为1意味着该机器处于满负荷状态；而当平均负载达到2时，则表明系统超载了，需要两个以上的内核才能满足需求。鉴于现代计算机多采用多核心架构（如8、16或32核等），因此在评估平均负载时需格外注意。为了更准确地分析，我常会在top中按下数字键"1"来查看每个单独核心的情况，以便与整体负载进行对比。

接下来，我会检查进程列表中的"%CPU"列（第9列）。这一栏展示了自上次刷新以来各进程占用CPU的时间百分比。需要注意的是，在SMP（对称多处理）环境下，若开启了'Irix模式'，则显示的是所有CPU总和下的比例；反之，在'Solaris模式'下，则会将此值除以总的CPU数目。用户可以通过输入大写字母"I"切换这两种模式。

紧接着，我会关注头部中间位置的"Cpu(s):"行，尤其是其中的%us（用户空间）、%sy（系统调用）、%id（空闲时间）以及%wa（等待I/O完成的时间）。理想情况下，这些百分比应该接近于零，特别是当%wa超过5%时，往往预示着存在潜在问题。

最后，我还习惯性地查看左上角显示的系统运行时间。如果发现某台最近重启过的服务器表现异常，这里可能隐藏着线索，比如某个服务未能成功启动等。

上述检查过程仅需几秒钟即可完成。有时为了进一步观察，我会让top保持运行几分钟，持续监控进程活动及CPU使用情况。不过大多数时候，我只是快速浏览一下就结束了。作为众多优秀的系统管理工具之一，top不仅能够快速展现系统的健康状况，还支持我们迅速定位并解决潜在的问题。

---
**原文链接:** [未提供]  
**译者:** [geekpi](https://github.com/geekpi)  
**校对:** [wxy](https://github.com/wxy)  
**本文由 [LCTT](https://github.com/LCTT/TranslateProject) 原创翻译，[Linux中国](http://linux.cn/) 荣誉推出。**
---