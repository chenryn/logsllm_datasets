title:Volume-Based Transit Pricing: Is 95 the Right Percentile?
author:Vamseedhar Reddyvari Raja and
Amogh Dhamdhere and
Alessandra Scicchitano and
Srinivas Shakkottai and
kc claffy and
Simon Leinen
Volume-Based Transit Pricing:
Is 95 the Right Percentile?
Vamseedhar Reddyvari Raja1, Amogh Dhamdhere2, Alessandra Scicchitano3,
Srinivas Shakkottai1, kc claffy2, and Simon Leinen3
1 Texas A&M University, College Station, TX 77843, USA
2 CAIDA/UCSD, San Diego, CA 92093, USA
3 SWITCH, Switzerland
PI:EMAIL
Abstract. The 95th percentile billing mechanism has been an industry de facto
standard for transit providers for well over a decade. While the simplicity of the
scheme makes it attractive as a billing mechanism, dramatic evolution in traf-
ﬁc patterns, associated interconnection practices and industry structure over the
last two decades motivates an obvious question: is it still appropriate? In this
paper, we evaluate the 95th percentile pricing mechanism from the perspective
of transit providers, using a decade of trafﬁc statistics from SWITCH (a large
research/academic network), and more recent trafﬁc statistics from 3 Internet Ex-
change Points (IXPs). We ﬁnd that over time, heavy-inbound and heavy-hitter
networks are able to achieve a lower 95th-to-average ratio than heavy-inbound
and moderate-hitter networks, possibly due to their ability to better manage their
trafﬁc proﬁle. The 95th percentile trafﬁc volume also does not necessarily reﬂect
the cost burden to the provider, motivating our exploration of an alternative met-
ric that better captures the costs imposed on a network. We deﬁne the provision
ratio for a customer, which captures its contribution to the provider’s peak load.
1 Introduction
The industry standard for transit billing is the 95th percentile billing method [1, 2]
wherein a transit provider measures the utilization of a customer link in 5-minute bins
over the duration of a month, and then computes the 95th Percentile of these utilization
values as the billing volume. The 95th Percentile method has several attractive prop-
erties. First, this method is simple to implement, and uses data (e.g., SNMP) that the
provider typically already collects. Second, it approximates the load that a customer
causes the provider, while “forgiving” a few bursts (the top 5% of samples are ignored).
While this transit billing method has remained fairly standard for over a decade, trafﬁc
patterns have evolved dramatically, from the dominance of client-server trafﬁc in the
early days of the Internet, to the rise and fall in popularity of peer-to-peer applications,
to the rise of streaming video. Given that the trafﬁc proﬁle of a transit customer depends
on the popularity of underlying applications, it is not clear that a transit billing scheme
that may have been rational a decade ago is still appropriate.
In this work, we revisit the 95th Percentile billing scheme from the perspective of a
provider, to investigate whether this scheme approximately achieves its intended ob-
jective of providing an easy-to-compute approximation of a customer’s trafﬁc load
M. Faloutsos and A. Kuzmanovic (Eds.): PAM 2014, LNCS 8362, pp. 77–87, 2014.
c(cid:2) Springer International Publishing Switzerland 2014
78
V. Reddyvari Raja et al.
to the provider. We ﬁrst use 10 years of historical data from SWITCH, a Swiss re-
search/academic network, and more recent data from 3 Internet Exchange Points (IXPs)
to investigate how the 95th Percentile of a customer’s trafﬁc relates to: (1) its total traf-
ﬁc volume, (2) its nature as a predominantly inbound/outbound customer, and (3) its
behavior as a heavy vs. moderate hitter. Second, we study the fairness of the 95th per-
centile scheme, and deﬁne a new metric called the provision ratio to investigate the
relationship between the 95th Percentile of customer and the contribution of that cus-
tomer to the provider’s trafﬁc load.
Analysis of these data sets reveals evidence that over the years the customers with a
predominantly outbound trafﬁc proﬁle are able to maintain a lower 95th-to-average ratio
than predominantly inbound customers, meaning that they have a lower billing volume
for the same amount of trafﬁc sent. Furthermore, the 95th-percentile pricing mechanism
is unfair, because for many customers the 95th Percentile may not reﬂect their cost bur-
den to the provider, as there is little overlap between the customer’s peak and the overall
(provider) peak trafﬁc. Our results motivate the need to look for alternatives to the 95th
Percentile billing method that can better approximate a customer’s cost burden to the
provider without adding too much additional measurement or computational overhead.
2 Datasets
SWITCH Dataset: Our ﬁrst dataset comes from SWITCH, a Swiss Research/Academic
network which provides Internet connectivity to major universities and organizations in
Switzerland. Currently, SWITCH connects about 50 research and education sites, acting
as a transit provider for trafﬁc that originates or is destined to those networks. SWITCH
also provides connectivity to the public Internet via commercial providers, and hosts
content caches of two large content providers. For trafﬁc billing, SWITCH measures
the utilization of each border router interface in both inbound and outbound directions
in 5-minute intervals. To present a longitudinal analysis, we use historical datasets from
SWITCH from January 2003 to December 2012.
IXP Dataset: The second dataset consists of trafﬁc statistics published by 3 Internet Ex-
change Points (IXPs) – Budapest Internet Exchange (BIX), Slovak Internet Exchange
(SIX), and Interlan Internet Exchange (ILAN). These IXPs publish MRTG graphs with
5-minute utilization (inbound and outbound) for each network connected to the public
peering fabric of the IXP. We collected these graphs every day for the month of Au-
gust 2013 and used Optical Character Recognition tools [3] to parse them. BIX had
62 networks connected to its public peering fabric, while SIX and ILAN had 48 and
55 networks, respectively. Networks connect to IXPs to create (settlement-free) peering
connections with other participating networks, and so the trafﬁc statistics we see at an
IXP are for a connected network’s peering trafﬁc1. Castro et al. [3] showed that transit
trafﬁc and peering trafﬁc have similar diurnal patterns and peak-to-valley ratios; in fact,
the transit trafﬁc for a network can be well-approximated as a multiplicative factor of
the peering trafﬁc. In our analysis we consider the IXP as proxy for a transit provider,
and the networks connected to it as its customers.
1 While not explicitly disallowed, transit sale over the shared IXP fabric is rare [4].
Volume-Based Transit Pricing: Is 95 the Right Percentile?
79
3 Longitudinal Study of 95th Percentile Billing
We ﬁrst describe two common methods of computing the 95th Percentile trafﬁc volume,
and how the two methods can treat customers differently. We then classify networks
based on two criteria: (i) major direction of trafﬁc (inbound, outbound, and balanced);
and (ii) volume of trafﬁc (heavy-hitter and moderate-hitter), and present a longitudinal
view of the trafﬁc properties of these network types.
3.1 Calculation of 95th Percentile
Although 95th Percentile billing is the industry standard, there are two common im-
plementations and several possible variations. The ﬁrst method measures the inbound
and outbound trafﬁc in every 5 minutes over the month, calculates the 95th percentile
for each direction, and uses the maximum of these two values. Most transit provider
references to computing the 95th Percentile use this method, e.g., [5, 6], so we use it in
our subsequent analysis. The second method records the maximum of inbound and out-
bound trafﬁc in each ﬁve minute interval, and calculates the 95th Percentile value from
the resulting data set. This second method seems to be less common although we found
a few transit providers that bill using this method [7, 8]. The second method will yield a
value greater than or equal to the ﬁrst method, and the results will differ signiﬁcantly for
customers with balanced trafﬁc proﬁles, but with inbound peaks occurring at different
times from outbound peaks. We computed the 95th Percentile for each network in the
SWITCH dataset over 10 years. We found that the median ratio of the 95th Percentile
value for each network, computed using these two methods is close to 1, but the widest
difference induces a 20% higher transit bill using the second method.
3.2 Classiﬁcation of Networks
Direction of Trafﬁc: We divide networks into three categories based on the dominant
direction of trafﬁc. For each network, we measure the trafﬁc that terminates within that
network (inbound) and trafﬁc that originates from that network (outbound). If the in-
bound trafﬁc of the network is more than twice the outbound trafﬁc we classify it as
heavy-inbound, and if the outbound trafﬁc is more than twice the inbound trafﬁc we
classify the network as heavy-outbound. Networks that do not satisfy either condition
are classiﬁed as balanced. Typically, content providers are heavy-outbound, while eye-
ball providers are heavy-inbound.
Volume of Trafﬁc: We next classify networks based on the volume of trafﬁc they gen-
erate/consume over a month into heavy-hitter and moderate-hitter networks. To deﬁne
the two classes we evaluated the trafﬁc contribution by the top 20% of networks in each
month of the SWITCH and IXP datasets. The top 20% of networks consistently con-
tributed between 80 and 90% of total trafﬁc in the SWITCH dataset, and 75% of total
trafﬁc in the IXP dataset. Based on this observation, we classify the top 20% of net-
works in each month as heavy-hitter networks and the rest as moderate-hitter networks.
80
V. Reddyvari Raja et al.
g
v
A
o
t
e
%
5
9
l
f
o
o
i
t
a
R
6
5
4
3
2
1
Ratio of 95 Percentile to Average
Heavy-Inbound Networks
Balanced Networks
Heavy-Outbound-Networks
Jan
Jan
 2003
 2004
Jan
2005
Jan
2006
Jan
2007
Jan
2008
Jan
2009
Jan
2010
Jan
2011
Jan
2012
5.0
4.5
4.0
3.5
3.0
2.5
2.0
1.5
1.0
Ratio of 95 Percentile to Average
Heavy-Hitter Networks
Moderate-Hitter Networks
Jan
Jan
 2003
 2004
Jan
2005
Jan
2006
Jan
2007
Jan
2008
Jan
2009
Jan
2010
Jan
2011
Jan
2012
Months
Months
Fig. 1. Mean 95th Percentile to average ratio for different network types in the SWITCH dataset.
Heavy-inbound networks have a larger 95th Percentile to average ratio than heavy-outbound
networks. Also, moderate-hitter networks have a larger ratio than heavy-hitter networks.
3.3 95th Percentile to Average Ratio
For each customer network, we ﬁrst evaluate the 95th Percentile to average trafﬁc ratio;
the average reﬂects the total volume of trafﬁc, whereas the 95th Percentile value gives
an idea of the peak, and is also the trafﬁc volume for which the customer is billed. If the
two signiﬁcantly differ, it suggests that the customer is paying primarily for its bursti-
ness. Figure 1 shows the mean of the 95th Percentile to average trafﬁc ratio over time
for networks in the SWITCH dataset classiﬁed by trafﬁc direction and trafﬁc volume.
First, we observe that the 95th Percentile to average ratio has been fairly stable over
the years for each type of network, despite the dramatic changes in overall inter-domain
trafﬁc patterns that have occurred during the same time. In the last 4 years, the mean ra-
tio for heavy-outbound networks is between 2 and 3, while the mean for heavy-inbound
networks is between 3.25 and 4. For balanced networks, the ratio is less than 3.25.
Hence, heavy-inbound networks in general have higher 95th Percentile trafﬁc compared
to heavy-outbound or balanced networks for the same average trafﬁc. Consequently,
heavy-inbound networks have a higher billing volume than heavy-outbound networks
for the same amount of total trafﬁc sent. We observe that the mean ratio is between 2.25
and 3 for heavy-hitter networks, especially in the last 4 years. However, the mean ratio
always exceeds 3 for moderate-hitter networks in those 4 years.
Table 1 shows the mean 95th Percentile to average ratio for different classes of net-
works in the IXP dataset. We observe that the mean ratio is higher for heavy-inbound
networks than for heavy-outbound networks, consistent with our analysis of the
SWITCH dataset. With the exception of BIX, the mean 95th Percentile to average ra-
tio for networks at the other two IXPs is larger for moderate-hitter networks than for
heavy-hitter networks, meaning that moderate-hitter networks have a burstier trafﬁc
proﬁle than heavy-hitter networks.
3.4 Skewness of the Trafﬁc Distribution
The above analysis shows that heavy-inbound and moderate-hitter networks have a
higher 95th-to-average ratio as compared to other networks, meaning that their traf-
Volume-Based Transit Pricing: Is 95 the Right Percentile?
81
Table 1. Mean 95th Percentile to average ratio for IXPs, using different network classiﬁcations.
Heavy-inbound and moderate-hitter networks (except at BIX) generally have higher ratios.
IXP Heavy-inbound Balanced Heavy-outbound Heavy-hitter Moderate-hitter
SIX
BIX
ILAN
1.9
1.94
2.386
2.6
2.82
2.62
1.7
2.1
2.21
1.4
2.59
1.7
-
2.3
1.9
Skewness of Networks Traffic
Heavy-Inbound Networks
Balanced Networks
Heavy-Outbound Networks
s
s
e
n
w
e
k
S
25
20
15
10
5
0
Jan
Jan
 2003
 2004
Jan
2005
Jan
2006
Jan
2007
Jan
2008
Jan
2009
Jan
2010
Jan
2011
Jan
2012
12
10
8
6
4
2
0
Skewness of Networks Traffic
Heavy-Hitter Networks
Moderate-Hitter Networks
Jan
Jan
 2003