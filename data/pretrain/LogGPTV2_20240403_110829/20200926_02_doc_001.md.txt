为什么打车和宇宙大爆炸
有关?
Digoal
热烈庆祝PG 13 于2020-09-24正式发布
• PG 13 它牛逼在哪? 打死也不说:
• PG 13 它贴心在哪?
https://github.com/digoal/blog/blob/master/202009/20200926_01.md
• PG 13 它烧脑在哪?
• PG 13 它奔放在哪?
全球社区 协作 奉献
• "PostgreSQL 13展示了 的 和 精神。",
PostgreSQL核心团队成员Peter Eisentraut说, "每个发行版带来的
创新, 可靠 稳定
以及PG在 性和 性方面的声誉，是越来越多的
企业选择使用PostgreSQL的原因"。
我就是: 带着头盔耍双节棍的德哥!!!
最近BB的作品:
《亿级用户量的实时推荐数据库到底要几毛钱?》
《在数据库中跑全文检索、模糊SQL会不会被开除?》
《刷脸支付会不会刷到别人的钱包? 》
江湖名号: 德哥
帮会: PostgreSQL社区
帮会不正当职务: 校长
擅长武器: PostgreSQL
雕虫小技: 全文检索、模糊搜索、化学分析、
人脸识别、相似推荐、时空调度、向量搜索...
必杀技: 删库跑路
正经职务: 阿里云数据库产品经理
愿景: 没有MyBase解决不了的问题,如果有,就多买几台
格言: 公益是一辈子的事
业余爱好: 写博、写专利、分享、毁人不倦
github: https://github.com/digoal
联系方式:
目录
• 为什么要讨论这个问题?
• 打车和宇宙大爆炸有什么共同点?
• 打车和秒杀是不是也有共同点?
• 秒杀的难点是什么?
• 打车的难点是什么?
• 你不觉得诡异么?
• 没有MyBase解决不了的问题,如果有,就多买几台
任何程序猿脱发有关的问题都值得讨论!!!
为什么要讨论这个问题?
打车和宇宙大爆炸有什么共同点?
• 看你怎么圆回来
打车和秒杀是不是也有共同点?
忽悠
• 根据上一页的解答, 看得粗来这位讲师的 能力不简单
秒杀的难点是什么?
根源:
• 懒人视角 锁等待!!!
• 太晚了, 熄灯睡觉.
• 用户视角
• 网速太慢, 手速太慢, 货太少, 关键时刻卡死.
• 商家视角
• 想好没, 赶紧付钱. 下一个.
• 每一笔都是亏本生意, 千万别超卖了.
• 攻城狮视角
• 一单都不能出错, 一秒都不能卡.
• 产品视角
• 这个需求很简单, 怎么实现我不管
打车的难点是什么?
• 乘客视角
• 提前半小时叫车, 先排队, OMG!!!
• 出租车视角
• 提前半小时在楼下蹲点!!!
• 平台视角
• 提高车辆利用率, 减少空闲时间
你不觉得诡异么?
• 来得早不如来得巧
• 秒得早不如秒得巧
• 司机说: 哥可是漂洋过海滴来接你啊
• 我的定位准不了
• 拼的车上“永远”都是同性
• 拼的车上都是“同路人”
咋整
没有MyBase解决不了的问题,
如果有,就多买几台
• 大禹治水的核心思想是什么?
解决人民群众
的主要矛盾.
各位观众:
学霸已经悄悄打开链接了!!!
这才是老百姓用得起的秒杀方案!!!
既锁又不锁
• 高, 实在是高!!! -
• demo:
• https://github.com/digoal/blog/blob/master/201711/20171107_31.md
• https://github.com/digoal/blog/blob/master/201611/20161117_01.md
上亿买家
上亿买家
... ...
无
单
限
车
车
道
道
... ...
没错: 这就是左冷禅都想得到的
高峰期打车方案
• 高, 实在是高!!! – GiST多模索引时空加速; 位置漂移, 消除扫描浪费; skip lock 既锁又不锁
• demo :
• https://github.com/digoal/blog/blob/master/201804/20180414_03.md
• https://github.com/digoal/blog/blob/master/201804/20180416_02.md
学霸已经悄悄打开链接了!!!
学霸怎么就那么快捏!!!
!
!
!
• 提前收藏:
!
!
!
这
• https://github.com/digoal/blog
在
都
方
配
m
m
的
哥
总结一下
• 如果要用一首歌来描述秒杀和高峰打车的难点
• 没有MyBase PG解决不了的问题, 如果有,就多买几台
• 秒杀
• 既锁又不锁
• advisory lock
• 高峰打车
• PostGIS & 阿里云Ganos
• GiST 时空索引
• skip lock, 消除等待
• 随机位置漂移 order by (lat,lon)  就近找车, 消除offset浪费.
• 时空多模混合索引
?
MyBase
憋废话了, 到底哪里有
咨询砖家
• 入钉钉群,
•免费
活动进行中!!!
•周周
有直播和红包雨!!!