User: Please write a piece of code that uses bash scripts to realize automatic backup, including the time stamp of the backup data and the function of automatically deleting old backups.
Assistant: #!/bin/bash # Define backup file name format backup_file="backup_`date +%Y%m%d%H%M`.tar.gz" # Backup command tar -zcvf $backup_file /path/to/backup # Define backup storage time keep_days=7 # Delete old backups find /path/to/backups -name "backup_*" -type f -mtime +$keep_days -exec rm {} \; # Display backup completion information echo "Backup completed: $ backup_file"