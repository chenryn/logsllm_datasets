LOC=loadmod.csect+csect_offset
• loadmod is the name of the load module in control at the time of the abend (in this example,
CSQLLPLM). This might be represented by an asterisk if it is unknown.
• csect is the name of the CSECT in control at the time of abend (in this example, CSQL1GET).
• csect_offset is the offset within the failing CSECT at the time of abend (in this example, 0246).
Note: The value of csect_offset might vary if service has been applied to this CSECT, so do not use
this value when building a keyword string to search the IBM software support database.
Dump title variation with PSW and ASID
Some dump titles replace the load module name, CSECT name, and CSECT offset with the PSW (program
status word) and ASID (address space identifier). Figure 52 on page 284 illustrates this format.
ssnm,ABN=compltn-reason,U=userid,C=compid.release.comp-function,
M=module,PSW=psw_contents,ASID=address_space_id
Figure 52. Dump title with PSW and ASID
psw_contents
• The PSW at the time of the error (for example, X'077C100000729F9C').
address_space_id
• The address space in control at the time of the abend (for example, X'0011'). This field is not
present for a channel initiator.
284 Troubleshooting and Support for IBM MQ
Related concepts
“Processing a dump using the IBM MQ for z/OS dump display panels” on page 271
You can use commands available through IPCS panels to process dumps. Use this topic to understand the
IPCS options.
“Processing an IBM MQ for z/OS dump using line mode IPCS” on page 275
Use the IPCS commands to format a dump.
“Processing an IBM MQ for z/OS dump using IPCS in batch” on page 282
Use this topic to understand how IBM MQ for z/OS dumps can be formatted by IPCS commands in batch
mode.
SYSUDUMP information on z/OS
The z/OS system can create SYSUDUMPs, which can be used as part of problem determination. This topic
shows a sample SYSUDUMP output and gives a reference to the tools for interpreting SYSUDUMPs.
SYSUDUMP dumps provide information useful for debugging batch and TSO application programs. For
more information about SYSUDUMP dumps, see the z/OS MVS Diagnosis: Tools and Service Aids manual.
Figure 53 on page 285 shows a sample of the beginning of a SYSUDUMP dump.
JOB MQMBXBA1 STEP TSOUSER TIME 102912 DATE 001019 ID = 000 CPUID = 632202333081
PAGE 00000001
COMPLETION CODE SYSTEM = 0C1 REASON CODE = 00000001
PSW AT ENTRY TO ABEND 078D1000 000433FC ILC 2 INTC 000D
PSW LOAD MODULE = BXBAAB01 ADDRESS = 000433FC OFFSET = 0000A7F4
ASCB: 00F56400
+0000 ASCB..... ASCB FWDP..... 00F60180 BWDP..... 0047800 CMSF..... 019D5A30
SVRB..... 008FE9E0
+0014 SYNC..... 00000D6F IOSP..... 00000000 TNEW..... 00D18F0 CPUS..... 00000001
ASID..... 0066
+0026 R026..... 0000 LL5...... 00 HLHI..... 01 DPHI..... 00
DP....... 9D
+002C TRQP..... 80F5D381 LDA...... 7FF154E8 RSMF..... 00 R035..... 0000
TRQI..... 42
+0038 CSCB..... 00F4D048 TSB...... 00B61938 EJST..... 0000001 8C257E00
+0048 EWST..... 9CCDE747 76A09480 JSTL..... 00141A4 ECB...... 808FEF78
UBET..... 9CCDE740
.
.
.
ASSB: 01946600
+0000 ASSB..... ASSB VAFN..... 00000000 EVST..... 0000000 00000000
+0010 VFAT..... 00000000 00000000 RSV...... 000 XMCC..... 0000
XMCT.....00000000
+0020 VSC...... 00000000 NVSC..... 0000004C ASRR..... 0000000 R02C..... 00000000
00000000 00000000
+0038 00000000 00000000
*** ADDRESS SPACE SWITCH EVENT MASK OFF (ASTESSEM = 0) ***
TCB: 008D18F0
+0000 RBP...... 008FE7D8 PIE...... 00000000 DEB...... 00B1530 TIO...... 008D4000
CMP......805C6000
+0014 TRN...... 40000000 MSS...... 7FFF7418 PKF...... 80 FLGS..... 01000000 00
+0022 LMP...... FF DSP...... FE LLS...... 00D1A88 JLB...... 00011F18
JPQ......00000000
+0030 GPRO-3... 00001000 008A4000 00000000 00000000
+0040 GPR4-7... 00FDC730 008A50C8 00000002 80E73F04
+0050 GPR8-11.. 81CC4360 008A6754 008A67B4 00000008
Figure 53. Sample beginning of a SYSUDUMP
IBM MQ troubleshooting and support 285
Snap dumps on z/OS
Snap dump data sets are controlled by z/OS JCL command statements. Use this topic to understand the
CSQSNAP DD statement.
Snap dumps are always sent to the data set defined by the CSQSNAP DD statement. They can be issued
by the adapters or the channel initiator.
• Snap dumps are issued by the batch, CICS, IMS, or RRS adapter when an unexpected error is returned
by the queue manager for an MQI call. A full dump is produced containing information about the
program that caused the problem.
For a snap dump to be produced, the CSQSNAP DD statement must be in the batch application JCL,
CICS JCL, or IMS dependent region JCL.
• Snap dumps are issued by the channel initiator in specific error conditions instead of a system dump.
The dump contains information relating to the error. Message CSQX053E is also issued at the same
time.
To produce a snap dump, the CSQSNAP DD statement must be in the channel initiator started-task
procedure.
SYS1.LOGREC information on z/OS
Use this topic to understand how the z/OS SYS1.LOGREC information can assist with problem
determination.
IBM MQ for z/OS and SYS1.LOGREC
The SYS1.LOGREC data set records various errors that different components of the operating system
encounter. For more information about using SYS1.LOGREC records, see the z/OS MVS Diagnosis: Tools
and Service Aids manual.
IBM MQ for z/OS recovery routines write information in the system diagnostic work area (SDWA) to the
SYS1.LOGREC data set when retry is attempted, or when percolation to the next recovery routine occurs.
Multiple SYS1.LOGREC entries can be recorded, because two or more retries or percolations might occur
for a single error.
The SYS1.LOGREC entries recorded near the time of abend might provide valuable historical information
about the events leading up to the abend.
Finding the applicable SYS1.LOGREC information
To obtain a SYS1.LOGREC listing, either:
• Use the EREP service aid to format records in the SYS1.LOGREC data set.
Following is some example JCL to get software LOGREC report:
//STEP EXEC PGM=IFCEREP1,PARM='CARD'
//ACCIN DD DSN=EREP.HISTORY,DISP=(OLD,PASS)
//DIRECTWK DD UNIT=SYSDA,SPACE=(CYL,10,,CONTIG)
//EREPPT DD SYSOUT=A,DCB=BLKSIZE=133
//TOURIST DD SYSOUT=A,DCB=BLKSIZE=133
//SYSIN DD *
PRINT=PS
HIST ****don't use this line if record is in SYS1.LOGREC****
ACC=N
TYPE=S
ENDPARM
/*
Notes:
– PRINT=PS is for Detail and Summary, TYPE=S is for software.
You can also add a time range like TIME=(2000-2005) to get only the records you need.
286 Troubleshooting and Support for IBM MQ
– AS for TIME, data can be extracted using DATE as well. See EREP Selection Parameters, Parameter
descriptions, and Syntax rules for information on how you set the selection of the date range.
• Specify the VERBEXIT LOGDATA keyword in IPCS.
• Use option 7 on the DUMP ANALYSIS MENU (refer to “Processing a dump using the IBM MQ for z/OS
dump display panels” on page 271 ).
Only records available in storage when the dump was requested are included. Each formatted record
follows the heading *****LOGDATA*****.
SVC dumps on z/OS
Use this topic to understand how to suppress SVC dumps on z/OS, and reasons why SVC dumps are not
produced.
When SVC dumps are not produced
Under some circumstances, SVC dumps are not produced. Generally, dumps are suppressed because
of time or space problems, or security violations. The following list summarizes other reasons why SVC
dumps might not be produced:
• The z/OS serviceability level indication processing (SLIP) commands suppressed the abend.
The description of IEACMD00 in the z/OS MVS Initialization and Tuning Reference manual lists the
defaults for SLIP commands executed at IPL time.
• The abend reason code was one that does not require a dump to determine the cause of abend.
• SDWACOMU or SDWAEAS (part of the system diagnostic work area, SDWA) was used to suppress the
dump.
Suppressing IBM MQ for z/OS dumps using z/OS DAE
You can suppress SVC dumps that duplicate previous dumps. The z/OS MVS Diagnosis: Tools and Service
Aids manual gives details about using z/OS dump analysis and elimination (DAE).
To support DAE, IBM MQ for z/OS defines two variable recording area (VRA) keys and a minimum
symptom string. The two VRA keys are:
• KEY VRADAE (X'53'). No data is associated with this key.
• KEY VRAMINSC (X'52') DATA (X'08')
IBM MQ for z/OS provides the following data for the minimum symptom string in the system diagnostic
work area (SDWA):
• Load module name
• CSECT name
• Abend code
• Recovery routine name
• Failing instruction area
• REG/PSW difference
• Reason code
• Component identifier
• Component subfunction
Dumps are considered duplicates for the purpose of suppressing duplicate dumps if eight (the X'08' from
the VRAMINSC key) of the nine symptoms are the same.
IBM MQ troubleshooting and support 287
Dealing with performance problems on z/OS
Use this topic to investigate IBM MQ for z/OS performance problems in more detail.
Performance problems are characterized by the following:
• Poor response times in online transactions
• Batch jobs taking a long time to complete
• The transmission of messages is slow
Performance problems can be caused by many factors, from a lack of resource in the z/OS system as a
whole, to poor application design.
The following topics present problems and suggested solutions, starting with problems that are relatively
simple to diagnose, such as DASD contention, through problems with specific subsystems, such as IBM
MQ and CICS or IMS.
• “IBM MQ for z/OS system considerations” on page 288
• “CICS constraints” on page 288
• “Dealing with applications that are running slowly or have stopped on z/OS” on page 289
Remote queuing problems can be due to network congestion and other network problems. They can also
be caused by problems at the remote queue manager.
Related concepts
“Dealing with incorrect output on z/OS” on page 294
Incorrect output can be missing, unexpected, or corrupted information.
Related tasks
“Making initial checks” on page 6
There are some initial checks that you can make that may provide answers to common problems that you
might have.
IBM MQ for z/OS system considerations
The z/OS system is an area that requires examination when investigating performance problems.
You might already be aware that your z/OS system is under stress because these problems affect many
subsystems and applications.
You can use the standard monitoring tools such as Resource Monitoring Facility ( RMF ) to monitor and
diagnose these problems. They might include:
• Constraints on storage (paging)
• Constraints on processor cycles
• Constraints on DASD
• Channel path usage
Use normal z/OS tuning techniques to resolve these problems.
CICS constraints
CICS constraints can also have an adverse effect on IBM MQ for z/OS performance. Use this topic for
further information about CICS constraints.
Performance of IBM MQ tasks can be affected by CICS constraints. For example, your system might
have reached MAXTASK, forcing transactions to wait, or the CICS system might be short on storage. For
example, CICS might not be scheduling transactions because the number of concurrent tasks has been
reached, or CICS has detected a resource problem. If you suspect that CICS is causing your performance
problems (for example because batch and TSO jobs run successfully, but your CICS tasks time out, or
have poor response times), see the CICS Problem Determination Guide and the CICS Performance Guide.
288 Troubleshooting and Support for IBM MQ
Note: CICS I/O to transient data extrapartition data sets uses the z/OS RESERVE command. This could
affect I/O to other data sets on the same volume.
Dealing with applications that are running slowly or have stopped on z/OS
Waits and loops can exhibit similar symptoms. Use the links in this topic to help differentiate between
waits and loops on z/OS.
Waits and loops are characterized by unresponsiveness. However, it can be difficult to distinguish
between waits, loops, and poor performance.
Any of the following symptoms might be caused by a wait or a loop, or by a badly tuned or overloaded
system:
• An application that appears to have stopped running (if IBM MQ for z/OS is still responsive, this problem
is probably caused by an application problem)
• An MQSC command that does not produce a response
• Excessive use of processor time
To perform the tests shown in these topics, you need access to the z/OS console, and to be able to issue
operator commands.
• “Distinguishing between waits and loops on z/OS” on page 289
• “Dealing with waits on z/OS” on page 290
• “Dealing with loops on z/OS” on page 292
Related tasks
“Making initial checks” on page 6
There are some initial checks that you can make that may provide answers to common problems that you
might have.
Distinguishing between waits and loops on z/OS
Waits and loops on IBM MQ for z/OS can present similar symptoms. Use this topic to help determine if you
are experiencing a wait or a loop.
Because waits and loops can be difficult to distinguish, in some cases you need to carry out a detailed
investigation before deciding which classification is appropriate for your problem.
This section gives you guidance about choosing the best classification, and advice on what to do when you
have decided on a classification.
Waits
For problem determination, a wait state is regarded as the state in which the execution of a task has been
suspended. That is, the task has started to run, but has been suspended without completing, and has
subsequently been unable to resume.
A problem identified as a wait in your system could be caused by any of the following:
• A wait on an MQI call
• A wait on a CICS or IMS call
• A wait for another resource (for example, file I/O)
• An ECB wait
• The CICS or IMS region waiting
• TSO waiting
• IBM MQ for z/OS waiting for work
• An apparent wait, caused by a loop
• Your task is not being dispatched by CICS or MVS due to higher priority work
IBM MQ troubleshooting and support 289
• Db2 or RRS are inactive
Loops
A loop is the repeated execution of some code. If you have not planned the loop, or if you have designed
it into your application but it does not terminate for some reason, you get a set of symptoms that vary
depending on what the code is doing, and how any interfacing components and products react to it. In
some cases, at first, a loop might be diagnosed as a wait or performance problem, because the looping
task competes for system resources with other tasks that are not involved in the loop. However, a loop
consumes resources but a wait does not.
An apparent loop problem in your system could be caused by any of the following:
• An application doing a lot more processing than usual and therefore taking much longer to complete
• A loop in application logic
• A loop with MQI calls
• A loop with CICS or IMS calls
• A loop in CICS or IMS code
• A loop in IBM MQ for z/OS
Symptoms of waits and loops
Any of the following symptoms could be caused by a wait, a loop, or by a badly tuned or overloaded
system:
• Timeouts on MQGET WAITs
• Batch jobs suspended
• TSO session suspended
• CICS task suspended
• Transactions not being started because of resource constraints, for example CICS MAX task
• Queues becoming full, and not being processed
• System commands not accepted, or producing no response
Related concepts
“Dealing with waits on z/OS” on page 290
Waits can occur in batch or TSO applications, CICS transactions, and other components on IBM MQ for
z/OS. Use this topic to determine where waits can occur.
“Dealing with loops on z/OS” on page 292
Loops can occur in different areas of a z/OS system. Use this topic to help determine where a loop is
occurring.
Dealing with waits on z/OS
Waits can occur in batch or TSO applications, CICS transactions, and other components on IBM MQ for
z/OS. Use this topic to determine where waits can occur.
When investigating what appears to be a problem with tasks or subsystems waiting, it is necessary to take
into account the environment in which the task or subsystem is running.
It might be that your z/OS system is generally under stress. In this case, there can be many symptoms.
If there is not enough real storage, jobs experience waits at paging interrupts or swap-outs. Input/output
(I/O) contention or high channel usage can also cause waits.
You can use standard monitoring tools, such as Resource Monitoring Facility (RMF) to diagnose such