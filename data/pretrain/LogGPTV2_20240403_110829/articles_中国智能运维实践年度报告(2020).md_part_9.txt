异常检测、异常机器定位、批量超时异常检测等多个智能运维算法场景，实现日基线计算X万余条，覆
科技运营数据平台不仅要做好数据管理的角色，还需要用
数据服务层 智能算法库 接口服务组件库 功能脚本库 机器学习 
 盖行内所 有对外关键业务系统。利用基于动态基线阈值的异常检测，提前预见生产潜在隐患，提升生产 
互联网思维去运营，根据业务行为数据实时的优化改进运
数据存储层 CMDB Store（数据模型+大数据） 实时流处理与离线分析 故障快速定位能力。如，生产系统XX%的批量任务通过智 能算法实现超时阈值优化，并与二线管理员
维服务，提升科技服务水平。
配合完善“两级阀值运行”机制，整体超时报警率环比明显下降。应用系统通过异常告警与机器学习推
数据采控层 网络报文 数据采集 日志采集 代理调度 无代理 
 采集 调度 荐，联动自动化运维平 台进行特定异常告警的自动化处置，实现故障自愈。
科技运营数据平台建设要点
 科技运营数据平台在安全运营领域通过全量采集网络流量、安全设备日志等数据，利用智能算法进行异 
 网络 物理资源 虚拟化资源 容器资源 数据库/中间件 应用系统 
科技运营数据平台是围绕数据资产的管理和应用建设，但 常威胁信息检测，联动自动化运维平台实现智能化的运营安全防控。当前已经实现每日推送相关威胁生
与传统数据仓库又有不同，主要是因为科技运营数据在数 产运营的IP次数X余次，每周自动封堵攻击IP地址X余个。
搭建一个实时采集、预处理的数据采控层，利用网络镜像 
 据生产和消费应用场景有着一些重要特性： 
流量、文件采集等多种手段，从网络报文、数据库sql性 科技运营数据平台实现科技运营数据服务于业务，利用数据创造价值。依托实时业务运行数据，利用流
实时性：科技运营数据需要达到分钟级，甚至秒级的实 能、应用日志、设备日志、基础资源使用等维度全方位获 计算技术搭建业务数据的可视化场景，为手机银行、自助设备、电子支付、互联网信贷、大小额等业务
时性，才能实时反映业务系统运行的状态。 取科技运营数据，支撑科技运营数据的全面性要求。 场景实时呈现业务运行动态，精准掌握客户需求，有效支撑数字化业务运营。
25 26
最佳实践案例剖析 中国智能运维实践年度报告
 整体设计
 检测模式
运用机器学习方法，首先通过识别重要日志中的变量，对日志做实时聚类形成日志模式，并与正常时段日
 志模式对比，出现异常时发出告警来辅助运维人员快速定位异常，这弥补现有业务监控中，难以通过规则 
事先设置监控。 
 图：日志异常检测实现流程
AI赋能国泰君安 运维  算法逻辑 海量接入：允许接入海量日志，并对其进行必 
 要的格式清洗。目前，日志异常检测应用已接
智能运维场景落地实践  日志日志异常检测的核心处理步骤分为三步：实
入多达34种日志，每日分析日志量1.5T以上 
时读取日志、模式提取和模式异常检测。 
 实时解析：支持对海量日志进行实时解析。日
 实时读取日志：国泰君安系统的应用实践采用 
需求和挑战  志从接入到解析完毕归档的  时间延迟不超过1分
 的是每次读取固定长度时间段日志，如每次读
钟，并且可对解析出来的日志模板数量异常情
取某5分钟的日志； 
况进行实时检测。 
日志作为运维人员最为关注的一类数据，是程 错误日志数量多：当线上发生异常时，打印
序运行过程中由代码打印记录的对一些程序完 的大量错误日志难以阅读。 模式提取：对一定数量的日志做聚类，基于提
告警收敛：借助日志异常检测应用，告警降噪
成的任务和系统的状态。  取的日志模式的时序趋势，根据同环比、基线
 日志变化频繁：日志会随着设备厂商和设备 偏离度、 聚类 效果达到近90%。 
波动性、时间窗口等特征判定其是否
国泰君安专家团队在对日志异常检测进行充分 型号的变化而变化，如何对日志模板进行增 
异常；
捕捉异常：借助日志异常检测应用，发现多起
解读和分析和，发现目前面临如下挑战： 量式学习，是对算法性能提出的巨大挑战。 
 原有监控系统未报出的问题。日志异常检测应
模式异常检测：在出现异常时发出告警，有效
 用较好地捕捉到如新增错误日志、日志数量突
归类设置告警困难：每天数据中心会产生数 面对上述这些问题国泰君安专家团队认为需要
 解决新增、时段新增、数量异常等三种故障情
 以千万计的系统日志信息，且系统日志格式 提供一种日志异常检测机制，准确、高效地解 况，弥补现有业务监控中，难以通过规则事先 增、指标异常、无数据等多种异常情况，对提
多样，因此归类设置告警困难。 析日志，且自动、准确地检测各种型号设备或  设置的监控。  升运维监控质量有很好的促进作用。
应用的多语法语义的单条异常日志和异常日志 
  提高效率：日志异常检测智能算法有效解决基
NLP方法不适用：当下流行的NLP方法并不 应用效果
序列，从日志结构中找到未知故障，完善当前
 于人工规则检测单条异常日志存在的人工开销
适用，国泰君安需要结合运维领域知识从日
 监控体系，对感知不及时、维护工作量巨大和
日志异常检测的优越性体现在如下几个方面： 大、召回率低、不通用、计算效率低等缺点。
志中提炼日志模板。 
误报率高等现状问题进行解决。
27 28
最佳实践案例剖析 中国智能运维实践年度报告
落地实践 
如图例所示，在该时段出现多个新增日志和异常增多日志，国泰君安以趋势图形式表示数量变 
案例1 化，直观展示，通过多种告警合并，既避免管理员重复收到大量告警，又能分析比对便于定位原 
因。点击趋势图，可查看该种日志模式具体趋势变化及日志原文，帮助管理员迅速定位根因。