Cookie: user_id=USER_ID
    In this case, you can try to change the
     USER_ID
    in the URL and the
     Cookie
    header to another user’s ID and see if you can access another user’s email.
    在这种情况下，您可以尝试在URL和Cookie头中更改USER_ID以使用另一个用户的ID，以查看您是否可以访问另一个用户的电子邮件。
    Two proxies are particularly popular with bug bounty hunters: Burp Suite and the Zed Attack Proxy (ZAP). This section will show you how to set up Burp, but you’re free to use ZAP instead.
    两个代理服务器特别受到漏洞赏金猎人的欢迎：Burp Suite和Zed Attack Proxy（ZAP）。本节将向您展示如何设置Burp，但您也可以自由选择使用ZAP。
    Opening the Embedded Browser
    Both Burp Suite and ZAP come with embedded browsers. If you choose to use these embedded browsers for testing, you can skip the next two steps. To use Burp Suite’s embedded browser, click
     Open browser
    in Burp’s Proxy tab after it’s launched (
     Figure 4-1
    ). This embedded browser’s traffic will be automatically routed through Burp without any additional setup.
    Both Burp Suite and ZAP are equipped with embedded browsers. If you choose to use these embedded browsers for testing, you can skip the next two steps. To use Burp Suite’s embedded browser, click “在Burp的代理选项卡中打开浏览器”(图4-1)。这个内置浏览器的流量将自动通过Burp进行路由，无需进行任何其他设置。
       Figure 4-1
      : You can use Burp’s embedded browser instead of your own external browser for testing.
      图4-1：您可以使用Burp的内置浏览器而不是您自己的外部浏览器进行测试。
    Setting Up Firefox
    Burp’s embedded browser offers a convenient way to start bug hunting with minimal setup. However, if you are like me and prefer to test with a browser you are used to, you can set up Burp to work with your browser. Let’s set up Burp to work with Firefox.
    Burp嵌入式浏览器提供了一种方便的方法来开始进行最小化设置的漏洞狩猎。然而，如果你像我一样偏爱使用你已经习惯的浏览器进行测试，那么你可以设定Burp与你的浏览器一起工作。让我们来设定Burp可以和Firefox一起工作。
    Start by downloading and installing your browser and proxy. You can download the Firefox browser from
     https://www.mozilla.org/firefox/new/
    and Burp Suite from
     https://portswigger.net/burp/
    .
    从以下网址下载并安装你的浏览器和代理。你可以从 https://www.mozilla.org/firefox/new/ 下载Firefox 浏览器，并从 https://portswigger.net/burp/ 下载Burp Suite。
    Bug bounty hunters use one of two versions of Burp Suite: Professional or Community. You have to purchase a license to use Burp Suite Professional, while the Community version is free of charge. Burp Suite Pro includes a vulnerability scanner and other convenient features like the option to save a work session to resume later. It also offers a full version of the Burp intruder, while the Community version includes only a limited version. In this book, I cover how to use the Community version to hunt for bugs.
    漏洞赏金猎人使用Burp Suite的两个版本之一：专业版或社区版。使用Burp Suite专业版需要购买许可证，而社区版免费。Burp Suite Pro包括漏洞扫描仪和其他方便的功能，例如保存工作会话以便稍后继续。它还提供了一个完整版的Burp intruder，而社区版仅包含有限的版本。在这本书中，我介绍了如何使用社区版来寻找漏洞。
    Now you have to configure your browser to route traffic through your proxy. This section teaches you how to configure Firefox to work with Burp Suite. If you’re using another browser-proxy combination, please look up their official documentation for tutorials instead.
    现在您需要配置您的浏览器以通过代理路由流量。本部分将教您如何将Firefox配置为与Burp Suite一起使用。如果您使用其他浏览器-代理组合，请查阅其官方文档以获取教程。
    Launch Firefox. Then open the Connections Settings page by choosing
     Preferences
     ▶
     General
     ▶
     Network Settings
    . You can access the Preferences tab from the menu at Firefox’s top-right corner (
     Figure 4-2
    ).
    启动Firefox。然后通过选择Preferences▶General▶Network Settings打开连接设置页面。您可以从Firefox右上角的菜单访问Preferences选项卡（见图4-2）。
       Figure 4-2
      : You can find the Preferences option at the top-right corner of Firefox.
      图4-2：您可以在Firefox的右上角找到“偏好设置”选项。
    The Connection Settings page should look like the one in
     Figure 4-3
    .
    连接设置页面应该像图4-3所示。
    Select
     Manual proxy configuration
    and enter the IP address
     127.0.0.1
    and port
     8080
    for all the protocol types. This will tell Firefox to use the service running on port 8080 on your machine as a proxy for all of its traffic. 127.0.0.1 is the localhost IP address. It identifies your current computer, so you can use it to access the network services running on your machine. Since Burp runs on port 8080 by default, this setting tells Firefox to route all traffic through Burp. Click
     OK
    to finalize the setting. Now Firefox will route all traffic through Burp.
    选择手动代理配置，并输入 IP 地址 127.0.0.1 和端口号 8080，适用于所有协议类型。这将告诉 Firefox 使用运行在您机器上 8080 端口的服务作为其所有流量的代理。127.0.0.1 是本地主机IP地址，它识别您当前的计算机，因此您可以使用它来访问在您机器上运行的网络服务。由于 Burp 默认运行在 8080 端口上，这个设置告诉 Firefox 将所有流量通过 Burp 路由。点击 OK 完成设置。现在 Firefox 将通过 Burp 路由所有流量。
       Figure 4-3
      : Configure Firefox’s proxy settings on the Connection Settings page.
      图4-3：在连接设置页面上配置Firefox的代理设置。
    Setting Up Burp
    After downloading Burp Suite, open it and click
     Next
    , then
     Start Burp
    . You should see a window like
     Figure 4-4
    .
    下载Burp Suite后，打开它并点击下一步，然后启动Burp。您应该看到一个类似于图4-4的窗口。
       Figure 4-4
      : Burp Suite Community Edition startup window
      图4-4：Burp Suite社区版启动窗口
    Now let’s configure Burp so it can work with HTTPS traffic. HTTPS protects your data’s privacy by encrypting your traffic, making sure only the two parties in a communication (your browser and the server) can decrypt it. This also means your Burp proxy won’t be able to intercept HTTPS traffic going to and from your browser. To work around this issue, you need to show Firefox that your Burp proxy is a trusted party by installing its certificate authority (CA) certificate.
    现在让我们配置Burp，以便它可以处理HTTPS流量。 HTTPS通过加密流量来保护您的数据隐私，确保只有通信中的双方（您的浏览器和服务器）才能解密它。这也意味着您的Burp代理将无法拦截您的浏览器发送和接收的HTTPS流量。为了解决这个问题，您需要向Firefox展示您的Burp代理是可信方，方法是安装其证书颁发机构（CA）证书。
    Let’s install Burp’s certificate on Firefox so you can work with HTTPS traffic. With Burp open and running, and your proxy settings set to 127.0.0.1:8080, go to
     http://burp/
    in your browser. You should see a Burp welcome page (
     Figure 4-5
    ). Click
     CA Certificate
    at the top right to download the certificate file; then click
     Save File
    to save it in a safe location.
    让我们在Firefox上安装Burp的证书，这样您就可以处理HTTPS流量。在Burp打开和运行，并将代理设置为127.0.0.1：8080的情况下，转到浏览器中的http://burp/。您应该看到Burp欢迎页面（图4-5）。单击右上角的CA证书以下载证书文件；然后单击“另存为”以将其保存在安全位置。
       Figure 4-5
      : Go to
       http://burp/
      to download Burp’s CA certificate.
      图4-5：访问http://burp/下载Burp的CA证书。
    Next, in Firefox, click
     Preferences
     ▶
     Privacy & Security
     ▶
     Certificates
     ▶
     View Certificates
     ▶
     Authorities
    . Click
     Import
    and select the file you just saved, and then click
     Open
    . Follow the dialog’s instructions to trust the certificate to identify websites (
     Figure 4-6
    ).
    接下来，在Firefox中，点击Preferences▶Privacy & Security▶Certificates▶View Certificates▶Authorities。点击导入并选择刚刚保存的文件，然后点击打开。按照对话框的指示信任证书以识别网站（图4-6）。
       Figure 4-6
      : Select the
        Trust this CA to identify websites
      option in Firefox’s dialog.
      图4-6：在Firefox的对话框中选择信任此CA以识别网站选项。
    Restart Firefox. Now you should be all set to intercept both HTTP and HTTPS traffic.
    重新启动Firefox。现在您已准备好拦截HTTP和HTTPS流量。
    Let’s perform a test to make sure that Burp is working properly. Switch to the Proxy tab in Burp and turn on traffic interception by clicking
     Intercept is off
    . The button should now read Intercept is on (
     Figure 4-7
    ). This means you’re now intercepting traffic from Firefox or the embedded browser.
    让我们执行一个测试，以确保Burp正常工作。在Burp中切换到代理选项卡，并通过单击“拦截关闭”开启流量拦截。按钮现在应该显示“拦截已开启”（图4-7）。这意味着您现在正在拦截来自Firefox或嵌入式浏览器的流量。
       Figure 4-7
      : Intercept is on means that you’re now intercepting traffic.
      图4-7：截取开启表示您现在正在截取流量。
    Then open Firefox and visit
     https://www.google.com/
    . In Burp’s proxy, you should see the main window starting to populate with individual requests. The Forward button in Burp Proxy will send the current request to the designated server. Click
     Forward
    until you see the request with the hostname
     www.google.com
    . If you see this request, Burp is correctly intercepting Firefox’s traffic. It should begin like this:
    然后打开Firefox并访问https://www.google.com/。在Burp的代理中，您应该看到主窗口开始填充个别请求。 Burp Proxy的向前按钮将将当前请求发送到指定的服务器。 点击向前，直到看到主机名www.google.com的请求。 如果您看到此请求，则Burp正确拦截了Firefox的流量。 它应该像这样开始：
GET / HTTP/1.1
Host: www.google.com
    Click
     Forward
    to send the request over to Google’s server. You should see Google’s home page appear in your Firefox window.
    点击“前进”将请求发送到谷歌的服务器。你应该能够在Firefox窗口中看到谷歌的主页出现。
    If you aren’t seeing requests in Burp’s window, you might not have installed Burp’s CA certificate properly. Follow the steps in this chapter to reinstall the certificate. In addition, check that you’ve set the correct proxy settings to 127.0.0.1:8080 in Firefox’s Connection Settings.
    如果你在Burp的窗口中没有看到请求内容，可能是没有正确安装Burp的CA证书。请按照本章的步骤重新安装证书。另外，检查一下Firefox的连接设置中是否设置了正确的代理设置：127.0.0.1:8080。
    Using Burp
    Burp Suite has a variety of useful features besides the web proxy. Burp Suite also includes an
     intruder
    for automating attacks, a
     repeater
    for manipulating individual requests, a
     decoder
    for decoding encoded content, and a
     comparer
    tool for comparing requests and responses. Of all Burp’s features, these are the most useful for bug bounty hunting, so we’ll explore them here.
    除了网络代理之外，Burp Suite 还有各种有用的功能。Burp Suite 还包括可以自动攻击的 Intruder 工具、可以操作单个请求的 Repeater 工具、可以解码编码内容的解码器以及比较请求和响应的比较器工具。在 Burp 的所有功能中，这些对于漏洞赏金猎人来说最为有用，因此我们将在这里进行探讨。
    The Proxy
    Let’s see how you can use the Burp
     proxy
    to examine requests, modify them, and forward them to Burp’s other modules. Open Burp and switch to the Proxy tab, and start exploring what it does! To begin intercepting traffic, make sure the Intercept button reads Intercept is on (
     Figure 4-8
    ).
    让我们看看如何使用Burp代理来检查请求、修改它们并将它们转发到Burp的其他模块。打开Burp并切换到代理选项卡，开始探索它的功能！要开始拦截流量，请确保拦截按钮显示“拦截已开启”(图4-8)。
       Figure 4-8
      : The Burp Proxy tab shows Intercept is on.
      图4-8：Burp代理标签显示截取已开启。
    When you browse to a site on Firefox or Burp’s embedded browser, you should see an HTTP/HTTPS request appear in the main window. When intercept is turned on, every request your browser sends will go through Burp, which won’t send them to the server unless you click Forward in the proxy window. You can use this opportunity to modify the request before sending it to the server or to forward it over to other modules in Burp. You can also use the search bar at the bottom of the window to search for strings in the requests or responses.
    当您在Firefox或Burp的嵌入式浏览器中浏览到网站时，您应该会在主窗口中看到一个HTTP/HTTPS请求出现。当截获被打开时，浏览器发送的每个请求都将通过Burp，而Burp不会将它们发送到服务器，除非您在代理窗口中单击“转发”。您可以利用这个机会在发送请求到服务器之前修改请求或将其转发到Burp中的其他模块。您也可以使用窗口底部的搜索栏搜索请求或响应字符串。
    To forward the request to another Burp module, right-click the request and select
     Send to
      Module
    (
     Figure 4-9
    ).
    右键单击请求，选择发送到模块（图4-9），可将请求转发到另一个Burp模块。
    Let’s practice intercepting and modifying traffic by using Burp Proxy! Go to Burp Proxy and turn on traffic interception. Then open Firefox or Burp’s embedded browser and visit
     https://www.google.com/
    . As you did in the preceding section, click
     Forward
    until you see the request with the hostname
     www.google.com
    . You should see a request like this one:
    让我们通过使用Burp代理来练习拦截和修改流量！转到Burp代理并打开流量拦截。然后打开Firefox或Burp的嵌入式浏览器并访问https://www.google.com/。如同在前面的章节中所做的那样，点击"转发"直到你看到主机名为www.google.com的请求。你应该会看到像这样的一个请求：
GET / HTTP/1.1
Host: www.google.com
User-Agent: Mozilla/5.0
Accept-Language: en-US
Accept-Encoding: gzip, deflate
Connection: close
       Figure 4-9
      : You can forward the request or response to different Burp modules by right-clicking it.
      图4-9：右键单击请求或响应，可以将其转发到不同的Burp模块中。
    Let’s modify this request before sending it. Change the
     Accept-Language
    header value to
     de
    .