newsfeed
php
and his abducted dog Fang.
en=us
echo'
substr（$row['alien_descriptIon'],0,32）.'.';
'
echo'
http://www.aliensabductedme.com/index.php?abduction_id
.]MOIS
abduction_id
.'';
echo'
$row['when_it_happened_rfc'].'. date('T')
echo'
.$row['what_they_did'].'';
echo'';
first name
last_n
674
第12章
---
## Page 711
合成与Web服务
运行测试
为AliensAbductedMe增加RSSNewsfeed脚本。
创建一个名为newsfeed.php的新的文本文件，输人前几页磁贴练习中Owen
RSS
Newsfeed脚本的代码[或者从HeadFirstLabs网站（www.headfirstlabs.com/
books/hfphp）下载这个脚本】。
将脚本上传到你的Web服务器，然后在一个新闻阅读器中打开。大多数Web浏览器和
一些email客户程序都允许查看新闻提要，所以如果你没有一个独立的新闻阅读器应
用，可以先尝试使用Web浏览器或email客户程序查看。Newsfeed脚本应当能显示从
AliensAbductedMe数据库直接抽取的最新外星人劫持报告。
如果你的则览器
不能查看新闻提
Aliens Abducted Me-Newsfeed
要，可以试URL中
使用teed：//而不是
Meinhold Ressner - They were in a ship the size of
http:/ /
Mickey Mikens - Huge heads, skinny arms and legs.
Sori by
newsseed.php脚本生成一
个RSS新闻提要文格，可
以用一个RSS新闻阅读
这个新闻提要看起来
器测览。
不错，不过网站访问
者如何找到它呢？
O
只需从主页提供一个相应的链接。
不要忘记newsfeed.php只是一个PHP脚本。它与在本书中之前看到的
大多数其他PHP脚本之间唯一的区别是，它会生成一个RSS文档而不是一
个HTML文档。不过访问这个脚本与访问任何其他PHP脚本是一样的，只
需在URL中指定脚本的名字。Owen还缺少一种方法与访问其网站的人分
享这个URL。稍做努力就可以做到这一点，为此只需提供一个合成链接，
这就是指向Owen服务器上的newsfeed.php脚本的链接。
你现在的位置
675
---
## Page 712
提供一个RSS链接
链接到RSS提要
为网站新闻提要提供一个醒目的链接非常重要，因为很多用户都会很高兴
可以用一个标
你能提供这样一项服务。为了帮助用户很快找到一个给定网站的RSS提要，
准RSS图标清楚
可以使用一个标准图标直观地指示提要。我们可以使用这个图标在Owen的
主页（index.php）下方建立一个新闻提要链接。
地指示用户你提
供了一个RSS新
这个图标有各种不同的形
闻提要。
状和图像格式，不过其外
观总是一样的。
ool
要下载一组不同颜色和格式的RSS图
lloloo
001010
标，可以访间www.teedicons.com。
lololll
rssicon.png
新闻提要的URL正是newsteed.php脚本，只
要这个脚本存储在主页所在的同一个文件
K
夹中，这就可以正常工作。
新闻提要的HTML链接同时包
含RSS图标和描述文本。
000
Aliens Abducted Me
Report a bere
2908-08-10 : Meinb
old Res
Abducted for:
Alies descriptioe
2008-07-11 : Mickey Mikens
3 houn
They were in a ship d
Abducted fer:
45 minutes
Alien descriptic
2008-07-05 : Sli8 Watner
Ahducted for:
Fang spotted:
2008-06-21 : Belita Chevy
2 hous
There was
Aliens Abducted Me页面6
Abducted for:
Fangspotted:
2008-05-11 : Safly Jones
almost a weck
Clumay lieie bugeers
s.had no rhythn
一个醒目的链接可以为访问
老提供一个快捷途径来访问
Abducted for:
1 day
Fang spotied:
es
Owen的新闻提要。
O csrk to
676
第12章
---
## Page 713
合成与Web服务
运行测试
为AliensAbductedMe主页增加新闻提要链接。
修改AliensAbductedMe的index.php脚本，在页面底部附近显示新闻提要链接。另外
从Head First Labs网站（www.headfirstlabs.com/books/hfphp） 下载rssicon.
png图像（作为本章代码的一部分）。
将index.php脚本和rssicon.php图像上传到你的Web服务器，然后在一个Web浏览
器中打开这个脚本。点击这个新链接查看RSS提要。
由于劫持仍在继
我还没有落到Fang，不过这
续，我一直在搜导
些报告很惊人。
外显人。
e00
多亏RSS.新的
外星人劫持报告
被“推”至订购
者，而不要求他
:00AN
:34P
们直接访问Aliens
8002'Ar
Abducted Me网站。
ay 12, 2000
RS
AllensAbductedMe-Newsfeed
Meinhold Res
einashipth
我不知道我在那个
YouTube视频中看到的是
Pstt s
否就是达只狗.·.··
Chloe，非常喜欢壹悉AliensAbductedMe新闻提爱
认为她可能在一个YouTube视频中见过Fans。
你现在的位置
677
---
## Page 714
为Owen的网站增加YouTube内容
视频
长篇大论
一个国片胜过千言万语
有一个新闻提要订购者提醒Owen，指出一个YouTube视频中的一只狗很
像是Fang，在此之后，Owen意识到他必须使用另外某种技术来扩大Fang
的搜索范围。但是怎么做呢？如果Owen可以在AliensAbductedMe中结合
YouTube视频，他的用户就都可以搜寻Fang。不仅如此，他确实需要提出一
种方法避免不断地对YouTube完成手工视频搜索。
YouTube是一个很不错的工具，在
对Fang的搜索中可以帮助收集外显人
尽管YouTube非常有动于Owen找Fang
劫持证据不过，搜索新的外显
但他目前必须完成大量手工视频搜索。
人劫持视频确实很不容易。
Pug Abducted By UFO!
UFOSpotted Ne
这会是Fans吗？
Owen认为视频可
能是找到Fang的
最终途径。
678
第12章
---
## Page 715
合成与Web服务
试一试！
访问Owen的YouTube视频（www.youtube.com/user/aliensabductedme）。
2
查看Owen发现的一些外星人劫持视频。
你认为视频中的狗是Fang吗？
如果我可以直接在AliensAbductedMe上查
爱视频而不必在YouTube上搜索该多好，这难
遥只是一个梦吗？如果能直接访问一个Web
页面，其中为我完成了搜索，那该多好。不
过这只是一个梦吧.….
PDG
你现在的位置
679
---
## Page 716
“拉”内容不同于“推”内容
从其他来源“拉”Web内容
RSS新闻提要的基本思想是，它会把你的内容推向其他人，使他们不必不断
地访问你的网站来得到新内容。这是一种很好的方法，可以让人们更方便
地跟踪你的网站，这一点Owen已经认识到了。不过这只是一个方面，关于
Web合成还有一个方面，需要从另一个网站“拉”内容放置在你的网站上。
YouTube是视频的
这样一来，你会成为消费者，而其他人相当于内容提供者。由于Owen要在
提供者。
网站上显示YouTube视频，对于这种情况，YouTube就成为了提供者。
AliensAbductedMe是视频
的消费者。
000.
Aliens Abducted Me
Welcome, have you had ac cnci
Report it here!
ted dog,Fang?
2008-08-10 : Meirhold Resner
Ahducted for:
 heurs
They wente in a ship the size of a fell mo
Aliee description:
2008-07-11 : Mickey Milkees
45 minute
Abducted for:
Hoge heads, skity ms and lgs
Alien description:
Fang spoted:
2008-07-05 : Shat Watser
FCs
Abducted for:
hous
Alirn descriptioe
Fang spotled:
2008-06-21 : Belita Chevy
E5
Abducted for:
py o  la 
Alien description:
Fang spotted:
2008-05-11 : Sally Jones
1 day
Abducted for:
Alieg description:
giece wih six tentacier
视频缩略图放在
Fang spotled:
77这里！
fes
AliensAbductedMe主页的设计需要精做修
改，为视频搜索结果留出空间。
要了解Owen并不只是想嵌人一个特定的YouTube视频或视频链接，这很重
要。如果只是嵌入特定的视频，这很容易实现，只需从YouTube剪切和粘
YouTube外星人劫持搜索得
贴HTML代码。他想要的是对YouTube视频真正完成一个搜索，并显示该搜
到的视频由YouTube返回
索的结果。所以AliensAbductedMe需要对YouTube数据完成一个实时查询，
并输入Owen的主页。
然后动态地显示结果。这就允许Owen和众多协助寻找Fang的人能时刻监视
发布到YouTube的外星人劫持视频。
680
第12章
---
## Page 717
合成与Web服务
合成YouTube视频
要从YouTube获得视频，必须清楚地了解YouTube如何提供视频来完成合
合成来自
成。YouTube通过一个请求/响应通信过程来提供用于合成的视频，在这个
youTube的视频
过程中，你首先请求某些视频，然后从YouTube服务器收到一个响应，其中
需要发出请求并
包含有关这些视频的信息。一方面你要负责采用YouTube期望的格式发出请
求，另一方面还要处理响应，这包括筛选响应数据来得到你需要的特定视
处理响应。
频数据（视频标题、缩略图图像，链接等）。
需要遵循以下步骤从YouTube“拉”视频并显示：
这个请求通常采用
1
建立一个YouTube视频请求。
URL的形式。
?
向YouTube发出视频请求。
YoTube(使用XML)
应视频请求。
3
接收YouTube的响应数据，其中包含有关视频的信息。
4
处理响应数据，并格式化为HTML代码。
客户
浏宽器开始向We6服
YouTube
Web浏览器
务器请求主页。
Web服务器
PHP脚本从YouTube服务器
请求视频数据。
?
Web服务器
这个XML文格包含所
请求视频的有关详细
信息
最后传送到测览
器的We6页面是
纯HTM。
PHP脚本处理视频数据，并返
回一个格式正确的HTMLWe6
页面。
除了向MySQL数据库请求外星人劫持
YouTabe服务器返回一个包含
数据，PHP脚本现在还要处理YouTube
视频数据的XML文格。
视频响应。
你现在的位置
681
---
## Page 718
引入REST请求
建立一个YouTube视频请求
thereareno
DumbQuestions
问：REST代表什么？
要从YouTube“拉”视频并把这些视频结合到你自已的Web页面，首先需要
有一个请求。YouTube希望通过使用REST请求来请求视频，这是一个指向
特定资源（如YouTube视频数据）的定制URL。首先构建一个标识所要视频
的URL，然后YouTube通过一个XML文档返回这些视频的有关信息。
(REpresentational State Transfer)。
有些缩写听起来很复杂，而且很高
YouTube请求URL的详细信息由你希望访问哪些视频来确定。例如，可以
深，但实际上并非如此，REST就
请求某个特定用户最喜欢的视频。对于Owen，最好的方法可能是对所有
是这样一个缩写词。REST的思想
YouTube视频完成一个关键字搜索。不同类型的视频REST请求所需的URL
是Web资源应当通过唯一的链接来
稍有不同，不过基URL的开头部分总是如下：
访问，这说明只能构建一个相应的
URL来访问“REST”数据。对于