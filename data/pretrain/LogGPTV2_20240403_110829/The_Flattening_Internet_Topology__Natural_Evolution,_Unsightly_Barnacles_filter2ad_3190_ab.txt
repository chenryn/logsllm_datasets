s
oft
r
a
fotolo
fa
c
pid
b
aid
e
g
b
u
s
h
o
o
k
a
r
e
a
d
g
o
m
m
o
e
g
gle
hi5
ic
r
o
u
s
a
plo
oft
a
d
w
y
y
a
a
sin
h
h
q
y
q
o
a
ikip
o
o
m
y
b
frie
fa
c
n
aid
r
a
fotolo
pid
b
e
u
d
p
s
utu
e
o
dia
o.jp
b
a
e
c
e
o
ste
r
o
k
s
h
g
a
r
e
m
m
m
g
o
y
a
ic
r
o
o
gle
h
o
y
s
p
o
s
oft
y
o
frie
e
n
g
d
a
a
c
e
ste
r
utu
plo
a
d
fa
c
w
ikip
e
b
hi5
y
a
u
b
o
e
e
o
k
dia
h
o
o.jp
(a)
(b)
(c)
Fig. 1. Comparison of Network Paths to Top Sites: (a) Average Tier 1 Hops per Path;
(b) Number of Paths with No Tier 1 Hops; (c) Connectedness of Each Site
Microsoft, the parent companies. Although Google has recently acquired YouTube,
traﬃc for YouTube has not yet (completely) migrated to Google’s network. Thus
for our study, we consider YouTube separately from Google. Also, Yahoo! Japan
has a unique AS number, so we consider it separately from Yahoo!.
Figure 1 shows the results for three of our metrics. Figure 1(a) shows the average
number of hops on a Tier-1 network, for each of the sites. The most notable obser-
vation is that our traceroute probes traversed signiﬁcantly more Tier-1 hops on
average for some sites than for others. The more established “big three” content
providers (Microsoft, Yahoo!, Google) were among those with the lowest averages.
Figure 1(b) shows the number of (traceroute) paths to each site that contained
no Tier-1 hops. For some content providers, including the “big three”, 60% (30
paths out of 50) or more contained no Tier-1 hops. Figure 1(c) examines the de-
gree of connectedness for each of the content providers that have their own AS
number. This graph reveals a clear distinction between the “big three” and the
other content providers. Our traceroute results show that Microsoft connect to
at least 24 diﬀerent ASes, Google to at least 23, and Yahoo! to at least 18. The
next highest is MySpace, at only six. Some paths included IP addresses that we
were unable to map to an AS number. For these IP addresses only, we used the
organization identiﬁer (OrgID) as retrieved from the corresponding Internet reg-
istry. This method enabled us to identify an additional three connection points for
Microsoft (27 in total), four for Google (27), and two for Yahoo! (20). The only
other content provider aﬀected by this issue was Yahoo! Japan.
Figure 2 shows the geographic distribution of entry points into the WANs
of selected content providers. Figure 2(a) shows the location of entry points
across the U.S. The ﬁgure reveals that Microsoft, Google, and Yahoo! all have
networks that span the country. The entry points appear to be located (as one
would expect) in large centers where carrier hotels or Internet Exchanges exist.
Google has the most extensive (live) WAN of any of the content providers we
examined. Entry points into Google’s WAN are shown in Figure 2(b). Our probes
entered the Google network in 10 diﬀerent North American cities, as well as four
European, two Asian, and one South American location.
Other than the “big three”, we did not detect any other content providers with
large network infrastructures. For example, we only saw Facebook connect
The Flattening Internet Topology
7
MySpace
MySpace
Limelight
Limelight
Fig. 2. (a) Location of network end-points in the United States for selected content
providers. (b) Our measurement of Google’s current WAN.
to ISPs in the San Francisco Bay area. We did, however, observe several things
that suggest others are rolling out WAN infrastructures, in diﬀerent ways. First,
MySpace is peered with ISPs in two separate locations (Los Angeles and Chicago),
and appears to partner with Limelight Networks, a Content Delivery Network, to
reach other locations. Of 14 probes we sent from European traceroute servers to
MySpace, eight entered the Limelight network in Europe (in Amsterdam, Frank-
furt, or London), which entered Limelight’s U.S. network in New York. Six other
probes from diﬀerent locations traversed the Limelight network in the U.S., before
reaching MySpace. Second, YouTube (recently acquired by Google) appears to
peer with numerous ISPs around the U.S. (We also noticed signs that YouTube’s
traﬃc is migrating to Google’s infrastructure.)
5 Discussion
In this section we consider the potential ramiﬁcations of the identiﬁed trends.
We discuss these from the perspectives of content providers, users, and ISPs.
If content providers build extensive network infrastructures, they could reap a
number of beneﬁts. In particular, they could gain greater control over network-
related issues that aﬀect their business. They could deploy applications that
have been stymied by the “Internet Impasse”. For example, there are reports
that Google will deploy (or has deployed) computation and storage resources at
the edge of their network [4]. This could enable Google to provide true video
on-demand, and participate in the cable television market. Similarly, they would
reduce their reliance on external providers, who might wish to compete against
them. There are also many disadvantages. Perhaps the most signiﬁcant is the
cost of deploying, operating and maintaining the infrastructure. Although a few
large content providers may have the funds to attempt this, it will be diﬃcult
for a large number to follow. In addition, as large content providers move their
traﬃc oﬀ the (shared) Internet, small content providers may be faced with larger
bills, if ISPs need to recover lost revenues. These issues may lead other content
providers to re-examine cost/control tradeoﬀs; e.g., using VPNs rather than
deploying physical networks.
8
P. Gill et al.
Users could beneﬁt from this trend in several ways. First, these “private”
networks may provide better quality of service than the existing Internet, since
the content providers could optimize their networks for the applications and
services they provide. Second, users may get access to new applications and
services much sooner than if they need to wait for a large number of ISPs to
agree on a common set of supporting technologies to deploy. Over the long term,
however, users could suﬀer if small content providers are unable to survive, as
creativity may be stiﬂed and the variety of content may decrease as a result.
Tier-1 ISPs may notice the greatest changes from this trend. In particular,
if this trend becomes widely adopted, Tier-1 ISPs may need to adapt (e.g.,
vertically integrate, oﬀer content services of their own, or implement new net-
work functionalities that content providers desire, such as IP multicast), or face
bankruptcy as revenue dries up. However, since large content providers are un-
likely to carry transit traﬃc, the need for Tier-1 ISPs may not disappear. In fact,
a possible (and counter-intuitive) side-eﬀect of large content providers moving
their traﬃc to private networks is lower costs for Tier-1 ISPs, as they may not
need to increase the capacity of their networks as often (assuming large con-
tent providers are responsible for a signiﬁcant fraction of the volume of Internet
traﬃc). At the “bottom” of the hierarchy, competing with the “last-mile” ISPs
(Tier-3) is unlikely to be attractive to content providers, as the last-mile is ex-
pensive to install, and the Return-On-Investment (ROI) relatively low. However,
nothing should be assumed; Google recently qualiﬁed to bid on wireless spectrum
in the United States, which could be interpreted as an initial step in providing
last-mile wireless Internet service.
Our data suggests that the Internet topology is becoming ﬂatter, as large con-
tent providers are relying less on Tier-1 ISPs, and peering with larger numbers
of lower tier ISPs. Content providers are clearly exploring an alternative; only
time will determine if this “mutation” becomes the new “norm”, or an “abomi-
nation” which will eventually die oﬀ. However, this remains a hypothesis, as our
results provide only two certain answers: (1) several large content providers are
indeed deploying their own networks, and (2) it will be necessary to perform a
more rigorous and longitudinal study to determine whether this trend is a short
term barnacle (e.g., as inexpensive dark ﬁber disappears, will the trend end?),
a slow, but certain evolution of the Internet (e.g., if greater peering between
content providers and small ISPs occurs, the Internet topology could ﬂatten), or
a contrived collapse (e.g., content providers cunningly defending their territory
against ISPs who wish to move into seemingly more proﬁtable content services).
6 Related Work
Our interest in this topic was piqued by an article on a telecom news site [17].
This article stated that Google is building a massive WAN, and speculated that
other large “Internet players” are likely doing the same. Thus, we wanted to
determine if companies like Google have operational WANs, and if so, how large
they are.
The Flattening Internet Topology
9
We are not aware of any work that has examined this speciﬁc trend. However,
there are numerous prior works on tools, methodologies, or Internet topology
measurements that we leveraged, or could leverage in future work, to answer the
questions of interest to us. We describe some of the most relevant works below.
In this study we utilized traceroute; however, it has a number of known
weaknesses [5]. Tools such as tcptraceroute [22] or Paris Traceroute [2] could
be used in conjunction with PlanetLab to address these known limitations of
traceroute. Sherwood and Spring propose additional methods for addressing
these weaknesses [18].
The closest work to our own is Rocketfuel, which created router-level ISP
topology maps [19]. A key diﬀerence is their paper focused on mapping the net-
work topologies for speciﬁc ISPs, while we are interested in the network topolo-
gies for speciﬁc content providers. Spring et al. also proposed scriptroute, a sys-
tem to conduct network measurements from remote vantage points [20]. Given
the similarity in objectives, we will likely revisit Rocketfuel and scriptroute in the
future. Additionally, scalability and eﬃciency of collection will be important for
larger and repeated data collection eﬀorts. Donnet et al. [8] and Dimitropoulos et
al. [7] have investigated these issues for topology discovery.
A number of papers have discussed the need to evolve the Internet architec-
ture, and proposed ways in which change could be enabled within the current
(static) architecture [3,15,16]. In this paper, we examine a change that is occur-
ring in the Internet architecture. Depending on how this change is viewed (e.g.,
is it a fundamental shift, or just an unsightly barnacle), it may be necessary to
revisit the predictions of what the future Internet will look like.
7 Conclusions
In this paper, we utilized an active measurement (traceroute-based) approach
to demonstrate that large content providers are deploying their own WANs.
We show that established companies such as Google, Microsoft, and Yahoo!
already have sizable WAN infrastructures, and ﬁnd that some smaller (but very
popular) content providers appear to be following their lead. While there are
many possible motivations for this trend, we believe it is more important to
consider the potential ramiﬁcations. Speciﬁcally, it could alter the way in which
the Internet operates, either (eventually) eliminating the need for Tier-1 ISPs,
or forcing such ISPs to evolve their businesses. Network researchers also need
to understand whether this is a long or short term trend, as it will aﬀect the
importance of research topics.
Signiﬁcant work remains to be done on this topic. Increasing the breadth of
the study, conducting a longitudinal study, and considering alternative metrics
are some of the dimensions of our future work.
Acknowledgements. The authors greatly appreciate the providers of the pub-
lic traceroute servers as well as the feedback of Bala Krishnamurthy, Dejan
Milojicic, Jeﬀ Mogul, Carey Williamson and the anonymous reviewers.
10
P. Gill et al.
References
1. Alexa’s Top 500 Sites, http://www.alexa.com/site/ds/top 500
2. Augustin, B., Cuvellier, X., Orgogozo, B., Viger, F., Latapy, M., Teixeira, R.:
Avoiding Traceroute Anomalies with Paris Traceroute. In: Internet Measurement
Conference, Rio de Janeiro, Brazil (2006)
3. Clark, D., Wroclawski, J., Sollins, K., Braden, R.: Tussle in Cyberspace: Deﬁning
Tomorrow’s Internet. In: ACM SIGCOMM, Pittsburgh, PA (2002)
4. Cringely, R.: Google-Mart: Sam Walton Taught Google More About How to Dom-
inate the Internet than Microsoft Ever Did (November 17, 2005),
http://www.pbs.org/cringely/pulpit/2005/pulpit 20051117000873.html
5. Crovella, M., Krishnamurthy, B.: Internet Measurement: infrastructure, traﬃc &
applications. Wiley & Sons, Ltd., West Sussex, England (2006)
6. Data Center Knowledge Web site, http://www.datacenterknowledge.com/
7. Dimitropoulos, X., Krioukov, D., Riley, G.: Revisiting Internet AS-level Topology
Discovery. In: Passive and Active Measurement, Boston, MA (2005)
8. Donnet, B., Friedman, T., Crovella, M.: Improved Algorithms for Network Topol-
ogy Discovery. In: Passive and Active Measurement, Boston, MA (2005)
9. Hu, N., Steenkiste, P.: Quantifying Internet End-to-End Route Similarity. Passive
and Active Measurement, Adelaide, Australia (2006)
10. Internet World Statistics (statistics from June 30, 2007),
http://www.internetworldstats.com/
11. Kurose, J., Ross, K.: Computer Networking: A Top Down Approach. Addison
Wesley, Boston, MA (2008)
12. Mehta, S.: Behold the server farm. Fortune magazine (July 26, 2006),
http://money.cnn.com/2006/07/26/magazines/fortune/futureoftech
serverfarm fortune/
13. Norton, W.: The Evolution of the U.S. Internet Peering Ecosystem. Equinox White
Paper (2003)
14. Norton, W.: A Business Case for ISP Peering. Equinox White Paper (2001)
15. Peterson, L., Shenker, S., Turner, J.: Overcoming the Internet Impasse through
Virtualization. IEEE Computer (April 2005)
16. Ratnasamy, S., Shenker, S., McCanne, S.: Towards an Evolvable Internet Archi-
tecture. In: ACM SIGCOMM, Philadelphia, PA (August 2005)
17. Raynovich, R.: Google’s Own Private Internet,
http://www.lightreading.com/document.asp?doc id=80968
18. Sherwood, R., Spring, N.: Touring the Internet in a TCP Sidecar. In: Internet
Measurement Conference, Rio de Janeiro, Brazil (2006)
19. Spring, N., Mahajan, R., Wetherall, D.: Measuring ISP Topologies with Rocketfuel.
In: ACM SIGCOMM, Pittsburgh, PA (August 2002)
20. Spring, N., Wetherall, D., Anderson, T.: Scriptroute: A Public Internet Measure-
ment Facility. In: USENIX Symposium on Internet Technologies and Systems
(USITS), Seattle, WA (March 2003)
21. Team Cymru IP to ASN Lookup page,
http://www.cymru.com/BGP/asnlookup.html
22. Toren, M.: tcptraceroute, http://michael.toren.net/code/tcptraceroute/
23. Wikipedia article, Tier 1 network,
http://en.wikipedia.org/wiki/Tier 1 network