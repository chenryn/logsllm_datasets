evaluation has carefully dealt with exceptions (such as
clients occasionally being directed to distant frontends.
If we accept these assumptions, our maps allow us to
exploit Google’s understanding of network topology and
user placement to improve other datasets. Prior work
has used Akamai to chose detour routes [31]; we believe
our mapping can improve geolocation, peer selection,
and AS classiﬁcation.
Geolocation is a much studied problem [11, 10, 14],
and availability of ground truth can greatly improve
results. With clients accessing Google from mobile de-
vices and computers around the world, Google has ac-
cess to ample data and measurement opportunity to
gather very accurate client locations. An interesting fu-
ture direction is to infer preﬁx location from our EDNS-
client-subnet observations, and use that coarse data to
re-evaluate preﬁxes that existing datasets (such as Max-
Mind) place in very diﬀerent locations. The end result
would be either higher accuracy geolocation or, at least,
identiﬁcation of preﬁxes with uncertain locations.
Researchers designed a BitTorrent plugin that would
direct a client to peer with other users the plugin deemed
to be nearby, because the potential peer received simi-
lar CDN redirections as the client’s [7]. However, with
the existing plugin, the client can only assess similarity
of other users of the plugin who send their CDN fron-
tend mappings. Just as we used EDNS-client-subnet
to obtain mappings from arbitrary preﬁxes around the
world, we could design a modiﬁed version of the plugin
that would allow a client to assess the nearness of an
arbitrary potential peer, regardless of whether the peer
uses the plugin or not. By removing this barrier, the
modiﬁed plugin would be much more widely applicable,
and could enhance the adoption of such plugins.
Finally, in Section 6.2, we showed that 90% of pre-
ﬁxes served in ASes other than Google are within the
customer cone of their serving AS. The remaining 10%
of preﬁxes likely represent problems with either our IP-
to-AS mapping [13] or with the customer cone dataset
we used [18]. From talking to the researchers behind
that work and sharing our results with them, it may
be necessary to move to preﬁx-level cones, to accom-
modate the complex relationships between ASes in the
Internet. The client-to-frontend data we generate could
help resolve ambiguities in AS relationships and lead to
better inference in the future.
Calibrating Other Measurements. Our studies of
Google combine observations using EDNS-client-subnet
and open recursive resolvers. Not all providers support
EDNS-client-subnet, however.
In Section 5.1, we demonstrated that even using hun-
dreds of thousands of open recursive DNS resolvers would
miss discovering much of Google’s infrastructure that
we uncover using EDNS-client-subnet. We next con-
sider how we can use our results from Google to project
results for other providers that support only open re-
solvers.
To explore the feasibility of this projection, Figure 12
depicts the number of Google IP addresses discovered as
we issue additional measurements. We select one open
recursive resolver from each /24 in which we know of
at least one resolver (there are 110,000 such preﬁxes).
Then, we select one of these /24s at a time and resolve
www.google.com from the open resolver in the preﬁx
and via an EDNS-client-subnet query for that preﬁx.
The ﬁgure depicts the growth in the number of Google
frontend IP addresses discovered by the two approaches
(min, mean, and max over 1000 trials). As seen in the
ﬁgure, using resolvers in a set of preﬁxes yields very
12
number of serving sites doubled, and we see Google de-
ploying satellite frontends around the world, in many
cases distant from any known Google datacenters. By
continuing to map Google’s and others’ serving infras-
tructures, we will watch the evolution of these key en-
ablers of today’s Internet, and we expect the accurate
maps to enable future work by us and others to under-
stand and improve content delivery on a global scale.
10. REFERENCES
[1] Vijay Kumar Adhikari, Sourabh Jain, Yingying
Chen, and Zhi-Li Zhang. Vivisecting YouTube:
An active measurement study. In INFOCOM,
2012 Proceedings IEEE, pages 2521–2525. IEEE,
2012.
[2] Bernhard Ager, Wolfgang M¨uhlbauer, Georgios
Smaragdakis, and Steve Uhlig. Web content
cartography. In Proc. of ACM Intermet
Measurement Conference, pages 585–597, Berlin,
Germany, November 2011. ACM.
[3] Mihael Ankerst, Markus M. Breunig, Hans-peter
Kriegel, and J¨org Sander. OPTICS: Ordering
points to identify the clustering structure. In
ACM SIGMOD international conference on
Management of data, pages 49–60, Philadelphia,
PA, USA, June 1999. ACM.
[4] Karyn Benson, Rafael Dowsley, and Hovav
Shacham. Do you know where your cloud ﬁles
are? In Proc. of Cloud Computing Security
Workshop, pages 73–82, Chicago, Illinois, USA,
October 2011. ACM.
[5] Meeyoung Cha, Haewoon Kwak, Pablo
Rodriguez, Yong-Yeol Ahn, and Sue Moon. I
Tube, You Tube, Everybody Tubes: Analyzing
the World’s Largest User Generated Content
Video System. In Proceedings of the 7th ACM
SIGCOMM conference on Internet measurement,
pages 1–14. ACM, 2007.
[6] Yingying Chen, Sourabh Jain, Vijay Kumar
Adhikari, and Zhi-Li Zhang. Characterizing roles
of front-end servers in end-to-end performance of
dynamic content distribution. In Proceedings of
the 2011 ACM SIGCOMM conference on Internet
measurement conference, pages 559–568. ACM,
2011.
[7] David Choﬀnes and Fabian E. Bustamante.
Taming the torrent: A practical approach to
reducing cross-ISP traﬃc in peer-to-peer systems.
In SIGCOMM, pages 363–374, Seattle, WA, USA,
October 2008.
[8] C. Contavalli, W. van der Gaast, S. Leach, and
E. Lewis. Client subnet in dns requests, April
2012. Work in progress (Internet draft
draft-vandergaast-edns-client-subnet-01).
[9] Xenofontas Dimitropoulos, Dmitri Krioukov,
Figure 12: The relation between number of Google
IP addresses discovered and the number of vantage
points. Using one open resolver per /24 block and
one EDNS query per /24 block.
similar numbers of frontend IPs to issuing EDNS-client-
subnet queries for that same set of preﬁxes, so that the
beneﬁt of EDNS-client-subnet is primarily that we can
issue queries for many more preﬁxes than we have access
to resolvers in.
This suggests that we may be able to extrapolate
these growth curves to understand the impact of hav-
ing more resolvers. To test this theory, we ﬁt power
law curves to the open resolver lines (R = 0.97 in all
cases). We project that access to resolvers in all 10M
routable /24 preﬁxes, predicting discovery of 6990–8687
IP addresses of Google frontend servers. Using EDNS-
client-subnet queries for these 10M preﬁxes, we found
8563 IP addresses, within the range, suggesting that
the extrapolation approach may be reasonable. In the
future, we plan to apply it to predict the size of Aka-
mai and other infrastructures that do not yet support
EDNS-client-subnet.
9. CONCLUSIONS
As the role of interactive web applications contin-
ues to grow in our lives, and the mobile web pene-
trates remote regions of the world more than wired
networks ever had, the Internet needs to deliver fast
performance to everyone, everywhere, at all times. To
serve clients around the work quickly, service providers
deploy globally distributed serving infrastructure, and
we must understand these infrastructures to understand
how providers deliver content today. Towards that goal,
we developed approaches speciﬁc to mapping these serv-
ing infrastructures. By basing our techniques around
how providers architect their infrastructures and guard-
ing our techniques against noisy data, we are able to
accurately map the geographically-distributed serving
sites.
We apply our techniques to mapping Google’s serving
infrastructure and track its rapid expansion over the pe-
riod of our measurement study. During that time, the
13
 500 1000 1500 2000 2500 3000 3500 4000 4500 0 20000 40000 60000 80000 100000Number of Google IP addressesNumber of vantage points (one per /24)resolver minresolver maxresolver meanEDNS with resolver /24s minEDNS with resolver /24s maxEDNS with resolver /24s meanMarina Fomenkov, Bradley Huﬀaker, Young
Hyun, k. c. claﬀy, and George Riley. AS
relationships: Inference and validation. ACM
Computer Communication Review, 37(1):29–40,
January 2007.
[23] John S. Otto, Mario A. S´anchez, John P. Rula,
and Fabi´an E Bustamante. Content delivery and
the natural evolution of DNS. In Proc. of ACM
Intermet Measurement Conference, Boston,
Massachusetts, USA, November 2012. ACM.
[10] Bamba Gueye, Artur Ziviani, Mark Crovella, and
[24] Venkata N. Padmanabhan and Lakshminarayanan
Serge Fdida. Constraint-based geolocation of
Internet hosts. IEEE/ACM TON,
14(6):1219–1232, December 2006.
[11] Zi Hu and John Heidemann. Towards geolocation
of millions of IP addresses. In Proc. of ACM
Intermet Measurement Conference, pages
123–130, Boston, MA, USA, 2012. ACM.
[12] Cheng Huang, Angela Wang, Jin Li, and Keith W.
Ross. Measuring and evaluating large-scale CDNs.
Technical Report MSR-TR-2008-106, Microsoft
Research, October 2008.
[13] iPlane. http://iplane.cs.washington.edu.
[14] Ethan Katz-Bassett, John P. John, Arvind
Krishnamurthy, David Wetherall, Thomas
Anderson, and Yatin Chawathe. Towards IP
geolocation using delay and topology
measurements. In IMC, pages 71–84, 2006.
[15] Rupa Krishnan, Harsha V. Madhyastha, Sridhar
Srinivasan, Sushant Jain, Arvind Krishnamurthy,
Thomas Anderson, and Jie Gao. Moving beyond
end-to-end path information to optimize CDN
performance. In IMC, 2009.
[16] Ang Li, Xiaowei Yang, Srikanth Kandula, and
Ming Zhang. Cloudcmp: comparing public cloud
providers. In Proc. of ACM Intermet
Measurement Conference, pages 1–14. ACM, 2010.
Subramanian. An investigation of geographic
mapping techniques for Internet hosts. In Proc.
ofACM SIGCOMM, pages 173–185, San Diego,
California, USA, August 2001. ACM.
[25] Abhinav Pathak, Y. Angela Wang, Cheng Huang,
Albert Greenberg, Y. Charlie Hu, Randy Kern,
Jin Li, and Keith W. Ross. Measuring and
evaluating TCP splitting for cloud services. In
PAM, 2010.
[26] William M Rand. Objective criteria for the
evaluation of clustering methods. Journal of the
American Statistical association, 66(336):846–850,
1971.
[27] Amir H Rasti, Nazanin Magharei, Reza Rejaie,
and Walter Willinger. Eyeball ASes: from
geography to connectivity. In Proceedings of the
10th ACM SIGCOMM conference on Internet
measurement, pages 192–198. ACM, 2010.
[28] Steve Souders. High-performance web sites.
Communications of the ACM, 51(12):36–41,
December 2008.
[29] Neil Spring, Ratul Mahajan, and David
Wetherall. Measuring ISP topologies with
Rocketfuel. ACM SIGCOMM Computer
Communication Review, 32(4):133–145, 2002.
[30] Stoyan Stefanov. Yslow 2.0. In CSDN SD2C,
[17] Greg Linden. Make data useful.
2008.
http://sites.google.com/site/glinden/
Home/StanfordDataMining.2006-11-28.ppt,
2006.
[18] M. Luckie, B. Huﬀaker, A. Dhamdhere,
V. Giotsas, and k claﬀy. AS Relationships,
Customer Cones, and Validation. submitted to
IMC 2013.
[19] Harsha V. Madhyastha, Tomas Isdal, Michael
Piatek, Colin Dixon, Thomas Anderson, Arvind
Krishnamurthy, and Arun Venkataramani. iPlane:
An information plane for distributed services. In
OSDI, 2006.
[20] Z. M. Mao, C. D. Cranor, F. Douglis,
M. Rabinovich, O. Spatscheck, and J Wang. A
Precise and Eﬃcient Evaluation of the Proximity
Between Web Clients and their Local DNS
Servers. USENIX Annual Technical Conference,
pages 229–242, 2002.
[21] MaxMind.
http://www.maxmind.com/app/ip-location/.
[22] David Meyer. RouteViews.
http://www.routeviews.org.
[31] Ao-Jan Su, David R. Choﬀnes Aleksandar
Kuzmanovic, and Fabi’an E. Bustamante.
Drafting behind Akamai (Travelocity-based
detouring). In Proc. ofACM SIGCOMM, pages
3–14, Pisa, Italy, September 2006. ACM.
[32] Ruben Torres, Alessandro Finamore, Jin Ryong
Kim, Marco Mellia, Maurizio M Munafo, and
Sanjay Rao. Dissecting video server selection
strategies in the YouTube CDN. In 31st
International Conference on Distributed
Computing Systems (ICDCS), pages 248–257.
IEEE, 2011.
[33] UCLA Internet topology collection.
http://irl.cs.ucla.edu/topology/.
[34] Qiang Xu and Jaspal Subhlok. Automatic
clustering of grid nodes. In Proc. of6th IEEE
International Workshop on Grid Computing.
IEEE, November 2005.
[35] Yaping Zhu, Benjamin Helsley, Jennifer Rexford,
Aspi Siganporia, and Sridhar Srinivasan.
LatLong: Diagnosing wide-area latency changes
for CDNs. IEEE Transactions on Network and
14
Service Management, 9(1), September 2012.
15