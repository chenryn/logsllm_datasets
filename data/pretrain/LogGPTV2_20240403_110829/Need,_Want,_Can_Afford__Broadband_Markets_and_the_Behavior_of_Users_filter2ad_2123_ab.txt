capacity generates more traﬃc. If so, our hypothesis holds
true for that pair. After testing this for each pair of
similar users, we calculate the percentage of times that our
hypothesis is correct.
If neither of the two variables under study – in this
example, capacity and demand – have an impact on the
other, then their interaction would be random.
In our
example this would mean, for instance, that lower capacity
will result in lower (or higher) demand about 50% of the
time. Signiﬁcant deviations from this would suggest that a
causal relationship is likely to exist between the two.
We use the one-tailed binomial test to measure the
statistical signiﬁcance of deviations from the expected dis-
tribution. As is common in many study designs, we consider
a p-value that is less than 0.05 to be a strong presumption
10-1100101102103Capacity (Mbps)0.00.20.40.60.81.0CDF of users100101102103Latency (ms)0.00.20.40.60.81.0CDF of users10-410-310-210-1100101Packet loss rate (%)0.00.20.40.60.81.0CDF of users75(a) Mean
w/ BT
(r = 0.870)
(b) 95th %ile
w/ BT
(r = 0.913)
(c) Mean
no BT
(r = 0.885)
(d) 95th %ile
no BT
(r = 0.890)
Figure 2: Volume of download traﬃc generated by users versus their download link capacity. Users are
grouped by their download capacity and each bin is averaged. The error bars represent the 95% conﬁdence
interval of the mean. In each case, usage is strongly correlated with link capacity.
against the null hypothesis (H0). One potential issue with
our application of the binomial test in this context is the
known problem that given a large enough dataset, the test
will consider even minor deviations to be signiﬁcant. That
is, with a large enough sample of throws, an unbiased coin
could fail to pass a χ2 test for ﬁtting the predicted binomial
distribution [26]. To account for this issue, we only consider
deviations larger than 2% to be practically important. In
other words the hypothesis holds at least 52% of the time.
3.
IMPACT OF CAPACITY
The interplay between broadband service characteristics
and user demand is complex [36]. For instance, while
subscribers cannot directly aﬀect the cost of their service,
they have some freedom in choosing what package (capacity)
they purchase and how much traﬃc they generate. On the
other hand, although they come with needs and budgets
when choosing a broadband plan, once acquired, their usage
patterns are shaped by their selection.
In addition, there
is the potential impact of seemingly irrational and biased
choices by subscribers [16, 32] that complicates any attempt
at understanding and analytical modeling of the drivers
of users’ choices and demand. While we (or even most
customers [17]) may not know the advertised service of a
broadband connection, our study focuses on the impact of
the actual maximum capacity provided to the user.
In this section, we begin to empirically explore the
complex interactions between broadband service market
features and user behavior by ﬁrst studying the eﬀects of
capacity on user demand. When appropriate, we compare
data collected from end hosts (via Dasu) and residential
gateways (FCC/SamKnows).
3.1 Capacity vs. usage
We ﬁrst explore the relationship between access link
capacity and the demand users generate on the access
network. To describe user demand, we rely on two metrics
of usage: the average and peak volume of traﬃc generated.
We deﬁne peak as the 95th-percentile value of the time series
(sampled every 30-secs) of downlink demand for each user.
Figure 2 presents both the mean and peak demand, for
diﬀerent classes of users based on their measured downlink
capacity. Given the range of services across the diﬀerent
markets we analyze, we split services into ten classes where
every user in class (k) has a download capacity in the range
of (100Kbps ∗ 2k−1, 100Kbps ∗ 2k]. We analyze usage both
throughout the entire measurement period (Fig. 2a and 2b)
and during periods when users are not actively uploading or
downloading content on BitTorrent (Fig. 2c and 2d).
We also contrast Dasu’ end-host collected data with that
of users in the FCC study (gateway collected data), looking
both at average and peak network usage. Figure 3 shows the
mean and peak (95th percentile) demand of users, grouped
by capacity, in the FCC and US-based Dasu dataset (when
not using BitTorrent). Although the average usage is slightly
higher for Dasu users, the peak usage is nearly identical for
both groups. The diﬀerence in average demand is likely due
to the fact that the FCC data is collected evenly throughout
the 24-hour period, while Dasu usage (and thus our data) is
partially biased towards peak usage hours.
We ﬁnd that usage grows with capacity, as the plots of
Fig. 2 and 3 clearly show. This is despite the fact that users
rarely utilize their link (even at the 95th percentile, average
utilization ranges between 10 and 48%). For both mean and
95th percentile usage, with and without BitTorrent traﬃc,
we ﬁnd that usage is strongly correlated with the group’s
link capacity (r ≥ 0.87 for each).
Figure 2 also show that as capacity increases, usage
begins to level oﬀ (related to the ﬁndings in Sundaresan et
al. [34]). This would suggest that the relationship follows a
law of diminishing returns: the relative increase in demand
is greater for lower capacity connections than for higher
capacity connections.
3.2 Inferring causality
While the access capacity and the demand users generate
are strongly correlated, inferring the causality between these
variables is signiﬁcantly more challenging. For instance,
demand might drive capacity (i.e. users sign up for faster
services because they have access to applications with higher
bandwidth needs, such as HD video streaming) or be driven
by it, with users changing their behavior when given a higher
10-1100101102Download capacity (Mbps)10-210-1100101Usage (Mbps)10-1100101102Download capacity (Mbps)10-210-1100101Usage (Mbps)10-1100101102Download capacity (Mbps)10-210-1100101Usage (Mbps)10-1100101102Download capacity (Mbps)10-210-1100101Usage (Mbps)76(a) Mean
(r = 0.915)
(b) 95th %ile
(r = 0.905)
(a) Mean
Figure 3: Mean and peak (95th percentile)
download traﬃc generated for FCC gateway users
and Dasu users within the US when not using
BitTorrent. The error bars represent the 95%
conﬁdence interval of the mean.
Metric
% H holds
Average usage
Peak usage
66.8%
70.3%
p-value
1.94 × 10−25
1.13 × 10−36
Table 1: Percentage of the time that an individual
user’s average and peak demand will increase when
moving to a network with a higher capacity. In both
cases, the control group is their behavior on the
slower network and the treatment is their behavior
on the faster network.
capacity and generating a higher demand. Additionally,
there may be other factors that aﬀect user demand such
as the quality of the connection or the price of access.
To explore a causal relationship between access capacity
and demand, we ﬁrst design a natural experiment to see
if the behavior of individual users changes when switching
between networks of diﬀerent capacities. This let us test
the idea that when given a higher capacity link, users will
increase their demand on the network. We then compare
the demand of users that are similar in terms of price of
broadband access, cost to upgrade, and link quality but
diﬀer in terms of service capacity.
User upgrades. To determine if their relationship
between capacity and demand is causal, we need to account
for diﬀerences in usage patterns between diﬀerent users. We
do this by looking at how individual users change their
network demand when switching to faster services, allowing
us to determine if the relationship between capacity and
demand is likely causal.
Figure 4 presents the CDFs of mean and peak download
link usage for users switching between a ”slow” and ”fast”
network. Both average and peak volume of traﬃc are when
the client is not active on BitTorrent. Each network is
identiﬁed by a tuple (ISP name, network preﬁx, geolocated
city). For both average and peak demand, we see that usage
tends to be considerably higher on the faster network. For
example, at the median, average usage doubles from 95 kbps
to 189 kbps and peak usage (95th percentile) more than
triples, from 192 kbps to 634 kbps.
(b) 95th %ile
Figure 4: CDFs of the mean and peak download
link usage for individual users on “slow” and “fast”
networks when not using BitTorrent.
To validate this assertion we use a natural experiment.
Our hypothesis (H) is that when a user moves from a slower
to a faster service, demand will increase. As such, our null
hypothesis (H0) is that demand will not be aﬀected by a
change in capacity. We test this assertion for both the mean
and peak demand and present our results in Table 1. As the
table shows, our original hypothesis (H), is true 66.8% of
the time when comparing average demand and 70.3% of the
time for peak demand. For both metrics, we ﬁnd very small
p-values, leading us to reject the null hypothesis (H0) that
capacity does not aﬀect the demand of individual users.
For these analysis we limit our data to that collected while
the users were not generating BitTorrent traﬃc. Including
BitTorrent traﬃc, we ﬁnd an even higher increase in usage,
and so is the percentage of the time that our hypothesis
holds true. This is likely due to the fact that users are more
likely to saturate their link for extended periods of time
when using BitTorrent [9].
Impact of switching services. To further understand
the interaction between capacity and demand, we explore
the impact of service upgrades on demand, for diﬀerent
initial capacities of connections. Figure 5 shows the average
change in demand, grouping upgrades by the “before” and
“after” download capacities. The labels on the x-axis
represent the capacity range of the initial service and each
bar is the average change in demand when switching to a
faster service in the respective capacity tier.
As the ﬁgure shows,
for each metric, demand clearly
increases when upgrading from slower services, particularly
when looking at peak (95th percentile) usage. Increases in
10-1100101102103Capacity (Mbps)10-310-210-1100101Usage (Mbps)FCCDasu US10-1100101102103Capacity (Mbps)10-210-1100101Usage (Mbps)FCCDasu US10-310-210-1100101102Usage (Mbps)0.00.20.40.60.81.0CDF of usersSlow networkFast network10-310-210-1100101102Usage (Mbps)0.00.20.40.60.81.0CDF of usersSlow networkFast network77Control
Group
(in Mbps)
(0.1, 0.2]
(0.2, 0.4]
(0.4, 0.8]
(0.8, 1.6]
(1.6, 3.2]
(3.2, 6.4]
(6.4, 12.8]
(12.8, 25.6]
(25.6, 51.2]
Control
Group
(in Mbps)
(0.4, 0.8]
(0.8, 1.6]
(1.6, 3.2]
(3.2, 6.4
(6.4, 12.8]
(12.8, 25.6]
(25.6, 51.2]
Dasu data
Treatment
Group
(in Mbps)
(0.2, 0.4]
(0.4, 0.8]
(0.8, 1.6]
(1.6, 3.2]
(3.2, 6.4]
(6.4, 12.8]
(12.8, 25.6]
(25.6, 51.2]
(51.2, 102.4]
% H holds
p-value
75.2%
63.4%
59.9%
59.3%
53.3%
57.5%
56.8%*
52.9%*
51.0%*
5.81 × 10−11
2.21 × 10−7
8.01 × 10−8
1.11 × 10−8
0.0166
0.00707
0.0583
0.310
0.462
FCC data
Treatment
Group
(in Mbps)
(0.8, 1.6]
(1.6, 3.2]
(3.2, 6.4]
(6.4, 12.8]
(12.8, 25.6]
(25.6, 51.2]
(51.2, 102.4]
% H holds
p-value
66.4%
58.1%
56.2%
55.1%
58.5%
61.2%
64.7%
0.000223
4.70 × 10−05
0.000487
0.00236
2.54 × 10−7
6.76 × 10−17
0.00161
Table 2: Percentage of the time that increased
capacity will
increase demand when comparing
similar users and each experiment’s corresponding
p-value. An asterisk denotes that a result was not
statistically signiﬁcant.
demand are less consistent when switching between already
fast services, particularly above 16 Mbps, where there is
a large variance on demand growth with capacity.
In
some cases, the large range in the 95% conﬁdence interval
shows that the upgrade likely had no signiﬁcant impact on
usage. These ﬁndings suggest that while capacities do drive
demand, this is only true up to a certain point.
All users. We expand our comparison to all users in the
datasets and use a matching study design to test the impact
of increased capacity. As before, we place users into one
of k bins, where k = (100Kbps ∗ 2k−1, 100Kbps ∗ 2k]. We
then compare the usage of users in bins k and k + 1. Our
hypothesis (H) is that users in the “treated” group, k+1, will
have a higher demand on the network due to their increased
capacity. Our null hypothesis (H0) is that the relationship
is random and increased capacity will not result in higher
demand.
To compare users from each group, however, we must en-
sure that each pair of users is similar in terms of connection
quality (packet loss and latency), price of broadband access,
and cost to upgrade capacity. For this and the remaining
studies, we use nearest neighbor matching to pair similar