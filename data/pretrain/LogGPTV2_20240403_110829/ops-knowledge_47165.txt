User: How to use Docker to containerize a PHP website and access it through NGINX reverse proxy? Please give steps and configuration file.
Assistant: Steps: 1. Create a Dockerfile with the following content: ``` FROM php:7.2-fpm RUN apt-get update && apt-get install -y nginx COPY ./nginx.conf /etc/nginx/nginx.conf COPY ./ site.conf /etc/nginx/sites-available/default COPY ./index.php /var/www/html/ CMD service nginx start && php-fpm ``` 2. Create an nginx.conf file with the following content: ` `` user www-data; worker_processes auto; pid /run/nginx.pid; include /etc/nginx/modules-enabled/*.conf; events { worker_connections 1024; } http { fastcgi_cache_path /var/cache/nginx levels=1 :2 keys_zone=fastcgi_cache:100m inactive=60m; upstream php { server 127.0.0.1:9000; } server { listen 80 default_server; location / { try_files $uri $uri/ /index.php?$query_string; } location ~ \. php$ { include fastcgi_params; fastcgi_pass php; fastcgi_cache_bypass $http_pragma; fastcgi_cache_revalidate $http_cache_control; fastcgi_cache_valid 60m; fastcgi_cache_key $scheme$request_method$host$request_uri; fastcgi_cache_lock on; } } } ``` 3. Create a site.conf file with the following content : ``` server { listen 80; server_name localhost; root /var/www/html; index index.php; location / { try_files $uri /index.php$is_args$args; } location ~ \.php$ { include fastcgi_params ; fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name; fastcgi_param PATH_INFO $fastcgi_path_info; fastcgi_pass 127.0.0.1:9000; } } ``` 4. Create an index.php file with the following content: ``` <?php phpinfo(); ` `` 5. Execute the following command in the terminal: ``` docker build -t mywebsite . docker run -p 8080:80 --name mywebcontainer mywebsite ``` Among them, mywebsite is the image name, mywebcontainer is the container name, and 8080 is the host machine The port number, 80 is the port number inside the container. 6. Visit http://localhost:8080, you can see the phpinfo page. Reference link: https://medium.com/@christopherkade/docker-and-php-how-to-get-the-best-of-both-worlds-84622acaa349