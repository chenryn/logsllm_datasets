标准双接口交易->servicentrade_create_by_buyer
即时到账交易->Bervice=create_direct_pay_by_user
这里一定要填写正确，否则就会出现没有权限这样的问题。
(2）支付成功后返回错误的页面
474
---
## Page 480
第9章举一反三学语言：以.NET为例
支付成功了，但是总是返回错误的页面。
首先看看以下的代码：
//生成Md5摘要
stringmysign=GetMD5（prestr.ToString(),_input_charset);
if (mysign==sign &sresponseTxt==*true*)
//验证支付发过来的消息，签名是否正确
Response.Write（success*）：//返回给支付宝消息，成功
Else
（
Response.Write(*fail*);
在这里，如果mysign和responseTxt为flase，则会显示错误信息。这是由于在Retum页面
中，没有设置支付宝安全校验码（key）和合作伙伴id（partner），解决的方法是在page_lode中加入
常量：
幕将//1xxxxxxxxx=Ax5u22s
Stringpartner*xxxxxxxxxxxxxxx*：//你的合作伙伴id；
这样加入后，当付款成功时，就会返回正确了，在转接调试过程中，必须真实地从网站购
买商品并跳转到文付宝网付款，可以将所买商品的单价设为0.01元，从文付宝付款成功并重新
跳回本网站后，检查订单信息是否正确，以及对传回的数据所做的处理操作是否正确。也就是
说，在调试过程中，还必须尽量使用实际的支付操作功能，才能发现潜在的错误。这样，就能
够在网络安全支付中知己知彼，尽可能地提高安全性。
总之，对于一门语言的掌握，是一个无止境的学习过程，只有不断的学习和实践，面永远
没有终点。
475
---
## Page 481
第10章
Java网络安全应用进阶
作为一门流行的网络编程语言，Java已经得到了广泛的应用。其优点在于：能够对网络编
程提供强大的支持、具有很强的可移植性、具有独特的运行机制等。正因为如此，Java语言在
短短的十几年时间里，得到了广大程序员和用户的青，在商业应用上取得了很大的突破。目
前，有关Java的招聘职位应接不暇，而且用人单位给出的待遇也十分吸引眼球。但是，对于
怀者各种梦想的用户来说，尽管都希望能学好这样一门优秀的语言，但在实践中经常会遇到各
种各样的困难，这时往往会产生一筹莫展的感觉。
通过本章的学习，你可以了解：
一些实用的学习工具，帮助用户轻松实现Java语言入门.
·Java控制结构，利用JCrecator查我错误，
·Java类库和Java小工具，了解java.lang包的常用类，通过JavaApplet熟悉网络安全
应用。
设计密码输入框，了解Java Applet 隐惠、Java Servlet安全隐惠、开放Java源代码中
存在的隐患等，使用安全的Java编程规范。
10.1Java安全应用初接触
Java在日常生活中有什么应用呢？现在，我们不去考虑如何实现编程，而是首先看看Java
到底给我们带来了什么。登录MapBar（htp/www.mapbar.com），这是一个功能非常丰富的电子
---
## Page 482
网络安全进阶笔记
地图网站。在这些丰富的功能背后，Java语言起着十分重要的作用。下面，结合这个网站及电
子地图来看看Java语言的一些优点。
10.1.1
丰富的网络应用和强大的编程功能
Java最吸引人的地方在于其丰富的网络应用。体现在以下几个方面。
（1）高效实用的网络编程。在Java平台中，一个很大的特色就是具有大量用于开发网络
应用程序的类库。通过这些类库，应用程序可以快捷地编写基于网络的各种应用程序，并能够
很方便地获取网络资源。因此，Java语言是面向网络的，这和Sun公司所倡导的“网络就是计
算机”观点是一致的。例如，通过http://club.mapbar.com/bbs/listjsp?forumID=14这个链接地址
可以发现，MapBar的论坛采用了JSP语言，而JSP技术采用了Java语言作为脚本。
（2）丰富的Applet功能。Applet称为小应用程序，它是嵌入到网页上执行的Java程序，
在支持Java虚拟机的浏览器上都可以执行。通过编写Java程序，可以让Applet显示图片和动
画，播放声音，还能像桌面应用程序那样用图形用户界面来和服务器端交互，基于功能强大的
Java语言和良好的GUI界面，使得Applet具有广泛的应用前景。这也是人们为什么说Java是
一门网络编程语言的原因之一。例如，在电子地图的查询界面，就可以使用Applet程序。
（3）与JavaScript的良好互动。JavaScript是一种能让网页更加生动活泼的语言，也是目前
网页中设计中最容易学又最方便的语言。通过JavaScript，可以做出功能丰富的欢迎信息、漂
亮的数字钟、有广告效果的跑马灯，还可以显示浏览器停留的时间。让这些特殊效果大大提高
了网页的互动性、提供亲切的服务，使网页吸引更多的用户。尽管两者是不同的语言，但仍然
有很多相互借鉴的地方。
（4）平台无关性。独特的运行机制，使得大多数Java程序拥有二进制级的可移植性。"Write
once，runanywhere”正是Java语言的核心特点。通过使用Java，开发人员可以快速编写与平
台无关的应用程序，从而降低了软件项目开发、管理和维护成本。这也是目前很多单位倾向于
使用Java的原因之一。
（5）简单易用和高效的开发，与其他语言相比，Java语言不需要经过长时间的培训和学习，
掌握更为容易。这是因为Java语言的语法更简单，编写Java程序也更为容易，这也是Java语
言从一开始就吸引众多程序员的原因之一。在市场竞争日趋激烈的情况下，软件的高效开发可
以更加迅速地配合市场的发展。通过使用简单易用面功能强大的Java语言，可以大大缩短开
发周期，使得产品优势更加明显。
（6）安全性高。无论是哪种语言，设计时首先必须考虑其安全性。独特的设计使得Java
语言的安全性得到了极大的提高，首先，从语言方面看，Java语言摒弃了C/C++中容易造成安
全漏洞的指针，并提供了自动的内存管理机制，保证了Java程序运行的可靠性。其次，在运
行架构上看，由于Java语言采用了设计优良的安全模型，因此，未经授权的代码将不能进行
.危害用户本地资源的操作。
此外，Java是一门完全面向对象的语言，使用优秀高效的网络编程将使得基于Java的分
布式开发更加简单高效。通过多线程应用程序，能够同时运行多项任务。当然，对于普通用户
来说，能够掌握Java语言的基本技巧，不仅能够轻松应对常见的软件故障，而且可以对工作、
学习产生十分积极的影响。
478
---
## Page 483
三
第10章Java网络安全应用进阶
10.1.2轻松实现Java环境配置
看到上面的Java介绍，很多用户肯定在跃跃欲试了。不过，现在别着急，使用Java之前，
必须要有一个方便而实用的测试环境。Java不但提供了一个特征丰富的语言和运行环境，面且
还为程序员和最终用户提供了一个免费的Java软件开发工具。使用之前，首先要下载JDK开
发语言包，下载地址为http:/java.sun.com
（1）安装软件包。JDK开发语言包中，包含了一些基本的Java工具，如javac编译器、java
解释器、jdbJava语言调试器、javadocAPI文档管理器、javah头文件生成器、Appletviewer小
应用程序浏览器、javap类文件反汇编器等。在这里，暂且把它们理解为我们的一个便携小工
具包吧，因为平时应用它们的场合实在太多了。
小知识：JIDK是为程序开发者提供编写、测试、执行程序的一套完备的工具体系，由下面的7
个部分组成
①javac编译器：将源文件转换成可执行文件，这些可执行文件就是以.class为后级
的字节码文件
②java解释器：执行编译成功后生成的字节码文件，在字节码下载和执行过程中、
解释器负责维护它的完整性、正确性和安全性。
③Applet小应用程序浏览器：Appletviewer展示Web页面中包含的Applet，通常用
于Applet开发过程中的测试
jdb调试器：可执行字节码，同时提供置断点中断执行和显示变量值等功能，是查
找程序错误的有效工具。
javap分解器：将字节码分解还原成源文件。
javadoc文档生成器：自动生成指定的范国内的Java软件文档，内容包括Java源
文件中的类、变量、方法、接口、异常（exception）等
javah头文件生成器：用以从Java的字节码上生成C语言的头文件和源文件。
（2）设置JDK环境变量，这可是学习Java的必修课了。学会设置环境变量是学习Java过
程中非常重要的一部分，具体方法可以参考本书第6章有关EJBCA的开发环境设置方法。将
中输入cmd命令，进入命令行模式，在界面中输入set命令，即可看到当前的环境变量。
10.1.3一个简单的Java程序
“万事俱备，只欠东风”。通过上面的环境配置，现在就可以进行简单的程序测试了。
【例i】一个简单的Java程序。代码如下：
class HelloWorld
public static void main(String args[])
479
---
## Page 484
网络安全进阶笔记
System.out.println（*网络安全大队的朋友们.大家好*）：//打印文本
将这段代码用记事本保存为HelloWorldjava文件。然后，放置在C：uest目录下。
现在：进入命令行模式，在C：test目录下输入以下命令：
C:\test>javac HelloWorld.java
C:\teat>java HelloHor1d
如果这个程序能够测试通过，说明我们已经顺利地迈过了Java入门的第一道关。尽管学
习Java之路如此漫漫，但是，一个良好的开始可以帮助我们拥有更多的信心去征服Java学习
过程中的“拦路虎”，万一测试不成功，也不要心急，下面还将给大家介绍一个超级助手，碰
到难题时，它能够做到“有问必答”，甚至可以让用户把设置环境变量的操作也免了。那么，
我们来看看它是何方神圣？
10.1.4调试助手：利用JCreator学习Java
Java既是一种编程语言，也是一个平台（Platform），或者说是架构。如果不了解这个平台，
就无法理解Java。如果撤开Java平台，仅仅作为一种编程语言，Java在语法以及编程思想（指
coding方面）上与传统语言没有多大本质区别。为了解除这种神秘感，我们借助一款十分小巧
的Java开发工具，通过这种简单开发平台的学习，揭开Java的神秘面纱。
1：JCreator的下载和安装
软件下载地址：http://www.onlinedown.net/sof/15163.htm
汉化补T：http://www.onlinedown.net/sof/43595.htm
官方网址：http://www.jereator.com
JCreator是一个小巧灵活的Java开发工具，它可将Java的程序的编写、编译、运行和调试
集成到环境中直接进行开发，且无需进行环境变量的设定，我们可以直接在JCreator中编辑Java
源文件，选择相应的菜单和点击对应的按钮，就可以完成Java程序的编译、运行等工作，十
分方便。
当前比较实用的版本是JCreator4.00.028，它又分为LE和Pro版本。LE版本功能上受到
一些限制，是免费版本。Pro版本功能齐全面且比较小巧，对硬件要求不是很高，完全用C++
写的，速度快、效率高，具有语法着色、代码自动完成、代码参数提示、工程向导、类向导等
功能。英文版本安装完毕，需要首先启动软件，然后再运行汉化补丁。第一次启动时提示设置
JavaJDK主目录及JDKJavaDoc目录，软件自动设置好类路径、编译器及解释器路径，还可以
在帮助菜单中使用JDKHelp。
一
以例1中的代码为例，在软件中打开HelloWorldjava文件，然后执行“生成”菜单下的“编
译”命令。编译完毕，再执行“生成”菜单下的“执行文件”命令，如图10.1所示。
可以看到，在界面的左侧出现了输出的提示，在右侧出现了文件执行的结果。使用起来十
分方便。
4B0
---
## Page 485
第10章Java网络安全应用进阶
lloori
arga
-grintia(*Btf*)2
必理已究点
社理已光点
图10.1在JCreator中编译文件