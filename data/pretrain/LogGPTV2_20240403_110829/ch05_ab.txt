如何监控？
谁长期负责？
问题报告是怎样的？
什么是 SLA？这关键吗？
有哪些风险/好处？
我们的退路是什么？
如何衡量成功？
如何容忍失败？
如果出现重大失误怎么办？
在讨论是购买还是采用时，这些要点只是头脑中需要牢记的一小部分。与你的团队一起考虑每个问题取决于集成的重要性。当我们考虑购买服务时，值得在其中几个问题上进一步延申，以引发可能没有考虑过的其他想法。
这是核心竞争力吗？
 始终记得权衡考虑的解决方案/集成是否既是你的核心竞争力，同时也是公司的核心竞争力。
第三方提供专门的解决方案，并设有工程师团队，通过构建其他功能和服务来扩展其价值主张。从长远来看，用于日志聚合的软件即服务（SaaS）解决方案可能比尝试采用开源解决方案（如 Elasticsearch）更有效。你必须确定 Elasticsearch 是否真的是你个人、你的团队和公司需要关注的内容。集成时间表？
 无论你认为完成集成需要多长时间，请先加倍，然后再添加一点缓冲时间。开源解决方案的 PoC 可能很容易实现，但这并不意味着项目已做好生产准备。 SRE 的生产就绪定义应包括测试/暂存、监视、日志记录、配置管理、部署过程、灾难恢复等。
使用 CDN、DNS、监视、CA 和消息传递解决方案，实施这些生产就绪因素可能是极具挑战性的，在某些情况下几乎不可能。幸运的是，对于第三方集成，尤其是在大公司中，随着我们进行集成工作，各种团队将评估解决方案。应该期望法律、安全和采购 采购团队是处理采购订单和分包合同的专家。他们购买项目和公司计划所需的商品和服务。他们支付账单，以保持服务继续，但也确保法律和业务义务得到满足。团队将在采购过程中发挥作用。每个团队都将引入自己的流程，这可能会延迟将第三方解决方案投入生产。
项目运营费用和放弃费用项目运营费用和放弃费用
 除了考虑购买商品和服务的初始成本（CapEx，如硬件、软件和一次性许可证）以及运行和维护的持续成本（运营成本，如每月服务器价格、经常性服务费）之外，还考虑额外的成本。费用类别应该是考虑过程的一部分。
项目运营费用（PrOpEx）
 解决方案的实施成本。通常，CapEx 表中的单行项目，实施成本可能是决策中关于生成、购买或采用选择的更重要的因素。要考虑的实施成本包括在实施解决方案时将采用的服务，例如法律费用、漏洞探测、额外的监视和性能基础结构以及专业或咨询服务。这些成本也可能暴露被忽视的运营成本。
放弃费用（AbEx）
 这是完全放弃并实施另一个解决方案的成本。这有时被更温和的术语 迁移成本代替。由于购买更强壮的 SaaS 解决方案，起初采用的开源解决方案有可能被放弃，反之亦然。放弃方案的成本会有所不同。 在购买到采用方案中，除了重新启动项目所产生的成本外，还可能需要支付合同义务费用，如每月使用承诺。 在采用到购买方案中，成本问题较少；然而，时间是一个更大的因素。在上一节中，我们看到法律、安全和采购流程可以延长生产时间。制定相应的计划并尽早放弃，这符合我们的最佳利益。在项目的整个生命周期内，你都应考虑 AbEx。 与第三方合作意味着我们还应考虑“购买到购买的弃用”方案，即放弃一个供应商并使用更便宜、更强大的供应商解决方案。如果你不小心，一个供应商的自定义解决方案可能会导致 供应商锁定，最终增加放弃费用。在重新协商合同时，供应商锁定也可以使规模对供应商有利。
案例分析
  尽管 LinkedIn 与各种第三方合作处理 DNS、CDN、监视、CA 等，但我们始终考虑供应商的解决方案是否会导致我们锁定到解决方案中。对于经验不足的工程师来说，DNS 和 CDN 似乎是直接的解决方案，分别用于引导用户访问你的主页并加速访问的内容。但是，第三方的销售工程师经常推出使其产品独特和酷炫的功能。尽管这些功能通常是伟大的功能，但它们往往对其他供应商来说是不可行的。这方面的一些通用示例包括 DNS 供应商提供的地理位置导向功能，或 CDN/动态站点加速（DSA）供应商提供的页面片段缓存（ESI）功能。让我们深入探讨一个示例。ESI 允许在边缘的最终交付中将页面的可重用部分（如标题栏、菜单、页脚等）的缓存拼接在一起。尽管此解决方案可以略微减少页面加载时间或提高源服务器上的负载，但 ESI 实现在提供程序之间实现不一致。多家第三方 CDN 提供商提供 ESI 解决方案。一些提供商提供基于规范 1.0的基本 ESI 支持，而其他提供商则提供扩展和定制解决方案。在开始使用一个解决方案及其独特功能后，撤消新功能和新工作流带来的成本开始增长，最终超过实施第三方竞争对手（或实现替代）解决方案（如 SSI 或其他压缩技术，或客户端脚本载入技术）的成本。
在考虑每个解决方案的风险和好处后，你可以做出购买决定。因此，对于有经验的采购人员来说，在采购第三方的解决方案时，除了简单的配置之外，还有其他工作，这不足为奇。SRE 有义务构建世界一流的解决方案，为此，我们应该探索一些最佳实践，将第三方从技术堆栈的附属转移为技术堆栈的延伸。第三方作为一等公民
  在许多组织中，“一流公民”这个词被用来描述某些关键任务服务，例如 auth/login 或广告。你很少会听到“第三方”和“一流公民”相提并论。总的来说，第三方被视为技术堆栈的附属。这种态度是可以预料到的：如果你为另一家公司的产品、功能和服务付费，那么该公司有责任维护其 SLA。但是，你的最终用户（也就是你的客户）不一定认同这种态度，也不一定能对此宽容。出于所有目的和目的，第三方集成其实是你公司的延伸。
当他们倒下时，你也倒下
  第三方集成有多种形式。当我们与第三方解决方案集成时，确定这些解决方案如何影响我们的最终用户非常重要。在在#third_parties_can_fit_anywhere_around_the中，有几个第三方集成点对最终用户体验有直接和间接的影响。
第三方可以指技术堆栈边缘的任何地方
直接影响第三方可以指技术堆栈边缘的任何地方
直接影响
  通常，我们合作的第三方提供商会直接影响站点可用性、站点可靠性和性能。事实上，这些第三方显然对整体可靠性有影响。下面是具有直接影响的供应商的简短列表：
DNS 是最终用户体验的第一个系统。当 DNS 崩溃时，你的服务处于关闭状态。
边缘产品（如站点加速器、广域防火墙、转发代理/负载均衡器等）可能会遭遇拥塞问题、人为配置错误和路由故障。
CDN 缓冲的静态对象（如 JavaScript 和样式表）在感知到的用户体验中起着一定的作用；配置不当会导致缓存方面的效率低下和页面加载时间过长，从而导致浏览器端体验变差。使用 单页应用程序（SPA）框架会导致诊断和评估网页性能变得非常复杂。SPA 框架会动态重写当前页面，而不是从服务器重新加载页面；也就是说，SPA 使用客户端呈现而不是服务器端呈现。它们通过在单个页面加载中加载 HTML、JavaScript 和样式表并在浏览器中本地缓存这些对象来执行此操作。然后，通过 WebSockets、通过 AJAX 轮询、服务器发送的事件或事件触发的 AJAX 调用动态加载内容。对于缓存的 SPA，使用传统导航计时 API 得到的页面加载时间极低；但是，如果没有动态内容，该页面可能无法使用。在预期页面加载时间之后，在现代浏览器中触发资源计时 API 有助于诊断和评估用户体验问题。间接影响
  某些供应商对站点可靠性的影响不太明显。一般来说，这些是处理技术堆栈后端交易的第三方。以下是具有间接影响的供应商的示例：
支付处理方面的中断（例如，API 密钥轮换失败或计费代码不正确）一般不影响用户体验。乐观的方法可能使用以前的计费历史记录来推断将来的付款处理成功与否，并且只需将支付事务加入队列即可。
  综合实时用户监视（RUM）对于遥测是必要的；但是，在将二者用于自动化时都应谨慎。基于监视的自动化在大公司中的使用正在增长。综合监控解决方案一般通过大量节点定时运行测试来实现。依赖于来自综合测试节点的连续事件触发器的自动化可能是繁琐且不一致的，尤其是在地理位置之间。相反，基于测试节点之间事件共识的触发器可以产生更好的结果。对于较大的站点，RUM 可能同样笨拙，因为数据量大得多。 要使用基于RUM的自动化，需要一种更加精密的自动化方法。SMS 和电子邮件集成通常没有与最终用户和技术堆栈之间的直接关联。然而，最终用户往往期望即时的反馈；因此，未送达的收款确认信息或延迟的双因素验证码，这些都会导致对贵公司的负面看法。
SRE 不仅寻求出色的连续在线时间，而且寻求一致的用户体验。任务关键型服务的一个理论上简单的缓解策略是建立冗余。无论是直接还是间接，所有任务关键型的第三方集成都应被视为一流公民，并且像技术堆栈中的任何其他服务一样运行。
但是，如果第三方被归类为黑匣子，我们不应该从数据方面期望他们太多，对吗？在这个年代，黑盒子已经越来越少了。越来越多的第三方正在构建 API，使我们能够利用其基础架构作为代码运行，这意味着我们能够通过管理配置、报告和一系列其他功能来运行我们的第三方产品，这样感觉上更有服务的味道。  
像服务一样运行黑匣子像服务一样运行黑匣子
  第三方解决方案与您在技术堆栈中运行的服务不一样；因此，一致的看法是，他们是黑盒子（你发送一些数据，并得到返回数据）。每个第三方供应商都提供一组产品和功能，提供一些价值主张。根据供应商的不同，其解决方案很可能确实时一个黑盒子。但是，许多现代供应商已经认识到透明度的必要性，并构建了 API 以促进集成。因此，我们不应将供应商作为黑盒子对待，而应将供应商视为一种指示仪。
我们可以使用#not_all_third_party_solutions_are_black_b来确定第三方供应商可能属于那个级别。让我们拿两个供应商做对比。供应商 A 可能具有出色的报告、无数的监控功能、简单的配置、对一组可靠的 API 的访问，以及高水准的文档（以最大限度地帮助用户自助服务）。供应商 B 可以通过直观的门户网站，使用简单的配置提供最佳解决方案，但如果我们正在寻找通过供应商 B 来改进流程自动化的能力，有限的 API 访问将阻止我们完全集成其解决方案。在此示例中，供应商 A 是一个非常开放的框，而供应商 B 是一个更封闭的解决方案，可能更接近黑盒。并非所有第三方解决方案都是黑盒
通常很难确定第三方集成的哪一部分可能被视为自定义服务。为此，我们需要定义我们试图实现的顶级功能。在很好地理解该功能后，我们应该改进管理该集成所需的活动，以产生一组可预测且可操作的状态。其中一些状态可能如下：
全面正常
所有供应商操作均按预期工作。
可操作但性能下降
供应商解决方案是可操作的，但性能下降；例如，CDN 正在传递内容，但对象传递速度很慢。