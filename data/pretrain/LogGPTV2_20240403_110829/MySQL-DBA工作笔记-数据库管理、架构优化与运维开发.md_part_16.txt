这种方式是通过开发源码树的方式来编译部署。主要的方式就是基于 git；相对来说，
2．使用开发源码树来构建
安装的详细步骤我们等下细说，目前网站上看到的绝大多数源码安装都是这种方式。
GenericLinux(ArchitectureIndependent)
Select OsVersion:
SourceCode
Select Operating System
MysQLCommunityServer5.7.17
origin/cluster-7.3
ori
origin/5.
origin/5.6
Compressed TARArchive,IncludesoostHeaders
myqp5717.targ
ori
Compressed TAR Archive
igin/cluster-7.2
5.7.17ag
out
图3-1
5.7.17
第3章MySQL基础运维面面观|77
58.6M
49.1M
Lookng forpreviousGAverons?
Download
284/ igna
Download
---
## Page 100
78丨MySQLDBA工作笔记：数据库管理、架构优化与运维开发
https://sourceforge.net/projects/boost/files/boost/1.59.0/boost_1_59_0.tar
boost在MySQL5.6版不是必须。
其实编写这个软件的人才是真心厉害
.gz
最重要的一点，那就是保证cmake 是可用的，可以使用命令 yum install cmake 进行安装。
如果看到程序运行输出为：Hello world，则证明安装是没有问题的。
g++a.c-lncurses&&./a.out
#ll /usr/lib/libncurse*
http://ftp.gnu.org/pub/gnu/ncurses/ncurses-5.8.tar.gz
tar -zxvf boost_l_59_0.tar.gz -C /usr/local/
安装后，可以使用如下的方式来检测是否安装成功
wget
（3）使用cmake编译
这么运行即可。
#include 
如果饶有兴致，
对于 MySQL 5.7版来说，boost是需要的，否则无法编译，如下这样下载部署。当然
接下来的工作就需要花点功夫了，那就是环境依赖的安装包。
（1）创建 mysql用户组，创建mysql用户。
准备安装前，做以下几件事情。
exit(EXIT_SUCCESS);
endwin();
refresh();
initscr();
int main()
#include
下载后使用./configure,make,make install即可安装。
（2）安装依赖包
'"S%”
，还可以写一小段代码来检测，如下。
""Hello world" ）;
root
 /usr/lib/libncurses.a
usr
.a
---
## Page 101
重新 cmake一遍，然后使用命令make& make install，即可完成安装。
录，
可以换算一下。
据 CPU核数指定编译时的线程数，因为默认是1个线程编译，如果不知道该启用几个，
依赖安装包的问题。
的安装目录，数据目录，如下。
这个阶段的工作就很常规了，我们简化一下，两个命令初始化，启动数据库。
（6）创建数据库
值得一提的是，如果因为空间问题异常退出，还是最好删除 CMakeCache.txt 文件，
也是我们的终极目标。
（5）使用 make install 安装
如下图3-2所示，满屏幕的编译日志，看起来很有成就感。
make -j^grep processor
make阶段的事情做完之后，
关于 make 操作，我们可以做点改进，那就是加快编译的速度，使用“-j”参数，根
（4）make构建
若准备充分，这个过程就是分分钟的事情，如果 ncures 没安装，就可能抛出如下的
cmake
值得一提的是，我是打算同一个服务器上安装多个版本，所以就在/usr下指定了不同
-DEXTRA CHARSETS=all
-DDEFAULT
-DDEFAULT_CHARSET=utf8
18%
/proc/cpuinfo|wc-l`
就是make install，这个过程会正式安装软件到指定的目
图3-2
第3章MySQL基础运维面面观|79
---
## Page 102
80丨MySQL DBA工作笔记：数据库管理、架构优化与运维开发
3.1.2
一些头绪，让这些开发技巧派上用场，不至于盲人摸象一般的拿着命令肉眼扫视。当然
对我来说，源码安装的主要意义就在于学习和调试。这样做可以在看代码的时候有
Copyright (c) 2000, 2016, Oracle and/or its affiliates. All rights reserved.
Server
Your MySQL
# /usr/local/mysql_5.7/bin/mysql --socket=/home/mysql_5.7/mysql.sock --port=3308
后面的事情你懂的，
/usr/local/mysql_5.6/scripts/mysql_install_db
初始化数据字典：
·MySQL 5.6版本的操作如下：
/usr/local/mysql_5.7/bin/mysqld_safe --defaults-file=/home/mysql_5.7/s.cnf &
/usr/local/mysql
初始化数据字典：
·MySQL5.7版本的操作如下：
innodb_buffer_pool_size = 24G
max
innodb_log_file_size=1000M
binlog_checksum=NONE
启动数据库：
启动数据库：
enforce_gtid_consistency=oN
se
port=3308
datadir=
server configuration
[mysqld] 
启用的参数模板类似于：
aster
erver
 在 eclipse 中配置 MySQL 源码环境
connections
info
version:
connection
repository=TABLE
5.
我们可以连接到源码版的数据库了。
id
is
--initialize-insecure
--user=mysql
--user=mysql
---
## Page 103
面用 Java 编辑器看 C++代码，非也。因为 eclipse 还是有 C++版的插件的，可以在
eclipse 这个工具 Java 开发者用得多一些，那和 MySQL 源码环境有什么关系。难道在里
前来看挑战成功,其中有一部分原因和新版本的一些界面的改进有关，不过相对来说
本的，之前的还真不好找了，得通过其他渠道了。
code，就可以看到下面的选项了，如图3-3所示。
基
没有这方面的平台开发经验其实还是有一点难度的；最后我还是决定使用eclipse 来做，
大家知道InnoDB 的源码是C，MySQL Server 的是C++，这样一套环境想调试好，如果
对于代码至于能不能啃下来，那是另外一回事了。
于Windows平台。
我来说说我的情况，Java 开发还有一点基础，所以以前的 eclipse 还算用得比较熟悉。
eclipse 是个开发通用平台的 IDE，不过这个说法现在受到了 IntelliJ IDEA 的挑战，目
2．下载 IDE eclipse 
比如说我选择的是5.6.35这个版本。目前最新的是5.7版本的，再早一些的是5.5版
MySQL Community Server5.6.35
MySQL 源码的下载，直接到www.mysql.com上面，选择社区版，下载类型是 source
Compressed TAR Archive
GenericLinux(Architecture Independent)
electOsVersion
Source Code
SelectVersion:
1．下载 MySQL 源码
下面我们细细地说说这几件事。
（4）配置代码调试方式
（3）编译环境调试
（2）下载开发 IDE eclipse
（1）下载MySQL源码
先要做如下几件事情。
里面趟了好几个坑，
(mysql-5.5.35.tar.gz)
让我苦不堪言，慢慢道来。
andGnuPGsignatu
图3-3
restoverifythei
5.6.35
integrityof thepackagesyou download.
MD5:e4f170f6f73aa94c0
第3章MySQL基础运维面面观丨81
30.7M
Looking for the latest GA version?
eds90019545
Download
---
## Page 104
82丨MySQL DBA工作笔记：数据库管理、架构优化与运维开发
环境是JDK6 的环境，版本相对比较旧了，可以下载一个较新的版本，比如1.8版本或以
这个错误的大多数说法是和 JDK 的位数有关，比如 32 位、64 位的兼容性有关，当前的
www.eclipse.org上面下载C++版本专属的。
如图3-5所示。
上，否则会看到如下图3-4所示的错误提示。
但是下载之后，启动 eclipse 失败，错误是 Failed to load the JNI shared library jvm.dll",
这个时候环境还是基本空白的，先创建好再说，如图3-6 所示。
调整了 JDK 版本之后，eclipse 可以启动了，我创建了一个项目，我命名为 mysql_5_6_35,
司
eclipse
+
+
+
or greater is required.
Version 1.7.0_131 of the JVM is not suitable forthis product.Version:1.8
Welcome to t
ontahoe
New Prject
Createanew C++ projet
Select a wizard
Wizards
图3-5
图3-4
1
Genera
MaketileProject withExisting Code
CProject
Next>
确定
X
Einish
---
## Page 105
环境，可以参考htps:/sourceforge.net/projects/mingw/这个网站，如图3-8 所示，下载即可。
打开代码之后，发现后台开始报出了下图3-7的错误，
这个时候如果能配置好还是很有意思的，可以在 Windows 上来安装一下 GCC 和 g++的
启动了eclipse，创建了项目，我们可以从指定的目录下导入源码包里的代码。不出所料，
3
简单确认之后，
、编译环境调试
1
4Errors(2items)
Home/Browse/Development/BuildTools/MinGW-MinimalistGNU forWindows
Slems & Tasks Console Properties
oughttyoubystrausswisaieetmarshll
MinGW-Minimalist GNU forWindows
returnho_error
就创建好了一个项目，
native
ReviewsSupportNewsWwikiMailin ListsTickets
oject name:
2
eateC+
Project
mysql_5_6_35
Resource
BackNext
Include Bro
Project
图3-8
图3-7
，新版本的 eclipse 就开始生成了工作目录。
图3-6
hains
Path
ifthey
vser
supported on the platform
Collection(GCC)
，编译环境有问题。
Location
Browse All Files
Type
第3章MySQL基础运维面面观丨83
Git
---
## Page 106
84丨MySQL DBA工作笔记：数据库管理、架构优化与运维开发
修改右下角的路径，这个路径就是我们刚刚安装的软件所在的目录。
最后会提示安装成功，如图3-10所示。
件，也基本是下图3-9这样的形式。
在 eclipse 里面还是需要做一些基本配置的。根据图 3-11 中的线框找到对应的菜单，
我们不光要GCC 的，还要 g++，在安装好的软件基础上需要再下载新的包来安装。
这个软件的风格蛮有意思，
Applying Scheduled Changes
 Close dialogue automaticall, when activity is complete.
3
nnsa
Details
mingw-get-setup-0.6.2-mingw32-beta-20131004-1-dll.tr.xz
ViewLicence
32.00kB
下载安装包的时候是下面的安装进度，需要安装哪些插
N32-d21
图3-10
1.tar
图3-9
2b2nbtar.1zm1zma
53.25kB
Continue
Quit
%09
Close
---
## Page 107
中线框中的文件改个名字，它就是 make。
了，make 检查了也是安装成功的，为什么提示配置里没有呢。其实我们需要把下面图 3-13
配置好环境，编译就大体没有问题了，如图3-14所示。
这个时候有一个问题，提示 make 没有配置，这个问题让我有些摸不着头脑。GCC 都装
比如我安装在了D 盘，就配置成下面线框中的路径，如图3-12 所示。
咖点面
最近访问的位置
文件（F编辑（E）查著（V）
库
打开
Allocate consolein theConsole View
D:/programs\/mingwbin3S(COMMAND) (FLAGS) -E-P -v-dD*sBrowse.
Command to get compiler specs:
Language Settings Provider Options
od