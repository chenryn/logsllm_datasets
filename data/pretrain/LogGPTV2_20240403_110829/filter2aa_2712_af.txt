guide.
Monitoring Windows Services
You can check the status of Windows services, view the Windows services logs, and see 
a list of users who are currently connected for Windows services.
Viewing Windows Services Status
You can use Server Admin to check the status of Windows services.
To view Windows services status:
1 Open Server Admin and select Windows in the Computers & Services list.
2 Click Overview to see whether the service is running and how many users are 
connected.
3 Click Logs to see the Windows file service and name service logs.
Use the Show pop-up menu to choose which log to view.
4 Click Connections to see a list of the users currently connected to the Windows 
services.
The list includes the users’ names, IP addresses, and duration of connections. A button 
at the bottom of the pane lets you disconnect a user.
5 Click Graphs to see graphs of connected users or throughput. 
Use the slider to adjust the time scale.
From the Command Line
You can also check Windows services status by using the serveradmin command in 
Terminal or using the cat or tail command to view the log files in /var/log/samba. 
For more information, see the file services chapter of the command-line administration 
guide.
LL2356.book  Page 52  Thursday, September 4, 2003  3:21 PM
Chapter 5    Managing Windows Services
53
Viewing Windows Services Logs
You can use Server Admin to view the logs of Windows services.
To view Windows services logs:
1 Open Server Admin and select Windows in the Computers & Services list.
2 Click Logs to see the Windows file service and name service logs.
3 Use the Show pop-up menu to choose which log to view.
From the Command Line
You can also view the logs of Windows services by using the cat or tail command in 
Terminal to view the log files in /var/log/samba. For more information, see the file 
services chapter of the command-line administration guide.
Viewing Windows Services Connections
You can use Server Admin to see which users are connected to Windows services, and 
you can forcibly disconnect users.
Important:  Users who are disconnected will lose unsaved work in open files.
To view Windows services connections:
1 Open Server Admin and select Windows in the Computers & Services list.
2 Click Connections to see a list of the users currently connected to the Windows 
services.
The list includes the users’ names, IP addresses, and duration of connections. 
A button at the bottom of the pane lets you disconnect a user.
From the Command Line
You can also check the number of connections to Windows services by using the 
serveradmin command in Terminal. For more information, see the file services chapter 
of the command-line administration guide.
Viewing Windows Services Graphs
You can use Server Admin to view graphs of connected Windows users or the 
throughput of Windows services.
To view Windows services graphs:
1 Open Server Admin and select Windows in the Computers & Services list.
2 Click Graphs to see graphs of connected users or throughput. 
3 Use the slider to adjust the time scale.
Disconnecting Windows Users
You can use Server Admin to forcibly disconnect users of Windows services.
Important:  Users who are disconnected will lose unsaved work in open files.
LL2356.book  Page 53  Thursday, September 4, 2003  3:21 PM
54
Chapter 5    Managing Windows Services
To forcibly disconnect users of Windows services:
1 Open Server Admin and select Windows in the Computers & Services list.
2 Click Connections to see a list of the users currently connected to the Windows 
services.
The list includes the users’ names, IP addresses, and duration of connections. 
3 Select users that you want to forcibly disconnect and click Disconnect.
Changing the Server’s Windows Identity
You can change a server’s identity among clients of Windows services by changing the 
server’s Windows computer name or by changing its Windows domain or workgroup.
Changing the Server’s Windows Computer Name
Using Server Admin, you can change the computer name by which Mac OS X Server is 
known in a Windows domain or workgroup. If the server is the primary domain 
controller (PDC) or a Windows domain member, the computer name is the server’s 
NetBIOS name in the domain. If the server provides standalone Windows services but is 
not the PDC or a domain member, the computer name is the server’s NetBIOS name in 
the workgroup. Windows users see this name when they connect to the server. 
To change the Windows computer name of Mac OS X Server:
1 In Server Admin’s Computers & Services list, select Windows for the server whose 
Windows computer name you want to change.
2 Click Settings (near the bottom of the window), then click General (near the top).
3 Enter the computer name, then click Save.
The name should contain no more than 15 characters, no special characters, and no 
punctuation. If practical, make the server name match its unqualified DNS host name. 
For example, if your DNS server has an entry for your server as “server.example.com,” 
give your server the name “server.”
4 If the server is the PDC or a Windows domain member, you must authenticate by 
entering the name and password of a user account that can administer the LDAP 
directory domain on the PDC server.
Since workgroups are ad hoc, you do not have to authenticate as an administrator to 
change the computer name of a server that provides only standalone Windows 
services.
From the Command Line
You can also change the server name using the serveradmin command in Terminal. 
For more information, see the file services chapter of the command-line administration 
guide.
LL2356.book  Page 54  Thursday, September 4, 2003  3:21 PM
Chapter 5    Managing Windows Services
55
Changing the Server’s Windows Domain 
Using Server Admin, you change the Windows domain of a server that is a domain 
member.
To change the Windows domain of Mac OS X Server:
1 In Server Admin’s Computers & Services list, select Windows for the server whose 
Windows domain you want to change.
2 Click Settings (near the bottom of the window), then click General (near the top).
3 Enter the Windows domain name, then click Save.
Changing the Sever’s Windows Workgroup
Using Server Admin, you can change the workgroup name of a server that provides 
only standalone Windows services (file, print, browsing, or WINS). Windows users see 
the workgroup name in the Network Neighborhood window. If you have Windows 
domains on your subnet, use one of them as the workgroup name to make it easier for 
clients to communicate across subnets. Otherwise, consult your Windows network 
administrator for the correct name.
To change the Windows workgroup name of Mac OS X Server:
1 In Server Admin’s Computers & Services list, select Windows for the server whose 
Windows domain you want to change.
2 Click Settings (near the bottom of the window), then click General (near the top).
3 Type a name in the Workgroup field, then click Save.
From the Command Line
You can also change the Windows workgroup name using the serveradmin command 
in Terminal. For more information, see the file services chapter of the command-line 
administration guide.
Managing Access to Windows Services
You can manage access to Windows services by allowing or disallowing guest access to 
Windows file service and by limiting the number of connected Windows clients.
Allowing Guest Access for Windows Services
You can use Server Admin to enable or disable guest access to Windows file service. 
Guest users can access Windows file service on your server without supplying a name 
and password. For better security, do not allow guest access.
Warning:  Do not change the domain name of a PDC server unless absolutely 
necessary. If you change the name of the PDC domain, Windows workstations that 
were domain members will have to rejoin the domain under its new name. 
LL2356.book  Page 55  Thursday, September 4, 2003  3:21 PM
56
Chapter 5    Managing Windows Services
Users must always enter a name and password to log in to the Windows domain of a 
Mac OS X Server primary domain controller from a Windows workstation. The Windows 
print service provided by Mac OS X Server does not require authentication. Windows 
browsing and name resolution services do not require authentication either.
To enable guest access to Windows file service:
1 Open Server Admin and select Windows in the Computers & Services list.
2 Click Settings, then click Access.
3 Click “Allow Guest access,” then click Save.
If “Allow Guest access” is selected, users can connect for Windows file service without 
using a name or password.
If “Allow Guest access” is unselected, users must supply a valid name and password to 
use Windows file service.
From the Command Line
You can also enable or disable guest access to Windows file service using the 
serveradmin command in Terminal. For more information, see the file services chapter 
of the command-line administration guide.
Limiting the Number of Connected Windows Clients
Using Server Admin, you can limit the potential resources consumed by Windows 
services by limiting the maximum number of connections.
To set the maximum number of connections:
1 Open Server Admin and select Windows in the Computers & Services list.
2 Click Settings, then click Access.
3 Select “__maximum” and type the maximum number of connections.
4 Click Save.
From the Command Line
You can also limit client connections by using the serveradmin command in Terminal 
to limit the number of SMB processes. For more information, see the file services 
chapter of the command-line administration guide.
Managing Windows Services Logging
Using Server Admin, you can choose the level of detail you want to log for Windows 
services.
To specify log contents:
1 Open Server Admin and select Windows in the Computers & Services list.
2 Click Settings, then click Logging (near the top).
LL2356.book  Page 56  Thursday, September 4, 2003  3:21 PM
Chapter 5    Managing Windows Services
57
3 Choose from the Log Detail pop-up menu to set the level of detail you want to record, 
then click Save.
The more detailed the logging, the larger the log file. 
The following table shows the level of detail you get for each option.
From the Command Line
You can also change Windows services logging settings using the serveradmin 
command in Terminal. For more information, see the file services chapter of the 
command-line administration guide.
Managing Advanced Windows Services Settings
You can use the Advanced pane of Windows services settings in Server Admin to 
choose a client code page, set the server to be a workgroup or domain master browser, 
specify the server’s WINS registration, and enable virtual share points for user homes.
Changing the Windows Code Page
You can use Server Admin to change the code page, which determines the character set 
used for Windows services.
To change the Windows code page:
1 Open Server Admin and select Windows in the Computers & Services list.
2 Click Settings, then click Advanced.
3 Choose the character set you want clients to use from the Code Page pop-up menu, 
then click Save.
From the Command Line
You can also change the Windows code page by using the serveradmin command in 
Terminal. For more information, see the file services chapter of the command-line 
administration guide.
Enabling Windows Domain Browsing
If there are no Microsoft servers on your subnet or network to control domain 
browsing, you can use these options to restrict domain browsing to a single subnet or 
allow browsing across your network.
Events logged
Low
Medium
High
Warnings and errors
Yes
Yes
Yes
Service startup and stop
Yes
Yes
User login failures
Yes
Yes
Browser name registrations
Yes
Yes
File access events
Yes
LL2356.book  Page 57  Thursday, September 4, 2003  3:21 PM
58
Chapter 5    Managing Windows Services
To enable domain browsing:
1 Open Server Admin and select Windows in the Computers & Services list.
2 Click Settings, then click Advanced.
3 Next to Services, select Workgroup Master Browser, Domain Master Browser, or both.
Select Master Browser to let clients browse for and locate servers in a single subnet.
Select Domain Master Browser to let clients browse for and locate servers across your 
network (subnets).
4 Click Save.
From the Command Line
You can also change Windows domain browsing settings by using the serveradmin 
command in Terminal. For more information, see the file services chapter of the 
command-line administration guide.
Registering With a WINS Server
Windows Internet Naming Service (WINS) matches server names with IP addresses. You 
can use your server as the local name resolution server, or you can register with an 
external WINS server.
To register your server with a WINS server:
1 Open Server Admin and select Windows in the Computers & Services list.
2 Click Settings, then click Advanced.
3 Select one of the options under WINS Registration. 
Choose “Off” to prevent your server from registering itself with any external WINS 
server or local name resolution server. 
Choose “Enable WINS server” to have the file server provide local name resolution 
services. This allows clients across multiple subnets to perform name/address 
resolution.
Choose “Register with WINS server” if your Windows clients and Windows server are not 
all on the same subnet, and your network has a WINS server. Then enter the IP address 
or DNS name of the WINS server.
4 Click Save.
From the Command Line
You can also change WINS settings using the serveradmin command in Terminal. 
For more information, see the file services chapter of the command-line administration 
guide.
LL2356.book  Page 58  Thursday, September 4, 2003  3:21 PM
6
59
6 Solving Problems With Windows 
Services
If you encounter problems while working with Windows 
services of Mac OS X Server, you might find a solution in 
this chapter.
Problems are listed in the following categories:
• Problems with a primary domain controller
• Problems with Windows file service
• Problems with Windows print service
Problems With a Primary Domain Controller
Problems with a primary domain controller (PDC) can have several causes.
User Can’t Log in to the Windows Domain
• Make sure the user account is configured to use Open Directory authentication. If the 
user account was created in a previous version of Mac OS X Server (version 10.1 or 
earlier) and is still configured to use Authentication Manager (the password type is 
“Crypt password”), change the account to use Open Directory authentication.
• Make sure the workstation has joined the PDC domain
Windows User Has No Home Directory
• Make sure the correct home directory location is selected on the Home pane of 
Workgroup Manger. 
• Make sure the home directory path is correct on the Windows pane of Workgroup 
Manger. 
• Using Server Admin, connect to the server where the user’s home directory resides. 
Select Windows in the Computers & Services list, click Advanced, and make sure the 
“Enable virtual share points” setting is selected. 
• The drive letter chosen for the user may be conflicting with a drive letter that’s 
already in use on the Windows workstation. Remedy:  change either the drive letter 
setting on the Windows pane of Workgroup Manager or the mappings of other drive 
letters on the workstation.
LL2356.book  Page 59  Thursday, September 4, 2003  3:21 PM
60
Chapter 6    Solving Problems With Windows Services
Windows User’s Profile Settings Revert to Defaults
• Make sure the correct home directory location is selected on the Home pane of 
Workgroup Manger. 
• Make sure the home directory path is correct on the Windows pane of Workgroup 
Manger. 
• The drive letter chosen for the user may be conflicting with a drive letter that’s 
already in use on the Windows workstation. Remedy:  change either the drive letter 
setting on the Windows pane of Workgroup Manager or the mappings of other drive 
letters on the workstation.
Windows User Loses Contents of My Documents Folder
• Make sure the correct home directory location is selected on the Home pane of 
Workgroup Manger. 
• Make sure the user profile path is correct on the Windows pane of Workgroup 
Manger. The contents of My Documents are stored in the user profile. 
• The drive letter chosen for the user may be conflicting with a drive letter that’s 
already in use on the Windows workstation. Remedy:  change either the drive letter 
setting on the Windows pane of Workgroup Manager or the mappings of other drive 
letters on the workstation.
Problems With Windows File Service
You can solve some common problems with Windows file service and with file services 
in general.
User Can’t Authenticate for Windows File Service
If a user can’t authenticate for Windows file service, make sure the user account is 
configured to use Open Directory authentication. If the user account was created in a 
previous version of Mac OS X Server (version 10.1 or earlier) and is still configured to 
use Authentication Manager, change the account to use Open Directory 
authentication. You do this in the Advanced pane of a user account window in 
Workgroup Manager.
User Can’t See the Windows Server in the Network Neighborhood
• Make sure the user’s computer is properly configured for TCP/IP and has the 
appropriate Windows networking software installed.
• Go to the DOS prompt on the client computer and type “ping IP address” where 
IP address is your server’s address. If the ping fails, then there is a TCP/IP network 
problem.
• If the user’s computer is on a different subnet from the server, try the following:
• Make sure the “Enable WINS server” option is selected or the “Register with WINS 
server” option is selected and configured correctly. These options are in the 
Settings pane of Windows services in Server Admin.
LL2356.book  Page 60  Thursday, September 4, 2003  3:21 PM
Chapter 6    Solving Problems With Windows Services
61
• On the Windows computer, choose View > Refresh to force Windows to discover 
newly added network resources, which can otherwise take several minutes to be 
discovered.
• On the Windows computer, map a Mac OS X Server share point to a drive letter. 
You can do this by opening the Network Neighborhood and choosing Tools > Map 
Network Drive.
Note:  If Windows computers are properly configured for networking and connected to 
the network, client users can connect to the Windows file service of Mac OS X Server 
even if they can’t see the server icon in the Network Neighborhood window.
General Problems With File Services
For possible solutions to the following additional file services problems, see the chapter 
on solving problems in the file services administration guide.
• Users can’t find a shared item
• Users can’t see the contents of a share point
• You can’t find a volume or directory to use as a share point
Problems With Windows Print Service
You can solve some common problems with Windows print service and with print 
services in general.
Windows Users Can’t Print