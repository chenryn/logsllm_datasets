=== 发送策略
用户可以使用发送策略配置多种发送方式通知用户，可以选择不同优先级关联不同发送方式，例如优先级严重/重要关联电话通知，优先级中等关联短信/微信通知，优先级一般关联邮件通知。 
==== 发送策略列表
发送策略列表展示发送策略名称，发送条件，使用插件，编辑操作和删除操作。
image::images/cruxee-send-policy.png[]
==== 通知接收组管理
用户可以在日志易平台的用户、用户分组体系基础上，再额外定义常用的通知接收组。在 Incident 通知插件中，同时支持用户、用户分组和通知接收组。
在发送策略列表页右上角点击进入接收组管理页。点击新建，页面如下：
image::images/cruxee-recv-edit.png[]
通知接收组中同时可以配置"发送给"和"不发送给"两种名单。当"不发送给"名单中的用户，也存在于"发送给"名单中，或者是"发送给"名单中用户分组的成员时，系统发送通知过程会跳过该用户。比如，二线领导负责人通常也会在一线值班用户分组内，但是低级别告警在未升级之前，没必要发送到二线负责人，就可以配置一个"发送给一线值班分组，但不发送给二线领导"的接收组，供通知发送策略使用。
image::images/cruxee-recv-use.png[]
[NOTE]
====
incident的负责人自动收到通知。
====
==== 通道插件
cruxee提供默认插件：incident_email，ping_host。
cruxee也支持用户上传自己的告警插件：短信/微信告警，电话通知等。点击"通道插件"，进入插件列表页，可以看到和下载已有的插件，也可以上传新的插件。
image::images/cruxee-plugin-list.png[]
点击插件列表的"上传插件"，弹出悬浮层，选择插件类型：事件通知、事件操作。上传编写好的插件文件，点击上传，完成。通常如果告警插件是邮件告警、syslog告警、HTTP告警，短信/微信告警、电话通知等，插件类型选择事件通知。如果是ping_host插件，插件类型选择事件操作。
image::images/cruxee-plugin-upload.png[]
用户可以开发自定义插件，详情请见《日志易监控告警手册》中的"告警插件开发"章节。
==== 新建发送策略
点击发送策略列表页的"新建"，进入新建发送策略页面，可以看到发送策略拥有如下属性：
image::images/cruxee-new-send-policy.png[]
* 策略名称：必填策略名称。
* 合并发送时间：合并开始后不立刻发邮件，延迟一段时间后再发，默认30s。
* 发送条件：
** incident变更时发送：incident状态，评论，分配变更是否发送
** incident新增event时发送：incident接收到新的event时发送通知。当未勾选“incident新增event时发送”条件时，incident只会在达到首次合并时间时发一次通知，后续再合并的新告警不再发通知。关闭该条件不影响incident分配、评论等变更操作时的通知继续发送。
* 通道插件：可以设置不同优先级关联不同插件，优先级和插件是多对多的关系，一个发送策略可以应用到多个incident，incident的优先级不同则使用的发送插件不同。
=== 拓扑文件管理
拓扑文件是用于在对告警进行基于拓扑相似度的合并时使用的，支持多个拓扑文件定义，CSV拓扑文件中需要包含Source和Target两列，描述每条拓扑的两边端点名称。CSV可本地上传，可在线编辑，也可撤销编辑以及重置恢复未编辑前状态。
image::images/cruxee/topology-file-upload-edit.png[]
=== 语义模型管理
内置了一个简单语义模型，用户最好对内置模型进行更新，在语义模型页面点击编辑：
image::images/cruxee/semantics-model.png[]
选取模型更新的语料，如果选择自动更新，填写更新间隔，会在每个更新间隔对模型进行增量更新。保存后会对模型进行更新，更新成功后，可用模型会记录更新成功的时间，更新情况可以看到模型更新的状态。
语义模型也支持导入导出，以及重置操作，重置后会恢复内置模型。
注意，目前仅支持一个语义模型。
=== 配置告警列表展示字段
日志易提供自定义告警列表展示字段功能，在配置告警列表展示字段页面，可以定义事件详情里告警列表默认展示字段，以及每个字段对应的展示列宽和展示别名。和临时的"列定制" 一样，也可以手动输入 custom_info 内容的字段名。
image::images/cruxee-alertcef-table-config.png[]
=== 维护期
日志易提供维护期定义配置功能，用户可以配置维护期，后面可以对维护期内产生的告警进行过滤。
点击配置-通用-维护期，可以查看定义的维护期，包括进行中，计划中，已结束三种状态的维护期。
image::images/cruxee/maintenance-list.png[]
用户可以对维护期进行过滤查询，以及基于时间进行过滤。注意，要过滤计划中的维护期，需要在时间过滤中选择未来的时间。
点击“新建”，可以进行维护期的新建,如下图：
image::images/cruxee/maintenance-creation.png[]
选项如下：
* 名称： 维护期名称，必填，可以重复
* 描述： 对维护期进行的维护进行描述，可选
* 维护范围： 必填，可以指定告警的字段进行匹配，也可以选择全部；指定的可以逻辑组合多个条件； 并可以对维护范围进行预览
* 维护窗口：维护窗口配置，可以计划配置，也可以立即执行
image::images/cruxee/maintenance-impace-scope.png[]
** 立即执行： 支持15分钟/30分钟/1小时/2小时/4小时
** 计划时段： 支持单次/每天/每周/每月，对于每天/每周/每月周期性维护期进行时间段配置，以及最终终止时间配置
image::images/cruxee/maintenance-time-window.png[]
** 告警发送：对维护期内匹配的告警是否进行发送，默认打开，用户如果不想发送告警，可以关闭
不同状态的维护期支持不同的操作：
* 进行中的维护期：可以进行结束和复制操作，点击结束目前进行中的维护期会进入已结束状态
* 计划中的维护期：可以进行跳过和删除，点击跳过跳过本次维护，点击删除会删除整个维护期系列
* 已结束的维护期：不能进行操作
可以查看维护期影响的事件，告警，记录的统计信息，并能查看维护期影响的相关事件，告警以及记录。
image::images/cruxee/maintenance-impact-indicent-alert-record.png[]
== 数据对接
由于cruxee支持映射策略和预处理策略对告警原始记录进行归一化处理和数据解析、转换处理，因此cruxee接收的告警原始记录不需要满足特定的数据格式，用户只需要将告警原始记录以json数据的形式通过API发送到Cruxee或写入Kafka即可完成数据对接。
* API 为 `POST /api/v3/incidents/event/`。
* Kafka topic默认为event_correlation，目前暂不支持修改。