（6）启动服务器。
启用日志记录，对服务器运行情况的监视、服务器复制和数据恢复过程都有帮助。
--user选项放在某个选项文件里，可以避免每次启动服务器时必须指定它的麻烦。
下连接到MySQL。
为MySQL账户分配密码，以获得更好的安全性。默认的安装设置允许在不提供密码的情况
A.3MySQL安装说明
537
已
---
## Page 558
这些权限表控制着对服务器的访问权限。这一步操作只有在你想要运行MySQL服务器时才需要。如
A.3.4初始化数据目录和权限表
录分隔开。例如，MySQL安装在C：\mysq1里，则可以把；C：\mysql\bin添加这个路径里。
的值：
样一行内容：
的.bashrc或.bash_profile文件。例如，使用的是tcsh，则.tcshrc文件里便可能会有下面这
各个MySQL程序会变得更加方便。这时，只输入命令名即可，不需要指定其完整的路径名。
哪里查找程序。如果设置 PATH 环境变量，让其包含位于MySQL安装目录下的bin目录，则调用
A.3.3
控制更多的配置参数。例如，可以编译发行包，让其只包含想要的那些存储引擎。
采用这种方式会涉及更多的内容，因为你需要编译该软件。不过，这种方式带来的好处是，你可以
连接到你所使用的服务器。如果你想要自己编写程序，则还会需要安装开发包。
一台机器上的服务器，则不需要安装服务器。不过，客户端软件应该总是需要安装，这样你才能够
装上。例如，RPM包可能把发行包划分为服务器、客户端和开发包。如果你只是要连接到运行在另
安装MySQL 所需要的各个步骤。
A.3.2
538
在刚安装好的MySQL可以使用之前，必须对数据目录和mysql数据库里的权限表进行初始化。
重新打开一个新的控制台窗口（或者重启Windows），便可以看到这个更改生效。
在Unix里，PATH变量通常是在 shell的某个启动文件里设置的，如 tcsh的.tcshrc文件、bash
你也可以通过源代码发行包来构建MySQL。与通过二进制（预构建）发行包来安装的方式相比，
当在Windows上安装MySQL时，我推荐你使用MySQL安装程序。这个安装程序会引导你完成
如果MySQL程序都安装在/usr/local/mysql/bin目录里，那么可以像下面这样更改PATH
当你在命令提示符下输人命令时，shell（命令解释器）程序会使用环境变量PATH来确定应该到
(4）把适当的bin目录添加到这个路径里，在前面加上一个分号，将它与路径里的最后一个目
（1）在桌面上右击“我的电脑”，选择“属性”。
在Windows里，设置PATH值的操作步骤如下。
在完成对 shell启动文件的修改之后，这些新的设置将在下次登录时生效。
PATH=/usr/local/mysql/bin:/bin:/usr/bin:/usr/local/bin
可以把这个设置更改为下面这样：
PATH=/bin:/usr/bin:/usr/local/bin
如果使用的是bash，则它的某个启动文件里应该会包含下面这样的内容：
setenvPATH/usr/local/mysql/bin:/bin:/usr/bin:/usr/local/bin
setenv PATH/bin:/usr/bin:/usr/local/bin
有些软件包格式可能会把一个完整的发行包分割成多个组件，因此一定要把你需要的软件包都
在Unix里，MySQL发行包包含一个或多个下列组件。
3)
口
口
口
设置环境变量PATH
客户端编程支持（C语言库文件和头文件）。
mysqla服务器。
从系统变量列表中选择“路径”，然后单击“编辑”。
选择“高级”选项卡，并单击“环境变量”。
附录A本书所需要的各类软件
安装MySQL
12
---
## Page 559
A.3.5.2在Windows上启动服务器
mysqld_safe来启动服务器：
--user 选项。
MySQL用户身份（如mysql）登录的，或者是以你自己的账户来运行MySQL的，则可以省略这个
份来执行，并且需要使用--user 选项来告知服务器以 mysql 用户身份来运行。不过，如果你是以
A.3.5.1在Unix上启动服务器
A.3.5
时不会再去重新创建它们。使用下面这条命令可以删除整个mysql数据库：
的权限表也不完整。这时，应该将它们完全删除，因为 mysql_install_db 在发现这些权限表存在
对你所遇到的问题是如何描述的。如果mysql_install_db 没有完全执行成功，则很可能它所创建
以获得更多让安装变得更安全的指导。
把数据目录的访问模式设置为只允许该用户访问。
和访问模式。假设，用户和用户组的名字都是mysql，则相关命令如下所示：
装在/usr/local/mysql目录下，则需要执行下面这两条命令：
需要这样做，因为安装过程会自动执行mysql_instal1_db 脚本。）例如，如果想把 MySQL软件安
的安装目录，然后执行 mysql_install_db 脚本。（如果通过 RPM包或 Mac OS X包来安装，则不
chgrp 命令。
那么不用root 身份也可以执行这些命令，并且应该忽略--user 选项。这时，可以跳过chown 和
果以MySQL账户身份（如mysql）登录，或者因为只想自己使用而以自己的账户来安装MySQL，
本目录里，名字为data 或者var。一般情况下，本节里的命令都需要以 root 用户身份来执行。
作也可以跳过，因为这些权限表都包含在Windows发行包的预初始化动作里。
果只是想使用MySQL客户端软件，则可以跳过这一步。如果运行环境是Windows 系统，则此步操
先把当前路径切换到 MySQL 的安装基本目录（如/usr/local/mysql），然后使用
本节的命令都需要在MySQL的安装目录里执行。一般情况下，这些命令都需要以root用户身
在安装好MySQL之后，便可以启动服务器。这个过程在Unix和Windows上会有所不同。
如果mysql_install_db 执行失败，可以查阅 MySQL参考手册里与安装有关的章节，看看它
最后几步实际上是更为综合的锁定过程中的一部分，详细内容请参考13.1.2节。查看该节，可
如果你未把MySQL安装到安装程序选定的默认位置,则必须在服务器在启动时会读取的某个选
如果想对数据目录、mysql数据库和默认权限表进行初始化，可以先把当前路径切换到MySQL
你既可以在命令行指定其他选项，也可以在选项文件里指定选项。相关信息请参考12.2.3节。
#cd /usr/local/mysql
在运行mysql_install_db之后，需要更改数据目录里所有文件的所有权（包括用户和用户组）
在接下来的指导说明里，DATADIR代表的是数据目录的路径名。它通常位于MySQL安装的基
#bin/mysqld_safe --user=mysql &
#rm -rf DATADIR/mysql
命
#chowm -Rmysql DATADIR
scripts/mysql_install_db --user=mysql
#
令chown和chgrp会把所有权更改为MySQL登录账户的用户和用户组，而chmod命令会
cd/usr/local/mysql
chgrp
启动服务器
go-rWXDATADIR
DATADIR
A.3MySQL安装说明
539
---
## Page 560
里不存在下面这些内容，则必须安装它们。
码发行包里的 scripts 目录。找到这个文件之后，便可以在它所在的目录里执行以下命令：
句。这个文件可能的存放位置包括/usr/share/mysql、MySQL安装目录下的 share目录和源代
Windows系统里的MySQL发行包也包含预初始化好的帮助表。因此，通常不需要手动设置这些帮助表。
mysql数据库里设置帮助表。大部分的安装方法在首次安装时都会自动完成这个设置，并且现在
助表）进行设置。
A.3.6
一起自动启动。更多详细信息请参考12.2.2.2节。
只需要另外打开一个控制台窗口，即可运行MySQL客户端程序。
其他选项。
命令：
反斜线“\")：
C:\mysql下，则这个选项组将类似下面这个样子（请注意，路径名里使用的是斜线“/”，而不是
选项。
上--console选项：
的选项文件是 MySQL 安装目录里的 my.ini 文件或C：\my.ini。例如，如果 MySQL 安装在
项文件里加上一个[mysqld]选项组，以便服务器能够确定安装目录和数据目录的具体位置。最常用
A.4
540
如果想要编写访问 MySQL数据库的 Perl脚本，则必须要有可用的 DBI软件。如果在你的系统
如果你使用的安装方法没有设置帮助表，则可以手动加载它们。操作方法是，先确保服务器正
另一种在Windows上运行服务器的方法是，为MySQL创建一个服务，让其可以随着Windows
如果通过命令行来启动服务器，则只有等到服务器退出时才能看到下一个命令提示符。这时，
口DBI模块提供的是通用的DBI驱动程序，而DBD:mysql模块提供的是特定于MySQL的驱
上面这条命令会提示你输入 MySQL的 root 账户密码。如果还没有设置密码，则需要省略-p
行。然后，找到fill_help_tables.sql文件，其中包含了用于创建和加载帮助表的SQL语
命令行客户端程序mysql可以通过help命令访问服务器端的帮助信息。为启用此命令，必须在
时区表可用于指定所要使用的时区。要启用它们，可参考12.6.1节的操作指导。
在启动服务器后，还可以选择性地对mysql数据库里的其他系统表（如时区表和服务器端的帮
当以控制台模式运行服务器时，可以在命令行的--console 选项之后，或者在选项文件里指定
C:\>mysqld--console
如果想以控制台模式来运行服务器，以便它能在控制台窗口显示出错信息，可以在启用它时带
可以在命令行或选项文件里指定其他选项。更多信息请参考12.2.3节。
C:\>mysqld
为从命令行手动启动服务器，可以把目录位置更改到服务器安装的地方，然后输入下面这条
如果选择了不同的安装目录，
datadir=C:/mysql/data
basedir=C:/mysql
[mysqld]
6初始化其他系统表
最低要求为5.8.1。（如果你还没有安装Perl，那么可以访问 http://www.perl.com/，下
动程序。DBI对Perl版本的最低要求为5.6.0（首选为5.6.1）。自DBI1.611起，Perl版本的
Perl DBI安装说明
附录A本书所需要的各类软件
则一定要记得更改这个选项文件里的路径名。
---
## Page 561
用作 PHP脚本扩展名，需要把下面这行内容添加到 httpd.conf 文件里：
脚本的文件扩展名。最常用的扩展名是·php，这也是本书的各个示例所使用的扩展名。为把.php
能需要根据你的系统进行相应的调整：
则必须自己动手添加它们。它们看起来应该像下面这个样子，但是LoadModule 指令里的路径名
AddModule指今
含其他文件。如果在该文件里没有看到下面几段所描述的信息，那么还要检查其他包含文件。）
动时加载PHP模块，以及如何识别PHP脚本。（配置文件httpd.conf可以使用Include指令来包
“详细安装”（VERBOSEINSTALL）部分。
序，则一定要选择扩展安装，否则 PDO支持和MySQL支持将不会被安装。
配置以支持PHP，并且会设置环境变量PATH，让其包含PHP的安装位置。不过，如果使用安装
将其解压缩到你想要安装PHP的位置。使用.msi包会更加方便，因为它可以引导你对Apache进
PHP的二进制发行包有两种格式：Zip压缩包和.msi 安装程序。如果使用Zip压缩包格式，则需
版
这
客户端开发库。（这个库应该在MySQL的安装过程中便安装好。）
信协议，并可用于替代它。如果不使用mysqlnd，则除了安装 PDO库以外，还必须安装 MySQL的
详见附录G）或mysqlnd 库。mysqlnd是一个本机驱动，它实现了与libmysqlclient一样的通
则必须安装PHP。如果你还没有安装PHP，则可以访问http：//www.php.net，获得相应的发行包
的PHP。假设
A.5
获得所需的模块。
为告知 Apache 加载 PHP 模块，必须在 httpd.conf 里的适当部分包含 LoadModule 和
反本。更多相关信息请参考http://www.php.net/pdo。
是PDO第一次与PHP捆绑发行的版本。当把PDO与mysqlnd一起使用时，至少需要使用PHP5.3
如果在设置PHP时遇到了问题，则可以打开包含在PHP发行包里INSTALL文件，查看其中的
如果通过源代码来编译PHP，则一定要使用包含MySQL和PDO支持的配置选项。对于Windows，
PDO在PHP5.0及以上的版本里都可以使用，但是本附录假定使用的最低版本为PHP5.1，因为
接下来，编辑httpd.conf 文件，告知Apache 如何识别PHP 脚本。PHP的识别依据的是 PHP
也可以让 Apache在 URL的末尾没有指定任何文件名时，把index.php 文件识别为目录的默认
AddTtype application/x-httpd-php .php
AddModulemod_php5.c
LoadModule php5_module 1ibexec/libphp5.so
在PHP和 PDO安装完成之后，查看Apache的配置文件httpd.conf。你需要指示Apache在)
本书在编写Web服务器端所使用的脚本时，使用的是带数据库访问扩展“PHP数据对象”（PDO）
如果模块已安装，那么 perldoc 会显示其文档。否则，可以访问 http://cpan.perl.org，
为找出某个给定的Perl模块是否已经安装，可以使用perldoc命令：
口如果要编写基于Web的DBI脚本，则需要安装CGI.pm模块。
口必须要有MySQL的C语言客户端开发库和头文件，因为DBD:mysql模块会使用它们。（它们
PHP和PDO安装说明
perldoc
perldoc DBD::mysql
perldoc DBI
应该已作为MySQL安装过程的一部分安装好了。）
载一个Perl发行包，并在安装DBI支持之前把它安装好。）
设，使用的是Apache Web服务器（也可以将其替换为其他服务器）。如果要使用PDO，
令（请查看其他类似的指令）。PHP安装可能已经替你添加了这些指令。如果没有，
CGI
A.5PHP和PDO安装说明
541
启
行
要
---
## Page 562
Apache的帮助文档。通常情况下，可以在系统启动时运行 apachectl start 命令，在系统关机时
在许多系统里，可以使用如下命令来完成此操作（以root用户身份来执行)：
文件。在http.conf 里找到下面这样的行：
542
也可以通过设置，让Apache随同系统的启动和关闭一起自动开始和停止。更多指导说明请参考
在编辑完Apache的配置文件之后，停止 httpd服务器（如果它正在运行的话)，然后将其重启。
DirectoryIndex index.php index.html
将其修改为下面这个样子：
DirectoryIndex index.html
#/usr/local/apache/bin/apachectlstop
附录A本书所需要的各类软件
---
## Page 563
值范围也不同。
于整数类型，因为存在有符号和无符号两种情况，所以需要指定两个取值范围，并且每种情况的取
而没有将它们单独列在各个类型的描述里。
含那些可应用于所有（或近平所有）数据类型的全局属性列出来。这些全局属性都集中列在下面，
TABLE语句（参考附录E）里也必须按同样的顺序列出它们。在各个数据类型的描述里并没有把包
可选属性关键字。这些属性将按字母表的顺序依次列出，但这并不表示在CREATETABLE或ALTER
数据类型参考
附录B
取值范围：适用于数字类型和时态（日期/时间）类型，它指的是该类型所能表示的最大值。对
允许长度：适用于字符串数据类型的列，它指的是该类型列的值被允许达到的最大长度。
DEFAULT default_value可用在除下面几种类型列以外的所有类型列的定义里：拥有
NULL或NOTNULL可用于任何类型。
可用属性：指的是一些可能会与CREATETABLE或ALTERTABLE语句里的数据类型有关联的
含义：对该类型的简短描述。
在对各种数据类型的描述里都包含有一种或多种下面的信息。
fsp表示的是那些允许带有小数秒的时态类型的小数秒精度。
口对于那些带有小数部分的数字类型，D代表的是小数精度（即小数点后面的位数）。D必须
M表示的是整型的最大显示宽度、浮点类型和小数类型的精度（有效位数）、
口语法描述里的可选信息都用方括号（1]）来表示。