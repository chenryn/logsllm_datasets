451
Authorized licensed use limited to: Tsinghua University. Downloaded on March 20,2021 at 09:59:27 UTC from IEEE Xplore.  Restrictions apply. 
Table1.TargetarchitecturesTechnologyCoresCountermeasurestimebusvolt.div.paritymon.FPGASPEAR[5](cid:2)∗(cid:2)ASICARM7TDMI(cid:2)(cid:2)ASICARM7TDMI(cid:2)(cid:2)(cid:2)∗optionalDeviceunderTestAmpArb. Waveform-generatorLogicAnalyzerPatternGeneratorVoltage-dropTriggerTriggerVCCTraceFigure2.Experimentsetuptocommonmodefaultsfoundinliterature[3],whichistheclassofdependentfaultsthatletsallchannelsfailcongener-ically.Theaimofourinvestigationistoassesspotentialcontributionsofdiverseprotectionmeasurestocandβbutwithoutchangeofthecore.4ExperimentSetup4.1GeneralSetupTheaimofourexperimentswastwofold:Primarilywewantedtoquantifytheeffectivenessofseveralcountermea-suresagainstCCFs.MoreoverwewantedtoattainabetterunderstandingoftheeffectofPSDonthedualcorearchi-tecture,whichmayunveilparticularlyunfavorableoperat-ingconditionsorgivesomeindicationsonhowtoimproveadualcore’sinherentrobustnessagainstCCFs.ForthatpurposeweperformedPSDfaultinjectiononthreediffer-enttargetplatforms:OneFPGAimplementationandtwocustomASICimplementationsofthedualcorearchitecturepresentedinSection3.Table1givesanoverviewofthecountermeasuresavailableontherespectiveplatforms.Inordertoattaincomparableresultswetookcaretouseasimilarsetupforalltargets.ThissetupisshowninFigure2.Alogicanalyzer(Agilent16902A)observestheopera-tionofthetarget.Byvirtueoftriggerconditionsspeciﬁceventsofinterestareidentiﬁed,andatriggerpulseisis-sued.Thistriggercontrolstheactivitiesofapatterngen-erator(alsopartofthe16902mainframe)andanarbitrarywaveformgenerator(Agilent33250A).Thedutyofthepat-terngeneratoristoprovidethetargetwithallrequireddigi-talinputs,suchase.g.reset.Thearbitrarywaveformgeneratorprovidesthe(core)ResetDeviceinit.ApplicationProg.statusVoltagetdEffect?Error detectedbyany mechanismNo errordetectedResultcorrectNo errordetectedResultincorrectFigure3.Experimentﬂowpowersupplytothetargetandisresponsibleforthefaultin-jection.Tothatenditapplieswellcontrolledvoltagedropsofarbitrarylength.Obviouslythearbitrarywaveformgen-erator’soutputistooweaktodirectlyprovidethesupplycurrentforthetarget;thereforeitsoutputisampliﬁedbyaTCA0372poweroperationalampliﬁer.Foralldevicesun-dertestweconﬁnedthePSDtothecorevoltage,leavingtheI/Ovoltageundisturbed.Thereasonforthiswas,thatdis-turbingtheI/Ovoltageislikelytocausereaderrorsatthelogicanalyzerwhilethedeviceundertestitselfmaystillbeworkingcorrectly,whichdistortsthestatistics.Thiseffectwasreportedin[12].Theoutputofthedeviceundertestistracedbythelogicanalyzer,andalogﬁleiswrittenouttoahostcomputer.Thishostcomputer(PC,integratedinthe16902A)isalsoresponsibleformaintainingtheappropriateconﬁgurationofallinvolvedtools.Experimentﬂow.Theexperimentsonthedifferenttar-getplatformsallshareasimilarﬂow,asshowninFigure3.Foreveryexperimentiterationﬁrstthepatterngeneratoras-sertsareset.Thenthedeviceundertestcanperformini-tializationroutinesnamelyreprogrammingtheinstructionmemoryandregisterinitializations.Nofaultinjectionisperformedduringthisphase.Thentheapplicationstarts,andafteradelayoftthefaultinjectionistriggeredforadu-rationofd.Theactualchoiceoftheseparametersrequiresconsiderablecareandwillbediscussedfurtherbelow.Outputclassiﬁcation.Aftertheinjectionofthefaultthereactionofthetargetisobserved.Inparticularthefol-lowingtwoissuesareevaluated:(i)Acheckisperformedonwhethertheapplicationworkloadrunningonthetargethasproducedacorrectresult,and(ii)informationonthetriggerederrordetectionmechanismisloggedforfurtheranalysis.Availableerrordetectionmechanismsareparityprotection,thedualcorecompareunitand—ontheASICtarget—avoltagemonitor.Basedonthisinformationthreedifferentoutcomesofanexperimentcanbedistinguished:1.Noerror:Theresultoftheapplicationiscorrect.Thismeansthatthefaultinjectionhasnotbeeneffective,whichmayresultfromdbeingtooshort(electricalmasking),orfromlogicalmaskingoftheinjectedfault.978-1-4244-4421-2/09/$25.00 c(cid:13)2009 IEEE
452
Authorized licensed use limited to: Tsinghua University. Downloaded on March 20,2021 at 09:59:27 UTC from IEEE Xplore.  Restrictions apply. 
log. ’0’1.5 Vlog. ’1’0 V(a)1.1 V+log. ’0’log. ’1’0 V(b)0.9 V+log. ’0’log. ’1’0 V(c)Figure4.PSDeffectsonlogictransition:(a)normaloperation(b)delayfault(c)logiclevelfault2.Errordetected:Theerrorissuccessfullydetectedbyatleastoneoftheavailableerrordetectionmechanismsbeforeanerroneousapplicationoutputwaswritten.3.Errorundetected:Theapplicationproducesanincor-rectoutputbutnoneoftheerrordetectionmechanismshastriggered.ThisindicatesthataCCFhasoccurred.Thecase“noerror”providesinsightinthetarget’sin-herentrobustnessagainstPSD.Ourmaininterest,however,istheproportionbetweenCCFsanddetectederrors,sincethisvalueindicatestheeffectivenessofourcountermea-sures.CCFsarerareevents,thereforewehavetocreateexperimentconditionsthatprovoketheiroccurrence,whichiscertainlynotthecaseintheclass“noerror”.Forthisreasonwewillfocusourexperimentstoconditionsthatarelikelytoprovokeerrors,whilewewillskipconditionsthatcanbeexpectedtoendupin“noerror”.Atthesametimeitisquiteobviousthatsubstantialupsetsinthechipoperationaremorelikelytobedetectedthanmoresubtleeffects.Wewillthereforealsoavoid“catastrophic”conditions.Howweachievedthiswillbedetailedinthefollowing.PresumedeffectsofPSD.FromPSDfaultinjectionlit-erature[7,11,12]weexpectedmainlytwotypesoffaultstooccur:delayfaultsandtransientlogiclevelfaults.Whichofthesetwoeffectswillprevailstronglydependsonthemag-nitudeofthevoltagedropinsidethechip.Giventhatthereareconsiderablecapacitancesinthesupplyrails,immediatevoltagedropscannotbeconveyedinsidethechip,theinter-nalvoltagewillratherfollowanexponentialcurvethatischaracterizedbytheapplicabletimeconstant(RC).Conse-quentlyfaultdurationhasacrucialimpactontheeffective,internalvoltagedrop.ToexplainthetwoabovementionedoutcomesofthePSDweapplyasimplisticmodelofwhichwebelieveitstillreﬂectstherelevanteffects.ItsprincipleisshowninFig-ure4.Theleftmostﬁgureshowsthenormaltransitionofalogicstage(NAND,inverter,etc.).Parasiticresistancesandcapacitancesagaincausethetransitiontofollowanexpo-nentialcurveratherthanbeingstep-shaped(Thetimecon-stantofthiscurve,however,ismuchsmallerthanthatofthepowersupply).Asaresultofthelimitedslope,thetran-sitionisdelayedbyanamountτ.Thisdelay(oritsworstcasevalue,respectively)isconsideredinthetiminganal-ysisofthecircuit,andtheclockfrequencyisdeterminedaccordingly.Adecreaseinthepowersupplydirectlyimpactstheﬁnalvaluethatisasymptoticallyreachedbythecurve.AscanbeseeninFigure4(b)thisleadstoanadditionaldelayε(notethatthisdelayincreasesmorethanlinearlywithdecreas-ingsupplyvoltage).Forvoltagedropsbelowthespeciﬁedminimumthisdelayisnotconsideredintheclocktiming,andisthereforelikelytocausetimingviolations,i.e.delayfaults.Aslongastimingmarginsareavailable,thesewillhavenoeffect.Wecanthereforeexpectthecriticalpathtobespeciﬁcallypronetodelayfaults,sinceithasthetightesttimingmargins.Afurtherdecreaseofthesupplyvoltagewillﬁnallypre-ventthestage’soutputvoltagetoreachthesubsequentin-put’sthresholdforlogic’1’,sincethethresholddoesnotscalewiththesupplyvoltagebutisratherdeterminedbytechnologyparameterslikedoping.ThiscaseisshowninFigure4(c)andwillfurtherbetermedlogiclevelfault.Al-thoughthresholdvoltagesandsupplydropresultingfromourinjectionvaryoverthechip,logiclevelfaultsarelikelytoaffectmultiplelocationsatthesametime,andthereforedonotexhibitathreatregardingCCFastheyarehighlyun-likelytoleadtoidenticalfaultpatternsonbothreplica.Thisiswhywedecidedtofocusondelayfaults.Experimentparameterspace.Basedontheabovecon-siderationswecannowdeterminesuitablevaluesforfaultdurationdanddelayt.Inordertocoverthewholedelayfaultspacewechosedtoliebetweennofault(Figure4(a))andlogiclevelfaults(Figure4(c)).Estimatesfortheseboundariesweredeterminedexperimentallyforeachtarget.Theparametertwaschosentoprovideinjectionsoverthewholeapplicationspace.Inordertovarytheavailabletimingmarginswedecidedtousedifferentvaluesfortheclockfrequencyfaswell.Morespeciﬁcallyfwaschosenbetween50%ofthenom-inalclockfrequencyandthemaximumpossiblefrequencywherethedevicewasstilloperationalatroomtemperature(whichturnedouttobesubstantiallyhigherthanthenomi-978-1-4244-4421-2/09/$25.00 c(cid:13)2009 IEEE
453
Authorized licensed use limited to: Tsinghua University. Downloaded on March 20,2021 at 09:59:27 UTC from IEEE Xplore.  Restrictions apply. 
InstructionmemoryInstructionAddressInstructionInstructionaddressCompareunitZ-1.5Z-1.5CompareunitMemoryData/AddressZ-1.5MemoryData/AddressDatamemoryZ-1.5InstructionMemoryinMemoryinPar. chk.Par. chk.Par. gen.Par. gen.Figure5.FPGAdualcorearchitecturenalfrequencyonsometargets).Obviouslywehadtoadapttheboundariesforthefaultdurationdtotherespectiveop-eratingfrequency.Theexactparametersspaceswedeter-minedforeachtargetaredetailedbelow.4.2FPGAsetupOurﬁrsttargetistheimplementationofthedualcorear-chitectureproposedin[8]onanFPGA.WhiletheFPGAplatformmaynotbethepreferredchoiceforasafetycrit-icalindustrialapplication,itsmajorbeneﬁtistheeasieraccessabilityandconﬁgurabilitythetechnologyhastoof-fer.WechoseanActelFusionFPGAastargetplatform,becausethisFPGAfamilyusesﬂashbasedconﬁgurationwhich,comparedtothemorecommonSRAMbasedFP-GAs,doesnotloseitsconﬁgurationincaseofavoltagedrop.Weusedamatrixmultiplicationasexperimentloadsinceithasahighfaultpropagationanditcaneasilybever-iﬁedbycheckingonlyafewresults.ThetargetarchitectureisdepictedinFigure5.ItusestwoSPEAR[5]processors,whichare16bitsoftcoresim-plementingaHarvardarchitecture.Asusual,theinstruc-tionanddatamemoriesareinstantiatedonlyonceoutsidethecorestosavearea.Thearchitectureprovidesthefollowingerrordetectionmechanismsresp.countermeasuresagainstCCFs:ThesignalscontrollingtheRAMs,namelyinstructionaddressandmemoryaddress/data/writeenablearecheckedbyacompareunit,whichcomparesthosesignalseachclockcycleandgeneratesanerrorincaseofamismatch.Thecompareunitisself-checking,i.e.itdetectsandreportsanyinherentsinglefault.Thecheckresultisavailableatastatuspinwhereitistracedbythelogicanalyzer.InordertoofferacountermeasureagainstfaultsintheRAMsandthebusesoutsidethecores,whicharenotpro-tectedbythecompareunit,parityprotectionwasimple-mented.Itgeneratesa2-bitparityforallbusesinthemas-tercorewhichisstoredintheRAMsandcheckedintheRAMsfortheaddressesresp.TheRAMoutputsareparitycheckedinthemastercore.Incaseofanerroneousparitycomparisonasignalreportsthemismatchforeachbus.Thiscomparisonsignalistracedatthelogicanalyzerandevalu-atedofﬂine,asweonlycheckiftheparityprotectionworksincaseofaCCF.Byintroducingtimediversity(1.5clockcyclesinourcase)afaultaffectingbothcoresconcurrentlythereforeaf-fectsthemindifferentstates.Thisisverylikelytoleadtodifferenterroneousbehaviorinthetwocoresandthereforetobedetectedbythecompareunit.Themechanismisim-plementedbyinsertingdelayelementsintothesignalpathsfromthemastercoretothecompareunit,andalsointhesignalpathfromtheRAMstothecheckercore.Inaddi-tionthecheckercore’sclockisinverted.Thetimediversitycanoptionallybedisabledbybypassingthedelayelementsandaligningthecheckerclockwiththemasterclock.Thisallowsforanexplicittestofthemechanism’seffectiveness.Experimentﬂow.Thelogicanalyzercontinuouslyver-iﬁestheapplication’sresultforeachiteration.Ifanerroroccursbutisdetectedoriftheapplicationresultiscorrect,notraceisstoredandthenextexperimentiterationisstartedimmediatelytoachieveahighnumberofexperimentitera-tions.However,whenanerrorremainsundetectedbythecompareunittheexperimentisstoppedandatraceﬁleoftheiterationiswrittenouttothehostcomputerforfurtheranalysis.Thiswriteoutprocessisverytimeconsumingduetothehighnumberoftracedinternalsignals.Thetraceisanalyzedofﬂineinordertoevaluatetheparitymechanism.Ifitalsofailedtodetecttheerror,wehaveencounteredaCCFthatisthenanalyzedfurthertoattainabettercompre-hensionofitsgenesis.Experiments1and2.TheexperimentswereconﬁnedtotheparameterspacegiveninTable2.Twoexperimentswerecarriedout,onewithtimediversityactivated(Exper-iment1)andonewithout(Experiment2).Sincetheplat-formdidnotchangeforthetwoexperiments,theparameterspacewasthesameforboth.Theparametertwaschosentoinjectthroughouttheapplication,whichhadaruntimeofapproximately250μs.dwasdeterminedexperimentally,asford40μsalreadyledtologiclevelfaultsi.e.sys-temblackoutsofseveralμs,whichiseasilydetectable.Thesystemclockfrequencywaschosenexperimentallyaswell,978-1-4244-4421-2/09/$25.00 c(cid:13)2009 IEEE
454
Authorized licensed use limited to: Tsinghua University. Downloaded on March 20,2021 at 09:59:27 UTC from IEEE Xplore.  Restrictions apply. 