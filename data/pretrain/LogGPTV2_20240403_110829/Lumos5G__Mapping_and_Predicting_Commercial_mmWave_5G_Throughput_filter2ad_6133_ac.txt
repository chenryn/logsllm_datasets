2
2
1300 m
We judiciously select three urban areas with mmWave 5G
coverage (see Table 2 for summary). (1) Intersection: an outdoor
the heart of Minneapolis
four-way traffic intersection at
downtown region consisting of 3 dual-panel
faced 5G
towers, (2) Airport: representing an indoor mall-area inside
Minneapolis-St.Paul (MSP) International Airport with two head-on
single-panel 5G towers ∼200m apart, and (3) Loop: a 1300-meter
loop near U.S. Bank Stadium in Minneapolis downtown area that
covers roads, railroad crossings, restaurants, coffee shops, and
recreational outdoor parks. These areas are representative as they
cover indoor and outdoor environments in an urban setting.
Table 3: Full Dataset Statistics.
38,632 GBs of data downloaded over 5G
6 months
563,840 (per-sec. throughput w/ feature) samples
Data Points
Mobility Modes Walking (331 km), Driving (132 km), Stationary
Data
Duration
For each area, we select several trajectories and perform multiple
walking passes per trajectory (at least 30×). For instance, the 4-way
intersection had 12 different walking trajectories. In addition to
walking, we also conduct driving tests at the Loop area with speeds
ranging between 0 to 45 kmph. Our full dataset covers 331 km
walking and 132 km driving (see Table 3 for other statistics).
Ethical Consideration. This study was carried out by paid and
volunteer graduate and undergraduate students. No personally
identifiable information (PII) was collected or used, nor were any
human subjects involved. Our study complies with the customer
agreements of the wireless carrier.
4 5G THROUGHPUT MEASUREMENT &
IMPACT FACTOR ANALYSIS
Using our collected dataset, we investigate how a wide range of
factors affect 5G throughput. This provides insight for feature
selection of our ML-based framework in §5. A summary of our
findings is shown in Table 4.
4.1 Impact of Geolocation
In 3G/4G networks, geographic location is the dominant factor for
indicating throughput performance [20, 25, 26, 53] or their coverage.
However, as shown earlier, our initial experiments on 5G networks
indicate that the throughput performance wildly fluctuates even
for areas known to have 5G service. Next, we study the impact
of geolocation (i.e., pixelized latitude, longitude information, see
IMC ’20, October 27–29, 2020, Virtual Event, USA
Arvind Narayanan, Eman Ramadan, Rishabh Mehta, Xinyue Hu, et al.
Table 4: Summary of Factors Affecting 5G Throughput and Its Predictability for the Indoor (Airport) Area
(See Appendix A.1 for More Details and the Results for the Other Areas).
Results ⇒
⇓ UE-Side Factors
(1) Geolocation
(2) Mobility + (1)
⊢ UE-Panel Distance
⊢ UE-Panel Positional Angle
⊢ UE-Panel Mobility Angle
⊢ Moving Speed
CV
Sp. Coeff.
KNN
Statistical Analysis
Simple Pred. Models
RF [20, 54]
(mean ±std. dev. ) (p-val. > 0.001) (mean ±std. dev. ) MAE RMSE MAE RMSE
57.60% ±22.24
228 313
0.021 ±0.19
Norm. Test
240 326
51.56%
40.24% ±20.94
78.05%
0.68 ±0.14
167 247
135 201
Key Observations
Geolocation alone is insufficient to characterize &
predict 5G throughput, but it still remains a key factor.
Along with geolocation, accounting for
mobility-related factors decreases variation
in 5G throughput and improves its predictability.
Table 5: Statistical Analysis to Show the Percentage of
Geolocations Whose Throughput Significantly Differs From
Each Other (p-val < 0.1).
Pairwise t-test
Pairwise Levene test
Indoor Outdoor
69.66%
70.86%
64.26%
61.06%
Key Observation
Geolocation still matters for
5G throughput prediction.
The p-value results (see Fig. 7a) show that considering a signifi-
cance level of 0.1, on average, the mean throughput measurements
of 70.86% of geolocation pairs for indoor area significantly differ
from each other. These numbers imply that geolocation is one of
the key factors to capture throughput differences. Similar results
for Outdoor (4-way intersection) are included in Table 5.
Next, we study the throughput variability at the same geoloca-
tion. The normality test results in Table 4 show that throughput
measurements of roughly 48% of geolocations (i.e., almost half the
area) at the airport do not follow normal distribution. To reduce
the false positives in detecting normal distributions, we use two
types of normality tests: (1) D’Agostino-Pearson test [28, 29], and
(2) Anderson-Darling test [21]. We consider the measurements as-
sociated with a geolocation as normal if they pass any of the two
types. We also calculate the mean and coefficient of variation (CV)
of throughput samples at each geolocation. We find that approx-
imately 53% of geolocations have CV values ≥ 50% (see CDF in
Fig. 7b), (the plots for the other tests are in Appendix A.1.1). This
confirms our observation that 5G throughput varies significantly
even at the same geolocation. Indeed, when we attempt to build
ML models using geolocation as the only feature, we find that the
models (we use KNN and Random Forest, see Table 4) yield poor ac-
curacy – an average MAE and RMSE of ∼234 Mbps and ∼320 Mbps,
respectively. The results indicate that geolocation alone is insuf-
ficient to characterize or predict 5G throughput.
4.2 Impact of Mobility Direction
Besides geolocation, we now investigate how mobility direction
affects 5G throughput. We select mobility direction as a factor since
unlike omnidirectional signals in 3G/4G, 5G mmWave signals are
highly directional, and sensitive to obstructions such as human
body or structures [47, 55, 57, 67]. For instance, walking away from
a 5G panel will naturally obstruct the UE’s LoS to the 5G panel due
to user’s body, thus needing to acquire a NLoS reflective path.
We exemplify our finding using the Airport area data. We fil-
ter data representing two walking trajectories: NB (north-bound)
and SB (south-bound). The data represents throughput traces col-
lected by walking each of the two trajectories repeatedly for over
30 times. Each of the ∼340-meter long walking sessions captured
Figure 6: 5G Throughput Maps.
(a) Indoor (Airport) v/s (b) Outdoor (Intersection)
Table 1 for details) on 5G throughput. We exemplify using data
from the Airport and Intersection areas.
Fig. 6 shows the 5G throughput map visualized as a (scatter-plot)
heatmap, where each point represents a grid of 2𝑚 × 2𝑚 area. For
each grid, we calculate the mean of all throughput measurements
color-coded to represent different throughput levels: dark red for
below 60 Mbps and lime green for above 1 Gbps. 5G panel locations
(pink arrow) are also marked indicating the direction of coverage.
We make the following observations: (1) in certain patches 5G
throughput is consistently high; (2) in other patches 5G throughput
is consistently poor, e.g., due to frequent horizontal and/or vertical
handoffs caused by obstructions in and around the environment;
(3) finally, there are patches where the throughput is uncertain.
(a) Similarity of throughput
samples between geolocations
using pairwise t-test.
(b) Variability of throughput
samples within the
same
geolocation using CV.
Figure 7: Measuring 5G Throughput Similarity & Variability
To quantify the throughput differences across different geoloca-
tions, we perform pairwise t-test and Levene test of throughput
measurements for every pair of geolocation (or grid) at the airport.
Throughput< 60 Mbps1000+ Mbps(a) Indoor5G Panel Location & OrientationSouthPanelNorthPanel(b) OutdoorAirport4-way Traffic Intersection0.000.050.100.150.20t−test(p-val)0.000.250.500.751.00CDFIndoorOutdoor0255075100125CV(in%)0.000.250.500.751.00CDFIndoorOutdoorLumos5G: Mapping and Predicting Commercial mmWave 5G Throughput
IMC ’20, October 27–29, 2020, Virtual Event, USA
Figure 8: Impact of UE-Panel Mobility Angle 𝜃𝑚 on 5G throughput. See left side for illustration of different values of 𝜃𝑚.
Recall from our previous analysis that we build KNN and RF
models using only the geolocation feature to predict the throughput,
and got poor accuracy. Based on those models, by additionally
accounting for mobility direction, we are able to reduce RMSE by
24% and 36% for KNN and RF, respectively. The results indicate that
in addition to the absolute geolocation, further considering
the movement direction leads to improved 5G throughput
prediction.
Figure 11: Varying Impact of UE-to-Panel Distance.
4.3 Impact of UE-Panel Distance
Inspired by our findings in §4.2, we now take a more detailed look
at the geometric relationship among 5G panel, UE, and moving
direction. We identify three geometric factors: (1) the UE-panel dis-
tance, (2) the UE-panel mobility angle (𝜃𝑚), and (3) the UE-panel
positional angle (𝜃𝑝). We quantify their impact on 5G through-
put in this subsection, §4.4, and §4.5, respectively. Due to its high
frequency, mmWave signals bear high attenuation as they propa-
gate. Therefore, as shown in Fig. 11a (the north panel at Airport),
the throughput degrades fast as the distance increases. However,
the detailed, quantitative distance-throughput relationship differs
from one location to another due to the environmental impact. For
example, Fig. 11b for the south panel at Airport shows that the
throughput first (statistically) goes down and then ramps up as the
distance increases. This is because there is NLoS between 50 and
100m due to obstacles (caused due to open-space restaurants and
information booths) in the mall-area. The UE regains LoS beyond
100m, and the regained throughput outweighs the penalty incurred
by distance increase.
4.4 Impact of UE-Panel Mobility Angle
We define the UE-panel mobility angle (𝜃𝑚) as the angle between
the line normal to the front-face of 5G panel and UE’s trajectory. It
represents UE’s movement with respect to the face of the 5G panel.
As illustrated in Fig. 8, when 𝜃𝑚 = 180°, the UE is moving head-on
towards 5G panel, and 0° when walking along the same direction
as the 5G panel’s facing direction. Thus, if a UE is hand-held by
a walking-user, 𝜃𝑚 = 0° will make the user’s body obstruct the
Figure 9: (a) NB v/s (b) SB: Airport Throughput Maps.
a ∼200-second throughput trace. Fig. 9 shows both these trajec-
tories as well as the location of the head-on 5G panels on either
sides of the mall-area. We also annotate the maps with patches
where handoffs usually occur (see cyan rectangular patches). We
select airport area because both panel locations were equipped
with single-sided 5G panel unlike dual-panel installations seen in
outdoor environments. This ensures that we are connected to only
one side of the panel, thus allowing us to understand the impact of
mobility direction. 5G throughput maps for trajectories NB and SB
are shown in Figs. 9a and 9b, respectively. We find that although
NB and SB are in opposite directions (with partial overlap in their
coverage footprints), their heatmaps are highly different, indicating
that mobility direction has a significant impact on 5G throughput
performance. Similar observations were made in other areas.
trend)
coefficients
To further quantify the above
observation, we use Spearman’s
rank correlation coefficient to
measure the monotonic trend
(i.e., a consistent upward or
downward
between
throughput traces. The average
Spearman
of
throughput traces belonging to
NB and SB are 0.61 and 0.74,
respectively. In other words, with
values above 0.5,
throughput
traces in the same direction shows a consistent trend in increase
or decrease of throughput values along the trajectory. However,
the average Spearman coefficients between throughput traces
belonging to different directions is only 0.021. Fig. 10 further
shows the drastic increase in Spearman’s coefficients by grouping
traces according to their mobility directions. Similarly, 29.76% of
geolocations have throughput samples with CV values greater than
50% – a decrease of 23% (see Appendix A.1.2 for extended results).
Figure 10: Impact of
Mobility Trajectory.
θm=180°θm=270°θm=0°θm=90°User WalkingDirectionLocation CoordinatesUser Walking DirectionLine normal to the front-face of 5G panel5G Panel[0,15)[15,30)[30,45)[45,60)[60,75)[75,90)[90,105)[105,120)[120,135)[135,150)[150,165)[165,180)[180,195)[195,210)[210,225)[225,240)[240,255)[255,270)[270,285)[285,300)[300,315)[315,330)[330,345)[345,360]UE-PanelMobilityAngleinDegrees(rangeofθpin◦)040080012001600Throughput(Mbps)(a) NBSouthPanelNorthPanelSouthPanelNorthPanelWalking DirectionWalking DirectionHandoff Patch(b) SBThroughput< 60 Mbps1000+ Mbps5G Panel Location & Orientation0.000.250.500.751.00Spearmancoeﬃcient0.000.250.500.751.00CDFNB+SBNBonlySBonly[0,25)[25,50)[50,75)[75,100)UE-PanelDistance(inmeters)040080012001600Throughput(Mbps)NorthPanel[0,25)[25,50)[50,75)[75,100)[100,125)[125,150)UE-PanelDistance(inmeters)040080012001600Throughput(Mbps)SouthPanelIMC ’20, October 27–29, 2020, Virtual Event, USA
Arvind Narayanan, Eman Ramadan, Rishabh Mehta, Xinyue Hu, et al.
LoS between UE and the 5G panel (the case in our experiments),
causing performance degradation. We indeed observe this high-
level trend in all three areas. However, again, different geolocations
exhibit discrepancy. For example, we identify one “outlier” where
𝜃𝑚 ∈ [30°, 75°) at the south panel (see Fig. 18 in Appendix A.1.3
for the analysis of each panel separately). Despite the user moving
away from the 5G panel, the throughput appears to be high. This is
likely because the signal is properly deflected by the environment,
mitigating any severe performance degradation incurred by NLoS.
4.5 Impact of UE-Panel Positional Angle
We define the UE-panel positional
angle (𝜃𝑝) as the angle between the line
normal to the 5G panel and the line
connecting the UE to the panel. When