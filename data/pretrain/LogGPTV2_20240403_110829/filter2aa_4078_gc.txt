供容错能力。
RAID-1 也被称为镜像。 它使用两个磁盘， 并含有相同 的数据信息 。 如果一个磁盘损坏， 另 一
个磁盘仍含有数据， 这样在单一磁盘损坏后， 系统仍能继续运行。 系统可能会在不干扰的情况下继
续运行或需要手动配置 以使用没有损坏的磁盘 ， 这取决于使用 的硬件 以及损坏的驱动器。
RAID-5 也叫作奇偶校验。 它使用三个或更多个磁盘 ， 相当于一个磁盘， 其中包含奇偶校验信
息 。 如果单一磁盘损坏 ， 磁盘阵列将继续运行 ， 但速度会变慢。
RAID-1 0 也被称为 RAID 1+0 或条带镜像， 是在条带但AID-O)配置上再配置两个或两个以上
的镜像(RAID-l )。 它使用至少 4 个磁盘， 但可以支持更多个磁盘， 磁盘可添加数应为偶数。 即使多
个磁盘损坏， 只要在每个镜像中至少有一个驱动器继续运行 ， 它就能继续运行。 例如， 如果有三个
镜像集(称为 Ml 、 M2、 M3)， 则共有 6 个磁盘。 如果 Ml、 M2、 M3 中 分别有一个驱动器损坏了 ，
该阵列将继续运行。 然而， 如果在任何镜像集中两个驱动器都损坏了 ， 如 M 1 的两个驱动器， 整个
阵列将无法继续运行。
注意 :
容错同备份不同 。 有时， 管理者可能会因为备份磁带的价格问题转而考虑用 RAID进行都分。
然而， 如果发生 了 灾难性的硬件故障 ， 并破坏了 一个磁盘阵列 ， 除非数据有备份， 否则其中 的数据
将会全部丢失。 同样， 如果没有备份， 意外使得数据发生损坏， 也不 能恢复。
RAID 可基于软件， 也可基于硬件。 基于软件的系统需要操作系统来管理阵列中 的磁盘， 而且
这会降低系统的整体性能。 它们相对便直， 因为不需要除额外磁盘以外的任何其他硬件。 基于硬件
的磁盘阵列系统通常更有效、 更可靠。 虽然基于硬件的磁盘阵列更昂贵， 但当使用这种阵列 以增加
其个关键组件的可用 性时 ， 益处大于成本。
基于硬件的磁盘阵列通常含有可以在逻辑上添加到磁盘阵列中的备用驱动器。 例如， 基于硬件
的 RAID-5 可能含有 5 个磁盘， 在 RAID-5 阵列中有 3 个磁盘， 另外还有两个备用磁盘。 如果一个
磁盘损坏， 硬件检测出了故障， 便能够在逻辑上将发生故障的磁盘替换为备用磁盘。 此外， 大多数
基于硬件的阵列支持热交换， 使得技术人员在不给系统断电的情况下能够更换损坏的磁盘。 冷交换
的 RAID 要求系统关机后才能更换损坏的驱动器。
1 8.2.2 保护服务器
可 以通过故障转移集群将容错功能添加到关键服务器中 。 故障转移集群含有两个或两个以上的
第 18章 灾难恢复计划
服务器， 如果其中一台服务器出现故障， 集群中 的其他服务器可以通过称为故障转移的 自动化过程
接管其负载。 故障转移集群可以含有多 台服务器(不只是两台)， 它们还可以为多个服务或应用程序，
提供容错功能 。
作为故障转移集群的一个例子， 如图 1 8.2 所示 。 图 中多个组件组合在一起 ， 为使用数据库的大
量网站访问提供了可靠的 Web 访问方式。 DBl 和 DB2 是配置在故障转移集群中 的两台数据库服务
器。 在任何给定的时间 内 ， 只有一台服务器将作为活动数据库服务器， 而另一台服务器将处于不活
动状态。 例如， 如果 DBl 是活动服务器， 它将执行网站所有的数据库服务。 DB2 监视 DBl 以确保
其正常运行。 如果 DB2 检测到 DBl 损坏， 集群中 的故障将 自 动转移到 DB2 。
互联网
访问
器
群时袋
ac
瞬即 志A
Mf
咄山
群
‘ 寸
的
用
下 的 故 障 转 移
+'
像 l|“
1 i
l J
载
vn
UI 气卢
b气〔 A μ
、
?岛 阳 /
、
子、 ，‘
气/­
-图
…8
DB1 网络负载均衡
Web 1
数据库服务器使
用 的数据库
如 图 1 8.2 所示， DBl 和 DB2 都能防 问数据库中 的数据。 这些数据存储在 RAID 磁盘阵列上，
这为磁盘提供 了 容错能力 。
此外， 三台 Web 服务器被配置在网络负载均衡集群中。 负载均衡器可以基于软件， 也可基于硬
件， 它平衡了三台服务器上的客户端负载。 可 以添加额外的 Web 服务器来处理增加的负载， 同时也
平衡所有服务器之间 的负载。 如果服务器发生故障， 负载均衡器可以感知故障并停止向服务器发送
数据 。 虽然网络负载均衡主要用来增加系统的可扩展性， 使它可以处理更多的数据， 但也提供了 容
错功能。
注意 :
故障转移集群不是服务器容错的唯一方法。 一些 系 统为服务器提供 了 自 动容错功能， 允许服务
器发生故障而不失去继续提供服务的能力。 例如， 在具有两个或两个以上的域控制器的微软域中 ，
每个域控制器将定期与其他域控制器复制数据， 以使所有的域控制器都具有相同 的数据。 如果一个
域控制器产生故障， 域内 的计算机仍 然可以找到 另 一个(多 个)域控制器且网络可以继续运行。 同样，
许多 数据库服务器含有复制其他服务器数据的方法， 以使所有的服务器都具有相同的内容。 其中三
种方法是电子传送、 远程 日 志记录和远程镜像， 它 们将在本章稍后讨论。
1 8.2.3 保护电源
可 以为不间断供电电源(UPS)、 发电机或它们两者提供容错能力。 一般情况下 ， 不间断供电电源
提供 5到30 分钟的短时间供电， 而发电机提供长期电力。 使用 UPS 的 目 的是为完成系统的逻辑性
关 闭提供足够 的时间， 或在发电机发 电提供稳定 电源之前维持 电力供应。
543
CISSP 官方学 习指南(第 7 版)
理想情况下， 电力是稳定的 、 无波动的 。 但在现实中， 商业供电面临各种各样的问题。 激增指
的是电压快速增高， 而下滑指的是电压突然快速降低。 如果电力长时间维持在高压状态， 则被称为
电涌而不是激增。 如果长时间处于低压状态， 则被称为电力不足。 偶尔， 电源线会有噪音， 这种情
况被称为瞬变 ， 瞬变有许多种来源 。 所有这些 问 题都可能会导致 电力设备故障。
最基本的不间断电源(也被称为离线或备用 电源)提供电涌保护和电池备份。 它被插入到商业电
源中， 比较关键的系统会被插入到 UPS 系统中 。 如果电源发生故障， 备用 电池会为系统短时间供电。
在线互动式的不间断电源越来越受欢迎， 除 了基本功能外， 它们还增加了 其他功能。 它们含有可变
电压互感器， 能够在不使用 电池电量的情况下对高低电压做出调整。 在断电时， 电池能为系统短时
间供电。
发 电机能够在长时间断电期间为系统供电。 发电机供电时间 的长短取决于燃料， 只要发电机有
燃料， 就能依靠发 电机获得稳定 电力。 发 电机一般使用柴油 、 天然气或丙皖作为燃料。
1 8.2.4 受信恢复
受信恢复保证系统在发生故障或崩溃之后 ， 能够还原到之前的状态 。 根据故障的类型 ， 还原可
以分为 自动还原和管理员手动干预还原。 然后， 不论哪种还原方式， 系统应该被预置， 以确保还原
的安全性 。
系统可以被预置， 在损坏时能够处于故障防护状态或应急开放状态。 处于故障防护状态的系统
会在故障发生时 保持在防护状态， 并禁止所有访问 。 应急开放的系统会在发生故障前保持在开放状
态 ， 并授权所有访 问 。 对二者的选择取决于在系统故障之后安全性和可用性的重要程度。
544
例如， 防火墙通过控制网络的访问和拒绝来维持安全性。 防火墙配置了 隐式否认体系， 只允许
规定中 明确指出可以进入的流量信息进入。 防火墙通常被设计为故障防护状态， 支持隐式否认体系。
如果防火墙发生故障， 所有的流量都会被禁止。 虽然这消除了防火墙通信的可用性， 但很安全。 相
比之下 ， 如果通信的可用性比安全性更重要的话， 防火墙可以被配置为应急开放状态， 允许所有的
流量通过， 这是不安全的， 但 网络通信不会被禁止。
注意 :
在具有电子硬件锁的物理安全体系 中 ， 使用 术语 "故障防护状态" 和 "应急开放状态"。 具体而
言 ， 应急开放状态的 电子锁在断电时就会解锁， 而故障防护状态的 电子锁在断电时会保持锁定状态。
例如， 紧急出 口 的 门将被设直为应急开放状态， 以便在火灾或其他紧急情况下， 人员 不会被锁在 内
部 。 这种情况下 ， 如果发生事故， 主要考虑的是人员 能安全离 开。 相反， 银行的金库会被设直为故
障防护状态， 以便于在断电时， 门 能保持锁定状态。 因 为在这种情况下 ， 主要考虑的是安全金库门
不被打开。
恢复过程的两个要素能够确保可信解决方案的实施。 第一个要素是失败准备。 除 了可靠的备份
解决方案之外， 还包括系统恢复及容错方法。 第二个要素是系统恢复的过程。 系统必须重新启动到
单用户 、 非特权状态。 这意味着系统应该重新启动 ， 以达到正常账户能够登录系统且系统不在授权
非授权用户 登录的状态。 系统恢复还包括在发生故障或崩溃时， 恢复在系统中使用 的所有受影响的
文件和服务。 恢复所有丢失或受损文件， 更正所有变更分类标签， 检查所有重要的安全文件的设置。
常见标准(在第 8 章 " 安全模型的原则、 设计和功能" 中有所介绍)中有一节是对受信恢复的叙
述 。 恢复过程与系 统恢复能力及容错能力相关。 具体而言， 定义了 4 种类型的受信恢复:
第 1 8 章 灾难恢复计划
手动式恢复 如果系统崩溃， 系统并没有处于故障防护状态 。 相反的是， 在系统故障或崩溃后，