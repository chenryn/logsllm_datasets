300
400
time [hours]
400
300
200
100
)
I
P
X
−
M
(
s
n
o
s
s
e
s
i
Large IXP
Medium IXP
500
600
700
peerings remain hidden and can only partly be inferred using public
RM BGP data.
5. FROM CONNECTIVITY TO TRAFFIC
In this section, we are mainly interested in how many of the es-
tablished peerings reported in Table 2 are actually “used”; that is,
see trafﬁc. Furthermore, we are interested in the actual distribution
of trafﬁc when taking the type of the peering link into account.
5.1
Identifying trafﬁc-carrying peerings
Figure 4: Inferred bi-lateral BGP sessions over time.
down (where possible) each of the ML and BL peering fabrics into
links that are used for either IPv4 or IPv6 and in a symmetric or
asymmetric manner. For each IXP, we also tally the total number of
peerings along with the peering degree (percentage of established
peering links compared to the number of possible peering links).
4.2 Connectivity: Public BGP data
To assess the ability of the various public BGP datasets to pro-
vide visibility into the peering fabrics of our IXPs and compare
with our ﬁndings in Section 4.1 above, we ﬁrst mine the RS-LG
BGP data that has recently been considered and used in [25] and
is publicly available. The results are shown in Table 2. There are
three main take-aways. First, when restricting the study to the L-
IXP that has an RS-LG with the capabilities listed in Section 2.5,
the new methodology proposed in [25] is indeed successful in re-
covering the full-ﬂedged ML peering fabric of that IXP. Second,
as the example of the M-IXP shows, having a RS-LG that lacks
the necessary querying capabilities is of no help for inferring the
IXP’s ML peering fabric.9 Third, irrespective of the capabilities
of the RS-LG, the RS-LG BGP data cannot be used to reveal any
peerings of the L-IXP’s and M-IXP’s BL peering fabrics.
For completeness, we also obtained the number of peerings that
can be discovered from mining the traditional and widely-used RM
BGP data. The results conﬁrm past ﬁndings that a majority of the
peerings (i.e., some 70-80%) cannot be seen in those data [17, 18,
24, 41]. In addition, we also notice a signiﬁcant bias in this data to-
wards BL peerings. Interestingly, this data does produce peerings
between IXP member ASes that we do not see even in our most
complete peering fabrics discussed in Section 4.1. One possible
explanation for seeing such peerings in the public but not in the
IXP-provided BGP data is that the member ASes in question en-
gage in private peering at the IXP10 or peer in a different location.
Summary
We observe a dense peering mesh at our IXPs, with ML peerings
outnumbering BL peerings by a ratio of 4:1 and 8:1 at the L-IXP
and the M-IXP respectively. Thus, connectivity at these IXPs is
clearly driven by their RSes and the resulting ML peerings. For
IPv6 connectivity we note that at both IXPs, the number of IPv6
peerings is roughly half of the number of IPv4 peerings. LGes
co-located with IXP RSes are able to uncover the full ML peering
fabric, assuming they support an advanced set of commands. BL
9Some portion of the ML peering fabric may be recovered but only
with substantial additional efforts. For example, by using preﬁxes
extracted from the RIPE RIS or Routeviews data, a portion of the
IPv4 preﬁxes on the Master RIB of the M-IXP can be recovered
and used to submit queries to this RS-LG.
10Private peerings at IXPs are handled completely separate from the
IXP’s public switching infrastructure and are not part of our study.
To identify a trafﬁc-carrying peering between AS X and AS Y,
we look for sFlow records that (i) contain MAC addresses which
belong to AS X and AS Y, respectively, and (ii) have IP addresses
that are not part of the IP address space assigned to the IXP. Thus,
we only count the exchange of non-local IP trafﬁc, which allows
us to clearly separate control trafﬁc (i.e., BGP sessions) and actual
data trafﬁc, thus we can distinguish between BL peerings with and
without trafﬁc. Once we identiﬁed a trafﬁc-carrying peering link,
we assign it to be either BL or ML, depending on our earlier intro-
duced inference. For a small portion of the trafﬁc (less than 0.5%
for both IXPs) we did not ﬁnd a corresponding BL or ML peering
link. We discard this trafﬁc from our analysis.11
In this context, for IXP member ASes that peer with other mem-
ber ASes at the IXP both bi-laterally and multi-laterally, we are
faced with the problem of determining whether the observed trafﬁc
between two such ASes is traversing the BL or ML peering link
between them; that is, identifying the trafﬁc-carrying peering(s).
Taking a pragmatic approach, when two IXP member ASes peer
with one another at the IXP both bi-laterally and multi-laterally,
we tag the BL peering between them as the trafﬁc-carrying peering
and associate any observed trafﬁc with it. Intuitively, our argument
for this approach is based on the observation that compared to ML
peering, establishing a BL peering requires work (e.g., manually
setting up BGP sessions) and is an indication of joint incentives
and needs between the involved parties. On the other hand, peering
multi-laterally at the IXP (i.e., using the RS) is designed to be easy
and informal, making it in general possible to exchange trafﬁc with
all the RS’s peers from the get-go.
To provide empirical support for our argument, we manually
searched for LGes that query the routing tables of member routers
that peer both bi-laterally and multi-laterally with other members.
We found six such LGes with sufﬁcient capabilities to reason about
the best path selected. In all cases, advertisements via BL sessions
were selected as best path over advertisements from the RS.12
5.2 Trafﬁc over ML and BL peerings
The results of our analysis of the trafﬁc-carrying links are sum-
marized in Table 3. When compared to Table 2, the ﬁrst column
in Table 3 shows that most peering links (i.e., more than 80% at
both IXPs) are actually “used” in the sense of the binary attribute
“carry trafﬁc/no trafﬁc”. Moreover, we note that the ratio of trafﬁc-
carrying peerings is largest for BL peerings, followed by symmetric
ML peering, followed by asymmetric ML peering.
Moving beyond this binary classiﬁcation of peering links, this
usage picture sharpens when examining the second column of Ta-
ble 3. This column shows for each IXP the number of peerings
that are responsible for 99.9% of the IXP’s total trafﬁc; that is, all
11Possible explanations for this trafﬁc are either non-detected BGP
sessions or peerings using protocols other than BGP (e.g., static
routing).
12Selection of BL over ML was typically done by setting the local
preference to a higher value for routes received via BL sessions.
However, we point out that is not necessarily true for all peerings.
36IPv4
% BL
% ML sym.
% ML asym.
links total
IPv6
% BL
% ML sym.
% ML asym.
links total
L-IXP
all
92.4
85.9
23.8
67,915
99.9p
55.6
31.3
5.43
28,849
L-IXP
all
76.2
54.0
30.4
24,159
99.9p
4.92
0.52
0.04
556
M-IXP
all
93.5
83.7
38.5
2,968
99.9p
47.7
24.0
7.89
918
M-IXP
all
74.9
52.2
25.3
819
99.9p
7.17
0.48
0.07
24
Table 3: Percentage of links that carry trafﬁc (all trafﬁc vs. top
99.9% of all trafﬁc) and their corresponding type.
peerings that collectively see less than 0.1% of the overall trafﬁc
are discarded.13 When imposing such thresholds to eliminate peer-
ings that carry only comparably little amounts of trafﬁc, we ob-
serve a drastic reduction of the number of active peerings. Indeed,
the main take-away from this thresholding exercise is that it puts
the connectivity-related ﬁndings reported in Section 4.2 into proper
perspective. Speciﬁcally, it demonstrates that while RSes increase
connectivity and are responsible for the larger part of peerings, a
majority of those ML peerings typically does not carry much traf-
ﬁc. At the same time, the smaller number of BL peerings that are
established at IXPs carry in general the bulk of the trafﬁc.
As a by-product of this thresholding, we also notice that essen-
tially none of the large number of IPv6 peerings that have been
established at our IXPs carry any signiﬁcant trafﬁc. Thus, while
connectivity for IPv6 is there, trafﬁc still ranges in the order of less
than 1% at each of our IXPs. As a result, for the remainder of this
paper, we will focus exclusively on IPv4 trafﬁc that traverses the
IXPs’ switching infrastructures. Nevertheless, it is worthwhile to
mention that some links are only present for IPv6 but not for IPv4.
To assess the overall contribution of BL and ML peerings, we
map the total trafﬁc of the L-IXP and M-IXP onto the BL and ML
peerings that have been established at each of these IXPs. Fig-
ure 5(a) shows a time series for the trafﬁc on BL and ML peerings
at both IXPs over a one-week period. We observe that even though
there are much fewer BL peerings than ML peerings at L-IXP, the
total amount of BL trafﬁc is more than twice the total amount of
ML trafﬁc. To contrast, for M-IXP, this BL:ML trafﬁc ratio is more
like 1:1.
Even though this trafﬁc-centric picture of IXP peerings empha-
sizes the signiﬁcance of BL peerings, ML peerings do play an im-
portant role. Figure 5(b) shows a CCDF of the distribution of traf-
ﬁc over BL/ML peerings. As far as the top trafﬁc-contributing
peerings are concerned, BL and ML peerings contribute similar
amounts of trafﬁc. In fact, for both the L-IXP and the M-IXP, the
top trafﬁc-contributing peering is a ML peering which highlights
the critical role that the use of IXP RSes play in today’s Internet.
Summary
While most peerings at our IXPs (e.g., some 80%) do carry trafﬁc,
BL peerings are more likely to carry trafﬁc when compared to ML
peerings. Taking trafﬁc volumes into account, the small number
of BL peerings clearly dominate the large number of ML peerings,
with observed trafﬁc ratios of 2:1 (L-IXP) and 1:1 (M-IXP). Thus,
the majority of ML peerings only carry small amounts of trafﬁc,
13Note that the corresponding thresholds still require a monthly traf-
ﬁc volume of some tens resp. hundreds of GBs at each IXP.
l
e
m
u
o
v
c
i
f
f
a
r
t
d
e
z
i
l
a
m
r
o
n
8
.
0
6
.
0
4
.
0
2
.
0
0
.
0
100
10
1
0.1
0.01
s
k
n
i
l
i
g
n
y
r
r
a
c
−
c
i
f
f
a
r
t
%
0.001
BL (L−IXP)
ML (L−IXP)
BL (M−IXP)
ML (M−IXP)
Tue Wed
Mon
Sat
(a) Timeseries of trafﬁc over BL/ML links.
Thu
Fri
Sun
BL (M−IXP)
ML (M−IXP)
BL (L−IXP)
ML (L−IXP)
10−8
10−5
% contribution to total traffic
10−2
101
(b) CCDF: Trafﬁc distribution over BL/ML links.
Figure 5: Trafﬁc: bi-lateral (BL) and multi-lateral (ML).
but some of the top trafﬁc-contributing links at both IXPs are ML
peerings.
6. FROM TRAFFIC TO ROUTES: PREFIXES
In this section, we move beyond the link perspective of peer-
ings and peering trafﬁc and instead examine peerings at the level
of routed preﬁxes. We show how this new perspective allows us to
reason about peering opportunities at IXPs and the different peer-
ing options chosen by member ASes.
6.1 A preﬁx view of peering
An outward sign of the popularity of the RS service offering with
the member ASes of the L-IXP and M-IXP is the large number of
ML peerings that have been established at those IXPs. To further
understand what set of routes RSes at popular IXPs offer – e.g.,
to understand the instant beneﬁts that a new member AS can reap
when connecting to the IXP’s RS – we check each preﬁx that is
advertised via the RS and count to how many of the RS’s peers this
preﬁx is exported. For the L-IXP, Figure 6(a) shows the resulting
histogram (y-axis in log-scale) and reveals a striking bi-modality
– either a preﬁx is exported to almost all members or to only a
few selected ones. Focusing on the mode to the right, the sizable
fraction of preﬁxes that is exported to almost all member ASes is a
reﬂection of the very peering-friendly policies at the IXP. Summing
up all the preﬁxes that are exported by the RS to more than 90% of
its peers shows that a new IXP member will receive more than 65K
routes from some 11K different origin ASes at the L-IXP and more
than 12.5K routes from about 3K different origin ASes at the M-
IXP (see Table 4) once connected to the RS.
As far as the mode to the left in Figure 6(a) is concerned, the siz-
able fraction of preﬁxes that are exported to fewer than 10% of the
RS’s peers is an indication that the strategy offered by the IXPs to
restrict (block) the propagation of certain routes to certain members
is effective and used. Upon closer inspection, we also observe that