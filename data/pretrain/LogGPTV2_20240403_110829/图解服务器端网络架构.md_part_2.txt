## Page 11
目录丨ix
物理设计
31
1.2.1服务器端有两种结构类型
31
1.2.1.1采用串联式结构管理起来更方便
32
1.2.1.2采用单路并联式结构更容易扩展
33
1.2.2选用设备时应参考考查项的最大值
36
1.2.2.1应用程序不同吞吐率也就不同
37
1.2.2.2新增连接数和并发连接数都要考虑
38
1.2.3选择稳定可靠的OS版本
39
不懂就问是捷径
39
1.2.4根据实际配置和使用目的选择线缆
40
1.2.4.1
远距离传输选操光纤光缆
40
1.2.4.2追求宽频带和高可靠性时选择光纤
41
1.2.4.3通过大小分类决定使用哪种双绞线电缆
42
1.2.4.4预先决定好使用线缆的颜色
43
1.2.5端口的物理设计出乎意料地重要
44
1.2.5.1必须统一规划连接到哪里
44
1.2.5.2速率和双工、AutoMDI/MDI-X的设置也要统一规划
44
1.2.6
6巧妙地配置设备
45
1.2.6.1
将核心交换机和汇聚交换机置于中央部位
45
1.2.6.2
要考虑设备中空气吸入和排出的方向
48
1.2.6.3从两套系统获取电源
49
1.2.6.4
切莫超过最大承重
51
逻辑设计
数据链路层的技术
54
2.1.1
数据链路层是物理层的帮手
54
用以太网标准进行成帧处理
55
2.1.2数据链路层的关键在于L2交换机的运作
61
2.1.2.1文换MAC地址
62
2.1.2.2通过VLAN将广播城分隔开
67
---
## Page 12
X|目录
2.1.3ARP将逻辑和物理关联到一起
2.1.3.1ARP通过IP地址查询MAC地址
75
2.1.3.2抓取ARP包，观察它的写法
81
2.1.3.3有几个特殊的ARP
82
网络层的技术
85
2.2.1网络是由网络层拼接起来的
85
2.2.1.1添加IP报头，进行分组化处理
86
2.2.1.2IP地址由32位构成
-- 91
2.2.2将网段连接起来
99
2.2.2.1利用IP地址进行路由选择
·100
2.2.2.2建立路由表
104
2.2.2.3整理路由表
· 114
2.2.3转换IP地址
· 118
2.2.3.1转换IP地址
 118
2.2.3.2私网IP地址
122
2.2.4自动设置IP地址的DHCP
* 123
2.2.4.1DHCP的消息部分中包含着诸多的信息
· 123
2.2.4.2DHCP的原理非常简单
·125
2.2.4.3对DHCP报文作中继处理
2.2.5用于故障排除的ICMP
 127
2.2.5.1ICMP的关键在于类型和代码
 127
2.2.5.2常见的类型和代码有四种组合
128
2.2.5.3出现问题时先尝试用ping去排除故障
130
逻辑设计
132
2.3.1
整理出所需的VLAN
132
2.3.1.1实际所需的VLAN会因为诸多因素而变化
132
2.3.1.2规定VLAN的ID
2.3.2在考虑数量增减的基础上分配IP地址
-- 140
2.3.2.1IP地址的估算数量应高于当前所需数量
 140
2.3.2.2按顺序排列网段，使之更容易汇总
 142
2.3.2.3必须统一规定从何处开始分配IP地址
145
---
## Page 13
目录|xi
2.3.3路由选择以简为上
145
2.3.3.1考虑在路由选择中使用哪些协议
145
2.3.3.2考虑采用哪种路由选择方法
146
2.3.3.3将路径汇总以减少路径数量
150
2.3.4NAT要按入站和出站分别考虑
152
2.3.4.1NAT是在系统边界进行的
152
2.3.4.2通过入站通信转换地址
152
2.3.4.3通过出站通信转换地址
153
数据安全设计和负载均衡设计
155
传输层的技术
156
3.1.1通过端口号划分服务器进程
156
3.1.1.1传输层使用TCP和UDP两种协议-
157
3.1.1.2TCP的工作原理比较复杂
164
3.1.1.3MTU和MSS的差异在于对象层不同
 170
3.1.2用防火墙守卫系统
-173
3.1.2.1基于连接进行控制
174
3.1.2.2状态检测和包过滤之间的区别
177
3.1.2.3防火墙在不断进步
179
3.1.3通过负载均衡器分散服务器的负荷
184
3.1.3.1目的NAT是服务器负载均衡技术的基础
185
3.1.3.2通过健康检查监控服务器的状态
189
3.1.3.3熟练掌握可选功能
200
从会话层到应用层的技术
204
3.2.1HTTP支撑着互联网
204
3.2.1.1HTTP/1.0和HTTP/1.1的TCP连接用法大相径庭 
204
3.2.1.2HTTP因请求和响应而得以成立
206
3.2.2
用SSL保护数据
211
3.2.2.1防止窃听、基改和冒充
212
---
## Page 14
xii|目录
3.2.2.2通过SSL可以给各种各样的应用程序协议加密
215
3.2.2.3SSL使用混合加密方式进行加密
216
3.2.2.4消息摘要是消息的概要
219
3.2.2.5
SSL中执行着大量的处理
222
3.2.2.6
用客户端证书对客户端进行认证
230
3.2.3用FTP传输文件
233
3.2.3.1
主动模式使用特定的端口
234
3.2.3.2
被动模式改变使用的端口
·236
3.2.3.3FTP 就应该当作FTP 去处理
239
3.2.4用DNS解析名称
240
3.2.4.1用UDP进行名称解析
241
3.2.4.2用TCP进行区域传输
242
数据安全设计与负载均衡设计
246
3.3.1数据安全设计
246
3.3.1.1整理出真正需要的通信
246
3.3.1.2通过多级防御提高安全系数
250
3.3.1.3默认启动的服务应控制在最小范围内
- 251
3.3.2负载均衡设计
251
3.3.2.1要高效地均衡负载
252
3.3.2.2启用哪些可选功能
255
高可用性设计
257
余技术
258
4.1.1物理层的余技术
258
4.1.1.1将多条物理链路集结成一条逻辑链路
258
4.1.1.2将多个物理网卡集结成一个逻辑网卡
263
4.1.1.3将多台物理设备集结成一台逻辑设备
·269
4.1.1.4当上行链路中断时，让下行链路也随之中断
278
4.1.2数据链路层的余技术
279
4.1.2.1STP的关键在于根网桥和阻塞端口
279
---
## Page 15
目录丨xi