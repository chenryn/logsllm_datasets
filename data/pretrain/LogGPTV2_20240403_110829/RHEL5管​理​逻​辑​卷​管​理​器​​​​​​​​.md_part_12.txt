## [⁠]{#LVM_CLI.html#vgscan}4.3.5. 为​​​​​​​卷​​​​​​​组​​​​​​​扫​​​​​​​描​​​​​​​磁​​​​​​​盘​​​​​​​来​​​​​​​建​​​​​​​立​​​​​​​缓​​​​​​​存​​​​​​​文​​​​​​​件​​​​​​​ {.title}
:::
[]{#LVM_CLI.html#idm139761075500576
.indexterm}[]{#LVM_CLI.html#idm139761084528896 .indexterm}
::: para
`vgscan`{.command} 命​​​​​​​令​​​​​​​在​​​​​​​系​​​​​​​统​​​​​​​中​​​​​​​扫​​​​​​​描​​​​​​​所​​​​​​​有​​​​​​​支​​​​​​​持​​​​​​​的​​​​​​​磁​​​​​​​盘​​​​​​​设​​​​​​​备​​​​​​​来​​​​​​​查​​​​​​​找​​​​​​​ LVM
物​​​​​​​理​​​​​​​卷​​​​​​​和​​​​​​​卷​​​​​​​组​​​​​​​。​​​​​​​这​​​​​​​样​​​​​​​就​​​​​​​在​​​​​​​ `/etc/lvm/.cache`{.literal} 中​​​​​​​建​​​​​​​立​​​​​​​了​​​​​​​一​​​​​​​个​​​​​​​ LVM
缓​​​​​​​存​​​​​​​文​​​​​​​件​​​​​​​，该​​​​​​​文​​​​​​​件​​​​​​​可​​​​​​​维​​​​​​​护​​​​​​​当​​​​​​​前​​​​​​​列​​​​​​​出​​​​​​​的​​​​​​​ LVM 设​​​​​​​备​​​​​​​。​​​​​​​
:::
::: para
LVM 在​​​​​​​系​​​​​​​统​​​​​​​启​​​​​​​动​​​​​​​以​​​​​​​及​​​​​​​进​​​​​​​行​​​​​​​ LVM 操​​​​​​​作​​​​​​​时​​​​​​​自​​​​​​​动​​​​​​​运​​​​​​​行​​​​​​​ `vgscan`{.command}
命​​​​​​​令​​​​​​​，比​​​​​​​如​​​​​​​您​​​​​​​执​​​​​​​行​​​​​​​ `vgcreate`{.command} 命​​​​​​​令​​​​​​​或​​​​​​​者​​​​​​​当​​​​​​​ LVM
检​​​​​​​测​​​​​​​到​​​​​​​不​​​​​​​一​​​​​​​致​​​​​​​性​​​​​​​时​​​​​​​。​​​​​​​您​​​​​​​可​​​​​​​能​​​​​​​在​​​​​​​修​​​​​​​改​​​​​​​硬​​​​​​​件​​​​​​​配​​​​​​​置​​​​​​​时​​​​​​​需​​​​​​​要​​​​​​​手​​​​​​​动​​​​​​​运​​​​​​​行​​​​​​​
`vgscan`{.command}，这​​​​​​​样​​​​​​​可​​​​​​​以​​​​​​​让​​​​​​​系​​​​​​​统​​​​​​​识​​​​​​​别​​​​​​​在​​​​​​​引​​​​​​​导​​​​​​​时​​​​​​​没​​​​​​​有​​​​​​​出​​​​​​​现​​​​​​​的​​​​​​​新​​​​​​​设​​​​​​​备​​​​​​​。​​​​​​​例​​​​​​​如​​​​​​​：当​​​​​​​您​​​​​​​在​​​​​​​
SAN
中​​​​​​​的​​​​​​​一​​​​​​​个​​​​​​​系​​​​​​​统​​​​​​​中​​​​​​​添​​​​​​​加​​​​​​​了​​​​​​​新​​​​​​​磁​​​​​​​盘​​​​​​​或​​​​​​​者​​​​​​​热​​​​​​​插​​​​​​​拔​​​​​​​一​​​​​​​个​​​​​​​已​​​​​​​经​​​​​​​被​​​​​​​标​​​​​​​记​​​​​​​为​​​​​​​物​​​​​​​理​​​​​​​卷​​​​​​​的​​​​​​​新​​​​​​​磁​​​​​​​盘​​​​​​​时​​​​​​​，这​​​​​​​应​​​​​​​该​​​​​​​是​​​​​​​很​​​​​​​需​​​​​​​要​​​​​​​的​​​​​​​。​​​​​​​
:::
::: para
You can define a filter in the `lvm.conf`{.filename} file to restrict
the scan to avoid specific devices. For information on using filters to
control which devices are scanned, see [第 4.6 节 "用​​​​​​​过​​​​​​​滤​​​​​​​器​​​​​​​控​​​​​​​制​​​​​​​ LVM
设​​​​​​​备​​​​​​​扫​​​​​​​描​​​​​​​"](#LVM_CLI.html#lvm_filters){.xref}.
:::
::: para
下​​​​​​​面​​​​​​​的​​​​​​​例​​​​​​​子​​​​​​​显​​​​​​​示​​​​​​​了​​​​​​​ `vgscan`{.command} 命​​​​​​​令​​​​​​​的​​​​​​​输​​​​​​​出​​​​​​​结​​​​​​​果​​​​​​​。​​​​​​​
:::
``` screen
# vgscan
  Reading all physical volumes.  This may take a while...
  Found volume group "new_vg" using metadata type lvm2
  Found volume group "officevg" using metadata type lvm2
```
:::
::: section
::: titlepage
## [⁠]{#LVM_CLI.html#VG_remove_PV}4.3.6. 从​​​​​​​卷​​​​​​​组​​​​​​​中​​​​​​​删​​​​​​​除​​​​​​​物​​​​​​​理​​​​​​​卷​​​​​​​ {.title}
:::
[]{#LVM_CLI.html#idm139761060770000
.indexterm}[]{#LVM_CLI.html#idm139761059851888
.indexterm}[]{#LVM_CLI.html#idm139761059850448
.indexterm}[]{#LVM_CLI.html#idm139761059849008 .indexterm}
::: para
To remove unused physical volumes from a volume group, use the
`vgreduce`{.command} command. The `vgreduce`{.command} command shrinks a
volume group\'s capacity by removing one or more empty physical volumes.
This frees those physical volumes to be used in different volume groups
or to be removed from the system.
:::
::: para
在​​​​​​​您​​​​​​​从​​​​​​​卷​​​​​​​组​​​​​​​中​​​​​​​删​​​​​​​除​​​​​​​物​​​​​​​理​​​​​​​卷​​​​​​​之​​​​​​​前​​​​​​​，您​​​​​​​可​​​​​​​以​​​​​​​使​​​​​​​用​​​​​​​ `pvdisplay`{.command}
命​​​​​​​令​​​​​​​确​​​​​​​定​​​​​​​物​​​​​​​理​​​​​​​卷​​​​​​​没​​​​​​​有​​​​​​​被​​​​​​​任​​​​​​​何​​​​​​​逻​​​​​​​辑​​​​​​​卷​​​​​​​使​​​​​​​用​​​​​​​。​​​​​​​
:::
``` screen
# pvdisplay /dev/hda1
-- Physical volume ---
PV Name               /dev/hda1
VG Name               myvg
PV Size               1.95 GB / NOT usable 4 MB [LVM: 122 KB]
PV#                   1
PV Status             available
Allocatable           yes (but full)
Cur LV                1
PE Size (KByte)       4096
Total PE              499
Free PE               0
Allocated PE          499
PV UUID               Sd44tK-9IRw-SrMC-MOkn-76iP-iftz-OVSen7
```
::: para
如​​​​​​​果​​​​​​​物​​​​​​​理​​​​​​​卷​​​​​​​仍​​​​​​​然​​​​​​​在​​​​​​​使​​​​​​​用​​​​​​​，您​​​​​​​可​​​​​​​能​​​​​​​必​​​​​​​须​​​​​​​使​​​​​​​用​​​​​​​ `pvmove`{.command}
命​​​​​​​令​​​​​​​将​​​​​​​数​​​​​​​据​​​​​​​迁​​​​​​​移​​​​​​​到​​​​​​​另​​​​​​​一​​​​​​​个​​​​​​​物​​​​​​​理​​​​​​​卷​​​​​​​。​​​​​​​然​​​​​​​后​​​​​​​使​​​​​​​用​​​​​​​ `vgreduce`{.command}
命​​​​​​​令​​​​​​​删​​​​​​​除​​​​​​​该​​​​​​​物​​​​​​​理​​​​​​​卷​​​​​​​：
:::
::: para
以​​​​​​​下​​​​​​​命​​​​​​​令​​​​​​​可​​​​​​​从​​​​​​​卷​​​​​​​组​​​​​​​ `my_volume_group`{.literal} 中​​​​​​​删​​​​​​​除​​​​​​​物​​​​​​​理​​​​​​​卷​​​​​​​
`/dev/hda1`{.literal}。​​​​​​​
:::
``` screen
# vgreduce my_volume_group /dev/hda1
```
:::
::: section
::: titlepage
## [⁠]{#LVM_CLI.html#VG_change}4.3.7. 修​​​​​​​改​​​​​​​卷​​​​​​​组​​​​​​​参​​​​​​​数​​​​​​​ {.title}
:::
[]{#LVM_CLI.html#idm139761064543280
.indexterm}[]{#LVM_CLI.html#idm139761064541840 .indexterm}
::: para
There are several volume group parameters that you can change for an
existing volume group with the `vgchange`{.command} command. Primarily,
however, this command is used to deactivate and activate volume groups,
as described in [第 4.3.8 节
"激​​​​​​​活​​​​​​​和​​​​​​​失​​​​​​​活​​​​​​​卷​​​​​​​组​​​​​​​"](#LVM_CLI.html#VG_activate){.xref},
:::
::: para
下​​​​​​​面​​​​​​​的​​​​​​​命​​​​​​​令​​​​​​​将​​​​​​​卷​​​​​​​组​​​​​​​ `vg00`{.literal} 的​​​​​​​包​​​​​​​含​​​​​​​逻​​​​​​​辑​​​​​​​卷​​​​​​​的​​​​​​​最​​​​​​​大​​​​​​​数​​​​​​​量​​​​​​​改​​​​​​​为​​​​​​​ 128。​​​​​​​
:::
``` screen
vgchange -l 128 /dev/vg00
```
::: para
有​​​​​​​关​​​​​​​ `vgchange`{.command} 命​​​​​​​令​​​​​​​的​​​​​​​卷​​​​​​​组​​​​​​​参​​​​​​​数​​​​​​​的​​​​​​​论​​​​​​​述​​​​​​​请​​​​​​​参​​​​​​​考​​​​​​​
`vgchange`{.command}(8) man page。​​​​​​​
:::
:::
::: section
::: titlepage
## [⁠]{#LVM_CLI.html#VG_activate}4.3.8. 激​​​​​​​活​​​​​​​和​​​​​​​失​​​​​​​活​​​​​​​卷​​​​​​​组​​​​​​​ {.title}
:::
[]{#LVM_CLI.html#idm139761089428352
.indexterm}[]{#LVM_CLI.html#idm139761089426912
.indexterm}[]{#LVM_CLI.html#idm139761089425472
.indexterm}[]{#LVM_CLI.html#idm139761079389504 .indexterm}
::: para
当​​​​​​​您​​​​​​​创​​​​​​​建​​​​​​​一​​​​​​​个​​​​​​​卷​​​​​​​组​​​​​​​时​​​​​​​，默​​​​​​​认​​​​​​​情​​​​​​​况​​​​​​​下​​​​​​​它​​​​​​​是​​​​​​​激​​​​​​​活​​​​​​​的​​​​​​​。​​​​​​​这​​​​​​​就​​​​​​​是​​​​​​​说​​​​​​​该​​​​​​​组​​​​​​​中​​​​​​​的​​​​​​​逻​​​​​​​辑​​​​​​​卷​​​​​​​是​​​​​​​可​​​​​​​访​​​​​​​问​​​​​​​，也​​​​​​​可​​​​​​​修​​​​​​​改​​​​​​​的​​​​​​​。​​​​​​​
:::
::: para
有​​​​​​​一​​​​​​​些​​​​​​​情​​​​​​​况​​​​​​​需​​​​​​​要​​​​​​​您​​​​​​​失​​​​​​​活​​​​​​​卷​​​​​​​组​​​​​​​，使​​​​​​​其​​​​​​​无​​​​​​​法​​​​​​​被​​​​​​​内​​​​​​​核​​​​​​​识​​​​​​​别​​​​​​​。​​​​​​​要​​​​​​​失​​​​​​​活​​​​​​​或​​​​​​​者​​​​​​​激​​​​​​​活​​​​​​​卷​​​​​​​组​​​​​​​，请​​​​​​​使​​​​​​​用​​​​​​​
`vgchange`{.command} 命​​​​​​​令​​​​​​​的​​​​​​​
`-a`{.option}（`--available`{.option}）参​​​​​​​数​​​​​​​。​​​​​​​
:::
::: para
下​​​​​​​面​​​​​​​的​​​​​​​例​​​​​​​子​​​​​​​失​​​​​​​活​​​​​​​了​​​​​​​卷​​​​​​​组​​​​​​​ `my_volume_group`{.literal}。​​​​​​​
:::
``` screen
vgchange -a n my_volume_group
```
[]{#LVM_CLI.html#idm139761079382848
.indexterm}[]{#LVM_CLI.html#idm139761091380656
.indexterm}[]{#LVM_CLI.html#idm139761091379248
.indexterm}[]{#LVM_CLI.html#idm139761091377840 .indexterm}
::: para
如​​​​​​​果​​​​​​​启​​​​​​​用​​​​​​​了​​​​​​​群​​​​​​​集​​​​​​​的​​​​​​​锁​​​​​​​定​​​​​​​，添​​​​​​​加​​​​​​​'​​​​​​​e'​​​​​​​来​​​​​​​激​​​​​​​活​​​​​​​或​​​​​​​者​​​​​​​失​​​​​​​活​​​​​​​完​​​​​​​全​​​​​​​占​​​​​​​据​​​​​​​一​​​​​​​个​​​​​​​节​​​​​​​点​​​​​​​的​​​​​​​卷​​​​​​​组​​​​​​​，或​​​​​​​者​​​​​​​添​​​​​​​加​​​​​​​'​​​​​​​l'​​​​​​​来​​​​​​​激​​​​​​​活​​​​​​​或​​​​​​​者​​​​​​​失​​​​​​​活​​​​​​​只​​​​​​​位​​​​​​​于​​​​​​​本​​​​​​​地​​​​​​​节​​​​​​​点​​​​​​​的​​​​​​​卷​​​​​​​组​​​​​​​。​​​​​​​带​​​​​​​单​​​​​​​一​​​​​​​主​​​​​​​机​​​​​​​快​​​​​​​照​​​​​​​的​​​​​​​逻​​​​​​​辑​​​​​​​卷​​​​​​​总​​​​​​​是​​​​​​​被​​​​​​​完​​​​​​​全​​​​​​​激​​​​​​​活​​​​​​​，因​​​​​​​为​​​​​​​他​​​​​​​们​​​​​​​一​​​​​​​次​​​​​​​只​​​​​​​能​​​​​​​在​​​​​​​一​​​​​​​个​​​​​​​节​​​​​​​点​​​​​​​上​​​​​​​使​​​​​​​用​​​​​​​。​​​​​​​
:::
::: para
You can deactivate individual logical volumes with the
`lvchange`{.command} command, as described in [第 4.4.4 节
"修​​​​​​​改​​​​​​​逻​​​​​​​辑​​​​​​​卷​​​​​​​组​​​​​​​的​​​​​​​参​​​​​​​数​​​​​​​"](#LVM_CLI.html#LV_change){.xref}, For information
on activating logical volumes on individual nodes in a cluster, see
[第 4.8 节
"在​​​​​​​群​​​​​​​集​​​​​​​的​​​​​​​独​​​​​​​立​​​​​​​节​​​​​​​点​​​​​​​中​​​​​​​激​​​​​​​活​​​​​​​逻​​​​​​​辑​​​​​​​卷​​​​​​​"](#LVM_CLI.html#cluster_activation){.xref}.
:::
:::
::: section
::: titlepage
## [⁠]{#LVM_CLI.html#VG_remove}4.3.9. 删​​​​​​​除​​​​​​​卷​​​​​​​组​​​​​​​ {.title}
:::
[]{#LVM_CLI.html#idm139761082188624 .indexterm}
::: para
要​​​​​​​删​​​​​​​除​​​​​​​不​​​​​​​包​​​​​​​含​​​​​​​逻​​​​​​​辑​​​​​​​卷​​​​​​​的​​​​​​​卷​​​​​​​组​​​​​​​，请​​​​​​​使​​​​​​​用​​​​​​​ `vgremove`{.command} 命​​​​​​​令​​​​​​​。​​​​​​​