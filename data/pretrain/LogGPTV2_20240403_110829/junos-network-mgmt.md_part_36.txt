411
Understand SNMP Support for Routing Instances
Junos OS enables SNMP managers for all routing instances to request and manage SNMP data related
to the corresponding routing instances and logical system networks.
In Junos OS:
• Clients from routing instances and/or logical systems other than the default can access MIB objects
and perform SNMP operations only on the routing instance and/or logical system networks to which
they belong.
• Clients from the default routing instance can access information related to all routing instances and
logical system networks.
• The Junos management routing instance (mgmt_junos) is a special instance. Clients from the
management routing instance are treated as if they were in the default routing instance and can
access information related to all routing instances and logical system networks.
Before Junos OS Release 8.4, only the SNMP manager in the default routing instance (inet.0) had access
to the MIB objects.
With the increase in virtual private network (VPN) service offerings, this feature is useful particularly for
service providers who need to obtain SNMP data for specific routing instances (see Figure 22 on page
411). Service providers can use this information for their own management needs or export the data for
use by their customers.
Figure 22: SNMP Data for Routing Instances
412
If no routing instance is specified in the request, the SNMP agent operates as before:
• For nonrouting table objects, all instances are exposed.
• For routing table objects, only those associated with the default routing instance are exposed.
NOTE: The actual protocol data units (PDUs) are still exchanged over the default (inet.0)
routing instance, but the data contents returned are dictated by the routing instance specified
in the request PDUs.
SNMPv3 Management Routing Instance
IN THIS SECTION
Benefits | 412
Enable the Management Routing Instance | 412
Remove the Management Routing Instance | 413
Starting in Junos OS 19.4R1, you can access information related to all routing instances and logical
system networks and not specific to ingress routing instance by configuring the SNMPv3 management
interface in a required routing instance. You can configure the management instance configuration
statement at the [edit snmp v3] hierarchy level.
Benefits
SNMPv3 management routing instance enables all the SNMPv3 requests from non-default routing
instance as if the requests are from default routing instance. Using SNMPv3 management routing
instance, you access the information related to all routing instances and logical system networks.
Enable the Management Routing Instance
To enable the SNMPv3 management routing instance:
413
1. Configure the management-instance statement.
[edit]
user@host# set snmp v3 management-routing-instance 
2. Commit the configuration.
[edit]
user@host# commit
Remove the Management Routing Instance
To remove the SNMPv3 management routing instance:
1. Delete or deactivate the SNMPv3 management routing instance statement.
[edit]
user@host# delete snmp v3 management-routing-instance 
You cannot configure the Junos management routing instance (mgmt_junos) at the [edit snmp v3 management-
routing-instance ] hierarchy level since the mgmt_junos has the access to all routing
instances by default.
SNMP MIBs Supported for Routing Instances
Table 28 on page 413 shows enterprise-specific MIB objects supported by Junos OS and provides notes
detailing how they are handled when a routing instance is specified in an SNMP request. An en dash (–)
indicates that the item is not applicable.
Table 28: MIB Support for Routing Instances (Juniper Networks MIBs)
Object Support Class Description/Notes
jnxProducts(1) – Product Object IDs
414
Table 28: MIB Support for Routing Instances (Juniper Networks MIBs) (Continued)
Object Support Class Description/Notes
jnxServices(2) – Services
jnxMibs(3) Class 3 Objects are exposed only for the default logical
system.
jnxBoxAnatomy(1)
mpls(2) Class 2 All instances within a logical system are exposed.
Data will not be segregated down to the routing
instance level.
ifJnx(3) Class 1 Only those logical interfaces (and their parent
physical interfaces) that belong to a specific
routing instance are exposed.
jnxAlarms(4) Class 3 Objects are exposed only for the default logical
system.
jnxFirewalls(5) Class 4 Data is not segregated by routing instance. All
instances are exposed.
jnxDCUs(6) Class 1 Only those logical interfaces (and their parent
physical interfaces) that belong to a specific
routing instance are exposed.
jnxPingMIB(7) Class 3 Objects are exposed only for the default logical
system.
jnxTraceRouteMIB(8) Class 3 Objects are exposed only for the default logical
system.
jnxATM(10) Class 1 Only those logical interfaces (and their parent
physical interfaces) that belong to a specific
routing instance are exposed.
415
Table 28: MIB Support for Routing Instances (Juniper Networks MIBs) (Continued)
Object Support Class Description/Notes
jnxIpv6(11) Class 4 Data is not segregated by routing instance. All
instances are exposed.
jnxIpv4(12) Class 1 jnxIpv4AddrTable(1). Only those logical interfaces
(and their parent physical interfaces) that belong
to a specific routing instance are exposed.
jnxRmon(13) Class 3 jnxRmonAlarmTable(1). Objects are exposed only
for the default logical system.
jnxLdp(14) Class 2 jnxLdpTrapVars(1). All instances within a logical
system are exposed. Data will not be segregated
down to the routing instance level.
jnxCos(15) Class 3 Objects are exposed only for the default logical
system.
jnxCosIfqStatsTable(1)
jnxCosFcTable(2)
jnxCosFcIdTable(3)
jnxCosQstatTable(4)
jnxScu(16) Class 1 Only those logical interfaces (and their parent
physical interfaces) that belong to a specific
jnxScuStatsTable(1)
routing instance are exposed.
jnxRpf(17) Class 1 Only those logical interfaces (and their parent
physical interfaces) that belong to a specific
jnxRpfStatsTable(1)
routing instance are exposed.
jnxCfgMgmt(18) Class 3 Objects are exposed only for the default logical
system.
416
Table 28: MIB Support for Routing Instances (Juniper Networks MIBs) (Continued)
Object Support Class Description/Notes
jnxPMon(19) Class 1 Only those logical interfaces (and their parent
physical interfaces) that belong to a specific
jnxPMonFlowTable(1)
routing instance are exposed.
jnxPMonErrorTable(2)
jnxPMonMemoryTable(3)
jnxSonet(20) Class 1 Only those logical interfaces (and their parent
physical interfaces) that belong to a specific
jnxSonetAlarmTable(1)
routing instance are exposed.
jnxAtmCos(21) Class 1 Only those logical interfaces (and their parent
physical interfaces) that belong to a specific
jnxCosAtmVcTable(1)
routing instance are exposed.
jnxCosAtmScTable(2)
jnxCosAtmVcQstatsTable(3)
jnxCosAtmTrunkTable(4)
ipSecFlowMonitorMIB(22) – –
jnxMac(23) Class 1 Only those logical interfaces (and their parent
physical interfaces) that belong to a specific
jnxMacStats(1)
routing instance are exposed.
apsMIB(24) Class 3 Objects are exposed only for the default logical
system.
jnxChassisDefines(25) Class 3 Objects are exposed only for the default logical
system.
jnxVpnMIB(26) Class 2 All instances within a logical system are exposed.
Data will not be segregated down to the routing
instance level.
417
Table 28: MIB Support for Routing Instances (Juniper Networks MIBs) (Continued)
Object Support Class Description/Notes
jnxSericesInfoMib(27) Class 1 Only those logical interfaces (and their parent
physical interfaces) that belong to a specific
routing instance are exposed.
jnxCollectorMIB(28) Class 1 Only those logical interfaces (and their parent
physical interfaces) that belong to a specific
routing instance are exposed.
jnxHistory(29) – –
jnxSpMIB(32) Class 3 Objects are exposed only for the default logical
system.
Table 29 on page 417 shows Class 1 MIB objects (standard and enterprise-specific MIBs) supported by
Junos OS. With Class 1 objects, only those logical interfaces (and their parent physical interfaces) that
belong to a specific routing instance are exposed.
Table 29: Class 1 MIB Objects (Standard and Juniper MIBs)
Class MIB Objects
Class 1 802.3ad.mib (dot3adAgg) MIB objects:
dot3adAggTable
dot3adAggPortListTable
(dot3adAggPort)
dot3adAggPortTable
dot3adAggPortStatsTable
dot3adAggPortDebugTable
418
Table 29: Class 1 MIB Objects (Standard and Juniper MIBs) (Continued)
Class MIB Objects
rfc2863a.mib ifTable
ifXTable
ifStackTable
rfc2011a.mib ipAddrTable
ipNetToMediaTable
rtmib.mib ipForward (ipCidrRouteTable)
rfc2665a.mib dot3StatsTable
dot3ControlTable
dot3PauseTable
rfc2495a.mib dsx1ConfigTable
dsx1CurrentTable
dsx1IntervalTable
dsx1TotalTable
dsx1FarEndCurrentTable
dsx1FarEndIntervalTable
dsx1FarEndTotalTable
dsx1FracTable ...
rfc2496a.mib dsx3 (dsx3ConfigTable)
rfc2115a.mib frDlcmiTable (and related MIB objects)
rfc3592.mib sonetMediumTable (and related MIB objects)
419
Table 29: Class 1 MIB Objects (Standard and Juniper MIBs) (Continued)
Class MIB Objects
rfc3020.mib mfrMIB
mfrBundleTable
mfrMibBundleLinkObjects
mfrBundleIfIndexMappingTable
(and related MIB objects)
ospf2mib.mib All objects
ospf2trap.mib All objects
bgpmib.mib All objects
rfc2819a.mib Example: etherStatsTable
Class 1 rfc2863a.mib Examples:
ifXtable
ifStackTable
rfc2665a.mib etherMIB
rfc2515a.mib atmMIB objects
Examples:
atmInterfaceConfTable
atmVplTable
atmVclTable
420
Table 29: Class 1 MIB Objects (Standard and Juniper MIBs) (Continued)
Class MIB Objects
rfc2465.mib ip-v6mib
Examples:
ipv6IfTable
ipv6AddrPrefixTable
ipv6NetToMediaTable
ipv6RouteTable
rfc2787a.mib vrrp mib
rfc2932.mib ipMRouteMIB
ipMRouteStdMIB
mroutemib.mib ipMRoute1MIBObjects
isismib.mib isisMIB
pimmib.mib pimMIB
msdpmib.mib msdpmib
jnx-if-extensions.mib Examples:
ifJnxTable
ifChassisTable
jnx-dcu.mib jnxDCUs
421
Table 29: Class 1 MIB Objects (Standard and Juniper MIBs) (Continued)
Class MIB Objects
jnx-atm.mib Examples:
jnxAtmIfTable
jnxAtmVCTable
jnxAtmVpTable
jnx-ipv4.mib jnxipv4
Example: jnxIpv4AddrTable
jnx-cos.mib Examples:
jnxCosIfqStatsTable
jnxCosQstatTable
jnx-scu.mib Example: jnxScuStatsTable
jnx-rpf.mib Example: jnxRpfStatsTable
jnx-pmon.mib Example: jnxPMonFlowTable
jnx-sonet.mib Example: jnxSonetAlarmTable
Class 1 jnx-atm-cos.mib Examples:
jnxCosAtmVcTable
jnxCosAtmVcScTable
jnxCosAtmVcQstatsTable
jnxCosAtmTrunkTable
jnx-mac.mib Example: jnxMacStatsTable
422
Table 29: Class 1 MIB Objects (Standard and Juniper MIBs) (Continued)
Class MIB Objects
jnx-services.mib Example: jnxSvcFlowTableAggStatsTable
jnx-coll.mib jnxCollectorMIB
Examples:
jnxCollPicIfTable
jnxCollFileEntry
Table 30 on page 422 shows Class 2 MIB objects (standard and enterprise-specific MIBs) supported by
Junos OS. With Class 2 objects, all instances within a logical system are exposed. Data will not be
segregated down to the routing instance level.
Table 30: Class 2 MIB Objects (Standard and Juniper MIBs)
Class MIB Objects
Class 2 rfc3813.mib mplsLsrStdMIB
Examples:
mplsInterfaceTable
mplsInSegmentTable
mplsOutSegmentTable
mplsLabelStackTable
mplsXCTable
(and related MIB objects)
igmpmib.mib igmpStdMIB
NOTE: The igmpmib.mib is the draft version of the
IGMP Standard MIB in the experimental tree.
Junos OS does not support the original IGMP
Standard MIB.
423
Table 30: Class 2 MIB Objects (Standard and Juniper MIBs) (Continued)
Class MIB Objects
l3vpnmib.mib mplsVpnmib
jnx-mpls.mib Example: mplsLspList
jnx-ldp.mib jnxLdp
Example: jnxLdpStatsTable
jnx-vpn.mib jnxVpnMIB
jnx-bgpmib2.mib jnxBgpM2Experiment
Table 31 on page 423 shows Class 3 MIB objects (standard and enterprise-specific MIBs) supported by
Junos OS. With Class 3, objects are exposed only for the default logical system.
Table 31: Class 3 MIB Objects (Standard and Juniper MIBs)
Class MIB Objects
Class 3 rfc2819a.mib rmonEvents
alarmTable
logTable
eventTable
agentxMIB
rfc2925a.mib pingmib
rfc2925b.mib tracerouteMIB
jnxchassis.mib jnxBoxAnatomy
424
Table 31: Class 3 MIB Objects (Standard and Juniper MIBs) (Continued)
Class MIB Objects
jnx-chassis-alarm.mib jnxAlarms
By default, SRX Series Firewalls queries
jnxAlarms mib only on the primary node of
redundancy group 0 (RG0) and not on the
secondary node.
jnx-ping.mib jnxPingMIB
jnx-traceroute.mib jnxTraceRouteMIB
jnx-rmon.mib jnxRmonAlarmTable
jnx-cos.mib Example: jnxCosFcTable
jnx-cfgmgmt.mib Example: jnxCfgMgmt
jnx-sonetaps.mib apsMIBObjects
jnx-sp.mib jnxSpMIB
ggsn.mib ejnmobileipABmib
rfc1907.mib snmpModules
snmpModules Examples:
snmpMIB snmpFrameworkMIB
Table 32 on page 425 shows Class 4 MIB objects (standard and enterprise-specific MIBs) supported by
Junos OS. With Class 4 objects, data is not segregated by routing instance. All instances are exposed.
425
Table 32: Class 4 MIB Objects (Standard and Juniper MIBs)
Class MIB Objects
Class 4 system Example: sysORTable
rfc2011a.mib ip (ipDefaultTTL, ipInReceives)
icmp
rfc2012a.mib tcp
tcpConnTable
ipv6TcpConnTable
rfc2013a.mib udp
udpTable
ipv6UdpTable
rfc2790a.mib hrSystem
rfc2287a.mib sysApplOBJ
jnx-firewall.mib jnxFirewalls
jnx-ipv6.mib jnxIpv6
Support Classes for MIB Objects
When a routing instance is specified, all routing-related MIB objects return data maintained by the
routing instance in the request. For all other MIB objects, the data returned is segregated according to
that routing instance. For example, only those interfaces assigned to that routing instance (for example,
the logical interfaces [ifls] as well as their corresponding physical interfaces [ifds]) are exposed by the
SNMP agent. Similarly, objects with an unambiguous attachment to an interface (for example, addresses)
are segregated as well.
426
For those objects where the attachment is ambiguous (for example, objects in sysApplMIB), no
segregation is done and all instances are visible in all cases.
Another category of objects is visible only when no logical system is specified (only within the default
logical system) regardless of the routing instance within the default logical system. Objects in this
category are Chassis MIB objects, objects in the SNMP group, RMON alarm, event and log groups, Ping
MIB objects, configuration management objects, and V3 objects.
In summary, to support routing instances, MIB objects fall into one of the following categories:
• Class 1—Data is segregated according to the routing instance in the request. This is the most granular
of the segregation classes.
• Class 2—Data is segregated according to the logical system specified in the request. The same data is
returned for all routing instances that belong to a particular logical system. Typically, this applies to
routing table objects where it is difficult to extract routing instance information or where routing