on Paris Traceroute [15, 48] and the Multipath Detection Algo-
rithm (MDA) [17, 47]. It also inscribes itself in the line of measure-
ment work that has sought to improve our ability to trace the IP
level paths that packets take through the Internet, such as Reverse
Traceroute [32], which uses the IP Record Route option to learn
IP addresses on the return path taken by probe replies; Vanaubel
et al.’s Network Fingerprinting technique [46] for examining the
TTLs of probe replies to determine which type of router might
have sent them and, combined with examination of the MPLS la-
bel stack that is received in an ICMP Time Exceeded message, to
trace a path’s MPLS tunnels; or Dublin Traceroute [20], which uses
100101102Router size0.00.20.40.60.81.0Portion of routers100101102Router size0.00.20.40.60.81.0Portion of routers1102030405060708090Max Width106105104103102101Portion of diamondsMax Width distribution1102030405060708090Max Width106105104103102101Portion of diamondsMax Width distribution20406080100Max Width before20406080100Max Width after100101102103104Steven Bellovin’s technique [21] for examining the IP ID field of
probe replies for NAT box detection in order to identify NAT boxes
on a multipath route. Similarly to the latter two, our multilevel
route tracing technique goes beyond the interface level to uncover
information about the devices through which packets pass.
Our multilevel route tracing makes use of existing alias resolu-
tion techniques, notably Midar’s [33] state of the art Monotonic
Bounds Test (MBT) for comparing overlapping time series of the
IP IDs of probe replies. The MBT itself builds on the pioneering
approaches of Ally [44] and RadarGun [22]. We also use Vanaubel
et al.’s Network Fingerprinting [46]. But there are other alias resolu-
tion techniques that we do not use. For instance, the Mercator [27]
and iffinder [30] approach, which is based on Pansiot and Grad’s
technique [39] of seeing whether a probe to one IP address elicits
a reply from another. Nor do we use Sherry et al.’s prespecified
timestamp technique [41]. This is because we currently limit our
Traceroute tool to Traceroute-style probing, what the Midar paper
calls “indirect probing”, that is based principally on TTL expiry,
rather than Ping-style probing, otherwise called “direct probing”.
But there is no reason in principle, aside from additional overhead,
why such techniques could not be added. We also do not use Spring
et al.’s technique [43] of examining the names returned by reverse
DNS look-ups and looking for similarities, as this requires hand-
designed rules to reflect each Internet service provider’s naming
conventions. Nor do we use graph analysis based alias resolution
techniques such as APAR [28], kapar [5], or DisCarte [42], as these
work by analyzing route traces from multiple sources to multiple
destinations.
Fakeroute is a network simulator purpose-built for one thing:
statistical validation of multipath route detection algorithm imple-
mentations on a variety of topologies. As such, it does not imple-
ment any other features that general network simulators such as
ns-3 [29], or emulators, such as GNS3 [4], that can run real router
OSes, might offer.
The surveys follow on previous surveys of load balanced paths
in the Internet. Our survey provides an update on Augustin et al.’s
survey [19] from ten years ago. Like in Marchetta et al.’s survey [37],
our survey transforms IP level traces into router-level topologies,
but it does so with a single tool, while tracing, rather than with
additional measurements by other tools a posteriori. Almeida et
al. characterized multipath routes in the IPv6 Internet [14], while
we have yet to extend our tool to do the same. Marchetta et al.’s
and Almeida et al.’s surveys are quite recent, from 2016 and 2017
respectively, but they report only a maximum of 16 interfaces at a
given hop, whereas our survey reveals up to 96.
6.2 Multipath route tracing on RIPE Atlas
RIPE Atlas, because of the resource constraints on its probe boxes,
does not deploy the MDA. Nonetheless, a rudimentary form of
MDA can be realized on the platform. Within a repeating route
tracing measurement, a level of flow ID variation is permitted:
up to 64 variations of what is termed the Paris ID. Measurements
are generally scheduled conservatively, and so over the course
of minutes or hours a probe box may cycle through 64 distinct
Paris IDs in its traces towards a destination. This approach implies
that RIPE Atlas is capable of discerning multiple forward paths
between a source and a destination. However, it does so in a manner
that is not optimized, neither in terms of probe savings nor in
terms of statistical guarantees. This has motivated our search for
an improved reduced-overhead MDA.
7 CONCLUSION AND FUTURE WORK
This paper made four contributions related to Paris Traceroute, each
of which can be developed further. (1) For MDA-Lite, the alterna-
tive to the Multipath Discovery Algorithm (MDA) that significantly
reduces overhead while maintaining a low failure probability, we
hope to deepen the mathematical analysis in order to determine sig-
nificance levels for the results, as had been done for the MDA [47].
Also, the assumption of uniform load balancing, which we believe
to hold in almost all cases, could be tested by a rigorous survey,
and the algorithm adjusted, which we believe would be straightfor-
ward, to take into account uneven load balancing if necessary. (2)
For Fakeroute, the simulator that enables validation of a multipath
tracing software tool’s adherence to its claimed failure probability
bounds, we could extend it to simulate exceptions to the assump-
tions made by the MDA and MDA-Lite. Some assumptions, such as
that every probe will receive a reply, often do not hold in practice.
Indeed, ICMP rate limiting is one common cause of a lack of replies,
and a simulator that takes rate limiting into account could help
in designing an algorithm to probe in ways less likely to trigger
rate limiting. Another extension might be to allow simulation of
multilevel route tracing. (3) For multilevel multipath route tracing,
which has provided, a router-level view of multipath routes, we
continue to investigate the differences between direct and indirect
probing for alias resolution. (4) For the surveys of multipath routing
in the Internet, showing, among other things, that load balancing
topologies have increased in size well beyond what has been previ-
ously reported as recently as 2016, we would like to repeat them,
conducting at a larger scale some of the side-by-side comparisons
of MDA and MDA-Lite that we have so far conducted only on a
smaller scale. Overall, the work is currently entirely focused on
IPv4 and can benefit from being applied to IPv6.
ACKNOWLEDGMENTS
A research grant from the French Ministry of Defense has made this
work possible. The Ant Lab at USC ISI provided us with Impact
dataset DS-822 [13], which was essential to our study. We thank:
Burim Ljuma, for his precious help in conducting and analyzing
the surveys; earlier team members for their development of MDA
Paris Traceroute and the first version of Fakeroute; our colleagues
at Caida, for their guidance in the use of their tools; and the anony-
mous reviewers from both the IMC TPC and the two shadow TPCs,
and our shepherd, for their careful reading of this paper and sugges-
tions for its improvement. Kevin Vermeulen, Olivier Fourmaux, and
Timur Friedman are associated with Sorbonne Université, CNRS,
Laboratoire d’informatique de Paris 6, LIP6, F-75005 Paris, France.
Kevin Vermeulen and Timur Friedman are associated with the Lab-
oratory of Information, Networking and Communication Sciences,
LINCS, F-75013 Paris, France.
[37] Pietro Marchetta, Antonio Montieri, Valerio Persico, Antonio Pescapé, Ítalo
Cunha, and Ethan Katz-Bassett. 2016. How and how much traceroute confuses
our understanding of network paths. In Proc. LANMAN ’16.
[38] Donald J. Newman. 1960. The Double Dixie Cup Problem. The American Mathe-
matical Monthly 67, 1 (1960), 58–61.
[39] Jean-Jacques Pansiot and Dominique Grad. 1998. On Routes and Multicast Trees
in the Internet. ACM SIGCOMM Comput. Commun. Rev. 28, 1 (Jan. 1998), 41–50.
[40] RIPE NCC Staff. 2015. RIPE Atlas. Internet Protocol Journal 18, 3 (2015).
[41] Justine Sherry, Ethan Katz-Bassett, Mary Pimenova, Harsha V. Madhyastha,
Thomas Anderson, and Arvind Krishnamurthy. 2010. Resolving IP Aliases with
Prespecified Timestamps. In Proc. ACM IMC ’10.
[42] Rob Sherwood, Adam Bender, and Neil Spring. 2008. Discarte: A Disjunctive
Internet Cartographer. ACM SIGCOMM Comput. Commun. Rev. 38, 4 (Aug. 2008),
303–314.
[43] Neil Spring, Mira Dontcheva, Maya Rodrig, and David Wetherall. 2004. How
to Resolve IP Aliases. Technical Report 04-05-04. University of Washington,
Computer Science and Engineering.
[44] Neil Spring, Ratul Mahajan, and David Wetherall. 2002. Measuring ISP Topologies
with Rocketfuel. ACM SIGCOMM Comput. Commun. Rev. 32, 4 (Aug. 2002), 133–
145.
[45] Yves Vanaubel, Pascal Mérindol, Jean-Jacques Pansiot, and Benoit Donnet. 2015.
MPLS Under the Microscope: Revealing Actual Transit Path Diversity. In Proc.
ACM IMC ’15.
[46] Yves Vanaubel, Jean-Jacques Pansiot, Pascal Mérindol, and Benoit Donnet. 2013.
Network Fingerprinting: TTL-based Router Signatures. In Proc. ACM IMC ’13.
[47] Darryl Veitch, Brice Augustin, Renata Teixeira, and Timur Friedman. 2009. Failure
Control in Multipath Route Tracing. In Proc. IEEE Infocom ’09.
[48] Fabien Viger, Brice Augustin, Xavier Cuvellier, Clémence Magnien, Matthieu
Latapy, Timur Friedman, and Renata Teixeira. 2008. Detection, understanding,
and prevention of traceroute measurement artifacts. Computer Networks 52, 5
(April 2008), 998–1018.
REFERENCES
[1] [n. d.]. Ark. Retrieved September 12, 2018 from https://www.caida.org/projects/
ark/locations
[2] [n. d.]. C++ Mersenne Twister.
Retrieved September 12, 2018 from http:
//www.cplusplus.com/reference/random/mt19937/
[3] [n. d.]. EdgeNet. Retrieved September 12, 2018 from http://edge-net.org/
[4] [n. d.]. GNS3 emulator. Retrieved September 12, 2018 from https://www.gns3.com
[5] [n. d.]. kapar. Retrieved September 12, 2018 from https://www.caida.org/tools/
[6] [n. d.]. libnetfilter-queue library, netfilter.org project. Retrieved September 12,
measurement/kapar/
2018 from http://fr.netfilter.org
[7] [n. d.].
libparistraceroute library. Retrieved September 12, 2018 from https:
//github.com/libparistraceroute/libparistraceroute
[8] [n. d.]. libtins packet crafting and sniffing library. Retrieved September 12, 2018
from http://libtins.github.io
[9] [n. d.]. M-Lab. Retrieved September 12, 2018 from https://www.measurementlab.
net
planet-lab.eu
[10] [n. d.]. PlanetLab Europe. Retrieved September 12, 2018 from https://www.
[11] [n. d.]. RIPE Atlas. Retrieved September 12, 2018 from https://atlas.ripe.net
[12] [n. d.]. Traceroute for Linux. Retrieved September 12, 2018 from http://traceroute.
sourceforge.net
[13] [n. d.]. USC/ISI ANT Datasets.
//ant.isi.edu/datasets/all.html
Retrieved September 12, 2018 from https:
[16] Brice Augustin, Timur Friedman, and Renata Teixeira. 2006. Exhaustive path
[14] Rafael Almeida, Osvaldo Fonseca, Elverton Fazzion, Dorgival Guedes, Wagner
Meira, and Ítalo Cunha. 2017. A Characterization of Load Balancing on the IPv6
Internet. In Proc. PAM ’17.
[15] Brice Augustin, Xavier Cuvellier, Benjamin Orgogozo, Fabien Viger, Timur Fried-
man, Matthieu Latapy, Clémence Magnien, and Renata Teixeira. 2006. Avoiding
Traceroute Anomalies with Paris Traceroute. In Proc. ACM IMC ’06.
tracing with Paris traceroute. In Proc. ACM CoNEXT ’07.
balanced Paths in the Internet. In Proc. IMC ’07.
with Paris traceroute. In Proc. E2EMON ’07.
Routing in the Internet. IEEE/ACM Trans. Netw. 19, 3 (June 2011), 830–840.
Presentation at the MOCA Italian hacker camp.
[17] Brice Augustin, Timur Friedman, and Renata Teixeira. 2007. Measuring Load-
[20] Andrea Barbeiro. 2016. Visualizing Multipath Networks with Dublin Traceroute.
[18] Brice Augustin, Timur Friedman, and Renata Teixeira. 2007. Multipath tracing
[19] Brice Augustin, Timur Friedman, and Renata Teixeira. 2011. Measuring Multipath
[21] Steven M. Bellovin. 2002. A Technique for Counting NATted Hosts. In Proc. IMW
[22] Adam Bender, Rob Sherwood, and Neil Spring. 2008. Fixing Ally’s Growing Pains
’02.
with Velocity Modeling. In Proc. ACM IMC ’08.
tation at AIMS ’18 CAIDA Workshop.
[23] Ya Chang and Peter Boothe. 2018. A better schema for paris-traceroute. Presen-
[26] Marco Ferrante and Monica Saltalamacchia. 2014. The coupon collector’s problem.
[24] Weifeng Chen, Yong Huang, Bruno F Ribeiro, Kyoungwon Suh, Honggang Zhang,
Edmundo de Souza e Silva, Jim Kurose, and Don Towsley. 2005. Exploiting the
IPID field to infer network path and end-system characteristics. In Proc. PAM ’05.
[25] Constantine Dovrolis, Krishna Gummadi, Aleksandar Kuzmanovic, and Sascha D
Meinrath. 2010. Measurement lab: Overview and an invitation to the research
community. ACM SIGCOMM Comput. Commun. Rev. 40, 3 (2010), 53–56.
MATerials MATemàtics 2014, 2 (May 2014), 1–35.
map discovery. In Proc. IEEE Infocom 2000.
[28] Mehmet H. Gunes and Kamil Sarac. 2009. Resolving IP Aliases in Building
Traceroute-based Internet Maps. IEEE/ACM Trans. Netw. 17, 6 (Dec. 2009), 1738–
1751.
[29] Thomas R. Henderson, Sumit Roy, Sally Floyd, and George F. Riley. 2006. ns-3
[27] Ramesh Govindan and Hongsuda Tangmunarunkit. 2000. Heuristics for Internet
[30] Bradley Huffaker, Daniel Plummer, David Moore, and kc claffy. 2002. Topology
Project Goals. In Proc. WNS2 ’06.
discovery by active probing. In Proc. ’02 SAINT Workshops.
[31] Van Jacobson. 1988. 4BSD routing diagnostic tool available for ftp. Email
PI:EMAIL to the IETF and end2end-interest e-mail
lists.
[32] Ethan Katz-Bassett, Harsha V Madhyastha, Vijay Kumar Adhikari, Colin Scott,
Justine Sherry, Peter Van Wesep, Thomas E Anderson, and Arvind Krishnamurthy.
2010. Reverse traceroute.. In Proc. NSDI ’10.
[33] Ken Keys, Young Hyun, Matthew Luckie, and kc claffy. 2013. Internet-Scale IPv4
Alias Resolution with MIDAR. IEEE/ACM Trans. Netw. 21, 2 (Apr 2013), 383–399.
[34] Matthew Luckie. 2010. Scamper: a scalable and extensible packet prober for
active measurement of the internet. In Proc. ACM IMC ’10.
bdrmap: inference of borders between IP networks. In Proc. ACM IMC ’16.
Method and Forward IP Path Inference. In Proc. ACM IMC ’08.
[35] Matthew Luckie, Amogh Dhamdhere, Bradley Huffaker, David Clark, et al. 2016.
[36] Matthew Luckie, Young Hyun, and Bradley Huffaker. 2008. Traceroute Probe