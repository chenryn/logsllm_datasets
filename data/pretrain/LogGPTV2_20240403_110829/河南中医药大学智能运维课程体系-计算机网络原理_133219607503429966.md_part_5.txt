## Page 91
91
3.便用广播信道的数据链路层
3.7以太网的MAC层
6bytes
offset:
1
2
3
4
5
6
most
6thbyte
5th byte
4th byte
3rdbyte
2nd byte
1st byte
least
lstoctet
2nd octet
3rdoctet
4thoctet
5thoctet
6thoctet
significant
significant
or
3bytes
3bytes-
Organisationally Unique
NetworkInterfaceController
Identifier(oul)
(NIC) Specific
8bits
b8b7b6b5b4b3b2b1
O:unicast
1:multicast
0:globallyunique(oul enforced)
1:locallyadministered
河南中医药大学信息技术学院互联网技术教学团队／https://internet.hactcm.edu.cn
---
## Page 92
92
3.便用广播信道的数据链路层
3.7 以太网的MAC层
口适配器具有过滤功能
■每收到一个MAC帧，先用硬件检查帧中的MAC 地址。
如果是发往本站的帧则收下，然后再进行其他的处理。
■否则就将此帧丢弃，不再进行其他的处理
“发往本站的顿"包括以下3种顿：
■单播（unicast）帧
(—对—)
■广播(broadcast)帧
(一对全体)
■多播(multicast)帧
(一对多)
---
## Page 93
93
3.使用广播信道的数据链路层
3.7以太网的MAC层
口以太网适配器还可以设置为一种特殊的工作方式，即"混杂方式
(promiscuous mode) "
工作在混杂方式的网卡只要"听到"有帧在以太网上传输就全部记录下来，而
不管是发往哪里的数据帧。
■如果网络上有混杂方式工作的网卡，那么就可以通过数据分析的方式窃取别
人的信息。
网络管理人员也可以通过此方式来监听和分析以太网的流量，已实现可量化
的网络管理。
■最为常见的是"嗅探器"。
---
## Page 94
94
3.便用广播信道的数据链路层
3.7以太网的MAC层
如何查看网卡的MAC地址呢？
可否自行修改网卡的MAC地址呢？
---
## Page 95
95
3.使用广播信道的数据链路层
3.7以太网的MAC层
口MAC帧格式：
■常用的以太网MAC帧格式有两种标准：
 DIX Ethernet V2 标准
口IEEE的802.3标准
最常用的MAC帧是DIVEthernetV2的格式。
---
## Page 96
96
3.便用广播信道的数据链路层
3.7 以太网的MAC层
IP数据报
网络层
字节
6
2
46 ~ 1500
6
4
MAC层
MAC 帧
目的地址
源地址
类型
数
据
FCS
插入
以太网 MAC 帧
物理层
8字节
7字节
1字节
10101010101010
101010101010
10101011
：
前同步码
帧开始定界符
河南中医药大学信息技术学院互联网技术教学团队／https://internet.hactcm.edu.cn
---
## Page 97
97
3.便用广播信道的数据链路层
3.7以太网的MAC层
IP数据报
网络层
字节
6
6
46 ~ 1500
2
4
目的地址
源地址
类型
数
FCS
MAC层
MAC帧
据
插入
以太网 MAC 帧
物理层
8字节
7字节
1字节
目的地址：6字节，记录数据帧的接收方的MAC地址。
10101010101010
101010101010
10101011
：
源
地址：6字节，记录数据帧的发送方的MAC地址。
前同步码
帧开始定界符
类
型：2字节，标志上一层使用的协议。
例如：0x8137表示IPX报文，0x0800表示IP数据报
河南中医药大学信息技术学院互联网技术教学团队／https://internet.hactcm.edu.cn
---
## Page 98
98
3.便用广播信道的数据链路层
3.7以太网的MAC层
IP数据报
网络层
字节
6
6
46 ~ 1500
2
4
MAC层
MAC 帧
目的地址
源地址
类型
数
据
FCS
插入
以太网 MAC 帧
物理层
8字节
7字节
1字节
数据字段：46-1500字节之间。
10101010101010
101010101010
10101011
：
当数据字段的长度小于46字节时，应在数据字段的后
前同步码
帧开始定界符
面加入整数字节的填充字段，以保证以太网的MAC帧
长不小于64字节
FCS
：帧检验序列FCS，用于CRC校验。
河南中医药大学信息技术学院互联网技术教学团队／https://internet.hactcm.edu.cn
---
## Page 99
99
3.便用广播信道的数据链路层
3.7以太网的MAC层
IP数据报
网络层
字节
6
6
46 ~ 1500
2
4
MAC层
MAC 帧
目的地址
源地址
类型
数
据
FCS
插入
以太网 MAC 帧
物理层
8字节
7字节
1字节
在帧的前面插入的8字节：
10101010101010
101010101010
10101011
：
第一个字段共7个字节，是前同步码，用来迅速实现
前同步码
帧开始定界符
MAC帧的比特同步。
第二个字段是帧开始定界符，表示后面的信息就是MAC
帧。
河南中医药大学信息技术学院互联网技术教学团队／https://internet.hactcm.edu.cn
---
## Page 100
100
3.便用广播信道的数据链路层
3.7以太网的MAC层
无效的MAC帧:
■IEEE802规定凡出现下述情况，均为无效帧：
口数据字段的长度与长度字段的值不一致;
口帧的长度不是整数个字节；
口用收到的帧检验序列FCS查出有差错
口数据字段的长度不在46～1500字节之间。
有效的MAC帧长度为64～1518字节之间
■对于检查出的无效MAC 帧就简单地丢弃。
以太网不负责重传丢弃的帧
河南中医药大学信息技术学院
---
## Page 101
101
3.便用广播信道的数据链路层
3.7 以太网的MAC层
IEEE802.3MAC与以太网V2MAC帧格式的区别
6字节
6字节
2字节
46－1500 字节
4字节
EthernetV2MAC帧
目的地址
源地址
类型
数
据
FCS
IEEE 802.3 MAC帧
目的地址
源地址
长度/类型
数
据
FCS
当“长度/类型”字段值大于0x0600时，表示"类型”；小于0x0600时，表示“长度”。
当"长度/类型”字段值小于0x0600时，数据字段必须装入逻辑链路控制LLC子层的LLC帧。
●在802.3标准的文档中，MAC帧格式包括了8字节的前同步码和帧开始定界符。
河南中医药大学信息技术学院互联网技术教学团队／https://internet.hactcm.edu.cn
---
## Page 102
102
3.使用广播信道的数据链路层
3.7以太网的MAC层
安装并使用噢探器软件Wireshark
使用Wireshark软件抓取数据包，分析数据帧结构
m.edu.cr
---
## Page 103
103
4.扩展的以太网
以太网技术的发展迅速，但以太网技术存在传输距离和规模的限制，因
此希望能够把以太网进行扩展。
口扩展主要在两个层面：
■物理层扩展：支持更远距离的网络
■数据链路层扩展：支持更大规模的网络。
口扩展的主要手段：
■集线器/HUB：物理层扩展。
网桥/交换机：数据链路层扩展。
---
## Page 104
104
4.扩展的以太网
4.1在物理层扩展以太网
以太网上的主机之间距离不能够太远，否则CSMA/CD会因为衰减而无
法正常工作。
■10BASE-T 以太网的两个主机之间的距离不得超过200m。
扩展主机和集线器之间距离的简单方法是使用光纤。
■通过光纤调制解调器，将传输的距离扩展。
电缆
光纤
电缆
以太网
光纤
光纤
以太网
集线器
调制解调器
调制解调器
集线器
河南中医药大学信息技术学院互联网技术教学团队／https://inter
cm.edu.cr
---
## Page 105
105
4.扩展的以太网
4.1在物理层扩展以太网
FX1
FX2
Thisdevice c
5VDC
河南中医药大学信息技术学院互联网技术教学团队／https://interi
---
## Page 106
106
4.扩展的以太网
4.1在物理层扩展以太网
口某单位有三个部门，每个部门都有一个局域网。
■通过主干集线器将三个部门的局域网连接起来，就变成了一个大的局域网。
■通过多级结构的集线器，将以太网进行了扩展。例如部门局域网的主机到集
线器的距离为100m，主机间最远距离为200m，通过扩展后，最远主机间的
距离为300m。
扩展之后，三个局域网变为一个更大的局域网，扩展后的以太网是一个碰撞
域（collisiondomain，冲突域），同时只能够有一个主机发送数据，传输效
率降低了。
---
## Page 107
107
4.扩展的以太网
4.1在物理层扩展以太网
三个独立的碰撞域
碰撞域
碰撞域
碰撞域
集线器
集线器
集线器
L
口.
部门A
部门B
部门C
河南中医药大学信息技术学院互联网技术教学团队／https://internet.hactcm.edu.cn
---
## Page 108
108
4.扩展的以太网
4.1在物理层扩展以太网
一个更大的碰撞域
集线器
集线器
集线器
集线器
1.
L.
L.
.
部门A
部门B
部门C
河南中医药大学信息技术学院互联网技术教学团队／https://internet.hactcm.edu.cn
---
## Page 109
109
4.扩展的以太网
4.1在物理层扩展以太网
口在物理层通过集线器扩展局域网的优点
■使原来属于不同碰撞域的局域网上的计算机能够进行跨碰撞域通信。
■扩大了局域网覆盖的地理范围。
在物理层通过集线器扩展局域网的缺点：
■碰撞域增大了，但总的吞吐量并未提高。
■如果使用不同的以太网技术（如数据率不同），那么就不能用集线器将它们
互连起来。
---
## Page 110
110
4.扩展的以太网
4.1在物理层扩展以太网
口碰撞域
碰撞域（collision domain）又称为冲突域，指网络中一个站点发出的顿会与
其他站点发出的帧产生碰撞或冲突的那部分网络。
碰撞域越大，发生碰撞的概率越高。
---
## Page 111
111
4.扩展的以太网
4.2在数据链路层扩展以太网
在数据链路层扩展局域网
■早期使用网桥，
现在使用以太网交换机
网桥
交换机
交换机
河南中医药大学信息技术学院互联网技术教学团队／https://internet.hactcm.edu.cn