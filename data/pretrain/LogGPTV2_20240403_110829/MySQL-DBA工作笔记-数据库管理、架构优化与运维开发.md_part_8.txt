### 优化后的文本

#### 脚本逻辑修改
1. 注释掉这个 cron 任务。

---

## Page 51

### 2.1 MySQL 体系结构概览

“一千个读者就有一千个哈姆雷特”，不同的人对 MySQL 体系结构的理解也会有所不同。学习 MySQL 体系结构时，关键在于深入理解其设计思路，而不是一开始就去查阅源代码。通过下面的图示来了解 MySQL 的体系结构，看看你能从中获取多少信息？

对于大多数人来说，MySQL 可以被直观地理解为一个服务（内存结构）和一些物理文件。为了更好地理解这些概念，我们可以从以下几个方面入手：

1. **通过文件了解 MySQL 体系结构**：这有助于我们更直观地理解 MySQL 的工作原理。
2. **MySQL 如何保证数据不丢失**：这是数据库系统的一个核心问题。
3. **玩转 MySQL 数据字典**：数据字典是数据库中存储元数据的地方。
4. **InnoDB 体系结构解读**：InnoDB 是 MySQL 中最常用的存储引擎之一。

引用罗伯特·M·波西格在《禅与摩托车维修艺术》中的一句话：“你做任何一件事都可以把它做得很漂亮，或是很丑陋。” 这同样适用于我们对 MySQL 体系结构的学习和理解。

#### 通过文件了解 MySQL 体系结构

---

## Page 52

### 30 | MySQL DBA 工作笔记：数据库管理、架构优化与运维开发

虽然 MySQL 的内部结构对我们来说是不可见的，但我们可以通过查看物理文件来了解它的部分细节。以下是一个测试环境中的文件列表及其简要说明：

- `performance_schema`：性能模式相关的文件。
- `mysql-bin.index`：二进制日志索引文件。
- `mysql-bin.000003`、`mysql-bin.000002`、`mysql-bin.000001`：二进制日志文件。
- `mysqld.log`：错误日志文件，记录了数据库启动和服务端的一些日志。
- `mysqld.pid`：MySQL 服务的进程号文件。
- `ibdata1`：共享表空间文件，包含 InnoDB 表的数据。
- `ibtmp1`：临时表空间文件。
- `my.cnf`：配置文件，默认从 `/etc/my.cnf` 读取，也可以自定义路径。

这些文件提供了大量的信息，但逐个解释可能会显得杂乱无章。因此，我们需要有条理地进行分析。

---

## Page 53

### MySQL 文件结构概述

MySQL 的文件结构大致如下图 2-2 所示。在 MySQL 8.0 版本之后，使用独立表空间变得更加普遍。主要参数包括 `innodb_file_per_table` 和 `innodb_data_file_path`。前者允许每个表都有独立的 `.frm` 和 `.ibd` 文件，后者则将所有数据集中存放在一个共享表空间文件（如 `ibdata1`）中。

- `.frm` 文件：存储表结构信息。
- `.ibd` 文件：存储表数据。

例如，在数据库 `testdb` 中存在表 `test` 和 `testdata`，它们的文件列表如下：

- `test.ibd`：表 `test` 的数据文件。
- `testdata.frm`：表 `testdata` 的结构文件。

通过查看这些文件，我们可以对 MySQL 的数据存储有一个直观的认识。以下是几个重要的文件及其功能：

- `dev01-slow.log`：慢查询日志，记录查询性能较差的 SQL 语句。
- `ib_logfile0` 和 `ib_logfile1`：InnoDB 层的日志文件，用于重做操作。
- `auto.cnf`：MySQL 启动时如果没有 UUID，会生成此文件。
- `mysqld.pid`：MySQL 服务的进程号文件。

---

## Page 54

### 2.1.2 表数据存储

表中的数据并不是像文本文件那样存储的，而是以行为单位进行存储。默认情况下，每页大小为 16KB（也可以根据参数 `innodb_page_size` 调整为 4K、8K 或 32K），形成一套完整的体系。

通过以上内容，我们可以更好地理解 MySQL 的体系结构和数据存储方式。希望这些信息对你有所帮助。