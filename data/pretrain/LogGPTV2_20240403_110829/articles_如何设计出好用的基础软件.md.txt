å¦‚ä½•è®¾è®¡å‡ºå¥½ç”¨çš„åŸºç¡€è½¯ä»¶
å¯äº¤äº’æ€§å’Œå¯è§‚æµ‹æ€§
é»„ä¸œæ—­
PingCAP è”åˆåˆ›å§‹äººå…¼ CTO
å…³äºæˆ‘
é»„ä¸œæ—­
â€¢
PingCAP è”åˆåˆ›å§‹äººï¼ŒCTO
â€¢
å·¥ç¨‹å¸ˆï¼Œåˆ†å¸ƒå¼ç³»ç»Ÿ / æ•°æ®åº“
â€¢
TiDB / TiKV / Codis
â€¢
ç¼–ç¨‹ï¼Œç”»ç”»ï¼Œå¼¹ç´
â€¢
PI:EMAIL
â€¢
çµé­‚æ‹·é—®ï¼š
ä½ èƒ½å¤Ÿç†Ÿç»ƒä½¿ç”¨ gdb å—ï¼Ÿ
(Without Google)
ç³»ç»Ÿè½¯ä»¶æ–¯å¾·å“¥å°”æ‘©ç»¼åˆç—‡å€™ç¾¤
â€¢ å¯èƒ½æ˜¯ç³»ç»Ÿç¨‹åºå‘˜ç¾¤ä½“å¯¹äºç²¾å¯†çš„å¤æ‚æœ‰ç€ç‰¹åˆ«çš„æ„Ÿæƒ…
â€¢ æˆ‘æ›¾ç»è§‰å¾—æˆ‘ä¸èƒ½è®°ä½æ‰€æœ‰çš„ gdb æŒ‡ä»¤æ˜¯æˆ‘æ™ºå•†ä¸è¡Œâ€¦
â€¢ ä¹Ÿæ›¾åœ¨èƒ½å¤Ÿç†Ÿç»ƒä½¿ç”¨ vim çš„æ—¶å€™è§‰å¾—è‡ªå·±å¾ˆç‰›é€¼
â€¢ ç»ˆäºç®—ä¸€ä¸ªåˆæ ¼çš„ç¨‹åºå‘˜äº†ï¼Ÿ
â€¢ ä½†æ˜¯ç°åœ¨æˆ‘è§‰å¾—è¿™äº›è½¯ä»¶åº”è¯¥å‘æˆ‘é“æ­‰(ç¡®å®å¤ªéš¾ç”¨äº†)
éƒ½21ä¸–çºªäº†
ä¸ºä»€ä¹ˆä½ ä»¬ç¨‹åºå‘˜
å°±ä¸èƒ½æŠŠä¸œè¥¿åšå¾—å¥½ç”¨ä¸€ç‚¹ï¼Ÿ
(vscode ä¸é¦™å—ï¼Ÿ)
æˆ‘ä»¬è®¤çŸ¥å¤–éƒ¨ä¸–ç•Œçš„æ¨¡å¼
éœ€è¦è·¨è¶Šçš„ä¸¤æ¡é¸¿æ²Ÿ
æ‰§è¡Œçš„é¸¿æ²Ÿ
â€¢
è¯„ä¼°çš„é¸¿æ²Ÿ
â€¢
01
è·¨è¶Šæ‰§è¡Œçš„é¸¿æ²Ÿï¼šå¯äº¤äº’æ€§
å¯äº¤äº’æ€§ - No Surprise! çš„æ¦‚å¿µæ¨¡å‹
æƒ³è±¡ä¸€ä¸ªä¾‹å­ï¼šæ±½è½¦
â€¢
äººå¯¹äº‹ç‰©é€šå¸¸æœ‰é¢„è®¾çš„å¿ƒç†æ¨¡å¼
â€¢
å½“æˆ‘ä»¬çœ‹åˆ° $ _ æˆ–è€… > _ çš„æ—¶
â€¢
å€™ï¼Œæƒ³åˆ°äº†ä»€ä¹ˆï¼Ÿ
é€šå¸¸ç®€å•/è‡ªæ´½çš„æ¦‚å¿µæœ€å®¹æ˜“è¢«äºº
â€¢
è®°ä½ï¼ˆè‡ªç„¶æ˜ å°„ï¼‰
å¯äº¤äº’æ€§ - No Surprise! çš„æ¦‚å¿µæ¨¡å‹
çœ‹å‡ ä¸ªå¥½ä¾‹å­ï¼š
UNIX çš„æ¦‚å¿µæ¨¡å‹ TiUP
â€¢ ä¸€åˆ‡çš†æ˜¯æ–‡ä»¶ â€¢ ä¸€åˆ‡çš†æ˜¯ç»„ä»¶
æ•°æ®æ˜¯æµ Telegram botfather
â€¢
Pipe æ¥ä¸²è”æµ å¯¹è¯
â€¢ â€¢
åœ¨å†™ä¸€è¡Œä»£ç ä¹‹å‰ï¼Œå°±æƒ³å¥½ç”¨æˆ·å¦‚ä½•ä½¿ç”¨ï¼ˆæ¦‚å¿µæ¨¡å‹ï¼‰
ä¾‹å­ï¼šæ§åˆ¶å™¨ - æ§åˆ¶å¯¹è±¡
ä¸€äº›å¥½çš„ æ§åˆ¶å™¨ - æ§åˆ¶å¯¹è±¡ çš„ä¾‹å­ï¼š
redis-cli
æ˜ å°„åˆ° redis çš„æ¦‚å¿µæ¨¡å‹ï¼šä¸€åˆ‡çš†æ˜¯ KV
â€¢
äº¤äº’å‘½ä»¤æ“ä½œæ¨¡å¼ï¼ˆç”šè‡³ä¿®æ”¹é…ç½®éƒ½æ˜¯ï¼‰
â€¢
MySQLï¼ˆæˆ–è€…å…¶ä»–æµè¡Œçš„ SQL Databaseï¼‰
SQL æœ¬èº«å°±æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„æ¨¡å‹
â€¢
å¤§å¿Œï¼šæ§åˆ¶å™¨çš„å¯¹åº”å…³ç³»æ··ä¹±
â€œä¸€ä¸ªç”µè§†æœºåº”è¯¥åªæœ‰ä¸€ä¸ªé¥æ§å™¨â€
å¯äº¤äº’æ€§ - æ²¡äººè¯»æ–‡æ¡£ï¼ˆæ¢ç´¢å¼å­¦ä¹ ï¼‰
åœ¨å¼€å‘è€…å¿ƒç›®ä¸­ï¼šæ–‡æ¡£çº¦ç­‰äºå­—å…¸
çµé­‚æ‹·é—®ï¼šä½ å°æ—¶å€™å­¦æ±‰è¯­æ˜¯é€šè¿‡çœ‹å­—å…¸å­¦ä¼šçš„å—ï¼Ÿ
æ¥è§¦ä¸€ä¸ªæ–°ä¸œè¥¿çš„æ—¶å€™ï¼Œå¼€å‘è€…æ­£å¸¸çš„å†…å¿ƒæ´»åŠ¨ï¼š
â€œQuick start åœ¨å“ªé‡Œï¼Ÿâ€
â€¢
â€œæ‰¾åˆ°äº†â€
â€¢
â€œå“ªé‡Œæœ‰æ·±è‰²èƒŒæ™¯çš„ç­‰å®½æ–‡å­—ï¼Ÿï¼ˆæ³¨ï¼šé€šå¸¸æ˜¯ install scriptï¼‰"
â€¢
â€œå¤ªå¥½äº†ï¼æ‰¾åˆ°äº†ï¼Œè®©æˆ‘è´´åˆ°æˆ‘çš„ shell é‡Œçœ‹çœ‹ä¼šå‘ç”Ÿä»€ä¹ˆå§ï¼â€
â€¢
å¯äº¤äº’æ€§ - æ²¡äººè¯»æ–‡æ¡£ï¼ˆæ¢ç´¢å¼å­¦ä¹ ï¼‰
Quick start çš„ç¬¬ä¸€è¡Œ shell å‘½ä»¤è‡³å…³é‡è¦ï¼Œå†³å®šäº†åç»­è¿˜æœ‰æ²¡æœ‰åç»­
é€šå¸¸æ¥è¯´ï¼Œå¿ƒç†æ¥å—åº¦æ’åºå¦‚ä¸‹ï¼š
apt / yum / pacman / brew â€¦ > curl xxx | sh >= pip / go get / cargo > Docker >>>> npm
ç¬¬ä¸€è¡Œé¡ºåˆ©æˆåŠŸä»¥åï¼Œæœ€å¥½å¼•å¯¼ç”¨æˆ·åˆ°ä¸€ä¸ªå¯äº¤äº’ç¯å¢ƒï¼ˆå‘Šè¯‰ç”¨æˆ·ä¸‹ä¸€æ­¥è¯¥å¹²å˜›ï¼‰
è®ºè¡¥å…¨çš„é‡è¦æ€§
ä¾‹å­: Telegram Botfather
å¯äº¤äº’æ€§ - å¤šæƒ³ä¸€æ­¥ï¼Œå‘Šè¯‰ç”¨æˆ·åŠæ­¥ï¼Œè®©ç”¨æˆ·è‡ªå·±èµ°åŠæ­¥
é‡è¦å†³å®šä¸è¦ä»£æ›¿ç”¨æˆ·åš
é‡è¦æ“ä½œè¯·æä¾› DryRun çš„
mode
å‡ºé”™ä»¥åæ€ä¹ˆåŠï¼Ÿ
ä¸€èˆ¬äººé‡åˆ°è½¯ä»¶é”™è¯¯ä¼šæ€ä¹ˆåŠï¼Ÿ
ä¾‹å­ï¼š çš„
Terraform Dry Run
ä¾‹å­ï¼šRust çš„ç¼–è¯‘é”™è¯¯æç¤º
å¯äº¤äº’æ€§ - æ­£ç¡®çš„åé¦ˆ
æ­£å¸¸äººçš„ååº”æ—¶é—´ä¸º0.15ç§’-0.4ç§’
è¶…è¿‡çš„è¿™ä¸ªæ—¶é—´ï¼Œå°±ä¼šæœ‰æ˜æ˜¾çš„å»¶è¿Ÿæ„Ÿ
åé¦ˆæ˜¯å¯äº¤äº’æ€§ä¸­æœ€é‡è¦çš„ä¸€ç¯ï¼Œä¹Ÿæ˜¯è½¯ä»¶è®©äººäº§ç”Ÿæ„‰æ‚¦æ„Ÿçš„é‡
è¦æ¥æº
å¯äº¤äº’æ€§ - åé¦ˆ 3 å®šå¾‹
ä¸è¦æš´éœ²å†…éƒ¨æ¦‚å¿µï¼ä¸è¦æš´éœ²å†…éƒ¨æ¦‚å¿µï¼ä¸è¦æš´éœ²å†…éƒ¨æ¦‚å¿µï¼
â—
ç”¨ç²¾ç®€çš„äººè¯æš´éœ²è¿›å±•å’ŒçŠ¶æ€
â—
ä¸è¦è¯´åºŸè¯ï¼Œæ›´ä¸è¦ä¸è¯´
â—‹
åé¦ˆå¿…é¡»å³æ—¶
â—
ä¸€ä¸ªå…³äºåé¦ˆçš„åä¾‹å­ï¼š
TiDB çš„ä¸€ä¸ªæŠ¥é”™ä¿¡æ¯å¦‚ä¸‹ï¼š
MySQL [test]> SELECT COUNT(1) AS count,
SUM(account_balance) AS amount, trade_desc
AS type FROM b_test WHERE member_id =
"22792279001" AND detail_create_date >=
"2019-11-19 17:00:00" AND
detail_create_date < "2019-11-28 17:00:00"
group by trade_desc;
ERROR 9005 (HY000): Region is unavailable
ä¸€ä¸ªå…³äºåé¦ˆçš„å¥½ä¾‹å­
å¯äº¤äº’æ€§ - å…³äºé…ç½®
ä¿®æ”¹é…ç½®æ–‡ä»¶æ˜¯ä¸€ä¸ªæ…¢åé¦ˆè¿‡ç¨‹
â— é…ç½®æ–‡ä»¶éœ€è¦åœ¨æ­£ç¡®çš„ä½ç½®
â—‹ /etc/â€¦. /home/xxx/.config
â— å¯åŠ¨çš„æ—¶å€™æ£€æŸ¥å’Œå‘Šè¯‰ç”¨æˆ·é…ç½®ä¿¡æ¯ï¼ˆåœ¨æ—¥å¿—ä¸­æ‰“å°ï¼‰
â— å¯¹äºåˆ†å¸ƒå¼ç³»ç»Ÿï¼Œå…¨å±€çš„é…ç½®ä¸­å¿ƒä¼šæ˜¯ä¸€ä¸ªæ›´å¥½çš„ä½“éªŒ
â— çƒ­æ›´æ–°å¥½äºé‡å¯ï¼ˆå›æƒ³å½“å¹´ windows ä¿®æ”¹é…ç½®ï¼‰
â— æä¾›å¯äº¤äº’å¼å·¥å…·ï¼ˆæ§åˆ¶å™¨ï¼‰ç”¨äºé…åˆ¶æ£€æŸ¥å’Œçƒ­æ›´æ–°
â— æä¾›æ¨¡ç‰ˆï¼ˆ--print-config-sampleï¼‰ï¼Œç”šè‡³è‡ªåŠ¨ç”Ÿæˆå·¥å…·
é…ç½®çš„å¿ƒæ™ºè´Ÿæ‹…(ä»å°åˆ°å¤§)
ç¯å¢ƒå˜é‡ï¼ˆé€šå¸¸é€‚åˆ flagsï¼‰ < å‘½ä»¤è¡Œå‚æ•° <= æ§åˆ¶å™¨ï¼ˆç®¡æ§å¹³å°ï¼‰ < é…ç½®æ–‡ä»¶
å¯äº¤äº’æ€§ - ä½ ä¸ç”¨é‡æ–°å‘æ˜è½®å­
â€¢ ä¸–ç•Œä¸Šæœ‰å¾ˆå¤šå¾ˆå¥½ä¾‹å­ï¼ŒæŠ„å°±å®Œäº†ğŸ˜Š
â€¢ Docker CLI
â€¢ kubectl (ç°åœ¨éš¾ç”¨ä¸»è¦æ˜¯å› ä¸º k8s å¤ªå¤æ‚äº†ï¼Œä»¥åŠ yaml
å¸¦æ¥çš„é—®é¢˜)
â€¢ Redis CLI
â€¢ tiup
â€¢
...
02
è·¨è¶Šè¯„ä¼°çš„é¸¿æ²Ÿï¼šå¯è§‚æµ‹æ€§
å¯è§‚æµ‹æ€§ï¼šè°åœ¨è§‚æµ‹
äººï¼Œå¯æ˜¯æˆ‘ä»¬çœŸçš„åšåˆ°ä»¥äººä¸ºæœ¬äº†å—ï¼Ÿ
â€¢
æˆ‘ä»¬æ›¾ç»çš„ä¸€ä¸ªâ€˜å–ç‚¹â€™ï¼šæˆ‘ä»¬æœ‰å‡ åƒä¸ªç›‘æ§é¡¹
â€¢
äººåŒä¸€æ—¶é—´å¤§æ¦‚èƒ½è·Ÿè¸ªçš„å¯¹è±¡æ•°ï¼š4
â€¢
å¯è§‚æµ‹æ€§ï¼šåŒºåˆ†å™ªéŸ³å’Œä¿¡æ¯
ä»€ä¹ˆæ˜¯æœ‰ç”¨çš„ä¿¡æ¯ï¼Ÿ
æˆ‘çš„ç»éªŒï¼šè·Ÿç€å…³é”®èµ„æºèµ°
ä»€ä¹ˆæ˜¯å…³é”®èµ„æºï¼š
CPUï¼šéƒ½å“ªäº›çº¿ç¨‹åœ¨å·¥ä½œï¼Ÿè¿™äº›çº¿ç¨‹éƒ½åœ¨å¹²å˜›ï¼Ÿè¿™äº›çº¿ç¨‹å„è‡ªæ¶ˆè€—äº†å¤šå°‘ CPU Timeï¼Ÿ
â€¢
å†…å­˜ï¼šå½“å‰å†…å­˜ä¸­å­˜å‚¨äº†å“ªäº›ä¸œè¥¿ï¼Ÿè¿™äº›ä¸œè¥¿çš„å‘½ä¸­ç‡æƒ…å†µï¼Ÿï¼ˆé€šå¸¸æˆ‘ä»¬æ›´å…³æ³¨ä¸šåŠ¡ç¼“å­˜ï¼‰ï¼Ÿ
â€¢
ç½‘ç»œ I/Oï¼šQPS/TPS æœ‰å¼‚å¸¸å—ï¼Ÿå½“å‰ä¸»è¦çš„ç½‘ç»œ I/O æ˜¯ç”±ä»€ä¹ˆè¯·æ±‚å‘èµ·çš„ï¼Ÿå¸¦å®½è¿˜å¤Ÿå—ï¼Ÿè¯·æ±‚å»¶è¿Ÿï¼Ÿé•¿
â€¢
é“¾æ¥è¿˜æ˜¯çŸ­é“¾æ¥ï¼Ÿï¼ˆè¡¡é‡ syscall çš„å¼€é”€ï¼‰ï¼Ÿ
ç£ç›˜ I/Oï¼šç£ç›˜åœ¨è¯»å†™æ–‡ä»¶å—ï¼Ÿè¯»å†™å“ªäº›æ–‡ä»¶ï¼Ÿå¤§å¤šæ•°çš„è¯»å†™æ˜¯ä»€ä¹ˆ Patternï¼Ÿååå¤šå¤§ï¼Ÿä¸€æ¬¡ I/O å»¶è¿Ÿ
â€¢
å¤šå¤§ï¼Ÿ
å…³é”®æ—¥å¿—ï¼šä¸æ˜¯æ‰€æœ‰æ—¥å¿—éƒ½æœ‰ç”¨çš„ï¼Œäººä¹Ÿä¸ä¼šè¯»ï¼Œåªæœ‰åŒ…å«ç‰¹å®šå…³é”®å­—çš„æ—¥å¿—ï¼Œäººä»¬æ‰ä¼šå…³å¿ƒã€‚æ‰€ä»¥
â€¢
ï¼Œæœ‰æ²¡æœ‰ç‰¹å®šçš„å…³é”®å­—çš„æ—¥å¿—å‡ºç°ï¼Ÿ
å¯è§‚æµ‹æ€§ï¼šåˆ©ç”¨äººçš„ç›´è§‰
å¦‚ä½•æŠŠâ€˜å™ªéŸ³â€™å˜æˆæœ‰ç”¨ä¿¡æ¯ï¼šç»“åˆä¸šåŠ¡çš„ä¸Šä¸‹æ–‡ + äººçš„ç›´è§‰
å¯è§‚æµ‹æ€§ï¼šåˆ©ç”¨äººçš„ç›´è§‰
ä¾‹å­ï¼š
TiDB Key Viz
â—
ä¾‹å­ï¼š Golang pprof
ç»ƒä¹ ï¼š TiDB TopSQL
è¯•ç€åœ¨æˆ‘ä¸å‘Šè¯‰ä½ è¿™ä¸ªæ˜¯ä»€ä¹ˆåŠŸèƒ½çš„å‰æä¸‹ï¼Œä»ç•Œé¢ä¸Šæå–ä¿¡æ¯
å¯è§‚æµ‹æ€§ï¼šå‘¨æœŸ
è„±ç¦»å‘¨æœŸè°ˆå¯è§‚æµ‹æ€§éƒ½æ˜¯è€æµæ°“
â—
è¶Šè´´è¿‘ä¸šåŠ¡å‘¨æœŸè¶Šå¥½ç”¨ï¼Œä¾‹å­ï¼š
â—
ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦å…¨é“¾è·¯ç›‘æ§
â—‹
å¯è§‚æµ‹æ€§ï¼šäº‹åè§‚æµ‹
å¯è§‚æµ‹æ€§ä»€ä¹ˆæ—¶å€™èƒ½æ•‘å‘½ï¼Ÿ
â—
â— Profile ä»€ä¹ˆæ—¶å€™æ˜¯æœ‰ç”¨çš„ï¼Ÿ
â— æŒç»­ Profiling
å‚è€ƒèµ„æ–™
è°¢è°¢
ğŸ™ The Design of Everyday Things: Revised and Expanded â€“ Don
Norman
Don't Make Me Think â€“ Steve Krug
äº§å“æ•…äº‹åœ°å›¾ â€“ Donna Lichaw
UNIX ç¼–ç¨‹è‰ºæœ¯ â€“ Eric Raymond