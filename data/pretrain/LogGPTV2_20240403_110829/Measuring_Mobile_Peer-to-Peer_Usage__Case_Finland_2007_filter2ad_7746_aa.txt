# Measuring Mobile Peer-to-Peer Usage: Case Finland 2007

**Authors:**  
Mikko V.J. Heikkinen, Antero Kivi, and Hannu Verkasalo  
TKK Helsinki University of Technology, P.O. Box 3000, FI-02015 TKK, Finland  
{mikko.heikkinen, antero.kivi, hannu.verkasalo}@tkk.fi  

## Abstract
This study examines the development of mobile peer-to-peer (MP2P) traffic and the usage of MP2P applications in Finland from 2005 to 2007. The research data consists of two components: 1) traffic traces measured from three Finnish GSM/UMTS networks, covering 80-90% of Finnish mobile subscribers (N > 4,000,000), and 2) usage log files collected via a dedicated Symbian handset monitoring application (N = 579). The traffic trace analysis reveals almost no P2P file sharing traffic for handsets, with 9-18% of the traffic remaining unidentified, some of which may be P2P traffic. A growing trend in computer-based P2P file sharing traffic is observed, with BitTorrent and eDonkey being the most popular protocols. In the panel study, only Fring, a client for multiple P2P-based communication services, shows significant usage and data volume.

**Keywords:** Measurement, mobile, peer-to-peer, traffic, usage.

## 1. Introduction
Peer-to-peer (P2P) traffic has grown rapidly on the Internet in recent years [1]. Simultaneously, mobile devices and laptops are increasingly using GSM/UMTS (Global System for Mobile communications / Universal Mobile Telecommunications System) connections to access the Internet [2]. Our objective is to study the development of mobile P2P (MP2P) traffic and the use of MP2P applications in Finland from 2005 to 2007. We approach this from two perspectives: 1) by analyzing traffic traces from the GSM/UMTS networks of three major Finnish mobile operators, and 2) by examining results from a panel study conducted with a handset monitoring application running on the Nokia Symbian S60 operating system. In the traffic trace analysis, we identify P2P file sharing traffic based on TCP/UDP port numbers and use TCP fingerprinting to differentiate between computers and handsets. In the handset monitoring, we identify MP2P applications based on logged application names and record the number of usage sessions and transferred data volume. Our approach focuses on the end-user perspective.

There is no universally accepted definition of MP2P. According to Steinmetz and Wehrle [3], P2P is “a system with completely decentralized self-organization and resource usage.” Androutsellis-Theotokis and Spinellis [4] attribute several characteristics to P2P systems, including distribution, node interconnection, self-organization, resource sharing, adaptation to failures and transient populations, maintenance of acceptable connectivity and performance, and the absence of global centralized servers or authority. We use the term “mobile” to describe both laptop computers and handsets with a data transfer connection to a GSM/UMTS mobile network. We cover both P2P systems consisting entirely or partially of mobile nodes and mobile clients to P2P systems consisting only of fixed nodes. Among the handset applications analyzed, only SymTorrent acts as a fully functional peer in a P2P system; other applications act as clients to P2P systems, relaying traffic via intermediating peers or servers without implementing full peer capabilities.

Previous traffic measurement studies on MP2P in GSM/UMTS mobile networks have focused on specific applications in limited test scenarios [5]-[9]. To our knowledge, this study is the first comprehensive examination of MP2P usage in GSM/UMTS mobile networks.

The paper is structured as follows: we first conduct a brief literature review, then present our research methods and measurement results, and finally, conclude with our findings.

## 2. Previous Research
P2P traffic can be identified using various methods. The simplest method is to examine TCP or UDP packet headers' port numbers [10], [11]. Some P2P applications use static port numbers, making their usage analysis straightforward. However, many P2.g., Guo et al. [20] analyze log files generated by centralized components of a P2P network.

The point of measurement varies significantly in previous P2P studies. Some analyzed a border point of an Internet Service Provider (ISP) network [10], [11], [13]. Others investigated a border point of an academic network [15], [17], [18]. Henderson et al. [19] collected packet-level traces and syslog messages from several access points to an academic Wireless Local Area Network (WLAN). Wu et al. [16] obtained traces from a company providing a streaming service based on a P2P network.

Reported metrics in these studies include traffic-based metrics such as bandwidth consumption and traffic volume [11], [18], [19]; connection and session durations and latencies [10], [11], [18]; packet and flow level distributions [15], [16]; traffic patterns over time [10], [11], [13], [16]-[20]; and upstream and downstream traffic comparisons [10], [11], [16], [19]. Peer-related metrics include the geographical distribution of peers [10]; number of downloads, uploads, and shares by peers [8]; number of peers over time [14], [16], [20]; and peer connectivity and locality [10], [11].

## 3. MP2P Usage Measurements
### 3.1 TCP/IP Traffic Measurements
We use TCP/IP traffic measurements to collect IP traffic traces in GSM/UMTS mobile networks. The measurements were conducted simultaneously at the networks of three major Finnish GSM/UMTS mobile network operators during two weeks in September-October 2005, 2006, and 2007. The measurements took place at a point between the Gateway GPRS Support Node (GGSN) and the Internet in each of the three networks. In total, the measurements included the Internet-bound packet-switched data traffic of approximately 80-90% of Finnish mobile subscribers, i.e., over 4,000,000 subscribers. The measurements resulted in traces with the packet headers of Internet and transport layer protocols, with all application layer protocol headers sanitized from the data.

The underlying operating systems of the end-user devices generating the traffic, such as Symbian and Windows, are identified using TCP fingerprinting [21]. Different operating systems are recognized by identifying idiosyncrasies in the implementation of their respective TCP/IP stacks. No application layer data is needed, as the method uses certain TCP and IP header fields. Operating system identification using TCP fingerprinting is fairly reliable but leaves some traffic unidentified.

Different application protocols are identified from the traffic traces using transport protocol (TCP, UDP) port numbers. Additionally, the analysis of P2P traffic by Karagiannis et al. [22] is used to classify specific port numbers as P2P traffic. Port-based identification of P2P traffic has limitations. First, many P2P applications select port numbers dynamically, so identification based on default ports might leave much traffic unidentified. Second, some P2P applications use port 80 (HTTP) to masquerade their traffic as web traffic to pass simple firewalls or gain higher priority. Due to these limitations, only the following file sharing protocols are identified: BitTorrent, Direct Connect, eDonkey, FastTrack, Gnutella, and Napster. Several applications can use these protocols and their variations.

**Table 1. TCP and UDP port numbers used in P2P file sharing protocol identification**

| Protocol | TCP Ports | UDP Ports |
|----------|-----------|-----------|
| BitTorrent | 6881-6889 | -         |
| Direct Connect | 411, 412 | 411, 412 |
| eDonkey | 4661, 4662 | 4665      |
| FastTrack | 1214 | 1214       |
| Gnutella | 6346, 6347 | 6346, 6347 |
| Napster | 6699-6702 | 6257      |

We also depict traffic generated by web and email protocols with the following TCP port numbers: HTTP (80), HTTPS (443), and HTTP alternate (8080) for web, and SMTP (25), POP3 (110), IMAP (143), IMAP/SSL (993), and POP3/SSL (995) for email.

### 3.2 Handset Monitoring
We utilize a handset-based research method to collect data from end-users [23]. This method provides data on the actual usage of mobile applications and services, as the measurements are conducted directly on the device. End-users participating in the study install a client application on their Nokia Symbian S60 device. The client runs as a background process, observing user actions and storing usage data into memory. The collected data includes application usage, data sessions, communication activities, memory status, and Uniform Resource Locator (URL) traces, among others. The data is collected at the event and session levels, including accurate timestamps and identifiers for participating end-users. The data is transmitted daily to centralized servers for analysis. The method is deployed in controlled panel studies, typically involving a few hundred panelists.

The panel lasted for 1-2 months between November 2007 and January 2008. Panelists were provided with €20 vouchers to compensate for potential data transfer costs and entered into prize draws.

The main shortcoming of this method is the adverse selection of panelists. Typically, technologically enthusiastic individuals or those motivated by the prize draws participate. Additionally, Symbian device penetration is still below 20% in the Finnish market [2], so the panelists could be characterized as early adopters.

Panelists were recruited from the subscriber bases of three major Finnish mobile operators, targeting only consumer customers. 579 panelists, from whom at least three weeks of usage data was collected, are included in the dataset. 44% of panelists use Nokia S60 3rd edition devices, and 56% use older 2nd edition devices. 25% of the panelists have WLAN functionality in their handsets. 79% of the panelists are male. The most dominant age groups are 20-29 years (38%) and 30-39 years (30%). Most panelists (77%) are employed. Over half (58%) of the panelists have a usage-based data plan, while the rest have a quota-based plan (31%) or a flat-rate plan (11%).

In the panel measurements, we identified four MP2P applications: Fring, iSkoot, MobileMule, and SymTorrent. We do not know whether the applications were installed before or during the panel, nor do we know which applications were installed but not used. We identified the applications by analyzing a list of all applications used by the panelists. The decision to include an application for detailed analysis was based on its recorded name. The detailed analysis involved an internet search to determine if the application could be considered an MP2P application. If we had used a different classification scheme, such as including push-to-talk and instant messaging applications that use servers for both control and media traffic, we would have classified more applications as MP2P.

## 4. Results
### 4.1 TCP/IP Traffic Measurement Results
According to data provided by mobile operators to Statistics Finland [24], [25], the volume of packet-switched data traffic in Finnish mobile networks has grown rapidly in recent years (2005: 34,000 GB, 2006: 100,000 GB, 2007: 500,000 GB). This growth is partly explained by increased penetration of UMTS-capable handsets [2], expansion of UMTS network coverage to smaller cities, and High-Speed Downlink Packet Access (HSDPA) upgrades to mobile networks. These developments have been accompanied by the introduction of alternative flat-rate mobile data subscriptions and heavy marketing of data cards and USB data modems.

Our results from the measurement weeks in Falls 2005, 2006, and 2007 are consistent with the yearly figures reported by Statistics Finland. A fourfold increase in overall traffic volumes was observed between Falls 2005 and 2006, with both computer and handset (Symbian) originated traffic growing proportionally. However, between Falls 2006 and 2007, computer-generated traffic grew by a factor of fourteen, while handset traffic grew more moderately, tripling. The difference between our results and the figures from Statistics Finland is likely due to the rapid growth in traffic volumes in Finnish mobile networks starting in late Summer 2007, possibly due to aggressive marketing of flat-rate mobile broadband subscriptions bundled with HSDPA-capable USB dongles for laptop computers. Overall, our measurements show that the relative share of computer traffic in mobile networks grew from 70-75% in 2005-2006 to over 90% in 2007, while the traffic share of handsets running the Symbian operating system dropped from around 15% to about 4% of all traffic.

The profile of handset and computer traffic by application protocol is presented in Figures 1 and 2. Clear differences in the application protocol profile of computers and handsets can be observed. Handset traffic is dominated by web browsing, with a significant but decreasing share of email. Other protocols, especially P2P protocols, are marginal. For computers, the relative share of web browsing and email traffic has decreased, with the unidentified traffic amounting to almost 60% of all traffic in the latest traces. A small share (4-5%) of P2P traffic is also observed.

**Figure 1. Application Protocol Profile of Handset Traffic**

| Protocol | 2005 | 2006 | 2007 |
|----------|------|------|------|
| Web      | 79%  | 57%  | 59%  |
| Email    | 24%  | 17%  | 10%  |
| Other    | 0%   | 0%   | 0%   |

**Figure 2. Application Protocol Profile of Computer Traffic**

| Protocol | 2005 | 2006 | 2007 |
|----------|------|------|------|
| Web      | 80%  | 60%  | 40%  |
| Email    | 10%  | 7%   | 3%   |
| Unidentified | 18% | 9%   | 9%   |
| P2P      | 4%   | 5%   | 5%   |

These figures highlight the changing nature of mobile data traffic and the increasing dominance of computer-generated traffic in Finnish mobile networks.