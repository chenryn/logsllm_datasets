User: Use Shell script to realize automatic backup of Linux system, and keep a certain number of historical backups.
Assistant: #!/bin/bash # Automatic backup script # Backup directory BACKUP_DIR="/data/backup" # Backup file name NOW=$(date +"%Y%m%d") FILENAME="backup_$NOW.tar.gz " # Historical backup number MAX_BACKUP_NUM=10 # Create backup directory mkdir -p $BACKUP_DIR # Delete expired backup while [ $(ls -1 $BACKUP_DIR | wc -l) -gt $MAX_BACKUP_NUM ] do OLDEST_FILE=$(ls -1t $BACKUP_DIR | tail -n1) rm -rf $BACKUP_DIR/$OLDEST_FILE done # Execute backup tar -zcvf $BACKUP_DIR/$FILENAME /data echo "Backup complete!"