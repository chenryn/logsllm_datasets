title:Measuring the deployment of IPv6: topology, routing and performance
author:Amogh Dhamdhere and
Matthew J. Luckie and
Bradley Huffaker and
kc claffy and
Ahmed Elmokashfi and
Emile Aben
Measuring the Deployment of IPv6: Topology, Routing and
Performance
Amogh Dhamdhere
CAIDA
Matthew Luckie
CAIDA
Bradley Huffaker
CAIDA
Univ. of California, San Diego
Univ. of California, San Diego
Univ. of California, San Diego
PI:EMAIL
PI:EMAIL
Kc Claffy
CAIDA
Univ. of California, San Diego
PI:EMAIL
Ahmed Elmokashﬁ
Simula Research
Oslo, Norway
PI:EMAIL
bhuﬀPI:EMAIL
Emile Aben
RIPE NCC
Amsterdam, NL
PI:EMAIL
ABSTRACT
We use historical BGP data and recent active measurements
to analyze trends in the growth, structure, dynamics and
performance of the evolving IPv6 Internet, and compare
them to the evolution of IPv4. We ﬁnd that the IPv6 net-
work is maturing, albeit slowly. While most core Internet
transit providers have deployed IPv6, edge networks are lag-
ging. Early IPv6 network deployment was stronger in Eu-
rope and the Asia-Paciﬁc region, than in North America.
Current IPv6 network deployment still shows the same pat-
tern. The IPv6 topology is characterized by a single domi-
nant player – Hurricane Electric – which appears in a large
fraction of IPv6 AS paths, and is more dominant in IPv6
than the most dominant player in IPv4. Routing dynamics
in the IPv6 topology are largely similar to those in IPv4,
and churn in both networks grows at the same rate as the
underlying topologies. Our measurements suggest that per-
formance over IPv6 paths is comparable to that over IPv4
paths if the AS-level paths are the same, but can be much
worse than IPv4 if the AS-level paths diﬀer.
Categories and Subject Descriptors
C.2.2 [COMPUTER-COMMUNICATION
NETWORKS]: Network Protocols—Routing Protocols
Keywords
IPv6, BGP, Internet topology, routing, performance
General Terms
Experimentation, Measurement
Permission to make digital or hard copies of all or part of this work for
personal or classroom use is granted without fee provided that copies are
not made or distributed for proﬁt or commercial advantage and that copies
bear this notice and the full citation on the ﬁrst page. To copy otherwise, to
republish, to post on servers or to redistribute to lists, requires prior speciﬁc
permission and/or a fee.
IMC’12, November 14–16, 2012, Boston, Massachusetts, USA.
Copyright 2012 ACM 978-1-4503-1705-4/12/11 ...$15.00.
1.
INTRODUCTION
The Internet operations, engineering and research commu-
nities are putting signiﬁcant attention into a relatively new
version (actually 15 years old) of the Internet Protocol – IP
version 6 (IPv6) [1] – designed to solve several architectural
limitations of the existing IPv4 protocol. The most essen-
tial characteristic of IPv6 is that it has provides orders of
magnitude more address space than the world’s foreseeable
IP connectivity needs.
IPv6 has become especially perti-
nent in the last two years because the global Internet ad-
dress allocation architecture relies on the presence of a free
pool of IP addresses to allocate to sites operating Internet
infrastructure. The Internet Assigned Numbers Authority
(IANA) exhausted its unallocated address pool in February
2011, and the Asia-Paciﬁc region (represented by the AP-
NIC RIR) followed suit in April 2011. The remaining RIRs
too are expected to run out of unallocated addresses in the
next few years [2]. This exogenous pressure from IPv4 ad-
dress scarcity has driven widespread adoption of IPv6 into
modern operating systems and network equipment. Major
network operators and content providers are deploying IPv6
on both a trial and production basis [3], and some govern-
ments are mandating IPv6 support [4, 5]. But there is little
hard data about how mature the IPv6 network is in terms
of composition, topology, routing, and performance.
While IPv6 penetration remains small compared to IPv4,
the IPv6 network topology has shown two distinct growth
phases – for both ASes and AS links, an initial linear growth
(y=ax+b) followed by exponential (y=aebx) gives the best
ﬁt with the data, with the change in trajectory occurring
around 2008. The exponents for ASes and AS links are
0.13 and 0.16, respectively (Figure 1). It is interesting that
the IPv4 network topology growth shifted from exponential
to linear a decade ago [6]. While the current exponential
growth of IPv6 hints that it may ﬁnally have shifted from
an experimental or “toy” network to production, the nature
of its growth is still largely undocumented. Which network
types and geographic regions contribute the most? Does the
growing IPv6 network appear to converge toward the exist-
ing IPv4 network? How do routing dynamics in IPv6 com-
pare to IPv4? Does performance over IPv6 paths approach
that over IPv4 paths?
In this study we use historical BGP archives and recent
active measurements of the public IPv4 and IPv6 network
infrastructures to analyze the state of maturity of IPv6 de-
537)
4
v
P
I
(
s
e
S
A
f
o
r
e
b
m
u
N
)
4
v
P
I
(
s
k
n
i
l
S
A
f
o
r
e
b
m
u
N
IPv4
IPv6
 40000
 35000
 30000
 25000
 20000
 15000
 10000
 5000
 0
 4500
 4000
 3500
 3000
 2500
 2000
 1500
 1000
 500
 0
Jan
1998
Jan
2000
Jan
2002
Jan
2004
Jan
2006
Jan
2008
Jan
2010
Jan
2012
IPv4
IPv6
 140000
 120000
 100000
 80000
 60000
 40000
 20000
 0
 16000
 14000
 12000
 10000
 8000
 6000
 4000
 2000
 0
Jan
1998
Jan
2000
Jan
2002
Jan
2004
Jan
2006
Jan
2008
Jan
2010
Jan
2012
)
6
v
P
I
(
s
e
S
A
f
o
r
e
b
m
u
N
)
6
v
P
I
(
s
k
n
i
l
S
A
f
o
r
e
b
m
u
N
Figure 1: Both AS nodes and links grow linearly in
IPv4 but exponentially (as of 2007) in IPv6.
ployment along three dimensions: topology, routing, and
performance. Section 2 describes the data sources and sup-
porting analysis techniques we use throughout the paper.
We ﬁnd that the IPv6 network is maturing, as indicated by
its increasing similarity in size and composition (Section 3),
AS path congruity (Section 4), topological structure (Sec-
tion 5), and dynamics (Section 6), to the public IPv4 In-
ternet. While core Internet transit providers have mostly
deployed IPv6, edge networks are lagging behind. While all
geographic regions show exponential growth in IPv6 adop-
tion, early IPv6 deployment was stronger in Europe and
the Asia-Paciﬁc region than in North America. The IPv6
network is characterized by the presence of a single promi-
nent player, Hurricane Electric (HE). Hurricane Electric cur-
rently appears in between 20% and 95% of IPv6 AS paths
seen from diﬀerent vantage points, and is more prominent
in IPv6 than the most prominent player in IPv4. Further,
when IPv4 and IPv6 AS paths diﬀer, HE is the network
most often added to the IPv6 path. Routing dynamics in
the IPv6 topology are largely similar to those in IPv4. While
routing churn grows linearly in IPv4 and super-linearly in
IPv6, it is important to note that these trends match those
of the underlying IPv4 and IPv6 AS topology growth.
In
terms of performance (Section 7), our measurements show
that IPv6 data-plane performance closely matches IPv4 per-
formance when the AS-level paths are the same, while it can
be signiﬁcantly worse when AS-level paths diﬀer.
2. DATASETS AND METHODS
We use a variety of data sources and analysis methods,
which we summarize here, providing more detail in sections
that use speciﬁc data. Our analysis of the IPv6 Internet’s
size, routing behavior, and structure (Sections 3-5) relies on
publicly available historical BGP tables. Section 6 uses BGP
updates from the same public repositories to analyze rout-
ing dynamics of the IPv4 and IPv6 networks over time. We
gather our own data using active measurements from ﬁve
vantage points around the world, to compare and correlate
IPv4 and IPv6 performance with other growth parameters.
To compare the composition of the IPv4 and IPv6 graphs ac-
cording to type of networks, we classify the business types of
ASes using the algorithm presented in our previous work [6]
and the business relationships of the links between them
(e.g., customer, provider, peer) using Gao’s algorithm [7].
BGP topology data
We collected historical BGP data from the two major public
repositories at RouteViews [8] and RIPE [9]. We rely only
on these two data sources because no other source of topo-
logical/routing data (routing registries, traceroutes, looking
glass servers, etc.) provides historical information. Route-
views and RIPE started collecting IPv4 BGP data as early
as 1998; the ﬁrst IPv6 collector, however, became active in
2003. Consequently, our IPv4 data spans 14 years from 1998
to 2011, while the IPv6 data is from 2003 to 2011. The use of
Routeviews/RIPE repositories of BGP data has been shown
to inadequately expose the complete Internet topology [10,
11, 12] – although this data captures most ASes, it misses a
signiﬁcant fraction of peering and backup links at the edges
of the Internet [13, 12, 14]. However, we are mainly inter-
ested in customer-provider links used most of the time. AS
links revealed by short term failures and transient routing
events can “confuse” an evolutionary study, misinterpreting
link disappearances and appearances due to transient fail-
ures as link deaths and births respectively. For example, the
primary link lp between ASes X and Y fails at time t1, caus-
ing the activation of a backup link lb between ASes X and Z.
lp is repaired at t2 and the connectivity returns to its original
state. Since we focus on primary links, our goal is to ignore
the transient event during (t1, t2) and not detect lb. On
the other hand, a change of routing policy that makes lb the
primary link should be detected as the death of lp and the
birth of lb. To remove backup and transient links, we apply
the method of “majority ﬁltering” described in our previous
work [6] on the set of BGP AS paths obtained from BGP
table dumps at Routeviews and RIPE collectors. We do not
use BGP updates to construct our topology snapshots, as
these reveal backup and transient links which we want to
ﬁlter. The majority ﬁltering method works as follows. For
both IPv4 and IPv6, we construct a topology snapshot by
collecting 5 sets of AS paths over a duration of 3 weeks,
only using AS paths that were seen in a majority of those
ﬁve samples. We collect such a topology snapshot every 3
months, resulting in 56 snapshots of the IPv4 topology and
36 snapshots of the IPv6 topology. We refer the reader to
our previous work [6] for a detailed description of the data
collection and pre-processing.
BGP routing dynamics data
Our comparative analysis of routing dynamics of the IPv4
and IPv6 infrastructures is based on BGP updates collected
by the Routeviews project. Routeviews collectors run BGP
sessions with routers (or monitors) in many networks. Each
monitor sends a BGP update to the collector every time
there is a change in the preferred path from the monitor to
a destination preﬁx. We use update traces from two Route-
views collectors: Routeviews6 for IPv6 data and Oregon-
IX for IPv4 data. The IPv4 updates span the period from
1 Jan 2003 to 16 Feb 2012, while the IPv6 updates span
7 May 2003 through 16 Feb 2012. We use monitors from
ﬁve networks that contributed both IPv4 and IPv6 routing
data throughout the study period: AT&T, Hurricane Elec-
tric (HE), NTT-America, and Tinet, and IIJ. AT&T’s IPv4
monitor was unavailable for three months in 2003, and its
IPv6 monitor was unavailable between May 2005 and May
5382007. Tinet’s IPv6 monitor was unavailable between June
2008 and June 2010. If the multi-hop BGP session between a
monitor and the collector is broken and re-established (ses-
sion reset), the monitor re-announces all its known paths,
producing large bursts of updates. This is a local artifact
of the Routeviews measurement infrastructure, and does not
represent genuine routing dynamics. We use the method de-
veloped by Zhang et al. [15] to identify and remove updates
caused by session resets.
AS relationships
We use Gao’s AS relationship classiﬁcation algorithm [7] to
infer the business relationship associated with each inter-AS
link.1 For each snapshot, we apply this algorithm to the set
of IPv4 AS paths. Gao’s algorithm classiﬁes AS links into
the following types: sibling, customer-provider, settlement-
free peer, and unknown. Our focus is on customer-provider
and settlement-free peering links, so we exclude the sibling
and unknown classes, which account for fewer than 1% of
the AS links in any snapshot.
AS classiﬁcation
In our previous work [6], we developed a method to clas-
sify ASes according to their expected business type. The
method relies on a machine learning decision tree classiﬁer
which uses as input two properties inferred for each AS – the
average number of customers and average number of peers
over the lifespan of that AS. By peers we mean settlement-
free peers in a routing sense; we cannot know for sure if
there is a settlement between them. In that study we used
this method to classify each AS into four classes – Enterprise
Customer (EC), Small Transit Provider (STP), Large Tran-
sit Provider (LTP), and Content/Access/Hosting Provider
(CAHP) – with an accuracy of 85%. Note that the AS types
we consider are quite distinct from each other in terms of
their function and business goals. It is thus reasonable to
expect that ASes do not change from one AS type to an-
other during their lifetime. We validated this assumption
in our previous work by running the classiﬁcation algorithm
using only a two-year dataset; we found that only 3% of AS
classiﬁcations changed as compared to the entire dataset [6].
For this study we repeated the classiﬁcation algorithm using