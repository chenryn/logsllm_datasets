在VPN实例中，当同时配置BSR的有效时间和发送间隔时，BSR有效时间小于BSR发送
周期。
日志参数
参数名称 参数含义
VPNName VPN实例名称。
HoldTime BSR保留时间。
SendInt 发送BSR消息的时间间隔。
可能原因
在VPN实例中，当同时配置BSR的有效时间和发送间隔时，BSR有效时间小于BSR发送
周期。
处理步骤
l 请收集日志信息和配置信息，并联系技术支持人员。
----结束
文档版本 06 (2017-09-12) 华为专有和保密信息 677
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
日志参考 65 PIM
65.5 PIM/4/HW_DR_ELECTION
日志信息
PIM/4/HW_DR_ELECTION:The interface was elected as a DR. (IfIndex=[IfIndex],
IfIPverion=[IfIPverion], IfAddrType=[IfAddrType], Addr=[Addr],
IfName=[PimInterfaceName], PimInstanceID=[PimInstanceID],
PimInstanceName=[PimInstanceName])
日志含义
接口当选DR。
日志参数
参数名称 参数含义
IfIndex 接口索引。
IfIPverion 接口的IP版本号。
IfAddrType 接口地址类型。
Addr 接口地址。
IfName 接口名称。
PimInstanceID VPN实例ID。
PimInstanceName VPN实例名称。
可能原因
原因1：PIM接口收到新的Hello报文，且此接口的DR优先级或IP地址大于共享网段上其
他接口。
原因2：PIM接口变为Up状态后，在第一个Hello报文周期的时间后，未收到其他接口的
Hello报文。
处理步骤
l 检查接口当选DR是否是自己希望的。如果不是，可通过给该接口配置较低的DR
优先级或者给接口配置较小IP地址来解决。
----结束
文档版本 06 (2017-09-12) 华为专有和保密信息 678
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
日志参考 65 PIM
65.6 PIM/4/HW_DR_ELECTION_NORMAL
日志信息
PIM/4/HW_DR_ELECTION_NORMAL:The interface was elected as a DR.
(IfIndex=[IfIndex], IfIPverion=[IfIPverion], IfAddrType=[IfAddrType], Addr=[Addr],
IfName=[PimInterfaceName], PimInstanceID=[PimInstanceID],
PimInstanceName=[PimInstanceName])
日志含义
接口当选DR。
日志参数
参数名称 参数含义
IfIndex 接口索引。
IfIPverion 接口的IP版本号。
IfAddrType 接口地址类型。
Addr 接口地址。
IfName 接口名称。
PimInstanceID VPN实例ID。
PimInstanceName VPN实例名称。
可能原因
原因1：PIM接口收到新的Hello报文，且此接口的DR优先级或IP地址大于共享网段上其
他接口。
原因2：PIM接口变为Up状态后，在第一个Hello报文周期的时间后，未收到其他接口的
Hello报文。
处理步骤
步骤1 检查是否希望接口当选DR。
l 如果是，则请执行步骤4。
l 如果不是，则请执行步骤2。
步骤2 配置该接口较低的DR优先级或者给接口配置较小的IP地址。
l 如果问题解决，则请执行步骤4。
文档版本 06 (2017-09-12) 华为专有和保密信息 679
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
日志参考 65 PIM
l 如果问题没有解决，则请执行步骤3。
步骤3 请收集日志信息和配置信息，并联系技术支持人员。
步骤4 结束。
----结束
65.7 PIM/4/HW_INVALID_JP
日志信息
PIM/4/HW_INVALID_JP:PIM receives an Invalid Join/Prune message.
(GroupMappingOrigin=[GroupMappingOrigin],
GroupMappingAddrType=[GroupMappingAddrType], GrpAddr=[GrpAddr],
GrpPfxLen=[GrpPfxLen], GroupMappingRPAddrType=[GroupMappingRPAddrType],
RPAddr=[RPAddr], GroupMappingPimMode=[GroupMappingPimMode],
InvJPAddrType=[InvJPAddrType], InvJPOriginAddr=[InvJPOriginAddr],
InvJPGrpAddr=[InvJPGrpAddr], InvJPRpAddr=[InvJPRpAddr], NbrIfIndex=[NbrIfIndex],
NbrAddrType=[NbrAddrType], NbrAddr=[NbrAddr], NbrUpTime=[NbrUpTime],
NbrName=[NbrName], PimInstanceID=[PimInstanceID],
PimInstanceName=[PimInstanceName])
日志含义
PIM收到无效的加入/剪枝报文。
日志参数
参数名称 参数含义
GroupMappingOrigin RP映射组的类型。
GroupMappingAddrType 组地址类型。
GrpAddr 加入/剪枝报文中的组地址。
GrpPfxLen 组掩码长度。
GroupMappingRPAddrType RP地址的类型。
RPAddr RP地址。
GroupMappingPimMode 当前运行的PIM模式。
InvJPAddrType 无效的加入/剪枝报文的地址类型。
InvJPOriginAddr 无效的加入/剪枝报文中的源地址。
文档版本 06 (2017-09-12) 华为专有和保密信息 680
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
日志参考 65 PIM
参数名称 参数含义
InvJPGrpAddr 无效的加入/剪枝报文的组地址。
InvJPRpAddr 无效的加入/剪枝报文中的RP地址。
NbrIfIndex 邻居接口索引。
NbrAddrType 邻居地址的类型。
NbrAddr 邻居的地址。
NbrUpTime 邻居存活的时间。
NbrName 邻居名字。
PimInstanceID VPN实例ID。
PimInstanceName VPN实例名称。
可能原因
PIM收到无效的加入/剪枝报文。
处理步骤
l 检查本设备和加入/剪枝报文发送端设备，二者SSM范围是否相同。
– 如果SSM范围相同，则请修改加入/剪枝报文发送端设备和本设备对于该组的
RP配置，使得二者一致。
– 如果SSM范围不同，则请执行ssm-policy命令配置相同的SSM范围。
----结束
65.8 PIM/4/HW_INVALID_REG
日志信息
PIM/4/HW_INVALID_REG:PIM receives an invalid register message.
(GroupMappingOrigin=[GroupMappingOrigin],
GroupMappingAddressType=[GroupMappingAddressType], GrpAddr=[GrpAddr],
GrpPfxLen=[GrpPfxLen], GroupMappingRPAddressType=[GroupMappingRPAddressType],
RPAddr=[RPAddr], GroupMappingPimMode=[GroupMappingPimMode],
InvRegAddressType=[InvRegAddressType], InvRegOriginAddr=[InvRegOriginAddr],
InvRegGrpAddr=[InvRegGrpAddr], InvRegRpAddr=[InvRegRpAddr],
PimInstanceID=[PimInstanceID], PimInstanceName=[PimInstanceName])
文档版本 06 (2017-09-12) 华为专有和保密信息 681
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
日志参考 65 PIM
日志含义
PIM收到无效的注册报文。
日志参数
参数名称 参数含义
GroupMappingOrigin RP映射组的类型。
GroupMappingAddressType 组地址类型。
GrpAddr 注册报文中的组地址。
GrpPfxLen 组掩码长度。
GroupMappingRPAddressType RP地址的类型。
RPAddr 服务该组的RP地址。
GroupMappingPimMode 当前运行的PIM模式。
InvRegAddressType 无效报文的地址类型。
InvRegOriginAddr 注册报文的源地址。
InvRegGrpAddr 注册报文中的组地址。
InvRegRpAddr 注册报文的目的地址。
PimInstanceID VPN实例ID。
PimInstanceName VPN实例名称。
可能原因
PIM收到无效的注册报文。
处理步骤
l 检查源DR和RP的SSM是否相同。
– 如果SSM范围相同，则请修改源DR和本设备对于该组的RP配置，使得二者一
致。
– 如果SSM范围不同，则请执行ssm-policy命令配置相同的SSM范围。
----结束
文档版本 06 (2017-09-12) 华为专有和保密信息 682
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
日志参考 65 PIM
65.9 PIM/2/hwPimNeighborLoss_active
日志信息
PIM/2/hwPimNeighborLoss_active:PIM neighbor loss. (NbrIntIndex=[NbrIntIndex],
NbrAddrType=[NbrAddrType], NbrAddr=[NbrAddr], NbrUpTime=[NbrUpTime],
NbrIntName=[NbrIntName], InstanceID=[InstanceID], InstanceName=[InstanceName],
NeighborLossReason=[NeighborLossReason])
日志含义
设备收到邻居的Hello报文后会记录邻居的信息，并为邻居启动一个定时器。如果在定
时器超时之前再没有收到该邻居的Hello报文，造成PIM邻居丢失，则上报告警信息。
日志参数
参数名称 参数含义
NbrIntIndex 邻居所在的接口索引。
NbrAddrType 邻居的地址族。
NbrAddr 邻居地址。
NbrUpTime 邻居建立时间。
NbrIntName 邻居所在的接口名。
InstanceID 实例索引。
InstanceName 实例名。
NeighborLossReason 邻居不可用的原因。
可能原因
原因1：Neighbor timer expired.（邻居的HoldTime定时器超时。）
原因2：Interface is down.（邻居所在接口Down。）
原因3：Neighbor is deleted.（邻居删除。）
原因4：Receive hello cancel message.（收到HoldTime为零的邻居消息。）
原因5：BFD session is down.（邻居的BFD会话down。）
文档版本 06 (2017-09-12) 华为专有和保密信息 683
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
日志参考 65 PIM
处理步骤
l 原因1：Neighbor timer expired.
a. 使用命令ping检查和邻居之间的链路是否连通。
n 如果连通，则请执行步骤3。
n 如果不连通，则请执行步骤2。
b. 使用命令display ip routing-table命令检查到邻居的单播路由是否正常。
n 如果路由正常，则请执行步骤3。
n 如果路由不正常，则排除单播路由故障来解决告警问题。
c. 在对应邻居接口视图下使用display this命令查看接口是否使能了PIM-SM。
n 如果使能了PIM-SM，则说明对应邻居接口更改了IP地址，旧IP地址的邻
居丢失，等待一段时间若邻居未重新建立，则请执行步骤4。
n 如果未使能PIM-SM，可在接口视图下执行pim sm命令使能PIM解决告警
问题。
d. 请收集日志信息，并联系技术支持人员。
l 原因2：Interface is down.
a. 使用命令display interface brief查看接口的物理层和协议层状态，先检查协议
层状态是否为up。
n 如果状态为up，则请执行步骤2。
n 如果状态为down，可执行ip address命令为接口配置IP地址解决告警问
题。
b. 检查接口的物理层状态是否为up。
n 如果状态为up，则请执行步骤3。
n 如果状态为down，则说明接口出现物理故障，可检查接口来解决告警问
题。
n 如果状态为*down，则说明接口上配置了shutdown命令，可执行undo
shutdown命令解决告警问题。
c. 请收集日志信息，并联系技术支持人员。
l 原因3：Neighbor is deleted.
a. 在对应的接口视图下执行display this命令查看接口是否配置了pim neighbor-
policy。
n 如果配置了pim neighbor-policy，则请执行步骤2。
n 如果未配置pim neighbor-policy，则请执行步骤3。
b. 执行display acl命令查看ACL配置是否符合要求。
n 如果符合要求，则请执行步骤3。
n 如果不符合要求，则重新配置ACL规则。
c. 请收集日志信息，并联系技术支持人员。
l 原因4：Receive hello cancel message.
a. 在邻居设备对应的接口视图下执行display this命令查看接口是否使能了PIM-
SM。
n 如果已配置，则请执行步骤2。
n 如果未配置，则执行pim sm命令使能PIM-SM功能。
b. 在邻居设备上使用命令display interface brief查看接口的状态，检查协议层状
态是否为up。
文档版本 06 (2017-09-12) 华为专有和保密信息 684
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
日志参考 65 PIM
n 如果状态为up，则请执行步骤3。
n 如果状态为down，可执行ip address命令为接口配置IP地址解决告警问
题。
n 如果状态为*down，可执行undo shutdown命令。
c. 请收集日志信息，并联系技术支持人员。
l 原因5：BFD session is down.
a. 使用命令ping检查和邻居之间的链路是否连通。
n 如果连通，则请执行步骤3。
n 如果不连通，则请执行步骤2。
b. 在设备上使用命令display interface brief查看接口的状态，检查协议层状态是
否为up。
n 如果状态为up，则请执行步骤3。
n 如果状态为down，可执行ip address命令为接口配置IP地址解决告警问
题。
n 如果状态为*down，可执行undo shutdown命令。
c. 使用命令display ip routing-table命令检查到邻居的单播路由是否正常。
n 如果路由正常，则请执行步骤4。
n 如果路由不正常，则排除单播路由故障来解决告警问题。
d. 请收集日志信息，并联系技术支持人员。
----结束
65.10 PIM/2/hwPimNeighborLoss_clear
日志信息
PIM/2/hwPimNeighborLoss_clear:PIM neighbor add. (NbrIntIndex=[NbrIntIndex],
NbrAddrType=[NbrAddrType], NbrAddr=[NbrAddr], NbrExpiryTime=[NbrExpiryTime],
InstanceID=[InstanceID], InstanceName=[InstanceName])
日志含义
设备发现PIM邻居增加的时候发送告警清除的信息。
日志参数
参数名称 参数含义
NbrIntIndex 邻居所在的接口索引。
NbrAddrType 邻居的地址族。
NbrAddr 邻居地址。
NbrExpiryTime 邻居超时时间。
文档版本 06 (2017-09-12) 华为专有和保密信息 685
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
日志参考 65 PIM
参数名称 参数含义
InstanceID 实例索引。
InstanceName 实例名。
可能原因
PIM邻居增加。
处理步骤
l 正常运行信息，无需处理。
----结束
65.11 PIM/4/HW_RP_MAP_CHG_NORMAL
日志信息
PIM/4/HW_RP_MAP_CHG_NORMAL:The RP changes.
(GroupMappingOrigin=[GroupMappingOrigin],
GroupMappingAddressType=[GroupMappingAddressType], szGrpAddr=[szGrpAddr],
GrpPfxLen=[GrpPfxLen], GroupMappingRPAddressType=[GroupMappingRPAddressType],
RPAddr=[RPAddr], GroupMappingPimMode=[GroupMappingPimMode],