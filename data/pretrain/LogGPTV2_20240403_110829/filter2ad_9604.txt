# 【技术分享】如何构建自己的渗透测试环境
|
##### 译文声明
本文是翻译文章，文章来源：deepdotweb.com
原文地址：
译文仅供参考，具体内容表达以及含义原文为准。
译者：[兴趣使然的小胃](http://bobao.360.cn/member/contribute?uid=2819002922)
预估稿费：140RMB
投稿方式：发送邮件至linwei#360.cn，或登陆网页版在线投稿
**一、前言**
扪心自问一下，你是想成为一个激情四射的渗透测试者，还是一个无法无天的黑客？万事开头难，你想先从基础学起，于是在Google上搜索“hacking”、“hacker”等一堆关键词，结果得到一堆弱智的教程，比如，有的教程教你如何使用alfa
awus036h网卡来黑掉邻居的wpa网络（然而你并没有成功！），然后你找到一些论坛，论坛上充斥着各种话题，如恶意软件、僵尸网络、漏洞利用技术以及比特币。你问了些细节问题，但没有得到你想要的答案，一段时间后，你终于开始对这个方向有个大体上的了解。你没有放弃，继续查阅书籍、课程、访问相关网站（如[DeepDotWeb](https://www.deepdotweb.com/)这个网站），最后你自豪地说自己已经知道如何成为一名真正的黑客。但现在你真的是一名[黑客](https://www.deepdotweb.com/2017/08/18/ghost-telephonist-allows-hackers-make-calls-texts-phone-number/)吗？还没有。你了解相关知识、大概理解整体框架，但你还需要训练。你需要自己动手，这也是提升黑客技能的唯一途径。然而你肯定不想在监狱里度过余生，所以最好还是搭建自己的[渗透测试实验室](https://www.deepdotweb.com/2017/07/07/the-penetration-testers-career/)，这样你就可以在不触碰法律的前提下进行黑客实验。
**二、可选项**
你当然可以选择安装Metasploitable。Metasploitable由Metasploit平台的开发者创建而成，是一个专用的存在漏洞的操作系统，外表看起来就如同virtualbox虚拟机中的命令行终端（该系统没有图形界面）。然而本文并不是Metasploitable学习教程，因此我会给你介绍另一种可选方案。在本文中，我们会下载几个操作系统镜像，在Virtual
Box中安装这些镜像，然后通过pfSense这个软件将这些系统连接起来。
**三、pfSense**
pfSense是为企业设计的开源防火墙，是许多商业防火墙的替代解决方案。官网对pfSense的介绍如下：
“pfSense项目是一个免费的网络防火墙软件，以自定义内核的FreeBSD操作系统为基础进行构建，使用了第三方免费软件包以提供附加功能。在这些基础上，pfSense软件能够提供与常用商业防火墙相同或者更多的功能，并且不会受到任何人为限制。pfSense已经成为许多大型商业防火墙的替代品，这些防火墙包括Check
Point、Cisco PIX、Cisco
ASA、Juniper、Sonicwall、Netgear、Watchguard、Astaro等，你能想到的防火墙都在这个名单内。
pfSense软件提供了一个web接口，用来配置软件所包含的各种组件。用户不需要掌握任何UNIX知识，不需要使用命令行进行操作，甚至不需要手动编辑各种防火墙规则集。熟悉商业防火墙的用户可以快速上手，但对不熟悉商业级防火墙的用户来说可能需要一段学习过程。”
首先我们需要执行如下操作：
下载pfSense [iso压缩文件](https://nyifiles.pfsense.org/mirror/downloads/pfSense-CE-2.3.4-RELEASE-i386.iso.gz)。
解压这个文件。
为pfSense创建一个虚拟机。
分配合适的内存：
设置处理器选项：
现在有个关键点：我们需要启用两块不同的网卡，一块用于桥接网络，一块用于内部网络，这样设置防火墙才能正常工作。
点击“OK”，启动pfSense虚拟机：
选择“Accept these settings”选项：
然后选择“Quick/Easy Install”：
在快速安装确认界面选择“OK”选项，开始安装过程。整个安装过程需要一段时间，所需时间取决于具体的硬件条件。
选择“standard kernel”选项：
请注意，按下“reboot”选项后，我们需要马上弹出安装光盘，具体操作是点击virtual-box软件的“device”菜单，选择弹出安装介质，如果不这么做，安装过程又会重新开始。
安装结束后，呈现在你眼前的是pfSense主菜单。你可以看到之前创建的两块网卡的名称以及对应的IP信息。通常情况下，em0为wan接口，em1为LAN接口。如果你想修改这两个接口的IP地址范围，你可以选择第2个选项，系统会让你选择使用DHCP方式还是手动设置方式来分配IP地址。你也可以将访问方式从https改为http，但最好还是别这么做。这些步骤完成之后，你可以使用浏览器访问防火墙LAN口的IP地址，浏览配置页面。从现在开始，你可以使用非常人性化的图形界面来配置防火墙的各种设置。
**四、安装操作系统**
****
现在我们已经尝试安装各种类型的操作系统，利用这个软件将这些系统连接在一起。强烈建议你安装具有不同功能的操作系统（例如开放不同的端口、服务等），以便构建更加真实的网络环境。我给出了一些系统的下载链接，如下所示，你可以自己动手尝试一下。
[Mac OS X VMDK by
Niresh](https://mega.nz/#!NQ8wHZSJ!p7ZT1AJpR8KToSJE_tOmDsPtS8eWWjJ_NBFe7bK5qRg)
[Windows Server 2012 R2](https://www.microsoft.com/en-us/evalcenter/evaluate-windows-server-2012-r2)
[Ubuntu 16.04.3 LTS](https://www.ubuntu.com/download/desktop)
[Kali Linux 2.0](https://www.kali.org/downloads/)
开始你的探索之旅吧少年！