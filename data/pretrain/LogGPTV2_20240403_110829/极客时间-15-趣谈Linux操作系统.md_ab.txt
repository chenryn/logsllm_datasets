## 研究 Linux 内核代码，你能学到数据结构与设计模式的落地实践Linux最大的优点就是开源。作为程序员，有了代码，啥都好办了。只要有足够的耐心，我们就可以一层一层看下去，看内核调度函数，看内存分配过程。理论理解起来不容易，但是一行行的"if-else"却不会产生歧义。在 Linux内核里，你会看到数据结构和算法的经典使用案例；你甚至还会看到并发情况下的保护这种复杂场景；在实践中遇到问题的时候，你可以直接参考内核中的实现。例如，平时看起来最简单的文件操作，通过阅读 Linux代码，你能学到从应用层、系统调用层、进程文件操作抽象层、虚拟文件系统层、具体文件系统层、缓存层、设备I/O层的完美分层机制，尤其是虚拟文件系统对于接入多种类型文件系统的抽象设计，在很多复杂的系统里面，这个思想都能用得上。再如，当你写代码的时候，大部分情况下都可以使用现成的数据结构和算法库，但是有些场景对于内存的使用需要限制到很小，对于搜索的时间需要限制到很小的时候，我们需要定制化一些数据结构，这个时候内核里面这些实现就很有参考意义了。
## 了解 Linux 操作系统生态，能让你事半功倍地学会新技术Linux 是一个生态，里面丰富多彩。很多大牛都是基于 Linux来开发各种各样的软件。可以这么说，只要你能想象到的技术领域，几乎都能在里面找到Linux 的身影。数据库 MySQL、PostgreSQL，消息队列 RabbitMQ、Kafka，大数据Hadoop、Spark，虚拟化 KVM、Openvswitch，容器Kubernetes、Docker，这些软件都会默认提供 Linux下的安装、使用、运维手册，都会默认先适配 Linux。因此，在 Linux环境下，很容易能够找到现成的工具，这不仅会让你的工作事半功倍，还能让你有亲密接触大牛思想的机会，这对于你个人的技术进步和职业发展都非常有益。如果不进入 Linux 世界，你恐怕很难享受到开源软件如此多的红利。考虑到以上这些，在设计"趣谈 Linux操作系统"专栏的时候，我主要秉承两大原则，希望能够帮你打开 Linux操作系统这扇门。第一个原则仍然是"**趣谈**"。我希望通过故事化的方式，将枯燥的基础知识结合某个场景，给你生动、具象地讲述出来，帮你加深理解、巩固记忆、夯实基础。操作系统是干什么的呢？我们都知道，一台物理机上有很多硬件，最重要的就是CPU、内存、硬盘、网络。同时，一台物理机上也要跑很多程序，这些资源应该给谁用呢？当然是大家轮着用，谁也别独占，谁也别饿着。为了完成资源分配这件事，操作系统承担了一个"大管家"的作用。它将硬件资源分配给不同的用户程序使用，并且在适当的时间将这些资源拿回来，再分配给其他的用户进程。鉴于操作系统这个"大管家"的角色，我设计了一个故事，将各个知识点串起来，来帮助你理解和记忆。假设，我们现在就是在做一家外包公司，我们的目标是把这家公司做上市。其中，操作系统就是这家外包公司的老板。我们把这家公司的发展阶段分为这样几个时期：-   **初创期**：这个老板基于开放的营商环境（[x86    体系结构]{.orange}），创办一家外包公司（[系统的启动]{.orange}）。因为一开始没有其他员工，老板需要亲自接项目（[实模式]{.orange}）。-   **发展期**：公司慢慢做大，项目越接越多（[保护模式]{.orange}、[多进程]{.orange}），为了管理各个外包项目，建立了项目管理体系（[进程管理]{.orange}）、会议室管理体系（[内存管理]{.orange}）、文档资料管理系统（[文件系统]{.orange}）、售前售后体系（[输入输出设备管理]{.orange}）。-   **壮大期**：公司越来越牛，开始促进内部项目的合作（[进程间通信]{.orange}）和外部公司合作（[网络通信]{.orange}）。-   **集团化**：公司的业务越来越多，会成立多家子公司（[虚拟化]{.orange}），或者鼓励内部创业（[容器化]{.orange}），这个时候公司就变成了集团。大管家的调度能力不再局限于一家公司，而是集团公司（[Linux    集群]{.orange}），从而成功上市（[从单机操作系统到数据中心操作系统]{.orange}）。![](Images/a1146cb1a8dc89fd3726914dadac9a11.png){savepage-src="https://static001.geekbang.org/resource/image/80/5d/80a4502300dfa51c8520001c013cee5d.jpeg"}第二个原则就是**图解**。Linux操作系统中的概念非常多，数据结构也很多，流程也复杂，一般人在学习的过程中很容易迷路。所谓"一图胜千言"，我希望能够通过图的方式，将这些复杂的概念、数据结构、流程表现出来，争取用一张图串起一篇文章的知识点。最终，整个专栏下来，你如果能把这些图都掌握了，你的知识就会形成体系和连接。在此基础上再进行深入学习，就会如鱼得水、易如反掌。![](Images/60dd8ac8970c8e8e84d58476ab886a2f.png){savepage-src="https://static001.geekbang.org/resource/image/bf/02/bf0bcbea6a24bc5084bc0d4ffca7c502.jpeg"}例如，这张图就表示了文件操作在各个层的数据结构的关联。只要你学完之后，能对着这张图将它们之间的关系讲清楚，对于文件系统的部分，你就会了然于心了。一段新的征途即将开始，今天就是"开学典礼"。从今天开始，在接下来的四个月时间里，我会带你一步一步进入Linux 操作系统的大门，让基础变成你技术生涯的左膀右臂。在开始正式学习之前，我也想听你讲讲，[之前你在学习和工作过程中，遇到过哪些操作系统相关的问题，有哪些困惑，又有哪些经验，也可以谈谈你对新学期的期许。]{.orange}欢迎在留言区和我分享。![](Images/1a5564dd4e1c9f25d4772c7f844ca84a.png){savepage-src="https://static001.geekbang.org/resource/image/8c/37/8c0a95fa07a8b9a1abfd394479bdd637.jpg"}
# 01 \| 入学测验：你究竟对Linux操作系统了解多少？![](Images/608c7ee40c9fd12b03d6291764bb89e4.png){savepage-src="https://static001.geekbang.org/resource/image/1d/30/1d29bf1eb0f943a91fd233105f06c830.jpg"}![](Images/574e0c65ffa96687d7de2037cc999471.png){savepage-src="https://static001.geekbang.org/resource/image/be/0e/bec42567b46fe69e4e4d4e427f625c0e.jpg"}![](Images/71e2cb42bad772c43010efac3e4b0317.png){savepage-src="https://static001.geekbang.org/resource/image/5a/fd/5a48f52da754b201ff4ca1ab831875fd.jpg"}![](Images/19c29b8eb5588421a5cf0e87124a477c.png){savepage-src="https://static001.geekbang.org/resource/image/96/e2/96c2368e46d049dd60f85b82c7cbb1e2.jpg"}![](Images/3c97f08fb46fceec9729287c36853563.png){savepage-src="https://static001.geekbang.org/resource/image/4f/52/4fc17ea8b6877c8a3fe7cbb906575e52.jpg"}![](Images/5b20bde7e942e7979c45bdf944b4cb68.png){savepage-src="https://static001.geekbang.org/resource/image/5f/f5/5f5d850a0eb1998da4005a378078a7f5.jpg"}![](Images/55d83470949a6b0f2879b259ab6dbe80.png){savepage-src="https://static001.geekbang.org/resource/image/7f/99/7f42798b9aa414fe10bd240963854e99.jpg"}\![](Images/1a5564dd4e1c9f25d4772c7f844ca84a.png){savepage-src="https://static001.geekbang.org/resource/image/8c/37/8c0a95fa07a8b9a1abfd394479bdd637.jpg"}``{=html}
# 02 \| 学习路径：爬过这六个陡坡，你就能对Linux了如指掌很多人觉得 Linux操作系统刚开始学起来很难，主要是因为我们平时办公或者学习用的都是 Windows系统，而 Windows 和 Linux 的使用模式是完全不一样的。Windows 的基本使用模式是"**图形化界面 +菜单**"。也就是说，无论我们做什么事情，首先要找一个图形化的界面。在这里面，"开始"菜单是统一的入口，无论是运行程序，还是做系统设置，你都能找到一个界面，界面上会有各种各样的输入框和菜单。我们只要挨个儿看过去，总能找到想操作的功能。实在不行，还有杀手锏，就是右键菜单，挨个儿一项一项看下去，最终也能实现想做的操作。如果你刚刚上手Linux，就会发现，情况完全不一样。你基本是这也找不着，那也找不着，觉得Linux 十分难用，从而"从入门到放弃"。Linux上手难，学习曲线陡峭，所以它的学习过程更像一个**爬坡模式**。这些坡看起来都很陡，但是一旦爬上一阶，就会一马平川。你会惊叹Linux 的设计之美，而 Linux 的灵活性也会使得你有 N多种方法解决问题，从而事半功倍，你就会有一切尽在掌握的感觉。只可惜，大部分同学都停留在了山脚下。那怎样才能掌握这项爬坡技能呢？我们首先需要明确，我们要爬哪些坡。我总结了一下，在整个 Linux的学习过程中，要爬的坡有六个，分别是：熟练使用 Linux 命令行、使用 Linux进行程序设计、了解 Linux 内核机制、阅读 Linux 内核代码、实验定制 Linux组件，以及最后落到生产实践上。以下是我为你准备的爬坡秘籍以及辅助的书单弹药。``{=html}