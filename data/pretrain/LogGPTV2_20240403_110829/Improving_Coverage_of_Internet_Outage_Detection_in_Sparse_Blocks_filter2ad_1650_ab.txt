deﬁne “few” as one or two active addresses, and recently as the last three Full
Rounds, so we use LABR when | ˆE3F R| < 3. We require at least three addresses
to avoid making decisions on one or two addresses where packet loss could change
results.
This algorithm gives an asymmetric outcome: we can conﬁrm blocks are
up, but not that they are down. We believe that outcome is preferable to the
alternatives: completely ignoring the block, or tolerating false outages. However,
we identify LABR blocks to allow researchers wanting an estimator that can be
both up and down to omit them.
4 Evaluation
4.1 Full Block Scanning Reduces Noise
Case Study of One Block. Figure 1 shows one block in CenturyLink (AS209,
a U.S. ISP) with outage analysis as a case study.
This block has initially only 8 addresses responding. On 2017-10-27, there is a
usage change that causes a down event with no address response for ∼13 h. This
event is matched in other blocks for the same AS. Then, we see a lone address
Improving Coverage of Internet Outage Detection in Sparse Blocks
25
Trinocular
FBS+LABR
n
w
o
D
s
k
c
o
l
B
100
80
60
40
20
0
1000
800
600
400
200
0
2016-12-29
2017-01-12
2017-01-26
2017-02-09
2017-02-23
2017-03-09
2017-03-23
2017-04-06
2017-02-01
2017-02-06
2017-02-11
Fig. 2. Iraqi Government mandated outages Feb 2–9, 2017. Whole quarter (left), and
exam week (right). Dataset A27. FBS processed using 2FR. (Color ﬁgure online)
responding for 18 days. On 2017-11-14, the block starts receiving new users, and
once again starting 2017-12-17. On 2017-11-16, it shows a partial outage that is
observed only from our Los Angeles site, not from other Trinocular sites.
Trinocular results ((b), third bar) show frequent unknown states that result
in false down events, particularly when block usage is sparse in October and
early November.
By contrast, Full Block Scanning ((b), the second graph), resolves this uncer-
tainty. FBS’ more information conﬁrms the block is usually up, while recogniz-
ing the usage change and the partial outage. However, in between, there are two
down events inferred by a lone address which are changed to unknown by LABR
((a), the top graph).
False Outages: Does FBS Remove Noise? From this single block example,
we next consider a country’s Internet. Our goal is to see if FBS reduces noise by
examining false down events (blocks correctly recovered by FBS because they
were observation noise).
We study series of known outages that aﬀected Iraq in February 2017. That
country had seven government-mandated Internet outages (the local mornings
on February 2, and also the 4th through 9th) with the goal of preventing cheating
during academic placement exams [5]. This is a particularly challenging scenario
to FBS, as closely spaced short outages test the algorithm’s accuracy and pre-
cision. Furthermore, the fraction of sparse blocks is high in this country. We
identiﬁed 1176 Iraqi blocks using Maxmind’s city-level database [9]; 666 of these
are sparse.
Figure 2 shows Iraqi outages in 2017q1, grouped in 660 s timebins. We show
outages without Full Block Scanning (the purple, top line) and with it (the green
line). The Iraqi exam week is highlighted in gray on the left, and we plot that
week with a larger scale on the right.
26
G. Baltra and J. Heidemann
s
d
n
u
o
R
l
l
u
F
3
2
1
0
0
0.2
0.4
0.6
0.8
1
ˆA3F R
s
102
101
100
s
k
c
o
l
b
4
2
/
Fig. 3. Outage events during the 7 Iraqi outages, measured of their ˆA3F R
and full
round values. Single site W. Dataset: A27 (2017q1) subsetted to the 7 outage periods.
s
Table 2. Confusion matrix of 5200 Trinocular detected down events in 50 random
blocks. Dataset A30, 2017q4.
FBS
True condition (manually observed)
UP (Trinocular false down events) DOWN (Trinocular true down events)
UP
4133 (79%, FBS ﬁxes)
0
DOWN 621 (12%, FBS misses)
446 (9%, FBS conﬁrms)
In each of the seven large peaks during exam week, most Iraqi blocks (nearly
900, or 76%) are out—our true outages. Outside the peaks, a few blocks (the 20
to 40 purple line, without FBS) are often down, likely false outages.
FBS suppresses most of the background outages (85% of outage area), from
a median of 26 to a median of 1; these diﬀerences can be seen comparing the
higher purple line to the lower green line. We conﬁrm this reduction was due
to noise by examining blocks that FBS recovers in 10 randomly-selected time
periods with 34 down events. Nearly all down events (33 events, 97% of purple)
were in sparse blocks that resemble Fig. 1; the other block was diurnal. This
study conﬁrms that FBS recovers false outages due to sparseness.
True Outages: Does FBS Remove Legitimate Outages? We next look
at how Full Block Scanning interacts with known outage events. Its goal is to
remove noise and false outages, but if FBS is too aggressive it may accidentally
remove legitimate outages (a “true down event”) (Fig. 3).
We treat the seven nationwide outages corresponding with Iraqi exams as
true down events and compare this ground truth, with and without FBS.
The seven peaks in Fig. 2 (right) show known Iraqi outages, with purple dots
at “peak outage” without FBS, and lower, green dots with FBS. FBS removes
somewhat less than half of the down events, with peaks around 440 to 560 instead
of 790 to 910 blocks.
To understand this reduction we looked at the duration of the Iraqi events.
FBS aﬀects only the 35% of events in the red box in the lower left corner. (Exam-
ination of just sparse blocks conﬁrms that they are the source of attenuation.)
It is important to note that these are worst case for FBS—many blocks are
sparse, and the events are just shorter than one full round. If the event was
Improving Coverage of Internet Outage Detection in Sparse Blocks
27
0.1
0.08
0.06
0.04
0.02
0
)
S
B
F
(
n
o
i
t
c
a
r
f
n
w
o
d
105
104
103
s
k
c
o
l
102
b
4
2
/
101
100
0.02 0.04 0.06 0.08 0.1
0
down fraction (Trinocular)
400
300
200
100
0
)
S
B
F
(
s
t
n
e
v
e
n
w
o
d
105
104
103
s
k
c
o
l
b
4
2
/
102
101
100
0
100
200
300
400
down events (Trinocular)
Fig. 4. Comparison of per-block down time (left) and number of down events (right)