成员都参与到该服务的生命周期中，包括决策、
到结束的整个过程，
泛实践和运用的那部分内容。
容来源于大量的公众评议会及行业管理者的意见。同时它也囊括了V2中仍被ITSM团体广
对ITILV2中的重要内容加以精简，然后将其收录到ITILV3中。ITILV3的结构框架和内
前最佳实践”规定了行业实践中的前沿信息，并且会随着客户需求的改变而不断变化。OGC
程间的关系如图14-2所示。
IT服务管理生命周期模型的引入改变了模块之间相互割裂、独立实施的局面，
ITILV3主要增加了部分新概念，
ITILV3是一个巩固和提高ITIL最佳实践的过程，也是“当前最佳实践”的精髓。
ITIL V3
事件管理器
事件
事件管理
事件
，就是服务管理的生命周期。
问题错误
问题管理
图14-2
事件
变更管理
服务台
尤其是引入了“生命周期”这个概念。
服务支持各流程间的关系
的加强版，
变更
事件请求需求
并解释了
配置管理数据库
、计划、设计、
当开展一项服务时，
发布管理
交流更新
ITIL在不同的行业该如何切入，使得
它补充并解释了V2的不足之处，在
第14章构建企业级IT运维监控系统
发布
变更
、开发、
配置管理
，组织中不同的管理层和
配置相关量
、测试、发布、运行和改
业务、客户
和用户
发布
IT服务从开始
，从战略
335
---
## Page 349
海量运维监控系统规划与部署（基于Linux+Nagios+Centreon+NagVis等）
336
设现状，依据IT服务管理过程中人员、流程与技术三要素，提出一个整合的IT服务管理整
通过ITIL流程的实施，各企业内运维人员的服务意识逐步增强，运维工作量化逐步实现。
管理、配置管理、发布管理等流程来规范企业内人员的运维活动，形成了一系列的运维规程。
统一服务台，实现了业务部门与ITIL 部门的单一联系点，并引入事件管理、问题管理、变更
运维人员的工作量，提高了运维人员的工作效率，达到了预防性维护的目标。
处理措施。这样运维人员就可以在监控管理平台上查看系统运行状况，在某种程度上减轻了
行存储、过滤、翻译、分类、关联，按照问题的性质、类别和严重程度分别采取不同的预警
据库、应用等管理对象的性能、健康状况，收集基础设施运行过程中的警告或故障信息，
息技术部运维人员的干里眼和顺风耳，利用信息化技术观察基础设施内网络系统、主机、
行管理。
我国各单位IT管理系统建设的历程来看，基本也是首先从“技术”角度入手，对IT系统进
的重大损失。针对诸如此类问题，国内外IT管理实践普遍的办法是从技术入手来解决。从
系统故障占到IT系统总故障的60%～80%，业务系统的每一个微小的故障都可能会导致业务
主动规避操作，避免造成损失。
击、机房环境变化等。对应用系统进行业务监控，能够及时识别业务风险，有效进行相应的
不当应用，如非授权操作或误操作；外部业务风险主要来自于外部的不安全事件，如黑客攻
来自内部和外部的各种业务风险，例如内部业务风险主要来自于员工和服务商对信息系统的
基础设施以及各类IT服务出现的故障对于企业核心业务的影响。各类业务流程依然面临着
支柱。但是IT部门对于企业业务风险的管控尚处在初步阶段，仍旧缺乏有力工具来分析IT
不断增加，服务用户对象的日益增多，IT运维管理人员也逐渐面临着以下3类难题：
设备、存储和备份设备。伴随着企业IT 规模持续扩大的过程，不可避免地出现业务应用的
统的规模变得愈加庞大，上百个应用系统分别建设在数百台服务器上，并依赖着相关的网络
14.2.3
随着IT运维监控的实践，ITIL最佳实践流程也逐渐引起了广大企业的重视。通过建立
企业最早实施的管理IT系统的手段就是建设IT运维监控管理系统。监控管理相当于信
多年的运维经验告诉我们，IT基础设施的故障仅占IT系统总故障的20%，而各类业务
随着企业信息化建设的深入，企业方方面面的业务越来越依赖信息化系统，企业信息系
一般来说，企业的IT部门在量身定做实施ITIL的过程中，可以针对当前企业IT管理建
与此同时，IT技术已经从业务支持逐步走向与业务的融合，日益成为企业运营和发展的
器、应用系统没有统一的故障预警管理策略，故障预警效率低，业务恢复时间慢。
络及系统运行的趋势。
确地定位故障，无法整体掌控网络和系统运行情况，且二线管理人员无法了解未来网
设备和业务种类繁多，各类资料信息分散，导致一线运维人员无法在第一时间及时准
运用ITIL解决企业IT服务管理面临的问题
出现故障时不能快速定位故障根源。
全面清楚了解这些设备之间的互相关联关系，日常维护工作仅靠个人经验，因此设备
内部基础设施和应用系统之间的关系错综复杂，信息技术部门主管和系统管理员很难
对核心业务系统是否正常运行没有高效的检测手段，无法预知和提前采取措施。企业
各个核心机房和网络机房部署范围广泛，设备繁杂，对于大批量网络设备、主机服务
数
---
## Page 350
且业务部门通过IT部门的服务台与信息技术部门进行单点联系。
业务部门和负责提供IT服务的IT部门都将按照基于ITIL的最佳实践流程进行有序运转，并
门的技术人员是提供IT服务的主体，也是执行模型中相关流程和技术的主体。企业的各项
合模型，如图14-3所示。
基于ITIL最佳实践的流程是IT服务管理整合模型的枢纽。
图14-3中，
网络监控
域管理
主机监控
企业业务过程
cma
网络
数据库
福
应用
SMS
人员的概念除了业务部门的用户外，更重要的是包括相关技术人员。IT部
主机
机房环境
报表
存储
备份
统一管理门户和报表
人事部
运维部
图14-3企业IT服务管理实施模型
数据库
财务部
系统部
事件管理
台基础
中间件
行政部
问题管理
设
自动发现工具
信息技术部门
上万终端客户
机房环境
品牌部
施和
安全部
服务台
业务部
CMDB
数十个
幸
配置管理
集成认证，单点登录
系统
审计部
设施
关
机房环境
变更管理
研发部
市场部
务
办公系统
发布管理
外包厂商
系统
：
第14章构建企业级IT运维监控系统
财务系统
销售系统
根据当前的管理实践，
备管系
件理统
策略
：
桌面管理系统
网络自动化
管理
权限
服务器自动化
动
补丁库
般
337
---
## Page 351
①海量运维监控系统规划与部署（基于Linux+Nagios+Centreon+NagVis等）
338
效率运作机制，可以为企业业务部门提供性价比更高的IT服务支持，从而确保业务的安全
构建安全高效的企业级IT运维监控系统，提升组织内部的IT服务水平和建立基于流程的高
作依托的根本手段，也成为企业安全生产、成本控制和效率提升的关键部分。在这种情形下，
随着企业IT规模的扩大和IT成熟度的提高，各类企业的成本管理、效率管理意识普遍增
扩张阶段，转向如今的依靠科学管理实现效率提升和风险、成本控制的精细化管理阶段。
统计总结出对系统管理，业务管理，服务管理有用的信息，
将单一、零散的业务数据形成趋势图形，以图形为支撑，主动分析、合理预测，科学规划，
载的分析，调整业务交易时间，减少高峰负载，实现最佳投资。我们通过监控系统，可以全
资源使用状况等，通过对系统资源瓶颈的分析，可以降低或提高业务系统容量；通过工作负
度挖掘，构建业务关联，以逐渐形成企业业务流程监控平台。
主机类型透明化，IT管理自动化、流程化。从业务的角度关注主机系统，对IT 架构进行深
系统能够顺利兼容新增平台也是企业管理者需要思考的问题。简化IT 的日常运维，将不同
某些小型企业，可能是惟一的流程），发挥了如下的核心作用：
行展现和管理。
控管理、自动化管理、
确保所有这些组件正常高效运行。目前比较成熟的管理技术包括配置管理数据库CMDB、监
个IT架构，包括网络、主机、存储、备份、数据库、应用、服务、客户端等组件，目标是
部IT运维工作。
系点，并实施事件管理、问题管理、配置管理、变更管理、发布管理等流程来规范信息技术
行、电信、政府、物流仓储，以及其他生产型企业当中，IT 运维监控管理成为核心业务运
理信息，为制订相关决策提供基础，为投资计划提供依据。
在信息技术部门内部设立运维监控中心和IT服务台，作为业务部门与信息技术部门单一联
虽。这时，向IT管理要效益，
面了解业务发展状况，不同区域增长情况，不同业务提升速度，密切关注企业核心业务数据，
通过业务监控平台可以密切监控业务系统性能，包括系统的业务处理量、处理性能、
纵览图14-3中的ITIL模型，IT运维监控管理作为IT服务管理解决方案中核心流程（在
在当前全球信息化快速发展的大背景下，IT业界也由当初的以技术为主导的粗放型规模
而技术则是IT流程流畅运转和IT运维规范化工作的核心。IT管理技术的管理对象是整
对IT内部运营组织来说，IT部门在企业的生产、管理环节发挥着重要作用。例如在银
与此同时，为了不断增加企业的核心竞争力，可能需要不断补充新的平台，如何使这套
接收到硬件故障后，按照预定义的事件管理流程进行分类、分配、升级等工作。
义的优先级规则、人员分派规则、通知规则发送到ITIL 流程系统。服务台在ITIL 流程
监控管理与ITIL流程管理：监控管理根据CMDB进行故障压缩后，将事件按照预先定
务影响分析和故障根源压缩。
自学习的动态基线进行预警分析。
境监控五种类型来自下而上地监控基础设施的运行健康情况，根据预定义的阈值或者
基础设施监控：监控管理按照网络监控、主机监控、应用监控、
与CMDB的关联：监控管理监控到基础设施的事件后，根据准确的CMDB数据进行业
桌面系统管理等，而所有的技术管理与流程管理一起在统一门户上进
，要求更高的IT服务水平，更强的运营管理能力迫在眉睫。
为管理者提供全面，更直接的管
、数据库监控、机房环
各
---
## Page 352
监控等，
未实施完毕的IT服务管理系统的企业，监控系统要预留相关接口，以备后续数据交互所用。
技术设施，如果要充分发挥其作用，就必须与企业内部的IT服务管理系统建立关联。对于尚
研，梳理企业IT系统在监控方面面临的各类问题。梳理工作可以从管理和技术两方面来进行。
管理水平、节省平台部署的时间、提高管理效率。
理，还可以避免因网络不可达、端口关闭引起的各类故障，能够有效地提升服务器的平台的
访问位于不同业务网段内的服务器，通过各类管理端口获取服务器的信息，对服务器进行管
与位于各业务网段内的服务器进行通讯，有效接收服务器代理提供的报告数据或服务。
域。该统一网络管理平台区域具有访问其他各个网络区域的权限，从而使应用服务器能够直接
同服务器上，或者部署在同一台服务器上）部署在一个公共服务领域，即统一网络管理平台区
运行监控系统的中央监控服务器（含MySQL数据库服务器和应用服务器，可以分别部署在不
多个区域，不同区域的网络和安全策略有所不同。为了便于运维监控的统一管理，可以将1T
14.3.1
先充分的业务和技术调研，其实施步骤可分为以下步骤。
户完全可以自行搭建出一套企业级IT 运维监控以及预警系统。系统的构建过程需要基于事
14.3
高效运转，
在网管区域内部署监控平台，按照统一的网络策略管理服务器及各类服务，既可以有效
选择合适的部署策略之后，接下来的工作是根据企业的实际情况进行IT监控系统需求调
到目前为止，根据本书所接介绍的Linux、Nagios、Centreon 以及NagVis 相关技术，用
监控技术涉及到基础设施监控、
监控技术
按照图14-3中的企业IT服务管理实施模型，监控管理作为IT服务管理解决方案中一项
监控管理
一般来说，出于安全原因，或者源于不同时期建设的原因，企业的内部业务网络一般分为
，详述如下。
咨询与梳理步骤
企业级IT运维监控系统的构建与实施
监控管理与基础设施：对于监控对象，可以按照网络监控、主机监控、应用监
度
对于机房基础设施环境进行全天候不间断地运行监控，
接受到硬件故障后，按照预定义的事件管理流程进行分类、分配、升级等工作。
优先级规则、人员分派规则、通知规则发送到 ITIL 流程系统。服务台在 ITIL 流程
监控管理与ITIL流程管理：根据CMDB进行故障压缩后，将事件按照预先定义的
进行业务影响分析和故障根源压缩。
监控管理与CMDB：对于实时监控事件，要结合CMDB中存储的配置项关联模型
根据预定义的阈值或者自学习的动态基线进行预警分析。
控、数据库监控、机房环境监控等进行分类，实时监控基础设施的运行健康情况，
，缩减运营成本、提高业务盈利能力。
、漏水、UPS、空调、视频监控、门禁等。由于机房设施的核心程度和重要性，
网络设备监控、数据库系统监控、日志监控、应用系统
第14章构建企业级IT运维监控系统
、包括但不限于温度、
湿
339
---
## Page 353
海量运维监控系统规划与部署（基于Linux+Nagios+Centreon+NagVis等）
340
用系统的进行大量改造工作。对于重要的、运行多年的应用系统来说，改造工作会给应用系
状况，这也为应用系统的监控带来了难题。这种情况下基于日志进行应用系统监控需要对应
一些应用系统输出的应用日志格式由于种种原因，无法直观地查看、分析应用系统运行
V
监控，建议实现以下监控内容：
来说，其日常的运营完全依赖于业务系统，那么一旦业务系统所使用的数据库崩
数据库的应用系统运行速度缓慢或者根本无法使用，其最终结果不仅仅是会影响应
对于企业而言，一旦数据库崩溃或者数据库的性能降低，那么会直接导致依赖于
对于各类7×24小时不断运行的硬件设备，对于提供了大量应用服务的各类操作系
服务器、应用系统的集中监控、管理。
服务器等的监控和排错，能提供相应的图像报告、实时状态分析；实现网络设备、
图像报告、实时流量分析；实现对服务器（操作系统、CPU、内存、磁盘空间等）
呈现、终端跟踪等；能够对LAN和WAN流量进行监控和排错，能提供网络设备的
负载均衡设备、
对网络设备进行监控，范围包括各类交换机、路由器、防火墙、带宽管理设备