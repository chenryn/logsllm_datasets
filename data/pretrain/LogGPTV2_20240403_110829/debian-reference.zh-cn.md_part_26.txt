见，但是对非同一个 namespace 的其它进程不可见。从内核 5.6 版本起，有 8 种 namespaces(参见 namespaces(7),
unshare(1),nsenter(1))。
在Debian11Bullseye(2021)中,Debian使用unifiedcgrouphierarchy（统一cgroup层级架构）(亦称为cgroups-v2)。
namespaces同cgroups一起来隔离它们的进程，允许资源控制的使用示例是：
• Systemd。参见第 3.2.1 节。
• 沙盒环境。参见第 7.6 节。
• Linux容器，比如Docker、LXC。参见第 9.11 节。
这些功能不能够通过第 4.1 节实现。这些高级话题大部分超出了本介绍文档的范围。
Debian参考手册 95/233
Chapter 5
网络设置
提示
关于Debian专属的网络手册，请查看Debian管理员手册—网络配置。
提示
systemd环境下，可以用networkd来配置网络。请参考 systemd-networkd(8)。
5.1 基本网络架构
让我们来回顾一下现代Debian操作系统中的基本网络架构。
5.1.1 主机名解析
主机名解析，目前也是由NSS(名字服务转换NameServiceSwitch)机制来支持。这个解析的流程如下。
1. ”/etc/nsswitch.conf”文件里的”hosts: files dns”这段规定主机名解析顺序。(代替”/etc/host.conf”
文件里的”order”这段原有的功能。)
2. files方式首先被调用。如果主机名在”/etc/hosts”文件里面发现，则返回所有有效地址并退出。(”/etc/host.conf”
文件包含”multi on”.)
3. dns 方式被调用。如果主机名通过查询”/etc/resolv.conf” 文件里面写的 互联网域名系统 Domain Name
System(DNS)来找到，则返回所有有效地址并退出。
Atypicalworkstationmaybeinstalledwithitshostnamesetto,e.g.,”host_name”anditsoptionaldomainnamesettoanempty
string. Then,”/etc/hosts”lookslikethefollowing.
127.0.0.1 localhost
127.0.1.1 host_name
# The following lines are desirable for IPv6 capable hosts
::1 localhost ip6-localhost ip6-loopback
ff02::1 ip6-allnodes
ff02::2 ip6-allrouters
Debian参考手册 96/233
软件包 流行度 大小 类型 说明
network-manager
V:390,I:455 15414 配置：：NM NetworkManager（守卫进程）：自动管理网络
network-manager-gnome
V:121,I:368 5583 配置：：NM NetworkManager（GNOME前端）
Netplan(generator): Unified,declarativeinterfaceto
netplan.io V:1,I:5 249 config::NM+networkd
NetworkManagerandsystemd-networkdbackends
配置：：
ifupdown V:593,I:980 199 用来启动/关闭网络的标准工具（Debian特有）
ifupdown
isc-dhcp-client 配置：：底
V:217,I:980 2866 DHCP客户端
层
配置：：辅
pppoeconf V:0,I:5 186 配置助手，以便于使用PPPoE连接
助
配置：：辅
wpasupplicant V:346,I:509 3862 WPA和WPA2客户端支持（IEEE802.11i)
助
配置：：辅
wpagui V:0,I:1 774 wpa_supplicantQt图形界面客户端
助
配置：：辅
wireless-tools V:174,I:241 292 操控Linux无线扩展的工具
助
配置：：辅
iw V:35,I:472 302 配置Linux无线设备的工具
助
配置：： iproute2,IPv6和其他高级网络配置：ip(8),tc(8)
iproute2 V:727,I:970 3597
iproute2 等等
配置：：
iptables V:315,I:740 2414 封包过滤和网络地址转换管理工具（Netfilter）
Netfilter
配置：： administrationtoolsforpacketfilteringandNAT
nftables V:101,I:675 182
Netfilter (Netfilter)(successorto{ip,ip6,arp,eb}tables)
测试能否连接远程主机，通过主机名或IP地址
iputils-ping V:200,I:997 120 测试
（iproute2）
iputils-arping V:3,I:39 49 测试 测试能否连接远程主机，通过ARP地址
iputils-tracepath
V:2,I:31 45 测试 跟踪访问远程主机的路径
ethtool V:94,I:268 739 测试 显示或更改以太网设备的设定
测试：：底
mtr-tiny V:5,I:47 156 追踪连接远程主机的路径（文本界面）
层
测试：：底 追踪连接远程主机的路径（文本界面和GTK界
mtr V:5,I:42 209
层 面）
测试：：底
gnome-nettool V:0,I:18 2492 获取常见网络信息的工具（GNOME)
层
测试：：底
nmap V:26,I:202 4498 网络映射/端口扫描（Nmap，控制台）
层
测试：：底
tcpdump V:17,I:178 1340 网络流量分析（Tcpdump，控制台）
层
测试：：底
wireshark I:45 10514 网络流量分析（Wireshark,GTK）
层
测试：：底
tshark V:2,I:25 501 网络流量分析(控制台）
层
测试：：底
tcptrace V:0,I:2 401 根据 tcpdump的输出生成的连接数据统计
层
测试：：底
snort V:0,I:0 2203 灵活的网络入侵侦测系统（Snort）
层
测试：：底
ntopng V:0,I:1 15904 在网页浏览器中展示网络流量
层
测试：：底 BIND软件包提供的网络客户端程序：
dnsutils V:18,I:293 272
层 nslookup(8),nsupdate(8),dig(8)
测试：：底
dlint V:0,I:3 53 利用域名服务器查询来查看DNS域信息
层
测试：：底
dnstracer V:0,I:1 59 跟踪DNS查询直至源头
层
Table5.1: 网络配置工具一览表
Debian参考手册 97/233
每一行由IP地址开始，接下来是相关联的主机名.
在这个例子的第二行127.0.1.1IP地址也许不会在其它类Unix系统发现。DebianInstaller为没有永久IP地址的系
统创建这个条目，作为某些软件（如GNOME）的一个变通方法，见文档bug#719621.
Thehost_namematchesthehostnamedefinedinthe”/etc/hostname”(see第 3.7.1 节).
对于有永久IP地址的系统，这个永久IP地址应当代替这里的127.0.1.1。
对于有永久IP地址和有域名系统DomainNameSystem(DNS)提供完全资格域名fullyqualifieddomainname(FQDN)的
系统，规范名host_name.domain_name应当被用来代替host_name.
如果resolvconf软件包没有安装，”/etc/resolv.conf”是一个静态文件。如果安装了，它是一个符号链接。此
外，它包含有解析策略的初始化信息。如DNS是IP=”192.168.11.1”,则包含如下。
nameserver 192.168.11.1
resolvconf软件包使这个”/etc/resolv.conf”文件成为一个符号链接，并通过钩子脚本自动管理其内容。
For the PC workstation on the typical adhoc LAN environment, the hostname can be resolved via Multicast DNS (mDNS) in
additiontothebasicfilesanddnsmethods.
• Avahi提供Debian下的组播DNS发现框架。
• 它和AppleBonjour/AppleRendezvous相当.
• libnss-mdns插件包提供mDNS的主机名解析，GNUC库(glibc)的GNU名字服务转换NameServiceSwitch(NSS)
功能支持mDNS。
• The”/etc/nsswitch.conf”fileshouldhavestanzalike”hosts: files mdns4_minimal [NOTFOUND=return]
dns”(see/usr/share/doc/libnss-mdns/README.Debianforotherconfigurations).
• Ahostnamesuffixedwiththe”.local”pseudo-top-leveldomainisresolvedbysendingamDNSquerymessageinamulticast
UDPpacketusingIPv4address”224.0.0.251”orIPv6address”FF02::FB”.
注意
域名系统 Domain Name System 中的扩展通用顶级域名 expansion of generic Top-Level Domains (gTLD) 还在进
行中。在局域网内，选择一个域名时，请提防名字冲突namecollision。
注意
Use of packages such as libnss-resolve together with systemd-resolved, or libnss-myhostname,
or libnss-mymachine, with coressponding listings on the ”hosts” line in the ”/etc/nsswitch.conf”
file may override the traditional network configuration discussed in the above. See nss-resolve(8),
systemd-resolved(8),nss-myhostname(8),andnss-mymachines(8)formore.
5.1.2 网络接口名称
systemd使用”enp0s25”之类的”可预测网络接口名称”。
5.1.3 局域网网络地址范围
让我们重新提醒下在rfc1918里规定的局域网localareanetworks(LANs)IPv432位地址在各类地址的保留范围. 这些地
址保证不会与因特网上专有的地址冲突。
注意
IP地址书写中有冒号的是IPv6地址，例如，”::1”是localhost 本地主机。
Debian参考手册 98/233
子网掩
类别 网络地址 子网掩码 子网数
码/位数
A 10.x.x.x 255.0.0.0 /8 1
B 172.16.x.x—172.31.x.x 255.255.0.0 /16 16
C 192.168.0.x—192.168.255.x 255.255.255.0 /24 256
Table5.2: 网络地址范围列表
注意
如果这些地址分配到一个主机，那么这个主机一定不能够直接访问互联网，必须通过一个作为网关的代理服务或通
过网络地址转换NetworkAddressTranslation(NAT).消费局域网环境，宽带路由器通常使用NAT。
5.1.4 网络设备支持
尽管Debian系统支持大多数硬件设备，但依旧有一些网络设备需要DFSGnon-free固件来支持它们。参见第 9.10.5
节。
5.2 现代的桌面网络配置
对于使用systemd的现代Debian桌面系统，网络接口通常由两个服务进行初始化：lo接口通常在“networking.service”
处理，而其它接口则由“NetworkManager.service”处理。
Debian可以通过后台守护进程（daemon）管理软件来管理网络连接，例如NetworkManager(NM)（network-manager和