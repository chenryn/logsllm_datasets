AwesomeAdventure
family
252
第6章
---
## Page 285
SELECT进阶
有点秩序吧：ORDERBY
想要让查询结果有点秩序？刚好，我们可以要求SQL在
SELECT时，根据某个列的排序（ORDER）所返回的查询
结果。
SELECTtitle,category
这部分已经很熟悉了，
FROMmovie_table
和前面提过的SELECT
壹询一模一样。
WHERE
title LIKE
'A%'
AND
category='family'
这部分是新东西。就像它的
ORDER BY title;
宇面意义，ORDERBY爱求程
序依照title的字母顺序返图
数据。
说真的，你该不会告诉我，这
就是按字母排序的唯一方式吧？难道
没办法一口气排列片名以26个字母开头的
影片的顺序吗？
磨笔上阵
你的怀疑很有道理。上述查
询应该如何修改，才能让查
询和排序的威力更强大呢？
不要翻页！在翻页前务必要完成这道习题。
当前位置
253
---
## Page 286
关键字ORDERBY
按单列排序
如果查询中使用了ORDERBYtitle，那自然不需另外选
ORDERBY能按任何
取某个特定的开头字母，查询会自动依照标题的字母顺序来
列的字母顺序来
排列查询结果。
所以只需拿掉title LIKE这部分，ORDER BY title自
排列查询结果。
然会为我们完成剩余的工作。
请注意，最前面的
磨笔上阵
几个标题是以数字
解答
应该如何修改，才能让查询
开头的。
和排序的威力更强大呢？
Title
category
SELECT title,category
1CrazyAlien
family
10BiqBugs
family
FROMmovie_table
101Alsatians
family
WHERE
13thBirthday Maqic
family
主IRA
2+2is5
family
3001Ways toFall
family
5thGrade Girls are Evil
family
category='family
7YearTwitch
family
ORDER BY title;
8ArmsareBetterthar2
family
family
Aaargh!2
family
AardvarksGoneWild
family
ActingUp
family
AftertheClownsLeave
family
SELECTtitle,category
AirplanesandHelicopters
family
FROMmovie_table
Alaska:Land ofSalmon
family
AlexNeedsa Bath
family
WHERE
Andy Sighs
family
Anqels
family
category='family
AnimalAdventure
family
ORDER BY title;
Animal Crackerz
family
Ann EatsWorms
family
这次会递出所有samily
更好的是，这份清单会包
Annoying Adults
family
类中的影片清单。
括以数字开头的影片标
Another March of the
family
题，它们会出现在清单
Penquins
的最前面。
AnyoneCanGrowUp
family
AreYouMyMother?
family
这里还不是查询结果的尾端，我
AreYouPayingAttention
family
们没有列出全部影片的空间。叠
Art for Kids
family
询结果金从数字开始，一路排到
Awesomedynte
标题以字母乙开头的影片。
254
第6章
---
## Page 287
SELECT进阶
创建一张简单的表，表内只有一列，名为“test_chars”，存储类型为
CHAR(1)。
为表插入如下所示的数字、字母（包括大小写）及非字母字符，每个字
符一行。有一行要输人空白字符，另外有一行保持NULL。
接着请试用ORDERBY查询这一列，并在“SQL的排序规则”中填空。
0123ABCDabcd!@#$%^&*（）-
+=[]{};："\|~，.<>/?
SQL的排序规则
SQL的排序规则
结果的排序，填写下列空格。
+=！（&~"
非字母字符出现在数字的
还记得如何插
数字出现在字母的
入单引号吗：它
们真是难维的
NULL出现在数字的
小东西。
NULL出现在字母的
大写字母出现在小写字母的
“A1”出现在“A1”的
当前位置
255
---
## Page 288
创建一张简单的表，表内只有一列，名为“test_chars”，存储类型为
CHAR(1)。
为表插入如下所示的数字、字母（包括大小写）及非字母字符，每个字
解答
符一行。有一行要输入空白字符，另外有一行保持NULL。
接着请试用ORDERBY查询这一列，并在“SQL的排序规则”中填空。
壹询结果中可能呈现的字符顺序。
K
请注意查询结果起始处有个空白
！"#$%&'（）*+，-./0123:；
字符。每个人的查询顺序，可能
会因为RDBMS软件不同而有差异。
?@ABCD[\]_abcd{l}~
这个练习的重点是让你知道确实
有展序，以及各种RDBMS采用的
顺序。
SQL 的排序规则
SQL的排序规则
运行ORDER BY查询后，参考查询
结果的排序，填写下列空格。
+=
（
非字母字符出现在数字的前面或后面。
*@?
数字出现在字母的前面。
"&
NULL出现在数字的前面
NULL出现在字母的前面
大写字母出现在小写字母的前面。
“A1”出现在“A1”的前面。
256
第6章
---
## Page 289
SELECT进阶
按两列排序
看起来一切都回到掌控中了。我们可按字母顺序排列影片，
也可以为每个分类创建按字母排序的清单。
很不幸地，老板又发出了一封
电子邮件，说...
To:
DatavilleVideo全体员工
From:
老板
Subject:旧片出局！
大家好：
我认为有些上架时间很长的老片应该淘汰了。
大家能够利用这个周末，按日期列出各分类的
影片清单吗？
希望大家能完成这么棒的工作，
老板
幸运的是，我们可以在一条语句
内利用多个列进行排序。
我们希望影片的购买日期一
起列入壹询结果中。
SELECT title,category,purchased
FROMmovie_table
ORDER BY category, purchased;
这是排序用的第一列。我们要取得
这则是排序用的第二列，在依据
店中的每部影件并按分类排序。
category列排序完后才会再依第二
列排序。
脑力锻炼
每个分类中最老旧的影片会出现在该分类的查询结果的最
前面还是最后面呢？如果某个分类中有两部影片的购买日
期相同，又会发生什么事呢？哪部影片会先出现呢？
当前位置
257
---
## Page 290
按多列排序
按多列排序
查询结果的排序依据不局限于使用一列或两列。我们可以利用
对于作为排序依据
所有需要的列来排序所有结果。
的列，你可以依需
请观察下列使用三个列排序的ORDERBY子句。以下是发生的事
情以及表的排序方式。
求孕量多的使用。
SELECT*FROMmovie_table
ORDER BY category，purchased,title;
首先，壹询结果按分类排序.因
提下来，各分类中的壹询结果再按日期排序
为ORDERBY后指定的第一列是
（前一个步颗中已经按字母质序，让分类由
catesory。壹询结果由A到Z依序排列。
A到Z排列）。这个步骤进一步把各分类中的
影片按年、月、日的顺序，由最平购买日期
开始排列。
影片分类列
最后，经过分类排序、日
期排序后的影片再按标题
字母排序
字母顺序由A到Z排列。
购买日期列
从最早日期开始
11-20-1999-
标题列
字母排序
z
4-19-2003
标题列
字母排序
A
z
购买日期列
从最早日期开始
11-20-1999
标题列
字母排序
258
第6章
---
## Page 291
SELECT进阶
有秩序的movie_table
让我们观察这个SELECT语句作用于电影表后返回的结
果。
movie_id
title
rating
category
我们的原始
Bobby'
sAdventure
83
G
family
3-6-2002
movie_ta6le表
84
Greg:The Untold Story
PG
action
2-5-2001
85
Mad Clowns
R
horror
11-20-1999
7
86
Paraskavedekatriaphobia
R
action
4-19-2003
表中没有真
87
Rat named Darcy, A
G
family
4-19-2003
正的顺序
88
End of the Line
R
misc
2-5-2001
影件按被插
89
Shiny Things,The
PG
drama
3-6-2002
入表的顺序
90
Take it Back
R
comedy
2-5-2001
排列。
91
Shark Bait
G
misc
11-20-1999
92
Angry Pirate
PG
misc
4-19-2003
93
Potentially Habitable Planet
PG
scifi
2-5-2001
查询后的有序结果：
第三个用于排序
第一个用于排序
第二个用于排序
的列
的列
的列
y
K
movie_id
title
rating
category
purchased
84
Greg:TheUntoldStory
PG
action
2-5-2001
86
Paraskavedekatriaphobia
R
action
4-19-2003
90
Takeit Back
R
comedy
2-5-2001
89
Shiny Things,The
PG
drama
3-6-2002
83
Bobby'sAdventure
G
family
3-6-2002
87
Rat named Darcy,A
G
family
4-19-2003
85
MadClowns
R
horror
11-20-1999
91
Shark Bait
G
misc
11-20-1999
88
End of the Line
R
misc
2-5-2001
93
PotentiallyHabitablePlanet
PG
scifi
2-5-2001
当前位置
259
---
## Page 292
反转排序
我不喜欢老电影。如果我想看最新的电
影该怎么做？难道要从清单底端开始导找
吗？
SQL有个反转顺序的关键字。
默认情况下，SQL根据ORDERBY指定的列中的升序排列
查询结果。也就是从A到Z，从1到99,999。如果你希望排
列顺序相反，希望数据以降序排列，可以在列名后加上关
键字DESC。
没有盘问题
没有蠢问题
没有蠢问题
的意思。你确定它能用在ORDER子句中？
以免混淆吗？
答：
可以使用DESCRIBE，但没有DESCENDING这个关
名前，例如DESCmovie_table;，查询结果就是表的说
键字。
明，此时DESC是DESCRIBE的缩写。
关键字DESC应位于ORDERBY子
但DESC出现在ORDER子句中时，它则代表DESCENDING
（降序）、是一种排序方式。
句中的列名后，用来反转查询
结果的顺序。
260
第6章
---
## Page 293
SELECT进阶
以DESC反转排序
数据就像排在阶梯上，当我们向上爬，也就是升序
（ASCENDING）时，会先遇到A，再遇到B；当我们
6
向下走，也就是降序（DESCENDING）时，会先遇
到Z，然后才会遇到A。
F
5
4
D
3
ASCEN
C
2
B
LG
NDIN
A
下列的查询会选出一份影片清单，以最新的购买日期
开始排序。至于同一天买入的影片，则按字母顺序排
列。
SELECT title,purchased
FROMmovie_table
ORDER BY title ASC,purchased DESC;
这里可以加上关键字ASC，但
如果需要从Z到A或从9到1的
并非必要。ASC已是默认的排序
排序方式，则必须使用关键
方式。
字DESC。
当前位置
261
---
## Page 294
影片整理完毕
To:
DatavilleVideo全体员工
From:老板
Subject:免费招待！
大家好：
店面焕然一新，看起来真是太棒了。感谢大
家同心协力把影片放到正确的地方，还有，
幸好SQL查询中有神奇的ORDERBY子句，
现在大家都能找到自已想找的影片了。
为了感谢大家辛苦地工作，我举办了一个小
小的比萨庆功宴，今晚6点开始，在我家举