5.000 ￥14.0965
Rel 提供服务
炎持
图8-121Mouser上ATmea328P的库存和价格
国内的代理商有很多，而且一般都会代理多种芯片，像E络盟、Mouser、Digikey、ickey、
安富利、富昌、艾睿这些网上商城本来就是代理商，只不过面向的对象既可以是个人也可以
是公司。再就是像文哗这样老牌的代理商，都是公司级别合作伙伴的优先选择。
代理商通常都是从原厂提货，从国外运到中国香港，再由中国香港报关后运到大陆，时
间周期通常比较长，这就是交期，如果刚好代理商有库存，或者有别的客户有多余的产品，
他们会帮忙互相调货，或者促原厂尽快交货，这就是追交期。一般来说，市面上常用芯片
的交期相对较短，1～4周就可以，但不常用的或者需要定制的芯片，例如变压器、电感，交
期甚至要8~16周，所以从代理商那里下单需要提前预估用量和时间，追交期是很麻烦的
一
369
---
## Page 382
硬件安全攻防大思线
件事，有太多的不确定性。对要量产的产品，特别是在如今这种硬件更新换代快的时代，跳
票太危险。
从代理商下单一般还分人民币订单和美元订单，因为这些进口芯片的原厂价格都是美元
支付的，用人民币支付涉及汇率，所以代理商报价时都按照美元报价。他们说的一毛和一元
指的是一美分和一美元，可别以为是人民币。
8.6.4批次、最小包装、样品与编带
电子元器件大多有批次，厂商是一批批生产的，都有相应的标记，就像食品的生产日期
一样，只不过芯片的保质期很长，但也还是尽量买新的批次，毕竞长期压在库存里，保存环
境不好（高温、高湿）可能影响芯片质量和良品率，这也是大的芯片供应商的优势，他们基
本都是从厂家直接拿最新出产的。
有的芯片广商不同批次的芯片可能会有细微的差异，例如，测试发现有的批次能正常工
作，有的不能，最后分析间题发现虽然是同样的型号但不同的批次对品振的要求不同，换个
参数的晶振就可以工作了，在产品量产阶段遇到这种问题，可能会影响整个批次的产品质量
再说说最小包装，元器件厂商生产出产品后大多数都采用铝箔密封包装，里面放了干燥
剂抽了真空，如图8-122所示，通常一个包装有几百片甚至儿千片芯片，如果是阻容LED
极管等器件都是按盘出货的，如图8-123所示，一盘几千或者几万片，这些整个包装的元器
件就是整包器件，通常原装全新的器件都是整包的，包装上有厂商留下的信息，这是鉴别元
器件的一个重要方法。整包的元件的价格通常比拆散卖的价格低。
图8-122整包芯片包装
图8-123整盘元件包装
最后介绍编带，如果经常购买元器件，一般会遇到儿种包装，一种是直接用袋子装着，
370
---
## Page 383
第草硬件加工生产指南
如图8-124所示，另一种是用编带包装，如图8-125所示，还有一种是用托盘包装，如图8-126
所示。如果白已焊接，这几种包装都可以：如果要做SMT加工，则有区别。编带和托盘的，
可以由SMT贴片机自动吸取摆放，袋装的需要人工摆放，现在人力价格很高，面且个体差异
大，所以要做 SMT加工的话，就需要采购编带的器件，编带的通常会比袋装的贵。通常采购
按键、开关、USB接口、RJ45网口等接插器件时，都要问清楚是编带的还是袋装的。
图8-124袋装网口
图8-125编带装MicroUSB母座
图8-126托盘装PIC单片机
371
---
## Page 384
独件安全现防大据
8.6.5一站式代购、配单
网上有很多商家提供一站式配单服务，只需要将整个BOM（BillofMaterial，物料清单）
发给商家，商家会给一个整体的报价单，这对个人DIY来说非常方便，整个BOM的元器件
一家买完，不用一个个询价，而且很多阻容器件价格便宜，邮费都比元件总价贵。网上提供
可以将BOM多发几个卖家，然后将报价放到一个表格里做对比，找出性价比最高的。
8.6.6电子市场
除了网上商城，还有哪里卖电子元件？基本上大城市都有电子市场存在，例如深圳的华
强北电子市场，北京的中发、知春、中海园，上海的赛格等。
这些电子市场和商场差不多，只不过门面通常都很小，一个门面代表一家公司，代理不
同的芯片，这些店面货品齐全，很多小公司或者初创团队都会选择来这些门面店我寻自己需
要的芯片，然后谈批量合作。
电子市场是一个综合市场，除了卖电子元器件，还卖工具、线缆、外壳、接插件等。
电子市场里的很多公司也微PCB制板、SMT、外壳开模等业务或者代理，对于没有固定
供应商的公司，可以在这里发掘未来的合作伙伴。
8.6.7BOM的导出与整理
前面介绍了元件采购的方法和注意事项，现在来介绍怎么导出BOM，然后整理成什么格
式。
BOM是为制造最终产品所使用的文件，主要包含原物料清单、主/副加工流程、各部件
明细、半成品与成品数量等内容，通常作为代工双方联系的文件或是公司内部沟通的文件。
依企业需求目的的不同，用料表可细分为设计用的工程料表（Engineering Bill of Materials）、
生产用的制造料表（ManufacturingBillof Materials）、接单用的采购料表（Sales Billof
Materials）等。
BOM的细分很复杂，本节就介绍个人或者小团队设计的BOM是什么样的。
同样以EAGLE为例，打开一个原理图，例如 Arduino UNO，如图 8-127所示。然后单击
菜单栏的“ulp”按钮打开“ulp选择界面”，如图8-128所示。打开“bomulp”脚本，就能
372
---
## Page 385
8
打开BOM界面，如图8-129所示。下面有参数可以选择，可以选择保存的格式是.txt还是.csv
表格还是html 网页，通常 Parts 格式用于检查原路图或者焊接，Values 格式用于采购和工厂
加工，如图8-130所示。
元
WM()
BIE
Arduinfo
UNO Refer
1 
X
1 
17
SL
图8-127Arduino UNO原理图
bomlp
2016/5/18 7.06
UL文件
19KB
2005/3/29 4.14
2002//3/28 4:09
VLP 文1t
cam2image.olp
18 XB
16 XD
up
2011/12/13 $:12
文体
图8-128选择BOM导出脚本
373
---
## Page 386
图8-129BOM格式选择
图8-130Value格式的BOM
如果是用AD或者 Cadence等大型PCB软件导出的 BOM，基本可以直接使用，与之相
比用EAGLE导出的 BOM 很简陋，数据格式很混乱。图8-131所示为 ArduinoUNO用
EAGLE 导出来的 csv 格式的 BOM。html 和 txt 格式相对清晰，如图 8-132所示，这样导出的
374
---
## Page 387
第8章硬件加工生产指南
只是单块板的BOM。如果要做一批，所有元器件的数量都要乘以数目再加上一些额外的损耗
预估。
“ITSTAL°. "*
2T
图8-131
.CSv格式的BOM
Qn Yl=
rolp
10H 3
L
1AL 1
NLUIX
.
.71.1.3)
二
H9 LI2xu
LIX IY
图8-132.html格式的BOM
375
---
## Page 388
便件安全攻防大揭秘
我们简单介绍两种BOM，一种是采购用的BOM，一种是生产用的BOM。
采购时，通常一个BOM包含元件名、参数、封装、出厂年份、厂商、采购数量、最小包
装数量、单价、总价、合计总价、税率，以及含税总价。出厂年份、最小包装数量、单价、
总价、合计总价、税率和含税总价通常由供应商填写，正规的元器件代理公司会有自己的一
套格式。图8-133所示为一个简单的表格示例，元件名和参数合并在元件名列中，描述列包
含其他信息，备注列由供应商备注最小包装等信息。
元价采期订单
a
量
董
图8-133BOM格式示例
如果是用于生产的BOM，不需要价格，只需要元件名、参数、封装、厂商、型号、元件
标号和数量就可以，SMT厂会依照BOM清单对PCB进行焊接。务必仔细检查BOM，尤其
是批量生产之前，错了可能会导致贴出来的板子无法工作，再返工要花费很多时间和金钱。
通常，BOM都是由工程师导出比较简随的数据，像前面用 EAGLE导出的那样，然后由
专员编辑好格式，编辑出不同用途的BOM，再和工程师核对确认，之后交由采购部门、生产
部门等需要用到 BOM的部门。图8-134所示为 BcagleBone Black的BOM清单，做得很详细。
376
---
## Page 389
第8章硬件加工生产指南
图8-134BeagleBone Black BOM清单
8.6.8小结
电子元器件的采购也是一门技术活，很多手上有特殊采购渠道的人都被有这方面需求的
公司高薪聘请，对公司而言，这样的人能够节省公司成本，甚至在某些特定场景下，能够决
定一个公司的存亡。
对个人面言，元器件采购是一件很麻烦的事，除非不计成本，否则光是一大堆元件的采
购就会让很多人望面却步。
本节介绍的是作者这些年的经验心得，疏漏之处还请见谅。
8.7SMT焊接介绍
PCB到手了，元器件也买到了，就得开始焊接加工了，量少可以人工焊接，大批量时人
工焊接是不可能的，自然需要机械化的批量焊接，也就是常说的 SMT（Surface Mount
Technology，表面组装/贴装技术）。SMT是目前电子组装行业里最流行的一种技术和工艺，
为了讲起来更简单明了，直插件也算在其中。
关于SMT的工艺本节不多介绍，内容涵盖太广泛了，只对SMT工厂的业务流程做简单
---
## Page 390
质件安全攻防大揭
介绍，再就是介绍大致的收费项目以供参考。
8.7.1SMT的加工流程
常规的SMT工厂的普通加工流程如下。
（1）检料。先检查PCB的数量、工艺要求和钢网，再按照PCBBOM检查清点物料型号
封装和数量。在生产过程中会有物料损耗，数量上通常都会要求多出一些。
（2）程序烧写。如果要求在芯片贴片前烧写，还需要先用自动编程器给芯片编程烧写固
件。如果厂家没有自动编程器就会安排工人人工烧写，这个环节是要收费的，也就是编程费。
另外，有特殊要求，例如出于安全考虑，需要对主控芯片进行打磨，抹去原来的丝印，也会
在这个环节进行。
（3）上机。如果使用自动贴片机摆放元器件，需要提供坐标文件（PCB软件可以生成），
由工厂安排工程师对自动贴片机编程，用自动贴片机贴装比较靠谐，但费用很高，SMT工厂
的上机费、工程费就是指这个费用，一般来说打样或者板上没有特别精密的器件，可以考虑
手摆。
（4）上料。工厂会将物料上到自动贴片机，让贴片机能够自动贴装。如果一个板子所用
物料种类很多，上料所花费的时间会很长，例如360天巡传感器，上料就需要将近1天时间，
另外贴片机对物料有要求，必须是盘装或者编带的。如果是管装或者散装的需要由工厂进行
编带，这个操作也是收费的。
（5）印刷锡膏。自动分板机器将PCB传送给锡音印刷机，由锡膏印刷机通过钢网给PCB
自动印刷锡膏，机器使用固定的力度和轨迹给PCB印刷锡膏比人工均匀很多，
（6）元件贴装、将印刷好锡膏的PCB传送给自动贴片机后，自动贴片机通过小吸盘将元
器件吸起，然后移动到预先编程的坐标位置，放下元器件，同时通过摄像头确认摆放是否正
确，如果有错会有标识或者将有问题的PCB传到另一个位置。
（7）目检和手补。自动贴片机摆放好所有元器件后传送出来，通常会安排工人检查有没
有错漏的元器件，人工摆放补齐。有些无法由自动贴片机摆放的元器件，比如没有编带的器
件或者贴片开关、贴片插针一类吸盘不好吸取的元器件，也需要人工摆放。
（8）回流焊。将摆放好元器件的PCB板通过传送带送到回流焊烤炉中，按照设定好的温
度曲线加热，使锡膏融化将元件焊接到PCB上，不同的生产线、锡膏、PCB对应的温度曲线
不同，回流焊炉温度曲线控制对 SMT焊接品质的影响很大，这也是好的 SMT厂和一般的
SMT广的一个重要差异点
（9）目检。回流焊炉出来的焊接好的板子，一般会安排工人先目检，通过观察初步筛选
---
## Page 391
第8章硬件加工生产指降
出不合格的电路板。
（10）AOI光学检测。人工检查完成后，还需要由机器进行自动检查，由摄像头对每个元
件焊接点拍照检测，和预先设定的样式及确认无误的焊点照片进行对比，如果焊点有虚焊或
者错焊通常可以检测出来。
（11）背面贴装。如果PCB背面也有芯片需要焊接，通常贴完所有 PCB 板的一面之后，
重复4～10步，对背面贴片元器件进行贴装焊接。
（12）X-Ray。如果有BGA或者其他焊盘完全在芯片里，从外部无法看到焊接情况，就
需要使用X光机对电路板拍照，检查内部的焊接情况，X-Ray设备不使宜，这是衡量一个
SMT工厂实力的因素，小厂大多没有焊接BGA的实力，当然也就没必要采购X-Ray设备。
（13）波峰焊。贴装完成后，如果还有直插件（例如直插的排针、接插件，这种物料元器
件通常种类很少），都需要进行波峰焊，基本都只是安排工人人工安装坪接。
（14）分板。将多块连到一起的PCB进行切割，分割成单独的电路板，一般都用机器切
割，当然也有人工的。
（15）测试，按照客户提供的测试要求对焊接完成的电路板进行功能测试
（16）检修。对测试不通过的电路板进行检查，找出问题并进行维修。
（17）三防。有些电路板要求喷三防漆，保证电路板在复杂环境下能够稳定工作，这个项
目是需要单独收费的，面且喷过三防漆之后后续维修比较麻烦，凡事有利有整。
（18）组装、包装。大多数SMT工厂都提供组装包装服务，进行外壳组装和外面的纸盒
包装。当然是收费的。
（19）入库送货。生产完成后，SMT工厂一般都会提供送货服务。当然，有的SMT厂为
了节省成本，会收取物流费或者送货费用，