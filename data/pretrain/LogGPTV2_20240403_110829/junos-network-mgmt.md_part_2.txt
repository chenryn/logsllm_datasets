Example: Tracing SNMP Activity | 522
Configure the Certificate Expiration Trap | 523
Enable Peer Down and IPsec Tunnel Down Traps | 524
Access Privileges for an SNMP Group | 524
Configure the Access Privileges Granted to a Group | 525
Configure the Group | 526
Configure the Security Model | 526
Configure the Security Level | 527
Associate MIB Views with an SNMP User Group | 527
Configure the Notify View | 528
Configure the Read View | 528
Configure the Write View | 528
Example: Configure the Access Privileges Granted to a Group | 529
Assign Security Model and Security Name to a Group | 530
xiv
Configure the Security Model | 530
Assign Security Names to Groups | 531
Configure the Group | 531
Example: Security Group Configuration | 532
Configure Local Engine ID on SNMPv3 | 532
Configure SNMPv3 | 533
Create SNMPv3 Users | 535
Minimum SNMPv3 Configuration on a Device Running Junos OS | 535
Example: SNMPv3 Configuration | 536
Configure SNMPv3 Authentication Type and Encryption Type | 540
Configure SNMPv3 Authentication Type | 540
Configur MD5 Authentication | 541
Configure SHA Authentication | 541
Configure No Authentication | 541
Configure SNMPv3 Encryption Type | 542
Configure Advanced Encryption Standard Algorithm | 542
Configure Data Encryption Algorithm | 542
Configure Triple DES | 542
Configure No Encryption | 542
SNMPv3 Traps | 543
Configure SNMPv3 Traps on a Device Running Junos OS | 543
Configure SNMPv3 Trap Notification | 544
Example: Configure SNMPv3 Trap Notification | 544
Configure the Trap Notification Filter | 545
Configure the Trap Target Address | 545
Configure the Address | 546
Configure the Address Mask | 546
Configure the Port | 546
Configure the Routing Instance | 547
Configure the Trap Target Address | 547
xv
Apply Target Parameters | 547
Example: Configure the Tag List | 547
Define and Configure the Trap Target Parameters | 548
Apply the Trap Notification Filter | 549
Configure the Target Parameters | 549
Configure the Message Processing Model | 549
Configure the Security Model | 549
Configure the Security Level | 550
Configure the Security Name | 550
SNMPv3 Informs | 550
Example: Configure the Inform Notification Type and Target Address | 552
Example: Configure the Remote Engine ID and Remote User | 553
Requirements | 553
Overview | 553
Configuration | 555
Verification | 556
SNMP Communities | 558
Configure SNMP Communities | 558
Add a Group of Clients to an SNMP Community | 562
Configure SNMP Community String | 564
Examples: Configure the SNMP Community String | 564
Configure the SNMPv3 Community | 566
Configuring the Community Name | 567
Configuring the Context | 567
Configuring the Security Names | 568
Configuring the Tag | 568
Example: Configure SNMPv3 Community | 568
Requirements | 568
Overview | 569
Configuration | 569
Verification | 572
xvi
MIB Views | 572
Configure MIB Views | 573
Configure Ping Proxy MIB | 574
SNMP MIBs Supported by Junos OS and Junos OS Evolved | 575
SNMP MIBs Support | 575
MIB Objects for the QFX Series | 584
Fabric Chassis MIB | 588
Standard SNMP MIBs Supported by Junos OS | 594
Enterprise-Specific MIBs for Junos OS Evolved | 609
Enterprise-Specific SNMP MIBs Supported by Junos OS | 622
Standard MIBs for Junos OS Evolved | 643
Junos OS SNMP FAQs | 656
4 Remote Network Monitoring (RMON) with SNMP Alarms and Events
Remote Network Monitoring (RMON) | 687
RMON Overview | 687
RMON Alarms and Events Configuration | 692
Configure RMON Alarms and Events | 692
Configure SNMP | 693
Configure an Event | 694
Configure an Alarm | 695
Monitor RMON MIB Tables | 696
RMON MIB Event, Alarm, Log, and History Control Tables | 697
Minimum RMON Alarm and Event Entry Configuration | 700
Configure an RMON Alarm Entry and Its Attributes | 701
Configure the Alarm Entry | 701
Configure the Description | 702
Configure the Falling Event Index or Rising Event Index | 702
Configure the Falling Threshold or Rising Threshold | 702
xvii
Configure the Interval | 703
Configure the Falling Threshold Interval | 703
Configure the Request Type | 704
Configure the Sample Type | 704
Configure the Startup Alarm | 705
Configure the System Log Tag | 705
Configure the Variable | 705
Configure an RMON Event Entry and Its Attributes | 706
Example: Configure an RMON Alarm and Event Entry | 707
Use alarmTable to Monitor MIB Objects | 707
Create an Alarm Entry | 708
Configure the Alarm MIB Objects | 708
alarmInterval | 709
alarmVariable | 709
alarmSampleType | 709
alarmValue | 709
alarmStartupAlarm | 710
alarmRisingThreshold | 710
alarmFallingThreshold | 710
alarmOwner | 711
alarmRisingEventIndex | 711
alarmFallingEventIndex | 711
Activate a New Row in alarmTable | 711
Modify an Active Row in alarmTable | 711
Deactivate a Row in alarmTable | 712
Use eventTable to Log Alarms | 712
Create an Event Entry | 712
Configure the MIB Objects | 713
eventType | 713
eventCommunity | 713
eventOwner | 714
eventDescription | 714
Activate a New Row in eventTable | 715
Deactivate a Row in eventTable | 715
xviii
Configure RMON History Sampling | 715
Configure RMON History Sampling Collection | 715
View and Clear RMON History Statistics | 716
Monitor Network Service Quality by using RMON | 717
RMON for Monitoring Service Quality | 718
Understanding Measurement Points, Key Performance Indicators, and Baseline Values | 723
Define and Measure Network Availability | 725
Measure Health | 733
Measure Performance | 742
Health Monitoring with SNMP | 750
Health Monitoring Overview | 751
Configure Health Monitoring on Devices Running Junos OS | 752
Configure Health Monitoring | 756
5 Accounting Options
Accounting Options Overview | 760
Configure Accounting Options, Source Class Usage and Destination Class Usage
Options | 761
Configuration Statements at the [edit accounting-options] Hierarchy Level | 761
Accounting Options Configuration | 763
Configure Accounting-Data Log Files | 773
Configure How Long Backup Files Are Retained | 774
Configure the Maximum Size of the File | 775
Configure Archive Sites for the Files | 775
Configure Local Backup for Accounting Files | 776
Configure Files to Be Compressed | 776
Configure the Maximum Number of Files | 777
Configure the Storage Location of the File | 777
Configure Files to Be Saved After a Change in Primary Role | 777
Configure the Start Time for File Transfer | 778
Configure the Transfer Interval of the File | 778
xix
Manage Accounting Files | 779
Configure the Interface Profile | 780
Configure Fields | 781
Configure the File Information | 781
Configure Cleared Statistics to be Reported in the Flat File | 781
Configure the Interval | 782
Example: Configure the Interface Profile | 782
Configure the Filter Profile | 784
Configure the Counters | 785
Configure the File Information | 785
Configure the Interval | 785
Example: Configure a Filter Profile | 786
Example: Configure Interface-Specific Firewall Counters and Filter Profiles | 787
Configure Class Usage Profiles | 789
Configure a Class Usage Profile | 789
Configure the File Information | 790
Configure the Interval | 790
Create a Class Usage Profile to Collect Source Class Usage Statistics | 790
Create a Class Usage Profile to Collect Destination Class Usage Statistics | 791
Configure the MIB Profile | 792
Configure the File Information | 793
Configure the Interval | 793
Configure the MIB Operation | 793
Configure MIB Object Names | 794
Example: Configure a MIB Profile | 794
Configure the Routing Engine Profile | 795
Configure Fields | 795
Configure the File Information | 796
Configure the Interval | 796
Example: Configure a Routing Engine Profile | 796
6 Monitoring Options
Interface Alarms | 799
xx
Alarm Overview | 799
Example: Configure Interface Alarms | 806
Requirements | 806
Overview | 807
Configuration | 807
Verification | 810
IP Monitoring | 811
IP Monitoring Overview | 811
Example: Configure IP Monitoring on SRX Series Firewalls | 814
Requirements | 814
Overview | 814
Configuration | 814
Verification | 817
Example: Configure IP Monitoring on SRX5000 line | 818
Requirements | 818
Overview | 818
Configuration | 820
Verification | 823
Example: Configure Chassis Cluster Redundancy Group IP Address Monitoring | 826
Requirements | 826
Overview | 826
Configuration | 827
Verification | 829
sFlow Monitoring Technology | 831
sFlow Technology Overview | 831
sFlow Support on Switches | 832
Example: Configure sFlow for EVPN-VXLAN Networks | 839
Requirements | 839
Overview and Topology | 840
Configuration | 841
Verification | 843
Verify Configured sFlow Technology | 844
xxi
sFlow Support on Routers | 845
Example: Configure sFlow Technology to Monitor Network Traffic | 849
Requirements | 850
Topology | 850
Configuration | 851
Verification | 854
sFlow Agent Address Assignment | 857
Adaptive Sampling for Routers and Switches | 858
Adaptive Sampling Overview | 858
Packet Flow Accelerator Diagnostics Software | 862
Packet Flow Accelerator Diagnostics Software and Other Utilities Overview | 862
External and Internal Ports and Network Interface Card Ports | 863
Packet Flow Accelerator Diagnostics Software Tests and Scripts | 864
Ikondiag Command | 865
Basic Functionality Tests | 866
Ethernet Tests and Scripts | 869
Stress Tests | 876
PTP Tests | 876
QFX-PFA-4Q Module LED Tests | 878
Packet Flow Accelerator Diagnostics Utilities | 879
Sample Output for Packet Accelerator Diagnostics Software | 886
Install Ethernet and PTP Scripts | 894
Install Ethernet and PTP Scripts | 894
Install Packet Flow Accelerator Diagnostics Software | 897
Packet Flow Accelerator Diagnostics Software Overview | 897
Verify That the QFX-PFA-4Q Expansion Module Is Installed | 898
Download the Packet Flow Diagnostics Software | 898
Copy the Packet Flow Diagnostics Software Package to the Switch | 899
Install the Packet Flow Diagnostics Software on the Switch | 899
Configure the Guest VM Options to Launch the Guest VM on the Host | 901
Verify That the Guest VM is Working | 904
Access the Guest VM | 905
xxii
Verify That the FPGA Module Is Working | 907
Validate the Connections Between QFX5100-24Q-AA Switch Network Ports and QFX-PFA-4Q
Module Ports | 908
Uninstall the Guest VM | 911
7 Monitoring Common Security Features
Display Real-Time Information from Device to Host | 915
Display Real-Time Monitoring Information | 915
Display Multicast Path Information | 918
Monitor Security Policies | 922
Monitor Security Policy Statistics | 922
Monitor Interfaces and Switching Functions | 923
Display Real-Time Interface Information | 924
Monitor Interfaces | 927
Monitor PPP | 928
8 Performance Management
Network Analytics | 931
Network Analytics Overview | 931
Understand Network Analytics Streaming Data | 942
Understand Enhanced Analytics Local File Output | 950
Understand Network Analytics Configuration and Status | 953
Configure Queue and Traffic Monitoring | 954
Configure a Local File for Network Analytics Data | 957
Configure a Remote Collector for Streaming Analytics Data | 958
Example: Configure Queue and traffic statsistics | 960
Requirements | 961
Overview | 961
Configuration | 962
Verification | 965
Example: Configure Queue and Traffic Monitoring | 969
xxiii
Requirements | 969
Overview | 970
Configuration | 971
Verification | 978
9 Port Mirroring
Port Mirroring and Analyzers | 984
Port Mirroring and Analyzers | 984
Understanding Port Mirroring and Analyzers | 985
Port Mirroring and Analyzer Terms and Definitions | 987
Instance Types | 991
Port Mirroring and STP | 992
Constraints and Limitations | 993
Port Mirroring on QFX10000 Series Switches | 997
Port Mirroring on QFabric | 998
Port Mirroring on OCX Series Switches | 1000
Port Mirroring on EX2300, EX3400, and EX4300 Switches | 1000
Port Mirroring on ACX7024, ACX7100, ACX7509, EX2200, EX3200, EX3300, EX4200,
EX4500, EX4550, EX6200, and EX8200 Series Switches | 1005
Port Mirroring on SRX Series Firewalls | 1011
Understanding Layer 2 Port Mirroring | 1012
Layer 2 Port Mirroring Properties | 1013
Application of Layer 2 Port Mirroring Types | 1014
Restrictions on Layer 2 Port Mirroring | 1017
Configuring Port Mirroring and Analyzers | 1018
Understanding Port Mirroring Analyzers | 1018
Configuring Mirroring on EX9200 Switches to Analyze Traffic (CLI Procedure) | 1026
Configuring an Analyzer for Local Traffic Analysis | 1027
Configuring an Analyzer for Remote Traffic Analysis | 1028
Configuring a Statistical Analyzer for Local Traffic Analysis | 1029
Configuring a Statistical Analyzer for Remote Traffic Analysis | 1030
Binding Statistical Analyzers to Ports Grouped at the FPC Level | 1032
Configuring an Analyzer with Multiple Destinations by Using Next-Hop Groups | 1034
Defining a Next-Hop Group for Layer 2 Mirroring | 1035
Configuring Mirroring on EX4300 Switches to Analyze Traffic (CLI Procedure) | 1036
xxiv
Configuring an Analyzer for Local Traffic Analysis | 1037
Configuring an Analyzer for Remote Traffic Analysis | 1038
Configuring Port Mirroring | 1039
Configuring Port Mirroring to Analyze Traffic (CLI Procedure) | 1041
Configuring Port Mirroring for Local Traffic Analysis | 1042
Configuring Port Mirroring for Remote Traffic Analysis | 1043
Filtering the Traffic Entering an Analyzer | 1044
Verifying Input and Output for Port Mirroring Analyzers on EX Series Switches | 1045
Example: Configuring Port Mirroring Analyzers for Local Monitoring of Employee Resource Use | 1047
Requirements | 1047
Overview and Topology | 1048
Mirroring All Employee Traffic for Local Analysis | 1049
Verification | 1052
Example: Configuring Port Mirroring for Remote Monitoring of Employee Resource Use | 1053
Requirements | 1054
Overview and Topology | 1054
Mirroring Employee Traffic for Remote Analysis By Using a Statistical Analyzer | 1055
Verification | 1066
Example: Configuring Mirroring to Multiple Interfaces for Remote Monitoring of Employee
Resource Use on EX9200 Switches | 1067
Requirements | 1068
Overview and Topology | 1068
Mirroring All Employee Traffic to Multiple VLAN Member Interfaces for Remote Analysis | 1070
Verification | 1077
Example: Configuring Mirroring for Remote Monitoring of Employee Resource Use Through a
Transit Switch on EX9200 Switches | 1079
Requirements | 1080
Overview and Topology | 1080
Mirroring All Employee Traffic for Remote Analysis Through a Transit Switch | 1082
Verification | 1088
Example: Configuring Mirroring for Local Monitoring of Employee Resource Use on EX4300
Switches | 1089
Requirements | 1090