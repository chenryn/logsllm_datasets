1
企业、家庭智能家居安全解决⽅案
设计背景
智能家居品牌选择与⽤途
⽹络架构设想图
拓扑图实现效果
关于IOT设备的漏洞
autor：枕边⽉亮
随着IOT技术的发展，智能家居逐渐普及化。⽬前的智能家居⽅案也含盖了很多⽅⾯，⽐如智能中控、智能
⻔禁、智能灯光系统、智能窗帘系统、智能家电控制系统、智能暖通系统、智能安防系统、智能影⾳、甚
⾄拓展到了智能晾⾐、智能厨电等等。随着IOT设备的增多，对宽带、路由器要求逐渐提升，部分低端路由
器与⽹关设备⽆法满⾜⼤量设备的承载与连接。同时物联⽹设备安全没有引起明显重视，安全问题层出不
穷，于是⾃⼰尝试部署后，于是有了这⼀篇解决⽅案。
⽬前我⽐较推荐的品牌有：⼩⽶、homekit、超级智慧家、艾特智能等等。⼤部分⼚家智能家居体系完整
并且兼容其他第三⽅设备，对于⼤型企业来讲，需要⽤到智能家居的地⽅如公司⽣活区、⻔禁、中央空调
等等，以及⼀些主打智能家居的连锁酒店。对于家庭⽽⾔，覆盖⾯可以达到某⼀个家⽤电器。
以⼩⽶为例，可以兼容的第三⽅IOT设备上百家：
设计背景
智能家居品牌选择与⽤途
3
4
⽹络架构设想图
5
智能家居⽹络架构设想图
1. 关于光猫
⽬前电信的光猫型号众多，基本上都是千兆光猫，此时只需要关注光猫后⾯的接⼝，部分光猫是全千兆接
⼝，部分只有1个⼝是千兆接⼝，如果宽带超过100mbps就需要注意⽹线不能插在百兆⼝上，可以使⽤交换
机拓展千兆⼝。还需要注意的是光猫后⾯有⼀个IPTV⼝是⽤于电视的，这个不能插错。参考下图：
6
电信光猫接⼝示意图
2. 关于⽹络设备（防⽕墙、⽹关、路由器）
家庭使⽤可以直接购买⼯控机或者三合⼀的路由器，最好是⾼端路由，建议华硕或者⽹件的⾼端家⽤型
号。如果采⽤⼯控机三合⼀，建议采⽤2H2G及以上的配置。系统刷为openwrt、ikuai、ros、lede等系
统。具备了⽹关、防⽕墙、路由的功能。
7
openwrt
家⽤级产品配置：
⼯控机性能的三合⼀产品
安装openwrt、ikuai等系统时需要注意单独配置后再接⼊光猫，lan1⼝不能设置为192.168.1.1，不然会与
光猫IP产⽣冲突。具体IP划分可以⾃⾏决定。提前在系统上划分路由或者vlan：
如果是光猫拨号wan⼝需要设置为DHCP动态获取：
8
如果是企业使⽤建议三者分开为三个单独的⽹络设备以具备更强⼤的性能。根据企业规模⼤⼩、设备数
量、⽹络环境购置千兆甚⾄万兆⽹络设备：
9
企业级产品
3. 关于AP的选择
10
AP的选择家⽤级可以采⽤华硕、⽹件的中⾼端型号。可以承载更多的设备并保证⽹络的稳定性。普通的家
⽤路由器经常会出现断流的情况。
华硕路由器
企业级⽤户⼀般采⽤⾼端的H3C型号与⽹件等等，具备更强的承载能⼒。
这⾥的AP有两种选择，可以为NAT模式，可以为AP。
采⽤NAT模式安全性会更强⼀点，AP也可以划分VLAN，服务器与WIFI单独的⽹段，访客WIFI单独的⽹段
等等。确保⼀定的隔离。
4. 其他设备
服务器可以采⽤exsi，在exsi的基础上部署其他服务，⽐如内⽹态势感知、内⽹资产管理、弱点扫描等。
有很多开源的解决⽅案可以选择。
我的IPTV是直接接⼊的是电视机，中间没有任何设备。
IOT⽹关是单独接在路由器下⾯的，是单独的VLAN，确保安全性。IOT⽹关主要控制智能家居。IOT的部分
品牌⽹关也有物联⽹卡，可以直接访问相应的智能家居云服务，通过⼿机APP控制智能设备，也可以通过
互联⽹出⼝⽹络连接家庭智能家居云服务。
企业与家庭物联⽹可以采⽤类似这样的解决⽅案。
5. 内⽹安全性
家庭⽤户可以直接采⽤虚拟化的⽅式部署⼀些开源安全产品，⽤于监测⽹络、漏洞扫描、资产管理。
企业级⽤户采⽤企业级的防⽕墙、态势感知、WAF等等⼿段⽤于内⽹防护。
拓扑图实现效果
11
流量监测
三合⼀设备资源占⽤情况
线路监控
12
协议监控
ACL按照⾃⼰需求设置
访客⽹络路由器⾃带
30个物联⽹设备+3个传感器
13
⽹关控制的设备
相⽐于传统安全，IOT的设备漏洞主要出现在不安全的配置、固件安全问题、APP端越权等等。特别是⼀些
⼩⼚商的IOT设备存在诸多的安全问题，在内⽹环境中做好物联⽹设备的隔离与基线控制，可以确保⼀定的
安全性。
关于IOT设备的漏洞