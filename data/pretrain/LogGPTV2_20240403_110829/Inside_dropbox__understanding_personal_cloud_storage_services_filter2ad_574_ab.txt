2.4 Data Storage Flows
As illustrated in Fig. 1, all store and retrieve operations
are handled by virtual machines in Amazon EC2. More
than 500 distinct domain names (dl-clientX.dropbox.com)
point to Amazon servers. A subset of those aliases are sent
to clients regularly. Clients rotate in the received lists when
executing storage operations, distributing the workload.
Typically, storage ﬂows carry either store commands or
retrieve commands. This permits storage ﬂows to be divided
into two groups by checking the amount of data downloaded
and uploaded in each ﬂow. By means of the data collected in
our test environment, we documented the overhead of store
and retrieve commands and derived a method for labeling
the ﬂows. Furthermore, we identiﬁed a direct relationship
between the number of TCP segments with the PSH ﬂag
set in storage ﬂows and the number of transported chunks.
Appendix A presents more details about our methodology as
well as some results validating that the models built in our
test environment represent the traﬃc generated by real users
satisfactorily. We use this knowledge in the next sections for
characterizing the system performance and the workload.
2.5 Web Interface and Other Protocols
Content stored in Dropbox can also be accessed through
Web interfaces. A separate set of domain names are used
to identify the diﬀerent services and can thus be exploited
to distinguish the performed operations. For example,
URLs containing dl-web.dropbox.com are used when down-
loading private content from user accounts. The domain
dl.dropbox.com provides public direct links to shared ﬁles.
As shown in Sec. 6, the latter is the preferred Dropbox Web
interface.
483Table 2: Datasets overview.
Name
Type
Campus 1 Wired
Campus 2 Wired/Wireless
Home 1
Home 2
IP Addrs. Vol. (GB)
5,320
55,054
509,909
301,448
FTTH/ADSL
ADSL
400
2,528
18,785
13,723
In addition, other protocols are available, like the LAN
Synchronization Protocol and the public APIs. However,
these protocols do not provide useful information for the
aim of this paper. They are therefore mostly ignored in the
remainder of this paper.
3. DATASETS AND POPULARITY
3.1 Methodology
We rely on passive measurements to analyze the Dropbox
traﬃc in operational networks. We use Tstat [5], an open
source monitoring tool developed at Politecnico di Torino, to
collect data. Tstat monitors each TCP connection, exposing
information about more than 100 metrics5, including client
and server IP addresses, amount of exchanged data, eventual
retransmitted segments, Round Trip Time (RTT) and the
number of TCP segments that had the PSH ﬂag set [14].
Speciﬁcally targeting the analysis of Dropbox traﬃc, we
implemented several additional features. First, given that
Dropbox relies on HTTPS, we extracted the TLS/SSL cer-
tiﬁcates oﬀered by the server using a classic DPI approach.
Our analysis shows that the string *.dropbox.com is used
to sign all communications with the servers. This is instru-
mental for traﬃc classiﬁcation of the services. Second, we
augmented the exposed information by labeling server IP
addresses with the original Fully Qualiﬁed Domain Name
(FQDN) the client requested to the DNS server [2]. This
is a key feature to reveal information on the server that is
being contacted (see Tab. 1) and allows to identify each spe-
ciﬁc Dropbox related service. Third, Tstat was instructed
to expose the list of device identiﬁers and folder namespaces
exchanged with the notiﬁcation servers.
3.2 Datasets
We installed Tstat at 4 vantage points in 2 European coun-
tries and collected data from March 24, 2012 to May 5, 2012.
This setup provided a pool of unique datasets, allowing us to
analyze the use of cloud storage in diﬀerent environments,
which vary in both the access technology and the typical user
habits. Tab. 2 summarizes our datasets, showing, for each
vantage point, the access technologies present in the moni-
tored network, the number of unique client IP addresses, and
the total amount of data observed during the whole period.
The datasets labeled Home 1 and Home 2 consist of
ADSL and Fiber to the Home (FTTH) customers of a
nation-wide ISP. Customers are provided with static IP ad-
dresses, but they might use WiFi routers at home to share
the connection. Campus 1 and Campus 2 were instead col-
lected in academic environments: Campus 1 mostly moni-
tors wired workstations in research and administrative of-
ﬁces of the Computer Science Department in a European
university. Campus 2 accounts for all traﬃc at the border
.
s
r
d
d
a
P
I
f
o
r
e
b
m
u
N
 2400
 1600
 800
 0
24/03
31/03
07/04
14/04
21/04
28/04
05/05
iCloud
Dropbox
SkyDrive
Google Drive
Others
(a) IP addresses
100G
10G
1G
s
e
t
y
B
100M
10M
24/03
31/03
07/04
14/04
21/04
28/04
05/05
iCloud
Dropbox
SkyDrive
Google Drive
Others
(b) Data volume
Figure 2: Popularity of cloud storage in Home 1 .
routers of a second university, including campus-wide wire-
less access points and student houses. In this latter scenario,
NAT and HTTP proxy-ing are very common, and DNS traf-
ﬁc was not exposed to the probe. For privacy reasons, our
probes export only ﬂows and the extra information described
in the previous section. All payload data are discarded di-
rectly in the probe. To complete our analysis, a second
dataset was collected in Campus 1 in June/July 2012.
3.3 Popularity of Different Storage Providers
We present a comparison of the popularity of cloud-based
storage systems. We explicitly consider the following ser-
vices: Dropbox, Google Drive, Apple iCloud and Microsoft
SkyDrive. Other less known services (e.g., SugarSync,
Box.com and UbuntuOne) were aggregated into the Others
group. We rely on both the extracted TLS server name and
DNS FQDN to classify ﬂows as belonging to each service.
We ﬁrst study the popularity of the diﬀerent services in
terms of unique clients. We use the Home 1 dataset be-
cause IP addresses are statically assigned to households and,
therefore, are a reliable estimation of the number of installa-
tions. Fig. 2(a) reports6 the number of distinct IP addresses
that contacted at least once a storage service in a given day.
iCloud is the most accessed service, with about 2,100 house-
holds (11.1%), showing the high popularity of Apple devices.
Dropbox comes second, with about 1,300 households (6.9%).
Other services are much less popular (e.g., 1.7% for Sky-
Drive). Interestingly, Google Drive appears immediately on
the day of its launch (April 24th, 2012).
Fig. 2(b) reports the total data volume for each service
in Home 1 . Dropbox tops all other services by one order
of magnitude (note the logarithmic y-scale), with more than
20GB of data exchanged every day. iCloud volume is limited
5See http://tstat.tlc.polito.it for details.
6A probe outage is visible on April 21, 2012.
484YouTube
Dropbox
e
r
a
h
S
 0.2
 0.15
 0.1
 0.05
 0
24/03
31/03
07/04
14/04
Date
21/04
28/04
05/05
Figure 3: YouTube and Dropbox in Campus 2 .
 1
 0.8
n
o
i
t
c
a
r
F
 0.6
 0.4
 0.2
 0
Bytes
Flows
Client (storage)
Web (storage)
API (storage)
Client (control)
Notify (control)
Web (control)
System log (all)
Others
C
C
H
H
C
C
H
H
a
a
o
o
a
a
o
o
m
m
m
m
m
m
m
m
p
p
u
s 
1
u
s 
2
e 
1
e 
2
p
p
u
s 
1
u
s 
2
e 
1
e 
2
Table 3: Total Dropbox traﬃc in the datasets.
Figure 4: Traﬃc share of Dropbox servers.
Name
Campus 1
Campus 2
Home 1
Home 2
Total
Flows Vol. (GB) Devices
283
6,609
3,350
1,313
11,561
146
1,814
1,153
506
3,624
167,189
1,902,824
1,438,369
693,086
4,204,666
despite the higher number of devices, because the service
does not allow users to synchronize arbitrary ﬁles. SkyDrive
and Google Drive show a sudden increase in volume after
their public launch in April.
Fig. 3 compares Dropbox and YouTube share of the to-
tal traﬃc volume in Campus 2 . Apart from the variation
reﬂecting the weekly and holiday pattern, a high fraction is
seen for Dropbox daily. Note that in this network the traﬃc
exchanged with Dropbox is close to 100GB per working day:
that is already 4% of all traﬃc, or a volume equivalent to
about one third of YouTube traﬃc in the same day!
These ﬁndings highlight an increasing interest for cloud-
based storage systems, showing that people are eager to
make use of remote storage space. Cloud-based storage is al-
ready popular, with 6-12% of home users regularly accessing
one or more of the services. Although the popularity of the
recently launched systems may increase in the future, in the
following we restrict our attention to Dropbox only, since
it is by far the most used system in terms of traﬃc volume
at the moment. Dropbox overall traﬃc is summarized in
Tab. 3, where we can see the number of ﬂows, data volume,
and devices linked to Dropbox in the monitored networks.
Our datasets account for more than 11,000 Dropbox devices,
uniquely identiﬁed by their host int (see Sec. 2.3.1). The
traﬃc generated by the Web interface and by public APIs
is also included. In total, more than 3.5TB were exchanged
with Dropbox servers during our capture.
4. DROPBOX PERFORMANCE
4.1 Trafﬁc Breakdown: Storage and Control
To understand the performance of the Dropbox service
and its architecture, we ﬁrst study the amount of traﬃc
handled by the diﬀerent sets of servers. Fig. 4 shows the re-
sulting traﬃc breakdown in terms of traﬃc volume and num-
ber of ﬂows. From the ﬁgure, it emerges that the Dropbox
client application is responsible for more than 80% of the
traﬃc volume in all vantage points, which shows that this
application is highly preferred over the Web interfaces for
exchanging data. A signiﬁcant portion of the volume (from
7% to 10%) is generated by direct link downloads and the
main Web interface (both represented as Web in Fig. 4). In
home networks, a small but non-negligible volume is seen
to the Dropbox API (up to 4%). Finally, the data volume
caused by control messages is negligible in all datasets.
When considering the number of ﬂows, the control servers
are the major contributors (more than 80% of the ﬂows,
depending on the dataset). The diﬀerence on the percentage
of notiﬁcation ﬂows – around 15% in Campus 2 , Home 1
and Home 2 , and less than 3% in Campus 1 – is caused by
the diﬀerence in the typical duration of Dropbox sessions in
those networks, which will be further studied in Sec. 5.5.
4.2 Server Locations and RTT
We showed in previous sections that the Dropbox client
protocol relies on diﬀerent servers to accomplish typical
tasks such as ﬁle synchronization. Dropbox distributes the
load among its servers both by rotating IP addresses in DNS
responses and by providing diﬀerent lists of DNS names to
each client.
In the following, we want to understand the
geographical deployment of this architecture and its conse-
quences on the perceived RTT.
4.2.1
Server Locations
Names in Tab. 1 terminated by a numerical suﬃx are nor-
mally resolved to a single server IP address7 and clients are
in charge of selecting which server will be used in a request.
For instance, meta-data servers are currently addressed by
a ﬁxed pool of 10 IP addresses and notiﬁcation servers by
a pool of 20 IP addresses. Storage servers are addressed
by more than 600 IP addresses from Amazon data-centers.
Fig. 5 shows the number of contacted storage servers per
day in our vantage points. The ﬁgure points out that clients
in Campus 1 and Home 2 do not reach all storage servers
daily.
In both Campus 2 and Home 1 , more servers are
instead contacted because of the higher number of devices
on those vantage points. Routing information suggests that
control servers are located in the U.S. West Coast (likely in
California), while storage servers are in the U.S. East Coast
(apparently in Amazon’s Northern Virginia data-centers).
In order to verify the current Dropbox setup worldwide,
we performed active measurements using the PlanetLab. By
selecting nodes from 13 countries in 6 continents, we checked
which IP addresses are obtained when resolving the Dropbox
DNS names seen in our passive measurements, as well as the
7Meta-data servers are addressed in both ways, depending
on the executed command, via client-lb or clientX.
485Campus 1
Campus 2
Home 1
Home 2
.
s
r
d
d
a
P
I
r
e
v
r
e
S
 1000
 800
 600
 400
 200
 0
24/03
31/03
07/04
14/04
Date
21/04
28/04
05/05
Figure 5: Number of contacted storage servers.
Storage
Control
F
D
C
 1
 0.8
 0.6
 0.4
 0.2
 0
 1
 0.8
 0.6
 0.4
 0.2
 0
Campus 1
Campus 2
Home 1
Home 2
 80
 90
 100
 110
 120
 140
 160
 180
 200
 220
Time (ms)
Time (ms)
Figure 6: Distribution of minimum RTT of storage
and control ﬂows. Note the diﬀerent x-axes.
routes and RTT when contacting the servers. The experi-
ment shows that the same set of IP addresses is always sent
to clients regardless of their geographical locations. This is
valid for both control and storage domain names. Route in-
formation and RTT suggest that the same U.S. data-centers
observed in our passive measurements are the only ones
used worldwide. That is, Dropbox is, as for now, a ser-
vice centralized in the U.S. Considering that more than half
of the Dropbox clients are outside the U.S.8, and the high
amount of traﬃc observed in our vantage points, the traﬃc