::: para
以​​​​​​​下​​​​​​​示​​​​​​​例​​​​​​​显​​​​​​​示​​​​​​​数​​​​​​​据​​​​​​​在​​​​​​​三​​​​​​​个​​​​​​​物​​​​​​​理​​​​​​​卷​​​​​​​之​​​​​​​间​​​​​​​进​​​​​​​行​​​​​​​条​​​​​​​状​​​​​​​分​​​​​​​布​​​​​​​。​​​​​​​在​​​​​​​这​​​​​​​个​​​​​​​图​​​​​​​表​​​​​​​中​​​​​​​：
:::
::: {.itemizedlist xmlns:d="http://docbook.org/ns/docbook"}
-   ::: para
    数​​​​​​​据​​​​​​​的​​​​​​​第​​​​​​​一​​​​​​​条​​​​​​​写​​​​​​​入​​​​​​​ PV1
    :::
-   ::: para
    数​​​​​​​据​​​​​​​的​​​​​​​第​​​​​​​二​​​​​​​条​​​​​​​写​​​​​​​入​​​​​​​ PV2
    :::
-   ::: para
    数​​​​​​​据​​​​​​​的​​​​​​​第​​​​​​​三​​​​​​​条​​​​​​​写​​​​​​​入​​​​​​​ PV3
    :::
-   ::: para
    数​​​​​​​据​​​​​​​的​​​​​​​第​​​​​​​四​​​​​​​条​​​​​​​写​​​​​​​入​​​​​​​ PV1
    :::
:::
::: para
在​​​​​​​条​​​​​​​状​​​​​​​逻​​​​​​​辑​​​​​​​卷​​​​​​​中​​​​​​​，条​​​​​​​的​​​​​​​大​​​​​​​小​​​​​​​不​​​​​​​能​​​​​​​超​​​​​​​过​​​​​​​扩​​​​​​​展​​​​​​​的​​​​​​​大​​​​​​​小​​​​​​​。​​​​​​​
:::
::: figure
[⁠]{#LVM_components.html#striped_vol}
::: figure-contents
::: mediaobject
![在​​​​​​​三​​​​​​​个​​​​​​​ PV 中​​​​​​​条​​​​​​​状​​​​​​​分​​​​​​​配​​​​​​​数​​​​​​​据​​​​​​​](images/components/stripedvol.png)
:::
:::
**图 2.5. 在​​​​​​​三​​​​​​​个​​​​​​​ PV 中​​​​​​​条​​​​​​​状​​​​​​​分​​​​​​​配​​​​​​​数​​​​​​​据​​​​​​​**
:::
::: para
Striped logical volumes can be extended by concatenating another set of
devices onto the end of the first set. In order extend a striped logical
volume, however, there must be enough free space on the underlying
physical volumes that make up the volume group to support the stripe.
For example, if you have a two-way stripe that uses up an entire volume
group, adding a single physical volume to the volume group will not
enable you to extend the stripe. Instead, you must add at least two
physical volumes to the volume group. For more information on extending
a striped volume, see [第 4.4.9 节
"扩​​​​​​​展​​​​​​​条​​​​​​​状​​​​​​​卷​​​​​​​"](#LVM_CLI.html#stripe_extend){.xref}.
:::
:::
::: section
::: titlepage
## [⁠]{#LVM_components.html#mirrored_volumes}2.3.3. 镜​​​​​​​像​​​​​​​逻​​​​​​​辑​​​​​​​卷​​​​​​​ {.title}
:::
[]{#LVM_components.html#idm139761082543264 .indexterm}
::: para
镜​​​​​​​像​​​​​​​维​​​​​​​护​​​​​​​不​​​​​​​同​​​​​​​设​​​​​​​备​​​​​​​中​​​​​​​的​​​​​​​相​​​​​​​同​​​​​​​的​​​​​​​副​​​​​​​本​​​​​​​。​​​​​​​当​​​​​​​向​​​​​​​一​​​​​​​个​​​​​​​设​​​​​​​备​​​​​​​中​​​​​​​写​​​​​​​入​​​​​​​数​​​​​​​据​​​​​​​时​​​​​​​，也​​​​​​​会​​​​​​​向​​​​​​​第​​​​​​​二​​​​​​​个​​​​​​​设​​​​​​​备​​​​​​​中​​​​​​​写​​​​​​​入​​​​​​​，即​​​​​​​镜​​​​​​​像​​​​​​​保​​​​​​​存​​​​​​​数​​​​​​​据​​​​​​​。​​​​​​​这​​​​​​​提​​​​​​​供​​​​​​​了​​​​​​​在​​​​​​​设​​​​​​​备​​​​​​​失​​​​​​​败​​​​​​​时​​​​​​​的​​​​​​​数​​​​​​​据​​​​​​​保​​​​​​​护​​​​​​​。​​​​​​​当​​​​​​​镜​​​​​​​像​​​​​​​的​​​​​​​一​​​​​​​个​​​​​​​分​​​​​​​支​​​​​​​失​​​​​​​败​​​​​​​时​​​​​​​，逻​​​​​​​辑​​​​​​​卷​​​​​​​就​​​​​​​成​​​​​​​为​​​​​​​一​​​​​​​个​​​​​​​线​​​​​​​性​​​​​​​卷​​​​​​​，仍​​​​​​​然​​​​​​​可​​​​​​​访​​​​​​​问​​​​​​​。​​​​​​​
:::
::: para
LVM 支​​​​​​​持​​​​​​​镜​​​​​​​像​​​​​​​卷​​​​​​​。​​​​​​​当​​​​​​​您​​​​​​​创​​​​​​​建​​​​​​​了​​​​​​​一​​​​​​​个​​​​​​​镜​​​​​​​像​​​​​​​逻​​​​​​​辑​​​​​​​卷​​​​​​​时​​​​​​​，LVM
确​​​​​​​定​​​​​​​写​​​​​​​入​​​​​​​基​​​​​​​本​​​​​​​物​​​​​​​理​​​​​​​卷​​​​​​​的​​​​​​​数​​​​​​​据​​​​​​​被​​​​​​​镜​​​​​​​像​​​​​​​保​​​​​​​存​​​​​​​到​​​​​​​一​​​​​​​个​​​​​​​独​​​​​​​立​​​​​​​的​​​​​​​物​​​​​​​理​​​​​​​卷​​​​​​​中​​​​​​​。​​​​​​​使​​​​​​​用​​​​​​​
LVM，您​​​​​​​可​​​​​​​以​​​​​​​创​​​​​​​建​​​​​​​有​​​​​​​多​​​​​​​个​​​​​​​镜​​​​​​​像​​​​​​​的​​​​​​​镜​​​​​​​像​​​​​​​逻​​​​​​​辑​​​​​​​卷​​​​​​​。​​​​​​​
:::
::: para
LVM 镜​​​​​​​像​​​​​​​一​​​​​​​般​​​​​​​以​​​​​​​ 512KB 为​​​​​​​单​​​​​​​位​​​​​​​分​​​​​​​割​​​​​​​要​​​​​​​复​​​​​​​制​​​​​​​到​​​​​​​区​​​​​​​域​​​​​​​中​​​​​​​的​​​​​​​设​​​​​​​备​​​​​​​。​​​​​​​LVM
维​​​​​​​护​​​​​​​一​​​​​​​个​​​​​​​小​​​​​​​的​​​​​​​日​​​​​​​志​​​​​​​，可​​​​​​​用​​​​​​​来​​​​​​​追​​​​​​​踪​​​​​​​哪​​​​​​​些​​​​​​​区​​​​​​​域​​​​​​​是​​​​​​​和​​​​​​​镜​​​​​​​像​​​​​​​同​​​​​​​步​​​​​​​的​​​​​​​。​​​​​​​默​​​​​​​认​​​​​​​情​​​​​​​况​​​​​​​下​​​​​​​，该​​​​​​​日​​​​​​​志​​​​​​​是​​​​​​​保​​​​​​​存​​​​​​​在​​​​​​​磁​​​​​​​盘​​​​​​​中​​​​​​​的​​​​​​​，这​​​​​​​样​​​​​​​可​​​​​​​以​​​​​​​使​​​​​​​它​​​​​​​在​​​​​​​机​​​​​​​器​​​​​​​重​​​​​​​启​​​​​​​后​​​​​​​得​​​​​​​以​​​​​​​保​​​​​​​存​​​​​​​，也​​​​​​​可​​​​​​​在​​​​​​​内​​​​​​​存​​​​​​​中​​​​​​​维​​​​​​​护​​​​​​​此​​​​​​​日​​​​​​​志​​​​​​​。​​​​​​​
:::
::: para
[图 2.6 "Mirrored Logical
Volume"](#LVM_components.html#mirrored_vol){.xref} shows a mirrored
logical volume with one mirror. In this configuration, the log is
maintained on disk.
:::
::: figure
[⁠]{#LVM_components.html#mirrored_vol}
::: figure-contents
::: mediaobject
![Mirrored Logical Volume](images/components/mirrored_vol.png)
:::
:::
**图 2.6. Mirrored Logical Volume**
:::
::: {.note xmlns:d="http://docbook.org/ns/docbook"}
::: admonition_header
**注意**
:::
::: admonition
::: para
在​​​​​​​ RHEL 5.3 发​​​​​​​行​​​​​​​本​​​​​​​在​​​​​​​群​​​​​​​集​​​​​​​中​​​​​​​还​​​​​​​不​​​​​​​支​​​​​​​持​​​​​​​镜​​​​​​​像​​​​​​​逻​​​​​​​辑​​​​​​​卷​​​​​​​。​​​​​​​
:::
:::
:::
::: para
For information on creating and modifying mirrors, see [第 4.4.1.3 节
"创​​​​​​​建​​​​​​​镜​​​​​​​像​​​​​​​卷​​​​​​​"](#LVM_CLI.html#mirror_create){.xref}.
:::
:::
::: section
::: titlepage
## [⁠]{#LVM_components.html#snapshot_volumes}2.3.4. 快​​​​​​​照​​​​​​​卷​​​​​​​ {.title}
:::
[]{#LVM_components.html#idm139761087056512 .indexterm}
::: para
LVM
的​​​​​​​快​​​​​​​照​​​​​​​性​​​​​​​能​​​​​​​为​​​​​​​您​​​​​​​提​​​​​​​供​​​​​​​了​​​​​​​在​​​​​​​某​​​​​​​个​​​​​​​特​​​​​​​定​​​​​​​时​​​​​​​刻​​​​​​​，在​​​​​​​不​​​​​​​导​​​​​​​致​​​​​​​服​​​​​​​务​​​​​​​中​​​​​​​断​​​​​​​的​​​​​​​情​​​​​​​况​​​​​​​下​​​​​​​创​​​​​​​建​​​​​​​设​​​​​​​备​​​​​​​的​​​​​​​虚​​​​​​​拟​​​​​​​映​​​​​​​射​​​​​​​可​​​​​​​能​​​​​​​性​​​​​​​。​​​​​​​在​​​​​​​提​​​​​​​取​​​​​​​快​​​​​​​照​​​​​​​后​​​​​​​，当​​​​​​​对​​​​​​​原​​​​​​​始​​​​​​​设​​​​​​​备​​​​​​​进​​​​​​​行​​​​​​​修​​​​​​​改​​​​​​​时​​​​​​​，快​​​​​​​照​​​​​​​特​​​​​​​性​​​​​​​会​​​​​​​和​​​​​​​在​​​​​​​修​​​​​​​改​​​​​​​前​​​​​​​提​​​​​​​取​​​​​​​快​​​​​​​照​​​​​​​一​​​​​​​样​​​​​​​提​​​​​​​供​​​​​​​一​​​​​​​个​​​​​​​修​​​​​​​改​​​​​​​了​​​​​​​的​​​​​​​数​​​​​​​据​​​​​​​区​​​​​​​域​​​​​​​的​​​​​​​副​​​​​​​本​​​​​​​，以​​​​​​​便​​​​​​​重​​​​​​​建​​​​​​​设​​​​​​​备​​​​​​​的​​​​​​​状​​​​​​​态​​​​​​​。​​​​​​​
:::
::: {.note xmlns:d="http://docbook.org/ns/docbook"}
::: admonition_header
**注意**
:::
::: admonition
::: para
在​​​​​​​群​​​​​​​集​​​​​​​中​​​​​​​不​​​​​​​支​​​​​​​持​​​​​​​跨​​​​​​​节​​​​​​​点​​​​​​​的​​​​​​​ LVM 快​​​​​​​照​​​​​​​。​​​​​​​
:::
:::
:::
::: para
Because a snapshot copies only the data areas that change after the
snapshot is created, the snapshot feature requires a minimal amount of
storage. For example, with a rarely updated origin, 3-5 % of the
origin\'s capacity is sufficient to maintain the snapshot.
:::
::: {.note xmlns:d="http://docbook.org/ns/docbook"}
::: admonition_header
**注意**
:::
::: admonition
::: para
文​​​​​​​件​​​​​​​系​​​​​​​统​​​​​​​的​​​​​​​快​​​​​​​照​​​​​​​副​​​​​​​本​​​​​​​是​​​​​​​虚​​​​​​​拟​​​​​​​副​​​​​​​本​​​​​​​，不​​​​​​​是​​​​​​​文​​​​​​​件​​​​​​​系​​​​​​​统​​​​​​​的​​​​​​​真​​​​​​​实​​​​​​​介​​​​​​​质​​​​​​​备​​​​​​​份​​​​​​​。​​​​​​​快​​​​​​​照​​​​​​​不​​​​​​​是​​​​​​​备​​​​​​​份​​​​​​​过​​​​​​​程​​​​​​​的​​​​​​​替​​​​​​​代​​​​​​​行​​​​​​​为​​​​​​​。​​​​​​​
:::
:::
:::
::: para
如​​​​​​​果​​​​​​​快​​​​​​​照​​​​​​​已​​​​​​​满​​​​​​​，那​​​​​​​么​​​​​​​就​​​​​​​会​​​​​​​停​​​​​​​止​​​​​​​提​​​​​​​取​​​​​​​快​​​​​​​照​​​​​​​，因​​​​​​​此​​​​​​​需​​​​​​​要​​​​​​​确​​​​​​​定​​​​​​​源​​​​​​​文​​​​​​​件​​​​​​​系​​​​​​​统​​​​​​​有​​​​​​​足​​​​​​​够​​​​​​​的​​​​​​​空​​​​​​​间​​​​​​​。​​​​​​​您​​​​​​​可​​​​​​​以​​​​​​​常​​​​​​​规​​​​​​​监​​​​​​​控​​​​​​​快​​​​​​​照​​​​​​​的​​​​​​​大​​​​​​​小​​​​​​​。​​​​​​​快​​​​​​​照​​​​​​​是​​​​​​​可​​​​​​​以​​​​​​​重​​​​​​​新​​​​​​​设​​​​​​​定​​​​​​​大​​​​​​​小​​​​​​​的​​​​​​​，因​​​​​​​此​​​​​​​如​​​​​​​果​​​​​​​您​​​​​​​有​​​​​​​额​​​​​​​外​​​​​​​的​​​​​​​存​​​​​​​储​​​​​​​容​​​​​​​量​​​​​​​，您​​​​​​​可​​​​​​​以​​​​​​​增​​​​​​​大​​​​​​​快​​​​​​​照​​​​​​​卷​​​​​​​容​​​​​​​量​​​​​​​以​​​​​​​避​​​​​​​免​​​​​​​漏​​​​​​​掉​​​​​​​快​​​​​​​照​​​​​​​。​​​​​​​相​​​​​​​反​​​​​​​，如​​​​​​​果​​​​​​​您​​​​​​​发​​​​​​​现​​​​​​​快​​​​​​​照​​​​​​​卷​​​​​​​超​​​​​​​过​​​​​​​您​​​​​​​的​​​​​​​需​​​​​​​要​​​​​​​，您​​​​​​​可​​​​​​​以​​​​​​​减​​​​​​​小​​​​​​​它​​​​​​​来​​​​​​​为​​​​​​​其​​​​​​​它​​​​​​​逻​​​​​​​辑​​​​​​​卷​​​​​​​最​​​​​​​大​​​​​​​限​​​​​​​度​​​​​​​释​​​​​​​放​​​​​​​空​​​​​​​间​​​​​​​。​​​​​​​
:::
::: para
当​​​​​​​您​​​​​​​创​​​​​​​建​​​​​​​文​​​​​​​件​​​​​​​系​​​​​​​统​​​​​​​的​​​​​​​快​​​​​​​照​​​​​​​时​​​​​​​，仍​​​​​​​可​​​​​​​能​​​​​​​对​​​​​​​源​​​​​​​系​​​​​​​统​​​​​​​有​​​​​​​完​​​​​​​全​​​​​​​的​​​​​​​读​​​​​​​和​​​​​​​写​​​​​​​访​​​​​​​问​​​​​​​。​​​​​​​如​​​​​​​果​​​​​​​快​​​​​​​照​​​​​​​中​​​​​​​的​​​​​​​一​​​​​​​个​​​​​​​块​​​​​​​修​​​​​​​改​​​​​​​了​​​​​​​，那​​​​​​​么​​​​​​​就​​​​​​​会​​​​​​​标​​​​​​​记​​​​​​​出​​​​​​​那​​​​​​​个​​​​​​​块​​​​​​​，并​​​​​​​再​​​​​​​不​​​​​​​从​​​​​​​原​​​​​​​始​​​​​​​卷​​​​​​​中​​​​​​​复​​​​​​​制​​​​​​​这​​​​​​​个​​​​​​​块​​​​​​​。​​​​​​​
:::
::: para
快​​​​​​​照​​​​​​​特​​​​​​​性​​​​​​​有​​​​​​​几​​​​​​​个​​​​​​​用​​​​​​​途​​​​​​​：
:::
::: {.itemizedlist xmlns:d="http://docbook.org/ns/docbook"}
-   ::: para
    最​​​​​​​典​​​​​​​型​​​​​​​的​​​​​​​就​​​​​​​是​​​​​​​，当​​​​​​​您​​​​​​​需​​​​​​​要​​​​​​​在​​​​​​​逻​​​​​​​辑​​​​​​​卷​​​​​​​中​​​​​​​在​​​​​​​不​​​​​​​影​​​​​​​响​​​​​​​运​​​​​​​行​​​​​​​系​​​​​​​统​​​​​​​连​​​​​​​续​​​​​​​性​​​​​​​的​​​​​​​情​​​​​​​况​​​​​​​下​​​​​​​执​​​​​​​行​​​​​​​备​​​​​​​份​​​​​​​操​​​​​​​作​​​​​​​时​​​​​​​可​​​​​​​提​​​​​​​取​​​​​​​一​​​​​​​个​​​​​​​快​​​​​​​照​​​​​​​，这​​​​​​​样​​​​​​​可​​​​​​​以​​​​​​​持​​​​​​​续​​​​​​​地​​​​​​​更​​​​​​​新​​​​​​​数​​​​​​​据​​​​​​​。​​​​​​​
    :::
-   ::: para
    您​​​​​​​可​​​​​​​以​​​​​​​在​​​​​​​快​​​​​​​照​​​​​​​文​​​​​​​件​​​​​​​系​​​​​​​统​​​​​​​中​​​​​​​执​​​​​​​行​​​​​​​ `fsck`{.command}
    命​​​​​​​令​​​​​​​来​​​​​​​检​​​​​​​查​​​​​​​文​​​​​​​件​​​​​​​系​​​​​​​统​​​​​​​的​​​​​​​完​​​​​​​整​​​​​​​性​​​​​​​，并​​​​​​​确​​​​​​​定​​​​​​​源​​​​​​​文​​​​​​​件​​​​​​​系​​​​​​​统​​​​​​​是​​​​​​​否​​​​​​​需​​​​​​​要​​​​​​​修​​​​​​​复​​​​​​​。​​​​​​​
    :::
-   ::: para
    因​​​​​​​为​​​​​​​快​​​​​​​照​​​​​​​是​​​​​​​可​​​​​​​读​​​​​​​/写​​​​​​​的​​​​​​​，您​​​​​​​可​​​​​​​以​​​​​​​通​​​​​​​过​​​​​​​获​​​​​​​取​​​​​​​快​​​​​​​照​​​​​​​并​​​​​​​根​​​​​​​据​​​​​​​快​​​​​​​照​​​​​​​进​​​​​​​行​​​​​​​测​​​​​​​试​​​​​​​，来​​​​​​​进​​​​​​​行​​​​​​​根​​​​​​​据​​​​​​​产​​​​​​​品​​​​​​​数​​​​​​​据​​​​​​​测​​​​​​​试​​​​​​​应​​​​​​​用​​​​​​​程​​​​​​​序​​​​​​​，而​​​​​​​不​​​​​​​会​​​​​​​影​​​​​​​响​​​​​​​真​​​​​​​实​​​​​​​数​​​​​​​据​​​​​​​。​​​​​​​
    :::
-   ::: para
    您​​​​​​​可​​​​​​​以​​​​​​​使​​​​​​​用​​​​​​​ Xen
    虚​​​​​​​拟​​​​​​​机​​​​​​​器​​​​​​​监​​​​​​​视​​​​​​​器​​​​​​​创​​​​​​​建​​​​​​​要​​​​​​​使​​​​​​​用​​​​​​​的​​​​​​​卷​​​​​​​。​​​​​​​您​​​​​​​可​​​​​​​以​​​​​​​使​​​​​​​用​​​​​​​快​​​​​​​照​​​​​​​特​​​​​​​性​​​​​​​创​​​​​​​建​​​​​​​磁​​​​​​​盘​​​​​​​映​​​​​​​射​​​​​​​并​​​​​​​提​​​​​​​取​​​​​​​快​​​​​​​照​​​​​​​，还​​​​​​​可​​​​​​​以​​​​​​​修​​​​​​​改​​​​​​​特​​​​​​​定​​​​​​​
    domU 时​​​​​​​刻​​​​​​​的​​​​​​​快​​​​​​​照​​​​​​​。​​​​​​​然​​​​​​​后​​​​​​​您​​​​​​​可​​​​​​​以​​​​​​​为​​​​​​​另​​​​​​​一​​​​​​​个​​​​​​​ domU
    时​​​​​​​刻​​​​​​​创​​​​​​​建​​​​​​​另​​​​​​​一​​​​​​​个​​​​​​​快​​​​​​​照​​​​​​​并​​​​​​​修​​​​​​​改​​​​​​​它​​​​​​​。​​​​​​​因​​​​​​​为​​​​​​​只​​​​​​​使​​​​​​​用​​​​​​​了​​​​​​​在​​​​​​​源​​​​​​​或​​​​​​​者​​​​​​​快​​​​​​​照​​​​​​​修​​​​​​​改​​​​​​​的​​​​​​​块​​​​​​​存​​​​​​​储​​​​​​​，所​​​​​​​以​​​​​​​卷​​​​​​​的​​​​​​​绝​​​​​​​大​​​​​​​部​​​​​​​分​​​​​​​是​​​​​​​共​​​​​​​享​​​​​​​的​​​​​​​。​​​​​​​
    :::
:::
:::
:::
:::
[]{#LVM_administration.html}
::: chapter
::: titlepage
# [⁠]{#LVM_administration.html#LVM_administration}第 3 章 LVM 管​​​​​​​理​​​​​​​总​​​​​​​览​​​​​​​ {.title}