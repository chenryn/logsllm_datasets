他孩子的姓名和年龄；
---
## Page 231
7.2在线信息收集工具215
他离婚了；
他父母的名字；
他兄弟的名字；
他长大的地方；
他的宗教信仰；
他喜爱的球队；
他家庭成员的相貌；
他过去的生意。
一天后，我给目标发送了一封邮件，里面包含针对当地公司的一个摇奖信息。中奖者可以去
他喜爱的餐厅享用一顿免费大餐，同时获得三张扬基队的球赛门票。所有参与的公司必须同意与
一名销售代表简单讨论当地的慈善活动。如果该公司同意，其名字就会进入摇奖获选序列，并有
机会赢取扬基队的球赛门票。我伪装成“乔”，然后准备了一份与该公司CEO通话的提纲。我的
目标是让他接收一个PDF文档，那是我们给他设定的圈套。我打电话的时候，他应该已经收到了
我的邮件，我也很容易通过这个话题切人：“是的，他正在等我打电话。
在与“乔”的通话中，CEO接收并打开了包含详细摇奖信息以及恶意加密文件的邮件，该文
件会发起一个反向会话，让我侵入他的系统。
当然，他的屏幕上没有显示任何信息，他只是对Adobe不停地前溃感到沮丧。我告诉他：“我
很遗，你无法打开文件。我们会将您的名字列人抽奖名单并且今天会发送一些额外的信息给
您。”但在发送邮件之前，我召集了一个报告会，讨论目标是如何被完全入侵的。
这次社会工程活动的成功主要在于使用了Maltego。它能帮助我们以最佳方式收集、组织和
分类数据。
Maltego是如何帮助我在这次行动中取得成功的呢？
将Maltego视为一个信息的关系型数据库，能发现互联网上信息之间的联系（在应用中称
为实体）。Maltego在后台微了很多工作，如挖掘电子邮件地址、网站、IP地址和域信息。举例
来说，点击几下鼠标你就可以通过目标域名自动地搜索到所有相关电子邮件的地址信息。只需
在屏幕上简单地增加“电子邮件”转换器，输入想要搜索的电子邮件地址，就可以得到图7-23
所示的效果。
使用Maltego的原因
Maltego能自动采集大量信息并为用户实现数据的自动关联，可以为用户节省数小时的搜索
时间，并展示信息的关联图。Maltego真正的强大之处在于找到这些数据之间的关系。尽管数据
挖掘很有用，但是展示信息之间的关系对社会工程人员更有价值。
---
## Page 232
216
第7章社会工程工具
1777
图7-23Maltego收集的信息展示
我在www.social-engineer.org/se-resources/贴出了些视频，讲解怎样高效地使用Maltego。前
面的案例中Maltego居功至伟，但后续的人侵使用了另外一个强大的工具。
7.2.2社会工程人员工具包
社会工程人员花费了大量时间来完善自身的技能、然面，许多攻击方式需要通过创建附加恶
意代码的邮件或PDF文档来实现。
这些事情都可以利用BackTrack中包含的诸多工具来手动完成。起初搭建www.social-
engineer.org网站的时候，我曾和好友藏夫·肯尼迪交谈过。戴夫是流行工具FastTrack的开发者，
FastTrack使用Python脚本和网页界面能够自动实现渗透测试中的一些最常用的攻击。我对戴夫
说，单独为社会工程人员开发一个类似FastTrack的工具是个不错的主意，这个工具让社会工程人
员点击几下鼠标就能创建PDF文件、电子邮件及网站等，这样就可将注意力集中到社会工程中的
“社会”这部分上来了。
戴夫仔细思考了这个问题，决定创建一些简单的Pythom脚本，让社会工程人员可以创建附加
恶意代码的PDF文件并随邮件发送。于是社会工程人员工具包（Social EngineerToo脉kit，SET）就
诞生了。在写本书的时候，SET已经被下载了150多万次，面且很快成为社会工程人员审计时配
备的标准工具包。本节将介绍SET的主要特点及使用方法。
---
## Page 233
7.2在线信息收集工具217
1.安装
安装步骤十分简单，只需安装Python和Metasploi框架。这两个软件在BackTrack发行版中已
经存在，所以不用担心。BackTrack4甚至已经包含了SET。如果需要从头开始安装，过程也十分
简单。依据导航进入安装目录，在控制台窗口上运行如下命令：
svn co http://svn.secmaniac.com/socia1_engineering_toolkit set/
执行完命令之后，将得到一个名为sct的目录，该目录下包含了所有SET工具。
2.运行SET
运行SET的过程也很简单。只需在set目录下输人./set，就会启动初始SET菜单。
请访间]www.social-engineer.org/framework/Computer_Based_Social_Engineering_Tools:_Social
Engineer_Toolkit_%28SET%29，这里有SET菜单的完整展示图，以及对每个菜单选项全面、深人
的介绍。接下来介绍SET中两个最常用的功能。
首先讨论鱼叉式网络钓鱼攻击，然后讨论网站克隆攻击。
(1)鱼文式网络的鱼
网络钓鱼是一个术语，描述恶意诈骗犯如何通过定向设计的电子邮件“广泛撒网”，吸引人
们访问特定的网站、打开恶意文件或者输入个人敏感信息，为以后的攻击做准备。要在今天的互
联网世界生存，必须能够检测并防御此类攻击。
社会工程审计人员使用SET可以创建有针对性的电子邮件对客户进行测试，然后记录有多少
雇员上当了。这个信息随后可用于培训，以帮助员工识别和避免这些陷阱。
使用SET进行鱼叉式网络钓鱼攻击，选择选项1。选择1后，会看到如下几个选项：
执行群发邮件攻击
创建一个文件格式负载
圆创建一个社会工程模板
要进行邮件式钓鱼攻击，选择第一个选项。第二个选项用于创建一个恶意的PDF或其他文件，
以备作为邮件附件发送。第三个选项用以创建模板，待日后使用。
在SET中发起攻击十分简便，只需选择正确的菜单选项然后点击启动。例如，如果我想发
动邮件攻击，向受害者发送伪装成技术报告的恶意PDF文件，我会选择选项1—执行群发邮件
攻击。
接下来，我会选择一个攻击向量（选项6），这种攻击对很多版本的AdobeAcrobatRcader软件
---
## Page 234
218第7章社会工程工具
都有效—应用了Adobeuti1.printf（）Buffer Overflow漏润。
接下来儿个选项会设置攻击的技术问题。点击选项2—Windows MeterpreterReversc_TCP。
使用Metasploi接收反向会话或者受害者电脑的IP和端口，以避免人侵检测系统（IDS）或其他系
统的报警。
选择443端口，使数据流看起来好像是加密的SSL数据。SET会创建恶意PDF文件并设置监听
功能。
执行上述步骤后，SET会询问是否要更改PDF的文件名，例如改成类似TechnicalSupport.pdf
等更加隐蔽的名称，然后输入邮件信息以备收发。最后，SET发出一封看起来很专业的电子邮件，
引诱用户打开附件中的PDF文件。受害者收到的邮件如图7-24所示。
Sretingt
nda: snps 2apt, 4g aas s8,J
Thaekt
Rich
图7-24一封无害的电子邮件与一个简单的附件
邮件发送之后，SET会创建一个网络监听器等待目标打开文件。一旦目标点击了PDF，监听
器就会执行恶意代码，让攻击者得以进入受害者的计算机中。
真是惊人（也许有人并不这样认为），所有这一切只需点击六七下鼠标，审计者使可将精力
集中在攻击中真正的社会工程方面了。
这是一个破坏性很强的攻击，因为它利用了客户端软件的漏润，而且在大多数情况下，屏幕
上不会出现任何提示。
这只是应用SET可以发动的众多攻击中的一种。
(2)Web攻击
SET也允许审计人员克隆任何网站并在本地运行。这种攻击类型的强大之处在于可以让社会
工程人员以多种方式诱骗他人访问克隆网站并从中获利。社会工程人员既可以伪装成更新网站的
开发者，也可以仅仅对网址进行细微的修改（填加或删除一个字母），最终诱使他人访间克隆的
网站。
① 请步%hmp/www.nsfiocus.nesvulndb/12573。 i详者注
---
## Page 235
7.2在线信息收集工具219
一旦有人访问了克隆网站，社会工程人员便可以发动多种不同的攻击，包括信息收集、证书
收集和直接入侵等。
要在SET中运行此攻击可从主菜单中选择选项2（网站攻击），选择之后，可以看到以下几个
选项：
JavaApplet攻击方法
Metasploit浏览器的入侵模式
证书获取的攻击方式
标签绑架攻击方法
中间人攻击方式
回到前面的菜单