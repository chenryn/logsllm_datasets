Packet      Number
6
7
A Study of Burstiness in TCP Flows
19
T
1
T
1
Fig. 5. A sequence of packet pairs in which STFs do not capture complete information
g > T or g ≤ T , where T is a threshold value. We use the IAT as a measure
of the scale of the ﬂight and call the units IAT units (IATU). Thus a ﬂight
of 1 IATU means that the observed IAT was diﬀerent from the preceding and
following IATs. An IATU of 2 would mean that two successive IATs were nearly
identical. Fig. 4 depicts two STFs, the ﬁrst of size 2 IATU and the second of size
3 IATU. Our STF detection algorithm is as follows:
1. Start with IAT=constant, flight size=1;
2. Compare previous IAT with current IAT and
calculate g (as defined above).
3. If g is within threshold then
increment flight size by 1;
else if flight size >1 start a new
flight of size 0;
else start a new flight of size 1;
4. Set previous IAT  previous IAT then
compare current IAT with most recent large IAT;
20
S. Shakkottai, N. Brownlee, and k claﬀy
c
If g(current IAT, most recent large IAT) is
within threshold then increment LTF size by 1;
else if LTF size>1 start a new LTF of size 0;
else start a new LTF of size 1;
Set most recent large IAT
 3
> 50
> 100
1
2
3
4
5
6
7
8
9
10
Small Timescale Flight size in IATU
Fig. 6. Small timescale ﬂight size distribution in IATU for BB1-2002. The left column
in each set of bars is for ﬂows greater than 3 packets in length; the middle for those
greater than 50; and the right column is for ﬂows greater than 100 packets in length.
We notice that ﬂights are usually small (in terms of IATU and hence in packets)
irrespective of the number of packets in the ﬂow
A Study of Burstiness in TCP Flows
21
> 3
> 50
> 100
10
20
30
40
50
60
70
Number of Small Timescale Flights
l
s
w
o
F
e
g
a
t
n
e
c
r
e
P
25
20
15
10
5
0
0
Fig. 7. Number of small timescale ﬂights for trace BB1-2002 on a per ﬂow basis. The
left histogram is for ﬂows greater than 3 packets in length, the middle for those greater
than 50 and the right histogram is for ﬂows greater than 100 packets in length. We
notice that STFs are more common in ﬂows with a larger number of packets
2 IATU STF has three packets and so on. Fig. 6 shows the distribution of STF
sizes. We see that regardless of the number of packets in the ﬂow, STF sizes are
usually quite small — a size 7 IATU occurs in less than 1% of the STFs. Also,
we may easily calculate that the mean STF size is 2.5 packets regardless of the
number of packets in the ﬂow.
Fig. 7 shows the distributions of number of STFs on a per ﬂow basis. We see
that STFs are much more common in ﬂows with a large number of packets.
We consider ﬂight behavior at the timescale of the RTT seen by the ﬂows in
Fig. 8 and Fig. 9. As we have just seen, the STFs of which the LTFs are composed
are an average of 2.5 packets in length. We may thus get an estimate of the
number of packets in an LTF by multiplying its IATU size by this number. Fig.
8 shows the size distribution of LTFs. The statistics are quite diﬀerent from the
STF size distribution that we analyzed earlier. Flights are much more common
at the larger timescale. The graph follows a distribution that is proportional
to
LT F size. Thus, even at this timescale, decay of ﬂight sizes is fairly quick.
Finally, we plot the distributions of number of LTFs on a per ﬂow basis in Fig.
9. We see that as with STFs, LTFs are much more common in ﬂows with a large
number of packets.
1
We draw the following conclusions from the ﬂight statistics observed above:
1. Our initial hypotheses from our model of TCP were that there would be two
distinct aggregation levels at diﬀerent timescales caused by delayed acks and
TCP window dynamics. The hypotheses are borne out by the fact that we
usually see short STFs, normally consisting of two or three packets, indi-
cating delayed acks. We also see much larger LTFs indicative of windows of
packets transmitted in pairs and triplets (i.e., as STFs) with similar spacings
between the aggregations.
22
S. Shakkottai, N. Brownlee, and k claﬀy
c
s
t
h
g
i
l
t
F
e
g
a
n
e
c
r
e
P
45
40
35
30
25
20
15
10
5
0
0
> 3
> 50
> 100
2
4
6
8
10
12
14
16
Large Timescale Flight sizes in IATU
Fig. 8. Large timescale ﬂight size distribution in IATU for BB1-2002. The left column
in each set of bars is for ﬂows greater than 3 packets in length; the middle for those
greater than 50; and the right column is for ﬂows greater than 100 packets in length.
We notice that the LTF size distribution varies proportionally to
1
LT F size
l
s
w
o
F
e
g
a
t
n
e
c
r
e
P
12
10
8
6
4
2
0
0
> 3
> 50
> 100
10
20
30
40
50
60
70
Number of Large Timescale Flights
Fig. 9. Number of large timescale ﬂights for trace BB1-2002 on a per ﬂow basis. The