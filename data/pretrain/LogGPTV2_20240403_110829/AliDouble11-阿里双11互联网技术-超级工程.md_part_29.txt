译引擎完成策略编译，数据检索用于查看误拦截或分析策略正确与否。最后，所有交
互通过BSOP这一后端控制台完成。
霸下-七层流量清洗特点
1.分布式计算/防护架构
清洗更快，清洗能力和部署机器数量呈线性增长，能够应对超大规模的安全
防护。
2.云端多维度、多方法的指标计算
防护CC攻击是一个维度，计算一个IP一秒内访问多少次作为指标。另外，从
用户的角度出发，一个用户访问接口的频率是另一个维度。一个维度时采用计算的方
式代价最小，效率最高，但问题在于不能支持复杂场景。现在，我们可以同时考虑IP
新体验  9年双11：互联网技术超级工程
2017 双 11：区块链在天猫国际商品溯源中的应用
游杭
背景
天猫国际正在全面启动全球溯源计划——将利用区块链技术、药监码技术以及大
数据跟踪进口商品全链路，汇集生产、运输、通关、报检、第三方检验等信息，给每
个跨境进口商品打上“身份证”。这项计划未来将覆盖全球63个国家和地区，3700
个品类，14500个海外品牌。共同参与该计划的包括英美日韩澳新等多国政府、大使
馆、行业协会以及众多海外大牌，中检集团、中国标准化研究院、跨境电子商务商品
质量国家监测中心等“国家队”也已加入，通过定制天猫国际统一二维码并在码上合
成全程监测手段，确保国内消费者买得放心。
2017年被称作区块链应用的元年，区块链是一种为实现机构间和防止篡改的分
布式记账系统，它在分布式共识算法、智能合约、加密算法等的基础上，可解决信任
缺失场景下进行交易的问题。区块链的可追溯的特点可解决金融、征信、版权、证明
等行业目前所存在的诸多痛点。将区块链技术应用于商品溯源中，可以提升商品整个
流转过程中的透明度，对供应链形成更加全面有效的把控。
产品形态上，我们希望通过给进口商品打上唯一的身份证码，在双十一作为天猫
国际业务的一大业务亮点，将商品整个生产、检测、运输、通关等环节的信息完整地
展现在用户面前，提升用户购物体验，加强平台正品心智；同时创新地使用区块链技
术，联合多外部合作方共同打造更具公信力的溯源平台。
项目简介
整个项目的价值主要体现在以下几个方面：
标准建设：溯源项目利用平台的商家、商品及供应链管理能力，建立全球商家&货
品标准化档案，在EWTP框架内建立起一套跨境商品质检标准及全球质检机构网络。
新体验  9年双11：互联网技术超级工程
从上图可以看出，商品溯源的一个特点就是链路较长，并且线上线下相结合，既
注重规则的建设，也注重仓库层面的实操。
区块链
简介
区块链技术，也被称为分布式账本技术，起源于比特币，核心优势是去中心化，
能够通过运用数据加密、时间戳、分布式共识等手段，在分布式系统中实现基于去中
心化信用的点对点交易、协同，从而为解决中心化机构普遍存在的高成本、低效率和
数据存储信任等问题提供了解决方案。
特点
去中心化，区块链的颠覆性特点，它实现了一种点对点的直接交互，排除了被中
心化代理控制的风险，使得整个交易流程更加透明真实。
公开透明可追溯，区块链中的每一笔交易都通过密码学方法与相邻两个区块串
联，因此可以追溯到任何一笔交易的前世今生。系统中每一个节点都拥有最新的完整
数据库拷贝，修改单节点数据无效。
稳定可靠，分布式的网络架构确保没有一个中心节点可以被打击或者攻击，任一
节点停止工作都不会影响系统整体的运作。
共识机制，通过技术来达到强安全和共识机制，无需第三方介入。
分类
广义上来看区块链大致可以分为三类：
公有区块链，全世界任何人都可读取的、任何人都能发送交易且交易能获得有效
确认的、任何人都能参与其中共识过程的区块链，无需授权。全世界最大的公有链即
比特币。
联盟区块链，共识过程受到预选节点控制的区块链，由一个联盟组织构成并对其
进行管理，写入需授权接入，其他任何人可以通过该区块链开放的API进行限定查
询。各个节点通常有与之对应的实体机构组织，各机构组织组成利益相关的联盟，共
同维护区块链的健康运转。
新体验  9年双11：互联网技术超级工程
一个国际货品在整个溯源流程中主要包括以下几层信息：
货品基础信息，如条形码、贸易国、生产工厂图片、工厂认证证书、成分含量图
片等。
货品海关备案信息，如原产国等。
质检机构检测信息，如监装、验厂、流通、成分含量检验等。
二维码关联信息。
这些信息足以确保货品的“正”与“好”，然而传统的存储都是中心化的存储，
存储结果可能会被人为修改而失去公信力，溯源最重要的就是结果的真实与可信赖，
项目组在如何给予消费者一个公开透明可信赖的溯源数据上做了大量的调研，最后决
定引入区块链来提供强力的正品心智保障。
本次溯源项目利用蚂蚁金服的区块链数据存证能力，成功的将溯源信息放在链
上，用区块链来“链接”我们和消费者。
区块链数据存证方案如下所示：
新体验  9年双11：互联网技术超级工程
整套系统为三层设计模型。
底层为基础的数据模型设计
基础模型，包括货品模型、工厂模型、商家模型、统计信息等，通过结构化的
数据设计，将基础的底层数据构建起来，提供数据支持，数据来源有商品中心和云梯
ODPS统计，部分货品信息来自于商家自行录入。
溯源模型，包括决策模型、溯源结果、质检模型等，由于溯源的决策规则及质检
规则可能会变化，需要确保溯源模型的可扩展性。
基础配置，包括溯源准入规则配置，决策配置、白名单配置等，例如抽检的命中
概率可以随时配置以适应不同时期的运营需要。
中间层是我们的业务层
业务决策，这是我们最重要的能力建设，包括几个部分，品类准入规则用来判断
哪些货品需要做溯源。白名单用于某些货品或商家特殊情况跳过溯源设置。决策引擎
负责判断货品命中四项抽检中的哪几项，例如验厂规则要求，以货品维度看，若无验
厂报告或验厂报告已过期的，一律必须验厂。
区块链，负责数据的上下行及数据查证，具体上链方案前面已详述。
基础接入层，主要负责与外部系统之间的信息交互，登录验证，数据上链等。天
猫国际平台更像是一个协调者的角色，做完业务决策后，将具体的溯源任务分发给外
部质检机构，外部质检机构将结果反馈给天猫国际，国际根据自己的规则再将结果沉
淀并反馈给供应链侧，以通知供应链溯源服务已经走完，可以下发ASN。
最上层是我们的交互层
WEB服务，包括商品溯源基础信息录入平台及小二溯源配置平台，商家可以通
过基础信息录入平台录入货品的基础信息如条形码、原产地、工厂图片、成分含量图
片、工厂认证图片等，供质检使用及最后传达给消费者。小二溯源配置后台负责配置
溯源参数，如验厂命中概率、流通命中概率、品质退款率大于多少必须做抽检等，以
免每次业务决策改变必须通过发布实现。
HSF服务，外化溯源决策结果给供应链以使供应链判断是否需要溯源或者贴码，
新体验  9年双11：互联网技术超级工程
为了保证数据的安全性，二维码上有一层暗码，刮开后输入，结果如第三张图
所示：
往下滑动即可看到货品的基础信息及详细的溯源信息如验厂结果、品质抽检结
果等。
为了确保码不会被重复利用，当多次扫码时，会有强提示如下图所示：