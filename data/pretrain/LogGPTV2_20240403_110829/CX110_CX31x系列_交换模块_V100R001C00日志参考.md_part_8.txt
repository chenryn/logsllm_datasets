BgpPeerLastError=[BgpPeerLastErrorValue], BgpPeerState=[BgpPeerStateValue])
日志含义
BGP对等体连接建立。
日志参数
参数名称 参数含义
BgpPeerRemoteAddr 对等体地址。
BgpPeerLastError 对等体上次断连时错误码。
BgpPeerState BGP对等体的状态。
l Idle：BGP拒绝任何进入的连接请求，是BGP初始状态。
l Active：BGP将尝试进行TCP连接的建立，是BGP的中间状
态。
l Established：BGP对等体间可以交换Update报文、Notification
报文和Keepalive报文。
l Connect：此状态下，BGP等待TCP连接的建立完成后再决定
后续操作。
l OpenSent：此状态下，BGP等待对等体的Open消息。
l OpenConfirm：此状态下，BGP等待一个Notification报文或
Keepalive报文。
可能原因
BGP邻居建立连接。
处理步骤
l 正常运行信息，无需处理。
----结束
文档版本 09 (2017-09-04) 华为专有和保密信息 48
版权所有 © 华为技术有限公司
CX110&CX31x系列 交换模块
日志参考 5 BGP
5.27 BGP/4/hwBgpPeerRouteExceed_active
日志信息
BGP/4/hwBgpPeerRouteExceed_active: The number of routes received from the BGP peer
exceeded the alarm number.(InstanceId=[InstanceId], Afi=[AddrFamilyAfi],
Safi=[AddrFamilySafi], PeerRemoteAddrType=[PeerRemoteAddrType],
PeerRemoteAddr=[PeerRemoteAddr], MaxRouteNum=[MaxRouteNum],
AlarmThreshold=[AlarmThreshold])
日志含义
从配置了路由上限命令的BGP邻居收到的路由数量超过配置允许的上限值。
日志参数
参数名称 参数含义
InstanceId 实例ID
Afi 地址族
Safi 子地址族
PeerRemoteAddrType 邻居地址类型
PeerRemoteAddr 邻居地址
MaxRouteNum 最大路由数
AlarmThreshold 告警门限
可能原因
原因：BGP配置peer route-limit limit后，从对等体收到的路由数量超过了上限值。
处理步骤
l 原因：BGP配置peer route-limit limit后，从对等体收到的路由数量超过了上限值。
a. 使用display bgp peer查看当前从邻居收到的路由数量是否超过对邻居配置的
最大路由数。
n 如果是，则请执行步骤2。
n 如果不是，则请执行步骤9。
b. 确认路由数量超过上限值是否为实际应用需求。
n 如果是，则请执行步骤8。
n 如果不是，则请执行步骤3。
文档版本 09 (2017-09-04) 华为专有和保密信息 49
版权所有 © 华为技术有限公司
CX110&CX31x系列 交换模块
日志参考 5 BGP
c. 查看用户日志，是否曾修改本地入口策略，如使用peer route-policy、peer ip-
prefix、peer filter-policy等命令，导致接收过多不必要的路由。
n 如果是，则请执行步骤4。
n 如果不是，则请执行步骤5。
d. 更新本地入口策略，通过执行peer route-policy、peer ip-prefix、peer filter-
policy等命令拒绝不必要的路由。
e. 联系对端设备维护人员，确认发布给本端是否均为必要路由。
n 如果是，则请执行步骤7。
n 如果不是，则请执行步骤6。
f. 请对端设备维护人员更改引入路由或发布路由策略，撤销不必要的路由。
g. 请对端设备维护人员进行聚合处理，减少发布的路由数量，查看问题是否解
决。如果未能解决请执行步骤9。
h. 请更改邻居的路由限制配置，增大可接收的最大路由数，查看问题是否解
决。
i. 请收集告警信息、日志信息和配置信息，并联系华为技术支持工程师。
----结束
5.28 BGP/6/hwBgpPeerRouteExceed_clear
日志信息
BGP/6/hwBgpPeerRouteExceed_clear: The number of routes received from the BGP peer
decreased below the alarm number.(InstanceId=[InstanceId], Afi=[AddrFamilyAfi],
Safi=[AddrFamilySafi], PeerRemoteAddrType=[PeerRemoteAddrType],
PeerRemoteAddr=[PeerRemoteAddr], MaxRouteNum=[MaxRouteNum],
AlarmThreshold=[AlarmThreshold])
日志含义
从BGP邻居收到的路由数量降低到告警上限值以下。
日志参数
参数名称 参数含义
InstanceId 实例ID
Afi 地址族
Safi 子地址族
PeerRemoteAddrType 邻居地址类型
PeerRemoteAddr 邻居地址
文档版本 09 (2017-09-04) 华为专有和保密信息 50
版权所有 © 华为技术有限公司
CX110&CX31x系列 交换模块
日志参考 5 BGP
参数名称 参数含义
MaxRouteNum 最大路由数
AlarmThreshold 告警门限
可能原因
原因：执行了undo peer route-limit命令或者从邻居收到路由数量降到配置上限值以
下。
处理步骤
l 正常运行，无需处理。
----结束
5.29 BGP/4/hwBgpPeerRouteNumThresholdExceed_active
日志信息
BGP/4/hwBgpPeerRouteNumThresholdExceed_active: The number of routes received from
the BGP peer exceeded the alarm threshold. (InstanceId=[InstanceId], Afi=[AddrFamilyAfi],
Safi=[AddrFamilySafi], PeerRemoteAddressType=[PeerIPAddrType],
PeerRemoteAddress=[PeerIPAddr], MaxRouteNumber=[RouteLimitNum],
AlarmThreshold=[RouteLimitThreshold])
日志含义
从BGP邻居收到的路由数量超过配置的告警门限值。
日志参数
参数名称 参数含义
InstanceId 实例ID
Afi 地址族
Safi 子地址族
PeerRemoteAddrType 邻居地址类型
PeerRemoteAddr 邻居地址
MaxRouteNum 最大路由数
文档版本 09 (2017-09-04) 华为专有和保密信息 51
版权所有 © 华为技术有限公司
CX110&CX31x系列 交换模块
日志参考 5 BGP
参数名称 参数含义
AlarmThreshold 告警门限
可能原因
原因：配置了peer route-limit limit percentage且从邻居收到的路由数量超过告警阈值。
处理步骤
l 原因：配置了peer route-limit limit percentage且从邻居收到的路由数量超过告警阈
值。
a. 使用display bgp peer查看当前从邻居收到的路由数量是否超过对邻居配置的
最大路由数×告警门限(%)。
n 如果是，则请执行步骤2。
n 如果不是，则请执行步骤9。
b. 确认路由数量超过门限值是否为实际应用需求。
n 如果是，则请执行步骤8。
n 如果不是，则请执行步骤3。
c. 查看用户日志，是否修改本地入口策略，如使用peer route-policy、peer ip-
prefix、peer filter-policy等命令，导致接收过多不必要的路由。
n 如果是，则请执行步骤4。
n 如果不是，则请执行步骤5。
d. 更新本地入口策略，通过执行peer route-policy、peer ip-prefix、peer filter-
policy等命令拒绝不必要的路由，查看问题是否解决。
e. 联系对端设备维护人员，确认发布给本端是否均为必要路由。
n 如果是，则请执行步骤7。
n 如果不是，则请执行步骤6。
f. 请对端设备维护人员更改引入路由或发布路由策略，撤销不必要的路由，查
看问题是否解决。
g. 请对端设备维护人员进行聚合处理，减少发布的路由数量，查看问题是否解
决。如果问题未能解决请执行步骤9。
h. 请更改邻居的路由限制配置，增大可接收的最大路由数，查看问题是否解
决。
i. 请收集告警信息、日志信息和配置信息，并联系华为技术支持工程师。
----结束
5.30 BGP/6/hwBgpPeerRouteNumThresholdExceed_clear
日志信息
BGP/6/hwBgpPeerRouteNumThresholdExceed_clear: The number of routes received from
the BGP peer decreased below the alarm threshold. (InstanceId=[InstanceId],
Afi=[AddrFamilyAfi], Safi=[AddrFamilySafi], PeerRemoteAddressType=[PeerIPAddrType],
文档版本 09 (2017-09-04) 华为专有和保密信息 52
版权所有 © 华为技术有限公司
CX110&CX31x系列 交换模块
日志参考 5 BGP
PeerRemoteAddress=[PeerIPAddr], MaxRouteNumber=[RouteLimitNum],
AlarmThreshold=[RouteLimitThreshold])
日志含义
从BGP邻居收到的路由数量降低到告警门限值以下。
日志参数
参数名称 参数含义
InstanceId 实例ID
Afi 地址族
Safi 子地址族
PeerRemoteAddrType 邻居地址类型
PeerRemoteAddr 邻居地址
MaxRouteNum 最大路由数
AlarmThreshold 告警门限
可能原因
原因：配置了undo peer route-limit命令或者从邻居收到路由数量降到配置门限值以
下。
处理步骤
l 正常运行，无需处理。
----结束
文档版本 09 (2017-09-04) 华为专有和保密信息 53
版权所有 © 华为技术有限公司
CX110&CX31x系列 交换模块
日志参考 6 BSRPRO
6
BSRPRO
关于本章
6.1 BSRPRO/3/HOLDTIME_LESS_INL
文档版本 09 (2017-09-04) 华为专有和保密信息 54
版权所有 © 华为技术有限公司
CX110&CX31x系列 交换模块
日志参考 6 BSRPRO
6.1 BSRPRO/3/HOLDTIME_LESS_INL
日志信息
BSRPRO/3/HOLDTIME_LESS_INL:In VPN instance, when the BSR holdtime and sending
interval were configured, the BSR holdtime was less than the sending interval.
(VPNName=[VPNName], HoldTime=[HoldTime], SendInt=[SendInt])
日志含义
在VPN实例中，当同时配置BSR的有效时间和发送间隔时，BSR有效时间小于BSR发送
周期。
日志参数
参数名称 参数含义
VPNName VPN实例名称。
HoldTime BSR保留时间。
SendInt 发送BSR消息的时间间隔。
可能原因
在VPN实例中，当同时配置BSR的有效时间和发送间隔时，BSR有效时间小于BSR发送
周期。
处理步骤
l 请收集该设备的配置信息、告警信息和日志信息，并联系华为技术支持工程师。
----结束
文档版本 09 (2017-09-04) 华为专有和保密信息 55
版权所有 © 华为技术有限公司
CX110&CX31x系列 交换模块
日志参考 7 CHDLC
7
CHDLC
关于本章
7.1 CHDLC/3/CHDLC_RCV_ERR_MSG
7.2 CHDLC/3/CHDLC_RCV_ERR_PKT
文档版本 09 (2017-09-04) 华为专有和保密信息 56
版权所有 © 华为技术有限公司
CX110&CX31x系列 交换模块
日志参考 7 CHDLC
7.1 CHDLC/3/CHDLC_RCV_ERR_MSG
日志信息
CHDLC_RCV_ERR_MSG:Receive error message(s) in last minute.(MsgType=[MsgType],
CompType=[CompType], CompPid=[CompPid], ErrMsgReason=[ErrMsgReason],
MsgNum=[MsgNum])
日志含义
最近一分钟内收到了错误消息。
日志参数
参数名称 参数含义
MsgType 报文类型。
CompType 组件类型。
CompPid 组件PID。
ErrMsgReason 错误报文原因。
MsgNum 错误消息数量。
可能原因
CHDLC收到其他组件的异常消息，一分钟内记录错误消息的类型。
处理步骤
l 正常运行信息，无需处理。
----结束
7.2 CHDLC/3/CHDLC_RCV_ERR_PKT
日志信息
CHDLC/3/RCV_ERR_PKT:Receive error packet(s) in last minute.(PktType=[PktType],
ErrPktReason=[ErrPktReason], PktNum=[PktNum])
日志含义
最近一分钟内收到了错误报文。
文档版本 09 (2017-09-04) 华为专有和保密信息 57
版权所有 © 华为技术有限公司
CX110&CX31x系列 交换模块
日志参考 7 CHDLC
日志参数
参数名称 参数含义
PktType 报文类型。
ErrPktReason 错误报文原因。
PktNum 错误报文数量。
可能原因
CHDLC组件在最近一分钟内收到错误报文。
处理步骤
l 正常运行信息，无需处理。
----结束
文档版本 09 (2017-09-04) 华为专有和保密信息 58
版权所有 © 华为技术有限公司
CX110&CX31x系列 交换模块
日志参考 8 CLI
8
CLI
关于本章
8.1 CLI/5/CMDRECORD
8.2 CLI/5/CMDRECORDFAILED
8.3 CLI/5/COMMITFAILEDCMD
8.4 CLI/5/INTER_CMDRECORD
8.5 CLI/5/INTER_CMDRECORDFAILED
8.6 CLI/5/LOGIN
8.7 CLI/5/LOGINFAILED
8.8 CLI/5/LOGINFAILEDTIMES
8.9 CLI/5/LOGOUT
文档版本 09 (2017-09-04) 华为专有和保密信息 59
版权所有 © 华为技术有限公司
CX110&CX31x系列 交换模块
日志参考 8 CLI
8.1 CLI/5/CMDRECORD
日志信息
CLI/5/CMDRECORD: To record command information. (Task=[Task], IP=[IPAddress],
User=[Username], Command=[Cmd])
日志含义
记录用户输入的所有命令，不记录执行结果。
日志参数
参数名称 参数含义
Task 通道类型相对索引号，如vty1或con0
IPAddress 输入此命令的用户的Ip地址，如果为console登录，记录为"**"
Username 用户名
Cmd 用户输入的命令
可能原因
用户输入命令。
处理步骤
l 正常运行信息，无需处理。
----结束