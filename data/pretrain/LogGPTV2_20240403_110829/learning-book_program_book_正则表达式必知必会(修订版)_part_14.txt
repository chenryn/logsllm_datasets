文本
11111
22222
33333
44444 -4444
正则表达式
&((}p)-)(s)p1
---
## Page 105
10.2正则表达式里的条件
95
结果
11111
22222
33333
44444-4444
分析
\d{5}匹配前5位数字，（-\d（4））?匹配一个连字符和后4位数字（它
们必须一起出现或一起不出现）。
现在，请考虑这样一个间题：如果你不想匹配那些格式不正确的ZIP
编码，你该怎么办？比如说，在上面这个例子里，在第3行原始文本的末
尾有一个不应该出现在那里的连字符，但这个号码还是出现在了最终的
匹配结果里。怎样才能让这个格式不正确的ZIP编码不出现在最终的匹配
结果里呢？
下面是用一个前后查找条件来解决这个间题的方法，虽然这个间题
并非只有这一种解决办法。
文本
11111
22222
44444-4444
33333-
正则表达式
1d(5)(7(?=- ) - 1d{4))
结果
11111
22222
33333
44444-4444
分析
\d{5}匹配前5位数字。接下来是一个（?（?=-）-\d{4}）形式的向前查
找条件。这个条件使用了？=-来匹配（但不消费）一个连字符，如果条件
得到满足（那个连字符存在），-\d（4}将匹配那个连字符和随后的4位数
---
## Page 106
96第10章嵌入条件
字。这样一来，33333-将被排除在最终的匹配结果之外（它有一个连字
符，所以满足给定条件，但那个连字符的后面没有必须出现在那里的4位
数字）。
?
提示在实际工作中，嵌入了前后查找条件的模式相当少见，
这是因为我们往往可以用更简单的办法来达到同样的目的。
10.3小结
在正则表达式模式里可以嵌入条件，只有当条件得到（或者没有得
到）满足时，相应的表达式才会被执行。这种条件可以是一个回溯引用
（含义是检查该回溯引用是否存在），也可以是一个前后查找操作。
---
## Page 107
附录A
常见应用软件
和编程语言中的
正则表达式
不同的正则表达式实现在基本的语法方面大都是一致的，但在正则
表达式的具体用法方面往往有所不同。支持正则表达式的编程语言和应
用软件各用各的调用方法，在许多细节上都有自己的一套方法。本附录
将对比较流行的应用软件和编程语言中的正则表达式的用法和一些具体
的注意事项进行描述。
注意本附录里的信息只是些为了帮助你尽快入门而准备的速
查资料，具体的示例和注意事项超出了本书的讨论范围，这方面
的细节还请自行参阅相关的应用款件或编程语言的文格。
A.1grep
grep是一种用来对文件或标准输入文本进行文字搜索的Unix工具。根
据你具体使用的命令选项，grep支持基本、扩展和Perl正则表达式。
口-E：使用扩展正则表达式
口-G：使用基本正则表达式
口-P：使用Perl正则表达式。
---
## Page 108
98
附录A常见应用软件和编程语言申的正则表达式
提示使用的命令选项不同，grep工具的功能和用途也就不同。
大多数用户喜欢使用Perl正则表达式（见稍后的描述），国为这
些是最标准的。
请注意以下事项。
口在默认的情况下，grep将把包含着匹配的各个文本行全部显示出
来：如果你只想查看匹配结果，请使用-o选项。
口使用-v选项将对整个匹配操作进行求非一只显示不匹配的文本行。
使用-c选项将只显示匹配的总数而不是次匹配的细节。
grep工具只能用来进行搜索操作，不能用来进行替换操作。换句
话说，grep工具不支持替换功能。
A.2JavaScript
正则表达式处理。
exec：一个用来搜索一个匹配的RegEx方法。
match：一个用来匹配一个字符串的String方法。
口replace：一个用来完成替换操作的String方法。
 search:
一个用来测试在某给定字符串里是否存在着一个匹配的
String方法。
 sp1it:
一个用来把一个字符串拆分为多个子串的String方法。
test：一个用来测试在某给定字符串里是否存在着一个匹配的
RegEx方法，
较新的测览器可以支持）与JavaScrip1.x向后兼容并提供了更
多的功能
JavaScript对正则表达式的支持源自Perl语言，但需要注意以下几个
问题。
---
## Page 109
附录A常见应用软件和编程语言中的正则表达式99
JavaScript使用命令行选项来管理全局的区分大小写搜索：g选项
激活全局搜索功能，1选项让匹配操作不区分字母的大小写，这两
个选项可以组合为gi。
口其他命令行选项（版本4及以后的浏览器支持）包括：m，支持多
行字符串：5，支持单行字符串：X，忽略正则表达式模式里的空
白字符。
口在使用回溯引用的时候，$'将返回被匹配字符串前面的所有东西。
$将返回被匹配字符串后面的所有东西，$+将返回最后一个被匹
配的子表达式，将返回被匹配到的所有东西。
口JavaScript提供了一个名为RegExp的全局对象，在执行完一个正
则表达式之后，你们可以通过这个对象获得与这次执行有关的
信息。
口JavaScript不支持POSIX字符类。
 JavaScript不支持\A和\Z
A.3Macromedia ColdFusion
ColdFusion通过以下4个函数提供正则表达式支持。
 REFind（）：执行搜索。
REFindNoCase（）：执行不区分字母大小写的搜索。
 REReplace（）：执行替换。
REReplaceNoCase（）：执行不区分字母大小写的替换。
注意ColdFusion还支持在标签里使用正则表达式
进行输入检查的微法。不过，这个标签本身并不对正则表达式
进行处理，它只员责把正则表达式传递到最终生成的客户端
JavaScript代码里，对正则表达式的处理由JavaScript负责完成
因此，出现在标签里的正则表达式必须遵守
JavaScript的有关正则和注意事项
ColdFusion支持与Per语言兼容的正则表达式，但需要注意以下几个
问题。
---
## Page 110
100
附录A常见应用软件和编程语言中的正则表达式
，总是匹配换行符。
口在使用回溯引用的时候，必须使用\n代替$来引用回溯引用变量。
ColdFusion将自动地把替换字符串里的所有$字符解释为它们的
转义含义。
口你不必对替换字符串里的反斜线字符进行转义。ColdFusion将自
动地把它们解释为它们的转义含义，但大小写转换序列或它们的
转义版本（例如\u或\\u）属于例外。
口嵌入限定符（（？i）等）总是影响整个表达式，即使它们只是出现
在某个子表达式的内部。
 ColdFusion不支持在替换字符串里使用\Q、\u\L或\1\U。
 ColdFusion不支持向后查找（?，引用这个回溯引用的语法是\k，在一个替换
模式里引用它的语法是${name}。
口在使用回溯引用的时候，$（反引号）将返回被匹配字符串前面
的所有东西，$（单引号）将返回被匹配字符串后面的所有东西，
$+将返回最后一个被匹配的子表达式，$_将返回整个原始字符
串，$8将返回整个被匹配字符串。
NETFramework不支持使用\E、\1、\L、\u和\u进行大小写转换
.NETFramework不支持POSIX字符类。
A.10MicrosoftVisualStudio.NET