service once you have it up and running.
Stopping FTP Service
Important:  When you stop FTP service, users are disconnected without warning.
To stop FTP service:
1 Open Server Admin and select FTP in the Computers & Services list.
2 Click Stop Service (near the top of the window).
From the Command Line
You can also stop the FTP service using the serveradmin command in Terminal. For 
more information, see the file services chapter of the command-line administration 
guide.
LL2346.Book  Page 86  Friday, August 22, 2003  2:38 PM
Chapter 6    FTP Service
87
Allowing Anonymous User Access
You can allow guests to log in to your FTP server with the user name “ftp” or 
“anonymous.” They don’t need a password to log in, but they will be prompted to enter 
an email address.
For better security, do not enable anonymous access.
To allow anonymous FTP service:
1 Open Server Admin and select FTP in the Computers & Services list.
2 Click Settings (near the bottom of the window), then click General.
3 Under Access, select “Enable anonymous access.”
4 Click Save.
From the Command Line
You can also allow anonymous FTP access using the serveradmin command in 
Terminal. For more information, see the file services chapter of the command-line 
administration guide.
Changing the User Environment
You use the Advanced pane of Configure FTP Service to change the user environment.
To change the FTP user environment:
1 Open Server Admin and select FTP in the Computers & Services list.
2 Click Settings (near the bottom of the window), then click Advanced.
3 Choose the type of user environment you want to provide from the “Authenticated 
users see” pop-up menu.
“FTP Root and Share Points” sets up the Users directory as a share point. Authenticated 
users log in to their home directories, if they’re available. Both authenticated and 
anonymous users can see other users’ home directories.
“Home Directory with Share Points” logs authenticated FTP users in to their home 
directories. They have access to home directories, the FTP root, and FTP share points. 
“Home Directory Only” restricts authenticated FTP to user home directories.
4 Click Save.
Regardless of the user environment you choose, access to all data is controlled by the 
access privileges that you or users assign to files and folders.
Anonymous users and authenticated users who don’t have home directories (or whose 
home directories are not located in a share point to which they have access) are always 
logged in at the root level of the FTP environment.
LL2346.Book  Page 87  Friday, August 22, 2003  2:38 PM
88
Chapter 6    FTP Service
Changing the FTP Root Directory
The Advanced settings allow you to change the path to the FTP root directory. 
To specify a different FTP root:
1 If it doesn’t already exist, create the directory you want to use and configure it as an 
FTP share point.
2 Open Server Admin and select FTP in the Computers & Services list.
3 Click Settings (near the bottom of the window), then click Advanced.
4 Type the path to the new directory in the “Authenticated user FTP root” field or click 
the Browse button next to the field and select it.
From the Command Line
You can also change the FTP service root directory using the serveradmin command 
in Terminal. For more information, see the file services chapter of the command-line 
administration guide.
Viewing the Log
You use Server Status to view the FTP log. 
To view FTP log:
1 Open Server Admin and select FTP in the Computers & Services list. 
2 Click Log (near the bottom of the window).
To choose the types of events that are recorded, open Server Admin, select AFP, click 
Settings, then click Logging.
From the Command Line
You can also view the FTP log using the cat or tail commands in Terminal. For more 
information, see the file services chapter of the command-line administration guide.
LL2346.Book  Page 88  Friday, August 22, 2003  2:38 PM
Chapter 6    FTP Service
89
Displaying Banner and Welcome Messages
FTP service in Mac OS X Server lets you greet users who contact or log in to your server.
Note:  Some FTP clients may not display the message in an obvious place, or they may 
not display it at all. For example, in recent releases of the FTP client Fetch, you set a 
preference to display server messages.
The banner message is displayed when a user first contacts the server, before they log 
in. The welcome message is displayed after they successfully log in.
To display banner and welcome messages to users:
1 Open Server Admin and select FTP in the Computers & Services list.
2 Click Settings (near the bottom of the window).
3 Click Messages.
4 Select “Show welcome message” and edit the text of the message.
5 Select “Show banner message,” edit the text of the message, and click Save.
From the Command Line
You can also set the FTP service to display these messages using the serveradmin 
command in Terminal. For more information, see the file services chapter of the 
command-line administration guide.
Displaying Messages Using message.txt Files
If an FTP user opens a directory on your server that contains a file named “message.txt,” 
the file contents are displayed as a message. The user only sees the message the first 
time he or she connects to the directory during an FTP session. You can use the 
message to notify users of important information or changes.
Using README Messages
If you place a file called README in a directory, an FTP user who opens that directory 
receives a message letting them know that the file exists and when it was last updated. 
Then the user can choose whether or not to open and read the file.
LL2346.Book  Page 89  Friday, August 22, 2003  2:38 PM
LL2346.Book  Page 90  Friday, August 22, 2003  2:38 PM
7
91
7 Solving Problems
This chapter lists possible solutions to common problems 
you might encounter working with the file services in 
Mac OS X Server.
General Problems
Users Can’t Access a CD-ROM Disc
• Make sure the CD-ROM disc is a share point.
• If you share multiple CDs, make sure each CD is shared using a unique name in the 
Sharing pane.
Users Can’t Find a Shared Item
• If a user can’t find a shared item, check the access privileges for the item. The user 
must have Read access privileges to the share point where the item is located and to 
each folder in the path to the item.
• Keep in mind that server administrators don’t see share points the same way a user 
does over AFP because administrators see everything on the server. To see share 
points from a user’s perspective, log in using a user’s name and password.
• Although DNS is not required for file services, an incorrectly configured DNS could 
cause a file service to fail.
Users Can’t See the Contents of a Share Point
• If you set Write Only access privileges to a share point, users won’t be able to see its 
contents.
You Can’t Find a Volume or Directory to Use as a Share Point
• Make sure the volume or directory name does not contain a slash (“/”) character. 
Workgroup Manager’s Sharing window, which lists the volumes and directories on 
your server, does not correctly display the names of volumes and directories (folders) 
that include the slash (“/”) character.
LL2346.Book  Page 91  Friday, August 22, 2003  2:38 PM
92
Chapter 7    Solving Problems
Solving Problems With Apple File Service
User Can’t Find the Apple File Server
• Make sure the network settings are correct on the user’s computer and on the 
computer that is running Apple file service. If you can’t connect to other network 
resources from the user’s computer, the network connection may not be working.
• Make sure the file server is running. You can use a “pinging” utility to check whether 
the server is operating.
• If the user is searching for the server via AppleTalk (in the Chooser), make sure you’ve 
enabled browsing over AppleTalk in the General pane of the AFP service settings, 
and that AppleTalk is active on both the server and the user’s computer.
• Check the name you assigned to the file server and make sure users are looking for 
the correct name.
User Can’t Connect to the Apple File Server
• Make sure the user has entered the correct user name and password. The user name 
is not case-sensitive, but the password is.
• Verify that logging in is enabled for the user in the Users & Groups module of 
Workgroup Manager.
• Check to see if the maximum number of client connections has been reached (in the 
Apple File Service Status window). If it has, other users should try to connect later.
• Make sure the server that stores users and groups is running.
• Verify that the user has AppleShare 3.7 or later installed on his or her computer. 
Administrators who want to use the admin password to log in as a user need at least 
AppleShare 3.8.5.
• Make sure IP filter service is configured to allow access on port 548 if the user is 
trying to connect to the server from a remote location. For more on IP filtering, see 
the network services administration guide.
User Doesn’t See Login Greeting
• Upgrade the software on the user’s computer. Apple file service client computers 
must be using Appleshare client software version 3.7 or later. 
LL2346.Book  Page 92  Friday, August 22, 2003  2:38 PM
Chapter 7    Solving Problems
93
Solving Problems With Windows Services
User Can’t See the Windows Server in the Network Neighborhood
• Make sure users’ computers are properly configured for TCP/IP and have the 
appropriate Windows networking software installed.
• Enable guest access for Windows users.
• Go to the DOS prompt on the client computer and type ping , where 
 is your server’s address. If the ping fails, then there is a TCP/IP 
problem.
• If users’ computers are on a different subnet from the server, you must have a WINS 
server on your network.
Note:  If Windows computers are properly configured for networking and connected 
to the network, client users can connect to the file server even if they can’t see the 
server icon in the Network Neighborhood window. 
User Can’t Log in to the Windows Server
• If you’re using Password Server to authenticate users, check to make sure that it is 
configured correctly. 
• If you have user accounts created in a previous version of Mac OS X Server (version 
10.1 or earlier) that are still configured to use Authentication Manager, make sure that 
Authentication Manager is enabled. Then reset the passwords of existing users who 
will be using Windows services. Reset the user’s password and try again.
LL2346.Book  Page 93  Friday, August 22, 2003  2:38 PM
94
Chapter 7    Solving Problems
Solving Problems With File Transfer Protocol (FTP)
FTP Connections Are Refused
• Verify that the user is entering the correct DNS name or IP address for the server.
• Make sure FTP service is turned on.
• Make sure the user has appropriate access privileges to the shared volume.
• See if the maximum number of connections has been reached. To do this, open 
Server Admin, select FTP in the Computers & Services list, and click Overview. Note 
the number of connected users, click Settings, click General, and compare to the 
maximum user settings you have set.
• Verify that the user’s computer is configured correctly for TCP/IP. If there doesn’t 
appear to be a problem with the TCP/IP settings, use a “pinging” utility to check 
network connections.
• See if there is a DNS problem by trying to connect using the IP address of the FTP 
server instead of its DNS name. If the connection works with the IP address, there 
may be a problem with the DNS server.
• Verify that the user is correctly entering his or her short name and typing the correct 
password. User names and passwords with special characters or double-byte 
characters will not work. To find the user’s short name, double-click the user’s name 
in the Users & Groups list.
• See if there are any problems with directory services, and if the directory services 
server is operating and connected to the network. For help with directory services, 
see the Open Directory administration guide.
• Verify that IP filter service is configured to allow access to the appropriate ports. If 
clients still can’t connect, see if the client is using FTP passive mode and turn it off. 
Passive mode causes the FTP server to open a connection to the client on a 
dynamically determined port, which could conflict with port filters set up in IP filter 
service. 
Clients Can’t Connect to the FTP Server
• See if the client is using FTP passive mode, and turn it off. Passive mode causes the 
FTP server to open a connection on a dynamically determined port to the client, 
which could conflict with port filters set up in IP filter service.
Anonymous FTP Users Can’t Connect
• Verify that anonymous access is turned on.
• See if the maximum number of anonymous user connections has been reached. To 
do this, open Server Admin and click FTP in the Computers & Services list.
LL2346.Book  Page 94  Friday, August 22, 2003  2:38 PM
Chapter 7    Solving Problems
95
Solving Problems With Home Directories
Users Can’t Open Their Home Directories
• Make sure the share point used for home directories is set up as a network mount for 
home directories in Workgroup Manager.
• Make sure the share point is created in the same Open Directory domain as your user 
accounts.
• Make sure the client computer is set to use the correct Open Directory domain using 
Directory Access.
LL2346.Book  Page 95  Friday, August 22, 2003  2:38 PM
LL2346.Book  Page 96  Friday, August 22, 2003  2:38 PM
97
Glossary
Glossary
AFP (Apple Filing Protocol)  A client/server protocol used by Apple file service on 
Macintosh-compatible computers to share files and network services. AFP uses TCP/IP 
and other protocols to communicate between computers on a network.
drop box  A shared folder with privileges that allow other users to write to, but not 
read, the folder’s contents. Only the owner has full access. Drop boxes should only be 
created using AFP. When a folder is shared using AFP, the ownership of an item written 
to the folder is automatically transferred to the owner of the folder, thus giving the 
owner of a drop box full access to and control over items put into it.
everyone  Any user who can log in to a file server:  a registered user or guest, an 
anonymous FTP user, or a website visitor. 
export  The Network File System (NFS) term for sharing.
FTP (File Transfer Protocol)  A protocol that allows computers to transfer files over a 
network. FTP clients using any operating system that supports FTP can connect to a file 
server and download files, depending on their access privileges. Most Internet browsers 
and a number of freeware applications can be used to access an FTP server.
group  A collection of users who have similar needs. Groups simplify the administration 
of shared resources.
guest user  A user who can log in to your server without a user name or password. 
Network File System (NFS)  A client/server protocol that uses TCP/IP to allow remote 
users to access files as though they were local. NFS exports shared volumes to 
computers according to IP address, rather than user name and password.
nfsd daemon  An NFS server process that runs continuously behind the scenes and 
processes reading and writing requests from clients. The more daemons that are 
available, the more concurrent clients can be served.
NSL (Network Service Locator)  The Apple technology that simplifies the search for 
TCP/IP-based network resources.
LL2346.Book  Page 97  Friday, August 22, 2003  2:38 PM
98
Glossary    
owner  The person who created a file or folder and who therefore has the ability to 
assign access privileges for other users. The owner of an item automatically has 
read/write privileges for that item. An owner can also transfer ownership of an item to 
another user.
privileges  Settings that define the kind of access users have to shared items. You can 
assign four types of privileges to a share point, folder, or file:  read/write, read-only, 
write-only, and none (no access).
share point  A folder, hard disk (or hard disk partition), or CD that is accessible over the 
network. A share point is the point of access at the top level of a group of shared items. 
Share points can be shared using AFP, Windows SMB, NFS (an “export”), or FTP protocols.
SLP (Service Location Protocol) DA (Directory Agent)  A protocol that registers 
services available on a network and gives users easy access to them. When a service is 
added to the network, the service uses SLP to register itself on the network. SLP/DA 
uses a centralized repository for registered network services.
SMB (Server Message Block)  A protocol that allows client computers to access files 
and network services. It can be used over TCP/IP, the Internet, and other network 
protocols. Windows services use SMB to provide access to servers, printers, and other 
network resources.
WINS (Windows Internet Naming Service)  A name resolution service used by 
Windows computers to match client names with IP addresses. A WINS server can be 
located on the local network or externally on the Internet.
LL2346.Book  Page 98  Friday, August 22, 2003  2:38 PM
99
Index
Index
.bin (MacBinary) format  80, 83
FTP auto-conversion  83
A
access logs
AFP service  42
access privileges. See privileges
administrator
privileges  11
advisory locks for NFS  27
AFP (Apple Filing Protocol)
setting up share points using  23
AFP service
access log  47
Access settings  41
allowing guest access  50
archiving logs  48
automatically disconnecting idle users  49
automatically mounting share point in Mac OS X 
client  52
automounting share point on Mac OS 8 or 9 
client  53
connecting to server in Mac OS 8 and 9  53
connecting to server in Mac OS X  51
described  9
enabling AppleTalk browsing  46
limiting connections  47
login greeting  50
Mac OS 8 and 9 client software requirements  53
Mac OS X client software requirements  51
monitoring  44
overview  37
problems with  92
registering with NSL  46
registering with Rendezvous  46
Rendezvous registration type  46
sending users messages  49
setting up  39
solving problems  92
specifications  38, 55
starting  44
stopping  45
viewing logs  45
anonymous FTP  81
Apple Filing Protocol. See AFP
AppleShare  92
AppleTalk  38, 40, 92
authentication
AFP service  37
Kerberos  37, 80
Windows services  56
Authentication Manager  56, 93
auto-conversion (FTP)  83
See also on-the-fly conversion
automount. See network mount
B
bin (MacBinary) format  80
C
client computers
encoding for older clients  40
client computers (Mac OS 8 and 9)
using AFP service  53
client computers (Mac OS X)
using AFP service  51
client computers (Windows)
using file services  66
using Windows services  66
compressed files  80
cross-platform issues for file service  56
custom FTP root  88
D
daemons
nfsd  72
disconnect messages  43, 49
DNS service
problems with  94
domain browsing services  60
DOS prompt  93
drop box
overview  10
setting up  34
LL2346.Book  Page 99  Friday, August 22, 2003  2:38 PM
100
Index    
E
error logs
AFP service  42, 48
everyone
privileges  11