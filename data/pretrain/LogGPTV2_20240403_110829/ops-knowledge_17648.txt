User: Please write a complete script to realize file backup according to the following Linux command line operations, and set automatic timing execution. The files to be backed up are in the \/home\/data directory, and the backup data needs to be transferred to another backup server, and the two servers are connected through ssh. The storage path of the backup data is under the \/backup\/data directory. After the backup is completed, the information of the backup file needs to be written into the log file. The scheduled backup task is executed once a week, and the backup time is every Friday at 11:00 pm.
Assistant: #!/bin/bash # Define the backup source directory and destination directory SOURCE_DIR="/home/data" DEST_DIR="/backup/data" # Define the log file path LOG_FILE="/backup/backup.log" # Backup file DATE= `date '+%Y-%m-%d %H:%M:%S'` echo "Start backup $SOURCE_DIR to $DEST_DIR at $DATE..." >> $LOG_FILE rsync -avz -e ssh $SOURCE_DIR /* user@backup_server:$DEST_DIR >> $LOG_FILE 2>&1 if [ $? -ne 0 ]; then echo "Backup failed." >> $LOG_FILE exit 1 fi echo "Backup complete." >> $LOG_FILE exit 0 # Set automatic scheduled backup tasks crontab -e # Add the following content in the scheduled task editor, save and exit 0 23 * * 5 /path/to/backup_script.sh