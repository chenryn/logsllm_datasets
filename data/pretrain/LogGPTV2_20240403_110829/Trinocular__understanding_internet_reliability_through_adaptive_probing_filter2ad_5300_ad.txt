### 优化后的文本

#### 6.1 地址探测的准确性
目标地址在某些情况下始终不活跃，在其他具有短暂使用情况的情况下，它仅有时处于活跃状态。通过探测多个地址可以处理这两种情况。

其他系统使用ICMP作为触发机制来验证故障；例如，traceroute可能从错误触发中恢复。然而，这些系统引发了一些其他问题（如traceroute的目标是否在线），即使在自我纠正时也会产生额外的流量。我们的研究表明，探测E(b)比探测单个地址提供30-40%更好的召回率，即使没有二次验证也是如此。

#### 6.2 探测块的粒度
大多数先前的主动探测系统按可路由前缀跟踪可达性 [17, 20]（Hubble操作最多探测每个BGP前缀的一个目标 [16]）。然而，可达性与BGP前缀并不相关 [3]；我们观察到更小的单元。

接下来，我们将直接测量每个/24块的基于块的方案与基于前缀的方案进行比较。在基于前缀的方案中，通过测量单个代表地址来确定一个或多个块的可路由前缀的中断情况。基于前缀的方案需要较少的流量并获得广泛的覆盖范围。然而，它们的缺点是不够精确，因为单个代表地址可能无法检测到未直接测量的部分前缀中的中断。另一方面，基于块的方案需要更多的流量，并且不能覆盖没有任何地址响应的块，因此它们的覆盖范围较低。但由于基于块的方案直接测量每个块，因此提供了非常高的精度。

首先，我们比较基于块和基于前缀的测量方案在精度和覆盖范围上的权衡，然后讨论这种精度差异如何影响中断检测的准确性。

**方法论**：我们首先必须定义基于块或基于前缀的方法何时能够覆盖一个前缀。基于块的测量系统可以跟踪具有活跃地址响应的块。这里我们要求有20个活跃地址，A > 0.1（这是一个比Trinocular略严格的要求）。基于前缀的系统期望一个活跃地址，有时是一个特定地址（如以.1结尾的地址 [17, 18, 20]，或者它们探测所有地址 [28]）。我们表明，替代方法要么覆盖较少的块，要么每次探测收集的信息较少，可能会错过中断。

**每次探测的信息量和覆盖范围**：为了评估每次探测提供的信息量，我们检查了每种替代方案的IP历史数据。我们从历史数据集“it49w” [11]（在这里标识为H 49w）开始，该数据集总结了2006年至2012年的IPv4普查。图6显示了不同选择探测目标方法下每个块的可用性值A的分布：探测.1、命中列表中最活跃的单个地址 [10]、所有活跃地址（E(b））和所有地址。这个A值与单次探测提供的关于块的信息量相关，因为探测非活跃地址无助于确定块是否在线。

我们首先比较探测活跃地址与所有地址（E(b) vs. 所有地址）。E(b)线对所有块的可用性更高，因此A(E(b)) > A(b)，每次Trinocular探测提供的信息量比探测所有地址更多。

对于许多块（约40%的块，从3.5M向右），dot-one和命中列表的表现优于E(b)，但对于约50%的块（从0.7M到3.5M）表现较差。在许多情况下（对于dot-one，大约2M个块从0.7到2.5M，约占所有块的30%），单个地址在E(b)显示一些地址会响应的地方没有覆盖。因此，虽然单个目标可能适用于40%的块，尤其是在探测包括重试时，但它对更多的块提供较差或无覆盖——探测E(b)可以覆盖比.1多约三分之二的块。

虽然A表征了单次探测提供的信息量，但Trinocular发送自适应数量的探测，使低A值的块也能获得良好的覆盖。为了显示Trinocular找到活跃地址的能力的上限，“15-try-E(b)”曲线显示了15次探测中有任何一次响应的概率，表明Trinocular可以通过多次探测为即使是非常间歇性响应的块提供合理的结果。

尽管其他系统使用次要方法来提高可靠性（可能是用traceroute进行验证），或者使用更少但更大的块（§6.2），我们表明E(b)提供的覆盖范围比依赖单个地址宽约30%。

| 方法 | 可用性 (A) |
| --- | --- |
| E(b) | ... |
| dot-one | ... |
| 命中列表 | ... |
| 所有地址 | ... |
| 15-try-E(b) | ... |

#### 6.3 覆盖范围的比较
我们通过重新分析2012年8月3日进行的全网调查 [27] 来评估覆盖范围的影响，标记为A20addr。与S 50j一样，该数据集由每隔11分钟发送的ICMP探测组成。但它只覆盖了2.5M /24块中的20个地址，并且只在2012年8月3日进行了24小时。我们将此探测数据与同一天同一站点的默认免费BGP路由表进行比较。

**精度**：我们在表3中比较了覆盖范围的精度。在左列中，我们考虑每个可路由前缀的地址块是否被基于块的测量、基于前缀的测量、两者都覆盖，还是都没有覆盖。我们在BGP路由表中看到418k个前缀。其中，基于前缀的测量直接观察到240k个前缀（前缀直接，57%），而基于块的测量仅包含185k个前缀的数据（44%）。基于块的覆盖遗漏了一些所有块都少于20个地址的前缀；基于前缀的覆盖遗漏了一些没有.1地址响应的前缀。总体而言，基于前缀的探测覆盖了13%更多的前缀，尽管基于块的探测拾取了基于前缀遗漏的8%的前缀（块直接减去重叠）。

块级视图（右列）呈现了不同的画面。当考虑推断的块时，基于前缀的覆盖范围更大（81%）。这种大范围覆盖是由于稀疏占用的大前缀，如MIT的18/8，其中大多数块不响应，但基于前缀的方案允许18.0.0.1代表它们的可达性。基于块的覆盖也较低，因为它需要每个块不止一个地址。然而，这些前缀中的直接测量很少：我们观察到的块数是前缀直接的10倍，但推断使得基于前缀的方案可以为3倍更多的块提供答案。接下来，我们考虑直接和间接测量如何影响准确性。

**准确性**：我们接下来比较不同粒度的基于前缀和基于块的测量对A20addr中断准确性的影响。

对于基于前缀的测量，我们观察到一个地址的状态代表整个前缀。它直接观察到代表地址块中的中断，并推断前缀中其他块的状态。这种方法在中断是前缀完整时工作完美——前缀的所有部分一起上线或下线，可能是由于路由的共同变化。但在中断是前缀部分时它是不正确的，并且当前缀中的一些块在线而其他块离线时，可能会过高或过低估计中断的大小。

| 状态 | 所有站点 (%) | w | c | j |
| --- | --- | --- | --- | --- |
| 全部下线 | 0.79 | 0.74 | 0.92 | - |
| 全部上线 | 99.21 | 99.08 | - | - |
| 不一致 | 99.26 | - | - | - |
| wc | 0.24 | - | - | - |
| cj | 0.26 | 98.53 | 98.62 | 98.53 |
| 1.21 | - | - | - | - |
| wj | 0.22 | - | - | 1.23 |
| 1.16 | - | - | - | - |
| wcj | 0.15 | 98.01 | - | 1.84 |

表4：三天内在三个站点观察到的中断。数据集：A7。

为了比较准确性，我们通过观察前缀目标的中断来模拟基于前缀的方案。我们将其与重新分析A20addr的类似Trinocular的方案进行比较，遵循§7.2，但每个块中的20个地址都是E(b)。基于前缀的方案经常将前缀声明为下线，但数据显示前缀中的其他块仍然在线。我们发现25%的块轮次推断为下线是不正确的，因此基于前缀的推断通常高估了中断。当小规模中断没有发生在前缀的直接测量块中时，它也可能低估中断；我们观察到的37%的块轮次中断被基于前缀的方案遗漏。

基于前缀测量的基本限制是中断通常不会影响整个前缀。为了量化这一说法，我们检查了A20addr中具有任何块级中断的每个可路由前缀。对于每个前缀，我们评估中断是前缀完整还是前缀部分。任何基于前缀的测量方案对于前缀部分中断总是不正确的，根据直接测量块的状态，可能会过高或过低报告。我们发现只有22%的前缀轮次（有任何中断）是前缀完整的，而78%是前缀部分的，这表明大多数中断是部分的。

### 7. 互联网研究
接下来，我们检查Trinocular对互联网的看法。

#### 7.1 互联网的日常生活
我们首先评估全网中断，以评估本地和全局中断的比例，并演示Trinocular的操作。我们收集了从2013年2月12日14:25 UTC开始的两天内3.4M个块的中断数据，来自洛杉矶、科罗拉多和日本的三所大学，分别标记为w、c和j。该实验产生了三个数据集：A7w、A7c和A7j。为了分析，我们识别出A不一致的块并移除它们，剩下863k、865k和863k个块。

当将数据渲染为每个轮次和块一个像素的图像时，数据量巨大（此处省略，但在[27]中提供），形成一个270像素宽和3.4M高的图像。图像确认了广泛存在的昼夜“中断”，证实了我们稍后报告的情况（例如，在图7中）。

来自三个观测点的数据使我们开始评估我们观察到的中断有多广泛。表4显示了三个站点在所有三个站点都有重叠覆盖期间的协议水平。我们将协议定义为块时间的百分比，即每个块在给定状态下的中断持续时间总和，针对三个观测点的每种组合。

比较w、c和j列，我们看到三个站点之间有轻微的变化（从0.74%到0.92%）。我们在大多数测量中都看到了这种程度的变化，没有明显趋势偏向任何一个站点。我们在这些全网测量中看到的变化与图10中对互联网样本的测量相似，表明我们的样本是无偏的。

我们可以通过比较每个站点与其他站点来评估局部和全局中断的程度。双观测点列（wc等）显示许多中断是局部的，在一个站点可见而在另一个站点不可见。所有三个观测点的重叠（wcj列）显示只有约0.15%的互联网下线，表明单个站点看到的中断中只有16-20%是全局的。我们认为通过三个独立的观测点，我们正在趋近于只报告全局中断，但未来的工作应该探索更多的观测点以证明这一点。

在这里，我们考虑了互联网的两天。我们目前正在积极运行Trinocular，并计划在未来的工作中比较长期观测并与网络中断的其他公开信息进行比较。

#### 7.2 重新分析互联网调查数据
虽然§7.1使用Trinocular研究全球互联网，但只提供了简短的快照。为了获得更长期的视角，我们接下来使用Trinocular背后的原则重新检查现有数据集。

我们利用过去三年从洛杉矶、科罗拉多和日本收集的互联网调查数据 [13]。调查从20k或40k /24块的随机样本（约占响应互联网的1-2%）开始，然后每11分钟探测每个块中的所有地址，持续两周。

调查数据与Trinocular有很大不同。b中的所有地址都被探测，不仅仅是E(b)，因此调查流量速率是Trinocular的100倍。为了适应这个更大但不太精细的数据，我们跟踪每个块的状态信念并使用所有探测作为输入。因为我们探测所有地址，所以在这里E(b) = b（表1）。由于我们无法控制探测，因此既没有自适应探测也没有恢复探测，但周期性探测每2.6秒发生一次，略高于Trinocular的自适应探测频率。这种变化既有好处也有坏处：频繁的周期性探测可以提高中断开始和结束检测的精度，但许多探测被发送到Trinocular会避免的非响应地址上。

我们的重新分析从调查本身计算A(b)。