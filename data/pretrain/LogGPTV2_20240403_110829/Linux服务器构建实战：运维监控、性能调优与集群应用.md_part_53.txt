socket recv buffer
for
any
ring bc8
N
send buffer
messages
.230
.230
G
---
## Page 357
Linux公社（www.LinuxIDC.com）是专业的Linux系统门户网站，实时发布最新Linux资讯。
闭，然后dlm锁进程正常关闭了从web2的连接。由于是正常关闭节点web2，所以RHCS认为
342
个集群系统没有发生异常，仅把节点web2从集群中隔离而已
Aug 24 01:10:51 web1 openais [2755]:[
Aug
蓄
Mug
M
Muo
Mus
重新启动web2节点，
从输出日志可以看出，当web2节点正常关机后，qdiskd进程立刻检测到web2节点已经关
Aug 24 00:57:49 web1 openais[2755]:[CPG ] got joinlist message from node 2
and
Z
24
2401:10:51
in
记
dax
24
1 will provide
4 01:10:51 web1
101:10:51
recovery.
01:10:51
01:10:51
01:10:50web1
WWwI
01:10:51
01:10:51
01:10:51
01:10:51
01:10:51
01:10:51
01:10:51
01:10:51
01:10:51
01:10:51
01:10:51
01:10:51
01:10:51
01:10:51
01:10:51
01:10:51
01:10:51
01:10:51
01:10:51
01:10:51
01:10:51
01:10:51
01:10:51
01:10:51
01:10:51
01:10:51
01:10:51
01:10:51
01:10:51
01:10:51
01:10:51
webl
M
Mus
web
web
web
web
web1
web1
web1
web1
web1
web1
web1
web1
web1
web1
web1
web1
web1
web1
web1
service.
openais[2755]:
openais[2755]:
openais[2755]
openais [2755]
openais [2755]
openais [2755]
openais[2755]
openais[2755]
openais[2755]
openais[2755]
openais [2755]
openais [2755]
openais[2755]
openais[2755]
openais[2755]
openais[2755]
openais[2755]
openais[2755]
openais
openais[2755]
openais[2755]
openais[2755]
openais
openais
openais[2755]
openais[2755]
openais[2755]
openais[2755] :
openais[2755]:
然后在web1
openais [2755] :
enais
[2755]
[2755]
[2755]
[2755]
Linuxidc.com
1上继续观察日志信息
[TOTEM] entering
ISYNC
(CLM
[CLM
[TOTEM]
[NELOL]
[TOTEM]
TOTEM]
[TOTEM
[TOTEM
[TOTEM]
[TOTEM
[TOTEM]
[TOTEM]
[TOTEM]
[TOTEM
[WELOL]
[TOTEM]
[TOTEM]entering
CLM
CLM
CLM
CLM
CLM
CLM
CLM
CLM
CLM
CLM
CLM
[TOTEM]
TOTEM]
[TOTEM]
1This node is within the primary component
Membe
Members
New
Members Joined:
Members
New
CLM
Sending initial ORF token
Did
aru
previous
position
posi
aru
previous
position
aru
previous
entering
entering
storing
Saving
Creating
r(0)ip(192.168.12.240)）
ers
r(0)
r(o)
r（o)
CONFIGURATION CHANGE
R
Configuration:
CONFIGURATION CHANGE
ition
2b high
(0)
(0)
not
OPERATIONAL State.
Joined:
Left:
ip(192.168.12.240)
ip(192.168.12.232)
ip(192.168.12.230)
Left:
need
ring seq 3016 rep 192.168.12.240
[3]member 192.168.12.240:
ring seq 3016
ring seq 30161
[0]member
RECOVERY state.
COMIT state.
new
ip(192.168.12.231)
GATHER
（192.168.12.231)
 delivered 2b received flag 1
delivered 2b received fag 1
commit
（重点看日志中斜体部分）。
(192.168.12.232)
delivered
1to originate any messages
Btate
token
C received flag1
192.168.12.232:
192.168.12.230:
high seq received 2b
rep 192.168.12.230
1 2b received flag 1
rep 192.168.12.230
from 11.
for ring bcc
because I am the
---
## Page 358
Linux公社（www.LinuxIDC.com）是专业的Linux系统门户网站，实时发布最新Linux资讯。
并且将web2重新加入集群中
Aug
Aug
Aug
Aug
富
Aug
然后在节点Mysqll1上查看/var/log/messages
[root@web2 -]#echo
在节点web2上执行如下命令，
（2）节点web2异常岩机
从输出可知，
Aug
蓄
G
24
2402:26:36
2402:26:36
recovery.
2402:26:36
忆
24 02:26:16 Mysql1
24
402:26:36
02:26:36
02:26:36
24
02:26:36 Mysq11
02:26:36 My8ql1
02:26:36 Mysql1
02:26:36
02:26:36
02:26:36
02:26:36
02:26:36
02:26:36
02:26:36
02:26:36
02:26:36
02:26:36
02:26:36
02:26:36
02:26:36
02:26:36
02:26:36
02:26:36
02:26:36
02:26:36
02:26:36
02:26:36
01:10:55
01:10:51
01:10 :51
01:10:51
01:10:51web1
01:10:51 web1 c
01:10:51
01:10:51 web1
www.
重新启动节点web2后，openais底层通信进程检测到web2节点已经激活，
Mysq11
Mysq11
Mysql1
Mysql1
Mysql1
Mysql1
Myaql1
Mysq11
Mysql1
Mysq11
Mysql1
Mysql1
Mysql1
Mysq11
Mysql1
Mysql1
Mysql1
Mysq11
Mysql1
Mysql1
Mysq11
Mysql1
Mysql1
Mysq11
webl
ebl
web1
c>/proc/sysrq-trigger
openais[2649] :
openais[2649] :
openais[2649]:
openais[2649]
openais [2649]
openais[2649]
qdiakd[2672]:
openais[2649]:
openais[2755]:
openais [2755]
openais[2755]：
openais[2755]:
openais[2755] :
openais[2755] :