Table2.FPGAexperimentsetupExperiment1Experiment2errordetectionmechanisms/countermeasurescompareunit(cid:2)(cid:2)parity(cid:2)∗(cid:2)∗timediversity(cid:2)experimentparameterspacet0−250μsd10−40μsf10−32MHz∗onlyevaluatedincaseofaCCFas32MHzwasthemaximumpossiblefrequencytooperatethedeviceatroomtemperature.Themaximumclockfre-quencygivenbytheActelplace&routetoolwas26MHz.4.3ASICsetupInanextstepweconductedsimilarexperimentsonin-dustrialASICdualcorearchitectures.Thetargetarchitec-turesweusedwereprototypeboardsimplementingafail-silentdualcorearchitecture.Wetestedtwodifferenttargetimplementations,onerun-ningthetwocoresinphase,andoneimplementingatimediversityof1.5clockcycles.BotharchitecturesusetwoARM7coresandacompareunitwithabuilt-inselftest.FlashandRAMareprotectedbyparityandECC.Anerrorhandler(EH)triggersanerrorpinwheneverthecompareunitoraparity/ECCmechanismfailsandcollectsinforma-tionaboutthetypeandoriginoftheerror.Thedeviceisalsoequippedwithavoltagemonitor,which—accordingtoitsspeciﬁcation—assertsaresetwheneverthevoltagedropsbelowacertainthresholdforlongerthanaminimumdura-tionthatisspeciﬁedtoliebetween300nsand1μs.Thismechanismcannotnotbedisabled.WeusedtheLINinterfacetocommunicatewiththetar-getchip.Additionallytheerrorpinfromtheerrorhandlerwastracedforfaultanalysis.TheapplicationloadforthecompareunitARM7(Master)ARM7(Checker)EHFlashwithParityRAMwithECCLINRXTXerrorFigure6.BlockdiagramofASICprototypeTable3.ASICexperimentsetupExperiment3Experiment4errordetectionmechanisms/countermeasurescompareunit(cid:2)(cid:2)ECC/parity(cid:2)(cid:2)volt.monitor(cid:2)(cid:2)timediversity(cid:2)experimentparameterspacetrandomrandomd450−600ns400−600nsf85−100MHz95−124MHzPSDexperimentswasaBIST(builtinselftest)routinewhichcandetectmoststuck-atfaultsinthecoresandthere-foreshouldkeepthenumberoflatentfaultstoaminimum.TheBISTusesabuiltinCRCunitgeneratingasignatureovereachBISTroutineandthencomparesittoareference.Incasethevaluesdiffer,thealgorithmsendsoutanerrormessageovertheLINinterface,otherwisetheBISTrestarts.Againtwoexperimentswerecarriedout,oneontheASICrunningthecoresinphasewithouttimediversity,andoneontheASICimplementingthetimediversity.Theex-perimentparameterspacecanbefoundinTable3.Experiment3.Thetargetwithouttimediversitywasspeciﬁedforaclockfrequencyof72MHz,butcouldbeoperatedupto100MHz,whichwechoseastheupperfre-quencylimit.Accordingtoourinitialplanthelowerfre-quencyshouldhavebeen36MHz.Howeverinourexperi-mentswefoundoutthatthevoltagemonitorwastriggeredforfaultdurationslongerthan600ns.Itturnedoutthatwiththislimitationwewerenotabletocauseerrorsat36MHz,notevenat72MHz.ThelowestfrequencyatwhichtheASICbecamesensitivetoourPSDturnedouttobe85MHz.Thedelaytwaschosenrandomly,aswehadnoaccesstochipinternalsignalsthatwouldhaveallowedcreatingsys-tematictriggereventsasfortheFPGAtarget.TheresultingparameterspaceforthedualcoreunitwithouttimediversitycanbeseeninFigure7.Eachpixelinthegraphrepresentsanaverageof20experiments.Thetriangleshownintheﬁgureseparatesthreedistinctareas:(i)noeffect(whiteareatotheleft),(ii)voltagemonitortriggered(greyareatotheright),and(iii)faultoccurred(blackareasinsidethetrian-gle).Onecansee,thatthefaultdurationfortriggeringthevoltagemonitorisapproximatelyconstantovertheclockfrequency,whiletheshortestfaultdurationforfaulteffectslinearlyincreaseswithdecreasingclockfrequency.Assum-ing,thatthislineartrendcontinuesforsmallerfrequencies,theminimumfaultactivationtimetoinjectdelayfaultsatthenominalfrequencyof72MHzwouldbe680ns,whichinoursettingisalreadyinsidethevoltagemonitordetectionarea.Thisiswhywechosetheparameterstoexactlymatch978-1-4244-4421-2/09/$25.00 c(cid:13)2009 IEEE
455
Authorized licensed use limited to: Tsinghua University. Downloaded on March 20,2021 at 09:59:27 UTC from IEEE Xplore.  Restrictions apply. 
fault duration (ns)clock frequency (MHz)40045050055060065080859095100No effectFault effectVoltage monitorFigure7.Susceptiblefaultinjectionparame-terspaceforExperiment3fault duration (ns)clock frequency (MHz)4004505005506006509095100105110115120No effectFault effectVoltage monitorFigure8.Susceptiblefaultinjectionparame-terspaceforExperiment4thesusceptiblearea.Experiment4.Thetargetusingtimediversitywasspec-iﬁedforaclockfrequencyof80MHz,butcouldbeoperatedupto124MHz,whichwechoseastheupperfrequencylimit.AgainthelowestfrequencyatwhichtheASICbe-camesensitivetoourPSDwaslimitedbythevoltagemon-itor,andturnedouttobe95MHz.Thedelaytwascho-senrandomlyasinExperiment3.TheparameterspaceofthesusceptibleareaisshowninFigure8.Sincethisdevicecouldbeoperatedathigherfrequenciesthesusceptibleareawaslargerforthisexperiment.10121416182022242628303234024681012141618fault duration (µs)CCF occurrence  32 MHz30 MHz28 MHz26 MHz24 MHz22 MHz20 MHzFigure9.CCFresultsforFPGAwithoutcoun-termeasures5Results5.1FPGAresultsThissectionpresentstheresultstotheexperimentsontheFPGAdualcorearchitecture.TwoseriesofexperimentsintheparameterspacegiveninSection4.2wereconducted,onewithtimediversityandonewithout.Eachexperimentconsistedofroughly5millionfaultinjectionsevenlydis-tributedovertheparameterspace.TheresultsforthePSDinjectionswithoutcountermea-suresaregiveninFigure9.ThegraphshowsthenumberofCCFoccurrencesoverthefaultduration—229CCFsweredetectedduringtheexperiment.Thedifferentcurvesrep-resentdifferentsystemclockfrequencies.Itcanbeseen,thatthefaultdurationleadingtoCCFsisboundedonbothsides,asafaultdurationoflessthan12μsneverledtoaneffect,whileafaultdurationofmorethan32μsneverledtoaCCFgeneratingeffect,sincethosefaultsalwayscausedlogiclevelfaultsinthesystem,thatweredetectableastheyledtodifferenteffectsinthecoresortosystemblackouts.ThisconﬁrmsourexpectationsfromSection4.Atthesametimeforasystemclockfrequencyoflessthan20MHzourPSDneverledtoaCCF,while32MHzwasthemaximumpossiblefrequencytofaultlesslyoperatethedeviceatroomtemperature.Thefollowingobservationsareimportanttonote:•ThePSDinducedCCFsareboundedonbothsidesintermsoffaultdurationaswellassystemclockfre-quency.•Faultdurationandsystemclockfrequencyarein-verselyproportional,i.e.forhighersystemclockfre-978-1-4244-4421-2/09/$25.00 c(cid:13)2009 IEEE
456
Authorized licensed use limited to: Tsinghua University. Downloaded on March 20,2021 at 09:59:27 UTC from IEEE Xplore.  Restrictions apply. 
Table4.CCFoccurrenceonFPGAnotimediversitytimediversityCCF(noparity)2290CCF(parity)1080quenciesshorterfaultactivetimesleadtoaCCF.•AhighersystemclockfrequencyleadstomoreCCFs,ifreducedtolessthan62%ofthemaximumpossiblefrequencynoCCFsareobservedanymore.AclassiﬁcationoftheCCFsobservedwithdifferentcountermeasuresisshowninTable4.UsingtimediversitycompletelyremovedanyCCFoccurrence,whiletheparityprotectionreportedanerrorfor47%ofallCCFs.LookingattheofﬂinetracesofCCFcasesinmoredetailwefoundoutthattheyalloccurredduringRAMreadaccessesonthecores’“Memoryin”port(seeFigure5).Thepathfromthedatamemorytothecores’registerﬁlesisthesystem’scrit-icalpathaccordingtoplace&route.Withoutcountermea-suresthiscriticalpathisapproximatelythesameformas-terandcheckercoreandthereforePSDcanleadtosimilarfaulteffectsinbothcoresresultinginaCCF.Byactivat-ingthetimediversitythecriticalpathtothecheckercoreissplitatthedelayelement.Inourexperimentsthisalwaysledtodifferentfaulteffectswhichcouldberecognizedbythecompareunit.ParityprotectionofthiscriticalpathhasshowntobeaquiteeffectiveagainstCCFsaswell.How-everpleasenotethattheparitycheckingmechanismshouldnotbeplacedinthecriticalpathitself,asitwillalsopro-longthecriticalpathandleadtomorefalsepositivesaswellasfalsenegatives.Theparityshouldbestoredinthebufferstagetogetherwiththedataafterthecriticalpath,andalsobecheckedthereafter.Theseexperimentsshow,thatdelayfaultsarethemostdangerousclassoffaultsregardingCCFs,astheyﬁrstaffectthecriticalpathwhichislikelytobesymmetricalinadualcoresystem,whilelogicvoltagelevelfaultsaffectthewholesystem.5.2ASICresultsInthissectionwepresenttheresultstothePSDexper-imentsontheASICarchitectures.AsmentionedinSec-tion4.3,theparameterspaceforPSDinjectionwashighlylimitedbythevoltagemonitor,whichiswhyweonlyper-formedfaultinjectiononthesusceptiblearea.Weconductedroughly100,000experimentrunsforeacharchitectureevenlydistributedoverthegivenparameterspace.ThereasonwhywecouldnotcarryoutasmanyexperimentsasfortheFPGAsetupwas,becausewehadtoTable5.CCFoccurrenceanderrordetectionanalysisonASICnotimediversitytimediversityCCF100errordetectionmechanismscompareunit40%80%ﬂashparity12%70%RAMECC/parity67%8%usetheLINinterfaceforexperimentanalysis,whichwasalotslower.TheresultsarelistedinTable5.Outofthe100,000ex-periments10ledtoaCCFforthedualcorewithouttimedi-versity,whilethedesignusingtimediversityagainshowednoCCFs.TheCCFsweredetectedthroughwrongBISTre-sults,whilethefaulthandlingmoduleshowednoerror.TheexactcauseoftheCCFcannotbepinpointedasdetailedasfortheFPGAarchitecture,sincewedidnothaveasexactcore-internaltracesasfortheFPGAexperiments.Thetablealsoshowswhicherrordetectionmechanismswereﬂaggedinpercentoveralldetectederrors.Pleasenote,thatanerrorcanbedetectedbymultiplemechanisms.ForthedualcorearchitecturewithouttimediversitytheRAMECC/paritymechanismtriggeredmostoften,whileforthearchitecturewithtimediversitytheoutputcompareunitaswellastheﬂashparitymechanismturnedoutmostuseful.Thisagainshows,thatanarchitecturalchangelikethetimediversitymechanismcanalterthedeviceenoughtochangethefaulteffectsdrastically.5.3EvaluationofCCFCountermeasuresOurexperimentsondifferenttargetplatformshaveyieldedverysimilarresultswithrespecttotheeffectivenessofCCFcountermeasures,whichallowstocarefullyassumeageneralvalidity.Atthesametimetheplatformshavebeencomplementarywithrespecttotheavailablecountermea-suresandtheaccessibilityofinternalsignalsandstates.Insummarywecangivethefollowingassessmentfortheindividualcountermeasures:Timediversity.ThismethodhasprovenveryeffectiveincompletelyeliminatingpowersupplyinducedCCFsinbothFPGAandASICarchitectures.FortheFPGAexperi-mentsitwasshown,thatthiswasmainlyduetothefactthatthecriticalpathwaschangedforoneofthecores,andthere-foreledtodifferentdetectablefaulteffects.Thisstandsincontrasttotheusualassumptionthatthestrengthoftempo-raldiversityliesinthefactthatthesamefaultaffectstheworkloadindifferentstates.Thisleadstotheconclusion,978-1-4244-4421-2/09/$25.00 c(cid:13)2009 IEEE
457
Authorized licensed use limited to: Tsinghua University. Downloaded on March 20,2021 at 09:59:27 UTC from IEEE Xplore.  Restrictions apply. 
thatusinganymeanstochangethecriticalpathtobeasym-metricmightbeaveryeffectivecountermeasureaswell,butthishastobeinvestigatedyet.Parity.Thismechanismhasshowntobeparticularlyef-fectiveifusedatthecriticalpathofthedesign,asourFPGAexperimentsdiscoveredthatPSDinjectedfaultsaffectthispathﬁrst.Beyonddetectionofdelayfaults,parityprotec-tionofotherpathsstillremainsanefﬁcientmeansforre-sourceprotectionagainstlogicfaultsorsingleeventupsets,especiallyincaseofnon-duplicatedresources.Increasedtimingmargins.OurFPGAexperimentshaveshown,thatreducingthesystemclockfrequencyto62%ofthemaximumpossiblefrequencynoCCFcanbein-jectedanymore.Increasedtimingmarginsrequirealongerfaultdurationtomakedelayfaultseffectivewhichmakeslogicalvoltagelevelfaultsoccurevenearlier.Voltagemonitor.Thevoltagemonitorturnedouttoof-feranexcellentmeasureagainstPSDingeneral,givenitiscombinedwithincreasedtimingmargins.IncaseofourPSDexperimentsitwasimpossibletoinjectfaultswithadurationsufﬁcienttooverstressthetimingmarginsatthenominalfrequencywithouttriggeringthevoltagemonitor.6ConclusionInthisworkwehaveexperimentallyassessedtheef-fectivenessofseveralcountermeasuresagainstpowersup-plyinducedcommoncausefaults.WehaveperformedphysicalfaultinjectiononanFPGAandontwoASICdualcorearchitectures.Anextensiveanalysishasshown,thattimediversityandvoltagemonitoringcombinedwithimprovedtimingmarginsprovideanexcellentprotectionagainstCCFs.Parityprotection,especiallyofthecriticalpathisanimportantcomplementarymeasure.AcloseexaminationofthetargetbehaviorrevealedtwodistincttypesoffaultmanifestationinreactiontoPSD,namelydelayfaultsandlogicfaults.Whilelogicfaultsprovedtobequiteeasilydetectableduetotheirglobalap-pearance,delayfaultscouldindeedbetracedastherootofCCFs.Thisﬁndingledtoseveralconclusions:Firstly,thereisawindowofcriticalPSDfaultdurationswithre-specttoCCFoccurrence;longerouttakesleadtomassiveandhenceeasilydetectableeffects,whileshorteronesdonotcauseanyerroratall.Secondly,increasedtimingmar-ginsprovideagoodprotectionagainstCCFs.Thedepen-denceofCCFobservationontheavailabletimingmarginscouldbeclearlydemonstrated.Withsufﬁcientlylargetim-ingmarginsthewindowofcriticalfaultdurationscanbeeffectivelyshortenedtozero.Thethirdﬁndingwasthat,sincedelayfaultstendtocreateerrorsinthecriticalpathﬁrst,anyasymmetryinthecriticalpathsofthereplicatedcoressubstantiallyreducestheprobabilityofCCFs.Infactthiseffectseemstobetheactualstrengthoftemporaldiver-sity,sincethenecessaryinsertionofdelaysoftenchangesthecriticalpaths.Acloserexaminationofthisissuewillbepartofourfuturework.AfurtherstepwillbetoextendthescopeofourworktodifferenttypesoffaultswhichcanleadtoCCFs,suchashightemperature,mechanicalstressandEMI.References[1]G.B.AllemanandJ.Gall.Faulttolerantsystemreliabilityinthepresenceofimperfectdiagnosticcoverage.TriconexCorp.,1989.[2]A.Bakhoda,S.Miremadi,andH.Zarandi.Experimen-talevaluationoftransienteffectsonSRAM-basedFPGAchips.The17thInternationalConferenceonMicroelectron-ics,ICM2005.,pages251–255,Dec2005.[3]J.Borcsok,S.Schaefer,andE.Ugljesa.Estimationandeval-uationofcommoncausefailures.SecondInternationalCon-ferenceonSystemsICONS2007,pages41–41,Apr2007.[4]F.Cristian.Understandingfault-tolerantdistributedsystems.CommunicationsoftheACM,34:56–78,1991.[5]M.Delvai.SPEARhandbook.TechnicalReport70/2002,ViennaUniversityofTechnology,EmbededComputingSystemsGroup,Vienna,Austria,2002.[6]IEC/EN61508.Functionalsafetyofelectrical/electronic/programmableelectronicsafety-relatedsystems(E/E/PES).1999-2002.[7]N.Kanekawa,T.Meguro,K.Isono,Y.Shima,N.Miyazaki,andS.Yamaguchi.Faultdetectionandrecoverycover-ageimprovementbyclocksynchronizedduplicatedsystemswithoptimaltimediversity.Twenty-EighthAnnualInter-nationalSymposiumonFault-TolerantComputing,1998.,pages196–200,Jun1998.[8]T.KottkeandA.Steininger.Agenericdual-corearchitec-ture.7thIEEEInternationalWorkshoponDesignandDiag-nosticsofElectronicCircuitsandSystems(DDECS2004),pages159–166,Apr2004.[9]T.KottkeandA.Steininger.Areconﬁgurablegenericdual-corearchitecture.InDSN’06:ProceedingsoftheInter-nationalConferenceonDependableSystemsandNetworks,pages45–54.IEEEComputerSociety,2006.[10]G.Mauri.Integratingsafetyanalysistechniques,supportingidentiﬁcationofcommoncausefailures.PhDthesis,Uni-versityofYork,DepartmentofComputerScience,2000.[11]G.Miremadi,J.Karlsson,U.Gunneﬂo,andJ.Torin.Twosoftwaretechniquesforon-lineerrordetection.Twenty-SecondInternationalSymposiumonFault-TolerantComput-ing,1992.FTCS-22,pages328–335,Jul1992.[12]A.Rajabzadeh,S.Miremadi,andM.Mohandespour.Ex-perimentalevaluationofmaster/checkerarchitectureusingpowersupply-andsoftware-basedfaultinjection.On-LineTestingSymposium,2004.IOLTS2004.Proceedings.10thIEEEInternational,pages239–244,Jul2004.[13]C.E.Salloum,A.Steininger,P.Tummeltshammer,andW.Harter.Recoverymechanismsfordualcorearchitec-tures.InDFT’06:Proceedingsofthe21stIEEEInterna-tionalSymposiumononDefectandFault-ToleranceinVLSISystems,pages380–388.IEEEComputerSociety,2006.