Deregister 3 
instances from 
the elastic load 
balancer; 
121.13 s2 
Deregister 12 
instances from 
the elastic load 
balancer; 
438.53 s2 
(Reparation) 
 (Direct Redo) 
3 
instances 
not 
terminated 
RP1, 
RP2, 
RP3, 
RP4, 
RP5, 
RP6, RP8 
Terminate 3 
instances again; 
(Reparation) 
957.19 s2 
Set auto scaling 
group’s desired 
capacity to be 
12; 
Wait for the 
auto scaling 
group to 
terminate 3 
instances; 
 (Direct Redo) 
998.24 s2 
Step 1. 
Deregister 
12 
instances 
from the 
elastic load 
balancer 
Step 2. 
Decrease 
auto scaling 
group’s 
desired 
capacity 
from 24 to 
12 
Step 3. 
Wait for the 
auto scaling 
group to 
terminate 
12 
instances. 
Recovery 
Point 1 
Recovery 
Point 2 
3)  Satisfying Recovery Requirement R3 
The recovery impact of the selected recovery action is the optimal/acceptable one, which means 
that  its  recovery  impact  is  relatively  small  compared  to  all  other  recovery  actions.  Such 
selection  and  optimization  mechanism  guarantees  that  the  recovery  impact  can  meet  the 
recovery impact objective set by stakeholders. Hence, the requirement that the recovery should 
reduce negative impact is achieved. 
D.  Recovery Reducing Monetary Cost 
1)  Experimental Procedure 
This recovery requirement concerns the monetary cost the recovery incurs on the cloud system. 
We  therefore  measure  recovery  monetary  cost  by  performing  the  scale-down  operation  on  a 
cloud  application.  There  are  initially  24  instances  in  the  cloud  application.  The  instances  are 
attached  to  an  auto  scaling  group  and  are  registered  in  an  elastic  load  balancer.  The  cloud 
application  running  in  the  instances  is  TPC-W  which  is  a  3-tier  web  benchmark  application 
running  in  Tomcat  service.  The  average  workload  on  each  instance  is  50  query  requests  per 
second.  We  used  our  own  proprietary  fault  injection  tool  to  inject  faults  for  each  of  the  two 
129 
determined  recovery  points  in  the  scale-down  operation,  automatically  determined  the 
applicable  recovery  patterns  based  on  the  applicable  recovery  patterns  filtering  method 
described in section 7.3, and performed recovery using the selected acceptable recovery action 
based on each of the two recovery action selection methods. The faults injected are described in 
Table  40. The  selection  of  injected  faults  is  based  on  our  interviews  with  industry  and  failure 
reports, and hence representative. The recovery monetary cost is calculated by summing up the 
monetary  cost  incurred  by  each  step  in  the  recovery  action.  We  ran  the  experiment  30  times, 
measuring the average recovery monetary cost.  
Table 40.  Faults injected for Scale-down Operation 
Recovery Point 
Fault injected 
Recovery Point 1 (After Step 1) 
3 instances still in ELB  
Recovery Point 2 (After Step 3) 
3 instances not terminated 
2)  Experimental Results 
Table 41.  Recovery Monetary Cost for Scale-down 
Legends 
Recovery Pattern ID 
Recovery Pattern 
Recovery Pattern ID 
Recovery Pattern 
RP1 
RP2 
RP3 
RP4 
Compensated Undo & Redo 
Compensated Undo & Alternative 
Rewind & Replay 
Rewind & Alternative 
RP5 
RP6 
RP7 
RP8 
Reparation 
Direct Redo 
Direct Alternative 
Farther Undo & Redo 
Recovery 
Process 
Point 
Step 
Errors 
Applicable 
Recovery 
Patterns 
Monetary 
Cost (User 
Constraints) 
$0 
$0 
Selected 
Recovery 
Action(Pareto 
Set) 
Deregister 3 
instances from 
the elastic load 
balancer; 
Monetary 
Cost 
(Pareto Set) 
$0 
Selected 
Recovery 
Action(User 
Constraints) 
Deregister 12 
instances from 
the elastic load 
balancer; 
(Reparation) 
 (Direct Redo) 
3 
instances 
still 
ELB  
in 
RP1, RP3, 
RP5, RP6 
3 
instances 
not 
terminate
d 
RP1, RP2, 
RP3, RP4, 
RP5, RP6, 
RP8 
Terminate 3 
instances again; 
$0 
(Reparation) 
Set auto scaling 
group’s desired 
capacity to be 
12; 
Wait for the 
auto scaling 
group to 
terminate 3 
instances; 
 (Direct Redo) 
Step 1. 
Deregister 
12 instances 
from the 
elastic load 
balancer 
Step 2. 
Decrease 
auto scaling 
group’s 
desired 
capacity 
from 24 to 
12 
Step 3. Wait 
for the auto 
scaling 
group to 
terminate 12 
instances. 
Recovery 
Point 1 
Recovery 
Point 2 
Table 41 shows the recovery  monetary cost of the recovery for the scale-down operation. The 
recovery monetary cost in the table represents the average value of the recovery monetary cost 
130 
for 30 runs. The relative standard deviation is 0%. For each recovery point, the monetary cost of 
the  recovery  action  selected  by  the  Pareto  set  search  based  optimization  method  is  no  greater 
than the other applicable recovery actions; the monetary cost of the selected recovery action by 
the user constraints based optimization method is not necessarily less than all the other ones, but 
it is within the monetary cost constraint set by business stakeholders. 
3)  Satisfying Recovery Requirement R4 
The recovery monetary cost of the selected recovery action is the optimal/acceptable one, which 
means that its recovery monetary cost is relatively small compared to all other recovery actions. 
Such  selection  and  optimization  mechanism  guarantees  that  the  recovery  monetary  cost  can 
meet the recovery monetary cost objective set by stakeholders. Hence, the requirement that the 
recovery should reduce monetary cost is achieved. 
E.  Recovery from Errors without Known Causes  
1)  Experimental Procedure 
POD-Recovery does not require a known cause: its recovery plan generation dynamically finds 
a  plan  from  the  current  erroneous  state  to  a  desired  state  –  be  it  a  captured  earlier  state  or  an 
expected future state. To study this aspect in detail, we performed additional experiments with 
other  faults.  We  ran  scale-down,  injected  various  faults,  and  triggered  recovery  without 
providing the error causes. Per type of injected fault, we performed 30 runs. 
2)  Experimental Results 
Table  42  summarizes  the  results  of  these  experiments,  by  showing  the  number  of  successful 
recoveries for each injected fault. As can be seen, recovery is successful for all injected faults. 
Table 42.  Recovery without Known Causes 
Recovery Point  Error Occurred 
Fault Injected 
(Cause) 
# Successful 
Recoveries 
Recovery Point 1 
3  instances  still 
in ELB  
Recovery Point 2 
3  instances  not 
terminated 
“DeregisterInstances
FromELB” call fails 
Other team reattaches 
the instances to ELB 
Auto  Scaling  Group 
not functioning 
Other team reattaches 
3 instances to ASG 
131 
30 
30 
30 
30 
3)  Satisfying Recovery Requirement R5 
Due  to  the  dynamic  recovery  plan  generation,  our  method  can  recover  from  errors  without 
known cause – as long as the error cause is included in the resource space and can be recovered 
through API calls. If the cause is not included or the API cannot be reached (e.g. cloud system 
disconnected), our method cannot recover from the error. Hence, the cause of the error does not 
affect the recovery although it may affect whether the error remains or reoccurs. 
F.  Dealing with False Positives of Error Detection 
1)  Experimental Procedure 
To  test  the  reaction  of  POD-Recovery  to  false  positives  of  error  detection,  we  trigger  the 
recovery  service  without  injecting  an  error,  and  observe  whether  POD-Recovery  takes  any 
action.  For  each  recovery  point  (RP)  we  do  this  50  times.  Since  error  detection  triggers  the 
recovery  service,  and  since  POD-Recovery  does  not  consider  any  causes  offered  by  the 
triggering  message,  we  do  not  investigate  any  more  complex  false  positives.  Also,  as  argued 
above, if a transient error disappears before recovery starts, we consider it to be a false positive 
from the viewpoint of recovery. 
2)  Experimental Results 
Table 43 shows the recovery service’s ability to handle false positives from the error detection 
service. We can see that all the false positives were successfully detected: in all 100 runs of our 
experiment, no recovery action was taken. 
Table 43.  Handling False Positives of Error Detection 
Recovery Point 
# False Positives 
# No Recovery 
RP 1 