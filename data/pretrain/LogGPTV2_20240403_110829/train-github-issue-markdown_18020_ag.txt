                                            ^
    /home/user/backup/lichu/pytorch/torch/lib/THD/base/data_channels/DataChannelNccl.hpp:16:26: note: in definition of macro ‘NCCL_CHECK’
         ncclResult_t error = cmd;                                             \
                              ^
    /home/user/backup/lichu/pytorch/torch/lib/THD/base/data_channels/DataChannelNccl.cpp: In member function ‘thd::NcclResourcePair thd::DataChannelNccl::_getNcclResourcePair(std::vector&, THDGroup)’:
    /home/user/backup/lichu/pytorch/torch/lib/THD/base/data_channels/DataChannelNccl.cpp:295:29: error: ‘ncclGroupStart’ was not declared in this scope
       NCCL_CHECK(ncclGroupStart());
                                 ^
    /home/user/backup/lichu/pytorch/torch/lib/THD/base/data_channels/DataChannelNccl.hpp:16:26: note: in definition of macro ‘NCCL_CHECK’
         ncclResult_t error = cmd;                                             \
                              ^
    /home/user/backup/lichu/pytorch/torch/lib/THD/base/data_channels/DataChannelNccl.cpp:302:27: error: ‘ncclGroupEnd’ was not declared in this scope
       NCCL_CHECK(ncclGroupEnd());
                               ^
    /home/user/backup/lichu/pytorch/torch/lib/THD/base/data_channels/DataChannelNccl.hpp:16:26: note: in definition of macro ‘NCCL_CHECK’
         ncclResult_t error = cmd;                                             \
                              ^
    /home/user/backup/lichu/pytorch/torch/lib/THD/base/data_channels/DataChannelNccl.cpp: In member function ‘virtual void thd::DataChannelNccl::allReduce(std::vector&, THDReduceOp, THDGroup)’:
    /home/user/backup/lichu/pytorch/torch/lib/THD/base/data_channels/DataChannelNccl.cpp:417:29: error: ‘ncclGroupStart’ was not declared in this scope
       NCCL_CHECK(ncclGroupStart());
                                 ^
    /home/user/backup/lichu/pytorch/torch/lib/THD/base/data_channels/DataChannelNccl.hpp:16:26: note: in definition of macro ‘NCCL_CHECK’
         ncclResult_t error = cmd;                                             \
                              ^
    /home/user/backup/lichu/pytorch/torch/lib/THD/base/data_channels/DataChannelNccl.cpp:432:27: error: ‘ncclGroupEnd’ was not declared in this scope
       NCCL_CHECK(ncclGroupEnd());
                               ^
    /home/user/backup/lichu/pytorch/torch/lib/THD/base/data_channels/DataChannelNccl.hpp:16:26: note: in definition of macro ‘NCCL_CHECK’
         ncclResult_t error = cmd;                                             \
                              ^
    /home/user/backup/lichu/pytorch/torch/lib/THD/base/data_channels/DataChannelNccl.cpp: In member function ‘virtual void thd::DataChannelNccl::allGather(std::vector&, std::vector&, THDGroup)’:
    /home/user/backup/lichu/pytorch/torch/lib/THD/base/data_channels/DataChannelNccl.cpp:466:29: error: ‘ncclGroupStart’ was not declared in this scope
       NCCL_CHECK(ncclGroupStart());
                                 ^
    /home/user/backup/lichu/pytorch/torch/lib/THD/base/data_channels/DataChannelNccl.hpp:16:26: note: in definition of macro ‘NCCL_CHECK’
         ncclResult_t error = cmd;                                             \
                              ^
    /home/user/backup/lichu/pytorch/torch/lib/THD/base/data_channels/DataChannelNccl.cpp:473:27: error: invalid conversion from ‘void*’ to ‘int’ [-fpermissive]
             output[i].data_ptr(),
                               ^
    /home/user/backup/lichu/pytorch/torch/lib/THD/base/data_channels/DataChannelNccl.hpp:16:26: note: in definition of macro ‘NCCL_CHECK’
         ncclResult_t error = cmd;                                             \
                              ^
    /home/user/backup/lichu/pytorch/torch/lib/THD/base/data_channels/DataChannelNccl.cpp:474:23: error: invalid conversion from ‘int64_t {aka long int}’ to ‘ncclDataType_t’ [-fpermissive]
             input[i].numel(),
                           ^
    /home/user/backup/lichu/pytorch/torch/lib/THD/base/data_channels/DataChannelNccl.hpp:16:26: note: in definition of macro ‘NCCL_CHECK’
         ncclResult_t error = cmd;                                             \
                              ^
    /home/user/backup/lichu/pytorch/torch/lib/THD/base/data_channels/DataChannelNccl.cpp:477:15: error: cannot convert ‘ncclDataType_t’ to ‘void*’ for argument ‘4’ to ‘ncclResult_t ncclAllGather(const void*, int, ncclDataType_t, void*, ncclComm_t, cudaStream_t)’
             stream));
                   ^
    /home/user/backup/lichu/pytorch/torch/lib/THD/base/data_channels/DataChannelNccl.hpp:16:26: note: in definition of macro ‘NCCL_CHECK’
         ncclResult_t error = cmd;                                             \
                              ^
    /home/user/backup/lichu/pytorch/torch/lib/THD/base/data_channels/DataChannelNccl.cpp:480:27: error: ‘ncclGroupEnd’ was not declared in this scope
       NCCL_CHECK(ncclGroupEnd());
                               ^
    /home/user/backup/lichu/pytorch/torch/lib/THD/base/data_channels/DataChannelNccl.hpp:16:26: note: in definition of macro ‘NCCL_CHECK’
         ncclResult_t error = cmd;                                             \
                              ^
    /home/user/backup/lichu/pytorch/torch/lib/THD/base/data_channels/DataChannelNccl.cpp: In member function ‘virtual void thd::DataChannelNccl::reduce(std::vector&, THDReduceOp, thd::rank_type, THDGroup)’:
    /home/user/backup/lichu/pytorch/torch/lib/THD/base/data_channels/DataChannelNccl.cpp:516:29: error: ‘ncclGroupStart’ was not declared in this scope
       NCCL_CHECK(ncclGroupStart());
                                 ^
    /home/user/backup/lichu/pytorch/torch/lib/THD/base/data_channels/DataChannelNccl.hpp:16:26: note: in definition of macro ‘NCCL_CHECK’
         ncclResult_t error = cmd;                                             \
                              ^
    /home/user/backup/lichu/pytorch/torch/lib/THD/base/data_channels/DataChannelNccl.cpp:532:27: error: ‘ncclGroupEnd’ was not declared in this scope
       NCCL_CHECK(ncclGroupEnd());
                               ^
    /home/user/backup/lichu/pytorch/torch/lib/THD/base/data_channels/DataChannelNccl.hpp:16:26: note: in definition of macro ‘NCCL_CHECK’
         ncclResult_t error = cmd;                                             \
                              ^
    /home/user/backup/lichu/pytorch/torch/lib/THD/base/data_channels/DataChannelNccl.cpp: In member function ‘virtual void thd::DataChannelNccl::broadcast(std::vector&, thd::rank_type, THDGroup)’:
    /home/user/backup/lichu/pytorch/torch/lib/THD/base/data_channels/DataChannelNccl.cpp:568:29: error: ‘ncclGroupStart’ was not declared in this scope
       NCCL_CHECK(ncclGroupStart());
                                 ^
    /home/user/backup/lichu/pytorch/torch/lib/THD/base/data_channels/DataChannelNccl.hpp:16:26: note: in definition of macro ‘NCCL_CHECK’
         ncclResult_t error = cmd;                                             \
                              ^
    /home/user/backup/lichu/pytorch/torch/lib/THD/base/data_channels/DataChannelNccl.cpp:582:27: error: ‘ncclGroupEnd’ was not declared in this scope
       NCCL_CHECK(ncclGroupEnd());
                               ^
    /home/user/backup/lichu/pytorch/torch/lib/THD/base/data_channels/DataChannelNccl.hpp:16:26: note: in definition of macro ‘NCCL_CHECK’
         ncclResult_t error = cmd;                                             \
                              ^
    [ 57%] Linking CXX shared library ../../../../lib/libshm.so
    [ 57%] Built target shm
    [ 57%] Building NVCC (Device) object caffe2/CMakeFiles/caffe2_gpu.dir/operators/caffe2_gpu_generated_copy_op.cu.o
    [ 57%] Building NVCC (Device) object caffe2/CMakeFiles/caffe2_gpu.dir/operators/caffe2_gpu_generated_reduction_ops.cu.o
    [ 57%] Building NVCC (Device) object caffe2/CMakeFiles/caffe2_gpu.dir/operators/caffe2_gpu_generated_max_pool_with_index.cu.o
    [ 57%] Building NVCC (Device) object caffe2/CMakeFiles/caffe2_gpu.dir/operators/caffe2_gpu_generated_multi_class_accuracy_op.cu.o
    caffe2/torch/lib/THD/CMakeFiles/THD.dir/build.make:278: recipe for target 'caffe2/torch/lib/THD/CMakeFiles/THD.dir/base/data_channels/DataChannelNccl.cpp.o' failed
    make[2]: *** [caffe2/torch/lib/THD/CMakeFiles/THD.dir/base/data_channels/DataChannelNccl.cpp.o] Error 1
    make[2]: *** Waiting for unfinished jobs....
    [ 57%] Building NVCC (Device) object caffe2/CMakeFiles/caffe2_gpu.dir/operators/caffe2_gpu_generated_lengths_tile_op.cu.o
    [ 57%] Building NVCC (Device) object caffe2/CMakeFiles/caffe2_gpu.dir/operators/caffe2_gpu_generated_softsign_op.cu.o
    [ 57%] Building NVCC (Device) object caffe2/CMakeFiles/caffe2_gpu.dir/operators/caffe2_gpu_generated_cosh_op.cu.o
    [ 57%] Building NVCC (Device) object caffe2/CMakeFiles/caffe2_gpu.dir/operators/caffe2_gpu_generated_transpose_op.cu.o
    [ 57%] Linking CXX shared library ../../lib/libcaffe2_module_test_dynamic.so
    [ 57%] Built target caffe2_module_test_dynamic
    [ 57%] Building NVCC (Device) object caffe2/CMakeFiles/caffe2_gpu.dir/operators/caffe2_gpu_generated_piecewise_linear_transform_op.cu.o
    [ 57%] Linking CXX shared library ../../lib/libcaffe2_observers.so
    [ 57%] Built target caffe2_observers
    [ 57%] Building NVCC (Device) object caffe2/CMakeFiles/caffe2_gpu.dir/operators/caffe2_gpu_generated_selu_op.cu.o
    CMakeFiles/Makefile2:9972: recipe for target 'caffe2/torch/lib/THD/CMakeFiles/THD.dir/all' failed
    make[1]: *** [caffe2/torch/lib/THD/CMakeFiles/THD.dir/all] Error 2
    make[1]: *** Waiting for unfinished jobs....
    [ 57%] Building NVCC (Device) object caffe2/CMakeFiles/caffe2_gpu.dir/operators/caffe2_gpu_generated_lengths_pad_op.cu.o
    /home/user/backup/lichu/pytorch/caffe2/core/context_gpu.cu(24): warning: function "c10::::C10FlagParser_caffe2_cuda_memory_pool::C10FlagParser_caffe2_cuda_memory_pool(const std::__cxx11::string &)" was declared but never referenced
    /home/user/backup/lichu/pytorch/caffe2/core/context_gpu.cu(32): warning: function "c10::::C10FlagParser_caffe2_cub_bin_growth::C10FlagParser_caffe2_cub_bin_growth(const std::__cxx11::string &)" was declared but never referenced
    /home/user/backup/lichu/pytorch/caffe2/core/context_gpu.cu(37): warning: function "c10::::C10FlagParser_caffe2_cub_min_bin::C10FlagParser_caffe2_cub_min_bin(const std::__cxx11::string &)" was declared but never referenced
    /home/user/backup/lichu/pytorch/caffe2/core/context_gpu.cu(42): warning: function "c10::::C10FlagParser_caffe2_cub_max_bin::C10FlagParser_caffe2_cub_max_bin(const std::__cxx11::string &)" was declared but never referenced
    /home/user/backup/lichu/pytorch/caffe2/core/context_gpu.cu(47): warning: function "c10::::C10FlagParser_caffe2_cub_max_managed_mb::C10FlagParser_caffe2_cub_max_managed_mb(const std::__cxx11::string &)" was declared but never referenced
    /home/user/backup/lichu/pytorch/caffe2/core/context_gpu.cu(53): warning: function "c10::::C10FlagParser_caffe2_cub_print_allocation_events::C10FlagParser_caffe2_cub_print_allocation_events(const std::__cxx11::string &)" was declared but never referenced
    /home/user/backup/lichu/pytorch/caffe2/core/context_gpu.cu(59): warning: function "c10::::C10FlagParser_caffe2_gpu_memory_tracking::C10FlagParser_caffe2_gpu_memory_tracking(const std::__cxx11::string &)" was declared but never referenced
    /home/user/backup/lichu/pytorch/caffe2/core/context_gpu.cu(63): warning: function "c10::::C10FlagParser_caffe2_gpu_memory_report_interval_mb::C10FlagParser_caffe2_gpu_memory_report_interval_mb(const std::__cxx11::string &)" was declared but never referenced
    [ 57%] Building NVCC (Device) object caffe2/CMakeFiles/caffe2_gpu.dir/operators/caffe2_gpu_generated_roi_align_gradient_op.cu.o
    [ 57%] Building NVCC (Device) object caffe2/CMakeFiles/caffe2_gpu.dir/operators/caffe2_gpu_generated_tile_op.cu.o
    [ 57%] Building NVCC (Device) object caffe2/CMakeFiles/caffe2_gpu.dir/operators/caffe2_gpu_generated_sparse_normalize_op_gpu.cu.o
    [ 57%] Building NVCC (Device) object caffe2/CMakeFiles/caffe2_gpu.dir/operators/caffe2_gpu_generated_softmax_ops.cu.o
    [ 57%] Building NVCC (Device) object caffe2/CMakeFiles/caffe2_gpu.dir/operators/caffe2_gpu_generated_loss_op.cu.o
    [ 57%] Building NVCC (Device) object caffe2/CMakeFiles/caffe2_gpu.dir/operators/caffe2_gpu_generated_resize_op.cu.o
    [ 57%] Building NVCC (Device) object caffe2/CMakeFiles/caffe2_gpu.dir/operators/caffe2_gpu_generated_elementwise_linear_op.cu.o
    [ 58%] Building NVCC (Device) object caffe2/CMakeFiles/caffe2_gpu.dir/operators/caffe2_gpu_generated_cbrt_op.cu.o
    [ 58%] Building NVCC (Device) object caffe2/CMakeFiles/caffe2_gpu.dir/operators/caffe2_gpu_generated_sinh_op.cu.o
    [ 58%] Building NVCC (Device) object caffe2/CMakeFiles/caffe2_gpu.dir/operators/caffe2_gpu_generated_floor_op.cu.o
    [ 58%] Building NVCC (Device) object caffe2/CMakeFiles/caffe2_gpu.dir/operators/caffe2_gpu_generated_assert_op.cu.o
    [ 58%] Building NVCC (Device) object caffe2/CMakeFiles/caffe2_gpu.dir/operators/caffe2_gpu_generated_atan_op.cu.o
    [ 58%] Building NVCC (Device) object caffe2/CMakeFiles/caffe2_gpu.dir/operators/caffe2_gpu_generated_pow_op.cu.o
    [ 58%] Building NVCC (Device) object caffe2/CMakeFiles/caffe2_gpu.dir/operators/caffe2_gpu_generated_channel_backprop_stats_op.cu.o