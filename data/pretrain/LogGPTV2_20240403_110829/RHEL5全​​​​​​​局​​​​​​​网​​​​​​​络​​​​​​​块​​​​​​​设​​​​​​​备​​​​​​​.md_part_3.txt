# [⁠]{#ch-gnbd-multipath.html#ch-gnbd-multipath}第 2 章 考​​​​​​​虑​​​​​​​在​​​​​​​设​​​​​​​备​​​​​​​映​​​​​​​射​​​​​​​器​​​​​​​多​​​​​​​路​​​​​​​径​​​​​​​中​​​​​​​使​​​​​​​用​​​​​​​ GNBD {.title}
:::
[]{#ch-gnbd-multipath.html#idm140101179413888 .indexterm}
::: para
带​​​​​​​设​​​​​​​备​​​​​​​映​​​​​​​射​​​​​​​器​​​​​​​多​​​​​​​路​​​​​​​径​​​​​​​的​​​​​​​ GNBD 允​​​​​​​许​​​​​​​您​​​​​​​配​​​​​​​置​​​​​​​多​​​​​​​个​​​​​​​ GNBD 服​​​​​​​务​​​​​​​器​​​​​​​节​​​​​​​点​​​​​​​（将​​​​​​​ GNBD 导​​​​​​​出​​​​​​​到​​​​​​​
GFS 节​​​​​​​点​​​​​​​的​​​​​​​节​​​​​​​点​​​​​​​）来​​​​​​​为​​​​​​​存​​​​​​​储​​​​​​​设​​​​​​​备​​​​​​​提​​​​​​​供​​​​​​​冗​​​​​​​余​​​​​​​路​​​​​​​径​​​​​​​。​​​​​​​GNBD 服​​​​​​​务​​​​​​​器​​​​​​​节​​​​​​​点​​​​​​​依​​​​​​​次​​​​​​​通​​​​​​​过​​​​​​​冗​​​​​​​余​​​​​​​
GNBD 为​​​​​​​ GFS 节​​​​​​​点​​​​​​​显​​​​​​​示​​​​​​​多​​​​​​​存​​​​​​​储​​​​​​​路​​​​​​​径​​​​​​​。​​​​​​​当​​​​​​​使​​​​​​​用​​​​​​​带​​​​​​​设​​​​​​​备​​​​​​​映​​​​​​​射​​​​​​​器​​​​​​​多​​​​​​​路​​​​​​​径​​​​​​​的​​​​​​​ GNBD
时​​​​​​​，如​​​​​​​果​​​​​​​某​​​​​​​个​​​​​​​ GNBD 服​​​​​​​务​​​​​​​器​​​​​​​节​​​​​​​点​​​​​​​不​​​​​​​可​​​​​​​用​​​​​​​，另​​​​​​​一​​​​​​​个​​​​​​​ GNBD
服​​​​​​​务​​​​​​​器​​​​​​​节​​​​​​​点​​​​​​​就​​​​​​​提​​​​​​​供​​​​​​​可​​​​​​​访​​​​​​​问​​​​​​​存​​​​​​​储​​​​​​​设​​​​​​​备​​​​​​​的​​​​​​​ GFS 节​​​​​​​点​​​​​​​。​​​​​​​
:::
::: para
如​​​​​​​果​​​​​​​您​​​​​​​正​​​​​​​在​​​​​​​使​​​​​​​用​​​​​​​带​​​​​​​设​​​​​​​备​​​​​​​映​​​​​​​射​​​​​​​器​​​​​​​多​​​​​​​路​​​​​​​径​​​​​​​的​​​​​​​ GNBD，您​​​​​​​需​​​​​​​要​​​​​​​考​​​​​​​虑​​​​​​​以​​​​​​​下​​​​​​​几​​​​​​​点​​​​​​​：
:::
::: {.itemizedlist xmlns:d="http://docbook.org/ns/docbook"}
-   ::: para
    Linux page caching, as desribed in [第 2.1 节 "Linux
    页​​​​​​​面​​​​​​​缓​​​​​​​存​​​​​​​"](#ch-gnbd-multipath.html#s1-gnbd-mp-lpc){.xref}.
    :::
-   ::: para
    Fencing GNBD server nodes, as described in [第 2.2 节 "栅​​​​​​​栏​​​​​​​ GNBD
    服​​​​​​​务​​​​​​​器​​​​​​​节​​​​​​​点​​​​​​​"](#ch-gnbd-multipath.html#s1-gnbd-mp-sn){.xref}.
    :::
-   ::: para
    GNBD device names; export names for GNBD devices must be unique.
    Additionally, you must specify the `-u`{.option} or `-U`{.option}
    when using the `gnbd_export`{.command} command. Exporting GNBD
    devices is described in [第 3 章 *GNBD
    驱​​​​​​​动​​​​​​​程​​​​​​​序​​​​​​​及​​​​​​​命​​​​​​​令​​​​​​​用​​​​​​​法​​​​​​​*](#ch-driver-command.html){.xref}.
    :::
:::
::: section
::: titlepage
# [⁠]{#ch-gnbd-multipath.html#s1-gnbd-mp-lpc}2.1. Linux 页​​​​​​​面​​​​​​​缓​​​​​​​存​​​​​​​ {.title}
:::
[]{#ch-gnbd-multipath.html#idm140101190553856
.indexterm}[]{#ch-gnbd-multipath.html#idm140101182250352 .indexterm}
::: para
For GNBD with device-mapper multipath, do [*not*]{.emphasis} specify
Linux page caching (the `-c`{.option} option of the
`gnbd_export`{.command} command). All GNBDs that are part of a logical
volume must run with caching [*disabled*]{.emphasis}. Data corruption
occurs if the GNBDs are run with caching enabled. Refer to [第 3.1 节
"从​​​​​​​服​​​​​​​务​​​​​​​器​​​​​​​中​​​​​​​导​​​​​​​出​​​​​​​ GNBD"](#ch-driver-command.html#s2-gnbd-svrexport){.xref}
for more information about using the `gnbd_export`{.command} command for
GNBD with device-mapper multipath.
:::
:::
::: section
::: titlepage
# [⁠]{#ch-gnbd-multipath.html#s1-gnbd-mp-sn}2.2. 栅​​​​​​​栏​​​​​​​ GNBD 服​​​​​​​务​​​​​​​器​​​​​​​节​​​​​​​点​​​​​​​ {.title}
:::
[]{#ch-gnbd-multipath.html#idm140101181155152
.indexterm}[]{#ch-gnbd-multipath.html#idm140101186823584 .indexterm}
::: para
必​​​​​​​须​​​​​​​使​​​​​​​用​​​​​​​防​​​​​​​护​​​​​​​法​​​​​​​物​​​​​​​理​​​​​​​删​​​​​​​除​​​​​​​来​​​​​​​自​​​​​​​网​​​​​​​络​​​​​​​的​​​​​​​节​​​​​​​点​​​​​​​对​​​​​​​ GNBD
服​​​​​​​务​​​​​​​器​​​​​​​节​​​​​​​点​​​​​​​进​​​​​​​行​​​​​​​防​​​​​​​护​​​​​​​。​​​​​​​要​​​​​​​物​​​​​​​理​​​​​​​删​​​​​​​除​​​​​​​ GNBD
服​​​​​​​务​​​​​​​器​​​​​​​节​​​​​​​点​​​​​​​，您​​​​​​​可​​​​​​​以​​​​​​​使​​​​​​​用​​​​​​​栅​​​​​​​栏​​​​​​​设​​​​​​​备​​​​​​​：以​​​​​​​下​​​​​​​[*除​​​​​​​外​​​​​​​*]{.emphasis}：`fence_brocade`{.command}
防​​​​​​​护​​​​​​​代​​​​​​​理​​​​​​​、​​​​​​​`fence_vixel`{.command} 防​​​​​​​护​​​​​​​代​​​​​​​理​​​​​​​、​​​​​​​`fence_mcdata`{.command}
防​​​​​​​护​​​​​​​代​​​​​​​理​​​​​​​、​​​​​​​`fence_sanbox2`{.command} 防​​​​​​​护​​​​​​​代​​​​​​​理​​​​​​​、​​​​​​​`fence_scsi`{.command}
防​​​​​​​护​​​​​​​代​​​​​​​理​​​​​​​。​​​​​​​另​​​​​​​外​​​​​​​，您​​​​​​​[*不​​​​​​​能​​​​​​​*]{.emphasis}使​​​​​​​用​​​​​​​ GNBD
防​​​​​​​护​​​​​​​设​​​​​​​备​​​​​​​（`fence_gnbd`{.command} 防​​​​​​​护​​​​​​​代​​​​​​​理​​​​​​​）来​​​​​​​防​​​​​​​护​​​​​​​ GNB 服​​​​​​​务​​​​​​​器​​​​​​​节​​​​​​​点​​​​​​​。​​​​​​​有​​​​​​​关​​​​​​​为​​​​​​​
GNB的​​​​​​​服​​​​​​​务​​​​​​​器​​​​​​​节​​​​​​​点​​​​​​​配​​​​​​​置​​​​​​​防​​​​​​​护​​​​​​​的​​​​​​​详​​​​​​​情​​​​​​​请​​​​​​​参​​​​​​​考​​​​​​​*《​​​​​​​全​​​​​​​局​​​​​​​文​​​​​​​件​​​​​​​系​​​​​​​统​​​​​​​》​​​​​​​*手​​​​​​​册​​​​​​​。​​​​​​​
:::
:::
:::
[]{#ch-driver-command.html}
::: chapter
::: titlepage
# [⁠]{#ch-driver-command.html#ch-driver-command}第 3 章 GNBD 驱​​​​​​​动​​​​​​​程​​​​​​​序​​​​​​​及​​​​​​​命​​​​​​​令​​​​​​​用​​​​​​​法​​​​​​​ {.title}
:::
[]{#ch-driver-command.html#idm140101194052752
.indexterm}[]{#ch-driver-command.html#idm140101167387024
.indexterm}[]{#ch-driver-command.html#idm140101177717536 .indexterm}
::: para
全​​​​​​​局​​​​​​​网​​​​​​​络​​​​​​​块​​​​​​​设​​​​​​​备​​​​​​​（GNBD）驱​​​​​​​动​​​​​​​程​​​​​​​序​​​​​​​允​​​​​​​许​​​​​​​节​​​​​​​点​​​​​​​作​​​​​​​为​​​​​​​一​​​​​​​个​​​​​​​ GNBD
通​​​​​​​过​​​​​​​网​​​​​​​络​​​​​​​导​​​​​​​出​​​​​​​其​​​​​​​本​​​​​​​地​​​​​​​存​​​​​​​储​​​​​​​，以​​​​​​​便​​​​​​​网​​​​​​​络​​​​​​​中​​​​​​​的​​​​​​​其​​​​​​​它​​​​​​​节​​​​​​​点​​​​​​​可​​​​​​​共​​​​​​​享​​​​​​​此​​​​​​​存​​​​​​​储​​​​​​​。​​​​​​​导​​​​​​​入​​​​​​​ GNBD
的​​​​​​​客​​​​​​​户​​​​​​​端​​​​​​​节​​​​​​​点​​​​​​​可​​​​​​​象​​​​​​​使​​​​​​​用​​​​​​​其​​​​​​​它​​​​​​​块​​​​​​​设​​​​​​​备​​​​​​​一​​​​​​​样​​​​​​​使​​​​​​​用​​​​​​​它​​​​​​​。​​​​​​​在​​​​​​​多​​​​​​​客​​​​​​​户​​​​​​​端​​​​​​​中​​​​​​​导​​​​​​​入​​​​​​​ GNBD
可​​​​​​​形​​​​​​​成​​​​​​​共​​​​​​​享​​​​​​​存​​​​​​​储​​​​​​​配​​​​​​​置​​​​​​​，通​​​​​​​过​​​​​​​该​​​​​​​共​​​​​​​享​​​​​​​存​​​​​​​储​​​​​​​配​​​​​​​置​​​​​​​可​​​​​​​使​​​​​​​用​​​​​​​ GFS。​​​​​​​
:::
::: para
GNBD 驱​​​​​​​动​​​​​​​程​​​​​​​序​​​​​​​是​​​​​​​通​​​​​​​过​​​​​​​以​​​​​​​下​​​​​​​组​​​​​​​件​​​​​​​实​​​​​​​施​​​​​​​的​​​​​​​。​​​​​​​
:::
::: {.itemizedlist xmlns:d="http://docbook.org/ns/docbook"}
-   ::: para
    `gnbd_serv`{.filename} --- 部​​​​​​​署​​​​​​​ GNBD
    服​​​​​​​务​​​​​​​器​​​​​​​。​​​​​​​它​​​​​​​是​​​​​​​一​​​​​​​个​​​​​​​用​​​​​​​户​​​​​​​空​​​​​​​间​​​​​​​守​​​​​​​护​​​​​​​进​​​​​​​程​​​​​​​，允​​​​​​​许​​​​​​​节​​​​​​​点​​​​​​​通​​​​​​​过​​​​​​​网​​​​​​​络​​​​​​​导​​​​​​​出​​​​​​​本​​​​​​​地​​​​​​​存​​​​​​​储​​​​​​​。​​​​​​​
    :::
-   ::: para
    `gnbd.ko`{.filename} --- 在​​​​​​​ GNBD 客​​​​​​​户​​​​​​​端​​​​​​​（使​​​​​​​用​​​​​​​ GNBD
    设​​​​​​​备​​​​​​​的​​​​​​​节​​​​​​​点​​​​​​​）中​​​​​​​部​​​​​​​署​​​​​​​ GNBD 设​​​​​​​备​​​​​​​驱​​​​​​​动​​​​​​​程​​​​​​​序​​​​​​​。​​​​​​​
    :::
:::
::: para
可​​​​​​​用​​​​​​​来​​​​​​​配​​​​​​​置​​​​​​​ GNBD 的​​​​​​​两​​​​​​​个​​​​​​​命​​​​​​​令​​​​​​​：
:::
::: {.itemizedlist xmlns:d="http://docbook.org/ns/docbook"}
-   ::: para
    []{#ch-driver-command.html#idm140101169956544 .indexterm}
    `gnbd_export`{.command} (for servers) --- User program for creating,
    exporting, and managing GNBDs on a GNBD server.
    :::
-   []{#ch-driver-command.html#idm140101183266320 .indexterm}
    ::: para
    `gnbd_import`{.command}（用​​​​​​​于​​​​​​​客​​​​​​​户​​​​​​​端​​​​​​​）--- 在​​​​​​​ GNBD 客​​​​​​​户​​​​​​​端​​​​​​​中​​​​​​​导​​​​​​​入​​​​​​​和​​​​​​​管​​​​​​​理​​​​​​​
    GNBD 的​​​​​​​用​​​​​​​户​​​​​​​程​​​​​​​序​​​​​​​。​​​​​​​
    :::
:::
::: section
::: titlepage
# [⁠]{#ch-driver-command.html#s2-gnbd-svrexport}3.1. 从​​​​​​​服​​​​​​​务​​​​​​​器​​​​​​​中​​​​​​​导​​​​​​​出​​​​​​​ GNBD {.title}
:::
[]{#ch-driver-command.html#idm140101173199920
.indexterm}[]{#ch-driver-command.html#idm140101194548544
.indexterm}[]{#ch-driver-command.html#idm140101194547264 .indexterm}
::: para
在​​​​​​​某​​​​​​​个​​​​​​​节​​​​​​​点​​​​​​​可​​​​​​​作​​​​​​​为​​​​​​​ GNBD 导​​​​​​​出​​​​​​​存​​​​​​​储​​​​​​​前​​​​​​​必​​​​​​​须​​​​​​​在​​​​​​​其​​​​​​​中​​​​​​​运​​​​​​​行​​​​​​​ `gnbd_serv`{.filename}
守​​​​​​​护​​​​​​​进​​​​​​​程​​​​​​​。​​​​​​​您​​​​​​​可​​​​​​​以​​​​​​​按​​​​​​​以​​​​​​​下​​​​​​​方​​​​​​​法​​​​​​​运​​​​​​​行​​​​​​​ `gnbd_serv`{.command} 启​​​​​​​动​​​​​​​
`gnbd_serv`{.filename}：
:::
``` screen
#gnbd_serv
gnbd_serv: startup succeeded
```
::: para
确​​​​​​​定​​​​​​​要​​​​​​​导​​​​​​​出​​​​​​​的​​​​​​​本​​​​​​​地​​​​​​​存​​​​​​​储​​​​​​​后​​​​​​​，可​​​​​​​使​​​​​​​用​​​​​​​ `gnbd_export`{.command} 命​​​​​​​令​​​​​​​导​​​​​​​出​​​​​​​它​​​​​​​。​​​​​​​
:::
::: {.note xmlns:d="http://docbook.org/ns/docbook"}
::: admonition_header
**备​​​​​​​注​​​​​​​**
:::
::: admonition
::: para
当​​​​​​​您​​​​​​​使​​​​​​​用​​​​​​​设​​​​​​​备​​​​​​​映​​​​​​​射​​​​​​​器​​​​​​​多​​​​​​​路​​​​​​​径​​​​​​​配​​​​​​​置​​​​​​​ GNBD
服​​​​​​​务​​​​​​​器​​​​​​​时​​​​​​​，您​​​​​​​一​​​​​​​定​​​​​​​不​​​​​​​能​​​​​​​使​​​​​​​用​​​​​​​页​​​​​​​面​​​​​​​缓​​​​​​​存​​​​​​​。​​​​​​​所​​​​​​​有​​​​​​​是​​​​​​​本​​​​​​​地​​​​​​​卷​​​​​​​一​​​​​​​部​​​​​​​分​​​​​​​的​​​​​​​ GNBD
必​​​​​​​须​​​​​​​在​​​​​​​禁​​​​​​​用​​​​​​​缓​​​​​​​存​​​​​​​的​​​​​​​情​​​​​​​况​​​​​​​下​​​​​​​运​​​​​​​行​​​​​​​。​​​​​​​默​​​​​​​认​​​​​​​情​​​​​​​况​​​​​​​是​​​​​​​ `gnbd_export`{.command}
命​​​​​​​令​​​​​​​导​​​​​​​出​​​​​​​时​​​​​​​缓​​​​​​​存​​​​​​​是​​​​​​​关​​​​​​​闭​​​​​​​的​​​​​​​。​​​​​​​
:::
:::
:::
::: {.note xmlns:d="http://docbook.org/ns/docbook"}
::: admonition_header
**注意**
:::
::: admonition
::: para