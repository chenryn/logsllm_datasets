# 2018上半年互联网恶意爬虫分析：从全景视角看爬虫与反爬虫
##### 译文声明
本文是翻译文章
译文仅供参考，具体内容表达以及含义原文为准。
导语：互联网最激烈的对抗战场，除了安全专家与黑客之间，大概就是爬虫与反爬虫领域了。据统计，爬虫流量早已超过了人类真实访问请求流量。互联网充斥着形形色色的爬虫，云上、传统行业都有不同规模的用户被爬虫爱好者盯上，这些爬虫从哪里来？爬取了谁的数据？数据将被用于何处？
近日，腾讯云发布2018上半年安全专题系列研究报告，该系列报告围绕云上用户最常遭遇的安全威胁展开，用数据统计揭露攻击现状，通过溯源还原攻击者手法，让企业用户与其他用户在应对攻击时有迹可循，并为其提供可靠的安全指南。本篇报告中，云鼎实验室通过部署的威胁感知系统，捕获到大量爬虫请求流量以及真实来源
IP，且基于2018年上半年捕获的数亿次爬虫请求，对互联网爬虫行为进行分析。
## 一、基本概念
### 爬虫是什么？
爬虫最早源于搜索引擎，它是一种按照一定的规则，自动从互联网上抓取信息的程序。
搜索引擎是善意的爬虫，它爬取网站的所有页面，提供给其他用户进行快速搜索和访问，给网站带来流量。为此，行业还达成了 Robots
君子协议，让互联网上的搜索与被搜索和谐相处。
原本双赢的局面，很快就被一些人破坏了，如同其他技术，爬虫也是一把双刃剑，变得不再“君子”。尤其是近年来“大数据”的概念，吸引了许多公司肆意爬取其他公司的数据，于是“恶意爬虫”开始充斥互联网。
本篇报告主要聚焦于“恶意爬虫”，不讨论搜索引擎爬虫及合法爬虫等。
### 爬虫的分类
按爬虫功能，可以分为网页爬虫和接口爬虫。
网页爬虫：以搜索引擎爬虫为主，根据网页上的超链接进行遍历爬取。
接口爬虫：通过精准构造特定 API 接口的请求数据，而获得大量数据信息。
按授权情况，可以分为合法爬虫和恶意爬虫。
合法爬虫：以符合 Robots 协议规范的行为爬取网页，或爬取网络公开接口，或购买接口授权进行爬取，均为合法爬虫，该类爬虫通常不用考虑反爬虫等对抗性工作。
恶意爬虫：通过分析并自行构造参数对非公开接口进行数据爬取或提交，获取对方本不愿意被大量获取的数据，并有可能给对方服务器性能造成极大损耗。此处通常存在爬虫和反爬虫的激烈交锋。
### 数据从哪来？
爬虫不生产数据，它们只是数据的搬运工。要研究爬虫，就得先研究数据的来源。尤其是对小型公司来说，往往需要更多外部数据辅助商业决策。如何在广袤的互联网中获取对自己有价值的数据，是许多公司一直考虑的问题。通常来说，存在以下几大数据来源：
➢ 企业产生的用户数据
如 BAT 等公司，拥有大量用户，每天用户都会产生海量的原始数据。
另外还包括 PGC （专业生产内容）和 UGC （用户生产内容）数据，如新闻、自媒体、微博、短视频等等。
➢ 政府、机构的公开数据
如统计局、工商行政、知识产权、银行证券等公开信息和数据。
➢ 第三方数据库购买
市场上有很多产品化的数据库，包括商业类和学术类，如 Bloomberg、 CSMAR、
Wind、知网等等，一般以公司的名义购买数据查询权限，比如咨询公司、高等院校、研究机构都会购买。
➢ 爬虫获取网络数据
使用爬虫技术，进行网页爬取，或通过公开和非公开的接口调用，获得数据。
➢ 公司间进行数据交换
不同公司间进行数据交换，彼此进行数据补全。
➢ 商业间谍或黑客窃取数据
通过内鬼渠道获取其他公司用户数据，或者利用黑客等非常规手段，通过定制入侵获取数据或地下黑市购买其他公司数据。此处内鬼泄漏远多于黑客窃取。
## 二、恶意爬虫的目标
从前面总结的数据来源看，第三方数据库购买或数据窃取的渠道都不涉及爬虫，真正属于恶意爬虫目标的，主要是互联网公司和政府相关部门的数据。
### 行业总体分布
通过对捕获的海量恶意爬虫流量进行标注，整理出恶意爬虫流量最大的行业 TOP 10 排行，详情如下：
由统计可见，出行类恶意爬虫流量占比高于电商与社交行业，居首位，其次是点评、运营商、公共行政等。接下来逐个行业进行分析：
**1\. 出行**
➢ 实时火车票信息
对火车购票平台的恶意爬虫访问占据了出行行业近90%的流量，浅析可知其实比较合理，几百个城市，几千趟列车构成国内铁路网，火车站与车次排列组合后是一个非常大的数据集，随着人工购票快速向互联网购票过渡，第三方代购和抢票服务商便越来越多，而任意一家要做到数据实时刷新，都需要不小的爬虫集群，因此导致火车票购买站点成为爬虫光顾最频繁的业务。
➢ 实时机票信息
机票类占据出行类8.77%的恶意爬虫流量，主要是爬取各大航空公司实时票价。
➢ 实时公交信息
主要爬取市内公交 GPS 信息。
➢ 实时共享单车信息
主要爬取特定区域周边的实时共享单车信息。
➢ 酒店空房信息
酒店爬取占比较少，主要是刷酒店房价，与交通类比较可忽略不计
**2\. 社交**
由于国内的社交平台多数以纯 APP 为主，部分社交平台并不支持网页功能，因此捕获到的社交类爬虫主要集中在微博类平台，以爬取用户信息和所发布的内容为主。
**3\. 电商**
电商行业爬虫主要是爬取商品信息和价格等数据，由于商业模式的差异，C2C 类电商由于中小卖家众多，商品数量远多于 B2C
类电商，支撑了电商类恶意爬虫近90%流量， B2C 类电商加起来占一成左右。
**4\. O2O**
O2O 行业恶意爬虫主要集中在点评类和团购类公司，其中以爬取商铺动态信息和星级评分信息的点评类数据为主，占总数的90%以上。
**5\. 公共行政**
公共行政类恶意爬虫主要集中在法院文书、知识产权、企业信息、信用信息等常规商业信息领域，而另一个受爬虫青睐的是挂号类平台，从数据来看应该是一些代挂号平台提供的抢号服务。