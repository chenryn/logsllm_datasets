title:Evaluation of VoIP Quality over WiBro
author:Mongnam Han and
Youngseok Lee and
Sue B. Moon and
Keon Jang and
Dooyoung Lee
Evaluation of VoIP Quality over WiBro
Mongnam Han1, Youngseok Lee2, Sue Moon1, Keon Jang1, and Dooyoung Lee1
2 School of Computer Science & Engineering, Chungnam National University
1 Computer Science Department, KAIST
Abstract. In this work, we have conducted experiments to evaluate
QoS of VoIP applications over the WiBro network. In order to capture
the baseline performance of the WiBro network we measure and ana-
lyze the characteristics of delay and throughput under stationary and
mobile scenarios. Then we evaluate QoS of VoIP applications using the
E–Model of ITU–T G.107. Our measurements show that the achievable
maximum throughputs are 5.3 Mbps in downlink and 2 Mbps in uplink.
VoIP quality is better than or at least as good as toll quality despite user
mobility exceeding the protected limit of WiBro mobility support. Using
RAS and sector identiﬁcation information, we show that the handoﬀ is
correlated with throughput and quality degradation.
1 Introduction
Recent emerging wireless networks such as 3G cellular and wireless LAN (WLAN)
allow users choices in accessing the Internet based on one’s need and cost. WLAN
with a high data rate (up to 54Mbps) supports low mobility and limited cover-
age. Cellular networks support high mobility with low bandwidth. The broadband
wireless access (BWA) systems address the market between WLAN and cellular
networks. Their goal is to support higher bandwidth than 3G cellular networks,
but less mobility for mobile end-user devices. The IEEE 802.16 family of standards
speciﬁes the air interface of ﬁxed and mobile BWA systems. WiMax is a subset of
the 802.16 standards whose main goal is product compatibility and interoperabil-
ity of BWA products, just as WiFi is to the 802.11 standards. WiBro has been
developed as a mobile BWA solution in Korea, and is generally considered a pre-
cursor to WiMax. It is a subset of consolidated version of IEEE Standard 802.16-
2004 (ﬁxed wireless speciﬁcations), P802.16e (enhancements to support mobility),
and P802.16-2004/Cor1 (corrections to IEEE Standard 802.16-2004). The pro-
ﬁles and test speciﬁcations of WiBro will be harmonized with WiMAX Forum’s
mobile WiMAX proﬁles and test speciﬁcation, drawing a convergence of the two
standards.
Today’s Internet users not only write emails and surf the web, but also make
Voice over IP (VoIP) calls, play online games, and watch streaming media. These
real-time applications have stringent Quality of Service (QoS) requirements on
delay and loss. WiMax and WiBro standards have deﬁned multiple service types
in order to guarantee diﬀerent levels of QoS. However, at the initial phase of
deployment, often only the best-eﬀort service is made available, while users do
M. Claypool and S. Uhlig (Eds.): PAM 2008, LNCS 4979, pp. 51–60, 2008.
c(cid:2) Springer-Verlag Berlin Heidelberg 2008
52
M. Han et al.
not limit themselves to emails and web surﬁng over emerging wireless technology
networks.
In this work, we conduct experiments to evaluate QoS of VoIP applications
over the WiBro network. In order to capture the baseline performance of the
WiBro network, we measure and analyze delay, loss, and throughput of constant
bit rate streams in both stationary and mobile scenarios. We have measured
maximum throuhgputs of 5.3 Mbps on downlink and 2 Mbps on uplink. Packet
loss and throughput exhibit more variability in the mobile scenario than station-
ary. Then we evaluate QoS of VoIP applications using the E–Model of ITU–T
G.107 also in both stationary and mobile scenarios. VoIP quality is better than
or at least as good as toll quality even in the mobile scenario. By combining
the packet traces with physical layer information, we show that the handoﬀ is
correlated with throughput and quality degradation on VoIP quality. We note
that the deployed WiBro network is lightly loaded.
The rest of this paper is organized as follows. In section 2, we describe the
background and related work. In Section 3, we describe our measurement ex-
periment setup in a WiBro network and present the VoIP quality evaluation
methodology. We present our analysis results in Section 4 and wrap up the pa-
per with a summary in Section 5.
2 Background and Related Work
Fixed WiMax was ﬁrst used to assist in the relief eﬀort for the 2004 tsunami
in Aceh, Indonesia, and now has more than 350 service providers around the
world [14]. WiBro, a mobile BWA service, had its public demonstration in De-
cember 2005, and has been in service since June 2006 in Korea. The network
architecture of WiBro in the phase I standardization [13] is shown in Figure 1.
The WiBro network consists of Access Control Routers (ACR), Radio Access
Stations (RAS), Personal Subscriber Stations (PSS), and the network service
provider’s IP network. An RAS is the interface between PSSs and the core net-
work at the physical layer and it also controls the radio resource at the data link
layer in conjunction with an ACR. One of the distinguishing features of WiBro
from cellular networks is that Internet Protocol (IP) is used beween an ACR and
RASs and also between ACRs. WiBro uses Time or Frequency Division Duplex-
ing (TDD or FDD) for duplexing and Orthogonal Frequency Division Multiple
Access (OFDAS) for robustness against fast fading and narrow-band co-channel
interference. So far, ﬁve service types have been proposed and incorporated into
802.16e: unsolicited grant service (UGS), real-time polling service (rtPS), ex-
tended real-time polling service (ertPS), non-realtime polling service (nrtPS),
and best eﬀort service (BE). However, only BE is used in current deployment in
Korea.
Ghosh et al. use a link-level simulation to analyze the 802.16 ﬁxed WiMax sys-
tem [4]. Cicconetti et al. analyze the eﬀectiveness of the 802.16 MAC protocol
for supporting QoS by simulation and evaluate various scheduling algorithms [1].
In [12], the authors evaluate UGS, rtPS, and ertPS scheduling algorithm in IEEE
Evaluation of VoIP Quality over WiBro
53
Fig. 1. Experimental environment over WiBro
802.16e system in OPNET simulation. Most of prior work focuses on investigat-
ing the performance at the physical layer and MAC layer largely through either
simulation or experiment with limited mobility. In this work, we focus on the end-
to-end performance at the application layer considering mobility in real life. Our
work is unique in that we focus on empirical measurements from a real deployed
network, world’s ﬁrst commercial deployment of the mobile WiMax technology.
3 Experiment Setup and Evaluation Methodology
We begin this section with a description of our measurement experiment setup.
Then in Section 3.2, we describe the ITU-T E-model for VoIP quality evaluation.
3.1 WiBro Performance Measurement
In Korea, KT launched WiBro coverage for nine subway lines in Seoul on April,
2007. The Seoul subway system moves millions of people a day through an exten-
sive network that reaches almost all corners within the city and major satellite
cities outside. The maximum speed of Seoul subway trains is 90 km/h, and it
takes about 1∼2 minutes between two stations. We have considered measure-
ment experiments in vehicles moving at or under 60 km/h, the upper limit of
WiBro, but chosen the subway, as it presents a more popular scenario with users.
Commuters in subway are more likely to use mobile devices than those in moving
vehicles, as the measurement experiment on a subway train is easier for us. We
have conducted our measurement experiments on subway line number 6. It has
38 stations over a total distance of 35.1 km and six RASs.
We have placed a mobile node (a laptop with a WiBro modem) in the WiBro
network and installed a stationary node (a desktop PC) connected to the Internet
over a ﬁxed line so that we could focus on the WiBro network performance. We
refer to the laptop as the Mobile Node (MN) and the PC as the Corresponding
Node (CN), and mark them as such in Figure 1. In order to place the CN as close
to the WiBro network as possible, we use a PC directly connected to a router
54
M. Han et al.
on Korea Research Environment Open Network (KREONET). It is a research
network that interconnects super computing centers in Korea and also is used
as a testbed for new networking technologies. It peers with KT’s IP backbone
network at one of KT’s exchange points.
For our measurement experiments, we generate two types of traﬃc: constant
bit rate (CBR) and VoIP. The diﬀerence between CBR and VoIP traﬃc lies in
the packet sending rate and follow-up analysis. For both types of traﬃc, we take
measurements when the MN is stationary and moving in a subway. We use iperf
for CBR traﬃc generation [6], and D-ITG [3] for VoIP traﬃc generation. We
conﬁgure D-ITG to measure round-trip time (RTT) instead of one-way delay,
as we could not instrument the MN in subway and CN at an exchange point to
have access to GPS-quality clock synchronization.
Multiple types of handoﬀ are possible in the WiBro network. An inter-ACR
handoﬀ takes longer than inter-RAS or inter-sector handoﬀ. An inter-sector
handoﬀ is between two sectors within an RAS. An RAS typically has three sec-
tors. Using a custom tool developed to monitor inter-sector and inter-RAS hand-
oﬀs, we collect RAS identiﬁers and corresponding sector identiﬁers. By aligning
the changes in RAS and sector identiﬁers with the measurement data, we can
pinpoint the moments of handoﬀs in our data.
3.2 VoIP Quality Evaluation
The classic way to evaluate speech quality is Mean Opinion Score (MOS) [9].
However, it is time consuming, costly, and not repeatable, as human experts
are involved in the evaluation. Perceptual Speech Quality Measure (PSQM) [10]
and Perceptual Evaluation of Speech Quality (PESQ) [11] are the most common
objective measurement methods for voice quality. Both still require a reference
signal to compare a degraded speech signal against and predict a MOS value.
They are called psychoacoustic models. The ITU–T E-model does not depend
on a reference signal, but uses a computational model to predict voice quality
directly from network measurements. The output of the E-model is a single value,
called an “R–factor”, derived from delays and equipment impairment factors.
The ITU-T G.107 [7] deﬁnes the relationship between the R factor and MOS as
below:
M OS =
⎧
⎨
⎩
1,
1 + 0.035R + R(R − 60) · (100 − R) · 7 · 10−6 For 0 < R < 100
4.5,
For R ≤ 0
For R ≥ 100
(1)
The E-model is based on a mathematical algorithm. Its individual transmission
parameters are transformed into diﬀerent individual “impairment factors” that
are assumed to be additive on a psychological scale. The algorithm of the E-
model also takes into account the combination eﬀects for those impairments in
the connection which occur simultaneously, as well as some masking eﬀects.
The R-factor calculated by the E-model ranges from 0 (poor) to 100 (excellent)
and can be obtained by the following expression,
R = Ro − Is − Id − Ie−ef f + A,
(2)
Evaluation of VoIP Quality over WiBro
55
where
Ro :
Is :
Basic signal-to-noise ratio
All impairments that occur more or less
simultaneously with the voice signal
Delay impairment factor
Id :
Ie−ef f : Eﬀective equipment impairment factor
caused by low bit-rate codec and
by packet loss on the network path
Advantage factor
A :
Cole et al. has reduced (2) to (3) after taking default values for those parameters
other than delay and loss [2].
R = 94.2 − Id − Ie−ef f
(3)
In this paper, we use (3) in our WiBro VoIP quality and apply Equations (5)
and (10) of [2] to translate one-way delay d and loss rate e to Id and Ie−ef f .
Id = 0.024d + 0.11(d − 177.3)H(d − 177.3)
where H(x) = 0, if x < 0, and H(x) = 1, if x ≥ 0
Ie−ef f = 0 + 30ln(1 + 15e)
(4)
(5)
(6)
4 Analysis
On October 5th and 6th, 2007, we took CBR and VoIP measurements in Seoul.
For stationary experiments, we placed the MN on KAIST Seoul campus. For
mobile experiments, we rode the Seoul subway line 6. For traﬃc logging, we
used windump at both the MN and CN. For the VoIP experiments, the MN and
CN also dumped log ﬁles including sequence numbers, packet departure times,
acknowledgement arrival times, and calculated round trip time. The complete
set of CBR and VoIP experiments are listed in Table 1
Table 1. The summary of CBR and VoIP experiments (upload/download)
Type Environment No of Exps. Duration (sec)
CBR Stationary
Stationary
120
300
300
300
300
Rate (Kbps)
1500∼2500 / 5000∼6000
2000 / 5300
2000 / 5300
64 / 64
64 / 64
Mobile
VoIP Stationary
Mobile
55 / 55
10 / 10
10 / 10
10 / 10
10 / 10
4.1 CBR Traﬃc Analysis
In order to capture the baseline performance of the WiBro network, we ﬁrst mea-
sure the maximum achievable throughput. We generated 5 Mbps up to 6 Mbps
and 1.5 Mbps up to 2.5 Mbps traﬃc in quantums of 100 Kbps for download
56
M. Han et al.
and upload, respectively, and found the bandwidth capped at about 5.3 Mbps
downlink and 2 Mbps uplink.
Then we set the transmission rate of our CBR traﬃc at 5.3 Mbps for downlink
and 2 Mbps for uplink with the packet size of 1460 bytes and saturated the link.
We conducted 10 sets of 300-second-long uploads and downloads. Due to limited
space, we present only the downlink performance. We ﬁrst plot the throughput
of CBR traﬃc over time and plot it in Figure 2. From 10 300-second-long sets,
we get a time span of 3000 seconds, which is the range on the x-axis. We use
a 5-second interval to compute the throughput. In Figure 2(a), we see that
the throughput remains almost constant when the MN is stationary. When the
MN is mobile, the throughput ﬂuctuates. We plot the inter-quartile dispersion of
throughput of both the stationary and mobile experiments in Figure 2(b). In the
stationary experiment, the inter-quartile range is so small that most 5-second
throughput values converge to 5.3 Mbps. In the mobile experiment, the inter-
quartile range spans from 4.1 Mbps to 5.1 Mbps, and has noticeably more points
below 3 Mbps. To view the dispersion of throughput in a more visually intuitive
way, we plot the variability in Figure 2(c) using the second-order diﬀerence plot.
The diﬀerence between two consecutive throughputs are plotted against that
between next two consecutive values. In this ﬁgure, the median from the center
of the mobile station is about 13 times larger than that of the stationary station.
The throughput of MN still remains consistently above 1 Mbps.
Next, we analyze the jitter and loss rates of CBR traﬃc. For this work, we
deﬁne jitter as the diﬀerence between sending intervals and arrival intervals.
Figure 3(a) depicts a cumulative distribution function (CDF) of CBR traﬃc
jitter. In both stationary and mobile experiments, more than 90% of jitters are
below 15 milliseconds. Given that our traﬃc by itself saturated the link, this
result is encouraging for real-time applications. Now we look at the loss rate of
our CBR traﬃc. In Figure 3(b) the loss rate in the mobile environment is much
higher than in stationary. In a WiBro network, a MAC layer retransmission
mechanism called Hybrid Auto Repeat reQuest (HARQ) is adopted to reduce
loss rate at the cost of increased delay. As our CBR traﬃc used UDP as an
underlying transport protocol and saturated the link, we expect the loss rates
to decrease once we lower the sending rate. We revisit the discussion of the loss
rate in the next section.
6000
5000
4000
3000
2000
1000
)
s
p
b
K
(
t
u
p
h
g
u
o
r
h
T
0
0
)
s
p
b
K
(
t
u
p
h
g