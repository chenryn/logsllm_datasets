User: How to use the iptables firewall to restrict the network access of the process on the Linux server?
Assistant: 1. Make sure iptables is installed and running: use the command `sudo service iptables status` to check the iptables status. If iptables is not installed or not running, it needs to be installed using `sudo apt-get install iptables` command. 2. View the current iptables rules: Use the command `sudo iptables -L` or `sudo iptables-save` to view the current iptables rules. 3. Add rules: Use the command `sudo iptables -A OUTPUT -m <matching condition> -j <action>` to add a rule, where OUTPUT represents the output stream, the matching condition can be IP address, protocol, port, etc., and the action can be DROP (discard) or REJECT (reject). For example, to restrict the process to only access port 80 of the local machine (127.0.0.1), you can use the following command: ```sudo iptables -A OUTPUT -p tcp --dport 80 -d 127.0.0.1 -j ACCEPT``` Other The function is: to allow traffic from the output stream (OUTPUT) to pass through if the destination address is 127.0.0.1, the protocol is TCP, and the destination port is 80. For other traffic, you can use the following command: ```sudo iptables -A OUTPUT -p tcp --dport 80 -j DROP``` Its function is: discard the matching protocol from the output stream (OUTPUT) as TCP, Traffic with destination port 80. 4. Save the rules: Use the command `sudo iptables-save > /etc/sysconfig/iptables` to save the current iptables rules to the /etc/sysconfig/iptables file so that it can be automatically loaded at the next startup. 5. Load rules: Use the command `sudo iptables-restore < /etc/sysconfig/iptables` to load the saved iptables rules into the current operating environment. 6. Test the rule: Use the command `curl` or `ping` to test whether the rule is effective, such as: ```curl -I http://127.0.0.1``` or ```ping -c 3 www.google.com ``` can verify the actual effect of the rule. It should be noted that the addition of iptables rules requires a certain understanding of the network architecture and technical strength. Improper rules may cause network failures and should be operated with caution.