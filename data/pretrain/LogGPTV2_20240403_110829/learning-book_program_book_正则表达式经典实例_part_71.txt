例如，1762：B03:1:AF18是1762:0:0:0:0:B03:1:AF18的压缩形式。本节中的正则表达式
会匹配使用压缩和标准标记法的IPv6地址。
检查整个目标文本是否是一个使用标准或压缩标记法的IPv6地址：
\A (? :
#标准形式
(?:[A-F0-9](1, 4} :)(7}[A-F0-9]{1, 4}
#压缩为最多包含7个冒号
(?=(?:[A-F0-9]{0, 4}:){0, 7}[A-F0-9]{0, 4}
\Z）#和定位符
#以及最多1对连续冒号
(([0-9A-F]{1, 4}:) {1, 7}|:)((:[0-9A-F]{1, 4}) {1, 7}1:)
正则选项：宽松排列、不区分大小写
正则流派：.NET、Java、PCRE、Perl、Python.Ruby
 (? : (?: [A-F0-9](1, 4) :) (7}[A-F09] {1, 4} 1
(?=（?:[A-F0-9]{0, 4}:)(0, 7}[A-F0-9]{0, 4}$)（([0-9A-F]{1, 4}:){1, 7}1:)
((:[09A-F]{1, 4){1, 7}1:)) S
正则选项：不区分大小写
正则流派：.NET、Java、JavaScript、PCRE、Perl、Python
在一大段文本中查找一个使用标准或压缩标记法的IPv6地址：
(?<![:.\w])(?:
#标准形式
(?:[A-F0-9]{1, 4} :) (7} [AF0-9](1, 4}
#压缩为最多包含7个冒号
1(?=(?:[A-F0-9](0,4}:)(0, 7}[A-F0-91(0, 4}
（？！[：.\w]））#和定位符
#以及最多1对连续冒号
(([0-9AF]{1, 4}:){1, 7} 1 :)((: [0-9AF]{1, 4}) {1, 7} 1 :)
)(？![:.\w])
正则选项：宽松排列、不区分大小写
正则流派：.NET、Java、PCRE、Perl、Python、Ruby1.9
JavaScript和Ruby1.8并不支持逆序环视。我们必须去掉在正则式开头，用来保证不会
找到位于一长串十六进制数和冒号序列中的IPv6地址的检查。但是我们也不能使用单
词边界作为替代，因为地址可能会以冒号开始，而冒号不是一个单词字符：
(？：
#标准形式
(?:[A-F0-9}{1, 4} :){7}[A-F0-9]{1, 4}
压缩为最多包含7个冒号
1(?=(?:[A-F0-9]{O,4}:)(0, 7}[A-F0-9]{0, 4}
（？！[：.\w]））和定位符
#以及最多1对连续冒号
(([0-9AF]{1, 4} : ){1, 7}1 : )((: [09A-F]{1, 4){1, 7} 1 : )
)(?![:.\w])
368
第7章
www.TopSage.com
---
## Page 385
正则选项：宽松排列、不区分大小写
正则流派：.NET、Java、PCRE、Perl、Python、Ruby
(?:(?: [A-F0-9]{1, 4} : ) {7}[AF0-9]{1, 4} 1(?=(?: [A-F0-9]{0, 4) :) {0, 7}
[AF0-91{0, 4) (?![: . \w])) (([09AF]{1, 4} :) {1, 7} 1 :) ((: [09AF]{1, 4})
(1, 7}1:))(?![: . \w])
正则选项：不区分大小写
正则流派：.NET、Java、JavaScript、PCRE、Perl、Python、Ruby
压缩的混合标记法
匹配一个使用压缩的混合标记法的IPv6地址。压缩的混合地址和混合地址大体相同，
只是可以省略一个或者多个为0的字数，而在省略掉0的数字位置前后就会只剩下冒
号。但是4个十进制字节数即使是0也必须被显式说明。识别使用压缩的混合标记法
的地址的方法是：在地址第一部分中会出现两个连续的冒号，而在第二部分中会出现3
个点号。一个地址中只能省略掉一个值为0的数字序列，否则的话，我们就无法确定
每个序列中有多少个数字被省略了。如果省略的为0的数字出现在IP地址的开端或结
尾，那么该地址就会以两个冒号作为开始或结束。
例如，IPv6地址1762:：B03:127.32.67.15就是1762:0:0:0:0:B03:127.32.67.15的压缩形式。
本节中的正则表达式会匹配使用压缩和或非压缩混合标记法的混合IPv6地址。
检查整个目标文本是否是一个使用压缩或非压缩混合标记法的IPv6地址的正则表
达式：
\A
(? :
#没有压缩的形式
(?:[A-F0-9]{1, 4} :) (6}
#被压缩为至少6个冒号
1(?=(?: [A-F0-9] (0, 4}:) (0, 6)
(?: [0-9]{1, 3)\.)(3}[0-9]{1, 3}
和4个字节数
定位符
#以及最多一对连续冒号
(([0- 9A-F](1, 4} : ) (0, 5} 1 : ) ((: [0-9A-F](1, 4) (1, 5) : 1 :)
）
#255.255.255.
(? : (? : 25[0-5] 12[0-4][0-9]1[01] ?[0-9][0- 9]?) \ . ) {3]
#255
(?: 25[0-5]12[0-4][0-9]1[01]?[0-9][0-9]?)
\2
正则选项：宽松排列、不区分大小写
正则流派：.NET、Java、PCRE、Perl、Python、Ruby
(?:(?:[AF0-9]{1,4) :)(6} 1(?=(?:[A-F0-9](0,4}:)(0, 6}(?:[0-9]{1, 3}\.)
{3}[0-9]{1, 3}$)(([0-9A-F]{1, 4) :){0, 5}1:)((:[0-9A-F]{1, 4}){1, 5}:I:))
-0]1-0)((6-0]6-0]0]16-0-0]1-0]))
[0-9]1[01]?[0-9][0-9]?)$
URL、路径和Internet地址
369
www.TopSage.com
---
## Page 386
正则选项：不区分大小写
正则流派：.NET、Java、JavaScript、PCRE、Perl、Python
在一大段文本中查找一个使用压缩或非压缩的混合标记法的IPv6地址：
(?<![:.\w])
#没有压缩的形式
(?:[A-F0-9]{1, 4}:){6}
#压缩为包含至少6个冒号
1 (?=(?: [A-F0-9] (0, 4} :) (0, 6)
（？：[0-9]{1,3}\.）{3)[0-9]{1,3}#和4个字节数
(?![:.\w]))
#和定位符
#以及最多1对连续冒号
(([0-9AF](1, 4}:)(0, 5}1:)((:[0-9A-F](1, 4}){1, 5} : 1:)
）
#255.255.255.
(?:(?:25[0-5]12[0-4][0-9]1[01]?[0-9][0-9]?)\.){3}
#255
(?:25[0-5]12[0-4][0-9]1[01]?[0-9][0-9]?)
(?![:.\w])
正则选项：宽松排列、不区分大小写
正则流派：.NET、Java、PCRE、Perl、Python、Ruby 1.9
JavaScript和Ruby1.8并不支持逆序环视。我们必须去掉在正则式开头，用来保证不会
找到位于一长串十六进制数和冒号序列中的IPv6地址的检查。但是我们也不能使用单
词边界，因为地址可能会以冒号开始，而冒号不是一个单词字符：
:)
没有压缩的形式
(?:[A-F0-9]{1,4):){6)
#被压缩为包含最多6个冒号
((?=(?:[A-F0-9]{0, 4} :) {0, 6}
（？：[0-9】{1,3}\.）（3}[0-9]（1,3}#和4个字节数
(?！[:.\w]）)
和定位符
#以及最多1对连续冒号
(（[0-9A-F]{1,4}:){0,5}1:)((:[0-9A-F](1,4}){1, 5}:1:)
）
#255.255.255.
(?:(?:25[0-5]12[0-4][0-9]1[01]?[0-9][0-9]?)\.){3}
#255
(?:25[0-5]12[0-4][0-9]1[01]?[0-9][0-9]?)
(?![:.\w])
正则选项：宽松排列、不区分大小写
正则流派：.NET、Java、PCRE、Perl、Python、Ruby
(?:(?: [A-F0-9]{1, 4}:) {6)1(?=(?: [A-F0-9] {0, 4} :) (0, 6}(?: [0-9] {1, 3}.) {3)
[0-9](1,3}(？![: .\w]))(([0-9A=F]{1,4):){0, 5)1:)((:[0-9A-F]{1,4})(1,5}:1:))
(?:(?:25[0-5112[0-4][0-9]1[01]?[0-9[0-9]？)\.){3}
(?:25[0-5]12[0-4][0-9]1[01]?[0-9][0-9]?)(?![:.\w])
370
www.TopSage.com
---
## Page 387
正则选项：不区分大小写
正则流派：.NET、Java、JavaScript、PCRE、Perl、Python、Ruby
标准、混合或压缩标记法
匹配一个使用任意一种前文解释过的标记法的IPv6地址，其中可以是标准、混合、压
缩或压缩混合标记法。
检查整个自标文本是否是一个IPv6地址：
\A(?:
#混合形式
:)
#没有压缩的形式
(?:[A-F0-9]{1, 4}:){6}
#被压缩为包含最多6个冒号
1(?=(?:[A-F0-9](0,4}:){0,6}
(？:[0-9](1,3}\.){3}[0-9]{1,3}
#和4个字节数
\2)
和定位符
#以及最多1对连续冒号
(([0-9A-F]{1, 4}:){0, 5}1:)((:[0-9A-F]{1, 4}){1,5} : |:)
255.255.255.
(?:(?:25[0-5]12[0-4][0-9]1[01]？[0-9][0-9]?)\.){3}
#255
([6-0]6-0]0]16-0]-0]1-0])
#标准形式
(? : [AF09]{1, 4}:) (7}[A-F09](1, 4}
1#压缩为最多包含7个留号
(?=(?: [A-F0-9]{0, 4}:) {0, 7}[A-F0-9]{0, 4}
\2）#和定位符
以及最多1对连续冒号
(([09A-F]{1, 4}:){1, 7}1:)((:[0-9AF]{1, 4}){1, 7}1:)
\z
正则选项：宽松排列、不区分大小写
正则流派：.NET、Java、PCRE、Perl、Python、Ruby
(?:(?:(?:[A-F0-9]{1, 4) :) {6} 1(?=(?:[A-F0-9] {0, 4} :) {0, 6}(?:[0-9] {1,3}\.) {3}
[0-9]{1,3)$)(([0-9A-F]{1,4}:){0,5}1:)((:[0-9A-F]{1,4){1,5}:I:))
(?:(?:25[0-5]12[0-4][0-9]1[01]?[0-9][0-9]?)\.){3}
(?:25[0-5]12[0-4][0-9]1[01]?[0-9][0-9]?)1(?:[A-F0-9]{1, 4}:){7}
[AF0-9]{1, 4}1(?=(?:[A-F0-9]{0, 4}:){0,7}[A-F0-9]{0, 4}$)
（（[0-9A-F]{1, 4):)(1, 7}1:)(（:[0-9A-F}{1, 4}){1,7}1:))$
正则选项：不区分大小写
正则流派：.NET、Java、JavaScript、PCRE、Perl、Python
在一大段文本中查找一个标准、混合、压缩或压缩混合标记法的IPv6地址：
(?<！[:.\w])(？:
#混合形式
URL、路径和Internet地址
371
www.TopSage.com
---
## Page 388
(? :
没有压缩的形式
(?:[A-F09]{1, 4}:){6}
#被压缩为包含最多6个冒号
1 (?=(?: [A-F0-91 (0, 4} :) (0, 6}
(?:[0-9](1,3}\.)(3}[0-9]{1,3}
#和4个字节数
(?![:.\w]))
和定位符
普以及最多1对连续冒号
(([0-9A-F]{1, 4}:){0, 5} 1:)((: [0-9A-F]{1, 4})(1, 5) : 1:)
）
#255.255.255.
(?:(?:25[0-5]12[0-4][0-9]1[01] ?[0-9][0-9]?)\.){3}
#255
(?: 25[0-5]12[0-4][0-9]1[01] ?[0-9][0-9] ?)
1#标准形式
(?:[A-F0-9]{1, 4}:){7}[A-F0-9]{1, 4}
1#压缩为最多包含7个冒号
(?=(?:[A-F0-9]{0, 4}:) {0, 7}[A-F0-9]{0, 4}
（？！[：.\w]））#和定位符
#以及最多1对连续冒号
(([0 9A-F] (1, 4} :) (1, 7} 1 :)(( : [0 9A-F] {1, 4)) (1, 7}1 : )
)(?![:.\w])
正则选项：宽松排列、不区分大小写