日志参数
参数名称 参数含义
IfIndex 本端设备收到远端设备的接口索引。
RemoteMacAddress 远端设备的MAC地址。
IfName 本端设备收到远端设备的接口名称。
可能原因
原因1：
远端设备整机重启。
原因2：
远端设备单板重启。
原因3：
远端设备掉电。
处理步骤
步骤1 待远端设备重启或者远端设备单板重启后，使用display efm session命令检查EFM状态
是否正常。
l 如果正常，转到步骤3。
l 如果不正常，转到步骤2。
步骤2 请收集告警信息、日志信息和配置信息，并联系技术支持人员。
步骤3 结束。
----结束
文档版本 06 (2017-09-12) 华为专有和保密信息 204
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
日志参考 19 EFM
19.6 EFM/5/LOOPBACKFAILEDEVENT
日志信息
EFM/5/LOOPBACKFAILEDEVENT: Interface starts loopback failed.
(IfIndex=[IfIndex],IfName=[IfName])
日志含义
3AH发起环回请求，在一定时间内没有收到对端的响应，上报失败。
日志参数
参数名称 参数含义
IfIndex 接口索引。
IfName 接口名称。
可能原因
3AH发起环回请求，在一定时间内没有收到对端的响应。
处理步骤
步骤1 检查对端接口是否拒绝了本端的远端环回请求。
执行命令display current-configuration命令，查看是否存在配置efm loopback ignore-
request。
l 如果存在，请执行命令undo efm loopback ignore-request，接收远端环回请求。并
执行步骤2。
l 如果不存在，请执行步骤3。
步骤2 检查告警是否消除。
如果没有消除请执行步骤3。
步骤3 检查EFM状态是否正常。
执行命令display efm session all，查看字段“EFM State”的值是否“detect”。
l 如果字段“EFM State”的值是“detect”，请执行步骤5。
l 如果字段“EFM State”的值不是“detect”，请执行步骤4。
步骤4 请检查物理链路是否正常。详细的处理方法请参见物理对接类问题的定位。
步骤5 请收集告警信息、日志信息和配置信息，并联系技术支持人员。
----结束
文档版本 06 (2017-09-12) 华为专有和保密信息 205
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
日志参考 19 EFM
19.7 EFM/3/NONTHRESHOLDTRAP_active
日志信息
EFM/3/NONTHRESHOLDTRAP_active:Nonthreshold Event occured. (IfIndex=[IfIndex],
EventLogIndex=[EventLogIndex], EventLogTimestamp=[EventLogTimestamp],
EventLogOUI=[TrapLogOUI], EventLogType=[TrapLogType],
EventLogLocation=[TrapLogLocation], IfName=[IfName])
日志含义
链路发生非越限事件。
日志参数
参数名称 参数含义
IfIndex 端口索引。
EventLogIndex 所打印的log的序号。
EventLogTimestamp 记录发生时间的时间戳。
EventLogOui 事件的OUI。
EventLogType 记录事件的类型。
EventLogLocation 标识是本地发生的还是远端发生的(1表示本端，2表示远端)。
IfName 端口名称。
可能原因
原因1：
对端接口EFM没有使能。
原因2：
本端端口被shutdown或物理链路Down。
原因3：
本端或对端设备重启。
原因4：
公网侧相关联动模块故障。
处理步骤
步骤1 请查看告警中EventLogType字段的告警类型。
l 254 超时告警＝>2。
l 256 本端接口shutdown＝>3。
文档版本 06 (2017-09-12) 华为专有和保密信息 206
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
日志参考 19 EFM
l 257 死亡事件＝>4。
l 258 紧急事件＝>5。
步骤2 请在接口视图下执行命令display this查看对端设备EFM是否使能。
l Y＝>6。
l N＝>8。
步骤3 请在接口视图下执行命令display this查看本端端口是否被shutdown。
l Y=>9。
l N=>6。
步骤4 请确认对端设备是否正在重启。
l Y=>10。
l N=>12。
步骤5 请确认与EFM联动的模块是否有故障。
l Y=>7。
l N=>12。
步骤6 请检查物理链路是否有故障。
l Y＝>11。
l N＝>12。
步骤7 请修复与EFM联动的模块，检查告警是否恢复。
l Y=>13。
l N=>12。
步骤8 在对端设备的接口视图下，执行命令efm enable使能EFM功能，检查告警是否恢复。
l Y=>13。
l N=>12。
步骤9 在接口视图下，执行命令undo shutdown，检查告警是否恢复。
l Y=>13。
l N=>6。
o
步骤10 等待设备正常工作后，检查告警是否恢复。
l Y=>13。
l N=>12。
步骤11 请更换物理链路，检查告警是否恢复。
l N＝>12
l Y＝>13
步骤12 请收集告警信息、日志信息和配置信息，并联系技术支持人员。
步骤13 结束。
----结束
文档版本 06 (2017-09-12) 华为专有和保密信息 207
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
日志参考 19 EFM
19.8 EFM/3/NONTHRESHOLDTRAP_clear
日志信息
EFM/3/NONTHRESHOLDTRAP_clear:Nonthreshold trap recovered. (IfIndex=[IfIndex],
EventLogIndex=[EventLogIndex], EventLogTimestamp=[EventLogTimestamp],
TrapLogOUI=[TrapLogOUI], TrapLogType=[TrapLogType],
TrapLogLocation=[TrapLogLocation], IfName=[IfName])
日志含义
链路发生非越限事件。
日志参数
参数名称 参数含义
IfIndex 端口索引。
EventLogIndex 所打印的log的序号。
EventLogTimestamp 记录发生时间的时间戳。
TrapLogOui 事件的OUI。
TrapLogType 记录事件的类型。
TrapLogLocation 标识是本地发生的还是远端发生的(1表示本端，2表示远端)。
IfName 端口名称。
可能原因
故障恢复。
处理步骤
步骤1 正常运行信息，无需处理。
----结束
19.9 EFM/3/THRESHOLD
日志信息
EFM/3/THRESHOLD:Threshold event occured. (IfIndex=[IfIndex],
EventLogIndex=[EventLogIndex], EventLogTimestamp=[EventLogTimestamp],
EventLogOui=[EventLogOui], EventLogType=[EventLogType],
EventLogLocation=[EventLogLocation], EventLogWindowHi=[EventLogWindowHi],
EventLogWindowLo=[EventLogWindowLo],
EventLogThresholdHi=[EventLogThresholdHi],
EventLogThresholdLo=[EventLogThresholdLo], EventLogValue=[EventLogValue],
文档版本 06 (2017-09-12) 华为专有和保密信息 208
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
日志参考 19 EFM
EventLogRunningTotal=[EventLogRunningTotal],
EventLogEventTotal=[EventLogEventTotal], IfName=[IfName])
日志含义
在设定时间内，误码、误帧或误帧秒超过了设定的门限值。
日志参数
参数名称 参数含义
IfIndex 端口索引。
EventLogIndex 所打印的log的序号。
EventLogTimestamp 记录发生时间的时间戳。
EventLogOui 事件的OUI。
EventLogType 记录事件的类型。
EventLogLocation 标识是本地发生的还是远端发生的。
EventLogWindowHi 表示监视区间的高位值。
EventLogWindowLo 表示监视区间的低位值。
EventLogThresholdHi 表示监视区间门限值的高位值。
EventLogThresholdLo 表示监视区间门限值的低位值。
EventLogValue 则表示越限事件发生的次数。
EventLogRunningTotal 表示事件出现的次数。
EventLogEventTotal 表示事件通知的次数。
IfName 端口名称。
可能原因
原因1：
端口上配置了efm error-code threshold 0、efm error-frame threshold 0或efm error-
frame-second threshold 0。
原因2：
物理链路故障，导致出现误帧或误码现象。
处理步骤
步骤1 请查看告警中EventLogType字段的值。
l 1 误码告警，请执行步骤2。
l 2 误帧告警，请执行步骤3。
l 3 误帧秒告警，请执行步骤4。
步骤2 在接口视图下执行display this命令查看是否有配置efm error-code threshold 0。
文档版本 06 (2017-09-12) 华为专有和保密信息 209
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
日志参考 19 EFM
l N，请执行步骤5。
l Y，请执行步骤6。
步骤3 在接口视图下使用display this命令查看是否有配置efm error-frame threshold 0。
l N，请执行步骤5。
l Y，请执行步骤7。
步骤4 在接口视图下使用display this命令查看是否有配置efm error-frame-second threshold
0。
l N，请执行步骤5。
l Y，请执行步骤8。
步骤5 请检查物理链路是否有故障。
l N，请执行步骤10。
l Y，请执行步骤9。
步骤6 在接口视图下执行命令efm error-code threshold threshold，根据实际需要重新配置当前
接口的EFM误码检测门限值，检查是否有新事件持续上报。
l N，请执行步骤11
l Y，请执行步骤10
步骤7 在接口视图下执行命令efm error-frame threshold threshold，根据实际需要重新配置当
前接口的EFM误帧检测门限值，检查是否有新事件持续上报。
l N，请执行步骤11
l Y，请执行步骤10
步骤8 在接口视图下执行命令efm error-frame-second threshold threshold，根据实际需要重新
配置当前接口的EFM误帧秒检测门限值，检查是否有新事件持续上报。
l N，请执行步骤11
l Y，请执行步骤10
步骤9 请处理物理链路故障，检查是否有新事件持续上报。
l N，请执行步骤11
l Y，请执行步骤10
步骤10 请收集告警信息、日志信息和配置信息，并联系技术支持人员。
步骤11 结束。
----结束
文档版本 06 (2017-09-12) 华为专有和保密信息 210
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
日志参考 20 ERPS（G.8032）
20
ERPS（G.8032）
关于本章
20.1 ERPS/2/ERPS_FORWARD
20.2 ERPS/2/ERPS_DISCARD
20.3 ERPS/5/ERPS_TOPOCHANGE
文档版本 06 (2017-09-12) 华为专有和保密信息 211
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
日志参考 20 ERPS（G.8032）
20.1 ERPS/2/ERPS_FORWARD
日志信息
ERPS/2/ERPS_FORWARD: The state of ERPS port was changed to forwarding.
(RingId=[RingID], InterfaceIndex=[IfIndex], InterfaceName=[IfName]).
日志含义
加入ERPS环的端口状态变为Forwarding。
日志参数
参数名称 参数含义
RingId 环ID。
InterfaceIndex 端口索引。
InterfaceName 端口名称。
可能原因
原因1：有新的链路加入
原因2：ERPS环内有端口状态变为Up/Down
处理步骤
步骤1 请查看网络拓扑中的物理设备，是否有启用ERPS协议的新的物理链路加入。
l 如果有，则请执行步骤2。
l 如果没有，则请执行步骤3。
步骤2 请检查新加入的物理链路是否是需要的物理链路。
l 如果是，则属于正常运行信息，无需处理。
l 如果不是，则请执行步骤4。
步骤3 请检查网络拓扑中有没有加入ERPS协议的端口状态变为Up/Down。
l 如果有，则属于正常运行信息，无需处理。
l 如果没有，则请执行步骤4。
步骤4 请收集告警信息、日志信息和配置信息，并联系技术支持人员。
----结束
文档版本 06 (2017-09-12) 华为专有和保密信息 212
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
日志参考 20 ERPS（G.8032）
20.2 ERPS/2/ERPS_DISCARD
日志信息
ERPS/2/ERPS_DISCARD: The state of ERPS port was changed to discarding.
(RingId=[RingID], InterfaceIndex=[IfIndex], InterfaceName=[IfName]).
日志含义
加入ERPS环的端口状态变为Discarding。
日志参数
参数名称 参数含义
RingId 环ID。
InterfaceIndex 端口索引。
InterfaceName 端口名称。
可能原因
原因1：有新的链路加入
原因2：ERPS环内有端口状态变为Up/Down
处理步骤
步骤1 请查看网络拓扑中的物理设备，是否有启用ERPS协议的新的物理链路加入。
l 如果有，则请执行步骤2。
l 如果没有，则请执行步骤3。
步骤2 请检查新加入的物理链路是否是需要的物理链路。
l 如果是，则属于正常运行信息，无需处理。
l 如果不是，则请执行步骤4。
步骤3 请检查网络拓扑中有没有加入ERPS协议的端口状态变为Up/Down。
l 如果有，则属于正常运行信息，无需处理。
l 如果没有，则请执行步骤4。
步骤4 请收集告警信息、日志信息和配置信息，并联系技术支持人员。
----结束