pubname
The publication to which the new subscription is to be associated.
filterid_n
Copyright © 2010 - 2018 EnterpriseDB Corporation. All rights reserved. 580
EDB Postgres Replication Server User’s Guide
Comma-separated list of filter IDs identifying the filter rules from the set of
available table filters to enable on the corresponding tables in the new
subscription. Use the printpubfilterslist command to obtain the filter IDs
for the available filter rules in the publication (see Section 8.3.17). Note: There
must be no white space between the comma and filter IDs.
Examples
In the following example, a subscription named dept_emp_sub is created in the
Advanced Server subscription database identified by subscription database ID 2. The
subscription is associated with a publication named dept_emp.
$ java -jar edb-repcli.jar -createsub dept_emp_sub \
> -subsvrfile ~/subsvrfile.prop \
> -subdbid 2 \
> -pubsvrfile ~/pubsvrfile.prop \
> -pubname dept_emp
Creating subscription...
Subscription created successfully
8.3.37 Printing a Subscription List (printsublist)
For SMR only: The printsublist command prints a list of subscription names.
Synopsis
-printsublist -repsvrfile subsvrfile -subdbid dbid
Parameters
subsvrfile
The file containing the subscription server login information.
dbid
The subscription names subordinate to the subscription database definition
specified by dbid are printed.
Examples
$ java -jar edb-repcli.jar -printsublist -repsvrfile ~/subsvrfile.prop \
> -subdbid 2
Printing subscriptions ...
dept_emp_sub
Copyright © 2010 - 2018 EnterpriseDB Corporation. All rights reserved. 581
EDB Postgres Replication Server User’s Guide
8.3.38 Enabling Filters on a Subscription or Non-MDN Node
(enablefilter)
The enablefilter command enables one or more filter rules on a single-master
replication system subscription or on a multi-master replication system master node other
than the master definition node.
The enablefilter command is used when it is desired to apply a filter rule to a
subscription or a non-MDN node, but the filter rule did not yet exist or it was neglected to
be included with the subscription or the non-MDN node when these components were
initially created.
Synopsis
-enablefilter
-repsvrfile pubsvrfile
{ -subname subname | -dbid dbid }
-filterids filterid_1 [ filterid_2 ] ...
Enabling a filter rule applies it to the specified, target subscription or non-MDN node,
and thus filters the data during replication from the source table to the target table.
See Section 2.2.12 for additional information on table filters.
Before enabling a filter rule, it must have been defined in the source publication in one of
several possible ways:
For SMR:
 The table filter was defined in the publication of the master database when it was
initially created either by the createpub command (see Section 8.3.14) or by the
xDB Replication Console (see Section 5.2.3).
 The table filter was added to an existing publication using the addfilter
command (see Section 8.3.20) or by the xDB Replication Console (see Section
7.6.4).
For MMR:
 The table filter was defined in the publication of the master definition node when
it was initially created either by the createpub command (see Section 8.3.14) or
by the xDB Replication Console (see Section 6.2.3).
 The table filter was added to an existing publication using the addfilter
command (see Section 8.3.20) or by the xDB Replication Console (see Section
7.6.4).
Enable the filter rule as follows:
Copyright © 2010 - 2018 EnterpriseDB Corporation. All rights reserved. 582
EDB Postgres Replication Server User’s Guide
For SMR: Use the enablefilter command or the xDB Replication Console (see
Section 5.5.4).
For MMR: Use the enablefilter command or the xDB Replication Console (see
Section 6.9).
Once a filter rule has been enabled, it filters the data during replication from the source
table to the target table.
A filter rule can subsequently be disabled so that it no longer filters the data during
replication to the target table (see Section 8.3.39).
Parameters
pubsvrfile
The file containing the publication server login information.
subname
For SMR only: The name of the subscription containing the tables on which the
filter rules are to be enabled.
dbid
For MMR only: The publication database ID of the non-MDN node containing
the tables on which the filter rules are to be enabled.
filterid_n
One or more filter IDs separated by space characters identifying the filter rules
from the set of available table filters to enable on the corresponding tables in the
SMR subscription specified by subname or in the MMR non-MDN node
specified by dbid. Use the printpubfilterslist command to obtain the
filter IDs for the available filter rules in the publication (see Section 8.3.17).
Examples
In the following example, a filter rule is enabled on a subscription of a single-master
replication system.
$ java -jar edb-repcli.jar -enablefilter -repsvrfile ~/pubsvrfile.prop \
> -subname analysts_managers_sub \
> -filterids 47
Enabling filters...
Filter rule(s) updated successfully.
Copyright © 2010 - 2018 EnterpriseDB Corporation. All rights reserved. 583
EDB Postgres Replication Server User’s Guide
In the following example, multiple filter rules are enabled on a master node that is not the
master definition node of a multi-master replication system.
$ java -jar edb-repcli.jar -enablefilter -repsvrfile ~/pubsvrfile.prop \
> -dbid 139 \
> -filterids 8 16
Enabling filters...
Filter rule(s) updated successfully.
8.3.39 Disabling Filters on a Subscription or Non-MDN Node
(disablefilter)
The disablefilter command disables one or more filter rules on a single-master
replication system subscription or on a multi-master replication system master node other
than the master definition node.
Synopsis
-disablefilter
-repsvrfile pubsvrfile
{ -subname subname | -dbid dbid }
-filterids filterid_1 [ filterid_2 ] ...
Disabling a filter rule prevents it from being applied to the specified, target subscription
or non-MDN node, and thus does not filter the data during replication from the source
table to the target table.
See Section 2.2.12 for additional information on table filters.
Disable the filter rule as follows:
For SMR: Use the disablefilter command or the xDB Replication Console (see
Section 5.5.4).
For MMR: Use the disablefilter command or the xDB Replication Console. (see
Section 6.9).
Disabling a filter rule does not remove its definition from the publication. Thus, the filter
rule still exists and can still be enabled on target subscriptions or non-MDN nodes.
To remove a filter rule so that it no longer exists, perform the following:
For either SMR or MMR: Use the removefilter command (see Section 8.3.22) or
the xDB Replication Console (see Section 7.6.4).
Parameters
pubsvrfile
Copyright © 2010 - 2018 EnterpriseDB Corporation. All rights reserved. 584
EDB Postgres Replication Server User’s Guide
The file containing the publication server login information.
subname
For SMR only: The name of the subscription containing the tables on which the
filter rules are to be disabled.
dbid
For MMR only: The publication database ID of the non-MDN node containing
the tables on which the filter rules are to be disabled.
filterid_n
One or more filter IDs separated by space characters identifying the currently
enabled table filters that are to be disabled in the SMR subscription specified by
subname or in the MMR non-MDN node specified by dbid.
Examples
In the following example, a filter rule is disabled on a subscription of a single-master
replication system.
$ java -jar edb-repcli.jar -disablefilter -repsvrfile ~/pubsvrfile.prop \
> -subname analysts_managers_sub \
> -filterids 47
Disabling filters...
Filter rule(s) updated successfully.
In the following example, multiple filter rules are disabled on a master node that is not
the master definition node of a multi-master replication system.
$ java -jar edb-repcli.jar -disablefilter -repsvrfile ~/pubsvrfile.prop \
> -dbid 139 \
> -filterids 8 16
Disabling filters...
Filter rule(s) updated successfully.
8.3.40 Taking a Single-Master Snapshot (dosnapshot)
For SMR only: The dosnapshot command performs snapshot synchronization on the
specified subscription in a single-master replication system.
Synopsis
-dosnapshot subname -repsvrfile subsvrfile
[ -verboseSnapshotOutput { true | false } ]
See Section 5.4.1 for additional information on performing snapshot replication.
Copyright © 2010 - 2018 EnterpriseDB Corporation. All rights reserved. 585
EDB Postgres Replication Server User’s Guide
Parameters
subname
The name of the subscription for which the snapshot is to be taken.
subsvrfile
The file containing the subscription server login information.
-verboseSnapshotOutput
Set this option to true if you want the output from the snapshot to be displayed.
Set this option to false if you do not want the snapshot output displayed. If
omitted, the default is true.
Examples
In the following example snapshot replication is performed on subscription
dept_emp_sub.
$ java -jar edb-repcli.jar -dosnapshot dept_emp_sub \
> -repsvrfile ~/subsvrfile.prop
Performing snapshot...
Source database connectivity info...
conn =jdbc:oracle:thin:@192.168.2.6:1521:xe
user =pubuser
password=******
Target database connectivity info...
conn =jdbc:edb://192.168.2.7:5444/subdb
user =subuser
password=******
Connecting with source Oracle database server...
Connecting with target EnterpriseDB database server...
Importing redwood schema EDB...
Table List: 'DEPT','EMP'
Loading Table Data in 8 MB batches...
Disabling FK constraints & triggers on edb.dept before truncate...
Truncating table DEPT before data load...
Disabling indexes on edb.dept before data load...
Loading Table: DEPT ...
[DEPT] Migrated 4 rows.
[DEPT] Table Data Load Summary: Total Time(s): 0.182 Total Rows: 4
Disabling FK constraints & triggers on edb.emp before truncate...
Truncating table EMP before data load...
Disabling indexes on edb.emp before data load...
Loading Table: EMP ...
[EMP] Migrated 14 rows.
[EMP] Table Data Load Summary: Total Time(s): 0.178 Total Rows: 14
Enabling FK constraints & triggers on edb.dept...
Enabling indexes on edb.dept after data load...
Enabling FK constraints & triggers on edb.emp...
Enabling indexes on edb.emp after data load...
Performing ANALYZE on EnterpriseDB database...
Data Load Summary: Total Time (sec): 1.866 Total Rows: 18 Total Size(MB): 0.0
Copyright © 2010 - 2018 EnterpriseDB Corporation. All rights reserved. 586
EDB Postgres Replication Server User’s Guide
Schema EDB imported successfully.
Migration process completed successfully.
Migration logs have been saved to /var/log/xdb-rep/build57l
******************** Migration Summary ********************
Tables: 2 out of 2
Constraints: 4 out of 4
Total objects: 6
Successful count: 6
Failure count: 0
*************************************************************
Snapshot taken successfully.
8.3.41 Take a Multi-Master Snapshot (dommrsnapshot)
For MMR only: The dommrsnapshot command performs snapshot synchronization on
the specified master node in a multi-master replication system.
-dommrsnapshot pubname
–repsvrfile pubsvrfile
-pubhostdbid dbid
[ -verboseSnapshotOutput { true | false } ]
Parameters
pubname
The name of the publication for which the snapshot is to be taken.
pubsvrfile
The file containing the publication server login information.
dbid
The publication database ID of the target master node for the snapshot replication.
-verboseSnapshotOutput
Set this option to true if you want the output from the snapshot to be displayed.
Set this option to false if you do not want the snapshot output displayed. If
omitted, the default is true.
Examples
Copyright © 2010 - 2018 EnterpriseDB Corporation. All rights reserved. 587
EDB Postgres Replication Server User’s Guide
In the following example snapshot replication is performed on publication emp_pub to
the target master node identified by publication database ID 9.
$ java -jar edb-repcli.jar -dommrsnapshot emp_pub \
> -pubhostdbid 9 \
> -repsvrfile ~/pubsvrfile.prop
Performing snapshot...
Source database connectivity info...
conn =jdbc:edb://192.168.2.6:5444/edb
user =pubuser
password=******
Target database connectivity info...
conn =jdbc:edb://192.168.2.7:5444/mmrnode
user =mmruser
password=******
Connecting with source EnterpriseDB database server...
Connecting with target EnterpriseDB database server...
Importing enterprisedb schema edb...
Table List: 'dept','emp'
Loading Table Data in 8 MB batches...
Disabling FK constraints & triggers on edb.dept before truncate...
Truncating table dept before data load...
Disabling indexes on edb.dept before data load...
Loading Table: dept ...
[dept] Migrated 5 rows.
[dept] Table Data Load Summary: Total Time(s): 0.247 Total Rows: 5
Disabling FK constraints & triggers on edb.emp before truncate...
Truncating table emp before data load...
Disabling indexes on edb.emp before data load...
Loading Table: emp ...
[emp] Migrated 14 rows.
[emp] Table Data Load Summary: Total Time(s): 0.163 Total Rows: 14
Enabling FK constraints & triggers on edb.dept...
Enabling indexes on edb.dept after data load...
Enabling FK constraints & triggers on edb.emp...
Enabling indexes on edb.emp after data load...
Performing ANALYZE on EnterpriseDB database...
Data Load Summary: Total Time (sec): 0.8 Total Rows: 19 Total Size(MB): 0.0
Schema edb imported successfully.
Migration process completed successfully.
Migration logs have been saved to /var/log/xdb-rep/build57l
******************** Migration Summary ********************
Tables: 2 out of 2
Constraints: 4 out of 4
Total objects: 6
Successful count: 6
Failure count: 0
*************************************************************
Snapshot taken successfully.
Copyright © 2010 - 2018 EnterpriseDB Corporation. All rights reserved. 588
EDB Postgres Replication Server User’s Guide
8.3.42 Performing a Synchronization (dosynchronize)
The dosynchronize command performs synchronization replication on the specified
subscription for a single-master replication system, or for an entire multi-master
replication system.
Synopsis
-dosynchronize { subname | pubname }
-repsvrfile { subsvrfile | pubsvrfile }
[ -repgrouptype { s | m } ]
For a single-master replication system use:
-dosynchronize subname –repsvrfile subsvrfile
For a multi-master replication system use: