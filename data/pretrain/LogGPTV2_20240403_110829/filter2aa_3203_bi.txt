3. On the General tab (for a local area connection) or the Networking tab (for any other connection), 
click Internet Protocol Version 4 (TCP/IPv4) or Internet Protocol (TCP/IP), and then click 
Properties.  
4. Click Advanced, and then click the DNS tab. 
5. Do one or more of the following: 
To use DNS dynamic update to register the IP addresses for this connection and the full computer 
name of the computer, select the Register this connection's addresses in DNS check box. This 
check box is selected by default.  
To configure a DNS suffix for the specific connection, type the DNS suffix in DNS suffix for this 
connection.  
To use DNS dynamic update to register the IP addresses and the domain name that is specific for 
this connection, select the Use this connection's DNS suffix in DNS registration check box. This 
check box is not selected by default. 
To enable DNS dynamic update on a DNS server that is running Windows Server 2008 or Windows 
Server 2003, do the following: 
1. In the console tree of the DNS snap-in, click the appropriate zone in the Forward Lookup Zones or 
Reverse Lookup Zones node.  
2. On the Action menu, click Properties.  
3. On the General tab, verify that the zone type is either Primary or Active Directory-integrated.  
4. If the zone type is Primary, in the Dynamic Updates list, click either Nonsecure and secure or 
Secure only. 
To configure DNS dynamic update for a DHCP server that is running Windows Server 2008 or Windows 
Server 2003, do the following: 
1. In the console tree of the DHCP snap-in, click the appropriate DHCP server or a scope on the 
appropriate DHCP server.  
2. Right click the IPv4 node, the server, or the scope, and then click Properties.  
3. Click the DNS tab. 
4. Do one of the following: 
To enable DNS dynamic update for DHCP clients that support it, select the Enable DNS dynamic 
updates according to the settings below check box and either the Dynamically update DNS A 
and PTR only if requested by the DNS clients check box (selected by default) or the Always 
dynamically update DNS A and PTR records check box. 
To enable DNS dynamic update for DHCP clients that do not support it, select the Dynamically 
update DNS A And PTR records for DHCP clients that do not request updates check box. This 
check box is cleared by default. 
Chapter 9 – Windows Support for DNS 
TCP/IP Fundamentals for Microsoft Windows  
Page: 265 
Secure Dynamic Update 
Secure DNS dynamic update is available only for zones that are integrated into Active Directory. After 
you integrate a zone, you can add or remove users or groups from the ACL for a specified zone or 
resource record using the DNS snap-in.  
After a zone becomes integrated with Active Directory, DNS servers running Windows Server 2008 or 
Windows Server 2003 allow only secure dynamic updates by default. When configured for standard 
zone storage, the DNS Server service by default blocks dynamic updates on its zones. For zones that 
are either integrated with Active Directory or that use standard file-based storage, you can change the 
zone to allow both secure and unsecured dynamic updates. 
DNS clients attempt to use unsecured dynamic update first. If an unsecured update is refused, DNS 
clients try to use secure dynamic update.  
DNS and WINS Integration 
If DNS and Windows Internet Name Service (WINS) are integrated, the DNS Server service can look up 
DNS names in WINS if the service cannot be resolve the names by querying DNS servers. To perform 
WINS lookup, the DNS Server service uses two specific resource record types that can be enabled for 
any zone: 
The WINS resource record, which you enable to integrate WINS lookup into forward lookup zones  
The WINS resource record is specific to DNS servers that are running Windows and that you can 
attach only to the root domain of a forward lookup zone by placing the record in the root zone file. 
The presence of a WINS record instructs the DNS Server service to use WINS to look up any 
requests for hosts in the zone root that do not have an A resource record. This functionality is 
particularly useful for DNS clients that are not running Windows and that need to resolve the names 
of NetBIOS and DHCP-enabled hosts that do not perform DNS dynamic update, such as computers 
running older versions of Windows. 
The WINS-R resource record, which you enable to perform IPv4 address-to-NetBIOS name lookups for 
reverse lookup zones  
The WINS-R resource record is also specific to DNS servers that are running Windows and that 
you can attach only to the root domain of a reverse lookup zone by placing the record in the root 
zone file. The presence of a WINS-R record instructs the DNS Server service to use WINS to look 
up any requests for hosts that are in the zone root but that do not have an A resource record. 
How WINS Lookup Works 
When a DNS client sends a recursive or iterative query to a DNS server that is authoritative for the 
domain portion of an FQDN, the DNS server first attempts to find a matching A record in its zone files. If 
the DNS server does not find a matching A record and is configured for WINS lookup, the server does 
the following: 
1. The DNS server separates the host part of the FQDN contained in the DNS query and converts the 
host part to a 16-byte NetBIOS name. The NetBIOS name consists of the host name, padded with 
spaces up to 15 bytes, and 0x00 as the last byte. 
2. The DNS server sends a NetBIOS Name Query Request message to the WINS server.  
Chapter 9 – Windows Support for DNS 
TCP/IP Fundamentals for Microsoft Windows  
Page: 266 
3. If the WINS server can resolve the constructed NetBIOS name, it returns the IPv4 address to the 
DNS server using a NetBIOS Name Query Response message.  
4. The DNS server constructs an A resource record using the IPv4 address resolved through the WINS 
server and sends a DNS Name Query Response message containing the A record to the requesting 
DNS resolver.  
The DNS Server service performs all of the steps for WINS lookup. The DNS resolver is not aware that 
WINS lookup is being used—it sent a DNS Name Query Request message and received a DNS Name 
Query Response message. The WINS server is not aware a DNS server is using WINS lookup—it 
received a NetBIOS Name Query Request message and replied with a NetBIOS Name Query 
Response message.  
When you enable WINS lookup on a DNS zone, it is performed for only those names in the zone root 
domain. For example, if a zone file contained names for the example.com domain and the 
dev.example.com subdomain and WINS lookup was configured for that zone, then WINS lookup could 
be performed on the name newssrv1.example.com but not for the name newssrv1.dev.example.com. 
You can configure WINS lookup from the WINS tab for the properties of a forward lookup zone. To 
enable WINS lookup, select the Use WINS forward lookup check box, and type the IPv4 addresses of 
your WINS servers. 
The TTL for a DNS name that is resolved through WINS lookup is not the default timeout value from the 
SOA record for the zone. You configure the TTL for a name resolved through WINS lookup on the 
WINS tab for the properties of a forward lookup zone.  
WINS Reverse Lookup 
Although WINS was not constructed to provide reverse lookup capabilities, this functionality can be 
accomplished using a special NetBIOS message. The presence of a WINS-R record at the zone root 
instructs the DNS Server service to send a NetBIOS Adapter Status message for any reverse lookup 
requests for IPv4 addresses in the zone root domain for which PTR records were not found. The 
response to the NetBIOS Adapter Status message contains the NetBIOS computer name of the queried 
host. 
You can configure WINS lookup on the WINS-R tab for the properties of a reverse lookup zone. Select 
the Use WINS-R lookup check box, and type the domain name to be appended to the computer name 
when the DNS Server service returns the response to the DNS resolver.  
If a reverse query for a host name based on an IPv4 address is sent to a DNS server running Windows 
Server 2008 or Windows Server 2003 for a zone in which WINS reverse lookup is enabled, the server 
will first attempt to perform a reverse resolution using the local reverse lookup zone files. If the DNS 
server does not find a PTR record, it sends a NetBIOS Adapter Status message to the IPv4 address in 
the reverse query. The response to the NetBIOS Adapter Status message includes the NetBIOS name 
table of the responder, from which the DNS server determines the computer name. The DNS Server 
service appends the domain name configured on the WINS-R tab to the computer name and returns 
the result to the requesting client. 
Chapter 9 – Windows Support for DNS 
TCP/IP Fundamentals for Microsoft Windows  
Page: 267 
Using the Nslookup Tool 
The Nslookup diagnostic tool allows you to interact with a DNS server using either individual command-
line queries or interactively as a name resolver or as another DNS server. The Nslookup tool is the 
primary troubleshooting tool for DNS. You can use Nslookup to display any resource record on any 
DNS server, including DNS servers that are not running Windows. 
Nslookup Modes  
Nslookup has two modes: interactive and noninteractive. If you need a single resource record, use non-
interactive or command-line mode. If you need more than one resource record, you can use interactive 
mode, in which you issue successive commands from an Nslookup prompt. For interactive mode: 
To interrupt interactive commands at any time, press CTRL+C.  
To exit, use the exit command. 
The command line must be less than 256 characters long. 
To treat a built-in command as a computer name, precede it with the "\" character. 
An unrecognized command is interpreted as a computer name. 
Nslookup Syntax 
Nslookup has the following syntax: 
nslookup [-Options] [ComputerToFind | - [Server]]  
The Nslookup command line can include the following parameters: 
-Options  Specifies one or more Nslookup commands as a command-line option. For a list of 
commands, use the help option inside Nslookup. Each option consists of a hyphen (-) followed 
immediately by the command name; in some cases, an equal sign (=); and then a value. 
ComputerToFind  Look up information for ComputerToFind using the current default server or using 
Server if specified. If ComputerToFind is an IP address and the query type is A or PTR, the name of the 
computer is returned. If ComputerToFind is a name and does not have a trailing period, the default 
DNS domain name is appended to the name.  
If you type a hyphen (-) instead of ComputerToFind, the command prompt changes to Nslookup 
interactive mode with the ">" character as the command prompt. 
Server  Use this server as the DNS name server. If the server is omitted, Nslookup uses the currently 
configured default DNS server. 
Examples of Nslookup Usage 
The following are usage examples for the Nslookup tool. 
Example 1: Nslookup in Interactive Mode 
The following is a usage example for Nslookup in interactive mode with the default DNS server: 
Chapter 9 – Windows Support for DNS 
TCP/IP Fundamentals for Microsoft Windows  
Page: 268 
C:\USERS\DEFAULT>nslookup 
Default Server:  dnssrv1 
Address:  157.54.9.193 
> 
Nslookup performs a reverse query on the IPv4 address of the default DNS server and displays its 
name (dnssrv1 above). If the query fails, Nslookup displays the error message "*** Default servers are 
not available" and shows the default server as "Unknown." From the ">" prompt, you can enter names 
to be queried, IP addresses to be reverse queried, or commands to modify the behavior of Nslookup. 
To exit the Nslookup command prompt, use the exit command. 
Example 2: Nslookup and Forward Queries 
The following is an example of how to use Nslookup to obtain the IP address of a host name using the 
default DNS server: 
C:\USERS\DEFAULT>nslookup filesrv17 
server =   dnssrv1 
Address:  157.54.9.193 
Name:    filesrv17.example.com 
Address:  131.107.21.19 
Example 3: Nslookup Forward Query Using Another DNS Server 
The following is an example of how to use Nslookup to obtain the IP address of a host name using 
another DNS server: 
C:\USERS\DEFAULT>nslookup msgsrv3 –dnssrv9 
server =   dnssrv9 
Address:  157.60.10.41 
Name:    msgsrv3.central.example.com 
Address:  157.60.10.201 
Example 4: Nslookup Debug Information 
The following is an example of how to use Nslookup to obtain the IP address of a host name using the 
default DNS server. The example also shows how to modify the display option to include detailed 
information about the contents of the DNS messages being exchanged between the DNS client and the 
DNS server: 
C:\USERS\DEFAULT>nslookup -debug=on emailsrv1 
------------ 
Got answer: 
    HEADER: 
        opcode = QUERY, id = 1, rcode = NOERROR 
        header flags:  response, auth. answer, want recursion, recursion avail. 
        questions = 1,  answers = 1,  authority records = 0,  additional = 0 
Chapter 9 – Windows Support for DNS 
TCP/IP Fundamentals for Microsoft Windows  
Page: 269 
    QUESTIONS: 
        193.9.60.157.in-addr.arpa, type = PTR, class = IN 
    ANSWERS: 
    ->  193.9.60.157.in-addr.arpa 
        name = dnssrv1 
        ttl = 3600 (1 hour) 
------------ 
server =   dnssrv1 
Address:  157.60.9.193 
------------ 
Got answer: 
    HEADER: 
        opcode = QUERY, id = 2, rcode = NOERROR 
        header flags:  response, auth. answer, want recursion, recursion avail. 
        questions = 1,  answers = 1,  authority records = 0,  additional = 0 
    QUESTIONS: 
        emailsrv1.example.com, type = A, class = IN 
    ANSWERS: 
    ->  emailsrv1.example.com 
        internet address = 157.54.9.193 
        ttl = 3600 (1 hour) 
------------ 
Name:    emailsrv1.example.com 
Address:  157.54.9.193 
Example 5: Nslookup Reverse Query 
The following is an example of using Nslookup to perform a reverse query: 
C:\USERS\DEFAULT>nslookup 157.60.13.46 
server =   dnssrv1 
Address:  157.60.9.193 
Name:    emailsrv18.wcoast.example.com 
Address:  157.54.13.46 
Chapter 9 – Windows Support for DNS 
TCP/IP Fundamentals for Microsoft Windows  
Page: 270 
Chapter Summary 
The chapter includes the following pieces of key information: 
You can configure the DNS Client service manually using Network Connections or automatically using 
DHCP, PPP, or Computer Configuration Group Policy. 
To help resolve an unqualified name, the DNS Client service uses the primary or connection-specific 
DNS suffixes (with name devolution on the primary suffix) or a configured list of DNS suffixes. 
You can install the DNS Server service using the Server Manager snap-in, as a Windows component 
using the Add or Remove Programs item in Control Panel, the Active Directory Installation Wizard 
(Dcpromo.exe), or the Manage Your Server Wizard. 
Active Directory requires DNS to locate domain resources for domain operations. 
Storage of DNS zones in Active Directory can take advantage of multi-master administration, Active 
Directory security, and the existing Active Directory replication topology. 
To administer a DNS server that is running Windows Server 2003, you must configure server 
properties, forward lookup zones, reverse lookup zones, delegation, and zone transfers. 
Typical resource records to manually add to a DNS server running Windows are A, AAAA, and PTR. 
To enable DNS traffic over IPv6, you must configure a Windows Server 2003-based DNS server to 
listen for DNS traffic over IPv6. Then, you must either configure the Windows Vista or Windows Server 
2008 DNS clients with the unicast IPv6 addresses of the DNS servers or configure the DNS server and 
the routing infrastructure for the well-known unicast addresses assigned to IPv6 DNS servers. 
With DNS dynamic update, DNS client computers that are running Windows dynamically update their A, 
AAAA, and PTR records (for IPv4) addresses with the primary name server for the zone. For zones that 
are integrated with Active Directory, DNS clients can use secure dynamic update. 
WINS lookup allows a DNS server running Windows to use WINS for name resolution when no A 
record for the host is found. WINS reverse lookup uses NetBIOS Adapter Status messages to perform 
reverse lookups when no PTR record is found.  
Chapter 9 – Windows Support for DNS 
TCP/IP Fundamentals for Microsoft Windows  
Page: 271 
Chapter Glossary 
DNS – See Domain Name System. 
DNS dynamic update - A DNS standard that permits DNS clients to dynamically register and update 
their resource records in the zones of the primary name server. 
DNS server – A server that maintains a database of mappings of DNS domain names to various types 
of data, such as IP addresses. 
domain – Any tree or subtree within the DNS namespace. 
Domain Name System (DNS) – A hierarchical, distributed database that contains mappings of DNS 