的系统中时，其性能会显著提高。
6
---
## Page 10
第2章，探索Fiddler
2.1.2安装Fiddler
Fiddler的安装很简单一首先是接受最终用户许可协议条款（简单而言，协议的内容就是：
一是不要做违法的事；二是作者不提供任何保证），然后选择Fiddler的安装目录。建议使用默认的
文件夹作为安装路径一因为有些Fiddler组件会以Fiddler被安装在默认路径下为前提，如果
Fiddler没有被安装在默认路径下，该组件将无法正常安装：Fiddler的默认安装路径是
%ProgramFiles%Fiddler2，在大多数系统中就是C：ProgramFilesFiddler2，而在64位的系统中则是
C:ProgramFiles（x86)Fiddler2\。如果操作系统支持64位，Fiddler本身会运行在64位模式下，而它
之所以被安装在32位的ProgramFiles文件夹中，通常仅仅是由于安装程序是32位的。
当成功地安装了Fiddler之后，会打开一个Web页面，显示使用Fiddler的一些关键信息。Fiddler
工具的启动图标会被安装在开始菜单（StarMenu）和浏览器的菜单栏中，在这两个地方都可以启
动它。此外，你还可以通过快捷键“Windows+R”调出运行框，通过在其中输入fiddler2来启动。
权限和XCOPY部署
安装Fiddler需要管理员权限，因为它会更新计算机文件夹和注册表位置。如果没有管理
员权限，可以采用常见的XCOPY部署（XCOPYDeployment）方式，即在另一台机器上安装
Fiddler，然后把它的%ProgramFiles%Fiddler2\文件夹复制到目标机器或USB存储中。虽然采
用这种方式时，Fiddler的某些功能不可用（比如IE工具栏按钮和用于Firefox的FiddlerHook
扩展插件），Fiddler本身还是可以正常工作的。
2.1.3更新Fiddler
Fiddler在启动时，会自动查询是否有新版本。当发现有新版本时，你会看到如图2-1所
示的更新提示。
国
2398H
图 2-1
单击Yes按钮，Fiddler会启动浏览器，下载最新的安装程序。下载完成后，关闭正在运
行的Fiddler，手动安装新下载的程序。如果单击的是NextTime（下一次安装）这个按钮，下
10
---
## Page 11
2.2FIDDLER用户界面
一次启动Fiddler时，它会自动下载并安装最新版本。如果点击的是No，弹出的对话框就会
关闭，不会安装新的版本：下一次启动Fiddler时，这个提示还会弹出。
强烈建议安装最新版本的Fiddler，因为每次更新通常都会增加新功能、提高性能以及修
复bug。当前，Fiddler更新时不会自动对扩展进行更新，因此你需要不时地去登录那些扩展
插件开发者的Web站点上自行检查扩展是否有新版本。
管理员如果禁止用户使用Help>CheckforUpdates命令，可以通过修改注册表的方式实
现。打开Windows注册表编辑器，在HKLMSOFTWAREMicrosoftFiddler2中新加一条记录，
类型为REG_STRING，名称为BlockUpdateCheck，值为True。
2.1.4卸载Fiddler
可以使用控制面板中的“添加/删除程序”来卸载Fiddler。卸载后，系统并不会被清理干
净，因此卸载无法解决配置问题。当遇到这些问题时，查看本书附录A以得到更多信息。
2.2FIDDLER用户界面
Fiddler用户界面看起来非常复杂，因为它包含了大量的Web数据流信息，而且提供了很
多自定义功能。
Fiddler窗口的左边是WebSessions列表，如图2-2所示其右边是各个选项视图（Views），
显示在WebSessions列表中选中的Session的信息。在窗口的最上方，主菜单栏（MainMenu）
和工具栏（Toolbar）提供了各种操作的快捷入口.在窗口的最下方是状态栏（StatusBar），其
中显示的是一些关键信息以及重要的命令。在WebSessions列表下方的是一个很小的命令行
窗口QuickExec，它支持快速过滤和命令调用功能。
图 2-2
11
---
## Page 12
第2章探索Fiddler
小贴士：
·很多UI控制键包含上下文菜单，经常右击这些控制键会有很多收获。
·如果鼠标箭头变成手势，说明可以点击该UI控制键。
·支持标准的键盘快捷方式（如CTRL+C表示拷贝，CTRL+A表示全部选中，CTRL+G
表示跳到特定的行号，F3用于搜索）
·当有弹出的消息窗口时，按下CTRL+C会把文本拷贝到剪贴板。
·按下ESC键可以关闭对话框或搜索框。
·在启动Fiddler时，同时按下SHIFT键，可以把Fiddler的UI重新设置为默认形式
·双击选项卡标题，可以把该选项从视图中删除。
·双击splitter，可以最大化显示该spliter右侧的区域。
2.2.1WebSessions列表
WebSessions列表是Fiddler中最重要的部分它显示了Fiddler所捕捉到的每个Session
的简短的摘要信息。Fiddler中的大部分操作都是通过选中WebSession列表中的一个或多个
项来启动的。要选中多个Session，需要同时按住CTRL或SHIFT键，然后再点击想要选中
的Session。双击或按下Enter键会打开选中Session的默认Inspectors。Inspectors启动后，Fiddler
会自动选择最适合显示选中的Session的请求和响应的Inspector。
WebSession列表栏中包含了一些重要信息，具体如下：
·#-Fiddler为Session生成的ID。
·Result-响应状态码。
·Protocol-该Session使用的协议（HTTP/HTTPS/FTP）。
·Host-接收请求的服务器的主机名和端口号。
·URL-请求URL的路径、文件和查询字符串。
·Body-响应体中包含的字节数。
·Caching-响应头中Expires和Cache-Control字段的值。
·Content-Type-响应的Content-Type头
·Process-数据流对应的本地Windows进程。
12
---
## Page 13
2.2FIDDLER用户界面
·Custom-FiddlerScript所设置的ui-CustomColumn标志位的值。
·Comments-通过工具栏Comment按钮设置的注释信息。
可以通过拖拽来调整WebSessions列表中的各个列标题，改变它们的大小和顺序：单击
列标题，fiddler会按该列的值对WebSessions中的项进行排序。使用FiddlerScript、Extensions
或QuickExec可以添加新字段。
理解不同图标和颜色的含义
WebSessions列表中的每行记录的默认文本色彩体现了HTTP状态（红色表示错误，黄色表
示认证）、数据流类型（灰色表示CONNECT）、响应类型（紫色表示CSS、蓝色表示HTML、绿
色表示scrip、灰色表示图像）。在FiddlerScriptSession的ui-color标志位中可以修改字体颜色。
每行都有一个指向Session进度、请求类型或响应类型的快捷图标，图标及其含义见表2-1。
表2-1
Web Sessions围标
正在向服务器发送请求
正在从服务器下载响应
国
请求停止于断点处，允许对它进行修改
响应停止于断点处，允许对它进行修改
?
请求使用的是HEAD或OPTIONS方法，或者返回HTTP/204状态码，通过HEAD
方法和OPTIONS方法，客户端无需下载内容就可以获取目标URL或服务器的信息，
HTTP/204状态码表示没有指定URL的响应体
请求使用了POST方法向服务器发送数据
响应是HTML内容
口
响应是图像文件
响应是脚本文件
B
响应是CSS文件
响应是XML格式
响应是JSON格式
响应是音频文件
响应是视频文件
13
---
## Page 14
第2章
探索Fiddler
续表
响应是Silverlight小程序
D
响应是Flash小应用程序
响应是字体文件
响应Content-Type没有专用的图标
请求使用CONNECT方法。使用该方法构建传送加密的HTTPS数据流的通道
?
Session封装了HTML5WebSocket连接
四
响应是HTTP/3xx类重定向
响应是HTTP/401或HTTP/407，要求客户端进行认证：或响应为HTTP/403，表示
访问被拒绝
A
响应包含HTTP/4xx或HTTP/5xx错误状态码
Session被客户端应用、Fiddler或服务器中止。客户端的测览器在下载一个页面的过
程中，用户导航到另一个页面时，通常会发生这种情况。客户端测览器取消所有正
在处理的请求，因此最后Session的响应状态是Aborted
该响应属于HTTP/206响应类型。该响应通常在客户端对目标URL执行Range请求
获取部分内容时发生
响应状态是HTTP/304，表示客户端缓存的副本已经是最新的了
Web Session是没有加锁的，因而可以修改已经处理完成的Session
快捷键
WebSession列表支持的快捷键如表2-2所示。
表2-2
WebSession快捷键
Spacebar
在视图中激话并显示当前Session
CTRL+A
选中所有Session
ESC
取消选中所有Sesson
CTRL+1
反向选中：取消选中的Session，选中之前未选中的Session
CTRL+X
删除所有Session（和fiddler.ui.CtrlX.KcepMarked相关的）
Delete
删除选中的Session
14
---
## Page 15
2.2FIDDLER用户界面
续表
Shif+Delete
删除所有未选中的 Session
R
重新执行当前请求
SHIFT+R
多次重复执行当前请求（次数在后续的提示概中给出）
无条件地重新执行当前请求，发送不包含If-Modified-Since和 If-None-Match的请
U
求头
SHIFT+U
无条件地多次重复执行当前请求（执行次数在后续的提示框中给出）
P
选中触发该请求的父请求。根据HTTP请求头的Referer值确定父请求
选中该响应触发的所有所有子请求。根据HTTP请求头的Referer字段的取值或者标
C
示重定向的Location字段的取值判断
D
ALT+Enter
查看当前Session的属性
SHIFT+Enter
在新的 Fiddler 窗口中启动该Session的Inspectors
Backspace or “Back”
激活之前选中的 Session
mouse bufton
Insert
切换是否用红色粗体标记选中的Session
CTRL+1
CTRL+2
CTRL+3
把选中的Session分别用粗体红色、蓝色、金色、绿色、橙色或紫色表示
CTRL+4
CTRL+5
CTRL+6
M
给选中的Session添加描述
2.2.2
WebSession上下文菜单
右击WebSessions列表顶端的标题栏，显示包含两个选项的上下文菜单，如表2-3所示。
15
---
## Page 16
第2章探索Fiddler
表2-3
WebSession上下文菜单
所有列可见
把每个列的宽度重新设置为至少30个像素，确保所有列都是可见的
如何配置列.
打开一个帮助窗口，说明了如何在WebSession列表中添加新列
右击WebSession列表，会出现一个很大的上下文菜单。在该上下文菜单中，很多选项只
有在选中了WebSession列表中一个或多个Session时才可见。FiddlerScript会对该菜单进行扩
展，因此它总是包含一些额外的命令。
AutoScrollSessionList选项用于决定Fiddler是否会自动把新增的Session添加到Web
Session列表中
Copy菜单项用于复制在WebSessions列表中选中的Session的信息，如表2-4所示。
表2-4
Copy菜单项
Just Url
把选中的Session的URL列表拷贝到剪贴板，每行一个url.当光标定位在WebSession
列表时，快捷键CTRL+U可完成此功能
This column
拷贝菜单所在列的文本。把选中的Session的这一列的文本添加到剪贴板中，每行一个Session