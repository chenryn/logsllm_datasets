### 问题描述
我最近安装了一个ESXi 6.5.0a（2017-02-02版本）系统。今天，我发现无法通过密码登录该系统，无论是通过Web GUI（vSphere Web Client）还是SSH密码认证都无法成功。

#### 错误信息
在Web GUI中，错误信息如下：
```
Cannot complete login due to an incorrect user name or password.
```

尽管如此，我之前配置的SSH公钥认证仍然可以正常工作，所以我仍然可以通过SSH以root身份访问控制台。我已经多次尝试使用`passwd root`命令更改密码，并重启了主机，但Web GUI和SSH密码认证仍然无法使用。

### 问题分析
自ESXi 6以来，系统引入了一个根账户锁定功能。该功能会在一定数量的失败登录尝试后逐渐增加锁定时间，最多可达900秒，并且这些锁定时间是累加的。DCUI控制台不受此影响，您的密码应该可以在那里正常使用。如果您的管理接口暴露在公共网络中，那么暴力破解SSH攻击可能会导致这个锁定计时器永远不会过期。

您可以查看`/var/log/hostd.log`和`/var/log/auth.log`日志文件以获取更多详细信息。

### 解决方案

1. **隔离管理接口**：将管理接口从公共网络中移除。
2. **配置防火墙**：设置内置防火墙，仅允许来自可信网络的流量。
3. **禁用SSH**：暂时禁用SSH服务并等待几小时，直到锁定计时器过期。之后您应该能够重新登录。

### 长期建议
- **创建非root管理员账户**：为日常管理任务创建一个非root的管理员账户。
- **禁用账户锁定功能**：通过在高级选项中将`Security.AccountLockFailures`设置为0来禁用账户锁定功能。
- **遵循最佳实践**：避免将管理网络暴露给公共网络，并在不需要时禁用SSH访问。

希望这些建议能帮助您恢复对ESXi主机的访问权限。