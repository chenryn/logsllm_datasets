OSPFv3在区域内检测到路由器标识冲突后，自动更改路由标识。
日志参数
参数名称 参数含义
ProcessId 进程号。
NewRouterId 新选择的路由器标识。
OldRouterId 原有的路由器标识。
ConflictRtrIdNum 路由器标识冲突的次数。
可能原因
在一个区域内有至少两台非直连路由器的Router ID配置相同，导致Router LSA不断刷
新，路由振荡。
处理步骤
步骤1 如果缺省情况下使能了undo ospfv3 router-id auto-recover disable的功能，则当区域内
发现Router ID冲突后，系统会自动恢复。
文档版本 06 (2017-09-12) 华为专有和保密信息 647
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
日志参考 62 OSPFv3
步骤2 如果系统无法自动恢复，则需要手动修改Router ID。
----结束
62.3 OSPFV3/6/OSPFV3_CONFLICT_ROUTERID_INTER
日志信息
OSPFV3/6/OSPFV3_CONFLICT_ROUTERID_INTER: OSPFv3 router ID conflict may
have occurred in inter-area.(ProcessId=[ProcessId], RouterId=[RouterId])
日志含义
由于外部路由不断刷新，提示用户OSPFv3可能发生区域间路由器标识冲突。
日志参数
参数名称 参数含义
ProcessId 进程号。
RouterId 路由器标识。
可能原因
在一个区域内有至少两台非直连路由器的router id配置相同，导致router lsa不断刷新，
路由振荡。
处理步骤
l 检查外部路由振荡原因，如果存在区域间router id冲突，请修改router id配置。
----结束
62.4 OSPFV3/4/OSPFV3_CONFLICT_ROUTERID_INTF
日志信息
OSPFV3/4/OSPFV3_CONFLICT_ROUTERID_INTF: OSPFv3 router ID conflict is detected
on the interface.(ProcessId=[ProcessId], RouterId=[RouterId], AreaId=[AreaId],
InterfaceName=[InterfaceName], InstanceId=[InstanceId], IpAddr=[IpAddr],
PacketSrcIp=[PacketSrcIp])
日志含义
OSPFv3在接口上检测到路由器标识冲突。
文档版本 06 (2017-09-12) 华为专有和保密信息 648
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
日志参考 62 OSPFv3
日志参数
参数名称 参数含义
ProcessId 进程号。
RouterId 路由器标识。
AreaId 区域标识。
InterfaceName 接口名称。
InstanceId 实例标识。
IpAddr IP地址。
PacketSrcIp 报文源地址。
可能原因
直连接口配置冲突的router id触发。
处理步骤
l 通过接口找到冲突的router id，修改router id配置。
----结束
62.5 OSPFV3/4/OSPFV3_CONFLICT_ROUTERID_INTRA
日志信息
OSPFV3/4/OSPFV3_CONFLICT_ROUTERID_INTRA: OSPFv3 router ID conflict is
detected in intra-area.(ProcessId=[ProcessId], RouterId=[RouterId], AreaId=[AreaId])
日志含义
OSPFv3在区域内检测到路由器标识冲突。
日志参数
参数名称 参数含义
ProcessId 进程号。
RouterId 路由器标识。
文档版本 06 (2017-09-12) 华为专有和保密信息 649
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
日志参考 62 OSPFv3
参数名称 参数含义
AreaId 区域标识。
可能原因
在一个区域内有至少两台非直连路由器的Router ID配置相同，导致router lsa不断刷新，
路由振荡。
处理步骤
l 修改冲突的Router ID，保证网络上在同一个区域内没有路由器的router id配置重
复。
----结束
62.6 OSPFV3/6/
OSPFV3_CONFLICT_ROUTERID_RECOVER
日志信息
OSPFV3/6/OSPFV3_CONFLICT_ROUTERID_RECOVER:Router IDs confliction is
recovered. (ProcessId=[ProcessId], AreaId=[AreaId], OldRouterId=[OldRouterId],
NewRouterId=[NewRouterId])
日志含义
远端OSPFv3 Router ID冲突恢复。
日志参数
参数名称 参数含义
ProcessId 进程号。
AreaId 区域标识。
OldRouterId 旧路由器标识。
NewRouterId 新路由器标识。
可能原因
远端OSPFv3 Router ID冲突恢复。
文档版本 06 (2017-09-12) 华为专有和保密信息 650
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
日志参考 62 OSPFv3
处理步骤
l 正常运行信息，无需处理。
----结束
62.7 OSPFV3/6/
OSPFV3_LAST_HELLO_RECV_SEND_TIME
日志信息
OSPFV3/6/OSPFV3_LAST_HELLO_RECV_SEND_TIME: The time when an OSPFV3
neighbor received and sent the last Hello packet before the neighbor went Down was
recorded.(ProcessId=[ProcessId], AreaId=[AreaId], InterfaceName=[IfName],
InterfaceIpAddress=[IfAddr], NeighborRouterId=[NeighborId],
HelloPacketDeadTimer=[HelloPacketDeadTimer],
LastHelloPacketRecvTime=[LastHelloPacketRecvTime],
LastHelloPacketSentTime=[LastHelloPacketSendTime], CpuUsage=[CpuUsage]%%)
日志含义
OSPFv3邻居断链之前最后一次收到和发送Hello报文的时间。
日志参数
参数名称 参数含义
ProcessId 进程号。
AreaId 区域号。
InterfaceName 接口名称。
InterfaceIpAddress 接口IP地址。
NeighborRouterId 邻居的路由器标识。
HelloPacketDeadTimer Hello报文超时时间。
LastHelloPacketRecvTime 最后一次收到Hello报文的时间。
LastHelloPacketSentTime 最后一次发出Hello报文的时间。
CpuUsage CPU使用率。
文档版本 06 (2017-09-12) 华为专有和保密信息 651
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
日志参考 62 OSPFv3
可能原因
OSPFv3收不到Hello报文导致邻居状态变为Down时，在日志中记录最后收到Hello报文
的时间。
处理步骤
步骤1 执行display ospfv3 interface命令检查OSPFv3接口状态是否Up。
l 是，则请执行步骤5。
l 否，则请执行步骤2。
步骤2 执行display ip interface命令检查OSPFv3接口状态是否Up。
l 是，则请执行步骤3。
l 否，则请执行步骤5。
步骤3 请检查是否可以Ping通邻居的接口地址。
l 是，则请执行步骤5。
l 否，则请执行步骤4。
步骤4 请检查组网是否正确。
l 是，则请执行步骤5。
l 否，请按照正确的拓扑组网。
步骤5 请联系技术支持人员。
----结束
62.8 OSPFV3/6/OSPFV3_NBR_CHANGE
日志信息
OSPFV3/6/OSPFV3_NBR_CHANGE: Neighbor changes event: neighbor status changed.
(ProcessId=[ProcessId], RouterId=[RouterId], Interface=[InterfaceName],
NbrEvent=[NbrEvent], NbrPreviousState=[NbrPreviousState],
NbrCurrentState=[NbrCurrentState], CpuUsage=[CpuUsage])
日志含义
收到一个邻居状态变化的事件。
日志参数
参数名称 参数含义
ProcessId 进程号。
RouterId 邻居路由器ID。
Interface 接口名称。
文档版本 06 (2017-09-12) 华为专有和保密信息 652
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
日志参考 62 OSPFv3
参数名称 参数含义
NbrEvent 导致邻居状态变化的事件：
l 0：HelloReceived，从邻居接收到一个Hello
l 1：Start，NBMA接口将以HelloInterval间隔向邻居发送Hello报文
l 2：2WayReceived，两台邻居设备之间达到双向通讯状态
l 3：NegotiationDone，邻居间完成主从协商
l 4：ExchangeDone，两台设备都已成功交换了完整的DD报文
l 5：BadLsReq，收到错误的LSR报文
l 6：LoadingDone，数据库交换过程完成
l 7：AdjOK，是否需要与邻居建立、维持邻接关系
l 8：SequenceNumberMismatch，DD报文序列号不匹配
l 9：1Way，从邻居收到1-way的Hello报文
l 10：KillNbr，删除邻居
l 11：LLDown，底层链路Down
l 12：InactivityTimer，邻居保持计时器被触发
NbrPreviousState 邻居先前状态：
l 0：Down
l 1：Init
l 2：Attempt
l 3：2Way
l 4：ExStart
l 5：Exchange
l 6：Loading
l 7：Full
NbrCurrentState 邻居当前状态：
l 0：Down
l 1：Init
l 2：Attempt
l 3：2Way
l 4：ExStart
l 5：Exchange
l 6：Loading
l 7：Full
CpuUsage CPU使用率。
文档版本 06 (2017-09-12) 华为专有和保密信息 653
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
日志参考 62 OSPFv3
可能原因
邻居状态改变。
处理步骤
l 正常运行信息，无需处理。
----结束
62.9 OSPFV3/3/OSPFV3_NBR_DOWN_REASON
日志信息
OSPFV3/3/OSPFV3_NBR_DOWN_REASON: Neighbor state left full or changed to Down.
(ProcessId=[ProcessId], NeighborRouterId=[NbrRouterId], NeighborIp=[NbrIp],
NeighborAreaId=[NbrAreaId], NeighborInterface=[IfName], NeighborDownImmediate
reason=[NbrImmReason],
NeighborDownPrimeReason=[NbrPriReason],CpuUsage=[CpuUsage])
日志含义
邻居离开Full状态或改变为Down状态。
日志参数
参数名称 参数含义
ProcessId 进程号。
NeighborRouterId 邻居路由器标识。
NeighborIp 邻居IP地址。
NeighborAreaId 邻居区域标识。
NeighborInterface 接口名称。
NeighborDownImmediate reason 邻居Down的直接原因。
NeighborDownPrimeReason 邻居Down的初始原因。
CpuUsage CPU使用率。
可能原因
邻居收到OSPFv3的报文或进行了影响OSPFv3邻居关系的操作，邻居状态发生迁移。
文档版本 06 (2017-09-12) 华为专有和保密信息 654
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
日志参考 62 OSPFv3
处理步骤
l 正常运行信息，无需处理。
----结束
62.10 OSPFV3/6/OSPFV3_INTF_STATE_CHANGE
日志信息
OSPFV3/6/OSPFV3_INTF_STATE_CHANGE: Interface [IfName] state changed from
[OldState] to [NewState]. (Event=[IfEvent], ProcessId=[ProcessId])
日志含义
OSPFv3接口状态发生变化。
日志参数
参数名称 参数含义
[IfName] 接口名称。
[OldState] 接口之前状态。包括：
l Down
l Loopback
l Waiting
l Point-to-point
l DR Other
l Backup
l DR
[NewState] 接口当前状态。包括：
l Down
l Loopback
l Waiting
l Point-to-point
l DR Other
l Backup
l DR
文档版本 06 (2017-09-12) 华为专有和保密信息 655
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
日志参考 62 OSPFv3
参数名称 参数含义
Event 接口变化事件。包括：
l InterfaceUp
l WaitTimer
l BackupSeen
l NeighborChange
l LoopInd
l UnloopInd
l InterfaceDown
ProcessId 进程号。
可能原因
原因1：接口状态机发生变化。
处理步骤
步骤1 正常运行信息，无需处理。
----结束
62.11 OSPFV3/3/OSPFV3_TRAP_IF_CONFIG_ERR
日志信息
OSPFV3/3/OSPFV3_TRAP_IF_CONFIG_ERR: A packet is received on the non-virtual
interface from a router whose configuration conflicts with the local configuration.
(RouterId=[RouterId], IfIndex=[IfIndex], IfInstId=[IfInstId], IfState=[IfState],
PacketSrc=[PacketSrc], ConfigErrorType=[ConfigErrorType], PacketType=[PacketType])
日志含义
OSPFv3建立邻居的接口配置不一致，可能是由于hello、dead、poll定时器配置不一致
或接口没有配置在一个区域。
日志参数
参数名称 参数含义
RouterId 本设备的Router ID。
IfIndex 本路由器接口的索引。
IfInstId 本路由器instance ID。
文档版本 06 (2017-09-12) 华为专有和保密信息 656
版权所有 © 华为技术有限公司