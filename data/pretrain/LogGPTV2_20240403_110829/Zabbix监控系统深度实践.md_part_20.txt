09Feb201410:39:30
09Feb201410:39:20
09Feb2014 10:39:30
09 Feb201410:39:30
09 Feb201410:39:20
09Feb201410:39:30
第9章IT services服务监控与Webmonitoing网络监控
10s138.7ms
10s160.1ms
200
20.04KBps
1.51KBps
10.77KBps
●149·
---
## Page 165
·150°
Zabbix监控系统深度实践
192.168.201.234
Response timefor step"vin home page"of scenario"webtest"
Response time for stephaidu home page"of scenarioweb test"
Response code for step”vip home paqe” of scenano"web test
hostname
echoc
echoR
echaA
Download speed forstep“vip home Dage"of scenario"web test”
Download speed for scenario"web test”"
192.168.201.234/zabbix/popup，php
saqeof scenanio“web test”"
09.02
10:4
图9-8
图9-7
1052
web test (1h)
5
web.testin["web test”,bps]
web.test.time[web test,viphome page
web.test.rspcode[web test,vip home
systemm.runt'echo A"]
web.test.in[web test,viphomepage,bps]
web.testerror[web test]
system.hostname
web.test.failweb test)
web.test.in[web test,bps]
nrun['echo C]
HostHostA
130
P3
Da
---
## Page 166
数据。在Zabbix中，Dashboard 栏目显示的是Zabbix整体的情况，包括Zabbix目前监控的性能
这个板块应该是最常用的了，Guest也可以访问。
10.1Monitoring板块
“Maps"、“Discovery”、“IT services”这些栏目。
“Inventory”“Reports"”、“Configuration”、“Administration”。二级菜单称为“栏目”，比如“Monitoring
大家在结束这一章的学习后，能够对Zabbix的每一个方面都有更深的印象。
应该能回想起这一部分大致是干什么用的，如果忘记了，再翻过去查阅前面几章的内容。希望
是为了将前端介绍清楚，一方面是让大家查缺补漏，也就是前端界面介绍到哪一部分，大家就
有了足够的了解。这一章，我们会统一把Zabbix前端界面的所有部分进行一个梳理。一方面
10.1.1Dashboard栏目
Dashboard的中文意思是“仪表盘”，就跟飞机、汽车的仪表盘一样，它显示的是整体性能
Monitoring 的作用是显示监控数据，它下面的栏目就是不同的数据，比如“Triggers”等。
为了使叙述更为清晰，笔者把一级菜单称为“板块”，
在前面的章节中，我们简单介绍了Zabbix 前端界面的几个部分，相信读者对Zabbix已经
Zabbix前端界面
，一共有这些板块：“Monitoring”
第10章
·151°
---
## Page 167
152
其类似。
URL 就可以看到。单击“Add Graph”后就可以选择需要的 Graph了。“Add Simple graph”与
Zabbix使用的是chart.php，绘制 Simple graph 的时候，使用的是history.php，这个在地址栏的
Graph，比如图10-2所示的“CPU jumps"。
的是自定义的Graph，比如想把CPU负载和空余内存放在一个Graph中，这个Graph就是普通
10-1所示。
它边上的按钮是菜单键，单击后可以编辑项目。按住菜单按钮后可以拖动模块的位置，如图
按钮，单击后可以进入Monitoring板块的Graphs栏目。
显示我们收藏的东西的，默认是空的。以“Favourite graphs”为例，它的最下方有“Graphs>>"
过一个页面，可以使得用户看到整个Zabbix的状况，包括Zabbix自身和它监控的服务器的状况。
数据，哪些 Host或者 Host group 出问题了，问题有多严重之类。Dashboard 的目的就是能够通
Zabbix监控系统深度实践
在Dashboard栏目中，每一个模块都可以进行拖动和折叠，右上角的箭头标志是折叠，在
而 Simple graph 指的是任意一个 Item自带的Graphs。它们的区别不大,绘制Graph的时候，
以“Favourite graphs”为例，单击菜单按钮，出现如图10-1所示选项。“Remove”用来删
Favourite graphs
No graphs added.
Zabbix server:cpunps(aN)
图10-2
图10-1
Simplegaph
---
## Page 168
graphs”是和账号绑定的，即不同的人看到的是不同的。
{HOSTNAME):(GRAPHNAME),单击就可以进入对应的Graph了。如图10-5所示。这个“Favourite
单击，“+”号就变成“-”号了，就是从“Favourite graphs”中删除。如图10-4所示。
单击以后，在“Favourite graphs”中就有了刚刚添加的Graph了，显示的名称形如
另外一种方式，是在看Graph（Simple graph一样）的时候，在屏幕右上部分找到“+”号，
6120
图10-4
图10-3
第10章Zabbix前端界面
●153°
---
## Page 169
·154°
的状态。出问题的会标红显示。
菜单都只有这个功能一
计算出来的。
数量。注意，这个数据是衡量Zabbix目前的压力的重要指标。这个数据，是根据items 的数量
都是这种表示方式。
monitored”和“templates"，分别表示监控中的 Host、没有监控的Host 和 Template数量。下面
态的Host 数量，显示的顺序就是“Parameter”中在“Number of hosts”括号内的“monitored”、“not
的IP和端口。
显示的数据如下。
Zabbix监控系统深度实践
在“Status ofZabbix”的菜单中，可以设置这些数据刷新的时间间隔。在中间这一列的模块
（2）Number of hosts（items/items/triggers/users）：Host的数量，“Details”中显示的是各个状
（1）Zabbix serveris running：Zabbix是否在运行，“Details”中显示的是 Zabbix server 运行
Favourite系列介绍完了，接下来看“Status ofZabbix”模块，
Updated:23:05:43
Required server performance,new valuesper second
Number of users (online)
Numberof triggers(enabled/disabled) [problem/ok]
Number of items(monitored/disabled/not supported)
Number of hosts(monitored/notmonitored/templates)
Zabbix server is running
Status of Zabbix
一调整数据刷新时间，如图10-6所示。
Favourite grahs回
图10-6
1.46
Yes
Value
图10-5
Graphs 
45/0[1/44]
68/0/12
11/0/41
localhost:10051
Details
，它显示的是Zabbix的状态
回肉
---
## Page 170
进行 Ack 操作。
中可以看到与这个 Trigger 相关的 Events。
problems"
果有Trigger在 problem 状态，那么这个Host就认为是“With problems"，反之就是“Without
好了,每一个模块都介绍完了。在中间这部分,是显示所有的Host group的内容的。大家想想，
剩下两个模块就比较简单了，一个是“Web monitoring"，另一个是“Discovery status”。“Web
单击“Last change”中的时间，可以跳转到对应的Event。也可以单击“Ack”中的“No”
图10-7是“Last 20 issues”模块，这里显示最近出问题的Triggers。把鼠标放在 Issue一列
单击“Host”按钮，可以执行一些指令，或者直接查看Host 的相关信息，如图10-8所示。
接着是“Host status”模块，它的粒度是 Host，表示各个 Host group 中Host 的状态。如
9:47
Issue
121an201413:54:35OK
22Jan201422:10:35PROBLEM19d1h19m19d1h19mNo
Time
Updatel
testgro
Host ge Go to
Update
Host
Last 20 issues
Hostinventory
Latestdata
Traceroute
Ping
Detectoperatingsystem
图10-8
图10-7
I5
StatusDurationAge
221a0201422:10:35
Last change
10d8h16m29d9h35mNo
第10章Zabbix前端界面
19d1h19m
Age
Ack
●155°
---
## Page 171
●156°
这里就不上图了。
“Separated”是分开显示，“Unacknowledgedonly”是只显示没有ack的。我们看图吧，在10-12
等级的Triggers。而最后的“Problem display”，有三个选项，如图10-11所示。
择显示的时候是否包含在maintenance 状态的 Host。“Triggers with severity”可以选择显示哪些
将“Host groups”选择为“Selected"，然后在下面进行配置，如图10-10所示。
让我们知道当前显示的可能不是所有的 Host group的数据。
的，单击“Disabled”就可以使其变为“Enabled”的了，在Dashboard上，这个标志会变为红色
Dashboard显示内容过多的问题。单击进去可以看到，这是一个过滤的功能。默认是“Disable
幸好，Zabbix 考虑到了这个问题。
Dashboard 的初衷就差远了，因为我们根本无法在一个屏幕清晰地看出 Zabbix 目前监控的状态。
Zabbix监控系统深度实践
可以使用的过滤条件并不多，一个是过滤想要显示或要隐藏的 Host group，使用方法就是
它表示的意思是Problem的Trigger的显示方式，“All"是指ack和没有ack的放在一起显示，
右侧的是“全屏”按钮，左侧的是配置Dashboard的选项，它可以解决Host太多从而使
在 Dashboard界面右上角找到如图10-9所示两个按钮。
Hide selected groupstype here to search
Showselectedgroups
Host groupsSelected
Problem display
Save
type here to search
图10-11
图10-10
图10-9
eparated
ledgedonly
---
## Page 172
10-14分别是在查看Triggers和Data的时候，问号的提示。
Application的Triggers状态或者是Items数据。
10.1.2
这个界面非常简单，右上角的问号处，鼠标移动上去后可以看到一些说明。图10-13和图
Overview栏目，是一个非常整体的数据展示。它显示的是某个Host group或某个
在左上角，可以显示标题栏是在上面还是在左边，如图10-15所示。
Updated:23:52:41
Updated:23:52:41
System status
Updated:23:52:21
Zabbixservers
testqroup
Discovered hosts
Host group
Host staturs
Updated:23:52:21
Zabbixservers
testqroup
Discovered hosts0
Host group
Zabbixservers
testqroup
Discovered hosts
Host group
Hoststatus
Zabbix servers
testoroup
Discovered hosts
Hostgroup
System status
Overview栏目
Disaster
Without problems
Disaster
Without problems
C
。
High-
High
Average
1ofI
1off
Average
图10-12
Warning
Warning
Of1
1of1
With problems
With
Information
Information
第10章Zabbix前端界面
Not classified
Not classified
●157°
回肉
回
---
## Page 173
·158°
细信息，如图10-16所示。
量太大，根本看不清。
Zabbix监控系统深度实践
10.1.3
这个栏目显示的是Web Scenario 中定义的 Web 监控的内容，单击某个项目，可以查看详
页面最好要做一下筛选再使用，否则数据会非常多。我个人不太使用这个页面，因为数据
Warning
InformationPROBLEM
Not classifiedPROBLEM
verage
Web栏目
图10-13
PROBLEM
PROBLEM
No trigger
Age less.than 30m
PROBLEM
PROBLEM
目
Waming
Information
Not classified PROBLEM
图10-16
图10-14
OK or no trigger
PROBLEM
PROBLEM