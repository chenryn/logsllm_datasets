• skip locked, nowait
– PostgreSQL 都支持
– MySQL 不支持， 阿里云RDS MySQL 支持nowait
功能差异 多引擎和外部源支持
-
• 多引擎支持
– PostgreSQL
• 内置heap, 通过插件实现内存表, 列存储, 压缩存储, 流式存储, 非关系存储等。
– MySQL
• MyISAM, innodb, ...
• 外部表
– PostgreSQL支持任意外部数据源, (例如jdbc, file, odbc, oracle, mysql, db2, redis, mongo,
ES, hadoop......)
– https://wiki.postgresql.org/wiki/Fdw
– MySQL 仅支持csv文件外部表
• dblink
– PostgreSQL 支持, MySQL 暂不支持
• 内存表
– 都支持, (PostgreSQL 通过外部表支持)
• ES 引擎
– PostgreSQL 支持
– MySQL 不支持
功能差异 安全
-
• 数据加密
– PostgreSQL 支持加密数据类型，可选GPG加密算法
– MySQL 需要通过其他手段达到目的
• 认证方法
– PostgreSQL 支持 密码、LDAP、AD、GSSAPI、SSPI、Ident、Peer、
RADIUS、PAM、签名认证
– MySQL 支持 密码 认证
• 数据传输加密
– 都支持
• 行安全策略
– PostgreSQL 支持, MySQL 暂不支持
• 数据库内部支持libselinux接口, (美国国家安全局制定的安全加
强标准)
– PostgreSQL 支持, MySQL 暂不支持
功能差异 优化器
-
• http://www.postgresql.org/docs/9.5/static/runtime-config-query.html
• GPU 并行计算支持
– PostgreSQL 支持
– MySQL 不支持
• 遗传优化器算法
– PostgreSQL 支持CBO、CRO、遗传算法
– MySQL 支持CBO、CRO
• HINT PLAN
– 都支持
• CPU 并行计算
– PostgreSQL 9.6支持 (线性性能提升)
– MySQL 不支持
• 自定义成本因子
– PostgreSQL 支持
– MySQL 不支持
功能差异 可用性和可靠性
-
• 多master
– 都支持
• 逻辑复制
– 都支持
• 物理复制
– PostgreSQL 支持, MySQL 不支持
• 级联复制
– 都支持
• 同步复制
– 都支持
• pasox，设置保护级别（副本数）
– PostgreSQL 9.6 支持
– MySQL 不支持
• 主备延迟
– PostgreSQL 不受事务大小限制, 几乎没有延迟(ms以内)
– MySQL延迟和事务大小相关, 长事务会导致巨大主备延迟
• 在线备份, 增量备份
– 都支持
• 基于REDO的数据库回滚，修复主备时间线错乱
– PostgreSQL 支持, MySQL不支持
• 任意时间点恢复(事务粒度)
– 都支持, MySQL 需要用户自己写程序来支持
功能差异 编程扩展能力
-
• 是否支持采样查询
– PostgreSQL 支持, MySQL不支持
• 是否支持扩展采样算法
– PostgreSQL 支持, MySQL不支持
• 自定义数据类型
– PostgreSQL 支持, MySQL 不支持
• 自定义索引方法
– PostgreSQL 支持, MySQL 不支持
• 字符集自动转换, C扩展接口
– PostgreSQL 支持, MySQL 不支持
• 自定义聚合
– PostgreSQL 支持, MySQL 不支持
• 自定义窗口
– PostgreSQL 支持, MySQL 不支持
功能差异 管理特性
-
• JOB 支持
– 都支持
• 支持数据缓存快照和预热
– PostgreSQL 支持, MySQL不支持
• 支持数据文件块级别fadvise flag设置
– PostgreSQL 支持, MySQL不支持
• 性能诊断方法
– PostgreSQL
• explain (analyze, verbose, costs, timing, buffers)
• IO Time
• profile
• probe
• auto_explain
– MySQL
• explain
• 角色权限继承
– PostgreSQL 支持, MySQL 暂不支持
功能差异
• MySQL支持，但是PostgreSQL不支持的功能
– 暂未发现，待补充
性能
• 性能
– TPC-H(OLAP), 复杂查询 PostgreSQL 优势非常明显
• PostgreSQL 支持GPU加速
• PostgreSQL rewrite能力更强
• PostgreSQL 支持hash join, hash agg, merge join
• PostgreSQL btree,hash,gin,gist,sp-gist,brin索引方法
– TPC-C(OLTP) PostgreSQL 优势非常明显
• TPS比 PgSQL : MySQL ~= 2:1
– TPC-B PostgreSQL 略优于 MySQL
– 秒杀，模糊查询，地理位置信息查询，范围查询，
实时流式计算，批量入库等场景 PostgreSQL 优势非
常明显
平台兼容性
• 不相上下
服务端编程语言
• 函数(过程)语言
– PostgreSQL
• plpgsql, sql, c, c++, java, javascript, R, python, perl, php, tcl, ruby, lua,
julia, ...
– MySQL
• sql, 不支持其他扩展编程语言
扩展能力
• 扩展能力
– 类型扩展，操作符扩展，函数扩展，索引方法扩展，
索引扩展，
• PostgreSQL 支持, MySQL不支持
– C触发器函数， C事件触发器函数
• PostgreSQL 支持, MySQL不支持
– 函数语言扩展
• PostgreSQL 支持扩展函数支持接口, erlang, ....
• MySQL 不支持
– 机器学习库
• PostgreSQL 支持, MySQL 不支持
– 流式计算
• PostgreSQL 支持, MySQL 不支持
能力
scale up
• PostgreSQL
– 资源管控能力强。
– 单实例可以充分发挥 HPC的性能，有多少资源
就能使用多少资源。
• MySQL
– CPU，内存管理能力较弱，单实例不能充分发
挥 的性能。
HPC
能力
scale out
• 都支持 sharding
• PostgreSQL完全支持以下下推功能
– 是否支持聚合算子下推
– 是否支持 WHERE条件下推
– 是否支持 JOIN下推
– 是否支持 SORT下推
– 是否支持 SELECT 子句下推
– 是否支持跨数据源 JOIN
应用场景
• PostgreSQL
– 几乎适合任何场景
• MySQL
– 适合相对简单的应用场景，大多数需要应用层
代码实现
社区
• 社区状态
– PostgreSQL
• 单一开源分支，社区力量较集中。全球有1000名以上的内核研发人员。
• 社区研发由核心组员和committer组成，持续5年以上对社区版本有贡献内
核研发人员超过50位。
• 社区核心人员分别来自数据库厂商，数据库支持和服务公司，数据库最
终用户的公司，形成了一个非常好的力量均衡。
– MySQL
• 分支非常多， 引擎非常多。社区力量分散，各自为政，兼容性很难统一。
• 社区活跃度
– PostgreSQL
• 非常活跃
– MySQL
• 非常活跃
生态
• DBA
– PostgreSQL，国内供不应求
– MySQL
• 内核研发
– PostgreSQL，国内超过100名内核研发，依旧供不应求
– MySQL
• 应用开发
– PostgreSQL，SQL兼容性强，开发人员通用
– MySQL，SQL兼容性较弱，企业应用开发人员难接受
• 客户端驱动
– PostgreSQL，兼容性强
– MySQL，兼容性强
• 开发框架
– PostgreSQL，兼容性非常好，有一些非常特殊的开发框架（如IOT，化学，医疗，基因库，GIS...）
– MySQL，兼容性好
• 服务端编程语言
– PostgreSQL，扩展能力极强，支持各种服务端编程语言
– MySQL，不支持扩展