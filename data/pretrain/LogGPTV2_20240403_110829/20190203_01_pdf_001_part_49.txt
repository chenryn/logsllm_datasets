publication tables are to be validated.
-repgrouptype
Specify s if this command applies to a single-master replication system. Specify m
if this command applies to a multi-master replication system.
Examples
In the following example, the Oracle publication database definition identified by
publication database ID 1 is validated.
$ java -jar edb-repcli.jar -validatepubs \
> -repsvrfile ~/pubsvrfile.prop \
> -pubdbid 1 -repgrouptype s
Validating all available publications ...
The schema definitions for all the non snapshot-only publications tables are
in sync
with the source.
The "validatepubs" feature is not available for the following snapshot-only
publications:
- salesemp
8.3.29 Removing a Publication (removepub)
The removepub command removes one or more publications.
Synopsis
-removepub pubname_1 [ pubname_2 ] ...
–repsvrfile pubsvrfile
-repgrouptype { m | s }
See Section 7.6.6 for additional information on removing a publication.
Copyright © 2010 - 2018 EnterpriseDB Corporation. All rights reserved. 571
EDB Postgres Replication Server User’s Guide
Parameters
pubname_n
The name of a publication to be removed.
pubsvrfile
The file containing the publication server login information.
-repgrouptype
Specify s if this command applies to a single-master replication system. Specify m
if this command applies to a multi-master replication system.
Examples
A publication named dept_emp is removed from a single-master replication system.
$ java -jar edb-repcli.jar -removepub dept_emp \
> -repsvrfile ~/pubsvrfile.prop -repgrouptype s
Removing publication...
Publication dept_emp unpublished successfully.
8.3.30 Replicating DDL Changes (replicateddl)
The replicateddl command applies an ALTER TABLE statement to a publication table
in all databases of a replication system as well as updates the xDB Replication Server
insert/update/delete triggers and shadow table associated with that publication table.
Synopsis
-replicateddl pubname
–repsvrfile pubsvrfile
-table schema_t.table_name
-ddlscriptfile script_file
See Section 7.8 for additional information on DDL change replication.
Parameters
pubname
The name of the publication containing the table to which the ALTER TABLE
statement is to be applied.
pubsvrfile
Copyright © 2010 - 2018 EnterpriseDB Corporation. All rights reserved. 572
EDB Postgres Replication Server User’s Guide
The file containing the publication server login information.
schema_t
The name of the schema containing table_name. This value is case-sensitive.
table_name
The name of the table in the ALTER TABLE statement whose definition is to be
modified. This value is case-sensitive.
script_file
Path to the file containing the ALTER TABLE statements.
Examples
The following example shows the addition of a column named title to table edb.emp.
The ALTER TABLE statement is in the text file addcolumn.sql as shown by the
following:
ALTER TABLE edb.emp ADD COLUMN title VARCHAR(20);
The replicateddl command is executed using the addcolumn.sql file to update the
triggers and shadow tables on the master nodes:
$ java -jar edb-repcli.jar -replicateddl emp_pub \
> -repsvrfile ~/pubsvrfile.prop \
> -table edb.emp \
> -ddlscriptfile ~/addcolumn.sql
DDL changes successfully replicated to all master nodes.
8.3.31 Adding a Subscription Database (addsubdb)
For SMR only: The addsubdb command adds a subscription database definition.
Synopsis
-addsubdb
-repsvrfile subsvrfile
-dbtype { oracle | enterprisedb | postgresql | sqlserver }
-dbhost host
-dbport port
-dbuser user
{ -dbpassword encrypted_pwd | -dbpassfile pwdfile }
[ -oraconnectiontype { sid | servicename } ]
-database dbname
[ -urloptions jdbc_url_parameters ]
Copyright © 2010 - 2018 EnterpriseDB Corporation. All rights reserved. 573
EDB Postgres Replication Server User’s Guide
The addsubdb command creates a new subscription database definition. The addsubdb
command displays a unique subscription database ID that is assigned to the newly created
subscription database definition. The subscription database ID is used to identify the
subscription database definition on which to operate when running other xDB Replication
Server CLI commands.
See Section 5.3.2 for details on the database connection information that must be
supplied when adding a subscription database definition.
Parameters
subsvrfile
The file containing the subscription server login information.
-dbtype
Specify oracle if the database is an Oracle database. Specify enterprisedb if
the database is an Advanced Server database in Oracle compatible configuration
mode. Specify postgresql if the database is a PostgreSQL database or an
Advanced Server database in PostgreSQL compatible configuration mode.
Specify sqlserver if the database is a Microsoft SQL Server database.
host
The IP address of the host on which the subscription database server is running.
port
The port number on which the database server is listening for connections.
user
The subscription database user name.
encrypted_pwd
The encrypted password of the subscription database user. See Section 8.3.4 for
directions on using the encrypt command to generate an encrypted password.
pwdfile
The file containing the encrypted password of the subscription database user.
-oraconnectiontype
Copyright © 2010 - 2018 EnterpriseDB Corporation. All rights reserved. 574
EDB Postgres Replication Server User’s Guide
Specify sid if the Oracle system ID (SID) is used to identify the subscription
database in the database parameter. Specify servicename if the Oracle
service name is used to identify the subscription database in the database
parameter. Note: For Oracle 12c, use the service name.
dbname
The Postgres or SQL Server database name, the Oracle SID, or the Oracle service
name of the subscription database.
jdbc_url_parameters
Extended usage of JDBC URL parameters such as for support of SSL
connectivity. (See Section 7.11 for information on SSL connectivity to the
subscription database.)
Examples
The following example adds a subscription database definition for an Oracle database.
The encrypted password is given on the command line with the dbpassword parameter.
A subscription database ID of 1 is assigned to the database by the subscription server.
$ java -jar edb-repcli.jar -addsubdb -repsvrfile ~/subsvrfile.prop \
> -dbtype oracle -dbhost 192.168.2.6 -dbport 1521 \
> -dbuser subuser -dbpassword ygJ9AxoJEX854elcVIJPTw== \
> -oraconnectiontype sid \
> -database xe
Adding Subscription Database...
Subscription database added successfully. Subscription Database id:1
The following example adds a subscription database definition for an Advanced Server
database. The encrypted password is read from a file named pwdfile with the
dbpassfile parameter. A subscription database ID of 2 is assigned to the database by
the subscription server.
$ java -jar edb-repcli.jar -addsubdb -repsvrfile ~/subsvrfile.prop \
> -dbtype enterprisedb -dbhost 192.168.2.7 -dbport 5444 \
> -dbuser subuser -dbpassfile ~/pwdfile \
> -database subdb
Adding Subscription Database...
Subscription database added successfully. Subscription Database id:2
8.3.32 Printing Subscription Database IDs (printsubdbids)
For SMR only: The printsubdbids command prints the subscription database IDs of
the subscription database definitions.
Synopsis
-printsubdbids -repsvrfile subsvrfile
Copyright © 2010 - 2018 EnterpriseDB Corporation. All rights reserved. 575
EDB Postgres Replication Server User’s Guide
Parameters
subsvrfile
The file containing the subscription server login information.
Examples
The following example lists the subscription database IDs of the subscription database
definitions.
$ java -jar edb-repcli.jar -printsubdbids -repsvrfile ~/subsvrfile.prop
Printing subscription database ids...
1
2
8.3.33 Printing Subscription Database Details
(printsubdbidsdetails)
For SMR only: The printsubdbidsdetails command prints the connection
information for each subscription database definition.
Synopsis
-printsubdbidsdetails –repsvrfile subsvrfile
The output has the following components:
dbid:host:port:dbname:user
Note: The database user’s password is not displayed.
Parameters
subsvrfile
The file containing the subscription server login information.
dbid
The subscription database ID assigned to the subscription database definition.
host
The IP address of the host on which the subscription database server is running.
port
Copyright © 2010 - 2018 EnterpriseDB Corporation. All rights reserved. 576
EDB Postgres Replication Server User’s Guide
The port number on which the database server is listening for connections.
dbname
The Postgres or SQL Server database name, the Oracle SID, or the Oracle service
name of the subscription database.
user
The subscription database user name.
Examples
The following are the subscription database definitions subordinate to the subscription
server identified by the content of file subsvrfile.prop.
$ java -jar edb-repcli.jar -printsubdbidsdetails \
> -repsvrfile ~/subsvrfile.prop
Printing subscription database ids with details...
id:host:port:database|sid:user
1:192.168.2.6:1521:xe:subuser
2:192.168.2.7:5444:subdb:subuser
8.3.34 Updating a Subscription Database (updatesubdb)
For SMR only: The updatesubdb command provides the ability to change the
connection information for an existing subscription database definition identified by its
subscription database ID.
Synopsis
-updatesubdb
-repsvrfile subsvrfile
-subdbid dbid
-dbhost host
-dbport port
-dbuser user
{ -dbpassword encrypted_pwd | -dbpassfile pwdfile }
[ -oraconnectiontype { sid | servicename } ]
-database dbname
[ -urloptions jdbc_url_parameters ]
The subscription database definition to be updated is identified by the subdbid
parameter.
See Section 5.3.2 for details on the database connection information that must be
supplied for a subscription database definition.
Parameters
Copyright © 2010 - 2018 EnterpriseDB Corporation. All rights reserved. 577
EDB Postgres Replication Server User’s Guide
subsvrfile
The file containing the subscription server login information.
dbid
The subscription database ID of the subscription database definition to be
updated.
host
The IP address of the host on which the subscription database server is running.
port
The port number on which the database server is listening for connections.
user
The subscription database user name.
encrypted_pwd
The password of the database user in encrypted form. See Section 8.3.4 for
directions on using the encrypt command to generate an encrypted password.
pwdfile
The file containing the password of the database user in encrypted form.
-oraconnectiontype
Specify sid if the Oracle system ID (SID) is used to identify the subscription
database in the database parameter. Specify servicename if the Oracle
service name is used to identify the subscription database in the database
parameter. Note: For Oracle 12c, use the service name.
dbname
The Postgres or SQL Server database name, the Oracle SID, or the Oracle service
name of the subscription database.
jdbc_url_parameters
Extended usage of JDBC URL parameters such as for support of SSL
connectivity. (See Section 7.11 for information on SSL connectivity to the
subscription database.) Specification of the urloptions parameter completely
Copyright © 2010 - 2018 EnterpriseDB Corporation. All rights reserved. 578
EDB Postgres Replication Server User’s Guide
replaces any existing JDBC URL parameters that may have previously been
specified with this database. Omission of the urloptions parameter deletes any
existing JDBC URL parameters that may have previously been specified with this
database.
Examples
In the following example, an existing subscription database definition with subscription
database ID 2 is updated.
$ java -jar edb-repcli.jar -updatesubdb -repsvrfile ~/subsvrfile.prop \
> -subdbid 2 \
> -dbhost 192.168.2.7 -dbport 5444 \
> -dbuser subuser -dbpassfile ~/pwdfile \
> -database subdb
Updating subscription database ...
Subscription database with ID 2 is updated successfully.
8.3.35 Removing a Subscription Database (removesubdb)
For SMR only: The removesubdb command removes a subscription database
definition.
Synopsis
-removesubdb –repsvrfile subsvrfile –subdbid dbid
The subscription database definition to be removed is identified by the subdbid
parameter.
See Section 5.5.6 for additional information on removing a subscription database.
Parameters
subsvrfile
The file containing the subscription server login information.
dbid
The subscription database ID of the subscription database definition to be
removed.
Examples
The subscription database definition identified by subscription database ID 2 is removed.
$ java -jar edb-repcli.jar -removesubdb -repsvrfile ~/subsvrfile.prop \
> -subdbid 2
Copyright © 2010 - 2018 EnterpriseDB Corporation. All rights reserved. 579
EDB Postgres Replication Server User’s Guide
Removing Subscription Database...
Subscription Database removed.
8.3.36 Creating a Subscription (createsub)
For SMR only: The createsub command creates a new subscription.
Synopsis
-createsub subname
-subsvrfile subsvrfile
-subdbid dbid
-pubsvrfile pubsvrfile
-pubname pubname
[ -filterrule filterid_1[,filterid_2 ] ...]
The createsub command adds a new subscription subordinate to the subscription
database definition with the subscription database ID given by parameter subdbid.
See Section 5.3.3 for additional information on creating a subscription.
Parameters
subname
The subscription name to be given to the new subscription.
subsvrfile
The file containing the subscription server login information of the subscription
server under which the new subscription is subordinate.
dbid
The subscription database ID of the subscription database definition subordinate
to which the new subscription is to be added.
pubsvrfile
The file containing the publication server login information of the publication
server under which the publication is subordinate to which the new subscription is
to be associated.