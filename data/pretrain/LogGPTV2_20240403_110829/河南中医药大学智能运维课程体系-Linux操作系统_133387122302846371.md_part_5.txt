最基本的网络配置：IP/Mask、Gateway/Route、DNS
√ifconfig：临时配置网络信息
√configfile：使用vi修改网络配置文件
nmcli：推荐使用，CentOS使用NetworkManager
nmtui：推荐使用，在GUI界面下进行网络配置
---
## Page 69
69
4.远程管理
4.1远程管理概述
远程管理是指在网络上由一台计算机（主控端）远距离控制另一台计算机（被
控端）的技术。
■远程不是字面意思的远距离，一般指通过网络控制远端计算机
■当操作者使用主控端计算机控制被控端计算机时，就如同坐在被控端计算机的屏幕
前一样，可启动被控端计算机的应用程序，可使用被控端计算机的文件数据，甚至
可以利用被控端计算机的外部打印设备和通信设备来进行打印和访问互联网。
1如果是个人计算机，就没有远程管理的概念，想用的时候直接开机，而对于服务器
来说，远程管理就变的十分重要，服务器一般放置在数据中心中，对服务器进行管
理的主要途径就是通过远程方式。
---
## Page 70
70
4.远程管理
4.1远程管理概述
口Linux常用的远程管理协议有Telnet、SSH、VNC.
■ Telnet:
口所有数据在网络上都是明文传输，比如用户在登录服务器时输入的用户名和密码，因为在
网络中以明文方式传输，存在一定的安全隐患。
I SSH:
全称是Secure Shell（安全Shell），使用SSH可将客户机与远程服务器之间的通信数据进
行加密，从而提高远程登录的安全性。
口目前UNIX/Linux操作系统最常用的远程管理方式。
I VNC:
口可在本机计算机以图形的方式显示远程服务器的图形界面。进行VNC登录时，既可使用专
门的客户端软件，也可使用浏览器进行登录。
---
## Page 71
71
4.远程管理
4.2CentOS实现SSH远程管理
通过SSH协议进行远程管理是C/S结构，需要：
■受控端
（例如安装Linux操作系统的服务器）安装支持SSH协议的服务器端软件
■主控端（例如用于远程管理的Windows计算机）安装支持SSH协议的客户端软件
OpenSSH是Linux操作系统广泛使用的支持SSH协议的服务器端软件。
■ Remote operations are done using ssh, scp, and sftp.
 The service side consists of sshd, sftp-server, and ssh-agent.
OpenSSH支持SSH协议的1.3、1.5和2版本。
OpenSSH
KEEPING YOUR COMMUNIQUES SECRET
http://www.openssh.com
河南中医药大学信息技术学院互联网技术教学团队／https://internet.hactcm.edu.cn /http://www.51xueweb.cn
---
## Page 72
72
OpenSSH Users
The following operating systems and products are known to integrate OpenSSH into the base system.
4.远程管
This list is in chronological order, with systems that integrated it first listed earlier.
ntOS实现SSH远程管理
·OpenBSD
·FreeBSD
·BSDiBSD/OS
·NetBSD
Computone
· Stallion
· Cygwin
● Mac OS X Version 10.1 and later
· HP Procurve Switch 4108GL and 2524/2512
· IBMAIX
● Sun Solaris 9 and later (named SunSSH)
·SmoothWall
· SGI Irix
·ThinLinc
· Nokia IPSO
● Cisco CSS11500 series content services switches
● Cisco SN 5400 series storage routers
· TopLayer IDS balancers
● NTI SSH Serial Port Switch
· Bluecoat (formerly Cacheflow) Proxy SG
● Novell NetWare
● Digi CM Console Servers
●Alcatel OmniSwitch
· Dell PowerConnect L2 and L3 Switches
· HP-UX (known as HP-UX Secure Shell)
· Packeteer PacketShaper 6.0 and above.
● Juniper Networks JUNOS
· All Linux systems, such as Red Hat.
● Microsoft Windows
We are certain there are many other vendors, systems, and products, but we prefer to work on the software
rather than maintaining a list on a web page, so please only tell us about items missing on this list when it is
important.
河南中医药大学信息技术
---
## Page 73
73
4.远程管理
4.2CentOS实现SSH远程管理
口在CentOS上实现SSH方式的远程管理的配置步骤：
第一步：在CentOS上安装OpenSSH软件。
第二步：配置OpenSSH随操作系统自启动。
第三步：修改OpenSSH的配置文件/etc/ssh/sshd_config。
·第四步：配置防火墙支持SSH协议的访问。
·第五步：使用支持SSH协议的客户端软件远程管理CentOS
1支持SSH协议的客户端软件有：
Windows平台:
Putty、Termius、XShell、Bitvise SSH、MobaXterm
DameWare SSH、SmarTTY、Cygwin
Mac平台:
OpenSSH Client、Shuttle、Secure Shell、Termius
Android平台:
iOS平台:
Prompt、Termius、iSSH
河南中医药大学信息技术学院互联网技术教学团队／https://interne
hactcm.edu.cn / http://www.51xueweb.cn
---
## Page 74
74
4.远程管理
4.2CentOS实现SSH远程管理
CentOS在最小化安装时已默认安装sshd服务且开机自启动，防火墙也已允许
sshd服务。
1.
#查看sshd运行状态
2.
[root@Project-01-Task-02~]#systemctl status sshd
3.
·sshd.service-OpenSSH server daemon
4.
Loaded: loaded (/usr/lib/systemd/system/sshd.service; enabled; vendor preset: enabled)
5.
#running提示已启动
6.
Active: active (running) since Wed 2020-02-12 22:51:21 CST; 3min 44s ago
7.
Docs: man:sshd(8)
8.
man:sshd_config(5)
9.
#sshd服务的当前进程号为874
10.
Main PID: 874 (sshd)
11.
Tasks: 1 (limit: 5036)
12.
Memory: 7.0M
13.
CGroup: /system.sice/sshd.service
14.
L874 /usr/sbin/sshd -D -oCiphers=PI:EMAIL,chacha20-poly1305
@openssh.com,aes256-ctr,aes256-cbc,PI:EMAIL,aes128-ctr,aes128-cbc ->
15.
16.
Feb 12 22:51:20 Project-01-Task-02.localdomain systemd[1]: Starting OpenSSH server daemon..
17. Feb 12 22:51:21 Project-01-Task-02.localdomain sshd[874]: Server listening on 0.0.0.0 port 22.
操作命令+配工文件+脚本程序+结束
河南中医药大学信息技术学院互联网技术教学团队/https://internet.hactcm.edu.cn /http://www.51xueweb.cn
---
## Page 75
表3-5OpenSSH常用字段解释
75
字段名称
含义
Port
设置SSH的端口号
Protocol
启用SSH版本的协议
ListenAddress
设置服务监听的地址
4.远程管理
4.2 CentOS实现SSH远程管理
DenyUsers
拒绝访问的用户
AllowUsers
允许访问的用户
PermitRootLogin
设置是否禁止 root用户登录
PermitEmptyPasswords
设置用户登录是否需要密码认证
PasswordAuthentication
是否启用口令认证方式
指定客户端发送的哪些环境变量将会被传递到会话环境中，只有 SSH-
AcceptEnv
2协议支持环境变量的传递
指定 sshd(8)应当使用哪种地址族。取值范围是："any"(默认)、
AddressFamily
"inet"(仅 IPv4)、"inet6"(仅 IPv6)
AllowGroups
指令后面跟着一串用空格分隔的组名列表(其中可以使用""和"?"通配
符)。默认允许所有组登录
 AllowTcpForwarding
是否允许TCP转发，默认值为"yes"
AuthorizedKeysFile
存放该用户可以用来登录的RSA/DSA公钥
将指令指定的文件中内容在用户进行认证前显示给远程用户。这个特性
Banner
仅能用于SSH-2，默认什么内容也不显示。"none"表示禁用这个特性
是否允许质疑-应答(challenge-response)认证。默认值是"yes"
Ciphers
指定SSH-2允许使用的加密算法。多个算法之间使用逗号分隔
sshd(8)在未收到任何客户端回应前最多允许发送多少个"alive"消息。
ClientAliveCountMax
默认值是3
设置一个以秒记的时长，如果超过这么长时间没有收到客户端的任何数
ClientAlivelnterval
据，sshd(8)将通过安全通道向客户端发送一个"alive"消息，并等候应
答。默认值0表示不发送"alive"消息。这个选项仅对SSH-2有效
Compression
是否对通信数据进行加密，还是延迟到认证成功之后再对通信数据加密
强制执行这里指定的命令而忽略客户端提供的任何命令。这个命令将使
ForceCommand
用用户的登录shell 执行
GatewayPorts
是否允许远程主机连接本地的转发端口
LoginGraceTime
限制用户必须在指定时限内认证成功，0表示无限制。默认值是120秒
MaxStartups
最大允许保持多少个未认证的连接。默认值是10
MaxAuthTries
指定每个连接最大允许的认证次数。默认值是6
指定 sshd(8)是否应该对远程主机名进行反向解析，以检查此主机名是
河南中医药大学信息技术学院互联网技术教学团
UseDNS
否与其IP地址真实对应。默认值为"yes"
---
## Page 76
76
通过SSH方式管理远程CentOS
 在CentOS上安装OpenSSH
启动sshd服务并查看服务运行状态
√设置sshd服务自启动
配置sshd服务（/etc/ssh/sshd_config)
多终端的SSH客户端应用：windows、android
---
## Page 77
77
5.网络管理
对Linux操作系统网络管理的认识与理解
河南中医药大学信息技术学院互联网技术教学团队/https://internet.hactcm.edu.cn /http://www.51xueweb.cn 
---
## Page 78
78
System Call Interface(SCl)
Process
Virtual File
Management(PM)
System (VFS)
Memory
NetworkStack
Management(MM)
gvim
XServer
ssh
gcc
firefox
User Space
Kernel Space
Network
VirtualFileSystem
Arch
DeviceDrivers(DD）
Process
Memory
Management
Stack/
Management
Subsystem
FileSystems
Drivers
Character
for
System Call interface , SCI
Network
Architecture
Physical8
Block
Friends
Dependent
Virtual
DeviceDrivers
DeviceDrivers
Code
Memories
 Process Scheduler , PM
HardwareProtocol LayerslikeCSB2
Kernel Space
Hardware Space
Memory Manager, MM 
Memory
Network
Storage
All other
CPU
Interfaces
Devices
Devices
linux kernel
Virtual File System , VFS
Inter-Process Communication, IPC
Network Stack，网络子系统
Arch,CPU架构相关代码
DD，设备驱动程序
---
## Page 79
Legend:
Programmatic Network Interface
O/S Services
Non-Kernel
Layer
Network
Interface
VirtualFile
Kernel Sub-
System Call Interface
System
System
Protocol Independent
Process
Interface
ainpow
Scheduler
+
System Call interface, SCI
Network Protocols
Multiple
Modules
+
Device Independent
Process Scheduler , PM
Interface
Control Flow...
DataFlow
Network Device Drivers
Memory Manager, MM
Kernel
Virtual File System, VFS
Device Hardware
Hardware
Network Device Drivers，网络设备的驱动
linux kernel
Device Independent Interface,统一设备模型
ols，实现网络传输协议
Network Stack,网络子系统
屏蔽不同的硬件设备和网络协议
ntInterface
以相同的格式提供接口 (socket)
interface，系统调用接口
Arch,CPU架构相关代码
DD,设备驱动程序
---
## Page 80
80
Network Device Drivers，网络设备的驱动
DeviceIndependent Interface，统一设备模型
linux kernel
Network Protocols，实现网络传输协议
Network Stack,网络子系统
Protocol Independent Interface
systemd-networkd
网络配置工具
42
NetworkManager
System Call interface,系统调用接口
网络管理工具
网络测试工具
③
网络监控工具
---
## Page 81
81
systemd-networkd
systemd是freedesktop的项目。
·官网 https://www.freedesktop.org/wiki/Software/systemd。
该项目源码在 github 上发布，可以在 https://github.com/systemd/systemd 查看所有
版本更新、Bug Fix 和版本对应的文档等。
1systemd-networkd是systemd默认提供的网络管理服务。
·systemd-networkd可以完全管理以太网，但不能管理无线网卡、PPP等。
systemd-networkd是用于管理网络的系统服务，它能够检测并配置网络连接，也能够
创建虚拟网络设备。
---
## Page 82
82
systemd-networkd
1systemd-networkd的配置包括三个方面。
systemd.netdev：创建虚拟网络设备。
systemd.network：配置所有匹配的网络连接的地址与路由。
■当systemd-networkd服务退出时，通常不做任何操作，以保持当时已经存在的
网络设备与网络配置不变。
，从initramfs 切换到实际根文件系统以及重启该网络服务都不会导致网络连接中断
更新网络配置文件并重启systemd-networkd服务之后，那些在更新后的网络配置文件
中已经被删除的虚拟网络设备(netdev)仍将存在于系统中，有可能需要手动删除。
■服务的配置文件存放位置依据优先级不同而不同。
优先级最低的存放在/usr/lib/systemd/network目录
优先级居中的存放在/run/systemd/network目录
优先级最高的存放在/etc/systemd/network目录
---