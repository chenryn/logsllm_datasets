(3)
When γ = 1, we have the Manhattan or city-block distance. In contrast, for
γ = 2, we have the Euclidean distance. It is shown that the Chebyshev distance,
i.e. γ = ∞, can be expressed as
S∞(x, y) = lim
γ→∞Sγ(x, y) = max
We also consider the Canberra distance given by
i
|xi − yi|.
Scanb(x, y) =
N(cid:8)
i=1
|xi − yi|
xi + yi
.
(4)
If both xi and yi are zero the ratio of the diﬀerence to the sum is taken to be
zero. The Canberra distance is suitable for variables taking non-negative values
and is sensitive to small changes close to zero values [11].
The two delay patterns x and y can also be thought of as two vectors in a
N-dimensional delay space. The similarity Scos(x, y) between them is measured
by computing the cosine of the angle θ between these two vectors. The cosine of
the angle θ between the delay vectors x and y is computed by
(5)
where “·” denotes the dot-product of the two vectors and (cid:3)x(cid:3) is the Euclidean
size of vector x ∈ R
N , i.e. (cid:3)x(cid:3) =
(cid:10)(cid:11)N
cos θ =
An alternative measure of similarity is to compute the coeﬃcient of correla-
tion between the two delay patterns x and y. This correlation-based similarity
model is denoted by Scor(x, y). The coeﬃcient of correlation is deﬁned as
x · y
(cid:3)x(cid:3)(cid:3)y(cid:3)
x2
i .
i=1
corr(x, y) =
σ2
xy
σxσy
,
(6)
where σ2
standard deviation of x.
xy denotes the covariance between delay patterns x and y, and σx is the
5 Experimental Results
In this paper, we analyze the results of live experiments to evaluate basic prop-
erties of a measurement-based geographic location service of Internet hosts.
48
A. Ziviani et al.
(a) USA
(b) Western Europe
Fig. 2. Geographic location of landmarks.
5.1 Experimental Setup
For the experiments, we use 9 measurement boxes from the NIMI (National
Internet Measurement Infrastructure) project [12] as our probe machines. They
are geographically distributed as follows: 5 in Western Europe, 3 in the U.S.,
and 1 in Japan. Recent works [4,13] indicate that 7 to 9 dimensions provide
suﬃcient network distance representation. The experimental set of landmarks
comes from two datasets:
– LibWeb – this set of hosts is mainly composed of university sites extracted
from library web (LibWeb) servers around the world [14].
– RIPE – these hosts are part of the Test Traﬃc Measurements (TTM) project
of the RIPE network [15]. All hosts on the RIPE network are equipped with
a GPS card, thus allowing their exact geographic position to be known.
The resulting experimental dataset totals to 397 landmarks that are sparsely
distributed worldwide. The geographic distribution of these landmarks is as fol-
lows: 199 in North America (U.S. and Canada), 156 in Western Europe, 19 in
Eastern Europe, 13 in Latin America, 9 in Asia and Oceania, and 1 in the Middle
East. This distribution is intended to at least roughly reﬂect the distribution of
users (hosts) to be located. In a previous work [16], we propose the demographic
placement of landmarks to better represent the location of users (hosts). It should
be noted that landmarks are unsuspecting participants in the procedure since a
landmark may be any host, with a known geographic location, able to echo ping
messages. Figure 2 shows the geographic location of the landmarks in the U.S.
and in Western Europe, which are regions likely to have rich connectivity and
host most users to be located.
The probe machines measure the delay toward the set of landmarks. The
delay metric is actually the minimum of several RTT measurements to avoid
taking into account congestion delays. The measurements toward each landmark
from the diﬀerent probe machines are enough spaced to avoid triggering detection
systems against DDoS (Distributed Denial of Service) attacks.
Toward a Measurement-Based Geographic Location Service
49
5.2 Correlation between Geographic Distance and Network Delay
In this section, we evaluate the correlation between geographic distance and
network delay. Until recently, common sense claimed that there is a weak corre-
lation between distance and delay within the network. Claﬀy [17] mentions this
as one of some myths about Internet data. Our results show that few landmarks
present very large delays, probably due to poor connectivity. To avoid taking
into account these outliers in our evaluation, we consider data within the 98th,
95th, and 90th percentiles of the measured network delay. The observed corre-
lation between geographic distance and network delay is moderate to strong in
these cases, resulting in R=0.6229, R=0.8093, and R=0.8767, respectively. Fig-
ures 3(a), 3(c), and 3(e) present the corresponding scatter plots for these results
that cover landmarks located worldwide.
We also observe that poor connectivity weakens the correlation between ge-
ographic distance and network delay. We then identify the landmarks located
in North America and Western Europe. These regions are likely to oﬀer the
richest connectivity linking their hosts. We observe an even stronger correla-
tion on these well connected regions, indicating that the correlation becomes
stronger as connectivity becomes richer. The coeﬃcients of correlation for the
data within the 98th, 95th, and 90th percentiles in these well connected regions
are R=0.7126, R=0.8595, and R=0.8958, respectively. The corresponding scat-
ter plots for these results are shown in Figures 3(b), 3(d), and 3(f) for landmarks
located in North America and Western Europe (NA-WE). Recent ﬁndings [3,18]
indicate a strong correlation between population and router density in econom-
ically developed countries. Moreover, most users, and consequently most hosts
to be located, are likely to be in these regions with richer connectivity, whereby
a stronger correlation between distance and delay holds.
5.3 Distance Accuracy
In this section, we consider the whole set of landmarks distributed worldwide, in a
total of 397 landmarks. To evaluate the distance accuracy, we take one landmark
as a target host and use the remaining landmarks to infer a location estimation
for this target. The distance accuracy is measured by the error distance from
the location estimation to the location of the target host. We apply the diﬀerent
measures of dissimilarity presented in Section 3 to compare the delay patterns
gathered by the probe machines from the landmarks.
Figure 4 shows the probability density function (pdf) of the error distance
worldwide for the diﬀerent measures of dissimilarity. The Canberra distance
performs slightly better than the others, providing smaller error distances to
more hosts. This distance measure is known to be suitable for non-negative
values, such as network delay, and more sensitive to values near zero. This favors
a more accurate location of some hosts in comparison with the other measures
of dissimilarity since eight out of the nine probe machines are in the U.S. or in
Western Europe. For the Canberra distance, we observe that the median value of
the error distance is 314 km with a kurtosis of 40.79, showing that the observed
distribution of the error distance is heavy-tailed. This is because, for some target
50
A. Ziviani et al.
Fig. 3. Correlation between geographic distance and network delay, both worldwide
and within the North America and Western Europe (NA-WE) regions.
Toward a Measurement-Based Geographic Location Service
51
y
t
i
l
i
b
a
b
o
r
P
0.16
0.14
0.12
0.10
0.08
0.06
0.04
0.02
0.00
 0
Measure of Dissimilarity
Canberra
City block
Euclidean
Chebyshev
Cosine
Correlation
 500
 1000
 1500
 2000
Error distance (km)
Fig. 4. PDF of the error distance.
hosts, even if the elected landmark is the geographically closest landmark to
the target, not necessarily it is nearby the target host. These results indicate
that delay measurements can indeed be exploited to determine the geographic
location of Internet hosts, although at a coarse granularity.
6 Conclusion
This paper investigates some key properties toward a measurement-based geo-
graphic location service of Internet hosts. Such a service can be viewed as an
underlying infrastructure for the deployment of novel location-aware applications
in the Internet. Live experiments have been carried out to evaluate the corre-
lation between geographic distance and network delay as well as the achieved
distance accuracy for diﬀerent measures of dissimilarity. Our ﬁndings indicate
that contrary to conventional wisdom there is a signiﬁcant correlation between
geographic distance and network delay. We show that this correlation can be
exploited to provide a coarse-grained geographic location of Internet hosts. The
location estimation of a host is the location of the landmark presenting the most
similar delay pattern with respect to the target host. This poses a fundamental
limit: the system has a discrete space of answers since the number of possible
answers correspond to the number of landmarks adopted.
As future work, we intend to investigate methods to adopt a continuous space
of answers instead of a discrete one. Recent works [13,19,20] propose to infer net-
work proximity without direct measurements by embedding network distances
such as delay into a coordinate system of reduced dimensions. Similar concepts
can be applied to the measurement-based geographic location of Internet hosts
to provide more accurate estimations using fewer measurements.
52
A. Ziviani et al.
Acknowledgment. This work is supported by CAPES/COFECUB, FUJB, and
CNPq. Authors are thankful to Andrew Adams (PSC) and Vern Paxson (ICIR)
for the access to the NIMI network.
References
1. Ratnasamy, S., Handley, M., Karp, R., Shenker, S.: Topologically-aware overlay
In: Proc. of the IEEE INFOCOM’2002, New
construction and server selection.
York, NY, USA (2002)
2. Sripanidkulchai, K., Maggs, B., Zhang, H.: Eﬃcient content location using interest-
based locality in peer-to-peer systems. In: Proc. of the IEEE INFOCOM’2003, San
Francisco, CA, USA (2003)
3. Lakhina, A., Byers, J.W., Crovella, M., Matta, I.: On the geographic location of
Internet resources. IEEE Journal on Selected Areas in Communications 21 (2003)
934–948
4. Padmanabhan, V.N., Subramanian, L.: An investigation of geographic mapping
techniques for Internet hosts. In: Proc. of the ACM SIGCOMM’2001, San Diego,
CA, USA (2001)
5. Ziviani, A., Fdida, S., de Rezende, J.F., Duarte, O.C.M.B.: Similarity models for
Internet host location. In: Proc. of the IEEE International Conference on Networks
- ICON’2003, Sydney, Australia (2003) 81–86
6. Davis, C., Vixie, P., Goowin, T., Dickinson, I.: A means for expressing location
information in the domain name system. Internet RFC 1876 (1996)
7. University of Illinois at Urbana-Champaign: (IP Address to Latitude/Longitude)
http://cello.cs.uiuc.edu/cgi-bin/slamm/ip2ll/.
8. Moore, D., Periakaruppan, R., Donohoe, J., Claﬀy, K.: Where in the world is
netgeo.caida.org? In: Proc. of the INET’2000, Yokohama, Japan (2000)
9. Visualware Inc.: (VisualRoute) http://www.visualware.com/visualroute/.
10. CAIDA: (GTrace) http://www.caida.org/tools/visualization/gtrace/.
11. Gordon, A.D.: Classiﬁcation: Methods for the Exploratory Analysis of Multivariate
Data. Chapman and Hall (1981)
12. Paxson, V., Mahdavi, J., Adams, A., Mathis, M.: An architecture for large-scale
Internet measurement. IEEE Communications Magazine 36 (1998) 48–54
13. Tang, L., Crovella, M.: Virtual landmarks for the Internet.
In: ACM Internet
Measurement Conference 2003, Miami, FL, USA (2003)
14. (LibWeb) http://sunsite.berkeley.edu/Libweb.
15. (RIPE Test Traﬃc Measurements) http://www.ripe.net/ttm/.
16. Ziviani, A., Fdida, S., de Rezende, J.F., Duarte, O.C.M.B.: Demographic place-
ment for Internet host location. In: Proc. of the IEEE Global Communications
Conference - GLOBECOM’2003, San Francisco, CA, USA (2003)
17. Claﬀy, K.: Internet measurement: myths about Internet data. Talk at NANOG24
Meeting (2002) http://www.caida.org/outreach/presentations/Myths2002/.
18. Yook, S.H., Jeong, H., Barab´asi, A.L.: Modeling the Internet’s large-scale topology.
Proc. of the National Academy of Sciences (PNAS) 99 (2002) 13382–13386
19. Ng, T.S.E., Zhang, H.: Predicting Internet network distance with coordinates-
based approaches. In: Proc. of the IEEE INFOCOM’2002, New York, NY, USA
(2002)
20. Lim, H., Hou, J.C., Choi, C.H.: Constructing Internet coordinate system based on
delay measurement. In: ACM Internet Measurement Conference 2003, Miami, FL,
USA (2003)