# OCR Output
## Page 1
Performance optimization、High availability and Surveillance
51CTO技术博客之星、资深MySQL技术专家多年工作经验的结
性能调优、高可用与监控
MySQL管理之道
决方法，从性能优化、高可用与监控角度帮助读者把握实践技巧
包含大量来自实际生产环境的经典案例，为各种疑难问题提供了解
晶，指导MySQLDBA进阶修炼的最佳实践之作
ManagementofMysQL
机械工业出版社
贺春肠著
O
---
## Page 2
购书热线：
投稿热线：（010）88379604
服热线：
(010)68326294
(010)88378991
不管是初出茅庐的DBA，还是有一定管理经验的DBA，本书都值得一读。
者把多年的数据库管理心得诉诸于书本，以简单易懂的语言描述出来，论述的技术可操作性强，相信
我想，这也正是技术交流的最高价值。
全。我本人也写过书，深深知道要想做到这一点，绝对是非常费心费力的，但对读者来说，这却是莫
进行了分析，非常适合正在学习和使用MySQL的各位朋友参考借鉴。
差异进行了翔实讲解，从基本特性到调优的具体操作，本书都有涉及，另外还对MySQL5.6的部分特性
大的福利。
和结合应用的实际分析。每个部分，文字解释、代码样例、数据图表、官方文档都图文并茂、一应俱
分类和详细剖析—
全没有“偷懒”的觉悟！书中不仅对新版MySQL的特性进行了简单的描述，还对其进行了非常细致的
章。区别于很多资料文档式的介绍，本书的内容十分丰富。书中针对MySQL5.1到MySQL5.5的变化和
书，一定会对你大有神益！
出了很多实用的情景模拟及解决方案。不论你目前是否已遇到相关问题，都强烈推荐你仔细研读这本
经验的总结和对新知识的拓展，同时还针对运维人员、DBA等相关工作者会遇到的代表性疑难问题给
常受欢迎，一个如此会写博客的人所著的书肯定值得一看。更重要的是这本书的内容来自他多年实践
开博以来，
因此，我愿意向各位读者推荐这本书，因为我能感受到其中蕴含的作者的心血和他多年的经验。
更重要的是，本书讲解极其详尽透彻。与很多类似书籍以罗列官方参数和手册不同，本书作者完
本书涵盖了新版MySQL的诸多特性，对于需要把握住潮流的技术人员来说是一顿丰盛的大餐。作
其实之前与作者的交集并不多，我接到邀请试读样章时，诚惶诚恐，于是倍加认真地阅读了样
本书作者贺春肠先生是51CTO技术博客之星，在MySQL领域有很深的造谐。贺先生自2012年6月
488379649 68995259
88361066
一年的时间写了100多篇技术文章，其中有1/3被评为推荐博文，他的文章在51CTO社区非
一仅仅性能上的改变就介绍了20个特性。而且对每个特性都进行了深入浅出的解释
华章网站：www.hzbook.com
一唐朝京东网上商城高级DBA
一曹亚莉51CTO技术博客总编
—田逸资深系统工程师
定价：69.00元（附光盘）
911787
ISBN978-7-111-44906-5
上架指导：计算机/数据库
---
## Page 3
性能调优、高可用与监控
MySQL管理之道
Management of MySQL
机工版社
贺春肠
著
hinePr
---
## Page 4
凡购本书，如有缺页、倒页、脱页，由本社发行部调换
标准书号：ISBN978-7-111-44906-5
2014年1月第1版第1次印刷
北京市荣盛彩色印刷有限公司印刷
责任编辑：朱秀英
机械工业出版社（北京市西城区百万庄大街22号
希望构建和管理高性能、高可用性的MySQL数据库系统的开发者和DBA阅读。
186mm×240mm·20印张
方案。不论你目前有没有遇到过此类问题，相信对你以后处理相关问题都会有所借鉴。本书适合所有
对运维人员、DBA等相关工作者会遇到的有代表性的疑难问题给出了实用的情景模拟，并给出了解决
核心，从故障诊断、表设计、SQL优化、性能参数调优、mydumper逻辑、xtrabackup热备份与恢复、
本书法律顾问北京市展达律师事务所
封底无防伪标均为盗片
版权所有·侵权必究
中国版本图书馆CIP数据核字（2013）第282228号
（数据库技术丛书）
MySQL管理之道：性能调优、高可用与监控/贺春旸著.一北京：机械工业出版社，2014.1
MySQL高可用集群搭建与管理、MySQL服务器性能和服务监控等方面多角度深人讲解了如何去管理
ISBN 978-7-111-44906-5
图书在版编目（CIP）数据
与维护MySQL服务器。
I.M.….II.贺.….
书中内容以实战为导向，所有内容均来自于笔者多年实践经验的总结和对新知识的拓展，同时也针
本书由资深MySQL专家撰写，以最新的MySQL版本为基础，以构建高性能MySQL服务器为
价：69.00元（附光盘）
（010）
ISBN 978-7-89405-202-5（光盘）
Ⅲ.关系数据库系统IV.TP311.138
88361066
88379649
68995259
邮政编码100037）
---
## Page 5
如何阅读本书
信会对读者今后的工作有所帮助。
InnoDB存储引擎作为数据库后端的运维人员和DBA。书中的大部分例子都是生产环境的实战，相
作，把自己学到的新东西做一个系统性的总结。
本的图书还寥寥无几，大家都是通过阅读英文手册去获取新的知识，因此我决定基于这个版本来写
事实上，MySQL5.5已经推出两年多了，其性能方面有了显著的提升，但市面上介绍MySQL该版
为我每天坚持学习MySQL的源动力。对于MySQL，目前业内用得最多的是MySQL5.1.X版本，
中能实际接触到海量数据、大并发是我在该领域发展的很重要的因素，工作的驱使和个人的兴趣成
些许帮助，同时对自己来说，也是一个重新学习的过程，何乐而不为？
勇气着手写作，把多年工作的积累毫无保留地写出来，展现给大家，这不仅对他人的技术成长会有
读者对象
为什么要写这本书
本书是一本面向应用的数据库类书籍，是日常工作中的积累。本书主要面向使用MySQL
2010年我有幸加人了梦寐以求的飞信公司，并以此正式开始了我的MySQL职业生涯。工作
很久以前，我就梦想着自己有一天能写一本书出来，但始终未能成行，直到今天，我终于鼓足
本书从知识结构上分为五大部分：
口接触过Shell脚本语言。
口掌握基本的 MySQL 操作和Linux操作，以及数据库基本原理。
要想更好地学习本书的内容，要求具备以下条件：
口有一定的SQL基础。
前
言
---
## Page 6
>
丽妍多次邀请我参加51CTO举办的数据库大会，拓展了我的知识视野；感谢51CTO博客管理员高
的帮助，这本书是完成不了的。
展现出去；还要感谢我的同事吴炳锡把我介绍到了飞信，而且在工作中给了我很多鼓励。没有你们
战运维一线，使我得到了成长；感谢我的同事周海平（www.MySQLpub.com）鼓励我，让我把知识
致谢
反馈。
意的解答。如果你有更多的宝贵意见，也欢迎你发送邮件至我的邮箱，很期待能够听到你们的真挚
请读者批评指正。你可以将书中的错误发到我的邮箱PI:EMAIL，我将尽量提供最满
勘误和支持
阅读。
水平拆表方案、阿里巴巴中间件Cobar水平拆表方案。
装与使用，以及线上MySQL服务器的监控脚本等内容。
MySQL+MMM读写分离架构搭建与维护，以及批量管理上百台MySQL服务器等内容。
Heartbeat+DRBD和Keepalived+MySQLReplication一主一从模式的搭建与维护，故障切换脚本、
等，然后讲解了my.cnf配置文件的优化、如何定期整理数据库碎片，最后介绍了硬件的优化、内
与传统SQLServer以及Oracle数据库默认的隔离级别的区别、SQL语句的优化以及合理利用索引
优，包括表设计阶段范式的理解、字段类型的选取、采用表锁还是行锁、MySQL默认的隔离级别
半同步复制的日常管理维护，并针对MySQL5.5与MySQL5.1进行了性能测试和功能测试。
存对InnoDB引擎所起的决定性作用，以及MySQL5.6的新特性等内容。
同时感谢我的朋友邱治军参与监控部分的编写；感谢51CTO博客总编曹亚莉、博客管理员张
由于作者的水平有限，编写的时间也很仓促，书中难免会出现一些错误或者不准确的地方，恳
每个部分可以单独作为一本迷你书阅读，如果你未接触过MySQL5.5，建议从第一部分开始
第四部分（第9～10章）为主流监控软件的搭建与维护，包括监控软件Cacti和Nagios的安
第三部分（第7～8章）为高可用软件的搭建与维护，包括企业级高可用集群RHCS、
在飞信3年多的时间里，我得到了很多帮助。在这里感谢任志修经理对我的信任，让我始终挑
第五部分（第11章）为项目案例讲解，内容包括生产环境数据库碎片整理方案、用户信息表
第二部分（第3～6章）为故障诊断与优化，内容为生产环境下MySQL故障处理以及性能调
第一部分（第1～2章）详细介绍了MySQL5.5的新特性、注意事项、安装和升级方法，以及
---
## Page 7
支持我的写作，你的鼓励和帮助引导我顺利完成全部书稿。
谢你们。
网高级DBA）提供事件调度器故障切换后的注意事项；另外，还要感谢给我提建议的一些朋友，谢
阳帮我处理图片；感谢前同事李才荣提供Linux批量管理的工具（Python）：感谢前同事李冉（乐蜂
感谢机械工业出版社华章公司的编辑杨绣国，感谢你的魄力和远见，在这一年多的时间中始终
谨以此书献给我最亲爱的家人，以及众多热爱MySQL的朋友们。
2013年8月于北京
贺春肠
---
## Page 8
Android和PHP
编写高效PHP代码
开发最佳实践
PHP精粹
1
EREL
推荐阅读
实时Web应用
---
## Page 9
MySQL技术内幕
SQL编程
推荐阅读
MySQL技术内幕
InnoDB存储引擎
---
## Page 10
程序员提升个人影响力和软实力必读经典
卓越演讲
有说服力
的写
作
演讲模式
超凡影响力
术
演讲
讲
超凡魅力
卓越领导力
100天成就
---
## Page 11
第1章.MySQL5.介绍...2
第一部分
前言
目
1.1性能上的显著改变..
1.1.10提高默认InnoDB线程
1.1.8
1.1.1MySQL5.5默认存储引擎
1.1.9
1.1.7
E
1.1.4
1.1.3
1.1.2
录
提高刷新脏页数量和合
MySQL5.5新特性篇
使用内存分配程序.18
在InnoDB中可选择
可关闭自适应哈希索引.17
BulferPol..... 1.5
InnoDB同时支持多个
InnoDB的数据恢复时间
池中的热数据存活更久……·9
让InnoDB_Buffer_Pool缓冲
增加自适应刷新脏页功能…9
并插入数量，改善磁盘
充分利用CPU多核的
I/O处理能........…
X
1.2
安全性、稳定性的显著改变.….38
1.2.3
1.2.2
1.1.20
1.1.19InnoDB支持创建压缩
1.2.1
1.1.18
1.1.17
1.1.16
1.1.15
1.1.14
1.1.13
1.1.12
1.1.11
中继日志relay-log 可
复制功能加强.38
开启InnoDB严格检查
预读算法的变化….22
元数据的统计功+能.37
可动态关闭InnoDB更新
快速创建、删除、更改
轮.间隔….28
控制自旋锁Spin Lock
添加删除缓冲和清除
改善清除程序进度….26
段提升性能.26
InnoDB使用多个回滚
恢复组提交.24
首次在Linux上实现了
数据页................30
缓冲.…....
异步......
---
## Page 12
第2章
1.7MySQL5.1升级为MySQL5.5...55
2.6
2.5
2.1
1.8
3
3
半同步复制简价介…62
性能测试：MySQL5.5
动态更改系统配置参数….39
性能测….8
2.4.2
2.4.1
半同步复制安装配置.63
1.7.1
SQL语句写法的改变..53
1.7.2
同步复制新参数汇总48
InnoDB新参数汇总......40
1.6.1
1.3.2
1.3.1
1.6.2
如何验证半同步复制
采用 MySQL_upgrade
支持动态更改独立表
的切换·
半同步复制与异步复制
是否正常工作.6.
支持limit变量...54.
MySQL5.5存储过程
delete表连接语法改变...53
直接安装MySQL5.5，
升级授权表方式升级..·.5
锁超时·....….4.0
采用数据导出/导入方式
支持动态更改InnoDB
第4章
第3章故障诊断…
3.3
4.1
3
3.1
第二部分
最常见的3种故障.12
影响MySQL性能的因素....72
3.3.9
3.3.6
3.3.5
3.3.4
3.3.3
3.3.2
3.3.1
故障与处理.79
3.2.3
3.3.8
3.3.7
3.2.2
3.2.1
同步复制报错故障处理···112
系统性能评估标准…73
连接数过多导致程序连接
性能优化篇
影响Linux服务器
闪回能1.08
误操作恢复（模拟Oracle
delete忘加where条件
误操作恢复（模拟Oracle
update忘加where条件
MySQL故障切换之事件
未设置 swap分区导致
数据文件，如何恢复….97
谨慎设置binlog_