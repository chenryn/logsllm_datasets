# OCR Output
## Page 1
OSI的七层协议体系结构
1物理层
2数据链路层
3网络层
4运输层
5会话层
6表示层
7应用层
计算机网络原理
TCP/IP的四层协议体系结构
河南中医药大学停区技建学院互墅网技术教学团队
第4章：网络层
13938213680/@hactemedu.cn
1网络）
2网际层
3运输层
4应用层
阮晓龙
五层协议的体系结构
1物理层
2数据链路层
3网络层
4运输层
5应用层
---
## Page 2
本章教学计划
虚拟专用网VPN和网络地址转换NAT
IP多播
互联网的路由选择协议
IPv6
网际控制报文协议ICMP
IP层转发分组的过程
网际协议IP
网络层的重要概念
多个网络通过路由器互连成为
网络层讨论
网络层的扩展应用
网络层的基本内容
一个互联网
2
---
## Page 3
口第1种观点：让网络负责可靠交付
1.网络层的重要概念
2种观点：
口
口争论：
1.网络层的重要概念
■面向连接的可靠交付。
■通俗的讲：是网络设备负责可靠通信？是计算机负责可靠通信？
争论的实质是：
■网络层应该向运输层提供怎样的服务？面向连接还是无连接？
■如果再使用可靠传输的网络协议，可使所发送的分组无差错按序到达终点，
■通信之前先建立虚电路 VC (Virtual Circuit)(即连接)，以保证双方通信所需的
■计算机网络模仿电信网络，使用面向连接的通信方式。
■无连接的、尽最大努力交付的数据报服务，不提供服务质量的承诺。
■在计算机通信中，
一切网络资源。
可靠交付应当由谁来负责？是网络还是端系统？
1.1网络层提供的两种服务
1.1网络层提供的两种服务
5
---
## Page 4
口第 2种观点：网络提供数据报服务
1.网络层的重要概念
1.网络层的重要概念
■由主机中的运输层负责可靠的通信。
■网络层要设计得尽量简单，向其上层只提供简单灵活的、无连接的、尽最大
努力交付的数据报服务。
数据链路层
口网络在发送分组时不需要先建立连接。
物理层
网络层
运输层
应用层
口
网络层不提供服务质量的承诺。
口
每一个分组（即IP数据报）独立发送,
·即所传送的分组可能出错、丢失、重复和失序（不按序到达终点），也不保证分组传送的时限。
存储转发方式传送，并不是真正建立了一条物理连接。
虚电路只是一条逻辑上的连接，分组都沿着这条逻辑连接按照
lost
H1 发送给H2的所有分组都沿着同一条虚电路传送
X
虚电路
与其前后的分组无关（不进行编号）。
1.1网络层提供的两种服务
1.1网络层提供的两种服务
数据链路层
物理层
网络层
运输层
应用层
X
---
## Page 5
1.网络层的重要概念
端到端的差错处理和流量控制
分组的顺序
当结点出故障时
分组的转发
终点地址
连接的建立
思路
数据链路层
物理层
网络层
运输层
应用层
对比的方面
存储转发方式传送，并不是真正建立了一条物理连接。
虚电路只是一条逻辑上的连接，
H1发送给H2的分组可能沿着不同路径传送
总是按发送顺序到达终点
屈于园一条友电
用短的虚电路号
仅在连接建立阶段使用，每个分组使
必须有
可靠通信应当由网络来保证
同一条虚电路的分组均按照同一
虚电路服务
：分组都沿着这条逻辑连接按照
”每个分组独立选择路由进行转发
由用户主机负责
到达终点时不一定按发送顺序
每个分组都有终点的完整地址
不需要
可靠通信应当由用户主机来保证
数据报服务
1.1网络层提供的两种服务
数据链路层
物理层
网络层
运输层
应用层
5
---
## Page 6
网络层的2个层面：
1.网络层的重要概念
1.网络层的重要概念
数据层面
控制层面
在路由器之间传送的信息有以下 2大类：
不同网络中的两个主机之间的通信，要经过若干个路由器转发分组来完
成。
数据层面和控制层面
转发表
数据
路电信息
1.2网络层的两个层面
网络层的两
个层
9
---
## Page 7
欠件定义网络SDN
1.网络层的重要概念
1.网络层的重要概念
控制层面
数据层面
采用硬件进行转发，快。
独立工作。
应接口转发出去。
表，把收到的分组从查找到的对
路由器根据本路由器生成的转发
中的数据层面和控制层面
T
数据层面
转发表
网络层的2个层面：数据层面和控制层面
油
中生
在
成
采用软件计算，慢。
许多路由器协同动作。
路由表。
法计算路由，创建出本路由器的
根据路由选择协议所用的路由算
远程控制器
控制层面
1.2网络层的两
1.2网络层的两个层面
个层
3
---
## Page 8
口与IP协议配套使用的3个协议：
网际协议IP 是 TCP/IP 体系中两个最主要的协议之一。
2.网际协议IP
口IP 是在 TCP/IP 协议中网络层的主要协议，任务是仅仅根据源主机和目的
2.网际协议IP
主机的地址传送数据。
网络的一种面向数据的协议。
网际协议（Internet Protocol，IP），
■网际组管理协议IGMP
■网际控制报文协议ICMP 
■地址解析协议 ARP
■
■IP 第一个架构的主要版本，称为IPv4，目前仍然是最主要的互联网协议。
■IP 定义了寻址方法和数据报的封装结构。
世界各地正在积极部署IPv6。
(Internet Control Message Protocol)
(Address Resolution Protocol)
(Internet Group Management Protocol) 
，或称互联网协议，是用于报文交换
网络接口层
运输层
应用层
ICMPIGMP
(HT管种应用层协议 )
与各种网络接口
TCP UDP
物理硬件
ARP
15
8
---
## Page 9
口如果都是用相同的网络：
2.网际协议IP
口互连在一起的网络要进行通信，会遇到许多问题需要解决，例如：
2.网际协议IP
口
实现异构网络的互连互通方法：使用中间设备
■实用
■可以满足不同需求
■不适应技术发展
■不能满足不同用户需要。
■不同的超时控制
■不同的网络接入机制
■不同的最大分组长度
■不同的寻址方案
、
网络技术是不断发展的，
口用户的需求是多种多样的，
不同的差错恢复方法
的市场份额和持续利润。
网络的制造厂家也要不停止的推出新产品，以获得更大
所以没有一种单一的网络能够适应所有用户的需求。
■不同的管理与控制方式
■不同的状态报告方法
连接服务）
不同的服务（面向连接服务和无
不同的用户接入控制
不同的路由选择技术
，分布在不同的位置，由不同的组
2.1虚拟互连网络
2.1虚拟互连网络
18
6
---
## Page 10
口根据中间设备所在的层次，有五种不同的中间设备
口将网络互相连接起来要使用一些中间设备。
2.网际协议IP
集线器
可
部门A 
转发器、网桥或交换机仅把一个网络扩大了，仍然是一个网络
数据链路层
运输层及以上
物理层
网络层
所在层次
网络扩展
部门B 
转发器 (repeater)
路由器(router)
网关 (gateway)
集线器
集线器
中间设备
部门C
集线器
2.1虚拟互连网络
6
---
## Page 11
集线器
部门A
品口
转发器、网桥或交换机
网络互连使用路由器
可
网络互联
网络扩展
仅把一
部门B
一个网络扩大了，仍然是一个网络
集线器
交换机
部门C
集线器
---
## Page 12
2.网际协议IP
口
口
口
我们讨论网络互联是指用路由器进行网络互联和路由选择。
■路由器就是一台专用计算机，用来在互联网中进行路由选择。
网关由于比较复杂，目前使用得较少。
■由于历史的原因，许多有关TCP/IP 的文献将网络层使用的路由器称为网关。
而这仍然是一
网络互连使用路由器
网络互联
一般并不称之为网络互连，因为这仅仅
一个网络。
PN隧道（封装报文
2.1虚拟互连网络
24
7
---
## Page 13
2.网际协议IP
2.网际协议IP
口
口
TCP/IP体系在网络互连上采用的做法是在网络层使用标准化协议，但相
网 (Internet)。
如果在这种覆盖全球的IP 网的上层使用 TCP 协议，那么就是现在的互联
互连的各具体的网络异构细节。
当互联网上的主机进行通信时，
以后的计算机网络看成为一
参加互连的计算机网络都采用相同的网际协议（IP），
互连接的网络则可以是异构的。
(a)互连网络
网络
一个虚拟互连网络（internet）。
，就好像在一个网络上通信一样，看不见
(b)虚拟互连网络
因此可以把互连
2.1虚拟互连网络
2.1虚拟互连网络
26
3
---
## Page 14
口在网络上，两台主机通信分为两种形式：
2.网际协议IP
口使用虚拟互连网络概念的好处是：
口所谓虚拟互连网络，就是逻辑互连网络，它的意思是：
2.网际协议IP
口
1互联网可以由多种异构网络互连组成。
■当互联网上的主机进行通信时，就好像在一个网络上通信一样，而看不见互
■间接交付：
■直接交付：
■使用IP 协议的虚拟互连网络可简称为IP网。
■互连起来的各种物理网络的异构性本来是客观存在的，但利用IP协议就可以
当源主机和目标主机分别处于不同的物理网络上时，数据报由源主机通过网络上
口在一个物理网络上，
使这些性能各异的网络从用户看起来好像是-
的路由器间接的传送到目标主机上。
数据报被源主机直接传送到目标主机上。
一个统一的网络。
—
2.1虚拟互连网络
2.1虚拟互连网络
28
27
---
## Page 15
2.网际协议IP
口
网络层
口
口
口
口
2s
网络层
2.1虚拟互连网络
网络层
30
5
---
## Page 16
田
---
## Page 17
2.网际协议IP
口
本部分重点：
没有IP 地址，就无法和网上的其他设备进行通信。
在 TCP/IP 体系中，IP 地址是一个最基本的概念。
■IP 地址的特点
■无分类编址CIDR
■分类的IP地址
■IP地址及其表示方法
2.2IP地址
34
7
---
## Page 18
2.网际协议IP
口IP 地址及其表示方法
2.网际协议IP
■IP 地址现在由因特网名字与号码指派公司ICANN（Internet Corporation for