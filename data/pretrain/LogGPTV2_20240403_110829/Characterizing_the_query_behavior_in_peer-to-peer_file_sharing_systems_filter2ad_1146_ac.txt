 0
s
r
e
e
P
e
v
i
s
s
a
P
f
o
n
o
i
t
c
a
r
F
 1
 0.8
 0.6
 0.4
 0.2
 0
Max
Average
Min
06:00
00:00
Time of Day at Measurement Peer
12:00
18:00
24:00
Max
Average
Min
06:00
00:00
Time of Day at Measurement Peer
12:00
18:00
24:00
Max
Average
Min
06:00
00:00
Time of Day at Measurement Peer
18:00
12:00
24:00
(a) North America 
(b) Europe 
(c) Asia 
Figure 4. Fraction of Connected Peers that are Passive 
x
>
n
o
i
t
a
r
u
D
h
t
i
s
n
o
i
s
s
e
S
f
o
n
o
i
t
c
a
r
F
w
 1
 0.1
 0.01
 1
Europe
North America
Asia
 10
 100
 1000
Session Duration, x (min)
x
>
n
o
i
t
a
r
u
D
h
t
i
s
n
o
i
s
s
e
S
f
o
n
o
i
t
c
a
r
F
w
 10000
(a) Each Geographic Region 
Start at 11:00-12:00
Start at 19:00-20:00
Start at 13:00-14:00
Start at 03:00-04:00
 1
 0.1
 0.01
 1
 10
 100
 1000
Session Duration, x (min)
(b) Each Key Period of Day, 
Peers in North America 
x
>
n
o
i
t
a
r
u
D
h
t
i
s
n
o
i
s
s
e
S
f
o
n
o
i
t
c
a
r
F
w
10000
 1
 0.1
 0.01
Start at 03:00-04:00
Start at 11:00-12:00
Start at 19:00-20:00
Start at 13:00-14:00
 1
 10
 100
 1000
10000
Session Duration, x (min)
(c) Each Key Period of Day,  
Peers in Europe 
Figure 5. Distribution of Connected Session Duration for Passive Peers 
To analyze correlations between session duration and time of day, 
we  Figures  5  (b)  and  (c)  plot  the  CCDF  of  session  duration  for 
sessions starting in each of the important periods. We observe that 
for European peers session duration shows a significant correlation 
to time of day. In particular, sessions started in the early morning 
are notably longer than sessions started in the afternoon or evening. 
For  example,  the  fraction  of  sessions  with  duration  below  90 
minutes  for  sessions  starting  between  03:00  and  04:00  is  85%. 
However, this fraction is 93% for sessions starting between 13:00 
and  14:00.  A  similar  trend  is  observed  for  sessions  started  in  the 
evening  hours  in  North  America;  i.e.,  11:00  to  12:00  at  the 
measurement  peer.  We  conclude  from  Figures  5  (b)  and  (c)  that 
correlations  between  session  duration  and  time  of  day  are 
significant for generating synthetic workload. 
The session duration for passive peers conditioned on geographical 
region  and  time  of  day  can  be  well  modeled  by  a  bimodal 
distribution  composed  of  two  lognormal  distributions.  Table  A.1 
provides the parameters of the fitted distributional model for North 
American peers. 
4.5  Active Peer Session Characteristics 
The  connected  session  duration  for  active  peers  is  a  measure 
composed  of  the  number  of  queries  issued  in  a  session,  the  time 
between the establishment of the connection and the sending of the 
first query, the time between the sending of two successive queries 
and  the  time  after  sending  the  last  query  until  termination  of  the 
connection.  Thus,  in  the  following  we  characterize  each  of  these 
measures separately. 
Figure 6 (a) plots the CCDF of the number of queries per connected 
session  broken  down  by  geographical  region.  We  observe  a 
significant  correlation  between  the  number  of  queries  and  the 
geographical  region.  For  instance,  the  fraction  of  peers  that  issue 
less than 5 queries is 92% for Asia, 80% for North America, and 
in 
only 70% for Europe. 5% of the Asian peers issue 5 to 10 queries. 
In North America and in Europe, these fractions constitute 8% and 
13%,  respectively.  Moreover,  we  find  that  sessions  with  many 
queries comprise 3% of the session in Asia, 10% in North America 
and 13% in Europe. As a consequence, we conclude that European 
peers issue significantly more queries in a session than peers from 
the  other  geographical  regions.  Again,  considering  multiple-day 
time  periods  by  separating  the  first  and  the  second  half  of  the 
measurement  period  yields  no  significant  difference 
the 
corresponding curves.  
In  a  further  experiment,  we  analyze  the  correlation  between  the 
number of queries per session and the time of day. In Figure 6 (b) 
we plot the CCDF of the number of queries per session for sessions 
of  European  peers  starting  in  each  of  the  important  periods 
identified above. We find that the number of queries per session is 
roughly  insensitive  to  session  start  time  for  99%  of  the  sessions 
from Europe. The same holds for sessions of peers from the other 
geographical regions.  
Again, we refer to the Appendix for the models and parameters of 
the conditional distributions of session length in number of queries. 
Figure  A.1  (a)  shows  that  the lognormal  distribution  is  a  suitable 
model  for  the  number  of  queries  per  session.  The  matched 
parameters of the model for the three most important geographical 
regions are stated in Table A.2. 
In  our  measurement  setup,  we  use  the  filter  rules  presented  in 
Section 3 to discard all queries, which are automatically generated 
by the Gnutella client. The matching of rules 4 and 5 indicates that 
there are user-generated queries, which were issued before the peer 
connects to the measurement node. Thus, these queries contribute 
to  the  overall  number  of  queries  a  user  issues  in  his  session, 
although  we  cannot  determine  the  sending  time  due  to  the 
measurement  setup.  Thus,  for  completeness  we  provide  the 
x
>
s
e
i
r
e
u
Q
#
h
t
i
s
n
o
i
s
s
e
S
f
o
n
o
i
t
c
a
r
F
w
 1
 0.1
 0.01
 1
Europe
North America
Asia
 10
Number of Queries, x
 100
(a) Each Geographic Region 
x
>
s
e
i
r
e
u
Q
#
h
t
i
s
n
o
i
s
s
e
S
f
o
n
o
i
t
c
a
r
F
w
 1
 0.1
 0.01
Start at 03:00-04:00
Start at 19:00-20:00
Start at 13:00-14:00
Start at 11:00-12:00
 1
 10
Number of Queries, x
(b) Each Key Period of Day,  
Peers in Europe 
s
n
o
i
s
s
e
S
f
o
n
o
i
t
c
a
r
F
x
>
s
e
i
r
e
u
Q
#
h
t
i
w
100
Europe
North America
Asia
 1
 0.1
 0.01
 1
 10
 100
Number of Queries, x
(c) Each Geographic Region 
(filter rules 4 & 5 not applied) 
1000
Figure 6. Distribution of Number of Queries per Active Session 
s
n
o
i
s
s
e
S
f
o
n
o
i
t
c
a
r
F
x
>
i
e
m
T
h
t
i
w
 1
 0.1