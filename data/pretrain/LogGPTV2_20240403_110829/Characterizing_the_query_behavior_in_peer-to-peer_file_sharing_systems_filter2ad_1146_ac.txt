### Figure 4: Fraction of Connected Peers that are Passive

**Graphs:**
- **(a) North America**
- **(b) Europe**
- **(c) Asia**

**Time of Day at Measurement Peer:**
- 00:00
- 06:00
- 12:00
- 18:00
- 24:00

**Y-Axis:**
- Max
- Average
- Min

### Figure 5: Distribution of Connected Session Duration for Passive Peers

**Graphs:**
- **(a) Each Geographic Region**
  - Europe
  - North America
  - Asia
- **(b) Each Key Period of Day, Peers in North America**
  - Start at 11:00-12:00
  - Start at 19:00-20:00
  - Start at 13:00-14:00
  - Start at 03:00-04:00
- **(c) Each Key Period of Day, Peers in Europe**
  - Start at 03:00-04:00
  - Start at 11:00-12:00
  - Start at 19:00-20:00
  - Start at 13:00-14:00

**X-Axis:**
- Session Duration, x (min)
- 1
- 0.1
- 0.01
- 10
- 100
- 1000
- 10000

**Y-Axis:**
- CCDF (Complementary Cumulative Distribution Function)

**Analysis:**
To analyze the correlation between session duration and time of day, Figures 5(b) and 5(c) plot the CCDF of session duration for sessions starting in each of the key periods. We observe that for European peers, session duration shows a significant correlation with the time of day. Specifically, sessions started in the early morning (03:00-04:00) are notably longer than those started in the afternoon or evening. For example, 85% of sessions starting between 03:00 and 04:00 have a duration below 90 minutes, while this fraction is 93% for sessions starting between 13:00 and 14:00. A similar trend is observed for sessions started in the evening hours (11:00-12:00) in North America. From Figures 5(b) and 5(c), we conclude that the correlation between session duration and time of day is significant for generating synthetic workloads.

The session duration for passive peers, conditioned on geographical region and time of day, can be well modeled by a bimodal distribution composed of two lognormal distributions. Table A.1 provides the parameters of the fitted distributional model for North American peers.

### 4.5 Active Peer Session Characteristics

The connected session duration for active peers is a composite measure consisting of:
- The number of queries issued in a session.
- The time between the establishment of the connection and the sending of the first query.
- The time between the sending of two successive queries.
- The time after sending the last query until the termination of the connection.

In the following, we characterize each of these measures separately.

**Figure 6: Distribution of Number of Queries per Active Session**

**Graphs:**
- **(a) Each Geographic Region**
  - Europe
  - North America
  - Asia
- **(b) Each Key Period of Day, Peers in Europe**
  - Start at 03:00-04:00
  - Start at 11:00-12:00
  - Start at 13:00-14:00
  - Start at 19:00-20:00
- **(c) Each Geographic Region (filter rules 4 & 5 not applied)**
  - Europe
  - North America
  - Asia

**X-Axis:**
- Number of Queries, x
- 1
- 10
- 100
- 1000

**Y-Axis:**
- CCDF (Complementary Cumulative Distribution Function)

**Analysis:**
Figure 6(a) plots the CCDF of the number of queries per connected session, broken down by geographical region. We observe a significant correlation between the number of queries and the geographical region. For instance, 92% of peers in Asia issue less than 5 queries, compared to 80% in North America and 70% in Europe. In Asia, 5% of peers issue 5 to 10 queries, while in North America and Europe, these fractions are 8% and 13%, respectively. Additionally, sessions with many queries (more than 10) comprise 3% of sessions in Asia, 10% in North America, and 13% in Europe. This indicates that European peers issue significantly more queries in a session than peers from other regions.

In a further experiment, we analyze the correlation between the number of queries per session and the time of day. Figure 6(b) plots the CCDF of the number of queries per session for European peers, starting in each of the key periods identified above. We find that the number of queries per session is roughly insensitive to the session start time for 99% of the sessions from Europe. The same holds for sessions of peers from other geographical regions.

For the conditional distributions of session length in terms of the number of queries, we refer to the Appendix. Figure A.1(a) shows that the lognormal distribution is a suitable model for the number of queries per session. The matched parameters of the model for the three most important geographical regions are stated in Table A.2.

In our measurement setup, we use the filter rules presented in Section 3 to discard all queries automatically generated by the Gnutella client. The matching of rules 4 and 5 indicates that there are user-generated queries issued before the peer connects to the measurement node. These queries contribute to the overall number of queries a user issues in their session, although we cannot determine the exact sending time due to the measurement setup. For completeness, we provide the distribution of the number of queries per session, including those that match rules 4 and 5.

**Figure 6(c): Each Geographic Region (filter rules 4 & 5 not applied)**

**X-Axis:**
- Number of Queries, x
- 1
- 10
- 100
- 1000

**Y-Axis:**
- CCDF (Complementary Cumulative Distribution Function)

This figure shows the distribution of the number of queries per session without applying filter rules 4 and 5, providing a more comprehensive view of user behavior.