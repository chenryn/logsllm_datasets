# Watching Television Over an IP Network

## Authors
- Meeyoung Cha, MPI-SWS, Saarbrücken, Germany
- Pablo Rodriguez, Telefonica Research, Barcelona, Spain
- Jon Crowcroft, University of Cambridge, Cambridge, UK
- Sue B. Moon, KAIST, Daejeon, Korea
- Xavier Amatriain, Telefonica Research, Barcelona, Spain

## Abstract
Television has been a dominant and pervasive mass media for half a century, driving numerous technological advancements. Despite its widespread usage and importance in emerging applications, the ingrained TV viewing habits are not fully understood. This is primarily due to the difficulty of deploying monitoring devices at individual homes on a large scale. The recent surge in Internet Protocol Television (IPTV) has enabled us to monitor user behavior and network usage across entire networks, providing a clearer picture of how people watch TV and how underlying networks and systems can better adapt to future challenges.

In this paper, we present the first in-depth analysis of IPTV workloads based on network traces from one of the world's largest IPTV systems. Our dataset captures the channel change activities of 250,000 households over a six-month period. We characterize the properties of viewing sessions, channel popularity dynamics, geographical locality, and channel switching behaviors. We discuss the implications of our findings on networks and systems, including the support needed for fast channel changes. Our data analysis of an operational IPTV system has important implications for both existing and future IPTV systems, as well as the design of open Internet TV distribution systems like Joost and BBC’s iPlayer.

**Categories and Subject Descriptors:**
- C.2.3 [Computer Systems Organization]: Computer-Communication Networks—Network Operations
- C.4 [Computer Systems Organization]: Performance of Systems—Measurement techniques

**General Terms:**
- Design, Measurement

**Keywords:**
- IPTV, channel switching behavior, network measurement

## Introduction
Since the 1950s, television has been a dominant and pervasive mass media, watched by all age groups and in almost every country. Over the years, television has evolved, with the number of channels increasing from a few free-to-air broadcasts to several hundred for cable, satellite, and Internet TV networks. The video signal has also transitioned from black & white and color analog to high-quality digital streams.

Many technological advances have been driven by the need to meet user expectations in such a widespread medium. For example, the large number of concurrent users has led to the use of IP multicast by network operators to provide IPTV services with low transmission costs. Traditional media is now converging with newer Internet-based services (e.g., Joost, Zatoo, Livestation, and BBC’s iPlayer). In this context, IPTV is a promising starting point for research, as it opens up opportunities for innovation while maintaining the traditional TV watching paradigm.

Despite the widespread usage of television and its importance to emerging applications, ingrained TV viewing habits are not fully understood. Nielsen Media Research has long attempted to estimate TV viewing behaviors through monitoring and surveys. However, due to the difficulty of deploying monitoring devices at individual homes, it is challenging to monitor user behavior across the entire network. Sophisticated methods such as stratified sampling, systematic sampling, and cluster sampling are used to find a representative set of users and extrapolate their behaviors to the entire population.

With the recent large-scale deployment of commercial IPTV systems, IPTV workloads offer a new dimension for understanding TV viewing habits. The bidirectional communication in IPTV systems provides more visibility into TV viewing activities across the entire network. Additionally, the large user base offers a clearer picture of how different groups of users (e.g., by location, content genre) watch TV.

In this paper, we present the first in-depth analysis of IPTV workloads using anonymized traces from a live IPTV network. Our trace spans a six-month period and includes network activity information generated by approximately 250,000 households, significantly larger than the sample size used by Nielsen. We characterize several properties of aggregate viewing sessions, channel popularity dynamics, and content locality, which can help content producers and service providers create more appealing programs and better broadcasting schedules. We also identify browsing patterns of TV users and characterize user arrival and departure patterns across channels, which can inform the design of future IPTV systems. Our analysis focuses on aggregate user behavior to understand the impact on the network but does not characterize the viewing patterns of individual users.

The key findings of our study include:
1. Over 60% of channel switching events occur within 10 seconds, indicating that user focus is highly volatile.
2. Channel popularity varies widely throughout the day, with top channels becoming even more popular during peak times. The popularity distribution follows a Zipf-like pattern for popular channels and decays rapidly for non-popular ones.
3. Attention span when watching TV is content genre-dependent, ranging from 5 to 21 minutes. Daily viewing patterns are also heavily dependent on the genre.
4. There are strong differences in viewing patterns across different regions within a country. Across thousands of local communities, viewing patterns can vary by up to 20%.
5. Channel switching rates depend on program popularity; people change channels less when watching popular channels. Channel switching events are predominant (over 60%) and can significantly impact user experience and network performance.
6. The set of channels people watch (for longer than 1 minute) follows non-sequential channel numbers, while 62% of channel changes are sequential.

Our findings, based on non-sampled data, have several important implications for the design of both future television and open Internet TV distribution systems. Specifically, the channel selection process can have a major impact on the network, as significant channel changes generate unnecessary network load. A system that supports fast channel switching and helps users find the right channel quickly is essential for improving end-user experience and minimizing network impact. Additionally, high spikes in departure patterns could affect the design of peer-to-peer (P2P) IPTV systems. Finally, user tastes are not as homogeneous as expected over time, geography, and content, making our findings valuable for designing efficient IPTV channel recommendation systems.

The rest of the paper is organized as follows. Section 2 provides the context and background of IPTV. Section 3 introduces the dataset and our assumptions. Section 4 presents our characterization of viewing sessions, channel popularity, and geographical locality. Section 5 focuses on the dynamics of channel switching behaviors. Section 6 discusses the implications of our findings. Section 7 reviews related work, and Section 8 concludes the paper and suggests directions for future work.

## 2. Context and Background
### 2.1 IPTV Market
The IPTV market has grown rapidly over the past few years. An estimated 13.2 million households received IPTV services in 2007 worldwide, with this number projected to grow by 52.2% annually through 2012. Major IPTV players are telecommunications service providers that run national backbones. Other types of IPTV services, such as Apple TV, Vudu, and Amazon’s Unbox for Tivo, primarily involve downloading movies and TV programs before viewing. Despite the success, no large-scale studies have been published on the viewing habits from IPTV services. In this paper, we study the intrinsic characteristics of what and how people watch TV using traces collected from a live IPTV operation.

### 2.2 IPTV Service Architecture
Most IPTV architectures are based on a "walled-garden" approach, utilizing well-provisioned IP multicast infrastructure. Figure 1 illustrates a typical service architecture, where customers subscribe to IPTV, IP phone, and Internet access. A Digital Subscriber Line Access Multiplexer (DSLAM) aggregates traffic from hundreds to thousands of users and connects to the high-speed IP backbone. For IPTV distribution, the TV head-end streams all live broadcast TV channels towards DSLAMs through bandwidth-provisioned multicast trees in the backbone.

Due to limited access bandwidth at the last mile (i.e., from a DSLAM to the home gateway), not all TV channels are delivered to customers simultaneously. The IPTV network studied in this paper streams one channel to each customer. However, multiple channels can be delivered to support multiple TVs at home. The IPTV set-top-box (STB) translates a channel switching event from a user into a pair of Internet Group Management Protocol (IGMP) messages: one to alert the user's departure from the multicast group of a channel and the other to join another multicast group of a new channel. Upon receiving IGMP messages, DSLAMs dynamically extend or prune multicast trees towards the customers' STBs.

### 2.3 Studies on TV Viewing
Nielsen Media Research provides a wide range of statistics on TV viewing and program ratings based on a sample of the population. Nielsen technicians install metering equipment on TV sets at sampled homes and record minute-by-minute viewing. These records are collected daily and mapped with the broadcast program schedules to produce the Nielsen TV ratings. Their sampling devices gather traces from approximately 25,000 people in 10,000 homes in the United States. One of their metering devices, called "peoplemeters," assigns a personal viewing button for each family member, matched to that person's age and sex, to identify viewing habits of specific groups (e.g., young men in their 20s and 30s).

However, there are known issues with sampling methods such as those used by Nielsen. Selected households may not accurately represent demographic and regional weights, and viewers aware of being monitored may exhibit biased viewing habits. Furthermore, over 30% of selected households refuse to participate in the studies, potentially biasing the statistics. In contrast, IPTV providers can monitor the behavior of all users closely and continuously without additional monitoring devices. However, IPTV providers lack information about what individual family members are watching. Our study is also limited by the absence of such information.

## 3. Dataset and Assumptions
### 3.1 Trace Collection
We obtained a collection of IPTV channel switching logs from an operational backbone provider. The trace spans six months from May to October 2007 and records the IGMP messages on the channel changes of 250,000 users. The log includes the following:
- Timestamp in units of seconds
- IP address of the DSLAM
- IP address of the set-top-box (STB)
- IP address of the multicast group (channel)
- Multicast option of join or leave

Some multicast groups are used to manage set-top-boxes (e.g., bootstrapping and software upgrades). We pre-process the log by excluding events of non-video multicast groups. We then chronologically sort IGMP join messages, allowing us to identify which program a user was watching, for how long, and how they switched channels. Due to the scale of our trace, we present results that are averaged across the trace period or from a representative day.

There are 150 channels, grouped by the IPTV provider as follows: national, free-to-air broadcasted channels (free), local channels produced by regional states, audio, satellite, and pay-per-view (PPV) channels. The rest are cable TV-like content, including children's programs (kids), documentaries (docu), movies (cine), sports, news, and music channels. We refer to the collection of comedy, soaps, and reality shows of the remaining channels (e.g., Fox, Paramount Comedy) as mixed.

Our data does not capture other performance-related metrics such as network latency, jitter, and loss of the IPTV streams. At the time of data collection, the deployed IPTV system did not support digital video recorders (DVRs) that allow people to store favorite shows and view them later. We leave the studies of IP multicast throughput and behavioral changes due to DVRs as future work.

### 3.2 Assumptions on User Modes
To better understand user behavior, we divide user activity into three different modes: surfing, viewing, and away. The "away" mode indicates whether the user has turned off the TV or left it on without anyone watching. Our trace does not differentiate between these two options, as most users leave the IP set-top-box on and continue receiving multicast streams even when the television is off.

To define these three modes, we examine the channel holding times, i.e., the time interval between channel switchings. Figure 2 shows the cumulative distribution of channel holding times, where the slope of the curve changes around 10 seconds and again around 1 hour, indicating natural divisions between these three different modes. Although these divisions may seem arbitrary, they align well with those made by traditional media research. For example, the Nielsen Media Research demarcates viewing events by the minute. MSK Research in Korea uses 15 seconds for the viewing period, while TNS Media in Korea considers the channel a user spent the most time on during every 1 minute as the viewed channel.

We set the viewing threshold (or viewing period) to 1 minute to be consistent with the Nielsen Research and to facilitate better data comparison. We set the away threshold (or away period) to 1 hour. The most popular channels in our IPTV system are free-to-air, paid for by advertisements, and it is rare to find any single program longer than 1 hour without interruptions. Some users may watch TV for more than 1 hour without channel changes, especially when watching movie channels or checking the Internet while watching a program. As we do not have detailed user activity information, we focus on "active online viewers"—users who show some activity during a 1-hour period.

To validate our findings, we repeated most of our analyses with different thresholds. The results were not sensitive to changes in the thresholds, for instance, from 1 minute to 5 minutes or from 1 hour to 2 hours. Due to space limitations, we do not present those results.

## 4. How, When, and What People Watch
In this section, we characterize several properties of TV viewing behaviors, including:
- **User session characteristics:** When people watch TV and their attention span across different genres.
- **Channel popularity and dynamics:** How user interests are spread across channels over time.
- **Geographical locality:** Whether users in the same region or DSLAM show similar viewing patterns.