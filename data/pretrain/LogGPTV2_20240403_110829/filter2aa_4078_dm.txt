### 网络设备与网络软件标识符

随着网络设备和网络软件包数量的指数级增长，每个设备都需要一个唯一的标识符。MAC-48 和 EUI-48 地址可以通过 EUI-64 格式进行表示。在 MAC-48 示例中，两个额外的字节 FF:FF 被插入到组织唯一标识符 (OUI, 即前 3 个字节) 和网卡地址 (最后 3 个字节) 之间，例如：00:00:00:FF:FF:11:22:33。在 EUI-48 示例中，则增加两个额外的字节 FF:FE，例如：AA:BB:CC:FF:FE:11:22:33。

### OSI 模型的数据链路层 (第 2 层)

在 OSI 模型的数据链路层 (第 2 层) 中，有两个主要协议需要熟悉：地址解析协议 (ARP) 和反向地址解析协议 (RARP)。ARP 用于将 IP 地址解析为 MAC 地址，而 RARP 则将 MAC 地址解析为 IP 地址。数据链路层包含两个子层：逻辑链路控制 (LLC) 子层和介质访问控制 (MAC) 子层。这些细节内容不是 CISSP 考试的重点。

工作在第 2 层的网络硬件设备包括交换机和桥接器。这些设备支持基于 MAC 地址的路由通信。交换机从一个端口接收数据帧，并根据目的 MAC 地址将其转发到另一个端口。如果目标 MAC 地址不在同一网络段内，数据帧将通过桥接器传输到另一个网络。

### 网络层 (第 3 层)

网络层 (第 3 层) 负责向数据添加路由和寻址信息。它接收来自传输层的数据段，并通过添加源 IP 地址和目的 IP 地址创建数据包。常见的路由协议包括：

- 网际控制报文协议 (ICMP)
- 路由信息协议 (RIP)
- 开放式最短路径优先 (OSPF)
- 边界网关协议 (BGP)
- 网际组管理协议 (IGMP)
- 网际协议 (IP)
- 网际协议安全 (IPSec)
- 互联网分组交换协议 (IPX)
- 网络地址转换 (NAT)
- 网络简单密钥管理协议 (SKIP)

网络层负责提供路由或传送信息，但不保证传输的可靠性（这由传输层负责）。此外，它还管理错误检测和节点间的数据通信。

#### 非 IP 协议

非 IP 协议是一种替代 IP 的网络层协议。在过去，非 IP 协议被广泛使用，但现在已逐渐被 TCP/IP 所取代。三个最常见的非 IP 协议是 IPX、AppleTalk 和 NetBIOS。

- **IPX**：是 Novell NetWare 网络的一部分，尽管没有严格要求。
- **AppleTalk**：苹果公司开发的协议，用于 Macintosh 系统网络，但在 2009 年发布的 Mac OS X 10.6 后被取消支持。
- **NetBEUI**：微软开发的协议，用于文件和打印机共享。现在通过 NBT (NetBIOS over TCP/IP) 支持现代网络，并支持 SMB (Server Message Block) 和 CIFS (Common Internet File System)。

当非 IP 协议在网络中使用时，存在潜在的安全风险。由于非 IP 协议较为罕见，大多数防火墙无法对其数据包头、地址或有效载荷执行内容过滤。因此，防火墙通常会完全阻止或允许所有非 IP 协议流量。如果组织依赖于使用非 IP 协议的服务，可能需要冒让防火墙允许所有非 IP 流量的风险。然而，非 IP 协议可以封装在 IP 协议中并通过互联网进行通信，在这种情况下，IP 防火墙也难以对封装的内容进行过滤。

工作在第三层的网络硬件设备包括路由器和桥式路由器。路由器基于速度、跳数、优先级等信息确定数据包传输的最佳逻辑路径。桥式路由器则在必要时可以在第二层工作，这是一种先尝试路由、失败时默认桥接的设备。

### 路由协议

路由协议分为两类：距离矢量和链路状态。距离矢量路由协议维护一个目的网络以及距离和方向的跳数列表。链路状态路由协议维护一张所有已连接网络的拓扑图，并使用该图确定到达目的地的最短路径。常见的距离矢量路由协议包括 RIP、IGRP 和 BGP，而链路状态路由协议的常见例子则是 OSPF。

### 传输层 (第 4 层)

传输层 (第 4 层) 负责管理连接的完整性和控制会话。它接收来自会话层的 PDU (协议数据单元)，并将其转换为数据段。传输层控制网络上设备的寻址方式，并在节点之间建立通信连接。会话规则指定每个数据段中可以包含多少数据、如何验证传输数据的完整性以及如何确定数据是否丢失。会话规则在握手过程中建立（参见本章中的“TCP/IP 的 SYN/ACK 三步握手过程”）。

传输层在两台设备之间建立了一个逻辑连接，并提供了端到端的传输服务。这一层包括针对分段、排序、错误检查、数据流控制、错误纠正、复用和网络服务优化的机制。常见的传输层协议包括：

- 传输控制协议 (TCP)
- 用户数据报协议 (UDP)
- 顺序数据包交换 (SPX)
- 安全套接层 (SSL)
- 传输层安全 (TLS)

### 会话层 (第 5 层)

会话层 (第 5 层) 负责在两台计算机之间建立、维护和终止通信会话。这一层管理对话模式（单工、半双工、全双工），并为分组和恢复建立检查点。常见的会话层协议包括：

- 网络文件系统 (NFS)
- 结构化查询语言 (SQL)
- 远程过程调用 (RPC)

通信会话可以以以下三种模式之一进行操作：

- **单工**：单向直接通信
- **半双工**：双向通信，但每次只能有一个方向发送数据
- **全双工**：双向通信，同时在两个方向上传输数据

### 表示层 (第 6 层)

表示层 (第 6 层) 负责将从应用层接收的数据转换为符合 OSI 模型的标准格式。它向数据中添加通用或标准的结构和格式化规则，负责加密和压缩。表示层确保数据格式能够被两个系统支持，从而使不同的应用程序能够通过网络交互。常见的表示层格式标准包括：

- 美国信息交换标准代码 (ASCII)
- 扩充二进制编码的十进制交换码 (EBCDIC)
- 标签图像文件格式 (TIFF)
- 联合图像专家组 (JPEG)
- 运动图像专家组 (MPEG)
- 音乐设备数字接口 (MIDI)

### 应用层 (第 7 层)

应用层 (第 7 层) 负责将协议栈与用户的应用程序、网络服务或操作系统连接在一起。它确保远程通信方可用且可访问，并确保有足够的资源支持请求的通信。应用层内的协议和服务包括：

- 超文本传输协议 (HTTP)
- 文件传输协议 (FTP)
- 行式打印机后台程序 (LPD)
- 简单邮件传输协议 (SMTP)
- 远程登录 (Telnet)
- 普通文件传输协议 (TFTP)
- 电子数据交换 (EDI)
- 邮局协议第三版 (POP3)
- 互联网消息访问协议 (IMAP)
- 简单网络管理协议 (SNMP)
- 网络新闻传输协议 (NNTP)
- 安全远程过程调用 (S-RPC)
- 安全电子交易 (SET)

一种工作在应用层的网络设备或服务称为网关。网关作为协议转换工具，例如 IP-to-IPX 网关接收采用 TCP/IP 协议的入站通信，并将其转换为 IPX/SPX 协议的出站通信。应用防火墙也工作在这一层。其他网络设备或过滤软件也可能工作在应用层。