sals, we ﬁnd that even history cannot reliably predict the occurrence
of a gray period. We illustrate our point by showing the average be-
haviors of the paths in Figures 3 and 4. To compute the average be-
havior at a location, we ﬁrst map each location to a 10m x 7m grid,
by rounding raw coordinate degree values to four decimal places.
We do this not only because of potential imprecision in GPS output
but also because the van does not traverse the exact same locations
on each traversal of a path. We then compute the average over all
locations that map to the same grid.
Figure 7 shows the performance of the paths we showed previ-
ously when averaged over the entire day. Observe that almost all
intervening locations of poor connectivity disappear upon averag-
ing, which implies that most gray periods do not consistently occur
at the same spot, and thus are not caused by physical obstructions.
The variability in BRR for the average view is much less than that
d
o
i
r
e
p
y
a
r
g
f
o
.
b
o
r
p
1.0
0.8
0.6
0.4
0.2
0.0
0.2 0.4 0.6 0.8 1.0
mean BRR
Figure 8: Gray periods are more likely to be observed at loca-
tions that have poorer connectivity on average. The graph is a
scatterplot of the average BRR for a location across traversals
in a day versus the probability of observing a gray period at
that location during that day.
d
o
i
r
e
p
y
a
r
g
f
o
.
b
o
r
p
1.0
0.8
0.6
0.4
0.2
0.0
0.2 0.4 0.6 0.8 1.0
mean BRR
Figure 9: Past performance can help identify locations where a
gray period will likely be encountered in the future. The graph
is a scatterplot of the average BRR at a location across traver-
sals in a day versus the probability of encountering a gray pe-
riod at that location during the next day.
The results in this section are based on a two-week trace of
broadcast probes generated by BSs and vans on Channel 11. These
probes had the same frequency as 802.11 beacons, but were 500
bytes in size, to mimic the larger size of data packets.
To evaluate performance stability across time, we measure the
standard deviation of the reception ratio across different traversals
of the same location.
In addition to the connectivity between a
client and BS, we study the connectivity between two BSs. This
lets us isolate the impact of vehicular mobility from the inherent
variability of the outdoor wireless environment. Further, there is
variability inherent in our measurement methodology because re-
ception ratios at individual locations are computed using a small
number of transmission attempts. To isolate this, we study the vari-
ability of reception ratio obtained using a simulation with ﬁxed re-
ception probability but the same number of (synthetic) samples.
Figure 10 shows the standard deviations for the three cases, as a
function of mean reception ratio over the course of a day. Individ-
ual reception ratios are computed over a 1-second period which is
comparable to the time our clients spend at each location (normal-
ized to a grid); the means are classiﬁed into bins of size 0.1. For
the client-BS case, each y-value is the standard deviations across
all client-BS-location triplets with the given x-value. For the BS-
BS case, each y-value is the standard deviations for all BS-BS pairs
with the given x-value.
The graph shows that the variability in the Client-BS case is sim-
ilar to that in the BS-BS case. This implies that vehicular mobility
has at most a second order effect on variability beyond what is in-
herent in the outdoor environment. Thus, the speeds with which our
vans move and the differences in the exact location across traver-
sals have minimal impact. However, this does not mean that ve-
hicular mobility does not introduce additional complexity in such
(a) Average view of the path in Figure 3
R
R
B
1.0
0.8
0.6
0.4
0.2
0.0
0
50
100
seconds from start
one round
average
(b) Average view of the session in Figure 4
Figure 7: Gray periods do not consistently occur at the same
spot. (a) The average (over a day) performance at each location
along the path. Thin lines connect locations with very poor av-
erage connectivity (less than 10% BRR). Thick lines represents
the complement. (b) The single-round and average (over a day)
BRR for locations along the session.
for the single-round view in Figure 7(b). This suggests that inter-
ference and wireless variability in the urban environment are often
responsible for gray periods.
To show this more directly, we consider for each location its
mean BRR and the probability of observing a gray period there.
The mean BRR is computed across traversals in one day of that
location and the probability is the fraction of traversals for which
a gray period is observed. Figure 8 shows a scatterplot of the two
measures. While the probability of observing a gray period is non-
zero even for locations with high mean BRR, it is higher for lo-
cations with lower mean BRR. Thus, the client is more likely to
experience a gray period when traversing locations with poorer av-
erage connectivity. The wireless variability in a given traversal is
more likely to cause gray periods at those locations.
While this behavior does not allow us to deterministically predict
a future gray period, can it identify regions where the client is likely
to encounter a future gray period? Figure 9 shows that this is true
in our environment. It plots the average BRR observed across a
day versus the probability of encountering a gray period during the
next day. We see that there is enough stability in the environment
such that past performance can be used to predict the probability of
encountering a gray period in the future.
6. PERFORMANCE PREDICTABILITY
In this section, we investigate if the ability to predict perfor-
mance exists more broadly than predicting gray periods. That is,
is the performance at a location across traversals stable enough for
a client to be able to predict future performance?
i
n
o
i
t
a
v
e
v
d
r
a
d
n
a
t
s
0.4
0.2
0.0
client-BS
BS-BS
simulation
0.0 0.2 0.4 0.6 0.8 1.0
mean reception ratio
Figure 10: Vehicular mobility does not introduce additional
variability in client-to-BS performance compared to BS-to-BS
performance. The graph plots the standard deviation as a func-
tion of the reception ratio at the location.
r
o
r
r
e
n
o
i
t
c
d
e
r
p
i
0.4
0.2
0.0
client-BS
simulation
0.0 0.2 0.4 0.6 0.8 1.0
avg. reception ratio
Figure 11: Predicting performance at a location based on his-
torical data is feasible. The graph plots the prediction error as
a function of the average reception ratio observed in the pre-
vious day. The lines connect the mean and the whiskers depict
the 90th percentile error.
networks. Because of it, we ﬁnd that the variability in performance
across time is higher for client-BS connectivity than BS-BS con-
nectivity. This will likely render protocols such as transmission rate
adaptation that base future behavior on recent past less effective.
That the standard deviation of simulation in Figure 10 is lower
implies that the wireless environment is more variable. However,
the standard deviation for a setting where the reception ratio changes
randomly in each interval is greater still (roughly 0.35). Thus, there
is some consistency in performance at a location.
To understand whether this can be tapped to predict performance
based on historical data, lets consider the task of predicting recep-
tion ratio over 1-second intervals. As our prediction for a location,
we use the average reception ratio observed at that location across
all traversal in the previous day. For simplicity, we ignore any time-
of-day effects; taking those into account may improve prediction
accuracy. We measure prediction error as the difference between
the predicted and actual reception ratio.
Figure 11 plots the mean and 90th percentile prediction error.
To quantify the error inherent in our measurement methodology, it
also plots the prediction error in a simulation where the underlying
reception probabilities are ﬁxed. We see that while the 90th per-
centile error is higher, the mean error in the vehicular environment
is comparable to the simulation setting. This suggests that perfor-
mance prediction in this environment is feasible. The average-case
accuracy would be high, though the worst-case accuracy may be
poor. The graph also shows that predictions are more accurate for
locations with very poor or very good connectivity on average.
7. SUMMARY
Our work uncovers a complex picture of WiFi-based connectiv-
ity between basestations and moving vehicles. The period between
the vehicle coming in and going out of range of a BS is often marred
by intermittent “gray” periods of very poor connectivity. Gray pe-
riods are hard to predict because their arrival cannot be reliably
signaled using current measurements and because they do not con-
sistently occur at the same location.
Our analysis suggests that gray periods are caused by variability
in the urban radio environment combined with the vehicle travers-
ing regions that are poorly covered by the basestation. This means
that gray periods are likely to be part and parcel of WiFi-based ve-
hicular access. Because its difﬁcult to provide blanket good cover-
age in large, outdoor spaces, clients are bound to encounter regions
of poor connectivity. Gray periods can pose a signiﬁcant challenge
to providing uninterrupted connectivity to applications.
We also show that history of past performance is useful in ve-
hicular settings. The knowledge of performance experienced at a
location during past traversals can be used to identify both regions
where gray periods are more likely to occur and those where the
vehicle is likely to experience good performance.
Acknowledgments Victoria Poncini (Microsoft IT) helped with
basestation deployment. Several employees of MV Transportation
Inc. helped with deployment on the vans. Our shepherd, Dina Pa-
pagianaki, helped improve the presentation in this paper. We thank
them all.
8. REFERENCES
[1] 802.11n report.
http://grouper.ieee.org/groups/802/11/Reports/tgn_update.htm.
[2] D. Aguayo, J. Bicket, S. Biswas, G. Judd, and R. Morris. Link-level
measurements from an 802.11b mesh network. In SIGCOMM, Aug.
2004.
[3] V. Bychkovsky, B. Hull, A. Miu, H. Balakrishnan, and S. Madden. A
measurement study of vehicular Internet access using unplanned
802.11 networks. In MobiCom, Sept. 2006.
[4] Y. Cheng, J. Bellardo, P. Benko, A. C. Snoeren, G. M. Voelker, and
S. Savage. Jigsaw: Solving the puzzle of enterprise 802.11 analysis.
In SIGCOMM, Aug. 2006.
[5] UMass DieselNet. http://prisms.cs.umass.edu/dome/.
[6] What is EVDO. http://www.evdoinfo.com/content/view/37/61/.
[7] R. Gass, J. Scott, and C. Diot. Measurements of in-motion 802.11
networking. In WMSCA workshop, Apr. 2006.
[8] A. P. Jardosh, K. N. Ramachandran, K. C. Almeroth, and E. M.
Belding-Royer. Understanding congestion in IEEE 802.11b wireless
networks. In IMC, Oct. 2005.
[9] R. Mahajan, M. Rodrig, D. Wetherall, and J. Zahorjan. Analyzing the
MAC-level behavior of wireless networks in the wild. In SIGCOMM,
Aug. 2006.
[10] J. Ott and D. Kutscher. Drive-thru Internet: IEEE 802.11b for
automobile users. In INFOCOM, Mar. 2004.
[11] K. Papagiannaki, M. Yarvis, and W. S. Conner. Experimental
characterization of home wireless networks and design implications.
In INFOCOM, Apr. 2006.
[12] J. Robinson, D. Papagiannaki, C. Diot, X. Guo, and
L. Krishnamurthy. Experimenting with a multi-radio mesh
networking testbed. In WiNMee workshop, Apr. 2005.
[13] P. Rodriguez, R. Chakravorty, I. Pratt, and S. Banerjee. MARS: A
commuter router infrastructure for the mobile Internet. In MobiSys,
June 2004.
[14] F. Smith, J. Aikat, J. Kapur, and K. Je. Variability in TCP round-trip
times. In IMC, Oct. 2003.
[15] City-wide Wi-Fi rolls out in UK.
http://news.bbc.co.uk/2/hi/technology/4578114.stm.
[16] Cities unleash free Wi-Fi.
http://www.wired.com/gadgets/wireless/news/2005/10/68999.