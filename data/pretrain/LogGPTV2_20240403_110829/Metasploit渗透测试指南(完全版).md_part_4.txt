辅助模块剖析
128
9.3
小结
.133
第10章
社会工程学工具包
...135
10.1
1配置SET工具包.
.136
10.2针对性钓鱼攻击向量，
.137
10.3Web攻击向量....
10.3.1 Java Applet....
.142
10.3.2
客户端Web攻击.
.. 146
10.3.3
用户名和密码获取
.148
10.3.4
标签页劫持攻击.
.. 150
10.3.5
中间人攻击
...150
10.3.6
网页劫持.
151
10.3.7
综合多重攻击方法
..153
10.4传染性媒体生成器
. 157
10.5Teensy USB HID 攻击向量
157
10.6SET的其他特性..
160
XI
---
## Page 25
10.7小结
...161
第11章Fast-Track
...163
11.1Microsoft SQL 注入
...164
11.1.1
SQL 注入一
查询语句攻击，
.165
11.1.2SQL注入
POST参数攻击...
..166
11.1.3
手工注入
... 167
11.1.4MS SQL 破解
..168
11.1.5
通过SQL自动获得控制（SQLPwnage）
...172
11.2
二进制到十六进制转换器
.. 174
11.3
大规模客户端攻击..
.1.75
11.4小结：对自动化渗透的-一点看法
.176
第12章
Karmetasploit无线攻击套件
....177
12.1
配置
..1.78
12.2
开始攻击.
.179
12.3
获取凭证.
...181
12.4
得到Shell..
.182
12.5
小结.
..184
第13章
编写你自己的模块
...185
13.1
在MSSOL上进行命令执行
...186
13.2
探索一个已存在的Metasploit模块
..187
13.3编写一个新的模块
..189
13.3.1 PowerShell .
.189
13.3.2
运行Shell渗透攻击.
..190
13.3.3
编写powershell_upload_exec函数
...192
13.3.4
从十六进制转换回二进制程序.
....192
13.3.5
计数器.
...194
13.3.6运行渗透攻击模块.
..195
13.4小结：代码重用的能量..
..196
第14章仓
创建你自己的渗透攻击模块
...197
14.1Fuzz测试的艺术.
14.2控制结构化异常处理链
201
14.3
绕过SEH限制
...204
IIX
---
## Page 26
14.4获取返回地址
.206
14.5坏字符和远程代码执行..
..210
14.6
小结.
..213
第15章将渗透代码移植到Metasploit框架
..215
15.1汇编语言基础...
...216
15.1.1EIP和ESP寄存器，
..216
15.1.2JMP指令集.
...216
15.1.3
空指令和空指令滑行区
.216
15.2移植一个缓冲区溢出攻击代码
...216
15.2.1
裁剪一个已有的渗透攻击代码
..218
15.2.2
构造渗透攻击过程
...219
15.2.3
测试我们的基础渗透代码
220
15.2.4
实现框架中的特性，
.221
15.2.5
增加随机化.
222
15.2.6
消除空指令滑行区.
223
15.2.7
去除伪造的Shellcode.
..223
15.2.8
我们完整的模块代码
224
15.3SEH覆盖渗透代码
...226
15.4
小结.
.233
第16章Meterpreter脚本编程
.235
16.1Meterpreter脚本编程基础.
...235
16.2 Meterpreter API....
.241
16.2.1
打印输出，
.241
16.2.2
基本API调用
..242
16.2.3MeterpreterMixins....
.242
16.3
编写Meterpreter脚本的规则.
.244
16.4创建自己的Meterpreter脚本.
.244
16.5小结
....250
第17章
一次模拟的渗透测试过程
.251
17.1
前期交互.
..252
17.2
情报搜集
.252
17.3威胁建模.
253
17.4渗透攻击，
255
XIII
---
## Page 27
17.5MSF终端中的渗透攻击过程
255
17.6后渗透攻击.
257
17.6.1扫描Metasploitable靶机.
.258
17.6.2识别存有漏洞的服务
.259
17.7攻击 Apache Tomcat..
260
17.8攻击一个偏门的服务
.262
17.9隐藏你的踪迹.
264
17.10小结.
266
附录A配置目标机器
.267
附录B命令参考列表
.275
PDG
XIV
---
## Page 28
第章
渗透测试技术基础
渗透测试（PenetrationTesting）是一种通过模拟攻击者的技术与方法，挫败目标系统的安
全控制措施并取得访问控制权的安全测试方式。渗透测试的过程并非简单地运行一些扫描器和
自动化工具，然后根据结果写一份安全报告。你不可能指望在一夜之间就能够成为一名职业的
渗透测试师，这往往需要数年时间的频繁实践和在真实环境中的历练，才能让你成为一名精于
此道的渗透测试师。
最近，安全业界看待和定义渗透测试过程的方式有了一些转变，已被安全业界中几个领军
企业所采纳的渗透测试执行标准（PTES:PenetrationTestingExecutionStandard）正在对渗透测
试进行重新定义，新标准的核心理念是通过建立起进行渗透测试所要求的基本准则基线，来定
义一次真正的渗透测试过程，并得到安全业界的广泛认同。这将对渗透测试领域的“新手”和
“老鸟”们都会产生一些影响，如果你刚刚涉足渗透测试领域，或者对渗透测试执行标准还不太
熟悉，请访问http://www.pentest-standard.org/进行进一步的了解。
---
## Page 29
Metasploit渗透测试指南
1.1PTES标准中的渗透测试阶段
的方式来扩展一次渗透测试，而无论是由谁来执行这种类型的评估。该标准将渗透测试过程分
为七个阶段，并在每个阶段中定义不同的扩展级别，而选择哪种级别则由被攻击测试的客户组
织所决定。现在设想你就是一名渗透测试者，让我们带领你了解一下在每个渗透测试阶段都需