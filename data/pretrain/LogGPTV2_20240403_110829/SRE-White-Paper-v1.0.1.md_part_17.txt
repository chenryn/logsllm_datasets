第五个“为什么”：为什么机器会出现 FullGC？
第五个答案：因为今天的代码发布引入了一条全表扫描，引发
慢 SQL导致机器出现 FullGC。
3）制定改进措施
我们找出问题根因的核心目的是为了针对根因制定改进措施，
避免同样的问题再发生。
3.5.4.3 制定改进
1．举一反三
故障改进是故障复盘中的关键一环，故障改进不仅仅是处理当
下问题，一定要去看本质的问题，目的是降低故障再次发生的概
率，但降低概率不等于不会发生，当故障真的来临的时候，也需要
有足够的能力和定力来应对。
从问题入手，是治标；从根源入手，不仅可以解决眼前的问
题，还可以解决更多隐性的未知问题，是治本。故障改进工作就是
一次对系统和业务问题的治本思考。
2．如何做好故障改进
首先重点要关注“谁？什么时间？完成什么任务？交付什么结
果？”
 改进项必须有负责人，一个任务可能多人配合，但必须指
定一个主要负责人，负责人对任务的过程、结果负责。
 改进项必须明确完成时间，需要明确给出改进项在某个具
⽹址：SRE-Elite.com 11 5 微信：SRE精英联盟
SRE实践白皮书（2023年）
体时间节点的完成时间。
 明确改进的输出，任务的目标、交付结果必须明确，作为
任务完成的验证标准，且可衡量。如设计方案的改进措施，
要求输出方案文档，可以进一步明确方案文档必备的内容
等。
同时一个好的改进措施需要符合 SMART原则：
 Specific：即改进项。我们需要改进的事项或指标。
 Measurable：即验收标准。改进完成后通过评审、演练、
主管确认等方式验收。
 Attainable：即改进项是否可落地。需要避免出现一些喊
口号、无法落地的改进。
 Relevant：即和故障本身有相关性。避免已在计划内的或
非故障识别的改进项纳入充数。
 Time-bound：即预期解决时间。建议最长不要超过三个
月，避免改进期间故障再次发生。
3．改进措施的记录
为确保改进项得到有效跟踪和验收，需要结构化地记录在系统
中，一个完整改进措施的内容包括以下内容：
 标题
 计划完成时间
 负责人（及其团队或协助处理人）
 验收方式及验收人
⽹址：SRE-Elite.com 11 6 微信：SRE精英联盟
SRE实践白皮书（2023年）
 跟踪人
 改进措施的类别
 具体改进内容描述及验收标准
4．改进措施的分类
措施的分类主要有基础架构类、产品设计类、发布类、变更执
行类、编码类（前端代码、客户端代码、服务端代码）、测试类、监
控类、容量/灾备类、安全类、流程规范类、数据库类、中间件类
等。在每次故障复盘的过程中，监控类是每一起故障必考虑的改进
项，技术同学会从精益求精的角度提升系统监控发现，及时有效预
警，为业务的恢复争分夺秒。
3.5.4.4 问题跟踪
故障复盘梳理出来的故障报告需要细化事件问题跟踪项，包括
事故情况、根因、责任人和后续改进事项。首先距离落地还需要持
续跟踪明确处理人，预计完成时间等，避免事故跟进事项成为空
谈。其次，SRE 建立定期提醒机制，确保事故跟进事项的落地。一
些事后问题修复的跟进可以通过文档管理平台落地开发任务。
3.6 上线后持续优化工作
3.6.1 用户体验优化
解释什么是用户体验优化之前，我们先来解释一下什么是用户
体验。
用户体验是指用户在使用产品或服务时所感受到的一切，包括
感官、情感、认知、行为等各个方面，一个好的用户体验应该是用
⽹址：SRE-Elite.com 11 7 微信：SRE精英联盟
SRE实践白皮书（2023年）
户感到舒适、方便、快捷、高效和满意的。
而用户体验优化则是指通过维护系统的高可用性、减少系统的
错误率、加快用户的响应速度等方面来提升用户在系统上的使用体
验。
在 SRE 中，用户体验优化是一个重要的目标，它能够提高用户
的满意度和信任度，增大用户对业务的黏性和忠诚度，从而增加用
户的留存率和转化率，提高产品或服务的竞争力和市场占有率。
3.6.1.1 基于用户端的直接用户体验优化
基于用户端的直接用户体验优化，主要是针对用户直接接触到
的产品或服务的方面进行优化，包括用户卡顿 （页面加载速度、响
应时间）、用户网络等方面，以提高用户的使用体验和忠诚度。
1．面向用户端的优化措施
1）用户端卡顿优化：通过提高客户端的性能（优化代码、减少
资源消耗、改进算法等）、压缩和合并前端资源以及使用缓存和预加
载等方式来提高页面加载速度，减少用户等待时间和卡顿现象；
2）用户端网络优化：通过使用网络传输加速技术 （包括使用
TCP 拥塞控制算法、调整 TCP 窗口大小、使用 TCP 连接池等）和双
通道加速技术来提高数据传输的效率、减少用户网络的延迟以及增
强通信的稳定性；如当用户处在弱网情况下，能利用双通道加速技
术（如 Wi-Fi 和 LTE 同时发包的方式）来降低用户的网络时延和增
强用户通信的稳定性，就可以减少用户流失。
3）用户端其他优化：除卡顿和网络优化这种较为通用的优化之
⽹址：SRE-Elite.com 11 8 微信：SRE精英联盟
SRE实践白皮书（2023年）
外，还有一部分是基于业务逻辑，对用户请求的反馈提示的优化。
例如：触发了排队机制的提示信息，服务器满员的提示信息等。这
些信息有效提示，可以引导用户等待或者引导用户到其他有资源的
途径，让用户感受到系统仍然在工作，避免流失。
3.6.1.2 基于系统端的间接用户体验优化
基于系统端的间接用户体验优化，主要是针对用户无法直接接
触到的产品或服务的方面进行优化，包括系统的性能、架构、容灾
等方面，以保证系统的鲁棒性、健壮性和可用性，提高用户的信任
度和满意度。
1．面向系统端的优化措施
1）基于鲁棒性的优化，提升系统健壮性：通过优化系统的容量
规划、容错机制、架构设计 （如弹性和可伸缩性）和负载策略（如
负载均衡、优雅降级和限流策略），确保系统在高负载和故障情况下
仍能正常运行，防止因系统故障而对用户造成影响；例如：系统突
发大量请求增加时，系统能够自动扩展和收缩资源以适应变化的负
载，且系统能够实施限流和排队机制，限制并发请求的数量，并将
请求放入队列中进行有序处理，避免系统过载和崩溃。
2）基于幂等性的优化，提升系统可用性：通过将系统关键操作
设计为幂等操作，并且在关键操作中，实施幂等性检查机制，如果
关键操作失败或中断，可以使用事务和回滚机制来确保操作的幂等
性，避免数据不一致或重复操作；如系统接收到重复请求时，系统
可以检查请求 ID 或其他标识符，并判断是否已经处理过该请求；如
⽹址：SRE-Elite.com 11 9 微信：SRE精英联盟
SRE实践白皮书（2023年）
果已经处理过，则可以忽略重复请求或返回相同的结果；或者如果
系统操作失败或中断时，系统可以自动回滚到之前的状态，避免数
据不一致或重复操作，并且通过系统自动重试后，能够被正确的处
理。
在 SRE 中，用户体验优化措施实施之后，我们还需要一系列的
度量指标来衡量和评估优化的效果：
1）用户满意度（ User Satisfaction）：通过用 户反 馈 、 调 查或评
级来衡量用户对系统或服务的满意程度，这可以通过定期的用户调
查、NPS（Net Promoter Score）或用户反馈收集来评估。
2）用户可用性（User Availability）：通过 监测 系统的 正 常 运行
时间、故障时间和恢复时间来衡量系统或服务在用户可访问性方面
的表现，关键指标包括平均故障间隔时间（ MTTF，Mean Time
Between Failures）和平均故障恢复时间（ MTTR，Mean Time To
Recover）。
3）系统错误率（Error Rate）：通过 监测错误请 求的 百 分 比 、 错
误码的数量或错误率来衡量系统或服务在处理用户请求时发生错误
的频率，较低的错误率通常表示更可靠的系统。
4）系统或者页面响应时间（Response Time）：通过 监测平 均 响
应时间、最大响应时间和百分位数（如 P99）来衡量系统或服务对
用户请求的响应速度，较低的响应时间通常意味着更好的用户体
验。
5）用户反馈响应时间（User Feedback Response Time）：通过 监
⽹址：SRE-Elite.com 12 0 微信：SRE精英联盟
SRE实践白皮书（2023年）
测用户反馈的处理时间、解决问题的时间和用户满意度来衡量团队
对用户反馈的响应速度。
6）客户端性能状态指标（Client Perf Status Metrics）：通过 监测
客户端关键路径上各动作的状态和发生时间，了解和衡量用户端操
作和运行是否符合设计预期，主动确认是否存在优化的可能性。
除了以上通用型指标， 还建议对用户使用的关键路径进行监
控，关键路径监控是指关注那些对用户体验有决定性影响的系统组
件或交互流程。这些路径是用户完成主要任务所必须的，比如电商
网站的结账流程或者社交网络的信息发布流程。
关键路径监控通常包括：
（1）端到端事务跟踪：追踪用户请求从开始到结束的全过程，
确保每个步骤都按预期工作。
（2）性能瓶颈识别：识别并优化那些延迟用户操作的关键组
件。
（3）可靠性保障：确保关键路径上的服务具备高可用性和容错
能力。
（4）实时警报：当关键路径上的性能下降或出现错误时，实时
通知团队进行干预。
（5）影响评估：分析关键路径性能问题对用户体验和业务目标
的影响。
通过关键路径监控，SRE 团队可以更全面地理解用户体验，并
采取针对性的优化措施。这些措施不仅仅关注技术性能指标，而且
⽹址：SRE-Elite.com 12 1 微信：SRE精英联盟
SRE实践白皮书（2023年）
着眼于用户行为和感知，同时可以更为集中火力，获得更好的优化
效果。