isisPduLspId=[isisPduLspId], ifIndex=[ifIndex], IfName=[IfName])
日志含义
ISIS试图发送一个大于接口MTU的LSP报文。
日志参数
参数名称 参数含义
[isisSysInstance] ISIS进程号。
[isisSysLevelIndex] ISIS级别。
[isisCircIndex] 接口索引。
[isisCircIfIndex] 接口IF索引。
[isisPduLspSize] LSP的长度。
[isisPduLspId] LSP ID
[ifIndex] 接口IF索引。
文档版本 06 (2017-09-12) 华为专有和保密信息 351
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
日志参考 38 ISIS
参数名称 参数含义
[IfName] 接口名称。
可能原因
转发收到的LSP报文时，该报文长度大于接口的MTU值。
处理步骤
l 检查接口的MTU值和收到的LSP的大小，确保所有接口的MTU大于LSP的长度。
----结束
38.30 ISIS/5/ISIS_LSP_SEQ_THRESHOLD_EXCEED
日志信息
ISIS/5/ISIS_LSP_SEQ_THRESHOLD_EXCEED: The LSP sequence number has exceeded
the upper threshold value. (isisSysInstance=[isisSysInstance],
isisSysLevelIndex=[isisSysLevelIndex], isisPduLspId=[isisPduLspId], srcMac=[srcMac],
recvFromIf=[ifName], thresholdValue=0x[thresholdValue])
日志含义
IS-IS LSP报文序列号超过了告警上限阈值。
日志参数
参数名称 参数含义
isisSysInstance IS-IS进程号。
isisSysLevelIndex IS-IS级别。
isisPduLspId LSP ID。
srcMac 收到LSP报文的源设备MAC地址。
recvFromIf 收到LSP报文的接口。
thresholdValue 告警上限阈值。
可能原因
原因1：网络收到恶意报文，该报文模拟本地设备发送的LSP，并将报文的序列号修改
成大于上限阈值。
原因2：网络中存在重复的IS-IS System ID，导致网络长时间震荡。
文档版本 06 (2017-09-12) 华为专有和保密信息 352
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
日志参考 38 ISIS
处理步骤
步骤1 使用display isis lsdb命令连续查看本地路由器产生的LSP序列号。
l 如果序列号正常增加，则是正常运行信息，无需处理。
l 如果序列号增加速度过快，请执行步骤2。
步骤2 在IS-IS视图下使用timer lsp-refresh命令，调大LSP刷新定时器的值，再继续执行
display isis lsdb命令查看本地路由器产生的LSP序列号。
l 如果序列号正常增加，请执行步骤5。
l 如果序列号仍然增加速度过快，请执行步骤3。
步骤3 查看域内是否存在与本地System ID冲突的设备。
l 如果是，请修改其中一台冲突设备的System ID。
l 如果不是，请执行步骤4。
步骤4 请收集相关显示信息，并联系技术支持人员。
步骤5 结束。
----结束
38.31 ISIS/2/ISIS_MANUAL_ADDRESS_DROPS
日志信息
ISIS/2/ISIS_MANUAL_ADDRESS_DROPS: Some area addresses were discarded because
the number of area addresses exceeded three. (isisSysInstance=[isisSysInstance],
isisSysLevelIndex=[isisSysLevelIndex], isisManAreaAddr=[isisManAreaAddr],
isisManAreaAddrExistState=[isisManAreaAddrExistState])
日志含义
区域地址个数多于三个，本地区域地址被丢弃。
日志参数
参数名称 参数含义
[isisSysInstance] ISIS进程号。
[isisSysLevelIndex] ISIS级别。
[isisManAreaAddr] IS-IS区域地址。
[isisManAreaAddrExistState] 区域地址存在状态。
文档版本 06 (2017-09-12) 华为专有和保密信息 353
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
日志参考 38 ISIS
可能原因
在Level-1-2上，IS-IS向Level-2区域渗透Level-1的区域地址，造成Level-2区域地址的个
数超过3个，此时IS-IS选择最小的前3个区域地址作为Level-2的区域地址，导致本地的
Level-2区域地址可能丢失。
处理步骤
步骤1 使用display isis lsdb level-1 verbose命令查看IS-IS的Level-1 LSDB详细内容，查看LSP
零分片携带的AREA ADDR字段，统计所有不同的Level-1区域地址数量，查看总数是
否大于3。
l Y =>2。
l N =>3。
步骤2 进入IS-IS视图，（请谨慎使用undo network-entity命令）使用undo network-entity命令
删除IS-IS区域地址，再使用network-entity命令配置新的IS-IS区域地址，确保与该
level-1-2路由器连接的所有level-1区域内不同的IS-IS区域地址个数不超过3个。使用
display isis lsdb命令查看本地LSP零分片的Level-1 Area Address与Level-2 Area Address
是否完全相同。
l Y =>4。
l N =>3。
步骤3 请联系技术支持人员。
步骤4 结束。
----结束
38.32 ISIS/2/
ISIS_MAX_AREA_ADDRESSES_MISMATCH
日志信息
ISIS/2/ISIS_MAX_AREA_ADDRESSES_MISMATCH: The MaxAreaAddress field of
received PDU is different from local configuration. (isisSysInstance=[isisSysInstance],
isisSysLevelIndex=[isisSysLevelIndex], isisPduMaxAreaAddress=[isisPduMaxAreaAddress],
isisCircIndex=[isisCircIndex], isisCircIfIndex=[isisCircIfIndex],
isisPduFragment=[isisPduFragment], ifIndex=[ifIndex], IfName=[IfName])
日志含义
收到的Level-1的PDU的头部中支持的最大区域地址数与本地支持的最大区域地址数不
匹配。
日志参数
参数名称 参数含义
[isisSysInstance] ISIS进程号。
文档版本 06 (2017-09-12) 华为专有和保密信息 354
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
日志参考 38 ISIS
参数名称 参数含义
[isisSysLevelIndex] ISIS级别。
[isisPduMaxAreaAddress] 最大区域地址数。
[isisCircIndex] 接口索引。
[isisCircIfIndex] 接口IF索引。
[isisPduFragment] 64字节报文头缩略。
[ifIndex] 接口IF索引。
[IfName] 接口名称。
可能原因
1．如果是由于单板硬件故障触发该日志，可能造成路由震荡，CPU使用率升高。
2．如果是由于设备互通触发该日志，造成邻居无法建立，路由也无法相互学习。
处理步骤
步骤1 对照ISO10589定义的IS-IS报文格式，从输出信息的二进制报文中找到isisPduFragment
字段（十六进制）的内容，查看源的System ID。然后，根据输出信息中的
isisPduMaxAreaAddress字段的值检查最大区域地址数是否被配置为其他值（即非0和3
的值）。
l 如果是，请执行步骤2。
l 如果不是，请执行步骤3。
表38-5 IS-IS报文类型和System ID的查找方法
报文类型的查找方法 System ID的查找方法
Hello：[isisPduFragment]字段的第5个字 从[isisPduFragment]字段的第10个字节开
节的值为0f、10或者11。 始，连续的6个字节是System ID。
LSP：[isisPduFragment]字段的第5个字节 从[isisPduFragment]字段的第13个字节开
的值为12或者14。 始，连续的6个字节是System ID。
SNP：[isisPduFragment]字段的第5个字节 从[isisPduFragment]字段的第11个字节开
的值为18、19、20或者21。 始，连续的6个字节是System ID。
步骤2 修改源最大区域地址数为3。检查问题是否解决。
l 如果是，请执行步骤6。
l 如果不是，请执行步骤3。
文档版本 06 (2017-09-12) 华为专有和保密信息 355
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
日志参考 38 ISIS
步骤3 通过查看日志、Ping报文等手段查看是否存在单板硬件故障，导致报文被修改。
l 如果是，请执行步骤4。
l 如果不是，请执行步骤5。
步骤4 更换单板。检查问题是否解决。
l 如果是，请执行步骤6。
l 如果不是，请执行步骤5。
步骤5 请联系技术支持人员。
步骤6 结束。
----结束
38.33 ISIS/3/ISIS_ORIG_LSP_BUFF_SIZE_MISMATCH
日志信息
ISIS/3/ISIS_ORIG_LSP_BUFF_SIZE_MISMATCH: The size of the local buffer for
originating IS-IS LSPs is smaller than the size of the received LSP.
(isisSysInstance=[isisSysInstance], isisSysLevelIndex=[isisSysLevelIndex],
isisCircIndex=[isisCircIndex], isisCircIfIndex=[isisCircIfIndex],
isisPduLspId=[isisPduLspId], isisPduOriginatingBufferSize=[isisPduOriginatingBufferSize],
ifIndex=[ifIndex], IfName=[IfName])
日志含义
收到的LSP报文大小大于本地生成LSP缓冲区的大小。
日志参数
参数名称 参数含义
[isisSysInstance] ISIS进程号。
[isisSysLevelIndex] ISIS级别。
[isisCircIndex] IS-IS接口分配的索引。
[isisCircIfIndex] 接口索引。
[isisPduLspId] LSP ID。
[isisPduOriginatingBufferSize] LSP缓冲大小。
[ifIndex] 接口索引。
[IfName] 接口名称。
文档版本 06 (2017-09-12) 华为专有和保密信息 356
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
日志参考 38 ISIS
可能原因
源上IS-IS生成LSP的大小大于本地生成LSP的大小。
处理步骤
步骤1 通过输出信息中的isisPduLspId字段的值找到生成该LSP的源，在源上查看IS-IS生成LSP
报文大小，并与本地配置的IS-IS生成LSP的大小进行比较，如果前者大于后者。
l 如果是，请执行步骤2。
l 如果不是，请执行步骤3。
步骤2 在源的IS-IS进程下使用lsp-length originate max-size命令修改IS-IS生成LSP的大小，确
保源生成的LSP小于等于本地生成LSP的缓冲区大小。
l 如果是，请执行步骤4。
l 如果不是，请执行步骤3。
步骤3 请联系技术支持人员。
步骤4 结束。
----结束
38.34 ISIS/2/ISIS_OWN_LSP_PURGE
日志信息
ISIS/2/ISIS_OWN_LSP_PURGE: ISIS received a self-originated LSP with the age being of
0. (isisSysInstance=[isisSysInstance], isisSysLevelIndex=[isisSysLevelIndex],
isisCircIndex=[isisCircIndex], isisCircIfIndex=[isisCircIfIndex],
isisPduLspId=[isisPduLspId], isisPduRemoteRouterID=[isisPduRemoteRouterID],
ifIndex=[ifIndex], IfName=[IfName])
日志含义
IS-IS收到了一个System ID与本地相同且生存时间为0的LSP。
日志参数
参数名称 参数含义
[isisSysInstance] ISIS进程号。
[isisSysLevelIndex] ISIS级别。
[isisCircIndex] 接口索引。
[isisCircIfIndex] 接口索引。
[isisPduLspId] LSP ID。
文档版本 06 (2017-09-12) 华为专有和保密信息 357
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
日志参考 38 ISIS
参数名称 参数含义
[isisPduRemoteRouterID] 远端系统的Router ID。
[ifIndex] 接口IF索引。
[IfName] 接口名称。
可能原因
原因1：本地没有及时刷新自己的LSP，这些LSP在网络中老化后产生purge报文并且被
泛洪到本地。
原因2：因传输故障等原因导致报文被改写，并触发报文purge。
原因3：本地重启，重启后从邻居处收到System ID与本地相同且剩余时间为0的LSP。
处理步骤
步骤1 本地是否重启。
l 如果是，请执行步骤正常运行信息，无需处理=>4。
l 如果不是，请执行步骤2。
步骤2 查看网络中的，是否修改了IS-IS认证的配置，从而产生purge报文并产生该日志。
l 如果是，请执行步骤正常运行信息，无需处理=>4。
l 如果不是，请执行步骤3。
步骤3 请联系技术支持人员。
步骤4 结束。
----结束
38.35 ISIS/6/ISIS_PEER_FLAP_SUPPRESS_STATUS
日志信息
ISIS/6/ISIS_PEER_FLAP_SUPPRESS_STATUS: The status of peer flapping suppress is
changed.(isisSysInstance=[isisSysInstance], isisCircIndex=[isisCircIndex],
isisCircIfIndex=[isisCircIfIndex], ifIndex=[ifIndex], ifName=[ifName],
SuppressStatus=[SuppressStatus], Reason=[Reason])
日志含义
IS-IS邻居震荡抑制状态发生变化。
文档版本 06 (2017-09-12) 华为专有和保密信息 358
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
日志参考 38 ISIS
日志参数
参数名称 参数含义
isisSysInstance IS-IS进程号。
isisCircIndex IS-IS接口索引。
isisCircIfIndex IS-IS接口IF索引。
ifIndex 接口索引。
ifName 接口名称。
SuppressStatus 邻居震荡抑制的状态。
l None：IS-IS接口未被抑制。
l Hold-down：IS-IS接口进入Hold-down模式。
l Hold-max-cost：IS-IS接口进入Hold-max-cost模式。
Reason 状态变更原因。
l The suppression exits because the hold-max-cost timer expires.
Hold-max-cost超时退出抑制。
l The suppression exits because the hold-down timer expires.
Hold-down超时退出抑制。
l A configuration change occurs.
配置变化引起的IS-IS邻居震荡抑制状态变化。
l A manual operation is performed to exit from flapping suppression.
用户强制退出抑制状态。
l The neighbor relationship frequently flaps.
邻居频繁震荡。
l The Hold-down mode exits, and then the Hold-max-cost mode takes
effect.
Hold-down模式和Hold-max-cost模式同时配置时，Hold-down模式
退出后进入Hold-max-cost模式。
可能原因
IS-IS接口进入邻居震荡抑制阶段，或者退出邻居震荡抑制阶段。
处理步骤
步骤1 执行display isis last-peer-change [ process-id | vpn-instance vpn-instance-name ]命令查看
接口是否处于频繁震荡，与变更原因是否匹配。
l 是，则属于正常运行信息，无需处理。
文档版本 06 (2017-09-12) 华为专有和保密信息 359
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
日志参考 38 ISIS
l 否，则请执行步骤2。
步骤2 执行reset isis process-id suppress-flapping peer [ interface-type interface-number ]
[ notify-peer ]命令强制退出邻居震荡抑制阶段。
步骤3 结束。
----结束
38.36 ISIS/2/ISIS_PROTOCOLS_SUPPORT_MISMATCH
日志信息
ISIS/2/ISIS_PROTOCOLS_SUPPORT_MISMATCH: The protocol of received Protocol TLV
does not match the local configuration. (isisSysInstance=[isisSysInstance],
isisSysLevelIndex=[isisSysLevelIndex], isisCircIndex=[isisCircIndex],
isisCircIfIndex=[isisCircIfIndex], isisPduProtocolsSupported=[isisPduProtocolsSupported],
isisPduLspId=[isisPduLspId], isisPduFragment=[isisPduFragment], ifIndex=[ifIndex],
IfName=[IfName])
日志含义
收到的LSP携带协议支持TLV（type为0x81），TLV中支持的协议类型字段的值与本地
支持的协议类型值不匹配。
日志参数