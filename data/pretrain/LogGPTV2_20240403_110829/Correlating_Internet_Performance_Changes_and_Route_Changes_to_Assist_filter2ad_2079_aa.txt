title:Correlating Internet Performance Changes and Route Changes to Assist
in Trouble-Shooting from an End-User Perspective
author:Connie Logg and
Jir&apos;ı Navr&apos;atil and
Roger Les Cottrell
Correlating Internet Performance Changes and
Route Changes to Assist in Trouble-Shooting from an
End-User Perspective
Connie Logg, Jiri Navratil, and Les Cottrell
Stanford Linear Accelerator Center, 2575 Sand Hill Road, Menlo Park, CA 94025
{cal,jiri,Cottrell}@slac.stanford.edu,
the  growth  of  world  wide  data 
Abstract.1  With 
intensive  scientific
collaborations, there is a need to transfer large amounts of data to and from data
repositories around the world. To effectively enable such transfers, high speed,
predictable networks are needed. In turn, these require performance monitoring
to  ensure their quality.  One  tool/infrastructure that has  been  successfully  used
for  the  analysis  and  monitoring  of  critical  paths  is  IEPM-BW  [1].  Based  on
experience gained from the achievable throughput monitoring in IEPM-BW, we
developed  AbwE  [2],  a  tool  to  enable  quick  (<  1  second),  low  impact  (40
packets)  measurements  of  available  bandwidth.  Using  ABwE  we  have  been
able to quickly detect significant changes in available bandwidth on production
links  up  to  1Gbps,  and  report  this  information  to  the  appropriate  Network
Operations Centers (NOCs) for repair, as such changes are often associated with
route  changes.  This  paper  discusses  this  set  of  tools  and  their  effectiveness
together with examples of their utilization.
1   Introduction
With the growth of world wide data intensive scientific collaborations, there is a need
to transfer large amounts of data to and from data repositories and collaborator sites
around  the  world.  To  effectively  enable  such  transfers,  high  speed,  efficient,
predictable  networks  are  needed.  In  turn,  these  require  continual  performance
monitoring  to  ensure  optimal  network  performance  for  the  applications  to  run.  One
tool/infrastructure that has been successfully used for the analysis and monitoring of
critical paths (i.e. paths for which optimal performance is required) is IEPM-BW [1].
Based on experience gained from the achievable throughput monitoring in IEPM-BW,
we  developed  AbwE  [2],  a  tool  to  facilitate  quick  (<  1  second),  low  impact  (40
packets)  measurements  of  available  bandwidth.  Using  ABwE  we  have  been  able  to
quickly (within minutes) visually identify significant changes in available bandwidth
on  production  links  with  up  to  1Gbps  bottlenecks.  Investigating  such  changes,  in
particular degradations, we have found, not surprisingly, that many can be associated
1 This work is supported by U.S. DOE Contract No. DE-AC03-76SF00515.
C. Barakat and I. Pratt (Eds.): PAM 2004, LNCS 3015, pp. 289–297, 2004.
© Springer-Verlag Berlin Heidelberg 2004
290         C. Logg, J. Navratil, and L. Cottrell
with  route  changes.  Once  such  a  significant  performance  change  is  discovered,  the
main problem for the end-user (e.g. network administrator at an end-site) is to: gather
relevant information to identify the magnitude of the change; the time(s) it occurred;
identify the before and after routes; see if the change affects multiple paths; discover
common points of change in the paths; identify the probable relevant Internet Service
Providers; and report this information to the appropriate Network Operations Centers
(NOCs). In our experience once the above has been done, the NOCs are fairly quick in
responding with the cause of the change and often a fix. We have therefore developed
a set of tools to facilitate the above process. The tools measure traceroutes at regular
intervals, record them in an archive, and provide tools to enable simple visualization,
navigation  and  integration  with  other  tools  such  as  ABwE  and  IEPM-BW,  and  a
topology  display.    This  presentation  will  present  this  set  of  tools  and  discuss  their
effectiveness together with examples of their utilization.
2   History and Methodology
In  November  2001,  a  monitoring  host  with  a  1  GE  interface  was  set  up  at  SLAC.
Remote  hosts  (35-45)  at  collaborating  sites  around  the  world  were  chosen  as  target
hosts  for  network  performance  tests.  Accounts  with  SSH  [3]  access  were  set  up  on
these  remote  hosts  to  provide  for  communicating  with  them.  Several  tools  were
evaluated and eventually PING, IPERF[4] (TCP/UDP transfer tool), BBFTP [5] (file
transfer  tool),  BBCP  [6]  (another  file  transfer  tool),  QIPERF  [7],  and  GridFTP  [8]
were selected. Currently at regular intervals PING, TCP transfers (using IPERF), file
transfer tools BBFTP and GridFTP, and ABwE measurements are run. Note that the
ABwE  measurements  are  made  in  both  the  forward  and  reverse  directions.  In
addition, forward and reverse trace-routes are run approximately every 10-12 minutes
between SLAC and all the remote hosts. The results of these tests and the trace-routes
are  analyzed  to:  identify  unique  routes  and  assign  route  numbers  to  them  for  each
remote host; identify significant route changes; and to turn the data into more useful
formats (web browsable for users, text format to embed in email to Internet Service
Providers, log format for debugging etc.). The data is stored in a data base with the
measurement  time  and  other  test  parameters  for  access  by  Web  Services  [9],
MonALISA [10], and other visualization and analysis tools.
3   Visualization
The simplest visualization technique involves time series graphs of the ping minimum
and  average  Round  Trip  Times  (RTTs),  the  results  of  the  achievable  and  available
bandwidth test results, the file transfer throughputs, and indicators on the time series
graphs which denote when the route to or from a node has changed.  This allows for
visual correlation of significant changes in RTT, available and achievable bandwidth,
and route changes in one or both directions.  Fig. 1 is an example of this.  Fig. 1 type
Correlating Internet Performance Changes and Route Changes         291
graphs  can  be  very  dense,  however  there  are  options  available  with  them  to
individually plot the components and to vary the time scale.
As can be seen in Fig. 1, route changes frequently do not cause throughput changes,
but  throughput  changes  often  correlate  with  route  changes.  Table  1  presents  a
summary  of  visually  identifiable  route  and  throughput  changes  for  32  nodes
monitored  via  IEPM-BW  for  the  period  11/28/03  –  2/2/04.  Often  (see  Table  1)  a
change  in  throughput  is  associated  with  a  route  change.  This  suggests  that  the  first
thing to check for when evaluating throughput changes would be a route change.
Fig. 1. Time series plot with route changes indicated. The asterisks along the top axis indicate
the  forward  traceroute  changes.    The  asterisks  along  the  bottom  axis  indicate  reverse  route
changes. Note the correspondence between throughput changes and forward route changes
Table 1. Summary of Route and Throughput Changes for 11/28/03 - 2/2/04
Location
(# nodes)
# route
changes
# with
thruput
increase
# with
thruput
decrease
# thruput
changes
# thruput
change with
route
# thruput
change w/o
route
Europe(8)
370
Canada  &
U.S. (21)
1206
Japan (3)
142
2
24
2
4
25
2
10
71
9
6
49
4
4
222
5
We  also  observe,  not  unexpectedly  since  many  of  the  routes  to  remotes  hosts  share
subroutes, that a route change to one host often corresponds with changes in the routes
to  other  hosts.    A  web  accessible  route  daily  summary  page  (Fig.  2)  is  created  and
updated  throughout  the  day.  At  the  top  of  the  page  are  links  to  “Yesterday’s
Summary”, today’s “Reverse Traceroute Summary”, and the directory containing the
2 Note  that  9  of  these  throughput  changes  are  regular  variations  on  Friday  nights  due  to
regularly scheduled large data transfers on one of the target networks.
292         C. Logg, J. Navratil, and L. Cottrell
historical  traceroute  summaries.  Under  those  links  is  the  traceroute  summary  table
which  provides  “at  a  glance”  visualization  of  traceroute  change  patterns.    This
facilitates  the  observation  of  synchronized  route  changes  for  multiple  hosts  in  the
cases that a common subroute changes for some of them.
Fig. 2. Screen shot of part of a traceroute summary web page with summary table