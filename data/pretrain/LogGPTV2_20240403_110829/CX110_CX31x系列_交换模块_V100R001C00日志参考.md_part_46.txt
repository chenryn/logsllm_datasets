l 原因三：选取的远端不可达。
l 原因四：选取的远端认证失败。
l 原因五：选取的远端时钟未同步。
l 原因六：距离同步时钟最近更新的时间不在允许的范围内。
l 原因七：源时钟级别高于本地时钟级别。
l 原因八：系统同步源丢失。
l 原因九：选取的远端发生NTP样式错误。
处理步骤
步骤1 原因：配置重置系统时钟。
解决方案：用户不应当重置NTP时钟。若重置时钟，则当新时钟被选定后，NTP时钟的
状态将转变为同步状态。
步骤2 原因：选取的远端被配置删除。
解决方案：设置备用源时钟。
步骤3 原因：选取的远端不可达。
解决方案：
1. 检查时钟同步的远端的网络状态。
2. 若网络状态不可获得，则配置备用源时钟。
步骤4 原因：选取的远端认证失败。
解决方案:
文档版本 09 (2017-09-04) 华为专有和保密信息 458
版权所有 © 华为技术有限公司
CX110&CX31x系列 交换模块
日志参考 56 TM
1. 检查密钥是否配置。
2. 若未配置密钥，则配置。
3. 若密钥已配置，则检查密钥是否正确。
步骤5 原因：选取的远端时钟未同步。
解决方案：配置备用源时钟。
步骤6 原因：距离同步时钟最近更新的时间不在允许的范围内。
解决方案：配置备用时钟源。
步骤7 原因：源时钟级别高于本地时钟级别。
解决方案：配置备用源时钟的级别低于本地时钟级别。
步骤8 原因：系统同步源丢失。
解决方案：配置备用源时钟。
步骤9 原因：选取的远端发生NTP模式错误。
解决方案：配置备用源时钟。
----结束
56.9 TM/4/NTP_TIMER_INIT
日志信息
TM/4/NTP_TIMER_INIT:Failed to initialize NTP one second timer while creating the timer.
日志含义
创建1秒定时器过程中，定时器初始化失败。
日志参数
参数名称 参数含义
无 无
可能原因
l 内存分配失败
l 队列满
处理步骤
l
正常运行信息，无需处理。
----结束
文档版本 09 (2017-09-04) 华为专有和保密信息 459
版权所有 © 华为技术有限公司
CX110&CX31x系列 交换模块
日志参考 57 TRILL
57
TRILL
关于本章
57.1 TRILL/3/TRILL_ADD_NEIGHBOR_TLV_FAILURE
57.2 TRILL/5/TRILL_ADJ_CHANGE
57.3 TRILL/3/TRILL_CFG_MID_RSP_RETRANS_OVERTIME
57.4 TRILL/5/TRILL_CIRC_SUSPEND
57.5 TRILL/6/TRILL_DELAY_IIH
57.6 TRILL/6/TRILL_DISABLE_LINKSTATE_DATABASE
57.7 TRILL/6/TRILL_DISABLE_NBR_MANAGEMENT
57.8 TRILL/6/TRILL_ENABLE_LINKSTATE_DATABASE
57.9 TRILL/6/TRILL_ENABLE_NBR_MANAGEMENT
57.10 TRILL/3/TRILL_LSDB_OVERFLOW
57.11 TRILL/4/TRILL_NICKNAME_CONFLIC
57.12 TRILL/6/TRILL_RECV_ERR_MSG
57.13 TRILL/6/TRILL_RECV_ERR_PKT
文档版本 09 (2017-09-04) 华为专有和保密信息 460
版权所有 © 华为技术有限公司
CX110&CX31x系列 交换模块
日志参考 57 TRILL
57.1 TRILL/3/TRILL_ADD_NEIGHBOR_TLV_FAILURE
日志信息
TRILL/3/TRILL_ADD_NEIGHBOR_TLV_FAILURE: TRILL failed to add Level-[level]
neighbor TLV. (NeighborID=[NeighborId], InterfaceName=[InterfaceName],
MTID=[MTID])
日志含义
TRILL添加邻居TLV失败。
日志参数
参数名称 参数含义
[level] TRILL级别。
[NeighborId] 邻居ID。
[InterfaceName] 接口名称。
[MTID] 拓扑ID。
可能原因
内部错误，如申请内存失败等。
处理步骤
l 正常运行信息，无需处理。
----结束
57.2 TRILL/5/TRILL_ADJ_CHANGE
日志信息
TRILL/5/TRILL_ADJ_CHANGE: TRILL adjacency state change. (IfName=[IfName],
AdjLevel=[AdjLevel], NbrSysId=[NbrSysId], AdjState=[AdjState],
AddressFamily=[AddressFamily], Reason=[Reason])
日志含义
TRILL邻居状态发生改变。
文档版本 09 (2017-09-04) 华为专有和保密信息 461
版权所有 © 华为技术有限公司
CX110&CX31x系列 交换模块
日志参考 57 TRILL
日志参数
参数名称 参数含义
[IfName] 对应邻居的接口名称。
[AdjLevel] 发生变化的邻居级别。
[NbrSysId] 邻居的System ID。
[AdjState] 邻居发生变化之前的状态。
[AddressFamily] 邻居的地址族。
[Reason] 邻居状态发生变化的原因。
可能原因
原因1：邻居HoldTime超时。
原因2：接口Down。
原因3：协议原因。
原因4：配置变化。
原因5：对端交换机原因。
处理步骤
步骤1 从日志输出信息中找到NbrSysId字段的值（十六进制），即源交换机的System ID，查
看双方邻居状态是否与配置一致。
l 如果是，请执行步骤11。
l 如果不是，请执行步骤2。
步骤2 下载源交换机的用户日志，从日志中找到邻居状态变化的原因，查看是否是由于接口
状态Down而导致的邻居状态变化。
l 如果是，请执行步骤3。
l 如果不是，请执行步骤9。
步骤3 从日志中找到本地接口的相关信息，检查接口状态和接口MTU状态，保证两端接口的
状态和MTU状态为Up。查看双方邻居状态是否与配置一致。
l 如果是，请执行步骤12。
l 如果不是，请执行步骤4。
步骤4 检查System ID，确保两端的System ID正确。如果没有配置System ID，检查两端MAC
地址是否正确。
l 如果是，请执行步骤12。
l 如果不是，请执行步骤5。
文档版本 09 (2017-09-04) 华为专有和保密信息 462
版权所有 © 华为技术有限公司
CX110&CX31x系列 交换模块
日志参考 57 TRILL
步骤5 检查两端的Carrier VLAN是否配置正确，确保接口的Designated VLAN相同。查看双方
邻居状态是否与配置一致。
l 如果是，请执行步骤12。
l 如果不是，请执行步骤6。
步骤6 查看链路两端TRILL接口类型是否合理，需要同为P2P或Broadcast。查看双方邻居状态
是否与配置一致。
l 如果是，请执行步骤12。
l 如果不是，请执行步骤7。
步骤7 检查链路两端是否配置了认证方式，确保两端加密认证方式匹配。如果需要配置认
证，请确保认证方式和密码一致，否则应在链路两端取消认证（取消认证方式会降低
系统的安全性）。查看双方邻居状态是否与配置一致。
l 如果是，请执行步骤12。
l 如果不是，请执行步骤8。
步骤8 检查链路两端能否正常收发Hello报文，确保链路两端正常收发Hello报文。查看双方邻
居状态是否与配置一致。
l 如果是，请执行步骤12。
l 如果不是，请执行步骤9。
步骤9 使用命令display cpu查看CPU的使用率是否在一段时间内一直处于100%。
l 如果是，请执行步骤10。
l 如果不是，请执行步骤11。
步骤10 在接口视图下使用trill timer hello命令，将Hello报文的发送间隔时间设置长一些，每次
递增10s（增大发送Hello报文时间间隔会降低感知到网络故障的速度，降低了路由收敛
速度）。查看双方邻居状态是否与配置一致。
l 如果是，请执行步骤12。
l 如果不是，请执行步骤11。
步骤11 请收集告警信息、日志信息和配置信息，并联系华为技术支持工程师。
步骤12 结束。
----结束
57.3 TRILL/3/
TRILL_CFG_MID_RSP_RETRANS_OVERTIME
日志信息
TRILL/3/TRILL_CFG_MID_RSP_RETRANS_OVERTIME: The configuration command
execution times out.(Comp=[Comp], ProcessId=[ProcessId], PendEvent=[PendEvent],
PendFlag=[PendFlag], RetransNum=[RetransNum])
日志含义
组件执行配置命令超时。
文档版本 09 (2017-09-04) 华为专有和保密信息 463
版权所有 © 华为技术有限公司
CX110&CX31x系列 交换模块
日志参考 57 TRILL
日志参数
参数名称 参数含义
[Comp] 对端组件名称加组件ID。
[ProcessId] TRILL进程号。
[PendEvent] 等待完成的事件。
[PendFlag] 等待完成事件的标记位。
[RetransNum] 重传次数。
可能原因
命令行下发配置命令到组件后，组件长时间执行配置操作没有完成。
处理步骤
l 正常运行信息，无需处理。
----结束
57.4 TRILL/5/TRILL_CIRC_SUSPEND
日志信息
TRILL/5/TRILL_CIRC_SUSPEND: TRILL circ suspend. (IfName=[IfName],
IfIndex=[IfIndex], Reason=[Reason])
日志含义
使能TRILL的接口被挂起。
日志参数
参数名称 参数含义
[IfName] 接口名称。
[IfIndex] 接口索引值。
[Reason] 导致接口被挂起的原因。
可能原因
一台RB的两个或多个端口同时接入一个广播网。
文档版本 09 (2017-09-04) 华为专有和保密信息 464
版权所有 © 华为技术有限公司
CX110&CX31x系列 交换模块
日志参考 57 TRILL
处理步骤
l 正常运行信息，无需处理。
----结束
57.5 TRILL/6/TRILL_DELAY_IIH
日志信息
TRILL/6/TRILL_DELAY_IIH: TRILL delay to send IIH. (InterfaceName=[InterfaceName],
HighTime=[HighTime], LowTime=[LowTime], TotalNumber=[TotalNumber])
日志含义
TRILL延时发送IIH。
日志参数
参数名称 参数含义
[InterfaceName] TRILL接口名称。
[HighTime] 时间段高32位数据。
[LowTime] 时间段低32位数据。
[TotalNumber] 延迟发送Hello报文个数。
可能原因
产生该日志的可能原因包括：
l 系统忙，调度慢。
l Hello报文发送间隔发生变化。
处理步骤
l 记录该日志，请联系华为技术支持工程师。
----结束
57.6 TRILL/6/TRILL_DISABLE_LINKSTATE_DATABASE
日志信息
TRILL/6/TRILL_DISABLE_LINKSTATE_DATABASE: TRILL [ProcessId] disabled link
state database (ProcessId = [ProcessId])
文档版本 09 (2017-09-04) 华为专有和保密信息 465
版权所有 © 华为技术有限公司
CX110&CX31x系列 交换模块
日志参考 57 TRILL
日志含义
TRILL进程关闭数据库同步功能。
日志参数
参数名称 参数含义
[ProcessId] TRILL进程号，默认为0。
可能原因
去使能了TRILL功能。
处理步骤
l 正常运行信息，无需处理。
----结束
57.7 TRILL/6/TRILL_DISABLE_NBR_MANAGEMENT
日志信息
TRILL/6/TRILL_DISABLE_NBR_MANAGEMENT: TRILL [ProcessId] disabled neighbor
management (ProcessId = [ProcessId]).
日志含义
TRILL进程关闭邻居管理功能。
日志参数
参数名称 参数含义
[ProcessId] TRILL进程号，默认为0。
可能原因
去使能了TRILL功能。
处理步骤
l 正常运行信息，无需处理。
----结束
文档版本 09 (2017-09-04) 华为专有和保密信息 466
版权所有 © 华为技术有限公司
CX110&CX31x系列 交换模块
日志参考 57 TRILL
57.8 TRILL/6/TRILL_ENABLE_LINKSTATE_DATABASE
日志信息
TRILL/6/TRILL_ENABLE_LINKSTATE_DATABASE: TRILL [ProcessId] enabled link
state database.
日志含义
TRILL开启数据库同步功能。
日志参数
参数名称 参数含义
[ProcessId] TRILL进程号，默认为0。
可能原因
使能了TRILL功能。
处理步骤
l 正常运行信息，无需处理。
----结束
57.9 TRILL/6/TRILL_ENABLE_NBR_MANAGEMENT
日志信息
TRILL/6/TRILL_ENABLE_NBR_MANAGEMENT: TRILL [ProcessId] enabled neighbor
management.
日志含义
TRILL进程开启邻居管理功能。
日志参数
参数名称 参数含义
[ProcessId] TRILL进程号，默认为0。
可能原因
使能了TRILL功能。
文档版本 09 (2017-09-04) 华为专有和保密信息 467
版权所有 © 华为技术有限公司
CX110&CX31x系列 交换模块
日志参考 57 TRILL
处理步骤
l 正常运行信息，无需处理。
----结束
57.10 TRILL/3/TRILL_LSDB_OVERFLOW
日志信息
TRILL/3/TRILL_LSDB_OVERFLOW: TRILL [ProcessId] Level-[level] LSDB was
overflow.
日志含义
TRILL LSP数据库分片满。
日志参数
参数名称 参数含义