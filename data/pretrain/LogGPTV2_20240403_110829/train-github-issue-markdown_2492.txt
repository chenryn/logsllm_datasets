Nikomatsakis and I have agreed that it would be more effective to modify the `ty::substs` type so that the `tps` field is a map from node IDs to types, rather than the current vector of types. This change will enable type parameters to be referenced by their node IDs instead of their positional indices. One of the key benefits of this approach is that it addresses a bug in the code where class type parameters are concatenated with method type parameters, occasionally resulting in duplicate parameters. Niko mentioned that he would implement this change as part of his work on rewriting the code for self types.