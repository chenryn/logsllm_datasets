这样就建立了一道强有力的封印，可以有效的防止外族入侵。    
#### 细节请打开如下文档阅读     
[《DBA专供 冈本003系列 - 数据库安全第一,过个好年》](../201612/20161224_01.md)     
[《PostgreSQL 数据库安全指南》](../201506/20150601_01.md)     
[《PostgreSQL 数据库开发与管理规范》](../201609/20160926_01.md)    
[《PostgreSQL 数据库在上市公司重要应用中的SOX审计》](../201409/20140930_01.md)     
### DBA一族九阳神功 2 重大节假日前篇    
1\. 春节前，建议增加一次例行的巡检，就好像我们出远门检查一下车子一样。    
参考 [《PostgreSQL 数据库巡检》](https://raw.githubusercontent.com/digoal/pgsql_admin_script/master/generate_report.sh)     
2\. 对可预知的业务数据库、（当然还包括应用服务器等）进行扩容，这个是很有必要的，通常许多业务会在节假日时迎接高峰，例如游戏类业务、社交类业务、电商类业务等。    
3\. 预备一批硬件standby，以便应对春节的即时需要    
4\. 封网，停止变更，通常需要提前数天停止变更，减少因为变更带来的潜在问题。    
例如应用程序变更后，可能新增了一些SQL语句，这些SQL语句本身可能没有优化好，又或者无法预知业务对这些SQL语句的请求量并发量等，导致数据库在重大节假日存在潜在的炸弹。    
5\. 排班。安排好值日，做到7*24小时有DBA可以响应，保持手机畅通，同时确保值班的童鞋可以连接网络。    
6\. 通常值日生在节假日期间一个人要负责的业务比平时负责的业务更广泛，所以对值日生进行值班内容、业务的培训也是很有必要的。    
因此平时的DBA轮岗机制也是很重要的，要绝对避免这样的现象：一个业务只有一位DBA熟悉。    
7\. 宣导，向公司业务方敲锣打鼓的宣导，要进入封网期间了，请大家遵循封网规则，不要在封网期间做越界的事情（比如变更、发布）。    
虽然在制度上和某些IT手段上控制了封网期间的行为，但是难免有漏网之鱼，所以宣导也是很重要的。    
### DBA一族九阳神功 3 重大节假日中篇   
1\. 值班，通常分为在线和离线值班，在线和上班差不多，可能要随时关注一些NOC平台的指标，间歇性的填写一些值班报告。    
离线值班指被动的接收告警短信，邮件，发生问题时上线处理。    
2\. 交接班，交接班是非常重要的，通常上一个班的同事会发现一些异常，交代给下一位值班的同事，如果真的遇到问题响应速度和判断效率也更高。    
### DBA一族九阳神功 4 重大节假日后篇    
封网结束后，一切又回归正常了。但是有一件很重要的事情别忘记了。    
1\. 复盘    
复盘通常指对封网期间的系统状态进行回顾，要达到几个目的    
1\.1 扩容预估是否合理，同时建议反馈给业务方相应的数据    
1\.2 是否有故障，什么原因导致的，将来如何避免    
1\.3 监控系统是否存在疏漏，将来如何避免    
1\.4 是否有违规变更、发布，将来如何避免    
## 小结    
相信很多公司都有类似的制度，DBA一族加油，做到尽量的避免rm -rf事件，即使真的发生了，也可以做到心里不慌，用户不慌。    
关于《gitlab从删库到恢复》事件，就不作评论了，大家有兴趣的话，建议参考Gitlab的官方回应，以免以讹传讹。 
同时，在任何时候，建立健全的制度，都是非常重要的。操作时也务必保持清醒的头脑，尽量少犯人为的错误。    
如果有哪些写得不对或者不够完善，也感谢指出。    
#### [PostgreSQL 许愿链接](https://github.com/digoal/blog/issues/76 "269ac3d1c492e938c0191101c7238216")
您的愿望将传达给PG kernel hacker、数据库厂商等, 帮助提高数据库产品质量和功能, 说不定下一个PG版本就有您提出的功能点. 针对非常好的提议，奖励限量版PG文化衫、纪念品、贴纸、PG热门书籍等，奖品丰富，快来许愿。[开不开森](https://github.com/digoal/blog/issues/76 "269ac3d1c492e938c0191101c7238216").  
#### [9.9元购买3个月阿里云RDS PostgreSQL实例](https://www.aliyun.com/database/postgresqlactivity "57258f76c37864c6e6d23383d05714ea")
#### [PostgreSQL 解决方案集合](https://yq.aliyun.com/topic/118 "40cff096e9ed7122c512b35d8561d9c8")
#### [德哥 / digoal's github - 公益是一辈子的事.](https://github.com/digoal/blog/blob/master/README.md "22709685feb7cab07d30f30387f0a9ae")
![digoal's wechat](../pic/digoal_weixin.jpg "f7ad92eeba24523fd47a6e1a0e691b59")
#### [PolarDB 学习图谱: 训练营、培训认证、在线互动实验、解决方案、生态合作、写心得拿奖品](https://www.aliyun.com/database/openpolardb/activity "8642f60e04ed0c814bf9cb9677976bd4")
#### [购买PolarDB云服务折扣活动进行中, 55元起](https://www.aliyun.com/activity/new/polardb-yunparter?userCode=bsb3t4al "e0495c413bedacabb75ff1e880be465a")
#### [About 德哥](https://github.com/digoal/blog/blob/master/me/readme.md "a37735981e7704886ffd590565582dd0")