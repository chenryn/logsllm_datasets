[root@ikondiag ~]# ikon_eth_util --all-pass-through
Ikon Ethernet Pass Through Utility
setting portConnect_JDFE_QSFP0_10G_PORT0_JDFE_XE32_10G to 1
setting portConnect_JDFE_QSFP0_10G_PORT1_JDFE_XE33_10G to 1
setting portConnect_JDFE_QSFP0_10G_PORT2_JDFE_XE34_10G to 1
setting portConnect_JDFE_QSFP0_10G_PORT3_JDFE_XE35_10G to 1
setting portConnect_JDFE_XE24_10G_JDFE_QSFP1_10G_PORT0 to 1
setting portConnect_JDFE_XE25_10G_JDFE_QSFP1_10G_PORT1 to 1
setting portConnect_JDFE_XE26_10G_JDFE_QSFP1_10G_PORT2 to 1
setting portConnect_JDFE_XE27_10G_JDFE_QSFP1_10G_PORT3 to 1
setting portConnect_JDFE_XE28_10G_JDFE_QSFP2_10G_PORT0 to 1
setting portConnect_JDFE_XE29_10G_JDFE_QSFP2_10G_PORT1 to 1
setting portConnect_JDFE_XE30_10G_JDFE_QSFP2_10G_PORT2 to 1
setting portConnect_JDFE_XE31_10G_JDFE_QSFP2_10G_PORT3 to 1
setting portConnect_JDFE_XE36_10G_JDFE_QSFP3_10G_PORT0 to 1
setting portConnect_JDFE_XE37_10G_JDFE_QSFP3_10G_PORT1 to 1
910
setting portConnect_JDFE_XE38_10G_JDFE_QSFP3_10G_PORT2 to 1
setting portConnect_JDFE_XE39_10G_JDFE_QSFP3_10G_PORT3 to 1
running press return key to exit
6. Send traffic to xe-0/0/10:2 on the QFX5100-24Q-AA switch and receive traffic on the front panel
port 0-0 on the QFX-PFA-4Q module.
7. Send traffic to the front panel port 0-0 on the QFX-PFA-4Q module and receive traffic on
xe-0/0/10:2 on the QFX5100-24Q-AA switch.
8. Verify the statistics for the xe-0/0/10:2 and xe-0/0/32 interfaces by issuing the show interfaces
xe-0/0/10:2 extensive and show interfaces xe-0/0/32 extensive commands.
9. Verify the statistics for the JDFE_XE32_10G and JDFE_QSFP0_10G_PORT0 interfaces by issuing the
maxnet link commands at the guest VM prompt for the Packet Flow Accelerator Diagnostics software.
[root@ikondiag ~]# maxnet link show JDFE_XE32_10G
JDFE_XE32_10G:
Link Up: true
MAC address: 00:11:22:33:44:55
RX Enabled: true
RX Frames: 1 ok
0 error
0 CRC error
0 invalid/errored
1 total
TX Enabled: true
TX Frames: 0 ok
0 error
0 CRC error
0 invalid/errored
0 total
[root@ikondiag ~]# maxnet link show JDFE_QSFP0_10G_PORT0
JDFE_QSFP0_10G_PORT0:
Link Up: true
MAC address: 00:11:22:33:44:55
RX Enabled: true
RX Frames: 0 ok
0 error
0 CRC error
0 invalid/errored
0 total
911
TX Enabled: true
TX Frames: 1 ok
0 error
0 CRC error
0 invalid/errored
1 total
Uninstall the Guest VM
To remove the guest VM:
1. Delete the configuration statements and uninstall the Packet Flow Accelerator Diagnostics software
package.
For example, to remove the app-engine statement:
root # delete services app-engine
2. Commit the configuration.
root# commit
3. (Optional) Issue the show version command to learn the name of the Packet Flow Accelerator
Diagnostics software package.
{master:0}
root> show version
fpc0:
--------------------------------------------------------------------------
Hostname:
switch
Model: qfx5100-24q-
aa
Junos: 14.1X53-
D27_vjunos.62
JUNOS Base OS Software Suite [14.1X53-
D27_vjunos.62]
912
JUNOS Base OS boot [14.1X53-
D27_vjunos.62]
JUNOS Crypto Software Suite [14.1X53-
D27_vjunos.62]
JUNOS Online Documentation [14.1X53-
D27_vjunos.62]
JUNOS Kernel Software Suite [14.1X53-
D27_vjunos.62]
JUNOS Packet Forwarding Engine Support (qfx-ex-x86-32) [14.1X53-
D26_vjunos.62]
JUNOS Routing Software Suite [14.1X53-
D27_vjunos.62]
JUNOS Enterprise Software Suite [14.1X53-
D27_vjunos.62]
JUNOS py-base-i386 [14.1X53-
D27_vjunos.62]
JUNOS py-extensions-i386 [14.1X53-
D27_vjunos.62]
JUNOS Host Software [14.1X53-
D27_vjunos.62]
Junos for Automation
Enhancement
JUNOS GUEST-VM Software [pfadiag_vm-rXXXXX-
ve]
{master:0}
913
4. Issue the request system software delete virtual-machine-package  command to uninstall the
Packet Flow Accelerator Diagnostics software.
root> request system software delete virtual-machine-package pfadiag_vm-rXXXXX-ve
fpc0:
--------------------------------------------------------------------------
Deleted virtual-machine package dpfadiag_vm-rXXXXX-ve ...
7
PART
Monitoring Common Security
Features
Display Real-Time Information from Device to Host | 915
Monitor Security Policies | 922
Monitor Interfaces and Switching Functions | 923
915
Display Real-Time Information from Device to Host
SUMMARY IN THIS SECTION
This section describes how to display real-time Display Real-Time Monitoring
monitoring information about each device between Information | 915
the device and a destination host.
Display Multicast Path Information | 918
Display Real-Time Monitoring Information
To display real-time monitoring information about each device between the device and a specified
destination host, enter the traceroute monitor command with the following syntax:
user@host> traceroute monitor host    
Table 102 on page 915 describes the traceroute monitor command options.
Table 102: CLI traceroute monitor Command Options
Option Description
host Sends traceroute packets to the hostname or IP address you specify.
count number (Optional) Limits the number of ping requests, in packets, to send in summary mode. If
you do not specify a count, ping requests are continuously sent until you press Q.
inet (Optional) Forces the traceroute packets to an IPv4 destination.
inet6 (Optional) Forces the traceroute packets to an IPv6 destination.
916
Table 102: CLI traceroute monitor Command Options (Continued)
Option Description
interval seconds (Optional) Sets the interval between ping requests, in seconds. The default value is 1
second.
no-resolve (Optional) Suppresses the display of the hostnames of the hops along the path.
size bytes (Optional) Sets the size of the ping request packet. The size can be from 0 through 65,468
bytes. The default packet size is 64 bytes.
source address (Optional) Uses the source address that you specify, in the traceroute packet.
summary (Optional) Displays the summary traceroute information.
To quit the traceroute monitor command, press Q.
The following is sample output from a traceroute monitor command:
user@host> traceroute monitor host2
My traceroute [v0.69]
host (0.0.0.0)(tos=0x0 psize=64
bitpattern=0x00) Wed Mar 14 23:14:11
2007
Keys: Help Display mode Restart statistics Order of fields quit
Packets Pings
Host Loss
% Snt Last Avg Best Wrst StDev
1. 173.24.232.66
0.0% 5 9.4 8.6 4.8 9.9 2.1
2. 173.24.232.66
0.0% 5 7.9 17.2 7.9 29.4 11.0
3. 173.24.232.66
0.0% 5 9.9 9.3 8.7 9.9 0.5
917
4. 173.24.232.66
0.0% 5 9.9 9.8 9.5 10.0 0.2
Table 103 on page 917 summarizes the output fields of the display.
Table 103: CLI traceroute monitor Command Output Summary
Field Description
host Hostname or IP address of the device issuing the traceroute monitor command.
psizesize Size of ping request packet, in bytes.
Keys
Help Displays the Help for the CLI commands.
Press H to display the Help.
Display mode Toggles the display mode.
Press D to toggle the display mode
Restart statistics Restarts the traceroute monitor command.
Press R to restart the traceroute monitor command.
Order of fields Sets the order of the displayed fields.
Press O to set the order of the displayed fields.
quit Quits the traceroute monitor command.
Press Q to quit the traceroute monitor command.
Packets
number Number of the hop (device) along the route to the final destination host.
Host Hostname or IP address of the device at each hop.
918
Table 103: CLI traceroute monitor Command Output Summary (Continued)
Field Description
Loss% Percent of packet loss. The number of ping responses divided by the number of
ping requests, specified as a percentage.
Pings
Snt Number of ping requests sent to the device at this hop.
Last Most recent round-trip time, in milliseconds, to the device at this hop.
Avg Average round-trip time, in milliseconds, to the device at this hop.
Best Shortest round-trip time, in milliseconds, to the device at this hop.
Wrst Longest round-trip time, in milliseconds, to the device at this hop.
StDev Standard deviation of round-trip times, in milliseconds, to the device at this
hop.
Display Multicast Path Information
To display information about a multicast path from a source to the device, enter the mtrace from-source
command with the following syntax:
user@host> mtrace from-source source host   
Table 104 on page 919 describes the mtrace from-source command options.
919
Table 104: CLI mtrace from-source Command Options
Option Description
source host Traces the path to the specified hostname or IP address.
extra-hops number (Optional) Sets the number of extra hops to trace past nonresponsive devices.
Specify a value from 0 through 255.
group address (Optional) Traces the path for the specified group address. The default value is
192.0.2.0.
interval seconds (Optional) Sets the interval between statistics gathering. The default value is 10.
max-hops number (Optional) Sets the maximum number of hops to trace toward the source. Specify a
value from 0 through 255. The default value is 32.
max-queries number (Optional) Sets the maximum number of query attempts for any hop. Specify a value
from 1 through 32. The default value is 3.
response host (Optional) Sends the response packets to the specified hostname or IP address. By
default, the response packets are sent to the device.
routing-instance routing- (Optional) Traces the routing instance you specify.
instance-name
ttl number (Optional) Sets the time-to-live (TTL) value in the IP header of the query packets.
Specify a hop count from 0 through 255. The default value for local queries to the all
routers multicast group is 1. Otherwise, the default value is 127.
wait-time seconds (Optional) Sets the time to wait for a response packet. The default value is 3
seconds.
loop (Optional) Loops indefinitely, displaying rate and loss statistics. To quit the mtrace
command, press Ctrl-C.
920
Table 104: CLI mtrace from-source Command Options (Continued)
Option Description
multicast-response (Optional) Forces the responses to use multicast.
unicast-response (Optional) Forces the response packets to use unicast.
no-resolve (Optional) Does not display hostnames.
no-router-alert (Optional) Does not use the device alert IP option in the IP header.
brief (Optional) Does not display packet rates and losses.
detail (Optional) Displays packet rates and losses if a group address is specified.
The following is sample output from the mtrace from-source command:
user@host> mtrace from-source source 192.1.4.1 group 224.1.1.1
Mtrace from 192.1.4.1 to 192.1.30.2 via group 224.1.1.1 Querying full reverse path... * *
0 ? (192.1.30.2) -1 ? (192.1.30.1) PIM thresh^ 1 -2 routerC.mycompany.net (192.1.40.2)
PIM thresh^ 1 -3 hostA.mycompany.net (192.1.4.1) Round trip time 22 ms; total ttl of 2
required. Waiting to accumulate statistics...Results after 10 seconds: Source
Response Dest Overall Packet Statistics For Traffic From 192.1.4.1 192.1.30.2
Packet 192.1.4.1 To 224.1.1.1 v __/ rtt 16 ms Rate Lost/Sent = Pct
Rate 192.168.195.37 192.1.40.2 routerC.mycompany.net v ^ ttl
2 0/0 = -- 0 pps 192.1.40.1 192.1.30.1 ?
v \__ ttl 3 ?/0 0 pps 192.1.30.2 192.1.30.2
Receiver Query Source
Each line of the trace display is usually in the following format (depending on the options selected and
the responses from the devices along the path):
hop-number host (ip-address) protocolttl
921
Table 105 on page 921 summarizes the output fields of the display.
NOTE: The packet statistics gathered from Juniper Networks devices and routing nodes always
display as 0.
Table 105: CLI mtrace from-source Command Output Summary
Field Description
hop-number Number of the hop (device) along the path.
host Hostname, if available, or IP address of the device. If the no-resolve option was
entered in the command, the hostname is not displayed.
ip-address IP address of the device.
protocol Protocol used.
ttl TTL threshold.
Round trip time milliseconds ms Total time between the sending of the query packet and the receiving of the
response packet.
total ttl of number required Total number of hops required to reach the source.
Source Source IP address of the response packet.
Response Dest Response destination IP address.
Overall Average packet rate for all traffic at each hop.
Packet Statistics For Traffic Number of packets lost, number of packets sent, percentage of packets lost,
and average packet rate at each hop.
From
922
Table 105: CLI mtrace from-source Command Output Summary (Continued)
Field Description
Receiver IP address receiving the multicast packets.
Query Source IP address of the host sending the query packets.
Monitor Security Policies
SUMMARY IN THIS SECTION
This section describes monitoring security policies Monitor Security Policy Statistics | 922
and recording the permitted or denied traffic.
Monitor Security Policy Statistics
IN THIS SECTION
Purpose | 922
Action | 922
Purpose
Monitor and record traffic that Junos OS permits or denies based on previously configured policies.
Action
To monitor traffic, enable the count and log options.
923
Count—Configurable in an individual policy. If count is enabled, statistics are collected for sessions that
enter the device for a given policy, and for the number of packets and bytes that pass through the
device in both directions for a given policy. For counts (only for packets and bytes), you can specify that
alarms be generated whenever the traffic exceeds specified thresholds. See count (Security Policies).
Log—Logging capability can be enabled with security policies during session initialization (session-init) or
session close (session-close) stage. See log (Security Policies).
• To view logs from denied connections, enable log on session-init.
• To log sessions after their conclusion/tear-down, enable log on session-close.
NOTE: Session log is enabled at real time in the flow code which impacts the user performance.
If both session-close and session-init are enabled, performance is further degraded as compared
to enabling session-init only.
For details about information collected for session logs, see Information Provided in Session Log Entries
for SRX Series Services Gateways.
Monitor Interfaces and Switching Functions
SUMMARY IN THIS SECTION
This section describes how to monitor interfaces and Display Real-Time Interface
switching functions. Information | 924
Monitor Interfaces | 927
Monitor PPP | 928
924
Display Real-Time Interface Information
Enter the monitor interface command to display real-time traffic, error, alarm, and filter statistics about a
physical or logical interface:
user@host> monitor interface (interface-name | traffic)
Replace interface-name with the name of a physical or logical interface. If you specify the traffic option,
statistics for all active interfaces display.
The real-time statistics update every second. The Current delta and Delta columns display the amount the
statistics counters have changed since the monitor interface command was entered or since you cleared
the delta counters. Table 106 on page 924 and Table 107 on page 925 list the keys you use to control
the display using the interface-name and traffic options. (The keys are not case sensitive.)
Table 106: CLI monitor interface Output Control Keys
Key Action
c Clears (returns to 0) the delta counters in the Current delta column. The statistics counters
are not cleared.
f Freezes the display, halting the update of the statistics and delta counters.
i Displays information about a different interface. You are prompted for the name of a
specific interface.
n Displays information about the next interface. The device scrolls through the physical and
logical interfaces in the same order in which they are displayed by the show interfaces
terse command.
q or ESC Quits the command and returns to the command prompt.
t Thaws the display, resuming the update of the statistics and delta counters.
925
Table 107: CLI monitor interface traffic Output Control Keys
Key Action
b Displays the statistics in units of bytes and bytes per second (bps).
c Clears (returns to 0) the delta counters in the Delta column. The statistics counters are not
cleared.
d Displays the Delta column instead of the rate column—in bps or packets per second (pps).
p Displays the statistics in units of packets and packets per second (pps).
q or ESC Quits the command and returns to the command prompt.
r Displays the rate column—in bps and pps—instead of the Delta column.
The following are sample displays from the monitor interface command:
user@host> monitor interface fe-0/0/0
host1 Seconds: 5 Time: 04:38:40
Delay: 3/0/10
Interface: fe-0/0/0, Enabled, Link is Up
Encapsulation: Ethernet, Speed: 1000mbps
Traffic statistics: Current delta
Input bytes: 885405423 (3248 bps) [2631]
Output bytes: 137411893 (3344 bps) [10243]
Input packets: 7155064 (2 pps) [28]
Output packets: 636071 (1 pps) [23]
Error statistics:
Input errors: 0 [0]