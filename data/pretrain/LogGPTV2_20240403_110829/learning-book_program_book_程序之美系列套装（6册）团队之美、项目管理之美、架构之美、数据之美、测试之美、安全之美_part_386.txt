可信任的认证机构颁发的，另外你所访问的网站和证书不符。
现在你可以选择关闭这个页面或者继续浏览下去。稍做考虑，你想
可能是自已访问错了，所以选择关闭该页面。然后你打开了一个新
的浏览器窗口又试了一次，结果弹出了同样的错误。此时你可能意
识到页面是正确无误的，但确实又有什么地方出了问题。你可能会
想这也许和你在机场所用的服务提供商有关，所以选择继续浏览下
去。页面出来了，而且看起来很正常，没有什么问题，所以你就登
录进去并查看电子邮件。接着你又浏览了儿个小时，中间除了又跳
出来儿次同样的错误消息之外，其他一切看起来都正常。
最后你的飞机来了，收拾好笔记本，把电源插座留给附近其他正在
耐心等待的“欠居人”，然后到达了最终目的地。
几周过去，你回到了家里，然后去支付账单。当你打并信用卡账单
时，大吃一惊，先前信用卡里面还有好几百美元，现在已经被刷爆
了。想了一下，然后你去问你的妻子是否去疯狂购物了。让你感到
放心的是，她确实没有去，但这些消费账单依旧还在。当然，你已
经完全忘记了，在从机场返回的那一大，你选择了一个廉价的无线
接入公司，并向其提供了信用卡信息。遗憾的是，原来这个便宜的
无线接人公司的确是一个身份窃贼（identitythief）。
2.1.1设置攻击
在工作之余，有人雇我去布置安全陷阱以用于测试。我已经在整个
美国多次实施了这种特别的攻击。每一次我都能收集到信用卡信
息。虽然骗局看似复杂，但让人如此担忧的情况却可以很容易的实
施。
2226
---
## Page 2228
在我去布置攻击的场地之前，我会先制作像WiFly这样的一个虚构的
公司登录页面，这个页面看上去很可信，而且外观绝对专业。它还
提供了一个用于填写信用卡信息的表单。
到了场地之后，我打开一个普通的笔记本电脑并购买了该地提供的
真正的互联网接入服务。如果是在没有互联网提供商的地方，我就
会用我的手机来进行连接。即使网络速度会很慢，但这没有关系，
因为当受害者在使用接入服务时，就已经被骗了。
接着，我给笔记本安装上一个无线路由设备。根据地方的大小，我
会设置比较大的大线来覆盖尽可能厂的范围。
最后，我运行我写的一个程序，截获从不知情的受害者电脑上发送
到无线路由设备、再发送到我的电脑上的数据包，然后再把这些数
据发送到真正的我所购买的互联网上。万事俱备，此时，我就像是
一只等待苍蝇的蜘蛛。
最终，受害者出现。他们选择了低价的无线接入点，点击了之前设
计的网页，并提交了他们的信用卡信息，至此，他们就成了另一个
身份窃贼的囊中之物了。
2227
---
## Page 2229
2.1.2隐私的聚宝盆
很明显，获取信用卡信息对身份窃贼来说是有用的，但是这类攻击
还有更多的用途。
还记得浏览器弹出的关于证书的安全警告吗？之所以出现警告是因
为那些加密的网络数据并不是在用户认为的最终目的地进行解密
的，而是在我的笔记本上进行解密的。换句话说，使用安全的、加
密的连接是因为这种操作确实需要，只是用了我的证书来进行加
密，当然我可以轻易地解密了。类似于中间人攻击，我能够对用户
的数据进行解密，记录下任何数据，然后再重新加密并传送给最终
目的地。我可以记录用户名、密码、电子邮件信息以及其他的可能
敏感信息，而受害者却认为这些信息会安全地发送给可信的最终接
收方。
即使是一小部分个人网络数据都可能会导致一次危害巨大的身份攻
击。举个例子，比如我只得到了你的电子邮件账号，现在我就能够
浏览所有你接收到的电子邮件信息。想想那些所有通过电子邮件来
获得的令人疯狂的信息吧。
如果你不用基于web的电子邮件服务，那么你可能会认为在你的电
子邮件账号和网页账号之间存在一个安全的屏障。但是，大多数网
站都提供了“忘记密码"的选项。只需要提供你的email地址，他们就
会把密码发给你。通过在一个人的足够长的邮件信息中查找泄露秘
密的字符串，通常能够得到任何东西的用户名和密码，包括网银账
号。
一个高水平的身份窃贼明白通向王国之路有很多。有时需要从几个
不同的源来收集数据。像解决一个谜语一样，你得到的每一份数据
都能够用来获取另一份数据。在某些测试中，我也会布置一个什么
页面也没有的无线接入点。此时，我暂时放弃了噢探用户的信用卡
信息的机会，但却吸引了更多的用户，他们认为这个接入点更加安
全，因为他们不需要提供诸如信用卡信息之类的敏感信息。这种测
试的唯一目的就是记录下都有哪些数据流过。几个小时里我就记录
到了从用户名和密码到在线购物信息，如姓名、地址和信用卡信息
等。
2228
---
## Page 2230
通常，住在公寓里的人都希望不用自己购买互联网接入服务就能访
问网络，这时他们就会连接到发现的开放的无线接入设备，而且认
为这可能是邻居的接入点。他们认为这是免费的午餐，实际上他们
每天都被身份窃贼所欺骗，身份窃贼布设这些接入点的目的就是为
了欺骗别人。
正因为无线接入点如此普遍并且已成为日常景观的一部分，所以大
多数人都没有想这些无线接入点从哪来。在购物商场里，你会相当
肯定地认为从一家珠宝店里买的一块看起来不错的手表是没有问
题。但是，如果你正在街上开看车，看到一个在他的车外叫卖手表
的人，你可能就不会做出同样的判断了。这很容易看出两者之间的
区别，知道什么看起来安全，哪些又看起来像一个陷阱。但是对于
无线网络，你根本不知道是谁在提供。即使名称叫做T-Mobile而且
登录页面也很像真的T-Mobile登录页面，但你又怎样知道这个特殊
的页面真的是由T-Mobile运营的呢？任何能够部署无线接入点的人
都可以随意设置访问页面。
2.1.3Web安全的基本缺陷：不要相信可信系统
我的攻击之所以能成功的主要原因之一在于用户和服务器对安全证
书的处理都存在问题。大多数人在浏览互联网时都不太在意安全警
告。这主要有两个原因。
一方面，一些人根本不明白这些警告的意思。我想用我父母的例子
来说明。他们和世界上其他到达退休年龄的老年人一样，他们是聪
明的人，非常乐于接受互联网这一新鲜事物。但是，他们从没有接
受过关于互联网及其风险的专业训练，也没有在有专门的工程师负
责教会员工的公司里工作。他们只是自已体验整个互联网，也只有
一般的能够应付在线支付和查看股票证券信息的知识。类似于数字
证书这样的东西对他们来讲就像是质子加速器对他们的意义一样。
另一方面，我发现也有一些精通技术的人不但懂得数字证书，还了
解中间人攻击。有人认为这类人从不会中这样的陷阱，但恰恰相
反，即使是这些人也很容易上当受骗而成为受害者。与我什么都不
懂的父母所不同的是，这些专家受骗的原因是他们太了解这些知识
了，以至于能够为自己失误做出合理的解释。
例如，当安全警告跳出来时，他们首先认为是这因为WiFly网站的管
理员没有更新已过期的证书而导致的。或者他们认为由于这个网站
2229
---
## Page 2231
是由咖啡馆或宾馆提供的，而配置这个网站的人没有经过良好的技
术训练，所以没有正确地配置网站的证书。除此之外，在企业内网
中你也会经常碰到证书过期的情况，而这时公司的信息技术人员会
告诉员工只要忽略安全警告，然后继续使用网站就可以了。这类事
件让普通用户认为证书是不重要的，而那些明百证书重要性的高级
用户则对他们没有关注的地方一点都不敏感。
在完成攻击之后，我和受害者交谈时，受害者对他们的行为的普遍
答案都是根本就没有关注所有弹出来的安全警告。他们大多数似乎
都是被操作系统搞烦了，因为有些操作系统每大都会给你提示许多
的安全警告（最糟的是微软的Vista操作系统），这使得安全警告变
成了白色噪音。
2.1.4建立无线信任
尽管使用无线接入存在风险，但它们显然又是非常方便的，而且我
也不建议所有人都停止使用它们。人们需要的是在不降低使用频率
的前提下，找出减少风险的方法。
用户进行自我防范的最有效的办法是多注意安全警告。如果你在使
用无线接入服务的时候，收到了关于安全证书存在问题的警告，那
么你需要立即停止操作。虽然这也有可能是因为某些网站管理员的
操作错误或者是没有更新证书所导致的，但继续操作下去的风险仍
然非常大。
当然，这也是要求企业对证书进行良好管理的理由之一。数字证书
是企业能够让最终用户对网站的安全持有信心的少数保障之一。如
果连证书都没有维护好，那么很容易导致别人对其他方面的安全产
生怀疑。
如果某个要求输入信用卡账号，此时你可以采用一种比较简单的方
法来验证这个网站合法性，即提交一个假的信用卡账号。如果这个
网站是合法的，那么它会检查信用卡账号并且告诉你交易失败。如
果是一个恶意的网站，那么它不会作检查，无论你输入什么它都接
受。这种方法并不保证一定有效，但有总比没有好。
最后一个建议是尽量不要使用公用的接入点来进行个人交易。咖啡
馆也许并不是最好的登录并检查你的银行账号收支的场所。在机场
登录并进行股票交易可能会受到一些不好的影响。作为一个经常出
2230
---
## Page 2232
差的旅行者，我自己也知道有些时候你别无选择，并且可能也摆脱
不了使用你所找到的无线接入服务来传输个人信息的情形。如果发
生这种情况，而且也稍微注意到你输入了敏感的信息，那么一旦你
回到了一个可信的地方，就要立即修改刚才使用无线接入服务时的
登录账号。当然，这也不是说你已经是一名受害者了，但这么做没
有什么坏处。
2.1.5采用可靠的解决方案
虽然时刻注意你的个人信息安全确实可以起到一定的作用，但却不
能真正消除这类攻击所带来的危险。为实现这一目标，业界需要解
决信任关系。当我打开无线接入软件并搜索可用的无线接入点时，
我需要确信一个叫做"T-Mobile"的无线路由确实是属于T-Mobile公司
的。
要做到这一点，接入点和客户端之间必须能够交换可以对两者进行
鉴别的核查信息。虽然在不同的系统中协调实现这种相互信任比较
困难，但这种技术本身确实非常容易，而且已经出现很多年了。用
于网站的证书技术同样也可以用于无线接入设备。
这种解决方案的工作流程大致是这样的。用户首先打开无线客户端
并收到了一份可用的无线接入点列表。然后客户端会检查对应于每
台设备的数字证书。每个证书都包含显示出来的名字、公司名称、
硬件标识符以及签发证书的认证机构。由于是无线客户端列出这些
设备的，所以能够指明他们是否合法（见图2-1）。
有许多建立认证中心（CertificateAuthority）的方法，我所想象的最
容易的办法是采用和Web认证相同的认证机制。使用一套已经建立
起来的机制会让这个特殊领域的开发变得更加容易，而且利用已经
部署的基础设施可减少大量的重复开发。
2231
---
## Page 2233
图2-1假设经过认证的无线路由
我也意识到有些恶意的无线路由可能会使用伪造的证书，而且一些
用户可能从未注意到合法的和非法的接入点之间的区别。但是当对
人们进行这种解决方案的培训越来越多以及客户端软件会尽可能正
确地指引人们时，这类攻击的风险性将大为降低。
2.2无线也疯狂
在描绘了前沿的无线攻击技术以及如何进行相应的防范之后，我们