introduced to indicate that the PICs (I/O card or SPC) have failed to come online during system start
time.
Starting in Junos OS Releases 12.3X48-D85, 15.1X49-D180, and 19.2R1, a system alarm is triggered
when the Network Security Process (NSD) is unable to restart due to the failure of one or more NSD
subcomponents. The alarm logs about the NSD are saved in the messages log. The alarm is automatically
cleared when NSD restarts successfully. The show chassis alarms and show system alarms commands are
updated to display the following output when NSD is unable to restart - NSD fails to restart because
subcomponents fail.
NOTE: Run the following commands when the CLI prompt indicates that an alarm has been
raised:
• show system alarms
• show chassis alarms
• show chassis fpc pic-status
For more information about the CLI commands, see show system alarms, show chassis alarms, and show
chassis fpc.
Alarm Severity
Alarms have two severity levels:
• Major (red)—Indicates a critical situation on the device that has resulted from one of the following
conditions. A red alarm condition requires immediate action.
• One or more hardware components have failed.
• One or more hardware components have exceeded temperature thresholds.
• An alarm condition configured on an interface has triggered a critical warning.
• Minor (yellow)—Indicates a noncritical condition on the device that, if left unchecked, might cause an
interruption in service or degradation in performance. A yellow alarm condition requires monitoring
or maintenance.
A missing rescue configuration or software license generates a yellow system alarm.
801
Alarm Conditions
To enable alarms on a device interface, you must select an alarm condition and an alarm severity. In
contrast, alarm conditions and severity are preconfigured for chassis alarms and system alarms.
NOTE: For information about chassis alarms for your device, see the Hardware Guide for your
device.
This section contains the following topics:
Interface Alarm Conditions
Table 78 on page 801 lists the interface conditions, sorted by interface type, that you can configure for
an alarm. You can configure each alarm condition to trigger either a major (red) alarm or minor a (yellow)
alarm. The corresponding configuration option is included.
For the services stateful firewall filters (NAT, IDP, and IPsec), which operate on an internal adaptive
services module within a device, you can configure alarm conditions on the integrated services and
services interfaces.
Table 78: Interface Alarm Conditions
Interface Alarm Condition Description Configuration
Option
DS1 (T1) Alarm indication signal (AIS) The normal T1 traffic signal contained a ais
defect condition and has been replaced by
the AIS. A transmission interruption occurred
at the remote endpoint or upstream of the
remote endpoint. This all-ones signal is
transmitted to prevent consequential
downstream failures or alarms.
Yellow alarm The remote endpoint is in yellow alarm ylw
failure. This condition is also known as a far-
end alarm failure.
Ethernet Link is down The physical link is unavailable. link-down
802
Table 78: Interface Alarm Conditions (Continued)
Interface Alarm Condition Description Configuration
Option
Integrated Hardware or software failure On the adaptive services module, either the failure
services hardware associated with the module or the
software that drives the module has failed.
Serial Clear-to-send (CTS) signal The remote endpoint of the serial link is not cts-absent
absent transmitting a CTS signal. The CTS signal
must be present before data can be
transmitted across a serial link.
Data carrier detect (DCD) The remote endpoint of the serial link is not dcd-absent
signal absent transmitting a DCD signal. Because the DCD
signal transmits the state of the device, no
signal probably indicates that the remote
endpoint of the serial link is unavailable.
Data set ready (DSR) signal The remote endpoint of the serial link is not dsr-absent
absent transmitting a DSR signal. The DSR signal
indicates that the remote endpoint is ready
to receive and transmit data across the serial
link.
Loss of receive clock The clock signal from the remote endpoint is loss-of-rx-clock
not present. Serial connections require clock
signals to be transmitted from one endpoint
and received by the other endpoint of the
link.
Loss of transmit clock The local clock signal is not present. Serial loss-of-tx-clock
connections require clock signals to be
transmitted from one endpoint and received
by the other endpoint of the link.
Services Services module hardware A hardware problem has occurred on the hw-down
down device's services module. This error typically
means that one or more of the CPUs on the
module has failed.
803
Table 78: Interface Alarm Conditions (Continued)
Interface Alarm Condition Description Configuration
Option
Services link down The link between the device and its services linkdown
module is unavailable.
Services module held in The device's services module is stuck in reset pic-hold-reset
reset mode. If the services module fails to start up
five or more times in a row, the services
module is held in reset mode. Startup fails
when the amount of time from CPU release
to CPU halt is less than 300 seconds.
Services module reset The device's services module is resetting. pic-reset
The module resets after it crashes or is reset
from the CLI, or when it takes longer than
60 seconds to start up.
Services module software A software problem has occurred on the sw-down
down device's services module.
E3 Alarm indication signal (AIS) The normal E3 traffic signal contained a ais
defect condition and has been replaced by
the AIS. A transmission interruption occurred
at the remote endpoint or upstream of the
remote endpoint. This all-ones signal is
transmitted to prevent consequential
downstream failures or alarms.
Loss of signal (LOS) No remote E3 signal is being received at the los
E3 interface.
Out of frame (OOF) An OOF condition has existed for oof
10 seconds. This alarm applies only to E3
interfaces configured in frame mode. The
OOF failure is cleared when no OOF or LOS
defects have occurred for 20 seconds.
804
Table 78: Interface Alarm Conditions (Continued)
Interface Alarm Condition Description Configuration
Option
Remote defect indication An AIS, LOS, or OOF condition exists. This rdi
alarm applies only to E3 interfaces
configured in frame mode.
T3 (DS3) Alarm indication signal The normal T3 traffic signal contained a ais
defect condition and has been replaced by
the AIS. A transmission interruption occurred
at the remote endpoint or upstream of the
remote endpoint. This all-ones signal is
transmitted to prevent consequential
downstream failures or alarms.
Excessive number of zeros The bit stream received from the upstream exz
host has more consecutive zeros than are
allowed in a T3 frame.
Far-end receive failure The remote endpoint of the connection has ferf
(FERF) failed. A FERF differs from a yellow alarm,
because the failure can be any failure, not
just an OOF or LOS failure.
Idle alarm The Idle signal is being received from the idle
remote endpoint.
Line code violation Either the line encoding along the T3 link is lcv
corrupted or a mismatch between the
encoding at the local and remote endpoints
of a T3 connection occurred.
Loss of frame (LOF) An OOF or loss-of-signal LOS condition has lof
existed for 10 seconds. The LOF failure is
cleared when no OOF or LOS defects have
occurred for 20 seconds. A LOF failure is
also called a red failure.
805
Table 78: Interface Alarm Conditions (Continued)
Interface Alarm Condition Description Configuration
Option
Loss of signal (LOS) No remote T3 signal is being received at the los
T3 interface.
Phase-locked loop out of The clocking signals for the local and remote pll
lock endpoints no longer operate in lock-step.
Yellow alarm The remote endpoint is in yellow alarm ylw
failure. This condition is also known as a far-
end alarm failure.
System Alarm Conditions
Table 79 on page 805 lists the two preset system alarms, the condition that triggers each alarm, and
the action you take to correct the condition.
Table 79: System Alarm Conditions and Corrective Actions
Alarm Type Alarm Condition Corrective Action
Configuration The rescue configuration is not set. Set the rescue configuration.
License You have configured at least one Install a valid license key.
software feature that requires a feature
license, but no valid license for the
feature is currently installed.
NOTE: This alarm indicates that you
are in violation of the software license
agreement. You must install a valid
license key to be in compliance with all
agreements.
806
Release History Table
Release Description
15.1X49-D60 Starting with Junos OS Release 15.1X49-D60 and Junos OS Release 17.3R1, a new system alarm
is introduced to indicate that the PICs (I/O card or SPC) have failed to come online during system
start time.
12.3X48-D85 Starting in Junos OS Releases 12.3X48-D85, 15.1X49-D180, and 19.2R1, a system alarm is
15.1X49-D180 triggered when the Network Security Process (NSD) is unable to restart due to the failure of one
19.2R1 or more NSD subcomponents. The alarm logs about the NSD are saved in the messages log. The
alarm is automatically cleared when NSD restarts successfully. The show chassis alarms and show
system alarms commands are updated to display the following output when NSD is unable to
restart - NSD fails to restart because subcomponents fail.
Example: Configure Interface Alarms
IN THIS SECTION
Requirements | 806
Overview | 807
Configuration | 807
Verification | 810
This example shows how to configure interface alarms.
Requirements
Before you begin:
• Establish basic connectivity.
• Configure network interfaces. See Interfaces User Guide for Security Devices.
• Select the network interface on which to apply an alarm and the condition you want to trigger the
alarm.
807
Overview
In this example, you enable interface alarms by explicitly setting alarm conditions. You configure the
system to generate a red interface alarm when a yellow alarm is detected on a DS1 link. You configure
the system to generate a red interface alarm when a link-down failure is detected on an Ethernet link.
For a serial link, you set cts-absent and dcd-absent to yellow to signify either the CST or the DCD signal
is not detected. You set loss-of-rx-clock and loss-of-tx-clock to red alarm to signify either the receiver
clock signal or the transmission clock signal is not detected.
For a T3 link, you set the interface alarm to red when the remote endpoint is experiencing a failure. You
set exz to yellow alarm when the upstream bit has more consecutive zeros than are permitted in a T3
interface. You then set a red alarm when there is loss-of-signal on the interface.
Finally, you configure the system to display active system alarms whenever a user with the login class
admin logs in to the device.
Configuration
IN THIS SECTION
Procedure | 807
Procedure
CLI Quick Configuration
To quickly configure this example, copy the following commands, paste them into a text file, remove any
line breaks, change any details necessary to match your network configuration, copy and paste the
commands into the CLI at the [edit] hierarchy level, and then enter commit from configuration mode.
set chassis alarm ds1 ylw red
set chassis alarm ethernet link-down red
set chassis alarm serial cts-absent yellow dcd-absent yellow
set chassis alarm serial loss-of-rx-clock red loss-of-tx-clock red
set chassis alarm t3 ylw red exz yellow los red
set system login class admin login-alarms
808
Step-by-Step Procedure
The following example requires you to navigate various levels in the configuration hierarchy. For
instructions on how to do that, see Using the CLI Editor in Configuration Mode in the Junos OS CLI User
Guide .
To configure interface alarms:
1. Configure an alarm.
[edit]
user@host# edit chassis alarm
2. Specify the interface alarms on a DS1 and an Ethernet link.
[edit chassis alarm]
user@host# set ds1 ylw red
user@host# set ethernet link–down red
3. Specify the interface alarms on a serial link.
[edit chassis alarm]
user@host# set serial cts-absent yellow
user@host# set serial dcd-absent yellow
user@host# set serial loss-of-rx-clock red
user@host# set serial loss-of-tx-clock red
4. Specify the interface alarms on a T3 link.
[edit chassis alarm]
user@host# set t3 ylw red
user@host# set t3 exz yellow
user@host# set t3 los red
809
5. Configure the system to display active system alarms.
[edit]
user@host# edit system login
user@host# set class admin login-alarms
Results
From configuration mode, confirm your configuration by entering the show chassis alarms and show system
login commands. If the output does not display the intended configuration, repeat the configuration
instructions in this example to correct it.
[edit]
user@host# show chassis alarms
t3 {
exz yellow;
los red;
ylw red;
}
ds1 {
ylw red;
}
ethernet {
link-down red;
}
serial {
loss-of-rx-clock red;
loss-of-tx-clock red;
dcd-absent yellow;
cts-absent yellow;
}
[edit]
user@host# show system login
show system login
show system login
}
If you are done configuring the device, enter commit from configuration mode.
810
Verification
IN THIS SECTION
Verifying the Alarm Configurations | 810
Verifying the Alarm Configurations
Purpose
Confirm that the configuration is working properly.
Verify that the alarms are configured.
Action
From configuration mode, enter the show chassis alarms command. Verify that the output shows the
intended configuration of the alarms.
811
CHAPTER 8
IP Monitoring
IN THIS CHAPTER
IP Monitoring Overview | 811
Example: Configure IP Monitoring on SRX Series Firewalls | 814
Example: Configure IP Monitoring on SRX5000 line | 818
Example: Configure Chassis Cluster Redundancy Group IP Address Monitoring | 826
IP Monitoring Overview
SUMMARY IN THIS SECTION
This section describes how to keep track of the IP Monitoring Test Parameters | 812
status of the system in use.
IP Monitoring Through Redundant Ethernet
Interface Link Aggregation Groups | 813
This feature monitors IP on standalone SRX Series Firewalls or a chassis cluster redundant Ethernet
(reth) interface. Existing RPM probes are sent to an IP address to check for reachability. The user takes
action based on the reachability result. Supported action currently is preferred static route injection to
system route table.
The actions supported are:
• Adding or deleting a new static route that has a higher priority (lower preference) value than a route
configured through the CLI command set routing-options static route
• Defining multiple probe names under the same IP monitoring policy. If any probe fails, the action is
taken. If all probes are reachable, the action is reverted
• Configuring multiple tests in one RPM probe. All tests must fail for the RPM probe to be considered
unreachable. If at least one test reaches its target, the RPM probe is considered reachable
812
• Configuring multiple failure thresholds in one RPM test. If one threshold is reached, the test fails. If
no thresholds are reached, the test succeeds.
• Specifying the no-preempt option. If the no-preempt option is specified, the policy does not perform
preemptive failback when it is in a failover state or when the RPM probe test recovers from a failure.
• Setting preferred metric values. If the preferred metric value is set, during failover, the route is
injected with the set preferred metric value.
• Enabling and disabling interfaces.
• Interface-Enable—On a physical or logical interface, when the interface-enable action is
configured, the initial state of the interface is disable after startup, and it continues to remain in
the disable state as long as the associated RPM probe is in the pass state. When the associated
RPM probe fails, the configured physical and logical interfaces are enabled.
• Interface-Disable—On a physical or logical interface, when the interface-disable action is
configured, the interface state remains unchanged. When the associated RPM probe fails, the
physical and logical interfaces are disabled.
NOTE: Multiple probe names and actions can be defined for the same IP monitoring policy.
IP Monitoring Test Parameters
Each probed target is monitored over the course of a test, which represents a collection of probes during
which statistics such as standard deviation and jitter are collected are calculated. During a test, probes
are generated and responses collected at a rate defined by the probe interval, the number of seconds
between probes.
NOTE: To avoid flap, an action is reverted only at the end of a test cycle. During the test cycle, if
no threshold is reached, the action is reverted. Although action-failover takes place based on a
predefined condition of a monitored IP, when the condition is reversed, the IP becomes
reachable on the original route, and the newly added route is deleted. Recovery is performed
only when all RPM probes report the IP as reachable.
No Link Title lists the test parameters and its default values:
813
Table 80: Test Parameters and Default Values
Parameter Default Value
probe-count 1
probe-interval 3 seconds
test-interval 1 second
No Link Title lists the supported threshold and its description:
Table 81: Threshold Supported and Description
Threshold Description
Successive-Loss Successive loss count of probes
Total-Loss Total probe lost count
IP Monitoring Through Redundant Ethernet Interface Link Aggregation Groups
IP monitoring checks the reachability of an upstream device. It is designed to check the end-to-end
connectivity of configured IP addresses and allows a redundancy group (RG) to automatically failover
when the monitored IP address is not reachable through the redundant Ethernet. Both the primary and
secondary devices in the chassis cluster monitor specific IP addresses to determine whether an
upstream device in the network is reachable.