aggregate upload resources with the aggregate user demand.
2Same users still could map to diﬀerent hash identiﬁers, due
to DHCP, major software updates, etc. This, however, does
not aﬀect our analysis in later sections, as we rely on hash
consistency during a short session, not across sessions at all.
100
10-1
10-2
10-3
10-4
10-5
10-6
l
y
t
i
r
a
u
p
o
p
f
o
.
b
o
r
p
10-7
100
Apr. 09 (min load)
Apr. 14 (medium load)
Apr. 18 (max load)
101
video index (ranked by popularity)
102
103
Figure 2: Video popularity distribution
Because the players do not report their upload bandwidths
to the media servers, the trace records do not explicitly in-
clude any information about client upload capacity. How-
ever, whenever a connection is established, the Windows
Media Server measures the download bandwidth from the
server to the client host. Figure 3 shows the distribution of
the measured download bandwidths. Windows Media Server
does not distinguish user download bandwidths greater than
3.5 Mbps; thus all measurements greater than 3.5 Mbps col-
lapse to a single point, giving the vertical line shown in
Figure 3.
)
%
(
F
D
C
 100
 80
 60
 40
 20
 0
 0
down link BW distribution
 0.5
 1
 1.5
 2
 2.5
 3
 3.5
bandwidth (Mbps)
Figure 3: Cumulative distribution function (CDF)
of user download bandwidths
Table 1 provides a simple mapping between download and
upload bandwidths based on available DSL/Cable oﬀerings.
From this table and from the measured upload bandwidths,
we infer the upload bandwidth for each user (ID-identiﬁed
and hash-identiﬁed) in the trace. We can also use this tech-
nique to estimate the distribution of user types that access
MSN Video. As shown in Table 1, over 50% of the MSN
Video users have residential broadband connections (DSL
or Cable), and 37% of the users have download rates in ex-
cess of 3.5 Mbps.
downland
upload
share (%)
modem ISDN
256
256
4.3
64
64
2.8
DSL1
768
128
14.3
DSL2
1500
384
23.3
Cable
3000
768/384
18.0
Ethernet
> 3000
768
37.3
Table 1: User bandwidth breakdown (kbps)
Note that we are making very conservative assumptions
about users’ upload bandwidth. For instance, many users
with download bandwidths greater than 3.5 Mbps are likely
on university and corporate networks and therefore have
much higher upload bandwidths than the 768 kbps assumed
here. On the other hand, a benign peer-assisted VoD sys-
tem may not want to fully exploit the available bandwidth
of the high capacity users, as doing so might deter their
participation.
The healthiness of any peer-assisted delivery system re-
lies critically on users’ willingness to contribute their upload
bandwidths. Incentive can be built into the delivery mech-
anism itself, as in BitTorrent, but not necessarily have to.
It can be provided through other means. For example, con-
tent providers may oﬀer users with options, where they can
choose not to act as peers and get content directly from a
server, but at low quality, or they can opt for peer-assistance
and get much higher quality. Providers can also make avail-
able some premium content for free or reduce the amount of
advertisements users have to watch, to encourage the par-
ticipation in peer-assistance. Moreover, as will become clear
later, the peak server bandwidth consumption matters most
to content providers. Hence, they might also oﬀer dynamic
incentives (e.g. Microsoft Points, which can be used to pur-
chase music, videos, and games, etc.)
to encourage more
sharing during peak hours. As long as peer-assistance has
limited interference with users’ other networking activities,
we believe users in general will not object to share, given
the fact that they are obtaining valuable services, as well as
direct values in certain scenarios.
server load
total user uploads
4.0
3.0
2.0
1.0
)
s
p
b
G
(
h
t
i
d
w
d
n
a
b
 0
 0
 4
 8
 12
time (h)
 16
 20
 24
Figure 4: Aggregate user demand and upload re-
sources (April 18)
Having developed a reasonable heuristic for estimating the
upload bandwidth of a user, we can determine from the trace
records the aggregate upload bandwidth and aggregate de-
mand at the server for any instant of time. Figure 4 presents
the evolution of the aggregate demand and the aggregate up-
load capacity for a 24-hour period on April 18 (the day with
maximum traﬃc in April). As we would expect, the demand
greatly ﬂuctuates during the day, with relatively little de-
mand placed on the servers in the early morning. However,
the large margin by which the total upload resources exceeds
the user demand is beyond expectation, suggesting that a
peer-assisted VoD solution might perform very well.
2.5 User Interactivity
When a user selects a video for streaming, the user does
not necessarily continuously watch the video from beginning
to end. The user may quit watching it before completion,
may pause and then resume, may skip segments of the video,
may fastforward the video, and so on.
It is important to
understand this interactivity while considering peer-assisted
solutions for VoD. To this end, we examine user interactivity
in the entire month of April 2006.
of years of content. Over the upcoming years, we not only
expect aggregate viewing hours to increase, but also video
quality to increase (by increasing the bit rate of the videos).
We now explore the growth in demand and video bit rate
that occurred during the nine-month period of this study.
viewing time = 100%
viewing time > 80%
viewing time > 60%
80
60
40
20
0
)
%
(
e
g
a
t
n
e
c
r
e
p
< 6
< 12
< 18
< 24
< 30
30~48
< 54
< 60
video length (min)
(a) Percentage of sessions viewing more than 60%,
80% and 100% of the video
non interactive sessions
100
80
60
40
20
0
)
%
(
e
g
a
t
n
e
c
r
e
p
< 6
< 12
< 18
< 24
< 30
30~48
< 54
< 60
video length (min)
(b) Percentage of sessions without gaps
Figure 5: User behavior (April)
Figure 5(a) shows the percentage of streaming sessions
that view more than 60%, 80%, or 100% of the video for
diﬀerent video lengths. We ﬁrst observe that users generally
view large fraction of short videos, but less than 20% of the
users view more than 60% of the video for videos longer
than 30 minutes. We will see in Section 4 that the fraction
of sessions that start at the beginning of a video and have no
interactivity (but may quit before the end of the video) is an
important factor in the potential success of a peer-assisted
VoD system. Figure 5(b) shows this fraction for diﬀerent
video lengths. We see that, generally, a large fraction of the
users view videos without interactivity. For shorter videos
(under 30 minutes), about 80% of the sessions do not have
interactivity; for the longer videos, about 60% do not have
interactivity.3
2.6 Service Evolution
VoD over the Internet is in its infancy and will certainly
evolve over the upcoming years. In designing a new archi-
tecture for VoD applications, we should bear in mind major
application trends. The year 2006 was a year of intense ac-
tivity in the Internet VoD space, with major players such as
YouTube, Google Video and MSN serving tens of thousands
3There are no videos of length 30∼48 mins. Also note that
a large number of videos are not very longer, typically be-
tween 5 to 15 minutes. When full length episodes grow more
popular, user interactivities are likely to increase [3].
 100
)
Apr. 2006
Dec. 2006
%
(
s
t
s
e
u
q
e
r
o
e
d
v
f
o
F
D
C
i
 80
 60
 40
 20
 0
 150
 200
 250
 300
 350
video bitrate (kbps)
Figure 6: Quality evolution
Figure 6 plots the distribution of the bitrates for the MSN
requested videos for two months: April 2006 and December
2006. In April 2006, the majority of the requests were for
videos encoded at 200 kbps. Nine months later, the majority
of the requests are for videos encoded at 320 kbps. This
implies that MSN Video increased the bit rate of its videos
by over 50% during the nine-month period. In the upcoming
years, it is likely that video bit rates will continue to increase
at a rate faster than average peer upload bandwidths. This
would have the eﬀect of bringing the two curves in Figure 4
closer together. We will see in Section 3 that when these two
curves are close, particular care must be taken in designing
a peer-assisted VoD system.
total requests
unique users
April
41.1 M
9.03 M
December
64.7 M
12.02 M
up (%)
57.4
33.1
Table 2: Traﬃc evolution
Perhaps partially due to the service quality upgrade, to-
gether with the general trend that more users are spending
more time watching Internet videos, the amount of traﬃc
served by MSN Video servers increased substantially over
the period, as shown in Table 2.
2.7
95 Percentile Rule
Typically today an ISP (or a CDN) bills a customer (such
as a VoD provider) for bandwidth usage using the so called
95 percentile rule. In this paper we will use this rule as the
basic metric for measuring the cost to the service provider.
The 95 percentile rule is in essence a rule that charges the
service provider each month according to the service provider’s
peak bandwidth usage, but neglecting in the calculation
“anomalous periods” during which bandwidth usage is un-
usually high. Speciﬁcally, the 95 percentile rule works as
follows. The average server bandwidth is measured every
5 minutes within each month. These bandwidth measure-
ments over a month form a set of values, and the 95 per-
centile value is the smallest number that is greater than 95%
of the values in the set.
)
%
(
F
D
C
 100
(c)
 80
 60