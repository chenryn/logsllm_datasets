User: Install and configure OpenSSH server on CentOS7 server.
Assistant: 1. Install the OpenSSH server Run the following command in the terminal to install the OpenSSH server: sudo yum install openssh-server When prompted to install, enter Y and press Enter to confirm the installation. 2. Configure the OpenSSH server After the installation is complete, you need to edit the configuration file of the SSH server to make it work according to your needs. Configure the OpenSSH server by editing the /etc/ssh/sshd_config file. sudo vi /etc/ssh/sshd_config Add or modify the following lines at the end of the file: # Bind the SSH service to the specified IP address to improve security and avoid being attacked. If you have multiple IP addresses, you can specify one of them, or use the default settings directly. ListenAddress 0.0.0.0 # The port number that the SSH server listens to, the default is 22, which can be modified. Port 22 # Disable root user ssh login. PermitRootLogin no # Allow password login. If you want to use SSH keys to log in, you can comment this option out or change it to no. PasswordAuthentication yes # Enable to display the information in /etc/motd when logging in. It is often used to display some system prompt information. PrintMotd yes # Allow the client to disconnect and reconnect later, often used in wireless or unstable network scenarios. TCPKeepAlive yes # Allows to reuse already authenticated authentication on the same connection. UsePAM yes Here are some advanced options that you can edit to configure as needed. # Restrict login IP address. #AllowUsers user1@192.168.1.* # Client connection timeout. #ClientAliveInterval 300 #ClientAliveCountMax 2 # SSH server certificate. #HostKey /etc/ssh/ssh_host_rsa_key #HostKey /etc/ssh/ssh_host_ecdsa_key #HostKey /etc/ssh/ssh_host_ed25519_key # Specify the key file location. #AuthorizedKeysFile .ssh/authorized_keys After the configuration is complete, you need to restart the OpenSSH service for the settings to take effect. sudo systemctl restart sshd You should now be able to connect to your server with an SSH client. 3. Firewall settings By default, CentOS7 will enable the firewall and restrict access to the SSH port. If you want to make your SSH server more secure when accessed from the public network, you need to open the SSH port. Run the following command in terminal to open SSH port. sudo firewall-cmd --zone=public --add-port=22/tcp --permanent Deny IPs for SSH access. sudo firewall-cmd --zone=public --add-rich-rule='rule family=ipv4 source address=192.168.10.10/32 port port=22 protocol=tcp reject' --permanent "IP address" in the above command "Replace with the IP address you wish to block. You can also use IP ranges instead of individual IP addresses. Run the following command to reload the firewall configuration. sudo firewall-cmd --reload The above are the steps to install and configure the OpenSSH server on the CentOS7 server.