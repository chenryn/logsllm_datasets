### 优化后的文本

#### 查询性能测试结果

| 查询次数 | 索引时间范围       | 数据总条数      | 查询耗时   | 平均耗时   |
|----------|--------------------|-----------------|------------|------------|
| 第3次    | 20170721 -- 20170722 | 108,492,156     | 7180ms     |            |
| 第4次    | 20170721 -- 20170722 | 108,492,156     | 7341ms     |            |
| 第5次    | 20170721 -- 20170722 | 108,492,156     | 7329ms     |            |
| 第6次    | 20170720 -- 20170722 | 135,446,082     | 9927ms     | 10016.4ms  |
| 第7次    | 20170720 -- 20170722 | 135,446,082     | 10027ms    |            |
| 第8次    | 20170720 -- 20170722 | 135,446,082     | 10009ms    |            |
| 第9次    | 20170720 -- 20170722 | 135,446,082     | 10013ms    |            |
| 第10次   | 20170720 -- 20170722 | 135,446,082     | 10106ms    |            |
| 第11次   | 20170722 -- 20170723 | 1,000,020       | 974ms      | 1033.6ms   |
| 第12次   | 20170722 -- 20170723 | 1,000,020       | 1123ms     |            |
| 第13次   | 20170722 -- 20170723 | 1,000,020       | 926ms      |            |
| 第14次   | 20170722 -- 20170723 | 1,000,020       | 933ms      |            |
| 第15次   | 20170722 -- 20170723 | 1,000,020       | 1212ms     |            |

**分析：**
查询耗时随数据量的增加而线性增长。

**全天数据查询图表：**
![](media/image3.png){width="5.770833333333333in" height="1.0520833333333333in"}

**返回时长图表：**
![](media/image4.png){width="5.770833333333333in" height="0.75in"}

### 统计值查询

**测试方法：**
在查询界面全局时间内进行统计查询，使用语句 `* | stats count() by tag`，观察splserver机器的数据查询消耗时间。预计在2.5亿数据量下，查询返回时间应在8秒以内。

**测试结果：**

| 测试周期 | 索引时间范围       | 机器数据总条数 | 查询耗时 | 平均耗时   |
|----------|--------------------|-----------------|-----------|------------|
| 第1次    | 20170721 -- 20170722 | 108,492,156     | 6352ms    | 6392.4ms   |
| 第2次    | 20170721 -- 20170722 | 108,492,156     | 6582ms    |            |
| 第3次    | 20170721 -- 20170722 | 108,492,156     | 6369ms    |            |
| 第4次    | 20170721 -- 20170722 | 108,492,156     | 6290ms    |            |
| 第5次    | 20170721 -- 20170722 | 108,492,156     | 6342ms    |            |
| 第6次    | 20170720 -- 20170722 | 135,446,082     | 9061ms    | 9001.6ms   |
| 第7次    | 20170720 -- 20170722 | 135,446,082     | 8845ms    |            |
| 第8次    | 20170720 -- 20170722 | 135,446,082     | 9159ms    |            |
| 第9次    | 20170720 -- 20170722 | 135,446,082     | 8754ms    |            |
| 第10次   | 20170720 -- 20170722 | 135,446,082     | 9189ms    |            |
| 第11次   | 20170722 -- 20170723 | 1,000,020       | 879ms     | 985.4ms    |
| 第12次   | 20170722 -- 20170723 | 1,000,020       | 1023ms    |            |
| 第13次   | 20170722 -- 20170723 | 1,000,020       | 925ms     |            |
| 第14次   | 20170722 -- 20170723 | 1,000,020       | 895ms     |            |
| 第15次   | 20170722 -- 20170723 | 1,000,020       | 1205ms    |            |

**全天数据统计查询图表：**
![](media/image5.png){width="5.770833333333333in" height="1.09375in"}

**返回时长图表：**
![](media/image6.png){width="5.770833333333333in" height="0.65625in"}

### 试验结论

**混合试验（采集和查询同时进行）：**
- 当数据采集达到3万条，并发查询达到100时，系统性能达到拐点。
- 在总量为1000万条数据、存在5类不同格式样本数据的环境下：
  - 系统响应时间小于3秒。
  - 并发用户数大于100个。

**查询测试结论：**
- 在总量为1000万条数据的环境下，多级统计任务可以在30秒内完成。
- 在总量为1000万条数据的环境下，检索任务可以在10秒内完成。

### 参考文献
1. 吴秋莉. 智能电网海量数据实时搜索技术研究 [J]. 电力信息与通信技术, 2016, 12.
2. 刘卫昌, 马增良. 企业综合自动化系统中实时数据库系统设计 [J]. 计算机应用研究, 2005, 22(8): 146-149.
3. 田保军, 秦昊. 实时数据存储管理的研究与设计 [J]. 内蒙古工业大学学报(自然科学版), 2010, 29(3): 180-181.
4. 王鹏, 张利. 大数据处理系统的研究进展与展望 [J]. 高技术通讯, 2015(Z1).
5. 顾荣. 大数据处理技术与系统研究 [D]. 南京: 南京大学, 2016.