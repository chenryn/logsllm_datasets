that such abrupt events affecting large prefixes have distinct spatial
properties (red spikes in April/May in Figure 5), different from, e.g.,
the effect of Hurricane Irma (blue spike and recovery period in
September in Figure 5).
We acknowledge that this is only a first step to study spatial
properties of disruptions. Alternative ways to group /24s together
might involve more advanced clustering algorithms based on event
timings [29] or alternative topological aspects, such as last visible
router on traceroutes towards /24s.
4.2 Disruption Patterns in Time
Figure 5 shows an intriguing pattern: Over the course of the year,
we clearly observe some recurring day-of-the week pattern, which
is less pronounced in the Christmas/New-Year’s week. To better
understand this pattern, we next study when disruption events typ-
ically happen. To determine the local time of disruption events, we
first geolocate all our disruption events using the CDN’s geoloca-
tion database. Leveraging geolocation with timezone information,
we can get a good estimate of the local time of disruption events.
Figure 7a shows a breakdown of the weekday on which we see the
start of disruption events, where “entire /24” means all addresses
in the prefix had no activity, and “all” also includes prefixes where
some addresses still showed activity. Complementing Figure 7a,
Figure 7b shows the distribution of disruption start times across
hours-of-the-day.
Scheduled Maintenance: Surprisingly, we observe that disrup-
tions are much more pronounced on weekdays, particularly Tues-
day, Wednesday, and Thursday, the typical maintenance window.
Comarela et al. found similar results in BGP [21] and so did Bev-
erly et al. when studying reboots of ISP routers [14]. The picture
sharpens even more when looking at the hour of the day of these
events, as shown in Figure 7b. Here, we see that most disruptions
start after midnight local time, typically between 1AM and 3AM.
These start times correspond with the maintenance window of ma-
jor ISPs (e.g., [19, 24]). In fact, disruptions during the maintenance
window dominate for many ISPs. We return to this observation in
Section 8, when discussing properties of residential US ISPs. We
number of disruptions per /24% of /24 address blocks1204060801000.00010.01110062.5%: one disruption18.8%: two disruptions 10 disruptions/15/16/17/18/19/20/21/22/23/24prefix sizefraction of /24 disruption events0.00.10.20.30.4same start hoursame start hour and end hourMonTueWedThuFriSatSunday of the week [local time]fraction of disruption events0.000.050.100.150.20allentire /24●●●●●●●●●●●●●●●●●●●●●●●●start hour [local time]fraction of disruption events13579111315171921230.000.050.100.15●●●●●●●●●●●●●●●●●●●●●●●●●●allentire /24Advancing the Art of Internet Edge Outage Detection
IMC ’18, October 31-November 2, 2018, Boston, MA, USA
Figure 8: For detected disruptions, we check if and when a
user device that was previously active in a disrupted address
block is active next, during and after the disruption.
note, however, that this is not an isolated phenomenon, many ISPs
across the globe show this regular disruption pattern.
ISP feedback: We shared with a contact at a major US cable
provider the disruption events that we had detected in their net-
work. They reported that all of the events that they researched
corresponded to scheduled network maintenance.
5 A DEVICE VIEW OF DISRUPTIONS
Having studied macroscopic properties of disruption events in the
prior section, we now shift our perspective and study disruption
events from a device-centric perspective, leveraging an orthogonal
dataset that allows us to track activity of individual devices across
the address space before, during, and after disruption events. This
allows us to study aspects of user mobility, as well as to identify
instances in which disruptions are not indicative of service outages.
5.1 Device Activity across Address Blocks
To study activity of individual devices, we next leverage an orthog-
onal dataset: Logs from a service offered by the CDN to content
owners whereby end users can elect to install software that will
improve the performance the client experiences when accessing
the content through the CDN.3
Pinpointing devices: The software runs on Windows and Mac
OS X and is installed on desktops and laptops, but not smartphones.
Devices with the software installed repeatedly contact the CDN,
and identify themselves with the unique identifier of the software
installation on the machine, herein called the “software ID,” or
simply “ID”. For the present study, the relevant fields of the log
lines are: the timestamp at which the log line is created, the public
IP address seen by the CDN’s infrastructure at this time, and the ID.
These logs are distinct from those used for the time-series-of-hits
dataset of Section 3.1, and are generated only for clients that have
installed the software, and their frequency varies. Thus, while a log
line evidently shows that a device was active at a given timestamp
with a given IP address, the absence of a log line does not imply
that the device did not have Internet connectivity. We next leverage
this dataset to study further attributes of identified disruptions.
Pairing devices and disruptions: We isolate only disruption
events that affected entire /24 address blocks (i.e., no IP address
showed any activity during the disruption) and identify all IDs that
were active in the disrupted /24 address block within the last hour
3This client-installed software does not access the data of any other applications on
the device.
Figure 9: User devices that were previously in a disrupted ad-
dress block were sometimes active in other address blocks
during the disruption event. While some of these cases can
be attributed to mobility or tethering, the majority had a
new address in the same AS as the disrupted address block.
before the disruptions’ start time, illustrated in Figure 8. Of the
883K such disruption events, we found an ID active up to an hour
before the disruption in 52K (5.9%) instances. We note that last
IP address with which the device was active as IPbefore. Next, we
check if the ID is seen during the disruption event from some other
address block, then we call the first address associated with the ID
during the disruption IPduring. Lastly, we note the first IP address
after the disruption event as IPafter. We next proceed and study the
interplay of IDs and IP addresses during detected disruption events.
Figure 9 shows our results.
Cross-validation of detected disruption events: We found only
6 instances (< 0.01%) in which an ID was seen during a disruption
with IPduring within the disrupted address block. This again shows
that our disruption detection mechanism (§ 3) is effective in de-
tecting loss of Internet connectivity for certain address blocks and
does not falsely identify disruptions of address blocks that still have
Internet connectivity. We omit these 6 instances from our dataset.
5.2 No Device Activity during Disruptions
We first focus on disruptions in which we did not record any inter-
mediate activity, i.e., IPduring does not exist. This is the expected
case, since we naturally presume that devices in disrupted address
blocks lost Internet connectivity. Indeed, the majority (some 86% of
our disruptions) show this behavior. While for these disruptions
we do not have any indications that suggest other than a service
outage (e.g., devices cannot connect to the Internet any longer),
we further group these instances into whether the IP address cor-
responding to the software ID has changed (IPbefore (cid:44) IPafter) or
remained the same (IPbefore = IPafter), see Figure 9. This distinction
is important, since it gives us a different level of confidence when
interpreting such disruptions: If the IP address of an ID remained
the same before and after the disruption, it is unlikely that the de-
vice was temporarily assigned a different address from the ISP and
switched back to its original one [42]. We are, thus, more certain
that such disruptions are service outages, as opposed to prefix mi-
gration events (next Section). If the address changed, however, we
have lower confidence when distinguishing between device move-
ment, address re-assignment, and service outages. We will consider
disruption in1.2.3.0/24IPbefore ∈ 1.2.3.0/24timeIPduring∉ 1.2.3.0/24IPafter∈/∉ 1.2.3.0/2450%45%5%20%67%13%disruptions with active IDs < 1hr before52,117no active IDs during disruption44,736 (85.8%)active IDs during disruption7,381 (14.2%)switch to/from cellular1,445 (2.8%)switch AS988 (1.9%)same AS4,948 (9.5%)IPbefore ≠ IPafter20,064 (38.5%)switch AS/cellular2,243 (4.3%)IPbefore = IPafter22,429 (43.0%)IMC ’18, October 31-November 2, 2018, Boston, MA, USA
Richter et al.
this property when assessing ways to distill service outages from
disruptions in § 7.
5.3 Device Activity during Disruptions
Next, we shift our attention to the more unexpected, yet prevalent
(some 14%) case: Instances of disruptions, in which activity was
recorded during the disruption period. Note that our records reflect
a lower bound of activity during disruptions, since the software does
not necessarily contact the CDN during a disruption event, even if
the concerned end-host has Internet connectivity. This activity can
happen as a result of a few scenarios:
Mobility and tethering: First, users can physically move to a
different location and connect their device to a different network,
or the device is multi-homed, perhaps tethered through a cellular
network. We refer to these instances as mobility, highlighted in
orange in Figure 9. To identify such cases, we study if the switch
from IPbefore to IPduring involved a switch from or to a cellular
address block4 or switched AS numbers. We note that in some 20%
of the cases users switched to a cellular network, and in another
13% to a different ASN. While these cases do not reveal whether
the detected disruption in the original address block resulted in a
loss of service connectivity, they highlight that today a significant
fraction of end users are multi-homed in the sense of having the
ability to switch between different access networks, in the case of
a potential network service outage.
Address reassignment: Second, the user continues to use the
same Internet service provider, but the public IP address through
which the user’s device connects to the Internet has changed. Thus,
we detect a sudden absence of all activity within the original ad-
dress block, and see activity from the very same hosts from different
address blocks in the same AS during the disruption. Note that this
is by far the most common case for during-disruption activity, ac-
counting for some 67% of during-disruption activity instances and
for almost 10% of all detected disruption events for which we have
device-specific information. While in the case of disruptions with-
out activity (§ 5.2) as well as in cases of mobility and tethering we
do not gain hard evidence on whether a disruption really resulted
in a service outage or not, we can infer for these 9.5% of disruptions
that they are likely not the result of a service outage. We corrobo-
rate our findings that some disruptions are not service outages in
Section 6, where we identify that instances of during-dip-activity
often go along with an upsurge in overall address activity in the
prefix a device moves to.
6 DISRUPTIONS AND ANTI-DISRUPTIONS
Our device-centric analysis of disruptions revealed that in some
10% of disruptions, devices do not lose access service. We are next
interested in the interplay between such disrupted address blocks
and those address blocks into which devices move, the alternate /24
address blocks.
Microscopic anti-disruptions: We hence return to our activity-
per-/24 timeseries and inspect both the disrupted /24 as well as
the alternate /24, identified using our software ID dataset (§ 5.3).
Figure 10 shows such an example. Here, we plot activity of the
4We leverage the dataset and method described in [51] to identify cellular address
blocks.
Figure 10: Example of an anti-disruption event: active IDs
show activity during the disruption, but from a different ad-
dress block. Their activity is correlated.
disrupted /24 in blue, and the address activity of the alternate /24
in red in the negative y-direction. Indeed, we can clearly observe
patterns of alternating activity between the concerned address
blocks. We refer to this phenomenon as anti-disruption, temporary
spikes in address activity in address blocks. We note that while
Figure 10 shows a clear anti-disruption signature, often the shift
on an individual /24 basis is not so clear, but may become apparent
when viewed network-wide.
Network-wide anti-disruptions: We next seek to leverage our
observations about anti-disruptions and generalize our approach
for detecting them without the need to track individual devices. To
do so, we invert our disruption detection mechanism (recall § 3.3) to
detect anti-disruptions. Instead of calculating the minimum number
of active addresses over the prior week window, we now calculate
the maximum number of active addresses. We then set our α value
to 1.3 and β to 1.1.5 Thus, we now detect address blocks that show
irregularly high activity over short periods of time. We next apply
our mechanisms over the entire dataset and study disruptions and
anti-disruptions on a per-AS level.
To visualize and correlate the magnitude of disruptions and
anti-disruptions, for each disruption, we calculate the number of
disrupted addresses in the /24 prefix as the difference between
the median number of active addresses in the week prior to the
disruption and the median number of addresses active during the
disruption. We then assign this number to each hour that the dis-
ruption existed. Lastly, for each hour in the observation period, we
sum over the number of disrupted addresses, if any, for all disrup-
tions observed in a given AS. We do the analogous computation
for anti-disruptions. Figure 11 shows three example ASes, with
different levels of correlation for disruptions and anti-disruptions.
While the US ISP in Figure 11a shows virtually zero correlation
between disruptions, the Spanish ISP in Figure 11b shows moderate
correlation, The Uruguay ISP (bottom) shows that most disruptions
and anti-disruptions in this AS align very clearly. We calculate
the pearson correlation across disruptions and anti-disruption (see
Figure 11) to express the degree of correlation for individual ASes.
ISP feedback: We were surprised to see the anti-disruption pattern
very strongly for some ISPs, having the potential to heavily skew
AS-based analysis of Internet reliability. Contacts from two ISPs,
one cable and one DSL, confirmed that reassigning prefixes is a
5We experimented with various values. No combination catches all cases we observed
when manually studying anti-disruption behavior on a per-AS basis.
IPs in disrupted/alternate /240204060801002001000100200disrupted /24alternate /24time [hours]Advancing the Art of Internet Edge Outage Detection
IMC ’18, October 31-November 2, 2018, Boston, MA, USA
(a) US cable ISP: No correlation. (pearson r = 0.02)
(b) Spanish ISP: Medium correlation. (pearson r = 0.38)
(c) Uruguayan ISP: High correlation. (pearson r = 0.63)
Figure 11: Hourly disrupted (blue, positive y-direction) and
anti-disrupted (red, negative y-direction) IP addresses over
the course of one year shows the AS-wide interplay of dis-
ruptions and anti-disruptions.
common practice. For example, to manage capacity, cable providers