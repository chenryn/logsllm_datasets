User: How to configure Nginx to serve HTTP and HTTPS on a Linux server?
Assistant: The following are the steps to configure Nginx on a Linux server to provide HTTP and HTTPS services: 1. Install Nginx: Run the command sudo apt-get install nginx or sudo yum install nginx, and the installation method may vary depending on the operating system. 2. Configure HTTP service: Nginx default configuration file path is /etc/nginx/nginx.conf, edit this file and comment out the default server block, add a new server block to configure HTTP service. A sample configuration is as follows: ``` server { listen 80; server_name your_domain.com; root /var/www/html; index index.html; location / { try_files $uri $uri/ =404; } } ``` Among them, listen 80 means listening to HTTP port 80, server_name specifies the domain name, root specifies the web root directory, index specifies the default page, and location is used to configure the access path and error handling. 3. Configure HTTPS service: In order to configure HTTPS service, we need to generate an SSL certificate and configure the certificate into Nginx. You can use a third-party CA certificate or generate a self-signed certificate. In the following examples we use LetsEncrypt certificates. Execute the following command to install certbot: ``` sudo apt-get update sudo apt-get install certbot ``` Execute the following command to generate a certificate for your domain name: ``` sudo certbot certonly --standalone -d your_domain.com ``` After successful execution, certificate and key files will be generated in the /etc/letsencrypt/live directory. 4. Update the Nginx configuration file to support HTTPS service: edit the Nginx configuration file /etc/nginx/nginx.conf, and add a new server block after the HTTP service configuration block to configure the HTTPS service. An example configuration is as follows: ``` server { listen 443 ssl; server_name your_domain.com; root /var/www/html; index index.html; ssl_certificate /etc/letsencrypt/live/your_domain.com/fullchain.pem; ssl_certificate_key /etc /letsencrypt/live/your_domain.com/privkey.pem; location / { try_files $uri $uri/ =404; } } ``` Among them, listen 443 ssl means listening to HTTPS port 443, ssl_certificate and ssl_certificate_key specify the SSL certificate and key The path of the key file, and other configurations are consistent with the HTTP service. 5. Reload the Nginx configuration file: Execute the command sudo nginx -t to check whether the configuration is correct, and then execute the command sudo systemctl reload nginx to reload the Nginx configuration file and enable new HTTP and HTTPS services. The above are the steps to configure Nginx to provide HTTP and HTTPS services on the Linux server. You can make appropriate modifications and customizations according to your needs.