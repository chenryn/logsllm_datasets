8 Click Save.
The new share point is shared using the AFP, SMB, and FTP protocols, but not NFS.
To change protocol settings, stop sharing via a particular protocol, or export the share 
point using NFS, click Protocol and choose the protocol from the pop-up menu. 
Settings specific to each protocol are described in the following sections.
From the Command Line
You can also set up a share point using the sharing command in Terminal. For more 
information, see the file services chapter of the command-line administration guide.
LL2346.Book  Page 22  Friday, August 22, 2003  2:38 PM
Chapter 2    Setting Up Share Points
23
Changing Apple File Settings for a Share Point
You can use Workgroup Manager to choose whether a share point is available via AFP 
and to change settings such as the share point name that AFP clients see, whether 
guest access is allowed, or the permissions model for new items.
The default settings for a new share point should make it readily accessible to 
Mac OS 8, Mac OS 9, and Mac OS X clients. 
To change the settings of an AFP share point:
1 Open Workgroup Manager and click Sharing.
2 Click Share Points and select the share point.
3 Click Protocols and choose Apple File Settings from the pop-up menu.
4 To provide AFP access to the share point, select “Share this item using AFP.”
5 To allow unregistered users to access the share point, select “Allow AFP guest access.” 
For greater security, do not select this item.
6 To change the name that clients see when they browse for and connect to the share 
point using AFP, type a name in the “Custom AFP name” field.
Changing the custom AFP name does not affect the name of the share point itself, only 
the name that AFP clients see.
7 Choose a default permissions option for new files and folders.
To have new or copied items keep their original privileges while inheriting the user and 
group ID of the user who creates or copies them, select “Use Standard UNIX behavior.” 
To have new or copied items adopt the privileges of the enclosing folder, select “Inherit 
permissions from parent.” 
Note:  Do not select the “Inherit permissions” option for share points that contain home 
directories.
8 Click Save.
From the Command Line
You can also change AFP settings for a share point using the sharing command in 
Terminal. For more information, see the file services chapter of the command-line 
administration guide.
LL2346.Book  Page 23  Friday, August 22, 2003  2:38 PM
24
Chapter 2    Setting Up Share Points
Changing Windows (SMB) Settings for a Share Point
You can use Workgroup Manager to set whether a share point is available via SMB and 
to change settings such as the share point name that SMB clients see, whether guest 
access is allowed, whether opportunistic locking is allowed, and the default privileges 
for new items.
To change the settings of an SMB share point:
1 Open Workgroup Manager and click Sharing.
2 Click Share Points and select the share point.
3 Click Protocols (on the right) and choose Windows File Settings from the pop-up menu.
4 To provide SMB access to the share point, select “Share this item using SMB.”
5 To allow unregistered users access to the share point, select “Allow SMB guest access.”
For greater security, don’t select this item.
6 To change the name that clients see when they browse for and connect to the share 
point using SMB, type a new name in the “Custom SMB name” field. 
Changing the custom SMB name doesn’t affect the name of the share point itself, only 
the name that SMB clients see.
7 To allow clients to use opportunistic file locking, select “Enable oplock.” 
To have clients use standard locks on server files, select “Enable strict locking.”
For more information on oplocks, see “Opportunistic Locking (oplocks)” on page 19.
8 Choose a method for assigning default access privileges for new files and folders in the 
share point.
To have new items adopt the privileges of the enclosing item, select “Inherit 
permissions from parent.”
To assign specific privileges, select “Assign as follows” and set the Owner, Group, and 
Everyone privileges using the pop-up menus.
9 Click Save.
From the Command Line
You can also change a share point’s SMB settings using the sharing command in 
Terminal. For more information, see the file services chapter of the command-line 
administration guide.
LL2346.Book  Page 24  Friday, August 22, 2003  2:38 PM
Chapter 2    Setting Up Share Points
25
Changing FTP Settings for a Share Point
You can use Workgroup Manager to set whether a share point is available via FTP and 
to change settings such as whether guest access is allowed and the share point name 
that FTP clients see. 
To change the settings of an FTP share point:
1 Open Workgroup Manager and click Sharing.
2 Click Share Points and select the share point.
3 Click Protocols and choose FTP Settings from the pop-up menu.
4 To make the share point available to FTP clients, select “Share this item using FTP.”
5 Select “Allow FTP guest access” to allow anonymous FTP users to open this item.
For greater security, don’t select this item.
6 To change the name clients see when they browse for and connect to the share point 
using FTP, type a new name in the “Custom FTP name” field. 
Changing the custom FTP name doesn’t affect the name of the share point itself, only 
the name that FTP clients use.
7 Click Save.
From the Command Line
You can also change a share point’s FTP settings using the sharing command in 
Terminal. For more information, see the file services chapter of the command-line 
administration guide.
LL2346.Book  Page 25  Friday, August 22, 2003  2:38 PM
26
Chapter 2    Setting Up Share Points
Setting Up an NFS Share Point
You can use NFS to export share points to UNIX clients. (Export is the NFS term for 
sharing.)
Note:  Don’t use spaces or slashes (/) in the name of a share point you plan to export 
using NFS. Spaces and slashes in volume names can cause access problems for NFS 
clients. If you must use spaces in the name of an NFS share point, use Netinfo Manager 
to “escape” the spaces in the export record in NetInfo (that is, precede the spaces with a 
backslash “\”). For example, you would have to change “/folder1/folder two” to 
“/folder1/folder\ two”.
To configure an NFS share point:
1 Open Workgroup Manager and click Sharing.
2 Click Share Points and select the share point.
3 Click Protocols and choose NFS Export Settings from the pop-up menu.
4 Select “Export this item and its contents to” and choose an audience from the pop-up 
menu.
To limit clients to specific computers, choose “Client” and click Add to specify the IP 
addresses of computers that can access the share point.
To limit clients to the entire subnet, choose “Subnet” and type the IP address and 
subnet mask for the subnet.
Important:  Make sure that the subnet address you enter is the actual IP network 
address that corresponds to the subnet mask you chose (not just one of the client 
addresses). Otherwise, your clients will be unable to access the share point.
A network calculator can help you select the subnet address and mask for the range of 
client addresses you want to serve, and you should use one to validate your final 
address/mask combination. Calculators are available on the Web; use Sherlock or 
Google to search for “subnet calculator.”
For example, suppose you want to export to clients that have IP addresses in the range 
192.168.100.50 through 192.168.100.120. Using a subnet calculator, you can discover that 
the mask 255.255.255.128 applied to any address in this range defines a subnet with 
network address 192.168.100.0 and a range of usable IP addresses from 192.168.100.1 
through 192.168.100.126, which includes the desired client addresses. So, in Workgroup 
Manager you enter subnet address 192.168.100.0 and subnet mask 255.255.255.128 in the 
NFS Export Settings for the share point.
To allow unlimited (and unauthenticated) access to the share point, choose “World.”
Note:  If you export more than one NFS share point to “World,” only the last export is 
available to clients. Don’t create more than one NFS world export on a single server 
volume.
LL2346.Book  Page 26  Friday, August 22, 2003  2:38 PM
Chapter 2    Setting Up Share Points
27
5 Select “Map Root user to nobody” if you want the root user on a remote client to have 
only minimal privileges to read, write, and execute commands.
6 Select “Map All users to nobody” if you want all users to have minimal privileges to 
read, write, and execute.
7 Select “Read-only” if you don’t want client users to be able to modify the contents of 
the shared item in any way.
8 Click Save.
File and file range locking (standard POSIX advisory locks) are enabled by default for 
NFS share points in Mac OS X Server.
From the Command Line
You can also set up an NFS share point by using the niutil command in Terminal to 
add an entry to the NetInfo /exports directory. For more information, see the file 
services chapter of the command-line administration guide.
Resharing NFS Mounts as AFP Share Points
Resharing NFS mounts (NFS volumes that have been exported to the Mac OS X Server) 
as AFP share points allows clients to access NFS volumes using the secure 
authentication of an AFP connection. Resharing NFS mounts also allows Mac OS 9 
clients to access NFS file services on traditional UNIX networks.
Note:  Quotas set on the original NFS export are not enforced on the AFP reshare.
To reshare an NFS mount as an AFP share point:
1 On the NFS server that’s exporting the original share, make sure the NFS export maps 
root-to-root so that AFP (which runs as root) can access the files for the clients. Restrict 
the export to the single AFP server (seen as the client to the NFS server). For even 
greater security, you can set up a private network for the AFP-to-NFS connection.
2 On the AFP server, create a directory named nfs_reshares at the root level of the file 
system. Log in to Terminal as admin and use the command:
sudo mkdir /nfs_reshares
The nfs_reshares directory will work with default permissions, but at a minimum must 
allow read/write for root so that the exports can be mounted there and accessed by 
the AFP server.
3 Create a subdirectory in the /nfs_reshares directory for each NFS volume you want to 
reshare. In Terminal, while logged in as admin, use the command:
sudo mkdir /nfs_reshares/
Replace  with the name of the volume as you want it to appear 
to AFP clients.
LL2346.Book  Page 27  Friday, August 22, 2003  2:38 PM
28
Chapter 2    Setting Up Share Points
4 On the AFP server, create a mount record that mounts the reshared volume in the 
/nfs_reshares directory.
a Open NetInfo Manager, select mounts in the directory browser window, click the lock 
at the lower left corner of the window and enter your administrator password.
Note:  To authenticate in NetInfo Manager, you must use an administrator account 
with a basic password. NetInfo Manager can’t authenticate an administrator account 
that uses Password Server.
b Select New Subdirectory from the Directory menu. The new mount record is named 
new_directory. Edit the name property and add two new properties following this 
format:
name: :
vfstype: nfs
dir: /nfs_reshares/
For example, a mount record to reshare as “myshare” an NFS volume located on a 
server named “server” at the path /test/lab1 would have the following properties:
name: server:/test/lab1
vfstype: nfs
dir: /nfs_reshares/myshare
c Click the lock when finished. In the Confirm Changes dialog, click “Update this copy” 
to save your changes.
5 Restart the computer to enable the mount. You can also manually mount the NFS 
volume in Terminal with the following command:
sudo mount_nfs : /nfs_reshares/
6 Use the Sharing module in Workgroup Manager to share the NFS mounts as AFP share 
points. The NFS mounts appear as normal volumes in the All list. (You can also share 
the NFS mounts using SMB and FTP, but it’s recommended that you use only AFP.) You 
can change privileges and ownership, but not enable quotas (quotas work only on 
local volumes). However, if quotas are enabled on the NFS server, they should apply to 
the reshared volume as well.
LL2346.Book  Page 28  Friday, August 22, 2003  2:38 PM
Chapter 2    Setting Up Share Points
29
Automatically Mounting Share Points for Clients
You can mount share points automatically on client computers using network mounts.
You can automatically mount AFP or NFS share points. When you set a share point to 
automatically mount, a mount record is created in the Open Directory database. Be 
sure you create these records in the same shared domain in which the user and 
computer records exist.
Note:  All users have guest access to network-mounted AFP share points. Authenticated 
access is only allowed for a user’s own home directory or if you have Kerberos set up to 
support single signon.
To set up a network mount:
1 Open Workgroup Manager and click Sharing.
2 Click Share Points and select the share point.
3 Click Network Mount (on the right).
4 Choose the directory domain that contains your users and computers from the Where 
pop-up menu.
If the correct directory is already chosen, click the lock to authenticate.
5 Choose the sharing protocol (AFP or NFS) from the Protocol pop-up menu.
6 Choose how you want the share point to be used and mounted on client computers.
User Home Directories:  the home directories on the share point are listed on a user’s 
computer in /Network/Servers (in Servers inside the Network globe in the Finder).
Note:  Share points used for home directories should be named using only US ASCII 
characters. Don’t use multibyte encoding or accented characters.
Shared Applications:  the share point appears on the user’s computer in 
/Network/Applications (in Applications inside the Network globe in the Finder).
Shared Library:  the share point appears in /Network/Library (in Library inside the 
Network globe in the Finder).
“Custom mount path”:  the share point appears in the directory you specify. You must 
make sure that this directory exists on the client computer before the share point can 
be mounted.
7 Click Save.
LL2346.Book  Page 29  Friday, August 22, 2003  2:38 PM
30
Chapter 2    Setting Up Share Points
Managing Share Points
This section describes typical day-to-day tasks you might perform after you have set up 
share points on your server. Initial setup information appears in “Setting Up a Share 
Point” on page 21.
Disabling a Share Point
To stop sharing a particular share point, you use the Sharing module of Workgroup 
Manager to remove it from the Share Points list.
You may want to notify users that you are removing a share point so that they know 
why the share point is no longer available.
To remove a share point:
1 Open Workgroup Manager and click Sharing.
2 Click Share Points and select the share point you want to remove.
3 Click General and deselect “Share this item and its contents.”
Protocol and network mount settings you have made for the item are discarded.
From the Command Line
You can also disable a share point by using the sharing command in Terminal. For 
more information, see the file services chapter of the command-line administration 
guide.
Disabling a Protocol for a Share Point
You can use the Sharing module of Workgroup Manager to stop sharing a share point 
using a particular protocol and still allow sharing to continue via other protocols.
To stop sharing via a particular protocol:
1 Open Workgroup Manager and click Sharing.
2 Click Share Points and select the share point you want to remove.
3 Click Protocols and choose settings for the protocol from the pop-up menu.
4 Deselect “Share this item using...”
You can disable a protocol for all share points by stopping the underlying service that 
provides support for the protocol. For help, see “Stopping Apple File Service” on 
page 45, “Stopping Windows Services” on page 61, “Starting and Stopping NFS Service” 
on page 73, or “Stopping FTP Service” on page 86.
From the Command Line
You can also disable a protocol for a share point by using the sharing command in 
Terminal. For more information, see the file services chapter of the command-line 
administration guide.
LL2346.Book  Page 30  Friday, August 22, 2003  2:38 PM
Chapter 2    Setting Up Share Points
31
Viewing Share Points
You can use the Sharing module of Workgroup Manager to view share points and their 
contents.
To view share points on a server:
1 Open Workgroup Manager and click Sharing.
2 Click Share Points.
Select an item in the list to see its contents. Use the scroll bar at the bottom to move 
up or down in the directory hierarchy.
From the Command Line
You can also view share points and their contents by using the sharing and ls 
commands in Terminal. For more information, see the file services chapter of the 
command-line administration guide.
Copying Privileges to Enclosed Items
When you set the privileges for a share point, volume, or folder, you can copy the 
ownership and privileges to all the items it contains. 
To copy privileges:
1 Open Workgroup Manager and click Sharing.
2 Click Share Points or All, then select the item whose privileges you want to propagate. 
3 Click Copy in the General pane.
Viewing Share Point Settings
You can use Workgroup Manager to view the sharing and privilege settings for a share 
point.
To view sharing and privileges for a share point:
1 Open Workgroup Manager and click Sharing.
2 Click Share Points and select the share point you want to view.
3 Click General to see the privilege settings for the share point.
4 Click Protocols and use the pop-up menu to see the protocol settings for the item.
5 Click Network Mount to see the automatic mount settings.
From the Command Line
You can also view share point settings using the sharing command in Terminal. For 
more information, see the file services chapter of the command-line administration 
guide.
LL2346.Book  Page 31  Friday, August 22, 2003  2:38 PM
32
Chapter 2    Setting Up Share Points
Changing Share Point Owner and Privilege Settings
You use the Workgroup Manager to view and change the owner and privileges for a 
share point.
To change privileges for a share point:
1 Open Workgroup Manager and click Sharing.
2 Click Share Points and select the share point you want to update.
3 Click General.
Change the owner and group of the shared item by typing names into those fields or 
by dragging names from the Users & Groups drawer. You can open the drawer by 
clicking “Users & Groups.”
Use the pop-up menus next to the fields to change the privileges for the Owner, Group, 
and Everyone. Everyone is any user who can log in to the file server:  registered users 
and guests.
From the Command Line
You can also change a share point’s owner and privileges using the chmod, chgrp, and 
chown commands in Terminal. For more information, see the file services chapter of the 
command-line administration guide.
Changing the Protocols Used by a Share Point
You can use the Protocols pane of Workgroup Manager to change the protocols 
available for accessing a share point.
To change the protocols for a share point:
1 Open Workgroup Manager and click Sharing.
2 Click Share Points and select the share point you want to change.
3 Click Protocols.
4 Use the pop-up menu to choose the protocols you want to change.
See the following sections for descriptions of the protocol settings:
• “Changing Apple File Settings for a Share Point” on page 23
• “Changing Windows (SMB) Settings for a Share Point” on page 24
• “Changing FTP Settings for a Share Point” on page 25
• “Setting Up an NFS Share Point” on page 26
From the Command Line
You can also change a share point’s protocol settings using the sharing command in 
Terminal. For more information, see the file services chapter of the command-line 
administration guide.
LL2346.Book  Page 32  Friday, August 22, 2003  2:38 PM
Chapter 2    Setting Up Share Points
33
Changing NFS Share Point Client Scope
You can use the Protocols pane of Workgroup Manager to restrict the clients that can 
access an NFS export.
To change authorized NFS clients:
1 Open Workgroup Manager and click Sharing.
2 Click Share Points and select the NFS share point.
3 Click Protocols and choose NFS Export Settings from the pop-up menu.
4 To limit clients to specific computers, choose Client and click Add to specify the IP 
addresses of computers that can access the share point. To remove a client, select an 
address and click Remove.
To limit clients to the entire subnet, choose Subnet and type the IP address and subnet 
mask for the subnet.
To allow unlimited (and unauthenticated) access to the share point, choose World.
5 Click Save.
Allowing Guest Access to a Share Point
You can use Workgroup Manager to allow guest users (users not defined in the 
directories used by your server) to connect to specific share points.
To change guest access privileges for a share point:
1 Open Workgroup Manager and click Sharing.
2 Click Share Points and select the share point.
3 Click Protocols and use the pop-up menu to choose the protocol you’re using to 
provide access to the share point.
4 Select the “Allow guest access” option.
5 Click Save.
From the Command Line
You can also enable guest access to a share point using the sharing command in 
Terminal. For more information, see the file services chapter of the command-line 
administration guide.
LL2346.Book  Page 33  Friday, August 22, 2003  2:38 PM
34