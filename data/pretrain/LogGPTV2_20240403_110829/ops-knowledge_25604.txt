User: 用SPL写出新安装的Heka主机有哪些
Assistant: 日志易 agent 没有“新安装”的状态。您可以根据自身现状，定义一个时间范围，然后将 agentstatus 中的 create_timestamp 和 now() 做对比过滤。例如，如下语句可以过滤最近一天新安装的 agent：`| rest /agent/ apikey="xxx" sort=create_timestamp fields=ip,create_timestamp | where datetime_diff(now(), parsedate(create_timestamp, "yyyy-MM-dd'T'HH:mm:ss")) < 86400*1000`
此外，您还可以将上述语句的结果，和最近一天已接入日志的来源 IP 地址做关联，过滤新安装 Agent 中，哪些还没有采集日志：
`| rest /agent/ apikey="xxx" sort=create_timestamp fields=ip,create_timestamp | where datetime_diff(now(), parsedate(create_timestamp, "yyyy-MM-dd'T'HH:mm:ss")) < 86400*1000 | join type=left ip [[ starttime="-1d" * | stats first(timestamp) as log_timestamp by ip ]] | where empty(log_timestamp)`