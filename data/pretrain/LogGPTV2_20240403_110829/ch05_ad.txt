如果你的公司拥有数据科学/性能团队，则很可能已经通过数据管道收集和处理真实用户数据。可能会诱使它们增强数据管道，以包括来自资源计时 API 的增强传递详细信息。
确保安全和隐私团队评估你正在考虑使用的 RUM 信标。这一点尤其重要，因为 RUM 可以公开个人身份信息（PII）、Cookie 和 IP 详细信息。这可能违反欧盟一般数据保护条例（GDPR）GDPR 适用于所有外国公司，并将当前针对所有欧盟居民的数据保护法规扩展。你可以在https://www.eugdpr.org找到更多信息。合规规则，自 2018 年 5 月 25 日生效。
同样，下面是一些需要避免的陷阱：同样，下面是一些需要避免的陷阱：
不要重新发明轮子；如果你有一个数据科学团队或其他团队关注 RUM，则它可能已经具有数据管道许多公司在发布-订阅 （pub_sub） 体系结构后使用数据管道进行应用程序间消息传递来触发事件。这些管道通常还用于流数据，如页面视图、应用程序日志或实际用户数据。我们可以利用。同样，Google、亚马逊网络服务 （AWS） 和其他公司也提供消息排队和流式处理的解决方案。
 不要依赖第三方 API 作为监视第三方运行状况的渠道。第三方通常出色地执行他们支付报酬的工作；但是，他们的报告 API 不一定是他们的核心能力。如果您依赖于第三方报告 API，则可能依赖于陈旧或不准确的数据。这是因为数据聚合延迟、处理延迟、数据修剪和数据重新打包以用于发布。相反，我们希望尽可能依赖真实数据，例如可以从日志实时提取的数据。
案例分析案例分析
  许多大型组织使用合成和 RUM 的组合来诊断问题。在 LinkedIn 期间，我的团队负责综合监控，并将测试套件增加了 15 倍，以涵盖所有产品和检测问题。综合监视用于以各种方式识别 CDN 和 DNS 的内容交付问题，是识别配置更改问题的绝佳辅助资源。
工具
  工具是我们第三方集成的关键部分，尤其是在大型组织中。作为负责第三方集成的 SRE，我们希望尽可能避免成为 瓶颈。为此，我们应该构建利用第三方通过 API 提供的一切的系统。这些 API 允许您构建有效管理第三方集成所需的工具，从而促进集成。当使用这些 API 时，我们将需要考虑 AbEx 并避免使用可能创建供应商锁定的自定义功能。我们可以在 CDN 清除 API 中看到这方面的一个示例：一些供应商使用代理密钥，一些供应商使用某种形式的正则表达式，一些供应商使用通配符，有些供应商使用批处理。如果我们需要替换或添加其他供应商的解决方案，则这些实现中的任何一个都可能导致问题。进一步消除我们作为瓶颈，我们希望避免任何需要我们在访问控制中发挥作用的集成。管理每个工程师对供应商门户的访问过于繁琐，并可能导致安全问题和技术债务。
最后，当我们围绕供应商的 API 创建工具时，我们考虑放弃至关重要。尝试维护模块化体系结构以支持各种第三方。如果第三方供应商需要更换，此抽象层允许其他提供程序和可交换性。
案例分析
多年来，LinkedIn与 6 家 CDN 和 3 家 DNS 提供商合作。为了防止成为瓶颈，我们实施了一些工具，允许在所有提供商之间统一实现繁琐的手动流程。内容清除、DNS 记录更改和报告数据等任务通过集中式系统处理。请求被抽象和数据规范化，以最大化每个提供程序之间的实现。
自动化
  作为工具的扩展，我们希望能够尽可能自动化第三方解决方案的某些功能。这里的可能性是无穷无尽的，完全取决于您如何利用第三方的 API。为了让你了解我们可以做什么，让我们看一下以下示例：在帐户关闭时自动删除内容
当用户关闭其帐户时，将适用某些隐私法律，并要求删除用户 PII。因此，可以利用公司的数据管道（或类似的消息队列）来识别此类事件，从而自动执行信息删除过程。对于符合 GDPR 要求，这是必需的。
自动化数据中心/端点选择
如果关键服务在某个终结点失效，我们可以使用 DNS API 来引导流量远离受影响的终结点。
自动续订证书
如果证书已准备好过期，你可以轻松地使用 CA 的 API 将证书重新安装到终结点，而不是依赖手动干预或中断。
日志
     第三方报告 API 通常不太好。 通常，我们通过 API 轮询收到的报告数据会被汇总，处理和清理。 汇总延迟在 API 轮询中很常见，因此不一定用于引发警报。 作为 SRE，我们需要知道现在发生的事情，而不是 15 分钟前发生的事情。为此，第三方集成通常被视为黑匣子，对其运行几乎没有可见性。但时代已经改变。许多第三方提供包含各种有用数据的实时数据馈送；CDN 为每个对象提供分发收据；DNS 提供程序提供查询数据；而综合监控提供程序提供粒度测试数据。
所有这些可用数据的好处是，我们能够按照我们所认为的合适的功能构建这些数据。但是，这也是一个风险。仅仅因为我们有数据并不意味着它是完全有用的。当我们利用实时日志记录数据时，我们需要确保我们利用我们需要的来补充我们的监视，并提供跟踪问题的方法。例如，CDN 日志可以包括浏览器类型、扩展详细信息、客户端 IP 详细信息、Cookie 和其他请求标头。对于大多数应用程序（如 HTTP 响应代码的区域隔离）来说，这在很大程度上是不必要的。
最后，日志记录可能非常昂贵。不仅有些供应商对交付此数据收费，还负责消耗、索引、处理和保留这些数据。这本身可能是一项大工程，你应该谨慎对待它。
灾害规划灾害规划
  尽管我们不愿意考虑，但与第三方供应商合作会带来一定的风险。作为我们的工作手册的一部分，我们将需要考虑在供应商彻底崩溃时要做什么。灾难规划应包括将第三方全部撤职的考虑因素。你可能必须考虑以下因素：
维护其他（作为活动或备用）供应商
有能力自己为请求提供服务
排队请求，稍后处理
测换 CDN 可能需要我们接受一定量的延迟。在停止付款时可能需要一种乐观的方法，以确保良好的客户体验。很多人可能不容易注意到欢迎邮件或付款收据邮件的一些延迟。记住，慢总比倒下好。
通讯
  使用第三方集成时，不要生活在孤岛中非常重要。与解决方案或销售工程师交谈实际上有助于你讨论产品增强功能、发现未知或未充分利用的功能、了解其产品路线图以及为将来的活动（如产品）做好准备释放。此外，保持双向通信以调整优先级也是值得的。第三方供应商应属于保密协议；因此，沟通任何可能改变关系的项目是很有帮助的。建立常规通话节奏可能很有用，但可能不是所有 SRE 都适用。通常，这些通话非常繁琐，非常耗时，并且可能会与生产问题发生冲突。此外，还需要一些组织，尤其是在与多个供应商合作时。为此，通常最好与项目经理或类似的人员合作，他们可以帮助安排会议并保留详细的笔记。项目经理的支持将帮助你使供应商与团队和公司的优先事项保持一致。
退役
  当需要停用服务时，我们会考虑所有依赖项。与第三方打交道也是如此。我们显然需要考虑删除工具、服务监视、警报和数据收集服务/终结点。此外，我们不得不考虑在集成中发挥作用的其他一些依赖项。
有时，终止并不是说一句话那么简单。终止条款通常在服务协议中说明。如果你出于财务原因决定终止合同，则可以在终止合同之前进行谈判。 在这些情况下，在评估包含最惠者客户（MFC）条款的合同时，请谨慎使用，因为这些条款通常使谈判更好的交易变得更加困难。某些协议还允许在合同结束日期之前进行自动续订。你的法律和采购团队可能阻止了这种情况，但查看合同并与其讨论终止合同非常重要。沟通显然在第三方集成的采购和持续关系中发挥了作用。   在合同终止期间，沟通更加关键。例如，如果第三方未满足 SLA，但从未被告知，则对该供应商而言，这不一定公平，而且对第三方销售团队而言，成本可能很高。
科技行业规模很小，一个糟糕的分手故事会困扰你和你的公司。这些故事可以在你未来的集成尝试中发挥作用。销售组织会记住哪些客户最难合作，销售人员在公司之间流动，尤其是在同一行业中。在退役过程中未明确沟通会玷污声誉，使未来关系复杂化。
避免这种情况的最佳方法是在结束日期之前提前四分之一时间传达终止第三方合作的意图。这使第三方销售团队有机会纠正集成生命周期中可能存在的任何问题。我们用钱来投票。失去足够大的客户可以激励第三方证明自己。
总结想法
许多 SRE 认为，从第三方解决方案的角度和从知识挑战和职业路径的角度来看，使用第三方解决方案是令人失望的。我们不仅希望通过构建自己的内部解决方案来解决大问题，而且经常鼓励我们这样做，以推进我们的职业发展。但是，定制解决方案不一定符合我们公司或最终用户的最佳利益。很多时候，购买的选择提供与构建或采用选择面临一样多的挑战。我们应该将自己的看法进行调整，从它会妨碍我们创造力的观念转向拥抱第三方解决方案，进一步考虑第三方解决方案如何在最终用户体验和站点可靠性中发挥作用。
在我们结束操作时，你应该学到以下几点：
第三方是你的技术堆栈的扩展，而不是辅助。
如果它是关键路径，请将其视为服务。
考虑在生命周期内放弃某个集成。
第三方集成的质量取决于 良好的沟通。    
编者介绍
Jonathan Mercereau 的职业生涯一直领导着团队，并与 DNS、CDN、证书颁发机构、合成监控领域最大的参与者合作，构建弹性、容错和可执行的解决方案。你很可能体验过他的工作成果，从 Netflix 的多 CDN 和优化流算法到 LinkedIn 的多供应商解决方案和性能增强。2016 年，Jonathan 共同创立了 SaaS 初创公司traffiq，将大公司的流量工程最佳实践、编排和自动化带给更广泛的受众。