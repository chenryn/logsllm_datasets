Action
• To display the ETH-DM statistics collected for MEPs belonging to MA ma1 and within MD md1:
user@host> show oam ethernet connectivity-fault-management delay-statistics maintenance-
domain md1 maintenance-association ma1
SEE ALSO
show oam ethernet connectivity-fault-management delay-statistics
Clearing Continuity Measurement Statistics
IN THIS SECTION
Purpose | 257
Action | 257
Purpose
Clear the continuity measurement statistics
By default, statistics are deleted for all MEPs attached to CFM-enabled interfaces on the router.
However, you can filter the scope of the command by specifying an interface name.
Action
• To clear the continuity measurement statistics for all MEPs attached to CFM-enabled interfaces on
the router:
user@host> clear oam ethernet connectivity-fault-management continuity-measurement
maintenance-domain md-name maintenance-association ma-name local-mep local-mep-id remote-mep
remote-mep-id
258
SEE ALSO
clear oam ethernet connectivity-fault-management continuity-measurement
RELATED DOCUMENTATION
clear oam ethernet connectivity-fault-management continuity-measurement
show oam ethernet connectivity-fault-management delay-statistics
Viewing Ethernet Frame Delay Measurements Statistics
Once Ethernet frame delay measurement statistics have been collected, they can be displayed.
To retrieve the last 100 Ethernet frame delay measurement statistics per remote MEP or per CFM
session, two types of show commands are provided:
• For all OAM frame counters and Ethernet frame delay measurement statistics
• For Ethernet frame delay measurement statistics only
To retrieve all Ethernet frame delay measurement statistics for a given session, use the show oam ethernet
connectivity-fault-management mep-statistics maintenance-domain name maintenance-association name [local-mep
identifier] [remote-mep identifier] [count count] command.
To retrieve only Ethernet frame delay measurement statistics for a given session, use the show oam ethernet
connectivity-fault-management delay-statistics maintenance-domain name maintenance-association name [local-mep
identifier] [remote-mep identifier] [count count] command.
NOTE: The only difference in the two commands is the use of the mep-statistics and delay-
statistics keyword.
The fields for these commands are described in Table 16 on page 258.
Table 16: Show Ethernet Delay Command Parameters
Parameter Parameter Range Description
maintenance-domain name Existing MD name Specifies an existing maintenance domain (MD) to use.
maintenance-association Existing MA identifier Specifies an existing maintenance association (MA)
identifier to use.
ma-id
259
Table 16: Show Ethernet Delay Command Parameters (Continued)
Parameter Parameter Range Description
local-mep identifier 1–8191 When a MEP has been specified, display statistics only for
the local MEP.
remote-mep identifier 1–8191 When a MEP has been specified, display statistics only for
the discovered MEP.
count count 1–100 (default:100) The number of entries to display in the results table. By
default, all 100 entries are displayed if they exist.
NOTE: For each MEP, you will see frame counters for sent and received Ethernet frame delay
measurement frames whenever MEP statistics are displayed.
SEE ALSO
Configure a MEP to Generate and Respond to CFM Protocol Messages | 35
Managing ETH-DM Statistics and ETH-DM Frame Counts
IN THIS SECTION
Displaying ETH-DM Statistics Only | 260
Displaying ETH-DM Statistics and Frame Counts | 261
Displaying ETH-DM Frame Counts for MEPs by Enclosing CFM Entity | 262
Displaying ETH-DM Frame Counts for MEPs by Interface or Domain Level | 263
Clearing ETH-DM Statistics and Frame Counts | 264
260
Displaying ETH-DM Statistics Only
IN THIS SECTION
Purpose | 260
Action | 260
Purpose
Display ETH-DM statistics.
By default, the show oam ethernet connectivity-fault-management delay-statistics command displays ETH-DM
statistics for MEPs in the specified CFM maintenance association (MA) within the specified CFM
maintenance domain (MD).
Action
• To display the ETH-DM statistics collected for MEPs belonging to MA ma1 and within MD md1:
user@host> show oam ethernet connectivity-fault-management delay-statistics maintenance-
domain ma1 maintenance-association ma1
• To display the ETH-DM statistics collected for ETH-DM sessions for the local MEP 201 belonging to
MA ma2 and within MD md2:
user@host> show oam ethernet connectivity-fault-management delay-statistics maintenance-
domain md2 maintenance-association ma2 local-mep 201
• To display the ETH-DM statistics collected for ETH-DM sessions from local MEPs belonging to
MA ma3 and within MD md3 to remote MEP 302:
user@host> show oam ethernet connectivity-fault-management delay-statistics maintenance-
domain md3 maintenance-association ma3 remote-mep 302
261
SEE ALSO
show oam ethernet connectivity-fault-management delay-statistics
Displaying ETH-DM Statistics and Frame Counts
IN THIS SECTION
Purpose | 261
Action | 261
Purpose
Display ETH-DM statistics and ETH-DM frame counts.
By default, the show oam ethernet connectivity-fault-management mep-statistics command displays ETH-DM
statistics and frame counts for MEPs in the specified CFM maintenance association (MA) within the
specified CFM maintenance domain (MD).
Action
• To display the ETH-DM statistics and ETH-DM frame counts for MEPs in MA ma1 and within MD md1:
user@host> show oam ethernet connectivity-fault-management mep-statistics maintenance-domain
md1 maintenance-association ma1
• To display the ETH-DM statistics and ETH-DM frame counts for the local MEP 201 in MA ma2 and
within MD md2:
user@host> show oam ethernet connectivity-fault-management mep-statistics maintenance-domain
md2 maintenance-association ma2 local-mep 201
262
• To display the ETH-DM statistics and ETH-DM frame counts for the local MEP in MD md3 and within
MA ma3 that participates in an ETH-DM session with the remote MEP 302:
user@host> show oam ethernet connectivity-fault-management mep-statistics maintenance-domain
ma3 maintenance-association ma3 remote-mep 302
SEE ALSO
show oam ethernet connectivity-fault-management mep-statistics
Displaying ETH-DM Frame Counts for MEPs by Enclosing CFM Entity
IN THIS SECTION
Purpose | 262
Action | 263
Purpose
Display ETH-DM frame counts for CFM maintenance association end points (MEPs).
By default, the show oam ethernet connectivity-fault-management mep-database command displays CFM database
information for MEPs in the specified CFM maintenance association (MA) within the specified CFM
maintenance domain (MD).
NOTE: At the router attached to the initiator MEP for a one-way session, or at the router
attached to the receiver MEP for a two-way session, you can only display ETH-DM frame counts.
263
Action
• To display CFM database information (including ETH-DM frame counts) for all MEPs in MA ma1 within
MD md1:
user@host> show oam ethernet connectivity-fault-management mep-database maintenance-domain
ma1 maintenance-association ma1
• To display CFM database information (including ETH-DM frame counts) only for local MEP 201 in
MA ma1 within MD md1:
user@host> show oam ethernet connectivity-fault-management mep-database maintenance-domain
md2 maintenance-association ma2 local-mep 201
• To display CFM database information (including ETH-DM frame counts) only for remote MEP 302 in
MD md3 within MA ma3:
user@host> show oam ethernet connectivity-fault-management mep-database maintenance-domain
ma3 maintenance-association ma3 remote-mep 302
SEE ALSO
show oam ethernet connectivity-fault-management mep-database
Displaying ETH-DM Frame Counts for MEPs by Interface or Domain Level
IN THIS SECTION
Purpose | 263
Action | 264
Purpose
Display ETH-DM frame counts for CFM maintenance association end points (MEPs).
264
By default, the show oam ethernet connectivity-fault-management interfaces command displays CFM database
information for MEPs attached to CFM-enabled Ethernet interfaces on the router or at a maintenance
domain level. For Ethernet interfaces that support ETH-DM, any frame counts are also displayed when
you specify the detail or extensive command option.
NOTE: At the router attached to the initiator MEP for a one-way session, or at the router
attached to the receiver MEP for a two-way session, you can only display ETH-DM frame counts.
Action
• To display CFM database information (including ETH-DM frame counts) for all MEPs attached to
CFM-enabled Ethernet interfaces on the router:
user@host> show oam ethernet connectivity-fault-management interfaces detail
• To display CFM database information (including ETH-DM frame counts) only for the MEPs attached
to CFM-enabled router interface ge-5/2/9.0:
user@host> show oam ethernet connectivity-fault-management interfaces ge-5/2/9.0 detail
• To display CFM database information (including ETH-DM frame counts) only for MEPs enclosed
within CFM maintenance domains (MDs) at level 6:
user@host> show oam ethernet connectivity-fault-management interfaces level 6 detail
SEE ALSO
show oam ethernet connectivity-fault-management interfaces
Clearing ETH-DM Statistics and Frame Counts
IN THIS SECTION
Purpose | 265
265
Action | 265
Purpose
Clear the ETH-DM statistics and ETH-DM frame counts.
By default, statistics and frame counts are deleted for all MEPs attached to CFM-enabled interfaces on
the router. However, you can filter the scope of the command by specifying an interface name.
Action
• To clear the ETH-DM statistics and ETH-DM frame counts for all MEPs attached to CFM-enabled
interfaces on the router:
user@host> clear oam ethernet connectivity-fault-management statistics
• To clear the ETH-DM statistics and ETH-DM frame counts only for MEPs attached to the logical
interface ge-0/5.9.0:
user@host> clear oam ethernet connectivity-fault-management statistics ge-0/5/9.0
SEE ALSO
clear oam ethernet connectivity-fault-management statistics
RELATED DOCUMENTATION
clear oam ethernet connectivity-fault-management statistics
show oam ethernet connectivity-fault-management delay-statistics
show oam ethernet connectivity-fault-management interfaces
show oam ethernet connectivity-fault-management mep-statistics
show oam ethernet connectivity-fault-management mep-database
266
RELATED DOCUMENTATION
Configure an Iterator Profile | 305
Configure Ethernet Synthetic Loss Measurements | 324
Ethernet Alarm Indication | 341
Inline Transmission Mode | 356
Configuring MEP Interfaces to Support Ethernet Frame Delay
Measurements
Ethernet frame delay measurement is a useful tool for providing performance statistics or supporting or
challenging Service Level Agreements (SLAs). By default, Ethernet frame delay measurement uses
software for timestamping and delay calculations. You can optionally use hardware timing to assist in
this process and increase the accuracy of the delay measurement results. This assistance is available on
the reception path.
Before you can perform Ethernet frame delay measurements on MX Series routers, you must have done
the following:
• Configured Ethernet OAM and CFM correctly
• Prepared the measurement between two compatibly configured MX Series routers
• Enabled the distributed periodic packet management daemon (ppmd)
• Avoided trying to perform Ethernet frame delay measurement on aggregated Ethernet or pseudowire
interfaces, which are not supported
• Made sure the hardware-assisted timestamping is supported if that feature is configured
At the end of this configuration, you create two MX Series routers that can perform and display
Ethernet frame delay measurements on Ethernet interfaces using optional hardware timestamping. By
default, Ethernet frame delay measurement uses software for timestamping and delay calculations. You
can optionally use hardware timing to assist in this process and increase the accuracy of the delay
measurement results. This assistance is available on the reception path.
To configure hardware-assisted timestamping:
267
1. To enable Ethernet frame delay measurement hardware assistance on the reception path, include the
hardware-assisted-timestamping statement at the [edit protocols oam ethernet connectivity-fault-management
performance-monitoring] hierarchy level:
[edit]
protocols {
oam {
ethernet {
connectivity-fault-management {
performance-monitoring {
hardware-assisted-timestamping; # Enable timestamping in hardware.
}
}
}
}
2. Ethernet frame delay measurement requires that distributed PPMD is enabled. Before you can gather
statistics for Ethernet frame delay measurement, you must make sure that PPMD is configured
properly. Without distributed PPMD, delay measurement results are not valid.
To perform Ethernet frame delay measurement, make sure that the following configuration statement
is NOT present:
[edit routing-options]
ppm {
no-delegate-processing; # This turns distributed PPMD OFF.
}
RELATED DOCUMENTATION
Ethernet Frame Delay Measurements Overview | 205
Triggering an Ethernet Frame Delay Measurements Session | 239
Viewing Ethernet Frame Delay Measurements Statistics | 258
Example: Configuring One-Way Ethernet Frame Delay Measurements with Single-Tagged Interfaces |
244
Example: Configuring One-Way Ethernet Frame Delay Measurements with Single-Tagged Interfaces |
244
Configuring ETH-DM with Untagged Interfaces
268
Configure Ethernet Frame Loss Measurement
IN THIS SECTION
Configuring Statistical Frame Loss Measurement for VPLS Connections | 268
Managing ETH-LM Statistics | 269
Example: Measuring Ethernet Frame Loss for Single-Tagged LMM/LMR PDUs | 272
Example: Measuring Ethernet Frame Loss for Dual-Tagged LMM/LMR PDUs | 288
Use this topic to understand more about frame loss measurement and how to configure frame loss
measurement.
Currently, loss measurement is not available for Multi-LU cards (MPC3E and MPC4E), and there are no
command line interface restrictions for configuration.
Configuring Statistical Frame Loss Measurement for VPLS Connections
Using proactive statistical frame loss measurement, you can monitor VPLS connections on MX Series
routers . Statistical frame loss measurement allows you to monitor the quality of Ethernet connections
for service level agreements (SLAs). Point-to-point and multipoint-to-multipoint connections configured
on MX Series routers can be monitored by registering the connection on an iterator and initiating
periodic SLA measurement of frame transmissions on the connections.
Iterators periodically transmit SLA measurement packets using ITU-Y.1731 compliant frames. The
iterator sends periodic measurement packets for each of the connections registered to it. These
measurement cycles are transmitted in such a way as to not overlap, reducing the processing demands
placed on the CPU. The measurement packets are exchanged between the source user network
interface (UNI) port and the destination UNI port, providing a sequence of timed performance
measurements for each UNI pair. The Frame Loss Ratio (FLR) and connection availability can be
computed from these measurements using statistics.
The following steps outline how to configure statistical frame loss measurement for VPLS connections:
1. To configure proactive ETH-DM measurement for a VPLS connection, see "Guidelines for
Configuring Routers to Support an ETH-DM Session" on page 224.
2. To enable statistical loss measurement for a VPLS connection, configure an iterator for the VPLS
connection using the sla-iterator-profiles statement at the [edit protocols oam ethernet connectivity-
fault-management performance-monitoring] hierarchy level. For detailed instructions, see "Configuring an
Iterator Profile" on page 306.
269
3. As part of the iterator configuration, include the statistical-frame-loss option for the measurement-
type statement at the [edit protocols oam ethernet connectivity-fault-management performance-monitoring sla-
iterator-profiles profile-name] hierarchy level.
4. Once you have enabled the iterator, you can display the statistical frame loss for a VPLS connection
by issuing the show oam ethernet connectivity-fault-management sla-iterator-statistics sla-iterator identifier
maintenance-domain name maintenance-association name local-mep identifier remote-mep identifier command.
SEE ALSO
Configuring an Iterator Profile | 306
Verifying the Configuration of an Iterator Profile | 309
Managing ETH-LM Statistics
IN THIS SECTION
Displaying ETH-LM Statistics | 269
Clearing ETH-LM Statistics | 271
Displaying ETH-LM Statistics
IN THIS SECTION
Purpose | 269
Action | 270
Purpose
Display the ETH-LM statistics.
By default, the show oam ethernet connectivity-fault-management loss-statistics maintenance-domain md-name
maintenance-association ma-name command displays ETH-LM statistics for MEPs in the specified CFM
maintenance association (MA) within the specified CFM maintenance domain (MD).
270
The following list consists of the CFM-related operational mode commands that have been enhanced to
display ETH-LM statistics:
• The show oam ethernet connectivity-fault-management interfaces detail command is enhanced to display
ETH-DM and ETH-LM statistics for MEPs in the specified CFM maintenance association (MA) within
the specified CFM maintenance domain (MD).
• The show oam ethernet connectivity-fault-management mep-statistics command is enhanced to display ETH-
DM and ETH-LM statistics and frame counts for MEPs in the specified CFM maintenance association
(MA) within the specified CFM maintenance domain (MD).
• The show oam ethernet connectivity-fault-management mep-database command is enhanced to display ETH-
DM and ETH-LM frame counters for MEPs in the specified CFM maintenance association (MA)
within the specified CFM maintenance domain (MD).
Action
• To display the ETH-LM statistics for all MEPs attached to CFM-enabled interfaces on the router:
user@host> show oam ethernet connectivity-fault-management loss-statistics
• To display the ETH-DM statistics collected for MEPs belonging to MA ma1 and within MD md1:
user@host> show oam ethernet connectivity-fault-management delay-statistics maintenance-
domain md1 maintenance-association ma1
• To display the ETH-DM statistics and ETH-DM frame counts for MEPs in MA ma1 and within MD md1:
user@host> show oam ethernet connectivity-fault-management mep-statistics maintenance-domain
md1 maintenance-association ma1
• To display CFM database information (including ETH-DM frame counts) for all MEPs in MA ma1 within
MD md1:
user@host> show oam ethernet connectivity-fault-management mep-database maintenance-domain
md1 maintenance-association ma1
271
SEE ALSO
clear oam ethernet connectivity-fault-management loss-statistics
show oam ethernet connectivity-fault-management delay-statistics
show oam ethernet connectivity-fault-management interfaces
show oam ethernet connectivity-fault-management mep-statistics
show oam ethernet connectivity-fault-management mep-database
show oam ethernet connectivity-fault-management loss-statistics
Clearing ETH-LM Statistics
IN THIS SECTION
Purpose | 271
Action | 271
Purpose
Clear the ETH-LM statistics.
By default, statistics are deleted for all MEPs attached to CFM-enabled interfaces on the router.
However, you can filter the scope of the command by specifying an interface name.
Action
• To clear the ETH-LM statistics for all MEPs attached to CFM-enabled interfaces on the router:
user@host> clear oam ethernet connectivity-fault-management loss-statistics
SEE ALSO
clear oam ethernet connectivity-fault-management loss-statistics
272
RELATED DOCUMENTATION
Managing ETH-DM Statistics and ETH-DM Frame Counts | 259
Example: Measuring Ethernet Frame Loss for Single-Tagged LMM/LMR PDUs
IN THIS SECTION
Requirements | 272
Overview and Topology | 272
Configuration | 273
Verification | 286
This example illustrates how to configure Ethernet frame loss measurement (ETH-LM) for single-tagged
Loss Measurement Message (LMM)/Loss Measurement Reply (LMR) protocol data units (PDUs). By
configuring ETH-LM, you can measure the Ethernet frame loss that occur in your network.
Requirements
This example uses the following hardware and software components: