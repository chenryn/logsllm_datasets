title:Toward a Measurement-Based Geographic Location Service
author:Artur Ziviani and
Serge Fdida and
Jos&apos;e Ferreira de Rezende and
Otto Carlos Muniz Bandeira Duarte
Toward a Measurement-Based Geographic
Location Service
Artur Ziviani1,2, Serge Fdida1, Jos´e F. de Rezende2, and
Otto Carlos M.B. Duarte2
1 Laboratoire d’Informatique de Paris 6 (LIP6)
Universit´e Pierre et Marie Curie (Paris 6)
{Artur.Ziviani,Serge.Fdida}@lip6.fr
Paris, France
2 Grupo de Teleinform´atica e Automa¸c˜ao (GTA)
COPPE/Poli – Universidade Federal do Rio de Janeiro
Rio de Janeiro, Brazil
{rezende,otto}@gta.ufrj.br
Abstract. Location-aware applications require a geographic location
service of Internet hosts. We focus on a measurement-based service for
the geographic location of Internet hosts. Host locations are inferred by
comparing delay patterns of geographically distributed landmarks, which
are hosts with a known geographic location, with the delay pattern of
the target host to be located. Results show a signiﬁcant correlation be-
tween geographic distance and network delay that can be exploited for
a coarse-grained geographic location of Internet hosts.
1 Introduction
Location-aware applications take into account where the users are accessing
from and thereby can oﬀer novel functionalities in the Internet. Examples of
these novel location-aware applications are: targeted advertising on web pages,
automatic selection of a language to ﬁrst display the content, accounting the
incoming users based on their positions, restricted content delivery following re-
gional policies, and authorization of transactions only when performed from pre-
established locations. In peer-to-peer networks, location-aware construction of
overlay networks can avoid unnecessary high latency hops, thus improving rout-
ing performance [1]. Multimedia delivery systems, such as Content Distribution
Networks (CDNs), can also beneﬁt from knowing the location of their clients [2].
For example, beneﬁts include the indication of close servers to clients or the
adaptation of multimedia content based on the location of clients. Lakhina et
al. [3] investigate the geographic location of Internet components to create a
base for the development of geographically-driven topology generation methods.
In the current Internet, however, there is no direct relationship between a host
identiﬁcation and its physical location. The novel location-aware applications
then require the deployment of a geographic location service for Internet hosts.
C. Barakat and I. Pratt (Eds.): PAM 2004, LNCS 3015, pp. 43–52, 2004.
c(cid:1) Springer-Verlag Berlin Heidelberg 2004
44
A. Ziviani et al.
We focus on a measurement-based geographic location service of Internet
hosts to support location-aware applications. We build upon GeoPing [4] that
adopts an empirical approach based on the observation that hosts sharing sim-
ilar delays to other ﬁxed hosts tend to be near each other geographically. In a
previous work [5], we have evaluated diﬀerent similarity models to compare the
delay patterns gathered from diﬀerent reference hosts. In this paper, we carry
out live experiments to evaluate the correlation between geographic distance and
network delay as well as the achieved distance accuracy. Our ﬁndings indicate
that contrary to conventional wisdom there is a signiﬁcant level of correlation
between distance and delay. This correlation becomes stronger as connectivity
within the network becomes richer. Moreover, such a correlation can be exploited
to perform a coarse-grained geographic location of Internet hosts.
This paper is organized as follows. Section 2 brieﬂy reviews schemes to de-
termine the geographic location of Internet hosts. In Section 3, we formalize
the measurement-based geographic location of Internet hosts. We introduce the
adopted measures of similarity in Section 4. Section 5 presents our experiments
and results. Finally, in Section 6 we conclude and discuss future work.
2 Related Work
A DNS-based approach to provide a geographic location service of Internet hosts
is proposed in RFC 1876 [6]. Nevertheless, the adoption of the DNS-based ap-
proach is restricted since it requires changes in the DNS records and admin-
istrators have no motivation to register new location records. Tools such as
IP2LL [7] and NetGeo [8] query Whois databases in order to obtain the location
information recorded therein to infer the geographic location of a host. Such
an information, however, may be inaccurate and stale. Moreover, if a large and
geographically dispersed block of IP addresses is allocated to a single entity, the
Whois databases may contain just a single entry for the entire block. As a con-
sequence, a query onto the Whois databases provides the registered location of
the entity that controls the block of IP addresses, although the concerned hosts
may be geographically dispersed.
Padmanabhan and Subramanian [4] investigate three important techniques
to infer the geographic location of an Internet host. The ﬁrst technique infers the
location of a host based on the DNS name of the host or another nearby node.
This technique is the base of GeoTrack [4], VisualRoute [9], and GTrace [10].
Quite often network operators assign names to routers that have some geo-
graphic meaning, presumably for administrative convenience. For example, the
name bcr1-so-2-0-0.Paris.cw.net indicates a router located in Paris, France.
Nevertheless, not all names contain an indication of location. Since there is no
standard, operators commonly develop their own rules for naming their routers
even if the names are geographically meaningful. Therefore, the parsing rules to
recognize a location from a node name must be speciﬁc to each operator. The
creation and management of such rules is a challenging task as there is no stan-
dard to follow. As the position of the last recognizable router in the path toward
Toward a Measurement-Based Geographic Location Service
45
the host to be located is used to estimate the position of such a host, a lack of
accuracy is also expected. The second technique splits the IP address space into
clusters such that all hosts with an IP address within a cluster are likely to be co-
located. Knowing the location of some hosts in the cluster and assuming they are
in agreement, the technique infers the location of the entire cluster. An example
of such a technique is GeoCluster [4]. This technique, however, relies on informa-
tion that is partial and possibly inaccurate. The information is partial because
it comprises location information for a relatively small subset of the IP address
space. Moreover, such an information may be inaccurate because the databases
rely on data provided by users, which may be unreliable to provide correct loca-
tion information. The third technique is based on delay measurements and the
exploitation of a possible correlation between geographic distance and network
delay. Such a technique is the base of GeoPing [4]. The location estimation of a
host is based on the assumption that hosts with similar network delays to some
ﬁxed probe machines tend to be located near each other. Therefore, given a set
of landmarks with a well known geographic location, the location estimation for
a target host to be located is the location of the landmark presenting the most
similar delay pattern to the one observed for the target host.
3 Measurement-Based Geographic Location Service
We formalize the problem of inferring a host location from delay measure-
ments as follows. Consider a set L = {L1, L2, . . . , LK} of K landmarks. Land-
marks are reference hosts with a well known geographic location. Consider a
set P = {P1, P2, . . . , PN} of N probe machines. Fig. 1 illustrates the steps in
inferring a host location from delay measurements, which are detailed along
this section. The probe machines periodically determine the network delay,
which is actually the minimum RTT of several measurements, to each land-
mark (Fig. 1(a)). Therefore, each probe machine Px ∈ P keeps a delay vector
dx = [d1x, d2x, . . . , dKx]T , where dix is the delay between the probe machine Px
and the landmark Li ∈ L. Suppose one wants to determine the geographic loca-
tion of a given target host T . A location server that knows the landmark set L and
the probe machine set P is then contacted. The location server asks the N probe
machines to measure the delay to host T (Fig. 1(b)). Each probe machine Px ∈ P
returns to the location server a delay vector d(cid:2)
x = [d1x, d2x, . . . , dKx, dT x]T , i.e.,
the delay vector dx plus the just measured delay to host T (Fig. 1(c)). After
receiving the delay vectors from the N probe machines, the location server is
able to construct a delay matrix D with dimensions (K + 1) × N:
d11 d12 . . . d1N
d21 d22 . . . d2N
...
...
dK1 dK2 . . . dKN
dT 1 dT 2 . . . dT N
...
...
D =
(1)
46
A. Ziviani et al.
P
1
L
1
P
2
P
1
L
1
T
P
1
L
1
T
P
1
L
1
T
T
T
P
2
Delay_P1
P
2
P
2
Location
Estimation
L
2
Location
Server
L
3
L
2
Location
Server
L
3
L
2
Delay_P2
Location
Server
L
3
L
2
Location
Server
L
3
(a)
(b)
(c)
(d)
Fig. 1. Inferring a host location from delay measurements.
The delay vectors gathered by the demanding location server from the probe
machines correspond to the columns of the delay matrix D. The location server
then compares the lines of the delay matrix D to estimate the location of host T .
The delay matrix D combined with the knowledge of the location of the land-
marks of the set L compose a delay map recording the relationship between
network delay and geographic location.
4 Measuring the Similarity between Delay Patterns
In this section, we investigate how to best measure the similarity between the
delay pattern of each landmark and the one observed for the target host. The
delay patterns result from the partial viewpoints gathered by the distributed
probe machines. The landmark that presents the most similar delay pattern
with respect to the one of the target host provides the location estimation of
that host. Measuring the similarity of the concerned delay patterns is thus a key
point for the accuracy of the host location from delay measurements.
The function S(x, y) is deﬁned to measure the degree of dissimilarity between
two delay patterns x and y of size N, where N is the number of adopted probe
machines. These delay patterns are gathered by the probe machines from each
landmark and from the target host to be located. To formalize the dissimilarity
evaluation, we also deﬁne a line vector 1i of size K + 1 that has all elements
equal to 0, except for the ith element that has a value of 1. The landmark L that
provides the location estimation of the target host T is the landmark that gives
the minimum dissimilarity
Smin = arg min
i=1,... ,K
S(1iD, 1K+1D).
(2)
We ﬁrst consider distance-based measures of dissimilarity [11] to compare
delay patterns. The generalized form to represent a distance metric is given by
Toward a Measurement-Based Geographic Location Service
47
Sγ(x, y) =
(cid:9) 1
γ
|xi − yi|γ
(cid:7)
N(cid:8)
i=1
,
γ > 0.