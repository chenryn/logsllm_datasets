d
a
e
h
r
e
v
O
e
a
S
k
n
L
t
t
i
.
g
v
A
5
Fast HELLO (100 ms)
EI-HELLO (Link State)
EI-HELLO (LS+HBeat)
Slow HELLO (5s)
25
20
15
10
)
d
n
o
c
e
s
r
e
p
s
e
g
a
s
s
e
M
(
d
a
e
h
r
e
v
O
e
a
S
k
n
L
t
t
i
.
g
v
A
5
Fast HELLO (100 ms)
EI-HELLO (Link State)
EI-HELLO (LS+HBeat)
Slow HELLO (5s)
25
20
15
10
)
d
n
o
c
e
s
r
e
p
s
e
g
a
s
s
e
M
(
d
a
e
h
r
e
v
O
e
a
S
k
n
L
t
t
i
.
g
v
A
5
0
100 200 300 400 500 600 700 800 900 1000
0
100 150 200 250 300 350 400 450 500
0
1
HELLO interval (milliseconds)
Heartbeat interval (milliseconds)
2
3
4
5
6
7
8
9
10
Green setting (Red = Green x 2)
(a)
(b)
(c)
Figure 5. Effect of EI-HELLO settings on message overhead - link failure - small network - (a) HELLO
interval, (b) heartbeat interval, (c) green parameter setting
Proceedings of the International Conference on Dependable Systems and Networks (DSN’02) 
0-7695-1597-5/02 $17.00 © 2002 IEEE 
Authorized licensed use limited to: Tsinghua University. Downloaded on March 19,2021 at 04:14:40 UTC from IEEE Xplore.  Restrictions apply. 
8
would require vast amounts of computational resources.
Multicast packets were selected as the effect of faults on
route-pinned multicast is signiﬁcantly higher than unicast-
ing.
In our simulations, we deﬁne a packet loss at a multicast
receiver to be the following:
At the moment that a receiver transmits a Join-Accept
messages (ofﬁcially joins the multicast group), any gap in
packet sequence number is considered to be a loss until the
receiver leaves the group.
As a result, the failure of speciﬁc nodes or links may
result in fairly high packet losses. For instance, if the
link to an edge node fails and the node attempts to join
to a group, packets are still considered lost even though
there is not a feasible path from the ingress node to the
egress node. Although this results in a higher loss rate,
we feel this deﬁnition of loss rate is appropriate to mea-
sure the impact of loss from the perspective of the end user.
In order to better quantify the impact of the models, the
Packet-over-SONET is used as a baseline as fault detection
is near-instantaneous. Thus, any loss beyond that achieved
by Packet-over-SONET represents the additional loss intro-
duced by the fault detection of the model being considered.
4.2.1 Effect of Fault Rate
In Figure 6, we examine the effect of the fault rate as the
MTTF was varied. As would be expected, each model of-
fers better packet loss as the fault rate is decreased. How-
ever, when the packet loss is taken as a percentage of the
base Packet-SONET loss (as shown in Figure 6), an inter-
esting trend is displayed. Whereas both the fast HELLO
and EI-HELLO remain at a fairly consistent level, the slow
HELLO performance worsens considerably. This is due to
the fact that as the fault rate decreases, the fast HELLO and
EI-HELLO get closer to the Packet-SONET packet loss per-
formance (instant detection) whereas the slow HELLO does
not improve as much with a decreasing fault rate.
4.2.2 Effect of EI-HELLO Settings
In Figure 7, we examine the effect of the heartbeat interval
on the EI-HELLO model while the fast and slow HELLO
models are kept at a constant setting. The normalized set-
tings versus Packet-SONET are shown to remove the base-
line losses present in the network5. The hybrid and green
settings are not shown as the parameters produce only a
minimal change in performance. In each of the two cases,
the recovery time was limited by the default heartbeat inter-
val of 250 ms. As the green setting is increased, the delay
for other edge nodes to offer warnings as well as the time-
out is increased as well, hence offering poorer performance.
5The normalized loss is simply the loss minus the Packet-SONET loss.
Fast HELLO (100 ms)
EI-HELLO
Slow HELLO (5s)
40
35
30
25
20
15
10
5
)
%
(
T
E
N
O
S
.
s
v
s
s
o
L
l
a
n
o
i
t
i
d
d
A
0
100
150
200
250
300
350
400
Mean Time to Failure (ms)
Figure 6. Effect of
Additional loss vs. SONET
fault rate - NSFNet
-
)
%
(
s
s
o
L
t
e
k
c
a
P
d
e
z
i
l
a
m
r
o
N
2
1.5
1
0.5
0
100
Fast HELLO (100 ms)
EI-HELLO
Slow HELLO (5s)
350
150
Heartbeat interval (milliseconds)
200
250
300
400
Figure 7. Effect of EI-HELLO parameters -
NSFNet - Heartbeat interval
Out of all of the parameters, the heartbeat interval offers the
best performance at an interval of 100 ms (see Figure 7).
However, this performance is only marginally better and
comes at an extremely high message cost as examined in
the next graph.
4.2.3 Effect of EI-HELLO Settings on Message Over-
head
Figure 8 examines the effect of the heartbeat interval on the
amount of message overhead introduced by the respective
heartbeat and link state messages. As with Figure 7, the
slow and fast HELLO models are kept at a constant setting
for reference. As the green setting and hybrid HELLO set-
tings had minimal impact on message overhead in the ear-
lier section, the effect of such settings are not shown due
to space considerations. As the hybrid HELLO message
setting has only a minimal impact on message overhead,
it is reasonable to assume that the hybrid HELLO message
9
Proceedings of the International Conference on Dependable Systems and Networks (DSN’02) 
0-7695-1597-5/02 $17.00 © 2002 IEEE 
Authorized licensed use limited to: Tsinghua University. Downloaded on March 19,2021 at 04:14:40 UTC from IEEE Xplore.  Restrictions apply. 
Fast HELLO (100 ms)
EI-HELLO (Link State)
EI-HELLO (LS+HBeat)
Slow HELLO (5s)
5. Conclusions
)
d
n
o
c
e
s
r
e
p
s
e
g
a
s
s
e
M
i
.
g
v
A
(
d
a
e
h
r
e
v
O
e
a
S
k
n
L
t
t
90
80
70
60
50
40
30
20
10
0
100
In this paper, we proposed an approach (EI-HELLO) for
edge-based health monitoring of core nodes in a DiffServ
domain that captures the tradeoff of fault detection speed
and link state overhead. Our approach employed the use
of route-pinned heartbeat packets coupled with a hybrid
HELLO mode to provide intelligent HELLO packet inter-
vals.
Our simulation studies showed that
the EI-HELLO
model could offer signiﬁcant beneﬁt over the traditional
slow HELLO model currently in wide-scale deployment
in the Internet. However, such improvement comes at the
cost of bandwidth and does not offer signiﬁcant gains over
networks where sub-second HELLO intervals are possible.
However, the implications of the EI-HELLO scheme for
QoS monitoring of core routers can offer signiﬁcant ben-
eﬁts beyond the initial purpose of fault detection. Thus, we
believe the EI-HELLO model offers signiﬁcant promise and
provides an excellent foundation for further research.
The authors would also like to thank Chris Metz of Cisco
Systems and Jennifer Rexford of AT&T Research for their
invaluable feedback.
References
[1] K. Nichols, S. Blake, F. Baker, and D.L. Black, “Deﬁnition of the
Differentiated Services Field (DS Field) in the IPv4 and IPv6 Head-
ers, IETF RFC 2474, Dec. 1998.
[2] S. Blake et. al, “An Architecture for Differentiated Services,” RFC
2475, IETF, Dec. 1998.
[3] International Standars Organization, “Intra-Domain IS-IS Routing
Protocol,” ISO/IEC JTCI/SC6 WG2 N323, Sept. 1989.
[4] J. Moy, “OSPF Version 2,” RFC 1583, June 1994.
[5] Y. Rekhter, T. Li, “A Border Gateway Protocol 4 (BGP-4),” RFC
1771, March 1995.
[6] A. Striegel, G. Manimaran, “A Scalable Approach for DiffServ Mul-
ticasting,” Proc. of IEEE ICC’2001, pp. 2327-2331, Helsinki, Fin-
land, June 2001.
[7] C. Alaettinoglu, V. Jacobson, H. Yu, “Toward Millisecond IGP Con-
vergence,” NANOG 20, Washington D.C., Oct. 2000.
[8] J. Parker, D. McPherson, and C. Alaettinoglu, “Short Adjacency
Hold Times in IS-IS,” IETF Internet Draft, draft-parker-short-isis-
hold-times-01.txt, July 2001, Work in progress.
[9] A. Striegel, G. Manimaran, “A Scalable Protocol for Member
Join/Leave in DiffServ Multicast,” Proc. of IEEE LCN’2001, Tampa,
Florida, Nov. 2001.
[10] E. Rosen, A. Visiwanathan, and R. Callon, “Multiprotocol Label
Switching Architecture,” RFC 3031, IETF, Jan. 2001.
[11] UCB/LBNL/VINT Network Simulator - ns (version 2), Available at
www.mash.cs.berkeley.edu/ns/.
[12] NSFNet T3 Backbone Service, Merit Network Inc., October 1992.
350
150
Heartbeat interval (milliseconds)
200
250
300
400
Figure 8. Effect on average message rate of
heartbeat interval
could be lowered even further being constrained only by the
link delay between the two nodes.
However, the heartbeat interval has a profound impact
on the message overhead of the EI-HELLO model (see Fig-
ure 8). The profound impact of the heartbeat interval can
be linked to several factors. First, each edge router follows
a greedy paradigm whereby each router attempts to verify
all of the routes to the other routers. Thus, for 17 edge
routers, 17 packets are sent HBeatIVal times per second.
At a rate of 100 ms, each node will receive 160 heartbeats
packets per second. However, due to the fact that some mul-
ticast savings does occur (only 1 packet goes out from the
node), the average overhead is slightly reduced. The edge-
to-edge heartbeat quantity is further ampliﬁed by the rela-
tive sparsity of NSFNet. Whereas in the small network ex-
ample, several of the links did not require veriﬁcation, many
of the edge nodes in NSFNet send heartbeat packets along
the same links. Hence, many of the packets end up simply
reverifying links that have been veriﬁed by other nodes due
to the greediness of the EI-HELLO approach.
Thus, EI-HELLO suffers in a sparse network due to the
unnecessary greediness of nodes. However, such perfor-
mance could be improved by appropriately distributing the
task of veriﬁcation and intelligently sharing the workload
(see Section 3.6). However, such a greedy approach is not
entirely poor as the heartbeat packets could also be used to
gather core status information, thus distributing such infor-
mation to the edge routers to make better routing decisions.
As a result, EI-HELLO is not ideal for all situations. If
it is possible to reduce the HELLO interval to sub-second
or have a Packet-SONET linkage, an approach such as EI-
HELLO simply adds additional overhead. However, for
cases where such a lower link state interval is not possible
or where the gathering of core information is desired, EI-
HELLO can offer signiﬁcant beneﬁt at a reasonable cost.
Proceedings of the International Conference on Dependable Systems and Networks (DSN’02) 
0-7695-1597-5/02 $17.00 © 2002 IEEE 
Authorized licensed use limited to: Tsinghua University. Downloaded on March 19,2021 at 04:14:40 UTC from IEEE Xplore.  Restrictions apply. 
10