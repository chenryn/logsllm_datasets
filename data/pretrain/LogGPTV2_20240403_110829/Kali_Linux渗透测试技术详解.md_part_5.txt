已准备好创建虚拟机
单击“完成抢健虚拟机·然后可以安装其他Linux2.6.x内核
将使用下列设置创键虚拟机：
名称：
Kali Lnux
位置：
D:\Ka
版本：
Workstation 10.0
操作系统：
其他Lnux2.6.x内楼
硬盘：
50 68,拆分
内存：
256 MB
网络适配器：
NAT
其他设量：
CD/DVD,USB控制器，打印机声卡
自定义硬件（C）
<上一步(B)
完成
取消
图1.50已准备好创建虚拟机
（8）该界面显示了所创建虚拟机的详细信息，此时就可以创建操作系统了。然后单击
“完成”按钮，将显示如图1.51所示的界面。
· 23 ·
---
## Page 36
第1篇Linux安全渗透测试基础
文绅
编辑(E）查(V）虚拟航(M）透项卡(T）帮(H)
页xalux
Kali Linux
开自此通拟机
编虚权机设置
设备
内存
256 MB
处理器
硬盘(SCST)
50 GB
网添配器
CD/DVD (IDE)
自动检测
NAT
USB控制器
存在
声卡
自动检测
打机
在
显示器
自动检测
虚拟机详细信息
配置文件：DKalKai Linux
态：已关机
在此处键入对该虚权机的确述
体兼容性:Workstation 10.0 世积机
图1.51创建虚拟机
（9）该界面显示了新创建的虚拟机的详细信息。现在准备安装KaliLinux。在安装Kali
Linux之前需要设置一些信息，在VMwareWorkstation窗口中单击“编辑虚拟机设置”，
将显示如图1.52所示的界面。
武扣机设置
硬件通项
设备
换费
设备状态
2 G8
□已连核()
处理器
(SCS)
1
50 GB
连接
8控器
配器
有在
HAT
使用物量E幼器(P):
声卡
自动检则
自动检别
打印机
存在
使用I50映量文件(M)：
自动检别
(So镜像文件KalljalHnux
高（V].
添[A][R)
取消
图1.52虚拟机设置
复选框，单击“浏览”按钮，选择KaliLinux的映像文件。然后单击“确定”按钮，将返
回到图1.51所示的界面。
（11）在图1.51界面，选择“开启此虚拟机”命令，将显示一个新的窗口，如图1.53
所示。
· 24 ·
---
## Page 37
第1章Linux安全渗透简介
KALI LINUX
Boot
ilsafe)
(forensic mode)
nstall uith sp
Press ENTER to boot or TAB to edit 
图1.53安装界面
（12）接下来的安装过程和在第1.4.1小节中介绍的过程一样了，这里就不再赘述。
1.4.5安装VMwareTools
VMwareTools是VMware虚拟机中自带的一种增强正
虚拉机(M标整(T）帮助(H)
具。它是VMware提供的增强虚拟显卡和硬盘性能，以及
电源
可移动设备（D）
同步虚拟机与主机时钟的驱动程序。只有在VMware虚拟
暂停
Ctrl+Shift+P
机中安装好VMwareTools工具后，才能实现主机与虚拟机
品发送 Ctrl+Alt+Del
之间的文件共享，同时可支持自由拖曳的功能，鼠标也可
Ctrl+G
快照(N)
在虚拟机与主机之间自由移动（不用再按Ctrl+Alt组合键）。
捕肤屏（C）
Ctrl+Alt+PrtScn
本小节将介绍VMwareTools程序的安装。
管理(M)
（1）在VMwareWorkstation菜单栏中，依次选择“虚
安装VMwa
拟机”“安装VMwareTools..”命令，如图1.54所示。
设置(s)
Ctrl+D
（2）挂载VMwareTools安装程序到/mnt/cdrom/目录。
图1.54安装VMwareTools
执行命令如下所示：
root@kali:~# mkdir /mnt/cdrom/
#创建挂载点
root@kali:~# mount /dev/cdrom /mnt/cdrom/
#挂载安装程序
mount: block device /dev/sr0 is write-protected, mounting read-only
看到以上的输出信息，表示VMwareTools安装程序挂载成功了。
（3）切换到挂载位置，解压安装程序VMwareTools。执行命令如下所示：
root@kali:~# cd /mnt/cdrom/
#切换目录
root@kali:/mnt/cdrom# Is
查看当前目录下的文件
manifest.txt VMwareTools-9.6.1-1378637.tar.gzvmware-tools-upgrader-64
run_upgrader.shvmware-tools-upgrader-32
root@kali:/mnt/cdrom# tar zxvf VMwareTools-9.6.1-1378637.tar.gz -C /
#解压VMwareTools安装程序
· 25 ·
---
## Page 38
第1篇Linux安全渗透测试基础
执行以上命令后，VMware
Tools程序将被解压到/目录中，并生成一个名为
vmware-tools-distrib文件夹。
（4）切换到VMwareTools的目录，并运行安装程序。执行命令如下所示：
root@kali:/mnt/cdrom# cd /vmware-tools-distrib/
#切换目录
root@kali:/vmware-tools-distrib# ./vmware-install.pl
#运行安装程序
执行以上命令后，会出现一些问题。这时按下“回车”键，接受默认值。
（5）重新启动计算机。
1.5Kali更新与升级
当用户使用一段时间以后，可能对总是在没有任何变化的系统中工作感到不满，而是
渴望能像在Windows系统中一样，不断对自已的Linux进行升级。另外，Linux本身就是
一个开放的系统，每天都会有新的软件出现，Linux发行套件和内核也在不断更新。在这
样的情况下，学会对Linux进行升级就显得非常迫切了。本节将介绍Kali的更新与升级。
更新与升级Kali的具体操作步骤如下所示。
（1）在图形界面依次选择“应用程序”“系
软件更新查看器正以特权用户身份运行
统工具”“软件更新”命令，将显示如图1.55所
出于安全原因，应避免以特权用户身份运行图形界面应用程序。
软件包管理时安全性是敏感的。
示的界面。
取消(C)
确认据续(A)
（2）该界面提示确认是否要以特权用户身份
运行该应用程序，如果继续，单击“确认继续”
图1.55警告信息
按钮，将显示如图1.56所示的界面。
软件更新
-□x
345个更新可用
软件更新可更正软件中的错误、修补安全漏润以及提供新功能。
其他更新
An 802.11 WEP and WPA-PSK key cracking program
sircrack-ng-1.2-beta30kali1 (32 Ω)
769.8 KB
Apache HTTP Server metapackage
apache2-2.2.22-13+ deb7u1 (32 Ω)
1.4 KB
 Apache HTTP Server - traditional non-threaded model
apache2-mpm-prefork-2.2.22-13+deb7u1 (32 {2)
2.3 KB
 utility programs for webservers
apache2-utils-2.2.22-13+deb7u1 (32 Ω)
162.5 KB
Apache HTTP Server common binaryfiles
pache2.2-bin-2.2.22-13+deb7u1 (32 fΩ)
772.8 KB
Apache HTTP Server common files
2.2.22-13+deb7u1 (32 位)
291.1 KB
.5 MB
详细信息
需重新启动
已选定345个更新(971.5 MB)
安装更新（）
图1.56软件更新
· 26 ·
---
## Page 39
第1章Linux安全渗透简介
（3）该界面显示了总共有345个软件包需要更新，单击“安装更新”按钮，将显示如
图1.57所示的界面。
（4）该界面显示了安装更新软件包依赖的软件包，单击“继续”按钮，将显示如图1.58
所示的界面。
软件更新
-□×
需要额外的确认
欲更新以下软件包，有其他软件需要被修改。
345个更新可用
软件更新可更正软件中的错误、修补安全漏润以及提供新功能。
安装删除
owser Exploitation Framework (BeEF)  bundled ruby li...
I.e-0.4.4.90kali4 (32 fΩ)
85.5 MB
为了满足依赖关系，还需要安装以下软件：630.2MB
A firmware analysis tool
arp scanning and fingerprinting tool
80.0 KB
Bluetoeth scarner and loggee
Ethernet/FDDI station activity m
317.0 KB
Mass SNMP scanner
aa0.82-1kali3 (32 Ω)
21.3 KB
 light download accelerator con
 Z) -+-1=
Bully is a new implen
1. (3:2 2
50.8 KB
Microsoft Cabinet file unpacker
Network sniffer to extract CDP infot
11.9 KB
Configuration tool for amateur radios
Cusitom wordlist gene
18.7 KB
详细信息
口不再星示
正在下载软件包
取消（C）
继续
退出(G)
安装更新（
图1.57依赖软件包
图1.58软件更新过程
（5）从该界面可以看到软件更新的一个进度。在该界面，可以看到各软件包的一个不
同状态。其中，软件包后面出现图标，表示该软件包正在下载；如果显示为图标，表
示软件包已下载：如果同时出现和图标的话，表示安装完该软件包后，需要重新启动
系统：这些软件包安装成功后，将显示为图标。这时候单击“退出”按钮，然后重新
启动系统。在更新的过程中，未下载的软件包会自动跳到第一列。此时，滚动鼠标是无
用的。
（6）重新启动系统后，登录到系统执行Isb_release-a命令查看当前操作系统的所有版
本信息。执行命令如下所示：
root@kali:~# Isb_release -a
No LSB modules are available.
#无效的LSB模块
Distributor ID: Debian
#发行版
Description:
Debian GNU/Linux Kali Linux 1.0.6
#描述信息
Release: Kali Linux 1.0.6
#版本信息
Codename:
n/a
#代号
从输出的信息中，可以看到当前系统版本为1.0.6。以上命令适用于所有的Linux，包
括RedHat、SuSE和Debian等发行版。如果仅查看版本号，可以查看/etc/issue文件。执行
命令如下所示：
root@kali:~#cat /etc/issue
Kali GNU/Linux 1.0.6 \n V
从输出的信息中，可以看到当前系统的版本为1.0.6。
· 27 ·
---
## Page 40
第1篇Linux安全渗透测试基础
1.6基本设置
在前面学习了KaliLinux操作系统的安装，安装成功后就可以登录到系统了。登录系
统后，就可以使用各种的渗透工具对计算机做测试。为了方使后面章节内容的学习，本节
将介绍一下KaliLinux的基本设置。
1.6.1启动默认的服务
KaliLinux自带了几个网络服务，它们是非常有用的。但是默认是禁用的。在这里，
将介绍使用各种方法设置并启动每个服务。
1.启动Apache服务
启动Apache服务。执行命令如下所示：
root@kali:~# service apache2 start
输出信息如下所示：
[ ok ] Starting web server: apache2.
输出的信息表示Apache服务已经启动。为了确认服务是否正在运行，可以在浏览器
中访问本地的地址。在浏览器中访问本地的地址，如果服务器正在运行，将显示如图1.59
所示的界面。
Iceweasel
-□X
File Edit  View History Bookmarks IoolsHelp
 http://192.168.41.235/
+
192.168.41.235
Most VisitedIiloffensive Security  Kali Linux Kali Docs Exploit-DBAircrackng
It works!
This is the default web page for this server.
The web server software is running but no content has been added, yet.
图1.59Apache服务器访间界面
2.启动SecureShell（SSH）服务
启动SecureShell（SSH）服务。执行命令如下所示：
28·
---
## Page 41
第1章Linux安全渗透简介
root@kali:~# service ssh start
[ok] Starting OpenBSD Secure Shell server: sshd.
看到以上的输出表示SSH服务已经启动。为了确认服务的端口是否被监听，执行如下
所示的命令：
root@kali:~# netstat -tpan | grep 22
tcp
。
0 0.0.0.0:22
0.0.0.0:*
LISTEN
7658/sshd
tcp6
。
0 :22
*
LISTEN
7658/sshd
3.启动FTP服务
FTP服务默认是没有安装的，所以首先需要安装FTP服务器。在KaliLinux操作系统
具体操作步骤如下所示。
（1）设置APT源。向软件源文件/etc/apt/sources.list中添加以下儿个镜像网站。执行命
令如下所示：
root@kali:~# vi /etc/apt/sources.list
deb http://mirrors.neusoft.edu.cn/kali/ kali main non-free contrib
deb-src http://mirrors.neusoft.edu.cn/kali/ kali main non-free contrib
deb http://mirrors.neusoft.edu.cn/kali-security kali/updates main contrib non-free
添加完以上几个源后，将保存sources.list文件并退出。在该文件中，添加的软件源是
根据不同的软件库分类的。其中，deb指的是DEB包的目录；deb-src指的是源码目录。如
果不自己看程序或者编译的话，可以不用指定deb-src由于deb-src和deb是成对出现的，
可以不指定deb-src，但是当需要deb-src的时候，deb是必须指定的。
（2）添加完软件源，需要更新软件包列表后未可以使用。更新软件包列表，执行命令
如下所示：
root@kali:~# apt-get update
更新完软件列表后，会自动退出程序。
（3）安装FTP服务器。执行命令如下所示：
root@kali:~# apt-get install pure-ftpd
安装成功FTP服务器，就可以启动该服务了。执行命令如下所示：
root@kali:~# service pure-ftpd start
4.安装中文输入法
KaliLinux操作系统默认也没有安装中文输入法，下面将介绍安装小企鹅中文输入法。
执行命令如下所示：
root@kali:~# apt-get install fcitx-table-wbpy ttf-wqy-microhei ttf-wqy- zenhei
执行以上命令后，小企中文输入法就安装成功了。安装成功后，需要启动该输入法
后才可以使用。启动小企鹅中文输入法，执行命令如下所示：