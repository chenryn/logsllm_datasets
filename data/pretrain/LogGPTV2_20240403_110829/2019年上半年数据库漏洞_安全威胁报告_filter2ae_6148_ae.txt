**按漏洞的攻击途径分类情况分析**
按照漏洞的攻击途径，数据库漏洞可被划分为两类：远程服务器漏洞和本地漏洞。
远程服务器漏洞是指位于提供网络服务的进程中的漏洞。攻击者可以通过网络在另一台电脑上直接进行攻击，而无需用户进行任何操作。
本地漏洞是指必须登录到安装数据库软件的计算机上才能利用的漏洞。该类漏洞因利用条件苛刻，威胁也最小。
图10 各主流数据库漏洞的攻击途径分布
如图10所示，截至2019年5月底所被发现的数据库漏洞中，本地漏洞占11%，远程漏洞占89%。鉴于本地攻击要求较高，远程攻击较为灵活，因此对于数据库系统而言，远程漏洞较多意味着更容易受到恶意攻击，数据库系统会面临较高的风险。
在远程漏洞中，从攻击方式来看，常见的有拒绝服务、缓冲区溢出、非法访问等。其中，拒绝服务类漏洞占78%，主要出现在MySQL数据库中；缓冲区溢出类漏洞占3%，以DB2数据库为主；非法访问类漏洞出现在Oracle和MySQL数据库中，占5%，如图11所示。对于这三类漏洞，最好的解决方法是及时更新软件补丁，从根本上防止漏洞的出现。
图11 数据库漏洞攻击发生的网络架构分布
**从数据库漏洞分布谈防护建议**
目前数据库安全漏洞主要集中在拒绝服务、远程代码执行等方面，缓冲区溢出漏洞虽然数量很少，但仍然存在。通过对漏洞分析可以发现，拒绝服务类漏洞大多与用户权限有关，攻击者需要获得较高的用户权限，才能触发漏洞形成恶意攻击。而远程代码执行漏洞需要攻击者与数据库系统进行数据交互，对此可通过数据验证进行防范。缓冲区溢出则较为隐蔽，一般不易察觉。
在此情形下，要确保数据库系统的安全性，首先要做到用户权限的合理分配，避免普通用户具有过高的权限，形成安全隐患。其次，要对系统服务进行管控，停止或卸载非必要的服务，降低潜在漏洞存在的可能性；最后，要对数据库系统及时更新升级，防止因存在已知漏洞而造成的安全风险。
###  数据库系统的安全建议
数据库安全发展到现在，权限的控制和输入的限制是永恒的话题。直至今年主流4大数据中依旧被发现了14个高超危漏洞，其中缓冲区溢出漏洞3个。虽然缓冲区溢出和通讯协议破解的漏洞的总数越来越少，但一旦出现将是数据库的噩梦。不法分子可以通过网络在不知道数据库任何账号的情况下对数据库发起攻击，导致数据库服务宕机甚至操作系统被控制。数据库引擎中的越权访问、账号提权、敏感信息泄露侵依旧是漏洞中的主流，基本80%以上的漏洞都属于数据库引擎范畴。在数据库引擎层的漏洞中，今年最常见的漏洞是拒绝服务。大部分引擎层的漏洞想要实施，需要被盗取的数据库账号具备一定的权限。（例如创建存储过程、触发器等）。所以用户可以有针对性的对数据库进行加固。
针对数据库漏洞攻击的数据库加固方式可以采用购买第三方产品。但更重要的是要遵循以下原则：
1\.
用户权限最小化原则。90%的漏洞攻击都是需要账号具备一定的权限。所以请用户配置数据库帐号时，给能满足应用系统使用的最小权限的账号。任何额外的权限都可能是潜在的攻击点
2\.
定期安装数据库厂商提供的漏洞补丁。根据多年经验发现95%以上数据库被黑客入侵。黑客使用的漏洞并不是0day，而是数据库厂商早已发布过，已经有补丁可用的漏洞。即使由于各种原因无法及时打补丁，也请通过虚拟补丁等技术暂时或永久加固数据库。
3\.
安全配置。70%的数据库漏洞能被利用的条件除了一定的权限外，还需要数据库未开启某些安全配置。数据库默认安装下并不会开启所有安全配置。在充分考虑对应用的影响后，尽可能开启数据库自身提供的安全设置将会极大降低被不法分子攻击的成功率。例如著名的TNS投毒漏洞，其实开启TNS密码就可以简单杜绝。
4\.
数据库功能最小化原则。数据库本身为了适应足够多的场景，设计了各种各样的功能组件。但对于用户来说，大部分功能组件根本不会使用。建议在综合应用和运维后，划定一个使用组件的最小范围。删除数据库中不用的组件。减少数据库组件可以有效的减少用户面对的风险面。在一定程度可以规避某些特定组件存在的漏洞攻击。
## 三. 结束语
信息技术的不断发展不仅改变了我们的生活，也改变了安全的发展方向。回顾安华金和近年来的研究情况，我们发现数据库安全问题虽然无法杜绝，但整体情况在逐渐好转。数据库漏洞的整体数量呈现下降趋势，数据库的安全性有所提升。究其原因主要是以下几点：一是各行各业对信息安全的认识水平在逐渐提高，用户的安全意识在逐步增强；二是各大数据库厂商更加注意安全规范，从源头减少了数据库漏洞的出现；三是安全研究人员的关注，在专业安全研究员的协助下，数据库安全研究水平不断提升，漏洞发掘能力有所提高，减少了潜在的安全风险。
在利益的驱使下，网络攻击不会消失，攻防对抗仍将继续出现。对抗的舞台也从内网走向了外网，从本地走向了云端，数据库安全也将不断面临新的风险和挑战。数据库安全研究任重而道远。
相信本文的这些观点对大家预测未来的数据库攻防的形式，以及进一步完善企业及组织的解决方案是有价值的。今年请特别注意MySQL数据库的安全防护工作。
## 附录
###  联系作者
陈君东：安华金和安全服务工程师，专注研究数据库的攻防技术。
Email：[PI:EMAIL](mailto:PI:EMAIL)
李墨：安华金和市场部总监，负责公司整体品牌、产品及行业推广工作
Email：[PI:EMAIL](mailto:PI:EMAIL)
沈雪峰：安华金和网络运营主管。
Email：[PI:EMAIL](mailto:PI:EMAIL)
###  关注安华金和
了解更多有关数据库安全信息，请访问：
[官方网站>>数据库安全](http://www.dbsec.cn/a/shujukuanquan/shujukufanghushouduan/shujukuyunxi/2011/0822/50.html)
安华金和官方微博：安华数据 
安华金和官方微信 搜索公众号 安华金和