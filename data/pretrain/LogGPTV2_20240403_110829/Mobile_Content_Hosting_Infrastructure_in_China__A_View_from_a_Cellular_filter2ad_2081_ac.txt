locality of cellular traﬃc. Besides, it means cellular users can get their content
mostly within only one AS hop, since the ASes of the examined ISP are often
peered with each other.
Our analysis also shows the trend of outsourcing non-popular domains to
clouds. This implies cloud providers have already taken the niche market of
content hosting. As this trend continues, cloud providers will become de-facto
content providers that deliver a large amount of content that other ASes do not
have (see Table 1). In fact, Tencent has already oﬀered CDN service based on
its cloud platform [4]. This may change the ecosystem of content hosting.
The proposed clustering algorithm provides a tool
for content hosting
provider identiﬁcation from large-scale passive DNS datasets. The above analy-
sis provides evidence of slicing-up infrastructure by hosting providers to deliver
diﬀerent kinds of content.
Mobile Content Hosting Infrastructure in China: A View from a Cellular ISP
109
4 Tracker Hosting Infrastructure
This section examines the hosting infrastructure of tracking domains (a.k.a.
trackers), because tracking is prevalent in mobile web service and mobile apps.
Mobile users are getting concerned about the possible privacy leakage. Besides, it
would be interesting to see the impact of content censorship on tracking behavior.
To identify the tracking domains, we used lists of trackers proposed by Ad
blockers. More precisely, we merged two lists: EasyList (combined with the
EasyList China supplementary list)3 and Simple Malvertising 4. Each queried
hostname is labeled as tracker or normal depending on the suﬃx match with
a hostname in the lists. In total, we ﬁnd 124,235 tracking domains, which are
further aggregated to 1,456 second-level domains.
4.1 Top Trackers
We ﬁrst examine the top 10 tracking domains in terms of DNS query volume
and their network features in Table 3. These domains account for 90% of total
tracking queries, showing a very biased distribution of tracking traﬃc. It is sur-
prising to see only 2 tracking domains are based in China, and most in US.
We conjecture the prevalence of Android phones and the availability of mobile
third-party analytics libraries are the main reasons for this observation [11].
Table 3. Top 10 tracking (second-level) domains
Domain
ﬂurry.com
Vol.% Type
35.07 an
25.25 an
crashlytics.com
scorecardresearch.com 18.53 an
3.38 ad
doubleclick.net
1.77 ad
1.71 ad
1.61 ad
1.56 ad
1.31 an
0.84 ad
tapjoyads.com
adsmogo.com
tapjoy.com
inmobi.com
51yes.com
vungle.com
∗
an: analytics, ad: advertiser
∗
#ASes Owner
11
18
21
24
9
11
14
4
20
9
Yahoo
Google
comScore
Google
Alibaba
Tapjoy
InMobi
Tapjoy
51yes
Vungle
3 https://easylist.to.
4 https://disconnect.me/lists/malvertising.
110
Z. Li et al.
4.2 Tracker Hosting Infrastructure
We then focus on the tracking servers (identiﬁed by IPs) that host the trackers.
We say a server is a tracking server if more than 10 tracking queries are resolved
to the server’s IP address5. In total, 7,404 tracking servers are identiﬁed.
PDF
CDF
0.5
0.4
0.3
0.2
0.1
F
D
P
0
0
0
0.1
0.1
0.2
0.2
0.7
0.3
0.3
0.7
fraction of tracking requests of a server
0.6
0.6
0.4
0.4
0.5
0.5
1
0.8
0.6
0.4
0.2
F
D
C
0.8
0.8
0.9
0.9
0
1
1
Fig. 3. Distr. of the ratio of tracking queries of servers. The left y-axis is for probability
distr. function, while the right one is for cumulative distr. function.
A tracking server may host both tracking domains and non-tracking ones.
For each tracking server, we compute the ratio of tracking queries (i.e., queries
to tracking domains) to all queries resolved to it, and plot the distribution in
Fig. 3. We observe a bimodal distribution, where most of tracking servers either
deliver a very small ratio of tracking queries (i.e.,  20%) still goes to the ASes that have rare footprints in China.
We then report the ratio of tracking queries to all queries of ASes (see the 3rd
column in Table 4). It is surprising to see some ASes (e.g., Internap) being exclu-
sively used for tracker content delivery. We then compute the ratio of tracking
queries for the ASes that have at least 1,000 tracking queries resolved to them.
5 Due to DNS caching, we may underestimate the queries mapped to individual IP
addresses.
Mobile Content Hosting Infrastructure in China: A View from a Cellular ISP
111
Table 4. Top 10 ASes by tracking requests
AS name
ISP-AS1
ISP-AS2
Internap-B.4
Amazon-AES
% tracking in trace % tracking in AS CDP CMI
35.27
24.10
7.96
7.01
5.64
3.89
2.96
2.32
1.43
NTT
Akamai-ASN 1.04
1.89
0.77
54.79
100.00
25.29
3.84
14.77
27.28
34.33
1.74
0.09
0.30
< 0.01 0.11
< 0.01 0.05
0.35
0.34
0.11
0.36
< 0.01 0.17
0.16
0.06
ISP-AS3
ISP-AS4
Amazon-02
GoogleCN
0.03
0.12
0.12
0.42
0.09
0.20
Again, we use the threshold 0.9 to determine whether an AS exclusively hosts
trackers or not. As many as 52 ASes are identiﬁed as exclusive tracking ones.
They are either cloud providers (e.g., Internap, Carpathia), or owners of trackers
that run their own ASes (e.g., Crashlytics).
We ﬁnally report the content delivery potential (CDP) and content monopoly
index (CMI) of the ASes when considering only tracking domains in the last two
columns of Table 4. We see low CDP (< 0.1) for most of ASes because they host
only several popular tracking domains. The CMI is also relatively low, meaning
that the tracking domains hosted by these ASes are also available in other ASes.
4.3 Summary and Discussion
We observe that the tracking queries are concentrated in a small number of track-
ers, of which most are US based. Moreover, over 20% of the tracking traﬃc goes
out of China. These observations raise privacy and cybersecurity concerns. The
analysis also reveals that multiple types of infrastructures are used for tracker
service hosting.
The bimodal distribution of the tracking query ratio shows that 60% of
the tracking servers exclusively provide tracking services. Monitoring the traf-
ﬁc going to these servers may help us ﬁnd new trackers that also rely on these
servers for content delivery. ISPs and mobile apps can also use this observation
to block tracking activities for privacy and security concerns.
5 Conclusion
This paper uses passive DNS traces from a Chinese cellular ISP to investigate
the mobile content hosting infrastructure in China. To this end, we proposed
a clustering algorithm to identify hosting providers and used content-related
metrics to characterize hosting infrastructure. Our key observation is that ISPs
112
Z. Li et al.
and hosting providers have collaborated to extensively replicate popular content
into cellular networks. On the contrary, content of many non-popular domains
and tracking domains tends to be available only in particular networks, resulting
content monopoly by these networks.
Our ﬁndings provide evidences that the ISPs and CDNs in China follow the
global trends of close collaboration [1,12]. However, care should be given when
generalizing our ﬁndings to other countries. In addition, our dataset was collected
from only one cellular ISP and the observation period is only two days. We are
collecting DNS data from multiple ISPs with longer observation period, in the
hope of providing an up-to-date picture of the content hosting infrastructure in
China.
Acknowledgments. The authors would like to thank Rocky Chang for shepherding
our paper and PAM reviewers for their feedback. This work is supported in part by
National Key R&D Program of China (Grant No. 2016YFE0133000): EU-China study
on IoT and 5G(EXCITING), National Natural Science Foundation of China (Grant
No. 61572475 and 61502460).
References
1. Akamai and AT&T renew global alliance (2017). https://goo.gl/b2uHMT
2. Public suﬃx list (2017). https://publicsuﬃx.org
3. Team Cymru (2017). http://www.team-cymru.org/
4. Tencent Cloud CDN (2017). https://www.qcloud.com/en/product/cdn.html
5. VNI mobile forecast highlights (2017). http://www.cisco.com/assets/sol/sp/vni/
forecast highlights mobile
6. Adhikari, V.K., Guo, Y., Hao, F., Hilt, V., Zhang, Z.L., Varvello, M., Steiner, M.:
Measurement study of Netﬂix, Hulu, and a tale of three CDNs. IEEE/ACM Trans.
Networking 23(6), 1984–1997 (2015)
7. Ager, B., M¨uhlbauer, W., Smaragdakis, G., Uhlig, S.: Web content cartography.
In: Proceedings of the ACM IMC (2011)
8. Calder, M., Fan, X., Hu, Z., Katz-Bassett, E., Heidemann, J., Govindan, R.: Map-
ping the expansion of Google’s serving infrastructure. In: Proceedings of the ACM
IMC (2013)
9. Callahan, T., Allman, M., Rabinovich, M.: On modern DNS behavior and proper-
ties. SIGCOMM Comput. Commun. Rev. 43(3), 7–15 (2013)
10. Chen, F., Sitaraman, R.K., Torres, M.: End-user mapping: Next generation request
routing for content delivery. In: Proceedings of the ACM SIGCOMM (2015)
11. Chen, T., Ullah, I., Kaafar, M.A., Boreli, R.: Information leakage through mobile
analytics services. In: Proceedings of the ACM HotMobile (2014)
12. Frank, B., Poese, I., Lin, Y., Smaragdakis, G., Feldmann, A., Maggs, B., Rake,
J., Uhlig, S., Weber, R.: Pushing CDN-ISP collaboration to the limit. SIGCOMM
Comput. Commun. Rev. 43(3), 34–44 (2013)
13. Han, S., Jung, J., Wetherall, D.: A study of third-party tracking by mobile apps
in the wild. Technical report, UW-CSE-12-03-01, March 2012
14. Ng, A.Y., Jordan, M.I., Weiss, Y.: On spectral clustering: analysis and an algo-
rithm. In: Proceedings of the NIPS (2001)
Mobile Content Hosting Infrastructure in China: A View from a Cellular ISP
113
15. Pujol, E., Hohlfeld, O., Feldmann, A.: Annoyed users: ads and ad-block usage in
the wild. In: Proceedings of the ACM IMC (2015)
16. Triukose, S., Wen, Z., Rabinovich, M.: Measuring a commercial content delivery
network. In: Proceedings of the WWW (2011)
17. Xue, J., Choﬀnes, D., Wang, J.: CDNs meet CN: An empirical study of CDN
deployments in China. In: IEEE Access (2017)