title:On the incompleteness of the AS-level graph: a novel methodology for
BGP route collector placement
author:Enrico Gregori and
Alessandro Improta and
Luciano Lenzini and
Lorenzo Rossi and
Luca Sani
On the Incompleteness of the AS-level Graph:
a Novel Methodology for BGP Route Collector Placement
Enrico Gregori
Institute of Informatics and
Telematics, Italian National
Alessandro Improta
Information Engineering
Luciano Lenzini
Information Engineering
Department, University of Pisa
Department, University of Pisa
Research Council
Pisa, Italy
PI:EMAIL
and Institute of Informatics
and Telematics, Italian
National Research Council
Pisa, Italy
PI:EMAIL
Pisa, Italy
PI:EMAIL
Lorenzo Rossi
Institute of Informatics and
Telematics, Italian National
Research Council
Pisa, Italy
PI:EMAIL
Luca Sani
IMT - Institute for Advanced
Studies
Lucca, Italy
PI:EMAIL
ABSTRACT
In the last decade many studies have used the Internet AS-
level topology to perform several analyses, from discovering
its graph properties to assessing its impact on the eﬀective-
ness of worm-containment strategies. Yet, the BGP data
typically used to reveal the topologies are far from being
complete. Our contribution is three-fold. Firstly, we anal-
yse BGP data currently gathered by RouteViews, RIS and
PCH route collectors, and investigate the reasons for its in-
completeness. We found that large areas of the Internet are
not properly captured due to the geographic placement of
the current route collector feeders and due to BGP ﬁlters,
such as BGP export policies and BGP decision processes.
Secondly, we propose a methodology to select the optimal
number of ASes that should join a route collector project
to obtain a view of the Internet AS level topology closer to
reality. We applied this methodology to the global AS-level
topology and to ﬁve regional AS-level topologies, highlight-
ing that the particular characteristics of the Internet at a re-
gional level cannot be ignored during this process. Thirdly,
we provide a characterization of the ASes that we found to
be part of at least one optimal solution set. By analysing
these ASes we found that the current route collector infras-
tructure is rarely connected to them, highlighting that much
more eﬀort should be made in devising a route collector in-
frastructure that ideally would be able to capture a complete
view of the Internet.
Permission to make digital or hard copies of all or part of this work for
personal or classroom use is granted without fee provided that copies are
not made or distributed for proﬁt or commercial advantage and that copies
bear this notice and the full citation on the ﬁrst page. To copy otherwise, to
republish, to post on servers or to redistribute to lists, requires prior speciﬁc
permission and/or a fee.
IMC’12, November 14–16, 2012, Boston, Massachusetts, USA.
Copyright 2012 ACM 978-1-4503-1705-4/12/11 ...$15.00.
Categories and Subject Descriptors
C.2.1 [Computer-Communication Networks]: Network
Architecture and Design—Network topology; C.2.2 [Com-
puter-Communication Networks]: Network Protocols—
Routing protocols; C.2.3 [Computer-Communication
Networks]: Network Operations—Network monitoring
Keywords
Autonomous Systems, BGP, incompleteness, Internet, mea-
surement, topology
1.
INTRODUCTION
During the last few years, the Internet has become more
and more part of the everyday life of billions of people.
Thanks to the Internet, it is now possible to do things that
just a couple of decades ago would have been impossible,
such as sending mail to the other side of the world in less
than a second, checking one’s bank account from home and
retrieving any kind of information at any time with just a
couple of clicks. Despite its increasing pervasiveness, very
little is known about the real structure of the Internet and
what happens to data once they have left the home router.
This is a major issue, since it means that is impossible to de-
tect any structural problem or Achilles’ heels until an outage
occurs.
To address this problem, several researchers started to
analyse the Internet in a topological perspective in the hope
of revealing any potential weaknesses at any level. The AS-
level topology represents one of the most interesting perspec-
tives. In this topology each node is represented by an AS
that represents an organization (or part of it) that manages
a certain amount of IP subnets, while the edges are rep-
resented by BGP connections between pairs of ASes. The
most common approach is to exploit data gathered by BGP
route collectors and/or Traceroute monitors and, then, to
extract AS-level information about the Internet. Although
several works have highlighted problems in using traceroute
253data to infer AS-level information – such as aliasing [1], bi-
asing [2] and router-to-AS mapping [3, 4] – only a few have
investigated the limitations of the BGP approach, and in
doing so have mainly focused on the incompleteness of data
gathered via BGP route collectors.
Our contribution is threefold. Firstly, we analyse the BGP
data currently gathered by RouteViews, RIS and PCH route
collectors, highlighting and explaining the causes of their in-
completeness. We show that the current view of the Internet
is extremely narrow – due to the extremely low number of
ASes that are actively feeding the route collectors – and bi-
ased – due to the nature of the feeding ASes, which is mostly
managed by worldwide ISPs. This top-down view does not
allow the route collector infrastructure to discover a large
set of p2p connections that may be established among ASes
that are part of the lower part of the Internet hierarchy,
as already highlighted in [5, 6, 7, 8].
In addition to this
classic analysis we developed an innovative metric, named
p2c-distance, which takes into account the presence of BGP
decision processes and BGP export policies crossed by BGP
UPDATE messages before reaching a route collector. This
then provides a better understanding of the level of com-
pleteness of the data gathered. Unlike other approaches, we
are thus able to analyse and quantify the level of incom-
pleteness of BGP data by relying only on the route collector
infrastructure and without exploiting any private data.
Secondly, in order to overcome the large amount of in-
completeness highlighted, we select the minimum number
of ASes that should provide full routing information to the
route collector infrastructure. To do that we formulate a
Minimum Set Cover (MSC) problem that exploits the inter-
AS p2c-distance within a generic AS-level topology. Even
though the MSC has been proved to be NP-complete [9],
our methodology exploits the graph properties extracted the
MSC solution. We ﬁrst reduce the size of the graph in which
the solution has to be searched by a) leveraging on the ex-
treme low densities of the covering matrices, b) applying
classic mathematical reduction techniques to these matri-
ces and c) using a brute force approach on the remaining
uncovered components of the original covering matrix.
Thirdly, we analyse and compare the solutions obtained
by applying this methodology on the global topology and
ﬁve regional AS-level topologies of the Internet, highlighting
the impact that the geographical peculiarities of the Internet
have on the selection of the optimal set of ASes. As already
highlighted in [10], geography plays an important role in
routing decisions inside worldwide ASes and, consequently,
also on the establishment of local economic inter-AS rela-
tionships and on the related BGP export policies. Typically
the routing decisions are carried out at a continental level.
Thus, to have full coverage of a given world-wide AS and its
neighbors, multiple BGP connections with the route collec-
tors need to be set up, one for each continent where the ASes
are located. Furthermore, we also carry out an analysis of
the current status of the route collector regional infrastruc-
ture by identifying how many ASes in the optimal solution
are currently connected to them, by working out how many
new ASes should be connected in each region, and by pro-
viding their typical characteristics. We found that some
parts of the world, such as Africa, completely hide their p2p
connectivity from the current route collector infrastructure.
To the best of our knowledge, this is the ﬁrst work to pro-
vide a constructive and systematic approach to enhance the
coverage of the current route collectors from a geographical
perspective, by identifying the ASes that should feed them
in every continent. We also provide a ranked list of ASes,
which highlights those ASes that should be given more pri-
ority in joining a route collector project.
The paper is organized as follows. Section 2 describes
brieﬂy the state of the art about the studies on BGP data
and its incompleteness. An analysis of the current view
of the route collector infrastructure is given in Section 3.
In Section 4 we describe the proposed monitor placement
methodology and we deﬁne the p2c-distance. Section 5 anal-
yses the results of the methodology on the global topology
and on the ﬁve regional topologies. Section 6 concludes the
paper.
2. RELATED WORK
Some issues about the extent of the incompleteness of
BGP data were initially raised in [11], but only several years
later was the ﬁrst attempt to quantify such incompleteness
performed. In [12], the authors compared the topology in-
ferred from BGP data and the topology inferred from data
contained in the Internet Routing Registries (IRRs), high-
lighting that about 40% of connections were missing in BGP-
derived topologies. This topic was then to some extent ne-
glected, but was recently re-evaluated in [13] and [5]. In [13]
there is an analysis of the BGP data obtained from each AS
participating in RouteViews and RIS, and their contribution
was found to be heavily redundant. A completely diﬀerent
approach was applied in [5]. The AS-level topology inferred
via BGP data was compared with a ground truth made up of
proprietary router conﬁgurations of two major ISPs (a Tier-
1 and a Tier-2 ISP), of two research networks (Abilene and
GEANT) and several content providers. Their results were
signiﬁcant, but they are not reproducible and are heavily bi-
ased by the ground truth selected. Nevertheless, this work
can still be considered a milestone in the analysis of the in-
completeness of BGP data. Its most relevant result was that
economic relationships established between ASes strongly
aﬀect the information that can be revealed by each monitor.
The main rationale behind this lies in the economic-driven
nature of the inter-domain routing introduced in [14], where
the most common types of inter-AS economic relationships
– provider-to-customer (p2c), customer-to-provider (c2p),
peer-to-peer (p2p) and sibling-to-sibling (s2s) – are identi-
ﬁed and where the related BGP export policy are described.
In particular, an AS announces to its customers and siblings
the routes obtained by its peers, customers, providers and
siblings, while it announces to its providers and peers only
the routes related to its customers (see Fig. 1). This means
that p2p connections are hidden from any of the providers or
peers of a given AS. Based on the above, in [5] was claimed
that most of the connections that are missing are p2p con-
nections, and that monitors should be placed in the periph-
ery of the Internet to discover them. A similar conclusion
about the invisibility of p2p connections was also drawn in
[6], which proposed a tool based on traceroute probes that
is able to discover missing p2p connections established on
Internet Exchange Points (IXPs).
Despite this strong evidence of the incompleteness of BGP
data gathered by route collectors, only a few works have
addressed the issue of how new BGP monitors should be
254located to minimize this lack of information.
In [15], the
authors extended a model based on techniques developed in
biological research for estimating the size of populations to
work on the Internet AS graph. Their results showed that
thousands of connections are missing, and the authors esti-
mated that 700 route monitors would be able to see almost
the totality of the connections. However, their heuristic only
marginally took into account the existence of inter-AS eco-
nomic relationships, thus the optimal number of route mon-
itors found was seriously underestimated, as will be high-
lighted in Section 5.
3. THE DARK SIDE OF BGP-BASED MEA-
SUREMENTS
Without any doubt, BGP data is the best data to infer
the Internet AS-level topology, since the AS-level informa-
tion is directly contained in the AS Path BGP attribute
and no further heuristics have to be applied. BGP route
collectors receive BGP routing information from cooperat-
ing ASes, hereafter BGP feeders, to which they establish a
BGP session. Thanks to these routing data it is possible to
re-create the dynamics of the inter-domain routing as seen
from BGP feeders.
In this section we analyse the incom-
pleteness of BGP data from a diﬀerent perspective. First,
we outline the current route collector projects. Then, we
focus on the analysis of data gathered by these projects and
on the contribution of each of their BGP feeders. Finally,
we investigate the impact of the geographical distribution
of route collectors has on the ability to discover regional
Internet properties.
3.1 BGP Route Collector Projects
There are three main projects that collect BGP data and
make it publicly available on the web: RouteViews, RIS and
PCH. RouteViews was conceived at the University of Oregon
[16] as a tool for Internet operators to obtain real-time infor-
mation on the global routing system from the perspectives
of several diﬀerent backbones and locations. Since its birth
in 1997, this project has provided an invaluable amount of
BGP data through its route collectors. RIS (Routing In-
formation System) was developed by R´eseaux IP Europ´eens
(RIPE), the European Internet Registry, which collects and
stores Internet routing data from several locations around
Figure 1: Inter-AS economic relationships
PCH
RIS
RouteViews
 1
 0.8
 0.6
 0.4
 0.2
)
x
>
X
P
(
 0
102
103
104
105
106
107
108
109
1010
x = Number of IP addresses
Figure 2: CCDF of the amount of IPv4 space obtained by
each project
the globe deployed on the largest IXPs [17]. It oﬀers also
several tools that allow the Internet community to easily
read and use BGP data. PCH (Packet Clearing House) [18]
is a non-proﬁt research institute that supports operations
and analysis in the areas of Internet traﬃc exchange, rout-
ing economics and global network development. Since July
2010, PCH has been making BGP data available on its web-
site, collected by several route collectors deployed on distinct
IXPs. We gathered and analysed the BGP routing informa-
tion provided by these three projects during February 2012.
In this time interval, the number of active route collectors
which provided BGP data in MRT format (RFC 6397) were
10 for RouteViews, 13 for RIS and 51 for PCH. Table 1
details the number of BGP feeders per route collector and
their geographical location.
3.2 BGP feeder contribution analysis
Despite the well-known aims of these route collector projects,
several of their BGP feeders do not provide any relevant con-
tribution [8]. To better quantify the total contribution of
BGP feeders, we subdivide them on the basis of the amount
of IPv4 space1 that each of them advertised to the route
collectors (Table 1): minor feeders announce an IPv4 space
smaller than that of a single /8 subnet, full feeders announce
an IPv4 space closer to the full Internet IPv4 space currently
advertised2 (more than two billion IP addresses), while par-
tial feeders include those ASes in between. Following this
subdivision, the number of full feeders is 65 for RouteViews,
78 for RIS and 1 for PCH. Together they make up a set of
120 feeders, i.e. 5.99% of the total number of feeders. Fig-
ure 2 shows the amount of non overlapping IPv4 addresses
announced from the BGP feeders of each project. In Route-
Views and RIS projects, only about one in four/ﬁve feeders
announce the full routing table (represented by the vertical
tail of the CCDFs) to the route collectors, while in PCH the
percentage is much lower.
A feature that can be used to gain a deeper insight into
1We compute the IPv4 space considering only not over-
lapping subnets, i.e. those subnets that are not included in
any other subnet
2More information about the current IPv4 space adver-
tised can be found at http://www.potaroo.net/tools/ipv4
255)
x
>
X
P
(
 1
 0.9
 0.8
 0.7
 0.6
 0.5
 0.4
 0.3
 0.2
 0.1
 0
100
Minor feeders
Partial feeders
Full feeders
101
102
103
104
x = Degree
)
x
>
X
P
(
 1
 0.9
 0.8
 0.7
 0.6
 0.5
 0.4
 0.3
 0.2
 0.1
 0
100
Minor feeders
Partial feeders
Full feeders
101
102
103
104
x = Degree
)
x
>
X
P
(
 1
 0.9
 0.8
 0.7
 0.6
 0.5
 0.4
 0.3
 0.2
 0.1
 0
100
Minor feeders
Partial feeders
Full feeders
101
102
103
104
x = Degree
(a) RouteViews
(b) RIS