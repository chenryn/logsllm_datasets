Android 渗透测试入门教程（内部资料）——daxueba.net 版权所有 
Android 渗透测试入门教程 
（内部资料） 
大学霸 
www.daxueba.net
Android 渗透测试入门教程（内部资料）——daxueba.net 版权所有 
前  言 
Kali Linux 是业内最知名的安全渗透测试专用操作系统。它的前身就是业界知名的 BackTrack 操作
系统。BackTrack 在 2013 年停止更新，转为 Kali Linux。Kali Linux 集成了海量渗透测试、网络扫描、
攻击等专用工具。通过系统更新，用户可以快速获取最新的各类工具。所以，Kali Linux 是专业人员的
不二选择。 
目前，Android 系统应用非常广泛，主要应用在一些可移动设备上，如智能手机、平板、电视、数
码相机、游戏机等。这些设备被广泛地应用在人们工作和生活中。在这些设备中，往往保存大量的、敏
感的个人信息和商业信息。由于 Android 设备具备一些严重的安全隐患，如基于无线网络通信，更容易
被物理接触，安全措施滞后等。所以，很多黑客选择对该类设备实施攻击。 
为了满足用户的需要，本教程针对 Android 设备存在的各种问题，介绍了相应的实施渗透测试方法。
如 Android 设备传输的数据、使用的数据库（SQLite）、程序包的源代码、系统或应用程序中的数据等
问题。通过对 Android 设备实施渗透，可以评估该系统的安全。 
1.学习所需的系统和软件 
 安装 Kali Linux 操作系统 
 Android SDK 管理器 
2.学习建议 
大家学习之前，可以致信到 xxxxxxx，获取相关的资料和软件。如果大家在学习过程遇到问题，也
可以将问题发送到该邮箱。我们尽可能给大家解决。
Android 渗透测试入门教程（内部资料）——daxueba.net 版权所有 
目  录 
第 1 章  Android 渗透测试 ......................................................................................................................... 1 
1.1  Android 系统概述 ........................................................................................................................ 1 
1.2  什么是渗透测试 .......................................................................................................................... 1 
1.2.1  渗透测试工作流程 ........................................................................................................... 1 
1.2.2  渗透测试类型 ................................................................................................................... 2 
1.2.3  法律边界 ........................................................................................................................... 3 
1.3  安装 Kali Linux ............................................................................................................................ 3 
1.3.1  在硬盘上安装 Kali Linux ................................................................................................. 4 
1.3.2  在虚拟机上安装 Kali Linux ........................................................................................... 14 
1.3.3  安装 VMware Tools ........................................................................................................ 20 
1.4  Kali Linux 安装后简单设置 ...................................................................................................... 21 
1.4.1  配置软件源 ..................................................................................................................... 21 
1.4.2  安装中文输入法 ............................................................................................................. 22 
1.4.3  设置 VPN 代理 ............................................................................................................... 23 
1.5  ADB 工具的安装及配置 ........................................................................................................... 25 
1.5.1  安装 ADB 工具 ............................................................................................................... 26 
1.5.2  修改用户的环境变量 ..................................................................................................... 31 
1.6  ADB 工具的使用 ....................................................................................................................... 33 
1.6.1  启动和停止 ADB 服务 ................................................................................................... 33 
1.6.2  查看 Android 设备 .......................................................................................................... 33 
1.6.3  安装应用程序 ................................................................................................................. 34 
1.6.4  卸载应用 ......................................................................................................................... 35 
1.6.5  进入设备或者模拟器的 Shell ........................................................................................ 36 
1.6.6  上传文件到设备 ............................................................................................................. 37 
1.6.7  从设备上下载文件 ......................................................................................................... 38 
第 2 章  反编译和审计 Android 应用程序 .............................................................................................. 39 
2.1  反编译一个 Android 应用程序 ................................................................................................. 39 
2.1.1  查看 Android 应用程序包内容 ...................................................................................... 39 
2.2.2  使用 Dex2jar 工具 .......................................................................................................... 41 
2.2.3  使用 Apktool 工具 .......................................................................................................... 42 
2.2.4  使用 JD-GUI 工具 .......................................................................................................... 44 
2.2  审计 Android 应用程序 ............................................................................................................. 46 
2.2.1  安装 Drozer 工具 ............................................................................................................ 47 
2.2.2  启动 Drozer 工具 ............................................................................................................ 48 
2.2.3  Drozer 命令 ..................................................................................................................... 50 
2.2.4  Content provider 组件泄露 ............................................................................................. 50 
Android 渗透测试入门教程（内部资料）——daxueba.net 版权所有 
·II· 
2.2.5  遍历文件漏洞 ................................................................................................................. 56 
第 3 章  流量分析 ..................................................................................................................................... 58 
3.1  外部式被动分析 ........................................................................................................................ 58 
3.1.1  配置捕获的环境 ............................................................................................................. 58 
3.1.2  启动 Wireshark 工具 ....................................................................................................... 59 
3.1.3  设置无线设备的监听模式 ............................................................................................. 62 
3.1.4  解密 WEP 加密的包 ....................................................................................................... 65 
3.1.5  解密 WPA-PSK/WPA2-PSK 加密的包 ......................................................................... 67 
3.2  内部式被动分析 ........................................................................................................................ 70 
3.2.1  Tcpdump 工具 ................................................................................................................. 70 
3.2.2  配置捕获环境 ................................................................................................................. 72 
3.2.3  使用 ADB 工具抓包 ....................................................................................................... 72 
3.2.4  使用 ADB 工具抓包方式二 ........................................................................................... 77 
3.2.5  捕获 AVD 数据包 ........................................................................................................... 77 
3.2.6  使用终端模拟器抓包 ..................................................................................................... 83 
3.3  主动分析 .................................................................................................................................... 89 
3.3.1  什么是主动分析 ............................................................................................................. 89 
3.3.2  主动分析的软件环境 Burp Suite ................................................................................... 89 
3.3.3  在模拟器上使用代理 ..................................................................................................... 93 
3.3.4  在 Android 设备上使用代理 .......................................................................................... 94 
3.3.5  设置 Burp Suite 代理 ...................................................................................................... 95 
3.3.6  抓取 HTTPS 数据包 ....................................................................................................... 97 
3.5  提取敏感文件 .......................................................................................................................... 105 
第 4 章  Android 取证 ............................................................................................................................. 108 
4.1  取证的概述 .............................................................................................................................. 108 
4.1.1  什么是取证 ................................................................................................................... 108 
4.1.2  取证的类型 ................................................................................................................... 108 
4.2  实施逻辑取证 .......................................................................................................................... 108 
4.2.1  使用 Andriller 提取应用程序的数据 ........................................................................... 109 
4.2.2  使用 AFLogical 提取联系人、通话记录和短信 ........................................................ 112 
4.2.3  使用 ADB backup 提取应用程序的数据 .................................................................... 124 
4.2.4  手动备份应用程序数据库 ........................................................................................... 128 
4.3  实施物理取证 .......................................................................................................................... 132 
4.3.1  Android 设备文件系统概述 ......................................................................................... 132 
4.3.2  Android 文件系统分区 ................................................................................................. 132 
4.3.3  使用 dd 命令提取数据 ................................................................................................. 134 
4.3.4  获取日志 ....................................................................................................................... 135 
第 5 章  SQLite 数据库 ........................................................................................................................... 139 
5.1  SQLite 数据库概述 .................................................................................................................. 139 
5.1.1  SQLite 数据库工作原理 ............................................................................................... 139 
5.1.2  SQLite 的特点 ............................................................................................................... 139 
Android 渗透测试入门教程（内部资料）——daxueba.net 版权所有 
·III· 
5.1.3  SQLite 工具内置命令 ................................................................................................... 140 
5.2  使用 SQLite 工具分析应用程序 ............................................................................................. 141 
5.2.1  安装和配置 sqlite 应用程序 ......................................................................................... 141 
5.2.2  使用 sqlite3 分析数据库 ............................................................................................... 143 
5.3  安全评估 .................................................................................................................................. 145 
5.3.1  安装和配置 VulnSqlite ................................................................................................. 145 
5.3.2  实施渗透测试 ............................................................................................................... 147 
5.3.3  实施 SQL 注入 .............................................................................................................. 148 
第 6 章  Android 系统攻击 ..................................................................................................................... 153 
6.1  WebView 概述 ......................................................................................................................... 153 
6.1.1  WebView 组件的使用 .................................................................................................. 153 
6.1.2  利用 WebView 漏洞实施渗透测试的方式 ................................................................. 154 
6.1.3  什么是 DNS 欺骗 ......................................................................................................... 155 
6.1.4  DNS 欺骗环境配置 ...................................................................................................... 156 
6.1.5  中间人攻击前配置 ....................................................................................................... 158 
6.1.6  实施中间人攻击（DNS 欺骗） .................................................................................. 161 
6.1.7  停止攻击 ....................................................................................................................... 168 
6.2  感染合法的 APK 包 ................................................................................................................ 168 
6.3  AD 库漏洞 ............................................................................................................................... 169 
6.4  跨应用程序 .............................................................................................................................. 170 
Android 渗透测试入门教程（内部资料）——daxueba.net 版权所有 
·4· 
第 1 章  Android 渗透测试 
Android 是一种基于 Linux 的自由及开放源代码的操作系统，主要用于移动设备，如智
能手机、平板等。目前，大部分用户都使用的是 Android 系统的手机。所以，学习 Android
渗透测试是非常重要的。用户通过对自己的 Android 设备进行渗透测试，可以评估自己的系
统是否安全，或者是否存在有漏洞等。本章将介绍 Android 渗透测试的基础知识。 
1.1  Android 系统概述 
Android（安卓）是一种基于 Linux 的自由及开发源代码的操作系统，主要用于移动设
备，如智能手机和平板电脑。它是由 Google 成立的 Open Handset Alliance（OHA，开放手
持设备联盟）领导及开发。Android 操作系统最初由 Andy Rubin 开发，主要支持手机。2005
年 8 月由 Google 收购注资。2007 年 11 月，Google 与 84 家硬件制造商、软件开发商及电信
营运商组建开发手机联盟共同研发改良 Android。随后 Google 以及 Apache 开源许可证的授
权方式，发布了 Android 的源代码。第一部 Android 智能手机发布于 2008 年 10 月。Android
逐渐扩展到平板电脑及其他领域，如电视、数码相机、游戏机等。 
Android 系统的发展也比较迅速，到目前已经到 Android 5（Lollipop）。每个版本的发
布时间及使用，如表 1-1 所示。 
表 1-1  Android版本 
版本 
代码名称 
发布时间 
API级别 
5.0（Lollipop） 
2014年6月26日 
21 
4.4 
KitKat 
2013年10月31日 
19 
4.3 
Jelly Bean 
2013年7月24日 
18 
4.2.X 
2012年11月13日 
17 
4.1.X 