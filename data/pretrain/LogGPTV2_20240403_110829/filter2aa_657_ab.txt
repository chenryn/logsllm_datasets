2012年7月9日 
16 
4.0.3-4.0.4 
Ice Cream Sandwich 
2011年12月16日 
15 
2.3.3-2.3.7 
Gingerbread 
2011年1月9日 
10 
2.2 
Froyo 
2010年5月20 
8 
1.2  什么是渗透测试 
渗透测试并没有一个标准的定义。国外一些安全组织达成共识的通用说法是，渗透测试
是通过模拟恶意黑客的攻击方法，来评估计算机网络系统安全的一种评估方法。渗透测试的
过程并非简单地运行一些扫描器和自动化工具，该过程中包括对系统的任何弱点、技术缺陷
或漏洞的主动分析。这个分析是从一个攻击者可能存在的位置来进行的，并且从这个位置有
条件主动利用安全漏洞。 
Android 渗透测试入门教程（内部资料）——daxueba.net 版权所有 
·5· 
1.2.1  渗透测试工作流程 
渗透测试与其它评估方法不同。通常的评估方法是根据已知信息资源或其它被评估对象，
去发现所有相关的安全问题。渗透测试是根据已知可利用的安全漏洞，去发现是否存在相应
的信息资源。相比较而言，通常评估方法对评估结果更具有全面性，而渗透测试更注重安全
漏洞的严重性。渗透测试通常有七个阶段，如下所示： 
 前期交互阶段：该阶段通常是用来确定渗透测试的范围和目标的。 
 信息收集阶段：在该阶段需要采用各种方法来收集目标主机的信息，包括使用社交
媒体网络、Google Hacking 技术、目标系统踩点等。 
 威胁建模阶段：该阶段主要是使用信息收集阶段所获取到的信息，来标识出目标系
统上可能存在的安全漏洞与弱点。 
 漏洞分析阶段：在该阶段将综合从前面几个环节中获取到的信息，从中分析和理解
那些攻击途径是可行的。特别是需要重点分析端口和漏洞扫描结果，截取到服务的
重要信息，以及在信息收集环节中得到的其它关键信息。 
 渗透攻击阶段：该阶段可能是在渗透测试过程中最吸引人的过程。然而在这种情况
下，往往没有用户所预想的那么一帆风顺，而往往是曲径通幽。在攻击目标主机时，
一定要清晰地了解在目标系统上存在这个漏洞。否则，根本无法攻击成功。 
 后渗透攻击阶段：该阶段在任何一次渗透过程中都是一个关键环节。该阶段将以特
定的业务系统作为目标，识别出关键的基础设施，并寻找客户组织最具价值和尝试
进行安全保护的信息和资产。 
 报告阶段：报告是渗透测试过程中最重要的因素，使用该报告文档可以交流渗透测
试过程中做了什么、如何做的以及最为重要的安全漏洞与弱点。 
1.2.2  渗透测试类型 
到现在为止，大家已经对渗透测试的基本技术流程与环节有了一个初步的了解。接下来
介绍一下渗透测试的两种基本类型，分别是黑盒测试和白盒测试。白盒测试有时也被称为“白
帽子”，是指渗透测试者在拥有客户组织所有知识的情况下进行的测试；而黑盒测试是指对
攻击主机一无所知的攻击者所进行的渗透测试。两种测试方法都拥有它们自己的优点和弱点。
下面分别介绍详细介绍这两种类型。 
1.白盒测试 
使用白盒测试，需要和客户组织一起工作，来识别出潜在的安全风险，客户组织将会向
用户展示它们的系统与网络环境。白盒测试最大的好处就是攻击者将拥有所有的内部信息，
并可以在不需要害怕被阻断的情况下任意地实施攻击。而白盒测试的最大问题在于无法有效
地测试客户组织的应急响应程序，也无法判断出它们的安全防护计划对检测特定攻击的效率。
如果时间有限，或是特定的渗透测试环节如信息收集并不在范围之内的话，那么白盒测试是
最好的渗透测试方法。 
2.黑盒测试 
黑盒测试与白盒测试不同的是，经过授权的黑盒测试是设计成为模拟攻击者的入侵行为，
并在不了解客户组织大部分信息和知识的情况下实施的。黑盒测试可以用来测试内部安全团
队检测和应对一次攻击的能力。 
Android 渗透测试入门教程（内部资料）——daxueba.net 版权所有 
·6· 
黑盒测试是比较费时费力的，同时需要渗透测试者具备更强的技术能力。它依靠攻击者
的能力通过探测获取目标系统的系统。因此，作为一次黑盒测试的渗透测试者，通常并不需
要找出目标系统的所有安全漏洞，而只需要尝试找出并利用可用获取目标系统访问权代价最
小的攻击路径，并保证不被检测到。 
不论测试方法是否相同，渗透测试通常具有两个显著特点。 
 渗透测试是一个渐进的并且逐步深入的过程。 
 渗透测试是选择不影响业务系统正常运行的攻击方法进行的测试。 
1.2.3  法律边界 
当实施渗透测试时，获取准确的书面授权是非常重要的事情。如果不清楚的话，可能导
致用户面临法律诉讼的问题，更有可能为此锒铛入狱。所以，这里简单介绍一些需注意的法
律边界问题。如下所示： 
 谁有权利授予这次渗透测试任务？ 
 测试的目的是什么？ 
 测试预计的时间范围是多少？测试中有什么限制，如什么时候可以进行测试？ 
 你的客户指定漏洞评估和渗透测试的区别吗？ 
 你在此次扫描测试过程中会和 IT 安全团队合作吗？你需要测试它们的能力吗？ 
 可以在渗透过程中使用社会工程学攻击吗？可以使用拒绝服务攻击吗？ 
 你能够使用一些物理安全测试方法来测试那些安全服务器、敏感数据存储、或其他
能够物理接触的设备吗？例如，撬锁、仿冒一些员工获得进入大楼的权限、或是进
入那些普通人员通常不能单独访问的区域。 
 你是否被允许查看网络文件，或者在测试之前告知网络架构来加速测试过程？如果
不明白这一点，可能会影响你得到测试结果的价值。但是在绝大多数业务中，这类
企业信息不会像用户想象的那么容易得到。 
 允许用户检查的 IP 范围是什么？没有经过正式允许的扫描和测试是法律所不允许
的。用户必须尽力弄清属于客户的网络范围和设备，否则可能会陷于法律指控的危
险之中。 
 公司的物理位置在哪里？如果允许使用社会工程学攻击，那么这个信息对测试人员
非常重要。因为这能够保证用户身处被测试的建筑物当中。如果时间允许，你应该
让客户指定。尽管他们认为自己的位置信息是保密或者难以发现的，但是你却能够
轻松地从公开渠道获取上诉的信息。 
 如果测试时遇到一个问题，或测试的最初目标已经达到，你应该做什么？你是否会
继续检查，以发现更多入口或结束测试？这个问题非常重要，它关系到客户为什么
要进行一次渗透测试这一首要问题。 
 用户需要注意不同国家对信息系统制定的法律不同。在针对渗透测试的法律上，不
是所有国家的法律都是相同的。 
 一旦通过漏洞攻击了系统，进一步拓展是否需要获得其他许可？这在对分段的网络
进行测试时非常重要。客户可能不会想到，你能够通过内网一台主机作为支点来进
一步渗透内网。 
 怎样处理数据库？是否允许你添加记录、用户等信息？ 
在渗透测试时，用户需要做一个列表，列出根据客户要求需要测试的内容。大部分数据
可以从客户那里直接收集，但是还有一些数据需要你们团队进行处理。如果担心法律问题，
Android 渗透测试入门教程（内部资料）——daxueba.net 版权所有 
·7· 
建议用户咨询一下法律顾问以确保对渗透测试的合法性有一个完全了解。 
1.3  安装 Kali Linux 
Kali Linux 是一个基于 Debian 的 Linux 发行版，该系统主要用于数字取证和渗透测试。
在该操作系统中预装了许多渗透测试软件，如端口扫描器、数据包分析器、密码破解工具等。
用户可以在硬盘、虚拟机、树莓派、USB 上安装该操作系统。本章将介绍在硬盘或虚拟机
中安装 Kali Linux 操作系统。 
1.3.1  在硬盘上安装 Kali Linux 
下面将介绍在硬盘上安装 Kali Linux 操作系统。在安装之前，首先需要获取 Kali Linux
系统的映像文件。Kali Linux 系统目前最新的版本是 1.0.9a，但是在该版本的安装过程中存
在 Bug。所以，为了使用户的操作更顺利，本小节将介绍 Kali Linux 系统 1.0.9 版本的安装
方法。 
Kali Linux 系统 1.0.9 版本的映像文件下载地址是 http://cdimage.kali.org/kali-1.0.9/，如图
1.1 所示。 
图 1.1  下载 Kali Linux ISO 映像文件 
从该界面可以看到，提供了四个映像文件的下载地址。本书以 64 位操作系统为例，讲
解安装和使用。所以，选择下载 kali-linux-1.0.9-amd64.iso 文件。下载完 ISO 文件后，将该
映像文件刻录到一张 DVD 光盘上。接下来，就可以着手将 Kali Linux 安装至硬盘了。 
【实例 1-1】在硬盘上安装 Kali Linux1.0.9。具体操作步骤如下所示： 
（1）将刻录好的 DVD 安装光盘插入到计算机的光驱中，启动该计算机并在 BIOS 设置
光盘为第一启动项。当系统重新启动后，将显示如图 1.2 所示的界面。 
Android 渗透测试入门教程（内部资料）——daxueba.net 版权所有 
·8· 
图 1.2  引导界面 
（2）该界面是 Kali 的引导界面，这里选择 Graphical install 选项安装该操作系统。在该
界面使用方向键向下选择 Graphical install 选项（图形界面安装），将显示如图 1.3 所示的界
面。 
图 1.3  选择语言 
（3）在该界面选择安装系统语言，这里选择 Chinese（Simplified）选项。然后单击 Continue
按钮，将显示如图 1.4 所示的界面。 
Android 渗透测试入门教程（内部资料）——daxueba.net 版权所有 
·9· 
图 1.4  确认选择的安装语言 
（4）在该界面提示是否要以所选的语言继续安装，这里选择“是”单选按钮。然后单
击“继续”按钮，将显示如图 1.5 所示的界面。 
图 1.5  选择区域 
（5）在该界面选择用户当前所在的区域，这里选择“中国”选项。然后单击“继续”
按钮，将显示如图 1.6 所示的界面。 
Android 渗透测试入门教程（内部资料）——daxueba.net 版权所有 
·10· 
图 1.6  配置键盘 
（6）该界面用来配置键盘。这里选择默认的键盘格式为汉语，单击“继续”按钮，将
显示如图 1.7 所示的界面。 
图 1.7  加载额外组件 
（7）该过程中会加载一些额外组件并且配置网络。当网络配置成功后，将显示如图 1.8
所示的界面。 
Android 渗透测试入门教程（内部资料）——daxueba.net 版权所有 
·11· 
图 1.8  设置主机名 
（8）在该界面要求设置主机名，这里使用默认设置的名称 Kali。该名称可以任意设置，
设置完后单击“继续”按钮，将显示如图 1.9 所示的界面。 
图 1.9  设置域名 
（9）该界面用来设置计算机使用的域名，用户也可以不设置。这里使用默认提供的域
名 localdomain，然后单击“继续”按钮，将显示如图 1.10 所示的界面。 
图 1.10  设置用户名和密码 
Android 渗透测试入门教程（内部资料）——daxueba.net 版权所有 
·12· 
（10）该界面设置根 root 用户的密码。为了安全起见，建议设置一个比较复杂点的密
码。设置完成后单击“继续”按钮，将显示如图 1.11 所示的界面。 
图 1.11  磁盘分区 