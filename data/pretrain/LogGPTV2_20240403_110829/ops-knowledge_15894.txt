User: How to write automation tasks using shell scripts to perform regular backup and cleanup tasks in the system?
Assistant: The following is an example of a shell script that can perform regular backup and cleanup tasks: #Set backup path BACKUP_PATH="/home/user/backup" #Set backup file name and date BACKUP_FILE="backup_$(date +%Y%m%d) .tar.gz" #Backup file tar -cvzf "$BACKUP_PATH/$BACKUP_FILE" /var/www/html #Clean up backup files 7 days ago find "$BACKUP_PATH" -type f -name "backup_*" -mtime +7 -exec rm {} \; #Set up a scheduled task, execute every Monday at 2 o'clock in the morning 0 2 * * 1 /bin/sh /home/user/backup.sh >/dev/null 2>&1 In this script, first set Specify the backup path, and then generate the backup file name and date. Then use the tar command to package the /var/www/html directory into a tar.gz file and save it to the backup path. After the backup is complete, use the find command to find the backup files in the backup path 7 days ago, and execute the rm command to delete these files. Finally, set a timed task to execute the script at 2 am every Monday.