User: 请回答以下安全问题保护数据库数据不受任何人的攻击，包括系统管理员等。简单的数据库数据加密一直困扰着我的一件事是：如果服务器被破坏，数据库就会被有效地破坏。攻击者可以根据需要使用与应用相同的代码来查询数据。对应用代码的简单审查将显示密钥存储在何处/如何存储，以及数据库连接参数是什么。
当然，在存储服务器外备份等时，加密数据可能会有所帮助，但为此，备份文件可以完全加密，而不是字段加密，从而省去了查询等方面的一些麻烦。
通常，确保服务器安全是最佳做法。但是，如果数据必须受到保护，不受包括系统管理员在内的所有人的影响（就像我们通过哈希处理用户密码的方式一样），该怎么办？
最终，我想知道，如何保护加密密钥，使任何没有秘密的人都无法访问它，即使是应用代码。我能想到的唯一方法是密钥必须由用户在运行时提供（它不是持久存在于主机上的，周期）。
我认为第一个问题是，如果用户可以访问服务器，那么可能有一种方法可以在进入点嗅探秘密，或者如果密钥由应用存储在内存中（例如，在会话变量中），这也可能被利用。
这种方法的其他（可能是明显的）问题是什么？这只是重新发明轮子吗？如果是这样的话，当数据安全至关重要时，即使是超级用户角色，最佳实践是什么？
这个问题可能有点类似于：如何使用相同的密码/密钥登录和加密数据，只是我问的是这个概念是否很好，而不是如何实现。

Assistant: 为了制作一个对其数据进行加密的实时数据库，数据库本身必须能够访问密钥。因此，任何管理员都可以登录该帐户并找到他们。你的担忧是合理的。
如果让用户通过SSH或SSL保护的连接提交安全密钥（例如RSA），那么让用户提交安全密钥的想法也不错@Eric G在下面的评论中提到了Mylar，它做了这类事情，等等。这很值得检查。
如果不是加密数据库，而是在数据输入数据库之前对其进行加密，那么您将有不同的可能性——这只是一种可能的替代方案：
数据在发布前进行加密，之后由客户端程序解密。数据库不会被加密，只会对其中的数据进行加密。
……或者对于真正的安全偏执狂来说——两者都做：数据库加密和数据加密，每种方法都不同。
下文将在评论中对更多内容进行描述和讨论。