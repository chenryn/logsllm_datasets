M
m
a
e
r
t
s
n
w
o
d
4000
2000
0
−2000
−4000
−6000
−8000
0
eDonkey
ports 80,8080
Telnet
BitTorrent
email
other
2
4
6
8 10 12 14 16 18 20 22
time (h)
m
a
e
r
t
s
p
u
d
e
r
r
e
f
s
n
a
r
t
s
e
t
y
b
M
m
a
e
r
t
s
n
w
o
d
300
200
100
0
−100
−200
−300
−400
−500
0
2
ports 80,8080
email
other
4
6
8 10 12 14 16 18 20 22
time (h)
m
a
e
r
t
s
p
u
d
e
r
r
e
f
s
n
a
r
t
s
e
t
y
b
M
m
a
e
r
t
s
n
w
o
d
1000
0
−1000
−2000
−3000
−4000
−5000
0
eDonkey
ports 80,8080
Telnet
BitTorrent
other
2
4
6
8 10 12 14 16 18 20 22
time (h)
(a) Application limitation.
(b) Access link saturation.
(c) Network limitation due
to a distant link.
Fig. 1. Amount of bytes experiencing a particular root cause. Note the diﬀerent scales.
In the download direction, the total traﬃc that is limited by a distant bot-
tleneck reaches in the late afternoon a proportion that, in terms of volume, is
almost as important as the download traﬃc that is application limited. The fact
that this traﬃc peaks late afternoon2 may be an indication of higher overall net-
work utilization just after working hours, not only within the France Telecom
network but in wider scale, that causes more cross traﬃc in aggregating links.
Note that at the same time, the amount of traﬃc limited by the access link is
very low (Figure 1(b)), which could indicate that these two groups represent
diﬀerent types of clients.
Finally, we would like to point out that a comparison of the absolute traﬃc
volumes of Figures 1(a) – 1(c) reveal that the application limitation category
represents the vast majority of the total number of transmitted bytes.
3.4 Impact of the Root Causes on Access Link Utilization
Now, we want to know how the three main root causes of throughput impact
the access link utilization of the clients. We focus on link utilization and not on
absolute throughput, because clients have diﬀerent link capacities and we want
to understand how far we are from the maximum, i.e. access link saturation.
As before, we included in the analysis for each client only the traﬃc of the 30-
minute period for which that client achieved its highest instantaneous through-
put. We computed client’s link utilization during ALPs and BTPs limited by
diﬀerent causes. In this way, we can quantify the impact of diﬀerent limitation
causes on the performance. Figure 2 shows CDF plots of the results.
We focus ﬁrst on uplink utilization: We see that for the case of an unshared
bottleneck, the utilization is in approximately 70% of the cases very close to one,
which means that in these cases the uplink of the client is the bottleneck. In the
remaining 30% of cases where we observe an unshared bottleneck, we see a link
utilization between 0.4 and 0.85 that can be due to a distant access downlink,
2 An analysis of the IP addresses using Maxmind (http://www.maxmind.com/) re-
vealed that most of the local clients exchange data primarily with peers/servers
located in France or surrounding countries.
152
M. Siekkinen et al.
unsh bn
sh bn
application
1
0.8
0.6
0.4
0.2
)
x
(
F
0
0
0.2
limited by
access link
1
0.8
0.6
0.4
0.2
)
x
(
F
0.4
0.6
utilization
0.8
1
0
0
0.2
unsh bn
sh bn
application
0.8
1
0.4
0.6
utilization
(a) upstream
(b) downstream
Fig. 2. CDF plot of access link utilization for the diﬀerent root causes. For each client,
we consider only traﬃc of the 30 min period during which that client achieved the
highest instantaneous throughput of the day.
e.g. a peer that has lower downlink capacity than the uplink capacity of the
local peer, or due to simply misclassiﬁcation. For the two other root causes,
application limitation and shared bottleneck, the clients achieve in about 60%
of the cases a link utilization of less than half the uplink capacity.
If we look at the utilization of the downlink, we see that application limited
traﬃc results most of the time in a very poor downlink utilization. Given that
most of the application limited traﬃc is eDonkey traﬃc (cf. Figure 1(a)), one
might be tempted to explain this low utilization by that fact that most likely the
peer that sources the data has an asymmetric connection with the uplink capac-
ity being much lower than the downlink capacity of the receiving peer3. However,
a downloading peer has usually multiple parallel download connections, which in
aggregation should be able to fully utilize the downlink capacity. The fact that
this is not the case seems to indicate that many users of eDonkey use the possibil-
ity oﬀered by todays P2P applications to limit their upload rate. Figure 3, which
plots the maximum instantaneous aggregate download rates achieved per-client
for diﬀerent applications, further supports this hypothesis. We see that the maxi-
mum aggregate download rates of P2P applications, eDonkey and BitTorrent, are
clearly below the maximum download rates of FTP and port 80/8080 traﬃc.
A recent study of eDonkey transfers by ADSL clients [8] found that the average
ﬁle download speed achieved was only a few kB/sec. Our ﬁndings seem to indicate
that such a poor performance is not due to network or access link saturation but
rather due to eDonkey users drastically limiting the upload rate of their application.
3.5 Comparison with Other RCA Work
In [4], Zhang et al. performed ﬂow-level root cause analysis of TCP throughput
using a tool called T-RAT. They analyzed packet traces collected at high speed
3 Maxmind also reported that a clear majority of the distant IPs that the heavy-hitters
communicated with were clients of ISPs providing residential services.
Performance Limitations of ADSL Users: A Case Study
153
1
0.8
0.6
0.4
0.2
)
x
(
F
0
101
eDonkey
ports 80,8080
FTP
BitTorrent
102
103
max download throughput of host (Kbit/s)
104
Fig. 3. CDF plot of maximum aggregate per-host download throughput computed over
ﬁve second intervals
access links connecting two sites to the Internet, at a peering link between two
Tier 1 providers, and at two sites on a backbone network. As results, the authors
reported that, in terms of traﬃc volume aﬀected, congestion (similar to network
limitation in our vocabulary) was the most common limiting factor followed
by host window limitation (TCP end-point in our vocabulary). It is important
to notice that the data used were collected in 2001-2002. At that time, the
popularity of P2P applications such as eDonkey was far from what it is today.
In order to understand whether or not our results are speciﬁc to this partic-
ular access network, we applied our RCA tool also to other publicly available
packet traces collected at an ADSL access network in Netherlands (http://m2c-
a.cs.utwente.nl/repository/). We looked at two 15-minute traces: one captured
in 2002 and another one in 2004. A port based study similar to the one in Section
2 showed that in the 2002 trace, the applications generating most traﬃc were
FTP and applications using ports 80 and 8080, while eDonkey and BitTorrent
were dominating in the 2004 trace. We were unable to perform similar client-level
study due to lack of knowledge about local client IP addresses and limited cap-
ture durations. However, simple connection-level RCA revealed that in the 2002
trace around 40% of bytes were throughput limited by the application, while
this percentage was already roughly 65% in the 2004 trace, which demonstrates
the impact of the increase in P2P application traﬃc.
4 Conclusions
We analysed one day ADSL traﬃc generated by more than one thousand clients.
We observed that most of the clients never utilize more than a very small frac-
tion of their upload and download capacity. TCP root cause analysis revealed
that most of the user traﬃc is in fact application limited, which means that
the users of P2P applications impose upload rate limits that are chosen to be
very low. Other root causes that were typically observed in previous studies [4]
play only a minor role: We saw some occurrences of network limitation, as well as
154
M. Siekkinen et al.
rare occurrencies of limitations by TCP conﬁguration issues such as too small
a receiver window, but the amount of bytes transferred and aﬀected by these
causes were very small in comparison.
By severely limiting the aggregate upload rate of their P2P applications,
clients certainly make sure that their P2P traﬃc does not interfere with con-
current activities such as Web serving or IP telephony. However, this comes at
the price of very long download times, which makes the current rate limitation
strategies used by P2P clients very ineﬃcient from a users point of view.
The implication of such a low access link utilization is naturally low utilization
of the entire access network, which is beneﬁcial for the service provider. However,
the utilization and traﬃc volumes can change dramatically in case a new type
of popular P2P application is deployed or an already existing one is upgraded
to utilize the uplink in a diﬀerent, more eﬀective way.
References
1. Siekkinen, M., Collange, D., Urvoy-Keller, G., Biersack, E.W.: Application-
level performance of ADSL users. Technical report (2006) http://www.iﬁ.uio.no/
˜siekkine/pub.html.
2. Karagiannis, T., et al.: Is P2P dying or just hiding? In: Proc. Globecom 200. (2004)
3. Cho, K., Fukuda, K., Esaki, H., Kato, A.: The impact and implications of the
growth in residential user-to-user traﬃc. In: Proceedings of ACM SIGCOMM ’06,
New York, NY, USA, ACM Press (2006) 207–218
4. Zhang, Y., Breslau, L., Paxson, V., Shenker, S.: On the characteristics and origins
In: Proceedings of ACM SIGCOMM ’02, Pittsburgh, PA,
of internet ﬂow rates.
USA (2002)
5. Siekkinen, M., Urvoy-Keller, G., Biersack, E., En-Najjary, T.: Root cause analysis
for long-lived tcp connections. In: Proceedings of CoNEXT. (2005)
6. Siekkinen, M., Urvoy-Keller, G., Biersack, E.W.:
plications on tcp transfers.
report,
http://www.eurecom.fr/˜siekkine/pub/RR-05-147.pdf.
Technical
On the impact of ap-
Institut Eurecom (2005)
7. Siekkinen, M.: Root Cause Analysis of TCP Throughput: Methodology, Techniques,
and Applications. PhD thesis, Institut Eur´ecom / Universit´e de Nice-Sophia An-
tipolis, Sophia Antipolis, France (http://www.iﬁ.uio.no/˜siekkine/pub.html) (2006)
8. Plissonneau, L., Costeux, J.L., Brown, P.: Detailed analysis of edonkey transfers on
adsl. In: Proceedings of EuroNGI. (2006)