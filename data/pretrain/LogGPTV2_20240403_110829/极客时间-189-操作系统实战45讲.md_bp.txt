# 查看hierarchy的subsystem，为/sys/fs/cgroup/memory/    mount | grep memory     cd /sys/fs/cgroup/memory/    sudo mkdir cosmos-limit-memory    cd cosmos-limit-memory    ls![](Images/858f37fb98a3209535b3bf3ef143a045.png)savepage-src="https://static001.geekbang.org/resource/image/dd/2e/dd7f2f85fab07ed11870c032cc1bee2e.png?wh=1456x438"}先启动一个未限制的进程，代码如下。    stress --vm-bytes 200m --vm-keep -m 1代码运行后的结果如下图所示。![](Images/6ec56a92230cd9cfc9d9afec54275f37.png)savepage-src="https://static001.geekbang.org/resource/image/28/c0/2896f2b21b6a8f8ee028883c0e20a9c0.png?wh=1240x114"}现在我们设置最大内存，并且将进程移动到当前 Cgroup中，在此运行一个进程。这样操作以后，我们就可以通过 top 命令看到已经将stress 的最大内存限制到 100m了。     
# 设置最大内存占用    sh -c "echo "100m" > memory.limit_in_bytes"    