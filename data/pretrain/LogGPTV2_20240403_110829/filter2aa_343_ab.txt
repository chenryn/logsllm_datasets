Solving Authentication Problems
122
A User’s Password Can’t Be Modified
122
A User Can’t Authenticate for VPN Service
122
A User’s Password Type Can’t Be Changed to Open Directory
122
Kerberos Users Can’t Authenticate
123
Resetting an Administrator Password
Appendix A
125
Mac OS X Directory Data
126
Open Directory Extensions to LDAP Schema
126
Object Classes in Open Directory LDAP Schema
132
Attributes in Open Directory LDAP Schema
145
Mapping Standard Attributes to LDAP and Active Directory
145
Mappings for Users
149
Mappings for Groups
150
Mappings for Mounts
151
Mappings for Computers
153
Mappings for ComputerLists
153
Mappings for Config
154
Mappings for People
156
Mappings for PresetComputerLists
156
Mappings for PresetGroups
157
Mappings for PresetUsers
159
Mappings for Printers
160
Mappings for AutoServerSetup
160
Mappings for Locations
161
Standard Attributes in User Records
165
User Data That Mac OS X Server Uses
166
Standard Attributes in Group Records
168
Standard Attributes in Computer Records
169
Standard Attributes in Computer List Records
170
Standard Attributes in Mount Records
171
Standard Attributes in Config Records
Appendix B
173
Open Directory Password Server Authentication Methods
173
Enabling or Disabling Authentication Methods
174
APOP Password Validation
174
CRAM-MD5 Password Validation
174
DHX Password Validation
175
Digest-MD5 Password Validation
175
MS-CHAPv2 Password Validation
175
SMB-NT Password Validation
175
SMB-LAN Manager Password Validation
LL2352.Book  Page 7  Friday, August 22, 2003  3:12 PM
8
Contents
176
WebDAV-Digest Password Validation
Appendix C
177
Authentication Manager
Glossary
179
Index
185
LL2352.Book  Page 8  Friday, August 22, 2003  3:12 PM
9
Preface
About This Guide
This guide describes the directory services and 
authentication services that Mac OS X Server can provide 
to Mac OS X client computers. 
Here is a summary of each chapter’s contents:
• Chapter 1, “Directory Service Concepts,” explains what directory domains are, how 
they are used, and how they are organized. It also discusses how the discovery of 
network services is integrated with directory services.
• Chapter 2, “Open Directory Search Policies,” describes search policies with one or 
more directory domains, and describes automatic, custom, and local-only search 
policies.
• Chapter 3, “User Authentication With Open Directory,” describes Open Directory 
authentication, shadow and crypt passwords, Kerberos, LDAP bind, single signon, 
and cached authentication for mobile accounts.
• Chapter 4, “Open Directory Planning,” helps you assess your directory domain needs, 
estimate directory and authentication requirements, identify servers of hosting 
shared domains, improve performance and redundancy, deal with replication in a 
multi-building campus, and make your Open Directory services secure. This chapter 
also introduces the tools you use to manage Open Directory services.
• Chapter 5, “Setting Up Open Directory Services,” tells you how to set the Open 
Directory role of Mac OS X Server:  standalone server, connected to a directory 
system, Open Directory master, or Open Directory replica. This chapter also tells you 
how to set some options of the LDAP service of an Open Directory master or replica 
and explains how to migrate a directory domain from NetInfo to LDAP. This chapter 
also tells you how to set up single signon and Kerberos authentication on an Open 
Directory master.
• Chapter 6, “Managing User Authentication,” describes how to set password policies, 
change a user’s password type, assign administrator rights for Open Directory 
authentication, reset passwords of imported user accounts, and migrate passwords 
to Open Directory authentication.
LL2352.Book  Page 9  Friday, August 22, 2003  3:12 PM
10
Preface    About This Guide
• Chapter 7, “Managing Directory Access,” explains how to use the Directory Access 
application. This chapter tells you how to set up services and authentication and 
contacts search policies. This chapter also explains how to configure access to 
different directory domains:  LDAP, Active Directory, NIS, BSD configuration files, and 
NetInfo.
• Chapter 8, “Maintenance and Problem Solving,” tells you how to monitor Open 
Directory services, directly view and edit directory data with the Inspector, and back 
up Open Directory files. This chapter also describes solutions to some problems you 
may encounter.
• Appendix A, “Mac OS X Directory Data,” lists the Open Directory extensions to the 
LDAP schema and specifies the standard record types and attributes of Mac OS X.
• Appendix B, “Open Directory Password Server Authentication Methods,” describes 
the authentication methods that Open Directory supports.
• Appendix C, “Authentication Manager,” tells you about the Authentication Manager 
technology that provides compatibility with user accounts created in Mac OS X 
Server version 10.0–10.2.
• The Glossary defines terms you’ll encounter as you read this guide.
Using This Guide
The chapters in this guide are arranged in the order that you’re likely to need them 
when setting up and managing Open Directory on your server.
• Review Chapter 1 through Chapter 3 to acquaint yourself with Open Directory 
concepts:  directory services, search policies, and authentication.
• Read Chapter 4 when you’re ready to plan directory services and password 
authentication for your network. 
• After you finish planning, use the instructions in Chapter 5 to set up Open Directory 
services.
• Whenever you need to set password policies or change password settings in a user 
account, look for instructions in Chapter 6.
• If you need to set up or change how a Mac OS X or Mac OS X Server computer 
accesses directory domains, follow the instructions in Chapter 7.
• For ongoing maintenance of directory and authentication services, use Chapter 8.
LL2352.Book  Page 10  Friday, August 22, 2003  3:12 PM
Preface    About This Guide
11
Getting Additional Information
Mac OS X Server comes with a suite of guides that explain other services and provide 
instructions for configuring, managing, and troubleshooting those services. Most of 
these documents are on the server discs in the form of PDF files. All of them are 
available in PDF format from www.apple.com/server/documentation. 
This guide
Tells you how to 
Mac OS X Server Getting Started 
For Version 10.3 or Later
Understand the new features of Mac OS X Server version 10.3 and 
prepare your server.
Mac OS X Server Migration To 
Version 10.3 or Later
Reuse data and service settings on Mac OS X Server version 10.3 
that are currently being used on earlier versions of the server.
Mac OS X Server User 
Management For Version 10.3 or 
Later
Create and manage user, group, and computer accounts. Set up 
managed preferences for Mac OS 9 and Mac OS X clients.
Mac OS X Server File Services 
Administration For Version 10.3 or 
Later
Share selected server volumes or folders among server clients 
using these protocols:  AFP, NFS, FTP, and SMB.
Mac OS X Server Print Service 
Administration For Version 10.3 or 
Later
Host shared printers and manage their associated queues and print 
jobs.
Mac OS X Server System Image 
Administration For Version 10.3 or 
Later
Create disk images and set up the server so that other Macintosh 
computers can start up from those images over the network. This 
guide covers NetBoot and Network Install.
Mac OS X Server Mail Service 
Administration For Version 10.3 or 
Later
Set up, configure, and administer mail services on the server.
Mac OS X Server Web 
Technologies Administration For 
Version 10.3 or Later
Set up and manage a web server, including WebDAV, WebMail, and 
web modules.
Mac OS X Server Network Services 
Administration For Version 10.3 or 
Later
Set up, configure, and administer DHCP, DNS, IP firewall, NAT, and 
VPN services on the server.
Mac OS X Server Windows 
Services Administration For 
Version 10.3 or Later
Set up and manage services for Windows users.
Mac OS X Server QuickTime 
Streaming Server Administration 
For Version 10.3 or Later
Set up and manage QuickTime streaming services.
Mac OS X Server:  Java 
Application Server Administration
Deploy and manage J2EE applications using a JBoss application 
server on Mac OS X Server.
Mac OS X Server Command-Line 
Administration For Version 10.3 or 
Later
Use commands and configuration files to perform server 
administration tasks in a UNIX command shell.
LL2352.Book  Page 11  Friday, August 22, 2003  3:12 PM
12
Preface    About This Guide
For more information, consult these resources:
• Read Me documents contain important updates and special information. Look for 
them on the server discs.
• Online help, available from the Help menu in all the server applications, provides 
onscreen instructions for administration tasks as well as late-breaking news and web 
updates.
• Apple support webpages and the AppleCare Knowledge Base provide answers to 
common questions and the latest information updates. These are available at 
www.info.apple.com/
• Apple Training offers courses for technical coordinators and system administrators. 
For a course catalog, visit the following website:
train.apple.com/
• Discussion groups and mailing lists put you in touch with other server administrators, 
who may have already found solutions to problems you encounter. To find discussion 
groups and mailing lists, visit the following websites:
discussions.info.apple.com/
www.lists.apple.com/
LL2352.Book  Page 12  Friday, August 22, 2003  3:12 PM
1
13
1 Directory Service Concepts
A directory service provides a central repository for 
information about computer users and network 
resources in an organization. 
Storing administrative data in a central repository has many benefits: 
• Reduces data entry effort.
• Ensures all network services and clients have consistent information about users and 
resources.
• Simplifies administration of users and resources.
• Provides identification, authentication, and authorization services for other network 
services.
In education and enterprise environments, directory services are the ideal way to 
manage users and computing resources. Organizations with as few as 10 people can 
benefit by deploying a directory service.
Directory services can be doubly beneficial. They centralize system and network 
administration, and they simplify a user’s experience on the network. With directory 
services, information about all the users—such as their names, passwords, and 
locations of network home directories—can be maintained centrally rather than on 
each computer individually. Directory services can also maintain centralized 
information about printers, computers, and other network resources. Having 
information about users and resources centralized can reduce the system 
administrator’s user management burden. In addition, users can log in to any 
authorized computer on the network. Anywhere a user logs in, the user can get the 
same home directory, and with it the user’s personal desktop appears, customized for 
the user’s individual preferences. The user always has access to personal files and can 
easily locate and use authorized network resources.
LL2352.Book  Page 13  Friday, August 22, 2003  3:12 PM
14
Chapter 1    Directory Service Concepts
Apple has built an open, extensible directory services architecture, called Open 
Directory, into Mac OS X and Mac OS X Server. A Mac OS X client or Mac OS X Server 
computer can use Open Directory to retrieve authoritative information about users and 
network resources from a variety of directory services:
• LDAP service on a Mac OS X Server system
• NetInfo service on a computer with Mac OS X or Mac OS X Server
• Active Directory service on a Microsoft Windows server
• OpenLDAP or other LDAP service on a third-party server such as Sun One or Novell 
eDirectory
• NIS on a UNIX server
• BSD configuration files stored locally (not retrieved from a server)
Mac OS 9 and Mac OS 8 managed clients also use Open Directory to retrieve some user 
information. For more information, see the Macintosh Manager chapter in the user 
management guide (available at www.apple.com/server/documentation/).
In addition, Mac OS X and Mac OS X Server can use Open Directory to discover network 
services, such as file servers, that make themselves known with the Rendezvous, 
AppleTalk, SLP, or SMB service discovery protocols.
The Open Directory architecture also includes authentication service. Open Directory 
can securely store and validate the passwords of users who want to log in to client 
computers on your network or use other network resources that require 
authentication. Open Directory can also enforce such policies as password expiration 
and minimum length. Open Directory can also authenticate Windows computer users 
for domain login, file service, print service, and other Windows services provided by 
Mac OS X Server. 
LL2352.Book  Page 14  Friday, August 22, 2003  3:12 PM
Chapter 1    Directory Service Concepts
15
Directory Services and Directory Domains
A directory service acts as an intermediary between application and system software 
processes, which need information about users and resources, and the directory 
domains that store the information. In Mac OS X and Mac OS X Server, Open Directory 
provides directory services. Open Directory can access information in one directory 
domain or several directory domains.
A directory domain stores information in a specialized database that is optimized to 
handle a great many requests for information and to find and retrieve information 
quickly. 
Processes running on Mac OS X computers can use the Open Directory services to save 
information in directory domains. For example, when you create a user account with 
Workgroup Manager, it has Open Directory store user name and other account 
information in a directory domain. Of course you can then review user account 
information with Workgroup Manager, and it has Open Directory retrieve the user 
information from a directory domain.
Printers
Groups
Computers
Users
Application and 
system software 
processes
Mounts
Directory 
domains
Open
Directory
LL2352.Book  Page 15  Friday, August 22, 2003  3:12 PM
16
Chapter 1    Directory Service Concepts
Other application and system software processes can also use the user account 
information stored in directory domains. When someone attempts to log in to a 
Mac OS X computer, the login process uses Open Directory services to validate the user 
name and password.
A Historical Perspective
Like Mac OS X, Open Directory has a UNIX heritage. Open Directory provides access to 
administrative data that UNIX systems have generally kept in configuration files, which 
require much painstaking work to maintain. (Some UNIX systems still rely on 
configuration files.) Open Directory consolidates the data and distributes it for ease of 
access and maintenance.
Directory 
domain
WorkGroup Manager
Open
Directory
LL2352.Book  Page 16  Friday, August 22, 2003  3:12 PM
Chapter 1    Directory Service Concepts
17
Data Consolidation
For years, UNIX systems have stored administrative information in a collection of files 
located in the /etc directory. This scheme requires each UNIX computer to have its own 
set of files, and processes that are running on a UNIX computer read its files when they 
need administrative information. If you’re experienced with UNIX, you probably know 
about the files in the /etc directory—group, hosts, hosts.eq, master.passwd, and so 
forth. For example, a UNIX process that needs a user’s password consults the /etc/
master.passwd file. The /etc/master.passwd file contains a record for each user account. 
A UNIX process that needs group information consults the /etc/group file.
Open Directory consolidates administrative information, simplifying the interactions 
between processes and the administrative data they create and use. 
UNIX processes
/etc/master.passwd
/etc/hosts
/etc/group
Mac OS X processes
Open
Directory
LL2352.Book  Page 17  Friday, August 22, 2003  3:12 PM
18
Chapter 1    Directory Service Concepts