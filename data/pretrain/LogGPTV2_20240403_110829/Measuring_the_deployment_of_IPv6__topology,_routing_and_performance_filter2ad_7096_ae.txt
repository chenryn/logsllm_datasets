2012
Time
Figure 11: Churn growth in relation to topology size
in IPv4 (top) and IPv6 (bottom). BGP churn, in
both IPv4 and IPv6, grows linearly with the number
of ASes.
with the Oregon-IX collector show similar behavior. We
hypothesize that the anomalies exhibited by the AT&T and
NTT monitors are caused by non-stationary periods, which
we conﬁrm by ﬁltering out noise from the AT&T time series
as described in [26] and plotted in Figure 11 (top panel) as
AT&T*. Similar to the other monitors, this ﬁltered AT&T*
time series exhibits a stable ratio of 5 updates per origin AS.
To summarize, while previous work has pointed to the
qualitatively diﬀerent growth trajectories of IPv4 and Ipv6
churn, we showed that churn in both protocols grows at the
same rate as the underlying topology. We emphasize that
understanding the evolution of update dynamics requires ex-
amining more than temporal evolution; we must also con-
sider the evolution of the underlying topology. Measuring
churn normalized by the size of the underlying topologies re-
veals a richer picture, namely that BGP update dynamics in
IPv4 and IPv6 are qualitatively similar and their growth is
a function of the growth in the number of ASes. Explaining
why the average number of updates per AS is 5 in IPv4 and
3 in IPv6 is an interesting open question. We believe that
this has to do with the nature of the underlying topologies
and prevalent operational practices such as business rela-
tionships and traﬃc engineering.
Churn seen from diﬀerent vantage points
The churn seen from diﬀerent vantage points can shed some
light on the maturity of the underlying topology, because
as ASes establish denser interconnections and enforce busi-
ness relationships, churn becomes more localized, i.e., some
routing events only aﬀect a limited part of the Internet.
We calculate the cross-correlation between all pairs of
daily churn time series in IPv6 and IPv4 respectively, for the
monitors in Figure 11. We use the non-parametric Kendall’s
τ rank correlation coeﬃcient [29], a measure of association
between random variables based on the ranking of their sam-
ple data. Kendall’s τ takes value in the range [-1,1]; a value
of 1 denotes a perfect correlation and a value of -1 denotes
anti-correlation. Figure 12 shows the calculated correlation
τ
s
’
l
l
a
d
n
e
K
 0.8
 0.6
 0.4
 0.2
 2
 4
 6
 8
 10
Pair ID
IPV6
IPV4
Figure 12: Correlation of the BGP churn time se-
ries across monitors. IPv6 monitors exhibit stronger
correlation than IPv4 monitors.
coeﬃcients between all pairs of IPv6 time series, as well
as between all IPv4 pairs.
IPv4 pairs show little correla-
tion, with τ values mostly below 0.4, but IPv6 pairs show
strong positive correlation, with τ values mostly above 0.5.
The lack of correlation between IPv4 monitors indicates that
churn is highly dependent on the location and conﬁguration
of the corresponding router. As stated earlier, this is likely
due to denser interconnection and enforcement of business
relationships in the IPv4 topology. We have studied this
eﬀect in our previous work, where we showed that correla-
tion between IPv4 churn time series doubles after ﬁltering
out updates triggered by routing events that aﬀect only a
limited part of the Internet [26].
To summarize, we ﬁnd that the churn seen by diﬀerent
BGP vantage points shows stronger correlation in IPv6 as
compared to that in IPv4. Two factors might contribute
to the stronger correlation between IPv6 time series than
in IPv4. First, the IPv6 AS graph is much smaller and
thus provides less isolation (i.e., routing changes will have
a larger scope of impact). A second possibility is that since
IPv6 deployment is still at an early stage, business policies
may be less enforced and monitored, which would also result
in less isolation of BGP messages. As IPv6 deployment pro-
ceeds, we expect both of these factors to change; the IPv6
topology is growing exponentially, interconnection is becom-
ing denser, and business relationships in IPv6 will start to
be enforced. Thus, we expect the correlation of IPv6 churn
seen from diﬀerent BGP monitors to decrease over time and
become similar to that in IPv4.
6.2 Path exploration and convergence times
Routing changes have diﬀerent outcomes. Some changes
result in the withdrawal (addition) of a preﬁx from (to) the
routing table. Other changes alter the reachability informa-
tion to a preﬁx (e.g. rerouting). In addition, routing changes
can be transient or long-lasting. The eﬀects of routing in-
stability on data plane characteristics such as loss rate have
been well studied [23]. It is thus important to compare rout-
ing changes in IPv6 and IPv4. But, ﬁrst we must identify
and group preﬁx updates that constitute a routing change.
When an underlying incident triggers a routing change, it
often results in several updates for each aﬀected preﬁx (i.e.,
convergence sequence). The duration of this convergence se-
quence is referred to as convergence time. A preﬁx event is
a sequence of updates for a given preﬁx that are likely trig-
gered by the same underlying cause. We use the deﬁnition
545 
s
e
t
a
d
p
U
g
v
A
t
n
e
v
e
r
e
p
 16
 14
 12
 10
 8
 6
 4
 2
IPv6
IPv4
e
c
n
e
g
r
e
v
n
o
c
e
g
a
r
e
v
A
)
s
d
n
o
c
e
S
(
e
m
i
t
Jan
2003
Jan
2004
Jan
2005
Jan
2006
Jan
2007
Jan
2008
Jan
2009
Jan
2010
Jan
2011
Jan
2012
 200
 160
 120
 80
 40
IPv6
IPv4
Jan
2003
Jan
2004
Jan
2005
Jan
2006
Jan
2007
Jan
2008
Jan
2009
Jan
2010
Jan
2011
Jan
2012
Time
Figure 13: Comparing path exploration and conver-
gence times (IIJ). The average number of updates
per routing change event gradually converges be-
tween IPv4 and IPv6. The average convergence time
in IPv6 is burstier, with a lower bound at a similar
level as in IPv4.
by Wu et al. [30] to identify preﬁx events: Two consecutive
updates for the same preﬁx belong to the same preﬁx event
if they are no more than 70 seconds apart. The maximum
duration for a preﬁx event is set to 10 minutes. Events with
duration longer than 10 minutes are considered to be ﬂap-
ping. These preﬁx events can be classiﬁed based on the
best known path to the aﬀected preﬁx before and after the
event [31, 32]. After identifying all preﬁx events in our time
series, we compute two metrics reﬂecting their impact: path
exploration (average number of updates observed per event)
and convergence time. When a route to a preﬁx fails, BGP
may explore several routes before converging to a new route
or withdrawing the preﬁx altogether. A longer path ex-
ploration extends BGP convergence time which will likely
impede data plane performance.
Path exploration
Path exploration is often more pronounced in events that
lead to a complete withdrawal of a preﬁx (AW events) [32].
The top panel in Figure 13 compares the average number
of updates per an AW event in IPv6 and IPv4 as seen from
the perspective of IIJ6. In IPv4, this number has mostly re-
mained stable below 4. We also observe a slight increase
in post-withdrawal path exploration after 2009.
In IPv6,
on the other hand, this number was around 10 updates un-
til early 2005,
it then decreased gradually and stabilized
around 4. When investigating AW events that took place
in the ﬁrst two years of the study period, we ﬁnd that our
monitors explored monotonically longer paths before send-
ing the ﬁnal withdrawal.
In IIJ for example, the median
length of the longest explored path was 18 hops in January
2004 and gradually dropped to stabilize around 7 hops in
6Due to space limitations, we only present results for the IIJ
monitor. Other monitors show qualitatively similar results.
2008. We can imagine two possible causes for this gradual
reduction in path exploration. First, ten years ago only a
few hundred ASes had deployed IPv6, and routing policies
may have been less enforced, allowing exploration of many
more alternative paths. Second, the early IPv6 graph was
sparser, so paths were naturally longer (see Figure 7), lead-
ing to proportionally longer convergence times (i.e., more
path exploration) [33]. The trends identiﬁed above are con-
sistent across monitors.
Convergence times
The bottom panel in Figure 13 shows the evolution of BGP
convergence time from the perspective of IIJ, measured as
the monthly average of all preﬁx event durations (i.e., the
time diﬀerence between the ﬁrst update and the last update
in an event). The average convergence time in IPv4 is sta-
ble around 50 seconds, but is higher and less stable in IPv6.
During 2004, IPv6 convergence time was slightly higher, sim-
ilar to the path exploration metric. We also recorded two
periods with sustained higher convergence times, in 2006 and
2010. A closer look at the data showed that the increase in
2006 was caused by one preﬁx that ﬂapped between two
paths that only diﬀered in the ATOMIC AGGREGATE at-
tribute (i.e., one path is announced as aggregated while the
other as not). The fact that a single preﬁx has a large impact
on the measured convergence time is surprising. However,
our data shows that the small size of the IPv6 routing system
makes it vulnerable to such eﬀects. The number of preﬁx
events per day rose sharply from ≈ 200 before this instabil-
ity to ≈ 350 due to the unstable preﬁx; this single ﬂapping
preﬁx experienced 150 instabilities per day. On the other
hand, the number of preﬁx events per day is two orders of
magnitude larger in IPv4 than in IPv6. When we exclude
events related to this preﬁx, the convergence time drops to
the same level as prior to the instability. A similar ﬂap-
ping that involved ﬁve preﬁxes caused the peak in 2010. We
believe that this activity was triggered by an IGP miscon-
ﬁguration in the origin AS. These peaks were evident in all
monitors, consistent with the earlier observed strong corre-
lation between IPv6 monitors. Apart from these anomalous
periods, IPv6 generally matched IPv4 in terms of conver-
gence time.
To summarize, the evolution of path exploration and con-
vergence time shows that the characteristics of routing changes
in IPv6 are gradually becoming similar to those in in IPv4.
This is an encouraging trend, as it suggests an increasing
maturity in IPv6 deployment. Furthermore, any performance
degradations resulting from routing changes in IPv6 should
be no worse than we see in IPv4.
7.
IPV4 VS. IPV6 PERFORMANCE
Figure 14 plots the the relative performance as measured
by relative download times for all ﬁve vantage points we
use (method described at the end of Section 2). Conﬁrm-
ing the results of Nikkhah et al. [16], 79% of paths we ob-
served had IPv6 performance within 10% of IPv4 (or IPv6
had better performance) if the forward AS-level path was
the same in both protocols, while only 63% of paths had
similar performance if the forward AS-level path was diﬀer-
ent. However, our measurements (and theirs) are dominated
by the path RTT because the transfers are typically small
(although we only analyze measurements of transfers over
10K bytes). The dashed lines in Figure 14 plot the relative
546 1
 0.8
F
D
C
C
 0.6
 0.4
 0.2
 0
1
IPv6 faster
IPv4 faster
Same Path Perf
Diff Path Perf
Same Path RTT
Diff Path RTT
10%
5%
37%
21%
0.5
.1 0
.1
0.5
1
(slower−faster)/faster
Figure 14: Relative performance between IPv4 and
IPv6 measured by the relative mean fetch times
(solid lines) and minimum SYN/ACK RTT (dashed
lines). Because small pages (although over 10K
bytes) are fetched, performance is dominated by rel-
ative RTT. The annotations at x=0.1 represent the
points where performance is at least 10% worse in
IPv4 or IPv6. IPv4 and IPv6 performance is more
likely to be similar if the same AS-level paths are
used for both IP protocols.
RTTs measured to the same (IPv4 and IPv6) webservers; the
solid lines (relative fetch time) and the dashed lines (relative
RTTs) are barely distinguishable. When IPv6 performance
is better, it is more likely correlated with a diﬀerent forward
AS-level path. However, the correlation between RTT and
fetch time is weaker when IPv6 performance is better, for
reasons we do not yet understand.
Implications of correlation between performance and
topological congruence
The signiﬁcant correlation between data plane performance
between two endpoints and the congruity of the AS path
between them inspires us to ask: how far are we from topo-
logical parity between IPv4 and IPv6?
Recall from Section 4 that only 40-50% of AS paths are
actually identical. There are several reasons why the AS
paths in IPv4 and IPv6 could be diﬀerent – the ASes or AS
links seen on the IPv4 path may not be present in the IPv6
topology, or networks may simply choose diﬀerent routes for
IPv4 and IPv6. With the data available to us, we cannot
conﬁrm why the AS paths diﬀer; we can, however, measure
how much congruence between IPv4 and IPv6 AS paths is
possible today. For each link in an IPv4 AS path toward
a dual-stacked origin AS, we examine whether that link is
present in the IPv6 topology, regardless of the AS path on
which it appears. Figure 15 shows that currently, 60-70% of
AS paths could be identical in IPv4 and IPv6 without con-
ﬁguring a new BGP peering session, because for these paths
each IPv4 link is already present in the IPv6 topology, just
not yet part of an observable BGP-policy-compliant path
between the edges. We take a step further and examine
what would happen if each IPv6-capable AS were to estab-
lish equivalent peerings in IPv6 and IPv4. Figure 16 shows
the fraction of IPv4 AS paths where each AS on the path
appears in the IPv6 topology. If current IPv6-capable ASes
n
o
i
t
c
a
r
F
 1
 0.9
 0.8
 0.7
 0.6