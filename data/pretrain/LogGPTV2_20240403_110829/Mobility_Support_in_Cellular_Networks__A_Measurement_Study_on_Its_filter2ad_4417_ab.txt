Tr epor t I nt erval
Tdecision
F r eqint er est
Listf or bid
measbandwidth maximum bandwidth allowed for performing measurement
Used for
Remark
Priority of the serving cell, ranging from 0-7 with 7 being the most preferred
measurement, decision
Priority of candidate cells in neighborhood, associated with its frequency channel, i.e., Pf r eq
measurement, decision
measurement
Threshold of radio signal strength level for intra-freq measurement (Θint r a,r sr p, Θint r a,r sr q)
Threshold of radio signal strength level for non intra-freq measurement (Θnonint r a,r sr p, Θnonint r a,r sr q) measurement
minimum required signaling strength for handoff (∆min,r sr p, ∆min,r sr q)
Hysteresis, threshold(s) and offset(s) used for the reporting event e (A1–A5, B1–B2)
Hysteresis value added to the serving cell’s radio signal strength
Threshold of radio signal evaluation for a higher-priority candidate cell
Thresholds for a lower-priority candidate cell and the higher-priority serving one
Offset of radio signal comparison for equal-priority cells, ∆s,n, ∆f r eq, ∆cell
Time required to fulfil switching condition
Time to trigger when measurement report triggering criterion is always fulfilled
Interval for sending measurement report
Time to trigger when the radio signal evaluation criterion is always fulfilled
List of the frequency channels of interests
List of forbidden candidate cells (due to access control)
calibration
reporting
decision
decision
decision
decision
measurement
reporting
reporting
decision
measurement
measurement
measurement
Table 2: Main configuration parameters standardized for handoff at 4G LTE cells.
(s)
lower
Timer
Misc
Message
SIB 3
SIB 5,6,7,8
SIB 3
SIB 3
SIB 1,3,5,6,7,8
event A1-A5,B1-B2
SIB 3
SIB 5,6,7,8
SIB 3,5,6,7,8
measurement object
SIB3,5,7
event A1-A5,B1-B2
event A1-A5,B1-B2
event A1-A5,B1-B2
SIB 5,6,7,8
SIB4
SIB5
Active-state and idle-state handoffs differ at step 3 . In an active-
state handoff, the device reports its measurement results (obtained
at 2 ) to S when the reporting criterion is met (e.g., one candidate
cell’s radio signal strength is offset stronger than S’s). S then decides
whether to switch to a new cell and to which cell to go ( 4 ). In an
idle-state handoff, step 3 is skipped. The device makes a decision
locally using the decision criteria pre-configured by the serving
cell. Eventually, the cell switches from S to T under network-device
cooperation ( 5 ). Once this round completes, the device is served
by T and is ready to repeat the above procedure.
2.2 Policy-Based Configurations
Cellular networks use policy-based handoffs. Each handoff takes
into account many factors, including cell priorities, radio link qual-
ity, list of events of interest, eligible candidate cells, etc. According
to the standard specifications [6, 7, 9, 10, 12], our measurement
study covers 66 parameters for a single 4G LTE cell and 91 param-
eters for four 3G/2G RATs (Tab. 4). Due to space limitations, we
use only 4G LTE to illustrate the main parameters (Tab. 2 ) and
their use. Complementary to the general handoff procedure de-
scribed previously, Figure 2 uses a decision tree to exemplify how
each step is determined by handoff configurations in three stages:
measurement, reporting and decision 2.
• Measurement.
It is unnecessary to measure all candidate
cells at all times. LTE runs two types of measurements: (M1) intra-
freq and (M2) non intra-freq (aka, inter-freq and inter-RAT) [12].
Both support event-based and periodic modes. If
rS ≤ Θintr a(Θnonintr a), (actually, rS − ∆min ≤ Θ)
(1)
2Execution also uses some parameters such as timers and maximum retry count. It is
less critical and is omitted in this study.
149
intra-freq (non intra-freq) measurement is triggered, otherwise only
the measurement for those higher priority cells ({C|PC > PS}) is
performed periodically (every Thiдher Meas seconds).
Mobile device measures the received radio signal quality using
multiple metrics like RSRP (reference signal received power) and
RSRQ (reference signal received power quality) for 4G LTE. They
take different values: RSRP (-140dBm, -44dBm), RSRQ (-19.5dB, -
3dB), and thus use distinct configuration parameters. Without loss
of generality, we use RSRP hereafter unless specified. Calibration
is used to compensate for different transmission power and ensure
fair radio signal comparison. It converts the actual measurement
(cid:219)rS into a level of radio signal quality rS = (cid:219)rS (actual)−∆min, where
∆min is another pre-configured parameter.
• Reporting. LTE uses a set of reporting events to determine
whether, what and when a user device should report its measure-
ment results to the serving cell to assist an active-state handoff.
LTE defines ten events (A1-A6, B1,B2, C1,C2) [12], but our measure-
ment study shows that not all the events are used (A1-A5, B1 and
B2 observed). Each event targets one specific condition and has its
own configuration set (thresholds Θe, hypothesis He and offsets
∆e).
A1 and A2 indicate that the serving cell’s radio signal strength
rS is better or worse than a threshold; A3 and A4 indicate that one
neighboring (candidate) cell is better than the serving one plus an
offset (A3) or a threshold (A4); A5 indicates that the neighboring cell
is larger than a certain threshold while the serving one is weaker
than another threshold; Events B1 and B2 indicate the existence of
a decent inter-RAT neighboring cell (B1: larger than one threshold,
B2: larger than another threshold and the serving one weaker than
certain threshold).
We use A3 to illustrate the event form:
2-meascalibration33M1M1*YNM2M2*active?Decision…Decision@SRSRP: rs,rsrpRSRQ: rs,rsrqT44TRSRP: rc,rsrpRSRQ: rc,rsrqmeasmeasSIB Type1SIB Type3 #for the current serving cell11 Priority:3 1    s_intraP: 62dB, s_NonIntraP: 8dB !! q_Hyst: 4dBSIB Type5 # for inter-freq neighbor cells1 dl_CarrierFreq: 5780SIB Type6 #for inter-RAT neighbor cells1  CarrierFreq: 4435 #here, 3G UMTS…SIB Broadcast …Meas. report IMC ’18, October 31-November 2, 2018, Boston, MA, USA
(cid:26) A3. Reporting condition:
A3. Stopping condition:
rc > rs + ∆A3 + HA3
rc  ranks) when one of the following
criteria is satisfied,
(1) if Pc > Ps ,
(2) if Pc = Ps ,
(3) if Pc  Θ
rc > rs + ∆equal
rc > Θ
(c)
hiдher
(c)
lower , rs 0 expected) implies the favor towards
the serving cell. Other rules count on the threshold settings to cus-
tomize the criteria at a higher or lower priority. The active-state
handoff may use similar rules, along with proprietary non-radio
criteria [22]. So for an active-state handoff, radio signal evalua-
tion is treated as a necessary but not a sufficient condition as [22]
does. Our measurement study shows that an active-state handoff is
determined by the last reporting event (see §4).
3 MEASUREMENT METHODOLOGY
To conduct handoff configurations study at scale, we have designed
a new software tool MMLab and conducted measurements based on
it.
3.1 MMLab Tool Design
We have thus designed MMLab, a software tool that runs on Android
phones, to facilitate our handoff study. The structure of MMLab is
illustrated in Figure 4.
MMLab is a device-centric measurement tool which crawls con-
figuration data and runs performance assessment on smartphones
without assistance from operators. This overcomes the long-lasting
research barrier of closed cellular networks, where operators do
not publicize their infrastructure-side data traces.
MMLab is built atop MobileInsight [23], an open-source tool
to collect cellular network signaling messages on rooted Android
smartphones. It extracts all handoff configurations from signaling
messages exchanged between the device and the cell (eg., System
Information Blocks and RRC Connection Reconfiguration messages
contained in Radio Resource Control message for LTE cells). This
is feasible by leveraging the fact that handoff configuration param-
eters are broadcast by the serving cell and received by local phone
devices. Note that MobileInsight in its current release does not
support all needed messages. MMLab thus has to parse new, handoff-
specific messages. It further customizes message collection tailored
to 4G/3G/2G handoff configurations only (see Table 2 for main
parameters and messages over 4G LTE).
Figure 3 shows an example log observed in AT&T. The last mes-
sage measurement report indicates an active-state handoff, and
H. Deng et al.
Figure 4: MMLab Overview.
its tunable handoff parameters are broadcast in System Information
Blocks (SIBs) (in blue).
To make our measurements further scale out to more carriers, we
develop a crowdsourced measurement infrastructure managed by
MMLab servers. To this end, MMLab relies on global, participating vol-
unteers from different countries and regions to collect configuration
traces from operators worldwide. We thus distribute a mobile app
version of MMLab to volunteers to make this participation as easy as
possible. Specifically, it performs three tasks: handoff configuration
collection (i.e., Type-I measurement), configuration characteriza-
tion and analysis (Q1), and performance assessment/validation
experimentation (Type-II measurements, Q2). Upon new app up-
dates, the app communicates with the MMLab server and loads the
experimentation patches on the fly without new installation and
compiling.
To make our data collection more efficient, we enable proactive
cell switching for the serving cell. MMLab changes its preferred net-
work type (e.g., LTE only, UMTS/CDMA only, and GSM) and even
its frequency band to automate the switching of the serving cell.
MMLab is thus able to collect handoff configurations from multiple
cells at a given location. Note that this operation intervenes the
actual, default handoff procedure, and is disabled in Type-II mea-
surements. Type-I measurement (data collection) consumes little
resources (at least no extra data), and is open to participating vol-
unteers worldwide. Type-II experiments may access data services,
thus incurring considerable data usage (like Speedtest). They are
constrained to those controlled devices (from ourselves and our
partners with their explicit consent).
3.2 Measurement Flow
Using MMLab, we conduct two types of measurements: configuration
collection only (Type-I, Q1), and configuration plus performance
assessment (Type-II, Q2).
To handle configuration complexity in analysis and performance
assessment, we let Type-I and Type-II help each other. Specifically,
we run Type-II experiments at a small scale and gain insights on
important configurations. We use these hints to guide through the
large-scale configuration characterization and analysis. We also
exploit results and findings in the configuration study to run Type-II
experiments. For example, we run experiments around certain cells
or routes with configurations of interest, to assess their impacts.
We conduct measurement type-II in three US cities at limited
scale; the results contribute to dataset D1 and cover 18,700+ handoff
instances. We and 35+ volunteers conduct measurement type-I at
150
MMLabMI*MMLabMI*MMLabMI*Participating nodes (global)MMLabMI*.log.log.logHandoff Conﬁg.Collection 1. Develop code & load on the ﬂy2.Run & collect dataHandoff Conﬁguration Characterization & Analysis3.data analysis Handoff Perf. Assessment MMLabMI*MMLabMI*Controlled nodes (local)4. Guided tests.log.logMMLab Measurement InfrastructureMMLab Server5.Mobility Support in Cellular Networks
IMC ’18, October 31-November 2, 2018, Boston, MA, USA
large scale across the US and around the world to get dataset D2
which includes handoff configuration from 32,000+ cells. Detailed
measurement settings and processing information are presented
per experiment in section §4 and §5 respectively.
4 FIRST LOOK AT HANDOFF