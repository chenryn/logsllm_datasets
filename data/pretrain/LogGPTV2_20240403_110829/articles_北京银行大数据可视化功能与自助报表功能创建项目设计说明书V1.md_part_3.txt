#### 引用的数据库表
用户表（NP_USER）
### 产品介绍 {#产品介绍 .样式3}
#### 功能概述
向用户展示大数据可视化的产品，以及介绍详情
#### 操作界面
![](media/image7.png){width="5.9944444444444445in"
height="3.363888888888889in"}
#### 模块流程
鼠标滑过对应的模块，显示该产品的详细信息
#### 关联模块
无
#### 设计说明
  --------------------- --------------------------------------------------------
  **类名/功能点名称**   **描 述**
  前台页面名称          /portal/WebRoot/normalplatform/skins/default/login.jsp
  后台类                
  主要用途              向用户展示大数据可视化产品
  --------------------- --------------------------------------------------------
#### 输入输出
无
#### 引用的数据库表
无
### 关于我们 {#关于我们 .样式3}
#### 功能概述
展示大数据可视化的相关工作人员
#### 操作界面
![](media/image8.png){width="5.999305555555556in"
height="4.082638888888889in"}
#### 模块流程
用户鼠标滑过每一位员工的图片，显示该员工的相关信息
#### 关联模块
无
#### 设计说明
  --------------------- --------------------------------------------------------
  **类名/功能点名称**   **描 述**
  前台页面名称          /portal/WebRoot/normalplatform/skins/default/login.jsp
  后台类                无
  主要用途              向用户展示大数据可视化相关工作人员
  --------------------- --------------------------------------------------------
#### 输入输出
无
#### 引用的数据库表
无
## 首页
### 首页 {#首页-1 .样式3}
#### 功能概述
本页面的功能主要是展示用户有权限看到那些功能模块。
#### 操作界面
![](media/image9.png){width="6.0in" height="4.65in"}
#### 模块流程
登陆大数据可视化只能门户，点击大数据可视化图标，进入"大数据可视化首页"
#### 关联模块
/portal/WebRoot/normalplatform/skins/page/jsp/ball.jsp
是大数据可视化首页jsp页面
#### 设计说明
  --------------------- --------------------------------------------------------
  **类名/功能点名称**   **描 述**
  前台页面名称          /portal/WebRoot/normalplatform/skins/page/jsp/ball.jsp
  后台类                无
  主要用途              页面展示，方便直观，便于用户操作
  --------------------- --------------------------------------------------------
#### 输入输出
无
#### 引用的数据库表
无
1.  
## 报表订阅
该模块主要提供报表订阅服务，即业务人员可登陆该模块，可像普通报表交互模式相同，进行参数的输入，于此同时，可进行报表结果反馈方式（excel等），反馈时间（月初，月末，T+1等），后台接收到请求信号后，进行智能化调度排队策略，预定时间内，除法报表运算服务，将生成好的查询结果投入到指定地点。该模块涵盖于平台权限体系下，为解决分散月初等固定期间集中并发需求造成的后天压力，以及改善现有服务模式，提升用户体验。
### 整体模块业务逻辑 {#整体模块业务逻辑 .样式3}
![](media/image10.emf)
上图是报表订阅业务流程：
-   业务人员通过大数据可视化智能门户系统的报表订阅模块中的报表订阅功能对需要订阅的报表进行订阅。
-   数据加工分两个流程：1、DTS平台数据准备就绪后会更新数据状态日志表，Control-M通过调用脚本判断数据是否准备就绪，验证通过调用集算器的脚本通知集算器可以开始生成订阅的数据文件；2、ODS下发数据文件，门户验证文件后，通过ftp推送到集算器服务器，Control-M通过调用脚本验证数据文件是否传输完成，校验通过后调用集算器的脚本通知集算器可以开始生成订阅的数据文件。
-   集算器加载dts或ODS下发的数据根据订阅的记录生成数据文件，文件会放到共享磁盘中。同时在数据文件生成完成时集算器会存储一条完成状态的信息在日志报表中。
-   后台定时调度程序轮询日志表判断数据文件是否生成完成，验证通过后小于10M的数据文件会通过调用邮件接口发送邮件至订阅人邮箱。大于等于10M的数据文件在"我的订阅"模块中去下载获取。
### 报表订阅欢迎页 {#报表订阅欢迎页 .样式3}
#### 功能概述
欢迎页面主要是展示报表订阅的业务须知。
#### 操作界面
![](media/image11.png){width="6.0in" height="4.65in"}
### 报表订阅 {#报表订阅-1 .样式3}
#### 功能概述
提供报表订阅信息维护的功能。主要包含查询、新增、删除功能。报表订阅人员可以订阅可访问权限的报表。订阅信息包含订阅报表、订阅频率、接收邮箱、订阅人、订阅参数（需动态生成并结合数据权限）。
#### 操作界面
![](media/image12.png){width="6.0in" height="4.65in"}
#### 模块流程
业务人员，点击"报表订阅"进入功能页面后，点击"新增"按钮，订阅报表，订阅完成后回来查询页面看到订阅的信息。
#### 关联模块
无
#### 设计说明
  --------------------- ---------------------------------------------------
  **类名/功能点名称**   **描 述**
  前台页面名称          
  后台类                
  主要用途              生成订阅记录
  --------------------- ---------------------------------------------------
#### 逻辑说明
点击"新增"按钮，选择需要订阅的报表，并输入报表参数、订阅周期，邮箱等信息，点击保存后可在查询页面查询订阅的的信息，具体流程如下所述：
下拉框选择报表编号 -- \>
填写订阅名称（点击订阅名称时会刷新iframe【订阅参数】标签） -- \>
填写订阅参数点击生成报表 -- \> 下拉框选择订阅频率 -- \> 填写订阅邮箱 --
\> 下拉框选择订阅标志 -- \> 填写订阅描述-- \> 点击保存
#### 输入输出
【输入参数】
  --------------------- -------------- -------------- ----------- -------------
  **字段名称**          **输入类型**   **字段类型**   **约束**    **说明**
  报表名称              文本框         字符串         无          
  报表编号              文本框         字符串         无          
  --------------------- -------------- -------------- ----------- -------------
【输出参数】
  --------------------- -------------- -------------- ----------- -------------
  **字段名称**          **输入类型**   **字段类型**   **约束**    **说明**
  订阅名称                             字符串         无          
  报表编号                             字符串         无          
  报表名称                             字符串         无          
  订阅频率                             字符串         无          
  订阅邮箱                             字符串         无          
  备注                                 字符串         无          
  --------------------- -------------- -------------- ----------- -------------
【新增输入参数】
  --------------------- -------------- -------------- ----------- -------------
  **字段名称**          **输入类型**   **字段类型**   **约束**    **说明**
  报表编号              选择框         字符串         无          
  报表名称              文本框         字符串         无          
  订阅参数                             字符串         无          
  订阅频率              选择框         字符串         无          
  订阅邮箱              文本框         字符串         无          
  备注                  文本框         字符串         无          
  --------------------- -------------- -------------- ----------- -------------
#### 引用的数据库表
RUNQIAN.NP_REPORT_BOOK_LOG
### 我的订阅 {#我的订阅 .样式3}
#### 功能概述
本模块主要实现对订阅的生成的数据文件进行下载的操作，同时对报表订阅的记录进行查看的操作。
#### 操作界面
![](media/image13.png){width="6.0in" height="4.51875in"}
#### 模块流程
1.查询按钮
输入查询的条件（文件日期、报表文件名、订阅名称）点击查询，即可查询到搜索的信息。
#### 关联模块
报表订阅模块。
#### 设计说明
  --------------------- --------------------------------------------------------------------------
  **类名/功能点名称**   **描 述**
  前台页面名称          Mybook.jsp
  后台类                Mybookaction.java mybookservice.java mybookdao.jsp mybookentity.java
  主要用途              订阅的生成的数据文件进行下载的操作，同时对报表订阅的记录进行查看的操作。
  --------------------- --------------------------------------------------------------------------
#### 逻辑说明
> 我的订阅模块信息是在订阅报表后润干查询订阅表，查询到订阅信息后，生成数据文件。
>
> 用户可以进行文件的下载。
#### 输入输出
【输入参数】
  --------------------- -------------- -------------- ----------- -------------
  **字段名称**          **输入类型**   **字段类型**   **约束**    **说明**
  文件日期              日期框选择     数字           无          
  报表文件名            文本框         字符串         无          
  订阅名称              文本框         字符串         无          
  --------------------- -------------- -------------- ----------- -------------
【输出参数】
  --------------------- -------------- -------------- ----------- -------------
  **字段名称**          **输入类型**   **字段类型**   **约束**    **说明**
  订阅名称                             字符串         无          
  报表标号                             字符串         无          
  报表名称                             字符串         无          
  订阅频率                             字符串         无          
  订阅邮箱                             字符串         无          
  订阅标志                             字符串         无          
  订阅人                               字符串         无          
  备注                                 字符串         无          
  --------------------- -------------- -------------- ----------- -------------
#### 引用的数据库表
RUNQIAN.NP_REPORT_BOOK_LOG