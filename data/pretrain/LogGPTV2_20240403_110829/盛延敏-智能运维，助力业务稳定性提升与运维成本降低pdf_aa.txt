智能运维 
助力业务稳定性提升 
与运维成本降低
蚂蚁集团资深技术专家 / 盛延敏(成旻) 博士
Agenda • 1.智能运维的定义和作用• 2.蚂蚁在智能运维的实践
• 3.未来展望和总结
智能运维(AIOPS)定义
| 运维的业务痛点 | 预警效率低 | AIOPS 是将人工智能的能力与运维相结合，基于已有的运维数据（日志、 |
|---|---|---|
| 运维的业务痛点 |预警效率低 |监控信息、应用信息等）并通过机器学习的方式来进一步解决自动化运维 |
| 观测性数据乱 |预警效率低 |监控信息、应用信息等）并通过机器学习的方式来进一步解决自动化运维 |
| 观测性数据乱 |预警效率低 |没办法解决的问题。即以大数据平台和机器学习（算法平台）为核心从各 |
| 观测性数据乱 |预警效率低 |个监控系统中抽取数据、面向用户提供服务，以此来提升运维效率。 || 企业进行分布式架构转型之 |告警风暴使得运维人员淹没在大 | |
| 后，大幅提升了研发效率和 |告警风暴使得运维人员淹没在大 | |
| 后，大幅提升了研发效率和 |量警报、大量 IT 噪音和分布在 | |
| 产品迭代速度，但同时也因 |量警报、大量 IT 噪音和分布在 | |
| 产品迭代速度，但同时也因 |不同工具中的信号之中，无法识 | |
| 为复杂的架构设计导致观测 |不同工具中的信号之中，无法识 | |
| 为复杂的架构设计导致观测 |别有效预警。 | |
| 数据混乱，故障率飙升。 |别有效预警。 | |
| 故障定位难 |故障恢复慢 | |
|  | | |
故障定位往往依赖专业的技术 人员和丰富的专家经验，耗时 时间长，且无法形成有效的知 识沉淀。 对于已经定位的故障，无法沉 
淀应急预案，无法自动根据系 
统当前状态与历史经验给出应 
急预案推荐。淀应急预案，无法自动根据系 
统当前状态与历史经验给出应 
急预案推荐。
IT 运维工具的主要功能正在从数据获取、数据处理转向数据分析。
面对海量数据和复杂运维场景，智能化已经成为运维工具发展的重要命题。
AIOPS 基于什么 & 可以做什么 & 收益是什么 	AIOps 结合大数据和机器学习，可以自动化运维操作流程，包括事件关联、异常检测、因果推断等。--- Gartner Glossary
可以做什么 	收益是什么
| 监控 | System/Infra Intelligence | 根因定位（Root Cause Analysis） | 1-5-10：故障快速定位与止血 |
|---|---|---|---|
| 监控 |System/Infra Intelligence |根因定位（Root Cause Analysis） |通过 AIOps 智能根因定位，快速发现故障症结所在， || 监控 |System/Infra Intelligence |智能根因定位的作用是通过收集站点历史观测性数据，利用机 |通过 AIOps 智能根因定位，快速发现故障症结所在， |
| 监控 |System/Infra Intelligence |智能根因定位的作用是通过收集站点历史观测性数据，利用机 |辅助运维人员达到 5分钟故障定位的能力。同时，结 |
| 监控 |System/Infra Intelligence |器学习的方式训练出站点稳定模型，在故障发生时可以快速定 |辅助运维人员达到 5分钟故障定位的能力。同时，结 |
| 监控 |System/Infra Intelligence |器学习的方式训练出站点稳定模型，在故障发生时可以快速定 |合专家经验，给出故障应急预案，甚至自动自愈，以 || 监控 |System/Infra Intelligence |位造成故障的根本原因，并为研发与运维团队提供修复意见， |合专家经验，给出故障应急预案，甚至自动自愈，以 |
| 监控 |System/Infra Intelligence |位造成故障的根本原因，并为研发与运维团队提供修复意见， |达到10分钟止血的目的。 |
| 监控 |System/Infra Intelligence |减少故障的持续时间。 |达到10分钟止血的目的。 |
| 事件 |System/Infra Intelligence |异常检测（Anomaly Detection） |降低故障率 |
| 事件 |System/Infra Intelligence |AIOps 可以梳理历史上正常和异常数据，通过有监督学习的方 |降低故障率 || 事件 |System/Infra Intelligence |AIOps 可以梳理历史上正常和异常数据，通过有监督学习的方 |通过现有数据的智能化分析以及趋势判断，自动识别 |
| 事件 |System/Infra Intelligence |式训练出异常检测模型。在站点运行过程中，通过对站点时序 |通过现有数据的智能化分析以及趋势判断，自动识别 |
| 事件 |System/Infra Intelligence |式训练出异常检测模型。在站点运行过程中，通过对站点时序 |可能发生的故障，提前同时站点 SRE 进行故障预防， |
| 事件 |System/Infra Intelligence |指标的检测，自动进行异常预警。同时，也用于趋势分析，防 |可能发生的故障，提前同时站点 SRE 进行故障预防， || 事件 |System/Infra Intelligence |指标的检测，自动进行异常预警。同时，也用于趋势分析，防 |可以有效提升站点稳定性，降低故障发生的可能性 |
| 事件 |System/Infra Intelligence |患于未然。 |可以有效提升站点稳定性，降低故障发生的可能性 |
| 工单 |System/Infra Intelligence |性能优化（Performance Optimization） |降低研发&运维成本 |
| 工单 |System/Infra Intelligence |性能优化（Performance Optimization） |AIOps通过自动化脚本生成和 DevOps，有解放研发 |
| 工单 |System/Infra Intelligence |AIOps基于物理层、系统层、应用层甚至集群层面的数据，收 |AIOps通过自动化脚本生成和 DevOps，有解放研发 || 工单 |System/Infra Intelligence |AIOps基于物理层、系统层、应用层甚至集群层面的数据，收 |与运维人员的劳动力，使得相关人员可以专注在附加 |
| 工单 |System/Infra Intelligence |集性能指标，同时利用 CMDB、事件中心等信息，综合性给出 |与运维人员的劳动力，使得相关人员可以专注在附加 |
| 工单 |System/Infra Intelligence |集性能指标，同时利用 CMDB、事件中心等信息，综合性给出 |值更高的工作上，从而改善员工体验，优化企业成 |
| 工单 |System/Infra Intelligence |站点性能评估与优化建议。 |值更高的工作上，从而改善员工体验，优化企业成 |
| 工单 |System/Infra Intelligence |站点性能评估与优化建议。 |本。 || 自动化 |DevOps Intelligence |智能运维编码（Intelligent Maintenance Coding） |挖掘数据潜能 |
| 自动化 |DevOps Intelligence |通过对专家知识和脚本的训练，灵活实现监控、巡检、压测等 |挖掘数据潜能 |
| 自动化 |DevOps Intelligence |通过对专家知识和脚本的训练，灵活实现监控、巡检、压测等 |AIOps 可以挖掘不同观测性数据之间的联系，自动 |
| 自动化 |DevOps Intelligence |脚本的自动化编写，提升运维效率。 |AIOps 可以挖掘不同观测性数据之间的联系，自动 |
| 自动化 |DevOps Intelligence |脚本的自动化编写，提升运维效率。 |建立起关联模型和网络图谱。同时能够打破研发、运 || 自动化 |DevOps Intelligence |DevOps |维、安全、质量团队之间的数据壁垒，为企业提供更 |
| 自动化 |DevOps Intelligence |DevOps |加高效的数据支撑。 |
| 自动化 |DevOps Intelligence |AIOps 可以嵌入到 DevOps 流程中，为研发与质量提供智能 |加高效的数据支撑。 |
| 自动化 |DevOps Intelligence |诊断能力。例如提示代码风险隐患，自动化测试例生成等。 |加高效的数据支撑。 |
• 1.智能运维的定义和作用
• 2.蚂蚁在智能运维的实践
Agenda  2.1 蚂蚁智能运维总体介绍 2.2 智能告警
 2.3 智能日志
 2.4 智能变更
 2.5 智能定位
• 3.未来展望和总结
2.1 AIOPs能力大图和TRaaS产品矩阵
2.1 机器学习一般流程2.1 AIOPs能力大图和TRaaS产品矩阵
2.1 机器学习一般流程
数据采集 数据仓库化 数据处理 建模 训练及测试 质量评估 部署
时间序列 数据清洗 非监督聚类 训练
| 023-04-07 01:06:53,974 WARN  | 数据 | 探索可视化 | 监督聚类 | 模型 | 评估 | 部署 |
|---|---|---|---|---|---|---|
| org.apache.hadoop.hdfs.server.datanode.DataNode:  |数据 |探索可视化 |监督聚类 |模型 |评估 |部署 |
| IOException in offerService |数据 |探索可视化 |监督聚类 |模型 |评估 |部署 |
| java.io.IOException: DestHost:destPort localhost:9000 ,  |数据 |探索可视化 |监督聚类 |模型 |评估 |部署 || java.io.IOException: DestHost:destPort localhost:9000 ,  |数据 |探索可视化 |关系建模 |模型 |评估 |部署 |
| LocalHost:localPort  |数据 |探索可视化 |关系建模 |模型 |评估 |部署 |
| shengymMacbookPro.local/192.168.0.105:0. Failed on local  |数据 |探索可视化 |关系建模 |模型 |评估 |部署 |
| exception: java.io.IOException: No buffer space available 	日志 |数据 |探索可视化 |关系建模 |模型 |评估 |部署 |
| exception: java.io.IOException: No buffer space available 	日志 |仓库 |探索可视化 |关系建模 |模型 |评估 |部署 || 链路 |仓库 |特征抽取 |半/自监督 |测试 |评估 |部署 |
| 链路 |仓库 |数据索引 |强化学习 |测试 |评估 |部署 |
| 链路 |仓库 |数据索引 |强化学习 |测试 |优化 |部署 |
其他数据来源
2.1 蚂蚁智能运维链路流程
ODPS 算法实验室 算法模型
| 来源数据 | 导入控制 | 训练调度 | 训练调度 | 自动训练 | 发布管控 | http/RPC | Serving |
|---|---|---|---|---|---|---|---|
| 时序数据 |导入控制 |训练调度 |训练调度 |自动训练 |发布管控 |http/RPC |时序异常检测 |
| 时序数据 |导入控制 |TrainingMgr |TrainingMgr |TrainingMgr |发布管控 |http/RPC |时序异常检测 || 时序数据 |离线训练 |TrainingMgr |TrainingMgr |TrainingMgr |发布管控 |http/RPC |时序异常检测 |
| 时序数据 |离线训练 |TrainingMgr |TrainingMgr |TrainingMgr |发布管控 |http/RPC |指标预测 |
| 日志数据 |算法运行 |时序异常检测 |时序异常检测 |时序异常检测 |后置 |算法输出 |是否异常 |
| 链路数据 |算法运行 |时序异常检测 |时序异常检测 |时序异常检测 |后置 |算法输出 |是否异常 |
| 链路数据 |数据 |时序异常检测 |时序异常检测 |时序异常检测 |后置 |算法输出 |是否异常 |
| 链路数据 |数据 |日志异常检测 |日志异常检测 |日志异常检测 |后置 |算法输出 |是否异常 |
| 事件数据 |数据 |日志异常检测 |日志异常检测 |日志异常检测 |后置 |算法输出 |是否异常 || 事件数据 |预处 |日志异常检测 |日志异常检测 |日志异常检测 |后置 |算法输出 |是否异常 |
| 事件数据 |预处 |jar |变更异常检测 |变更异常检测 |后置 |算法输出 |是否异常 |
| 事件数据 |预处 |jar |变更异常检测 |变更异常检测 |处理 |算法输出 |定位结果 |
| 事件数据 |理 |jar |变更异常检测 |变更异常检测 |处理 |算法输出 |定位结果 |
根因异常检测
样本数据 效果反馈: 打标
告警业务 变更业务 应急业务
• 1.智能运维的定义和作用
• 2.蚂蚁在智能运维的实践
Agenda  2.1 蚂蚁智能运维总体介绍 	2.2 智能告警
 2.3 智能日志
 2.4 智能变更
 2.5 智能定位
• 3.未来展望和总结
2.2 智能告警-背景
蚂蚁日常运维涉及大量平台指标，以下几种类型指
标由于与平台稳定性息息相关，是运维工程师重点标由于与平台稳定性息息相关，是运维工程师重点
关注对象，也是智能监控算法覆盖的核心对象：
1.服务视角：流量，耗时，成功量，失败量，成功率
等指标
2.OS视角：CPU使用率，内存使用率，load1等指
标
3.JVM视角：YGC，FGC次数等指标
智能告警：用AI的方法识别出异常，减少人工经验依赖和运维成本
2.2 智能告警-评价指标 	有效告警
告警事件
真实的异常
准确率=有效告警数 告警事件数
召回率=有效告警数 
真实异常数
噪音情况 	漏报情况
2.2 智能告警-难点
突变异常检测 
断崖异常检测 
趋势异常检测 
频率变化检测 单点过滤 
前序相似过滤 
历史相似过滤
2.2 智能告警-单指标检测算法选择
 数值统计 统计学习算法 深度学习算法