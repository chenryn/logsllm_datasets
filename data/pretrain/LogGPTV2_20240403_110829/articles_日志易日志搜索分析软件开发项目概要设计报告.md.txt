{ 项目名称 }
概要设计报告
+---------------------+----------+-------------------------------------+
| 文件状态：          | 文       | Company-Project-SD-ARCHITECTURE     |
|                     | 件标识： |                                     |
| \[√\] 草稿          |          |                                     |
|                     |          |                                     |
| \[ \] 正式发布      |          |                                     |
|                     |          |                                     |
| \[ \] 正在修改      |          |                                     |
+---------------------+----------+-------------------------------------+
|                     | 当       | X.Y                                 |
|                     | 前版本： |                                     |
+---------------------+----------+-------------------------------------+
|                     | 作 者：  |                                     |
+---------------------+----------+-------------------------------------+
|                     | 完       | Year-Month-Day                      |
|                     | 成日期： |                                     |
+---------------------+----------+-------------------------------------+
版 本 历 史
  ------------- -------- ---------- ------------ --------------------------
  版本/状态     作者     参与者     起止日期     备注
  ------------- -------- ---------- ------------ --------------------------
目 录
0\. 文档介绍 [4](#文档介绍)
0.1 文档目的 [4](#文档目的)
0.2 文档范围 [4](#文档范围)
0.3 读者对象 [4](#读者对象)
0.4 参考文献 [4](#参考文献)
0.5 术语与缩写解释 [4](#术语与缩写解释)
1\. 系统概述 [5](#系统概述)
2\. 设计约束 [5](#设计约束)
3\. 设计策略 [5](#设计策略)
4\. 系统总体结构 [5](#系统总体结构)
5\. 子系统N的结构与功能 [6](#_Toc16478139)
6\. 开发环境的配置 [6](#开发环境的配置)
7\. 运行环境的配置 [6](#运行环境的配置)
8\. 测试环境的配置 [6](#测试环境的配置)
9\. 其他 [6](#其他)
#  0. 文档介绍
## 0.1 文档目的
## 0.2 文档范围
## 0.3 读者对象
## 0.4 参考文献
***提示：**列出本文档的所有参考文献（可以是非正式出版物），格式如下：*
*\[标识符\] 作者，文献名称，出版单位（或归属单位），日期*
***例如：***
> ***\[AAA\]** 作者，《立项建议书》，机构名称，日期*
>
> ***\[SPP-PROC-SD\]** SEPG，系统设计规范，机构名称，日期*
## 0.5 术语与缩写解释
  ------------------- ---------------------------------------------------
  **缩写、术语**      **解 释**
  SPP                 精简并行过程，Simplified Parallel Process
  SD                  系统设计，System Design
  ...                 
  ------------------- ---------------------------------------------------
# 1. 系统概述
***提示：**（1）说明本系统"是什么"，（2）描述本系统的主要功能。*
日志中心系统能够对全网范围内的主机、服务器、网络设备、数据库以及各种应用服务系统等产生的各类日志，进行规范采集，统一规范日志格式，统一持久化存储，统一策略制定，并进行细致分析，通过统一的控制台进行实时可视化的呈现。通过定义日志筛选规则和策略，帮助工作人员从海量日志数据中精确查找关键有用的事件数据，准确定位网络故障并提前识别安全威胁，保障企业网络安全。
日志中心能够收集运行类、安全类、行为类的日志信息，实现对在线业务系统最全面的分析。分析在线业务系统所在主机的运行状态与错误信息，中间件运行状态与错误信息，关联业务系统本身日志事件，对业务系统出现的问题进行快速定位并分析原因，结合已有的知识库分析预测在线业务系统可能出现的问题。
# 2. 设计约束
***提示：***
*（1）需求约束。体系概要设计人员从需求文档（如《用户需求说明书》和《软件需求规格说明书》）中提取需求约束，例如：*
-   *本系统应当遵循的标准或规范*
-   *软件、硬件环境（包括运行环境和开发环境）的约束*
-   *接口/协议的约束*
-   *用户界面的约束*
-   *软件质量的约束，如正确性、健壮性、可靠性、效率（性能）、易用性、清晰性、安全性、可扩展性、兼容性、可移植性等等。*
*（2）隐含约束。有一些假设或依赖并没有在需求文档中明确指出，但可能会对系统设计产生影响，设计人员应当尽可能地在此处说明。例如对用户教育程度、计算机技能的一些假设或依赖，对支撑本系统的软件硬件的假设或依赖等。*
本系统遵循《技术职称体系日志中心系统需求规格说明书》，完成软件质量约束：
  ---------------- --------------------------------------------------------------------------------------------------------------------------------------------------------------------
  正确性           在规定的条件下，在规定的时间内，软件不引起系统失效的概率
  健壮性           对于规范要求以外的输入能够判断出这个输入不符合规范要求，并能有合理的处理方式。
  可靠性           在规定的时间周期内，在所述条件下程序执行所要求的功能的能力；其中的概率是系统输入和系统使用的函数，也是软件中存在的故障的函数，系统输入将确定是否会遇到已存在的故障
  性能，效率       能够满足处理TB级别以上的日志
  易用性           易用性是指用户使用业务运营系统的难易程度，令用户满意的系统应该是有效、易学、高效的
  清晰性           不需要用户掌握复杂的搜索语法，使用简单的搜索框查询，通过用户图形界面和友好的用户交互来完成强大的搜索分析功能。
  安全性           业务运营系统应具备全面的安全管理，需要考虑系统中所有安全薄弱环节的保护，同时需要顾及安全策略的集中实现
  可扩展性         采用高性能分布式架构，可支持每日TB级别的日志量，每秒钟可处理10万条日志，搜索分析结果秒级延时，让用户查询到十几秒钟之前产生的日志。
  兼容性           随着业务地开展，日志量的增长，系统需求的改变、系统能力的扩展。系统应当满足系统的平滑扩容、升级
  可移植性         系统在普通PC服务器上运行，可根据日志量的增长逐步扩容。
  ---------------- --------------------------------------------------------------------------------------------------------------------------------------------------------------------
# 3. 设计策略
> ***提示：**体系概要设计人员根据产品的需求与发展战略，确定设计策略（Design
> Strategy）。例如：*
-   *扩展策略。说明为了方便本系统在将来扩展功能，现在有什么措施。*
-   *复用策略。说明本系统在当前以及将来的复用策略。*
-   *折衷策略。说明当两个目标难以同时优化时如何折衷，例如"时－空"效率折衷，复杂性与实用性折衷。*
扩展策略：采用分布式、松耦合、可扩展的集群架构，各模块可水平扩展，如果哪个模块成为性能瓶颈，只需要增加运行那个模块的服务器数量。提供开放的RESTful
API接口，可供第三方做二次开发
可靠性策略：采用冗余容错的架构，所有模块都冗余部署，某台服务器出问题不会导致系统服务中断。提供完善的系统监控，无论是硬件还是软件故障，都能够及时告警。
# 4. 系统总体结构
![](media/image1.emf)
[]{#_Toc16478139 .anchor}
# 5. 系统目录及功能
![](media/image2.png){width="5.904861111111111in"
height="4.670138888888889in"}
## 5.1 权限管理
支持基于角色的权限管理系统，并通过日志产生的主机、应用、标签三个维度对日志进行来源分组，不同的用户赋予查看不同日志的权限。
## 5.2日志采集
1\.
如果日志在服务器端是文件形式，日志采集可以采用Linux标配的rsyslog或日志中心提供的agent，rsyslog或agent监控服务器的日志文件，读取日志文件及其增量并发送给日志中心系统。
2\.
如果日志已经存入Hadoop系统或数据库，日志中心系统可提供定制化agent，将日志从Hadoop系统或数据库里读出来并发送给日志中心系统。
3\. 网络设备可通过syslog协议把日志传送过来。
![](media/image3.png){width="5.767361111111111in"
height="4.2868055555555555in"}
## 5.3 日志管理
采用分布式消息系统连接各个模块，日志管理也起到缓存的作用。
![](media/image4.png){width="5.767361111111111in" height="4.39375in"}
## 5.4 日志处理
日志处理系统能够根据配置的规则抽取日志关键字段，将非结构化的日志转换成结构化数据。抽取关键字段的好处是可以对关键字段进行统计分析。日志易将对关键字段及原始日志进行索引，用户可对关键字段及原始日志进行搜索。
日志易已经配置了常见日志的解析规则，对于日志易没有预先配置解析规则的日志，用户可通过后台或Web页面配置解析规则，抽取关键字段。即使没有抽取关键字段，用户仍然可以通过全文检索搜索日志。
![](media/image5.png){width="5.767361111111111in"
height="5.060416666666667in"}
## 5.5 日志检索
对日志的关键字段及全文做索引，每天的日志存为一个索引文件，方便用户决定保留多少天的日志。索引文件采用分布式存储，并且有副本，保障高可用。
另外，日志检索系统也支持对不同来源的日志做关联分析。
![](media/image6.png){width="5.767361111111111in"
height="4.686805555555556in"}
## 5.6 前台服务系统
进行日志展现、数据可视化，支持各种统计功能及图表展现，实现流畅的图形用户交互。
![](media/image7.png){width="5.767361111111111in"
height="4.373611111111111in"}
## 5.7 API
# 6. 开发环境的配置
***提示：**说明本系统应当在什么样的环境下开发，有什么强制要求和建议？*
  ----------------------- ----------------------- -----------------------
  类别                    标准配置                最低配置
  计算机硬件                                      
  软件                                            
  网络通信                                        
  其他                                            
  ----------------------- ----------------------- -----------------------
# 7. 运行环境的配置
***提示：**说明本系统应当在什么样的环境下运行，有什么强制要求和建议？*
  ----------------------- ----------------------- -----------------------
  类别                    标准配置                最低配置
  计算机硬件                                      
  软件                                            
  网络通信                                        
  其他                                            
  ----------------------- ----------------------- -----------------------
# 8. 测试环境的配置
***提示：**说明本系统应当在什么样的环境下测试，有什么强制要求和建议？*
*（1）一般地，单元测试、集成测试环境与开发环境相同。*
*（2）一般地，系统测试、验收测试环境与运行环境相同或相似（更加严格）。*
# 9. 其他