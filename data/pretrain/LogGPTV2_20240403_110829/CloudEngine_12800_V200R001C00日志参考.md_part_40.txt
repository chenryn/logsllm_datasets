参数名称 参数含义
[isisSysInstance] ISIS进程号。
[isisSysLevelIndex] ISIS级别。
[isisCircIndex] 接口索引。
[isisCircIfIndex] 接口索引。
[isisPduProtocolsSupported] 支持的协议。
[isisPduLspId] LSP ID。
[isisPduFragment] 64字节报文头缩略。
[ifIndex] 接口IF索引。
[IfName] 接口名称。
文档版本 06 (2017-09-12) 华为专有和保密信息 360
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
日志参考 38 ISIS
可能原因
收到的LSP源支持的协议类型与本地不一致。
处理步骤
步骤1 TLV中支持的协议类型字段的值与本地支持的协议类型值不匹配，10分钟后再次检查
问题是否解决。
l 如果是，请执行步骤3。
l 如果不是，请执行步骤2。
步骤2 请联系技术支持人员。
步骤3 结束。
----结束
38.37 ISIS/6/ISIS_RCV_OTHER_PURGED_LSP
日志信息
ISIS/6/ISIS_RCV_OTHER_PURGED_LSP:ISIS [ProcessId] received a purged LSP.
(Level=[Level], PduLspId=[PduLspId], Interface=[Interface], NbrSystem=[NbrSystem],
SrcSystem=[SrcSystem], SrcDynName=[SrcDynName], SrcNbrSystem=[SrcNbrSystem])
日志含义
IS-IS系统收到一个其它系统产生的剩余时间为0的LSP报文。
日志参数
参数名称 参数含义
ProcessId IS-IS进程号。
Level IS-IS级别。
PduLspId 收到的purged LSP报文ID。
Interface 收到purged LSP报文的接口。
NbrSystem 邻居系统ID。
SrcSystem 发送LSP报文的源设备系统ID。
SrcDynName 发送LSP报文的源设备动态主机名。
SrcNbrSystem 发送LSP报文设备的邻居系统ID。
文档版本 06 (2017-09-12) 华为专有和保密信息 361
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
日志参考 38 ISIS
可能原因
一个IS-IS系统收到其他系统生成的剩余时间为0的LSP报文，即purged LSP。
处理步骤
步骤1 查看日志信息中的SrcSystem字段是否填充。
l 如果是，查看发送该LSP报文的路由器系统ID，执行步骤3。
l 如果不是，请执行步骤2。
步骤2 查看日志信息中的NbrSystem字段，找到对端路由器并下载日志，查看该LSP是否由此
路由器发出。
l 如果是，请执行步骤3。
l 如果不是，请执行步骤4。
步骤3 在源路由器上分析此LSP是否已清除。
l 如果是，正常运行信息，无须处理。
l 如果不是，请执行步骤4。
步骤4 逐个排查产生剩余时间为0的LSP的源路由器，执行步骤3。
步骤5 请收集相关显示信息，并联系技术支持人员。
步骤6 结束。
----结束
38.38 ISIS/6/ISIS_RCV_OWN_PURGED_LSP
日志信息
ISIS/6/ISIS_RCV_OWN_PURGED_LSP:ISIS [ProcessId] received an own purged LSP.
(Level=[Level], PduLspId=[PduLspId], Interface=[Interface], NbrSystem=[NbrSystem],
SrcSystem=[SrcSystem], SrcDynName=[SrcDynName], SrcNbrSystem=[SrcNbrSystem])
日志含义
IS-IS系统接收到一个其它系统发送过来的、本地设备产生的剩余时间为0的LSP报文。
日志参数
参数名称 参数含义
ProcessId IS-IS进程号。
Level IS-IS级别。
PduLspId 收到的purged LSP ID。
文档版本 06 (2017-09-12) 华为专有和保密信息 362
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
日志参考 38 ISIS
参数名称 参数含义
Interface 收到purged LSP报文的接口。
NbrSystem 邻居系统ID。
SrcSystem 发送LSP报文的源设备系统ID。
SrcDynName 发送LSP报文的源设备动态主机名。
SrcNbrSystem 发送LSP报文设备的邻居系统ID。
可能原因
l 原因1：本地路由器没有及时刷新自己的LSP，导致本地产生的LSP超时老化后产
生的purge报文泛洪到本地路由器。
l 原因2：因传输故障等原因导致报文被改写，并触发报文purge。
l 原因3：本地路由器整机重启或进程Reset后重新收到本地发送的剩余时间为0的
LSP。
处理步骤
步骤1 检查本地路由器是否整机重启。
l 如果是，正常运行信息，无需处理。
l 如果不是，请执行步骤2。
步骤2 查看日志信息中的SrcSystem字段是否填充。
l 如果是，查看发送该LSP的对端路由器的系统ID，执行步骤4。
l 如果不是，请执行步骤3。
步骤3 查看日志信息中的NbrSystem字段，找到对端路由器并下载日志，查看该LSP是否由此
路由器发出。
l 如果是，请执行步骤4。
l 如果不是，请执行步骤5。
步骤4 在源路由器上分析此LSP是否已清除。
l 如果是，正常运行信息，无须处理。
l 如果不是，请执行步骤5。
步骤5 逐个排查产生剩余时间为0的LSP的源路由器，执行步骤4。
步骤6 请收集相关显示信息，并联系技术支持人员。
步骤7 结束。
----结束
文档版本 06 (2017-09-12) 华为专有和保密信息 363
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
日志参考 38 ISIS
38.39 ISIS/3/ISIS_REJECTED_ADJACENCY
日志信息
ISIS/3/ISIS_REJECTED_ADJACENCY: IS-IS failed to establish the adjacency with its peer.
(isisSysInstance=[isisSysInstance], isisSysLevelIndex=[isisSysLevelIndex],
isisCircIndex=[isisCircIndex], isisCircIfIndex=[isisCircIfIndex],
isisPduFragment=[isisPduFragment], ifIndex=[ifIndex], IfName=[IfName])
日志含义
收到了相邻发送的Hello报文，但无法与其建立IS-IS邻居。
日志参数
参数名称 参数含义
[isisSysInstance] ISIS进程号。
[isisSysLevelIndex] ISIS级别。
[isisCircIndex] 接口索引。
[isisCircIfIndex] 接口索引。
[isisPduFragment] 64字节报文头缩略。
[ifIndex] 接口IF索引。
[IfName] 接口名称。
可能原因
1：本地IS-IS的系统ID或者虚拟系统ID与邻居系统ID配置重复。
2：接口下配置的认证模式或认证密码与邻居的不一致导致Hello报文认证不通过。
3：由于链路两端IS-IS Level-1邻居区域地址不同。
4：本地接口收到与本地Level不匹配的Hello报文。
5：在广播网中，本地接口收到IP地址与本地接口不在同一个网段的接口发送的Hello报
文。
6：在P2P网络中，本地接口在没有配置isis peer-ip-ignore的情况下，收到IP地址与本地
接口不在同一个网段的接口发送的Hello报文。
文档版本 06 (2017-09-12) 华为专有和保密信息 364
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
日志参考 38 ISIS
处理步骤
步骤1 查看输出信息中IfName字段的值，确定接收此报文的接口和接口类型。
l 如果是广播接口=>2。
l 如果是P2P接口=>7。
步骤2 查看输出信息中isisPduFragment字段中的内容，从第十个字节开始的连续六个字节为源
的System ID，确定源，分别在链路两端的接口视图和IS-IS进程视图下使用display this
命令，检查链路两端的IS-IS级别和接口级别是否一致。
l 如果不一致=>3。
l 如果一致=>6。
步骤3 在接口视图下使用isis circuit-level命令，将链路两端的IS-IS级别和接口级别修改一致。
检查问题是否解决。
l 如果解决=>15。
l 如果不能解决=>4。
步骤4 使用display ip interface命令查看源接口的IP地址与本地接口的IP地址是否在同一网
段。
l 如果在同一网段=>8。
l 如果不在同一网段=>5。
步骤5 在源和本地的接口视图下使用ip address命令配置两端接口的IP地址在同一网段。检查
问题是否解决。
l 如果解决=>15。
l 如果不能解决=>8。
步骤6 在源和本地的接口视图下使用display this命令检查是否配置了isis peer-ip-ignore。
l 如果配置了isis peer-ip-ignore=>10。
l 如果未配置isis peer-ip-ignore=>7。
步骤7 在源和本地的接口视图下配置isis peer-ip-ignore或者使用ip address命令配置两端接口
的IP地址在同一网段。检查问题是否解决。
l 如果解决=>15。
l 如果不能解决=>10。
步骤8 检查链路两端Level-1的区域地址是否相同。
l 如果相同=>10。
l 如果不相同=>9。
步骤9 在IS-IS视图下使用network-entity命令配置新的区域地址，确保两端的Level-1区域地址
相同。检查问题是否解决。
l 如果解决=>15。
l 如果不能解决=>10。
步骤10 使用display current-configuration命令检查源设备的System ID与本地IS-IS的System ID
或Virtual System ID是否重复。
l 如果是，请执行步骤11。
l 如果不是，请执行步骤12。
文档版本 06 (2017-09-12) 华为专有和保密信息 365
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
日志参考 38 ISIS
步骤11 （请谨慎使用undo network-entity命令。）修改其中一台的系统ID或者虚拟系统ID，
确保链路两端的无重复的系统ID或者虚拟系统ID。检查问题是否解决。
l 如果是，请执行步骤14。
l 如果不是，请执行步骤12。
步骤12 检查链路两端接口上的IS-IS认证模式或者认证密码是否相同。
l 如果是，请执行步骤14。
l 如果不是，请执行步骤13。
步骤13 在链路两端的接口视图下使用isis authentication-mode命令，修改认证方式和认证密
码，使链路两端的IS-IS认证保持一致。或者在链路两端的接口视图下使用undo isis
authentication-mode命令取消IS-IS认证（删除IS-IS认证会降低系统的安全性）。检查
问题是否解决。
l 如果是，请执行步骤15。
l 如果不是，请执行步骤14。
步骤14 请联系技术支持人员。
步骤15 结束。
----结束
38.40 ISIS/2/ISIS_SEQUENCE_NUMBER_SKIP
日志信息
ISIS/2/ISIS_SEQUENCE_NUMBER_SKIP: ISIS received a self-originated LSP with a
greater sequence number. (isisSysInstance=[isisSysInstance],
isisSysLevelIndex=[isisSysLevelIndex], isisCircIndex=[isisCircIndex],
isisCircIfIndex=[isisCircIfIndex], isisPduLspId=[isisPduLspId], ifIndex=[ifIndex],
IfName=[IfName])
日志含义
IS-IS本地LSP更新时序列号没有逐步增加，而是跳跃增加。
日志参数
参数名称 参数含义
[isisSysInstance] ISIS进程号。
[isisSysLevelIndex] ISIS级别。
[isisCircIndex] 接口索引。
[isisCircIfIndex] 接口索引。
[isisPduLspId] LSP ID。
文档版本 06 (2017-09-12) 华为专有和保密信息 366
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
日志参考 38 ISIS
参数名称 参数含义
[ifIndex] 接口IF索引。
[IfName] 接口名称。
可能原因
1：IS-IS进程重启后，序列号从1开始递增，IS-IS收到邻居发来的序列号更大且LSP ID
相同的LSP。
2：与网络中其它的系统ID配置重复，导致LSP不断更新。
处理步骤
步骤1 使用命令display history-command查看本地是否执行reset isis all命令重启了IS-IS进
程。
l 如果是，请执行步骤正常运行信息，无需处理=>5。
l 如果不是，请执行步骤2。
步骤2 使用命令display isis lsdb连续快速查看本地的LSP序列号增长是否很快，即LSP实际刷
新周期比用timer lsp-refresh命令设置的刷新周期小。
l 如果是，请执行步骤3。
l 如果不是，请执行步骤4。
步骤3 使用命令display current-configuration查看网络中是否存在其他与本地的系统ID或者虚
拟系统ID重复。
l 如果是，请执行步骤4。
l 如果不是，请执行步骤5。
步骤4 （请谨慎使用undo network-entity命令或者undo virtual-system命令）进入本地或与本
地的系统ID或虚拟ID重复的其他的IS-IS视图，执行undo network-entity命令或者undo
virtual-system命令，删除重复的系统ID或虚拟系统ID，再使用network-entity命令或者
virtual-system命令为配置不同的系统ID或者虚拟系统ID。检查问题是否解决。
l 如果是，请执行步骤6。
l 如果不是，请执行步骤5。
步骤5 请联系技术支持人员。
步骤6 结束。
----结束
38.41 ISIS/6/ISIS_SYS_ID_CONFLICT
日志信息
ISIS/6/ISIS_SYS_ID_CONFLICT: System ID may conflict.
(hwisisSysInstance=[hwisisSysInstance], hwisisSysLevelIndex=[hwisisSysLevelIndex],
OwnSystemId=[OwnSystemId], sysProcIndexofDyname=[sysProcIndexofDyname],
文档版本 06 (2017-09-12) 华为专有和保密信息 367
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
日志参考 38 ISIS
OwnDynamicName=[OwnDynamicName], AdjSystemId=[AdjSystemId],
AdjDynamicName=[AdjDynamicName], LocalIP=[hwIsisLocalIP], AdjIP=[hwIsisAdjIP],
RemoteIP=[hwIsisRemoteIP])
日志含义
IS-IS检测到系统ID冲突。
日志参数
参数名称 参数含义
hwisisSysInstance IS-IS进程号。
hwisisSysLevelIndex IS-IS级别。
OwnSystemId IS-IS系统ID。
sysProcIndexofDyname IS-IS进程索引。
OwnDynamicName 本地动态主机名。
AdjSystemId 邻居系统ID。
AdjDynamicName 邻居动态主机名。
LocalIP 本地IP地址。
AdjIP 邻居IP地址。
RemoteIP 冲突端IP地址。
可能原因
同一拓扑中，两台IS-IS路由器的System ID配置重复。
处理步骤
步骤1 修改冲突的System ID，保证拓扑内路由器的System ID不重复。
----结束
38.42 ISIS/2/ISIS_VERSION_SKEW
日志信息
ISIS/2/ISIS_VERSION_SKEW: IS-IS received a PDU with incorrect ProtocolVersion.
(isisSysInstance=[isisSysInstance], isisSysLevelIndex=[isisSysLevelIndex],
isisCircIndex=[isisCircIndex], isisCircIfIndex=[isisCircIfIndex],
isisPduProtocolVersion=[isisPduProtocolVersion], isisPduFragment=[isisPduFragment],
ifIndex=[ifIndex], IfName=[IfName])
文档版本 06 (2017-09-12) 华为专有和保密信息 368
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
日志参考 38 ISIS
日志含义
收到IS-IS版本号不等于本地支持版本号的IS-IS Hello消息。
日志参数
参数名称 参数含义
[isisSysInstance] ISIS进程号。
[isisSysLevelIndex] ISIS级别。
[isisCircIndex] 接口索引。
[isisCircIfIndex] 接口索引。
[isisPduProtocolVersion] 版本号。