title:Selecting representative IP addresses for internet topology studies
author:Xun Fan and
John S. Heidemann
Selecting Representative IP Addresses for Internet
Topology Studies∗
Xun Fan
USC/Information Sciences Institute
4676 Admiralty Way, Suite 1001
Marina del Ray, CA, 90292
PI:EMAIL
John Heidemann
USC/Information Sciences Institute
4676 Admiralty Way, Suite 1001
Marina del Ray, CA, 90292
PI:EMAIL
ABSTRACT
An Internet hitlist is a set of addresses that cover and can
represent the the Internet as a whole. Hitlists have long been
used in studies of Internet topology, reachability, and per-
formance, serving as the destinations of traceroute or per-
formance probes. Most early topology studies used man-
ually generated lists of prominent addresses, but evolution
and growth of the Internet make human maintenance un-
tenable. Random selection scales to today’s address space,
but most random addresses fail to respond. In this paper we
present what we believe is the ﬁrst automatic generation of
hitlists informed censuses of Internet addresses. We formal-
ize the desirable characteristics of a hitlist: responsiveness,
each representative responds to pings; completeness, they
cover all the allocated IPv4 address space; and stability, list
evolution is minimized when possible. We quantify the accu-
racy of our automatic hitlists, showing that only one-third of
the Internet allows informed selection of representatives. Of
informed representatives, 50–60% are likely to respond three
months later, and we show that causes for non-responses are
likely due to dynamic addressing (so no stable representative
exists) or ﬁrewalls.
In spite of these limitations, we show
that the use of informed hitlists can add 1.7 million edge
links (a 5% growth) to traceroute-based Internet topology
studies Our hitlists are available free-of-charge and are in
use by several other research projects.
Categories and Subject Descriptors
C.2.1 [Computer-Communication Networks]: Network
Architecture and Design—Network topology; C.2.5 [Com-
puter-Communication Networks]: Local and Wide-Area
Networks—Internet; C.2.6 [Computer-Communication
Networks]: Internetworking
∗This work is partially supported by US DHS contract num-
ber NBCHC080035, and John Heidemann by NSF grant
number CNS-0626696. The conclusions of this work are
those of the authors and do not necessarily reﬂect the views
of DHS or NSF.
Permission to make digital or hard copies of all or part of this work for
personal or classroom use is granted without fee provided that copies are
not made or distributed for proﬁt or commercial advantage and that copies
bear this notice and the full citation on the ﬁrst page. To copy otherwise, to
republish, to post on servers or to redistribute to lists, requires prior speciﬁc
permission and/or a fee.
IMC ’10, November 1–3, 2010, Melbourne, Australia.
Copyright 2010 ACM 978-1-4503-0057-5/10/11 ...$10.00.
General Terms
Measurement
Keywords
Internet topology, Topology Representatives, IP Hitlist
1.
INTRODUCTION
Smooth operation of the Internet is important to the global
economy, so it is essential that Internet users, providers,
and policy makers understand its performance and robust-
ness. Although on the surface, individuals care only about
their personal performance, a full diagnosis of “why is my
web connection slow?” must consider not just the user’s
“ﬁrst mile” connection, but dozens of servers that aﬀect per-
formance [9]. Web content providers invest great eﬀort in
optimizing page load times to sub-second values [23] and in
building distributed content distribution networks that man-
age traﬃc (for example, [14]). Policy makers debate ques-
tions about universal access [33], a nation’s relative availabil-
ity for broadband access [24], and the robustness of what is
recognized as critical infrastructure.
To answer these questions, network researchers, opera-
tions, and industry have developed a number of tools to
map the Internet [17, 15, 26, 20, 22, 8], evaluate perfor-
mance [32, 20, 23], consider questions about routing and
reachability [31, 3], or the performance of replica placement
(examples include [32, 10]), and evaluate topology robust-
ness [1]. With the Internet’s lack of centralization and mul-
tiple overlapping global “backbones”, active probing plays
an essential role in this process, with traceroute and ping
and their variants providing the main source of router-level
reachability. While one may add AS-level views [4], the In-
ternet’s router-level topology is the focus of this paper. Dif-
ferent router-level studies either target speciﬁc networks [26]
or the whole Internet. Here we are most interested in observ-
ing the whole Internet—more than three billion allocated
IPv4 addresses.
Studies of the entire Internet typically employ a hitlist—
a list of IP address that can represent the billions of allo-
cated addresses. The deﬁning characteristic of a a hitlist
is completeness, where a representative is chosen for every
autonomous system or, in our case, for every allocated block
of addresses deﬁned by a /24 preﬁx, the smallest unit typi-
cally present in a default-free routing table. Representatives
provide a 256-fold (or more) reduction in scanning size, al-
lowing Internet-wide studies to take place in hours instead
of months.
411Although completeness is necessary to study the whole In-
ternet, an ideally hitlist is also responsive and stable. A re-
sponsive representative replies to ICMP messages, allowing
traceroute to conﬁrm a path to the edge of the network, and
ping to measure round-trip time to an edge host. To support
longitudinal studies, the hitlist should be stable, with repre-
sentative identities not changing frequently or arbitrarily.
Although hitlists are easy to deﬁne and have been used in
topology studies for many years (we review related work in
Section 2), they are surprisingly hard to create and main-
tain. Early hitlists were built manually from well known
sites [20], but the size of the Internet and rate of churn in
even well-known servers made manual maintenance unten-
able as it quickly became incomplete. More recent studies
have typically used randomly chosen representatives. While
randomness has some advantages (it can be statistically un-
biased), it sacriﬁces secondary goals of stability and respon-
siveness.
The contribution of this paper is to provide a new, au-
tomated method of hitlist generation that provides com-
plete coverage while maximizing stability and responsive-
ness.1 Our hitlists are constructed (Section 3) by mining
data from IP address censuses, complete, ping-based enu-
merations of the allocated IPv4 address space taken every
two to three months [18].
The second contribution of our work is to evaluate our
hitlists (Section 4). Our hitlists are 100% complete as of
when they are constructed, although when we have no his-
tory (in about two-thirds of the blocks) we select represen-
tatives at random. We deﬁne the accuracy of our hitlists
has how many representatives are responsive three months
after the hitlist is taken. We ﬁnd that two-thirds of the al-
located address space never responds to ICMP probes and
so never has responsive representatives. Of the remaining,
responsive Internet, our hitlists select representatives that
are responsive about 55% of the time. To our knowledge we
are the ﬁrst to study hitlist responsiveness and accuracy.
The ﬁnal contribution of our work is what hitlists reveal
about that nature of the Internet itself. We were surprised
that, in spite of such complete input data, the responsive-
ness of our predicted representatives is not higher. We be-
lieve this upper bound on responsiveness characterizes the
portion of the Internet that has an inherently high rate of ad-
dress churn. One corollary of this limit to representative re-
sponsiveness is that no manual system could ever have been
successful due to natural turnover of addresses in parts of the
network. We also characterize the distribution of addresses
in each block and show that it strongly reﬂects address al-
location patterns (Section 5).
We make our hitlists available free-of-charge, and they are
already being used by several research projects. In Section 6
we discuss the security and policy issues involved in sharing
this data.
2. RELATED WORK
Hitlists are used in active probing for studies of topol-
ogy [17, 15, 19, 26, 30, 22, 25, 8], performance [32, 20,
23], and reachability [31, 4]. and for other purposes [32,
1, 10]. Each of these studies uses some hitlist (sometimes
1We would like to thank Randy Bush for suggesting the
idea that our address censuses data could support hitlist
generation.
called a seed or probe list) generated manually, randomly,
or automated from several sources. We review each hitlist
generation method next.
Early topology work used manually generated lists. Skit-
ter is a well-known measurement tool developed at CAIDA,
to study the IPv4-interface-level of the core Internet topol-
ogy [19]. (With IP alias resolution, this can provide a router-
level map.) It uses traceroutes from multiple locations to a
hitlist of destinations. Their target address list was manu-
ally built from many sources, including tcpdump from the
UCSD–CERF link, hostnames from search engines, and in-
termediate addresses seen from their own traces records. In
2000 their hitlist included about 313,000 destinations, and
by 2004 it had grown to 971,080. While their hitlist was
of high quality, they found it very labor-intensive to main-
tain, and responsiveness degraded over time as destinations
changed. (They report that their initial, web-server based
list shows a 2–3% reduction each month in reachable destina-
tions [19].) The cost of manual list maintenance was one rea-
son that prompted them to change to random probing with
Archipelago. More recently, Maennel has maintained a man-
ual list, derived from the Skitter list, but augmented with
guided scanning to cover each AS and provide 306,708 repre-
sentatives. They require reachable addresses study routing
reachability [4]. We used a version of their list to seed our
initial stable list, but our techniques provide much greater
coverage at lower cost. Unlike all of these manual hitlists,
our goal is to fully automate hitlist generation to allowing
more complete and timely coverage.
Random representative selection allows low-cost genera-
tion of hitlists to much larger numbers of networks. Merca-
tor developed informed random probing to adaptively ad-
just its probe list based on prior results [17]. By adap-
tively growing the hitlist, Mercator strives to quickly and
eﬃciently discover a topology while minimizing hitlist size.
Archipelago (Ark) is a measurement platform designed to
support traceroute and other measurements [8], eﬀectively
a next-generation Skitter. Ark’s hitlist covers all routed /24
blocks, choosing a random last-octet within each /24 block,
The random hitlists in Mercator and Ark are essential to
cover the millions of /24 networks in today’s Internet, but
Mercator’s adaptive algorithm means completeness is uncer-
tain (although eﬃciency, not completeness, was their goal),
and random probing in both Mercator and Ark may sac-
riﬁce responsiveness of the destination address. Our hitlist
provides complete coverage while maximizing responsiveness
(both deﬁned precisely in Section 3.1).
In Section 4.5 we
evaluate the degree to which informed hitlist generation may
improve the number of links discovered in a topology study.
Rather than a random destination, DisCarte’s hitlist se-
lects the .1 address in each /24 block of the routed address
space. DisCarte [25] adds record route information to tracer-
oute probing to obtain more accurate and complete network
topologies. DisCarte requires a responsive destination, and
ﬁnd 376,408 responsive representatives in the .1 address of
each routed /24. Our work conﬁrms that the .1 address is
responsive twice as often as the address with median respon-
siveness (Section 5), but we suggest that census-informed
representative selection can get much better responsiveness.
Finally, there has been some work in IPv6 topology dis-
covery. The Atlas system uses a manually generated list
built from 6bone destinations [30], then expanded it based
on discoveries. The full address-space census that is the ba-
412sis of our work is only applicable to the IPv4 address space,
so combinations of active and passive methods as proposed
in Atlas are essential for IPv6. As future work, comparison
of both active and passive hitlist generation approaches in
the IPv4 space may provide a basis for inferring coverage of
passive studies of IPv6.
3. METHODOLOGY
We next describe the requirements of an IP hitlist (Sec-
tion 3.1), and how we transform census data (reviewed in
Section 3.2) using several possible prediction methods (Sec-
tion 3.3) to get a good quality hitlist. We also provide some
details on how our implementation copes with Internet-sized
datasets.
3.1 Hitlist Requirements
Our goal is to provide representatives that are responsive,
complete and stable.
By responsive, we mean each representative is likely to re-
spond to an echo request with an echo reply instead of an
ICMP error code. As we describe below, we select repre-
sentatives that have responded frequently in the past. We
do not guarantee that that address responded in the most
recent census, but we bias our selection to favor recent re-
sults. We consider several prediction functions below in Sec-
tion 3.3.
By complete, we mean we report one representative ad-
dress for every allocated /24 block. Some groups have used
other deﬁnitions of completeness, such as one representative
per AS, or per routed BGP block. AS- or BGP-complete
hitlists will be both sparser and smaller than /24-complete
maps, since ASes typically include routes for many preﬁxes,
and routed preﬁxes often cover blocks larger than /24s. In-
stead, we select one representative for each /24 block for
two reasons. The main reason is so that the hitlist is decou-
pled from the routing system, to allow independent study
of the routing system itself, and since routing tables vary
depending on when and where they are taken. Second, it is
relatively easy for researchers to derive custom hitlist from
ours, perhaps selecting sparser representatives per AS or
per routed preﬁx. We believe our per-/24 representatives
thus provide a more general and reusable result than more
“cooked” alternatives.
By stable, we mean that representatives do not change ar-
bitrarily. We change representatives when a new represen-
tative would signiﬁcantly improve the score for that block,
typically because a representative has ceased to be reach-
able. We promote stability as a goal to simplify longitudi-
nal studies, where frequent changes of representative would
make comparisons across time more diﬃcult. Stability also
reduces the eﬀects of transient routing outages or packet loss
on the long-term hitlist. We implement stability by apply-
ing inertia as a threshold to changing a previously selected
representative. Currently we switch representatives when
the switch will improve its score signiﬁcantly, with inertia of
0.34 (see Section 4.3).
The three goals of responsiveness, completeness, and sta-
bility can be in conﬂict. For example, completeness requires
that we select representatives that may be non-responsive.
To guarantee representatives for all allocated addresses, we
select representatives even for blocks that have no recent re-
sponses. We also select representative for blocks that have
never responded.
In both cases, we annotate these repre-
Censuses
Date
Duration (days)
it11w
it12w
it13w
it14w
it15w
it16w
it17w
it18w
it19w
it20w
it21w
it22w
it23w
it24w
it25w
it26w
it27w
it28w
it29w
it30w
it31w
it32w
2006-03-07
2006-04-13
2006-06-16
2006-09-14
2006-11-08
2007-02-14
2007-05-29
2007-09-14
2007-12-18
2008-02-29
2008-06-17
2008-09-11
2008-11-25
2009-02-03
2009-03-19
2009-05-27
2009-07-27
2009-09-14
2009-11-02
2009-12-23
2010-02-08
2010-03-29
23
24
31
31
61
50
52
47
48
86
49
35
29
29
29
31
25
30
30
29
30
29
Table 1: IPv4 censuses [29] used in this paper.
sentatives with distinguished scores. Stability and inertia
can also decrease responsiveness; in Section 4.3 we examine
how the inertia threshold reduces churn and how it aﬀects
responsiveness.
3.2 Background: Internet censuses
Our main goal with a hitlist is to predict the future: a
representative should be responsive in the future. Our tool
to make this prediction is data from past responses. Hitlists
selection leverages Internet censuses that have been taken
regularly since 2003 [18].
Each Internet census is the results of a ping (an ICMP
ECHO REQUEST message) sent to every allocated IPv4 ad-
dress. Censuses are far from perfect: a census must be taken
carefully to avoid ICMP rate limiting or transient router er-
rors, and ﬁrewalls reduce ping response rates by around 40%.
Hitlist, however, prefer hosts that are ICMP responsive,
since traceroute consists of iterated, TTL-limited ICMP mes-
sages. Firewall-limited censuses are therefore ideal for hitlist
generation.
It takes 2–3 months to carry out a full census (the IPv4