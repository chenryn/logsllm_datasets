配置该参数可能会对RPO造成影响, 若主机在所配置的超时时间窗口内发生故障，则
从开始阻塞到主机故障这段时间窗口内的数据可能丢失。
25.6.2.4 enable_stream_replication
参数说明：控制主备、主从是否进行数据和日志同步。
该参数属于SIGHUP类型参数，请参考表15-1中对应设置方法进行设置。
须知：
 此参数属于性能测试参数，用于测试带有备机和不带备机的性能参数。关闭参数后，
不能进行切换、故障等异常场景测试，否则会出现主备从不一致的情况。
 此参数属于受控参数，不建议正常业务场景下关闭此参数。
 当前版本默认不支持主备从部署模式。
取值范围：布尔型
 on表示打开主备、主从同步。
 off表示关闭主备、主从同步。
默认值：on
25.6.2.5 enable_mix_replication
参数说明：控制主备、主从之间WAL日志及数据复制的方式。
该参数属于INTERNAL类型参数，默认值为off，不允许外部修改。
须知：
 此参数目前不允许正常业务场景下改变其值，即关闭WAL日志、数据页混合复制
南大通用数据技术股份有限公司
1246
GBase 8s V8.8开发者手册
模式。
 当前版本默认不支持主备从部署模式。
取值范围：布尔型
 on表示打开WAL日志、数据页混合复制模式。
 off表示关闭WAL日志、数据页混合复制模式。
默认值：off
25.6.2.6 vacuum_defer_cleanup_age
参数说明：指定VACUUM使用的事务数，VACUUM会延迟清除无效的行存表记录，
延迟的事务个数通过vacuum_defer_cleanup_age进行设置。即VACUUM和VACUUMFULL
操作不会立即清理刚刚被删除元组。
该参数属于SIGHUP类型参数，请参考表15-1中对应设置方法进行设置。
取值范围：整型，0～1000000，值为0表示不延迟。
默认值：0
25.6.2.7 data_replicate_buffer_size
参数说明：发送端与接收端传递数据页时，队列占用内存的大小。此参数会影响主备之
间复制的缓冲大小。
该参数属于POSTMASTER类型参数，请参考表15-1中对应设置方法进行设置。
取值范围：整型，4096~1072693248，单位为KB。
默认值：16MB（即16384KB）
25.6.2.8 walsender_max_send_size
参数说明：设置主机端日志或数据发送缓冲区的大小。
该参数属于POSTMASTER类型参数，请参考表15-1中对应设置方法进行设置。
取值范围：整型，8~INT_MAX，单位为KB。
南大通用数据技术股份有限公司
1247
GBase 8s V8.8开发者手册
默认值：8M（即8192KB）
25.6.2.9 enable_data_replicate
参数说明：当数据库在数据导入行存表时，主机与备机的数据同步方式可以进行选择。
该参数属于USERSET类型参数，请参考表15-1中对应设置方法进行设置。
取值范围：布尔型
 on表示导入数据行存表时主备数据采用数据页的方式进行同步。当replication_type
参数为1时，不允许设置为on，如果此时用guc工具设置成on，会强制改为off。
 off表示导入数据行存表时主备数据采用日志（Xlog）方式进行同步。
默认值：off
25.6.2.10 ha_module_debug
参数说明：用于查看数据复制时具体数据块的复制状态日志。
该参数属于USERSET类型参数，请参考表15-1中对应设置方法进行设置。
取值范围：布尔型
 on表示日志中将打印数据复制时每个数据块的状态。
 off表示日志中不打印数据复制时每个数据块的状态。
默认值：off
25.6.2.11 enable_incremental_catchup
参数说明：控制主备之间数据追赶（catchup）的方式，目前默认不支持主备从部署模
式。
该参数属于SIGHUP类型参数，请参考表15-1中对应设置方法进行设置。
取值范围：布尔型
 on表示备机catchup时用增量catchup方式，即从从备本地数据文件扫描获得主备
差异数据文件列表，进行主备之间的catchup。
南大通用数据技术股份有限公司
1248
GBase 8s V8.8开发者手册
 off表示备机catchup时用全量catchup方式，即从主机本地所有数据文件扫描获得
主备差异数据文件列表，进行主备之间的catchup。
默认值：on
25.6.2.12 wait_dummy_time
参数说明：同时控制增量数据追赶（catchup）时，GBase8s主备从按顺序启动时等待
从备启动的最长时间以及等待从备发回扫描列表的最长时间。
该参数属于SIGHUP类型参数，请参考表15-1中对应设置方法进行设置。
取值范围：整型，范围1~INT_MAX，单位为秒
默认值：300
说明：
 单位只能设置为秒。
 当前版本默认不支持主备从部署模式。
25.6.2.13 catchup2normal_wait_time
参数说明：打开最大可用模式 most_available_sync，主备场景下，控制备机数据追赶
（catchup）阻塞主机的最长时间。该时间为估算值，实际结果可能与参数值有偏差。
该参数属于SIGHUP类型参数，请参考表15-1中对应设置方法进行设置。
取值范围：整型，范围-1~10000，单位为毫秒。
 -1表示主机阻塞直到备机数据追赶完成。
 0表示备机数据追赶时始终不阻塞主机。
 其余值表示备机数据追赶时阻塞主机的最长时间。例如，取值5000，表示当备机
数据追赶完成时间还剩5s时，阻塞主机等待其完成。
默认值：-1
南大通用数据技术股份有限公司
1249
GBase 8s V8.8开发者手册
25.6.2.14 sync_config_strategy
参数说明：主机和备机、备机和级联备之间配置文件的同步策略。
该参数属于POSTMASTER类型参数，请参考表15-1中对应设置方法进行设置。
取值范围：枚举类型
 all_node: 主机配置为all_node时，表示允许主机向所有备机主动同步配置文件；
备机配置为all_node时，表示允许当前备机向其主机发送同步请求，允许当前备机
向其所有级联备主动同步配置文件；级联备配置为all_node时，表示允许当前级联
备向上一级备机发送同步请求。
 only_sync_node: 主机配置为only_sync_node时，表示仅允许主机向所有同步备机
主动同步配置文件；备机配置为only_sync_node时，表示允许当前备机向其主机发
送同步请求，不允许当前备机向其所有级联备机主动同步配置文件；级联备配置为
only_sync_node时，表示允许当前级联备向其备机发送同步请求。
 none_node: 主机配置为none_node时，表示不允许主机向任何备机主动同步配置文
件；备机配置为none_node时，表示不允许当前备机向其主机发送同步请求，不允
许当前备机向其所有级联备主动同步配置文件；级联备配置为none_node时，表示
不允许当前级联备向其备机发送同步请求。
默认值：all_node
须知：
 在一个包含了主机、备机和级联备的GBase8s集群中，主机相对于备机是发送端，
备机相对于主机是接收端，备机相对于级联备是发送端，级联备相对于备机是接收
端。
 发送端主动向接收端同步配置文件、接收端请求发送端同步配置文件是两个独立的
事件，均会使得配置文件同步。若不希望配置文件同步，则需要将集群中所有节点
的sync_config_strategy参数配置为none_node；若仅希望主机与同步备机同步配置
文件，则需要将主机的sync_config_strategy参数配置为only_sync_node，其余节点
南大通用数据技术股份有限公司
1250
GBase 8s V8.8开发者手册
配置为 none_node；若希望所有节点同步配置文件，则需要将所有节点的
sync_config_strategy参数配置为all_node。目前暂不支持自定义指定任意节点间的
同步策略。
 配置参数同步的具体表现为，发送端发送配置文件，对接收端配置文件中的对应参
数直接覆盖。若设置了配置文件需要同步的策略，则修改接收端配置参数后，发送
端会立刻覆盖接收端的配置参数，使得接收端修改不生效。
 即使设置了配置文件需要同步的策略，仍有部分配置参数不会被同步。它们是：
“application_name”、 “archive_command”、 “audit_directory”、 “available_zone”、
“comm_control_port”、“comm_sctp_port”、“listen_addresses”、“log_directory”、“port”、
“replconninfo1”、“replconninfo2”、“replconninfo3”、“replconninfo4”、“replconninfo5”、
“replconninfo6”、“replconninfo7”、“replconninfo8”、“ssl”、“ssl_ca_file”、“ssl_cert_file”、
“ssl_ciphers” 、 “ssl_crl_file” 、 “ssl_key_file” 、 “ssl_renegotiation_limit” 、
“ssl_cert_notify_time” 、 “synchronous_standby_names” 、 “local_bind_address” 、
“perf_directory”、“query_log_directory”、“asp_log_directory”、“streaming_router_port”、
“enable_upsert_to_merge” 、 “archive_dest” 、 “recovery_min_apply_delay” 、
“sync_config_strategy”。
25.6.3 备服务器
25.6.3.1 hot_standby
参数说明：设置是否允许备机在恢复过程中连接和查询。
该参数属于POSTMASTER类型参数，请参考表15-1中对应设置方法进行设置。
须知：
- 如果此参数设置为on，wal_level必须设置为hot_standby，否则将导致数据库无法启
动。 - 在双机环境中，因为会对双机其他一些功能产生影响，hot_standby参数不能设置成
off。- 如果hot_standby参数曾经被关闭，且wal_level参数曾被设置低于hot_standby等级，
那么，再次打开hot_standby参数之前，为了确保主备环境下备机上待回放的日志都可以支
南大通用数据技术股份有限公司
1251
GBase 8s V8.8开发者手册
持备机查询功能，需要进行如下操作： 1. 将主、备的wal_level参数调整到hot_standby等
级或以上，并重启实例生效。 2. 在主机上执行 checkpoint 操作，并通过查询
pg_stat_get_wal_senders()系统函数，确认各个备机的receiver_replay_location追上主机当前
的sender_flush_location，保证wal_level的调整同步到备机并生效，且备机不需要再回放之
前低等级的日志。 3. 将主、备的hot_standby参数打开（设为on），并重启实例生效。
取值范围：布尔型
 on表示允许备机在恢复过程中连接和查询。
 off表示不允许备机在恢复过程中连接和查询。
默认值：on
25.6.3.2 max_standby_archive_delay
参数说明：当开启双机热备模式时，如果备机正处理归档WAL日志数据，这时进行查
询就会产生冲突，此参数就是设置备机取消查询之前所等待的时间。
该参数属于SIGHUP类型参数，请参考表15-1中对应设置方法进行设置。
须知： -1表示允许备机一直等待冲突的查询完成。
取值范围：整型，范围：-1~INT_MAX，单位为毫秒。
默认值：3s（即3000ms）
25.6.3.3 max_standby_streaming_delay
参数说明：当开启双机热备模式时，如果备机正通过流复制接收WAL日志数据，这时
进行查询就会产生冲突，这个参数就是设置备机取消查询之前所等待的时间。
该参数属于SIGHUP类型参数，请参考表15-1中对应设置方法进行设置。
须知： -1表示允许备机一直等待冲突的查询完成。
取值范围：整型（毫秒），范围：-1~INT_MAX。
默认值：3s（即3000ms）
南大通用数据技术股份有限公司
1252
GBase 8s V8.8开发者手册
25.6.3.4 wal_receiver_status_interval
参数说明：设置WAL日志接收进程的状态通知给主机的最大时间间隔。
该参数属于SIGHUP类型参数，请参考表15-1中对应设置方法进行设置。
取值范围：整型，范围：0~INT_MAX，单位为毫秒。
默认值：5s（即5000ms）
须知：
当该参数设置为0时，表示关闭备机向主机反馈日志接收位置等信息，可能会导致主机
事务提交阻塞、switchover操作失败等异常现象。正常业务场景，不建议将该参数设置为0。
25.6.3.5 hot_standby_feedback
参数说明：设置是否允许将备机上执行查询的结果反馈给主机，这可以避免查询冲突。
该参数属于SIGHUP类型参数，请参考表15-1中对应设置方法进行设置。
取值范围：布尔型
 on表示允许将备机上执行查询的最小事务号反馈给主机。
 off表示不允许将备机上执行查询的最小事务号反馈给主机。
默认值：off
须知：当该参数为on时，主机的旧版本数据的清理会受限于备机正在读的事务，
即主机只允许清理小于备机反馈回来的事务所作的更改。 所以，若该参数开启时，会影响
主机的性能。
25.6.3.6 wal_receiver_timeout
参数说明：设置从主机接收数据的最大等待时间。
该参数属于SIGHUP类型参数，请参考表15-1中对应设置方法进行设置。
取值范围：整型，0~INT_MAX，单位为毫秒。
默认值：6s（即6000ms）
南大通用数据技术股份有限公司
1253
GBase 8s V8.8开发者手册
25.6.3.7 wal_receiver_connect_timeout
参数说明：设置连接主机的最大等待超时时间。
该参数属于SIGHUP类型参数，请参考表15-1中对应设置方法进行设置。
取值范围：整型，0~INT_MAX/1000，单位为秒。
默认值：2s
25.6.3.8 wal_receiver_connect_retries
参数说明：设置连接主机的最大尝试次数。
该参数属于SIGHUP类型参数，请参考表15-1中对应设置方法进行设置。
取值范围：整型，1~INT_MAX。
默认值：1
25.6.3.9 wal_receiver_buffer_size
参数说明：备机与从备接收Xlog存放到内存缓冲区的大小，目前默认不支持主备从部
署模式。
该参数属于POSTMASTER类型参数，请参考表15-1中对应设置方法进行设置。
取值范围：整型，4096~1047552，单位为KB。
默认值：64MB（即65536KB）
25.6.3.10 primary_slotname
参数说明：设置备机对应主机的slotname，用于主备校验，与wal日志删除机制。
该参数属于SIGHUP类型参数，请参考表15-1中对应设置方法进行设置。
取值范围：字符型
默认值：空字符串
25.6.3.11 max_logical_replication_workers
参数说明：订阅端applyworker线程的最大数量。
南大通用数据技术股份有限公司
1254
GBase 8s V8.8开发者手册
该参数属于POSTMASTER类型参数，请参考表15-1中对应设置方法进行设置。
取值范围：整型，0~262143
默认值：4
25.7内存表
介绍内存表的配置参数。
25.7.1.1 enable_codegen_mot
参数说明：设置是否启用原生LLVMLite执行简单查询。如果当前平台上不支持原生
LLVM，那么将使用伪LLVM。
该参数属于POSTMASTER类型参数，请参考表15-1中对应设置方法进行设置。
取值范围：布尔值
默认值：true
25.7.1.2 force_pseudo_codegen_mot
参数说明：设置是否强制伪LLVMLite执行简单查询，即使当前平台上支持原生LLVM。
该参数属于POSTMASTER类型参数，请参考表15-1中对应设置方法进行设置。
取值范围：布尔值
默认值：true
说明：
即使将force_pseudo_codegen_mot设置为true，而当前平台不支持原生LLVM，那么仍
然会使用伪LLVM。
25.7.1.3 enable_codegen_mot_print
参数说明：设置是否打印生成函数的IR字节码（如果使用伪 LLVM，则打印伪IR字
节码）。
南大通用数据技术股份有限公司
1255
GBase 8s V8.8开发者手册
该参数属于POSTMASTER类型参数，请参考表15-1中对应设置方法进行设置。
取值范围：布尔值
默认值：true
25.7.1.4 codegen_mot_limit
参数说明：设置全局缓存计划源的数量限制以及每个会话的克隆计划。
该参数属于POSTMASTER类型参数，请参考表15-1中对应设置方法进行设置。
取值范围：uint32
默认值：100
25.7.1.5 mot_allow_index_on_nullable_column
参数说明：设置是否允许在内存表nullable列上创建索引。
该参数属于POSTMASTER类型参数，请参考表15-1中对应设置方法进行设置。