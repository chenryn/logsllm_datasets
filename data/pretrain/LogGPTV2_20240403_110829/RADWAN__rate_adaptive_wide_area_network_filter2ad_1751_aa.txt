title:RADWAN: rate adaptive wide area network
author:Rachee Singh and
Manya Ghobadi and
Klaus-Tycho Foerster and
Mark Filer and
Phillipa Gill
RADWAN: Rate Adaptive Wide Area Network
Klaus-Tycho Foerster
Rachee Singh
PI:EMAIL
University of Massachusetts, Amherst
Monia Ghobadi
PI:EMAIL
Microsoft Research
PI:EMAIL
Aalborg University
Mark Filer
PI:EMAIL
Microsoft
Phillipa Gill
PI:EMAIL
University of Massachusetts, Amherst
ABSTRACT
Fiber optic cables connecting data centers are an expensive
resource acquired by large organizations with significant
monetary investment. Their
importance has driven a
conservative deployment approach with redundancy and
reliability baked in at multiple layers. In this work, we take a
more aggressive approach and argue for adapting the
capacity of fiber optic links based on their signal-to-noise
ratio (SNR). We investigate this idea by analyzing the SNR
of over 2,000 links in an optical backbone for a period of 3
years. We show that the capacity of 64% of IP links can be
augmented by at least 75 Gbps, leading to an overall capacity
gain of over 134 Tbps. Moreover, adapting link capacity to a
lower rate can prevent 25% of link failures. This means using
the same links, we get higher capacity and better availability.
We propose RADWAN, a traffic engineering system that
allows optical links to adapt their rate based on the observed
SNR to achieve higher throughput and availability while
minimizing the churn during capacity reconfigurations. We
evaluate RADWAN using a testbed consisting of 1,540 km
fiber with 16 amplifiers and attenuators. We then simulate the
throughput gains of RADWAN at scale compared to the
state-of-the-art. Our results show that with realistic traffic
matrices and conservative churn control, RADWAN
improves the overall network throughput by 40%. The
service provider we study has invested in this idea and is
rolling out the necessary infrastructure to deploy the first
capacity variable link between Canada and Europe this year.
1 INTRODUCTION
Optical backbones are million dollar assets, with fiber
comprising their most expensive component. Companies like
Google, Microsoft and Facebook purchase or lease fiber to
support wide-area connectivity between distant data center
locations but have not been able to fully leverage this invest-
ment due to conservative provisioning of the optical network.
We show that wide area fiber links exhibit significantly better
signal quality (measured by the signal-to-noise-ratio or SNR)
1
than the minimum required to support transmission at 100
Gbps, leaving money on the table in terms of link capacities.
In other words, there is potential to operate fiber links at
higher capacity, thereby increasing the throughput of existing
optical networks. We analyze historical SNR from 2,000 opti-
cal channels in a backbone network and find that the capac-
ity of 64% links can be augmented by 75 Gbps or more, lead-
ing to a capacity gain of over 134 Tbps in the network. Doing
this simplistically, operators can statically raise link capaci-
ties to a higher value (e.g., 150 Gbps or 200 Gbps) supported
by the link’s SNR. However, aggressively using the fiber in
such a manner increases the rate of link failures as operating
near the SNR makes links susceptible to failures when signal
quality fluctuates.
On the other hand, degradation in the SNR of a link below
a threshold is treated as a link failure and the link is
effectively “down.” We show that this is wasteful, as at least
25% of current failures can be mitigated by reducing the rate
of transmission from 100 Gbps to 50 Gbps.
At the core of these issues is a fundamental orthodoxy in
the operation of wired networks: a fiber link is either up with
a fixed capacity or down, largely oblivious to changes in the
quality of the underlying optical signal. With this school of
thought, operators are forced to account for large margins
between the actual SNR and the operating capacity to avoid
frequent link failures. In contrast, wireless networks employ
a variety of schemes to adapt the transmission rate in
response to changing signal quality [3, 23, 27]. However, the
adoption of adaptive bit-rate schemes has been slow in
wireless communication because of practical challenges.
Specifically, adapting transmission rates to the wireless
channel quality is hard as the quality can vary at time-scales
shorter than a single packet transmission time [27]. In
addition, obtaining accurate measurements of received signal
strength indication (RSSI) of wireless media (a proxy for true
SNR) is hard in practice [14] because of issues like
mis-calibration and packet corruption.
We argue that optical links are well positioned to be
rate-adaptive. First, signal quality varies at a much coarser
time granularity in fiber than in wireless media (hours as
opposed to milliseconds). This stability can be leveraged in
wide-area networks to amortize the cost of infrequently shift-
ing between multiple discrete modulation schemes as signal
quality changes. Second, unlike wireless signals, optical
signal quality is easily inferred from bit-error rate (BER)
reported post forward error correction (FEC). Leveraging
these benefits, we present RADWAN (Rate Adaptive WAN),
a system that adapts channel bit-rates in WANs to improve
the overall throughout and availability of the network.
RADWAN consists of a centralized rate-adaptive WAN
controller that gathers SNR from all fiber channels in the
network for adjusting the modulation format of the channels
to achieve higher or lower data rates. In traditional wide area
setting, QPSK modulation format supports data rates of 100
Gbps for distances upto 3,000 km, 8QAM allows 150 Gbps
for distances up to 2,100 km, and 16QAM allows 200 Gbps
for distances up to 800 km (see §7 for a discussion on
distance). By switching links to a lower modulation format
(BPSK with data rates of 50 Gbps), RADWAN allows critical
WAN links to function at lower data rates instead of failing
altogether. We refer to these variable capacity links in
RADWAN as dynamic capacity links. By building on top of
existing software based WAN controllers [15], RADWAN
allows existing traffic engineering schemes to exploit
dynamic capacity to improve network throughput. We make
two key contributions to make rate adaptive WANs practical:
Optimal WAN traffic engineering. A major challenge
associated with dynamically adapting link capacities in
WANs is the latency incurred by network hardware to change
a link’s modulation format. To reconcile the latency of
capacity changes and benefits of adapting link capacities in
WANs,
the
centralized traffic engineering optimization problem to avoid
unnecessary capacity reconfiguration (Section 4). We
evaluate the RADWAN controller by comparing the
throughput gains of employing RADWAN at scale over the
state-of-the-art controller. Our results show that
in a
real-world network topology with realistic traffic demands
and conservative traffic churn settings, RADWAN improves
the overall network throughput by 40% (Section 6).
Avoiding high latency of modulation reconfiguration.
We build a testbed emulating a four datacenter WAN con-
nected via 1,540 km of fiber. Using this testbed, we confirm
the viability of modulation reconfiguration to achieve greater
network throughput. We benchmark the behavior of the
RADWAN controller as it reacts to SNR degradation by
switching to a lower modulation format. During the
modulation change, the line-rate traffic on the affected link is
migrated to a backup path until the modulation change can
show that
complete
the RADWAN controller
re-formulates
(Section 5). Our
experiments
reconfiguring modulation formats on commodity hardware
incurs a latency of 68 seconds, on average. We develop a
prototype that demonstrates the feasibility of decreasing this
reconfiguration time by a factor of 1,000 (Section 7.1).
RADWAN opens the door to revisit several classic
networking problems in light of dynamic capacity links and
opens new lines of research. For instance, are there graph
abstractions that capture networks with dynamic capacity
links? How do classical networking algorithms (such as
maximum-flow problem [10]) change in the presence of
variable link capacities? Are there smart capacity planning,
failure-recovery, load-balancing, or on-demand bandwidth
allocation algorithms that can benefit from rate adaptive
links? RADWAN provides a foundation for beginning to
think about these problems. In addition to new avenues of
research, RADWAN has also been successful at convincing
network operators about the potential for dynamic capacity
links with the first operational dynamic capacity link
between Canada and Europe set to roll out in 2018.
2 QUANTIFYING THE OPPORTUNITY
We first investigate the signal quality in a large optical
backbone, comprised of 2,000 optical channels. Our dataset
consists of the average, minimum, and maximum SNR per
channel, aggregated over 15 minute intervals for 3 years. We
characterize the SNR of these channels and quantify its
variations. In contrast to wireless networks [27], where signal
quality may vary on short
time intervals and where
estimating SNR is complicated by signal interference, signals
in fiber optical media do not suffer from these challenges.
2.1 Characterizing SNR in our WAN
First, we note that the average SNR can support much more
than the configured link rate of 100 Gbps. In Figure 1(a) we
plot the distribution of the average SNR of all channels in the
network and observe that over 64% of the channels have an
SNR that can support data rates of 175 Gbps.This represents
a significant opportunity to improve the throughput of optical
links by operating closer to the actual SNR of the signal.
But what about stability? While the average may be well
above what is needed to run the links at 100 Gbps, adjusting
link rates requires that SNR be stable to avoid frequent capac-
ity fluctuations. Figure 1(b) shows the SNR over time of 40
channels on the same WAN fiber cable. We observe that the
SNR of these channels is largely stable. Occasional dips, sug-
gest impairments in fiber or other optical hardware. Despite
these occasional dips, the SNR of all channels remains well
above 6.5 dB which is required to carry 100 Gbps of traffic
at fixed capacity, highlighting over-provisioning by network
2
(a)
(b)
(c)
Figure 1: (a) Distribution of the average SNR of over 2,000 channels in a backbone network for 3 years. Note that the SNR of optical channels is much
higher than the required SNR for 100 Gbps bit rate (6.5 dB). (b) SNR variations in 40 optical channels (i.e., IP links) on a wide area fiber cable. Dotted
lines represent the feasible link capacity for a particular SNR. (c) Variations in the channel SNR in intervals of different durations. Observe that most
links do not observe significant variation in SNR for several hours.
operators in an attempt to prevent link failures. Other fibers
in the network show similar behavior.
We further consider variability of SNR across all links on
different time-scales. For each time interval of size 15 min-
utes, 10 hours, 1 day and 1 week, we calculate the variabil-
ity of SNR (the difference between maximum SNR and mini-
mum SNR) for all optical channels in the backbone network.
Figure 1(c) shows the distribution of SNR variation in time
intervals of different sizes. We confirm that SNR remains sta-
ble over several hours at a time. A small fraction (≤ 5%) of
links observe variation of over 1 dB in the 10 hour interval.
Moreover, while our SNR measurements are aggregated over
15 minute intervals, we argue that our conclusions are sound,
as Figure 1(c) shows the variations in SNR in fiber over 15
minutes are negligible. This is in contrast with wireless me-
dia where significant SNR changes can happen within a few
milliseconds.
Why do we need variable bandwidth links? Based on our
observation of stable but over-provisioned SNR of links, one
might be tempted to operate links closer to the actual SNR by
simply making a one-time decision to increase the
transmission rate of all links. However, we find that the
frequency of link failures increases if we cannot dynamically
adapt to changes of SNR. This is because infrequent but
sizeable variations in SNR occur in fiber links. While the
SNR of a small fraction of links changes significantly in a
few hours, 10% of all links undergo 2 dB of change in SNR