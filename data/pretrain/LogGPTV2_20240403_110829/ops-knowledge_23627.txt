User: Please describe how to configure a server on Linux to support remote logging.
Assistant: 1. Install and start rsyslogd service - Ubuntu/Debian system: `sudo apt-get install rsyslog` - CentOS/RHEL system: `sudo yum install rsyslog` - Start service: `sudo systemctl start rsyslog` 2. Configure rsyslogd service - Edit rsyslog configuration file: `sudo nano /etc/rsyslog.conf` - Uncomment the following two lines of code (remove the preceding #): ``` #$ModLoad imtcp #$InputTCPServerRun 514 ``` - Modify `$InputTCPServerRun` It is recommended to modify the port to a port above 1024, for example: ``` #$InputTCPServerRun 514 $InputTCPServerRun 1514 ``` - Save and exit the file, restart the rsyslog service: `sudo systemctl restart rsyslog` 3. Configure the firewall - open the TCP port, For example, the port 1514 modified above: `sudo ufw allow 1514/tcp` - restart the firewall: `sudo ufw reload` 4. Prevent unauthorized access - modify the rsyslog configuration file: `sudo nano /etc/rsyslog.conf` - in `$ Add the following content below the InputTCPServerRun` line: ``` $AllowedSender TCP, 192.168.0.0/24 # Allow hosts with IP address 192.168.0.0/24 to send logs via TCP protocol $AllowedSender UDP, 192.168.0.0/24 # Allow IP addresses The host of 192.168.0.0/24 sends logs through UDP protocol ``` Note: `192.168.0.0/24` represents an IP address segment, which should be modified according to the actual network conditions. - Save and exit the file, restart the rsyslog service: `sudo systemctl restart rsyslog` 5. Collect remote logs - send logs on the remote server (eg host A) to the target server (eg host B): ``` logger -n host B IP address of -p syslog.info "test message" # Send a log message of INFO level ``` Note: use `-n` to specify the IP address of the target server, `syslog.info` to specify the log level, `test message` is the log content. - View the collected logs on the target server (that is, host B): ``` sudo tail -f /var/log/syslog # View the tail of the /var/log/syslog file``` You can see logs similar to the following : ``` Sep 18 11:50:28 Host A test message ``` Indicates that the logs from host A have been successfully collected.