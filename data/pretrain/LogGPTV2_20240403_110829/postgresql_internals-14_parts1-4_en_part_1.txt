Egor Rogov
PostgreSQL 14
Internals
ThesearePartsI–IVofthebook.
Thelastpartwillfollowsoon:
V. IndexTypes
PostgresProfessional
Moscow,
TheelephantonthecoverisafragmentofanillustrationfromEdwardTopsell’s
TheHistoryofFour-footedBeastsandSerpents,publishedinLondonin
PostgreSQL14Internals
byEgorRogov
TranslatedfromRussianbyLiudmilaMantrova
©PostgresProfessional,2022
Thisbookinisavailableatpostgrespro.com/community/books/internals
Contents at a Glance
AboutThisBook . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 15
1 Introduction . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 21
PartIIsolationandMVCC 41
2 Isolation . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 43
3 PagesandTuples . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 70
4 Snapshots . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 92
5 PagePruningandHOTUpdates . . . . . . . . . . . . . . . . . . . . . . . . 106
6 VacuumandAutovacuum . . . . . . . . . . . . . . . . . . . . . . . . . . . 118
7 Freezing . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 143
8 RebuildingTablesandIndexes . . . . . . . . . . . . . . . . . . . . . . . . 156
PartIIBufferCacheandWAL 167
9 BufferCache . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 169
10 Write-AheadLog . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 189
11 WALModes . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 209
PartIIILocks 225
12 Relation-LevelLocks . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 227
13 Row-LevelLocks . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 239
14 MiscellaneousLocks . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 263
15 LocksonMemoryStructures . . . . . . . . . . . . . . . . . . . . . . . . . 274
PartIVQueryExecution 283
16 QueryExecutionStages . . . . . . . . . . . . . . . . . . . . . . . . . . . . 285
17 Statistics . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 308
18 TableAccessMethods . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 333
19 IndexAccessMethods . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 354
20 IndexScans . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 373
21 NestedLoop . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 397
3
ContentsataGlance
22 Hashing . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 417
23 SortingandMerging . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 440
Index . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 464
4
Table of Contents
AboutThisBook 15
1 Introduction 21
1.1 DataOrganization . . . . . . . . . . . . . . . . . . . . . . . . . . . . 21
Databases . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 21
SystemCatalog . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 22
Schemas . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 23
Tablespaces . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 24
Relations . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 25
FilesandForks . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 26
Pages . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 30
TOAST . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 30
1.2 ProcessesandMemory . . . . . . . . . . . . . . . . . . . . . . . . . . 35
1.3 ClientsandtheClient-ServerProtocol . . . . . . . . . . . . . . . . . 37
Part I Isolation and MVCC 41
2 Isolation 43
2.1 Consistency . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 43
2.2 IsolationLevelsandAnomaliesDefinedbytheSQLStandard . . . . 45
LostUpdate . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 46
DirtyReadsandReadUncommitted . . . . . . . . . . . . . . . . . . 46
Non-RepeatableReadsandReadCommitted . . . . . . . . . . . . . 47
PhantomReadsandRepeatableRead. . . . . . . . . . . . . . . . . . 47
NoAnomaliesandSerializable . . . . . . . . . . . . . . . . . . . . . 48
WhyTheseAnomalies? . . . . . . . . . . . . . . . . . . . . . . . . . 48
2.3 IsolationLevelsinPostgreSQL . . . . . . . . . . . . . . . . . . . . . 49
ReadCommitted . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 50
RepeatableRead . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 59
Serializable . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 65
2.4 WhichIsolationLeveltoUse? . . . . . . . . . . . . . . . . . . . . . . 68
5
TableofContents
3 PagesandTuples 70
3.1 PageStructure . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 70
PageHeader . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 70
SpecialSpace . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 71
Tuples . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 71
ItemPointers . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 72
FreeSpace. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 73
3.2 RowVersionLayout . . . . . . . . . . . . . . . . . . . . . . . . . . . 73
3.3 OperationsonTuples . . . . . . . . . . . . . . . . . . . . . . . . . . 75
Insert . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 76
Commit . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 79
Delete . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 81
Abort . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 82
Update. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 83
3.4 Indexes . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 84
3.5 TOAST . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 85
3.6 VirtualTransactions . . . . . . . . . . . . . . . . . . . . . . . . . . . 85
3.7 Subtransactions . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 86
Savepoints . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 86
ErrorsandAtomicity . . . . . . . . . . . . . . . . . . . . . . . . . . . 89
4 Snapshots 92
4.1 WhatisaSnapshot? . . . . . . . . . . . . . . . . . . . . . . . . . . . 92
4.2 RowVersionVisibility . . . . . . . . . . . . . . . . . . . . . . . . . . 93
4.3 SnapshotStructure . . . . . . . . . . . . . . . . . . . . . . . . . . . . 94
4.4 VisibilityofTransactions’OwnChanges . . . . . . . . . . . . . . . . 98
4.5 TransactionHorizon . . . . . . . . . . . . . . . . . . . . . . . . . . . 100
4.6 SystemCatalogSnapshots . . . . . . . . . . . . . . . . . . . . . . . . 103
4.7 ExportingSnapshots . . . . . . . . . . . . . . . . . . . . . . . . . . . 104
5 PagePruningandHOTUpdates 106
5.1 PagePruning . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 106
5.2 HOTUpdates . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 110
5.3 PagePruningforHOTUpdates . . . . . . . . . . . . . . . . . . . . . 113
5.4 HOTChainSplits . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 115
5.5 PagePruningforIndexes . . . . . . . . . . . . . . . . . . . . . . . . 116
6
TableofContents
6 VacuumandAutovacuum 118
6.1 Vacuum . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 118
6.2 DatabaseHorizonRevisited . . . . . . . . . . . . . . . . . . . . . . . 121
6.3 VacuumPhases . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 124
HeapScan . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 124
IndexVacuuming . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 124
HeapVacuuming . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 125
HeapTruncation . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 126
6.4 Analysis . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 126
6.5 AutomaticVacuumandAnalysis . . . . . . . . . . . . . . . . . . . . 127
AbouttheAutovacuumMechanism. . . . . . . . . . . . . . . . . . . 127
WhichTablesNeedtobeVacuumed? . . . . . . . . . . . . . . . . . . 129
WhichTablesNeedtoBeAnalyzed? . . . . . . . . . . . . . . . . . . 131
AutovacuuminAction . . . . . . . . . . . . . . . . . . . . . . . . . . 132
6.6 ManagingtheLoad . . . . . . . . . . . . . . . . . . . . . . . . . . . . 136
VacuumThrottling . . . . . . . . . . . . . . . . . . . . . . . . . . . . 136
AutovacuumThrottling . . . . . . . . . . . . . . . . . . . . . . . . . 137
6.7 Monitoring . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 138
MonitoringVacuum . . . . . . . . . . . . . . . . . . . . . . . . . . . 138
MonitoringAutovacuum . . . . . . . . . . . . . . . . . . . . . . . . . 141
7 Freezing 143
7.1 TransactionIDWraparound . . . . . . . . . . . . . . . . . . . . . . . 143
7.2 TupleFreezingandVisibilityRules . . . . . . . . . . . . . . . . . . . 144
7.3 ManagingFreezing . . . . . . . . . . . . . . . . . . . . . . . . . . . . 147
MinimalFreezingAge . . . . . . . . . . . . . . . . . . . . . . . . . . 148
AgeforAggressiveFreezing . . . . . . . . . . . . . . . . . . . . . . . 149
AgeforForcedAutovacuum . . . . . . . . . . . . . . . . . . . . . . . 151
AgeforFailsafeFreezing . . . . . . . . . . . . . . . . . . . . . . . . . 153
7.4 ManualFreezing . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 153
FreezingbyVacuum . . . . . . . . . . . . . . . . . . . . . . . . . . . 154
FreezingDataattheInitialLoading . . . . . . . . . . . . . . . . . . 154
8 RebuildingTablesandIndexes 156
8.1 FullVacuuming . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 156
WhyisRoutineVacuumingnotEnough? . . . . . . . . . . . . . . . . 156
EstimatingDataDensity . . . . . . . . . . . . . . . . . . . . . . . . . 157
7
TableofContents
Freezing . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 160
8.2 OtherRebuildingMethods. . . . . . . . . . . . . . . . . . . . . . . . 162
AlternativestoFullVacuuming . . . . . . . . . . . . . . . . . . . . . 162
ReducingDowntimeduringRebuilding. . . . . . . . . . . . . . . . . 162
8.3 PreventiveMeasures . . . . . . . . . . . . . . . . . . . . . . . . . . . 163
Read-OnlyQueries . . . . . . . . . . . . . . . . . . . . . . . . . . . . 163
DataUpdates . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 164
Part II Buffer Cache andWAL 167
9 BufferCache 169
9.1 Caching . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 169
9.2 BufferCacheDesign . . . . . . . . . . . . . . . . . . . . . . . . . . . 170
9.3 CacheHits . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 172
9.4 CacheMisses . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 176
BufferSearchandEviction. . . . . . . . . . . . . . . . . . . . . . . . 177
9.5 BulkEviction . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 179
9.6 ChoosingtheBufferCacheSize . . . . . . . . . . . . . . . . . . . . . 182
9.7 CacheWarming . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 185
9.8 LocalCache . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 187
10 Write-AheadLog 189
10.1 Logging . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 189
10.2 WALStructure . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 190
LogicalStructure . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 190
PhysicalStructure . . . . . . . . . . . . . . . . . . . . . . . . . . . . 194
10.3 Checkpoint . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 195
10.4 Recovery . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 199
10.5 BackgroundWriting . . . . . . . . . . . . . . . . . . . . . . . . . . . 202
10.6 WALSetup . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 203
ConfiguringCheckpoints . . . . . . . . . . . . . . . . . . . . . . . . 203
ConfiguringBackgroundWriting . . . . . . . . . . . . . . . . . . . . 206
Monitoring . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 206
11 WALModes 209
11.1 Performance . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 209
8
TableofContents
11.2 FaultTolerance . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 213
Caching . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 213
DataCorruption . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 215
Non-AtomicWrites . . . . . . . . . . . . . . . . . . . . . . . . . . . . 217
11.3 WALLevels . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 219
Minimal . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 220
Replica . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 222
Logical. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 224
Part III Locks 225
12 Relation-LevelLocks 227
12.1 AboutLocks . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 227
12.2 HeavyweightLocks . . . . . . . . . . . . . . . . . . . . . . . . . . . . 229
12.3 LocksonTransactionIDs . . . . . . . . . . . . . . . . . . . . . . . . 231
12.4 Relation-LevelLocks . . . . . . . . . . . . . . . . . . . . . . . . . . . 232
12.5 WaitQueue . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 235
13 Row-LevelLocks 239
13.1 LockDesign . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 239
13.2 Row-LevelLockingModes . . . . . . . . . . . . . . . . . . . . . . . . 240
ExclusiveModes . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 240
SharedModes . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 242
13.3 Multitransactions . . . . . . . . . . . . . . . . . . . . . . . . . . . . 243
13.4 WaitQueue . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 245
ExclusiveModes . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 245
SharedModes . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 251
13.5 No-WaitLocks . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 254
13.6 Deadlocks . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 256
DeadlocksbyRowUpdates . . . . . . . . . . . . . . . . . . . . . . . 258
DeadlocksBetweenTwoUPDATEStatements . . . . . . . . . . . . . 259
14 MiscellaneousLocks 263
14.1 Non-ObjectLocks . . . . . . . . . . . . . . . . . . . . . . . . . . . . 263
14.2 RelationExtensionLocks . . . . . . . . . . . . . . . . . . . . . . . . 265
14.3 PageLocks . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 265
9
TableofContents
14.4 AdvisoryLocks . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 266
14.5 PredicateLocks . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 268
15 LocksonMemoryStructures 274
15.1 Spinlocks . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 274
15.2 LightweightLocks . . . . . . . . . . . . . . . . . . . . . . . . . . . . 275
15.3 Examples . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 275
BufferCache . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 275
WALBuffers . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 277
15.4 MonitoringWaits . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 278
15.5 Sampling . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 280
Part IV QueryExecution 283
16 QueryExecutionStages 285
16.1 DemoDatabase . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 285
16.2 SimpleQueryProtocol . . . . . . . . . . . . . . . . . . . . . . . . . . 288
Parsing . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 288
Transformation . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 289
Planning . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 292
Execution . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 300
16.3 ExtendedQueryProtocol . . . . . . . . . . . . . . . . . . . . . . . . 302
Preparation . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 302
ParameterBinding . . . . . . . . . . . . . . . . . . . . . . . . . . . . 303
PlanningandExecution . . . . . . . . . . . . . . . . . . . . . . . . . 304
GettingtheResults . . . . . . . . . . . . . . . . . . . . . . . . . . . . 306
17 Statistics 308
17.1 BasicStatistics . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 308
17.2 NULLValues . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 312
17.3 DistinctValues . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 313
17.4 MostCommonValues . . . . . . . . . . . . . . . . . . . . . . . . . . 315
17.5 Histogram . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 318
17.6 StatisticsforNon-ScalarDataTypes . . . . . . . . . . . . . . . . . . 322
17.7 AverageFieldWidth . . . . . . . . . . . . . . . . . . . . . . . . . . . 323
17.8 Correlation . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 323
10
TableofContents
17.9 ExpressionStatistics . . . . . . . . . . . . . . . . . . . . . . . . . . . 324
ExtendedExpressionStatistics . . . . . . . . . . . . . . . . . . . . . 325
StatisticsforExpressionIndexes . . . . . . . . . . . . . . . . . . . . 326
17.10 MultivariateStatistics . . . . . . . . . . . . . . . . . . . . . . . . . . 327
FunctionalDependenciesBetweenColumns . . . . . . . . . . . . . . 327
MultivariateNumberofDistinctValues . . . . . . . . . . . . . . . . 329
MultivariateMCVLists. . . . . . . . . . . . . . . . . . . . . . . . . . 331
18 TableAccessMethods 333
18.1 PluggableStorageEngines. . . . . . . . . . . . . . . . . . . . . . . . 333
18.2 SequentialScans . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 335
CostEstimation. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 336
18.3 ParallelPlans . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 340
18.4 ParallelSequentialScans . . . . . . . . . . . . . . . . . . . . . . . . 341
CostEstimation. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 341
18.5 ParallelExecutionLimitations . . . . . . . . . . . . . . . . . . . . . 345
NumberofBackgroundWorkers . . . . . . . . . . . . . . . . . . . . 345
Non-ParallelizableQueries . . . . . . . . . . . . . . . . . . . . . . . 348
ParallelRestrictedQueries . . . . . . . . . . . . . . . . . . . . . . . 350
19 IndexAccessMethods 354
19.1 IndexesandExtensibility . . . . . . . . . . . . . . . . . . . . . . . . 354
19.2 OperatorClassesandFamilies . . . . . . . . . . . . . . . . . . . . . 357
OperatorClasses . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 357
OperatorFamily . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 362
19.3 IndexingEngineInterface . . . . . . . . . . . . . . . . . . . . . . . . 364
AccessMethodProperties . . . . . . . . . . . . . . . . . . . . . . . . 365
IndexProperties . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 369
ColumnProperties . . . . . . . . . . . . . . . . . . . . . . . . . . . . 370
20 IndexScans 373
20.1 RegularIndexScans . . . . . . . . . . . . . . . . . . . . . . . . . . . 373
CostEstimation. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 374
GoodScenario: HighCorrelation . . . . . . . . . . . . . . . . . . . . 375
BadScenario: LowCorrelation . . . . . . . . . . . . . . . . . . . . . 378
20.2 Index-OnlyScans . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 381
IndexeswiththeIncludeClause . . . . . . . . . . . . . . . . . . . . 384
11
TableofContents
20.3 BitmapScans . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 385
BitmapAccuracy . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 387
OperationsonBitmaps . . . . . . . . . . . . . . . . . . . . . . . . . 388
CostEstimation. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 389
20.4 ParallelIndexScans . . . . . . . . . . . . . . . . . . . . . . . . . . . 393
20.5 ComparisonofVariousAccessMethods . . . . . . . . . . . . . . . . 395
21 NestedLoop 397
21.1 JoinTypesandMethods . . . . . . . . . . . . . . . . . . . . . . . . . 397