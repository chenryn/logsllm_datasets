---
## Page 22
目录
连接MySQL
2
如何连接在一起
开始构建应用之前最好先了解各部分如何连接在一起。你已经创建了你的
第一个PHP脚本，而且这个PHP脚本表现还不错。不过通过邮件来得到表单结果
还不够好。你需要一种方法来存储表单的结果，从而只要需要就能一直保存，并
在希望得到数据时能够获取。MySQL数据库可以存储你的数据，实现安全的维
护。不过需要先把PHP脚本与MySQL数据库连接起来才能达到目的。
Owen的PHP表单表现很好。好得有些过分了..…
60
MySQL擅长存储数据
61
Owen需要一个MySQL数据库
62
创建MySQL数据库和表
64
INSERT语句的实际使用
67
使用SELECT得到表数据
70
让PHP处理烦琐的SQL事务
73
PHP支持数据驱动Owen的Web表单
74
从PHP连接数据库
76
用PHP脚本插入数据
77
使用PHP函数与数据库通信
78
用mysqli_connectO建立连接
80
在PHP中建立INSERT查询
85
利用PHP查询MySQL数据库
86
用mysqli_close0关闭连接
87
新的报告总单很不错，不比现在我位
S_POST提供表单数据
到的m太多了
91
没有足够的精力保证
监到邮停就全部点
Owen需要帮助来筛选他的数据
96
%处理
Owen开始寻找Fang
98
xi
---
## Page 23
目录
创建与填充数据库
创建你自己的数据
你并不一定拥有你需要的数据。在真正使用数据之前首先需要创建数据。
有时需要创建数据库表来保存那些数据。另外有时必须创建数据库来保存需
要在使用之前先行创建的数据。是不是有些糊涂了？读过这一章你就会完全
明白。准备好，我们来学习如何创建你自己的数据库和数据库表。如果你还
嫌不够尽兴，实际上在这个过程中你还将构建你的第一个PHP和MySQL应
用。
猫王商店开业
104
Elmer需要一个应用
105
Elmer应用设计图示
106
一切从数据库表开始
109
联系MySQL服务器
110
为Elmer的邮件列表创建一个数据库
III
在数据库中创建一个表
112
需要定义数据
113
llingRet:
认识一些MySQL数据类型
114
利用查询创建数据库表
117
使用数据库之前先执行USE命令
120
DESCRIBE展示表的结构
123
Elmer已经做好准备存储数据
125
工业
创建Add email脚本
126
Elmer应用的另一半
133
Sendcmail脚本剖析
134
首先要获取数据
135
mysqli_fetch_arrayO获取查询结果
136
WHILE循环
139
用WHILE循环处理数据
140
你确实收到了邮件...来自Elmer!
145
有时人们想退出
146
用DELETE删除数据
147
利用WHERE删除特定数据
148
将意外删除的风险减至最小
149
xii
MakeMeElvis.com是一个Web应用
154
---
## Page 24
目录
现实的实际应用
你的Web应用
有时必须现实一点，需要重新考虑你的规划。
或者开始规划时就更谨慎一
些。应用发布到Web上时，你可能会发现原先的规划还不够周全。你原本认为可
以做到的事情在真实世界中并不那么顺利。这一章会分析将应用从测试网站转为
真实网站时可能遇到的一些实际问题。在这个过程中，我们还会展示一些更重要
的PHP和SQL代码。
MeMhs-AddEinel
Elmer的一些客户非常不满
160
MaKEMEELViS.COM
防范Elmer的自我破坏
163
需要好的表单数据
Fntseee vi1
164
ret
Sendemail验证的底层逻辑
165
代码可以利用IF做出判断
166
测试真实性
167
IF不仅仅检查相等性
168
Sendemai验证的基本逻辑
171
验证变量的PHP函数
172
MaKEMEELViS.COM
用AND和OR测试多个条件
179
wyon
表单用户需要反馈
183
根据需要轻松进出PHP
193
使用一个标志避免重复代码
194
Sose
只编写一次HTML表单代码
195
引用自身的表单
199
将表单动作指向脚本
200
查看表单是否已经提交
202
AOn
Mae Me Cvis-Remoe Enal
MakEMEELViS.COM
有些用户还在抱怨
206
表行应当能够唯一标识
主键保证唯一性
210
从复选框到客户ID
215
利用foreach循环处理数组
216
xili
---
## Page 25
目录
使用存储在文件中的数据
如果数据库还不够
不要完全相信关于数据库的.夸张宣传，有些宣传确实过于夸大
了。不错，数据库对于存储各种文本数据可谓能力非凡，不过二进制数据
呢？你知道的，就像JPEG图像和PDF文档之类的数据。把你的珍藏吉他的所
有图片都存储在一个数据库表中有意义吗？往往并没有多大意义。这种数据
通常存储在文件中，而且我们也仍用文件来存储。不过你完全可以另辟径，
这一章将展示可以结合使用文件和数据库来构建包含大量二进制数据的PHP
应用。
虚拟吉他手喜欢竞争
224
证据就在图片里
225
应用需要存储图像
226
规划GuitarWars中的图像文件上传
231
高分数据库必须用ALTER修改
232
如何从用户得到图像？
236
向数据库中插入图像文件名
238
得出上传文件的文件名
239
上传的文件去哪里了？
244
为上传的图像文件创建一个家
248
共享数据必须共享
254
共享脚本数据是必要的
255
把require_once认为是“插入”
256
顺序是高分的关键
258
最佳吉他手的荣耀
261
Gsitar Wars -High Sco
用HTML和CSS格式化最高分
262
TopS
ore:389740
只允许小图像
267
Guitar
文件验证使应用更为健壮
268
规划管理页面
272
在Admin页面上生成删除分数链接
275
Guitar
脚本可以相互通信
276
关于GET和POST
278
GET、POST和高分的删除
280
抽出高分来完成删除
283
用LIMIT控制删除数量
A!X
284
---
## Page 26
目录
保证应用安全
假想他们都在搜寻你
听爸爸妈妈的话没有错，不要跟陌生人说话。或者至少不要轻信他们。最
起码的，不要把应用数据的钥匙给他们，以为他们不会做坏事。这是一个残酷的
世界，你不能过分相信任何一个人。实际上，作为一个Web应用开发人员，你必
须持半怀疑半合作的态度。不过，人往往都有坏心眼，他们肯定都在想方设法算
计你！不错，也许这有点偏激，不过重视安全性确实非常重要，要适当地设计应
用，使它得到充分保护免受可能有危害的人进行破坏。
音乐完结之日
296
那些高分都去哪里了？
297
保护广大用户
299
保护GuitarWarsAdmin页面
300
Guitar Wars - High Scores Administration
HTTP认证需要首部
302
首部访谈
Jacob Scorchersoe
304
Jean Paul Janes
Belna Chry
2008 05-01 20:34:23 240260 3c0es
2008-05-01 20:36.97 282470 B0r00r2
利用PHP控制首部
Phiz Lairtoe
305
Pace Jastariss
 o91  100900
2008-05.01 30:37:40 186580 B22
利用首部认证
2008-05-01 29:37.62 96430 8619034
306
Krsny Lavta
NesiJotaesor
2008
创建一个Authorize脚本
314
GuitarWars第2幕：高分克隆攻击
318
Nawe
假增实减
319
安全性需要人类的干预
320
规划GuitarWars中的仲裁
321
用ALTER为批准项留出空间
322
未批准的分数没有价值
327
百万分攻击
330
一切都经过仲裁
331
她到底做了什么？
333
用注释欺骗MySQL
334
AddScore表单遭到了SQL注人攻击
335
保护数据避免SQL注人
336
一个更安全的INSERT（利用参数）
337
表单验证再聪明也不为过
339
停战！
341
xV
---
## Page 27
目录
构建个性化Web应用
还记得我吗？
任何人都不喜欢被遗忘，特别是Web应用的用户。如果应用提供某种
“会员资格”，这表示用户可以采用一种个性化方式与应用交互，相应地应用
需要记住这个用户。你肯定不愿意每次走进家门时都必须重新向家人介绍你
自己，而且也根本不需要这么做，因为你的家人有一个很好的本领，这就是
记忆。不过Web应用并不会自动地记住用户，要由高水平的Web开发人员使
用他们喜欢的工具（可能是PHP和MySQL）来构建能真正记住用户的个性化
Web应用。
他们说的是“对立产生吸引”
346
Mismatch的关键就是个人数据
347
Mismatch需要用户登录
348
000
准备数据库完成登录
351
构建登录用户界面
353
用SHAO加密口令
354
比较口令
355
利用HTTP对用户授权
358
利用HTTP认证完成用户登录
361
注册新用户的表单
365
cookie里有什么？
375
G）
用PHP使用cookie
376
重新考虑登录流程
379
支持cookie的登录
380
Miamtch - Edis Profle
注销意味着删除cookie
会话不依赖于客户
389
跟踪会话数据
391
Gesder
ch - Vlew Profil
Birtbdate
1541-
利用会话改造Mismatch
392
SENGr:
irt
使用会话完成注销
393
Ceoderi
1981-11-0)