User: 请解答这个和日志有关的问题Exchange 2013 attachments too big? I am having the toughest time sending large attachments, everywhere I have checked my file size limit for send/receive is 100mb but yet users are unable to receive files even at the size of 14mb.

I'm using a spam filter (Appriver) and have worked with there support for a very long time, we see the following errors in logs

13:32:40.260 4 SMTP-000036([myserverIP]) rsp: 354 Start mail input; end with &lt;CRLF&gt;.&lt;CRLF&gt;
13:33:41.038 3 SMTP-000033([myserverIP]) write failed. Error Code=connection reset by peer
13:33:41.038 3 SMTP-000033([myserverIP]) [659500] failed to send. Error Code=connection reset by peer
13:33:41.038 4 SMTP([myserverIP]) [659500] batch reenqueued into tail


Windows firewall is disabled on the exchange server, all other emails that are of smaller value come through just fine.

Here is a print out of size limits:

ConnectorType   ConnectorName                    MaxReceiveMessageSize      MaxSendMessageSize
-------------   -------------                    ---------------------      ------------------
Send            InternetSendConnector            -                          35 MB (36,700,160 bytes)
Send            Appriver-Smarthost               -                          35 MB (36,700,160 bytes)
Receive         Default EXCHSRVR                 100 MB (104,857,600 bytes) -
Receive         Client Proxy EXCHSRVR            100 MB (104,857,600 bytes) -
Receive         Default Frontend EXCHSRVR        100 MB (104,857,600 bytes) -
Receive         Outbound Proxy Frontend EXCHSRVR 100 MB (104,857,600 bytes) -
Receive         Client Frontend EXCHSRVR         100 MB (104,857,600 bytes) -
Receive         ExchangeRelay                    100 MB (104,857,600 bytes) -
TransportConfig -                                100 MB (104,857,600 bytes) 10 MB (10,485,760 bytes)
ADSiteLink      DEFAULTIPSITELINK                Unlimited                  Unlimited


There is a no anti-virus on the server either that could be interfering, I am out of ideas at this point :(

EDIT 1

After running BPA, it gives and error:

Exchange Organization: Check whether the incoming message(CN=MyDomain,CN=Microsoft Exchange,CN=Services,CN=Configuration,DC=WG,DC=local) size isn't set
The maximum incoming message size isn't set in organization 'CN=MyDomain,CN=Microsoft Exchange,CN=Services,CN=Configuration,DC=WG,DC=local'. This can cause reliability problems.


Here are the sizes as of now:

[PS] C:\Temp&gt;Get-TransportConfig | ft MaxSendSize, MaxReceiveSize

MaxSendSize                                                 MaxReceiveSize
-----------                                                 --------------
Unlimited                                                   Unlimited


[PS] C:\Temp&gt;Get-ReceiveConnector | ft name, MaxMessageSize

Name                                                        MaxMessageSize
----                                                        --------------
Default EXCHSRVR                                            100 MB (104,857,600 bytes)
Client Proxy EXCHSRVR                                       100 MB (104,857,600 bytes)
Default Frontend EXCHSRVR                                   100 MB (104,857,600 bytes)
Outbound Proxy Frontend EXCHSRVR                            100 MB (104,857,600 bytes)
Client Frontend EXCHSRVR                                    100 MB (104,857,600 bytes)
ExchangeRelay                                               100 MB (104,857,600 bytes)


Again, smaller emails come through just fine. Seems like there is a 10mb receive limit somewhere that I cannot find.

Assistant: Have you also liftet the organizational limits?

See this for reference:


  Maximum size for messages received
  Cmdlet: Set-TransportConfig
  
  Parameter: MaxReceiveSize   Mail flow > Receive connectors > More
  options More Options Icon > Organization transport settings > Limits
  tab > Maximum receive message size


Also, "connection reset by peer" points more to a networking problem than a size-limit-problem.