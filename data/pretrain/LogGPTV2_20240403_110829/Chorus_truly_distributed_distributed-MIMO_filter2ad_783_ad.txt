will be zero, since the oscillators are locked with each other.
Any error in synchronization will manifest as a non-zero phase
difference. The ﬁgure shows that the variance in the phase
difference stays below 0
0022 radians even as the number of
transmitters in layer 1 increases from 1 to 10. The low phase
variance shows that Chorus operates properly without a unique
leader, and can maintain good synchronization even when many
small cells contribute to the synchronization signal.
.
3Note that all nodes in layer 1 are transmitting synchronization signals.
469
SIGCOMM ’18, August 20–25, 2018, Budapest, Hungary
E. Hamed et al.
0.005
0.004
0.003
0.002
0.001
e
c
n
a
i
r
a
V
e
s
s
a
h
P
0
Phase Variance
Median Phase Variance
1
2
3
4
5
6
7
8
9
10
Number of Transmitters
(a) Phase variance
)
B
d
(
R
N
I
1
0.8
0.6
0.4
0.2
0
1
2
3
4
5
6
7
8
9
10
Number of Transmitters
(b) Interference-to-Noise Ratio (INR)
Figure 4—Performance at an auxiliary node as a function of number of joint transmitters in an intermediate synchronization layer. (a) plots the phase
variance observed at an auxiliary node as a function of the number of simultaneous transmitters in a layer. The ﬁgure shows that the phase variance observed at an
auxiliary node remains constant and low even as the number of transmitters in the intermediate synchronization layer increases. (b) shows the impact of this phase
variance on interference, by estimating the Interference to Noise Ratio (INR). The graph shows that the INR stays less than 0.5 dB for up to 10 simultaneous
transmitters. This demonstrates that Chorus’s strategy of having all nodes in the system transmit the synchronization signal provides robust synchronization.
0.01
e
c
n
a
i
r
a
V
e
s
a
h
P
0.008
0.006
0.004
0.002
0
0
Phase Variance
Median Phase Variance
5
10
15
20
Synchronization SNR (dB)
25
30
(a) Phase variance
)
B
d
(
R
N
I
3
2.5
2
1.5
1
0.5
0
0
5
10
15
20
25
30
Synchronization SNR(dB)
(b) Interference-to-Noise Ratio (INR)
Figure 5—Performance at an auxiliary node as a function of synchronization SNR. (a) plots the variance in phase between the signals received from two
small cells at an auxiliary node and (b) shows the median Interference to Noise Ratio (INR) for various synchronization SNRs. The ﬁgure shows that Chorus can
achieve median INR less than 1 dB even for synchronization SNRs as low as 6 dB. This determines the minimum SNR of the synchronization link used by
Chorus’s layering algorithm.
To understand the implication of phase variance, let us rea-
son about its impact on interference. Say that the distributed
MIMO is trying to eliminate interference by nulling the trans-
mitted signals at a particular receiver. If the transmitters are
perfectly phase coherent, then they can compensate for the
channels between them to the receiver perfectly, and align the
signals to eliminate interference. Any phase variance will trans-
late into phase noise and manifest itself as a misalignment of
the signals, i.e., interference. We can use our measurements
from above to compute the residual interference when the two
transmitters apply nulling at the auxiliary node. Fig. 4(b) plots
these results. Note the similarity in shape between the INR plot
and the phase variance plot. This is because of the approxi-
mately linear relationship between them at low INR. The ﬁgure
shows that the residual interference to noise ratio is 0.5 dB,
which is small and comparable to previous systems. This shows
that despite the fact that Chorus has no leaders and multiple
nodes transmitting the synchronization signal concurrently, it
can achieve high performance comparable to past systems that
relied on a single leader.
11.2 Resilience to Varying Synchronization
Link Quality
It is important to understand Chorus’s performance as a func-
tion of the synchronization link SNR for two reasons. First,
recall that Chorus nodes join the lowest numbered layer with
adequately strong synchronization signal. Hence, we want to
calibrate the performance of the controller across SNRs to de-
termine this value. Second, a key objective of Chorus is to be
able to work robustly across a range of synchronization SNRs
to ensure resilience to variations in link quality.
For this experiment, we again deploy the nodes as before
such that the layering algorithm divides the network into three
layers, layer 0, layer 1, and layer 2. We pick two small cell
nodes, both in layer 2, synchronizing to a node in layer 1. Our
objective is to investigate whether the two small cell nodes
470
Chorus: Truly Distributed Distributed-MIMO
SIGCOMM ’18, August 20–25, 2018, Budapest, Hungary
have accurately synchronized their oscillators. To do that, we
repeat the same measurement procedure as in §11.1, where
the two small cells interleave their data transmissions, and an
auxiliary mode measures the phase difference between the two
small cells.
We repeat this process and characterize the phase synchro-
nization accuracy across different SNRs and locations in our
testbed.
Results. Fig. 5(a) plots the variance in phase difference be-
tween the two small cells measured across a 1 sec time interval,
as a function of the minimum SNR of the synchronization links,
i.e., the links from the layer 1 node to the two small cells. The
ﬁgure shows that even when the synchronization link SNR is
as low as 6 dB, the median phase variance stays lower than
0.0045.
As before, we again examine the impact of this phase vari-
ance on interference, by measuring the residual interference,
i.e., INR. We plot the INR as a function of the minimum SNR
of the synchronization links in Fig. 5(b). Again, we notice that
the median INR is very small, less than 1 dB for synchroniza-
tion SNR larger than 6 dB.
Figs. 5(a) and (b) show that by picking the minimum syn-
chronization link SNR to be 6 dB, Chorus can ensure that the
maximum interference is less than 1 dB.
11.3 Synchronizing Nodes that Cannot Hear
Each Other
Chorus’s architecture allows it to synchronize nodes that are
not within listening range of each other by cascading the syn-
chronization signal across layers. In this section, we evaluate
the performance of such cascading.
For this experiment, we deploy our nodes such that the
layering algorithm divides the network into four layers, layers
0 through 3. We then pick three nodes, one each in layers 1,
2 and 3, from our testbed. By the deﬁnition of our layering
algorithm, nodes in layer 3 cannot hear nodes in layer 1. For
each run, we pick one node in layer 1, and one node in layer
3, and synchronize via a node in layer 2, as described in §5.
Our objective is to investigate whether the nodes in layer 1
and layer 3 have accurately synchronized their oscillators. We
therefore repeat the same measurement as in §11.2, but with
the small cells in two different layers.
Results. Fig. 6 plots the variance in phase difference between
the two small cells measured across a 1 sec time interval, as
a function of the minimum SNR of the synchronization links,
i.e., the links between the layer 2 node to the two small cells.
The ﬁgure shows that the quality of synchronization stays high
even as the SNR of the synchronization signal drops.
0.02
0.015
0.01
0.005
e
c
n
a
i
r
a
V
e
s
a
h
P
0
0
Phase Variance
Median Phase Variance
5
10
15
20
25
30
Synchronization SNR (dB)
Figure 6—Phase variance between small cells that cannot hear each other
and are synchronized through an intermediate node, as a function of syn-
chronization SNR. The ﬁgure shows that Chorus can achieve high level of
synchronization even when the nodes cannot hear each other.
1 
2 
3 
4 
5 
6 
7 
8 
9 
10 
24 
15 
14 
24 
21 
10 
15 
21 
12 
10 
12 
17 
17 
17 
17 
12 
7 
12 
20 
19 
20 
11 
7 
19 
11 
13 
1 
2 
3 
4 
5 
6 
7 
8 
9 
10 
14 
13 
Figure 7—Pairwise link strength between small cells. The ﬁgure shows the
pairwise SNR in dB between small cells in our deployment, with links with
SNR less than the synchronization SNR threshold (6 dB) grayed out. No single
small cell can be heard by all other small cells.
11.4 Comparison with Leader-Based
Distributed MIMO
In this section, we empirically compare Chorus’s fully dis-
tributed protocol with MegaMIMO, a leader-based distributed
MIMO system. MegaMIMO is designed for Wi-Fi networks
but can be extended to small cells. The data plane does not
need to change since both Wi-Fi and LTE operate over OFDM.
For the control plane, MegaMIMO makes the leader node trans-