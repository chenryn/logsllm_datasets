新智能  9年双11：互联网技术超级工程
如图，左边是输入流，我们为每一条数据产生Dynamic-Table，再将Table的
变化用Changelog发送出去。这样两次变化后，输入流和输出流中的数据始终保持
一致，这就证明了引入Dynamic-Table并没有丢失语义和数据。
有了动态表的概念，我们就可以应用传统SQL作用于流上。值得一提的是，
Dynamic-Table是虚拟的存在着，它并不需要实际的存储来落地。我们再来看一个
例子：
新智能  9年双11：互联网技术超级工程
例如Inner Join的实现原理如下：数据会从输入的两边任意一条流而来，一边数
据先来会被存在State中并按照Joining key查询另外一边的State，如果存在就会
输出结果，不存在则不输出，直到对面数据来了之后才产生结果。总之，两个流具有
两个state，一边的数据到达后存下来等待另外一边数据，全部到达后inner join产
生结果。除了两条流的join之外，我们还引入了流和外部表的join。我们的机器学习
平台会把大量的数据存储在HBase中，查询HBase中的数据的操作实际上是在连
接一个外部表。连接外部表往往存在两个模式：
Look up方式。流数据到达时即时地查询外部表，从而得到结果。
●
Snapshot方式。流数据到达时即时地发送snapshot的版本信息给外部存储
●
service从而查询数据，外部表存储根据版本信息返回结果。
值得一提的是，我们设计的这个流和外部表关联的这个功能没有引入任何新的语
法，是完全按照SQL-2011的标准实现的。同样的查询在批计算上也适用。
2) Retraction
撤回是流计算的一个重要概念，举一个例子作解释：计算词频
新智能  9年双11：互联网技术超级工程
值得一提的是什么时候需要撤回，什么时候不需要，完全由SQL的Query
Optimizer来判断，这个用户是完全不需要感知的，用户只需要通过SQL描述他的
业务计算逻辑就好了。如图所示，第一个场景不需要撤回而第二个需要，这完全是由
优化框架决定而非用户。这一点，大大体现了使用SQL，并利用SQL中所拥有的天
然优化框架的好处。
3) Window聚合
Window聚合是Flink SQL的一个重要能力。图中的这个例子我们对每一个小
时的数据做聚合统计。除了这种Tumble window我们还支持了Sliding Window和
新智能  9年双11：互联网技术超级工程
阿里巴巴实时计算应用
基于流计算SQL之上我们开发了两个计算平台。
1.阿里云流计算平台
一个是阿里云流计算平台（streamCompute），该平台允许用户编写SQL，并
在平台内部调试debug。调试正确后，用户可以通过这个平台直接将作业发布在阿
里云集群上部署，部署完成后后检测运维上线的。因此这个平台整合了所有实时计算
的需求，集开发、Debug、上线部署、运维于一体，大大加速了用户开发和上线的效
率。值得一提的是，2017年双11期间阿里集团绝大多数的实时计算Job均通过这
个平台发布。我们今年9月开始，通过阿里云，包括公共云、专有云也将这个平台开
放给外部企业，让他们能够使用到阿里巴巴实时计算的能力。
新智能  9年双11：互联网技术超级工程
双11实时计算总结
上图是阿里巴巴实时计算架构，底层是数千规模的物理机，之上是统一部署的
Resource Management和Storage，然后是Blink Runtime和Flink SQL，用户
通过StreamCompute和Porsche平台提交Job，现在已经在阿里内部支持了数百
个工程师近千个Flink SQL Job。上述就是阿里巴巴实时计算的现状。
在实时计算的助力下，双11拿到1682亿的辉煌战果，实时计算的贡献主要体
现在以下几点：
1. 本次双11是互联网历史最大规模的并发，每秒几十万的交易和支付的实时聚
合统计操作全部是是由Blink计算带来的
2. 3分01秒100亿数据的展现不仅需要高Data Base的高吞吐能力，还考验
着实时计算的速度
3. 算法平台帮助算法同学取得了很好的搜索和推荐效果，获得了整体GMV的
增长
总之，实时计算不仅满足了阿里巴巴内部多种多样的需求，还提升了GMV。我
们希望通过阿里云平台把Blink实时计算能力输出给阿里之外的所有企业，让他们能
从中获益。以上就是本次的分享。
新智能 < 41
阿里小蜜这一年：从点到面的变迁
海青
一、生态领域的思考与阿里小蜜平台
1.生态领域的思考
随着人工智能在全球领域的持续高涨，chatbot人机交互作为其中一个分支在智
能助理、智能服务、IOT等领域进了白热化竞争态势，从全球大公司到创业公司纷
纷加入战场并在一些独特的垂直领域开始精耕细作。在近两年的人机交互领域的发展
中，一方面在To C端面向各个入口领域的竞争更加激烈（例如：在IOT领域的智能
音箱)、垂直领域场景更加细分与丰富。另外一方面由To C市场的竞争开始转向To
B市场的竞争，Google、Microsoft、Facebook、Amazon、百度、网易以及众多
startups纷纷在To B领域通过IaaS、PaaS或者SaaS能力开始布局，并且基本
围绕着如下两个体系进行输出：
围绕着IM生态体系的绑定输出。例如：Facebook在Messager平台上的