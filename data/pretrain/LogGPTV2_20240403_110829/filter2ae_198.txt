## 前言
这次渗透的对象是一个校内的获奖提交申报平台。不知道什么原因，这个站点未接入深信服waf，所以这次渗透过程异常轻松。
## 0x01 越权
首先使用功能点添加一次申报
点击编辑，抓包
可以看到是使用`id`控制返回的数据的
服务端没有进行鉴权，修改`id`可返回其他用户的数据
其他接口也是一样
**越权修改**
**越权删除**
## 0x02 任意文件上传
还是在提交申报那里，添加文件，抓包
并没有返回文件路径，但返回了`id`，所以要配合刚才的越权接口使用
成功解析
## 0x03 任意文件下载
在刚才的`viewPage`接口返回的数据里，可以看到调用了名为`downloadFile`的js函数
我们看下源码
盲猜这里可以进行目录跨越，`fileName`就是文件名，`fileType`就是文件后缀，还不清楚后缀是不是白名单
先随便传个参看看
好家伙，太贴心了，没有任何限制还直接把当前目录都返回出来
构造一下
## 0x04 任意权限的用户添加
在翻看数据包的时候，发现接口的命名都非常有规律  
比如：
`addPage`就是刚才内联框架所使用的HTML文件，里面不仅包含了相关的接口，还包含了表单的字段名
并且接口名称`studentward`、`role`、`resource`、`counsellor`都是跟功能相关的英文，非常好猜
构造`administrator`、`organization`、`controller`等名称，或者拿本英汉大字典跑也行
最后Fuzz出来了`user`
/user/addPage 如下：
                        学工号
                        姓名
                        密码
                        性别
                        年龄
                        用户类型
                        部门
                        角色
                        电话
                        用户状态
可以看到你不会填的都给你提供相关接口查询，比如`userAddRoleIds`提供`/role/tree`接口
最后直接构造数据包
结束