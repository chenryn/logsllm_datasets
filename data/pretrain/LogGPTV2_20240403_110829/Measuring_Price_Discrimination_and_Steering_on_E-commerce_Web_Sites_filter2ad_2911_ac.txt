### 优化后的文本

#### 4.2 搜索结果的个性化
为了评估搜索结果的质量，我们使用归一化折损累积增益 (nDCG) 来衡量。具体来说，对于给定查询，我们可以计算 AMT 用户的结果的 DCG，并通过 R' 进行归一化。如果 nDCG(AMT 用户) > nDCG(对照组)，则说明 AMT 用户的搜索结果中更昂贵的产品排在页面顶部。

图 2 展示了每个网站在所有查询中的平均 Jaccard 指数、Kendall's τ 和 nDCG。结果显示了 AMT 用户搜索结果与对照组搜索结果 (Control) 的比较，以及 AMT 用户搜索结果与其他用户搜索结果 (User) 的比较。我们观察到几个有趣的趋势：

1. **Jaccard 指数**：Sears、Walmart 和 Priceline 对 AMT 用户的 Jaccard 指数低于对照组，这表明 AMT 用户接收到不同产品的频率高于对照组。而 Orbitz 网站的 Jaccard 指数为 0.85，这意味着尽管结果存在不一致性，但 AMT 用户看到的不一致性并不比对照组更高。

2. **Kendall's τ**：在 Newegg、Sears、Walmart 和 Priceline 上，AMT 用户的 Kendall's τ 至少比对照组低 0.1，即 AMT 用户接收到的结果排序明显不同。特别是在 Sears 上，AMT 用户的结果排序差异尤为显著。

3. **nDCG**：Sears 显示出对 AMT 用户的价格偏见。nDCG 结果表明，AMT 用户的搜索结果中较便宜的产品排在顶部，而对照组则相反。需要注意的是，这些结果仅用于揭示价格引导，我们在 § 4.3 中进一步探讨价格歧视问题。

除了 Priceline 外，其他四个旅行网站（Cheaptickets、Orbitz、Expedia 和 Hotels.com）在 AMT 用户和对照组之间没有显著差异。然而，这四个网站表现出显著的噪声：Kendall's τ 值均 ≤ 0.83。在 Cheaptickets 和 Orbitz 上，这种噪声是由于搜索结果顺序的随机性造成的；而在 Expedia 和 Hotels.com 上，这种噪声是由于系统性的 A/B 测试引起的。因此，我们无法从 AMT 实验中得出关于 Expedia 和 Hotels.com 个性化搜索结果的结论。

#### 4.3 价格歧视
接下来，我们探讨这些网站是否针对不同用户改变产品价格，即价格歧视。图 3 的下半部分展示了 AMT 用户与对照组之间产品价格不一致的比例。总体来看，大多数网站显示很少有不一致的情况（通常只有 0.5% 的产品显示价格不一致）。

图 4 展示了一个价格歧视的例子。控制组和对照组的搜索结果都返回了 $565 的酒店价格，而 AMT 用户则返回了 $633 的价格。我们的数据显示，AMT 用户总是比对照组支付更高的价格（平均而言），因此所有差额都是正数。许多网站上的价格差额相当大（高达数百美元）。

#### 4.4 用户级别的个性化
接下来，我们仔细研究那些在一个或多个电子商务网站上经历高度个性化搜索结果的 AMT 用户。我们的目标是调查这些 AMT 用户是否共享某些可观察的特征，以解释为什么他们收到个性化搜索结果。我们将高度个性化的用户定义为在超过 0.5% 的时间内看到价格不一致的用户。经过筛选后，我们发现每个网站上有 2-12% 的 AMT 用户属于这一类。

1. **地理位置**：我们将 AMT 用户的 IP 地址映射到地理位置，并比较个性化和非个性化用户的地点。我们没有发现地理位置与个性化之间的明显相关性。然而，在本实验中，所有搜索都通过波士顿的一个代理服务器进行，因此我们没有观察到由地理位置引起的效果。

2. **浏览器和操作系统**：我们通过代理服务器获取 AMT 用户的 HTTP 请求头来推断他们的平台选择。同样，我们没有发现浏览器/操作系统选择与高个性化之间的相关性。在 § 5 中，我们确实发现了移动浏览器使用与个性化有关的现象，但本次实验中没有 AMT 用户使用移动设备完成任务。

3. **跨站点个性化**：最后，我们探讨是否存在在多个电子商务网站上接收个性化结果的 AMT 用户。图 5 列出了我们实验中的 100 名用户，并用点标记了特定用户在特定网站上接收到个性化结果的情况。虽然有些点是随机分布的，但仍有许多 AMT 用户在多个电子商务网站上接收到个性化结果。我们在垂直条上突出显示了在多个网站上看到个性化结果的用户。这种情况在旅行网站上比在一般零售商上更为常见。

图 5 的主要结论是，我们观察到许多 AMT 用户在多个网站上接收到个性化结果，这表明这些用户共享某些特征，这些特征被多个网站用于个性化。遗憾的是，我们无法推断出触发个性化的具体用户特征。

#### 4.5 总结
总结本节的发现：我们在四个一般零售商和五个旅行网站上找到了价格引导和价格歧视的证据。总体而言，旅行网站在更多情况下显示出价格不一致，且 AMT 用户支付的价格比对照组高出数百美元。此外，我们观察到许多 AMT 用户在多个网站上经历了个性化搜索结果。

### 5. 个性化特征
在 § 4 中，我们展示了电子商务网站如何为真实用户个性化结果。然而，基于实际用户的数据，我们无法确定个性化的原因，因为每个 AMT 用户附带了太多混淆变量（如位置、浏览器选择、购买历史等）。

在本节中，我们通过创建虚假账户进行受控实验，以检查特定特征对电子商务个性化的影响。尽管我们无法测试所有可能的特征，但我们检查了五个可能的候选特征：浏览器、操作系统、账户登录、点击历史和购买历史。我们选择这些特征是因为过去观察到电子商务网站基于这些特征进行个性化 [1, 28]。

#### 5.1 实验概述
我们的合成用户实验旨在确定特定用户特征是否触发电子商务个性化。为了评估可以取值 x1, x2, ..., xn 的特征 X 的影响，我们执行 n + 1 个 PhantomJS 实例，每个实例分配一个 X 的值。第 n + 1 个实例作为对照组，复制另一个实例的值。所有 PhantomJS 实例每天在每个电子商务网站上执行 20 个查询（参见 § 3.4），查询间隔一分钟以避免触发安全措施。PhantomJS 下载每个查询的第一页结果。除非另有说明，PhantomJS 在实验之间保留所有 cookie。所有实验设计在 24 小时内完成。

为了减少测量误差（参见 § 3.1），我们采取了三个步骤（部分借鉴了之前的工作 [16, 17]）：首先，所有查询在同一时间执行，消除了因时间效应导致的结果差异。其次，我们使用静态 DNS 条目将所有查询流量定向到零售商的特定 IP 地址，消除了数据中心之间的差异。第三，尽管所有 PhantomJS 实例都在一台机器上执行，但我们使用 SSH 隧道将每个处理的流量转发到 /24 子网中的唯一 IP 地址。此过程确保任何 IP 地理定位效果对所有结果产生相同的影响。

#### 静态特征
表 3 列出了我们在实验中评估的五个特征。在 cookie 实验中，目标是确定电子商务网站是否会为已登录的用户提供个性化结果。因此，两个 PhantomJS 实例在不登录的情况下查询给定的电子商务网站，一个实例在查询前登录，最后一个账户在每次 HTTP 请求后清除 cookie。

在两组实验中，我们更改 PhantomJS 发送的 User-Agent 以模拟不同的操作系统和浏览器。这些测试的目标是查看电子商务网站是否根据用户选择的操作系统和浏览器进行个性化。在操作系统实验中，所有实例报告使用 Chrome 33，Windows 7 作为对照组。在浏览器实验中，Chrome 33 作为对照组，所有实例报告使用 Windows 7，除了 Safari 7（报告使用 OS X Mavericks）、iOS 6 上的 Safari 和 Android 4.4.2 上的 Chrome。

#### 历史特征
在历史实验中，我们的目标是检查电子商务网站是否根据用户的浏览和购买历史记录进行个性化。不幸的是，我们无法在一般零售网站上创建购买历史记录，因为这需要购买并退还实物商品。然而，我们可以在旅行网站上创建购买历史记录。在 Expedia、Hotels.com、Priceline 和 Travelocity 上，一些酒店房间提供“到店付款”预订，您可以在入住时付款。仍然需要将有效的信用卡与“到店付款”预订关联。类似地，所有五个旅行网站允许在无需预付款的情况下预订租车。这些无付款预订使我们能够在旅行网站上预订并建立购买历史记录。

为了进行历史实验，我们在四个酒店网站和所有五个租车网站上创建了六个账户。每个网站有两个账户作为对照组：它们不点击搜索结果或进行预订。每晚一周，我们手动登录剩余的四个账户并在每个网站上执行特定操作。两个账户搜索酒店/汽车并分别点击最高价和最低价的结果。其余两个账户搜索相同的酒店/汽车并分别预订最高价和最低价的结果。高价和低价预订使用不同的信用卡，且这些信用卡从未用于预订旅行。尽管可以想象其他处理方式（例如，总是前往特定国家的人），但价格受限（无弹性）和不受限（弹性）用户是检查账户历史影响的自然起点。此外，尽管这些处理方式可能不代表现实的用户行为，但它们确实提供了明确的信号，可以被个性化算法观察和响应。

我们预先选择了每个夜晚的目的地和旅行日期，因此点击和购买账户都使用相同的搜索参数。目的地涵盖了美国、欧洲和亚洲的主要城市，日期范围为 2014 年下半年的六个月。所有旅行均为一到两晚住宿/租车。平均而言，高价和低价购买者预订的房间分别为每晚 $329 和 $108，而高价和低价点击者选择的房间分别为每晚 $404 和 $99。四个租车账户能够点击并预订完全相同的车辆，平均高价和低价分别为每天 $184 和 $43。

每晚，在我们手动创建账户历史后，我们使用 PhantomJS 从所有九个旅行网站上的所有六个账户运行标准的 20 个查询列表。为了保持一致性，手动历史创建和自动化测试都使用相同的 IP 地址和 Firefox。

#### 伦理考虑
为了尽量减少我们的购买历史实验对旅行零售商、酒店和租车公司的负面影响，我们采取了几项预防措施。我们最多预订了任何一个特定酒店的一间房间。所有预订至少在未来一个月内进行，并且在实验结束时取消所有预订。

#### 结果分析
为了分析我们的特征实验数据，我们利用了 § 4 中使用的五种指标。图 6 展示了我们对每个电子商务网站上的每个用户特征进行的分析示例。在这个例子中，我们检查了 Cheaptickets 是否为已登录的用户提供个性化结果。每个子图的 x 轴是天数。顶部行的图表使用 Jaccard 指数、Kendall's τ 和 nDCG 分析引导，而底部行的图表使用价格不一致项目的百分比。