::: para
以​​​​​​​下​​​​​​​示​​​​​​​例​​​​​​​显​​​​​​​示​​​​​​​的​​​​​​​是​​​​​​​`错​​​​​​​误​​​​​​​`{.literal}对​​​​​​​象​​​​​​​。​​​​​​​
:::
``` screen
0 65536 error
```
:::
::: section
::: titlepage
## [⁠]{#device_mapper.html#zero-map}A.1.6. 零​​​​​​​映​​​​​​​射​​​​​​​对​​​​​​​象​​​​​​​ {.title}
:::
::: para
`零​​​​​​​`{.literal}映​​​​​​​射​​​​​​​对​​​​​​​象​​​​​​​是​​​​​​​与​​​​​​​ `/dev/zero`{.filename}
等​​​​​​​同​​​​​​​的​​​​​​​块​​​​​​​设​​​​​​​备​​​​​​​。​​​​​​​对​​​​​​​这​​​​​​​个​​​​​​​映​​​​​​​射​​​​​​​的​​​​​​​读​​​​​​​取​​​​​​​操​​​​​​​作​​​​​​​会​​​​​​​返​​​​​​​回​​​​​​​零​​​​​​​块​​​​​​​。​​​​​​​写​​​​​​​入​​​​​​​这​​​​​​​个​​​​​​​映​​​​​​​射​​​​​​​的​​​​​​​数​​​​​​​据​​​​​​​会​​​​​​​被​​​​​​​丢​​​​​​​弃​​​​​​​，但​​​​​​​写​​​​​​​入​​​​​​​操​​​​​​​作​​​​​​​会​​​​​​​成​​​​​​​功​​​​​​​。​​​​​​​`零​​​​​​​`{.literal}映​​​​​​​射​​​​​​​对​​​​​​​象​​​​​​​除​​​​​​​
*start* 和​​​​​​​ *length* 参​​​​​​​数​​​​​​​外​​​​​​​没​​​​​​​有​​​​​​​其​​​​​​​它​​​​​​​参​​​​​​​数​​​​​​​。​​​​​​​
:::
::: para
以​​​​​​​下​​​​​​​示​​​​​​​例​​​​​​​显​​​​​​​示​​​​​​​了​​​​​​​一​​​​​​​个​​​​​​​ 16Tb 设​​​​​​​备​​​​​​​的​​​​​​​`零​​​​​​​`{.literal}对​​​​​​​象​​​​​​​。​​​​​​​
:::
``` screen
0 65536 zero
```
:::
::: section
::: titlepage
## [⁠]{#device_mapper.html#multipath-map}A.1.7. 多​​​​​​​路​​​​​​​径​​​​​​​映​​​​​​​射​​​​​​​对​​​​​​​象​​​​​​​ {.title}
:::
::: para
多​​​​​​​路​​​​​​​径​​​​​​​映​​​​​​​射​​​​​​​对​​​​​​​象​​​​​​​支​​​​​​​持​​​​​​​多​​​​​​​路​​​​​​​径​​​​​​​的​​​​​​​设​​​​​​​备​​​​​​​的​​​​​​​映​​​​​​​射​​​​​​​。​​​​​​​`多​​​​​​​路​​​​​​​径​​​​​​​`{.literal}对​​​​​​​象​​​​​​​的​​​​​​​格​​​​​​​式​​​​​​​如​​​​​​​下​​​​​​​：
:::
``` screen
start length  multipath  #features [feature1 ... featureN] #handlerargs [handlerarg1 ... handlerargN] #pathgroups pathgroup pathgroupargs1 ... pathgroupargsN
```
::: para
每​​​​​​​个​​​​​​​路​​​​​​​径​​​​​​​组​​​​​​​群​​​​​​​都​​​​​​​有​​​​​​​一​​​​​​​组​​​​​​​ *`pathgroupargs`* 参​​​​​​​数​​​​​​​。​​​​​​​
:::
::: variablelist
[*`start`*]{.term}
:   ::: para
    虚​​​​​​​拟​​​​​​​设​​​​​​​备​​​​​​​中​​​​​​​的​​​​​​​起​​​​​​​始​​​​​​​块​​​​​​​
    :::
[*`length`*]{.term}
:   ::: para
    这​​​​​​​个​​​​​​​片​​​​​​​段​​​​​​​的​​​​​​​长​​​​​​​度​​​​​​​
    :::
[*`#features`*]{.term}
:   ::: para
    在​​​​​​​那​​​​​​​些​​​​​​​特​​​​​​​性​​​​​​​之​​​​​​​后​​​​​​​是​​​​​​​多​​​​​​​路​​​​​​​径​​​​​​​特​​​​​​​性​​​​​​​的​​​​​​​数​​​​​​​目​​​​​​​。​​​​​​​如​​​​​​​果​​​​​​​这​​​​​​​个​​​​​​​参​​​​​​​数​​​​​​​是​​​​​​​ 0，则​​​​​​​没​​​​​​​有​​​​​​​
    *`feature`* 参​​​​​​​数​​​​​​​，且​​​​​​​下​​​​​​​一​​​​​​​个​​​​​​​设​​​​​​​备​​​​​​​映​​​​​​​射​​​​​​​参​​​​​​​数​​​​​​​为​​​​​​​
    *`#handlerargs`*。​​​​​​​目​​​​​​​前​​​​​​​有​​​​​​​一​​​​​​​个​​​​​​​支​​​​​​​持​​​​​​​的​​​​​​​多​​​​​​​路​​​​​​​径​​​​​​​特​​​​​​​性​​​​​​​
    `queue_if_no_path`{.literal}。​​​​​​​这​​​​​​​说​​​​​​​明​​​​​​​如​​​​​​​果​​​​​​​没​​​​​​​有​​​​​​​路​​​​​​​径​​​​​​​可​​​​​​​用​​​​​​​，则​​​​​​​将​​​​​​​这​​​​​​​个​​​​​​​多​​​​​​​路​​​​​​​径​​​​​​​的​​​​​​​设​​​​​​​备​​​​​​​设​​​​​​​定​​​​​​​为​​​​​​​队​​​​​​​列​​​​​​​
    I/O。​​​​​​​
    :::
    ::: para
    例​​​​​​​如​​​​​​​：如​​​​​​​果​​​​​​​只​​​​​​​在​​​​​​​尝​​​​​​​试​​​​​​​使​​​​​​​用​​​​​​​所​​​​​​​有​​​​​​​路​​​​​​​径​​​​​​​后​​​​​​​将​​​​​​​其​​​​​​​标​​​​​​​记​​​​​​​为​​​​​​​失​​​​​​​败​​​​​​​时​​​​​​​从​​​​​​​才​​​​​​​将​​​​​​​
    `multipath.conf`{.literal} 文​​​​​​​件​​​​​​​的​​​​​​​ `no_path_retry`{.literal}
    选​​​​​​​项​​​​​​​设​​​​​​​定​​​​​​​为​​​​​​​只​​​​​​​有​​​​​​​ I/O
    操​​​​​​​作​​​​​​​的​​​​​​​队​​​​​​​列​​​​​​​，该​​​​​​​映​​​​​​​射​​​​​​​应​​​​​​​显​​​​​​​示​​​​​​​如​​​​​​​下​​​​​​​除​​​​​​​非​​​​​​​所​​​​​​​有​​​​​​​路​​​​​​​径​​​​​​​检​​​​​​​查​​​​​​​程​​​​​​​序​​​​​​​进​​​​​​​行​​​​​​​的​​​​​​​指​​​​​​​定​​​​​​​检​​​​​​​查​​​​​​​次​​​​​​​数​​​​​​​都​​​​​​​是​​​​​​​失​​​​​​​败​​​​​​​的​​​​​​​。​​​​​​​
    :::
    ``` screen
    0 71014400 multipath 1 queue_if_no_path 0 2 1 round-robin 0 2 1 66:128 \
    1000 65:64 1000 round-robin 0 2 1 8:0 1000 67:192 1000
    ```
    ::: para
    在​​​​​​​所​​​​​​​有​​​​​​​路​​​​​​​径​​​​​​​检​​​​​​​查​​​​​​​程​​​​​​​序​​​​​​​完​​​​​​​成​​​​​​​指​​​​​​​定​​​​​​​数​​​​​​​目​​​​​​​的​​​​​​​检​​​​​​​查​​​​​​​并​​​​​​​失​​​​​​​败​​​​​​​后​​​​​​​，会​​​​​​​出​​​​​​​现​​​​​​​如​​​​​​​下​​​​​​​映​​​​​​​射​​​​​​​。​​​​​​​
    :::
    ``` screen
    0 71014400 multipath 0 0 2 1 round-robin 0 2 1 66:128 1000 65:64 1000 \
    round-robin 0 2 1 8:0 1000 67:192 1000
    ```
[*`#handlerargs`*]{.term}
:   ::: para
    那​​​​​​​些​​​​​​​参​​​​​​​数​​​​​​​后​​​​​​​是​​​​​​​硬​​​​​​​件​​​​​​​处​​​​​​​理​​​​​​​器​​​​​​​参​​​​​​​数​​​​​​​的​​​​​​​数​​​​​​​目​​​​​​​。​​​​​​​硬​​​​​​​件​​​​​​​处​​​​​​​理​​​​​​​器​​​​​​​指​​​​​​​定​​​​​​​在​​​​​​​切​​​​​​​换​​​​​​​路​​​​​​​径​​​​​​​组​​​​​​​或​​​​​​​者​​​​​​​处​​​​​​​理​​​​​​​
    I/O 错​​​​​​​误​​​​​​​时​​​​​​​用​​​​​​​来​​​​​​​执​​​​​​​行​​​​​​​硬​​​​​​​件​​​​​​​特​​​​​​​定​​​​​​​的​​​​​​​动​​​​​​​作​​​​​​​。​​​​​​​如​​​​​​​果​​​​​​​将​​​​​​​其​​​​​​​设​​​​​​​定​​​​​​​为​​​​​​​
    0，那​​​​​​​么​​​​​​​下​​​​​​​一​​​​​​​个​​​​​​​参​​​​​​​数​​​​​​​则​​​​​​​为​​​​​​​ *`#pathgroups`*。​​​​​​​
    :::
[*`#pathgroups`*]{.term}
:   ::: para
    路​​​​​​​径​​​​​​​组​​​​​​​的​​​​​​​数​​​​​​​目​​​​​​​。​​​​​​​一​​​​​​​个​​​​​​​路​​​​​​​径​​​​​​​组​​​​​​​是​​​​​​​一​​​​​​​组​​​​​​​多​​​​​​​路​​​​​​​径​​​​​​​的​​​​​​​设​​​​​​​备​​​​​​​进​​​​​​​行​​​​​​​负​​​​​​​载​​​​​​​平​​​​​​​衡​​​​​​​的​​​​​​​路​​​​​​​径​​​​​​​。​​​​​​​每​​​​​​​个​​​​​​​路​​​​​​​径​​​​​​​组​​​​​​​都​​​​​​​有​​​​​​​一​​​​​​​组​​​​​​​
    *`pathgroupargs`* 参​​​​​​​数​​​​​​​。​​​​​​​
    :::
[*`pathgroup`*]{.term}
:   ::: para
    下​​​​​​​一​​​​​​​个​​​​​​​要​​​​​​​尝​​​​​​​试​​​​​​​的​​​​​​​路​​​​​​​径​​​​​​​组​​​​​​​。​​​​​​​
    :::
[*`pathgroupsargs`*]{.term}
:   ::: para
    每​​​​​​​个​​​​​​​路​​​​​​​径​​​​​​​组​​​​​​​包​​​​​​​括​​​​​​​以​​​​​​​下​​​​​​​参​​​​​​​数​​​​​​​：
    :::
    ``` screen
    pathselector #selectorargs #paths #pathargs device1 ioreqs1 ... deviceN ioreqsN 
    ```
    ::: para
    路​​​​​​​径​​​​​​​组​​​​​​​中​​​​​​​的​​​​​​​每​​​​​​​个​​​​​​​路​​​​​​​径​​​​​​​都​​​​​​​有​​​​​​​一​​​​​​​组​​​​​​​路​​​​​​​径​​​​​​​参​​​​​​​数​​​​​​​。​​​​​​​
    :::
    ::: variablelist
    [*`pathselector`*]{.term}
    :   ::: para
        指​​​​​​​定​​​​​​​用​​​​​​​来​​​​​​​决​​​​​​​定​​​​​​​使​​​​​​​用​​​​​​​这​​​​​​​个​​​​​​​路​​​​​​​径​​​​​​​组​​​​​​​中​​​​​​​的​​​​​​​哪​​​​​​​个​​​​​​​路​​​​​​​径​​​​​​​进​​​​​​​行​​​​​​​下​​​​​​​一​​​​​​​个​​​​​​​ I/O
        操​​​​​​​作​​​​​​​的​​​​​​​算​​​​​​​法​​​​​​​。​​​​​​​
        :::
    [*`#selectorargs`*]{.term}
    :   ::: para
        在​​​​​​​多​​​​​​​路​​​​​​​径​​​​​​​映​​​​​​​射​​​​​​​中​​​​​​​这​​​​​​​个​​​​​​​参​​​​​​​数​​​​​​​后​​​​​​​的​​​​​​​路​​​​​​​径​​​​​​​选​​​​​​​择​​​​​​​程​​​​​​​序​​​​​​​参​​​​​​​数​​​​​​​的​​​​​​​数​​​​​​​目​​​​​​​。​​​​​​​目​​​​​​​前​​​​​​​，这​​​​​​​个​​​​​​​参​​​​​​​数​​​​​​​的​​​​​​​值​​​​​​​总​​​​​​​是​​​​​​​
        0。​​​​​​​
        :::
    [*`#paths`*]{.term}
    :   ::: para
        这​​​​​​​个​​​​​​​路​​​​​​​径​​​​​​​组​​​​​​​中​​​​​​​的​​​​​​​路​​​​​​​径​​​​​​​数​​​​​​​目​​​​​​​。​​​​​​​
        :::
    [*`#pathargs`*]{.term}
    :   ::: para
        在​​​​​​​这​​​​​​​个​​​​​​​组​​​​​​​群​​​​​​​中​​​​​​​为​​​​​​​每​​​​​​​个​​​​​​​路​​​​​​​径​​​​​​​指​​​​​​​定​​​​​​​的​​​​​​​路​​​​​​​径​​​​​​​参​​​​​​​数​​​​​​​数​​​​​​​目​​​​​​​。​​​​​​​目​​​​​​​前​​​​​​​，这​​​​​​​个​​​​​​​数​​​​​​​值​​​​​​​总​​​​​​​是​​​​​​​
        1，即​​​​​​​ *`ioreqs`* 参​​​​​​​数​​​​​​​。​​​​​​​
        :::
    [*`device`*]{.term}
    :   ::: para
        该​​​​​​​路​​​​​​​径​​​​​​​的​​​​​​​块​​​​​​​设​​​​​​​备​​​​​​​，使​​​​​​​用​​​​​​​主​​​​​​​号​​​​​​​码​​​​​​​和​​​​​​​副​​​​​​​号​​​​​​​码​​​​​​​以​​​​​​​ *`major`*:*`minor`*
        格​​​​​​​式​​​​​​​参​​​​​​​考​​​​​​​
        :::
    [*`ioreqs`*]{.term}
    :   ::: para
        切​​​​​​​换​​​​​​​到​​​​​​​当​​​​​​​前​​​​​​​组​​​​​​​群​​​​​​​的​​​​​​​下​​​​​​​一​​​​​​​个​​​​​​​路​​​​​​​径​​​​​​​前​​​​​​​路​​​​​​​由​​​​​​​到​​​​​​​这​​​​​​​个​​​​​​​路​​​​​​​径​​​​​​​的​​​​​​​ I/O 请​​​​​​​求​​​​​​​数​​​​​​​目​​​​​​​。​​​​​​​
        :::
    :::
:::
::: para
[图 A.1
"多​​​​​​​路​​​​​​​径​​​​​​​映​​​​​​​射​​​​​​​对​​​​​​​象​​​​​​​"](#device_mapper.html#multipath_map_figure){.xref} shows
the format of a multipath target with two path groups.
:::
::: figure
[⁠]{#device_mapper.html#multipath_map_figure}
::: figure-contents
::: mediaobject
![多​​​​​​​路​​​​​​​径​​​​​​​映​​​​​​​射​​​​​​​对​​​​​​​象​​​​​​​](images/devicemap/multipathmap.png){width="444"}
:::
:::
**图 A.1. 多​​​​​​​路​​​​​​​径​​​​​​​映​​​​​​​射​​​​​​​对​​​​​​​象​​​​​​​**
:::
::: para
以​​​​​​​下​​​​​​​示​​​​​​​例​​​​​​​显​​​​​​​示​​​​​​​对​​​​​​​同​​​​​​​一​​​​​​​个​​​​​​​多​​​​​​​路​​​​​​​径​​​​​​​设​​​​​​​备​​​​​​​的​​​​​​​一​​​​​​​个​​​​​​​纯​​​​​​​故​​​​​​​障​​​​​​​排​​​​​​​除​​​​​​​对​​​​​​​象​​​​​​​定​​​​​​​义​​​​​​​。​​​​​​​在​​​​​​​这​​​​​​​个​​​​​​​对​​​​​​​象​​​​​​​中​​​​​​​有​​​​​​​四​​​​​​​个​​​​​​​路​​​​​​​径​​​​​​​组​​​​​​​，其​​​​​​​中​​​​​​​每​​​​​​​个​​​​​​​路​​​​​​​径​​​​​​​组​​​​​​​只​​​​​​​有​​​​​​​一​​​​​​​个​​​​​​​路​​​​​​​径​​​​​​​，以​​​​​​​便​​​​​​​多​​​​​​​路​​​​​​​径​​​​​​​的​​​​​​​设​​​​​​​备​​​​​​​每​​​​​​​次​​​​​​​只​​​​​​​能​​​​​​​使​​​​​​​用​​​​​​​一​​​​​​​个​​​​​​​路​​​​​​​径​​​​​​​。​​​​​​​
:::
``` screen
0 71014400 multipath 0 0 4 1 round-robin 0 1 1 66:112 1000 \
round-robin 0 1 1 67:176 1000 round-robin 0 1 1 68:240 1000 \
round-robin 0 1 1 65:48 1000
```
::: para
以​​​​​​​下​​​​​​​示​​​​​​​例​​​​​​​显​​​​​​​示​​​​​​​为​​​​​​​同​​​​​​​一​​​​​​​个​​​​​​​多​​​​​​​路​​​​​​​径​​​​​​​设​​​​​​​备​​​​​​​完​​​​​​​全​​​​​​​展​​​​​​​开​​​​​​​（多​​​​​​​总​​​​​​​线​​​​​​​）对​​​​​​​象​​​​​​​定​​​​​​​义​​​​​​​。​​​​​​​在​​​​​​​这​​​​​​​个​​​​​​​对​​​​​​​象​​​​​​​中​​​​​​​只​​​​​​​有​​​​​​​一​​​​​​​个​​​​​​​路​​​​​​​径​​​​​​​组​​​​​​​，其​​​​​​​中​​​​​​​包​​​​​​​含​​​​​​​所​​​​​​​有​​​​​​​路​​​​​​​径​​​​​​​。​​​​​​​在​​​​​​​这​​​​​​​个​​​​​​​设​​​​​​​定​​​​​​​中​​​​​​​，多​​​​​​​路​​​​​​​径​​​​​​​将​​​​​​​所​​​​​​​有​​​​​​​负​​​​​​​载​​​​​​​平​​​​​​​均​​​​​​​分​​​​​​​配​​​​​​​到​​​​​​​所​​​​​​​有​​​​​​​路​​​​​​​径​​​​​​​中​​​​​​​。​​​​​​​
:::
``` screen
0 71014400 multipath 0 0 1 1 round-robin 0 4 1 66:112 1000 \
 67:176 1000 68:240 1000 65:48 1000