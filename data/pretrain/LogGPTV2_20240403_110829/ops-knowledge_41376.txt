User: 请解答这个和日志有关的问题AMANDA backup fails with: data read: recv error: shm_ring is cancelled I have an AMANDA backup process running nightly. About a month ago, we pulled  the config into AMANDA 1:3.5.1-build2 (ubuntu package) running on Ubuntu 18.04 (new hardware as well). In the past week the backup has failed twice with: 


  data read: recv error: shm_ring is cancelled


Only finding one google hit on this. Anyone know what might be causing it? Not much turns up in syslog and not sure if the Sense Key error is cause, or effect.

AMANDA email

Date    : September 23, 2019 (8:31 AM)
    ...
    FAILED DUMP DETAILS:
      /-- kapernick /mnt/cache/daily.0/node1.test lev 0 FAILED [data read: recv error: shm_ring is cancelled]
      sendbackup: start [kapernick:/mnt/cache/daily.0/node1.test level 0]
      sendbackup: info BACKUP=/bin/tar
      sendbackup: info RECOVER_CMD=/bin/tar -xpGf - ...
      sendbackup: info end
      | /bin/tar: ./var/lib/lxd/unix.socket: socket ignored
      \--------
    ...


Syslog

Sep 23 08:31:05 kapernick kernel: [329302.736887] st 11:0:1:0: [st1] Sense Key : Not Ready [current] 
Sep 23 08:31:05 kapernick kernel: [329302.736891] st 11:0:1:0: [st1] Add. Sense: Logical unit not ready, operation in progress
Sep 23 08:31:05 kapernick kernel: [329302.737961] st 11:0:1:0: [st1] Sense Key : Not Ready [current] 
Sep 23 08:31:05 kapernick kernel: [329302.737963] st 11:0:1:0: [st1] Add. Sense: Logical unit not ready, operation in progress
Sep 23 08:31:05 kapernick kernel: [329302.740652] st 11:0:1:0: [st1] Sense Key : Not Ready [current] 
Sep 23 08:31:05 kapernick kernel: [329302.740655] st 11:0:1:0: [st1] Add. Sense: Logical unit not ready, operation in progress
Sep 23 08:31:08 kapernick kernel: [329305.741326] st 11:0:1:0: [st1] Sense Key : Not Ready [current] 
Sep 23 08:31:08 kapernick kernel: [329305.741330] st 11:0:1:0: [st1] Add. Sense: Logical unit not ready, operation in progress
Sep 23 08:31:11 kapernick kernel: [329308.741954] st 11:0:1:0: [st1] Sense Key : Not Ready [current] 
Sep 23 08:31:11 kapernick kernel: [329308.741958] st 11:0:1:0: [st1] Add. Sense: Logical unit not ready, operation in progress
Sep 23 08:31:14 kapernick kernel: [329311.742487] st 11:0:1:0: [st1] Sense Key : Not Ready [current] 
Sep 23 08:31:14 kapernick kernel: [329311.742491] st 11:0:1:0: [st1] Add. Sense: Logical unit not ready, operation in progress
Sep 23 08:31:17 kapernick kernel: [329314.743108] st 11:0:1:0: [st1] Sense Key : Not Ready [current] 
Sep 23 08:31:17 kapernick kernel: [329314.743111] st 11:0:1:0: [st1] Add. Sense: Logical unit not ready, operation in progress

Assistant: Which storage device are you using? 
I think connectivity is causing the problem. Can you check the port availability using the following commands?

# sudo -u amandabackup amadmin &lt;Backup set&gt; config --print-source &amp;&gt; full_config_details
# grep -i port full_config_details