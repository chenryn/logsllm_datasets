# 黑进智能手表-可穿戴设备的Cyberphysical风险
|
##### 译文声明
本文是翻译文章，文章来源：https://securelist.com/
原文地址：
译文仅供参考，具体内容表达以及含义原文为准。
我们将继续研究物联网设备如何扩大对用户的日常生活及其信息安全的影响。在我们[以前的研究](https://securelist.ru/50-hashes-per-hour/30782/)中，我们谈到了使用单板微型计算机截取认证数据的方法。而这次，我们关注的是可穿戴设备：智能手表和健身追踪器，或者更确切地说，我们关注它们内部的加速度计和陀螺仪。  
从围绕[Strava](https://labs.strava.com/heatmap)的一些消息可以知道，即使不应公开的那些关于用户物理活动的非个人数据也可能被公之于众。但从个人层面上看，这件事的风险更为严重，因为这些智能设备能够追踪到您在ATM上输入PIN码、登录服务或解锁智能手机的那一刻。  
在此次研究中，我们研究了可穿戴设备内的分析信号如何为潜在入侵者创造入侵机会。但研究结果让人大失所望：尽管从我们对嵌入式传感器的研究看来，信号并不能和“传统的”键盘记录器相提并论，但这仍可以用来构建用户的行为分析并检测关键数据的输入。这种分析可以依靠在用户设备上直接运行的合法应用轻易构建，这强化了网络犯罪分子渗透受害者隐私的能力，并有助于访问他们所在公司的内部网络。  
所以，先来看看最重要的内容。
## 用户行为分析
当人们听到“智能可穿戴设备”这个词时，他们很可能会想到微型数码产品。然而，重要的是要了解大多数智能手表是Cyberphysical系统，因为它们配备了用于测量加速度（加速度计）和旋转（陀螺仪）的传感器，这些便宜而微小的微型电路也经常包含磁场传感器（磁力计）。如果将这些带有用户信息的传感器信号连续记录下来的话可以发现什么？恐怕得到的结果远远超过这些小工具的所有者本想要的。  
为了我们的研究目的，我们基于Google的参考代码编写了一个相当简单的应用程序，并对基于Android Wear 2.5和Android
5.1智能手表操作系统的华为手表（第一代）、Kingwear KW88和PYiALCY
X200智能手表进行了一些简单的实验。这些手表的选择是因为它们的可用性以及为它们编写应用程序时的简易性（我们假设在iOS中利用嵌入式陀螺仪和加速度计也遵循类似的方法）。  
 _记录智能手表在输入密码期间的信号_
为了确定传感器的最佳采样频率，我们用不同的设备进行了一系列测试，从低功耗模型（处理器方面）如Arduino 101和小米Mi Band
2开始。然而，传感器采样和数据传输速率的结果并不让人满意——为了获得或多或少让人满意的互相关（cross-correlation）值，需要至少50Hz的采样频率。我们也排除了大于100赫兹的采样率：每秒8KB的数据可能并不算太多，但并不适用于长达数小时的日志记录。最后，我们的应用程序选择以100
Hz的频率对嵌入式传感器进行采样，并记录手机内存中三个方向（x，y，z）的加速度计和陀螺仪读数的瞬时值。  
无可否认，获得一整天的“数字快照”并不容易，因为华为手表在这种模式下的续航时间不超过六个小时。  
但还是让我们来看看这段时间内的加速度计读数记录。纵轴表示以m /
s^2为单位的加速度，横轴表示样本数（平均以10毫秒为单位）。加速度计和陀螺仪读数如下图所示。  
 _一小时内记录的用户的数据分析。顶部 – 加速度计信号，底部 – 陀螺仪信号_
这张图包含五个清晰可见的不同区域图案。对于那些精通运动学的人来说，这张图透露了很多用户信息。  
最明显的运动模式是步行。我们也将从此开始。  
当用户走路时，戴着智能手表的手像钟摆一样摆动，而钟摆摆动是一个周期性的过程，因此，如果在图表上存在运动传感器的加速度或方位读数根据周期性规律而变化的区域，则可以假定用户正在那时行走。分析数据时，整体考虑加速度计和陀螺仪读数十分有效。  
让我们仔细看看短时间间隔内震荡幅度最大的区域（紫色区域Pattern1，Pattern3和Pattern5）。  
 _加速度计和陀螺仪在步行时的读数_
在这个例子中，可注意到手的周期性振荡持续来12分钟（Pattern1，如上图）。尽管对加速度数据的双重数值积分计算显示其精度和可变的特定速度可接近于用户在某处行走的积分常数（初始速度和坐标），但在没有请求地理信息的情况下，仍然很难准确地显示用户的动向。  
 _加速度计数据的数值积分计算结果，该数据可估算用户在1小时内沿x和y轴方向的位移（z轴位移为零，遂图中不显示）_
注意，相对于X轴位移的Y轴位移的曲线显示了人的大致路径。在这种非常原始的方法下，虽然距离并不太精确，但相当震撼的是它的精度可达到以千米计。想要提升行进距离的精度，可以用人体测量数据来估计每一步的长度（这也是健身追踪器的基本功能），但我们不会在这次的研究中研究这一点。  
 _根据对加速度计数据沿X和Y轴进行数值积分计算可确定的被观察人员的大致路径_
相比之下更困难的是分析那些不太活跃的区域。可以清晰地看到这个人在这段时间里处于休息状态。手表的方向没有变化，但存在加速度，则表明此人正在通过汽车（或电梯）移动。  
下面显示了另一个22分钟的片段。这显然不是步行，因为没有可观察到的信号周期性振荡。但是，我们看到沿一个轴上的加速度信号膜的周期性变化，它可能是一种直线运动但中途有停靠的公共交通工具。  
 _乘坐公共交通工具时的加速度计数据_
以下是另一个时间片段：  
 _Pattern 3，加速度计数据_
这似乎是短时间行走（几秒钟）、暂停和忽然的手部动作的混合物。这个人大概是在室内。  
下面我们讲解释图上的所有区域。  
 _区域解码后的加速度计和陀螺仪读数_
这是一个在三次步行（12，3和5分钟）中穿插地铁（20和24分钟）的旅程。短步行间隔具有一些特殊的特征，因为它涉及从地铁线路的更换。这些特征显而易见，但我们的兴趣在于用可在可穿戴设备上执行的算法来确定它们。因此，我们使用简单的互相关（cross-correlation）计算来代替神经网络（我们也知道神经网络对于这类任务来说非常棒）。  
针对两段步行数据（Walking1和Walking2），我们用10秒钟的信号数据阵列计算了它们之间的互相关以及与噪声数据的互相关。  
 _两个步行部分互相关和步行部分与噪声部分的互相关函数的最大值_
从表中可以看出，即使这种计算互相关函数的方法十分基础，其也让我们可以在用户的“数字快照”中识别出运动模式，而且精确度高达83％（考虑到对相关性）。这个指标可能看起来并不高，但需要强调的是，我们还没有优化样本规模，也没有使用更复杂的例如被假定在确定特征部分信号记录方面更出色的主成分分析的算法。  
这为潜在的攻击者提供了什么？通过识别用户在地铁中的移动，并且通过对这种移动的特征方向进行判断，我们可以确定用户正在乘坐哪条地铁线路。当然，使用磁力仪可以获得有关X和Y轴在空间中方向的数据可以让这个过程更加简单。但不幸的是，电动机的强大电磁拾音、确定偏北方向的低精确度以及智能手表中相对较少的磁力计迫使我们放弃了这一想法。  
如果没有关于空间X轴和Y轴方向的数据（最有可能，对于单个周期不同），解码运动轨迹的问题会变成将已知长度的时间片段叠加到地形图上的几何任务。再一次，让我们站在攻击者的角度，我们可以寻找磁场爆发来表示电动火车（有轨或无轨电车）的加减速，这可使我们能够在我们感兴趣的时间片段中计算出其中的临时停靠点的数量。但这也超出了我们此次研究的范围。