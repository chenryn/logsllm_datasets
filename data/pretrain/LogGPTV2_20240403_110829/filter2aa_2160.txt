CREATING THE DEFCON 
CHINA 1.0 BADGE 
joe Grand aka kingpin 
introduction / badge 
history 
• bring community together through interactivity 
• create game to encompass the defcon 
experience 
• simple design that could be expanded during/
after defcon 
• interactive, command-based menu for additional 
exploration 
goals 
• complete tasks, get rewarded 
• 4 roots and 4 branches, each with 4 leds 
• when task is complete, badge inserted into 
programmer to unlock LED 
• when each root is complete, magic happens 
• when all roots are complete, more magic 
happens 
gameplay 
early concepts 
Prototyping 
block diagram 
Hardware 
USB POWER 
LED 
control 
ACCELEROMETER 
mcu 
FPC 
• First for conference badge 
• new material (for us) opens up new risks/
challenges 
• specific stack-up to meet edge connector 
requirements 
• MAJOR SUPPORT by electronic interconnect, 
adapt electronics 
FLEXIBLE PRINTED 
CIRCUIT (FPC) 
• edge connector as interface to the outside world 
• UART, I2C, AVR ICSP 
• used with programming shield to set/read state 
of badge leds 
FLEXIBLE PRINTED 
CIRCUIT (FPC) 
pin 1 
pin 
12 
1. GND 
2. SCK 
3. MISO 
4. MOSI 
5. /RST 
6. SDA 
7. SCL 
8. SIN 
9. SOUT 
10. /
SEN
SE 
11. GPI
O 
12 VCC
FLEXIBLE PRINTED 
CIRCUIT (FPC) 
IT 
BEND
S! 
• test 
• test 
• test 
Schematic 
USB 
INTERFACE 
• allows for arduino programming and interactive 
mode 
• FT231X USB-to-Serial UART 
• entire usb protocol handled on-chip 
• host will recognize as virtual serial device/com 
port 
• mosfets for soft-start and power switchover 
led matrix 
• multiplexing via led matrix library 
• row controlled by discrete i/O 
• column controlled through 74hc595 shift register 
• refresh @ 175hz to reduce flicker 
• each led individually addressable, dimmable (16 
levels) 
accelerometer 
• ST microelectronics LIS3DH 
• 3-axis digital output (i2c/SPI) 
• +/- 2, 4, 8, 16g range 
• interrupt on motion or free 
fall 
• used to preserve battery life 
• sleep mode @ 10 seconds 
of inactivity 
• Raw values available through 
interactive mode 
bill-of-
materials 
• ARDUINO 
• open source platform based on easy-to-use 
hw/sw/FW 
• Third-party libraries to add functionality 
• 90% of FLash (27.6kB), 43% of RAM (887 
bytes) 
• loop 
• set power state (battery, usb, usb charger) 
• check for/process interactive mode 
• check for/process fpc communication 
• update leds 
Firmware 
• Third-party libraries to add functionality to 
arduino 
• essential for rapid development 
• some code modifications required during 
badge integration 
• Low power 
•  https://github.com/rocketscream/Low-Power 
• Adafruit_LIS3DH (ACCELEROMETER) 
•  https://github.com/adafruit/Adafruit_LIS3DH 
• Adafruit_SENSOR (sensor abstraction layer) 
•  https://github.com/adafruit/Adafruit_Sensor 
LIBRARIES 
• led matrix (individually addressable, dimmable, 
shift register) 
•  https://github.com/marcmerlin/LED-Matrix 
• ADAFRUIT-GFX-LIBRARY (Core graphics 
primitives) 
•  https://github.com/adafruit/Adafruit-GFX-Library 
• DIO2 (Fast digital i/O) 
•  www.codeproject.com/Articles/732646/Fast-digital-I-O-
for-Arduino 
• Timerone (ENHANCED TIMer, PERIODIC 
INTERRUPTS) 
• https://github com/PaulStoffregen/TimerOne
LIBRARIES 
FABRICATIO
N 
FABRICATIO
N 
FABRICATIO
N 
ASSEMBLY 
• raspberry pi 3 model b+ 
• shell script to program  ft231X and 
ATmega328P via usb 
• power on self test 
• visual inspection of leds 
• detection of accelerometer 
programming / testing 
• Human (Attendee), black silkscreen: 2,784 
• Goon, red: 156 
• Speaker, blue: 50 
• Village, blue: 90 
• Sponsor, grey: 120 
• Press, green: 100 
• TOTAL: 3,300 
numbers 
(not production versions) 
• mechanical weaknesses 
• reworking flex pcb 
• time frame 
CHALLENGE
S 
battery life 
• cr2032 3V lithium coin cell 
• 225mah to 2V 
• Power up, idle: 3.3mA 
• all LEDs enabled: 10mA 
• sleep mode: 4-6uA 
• accelerometer to detect 
motion 
• sleep mode @ 10 seconds 
of      inactivity 
• BREAKOUT BOARD 
• access all fpc signals 
• UART, I2C, AVR ICSP 
• sao adapter 
• available in hhv and badge hacking workshop 
•  http://oshpark.com/shared_projects/X4QDh3nj 
ACCESSORIE
S 
• PROGRAMMING SHIELD 
• serial communication via fpc 
• set/clear individual led 
• read state of badge 
• arduino w/ custom shield 
• txs0104 level translator 
• dip switches 
• i2c, avr icsp footprints 
•  http://oshpark.com/shared_projects/WGHZCahO 
ACCESSORIE
S 
demonstration 
• INSTALLATION BY Deqing SUN & PEIQI SU 
(new york interactive) 
• EXTENDs THE BADGE FUNCTIONALITY INTO 
INTERACTIVE ART 
• semi-physical-semi-digital tree grows in a 6 
meter container 
• BADGE -> ARDUINO -> RASPBERRY PI 
(OPENFRAMEWORKS) -> PC 
THE TREE OF 
PROMISE 
• LED tree fruit 
• graphics displayed on a 3d cube 
• TOUCH SENSITIVE 
• TREE BRANCHES 
• ALGORITHM TO GENERATE UNIQUE 
BRANCH FOR EACH ATTENDEE 
THE TREE OF 
PROMISE 
• design documentation, code, etc. 
•  www.grandideastudio.com/portfolio/defcon-
china-2019-badge  
resources 
QUESTIONS? 
enjoy the conference! 
@JOEGRAND | 
www.grandideastudio.com