configuration.
clscfg:
clscfg: EXISTING configuration version 4 detected.
Setting up Network socket directories
Setting the permissions on ocR backup directory
dding daem
tartup will be queued to init within 30 seconds.
NARNING:directory
NARNING:
ARNING:directory
然后，继续在node-rac2上执行root.sh脚本。输出如下：
Local node checking complete. Run root.sh on remaining nodes to start CRS daemons
Adding daemons to inittab
Format of3
Now formatting votingdevice:/dev/raw/raw5
de
directory
node-rac2
node-racl
2：
directory
directory
第5稿
www.Linuxidc.com
Arquments
node-rac2
directory
ns
on
voting devices
集群高级应用篇
to inittab
4is11Release
/app'is not owned by root.Changing owner to root
node-privl
app/oracrs/product'
check out
node-priv2
Oracle
/app'
'/app/oracrs'is not ownedby root
'/app/oracrs/product'isnot owned by root
/app/oracrs/product/11.0.6'is not owned by root
CRS stack is already
is not owmed by root
successfully
node-rac2
node-racl
Creating it now.
complete.
OCR keys.
is not owmed by root.
：interconnect name>
successfully
configured
Changing owner to root
Changing owmer to root
PDG
---
## Page 396
Linux公社（www.LinuxIDC.com）是专业的Linux系统门户网站，实时发布最新Linux资讯。
13-16所示。
登录到任意一个集群节点，执行如下命令开始安装：
13.4.14安装Oracle数据库
面，如图13-15所示。
ClusterWare的内部运作机制。
接着会弹出图形安装向导界面，如图13-4所示。单击“Next”按钮进人下一步，如图
[oracle@node-rac2 rac]$ /rac/database/runInstaller
在OracleClusterWare安装成功后，开始进入Oracle数据库的安装。以oracle用户身份
所有组件成功配置并启动后，OracleClusterWare安装结束。
在两个节点上执行完毕配置脚本后，单击“OK”按钮，进入Oracle组件配置和启动界
注意上面的输出中斜体字部分的内容。通过观察日志输出，可以很清楚地了解Oracle
Done.
Creating
Creating
Creating
Running
ONS
ONS
GSD
vipca（silent) for configuring nodeapps
www.Linuxidc .com
The follwing configuratlon assistans willconfigureand stan the cmponentsyou selected earie
Configuration Assistants
Oracle Cluster Yenific
Oracle
Oracle Notfication Server
applicationresource
图13-15配置并启动Oracle组件
xeaourCe
regource
JnE
on
on
on
（2）
(2)
Succeeded
StRUS
nodes
nodes
第133
Fecominmiendeid
Recommended
Tvpe
OracleRAC集
Betn
381
---
## Page 397
Linux公社（www.LinuxIDC.com）是专业的Linux系统门户网站，实时发布最新Linux资讯。
所示。
13-17所示。
382
在指定Oracle主目录和程序的安装路径后单击“Next”按钮进入下一步，如图13-18
这里选择“EnterpriseEdition”，即企业版本。单击“Next”按钮进人下一步，如图
第5篇
www.Linuxidc.com
Install Location
Whattypeof installationdoyouwant?
OracleDatabase11g11.1.0.6.0
Select Installation Type
集牌高
Ed
itio
V
图13-17指定Oracle安装主目录
101
图13-16选择Oracle安装类型
1308
ex
ORACLE118
ORACLE118
DATABASE
Chngernhenters
Broese.
Browse
PDG
---
## Page 398
Linux公社（www.LinuxIDC.com）是专业的Linux系统门户网站，实时发布最新Linux资讯。
13-19所示。
这里选用集群安装方式，选择集群所有节点。单击“Next”按钮进人下一步，如图
这里检查系统环境是否满足Oracle的安装需求，如果检测没有通过，根据相关提示进
www.Linuxidc.com
Product-Specific PrerequisiteChecks
SpecifyHardware ClusterInstallation Mode
ClusterInstall
图13-19检查Oracle安装环境
图13-18指定集群安装模式
tothe
nerethe
ORACLE118
OracieRAC集群
Rersp
383
柳阁
---
## Page 399
Linux公社（www.LinuxIDC.com）是专业的Linux系统门户网站，实时发布最新Linux资讯。
行修改即可。继续单击“Next”按钮进人下一步，如图13-20所示。
这里将OSDBA组设置为“dba"，将OSOPOER和OSASM组都设置为“oinstall"。单
这里选择“InstallSoftware Only”。单击“Next”按钮进入下一步，如图13-21所示。
www.Linuxidc.com
YSDBAand
PrivilegedOperatingSystem Groups
SelectConfigurationOption
图13-21选择安装的系统组
图13-20选择配置选项
ethertocreateadatabase crto
ORACLE118
ORALE118
ahase
PDG
---
## Page 400
13-23所示。
击“Next”按钮进入下一步，如图13-22所示。
Linux公社（www.LinuxIDC.com）是专业的Linux系统门户网站，实时发布最新Linux资讯。
图13-22显示了安装Oracle数据库的相关信息，单击“Install”按钮开始安装，如图
www.Linuxidc .com
Instal
OracleDatabase 11g11.1.0.6.0
Summary
New Installations (25 products)
DEemot
/Require
Oratle Base: /u01/oracle
Source: /rac/catabase/stage/products.xml
Oracie
Daabase 1lg
Nodes
ired 3. 43GB (nciludes 224MS temporary  Available 8.39GB
Heme: /u01/oradte/product/11.0.6/rar_db (0raDb11g.home1)
Type: Enterprise Edition:
11.
图13-23安装Oracle
图13-22安装概要一览
ORACLE118
ORACLE118
385
PDG
---
## Page 401
Linux公社（www.LinuxIDC.com）是专业的Linux系统门户网站，实时发布最新Linux资讯。
以root用户身份依次在两个节点上执行root.sh配置脚本，执行完毕，单击“OK”按钮
所有组件成功启动后，自动进人如图13-25所示界面。
安装完成后自动进人Oracle组件配置和启动界面，如图13-24所示。
Y
Configuration
to
图13-24配置和启动Oracle组件
Assistants
图13-25执行配置脚本
品
user
DG
---
## Page 402
Linux公社（www.LinuxIDC.com）是专业的Linux系统门户网站，实时发布最新Linux资讯。
Net，如图13-26所示。
13.4.15配置OracleNet
完成Oracle数据库软件的安装。
这里选择“Cluster configuration”。单击“Next”按钮进入下一步，如图13-27所示。
以oracle用户身份登录到集群任意节点的图形界面，然后执行netca命令配置Oracle
这里选择集群所有节点。单击“Next”按钮进入下一步，如图13-28所示。
www.Linuxidc.com
图13-26选择NetServices配置类型
图13-27选择要配置的集群节点
Singlenode contiguratio
SelecrthetypeofOracleNetSerces
Nex）
PDG
---
## Page 403
Linux公社（www.LinuxIDC.com）是专业的Linux系统门户网站，实时发布最新Linux资讯。
388
选择“Add”。添加监听设置。单击“Next”按钮进入下一步，如图13-30所示。
这里选择“Lister configuration”。单击“Next”按钮进入下一步，如图13-29所示。
第5篇集群高级应用篇
www.Linuxidc.com
图13-30设置监听名称
图13-28网络配置选项
图13-29添加监听
LGTENEP
Add
Ls
cam
Conf
PDG
---
## Page 404
Linux公社（www.LinuxIDC.com）是专业的Linux系统门户网站，实时发布最新Linux资讯。
接着再配置一个命名方法，如图13-33所示。
这里选择默认的1521端口。单击“Next”按钮进人下一步，进而完成监听的创建。
这里选择TCP协议。单击“Next”按钮进入下一步，如图13-32所示。
这里选择默认的监听名称“LISTENER”。单击“Next”按钮进入下一步，如图13-31所示。
www.Linuxidc.com
图13-33配置命名方法
图13-32选择监听端口
图13-31选择可用协议
me tg the Orace Net Conigur
pon
Nat
rum
vouwotd
12510
PDG
---
## Page 405
Linux公社（www.LinuxIDC.com）是专业的Linux系统门户网站，实时发布最新Linux资讯。
13-35所示图形界面。
13.4.16
法的配置。
068
以oracle用户身份登录到集群任意节点的图形界面，然后执行dbca命令，会弹出如图
这里选择“LocalNaming”和“EasyContentNaming”。单击“Next”按钮完成命名方
单击“Next”按钮进入下一步，如图13-34所示。
创建RAC数据库
图13-35选择创建数据库类型
Oracle
图13-34选择可用命名方法
singie nstance datbase
CDS
Ext
BackNe
conne
PDG
---
## Page 406
Linux公社（www.LinuxIDC.com）是专业的Linux系统门户网站，实时发布最新Linux资讯。
钮进入下一步，如图13-37所示。
如图13-36所示。
这里选择“Configure Automatic Storage Management"”，即设置ASM。单击“Next”按
Www.Linuxidc.
eaDat
图13-37选择集群节点
图13-36选择操作类型
rwsech
you
第13章
.com
PDG
---
## Page 407
Linux公社（www.LinuxIDC.com）是专业的Linux系统门户网站，实时发布最新Linux资讯。
“Next”按钮进人下一步，如图13-39所示。
392第5篇
这里设置一个ASM实例的SYS用户口令，然后指定初始化参数文件的类型。单击
这里选择集群所有节点。单击“Next”按钮进入下一步，如图13-38所示。
www.Linuxidc .com
集群高级应用篇
图13-38设定ASM实例的SYS用户口令
OCreate serer prmeterle PFL
se thetypeofprameterfleh
AGMParameters...
Thed
Server Parameter Fllename