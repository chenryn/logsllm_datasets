日志参考 16 CSPF
16
CSPF
关于本章
16.1 CSPF/3/IGP_LINK_INFONULL
16.2 CSPF/3/IGP_NWLSA_INFONULL
16.3 CSPF/3/IGP_RID_INFONULL
16.4 CSPF/3/INVAL_LINK
16.5 CSPF/3/INVAL_NWLINK
16.6 CSPF/4/MAX_LINK_REACH
16.7 CSPF/4/MAX_NODE_REACH
16.8 CSPF/4/MAX_NWLSA_REACH
16.9 CSPF/4/MAX_SRLG_REACH
16.10 CSPF/3/MEM_FAIL
16.11 CSPF/3/PATH_ERROR
16.12 CSPF/3/Q_ERROR
16.13 CSPF/3/TIME_FAIL
文档版本 03 (2017-06-22) 华为专有和保密信息 91
版权所有 © 华为技术有限公司
Huawei NE16EX 系列多业务企业路由器
日志参考 16 CSPF
16.1 CSPF/3/IGP_LINK_INFONULL
日志信息
CSPF/3/IGP_LINK_INFONULL:Received a link event with null information from IGP
[IgpName].
日志含义
从IGP协议收到无信息的链路事件。
日志参数
参数名称 参数含义
[IgpName] IGP协议的名字，ISIS或OSPF。
可能原因
收到的link事件没有有效信息。
处理步骤
步骤1 检查IGP数据库。
l 如果是OSPF，执行命令display ospf lsdb opaque-link和display ospf lsdb opaque-
area。
l 如果是IS-IS，执行命令display isis traffic-eng link和display isis traffic-eng
network。
步骤2 重启IGP协议。
----结束
16.2 CSPF/3/IGP_NWLSA_INFONULL
日志信息
CSPF/3/IGP_NWLSA_INFONULL:Received a Network-LSA with null information from
IGP [IgpName].
日志含义
从IGP协议收到无信息的Network-LSA。
文档版本 03 (2017-06-22) 华为专有和保密信息 92
版权所有 © 华为技术有限公司
Huawei NE16EX 系列多业务企业路由器
日志参考 16 CSPF
日志参数
参数名称 参数含义
[IgpName] IGP协议的名字，ISIS或OSPF。
可能原因
收到的Network LSA事件没有有效信息。
处理步骤
步骤1 检查IGP数据库。
l 如果是OSPF，执行命令display ospf lsdb opaque-link和display ospf lsdb opaque-
area。
l 如果是IS-IS，执行命令display isis traffic-eng link和display isis traffic-eng
network。
步骤2 重启IGP协议。
----结束
16.3 CSPF/3/IGP_RID_INFONULL
日志信息
CSPF/3/IGP_RID_INFONULL:Received an invalid router ID from IGP.
日志含义
从IGP收到无效的路由器ID。
日志参数
参数名称 参数含义
无 无
可能原因
IGP协议发过来的信息携带的路由器ID是无效的。
处理步骤
步骤1 检查IGP数据库。
l 如果是OSPF，执行命令display ospf lsdb opaque-link和display ospf lsdb opaque-
area。
l 如果是IS-IS，执行命令display isis traffic-eng link和display isis traffic-eng
network。
文档版本 03 (2017-06-22) 华为专有和保密信息 93
版权所有 © 华为技术有限公司
Huawei NE16EX 系列多业务企业路由器
日志参考 16 CSPF
步骤2 重启IGP协议。
----结束
16.4 CSPF/3/INVAL_LINK
日志信息
CSPF/3/INVAL_LINK:Received invalid link information from IGP [IgpName].
日志含义
从IGP协议收到无效的链路信息。
日志参数
参数名称 参数含义
[IgpName] IGP协议的名字，ISIS或OSPF。
可能原因
收到的link信息是无效的。
处理步骤
步骤1 1. 查看是哪种IGP协议。
l 如果使用的是OSPF协议，执行display ospf lsdb opaque-link和display ospf lsdb
opaque-area命令查看。
l 如果使用的是IS-IS协议，执行display isis traffic-eng link和display isis traffic-eng
network命令查看。
步骤2 2. 重启IGP进程。
----结束
16.5 CSPF/3/INVAL_NWLINK
日志信息
CSPF/3/INVAL_NWLINK:Received invalid Network-LSA information from IGP
[IgpName].
日志含义
从IGP协议收到无效的Network-LSA信息。
文档版本 03 (2017-06-22) 华为专有和保密信息 94
版权所有 © 华为技术有限公司
Huawei NE16EX 系列多业务企业路由器
日志参考 16 CSPF
日志参数
参数名称 参数含义
[IgpName] IGP协议的名字，ISIS或OSPF。
可能原因
收到的network-lsa信息是无效的。
处理步骤
步骤1 查看是哪种IGP协议。
l 如果使用的是OSPF协议，执行display ospf lsdb opaque-link和display ospf lsdb
opaque-area命令查看。
l 如果使用的是IS-IS协议，执行display isis traffic-eng link和display isis traffic-eng
network命令查看。
步骤2 重启IGP进程。
----结束
16.6 CSPF/4/MAX_LINK_REACH
日志信息
CSPF/4/MAX_LINK_REACH:Reached the maximum number of links of CSPF.
日志含义
达到CSPF最大链路数。
日志参数
参数名称 参数含义
无 无
可能原因
CSPF数据库中的link数据已经达到最大值，不能再增加新的。
处理步骤
l 增大License中的CSPF最大链路数。
----结束
文档版本 03 (2017-06-22) 华为专有和保密信息 95
版权所有 © 华为技术有限公司
Huawei NE16EX 系列多业务企业路由器
日志参考 16 CSPF
16.7 CSPF/4/MAX_NODE_REACH
日志信息
CSPF/4/MAX_NODE_REACH:Reached the maximum number of nodes of CSPF.
日志含义
达到CSPF最大节点数。
日志参数
参数名称 参数含义
无 无
可能原因
CSPF数据库中的Node数据已经达到最大值，不能再增加新的。
处理步骤
步骤1 请收集日志信息和配置信息，并联系技术支持人员。
----结束
16.8 CSPF/4/MAX_NWLSA_REACH
日志信息
CSPF/4/MAX_NWLSA_REACH:Reached the maximum number of Network-LSAs of CSPF.
日志含义
达到CSPF最大的Network-LSA数。
日志参数
参数名称 参数含义
无 无
可能原因
CSPF数据库中的Network LSA数据已经达到最大值，不能再增加新的。
文档版本 03 (2017-06-22) 华为专有和保密信息 96
版权所有 © 华为技术有限公司
Huawei NE16EX 系列多业务企业路由器
日志参考 16 CSPF
处理步骤
步骤1 增大License中的CSPF最大Network-LSA数目。
----结束
16.9 CSPF/4/MAX_SRLG_REACH
日志信息
CSPF/4/MAX_SRLG_REACH:The number of SRLGs reached the upper limit of CSPF.
日志含义
SRLG数目达到CSPF最大限制值。
日志参数
参数名称 参数含义
无 无
可能原因
链路下面配置的SRLG属性已经达到了CSPF支持的最大的SRLG数量。
处理步骤
步骤1 如有需要请联系技术支持人员，增加PAF中最大支持的SRLG数。
----结束
16.10 CSPF/3/MEM_FAIL
日志信息
CSPF/3/MEM_FAIL:Failed to allocate memory.
日志含义
内存分配失败。
日志参数
参数名称 参数含义
无 无
文档版本 03 (2017-06-22) 华为专有和保密信息 97
版权所有 © 华为技术有限公司
Huawei NE16EX 系列多业务企业路由器
日志参考 16 CSPF
可能原因
可用内存太少，导致内存申请失败。
处理步骤
步骤1 使用display memory-usage命令查看内存使用情况通过减少一些链路和配置来释放一些
内存。
----结束
16.11 CSPF/3/PATH_ERROR
日志信息
CSPF/3/PATH_ERROR:Failed to calculate the path due to [PathError].
日志含义
因为某些的原因导致路径计算失败。
日志参数
参数名称 参数含义
[PathError]
计算失败的原因，有如下值：
l configuration of two interface address
l configuration of next hop after
l configuration of next hop after egress
l configuration of egress node directly as strict is not permitted
l configuration of next hop after egress node is not permitted
可能原因
路径计算失败。
处理步骤
步骤1 用display explicit-path命令检验显式路径，然后根据日志中的错误点改正配置。
----结束
16.12 CSPF/3/Q_ERROR
日志信息
CSPF/3/Q_ERROR:Failed to fill in [EventName] queue.
文档版本 03 (2017-06-22) 华为专有和保密信息 98
版权所有 © 华为技术有限公司
Huawei NE16EX 系列多业务企业路由器
日志参考 16 CSPF
日志含义
写队列失败。
日志参数
参数名称 参数含义
[EventName] 产生错误的事件的名称，CSPF_LSPM或CSPF_RM。
可能原因
写队列失败，可能是队列满或者系统函数错误。
处理步骤
步骤1 等待一段时间。
步骤2 重启CSPF。
----结束
16.13 CSPF/3/TIME_FAIL
日志信息
CSPF/3/TIME_FAIL:Failed to create the [STRING] timer. (ReturnValue=[ULONG])
日志含义
创建失效链路检测定时器失败。
日志参数
参数名称 参数含义
STRING 定时器的名称。
ReturnValue 定时器创建函数返回的值。
可能原因
创建定时器失败。
处理步骤
步骤1 用display mpls te cspf tedb node命令检查链路。
步骤2 重启IGP协议。
----结束
文档版本 03 (2017-06-22) 华为专有和保密信息 99
版权所有 © 华为技术有限公司
Huawei NE16EX 系列多业务企业路由器
日志参考 17 DEFD
17
DEFD
关于本章
17.1 DEFD/4/CPCAR_DROP_LPU
17.2 DEFD/4/CPCAR_DYN_PORT
17.3 DEFD/4/RECOVER_DYN_PROTOCOL
17.4 DEFD/4/CPCAR_DROP_MPU
17.5 DEFD/4/CPCAR_DYN_PROTOCOL
文档版本 03 (2017-06-22) 华为专有和保密信息 100
版权所有 © 华为技术有限公司
Huawei NE16EX 系列多业务企业路由器
日志参考 17 DEFD
17.1 DEFD/4/CPCAR_DROP_LPU
日志信息
DEFD/4/CPCAR_DROP_LPU:Some packets are dropped by cpcar on the LPU in slot
[ULONG]. (Packet-type=[STRING], Drop-Count=[ULONG])
日志含义
在动态CPCAR的作用下slot槽位上的单板上丢弃某种上送报文。
日志参数
参数名称 参数含义
[ULONG] 槽位号。
Packet-type 报文类型。
Drop-Count 丢弃报文的数量。
可能原因
CPU使用率超过阈值，某种报文流量超过阈值。
处理步骤
步骤1 日志运行信息，无需处理。
----结束
17.2 DEFD/4/CPCAR_DYN_PORT
日志信息
DEFD/4/CPCAR_DYN_PORT:Some packets are dropped in the cpu port by dynamic cpcar.
(PortRate=[ULONG])
日志含义
在动态CPCAR的作用下，CPU统一限速丢弃了部分报文。
日志参数
参数名称 参数含义
PortRate CPU的统一限速值。
文档版本 03 (2017-06-22) 华为专有和保密信息 101
版权所有 © 华为技术有限公司
Huawei NE16EX 系列多业务企业路由器
日志参考 17 DEFD
可能原因
CPU使用率超过阈值，没有报文流量超过阈值，但是总的上送速率过大。
处理步骤
步骤1 日志运行信息，无需处理。
----结束
17.3 DEFD/4/RECOVER_DYN_PROTOCOL
日志信息
DEFD/4/RECOVER_DYN_PROTOCOL:Recover the protocol rate by dynamic cpcar.
(Packet-type=[STRING], DynamicRate=[ULONG])
日志含义
协议报文速率回调。
日志参数
参数名称 参数含义
Packet-type 报文类型。
DynamicRate 动态CPCAR值。
可能原因
CPU使用率低于阈值。
处理步骤
步骤1 日志运行信息，无需处理。
----结束
17.4 DEFD/4/CPCAR_DROP_MPU
日志信息
DEFD/4/CPCAR_DROP_MPU:Some packets are dropped by cpcar on the MPU. (Packet-
type=[STRING], Drop-Count=[ULONG])
日志含义
上送CPU的报文速率超出了主控板的cpcar限制。
文档版本 03 (2017-06-22) 华为专有和保密信息 102
版权所有 © 华为技术有限公司
Huawei NE16EX 系列多业务企业路由器
日志参考 17 DEFD
日志参数
参数名称 参数含义
Packet-type 协议类型
Drop-Count 丢失报文的计数
可能原因
上送CPU的报文流量超过了cpcar的速率限制被丢弃。主控板CPCAR丢弃了一些报文。
处理步骤
步骤1 控制上送CPU的报文流量在cpcar的限制阈值内或配置合理的cpcar限速值。
----结束
17.5 DEFD/4/CPCAR_DYN_PROTOCOL