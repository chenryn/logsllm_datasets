支持客户端从服务器查询采集配置、控制采集器的动作（启动、停止、重启和清理缓存）、为采集器添加文件或者目录型的日志数据源、为采集器删除文件或者目录型的日志数据源、查询采集器的文件或者目录型的日志数据源、修改采集器的文件或者目录型的日志数据源、添加Syslog型日志配置、删除Syslog型日志配置、修改Syslog型日志配置、查询Syslog型日志配置等。
3\. 上下文查询API
支持客户端通过服务器API调用指定日志的上下文。
4\. 下载任务API
支持客户端通过服务器API提交日志下载任务。
5\. 用户管理API
支持客户端通过服务器API创建用户分组、删除用户分组、获取用户分组、更新用户分组、设置用户分组的用户、设置用户分组的角色、设置用户分组属于哪些角色等。
6\. 用户分组管理API
支持客户端通过服务器API创建和删除账户、获取用户、更新用户等。
7\. 资源分组API
支持客户端通过服务器API实现资源的创建、删除和获取等。
### 10.1.3 API设计案例
客户端提交流式搜索任务如下：
GET /v1/{token}/{operator}/spl/submit
> 
> 说明。通过API向搜索引擎提交搜索任务，如果任务提交成功，会返回一个任务sid，使用此sid完成此搜索任务的更多操作。
 参数。搜索API参数见表10-1。
表10-1 搜索API参数
  ------- -------------- --------------------------------------------------------------------------------------------------------------------- ------------ -------- --------
  类型    名 称          说 明                                                                                                                 参数值类型   默认值   备注
  Path    token          token                                                                                                                 string       ---      必填
  Path    operator       操作者                                                                                                                string       ---      必填
  Query   task_name      任务名称                                                                                                              string       ---      必填
  Query   time_range     时间范围，用逗号分隔的字符串标明请求时间范围，可以是形如-1m的字符串，也可以是以毫秒为单位的UNIX时间戳                 string       ---      必填
  Query   query          SPL查询语句                                                                                                           string       ---      必填
  Query   filter_field   前置搜索字段过滤，即在搜索执行前进行过滤。每个field的name和value之间用冒号分隔，value用双引号括起来。tag、appname、   string       ---      选填
                         logtype等内置字段也可通过此参数过滤                                                                                                         
  Query   queryfilters   搜索过滤query，与filter_field类似，但是在搜索执行期间进行过滤                                                         string       ---      选填
  Query   category       自定义的任务类别，默认值为search                                                                                      string       search   选填
  Query   source_group   日志来源分组，默认值为all，表示对应用户的所有可搜索日志                                                               string       all      选填
  Query   timeline       本次搜索是否需要计算timeline                                                                                          boolean      true     选填
  Query   statsevents    本次统计是否需要计算events                                                                                            boolean      true     选填
  Query   fields         本次搜索是否需要计算左侧fields                                                                                        boolean      true     选填
  Query   Highlight      本次搜索是否需要对结果进行高亮显示                                                                                    boolean      true     选填
  ------- -------------- --------------------------------------------------------------------------------------------------------------------- ------------ -------- --------
 消耗：application/json。
 生成：application/json。
 HTTP请求示例。
请求Path代码如下：
/v1/40176fa8be6a4d409368ec504b483888/admin/spl/submit
请求 Query代码如下：
{
\"task_name\" : \"my_search_search\",
\"time_range\" : \"-10m,now\",
\"query\" : \"\* \| eval rawlen=len(raw_message) \| stats avg(rawlen) as
arl by hostname \| sort by arl \",
\"filter_field\" :
\"apache.status:\\\"200\\\"\|-\$!\|hostname:\\\"server\\\"\",
\"queryfilters\" : \"clientip:192.168.\* OR (logtype:apache AND
apache.status:200)\",
\"category\" : \"search\",
\"source_group\" : \"all\",
\"timeline\" : true,
\"statsevents\" : true,
\"fields\" : true,
\"highlight\" : true
}
 HTTP响应示例如下：
{
\"error\" : \" \",
\"rc\" : 123,
\"sid\" : \"xxx941b476f940ade0e22e38bdaab5dfc0a80148\"
}
## 10.2 日志App
### 10.2.1 日志App 概述
日志App又称日志分析模型，即将一个或者多个具有关联关系的日志分析过程封装成固定模型，该模型中包含日志采集配置、解析处理、分析场景、监控告警、统计分析等标准功能。使用者导入App即可实现对某类日志的分析，且能够实现"即插即用"的效果。日志App能大大简化日志分析的过程。
### 10.2.2 日志App的作用和特点
在日志分析工作中，相同型号或版本的网络设备、安全设备、操作系统和中间件等的日志类型和分析场景大致相同，可以按照一定规范将同类分析场景制作成日志App并保留下来。这样，数据分析人员在遇到相同的分析场景时就不需要重复进行日志分析的基础工作。日志App具有以下特点。
1."即插即用"
日志App往往由经验丰富的分析人员或领域专家设计开发，功能完备，可实现"即插即用"的效果，使用者不需要对日志有充分的了解，从而极大地降低了使用门槛，提升了日志分析便捷度。
2\. 可编辑性
在引入日志App后，使用者可根据场景需要进行调整，具有一定的可编辑性。
3\. 持续迭代
随着业务分析场景的变化，日志App会持续迭代优化。
4\. 通用性
使用日志App时无须关心日志平台的版本，即日志App具有通用性。
### 10.2.3 常见日志App类型
1\. 基础环境类日志App
基础环境类日志App是针对基础环境开发的。常见基础环境包括操作系统、数据库、中间件、虚拟机等，见表10-2。
表10-2 常见基础环境
  ------------- ------------------- -------------------------------------
  序 号         类 型               品牌或分类
  1             操作系统            Windows
                                    AIX
                                    Linux
  2             数据库              Informix
                                    MongoDB
                                    MySQL
                                    PostgreSQL
                                    Redis
                                    Oracle
  3             中间件              IBM
                                    IIS
                                    Tomcat
                                    Apache
  ------------- ------------------- -------------------------------------
续表
  ------------- ------------------- -------------------------------------
  序 号         类 型               品牌或分类
  3             中间件              HAProxy
                                    恒生
                                    JBoss
                                    Weblogic
                                    ZooKeeper
                                    思迪
  4             虚拟机              ESXi
                                    VMware
                                    山石
                                    神州灵云
  ------------- ------------------- -------------------------------------
2\. 安全设备类日志App
安全设备类日志App是针对安全设备开发的。常见安全设备包括防火墙、堡垒机、入侵检测系统、入侵防护系统、应用防火墙等，见表10-3。
表10-3 常见安全设备
  --------------- ---------------------- --------------------------------
  序 号           类 型                  品牌或分类
  1               防火墙                 思科
                                         PaloAlto
                                         Checkpoint
                                         戴尔
                                         飞塔
                                         华三