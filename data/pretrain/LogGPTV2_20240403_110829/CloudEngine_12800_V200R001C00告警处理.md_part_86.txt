步骤2 查看报文是否正确转发，ping对端接口IP地址。
l 如果不能ping通=>5。
l 如果能够ping通=>3。
步骤3 在邻居设备上通过display ipv6 interface命令查看OSPFv3邻居的接口是否处于Up状态。
l 接口处于Down状态=>5。
l 接口Up=>4。
步骤4 通过display ospfv3 interface命令，查看两端配置是否正确。
l Y=>6。
l N=>5。
步骤5 请收集告警信息、日志信息和配置信息，并联系技术支持人员。
步骤6 结束。
----结束
44.2 OSPFV3_1.3.6.1.2.1.191.0.4 ifconfigerror
Trap Buffer 信息解释
A packet is received on the non-virtual interface from a router whose configuration conflicts
with the local configuration. (RouterId=[RouterId], IfIndex=[IfIndex], IfInstId=[IfInstId],
IfState=[IfState], PacketSrc=[PacketSrc], ConfigErrorType=[ConfigErrorType],
PacketType=[PacketType])
OSPFv3建立邻居的接口配置不一致，可能是由于Hello、Dead、Poll定时器配置不一致
或接口没有配置在一个区域。
文档版本 06 (2017-09-12) 华为专有和保密信息 686
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 44 OSPFV3
Trap 属性
Trap属性 描述
Alarm or Event Event
Trap Severity Error
Mnemonic Code ifconfigerror
Trap OID 1.3.6.1.2.1.191.0.4
Alarm ID 该Trap是事件Trap，不涉及告警ID。
Alarm Type 该Trap是事件Trap，不涉及告警类型。
Raise or Clear 该Trap是事件Trap，不涉及告警产生或恢复。
Match trap 该Trap是事件Trap，不涉及配对Trap。
Trap Buffer 信息参数
参数名称 参数含义
RouterId 路由器标识。
IfnetIndex 接口索引。
NbrIfInstId 邻居接口ID。
NbrRtrId 邻居路由器标识。
NbrState 邻居状态。
l 1: Down
l 2: Attempt
l 3: Init
l 4: 2-Way
l 5: ExStart
l 6: Exchange
l 7: Loading
l 8: Full
SubReason 详细原因。
文档版本 06 (2017-09-12) 华为专有和保密信息 687
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 44 OSPFV3
参数名称 参数含义
Reason 邻居状态变化的原因：
l 1：adjacencyHoldTimerExpired，表示
邻接交换机的定时器超时。
l 2：physicalInterfaceChange，表示交换
机的物理接口状态发生变化。
l 3：ospfProtocolReason，表示OSPF协
议原因导致告警。
l 4：bfdSessionStateChange，表示BFD
会话断开。
l 5：configureChange，表示OSPF配置
发生了变化。
l 6：peerRouterReason，表示邻居交换
机原因导致告警。
l 100：alarmCleared，表示业务恢复或
邻居被删除，告警清除。
VB 信息参数
VB OID VB Name VB Index
1.3.6.1.2.1.191.1.1.1 ospfv3RouterId N/A
1.3.6.1.2.1.191.1.7.1.12 ospfv3IfState ospfv3IfIndex;
ospfv3IfInstId;
1.3.6.1.2.1.191.1.14.3 ospfv3PacketSrc N/A
1.3.6.1.2.1.191.1.14.2 ospfv3PacketType N/A
1.3.6.1.2.1.191.1.14.1 ospfv3ConfigErrorType N/A
对系统的影响
这个告警在接口收到配置参数错误报文时会发送。这样的配置错误一般都是在开局测
试或割接时产生，将参数调整正确就没有问题，一般不会影响业务。
可能原因
原因1：人为造成接口参数配置不一致。
原因2：链路层协议发生变化。
处理步骤
步骤1 使用display ospfv3 interface查看两端配置是否不一致。
文档版本 06 (2017-09-12) 华为专有和保密信息 688
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 44 OSPFV3
l 如果一致，则请执行步骤3。
l 如果不一致，则请执行步骤2。
步骤2 根据组网情况，进行如下操作。
l 如果允许将两端配置修改为一致，则参照配置指南，将两端的hello、dead、poll等
定时器参数改为一致，检查告警是否消除。
– 如果告警消除，则请执行步骤4。
– 如果告警还存在，则请执行步骤3。
l 不允许将两端配置修改为一致，则请执行步骤3。
步骤3 请收集告警信息、日志信息和配置信息，并联系技术支持人员。
步骤4 结束。
----结束
44.3 OSPFV3_1.3.6.1.2.1.191.0.6 ifrxbadpacket
Trap Buffer 信息解释
An OSPFV3 packet that is received on a non-virtual interface cannot be parsed.
(RouterId=[RouterId], IfIndex=[IfIndex], IfInstId=[IfInstId], IfState=[IfState],
PacketSrc=[PacketSrc], PacketType=[PacketType])
从非虚连接接口收到一个不能解析的OSPFv3报文，可能是由于受到攻击或与非华为设
备对接不成功。
Trap 属性
Trap属性 描述
Alarm or Event Event
Trap Severity Error
Mnemonic Code ifrxbadpacket
Trap OID 1.3.6.1.2.1.191.0.6
Alarm ID 该Trap是事件Trap，不涉及告警ID。
Alarm Type 该Trap是事件Trap，不涉及告警类型。
Raise or Clear 该Trap是事件Trap，不涉及告警产生或恢复。
Match trap 该Trap是事件Trap，不涉及配对Trap。
文档版本 06 (2017-09-12) 华为专有和保密信息 689
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 44 OSPFV3
Trap Buffer 信息参数
参数名称 参数含义
RouterId 路由器标识。
IfIndex 接口索引。
IfInstId 接口实例ID。
IfState 接口状态。
l 1：Down
l 2：Attempt
l 3：Init
l 4：2–Way
l 5：Exstart
l 6：Exchange
l 7：Loading
l 8：Full
PacketSrc 报文源地址。
PacketType 报文类型。
l 1: Hello
l 2: DD(Data base Description) packet
l 3: LS Request
l 4: LS Update
l 5: LS Acknowledgement
l 6: NULL packet
VB 信息参数
VB OID VB Name VB Index
1.3.6.1.2.1.191.1.1.1 ospfv3RouterId N/A
1.3.6.1.2.1.191.1.7.1.12 ospfv3IfState ospfv3IfIndex;
ospfv3IfInstId;
1.3.6.1.2.1.191.1.14.3 ospfv3PacketSrc N/A
1.3.6.1.2.1.191.1.14.2 ospfv3PacketType N/A
对系统的影响
普通接口收到无法处理的错误报文时会产生这个告警，会丢掉这个报文，可能造成邻
居Down。
文档版本 06 (2017-09-12) 华为专有和保密信息 690
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 44 OSPFV3
可能原因
另一端的非虚连接接口产生了错误的报文。
处理步骤
步骤1 在诊断视图下使用display ospfv3 error packet查看错误报文内容，出现该告警表明收到
了无法解析的报文，保存该错误报文信息。
步骤2 请收集告警信息、日志信息和配置信息，并联系技术支持人员。
步骤3 结束。
----结束
44.4 OSPFV3_1.3.6.1.2.1.191.0.10 ifstatechange
Trap Buffer 信息解释
The status of the non-virtual interface has changed. (RouterId=[RouterId], IfIndex=[IfIndex],
IfInstId=[IfInstId], IfState=[IfState], InterfaceName=[InterfaceName],
ChgReason=[ChgReason])
从非虚连接接口收到一个不能解析的OSPFv3报文，可能是由于受到攻击或与非华为设
备对接不成功。
Trap 属性
Trap属性 描述
Alarm or Event Event
Trap Severity Warning
Mnemonic Code ifstatechange
Trap OID 1.3.6.1.2.1.191.0.10
Alarm ID 该Trap是事件Trap，不涉及告警ID。
Alarm Type 该Trap是事件Trap，不涉及告警类型。
Raise or Clear 该Trap是事件Trap，不涉及告警产生或恢复。
Match trap 该Trap是事件Trap，不涉及配对Trap。
Trap Buffer 信息参数
参数名称 参数含义
RouterId 路由器标识。
IfIndex 接口索引。
文档版本 06 (2017-09-12) 华为专有和保密信息 691
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 44 OSPFV3
参数名称 参数含义
IfInstId 接口实例ID。
IfState 接口状态。
l 1：Down
l 2：Attempt
l 3：Init
l 4：2–Way
l 5：Exstart
l 6：Exchange
l 7：Loading
l 8：Full
InterfaceName 接口名称。
ChgReason 接口状态变化原因。
VB 信息参数
VB OID VB Name VB Index
1.3.6.1.2.1.191.1.1.1 ospfv3RouterId N/A
1.3.6.1.2.1.191.1.7.1.12 ospfv3IfState ospfv3IfIndex;
ospfv3IfInstId;
对系统的影响
该告警在普通接口状态上升到Full状态，或者状态下降都会发送。该告警可能会对邻居
状态有影响，如果是接口状态下降，例如接口变为Down状态，将会导致邻居关系中
断。
可能原因
原因1：物理接口状态变为Down。
原因2：OSPFv3邻居正在建立。
处理步骤
步骤1 使用display ospfv3 interface查看当前接口是否up。
l 如果是，则请执行步骤3。
l 如果不是，则请执行步骤2。
步骤2 请收集告警信息、日志信息和配置信息，并联系技术支持人员。
文档版本 06 (2017-09-12) 华为专有和保密信息 692
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 44 OSPFV3
步骤3 结束。
----结束
44.5 OSPFV3_1.3.6.1.2.1.191.0.13
nbrrestarthelperstatuschange
Trap Buffer 信息解释
The neighbor exits from the restart helper state. (RouterId=[RouterId],
NbrIfIndex=[NbrIfIndex], NbrIfInstId=[NbrIfInstId], NbrRtrId=[NbrRtrId],
NbrRestartHelperStatus=[NbrRestartHelperStatus],
NbrRestartHelperAge=[NbrRestartHelperAge],
NbrRestartHelperExitReason=[NbrRestartHelperExitReason])
表示OSPFv3邻居平滑重启协助状态改变。
Trap 属性
Trap属性 描述
Alarm or Event Event
Trap Severity Warning
Mnemonic Code nbrrestarthelperstatuschange
Trap OID 1.3.6.1.2.1.191.0.13
Alarm ID 该Trap是事件Trap，不涉及告警ID。
Alarm Type 该Trap是事件Trap，不涉及告警类型。
Raise or Clear 该Trap是事件Trap，不涉及告警产生或恢复。
Match trap 该Trap是事件Trap，不涉及配对Trap。
Trap Buffer 信息参数
参数名称 参数含义
RouterId 路由器标识。
NbrIfIndex 邻居接口索引。
NbrIfInstId 邻居实例ID。
NbrRtrId 邻居路由器标识。
NbrRestartHelperStatus 邻居helper状态。
NbrRestartHelperAge 邻居helper的剩余时间。
文档版本 06 (2017-09-12) 华为专有和保密信息 693
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 44 OSPFV3
参数名称 参数含义
NbrRestartHelperExitReason 邻居退出helper原因。
l 1: None
l 2: In progress
l 3: Completed
l 4: Time out
l 5: Topology change
VB 信息参数
VB OID VB Name VB Index
1.3.6.1.2.1.191.1.1.1 ospfv3RouterId N/A
1.3.6.1.2.1.191.1.9.1.13 ospfv3NbrRestartHelperStat ospfv3NbrIfIndex;
us
ospfv3NbrIfInstId;