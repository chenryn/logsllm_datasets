title:Program popularity and viewer behaviour in a large TV-on-demand system
author:Henrik Abrahamsson and
Mattias Nordmark
Program Popularity and Viewer Behaviour in a Large
TV-on-Demand System
Henrik Abrahamsson
Swedish Institute of Computer Science
Box 1263, Kista, Sweden
PI:EMAIL
Mattias Nordmark
TeliaSonera AB
Stockholm, Sweden
PI:EMAIL
ABSTRACT
Today increasingly large volumes of TV and video are dis-
tributed over IP-networks and over the Internet. It is there-
fore essential for traﬃc and cache management to under-
stand TV program popularity and access patterns in real
networks.
In this paper we study access patterns in a large TV-on-
Demand system over four months. We study user behaviour
and program popularity and its impact on caching.
The demand varies a lot in daily and weekly cycles. There
are large peaks in demand, especially on Friday and Satur-
day evenings, that need to be handled.
We see that the cacheability, the share of requests that
are not ﬁrst-time requests, is very high. Furthermore, there
is a small set of programs that account for a large fraction of
the requests. We also ﬁnd that the share of requests for the
top most popular programs grows during prime time, and
the change rate among them decreases. This is important
for caching. The cache hit ratio increases during prime time
when the demand is the highest, and caching makes the
biggest diﬀerence when it matters most.
We also study the popularity (in terms of number of re-
quests and rank) of individual programs and how that changes
over time. Also, we see that the type of programs oﬀered
determines what the access pattern will look like.
Categories and Subject Descriptors
C.4 [Computer Systems Organization]: Performance
of Systems; C.2.3 [Computer Systems Organization]:
Computer-Communication Networks—Network Operations
General Terms
Measurement, Performance
Keywords
IPTV, TV-on-Demand, Program Popularity
Permission to make digital or hard copies of all or part of this work for
personal or classroom use is granted without fee provided that copies are
not made or distributed for proﬁt or commercial advantage and that copies
bear this notice and the full citation on the ﬁrst page. To copy otherwise, to
republish, to post on servers or to redistribute to lists, requires prior speciﬁc
permission and/or a fee.
IMC’12, November 14–16, 2012, Boston, Massachusetts, USA.
Copyright 2012 ACM 978-1-4503-1705-4/12/11 ...$15.00.
1.
INTRODUCTION
Today increasingly large volumes of TV and video are dis-
tributed over IP-networks and over the Internet. Many tele-
com and broadband companies have become TV operators
and distribute TV channels using IP multicast in their net-
works. The TV services also evolve, and are more and more
changing towards TV-on-Demand and time-shifted viewing
where the users can choose to watch the programs after its
scheduled time. Distributing individual TV streams to each
viewer requires a lot of bandwidth and server capacity. How
to best use caching of popular content closer to the viewers
is therefore an important issue to reduce network load.
In this paper we study access patterns in a large TV-on-
Demand system over four months. We study user behaviour
and program popularity and its impact on caching.
There are several studies of viewing behaviour in IPTV
systems where traditional scheduled TV is distributed over
IP networks [8], [17], [18]. This include studies of TV chan-
nel popularity and channel switching. Our work is diﬀerent
in that we look at TV-on-Demand where the viewers choose
programs to watch outside of the TV schedule. The pro-
grams are not distributed using multicast but transferred
with unicast streams to the viewers.
In this sense our work is closer to studies of content access
patterns in traditional Video-on-Demand systems (VoD) [26].
But TV-on-Demand is diﬀerent from traditional VoD in sev-
eral ways. The TV-on-Demand service is more diverse. It is
a mix of TV program libraries, time-shifted viewing, and
rental video. Time-shifted viewing here means that the
viewer can choose to watch ongoing scheduled TV-programs
from the beginning. The TV schedule gives a large inﬂow of
new programs each day. The programs available also come
from a wide range of TV channels. There is a large vari-
ation in program types (news, drama, children’s programs,
movies, etc.) which each can have diﬀerent access patterns.
Many programs, like news and weather forecasts, also have
a very short lifespan and are typically only interesting for a
few hours.
The two main contributions of this paper are: (1) an in-
vestigation of program popularity and access patterns for
TV and video on demand in a real network, (2) a trace-
based study of caching. We characterize access patterns for
diﬀerent program categories, we show how program popular-
ity changes over time and how this diﬀers between diﬀerent
program types. We then use the request sequence in our
data set for trace-driven simulation and study cache hit ra-
tios for diﬀerent cache sizes, cache replacement policies and
population sizes.
199Table 1: The data set in ﬁgures
Requests Clients Programs
10294948
Total (over 125 days)
Daily median
Daily max
Daily min
80174
121053
56720
Our main results are:
307347
30232
42451
22194
89889
7523
8751
6316
• The popularity (ranking) of rental movies, news, and
TV shows changes over time in very diﬀerent ways.
News programs are often only requested for a few hours,
movies are popular for months and increase in rank
during weekends, TV shows increase in rank when
the next episode is shown, children’s programs are top
ranked in the mornings and early evenings. This means
that programs jumps in and out of the top 100 list. It
also means that the type of content oﬀered is essential
for what the access pattern will look like.
• The program popularity conforms with the Pareto prin-
ciple, or 80-20 rule. There is a small set of programs
that account for a large fraction of the requests: the
2% most popular programs get 48% of the requests,
and the 20% most popular programs get 84% of the
requests.
• The share of requests for the top 100 most popular
programs increases during prime time and the change
among the top 100 decreases during prime time and
during weekends when the demand is the highest.
• The cacheability is very high. The hit ratio with LRU
is above 50% when caching 5% of the average daily
demand, and the hit ratio increases during prime time
when it is needed most.
The rest of the paper is structured as follows: In Section 2
we describe the TV-on-Demand service and introduce the
data set.
In Section 3 we study access patterns and the
daily and hourly change in user interest.
In Section 4 we
look at the program popularity in more detail, how the ac-
cess patterns diﬀers between diﬀerent program categories,
and how the popularity of individual programs changes over
time. In Section 5 we show what impact the access patterns
has on cacheability and cache hit ratios. Related work is in
Section 6, we discuss future work in Section 7 and conclude
the paper in Section 8.
2. THE DATA SET
We study logs from the TeliaSonera TV-on-Demand ser-
vice. The program selection is a mix from a wide range of TV
channels (news, drama, children’s programs, movies, etc.).
It is a mix of TV program libraries, time-shifted viewing,
and rental video.
The TeliaSonera TV service also includes multicast dis-
tribution of traditional scheduled TV. Here we only study
logs of on-demand requests but the TV schedule with many
ongoing channels gives a constant inﬂow of new programs
that become available for on-demand requests. In our data
set, on average 8% of the programs each day have not been
requested before.
The data set is a mysql database with logs from RTSP
sessions where we for each session have:
.
The timestamp shows when the session ended and by sub-
tracting the length of the session we get the time when the
request arrived. The AssetID identiﬁes what TV program
is requested. For each asset, we also have additional out-of-
band information about providers and program descriptions
that help us categorize the programs into genres.
The data set is summarized in Table 1. It contains TV-
on-Demand requests over 125 days between May 12th and
September 13th 2011. During this period almost 90000 dif-
ferent programs were requested. The data set includes more
than 300000 clients making more than ten million requests.
Figure 1 shows the number of requests, viewers, and pro-
grams per day. There are distinct weekly cycles where the
120000
80000
40000
0
Requests, clients and programs per day, 12/5−13/9
Requests
Clients
Programs
5
12 19 26 33 40 47 54 61 68 75 82 89 96 103 110 117 124
Time (days)
Figure 1: Number of requests, active clients, and distinct
programs requested per day over 125 days. The grid shows
weeks starting from Mondays.
number of active clients and the number of requests increase
a lot during the weekends.
On average more than 30000 clients are active per day of-
ten increasing up to 40000 at the weekends. Some viewers
are much more active than others and watch more TV pro-
grams. Viewers also subscribe to diﬀerent TV packages and
have access to diﬀerent number of TV channels and program
libraries. We can see that 5% of the viewers account for 41%
of the requests and 20% of the viewers account for 75% of
the requests. Figure 2 shows a log-log-plot of the number
of requests per viewer. While many clients only watch a
few on-demand programs per month, the most active viewer
had more than 137 requests per day on average. Some of
these sessions were 5-30 minutes long but many where short,
jumping between diﬀerent on-demand programs.
The clients in the data set are all in the same time zone
and in the same geographical region. Later in Section 5,
when looking at caching, we will also study smaller subsets
of the population. We have one geographically close subset
with 23304 clients in the same town. For the smaller popu-
lations in the study we randomly chose clients and include
into sets of diﬀerent size up to 10000. We will use the labels
region (307347), town (23304), rand10000, rand1000 etc. for
the diﬀerent populations.
On average 7523 diﬀerent programs are requested per day.
As expected, some programs are much more popular than
200 Requests per client 12/5−13/9
Number of requests per hour, 19/5−25/5.
5
10
4
10
3
10
2
10
1
10
s
t
s
e
u
q
e
r
f
o
r
e
b
m
u
N
s
t
s
e
u
q
e
r
#
18000
16000
14000
12000
10000
8000
6000
4000
2000
0
All programs
Top 100 most popular programs
Top 10 most popular programs
Thu
Fri
Sat
Sun
Mon
Tue
Wed
Time (hours)
Figure 3: Number of requests per hour during a week. The
grid points out the hours between 11:00-12:00 and 23:00-
00:00 each day.
and so a hundred programs constitute a smaller share of the
requested program volume. But even so the top 100’s share
of requests increase signiﬁcantly.
3.2 Daily and hourly change in user interest
Which programs are most popular change over time. On
average 6 of the top 10 programs are replaced each day.
Figure 5a shows the daily change among the top 100 and
top 1000 most requested programs. Here we also see the
daily change among all requested programs. On average
73% of the requested programs are the same as yesterday.
On average 56% of the top 100 and 42% of the top 1000 is
diﬀerent from the day before.
We notice in Figure 5a a weekly pattern with less change
in top 100 during weekends (from Fridays to Saturdays and
Saturdays to Sundays). This suggests that what the most
Top 100 programs per hour: share of requests and programs, 19/5−25/5
Top 100 programs: share of requests
100/(number of distinct programs requested)
Increase during prime time
Thu
Fri
Sat
Sun
Mon
Tue
Wed
Time (hours)
s
t
s
e
u
q
e
r
f
o
e
r
a
h
S
1
0.8
0.6
0.4
0.2
0
Figure 4: The ﬁgure shows the share of requests per hour
that the top 100 most popular programs account for.
It
also shows the share of programs requested that a hundred
programs comprises. The top 100’s share of requests in-
creases during night when few programs are requested but
more interestingly it also increases during prime time when
the demand is the highest. The grid points out the hours
between 11:00-12:00 and 23:00-00:00 each day.
0
10
0
10
1
10
2
10
3
10
Client ranking
4
10
5
10
Figure 2: Log-log plot of requests per client over 125 days.
Table 2: The week 19-25/5 in ﬁgures
Total (over 7 days)
Daily median
Hourly median
Hourly max
Hourly min
186
Requests Clients Programs
585147
76931
2626
16037
105698
31542
1723
9019
131
14067
6813
1190
2987
128
others. On average the top 10 programs each day get 11%
of the requests, the top 100 get 35%, and the top 1000 ac-
count for 71% of the requests. We will look at the program
popularity in more detail in Sections 3 and 4.
3. ACCESS PATTERNS
3.1 Access pattern over a week
Figure 3 shows the number of requests per hour during
one week from Thursday to Wednesday.
We can see here in detail the typical daily and weekly
variation in demand. There are large, predictable peaks in
demand in the evenings. The number of requests are often
four times higher or more during the peak hour compared
to the average demand during daytime. As expected, the
number of requests are the highest on Friday and Saturday
evening. The demand during daytime also increases during
weekends.
The number of distinct programs requested per hour fol-
lows a similar pattern to that of the demand but the peaks
are not as pronounced. The number of diﬀerent programs re-
quested often doubles in the evenings compared to daytime.
In this particular week the median number of programs re-
quested per hour was 1190, the hourly maximum was 2987
programs (Saturday 21:00-22:00) and the minimum was 128
programs (Wednesday 04:00-05:00).
The bar plot in Figure 3 also shows the number of requests
for the top 10 and top 100 most popular programs each
hour. Figure 4 shows the share of requests per hour that
the top 100 most popular programs account for. On an
hourly basis the top 100 on average get 50% of the requests.
The top 100 obviously have a large part of the traﬃc during
night when not much more than 100 programs are requested.
But more interestingly the top 100’s share of requests also
increase signiﬁcantly during prime time. The number of
diﬀerent programs requested increases during the evenings
201Change per day among top 100, top 1000 and all programs, 13/5−13/9.
Change per hour among top 100 and all requested programs, 19/5−25/5
1
0.8
0.6
0.4
0.2
s
m
a
r
g
o
r
p
d
e
c
a
p
e
r
f
l
o
n
o
i
t
c
a
r