twospecificgeographicallocations.Thispromptedengineerstoinvestigateinthisdirectionand
fixtheissuetimely.Anactionableinsightbasedon{servicetype,buildversion}⇒failureismarked
bythetriangleinFigure5.
Latencyisnotdiscretewhencomparedtoerrors,henceweneedtofirstbucketizelatencyvalues
intoafinitenumberofintervals,e.g.acceptableandnon-acceptablelatencies.Theframeworkthen
identifiesthecombinationsoffeatureswhererequestshavenon-acceptablelatencies.Bytuning
thebucketingthresholdweobtainedinsightfulcorrelationsbasedonthefeaturesoftheservice
requests,whichareusedtooptimizetheperformanceofthesystems.
5.3 FailedAuto-Remediations
We deployed the fast dimensional analysis framework on the logs from an auto-remediation
system[16,17,24]toquicklyidentifyattributesoftheremediationjobsthatwouldleadtodifferent
typesofexceptions,andreportthecorrelationstoavisualizationdashboardthatengineersuse
everydayformonitoringsystemhealth.Foranalyzingthecorrelationsinauto-remediationjobs,
Proc.ACMMeas.Anal.Comput.Syst.,Vol.4,No.2,Article31.Publicationdate:June2020.
31:20 Lin,etal.
weprepareabout20serverattributesmentionedabove,andjointhemwithsomebasicinformation
oftheremediationjobssuchasfailuremode,remediationname,andowneroftheremediation.
Differentfromthepreviousexample,whereserverrebootswouldeithersucceedorfail,the
auto-remediationjobscouldendupindifferentstates.Inadditiontosuccessfullyfixingtheissue,
remediationjobscouldendupasrepair,i.e.thehardwarefailureneedsaphysicalrepair,escalate,i.e.
thefailureneedstobeescalatedtohumanevenbeforethesystemcreatesarepairticketforit,rate
limitedandretry,i.e.theremediationistemporarilysuspendedbecausetherearetoomanyservers
goingthroughremediationatthetime,andexception,i.e.thejobencounterssomeexceptionand
couldnotfinish.
Astheauto-remediationsystemserveshundredsofdifferentremediationsforacomplexsetof
failuretypes,therearetypicallyfailedremediations,i.e.escalatesandexceptions,inproduction.The
problemformulationhereishencedifferent.Insteadoffindingcorrelationstoasingleissue,aswe
didinrootcausingthefailedrebootsinthepreviousexample,hereweexplorestrongcorrelations
amongthemanytypesoffailuresthatareconstantlyhappening.Sincetheauto-remediationsystem
iscentralizedandprocessestheremediationoftheentirewholeofmachines,asmallportionofthe
overallremediationsmaymeanthemajorityforasmallservice,andtheservicemayactuallyhave
largeimpacttotheentireserviceinfrastructure.Therefore,inthissetupwechoseamuchsmaller
thresholdonsupport,andreportallhigh-liftcorrelationstoserviceownersforinvestigation.With
thissetup,wehavebeenabletoidentifystrongcorrelationssuchas{kernelversion,service}⇒
exceptionand{servicetype,remediationname}⇒escalate,whichhelpedengineersquicklyidentify
andfixproblemsinthesystems.
Thenumberofassociationrulesreportedatdifferentmin-liftvaluesisplottedinFigure7,where
atargetrulementionedabove,{servicetype,remediationname}⇒escalate,isfoundwhenmin-lift
is≤ 270000,markedbythetriangle.
60
selur
noitaicossa
40
20 fo
rebmuN
0
50000 100000 150000 200000 250000 300000 350000
Min-lift
Fig.7. Numberofassociationrulesatdifferentmin-liftthresholdsbasedontheauto-remediationdataset.
Thetrianglemarkswhenatargetruleappearsintheusecase.
5.4 SSHLogs
WedeployedthefastdimensionalanalysisframeworkonadatasetcontaininglogsforSSHconnec-
tionstoidentifywhatcausessomeoftheconnectionstofail.Wepassedanumberofattributes
fromthisdataset,suchasthesourceservertype,destinationservertype,andSSHmethod,inorder
tofindoutrootcauseconnectionfailures.Thereportisexportedtoadashboardfortheengineers
tocontinuouslymonitorthecorrelatedrules,andtoquicklyidentifyandfixanomalousbehaviors.
Proc.ACMMeas.Anal.Comput.Syst.,Vol.4,No.2,Article31.Publicationdate:June2020.
FastDimensionalAnalysisforRootCauseInvestigation 31:21
Figure8showsthenumberofassociationrulesreportedfordifferentmin-liftvalues.Anactionable
rule{service,geographicallocation,SSHmethod}⇒sessionfailureappearswhenmin-liftbecomes
lowerthanapproximately88000.Notethateventhoughthesupportofthisruleisonly0.1,this
ruleisstillveryactionablebecausethedatasetiscomplexandcontainsmultipletypesoffailures
at the same time. In other words, this example demonstrates how low-support rules can help
uscontinuouslyimprovethesystemaslongastheliftishigh,whenourgoalisnotlimitedto
investigatinganurgent,majorissueintheapplication.
15
selur
noitaicossa
10
5 fo
rebmuN
0
20000 40000 60000 80000 100000
Min-lift
Fig.8. Numberofassociationrulesatdifferentmin-liftthresholdsbasedontheSSHdataset.Thetriangle
markswhenatargetruleappearsintheusecase.
6 CONCLUSIONSANDFUTUREWORKS
Inthispaperwehaveexploredtheproblemofrootcauseanalysisonstructuredlogsandwehave
presentedourscalableapproachbasedonfrequentitem-setmining.Wehavealsodiscussedakey
changetosupport andmotivationforlift,whichareimportantfrequentitem-setmetricsforour
usecase.Furthermore,wepresentedvariousoptimizationstothecoreAprioriandFP-Growth
frequentitem-setalgorithmsincludingparallelismandpre-andpost-processingmethods.Toour
knowledge,thisisthefirstworkthatutilizesfrequentitem-setparadigmatthescaleofalarge
internetcompanyforrootcauseanalysisonstructuredlogs.
InadditiontotheusecasesdescribedinSection5,weareexploringtheuseoftheRCAframework
onfree-formtextreports.ToutilizeRCAtosurfacefeaturesfordifferenttopics,thetextreportsfirst
needtobelabeledwithtopics.Bothsupervised[31]andunsupervisedmethods[7]canbeapplied
forlabelingthetopics.Anadvantageofsupervisedmodelisthatwecaneasilymeasurethequality
of the inference and the topics are interpretable; however, it requires labeled data for training.
Unsupervisedapproachdoesnotrequirelabeleddatabutthetopicsareoftenlessinterpretable,e.g.
eachtopicisoftenrepresentedbytopkeywords[26]anditisunclearhowtomeasurethequality
ofthetopicinferencebecausethereisnogroundtruth.
Giventhetopiclabels,wecanapplyRCAonthetextreports.Asaresult,RCAcoulddetect
significantfeaturesrelevanttothelabeledtopicsinthetextcorpus.Forexample,“reinforcement
learning”and“speechrecognition“topicswereextractedfromacorpusofNIPSresearchpapers
[26]andpotentiallywecansurfacesomefeatures(e.g.publishyear)relevanttothetopics.Thisis
veryusefulforhumansasitprovidesstartingpointsforfurtherinvestigation(e.g.whyareasetof
featuresprevalentwithinaspecifictopic?).
Aspartofourfutureworkweaimtofocusontemporalanalysisandongatheringmorecontinu-
ousfeedback.Specifically,fortemporalanalysis,weareworkingonunderstandingthetrendof
Proc.ACMMeas.Anal.Comput.Syst.,Vol.4,No.2,Article31.Publicationdate:June2020.
31:22 Lin,etal.
Text Reports
Supervised NLP Model
forTopic Classification
Text Reports with Topic Labels
FDA
Fig.9. FlowofRCAontext-basedreports.
associationrulesseenovertimetodiscoverseasonalityandlonger-termtrendsinordertocatch
degradationofservicesorhardwarefailuresquicker.Toovercomethelackoflabels,wewillfocus
oncontinuousfeedbackbyleveragingourproductionsystemtounderstandwhichfindingsare
moreorlessrelevanttoengineersinordertolearnwhichfindingstopromoteandwhichfindings
needtobehidden.
A AUTHORRESPONSEFORONE-SHOTREVISION
Authorsneedtocomparetheirworkwithothersimilartechniques,andwouldbenefitfromamore
rigorouscomparisonwithstate-of-the-artstechniques.Provideastrongerrelatedworksectionand
betterevaluationoftheirworkinthecontextofrootcauseanalysisand,moreingeneral,datamining.
Theauthorsaddresstheaboverequirementsasfollows.
• Arigorousdiscussionaboutthestate-of-the-artRCAworkisaddedinSection2.3,wherewe
pointoutthefundamentaldifferencesbetweenourproposedworkandtherestofthepapers.
AcomparisonwiththeSTUCCOalgorithmisalsoaddedtoSection3.7.
• Section4.1.1isaddedtodemonstratehowouruniquedatapre-aggregationstepisnecessary
forenablinganRCAframeworkatourscale.
• WemadeclearerreferencesinSection4toshowhowtheexperimentalresultswepresent
compareourframeworkwiththeotherrelatedworks.
• WeincludedH andH inthefilteringcriteriainSection3.6todemonstratehowwe
supp lift
tunethecriteriawiththetolerancemultipliersinpractice.Thisfurtherexplainstheeffort
neededtodeploytheframeworkinproduction.
• Wefixedafewformattingissuesinthereferences(someofthemareonlineresources,for
whichURLsareprovided).
REFERENCES
[1] LiorAbraham,JohnAllen,OleksandrBarykin,VinayakBorkar,BhuwanChopra,CiprianGerea,DanMerl,Josh
Metzler,DavidReiss,SubbuSubramanian,JanetWiener,andOkayZed.2013.Scuba:DivingintoDataatFacebook.In
InternationalConferenceonVeryLargeDataBases(VLDB).
[2] R.Agrawal,T.Imielinski,andA.Swami.1993.Miningassociationrulesbetweensetsofitemsinlargedatabases.In
ACMSIGMODInternationalConferenceonManagementofData.
[3] DeaDelviaArifin,Shaufiah,andMoch.ArifBijaksana.2016. EnhancingspamdetectiononmobilephoneShort
MessageService(SMS)performanceusingFP-growthandNaiveBayesClassifier.InIEEEAsiaPacificConferenceon
WirelessandMobile(APWiMob).
[4] S.D.BayandM.J.Pazzani.1999.Detectingchangeincategoricaldata:miningcontrastsets.InACMSIGKDDInternational
ConferenceonKnowledgeDiscoveryandDataMining.
Proc.ACMMeas.Anal.Comput.Syst.,Vol.4,No.2,Article31.Publicationdate:June2020.
FastDimensionalAnalysisforRootCauseInvestigation 31:23
[5] S.D.BayandM.J.Pazzani.2001. Detectinggroupdifferences:miningcontrastsets. DataMiningandKnowledge
Discovery5,3(2001).
[6] RanM.Bittmann,PhilippeNemery,XingtianShi,MichaelKemelmakher,andMengjiaoWang.2018.FrequentItem-set
MiningwithoutUbiquitousItems.InarXiv:1803.11105[cs.DS].
[7] DavidMBlei,AndrewYNg,andMichaelIJordan.2003. Latentdirichletallocation. JournalofmachineLearning
research3(Jan2003),993–1022.
[8] DhrubaBorthakur.2019.HDFSArchitectureGuide. https://hadoop.apache.org/docs/r1.2.1/hdfs_design.html
[9] EricBoutin,JaliyaEkanayake,WeiLin,BingShi,,JingrenZhou,ZhengpingQian,MingWu,,andLidongZhou.2014.
Apollo:ScalableandCoordinatedSchedulingforCloud-ScaleComputing.InUSENIXSymposiumonOperatingSystems
DesignandImplementation.
[10] SergeyBrin,RajeevMotwani,JeffreyD.Ullman,andShalomTsur.1997.Dynamicitemsetcountingandimplication
rulesformarketbasketdata.InACMSIGMODInternationalConferenceonManagementofData.
[11] MarcoCastelluccio,CarloSansone,LuisaVerdoliva,andGiovanniPoggi.2017.Automaticallyanalyzinggroupsof
crashesforfindingcorrelations.InESEC/FSEJointMeetingonFoundationsofSoftwareEngineering.
[12] AlbertGreenberg,JamesHamilton,DavidA.Maltz,andParveenPatel.2009.TheCostofaCloud:ResearchProblems
inDataCenterNetworks.InACMSIGCOMMComputerCommunicationReview.
[13] JiaweiHan,JianPei,,andYiwenYin.2000.MiningFrequentPatternsWithoutCandidateGeneration.InACMSIGMOD
InternationalConferenceonManagementofData.
[14] DavidHarrisandSarahHarris.2012.Digitaldesignandcomputerarchitecture(seconded.).MorganKaufmann.
[15] BenjaminHindman,AndyKonwinski,MateiZaharia,AliGhodsi,AnthonyD.Joseph,RandyKatz,ScottShenker,and
IonStoica.2011.Mesos:APlatformforFine-GrainedResourceSharingintheDataCenter.InUSENIXconferenceon
Networkedsystemsdesignandimplementation.
[16] M.Isard.2007.Autopilot:AutomaticDataCenterManagement.InACMSIGOPSOperatingSystemReview.
[17] Fan(Fred)Lin,MattBeadon,HarishDattatrayaDixit,GauthamVunnam,AmolDesai,andSriramSankar.2018.
HardwareRemediationAtScale.InIEEE/IFIPInternationalConferenceonDependableSystemsandNetworksWorkshops.
[18] RuilinLiu,KaiYang,YanjiaSun,TaoQuan,andJinYang.2016. Spark-basedrareassociationruleminingforbig
datasets.InIEEEInternationalConferenceonBigData(BigData).
[19] MySQL.2019.MySQLCustomer:Facebook. https://www.mysql.com/customers/view/?id=757
[20] SuriadiSuriadi,ChunOuyang,WilM.P.vanderAalst,andArthurH.M.terHofstede.2012.RootCauseAnalysiswith
EnrichedProcessLogs.InInternationalConferenceonBusinessProcessManagement,Vol.132.Springer.
[21] AshishThusoo,JoydeepSenSarma,NamitJain,ZhengShao,PrasadChakka,NingZhang,SureshAntony,andHao
LiuandRaghothamMurthy.2010. Hive-APetabyteScaleDataWarehouseUsingHadoop.InIEEEInternational
ConferenceonDataEngineering(ICDE).
[22] MartinTraverso.2013. Presto:InteractingwithpetabytesofdataatFacebook. https://www.facebook.com/notes/
facebook-engineering/presto-interacting-with-petabytes-of-data-at-facebook/10151786197628920/
[23] VinodKumarVavilapalli,ArunCMurthy,ChrisDouglas,SharadAgarwal,MahadevKonar,RobertEvans,Thomas
Graves,JasonLowe,HiteshShah,SiddharthSeth,BikasSaha,CarloCurino,OwenO’Malley,SanjayRadia,Benjamin
Reed,andEricBaldeschwieler.2013.ApacheHadoopYARN:YetAnotherResourceNegotiator.InACMSymposiumon
CloudComputing.
[24] A.Verma,L.Pedrosa,M.Korupolu,D.Oppenheimer,E.Tune,andJ.Wilkes.2015.Large-scaleClusterManagementAt
GooglewithBorg.InEuropeanConferenceonComputerSystems(EuroSys).
[25] BoweiWang,DanChen,BenyunShi,JindongZhang,YifuDuan,JingyingChen,andRuiminHu.2017.Comprehensive
AssociationRulesMiningofHealthExaminationDatawithanExtendedFP-GrowthMethod.InMobileNetworksand
Applications.
[26] XueruiWang,AndrewMcCallum,andXingWei.2007.Topicaln-grams:Phraseandtopicdiscovery,withanapplication
toinformationretrieval.InIEEEInternationalConferenceonDataMining(ICDM2007).697–702.
[27] IanH.Witten,EibeFrank,MarkA.Hall,andChristopherJ.Pal.2017.DataMining:PracticalMachineLearningTools
andTechniques(fourthed.).MorganKaufmann.
[28] Tzu-TsungWongandKuo-LungTseng.2005. Miningnegativecontrastsetsfromdatawithdiscreteattributes.In
ExpertSystemswithApplications.
[29] KennyYuandChunqiang(CQ)Tang.2019.Efficient,reliableclustermanagementatscalewithTupperware. https:
//engineering.fb.com/data-center-engineering/tupperware/
[30] XudongZhang,YuebinBai,PengFeng,WeitaoWang,ShuaiLiu,WenhaoJiang,JunfangZeng,andRuiWang.2018.
NetworkAlarmFloodPatternMiningAlgorithmBasedonMulti-dimensionalAssociation.InACMInternational
ConferenceonModeling,AnalysisandSimulationofWirelessandMobileSystems(MSWIM).
[31] XiangZhang,JunboZhao,andYannLeCun.2015.Character-levelconvolutionalnetworksfortextclassification.In
Advancesinneuralinformationprocessingsystems.649–657.
Proc.ACMMeas.Anal.Comput.Syst.,Vol.4,No.2,Article31.Publicationdate:June2020.
31:24 Lin,etal.
[32] ZhuoZhang,ChaoLi,YangyuTao,RenyuYang,HongTang,andJieXu.2014. Fuxi:aFault-TolerantResource
ManagementandJobSchedulingSystematInternetScale.InInternationalConferenceonVeryLargeDataBases(VLDB).
ReceivedJanuary2020;revisedFebruary2020;acceptedMarch2020
Proc.ACMMeas.Anal.Comput.Syst.,Vol.4,No.2,Article31.Publicationdate:June2020.