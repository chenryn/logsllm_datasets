title:Impact of Path Diversity on Multi-homed and Overlay Networks
author:Junghee Han and
Farnam Jahanian
Impact of Path Diversity on Multi-homed and Overlay Networks
Junghee Han and Farnam Jahanian
University of Michigan - Dept. EECS
1301 Beal Avenue, Ann Arbor, Michigan, 48109-2122, USA
Email: (cid:0)jungheeh, farnam(cid:1)@eecs.umich.edu
Abstract
Multi-homed and overlay networks are two widely stud-
ied approaches aimed at leveraging the inherent redun-
dancy of the Internet’s underlying routing infrastructure to
enhance end-to-end application performance and availabil-
ity. However, the effectiveness of these approaches depends
on the natural diversity of redundant paths between two
endhosts in terms of physical links, routing infrastructure,
administrative control and geographical distribution. This
paper quantitatively analyzes the impact of path diversity
on multi-homed and overlay networks and highlights sev-
eral inherent limitations of these architectures in exploit-
ing the full potential redundancy of the Internet. We based
our analysis on traceroutes and routing table data collected
from several vantage points in the Internet including: look-
ing glasses at ten major Internet Service Providers (ISPs),
RouteViews servers from twenty ISPs, and more than ﬁfty
PlanetLab nodes globally distributed across the Internet.
Our study motivates new research directions—constructing
topology-aware multi-homing and overlay networks for bet-
ter availability.
1 Introduction
The Internet is increasingly utilized as a business neces-
sity, making connectivity and network availability a criti-
cal resource. In recent years, a number of researchers have
studied Internet routing protocols in terms of end-to-end
behavior, convergence and stability [17, 13, 12, 8]. These
studies have found that although the Internet routing infras-
tructure is highly redundant, current underlying routing pro-
tocols do not fully utilize this redundancy to achieve higher
performance and availability goals. When an underlying
routing protocol is slow to react and recover from the failure
of a link or router, path failures are not transparently masked
and are visible to end hosts. For instance, several studies in-
cluding [17] observed that more than 20% of path failures
This work was supported in part by a research grant from the Defense
Advanced Research Projects Agency, monitored by the U.S. Air Force Re-
search Laboratory under Grant F30602-99-1-0527.
are not recovered within 10 minutes. Such link or router
failures may be visible because of delayed BGP conver-
gence and/or fundamental forwarding problems (e.g., for-
warding loops). BGP’s fault recovery mechanisms some-
times take many minutes before routes converge to a consis-
tent form [13, 12]. Furthermore, because current underlying
routing protocols are restricted in ﬂexibility, they lack the
ability to detour around congested bottlenecked links. For
example, BGP cannot detect performance problems such as
persistent congestion on links, which affect end-to-end per-
formance. As long as a link is live, BGP’s routing will keep
forwarding packets over the congested path.
Multi-homed and overlay networks are two widely dis-
cussed approaches [18, 16, 19, 7, 9] that utilize Internet re-
dundancy to offer better performance and availability. Both
approaches aim to provide alternate paths by exploiting
path redundancy between endhosts. Multi-homing refers
to a single network having more than one connection to
the Internet. A stub network with connections to multi-
ple providers may exhibit better performance and reliabil-
ity than one with a single connection. Consider a situation
where the customer is connected to both ISP1 and ISP2. If
the ISP1-Customer link experiences congestion or failure,
the trafﬁc can be routed to go through the other link, the
ISP2-customer link. Several commercial systems including
Radware [18], netVmg [16], and RouteScience [19] attempt
to provide enhanced availability or performance by leverag-
ing the concept of multi-homing. These solutions are de-
ployed in front of a multi-homed site, and they attempt to
manage the site’s redundant connections to its upstream ser-
vice providers.
Other research projects such as RON [7] and Detour [9]
leverage the topological redundancy of the Internet by con-
structing overlay networks to deliver better reliability and/or
performance. An overlay network instantiates a virtual net-
work on top of a physical network by deploying a set of
overlay nodes above the existing IP routing infrastructure.
Overlay nodes cooperate with each other to route packets
on behalf of any pair of communicating nodes, forming an
overlay network. If the underlying topology has physical
path redundancy, it is possible to ﬁnd alternative paths be-
tween overlay nodes when congestion or failure makes a
Proceedings of the 2004 International Conference on Dependable Systems and Networks (DSN’04) 
0-7695-2052-9/04 $ 20.00 © 2004 IEEE 
primary path unavailable [20].
At ﬁrst glance, systems based on multi-homed and over-
lay networks seem to be effective.
It is widely believed
that multi-homing and overlay networks can provide signif-
icant availability gains. However, the effectiveness of these
systems depends on the assumption that paths available to
packets traversing different ISPs (or overlay nodes) would
enjoy a high degree of diversity and failure of each path
should be independent of failure of alternate paths.
In reality, Internet path failures are indeed correlated.
There are many factors that contribute to the dependency of
path failure. For example, the failure of paths that travel
across the same administrative domain can be related to
each other. Geographical adjacency can also be a factor.
A failure at a Network Access Points (NAP) can affect all
paths going through the NAP. Most of all, paths that share
the same physical links and/or routers are very likely to ex-
perience failure at the same time.
This paper quantitatively analyzes the impact of path di-
versity on multi-homed and overlay networks from several
perspectives. It also highlights several inherent limitations
of multi-homing and overlay architectures in fully exploit-
ing the potential redundancy of the Internet [2, 21, 22]. We
base our analysis on traceroutes and routing table data col-
lected from several vantage points in the Internet includ-
ing: looking glasses at ten major Internet Service Providers
(ISPs), RouteViews servers [12, 5, 1] collecting routing data
from twenty ISPs, and more than ﬁfty PlanetLab nodes [4]
distributed broadly across the Internet. The topological
distribution of these collection points ensures that a broad
range of upstream ISPs are represented in our study. The
primary contributions of this study are as follows:
(cid:0) We demonstrate signiﬁcant limitations of multi-homing
architecture from several perspectives:
– We ﬁrst quantify the extent of path diversity in multi-
homed networks. These measurements reveal that a
signiﬁcant percentage of the paths from a multi-homed
site may overlap. For example, when packets are in-
jected from different ISPs to the same destination, the
paths taken overlap at least once for 80% of 80,000
destinations networks in our study.
– Our study also attempts to identify the source of over-
lapping for multi-homed networks. First, our results
show that a signiﬁcant percentage of paths from multi-
homed sites merge in the core of the Internet. This re-
sult is consistent with prior research on Internet topol-
ogy suggesting that the Internet core is formed by
a mesh of tier-1 ISPs [2, 21]. Second, although a
multi-homed stub network may choose its upstream
providers, the stub network cannot necessarily detour
around the shared infrastructures, because it has little
control beyond the next hop. These ﬁndings motivate
a necessity to incorporate topology considerations in
designing multi-homed architectures.
– Our results also show that carefully choosing a set of
upstream ISPs cannot overcome inherent limitations
of multi-homing. Although increasing the number of
ISPs from 2 to 3 improves availability, having more
than 3 upstream ISPs provides marginal gains in our
study. Furthermore, even subscribing to as many as
10 upstream ISPs still results in at least one bottleneck
router among multiple paths for 50% of destinations.
(cid:0) Our analysis also exposes potential limitations of current
overlay architectures:
– We quantify the extent of correlation between overlay
links. Our study reveals that logically disjoint virtual
links between overlay nodes - placed in different Au-
tonomous Systems (ASes) with distinct administra-
tive control - are very likely to share links and routers
at the IP layer.
– Furthermore, our results show that most paths be-
tween overlay nodes and destinations also experience
overlapping routers and links at the IP layer. In exam-
ining paths from overlay nodes placed inside various
major ISPs to a set of over 80,000 destinations, we
observe that even if overlay nodes are topologically
diverse from each other, paths from different over-
lay nodes to the same destination typically share one
or more intermediate ASes in addition to sharing the
destination AS.
– Our results contradict the conventional wisdom that
placement of overlay nodes on different service
provider networks would provide high degree of di-
versity. We observe that even if overlay nodes are
deployed in various ISPs, overlay routes constructed
without considering underlying topology may result
in a signiﬁcant degree of overlapping, and provide
only limited availability gains.
The remainder of the paper is organized as follows. In
the following section, we relate our study to prior works.
Section 3 describes our measurement methodology and ex-
perimental results on path diversity of multi-homed sites. In
Section 4, we show the impact of path diversity on overlay
network. Section 5 discusses how availability requirements
conﬂict with performance goals. Finally, Section 6 presents
concluding remarks.
2 Related Works
Redundancy of the Internet has been well-studied by a
number of works, including [2, 21, 22, 11]. Many prior
works have studied AS-level connectivity and have shown
the prevalence of redundant connections of the Internet at
AS levels [2]. [21] discovered the hierarchical nature of AS
level connectivity and showed the presence of a small set of
large ISPs in the core of the Internet. For more ﬁne-grained
analysis, [22] quantiﬁed the topological redundancy of the
Internet by analyzing the number of disjoint paths at the
router level inside an ISP and also in the core of the Internet
topology. The authors concluded that there is “potential for
Proceedings of the 2004 International Conference on Dependable Systems and Networks (DSN’04) 
0-7695-2052-9/04 $ 20.00 © 2004 IEEE 
high level redundancy” inside an ISP and also across multi-
ple ASes. Similar work for a regional ISP, MichNet, showed
that there exist several redundant paths between pairs of
hosts inside the ISP [11]. Both studies examined the topol-
ogy to measure potential path diversity and suggest that the
utilization of redundant static paths can be limited by the
underlying routing protocols. Exploiting the high level of
path diversity requires a special framework such as multi-
homing and overlay architectures.
[15] has shown preliminary results addressing path di-
versity of multi-homing. However, this study relied on sim-
ple metrics and a small data set. More recently,
[6] pre-
sented an analysis of performance and availability beneﬁts
of multi-homing and suggested that the choice of ISPs is a
key factor. This work provided a better understanding of
the beneﬁts of multi-homing, but is focused more on per-
formance rather than availability.
Our study of multi-homed networks extends these previ-
ous works focusing on availability of multi-homed networks
and provides more detailed analysis of the impact of path di-
versity from several perspectives. We also base our analysis
on a broader range of data sets—BGP routing data as well
as traceroute—to measure path diversity at various levels:
path- and AS-levels. Furthermore, we reveal the inherent
limitations of multi-homing and observe that even carefully
choosing a set of upstream ISPs cannot be a remedy of the
limitations.
In addition, we extend our study to examine the impact
of path diversity on overlay networks. To the best of our
knowledge, with exception of [10], there is no other work
that looks at the issue of dependency between overlay links.
[10] shows that two overlay links are correlated if they show
similar patterns of failure or congestion. However, this
work does not study topological relation of the Internet to
quantify the extent to which overlay links may share the un-
derlying network infrastructure. In contrast, our study ana-
lyzes underlying IP paths of overlay links in the Internet and
provides a foundation for topological evaluation of overlay
networks such as RON [7] and Detour [9].
3 Multi-homed Networks
A multi-homed stub network with connections to more
than one providers may exhibit better performance and re-
liability than one with a single connection. However, the
effectiveness of this approach depends on the extent to
which it provisions disjoint paths over the existing Internet
topology.
if trafﬁc between two hosts is not routed along
completely disjoint paths, congestion or failure of a sin-
gle shared link or router can adversely affect the end-to-
end performance or availability of all paths. In this section,
we examine the effectiveness of multi-homing by measur-
ing the diversity between traceroute paths through different
upstream ISPs of multi-homed sites.
3.1 Measurement Methodology
An ideal experiment would be to choose a multi-homed
site that is connected to two or more ISPs and route packets
through different upstream ISPs. One challenge in imple-
menting such a set-up is that it requires a change to the cur-
rent routing conﬁguration that is not always possible. An
alternative is to emulate a multi-homed site. As outlined
below, we rely on two distinct data sets, (cid:0)(cid:0) and (cid:0)(cid:1), to em-
ulate multi-homed sites in our analysis.
Data set (cid:0)(cid:0): To measure the path diversity of connec-
tions from multi-homed sites to a broad spectrum of desti-
nations across the Internet, we create virtual multi-homed
sites and send traceroutes from these sites to 80,000 des-
tination networks. To emulate a multi-homed site, we se-
lect two stub networks that are geographically close to each
other, but connected to different upstream ISPs. We then
merge these two stub networks into one virtual site. Con-
sider the example in Figure 1(a). The virtual site, ANN
ARBOR, consists of the University of Michigan and Arbor
Networks. The University of Michigan is an educational in-
stitution connected to the Internet via MichNet, and Arbor
Networks is a corporate network with connections to the
Internet via Sprint. MichNet is a mid-sized regional ISP in
Michigan and has transit/peering relationships with a num-
ber of other ISPs but does not directly peer with Sprint. In
addition, we emulate another multi-homed site, BERKE-
LEY, consisting of Intel-Research at Berkeley and the Uni-
versity of California at Berkeley. Intel-Research at Berkeley
and UC Berkeley are connected to AT&T and CalRen, re-
spectively. CalRen and AT&T do not have a direct connec-
tion to each other. We run traceroutes to selected destination
addresses from each of the two virtual multi-homed sites.
As a representative set of IP addresses on the Internet, we
select a set of more than 80,000 destination addresses using
BGP tables. To provide a richer view of different subnets
which may be aggregated at various locations, we gather
BGP routing tables from more than 20 topologically and ge-
ographically diverse points using IPMA RouteViews [12],
Univ. of Oregon’s Route Views project [5], and RIPE-NCC
Routing Information Service project [1]1. Border Gateway
Protocol (BGP) is an inter-domain routing protocol, which
is used by peer routers in different ASes to exchange rout-
ing information to destination IP addresses blocks (or pre-
ﬁxes). From the collected BGP tables, we extract more than
162,000 destination preﬁxes. For each preﬁx, we randomly
choose one IP address (e.g., 12.10.0.1 for 12.10.0.0/16 pre-
ﬁx) and send traceroutes from the source sites. In our anal-
ysis, we include all reachable destinations. We deﬁne the
destination as “reachable” as long as the traceroute path
1RouteViews from Merit Network is a set of probe machines which
maintain default-free peering with over 25 Internet Service Providers and
log all BGP messages and updates routing tables. Www.routeviews.org
from the University of Oregon also maintains and provides real-time access
to BGP updates and routing table information from over 20 participating
ASes. For European IP destination preﬁxes, we also gather data from the
RIPE-NCC which provides BGP routes from over 50 ASes.
Proceedings of the 2004 International Conference on Dependable Systems and Networks (DSN’04) 
0-7695-2052-9/04 $ 20.00 © 2004 IEEE 
80,000 destinations
100 Top web sites
AT&T
CalRen
Sprint
MichNet
Looking glasses of 10 ISPs in Chicago
ISP1 ISP2
ISP10
Intel Research
UC Berkeley
Arbor Network
Univ. of Michigan
BERKELEY
ANN ARBOR
D(a)
1
data set
(b)
D2
data set
Figure 1. Emulating multi-homed networks
ends with an address which belongs to the same AS as the
destination IP address.
Data set (cid:0)(cid:0): To evaluate the impact of the choice of up-
stream ISPs on path diversity, we collect another set of
traceroute data from various ISPs. We take advantage of
looking glasses offered by 10 ISPs: 6 major tier-1 ISPs and
4 small ISPs. Looking glasses are publicly accessible Web
sites provided by ISPs, where customers can see the perfor-
mance and availability statistics using several utilities such
as traceroute, ping, and BGP data. For example, each look-
ing glass provides a tool for triggering traceroute from sev-
eral different routers inside the ISP to arbitrary destinations.
To emulate a multi-homed site, we select routers from dif-
ferent ISPs co-located in the same city (either at a NAP2 or a
PoP3). We then send traceroutes from each router to top 100
Web sites4. For example, we use 10 routers each of which
belongs to a different ISP in Chicago and send traceroutes
to the Web sites on the Internet, as shown in Figure 1(b).
Since public traceroute servers provided by major ISPs typ-
ically impose a rate limit on requests issued from a host, it
is difﬁcult to probe a large number of destination addresses
in a reasonable time period.
3.2 Analysis of Path Diversity from Multi-homed
Sites
The experimental results shown in this section are based
on the ﬁrst data set, (cid:0)(cid:1), collected from two emulated
multi-homed sites, ANN ARBOR and BERKELEY, to over
80,000 destinations.
With the data set (cid:0)(cid:1), we measure path diversity with
two distinct metrics: path-level and AS-level. Each metric
reveals a different aspect of Internet’s path diversity. First,
path-level measurement identiﬁes the number of overlap-
ping routers between paths through two different upstream
2Network Access Points (NAPs) are junction points where multiple
ISPs exchange routing information and data trafﬁc
3Point of Presence (PoP) is a site where there exists a collection of
telecommunications equipment, usually modems, leased lines and routers.
ISPs may operate several PoPs throughout their areas for their subscribers
to be able to reach the nearest one
4We selected top 100 Web sites from PC Magazine.
)
%
(
s
e
x
i
f
e
r
p
n
o
i
t
a
n
i
t
s
e
d
f
o
n
o
i
t
u
b
i
r
t
s
i
d
e
v
i
t
a