this rigidity). The EAR(1) process, described in detail below, has
correlated inter-arrivals with exponential marginal. For the sake of
brevity, details such as complete parameter settings will be omitted.
Figure 1 gives results for each of the above probing streams, with a
shared average inter-probe spacing, using probes of zero size. Con-
sequently, there is no issue of intrusiveness - probes do not affect
the system, nor of inversion - we are directly measuring what we
wish to measure. The issue of sampling bias can therefore be seen
in isolation.
The grey curve in the plot on the left of Figure 1 shows the true
Cumulative Distribution Function (CDF) for the delay of zero sized
probes, calculated from Equation (2). As expected, the curve cor-
responding to Poisson probes agrees with the true one: as is well
known, PASTA applies to this system. However, each of the other 5
curves overlay the true result equally closely. In this non-intrusive
case, the lack of sampling bias of Poisson probing is shared by
many other probing schemes. The (tightly estimated) expected de-
1
0.8
0.6
0.4
0.2
F
D
C
0
0
0.002
Load Ratio = 0
Load Ratio = 0.25
Load Ratio = 0.5
Load Ratio = 0.75
Load Ratio = 1.0
0.004
0.006
Delay [sec]
0.008
0.01
]
c
e
s
[
s
e
a
m
t
l
i
t
s
E
y
a
e
D
n
a
e
M
1.6
1.4
1.2
1
0.8
0.6
0.4
0.2
0
x 10−3
No Inversion Bias
Inversion Bias
0
0.25
Load Ratio(Probe Load/Cross−traffic Load)
0.5
0.75
1.0
Figure 3: Inversion bias of delay, range of intrusiveness (x ≥ 0). Left: CDF as seen by Poisson probing streams of different rate, and
true delay distributions (one per stream), as well as the true unperturbed delay (with no probes). Right: corresponding mean delays
as a function of probe to total load ratio. PASTA eliminates sampling bias, but total system behavior increasingly deviates from that
of the unperturbed system.
lays in the right plot of the ﬁgure conﬁrm this by agreeing with the
true value in each case. In Section 3, our main result is to prove
that a wide class of processes share this desirable property, and for
far more general systems than the simple M/M/1 queue.
In Figure 2 we consider the same probing arrival streams, but
allow the probes to have a service time x > 0 (for simplicity x
is a constant, but this is not essential). As a result, intrusiveness
becomes an issue: probes do affect the system, both in load and
in more detailed characteristics. To avoid dealing with inversion
issues, for the moment our objective is to know the true delay of the
full system, combining cross-trafﬁc and non-virtual probes, that a
packet of service time x would experience. In other words, again
we seek to measure the same object that we have direct access to
through probing.
The mean estimates in the right hand plot of Figure 2 conﬁrm
that each probing stream results in a different system behavior (de-
spite equal loads), and shows that each now gives a biased estimate
of its respective E[D], with the exception of ‘Poisson’. Hence,
PASTA continues to hold, whereas the other probing streams, de-
spite being unbiased when x = 0, now suffer from a bias due to
intrusiveness. The corresponding CDFs in the left hand plot show
in greater detail how the systems are different for each stream, and
how the bias varies as a function of delay. These results illustrate
that PASTA holds in the intrusive case. In Section 4, we will state
the general conditions under which PASTA can be expected to hold.
We now study inversion bias in isolation. We achieve this by em-
ploying Poisson streams exclusively, thereby beneﬁting from their
zero sampling bias in all cases. Furthermore, we let the probe ser-
vice time X be exponentially distributed with the same parameter,
μT , as for the cross-trafﬁc packets. This results in a probe+trafﬁc
system which is still M/M/1, with rate λ = λT + λP and average
service time μT , enabling Equation (1) to be used.
Figure 3 shows the unsurprising but signiﬁcant fact that increas-
ing the probing load through increasing λP results in the over-
all system deviating increasingly far from the original unperturbed
system in which λP = 0. Consequently, even if an estimate of the
true mean (or the CDF) is unbiased, that estimate is an estimate of
the full (probe + cross-trafﬁc) system, not the unperturbed (cross-
trafﬁc only) system that one wishes to measure. Thus, ‘what we
want is not what we directly measure’. To obtain the unperturbed
delay from the perturbed one requires an entirely separate inver-
sion step, which, even in this very simple example of inverting one
kind of delay to another, is highly non-trivial except for the sim-
plest one hop models. For other inference objectives common in
active probing, such as using packet-pair methods to estimate bot-
tleneck bandwidth, the degree of inversion required, and therefore
its potential impact, is far greater. Another way of seeing this is
to note that probes sent as a Poisson process at the sender will not
arrive as Poisson process at the bottleneck link in general, and will
also be affected by their onward passage from that link to the re-
ceiver. Thus, the probes are ‘sampling’ the bottleneck link, but not
in a Poisson way, and not in isolation.
We have two contributions to make on the inversion issue. First,
we point out that not only can it be extremely challenging, but more
importantly that it is a difﬁculty which arises generically for which
PASTA offers no solution. Indeed, it was recently shown in [10]
that, even in a simple 1-hop system, unless the cross-trafﬁc obeys
particular restrictive assumptions, full knowledge (i.e. the law) of
the cross-trafﬁc process feeding the hop is unobservable. In such
a case, strict inversion is impossible even in principle. This cor-
responds to an extreme form of the inversion problem, relating to
fundamental issues of system non-identiﬁability, which PASTA is
powerless to mitigate. Second, in spite of the difﬁculties described
above, there is a general way, the rare probing of Theorem 4, to
address inversion bias in the intrusive case, which we explore in
Section 4.
2.2 Bias versus Variance
In Section 2.1 we focused on the bias of estimators based on a
simple average of delays experienced by probes.
In this section
we look into the variance of these estimators. When bias is non-
zero, we examine bias-variance tradeoffs in the traditional manner
by considering the mean squared error MSE = bias2 + variance.
Thus far we have considered cross-trafﬁc packets arriving as a
Poisson process. However, in general cross-trafﬁc will interact with
probe trafﬁc in ways which depend on the correlation or ‘bursti-
ness’ structure of each, and estimation variance will be a function
of these interactions. To show this clearly we need a richer context
than the simple memoryless structure of the Poisson process. We
use the Exponential (ﬁrst order) AutoRegressive process (EAR(1))
[5] as a convenient way to generate a point process for CT arrivals
which has a well deﬁned correlation time scale, that is a scale τ ∗
be-
low which autocorrelation is signiﬁcant, but above which it decays
rapidly to zero. Like the Poisson process, it consists of exponen-
x 10−5
Poisson
Periodic
Uniform in [0, 2μ]
Pareto
5
4
3
2
1
0
s
e
t
a
m
l
i
t
s
E
y
a
e
D
n
a
e
M
f
o
s
a
B
i
−1
−2
−3
−4
0
x 10−4
Poisson
Periodic
Uniform in [0, 2μ]
Pareto
6
5
4
3
2
1
s
e
t
a
m
l
i
t
s
E
y
a
e
D
n
a
e
M
f
o
n
o
i
t
i
a
v
e
D
.
t
d
S
0.2
Correlation Parameter of CT Arrival (α)
0.4
0.6
0.8
1
0
0.2
Correlation Parameter of CT Arrival (α)
0.4
0.6
0.8
1
Figure 4: Bias and variance of delay with correlated cross-trafﬁc, non-intrusive case (x = 0). Left: bias of mean estimates seen by
different probing streams as a function of the EAR(1) parameter α of the cross-trafﬁc, using 100000 probes. Right: corresponding
estimates of standard deviation. Although all probing schemes are unbiased, their variances differ, and Poisson is not the smallest.
t
s
e
a
m
l
i
t
s
E
y
a
e
D
n
a
e
M
f
o
s
a
B
i
x 10−3
Poisson
Periodic
Uniform in [0.9μ, 1.1μ]
Uniform in [0, 2μ]
Pareto
EAR(1)
2.5
2
1.5
1
0.5
0
−0.5
−1
−0.05
0
0.05
0.1
Load Ratio (Probe Load/Cross−traffic Load)
s
e
t
a
m
l
i
t
s
E
y
a
e
D
n
a
e
M
f
o
n
o
i
t
i
a
v
e
D
.
t
d
S
0.15
x 10−3
Poisson
Periodic
Uniform in [0.9μ, 1.1μ]
Uniform in [0, 2μ]
Pareto
EAR(1)
3.5
3
2.5
2
1.5
1
0.5
0
−0.05
0
0.05
0.1
Load Ratio (Probe Load/Cross−traffic Load)
s
e
t
a