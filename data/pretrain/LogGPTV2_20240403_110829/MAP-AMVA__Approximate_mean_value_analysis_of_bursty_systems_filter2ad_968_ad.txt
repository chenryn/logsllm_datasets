416
6MAP-AMVAApproximationAlgorithmWeproposetousetheequationsderivedintheprevi-oussectiontocharacterizeapproximatelythemeanperfor-manceoftheMAPnetwork.TheMAP-AMVAapproxi-mationﬁrstconsidersanoptimizationprogrambasedontheconstraints(4),(12),(13)fori=1...M,(3)fork=1...K,(1),and(2).Theunknownsofthisoptimiza-tionprogramarethequeue-lengthsQki(N),theutilizationsUki(N),thearrivalqueuesAi(N),thenetworkstatevari-ablesEij(N)forj(cid:7)=i,andthethroughputX(N).Tofur-therrestricttherangeoffeasiblesolutionandobtainmoreaccurateresults,theoptimizationprogramisaugmentedwiththefollowingconstraintsQki(N)≤NUki(N),1≤k≤K,1≤i≤M,whichderivefromtheprobabilistic-leveldeﬁnitionofqueue-length;(cid:2)Mj=1Qkj(N)≥NUki(N),1≤k≤K,1≤i≤M,whichfollowsbynotingthatthemeanqueue-lengthsQkj(N)arecomputedalsoonstateswherequeueiisidle.Basedontheaboveconstraints,theoptimizationpro-gramcanuseanyobjectivefunctioninvolvingutilization,queue-length,throughput,orcombinationsthereof.Theseallowstocomputeminimumormaximumvaluesforthemeanperformanceofthesystem.Notethatthesevaluesareimmediatelyboundsontheexactsolutionsinceallfor-mulasusedintheoptimizationprogramareexact.Point-wiseMVAestimatescanthenbeobtainedusingwell-knownbound-basedapproximationschemes,suchastheharmonicmeanapproximationproposedin[7].Forexample,supposethatthemeanthroughputX(N)isinvestigated.ThenusingtheMAP-AMVAoptimiza-tionprogramboundsXmin(N)andXmax(N)areimmedi-atelyobtainedbyrespectivelyconsidering,e.g.,minimiza-tionandmaximizationprogramsontheutilizationU1(N)andthenscalingtheresultbythemeanservicedemandoftheﬁrstresource.Afterward,anharmonicapproximationXapx(N)isobtainedasXapx(N)=2Xmin(N)Xmax(N)Xmin(N)+Xmax(N).(16)Anadvantageofthisapproximationschemeisthatthemax-imalrelativeerrorεrel(N)isgivenby[7]εrel(N)=maxX(N)|Xapx(N)−X(N)|X(N)=Xmin(N)−Xmax(N)Xmin(N)+Xmax(N),(17)wherethemaximizationisoverX(N)∈[Xmin(N),Xmax(N)].Theindexεrel(N)providesasimplewaytoassessthequalityofperformanceestimatesobtainedbythebound-basedharmonicapproximation.6.1NumericalSolutionAdirectnumericalsolutionoftheMAP-AMVAopti-mizationprogramdescribedaboveischallengingbecauseofthenon-linearitiesinequationssuchas(13).Wethere-foreproposeasimplelinearizationschemewhichpreservestheexactnessoftherepresentation.Thisapproachalsosug-gestsanadditionalconstraintwhichimprovesthequalityoftheapproximation.Deﬁne(cid:9)Ej,ki=(cid:2)(cid:2)n:nj≥1niP[(cid:3)n,k]asthemeanqueue-lengthofstationiwhilejisbusyandtheMAPisinphasek.Thenwehavethefollowingresultconcerningthelin-earizationoftheMAP-AMVAoptimizationprogram.Theorem4.ThefollowinglinearizationschemeViX(N)Ai(N)→(cid:2)Kk=1(cid:2)Kh=1(cid:2)Mj=1qj,i,k,h(cid:9)Ej,ki(18)ViX(N)Eli(N)→(cid:2)Kk=1(cid:2)Kh=1(cid:2)Mj=1qj,i,k,h(cid:9)Ej,kl(19)preservestheexactnessoftheMAP-AMVAequations.Proof.Theoremproofisgivenin[4].Aninterestingconsequenceofthisresultisthatwecanaddtotheoptimizationprogramresultingfromthelin-earizationalsotheconstraintQki≥(cid:9)Ej,ki,1≤i≤M,1≤j≤M,1≤k≤K,whichholdstruesinceQkiiscomputedonalargerstatespacethan(cid:9)Ej,kiwiththesameanalyticalexpression.Finally,weremarkthefundamentalfactthatnoneoftheequationsdeﬁnedinthispapergrowsincardinalitywiththepopulationN.Therefore,theMAP-AMVAapproximationisO(1)withrespecttothisparameterandthereforeitisexpectedtoovercometheperformanceissuesofLRboundsintheapproximationofmodelswithhundredsorthousandsofjobs.AperformancecomparisonofMAP-AMVAandLRboundsconﬁrmingthispropertyisgiveninSection7.7NumericalValidationWeillustratetheaccuracyandcomputationalefﬁciencyoftheMAP-AMVAmethodusingcasestudies.Duetolim-itedspace,wefocusonstresscaseswhereMAPqueue-ingnetworksolutionscannotbeapproximatedaccuratelybyclassicMVAmodels.978-1-4244-4421-2/09/$25.00 c(cid:13)2009 IEEE
417
MAP-AMVANCPU[sec]MEM[MB]iternonzeros1000100−200.LRbounds(notshownintheﬁgure)haveslightlybetteraccuracy,buttheircompu-tationalcostsareseveralordersofmagnitudelargerthanfortheMAP-AMVAmethod,seeTable2.approximatedeffectivelyasproduct-form,sincetheMVAvaluesareveryfarfromthefeasibleregionfortheexactMAPqueueingnetworksolutionwhichisdelimitedbytheupperandlowerMAP-AMVAbounds.TheMAP-AMVAresultsareingeneralextremelyaccurate:thegapbetweenupperandlowerboundisnegligibleforthegreatmajorityofthepopulations.Thelargestgapisfoundatverysmallpopulations(N<10),wherethemaximumrelativeerrorismaxNεrel(N)=12.5%;however,thesepopulationsdonotrepresentacomputationalchallengeandcanbesolvedformaximalaccuracybyaglobalbalancesolutionwhichgivesexactresults.However,asthepopulationincreases,exactsolutionscannotbecomputedbyglobalbalanceifthemodelcontainsmorethan100−200jobs,henceinthisexampleonewouldnotbeabletoexploreexactlytheper-formanceinthelargerangeofbottleneckutilizationsbe-tween60%and90%andapproximatetechniquessuchasLRboundsandMAP-AMVAareneeded.WeremarkthatLRboundsfollowverycloselytheMAP-AMVAcurves,yetatmuchhighercomputationalcostsasdiscussedbelow.Table2comparesthecomputationalcostsofLRboundsandtheMAP-AMVAapproximationinthesub-rangeofpopulationsN=1000−3000.ThetableindicatesthemarkedsuperiorityofMAP-AMVAintermsofcomputa-tionalrequirementsthatarenegligibleinallcasesandO(1)withrespecttothepopulationsize.Inaddition,thedimen-sionalityofthelinearprogramitselfismuchlessscalablethanfortheMAP-AMVA,sincethenumberofnon-zerosisabout105−106forLRbounds,whileitdramaticallyre-978-1-4244-4421-2/09/$25.00 c(cid:13)2009 IEEE
418
2040608010012014016018020000.10.20.30.40.50.60.70.80.91Population NBottleneck Resource Utilization  MAP AMVA XminMAP AMVA XmaxMVA(a)no-burst01234567891000.10.20.30.40.50.60.70.80.91Population NBottleneck Resource Utilization  MAP AMVA XminMAP AMVA XmaxMVA(x10,000)(b)high-burstFigure4.MAP-AMVAresultsoncasestudy2.ducesto1.5·102forMAP-AMVA,thussavingabout2−3ordersofmagnitudewithrespecttotheLRbounds.There-fore,thisexamplestronglyarguesfortheeffectivenessofMAP-AMVAinreducingthecomputationalcostsoftheanalysiswhilepreservinghighapproximationaccuracyasillustratedbytheverytightboundsinFigure3.7.2CaseStudy2Inthesecondcasestudyweexaminethesensitivityoftheresultspresentedabovetotheburstinessintensity.Thisisinterestingtoillustratetheeffectivenessofmodelap-proximationasthecharacteristicsthatarespeciﬁctoMAPqueueingnetworksbecomestronger.WeconsiderthesamenetworkdiscussedintheﬁrstcasestudyandweevaluatethebottleneckresourceutilizationwhenburstinessattheMAPserverisremoved(caseno-burst)orincreasedbyonehundredstimesaccordingtotheindexofdispersionmet-ric(casehigh-burst)[10].TheresultsofthisexperimentshowninFigure4arequalitativelysimilartotheonepre-sentedforCaseStudy1,withthegapbetweentheupperandlowerboundsbeingtypicallysmall,andtheproduct-formapproximationsgivenbyMVAlyingfaroutsidethefeasibleregionfortheexactsolution.Forthecaseofhigh-bursttheMVAcurveisnotevenclearlyvisibleonFigure4.Inparticular,thehigh-burstcaseisfoundslightlyhardertoapproximatethantheno-burstcase:noteinparticularthatevaluationupto90%utilizationofthebottleneckresourcerequirestoreachapopulationof100,000users,whichisdoneinfewsecondsandwithnegligiblememoryconsump-tionbyMAP-AMVA.8.ConclusionWehavepresentedtheMAP-AMVAapproximationforMAPqueueingnetworks.WehaveillustratedinSection2thatthisclassofcapacityplanningmodelsistheonlycapa-bleofpredictingcorrectlytheperformanceimpactofbursti-nessoveradistributedsystemthatmaybemodeledasanet-workofqueues.ThemaincontributionoftheMAP-AMVAtechniqueistheidentiﬁcationofexactequationsthatrelatemeanperformanceindexesinaMAPqueueingnetworkandthedeﬁnitionofalinearprogrammingapproachtoapprox-imatetheseindexes.Numericalresultsindicatethatourlin-earprogramming-basedapproachachievesgoodaccuracyatnegligiblecomputationalcosts.Infutureextensionofthisworkwewillprovidemorede-tailsontheapplicationoftheapproachtomodelswithsev-eralMAPservers.Further,wearecurrentlyevaluatingtech-niquestoincorporateintotheMVAapproachdelayserversthatareusefultorepresentuserthinktimesbetweensub-missionofconsecutiverequests.ThiswouldbeusefulsincetheLRboundscannotbeappliedtothiscasewhichrequiresmoreexpensiveboundsknownasQRbounds[5].References[1]G.Bolch,S.Greiner,H.deMeer,andK.S.Trivedi.QueueingNetworksandMarkovChains.JohnWileyandSons,2006.[2]G.Casale,N.Mi,L.Cherkasova,andE.Smirni.Howtoparametrizemodelswithburstyworkloads.ACMPerf.Eval.Rev.,HOTMETRICSSpecialIssue,36(2):38–44,2008.[3]G.Casale,N.Mi,andE.Smirni.Boundanalysisofclosedqueueingnetworkswithworkloadburstiness.InProc.ofACMSIGMETRICS2008,pages13–24.ACMPress,2008.[4]G.CasaleandE.Smirni.Anapproximatemeanvalueanal-ysisalgorithmforMAPqueueingnetworks.TRWM-CS-2009-02,CollegeofWilliamandMary,2009.[5]G.Casale,N.Mi,andE.Smirni.Model-DrivenSystemCapacityPlanningUnderWorkloadBurstiness.InIEEET.Computers,toappear.[6]G.Casale,E.Zhang,andE.Smirni.KPC-toolbox:Simpleyeteffectivetraceﬁttingusingmarkovianarrivalprocesses.InProc.ofQESTConference,pages83–92,2008.[7]D.L.Eager,K.C.Sevcik.Boundhierarchiesformultiple-classqueueingnetworks.JACM,33(1):179–206,1986.[8]D.L.Eager,D.Sorin,andM.K.Vernon.AMVAtechniquesforhighservicetimevariability.InProc.ofACMSIGMET-RICS,pages217–228.ACMPress,2000.[9]D.A.Green.DepartureprocessesfromMAP/PH/1queues.PhDthesis,TheUniversityofAdelaide,1999.[10]A.Heindl.Trafﬁc-BasedDecompositionofGeneralQueue-ingNetworkswithCorrelatedInputProcesses.Ph.D.Thesis,ShakerVerlag,Aachen,2001.[11]N.Mi,G.Casale,L.Cherkasova,andE.Smirni.Burstinessinmulti-tierapplications:Symptoms,causes,andnewmod-els.InV.IssarnyandR.E.Schantz,editors,Middleware,LNCS5346,pages265–286.Springer,2008.[12]N.Mi,Q.Zhang,A.Riska,E.Smirni,andE.Riedel.Per-formanceimpactsofautocorrelatedﬂowsinmulti-tieredsys-tems.PerformanceEvaluation,64(9-12):1082–1101,2007.[13]E.Varki,L.Dowdy,andC.Zhang.Quickperformanceboundingtechniquesforcomputerandstoragesystemswithparallelresources.Underreview,availablefordownloadathttp://www.cs.unh.edu/varki/publication/bound.ps.[14]Q.Zhang,L.Cherkasova,andE.Smirni.Aregression-basedanalyticmodelfordynamicresourceprovisioningofmulti-tierapplications.InProc.ofICAC,27–27,2007.