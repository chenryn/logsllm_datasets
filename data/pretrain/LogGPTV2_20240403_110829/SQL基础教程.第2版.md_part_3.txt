如果在控制面板中没有找到“管理工具”，那么请点击控制面板右上角的“查看方式”，选择“大
图标”或者“小图标”，切换到图标显示模式。
在显示出来的窗口中找到“postgresql-x64-9.5”，用鼠标右键进行点击（图0-12），然
后在弹出的菜单中选择“启动”或者“重新启动”。
注 意 如果PostgreSQL是已经启动的状态，那么“启动”选项就是灰色的，无法选择。反之，如果PostgreSQL是停止状态，
那么“重新启动”选项就是灰色的，无法选择。
● 8 第0章 绪论
图0-12 在“服务”窗口中重新启动PostgreSQL
这样，之前我们对PostgreSQL所做的“listen_addresses”的修改就生效了。
如果错误地停止了“postgresql-x64-9.5”之外的其他服务，可能会造成操作系统无法正常工作，所以请一定
注 意
不要停止其他服务。
此外，如果使用的是32位的安装程序，那么显示出来的服务名就是“postgresql-9.5”。
0-2 通过PostgreSQL执行SQL语句 9 ●
第0章 绪论
0-2
通过PostgreSQL执行SQL语句
PostgreSQL提供了一个可以通过命令行来执行SQL语句的工具“psql”。psql会把SQL语
句发送给PostgreSQL，然后再将接收到的执行结果显示出来。下面就来介绍一下使用psql执行
SQL语句的方法。
下面将要执行的SQL语句的语法和意义将会在接下来的第1章和第２章学习，因此大家不必太
过在意。
连接PostgreSQL（登录）
现在已经完成了安装，接下来就让我们启动psql，连接 图0-13 启动命令提示符窗口
PostgreSQL吧。首先，启动命令提示符窗口。使用鼠标右键点击电脑
桌面左下角的“Windows”图标 ，在弹出的菜单中选择“命令提
示符（管理员）（A）”（图0-13）。
备 忘 如果使用的是Window8/8.1，可以按照如下步骤启动命令提示符窗口。
1.在电脑的开始画面，同时点击键盘上的“Windows”键和“X”键。
2.在画面左下角显示的菜单一览中点击“命令提示符（管理员）”。
如果使用的是Window7，可以按照如下步骤启动命令提示符窗口。
1.在电脑的开始画面，点击键盘上的“Windows”键，在“搜索程序和文件”输入框中输入“cmd”。
2.右键点击检索结果中的“cmd.exe”，选择“以管理员身份运行（A）”。
● 10 第0章 绪论
打开命令提示符窗口（图0-14）之后， 图0-14 命令提示符窗口
输入如下命令，然后按下回车键（Enter）。
C:\PostgreSQL\9.5\bin\psql.exe –U postgres
接下来会显示出“用户postgres的 图0-15 通过 psql连接PostgreSQL
口令:”，要求输入密码。输入安装时设置的
密码，按下回车键，然后就会在命令提示符
窗口显示出“postgres=#”，意味着连接
成功了（图0-15）。
下面就可以执行SQL语句了。
注 意 出于安全考虑，输入的密码不会在画面上显示出来。输入密码时，光标会一直在同一位置闪烁，看上去就像什么
也没输入一样，但其实密码已经正常输入了，所以请在输入结束时按下回车键。
执行SQL语句
连接数据库之后，就可以执行SQL语句了。下面就让我们试着来执行一个简单的SQL语句吧。
1. 输入SQL语句
如图0-16所示，通过psql连接到示例数据库（postgres）之后，输入如下一行命令。
图0-16 输入“ ”
SELECT 1;
SELECT 1;
半角空格（输入空格键）
2. 按下回车键
输入结束之后，按下回车键，这样就可以执行这条SQL 图0-17 “ ”的执行结果
SELECT 1;
语句了。如果显示出如下信息，就表示执行成功了（图0-17）。
?column?
----------
1
0-2 通过PostgreSQL执行SQL语句 11 ●
“;”是SQL的结束符，如果没有输入的话，即使按下回车键，SQL语句也不会执行。因此，在执行SQL语句的时候，
注 意
请大家注意不要忘记输入“;”。
上面我们介绍了手动输入SQL语句的例子，其实直接复制本书的示例代码，粘贴在命令提示符
窗口，也同样可以执行SQL语句。详细情况请参考本书9-2节的专栏“在命令提示符窗口中的粘贴
方法”。
创建学习用的数据库
本书将从第1章后半部分开始介绍各种SQL语句的书写方法。这里我们来创建一个学习用的数
据库，提前准备一下吧。
数据库的创建步骤如下所示。
1. 执行创建数据库的SQL语句
在命令提示符窗口，保持PostgreSQL连接的状态下，输入如下一行SQL语句，按下回车键。
请注意，数据库的名称只能使用小写字母。
CREATE DATABASE shop;
创建成功后，画面中会显示如下信息（图0-18）。
图0-18 数据库创建成功
CREATE DATABASE
2. 结束psql
图0-19 从PostgreSQL登出
数据库创建成功之后，结束psql。为了结束psql，
需要输入“\q”，然后按下回车键。这样就切断了与
postgreSQL的连接，返回到命令提示符窗口（图0-19）。“\q”
中的q是“quit”（退出）的缩写。
现在通过psql连接（登录）的是安装PostgreSQL时自动创建的示例数据库postgres。为了连接刚刚创建的
注 意
数据库，我们需要暂时结束（退出）psql。由于psql在窗口关闭时也会结束，因此也可以通过点击psql窗
口右上角的“X”按钮结束psql。
● 12 第0章 绪论
连接学习用的数据库（登录）
下面就让我们登录刚刚创建的数据库“shop”吧。在命令提示符窗口执行如下命令。
C:\PostgreSQL\9.5\bin\psql.exe –U postgres –d shop
选项“-d shop”是指定“数据库shop”的意思。
此时会要求输入postgres的密码，输入之后按下回车键。登录成功后会显示如下信息（图0-20）。
shop=#
图0-20 示例数据库 登录成功
shop
这样数据库shop就登录成功了。接下来只需要根据本书的内容输入SQL语句，然后按下回
车键，就可以执行SQL语句了。
本书将使用这个数据库shop，通过执行各种各样的SQL语句来学习SQL语句的书写方法
和功能。
第1章 数据库和SQL
数据库是什么
数据库的结构
SQL概要
表的创建
表的删除和更新
本章重点
本章介绍了数据库的结构和基本理论，以及数据库的实际应用。大家可以
学习到如何对关系数据库中用来存储数据的表进行创建、更新和删除操作，同
时还能掌握关系数据库专用的SQL语句的书写方法和规则。
1-1 数据库是什么
■我们身边的数据库
■为什么DBMS那么重要
■DBMS的种类
1-2 数据库的结构
■RDBMS的常见系统结构
■表的结构
1-3 SQL概要
■标准SQL
■SQL语句及其种类
■SQL的基本书写规则
1-4 表的创建
■表的内容的创建
■数据库的创建（CREATE DATABASE语句）
■表的创建（CREATE TABLE语句）
■命名规则
■数据类型的指定
■约束的设置
1-5 表的删除和更新
■表的删除（DROP TABLE语句）
■表定义的更新（ALTER TABLE语句）
■向Product表中插入数据
1-1 数据库是什么 15 ●
第1章 数据库和SQL
1-1
数据库是什么
● 数据库是将大量数据保存起来，通过计算机加工而成的可以进行高效访问
学习重点
的数据集合。
● 用来管理数据库的计算机系统称为数据库管理系统（DBMS）。
● 通过使用DBMS，多个用户便可安全、简单地操作大量数据。
● 数据库有很多种类，本书将介绍如何使用专门的SQL语言来操作关系数
据库。
● 关系数据库通过关系数据库管理系统（RDBMS）进行管理。
我们身边的数据库
大家都有过下面这样的经历吧？
● 收到曾经为自己诊治过的牙医寄来的明信片，上面写着“距上次检查已有
半年，请您再来做个牙齿健康检查”。
● 在生日的前一个月，收到曾入住过的旅店或宾馆发来的“生日当月入住优
惠”的邮件或者明信片。
● 在网上商城购物之后，收到内附“推荐商品列表”的邮件。
这可能是因为牙医、旅店或商城的经营者掌握了顾客上一次的就诊日
期、生日和购买历史等信息，并且拥有能够从大量汇总信息中快速获取所
需信息（比如你的住址或爱好）的设备（计算机系统）。如果利用人工完
成同样的工作，真不知道要多长时间呢。
另外，现在所有地区的图书馆都配备了计算机，实现了图书的自动查
询。使用该系统，可以通过检索书名或出版年份快速查找出希望借阅的图
书的所在位置，以及是否已经借出等信息。正是因为拥有了可以保存图书
名称、出版年份以及保管位置和外借情况等信息，并且可以按需查询的设
备，才使这一切成为可能。
KEYWORD
像这样将大量数据保存起来，通过计算机加工而成的可以进行高效访
●数据
● 16 第1章 数据库和SQL
KEYWORD 问的数据集合称为数据库（Database，DB）。将姓名、住址、电话号码、
●数据库（DB）
邮箱地址、爱好和家庭构成等数据保存到数据库中，就可以随时迅速获
●数据库管理系统（DBMS）
取想要的信息了。用来管理数据库的计算机系统称为数据库管理系统
注A （Database Management System，DBMS）A。
数据库（DB）和DBMS经常被混淆。 系统的使用者通常无法直接接触到数据库。因此，在使用系统的时候
为了加以区别，本书将数据库管
理系统统称为DBMS。 往往意识不到数据库的存在。其实大到银行账户的管理，小到手机的电话
簿，可以说社会的所有系统中都有数据库的身影（图1-1）。
图1-1 数据库无处不在
在银行里有存款等信息的大型数据库 在手机中有电话簿等信息的小型数据库
○○银行
DB
DB
为什么DBMS那么重要
那么，为什么要使用专用系统（DBMS）来管理数据呢？我们通过计
算机管理数据的时候，通常使用文本文件B或者Excel那样的电子制表软
注B
保存只通过文字记录的数据的 件就可以完成了，非常简单。
文件。
确实，通过文本文件或者电子制表软件来管理数据的方法非常简便，
但也有不足。下面就举几个有代表性的例子。
●无法多人共享数据
保存在已连接网络的计算机中的文件，可以通过共享设定实现多个用
1-1 数据库是什么 17 ●
户在线阅读或编辑。但是，当某个用户打开该文件的时候，其他用户就无
法进行编辑了。如果是网上商城的话，当某个用户购买商品的时候，其他
用户就无法购买了。
●无法提供操作大量数据所需的格式
要想瞬间从几十万或者上百万的数据中获取想要的数据，必须把数据
保存为适当的格式，但是文本文件和Excel工作表等无法提供相应的格式。
●实现读写自动化需要编程能力
通过编写计算机程序（以下简称程序）可以实现数据读取和编辑自动
化，但这必须以了解数据结构为前提，还需具备一定的计算机编程技术。
●无法应对突发事故
当文件被误删、硬盘出现故障等导致无法读取的时候，可能会造成重
要数据丢失，同时数据还可能被他人轻易读取或窃用。
DBMS可以克服这些不足，实现多个用户同时安全简单地操作大量数
据（图1-2）。这也是我们一定要使用DBMS的原因。
图1-2 DBMS能够实现多个用户同时安全简单地操作大量数据
无需高超的编程技术就可以使用
可以应对
突发事故
存储几百万
数据的数据库
● 18 第1章 数据库和SQL
DBMS的种类
DBMS主要通过数据的保存格式（数据库的种类）来进行分类，现
阶段主要有以下5种类型。
KEYWORD ●层次数据库（Hierarchical Database，HDB）
●层次数据库
最古老的数据库之一，它把数据通过层次结构（树形结构）的方式表
●关系数据库（RDB）
●SQL 现出来。层次数据库曾经是数据库的主流，但随着关系数据库的出现和普
及，现在已经很少使用了。
●关系数据库（Relational Database，RDB）
关系数据库是现在应用最广泛的数据库。关系数据库在1969年诞生，
可谓历史悠久。和Excel工作表一样，它也采用由行和列组成的二维表来
管理数据，所以简单易懂（表1-1）。同时，它还使用专门的SQL（Structured
Query Language，结构化查询语言）对数据进行操作。
表1-1 关系数据库中的数据
商品编号 商品名称 商品种类 销售单价 进货单价 登记日期
0001 T恤衫 衣服 1000 500 2009-09-20
0002 打孔器 办公用品 500 320 2009-09-11
0003 运动T恤 衣服 4000 2800
0004 菜刀 厨房用具 3000 2800 2009-09-20
0005 高压锅 厨房用具 6800 5000 2009-01-15
0006 叉子 厨房用具 500 2009-09-20
0007 擦菜板 厨房用具 880 790 2008-04-28
0008 圆珠笔 办公用品 100 2009-11-11
KEYWORD 这种类型的DBMS称为关系数据库管理系统（Relational Database
●RDBMS
Management System，RDBMS）。比较具有代表性的RDBMS有如下5种。
●开源
将软件的内容（代码）无偿地公
开在互联网上，任何人都可以进 ● Oracle Database：甲骨文公司的RDBMS
行修改并再次发布。开发项目可
● SQL Server：微软公司的RDBMS
以由志同道合的有志之士集体来
运营。 ● DB2：IBM公司的RDBMS
● PostgreSQL：开源的RDBMS
● MySQL：开源的RDBMS
1-1 数据库是什么 19 ●
另外，Oracle Database通常简称为Oracle，因此，本书在接下来的章
节中也使用这一简称。
KEYWORD ●面向对象数据库（Object Oriented Database，OODB）
●面向对象数据库（OODB）
编程语言当中有一种被称为面向对象语言的语言A。把数据以及对数