SaaS行业需要什么样的
数据库?
阿里云
digoal
目录
• 什么是SaaS
• 为什么软件厂商纷纷转型SaaS
• SaaS发展的几个阶段对数据库的需求
• 数据库要为SaaS企业提供什么弹药
• 阿里云RDS PostgreSQL跨境电商SaaS案例
什么是SaaS
什么是SaaS
资料来自互联网公开资料.
什么是SaaS
资料来自互联网公开资料.
为什么软件厂商纷纷转型SaaS
资料来自互联网公开资料.
1.全球 SaaS 市场规模 (2020年 1300亿美元)
2.中国 SaaS 市场规模 (2020年 253亿人民币)
资料来自互联网公开资料.
为什么软件厂商纷纷转型SaaS
为什么软件厂商纷纷转型SaaS
• SaaS对客户的价值
• 使用门槛低:
• 初期费用相比购买软件License低很多, 部署、维护、培训等隐藏成本低.
• 企业采取SaaS租用的方式，不需要专门的维护和管理人员，也不需要为维护和管理人员支付额外
费用。
• SaaS运行在远端, 客户不需要投入运行软件的硬件.
• 用户采用传统软件部署, 需要额外购买数据库软件, 使用SaaS后, 不需要购买数据库软件. 整体费用
大幅度降低.
• 功能迭代快:
• 传统软件部署的方式版本迭代慢, 使用SaaS可以享受更快的功能迭代,
• SaaS对厂商的价值
• SaaS集中化部署, 更容易产生规模化效益.
• SaaS的客户的长期价值更大. 而软件通常是一锤子买卖.
• SaaS集中化部署, 研发、销售和售后成本降低.
SaaS发展的几个阶段对数据库的需求
• 来自雪球网数据(2021.4.13)
• SaaS代表: Salesforce 总市值：2106.88亿
• 软件代表: Oracle 总市值：2194.95亿
资料来自互联网公开资料.
SaaS发展的几个阶段对数据库的需求
资料来自互联网公开资料.
1、早期SaaS, 落后主流
• 特征
• 所有租户的功能都一样, 数据库侧基本没有租户概念.
• 单模式, 所有租户数据混一起, 共用数据结构, 通过GID字段区分租户.
• 数据量大, 集中式存储.
• 敏捷开发, DDL变更频繁
• ORM
• 大宽表
• 复杂逻辑处理
• 几十上百个表的JOIN
• 数据库要求
• 大数据量处理能力, 集中式高性能, 高并发.
2、aPaaS, 当前主流SaaS模式
资料来自互联网公开资料.
2、aPaaS, 当前主流SaaS模式
• 特征
• (SaaS 进化核心能力之一, 低成本的B端大客户需求满足), 客户可自行定制
化拖拽式开发能力.
• 多模式, 多租户. 每个租户一套表, 结构不相同.
• 数据量大, 可按租户分散存储.
• 数据库要求
• 支持schema或私有database.
• 租户级 sharding 能力.
• 按租户资源、权限、性能隔离.
• 按租户迁移、备份、恢复.
• 按租户进行数据建模. 动态加减字段能力, 多模式 json(schema less)能力.
• 大宽表能力.
3、租户打通, 打破孤岛, 拓展商业边界
资料来自互联网公开资料.
3、租户打通, 打破孤岛, 拓展商业边界
• 特征
• 租户之间的事务需求, 全局事务一致性需求等.
• 例如, 跨租户分销体系.
• 社交属性.
• 数据库要求
• 分布式事务
• 全局一致性连续备份
• 全局一致性时间点恢复
• 业务相关能力
• 例如, 图式推荐算法等
4、AI整合, 头部玩家, 技术壁垒
资料来自互联网公开资料.
4、AI整合, 头部玩家, 技术壁垒
• 特征
• 技术整合能力, 例如, 人工智能技术和数据智能技术.
• 要求数据智能化处理能力.
• 数据库要求
• 数据多模能力:
• 图、流、机器学习、向量、搜索 、...
• 功能扩展能力:
• 存储结构扩展能力.
• 索引结构扩展能力.
• 搜索算法扩展能力.
• 计算算法扩展能力.
• 数据库产品整合能力:
• 跨产品互相同步, 互相访问.
数据库要为SaaS企业提供什么弹药
SaaS阶段 业务痛点 数据库功能点
全阶段 ORM生成的SQL复杂,无法干预SQL写法 10个表以上JOIN的优化器增强(cbo,geqo,aqo,hint,outline)
全阶段 SQL 计算量大 并行计算, 高级优化器, 高级索引, 高级存储引擎
全阶段 结构复杂 大宽表
全阶段 关系复杂(一对多、多对一、多对多) 数组类型、倒排索引
全阶段 敏捷开发, 租户个性化需求增多, 单一结构 schema less(JSON, XML), 在线修改结构, 在线修改字段长度
无法满足需求
全阶段 存储超长内容或二进制文件、图片 大对象类型
全阶段 文本搜索性能差, 依赖搜索引擎, 数据同步 文本搜索、倒排索引
延迟高, 数据查询不一致,同步异常问题多. %xxx%, *xxx*的模糊查询、全文检索、中文分词
开发、维护成本高.
全阶段 租户多, 数据量大 基于租户的数据库sharding
全阶段 租户多, 会话并发量大, 每个租户一套结构, 读写分离、线程池、内存使用优化, 一个实例支持上千万个
表特别多, 租户结构变更发布麻烦 表, 并方便一键发布DDL.
全阶段 租户多, 租户之间的数据访问不安全 RLS, 租户级别TDE
全阶段 租户多, 相互抢资源, 性能不稳定 租户级别quota(计算、存储)、表空间
数据库要为SaaS企业提供什么弹药
SaaS阶段 业务痛点 数据库功能点
第二阶段 租户多, 很难快速定位捣蛋租户 租户级别资源监控
第二阶段 租户多, 全隔离资源利用率低下 租户级别资源quota自动化弹性, 发挥资源池化作用
第二阶段 租户级别的误操作, 要回滚整个实例 闪回, 租户级别的PITR
第二阶段 过期租户占用资源, 如果删除后续费重建流程 灵活的租户数据冷冻和数据加热, 过期租户不占资源, 续
复杂 费快速加热
全阶段 数据流动需求多, DB到DB, DB到MQ到大数据 单向、多向的数据订阅功能
全阶段 租户GIS需求增多, 存储、计算、速度要求高 专业的GIS数据类型、索引、计算函数、操作符功能
全阶段 租户数据挖掘需求增多: 图计算 基于图的搜索、推荐能力
全阶段 租户数据挖掘需求增多: 机器学习 内置ML算法和可扩展ML算法的能力
全阶段 租户数据挖掘需求增多: 行列变换 行列变换函数接口
第四阶段 SaaS行业丰富, 各个行业的需求丰富无法穷尽 行业定制化存储、索引、OP、FUNC的扩展插件能力
供应链SaaS: 递归,溯源,区块链技术
ERP: 复杂SQL动态规划能力
CRM: 关系图谱能力
文档协作: 文本AI分析、推荐、打标能力
电子签名: 安全,区块链技术
协同办公: 社交关系处理
阿里云RDS PostgreSQL跨境电商SaaS案例
智赢ERP(跨境电商SaaS)
业务挑战
业务挑战
垂直分库的挑战
水平分库的挑战1
水平分库的挑战2
最终方案-可能会带来数千万Table, PG顶住了
最终方案-可能会带来数千万Table, PG顶住了
SQL/JSON标准化语法, 让开发自由自在
SQL/JSON标准化语法, 让开发自由自在
SQL/JSON标准化语法, 让开发自由自在
SQL/JSON标准化语法, 让开发自由自在
SQL/JSON标准化语法, 让开发自由自在
SQL/JSON标准化语法, 让开发自由自在
内置全文检索, 终于不用忍受搜索引擎数据同
步的延迟、错误、一致性、成本等痛苦了!
内置全文检索, 终于不用忍受搜索引擎数据同
步的延迟、错误、一致性、成本等痛苦了!
内置全文检索, 终于不用忍受搜索引擎数据同
步的延迟、错误、一致性、成本等痛苦了!
内置模糊搜索, 终于不用忍受搜索引擎数据同
步的延迟、错误、一致性、成本等痛苦了!
内置模糊搜索, 终于不用忍受搜索引擎数据同
步的延迟、错误、一致性、成本等痛苦了!
数组来了, 一对多, 多对一, 多对多不在话下
数组来了, 一对多, 多对一, 多对多不在话下
BI分析, 数据汇聚很easy!
BI分析, 数据汇聚很easy!
SaaS行业需要PG这样的数据库!!!
阿里云RDS PostgreSQL跨境电商SaaS案例
• 智赢使用了哪些数据库技术
• 表特别特别特别多,
• 内存优化管理, 性能优化管理
• 并发高,
• 性能优化, 内存优化
• SQL/JSON
• 多国语言、权限配置、商品属性、上传列表等. (灵活且方便拆表)
• 全文检索、模糊搜索
• 数组
• 一对多、多对一、多对多数据结构 (规避: 中间表、记录数量级膨胀)
• BI
• 函数与行列变换
• 实时分析计算
• 冷冻租户(店铺), 冷热分离存储
• 相似图片搜索
谢谢
• 欢迎使用 阿里云 云数据库 PostgreSQL . 我们不断深耕SaaS.
• https://www.aliyun.com/database/postgresqlactivity