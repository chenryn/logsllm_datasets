**2020年广东公司新一代BSS-智能日志中心软件开发项目**
**技术规范书**
**中国电信广东公司**
**版权所有**
**简介**
## **目的**
本文档用于描述项目实施的总体技术要求。
## **范围**
本规范书适用于2020年广东分公司新一代BSS-智能日志中心软件开发项目，为项目开发人员，测试人员，运维人员提供技术指导。
## **定义和缩略语**
  ---------- ------------------------------------------------------------------------------------------
  **术语**   **解释**
  物理机     物理机是指一台独立的服务器设备，往往一台物理机上部署多个主机（虚拟主机）
  主机       主机一般指具有独立操作系统的服务器，一个主机通常可以对应一台虚拟机
  仪表盘     仪表盘可以看作是主机类型与指标的关系表，主机类型通过仪表盘可以找到对应的各项指标来展示。
  beaver     智能日志中心搜索引擎
  spl        智能日志中心可编程搜索语言
  ---------- ------------------------------------------------------------------------------------------
## **参考资料**
《2020-2022年中国电信IT系统和数据安全规划和IT安全能力建设规范（试行）》
# **项目建设要求**
## **背景**
随着网络安全态势发展，网络攻击手段的的复杂性、隐蔽性越来越高，企业网络安全面临严峻的考验，急需进一步优化、提升、加强安全分析能力，以应对当前的安全攻击形式。
我司已完成BSS-智能日志中心针对运维数据统一集中、规范管理与基于运维数据进行统一的分析统计及关系分析的能力建设，并根据业务部门的需求完成ACC、CRM等关键系统日志的接入，提供高效定位排障、日志快速搜索、CRM查询统一调用等能力。
当前，我司根据《2020-2022年中国电信IT系统和数据安全规划和IT安全能力建设规范（试行）》指导进行安全分析能力的加强和建设，需要对安全日志统一集中存储，并利用经过过滤和规范化处理的安全日志实现网络层攻击、应用层攻击、用户行为异常、系统安全等46个安全分析场景的建设，完成指导规范要求的同时进一步提升我司安全防护分析能力。经部门讨论决议在BSS-智能日志中心已有的功能模块上对安全类日志的采集能力、格式统一归化能力、安全分析能力进一步提升优化，以达到安全分析能力所需的能力要求。
## **建设范围和目标**
**业务目标：**
1.  优化提升智能日志中心数据处理的功能，使其能够对复杂的安全日志过滤、归并、规范化等。
2.  开发安全规范要求中的网络层攻击、应用层攻击、用户行为异常、系统安全的分析模型。
**平台效益：**
1.  利用安全分析模型对规范化的安全日志分析能力，提升安全分析能力，实现安全事件的自动分析、智能预警、快速定位。
2.  安全日志原始数据按要求规范化处理后可方便快捷进行日志留存、上报，满足日志存储要求和外部数据获取需要。
## **建设原则**
2.3.1整体安全
对可能造成主机信息安全泄漏的各种途径进行全方位管理控制，以实现整体安全为设计原则。
2.3.2智能预警
对各种违规行为进行有效预警、分析，增强的联动策略设置和响应，并允许客户定制增强功能，系统可自动处理安全信息事件。
2.3.3标准开放
可提供标准api接口给其他平台使用，将原始日志信息，或统计结果，告警信息，发送给第三方平台。
2.3.4人性设计
系统的可维护性及易操作性。系统的部署整体上采用B/S架构，简化了客户端电脑载荷，减轻了系统维护与升级的成本和工作量，降低了用户的总体成本；系统界面简洁，层次分明，操作简易。
2.3.5扩展性
本系统在设计时遵循可扩展性原则。支持多区域数据采集，对未来日益增加的数据量，支持横向扩展，只需要增加服务器数量即可满足。
## **建设步骤**
系统建设主要分为以下几部分进行：
1.  需求分析
> 分析2020年广东公司BSS-智能日志中心软件开发项目需求
2.  总体方案设计
> 分析2020年广东公司BSS-智能日志中心优化软件开发项目需求,编写总体实现方案
3.  系统功能开发
> 根据实现方案,开发相关功能
4.  系统功能测试
5.  系统上线测试。
6.  验收测试，生产部署
> 编写系统安装、操作手册、维护手册
7.  系统上线
## **系统总体结构**
![](media/image1.png){width="5.772222222222222in"
height="3.645138888888889in"}
如上图所示，智能日志中心采用分布式计算方式，各模块之间都是项目独立并支持横向扩展,其中主要模块有：
数据采集：通过syslog、snmp、agent代理、ODBC、HTTP、FTP等方式采集安全日志
数据ETL：通过对原始日志的字段提取、规范化、字段和内容替换、字段和内删除、字段和内重命名、原始日志修改以及时间规范化等操作将安全日志进行归并操作使其满足规范化要求
数据引擎：提供数据分析算子、数据搜索、可视化分析等功能
数据分析：利用算子建造模型，通过模型完成安全日志分析事件和告警输出
## **系统组网方案**
![](media/image2.png){width="4.686805555555556in"
height="3.7680555555555557in"}
## **项目进度要求**
  ------ -------------- ------------------------------------ --------------
  序号   关键点         任务说明                             计划完成时间
  1      日志调研       完成日志调研工作                     T+1
  2      日志接入       部署agent采集不同系统的日志          T+2
  3      日志解析       对采集的日志进行字段提取             T+10
  4      日志场景实现   对不同的日志实现不同的场景           T+20
  5      功能完善迭代   上线一段时间内逐步补充完善功能细节   T+4
  ------ -------------- ------------------------------------ --------------
T为签合同的时间节点
# **总体技术要求**
## **系统设计原则**
3.1.1整体安全
对可能造成主机信息安全泄漏的各种途径进行全方位管理控制，以实现整体安全为设计原则。
3.1.2智能预警
对各种违规行为进行有效预警、分析，增强的联动策略设置和响应，并允许客户定制增强功能，系统可自动处理安全信息事件。
3.1.3标准开放
可提供标准api接口给其他平台使用，将原始日志信息，或统计结果，告警信息，发送给第三方平台。
3.1.4人性设计
系统的可维护性及易操作性。系统的部署整体上采用B/S架构，简化了客户端电脑载荷，减轻了系统维护与升级的成本和工作量，降低了用户的总体成本；系统界面简洁，层次分明，操作简易。
3.1.5扩展性
本系统在设计时遵循可扩展性原则。支持多区域数据采集，对未来日益增加的数据量，支持横向扩展，只需要增加服务器数量即可满足。
# **应用软件要求** 
## **系统体系结构要求**
![](media/image3.png){width="4.670138888888889in"
height="4.0368055555555555in"}
##  **业务功能要求-日志过滤**
日志数据录入系统以后，支持识别日志内容后将数据进行格式化提取工作，过滤日志中无效内容。
### **日志字段删除**
支持日志字段删除算子，在日志提取以后，将指定日志字段内容删除，不录入系统。
### **日志内容删除**
支持日志内容删除算子，在日志提取后，将指定日志内容删除，不录入系统。
##  **业务功能要求-日志归并**
### **日志字段增加**
支持日志字段增加算子，可指定字段名称、字段内容增加字段。
### **日志字段替换**
支持字段字段替换算子，可指定字段并替换其字段内容。
### **内部时间戳引用转换**
支持引用日志内部时间戳，并转换为指定格式归并到原始日志中。
### **日志字段重命名**
支持字段重命名算子，可指定字段将字段名称进行修改，字段内容不变。
### **原始日志修改**
支持原始日志修改算子，可对原始日志进行修改，将无效原始日志内容删除，有效日志内容增加、替换、重命名后按某种规范合并后录入系统。
### **日志解析策略转发**
支持日志过滤、合并后将规范化原始日志转发到新的解析策略进行再次解析后入库。
##  **业务功能要求-安全场景分析模型**
### **网络攻击类** 
#### 扫描攻击 
通过对网络安全设备流量、日志进行分析，对扫描引起的数据特征进行监控，
以发现扫描攻击行为。
#### 4.4.1.2攻击画像 
围绕资产角度和攻击角度对攻击进行刻画。以资产维度分析，识别并深入分
析资产受到的攻击、安全现状等;以攻击维度分析，识别攻击者的历史攻击态势、
攻击方式偏好、攻击时间偏好、攻击威胁源等，以便有针对性的进行攻击防护。
### **应用攻击类**
#### Web 高频攻击检测 
通过 WAF、IDS、IPS 的攻击告警日志进行分析，检测在短时间同源 IP 产生