20.2.9.7GLOBAL_STATEMENT_COMPLEX_HISTORY_TABLE............. 1048
20.2.9.8GLOBAL_STATEMENT_COMPLEX_RUNTIME....................1048
20.2.9.9STATEMENT_RESPONSETIME_PERCENTILE.....................1051
20.2.9.10STATEMENT_USER_COMPLEX_HISTORY...................... 1052
20.2.9.11STATEMENT_COMPLEX_HISTORY_TABLE..................... 1052
20.2.9.12STATEMENT_COMPLEX_HISTORY.............................1052
20.2.9.13STATEMENT_COMPLEX_RUNTIME............................1052
20.2.9.14STATEMENT_WLMSTAT_COMPLEX_RUNTIME................. 1055
20.2.9.15STATEMENT_HISTORY....................................... 1057
20.2.10Cache/IO........................................................1061
20.2.10.1STATIO_USER_TABLES.......................................1061
20.2.10.2SUMMARY_STATIO_USER_TABLES............................1062
20.2.10.3GLOBAL_STATIO_USER_TABLES..............................1063
20.2.10.4STATIO_USER_INDEXES......................................1063
20.2.10.5SUMMARY_STATIO_USER_INDEXES...........................1064
20.2.10.6GLOBAL_STATIO_USER_INDEXES.............................1064
20.2.10.7STATIO_USER_SEQUENCES...................................1065
20.2.10.8SUMMARY_STATIO_USER_SEQUENCES........................1065
20.2.10.9GLOBAL_STATIO_USER_SEQUENCES..........................1066
20.2.10.10STATIO_SYS_TABLES....................................... 1066
20.2.10.11SUMMARY_STATIO_SYS_TABLES............................ 1067
20.2.10.12GLOBAL_STATIO_SYS_TABLES.............................. 1067
20.2.10.13STATIO_SYS_INDEXES...................................... 1068
20.2.10.14SUMMARY_STATIO_SYS_INDEXES...........................1069
20.2.10.15GLOBAL_STATIO_SYS_INDEXES.............................1069
20.2.10.16STATIO_SYS_SEQUENCES................................... 1069
南大通用数据技术股份有限公司
XXXVIII
GBase 8s V8.8开发者手册
20.2.10.17SUMMARY_STATIO_SYS_SEQUENCES........................1070
20.2.10.18GLOBAL_STATIO_SYS_SEQUENCES..........................1070
20.2.10.19STATIO_ALL_TABLES....................................... 1071
20.2.10.20SUMMARY_STATIO_ALL_TABLES............................1071
20.2.10.21GLOBAL_STATIO_ALL_TABLES..............................1072
20.2.10.22STATIO_ALL_INDEXES......................................1073
20.2.10.23SUMMARY_STATIO_ALL_INDEXES...........................1073
20.2.10.24GLOBAL_STATIO_ALL_INDEXES.............................1074
20.2.10.25STATIO_ALL_SEQUENCES...................................1074
20.2.10.26SUMMARY_STATIO_ALL_SEQUENCES........................1074
20.2.10.27GLOBAL_STATIO_ALL_SEQUENCES..........................1075
20.2.10.28GLOBAL_STAT_SESSION_CU.................................1075
20.2.10.29GLOBAL_STAT_DB_CU......................................1076
20.2.11Utility.......................................................... 1076
20.2.11.1REPLICATION_STAT..........................................1076
20.2.11.2GLOBAL_REPLICATION_STAT.................................1077
20.2.11.3REPLICATION_SLOTS........................................ 1078
20.2.11.4GLOBAL_REPLICATION_SLOTS............................... 1079
20.2.11.5BGWRITER_STAT............................................ 1080
20.2.11.6GLOBAL_BGWRITER_STAT...................................1081
20.2.11.7GLOBAL_CKPT_STATUS......................................1081
20.2.11.8GLOBAL_DOUBLE_WRITE_STATUS........................... 1082
20.2.11.9GLOBAL_PAGEWRITER_STATUS.............................. 1083
20.2.11.10GLOBAL_RECORD_RESET_TIME.............................1084
20.2.11.11GLOBAL_REDO_STATUS.....................................1084
20.2.11.12GLOBAL_RECOVERY_STATUS............................... 1085
南大通用数据技术股份有限公司
XXXIX
GBase 8s V8.8开发者手册
20.2.11.13CLASS_VITAL_INFO........................................ 1086
20.2.11.14USER_LOGIN...............................................1086
20.2.11.15SUMMARY_USER_LOGIN....................................1087
20.2.11.16GLOBAL_GET_BGWRITER_STATUS...........................1087
20.2.11.17GLOBAL_SINGLE_FLUSH_DW_STATUS....................... 1088
20.2.11.18GLOBAL_CANDIDATE_STATUS.............................. 1088
20.2.12Lock............................................................1089
20.2.12.1LOCKS......................................................1089
20.2.12.2GLOBAL_LOCKS............................................ 1090
20.2.13WaitEvents......................................................1092
20.2.13.1WAIT_EVENTS...............................................1092
20.2.13.2GLOBAL_WAIT_EVENTS..................................... 1092
20.2.14Configuration.................................................... 1093
20.2.14.1CONFIG_SETTINGS.......................................... 1093
20.2.14.2GLOBAL_CONFIG_SETTINGS................................. 1094
20.2.15Operator.........................................................1095
20.2.15.1OPERATOR_HISTORY_TABLE.................................1095
20.2.15.2OPERATOR_HISTORY........................................ 1097
20.2.15.3OPERATOR_RUNTIME........................................1097
20.2.15.4GLOBAL_OPERATOR_HISTORY............................... 1099
20.2.15.5GLOBAL_OPERATOR_HISTORY_TABLE........................1100
20.2.15.6GLOBAL_OPERATOR_RUNTIME...............................1101
20.2.16WorkloadManager................................................ 1102
20.2.16.1WLM_USER_RESOURCE_CONFIG............................. 1102
20.2.16.2WLM_USER_RESOURCE_RUNTIME............................1103
20.2.17GlobalPlancache..................................................1104
南大通用数据技术股份有限公司
XL
GBase 8s V8.8开发者手册
20.2.17.1GLOBAL_PLANCACHE_STATUS...............................1104
20.2.17.2GLOBAL_PLANCACHE_CLEAN............................... 1104
20.2.18RTO&RPO..................................................... 1105
20.2.18.1global_rto_status.............................................. 1105
20.3WDRSnapshotSchema....................................................................................................1105
20.3.1WDRSnapshot 原信息表........................................... 1105
20.3.1.1.1SNAPSHOT.SNAPSHOT.....................................1105
20.3.1.1.2SNAPSHOT.TABLES_SNAP_TIMESTAMP.....................1106
20.3.1.1.3SNAP_SEQ................................................1106
20.3.2WDRSnapshot 数据表............................................. 1106
20.3.3WDRSnapshot生成性能报告........................................1106
20.3.3.1.1 前提条件................................................. 1107
20.3.3.1.2 操作步骤................................................. 1107
20.3.3.1.3 示例..................................................... 1109
20.3.4 查看WDR报告.................................................. 1110
20.3.4.1DatabaseStat.................................................. 1110
20.3.4.2LoadProfile...................................................1111
20.3.4.3InstanceEfficiencyPercentages....................................1112
20.3.4.4Top10EventsbyTotalWaitTime..................................1112
20.3.4.5WaitClassesbyTotalWaitTime...................................1113
20.3.4.6HostCPU.....................................................1113
20.3.4.7IOProfile..................................................... 1114
20.3.4.8MemoryStatistics...............................................1114
20.3.4.9TimeModel................................................... 1114
20.3.4.10SQLStatistics.................................................1115
20.3.4.11WaitEvents...................................................1117
南大通用数据技术股份有限公司
XLI
GBase 8s V8.8开发者手册
20.3.4.12CacheIOStats................................................ 1118
20.3.4.12.1UsertableIOactivityorderedbyheapblkshitratio............... 1118
20.3.4.12.2UserindexIOactivityorderedbyidxblkshitratio................1119
20.3.4.13Utilitystatus..................................................1119
20.3.4.13.1Replicationslot............................................1119
20.3.4.13.2Replicationstat............................................ 1120
20.3.4.14Objectstats...................................................1120
20.3.4.14.1UserTablesstats........................................... 1121
20.3.4.14.2Userindexstats............................................1122
20.3.4.14.3Badlockstats............................................. 1122
20.3.4.14.4Configurationsettings.......................................1123
20.3.4.14.5SQLDetail................................................1123
20.4DBE_PLDEBUGGERSchema........................................................................................1124
20.4.1DBE_PLDEBUGGER.info_breakpoints................................ 1129
20.4.2DBE_PLDEBUGGER.backtrace...................................... 1130
20.4.3DBE_PLDEBUGGER.turn_on........................................1130
20.4.4DBE_PLDEBUGGER.turn_off....................................... 1131
20.4.5DBE_PLDEBUGGER.local_debug_server_info..........................1131
20.4.6DBE_PLDEBUGGER.attach......................................... 1131
20.4.7DBE_PLDEBUGGER.next.......................................... 1132
20.4.8DBE_PLDEBUGGER.continue.......................................1132
20.4.9DBE_PLDEBUGGER.abort..........................................1133
20.4.10DBE_PLDEBUGGER.print_var......................................1133
20.4.11DBE_PLDEBUGGER.info_code.....................................1134
20.4.12DBE_PLDEBUGGER.step..........................................1134
20.4.13DBE_PLDEBUGGER.delete_breakpoint...............................1135
南大通用数据技术股份有限公司
XLII
GBase 8s V8.8开发者手册
20.4.14DBE_PLDEBUGGER.info_breakpoints............................... 1135
20.4.15DBE_PLDEBUGGER.backtrace..................................... 1135
20.4.16DBE_PLDEBUGGER.enable_breakpoint.............................. 1136
20.4.17DBE_PLDEBUGGER.add_breakpoint................................ 1136
20.4.18DBE_PLDEBUGGER.disable_breakpoint..............................1136
20.4.19DBE_PLDEBUGGER.finish........................................ 1137
20.4.20DBE_PLDEBUGGER.set_var....................................... 1137
20.5DB4AISchema.................................................................................................................1138
20.5.1DB4AI.SNAPSHOT................................................1138
20.5.2DB4AI.CREATE_SNAPSHOT....................................... 1139
20.5.3DB4AI.CREATE_SNAPSHOT_INTERNAL............................ 1139
20.5.4DB4AI.PREPARE_SNAPSHOT...................................... 1140
20.5.5DB4AI.PREPARE_SNAPSHOT_INTERNAL........................... 1140
20.5.6DB4AI.ARCHIVE_SNAPSHOT......................................1141
20.5.7DB4AI.PUBLISH_SNAPSHOT.......................................1142
20.5.8DB4AI.MANAGE_SNAPSHOT_INTERNAL........................... 1142
20.5.9DB4AI.SAMPLE_SNAPSHOT.......................................1142
20.5.10DB4AI.PURGE_SNAPSHOT....................................... 1143
20.5.11DB4AI.PURGE_SNAPSHOT_INTERNAL............................ 1143
20.6DBE_PLDEVELOPER....................................................................................................1144
20.6.1DBE_PLDEVELOPER.gs_source..................................... 1144
20.6.2DBE_PLDEVELOPER.gs_errors......................................1144
21 逻辑复制............................................................... 1145
21.1 逻辑解码..........................................................................................................................1145
21.1.1 逻辑解码概述.................................................... 1145
21.1.1.1 功能描述.....................................................1145
南大通用数据技术股份有限公司
XLIII
GBase 8s V8.8开发者手册
21.1.1.2 注意事项.....................................................1146
21.1.2 使用SQL函数接口进行逻辑解码................................... 1148
21.1.2.1 前提条件.....................................................1148
21.1.2.2 操作步骤.....................................................1149
21.2 发布订阅..........................................................................................................................1150
21.2.1 发布............................................................ 1150
21.2.2 订阅............................................................ 1151
21.2.3 冲突处理........................................................ 1152
21.2.4 限制............................................................ 1153
21.2.5 架构............................................................ 1153
21.2.6 监控............................................................ 1154
21.2.7 安全性.......................................................... 1154
21.2.8 配置设置........................................................ 1155
21.2.9 快速设置........................................................ 1155
22GIS插件安装与部署......................................................1156
22.1 准备安装包......................................................................................................................1156
22.2 安装插件..........................................................................................................................1156
22.2.1 安装proj-6.2.1.tar.gz...............................................1156
22.2.2 安装geos........................................................1156
22.2.3 安装libxml2..................................................... 1156
22.2.4 安装gdal........................................................ 1157
22.2.5 安装protobuf.....................................................1157
22.2.6 安装protobuf-c................................................... 1157
22.3 配置环境依赖.................................................................................................................1157
22.4 安装postgis.....................................................................................................................1158
22.5 执行..................................................................................................................................1158
南大通用数据技术股份有限公司
XLIV
GBase 8s V8.8开发者手册
23ForeignDataWrapper......................................................1158
23.1oracle_fdw.........................................................................................................................1159
23.1.1 客户端配置...................................................... 1159
23.1.2 使用oracle_fdw...................................................1160
23.1.3 常见问题........................................................ 1161
23.1.4 注意事项........................................................ 1162
23.2mysql_fdw.........................................................................................................................1162
23.2.1 安装mysql_fdw...................................................1162
23.2.2 使用mysql_fdw...................................................1163
23.2.3 常见问题........................................................ 1164
23.2.4 注意事项........................................................ 1164
23.3postgres_fdw.....................................................................................................................1164
23.3.1 使用postgres_fdw.................................................1165
23.3.2 常见问题........................................................ 1166
23.3.3 注意事项........................................................ 1166
23.4file_fdw.............................................................................................................................1166
23.4.1 使用file_fdw.....................................................1167
23.4.2 注意事项........................................................ 1168
23.5dblink................................................................................................................................1168
23.5.1 常用的dblink函数................................................1168
23.5.2 注意事项........................................................ 1169
24 物化视图............................................................... 1169
24.1 全量物化视图.................................................................................................................1169
24.1.1 概述............................................................ 1169
24.1.2 使用............................................................ 1169
24.1.2.1 语法格式.....................................................1169
南大通用数据技术股份有限公司
XLV
GBase 8s V8.8开发者手册
24.1.2.2 示例.........................................................1170
24.1.3 支持和约束...................................................... 1171
24.1.3.1 支持场景.....................................................1171
24.1.3.2 不支持场景...................................................1171
24.1.3.3 约束.........................................................1171
24.2 增量物化视图.................................................................................................................1171
24.2.1 概述............................................................ 1171
24.2.2 使用............................................................ 1172
24.2.2.1 语法格式.....................................................1172
24.2.2.2 示例.........................................................1172
24.2.3 支持和约束...................................................... 1174
24.2.3.1 支持场景.....................................................1174
24.2.3.2 不支持场景...................................................1174
24.2.3.3 约束.........................................................1174
25GUC参数说明...........................................................1175
25.1GUC使用说明.................................................................................................................1175
25.2 文件位置..........................................................................................................................1175
25.2.1data_directory..................................................... 1175
25.2.2config_file........................................................1176
25.2.3hba_file..........................................................1176
25.2.4ident_file.........................................................1176
25.2.5external_pid_file...................................................1176
25.3 连接和认证......................................................................................................................1177
25.3.1 连接设置........................................................ 1177
25.3.1.1listen_addresses................................................ 1177
25.3.1.2local_bind_address..............................................1178
南大通用数据技术股份有限公司
XLVI
GBase 8s V8.8开发者手册
25.3.1.3port..........................................................1178
25.3.1.4max_connections............................................... 1178
25.3.1.5max_inner_tool_connections......................................1180
25.3.1.6sysadmin_reserved_connections................................... 1180
25.3.1.7unix_socket_directory........................................... 1180
25.3.1.8unix_socket_group..............................................1181
25.3.1.9unix_socket_permissions.........................................1181
25.3.1.10application_name..............................................1182
25.3.1.11connection_info............................................... 1182