of the different techniques. We make no claim that the simulation
is completely realistic, only that it clearly illustrates the proper-
ties of the different anomaly detection techniques. We simulate in
two steps: we ﬁrst create the normal trafﬁc, and then inject anoma-
lies. We create the TM by an orthogonal composition of a synthetic
gravity model TM [22] in the spatial domain, and a periodic Nor-
ros model [18, 23] in the temporal domain. Both models have ar-
guments in their favor but principally we need to create a TM with
low rank, but some local spatio-temporal structure that we might
ﬁnd in a real TM.
We use this model to generate 1000 instances of the TM X con-
sisting of one weeks worth of measurements at 15-minute intervals.
In each instance we inject one anomaly. The anomaly is a spike
added to the TM at a single randomly chosen time point, so that
one anomaly cannot interfere with the detection of another. The
value of the spike is a vector of Gaussian random variables (in each
element of the TM) but we normalize the total size of the spike
(measured by its L2 norm) to be a ﬁxed size, which we vary from
0.1 to 100. Spikes of size 0.1 (in our dataset) are almost indistin-
guishable (by the naked eye) from the standard random variations
in the trafﬁc. Spikes of size 100 are much larger than the typical
TM elements, and so are easily observed. We then apply each of
the three techniques above to create a “normal” trafﬁc vector, and
detect anomalies by thresholding on differences between the nor-
mal and measured vector. Note that we do not have missing data in
the inputs (it is not obvious how to fairly compare the three algo-
rithms when there are missing data, given the better interpolation
performance of SRMF). However the anomalies are included in the
inputs, so that both SVD and SRMF can be compared fairly.
An important detail is the choice of thresholds for outlier detec-
tion. Non-stationarity in our data makes setting thresholds more
difﬁcult than in some problems. When the anomalies are small,
a little ﬁne tuning allows us to ﬁnd threshold values that are sta-
tistically indistinguishable for all three methods. Figure 8 shows
a comparison between the false-alarm probabilities for the three
techniques, showing 95% conﬁdence intervals for the estimates.
For larger anomalies it is hard to tune the false-alarm probabili-
ties for PCA/SVD. The anomaly pollutes the data used to create
the normal subspace, and so invalidates the standard statistical as-
sumptions used to determine thresholds [21]. So it is hard to obtain
thresholds that produce the same false-alarm probabilities for large
anomalies, but the differences in these cases will be inconsequen-
tial for the results. Likewise, it is hard to tune the false-alarm rate
for SRMF and large anomalies, but for the opposite reason:
the
false-alarm rate drops almost to zero too quickly. Given the high
detection rate, this is not a problem in the comparison of results.
Figure 9 shows the detection probabilities for the three tech-
−4
x 10
1.5
y
t
i
l
i
1
0.5
b
a
b
o
r
p
m
r
a
a
e
s
a
l
l
f
0
10
−1
1
0.8
0.6
0.4
0.2
y
t
i
l
i
b
a
b
o
r
p
n
o
i
t
c
e
e
d
t
0
10
−1
Differencing
SVD
SRMF
0
10
1
10
anomaly size
Figure 8: False alarm probability.
2
10
Differencing
SVD
SRMF
0
10
1
10
anomaly size
2
10
Figure 9: Detection probability.
niques. First, let us compare PCA/SVD and Differencing for small
anomalies. When anomalies are small (in value) and hence the dif-
ferences they create will be small, the probability of detection of
these differences will be small. Note that, even though we allow
a larger false-alarm probability as the anomalies get smaller, the
detection probability for Differencing drops dramatically. On the
other hand, PCA/SVD exploits the spatial relationships between
the data elements. It uses all the information available at a particu-
lar time point instead of processing the information from each time
sequence independently. While the performance of PCA/SVD also
declines for smaller anomalies, it is much better than Differencing.
For moderate sized anomalies, both techniques have perfect de-
tection records. These anomalies are not particularly hard to detect
whichever method one uses. On the other hand, when we consider
large anomalies, a different story emerges. The larger anomalies
pollute the data used to create the normal subspace in PCA/SVD,
and this has a tangible effect in that the detection probability drops
dramatically. Note that although the false-alarm probabilities of
the Differencing and PCA/SVD methods are slightly different, the
detection probability of PCA/SVD drops almost to zero, whereas
Differencing maintains its perfect detection record. So we can dis-
count the minor difference in false-alarm probability as causing this
drop. The result is consistent with those observed in data [21].
A solution might be to temporally pre-ﬁlter the data to remove
large anomalies, and then apply PCA/SVD. This introduces the
problem of interpolating data, which we have noted before. A
preferable approach would be to use an approach that deals well
with both ends of the spectrum. SRMF provides such a method.
Figures 8 and 9 show its performance. We can see that its detection
probability is statistically indistinguishable from the better of the
two other methods for each anomaly size. The false alarm prob-
ability is either indistinguishable or well below that of the other
two methods. So SRMF provides a method that deals well with the
complete range of anomalies.
SRMF does this through its use of a spatio-temporal model. In
the case where the spatial model is more effective (small anoma-
lies) this is the part of the algorithm that is “biting”, whereas when
the anomalies are large, they are being detected in the temporal do-
277main, essentially by differencing. What we see here is that by im-
posing temporal smoothness constraint on LRT , the effect of con-
tamination is much smaller. Intuitively, if too much energy leaks
into the normal subspace (as in PCA), then the projection of X into
the normal subspace is no longer smooth, which would then result
in a too big penalty in the smoothness term. Thus the smoothness
term helps to limit the damage of contamination, and avoids the
problem seen in PCA/SVD.
Note that we do not argue that with the naive choices of tem-
poral operator T that we use here that SRMF is the best predic-
tion or anomaly technique for TMs. Given the wealth of methods
available for these applications (e.g., see [30]), one can undoubt-
edly do better by more careful choice of T . However, there is a
lesson to be learned here. First, our regularization approach can
be generalized to apply to any linear prediction/anomaly detection
technique through appropriate choice of T . In each case we would
hope for performance improvements as well, but the more impor-
tant aspect of this work comes from the features we have demon-
strated above: (i) our approach naturally deals with missing data,
(ii) it can ﬂexibly include additional data sources (e.g., link data),
and (iii) anomaly detection (and exclusion) are an inherent part of
the algorithm. We argue that these are ideal features for any set of
algorithms based on TMs.
6. CONCLUSIONS AND FUTURE WORK
By drawing on recent developments in compressive sensing and
relying on readily available domain knowledge in the area of TMs,
we present in this paper a uniﬁed approach to measurement and
analysis of TMs. We achieve this by developing a novel spatio-
temporal compressive sensing framework that exploits the presence
of both global structure (e.g., low rank) and local structure (e.g.,
spatio-temporal properties) in real-world TMs. Whether applied to
TM estimation (i.e., tomography), TM prediction, or anomaly de-
tection, our algorithms consistently outperform other commonly-
used methods and do so across the whole range of missing val-
ues scenarios, from purely random ones to highly structured ones
where whole columns and/or rows of a TM are missing, and from
very low levels of missing values to very high levels (e.g., 90%
and more). The main reason for the superior performance of our
proposed technique when compared to its most widely-used com-
petitors is its reliance on truly spatio-temporal models of TMs that
capture much of the localized structure inherent in actual TMs.
There are a number of avenues for future work. First, we plan
to better tailor our approach to exploit the characteristics of real-
world TMs through more detailed modeling of the spatial and tem-
poral constraint matrices S and T . Second, many of the techniques
described here (including SRMF) naturally extend to tensors (i.e.,
multi-dimensional arrays), so that the original (unvectorized) TMs
can be analyzed directly, i.e., as true 3-d objects with trafﬁc source,
trafﬁc destination, and time as the three axis. Such a tensor treat-
ment of TMs has great potential and presents an opportunity to
build more sophisticated spatio-temporal descriptions of the TM.
Third, we want to more thoroughly explore the application of our
approach to enable scalable network measurement and support im-
portant network engineering tasks such as anomaly detection. Fi-
nally, we would like to formally understand the theoretical proper-
ties of our spatio-temporal compressive sensing framework.
Acknowledgments
We thank Patrick Thiran and the anonymous reviewers for their
valuable feedback. This work was supported in part by NSF grants
CNS-0546720, CNS-0615104, and CNS-0627020, and ARC grant
DP0665427. We would also like to thank UCLA IPAM for provid-
ing a forum for many valuable discussions related to this work, and
the Abilene and GÉANT networks for providing data.
7. REFERENCES
[1] The Abilene Observatory Data Collections. http://abilene.
internet2.edu/observatory/data-collections.html.
[2] D. Alderson, H. Chang, M. Roughan, S. Uhlig, and W. Willinger. The many
facets of Internet topology and trafﬁc. Networks and Heterogeneous Media,
1(4):569–600, 2006.
[3] P. Barford, J. Kline, D. Plonka, and A. Ron. A signal analysis of network trafﬁc
anomalies. In Proc. of ACM SIGCOMM Internet Measurement Workshop, 2002.
[4] R. Bell, Y. Koren, and C. Volinksy. Chasing the $1,000,000: How we won the
Netﬂix progress prize. Statistical Computing and Graphics, 18(2), 2007.
[5] E. Candes and B. Recht. Exact matrix completion via convex optimization.
preprint.
[6] E. Candes and T. Tao. Near optimal signal recovery from random projections:
Universal encoding strategies? IEEE Trans. on Information Theory,
52(12):5406–5425, 2006.
[7] F. R. K. Chung. Spectral Graph Theory. CBMS Lecture Notes. AMS
Publications, 1996.
[8] D. Donoho. Compressed sensing. IEEE Trans. on Information Theory,
52(4):1289–1306, 2006.
[9] V. Erramilli, M. Crovella, and N. Taft. An independent-connection model for
trafﬁc matrices. In Proc. of Internet Measurement Conference (IMC), 2006.
[10] A. Feldmann, A. Greenberg, C. Lund, N. Reingold, J. Rexford, and F. True.
Deriving trafﬁc demands for operational IP networks: Methodology and
experience. IEEE/ACM Transactions on Networking, pages 265–279, 2001.
[11] B. Fortz and M. Thorup. Optimizing OSPF/IS-IS weights in a changing world.
IEEE JSAC Special Issue on Advances in Fundamentals of Network
Management, Spring 2002.
[12] L. Huang, X. Nguyen, M. Garofalakis, J. Hellerstein, M. Jordan, M. Joseph,
and N. Taft. Communication-efﬁcient online detection of network-wide
anomalies. In Proc. of IEEE INFOCOM, 2007.
[13] A. Lakhina, M. Crovella, and C. Diot. Diagnosing network-wide trafﬁc
anomalies. In Proc. of ACM SIGCOMM, 2004.
[14] A. Lakhina, K. Papagiannaki, M. Crovella, C. Diot, E. D. Kolaczyk, and
N. Taft. Structural analysis of network trafﬁc ﬂows. In Proc. of ACM
SIGMETRICS / Performance, 2004.
[15] D. D. Lee and H. S. Seung. Algorithms for non-negative matrix factorization. In
Proc. of Neural Information Processing Systems (NIPS), pages 556–562, 2000.
[16] Y. Mao and L. K. Saul. Modeling distances in large-scale networks by matrix
factorization. In Proc. of Internet Measurement Conference (IMC), 2004.
[17] A. Medina, N. Taft, K. Salamatian, S. Bhattacharyya, and C. Diot. Trafﬁc
matrix estimation: Existing techniques and new directions. In Proc. of ACM
SIGCOMM, 2002.
[18] I. Norros. A storage model with self-similar input. Queueing Systems,
16:387–396, 1994.
[19] B. Recht, M. Fazel, and P. A. Parrilo. Guaranteed minimum rank solutions to
linear matrix equations via nuclear norm minimization. preprint.
[20] B. Recht, W. Xu, and B. Hassibi. Necessary and sufﬁcient conditions for
success of the nuclear norm heuristic for rank minimization. In Proc. of 47th
IEEE Conference on Decision and Control, 2008.
[21] H. Ringberg, A. Soule, J. Rexford, and C. Diot. Sensitivity of PCA for trafﬁc
anomaly detection. In Proc. of ACM SIGMETRICS, 2007.
[22] M. Roughan. Simplifying the synthesis of Internet trafﬁc matrices. SIGCOMM
Computer Communications Review, 35(5):93–96, 2005.
[23] M. Roughan and J. Gottlieb. Large-scale measurement and modeling of
backbone Internet trafﬁc. In Proc. of SPIE ITCOM, 2002.
[24] M. Roughan, M. Thorup, and Y. Zhang. Trafﬁc engineering with estimated
trafﬁc matrices. In Proc. of Internet Measurement Conference (IMC), 2003.
[25] A. Soule, A. Lakhina, N. Taft, K. Papagiannaki, K. Salamatian, A. Nucci,
M. Crovella, and C. Diot. Trafﬁc matrices: Balancing measurements, inference
and modeling. In Proc. of ACM SIGMETRICS, pages 362–373, 2005.
[26] S. Uhlig, B. Quoitin, S. Balon, and J. Lepropre. Providing public intradomain
trafﬁc matrices to the research community. ACM SIGCOMM CCR,
36(1):83–86, 2006.
[27] Y. Vardi. Network tomography. Journal of the Amer. Stat. Assoc., Mar. 1996.
[28] G. Varghese and C. Estan. The measurement manifesto. In Proc. of 2nd
Workshop on Hot Topics in Networks (HotNets-II), 2003.
[29] K. Xu, J. Chandrashekar, and Z.-L. Zhang. A ﬁrst step toward understanding
inter-domain routing dynamics. In Proc. of ACM SIGCOMM Workshop on
Mining Network Data (MineNet), pages 207–212, 2005.
[30] Y. Zhang, Z. Ge, M. Roughan, and A. Greenberg. Network anomography. In
Proc. of Internet Measurement Conference (IMC), 2005.
[31] Y. Zhang, M. Roughan, N. Dufﬁeld, and A. Greenberg. Fast accurate
computation of large-scale IP trafﬁc matrices from link loads. In Proc. of ACM
SIGMETRICS, 2003.
[32] Y. Zhang, M. Roughan, C. Lund, and D. Donoho. An information-theoretic
approach to trafﬁc matrix estimation. In Proc. of ACM SIGCOMM, 2003.
[33] Y. Zhang, M. Roughan, C. Lund, and D. Donoho. Estimating point-to-point and
point-to-multipoint trafﬁc matrices: An information-theoretic approach.
IEEE/ACM Transactions on Networking, 13(5):947–960, 2005.
[34] Q. Zhao, Z. Ge, J. Wang, and J. Xu. Robust trafﬁc matrix estimation with
imperfect information: Making use of multiple data sources. SIGMETRICS
Perform. Eval. Rev., 34(1):133–144, 2006.
278