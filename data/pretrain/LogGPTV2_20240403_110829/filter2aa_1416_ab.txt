• Analytic signal:
– Amplitude and phase
– ‘Real’ and ‘imaginary’ components (negative 
frequency)
– Encode more information
Quadrature Modulation
• Analytic signals can be sampled by having two 
ADCs
• Baseband must first be separated into 
quadrature components (real and imaginary 
parts)
• Mix baseband with:
– In‐phase local oscillator (I channel)
– Quadrature‐phase LO (Q channel)
Sample Rate
• Analytic signal has two components
– I & Q samples per sample time
• Negative frequency
– Double the bandwidth
• Re‐apply Shannon’s sampling theorem:
– Sampling rate directly determines bandwidth
• Produce a stream of complex stream (I/Q 
samples pairs) at sample rate
SDR (De‐)modulation
• Complex stream passed through mathematical 
functions and state machines
The
Universal
Software
Radio
Peripheral
(USRP 1)
Sample rate = bandwidth
0.25 ‐ 16 MHz
With WBX daughterboard:
RX/TX: 50 MHz ‐ 2.2 GHz
The FUNcube Dongle
RTL
Host Software
• Receive/transmit baseband samples
– Analyse & display
– (De‐)modulate
– Encode/decode (extract information)
• Well‐known platforms/programs:
– LabVIEW
– MATLAB Simulink
Open source? No.
GNU Radio
• Open source signal processing toolkit
• Data flow paradigm
– Signals flow from sources to sinks
• Intermediary blocks operate on signals
– Sources & sinks: USRP, sound card, file, network
– Visualisation: FFT, waterfall, scope
– Signal types: complex, float, integers
– Filters: traditional building blocks used in analog and 
digital RF hardware
• Completely extensible (Python: high level, C++: 
grunt)
GNU Radio Companion
2G GSM Waterfall
8 MHz wide (8 Msps)
Broadcast 
control channel
Traffic channel
CDMA Detection with GRC
Find repeating 
patterns buried 
within a signal
Visualise intensity 
of frequency 
components 
over time
Visualise 
instantaneous
frequency spectrum
2.1 GHz 3G
850 MHz NextG
L1 GPS
3G W‐CDMA
Signature of UMTS: repeating data in CPICH at 10 ms intervals
No apparent signal
Cyclic 1023 bit code @ 1.023 MHz chip rate
1 ms
TETRA
Frequency correction burst
Repeating idle pattern
TETRA
π/4 DQPSK 
USRP out and about
Amateur Digital Modes
The Entire HAM Band
Stereo FM with RDS: Receiver
Stereo FM with RDS: Transmitter
Sequential 
Scanning
Parallel Decoding
Parallel Decoding: 1
Parallel Decoding: N
OpenBTS
• Open‐source 2G GSM stack
– Asterix softswitch (PBX)
– VoIP backhaul
802.11agp decoding
• 10/20 MHz OFDM
• gr‐ieee‐802‐11
• BPSK & QPSK
Other Applications of SDR
• Radio astronomy
• Passive radar
• DVB‐S decoder
• Tracking pedestrian foot traffic in 
shopping malls
• Much more…
Mode S Waterfall
Time Domain
Preamble
Frame
Time Domain
Preamble
Frame
Data bits from early/late chips
Starting Points
• gr‐air by Eric Cottrell
– Separates processing into several different GR blocks 
which detect/decode:
1.
Pulses
2.
Mode S preamble
3.
Frame length
4.
PPM chips/bits
• gr‐air‐modes by Nick Foster
– Less complex (fewer steps)  better performance
– Less overhead by using PMTs instead of passing state 
structs as ‘samples’ through GR runtime
Mode S Response: AM signal
Preamble
Payload
Decoder visualisation
Mode S Decoder Structure
Frame parser
Error correction
Sanity check
Pulse
detect
Preamble
detect
Frame 
length 
detect
PPM
demod
…,0,1,…
Mode S Frame Types
• Several Downlink Formats (DF)
– Short/long frames (56/112 bits)
• Contains Airframe Address (AA)
– 24‐bit transponder address allocated by ICAO
• Appended CRC
– ‘Normal’ mode (syndrome = 0)
– Address overlaid mode (syndrome = AA)
• DF 11: All call, 5/20: Identity (squawk code), 
0/4/16/20: Altitude…
ADS‐B: Extended Squitter
• Several ES types (DF 17):
– Standard: position, altitude, heading, vertical rate, 
flight ID, transponder code
– System information
– Aircraft capabilities/status (e.g. autopilot enabled)
– Aircraft intent
– Traffic information
– TCAS resolution advisories (“Pull up!”)
Making use of ADS‐B data
Making use of ADS‐B data
Making use of ADS‐B data
Making use of ADS‐B data
AviationMapper
• Connects to Mode S decoder server
• Tracks & plots airframes, collects statistics
• Provides state server for web streaming
Live, smooth web 
streaming in…
Modez Mk I
Modez Mk IIpoint5
Modez Mk III
Ground vehicle with Mode S! 
(inspecting perimeter?)
Next Level Modez
BorIP
• Allows USRP 1 and computer to be separated 
by LAN
– Control radio via TCP
– Stream baseband via UDP
• Seamless drop‐in for GR
– If it can’t find a local device, try remote
– Everything just works (USRP Source, GR, etc)
BorIP
• Allows USRP 1 and computer to be separated 
by LAN
– Control radio via TCP
– Stream baseband via UDP
• Seamless drop‐in for GR
– If it can’t find a local device, try remote
– Everything just works (USRP Source, GR, etc)
Antenna to Google Earth
Capture & Control (USRP)
Mode S Decoder (GR)
Tracking (AvMap)
Web App
Gateway
Web Client  (Google Earth)
TCP Server
JSON Server
HTTP
AJAX
BorIP
Modez Evolution
• Goal is to increase SNR
– Increase gain: tuned antenna
– Drop noise floor: front‐end filter (GSM is nearby) 
& optimal sample rate to avoid artifacts (spurs)
Signal Strength Distribution
• Evaluate how well decoder is doing
SNR vs. Gain
Change USRP/WBX gain
Make use of fixed (ground) transponders
Noise floor
Strength vs. Distance
Altitude vs. Distance
Helps to live close to the airport
Strength vs. Altitude
ACARS
• Aircraft Communication and Reporting System
• ‘Text messaging’ for aircraft
• Wide‐reaching network
– VHF ground stations
– HF datalink
– SATCOM
• Manual and automated messages between:
– Cockpit, ATC, airline ops & airport ground staff
– Avionics/engines, airline maintenance & equipment 
(engine) manufactures
Streaming
• Listening to 
primary & 
secondary 
frequencies
• Decoded, 
combined, 
JSON‐ified & 
served
AM ACARS burst
Examples
Time:      2011-11-16 09:12:24.073000
Station:   Home
Frequency: 131.55 MHz
Mode:      s (uplink, LCN: 19)
Address:   9M-MPO
Ack:       NAK
Label:     31: Airline Defined Message
Block:     W
S
1. TOILET CC1-INOP
2. ROW 30-31 DEFG-CARPET FLOOR VERY WET
2. GALLEY 3-CART LIFT FLOODED
Examples
Time:      2011-11-16 09:49:00.255000
Station:   Home
Frequency: 131.45 MHz
Mode:      2 (either)
Address:   VN-A375
Ack:       NAK
Label:     H1: System and engineering data (downlink)
Block:     4
Message #: C12A
Flight ID: VN0773
#CFB.1/MPF/ANVN-A375/FIHVN773    
/DM111115224900NOV1514042244PFR1/DAVVTS/DSYSSY/FR383141VSC    
1,,,,,,,LAV 37,HARD,140505;237346CIDS1  1,,,,,,,DEU A 
(200RH2),HARD,140505;383141VSC    1,,,,,,,LAV 53,HARD,174906;
Examples
Time:      2011-11-16 09:49:06.844000
Station:   Home
Frequency: 131.45 MHz
Mode:      2 (either)
Address:   VN-A375
Ack:       NAK
Label:     H1: System and engineering data (downlink)
Block:     5
Message #: C12B
Flight ID: VN0773
#CFB383141VSC    1,,,,,,,LAV 61,HARD,202806;344137WXR2   
1,,,,,,,WXR MOUNTING TRAY (5SQ),INTERMITTENT,203506,EOR
HFDL
PC‐HFDL
What about no ADS‐B?
• No position reports
• Signal is high bandwidth
• Multiple remote USRPs can be sync’d with 
GPSDO
• Perform multilateration on non‐ADS‐B (‘plain 
old’ Mode S)
• Calculate position from TDOA
Blind Signal Analysis
Recap
• Lots of different types of satellites
• Variables:
– Purpose: comms, weather, MIL, amateur
– Payload: transponders, cameras/sensors
– Orbit: Low Earth Orbit, geostationary (geosync)
– Frequencies: uplink, downlink, beacon, command
• Two categories:
– Intelligent: communication with on‐board systems
– Dumb: relay information with linear transponders
Wide‐area re‐broadcast
• RF megaphone (e.g. satellite TV)
• Single dish sends beam on uplink to satellite
Wide‐area re‐broadcast
• RF megaphone (e.g. satellite TV)
• Single dish sends beam on uplink to satellite
• Linear transponder shifts raw RF to downlink 
frequency, re‐transmitted via spot beams
Wide‐area re‐broadcast
• RF megaphone (e.g. satellite TV)
• Single dish sends beam on uplink to satellite
• Linear transponder shifts raw RF to downlink 
frequency, re‐transmitted via spot beams
• Cover any entire country
Wide‐area re‐broadcast
• RF megaphone (e.g. satellite TV)
• Single dish sends beam on uplink to satellite
• Linear transponder shifts raw RF to downlink 
frequency, re‐transmitted via spot beams
• Cover any entire country
• Linear transponders are dumb: re‐broadcast 