12.创建单元测试
13.执行单元测试
绿
14.编写系统代码
15.执行单元测试
16.执行实例
17.版本控制系统代码
18.执行实例
19.执行实例
重构
20.重构系统代码
21.执行实例和单元测试
设计者
2012
---
## Page 2014
首先，设计者（SME、分析员、测试员）需要一个强有力的开发环
境，它要包含主流软件开发环境所提供的特性：完成代码、动态语
法检查、重构和版本控制（包括功能测试的拆分、合并，以及支持
DSTL代码）。其中对DSTL的支持必不可少。说明语言的格式和工
具的界面及感觉应该能被各种非技术人员所接受。
读者
读者（SM企）必须能够迅速理解实例以便对系统功能有一个清晰和
无歧义的认识。读者要求实例组织良好并易于浏览和查找。同时建
立各个需求工件间必要的联系及跳转路径。
执行者
许多不同的角色由于各自的原因在多个时刻执行实例：我们必须能
满足这一要求：
作者创建实例时在TDD工具中执行实例。
开发者和自动化者编写系统代码时在他们的开发环境中执行实例。
读者通过桌面工具（如浏览器）运行实例以同意该需求说明。
其他角色也可以使用自动化实例提高他们的工作。例如，市场人员
和销售人员可以通过运行实例建立示例数据并在正式演示前确保系
统稳定。
工具必须支持将多个实例任意地组合成套，不论是基于静态的还是
动态的元数据（例如，优先级、故障、功能区域）。另外，工具还
必须具备在任意执行环境下调试以及随意地在实例、DSTL和系统编
码之间切换的功能。
结果使用者
结果使用者（程序员、测试员、技术支持人员、发布经理等）关注
一个特定的实例是否通过、为什么失败以及在哪儿失败等细节。他
们希望由错误切换到实例中特定的行，然后再转到系统代码的对应
位置。记录测试结果的历史可以提供有价值的过程和趋势分析信
息。
2013
---
## Page 2015
报告使用者
报告使用者（项目经理、发布经理、监察员、审计员等）关注于统
计的测试结果以便于跟踪项目进程以及作出最终决策。
所有上述核心特征，以及更多的其他外围特征共同定义了TDD支撑
工具的新标准。
团队协作
XP将递增的、选代的生命周期理念发挥到了极限，如图14-6所示。
之前介绍的美的各个方面结合在一起形成了一个有力有效的协同
体。
TDD:实例
TDD：单元测试
探索测试
性能测试
负载测试
回归测试
可用性测试
安全性测试
失效
冒烟测试
图14-6XP递增的和演化的生命周期
图中贯穿计划阶段到部署阶段的竖线标记了三个不同的循环过程。
一个循环始于轻量级的计划，目的是确定下一次需要关注的场景。
它以运行并测试场景作为结束，并被部署于一个新环境中以供后续
测试。
短一点的竖线贯穿分析阶段到测试阶段，代表着一个循环内的多个
场景。一个特定的场景有其自身的开发生命周期：分析、设计、开
发和测试。它与整个系统的其他部分始终有机地结合在一起。
2014
---
## Page 2016
图中高亮标注的部分包括了所有关键处理步骤及团队中有关的角
色：
分析
编写和自动化生成实例要求各种角色通力合作，各自提供其视角和
技能：领域专家、业务分析员、测试人员、工具作者、技术文档撰
写人和体验设计师。
设计
开发者和测试人员在单元级测试驱动并发阶段紧密合作。易测的设
计使自动化的、半自动化的和人工的测试更加高效。没什么不能测
试。
并发
自动化的测试套件在开发阶段频繁运行以确保软件新的改变或代码
重构没有引入什么副作用。
测试
与其他同类方法截然不同，测试阶段一开始XP测试员收到的就是稳
定且符合当前需求的代码。在TDD对于质量的保障措施之下，测试
人员能将他们的技能和精力集中于探索、集成和非功能测试上。
这种团队合作、勇气、持续的测试定义了整个产品质量意义上美的
新标准。
体验TDD之美
美存在于旁观者的眼睛和心里。别人会发现狄德罗的书房装修后相
比原来脏乱不堪的样子改善了很多。但他本人却对结果不那么满
意，他写了一篇文章叫“与旧睡袍离别之后的烦恼”山。狄德罗认为
自己因那件红色的新袍子引发的一系列“意料之外”多米诺效应付出
了太多金钱和精力。
狄德罗效应理论来源于对消费者行为和其后倾向的研究。它揭示了
一个事实，即改善某一个独立的环节可能引发诸多意料之外的后
果。本章实际上也对那些希望使用TDD的团队提出类似的提醒：除
2015
---
## Page 2017
了选择一个自动化的测试工具之外，TDD还包括许多其他工作。团
队必须适应发生在各种角色身上的改变，也应该愿意与之前熟悉的
方式分道扬：
需求说明与之前相比有所不同而且要求更多，回报是说明可信性的
空前提高。
TDD实践直接影响系统设计和编码的所有层次。
工作节奏由循环长度和红-绿-重构循环决定。
一种新的强有力的工具支持并促进那些交叉协作的工作。
角色协作形成了一个更丰富和更加内联的网络，特别是测试员的角
色被更早引入项目中并被赋予了更多含义。
只要团队在工作时掌握好比例和平衡，TDD就会成为一次美好的经
历。
[山]
http://fr.wikisource.org/wiki/Regrets_sur_ma_vieille_robe_de_chambre
参考文献
Andrea,J.,G.Meszaros,S.Smith.2002."Catalog of XP Project'Smells."The
ThirdInternational Conference on Extreme Programming and Agile
Processes in Software Engineering,XP2002, May.Alghero,Sardinia,Italy.
Andrea,J.2005."Brushing Up On Functional Test Effectiveness."Better
SoftwareMagazine,November/December，26-31.
Beck,K.2000.Extreme Programming Explained:Embrace
Change.Boston:Addison-Wesley.Cockburn,A.2002.Agile Software
Development.Boston:Addison-Wesley, 113-172.
Hendrickson,E.2009."From the Mailbox:Fully Automated GUI
Testing?"http://testobsessed.com/2009/05/18/from-the-mailbox-fully-
automated-gui-testing/
Huntley,H.E.1970.The Divine Proportion:A Study in Mathematical
Proportion.New York:Dover Publications.
2016
---
## Page 2018
Jeffries,R.2004."A Metric Leading to
Marick,B.2008."Position statement for functional testing tools
for-functional-testing-tools-workshop/.
McCracken,G.1988.Culture and Consumption:New Approaches to the
Symbolic Character of Consumer Goods and
Activities.Bloomington,IN:Indiana University Press,118-129
Meszaros,G.2007.xUnit Test Patterns:Refactoring Test
Code.Boston:Addison-Wesley.
第15章完美测试是商业成功的基石
Lisa Crispin
2009年3月份，在BrianMarick的“软件之旅"期间，他参观了我们的团
队。Brian接见了我们这个有5年以上磨合经验的敏捷团队中的一些成
员。从这个小组采用敏捷开发Scrum方法的2003年开始，我就已经是
其中一名测试工程师了。当Brian和我的谈话到了最后阶段时，他
，
作。"听完后我大笑，不过这确实是真的。我儿乎把所有的时间都用
在谈论我们怎样在一起研究出更好的办法，来提供更多商业价值。
人们试图用各种各样的方法去量化测试。那么“质量”呢？我想大部
分人们应该不会把“美丽"和“测试"用在一起造句吧。但是对于我来
说，测试之美就美在我们的团队对“质量”有着绝对的使命感，做
“对"的事情，并把事情做“对”。我在ePlan服务公司的团队对于测试
的热忧就在于想要帮助企业实现健康成长。测试是整个软件开发中
一个完整的部分，价值和作用等同于代码编写。团队里的每个人都
投身于寻找创造更高品质软件的可能性，这意味着团队中的每一个
成员都享受着测试之美。
我的团队对测试驱动并发的承诺，不仅仅是单位层次上，而且是面
向商业层次的，帮助我们公司的业务实现盈利以及快速增长的承
诺。我们包含了进程和特性的软件，使我们的竞争对手们相形见
出。每两周，我们就会为产品发布新的商业价值。我们与我们的业
务专家和客户并肩工作，为商务解决方案贡献自己的想法。我们的
2017
---
## Page 2019
回归测试实现了100%的自动化，并且这些测试让我们无所畏惧地重
构和实施新的功能。如果你从未有过这些经历，那我可以告诉你那
是令人难以置信的自由和强大。我们的团队对每次都能提出好的解
决方案非常有信心。
2018
---
## Page 2020
供最大化的商业价值
痛苦的波峰
测试自动化金字塔