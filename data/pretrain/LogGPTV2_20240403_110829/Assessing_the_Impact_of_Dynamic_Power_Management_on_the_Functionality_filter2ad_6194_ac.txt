400
600
awake period [ms]
Figure 3. Performance comparison of the rpc
benchmark with and without DPM for the Marko-
vian model (left) and the general model (right).
Figure 4. Performance comparison of the stream-
ing benchmark with and without DPM for the
Markovian model.
erage client processing time is 9.7 msec, the average client
timeout is 2 msec, and the average DPM shutdown period
varies between 0 and 25 msec.
Second, we have to deﬁne the performance measures of
interest via reward structures. They are expressed in the
companion language of Æmilia as follows:
MEASURE throughput IS
ENABLED(C.process_result_packet)
-> TRANS_REWARD(1);
MEASURE waiting_time IS
ENABLED(C.monitor_waiting_client)
-> STATE_REWARD(1);
MEASURE energy IS
ENABLED(S.monitor_idle_server)
-> STATE_REWARD(2)
ENABLED(S.monitor_busy_server)
-> STATE_REWARD(3)
ENABLED(S.monitor_awaking_server)
-> STATE_REWARD(2)
The results of the performance analysis conducted on the
Markovian models of rpc are reported in the left-hand-side
graphs of Fig. 3. Throughput, average waiting time, and en-
ergy per request are plotted as a function of the timeout used
by the DPM to issue shutdown commands. The energy per
request is obtained as the ratio of the energy to the through-
put.
Dot-dashed lines refer to the system without DPM, while
solid lines refers to the same system with DPM. As ex-
pected, the shorter the timeout, the larger the impact of
DPM. The limiting situations are represented by a DPM
that issues a shutdown command as soon as the server goes
idle (timeout = 0) and by a DPM that never issues shut-
down commands (timeout = (cid:0)). In the ﬁrst case the impact
of DPM is maximum, while in the last case the DPM has no
effect.
It is also worth noting that the DPM is never counterpro-
ductive in terms of energy, meaning that the additional en-
ergy required to wake the server up from the sleep state is
compensated, on average, by the energy saved while sleep-
ing. On the other hand, energy savings are always paid in
terms of performance penalties (i.e., reduced throughput
and increased waiting time), so that the DPM is not trans-
parent to the client.
4.2. Application to streaming
As far as the value of the parameters for the Markovian
models of streaming are concerned, we assume that the ac-
cess point buffer size and the client buffer size is 10, the
average server service time is 67 msec, the average packet
propagation time is 4 msec, the packet loss probability is
0.02, the average NIC checking time is 5 msec, the aver-
age NIC awaking time is 15 msec, the average initial client
delay time is 684 msec, the average client rendering time
is 67 msec, the average DPM shutdown period is 5 msec,
and the average DPM awake period varies between 0 and
800 msec.
For the streaming application we evaluate the impact of
DPM based on four metrics expressed in the companion lan-
guage of Æmilia: the average energy consumed by the NIC
to receive each frame (energy per frame), the probability
of losing a frame because of a buffer-full event (loss), the
probability of violating a real-time constraint because of a
buffer-empty event (miss), and the overall quality of service
measured as the probability of delivering a video frame in
time (quality).
The four measures are plotted in Fig. 4 as functions of
the awake period of the PSP protocol. Solid and dot-dashed
curves refer to the Markovian models with and without
Proceedings of the 2004 International Conference on Dependable Systems and Networks (DSN’04) 
0-7695-2052-9/04 $ 20.00 © 2004 IEEE 
Authorized licensed use limited to: Tsinghua University. Downloaded on March 20,2021 at 05:37:20 UTC from IEEE Xplore.  Restrictions apply. 
DPM, respectively. As expected, the DPM has a larger im-
pact for longer awake periods. In fact, the longer the awake
period, the longer the sleep time of the NIC, regardless of
the actual trafﬁc. This has a beneﬁcial impact on consump-
tion and a negative effect on service quality. Interestingly,
the loss rate is non monotonic. This can be explained by ob-
serving that the loss rate is the sum of the contributions of
both buffers. When the NIC is in low-power doze mode, no
frames can be received, thus ﬁlling up the AP buffer, while
emptying the client-side buffer. For short-enough awake pe-
riods, the lower pressure on the client-side buffer overcomes
the effect of the increased pressure on the AP buffer.
It is also worth noting that for awake periods between 0
and 100 msec, the energy per frame decreases much faster
than the overall quality, while for awake periods above
100 msec the marginal energy savings become negligible
at the cost of sizeable quality degradations. In practice, an
awake period of 50 msec provides energy saving around
70% at the cost of a negligible impact on service quality.
5. Comparing the General Models
The third model considered in the methodology of Fig. 1
is a general model obtained from the Markovian one by re-
placing exponentially distributed delays with generally dis-
tributed delays wherever necessary, thus resulting in a more
realistic description of the system with and without DPM.
Replacing exponential distributions with general distri-
butions may not be a smooth process. This is the case e.g.
with Æmilia, as it does not directly support general distribu-
tions. The above replacement in Æmilia requires to switch
from a continuous-time description to a discrete-time one
regulated by a clock, in which the event occurrences are
scheduled by sampling the corresponding action durations
from general probability distributions. As a consequence,
in general we need to guarantee some form of performance
consistency between the general model and the Markovian
model. This is accomplished by verifying that both models
result in comparable values for the considered average per-
formance measures when substituting exponential distribu-
tions for general distributions in the general model.
Besides such a performance-related validation, we ob-
serve that the replacement of exponential distributions with
general distributions no longer having inﬁnite support may
alter the state space of the general model with respect to the
state space of the Markovian model, hence the functional
properties of the two models. As a consequence, in such a
case the noninterference analysis must be repeated on the
general model.
The general models with and without DPM can be sim-
ulated through standard techniques in order to estimate at a
certain conﬁdence level the same average performance mea-
sures of interest. In the speciﬁc case of Æmilia, the simula-
DPM - General (exp)
DPM - Markov
NO-DPM - General (exp)
NO-DPM - Markov
2
1.5
1
n
o
i
t
p
m
u
s
n
o
c
y
g
r
e
n
e
r
e
v
r
e
s
0.5
0
5
10
15
20
25
shutdown timeout [ms]
Figure 5. Validation of the general model of the
rpc benchmark.
tion parameters – run number and run length – are provided
in an auxiliary speciﬁcation, together with the reward-like
description of the performance measures to be estimated.
Due to lack of space, in the following we leave out
the Æmilia speciﬁcations of the general models of the
two case studies, as well as the simulation-related aux-
iliary speciﬁcations. Such speciﬁcations can be found at
www.sti.uniurb.it/bernardo/twotowers/
5.1. Validation
Since the general model for both case studies is obtained
from the Markovian one via discretization, a consistency
check is needed. Using TwoTowers we have carried out
a parametric cross-validation by assigning to the general
model exponential distributions consistent with the rates
of the corresponding Markovian model. The general model
has then been simulated and the results compared with those
obtained by analyzing the Markovian model.
Due to lack of space, we show in Fig. 5 only the results
for the rpc benchmark. This ﬁgure plots the estimates pro-
vided by the general and Markovian models for different
values of the shutdown period. Simulation results have been
obtained by averaging over 30 runs. Error bars are used in
the plot to represent the 90% conﬁdence intervals.
The good agreement between the values of the consid-
ered performance measure for the two models is apparent.
On the other hand, the values are not identical mainly be-
cause of the discretization applied when introducing the
general distributions.
Proceedings of the 2004 International Conference on Dependable Systems and Networks (DSN’04) 
0-7695-2052-9/04 $ 20.00 © 2004 IEEE 
Authorized licensed use limited to: Tsinghua University. Downloaded on March 20,2021 at 05:37:20 UTC from IEEE Xplore.  Restrictions apply. 
5.2. Application to rpc
The values of the parameters of the general models of the
rpc benchmark are similar to those of the corresponding
Markovian models, with the difference that the server ser-
vice time, the server awaking time, the client processing
time, the client timeout, and the DPM shutdown period are
now deterministic, while the the packet propagation time is
normally distributed (with standard deviation 0.0345 msec).
Comparative simulation results with and without DPM
are plotted in the right-hand-side graphs of Fig. 3 for dif-
ferent (deterministic) shutdown periods. First of all, we ob-
serve that there is a sizeable difference from the results ob-
tained for the Markovian model (reported on the left-hand-
side of the same ﬁgure). This difference motivates the ap-
plication of a general speciﬁcation to model systems char-
acterized by non-exponential distributions.
The three parameters of interest have a bi-modal de-
pendence on the shutdown timeout: for timeouts shorter
than the average idle period (11.3 msec), the energy grows
linearly with the timeout, while the waiting time and the
throughput are constant; for timeouts larger than the aver-
age idle period, the DPM has no effect on the measured pa-
rameters. In a deterministic system, the transition between
the two modes would be instantaneous. The smooth transi-
tion observed in Fig. 3 for timeout values around the aver-
age idle period is due to the normal probability distribution
associated with the radio channels.
From the graphs we observe that: (i) the DPM is counter-
productive if the timeout value is close to the actual idle pe-
riod (in this case, in fact, the server needs to wake up right
after a shutdown), (ii) energy savings provided for short
timeouts are paid both in terms of waiting time and in terms
of throughput, (iii) the DPM is transparent to the user in
terms of performance only when it does not provide any en-
ergy saving.
e
m
a
r
f
r
e
p
y
g
r
e
n
e
s
s
i
m
150
100
50
0
0.5
0.4
0.3
0.2
0.1
0
-0.1
0
NO-DPM
DPM
200
400
600
800
0
awake period [ms]
0.20
0.15
0.10
0.05
0.00
-0.05
s
s
o
l
y
t
i
l
a
u
q
1.0
0.8
0.6
0.4
0.2
0.0
800
200
400
600
awake period [ms]
Figure 6. Performance comparison of the stream-
ing benchmark with and without DPM for the gen-
eral model.
In particular, there is no packet loss for awake periods
up to 400 msec, and no packet miss for awake periods up
to 100 msec. As a consequence, the quality of service per-
ceived by the user is not affected by the presence of DPM
as long as the awake period is below 100 msec. On the other
hand, an awake period of 100 msec is sufﬁcient to save more
than 70% of the energy spent by the NIC.
Doubling the awake period from 100 msec to 200 msec
reduces the quality of service below 0.8, with a negligi-
ble marginal improvement of the energy saving. Interest-
ingly, the CISCO AIRONET 350 provides a choice between
awake periods of 100 msec and 200 msec, making the com-
parison between the energy-quality tradeoff they provide of
practical interest.
From our analysis, we conclude that a MAC-level DPM
with 100 msec awake periods is transparent to the stream-
ing video client.
5.3. Application to streaming
6. Conclusion
The parameters of the general models of the streaming ap-
plication have been characterized based on the results of
real-world measurements performed on a HP’s IPAQ 3600
handheld PC with a CISCO AIRONET 350 [6] wireless
NIC, accessing a remote server connected to a CISCO 350
Series access point [5], while the model for the radio chan-
nel is the same Gaussian model used for the rpc benchmark.
Simulation results are reported in Fig. 6. The dependency
of the energy per frame from the awake period is quite sim-
ilar to that obtained for the Markovian model (see Fig. 4 for
comparison). There are, however, signiﬁcant differences in
the behavior of the performance metrics that make simula-
tion results much more informative than Markovian analy-
sis.
In this paper we have proposed a formal method based in-
cremental methodology for assessing the impact of DPM
both on the functionality and the performance of the sys-
tem in which the DPM is introduced. The methodology has
then been applied to two realistic case studies.
From the functional viewpoint, it is worth remarking the
suitability of the noninterference analysis for investigating
the transparency of the DPM.
The results obtained from the performance comparison
are summarized by the graphs of Fig. 7 and 8, showing the
energy-quality tradeoff provided by the DPM for the two
case studies when varying the DPM operation rates. Thin
curves refer to Markovian models, while thick curves refer
to general models. The difference between Markovian anal-
Proceedings of the 2004 International Conference on Dependable Systems and Networks (DSN’04) 
0-7695-2052-9/04 $ 20.00 © 2004 IEEE 
Authorized licensed use limited to: Tsinghua University. Downloaded on March 20,2021 at 05:37:20 UTC from IEEE Xplore.  Restrictions apply. 
tative effect of the Markovian approximation is sizeable.
Markov
General
References
[1] L. Benini, A. Bogliolo, and G. De Micheli, “A Survey of
Design Techniques for System-Level Dynamic Power Man-
agement”, in IEEE Trans. on VLSI Systems 8:299-316,
2000.
[2] M. Bernardo, “TwoTowers 3.0: Enhancing Usability”, in
Proc. of the 11th IEEE/ACM Int. Symp. on Modeling, Anal-
ysis and Simulation of Computer and Telecommunication
Systems (MASCOTS 2003), IEEE-CS Press, pp. 188-193,
Orlando (FL), 2003.
[3] M. Bernardo and M. Bravetti, “Performance Measure Sen-
sitive Congruences for Markovian Process Algebras”, in
Theoretical Computer Science 290:117-160, 2003.
[4] M. Bernardo, L. Donatiello, and P. Ciancarini, “Stochas-
tic Process Algebra: From an Algebraic Formalism to
an Architectural Description Language”, in Performance
Evaluation of Complex Systems: Techniques and Tools,
LNCS 2459:236-260, 2002.
[5] Cisco System, “Cisco Aironet 350 Series Access Points”,
http://www.cisco.com/univercd/cc/td/doc/product/wireless/
airo 350/accsspts/index.htm, 2003.
[6] Cisco System, “Cisco Aironet 350 Series Wireless
LAN Adapters”, http://www.cisco.com/univercd/cc/td/doc/
product/wireless/airo 350/350cards/index.htm, 2003.
[7] R. Focardi and R. Gorrieri, “A Classiﬁcation of Security
Properties”, in Journal of Computer Security 3:5-33, 1995.
[8] J.A. Goguen and J. Meseguer, “Security Policy and Secu-
rity Models”, in Proc. of the Symp. on Security and Pri-
vacy (SSP 1982), IEEE-CS Press, pp. 11-20, 1982.
[9] R.K. Gupta, S. Irani, and S.K. Shukla, “Formal Methods
for Dynamic Power Management”, tutorial at IEEE/ACM
Int. Conf. on Computer Aided Design (ICCAD 2003),
ACM Press, 2003.
[10] LAN/MAN Standards Committee of the IEEE Computer
Society, “Part 11: Wireless LAN MAC and PHY Speci-
ﬁcations: Higher-Speed Physical Layer Extension in the
2.4 GHz Band”, 1999.
[11] R. Milner, “Communication and Concurrency”, Prentice
Hall, 1989.
[12] G. Norman, D. Parker, M. Kwiatkowska, S.K. Shukla,
and R.K. Gupta, ”Formal Analysis and Validation of
Continuous-Time Markov Chain Based System Level
Power Management Strategies”, in Proc. of the IEEE
High-Level Design Validation and Test Workshop, IEEE-
CS Press, pp. 45-50, 2002.
0.006
t
s
e
u
q
e
r
r
e
p
y
g
r
e
n
E
0.005
0.004
0.003
0.002
0.01
0.015
0.02
0.025
waiting time
0.03
0.035
0.04
Figure 7. Tradeoff between energy consumption
and waiting time for the Markovian and general rpc
models.
150
100
50
e
m
a
r
f
r
e
p
y
g
r
e
n
E
Markov
General
0
0
0.2
0.4
Miss rate
0.6
0.8
Figure 8. Tradeoff between energy consumption
and miss rate for the Markovian and general stream-
ing models.
ysis and general simulation is greater for the rpc server. It
is also worth noting that many points of the tradeoff curve
of the general rpc model are beyond the Pareto curve, since
they are overcome by other points both in terms of energy
efﬁciency and in terms of performance. The sub-optimal
points correspond to the DPM timeout values close to the
actual idle time, which make DPM counterproductive. For
the tradeoff curve of the general model of the streaming ap-
plication, we observe that sizeable energy savings can be
obtained at no cost in terms of quality of service, making
the DPM completely transparent to the user.
We ﬁnally remark that the tradeoff curves provided by
Markovian and general models for the streaming applica-
tion have the same qualitative behavior, even if the quanti-
Proceedings of the 2004 International Conference on Dependable Systems and Networks (DSN’04) 
0-7695-2052-9/04 $ 20.00 © 2004 IEEE 
Authorized licensed use limited to: Tsinghua University. Downloaded on March 20,2021 at 05:37:20 UTC from IEEE Xplore.  Restrictions apply.