For example, a peer does not proactively download content;
it only shares objects that the corresponding user has previ-
ously downloaded. Uploads are rate-limited, and peers up-
load each object at most a limited number of times. Finally,
peers monitor the utilization of the local network connec-
tions and throttle or pause uploads when the connections
are used by other applications. While it is important for
users to experience good download performance, the per-
formance of uploads is intentionally limited using custom
protocols.
Users do not beneﬁt directly from the bandwidth they do-
nate, but NetSession oﬀers a number of indirect beneﬁts; for
instance, the DLM enables users to resume aborted down-
loads and to download from multiple sources simultaneously.
Also, peer-assisted downloads require fewer resources from
the infrastructure and can thus be oﬀered at a lower price.
Content providers can pass on these savings to the users.
4. MEASUREMENT STUDY
We now turn to the question how well NetSession, as one
instance of a peer-assisted CDN, is able to deliver the po-
tential beneﬁts of a hybrid architecture, and how well it is
able to avoid the corresponding risks. To answer this ques-
tion, we have performed a measurement study that is based
on a set of logs from the production system.
4.1 Data set
Our logs cover the month of October 2012. At a high level,
they contain information about downloads and information
about logins. When a peer downloads a ﬁle from NetSession,
35Customer A
Customer B
Customer C
Customer D
Customer E
Customer F
Customer G
Customer H
Customer I
Customer J
All customers
Americas
US East US West
–
1%
6%
21%
3%
–
3%
4%
2%
24%
4%
–
2%
13%
22%
5%
–
8%
6%
5%
42%
7%
Other
India
12%
1%
15%
6%
8%
–
12%
7%
18%
14%
11%
6%
11%
1%
–
2%
–
2%
4%
–
–
3%
Asia
China
6%
–
–
–
1%
–
8%
2%
–
–
2%
Other
Europe
Africa
Oceania
18%
61%
8%
3%
29%
–
20%
20%
15%
5%
20%
51%
6%
55%
45%
48%
100%
45%
53%
57%
11%
46%
4%
17%
1%
–
2%
–
2%
2%
1%
1%
4%
3%
1%
2%
3%
3%
–
2%
2%
1%
3%
2%
Table 2: Global distribution of downloads for the ten largest content providers.
ber of GUIDs should correspond roughly to the number of
peers.) On a typical day, between 8.75 and 10.90 million of
the GUIDs connect to the control plane at least once. The
system has been growing steadily over time; for comparison,
a trace from October 2010 contained 14.19 million distinct
GUIDs, or slightly more than half the number in our trace.
Figure 2 shows the global distribution of the peers as a
“bubble plot”: the size of each bubble corresponds to the
number of peers whose ﬁrst connection to the system was
from that particular location. Most of the peers are located
in North America (27%) and Europe (35%), but there are
also sizable groups of peers in South America and Asia.
Overall, we observed connections from 239 diﬀerent coun-
tries and territories across all continents, so NetSession is a
truly global system.
4.3 Content providers
Each ﬁle that is available through NetSession is oﬀered by
a speciﬁc content provider—usually a large corporate cus-
tomer. To illustrate how these customers are using the sys-
tem, we selected the downloads served by the ten largest
customers (here identiﬁed as Customers A through J), we
associated each download with one of ten regions, and we
counted the number of downloads per customer per region.
Table 2 show the results. Generally, we ﬁnd that roughly
half of the downloads occur in Europe. However, the down-
loads distribution depends on customer. Customer B’s con-
tent, for example, is far more popular in Asia except China
and Africa. Customer J’s content is mostly requested from
within the United States.
4.4 Available content
At the time our data was collected, a typical use case for
NetSession was the distribution of software installers; data
ﬁles and other content, such as music and video, made up a
small portion. Overall, we observed downloads for 4,038,894
distinct objects in our trace. Figure 3(a) shows the distribu-
tion of requests for objects of a given size, for peer-assisted,
infrastructure only, and all requests in NetSession. Peer-
assisted downloads are strongly biased towards large ﬁles;
82% of peer-assisted requests are for objects larger than
500 MB. Because the beneﬁts of peer assist are most pro-
nounced for such large objects, content providers tend to
enable it on such objects.
The object popularity distribution and temporal request
pattern in NetSession’s workload are shown in Figure 3(b)
and (c). As expected, the former shows the nearly ubiq-
uitous power law, while the latter shows the usual diurnal
patterns.
Figure 2: Global distribution of peers.
the CN records information about the download, including
the GUID of the peer, the name and size of the ﬁle, the CP
code (a number identifying a speciﬁc account of a content
provider that is oﬀering the ﬁle), the time the download
started and ended, and the number of bytes downloaded
from the infrastructure and from peers. This information is
used for accounting and billing. Additionally, when a peer
opens a connection to the control plane, the CN records the
peer’s current IP address, its software version, and whether
or not uploads are enabled on that peer.
To localize the peers geographically and in the net-
work, we also obtained geolocation data from Akamai’s
EdgeScape [2] service about each IP address that appears
in the trace. This data includes an ISO 3166 country code,
the name of a city and state, a latitude/longitude pair, a
timezone, and a network provider name. (Note that territo-
ries and areas of geographical interest, such as Antarctica,
can also have country codes.) The granularity of the lo-
cation information varies by region; in the United States,
locations are typically at the city/suburb granularity. For
instance, the data set contains 218 unique locations in the
state of Pennsylvania.
To protect the privacy of users and content providers,
the data in our logs have been anonymized by hashing the
ﬁle names, IP addresses, and GUIDs. Table 1 shows some
overall statistics for our data set.
4.2 Number and location of the peers
We begin by giving an overview of the NetSession deploy-
ment as of October 2012, to illustrate the number and ge-
ographic distribution of the peers, as well as the type of
content being served. The one-month trace contains about
26 million distinct GUIDs. (Recall that the NetSession soft-
ware chooses a GUID when it is ﬁrst installed, so the num-
36(a) Request distrib. by object size
(b) Content popularity
(c) Bytes served over time
Figure 3: Overall workload characteristics.
Uploads
initially...
Disabled
Enabled
Nodes
0
15,913,255
7,395,867
99.96%
98.11%
Number of changes
1
0.03%
1.80%
≥ 2
0.01%
0.09%
Table 3: Observed changes to the setting that en-
ables content uploads.
5. BENEFITS
Next, we focus on three questions that can be answered
quantitatively based on our data, namely: 1) How well does
peer assist work? 2) Does peer assist aﬀect performance and
reliability? And, 3) does peer assist help improve the CDN’s
global coverage?
5.1 How well does peer assist work?
Recall that NetSession peers are not required to contribute
bandwidth: users are free to disable uploads to peers by
changing their preferences in the NetSession GUI. This is
a major diﬀerence from pure peer-to-peer systems like Bit-
Torrent, which include incentive mechanisms like tit-for-tat
to encourage uploading.
In the literature, it is often as-
sumed that users are “rational” and will avoid uploading if
they don’t beneﬁt from it [8, 23]; it is therefore natural to
ask whether NetSession peers are willing to contribute any
bandwidth at all.
Do the peers contribute resources? To answer this
question, we used the login records in our data set to deter-
mine the fraction of peers that have uploads enabled. How-
ever, the NetSession binary is available in two versions, one
with uploads initially enabled and one with uploads initially
disabled. This is chosen by the content provider who bundles
the binary; some content providers use the software merely
as a download manager, without the peer assist. For this
reason, we additionally check whether users changed this
setting between logins, and if so, how often.
Tables 3 and 4 show our results. About 31% of the peers
have uploading enabled, but the setting is rarely changed—
more than 99% of the peers keep their initial setting through-
out our trace. As Table 4 shows, the initial setting depends