The list of accepted community names. 
Whether to accept SNMP messages from any host, or from a list of hosts by IPv4 address or host 
name. 
Figure B-8 shows the Security tab. 
Figure B-8  The Security tab for the SNMP service 
Evntcmd Tool 
You can use the Evntcmd.exe tool at a command prompt to configure SNMP traps based on events 
recorded in system logs. You can also use Evntcmd.exe to specify where trap messages are sent 
within an SNMP community.  
Appendix B – Simple Network Management Protocol 
TCP/IP Fundamentals for Microsoft Windows  
Page: 516 
Appendix C – Computer Browser Service 
TCP/IP Fundamentals for Microsoft Windows  
Page: 517 
Appendix C – Computer Browser Service 
Abstract 
This appendix describes how the Computer Browser service on computers running Microsoft Windows operating 
systems works to display the list of workgroups and domains and the servers within them for the contents of the 
Network and Microsoft Windows Network windows and related windows in My Network Places. A network 
administrator must understand how the Computer Browser service works over an IPv4 network to determine why some 
domains, workgroups, or the server computers within them are not displayed. 
Appendix C – Computer Browser Service 
TCP/IP Fundamentals for Microsoft Windows  
Page: 518 
Computer Browsing Overview 
The Computer Browser service in Windows maintains an updated list of domains, workgroups, and 
server computers on the network and supplies this list to client computers upon request.  
A domain is a grouping of computers that provide a centralized account database and security. The 
definition of domain for computer browsing is separate from its definition for Active Directory. In Active 
Directory, a domain is a collection of computer, user, and group objects defined by the administrator. 
These objects share a common directory database, security policies, and security relationships with 
other domains. 
A workgroup is a logical grouping of computers that helps users locate shared resources such folders 
and printers. Workgroups do not offer the centralized user accounts and security offered by domains. A 
LAN group is either a domain or a workgroup. 
The Computer Browser service maintains a distributed series of lists of available network resources as 
viewed from the following locations: 
Using the new Windows XP-style Start menu, click Start, and then click My Network Places. In the My 
Network Places window, click Entire Network. In the Entire Network window, double-click Microsoft 
Windows Network. 
Using the classic Windows Start menu, double-click My Network Places on your desktop. In the My 
Network Places window, double-click Entire Network. In the Entire Network window, double-click 
Microsoft Windows Network.  
For either method, the Microsoft Windows Network window displays a list of LAN groups. 
The list of LAN groups and the servers within them are distributed to automatically elected browse 
server computers. Computers elected as browse servers eliminate the need for all computers to 
maintain a list of all the LAN groups and their servers on the network and lowers the amount of network 
traffic required to build and maintain a list of all the computers on the network. 
The browse list, the list of LAN groups and the servers within them that are accumulated and distributed 
by the Computer Browser service, is separate from the list of computers maintained in Active Directory. 
For example, when you click Search Active Directory in the Network Tasks pane of the My Network 
Places window, the Find Users, Contacts, And Groups dialog box is displayed. Queries using this 
dialog box are performed against Active Directory, not against the browse list maintained by computers 
running the Computer Browser service. 
The Computer Browser service operates by exchanging a set of NetBIOS over TCP/IP (NetBT) 
broadcast and unicast messages. There is no support for computer browsing over IPv6. If NetBT is 
disabled, the Computer Browser service can no longer operate. This means that for a network that has 
NetBT disabled and is just using the Domain Name System (DNS) and Active Directory, you cannot 
view any LAN groups or servers using the Entire Network window. You must use find computers using 
Active Directory. 
Computer browsing over remote access connections is aided by the NetBT proxy in Windows Server 
2008 and Windows Server 2003, which is enabled by default for Routing and Remote Access on all 
interfaces that are not connected to the Internet. 
Appendix C – Computer Browser Service 
TCP/IP Fundamentals for Microsoft Windows  
Page: 519 
For more information about NetBT, see Chapter 11, "NetBIOS over TCP/IP" and Chapter 12 "Windows 
Internet Name Service Overview." 
The Computer Browser service in Windows performs three processes: 
Collection of browsing information 
Distribution of browsing information 
Servicing of browse client requests 
Browsing Collection and Distribution 
The browsing collection and distribution processes occur between designated browse server 
computers. The following types of browse servers are defined: 
Master Browse Server 
A computer that collects and maintains the browse list of available servers within its LAN group and 
a list of other LAN groups and their Master Browse Servers. It also distributes the browse list to the 
Backup Browse Servers. 
Backup Browse Server 
A computer that receives a copy of the browse list from the Master Browse Server, and distributes 
information in the browse list to browse clients upon request. 
Domain Master Browse Server 
The first domain controller to register the NetBIOS name of Domain[1B] becomes the Domain 
Master Browse Server. Besides being a Master Browse Server for its domain, the Domain Master 
Browse Server synchronizes the browse list for the Master Browse Servers in the domain that are 
located on remote subnets. 
Computers are designated the Master Browse Server or a Backup Browse Server through an automatic 
election process. For a given LAN group, there is only one Master Browse Server and zero or more 
Backup Browse Servers. The number of Backup Browse Servers depends on the number of servers in 
the LAN group. 
Computers running Windows XP can perform the Master Browse Server and Backup Browse Server 
roles. Only a computer running Windows Server 2008 or Windows Server 2003 that is acting as a 
domain controller can perform the Domain Master Browse Server role. 
The Collection Process 
The Master Browse Server performs the collection process by accumulating the following information in 
its browse list: 
A list of servers within its LAN group 
Periodically, every computer running the Server service within the LAN group broadcasts a Host 
Announcement packet to the NetBIOS name LANGroup[1D]. The Server service corresponds to the 
File and Printer Sharing for Microsoft Networks component in Network Connections and provides 
file and print sharing using the Common Internet File System (CIFS), also known as the Server 
Appendix C – Computer Browser Service 
TCP/IP Fundamentals for Microsoft Windows  
Page: 520 
Message Block (SMB) protocol. The Master Browse Server processes the Host Announcement 
packet and adds or refreshes the sender’s computer name in the list of servers of the LAN group. 
A list of other LAN groups 
Periodically, every Master Browse Server of a LAN group broadcasts a Domain Announcement or 
Workgroup Announcement packet to the NetBIOS name [01][02]__MSBROWSE__[01][02]. 
Contained in the Domain Announcement or Workgroup Announcement packet is the LAN group 
name and the computer name of the Master Browse Server. Each Master Browse Server stores the 
announced LAN group name and its associated Master Browse Server in the browse list. 
The Distribution Process 
The Master Browse Server distributes the browse list to the Backup Browse server computers that will 
service the requests from browse clients. This occurs through the following: 
Local Master Announcement packet 
Periodically, the Master Browse Server broadcasts a Local Master Announcement packet to the 
NetBIOS name LANGroup[1E]. This packet informs the Backup Browse Servers that a Master 
Browse Server for the LAN group still exists. If the Master Browse Server does not periodically sent 
a Local Master Announcement packet, a Backup Browse Server starts an election by broadcasting 
an Election packet to the NetBIOS name LANGroup[1E]. The election process selects a new 
Master Browse Server. 
Browse list pull operation from Master Browse Server to Backup Browse Server 
Periodically, each Backup Browse Server contacts the Master Browse Server in its LAN group to 
download the browse list. The downloaded browse list includes the list of servers within the LAN 
group and the list of other LAN groups and their associated Master Browse Servers. 
Figure C-1 shows the collection and distribution process. 
Appendix C – Computer Browser Service 
TCP/IP Fundamentals for Microsoft Windows  
Page: 521 
Figure C-1  The Computer Browser service collection and distribution processes 
Servicing Browse Client Requests 
After the browse list has been built by the Master Browse Server and distributed to the Backup Browse 
Servers, it can be used to service browse client requests.  
Browse clients request the following: 
The list of servers within its LAN group 
The list of servers within another LAN group 
The list of shares on a server 
Obtaining the List of Servers Within its LAN Group 
On a computer running Windows XP or Windows Server 2003 that is a member of a workgroup, you 
can view the list of servers in its own workgroup by clicking on View Workgroup Computers in the 
Network Tasks pane of the My Network Places window. On a computer running Windows XP or 
Windows Server 2003 that is a member of a domain, you can view the list of servers in its own domain 
by double-clicking your domain name in the Microsoft Windows Network window. 
To get the list of servers within its LAN group, the browse client does the following: 
1. Upon startup, the browse client broadcasts a Get Backup List Request packet to the NetBIOS name 
LANGroup[1D].  
2. The Master Browse Server responds to the client request with a list of computer names for Backup 
Browse Servers in the LAN group.  
Appendix C – Computer Browser Service 
TCP/IP Fundamentals for Microsoft Windows  
Page: 522 
3. The client randomly selects one of the Backup Browse Servers. When the user wants to view the list 
of servers in its LAN group, the computer sends the selected Backup Browse Server a request for the 
servers in its LAN group.  
4. The Backup Browse Server responds with the list of servers in the LAN group. 
Figure C-2 shows this process. 
Figure C-2  Servicing browse client requests 
For subsequent requests for a list of servers within its LAN group, the client continues to use the list of 
Backup Browse Server names obtained during startup and does not broadcast a new Get Backup List 
Request packet. The success of the browse client request is dependent on the client getting a response 
from the Master Browse Server and the client’s ability to resolve the computer name of the randomly 
selected Backup Browse Server to its IPv4 address. 
Obtaining the List of Servers Within Another LAN Group 
On a computer running Windows XP or Windows Server 2003 that is a member of a workgroup, you 
can view the list of servers in another LAN group by clicking on the LAN group name in the Browse For 
Folder dialog box. On a computer running Windows XP or Windows Server 2003 that is a member of a 
domain, you can view the list of servers in another LAN group by double-clicking the LAN group name 
in the Microsoft Windows Network window. 
To get the list of servers within another LAN group, the client broadcasts a Get Backup List Request 
packet to the NetBIOS name LANGroup[1D]. The Master Browse Server for that LAN group responds 
Appendix C – Computer Browser Service 
TCP/IP Fundamentals for Microsoft Windows  
Page: 523 
to the client request with a list of computer names for Backup Browse Servers within the LAN group. 
The client then randomly selects one of the Backup Browse Servers and sends it a request to download 
the list of servers in the LAN group. The response from the selected Backup Browse Server contains 
the list of servers in the LAN group.  
The success of this operation depends on the client getting a response from the Master Browse Server 
for the LAN group and the client’s ability to resolve the computer name of the randomly selected 
Backup Browse Server of the LAN group to an IPv4 address. 
Obtaining the List of Shares on a Server 
On a computer running Windows XP or Windows Server 2003, you can view the list of shares on a 
selected server by double-clicking the computer in the LAN group window. Alternately, you can view the 
list of shares of a specific computer from the display of the net view \\servername command. 
To get the list of shares on a server, the client computer attempts to resolve the NetBIOS name for the 
Server service on the desired computer, which corresponds to ComputerName[20]. After the name is 
resolved, a TCP session, a NetBIOS session, and an SMB session are created between the browse 
client and the file sharing server. After the SMB session is created, the client requests a list of shares. 
Although the request for the list of servers does not involve the Computer Browser service or browse 
servers, it is part of the browsing operation done through My Network Places. 
The success of this client request is dependent on the client’s ability to resolve the computer name of 
the selected computer to its IPv4 address and to establish an authenticated SMB session with the 
server. 
The Computer Browser Service on Computers Running Windows Server 2008 
Windows Server 2008 sets the startup state of the Computer Browser service to disabled by default for 
a new installation of Windows Server and when upgrading an existing server to Windows Server 2008. 
The default startup state of the Computer Browser service on computers running Windows Server 2008 
can cause problems for a domain controller in the primary domain controller flexible single master 
operations (PDC FSMO) role. For computer browsing, the computer in the PDC FSMO role centrally 
collects and distributes information about domains, workgroups, and computers for multi-subnet 
networks. If the computer in the PDC FSMO role is not running the Computer Browser service, 
computer browse lists across the network will contain only domains, workgroups, and computers on the 
local subnet.  
To prevent this problem, configure the startup type for the Computer Browser service for Automatic on 
the computer in the PDC FSMO role and then start Computer Browser service. You can do this from 
the Services snap-in or at an elevated command prompt with the following commands: 
sc config browser start= auto 
sc start browser 
Because the Computer Browser service relies on the file and printer sharing, you will also need to turn 
on File and Printer Sharing in the Network and Sharing Center. Alternatively, move the PDC FSMO role 
to another domain controller that has the Computer Browser service started and configured for 
automatic startup and File and Printer Sharing turned on in the Network and Sharing Center.   
Appendix C – Computer Browser Service 
TCP/IP Fundamentals for Microsoft Windows  
Page: 524 
Additionally, if the only server computer on a subnet is running Windows Server 2008, client computers 
will become the local browse server on the subnets. As client computers are started and are shut down, 
the role of the local browse server will pass from one client computer to another, possibly resulting in an 
inconsistent display of domains, workgroups, and computers. To prevent this problem, on the computer 
running Windows Server 2008, turn on file and printer sharing, configure the startup type for the 
Computer Browser service for Automatic, and then start the Computer Browser service. 
Appendix C – Computer Browser Service 
TCP/IP Fundamentals for Microsoft Windows  
Page: 525 
Computer Browser Service Operation on an IPv4 Network 
Because the Computer Browser service relies on a series of broadcast NetBIOS over TCP/IP packets, 
the placement of IPv4 routers can create problems. IPv4 routers do not forward broadcast packets. To 
facilitate client browsing of all network resources in an IPv4 network, there must be mechanisms for the 
collection, distribution, and servicing of client requests for browse lists when servers, browse servers, 
and browse clients are located on different subnets. 
The browsing collection, distribution, and the servicing of client requests across IPv4 routers must now 
take place using a combination of unicast and broadcast IPv4 traffic, rather than just broadcast IPv4 
traffic. To facilitate computer browsing across an IPv4 network, the Computer Browser services uses 
the following: 
Windows Internet Name Service (WINS)  WINS helps in the collection of browse lists and the 
servicing of client requests.  
Entries in the Lmhosts file  Special entries in the Lmhosts file help facilitate the distribution of 
browsing information and the servicing of client requests. 
Note  The Computer Browser service relies on media access control (MAC)-level broadcast packets sent 
using NetBT to and from UDP port 138 (the NetBIOS datagram port). In contrast, B-node NetBIOS name 
registration and name query requests are sent as MAC-level broadcasts over UDP port 137 (the NetBIOS 
name service port). Some routers can be configured to forward NetBIOS broadcasts from one IPv4 subnet 
to another. If the IPv4 router is configured to forward NetBIOS broadcasts, the Computer Browsing service 
works as if all the LAN groups were located on the same subnet. All Master Browse Servers are aware of all 
servers in their LAN group and all other LAN groups and all browse client requests can be satisfied.  
If NetBIOS broadcast forwarding is enabled on all IPv4 routers in the network, the following sections do not 
apply. However, this solution is highly discouraged because it increases the amount of broadcast traffic on 
each subnet, leading to decreased performance by all nodes on the network. Enabling broadcast forwarding 
can also cause browse server election conflicts. 
The following sections examine how the Computer Browser service works across an IPv4 network for 
these browsing situations: 
Domain spanning an IPv4 router 
Multiple domains separated by IPv4 routers 
Workgroup spanning an IPv4 router 
Multiple workgroups separated by IPv4 routers 
Domain Spanning an IPv4 Router 
Figure C-3 shows a domain that spans an IPv4 router. There are domain members on at least two 
different subnets located across an IPv4 router. 
Appendix C – Computer Browser Service 
TCP/IP Fundamentals for Microsoft Windows  
Page: 526 
Figure C-3  A domain that spans an IPv4 router 
For this configuration, the following sections examine: 
The collection and distribution process 
The servicing of browse client requests 