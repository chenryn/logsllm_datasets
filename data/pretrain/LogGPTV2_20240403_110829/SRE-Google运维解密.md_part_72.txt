应该具有如下特点：
·在服务技术栈中增加一个小的，但是用户可见的功能修改，接下来跟随这个修改
）当标准的流程不工作时，他们必须能够随机应变，解决问题。
在日常工作中，他们会遇到从未见过的系统，必须要具有很强的反向工程能力。
常情况与系统知识相结合。
）针对现有的服务监控盲点增加新的监控。新手需要了解监控逻辑，同时将这些异
在海量规模下，很多异常情况都很难检测，他们必须具有统计学知识，用统计学
轻一些日常负担，从而受到团队的欣赏。
选择一个还没有被自动化的痛点进行自动化，
而不是流程化的方式去发现问题。
保他们和开发团队联系密切。
一直到发布到生产环境中。了解开发环境的配置和二进制文件的发布流程可以确
培养反向工程能力和随机应变能力
使得新的SRE可以给团队成员减
347
398
---
## Page 390
348
中跟踪他们浏览器发出的某个请求。在整个过程中的每一段，我们强调学习利用多种方
背景介绍过后，学员会经过一系列交互性的、目的性很强的练习，在Google基础设施
端的工作原理，以便能够保障它继续运行。
了。课程学员作为新组建的Google新闻 SRE团队成员，需要自行搞清楚整个服务端到
理团队等——都去参加团建了：目的地是百慕大三角区。我们已经30天没有他们的消息
的场景初看起来比较简单：整个Google新闻团队一包括SRE、开发工程师、产品管
将知识串联起来：反向工程某个生产环境服务
那么，哪些课程和实践可以将新手SRE培养成具有这些特性的高效率人才呢？需要针对
时抽身，从更高的层面换一个角度去思考问题的解决方案，是非常有价值的。
找到问题根源。在非常复杂的故障排除过程中，SRE通常需要利用很多未经验证的假设
程师有多种手段处理问题。在故障发生时固守陈规而不去做现场分析，可能会导致无法
系，这时候怎么办呢？当然要临场发挥！通过学习多种解决不同问题的工具可以保障工
假设某SRE试着按照手册修复某个问题，但是没有成功。该故障系统的开发团队无法联
随机应变的能力：当意料之外的事情发生时怎么办
也应该培训SRE新员工从一入职就成为好的数据分析者。
须要保证这些因子是可控的，每个因子都应该是进行独立分析和比较过的。然而，我们
文件版本、地区性的流量区别，或者其他几百种因素。从架构层面来讲，该运维团队必
“下列哪一个东西与其他不同”？这里的“东西”可能是内核版本、CPU架构、二进制
更进一步地减少决策空间。用另外一种说法，进行系统故障调试的过程很像是一种游戏：
种经验必须同时和一系列精心构造的假设结合，当这些假设被证实，或者证伪时，可以
执择。这种能力的获得通常要靠经验积累，而经验只能通过有效和真实的实践获得。这
动作去执行，缓解故障。因为时间通常是有限的，SRE必须能够有效地在决策树中进行
上述这些特点因地制宜，因材施教，以下是一个覆盖了上述所有要点的课程例子。
为这个服务on-call超过5年了！
遗漏的部分。”这样做的结果是——这可能比我亲自授课效果还要好，虽然我已经
不如自己动手一
“新SRE需要学习GoogleMaps生产服务的一部分时，与其让其他人传授知识给他，
第28章迅速培养SRE加入on-cal
一利用反向工程手段自己了解服务，让其他人纠正他的错误和补充
-Paul Cowan,Google SRE
---
## Page 391
注5“跟踪RPC”这种手段同时也适用于批处理/流水线系统：从跟踪启动系统的那个操作开始。对批处
记硬背的，某些事后总结文档可以作为“课程”进行教授，可以让学员了解大型系统的
价值的事后总结文档，将它们用于未来新手的教育材料。某些事后总结文档就是需要死
但是，这些事后总结如果被束之高阁是没有什么用的。每个团队必须收集，并且整理有
结只需要小小的改动就可以变成学习材料。
能是一个还没有入职的工程师。不需要多么特别的编辑过程，Google某些最好的事后总
原因的一种手段，对事不对人。当书写事后总结时，一定要记住这个文档的最佳受众可
事后总结（参见第15章）是持续改进的一个重要部分。这是找出某次大型事故的根本
对事故的渴望：事后总结的阅读和书写
的意义。
悉，“能够参与on-call”与“了解足够多，并且可以自己随时自学其他的知识”具有相同
on-call轮值一般不是SRE的主要目标，但是生产环境运维经常会需要响应某种类型的
有抱负的on-call工程师的5个特点
深的成员交流。
住一切机会学习系统的新变化，而最好的方式恰恰是与团队中最新的成员，而不是最资
些知识，因为系统不断变化，任何人都可能出现理解上的偏差。整个SRE团队都应该抓
的细节问题，这些恰恰是最好的讨论话题。资深SRE在这个过程中很有可能也会学到一
组件图，同时与资深SRE共同讨论。学员肯定会在这个过程中忽略一些小的但是很关键
来on-call系统的一部分。利用课程中学到的知识，该学员需要自行构建出整个技术栈的
在课程末尾，会给每人分配一项任务。每个学员需要和自己团队的资深SRE共同选择未
组件图，
盒与黑盒监控系统来决定用户请求的数据路径。注在这个过程中，我们构造了一个系统
利用Google内部高度集成的调试信息，展示互相之间的RPC连接关系，以及现有的白
围太窄，产生的是错误的结果。接着还会让学员学习通过其他方式了解服务原理。我们
程过程中，我们还会让学员跟踪另外一个来源请求，这会展示出我们一些最初的假设范
紧急事故。能够负责任地进行on-call需要该员工对运维的系统有着一定程度的了解和熟
式来发现生产服务之间的连接关系的重要性，这样可以防止某些连接关系被遗漏。在课
“忘记过去的人必然会犯重复的错误。
，同时讨论了学员未来将会经常见到的共享基础设施服务。
有抱负的on-call工程师的5个特点
George Santayana，哲学家和散文家
401
400
---
## Page 392
SRE团队通过一个老传统一
新员工，同时保证老员工始终能跟上不断变化的环境和服务发展也是一个挑战。Google
故障处理分角色演习
是未来进行抽象化故障演习时的良好材料。
建起SRE的知识库，培养他们理解生产环境的能力和应对问题的能力。事后总结同时也
定期举办这种事后总结的阅读活动，包括那些触发条件和应对办法，可以潜移默化地构
组织讨论。
办“故障沙龙”
中分发、阅读，并组织集体讨论。原始作者经常会被请到这些会议中，其他团队则会举
Google的某些SRE团队会举办“事后总结团体学习”，将一些有价值的事后总结文档集
将他们的最佳事后总结文档公布出来。
同时也可以提供给其他相关团队，以及上下游团队来阅读。同时，也应该要求相关团队
文档化故障的解决过程为荣。我们应该将最好的故障文档收集起来，提供给新手学习—
某个事后总结文档的负责人不仅仅包括作者。很多团队都以能够经历过大型故障，并且
结构性弱点，或者新奇的故障方式，这些都是非常有价值的。
350
这些SRE与GM同时坐在房间的最前面。主持人宣布某个警报发生了，这个on-call团
这个活动做得最好的时候，会成为一个全体成员每周共同学习的机会。具体过程很简单
名字对新加入的SRE来说不会那么吓人。
他们互相学习是一个挑战。同时，如何将SRE文化—不断解决问题的文化一
当面对一个经验各异、能力各异的SRE团队时，如何能够将所有人紧密结合在一起启发
防止数据中心崩溃，又或者是防止某个错误的GoogleDoodl被显示在网页上。
样——需要向主持人提出问题，或者告知目前要采取的行动，主持人会回答问题
Google历史上曾经发生过的故障。”该成员—就像参加电视娱乐节目的选手那
“每周我们都会有一次会议，指定某个成员来现场处理某个故障场景—经常是
身陷于各种监控图表组成的迷宫中，必须要解决用户请求延迟过高的问题，或者是
以及告知该行动的结果。这就像是魔域传奇（早期的互动式魔幻游戏）。SRE成员
第28章
”这样的活动，请原始作者以非正式的形式出席，描述故障的过程，并且
迅速培养SRE加入on-call
一“故障处理分角色演习”来解决这些问题。这个活动同时
一传授给
---
## Page 393
的不同点，寻找可能导致问题的因素，并且最终修复系统。
但是相对风险较低的环境中，培训者可以更改系统的行为，
配置问题、内存泄露、性能下降、请求导致的崩溃以及存储的瓶颈等。在这个逼真的、
在这样一个虚拟负载的环境下学习，机会是非常丰富的。资深SRE也会遇到很多问题
中心部署的系统，可以保证我们将流量从至少一个实例切走，将该实例作为练习使用。
复真实的生产环境中得来。当新手SRE加入on-call以后，通常会有很多机会进行动手
新手能够通过阅读文档、事后总结文档，以及在培训中学到很多 SRE的知识。通过故障
破坏真的东西，并且修复它们
巧，或者解决问题的另外一个角度，或者（对新员工来说）对成功解决某个问题的认可。
当灾难演习RPG运转成功时，每个人都会从中学到一点东西：可能是一个新工具、新技
紧急而非常有方向性的疑问。
线上来，同时可能需要提供更清晰的解释，甚至增加一些其他的信息，注7包括提出一些
完美的，所以GM可能需要纠正参与者见到的一些不相关问题，将他们指引到正确的路
题需要向其他团队寻求帮助，GM会假扮成其他团队成员回答问题。虚构场景不一定是
随着问题的展开而提供更多的信息，例如会告知大家某个监控图表的走势等。如果该问
在接下来的30~60分钟内，主on-call和副on-call要试着寻找问题的根源所在。GM会
某个成员可能发现了一种全新的生产环境问题，而今天的场景就基于此展开。
马上上线的功能的假想故障场景，这样参与的所有人都不知道如何处理。还有更好的是，
但是新成员没有经历过，或者是老成员已经忘记的事故。或者该场景是某个新功能或者
GM事先已经精心准备了一个故障场景。这个场景可能是基于某个以前发生过的故障，
队需要进行调查和现场处理该报警。
注7
最好在这个实例中加入一些人工产生的负载，模拟真实用户流量，以及资源的消耗。
或者，我们可以搭建一个小型、但是功能齐全的QA实例，可以用作培训。在可能的情况下，
在这些交互过程中，真实性是非常重要的。理想情况下，我们的团队应该有一套多数据
某个故障问题。
早期就引人一些动手实践，使得学员可以更好地使用公司内部的工具和监控系统来解决
实践，但是真正的学习应该在这之前进行，这样才能有所准备。因此，我们应该在培训
分角色演习可以让某个新手快速进入状态。然而，最好的经验还是要从动手破坏或者修
也许这项练习可以鼓励团队成员面对下周的挑战，甚至成为接下来某一周的GM。
例如：“另外一
一个团队的成员发出了一条警报，
他们是这么说的：
有抱负的on-call工程师的5个特点
强迫新SRE找到与生产环境
351
<403
---
## Page 394
404
352
但是却可能没那么自信去修改它。在这个文档中加入适当的结构，可以同时保障新手的
问题，因为他们会用其他方式跟踪目前情况的变化。新手SRE需要一个更新过的文档，
call。如表28-1所示，该学习检查列表对不同的人来说有不同的作用。
及关于系统的各种技术和知识的完整列表，学员必须充分掌握该列表才能进行见习on-
很多SRE团队要维护一个“on-call学习检查列表”。该列表中包含一系列阅读材料，以
维护文档是学徒任务的一部分
在快速变化的环境中，文档可能很快就过期了。过期的文档对资深SRE来说并不是什么
系统并不会像我们想象的那样优雅降级。
这个团体活动，每个季度会进行一次，有助于在生产环境中发现函待解决的新Bug
搜索集群！
上下游系统的影响。Google搜素团队非常重视这项活动，将其称为：“一起来摧毁一个
来进行：从一个正常状态出发，慢慢将环境中某个组件逼近瓶颈，通过监控系统观察对
有的时候，让某个资深SRE精心构造一个具体故障场景比较耗时，可以从另外一个角度
·对其他团队成员来说：文档成为一种社会契约，只有掌握这个文档的员工才能加
3.具体执行操作，验证之前的假设，并且从逻辑上说明为什么系统会出现这样的现象。
2.在实际操作之前，我们进行一次调查，让所有参与的人都提出一个针对系统行为
·对学员来说
1.作为一个团队，我们讨论哪些性能特点可能会在过程中受到影响。
·对导师和管理者来说：学员的学习进度可以通过检查列表来反映，检查列表可以
这个标准。
入on-call。这个学习检查列表成为一个知识的标准，所有的团队成员都必须符合
一学员今天学习的是哪一节？