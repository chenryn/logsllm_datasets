User: 请解答这个和日志有关的问题Permission denied while reading upstream We have deployed our rails application on on Nginx and passenger. Intermittently, pages of application get loaded partially. There is no error in application log, but the Nginx error log shows the following:
2011/02/14 05:49:34 [crit] 25389#0: *645 open() &quot;/opt/nginx/proxy_temp/2/02/0000000022&quot; 
  failed (13: Permission denied) while reading upstream, client: x.x.x.x, 
  server: y.y.y.y, request: &quot;GET /signup/procedures?count=0 HTTP/1.1&quot;, 
  upstream: &quot;passenger:unix:/passenger_helper_server:&quot;, host: &quot;y.y.y.y&quot;, 
  referrer: &quot;http://y.y.y.y/signup/procedures&quot;

Assistant: I had the same problem on an NGINX/PHP-FPM setup (php-fpm=improved fcgi for php).

You can find out which user the nginx processes are running as

ps aux | grep "nginx: worker process"


And then check out if the permissions in your proxy files are correct

ls -l /opt/nginx/proxy_temp/


In my case, nginx was running as www-data and two of the directories in my proxy directory belonged to root.

I don't know how it happened yet, but I fixed it by doing (as root)

chown www-data.www-data /opt/nginx/proxy_temp