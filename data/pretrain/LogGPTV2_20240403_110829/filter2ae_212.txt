# 【缺陷周话】第49期：未使用的局部变量
##### 译文声明
本文是翻译文章
译文仅供参考，具体内容表达以及含义原文为准。
## 1、未使用的局部变量
在代码段中声明了一个局部变量，但是该局部变量从未被使用，就会产生“未使用的局部变量”错误。详细请参见CWE-563: Assignment to
Variable without Use。
## 2、未使用的局部变量的危害
未使用的局部变量通常不会导致严重的安全问题，造成未使用的局部变量的原因很可能是一个编码错误。
## 3、示例代码
本节示例代码源于Samate Juliet Test Suite for C/C++ v1.3
(https://samate.nist.gov/SARD/testsuite.php)，源文件名：CWE563_Unused_Variable__unused_init_variable_char_33.cpp。
### 3.1 缺陷代码
在上述示例代码中，第33行声明了一个局部变量 data，但是直到38行函数结束从未被使用，因此存在“未使用的局部变量”问题。
使用代码卫士对上述示例代码进行检测，可以检出“未使用的局部变量”缺陷，显示等级为中。如图1所示：
图1：未使用的局部变量检测示例
### 3.2 修复代码
在上述修复代码中，Samate给出的修复方式为：在第36行对变量data进行使用，从而避免了未使用的局部变量。这是一种处理方式，根据实际代码逻辑与功能，也可以删除未使用的局部变量。
使用代码卫士对修复后的代码进行检测，可以看到已不存在“未使用的局部变量”缺陷。如图2：
图2：修复后检测结果
## 4、如何避免未使用的局部变量
审查代码逻辑，确认未使用的局部变量的实际用途，从而添加对应代码，或移除未使用的局部变量。