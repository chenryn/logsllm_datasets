s
o
L
10−4
10−2
100
P Berr
102
Figure 21: Loss rate for broadcast packets vs link
throughput and P Berr for all station pairs.
Due to the above observations, we further explore the
mechanism of retransmissions with respect to link quality
with unicast traﬃc. We now delve into the retransmissions
of PBs by sending unicast, low data-rate traﬃc, i.e., 150Kbps,
and by capturing the PLC frame headers. Under this sce-
nario, an Ethernet packet of 1500 bytes is sent approximately
every 75ms. The test has a duration of 5 min per link. As
we have discussed above, broadcast packets might be missed
by some stations when channel conditions are bad, because
they are not retransmitted as soon as a proxy station ac-
knowledges them.
In contrast, unicast packets are being
retransmitted until the receiver acknowledges them, hence
are always received. For this reason, we look at the frame
header SoF to study retransmissions. Because there is no in-
dication on whether the frame is retransmitted in the PLC
SoF, we employ the arrival time-stamp of the frame to char-
acterize it as a retransmission or new transmission (if the
frame arrives within an interval of less than 10ms compared
to the previous frame, then it is a retransmission). We also
measure P Berr every 500 ms.
X
T
E
U
-
5
4
3
2
1
0
0
X
T
E
U
-
2.5
2
1.5
1
0.5
data
ﬁtted curve
0
0.1
0.2
0.3
0.4
P Berr
50
100
BLE (Mbps)
150
Figure 22: U-ETX vs BLE and U-ETX vs P Berr.
We conduct the experiment described above for all the
links of our testbed. We compute the unicast ETX (U-ETX)
for all the links of the testbed. We count the total number of
retransmissions for a packet of 1500 bytes, which produces
3 PBs. A retransmission occurs if at least one of these PBs
is received with errors. Figure 22 presents U-ETX as a func-
tion of average BLE (with links sorted in increasing BLE
order) and P Berr. U-ETX is measured by averaging the
number of PLC retransmissions for all packets transmitted
during the experiment. We also plot error-bars with the
standard deviation of the transmission count. It turns out
that link quality is negatively correlated with link variability,
a conclusion made also when exploring BLE in Section 6.2.
The higher the U-ETX is, the higher the standard deviation
of transmission count is. Links with high BLE are very
likely to guarantee low delays, as U-ETX does not vary a
lot. U-ETX and the averaged P Berr are highly correlated,
with almost a linear relationship.
8.2 Retransmission Due to Contention
To explore the sensitivity of link metrics to background
traﬃc and to examine how interference can be considered in
link metrics, we now experiment with two contending ﬂows.
We set a link to send unicast traﬃc at 150Kbps as in the
previous subsection, emulating probe packets. After 200 sec-
onds, we activate a second link sending “background” traﬃc
at various rates. We measure both BLE and P Berr.
In
these experiments, we observe that BLE is insensitive to low
data-rate background traﬃc for all pairs of links. However,
BLE appears to be aﬀected by high data-rate background
traﬃc on a few pair of links. So far, we have not found any
correlation between these pairs of links. We explain this
phenomenon with the “capture eﬀect”, where the best link
decodes a few PBs even during a collision due to very good
channel conditions, yielding high P Berr. In this case, the
channel-estimation algorithm cannot distinguish between er-
rors due to PHY layer and errors due to collisions, hence it
decreases BLE. Figure 23 presents two representative exam-
ples of link pairs for which BLE is sensitive and nonsensitive
to high data-rate background traﬃc. Observe that P Berr ex-
plodes in link 6-11, which is sensitive to background traﬃc.
To tackle the sensitivity of BLE to high data-rate back-
ground traﬃc, we take advantage of the frame aggregation
procedure of the MAC layer, described in Section 2.2. We
observe that transmitting a few PBs per 75ms (150Kbps
rate) yields a sensitivity of metrics to background traﬃc.
336150 Kbps
Saturated
1
0-11
1-6
r
r
e
B
P
0.5
0 100 200 300 400 500 600
Time (s)
0
0 100 200 300 400 500 600
Time (s)
)
s
p
b
M
(
E
L
B
150
100
50
0
150
)
s
p
b
M
(
E
L
B
Saturated
100
150 Kbps
50
0
0 100 200 300 400 500 600
Time (s)
1
r
r
e
B
P
0.5
6-11
1-0
0
0 100 200 300 400 500 600
Time (s)
Figure 23: Link metrics of 2 sets of contending links
with low data-rate and saturated traﬃc.
However, when two saturated ﬂows are activated, we never
notice an eﬀect on BLE (see [20] for more details). Due
to frame aggregation, packets from diﬀerent saturated ﬂows
have approximately the same frame length (i.e., maximum)
and when they collide, the channel estimation algorithm
works more eﬃciently than when short probe-packets col-
lide with long ones. To emulate the long frame lengths of
saturated traﬃc, we send bursts of 20 packets such that the
traﬃc rate per second (i.e., the overhead) is kept the same
(150Kbps).
In Figure 24, we show another link for which
BLE is sensitive to background traﬃc, and the results of
our solution. By sending bursts of probe packets, BLE is
no more aﬀected by background traﬃc. This shows that by
exploiting the frame aggregation process12, we can tackle
the sensitivity of link metrics to background traﬃc.
150Kbps
100
)
s
p
b
M
(
E
L
B
50
Saturated
7-6
8-3
150Kbps-
20-packet bursts
150
100
50
Saturated
)
s
p
b
M
(
E
L
B
0
0
500
1000
1500
Time (s)
0
0
500
1000
1500
Time (s)
Figure 24: Tackling the link-metric sensitivity to
background traﬃc by sending bursts of probes.
Conclusion: We have studied the mechanism of retrans-
missions in PLC. Although broadcast probe-packets yield
signiﬁcantly less overhead in link-quality estimation, they
do not provide accurate estimations.
In contrast, unicast
probe-packets reﬂect the real link quality, but by produc-
ing more overhead. We observe that P Berr can be used to
12Depending on the PLC technology, these bursts can be
transmitted such that only one PLC frame is generated
hence, without large MAC overhead. A measurement study
of the maximum frame duration of HPAV is given in [20].
estimate U-ETX and to indicate interference in PLC. How-
ever, estimating the amount of interference is challenging
and should be further investigated. We leave this extension
for future work. We introduce techniques to tackle the po-
tential sensitivity of link metric to background traﬃc.
9. LINK-METRIC GUIDELINES
We now summarize our guidelines for eﬃcient link-metrics
estimation with PLC, given our experimental study in the
previous sections.
Policy
Metrics
Guideline/Explanation
BLE and P Berr, deﬁned by
IEEE 1901.
Section
7, 8.1
Unicast probing only
Broadcast probing cannot be
used, as it does not give any
information on link quality.
Shortest time-scale
BLE should be averaged over
the mains cycle.
Size of probes
Larger than one PB (or one
OFDM symbol) to avoid in-
accurate convergence of rate
adaptation algorithm.
Frequency of probes
Should be adapted to link
quality for lower overhead.
Burstiness of probes
Can tackle a potential inaccu-
rate convergence of the chan-
nel estimation algorithm or
the sensitivity of link metrics
to background traﬃc.
8.1
6.1
7.2
6.2,
6.3,
7.3
7.2,
8.2
Asymmetry in probing There is both spatial and tem-
poral variation asymmetry in
PLC links. This could aﬀect
bidirectional traﬃc, such as
TCP, that requires routing in
both directions.
5, 6.2
Table 3: Guidelines for PLC link-metric estimation
10. RELATED WORK
A large body of work (e.g., [9], [15]) focuses on chan-
nel modeling and noise analysis, and very little work, such
as [13], investigates the PLC performance from an end-user
perspective. The authors in [13] explore the performance of
HomePlug AV when household devices operate in the net-
work. They observe that switching the appliances aﬀects sig-
niﬁcantly the performance and introduces asymmetry, and
that diﬀerent appliances create diverse noise levels. Liu et
al. [12] employ a testbed to investigate the interoperabil-
ity and coexistence of diﬀerent HomePlug AV networks and
propose a scheme that can be employed to ameliorate the
performance of multiple contending AV networks.
Many previous experimental works focus on the PLC MAC
layer under single contention domain scenarios and ideal
channel conditions in order to model and evaluate MAC
characteristics. To achieve these conditions, the stations
are plugged to the same power-strip and are isolated from
the power-grid. Zarikoﬀ and Malone [22] give the guidelines
for a PLC testbed construction and perform measurements
with both UDP and TCP traﬃc, and multiple contending
337ﬂows. We [21] study the fairness of the CSMA/CA protocol
both analytically and experimentally. We show that when 2
saturated stations are contending, the 1901 MAC is unfair
and might yield high jitter. We also use a testbed setup of
7 stations to evaluate and enhance the performance of the
HomePlug AV CSMA/CA process in [19], [18].
A few works focus on comparing the wireless and PLC
performance [11, 17]. [11] investigates older speciﬁcations
of PLC and WiFi, i.e., HomePlug 1.0 and 802.11 a/b, re-
spectively. The authors provide testbed measurements from
20 houses for metrics such as coverage, throughput, and
connectivity. [17] introduces a comparison between hybrid
PLC/WiFi networks and single-technology networks. The
authors ﬁnd that hybrid networks contribute to increase
coverage in home networks; they also argue that using al-
ternating technologies for multi-hop routes yields good per-
formance. However, they do not study link metrics that can
be used to optimize routing in such networks.
11. CONCLUSION
We have shown that PLC can yield signiﬁcant perfor-
mance gains when combined with WiFi networks. Yet, there
were open questions on how to exploit to the fullest the
two mediums and PLC has received far too little attention
from the research community; we introduce an experimental
framework and investigate the performance of PLC. To this
end, we explore its spatial and temporal variation, delving
into the diverse time-scales of PLC channel variability.
We have studied PLC link metrics and their variation with
respect to space, time, and background traﬃc. Similar met-
rics have been long pursued by the research community for
WiFi and have been required by recent standardization of hy-
brid networks. We have given guidelines on eﬃcient metric-
estimation in hybrid implementations. We have observed
that there is a high correlation between link quality and its
variability, which has a direct impact on probing overhead
and accurate estimations.
Acknowledgment
This work is ﬁnancially supported by a grant of the Smart-
World project of the Hasler Foundation, Bern, Switzerland.
12. REFERENCES
[1] HomePlug Alliance. http://www.homeplug.org/.
[2] IEEE 1905.1-2013 Std for a Convergent Digital Home
Network for Heterogeneous Technologies.
[3] IEEE 802.11n-2009-Amendment 5: Enhancements for
Higher Throughput.
[4] OpenWrt. http://https://openwrt.org/.
[5] Qualcomm Atheros Open Powerline Toolkit.
https://github.com/qca/open-plc-utils.
[6] IEEE Standard for Broadband over Power Line
Networks: Medium Access Control and Physical Layer
Speciﬁcations. IEEE Std 1901-2010, 2010.
[7] S. M. Das, H. Pucha, K. Papagiannaki, and Y. C. Hu.
Studying wireless routing link metric dynamics. In
Proc. of the 7th ACM Conf. on Internet measurement,
pages 327–332, 2007.
[8] R. Draves, J. Padhye, and B. Zill. Routing in
multi-radio, multi-hop wireless mesh networks. In
Proc. of ACM MobiCom, 2004, pages 114–128.
[9] S. Guzelgoz, H. B. Celebi, T. Guzel, H. Arslan, and
M. K. Mıh¸cak. Time frequency analysis of noise
generated by electrical loads in PLC. In 17th
International Conf. on Telecommunications (ICT),
pages 864–871. IEEE, 2010.
[10] E. Kohler, R. Morris, B. Chen, J. Jannotti, and M. F.
Kaashoek. The Click modular router. ACM TOCS,
18(3):263–297, 2000.
[11] Y.-J. Lin, H. A. Latchman, R. E. Newman, and
S. Katar. A comparative performance study of wireless
and power line networks. Communications Magazine,
IEEE, 41(4):54–63, 2003.
[12] Z. Liu, A. El Fawal, and J.-Y. Le Boudec. Coexistence
of multiple homeplug av logical networks: A
measurement based study. In IEEE Global
Telecommunications Conf. (GLOBECOM), 2011,
pages 1–5.
[13] R. Murty, J. Padhye, R. Chandra, A. R. Chowdhury,
and M. Welsh. Characterizing the end-to-end
performance of indoor powerline networks. Technical
report, Harvard University Microsoft Research
Technical Report, 2008.
[14] K. Papagiannaki, M. D. Yarvis, and W. S. Conner.
Experimental characterization of home wireless
networks and design implications. In IEEE
INFOCOM 2006.
[15] S. Sancha, F. Canete, L. Diez, and J. Entrambasaguas.
A channel simulator for indoor power-line
communications. In IEEE International Symposium
on Power Line Communications and Its Applications
(ISPLC), pages 104–109, 2007.
[16] R. K. Sheshadri and D. Koutsonikolas. Comparison of
routing metrics in 802.11n wireless mesh networks. In
IEEE INFOCOM 2013, pages 1869–1877.
[17] P. Tinnakornsrisuphap, P. Purkayastha, and
B. Mohanty. Coverage and capacity analysis of hybrid
home networks. In IEEE International Conf. on
Computing, Networking and Communications (ICNC),
2014, pages 117–123.
[18] C. Vlachou, A. Banchs, J. Herzen, and P. Thiran.
Analyzing and boosting the performance of power-line
communication networks. In Proceedings of the 10th
ACM International on Conference on emerging
Networking Experiments and Technologies, pages 1–12.
ACM, 2014.
[19] C. Vlachou, A. Banchs, J. Herzen, and P. Thiran. On
the MAC for Power-Line Communications: Modeling
Assumptions and Performance Tradeoﬀs. In IEEE
International Conf. on Network Protocols (ICNP),
2014.
[20] C. Vlachou, S. Henri, and P. Thiran. Electri-Fi Your
Data: Measuring and Combining Power-Line
Communications with WiFi (Technical Report
210617). Infoscience EPFL 2015.
[21] C. Vlachou, J. Herzen, and P. Thiran. Fairness of
MAC protocols: IEEE 1901 vs. 802.11. In Proc. of
IEEE ISPLC 2013.
[22] B. Zarikoﬀ and D. Malone. Construction of a PLC
testbed for network and transport layer experiments.
In Proc. of IEEE ISPLC 2011, pages 135–140.
338