**信息安全运维审计系统，由于每个网省接入的审计设备数量不同，产生的数据量不尽相同。**经过计算，数据量最大的省每天产生的日志增量为53G，按一年存储规划需要的存储空间为53G\*365=19T，审计数据的网络带宽为643.2kB/s；数据量中等的省每天产生日志增量为25.5G，按一年存储规划需要的存储空间为25.5G\*365=9.1T，审计数据的网络带宽为309.5kB/s；数据量小的省每天产生日志增量为1.68G，按一年存储规划需要的存储空间为1.68G\*365=0.6T，审计数据的网络带宽为20.4kB/s。
**综合审计系统，由于每个网省审计系统的不同，以及接入审计系统设备数量的不同，产生的数据量也不相同。**经过计算，数据量最大的省每天产生的日志增量为87.0G，按一年存储规划需要的存储空间为87.0G\*365=31T，审计数据的网络带宽为1.0MB/s；数据量中等的省每天产生日志增量为20.2G，按一年存储规划需要的存储空间为20.2G\*365=7.2T，审计数据的网络带宽为245.2kB/s；数据量小的省每天产生日志增量为12.6G，按一年存储规划需要的存储空间为12.6G\*365=4.5T，审计数据的网络带宽为152.9kB/s。
**业务与数据库审计系统**，经过计算，数据量最大的省每天产生的日志增量为5.6G，按一年存储规划需要的存储空间为5.6G\*365=2T，审计数据的网络带宽为68.0kB/s；数据量中等的省每天产生日志增量为4.2G，按一年存储规划需要的存储空间为4.2G\*365=1.5T，审计数据的网络带宽为51.0kB/s；数据量小的省每天产生日志增量为0.6G，按一年存储规划需要的存储空间为0.6G\*365=0.2T，审计数据的网络带宽为7.3kB/s。
**桌面终端系统**，经过计算，数据量最大的省每天产生的日志增量为7.0G，按一年存储规划需要的存储空间为7.0G\*365=2.5T，审计数据的网络带宽为85.0kB/s；数据量中等的省每天产生日志增量为3.1G，按一年存储规划需要的存储空间为3.1G\*365=1.1T，审计数据的网络带宽为37.6kB/s；数据量小的省每天产生日志增量为0.02G，按一年存储规划需要的存储空间为0.02G\*365=5.6G，审计数据的网络带宽为0.24kB/s。
**综上所述，**如系统开发应用后各省公司每年产生的审计数据包括业务系统运维审计数据和已建的数据日志采集数据，经过统计计算数据量大的省份每年共产生约57.4T的审计数据，审计数据占网络带宽为1.9MB/s，预留20%-30%的空间作为数据处理临时空间或存储临时数据，最大的存储需要为57.4T\*（1+30%）=74.6T。数据量中等的省份共产生约16.4T，审计数据占网络带宽为558.4kB/s，预留20%-30%的空间作为数据处理临时空间或存储临时数据，中等省份的存储需要为16.4T\*（1+30%）=21.3T；数据量小的省份共产生约6.3T的审计数据，审计数据占网络带宽为214.5kB/s，预留20%-30%的空间作为数据处理临时空间或存储临时数据，最小的存储需要为6.3T\*（1+30%）=8.2T。
#  存储系统部署架构
![](media/image2.png)
建议该系统采用分布式存储模式，选型依据：
1、该系统需要存储海量数据，持续高并发IO，系统存在大量视频数据、数据访问连续性强，持续带宽要求高。分布式存储系统可以满足以上要求。
2、分布式存储系统可以提高系统的高可用性，保障审计数据的安全。
3、该系统的开发是基于大数据架构的，分布式存储方案满足大数据的技术要求。
#  存储规格
  -------------------------------- --------------------------------------------------------- ----------
  **名称**                         **配置**                                                  **数量**
  分布式存储服务器（浪潮NF5270）   2路PC服务器：16核、内存128G、2\*双口万兆光网卡、2\*300G   8
                                   SAS硬盘、2\*800G SSD、8\*4TB SATA硬盘                     
  万兆交换机                       三层交换机：2000Mpps、24个万兆光口、2个千兆管理口         2
  -------------------------------- --------------------------------------------------------- ----------
为保证数据分散度，提高总的IOPS性能，节点数不小于6，所以报告推荐8个节点，裸容量共有250T，3副本下有效容量80T，可以满足目前一年最大数据量的要求。针对中型网省所需的存储空间，在保障不降低IOPS性能的基础上减小至6个节点，裸容量为192T,
3副本下有效容量64T。小型网省因为数据量少可减少节点数或在保证6个节点的情况下，减少SATA硬盘数。每个节点需要4块4TB的硬盘，裸容量为96TB,
3副本下有效容量32T。针对以上存储大小的选择还应按照各个网省具体情况进行估算。若后期增加审计的系统，由于采用分布式存储，可通过增加节点或增加硬盘的形式进行扩容。
#  对采集源的影响
## 7.1 Syslog采集 {#syslog采集 .list-paragraph}
已成为工业标准协议的系统日志(syslog)协议是在加里佛尼亚大学伯克立软件分布研究中心(BSD)的TCP/IP系统实施中开发的，目前，可用它记录设备的日志。在路由器、交换机、服务器等网络设备中，syslog记录着系统中的任何事件，管理者可以通过查看系统记录，随时掌握系统状况。它能够接收远程系统的日志记录，在一个日志中按时间顺序处理包含多个系统的记录并以文件形式存盘。同时不需要连接多个系统，就可以在一个位置查看所有的记录。syslog使用UDP作为传输协议，通过目的端口514(也可以是其他定义的端口号),将所有安全设备的日志管理配置发送到安装了syslog软件系统的日志服务器，syslog日志服务器自动接收日志数据并写到日志文件中。
标准 UNIX syslog 守护进程通过 UDP
以明文形式传输消息，这意味着任何人都可以发觉潜在的敏感数据。facility.level模型也具有较大限定，大多数操作系统附带的缺省
/etc/nf文件疏于记录管理员可能感兴趣的许多消息。分析日志以便可以供人们阅读或者用于自动数据挖掘十分主要。例如，UNIX
syslog
守护进程不会轻易允许按主机拆分日志文件或者按正则表达式匹配日志消息。因此，大多数集中式日志服务器（这些服务器运用通常的
syslog
守护进程）最后都会产生巨大的日志文件，这些文件仅在syslogd进程关上它们之后才得到处理。
## 7.2 SNMP采集 {#snmp采集 .list-paragraph}
由于网络结构和网络技术的多样性，以及不同厂商管理其网络设备的手段不同，要求网络管理系统不但对公有Trap能够正确解释，更要对不同厂商网络设备的私有部分非常了解，这样才能正确解析不同厂商网络设备所发送的私有Trap，这也需要跟厂商紧密合作，进行联合技术开发，从而保证对私有Trap完整正确的解析和应用。此原因导致该种方式面对不同厂商的产品采集日志数据方式需单独进行编程处理，且要全面解释所有日志信息才能有效地采集到日志数据。由此可见，该采集在日常日志数据采集中通用性不强。
## 7.3 Agent代理采集 {#agent代理采集 .list-paragraph}
因为Agent代理软件运行在被监控主机和应用端，所以对Agent软件的性能和可靠性就提出了很高的要求，一般要求Agent代理软件占用系统资源（CPU、内存等）比较低，但是采集的数据量比较大。只有这样，才能很好的发挥Agent代理软件作用的同时，保证主机和应用的正常运行。从Agent代理软件的实现方式上看，各个厂商大多采用效率比较高的C代码，如Mocha
BSM和BMC
Patrol，但也有软件厂商采用效率不太高的JAVA等，如IBM，后者就对主机的系统资源占用比较大，因为JAVA程序一般占用比较多的内存。\
对监控资源的影响是占用一定的CPU和内存运行Agent代理软件本身。对监控服务器的影响是大部分工作通过监控资源端的Agent代理软件完成，对监控服务器的影响相对较小。通讯对网络带宽的影响是在监控资源端采集的数据，经过压缩处理后，传输给监控服务器，故对网络带宽的占用较低。
#  投资分析
  -------------------------------- --------------------------------------------------------- ---------- ---------------- ----------------
  **名称**                         **配置**                                                  **数量**   **价格（万）**   **总价（万）**
  分布式存储服务器（浪潮NF5270）   2路PC服务器：16核、内存128G、2\*双口万兆光网卡、2\*300G   8          6                48
                                   SAS硬盘、2\*800G SSD、8\*4TB SATA硬盘                                                 
  万兆交换机                       三层交换机：2000Mpps、24个万兆光口、2个千兆管理口         2          10               20
  实施费                           软件部署与调试、培训                                      30         0.15             4.5
  合计                                                                                                                   72.5
  -------------------------------- --------------------------------------------------------- ---------- ---------------- ----------------
注：上表为大型网省投资。
  -------------------------------- --------------------------------------------------------- ---------- ---------------- ----------------
  **名称**                         **配置**                                                  **数量**   **价格（万）**   **总价（万）**
  分布式存储服务器（浪潮NF5270）   2路PC服务器：16核、内存128G、2\*双口万兆光网卡、2\*300G   6          6                36
                                   SAS硬盘、2\*800G SSD、8\*4TB SATA硬盘                                                 
  万兆交换机                       三层交换机：2000Mpps、24个万兆光口、2个千兆管理口         2          10               20
  实施费                           软件部署与调试、培训                                      25         0.15             3.75
  合计                                                                                                                   59.75
  -------------------------------- --------------------------------------------------------- ---------- ---------------- ----------------
注：上表为中型网省投资。
  -------------------------------- --------------------------------------------------------- ---------- ---------------- ----------------
  **名称**                         **配置**                                                  **数量**   **价格（万）**   **总价（万）**
  分布式存储服务器（浪潮NF5270）   2路PC服务器：16核、内存128G、2\*双口万兆光网卡、2\*300G   6          4                24
                                   SAS硬盘、2\*800G SSD、4\*4TB SATA硬盘                                                 
  万兆交换机                       三层交换机：2000Mpps、24个万兆光口、2个千兆管理口         2          10               20
  实施费                           软件部署与调试、培训                                      20         0.15             3
  合计                                                                                                                   47
  -------------------------------- --------------------------------------------------------- ---------- ---------------- ----------------
注：上表为小型网省投资。