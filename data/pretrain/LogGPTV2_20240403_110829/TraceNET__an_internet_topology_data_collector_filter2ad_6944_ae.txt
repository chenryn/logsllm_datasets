iﬁcation of topology discovery tools over commercial ISPs
is that their original topologies are considered to be propri-
etary and are not available to the public. In our work, we
resort to cross validation by running tracenet at three dif-
ferent vantage points with the same target IP address set and
demonstrate the level of agreement/disagreement among the
observed subnets. The results show that all three vantage
points agrees on around 60% of all collected subnets by a
particular vantage point. Additionally, roughly 80% of the
collected subnets by a particular vantage point is also veri-
ﬁed by at least one other vantage point. On the other hand,
analyzing the collected subnets further show that some sub-
nets are inferred to be larger when collected from another
vantage point. One explanation of this could be that like any
other active probing based topology collection tool, trace-
net is aﬀected from rate limiting routers or ISPs. That is,
routers or ISPs regulate their responsiveness to probes based
on the traﬃc load or any other rate limiting policies. How-
ever, all three vantage points consistently infers that most of
the subnets at the non-edge Internet are point-to-point links
of /31 or /30 subnets. Then follows /29 subnets and a sharp
continuing decrease after /29 with a small increase for /24
subnets. We believe that /24 is a de-facto standard subnet
mask for small or medium organizations, however, most of
the organizations are also behind probe blocking ﬁrewalls.
Rice
UMass
2310
1818
6342
2746
1525
1431
2420
UOregon
Figure 6: Distribution of exact math subnets among
three diﬀerent PlanetLab sites
As our experimental set-up, we designated PlanetLab sites
at Rice University, University of Oregon and University of
Massachusetts as our vantage points located at the south,
west and east of the United States, respectively. We built a
target set of 34084 IP addresses belonging to four major ISPs
including Sprintlink, AboveNet, Level3, and NTT America.
This target set does not contain IP addresses belonging to
the customers of these major ISPs.
Figure 6 demonstrates the distribution of exactly match-
ing subnets collected from three diﬀerent PlanetLab vantage
points. In the ﬁgure, almost 80% of subnets observed from
a particular vantage point are also observed from one other
vantage point. Besides, around 60% of subnets of a particu-
lar vantage point is observed from all three vantage points.
Note that we selected those vantage points expecting that
tracenet probes enter into each ISP from diﬀerent border
routers and take diﬀerent paths towards a destination IP
address. As a result, around 20% of subnets being observed
uniquely by each vantage point is a natural outcome stem-
ming from diﬀerent border routers appearing in the paths
and various paths being taken toward the destinations.
Next, for each vantage point, we assess the number of IP
addresses in our target set, the number of IP addresses that
are put into a subnet, and the number of IP addresses for
which tracenet failed to grow a subnet. In Figure 7, the left
aligned bars show the number of target IP addresses for our
traces; central bars show the number of IP addresses that
are found and placed into subnets of diﬀerent sizes; and the
right aligned bars show the number of IP addresses that are
found but could not be placed into a subnet, i.e., these are
the IP addresses for which we could not ﬁnd a subnet larger
than /32.
In Figure 7, SprintLink seems to be the least responsive
ISP to our probes, the number of unsubnetized IP addresses
are large compared to other ISPs consistently from all van-
tage points. Additionally, as observed from PlanetLab site
at Rice, the total number of subnetized and unsubnetized
IP addresses is less than the number target IP addresses.
Further analysis of our data shows that not all target IP
addresses has responded to our probe packets as a result
they are not included in un-subnetized /32 IP address set.
NTT America is the most responsive ISP. Note that, trace-
net collects subnets along a path between a vantage point
and a destination IP address, hence, path lengths as well
as the number of responsive routers on the discovered sub-
nets eﬀect total number of subnetized IP addresses. Path
length factor explains the fact that despite the number of
un-subnetized IP addresses is large for SprintLink the num-
ber of subnetized IP addresses is close to that of Level3 and
AboveNET on the average.
Figure 8 shows the distribution of total number of sub-
nets per ISP at three vantage points. The numbers of col-
lected subnets from each ISP are close to each other with
respect to all vantage points. One counter intuitive obser-
vation takes place when we combine Figure 7 and Figure 8.
In the former ﬁgure, NTT America has the largest number
of subnetized IP addresses whereas in the latter ﬁgure it has
the least number of subnets. Analyzing our data reveals the
fact that NTT America accommodates large subnets of mask
/20, /21, /22 whereas other ISPs mostly host small subnets
of mask /30 and /31. That is, small number of large sized
subnets hosts more IP addresses than large number of small
sized subnets in our ﬁgures.
Figure 9 shows the distribution of subnet preﬁx length at
three diﬀerent vantage points in a logarithmic scale. The
shape of the ﬁgure shows the fact that the distribution of
collected subnets are coherent with each other. In the ﬁgure,
there is a big decrease between /30 and /29 from 4499 to
1546 as observed at PlanetLab site at Rice and even bigger
366IP / ISP at PlanetLab site Rice
IP / ISP at PlanetLab site Uoregon
IP / ISP at PlanetLab site Umass
y
c
n
e
u
q
e
r
F
s
s
e
r
d
d
A
P
I
 20000
 15000
 10000
 5000
 0
Target IP Address
Subnetized IP Address
Un-subnetized IP Address
SprintLink NTT America
Level3
AboveNET
ISP
y
c
n
e
u
q
e
r
F
s
s
e
r
d
d
A
P
I
 20000
 15000
 10000
 5000
 0
Target IP Address
Subnetized IP Address
Un-subnetized IP Address
SprintLink NTT America
Level3
AboveNET
ISP
y
c
n
e
u
q
e
r
F
s
s
e
r
d
d
A
P
I
 20000
 15000
 10000
 5000
 0
Target IP Address
Subnetized IP Address
Un-subnetized IP Address
SprintLink NTT America
Level3
AboveNET
ISP
Figure 7: Target, Subnetized, Un-Subnetized IP address distribution at diﬀerent Planetlab sites
Subnet / ISP distribution per PlanetLab Site
Prefix Length / PlanetLab Site
y
c
n
e
u
q
e
r
F
t
e
n
b
u
S
 5000
 4000
 3000
 2000
 1000
 0
Rice
Umass
Uoregon
SprintLink NTT America
Level3
AboveNET
ISP
)
y
c
n
e
u
q
e
r
F
t
e
n
b
u
S
(
g
o
l
 10000
 1000
 100
 10
 1
Rice
UMass
UOregon
/20 /21 /22 /23 /24 /25 /26 /27 /28 /29 /30 /31
Prefix Length
Figure 8: Subnet per ISP distribution at diﬀerent
PlanetLab sites
Figure 9: Subnet preﬁx length distribution at dif-
ferent PlanetLab sites
decrease between /29 and /28 from 1546 to 154. The ﬁgure
shows that most of the links are point to point links (/31 and
/30), then follows /29 multi access links, then the number
of subnets decrease dramatically.
As our ﬁnal experiment, we investigated performance of
tracenet with diﬀerent probing protocols. Table 3 shows
the number of subnets collected by tracenet with ICMP,
UDP, and TCP protocols over four ISPs.
In the ﬁgure,
ICMP protocol probing clearly outperforms UDP and TCP
protocols in terms of the number of collected subnets. Our
ﬁndings support the recent observations [9, 15] that routers
respond better to ICMP probes compared to UDP and TCP
probes. Additionally, the results collected with TCP prob-
ing is neglectable compared to ICMP and UDP.
5. CONCLUSIONS
Topology discovery studies make use of every bit of avail-
able data to sketch a complete and accurate map of a given
network. BGP table dumps, traceroute paths, DNS ta-
bles, ping responses, registered preﬁx information of ASes,
common IP assignment practices, and limitedly supported
IP options such as loose source routing and record-route are
among the sources of raw data. Among all, traceroute is
Table 3: Tracenet under ICMP, UDP, TCP probing
protocols at PlanetLab site Rice
ICMP UDP TCP
SprintLink
NTT America
Level3
AboveNET
Total
4482
1593
3587
2333
11995
1834
106
1062
777
3779
13
4
11
40
68
the most prevalent tool used to reveal lists of IP addresses
ordered by hop distance at a given network.
In this study, we have devised a set of heuristics to develop
a router level Internet topology collector called tracenet.
Tracenet collects topology information of each visited sub-
net on the path from a source to a destination whereas the
traditional traceroute collects a single IP address at each
visited router. With tracenet, we are able to (1) disclose
a large number of IP addresses that could be exposed with
traditional traceroute only if executed from many vantage
points; (2) form multi-access and point-to-point links on the
networks; (3) detect “being on the same LAN” association
367among IP addresses; and (4) annotate subnets with their
observed preﬁx values.
As a result, tracenet could be utilized as an eﬀective
data collection tool to improve completeness and correctness
of current and future topology mapping studies. Finally,
an implementation of tracenet is publicly available on our
project web site at http://itom.utdallas.edu.
6. REFERENCES
[1] Geant2 looking glass. Available at
http://stats.geant2.net/lg/.
[2] Internet2 observatory data collections. Available at
http://www.internet2.edu/observatory/archive/data-
collections.html.
[3] D. Achlioptas, A. Clauset, D. Kempe, and C. Moore. On the
bias of traceroute sampling. In ACM STOC, Baltimore, MD,
USA, May 2005.
[4] B. Augustin, X. Cuvellier, B. Orgogozo, F. Viger,
T. Friedman, M. Latapy, C. Magnien, and R. Teixeira.
Avoiding traceroute anomalies with Paris traceroute. In
ACM IMC, Rio de Janeiro, Brazil, Oct 2006.
[5] B. Augustin, T. Friedman, and R. Teixeira. Measuring
load-balanced paths in the internet. In IMC Proceedings of
the 7th ACM SIGCOMM conference on Internet
measurement, New York, NY, USA, 2007.
[6] P. Barford, A. Bestavros, J. Byers, and M. Crovella. On the
marginal utility of network topology measurements. In ACM
Internet Measurements Workshop, San Francisco, CA, USA,
Nov 2001.
[7] M. Gunes and K. Sarac. Inferring subnets in router-level
topology collection studies. In ACM IMC, San Diego, CA,
USA, Oct 2007.
[8] M. Gunes and K. Sarac. Resolving anonymous routers in
internet topology measurement studies. In IEEE
INFOCOM, Phoenix, AZ, USA, Apr 2008.
[9] M. Gunes and K. Sarac. Analyzing Router Responsiveness
to Active Measurement Probes. In PAM, Seoul, Korea, Apr
2009.
[10] M. Gunes and K. Sarac. Resolving IP aliases in building
traceroute-based internet maps. IEEE/ACM Transactions
on Networking, 17(6):1738–1751, Dec 2009.
[11] J. Heidemann, R. Govindan, C. Papadopoulos, G. Bartlett,
and J. Bannister. Census and survey of the visible internet.
In ACM IMC, Vouliag., Greece, Oct 2008.
[12] V. Jacobson. Traceroute. Lawrence Berkeley Laboratory
(LBL), Feb 1989. Available from
ftp://ee.lbl.gov/traceroute.tar.Z.
[13] S. Kim and K. Harfoush. Eﬃcient estimation of more
detailed Internet IP maps. In IEEE ICC, Glasgow, Scotland,
Jun 2007.
[14] A. Lakhina, J. Byers, M. Crovella, and P. Xie. Sampling
biases in IP topology measurements. In IEEE INFOCOM,
San Francisco, CA, USA, Mar 2003.
[15] M. Luckie, Y. Hyun, and B. Huﬀaker. Traceroute probe
method and forward IP path inference. In ACM IMC,
Vouliag., Greece, Oct 2008.
[16] H. Madhyastha, T. Isdal, M. Piatek, C. Dixon,
T. Anderson, A. Krishnamurthy, and A. Venkataramani.
iPlane: An information plane for distributed services. In
OSDI, Seattle, WA, USA, Nov 2006.
[17] D. McRobb, K. Claﬀy, and T. Monk. Skitter: CAIDA’s
macroscopic Internet topology discovery and tracking tool,
1999. Available from http://www.caida.org/tools/skitter/.
[18] Y. Shavitt and E. Shir. DIMES: Distributed Internet
measurements and simulations. Project page
http://www.netdimes.org.
[19] Y. Shavitt and U. Weinsberg. Quantifying the importance
of vantage points distribution in internet topology
measurements. In IEEE INFOCOM, Rio de Janeiro, Brazil,
Apr 2009.
[20] R. Sherwood, A. Bender, and N. Spring. DisCarte: A
disjunctive internet cartographer. In ACM SIGCOMM,
Seattle, WA, USA, Aug 2008.
[21] N. Spring, R. Mahajan, D. Wetherall, and T. Anderson.
Measuring ISP topologies with Rocketfuel. IEEE/ACM
Transactions On Networking, 12(1):2–16, Feb 2004.
[22] University of Oregon. Route views project.
http://www.routeviews.org.
368