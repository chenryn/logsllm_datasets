(SIGCOMM ’17). Association for Computing Machinery, New York, NY, USA,
432–445. https://doi.org/10.1145/3098822.3098854
A GREAT CIRCLE DISTANCE METHODS
Figure 2: Great Circle Distance Technique
The traditional technique to detect anycast prefixes—the Great-
Circle Distance (GCD) technique—relies on the execution of round
trip time (RTT) measurements from geographically distributed
unicast VPs. Based on VP locations, one can infer a circular region
of possible geolocation for a target IP whose diameter is constrained
by the observed RTT and speed of communication. Fig. 2 illustrates
the approach: if a target IP is unicast, then these circles will all
intersect and the intersection is the approximate location of the
target IP. However, if a target IP is anycast, then the RTT from
each node is likely smaller compared to the anycast case, as the
ping response is returned by the instance closest to the target IP
(in terms of routing). In the anycast scenario, not all circles may
intersect and the various intersections of circles will approximate
the different locations of the anycast instances. One can use this
Source VP (Ripe Atlas)Target IP (Anycast)IMC ’20, October 27–29, 2020, Virtual Event, USA
Sommese, Bertholdo, Akiwate, Jonker, Rijswijk-Deij, Dainotti, Claffy and Sperotto
VP ID
au-syd
br-gru
Location
Sydney (AU)
Sao Paulo (BR)
br-poa
Porto Alegre (BR)
Transit Provider
Vultr (20473)
Ampath(20080)
ANSP(1251)
Leovin(262605)
Nexfibra(264575)
Vultr (20473)
Vultr (20473)
Wide (2500)
UTwente (1133)
Ampath (20080)
Los Nettos (226)
Copenhagen(DK) DK-Hostmaster (39839)
London(UK)
Paris(FR)
Tokyo(JP)
Enschede(NL)
dk-cop
uk-lnd
fr-par
jp-hnd
nl-ens
us-mia Miami(US)
us-was Washington(US)
IXP
–
spo.IX.br
Peers
1
1892
poa.IX.br
218
1
–
Linx
1
France-IX 1
1
–
1
–
–
1
1
–
Table 5: Tangled VPs location and connectivity
technique from a geographically diverse set of unicast nodes to not
only infer if an IP is anycast, but also to estimate the geographic
footprint of the corresponding anycast fabric. The GCD technique
relies on accurate latency measurements, which require multiple
measurements from multiple nodes. GCD can be sensitive to latency
dynamics or path characteristics [16]. This sensitivity can lead to
false negatives—a failure to detect an anycast prefix—if deployed
across underprovisioned infrastructure.
B TANGLED ANYCAST DEPLOYMENT
Table 5 reports a summary of Tangled VPs, including locations of
upstream transit providers (with ASN), IXP connectivity, and the
number of peers to which the node established an interconnection.
VP ID
wisc01*
Location
Madison (US)
gatech01*
Atlanta (US)
amsterdam01* Amsterdam (NL)
uw01
grnet01
ufmg01*
seattle01
Seattle (US)
Athens(GR)
Belo Horizonte
(BR)
Seattle (US)
Transit Provider
University of Wiscon-
sin (3128)
Georgia Institute of
Technology (2637)
Bit BV (12859)
Netwerkvereniging
Coloclue (8283)
Pacific Northwest Gi-
gapop (101)
GRNet (5408)
RNP (1916)
IXP
–
–
Peers
1
1
AMS-IX
861
–
–
mg.IX.br
1
1
94
334
RGNet (3130)
SIX
Table 6: PEERING VPs location and connectivity
Classification
# VPs
Unicast
Anycast*
Anycast*
Anycast
Anycast
Anycast
1
2
3
4
5
7
Distinct
/24
3390077
15780
1243
2092
1061
1
Distinct
ASN
54343
905
111
36
10
1
Table 7: Classification and Breakdown of /24s by number of
PEERING VPs that receive responses
Distinct /24
# VPs PEERING
1 (Unicast)
iGreedy Anycast
2 (Anycast*)
iGreedy Anycast
3 (Anycast*)
# VPs Tangled
Unresp.
404426
(11.9%)
–
1392
(8.8%)
10
10
(0.8%)
7
28
(0.9%)
27
1 (U)
2977255
(87.8%)
53
12922
(81.9%)
89
16
(1.3%)
9
9
(0.3%)
8
2 (A*)
8044
(0.2%)
266
837
(5.3%)
332
61
(4.9%)
53
223
(7.1%)
218
3 (A*)
199
(0%)
123
331
(2.1%)
308
108
(8.7%)
106
43
(1.4%)
43
≥4(A)
153
(0%)
152
298
(1.9%)
297
1048
(84.3%)
1048
2851
(90.4%)
2851
Total
3390077
(100%)
–
15780
(100%)
–
1243
(100%)
–
3154
(100%)
–
iGreedy Anycast
≥4 (Anycast)
iGreedy Anycast
Table 8: Comparison between PEERING and Tangled results
by numbers of VPs that receive responses on the two plat-
forms. For each intersection, we also report the numbers of
anycast prefixes according to iGreedy. The ≥4 intersection
shows the high overlap in detection of anycast instances by
the two platforms
C PEERING MEASUREMENT RESULTS
In this section, we report additional results of measurements per-
formed with the PEERING platform. Table 6 shows a summary of
PEERING VPs used. Table 7 reports the results of the PEERING
measurement performed on Sep 11, 2020. Table 8 reports a compar-
ison with the Tangled measurement performed on May 05, 2020.
It is important to bear in mind the possible temporal bias in these
results because the two measurements occurred 4 months apart.
As shown in §5.2, in 90% of the cases, when 4 or more PEERING
VPs received responses, 4 or more Tangled VPs also did. When
MAnycast2 in PEERING classified the prefixes as unicast, it agreed
with Tangled for 87.8% of the cases, and disagreed for just 0.3%.
Of this 0.3%, most of the cases were when MAnycast2 in Tangled
received answers on 2 VPs. The iGreedy data confirmed that only
266 /24 prefixes of these 8044 were anycast. As stated in §5, this
misclassification by MAnycast2 in Tangled was probably caused
by route flaps and load balancing. For prefixes with answers re-
ceived on 3 or more VPs on Tangled and classified by MAnycast2
in PEERING as unicast, iGreedy showed that 275 of 352 /24 prefixes
were anycast. When MAnycast2 in PEERING classified prefixes as
anycast in disagreement with Tangled, for answers received on 2
VPs on PEERING, only 89 of 12922 /24s were anycast according
to iGreedy. For answers received on 3 or more VPs, 17 of 25 /24s
were anycast. These results confirm that MAnycast2 provides good
results when answers arrive on 3-4 or more VPs, and that repeated
measurement, with different sets of VPs, can reveal more anycast
prefixes and filter out misclassified unicast prefixes due to route
flaps and load balancing.
For comparison, we repeated the measurement with PEERING
with fewer VPs – the four marked with * in Table 6. For prefixes
classified in the previous measurement as anycast (with answers
on 4 or more VPs), we discovered in the new measurement that 4%
of these were misclassified as unicast, 26% were received at only 2
VPs, 49.7% at only 3 VPs, and only 0.3% (10 prefixes) at 4 VPs. These
results confirm the importance of using a high number of VPs, to
lower the measurement overhead required by iGreedy and to avoid
missing anycast prefixes.