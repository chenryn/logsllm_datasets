## 运行 arc 命令把 B'''提交到 Phabricator 上    > arc diff    
## 重新把 HEAD 指向 B2'    > git reset --hard temp    HEAD is now at 86126f7 [DO NOT PUSH] Add documentation for getRandom endpoint    
## 检查提交链    > git log --oneline --graph    * 86126f7 (HEAD -> master, temp, single-branch-step-5) [DO NOT PUSH] Add documentation for getRandom endpoint    * 7113c16 readme    * 4d37768 Add getRandom endpoint    * 7b6ea30 (origin/master) Add a new endpoint to return timestamp这时，提交链又恢复成为B1'''、A1'、B2'三个提交了。![](Images/1b74e093bebb1f064f00778b5e11a4b2.png)savepage-src="https://static001.geekbang.org/resource/image/91/c2/912e4a00c2d08b9d82fee818d780c0c2.png"}图 7 提交链状态第 7 步slate-object="mark"}阶段 4：继续开发 B2，同时得到 B1 的反馈，修改 B1把 B1''' 发送到质量检查中心之后，我回到 B2' 继续工作，也就是在 README文件中继续添加关于 getRandom 的文档。我正在开发的过程中，得到 B1'''的反馈，要求我对其进行修改。于是，我首先保存当前对 B2'的修改，用 gitcommit \--amend 把它添加到B2'中。     
## 查看工作区中的修改    > git diff    diff --git a/README.md b/README.md    index 8a60943..1f06f52 100644    --- a/README.md    +++ b/README.md    @@ -1,3 +1,4 @@     
## This project is for demoing git     You can visit endpoint getRandom to get a random real number.    +The end endpoint is `/getRandom`.    
## 把工作区中的修改添加到 B2'中    > git add README.md    > git commit --amend    [master 7b4269c] [DO NOT PUSH] Add documentation for getRandom endpoint     Date: Tue Oct 15 17:17:18 2019 +0800     1 file changed, 3 insertions(+)    * 7b4269c (HEAD -> master) [DO NOT PUSH] Add documentation for getRandom endpoint    * 7113c16 readme    * 4d37768 Add getRandom endpoint    * 7b6ea30 (origin/master) Add a new endpoint to return timestamp    ...这时，提交链成为 B1'''、A1'、B2''三个提交了。![](Images/991857eeddc44439436a839bde6a5d9c.png)savepage-src="https://static001.geekbang.org/resource/image/de/c0/de37ce76ba36c0c8ec3075a67e3a8ac0.png"}图 8 提交链状态第 8 步slate-object="mark"}接下来，我使用第 25 篇文章中介绍的基础操作对 B1'''进行修改。 首先，在 git rebase -i origin/master 的文本输入框中，将 pick B1'''那一行修改为 edit B1'''，然后保存退出，git rebase 暂停在 B1'''处：     > git rebase -i origin/master    
## 以下是弹出编辑器中的文本内容    edit 4d37768 Add getRandom endpoint   
##  git log --oneline --graph    * 4d37768 (HEAD) Add getRandom endpoint    * 7b6ea30 (origin/master) Add a new endpoint to return timestamp这时，提交链上只有 B1'''一个提交。 ![](Images/f75c481b0c8abab487c8bacd434eb4a5.png)savepage-src="https://static001.geekbang.org/resource/image/6f/66/6f62dbf5e85b3f1705d4a6475ebac966.png"}图 9 提交链状态第 9 步slate-object="mark"}然后，我对 index.js 进行修改，并添加到 B1''' 中，成为B1''''。完成之后，再次把 B1''''发送到代码质量检查系统。    
## 根据同事反馈，修改 index.js    > vim index.js    > git add index.js    
## 查看修改    > git diff --cached    diff --git a/index.js b/index.js    index 06695f6..cc92a42 100644    --- a/index.js    +++ b/index.js    @@ -7,7 +7,7 @@ app.get('/timestamp', function (req, res) {     })     app.get('/getRandom', function (req, res) {    -  res.send('' + Math.random())    +  res.send('The random number is:' + Math.random())     })     app.get('/', function (req, res) {    