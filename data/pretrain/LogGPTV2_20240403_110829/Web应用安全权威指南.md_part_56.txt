### 优化后的文本

#### 即使不是知名网站，只要接入互联网，SSH 或 FTP 等端口也会受到来自全球的攻击。对这些端口实施访问限制可以有效抵御这种无差别攻击。以下是两种常见的方法：

- **仅允许通过专线或 VPN 的连接**
- **仅允许特定 IP 地址的访问**

对于限定 IP 地址的方法，有以下几种实现方式：

- 在网络入口处的路由器或防火墙上设置 IP 限制
- 利用服务器操作系统自带的功能（如 Windows 防火墙、iptables 或 TCP Wrapper）进行 IP 限制
- 使用软件本身的访问控制功能

例如，使用 TCP Wrapper 来限制只有本地网络才能访问 SSH 服务。首先在 `/etc/hosts.deny` 文件中禁止所有访问请求，然后在 `/etc/hosts.allow` 文件中允许来自本地网络的访问请求。在需要远程维护系统时，建议使用固定 IP 访问服务器，并在服务器上限制访问 IP，这是一种非常安全的做法。

**示例：使用 TCP Wrapper 对 SSHD 进行访问限制**

```plaintext
# /etc/hosts.deny
sshd: ALL
```

```plaintext
# /etc/hosts.allow
sshd: 192.168.1.0/24
```

如果出口 IP 不是固定的，建议在最小范围内限制能够访问服务器的 IP。例如，我需要在公司外部对 Web 服务器进行远程维护，因此在配置文件中指定了 ISP 的域名来限制远程连接请求（图中的 ISP 域名为虚构）。

通过查看服务器的日志（如 `/var/log/secure`），可以发现针对 SSH 服务器的大部分攻击来自国外 IP 地址。尽管如此，仍然存在绕过 IP 限制的可能性，这个问题将在后续关于强化认证功能的部分讨论。

- **通过端口扫描确认各端口服务状态**

可以使用端口扫描工具（如 Nmap）来验证访问限制是否有效。下图展示了使用 Nmap 对一个 Linux 镜像进行端口扫描的结果。Nmap 是一个著名的开源端口扫描工具。

![端口扫描结果](Image00242.jpg)

从上图可以看出，该系统运行了 SSH、SMTP、HTTP 和 POP3 四种服务。其中，SSH 端口不需要对外公开，因此应按照上述方法进行访问限制。此外，系统还运行了 PostgreSQL 服务，但 Nmap 扫描结果未显示，说明 PostgreSQL 不接受来自外部的连接请求。

下图展示了对我的个人研究用 Windows Server 进行端口扫描的结果。

![个人研究用服务器端口扫描结果](Image00243.jpg)

这台服务器开放了许多端口，直接接入公网是非常危险的。根据我的安全咨询经验，这种情况并不少见。在 Web 网站运营时，应在设计阶段就确定所需的服务和开放的端口，并在系统投入运营前使用端口扫描等工具进行检查。

#### 提高认证强度

除了对访问来源的 IP 地址进行严格限制外，还需要加强管理软件的用户认证强度。具体措施包括：

- 删除或停止 Telnet 和 FTP 服务，只使用 SSH 服务
- 在 SSH 服务中使用公钥认证代替密码认证

虽然 Telnet 和 FTP 通常被认为是不加密的通信，但它们最大的问题是缺乏高强度的认证方式。即使使用了 SSH，如果仍采用用户名和密码认证，与 Telnet 和 FTP 并无太大区别。强烈建议使用公钥认证方式。

#### 防范伪装攻击的对策

网站伪装攻击也是 Web 网站常见的威胁之一。攻击者通过伪造网站诱骗用户访问，从而篡改内容或盗取用户信息。本节将介绍网站伪装的常见方法及其防范措施。

##### 网络级别的伪装

- **DNS 服务器攻击**
  - 通过攻击 DNS 服务器替换 DNS 配置
  - DNS 缓存污染攻击
  - 购买已过期域名用于非法用途

例如，2010 年 11 月，丹麦安全公司 Secunia 的网站发生了 DNS 内容被篡改的事件。虽然没有造成重大损失，但如果攻击者发布虚假漏洞信息，诱导用户下载恶意软件，后果将不堪设想。

- **ARP 欺骗攻击**

ARP 欺骗通过发送伪造的 ARP 应答，冒充其他 IP 地址。当服务器向网关发送 ARP 请求时，攻击者会抢先返回伪造的 ARP 应答，从而截获通信内容。ARP 欺骗攻击要求攻击者与被攻击服务器在同一物理网段内。

##### 钓鱼攻击

钓鱼攻击通过创建类似原网站的假网站，诱骗用户输入个人信息。尽管技术含量不高，但用户常常上当受骗。在日本，常出现复制著名二手交易网站或 SNS 网站的钓鱼网站。

虽然钓鱼攻击主要依赖用户自我防范，但网站管理者也应采取措施帮助用户预防。例如：

- **网络层的对策**
  - 同一网段内不放置可能存在漏洞的服务器
  - 强化 DNS 运维
- **引入 SSL/TLS**

SSL 和 TLS 可以有效防范 Web 网站伪装攻击。购买合法的数字证书后，认证中心将公证网站域名的合法性。即使网站被攻击，用户也能通过浏览器警告意识到问题。

电子证书的种类包括：

- **域名认证证书**
- **组织认证证书**
- **EV-SSL 证书**

EV-SSL 证书会根据 CA/Browser Forum 标准对企业真实性进行验证，使得识别假冒网站变得更容易。例如，访问 Verisign 公司网站时，浏览器地址栏会变成绿色，并显示企业名称等信息。

![EV-SSL 验证企业信息的真实性](Image00245.jpg)

通过这些措施，可以有效提高 Web 网站的安全性，防止伪装攻击。