on-tree node R that has the smallest SHRS,R. More details
are presented in the following sections.
3.2 Survivable Multicast Routing Protocol
We now describe the main features of SMRP that meet
the design goal of increasing the disjointness of the multi-
cast paths between a pair of neighbor nodes. SMRP builds
a multicast tree incrementally with explicit join or leave re-
quests from members, and consumes only a small amount
of network bandwidth for tree construction. Moreover,
SMRP adopts the soft-state mechanism to maintain each
constructed multicast tree for robustness. Finally, SMRP
dynamically reshapes the multicast tree for better overall
performance.
We present the proposed protocol in three components:
the data structure, the basic tree construction algorithm
when member joins or departs, and the tree reshaping pro-
cedure.
3The “⊂” operation in Eq. (1) indicates that the link is in the path while
the “∈” operation is used in Eq. (2) to indicate that the node is in the path.
S
SHRS, R
1
N R
1
n
n
N R
R
i
i
N R
Figure 3. Data structure in SMRP
3.2.1 Data Structure
We have deﬁned a new metric, SHRS,R, to quantify the de-
gree of link/node sharing in the path between S and R. The
new path should be merged into the current multicast tree at
the node R that has the smallest value of SHRS,R. Additional
data structure is maintained at each on-tree node to enable
the path selection process. Listed below are the symbols
used.
• S: multicast source. R: on-tree node.
• Ru: upstream node of R in the multicast tree.
• NR: number of members in the subtree rooted at R.
• Ni
R: number of members in the subtree rooted at the
i-th downstream interface of R.
• SHRS,R:
the measure of link/node sharing along the
on-tree path between S and R; SHRS,S = 0.
As illustrated in Figure 3, SMRP maintains the following
data structure in each on-tree node R: NR, Ni
R, and SHRS,R.
The state of NR is kept implicitly at R since the condition
NR = ∑1≤i≤n Ni
= NR since all
of the multicast members in the subtree rooted at R use link
LR,Ru to reach the source. Hence, Eq. (1) can be transformed
to:
R holds. In particular, NLR,Ru
SHRS,R =
∑
all R(cid:2)∈PT (S,R) except S
NR(cid:2) = SHRS,Ru + NR .
(2)
The value of SHRS,R can thus be iteratively calculated by
exchanging information between each pair of direct on-tree
neighbor nodes, R and its ancestor Ru.
3.2.2 Member Join/Leave
Suppose a new member NR prepares to join the multicast
session. Instead of using the shortest path provided by the
underlying unicast routing protocol, it attempts to locate a
multicast path that is merged into the current multicast tree
via node R that has the smallest value of SHRS,R. For ease
Proceedings of the 2005 International Conference on Dependable Systems and Networks (DSN’05) 
0-7695-2282-3/05 $20.00 © 2005 IEEE
Authorized licensed use limited to: Tsinghua University. Downloaded on March 20,2021 at 11:53:13 UTC from IEEE Xplore.  Restrictions apply. 
T (S,NR)}, where PRi
4. For each candidate path PRi
of exposition, we assume that NR has knowledge of the net-
work topology and can generate all possible paths connect-
ing to the current tree. Relaxation of the assumption is dis-
cussed in Section 3.3.1. NR obtains a set of available path
options {PRi
T (S,NR) indicates a multi-
cast path between S and NR which is merged into the tree
T (S,NR), there are
at node Ri
two states. One is the path length denoted by DRi
S,NR, and the
other is SHRS,Ri, indicating the degree of link/node sharing
along the on-tree path between the source and the node Ri.
NR determines its multicast path according to the following
criterion.
• Path Selection Criterion:
member NR, its selected multicast path PR∗
isﬁes the following two conditions:
for each new multicast
T (S,NR) sat-
SHRS,R∗ = min{SHRS,Ri}
DR∗
S,NR ≤ (1 + Dthresh) · DSPF
S,NR
where DSPF
S,NR is the shortest path between S and NR
computed by the underlying unicast routing algorithm,
and Dthresh is the parameter used to prevent the selec-
tion of a path that has an arbitrarily large end-to-end
delay. The ﬁrst condition requires the selected path
to have a merger node with a minimum SHRS,R value,
while the second condition guarantees the path length
to be bounded. If there are multiple candidate paths
that satisfy both conditions, the shortest path among
them will be chosen.
This criterion is fairly straightforward because the selected
path is expected to have the fewest overlapping nodes or
links with the current multicast tree. The parameter Dthresh
is designed to make a controlled tradeoff between reduced
degree of sharing and increased end-to-end delay as well as
increased tree cost.
After the path selection, NR issues an explicit Join Req
message towards S along the selected path. Each interme-
diate node the message traverses sets up the soft-state mul-
ticast routing information in its local database and updates
the data structure, if necessary.
The procedure for a member’s departure is simple. When
one member prepares to leave the multicast group, it issues
an explicit Leave Req toward the source along its on-tree
path. Each node this request traverses checks if there are
still members underneath other than the departing mem-
ber. If not, the soft-state routing information for this multi-
cast session is cleared and the resource is released. This
procedure continues until a router, which has a non-null
set of members underneath, is reached. Similar member
join/leave procedures can also be seen in the existing multi-
cast protocols such as PIM [5].
4There might be a variety of ways connecting to node Ri from NR. Here
we only consider the shortest one.
S(0)
DSPF=5, Dthresh=0.3
S, E
Path
E-D-A-S
DS,R
5
SHRS,R
0
Join_Req
A
1
3
3
2
2
Join_Req
D
C
Join_Req
2
3
E
B
7
F
3
2
6
G
2
3
DSPF=8, Dthresh=0.3
S, G
Path
G-B-S
G-B-A-S
G-F-D-A-S
G-E-D-A-S
DS,R
9
10
8
8
SHRS,R
0
1
2
3
S(0)
1
A(1)
2
C
Join_Req
B
3
2
D(2)
3
3
Join_Req
7
F
6
2
G
2
3
3
2
E(3)
DSPF=6, Dthresh=0.3
S, F
Path
F-B-S
F-G-B-S
F-D-A-S
F-E-D-A-S
DS,R
10
11
6
7
SHRS,R
1
2
2
3
(a) E joins
S(0)
1
Join_Req
A(1)
3
3
2
2
Join_Req
D(2)
C
3
3
Join_Req
2
2
E(3)
(c) F joins
B(1)
7
F
6
2
3
G(2)
(b) G joins
S(0)
1
A(2)
2
C
2
D(4)
3
B(1)
3
3
7
6
G(2)
2
3
3
F(5)
2
2
E(5)
(d) ﬁnal tree
Figure 4. Basic tree construction in SMRP.
Figure 4 illustrates the path selection process during the
consecutive arrival of multicast members E, G, and F.
Dthresh is set to 0.3. The tables in Figure 4(a-c) show the set
of paths available to each new member. The join procedure
of E is trivial, and it selects the shortest path as in the tradi-
tional routing protocols. In what follows, we focus on how
member G determines its multicast path in Figure 4(b). Af-
ter E completes its join process, each on-tree node updates
its SHRS,R. For example, node D has SHRS,D = 2 as shown
in the parenthesis near node D. When G joins, it ﬁrst gener-
ates a set of available paths connecting to the current multi-
cast tree. The table lists four such paths each of which uses a
different merger node. According to the path selection crite-
rion described in Section 3.2.2, G chooses path G → B → S
even though path G → F → D → A → S has shorter end-to-
end delay. Similarly, receiver F in Figure 4(c) selects path
F → D → A → S. F does not choose path F → B → S and
path F → G → B → S because their path lengths exceed the
speciﬁed bound in parameter Dthresh. Figure 4(d) shows the
multicast tree that is eventually constructed.
3.2.3 Tree Reshaping
The shape of the multicast tree determines the disjointness
of multicast paths among on-tree neighbor nodes, i.e., the
efﬁciency of local recovery. In real networks, a member
might dynamically join or leave the multicast group. As
described earlier, the tree structure is incrementally updated
during a member’s join or departure, e.g., a new branch is
created when a new member joins, and it may be trimmed
once the associated receiver leaves. After a series of join
and departure events, the multicast tree may become skewed
and undesirable to certain receivers for fast failure recovery.
Hence, we examine how to reshape the tree structure so as
to improve the overall performance.
Proceedings of the 2005 International Conference on Dependable Systems and Networks (DSN’05) 
0-7695-2282-3/05 $20.00 © 2005 IEEE
Authorized licensed use limited to: Tsinghua University. Downloaded on March 20,2021 at 11:53:13 UTC from IEEE Xplore.  Restrictions apply. 
S(0)
1
A(2)
2
C
2
D(4)
3
B(1)
3
3
7
6
G(2)
2
3
3
F(5)
2
2
E(5)
(a) after F joins
S(0)
1
Leave_Req
A(3)
2
2
Leave_Req
D(5)
C(4)
B(1)
3
3
7
6
3
F(6)
G(2)
2
3
Leave_Req
2
2
3
E(6)
DSPF=5, Dthresh=0.3
S, E
Path
E-C-A-S
E-F-D-A-S
E-G-B-S
DS,R
6
8
12
SHRS,R
2
5
2
S(0)
1
Join_Req