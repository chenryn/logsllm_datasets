### Data Collection and Analysis

We were provided with the following data for each output interface: all packets that exited the interface, their input timestamps (recorded at the corresponding input interface), output timestamps, and packet sizes. Since the timestamps were synchronized, we could calculate the delay experienced by each packet across the monitored router. The output links of the chosen router exhibited different levels of utilization. To investigate the convexity and variance properties of various probing processes, we selected a target output interface for each dataset. Given that low-utilization interfaces are less interesting, we chose two of the most heavily utilized (OC-3) interfaces on the router. The output interface for the first dataset is the same as the one used in [7]. For each interface, we present our results using representative 5-minute intervals. The utilization of the chosen interfaces and the representative time intervals are shown in Figure 2.

### Router Queueing Models

To determine if the auto-covariance of the mean delay across a link is convex, we used our datasets to focus on non-intrusive probing, specifically the mean virtual delay. To check for convexity, we modeled the queueing process in the router. We started with a simple FIFO model, where the input timestamp of each packet destined for the chosen output interface is considered the arrival time to a FIFO queue. The queue drains at the same rate as the OC-3 link. We plotted the (normalized) auto-covariance of the virtual delay function obtained from both datasets in Figure 3. In Figure 3 (Left), we show the auto-covariance computed using 2, 20, and 200 seconds of P1. There are no visual signs of non-convexity once the variance of the auto-covariance estimates becomes negligible. Similar confirmation of the convexity condition is observed for the second dataset in Figure 3 (Right).

Previous work [7] has shown that the simple FIFO model cannot accurately predict per-packet delays, primarily because it ignores the time spent by packets traversing the backplane. A more detailed model, which accounts for backplane transit times dependent on packet sizes, can predict per-packet delays more accurately. In Figure 4, we plot the auto-covariance of the virtual delay obtained by applying this detailed model to P2. Even under this model, convexity is not violated. The results presented in the rest of this section hold true for either model. To avoid redundancy, we only present the results obtained by applying the simple FIFO model to P2 and the detailed model to P1.

### Comparing Probing Streams

Given that our empirical evaluation supports the convexity condition, we next investigated whether the conclusions of Theorem 2 hold. We chose four types of probing streams: Poisson, deterministic (periodic probing), and two different Erlang probing streams (recall that an Erlang distribution is a Gamma distribution with an integral shape parameter). We used shape parameters of 2 and 4 for the Erlang probing streams. For each representative time interval, we conducted 50,000 experiments with each probing stream. In every experiment, the probing stream started at a random time within the representative time interval. The probing stream consisted of virtual probes, whose delays were computed using one of our two queueing models. These virtual delays were then used to estimate the mean virtual delay.

In Figure 5, we plot the standard deviation of the mean virtual delay estimates obtained with P1 (10 probes) for various mean inter-probe times. We make three observations:
1. Poisson probing clearly shows higher variance than both types of Erlang probing, especially at low inter-probe times. For inter-probe gaps closer to a second, the difference in variance becomes minimal.
2. At small inter-probe times, the periodic probing stream has the lowest variance, consistent with Theorem 2.
3. As the inter-probe times increase, the variance of periodic probing initially increases before decreasing at an inter-probe time of 5 seconds.

In Figure 6, we show similar plots for P2, P4, and Q3 (with 20 probes). The first two observations hold true in all cases: Poisson probing continues to be worse than Erlang probing, especially at smaller mean inter-probe times. However, the variance of periodic probing does not always increase. In P4 and Q3, it has the lowest variance, consistent with Theorem 2.

### Number of Probes

When using up to 20 probes, we found that Poisson probing is distinctly inferior to Gamma probing (Erlang being a special case) and periodic probing, especially at small mean inter-probe times. To investigate if this behavior depends on the number of probes, we compared the standard deviation of the various strategies by varying the number of probes. The results for P1 and Q3 (for an inter-probe time of 10 ms) are plotted in Figure 7. We found that the number of probes does not affect the relative performance of the probing strategies. Periodic probing remains optimal, and Erlang probing converges to the optimal value as the shape parameter increases.

Slower links are likely to have non-zero auto-covariance at much larger lag values than OC-3 links. If the convexity condition holds, we expect that Poisson probing will be inferior to Gamma probing on slower links for a larger range of inter-probing times. Therefore, in practice, the sub-optimality of Poisson probing is likely to be more significant.

### Periodic Probing

In Figure 5, we observed that the variance of periodic probing anomalously increased before converging to the variance of other probing strategies at an average inter-probe time of 5 seconds. To investigate if this behavior is consistent, we plotted similar results for P2 and Q2 in Figure 8 (Left and Middle). We found that the variance of periodic probing is unpredictable—it shows an anomalous increase for P2 but not for Q2.

There are several possible reasons for the anomalous behavior of periodic probing. Although the auto-covariance plots for the virtual delay in either dataset show no visible signs of non-convexity, there might be non-convex effects significant only at certain lag values. The anomalous behavior could also be due to residual phase-locking effects that cause the system to lack ergodicity when periodic probing is used. One of the goals behind Theorem 2 and our use of Gamma probing over periodic probing was to avoid such potential sample-path bias while achieving near-optimal variance (when R(τ) is convex).

In Figure 8 (Right), we compare Erlang probing streams with shape parameters between 2 and 2048. We find that shape parameters of 4 and 16 exhibit good variance reduction properties. With higher shape parameters, the variance of Erlang probing streams converges to that seen by periodic probing. Empirically, small shape parameters of Erlang between 4 and 16 provide a good trade-off—lack of sample-path bias due to the mixing property and near-optimal variance.