Scrum master：“OK，D 也加进来。那再加上 E 呢？”Sam：“也许吧。”
Scrum master：“90%? 50%?”
Sam：“差不多 50%”
Lisa：“我没把握。”
Scrum master：“OK，那先把它放一边去。我们要做完 A、B、C 和 D。如果有时间的话当然还可以做完 E，不过既然
没人指望它能做完，所以我们不会把它算到计划里面来。
	现在怎么样？”
	所有人：“OK！”
如果 sprint 时间不长，小团队根据直觉进行估算可以收到很好的效 果
用生产率计算来估算 
这项技术包括两步：
1. 2.  得出估算生产率用生产率计算来估算 
这项技术包括两步：
1. 2.  得出估算生产率 
计算在不超出估算生产率的情况下可以加入多少故事。
生产率是“已完成工作总量”的一个衡量方式，其中每一个条目都 是用它的原始估算进行衡量的。
下图中，左边是 sprint 启动时的估算生产率，右边是 sprint 结束时 的实际生产率。每个矩形都是一个故事，里面的数字表示这个故事 的原始估算。
22 | 硝烟中的 SCRUM 和 XP
注意，这里的实际生产率建立在每个故事的原始估算基础之上。在 sprint 过程中对故事时间进行的修改都被忽略了。
我已经能听到你的抱怨了：“那不是闲的蛋疼么？你丫想想，得有 多少事影响生产率啊？有那么一群傻拉吧唧的程序员、原始估算能 错到姥姥家去、范围变化了连个响都听不到，还有，鬼知道从哪个 旮旯里就能出来个东西影响我们，这种事不是太多了么！”我同意，这个数字并不精确。但它依然很有用，尤其是与啥都没有 相比，感觉就更明显了。它可以给你一些硬生生的事实：“抛开具 体原因，我们曾经以为能完成这么多，而实际完成的工作与当初预 计的还是有区别。”
那个 sprint 里面差不多可以完成的故事怎么处理？为什么我们在实 际生产率里面没把它的部分故事点数算进来？呵呵，这就突出表现 了 Scrum 的要求（实际上也是敏捷软件开发和精益制造的要求）：把事情完全做完！达到可以交付的状态！事情只做了一半，它的价 值就是 0（也许还会是负数）。你可以看看 Donald Reinertsen 的“Managing the Design Factory”或是 Poppendieck 的书，从中能够 了解更多信息。
那我们在估算生产率的时候，动用了何等神奇的魔力？
我们怎样制定 SPRINT 计划| 23我们怎样制定 SPRINT 计划| 23 
有一个很简单的办法：看看团队的历史。看看他们在过去几个 sprint 里面的生产率是多少，然后假定在下一个 sprint 里面生产率差不多
不变。
这项技术也被叫做“昨日天气（yesterday’s weather）”。要想使用 该技术，必须满足两个条件：团队已经完成了几个 sprint（这样就
可以得到统计数据），会以几乎完全相同的方式（团队长度不变，
工作状态等条件不变）来进行下一个 sprint。当然也不是绝对如此。
再复杂一点儿，你还可以进行简单的资源计算。假设我们在计划一
个 4 人团队 3 星期的 sprint（15 个工作日）。Lisa 会休假两天。Dave 只能投入 50%的时间，另外还会休假一天。把这些加到一起……
……这个 sprint 一共有 50 个可用的人-天。
这是我们的估算生产率么？不！我们估算的单位是故事点，差不多这是我们的估算生产率么？不！我们估算的单位是故事点，差不多
可以对应于“理想化的人-天”。一个理想化的人-天是完美、高效、
不受打扰的一天，但这种情况太少见了。我们还必须考虑到各种因
素，例如要把未计划到的工作添加到 sprint 中、人们患病不能工作
等等。
那我们的估算生产率肯定要比 50 少了。少多少呢？我们引入“投 入程度（focus factor）”这个词来看一下。
24 | 硝烟中的 SCRUM 和 XP
投入程度用来估算团队会在 sprint 中投入多少精力。投入程度低，
就表示团队估计会受到很大干扰，或者他们觉得自己的时间估算太
过理想化。
要想得出一个合理的投入程度，最好的办法就是看看上一个 sprint 的值（对前几个 sprint 取平均值自然更好）。
把上一个 sprint 中完成的所有故事的原始估算加起来，得到的和就
是实际生产率。是实际生产率。
假设在上个 sprint 里面，由 Tom，Lisa 和 Sam 组成的 3 人团队在 3 个星期内工作了 45 个人-天，一共完成 18 个故事点。现在我们要 为下一个 sprint 估算一下生产率。新伙计 Dave 的加入让情况更复 杂了。把假期和新成员算上，我们在下个 sprint 中一共有 50 个人-
天。
从上面的公式中可以看出，下个 sprint 的估算生产率是 20 个故事 点。这表明团队这个 sprint 中所能做的故事点数之和不能超过 20。
我们怎样制定 SPRINT 计划| 25 
在这种情况下，团队可以选择前 4 个故事，加起来一共 19 个故事 点，或者选前 5 个故事，一共 24 个故事点。我们假设他们选了 4 个故事，因为它离 20 最近。如果不太确定，那就再少选些好了。
因为这 4 个故事加起来一共 19 个故事点，所以他们在这个 sprint 中最后的估算生产率就是 19。“昨日天气”用起来很方便，但需要考虑一些常识。如果上一个
sprint 干得很糟，是因为大部分成员都病了一星期。那你差不多可 以放心假设这次运气不会那么坏，给这个 sprint 设个高点的投入程
度；如果团队最近刚装了一个执行速度快如闪电的持续集成系统，
那你也可以因此提高一下投入程度；如果有新人加入这个 sprint，
就得把他的培训占用的精力也算进来，降低投入程度；等等。
只要条件允许，你就应该看看从前的 sprints，计算出平均数，这样
可以得到更合理的估算。
如果这是个全新的团队，没有任何数据怎么办？你可以参考一下在
类似条件下工作的团队，他们的投入程度数值是多少。
如果没有其他团队可以参考怎么办？随便猜一个数作为投入程度
吧。毕竟这个猜测只会在第一个 sprint 里面使用。过了这次以后你
就有了历史数据可以分析，然后对投入程度和估算生产率做出不断
的改进。就有了历史数据可以分析，然后对投入程度和估算生产率做出不断
的改进。
26 | 硝烟中的 SCRUM 和 XP
我在新团队中使用的“默认”投入程度通常是 70%，因为这是其他 大多数团队都能达到的数值。
我们用的是哪种估算技术？
上面提到了好几种技术——直觉反应、基于昨日天气的生产率计 算、基于可用人-天和估算投入程度的生产率计算。
那我们用的是什么？
一般我们都是结合起来用。花不了多大功夫。
我们审视上个 sprint 的投入程度和实际生产率。我们审视这个 sprint 总共可用的资源，估算一个投入程度。我们讨论这两个投入程度之 间的区别，必要时进行调整。
大致有了一个要放入 sprint 的故事列表以后，我再进行“直觉反应”的检查。我要求他们暂时忘掉数字，感觉一下：在一个 sprint 里一 口咬这么多东西会不会难以下咽。如果觉得太多了，那就移走一两 个故事。反之亦然。当天结束以前，只要得出哪些故事要放到 sprint 里面，我们就算完 成了目标。投入程度、资源可用性和估算生产率只是用来达成这个 目标的手段。
我们为何使用索引卡 
在大多数 sprint 计划会议上，大家都会讨论产品 backlog 中的故事 细节。对故事进行估算、重定优先级、进一步确认细节、拆分，等 等都会在会议上完成。
我们是怎样实际操作的呢？
嗯，也许有人认为是这样的。团队打开投影仪，把用 Excel 保存的 backlog 投在墙上，然后一个人（通常是产品负责人或者 Scrum 
我们怎样制定 SPRINT 计划| 27 
master）拿过键盘，嘟哝着把一个个故事讲一遍，请大家进行讨论。团队和产品负责人讨论过优先级和具体细节以后，拿着键盘的人会 在 Excel 上直接进行修改。
听起来不错？呵，纯粹扯淡。更糟的是，团队一般都是到了会议结 束前才发现他们一直在扯淡，到最后还没把故事看上一遍呢！要想收到好的效果，不妨创建一些索引卡，把它们放到墙上（或一 张大桌子上）。
这种用户体验比计算机和投影仪好得多。原因是：
		大家站起来四处走动=> 他们可以更长时间地保持清醒，并 	留心会议进展。
	他们有更多的个人参与感（而不是只有那个拿着键盘的家 	伙才有）。
	多个故事可以同时编辑。
	重新划分优先级变得易如反掌——挪动索引卡就行。	会议结束后，索引卡可以拿出会议室，贴在墙上的任务板 	上（参见第“我们怎样编写 sprint backlogs”）。
你可以手写索引卡（像我们一样），也可以用简单的脚本从产品 backlog 中直接生成可以打印的索引卡。
28 | 硝烟中的 SCRUM 和 XP
附——
在我的博客上有这种脚本，地址是http://blog.crisp.se/henrikkniberg.重要事项：Sprint 计划会议结束后，我们的 Scrum master 会手工更 新 Excel 中的产品 backlog，以反映故事索引卡中发生的变化。这 确实给管理者带来了一点麻烦，但是考虑到用了物理索引卡以后，sprint 计划会议的效率得到了大幅度提高，这种做法还是完全可以 接受的。
注意这里的“重要性（Importance）”字段。它和打印时 Excel 中 产品 backlog 所记录的“重要性”是一样的。把它放到卡片上，可 以帮助我们根据重要性给卡片排序（我们一般把最重要的放到左
边，依次向右排列）。不过，一旦卡片被放到墙上，那就可以暂时
忽略它的重要性评分，根据它们摆放的相对位置，来对比彼此的重
要性。如果产品负责人交换了两张卡片，先不要浪费时间在纸上更 新数字，只要确保会议结束后在产品 backlog 做更新就可以。
把故事拆分成任务后，时间估算就变得更容易（也更精确）了。把故事拆分成任务后，时间估算就变得更容易（也更精确）了。
这个用索引卡来做就又方便又漂亮。你可以把团队分成不同的二人
组，让他们每组同时各自拆分一个故事。
我们怎样制定 SPRINT 计划| 29 