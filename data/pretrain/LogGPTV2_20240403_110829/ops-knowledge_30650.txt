User: Please use the Ansible automation tool to write a script to install and configure the Java environment on multiple servers.
Assistant: The following is a sample script to install and configure a Java environment on multiple servers using Ansible automation tools: --- - name: Install Java on multiple servers hosts: all become: yes tasks: - name: Install Java apt: name: openjdk -8-jdk state: present - name: Configure Java environment variables lineinfile: path: /etc/environment regexp: '{{ item.regexp }}' line: '{{ item.line }}' with_items: - { regexp: '^JAVA_HOME=', line: 'JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64' } - { regexp: '^PATH=', line: 'PATH="$PATH:$JAVA_HOME/bin "' } - name: Load Java environment variables shell: source /etc/environment handlers: - name: Restart server service: name: '{{ item }}' state: restarted with_items: - nginx - apache2 --- This script includes Follow these steps: 1. Install OpenJDK 8 on all servers. 2. Configure `JAVA_HOME` and `PATH` environment variables in the `/etc/environment` file. `JAVA_HOME` points to the installation path of OpenJDK 8, and the path of Java binaries is added to `PATH`. 3. Use the `source` command to load the Java environment variables in the `/etc/environment` file. 4. Finally, restart the server through handlers to make the environment variables take effect. Note: This script assumes that all servers use the Debian/Ubuntu operating system. If the target server has a different operating system, you need to modify the command to install the Java software package and the path of the Java binary file.