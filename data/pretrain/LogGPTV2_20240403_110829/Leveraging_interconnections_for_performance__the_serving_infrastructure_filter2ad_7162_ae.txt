f
o
n
o
i
t
c
a
r
F
1.0
0.8
0.6
0.4
0.2
0.0
20Mbps
>20Mbps
● ● ● ●
Percentage of unique paths
Onn. PNI
IXP Tra. Onn. PNI
IXP Tra.
Figure 4: Paths by peering type.
Figure 5: Traffic by unique paths.
Figure 6: Throughput at (off-)peak.
4.3 Illustrative Examples
We next illustrate with three real-world scenarios how Aka-
mai’s content delivery service performs łin the wildž. To this
end, we examine the performance (e.g., RTT, throughput)
that content experiences as it traverses Akamai’s edge in
different regions around the world; that is, between the EUF
delivery server that Akamai’s mapping system identified as
being best suited to serve a given content and the end user
client that requested that content.
4.3.1
Serving a large ISP in a single country. We consider
a large eyeball ISP in a European country. Both the country’s
population and Akamai’s deployments are concentrated in
one large metro area and a few medium-sized cities. Akamai’s
deployments serve more than 1Tbps at peak on a normal day
to that ISP, and the vast majority of requests from this large
ISP’s end users is served from Akamai’s deployments within
the country, specifically from Type 1 deployments and the
PNI links of Type 4 deployments. A very small fraction is
served from Akamai’s transit links (Type 2/Type 3/Type 4
deployments) and an even smaller piece from Type 3 deploy-
ments, even though this country is served by a large IXP in
the metro area where the large eyeball ISP is present and
Akamai has deployments.
Performance-wise, analyzing the requests that originate
from the clients on this ISP’s network, we find that Akamai
serves more than 99% of all the requests from deployments
that are either zero (i.e., Type 1 deployments) or one AS-hop
away. Moreover, we find that the median RTT values are all
around 25ms, irrespective of the four link types. However, as
expected and shown in Figure 6, when examining throughput
stratified into łless than 5Mbpsž, łbetween 5-20 Mbpsž, and
łmore than 20Mbpsž and comparing between off-peak and
peak hours, we observe a decrease in performance for all four
link types at peak vs. off-peak, with IXP links showing the
biggest performance hit, mainly because they are more likely
to experience congestion during peak hours. Note, however,
that in this real-world example, Akamai’s mapping system
directs only a negligible number of request-generating clients
to Type 3 deployments.
4.3.2
Serving a country with multiple ISPs. This scenario
is concerned with a different country where the five largest
ISPs combined serve more than 80% of the country’s end
users. In this case, both the end user population and Aka-
mai’s deployments are more uniformly distributed across
the country. The country has a large IXP and a few smaller
geo-dispersed IXPs, and Akamai has deployments at all of
them. In contrast, the five big ISPs have by and large no
presence at those IXPs and severely limit their use of public
peering. In total, Akamai’s deployments serve more than
4Tbps at peak on a typical day to the five ISPs. We use this
scenario to illustrate the similarities between the results of
our analysis of the 2017-09-17 and 2018-05-17 snapshots of
ViewA and their corresponding log datasets.
Figure 7a shows for the two different snapshots perfor-
mance in terms of RTT by link type. The plots use the width
of the boxes to encode the traffic volume served by Akamai,
and where discernible, gray and black boxplots correspond
to the 2017-09-17 and 2018-05-17 snapshots of ViewA, re-
spectively. While, as expected, the IXP option is hardly used,
these large providers and Akamai have good reasons to pre-
fer onnet and PNI over transit. For one, to avoid transit cost
and exert better control over the large volume of traffic that
Akamai sends to those providers, PNI is preferable over tran-
sit. At the same time, to achieve best performance, onnet is a
practical choice since it gets Akamai closest to the end users.
Next, Figure 7b shows the same plot as in Figure 7a but dif-
ferentiates by ISPs. To understand the patent differences in
performance among these large providers, we first note that
while all five ISPs operate a fixed-line network, ISPs A, C, and
E also operate a cellular network, and it is well-known that
mobile users experience in general higher RTTs. Another rel-
evant factor that explains the differences in performance (not
only with respect to RTT but also for throughput as shown
in Figure 7c where for each ISP, the left and right stacked
bar plots are for the 2017-09-17 and 2018-05-17 snapshots,
respectively) is the different arrangements Akamai has with
these large ISPs. In short, different providers serving end
users in one and the same country make their own (different)
decision about choosing from among the available link- and
deployment options, and Figure 7 shows that those decisions
matter when it comes to performance.
216
SIGCOMM ’18, August 20–25, 2018, Budapest, Hungary
F. Wohlfart, N. Chatzis, C. Dabanoglu, G. Carle, W. Willinger
140
120
2017−09−17
2018−05−17
140
120
2017−09−17
2018−05−17
s
m
n
i
T
T
R
100
80
60
40
20
0
s
m
n
i
T
T
R
100
80
60
40
20
0
20Mbps
2017−09−17
2018−05−17
c
i
f
f
a
r
t
f
o
n
o
i
t
c
a
r
F
1.0
1.0
1.0
0.8
0.8
0.8
0.6
0.6
0.6
0.4
0.4
0.4
0.2
0.2
0.2
0.0
0.0
0.0
Onnet
PNI
IXP
Transit
A
B
C
D
E
A
A
A
B
B
B
C
C
C
D
D
D
E
E
E
(a) RTT by link type.
(b) RTT by ISP.
(c) Throughput by ISP.
Figure 7: Serving a country with multiple ISPs.
s
m
n
i
T
T
R
150
EU−1 EU−2 US−1 US−2 AS−1 AS−2
125
100
75
50
25
0
I
N
P
P
X
I
t
e
n
n
O
t
i
s
n
a
r
T
I
N
P
P
X
I
t
e
n
n
O
t
i
s
n
a
r
T
I
N
P
P
X
I
t
e
n
n
O
t
i
s
n
a
r
T
I
N
P
P
X
I
t
e
n
n
O
t
i
s
n
a
r
T
I
N
P
P
X
I
t
e
n
n
O
t
i
s
n
a
r
T
I
N
P
P
X
I
t
e
n
n
O
t