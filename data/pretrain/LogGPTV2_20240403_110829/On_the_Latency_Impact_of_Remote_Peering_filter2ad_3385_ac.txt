ing to network operators at these IXPs, the IXPs’ members are spread across
Brazil, which has a large land mass, and members connect to the IXP to reach
large content and cloud providers. We encountered a substantially smaller frac-
tion of Reseller RP at LINX (20.7%).
376
F. Mazzola et al.
Geographical RP. We inferred that at least a quarter of the ASes connected to
PTT-CE, AMS-IX, and PTT-SP were Geographical RP (Table 3). The remain-
ing IXPs had less than 13.3% Geographical RP members inferred. This indicates
that even though remote peering is widely used at IXPs (as shown by [27,42]),
a considerable fraction of member ASes are physically connected to the IXPs or
closely located to them.
4.2 Remotely Announced Preﬁxes and Routes
For each IXP, we examined the proportion of BGP routes in the IXP routing
data, and the percentage of preﬁxes that could be reached via both local and
remote peers (i.e. local and remote routes). To identify whether routes were local
or remote, we compared routes observed in the BGP data with inferred remote
networks. We labeled routes as remote when the next-hop IP interface belonged
to the IXP subnet and belonged to the list of networks we classiﬁed as remote.
We show the percentage of remote interfaces, routes, and preﬁxes we inferred
at each IXP, along with absolute numbers, in Table 2 for Reseller RP and in
Table 3 for Geographical RP. In all IXPs, remote peers announced proportionally
fewer routes than local peers, both for Reseller RP (Table 2) and Geographical
RP (Table 3). For example, in PTT-SP and PTT-RJ, the fraction of peers using
Reseller RP was 3.2x and 8.7x higher than the fraction of routes they announced,
respectively. For LINX, the 189 remote peers (20.7% of all interfaces) announced
just 10.6% of the routes (107 k/1 M). For the Geographical RP inferences, PTT-
RJ shows the highest diﬀerence between the fraction of remote interfaces and
remote routes (4.4x), with 61 (13.2%) remote interfaces announcing just 3.0% of
all routes (67 k/981 k). The results suggest that remotely connected ASes tend
to announce fewer preﬁxes than local networks into the IXP. Conversations with
IXP network operators revealed that remote peers mainly use their connections
to obtain speciﬁc content not available at their local IXPs.
Interestingly, we observed a sizeable percentage of preﬁxes announced by
both remote and local peers in some IXPs. At LINX, AMS-IX, Eq-Ash, and Eq-
Chi, at least 71.4% of remotely announced preﬁxes also had a route announced
by a local peer in May 2021. These cases can be a problem for traﬃc engineering
since remote peering is invisible to Layer-3 protocols, and there is no guarantee
that BGP will choose the lowest latency route.
5 Choosing Between Remote and Local Peering
Sending traﬃc via an IXP rather than a transit provider can potentially oﬀer
lower latency by keeping local traﬃc local. However, it is currently unknown
whether remote peering might hinder that beneﬁt. The geographical distance of
an AS or its connection type can introduce undesired latency implications to
peering. In this section, we ﬁrst investigate whether remote routes have shorter
AS paths than local routes (Sect. 5.1). Next, we analyze routing data from Route-
Views collectors at each IXP and ﬁnd that remote routes are chosen by BGP
On the Latency Impact of Remote Peering
377
(a) Geographical RP.
(b) Reseller RP.
Fig. 4. AS path lengths of preﬁxes reachable via both remote and local peers. Regard-
less of the method to infer RP, the majority of preﬁxes with both local and remote
routes had remote routes with an AS path length shorter or the same length as the
local route, and therefore likely chosen by BGP, a hypothesis we have conﬁrmed using
data from RouteViews peers (Sect. 5.2).
in the majority of cases (Sect. 5.2). Then, we measure latency, and compare the
latency of remote routes with the latency of local routes (Sect. 5.3). Finally,
we measure the latency variation of each route and evaluate if remote peering
introduces higher latency variability compared to the local route (Sect. 5.4).
5.1 Which Route had the Shortest AS Path?
Preﬁxes with both local and remote routes can be problematic for traﬃc engi-
neering because an AS might choose a higher-latency route with a shorter AS
path, since AS path length is the BGP second tie-breaker (after local prefer-
ence) [47]. To examine whether this was the case, we compared the AS path
length of routes for every preﬁx announced via remote and local peerings seen
in IXP routing data, reporting the analysis for the IXPs that had a considerable
number of these cases, namely LINX, AMS-IX, Eq-Ash, and Eq-Chi (Sect. 4.2).
To compare routes, we selected the shortest AS path route of each type, local
and remote. In order to observe the path lengths as they appear in the routing
data, we do not reduce paths with AS path prepending.
Remote Routes had Shorter AS Paths than Local Routes. Figure 4
shows the percentage of preﬁxes with a shorter AS path length per peering type.
In Fig. 4a, most Geographical RP routes (an average of 82.5%) had shorter (or
equal) AS path lengths, with the remaining 17.4% having a shorter AS path
for the local route. Thus, BGP may choose a remote route over a local route if
378
F. Mazzola et al.
(a) Geographical RP routes.
(b) Reseller RP routes.
Fig. 5. The type of selected route by peers of RouteViews collectors at each IXP for
preﬁxes with both local and remote routes. The remote route was more likely to be
selected for Geographical RP. For Reseller RP, preference between remote and local
routes was the same – ≈42%.
BGP uses AS path length as a tie breaker. The diﬀerence in AS path lengths
for most preﬁxes with diﬀerent length routes was a single ASN (82.1%, 79.0%,
73.9%, 89.9% for LINX, AMS-IX, Eq-Ash, and Eq-Chi). This happened because
the local route was usually announced by large transit providers connected to
the IXPs, which include the transit provider’s ASN in the path.
Figure 4b, shows the distribution when looking at the Reseller RP inferences
for LINX. We only show LINX because the PTT-SP, PTT-RJ, and PTT-CE
results are similar but from a much smaller number of preﬁxes associated with
resellers (fewer than 600 preﬁxes each). Again, we ﬁnd that the remote routes
tend to have shorter AS paths – 40.7% of remote preﬁxes had the shortest
AS path, whereas only 24.4% of local preﬁxes had the shortest AS path. The
diﬀerence in path length for most preﬁxes with diﬀerent length routes was also
a single ASN – 62.5% of the preﬁxes with diﬀerent AS path lengths for LINX.
5.2 Are Shorter AS Path Remote Routes Chosen?
Next, we want to understand the extent to which remote routes are preferred
over local routes. We analyze how frequently the remote routes appear in routes
shared by RouteViews peers in the IXPs (Sect. 2.2). For each preﬁx with both
local and remote routes announced, we ﬁnd all the routes the RouteViews peers
see and compare them with the routes in the dataset used in the previous section.
A remote (or local) route is prevalent among RouteViews peers when most peers
see the route. It was also possible that most peers reported a diﬀerent route,
neither local nor remote, which we did not observe in the IXP routing data that
we used.
On the Latency Impact of Remote Peering
379
Table 4. Number of preﬁxes that had lower latency via remote or local peers. Generally,
a route from a local peer had lower latency than a route from a remote peer to reach
addresses in the same preﬁx.
IXP
Reseller RP
Remote lower Local lower
Geographical RP
Remote lower Local lower
125 (48.9%)
112 (20.9%)
423 (79.1%)
131 (51.1%)
PTT-SP
21,001 (45.5%) 25,155 (54.5%) 13,721 (33.0%) 27,903 (67.0%)
LINX
–
10,477 (61.2%)
AMS-IX
36 (72.0%)
NAPAfrica –
150(73.9%)
PTT-RJ
2 (33.3%)
PTT-CE
21,561 (90.6%)
Eq-Ash
2,486 (75.0%)
Eq-Chi
6,644 (38.8%)
14 (28.0%)
53 (26.1%)
4 (66.7%)
2,230 (9.4%)
830 (25.0%)
–
–
3 (23.1%)
3 (42.9%)
–
–
10 (76.9%)
4 (57.1%)
–
–
Figure 5 shows how often each kind of route was preferred according to
RouteViews peers: the local, the remote, or a diﬀerent route which was not in
our data set (other in Fig. 5). We ﬁnd that the remote route was more commonly
chosen. For Geographical RP routes at LINX, AMS-IX, and Eq-Chi, these remote
routes were chosen for at least 57.1% of the preﬁxes, compared to 28.8% or
fewer local routes, and 14.0% or fewer other routes. When a remote route was
prevalent among RouteViews peers, the remote route had the shortest AS path
among the routes (local, other) for most preﬁxes (83.5%, 90.0%, 81.3%, and
98.5% of these preﬁxes, respectively, for LINX, AMS-IX, Eq-Ash, and Eq-Chi).
When local routes were prevalent, they were not always the shortest AS path
routes available, and the IXP had a remote route with shorter or equal AS path
length (64.5%, 39.7%, 76.6%, and 61.0%, respectively, for LINX, AMS-IX, Eq-
Ash, and Eq-Chi). This suggests that operators might have been using local
policy to prefer local routes so that the remote routes with shorter AS paths
were not selected by BGP.
For Reseller RP routes (Fig. 5b) the situation was diﬀerent: preference
between remote and local routes was similar (≈42%), with other paths account-
ing for the remaining 15.8%. For 75.2% of the preﬁxes with remote routes preva-
lent, the remote paths had shorter AS paths. When local routes were prevalent,
58.4% of preﬁxes had a remote alternative with shorter or equal AS path length
available at the IXP.
380
F. Mazzola et al.
Fig. 6. Latency diﬀerence between remote and local routes measured by end-to-end
latency to reach an address in a remote preﬁx. For Geographical RP, when local routes
had lower latency, the advantage compared to the remote route was more than 5 ms
for at least 44.7% of preﬁxes in three IXPs
5.3
Is There a Latency Penalty Using a Remote Route?
Considering the current preference for peers to select remote routes, we wanted
to understand whether they were also the best route latency-wise. We performed
active measurements, using traceroutes toward IP addresses within the preﬁxes
set seen in IXP routing data. Since we did not have a pre-selected list of respond-
ing servers, we initially probed the ﬁrst ten addresses in the IP block of the preﬁx,
followed by thirty IP addresses randomly selected, from a system external to the
IXP. Because not every preﬁx had a responsive address, the set of measured
preﬁxes is smaller than the original set of preﬁxes. We then ran ICMP-Paris
traceroute measurements to these IP addresses from RouteViews VPs in the
IXPs over two days and compared the latency of the remote and local routes,
provided we had obtained at least ﬁve responses from addresses in each type of
route. Because a preﬁx can have multiple remote or local routes, we used the
lowest latency measured when comparing each route type – i.e., we compared
the lowest latency local and remote routes.
Local Routes had Predominantly Lower Latency than Remote Routes.
Table 4 shows the number (percentage) of preﬁxes where a remote route had
lower latency than the local routes. Looking at Geographical RP ﬁrst, local
routes had lower latency than remote routes for nearly all analyzed IXPs. When
focusing on the IXPs with a higher prevalence of preﬁxes with both local and
remote routes (e.g., LINX, AMS-IX, Eq-Ash, and Eq-Chi), up to 90.6% of the
measured preﬁxes had lower latency using a local route. Similarly, for the Reseller
RP inferences in LINX, the majority of preﬁxes also had a lower latency local
route.
The previous analysis was binary – which route had the lowest latency. We
now analyze the diﬀerences in latency. Figure 6 shows the latency diﬀerence
On the Latency Impact of Remote Peering
381
(a) Geographical RP perspective.
(b) Reseller RP perspective.
Fig. 7. Relative comparison of end-to-end latencies. For Geographical RP, when either
the local or remote route had lower latency, the route had up to 30.7% lower latency
than when compared with the other route type for 75.1% of preﬁxes in three IXPs. For
Reseller RP, when a remote route had lower latency, its advantage over the local route
tended to be higher than vice-versa.
between remote and local routes. The ﬁgures have a diﬀerent number of points,
as the number of preﬁxes with lower latency for remote or local routes shown in
Table 4 are diﬀerent. Figure 6a shows that when a Geographical RP provided a
route with lower latency than the local route, the advantage was small: for at
least 72.9% of the preﬁxes, the latency beneﬁt of the remote route was restricted
to 5 ms or less for three IXPs. In contrast, when the local route was faster,
as shown in Fig. 6b, the latency advantage was more pronounced. For at least
44.7% of preﬁxes in three IXPs, the latency beneﬁt for the local route was more
than 5 ms when compared to the corresponding remote route. When looking
at Reseller RP for LINX in Fig. 6c, we observe that the distribution of latency
diﬀerences was similar for both remote and local routes, with nearly 20% of the
preﬁxes having a latency diﬀerence above 10 ms.
Figure 7 shows a CCDF of the relative latency diﬀerence between remote
and local routes when the latency diﬀered by more than 5 ms. The left side of
the ﬁgure shows the preﬁxes where the local route had lower end-to-end latency
than the remote route, while the right side shows when the remote route had a
lower latency than the local route. The x-axis represents how much faster one
route was when compared with the other. For example, an x equals 0.2 shows
that for some fraction of preﬁxes (in the y-axis), one type of route was 20% faster
than the other type of route. We see on the left side of Fig. 7a that local routes