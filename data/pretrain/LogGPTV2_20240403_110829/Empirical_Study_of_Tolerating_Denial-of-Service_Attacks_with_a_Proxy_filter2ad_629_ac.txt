### 图8：两个模拟网络中的性能（上：R1K网络 下：R10K网络）

为了验证我们分析的普遍性，我们在不同高度和宽度的树形拓扑结构下重复了实验（下载100KB文件），这些实验在第4.3节中描述的两个模拟网络中进行（见图8）。结果表明，在这两个网络中观察到的现象是相似的。因此，上述讨论的因素通常适用于大规模实际代理网络，并且在一般情况下，代理网络可以提高用户体验的性能。这一结果有些出人意料，如果没有大规模的仿真研究，这一点并不明显。

这些结果与先前的研究发现有所不同，例如文献[7]中对PlanetLab [25]测试平台上的WebSOS性能评估报告称，性能下降了2到10倍。我们认为造成这种显著差异的主要因素有两个。首先，WebSOS使用Chord路由，该路由不提供最短路径路由，并且覆盖节点的部署也不优化。这些因素可能导致覆盖路由上的大量开销。其次，WebSOS节点之间的连接不是持久的，也不一定是短路径。因此，WebSOS实现无法从之前讨论的TCP行为中受益，而这些行为大大提高了我们的代理网络性能。除此之外，边缘代理上的用户认证以及较低效的实现也可能导致WebSOS的性能开销。我们的结果表明，通过适当的构建、实现和部署代理网络，WebSOS的性能可以显著提升。

### 5.2 代理网络的DoS抵御能力

为了探讨代理网络的DoS抵御能力，我们研究了在一系列攻击场景下，有或没有代理网络时的用户体验性能。我们在模拟网络（R1K和R10K）中使用相同的代理网络，该网络包含192个代理（64个边缘代理）。此外，我们构建了一个DDoS网络，其中包含100个Trinoo守护程序，随机分布在该网络中。每个Trinoo守护程序具有100Mbps的链路。这个Trinoo网络相当于一个由10,000个僵尸机组成的网络，使用DSL/电缆调制解调器链接。

我们的第一个实验探索代理网络是否真的能够保护应用程序免受DoS攻击。第二个实验研究了在两种大规模攻击场景下的代理网络DoS抵御能力：分散式DoS攻击，其中攻击负载均匀分布在所有边缘代理上；集中式DoS攻击，其中攻击集中在一部分边缘代理上以饱和其入站链路。在这两种攻击情况下，我们考虑了两种用户访问方案：静态边缘代理选择和动态边缘代理选择。在静态方案中，用户基于邻近性选择一个边缘代理，并继续使用它，即使该代理受到攻击。在动态方案中，如果最近的边缘代理受到攻击，用户可以切换到其他代理。最后的实验通过改变代理网络的大小和宽度来研究其DoS抵御能力的可扩展性。

#### 5.2.1 代理网络能否保护应用程序？

我们比较了DoS攻击对应用程序和代理网络的影响。在我们的实验设置中，应用程序服务通过一条250Mbps的链路连接，每个边缘代理通过一条100Mbps的链路连接。图9显示了在R1K网络中有无代理网络的情况下，用户观察到的100KB请求响应时间的累积分布函数（CDF）。结果显示，对应用程序的250Mbps攻击显著增加了服务响应时间（大约10倍），并且应用程序变得不可用。然而，当使用代理网络时，攻击对用户体验的性能没有明显影响。原因很简单，通过一组边缘代理稀释攻击的影响，代理网络比应用程序具有更大的容量，因此不容易被饱和。

#### 5.2.2 抵御大规模DoS攻击

##### 分散攻击（R1K网络）
图10展示了在分散攻击下的用户体验性能。当攻击幅度不超过6.0Gbps（回顾所有边缘代理的聚合上行链路容量为6.4Gbps）时，超过95%的用户未观察到明显的性能下降——分散攻击已被成功容忍。原因是边缘代理成功地稀释了攻击流量，即使在高攻击负载下，大多数边缘代理仍有足够的容量来处理用户请求。图10还显示，当攻击负载达到6.4Gbps时，所有边缘代理都被饱和，所有用户的性能显著下降。

有趣的是，当攻击幅度为6.0Gbps时，R1K网络中有一小部分用户（<5%）经历了较大的性能下降。这是由于代理和用户之间的相关性（见图11）。在攻击前，两个边缘代理A和B共享一条OC3上行链路（155Mbps）。当攻击流量使两个代理的本地链路（100Mbps）饱和时，共享的OC3链路首先发生拥塞。因此，这些代理及其所在网络中的用户将受到影响。这种效应限制了代理网络的有效性。