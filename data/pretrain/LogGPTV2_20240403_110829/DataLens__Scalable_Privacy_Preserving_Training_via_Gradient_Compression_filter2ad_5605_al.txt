{Cauchy-Schwarz inequality}
âˆ¥ğ‘”ğ‘›(ğ‘¥)âˆ¥2 â‰¤ ğ‘€2ğ‘ , 

ğ‘›âˆˆ[ğ‘ ]
ğ‘›âˆˆ[ğ‘ ]
Therefore, for err(ğºğ·2) we have
We bound err(ğ‘ ğ‘–ğ‘”ğ‘›ğºğ·2) in a similar vein as in [9]. Note that
err(ğºğ·2) â‰¤ ğ›¾âˆ¥ğœâˆ¥2 + ğ›¾âˆ¥ğœâˆ¥ğ‘€.


ğ‘–âˆˆ[ğ‘‘]
ğ‘–âˆˆ[ğ‘‘]

|âˆ‡ğ‘“ (ğ‘¥)ğ‘–| 
ğ‘›âˆˆ[ğ‘ ]
ğ‘›âˆˆ[ğ‘ ]
âˆ‡ğ‘“ (ğ‘¥)ğ‘– Â· 1 {sign(âˆ‡ğ‘“ (ğ‘¥)ğ‘–) â‰  sign(ğ‘”ğ‘›(ğ‘¥)ğ‘–)}
1 {|âˆ‡ğ‘“ (ğ‘¥)ğ‘– âˆ’ ğ‘”ğ‘›(ğ‘¥)ğ‘–| â‰¥ |âˆ‡ğ‘“ (ğ‘¥)ğ‘–|} .
err(ğ‘ ğ‘–ğ‘”ğ‘›ğºğ·2) =
=
2ğ›¾ğ‘
ğ‘
2ğ›¾ğ‘
ğ‘
|ğ‘”ğ‘›(ğ‘¥)ğ‘– âˆ’ âˆ‡ğ‘“ (ğ‘¥)ğ‘–|2
(5)
Session 7A: Privacy Attacks and Defenses for ML CCS â€™21, November 15â€“19, 2021, Virtual Event, Republic of Korea2166Let ğ¸ğ‘– := {ğ‘› âˆˆ [ğ‘] : |âˆ‡ğ‘“ (ğ‘¥)ğ‘– âˆ’ ğ‘”ğ‘›(ğ‘¥)ğ‘–| â‰¥ |âˆ‡ğ‘“ (ğ‘¥)ğ‘–|}. Then err(ğ‘ ğ‘–ğ‘”ğ‘›ğºğ·2) = 2ğ›¾ğ‘
ğ‘
|ğ¸ğ‘–|
ğ‘
â‰¤ 1
ğ‘
|âˆ‡ğ‘“ (ğ‘¥)ğ‘– âˆ’ ğ‘”ğ‘›(ğ‘¥)ğ‘–|
|âˆ‡ğ‘“ (ğ‘¥)ğ‘–|
â‰¤
1
|âˆ‡ğ‘“ (ğ‘¥)ğ‘–|

ğ‘›âˆˆ[ğ‘ ]
ğ‘–âˆˆ[ğ‘‘] |âˆ‡ğ‘“ (ğ‘¥)ğ‘–||ğ¸ğ‘–|. Note that

|âˆ‡ğ‘“ (ğ‘¥)ğ‘– âˆ’ ğ‘”ğ‘›(ğ‘¥)ğ‘–|2 â‰¤
(cid:118)(cid:116) 1
ğ‘
ğ‘›âˆˆ[ğ‘ ]
ğœğ‘–
|âˆ‡ğ‘“ (ğ‘¥)ğ‘–| ,
using the Cauchy-Schwarz inequality. This yields
(6)
We now want to prove that either err(ğºğ·) â‰¤ (1 âˆ’ ğ›¼)ğ›¾âˆ¥âˆ‡ğ‘“ (ğ‘¥)âˆ¥2 or err(ğ‘ ğ‘–ğ‘”ğ‘›ğºğ·2) â‰¤ (1 âˆ’ ğ›¼)ğ‘ğ›¾âˆ¥âˆ‡ğ‘“ (ğ‘¥)âˆ¥1. For the sake of contradiction,
err(ğ‘ ğ‘–ğ‘”ğ‘›ğºğ·2) â‰¤ 2ğ›¾ğ‘âˆ¥ğœâˆ¥1.
suppose that
err(ğºğ·) > (1 âˆ’ ğ›¼)ğ›¾âˆ¥âˆ‡ğ‘“ (ğ‘¥)âˆ¥2,
It is easy to see that these conditions, for err(ğ‘ ğ‘–ğ‘”ğ‘›ğºğ·) imply
err(ğ‘ ğ‘–ğ‘”ğ‘›ğºğ·) > (1 âˆ’ ğ›¼)ğ‘ğ›¾âˆ¥âˆ‡ğ‘“ (ğ‘¥)âˆ¥1.
(7)
(8)
(9)
whereas for err(ğºğ·) they imply
ğ‘ğ›¾
ğ‘


ğ‘–âˆˆ[ğ‘‘]
ğ‘–âˆˆ[ğ‘‘]
ğ›¾
ğ‘
|âˆ‡ğ‘“ (ğ‘¥)ğ‘–||ğµğ‘–| â‰¥ err(ğ‘ ğ‘–ğ‘”ğ‘›ğºğ·) > (1 âˆ’ ğ›¼)ğ‘ğ›¾âˆ¥âˆ‡ğ‘“ (ğ‘¥)âˆ¥1,
|âˆ‡ğ‘“ (ğ‘¥)ğ‘–|2|ğ´ğ‘–| â‰¥ err(ğºğ·) > (1 âˆ’ ğ›¼)ğ›¾âˆ¥âˆ‡ğ‘“ (ğ‘¥)âˆ¥2.
Let
noting that ğ´ âˆ© ğµ = âˆ… and ğ´ âˆª ğµ âŠ† [ğ‘‘]. Moreover, since each (ğ´ğ‘–, ğµğ‘–) is a partition of [ğ‘], we have |ğµğ‘–|  (1 âˆ’ 2ğ›¼) max
ğ‘–âˆˆğµ
|âˆ‡ğ‘“ (ğ‘¥)ğ‘–|2 >
(1 âˆ’ 2ğ›¼)3
(ğ‘‘ğ›¼)2 max
ğ‘–âˆˆğ´
|âˆ‡ğ‘“ (ğ‘¥)ğ‘–|2,
â‡â‡’
It is easy to see that this implies
Rewriting (9) in the similar vein yields
which together with 10 implies
|âˆ‡ğ‘“ (ğ‘¥)ğ‘–|.
(10)
which holds only if ğ›¼ > 1
ğ›¼)ğ‘ğ›¾âˆ¥âˆ‡ğ‘“ (ğ‘¥)âˆ¥1, which proves Claim 1.
ğ‘‘+2, contradicting our assumption. Therefore, either err(ğºğ·) â‰¤ (1 âˆ’ ğ›¼)ğ›¾âˆ¥âˆ‡ğ‘“ (ğ‘¥)âˆ¥2 or err(ğ‘ ğ‘–ğ‘”ğ‘›ğºğ·2) â‰¤ (1 âˆ’
Continuing the proof of Theorem 6, we now bound ğ›¾
ğ‘
ğ¼ (2)
ğ‘› =
âŸ¨âˆ‡ğ‘“ (ğ‘¥ğ‘¡), clip(ğ¹ â€²
ğ‘›(ğ‘¥ğ‘¡), ğ‘) âˆ’ clip(top-k(ğ¹ â€²
ğ‘›(ğ‘¥ğ‘¡)), ğ‘)âŸ©
{Cauchy-Schwarz inequality}
âˆ¥clip(ğ¹ â€²
ğ‘›(ğ‘¥ğ‘¡), ğ‘) âˆ’ clip(top-k(ğ¹ â€²
ğ‘›(ğ‘¥ğ‘¡)), ğ‘)âˆ¥.
We will now bound the RHS in two different ways. First, by expanding different cases per coordinate, it is easy to see that
âˆ¥clip(ğ¹ â€²
ğ‘›(ğ‘¥ğ‘¡), ğ‘) âˆ’ clip(top-k(ğ¹ â€²
ğ‘›(ğ‘¥ğ‘¡)), ğ‘)âˆ¥ â‰¤ âˆ¥ğ¹ â€²
ğ‘›(ğ‘¥ğ‘¡) âˆ’ top-k(ğ¹ â€²
ğ‘›(ğ‘¥ğ‘¡))âˆ¥ â‰¤ ğœğ‘˜âˆ¥ğ¹ â€²
ğ‘›(ğ‘¥ğ‘¡)âˆ¥,
by assumption. Therefore,
ğ›¾
ğ‘
by the Cauchy-Schwarz inequality and the assumption 1
ğ‘
ğ¼ (2)
ğ‘› â‰¤ ğ›¾âˆ¥âˆ‡ğ‘“ (ğ‘¥ğ‘¡)âˆ¥ğœğ‘˜
ğ‘›âˆˆ[ğ‘ ] âˆ¥ğ¹ â€²
1
ğ‘
ğ‘›(ğ‘¥ğ‘¡)âˆ¥2 â‰¤ ğ‘€2.
ğ‘›âˆˆ[ğ‘ ]
âˆ¥ğ¹ â€²
ğ‘›(ğ‘¥ğ‘¡)âˆ¥ â‰¤ ğ›¾ğœğ‘˜ ğ‘€2,
ğ‘›âˆˆ[ğ‘ ] ğ¼ (2)

ğ‘›
ğ‘›âˆˆ[ğ‘ ]
ğ›¾
ğ‘
â‰¤ ğ›¾âˆ¥âˆ‡ğ‘“ (ğ‘¥ğ‘¡)âˆ¥ 1
ğ‘
by

ğ‘›âˆˆ[ğ‘ ]


ğ‘›âˆˆ[ğ‘ ]
ğ›¾
ğ‘

ğ‘›âˆˆ[ğ‘ ]
Session 7A: Privacy Attacks and Defenses for ML CCS â€™21, November 15â€“19, 2021, Virtual Event, Republic of Korea2167
ğ‘›âˆˆ[ğ‘ ]
ğ›¾
ğ‘
On the other hand, since âˆ¥clip(ğ¹ â€²
ğ‘›(ğ‘¥ğ‘¡), ğ‘) âˆ’ clip(top-k(ğ¹ â€²
ğ¼ (2)
ğ‘› â‰¤ ğ›¾ğ‘€ min{ğœğ‘˜ ğ‘€, ğ‘(ğ‘‘ âˆ’ ğ‘˜)}.
ğ‘›(ğ‘¥ğ‘¡)), ğ‘)âˆ¥ â‰¤ ğ‘(ğ‘‘ âˆ’ ğ‘˜), we easily get
Combining the bounds with respect to ğ¼ (1)
ğ‘›
and ğ¼ (2)
ğ‘›

ğ‘›âˆˆ[ğ‘ ]
âˆ’ ğ›¾
ğ‘
For ğ½ğ‘›(ğ‘¥ğ‘¡) note that
and adding easy analysis of different cases for scaling by ğ‘ yields
ğ‘›âˆˆ[ğ‘ ]
ğ¿ğ›¾2
ğ‘
ğ¿ğ›¾2
ğ‘
Eğœ‰ğ‘¡
ğ‘›âˆˆ[ğ‘ ]
ğ½ğ‘›(ğ‘¥ğ‘¡) =


ğ‘›(ğ‘¥ğ‘¡)), ğ‘), ğœ‰ğ‘¡)(cid:13)(cid:13)2
ğ¼ğ‘›(ğ‘¥ğ‘¡) â‰¤ âˆ’ğ›¾ min{ğ‘, 1}
ğ‘‘ + 2 min{âˆ¥âˆ‡ğ‘“ (ğ‘¥ğ‘¡)âˆ¥2, âˆ¥âˆ‡ğ‘“ (ğ‘¥ğ‘¡)âˆ¥1} + ğ›¾ max{âˆ¥ğœâˆ¥2 + âˆ¥ğœâˆ¥ğ‘€, 2âˆ¥ğœâˆ¥1} + ğ›¾ min{ğœğ‘˜ ğ‘€2, ğ‘(ğ‘‘ âˆ’ ğ‘˜)ğ‘€}.

(cid:8)âˆ¥ğ‘ + ğ‘âˆ¥2 â‰¤ 2âˆ¥ğ‘âˆ¥2 + 2âˆ¥ğ‘âˆ¥2(cid:9)
(cid:2)âˆ¥ğ‘„(ğ‘¥, ğœ‰) âˆ’ ğ‘¥âˆ¥2(cid:3) â‰¤ Ëœğœ2(cid:9)
(cid:8)Eğœ‰
 1

(cid:13)(cid:13)ğ¹ â€²
ğ‘›(ğ‘¥)(cid:13)(cid:13)2 â‰¤ ğ‘€2
(cid:13)(cid:13)ğ‘„(clip(top-k(ğ¹ â€²
(cid:13)(cid:13)ğ‘„(clip(top-k(ğ¹ â€²

ğ‘›(ğ‘¥ğ‘¡)), ğ‘)âˆ¥2(cid:17)
ğ‘›(ğ‘¥ğ‘¡)), ğ‘), ğœ‰ğ‘¡) âˆ’ clip(top-k(ğ¹ â€²
ğ‘›(ğ‘¥ğ‘¡)), ğ‘)(cid:13)(cid:13)2
â‰¤ 2ğ¿ğ›¾2( Ëœğœ2 + min{ğ‘2, ğ‘€2}).
Ëœğœ2 + âˆ¥clip(top-k(ğ¹ â€²
â‰¤ 2ğ¿ğ›¾2
âˆ¥clip(top-k(ğ¹ â€²
ğ‘›(ğ‘¥ğ‘¡)), ğ‘)âˆ¥2
â‰¤ 2ğ¿ğ›¾2
+ 2ğ¿ğ›¾2
ğ‘
ğ‘
ğ‘›âˆˆ[ğ‘ ]
ğ‘
ğ‘›âˆˆ[ğ‘ ]
ğ‘
ğ‘›âˆˆ[ğ‘ ]

(cid:16)
ğ‘›âˆˆ[ğ‘ ]
Eğœ‰ğ‘¡
(11)
Combining bounds on ğ¼ğ‘›(ğ‘¥ğ‘¡) and ğ½ğ‘›(ğ‘¥ğ‘¡) yields
Summing over all ğ‘¡ âˆˆ [ğ‘‡] yields
ğ›¾ min{ğ‘, 1}
ğ‘‘ + 2 min{âˆ¥âˆ‡ğ‘“ (ğ‘¥ğ‘¡)âˆ¥2, âˆ¥âˆ‡ğ‘“ (ğ‘¥ğ‘¡)âˆ¥1} â‰¤ ğ‘“ (ğ‘¥ğ‘¡) âˆ’ ENEğœ‰ğ‘¡
ğ‘“ (ğ‘¥ğ‘¡+1)
ğ›¾ min{ğ‘, 1}
ğ‘‘ + 2
+ ğ›¾ max{âˆ¥ğœâˆ¥2 + âˆ¥ğœâˆ¥ğ‘€, 2âˆ¥ğœâˆ¥1} + ğ›¾ min{ğœğ‘˜ ğ‘€2, ğ‘(ğ‘‘ âˆ’ ğ‘˜)ğ‘€} + 2ğ¿ğ›¾2( Ëœğœ2 + min{ğ‘2, ğ‘€2}) + ğ¿ğ›¾2ğ´ğ‘˜.

+ ğ‘‡ğ›¾(cid:0) min{ğœğ‘˜ ğ‘€2, ğ‘(ğ‘‘ âˆ’ ğ‘˜)ğ‘€} + ğ¿ğ›¾ğ´ğ‘˜ + max{âˆ¥ğœâˆ¥2 + âˆ¥ğœâˆ¥ğ‘€, 2âˆ¥ğœâˆ¥1} + 2ğ¿ğ›¾( Ëœğœ2 + min{ğ‘2, ğ‘€2})(cid:1),
min{Eâˆ¥âˆ‡ğ‘“ (ğ‘¥ğ‘¡)âˆ¥2, Eâˆ¥âˆ‡ğ‘“ (ğ‘¥ğ‘¡)âˆ¥1} â‰¤ ğ‘“ (ğ‘¥0) âˆ’ ğ‘“ (ğ‘¥âˆ—)
ğ‘¡ âˆˆ[ğ‘‡ ]
For the moreover part, in which no quantization is performed, i.e., ğ‘„(ğ‘¥, ğœ‰) = ğ‘¥, for all ğ‘¥ (point-wise, not just on average), the calculation
which after dividing with ğ‘‡ğ›¾ finishes the proof of the first part.
for ğ½ğ‘›(ğ‘¥ğ‘¡) becomes

ğ‘›âˆˆ[ğ‘ ]
ğ¿ğ›¾2
ğ‘
ğ½ğ‘›(ğ‘¥ğ‘¡) =
ğ¿ğ›¾2
ğ‘

ğ‘›âˆˆ[ğ‘ ]
(cid:13)(cid:13)clip(top-k(ğ¹ â€²
ğ‘›(ğ‘¥ğ‘¡)), ğ‘)(cid:13)(cid:13)2 â‰¤ ğ¿ğ›¾2min{ğ‘2, ğ‘€2}.
Continuing the proof as above (summing over all ğ‘¡ âˆˆ [ğ‘‡] and dividing by ğ‘‡ğ›¾) finishes the proof of the second part.
Session 7A: Privacy Attacks and Defenses for ML CCS â€™21, November 15â€“19, 2021, Virtual Event, Republic of Korea2168