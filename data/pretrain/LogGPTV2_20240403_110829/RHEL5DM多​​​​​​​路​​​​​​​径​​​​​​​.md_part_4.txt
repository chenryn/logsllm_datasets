[]{#mpath_devices.html#idm140667711210544
.indexterm}[]{#mpath_devices.html#idm140667711209584
.indexterm}[]{#mpath_devices.html#idm140667711208624 .indexterm}
::: para
当​​​​​​​在​​​​​​​ DM-多​​​​​​​路​​​​​​​径​​​​​​​中​​​​​​​添​​​​​​​加​​​​​​​新​​​​​​​设​​​​​​​备​​​​​​​时​​​​​​​，这​​​​​​​些​​​​​​​新​​​​​​​设​​​​​​​备​​​​​​​会​​​​​​​位​​​​​​​于​​​​​​​ `/dev`{.literal}
目​​​​​​​录​​​​​​​的​​​​​​​三​​​​​​​个​​​​​​​不​​​​​​​同​​​​​​​位​​​​​​​置​​​​​​​：`/dev/mapper/mpath`{.filename}*`n`*、​​​​​​​`/dev/mpath/mpath`{.filename}*`n`*
和​​​​​​​ `/dev/dm-`{.filename}*`n`*。​​​​​​​
:::
::: {.itemizedlist xmlns:d="http://docbook.org/ns/docbook"}
-   ::: para
    `/dev/mapper`{.filename}
    中​​​​​​​的​​​​​​​设​​​​​​​备​​​​​​​是​​​​​​​在​​​​​​​引​​​​​​​导​​​​​​​过​​​​​​​程​​​​​​​中​​​​​​​生​​​​​​​成​​​​​​​的​​​​​​​。​​​​​​​可​​​​​​​使​​​​​​​用​​​​​​​这​​​​​​​些​​​​​​​设​​​​​​​备​​​​​​​访​​​​​​​问​​​​​​​多​​​​​​​路​​​​​​​径​​​​​​​设​​​​​​​备​​​​​​​，例​​​​​​​如​​​​​​​在​​​​​​​生​​​​​​​成​​​​​​​逻​​​​​​​辑​​​​​​​卷​​​​​​​时​​​​​​​。​​​​​​​
    :::
-   ::: para
    提​​​​​​​供​​​​​​​ `/dev/mpath`{.filename}
    中​​​​​​​的​​​​​​​设​​​​​​​备​​​​​​​是​​​​​​​为​​​​​​​了​​​​​​​方​​​​​​​便​​​​​​​，这​​​​​​​样​​​​​​​可​​​​​​​在​​​​​​​一​​​​​​​个​​​​​​​目​​​​​​​录​​​​​​​中​​​​​​​看​​​​​​​到​​​​​​​所​​​​​​​有​​​​​​​多​​​​​​​路​​​​​​​径​​​​​​​设​​​​​​​备​​​​​​​。​​​​​​​这​​​​​​​些​​​​​​​设​​​​​​​备​​​​​​​是​​​​​​​由​​​​​​​
    `udev`{.command}
    设​​​​​​​备​​​​​​​管​​​​​​​理​​​​​​​器​​​​​​​生​​​​​​​成​​​​​​​的​​​​​​​，且​​​​​​​在​​​​​​​系​​​​​​​统​​​​​​​需​​​​​​​要​​​​​​​访​​​​​​​问​​​​​​​它​​​​​​​们​​​​​​​时​​​​​​​不​​​​​​​一​​​​​​​定​​​​​​​能​​​​​​​启​​​​​​​动​​​​​​​。​​​​​​​请​​​​​​​不​​​​​​​要​​​​​​​使​​​​​​​用​​​​​​​这​​​​​​​些​​​​​​​设​​​​​​​备​​​​​​​生​​​​​​​成​​​​​​​逻​​​​​​​辑​​​​​​​卷​​​​​​​或​​​​​​​者​​​​​​​文​​​​​​​件​​​​​​​系​​​​​​​统​​​​​​​。​​​​​​​
    :::
-   ::: para
    所​​​​​​​有​​​​​​​ `/dev/dm-`{.filename}*`n`*
    格​​​​​​​式​​​​​​​的​​​​​​​设​​​​​​​备​​​​​​​都​​​​​​​只​​​​​​​能​​​​​​​是​​​​​​​作​​​​​​​为​​​​​​​内​​​​​​​部​​​​​​​使​​​​​​​用​​​​​​​，且​​​​​​​应​​​​​​​该​​​​​​​永​​​​​​​远​​​​​​​不​​​​​​​要​​​​​​​使​​​​​​​用​​​​​​​。​​​​​​​
    :::
:::
::: para
For information on the multipath configuration defaults, including the
`user_friendly_names`{.literal} configuration option, see [第 4.3 节
"配​​​​​​​置​​​​​​​文​​​​​​​件​​​​​​​默​​​​​​​认​​​​​​​设​​​​​​​置​​​​​​​"](#mpio_configfile.html#config_file_defaults){.xref}.
:::
::: para
You can also set the name of a multipath device to a name of your
choosing by using the `alias`{.literal} option in the
`multipaths`{.literal} section of the multipath configuration file. For
information on the `multipaths`{.literal} section of the multipath
configuration file, see see [第 4.4 节
"多​​​​​​​路​​​​​​​径​​​​​​​设​​​​​​​备​​​​​​​配​​​​​​​置​​​​​​​属​​​​​​​性​​​​​​​"](#mpio_configfile.html#config_file_multipath){.xref}.
:::
:::
::: section
::: titlepage
# [⁠]{#mpath_devices.html#multipath_consistent_names}2.2. 在​​​​​​​群​​​​​​​集​​​​​​​中​​​​​​​保​​​​​​​持​​​​​​​多​​​​​​​路​​​​​​​径​​​​​​​设​​​​​​​备​​​​​​​名​​​​​​​称​​​​​​​一​​​​​​​致​​​​​​​ {.title}
:::
::: para
当​​​​​​​将​​​​​​​ `user_friendly_names`{.literal} 配​​​​​​​置​​​​​​​选​​​​​​​项​​​​​​​设​​​​​​​为​​​​​​​ `yes`{.literal}
时​​​​​​​，该​​​​​​​多​​​​​​​路​​​​​​​径​​​​​​​设​​​​​​​备​​​​​​​的​​​​​​​名​​​​​​​称​​​​​​​对​​​​​​​于​​​​​​​节​​​​​​​点​​​​​​​来​​​​​​​说​​​​​​​是​​​​​​​唯​​​​​​​一​​​​​​​的​​​​​​​，但​​​​​​​不​​​​​​​保​​​​​​​证​​​​​​​对​​​​​​​使​​​​​​​用​​​​​​​多​​​​​​​路​​​​​​​径​​​​​​​设​​​​​​​备​​​​​​​的​​​​​​​所​​​​​​​有​​​​​​​节​​​​​​​点​​​​​​​都​​​​​​​一​​​​​​​致​​​​​​​。​​​​​​​如​​​​​​​果​​​​​​​您​​​​​​​使​​​​​​​用​​​​​​​
LVM
生​​​​​​​成​​​​​​​逻​​​​​​​辑​​​​​​​设​​​​​​​备​​​​​​​，这​​​​​​​将​​​​​​​不​​​​​​​会​​​​​​​给​​​​​​​您​​​​​​​造​​​​​​​成​​​​​​​任​​​​​​​何​​​​​​​困​​​​​​​难​​​​​​​。​​​​​​​但​​​​​​​如​​​​​​​果​​​​​​​您​​​​​​​需​​​​​​​要​​​​​​​将​​​​​​​您​​​​​​​的​​​​​​​多​​​​​​​路​​​​​​​径​​​​​​​设​​​​​​​备​​​​​​​名​​​​​​​称​​​​​​​在​​​​​​​群​​​​​​​集​​​​​​​中​​​​​​​的​​​​​​​每​​​​​​​个​​​​​​​节​​​​​​​点​​​​​​​上​​​​​​​都​​​​​​​保​​​​​​​持​​​​​​​一​​​​​​​致​​​​​​​，请​​​​​​​执​​​​​​​行​​​​​​​以​​​​​​​下​​​​​​​步​​​​​​​骤​​​​​​​之​​​​​​​一​​​​​​​：
:::
::: {.itemizedlist xmlns:d="http://docbook.org/ns/docbook"}
-   ::: para
    Use the `alias`{.literal} option in the `multipaths`{.literal}
    section of the multipath configuration file to set the name of the
    multipath device. The `alias`{.literal} for the multipath device is
    consistent across all the nodes in a cluster. For information on the
    `multipaths`{.literal} section of the multipath configuration file,
    see see [第 4.4 节
    "多​​​​​​​路​​​​​​​径​​​​​​​设​​​​​​​备​​​​​​​配​​​​​​​置​​​​​​​属​​​​​​​性​​​​​​​"](#mpio_configfile.html#config_file_multipath){.xref}.
    :::
-   ::: para
    如​​​​​​​果​​​​​​​您​​​​​​​想​​​​​​​要​​​​​​​系​​​​​​​统​​​​​​​定​​​​​​​义​​​​​​​的​​​​​​​用​​​​​​​户​​​​​​​友​​​​​​​好​​​​​​​名​​​​​​​称​​​​​​​在​​​​​​​群​​​​​​​集​​​​​​​中​​​​​​​的​​​​​​​所​​​​​​​有​​​​​​​节​​​​​​​点​​​​​​​间​​​​​​​保​​​​​​​持​​​​​​​一​​​​​​​致​​​​​​​，请​​​​​​​在​​​​​​​一​​​​​​​台​​​​​​​机​​​​​​​器​​​​​​​中​​​​​​​设​​​​​​​置​​​​​​​所​​​​​​​有​​​​​​​多​​​​​​​路​​​​​​​径​​​​​​​设​​​​​​​备​​​​​​​。​​​​​​​然​​​​​​​后​​​​​​​将​​​​​​​那​​​​​​​台​​​​​​​机​​​​​​​器​​​​​​​中​​​​​​​的​​​​​​​
    `/var/lib/multipath/bindings`{.filename}
    文​​​​​​​件​​​​​​​复​​​​​​​制​​​​​​​到​​​​​​​群​​​​​​​集​​​​​​​中​​​​​​​其​​​​​​​它​​​​​​​所​​​​​​​有​​​​​​​机​​​​​​​器​​​​​​​中​​​​​​​。​​​​​​​
    :::
:::
:::
::: section
::: titlepage
# [⁠]{#mpath_devices.html#multipath_device_attributes}2.3. 多​​​​​​​路​​​​​​​径​​​​​​​设​​​​​​​备​​​​​​​属​​​​​​​性​​​​​​​ {.title}
:::
::: para
In addition to the `user_friendly_names`{.literal} and `alias`{.literal}
options, a multipath device has numerous attributes. You can modify
these attributes for a specific multipath device by creating an entry
for that device in the `multipaths`{.literal} section of the multipath
configuration file. For information on the `multipaths`{.literal}
section of the multipath configuration file, see see [第 4.4 节
"多​​​​​​​路​​​​​​​径​​​​​​​设​​​​​​​备​​​​​​​配​​​​​​​置​​​​​​​属​​​​​​​性​​​​​​​"](#mpio_configfile.html#config_file_multipath){.xref}.
:::
:::
::: section
::: titlepage
# [⁠]{#mpath_devices.html#multipath_logical_volumes}2.4. 逻​​​​​​​辑​​​​​​​卷​​​​​​​中​​​​​​​的​​​​​​​多​​​​​​​路​​​​​​​径​​​​​​​设​​​​​​​备​​​​​​​ {.title}
:::
[]{#mpath_devices.html#idm140667692059392
.indexterm}[]{#mpath_devices.html#idm140667692057952
.indexterm}[]{#mpath_devices.html#idm140667692056512
.indexterm}[]{#mpath_devices.html#idm140667692055072
.indexterm}[]{#mpath_devices.html#idm140667692053632
.indexterm}[]{#mpath_devices.html#idm140667692052192 .indexterm}
::: para
生​​​​​​​成​​​​​​​多​​​​​​​路​​​​​​​径​​​​​​​设​​​​​​​备​​​​​​​后​​​​​​​，多​​​​​​​路​​​​​​​径​​​​​​​设​​​​​​​备​​​​​​​的​​​​​​​名​​​​​​​称​​​​​​​可​​​​​​​以​​​​​​​与​​​​​​​您​​​​​​​生​​​​​​​成​​​​​​​一​​​​​​​个​​​​​​​ LVM
物​​​​​​​理​​​​​​​卷​​​​​​​时​​​​​​​使​​​​​​​用​​​​​​​的​​​​​​​物​​​​​​​理​​​​​​​设​​​​​​​备​​​​​​​名​​​​​​​称​​​​​​​相​​​​​​​同​​​​​​​。​​​​​​​例​​​​​​​如​​​​​​​：如​​​​​​​果​​​​​​​多​​​​​​​路​​​​​​​径​​​​​​​名​​​​​​​称​​​​​​​为​​​​​​​
`/dev/mapper/mpath0`{.filename}，以​​​​​​​下​​​​​​​命​​​​​​​令​​​​​​​可​​​​​​​将​​​​​​​
`/dev/mapper/mpath0`{.filename} 标​​​​​​​记​​​​​​​为​​​​​​​一​​​​​​​个​​​​​​​物​​​​​​​理​​​​​​​卷​​​​​​​。​​​​​​​
:::
``` screen
pvcreate /dev/mapper/mpath0
```
::: para
您​​​​​​​可​​​​​​​以​​​​​​​如​​​​​​​在​​​​​​​使​​​​​​​用​​​​​​​其​​​​​​​它​​​​​​​ LVM 物​​​​​​​理​​​​​​​设​​​​​​​备​​​​​​​一​​​​​​​样​​​​​​​在​​​​​​​创​​​​​​​建​​​​​​​ LVM 卷​​​​​​​组​​​​​​​时​​​​​​​使​​​​​​​用​​​​​​​得​​​​​​​到​​​​​​​的​​​​​​​ LVM
物​​​​​​​理​​​​​​​卷​​​​​​​。​​​​​​​
:::
::: para
当​​​​​​​您​​​​​​​创​​​​​​​建​​​​​​​一​​​​​​​个​​​​​​​使​​​​​​​用​​​​​​​主​​​​​​​动​​​​​​​/被​​​​​​​动​​​​​​​多​​​​​​​路​​​​​​​径​​​​​​​阵​​​​​​​列​​​​​​​的​​​​​​​ LVM
逻​​​​​​​辑​​​​​​​卷​​​​​​​作​​​​​​​为​​​​​​​基​​​​​​​础​​​​​​​物​​​​​​​理​​​​​​​设​​​​​​​备​​​​​​​时​​​​​​​，您​​​​​​​应​​​​​​​该​​​​​​​在​​​​​​​ `lvm.conf`{.filename}
中​​​​​​​添​​​​​​​加​​​​​​​过​​​​​​​滤​​​​​​​器​​​​​​​以​​​​​​​便​​​​​​​排​​​​​​​除​​​​​​​位​​​​​​​于​​​​​​​多​​​​​​​路​​​​​​​径​​​​​​​设​​​​​​​备​​​​​​​下​​​​​​​的​​​​​​​磁​​​​​​​盘​​​​​​​。​​​​​​​这​​​​​​​是​​​​​​​因​​​​​​​为​​​​​​​如​​​​​​​果​​​​​​​阵​​​​​​​列​​​​​​​在​​​​​​​接​​​​​​​收​​​​​​​ I/O
时​​​​​​​自​​​​​​​动​​​​​​​将​​​​​​​主​​​​​​​动​​​​​​​路​​​​​​​径​​​​​​​改​​​​​​​为​​​​​​​被​​​​​​​动​​​​​​​路​​​​​​​径​​​​​​​，不​​​​​​​过​​​​​​​滤​​​​​​​掉​​​​​​​这​​​​​​​些​​​​​​​设​​​​​​​备​​​​​​​，无​​​​​​​论​​​​​​​何​​​​​​​时​​​​​​​ LVM
扫​​​​​​​描​​​​​​​被​​​​​​​动​​​​​​​路​​​​​​​径​​​​​​​时​​​​​​​多​​​​​​​路​​​​​​​径​​​​​​​将​​​​​​​执​​​​​​​行​​​​​​​出​​​​​​​错​​​​​​​冗​​​​​​​余​​​​​​​并​​​​​​​进​​​​​​​行​​​​​​​出​​​​​​​错​​​​​​​切​​​​​​​换​​​​​​​。​​​​​​​对​​​​​​​于​​​​​​​需​​​​​​​要​​​​​​​使​​​​​​​用​​​​​​​命​​​​​​​令​​​​​​​激​​​​​​​活​​​​​​​被​​​​​​​动​​​​​​​路​​​​​​​径​​​​​​​的​​​​​​​主​​​​​​​动​​​​​​​/被​​​​​​​动​​​​​​​阵​​​​​​​列​​​​​​​，LVM
会​​​​​​​在​​​​​​​发​​​​​​​生​​​​​​​这​​​​​​​种​​​​​​​情​​​​​​​况​​​​​​​时​​​​​​​给​​​​​​​出​​​​​​​警​​​​​​​告​​​​​​​信​​​​​​​息​​​​​​​。​​​​​​​
:::
::: para
要​​​​​​​过​​​​​​​滤​​​​​​​多​​​​​​​路​​​​​​​径​​​​​​​配​​​​​​​置​​​​​​​文​​​​​​​件​​​​​​​（`lvm.conf`{.filename}）中​​​​​​​的​​​​​​​所​​​​​​​有​​​​​​​ SCSI
设​​​​​​​备​​​​​​​，请​​​​​​​在​​​​​​​该​​​​​​​文​​​​​​​件​​​​​​​的​​​​​​​ `devices`{.literal} 部​​​​​​​分​​​​​​​添​​​​​​​加​​​​​​​以​​​​​​​下​​​​​​​过​​​​​​​滤​​​​​​​器​​​​​​​。​​​​​​​
:::
``` screen
filter = [ "r/disk/", "r/sd.*/", "a/.*/" ]
```
:::
:::
[]{#mpio_setup.html}
::: chapter
::: titlepage
# [⁠]{#mpio_setup.html#mpio_setup}第 3 章 安​​​​​​​装​​​​​​​ DM-Multipath {.title}
:::
[]{#mpio_setup.html#idm140667719005168
.indexterm}[]{#mpio_setup.html#idm140667697785728
.indexterm}[]{#mpio_setup.html#idm140667649438896
.indexterm}[]{#mpio_setup.html#idm140667707350304 .indexterm}
::: para
本​​​​​​​章​​​​​​​提​​​​​​​供​​​​​​​了​​​​​​​配​​​​​​​置​​​​​​​ DM-Multipath 的​​​​​​​分​​​​​​​步​​​​​​​示​​​​​​​例​​​​​​​，其​​​​​​​中​​​​​​​包​​​​​​​括​​​​​​​以​​​​​​​下​​​​​​​步​​​​​​​骤​​​​​​​：
:::
::: {.itemizedlist xmlns:d="http://docbook.org/ns/docbook"}
-   ::: para
    基​​​​​​​本​​​​​​​ DM-Multipath 安​​​​​​​装​​​​​​​
    :::
-   ::: para
    忽​​​​​​​略​​​​​​​本​​​​​​​地​​​​​​​磁​​​​​​​盘​​​​​​​
    :::
-   ::: para
    在​​​​​​​配​​​​​​​置​​​​​​​文​​​​​​​件​​​​​​​中​​​​​​​添​​​​​​​加​​​​​​​更​​​​​​​多​​​​​​​设​​​​​​​备​​​​​​​
    :::
:::
::: section
::: titlepage
# [⁠]{#mpio_setup.html#setup_procedure}3.1. 安​​​​​​​装​​​​​​​ DM-Multipath {.title}
:::
[]{#mpio_setup.html#idm140667690738864
.indexterm}[]{#mpio_setup.html#idm140667712947168 .indexterm}
::: para
在​​​​​​​您​​​​​​​的​​​​​​​系​​​​​​​统​​​​​​​中​​​​​​​安​​​​​​​装​​​​​​​ DM-Multipath
前​​​​​​​，请​​​​​​​确​​​​​​​定​​​​​​​您​​​​​​​的​​​​​​​系​​​​​​​统​​​​​​​已​​​​​​​经​​​​​​​进​​​​​​​行​​​​​​​了​​​​​​​升​​​​​​​级​​​​​​​，其​​​​​​​中​​​​​​​包​​​​​​​括​​​​​​​对​​​​​​​
`device-mapper-multipath`{.literal} 软​​​​​​​件​​​​​​​包​​​​​​​的​​​​​​​升​​​​​​​级​​​​​​​。​​​​​​​
:::
::: para
使​​​​​​​用​​​​​​​以​​​​​​​下​​​​​​​步​​​​​​​骤​​​​​​​为​​​​​​​基​​​​​​​本​​​​​​​出​​​​​​​错​​​​​​​冗​​​​​​​余​​​​​​​配​​​​​​​置​​​​​​​安​​​​​​​装​​​​​​​ DM-Multipath。​​​​​​​
:::
::: {.orderedlist xmlns:d="http://docbook.org/ns/docbook"}
1.  ::: para
    通​​​​​​​过​​​​​​​注​​​​​​​释​​​​​​​出​​​​​​​ `/etc/multipath.conf`{.filename}