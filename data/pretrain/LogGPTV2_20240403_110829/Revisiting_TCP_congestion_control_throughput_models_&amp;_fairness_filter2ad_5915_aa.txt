title:Revisiting TCP congestion control throughput models &amp; fairness
properties at scale
author:Adithya Abraham Philip and
Ranysha Ware and
Rukshani Athapathu and
Justine Sherry and
Vyas Sekar
Revisiting TCP Congestion Control
Throughput Models & Fairness Properties At Scale
Adithya Abraham Philip, Ranysha Ware,
Rukshani Athapathu, Justine Sherry, Vyas Sekar
Carnegie Mellon University
United States of America
Abstract
Much of our understanding of congestion control algorithm
(CCA) throughput and fairness is derived from models and mea-
surements that (implicitly) assume congestion occurs in the last
mile. That is, these studies evaluated CCAs in ‚Äúsmall scale‚Äù edge
settings at the scale of tens of flows and up to a few hundred Mbps
bandwidths. However, recent measurements show that congestion
can also occur at the core of the Internet on inter-provider links,
where thousands of flows share high bandwidth links. Hence, a
natural question is: Does our understanding of CCA throughput
and fairness continue to hold at the scale found in the core of the
Internet, with 1000s of flows and Gbps bandwidths?
Our preliminary experimental study finds that some expecta-
tions derived in the edge setting do not hold at scale. For example,
using loss rate as a parameter to the Mathis model to estimate TCP
NewReno throughput works well in edge settings, but does not
provide accurate throughput estimates when thousands of flows
compete at high bandwidths. In addition, BBR ‚Äì which achieves
good fairness at the edge when competing solely with other BBR
flows ‚Äì can become very unfair to other BBR flows at the scale
of the core of the Internet. In this paper, we discuss these results
and others, as well as key implications for future CCA analysis and
evaluation.
CCS Concepts
‚Ä¢ Networks ‚Üí Protocol testing and verification; Transport
protocols; Network measurement.
Keywords
congestion control, computer networks, fairness, throughput, tcp,
bbr, reno, cubic
ACM Reference Format:
Adithya Abraham Philip, Ranysha Ware,, Rukshani Athapathu, Justine
Sherry, Vyas Sekar. 2021. Revisiting TCP Congestion Control Throughput
Models & Fairness Properties At Scale. In ACM Internet Measurement Con-
ference (IMC ‚Äô21), November 2‚Äì4, 2021, Virtual Event, USA. ACM, New York,
NY, USA, 8 pages. https://doi.org/10.1145/3487552.3487834
This work is licensed under a Creative Commons Attribution International 4.0 License.
IMC ‚Äô21, November 2‚Äì4, 2021, Virtual Event, USA 
¬© 2021 Copyright held by the owner/author(s). 
ACM ISBN 978-1-4503-9129-0/21/11.
https://doi.org/10.1145/3487552.3487834
96
1 Introduction
Congestion control algorithms (CCAs) are a fundamental build-
ing block of the modern Internet, and the networking community
has been analyzing and designing CCAs for over three decades [12,
18, 26, 37, 39, 48]. Of specific interest to us is the wide-area set-
ting. In this setting, throughput and fairness are important CCA
properties, as they determine the effectiveness with which data
can be transferred across the Internet, and the ability for multiple
TCP flows to co-exist. To this end, many past efforts have used
systematic models and experimental studies to understand these
properties. For instance, the model by Mathis et al. [37] and Padhye
et al. [41] predict the throughput of a NewReno flow as a function of
packet loss and round-trip time (RTT), and the BBR model by Ware
et al. [48] predicts the throughput of BBR when competing with
other CCAs. Application developers can use such results to decide
which CCA best suits the network conditions they experience or
to debug performance issues.
One implicit assumption in many of these results is that in the
wide-area setting, congestion almost always occurs close to the
edge or last mile of the network. To this end, many findings have
been derived in contexts that emulate congestion occurring at the
edge (e.g., residential link settings). Specifically, they consider a
few or tens of flows competing for a shared bottleneck link with a
capacity of a few tens or hundreds of Mbps [26, 37, 45, 52].
Many measurements suggest, however, that this assumption of
congestion-at-the-edge may not always hold. Indeed, measurements
both new [21] and old [11] show that congestion does occur at
inter-domain links. These settings are characterized by higher flow
counts and a larger network pipe [4, 13]. Indeed, past work on
router buffer sizing has shown that CCA properties can change in
such a setting [13].
This raises a natural question: do the known findings and models
about TCP throughput [37] and fairness [20, 26, 28, 39] derived from
edge-link settings, hold at the scale found in the core of the Internet?
To this end, we revisit aspects of TCP throughput and fairness at
high bandwidths of 10Gbps and with thousands of concurrent flows.
Specifically, we ask:
‚Ä¢ Throughput Model: The commonly accepted Mathis analyti-
cal model [37] for TCP throughout prediction says that the
throughput depends only on the RTT and loss. Does this model
accurately predict TCP NewReno‚Äôs throughput at scale?
‚Ä¢ Intra-CCA fairness: NewReno, Cubic, and BBR have shown to
be fair at lower flow counts when all the flows have the same
CCA and RTT [20, 26, 28, 39]. Does this continue to hold at
scale?
IMC ‚Äô21, November 2‚Äì4, 2021, Virtual Event, USA
Philip et al.
2 Related Work & Motivation
Figure 1: Testbed topology for emulated settings.
‚Ä¢ Inter-CCA fairness: Does the Inter-CCA unfairness observed in
the home link setting, where Cubic takes up to 80% of link band-
width when competing with NewReno [26], or BBR starves
competing NewReno and Cubic flows [28, 47, 48, 52], continue
to hold at scale?
We use a simple but effective measurement set up to answer these
questions, and re-evaluate past beliefs on a 10 Gbps bottleneck link
with thousands of competing flows, representative of the core of
the Internet [4, 13]. We see if we obtain the same results as past
research derived from measurements and models verified on the
edge. Indeed, we find that some edge-derived expectations do not
hold at scale:
‚Ä¢ The Mathis model [37] for NewReno throughput relies on a
parameter ùëù which is commonly interpreted as the network
loss rate [44, 46]. While using loss rate for ùëù works well in edge
settings, we find that using packet loss rate for ùëù at scale re-
sults in more than 45% error in estimating throughput. Instead,
operators should use direct measurements of the congestion
window halving rate for throughput estimates at this scale.
‚Ä¢ BBR surprisingly becomes unfair at scale even when competing
with solely other BBR flows at the same RTT, with a Jain‚Äôs
Fairness Index (JFI) as low as 0.4. This is in contrast to the
fairness observed by past research in the edge setting or at low
flow counts, where the JFI is typically 0.99 [28, 47, 52].
On the other hand, our findings validate at scale prior claims about
CCAs which were derived from analyses evaluating the edge:
‚Ä¢ A single BBR flow takes up 40% of link capacity even when
competing with thousands of NewReno or Cubic flows at scale.
Prior work had only measured this phenomenon at up to 16
competing flows [42, 47, 48], and our measurements illustrate
that this phenomenon persists even at scale. This confirms the
prediction from the model by Ware et al. [48].
‚Ä¢ The intra-CCA fairness of NewReno and Cubic and the inter-
CCA unfairness of Cubic competing with NewReno, continue
to hold at scale. The extreme inter-CCA unfairness when multi-
ple BBR flows compete with multiple Cubic or NewReno flows
also persists at scale.
Our results, though preliminary, have key implications for CCA
design and analysis and suggest the need for future analysis. First,
applying the Mathis model over the Internet precisely will require
end-host TCP instrumentation to obtain the congestion window
values as one cannot rely on just measured packet loss. Second,
BBR‚Äôs unexpectedly high unfairness when competing with just
other BBR flows at scale highlights the importance of explicitly
including evaluations with thousands of flows and Gbps bandwidths
as part of future CCA design and evaluation roadmaps.
We begin this section with an introduction to CCAs, followed by
past work on throughput models and fairness. Lastly, we discuss
congestion at the core of the Internet and CCA results in data
centers and high bandwidth settings.
CCA Background: Today there are many CCAs on the Internet,
including NewReno [25], Cubic [44], Vegas [17], Copa [14], and
BBRv1 [18] (hereafter referred to as ‚ÄòBBR‚Äô) as well as BBRv2 [2]
(which remains a work in progress). Developers and network ad-
ministrators evaluate CCAs for many important properties, in-
cluding (1) throughput, or the rate at which a connection trans-
fers data [26, 37, 41] and (2) fairness, or how equitably multiple
connections share throughput when competing over a bottleneck
link [20, 39, 44].
Throughput Models: To help us understand how well a CCA
performs in a given network setting, analytical models predict the
throughput of a connection as a function of key network properties
(e.g., loss, delay). For example, the NewReno models by Mathis et
al., [37] and Padhye et al., [41] predict the throughput of a NewReno
flow given the network RTT and loss rate. Researchers have derived
other models with similar goals for Cubic [26] and BBR [48]. In this
paper, we revisit the simpler model for NewReno throughput by
Mathis et al. [37] and investigate the fairness implications of the
BBR model by Ware et al. [48].
Fairness: Fairness determines how deployable a CCA is. Say, for
example, that Cubic flows completely starve NewReno flows when
competing for bandwidth over a shared link. This would result in
Netflix streams (which use NewReno) seeing degraded performance
every time they share a bottleneck link with large downloads using
Cubic. Fairness is typically evaluated in two settings: (1) Intra-
CCA fairness, where all competing flows have the same CCA; and
(2) Inter-CCA fairness, where the competing flows have different
CCAs.
Past research has found that in the wide-area context, NewReno,
Cubic, and BBR all exhibit high intra-CCA fairness when all flows
have the same RTT, with most flows getting the same through-
put [18, 20, 26, 28]. There is also work on intra-CCA fairness when
flows have different RTTs [26, 32, 35, 39]. In this paper, as a simpler
starting point, we specifically evaluate the same-RTT setting.
In the inter-CCA setting, prior work shows that Cubic flows
compete unfairly with NewReno, with Cubic obtaining up to 80%
of total bandwidth [26]. Past research also finds that BBR competes
unfairly with both Cubic and NewReno, with a single BBR flow tak-
ing up 40% of link capacity irrespective of the number of competing
Cubic and NewReno flows [47, 48]. Multiple BBR flows competing
with an equal number of Cubic flows also result in the BBR flows
obtaining 90% to 95% of link bandwidth with large buffers [45]
and up to 99% with small buffers [28]. We re-evaluate all of these