User: 请解答这个和日志有关的问题None of the cipher suites supported by the client application are supported by the server I am getting this error in my server's windows event log:

An TLS 1.0 connection request was received from a remote client application, but none of the cipher suites supported by the client application are supported by the server. The SSL connection request has failed.

When I try to connect to a web service on a windows 7 box from a windows server 2003 box.

How do I add a cipher suite to one that the other supports?

(fixing clients is ideal, but failing that a server solution is fine - I have access to all boxes involved, I just want some basic encryption between them for privacy).

Along with hours of googling and reading, I have tried:


Checked server windows event viewer (found cipher suite error)
Added cipher suites to test1 from http://support.microsoft.com/kb/948963 (didn't help)
Added TLS 1.0 to protocols in cipher suites in the server's windows registry (no change)
Install IIS tools hoping that adds more protocols to Schannel (it doesn't)
Export certificate for clients, again, but with private key included (no change)
Check that installed cipher suites match on server and client (can't find where win2k3  lists them)
Add TLS_RSA_WITH_AES_256_CBC_SHA (installed by above hotfix) to server's cipher suites (nope, already on there)

Assistant: Windows 7 uses the new CNG (Cryptography Next Generation) API when choosing ciphers. CNG for Windows 2003 is not available as far as I know.

You can however, install these AES based cipher suites for use on Windows 2003:


TLS_RSA_WITH_AES_128_CBC_SHA
TLS_RSA_WITH_AES_256_CBC_SHA


These are the first suites Windows Vista and Windows 7 clients will try to negotiate for use with TLS 1.0 and above, and are also supported by OpenSSL clients.

In order to use these, install KB948963