l
i
e
D
g
n
s
s
e
c
o
r
P
N
S
O
)
s
d
n
o
c
e
s
i
l
l
i
m
(
2000
1800
1600
1400
1200
1000
800
600
400
200
M
7
2
‚àí
2
1
E
7
2
‚àí
2
1
M
0
3
‚àí
2
1
E
0
3
‚àí
2
1
M
1
3
‚àí
2
1
E
1
3
‚àí
2
1
M
1
‚àí
1
E
1
‚àí
1
M
3
‚àí
1
E
3
‚àí
1
M
4
‚àí
1
E
4
‚àí
1
M
5
‚àí
1
E
5
‚àí
1
M
8
‚àí
1
E
8
‚àí
1
M
9
‚àí
1
E
9
‚àí
1
M
1
1
‚àí
1
E
1
1
‚àí
1
M
3
1
‚àí
1
E
3
1
‚àí
1
M
4
1
‚àí
1
E
4
1
‚àí
1
M
6
1
‚àí
1
E
6
1
‚àí
1
M
9
1
‚àí
1
E
9
1
‚àí
1
M
0
2
‚àí
1
E
0
2
‚àí
1
M
1
2
‚àí
1
E
1
2
‚àí
1
M
3
2
‚àí
1
E
3
2
‚àí
1
Time of Day
Figure 15: OSN processing delays (ùëëùëî) for User Z on Hugged,
across time from Dec 27, 2008 to Jan 23, 2009 for 300 FBML
name tags targeting users in the ‚ÄòNew York, NY‚Äô Facebook net-
work. On the x-axis, E and M stand for Evening and Morning,
respectively. Results were similar for other user accounts and
applications. The vertical bars denote minima and maxima for
the averaged measurements.
These experiments do not involve database accesses at the ap-
plication servers, hence ùëëùëù is negligible (around 4ms). However,
the results conÔ¨Årm that indirection via OSNs imposes a signiÔ¨Åcant
overhead for user interactions with third-party applications. This
fact is further demonstrated in Table 2, which shows the fraction of
total time consumed by ùëëùëî for certain hypothetical cases for various
types of content.
Concluding Remarks: Delays across OSNs (as in the case of
Facebook) can dominate the overall latency experienced by users
interacting with third-party applications. For Facebook, we found
that the OSN forwarding and processing delays are fairly consistent
across applications and do not depend on application usage (load).
They are affected by the type of content accessed, but not by entities
targeted in FBML tags. Caching of data helps stabilize the overall
user-perceived delay in their interactions with third-party applica-
tions. Even with data caching, however, the stark difference in ùëëùëî
for different types of FBML tags exists. This could be accounted
for by Facebook‚Äôs internal network delays in accessing different
parts of its data center(s), since the sheer data volume at Facebook
might be managed through data segregation. This becomes more
evident considering different access and storage requirements for
various types of data (e.g., proÔ¨Åle pictures and user statuses).
7. DISCUSSION
Our measurement study of interactions between users and third-
party applications through Facebook has provided us with insights
that can be useful for third-party application developers and OSNs.
Insights for Application Developers
Our measurement study revealed some take-home messages from
the perspective of third-party application developers. We saw well-
deÔ¨Åned trends in the request arrival patterns with diurnal, weekly,
and seasonal peak activity periods. Application servers should be
well-provisioned to deal with such expected surges in activity. The
consistency in activity surges allows developers to effectively uti-
lize resources through cloud computing14. We also found that re-
quest inter-arrival times for a single application were exponentially
distributed. This information can be used to provision network
layer buffers at the application server.
Our results show that the number and the type of FBML tags can
affect the OSN response processing delay. Application developers
can keep this in mind to balance content they wish to serve and
minimize resulting delays perceived by users. Also, our PL mea-
surements showed that for certain regions (especially those with
inferior bandwidth), network delays can have a signiÔ¨Åcant impact
on user experience. Application developers can choose to optimize
their content based on networking resources available to the client.
Furthermore, we noticed that different API calls made by ap-
plication servers can take different amounts of time to process,
and some API call durations can appreciate signiÔ¨Åcantly with load.
This behavior was evident for Hugged, which sees longer API call
durations during high user activity periods. This hints at some form
of resource quotas (per-application or per-API-call) at Facebook
servers. A possible solution to avoid higher API call delays is to
queue API calls during high activity periods, and to empty these
queues during low user activity periods. Our experiments did not
control the rate and schedule of API calls.
Insights for OSNs
Our Ô¨Åndings, especially those from the PL experiments, allow us to
provide some useful insights for OSNs in general, and Facebook in
particular. The following discusses a number of issues and potential
areas of improvement for OSNs.
According to recent statistics15, Facebook has grown, and con-
tinues to grow, outside the U.S. at a rapid pace. However, a closer
look at the statistics shows that regions farther away from Face-
book‚Äôs server locations in California, such as India and Pakistan,
have experienced less than stellar growth. Reasons for slow growth
14Cloud computing services such as Amazon EC2 [12] have become
easily accessible.
15http://www.insidefacebook.com/2009/01/23/
74Our study showed that even for viral applications, non-exorbitant
resource provisioning can bound application server delays. OSNs
do introduce signiÔ¨Åcant overhead to user and third-party applica-
tion interaction. Even with caching, OSNs exhibit different pro-
cessing delays for different types of content although these delays
are relatively stable with application usage (load) and are unaf-
fected by targeted entities (such as in FBML tags). Our Ô¨Åndings
emphasize the impact of Facebook‚Äôs processing delays on user in-
teractions with third-party applications. These Ô¨Åndings have been
veriÔ¨Åed by Facebook.
9. REFERENCES
[1] M. Cha, H. Kwak, P. Rodriguez, Y.-Y. Ahn, and S. Moon. I
tube, you tube, everybody tubes: Analyzing the world‚Äôs
largest user generated content video system. In Proc. Internet
Measurement Conference (IMC), 2007.
[2] M. Gjoka, M. Sirivianos, A. Markopoulou, and X. Yang.
Poking Facebook: Characterization of OSN Applications. In
Workshop on Online Social Networks, 2008.
[3] S. Golder, D. Wilkinson, and B. Huberman. Rhythms of
Social Interaction: Messaging within a Massive Online
Network. In International Conference on Communities and
Technologies, 2007.
[4] M. Granovetter. The strength of weak ties. American Journal
of Sociology, 1973.
[5] R. Gross. Information revelation and privacy in online social
networks. In WPES ‚Äô05: Proceedings of the 2005 ACM
workshop on Privacy in the electronic society, 2005.
[6] B. Krishnamurthy. A measure of online social networks. In
Proc. International Conference on Communication Systems
and Networks (COMSNETS), 2009.
[7] B. Krishnamurthy, P. Gill, and M. Arlitt. A few chirps about
twitter. In Workshop on Online Social Networks, 2008.
[8] S. Milgram. The small world problem. Psychology Today,
1967.
[9] A. Mislove, M. Marcon, K. P. Gummadi, P. Druschel, and
B. Bhattacharjee. Measurement and Analysis of Online
Social Networks. In Proc. Internet Measurement Conference
(IMC), 2007.
[10] A. Nazir, S. Raza, and C.-N. Chuah. Unveiling facebook: A
measurement study of social network based applications. In
Proc. Internet Measurement Conference (IMC), 2008.
[11] Adonomics. http://www.adonomics.com, May 2008.
[12] Amazon ec2. http://aws.amazon.com/ec2/, 2007.
[13] Capprobe. http://www.cs.ucla.edu/NRL/CapProbe/, 2006.
[14] Developer analytics. http://www.developeranalytics.com/,
Apr 2008.
[15] Engineering @ facebook blog.
http://www.facebook.com/eblog, 2008.
in far-off regions may be attributed to a number of hard-to-measure
factors, such as social and technological development. However,
one OSN architecture-related reason can be the signiÔ¨Åcant round-
trip latencies experienced whilst contacting Facebook from regions
far away from the U.S. Since latencies affect user experience even
more than bandwidth availability, diversiÔ¨Åcation of data center lo-
cations outside regions of traditional growth can beneÔ¨Åt OSNs such
as Facebook. Note that the overhead introduced by latencies in user
interaction with third-party applications will still be signiÔ¨Åcant, un-
less application servers, too, move closer to the newer data centers,
depending on the application‚Äôs targeted user base.
Allocating data centers closer to far-off regions may improve
user experience, but also introduces the complication of replicat-
ing data to these data centers. Assuming users in one geographical
region are more likely to access content generated by users within
that geographical region16, the choice of a single master data center
will not be the most optimal. Note that occurrence of this ‚Äòsocial
aspect‚Äô in data accesses is still novel to academia as well as the in-
dustry. Further note that a master data center has the sole authority
for modifying data, which slave data centers may only serve con-
tent without modiÔ¨Åcation. This is currently the case for Facebook,
which has a slave data center in Virginia, and the master data center
in California [15].
Each user request to a third-party application results in two HTTP
connection setups: 1) between the client and OSN, and 2) between
the OSN and application servers. In cases where round-trip propa-
gation delays are high (e.g., far-away clients contacting OSN servers),
protocol handshakes involved can contribute signiÔ¨Åcantly to the
overall delay experienced by users. This can be remedied through
persistent HTTP connections between the application server and
OSN. The OSN can multiplex user requests within a few HTTP
connections by mandating presence of certain ‚Äòresponse identiÔ¨Åers‚Äô
in application responses.
Moreover, our results for OSN response processing delays indi-
cate that OSN delays grow in lock-step with the size of content.
For the Facebook Developer Platform, the main cause of concern
is the high processing delays for FBML user tags, which are per-
vasively used in third-party applications. Our results in Table 2
(and corresponding average workload measurements) suggest that
an OSN could drastically improve user experience by parallelizing
OSN tag (e.g., FBML for Facebook) processing within individual
application responses. This could, however, turn into a DoS vul-
nerability for the OSN, and must be implemented with checks in
place to avoid such attacks.
8. CONCLUSION
The launch of APIs for OSN applications has brought about
thousands of third-party OSN applications. Facebook alone makes
over 57,000 applications available to more than 150 million users.
Little information is available about the different stages of infor-
mation Ô¨Çow between users and third-party OSN applications, and
the role of the underlying OSN. We described an elaborate mea-
surement methodology, collect data from multiple vantage points,
and reconstruct the details of typical client-OSN-third party appli-
cation interactions. We investigated the different sources of delay
and their potential impact on user experience.
16Since users are likely to have more online friends from the same
geographical region, e.g. from the same country or city.
75