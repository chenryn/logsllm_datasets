replicas for an object. Our system consists of a 4000 node network
(3997 nodes for measured data) and a total of 10,000 objects.
Figure 16(a) shows that the average query latency for a given
number of replicas is signiﬁcantly lower with measured delay, es-
pecially when compared to Inet. This is an artifact of the different
distributions of hop length as shown earlier in Figure 15(b). With
the last hops in realistic models dominating the total overlay path,
employing even a very few replicas results in reducing the average
latency signiﬁcantly. In the absence of realistic models, one would
overestimate the number of replicas required to achieve a certain
target lookup latency.
We then evaluate the distribution of query trafﬁc to the repli-
cas. In this scenario, we assume that the objects were replicated
on all nodes that matched at least one digit with the object identi-
ﬁer. Given a network of 4000 nodes with Pastry node IDs as dig-
its in base 16, we observe that this corresponds approximately to
the expected value of (1/16) ∗ 4000 = 250 replicas per object.
Figure 16(b) shows the distribution of query load among the repli-
cas. A point (x, y) in the plot indicates that the x lowest ranked
nodes with respect to the amount of query trafﬁc they served, to-
gether serve y% of the overall query trafﬁc. The ﬁgure shows a
huge imbalance in the load distribution for the Inet topology model,
wherein 5% of the nodes serve over 50% of the trafﬁc. This imbal-
ance is caused due to the highly skewed overlay indegree distribu-
tion of nodes in the Inet topology.
Again, we see that the delay model used in simulations of dis-
tributed systems has a signiﬁcant impact on the results obtained
for important application performance metrics. Inadequate delay
models can lead to false conclusions about the effectiveness and
performance of systems.
7. RELATED WORK
Our work on modeling the Internet delay space is complemen-
tary to existing work on modeling network connectivity topologies.
There is an opportunity for future work to incorporate delay space
characteristics into topology models.
Early artiﬁcial network topologies had a straight-forward con-
nectivity structure such as tree, star, or ring. A more sophisticated
topology model that constructs node connectivity based on the ran-
dom graph model was proposed by Waxman [45]. However, as
the hierarchical nature of the Internet connectivity became appar-
ent, solutions that more accurately model this hierarchy, such as
Transit-Stub by Calvert et al [48] and Tier by Doar [8], emerged.
Faloutsos et al [10] studied real Internet topology traces and dis-
covered the power-law node degree distribution of the Internet. Li
et al [18] further showed that router capacity constraints can be in-
tegrated with the power-law node degree model to create even more
realistic router-level topologies.
There are many on-going projects actively collecting delay mea-
surements of the Internet, including Skitter [38], AMP [2], PingER
[27], and Surveyor [42] to name just a few examples. Some of
these projects also collect one-way delays and hop-by-hop rout-
ing information. These projects typically use a set of monitoring
nodes, ranging roughly from 20 to 100, to actively probe a set of
destinations. The Skitter work probes on the order of 1 million
destinations, which is the largest among these projects. The active
monitoring method can probe any destination in the network, but
the resulting measurements cover only a small subset of the delay
space as observed by the monitors. Many of these measurements
are also continuously collected, allowing the study of changes in
delay over time. Our work uses the King tool to collect delay mea-
surements, which restricts the probed nodes to be DNS servers, but
n
o
i
t
c
a
r
F
e
v
i
t
a
u
m
u
C
l
 1
 0.9
 0.8
 0.7
 0.6
 0.5
 0.4
 0.3
 0.2
 0.1
 0
Measured
DS2
Inet
GT-ITM
 250
 500
 750
Overalay node’s Indegree
(a) Overlay Indegree
y
c
n
e
t
a
l
h
t
a
p
y
a
l
r
e
v
o
l
a
o
t
t
f
o
%
 80
 70
 60
 50
 40
 30
 20
 10
 0
Measured
DS2
Inet
GT-ITM
1
2
3
Hop number
(b) Hop Length Distribution
Figure 15: Overlay properties.
Measured
DS2
Inet
GT-ITM
 1
 0.8
 0.6
 0.4
 0.2
c
i
r
t
e
M
e
c
n
e
g
r
e
v
n
o
C
 0
 20  40  60  80  100
 0
Distance(node1,node2) in ms
(c) Route Convergence
 140
 120
 100
 80
 60
 40
y
c
n
e
t
a
l
s
s
e
c
c
A
Measured
DS2
Inet
GT-ITM
d
e
v
r
e
s
d
a
o
l
y
r
e
u
q
f
o
%
e
v
i
t
l
a
u
m
u
C
 20
 0
 20  40  60  80  100
Number of Replicas
(a) Query latency
 100
 90
 80
 70
 60
 50
 40
 30
 20
 10
 0
Measured
DS2
Inet
GT-ITM
 0
 1000
 2000
 3000
 4000
Node rank wrt query load
(b) Distribution of Query load
Figure 16: Proactive replication.
produces a symmetric delay space matrix, which lends itself to a
study of the stationary delay space characteristics.
Some of the delay space properties reported in this paper have
been observed in previous work. For example, triangle inequal-
ity violations and routing inefﬁciencies have been observed in [34]
and [24]. Some of the characteristics of delay distributions and
their implications for global clustering have been observed in Skit-
ter. However, many of the observations made in this paper are
new. These include the local clustering properties, and in partic-
ular the approximately exponential in-degree distribution, spatial
growth properties, detailed properties of triangle inequality viola-
tions of different types and across different clusters, and the exam-
ination of these properties under scaling. In addition to the ”static”
properties of delay, previous work have also studied the temporal
properties of Internet delay [1]. Incorporating temporal properties
into a delay space model is an area for future work.
One key technique used in our work is computing a low dimen-
sional Euclidean embedding of the delay space to enhance the com-
pleteness and scalability of the delay space representation. Many
approaches for computing such an embedding have been studied [24,
7, 35, 6, 19, 43, 36, 26]. We have not considered the impact of us-
ing different computation methods or using different embedding
objective functions. This represents another area for future work.
8. CONCLUSIONS
To the best of our knowledge, this is the ﬁrst study to systemat-
ically analyze, model, and synthesize the Internet delay space. We
quantify the properties of the Internet delay space with respect to
a set of metrics relevant to distributed systems design. This leads
to new understandings of the Internet delay space characteristics
which may inform future work. We also develop a set of building
block techniques to model and synthesize the Internet delay space
compactly while accurately preserving all relevant metrics. The
result is an Internet delay space synthesizer called DS2 that can
produce realistic delay spaces at large scale. DS2 requires only
O(N ) memory, where N is the number of nodes, and requires only
simple run-time calculations to generate the delay between a pair
of nodes. This helps to address the memory requirement barrier
of conducting large-scale simulations. DS2 provides an impor-
tant mechanism for simulating and emulating distributed systems
at large-scale, which complements other evaluation methodologies.
See [9] for further information on DS2.
Acknowledgment
We would like to thank Atul Singh for providing the results for the
Eclipse attack experiments, and Evan Stade for providing a simula-
tor of Meridian. We also thank the anonymous reviewers for their
valuable feedback.
9. REFERENCES
[1] A. Acharya and J. Saltz. A Study of Internet Round-Trip
Delay. Technical Report CS-TR-3736, University of
Maryland, College Park, 1996.
[2] Active measurement project, NLANR. http://watt.nlanr.net.
[3] M. Castro, P. Druschel, A. Ganesh, A. Rowstron, and D.S.
Wallach. Security for structured peer-to-peer overlay
networks. In Proceedings of OSDI, Boston, MA, December
2002.
[4] Miguel Castro, Peter Druschel, Y. Charlie Hu, and Antony
Rowstron. Exploiting network proximity in peer-to-peer
overlay networks. Technical Report MSR-TR-2002-82,
Microsoft Research, May 2002.
[5] Miguel Castro, Peter Druschel, Y. Charlie Hu, and Antony
Rowstron. Proximity neighbor selection in tree-based
structured peer-to-peer overlays. Technical Report
MSR-TR-2003-52, Microsoft Research, June 2003.
[6] M. Costa, M. Castro, A. Rowstron, and P. Key. PIC: Practical
Internet coordinates for distance estimation. Technical
Report MSR-TR-2003-53, Microsoft Research, September
2003.
[7] F. Dabek, R. Cox, F. Kaashoek, and R. Morris. Vivaldi: A
decentralized network coordinate system. In Proceeding of
ACM SIGCOMM, August 2004.
Proceeding of IEEE GLOBECOM, November 1996.
[8] M. Doar. A better model for generating test networks. In
[9] DS2. http://www.cs.rice.edu/∼eugeneng/research/ds2/.
[10] C. Faloutsos, M. Faloutsos, and P. Faloutsos. On Power-law
Relationships of the Internet Topology. In Proceedings of
ACM Sigcomm, August 1999.
[11] Michael J. Freedman, Karthik Lakshminarayanan, and David
Mazieres. Oasis: Anycast for any service. In Proceedings of
ACM NSDI, May 2006.
[12] Freepastry. http://freepastry.rice.edu/.
[13] K. P. Gummadi, S. Saroiu, and S. D. Gribble. King:
Estimating latency between arbitrary internet end hosts. In
Proceedings of the SIGCOMM IMW, Marseille, France,
November 2002.
[14] Krishna P. Gummadi, Ramakrishna Gummadi, Steven D.
Gribble, Sylvia Ratnasamy, Scott Shenker, and Ion Stoica.
The impact of DHT routing geometry on resilience and
proximity. In Proc. ACM SIGCOMM, Karlsruhe, Germany,
August 2003.
[15] K. Hildrum and J. Kubiatowicz. Assymtotically efﬁcient
approaches to fault tolerance in peer-to-peer networks. In
Proc. 17th International Symposium on Distributed
Computing, Sorrento, Italy, Oct 2003.
[16] David R. Karger and Matthias Ruhl. Finding nearest
neighbors in growth restricted metrics. In Proccedings of
ACM Symposium on Theory of Computing, 2002.
[17] Sanghwan Lee, Zhi-Li Zhang, Sambit Sahu, and Debanjan
Saha. On suitability of Euclidean embedding of Internet
hosts. In Proc. SIGMETRICS 2006, June 2006.
[18] L. Li, D. Alderson, W. Willinger, and J. Doyle. A
ﬁrst-principles approach to understanding the internet’s
router-level topology. In Proceeding of ACM SIGCOMM,
August 2004.
[19] H. Lim, J. Hou, and C.-H. Choi. Constructing internet
coordinate system based on delay measurement. In
Proceedings of IMC, Miami, FL, October 2003.
[20] Jesper Møller and Rasmus Waagepetersen. Statistical
Inference and Simulation for Spatial Point Processes.
Chapman and Hall/CRC, 2004.
[21] Eng Keong Lua, Timothy Grifﬁn, Marcelo Pias, Han Zheng,
and Jon Crowcroft. On the accuracy of embeddings for
internet coordinate systems. In Proceedings of IMC,
Berkeley, CA, October 2005.
[22] Harsha V. Madhyastha, Tomas Isdal, Michael Piatek, Colin
Dixon, Thomas Anderson, Arvind Krishnamurthy, and Arun
Venkataramani. iPlane: an information plane for distributed
services. In Proc. OSDI 2006, November 2006.
[23] P. Maymounkov and D. Mazieres. Kademlia: A peer-to-peer
information system based on the xor metric. In Proc. IPTPS
2002, March 2002.
[24] T. S. E. Ng and H. Zhang. Predicting Internet networking
distance with coordinates-based approaches. In Proceedings
of IEEE INFOCOM, June 2002.
[25] p2psim. http://www.pdos.lcs.mit.edu/p2psim/.
[26] M. Pias, J. Crowcroft, S. Wilbur, T. Harris, and S. Bhatti.
Lighthouses for scalable distributed location. In Proceedings
of IPTPS, 2003.
[27] PingER. http://www.slac.stanford.edu/comp/net/wan-
mon/tutorial.html.
[28] V. Ramasubramanian and E.G Sirer. Beehive: O(1) lookup
performance for pwer-law query distributions in peer-to-peer
overlays. In Proc. NSDI ’04, San Francisco, California,
March 2004.
[29] S. Ranjan, R. Karrer, and E. Knightly. Wide area redirection
of dynamic content by internet data centers. In Proceedings
of IEEE INFOCOM, Hong Kong, China, 2004.
[30] S. Ratnasamy, S. Shenker, and I. Stoica. Routing algorithms
for DHTs: Some open questions. In Proceedings of IPTPS,
Cambridge, MA, March 2002.
[31] Rolf-Dieter Reiss. A Course on Point Processes. Springer
Series in Statistics. Springer, 1993.
[32] Route views. http://www.routeviews.org/.
[33] B. Bhattacharjee S. Banerjee and C. Kommareddy. Scalable
Application Layer Multicast. In Proceedings of ACM
SIGCOMM, August 2002.
[34] S. Savage, A. Collins, E. Hoffman, J. Snell, and T. Anderson.
The End-to-end Effects of Internet Path Selection. In
Proceedings of ACM Sigcomm, August 1999.
[35] Y. Shavitt and T. Tankel. Big-bang simulation for embedding
network distances in Euclidean space. In Proceedings of
IEEE INFOCOM, San Francisco, CA, March 2003.
[36] Y. Shavitt and T. Tankel. On the curvature of the Internet and
its usage for overlay construction and distance estimation. In
Proceedings of IEEE INFOCOM, April 2004.
[37] A. Singh, T. W. Ngan, P. Druschel, and D. S. Wallach.
Eclipse attacks on overlay networks: Threats and defenses.
In Proc. INFOCOM 2006, Barcelona, Spain, April 2006.
[38] Skitter. http://www.caida.org/tools/measurement/skitter/.
[39] A. Slivkins. Distributed Approaches to Triangulation and
Embedding. In Proceedings 16th ACM-SIAM Symposium on
Discrete Algorithms (SODA), 2004.
[40] A. Slivkins, J. Kleinberg, and T. Wexler. Triangulation and
Embedding using Small Sets of Beacons. In Proceedings of
FOCS, 2004.
[41] I. Stoica, R. Morris, D. Karger, M. F. Kaashoek, and
H. Balakrishnan. Chord: A scalable peer-to-peer lookup
service for Internet applications. In Proceedings of ACM
SIGCOMM, 2001.
[42] Surveyor. http://www.advanced.org/csg-ippm/.
[43] L. Tang and M. Crovella. Virtual landmarks for the internet.
In Proceedings of IMC, Miami, FL, October 2003.
[44] Marcel Waldvogel and Roberto Rinaldi. Efﬁcient
Topology-Aware Overlay Network. In First Workshop on
Hot Topics in networks (HotNets-I), October 2002.
[45] B. Waxman. Routing of multipoint connections. IEEE J.
Select. Areas Commun., December 1988.
[46] J. Winick and S. Jamin. Inet-3.0: Internet topology generator.
Technical Report UM-CSE-TR-456-02, University of
Michigan, 2002.
[47] Bernard Wong, Aleksandrs Slivkins, and Emin Gun Sirer.
Meridian: A lightweight network location service without
virtual coordinates. In Proceedings of ACM SIGCOMM,
August 2005.
[48] E. W. Zegura, K. L. Calvert, and S. Bhattacharjee. How to
Model an Internetwork. In Proceedings of IEEE INFOCOM,
March 1996.
[49] B. Zhao, J. Kubiatowicz, and A. Joseph. Tapestry: An
infrastructure for wide-area fault-tolerant location and
routing. U.C. Berkeley Technical Report
UCB//CSD-01-1141, 2001.