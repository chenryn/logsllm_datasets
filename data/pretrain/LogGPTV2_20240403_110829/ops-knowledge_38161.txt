### 问题描述
周末期间，我将公司数据从一个硬盘复制到了另一个更大的硬盘上。我以为文件权限也会一并复制过去，但实际上并没有。

### 问题
如何以最快捷的方式将原始设置的权限复制到新的数据目录中，而无需重新复制所有数据？目前用户已经在访问这些数据，因此不希望再次复制数据，以免丢失更改。

### 环境
- 操作系统：Windows Server 2008 R2

### 解决方案

#### 方法1: 使用 `robocopy` 命令
你可以使用 `robocopy` 命令来复制文件权限。以下是一个示例命令：

```sh
robocopy "源目录" "目标目录" /E /COPY:SOU /xo /xn /xc /xx /LOG+:F:\Sec.log
```

- `/E`：复制所有子目录，包括空目录。
- `/COPY:SOU`：复制安全信息（NTFS ACLs）、所有权信息和审核信息。
  - `S`：Security info (NTFS ACLs)
  - `O`：Ownership info
  - `U`：Auditing info
- `/xo`：排除旧文件（仅复制新文件）。
- `/xn`：排除新文件（仅复制旧文件）。
- `/xc`：排除只读文件。
- `/xx`：排除额外的文件属性。
- `/LOG+:F:\Sec.log`：将日志追加到指定的日志文件中。

#### 方法2: 使用 `icacls` 命令
如果 `robocopy` 无法解决问题，可以使用 `icacls` 命令来备份和恢复 NTFS 权限。

1. **备份 NTFS 权限**：
   ```sh
   icacls "D:\Data" /save ntfspermissions.txt /t /c
   ```
   - `/T`：递归处理所有子目录。
   - `/C`：即使遇到错误也继续执行。

2. **恢复 NTFS 权限**：
   ```sh
   icacls "D:\" /restore ntfspermissions.txt
   ```

请注意，在备份权限时，我指定了目标文件夹为 `D:\Data`，而在恢复权限时，我指定了 `D:\` 作为目标。虽然你可能会担心这会影响其他文件夹的权限，但 `ntfspermissions.txt` 文件中只包含 `Data` 文件夹及其子文件夹的信息，因此只会对这些文件夹进行更改。

### 注意事项
- 在执行这些命令之前，请确保你有足够的权限来修改文件和目录的权限。
- 建议在执行前先备份重要数据，以防万一出现问题。

通过上述方法，你应该能够快速且有效地将文件权限从源目录复制到目标目录。