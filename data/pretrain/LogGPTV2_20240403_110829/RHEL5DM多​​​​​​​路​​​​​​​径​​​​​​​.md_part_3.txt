-   ::: para
    hba2 到​​​​​​​控​​​​​​​制​​​​​​​器​​​​​​​ 2
    :::
:::
::: para
在​​​​​​​这​​​​​​​个​​​​​​​配​​​​​​​置​​​​​​​中​​​​​​​，可​​​​​​​将​​​​​​​ I/O 分​​​​​​​布​​​​​​​到​​​​​​​那​​​​​​​四​​​​​​​条​​​​​​​路​​​​​​​径​​​​​​​中​​​​​​​。​​​​​​​
:::
::: figure
[⁠]{#MPIO_Overview.html#multipath-server3-DM}
::: figure-contents
::: mediaobject
![Active/Active Multipath Configuration with One RAID
Device](images/overview/multipath-server3.png)
:::
:::
**图 1.3. Active/Active Multipath Configuration with One RAID Device**
:::
:::
::: section
::: titlepage
# [⁠]{#MPIO_Overview.html#storage_support}1.2. 存​​​​​​​储​​​​​​​阵​​​​​​​列​​​​​​​支​​​​​​​持​​​​​​​ {.title}
:::
[]{#MPIO_Overview.html#idm140667698449552
.indexterm}[]{#MPIO_Overview.html#idm140667698448592
.indexterm}[]{#MPIO_Overview.html#idm140667698447312 .indexterm}
::: para
By default, DM-Multipath includes support for the most common storage
arrays that support DM-Multipath. The supported devices can be found in
the `multipath.conf.defaults`{.filename} file. If your storage array
supports DM-Multipath and is not configured by default in this file, you
may need to add them to the DM-Multipath configuration file,
`multipath.conf`{.filename}. For information on the DM-Multipath
configuration file, see [第 4 章 *DM-Multipath
配​​​​​​​置​​​​​​​文​​​​​​​件​​​​​​​*](#mpio_configfile.html){.xref}.
:::
::: para
有​​​​​​​些​​​​​​​存​​​​​​​储​​​​​​​阵​​​​​​​列​​​​​​​需​​​​​​​要​​​​​​​对​​​​​​​ I/O
错​​​​​​​误​​​​​​​和​​​​​​​路​​​​​​​径​​​​​​​切​​​​​​​换​​​​​​​的​​​​​​​特​​​​​​​殊​​​​​​​处​​​​​​​理​​​​​​​。​​​​​​​这​​​​​​​些​​​​​​​要​​​​​​​求​​​​​​​独​​​​​​​立​​​​​​​于​​​​​​​硬​​​​​​​件​​​​​​​处​​​​​​​理​​​​​​​器​​​​​​​内​​​​​​​核​​​​​​​模​​​​​​​块​​​​​​​。​​​​​​​
:::
:::
::: section
::: titlepage
# [⁠]{#MPIO_Overview.html#MPIO_Components}1.3. DM-Multipath 组​​​​​​​件​​​​​​​ {.title}
:::
::: para
[表 1.1 "DM-Multipath
组​​​​​​​件​​​​​​​"](#MPIO_Overview.html#tb-multipath_components){.xref}. describes
the components of DM-Multipath.
:::
[]{#MPIO_Overview.html#idm140667686783216
.indexterm}[]{#MPIO_Overview.html#idm140667684779888
.indexterm}[]{#MPIO_Overview.html#idm140667684778608
.indexterm}[]{#MPIO_Overview.html#idm140667684777328
.indexterm}[]{#MPIO_Overview.html#idm140667684776048 .indexterm}
::: table
[⁠]{#MPIO_Overview.html#tb-multipath_components}
**表 1.1. DM-Multipath 组​​​​​​​件​​​​​​​**
::: table-contents
  --------------------------------------------------------------------------------------------------------------------
  组​​​​​​​件​​​​​​​                        描​​​​​​​述​​​​​​​
  --------------------------- ----------------------------------------------------------------------------------------
  `dm-multipath`{.filename}   为​​​​​​​路​​​​​​​径​​​​​​​和​​​​​​​路​​​​​​​径​​​​​​​组​​​​​​​群​​​​​​​重​​​​​​​新​​​​​​​指​​​​​​​定​​​​​​​ I/O 并​​​​​​​支​​​​​​​持​​​​​​​出​​​​​​​错​​​​​​​冗​​​​​​​余​​​​​​​。​​​​​​​
  kernel module               
  `multipath`{.command}       列​​​​​​​出​​​​​​​并​​​​​​​配​​​​​​​置​​​​​​​多​​​​​​​路​​​​​​​径​​​​​​​设​​​​​​​备​​​​​​​。​​​​​​​通​​​​​​​常​​​​​​​从​​​​​​​ `/etc/rc.sysinit`{.filename} 开​​​​​​​始​​​​​​​，还​​​​​​​可​​​​​​​以​​​​​​​使​​​​​​​用​​​​​​​
  command                     `udev`{.command} 程​​​​​​​序​​​​​​​随​​​​​​​时​​​​​​​添​​​​​​​加​​​​​​​块​​​​​​​设​​​​​​​备​​​​​​​，或​​​​​​​者​​​​​​​可​​​​​​​用​​​​​​​ `initramfs`{.literal} 文​​​​​​​件​​​​​​​系​​​​​​​统​​​​​​​运​​​​​​​行​​​​​​​。​​​​​​​
  `multipathd`{.command}      监​​​​​​​视​​​​​​​路​​​​​​​径​​​​​​​，如​​​​​​​果​​​​​​​路​​​​​​​径​​​​​​​故​​​​​​​障​​​​​​​并​​​​​​​返​​​​​​​回​​​​​​​，它​​​​​​​可​​​​​​​能​​​​​​​会​​​​​​​启​​​​​​​动​​​​​​​路​​​​​​​径​​​​​​​组​​​​​​​群​​​​​​​切​​​​​​​换​​​​​​​。​​​​​​​可​​​​​​​为​​​​​​​多​​​​​​​路​​​​​​​径​​​​​​​设​​​​​​​备​​​​​​​提​​​​​​​供​​​​​​​互​​​​​​​动​​​​​​​修​​​​​​​改​​​​​​​。​​​​​​​对​​​​​​​
  daemon                      `/etc/multipath.conf`{.filename} 文​​​​​​​件​​​​​​​的​​​​​​​任​​​​​​​何​​​​​​​修​​​​​​​改​​​​​​​都​​​​​​​必​​​​​​​须​​​​​​​启​​​​​​​动​​​​​​​它​​​​​​​。​​​​​​​
  `kpartx`{.command} command  为​​​​​​​设​​​​​​​备​​​​​​​中​​​​​​​的​​​​​​​分​​​​​​​区​​​​​​​生​​​​​​​成​​​​​​​设​​​​​​​备​​​​​​​映​​​​​​​射​​​​​​​器​​​​​​​设​​​​​​​备​​​​​​​。​​​​​​​这​​​​​​​个​​​​​​​命​​​​​​​令​​​​​​​对​​​​​​​带​​​​​​​ DM-MP 的​​​​​​​ DOS
                              分​​​​​​​区​​​​​​​是​​​​​​​很​​​​​​​必​​​​​​​要​​​​​​​的​​​​​​​。​​​​​​​`kpartx`{.command} 在​​​​​​​其​​​​​​​自​​​​​​​身​​​​​​​软​​​​​​​件​​​​​​​包​​​​​​​中​​​​​​​就​​​​​​​存​​​​​​​在​​​​​​​，但​​​​​​​
                              `device-mapper-multipath`{.literal} 软​​​​​​​件​​​​​​​包​​​​​​​要​​​​​​​依​​​​​​​赖​​​​​​​它​​​​​​​。​​​​​​​
  --------------------------------------------------------------------------------------------------------------------
:::
:::
:::
::: section
::: titlepage
# [⁠]{#MPIO_Overview.html#setup_overview}1.4. DM-Multipath 安​​​​​​​装​​​​​​​总​​​​​​​览​​​​​​​ {.title}
:::
[]{#MPIO_Overview.html#idm140667696783792 .indexterm}
::: para
DM-Multipath 包​​​​​​​含​​​​​​​适​​​​​​​用​​​​​​​于​​​​​​​通​​​​​​​用​​​​​​​多​​​​​​​路​​​​​​​径​​​​​​​配​​​​​​​置​​​​​​​的​​​​​​​内​​​​​​​置​​​​​​​默​​​​​​​认​​​​​​​设​​​​​​​置​​​​​​​。​​​​​​​安​​​​​​​装​​​​​​​ DM-multipath
通​​​​​​​常​​​​​​​很​​​​​​​简​​​​​​​单​​​​​​​。​​​​​​​
:::
::: para
以​​​​​​​下​​​​​​​是​​​​​​​为​​​​​​​您​​​​​​​的​​​​​​​系​​​​​​​统​​​​​​​配​​​​​​​置​​​​​​​ DM-multipath 的​​​​​​​基​​​​​​​本​​​​​​​步​​​​​​​骤​​​​​​​：
:::
::: {.orderedlist xmlns:d="http://docbook.org/ns/docbook"}
1.  ::: para
    安​​​​​​​装​​​​​​​ `device-mapper-multipath`{.literal} rpm。​​​​​​​
    :::
2.  ::: para
    编​​​​​​​辑​​​​​​​ `multipath.conf`{.filename} 配​​​​​​​置​​​​​​​文​​​​​​​件​​​​​​​：
    :::
    ::: itemizedlist
    -   ::: para
        注​​​​​​​释​​​​​​​出​​​​​​​默​​​​​​​认​​​​​​​黑​​​​​​​名​​​​​​​单​​​​​​​
        :::
    -   ::: para
        根​​​​​​​据​​​​​​​需​​​​​​​要​​​​​​​修​​​​​​​改​​​​​​​现​​​​​​​有​​​​​​​默​​​​​​​认​​​​​​​设​​​​​​​置​​​​​​​
        :::
    -   ::: para
        保​​​​​​​存​​​​​​​配​​​​​​​置​​​​​​​文​​​​​​​件​​​​​​​
        :::
    :::
3.  ::: para
    启​​​​​​​动​​​​​​​多​​​​​​​路​​​​​​​径​​​​​​​守​​​​​​​护​​​​​​​进​​​​​​​程​​​​​​​。​​​​​​​
    :::
4.  ::: para
    使​​​​​​​用​​​​​​​ `multipath`{.command} 命​​​​​​​令​​​​​​​生​​​​​​​成​​​​​​​多​​​​​​​路​​​​​​​径​​​​​​​设​​​​​​​备​​​​​​​。​​​​​​​
    :::
:::
::: para
Detailed setup instructions for several example multipath configurations
are provided in see [第 3 章 *安​​​​​​​装​​​​​​​
DM-Multipath*](#mpio_setup.html){.xref}.
:::
:::
:::
[]{#mpath_devices.html}
::: chapter
::: titlepage
# [⁠]{#mpath_devices.html#mpath_devices}第 2 章 多​​​​​​​路​​​​​​​径​​​​​​​设​​​​​​​备​​​​​​​ {.title}
:::
[]{#mpath_devices.html#idm140667693470288
.indexterm}[]{#mpath_devices.html#idm140667696852240 .indexterm}
::: para
没​​​​​​​有​​​​​​​
DM-Multipath，从​​​​​​​服​​​​​​​务​​​​​​​器​​​​​​​节​​​​​​​点​​​​​​​到​​​​​​​存​​​​​​​储​​​​​​​控​​​​​​​制​​​​​​​器​​​​​​​的​​​​​​​所​​​​​​​有​​​​​​​路​​​​​​​径​​​​​​​都​​​​​​​将​​​​​​​被​​​​​​​系​​​​​​​统​​​​​​​视​​​​​​​为​​​​​​​独​​​​​​​立​​​​​​​的​​​​​​​设​​​​​​​备​​​​​​​，即​​​​​​​便​​​​​​​连​​​​​​​接​​​​​​​相​​​​​​​同​​​​​​​服​​​​​​​务​​​​​​​器​​​​​​​节​​​​​​​点​​​​​​​到​​​​​​​相​​​​​​​同​​​​​​​存​​​​​​​储​​​​​​​控​​​​​​​制​​​​​​​器​​​​​​​的​​​​​​​
I/O 路​​​​​​​径​​​​​​​也​​​​​​​不​​​​​​​例​​​​​​​外​​​​​​​。​​​​​​​DM-Multipath 提​​​​​​​供​​​​​​​了​​​​​​​逻​​​​​​​辑​​​​​​​管​​​​​​​理​​​​​​​ I/O
路​​​​​​​径​​​​​​​的​​​​​​​方​​​​​​​法​​​​​​​，即​​​​​​​在​​​​​​​基​​​​​​​础​​​​​​​设​​​​​​​备​​​​​​​的​​​​​​​顶​​​​​​​部​​​​​​​生​​​​​​​成​​​​​​​单​​​​​​​一​​​​​​​多​​​​​​​路​​​​​​​径​​​​​​​设​​​​​​​备​​​​​​​。​​​​​​​
:::
::: section
::: titlepage
# [⁠]{#mpath_devices.html#multipath_device_id}2.1. 多​​​​​​​路​​​​​​​径​​​​​​​设​​​​​​​备​​​​​​​识​​​​​​​别​​​​​​​器​​​​​​​ {.title}
:::
[]{#mpath_devices.html#idm140667698375952
.indexterm}[]{#mpath_devices.html#idm140667709885392
.indexterm}[]{#mpath_devices.html#idm140667686694944
.indexterm}[]{#mpath_devices.html#idm140667684283024
.indexterm}[]{#mpath_devices.html#idm140667694683600 .indexterm}
::: para
每​​​​​​​个​​​​​​​多​​​​​​​路​​​​​​​径​​​​​​​设​​​​​​​备​​​​​​​都​​​​​​​有​​​​​​​一​​​​​​​个​​​​​​​全​​​​​​​球​​​​​​​识​​​​​​​别​​​​​​​号​​​​​​​（WWID），它​​​​​​​是​​​​​​​一​​​​​​​个​​​​​​​全​​​​​​​球​​​​​​​唯​​​​​​​一​​​​​​​的​​​​​​​无​​​​​​​法​​​​​​​更​​​​​​​改​​​​​​​的​​​​​​​号​​​​​​​码​​​​​​​。​​​​​​​默​​​​​​​认​​​​​​​情​​​​​​​况​​​​​​​下​​​​​​​，多​​​​​​​路​​​​​​​径​​​​​​​设​​​​​​​备​​​​​​​的​​​​​​​名​​​​​​​称​​​​​​​将​​​​​​​设​​​​​​​为​​​​​​​它​​​​​​​的​​​​​​​
WWID。​​​​​​​另​​​​​​​外​​​​​​​，您​​​​​​​还​​​​​​​可​​​​​​​以​​​​​​​在​​​​​​​多​​​​​​​路​​​​​​​径​​​​​​​配​​​​​​​置​​​​​​​文​​​​​​​件​​​​​​​中​​​​​​​设​​​​​​​置​​​​​​​
`user_friendly_names`{.literal} 选​​​​​​​项​​​​​​​，该​​​​​​​选​​​​​​​项​​​​​​​可​​​​​​​将​​​​​​​别​​​​​​​名​​​​​​​设​​​​​​​为​​​​​​​格​​​​​​​式​​​​​​​为​​​​​​​
`mpath`{.literal}*`n`* 的​​​​​​​节​​​​​​​点​​​​​​​唯​​​​​​​一​​​​​​​名​​​​​​​称​​​​​​​。​​​​​​​
:::
::: para
例​​​​​​​如​​​​​​​：当​​​​​​​在​​​​​​​有​​​​​​​两​​​​​​​个​​​​​​​端​​​​​​​口​​​​​​​的​​​​​​​存​​​​​​​储​​​​​​​控​​​​​​​制​​​​​​​器​​​​​​​中​​​​​​​通​​​​​​​过​​​​​​​单​​​​​​​一​​​​​​​不​​​​​​​分​​​​​​​区​​​​​​​ FC 切​​​​​​​换​​​​​​​附​​​​​​​加​​​​​​​带​​​​​​​两​​​​​​​个​​​​​​​ HBA
的​​​​​​​节​​​​​​​点​​​​​​​时​​​​​​​，可​​​​​​​看​​​​​​​到​​​​​​​四​​​​​​​个​​​​​​​设​​​​​​​备​​​​​​​：`/dev/sda`{.literal}、​​​​​​​`/dev/sdb`{.literal}、​​​​​​​`dev/sdc`{.literal}
和​​​​​​​ `/dev/sdd`{.literal}。​​​​​​​DM-多​​​​​​​路​​​​​​​径​​​​​​​生​​​​​​​成​​​​​​​一​​​​​​​个​​​​​​​有​​​​​​​唯​​​​​​​一​​​​​​​ WWID
的​​​​​​​单​​​​​​​一​​​​​​​设​​​​​​​备​​​​​​​，该​​​​​​​设​​​​​​​备​​​​​​​可​​​​​​​将​​​​​​​ I/O 根​​​​​​​据​​​​​​​多​​​​​​​路​​​​​​​径​​​​​​​配​​​​​​​置​​​​​​​重​​​​​​​新​​​​​​​路​​​​​​​由​​​​​​​到​​​​​​​那​​​​​​​四​​​​​​​个​​​​​​​基​​​​​​​础​​​​​​​设​​​​​​​备​​​​​​​。​​​​​​​当​​​​​​​将​​​​​​​
`user_friendly_names`{.literal} 配​​​​​​​置​​​​​​​设​​​​​​​定​​​​​​​为​​​​​​​
`yes`{.literal}，会​​​​​​​将​​​​​​​该​​​​​​​多​​​​​​​路​​​​​​​径​​​​​​​设​​​​​​​备​​​​​​​的​​​​​​​名​​​​​​​称​​​​​​​设​​​​​​​定​​​​​​​为​​​​​​​ `mpath`{.literal}*`n`*。​​​​​​​
:::