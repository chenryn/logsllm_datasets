{ 
	"name": "my_new_group", 
	"description": "Description of my_new_group" }
åˆ é™¤ group 
åˆ é™¤ group ç›®å½• config/group/my_new_group/ ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœ group ä¸­å·²ç»å­˜åœ¨ dataflowï¼Œdataflow çš„é…ç½®æ–‡ä»¶å­˜åœ¨ç›®å½• config/ group/my_new_group/dataflow/ä¸‹ï¼Œå› æ­¤è¿™äº› dataflow ä¹Ÿå°†ä¼šè¢«åˆ é™¤ã€‚
	ä¿¡æ¯ 
é€šè¿‡æ–‡ä»¶é…ç½® group åï¼Œéœ€è¦é‡å¯ DataScale æœåŠ¡ä½¿æ”¹åŠ¨ç”Ÿæ•ˆã€‚
ç‰ˆæœ¬ï¼š2.13.0-beta
é…ç½® Dataflow
Dataflow é…ç½®æ ¼å¼
Dataflow ç”± sourceã€pipeline ä»¥åŠ sink ä¸‰ç§ç»„ä»¶æ„æˆï¼ˆå…³äºç»„ä»¶ä¹‹é—´çš„å…³ç³»ï¼Œå‚è§ Dataflow åŸº ç¡€ï¼‰ï¼Œä¸€ä¸ª dataflow é…ç½®çš„åŸºæœ¬æ ¼å¼ä¸ºï¼š
{ 
	"name": "", 
	"description": "", // å¯é€‰å‚æ•° 	"paused": false, // å¯é€‰å‚æ•°"sources": [ 
	{ 
	"name": "", 
	"type": "", // Source ç»„ä»¶çš„ç±»å‹ 
	"conf": { 
	... // SOURCE_TYPE ç±»å‹çš„ source ç»„ä»¶çš„é…ç½®å‚æ•° 	} 
	} 
	], 
	"pipelines": [ 
	{ 
	"name": "", 
	"inputs": [ "" ], 
	"conf": { 
	"transforms": [
{ "type": "", // Transform æ–¹æ³•çš„ç±»å‹
	"conf": { 
	... // TRANSFORM_TYPE ç±»å‹çš„ transform æ–¹æ³•çš„é…ç½®å‚æ•° 	} 
}
ä¸Šè¿° dataflow é…ç½®ä¸­å„å‚æ•°çš„è¯´æ˜ï¼š}
ä¸Šè¿° dataflow é…ç½®ä¸­å„å‚æ•°çš„è¯´æ˜ï¼š
â€¢	nameå‚æ•°æŒ‡å®š dataflow çš„åç§°ï¼Œè¯¥åç§°éœ€è¦åœ¨å…¶æ‰€å±çš„ group çš„èŒƒå›´å†…ä¿è¯å”¯ä¸€
â€¢	descriptionå‚æ•°ç”¨äºè®°å½• dataflow çš„è¯¦ç»†æè¿°
â€¢	pausedå‚æ•°ç”¨äºæ ‡è®° dataflow æ˜¯å¦è¦è¢«æ‰§è¡Œï¼ˆé»˜è®¤ä¸ºfalseï¼Œè¡¨ç¤ºæ­¤ dataflow ä¼šè¢«æ‰§
è¡Œï¼‰
â€¢	sourcesæ•°ç»„åŒ…å« dataflow ä¸­çš„ä¸€ä¸ªæˆ–è€…å¤šä¸ª source ç»„ä»¶
æ¯ä¸ª source ç»„ä»¶çš„é…ç½®åŒ…æ‹¬ï¼š
â—¦	nameå‚æ•°æŒ‡å®š source ç»„ä»¶çš„åç§°
â—¦	typeå‚æ•°æŒ‡å®š source ç»„ä»¶çš„ç±»å‹
â—¦	confå‚æ•°æŒ‡å®šè¯¥ç±»å‹çš„ source ç»„ä»¶çš„é…ç½®å‚æ•°
â€¢	pipelinesæ•°ç»„åŒ…å« dataflow ä¸­çš„ä¸€ä¸ªæˆ–è€…å¤šä¸ª pipeline ç»„ä»¶
æ¯ä¸ª pipeline ç»„ä»¶çš„é…ç½®åŒ…æ‹¬ï¼š
â—¦	nameå‚æ•°æŒ‡å®š pipeline ç»„ä»¶çš„åç§°â—¦	nameå‚æ•°æŒ‡å®š pipeline ç»„ä»¶çš„åç§°
â—¦	inputså‚æ•°æŒ‡å®š pipeline ç»„ä»¶çš„ä¸Šæ¸¸ source ç»„ä»¶çš„åç§°
â—¦	conf.transformsæ•°ç»„åŒ…å« pipeline ç»„ä»¶çš„æ‰€æœ‰ transform æ–¹æ³•ï¼Œè¿™äº› transform
æ–¹æ³•å°†ä¼šè¢«æŒ‰é¡ºåºæ‰§è¡Œ
æ¯ä¸ª transform æ–¹æ³•çš„é…ç½®åŒ…æ‹¬ï¼š
â–ª	typeå‚æ•°æŒ‡å®š transform æ–¹æ³•çš„ç±»å‹
â–ª	confå‚æ•°æŒ‡å®šè¯¥ç±»å‹çš„ transform æ–¹æ³•çš„é…ç½®å‚æ•°
â€¢	sinkæ•°ç»„åŒ…å« dataflow ä¸­çš„ä¸€ä¸ªæˆ–è€…å¤šä¸ª sink ç»„ä»¶
æ¯ä¸ª sink ç»„ä»¶çš„é…ç½®åŒ…æ‹¬ï¼š
â—¦	nameå‚æ•°æŒ‡å®š sink ç»„ä»¶çš„åç§°
â—¦	inputså‚æ•°æŒ‡å®š sink ç»„ä»¶çš„ä¸Šæ¸¸ source æˆ–è€… pipeline ç»„ä»¶çš„åç§°
â—¦	typeå‚æ•°æŒ‡å®š sink ç»„ä»¶çš„ç±»å‹
â—¦	confå‚æ•°æŒ‡å®šè¯¥ç±»å‹çš„ sink ç»„ä»¶çš„é…ç½®å‚æ•°â—¦	confå‚æ•°æŒ‡å®šè¯¥ç±»å‹çš„ sink ç»„ä»¶çš„é…ç½®å‚æ•°
ä¿¡æ¯
â€¢ Dataflow ä»¥åŠå„ç»„ä»¶çš„åç§°éœ€è¦ç¬¦åˆå‘½åè§„èŒƒï¼Œå‚è§æ–‡æ¡£ å‘½åè§„èŒƒ
â€¢ åŒä¸€ä¸ª dataflow ä¸­ï¼Œsourceã€pipeline ä»¥åŠ sink ç»„ä»¶çš„åç§°å¿…é¡»å”¯ä¸€ï¼Œä¸å¯ä»¥æœ‰åŒåç»„
ä»¶
â€¢ å…³äº DataScale æ”¯æŒçš„ç»„ä»¶ç±»å‹å’Œç›¸åº”çš„é…ç½®å‚æ•°ï¼Œå‚è§æ–‡æ¡£ Sourcesã€Pipelines ä»¥
åŠ Sinksã€‚
é…ç½® Dataflow
é€šè¿‡ è¿‡ Web UI é…ç½® dataflow
DataScale Web UI æä¾›äº†åˆ›å»ºã€ä¿®æ”¹ã€å¯åœã€åˆ é™¤ç­‰ dataflow ç®¡ç†åŠŸèƒ½ã€‚ä½ å¯ä»¥ä½¿ç”¨ â€œè§†å›¾æ¨¡å¼â€ï¼Œ
é€šè¿‡æ‹–æ‹½ç»„ä»¶æ¥ç¼–è¾‘ dataflowï¼›ä¹Ÿå¯ä»¥ä½¿ç”¨ â€œé«˜çº§æ¨¡å¼â€ï¼Œé€šè¿‡ç¼–è¾‘ json é…ç½®æ–‡ä»¶æ¥ç¼–è¾‘
dataflowã€‚
â€¢ è§†å›¾æ¨¡å¼
â€¢ é«˜çº§æ¨¡å¼
é€šè¿‡ è¿‡ Restful API é…ç½® dataflowâ€¢ é«˜çº§æ¨¡å¼
é€šè¿‡ è¿‡ Restful API é…ç½® dataflow 
DataScale æœåŠ¡æä¾›äº†åˆ›å»ºã€ä¿®æ”¹ä»¥åŠåˆ é™¤ dataflow çš„ Restful APIï¼Œå‚è§æ–‡æ¡£ Restful API
é€šè¿‡ è¿‡æ–‡ä»¶é…ç½® dataflow 
å½“ä½¿ç”¨ file ç±»å‹çš„ metastore æ—¶ï¼ˆå‚è§ Metastore é…ç½®ï¼‰ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡é…ç½®æ–‡ä»¶é…ç½® dataflowã€‚
â€¢ åˆ› åˆ›å»º dataflow 
	DataScale ä½¿ç”¨ group æ¥ç®¡ç† dataflow åˆ†ç»„ï¼Œå› æ­¤éœ€è¦åœ¨æŒ‡å®š group çš„ç›®å½•ä¸‹åˆ›å»º 	dataflow é…ç½®æ–‡ä»¶ï¼Œé…ç½®æ–‡ä»¶å†…å®¹å¦‚ä¸ŠèŠ‚æ‰€è¿°ã€‚ä¾‹å¦‚ï¼Œåœ¨ default group ä¸­åˆ›å»º dataflow 	my_dataflowï¼Œé‚£ä¹ˆéœ€è¦åˆ›å»ºæ–‡ä»¶config/group/default/dataflow/ 
	my_dataflow.jsonï¼Œæ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼šmy_dataflow.jsonï¼Œæ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š
{ 
	"name": "my_dataflow", 
	"sources": [ ... ], // Source ç»„ä»¶çš„é…ç½® 	"pipelines": [ ... ], // Pipeline ç»„ä»¶çš„é…ç½® 	"sinks": [ ... ] // Sink ç»„ä»¶çš„é…ç½® 
}
â€¢ ä¿®æ”¹ dataflow
ä¿®æ”¹ dataflow é…ç½®æ–‡ä»¶ config/group/default/dataflow/my_dataflow.json ä¸­ çš„é…ç½®å‚æ•°ã€‚
â€¢ åˆ  åˆ é™¤ dataflow 
	åˆ é™¤ dataflow é…ç½®æ–‡ä»¶ config/group/default/dataflow/my_dataflow.json ã€‚
	ä¿¡æ¯ 
é€šè¿‡æ–‡ä»¶é…ç½® dataflow åï¼Œéœ€è¦é‡å¯ DataScale æœåŠ¡ä½¿æ”¹åŠ¨ç”Ÿæ•ˆ
æŸ¥çœ‹ Dataflow çš„è¿ è¿è¡ŒæŸ¥çœ‹ Dataflow çš„è¿ è¿è¡Œ
Dataflow è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œå¯ä»¥é€šè¿‡ Web UI å®æ—¶æŸ¥çœ‹æŒ‡å®šç»„ä»¶é‡‡é›†ã€å¤„ç†æ•°æ®é‡çš„ç»Ÿè®¡ä¿¡æ¯ï¼Œä»¥åŠ event çš„å†…å®¹ï¼š
â€¢ æŸ¥çœ‹ç»„ä»¶è¾“å‡º event çš„ç»Ÿè®¡ä¿¡æ¯
â€¢ æŸ¥çœ‹ç»„ä»¶è¾“å‡º event çš„å†…å®¹
	ç‰ˆæœ¬ï¼š2.13.0-beta 
Source ç»„ ç»„ä»¶
Source ç»„ä»¶ç”¨äºå¯¹æ¥å„ç§æ•°æ®æºï¼Œå¯ä»¥é€šè¿‡ä¸»åŠ¨æŠ“å–æˆ–è€…è¢«åŠ¨æ¥æ”¶çš„æ–¹å¼é‡‡é›†æ•°æ®ï¼Œå¹¶å°† event è¾“å‡ºåˆ°ä¸‹æ¸¸ çš„ pipeline æˆ–è€… sink ç»„ä»¶ã€‚
ğŸ“„ File
file source ç»„ä»¶ç”¨äºä»æ–‡ä»¶ä¸­é‡‡é›†æ•°æ®ã€‚
ğŸ“„ Exec
exec source ç»„ä»¶ç”¨äºä»æ‰€æ‰§è¡Œçš„å‘½ä»¤çš„è¾“å‡ºä¸­é‡‡é›†æ•°æ®ã€‚
ğŸ“„ Kafka
kafka source ç»„ä»¶ç”¨äºä»æŒ‡å®šçš„ Kafka topics ä¸­é‡‡é›†æ•°æ®ã€‚
ğŸ“„ Kubernetes LogsğŸ“„ Kubernetes Logs
kubernetes_logs source ç»„ä»¶ç”¨äºé‡‡é›† DataScale æœåŠ¡è¿è¡Œæ‰€åœ¨çš„ Kubernetes node ä¸Šçš„ Pod æ—¥å¿—ã€‚
ğŸ“„ Prometheus Exporter
prometheus_exporter source ç»„ä»¶ç”¨äºä» Prometheus exporter çš„ HTTP endpoint é‡‡é›†æ•°æ®ã€‚
ğŸ“„ Prometheus Remote Write
prometheusremotewrite source ç»„ä»¶ç”¨äºæ¥æ”¶æ¥è‡ª Prometheus server çš„æ•°æ®ã€‚
ğŸ“„ Socket / Syslog
| socket source ç»„ä»¶ç”¨äºæ¥æ”¶ socket client å‘é€æ¥çš„æ•°æ®ã€‚ |
|---|
| ğŸ“„è‡ªå®šä¹‰ ä¹‰é‡‡é›†å™¨ ||---|
| ğŸ“„è‡ªå®šä¹‰ ä¹‰é‡‡é›†å™¨ |
collector source ç»„ä»¶ç”¨äºä½¿ç”¨è‡ªå®šä¹‰é‡‡é›†å™¨é‡‡é›†æ•°æ®ï¼ŒåŒ…æ‹¬ DataScale å†…ç½®çš„è‡ªå®šä¹‰é‡‡é›†å™¨ä»¥åŠç”¨æˆ·å¼€å‘çš„è‡ªå®šä¹‰é‡‡é›†å™¨ã€‚
ç‰ˆæœ¬ï¼š2.13.0-beta
File
filesource ç»„ä»¶ç”¨äºä»æ–‡ä»¶ä¸­é‡‡é›†æ•°æ®ã€‚
é…ç½®ç¤ºä¾‹
{ 
	"name": "my_file_source", 
	"type": "file", 
	"conf": { 
	"include": [ "/var/log/*.log" ] 
	} 
}
é…ç½®å‚æ•°
include
å¿…å¡«å‚æ•°ã€‚é‡‡é›†ç›®æ ‡æ–‡ä»¶åˆ—è¡¨ï¼Œæ”¯æŒ ã€‚
exclude
ä» include å‚æ•°æŒ‡å®šçš„ç›®æ ‡æ–‡ä»¶ä¸­æ’é™¤çš„æ–‡ä»¶ï¼Œæ”¯æŒ ã€‚
ä¾‹å¦‚ï¼š
{ 
"name": "my_file_source", 
"type": "file", 
"conf": {
read_from"type": "file", 
"conf": {
read_from
ç¬¬ä¸€æ¬¡è¯»å–é‡‡é›†ç›®æ ‡æ–‡ä»¶æ—¶çš„è¯»å–ä½ç½®ï¼Œå‚æ•°å€¼å¯ä»¥æ˜¯ beginning ï¼ˆé»˜è®¤å€¼ï¼‰æˆ– end ã€‚
max_line_bytes
èƒ½å¤Ÿè¯»å–çš„ä¸€æ¡ event çš„æœ€å¤§ bytesï¼ˆé»˜è®¤å€¼ä¸º 102400 bytesï¼‰ï¼Œè¶…å‡ºæ­¤é™åˆ¶çš„ event å°†è¢«ä¸¢å¼ƒã€‚
multiline
å½“é‡‡é›†ç›®æ ‡æ–‡ä»¶ä¸­å­˜åœ¨è·¨è¡Œçš„ event æ—¶ï¼Œä½¿ç”¨æ­¤å‚æ•°å®šä¹‰è·¨è¡Œèšåˆ event çš„è§„åˆ™ï¼š
â€¢ start_pattern
å¿…å¡«å‚æ•°ã€‚åŒ¹é… event èµ·å§‹çš„æ­£åˆ™è¡¨è¾¾å¼ã€‚
â€¢ timeout_ms
ç­‰å¾…è·¨è¡Œ event ç»“æŸï¼Œå³åŒ¹é…åˆ°ä¸‹ä¸€ event çš„ start_pattern çš„æ—¶é—´ï¼ˆé»˜è®¤å€¼ä¸º 60000 æ¯«ç§’ï¼‰ã€‚å½“è¶…æ—¶å‘ç”Ÿæ—¶ï¼Œå³ä½¿æ²¡æœ‰åŒ¹é…åˆ°ä¸‹ä¸€ eventï¼Œå½“å‰ event çš„å†…å®¹ä¹Ÿä¼šè¢«æˆªæ–­å¹¶è¾“å‡ºã€‚
ä¾‹å¦‚ï¼Œevent éœ€è¦ä»¥æ—¶é—´æˆ³å¼€å¤´ï¼š
{ä¾‹å¦‚ï¼Œevent éœ€è¦ä»¥æ—¶é—´æˆ³å¼€å¤´ï¼š
{ 
	"name": "my_file_source", 
	"type": "file", 
	"conf": { 
	"include": [ "/var/log/*.log" ], 
	"multiline": { 
	"start_pattern": "\\[\\d{2,4}\\-\\d{2,4}\\-
\\d{2,4}T\\d{2,4}:\\d{2,4}:\\d{2,4}(?:\\.\\d+)?Z?\\+\\d{1,6}.\\d{1,6}\\]" 	} 
	} 
}
remove_after_secs 
å½“è¯»å–åˆ°é‡‡é›†ç›®æ ‡æ–‡ä»¶çš„ EOF åï¼Œå¦‚æœåœ¨è®¾å®šçš„æ—¶é—´ï¼ˆå•ä½ä¸ºç§’ï¼‰å†…å†æ²¡æœ‰æ–°æ•°æ®å†™å…¥ï¼Œå°†åˆ é™¤è¯¥æ–‡ä»¶ã€‚ä½† æ˜¯å¦‚æœä¸æŒ‡å®šè¯¥å‚æ•°ï¼Œåˆ™ä¸ä¼šåˆ é™¤æ–‡ä»¶ã€‚
	ä¿¡æ¯ 
è¿è¡Œ DataScale çš„è´¦å·å¿…é¡»è¦æœ‰åˆ é™¤é‡‡é›†ç›®æ ‡æ–‡ä»¶çš„æƒé™ã€‚
ç‰ˆæœ¬ï¼š2.13.0-betaç‰ˆæœ¬ï¼š2.13.0-beta
Exec
execsource ç»„ä»¶ç”¨äºä»æ‰€æ‰§è¡Œçš„å‘½ä»¤çš„è¾“å‡ºä¸­é‡‡é›†æ•°æ®ã€‚
é…ç½®ç¤ºä¾‹
{ 
	"name": "my_exec_source", 
	"type": "exec", 
	"conf": { 
	"command": "ps -ef", 
	"mode": "scheduled", 
	"scheduled": { 
	"exec_interval_secs": 120 
	} 
	} 
}
é…ç½®å‚æ•°
command
å¿…å¡«å‚æ•°ã€‚æ‰§è¡Œçš„å‘½ä»¤åŠå‚æ•°ã€‚æ‰§è¡Œå‘½ä»¤åï¼Œè¾“å‡ºåˆ° consoleï¼ˆé»˜è®¤åŒ…æ‹¬ STDOUT å’Œ STDERRï¼‰çš„å†…å®¹å°†è¢«é‡‡é›†ã€‚
include_stderr
æ‰§è¡Œå‘½ä»¤åï¼Œè¾“å‡ºåˆ° STDERR çš„å†…å®¹æ˜¯å¦éœ€è¦è¢«é‡‡é›†ï¼ˆé»˜è®¤ä¸º true ï¼‰ã€‚
working_directory 
æ‰§è¡Œå‘½ä»¤æ—¶ä½¿ç”¨çš„å·¥ä½œç›®å½•ï¼ˆé»˜è®¤ä¸ºå½“å‰ DataScale æœåŠ¡çš„å·¥ä½œç›®å½•ï¼‰ã€‚æ‰§è¡Œå‘½ä»¤æ—¶ä½¿ç”¨çš„å·¥ä½œç›®å½•ï¼ˆé»˜è®¤ä¸ºå½“å‰ DataScale æœåŠ¡çš„å·¥ä½œç›®å½•ï¼‰ã€‚
mode 
å¿…å¡«å‚æ•°ã€‚ command å‚æ•°æŒ‡å®šçš„å‘½ä»¤çš„æ‰§è¡Œæ–¹å¼ï¼Œå‚æ•°å€¼å¯ä»¥æ˜¯ scheduled æˆ– streamingã€‚
scheduled 
commandå‚æ•°æŒ‡å®šçš„å‘½ä»¤å°†è¢«å‘¨æœŸæ€§çš„æ‰§è¡Œã€‚
â€¢ exec_interval_secs