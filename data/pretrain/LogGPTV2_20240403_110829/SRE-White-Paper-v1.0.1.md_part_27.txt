（5）统计 SLO信息：以面向用户落实稳定性保障的成果。
（6）面向业务的权限管控：有了层级资源模型，结合服务树的
鉴权模型，就可基于节点的 ⼈员信息进行权限管控，服务树基于
IAM实现了一套灵活的认证鉴权机制。
3.7.1.2 统一资源供给 哲哥
1．应用概念描述
资源：资源是一个抽象的概念，由各资源平台决定资源的最小
粒度。例如：容器平台中的一个应用、数据库中的数据库实例、对
象存储中的 Bucket、一台物理机、负载均衡中的一个负载实例、一
个业务域名，视频直播中的一路接入等，这些都是各云计算资源平
台提供的一种资源。
2．统一资源供给的价值
面向用户侧：平台工程的目标是通过对云资源进行抽象，以产
品化思维，构建面向研发人员的自动化平台能力。通过向上屏蔽底
层的复杂度，让研发人员能够不用太关注底层的复杂能力。进阶的
平台工程期望能够实现底层资源的联动，比如操作负载均衡，向上
联动域名，向下联动 RS等能力，为开发者提供全套的云计算解决方
案。
面向云平台内部：平台工程是很好的落地标准化的手段，通过
⽹址：SRE-Elite.com 18 6 微信：SRE精英联盟
SRE实践白皮书（2023年）
间接约束研发人员的使用，逐步摒弃个性化的配置，使研发团队使
用云资源更趋同和标准，大大减少云平台内部 SRE 团队的维护复杂
度。
因为云资源的业务复杂性，甚至维护管理云资源的组织复杂性
问题，很容易导致面向体系内用户使用的时候各产品 /服务相互独
立，交互体验、操作流程和概念标准不一致。
平台工程可以通过资源供给侧前端 UI 的标准化和流程的统一，
确保用户在各个产品页面都能获得一致的用户使用体验，减少使用
云能力的复杂度，可以拉通各个云资源标准化区域、可用区、环境
和项目分级等，拉齐用户对多个产品的认知与共识，同时为未来的
上层建设提供基础。
3．统一资源供给的前提
（1）具备一个公司通用的资源树（服务树 /IAM），通过业 务/项
目/服务将资源进行挂载。
（2）在业务/项目/服务这些维度维护关键角色，诸如业务负责
人，成本接口人，SRE 负责人，并与云资源提供方和用户方尽量拉
齐一套申请资源和审批资源的流程。
（3）具备灵活的 BPM/任务流/工单体系
（4）与各类资源提供方达成一致，用户对资源的使用统一收口
在平台中，资源提供方尽量提供视角一致的资源增删改查接口，理
想情况下平台工程团队对所有资源接口再做一轮标准化封装。
⽹址：SRE-Elite.com 18 7 微信：SRE精英联盟
SRE实践白皮书（2023年）
3.7.1.3 持续集成
CI 平台帮助开发者自动化构建 -测试-发布工作流，持续、快
速、高质量地交付产品，通过屏蔽掉所有研发流程中的繁琐环节，
让工程师聚焦于编码。提供流水线、代码检查、代码库、凭证管
理、制品库等核心服务，用于满足企业不同场景的需求。
1．应用概念描述
流水线：CI 最核心的服务，将团队现有的研发流程以可视化方
式呈现出来，编译、测试、部署，一条流水线搞定；
代码检查：提供专业的代码检查解决方案，检查缺陷、安全漏
洞、规范等多种维度代码问题，为产品质量保驾护航。
代码库：支持如 GitLab 与 Gerrit 仓库代码源。每个应用下的流水线
都会有默认的代码仓库，流水线运行时会拉取指定分支代码运行。
开启子仓库、设置关联应用、多仓库构建时，流水线中运行的代码
将会是多个仓库打包后的代码。
凭证管理：为代码库、流水线等服务提供不同类型的凭据、证
书管理功能
制品库：基于分布式存储，可无限扩展，数据持久化使用对象
存储。
触发机制：手工：在流水线列表后方点击执行；定时：设定时
间自动执行流水线；自动：监听代码 PUSH 或者 MERGE 操作，执
行流水线；代码评审触发：在代码管理评审设置中配置评审时触
发。主要用于预合并验证代码。
⽹址：SRE-Elite.com 18 8 微信：SRE精英联盟
SRE实践白皮书（2023年）
流转方式：
 未完成流转：执行了就都会开始到下一任务（不关注任务
结束时间、不关注任务结果成功或失败）
 完成流转：任务执行完成开始下一接任务（需等待任务执
行结束，不关注任务结果成功或失败）
 完成且成功流转：执行完成且任务执行成功才开始下一任
务（需等待任务执行结束，需要任务结果为成功），如果任
务不支持配置流转方式时，则默认使用完成且成功流转
2．核心功能
流水线主要包含【基本信息】、【流程配置】、【变量配置】、【安
全管控】四个部分，本文主要介绍基本信息和流程配置部分：
3．基本信息
一条流水线的基本信息包含以下配置项：
 流水线名称：必填，可以重复。
 代码仓库：根据应用设置中的代码仓库自动填充。
 默认关联分支：用户手动执行流水线时，默认运行的分
支。只能关联一个分支
 触发方式：手工、定时、自动。详情参考 触发方式
 开启集成模式：详情参考 分支集成
默认流水线：一个应用下只能标记一条默认流水线，标记后，
生成版本时默认会选择该流水线执行。
4．流程配置
⽹址：SRE-Elite.com 18 9 微信：SRE精英联盟
SRE实践白皮书（2023年）
按照各个项目的研发模式和业务诉求配置流水线阶段与任务。
一个流水线中至少配置一个任务才允许保存。
 阶段：通常我们按照开发流程将流水线配置为不同阶段。
如构建阶段、并行测试阶段、集成测试阶段、发布上线阶
段。阶段可以配置串行或并行。
 任务：一个阶段中可以添加多个需要在这个阶段中执行的
任务，一个阶段内的任务可以全部选择【串行】或者【并
行】运行。目前支持的任务参考流水线任务与仓库支持
（1）添加串行阶段。点击流水线【添加阶段】，或者流水线之间
的【+】，可以 添 加 一个 串 行 阶段 。
（2）添加并行阶段。将鼠标移动到一个阶段下方的空白区域，
会自动出现【添加阶段】按钮，这个时候可以在这个阶段下添加并
行阶段。
（3）添加阶段时，可以设置阶段内任务的串行或者并行。设置
后，属于这个阶段的任务将按照串行/并行执行。
（4）添加任务。可以点击阶段中的【+】来添加任务。
（5）任务添加默认都是阶段内最后一个，你可以拖动任务来改
变任务顺序。
5．流水线设计简介
流水线作为持续集成的核心组件，是否健壮、易用直接影响着
持续集成的建设水平。在交付高峰期服务不可用现象频出，严重影
响着业务交付的顺畅度。同时业务方的构建资源没有做限制，部分
⽹址：SRE-Elite.com 19 0 微信：SRE精英联盟
SRE实践白皮书（2023年）
业务方大量占用资源，影响平台的其他用户正常使用。
随着用户量、构建场景的增多上述的问题也会愈发严重，对于
流水线的场景，资源最优解并不是强诉求，可通过任务拉取的方
式，控制任务执行的频率，从而降低了资源的竞争和系统的可用性
（1）增加任务状态机，管理任务状态流转
（2）增加任务调度器，调度任务进入队列等待
（3）增加任务队列，从原来的主动选择 node 节点修改为现在的
node节点主动拉取
（4）增加资源管理器，管理当前 worker节点的资源信息
3.7.1.4 持续部署
持续部署将用户的业务实例组织起来，打通下游持续集成，并
对接容器、虚拟机、物理机等物理资源，并为上游服务提供部署底
座，为用户的业务提供部署的基础服务。
1．应用概念描述
1）实例
⽹址：SRE-Elite.com 19 1 微信：SRE精英联盟
SRE实践白皮书（2023年）
用户用于部署的最小部署单元，可以是单个独立运行的 k8s
pod，一个 statefulsets 生成的 pod，也可以是云平台虚拟机、物理机
等。
2）分组
将多个实例组织起来的逻辑概念，用于支撑业务应用的并发或
多活，同时负责为这一批实例提供统一的通用化配置选项等功能。
3）包部署
包部署是分组的一种类型，其实例可以是单独的 k8s pod、云平
台虚拟机或物理机，在使用方面通常用于提供有状态应用服务。
4）镜像部署
镜像部署是分组的另一种类型，其实例由自研的 k8s statefulsets
crd生成的 pod组成，通常用于提供无状态应用服务。
2．核心功能
1）部署设置
针对实例的定制化配置选项集合，定义了实例对外提供服务的
基础能力。
 基础信息，例如应用根目录、运行用户、日志目录等。
 实例启停信息，例如资源池、 JDK 环境（针对 Java 应
用）、初始化及启停脚本等。
 实例高级配置，例如实例对外服务端口、配置下载目录、
分散策略等。
 实例健康检查信息，例如 HTTP/TCP/脚本检查方式、实例
⽹址：SRE-Elite.com 19 2 微信：SRE精英联盟
SRE实践白皮书（2023年）
健康检查端口/周期/延迟/失败阈值等，以及健康检查时的告
警策略及自动恢复策略等。
2）分组管理
与部署设置管理，对同样功能的实例进行统一化配置，主要包
含：
 基础信息，例如分组的类型（包部署/镜像部署）、关联的
部署设置、是否是灰度分组、注册中心及网关流量标签等。
 规格信息，例如分组内的实例数，规格（CPU 核数、内存
大小、GPU型号及规格），磁盘大小等。
 高级设置，例如实例是否保留固定 IP，接入配置中心的环
境及版本，容器标签、注解、宿主机亲和性等。
3）部署变更