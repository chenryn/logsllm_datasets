MySQL与PG 对比学习
面向开发者
阿里云
digoal
目录
• 数据类型
• 函数、操作符
• 分区表
• SQL语法
• 约束
• 索引
• dba常见操作
数据类型
MySQL PG
数值 https://dev.mysql.com/doc/refman/8.0/en/numeric- https://www.postgresql.org/docs/12/datatype-
types.html numeric.html
整型 tinyint , smallint , mediumint , int , bigint int2 , int4 , int8
signed , unsigned domain: int1,uint1,uint2,int3,uint3,uint4,uint8
zerofill func: lpad
https://github.com/digoal/blog/blob/master/202001/20200
105_04.md
numeric decimal , numeric (m,n) decimal , numeric (m,n)
最大 65 digits 最大 [左131072 , 右16383] digits
浮点 4byte(prec: 0~23) real , float real , float , float4
8byte(prec: 24~53) double float8 , double precision
float(0~53)
BIT bit(1~64) bit(1~83886080)
func
https://github.com/digoal/blog/blob/master/202001/20200
105_03.md
序列 auto_increment serial2 , serial4 , serial8
1,1 序列，可修改start, increment by, maxvalue, cache, cycle
MySQL PG
时间 https://dev.mysql.com/doc/refman/8.0/en/da https://www.postgresql.org/docs/12/dat
te-and-time-types.html atype-datetime.html
date date date
time time time , timetz
datetime datetime timestamp , timestamptz
timestamp timestamp timestamp , timestamptz
year year -
1901~2155 domain: int2 check (1901~2155)
https://github.com/digoal/blog/blob/ma
ster/202001/20200106_01.md
MySQL PG
字符串 https://dev.mysql.com/doc/refman/8.0/en/string- https://www.postgresql.org/docs/12/datatype-character.html
types.html
char , varchar char(n) 最大255个字符 char(n) 最大10485760字符
varchar(n) 最大n字符 (小于64K字节) varchar(n) (小于1G 字节)
name 固定64字节
"char" 固定1字节
binary , varbinary binary(n) 最大255个字符 bytea 最大1GB
varbinary(n) 最大n字符 (小于64K字节)
使用字节流存储字符串
blob , text tinyblob , tinytext  geohash 编码，btree索引
• 只支持包含 (geohash prefix search)
• pg -> base on r-tree
• postgis, ganos
• 支持搜索种类多，支持专业GIS处理（平面、立体、栅格、点云、轨迹、
路径规划），
• 234D，点、线、面、立体，
• 支持包含、相交、距离排序、范围、srid、空间+非空间+多值列 组合过
滤
MySQL PG
kill session show processlist; select pid,query,state,wait_event from pg_stat_activity;
kill pid; select pg_terminate_backend(pid);
show process select pg_cancel_backend(pid);
show database show databases; \l
select * from pg_database;
show tables show tables \dt n.*
select * from pg_tables;
show columns show columns from table desc table
desc table \d table
show users show users \du
select * from pg_roles
explain explain query explain query
explain (analzye,verbose,timing,costs,buffers) query
analyze analyze analyze table
job pg_cron
lock、wait pg_locks
pg_stat_activity
top sql pg_stat_statements
calls, total_time, iotime, stddev
history csvlog
auto_explain
perf insight pg_stat_activity
pg_stat_sample
参考资料
• MySQL手册
• https://www.mysqltutorial.org/
• https://dev.mysql.com/doc/refman/8.0/en/
• PG 管理、开发规范
• https://github.com/digoal/blog/blob/master/201609/20160926_01.md
• PG “十万个为什么”
• PG手册
• https://www.postgresql.org/docs/current/index.html
• https://www.postgresqltutorial.com/postgresql-tutorial/postgresql-vs-mysql/
• GIS手册
• http://postgis.net/docs/manual-3.0/
一期开课计划(PG+MySQL联合方案)
• - 2019.12.30 19:30 RDS PG产品概览，如何与MySQL结合使用
• - 2019.12.31 19:30 如何连接PG，GUI，CLI的使用
• - 2020.1.3 19:30 如何压测PG数据库、如何瞬间构造海量测试数据
• - 2020.1.6 19:30 MySQL与PG对比学习(面向开发者)
• - 2020.1.7 19:30 如何将MySQL数据同步到PG（DTS）
• - 2020.1.8 19:30 PG外部表妙用 - mysql_fdw, oss_fdw（直接读写MySQL数据、冷热分离）
• - 2020.1.9 19:30 PG应用场景介绍 - 并行计算，实时分析
• - 2020.1.10 19:30 PG应用场景介绍 - GIS
• - 2020.1.13 19:30 PG应用场景介绍 - 用户画像、实时营销系统
• - 2020.1.14 19:30 PG应用场景介绍 - 多维搜索
• - 2020.1.15 19:30 PG应用场景介绍 - 向量计算、图像搜索
• - 2020.1.16 19:30 PG应用场景介绍 - 全文检索、模糊查询
• - 2020.1.17 19:30 PG 数据分析语法介绍
• - 2020.1.18 19:30 PG 更多功能了解：扩展语法、索引、类型、存储过程与函数。如何加入PG技术社群
技术社群
PG技术交流钉钉群(3500+人)