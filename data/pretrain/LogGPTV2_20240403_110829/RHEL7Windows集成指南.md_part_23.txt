:::
本节论述了配置选项，允许您使用简短的用户名或组名称，而不是
`user_name@domain`{.systemitem} 或 `domain\user_name`{.systemitem}
完全限定名称格式，以在 Active
Directory(AD)环境中解析和验证用户和组。您可以配置它：
::: itemizedlist
-   在信任 AD 的 Identity Management(IdM)中
-   在 Red Hat Enterprise Linux 中使用 SSSD 加入 AD
:::
::: section
::: titlepage
## []{#id-views.html#domain-resolution-concepts}域解析如何工作 {.title}
:::
`您可以使用域解析顺序选项指定搜索域列表的顺序`{.option}，以返回给定用户名的匹配项。您可以设置选项：
::: itemizedlist
-   服务器上的.请参阅：
    ::: itemizedlist
    -   ["全局设置域解析顺序"一节](#id-views.html#setting-dro-globally "全局设置域解析顺序"){.xref}
    -   ["为 ID
        视图设置域解析顺序"一节](#id-views.html#setting-dro-for-IDview "为 ID 视图设置域解析顺序"){.xref}
    :::
-   在客户端上.请查看 ["在 IdM
    客户端中配置域解析顺序"一节](#id-views.html#configuring-clients "在 IdM 客户端中配置域解析顺序"){.xref}
:::
在具有 Active Directory
信任的环境中，建议应用一个或多个基于服务器的选项。
`从特定客户端的角度来看，可以在以上三个位置中的多个位置中设置域解析顺序选项`{.option}。客户端检查这三个位置的顺序是：
::: orderedlist
1.  本地 `sssd.conf`{.filename} 配置
2.  id 视图配置
3.  全局 IdM 配置
:::
将仅使用首先找到的域解析顺序设置。
在 Red Hat Enterprise Linux 直接集成到 AD
的环境中，您只能在客户端上设置域解析顺序。
::: {.note style="margin-left: 0.5in; margin-right: 0.5in;"}
### 注意 {.title}
如果出现以下情况，则必须使用限定名称：
::: itemizedlist
-   用户名存在于多个域中
-   SSSD 配置包括 `default_domain_suffix`{.option}
    选项，您想要向未使用该选项指定的域发出请求
:::
:::
:::
::: section
::: titlepage
## []{#id-views.html#configuring-idm-servers}在身份管理服务器上配置域解析顺序 {.title}
:::
如果域或子域中的大量客户端应使用相同的域解析顺序，请选择基于服务器的配置。
::: section
::: titlepage
### []{#id-views.html#setting-dro-globally}全局设置域解析顺序 {.title}
:::
选择此选项将域解析顺序设置为信任中的所有客户端。要做到这一点，请使用
[**ipa config-mod**]{.command} 命令。例如，在 IdM 域中，它与多个子域信任
AD 林：
``` screen
$ ipa config-mod --domain-resolution-order='idm.example.com:ad.example.com:subdomain1.ad.example.com:subdomain2.ad.example.com'
Maximum username length: 32
Home directory base: /home
...
Domain Resolution Order: idm.example.com:ad.example.com:subdomain1.ad.example.com:subdomain2.ad.example.com
...
```
通过以这种方式设置域解析顺序，来自 IdM 域和可信 AD
林的用户只能使用短名称登录。
:::
::: section
::: titlepage
### []{#id-views.html#setting-dro-for-IDview}为 ID 视图设置域解析顺序 {.title}
:::
选择此选项以将设置应用到特定域中的客户端。
例如，在子域服务器上 *`server.idm.example.com`*，您会看到来自
*`subdomain2.ad.example.com 的子域比来自 subdomain1.ad`*.example.com``{=html}``{=html}
的更多登录。*`但是，全局解析顺序指出，在解析用户名时，subdomain1.ad.example.com`*
子域用户数据库在 *`subdomain2.ad.example.com`*
之前被尝试。要为特定服务器设置不同的顺序，为特定视图设置域解析顺序：
::: procedure
1.  `使用域解析顺序选项集创建一个`{.option} ID 视图：
    ``` screen
    $ ipa idview-add example_view --desc "ID view for custom shortname resolution on server.idm.example.com" --domain-resolution-order subdomain2.ad.example.com:subdomain1.ad.example.com
    ---------------------------------
    Added ID View "example_view"
    ---------------------------------
    ID View Name: example_view
    Description: ID view for custom shortname resolution on server.idm.example.com
    Domain Resolution Order: subdomain2.ad.example.com:subdomain1.ad.example.com
    ```
2.  在客户端上应用视图。例如：
    ``` screen
    $ ipa idview-apply example_view --hosts server.idm.example.com
    -----------------------------------
    Applied ID View "example_view"
    -----------------------------------
    hosts: server.idm.example.com
    ---------------------------------------------
    Number of hosts the ID View was applied to: 1
    ---------------------------------------------
    ```
:::
有关 ID 视图的详情请参考 [第 8 章 *在 Active Directory 环境中使用 ID
视图*](#id-views.html "第 8 章 在 Active Directory 环境中使用 ID 视图"){.xref}。
:::
:::
::: section
::: titlepage
## []{#id-views.html#configuring-clients}在 IdM 客户端中配置域解析顺序 {.title}
:::
如果要在较少数量的客户端上设置客户端的域解析顺序，或者客户端直接连接到
AD，请设置域解析顺序。
在 `/etc/sssd/sssd.conf`{.filename} 文件的 \[sssd\] 部分中设置
`domain_resolution_order`{.option} 选项，例如：
``` screen
domain_resolution_order = subdomain1.ad.example.com, subdomain2.ad.example.com
```
有关配置 `domain_resolution_order`{.option} 选项的详情请参考
sssd.conf(5)手册页。
:::
:::
:::
[]{#doc-history.html}
::: appendix
::: titlepage
# []{#doc-history.html#doc-history}附录 A. 修订历史记录 {.title}
:::
请注意，修订号与本手册的版本相关，与 Red Hat Enterprise Linux
的版本号无关。
::: revhistory
+-----------------------+-----------------------+-----------------------+
| **修订历史**          |                       |                       |
+:======================+:======================+:======================+
| 修订 7.0-51           | Thu Mar 4 2021        | [                     |
|                       |                       | [Florian]{.firstname} |
|                       |                       | [Delehaye             |
|                       |                       | ]{.surname}]{.author} |
+-----------------------+-----------------------+-----------------------+
|   --------------      |                       |                       |
| --------------------- |                       |                       |
| --------------------- |                       |                       |
|   7.9 GA 版指南       |                       |                       |
| .添加了有关手动调整   |                       |                       |
| DNA ID 范围的新部分。 |                       |                       |
|   --------------      |                       |                       |
| --------------------- |                       |                       |
| --------------------- |                       |                       |
+-----------------------+-----------------------+-----------------------+
| 修订 7.0-50           | Wed May 27 2020       | [                     |
|                       |                       | [Florian]{.firstname} |
|                       |                       | [Delehaye             |
|                       |                       | ]{.surname}]{.author} |
+-----------------------+-----------------------+-----------------------+
|   -----------------   |                       |                       |
|   多个修复和更新.     |                       |                       |
|   -----------------   |                       |                       |
+-----------------------+-----------------------+-----------------------+
| 修订 7.0-49           | Tue Aug 06 2019       | [[Marc]{.firstname}   |
|                       |                       | [Muehlfeld            |
|                       |                       | ]{.surname}]{.author} |
+-----------------------+-----------------------+-----------------------+
|   ----                |                       |                       |
| --------------------- |                       |                       |
|   发                  |                       |                       |
| 布 7.7 GA 的文档版本. |                       |                       |
|   ----                |                       |                       |
| --------------------- |                       |                       |
+-----------------------+-----------------------+-----------------------+
| 修订 7.0-48           | Wed Jun 05 2019       | [[Marc]{.firstname}   |
|                       |                       | [Muehlfeld            |
|                       |                       | ]{.surname}]{.author} |
+-----------------------+-----------------------+-----------------------+
|   ----------          |                       |                       |
| --------------------- |                       |                       |
| --------------------- |                       |                       |
| --------------------- |                       |                       |
| --------------------- |                       |                       |
|   *更新了配           |                       |                       |
| 置信任代理*，添加了 * |                       |                       |
| AD 提供程序如何处理受 |                       |                       |
| 信任域 ，以及更改 SS  |                       |                       |
| SD 显示的用户名格式*. |                       |                       |
|   ----------          |                       |                       |
| --------------------- |                       |                       |
| --------------------- |                       |                       |
| --------------------- |                       |                       |
| --------------------- |                       |                       |
+-----------------------+-----------------------+-----------------------+
| 修订 7.0-47           | Tue Apr 08 2019       | [[Marc]{.firstname}   |
|                       |                       | [Muehlfeld            |
|                       |                       | ]{.surname}]{.author} |
+-----------------------+-----------------------+-----------------------+
|                       |                       |                       |
|  -------------------- |                       |                       |
|   几个小修复和更新。  |                       |                       |
|                       |                       |                       |
|  -------------------- |                       |                       |
+-----------------------+-----------------------+-----------------------+
| 修订 7.0-46           | Mon Oct 29 2018       | [[Filip]{.firstname}  |
|                       |                       | [Hanzelka             |
|                       |                       | ]{.surname}]{.author} |
+-----------------------+-----------------------+-----------------------+
|   ----                |                       |                       |
| --------------------- |                       |                       |
|   为                  |                       |                       |
|  7.6 GA 发布准备文档. |                       |                       |
|   ----                |                       |                       |
| --------------------- |                       |                       |
+-----------------------+-----------------------+-----------------------+
| 修订 7.0-45           | Mon Jun 25 2018       | [[Filip]{.firstname}  |
|                       |                       | [Hanzelka             |
|                       |                       | ]{.surname}]{.author} |
+-----------------------+-----------------------+-----------------------+
|   ---------------     |                       |                       |
| --------------------- |                       |                       |
| --------------------- |                       |                       |
|   添加了 *SSSD        |                       |                       |
| 和 Winbind 之间的交换 |                       |                       |
| ，用于 SMB 共享访问.* |                       |                       |
|   ---------------     |                       |                       |
| --------------------- |                       |                       |
| --------------------- |                       |                       |
+-----------------------+-----------------------+-----------------------+
| 修订 7.0-44           | Thu Apr 5 2018        | [[Filip]{.firstname}  |
|                       |                       | [Hanzelka             |
|                       |                       | ]{.surname}]{.author} |
+-----------------------+-----------------------+-----------------------+
|   ----                |                       |                       |
| --------------------- |                       |                       |
|   为                  |                       |                       |
|  7.5 GA 发布准备文档. |                       |                       |
|   ----                |                       |                       |
| --------------------- |                       |                       |
+-----------------------+-----------------------+-----------------------+
| 修订 7.0-43           | Wed Feb 28 2018       | [[Filip]{.firstname}  |
|                       |                       | [Hanzelka             |
|                       |                       | ]{.surname}]{.author} |
+-----------------------+-----------------------+-----------------------+
|   -----------         |                       |                       |
| --------------------- |                       |                       |
|   更新了 *S           |                       |                       |
| SSD 支持的 GPO 设置.* |                       |                       |
|   -----------         |                       |                       |
| --------------------- |                       |                       |
+-----------------------+-----------------------+-----------------------+
| 修订 7.0-42           | Mon Feb 12 2018       | [[Aneta]{.firstname}  |
|                       |                       | [Šteflová             |
|                       |                       | Petrová               |
|                       |                       | ]{.surname}]{.author} |
+-----------------------+-----------------------+-----------------------+
|   --------------      |                       |                       |
| --------------------- |                       |                       |
|   *更新了使用共       |                       |                       |
| 享机密创建双周信任*.  |                       |                       |
|   --------------      |                       |                       |
| --------------------- |                       |                       |
+-----------------------+-----------------------+-----------------------+
| 修订 7.0-41           | Mon Jan 29 2018       | [[Aneta]{.firstname}  |
|                       |                       | [Šteflová             |
|                       |                       | Petrová               |
|                       |                       | ]{.surname}]{.author} |
+-----------------------+-----------------------+-----------------------+
|   ---------           |                       |                       |
|   小修复.             |                       |                       |
|   ---------           |                       |                       |
+-----------------------+-----------------------+-----------------------+
| 修订 7.0-40           | Fri Dec 15 2017       | [[Aneta]{.firstname}  |
|                       |                       | [Šteflová             |
|                       |                       | Petrová               |
|                       |                       | ]{.surname}]{.author} |
+-----------------------+-----------------------+-----------------------+
|   ---------           |                       |                       |
|   小修复.             |                       |                       |
|   ---------           |                       |                       |
+-----------------------+-----------------------+-----------------------+
| 修订 7.0-39           | Mon Dec 6 2017        | [[Aneta]{.firstname}  |
|                       |                       | [Šteflová             |
|                       |                       | Petrová               |
|                       |                       | ]{.surname}]{.author} |
+-----------------------+-----------------------+-----------------------+
|   ----                |                       |                       |
| --------------------- |                       |                       |
| --------------------- |                       |                       |
|   *使                 |                       |                       |
| 用 Samba 进行 Active  |                       |                       |
|  Directory 集成更新*. |                       |                       |
|   ----                |                       |                       |
| --------------------- |                       |                       |
| --------------------- |                       |                       |
+-----------------------+-----------------------+-----------------------+
| 修订 7.0-38           | Mon Dec 4 2017        | [[Aneta]{.firstname}  |
|                       |                       | [Šteflová             |
|                       |                       | Petrová               |
|                       |                       | ]{.surname}]{.author} |
+-----------------------+-----------------------+-----------------------+
|   --------------      |                       |                       |