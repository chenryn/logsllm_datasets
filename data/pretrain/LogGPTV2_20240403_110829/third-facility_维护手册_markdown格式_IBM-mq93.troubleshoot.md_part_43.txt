*03 IEE094D SPECIFY OPERAND(S) FOR DUMP COMMAND
IEE600I REPLY TO 02 IS;SDATA=(CSA,RGN,PSA,SQA,LSQA,TRT,SUM),CONT
R 03,DSPNAME=('CSQ1CHIN'.CSQXTRDS),END
IEE600I REPLY TO 03 IS;DSPNAME=('CSQ1CHIN'.CSQXTRDS),END
IEA794I SVC DUMP HAS CAPTURED: 869
DUMPID=001 REQUESTED BY JOB (*MASTER*)
DUMP TITLE=MQ MSTR & CHIN DUMP
Figure 47. Dumping the IBM MQ queue manager and channel initiator address spaces
DUMP COMM=('MQ APPLICATION STRUCTURE 1 DUMP')
01 IEE094D SPECIFY OPERAND(S) FOR DUMP COMMAND
R 01,STRLIST=(STRNAME=QSG1APPLICATION1,(LISTNUM=ALL,ADJUNCT=CAPTURE,ENTRYDATA=UNSER))
IEE600I REPLY TO 01 IS;STRLIST=(STRNAME=QSG1APPLICATION1,(LISTNUM=
IEA794I SVC DUMP HAS CAPTURED: 677
DUMPID=057 REQUESTED BY JOB (*MASTER*)
DUMP TITLE='MQ APPLICATION STRUCTURE 1 DUMP'
Figure 48. Dumping a coupling facility structure
270 Troubleshooting and Support for IBM MQ
Processing a dump using the IBM MQ for z/OS dump display panels
You can use commands available through IPCS panels to process dumps. Use this topic to understand the
IPCS options.
IBM MQ for z/OS provides a set of panels to help you process dumps. The following section describes how
to use these panels:
1.From the IPCS PRIMARY OPTION MENU, select ANALYSIS - Analyze dump contents (option 2).
The IPCS MVS ANALYSIS OF DUMP CONTENTS panel is displayed.
2.Select COMPONENT - MVS component data (option 6).
The IPCS MVS DUMP COMPONENT DATA ANALYSIS panel is displayed. The appearance of the panel
depends on the products installed at your installation, but will be similar to the panel shown in IPCS
MVS Dump Component Data Analysis panel:
---------------- IPCS MVS DUMP COMPONENT DATA ANALYSIS -------------
OPTION ===> SCROLL ===
To display information, specify "S option name" or enter S to the
left of the option required. Enter ? to the left of an option to
display help regarding the component support.
Name Abstract
ALCWAIT Allocation wait summary
AOMDATA AOM analysis
ASMCHECK Auxiliary storage paging activity
ASMDATA ASM control block analysis
AVMDATA AVM control block analysis
COMCHECK Operator communications data
CSQMAIN WebSphere MQ dump formatter panel interface
CSQWDMP WebSphere MQ dump formatter
CTRACE Component trace summary
DAEDATA DAE header data
DIVDATA Data-in-virtual storage
Figure 49. IPCS MVS Dump Component Data Analysis panel
3.Select CSQMAIN IBM MQ dump formatter panel interface by typing s next to the line and pressing
Enter.
If this option is not available, it is because the member CSQ7IPCS is not present; you should see
Configuring z/OS for more information about installing the IBM MQ for z/OS dump formatting member.
Note: If you have already used the dump to do a preliminary analysis, and you want to reexamine it,
select CSQWDMP IBM MQ dump formatter to display the formatted contents again, using the default
options.
4.The IBM MQ for z/OS - DUMP ANALYSIS menu is displayed. Use this menu to specify the action that
you want to perform on a system dump.
IBM MQ troubleshooting and support 271
---------------IBM WebSphere MQ for z/OS - DUMP ANALYSIS----------------
COMMAND ===>
1 Display all dump titles 00 through 99
2 Manage the dump inventory
3 Select a dump
4 Display address spaces active at time of dump
5 Display the symptom string
6 Display the symptom string and other related data
7 Display LOGREC data from the buffer in the dump
8 Format and display the dump
9 Issue IPCS command or CLIST
(c) Copyright IBM Corporation 1993, 2023. All rights reserved.
F1=Help F3=Exit F12=Cancel
5.Before you can select a particular dump for analysis, the dump you require must be present in the
dump inventory. To ensure that this is so, perform the following steps:
a.If you do not know the name of the data set containing the dump, specify option 1 - Display all
dump titles xx through xx.
This displays the dump titles of all the dumps contained in the SYS1.DUMP data sets (where xx is a
number in the range 00 through 99). You can limit the selection of data sets for display by using the
xx fields to specify a range of data set numbers.
If you want to see details of all available dump data sets, set these values to 00 and 99.
Use the information displayed to identify the dump you want to analyze.
b.If the dump has not been copied into another data set (that is, it is in one of the SYS1.DUMP data
sets), specify option 2 - Manage the dump inventory
The dump inventory contains the dump data sets that you have used. Because the SYS1.DUMP data
sets are reused, the name of the dump that you identified in step “5.a” on page 272 might be in the
list displayed. However, this entry refers to the previous dump that was stored in this data set, so
delete it by typing DD next to it and pressing Enter. Then press F3 to return to the DUMP ANALYSIS
MENU.
6.Specify option 3 - Select a dump, to select the dump that you want to work with. Type the name of the
data set containing the dump in the Source field, check that NOPRINT and TERMINAL are specified in
the Message Routing field (this is to ensure that the output is directed to the terminal), and press Enter.
Press F3 to return to the DUMP ANALYSIS MENU.
7.Having selected a dump to work with, you can now use the other options on the menu to analyze the
data in different parts of the dump:
• To display a list of all address spaces active at the time the dump was taken, select option 4.
• To display the symptom string, select option 5.
• To display the symptom string and other serviceability information, including the variable recording
area of the system diagnostic work area (SDWA), select option 6.
• To format and display the data contained in the in-storage LOGREC buffer, select option 7.
It could be that the abend that caused the dump was not the original cause of the error, but
was caused by an earlier problem. To determine which LOGREC record relates to the cause of the
problem, go to the end of the data set, type FIND ERRORID: PREV, and press Enter. The header of
the latest LOGREC record is displayed, for example:
272 Troubleshooting and Support for IBM MQ
JOBNAME: NONE-FRR
ERRORID: SEQ=00081 CPU=0040 ASID=0033 TIME=14:42:47.1
SEARCH ARGUMENT ABSTRACT
PIDS/5655R3600 RIDS/CSQRLLM1#L RIDS/CSQRRHSL AB/S05C6
PRCS/00D10231 REGS/0C1F0 RIDS/CSQVEUS2#R
SYMPTOM DESCRIPTION
------- -----------
PIDS/5655R3600 PROGRAM ID: 5655R3600
.
.
.
Note the program identifier (if it is not 5655R3600, the problem was not caused by IBM MQ for
z/OS and you could be looking at the wrong dump). Also note the value of the TIME field. Repeat
the command to find the previous LOGREC record, and note the value of the TIME field again. If the
two values are close to each other (say, within about one or two tenths of a second), they could both
relate to the same problem.
• To format and display the dump, select option 8. The FORMAT AND DISPLAY THE DUMP panel is
displayed:
---------IBM MQ for z/OS - FORMAT AND DISPLAY DUMP--------
COMMAND ===>
1 Display the control blocks and trace
2 Display just the control blocks
3 Display just the trace
Options:
Use the summary dump? . . . . . . . . . . . . . . __ 1 Yes
2 No
Subsystem name (required if summary dump not used) ____
Address space identifier or ALL. . . . . . . . . . ALL_
F1=Help F3=Exit F12=Cancel
• Use this panel to format your selected system dump. You can choose to display control blocks, data
produced by the internal trace, or both, which is the default.
Note: You cannot do this for dumps from the channel initiator, or for dumps of coupling facility
structures.
– To display the whole of the dump, that is:
- The dump title
- The variable recording area (VRA) diagnostic information report
- The save area trace report
- The control block summary
- The trace table
select option 1.
– To display the information listed for option 1, without the trace table, select option 2.
– To display the information listed for option 1, without the control blocks, select option 3.
IBM MQ troubleshooting and support 273
You can also use the following options:
– Use the Summary Dump?
Use this field to specify whether you want IBM MQ to use the information contained in the
summary portion when formatting the selected dump. The default setting is YES.
Note: If a summary dump has been taken, it might include data from more than one address
space.
– Subsystem name
Use this field to identify the subsystem with the dump data you want to display. This is only
required if there is no summary data (for example, if the operator requested the dump), or if you
have specified NO in the Use the summary dump? field.
If you do not know the subsystem name, type IPCS SELECT ALL at the command prompt, and
press Enter to display a list of all the jobs running at the time of the error. If one of the jobs has the
word ERROR against it in the SELECTION CRITERIA column, make a note of the name of that job.
The job name is of the form xxxx MSTR, where xxxx is the subsystem name.
IPCS OUTPUT STREAM -------------------------
COMMAND ===>
ASID JOBNAME ASCBADDR SELECTION CRITERIA
---- -------- -------- ------------------
0001 *MASTER* 00FD4D80 ALL
0002 PCAUTH 00F8AB80 ALL
0003 RASP 00F8C100 ALL
0004 TRACE 00F8BE00 ALL
0005 GRS 00F8BC00 ALL
0006 DUMPSRV 00F8DE00 ALL
0008 CONSOLE 00FA7E00 ALL
0009 ALLOCAS 00F8D780 ALL
000A SMF 00FA4A00 ALL
000B VLF 00FA4800 ALL
000C LLA 00FA4600 ALL
000D JESM 00F71E00 ALL
001F MQM1MSTR 00FA0680 ERROR ALL
If no job has the word ERROR against it in the SELECTION CRITERIA column, select option 0 -
DEFAULTS on the main IPCS Options Menu panel to display the IPCS Default Values panel. Note
the address space identifier (ASID) and press F3 to return to the previous panel. Use the ASID to
determine the job name; the form is xxxx MSTR, where xxxx is the subsystem name.
The following command shows which ASIDs are in the dump data set:
LDMP DSN('SYS1.DUMPxx') SELECT(DUMPED) NOSUMMARY
This shows the storage ranges dumped for each address space.
Press F3 to return to the FORMAT AND DISPLAY THE DUMP panel, and type this name in the
Subsystem name field.
– Address space identifier
Use this field if the data in a dump comes from more than one address space. If you only want to
look at data from a particular address space, specify the identifier (ASID) for that address space.
The default value for this field is ALL, which displays information about all the address spaces
relevant to the subsystem in the dump. Change this field by typing the 4-character ASID over the
value displayed.
Note: Because the dump contains storage areas common to all address spaces, the information
displayed might not be relevant to your problem if you specify the address space identifier
incorrectly. In this case, return to this panel, and enter the correct address space identifier.
274 Troubleshooting and Support for IBM MQ
Related concepts
“Processing an IBM MQ for z/OS dump using line mode IPCS” on page 275
Use the IPCS commands to format a dump.
“Processing an IBM MQ for z/OS dump using IPCS in batch” on page 282
Use this topic to understand how IBM MQ for z/OS dumps can be formatted by IPCS commands in batch
mode.
“Analyzing the dump and interpreting dump titles on z/OS” on page 283
Use this topic to understand how IBM MQ for z/OS dump titles are formatted, and how to analyze a dump.
Processing an IBM MQ for z/OS dump using line mode IPCS
Use the IPCS commands to format a dump.
To format the dump using line mode IPCS commands, select the dump required by issuing the command:
SETDEF DSN('SYS1.DUMP xx ')
(where SYS1.DUMP xx is the name of the data set containing the dump). You can then use IPCS
subcommands to display data from the dump.
See the following topics for information on how to format different types of dumps using IPCS commands:
• “Formatting an IBM MQ for z/OS dump” on page 275
• “Formatting a dump from the channel initiator on z/OS ” on page 281
Related concepts
“Processing a dump using the IBM MQ for z/OS dump display panels” on page 271
You can use commands available through IPCS panels to process dumps. Use this topic to understand the
IPCS options.
“Processing an IBM MQ for z/OS dump using IPCS in batch” on page 282
Use this topic to understand how IBM MQ for z/OS dumps can be formatted by IPCS commands in batch
mode.
“Analyzing the dump and interpreting dump titles on z/OS” on page 283
Use this topic to understand how IBM MQ for z/OS dump titles are formatted, and how to analyze a dump.
Formatting an IBM MQ for z/OS dump
Use this topic to understand how to format a queue manager dump using line mode IPCS commands.
The IPCS VERBEXIT CSQWDMP invokes the IBM MQ for z/OS dump formatting program (CSQWDPRD),
and enables you to format an SVC dump to display IBM MQ data. You can restrict the amount of data that
is displayed by specifying parameters.
IBM Service Personnel might require dumps of your coupling facility administration structure and
application structures for your queue sharing group, with dumps of queue managers in the queue sharing
group, to aid problem diagnosis. For information on formatting a coupling facility list structure, and the
STRDATA subcommand, see the z/OS MVS IPCS Commands manual.
Note: This section describes the parameters required to extract the necessary data. Separate operands
by commas, not blanks. A blank that follows any operand in the control statement terminates the operand
list, and any subsequent operands are ignored. Table 17 on page 275 explains each keyword that you can
specify in the control statement for formatting dumps.
Table 17. Keywords for the IBM MQ for z/OS dump formatting control statement
Keyword Description
SUBSYS= aaaa Use this keyword if the summary dump portion is not available, or not
to be used, to give the name of the subsystem to format information for.
aaaa is a 1 through 4-character subsystem name.
IBM MQ troubleshooting and support 275
Table 17. Keywords for the IBM MQ for z/OS dump formatting control statement (continued)
Keyword Description
ALL (default) All control blocks and the trace table.
AA Data is displayed for all IBM MQ for z/OS control blocks in all address
spaces.
DIAG=Y Print diagnostic information. Use only under guidance from IBM service
personnel. DIAG=N (suppresses the formatting of diagnostic information)
is the default.
EB= nnnnnnnn Only the trace points associated with this EB thread are displayed (the
format of this keyword is EB= nnnnnnnn where nnnnnnnn is the 8-digit
address of an EB thread that is contained in the trace). You must use this
in conjunction with the TT keyword.
LG All control blocks.
PTF=Y, LOAD= load module A list of PTFs at the front of the report (from MEPL). PTF=N (suppresses
name the formatting of such a list) is the default.
The optional load subparameter allows you to specify the name of a load
module, up to a maximum of 8 characters, for which to format a PTF
report.
SA= hhhh The control blocks for a specified address space. Use either of the
following formats:
• SA= hh or
• SA= hhhh
where h represents a hexadecimal digit.
SG A subset of system-wide control blocks.
TT Format trace table
,HANDLES=x Indicate threads with greater than x handles
,LOCKS=x Indicate threads with greater than x locks
,INSYNCS=x Indicate threads with greater than x insync operations
,URINFO=ALL/LONG Show UR info for ALL threads or for long-running threads
Table 18 on page 276 details the dump formatting keywords that you can use to format the data relating
to individual resource managers.
You cannot use these keywords in conjunction with any of the keywords in Table 17 on page 275.
Table 18. Resource manager dump formatting keywords
Keyword What is formatted
BMC=1 Buffer manager data. BMC=1 formats control blocks of all buffers.
BMC=2( buffer pool number ) BMC=2 formats data relating to the buffer identified in the 2-digit buffer
pool number.
BMC=3(xx/yyyyyy)
BMC=4(xx/yyyyyy) BMC=3 and BMC=4 display a page from a page set, if the page is present
in a buffer. (The difference between BMC=3 and BMC=4 is the route
taken to the page.)
BUFL= nnnnnnnnnnn Storage access buffer allocation sz.
276 Troubleshooting and Support for IBM MQ
Table 18. Resource manager dump formatting keywords (continued)
Keyword What is formatted
CALLD=Y Show arrow for call depth in TT.
=W and indent trace entry.
CALLTIME=Y Print call time on exit trace.
CB=(addr/[strmodel]) Format address as IBM MQ block.
CBF=1 CBF report level 1.
CCB=S Show the Composite Capability Block (CCB) for system EBs in TT.