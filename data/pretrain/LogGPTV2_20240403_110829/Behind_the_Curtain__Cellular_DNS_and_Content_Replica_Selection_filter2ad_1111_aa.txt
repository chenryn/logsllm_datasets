title:Behind the Curtain: Cellular DNS and Content Replica Selection
author:John P. Rula and
Fabian E. Bustamante
Behind the Curtain – Cellular DNS and Content Replica
Selection
John P. Rula
Northwestern University
Fabián E. Bustamante
Northwestern Univeristy
ABSTRACT
DNS plays a critical role in the performance of smartdevices within
cellular networks. Besides name resolution, DNS is commonly
relied upon for directing users to nearby content caches for better
performance. In light of this, it is surprising how little is known
about the structure of cellular DNS and its effectiveness as a client
localization method.
In this paper we take a close look at cellular network DNS
and uncover several features of cellular DNS, such as cellular
network opaqueness and client to resolver inconsistency, that make
it unsuitable for client localization in modern cellular networks. We
study these issues in two leading mobile network markets – US and
South Korea – using a collection of over 340 volunteer devices to
probe the DNS infrastructure of each client’s cellular provider.
We show the extent of the problem with regards to replica selec-
tion and compare its localization performance against public DNS
alternatives. As a testament to cellular DNS’s poor localization, we
ﬁnd surprisingly that public DNS can render equal or better replica
performance over 75% of the time.
Categories and Subject Descriptors
C.2 [Computer-Communication Networks]: Distributed Sys-
tems—Distributed Applications; C.4 [Performance of Systems]:
Measurement techniques
General Terms
Experimentation; Measurement; Performance
Keywords
Cellular DNS; Content Delivery Networks; Domain Name System
1.
INTRODUCTION
Smartdevices are becoming the primary or only Internet point
of access for an ever larger fraction of users. Nearly a quarter
of current web trafﬁc is mobile, and recent industry studies have
estimated a fourfold increase in global mobile data trafﬁc by 2018,
Permission to make digital or hard copies of all or part of this work for personal 
or  classroom  use  is  granted  without  fee  provided  that  copies  are  not  made  or 
distributed  for  profit  or  commercial  advantage  and  that  copies  bear this  notice 
and the full citation on the first page. Copyrights for components of this work 
owned by others than the author(s) must be honored. Abstracting with credit is 
permitted. To copy otherwise, or republish, to post on servers or to redistribute to 
lists, requires prior specific permission and/or a fee. Request permissions from 
permissions@acm.org. 
IMC’14, November 5–7, 2014, Vancouver, BC, Canada 
Copyright is held by the owner/author(s). Publication rights licensed to ACM. 
ACM 978-1-4503-3213-2/14/11…$15.00. 
http://dx.doi.org/10.1145/2663716.2663734.
mainly driven by data demands and the growing number of smart
phones and tablets [7].
Content delivery networks (CDNs) are responsible for delivering
most of today’s Internet data. CDNs replicate popular content on
servers worldwide and redirect users to “nearby” replica servers
on demand. The Domain Name System (DNS) is instrumental in
this process since CDN redirection, and thus the performance of
content delivery, is typically based on the location of users’ DNS
resolvers [25].
Considering the importance of content and the critical role
of DNS for both name resolution and localization in today’s
networks, it is somewhat surprising how little is known about
the infrastructure and conﬁguration of cell network DNS and its
impact on content distribution. The 2011 study of Xu et al. [25] is
today’s most comprehensive analysis of (the US) cellular network
infrastructure, combining data from DNS logs, smartphone users
and server logs. For the radio technologies in their study – 3G
UTMS and EVDO – the authors point out the dominant role of
radio latency and the limited number of network ingress points.
They conclude that, in that setting, the best option for content
providers is to locate servers close to these ingress points and that,
given the restricted routing in these cellular networks, choosing
content servers based on local DNS servers is sufﬁciently accurate.
The recent growth of 4G access technologies [7, 12], such as
LTE, radically changes the scene. Around the world service
providers are busy rolling out 4G networks to meet users’ increas-
ing demand for faster, higher bandwidth connections. The most
recent CISCO VNI report estimates that by 2018, the majority of
North America devices and connections will have 4G capability.
While 4G will be 15% of world-wide connections then, these
connections will be responsible for 51% of trafﬁc. When com-
pared with 3G networks, 4G LTE presents a signiﬁcantly different
network, with a radically larger number of ingress points, and offers
much lower radio access latency and variance. We show that these
changes make accurate content replica selection critical to the
performance of end users in cellular networks.
In this paper, we take a close look at cellular network DNS and
replica selection in the two fastest growing 4G LTE markets – US
and South Korea [12]. Using a collection of more than 280,000
experiments from over 340 globally distributed mobile devices, we
probe the DNS infrastructure of each client’s cellular provider and
the content replicas they are redirected toward.
Our analysis shows the impact of network opaqueness and client-
to-resolver inconsistency on the performance of content delivery in
next generation mobile networks. As part of our study, we compare
client/replica mappings through cellular DNS with those achieved
through public DNS alternatives. We show that,
in contrast
to wired networks and despite providers’ knowledge of clients’
59LTE technologies requires cellular operators to make substantial
changes to their core networks, ﬂattening their architectures and
moving to an all-IP network. For example, LTE introduces an
enhanced radio access component, the eNodeB, which removes
the need for previous hierarchical structures such as the Radio
Network Controller (RNC) by combining its functionality into a
single node. These changes are illustrated in Figure 1. LTE also
requires operators to switch over to the Evolved Packet Core (EPC),
which requires an all-IP network [6], reducing the need for legacy,
circuit based technologies.
Perhaps more relevant for content delivery, 4G LTE cellular
networks are increasing the number of ingress/egress locations for
cellular trafﬁc. Prior work looking at cellular network structure
concluded that CDNss had limited options from outside the cellular
network to improve user experience [25]. The signiﬁcant fraction
of radio latency, combined with the limited number of ingress
points into the cellular network, meant that CDNs had little control
over user end-to-end latency. The signiﬁcantly larger number of
ingress points, a trend clear in Zariﬁs et al. [26] and in our own
results (Section 5), means that CDNs have more options for placing
and choosing content caches. These architectural changes and the
radical improvements in radio access technology, suggest it is time
to revisit the effectiveness of content delivery and the impact of
DNS-based server selection in cellular networks.
2.2 Mobile Content Delivery
CDNs host and deliver the large majority of the mobile web
content and, as in the wired Internet, most CDNs use the local DNS
resolver (LDNS) of clients to locate them and ﬁnd nearby replica
servers for content delivery.
When a client requests an object hosted by a CDN, the client’s
local DNS resolver contacts the authoritative DNS (ADNS) of the
domain name run by the CDN. The CDN uses the location of the
client’s DNS resolver as an approximate location for the client, and
redirects the client to content servers nearby. In wired networks,
this approach has been shown to be sufﬁciently accurate except
when paired with certain ISP conﬁgurations or the use of public
DNS services [18].
In cellular networks, however, CDNs have limited client network
localization information. Firewall and NAT policies of cellular
operators prohibit external entities like CDNs from probing clients
or infrastructure in their network. Even if these policies did
not exist, Balakrishnan et al. [3] showed the failure of IP-based
identiﬁcation and geolocation in cellular networks, due in part
to the ephemeral and itinerant nature of mobile client’s IPs –
IPs assignment change rapidly and similar IPs are assigned to
geographically distant devices.
Our experiments uncovered a wide range of performance results
across the CDN replicas seen by clients in cellular networks. Fig-
ure 2 clearly shows this as the CDF of the differential performance
of replica HTTP latency (time-to-ﬁrst-byte) when accessing four
different domains. The CDFs show, for various US and South
Korean carriers, the difference between each replica observed by
clients to their best seen replica.
While the degree of replica differential performance varies based
on carrier and domain, we ﬁnd replica latency increases ranging
from 50% to 100% in all networks. In an extreme case, we ﬁnd
clients experiencing over 400% increases in latency in over 40% of
the access to some key web sites.
3. METHODOLOGY OVERVIEW
Our analysis is based on data collected by end-user devices
through two mobile apps sharing a common measurement exper-
Figure 1: Network architecture changes cellular networks between
2/3G and LTE networks. LTE introduces a simpler, ﬂatter network
structure and an all-IP network.
locations, public DNS and the DNS of cell network providers yield
comparable performance for replica selection.
In summary, our major contributions are:
• After describing our data sources and data collection method-
ology in Section 3, we detail the results of our investigation
into cellular network DNS structure and behavior in Sec-
tion 4.
• We present the ﬁrst analysis of the interaction between
cellular DNS and content replica selection in 4G networks
in Section 5.
• We present the ﬁrst comparison between cellular DNS and
public DNS in resolution and replica selection performance
in Section 6
We discuss the impact of cellular provider DNS and our ﬁnding’s
implications in content delivery networks in Section 7. We review
closely related work in Section 8 and conclude in Section 9. We are
making all our data available to the community from our project
website.1
2. BACKGROUND AND MOTIVATION
In this section, we give an overview of current cellular infras-
tructure, the changes ongoing across cellular networks as they
transition toward Long-Term Evolution (LTE) networks, and how
these changes point toward the need for more intelligent replica
selection for cellular devices.
2.1 Cellular Network Architecture
LTE has been growing rapidly since its entering the market
in 2009. Service providers are busy rolling out 4G LTE net-
works to meet users’ increasing demand for faster, higher band-
width connections. LTE promises speeds up 150/75 Mbps of
downstream/upstream throughput, signiﬁcantly faster than what
is possible in existing 3G networks. The 2014 CISCO VIN
report estimates that, by 2018, the majority of North America
devices and connections will have 4G capability. Transitioning to
1http://aqualab.cs.northwestern.edu/projects/atolls
Radio	
  Access	
  Network	
  Cellular	
  Core	
  SGSN	
  SGSN	
  GGSN	
  GGSN	
  Internet	
  Radio	
  Access	
  Network	
  RNC	
  RNC	
  nodeB	
  nodeB	
  nodeB	
  nodeB	
  Evolved	
  Packet	
  Core	
  (EPC)	
  eNodeB	
  SGW	
  eNodeB	
  SGW	
  PDN	
  GW	
  PDN	
  GW	
  3G	
  Cellular	
  Network	
  Structure	
  LTE	
  Cellular	
  Network	
  Structure	
  60(a) US Carriers
(b) SK Carriers
Figure 2: Client observed performance of all replica servers seen. For each user in our dataset, each replica is represented as the percent
increase in mean latency of each server compared to the “best” replica seen by that user. Users are consistently directed towards replica
servers with latencies 100% greater than other existing replicas.
# Clients Country
Carrier
33
AT&T
9
Sprint
31
T-Mobile
Verizon
64
SKTelecom 17
LG U+
4
US
US
US
US
SK
SK
Table 1: Distribution of measurement clients for the mobile
operators proﬁled in our paper.
imentation library. The following paragraphs describe our mea-
surement platform, experiments and measurement methodology.
3.1 Data Sources
The measurements used in this paper come from over 348 glob-
ally distributed Android mobile clients running our measurement
application. The data was collected from two mobile applications
posted to Google’s Play Store, each packaged with the same
network measurement library. For the purpose of this paper, we
restricted our dataset to the 158 clients reporting to be in the top
four cellular providers within the US, Sprint, Verizon Wireless, T-