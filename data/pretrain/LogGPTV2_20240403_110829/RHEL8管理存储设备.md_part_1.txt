[]{#index.html}
::: book
::: titlepage
::: producttitle
[Red Hat Enterprise Linux]{.productname} [8]{.productnumber}
:::
# []{#index.html#idm140531487108256}管理存储设备 {.title}
## 在 Red Hat Enterprise Linux 8 中部署和配置单节点存储 {.subtitle}
::: authorgroup
[Red Hat]{.orgname} [Customer Content Services]{.orgdiv}
:::
::: legalnotice
[]{#index.html#idm140531487790096}
Copyright []{.trademark}© 2021 Red Hat, Inc.
The text of and illustrations in this document are licensed by Red Hat
under a Creative Commons Attribution--Share Alike 3.0 Unported license
(\"CC-BY-SA\"). An explanation of CC-BY-SA is available at
`http://creativecommons.org/licenses/by-sa/3.0/`{.uri}. In accordance
with CC-BY-SA, if you distribute this document or an adaptation of it,
you must provide the URL for the original version.
Red Hat, as the licensor of this document, waives the right to enforce,
and agrees not to assert, Section 4d of CC-BY-SA to the fullest extent
permitted by applicable law.
Red Hat, Red Hat Enterprise Linux, the Shadowman logo, the Red Hat logo,
JBoss, OpenShift, Fedora, the Infinity logo, and RHCE are trademarks of
Red Hat, Inc., registered in the United States and other countries.
[Linux]{.trademark}® is the registered trademark of Linus Torvalds in
the United States and other countries.
[Java]{.trademark}® is a registered trademark of Oracle and/or its
affiliates.
[XFS]{.trademark}® is a trademark of Silicon Graphics International
Corp. or its subsidiaries in the United States and/or other countries.
[MySQL]{.trademark}® is a registered trademark of MySQL AB in the United
States, the European Union and other countries.
[Node.js]{.trademark}® is an official trademark of Joyent. Red Hat is
not formally related to or endorsed by the official Joyent Node.js open
source or commercial project.
The [OpenStack]{.trademark}® Word Mark and OpenStack logo are either
registered trademarks/service marks or trademarks/service marks of the
OpenStack Foundation, in the United States and other countries and are
used with the OpenStack Foundation\'s permission. We are not affiliated
with, endorsed or sponsored by the OpenStack Foundation, or the
OpenStack community.
All other trademarks are the property of their respective owners.
:::
::: abstract
**摘要**
本文档提供如何有效管理 Red Hat Enterprise Linux 8 中的存储设备的步骤。
:::
------------------------------------------------------------------------
:::
:::
[]{#making-open-source-more-inclusive.html}
::: preface
::: titlepage
# []{#making-open-source-more-inclusive.html#making-open-source-more-inclusive}使开源包含更多 {.title}
:::
红帽承诺替换我们的代码、文档和网页属性中存在问题的语言。我们从这四个术语开始：
master、slave、blacklist 和
whitelist。这些更改将在即将发行的几个发行本中逐渐实施。如需了解更多详细信息，请参阅
[CTO Chris Wright
信息](https://www.redhat.com/en/blog/making-open-source-more-inclusive-eradicating-problematic-language){.link}。
:::
[]{#proc_providing-feedback-on-red-hat-documentation_managing-storage-devices.html}
::: preface
::: titlepage
# []{#proc_providing-feedback-on-red-hat-documentation_managing-storage-devices.html#proc_providing-feedback-on-red-hat-documentation_managing-storage-devices}对红帽文档提供反馈 {.title}
:::
我们感谢您对文档提供反馈信息。请让我们了解如何改进文档。要做到这一点：
::: itemizedlist
-   关于特定内容的简单评论：
    ::: orderedlist
    1.  请确定您使用 [*Multi-page HTML*]{.emphasis}
        格式查看文档。另外，确定 [**Feedback**]{.strong}
        按钮出现在文档页的右上方。
    2.  用鼠标指针高亮显示您想评论的文本部分。
    3.  点在高亮文本上弹出的 [**Add Feedback**]{.strong}。
    4.  按照显示的步骤操作。
    :::
-   要提交更复杂的反馈，请创建一个 Bugzilla ticket：
    ::: orderedlist
    1.  进入
        [Bugzilla](https://bugzilla.redhat.com/enter_bug.cgi?product=Red%20Hat%20Enterprise%20Linux%208){.link}
        网站。
    2.  在 Component 中选择 [**Documentation**]{.strong}。
    3.  在 [**Description**]{.strong}
        中输入您要提供的信息。包括文档相关部分的链接。
    4.  点 [**Submit Bug**]{.strong}。
    :::
:::
:::
[]{#available-storage-options-overview_managing-storage-devices.html}
::: chapter
::: titlepage
# []{#available-storage-options-overview_managing-storage-devices.html#available-storage-options-overview_managing-storage-devices}第 1 章 可用存储选项概述 {.title}
:::
Red Hat Enterprise Linux 8 中提供了多个本地、远程和基于集群的存储选项。
本地存储意味着存储设备安装在系统上或直接附加到系统。
使用远程存储时，设备可以通过
LAN、互联网或使用光纤通道网络进行访问。[高级别 Red Hat Enterprise Linux
存储图描述了不同的存储选项](#available-storage-options-overview_managing-storage-devices.html#High-Level-RHEL-Storage-Diagram_overview-of-available-storage-options "图 1.1. 高级别 Red Hat Enterprise Linux 存储图"){.link}。
::: figure
[]{#available-storage-options-overview_managing-storage-devices.html#High-Level-RHEL-Storage-Diagram_overview-of-available-storage-options}
**图 1.1. 高级别 Red Hat Enterprise Linux 存储图**
::: figure-contents
::: mediaobject
![高级别 RHEL 存储图](images/High-Level-RHEL-Storage-Diagram.png)
:::
:::
:::
::: section
::: titlepage
# []{#available-storage-options-overview_managing-storage-devices.html#local-storage-overview_overview-of-available-storage-options}本地存储概述 {.title}
:::
Red Hat Enterprise Linux 8 提供多个本地存储选项。
::: variablelist
[基本磁盘管理]{.term}
:   使用 `parted`{.literal} 和
    `fdisk`{.literal}，您可以创建、修改、删除和查看磁盘分区。以下是分区布局标准：
    ::: variablelist
    [主引导记录（MBR）]{.term}
    :   它用于基于 BIOS 的计算机。您可以创建主分区、扩展分区及逻辑分区。
    [GUID 分区表（GPT）]{.term}
    :   它使用全局唯一标识符(GUID)，提供唯一磁盘和 GUID 分区。
    :::
    要加密分区，您可以使用 Linux Unified Key
    Setup-on-disk-format（LUKS）。要加密分区，选择安装过程中的选项，系统会显示输入密码短语的提示。这个密码短语用于解锁加密密钥。
[存储消耗选项]{.term}
:   ::: variablelist
    [Non-Volatile Dual In-line Memory Modules（NVDIMM）管理]{.term}
    :   它是内存和存储的组合。您可以在连接到您的系统的 NVDIMM
        设备中启用和管理各种存储类型。
    [块存储管理]{.term}
    :   数据以块形式存储，每个块都有唯一的标识符。
    [文件存储]{.term}
    :   数据存储在本地系统中的文件级别。这些数据可使用 XFS（默认）或者
        ext4 本地访问，并使用 NFS 和 SMB 通过网络访问。
    :::
[逻辑卷]{.term}
:   ::: variablelist
    [逻辑卷管理器（LVM）]{.term}
    :   它从物理设备中创建逻辑设备。逻辑卷(LV)是物理卷(PV)和卷组(VG)的组合。配置
        LVM 包括：
        ::: itemizedlist
        -   从硬盘创建 PV。
        -   从 PV 创建 VG。
        -   从 VG 创建 LV，分配挂载点到 LV。
        :::
    [Virtual Data Optimizer（VDO）]{.term}
    :   它被用来通过重复数据删除（deduplication）、压缩和精简置备来减少数据。在
        LV 下使用 VDO 可以帮助：
        ::: itemizedlist
        -   扩展 VDO 卷
        -   通过多个设备生成 VDO 卷
        :::
    :::
[本地文件系统]{.term}
:   ::: variablelist
    [XFS]{.term}
    :   默认 RHEL 文件系统。
    [ext4]{.term}
    :   传统的文件系统。
    [Stratis]{.term}
    :   它只是一个技术预览。Stratis
        是一个支持高级存储功能的混合用户和内核本地存储管理系统。
    :::
:::
:::
::: section
::: titlepage
# []{#available-storage-options-overview_managing-storage-devices.html#remote-storage-overview_overview-of-available-storage-options}远程存储概述 {.title}
:::
以下是 Red Hat Enterprise Linux 8 中的远程存储选项：
::: variablelist
[存储连接选项]{.term}
:   ::: variablelist
    [iSCSI]{.term}
    :   RHEL 8 使用 targetcli 工具来添加、删除、查看和监控 iSCSI
        存储间的连接。
    [光纤频道（FC）]{.term}
    :   Red Hat Enterprise Linux 8 提供以下原生光纤频道驱动程序：
        ::: itemizedlist
        -   `lpfc`{.literal}
        -   `qla2xxx`{.literal}
        -   `Zfcp`{.literal}
        :::
    [Non-volatile Memory Express（NVMe）]{.term}
    :   允许主机软件实用程序与固态驱动器通信的接口。使用以下类型的光纤传输来通过光纤配置
        NVMe：
        ::: itemizedlist
        -   NVMe over fabrics 使用远程直接内存访问(RDMA)。
        -   使用光纤通道(FC)的 NVMe over fabrics.
        :::
    [设备映射器多路径（DM 多路径）]{.term}
    :   允许您将服务器节点和存储阵列间的多个 I/O
        路径配置为单一设备。这些 I/O
        路径是可包含独立电缆、交换机和控制器的物理 SAN 连接。
    :::
[网络文件系统]{.term}
:   ::: itemizedlist
    -   NFS
    -   SMB
    :::
:::
:::
::: section
::: titlepage
# []{#available-storage-options-overview_managing-storage-devices.html#gfs2-file-system-overview_overview-of-available-storage-options}GFS2 文件系统概述 {.title}
:::
Red Hat Global File System 2 (GFS2) 是一个 64
位对称集群文件系统，它提供了一个共享名称空间，并管理共享一个常见块设备的多个节点间的一致性。GFS2
文件系统旨在提供尽量与本地文件系统类似的功能，同时在节点间强制实施完整集群一致性。为达到此目的，节点在文件系统资源中使用集群范围的锁定方案。这个锁定方案使用
TCP/IP 等通讯协议来交换锁定信息。
在某些情况下，Linux 文件系统 API 不允许具有集群特性的 GFS2
完全透明。例如，在 GFS2 中使用 POSIX 锁定的程序应该避免使用
`GETLK`{.literal} 功能，因为在集群的环境中，该进程 ID
可能用于集群中的不同节点。然而,多数情况下 GFS2
文件系统的功能和本地文件系统的功能是一样的。
Red Hat Enterprise Linux (RHEL) Resilient Storage Add-On提供
GFS2，它依赖于 RHEL High Availability 附加组件来提供 GFS2
所需的集群管理功能。
`gfs2.ko`{.literal} 内核模块实施 GFS2 文件系统，并在 GFS2
集群节点中载入。
要获得最佳 GFS2
性能，请务必考虑基础设计中给出的性能注意事项。和本地文件系统一样，GFS2
依赖于页面缓存以便通过本地缓存来提高经常使用数据的性能。为了在集群中的节点间保持一致性，缓存控制由
[*glock*]{.emphasis} 状态机器提供。
::: itemizedlist
**其它资源**
-   [配置 GFS2
    文件系统](https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/configuring_gfs2_file_systems/index){.link}
:::
:::
::: section
::: titlepage
# []{#available-storage-options-overview_managing-storage-devices.html#gluster-storaeg-overview_overview-of-available-storage-options}Gluster 存储概述 {.title}
:::
红帽 Gluster
存储(RHGS)是一款软件定义型存储平台，可在集群中部署。它将多个服务器的磁盘存储资源整合到单一全局命名空间中。GlusterFS
是一种开源分布式文件系统，适用于云和混合解决方案。
卷构成了 GlusterFS 的基础，并提供不同的要求。每个卷是 brick
的集合，它们是基本存储单元，由受信存储池中服务器上的导出目录表示。
可用的 GlusterFS 卷类型如下：
::: itemizedlist
-   [**分布式 GlusterFS 卷是每个文件存储在一个**]{.strong} brick
    中的默认卷，文件不能在不同 brick 之间共享。
-   [**复制的 GlusterFS 卷类型复制用户数据**]{.strong}，使得一个 brick
    出现故障时仍然可以访问该数据。
-   [**分布式复制 GlusterFS
    卷是一个混合卷**]{.strong}，可在大量系统上分发副本。它适用于存储可扩展性和高可靠性至关重要的环境。
:::
::: itemizedlist
**其它资源**
-   [Red Hat gluster