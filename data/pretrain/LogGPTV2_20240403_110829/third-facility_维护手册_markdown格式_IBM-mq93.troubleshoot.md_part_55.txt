For more information, see “SYS1.LOGREC information on z/OS” on page 286.
3.Send the information that you have collected to IBM.
A good description of the problem and the data is the most important information you can provide to
IBM. Do not send data without providing a description!
For FTP and email instructions, see Exchanging information with IBM Software Support.
To open or update a case, go to the IBM My Support site.
Note: Always update your case to indicate that data was sent.
If you need to speak with IBM Software Support, contact your country representative. If you need to
speak with IBM Software Support in the US, you can call 1-800-IBM-SERV.
Related tasks
“Troubleshooting distributed queue management problems” on page 76
352 Troubleshooting and Support for IBM MQ
Troubleshooting information to help you solve problems relating to distributed queue management
(DQM).
Sending troubleshooting information to IBM
After you have generated and collected troubleshooting information for a problem, you can send it to IBM
to help with problem determination for a support case.
About this task
When you are sending troubleshooting information, a good description of the problem and the data is the
most important information you can provide to IBM. Do not send data without providing a description!
Procedure
• For FTP and email instructions, see Exchanging information with IBM Software Support for problem
determination.
• Go to the IBM My Support site to open or update a case.
Note: Always update your case to indicate that data was sent.
For more information about IBM Support, including how to register for support, see the IBM Support
Guide.
• If you need to speak with IBM Software Support, contact your country representative. If you need to
speak with IBM Software Support in the US, you can call 1-800-IBM-SERV.
Related tasks
“Collecting troubleshooting information automatically with runmqras” on page 303
If you need to send IBM MQ troubleshooting information to IBM Support, you can use the runmqras
command to gather the information together into a single archive.
“Collecting troubleshooting information manually” on page 306
In some cases, you might need to collect troubleshooting information manually, for example if you are
running an older version of IBM MQ or cannot use the runmqras command to collect troubleshooting
information automatically.
Using error logs
There are a variety of error logs that you can use to help with problem determination and troubleshooting.
On Multiplatforms, use the following links to find out about the error logs available for your
platform and how to use them:
• “Error logs on AIX, Linux, and Windows” on page 355
• “Error logs on IBM i” on page 358
On z/OS error messages are written to:
• The z/OS system console
• The channel-initiator job log
For information about error messages, console logs, and dumps on IBM MQ for z/OS, see
“Troubleshooting IBM MQ for z/OS problems” on page 247.
For information about error logs in IBM MQ classes for JMS, see “Error logs in IBM MQ classes for JMS” on
page 361.
Suppressing or excluding messages from error logs
It is possible to suppress or exclude some messages on both Multiplatforms and z/OS systems:
IBM MQ troubleshooting and support 353
• For information on suppressing some messages on Multiplatforms, see “Suppressing
channel error messages from error logs on Multiplatforms” on page 362.
• On z/OS, if you are using the z/OS message processing facility to suppress messages, the
console messages can be suppressed. For more information, see IBM MQ for z/OS concepts.
AMQ_DIAGNOSTIC_MSG_SEVERITY environment variable
If the environment variable AMQ_DIAGNOSTIC_MSG_SEVERITY is set for an IBM MQ process, when that
IBM MQ process writes a message to an error log or to the console, the message severity is appended to
the message number as a single uppercase alphabetic character as follows:
Table 24. Key to message severity identifiers
Type of message Character
Informational (0) I
Warning (10) W
Error (20 or 30) E
Severe (40) S
Termination (50) T
For example:
AMQ5051I: The queue manager task 'LOGGER-IO' has started.
AMQ7075W: Unknown attribute foo at /var/mqm/qmgrs/QM1/qm.ini in
the configuration data.
AMQ9510E: Messages cannot be retrieved from a queue.
AMQ8506S: Command server MQGET failed with reason code 2009.
AMQ8301T: IBM MQ storage monitor job could not be started.
Notes:
1.Because the queue manager writes messages, the environment variable has to be set in the
environment where the queue manager is started. This is especially important on Windows, where
it might be the Windows service that starts the queue manager.
2.AMQ_DIAGNOSTIC_MSG_SEVERITY also affects messages printed by a program.
The behavior that AMQ_DIAGNOSTIC_MSG_SEVERITY enables is set by default. You can turn off this
behavior by setting the environment variable to 0.
Note that the new services always add the severity character.
ISO 8601 Time
From IBM MQ 9.1, the message time is included in ISO 8601 format, rather than in local time.
When IBM MQ processes write a message to an error log, the message time in ISO 8601 format, in
Coordinated Universal Time (UTC), is included as a Time() attribute.
For example, where the Z time zone indicates UTC:
11/04/2017 07:37:59 - Process(1) User(X) Program(amqzmuc0.exe)
Host(JOHNDOE) Installation(MQNI09000200)
VRMF(9.0.2.0) QMgr(QM1)
Time(2017-04-11T07:37:59.976Z)
354 Troubleshooting and Support for IBM MQ
Rename on Rollover
Prior to IBM MQ 9.1, when AMQERR01.LOG reaches the maximum configured size, AMQERR02.LOG is
renamed to be AMQERR03.LOG. The contents of AMQERR01.LOG are then copied into AMQERR02.LOG,
and AMQERR01.LOG is truncated to empty. This meant that it was possible for certain tools to miss
messages that the tool has not processed, before those messages were copied into AMQERR02.LOG.
From IBM MQ 9.1, the logic is changed, so that AMQERR01.LOG is renamed to AMQERR02.LOG.
Related concepts
“First Failure Support Technology (FFST)” on page 363
First Failure Support Technology (FFST) for IBM MQ provides information about events that, in the case of
an error, can help IBM support personnel to diagnose the problem.
Related tasks
“Tracing” on page 375
You can use different types of trace to help you with problem determination and troubleshooting.
“Contacting IBM Support” on page 301
If you need help with a problem that you are having with IBM MQ, you can contact IBM Support through
the IBM Support Site. You can also subscribe to notifications about IBM MQ fixes, troubleshooting, and
other news.
Error logs on AIX, Linux, and Windows
The errors subdirectory, which is created when you install IBM MQ on AIX, Linux, and Windows, can
contain up to three error log files.
At installation time, an errors subdirectory is created in the /var/mqm file path under AIX and Linux
systems, and in the installation directory, for example C:\Program Files\IBM\MQ\ file path under
Windows systems. The errors subdirectory can contain up to three error log files named:
• AMQERR01.LOG
• AMQERR02.LOG
• AMQERR03.LOG
For more information about directories where log files are stored, see “Error log directories on AIX, Linux,
and Windows” on page 357.
After you have created a queue manager, it creates three error log files when it needs them. These files
have the same names as those files in the system error log directory. That is, AMQERR01, AMQERR02,
and AMQERR03, and each has a default capacity of 32 MB (33554432 bytes). The capacity can be altered
in the Extended queue manager properties page from the IBM MQ Explorer, or in the QMErrorLog
stanza in the qm.ini file. These files are placed in the errors subdirectory in the queue manager
data directory that you selected when you installed IBM MQ or created your queue manager. The
default location for the errors subdirectory is /var/mqm/qmgrs/ qmname file path under AIX and
Linux systems, and C:\Program Files\IBM\MQ\qmgrs\ qmname \errors file path under Windows
systems.
As error messages are generated, they are placed in AMQERR01. When AMQERR01 gets bigger than 32
MB it is renamed to AMQERR02.
The latest error messages are thus always placed in AMQERR01, the other files being used to maintain a
history of error messages.
All messages relating to channels are also placed in the appropriate error files belonging to the queue
manager, unless the queue manager is unavailable, or its name is unknown. In which case, channel-
related messages are placed in the system error log directory.
To examine the contents of any error log file, use your usual system editor.
IBM MQ troubleshooting and support 355
An example of an error log
Figure 54 on page 356 shows an extract from an IBM MQ error log:
17/11/2014 10:32:29 - Process(2132.1) User(USER_1) Program(runmqchi.exe)
Host(HOST_1) Installation(Installation1)
VRMF(8.0.0.0) QMgr (A.B.C)
AMQ9542: Queue manager is ending.
EXPLANATION:
The program will end because the queue manager is quiescing.
ACTION:
None.
----- amqrimna.c : 931 -------------------------------------------------------
Figure 54. Sample IBM MQ error log
Operator messages
Operator messages identify normal errors, typically caused directly by users doing things like using
parameters that are not valid on a command. Operator messages are national-language enabled, with
message catalogs installed in standard locations.
These messages are written to the associated window, if any. In addition, some operator messages are
written to the AMQERR01.LOG file in the queue manager directory, and others to the equivalent file in the
system error log directory.
Error log access restrictions
Certain error log directories and error logs have access restrictions.
To gain the following access permissions, a user or application must be a member of the mqm group:
• Read and write access to all queue manager error log directories.
• Read and write access to all queue manager error logs.
• Write access to the system error logs.
If an unauthorized user or application attempts to write a message to a queue manager error log
directory, the message is redirected to the system error log directory.
Ignoring error codes under AIX and Linux systems
On AIX and Linux systems, if you do not want certain error messages to be
written to a queue manager error log, you can specify the error codes that are to be ignored using the
QMErrorLog stanza.
For more information, see Queue manager error logs.
Ignoring error codes under Windows systems
On Windows systems, the error message is written to both the IBM MQ error log and
the Windows Application Event Log. The error messages written to the Application Event Log includes
messages of error severity, warning severity and information severity. If you do not want certain error
messages to be written to the Windows Application Event Log, you can specify the error codes that are to
be ignored in the Windows registry.
Use the following registry key:
HKLM\Software\IBM\WebSphere MQ\Installation\MQ_INSTALLATION_NAME\IgnoredErrorCodes
where MQ_INSTALLATION_NAME is the installation name associated with a particular installation of IBM
MQ.
356 Troubleshooting and Support for IBM MQ
The value that you set it to is an array of strings delimited by the NULL character, with each string value
relating to the error code that you want ignored from the error log. The complete list is terminated with a
NULL character, which is of type REG_MULTI_SZ.
For example, if you want IBM MQ to exclude error codes AMQ3045, AMQ6055, and AMQ8079 from the
Windows Application Event Log, set the value to:
AMQ3045\0AMQ6055\0AMQ8079\0\0
The list of messages you want to exclude is defined for all queue managers on the machine. Any changes
you make to the configuration will not take effect until each queue manager is restarted.
Related concepts
“Error logs on z/OS” on page 361
On z/OS, error messages are written to the z/OS system console and the channel-initiator job log.
“First Failure Support Technology (FFST)” on page 363
First Failure Support Technology (FFST) for IBM MQ provides information about events that, in the case of
an error, can help IBM support personnel to diagnose the problem.
Related tasks
“Tracing” on page 375
You can use different types of trace to help you with problem determination and troubleshooting.
Related reference
“Error logs on IBM i” on page 358
Use this information to understand the IBM MQ for IBM i error logs.
Messages and reason codes
Error log directories on AIX, Linux, and Windows
IBM MQ uses a number of error logs to capture messages concerning its own operation of IBM MQ, any
queue managers that you start, and error data coming from the channels that are in use. The location of
the error logs depends on whether the queue manager name is known and whether the error is associated
with a client.
The location the error logs are stored in depends on whether the queue manager name is known and
whether the error is associated with a client. MQ_INSTALLATION_PATH represents the high level directory
where IBM MQ is installed.
• If the queue manager name is known, the location of the error log is shown in Table 25 on page 357.
Table 25. Queue manager error log directory
Platform Directory
/var/mqm/qmgrs/ qmname /errors
AIX
and Linux systems
MQ_INSTALLATION_PATH\QMGRS\ qmname
Windows systems
\ERRORS\AMQERR01.LOG
• If the queue manager name is not known, the location of the error log is shown in Table 26 on page 357.
Table 26. System error log directory
Platform Directory
/var/mqm/errors
AIX
and Linux systems
IBM MQ troubleshooting and support 357
Table 26. System error log directory (continued)
Platform Directory
MQ_INSTALLATION_PATH\QMGRS\@SYSTEM\ERRORS\AMQERR01
Windows systems
.LOG
• If an error has occurred with a client application, the location of the error log on the client is shown in
Table 27 on page 358.
Table 27. Client error log directory
Platform Directory
/var/mqm/errors
AIX
and Linux systems
MQ_DATA_PATH\ERRORS\AMQERR01.LOG
Windows systems
In IBM MQ for Windows, an indication of the error is also added to the Application Log,
which can be examined with the Event Viewer application provided with Windows systems.
Early errors
There are a number of special cases where these error logs have not yet been established and an error
occurs. IBM MQ attempts to record any such errors in an error log. The location of the log depends on how
much of a queue manager has been established.
If, because of a corrupt configuration file for example, no location information can be determined, errors
are logged to an errors directory that is created at installation time on the root directory ( /var/mqm or
C:\Program Files\IBM\MQ).
If IBM MQ can read its configuration information, and can access the value for the Default Prefix,
errors are logged in the errors subdirectory of the directory identified by the Default Prefix attribute.
For example, if the default prefix is C:\Program Files\IBM\MQ, errors are logged in C:\Program
Files\IBM\MQ\errors.
For further information about configuration files, see Changing IBM MQ configuration information on
Multiplatforms..
Note: Errors in the Windows Registry are notified by messages when a queue manager is started.
Error logs on IBM i
Use this information to understand the IBM MQ for IBM i error logs.
By default, only members of the QMQMADM group can access error logs. To give users access to error
logs, who are not members of this group, set ValidateAuth to No and grant those users *PUBLIC
authority. See Filesystem for more information.
IBM MQ uses a number of error logs to capture messages concerning the operation of IBM MQ itself, any
queue managers that you start, and error data coming from the channels that are in use.
At installation time, a /QIBM/UserData/mqm/errors subdirectory is created in the IFS.
The location of the error logs in the IFS depends on whether the queue manager name is known:
• If the queue manager name is known and the queue manager is available, error logs are located in:
/QIBM/UserData/mqm/qmgrs/qmname/errors
• If the queue manager is not available, error logs are located in:
358 Troubleshooting and Support for IBM MQ
/QIBM/UserData/mqm/errors
You can use the system utility EDTF to browse the errors directories and files. For example:
EDTF '/QIBM/UserData/mqm/errors'
Alternatively, you can use option 23 against the queue manager from the WRKMQM panel.
The errors subdirectory can contain up to three error log files named:
• AMQERR01.LOG
• AMQERR02.LOG
• AMQERR03.LOG
After you have created a queue manager, three error log files are created when they are needed by
the queue manager. These files have the same names as the /QIBM/UserData/mqm/errors ones,
that is AMQERR01, AMQERR02, and AMQERR03, and each has a capacity of 2 MB (2 097 152 bytes).
The files are placed in the errors subdirectory of each queue manager that you create, that is /QIBM/
UserData/mqm/qmgrs/qmname/errors.
As error messages are generated, they are placed in AMQERR01. When AMQERR01 gets bigger than 2 MB
(2 097 152 bytes), it is copied to AMQERR02. Before the copy, AMQERR02 is copied to AMQERR03.LOG.
The previous contents, if any, of AMQERR03 are discarded.
The latest error messages are thus always placed in AMQERR01, the other files being used to maintain a
history of error messages.
All messages relating to channels are also placed in the appropriate errors files of the queue manager,
unless the name of their queue manager is unknown or the queue manager is unavailable. When the