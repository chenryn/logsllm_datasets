[27] Marwan Fayed, Lorenz Bauer, Vasileios Giotsas, Sami Kerola, Marek Majkowski,
Pavel Odinstov, Jakub Sitnicki, Taejoong Chung, Dave Levin, Alan Mislove,
Christopher A. Wood, and Nick Sullivan. 2021. The Ties that un-Bind: Decoupling
IP from Web Services and Sockets for Robust Addressing Agility at CDN-Scale.
In Proceedings of the 2021 ACM SIGCOMM Conference (Online). ACM.
[28] Hongyu Gao, Vinod Yegneswaran, Jian Jiang, Yan Chen, Phillip Porras, Shalini
Ghosh, and Haixin Duan. 2014. Reexamining DNS from a Global Recursive
SIGCOMM ‚Äô21, August 23‚Äì27, 2021, Virtual Event, USA
name/
Resolver Perspective. IEEE/ACM Transactions on Networking (Oct. 2014).
[29] Manaf Gharaibeh, Han Zhang, Christos Papadopoulos, and John Heidemann.
2016. Assessing Co-locality of IP Blocks. In Proceedings of 19ùë°‚Ñé IEEE Global
Internet Symposium (San Francisco, CA, USA). IEEE.
[30] Danilo Giordano, Danilo Cicalese, Alessandro Finamore, Marco Mellia, Maurizio
Munaf√≤, Diana Zeaiter Joumblatt, and Dario Rossi. 2016. A First Characterization
of Anycast Traffic from Passive Traces. In Network Traffic Measurement and
Analysis Conference (TMA) (Louvain la Neuve, Belgium). IFIP/ACM.
[31] Google. 2020. Google Public DNS. developers.google.com/speed/public-dns
[32] Google. 2021. Cloud Load Balancing. cloud.google.com/load-balancing
[33] GTmetrix. 2019. The Top 1,000 Sites on the Internet. gtmetrix.com/top1000.html
[34] Wes Hardaker. 2020. What‚Äôs in a Name? blog.apnic.net/2020/04/13/whats-in-a-
[35] John Heidemann, Katia Obraczka, and Joe Touch. 1997. Modelling the Perfor-
mance of HTTP Over Several Transport Protocols. ACM/IEEE Transactions on
Networking (Oct. 1997).
[36] Chi-Yao Hong, Srikanth Kandula, Ratul Mahajan, Ming Zhang, Vijay Gill, Mohan
Nanduri, and Roger Wattenhofer. 2013. Achieving High Utilization with Software-
Driven WAN. In Proceedings of the 2013 ACM SIGCOMM Conference (Hong Kong).
ACM.
[37] Geoff Huston. 2014. How Big is that Network? labs.apnic.net/?p=526
[38] IANA. 2020. IANA IPv4 Special-Purpose Address Registry. iana.org/assignments/
iana-ipv4-special-registry/iana-ipv4-special-registry.xhtml
[39] IANA. 2020. Root Servers. root-servers.org
[40] ICANN. 2020. Packet Clearing House.
[41] MaxMind Inc. 2020. IP Geolocation. maxmind.com/en/geoip2-databases
[42] Sushant Jain, Alok Kumar, Subhasree Mandal, Joon Ong, Leon Poutievski, Arjun
Singh, Subbaiah Venkata, Jim Wanderer, Junlan Zhou, and Min Zhu. 2013. B4:
Experience with a Globally-Deployed Software Defined WAN. In Proceedings of
the 2013 ACM SIGCOMM Conference (Hong Kong). ACM.
icannwiki.org/Packet_Clearing_House
[43] Yuchen Jin, Sundararajan Renganathan, Ganesh Ananthanarayanan, Junchen
Jiang, Venkata N Padmanabhan, Manuel Schroder, Matt Calder, and Arvind
Krishnamurthy. 2019. Zooming in on Wide-Area Latencies to a Global Cloud
Provider. In Proceedings of the 2019 ACM SIGCOMM Conference. ACM.
[44] Jaeyeon Jung, Emil Sit, Hari Balakrishnan, and Robert Morris. 2002. DNS Perfor-
mance and the Effectiveness of Caching. IEEE/ACM Transactions on networking
(Feb. 2002).
[45] Dina Katabi and John Wroclawski. 2000. A Framework for Global IP-Anycast
(GIA). In Proceedings of the 2000 ACM SIGCOMM Conference (Stockholm, Sweden).
ACM.
[46] Ethan Katz-Bassett, John P. John, Arvind Krishnamurthy, David Wetherall,
Thomas Anderson, and Yatin Chawathe. 2006. Towards IP Geolocation Using De-
lay and Topology Measurements. In Proceedings of the 2006 Internet Measurement
Conference (IMC) (Rio de Janeiro, Brazil). ACM.
[47] Rupa Krishnan, Harsha V. Madhyastha, Sridhar Srinivasan, Sushant Jain, Arvind
Krishnamurthy, Thomas Anderson, and Jie Gao. 2009. Moving Beyond End-to-
End Path Information to Optimize CDN Performance. In Proceedings of the 2009
Internet Measurement Conference (IMC) (Chicago, IL, USA). ACM.
[48] W. Kumari and P. Hoffman. 2020. Running a Root Server Local to a Resolver.
Technical Report 8806. Internet Request For Comments. www.rfc-editor.org/
rfc/rfc8806.txt
[49] Matthew Lentz, Dave Levin, Jason Castonguay, Neil Spring, and Bobby Bhat-
tacharjee. 2013. D-mystifying the D-root Address Change. In Proceedings of the
2013 Internet Measurement Conference (IMC) (Barcelona, Spain). ACM.
[50] Zhihao Li. 2019. Diagnosing and Improving the Performance of Internet Anycast.
Ph.D. Dissertation. University of Maryland, College Park.
[51] Zhihao Li, Dave Levin, Neil Spring, and Bobby Bhattacharjee. 2018. Internet
Anycast: Performance, Problems, & Potential. In Proceedings of the 2018 ACM
SIGCOMM Conference (Budapest, Hungary). ACM.
[52] Jinjin Liang, Jian Jiang, Haixin Duan, Kang Li, and Jianping Wu. 2013. Measuring
Query Latency of Top Level DNS Servers. In International Conference on Passive
and Active Network Measurement (PAM) (Hong Kong). Springer.
[53] Zhuoqing Morley Mao, Charles Cranor, Fred Douglis, Michael Rabinovich, Oliver
Spatscheck, and Jia Wang. 2002. A Precise and Efficient Evaluation of the Prox-
imity Between Web Clients and their Local DNS Servers. In USENIX Annual
Technical Conference (Monterey, CA, USA). USENIX.
[54] Stephen McQuistin, Sree Priyanka Uppu, and Marcel Flores. 2019. Taming Any-
cast in the Wild Internet. In Proceedings of the 2019 Internet Measurement Confer-
ence (IMC) (Amsterdam, Netherlands). ACM.
[55] Christopher Metz. 2002. IP Anycast Point-To-(Any) Point Communication. IEEE
[56] P. Mockapetris. 1987. Domain Names - Implementation and Specification.
ietf.
Internet Computing (Aug. 2002).
org/rfc/rfc1035.txt
[57] Giovane C. M. Moura, John Heidemann, Wes Hardaker, Jeroen Bulten, Joao Ceron,
and Cristian Hesselman. 2020. Old But Gold: Prospecting TCP to Engineer DNS
Anycast (extended). ISI-TR-740, USC/Information Sciences Institute, Tech. Report
(2020).
SIGCOMM ‚Äô21, August 23‚Äì27, 2021, Virtual Event, USA
[58] Giovane C. M. Moura, Ricardo de Oliveira Schmidt, John Heidemann, Wouter B.
de Vries, Moritz Muller, Lan Wei, and Cristian Hesselman. 2016. Anycast vs.
DDoS: Evaluating the November 2015 Root DNS Event. In Proceedings of the 2016
Internet Measurement Conference (IMC) (Santa Monica, CA, USA). ACM.
[59] Mozilla. 2020. Window: Load Event. developer.mozilla.org/en-US/docs/Web/
API/Window/load_event
[60] Moritz M√ºller, Giovane C. M. Moura, Ricardo de Oliveira Schmidt, and John
Heidemann. 2017. Recursives in the Wild: Engineering Authoritative DNS Servers.
In Proceedings of the 2017 Internet Measurement Conference (IMC) (London, United
Kingdom). ACM.
[61] RIPE NCC. 2006. Evaluating The Effects Of Anycast On DNS Root Nameservers.
ripe.net/publications/docs/ripe-393#efficiency
[62] RIPE NCC. 2018. Hosting a K-root Node. ripe.net/analyse/dns/k-root/hosting-
a-k-root-node
[63] OpenDNS. 2020. Data Center Locations. opendns.com/data-center-locations/
[64] Craig Partridge, Trevor Mendez, and Walter Milliken. 1993. Host Anycasting
Service.
tools.ietf.org/html/rfc1546
[65] Matthew Prince. 2013. Load Balancing without Load Balancers. blog.cloudflare.
com/cloudflares-architecture-eliminating-single-p/
[66] Jan R√ºth, Christian Bormann, and Oliver Hohlfeld. 2017. Large-Scale Scanning of
TCP‚Äôs Initial Window. In Proceedings of the 2017 Internet Measurement Conference
(IMC) (London, United Kingdom).
[67] Sandeep Sarat, Vasileios Pappas, and Andreas Terzis. 2006. On the Use of Anycast
in DNS. In Proceedings of the ACM SIGMETRICS Conference (Banff, Canada). ACM.
[68] Brandon Schlinker, Hyojeong Kim, Timothy Cui, Ethan Katz-Bassett, Harsha V.
Madhyastha, Italo Cunha, James Quinn, Saif Hasan, Petr Lapukhov, and Hongyi
Zeng. 2017. Engineering Egress with Edge Fabric: Steering Oceans of Content to
the World. In Proceedings of the 2017 ACM SIGCOMM Conference (Los Angeles,
CA, USA). ACM.
[69] Ricardo de Oliveira Schmidt, John Heidemann, and Jan Harm Kuipers. 2017.
Anycast Latency: How Many Sites Are Enough? In International Conference on
Passive and Active Network Measurement (PAM) (Sydney, Australia). Springer.
[70] Neil Spring, Ratul Mahajan, and Thomas Anderson. 2003. The Causes of Path
Inflation. In Proceedings of the 2003 conference on Applications, technologies, ar-
chitectures, and protocols for computer communications (Karlsruhe, Germany).
ACM.
[71] RIPE NCC Staff. 2015. RIPE Atlas: A Global Internet Measurement Network.
Internet Protocol Journal (2015).
[72] Srikanth Sundaresan, Nazanin Magharei, Nick Feamster, Renata Teixeira, and Sam
Crawford. 2013. Web Performance Bottlenecks in Broadband Access Networks.
In Proceedings of the ACM SIGMETRICS Conference (Pittsburgh, PA, USA). ACM.
[73] Matthew Thomas. 2020. Chromium‚Äôs Impact on Root DNS Traffic. blog.apnic.
net/2020/08/21/chromiums-impact-on-root-dns-traffic
[74] Verisign. 2021. FAQ on RIRS Node Hosting.
names/internet-resolution/node-hosting/index.xhtml
verisign.com/en_US/domain-
[75] Verizon. 2020. verizondigitalmedia.com/media-platform/delivery/network/
[76] Lan Wei, Marcel Flores, Harkeerat Bedi, and John Heidemann. 2020. Bidirec-
tional Anycast/Unicast Probing (BAUP): Optimizing CDN Anycast. In Network
Operations and Management Symposium (Online). IEEE/IFIP.
[77] Lan Wei and John Heidemann. 2017. Does Anycast Hang Up on You? In Network
Traffic Measurement and Analysis Conference (TMA) (Dublin, Ireland). IFIP/ACM.
[78] Florian Wohlfart, Nikolaos Chatzis, Caglar Dabanoglu, Georg Carle, and Walter
Willinger. 2018. Leveraging Interconnections for Performance: The Serving In-
frastructure of a Large CDN. In Proceedings of the 2018 ACM SIGCOMM Conference
(Budapest, Hungary). ACM.
[79] Young Xu. 2017. 2017 Update: Comparing Root Server Performance Glob-
ally. thousandeyes.com/blog/2017-update-comparing-root-server-performance-
globally/
[80] Kok-Kiong Yap, Murtaza Motiwala, Jeremy Rahe, Steve Padgett, Matthew Holli-
man, Gary Baldus, Marcus Hines, Taeeun Kim, Ashok Narayanan, Ankur Jain,
et al. 2017. Taking the Edge off with Espresso: Scale, Reliability and Programma-
bility for Global Internet Peering. In Proceedings of the 2017 ACM SIGCOMM
Conference (Los Angeles, CA, USA). ACM.
[81] Yingdi Yu, Duane Wessels, Matt Larson, and Lixia Zhang. 2012. Authority Server
Selection in DNS Caching Resolvers. ACM SIGCOMM Computer Communication
Review (April 2012).
[82] Yaping Zhu, Benjamin Helsley, Jennifer Rexford, Aspi Siganporia, and Sridhar
Srinivasan. 2012. LatLong: Diagnosing Wide-Area Latency Changes for CDNs.
IEEE Transactions on Network and Service Management (2012).
SIGCOMM ‚Äô21, August 23‚Äì27, 2021, Virtual Event, USA
latency. This decision has a significant effect on conclusions we can
draw, decreasing daily query counts to root DNS resolution by 20√ó.
We base this decision on prior work which investigated the
nature of queries with invalid TLDs landing at the roots. ICANN
has found that 28% of queries for non-existent domains at L root
result from captive-portal detection algorithms in Chromium-based
browsers [4]. Researchers at USC have found that more than 90% of
single-string (not separated by dots) queries at the root match the
Chromium captive-portal pattern [34]. We remove captive-portal
detection queries from consideration since they occur on browser
startup and network reconnect, not during regular browsing, and
they can occur in parallel with browsing.
Some might argue that queries for invalid TLDs are associated
with user latency because typos for URLs (when typing into a
browser search bar, for example) cause users to generate a query
to the root servers. However, typos only generate a query to the
root server if the TLD is misspelled (as opposed to the hostname).
Hence typos, in general, cause users latency, but only specific typos
will cause users root latency. Moreover, prior work has found that
approximately 60% of queries for invalid TLDs reaching root servers
are for domains such as local, no_dot, belkin, and corp [28]. It is
unlikely these queries are caused by typos, since they are actual (as
opposed to misspelled) words and resemble domains often seen in
software or in corporate networks. Chromium queries and queries
for a certain set of invalid TLDs therefore account for around 86%
of all queries for invalid TLDs at the roots, suggesting the vast
majority of queries we exclude are not directly associated with user
latency.
Nevertheless, it is still valuable to assess how including these
queries for invalid TLDs changes the conclusions we can make
about root DNS latency experienced by users. Figure 8 shows daily
user latencies due to root DNS resolution when we include requests
for invalid TLDs and PTR records in daily query volumes. Using
CDN user counts, users experience a median of 22 queries to the
root DNS each day ‚Äì about 20√ó more than when we exclude requests
for invalid queries (¬ß4). This drastic 20-fold increase is surprising
given we only (roughly) double the amount of queries by including
invalid queries. The difference is best explained by the fact that
a majority of invalid queries are generated by /24s with a large
number of users. Since the y-axis of Figure 8 is the number of users
(not /24s), counting invalid queries shifts the graph far to the right.
Hence, counting invalid queries drastically affects the conclusions
we can draw. There is a less severe 6-fold increase in the number
of queries per user per data calculated using APNIC data. Overall,
including invalid TLD queries drastically changes our quantitative
conclusions about user interaction with the root DNS but may not
change our qualitative conclusions, since 20 queries a day to the
roots is still small.
B.2 Representativeness of Daily Root Latency
Analysis
In Section 4 we estimate the number of queries users experience due
to the root DNS by amortizing queries over user populations. To
obtain estimates of user populations, we obtain counts of Microsoft
users who use recursives (¬ß2.1). Naturally recursives used by Mi-
crosoft users and recursives seen in DITL do not overlap perfectly.
Figure 8: Daily queries by users to the root DNS, calculated by amor-
tizing root DNS requests over user populations, when including or
excluding queries for invalid TLDs. Counting invalid queries dras-
tically increases median daily query counts to 22 ( CDN ), a 20-fold
increase, or to 6 ( APNIC ), a 6-fold increase, depending on which user
data we use.
Appendices are supporting material that has not been peer-
reviewed.
A SUMMARY OF DATA
We use a myriad of datasets in the work, which is a result of our
presenting answers to the questions we pose in several different
ways (each with strengths and weaknesses). This approach allows
us to overcome the limitations of individual datasets, by combining
multiple views with different tradeoffs. To aid in comprehensibility,
we summarize each of our datasets in Table 2 and Table 3.
As an example of how we use multiple views with different
tradeoffs, consider the differences between the DITL packet traces
(containing 51.9 billion queries across 50,000 ASes) and our local
DNS / activity measurements (10 thousand measurements, 2 users).
DITL allows us to see, globally, how recursive resolvers interact
with the root DNS, allowing us to make definitive statements about
global inflation and query volumes. However, DITL does not tell
us how individual users interact with the root DNS, and translat-
ing DITL queries to user experience requires heuristic arguments
about caching (¬ß4.3). Our local DNS and activity measurements,
although limited, give us precise reference points for how root DNS
factors into everyday Internet browsing experience, which we find
valuable.
B QUANTIFYING THE IMPACT OF
METHODOLOGICAL DECISIONS
When analyzing latency and inflation, we often make assumptions
or choose to conduct analysis a certain way. In what follows, we jus-
tify our various assumptions and pre-processing steps, and analyze
the effects of these assumptions on our results.
B.1 Effect of Removing Invalid TLD Queries
In Section 4 we estimate the number of queries users experience
due to the root DNS by amortizing queries over user populations.
Out of 51.9 billion daily requests to all roots, we observe 31 billion
daily requests for bogus domain names and 2 billion daily requests
for PTR records. We choose to not count these towards user query
counts, because we believe many of these queries do not lie on the
critical path of user applications and so do not cause user-facing
10‚àí310‚àí210‚àí1100101102103Queries per User per Day0.00.20.40.60.81.0CDF of UsersIdealCDNAPNICSIGCOMM ‚Äô21, August 23‚Äì27, 2021, Virtual Event, USA
Dataset
Sampled CDN Server-Side Logs (¬ß6)
Sampled CDN Client-Side Measurements (¬ß5.2)