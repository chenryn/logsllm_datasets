left histogram is for ﬂows greater than 3 packets in length, the middle for those greater
than 50 and the right histogram is for ﬂows greater than 100 packets in length. We
notice that LTFs are more common in ﬂows with a larger number of packets
2. Over 75% of ﬂows having over 50 packets contain LTFs. We identify fairly
large LTFs of up to 16 IATUs, i.e., with an average of 40 packet or more, thus
verifying Conjecture 3 — that LTFs could potentially be large (and hence be
identiﬁed as CRFs). What we observe in such cases are aggregations of two
or three packets being transmitted at a constant rate. Thus, our algorithm
oﬀers a simple means of identifying CRFs. If we consider a ﬂow to be a CRF
A Study of Burstiness in TCP Flows
23
if it has over 30 packets in equally spaced aggregations, then about 12-15%
of ﬂows are constant-rate ﬂows. These ﬂows are clearly not limited by PC
clock speed, as Brownlee and Claﬀy also observe in [8].
3. From the statistics on the number of ﬂights seen in ﬂows we conclude that
many ﬂows are composed of fairly small deterministic packet aggregations
at the large timescale, which indicates that the congestion window in these
ﬂows grows only up to 10-12 packets before feedback from the network causes
it to reduce. Thus, large time scale structure is lost with the growth of TCP
congestion windows.
4 Relationship with Network Environment
We now study the relation between ﬂights and the characteristics of the path
that a ﬂow traverses, namely the round trip time (RTT), the bandwidth and the
BDP. Our usage of the term RTT is to indicate the entire path delay inclusive
of queuing delays. We measure RTT by the syn-ack method whose validity has
been largely established in [9].
We ﬁrst consider STFs. We already know that the majority of them are two
packets in size, irrespective of ﬂow size. We would like to know if any network
characteristics aﬀect STFs larger than two packets. If their origin has to do with
delayed acks, i.e., the source constrains them to be small, then the variation of
their occurrence with the network parameters should not be signiﬁcant. In Fig.
10, we show a probability histogram (×100%) of STFs larger than two packets
in size in diﬀerent RTT regimes. We see that the chance of seeing an STF larger
than two packets is about 1% regardless of the RTT.
i
l
n
b
r
a
u
c
i
t
r
a
p
a
n
i
F
T
S
n
a
g
n
e
e
s
f
i
o
)
0
0
1
x
(
y
t
i
l
i
b
a
b
o
r
P
1.4
1.2
1
0.8
0.6
0.4
0.2
0
100
101
102
103
104
105
106
107
Round trip Time (ms)
Fig. 10. Fraction of traﬃc having STFs larger than two packets in each RTT regime
for BB1-2002. The variation is about 0.4% indicating the independence of STFs and
RTT
24
S. Shakkottai, N. Brownlee, and k claﬀy
c
i
l
n
b
r
a
u
c
i
t
r
a
p
a
n
i
F
T
S
n
a
g
n
e
e
s
f
i
o
)
0
0
1
x
(
y
t
i
l
i
b
a
b
o
r
P
1.4
1.2
1
0.8
0.6
0.4
0.2
0
100
101
102
103
104
105
106
107
108
Bandwidth (bps)
Fig. 11. Fraction of traﬃc having STFs in each bandwidth regime for BB1-2002. The
ﬂat nature indicates that the probability of seeing an STF is independent of bandwidth
5
4.5
4
3.5
3
2.5
2
1.5
1
0.5
i
e
z
s
F
T
L
e
g
a
r
e
v
A
0
101
102
103
Bandwidth delay product (bits)
104
105
106
Fig. 12. Variation of LTF sizes as a function of BDP for BB1-2002. The plot peaks
at high BDP. Note that the number of data points drops sharply after the peak, and
hence the graph ends here
We next examine the relation between STFs and bandwidth (Fig. 11). By
‘bandwidth’, we mean the total bytes transferred divided by the lifetime of the
ﬂow. Here too the probability (×100%) of seeing at least one STF larger than two
packets in size for any particular bandwidth is nearly constant at 1%. We also
analyzed the frequency of seeing at least one STF with more than two packets
with regard to BDP and found that the probability (×100%) of this event too
was about 1%, with a variation of less than 0.5%.
We now study the variation of LTF sizes as a function of BDP, which we show
in Fig. 12. We see that on average, LTF sizes are higher at higher BDP. The
A Study of Burstiness in TCP Flows
25
graph peaks at 10 kb with an average LTF size of 5 (i.e. most ﬂows in this regime
had LTFs consisting of of 12 or more packets). The number of available points
is small after the peak and the graph dips sharply. The above facts support
Conjecture 4 — high BDP is conducive to LTFs being large — since it means
that the network has the capacity to absorb the large windows of packets.
5 Conclusion
We studied deterministic temporal relations between TCP packets using several
packet traces, which were from diﬀerent backbone ﬁbers and represent a large
fraction of ASs and preﬁxes. Such traces give an indication of Internet traﬃc
characteristics, since phenomena occurring at the edges are reﬂected in tempo-
ral relations between packets at the measurement point. We studied aggregation
of packets at two time scales (of the order of 5-10 ms and 50-1000 ms) in order
to verify our hypothesis that two distinct facets of TCP structure should give
rise to two diﬀerent types of temporal relations. In doing so we proposed a sim-
ple threshold algorithm for identiﬁcation of ﬂights. Our TCP model predicted
that high BDP environments would be conducive to CRFs. Such an environ-
ment could exist only if the network were over-provisioned — either in terms
of large buﬀers or large bandwidth — and hence CRFs are indicative of excess
resource in the network. Through statistics on ﬂight sizes and frequency, we ver-
iﬁed Conjectures 1 and 3 — that STFs should be short and LTFs can be long.
We then veriﬁed Conjectures 2 and 4 — that STFs should not depend on the
network environment, whereas LTFs should be beneﬁted by large BDPs — by
studying the correlations between ﬂights and diﬀerent network parameters. We
thus showed that Hypothesis 1 and 2 — delayed-acks giving rise to STFs and
window dynamics giving rise to LTFs — are valid. We concluded that about
12 − 15% of Internet ﬂows in our traces do not operate in a congestion control
region. In the future we would like to study how the occurrence of ﬂights changes
over the years both on the backbone as well as access links, to understand ﬂights
as indicators of excess network resource. Such a study would give us an idea of
whether congestion on the Internet has been increasing or decreasing over time.
Acknowledgment
The authors would like to acknowledge Andre Broido (CAIDA) for his participa-
tion in many of the discussions that led to this work. This research was funded
in part by NSF grant ANI-0221172.
References
1. Stevens, R.: TCP/IP illustrated, Vol.1, Addison-Wesley (1994)
2. Paxson, V.E.: Measurements and Analysis of End-to-End Internet Dynamics.
PhD dissertation, University of California, Lawrence Berkeley National Laboratory
(1997)
26
S. Shakkottai, N. Brownlee, and k claﬀy
c
3. Sarvotham, S., Riedi, R., Baraniuk, R.: Connection-level analysis and modeling of
network traﬃc. In: Proceedings of IMW 2001. (2001)
4. Padhye, J., Firoiu, V., Towsley, D., Krusoe, J.: Modeling TCP throughput: A simple
model and its empirical validation. In: Proceedings of ACM SIGCOMM ’98. (1998)
5. Zhang, Y., Breslau, L., Paxson, V., Shenker, S.: On the Characteristics and Origins
of Internet Flow Rates. In: Proceedings of ACM SIGCOMM. (2002)
6. Downey, A.: TCP Self-Clocking. Technical Report TR-2003-002, Olin College,
Computer Science (2003)
7. Abilene: Trace obtained from the NLANR PMA webpage (URL below) (2002)
http://pma.nlanr.net/Traces/long/ipls1.html.
8. Brownlee, N., Claﬀy, K.C.: Understanding Internet Streams: Dragonﬂies & Tor-
toises. IEEE Communications Magazine (2002)
9. Aikat, J., Kaur, J., Smith, F., Jeﬀay, K.: Variability in TCP round-trip times. In:
Proceedings of IMW. (2003)