aliases cannot reach outside these boundaries.
FTP service in Mac OS X Server expands the restricted environment to allow access to 
symbolic links while still providing a secure FTP environment. You can allow FTP users 
access to the FTP root directory, their home directory, or to any other directory on the 
server that you set up as an FTP share point.
A user’s access to the FTP root directory, FTP share points, and their home directory is 
determined by the user environment you specify (as described in the following section) 
and by their access privileges.
LL2346.Book  Page 75  Friday, August 22, 2003  2:38 PM
76
Chapter 6    FTP Service
FTP Users
FTP supports two types of users:
• Authenticated users  have accounts on your server (and might even have their 
home directories stored on the server). Some FTP software refers to these as real 
users. An authenticated user must provide a user name and password to access 
server files using FTP. You use the Accounts module of Workgroup Manager to review 
or set up authenticated users. 
• Anonymous users  do not have accounts on your server. They are also called guest 
users (for example, in Workgroup Manager when you set up an FTP share point). An 
anonymous user can access the FTP directories on the server files using the common 
user name “anonymous” and their email address, which may be fictitious, as their 
password. You use the General pane of FTP service settings in Server Admin to allow 
anonymous access to your server.
The FTP Root Directory
The FTP root directory (or simply FTP root) is a portion of your server’s disk space set 
aside for FTP users. When you first install the server software, the FTP root is set to 
/Library/FTPServer/FTPRoot. You can change the FTP root; see “Changing the FTP Root 
Directory” on page 88.
FTP User Environments
Mac OS X Server lets you choose from three different FTP environments that give users 
access to some combination of the FTP root directory, other FTP share points, and user 
home directories:
• FTP root and Share Points.
• Home Directory with Share Points
• Home Directory Only
Share points in this case are any share points you have set up in Workgroup Manager 
to be shared using FTP.
Home directories are the home directories of users who have accounts on the server.
You can choose the user environment for your server in the Advanced pane of the FTP 
service settings in Server Admin. See “Changing Advanced Settings” on page 85. 
LL2346.Book  Page 76  Friday, August 22, 2003  2:38 PM
Chapter 6    FTP Service
77
FTP Root and Share Points
The “FTP Root and Share Points” option gives access—for both authenticated and 
anonymous users—to the FTP root and any FTP share points to which the users have 
access privileges, as shown in the following figure.
Users access FTP share points through symbolic links attached to the FTP Root 
directory. The symbolic links are created automatically when you create the FTP share 
points. 
Note that in this example, /Users, /Volumes/Data, and /Volumes/Photos are FTP share 
points. All users can see the home directories of other users because they are 
subdirectories of the Users share point.
Important:  Regardless of the user environment setting, anonymous users and users 
without home directories are always logged into the “FTP Root and Share Points” 
environment.
etc
system
Library
Data
Volumes
FTP server
FTP root
FTP Root
Looks like “/ ”
to anonymous
FTP users
Looks like “/ ”
when accessing
as user “Bob”
Looks like “/ ”
when accessing
as user “Betty”
FTP share point
incorporated 
within virtual root
Data
Betty
Bob
Users
Photos
Photos
Symbolic link
bin
FTP Root
LL2346.Book  Page 77  Friday, August 22, 2003  2:38 PM
78
Chapter 6    FTP Service
Home Directory With Share Points
When the user environment option is set to “Home Directory with Share Points,” 
authenticated users log in to their home directories and have access to the FTP root by 
means of a symbolic link automatically created in their home directories. Users access 
other FTP share points through symbolic links in the FTP root. As always, access to the 
FTP share points is controlled by user access privileges.
In this scenario, the /Users folder is not an FTP share point and users are not able to see 
the home directories of other users.
If you change the FTP root, the symbolic link in a user’s home directory reflects that 
change. For example, if you change the FTP root to /Volumes/Extra/NewRoot, the 
symbolic link created in the user’s home directory would be called NewRoot.
bin
etc
system
Library
Data
Volumes
FTP 
server
FTP root
Looks like “/ ”
FTP share point
incorporated  
within virtual root
Data
Betty
Bob
Users
Photos
Photos
Share point
Symbolic link
Users
LL2346.Book  Page 78  Friday, August 22, 2003  2:38 PM
Chapter 6    FTP Service
79
Home Directory Only
When you choose this option, authenticated users are confined to their home 
directories and do not have access to the FTP root or other FTP share points, as shown 
in the following illustration.
Anonymous users and users without home directories still have access to the FTP root 
and FTP share points. To keep these users from seeing the home directories of 
authenticated users, the /Users folder is not set up as an FTP share point.
bin
etc
system
Library
Data
Volumes
FTP server
FTP root
Reports
Betty
Bob
Users
Projects
Photos
FTP share point
incorporated  
within virtual root
Data
Photos
Share point
Symbolic link
Looks like “/ ”
to anonymous
FTP users
LL2346.Book  Page 79  Friday, August 22, 2003  2:38 PM
80
Chapter 6    FTP Service
On-the-Fly File Conversion
FTP service in Mac OS X Server allows users to request compressed or decompressed 
versions of information on the server. A file-name suffix such as “.Z” or “.gz” indicates 
that the file is compressed. If a user requests a file called “Hamlet.txt” and the server 
only has a file named “Hamlet.txt.Z,” it knows that the user wants the decompressed 
version, and delivers it to the user in that format.
In addition to standard file compression formats, FTP in Mac OS X Server has the ability 
to read files from either HFS or non-HFS volumes and convert the files to MacBinary 
(.bin) format. MacBinary is one of the most commonly used file compression formats 
for the Macintosh operating system.
The table below shows common file extensions and the type of compression they 
designate.
Files With Resource Forks
You can encourage Mac OS X clients to take advantage of on-the-fly conversion to help 
them transfer files created using older file systems that store information in resource 
forks. If you enable MacBinary and disk image auto-conversion in FTP service settings, 
files with resource forks will be listed as .bin files on the FTP clients. When a client asks 
to have one of these files transferred, on-the-fly conversion will recognize the .bin suffix 
and convert the file to a genuine .bin file for transfer.
Kerberos Authentication
FTP supports Kerberos authentication. You choose the authentication method using 
the General pane of the FTP service settings. See “Changing General Settings” on 
page 83.
FTP service specifications
• Maximum number of connected users (the default setting is 50 for authenticated 
users and 50 for anonymous users):  1000
• FTP port number:  21
• Number of failed login attempts before user is disconnected:  3
File extension
What it means
.gz
DEFLATE compression
.Z
UNIX compress
.bin
MacBinary encoding
.tar
UNIX tar archive
.tZ
UNIX compressed tar archive
.tar.Z
UNIX compressed tar archive
.crc
UNIX checksum file
.dmg
Mac OS X disk image
LL2346.Book  Page 80  Friday, August 22, 2003  2:38 PM
Chapter 6    FTP Service
81
Before You Set Up FTP Service
Consider the type of information you need to share and who your clients are when 
determining whether or not to offer FTP service. FTP works well when you want to 
transfer large files such as applications and databases. In addition, if you want to allow 
guest (anonymous) users to download files, FTP is a secure way to provide this service.
Server Security and Anonymous Users
Enabling anonymous FTP poses a security risk to your server and data because you 
open your server to users that you do not know. The access privileges you set for the 
files and folders on your server are the most important way you can keep information 
secure.
Anonymous FTP users are only allowed to upload files into a special directory named 
“uploads” in the FTP root. If the uploads share point doesn’t exist, anonymous users will 
not be able to upload files at all. 
To ensure the security of your FTP server, by default anonymous users cannot:
• Delete files
• Rename files
• Overwrite files
• Change permissions of files
LL2346.Book  Page 81  Friday, August 22, 2003  2:38 PM
82
Chapter 6    FTP Service
Setup Overview
Here is an overview of the basic steps for setting up FTP service. 
Step 1:  Before You Begin
Read “Before You Set Up FTP Service” on page 81 for issues you should keep in mind 
when you set up FTP service.
Step 2:  Configure FTP General settings
The General settings let you display banner and welcome messages, set the number of 
login attempts, and provide an administrator email address. See “Changing General 
Settings” on page 83.
Step 3:  Configure FTP Messages settings
The Access settings let you specify the number of authenticated and anonymous users 
that can connect to the server. See “Changing the Greeting Messages” on page 84.
Step 4:  Configure FTP Logging settings
The Logging settings let you specify the FTP-related events you want to log for 
authenticated and anonymous users. See “Choosing Logging Options” on page 84.
Step 5:  Configure FTP Advanced settings
The Advanced settings let you change the FTP root and choose which items user can 
see. See “Changing Advanced Settings” on page 85.
Step 6:  Create an “uploads” folder for anonymous users (optional)
If you enabled anonymous access in Step 2, you may want to create a folder for 
anonymous users to upload files. The folder must be named “uploads.” It is not a share 
point, but must have appropriate access privileges. See “Creating an Uploads Folder for 
Anonymous Users” on page 85.
Step 7:  Create share points and share them using FTP
Use the Sharing module of Workgroup Manager to specify the share points that you 
want to make available through FTP. You must explicitly configure a share point to use 
FTP in order for FTP users to be able to access the share point. See “Creating a Share 
Point and Setting Privileges” on page 22 and “Changing FTP Settings for a Share Point” 
on page 25.
Step 8:  Start FTP service
After you have configured FTP, start the service to make it available. See “Starting FTP 
Service” on page 86.
LL2346.Book  Page 82  Friday, August 22, 2003  2:38 PM
Chapter 6    FTP Service
83
Setting Up File Transfer Protocol (FTP) Service
You use the Server Admin application to set up and enable FTP service.
Changing General Settings
You can use the General settings to limit the number of login attempts, provide an 
administrator email address, and limit the number and type of users.
Changes you make to FTP service settings affect only new connections. Users who are 
currently connected will not see the changes.
To configure the FTP General settings:
1 Open Server Admin and select FTP in the Computers & Services list.
2 Click Settings (near the bottom of the window), then click General.
3 To change the number of times a user can try to connect before they are disconnected, 
type a number in “Disconnect after __ failed login attempts.”
4 To provide a contact for your users, type an email address following “FTP administrator 
email address.”
5 Under Access, choose a method from the Authentication pop-up menu.
6 Type a number in the “Allow a maximum of __ authenticated users” field to limit the 
number of authenticated users who can connect to your server at the same time. 
Authenticated users have accounts on the server. You can view or add them using the 
Accounts module of Workgroup Manager.
7 Select “Enable anonymous access” to allow anonymous users to connect to the server. 
Anonymous users can log in using the name “ftp” or “anonymous.” They do not need a 
password to log in, but they will be prompted to enter their email addresses.
Before selecting this option, you should review the privileges assigned to your share 
points carefully to make sure there are no security holes. 
8 Type a number in the “Allow a maximum of __ anonymous users” field to limit the 
number of anonymous users who can connect to your server at the same time.
9 To have files with resource forks listed with a .bin suffix so that clients will take 
advantage of automatic file conversion when transferring them, select “Enable 
MacBinary and Disk Image auto-conversion.”
10 Click Save.
From the Command Line
You can also change FTP service settings using the serveradmin command in 
Terminal. For more information, see the file services chapter of the command-line 
administration guide.
LL2346.Book  Page 83  Friday, August 22, 2003  2:38 PM
84
Chapter 6    FTP Service
Changing the Greeting Messages
Users see the banner message when they first contact your server (before they log in) 
and the welcome message when they log in.
To change the banner and welcome messages:
1 Open Server Admin and select FTP in the Computers & Services list.
2 Click Settings (near the bottom of the window), then click Messages.
3 Edit the message text.
4 Select “Show banner message” and “Show welcome message.”
5 Click Save.
From the Command Line
You can also change the FTP service banner message using the serveradmin 
command in Terminal or by editing the files /Library/FTPServer/Messages/banner.txt 
and /Library/FTPServer/Messages/welcome.txt. For more information, see the file 
services chapter of the command-line administration guide.
Choosing Logging Options
The Logging settings let you choose which FTP-related events to record.
For either authenticated or anonymous users, you can record:
• Uploads
• Downloads
• FTP commands
• Rule violation attempts
To configure the FTP Logging settings:
1 Open Server Admin and select FTP in the Computers & Services list.
2 Click Settings (near the bottom of the window), then click Logging.
3 In the “Log authenticated users” section, select events you want to record in the FTP 
log for authenticated users.
4 In the “Log anonymous users” section, select events you want to record in the FTP log 
for anonymous users. 
5 Click Save.
To view the log, select FTP in Server Admin and click Log.
From the Command Line
You can also change the FTP service logging settings using the serveradmin 
command in Terminal. For more information, see the file services chapter of the 
command-line administration guide.
LL2346.Book  Page 84  Friday, August 22, 2003  2:38 PM
Chapter 6    FTP Service
85
Changing Advanced Settings
The Advanced settings let you specify the directories that FTP users can access.
You can change the FTP root directory and choose whether users see the FTP root and 
share points, home directories and share points, or home directories only. 
To configure the FTP Advanced settings:
1 Open Server Admin and select FTP in the Computers & Services list.
2 Click Settings (near the bottom of the window), then click Advanced.
3 For “Authenticated users see,” choose the type of user (chroot) environment you want 
to use:  FTP Root and Share Points, Home Directory with Share Points, or Home 
Directory Only.
For more information, see “FTP Users” on page 76.
4 To change the FTP root, enter the pathname in the FTP Root field.
For more information, see “The FTP Root Directory” on page 76.
From the Command Line
You can also change the FTP service settings using the serveradmin command in 
Terminal. For more information, see the file services chapter of the command-line 
administration guide.
Creating an Uploads Folder for Anonymous Users
The uploads folder provides a place for anonymous users to upload files to the FTP 
server. It must exist at the top level of the FTP root directory and be named “uploads.” 
(If you have changed the FTP root directory, then the uploads folder must be at the 
root of that directory.) 
To create an uploads folder for anonymous users:
1 Use the Finder to create a folder named “uploads” at the top level of your server’s FTP 
root directory.
2 Set privileges for the folder to allow guest users to write to it. 
From the Command Line
You can set up an FTP upload directory using the mkdir and chmod commands in 
Terminal. For more information, see the file services chapter of the command-line 
administration guide.
LL2346.Book  Page 85  Friday, August 22, 2003  2:38 PM
86
Chapter 6    FTP Service
Starting FTP Service
Start FTP file service to make the service available to your client users.
To start FTP service:
1 Open Server Admin and select FTP in the Computers & Services list.
2 Click Start Service (near the top of the window).
From the Command Line
You can also start the FTP service using the serveradmin command in Terminal. For 
more information, see the file services chapter of the command-line administration 
guide.
Managing FTP Service
This section describes how to perform typical day-to-day management tasks for FTP 