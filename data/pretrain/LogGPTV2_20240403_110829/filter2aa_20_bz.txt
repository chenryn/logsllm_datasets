### 8.3 安全性需求和测试

#### 8.3.1 安全性 Bug 的需求

安全性 Bug 的需求往往比较模糊，即使在 RFP（请求提案书）中详细描述，如果无法通过测试验证，这些需求也难以实现。为了更具体地向承包商提出要求，可以考虑以下几点：

- **列举需应对的漏洞名称**：明确列出需要处理的具体漏洞。
- **验收方法和标准**：详细说明如何验证这些安全措施是否有效，并设定具体的验收标准。
- **追加对策提案**：如果需要额外的安全措施，要求承包商提供相应的建议。
- **测试方法和结果**：要求承包商提供安全性能测试的方法说明，并将测试结果作为项目交付物提交。
- **漏洞应对及费用承担**：明确项目验收后发现漏洞时的应对方法及费用承担情况。
- **开发体制说明**：要求承包商对开发流程和管理机制进行详细说明。
- **开发标准和测试报告样本**：要求承包商提供开发标准和安全性测试报告的样本。

#### 专栏：谁应该对安全漏洞负责？

关于安全漏洞的责任归属问题，笔者认为，在委托开发模式下，风险责任应主要由发包方承担。原因在于，需求文档是由发包方提供的，且法律上未明确规定应用程序出现漏洞时的责任划分。经济产业省发布的《信息系统、交易模型与合同》中指出，系统设计文档中未明确记载的内容不能视为缺陷。因此，发包方应在合同和需求文档中明确标注安全性要求。

尽管如此，承包方也有责任采取必要的安全措施。即使客户未明确提出安全需求，承包方也应主动解释其重要性，并将其纳入 RFP 中。

#### 8.3.2 需求分析注意事项

在需求分析阶段，工作的主体转向承包方。此阶段应分别整理安全功能和安全漏洞的需求。

- **定义安全功能**：发包方需在需求中明确定义安全功能。
- **基于承包方标准**：建议以承包方的开发标准为基础来应对安全漏洞。如果不遵循承包方的标准，则需要对开发者进行再培训，这会增加成本。通过对比客户需求和承包方标准，逐步完善项目开发标准。

此外，需求分析还应包括：
- 用户认证、账号管理和授权管理的需求
- 日志管理的需求
- 其他安全性功能需求
- 选择基础软件和打补丁的方法
- 开发标准与安全性需求间的差距分析

#### 8.3.3 概要设计推进方法

概要设计阶段，安全性功能与其他功能一样，需要严格遵循瀑布式的设计、开发和测试流程。

- **细化安全性功能**：将需求分析阶段确定的开发标准细化至可直接编码的程度，并记录到架构设计书中。
- **界面设计确认**：在界面设计时确认安全功能。
- **CSRF 和 HTTPS 页面**：列出需要进行 CSRF 对策和使用 HTTPS 的页面。

#### 8.3.4 详细设计和编码阶段注意事项

详细设计阶段之后，按照概要设计进行设计和开发。每个阶段都应进行设计评审和代码评审，确保遵守开发标准和方法。

#### 8.3.5 安全性测试的重要性及其方法

无论是安全性 Bug 还是安全性功能需求，最终都需要通过测试来验证。发包方应在验收时进行安全性测试。

- **专家诊断**：高精度检查，但成本较高。
- **专业工具诊断**：如 IBM Rational AppScan 和 HP WebInspect，虽然初期投入较大，但效果显著。
- **开源工具**：如 WebScarab、OpenVAS 和 w3af，适合预算有限的情况。
- **自我诊断**：利用地方自治信息中心发布的“Web 健康诊断基准”进行简易检查。

#### 8.3.6 承包方测试

尽管在开发过程中进行安全性测试的团队较少，但强烈建议穿插进行此类测试。主要方法包括：

- **代码检查**：通过目测或查找工具（如 grep）进行。
- **手动黑盒测试**：使用 Web 健康诊断的方法，提前进行安全性测试有助于降低返工成本。

#### 8.3.7 发包方测试（验收）

许多发包方在招标时明确将系统漏洞对策作为需求，但在验收时却很少进行漏洞检测。实际上，明确的安全性功能需求应在验收时认真验证。提前告知承包商将进行安全性测试，可增强其重视程度。

- **审查安全测试报告**：不推荐，因为发包方难以客观检查。
- **第三方测试**：高精度和客观性，但成本较高。
- **自行测试**：利用 Web 健康诊断基准进行低成本测试。

#### 8.3.8 运维阶段注意事项

在验收后进入运维阶段，关键点包括：

- **日志文件监视**：使用 iLogScanner 等工具发现潜在攻击行为。
- **定期健康诊断**：每年进行一到两次 Web 健康诊断，检查新增页面和新攻击方法的对策。
- **设置漏洞报告中心**：方便获取外部报告的漏洞。

#### 8.4 总结

本章介绍了开发安全 Web 应用程序所需的管理措施。制定开发标准并对开发成员进行安全培训至关重要。在招标时，应在 RFP 中明确安全性需求，并在验收时进行安全性测试。

### 参考文献

[1] 经济产业省商务信息政策局信息处理振兴科. (2007 年 4 月 13 日). 信息系统·交易模型与合同. 参考日期：2010 年 12 月 15 日, 参考网址：http://www.meti.go.jp/policy/it_policy/keiyaku/model_keiyakusyo.pdf

如果您对本书内容有疑问，可发邮件至 PI:EMAIL，会有编辑或作译者协助答疑。也可访问图灵社区，参与本书讨论。