4 In the new sheet that appears, do one of the following:
• For a new MIME type, type each part of the name (separated by a slash), select the 
suffix and type its name, use the Add button to add any suffixes you want, then click 
OK.
• For a new content handler, type a name for the handler, select the suffix and type its 
name, use the Add button to add any suffixes you want, then click OK.
• To edit a MIME type or content handler, change its name as desired, select the suffix 
and change it as desired, add any suffixes you want using the Add button, then click 
OK. 
5 Click Save.
If you add or edit a handler that has Common Gateway Interface (CGI) script, make sure 
you have enabled CGI execution for your site in the Options pane of the Settings/Sites 
window.
Managing Connections
You can limit the period of time that users are connected to the server. In addition, you 
can specify the number of connections to websites on the server at any one time.
Setting Simultaneous Connections for the Web Server
You can specify the number of simultaneous connections to your web server. When the 
maximum number of connections is reached, new requests receive a message that the 
server is busy.
Simultaneous connections are concurrent HTTP client connections. Browsers often 
request several parts of a webpage at the same time, and each of those requests is a 
connection. So a high number of simultaneous connections can be reached if the site 
has pages with multiple elements and many users are trying to reach the server at 
once.
To set the maximum number of connections to your web server:
1 In Server Admin, click Web for the server you want.
2 Click Settings in the button bar.
3 In the General pane, enter a number in the “Maximum simultaneous connections” field.
The range for maximum simultaneous connections is 1 to 2048. The default maximum 
is 500, but you can set the number higher or lower, taking into consideration the 
desired performance of your server.
4 Click Save.
Web service restarts.
 LL2350.book  Page 17  Friday, August 22, 2003  2:32 PM
18
Chapter 2    Managing Web Technologies
Setting Persistent Connections for the Web Server
You can set up your web server to respond to multiple requests from a client computer 
without closing the connection each time. Repeatedly opening and closing 
connections isn’t very efficient and decreases performance.
Most browsers request a persistent connection from the server, and the server keeps 
the connection open until the browser closes the connection. This means the browser 
is using a connection even when no information is being transferred. You can allow 
more persistent connections—and avoid sending a Server Busy message to other 
users—by increasing the number of persistent connections allowed.
To set the number of persistent connections:
1 In Server Admin, click Web in the list for the server you want.
2 Click Settings in the button bar.
3 In the General pane, enter a number in the “Maximum persistent connections” field and 
type a new number.
The range for maximum persistent connections is 1 to 2048. The default setting of 500 
provides better performance.
4 Click Save.
Web service restarts.
Setting a Connection Timeout Interval
You can specify a time period after which the server will drop a connection that is 
inactive.
To set the connection timeout interval:
1 In Server Admin, click Web in the list for the server you want.
2 Click Settings in the button bar.
3 In the General pane, enter a number in the “Connection timeout” field to specify the 
amount of time that can pass between requests before the session is disconnected by 
the web server.
The range for connection timeout is 0 to 9999 seconds.
4 Click Save.
Web service restarts.
 LL2350.book  Page 18  Friday, August 22, 2003  2:32 PM
Chapter 2    Managing Web Technologies
19
Setting Up Proxy Caching
A proxy lets users check a local server for frequently used files. You can use a proxy to 
speed up response times and reduce network traffic. The proxy stores recently accessed 
files in a cache on your web server. Browsers on your network check the cache before 
retrieving files from more distant servers.
To take advantage of this feature, client computers must specify your web server as 
their proxy server in their browser preferences.
If you want to set up a web proxy, make sure you create and enable a website for the 
proxy. You may wish to disable logging on the proxy site, or configure the site to record 
its access log in a separate file from your other sites' access logs. The site does not have 
to be on port 80, but setting up web clients is easier if it is because browsers use port 
80 by default. 
To set up a proxy:
1 In Server Admin, click Web for the server you want.
2 Click Settings in the button bar.
3 In the Proxy pane, click Enable Proxy.
4 Set the maximum cache size.
When the cache reaches this size, the oldest files are deleted from the cache folder.
5 Type the pathname for the cache folder in the “Cache folder” field.
You can also click the Browse button and browse for the folder you want to use.
If you are administering a remote server, file service must be running on the remote 
server to use the Browse button.
If you change the folder location from the default, you will have to select the new 
folder in the Finder, choose File > Get Info, and change the owner and group to www.
6 Click Save.
Web service restarts.
Note:  If proxy is enabled, any site on the server can be used as the proxy.
 LL2350.book  Page 19  Friday, August 22, 2003  2:32 PM
20
Chapter 2    Managing Web Technologies
Blocking Websites From Your Web Server Cache
If your web server is set up to act as a proxy, you can prevent the server from caching 
objectionable websites.
Important:  To take advantage of this feature, client computers must specify your web 
server as their proxy server in their browser preferences.
You can import a list of websites by dragging it to list of sites. The list must be a text file 
with the host names separated by commas or tabs (also known as csv and tsv strings). 
Make sure that the last entry in the file is terminated with a carriage return/line feed, or 
it will be overlooked.
To block websites:
1 In Server Admin, click Web for the server you want.
2 Click Settings in the button bar.
3 In the Proxy pane, click Enable Proxy.
4 Do one of the following:
• Click the Add button, type the URL of the website you want to block in the Add field, 
and click Add.
• Drag a list of websites (text file in comma-separated or tab-separated format) to the 
“Blocked hosts” field.
5 Click Save.
Web service restarts.
Using Secure Sockets Layer (SSL)
Secure Sockets Layer (SSL) provides security for a site and for its users by 
authenticating the server, encrypting information, and maintaining message integrity. 
About SSL
SSL was developed by Netscape and uses authentication and encryption technology 
from RAS Data Security, Inc. For detailed information about the SSL protocol, see:
• www.netscape.com/eng/ssl3/draft302.txt
• http://developer.netscape.com/misc/developer/conference/proceedings/cs2/
index.html
The SSL protocol is on a layer below application protocols (HTTP, for example) and 
above TCP/IP. This means that when SSL is operating in the server and the client’s 
software, all information is encrypted before being sent.
The Apache web server in Mac OS X Server supports SSLv2, SSLv3, and TLSv1. More 
information about these protocol versions is available at www.modssl.org.
 LL2350.book  Page 20  Friday, August 22, 2003  2:32 PM
Chapter 2    Managing Web Technologies
21
The Apache server in Mac OS X Server uses a public key-private key combination to 
protect information. A browser encrypts information using a public key provided by 
the server. Only the server has a private key that can decrypt that information.
When SSL is implemented on a server, a browser connects to it using the https prefix in 
the URL, rather than http. The “s” indicates that the server is secure. 
When a browser initiates a connection to an SSL-protected server, it connects to a 
specific port (443) and sends a message that describes the encryption ciphers it 
recognizes. The server responds with its strongest cipher, and the browser and server 
then continue exchanging messages until the server determines the strongest cipher 
both it and the browser recognize. Then the server sends its certificate (the Apache 
web server uses an ISO X.509 certificate) to the browser; this certificate identifies the 
server and uses it to create an encryption key for the browser to use. At this point a 
secure connection has been established and the browser and server can exchange 
encrypted information.
Using WebDAV
Web-based Distributed Authoring and Versioning (WebDAV) allows you or your users to 
make changes to websites while the sites are running. You enable WebDAV for 
individual sites, and you also need to assign access privileges for the sites and for the 
web folders. See “Enabling WebDAV on Websites” on page 30 for details.
Using Tomcat
Tomcat adds Java servlet and JavaServer Pages (JSP) capabilities to Mac OS X Server. 
Java servlets are Java-based applications that run on your server, in contrast to Java 
applets, which run on the user’s computer. JavaServer Pages allows you to embed Java 
servlets in your HTML pages.
You can set Tomcat to start automatically whenever the server starts up. This will 
ensure that the Tomcat module starts up after a power failure or after the server shuts 
down for any reason.
You can use Server Admin or the command-line tool to enable the Tomcat module. See 
“Tomcat” on page 58 for more information about Tomcat and how to use it with your 
web server.
 LL2350.book  Page 21  Friday, August 22, 2003  2:32 PM
22
Chapter 2    Managing Web Technologies
Viewing Web Service Status
In Server Admin you can check the current state of the Apache server and which server 
modules are active.
Web Service Overview
The overview in Server Admin shows server activity in summary form.
To view web service status overview:
1 Open Server Admin.
2 Click Overview in the button bar.
The Start/Stop Status Messages field displays a summary of server activity and the 
server’s start date and time.
You can also view activity logs for each site on your server. See “Viewing Website 
Settings” on page 34 for more information.
Web Service Modules in Use
You can view a list of modules in use on the server as well as modules that are available 
but not in use.
To see which modules are enabled:
1 In Server Admin, click Web in the list for the server your want.
2 Click Settings in the button bar. 
3 In the Modules pane, scroll to see the entire set of modules in use or available for use in 
the server. 
Viewing Logs of Web Service Activity
Web service in Mac OS X Server uses the standard Apache log format, so you can also 
use any third-party log analysis tool to interpret the log data.
To view the log files:
1 In Server Admin, click Web in the list for the server you want.
2 Click Logs in the button bar.
3 Select the log you want to view in the list.
You can enable an access log and an error log for each site on the server. See “Enabling 
Access and Error Logs for a Website” on page 27 for more information.
 LL2350.book  Page 22  Friday, August 22, 2003  2:32 PM
3
23
3 Managing Websites
Use the Server Admin application to set up and manage 
the essential components of web service.
You administer websites on your server with Server Admin, an application that allows 
you to establish settings, specify folders and paths, enable a variety of options, and 
view the status of sites.
Using Server Admin to Manage Websites
The Sites pane in Server Admin lists your websites and provides some basic information 
about each site. You use the Sites pane to add new sites or change settings for existing 
sites.
To access the Sites pane:
m In Server Admin, click Web in the list for the server you want, click Settings in the 
button bar, then click Sites.
The pane shows a list of sites on the server.
m To edit a site, double-click the site name.
Setting Up the Documents Folder for a Website
To make files available through a website, you put the files in the Documents folder for 
the site. To organize the information, you can create folders inside the Documents 
folder. The folder is located in the directory /Library/WebServer/Documents/.
In addition, each registered user has a Sites folder in the user’s own home directory. 
Any graphics or HTML pages stored here will be served from the URL:  
http://server.example.com/~username/.
 LL2350.book  Page 23  Friday, August 22, 2003  2:32 PM
24
Chapter 3    Managing Websites
To set up the Documents folder for your website:
1 Open the Documents folder on your web server.
If you have not changed the location of the Documents folder, it’s in this directory: 
/Library/WebServer/Documents/.
2 Replace the index.html file with the main page for your website.
Make sure the name of your main page matches the default document name you set in 
the General pane of the site’s Settings window. See “Setting the Default Page for a 
Website” on page 25 for details.
3 Copy files you want to be available on your website to the Documents folder.
Enabling a Website on a Server
Before you can enable a website, you must create the content for the site and set up 
your site folders.
To enable the website:
1 In Server Admin, click Web in the list for the server you want.
2 Click Settings in the button bar.
3 In the Sites pane, click the Add button to add a new site or click the Enabled button for 
the site in the list that you want to enable. (If the site is already listed, you’re finished.)
4 In the General pane, type the fully qualified DNS name of your website in the Name 
field.
5 Enter the IP address and port number (any number up to 8999) for the site.
The default port number is 80. Make sure that the number you choose is not already in 
use by another service on the server.
Important:  In order to enable your website on the server, the website must have a 
unique name, IP address, and port number combination. See “Hosting More Than One 
Website” on page 10 for more information.
6 Enter the path to the folder you set up for this website.
You can also click the Browse button and browse for the folder you want to use.
7 Enter the file name of your default document (the first page users see when they 
access your site).
8 Make any other settings you want for this site, then click Save.
9 Click the back button at the top right side of the editing window.
10 Click the Enabled box next to the site name in the Sites pane.
11 Click Save.
Web service restarts.
 LL2350.book  Page 24  Friday, August 22, 2003  2:32 PM
Chapter 3    Managing Websites
25
Changing the Default Web Folder for a Site
A site’s default web folder is used as the root for the site. In other words, the default 
folder is the top level of the directory structure for the site.
To change the default web folder for a site hosted on your server:
1 Log in to the server you want to administer.
2 Drag the contents of your previous web folder to your new web folder.
3 In Server Admin, click Web in the list for the server where the website is located.
4 Click Settings in the button bar.
5 In the Sites pane, double-click the site in the list.
6 Type the path to the web folder in the Web Folder field, or click the Browse button and 
navigate to the new web folder location (if accessing this server remotely, file service 
must be turned on to do this; see the file services administration guide for more 
information).
7 Click Save. 
Web service restarts.
Setting the Default Page for a Website
The default page appears when a user connects to your website by specifying a 
directory or host name instead of a file name.
You can have more than one default page (called a default index file in Server Admin) 
for a site. If multiple index files are listed for a site, the web server displays the one 
highest in the list that is in the site’s folder.
To set the default webpage:
1 In Server Admin, click Web in the list for the server you want.
2 Click Settings in the button bar.
3 In the Sites pane, double-click the site in the list. 
4 In the General pane, click the Add button and type a name in the “Default index files” 
field. (Do not use any spaces in the name.)
A file with this name must be in the website folder.
5 To set the file as the one the server displays as its default page, drag that file to the top 
of the list.
6 Click Save.
Web service restarts.
Note:  If you plan to use only one index page for a site, you can leave index.html as the 
default index file and change the content of the existing file with that name in /Library/
WebServer/Documents.
 LL2350.book  Page 25  Friday, August 22, 2003  2:32 PM
26
Chapter 3    Managing Websites
Changing the Access Port for a Website
By default, the server uses port 80 for connections to websites on your server. You may 
need to change the port used for an individual website, for instance, if you want to set 
up a streaming server on port 80. Make sure that the number you choose does not 
conflict with ports already being used on the server (for FTP, Apple File Service, SMTP, 
and others). If you change the port number for a website you must change all URLs 
that point to the web server to include the new port number you choose.
To set the port for a website: