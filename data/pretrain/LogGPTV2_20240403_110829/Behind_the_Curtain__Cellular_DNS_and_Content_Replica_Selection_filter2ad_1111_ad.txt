the same /24 block. In addition we see more /24 blocks for local
resolvers than public ones, with the exception of Sprint.
with that of the cellular operator provided DNS. Figure 11 present
CDFs of these measured latencies for the different carriers in ours
study.
The ﬁgure shows that for the carriers whose resolvers responded
to our probes, the cell DNS is commonly closer to clients than
the public resolver. This is not surprising since all public DNS
resolvers are outside of cellular networks, and resolution requests
would have to leave the cellular network to complete. For the US
carriers, the cell DNS resolvers is, at median, 10-25 ms closer
than the best public DNS resolver. For South Korean operators,
public DNS resolvers taken nearly twice for resolution as long at
the median. On the other hand, the ﬁgure also shows the greater
performance consistency of public DNS services and a long tail of
resolution times from cell DNS. In the case of T-Mobile, public
DNS resolvers performed equal or better over 40% of the time.
In addition to analyzing the observed structure of public DNS
and its relative performance, we also explore the consistency
of client-resolver mappings. We focus on Google Public DNS,
101102103104Latency (ms)0.00.20.40.60.81.0CDFSprintGoogleDNSOpenDNSOperator Provided101102103104Latency (ms)0.00.20.40.60.81.0CDFVerizon WirelessGoogleDNSOpenDNS101102103104Latency (ms)0.00.20.40.60.81.0CDFT-MobileGoogleDNSOpenDNSOperator Provided101102103104Latency (ms)0.00.20.40.60.81.0CDFAT&TGoogleDNSOpenDNSOperator Provided101102103104Latency (ms)0.00.20.40.60.81.0CDFLG U+GoogleDNSOpenDNS101102103104Latency (ms)0.00.20.40.60.81.0CDFSKTelecomGoogleDNSOpenDNSOperator Provided67(a) US Carriers
(b) SK Carriers
Figure 12: Resolver consistency for GoogleDNS for users in each carrier. It is interesting to note that even though GoogleDNS’s IP address
(8.8.8.8) is anycast, users see large variability in the /24s they are sent to. Each /24 for GoogleDNS represents one of thirty distinct geographic
locations for their services.
comparing the external resolver IP addresses assigned to a single
client over time, in each of the carriers in our study. Figure 12
presents this both for DNS resolvers and their /24 preﬁx. As the
ﬁgure shows, despite relying on anycast, Google users are directed
toward multiple /24 blocks of resolvers at different geographic
locations, given that each /24 block represents one of the 30
geographically distinct resolver clusters. This inconsistency could
be the results of the widespread use of tunneling (e.g., via MPLS).
6.2 Public DNS Performance
Figure 13 shows domain resolution times for the device’s locally
conﬁgured DNS along with public DNS resolvers GoogleDNS and
OpenDNS. Our results show that in a majority of cases, the lo-
cally conﬁgured resolver provides faster domain name resolutions.
While the name resolution times are greater on average for public
DNS resolvers, they exhibit lower variance in response times and
have a shorter tail than all cellular operators we investigated.
In general, our results are consistent with those previously
reported in [1,18], where public DNS resolvers were located further
away from clients, and therefore incurred longer domain name
resolution times due to the larger round trip times to the resolvers
themselves.
6.3 Public DNS Replica Performance
We measured the performance of replicas selected by public
DNS resolvers. For each experiment set described previously in
Section 3, we calculated the difference in performance as a percent-
age change compared to the replica servers returned by the locally
conﬁgured resolver. Figure 14 shows the cumulative distribution
of percent difference between the replica servers returned by each
public DNS resolver, and the locally conﬁgured one for all six
providers. Replicas are aggregated by /24 preﬁx.
The aggregation shifts the results toward equal performance, as
witnessed by the large percentage of experiments shown in the
straight line down 0% in all carriers. For all providers in the
US and South Korea, between 60 and 80% of the relative latency
equals zero. The remainder falls evenly on both sides of the graph,
indicating similar performance between cell networks and public
DNS on average. Despite cellular network’s knowledge of client
location, and in contrast to wired networks, cell network provider’s
own DNS and public DNS yield comparable performance to
selected replicas.
7. DISCUSSION
Our analysis reveals some critical problems with current cellular
DNS infrastructures, and shows their impact on the performance of
content distribution. We have mapped the problem with replica
selection to the opaqueness of the cellular DNS infrastructure
and the seemingly intended obfuscation of location information
such as the inconsistency between mobile clients and the assigned
resolvers.
This opaqueness, in an observed extreme case, show client- and
external-facing DNS resolvers within a single operator (Verizon)
within separate ASes. The opaqueness of cellular DNS means
that even though many of the largest CDNs use DNS based replica
selection for mobile clients [14], the CDNs themselves are unable
to measure the distance from their replicas to these resolvers
or place them in respective network coordinates outside of their
network preﬁx. While previous work has shown the inconsistency
of cellular device IP addresses, our work further demonstrates the
inconsistency of client DNS resolvers within cellular networks.
Despite the public DNS results (Sec. 6.3), we are not particularly
endorsing public DNS adoption. Cellular network DNS should
be the preferred DNS for mobile users. Its resolvers offer lower
Apr-09May-15Jun-20Jul-26Date−50050100150200250# LDNS Pairs−20246810121416# /24 PairsSprintMar-16Mar-28Apr-09Apr-21May-03Date020406080# LDNS Pairs−20246810# /24 PairsVerizon WirelessApr-15Apr-27May-09May-21Jun-02Jun-14Date−20020406080100# LDNS Pairs−2024681012# /24 PairsT-MobileApr-16Date−202468101214# LDNS Pairs−0.50.00.51.01.52.02.5# /24 PairsAT&TApr-14Apr-26Date−1001020304050# LDNS Pairs−10123456# /24 PairsLG U+Apr-14Apr-26Date−5051015202530# LDNS Pairs−0.50.00.51.01.52.02.5# /24 PairsSKTelecom68(a) US Carriers
(b) SK Carriers
Figure 13: Domain resolution times for the cellular operator’s provided DNS compared with public DNS resolvers GoogleDNS and
OpenDNS. Cellular operator DNS offers lower resolution times when compared to public DNS services.
resolution times than popular public DNS options, are closer
to mobile users and can potentially offer a ﬁner grained user
localization. Rather, we use our analysis of public/provider DNS
resolvers to better illustrate the overall inefﬁciencies of current cell
networks and CDNs conﬁgurations. In light of these results, it is
not surprising to see cellular operators taking steps to offer their
own content delivery solutions [19].
8. RELATED WORK
Our work builds on the many previous efforts to explore mobile
device performance within cellular networks, characterize client
DNS infrastructure, and analyze the interplay between DNS and
CDNs in replica selection. It represents the ﬁrst analysis of cellular
DNS infrastructure and its impact on content replica selection in
4G networks.
Several recent efforts have looked at the performance charac-
teristics of mobile clients within cellular networks. Sommers et
al. [22] compared the performance of mobile devices when they
were in cellular networks or connected to 802.11 WiFi. Nikravesh
et al. [17] looked at the longitudinal overall performance of mobile
network performance from end devices, while Zariﬁs et al. [26]
analyzed the increased latency experienced by mobile clients. With
the exception of Zariﬁs et al., no paper considered the location of
content replicas in their performance analysis.
Other work has investigated the impact of edge network effects
such as client inaccessibility and IP address shufﬂing, and their
impact on web services. Balakrishnan et al. [3] looks at the
consistency of IP addresses within cellular networks as well as
their geo-location accuracy. Casado et al. [4] studied how the
opacity of edge networks and their stationarity of IP addresses can
adversely affect network services. We continue this work with
our observations of client LDNS resolver inconsistency, and its ill
suited position as a client locator for CDNs.
Recently, Schomp et al. [20] and Alzoubi et al. [2] have per-
formed large scale studies characterizing the structure and per-
formance of client side LDNS resolvers. Our work is a natural
complement as their investigation was limited to wired and broad-
band networks, because cellular network infrastructure can only
be discovered from the end devices within the particular operator
network given common ﬁrewall policies.
Krishnamurthy et al. [13] performed one of the earliest studies of
content delivery networks and evaluated the effectiveness of replica
selection for client performance. Our work naturally extends this,
updating analysis with 4G cellular networks.
The effectiveness of DNS servers for content replica selection
has been extensively explored before (e.g., [16, 21]). However
most previous studies have been done under the assumption that
client to resolver mappings remained constant. Huang et al. further
investigated the replica selection mechanisms of a major CDN [10].
More recently Otto et al. [18] looked at the impact of using remote
public DNS on replica selection for broadband connections. Here
the authors show that using a client’s ISP DNS servers yield
the best performance a majority of the time, with public DNS
services incurring signiﬁcant performance of selected replicas. Our
work shows that many times, the performance of replicas chosen
by cellular operator DNS are in many cases no better than the
publicly chosen ones, and offer worse performance in almost 25%
of cases. The behavior of cellular DNS creates an entirely different
environment for content replica selection, requiring its own set of
localization techniques aside from client resolver.
Our work is closest to Xu et al. [25], which looked at the
role cellular network structure plays in content placement. While
the authors conducted initial investigations on DNS and content
placement in cellular networks, our study includes longitudinal
data from clients which allows us to monitor changes in DNS
conﬁguration from mobile end hosts. In addition, their work was
conducted prior to major deployments of 4G technologies such as
LTE which signiﬁcantly decrease radio access latency and variance,
as well as prior to the expansion of cellular network ingress points.
Therefore, replica selection in modern networks represents a more
important piece of mobile user performance than previously cited.
9. CONCLUSIONS AND FUTURE WORK
We presented a detailed analysis of cellular network DNS infras-
tructure and its implications on the effectiveness of CDN replica
selection. Our work is motivated by the continued improvements
in access latency and performance seen in next generation networks
101102103104Resolution Time (ms)0.00.20.40.60.81.0CDFSprintGoogleDNSOpenDNSOperator Provided101102103104Resolution Time (ms)0.00.20.40.60.81.0CDFVerizon WirelessGoogleDNSOpenDNSOperator Provided101102103104Resolution Time (ms)0.00.20.40.60.81.0CDFT-MobileGoogleDNSOpenDNSOperator Provided101102103104Resolution Time (ms)0.00.20.40.60.81.0CDFAT&TGoogleDNSOpenDNSOperator Provided101102103104Resolution Time (ms)0.00.20.40.60.81.0CDFLG U+GoogleDNSOpenDNSOperator Provided101102103104Resolution Time (ms)0.00.20.40.60.81.0CDFSKTelecomGoogleDNSOpenDNSOperator Provided69(a) US Carriers
(b) SK Carriers
Figure 14: Relative replica latency performance for replicas given by cellular DNS and public DNS resolvers. In contrast to what has been
observed in wired networks, replicas given from public DNS resolvers offer equal or better performance to those given from cellular DNS a
majority of the time.
that, as we show, make accurate localization of clients critical to the
mobile user experience. We explore these issues in the two fastest
growing LTE markets – the US and South Korea – relying on data
collected by over 340 distributed mobile devices across six carriers.
We found several issues that impact the performance of content
delivery in modern cellular networks, including the opaqueness
of the cellular networks, and the inconsistent mappings between
mobile clients and cellular DNS resolvers. Our study, the ﬁrst in
the literature of public DNS performance from cellular networks,
shows despite their greater distance from the associated mobile
devices, that remote public resolvers yielded comparable perfor-
mance in replica selection to that of cellular provider DNS.
Beyond extending our characterization of cellular networks to
other markets, we have started to explore alternative approaches
for improving CDN performance through better client localization.
Acknowledgements
We thank our shepherd Ramesh Sitaraman and the anonymous
reviewers for their invaluable feedback. We are grateful to John
Otto and Mario Sánchez for their early feedback on this work, and
to Byungjin Jun for his help in application development. This work
was supported in part by the National Science Foundation through
Award CNS 1218287.
10. REFERENCES
[1] B. Ager, W. Mühlbauer, G. Smaragdakis, and S. Uhlig.
Comparing DNS resolvers in the wild. In Proc. IMC, 2010.
[2] H. A. Alzoubi, M. Rabinovich, and O. Spatscheck. The
anatomy of LDNS clusters: Findings and implications for
web content delivery. In Proc. WWW, 2013.
[3] M. Balakrishnan, I. Mohomed, and V. Ramasubramanian.
Where’s that phone?: geolocating IP addresses on 3G
networks. In Proc. IMC, 2009.
[4] M. Casado and M. J. Freedman. Peering through the shroud:
The effect of edge opacity on ip-based client identiﬁcation.
In Proc. USENIX NSDI, 2007.
[5] D. R. Choffnes and F. E. Bustamante. Taming the torrent: a
practical approach to reducing cross-isp trafﬁc in
peer-to-peer systems. ACM SIGCOMM Computer
Communication Review, 38(4):363–374, 2008.
[6] CISCO. Architectural Considerations for Backhaul of 2G/3G
and Long Term Evolution Networks. http://www.
cisco.com/c/en/us/solutions/collateral/
service-provider/mobile-internet/white_
paper_c11-613002.pdf.
[7] CISCO. CISCO visual networking index: Global mobile data
trafﬁc forecast update 2013-2018. Technical report, CISCO
Systems Inc., 2014.
[8] A. Gember, A. Akella, J. Pang, A. Varshavsky, and
R. Caceres. Obtaining in-context measurements of cellular
network performance. In Proc. IMC, 2012.
[9] Google. Frequently asked questions - Public DNS – Google
Developers. https://developers.google.com/
speed/public-dns/faq.
[10] C. Huang, A. Wang, J. Li, and K. W. Ross. Measuring and
evaluating large-scale CDNs. In Proc. IMC, 2008.
[11] J. Huang, F. Qian, A. Gerber, Z. M. Mao, S. Sen, and
O. Spatscheck. A close examination of performance and
power characteristics of 4g lte networks. In Proc. of
MobiSys, 2012.
[12] G. Intelligence. 4G driving data usage but not all markets
reaping the rewards. Technical report.
[13] B. Krishnamurthy, C. Wills, and Y. Zhang. On the use and
performance of content distribution networks. In Proc. IMC,
2001.
[14] B. Maggs. Personal Communication.
[15] B. Maggs. Challenges in engineering the world’s largest
content delivery networkstate of the union address.
[16] Z. M. Mao, C. D. Cranor, F. Douglis, M. Rabinovich,
O. Spatscheck, and J. Wang. A precise and efﬁcient
evaluation of the proximity between web clients and their
local DNS servers. In Proc. USENIX ATC, 2002.
[17] A. Nikravesh, D. R. Choffnes, E. Katz-Bassett, Z. M. Mao,
and M. Welsh. Mobile network performance from user
devices: A longitudinal, multidimensional analysis. In Proc.
PAM, 2014.
−200−150−100−50050100150200Latency (ms)0.00.20.40.60.81.0CDFSprintGoogleDNSOpenDNS−200−150−100−50050100150200Latency (ms)0.00.20.40.60.81.0CDFVerizon WirelessGoogleDNSOpenDNS−200−150−100−50050100150200Latency (ms)0.00.20.40.60.81.0CDFT-MobileGoogleDNSOpenDNS−200−150−100−50050100150200Latency (ms)0.00.20.40.60.81.0CDFAT&TGoogleDNSOpenDNS−200−150−100−50050100150200Latency (ms)0.00.20.40.60.81.0CDFLG U+GoogleDNSOpenDNS−200−150−100−50050100150200Latency (ms)0.00.20.40.60.81.0CDFSKTelecomGoogleDNSOpenDNS70[18] J. S. Otto, M. A. Sánchez, J. P. Rula, and F. E. Bustamante.
Content delivery and the natural evolution of DNS: Remote
DNS trends, performance issues and alternative solutions. In
Proc. IMC, 2012.
[19] B. F. Rubin. Verizon to acquire content-delivery startup
edgecast networks. The Wall Street Journal, 9 December
2013. Available: http://online.wsj.com/
article/BT-CO-20131209-703213.html. [Last
Accessed: 5 May 2014].
[20] K. Schomp, T. Callahan, M. Rabinovich, and M. Allman. On
measuring the client-side dns infrastructure. In Proc. IMC,
2013.
[21] A. Shaikh, R. Tewari, and M. Agrawal. On the effectiveness
of DNS-based server selection. In Proc. IEEE INFOCOM
2001.
[22] J. Sommers and P. Barford. Cell vs. wiﬁ: on the performance
of metro area mobile connections. In Proc. IMC, 2012.
[23] A.-J. Su, D. R. Choffnes, A. Kuzmanovic, and F. E.
Bustamante. Drafting behind akamai (travelocity-based
detouring). ACM SIGCOMM Computer Communication
Review, 36(4):435–446, 2006.
[24] Z. Wang, Z. Qian, Q. Xu, Z. Mao, and M. Zhang. An untold
story of middleboxes in cellular networks. SIGCOMM
Comput. Commun. Rev., 41(4):374–385, Aug. 2011.
[25] Q. Xu, J. Huang, Z. Wang, F. Qian, and A. G. Z. M. Mao.
Cellular data network infrastructure characterization and
implication on mobile content placement. In Proc. ACM
SIGMETRICS, 2011.
[26] K. Zariﬁs, T. Flach, S. Nori, D. Choffnes, R. Govindan,
E. Katz-Bassett, Z. M. Mao, and M. Welsh. Diagnosing Path
Inﬂation of Mobile Client Trafﬁc. In Proc. PAM, 2014.
71