title:The need for cross-layer information in access point selection algorithms
author:Karthikeyan Sundaresan and
Konstantina Papagiannaki
The Need for Cross-Layer Information in Access Point
Selection Algorithms
Karthikeyan Sundaresan
Georgia Tech
PI:EMAIL
Konstantina Papagiannaki
Intel Research Cambridge
PI:EMAIL
Abstract The low price of commodity wireless LAN cards and
access points (APs) has resulted in the rich proliferation of high
density WLANs in enterprise, academic environments, and pub-
lic spaces. In such environments wireless clients have a variety of
afﬁliation options that ultimately determine the quality of service
they receive from the network. The state of the art mechanism be-
hind such a decision typically relies on received signal strength,
associating clients to that access point (AP) in their neighborhood
that features the strongest signal. More intelligent algorithms have
been further proposed in the literature. In this work we take a step
back and look into the fundamental metrics that determine end user
throughput in 802.11 wireless networks. We identify three such
metrics pertaining to wireless channel quality, AP capacity in the
presence of interference, and client contention. We modify the low
level software functionality (ﬁrmware and microcode) of a com-
mercial wireless adaptor to measure the necessary quantities. We
then test, in a real testbed, the ability of each metric to capture end
user throughput through a range of diverse network conditions. Our
experimental results indicate that user afﬁliation decisions should
be based on metrics that do not only reﬂect physical layer perfor-
mance, or network occupancy, but also concretely capture MAC
layer behavior. Based on the acquired insight, we propose a new
metric that is shown to be highly accurate across all tested network
scenarios.
Categories and Subject Descriptors
C.2.1 [Computer-Communication Networks]: Network Architec-
ture and Design - Wireless Communication
General Terms
Algorithms, Management, Measurement, Experimentation, Perfor-
mance
Keywords
IEEE 802.11, Access Point Selection, Cross-Layer
1 Introduction/Motivation
IEEE 802.11 has become the de facto protocol for wireless access in
urban areas capitalizing on the large deployment of 802.11 Access
Permission to make digital or hard copies of all or part of this work for
personal or classroom use is granted without fee provided that copies are
not made or distributed for proﬁt or commercial advantage and that copies
bear this notice and the full citation on the ﬁrst page. To copy otherwise, to
republish, to post on servers or to redistribute to lists, requires prior speciﬁc
permission and/or a fee.
IMC’06, October 25–27, 2006, Rio de Janeiro, Brazil.
Copyright 2006 ACM 1-59593-561-4/06/0010 ...$5.00.
Points (APs). Within such dense deployments, a wireless client has
a variety of choice in its association with the wired infrastructure.
The state of the art mechanism, implemented in the majority of
802.11 wireless adaptors, relies on measurements of received sig-
nal strength (RSSI); the client associates with that AP that is heard
at the highest signal strength. The reason driving such a decision
stems from the fact that wireless adaptors employ rate adaptation,
tuning their transmission rate in response to the quality of the wire-
less link they experience to their AP. If the link quality is poor,
then the client needs to employ more robust modulation and coding
schemes, thus reducing its effective transmission rate. Afﬁliating
with an AP featuring a high signal strength implies that the client
can communicate with the AP at higher transmission rates.
Such an afﬁliation algorithm has received signiﬁcant criticism
due to its ignorance of AP load. Sole consideration of link quality
in the AP afﬁliation process can lead to the overload of APs with
high client concentration, while other APs remain unused due to
their slightly longer distance from the majority of the clients. As
a consequence, new algorithms were proposed that incorporate AP
load in the selection process [4, 8]. Some of these algorithms rely
on passive measurements collected from Beacon frames, while a
recent approach advocates the use of active measurements for the
identiﬁcation of the “best” AP [6].
In this work we are taking a step back from previous work and
look at the fundamental metrics that should drive the AP selec-
tion process in order to accurately reﬂect potential user throughput.
Moreover, we focus on passive measurements that can guide such a
process without requiring pre-existing authentication with the APs
under consideration. We identify the following differentiating as-
pects in AP selection:
• the AP capacity, that captures the capacity of an AP in the
presence of interfering devices (802.11-enabled or not),
• the duty cycle of the AP, that captures the average amount of
time the AP spends to serve all its users once, and
• the quality of the link between the AP and the new client,
which determines the client’s instantaneous transmission rate.
We propose metrics to capture the aforementioned dimensions in
AP selection. Measurement of the ﬁrst two metrics needs to capture
the state of the MAC protocol, and is not supported by commercial
cards. We believe that the need for changes in the low layer func-
tionality of the wireless adaptors for the exposition of these two
metrics has been a limiting factor in their study through measure-
ment. Our ability to modify the microcode and ﬁrmware of the Intel
2915 ABG card puts us in a unique position to study their perfor-
mance in reﬂecting user throughput. Using a small scale testbed
we explore alternative network scenarios and the tradeoffs that dif-
ferent metrics may face across a diverse set of networking environ-
ments. We clearly show that the use of any one metric in isolation is
not sufﬁcient to lead to optimal decisions across all environments.
For such a task we propose a new metric that is capable of capturing
the cross-layer behavior that should drive AP afﬁliation decisions.
The rest of the paper is structured as follows. In Section 2 we
present a model for the long-term 802.11 user throughput under
fully saturated trafﬁc conditions. Using our insight from Section
2 we discuss alternative metrics that could guide the AP selection
process in Section 3 and propose a way to measure them using ex-
isting hardware. In Section 4 we present our experimental method-
ology for the assessment of the accuracy of each individual metric
across a diverse set of scenarios. Our results highlight the need for
the deﬁnition of a cross-layer metric which is presented in Section
5. We summarize in Section 6.
2 User throughput in 802.11 networks
For analytical tractability in the derivation of the metrics affecting
user throughput in 802.11 networks we focus on the following sce-
nario. We are looking into fully saturated wireless networks, where
trafﬁc is primarily ﬂowing from the AP to the users and each user
always waits for a packet. In this case, MAC layer modeling be-
comes easier since only APs are the senders in the network and
the amount of interference caused by APs does not depend on the
number of their users. We further assume that the wireless network
is the bottleneck. Under these assumptions we know that all users
will achieve the same long-term throughput, shown experimentally
in [2]. Future work on how to relax such assumptions is discussed
in Section 5.
Two users associated with the same AP do not in general receive
signal with the same path loss because of different distances to the
AP and of varying channel conditions. The rate adaptation mecha-
nism of 802.11 adapts the encoding rate of the transmitter to the
channel conditions; users with poorer quality links use a lower,
more robust, encoding rate, thus occupying the medium for longer
periods of time. A new user can estimate its instantaneous transmis-
sion rate based on his/her RSSI using measurement-based formulas
such as the ones listed in [5, 7]. If we assume that information is
transmitted to each user in data units of the same length S, the data
unit transmission delay of user u is given by d(u) =
,
f (SINR(u))
where f (SINR(u)) gives the instantaneous transmission rate on the
channel from AP a to u, that is expressed in data units per second.
If AP a has other APs in its contention domain, its medium uti-
lization M (a) will not be 100% and its actual capacity will only be
a fraction of the medium capacity. In such a setting the long-term
throughput obtained by each user u associated with a in a reference
measurement period T is given by:
1
M (a) ∗ C(a) ∗ T
,
d(v)
r(a, u) =
(1)
where Ua corresponds to the set of users associated to AP a, and
C(a) denotes the capacity of the AP a in data units per second
(different for 802.11a/g and 802.11b networks).
v∈Ua
Note that despite the fact that the time to transmit the same unit
of information is different from one user to another in the same cell,
all the users receive the same long-term throughput; in other words,
each user will have received the same number of data units, in a
reference period T [2]. The denominator of r(a, u) (which is iden-
tical for all users associated with the same AP) will be referred as
the aggregated transmission delay (ATD) of the AP in what follows.
From the above discussion, we ﬁnd that the actual long-term
throughput of a user in a 802.11 network depends on three factors:
(i) the effective capacity of the AP; that is the maximum amount of
trafﬁc the AP can serve under the best conditions in the presence of
other also saturated, interfering APs (ii) the quality of the wireless
link from the AP to the user, which determines the amount of time
a data unit transmitted to this user occupies the medium, and (iii)
the average amount of time a user will need to wait to gain access to
the medium. The last metric further depends on: (1) the number of
users in the cell, and (2) the quality of the wireless link from the AP
to each one of the existing users. Information on these two metrics
allows for the computation of the aggregated transmission delay
which consequently impacts the frequency with which the new user
will receive a packet.
3 Implementation
While some of the aforementioned metrics can be obtained from
driver-level statistics, some others are low-level metrics and need
to be obtained right from the ﬁrmware. From the previous section
we have identiﬁed the following metrics as critical factors in the
determination of 802.11 user throughput.
Received Signal Strength Indicator (RSSI): Received signal
strength is measured by the ﬁrmware upon each successful packet
reception. This information is further propagated to the driver,
where it is typically used for user afﬁliation decisions.
Aggregated Transmission Delay (ATD): The ATD metric was
introduced in the previous section to capture the average amount of
time an AP needs to serve one unit of information to each one of
its users (assumes fully saturated, downlink trafﬁc). This kind of
information is not readily available at the driver level and needs to
be obtained from the ﬁrmware. We modify the ﬁrmware to collect
information on the amount of time needed to serve each individual
client of the AP. More precisely, we measure the time elapsed be-
tween the queueing of a packet at the MAC layer until we receive
a MAC-level ACK for each packet transmission to each individ-
ual client. Such a measure incorporates the effects of rate scal-
ing as well as any possible retransmissions. The MAC address of
the client along with the client’s transmission delay are sent to the
driver. The driver then computes the average transmission delay
to serve one “round” of users, and updates ATD using a weighted
average ﬁlter1.
AP Capacity (APC): The AP capacity comprises two different
metrics: (i) its nominal capacity, and (ii) the fraction of time the
AP gains access to the medium given the existence of other APs
(or even non-802.11 devices) operating on its frequency (or over-
lapping ones). The former metric can be computed upon inspec-
tion of the supported physical layer, conveyed in the Beacon frames
(802.11a/g corresponding to approximately 30 Mbps Layer 3 ca-
pacity and 802.11b to 5 Mbps). The fraction of time that the AP
gains access to the medium however requires access to the ﬁrmware.
Every AP measures the number of slots it spends in the (i) transmis-
sion/reception, (ii) backoff and (iii) idle states. Our measurement
period is deﬁned such that it encounters ﬁve transmission/reception
events. Longer durations were found unsuitable due to the wrap-
ping around of the counters. At the start of the measurement period,
the three counters are initialized and at the end of the measurement
period they are read and reset. The read values are passed up to
the driver where the channel utilization fraction is estimated (busy
slots/total slots) and maintained as a weighted moving average.
The metrics requiring ﬁrmware-support are AP centric, i.e. ATD,
and AP capacity. In order for clients to make use of them in their
afﬁliation decisions, APs need to propagate them to the clients. For
1In our implementation the most recent measurement is weighed
by 0.8.
their propagation to the clients we use the Beacon frames. We intro-
duce additional elements in the Beacon template that carry values
for ATD, and APC. Upon reception of the Beacon frames, our mod-
iﬁed clients can decode the additional Beacon ﬁelds and base their
afﬁliation decisions on the additional information.
4 Experimental Methodology
We deploy three APs and four clients in an ofﬁce environment. Our
experimental methodology is rooted in the identiﬁcation of differ-
ent experimental topologies that can expose the weaknesses of the
three metrics when used in isolation. These same topologies will
be tested later using our proposed metric in order to demonstrate
its potential to deal with cases that may be problematic when using
simple metrics. To achieve this result we select the locations and