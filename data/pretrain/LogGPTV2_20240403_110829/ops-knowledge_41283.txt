User: How to automate building and deploying web applications using GitHub Actions, automatically running tests and deploying the application to production after each code commit.
Assistant: 1. Configure the GitHub secret key In the Settings of the GitHub repository, select Secrets, add a secret key named DEPLOY_KEY, and set the value to SSH Key (private key). 2. Configure the deployment step Create a new workflow in the GitHub warehouse, as follows: ```yaml name: CI/CD on: push: branches: - master jobs: build: runs-on: ubuntu-latest steps: - name: Checkout uses: actions/checkout@v2 - name: Setup Node.js env uses: actions/setup-node@v2-beta with: node-version: '12.x' - name: Build App run: npm install && npm run build - name: Deploy App uses: easingthemes/ssh-deploy@v2.1.5 env: SSH_PRIVATE_KEY: ${{ secrets.DEPLOY_KEY }} ARGS: "-rltgoDzvO --delete" with: server: ${{ secrets.SERVER }} port: ${{ secrets.PORT }} username: ${{ secrets.USERNAME }} working-directory: ${{ secrets.DEPLOY_DIR }} local-folder: ./dist/ ``` This workflow will be submitted to The master branch is triggered, and then the following steps are performed: - Check out the code - Set up the Node.js environment - Build the web application - Deploy the web application using SSH 3. Configure the deployment location In the Settings of the GitHub repository, select Secrets, add the The secret keys of DEPLOY_DIR, SERVER, PORT, and USERNAME are the deployment directory, server address, port number, and user name, respectively. 4. Automatically run tests Add test steps in CI/CD workflow, and test results can be displayed in Pull Request: ```yaml name: CI/CD on: push: branches: - master pull_request: jobs: build: runs- on: ubuntu-latest steps: - name: Checkout uses: actions/checkout@v2 - name: Setup Node.js env uses: actions/setup-node@v2-beta with: node-version: '12.x' - name : Install Dependencies run: npm install - name: Run Tests run: npm run test ``` The above are the basic steps to automatically build and deploy web applications using GitHub Actions, which can be modified and optimized as needed.