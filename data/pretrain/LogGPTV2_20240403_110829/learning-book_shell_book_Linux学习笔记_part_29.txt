内核本身也可以看成是一个“程序”。为什么内核需要配置文件？内核需要了解系统中用户和组的列表
进而管理文件权限（即根据权限判定特定用户（UNIX_USERS）是否可以打开某个文件）。注意，这些文
件不是明确地由程序读取的，而是由系统库所提供的一个函数读取，并被内核使用。例如，程序需要某
个用户的（加密过的）密码时不应该打开/etc/passwd文件。相反，程序应该调用系统库的getpw(）函
数。这种函数也被称为系统调用。打开/etc/passwd文件和之后查找那个被请求的用户的密码都是由
内核（通过系统库）决定的。
除非另行指定，Red HatLinux系统中大多数配置文件都在/etc目录中。配置文件可以大致分为下面
几类：
2、配置文件分类：
访问文件
/etc/host.conf
告诉网络域名服务器如何查找主机名。（通常是/etc/hosts
然后就是名称服务器：可通过netconf 对其进行更改）
包含（本地网络中）已知主机的一个列表。如果系统的IP不
/etc/hosts
是动态生成，就可以使用它。对于简单的主机名解析（点分表
示法），在请求DNS或NIS网络名称服务器之前，
/etc/hosts.conf 通常会告诉解析程序先查看这里。
/etc/hosts.allow
请参阅hosts_access 的联机帮助页。至少由 tcpd 读取。
/etc/hosts.deny
请参阅hosts_access 的联机帮助页。至少由 tcpd 读取。
引导和登录/注销
/etc/issue &
这些文件由mingetty（和类似的程序）读取，用来向从终端（issue）或
/etc/issue.net
它们包括几行声明Red Hat 版本号、名称和内核ID 的信息。它们由
---
## Page 126
rc.local 使用。
/etc/redhat-release
包括一行声明Red Hat版本号和名称的信息。由rc.local使用。
通常在所有运行级别运行，级别作为参数传送。例如，要以图形（Graphics）
/etc/rc.d/rc
模式（X-Server）引导机器，请在命令行运行下面的命令：init5。运
行级别5表示以图形模式引导系统。
/etc/rc. d/rc. local
非正式的。可以从rc、rc.sysinit 或/etc/inittab 调用。
/etc/rc.d/rc.sysinit
通常是所有运行级别的第一个脚本。
从rc运行的脚本（X表示1到5之间的任意数字），这些目录是特
定“运行级别”的目录。当系统启动时，它会识别要启动的运行级别，然
/etc/rc.d/rc/rcX.d
后调用该运行级别的特定目录中存在的所有启动脚本。例如，系统启动时
通常会在引导消息之后显示“enteringrun-level3”的消息：这意味着
/etc/rc.d/rc3.d/目录中的所有初始化脚本都将被调用。
文件系统
内核提供了一个接口，用来显示一些它的数据结构，这些数据结构对于决定诸如使用的中断、初始化
的，称为/proc文件系统。很多系统实用程序都使用这个文件系统中存在的值来显示系统统计信息。
例如，/proc/modules 文件列举系统中当前加载的模块。1smod命令读取此信息，然后将其以人们可
以看懂的格式显示出来。下面表格中指定的mtab文件以同样的方式读取包含当前安装的文件系统的
/proc/mount 文件。
这将随着/proc/mount文件的改变而不断改变。换句话说，文件系统被安装和
卸载时，改变会立即反映到此文件中。
1.文件格式
/etc/mtab的格式和/etc/fstab是一样的.但这个文件不能算是用户配置文件，
他是由系统维护的.和/etc/fstab的区别在于，fstab是系统启动时需挂载的文
件系统列表，而mtab是系统当前已挂载的文件系统列表，它由系统维护，在用户
/etc/mtab
执行了mount或者umount命令后自动更新.用户不应该对此文件作任何修改
2.安全性
/etc/mtab的默认权限仍然是644
3.相关命令
mount
umount
smbmount
1.文件格式
/etc/fstab记载了系统启动时自动挂载的文件系统。一行为一条记录。每条记
录有6个字段，字段间用空格或者tab键分开。这六个字段分别是：设备名称，
挂载点（除交换分区为swap外，都必须是一个存在的目录名），文件系统类型，
/etc/fstab
mount 选项，是否需要dump（1表示需要，0表示不需要），在reboot期间fsck
检查的顺序（激活文件系统设定为1，其余文件系统设定为2，若设定为0表示
该文件系统不需要被检查）。
在linux和windows共存时，也许想开机自动挂载windows 分区，那么就可以
在这个文件里加上相应的记录。
---
## Page 127
某些时候对硬盘分区作了调整以后，这里也需要做一些相应的修改。否则会出
现一些问题
可用的mount 选项：
async
对该文件系统的所有1/0操作都异步执行
I0
该文件系统是只读的
I’W
该文件系统是可读可写的
at ime
更新每次存取inode的存取时间
auto
可以使用-a选项mount
defaults
使用预设的选项：rw,suid,dev,exec,auto,nouser,async
dev
解释在文件系统上的字符或区块设备
exec
允许执行二进制文件
noat ime
不要在这个文件系统上更新存取时间
noauto
这个文件系统不能使用-a选项来mount
nodev
不要解释在文件系统上的字符或区块设备
noexec
不允许在mounted文件系统上执行任何的二进制文件。这个选项对于具有包含
非它自己的二进制结构的文件系统服务器而言非常有用
nosuid
不允许 setuid和 setgid位发生作用。（这似乎很安全，但是在安装suidperl
后，同样不安全）。
nouser
限制一般非root用户mount 文件系统
remount
尝试重新mount已经mounted的文件系统.这通常是用来改变文件系统的mount
标志，特别是让只读的文件系统变成可擦写的
suid
允许 setuid和 setgid 位发生作用
sync
文件系统的所有1/0同步执行
user
允许一般非root用户mount文件系统。这个选项会应用noexec,nosuid,nodev
这三个选项（除非在命令行上有指定覆盖这些设定的选项）。
3.安全性
---
## Page 128
/etc/fstab的默认权限是644，所有者和所有组均为root
2.相关命令
mount
JP
列举计算机当前“可以安装”的文件系统。这非常重要，因为计算机引导时将
运行mount-a命令，该命令负责安装fstab的倒数第二列中带有“1”标记
的每一个文件系统。
/etc/mtools.conf
DOS类型的文件系统上所有操作（创建目录、复制、格式化等等）的配置。
系统管理
1.文件格式
/etc/group存储了系统中所有用户的基本信息.它的格式和/etc/passwd的格
式基本类似，这里就说简单一点，
/etc/group也是由一条条的记录组成.每条记录分4个字段.分别是组名，组口
令，组ID和该组包含用户列表.其中组口令不再使用（现在只是保留为x）.最
后一个域是一个用逗号分隔的用户名列表，这个组的成员就是在这里列出的所
有用户，
2.安全性
/etc/group
/etc/group的默认权限是644，所有者和所有组均为root.注意经常检察
3.相关命令
groupadd
groupde1
groupmod
groups
包含有效的组名称和指定组中包括的用户。单一用户如果执行多个任务，可以
存在于多个组中。例如，如果一个“用户”是“project1”工程组的成员，同
时也是管理员，那么在group文件中他的条目看起来就会是这样的：user：*：
groupid : project1
这是一个普通的文本文件.你可以在里面写上你喜欢的任何东西./etc/nologin
的作用在于，如果它存在，那么系统将拒绝任何非root用户的登录请求，并对其
/etc/nologin
它登录用户显示此文件的内容
此文件常由系统在停机前自动生成，有时系统管理员也会手工生成它，用以禁止
其它用户登录，方便进行一些管理工作
1.文件格式
/etc/passwd存储了系统中所有用户的基本信息.可以说这是系统中最重要的一
个配置文件，对它作任何修改一定要小心谨慎.同时要经常检察这个文件，包括
它的内容和权限设置
使用vi编辑程序打开此文件，可以看到这个文件由许多行记录组成.每一行记
etc/passwd
录对应着一个用户.我们以第一行为例.第一行一般是root用户的记录，尽管这
不是必需的，实际上用户记录出现的顺序并没有任何的意义，
在我的系统中./etc/passwd的第一行看起来是这样的：
root :x:0:0:root:/root :/bin/bash
每一条记录都由7个字段组成，每个字段之间用冒号隔开.第一个字段是用户
名，示例中是root.第二个字段是用户口令，示例中是一个字符x，但这并不表示
---
## Page 129
root的口令是单个字符x，而是说用户口令被加密了，并且加密口令也没有放在
本文件中，而是放到了/etc/shadow（参考/etc/shadow）.假如删除这个x，那么
的组ID,即gid.这里要注意，系统分辨两个用户是看他们的uid是否相同而不
是看他们的用户名是否相同.用户名不同但uid相同的两个用户实际上是同一
个用户.对组来说也有类似的规则.所以这两个字段大家一定要注意，第五个字
段是用户全称，没有什么实际用途，相当于注释，这里是root.第六个字段是用户
的主目录（home），即登录系统后默认所处目录，这里是/root.最后一个字段是
用户的登录shell，可以是系统拥有的任何一个shel1的完整路径，这里是
/bin/bash.注意，这个字段可以有一个特殊的值，即/sbin/nologin.如果把一个
用户的登录shel1设置为/sbin/nologin的话，系统将禁止此用户的本地登录.
请参阅“man passwd”。它包含一些用户帐号信息，包括密码（如果未被shadow
程序加密过）。
2.安全性
/etc/passwd的默认权限为644，所有者和所有组均为root.切记，在任何情况下
都不要更改它
3.相关命令
passwd
useradd
userde1
adduser
usermod
users
/etc/rpmrc
rpm命令配置。所有的rpn命令行选项都可以在这个文件中一起设置，这样，
当任何rpm命令在该系统中运行时，所有的选项都会全局适用。
包含设备名称，由tty行组成（每行一个名称，不包括前面的/dev/），root
用户在这里被允许登录。
1.文件格式
这是一个设备文件的列表.文件名取相对于/dev的相对路径.如，/dev/tty1记
为 tty1
root只有从这个列表中列出的设备上才可以登录系统
例如：
代码：
as
$cat /etc/securretty
tty1
tty2
tty3
这里root 被限定只能从/dev/tty1，/dev/tty2，/dev/tty3这三个设备上登录
系统
如果/etc/securretty不存在的话，那么root将可以从任何设备登录系统，
2.安全性
/etc/securetty的默认权限是600,所有者和所有组都是root
/etc/shadow
包含加密后的用户帐号密码信息，还可以包括密码时效信息。包括的字段有：
---
## Page 130
登录名
加密后的密码
从1970年1月1日到密码最后一次被更改的天数
距密码可以更改之前的天数
距密码必须更改之前的天数
密码到期前用户被警告的天数
密码到期后帐户被禁用的天数
从1970年1月1日到帐号被禁用的天数
1.文件格式
/etc/shadow文件保存的是用户名，密码，用户账号设置相关信息。
例：
root : $1$6UviCNvh$WTR0zPMek41KmzD0Z1DdV1 : 12264:3: 4 : 5:6 : 12267:
第一段：root-
用户注册名
第二段：$1$6UviCNvh$WTR0zPMek41KmzD0Z1DdV1--—加密口令
第三段：12264--
一上次更动密码的日期，以1970年1月1日为1,1天加1
第四段：3
密码将被允许修改之前的天数（0表示“可在任何时间修
改”）
第五段：4
系统将强制用户修改为新密码之前的天数（1表示“永远
都不能修改”）
第六段：5-
密码过期之前，用户将被警告过期的天数（-1表示“没有
警告”）
第七段：6-
密码过期之后，系统自动禁用帐户的天数（-1表示“永远
不会禁用”）
第八段：12267-----该帐户被禁用的天数（-1表示“该帐户被启用”）.以1970
年1月1日为1,1月2日为2
第九段
保留供将来使用
注：第2段中为*表示帐号不可登录，如密码前为！！或只有！！表示帐号被锁
2.安全性
---
## Page 131
/etc/shadow的默认所有者和所有组均为root.
建议运行#chattr+i/etc/shadow来保护文件使其不被意外地删除或重写
3.相关命令
passwd
useradd
userdel
usermod
1.文件格式
/ect/gshadow文件保存的是用户和组群设置的信息
例：
root : 1! : :root, wa1
第一段：组名
第四段：该组包含用户列表
2.安全性
/ect/gshadow
/etc/gshadow的默认所有者和所有组均为root.
建议运行#chattr+i/etc/shadow来保护文件使其不被意外地删除或重写
3.相关命令
groupadd
groupde1
powdno.18