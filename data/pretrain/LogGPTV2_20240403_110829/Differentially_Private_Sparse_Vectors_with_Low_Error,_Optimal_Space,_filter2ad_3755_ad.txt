(ğ‘ğ‘)ğ‘–(ğ‘ âˆ’ ğ‘)
(cid:18)2ğ‘–
ğ‘–
(cid:19)
âˆâˆ‘ï¸
ğ‘›
(cid:18)2ğ‘–
(cid:19)
ğ‘–
ğ‘–
(ğ‘ğ‘)ğ‘–
= 2(ğ‘ âˆ’ ğ‘)
ğ‘–=0
4ğ‘ğ‘
(ğ‘ âˆ’ ğ‘)2 .
=
We are now ready to find the expected last non-negative step of
an infinite simple random walk as:
ğ‘–=0 ğ‘–(cid:0)2ğ‘–
The last equality follows from the identityâˆ
2ğ‘ğ‘
(ğ‘âˆ’ğ‘)3 . See Appendix A for a proof of this identity.
ğ‘–
(cid:1)(ğ‘ğ‘)ğ‘– =
â–¡
We are now ready to bound E[|ğ‘¦ğ‘– âˆ’ Ëœğ‘¦ğ‘–|]. We consider entries
with value at most ğ›½, i.e., ğ‘¦ğ‘– â‰¤ ğ‘š.
Lemma 4.7. Let ğ‘¦ğ‘– â‰¤ ğ‘š and ğ›¾ = ğ›¼+2
1+ ğ›¼ğ‘˜
value of |ğ‘¦ğ‘– âˆ’ Ëœğ‘¦ğ‘–| is bounded such that
E[|ğ‘¦ğ‘– âˆ’ Ëœğ‘¦ğ‘–|] â‰¤ 4ğ›¼ + 4
ğ›¼2
ğ‘ 
+ 4ğ›¾ + 4
ğ›¾2
.
âˆ’ 2. Then the expected
from the definition of Â¯ğ‘¦ğ‘– as a maximum thatğ‘¦ğ‘–
Proof. Recall the definition of ğ‘ƒ from Algorithm 3. Let Â¯ğ‘¦ğ‘– âˆˆ ğ‘ƒ
denote an element furthest from ğ‘¦ğ‘– that is |ğ‘¦ğ‘– âˆ’ ğ‘| â‰¤ |ğ‘¦ğ‘– âˆ’ Â¯ğ‘¦ğ‘–| for
all ğ‘ âˆˆ ğ‘ƒ. It it clearly sufficient to consider Â¯ğ‘¦ğ‘– for the proof since
|ğ‘¦ğ‘– âˆ’ Ëœğ‘¦ğ‘–| â‰¤ |ğ‘¦ğ‘– âˆ’ Â¯ğ‘¦ğ‘–|. We first consider the case of Â¯ğ‘¦ğ‘– â‰¤ ğ‘¦ğ‘–. It follows
ğ‘—= Â¯ğ‘¦ğ‘–+1 Ëœğ‘§â„ ğ‘— (ğ‘–),ğ‘— â‰¤ 0.
As such at least half the bits ( Ëœğ‘§â„ Â¯ğ‘¦ğ‘–+1(ğ‘–), Â¯ğ‘¦ğ‘–+1, . . . , Ëœğ‘§â„ğ‘¦ğ‘– (ğ‘–),ğ‘¦ğ‘–) must be
zero, that is they were flipped by randomized response in Step (3)
of Algorithm 2. As such the length of the longest interval ending
at bit Ëœğ‘§â„ğ‘¦ğ‘– (ğ‘–),ğ‘¦ğ‘–
where at least half the bits were flipped is an upper
bound on the value of ğ‘¦ğ‘– âˆ’ Â¯ğ‘¦ğ‘–. The expected size of said interval is
bounded by the expected last non-negative step of a simple random
walk with ğ‘ =
1
ğ›¼+2. It follows from Lemma 4.6 that:
E[ğ‘¦ğ‘– âˆ’ Â¯ğ‘¦ğ‘– | Â¯ğ‘¦ğ‘– â‰¤ ğ‘¦ğ‘–] â‰¤
4ğ‘ğ‘
(ğ‘ âˆ’ ğ‘)2 =
4ğ›¼+4
(ğ›¼+2)2
ğ›¼2
(ğ›¼+2)2
4ğ›¼ + 4
ğ›¼2
=
.
We can use a similar argument when ğ‘¦ğ‘– â‰¥ Â¯ğ‘¦ğ‘– to show that at
least half the bits in ( Ëœğ‘§â„ğ‘¦ğ‘–+1(ğ‘–),ğ‘¦ğ‘–+1, . . . , Ëœğ‘§â„ Â¯ğ‘¦ğ‘– (ğ‘–), Â¯ğ‘¦ğ‘–) must be 1 since
Â¯ğ‘¦ğ‘– is a maximum. In this case we have to consider the possibility
of hash collisions. Each hash function maps to [ğ‘ ] and at most ğ‘˜
entries result in a hash collision. The probability of a hash collision
is at most ğ‘˜
ğ‘  using a union bound. As such for ğ‘— > ğ‘¦ğ‘– we have
ğ›¼+2 . We let 1+ ğ›¼ğ‘˜
1+ ğ›¼ğ‘˜
Pr[ Ëœğ‘§â„ ğ‘— (ğ‘–),ğ‘— = 1] â‰¤ (1 âˆ’ ğ‘˜
1
ğ›¾+2
such that E[ Â¯ğ‘¦ğ‘– âˆ’ ğ‘¦ğ‘–
ğ›¾2 by Lemma 4.6 and the
ğ‘  Â· ğ‘ =
ğ‘  ) Â· ğ‘ + ğ‘˜
| Â¯ğ‘¦ğ‘– â‰¥ ğ‘¦ğ‘–] â‰¤ 4ğ›¾+4
ğ›¼+2 =
ğ‘ 
ğ‘ 
Session 4D: Differential Privacy CCS â€™21, November 15â€“19, 2021, Virtual Event, Republic of Korea1229calculation above. We isolate ğ›¾ to find:
1
ğ›¾ + 2 =
ğ›¾ + 2 =
ğ›¾ =
(â‡”)
(â‡”)
ğ‘ 
1 + ğ›¼ğ‘˜
ğ›¼ + 2
ğ›¼ + 2
1 + ğ›¼ğ‘˜
ğ›¼ + 2
1 + ğ›¼ğ‘˜
ğ‘ 
ğ‘ 
âˆ’ 2 .
Note that ğ›¾ > 0 holds due to the requirement ğ‘  > 2ğ‘˜ of Algo-
rithm 2. By conditional expectation, we may upper bound the total
expected error by
E[|ğ‘¦ğ‘– âˆ’ Ëœğ‘¦ğ‘–|] â‰¤ E[|ğ‘¦ğ‘– âˆ’ Â¯ğ‘¦ğ‘–|]
â‰¤ E[ğ‘¦ğ‘– âˆ’ Â¯ğ‘¦ğ‘– | Â¯ğ‘¦ğ‘– â‰¤ ğ‘¦ğ‘–] + E[ Â¯ğ‘¦ğ‘– âˆ’ ğ‘¦ğ‘– | Â¯ğ‘¦ğ‘– â‰¥ ğ‘¦ğ‘–]
â‰¤ 4ğ›¼ + 4
ğ›¼2
+ 4ğ›¾ + 4
ğ›¾2
.
(1)
â–¡
As such we can bound the expected per-entry error for entries
with a true value of at most ğ›½ by a function of the parameters ğ›¼
and ğ‘ . In Section 6 we discuss the choice of these parameters based
on the upper bond and experiments. For any fixed values of ğ›¼ and
ğ‘  we have:
ğ‘˜
Lemma 4.8. Let ğ›¼ = Î˜(1) and ğ‘  = Î˜(ğ‘˜). Then the expected per-
entry error of Algorithm 3 is E[|ğ‘¥ğ‘– âˆ’ Ëœğ‘¥ğ‘–|] â‰¤ max(0, ğ‘¥ğ‘– âˆ’ ğ›½) + ğ‘‚(1).
Proof. It follows from Lemmas 4.4 and 4.7 that the expected
error for any entry bounded by ğ›½ is:
(cid:18) 1
2 + 4ğ›¼ + 4
ğ›¼2
(cid:19)
+ 4ğ›¾ + 4
ğ›¾2
Â· ğ›¼ ,
E[|ğ‘¥ğ‘– âˆ’ Ëœğ‘¥ğ‘–| | ğ‘¥ğ‘– â‰¤ ğ›½] â‰¤
where ğ›¾ = ğ›¼+2
1+ ğ›¼ğ‘˜
âˆ’ 2. Entries above ğ›½ have an additional error of
up to ğ‘¥ğ‘– âˆ’ ğ›½, since ğ‘¦ğ‘– = ğ‘š and ğ‘¦ğ‘– > ğ‘š are represented identically
in the embedding by Algorithm 2. Since ğ›¼ and ğ‘˜
ğ‘  are constants we
have:
ğ‘ 
E[|ğ‘¥ğ‘– âˆ’ Ëœğ‘¥ğ‘–|] â‰¤ max(0, ğ‘¥ğ‘– âˆ’ ğ›½) + ğ‘‚(1) .
â–¡
Next, we bound the tail probabilities for the per-entry error of the
mechanism. We bound the error of the estimate Ëœğ‘¦ğ‘–, which implies
bounds on the error of the mechanism.
Lemma 4.9. Let ğ›¾ = ğ›¼+2
1+ ğ›¼ğ‘˜
ğ‘ 
Then for Algorithm 3 we have:
âˆ’2 and ğœ > 0. Let ğ‘ =
ğ›¾+2 and ğ‘ = 1âˆ’ğ‘.
1
Pr[|ğ‘¦ğ‘– âˆ’ Ëœğ‘¦ğ‘–| â‰¥ ğœ] â‰¤ 2 Â· (4ğ‘ğ‘)ğœ/2
âˆš
ğœ‹(ğ‘ âˆ’ ğ‘)
,
Proof. Let ğ‘† be a simple random walk. We find an upper bound
on the probability that the position of the last non-negative step in
8
ğ‘—
ğ‘›
(cid:19)
(cid:18)2ğ‘—
âˆâˆ‘ï¸
Pr[(max
ğ‘† is at least ğœ:
: ğ‘†ğ‘› â‰¥ 0) â‰¥ ğœ] =
âˆâˆ‘ï¸
ğ‘—=âŒˆğœ/2âŒ‰
â‰¤ ğ‘ âˆ’ ğ‘âˆš
ğ‘ âˆ’ ğ‘âˆš
â‰¤ (4ğ‘ğ‘)ğœ/2
(cid:1) â‰¤ 4ğ‘—âˆš
where the first inequality follows from(cid:0)2ğ‘—
âˆš
ğœ‹(ğ‘ âˆ’ ğ‘) ,
ğ‘—=âŒˆğœ/2âŒ‰
(4ğ‘ğ‘) âŒˆğœ/2âŒ‰
1 âˆ’ 4ğ‘ğ‘
=
ğœ‹
ğœ‹
(ğ‘ğ‘) ğ‘— (ğ‘ âˆ’ ğ‘)
(4ğ‘ğ‘) ğ‘—
ğ‘—
when ğ‘— â‰¥ 1 [9].
The last inequality follows from 1âˆ’ 4ğ‘ğ‘ = (ğ‘ âˆ’ ğ‘)2. As discussed in
the proof of Lemma 4.7, the expectation of |ğ‘¦ğ‘– âˆ’ Ëœğ‘¦ğ‘–| can be bounded
1
ğ›¾+2.
by two random walks each with ğ‘ at most
â–¡
ğ›¾+2 and ğ‘ = 1 âˆ’ ğ‘. With
1
Lemma 4.10. Let ğ›¾ = ğ›¼+2
1+ ğ›¼ğ‘˜
âˆ’ 2, ğ‘ =
probability at least 1 âˆ’ ğœ“ for Algorithm 3 we have:
ğœ‹ ğ‘—
ğ‘ 
2 log(cid:16)
(cid:17)
|ğ‘¦ğ‘– âˆ’ Ëœğ‘¦ğ‘–| â‰¤
2
âˆš
ğœ‹ (ğ‘âˆ’ğ‘)
log(1/(4ğ‘ğ‘))
ğœ“
.
Proof. We set ğœ“ =
2Â·(4ğ‘ğ‘)ğœ/2
âˆš
ğœ‹ (ğ‘âˆ’ğ‘) and isolate ğœ as follows:
=
ğœ“ =
(4ğ‘ğ‘)âˆ’ğœ/2
2 Â· (4ğ‘ğ‘)ğœ/2
âˆš
ğœ‹(ğ‘ âˆ’ ğ‘)
2
âˆš
ğœ‹(ğ‘ âˆ’ ğ‘)
2
âˆš
ğœ‹(ğ‘ âˆ’ ğ‘)
2
âˆš
ğœ‹ (ğ‘âˆ’ğ‘)
log(1/(4ğ‘ğ‘))
By Lemma 4.9 we have: Pr[|ğ‘¦ğ‘– âˆ’ Ëœğ‘¦ğ‘–| â‰¤ ğœ] â‰¥ 1 âˆ’ ğœ“.
(cid:18)
2 log(cid:16)
log(1/(4ğ‘ğ‘)) Â· ğœ
2 = log
ğœ =
ğœ“
ğœ“
ğœ“
(cid:19)
(cid:17)
.
â–¡
Up to constant factors, the tail probabilities of our mechanism
are similar to the properties of the Laplace mechanism summarized
in Proposition 2.7. The probabilities depend on the parameters of
the mechanism. In Section 6 we fix the parameters and evaluate the
error in practice. We summarize the tail probabilities for |ğ‘¥ğ‘– âˆ’ Ëœğ‘¥ğ‘–|
in Lemma 4.11.
Lemma 4.11. Let ğ›¾ = ğ›¼+2
1+ ğ›¼ğ‘˜
âˆ’ 2, ğ‘ =
ğœ â‰¥ ğ›¼. Then for Algorithm 3 we have:
ğ‘ 
ğ›¾+2 , ğ‘ = 1 âˆ’ ğ‘, ğ‘¥ğ‘– â‰¤ ğ›½, and
1
2 Â· (4ğ‘ğ‘)(ğœ/2ğ›¼)âˆ’1/2
Pr[|ğ‘¥ğ‘– âˆ’ Ëœğ‘¥ğ‘–| â‰¥ ğœ] <
âˆš
ğœ‹(ğ‘ âˆ’ ğ‘)
With probability at least 1 âˆ’ ğœ“ we have:
2
âˆš
ğœ‹ (ğ‘âˆ’ğ‘)
log(1/(4ğ‘ğ‘))
|ğ‘¥ğ‘– âˆ’ Ëœğ‘¥ğ‘–| <(cid:169)(cid:173)(cid:173)(cid:171)1 +