1
strace抓取ssh登录凭证的问题
起因是在p⽜的知识星球⾥有师傅提问到这个问题：
关于https://xz.aliyun.com/t/7698⼀⽂中提到的⽤strace抓取ssh密码的⽅法。以前看到有⼈提到抓密
码可以但是抓私钥不能登录这个问题，但是也没做实验，只是简单的以为是抓取的私钥不完整之类，没有
深究。后来⼀个师傅提到这个私钥根本不是⽤来登录的，所以就研究了⼀下。
因为ssh中⽤密码登录的时候，虽然传来的请求会通过公钥加密，但是在服务端对密码有⼀个解密过程，如
下图所示。
所以在服务端是有可能抓到密码的。
为什么能抓到密码
为什么抓不到密钥
2
⽤密钥登录的时候，服务端会⽣成⼀个随机的字符串，然后⽤公钥加密这个字符串发给客户端，然后客户
端解密，最后服务端再去对⽐客户端解密的结果是否正确。下图仅作为说明，细节不⼀定完全符合。
这个过程中根本不存在客户端的私钥传递的过程，所以是不可能抓到登录私钥的。
总结就是，可以抓密码，抓不到私钥。