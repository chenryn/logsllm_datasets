• 与全局存量自动报警类似，单条模版报
警无需配置，创建完成后可修改参数。
此时修改后的参数只会对该模版生效
聚类报警 - 报警卡片通知
| 报警记录页面 | • | 当用户完成日志聚类相关通知/报警的规则配置 |
|---|---|---|
| 报警记录页面 |• |后，即可等待报警卡片的通知/报警进入正常的 |
| 报警记录页面 |• |报警流程 |
日志聚类页面
| 报警详情页面 | • | 卡片上携带日志模版内容及相关页面的跳转链 |
|---|---|---|
| 报警详情页面 |• |接，方便查看详情信息进行排障 |
服务监控页面
报 
警 
详
日志聚类页面 情 
页
内部某平台报警列表页面
案例介绍报 
警 
详
日志聚类页面 情 
页
内部某平台报警列表页面
案例介绍
 案例二: ES proxy 问题 案例三：网络抖动
FAQ 与按代码行聚合统计有什么区别
按代码行聚合统计存在的缺点主要有：
1. 无法分析语义信息，无法发挥日志的核心价值 
2. 代码一但变更，历史数据就失去作用，无法对比前后变化 
3. 报警能力单一，无法设置有针对性、有效果的日志报警
而日志聚类结合智能聚类报警可以很好的解决以上问题，具有以下优点：
1. 将语义信息相似的日志聚合在一起并生成模板，一目了然，方便快速获取错误信息 
2. 不受代码变更的影响，保证时序数据连贯性，方便前后对比，支持快速定位系统推荐关注的日志模板，帮用户识别指定类型的日志 	(如最近新增等）
3. 除了支持用户对单条模板设置报警外，同时支持对全量模板设置新模板通知、自动报警等，一键监控全局
日志模版其他场景应用 	归因分析、变更监控、数据治理日志模版其他场景应用 	归因分析、变更监控、数据治理
开放能力 - OpenAPI 介绍
| 基 | 归因 | 变更 | … | … |
|---|---|---|---|---|
| 于 |归因 |变更 |… |… |
| 于 |分析 |变更 |… |… |
| 已 |分析 |变更 |… |… |
| 有 |分析 |变更 |… |… |
| 能 |分析 |变更 |… |… |
| 力 |分析 |变更 |… |… |
| 构 |数据 |质检 |… |… |
| 建 |数据 |质检 |… |… |
| 更 |数据 |质检 |… |… |
| 多 |数据 |质检 |… |… |
| 场 |数据 |质检 |… |… |
| 景 |治理 |质检 |… |… |
归因分析场景 1 - 报警关联日志模式 
将生成的日志模式信息关联到业务报警，帮助RD更快地找到根因将生成的日志模式信息关联到业务报警，帮助RD更快地找到根因
•	将调用下游/接口调用报警事件内的指标序列作为主指标，对应 
	服务的错误日志模版时间序列作为关联时序备选集，将主指标 
	与备选集进行关联分析，目标是获取本次告警最可能有关的日 
	志信息
•	用户收到的报警卡片上会附着最有可能导致本次报警事件的日 
	志模版 Top3，在报警详情页上也可以看到对应信息
•	点击卡片上的日志模式，可以跳转到平台上日志聚类页面，方便 
	用户排障
归因分析场景 1 - 报警关联日志模式 
PCMCI 
在考虑两个时间序列向量相关性的同时，会考虑到其他隐藏变量的影响以及时间维 度上的平移，再进行关联分析。
主要步骤有：
•	构造内所有时间序列变量的带有时间滞后的父子集作为备选集，根据是所有 	变量的假设检验的统计量 
	连接所有时间序列变量，之后把一些partial correlation拒绝原假设的时间序•列变量剔除，生成完整的关联关系拓扑图
•
• 在生成对应的时间序列拓扑图后，计算出生成节点间的转移概率矩阵 
根据计算出来的转移概率矩阵，从异常节点出发进行1000次的随机游走，最终计
	算落在每个点的次数，并进行归一化
•	最后，根据每条时间序列的异常程度以及落点次数进行加权获得最终关联分析结 	果
归因分析场景 2 - 智能词云 场景共建团队 
某业务团队
降低排障时日志的阅读难度，提高整体的易用性
支持展示变量分布
支持针对某个日志内 
容进行打标
展示各日志模式的占比、显著性分数、匹配的日志内容
|  | 归因分析场景 2 - 智能词云 |  |
|---|---|---|
|  |归因分析场景 2 - 智能词云 |某业务团队 |
| • |对日志进行预处理及分词，统计词频并落全局词库 | |
• 根据全局词库与当前日志文件分析结果，计算模版词分数及模版分数，并落模板库• 根据全局词库与当前日志文件分析结果，计算模版词分数及模版分数，并落模板库
归因分析场景 2 - 智能词云 
具体的步骤是：
•	首先算法会针对日志原文中出现的过长字母数字串、常见变量（电话号码、ip地址等）进行正则匹配并替换。随后再利用分隔符对日志进行 	切分转化为token串
•	对于每个token，统计当前日志词频以及从全局词袋获取全局词频，我们通过对大量日志的统计研究发现，显著词往往在当前日志文件中占 	比较高，但是在全局文件中占比较低，所以定义了显著分数score来衡量一个词是显著词的概率大小，计算方式如下：
• 푠푐() = 푐푢_푐푢푐푢_푠푢 /푔푙푙_푐푢
阈值是所有显著分数的3/4分位数，大于该阈值的为显著词，小于该阈值的用*替代（非显著词），相同模式的日志归为一种模版，将模版中显
著词的分数加和、归一化后得到严重性权重著词的分数加和、归一化后得到严重性权重
푤푔ℎ() = 	 푠푐() 
푀( 푠푐()1. . .  푠푐())× 100 
变更质检场景 1 - 日志模式数量突变检测 
通过对日志模式趋势变化的检测，提升变更检测的准确性和召回率
• 相比于基于代码行聚合结果的异常判定，基 于 日 志 模
式可以提高拦截的召回率和准确率
• 通 过对变更 服 务相 关的 接 口 黄金 指 标、日 志 模 版 时序
及自定义业务指标进行定时异常检测，对检测到的异
常以报警卡片的方式及时通知用户
变更质检场景 2 - 小流量阶段新增日志模式检测 
对变更期间小流量阶段的新增日志模式配置单独的报警，增加事故召回率
•
• stage = canary 
相较于全局新增日志模版报警，小流量阶段的报警阈值会更敏感
数据治理场景 - 热点日志分析数据治理场景 - 热点日志分析 
分析热点日志并给出治理建议，辅助用户治理无效日志，减少服务日志成本
• 相关统计数据：服务日志TTL，Agent侧
/Proxy侧24h日志流量峰值、均值
• 寻找成本黑洞：定位热点日志、超长日志、
高频日志
• 整体治理建议：识别不同类型日志并给出
处理建议
| 数据治理场景 - 热点日志分析 |  |  |
|---|---|---|
| 数据治理场景 - 热点日志分析 | |某业务团队 |
|  |• |模式视角 / 代码行视角，两种不同形式的统 |
计方式，可以通过 TAB 页切换
• 模式: 提取日志中包含的模式信息，去掉日
志中的动态变量信息，仅保留静态常量部分
• 类型：对日志进行分类，给出有针对性的治
理建议
• 统计数据：平均字符数 / 总字符占比 / 日志
条数 / 条数占比
截止目前，预计全年节省无效数据成本8400+万，流量峰值下降300GB/s截止目前，预计全年节省无效数据成本8400+万，流量峰值下降300GB/s
未来规划 
	LLM for Ops
	LLM for Ops 
利用 LLM 增强日志排查、日志模式提取、日志异常检测，进一步提升日志分析技术
	LLM for Ops 
利用 CoT 实现完整的故障智能分析场景，将日志分析技术更好的用于排障过程中，降低 MTTR
1. 智能报警
2. 
3. 
4. 
5. 
6. 指标关联 
指标下钻 
日志聚类 
链路分析 
执行修复
总结
总结
本次交流内容
•
• 日志聚类与聚类报警 
日志模版在归因分析、变更质检、数据治理等场景
的应用
• LLM for Ops
期待未来的交流内容
•
• 事件中心、报警事件聚合与分析 LLM在Ops领域更多的落地场景