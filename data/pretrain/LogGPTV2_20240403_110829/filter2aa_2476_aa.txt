CREATING THE DEFCON CHINA 1.0 BADGE
joe Grand aka kingpin
introduction / badge history
• bring community together through interactivity 
• create game to encompass the defcon experience 
• simple design that could be expanded during/after defcon 
• interactive, command-based menu for additional exploration
goals
• complete tasks, get rewarded 
• 4 roots and 4 branches, each with 4 leds 
• when task is complete, badge inserted into programmer to 
unlock LED 
• when each root is complete, magic happens 
• when all roots are complete, more magic happens
gameplay
early concepts
Prototyping
block diagram
DEFCON China 1.0 Badge Block Diagram
Document v1.0
May 17, 2019
Joe Grand, Grand Idea Studio, Inc.
I2C
MCU
ATmega328P
Arduino Mini
3.3V, 8MHz
Accelerometer
LIS3DH
USB
Host PC
USB Micro-B
LED x32
Serial-to-USB
FT231X
3
FPC Edge 
Connector
12
4 + 4
LED Driver
74HC595
LDO
MCP1700
Power Switch
USB
5V
3.0V
Coin Cell
3V
DEFCON China 1.0 Badge Block Diagram
Document v1.0
May 17, 2019
Joe Grand, Grand Idea Studio, Inc.
I2C
MCU
ATmega328P
Arduino Mini
3.3V, 8MHz
Accelerometer
LIS3DH
USB
Host PC
USB Micro-B
LED x32
Serial-to-USB
FT231X
3
FPC Edge 
Connector
12
4 + 4
LED Driver
74HC595
LDO
MCP1700
Power Switch
USB
5V
3.0V
Coin Cell
3V
Hardware
USB
POWER
LED 
control
ACCELEROMETER
mcu
FPC
• First for conference badge 
• new material (for us) opens up new risks/challenges 
• specific stack-up to meet edge connector requirements 
• MAJOR SUPPORT by electronic interconnect, adapt electronics
FLEXIBLE PRINTED CIRCUIT (FPC)
• edge connector as interface to the outside world 
• UART, I2C, AVR ICSP 
• used with programming shield to set/read state of badge leds
FLEXIBLE PRINTED CIRCUIT (FPC)
pin 1
pin 12
1. GND 
2. SCK 
3. MISO 
4. MOSI 
5. /RST 
6. SDA
7. SCL 
8. SIN 
9. SOUT 
10. /SENSE 
11. GPIO 
12. VCC
FLEXIBLE PRINTED CIRCUIT (FPC)
IT BENDS!
• test 
• test 
• test
Schematic
Programmed w/ FT_PROG
To Host
1
2
3
4
5
P2
TE 2173157-2
0.1uF
C9
USB Micro B
0.01uF
C3
220R@100MHz
L1
5V0_USB
RTS
2
DCD
8
RI
5
VCC
15
TXD
20
CTS
9
CBUS0
18
3V3OUT
13
DTR
1
RXD
4
CBUS1
17
DSR
7
USBDM
12
USBDP
11
VCCIO
3
RESET
14
GND
16
GND
6
CBUS2
10
CBUS3
19
U1
FT231XS
27
R4
27
R2
47pF
C4
47pF
C5
VUSB
D_N
D_P
TXRXLED#
PWREN#
BCD#
3.3k
R7
5V0_USB
D33
LED
10k
R9
0.1uF
C10
USB activity indicator
RESET
29
D0 (RXD)
30
D1 (TXD)
31
D2 (INT0)
32
D4
2
VCC
6
GND
5
XTAL1
7
XTAL2
8
D5
9
D6
10
D7
11
D8
12
D9
13
D10 (SS)
14
D11 (MOSI)
15
D12 (MISO)
16
D13 (SCK)
17
AVCC
18
AREF
20
GND
21
A0
23
A1
24
A2
25
A3
26
A4 (SDA)
27
A5 (SCL)
28
GND
3
VCC
4
A6
19
A7
22
D3 (INT1)
1
U2
ATmega328P-AU
0.1uF
C6
10k
R1
VCC
PWREN_2#
10k
R10
5V0_USB
5V0_SW
AVR_SIN
AVR_SOUT
AVR_RST#
DTR#
ADC2
15
GND
12
SDA/SDI/SDO
6
SDO/SA0
7
VDD_IO
1
ADC1
16
GND
5
RES
10
INT1
11
VDD
14
SCL/SPC
4
INT2
9
CS
8
ADC3
13
NC
2
NC
3
U3
LIS3DHTR
SCL
SDA
VCC
I2C address = 0x19
0.1uF
C12
10uF
C11
0.1uF
C1
0.1uF
C2
0.1uF
C7
VCC
0.1uF
C8
10uH
L2
VCC
VCC
0.1uF
C13
Q1
IRLML6402
LED_DATA
10k
R5
10k
R6
VCC VCC
SCL
SDA
ACCEL_INT
10k
R8
FLEX_SOUT
10k
R3
VCC
VCC
OSC1
1
GND
2
OSC2
3
Y1
PBRC8.00MR50X000
BCD#
PWREN#
LED_OE#
OE
13
LCLK
12
SDI
14
RST
10
SCLK
11
QA
15
QB
1
QC
2
QD
3
QE
4
QF
5
QG
6
QH
7
SDO
9
VDD
16
GND
8
U4
74HC595PW
LED_OE#
LED_DATA
LED_LATCH
LED_CLK
LED_LATCH
LED_CLK
D29
D30
D31
D32
D25
D26
D27
D28
D21
D22
D23
D24
D17
D18
D19
D20
D13
D14
D15
D16
D9
D10
D11
D12
D5
D6
D7
D8
D1
D2
D3
D4
Root 1
Root 2
Root 3
Root 4
Branch 1
Branch 2
Branch 3
Branch 4
47
R11
ROW0
ROW1
ROW2
COL0
COL1
COL2
COL3
COL4
COL5
COL6
COL7
ROW3
47
R12
47
R13
47
R14
COL0
COL1
COL2
COL3
COL4
COL5
COL6
COL7
ROW0
ROW1
ROW2
ROW3
SW1 SPST
FLEX_SIN
FLEX_SENSE#
MOSI
MISO
SCK
RST#
GPIO
AVR ICSP
SAO
Flex Cable Serial Interface
VCC
Mates to FCI HFW12S-2STE1LF
UART
1
2
3
4
5
6
7
8
9
10
11
12
P1
Header 12
GPIO
PIC101 
PIC102 
COC1 
PIC201 
PIC202 
COC2 
PIC301 
PIC302 
COC3 
PIC401 
PIC402 
COC4 
PIC501 
PIC502 
COC5 
PIC601 
PIC602 
COC6 
PIC701 
PIC702 
COC7 
PIC801 
PIC802 
COC8 
PIC901 
PIC902 
COC9 
PIC1001 
PIC1002 
COC10 
PIC1101 
PIC1102 
COC11 
PIC1201 
PIC1202 
COC12 
PIC1301 
PIC1302 
COC13 
PID101 
PID102 
COD1 
PID201 
PID202 
COD2 
PID301 
PID302 
COD3 
PID401 
PID402 
COD4 
PID501 
PID502 
COD5 
PID601 
PID602 
COD6 
PID701 
PID702 
COD7 
PID801 
PID802 
COD8 
PID901 
PID902 
COD9 
PID1001 
PID1002 
COD10 
PID1101 
PID1102 
COD11 
PID1201 
PID1202 
COD12 
PID1301 
PID1302 
COD13 
PID1401 
PID1402 
COD14 
PID1501 
PID1502 
COD15 
PID1601 
PID1602 
COD16 
PID1701 
PID1702 
COD17 
PID1801 
PID1802 
COD18 
PID1901 
PID1902 
COD19 
PID2001 
PID2002 
COD20 
PID2101 
PID2102 
COD21 
PID2201 
PID2202 
COD22 
PID2301 
PID2302 
COD23 
PID2401 
PID2402 
COD24 
PID2501 
PID2502 
COD25 
PID2601 
PID2602 
COD26 
PID2701 
PID2702 
COD27 
PID2801 
PID2802 
COD28 
PID2901 
PID2902 
COD29 
PID3001 
PID3002 
COD30 
PID3101 
PID3102 
COD31 
PID3201 
PID3202 
COD32 
PID3301 PID3302 
COD33 
PIL101 
PIL102 
COL1 
PIL201 
PIL202 
COL2 
PIP101 
PIP102 
PIP103 
PIP104 
PIP105 
PIP106 
PIP107 
PIP108 
PIP109 
PIP1010 
PIP1011 
PIP1012 
COP1 
PIP201 
PIP202 
PIP203 
PIP204 
PIP205 
COP2 
PIQ101 
PIQ102 
PIQ103 
COQ1 
PIR101 
PIR102 
COR1 
PIR201 
PIR202 
COR2 
PIR301 
PIR302 
COR3 
PIR401 
PIR402 
COR4 
PIR501 
PIR502 
COR5 
PIR601 
PIR602 
COR6 
PIR701 
PIR702 
COR7 
PIR801 
PIR802 
COR8 
PIR901 
PIR902 
COR9 
PIR1001 
PIR1002 
COR10 
PIR1101 
PIR1102 
COR11 
PIR1201 
PIR1202 
COR12 
PIR1301 
PIR1302 
COR13 
PIR1401 
PIR1402 
COR14 
PISW101 
PISW102 
COSW1 
PIU101 
PIU102 
PIU103 
PIU104 
PIU105 
PIU106 
PIU107 
PIU108 
PIU109 
PIU1010 
PIU1011 
PIU1012 
PIU1013 
PIU1014 
PIU1015 
PIU1016 
PIU1017 
PIU1018 
PIU1019 
PIU1020 
COU1 
PIU201 
PIU202 
PIU203 
PIU204 
PIU205 
PIU206 
PIU207 
PIU208 
PIU209 
PIU2010 
PIU2011 
PIU2012 
PIU2013 
PIU2014 
PIU2015 
PIU2016 
PIU2017 
PIU2018 
PIU2019 
PIU2020 
PIU2021 
PIU2022 
PIU2023 
PIU2024 
PIU2025 
PIU2026 
PIU2027 
PIU2028 
PIU2029 
PIU2030 
PIU2031 
PIU2032 
COU2 
PIU301 
PIU302 
PIU303 
PIU304 
PIU305 
PIU306 
PIU307 
PIU308 
PIU309 
PIU3010 
PIU3011 
PIU3012 
PIU3013 
PIU3014 
PIU3015 
PIU3016 
COU3 
PIU401 
PIU402 
PIU403 
PIU404 
PIU405 
PIU406 
PIU407 
PIU408 
PIU409 
PIU4010 
PIU4011 
PIU4012 
PIU4013 
PIU4014 
PIU4015 
PIU4016 
COU4 
PIY101 
PIY102 
PIY103 
COY1 
PIQ103 
PIC1002 
PID3301 
PIL102 
PIQ102 
PIR901 
PIU1015 
PIR801 
PIU2032 
PIU3011 
NLACCEL0INT 
PIC601 
PIP105 
PIR102 
PISW102 
PIU2029 
PIU4010 
NLAVR0RST# 
PIU1020 
PIU2030 
NLAVR0SIN 
PIU104 
PIU2031 
NLAVR0SOUT 
PIU1019 
PIU2023 
NLBCD# 
PID2901 
PID3001 
PID3101 
PID3201 
PIU4015 
NLCOL0 
PID2101 
PID2201 
PID2301 
PID2401 
PIU401 
NLCOL1 
PID1301 
PID1401 
PID1501 
PID1601 
PIU402 
NLCOL2 
PID501 
PID601 
PID701 
PID801 
PIU403 
NLCOL3 
PID101 
PID201 
PID301 
PID401 
PIU404 
NLCOL4 
PID901 
PID1001 
PID1101 
PID1201 
PIU405 
NLCOL5 
PID1701 
PID1801 
PID1901 
PID2001 
PIU406 
NLCOL6 
PID2501 
PID2601 
PID2701 
PID2801 
PIU407 
NLCOL7 
PIC402 
PIP202 
PIR201 
NLD0N 
PIC502 
PIP203 
PIR401 
NLD0P 
PIC602 
PIU101 NLDTR# 
PIP1010 
PIR301 
PIU201 
NLFLEX0SENSE# 
PIP108 
PIU2013 
NLFLEX0SIN 
PIP109 
PIU2012 
NLFLEX0SOUT 
PIC101 
PIC201 
PIC301 
PIC401 
PIC501 
PIC701 
PIC801 
PIC901 
PIC1102 
PIC1201 
PIC1302 
PIP101 
PIP205 
PIR802 
PISW101 
PIU106 
PIU1016 
PIU203 
PIU205 
PIU2021 
PIU305 
PIU3010 
PIU3012 
PIU408 
PIY102 
PIP1011 
PIU2011 
NLGPIO 
PIP102 
PIU2017 
PIU4011 
NLLED0CLK 
PIP104 
PIU2015 
PIU4014 
NLLED0DATA 
PIP103 
PIU2016 
PIU4012 
NLLED0LATCH 
PIU2014 
PIU4013 
NLLED0OE# 
PIC702 
PIU2020 
PIC802 
PIL201 
PIU2018 
PIC902 
PIU103 
PIU1013 
PIU1014 