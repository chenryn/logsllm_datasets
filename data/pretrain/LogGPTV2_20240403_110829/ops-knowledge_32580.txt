问题： CSRF的成因及防御措施（不用token如何解决) 
回答： 好的，我会为你详细回答这个问题。
首先，什么是 CSRF？
CSRF 的全称是 Cross-Site Request Forgery，中文翻译为跨站请求伪造。它是一种利用用户的身份在未经授权的情况下执行恶意操作的安全漏洞。

那么，CSRF 是怎么产生的呢？主要是因为网站没有对用户的请求进行身份验证或者验证不严格导致的。攻击者通过构造一个包含目标站点合法凭据的表单或链接，在受害者不知情的情况下触发了该请求并发送给目标站点服务器。由于这个请求携带了受害者的合法凭证信息，所以服务器会误认为这是合法的操作而予以处理，从而造成了安全风险。

为了防止 CSRF 攻击的发生，我们可以采取以下几种防御措施：
1. 使用验证码：可以在关键性的操作页面中引入验证码机制，要求用户输入正确的验证码才能提交请求。这样可以有效地阻止自动化工具和机器人发起的 CSRF 请求。
2. 设置 HTTP 头部字段 `X-CSRF-Token` 或类似的自定义头部字段来标记每个 POST/PUT/PATCH 请求中的令牌值。然后在受保护资源处检查此标头是否存在以及是否与当前登录用户匹配。如果匹配，则允许访问；如果不匹配则拒绝访问。
3. 对于敏感操作，如修改密码、删除数据等，可以通过重定向到另一个具有相同功能但无需验证的 URL 来实现。这种方式虽然不能完全杜绝 CSRF 攻击，但是能大大降低被成功利用的概率。
4. 在 Cookie 中添加 SameSite 属性以限制第三方 Cookie 的使用范围。这可以帮助减少由其他站点创建的 Cookie 被用于发起 CSRF 攻击的可能性。
5. 可以结合多种防护手段一起应用，形成多层防线，提高系统的安全性。
需要注意的是，以上提到的一些方法并不能单独解决问题，而是需要综合考虑具体情况选择合适的方式组合起来实施。同时也要及时关注最新的技术发展动态，不断更新和完善自身的防御策略。