可能原因
原因1：接口参数配置不一致。
原因2：链路层协议发生变化。
处理步骤
步骤1 使用display ospf interface interface-type interface-number查看两端配置是否一致。
l 如果是，则请执行步骤3。
l 如果不是，则请执行步骤2。
文档版本 06 (2017-09-12) 华为专有和保密信息 645
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 43 OSPF
步骤2 根据组网情况，进行如下操作：
l 如果允许将两端配置修改为一致，则请参照配置指南，将两端的hello、dead、poll
等定时器参数改为一致，检查告警是否消除。
– 如果告警消除，则请执行步骤4。
– 如果告警还存在，则请执行步骤3。
l 如果不允许将两端配置修改为一致，则请执行步骤3。
步骤3 请收集该设备的告警信息、日志信息和配置信息，并联系技术支持人员。
步骤4 结束。
----结束
43.5 OSPF_1.3.6.1.2.1.14.16.2.5 ospfVirtIfConfigError
Trap Buffer 信息解释
A packet is received on the virtual interface from a router whose configuration conflicts with
the local configuration. (VirtIfAreaId=[area-id], VirtIfNeighbor=[neighbor-router-id],
ProcessId=[process-id], RouterId=[router-id], ConfigErrorType=[error-type],
PacketType=[packet-type], InstanceName=[instance-name])
虚连接接口配置错误，可能是由于参数配置冲突引起的。
Trap 属性
Trap属性 描述
Alarm or Event Event
Trap Severity Warning
Mnemonic Code ospfVirtIfConfigError
Trap OID 1.3.6.1.2.1.14.16.2.5
Alarm ID 该Trap是事件Trap，不涉及告警ID。
Alarm Type 该Trap是事件Trap，不涉及告警类型。
Raise or Clear 该Trap是事件Trap，不涉及告警产生或恢复。
Match trap 该Trap是事件Trap，不涉及配对Trap。
Trap Buffer 信息参数
参数名称 参数含义
VirtIfAreaId 区域ID。
VirtIfNeighbor 虚连接邻居Router ID。
文档版本 06 (2017-09-12) 华为专有和保密信息 646
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 43 OSPF
参数名称 参数含义
ProcessId 进程号。
RouterId 本交换机的Router ID。
ConfigErrorType 错误类型。
l 1：Bad Version
l 2：Area Mismatch
l 3：Unknown Nbma Neighbour
l 4：Unknown Virtual Neighbour
l 7：NetMask Mismatch
l 8：Hello Interval Mismatch
l 9：Dead Interval Mismatch
l 10：Option Mismatch
l 11：Mtu Mismatch
l 12：Duplicate RouterId
PacketType 报文类型。
l 1：Hello packet
l 2：DD packet
l 3：Request packet
l 4：Update packet
l 5：Acknowledgement packet
l 6：Update packet Retrans
l 7：Update packet flood
InstanceName 实例名称。
VB 信息参数
VB OID VB Name VB Index
1.3.6.1.2.1.14.1.1 ospfRouterId N/A
1.3.6.1.2.1.14.9.1.1 ospfVirtIfAreaId ospfVirtIfAreaId;
ospfVirtIfNeighbor;
1.3.6.1.2.1.14.9.1.2 ospfVirtIfNeighbor ospfVirtIfAreaId;
ospfVirtIfNeighbor;
1.3.6.1.2.1.14.16.1.2 ospfConfigErrorType N/A
1.3.6.1.2.1.14.16.1.3 ospfPacketType N/A
文档版本 06 (2017-09-12) 华为专有和保密信息 647
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 43 OSPF
对系统的影响
这个告警在虚连接接口收到配置参数错误报文时会发送。
可能原因
虚连接链路两端的接口参数配置冲突。
处理步骤
步骤1 使用display ospf vlink和display current-configuration configuration查看两端接口配置
是否一致。
l Y=>3。
l N=>2。
步骤2 根据组网情况，进行如下操作。
l 如果允许将两端配置修改为一致，通过以下命令修改配置，使两端配置一致。
– vlink-peer router-id [ dead dead-interval | hello hello-interval | retransmit
retransmit-interval | smart-discover | trans-delay trans-delay-interval | [ simple
[ plain plain-text | [ cipher ] cipher-text ] | { md5 | hmac-md5 | hmac-sha256 }
[ key-id { plain plain-text | [ cipher ] cipher-text } ] | authentication-null |
keychain keychain-name ] ] *
检查告警是否消除。
– Y=>4。
– N=>3。
l 如果不允许将两端配置修改为一致=>3。
步骤3 请收集该设备的告警信息、日志信息和配置信息，并联系技术支持人员。
步骤4 结束。
----结束
43.6 OSPF_1.3.6.1.2.1.14.16.2.6 ospfIfAuthFailure
Trap Buffer 信息解释
A packet is received on a non-virtual interface from a router whose authentication key or
authentication type conflicts with the local authentication key or authentication type.
(RouterId=[RouterId], IfIpAddress=[IfIpAddress], AddressLessIf=[AddressLessIf],
PacketSrc=[PacketSrc], ConfigErrorType=[ConfigErrorType], PacketType=[PacketType])
非虚连接接口从一台配置参数和本设备认证密码或认证类型冲突的设备上接收到一个
报文。
Trap 属性
Trap属性 描述
Alarm or Event Event
文档版本 06 (2017-09-12) 华为专有和保密信息 648
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 43 OSPF
Trap属性 描述
Trap Severity Warning
Mnemonic Code ospfIfAuthFailure
Trap OID 1.3.6.1.2.1.14.16.2.6
Alarm Type 该Trap是事件Trap，不涉及告警类型。
Raise or Clear 该Trap是事件Trap，不涉及告警产生或恢复。
Match trap 该Trap是事件Trap，不涉及配对Trap。
Trap Buffer 信息参数
参数名称 参数含义
RouterId 路由器标识。
IfIpAddress 接口地址。
AddressLessIf 接口索引。
PacketSrc 报文源地址。
ConfigErrorType 配置错误类型。
PacketType 报文类型。
AreaId 区域ID。
VB 信息参数
VB OID VB Name VB Index
1.3.6.1.2.1.14.1.1 ospfRouterId N/A
1.3.6.1.2.1.14.7.1.1 ospfIfIpAddress ospfIfIpAddress;
ospfAddressLessIf;
1.3.6.1.2.1.14.7.1.2 ospfAddressLessIf ospfIfIpAddress;
ospfAddressLessIf;
1.3.6.1.2.1.14.16.1.4 ospfPacketSrc N/A
1.3.6.1.2.1.14.16.1.2 ospfConfigErrorType N/A
1.3.6.1.2.1.14.16.1.3 ospfPacketType N/A
文档版本 06 (2017-09-12) 华为专有和保密信息 649
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 43 OSPF
对系统的影响
只要将链路两端的参数调整成一致就没有问题，一般不会影响业务。
可能原因
接口认证配置错误。
处理步骤
步骤1 使用display current-configuration查看两端设备的区域认证信息是否一致；并且通过
display current-configuration interface查看两端接口认证是否一致，接口认证优先于区
域认证。
l 如果是，则请执行步骤3。
l 如果不是，则请执行步骤2。
步骤2 根据组网情况，进行如下操作：
l 如果允许将两端配置修改为一致，则请执行步骤3。
l 如果不允许将两端配置修改为一致，则请执行步骤4。
步骤3 如果是明文认证，则将认证密码修改为一致。如果是密文认证，则重新配置两端的认
证方式，检查告警是否消除。
l 如果告警消除，则请执行步骤5。
l 如果告警还存在，则请执行步骤4。
步骤4 请收集该设备的告警信息、日志信息和配置信息，并联系技术支持人员。
步骤5 结束。
----结束
43.7 OSPF_1.3.6.1.2.1.14.16.2.7 ospfVirtIfAuthFailure
Trap Buffer 信息解释
A packet is received on a virtual interface from a router whose authentication key or
authentication type conflicts with the local authentication key or authentication type.
(VirtIfAreaId=[area-id], VirtIfNeighbor=[neighbor-router-id], ProcessId=[process-id],
RouterId=[router-id], ConfigErrorType=[error-type], PacketType=[packet-type],
InstanceName=[instance-name])
虚连接接口认证失败，可能是由于虚连接接口认证配置错误。
Trap 属性
Trap属性 描述
Alarm or Event Event
Trap Severity Warning
文档版本 06 (2017-09-12) 华为专有和保密信息 650
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 43 OSPF
Trap属性 描述
Mnemonic Code ospfVirtIfAuthFailure
Trap OID 1.3.6.1.2.1.14.16.2.7
Alarm ID 该Trap是事件Trap，不涉及告警ID。
Alarm Type 该Trap是事件Trap，不涉及告警类型。
Raise or Clear 该Trap是事件Trap，不涉及告警产生或恢复。
Match trap 该Trap是事件Trap，不涉及配对Trap。
Trap Buffer 信息参数
参数名称 参数含义
VirtIfAreaId 区域ID。
VirtIfNeighbor 虚连接邻居Router ID。
ProcessId 进程号。
RouterId 本交换机的Router ID。
ConfigErrorType 错误类型。
l 1：Bad Version
l 2：Area Mismatch
l 3：Unknown Nbma Neighbour
l 4：Unknown Virtual Neighbour
l 7：NetMask Mismatch
l 8：Hello Interval Mismatch
l 9：Dead Interval Mismatch
l 10：Option Mismatch
l 11：Mtu Mismatch
l 12：Duplicate RouterId
PacketType 报文类型。
l 1：Hello packet
l 2：DD packet
l 3：Request packet
l 4：Update packet
l 5：Acknowledgement packet
l 6：Update packet Retrans
l 7：Update packet flood
InstanceName 实例名称。
文档版本 06 (2017-09-12) 华为专有和保密信息 651
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 43 OSPF
VB 信息参数
VB OID VB Name VB Index
1.3.6.1.2.1.14.1.1 ospfRouterId N/A
1.3.6.1.2.1.14.9.1.1 ospfVirtIfAreaId ospfVirtIfAreaId;
ospfVirtIfNeighbor;
1.3.6.1.2.1.14.9.1.2 ospfVirtIfNeighbor ospfVirtIfAreaId;
ospfVirtIfNeighbor;
1.3.6.1.2.1.14.16.1.2 ospfConfigErrorType N/A
1.3.6.1.2.1.14.16.1.3 ospfPacketType N/A
对系统的影响
这个告警在虚连接接口收到配置参数错误报文时会发送。
可能原因
虚连接接口认证配置错误。
处理步骤
步骤1 通过display current-configuration configuration ospf命令，查看虚连接认证是否一致。
l Y=>3。
l N=>2。
步骤2 根据组网情况，进行如下操作。
l 允许将两端配置修改为一致=>3。
l 不允许将两端配置修改为一致=>4。
步骤3 如果是明文认证则将认证密码修改为一致，如果是密文认证则需要使用如下命令将两
边认证按照要求重新配置。
l vlink-peer router-id [ dead dead-interval | hello hello-interval | retransmit retransmit-
interval | smart-discover | trans-delay trans-delay-interval | [ simple [ plain plain-text |
[ cipher ] cipher-text ] | { md5 | hmac-md5 | hmac-sha256 } [ key-id { plain plain-text |
[ cipher ] cipher-text } ] | authentication-null | keychain keychain-name ] ] *
检查告警是否消除。
l Y=>5。
l N=>4。
步骤4 请收集该设备的告警信息、日志信息和配置信息，并联系技术支持人员。
文档版本 06 (2017-09-12) 华为专有和保密信息 652
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 43 OSPF
步骤5 结束。
----结束
43.8 OSPF_1.3.6.1.2.1.14.16.2.8 ospfIfRxBadPacket
Trap Buffer 信息解释
An OSPF packet that is received on a non-virtual interface cannot be parsed.
(RouterId=[RouterId], IfIpAddress=[IfIpAddress], AddressLessIf=[AddressLessIf],
PacketSrc=[PacketSrc], PacketType=[PacketType])
非虚连接接口收到一个不能被解析的OSPF报文，可能是由于受到攻击或与其他厂商设
备对接不成功。
Trap 属性
Trap属性 描述
Alarm or Event Event
Trap Severity Error
Mnemonic Code ospfIfRxBadPacket
Trap OID 1.3.6.1.2.1.14.16.2.8