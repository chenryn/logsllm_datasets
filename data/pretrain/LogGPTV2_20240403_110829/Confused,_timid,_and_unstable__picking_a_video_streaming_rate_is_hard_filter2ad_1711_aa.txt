# Title: Confused, Timid, and Unstable: Picking a Video Streaming Rate is Hard
# Authors: Te-Yuan Huang, Nikhil Handigol, Brandon Heller, Nick McKeown, Ramesh Johari

## Abstract
Modern commercial video streaming services use dynamic rate selection to ensure a high-quality user experience. Most of these services host content on standard HTTP servers in Content Delivery Networks (CDNs), necessitating client-side rate selection. We measured three popular video streaming services—Hulu, Netflix, and Vudu—and found that accurate client-side bandwidth estimation above the HTTP layer is challenging. Inaccurate estimates can lead to a feedback loop, resulting in variable and low-quality video. We term this phenomenon the "downward spiral effect" and provide insights into its root causes, as well as initial solutions to mitigate it.

## Categories and Subject Descriptors
C.2.0 [Computer-Communication Networks]: General; C.4 [Performance of Systems]: Measurement Techniques

## General Terms
Measurement

## Keywords
HTTP-based Video Streaming, Video Rate Adaptation

## 1. Introduction
Video streaming accounts for a significant and growing portion of Internet traffic, with Netflix and YouTube alone responsible for over 50% of peak download traffic in the U.S. [18]. Many major video streaming services, such as Hulu, Netflix, and Vudu, operate over HTTP and TCP, using third-party CDNs like Akamai, Level3, or Limelight. Streaming over HTTP offers several advantages: it is standardized across CDNs, well-established, and cost-effective. These benefits have enabled the rapid growth of affordable, high-quality movie and TV streaming.

When video is streamed over HTTP, the video service provider relies on TCP to estimate available bandwidth and select an appropriate video rate. If the estimated bandwidth is 1.5 Mb/s, the client might request a video rate of 1.3 Mb/s. The challenge is to find the highest safe video rate: too high, and the viewer experiences rebuffering; too low, and the video quality is poor. Both scenarios degrade the user experience and may drive viewers to other services [9].

This paper presents a measurement study of three popular HTTP-based video streaming services (Hulu, Netflix, and Vudu) to evaluate their rate selection performance. According to Consumer Reports [21], Netflix is the most popular video streaming provider in the U.S., followed by Hulu and Vudu.

## 2. Methodology
We conducted experiments to measure the performance of video rate selection in the presence of competing TCP flows. The competing flow is a long file download from the same CDN and often the same server to eliminate network path variations. For Service A and Service C, the competing flow is generated by an open-ended byte range request to the highest-rate file. For Service B, we use rtmpdump [20] over TCP to request the Flash version of the same video.

## 3. Results
All three services exhibit the "downward spiral effect"—a dramatic drop in video playback rate when a competing TCP flow starts. This effect is clearly visible in Figure 4, where the video stream initially operates alone but then competes with another TCP flow. The client's choice of a much lower video rate than the available bandwidth suggests an underestimation of available bandwidth.

### 3.1 Service A
Figure 4(a) shows the playback rate and throughput of a Service A video session. Initially, the client requests the highest video rate (1750 kb/s). When the competing flow starts after 400 seconds, the video rate drops to the lowest rate (235 kb/s) and remains there until the competing flow stops. In theory, both flows should share the link equally, allowing the client to continue at 1750 kb/s. Repeating the experiment 76 times, the downward spiral occurred in 67 cases (91%), with the client maintaining a rate above 1400 kb/s in only 9% of cases.

To confirm the availability of bandwidth, we manually selected the highest video rate (1750 kb/s) and disabled automatic rate selection. As shown in Figure 5, the client maintained the highest rate without rebuffering, indicating that the issue lies in the client's rate selection algorithm.

### 3.2 Service B
Figure 4(b) shows the same effect in Service B. With a 5 Mb/s bottleneck and a 20 ms RTT, the client should drop to 2500 kb/s. Instead, it drops to the lowest rate (650 kb/s) and occasionally to 1000 kb/s, with a corresponding drop in throughput.

### 3.3 Service C
Service C also exhibits the downward spiral effect. In the HD experiment (Figure 4(c)), with a 22 Mb/s bottleneck, the client starts at 9 Mb/s but drops to 4.5 Mb/s and 3 Mb/s. In the SD experiment (Figure 4(d)), with a 5 Mb/s bottleneck, the client starts at 2000 kb/s but drops to 1000 kb/s.

## 4. Discussion
The downward spiral effect occurs due to inaccurate client-side bandwidth estimation. While each service has unique characteristics, the common issue is the underestimation of available bandwidth. To address this, we suggest improving the client's rate selection algorithm to better estimate and utilize the available bandwidth.

## 5. Conclusion
Our study reveals that the "downward spiral effect" is a significant issue in HTTP-based video streaming. Accurate client-side bandwidth estimation is crucial for maintaining high-quality video. Future work should focus on developing more robust rate selection algorithms to prevent this effect and enhance the overall user experience.

## References
[18] Reference to peak download traffic data.
[21] Latest Consumer Reports on video streaming popularity.
[20] rtmpdump tool for generating competing flows.