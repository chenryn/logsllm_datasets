切换到原始值
右上角的下拉菜单，可以选择Graph/values/500 latest values，分别可以查看简易图表/值/最新的500个值.如果觉得
图表不是很直观，可以切换到原始值.
zabbix 自定义图表 Graph
概述
今天我们要讲的是 zabbix 自定义图表功能，这个自定义图表是什么呢？顾名思义,zabbix 提供了一个自定义图表的
功能，这不是废话么？呵呵~前面文章 讲到的《zabbix 简易图表》只能显示单个 item 的数据图表。如果我们想显
示多个信息到一个图表上，那必须使用 zabbix 自定义图表功能，比如，我 们最常用的网卡流量监控，一张流量图
上会包含进/出的流量信息。一个图表的数据可以来源一台主机，也可以来源于多台主机
配置定义图表
创建自定义图表步骤如下：
Configuration→Hosts（或者templates）,点击hosts/template列的Graphs，点击右上角的Create graph，出现如下
表单。
Graph属性:
属性 描述
Name 图表名称（唯一）
Width 图表宽度（单位：像素）(仅用于预览和pie/exploded图表).
Height 图表高度（单位：像素）
Graph type 图表类型:
Normal – 常规图表, 值显示为线条
Stacked – 叠图, 显示填充区域
Pie – 饼图
Exploded – “裂开的”饼图，显示部分切出的饼图
Show legend 显示图例,例如item名称与最大、平均、最小的数据，一般显示在图表的下方
Show working time 是否显示工作时间，如果选择这个复选框，那么非工作时间背景为灰色。备注：饼图
和爆炸式饼图没有这个参数
Show triggers 如果选择现象，那么触发器将会用红线表示. 两种饼图不包含这个功能
Percentile line (left) 左Y轴百分数
Percentile line (right) 右Y轴百分数
Y axis MIN value Y轴最小值：
Calculated – 自动计算Y轴最小值（取item最小值）
Fixed – 固.定Y轴最小值. 饼图与裂变式饼图没有这个参数
Item – 选中 item 的最新值（例如你选中某网卡，那么它的最小值将来自这个网卡
item的最新值）
Y axis MAX value Y轴最大值：
Calculated – 自动计算Y轴最大值（取item最大值）
Fixed – 固.定Y轴最大值. 饼图与裂变式饼图没有这个参数
Item – 选中 item 的最新值（例如你选中某网卡，那么它的最大值将来自这个网卡
item的最新值）
3D view 立体风格图表，仅适用于饼图与爆炸式饼图
Items 监控项，图表的数据来源
配置图表 items
图表的数据来源于items，点击add选择需要显示到图表的item，可以添加多个。
Item展示属性:
参数 描述
Sort order (0→100) 绘图顺序，可以上下拖动items来改变他们的顺序.这个顺序用来决定图层的顺序。
Name item名称
Type (仅用于两个饼图图表):
Simple – 按比例显示
Graph sum – 充满整个饼图
一 张图表只允许有一个items是Graph sum，否则报错：ERROR: Cannot display more than
one item with type “Graph sum”，通常用于影片，硬盘大小item使用Graph sum，剩
余空间则使用simple。这样一个饼图的硬盘使用情况便一目了然。
Function 当一个item有多种数值时,选择一种数值用于图表展示
all – 所有值 (最小、平均、最大)
min – 仅最小值
avg – 仅平均值
max – 进最大值
Draw style 绘制风格(只有常规图表存在该选项):
Line – 绘制线条
Filled region – 绘制填充区域
Bold line – 画粗线
Dot – 画点
Dashed line – 画虚线
Y axis side Y轴在左边还是右边
Colour 颜色
图表预览
在创建图表的过程中，我们可以随时预览修改的配置图表，点击标签preview即可。备注：如果是template预览时
没有意义的，毕竟没有任何数据。
关于触发器限制
如果图表的高度小于120像素，那么图标上将不会展示触发器相关信息。
zabbix Screens 视图配置
screen翻译成中文为“屏幕”，在超市、单位等等地方都比较常见到监控视频，视频上有多块小视频，实际上zabbix
screen和这个功能类似。你可以设置多个screen，每个screen可以显示特定信息，例如某台主机的cpu、内存、硬
盘、网卡流量使用状况，也可以显示text文本，甚至能够嵌入其他screen。不明白？看图
以上图片请点击查看大图，zabbix screen就是上面那个样子，上面都是小图表，zabbix screen支持很多格式。接着
往下看。
zabbix screen支持的元素类型
simple graphs
user-defined custom graphs
maps
other screens
plain text information
server information (overview)
hosts information (overview)
trigger information (overview)
host/hostgroup issues (status of triggers)
system status
data overview
clock
history of events
history of actions
URL (data taken from another location)
一共15种，最常用的是simple graphs，想对这些有更大的一个了解，请看后续章节，会有一个专门的演示
创建 screen
点击configuration–screen–create screen，输入如下信息：
属性 描述
Name screen名称，可以用中文
Columns 列个数
Rows 行个数
screen 元素添加
点击configuration–screen–“zabbix_screen_for_ttlsa”
说明：
1. change：可添加元素，例如图表、map、text等等元素
2. 加号：相应增加行或者列
3.减号：响应删除行或者列
点击Change，如下图：
参数说明
参数 说明
Resource simple graphs
user-defined custom graphs
maps
other screens
plain text information
server information (overview)
hosts information (overview)
trigger information (overview)
host/hostgroup issues (status of triggers)
system status
data overview
clock
history of events
history of actions
URL (data taken from another location)
Horizontal align 水平对齐方式：
Center（居中）
Left（左对齐）
Right（右对齐）
Vertical align 垂直对齐方式：
Middle（中间）
Top（顶部）
Bottom（底部）
Column span 列跨度，当前元素占用几个列
Row span 行跨度，当前元素占用几个行
Dynamic elements 动态元素
Dynamic elements
Dynamic elements 动态元素，有点不好理解。如果这个 screen 有一个元素选中了 Dynamic elements，在
monitoring->screen,screen 下拉列表选择这个 screen，会出现 hosts 下拉表，选中一个 hosts，如果当前元素不属于
这个主机，那么不会显示，如果属于这个主机便会显示。
普通的screen
可以看到仅有screens一个下拉列表
带动态元素的screen：
区别如下
 多了两个下拉列表，可以选择主机
 有一个时钟，当前时钟不属于任何hosts，所以不管你选哪一个host，他都能正常显示
 当前Host”gg”左侧出现”ERROR:No items defined”，这里是一个动态元素，因为动态元素不属于gg，所以
显示出错了。我们选择对的host，情况如下：
备注：
动态元素支持的类型：Graphs (custom graphs)、Simple graphs、Plain text
zabbix Slide shows 幻灯片展示
定义好 screen 之后，我们想了解服务器状况之时，一般会一个个 screen 点过去，zabbix 提供了幻灯片展示方法，
可以定义多个Slide，一个slide中可以包含多个screen。
创建 slide shows
点击Configuration — Slide shows– Create slide show
参数说明
参数 说明
Name 幻灯片名称
Default delay (in seconds) 默认幻灯片切换间隔时间
Slides 轮换显示的screen列表
Screen Screen名称.
Delay 当前screen需要被显示多久，如果设置为0或者不填写，将会使用默认值
Remove 移除screen
slide shows 展示
虽然slide shows配置与screen是分开的，但是展示却在一个菜单里，点击monitoring–screen，screens下拉菜单选
择slide shows
如果你觉得切换速度过慢/过慢，你可以点击加速图标（在加号后面一个，有点像书本），在弹出的菜单选择你调整
的速率
zabbix 网络拓扑图配置 network map
介绍
“zabbix network map”可以简单的理解为动态网络拓扑图，可以针对业务来配置zabbix map，通过map可以了解
应用的整体状况：服务器是否异常、网络是否有故障、应用当前什么状态。如果你不需要这些东西，至少你可以通
过network map绘制一张网络拓扑图。看看效果
创建 network map
点击Configuration → Maps–> Create map
参数说明
参数 描述
Name 名称，不能重复
Width 宽度，像素为单位
Height 高度，像素为单位
Background image 背景图像:
No image – 无背景图像(白色背景)
Image – 可以选择图片作为背景，不支持缩放（为啥我的zabbix没有这个选项）
Automatic icon mapping 图标映射, Administration → General → Icon mapping.
Icon highlighting 图表突出显示
Mark elements on trigger status 突出显示触发器状态
change
Expand single problem 显示故障名称
Advanced labels 为不同类型元素定义不同标签
Icon label type 图标名称:
Label – icon标签名
IP address – IP地址
Element name – 元素名称(如：主机名)
Status only – 状态(OK或者PROBLEM)
Nothing – 不显示
Icon label location 图标名称位置:
Bottom – 图标下方
Left – 图标左边
Right – 图标邮编
Top – 图标上方
Problem display 显示故障次数:
All – 所有次数
Separated – 分别显示未确认的故障与总故障数
Unacknowledged only – 只显示未确认故障的数量
Minimum trigger severity 低于选择故障严重性级别的故障将不会显示在map中。例如，选择了“Warning ”，
故障级别为“Information ”和“Not classified”的触发器事件都不会反映到map
中。Zabbix 2.2加入此参数.
URLs monitoring–map–你的map–点击你的元素会出现一个菜单，如果有指定urls，
那么url 会出现在当前菜单中。你可以点击当前url 来跳转到具体页面。urls 可以
使用macros: {MAP.ID}, {HOSTGROUP.ID}, {HOST.ID}, {TRIGGER.ID}
添加元素到 map 中
点击上方的图标”+”可以添加元素（host、group、trigger等），然后左上角会出现一个主机，这时候我们任意拖动
它，也可以点击图标”-“来删除它。点击这个元素，在弹出的属性框里面录入它的一些信息，一个元素就添加完成
了。
我们可以注意到在上方有“Grid [Shown|On] 20×20”，点击shown当前map的表格消失（此时文章变成了hidden），
再点击一次，表格又回来了。On表示当前map里面的元素都会按着表格对齐（和windows的桌面一样），点击On
文字变为Off，表示当前map里的元素可以任意拖动摆放。后面的20×20是一个下拉列表，表示表格的大小。
看看 map 元素属性
属性 描述
Type 元素类型:
Host – 代表主机，他所有的触发器状态都会反映到图标上
Map – map元素图标，点击之后会链接到相应的map
Trigger – 单个触发器状态
Host group – 代表组机组图标，组内所有主机的触发器状态都会反映到图标上
Image – 图标，不指向任何资源
Label 元素名称，可以使用macros，支持多行文本
Label location 名称所在位置:
Default – 默认位置，一般是bottom
Bottom – 图标底部
Left – 图标左边
Right – 图标右边