25.8.1.29 try_vector_engine_strategy
参数说明：设置行存表走向量化执行引擎的策略。通过设置该参数，可以使包含行存表
的查询可以转换为向量化的执行计划执行计算，从而提升类AP场景的复杂查询的执行性能。
南大通用数据技术股份有限公司
1266
GBase 8s V8.8开发者手册
该参数属于USERSET类型参数，请参考表15-1中对应设置方法进行设置。
取值范围：枚举型
 off，为默认取值，表示关闭本功能，即行存表不会转换为向量的执行计划执行。
 force，表示只要查询中不包含向量化引擎不支持的类型或者表达式，则不论查询的
基表为行存表、列存表，还是行列混合存储的，强制将查询转换为向量化的执行计
划执行计算。在这种情况下，针对不同的查询场景可能出现性能下降。
 optimal，表示在force的基础上，由优化器根据查询的复杂度进行选择是否将查询
语句转换为向量化的执行计划，尽可能避免转换为向量化的执行计划后出现性能下
降。
默认值：off
25.8.2 优化器开销常量
介绍优化器开销常量。这里描述的开销可以按照任意标准度量。只关心其相对值，因此
以相同的系数缩放它们将不会对优化器的选择产生任何影响。缺省时，它们以抓取顺序页的
开销为基本单位。也就是说将seq_page_cost设为1.0，同时其他开销参数以它为基准设置。
也可以使用其他基准，比如以毫秒计的实际执行时间。
25.8.2.1 seq_page_cost
参数说明：设置优化器计算一次顺序磁盘抓取页面的开销。
该参数属于USERSET类型参数，请参考表15-1中对应设置方法进行设置。
取值范围：浮点型，0～DBL_MAX。
默认值：1
25.8.2.2 random_page_cost
参数说明：设置优化器计算一次非顺序抓取磁盘页面的开销。
该参数属于USERSET类型参数，请参考表15-1中对应设置方法进行设置。
南大通用数据技术股份有限公司
1267
GBase 8s V8.8开发者手册
须知：
虽然服务器允许将random_page_cost设置的比seq_page_cost小，但是物理上实际不受
影响。如果所有数据库都位于随机访问内存中时，两者设置为相等很合理。因为在此种情况
下，非顺序抓取页并没有副作用。同样，在缓冲率很高的数据库上，应该相对于CPU参数
同时降低这两个值，因为获取内存中的页要比通常情况下开销小很多。
取值范围：浮点型，0～DBL_MAX。
默认值：4
说明：
- 对于特别表空间中的表和索引，可以通过设置同名的表空间的参数来覆盖这个值。
- 相对于seq_page_cost，减少这个值将导致系统更倾向于使用索引扫描，而增加这个值
使得索引扫描开销比较高。可以通过同时增加或减少这两个值来调整磁盘I/O相对于CPU
的开销。
25.8.2.3 cpu_tuple_cost
参数说明：设置优化器计算在一次查询中处理每一行数据的开销。
该参数属于USERSET类型参数，请参考表15-1中对应设置方法进行设置。
取值范围：浮点型，0～DBL_MAX。
默认值：0.01
25.8.2.4 cpu_index_tuple_cost
参数说明：设置优化器计算在一次索引扫描中处理每条索引的开销。
该参数属于USERSET类型参数，请参考表15-1中对应设置方法进行设置。
取值范围：浮点型，0～DBL_MAX。
默认值：0.005
南大通用数据技术股份有限公司
1268
GBase 8s V8.8开发者手册
25.8.2.5 cpu_operator_cost
参数说明：设置优化器计算一次查询中执行一个操作符或函数的开销。
该参数属于USERSET类型参数，请参考表15-1中对应设置方法进行设置。
取值范围：浮点型，0～DBL_MAX。
默认值：0.0025
25.8.2.6 effective_cache_size
参数说明：设置优化器在一次单一的查询中可用的磁盘缓冲区的有效大小。
设置这个参数，还要考虑GBase8s的共享缓冲区以及内核的磁盘缓冲区。另外，还要
考虑预计的在不同表之间的并发查询数目，因为它们将共享可用的空间。
这个参数对GBase8s分配的共享内存大小没有影响，它也不会使用内核磁盘缓冲，它
只用于估算。数值是用磁盘页来计算的，通常每个页面是8192字节。
该参数属于USERSET类型参数，请参考表15-1中对应设置方法进行设置。
取值范围：整型，1～INT_MAX，单位为8KB。
比默认值高的数值可能会导致使用索引扫描，更低的数值可能会导致选择顺序扫描。
默认值：128MB
25.8.2.7 allocate_mem_cost
参数说明：设置优化器计算HashJoin创建Hash表开辟内存空间所需的开销，供Hashjoin
估算不准时调优使用。
该参数属于USERSET类型参数，请参考表15-1中对应设置方法进行设置。
取值范围：浮点型，0～DBL_MAX。
默认值：0
25.8.3 基因查询优化器
介绍基因查询优化器相关的参数。基因查询优化器（GEQO）是一种启发式的查询规划
南大通用数据技术股份有限公司
1269
GBase 8s V8.8开发者手册
算法。这个算法减少了对复杂查询规划的时间，而且生成规划的开销有时也小于正常的详尽
的查询算法。
25.8.3.1 geqo
参数说明：控制基因查询优化的使用。
该参数属于USERSET类型参数，请参考表15-1中对应设置方法进行设置。
须知：
通常情况下在执行过程中不要关闭，geqo_threshold变量提供了更精细的控制GEQO的
方法。
取值范围：布尔型
 on表示使用。
 off表示不使用。
默认值：on
25.8.3.2 geqo_threshold
参数说明：如果执行语句的数量超过设计的FROM的项数，则会使用基因查询优化来
执行查询。
该参数属于USERSET类型参数，请参考表15-1中对应设置方法进行设置。
须知：
- 对于简单的查询，通常用详尽搜索方法，当涉及多个表的查询的时候，用GEQO 可
以更好的管理查询。
- 一个FULLOUTERJOIN构造仅作为一个FROM项。
取值范围：整型，2～INT_MAX。
默认值：12
南大通用数据技术股份有限公司
1270
GBase 8s V8.8开发者手册
25.8.3.3 geqo_effort
参数说明：控制GEQO在规划时间和规划质量之间的平衡。
该参数属于USERSET类型参数，请参考表15-1中对应设置方法进行设置。
须知：
geqo_effort实际上并没有直接做任何事情，只是用于计算其他影响GEQO的变量的默
认值。如果愿意，可以手工设置其他参数。
取值范围：整型，1～10。
须知：
比默认值大的数值增加了查询规划的时间，但是也增加了选中有效查询的几率。
默认值：5
25.8.3.4 geqo_pool_size
参数说明：控制GEQO使用池的大小，也就是基因全体中的个体数量。
该参数属于USERSET类型参数，请参考表15-1中对应设置方法进行设置。
取值范围：整型，0～INT_MAX。
须知：
至少是2，且有用的值一般在100到1000之间。设置为00，表示使用系统自适应方式，
GBase8s会基于geqo_effort和表的个数选取合适的值。
默认值：0
25.8.3.5 geqo_generations
参数说明：控制GEQO使用的算法的迭代次数。
该参数属于USERSET类型参数，请参考表15-1中对应设置方法进行设置。
取值范围：整型，0～INT_MAX。
南大通用数据技术股份有限公司
1271
GBase 8s V8.8开发者手册
须知：
必须至少是1，且有用的值介于100和1000之间。如果设置为0，则基于geqo_pool_size
选取合适的值。
默认值：0
25.8.3.6 geqo_selection_bias
参数说明：控制GEQO的选择性偏好，即就是一个种群中的选择性压力。
该参数属于USERSET类型参数，请参考表15-1中对应设置方法进行设置。
取值范围：浮点型，1.5～2.0。
默认值：2
25.8.3.7 geqo_seed
参数说明：控制GEQO使用的随机数生产器的初始化值，用来从顺序连接在一起的查
询空间中查找随机路径。
该参数属于USERSET类型参数，请参考表15-1中对应设置方法进行设置。
取值范围：浮点型，0.0～1.0。
须知：
不同的值会改变搜索的连接路径，从而影响了所找路径的优劣。
默认值：0
25.8.4 其他优化器选项
25.8.4.1 explain_dna_file
参数说明：指定explain_perf_mode为run，导出的csv信息的目标文件。
该参数属于USERSET类型参数，请参考表15-1中对应设置方法进行设置。
南大通用数据技术股份有限公司
1272
GBase 8s V8.8开发者手册
须知： 这个参数的取值必须是绝对路径加上.csv格式的文件名。
取值范围：字符串
默认值：空
25.8.4.2 explain_perf_mode
参数说明：此参数用来指定explain的显示格式。
该参数属于USERSET类型参数，请参考表15-1中对应设置方法进行设置。
取值范围：normal、pretty、summary、run
 normal：代表使用默认的打印格式。
 pretty：代表使用GBase8s改进后的新显示格式。新的格式层次清晰，计划包含了
plannodeid，性能分析简单直接。
 summary：代表是在pretty的基础上增加了对打印信息的分析。
 run：代表在summary的基础上，将统计的信息输出到csv格式的文件中，以便于
进一步分析。
默认值：pretty（当前版本参数取值仅normal生效，若设置为非normal，显示格式依然
为normal）
25.8.4.3 analysis_options
参数说明：通过开启对应选项中所对应的功能选项使用相应的定位功能，包括数据校验、
性能统计等，参见取值范围中的选项说明。
该参数属于USERSET类型参数，请参考表15-1中对应设置方法进行设置。设置时，
选择开启或者关闭的选项请使用'on()'或'off()'包括，未被显示指定的功能选项会维持原来的
值，参考格式：'on(option1,option2,…)'。
取值范围：字符串
 LLVM_COMPILE表示在explain performance显示界面中显示每个线程的codegen
编译时间。
南大通用数据技术股份有限公司
1273
GBase 8s V8.8开发者手册
 HASH_CONFLICT表示在数据库节点进程的pg_log目录中的log日志中显示hash
表的统计信息，包括hash表大小、hash链长、hash冲突情况。
 STREAM_DATA_CHECK表示对网络传输前后的数据进行CRC校验。
说明： pretty模式当前版本不支持。
默认值：ALL,on(),off(LLVM_COMPILE、HASH_CONFLICT、STREAM_DATA_CHECK)，
不开启任何定位功能。
25.8.4.4 cost_param
参数说明：该参数用于控制在特定的客户场景中，使用不同的估算方法使得估算值与真
实值更接近。此参数可以同时控制多种方法，与某一方法对应的位做与操作，不为0表示该
方法被选择。
当cost_param&1不为0，表示对于求不等值连接选择率时选择一种改良机制，此方法
在自连接（两个相同的表之间连接）的估算中更加准确。目前，已弃用cost_param&1 不
为0时的路径，默认选择更优的估算公式；
当cost_param&2不为0，表示求多个过滤条件（Filter）的选择率时，选择最小的作为
总的选择率，而非两者乘积，此方法在过滤条件的列之间关联性较强时估算更加准确；
该参数属于USERSET类型参数，请参考表15-1中对应设置方法进行设置。
取值范围：整型，0～INT_MAX
默认值：0
25.8.4.5 enable_partitionwise
参数说明：分区表连接操作是否选择智能算法。
该参数属于USERSET类型参数，请参考表15-1中对应设置方法进行设置。
取值范围：布尔型
 on表示选择智能算法。
 off表示不选择智能算法。
南大通用数据技术股份有限公司
1274
GBase 8s V8.8开发者手册
默认值：off
25.8.4.6 rewrite_rule
参数说明：标识开启的可选查询重写规则。有部分查询重写规则是可选的，开启它们并
不能总是对查询效率有提升效果。在特定的客户场景中，通过此GUC参数对查询重写规则
进行设置，使得查询效率最优。
此参数可以控制查询重写规则的组合，比如有多个重写规则：rule1、rule2、rule3、rule4。
可以设置：
setrewrite_rule=rule1; --启用查询重写规则rule1
setrewrite_rule=rule2,rule3; --启用查询重写规则rule2和rule3
setrewrite_rule=none; --关闭所有可选查询重写规则
该参数属于USERSET类型参数，请参考表15-1中对应设置方法进行设置。
取值范围：字符串
 none：不使用任何可选查询重写规则。
 lazyagg：使用LazyAgg查询重写规则（消除子查询中的聚集运算）。
 magicset: 使用MagicSet查询重写规则（从主查询中下推条件到子查询）。
 partialpush：使用PartialPush查询重写规则。
 uniquecheck：使用UniqueCheck查询重写规则（提升目标列中无agg的子查询语
句，在执行时检查返回行数是否为1行）。
 disablerep：使用DisableReplicate查询重写规则。
 intargetlist：使用InTargetList查询重写规则（提升目标列中的子查询）。
 predpushnormal：使用PredicatePush查询重写规则（下推谓词条件到子查询中）。
 predpushforce：使用Predicate Push查询重写规则（下推谓词条件到子查询中，尽
可能的利用索引加速）。
 predpush：在predpushnormal和predpushforce中根据代价选择最优计划。
南大通用数据技术股份有限公司
1275
GBase 8s V8.8开发者手册
默认值：magicset
25.8.4.7 enable_pbe_optimization
参数说明：设置优化器是否对以PBE（ParseBindExecute）形式执行的语句进行查询计
划的优化。
该参数属于SUSET类型参数，请参考表15-1中对应设置方法进行设置。
取值范围：布尔型。
 on表示优化器将优化PBE语句的查询计划。
 off表示不使用优化。
默认值：on
25.8.4.8 enable_global_plancache
参数说明：设置是否对PBE查询的执行计划进行缓存共享，开启该功能可以节省高并
发下数据库节点的内存使用。
在 打 开 enable_global_plancache 的 情 况 下 ， 为 保 证 GPC 生 效 ， 默 认
local_syscache_threshold不小于16MB。即如当前local_syscache_threshold小于16MB，则设
置为16MB，如大于16MB，则不改变。
该参数属于POSTMASTER类型参数，请参考表15-1中对应设置方法进行设置。
取值范围：布尔型。
 on表示对PBE查询的执行计划进行缓存共享。
 off表示不共享。
默认值：off
25.8.4.9 gpc_clean_timeout
参数说明：开启 enable_global_plancache的情况下，如果共享计划列表里的计划超过
gpc_clean_timeout的时间没有被使用，则会被清理掉。本参数用于控制没有使用的共享计划
的保留时间。
南大通用数据技术股份有限公司
1276
GBase 8s V8.8开发者手册
该参数属于SIGHUP类型参数，请参考表15-1中对应设置方法进行设置。
取值范围：整型，300\～86400，单位为秒
默认值：1800，即30min