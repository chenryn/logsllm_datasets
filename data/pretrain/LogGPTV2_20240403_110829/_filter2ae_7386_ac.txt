## 八、智能家庭中心
目前大部分智能连接设备存在的最大问题是，它们基本上都是作为一个独立的设备来与智能手机协同工作，并没有集成到一个更大的智能生态系统中。智能中心（smart
hub）部分解决了这个问题，该中心将多个节点联结在一处，不同智能设备之间可在此交换数据。虽然其他研究人员在寻找安全的智能中心方面已经做了许多研究，研究表明用户很难找到足够安全的智能中心，但我们仍然尝试了各种方法。我们的研究对象是带触摸屏幕的一款优质智能中心，能够在不同的物联网协议下工作。该设备的兼容性很好，能够与ZigBee和ZWave家庭自动化标准兼容，并且使用起来非常方便。根据厂商的描述，只需三分钟，用户就能通过触摸屏完成该设备的参数设置。
另外，该智能中心还可用作无线Wi-Fi路由器。
这款多功能设备支持各种功能（可作为路由器、范围扩展器、接入点或无线网桥），我们决定检测其中最常见也最为危险的一种安全风险，即未经授权从外部接入路由器。这种风险危害很大，一旦攻击成功，攻击者很可能会获取对用户智能家居及所有连接设备的完全控制权。
不出所料，实验表明该设备的确存在这种安全风险。
为了验证这个猜想，我们搭建了一个本地局域网，将一台个人电脑、智能设备和一个路由器连接在一起。这些网络设备都有各自的IP地址，我们成功扫描出可用的端口情况。最初的研究表明，默认情况下，设备在WAN上开放了两个端口。第一个为80端口，该端口是HTTP协议的常用端口。在Web应用场景中，服务器会使用该端口与客户端交互，以发送或接收HTML页面或者数据。如果80端口处于开放状态，则意味着任何用户都能够连接80端口，通过HTTP协议访问用户设备。
第二个为22端口，用户通过该端口与SSH（Secure
Shell）服务器通信来远程控制设备。如果攻击者能够获取或成功爆破root账户密码，就可以获取对设备的控制权，但通常情况下很难做到这一点。然而在研究过程中，我们发现智能中心中存在一个有趣的安全风险，能够使这种攻击过程变得更加简单。
在分析路由器的过程中，我们发现它可能存在一种非常常见的威胁风险，即为弱口令生成问题。在路由器系统中，我们发现了名为“rname”的一个ELF（Executable
and Linkable
Format，可执行和可链接格式）文件，其中包含一份名称列表。查看这份列表并对比屏幕上显示的密码，我们很容易可以发现，设备的密码会根据这份列表来生成。因此，攻击者不需要花费太长时间就能爆破出正确的口令。
经过硬件重置后，设备的口令有所变化（几个符号略有变化）。然而，主要的密码生成机制并没有改变，因此攻击者还是有可能能生成正确的密码。
此外我们发现，用户经常使用root账户来访问设备。因此，攻击者足以掌握登录用户名及基本的密码生成信息，这些信息可以给攻击者带来极大的便利。
如果该设备拥有公共IP地址，并且上述端口处于对外开放状态，那么大家都可以通过互联网从外部访问该路由器。另一种情况下，如果服务商或者ISP（Internet
Service Provider，互联网服务提供商）没有正确配置本地网络中相邻主机的可见状态，那么同一ISP内的整个本地网络都可以访问这些设备。
总的来说，与市场上的其他智能中心一样，这款优质设备依然暴露了非常严重的问题，这是入侵者喜闻乐见的攻击面，对此我们已见惯不怪。这个攻击面不仅覆盖了设备本身，而且还涵盖了其所在的整个网络环境。接下来是这次实验的总结部分。
## 九、总结
根据实验观察结果，我们发现IoT设备厂商在研发产品时都会假设如下前提条件：
1、由于设备功能有限，即使设备被成功攻击也不会造成严重后果，因此这类设备不会被攻击；
2、当设备不能通过简单的方法来与外部互联网联系，并且攻击者需要连入设备所在的本地网络才能实施攻击时，厂商会认为这种IoT设备的安全等级处于可以接受的范围。
我们必须承认的是，这些假设具有一定的合理性，但如果这一网络中的路由器或者多功能智能中心存在漏洞时（如我们前面提到的那款智能中心设备），连接到该节点的所有其他设备都暴露在攻击范围内，此时这种假设就无从谈起。从这时起，无论安全问题轻重与否，其他所有设备都会受到安全威胁干扰。设想一下，如果一栋房屋、公寓或者办公室同时装有所有这些设备，当某人尝试使用本文描述的这些攻击方法时，这是多么可怕的一种场景。
这个攻击场景如下所示（从上到下，从左到右说明）：
1、 **搭载摄像头的智能扫地机器人**
：由于厂商在安全方面警觉性较低，任何人都可以连接并访问这款设备，指引该设备在不同房间内移动，通过设备摄像头拍摄照片、录制视频。
2、 **智能熨斗** ：iOS应用收到及传输的数据没有经过加密或保护处理，攻击者可以利用这些数据给用户带来安全危害（如窃取身份信息、实施欺诈攻击等）。
3、 **智能应用控制的无线间谍玩具车**
：由于设备缺乏密码保护，连入该设备网络的任何用户都可以向设备发送远程命令，在主人驾驶玩具车的同时，利用摄像头悄悄监视周围情况。
4、 **智能充电器** ：充电器使用了默认密码，犯罪分子无需攻击网络环境，就可以利用该密码控制设备，损坏电池并破坏充电过程。
因此，回到本文开头我们自己提出的那个问题，此时我们可以给出一个结论，那就是根据我们的研究成果，我们认为现在想找到一个完全安全的物联网设备还是非常困难的一件事情。
另一方面，不论你购买的是哪一款产品，这种产品很可能不会给你带来非常严重的安全问题，但如果你将其连接到存在漏洞的路由器或者智能中心上时，情况就没那么乐观。
得到这个结论后，联想目前仍处于销售旺季时节，我们想跟大家分享在物联网设备选购方面的一些建议：
1、当选购设备，提升自己生活的智能水平时，用户需要将安全因素考虑在内。在购买搭载摄像头的扫地机器人或者智能熨斗时，你需要三思而后行，确认自己是否需要这些功能，因为它们可能会将你的个人数据泄露给未知的第三方。
2、在购买IoT设备之前，可以先在互联网上找找设备是否存在漏洞的相关新闻。物联网现在是一个非常热门的话题，许多研究人员在寻找物联网设备安全问题方面做得非常出色，他们的研究对象包括各种物联网设备：从婴儿监视器到应用控制的[来复枪](https://www.blackhat.com/docs/us-15/materials/us-15-Sandvik-When-IoT-Attacks-Hacking-A-Linux-Powered-Rifle.pdf)等，不一而足。你想购买的那款产品可能已经被安全人员检查过，你可以上网找找该设备存在的漏洞是否已被修复。
3、购买市场上最新推出的产品并不一定是个好的选择。新的产品中可能带有以前常见的漏洞，并且最新推出的设备可能还包含安全研究人员尚未发现的安全问题。对消费者来说，最好的选择是购买已经多次更新过软件的那些产品。
4、为了弥补来智能设备带来的网络安全问题，卡巴斯基实验室发布了针对智能家居以及物联网的安全解决方案：[卡巴斯基IoT扫描器（Kaspersky IoT
Scanner）测试版](https://play.google.com/store/apps/details?id=com.kaspersky.iot.scanner&hl=ru)。这是一款免费的Anroid应用，可以扫描家庭Wi-Fi网络，提示用户连接家庭网络的设备以及这些设备的安全等级。
对于IoT设备厂商而言，我们的建议非常简单：在研发新设备及更新老产品时，请积极与安全厂商及安全社区合作。
## 十、题外话：八分之一的概率
在我们的实验过程中，我们发现了一款设备，对我们而言这款设备的安全性足以满足我们要求，至少该设备不会导致私人数据泄露或其他破坏性后果。这是一款智能手表。与其他大多数物联网设备类似，用户需要通过应用才能完成设备与智能手机的配对及使用过程。在实验过程中，我们发现设备与智能手机之间、应用与厂商云服务之间的交互数据大多都经过可靠的加密处理，如果不深入研究加密协议或者厂商的云服务，我们很难在这款设备上执行恶意操作。
在配对过程中，使用者需要使用智能手表上显示的pin码，才能通过认证过程。pin码随机生成，智能手表并不会传输这个数据。在应用中输入这个pin码后，手机及手表会生成加密密钥，后续的所有通信数据都会经过该密钥加密处理。因此，即使攻击者成功完成BLE流量拦截任务，也必须解密捕获的数据包。为了解密通信数据，攻击者必须捕获加密密钥生成阶段中的通信流量。
想从该设备中直接获取用户数据（如步数、心率等）显然是不可能完成的任务。手表与手机之间的同步数据也经过加密处理，发往服务器的数据也采用相同方式处理。因此，我们无法解密手机上存放的数据，也无法了解使用的加密算法及加密密钥。
从我们的视角来看，我们认为厂商对这款产品真正负起了责任，可以成为一个典型的模范。因为默认情况下，厂商可以假设没有人会去攻击他们生产的智能手表，即便攻击成功，也不会带来严重的后果，根据这些假设，厂商可以降低他们在安全方面的投入。这种假设有一定道理，因为很难想象攻击者会千方百计去窃取用户每天的行走步数信息，或者窃取用户每时每刻的心跳速率。尽管如此，厂商仍然尽心尽力，消除这类微不足道的可能性。这一点非常好，因为网络安全并不等同于对产品中某些漏洞的修复过程，修复过程非常烦人，需要付出的代价也非常昂贵，我们认为网络安全是物联网产品中非常重要并且极具价值的一个特性，这个特性与设备的可用性、设计理念以及设备功能处于同等地位。我们相信，只要IoT厂商能清楚认识到这一点，整个互联生态系统就会比现有状态更为安全。