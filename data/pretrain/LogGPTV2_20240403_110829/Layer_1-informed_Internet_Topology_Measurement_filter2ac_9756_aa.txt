title:Layer 1-informed Internet Topology Measurement
author:Ramakrishnan Durairajan and
Joel Sommers and
Paul Barford
Layer 1-Informed Internet Topology Measurement
Ramakrishnan Durairajan
University of
Wisconsin-Madison
PI:EMAIL
Joel Sommers
Colgate University
PI:EMAIL
Paul Barford
University of
Wisconsin-Madison
PI:EMAIL
ABSTRACT
Understanding the Internet’s topological structure continues
to be fraught with challenges. In this paper, we investigate
the hypothesis that physical maps of service provider infras-
tructure can be used to eﬀectively guide topology discov-
ery based on network layer TTL-limited measurement. The
goal of our work is to focus layer 3-based probing on broadly
identifying Internet infrastructure that has a ﬁxed geographic
location such as POPs, IXPs and other kinds of hosting fa-
cilities. We begin by comparing more than 1.5 years of TTL-
limited probe data from the Ark [25] project with maps of
service provider infrastructure from the Internet Atlas [15]
project. We ﬁnd that there are substantially more nodes
and links identiﬁed in the service provider map data ver-
sus the probe data. Next, we describe a new method for
probe-based measurement of physical infrastructure called
POPsicle that is based on careful selection of probe source-
destination pairs. We demonstrate the capability of our
method through an extensive measurement study using ex-
isting “looking glass” vantage points distributed throughout
the Internet and show that it reveals 2.4 times more phys-
ical node locations versus standard probing methods. To
demonstrate the deployability of POPsicle we also conduct
tests at an IXP. Our results again show that POPsicle can
identify more physical node locations compared with stan-
dard layer 3 probes, and through this deployment approach
it can be used to measure thousands of networks world wide.
Categories and Subject Descriptors
C.2.1 [Network Architecture and Design]: Network topol-
ogy; C.2.3 [Network Operations]: Public networks
General Terms
Algorithms, Design, Measurement
Keywords
Physical Internet, POPsicle probing heuristic
Permission to make digital or hard copies of all or part of this work for personal or
classroom use is granted without fee provided that copies are not made or distributed
for proﬁt or commercial advantage and that copies bear this notice and the full cita-
tion on the ﬁrst page. Copyrights for components of this work owned by others than
ACM must be honored. Abstracting with credit is permitted. To copy otherwise, or re-
publish, to post on servers or to redistribute to lists, requires prior speciﬁc permission
and/or a fee. Request permissions from permissions@acm.org.
IMC’14, November 5–7, 2014, Vancouver, BC, Canada.
Copyright 2014 ACM 978-1-4503-3213-2/14/11 ...$15.00.
http://dx.doi.org/10.1145/2663716.2663737.
1.
INTRODUCTION
Studies that aim to map the Internet’s topological struc-
ture have been motivated for many years by a number of
compelling applications including the possibilities of improv-
ing performance, security and robustness (e.g., [19]). While
these motivations remain as compelling as ever, the ability
to accurately and comprehensively map the Internet has, for
the most part, remained beyond our grasp.
The primary challenges to thoroughly mapping the In-
ternet stem from its enormous size, distributed ownership,
and constantly changing characteristics. Faced with these
challenges, the most widely used approach to Internet map-
ping has been based on gathering data from network-layer
measurements using TTL-limited probes1. Great progress
has been made on solving some of the speciﬁc problems re-
lated to using these network layer measurements for under-
standing Internet topological characteristics. However, the
fact remains that layer 3 data are inherently tied to the
management policies and operational objectives of service
providers, which may be at odds with comprehensive and
accurate mapping of the Internet.
So, just what do we mean by an “Internet map”? At the
lowest level, the Internet is composed of physical conduits
that contain bundles of optical ﬁber, and that terminate at
buildings that house routing and switching equipment. We
refer to the collection of these data and their geographic lo-
cations as “physical maps” of the Internet. Several recent
projects have begun to assemble repositories of physical In-
ternet maps [15, 29]. These maps are valuable because they
reﬂect a ground truth perspective of service provider infras-
tructure. These are in contrast with maps that have been
generated based on layer 3 probes (e.g., [45]), which we re-
fer to as “network-layer maps”. Ideally, network-layer maps
reﬂect a timely representation of network topology as well
as the dynamic aspects of management and conﬁgurations.
In this paper we investigate the hypothesis that physical
maps can be used to guide and reinforce the process of col-
lecting layer 3 probe data toward the goal of expanding the
scope of physical infrastructure captured in network-layer
maps. This conjecture leads directly to two key research
questions that are the focus of our work: (i) how do phys-
ical layer maps compare and contrast with network-layer
maps? and (ii) how can probe methods used by projects
like Ark [25] be improved to reveal a larger portion of phys-
ical infrastructure? We contend that some of the challenges
1Maps can also be created using BGP updates or
application-layer data, however those are not the focus of
this paper.
381inherent in generating maps from layer 3 probes can be over-
come by using the constructive approach of ﬁrst identifying
key infrastructure (POPs, etc.) and then identifying nodes
(identiﬁed by disambiguating IP addresses or using DNS
names) that reside in those locations.
Our study begins by considering physical map data from
the Internet Atlas (or Atlas) project and network-layer map
data from the Ark project. We focus speciﬁcally on infras-
tructure in North America. The Atlas repository includes
data from 78 Internet service providers with over 2600 nodes
and over 3580 links. Nodes in the Atlas data refer to hosting
centers or points of presence (POPs), with links referring to
physical connections between those locations. We use Ark
measurements collected from September 2011 to March 2013
(approximately the same period over which the Atlas reposi-
tory has been assembled). We resolve the IP addresses from
this corpus to DNS names and then use location hints to
associate these with physical locations (e.g., cities), which
becomes the basis for our comparisons.
Several characteristics are immediately evident in the
data. Most prominent is the fact that among the 50 net-
works that are the focus of our comparison study, we observe
many more nodes and links in the physical maps. There can
be a number of explanations for this observation, including
(i) the limitations of exploiting DNS naming conventions,
(ii) the use of tunneling protocols (e.g., MPLS) or the lack
of layer 3 services which can render nodes invisible to probes,
(iii) the limited perspective of the network mapping infras-
tructure and (iv) the fact that layer 3 routing conﬁgura-
tions may simply obviate the ability to observe all networks,
nodes and links. This supposition is supported by the obser-
vation that all Ark probes are conﬁned to a minority subset
of networks, with the majority of probes traversing an even
smaller subset of networks. Despite this, there are still some
nodes/locations/links that appear in the network-layer map
but are not indicated in the physical map. This can be ex-
plained by physical maps that are out of date or are either
intentionally or erroneously incomplete.
The diﬀerences between the physical and network-layer
maps suggests opportunities for reinforcement between the
data sets. First, networks observed in Ark that do not ap-
pear in Atlas oﬀer clues for searching for new maps that
would expand the repository. Second, nodes or links in At-
las that do not appear in Ark can become targets for ad-
ditional probing that could expand the scope of resulting
network-layer maps, thereby making them more useful in
target applications. We focus speciﬁcally on the possibility
of identifying new nodes in layer 3 measurements through
targeted probing in the second component of our study.
We deﬁne the targeting problem as identifying source-
destination pairs for layer 3 probes that reveal nodes in-
dicated in the physical maps2. Probing sources (or Vantage
Points—VPs) are publicly available infrastructure such as
looking glass and traceroute servers and PlanetLab nodes
from which probes can be sent. Destinations are simply IP
addresses that may respond to probes. We began our tar-
geting analysis by identifying a subset of 596 POPs from
the physical maps across 25 networks as our target set. We
then conducted extensive probe-based measurements using
266 unique sources and 742 destination addresses in the tar-
2Eﬃcient targeting is a related problem that seeks to identify
infrastructure with a minimal number of probes. We do not
directly consider minimizing probe budget in this study.
get networks using two core ideas: (i) source-destination
pairs should be proximal to the target geographically and in
address space, and (ii) veriﬁcation of measurements using
multiple sources is required. We verify the identiﬁcation of
infrastructure using location hints in DNS names and us-
ing records available in PeeringDB [5]. Our analysis shows
that probing between sources and destinations that are both
within the same autonomous system as the target(s) reveals
the most physical infrastructure.
The results of our targeting experiments motivate a new
heuristic algorithm for probe targeting that we call POPsi-
cle. We show that POPsicle ﬁnds 2.4 times as many nodes
as are identiﬁed by Ark. We compare the number of POPs
found by POPsicle with POPs found using Rocketfuel [45]
and in all cases POPsicle performs better. We also found
that IXPs play a critical role in the way probes traverse
a given network. Speciﬁcally, sources that are co-located
with IXPs have the advantage of appearing—from a layer
3 perspective—as being internal to any/all of the networks
that are connected at that location. Thus, a single source
that is co-located within an IXP may enhance the identi-
ﬁcation of infrastructure across all networks that connect
to the IXP. This has the eﬀect of signiﬁcantly broadening
the scope of the infrastructure that can be identiﬁed using
our approach. To validate this idea, we deployed POPsi-
cle at the Equinix IXP in Chicago, USA, and measured the
number of POPs for 10 ISPs and found that POPsicle re-
veals almost all POPs compared to Atlas and extra POPs
(in certain cases) compared to Ark. We also ﬁnd through a
case study of Cogent network that POPsicle identiﬁes over
90% of the nodes identiﬁed in Atlas or by the reverse DNS
technique of [21], compared with about 65% of the POPs
identiﬁed through Ark, and only 25% identiﬁed in the most
recently available Rocketfuel data.
To summarize, the key contributions of our work are as
follows. First, we perform a ﬁrst-of-its-kind comparison of
large repositories of physical and network maps and ﬁnd
that physical maps typically reveal a much larger number
of nodes (e.g., POPs and hosting infrastructure). Next, we
consider the targeting problem and ﬁnd that using sources
and destinations within the same autonomous system for
probing reveals the most physical infrastructure. We develop
a layer 1-informed heuristic algorithm for probe source-
destination selection called POPsicle that identiﬁes 2.4 times
as many nodes as standard probing methods. Finally, we
identify the fact that sources co-located as IXPs can be used
to amplify POPsicle-based probing broadly throughout the
Internet resulting in layer 3 maps that can be more eﬀec-
tively applied to problems of interest. To that end, we de-
ployed our method at a real IXP and found that our method
ﬁnds almost all POPs compared to Atlas and additional
POPs compared to Ark for the ISPs studied.
2. RELATED WORK
Creating maps of the Internet’s topology has been of in-
terest to the research community since the early days of the
Internet, and its predecessor, the ARPAnet [37]. Just as
maintaining a hosts.txt ﬁle was feasible in the Internet’s
infancy, so was the capability of identifying all nodes and
links in the network [32]. After the privatization and com-
mercialization of the Internet, it became well accepted and
understood that the Internet’s rapid growth implied that the
cataloging eﬀorts of earlier years were no longer possible.
382Since then, there has been a great deal of eﬀort made
to harness layer 3 TTL-limited probes for network mapping
since the introduction of the traceroute tool [26]. Some
eﬀorts (e.g., [40, 45]) have focused on the goal of devel-
oping a comprehensive network-layer view of the Internet
i.e., unique identiﬁcation of nodes and links. Other eﬀorts
have focused on developing new probing techniques that ex-
pand the ability to collect data and thereby improve accu-
racy and mapping coverage, e.g., [9, 10, 41]. More recent
eﬀorts have focused on analyzing and addressing various in-
accuracies inherent in probe-based network mapping [43,49].
For example, Roughan, et al. and Eriksson, et al. develop
inferential techniques to quantify the nodes and links that
are missed through network-layer mapping [18, 38]. Other
researchers have looked closely at the rise of Internet Ex-
change Points (IXPs) and the eﬀects of IXPs on inaccuracies
of network-layer mapping, e.g., [8, 10]. Concurrent with the
rise of IXPs has come a “ﬂattening” of the Internet’s peering
structure [13,22,30], which aﬀects the very nature of end-to-
end paths through the Internet. Still other researchers have
observed that increased use of network virtualization tech-
niques such as MPLS have led to additional inaccuracies in
layer 3 mapping, and which are likely to continue to thwart
probe-based mapping eﬀorts [14,40,42]. We posit that layer
3 mapping eﬀorts will continue to be important sources of In-
ternet topology information and that complementary eﬀorts
to build repositories of physical Internet maps (e.g., [15,29])
will result in representations of Internet topology that are
more accurate and applicable to problems of interest than
either representation in isolation.
The targeting problem that is a focus of our work is in-
formed by prior studies that analyze the intrinsic impor-
tance of measurement infrastructure in Internet topology
mapping. Barford et al. were among the ﬁrst to quan-
tify the value of vantage points in discovery of nodes and
links in core and edges of the Internet [11]. More recently,
Shavitt and Weinsberg consider the problem of bias in mea-
surements based on vantage point distributions and show
that a broad distribution of vantage points reduces bias in
resulting maps [39]. Our work diﬀers from these studies in
that we are focused on using layer 3 probes to identify spe-
ciﬁc infrastructure targets.
Identifying the geographic location of nodes that have
been assigned speciﬁc IP addresses (i.e., IP geolocation) is
a challenging problem that is highly relevant to our study.
Some of the earliest work on this problem was done by Pax-
son, who developed the idea of using DNS hints to identify
the geographic locations of nodes that were responding to
TTL-limited probes [35]. We use similar methods in our
study. Since then, many studies have addressed the problem
of IP and POP geolocation using a variety of measurement
techniques (e.g., [17, 20, 23, 28, 34, 36, 46, 47]). The fact that
POP locations in physical maps are often given at the street
address level oﬀers the possibility to improve IP geolocation
estimates using standard measurement-based methods. We
are also investigating another possibility of leveraging state-
of-the-art geolocation techniques (e.g., [24, 46]) to enhance
the accuracy of our location extraction approach.
3. DATASETS
In this section we describe the datasets used in our study.
One of the key contributions of our work is the compar-
ison of physical topology data from primary sources and
network-layer topology data extracted from layer 3 TTL-
limited probes, as described below.
In the case of physi-
cal infrastructure data, we use the latest maps from service
providers collected as part of Internet Atlas project [15]. For
network-layer topology data, we rely on traceroute data col-
lected as part of CAIDA’s Archipelago (Ark) project [25].
3.1 Physical Topology Data
In this study, we rely on the publicly available physical
topology data from the Internet Atlas project. Internet At-
las is a visualization and analysis portal for diverse Internet
measurement data. The starting point for Internet Atlas is
a geographically anchored representation of the physical In-
ternet including (i) nodes (e.g., hosting facilities and data
centers), (ii) conduits/links that connect these nodes, and
(iii) relevant meta data (e.g., source provenance). The ap-
proach for building the repository is to use targeted search
to identify maps and other listings of physical Internet in-
frastructure that are published on the web by ISPs. Though
there is no guarantee as to their timeliness or completeness,
we use this data as ground truth of service provider infras-
tructure in this study. Since these data come from primary
sources, they also reﬂect a ground truth perspective of ser-
vice provider infrastructure. The current repository con-
tains geocoded physical infrastructure data of over 425 ISPs
around the world. From this online repository, we obtain
detailed geographic information of 7 Tier-1 networks and
71 non-Tier-1/regional networks with a presence in North
America consisting of 2611 POPs and 3588 links.
3.2 Network-layer Topology Data
We seek to improve the state-of-the-art in Internet topol-
ogy mapping by investigating structural characteristics re-
vealed by layer 3 probes. Our goal is to broaden the under-
standing of Internet topology by investigating how topolog-
ical characteristics as revealed by layer 3 traceroute probes
compare to and contrast with physical structure derived
from service provider maps.
The network-layer probe data that we use are collected
as part of the Ark project, and include traceroute mea-
surements from a set of 77 monitoring systems distributed
around the globe to all routed /24 preﬁxes in the IPv4 In-
ternet. We used the traceroute data gathered by the Ark
project since it represents a canonical system for large-scale
Internet topology measurement. We note, however, that the
measurements collected in Ark are subject to a variety of
network management policies, including blocking or limit-
ing responses to TTL-limited probes, routing conﬁgurations
and MPLS tunnels, each of which can limit the scope of the
measurement data.
Ark is the canonical example of what we might call a gen-
eralized topology probing system. POPsicle, on the other
hand, has a speciﬁc goal, which is to discover unique nodes
based on guidance from physical maps. Given the diﬀerence
in goals, the comparisons of the number of unique nodes
identiﬁed by Ark vs. POPsicle should be interpreted as a
comparison between a generalized and a purpose-built sys-
tem, i.e., POPsicle can be implemented as an extension to
Ark or as the basis for designing an entirely new coordinated
large-scale traceroute-based topology measurement system.
3833.3 DNS Data
The DNS data we use are also collected as part of the
IPv4 Routed /24 DNS Names Dataset [4], and provide fully-
qualiﬁed domain names for IP addresses seen in the Ark
traces.
In this work, our consideration of network-layer
topology data is limited by the scope and placement of Ark
monitors. However, that project has taken pains to include
a broad spectrum of network types (e.g., research, commer-
cial, and educational networks) as vantage points for their
monitoring systems, and it provides a widely-used view of
the Internet’s topology.
Leveraging location hints present in domain names to clas-
sify IP addresses into POPs is fraught with challenges as de-
scribed in Section 4. We believe that the accuracy of our re-
sults could be improved further either with better techniques
of handling DNS naming hints, e.g., using the techniques of
Huﬀaker et al. [24], or by using non-DNS-based techniques
to classify IP addresses to their corresponding POPs [44].
3.4 Scope of Comparison Study
In this study, we restrict our analysis of Ark data to a
period of 19 months, from September 2011 to March 2013,
which is contemporaneous with data collection in Atlas. Our
focus is on understanding the composite views of networks
oﬀered by both data sets over this period. From each in-
dividual traceroute in the source data, we extract all the
internal network IP addresses and links. That is, after pro-
cessing each traceroute, there is a corresponding interface
list (e.g., IP1, IP2, IP3, IP4, etc.) and link list (e.g., IP1-
IP2, IP3-IP4, etc.). For instance, if the traceroute contains
a probe of the form A-B-C-D-E (where A, B, C, D and E
are IP addresses), we ignore the end point IP addresses (A
and E) and extract only the network IP addresses (B, C and
D). The interface list thus contains IP addresses B, C and
D, and the link list contains B-C and C-D. We merge all the
interface/link lists after removing all the duplicate entries to
produce a ﬁnal list of interface IP addresses and links. We
then use the corresponding DNS dataset and join the list of
interface IPs to their corresponding DNS entries.
4. DATA ANALYSIS
In this section, we describe the methods we use to analyze
the network-layer topology data. We begin with discussing
results from processing the network-layer data followed by
associating geographic locations to the network-layer data.
4.1 Network-layer Data Analysis
In this section, we describe the two-step mapping algo-
rithm that we use to associate a physical location to the IP
address interface list obtained from processing network-layer
traceroute data, as described above.
Key Idea. One of the aspects of this algorithm is to
translate location-based patterns in DNS names that refer
to router interfaces to physical (geographic) locations. The
inﬂuential topology mapping work of Spring et al. [45] used
such “hints” in their undns tool as part of the Rocketfuel
project in order to infer locations of network POPs. Many
network service providers employ naming conventions that
include geographically relevant information such as airport
codes, city names, or other location information. By ex-
ploiting these conventions and developing rules to infer ge-
ographic locations from them, we can build a network-layer
topology map.
Challenges. Leveraging naming conventions in DNS en-
tries has two important challenges. The ﬁrst is that these
names may be out-of-date or misconﬁgured, which would
lead to invalid geographic inferences. The work of Zhang et
al. [48] quantiﬁed the prevalence such problems and found
them to occur infrequently, but to have potentially large
impact on topology mapping studies that rely on DNS in-
formation. They developed a set of heuristics to avoid such
problems, including the detection of POP-level loops within
a single provider (which should not occur, assuming that the
ISP’s intra-domain routing protocols are conﬁgured prop-
erly). We also use such techniques in our work to avoid
problems with exploiting DNS naming conventions. A sec-
ond challenge with using DNS entries is that there are in-
herent ambiguities associated with them, e.g., a single string
may be used by two diﬀerent ISPs to refer to two diﬀer-
ent physical locations. To cope with these problems, a set
of regular expression patterns can encode diﬀerent rules to
disambiguate location hints from diﬀerent providers. This
approach was also taken in the earlier undns tool [45]. Ta-
ble 1 shows several example patterns and how they are used
to resolve ambiguities in naming.
Algorithm. The algorithm for developing a network-
layer map from raw traceroute data takes four inputs: