# OCR Output
## Page 1
口
口
提纲
管理KVM虚拟化平台
使用KVM实现虚拟化
虚拟化技术
可视化管理工具
■
管理KVM虚拟机
创建KVM虚拟机
 在CentOS上实现KVM虚拟化
KVM简介
主流虚拟化解决方案
虚拟化的工作原理
虚拟化技术简介
Linux服务器构建与运维管理
第09章：使用KVM实现虚拟化
河南中医医大学信息技术信息联技术教学团队
阮晓龙
---
## Page 2
4
3
1.虚拟化技术
口
虚拟化技术
1.虚拟化技术
口
的高可用。
物理资源的目标，
虚拟化技术通过有效管理虚拟资源和物理资源之间的映射关系，
虚拟化技术通过透明化底层物理硬件达到最大化利用物理硬件的目标，
物理基础设施架构、
虚拟化技术通过把物理资源抽象转换为逻辑上可以管理的资源，
■虚拟化，
技术的发展历程中一
■
层资源进行分区，并向上层提供特定的、多样化的运算环境。
能的物理硬件产能过剩和老旧硬件产能过低的重组重用。
基础设施之间耦合性强的弊端，
虚拟化，是一个为了简化管理、
存用
树
上脖
月户可以更好应用资源。
及存储等
拟化，
都可以在相互独立的空间内运行而互不影响，
同时运行
是一
是指通过虚拟化技术将一
(Virtualization)
予以抽象、
-种资源管理技术，
解决应用系统从资源独占到资源共享的转变，
、提高资源整体利用率、
一直扮演着重要的角色。
，是伴随着计算机技术的产生而出现的，
优化资源分配的解决方案。
每
是将计算机的各种实体资源，
实现基于业务运行实际而弹性的自动化分配
一台计算机虚拟为多台逻辑计算机。
辑计
算机可
降低运维管理成本等日
运不
简单来说，
如服务器、
手系统，
 达到整合简化
1.2 虚拟化的工作原理
实现业务服务
达到充分共
1.1虚拟化技术简介
并且应用程
，在计算机
解决物
务
亨
高将
内使
2
---
## Page 3
9
5
1.虚拟化技术
1.虚拟化技术
根据实现方式不同，虚拟化技术可以分为全虚拟化、半虚拟化、操作系统级虚
■全虚拟化
拟化等。
口
口
CPU指令时会有-
在器需
做任何修改，
全虚拟化中，
Iype
只要有虚拟化软件
软件抽象层
就能直接对虚拟化的硬件发
虚拟机
操作系统
软件抽象层
应用程序
一定的性能损失。
虚拟机
求做任位
客户机）
虚拟化层
操作系统
软件抽象层
可修改
应用程序
硬件
虚拟机
大
和硬件之间，
硬件抽象层
软件抽象层
软件抽象层
操作系统
应用程序
虚拟机
种设
构
1.3虚拟化的实现方式
1.2虚拟化的工作原理
ITH
客
理无
C
---
## Page 4
8
1.虚拟化技术
口
1.虚拟化技术
根据实现方式不同，虚拟化技术可以分为全虚拟化、半虚拟化、操作系统级虚
拟化等。
根据实现方式不同，虚拟化技术可以分为全虚拟化、半虚拟化、操作系统级虚
■半虚拟化
拟化等。
■全虚拟化
口
口
半虚拟化技术的缺点是需要修改操作系统以包含API，不能够实现对通用操作系统的支持。
半虚拟化技术也叫做准虚拟化技术，
isor耗费-
磁盘
系统硬件
内存
1.3 虚拟化的实现方式
1.3虚拟化的实现方式
---
## Page 5
6
1.虚拟化技术
口
1.虚拟化技术
根据实现方式不同，
拟化等。
根据实现方式不同，虚拟化技术可以分为全虚拟化、半虚拟化、操作系统级虚
■操作系统级虚拟化
拟化等。
■半虚拟化
口
因为不存在实际的翻译层或者虚拟化层，
是内核的一种功能，
个彼此相互独立的应用环
虚拟化技术可以分为全虚拟化、半虚拟化、操作系统级虚
而不是抽象成一
Apps
磁盘
11
11
一层独立的软件。
系统硬件
，所以操作系统级的虚拟机开销很小，
内存 
1.3 虚拟化的实现方式
1.3虚拟化的实现方式
一个内核。
大多数都能
C
---
## Page 6
12
11
口虚拟化产品分为开源虚拟化软件和商业虚拟化软件两大阵营。
1.虚拟化技术
口根据实现方式不同，
1.虚拟化技术
■操作系统级虚拟化
拟化等。
台有云宏CNware等。
最常见的虚拟化软件提供商有Citrix、IBM、VMware、Microsof等，国产虚拟化平
景，需要根据业务场景选择合适的软件。
虚拟化软件产品有很多，
虚拟化技术可以分为全虚拟化、半虚拟化、操作系统级虚
KVM、
无论是开源还是商业的，每款软件产品有其特点及应用场
磁盘
VMware、
VMware、Hyper-V、
宿主机内核、Hypervisor
系统硬件
CPU
1.4 主流虚拟化解决方案
其中Xen、KVM
1.3虚拟化的实现方式
9
---
## Page 7
3
口KVM是基于Linux内核的虚拟机软件（Kernel-based Virtual Machine），是第
2.使用KVM实现虚拟化
口虚拟化产品分为开源虚拟化软件和商业虚拟化软件两大阵营。
1.虚拟化技术
■KVM是内核的一
■KVM嵌入Linux系统内核，
个整合到Linux内核的虚拟化软件。
机就是一
个普通的Linux进程，
一个模块，用户空间通过QEMU模拟硬件提供虚拟机使用，
VN
使Linux变成了一
Linux Kernel
通过对这个进程的管理，
11
全虚拟化
全虚拟化
桌面虚拟化
虚拟类型
半虚拟化
KVM Drive
一个Hypervisor，通过优化内核来使用虚
高
京
Guesfos
支持
支持
支持
不支持
完成对虚拟机的管理。
LGPLGPL
GPL
GPL
私有
许可证
1.4主流虚拟化解决方案
2.1 KVM简介
一台虚拟
---
## Page 8
15
2.使用KVM实现虚拟化
KVM的主要优势：
2.使用KVM实现虚拟化
■性能
■开源免费
■
紧密结合Linux
KVM性能优越，
应用。
费
方
案。随着KVM的发展，KVM虚拟机越来越稳定，
任务4：管理KVM虚拟机
任务3：创建KVM虚拟机
任务2：配置宿主机网络
任务1：安装KVM
在同样的硬件环境下，
其他虚拟化引
一直以开放的姿态接受各种新技术，
能提供更好的虚拟机性能。
2.2 在CentOS上实现KVM虚拟化
2.1KVM简介
9
8
---
## Page 9
2.使用KVM实现虚拟化
2.使用KVM实现虚拟化
任务1：安装KVM
任务1：安装KVM
步骤10：验证KVM安装的正确性：加载+服务自身检测
步骤9：配置libvirtd服务为开机自启动
步骤8：查看KVM运行信息
步骤7：启动libvirtd服务
步骤6：安装KVM
步骤5：检测CPU是否支持虚拟化
步骤4：配置宿主机网络混杂模式
步骤3：配置宿主机支持虚拟化
步骤2：完成虚拟机的主机配置、网络配置及通信测试
步骤1：创建虚拟机并完成CentOS的安装
2.3任务1
2.3任务1
8
6
---
## Page 10
任务1：
猫
实现KVM软件的安装配置
安装KVM
称的
日日
6
0
---
## Page 11
/操作引
务是否已配置为开机自后
---
## Page 12
2.使用KVM实现虚拟化
任务2：配置宿主机网络
步骤2：创建bridge
步骤1：查看宿主机网络情况
任务2：配置宿主机网络
口实现宿主机网桥配置
实现宿主机和KVM虚拟机保持同一网络
实现宿主机的连通性测试
2.4任务2
2
---
## Page 13
9
2.使用KVM实现虚拟化
任务3：创建KVM虚拟机
步骤4：使用KVM虚拟机并远程管理
步骤3：安装CentOS7
步骤2：获取CentOS 7
步骤1：创建存储池
KVM的存储虚拟化通过存储池（Storage Pool）和卷
（Volume）来管理。
虚拟机，
卷在虚拟机中就是一
块空间，
一块硬盘。
2.5任务3
3
---
## Page 14
任务3：
任务目标
实现KVM虚拟机的创建
实现KVM虚拟机的远程管理
创建KVM虚拟机
2
4
---
## Page 15
2.使用KVM实现虚拟化
任务4：管理KVM虚拟机
步骤5：KVM虚拟机的克隆、快照
步骤4：KVM虚拟机的挂起、开启、
步骤1：查看KVM虚拟机列表
步骤3：修改KVM虚拟机的硬件配置
步骤2：设置KVM虚拟机为自动启动
■任务目标：
任务3：管理KVM虚拟机
口通过virsh管理KVM虚拟机
握virsh管理工具
关闭
2.6任务4
29
15
---
## Page 16
81
口KVM自身实现了虚拟化核心的监视工具,
3.管理KVM虚拟化平台
■virsh：命令行管理工具
常丰富，
■
态，获取虚拟机监视器界面，使虚拟机管理可跨越地域限制，
Ovirt：Web方式管理工具
virt-manager:
虚拟机快照，
，比较典型的管理工具有virsh、
桌面应用管理工具，
，创建和转换虚拟机磁盘文件格式等，
，功能强大
 实现KVM绝大部分的管理，
提供了方便与性能兼具的高效率管理，支持多
能完成几乎所有虚拟机管理任务，
由于KVM开源特性，
适合以脚本的形式自动管理
可方便随时访问虚拟机状
也实现了云计算维形。
3.1KVM虚拟化平台管理工具
其管理工具非
，包括在线迁
3
reemiun
---
## Page 17
3.管理KVM虚拟化平台
manager
virt-
Acashk
OpenStack
3.1 KVM虚拟化平台管理工具
---
## Page 18
9
3
 About virt-manager's supporting tools
3.管理KVM虚拟化平台
3.管理KVM虚拟化平台
■ virt-install is a command line tool which provides an easy way to provision operating
(sauieuos xnuil) oxl pue uax sabeuew osie ing 'sA WAy siabien <uewud ii 
■
 command line options.
 An embedded VNC and SPICE client viewer presents a full graphical console to 
 a domain's resource allocation & virtual hardware.
 Wizards enable the creation of new domains, and configuration & adjustment of 
for libvirt-based containers.
virt-bootstrap is a command line tool providing an easy way to setup the root fle system
Sisui- buisn ix uiep pa bua <isea non lot aul puo e s! ux-
virt-clone is a command line tool for cloning existing inactive _guests. It copies the disk
resource utilization statistics.
Itpresents
 a lightweight Ul interface for interacting with the graphical display of
summary
 3.2 Virtual Machine Manager 
3.2 Virtual Machine Manager
36
35
8
---
## Page 19
8
3.管理KVM虚拟化平台
latfor
and
that
cluc
irst-
offe
3.3 Apache CloudStack 
38
6
---
## Page 20
.管理KVM虚拟化平台
bint
cture
DNS
3.4 Apache CloudStack
39
---
## Page 21
Apache CloudStack
---
## Page 22
网络与信息系统智能运维
品品
---