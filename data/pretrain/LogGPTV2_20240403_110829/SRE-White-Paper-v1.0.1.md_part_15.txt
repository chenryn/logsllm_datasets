SRE实践白皮书（2023年）
问题通常会第一时间反馈给客服。因此，客服团队需要有一套机
制，将用户报告的问题快速传达给 SRE团队。
3.运营人员反馈：运营团队在日常工作中也可能发现系统的异
常情况，他们对业务的了解可以帮助 SRE团队更快定位问题。
3.5.2 故障诊断
3.5.2.1 应急协同
系统架构与逻辑的复杂性越来越高，应急协同通常是一个跨团
队、跨地域的协作过程，建立高效的应急响应机制是应急协同的重
要工作。
1．协同机制
 OnCall值守：一二三线值守，分工明确；
 应急响应：建立完善的应急响应流程；
 环境资源保障：各环节资源投入及升级流程清晰，能快速
提供需要的资源。
2．岗位设置
1）应急总负责人（二/三级部门主管）
 统筹协调应急响应工作
 发起研究重大应急决策和部署
 决定实施和终止应急预案
2）应急指挥小组（三/四级部门主管）
 接受应急总负责人的领导，传达和落实应急总负责人的各
项指令，汇总和上报应急信息
⽹址：SRE-Elite.com 10 1 微信：SRE精英联盟
SRE实践白皮书（2023年）
 负责应急执行小组成员的协调沟通，协调应急事件处置工
作中的重大问题
 向业务及其他相关方同步必要的应急事件处理相关信息
3）应急执行小组（四级部门主管、工程师）
 落实应急总负责人及应急指挥小组布置的各项任务
 组织制定应急预案，并监督执行情况
 掌握应急事件处理情况，及时向应急总负责人和应急指挥
小组报告应急过程中的重大问题
 向应急指挥小组确认事件恢复效果，关闭事件
4）值班人员（OnCall/值班人员）
 响应所有事件，包括通过电话、自动监控等渠道上报的事
件
 完整记录所有接收的事件信息，包括：用户信息、事件描
述、发生时间和地点等
 为事件进行适当的分类、为事件分配优先级等属性
 使用知识库等手段对事件进行初步诊断和分析，并进行尝
试解决
 必要时联系相关方参与事件处理
 如果不能解决事件，应当将事件分配给合适的二线支持并
及时升级
 检查事件记录的处理进度，保持与用户的联系，适时通知
事件处理状况
⽹址：SRE-Elite.com 10 2 微信：SRE精英联盟
SRE实践白皮书（2023年）
3．协同过程
 启动应急响应机制
 组建应急指挥部
 信息共享与同步
 资源调配
 决策与指挥
 持续监测、评估、反馈
3.5.2.2 故障定界
在微服务架构下服务通常会有多个模块组成，当其中一个模块
异常时往往会导致整个服务多个模块产生异常告警。而故障定界时
指 SRE 确认故障是由哪个模块异常导致整体故障的过程。SRE 在进
行故障定界的过程中，应注意以下事项：
1．故障定界并非故障定位
故障定界时，SRE 应将精力放在确认故障模块上，为后续故障
恢复提供操作依据，过程中主要追求更高的时效性。故障定位则主
要偏向确认故障根因，为后续代码级或架构级别的调整提供依据，
过程中追求的是准确性。因此，SRE 在故障定界的过程中需要时刻
谨记首要任务是恢复中断的业务，而非对故障原因刨根问底，绝大
多数的故障定位是可以事后做的。
2．辅助定界手段
1）CMDB辅助定界
CMDB 是生产机房镜像库，SRE 需构建以配置为中心的运维一
⽹址：SRE-Elite.com 10 3 微信：SRE精英联盟
SRE实践白皮书（2023年）
体化建设满足各个运维场景对象可以追溯到 CMDB CI。每条告警信
息中携带了 CI，当有告警产生时，可以初步定界监控直接的问题对
象，注意准确的定界还依赖于快速验证。
2）链路跟踪手段
链路跟踪通过对于符合 OpenTelemetry标准的原始链路日志进行
实时采集与流式计算，还原精准链路拓扑，应用于全链路实时观
测、基于链路的业务指标计算、故障定界
链路跟踪准确定界故障源，比如应用通常会因在组件异常问
题、交易相互依赖、因数据库造成上层应用队列堵、多只交易缓慢
的问题等通过链路跟踪定界故障。
3）可观测故障决策树
在链路拓扑的基础上整合 CMDB 数据关联业务系统具体组件的
日志、指标信息，故障定界时可以进行多层下钻挖掘故障源头，并
通过关联故障排查脚本作业的方式支持在链路上做进一步的故障信
息收集。结合 CMDB 拓扑、链路拓扑的组件关系、服务关系，将常
规的故障排查步骤编排成故障决策树，将专家经验沉淀为系统判断
规则基于可观测数据和排查任务反馈的信息进行故障定界判断
4）快速验证设想
当 SRE 有怀疑的故障模块时，应该通过一定的手段（如：调整
流量、配置参数、增加实例数量等）对设想进行验证。 SRE 需要注
意验证过程中应只影响模块的部分实例、流量或请求。操作实施
后，SRE 应通过故障观测手段来确认设想是否符合预期，如不符合
⽹址：SRE-Elite.com 10 4 微信：SRE精英联盟
SRE实践白皮书（2023年）
预期应考虑是否操作参数需要调整或模块猜测存在偏差。
3．明确定界故障边界
筛选已知故障定界场景，提前确定定界组件， SRE 明确在明确
微服务架构下各个组件后，常见的如云 PaaS、数据库、中间件、主
机、网络、存储等，整理筛选出可能的组件故障点，依赖于事先人
工分析和以往故障案例分析形成故障边界。故障边界的确认是尽可
能减少不确定性，把定界点考虑在前。
4．复杂情况定界故障
对于复杂的故障场景，可能是多种组件故障混合的。一般可以
通过 CMDB 拓扑链路关系确认最下层组件，首先分析最下层组件并
进行快速恢复验证。
5．详细记录操作步骤
SRE 应记录定界验证的操作内容，作为后续故障恢复或切换的
依据。因此，SRE 应通过运维工具进行操作，避免由于上机操作导
致操作记录散落无法进行归档。同时，详细记录的操作步骤可以避
免当验证产生非预期效果时，或多个操作叠加产生负效果时，可作
为应急回滚的依据。
故障定界是 SRE 故障处理中的核心过程，只有准确的故障定界
才能保障后续有效的故障恢复方案。而且由于过程中会涉及操作行
为，SRE 需要对一切的操作行为保持谨慎避免由于操作导致额外的
故障发生。可以通过准确性、耗时和操作次数来衡量定界质量
⽹址：SRE-Elite.com 10 5 微信：SRE精英联盟
SRE实践白皮书（2023年）
3.5.2.3 影响评估（影响人数，范围，上报级别）
故障影响评估是多方面的，主要看对服务功能的影响、影响时
长、故障发生的时段、对用户影响的范围。
（1）如果对应用服务无任何影响，可以快速恢复的生产问题
的，这些问题 MTTR为 0且对用户无感，事后报告直接领导。
（2）对于应用服务有影响的，且影响到客户但范围可控的，定
性为生产事件，需要及时上报到系统运维中心生产运行情况沟通群
并报告处室领导（互联网行业一般到部门总监），并在事件问题群跟
进事件解决进度。如果影响时间过长，需要进一步报告中心领导。
（3）对于应用服务有影响，且影响到客户且范围过大的，定性
为生产事件，需要及时上报到系统运维中心生产运行情况沟通群并
报告中心领导。在互联网行业，通常上报至部门总经理。
国家网信办就《网络安全事件报告管理办法（征求意见稿）》公
开征求意见，按照《网络安全事件分级指南》，属于较大、重大或特
别重大网络安全事件的，应当于 1 小时内进行报告。 网络和系统归
属中央和国家机关各部门及其管理的企事业单位的，运营者应当向
本部门网信工作机构报告。属于重大、特别重大网络安全事件的，
各部门网信工作机构在收到报告后应当于 1 小时内向国家网信部门
报告。
3.5.3 故障恢复
在 SRE 中，故障恢复是一个重要的概念。当 SRE 收到监控告警
信息并确认故障发生（排除误告警）后，应第一时间确认评估故障
⽹址：SRE-Elite.com 10 6 微信：SRE精英联盟
SRE实践白皮书（2023年）
影响范围，同步故障到相应干系人，并根据相应的优先级对故障进
行恢复，并在恢复后需对故障原因进行根因分析，做好排除隐患，
尽量避免二次故障。最大程度减少系统停机时间，降低 MTTR，保
障业务可用性，保证业务连续性。
故障恢复通常包括架构自愈、应急预案、应急维护和恢复验证
等方面内容。
3.5.3.1 架构自愈（啥也不用干）
故障是不可避免的，架构自愈的理念是在系统设计之初以及迭
代过程中考虑系统的健壮性，使其具备完善的逃生能力，通过一系
列技术手段来实现系统的高可用性，架构高可用是满足架构自愈必
要条件，包括如下两个方面。
1．部署架构高可用
在业务部署上通过跨交换机 /机房/可用区/地域等粒度的容灾，
如通过云的置放群组策略控制业务部署的亲和性，实现 IAAS层部署
架构的高可用；当IAAS层发生故障时，无需人工干预，可快速自动
切换调度。常见的部署架构有两地三中心，即系统划分为三个数据
中心，两个位于同城，一个位于异地，同城的两个数据中心分别承
担主备角色，异地数据中心则作为备份，保证高可用性和容错能
力。
2．业务技术架构高可用
业务应通过不断迭代，优化业务架构，排除单点模块，实现业
务本身高可用，如典型的负载均衡、多活、热备自动切换等实现故
⽹址：SRE-Elite.com 10 7 微信：SRE精英联盟
SRE实践白皮书（2023年）