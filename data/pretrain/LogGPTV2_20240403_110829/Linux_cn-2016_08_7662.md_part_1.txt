---
author: Ruslan
category: 软件开发
comments_data:
- date: '2016-08-08 22:59:27'
  message: 赞
  postip: 211.95.59.116
  username: freesoul [Firefox 48.0|Ubuntu]
- date: '2016-08-09 00:52:55'
  message: 这个不是已经发过了么。而且我还打印了一份。。。
  postip: 111.126.233.141
  username: 来自内蒙古包头的 UC Browser 11.0|Android 5.1 用户
- date: '2016-08-09 22:27:36'
  message: 新的翻译版本——而且是咱们的 LCTT 成员出手翻译的，个人觉得比别的翻译版本要棒。
  postip: 123.120.88.155
  username: linux [Chrome 52.0|Mac 10.11]
- date: '2016-08-10 08:30:40'
  message: 666，之前是发过的，我也打印过一份
  postip: 58.214.32.196
  username: yunweinote [Chrome 51.0|Windows 7]
- date: '2016-08-12 16:28:52'
  message: 微博分享失败呀
  postip: 175.10.7.93
  username: 来自湖南的 Chrome 52.0|Windows 10 用户
- date: '2016-08-14 10:06:01'
  message: 亲，能给发一份完整的中文版吗谢谢，PI:EMAIL
  postip: 123.150.86.166
  username: 来自天津的 Microsoft Edge 14.14393|Windows 10 用户
- date: '2016-08-26 16:05:48'
  message: 灵魂配图！！！
  postip: 125.88.165.155
  username: 来自广东广州的 Chrome 52.0|Windows 8 用户
- date: '2016-10-11 09:34:57'
  message: 荀子那里应该是孔子吧
  postip: 180.111.164.45
  username: Alex5 [Chrome 49.0|Windows 7]
- date: '2016-10-11 17:01:23'
  message: 就这个，学术界确实存在争议。
  postip: 123.120.81.152
  username: linux [Chrome 53.0|Mac 10.11]
- date: '2016-10-17 22:33:34'
  message: webserver1.py的代码有问题啊，似乎有好几个语法错误，我的系统里运行不了
  postip: 218.205.22.215
  username: 来自江苏常州的 Firefox 49.0|Ubuntu 用户
count:
  commentnum: 10
  favtimes: 14
  likes: 0
  sharetimes: 0
  viewnum: 17233
date: '2016-08-08 20:51:00'
editorchoice: true
excerpt: 在这个由三篇文章组成的系列中，我将会教你构建你自己的 Web 服务器。我们开始吧~
fromurl: https://ruslanspivak.com/lsbaws-part1/
id: 7662
islctt: true
largepic: /data/attachment/album/201608/08/205045iklb50bmkdkcm408.jpg
permalink: /article-7662-1.html
pic: /data/attachment/album/201608/08/205045iklb50bmkdkcm408.jpg.thumb.jpg
related:
- displayorder: 0
  raid: 7685
- displayorder: 0
  raid: 7847
reviewer: ''
selector: ''
summary: 在这个由三篇文章组成的系列中，我将会教你构建你自己的 Web 服务器。我们开始吧~
tags:
- Web
- 服务器
thumb: false
title: 搭个 Web 服务器（一）
titlepic: true
translator: StdioA
updated: '2016-08-08 20:51:00'
---
![](/data/attachment/album/201608/08/205045iklb50bmkdkcm408.jpg)
一天，有一个正在散步的妇人恰好路过一个建筑工地，看到三个正在工作的工人。她问第一个人：“你在做什么？”第一个人没好气地喊道：“你没看到我在砌砖吗？”妇人对这个答案不满意，于是问第二个人：“你在做什么？”第二个人回答说：“我在建一堵砖墙。”说完，他转向第一个人，跟他说：“嗨，你把墙砌过头了。去把刚刚那块砖弄下来！”然而，妇人对这个答案依然不满意，于是又问了第三个人相同的问题。第三个人仰头看着天，对她说：“我在建造世界上最大的教堂。”当他回答时，第一个人和第二个人在为刚刚砌错的砖而争吵。他转向那两个人，说：“不用管那块砖了。这堵墙在室内，它会被水泥填平，没人会看见它的。去砌下一层吧。”
这个故事告诉我们：如果你能够理解整个系统的构造，了解系统的各个部件如何相互结合（如砖、墙还有整个教堂），你就能够更快地定位及修复问题（那块砌错的砖）。
如果你想从头开始创造一个 Web 服务器，那么你需要做些什么呢？
我相信，如果你想成为一个更好的开发者，你**必须**对日常使用的软件系统的内部结构有更深的理解，包括编程语言、编译器与解释器、数据库及操作系统、Web 服务器及 Web 框架。而且，为了更好更深入地理解这些系统，你**必须**从头开始，用一砖一瓦来重新构建这个系统。
荀子曾经用这几句话来表达这种思想：
> 
> “ 不闻不若闻之。   （    I hear and I forget.    ） ”
> 
> 
> 
![](/data/attachment/album/201608/08/205108is5rhuarh3530luh.png)
> 
> “ 闻之不若见之。   （    I see and I remember.    ） ”
> 
> 
> 
![](/data/attachment/album/201608/08/205110ndpjyv4vlvep5ova.png)
> 
> “ 知之不若行之。   （    I do and I understand.    ） ”
> 
> 
> 
![](/data/attachment/album/201608/08/205110a41zcugc4zup4ege.png)
我希望你现在能够意识到，重新建造一个软件系统来了解它的工作方式是一个好主意。
在这个由三篇文章组成的系列中，我将会教你构建你自己的 Web 服务器。我们开始吧~
先说首要问题：Web 服务器是什么？
![](/data/attachment/album/201608/08/205112sxhej6turgrph11d.png)
简而言之，它是一个运行在一个物理服务器上的网络服务器（啊呀，服务器套服务器），等待客户端向其发送请求。当它接收请求后，会生成一个响应，并回送至客户端。客户端和服务端之间通过 HTTP 协议来实现相互交流。客户端可以是你的浏览器，也可以是使用 HTTP 协议的其它任何软件。
最简单的 Web 服务器实现应该是什么样的呢？这里我给出我的实现。这个例子由 Python 写成，即使你没听说过 Python（它是一门超级容易上手的语言，快去试试看！），你也应该能够从代码及注释中理解其中的理念：