By default, this is disabled.
rotate num Specifies the number of backups to allow for each log file. When a log
file becomes full, the logs are saved to a backup file and the log file is
cleared for new logs. You can specify 0-100 backups. If the maximum
number of backups is reached, the oldest backups are purged to make
way for new ones.
The default is 0.
size Mbytes Specifies the size of each log file. You can specify 0-1000000 Mbytes. If
you specify 0, the file size is unlimited.
The default size is 0.
Default See descriptions.
Mode Configuration mode
Usage When you enable logging, the default minimum severity level that is logged is debugging.
The per-protocol option is recommended. Without this option, messages from all routing
protocols will be written to the same file, which may make troubleshooting more difficult.
router log log-buffer
Description Sends router logs to the logging buffer.
Syntax [no] router log log-buffer
Default Disabled by default.
Mode Configuration mode
rule-set
Description Configure a Data Center Firewall rule set.
For more information, refer to the Data Center Firewall Guide.
page 185 | Document No.: 410-P2-CLI-001 - 6/17/2016
A10 Thunder Series and AX Series—Command Line Interface Reference
run-hw-diag
Description Access the hardware diagnostics menu on the next reboot
CAUTION: The system will be unavailable for normal operations while a test is running.
NOTE: A reboot is required before the hardware diagnostics menu appears. If you reboot
to a software release that does not support the hardware diagnostics menu, the
menu is not available. Currently, the hardware diagnostics menu is supported in AX
Release 2.4.3-P3 and later 2.4.x releases, and in AX Release 2.6.1.
Syntax run-hw-diag
Mode Configuration mode
Usage The hardware diagnostic menu is available only on serial console sessions. To run a test, you
must use a serial console connection.
The run-hw-diag command requires a reboot. After the reboot is completed, a menu with
the following options appears:
• 1 - Memory Test
• 2 - HDD/CF Scan Test (1-2 hours)
• 3 - MBR (Master Boot Record) check
• 4 - Complete Test (all above)
• x - Reboot
NOTE: As indicated in the description for option 2, the media scan test, the test takes 1-2
hours to complete.
After a test is completed, you can use the x option to reboot. If you do not enter an option to
run another test or reboot, the system automatically reboots after 5 minutes. The same
software image that was running when you entered the run-hw-diag command is reloaded
during the reboot.
Example The following example shows how to access the hardware diagnostic menu:
ACOS(config)#run-hw-diag
Please confirm: You want to run HW diagnostics (N/Y)?:y
Please reboot the system when you are ready.
HW diagnostic will run when the system comes back up.
ACOS(config)#end
ACOS#reboot
Proceed with reboot? [yes/no]:yes
Rebooting......
Document No.: 410-P2-CLI-001 - 6/17/2016 | page 186
A10 Thunder Series and AX Series—Command Line Interface Reference
INIT: version 2.86 booting
Booting.........mdadm: stopped /dev/md1
mdadm: stopped /dev/md0
00000000000
------------------------------------------------------
| Hardware Diagnostic Menu |
------------------------------------------------------
| 1 - Memory Test |
| 2 - HDD/CF Scan Test (1-2 hours) |
| 3 - MBR (Master Boot Record) check |
| 4 - Complete Test (all above) |
| x - Reboot |
------------------------------------------------------
Please select an option [1-4, x]:
running-config display
Description Configure whether or not aFleX and class-list file information should be included in the run-
ning-config.
Syntax [no] running-config display {aflex | class-list}
Parameter Description
aflex Show aFleX scripts in the running-config.
class-list Show class-list files in the running-config.
Default By default, aFlex and class-list file information is not displayed.
Mode Configuration mode
Usage One or both options may be specified.
scaleout
Description Configure Scaleout.
For more information, refer to the Configuring Scaleout guide.
page 187 | Document No.: 410-P2-CLI-001 - 6/17/2016
A10 Thunder Series and AX Series—Command Line Interface Reference
session-filter
Description Configure a session filter.
Syntax [no] session-filter filter-name set
{
dest-addr ipv4addr [dest-mask {/length | mask}] |
dest-port portnum |
ipv6 |
sip |
source-addr ipv4addr |
source-port portnum
}
Parameter Description
dest-addr Matches on sessions that have a source or destination IPv4 address or port:
dest-port
• source-addr ipaddr [{subnet-mask | /mask-length}] – Matches on IPv4
source-addr
sessions that have the specified source IP address.
source-port
• source-port port-num – Matches on IPv4 sessions that have the specified source
protocol port number, 1-65535.
• dest-addr – Matches on IPv4 sessions that have the specified destination IP address.
• dest-port – Matches on IPv4 sessions that have the specified destination protocol port
number, 1-65535.
You can use one or more of the suboptions together in a single command, nested in the
order shown above. For example, if the first suboption you enter is dest-addr, the only
additional suboption you can specify is dest-port.
ipv6 Matches on all sessions that have a source or destination IPv6 address.
sip Matches on all SIP sessions.
Default No session filters are configured by default.
Mode Configuration mode
Usage Session filters allows you to save session display options for use with the clear session
and show session commands. Configuring a session filter allows you to specify a given set of
options one time rather than re-entering the options each time you use the clear ses-
sion or show session command.
Example The following commands configure a session filter and use it to filter show session output:
ACOS(config)#session-filter f1 source-addr 1.0.4.147
ACOS(config)#show session filter f1
Prot Forward Source Forward Dest Reverse Source Reverse Dest
Age Hash
------------------------------------------------------------------------------------------
-----------------
Tcp 1.0.4.147:51613 1.0.100.1:21 1.0.3.148:21 1.0.4.147:51613
120 1
Document No.: 410-P2-CLI-001 - 6/17/2016 | page 188
A10 Thunder Series and AX Series—Command Line Interface Reference
sflow
Description Enables the ACOS device to collect information about Ethernet data interfaces and send the
data to an external sFlow collector (v5).
Syntax [no] sflow
{
agent address {ipaddr | ipv6addr} |
collector {ip ipaddr | ipv6 ipv6addr} portnum |
polling type |
sampling {ethernet portnum [to portnum] | ve ve-num [to ve-num]} |
setting sub-options |
source-address {ip ipaddr | ipv6 ipv6addr}
}
Parameter Description
agent address Configure an sFlow agent. The ipaddr value can be any valid IPv4 or IPv6 address.
{ipaddr | ipv6addr} By default, sFlow datagrams use the management IP of the ACOS device as the
source address, but you can specify a different IP address, if desired. The informa-
tion will appear in the Layer 4 information section of the sFlow datagram, and it is
not used to make routing decisions.
collector Configure up to four sFlow collectors. The IP address is that of the sFlow collector
{ip ipaddr | ipv6 ipv6addr} device. Specify the port number, with a range from 1-65535.
portnum
The default port number is 6343.
polling type Enables sFlow export of DDoS Mitigation statistics for the source IP address(es)
matched by this rule. You can enable polling for the following types of data:
• cpu-usage – Polls for CPU utilization statistics.
• ethernet – Polls for Ethernet data interface statistics.
• http-counter - Polls for HTTP statistics.
• ve - Polls for statistics for Virtual Ethernet (VE) interfaces.
All sFlow polling (collection) is disabled by default
sampling Enable sFlow sampling on a specified interface.
{ethernet portnum
There is no default.
[to portnum] |
ve ve-num [to ve-num]}
page 189 | Document No.: 410-P2-CLI-001 - 6/17/2016
A10 Thunder Series and AX Series—Command Line Interface Reference
Parameter Description
setting sub-options Configure global sFlow settings:
• counter-polling-interval seconds – Configure the sFlow counter
polling interval. The interval seconds option specifies the frequency with
which statistics for an interface are periodically sampled and sent to the sFlow
collector. The range can be configured to a value from 1-200 seconds. The
default polling interval is 20 seconds.
• max-header bytes – Maximum number of bytes to sample from any given
packet, 14-512 bytes. The default is 128 bytes.
• packet-sampling-rate num – Configure sFlow default packet sampling
rate. The num option specifies the value of N, where N is the value of the
denominator in the ratio at which a single packet will be sampled from a
denominator ranging from 10-1000000. The default is 1000, meaning one
packet out of every 1000 will be sampled.
• source-ip-use-mgmt – Enable use of the management interface’s IP as the
source address for outbound sFlow packets.
source-address Source IP address for sFlow packets sent from ACOS to sFlow collectors.
{ip ipaddr | ipv6 ipv6addr}
NOTE: By default, the IP address of the egress interface is used. You can specify a
data interface’s IP address or the management interface’s IP address as the source
address for sFlow packets sent to the collector. However, the current release does
not support routing of sFlow packets out the management interface. The sFlow
collector must be able to reach the ACOS device through a data interface, even if
you use the ACOS device’s management IP address as the source address of sFlow
packets sent to the collector.
Default Described above, where applicable.
Mode Configuration mode
Usage Enable either or both of the following types of data collection, for individual Ethernet data
ports:
• Packet flow sampling – ACOS randomly selects incoming packets on the monitored
interfaces, and extracts their headers. Each packet flow sample contains the first 128
bytes of the packet, starting from the MAC header. Note that setting a smaller value for
the num variable increases the sampling frequency, and larger numbers decrease the
sampling frequency. This is due to the fact that the variable is in the denominator.
• Counter sampling – ACOS periodically retrieves the send and receive statistics for the
monitored interfaces. These are the statistics listed in the Received and Transmitted
counter fields in show interface output.
Notes
• Sampling of a packet includes information about the incoming interface but not the
outgoing interface.
• None of the following are supported:
• Host resource sampling
• Application behavior sampling
• Duplication of traffic to multiple sFlow collectors
• Configuration of sFlow Agent behavior using SNMP
Document No.: 410-P2-CLI-001 - 6/17/2016 | page 190
A10 Thunder Series and AX Series—Command Line Interface Reference
If the ACOS device is a member of an aVCS virtual chassis, use the device-context
command to specify the device in the chassis to which to apply this command.
Example The following commands specify the sFlow collector, and enables use of the management
interface’s IP as the source IP for the data samples sent to the sFlow collector:
ACOS(config)#sflow collector ip 192.168.100.3 5
ACOS(config)#sflow setting source-ip-use-mgmt
slb
Description Configure Server Load Balancing (SLB) parameters. For information about the slb com-
mands, see “Config Commands: Server Load Balancing” in the Command Line Interface
Reference for ADC.
smtp
Description Configure a Simple Mail Transfer Protocol (SMTP) server to use for sending emails from the
ACOS device.
Syntax [no] smtp
{
{hostname | ipaddr} |
[mailfrom email-src-addr] |
[needauthentication] |
[port protocol-port] |
[username string password string]
}
Parameter Description
hostname | ipaddr Specifies an SMTP server.
mailfrom email-src-addr Specifies the email address to use as the sender (From) address.
needauthentication Specifies that authentication is required.
This is disabled by default.
port protocol-port Specifies the protocol port on which the server listens for SMTP traffic.
The default port is 25.
username string Specifies the username and password required for access. The password can be 1-31
password string characters long.
Default No SMTP servers are configured by default. When you configure one, it has the default set-
tings described in the table above.
Mode Configuration mode
Example The following command configures the ACOS device to use SMTP server “ourmailsrvr”:
ACOS(config)#smtp ourmailsrvr
page 191 | Document No.: 410-P2-CLI-001 - 6/17/2016
A10 Thunder Series and AX Series—Command Line Interface Reference
snmp
Description For information about SNMP commands, see “Config Commands: SNMP” on page225.
so-counters
Description Show scale out statistics.
Syntax so-counters [sampling-enable options]
Specify sampling-enable to enable baselining. The following options are available:
Option Description
all All packets.
so_pkts_conn_in Total packets processed for an established con-
nection.
so_pkts_conn_redirect Total packets redirected for an established con-
nection.
so_pkts_dropped Total packets dropped.
so_pkts_errors Total packet errors.
so_pkts_in Total number of incoming packets.
so_pkts_new_conn_in Total packets processed for a new connection.
so_pkts_new_conn_redirect Total packets redirected for a new connection.
so_pkts_out Total number of packets sent out.
so_pkts_redirect Total number of packets redirected.
Mode Configuration mode
Document No.: 410-P2-CLI-001 - 6/17/2016 | page 192
A10 Thunder Series and AX Series—Command Line Interface Reference
sshd
Description Perform an SSHD operation on the system.
Syntax sshd
{
key generate [size {2048 | 4096}] |
key load [use-mgmt-port] url |
key regenerate [size {2048 | 4096}] |
key wipe |
restart
}
Parameter Description
key generate Generate an SSH key.
You can choose to specify a key size; use size 2048 to generate a 2048-bit key, or size 4096
to generate a 4096-bit key.
key load Load an SSH key.
Specify use-mgmt-port to use the management interface as the source interface for the con-
nection to the remote device. The management route table is used to reach the device. By
default, the ACOS device attempts to use the data route table to reach the remote device
through a data interface.
Specify the url to the SSH key. You can enter the entire URL on the command line or press Enter
to display a prompt for each part of the URL. If you enter the entire URL and a password is
required, you will still be prompted for the password. The password can be up to 255 characters
long.
To enter the entire URL:
• tftp://host/file
• ftp://[user@]host[port:]/file
• scp://[user@]host/file
• sftp://[user@]host/file
key regenerate Regenerate an SSH key.
You can choose to specify a key size; use size 2048 to generate a 2048-bit key, or size 4096
to generate a 4096-bit key.
key wipe Wipe an SSH key.
restart Restart the SSH service.
Mode Configuration mode
Introduced in Release 4.0.1
page 193 | Document No.: 410-P2-CLI-001 - 6/17/2016
A10 Thunder Series and AX Series—Command Line Interface Reference
syn-cookie
Description Enable hardware-based SYN cookies, which protect against TCP SYN flood attacks.
Syntax [no] syn-cookie enable [on-threshold num off-threshold num]
Parameter Description
on-threshold num Maximum number of concurrent half-open TCP connections
allowed on the ACOS device, before SYN cookies are enabled.
If the number of half-open TCP connections exceeds the on-
threshold, the ACOS device enables SYN cookies. You can
specify 0-2147483647 half-open connections.
off-threshold num Minimum number of concurrent half-open TCP connections
for which to keep SYN cookies enabled. If the number of half-
open TCP connections falls below this level, SYN cookies are
disabled. You can specify 0-2147483647 half-open connec-
tions.
NOTE: It may take up to 10 milliseconds for the ACOS device to detect and respond to
crossover of either threshold.
Default Hardware-based SYN cookies are disabled by default. When the feature is enabled, there are
no default settings for the on and off thresholds.
Mode Configuration mode
Usage Hardware-based SYN cookies are available only on some models.
If both hardware-based and software-based SYN cookies are enabled, only hardware-based
SYN cookies are used. You can leave software-based SYN cookies enabled but they are not
used. (Software-based SYN cookies are enabled at the virtual port level using the syn-
cookie enable command.)
If you omit the on-threshold and off-threshold options, SYN cookies are enabled and
are always on regardless of the number of half-open TCP connections present on the ACOS
device.
This command globally enables SYN cookie support for SLB and also enables SYN cookie
support for Layer 2/3 traffic. No additional configuration is required for SLB SYN cookie
support. However, to use Layer 2/3 SYN cookie support, you also must enable it at the
configuration level for individual interfaces. See the “ip tcp syn-cookie threshold” command
in the Network Configuration Guide.
If L3V partitions are configured, hardware-based SYN cookies must be enabled per individual
partition. Hardware-based SYN cookies are NOT partition-aware.
On FTA models only, it is recommended not to use hardware-based SYN cookies if DSR also is
enabled. If both features are enabled, a client who sends TCP requests to a VIP that is
configured for DSR will receive two SYN-ACKS, one from the ACOS hardware-based SYN-