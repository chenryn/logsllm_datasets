2022 IEEE/ACM 44th International Conference on Software Engineering: Software Engineering in Practice (ICSE-SEIP)
Mining Root Cause Knowledge from Cloud Service Incident
Investigations for AIOps
AmritaSaha
StevenC.H.Hoi
PI:EMAIL
PI:EMAIL
SalesforceResearchAsia
SalesforceResearchAsia
ABSTRACT
1 INTRODUCTION
RootCauseAnalysis(RCA)ofanyservice-disruptingincidentis
Foroperatinglarge-scalecloudservices,incident(e.g.,unplanned
oneofthemostcriticalaswellascomplextasksinITprocesses,
interruption,outageorperformancedegradation)management[5]
especiallyforcloudindustryleaderslikeSalesforce.TypicallyRCA
isacriticalaspectofIT-Ops,withoneofitsmostcomplexproblems
investigationleveragesdata-sourceslikeapplicationerrorlogsor
beingIncidentRootCauseAnalysis(RCA)[1].Lately,AIOps(AI
servicecalltraces.Howeverarichgoldmineofrootcauseinforma-
forITOperations)hasplayedasignificantroleinautomatingRCA
tionisalsohiddeninthenaturallanguagedocumentationofthe
investigationbyleveragingdata-drivenandAItechniquesover
pastincidentsinvestigationsbydomainexperts.Thisisgenerally
data-sourceslikeapplicationlogs,timeseriesandexecutiontrace
termedasProblemReviewBoard(PRB)Datawhichconstitutea
data.Howeverinthiswork,wefocusonarichdata-sourceofpast
corecomponentofITIncidentManagement.However,owingto
documentedincidentinvestigationreports-generallytermedas
therawunstructurednatureofPRBs,suchrootcauseknowledgeis
ProblemReviewBoard(PRB)Data[6,29]thatconstituteacore
notdirectlyreusablebymanualorautomatedpipelinesforRCAof
componentinallmajorITIncidentManagementpipelines[2,8,27].
newincidents.Thismotivatesustoleveragethiswidely-available
ThemanualRCAinvestigationincarriedoutin5steps,witheach
data-sourcetobuildanIncidentCausationAnalysis(ICA)engine,
documentedseparatelyinthePRBdata:1)IncidentDetection
usingSoTAneuralNLPtechniquestoextracttargetedinformation
whichtypicallyreliesonanalysisofKeyPerformanceIndices(e.g.
andconstructastructuredCausalKnowledgeGraphfromPRBdoc-
AveragePageTimeofaservice),continuouslymonitoredforeach
uments.ICAformsthebackboneofasimple-yet-effectiveRetrieval
hostmachine.2)SymptomDetectionwhichdetectstheprimary
basedRCAfornewincidents,throughanInformationRetrievalsys-
effectoftheservicedisruptiononperformancefactorslikeCPU
temtosearchandrankpastincidentsanddetectlikelyrootcauses
andistreatedasthekeyobservablesymptome.g.HighAppCPU.
fromthem,giventheincidentsymptom.Inthiswork,wepresent
3)Investigationwhichrequiresmultipleiterationsofbackand
ICAandthedownstreamIncidentSearchandRetrievalbasedRCA
forth communication updates between teams of Site Reliability
pipeline,builtatSalesforce,over2Kdocumentedcloudservicein-
EngineersorSREinspectingintodifferentaspectstounderstand
cidentinvestigationscollectedoverafewyears.Wealsoestablish
thebroadnatureoftheincidentandidentifythetargetteamwho
theeffectivenessofICAandthedownstreamtasksthroughvarious
canundertaketheRCAinvestigation.4)ImmediateResolution:
quantitativebenchmarks,qualitativeanalysisaswellasdomain
Basedontheconclusionsoftheinvestigation,anactionistakento
expert’svalidationandrealincidentcasestudiesafterdeployment.
temporarilymitigatetheproblem,e.g.,anincidentduetosudden
CCSCONCEPTS increaseofmemoryconsumptiononanodemightbemitigatedby
restartingit,butadeeperinvestigationneedstobecarriedoutbythe
• Applied computing → Document management and text
respectiveServiceOwnerforRCA.5)RootCauseInvestigation:
processing.
Finally the target team for RCA investigates into the true root
cause(e.gabugintheserviceoraspecificprocess).Eachphase
KEYWORDS
of this investigation is documented in a long open-ended form
rootcauseknowledgemining,incidentinvestigationsdata
ACMReferenceFormat:
AmritaSahaandStevenC.H.Hoi.2022.MiningRootCauseKnowledge
fromCloudServiceIncidentInvestigationsforAIOps.In44ndInternational
ConferenceonSoftwareEngineering:SoftwareEngineeringinPractice(ICSE-
SEIP’22),May21–29,2022,Pittsburgh,PA,USA.ACM,NewYork,NY,USA,
10pages.https://doi.org/10.1145/3510457.3513030
Permissiontomakedigitalorhardcopiesofallorpartofthisworkforpersonalor
classroomuseisgrantedwithoutfeeprovidedthatcopiesarenotmadeordistributed
forprofitorcommercialadvantageandthatcopiesbearthisnoticeandthefullcitation
onthefirstpage.CopyrightsforcomponentsofthisworkownedbyothersthanACM
mustbehonored.Abstractingwithcreditispermitted.Tocopyotherwise,orrepublish,
topostonserversortoredistributetolists,requirespriorspecificpermissionand/ora
fee.Requestpermissionsfrompermissions@acm.org.
ICSE-SEIP’22,May21–29,2022,Pittsburgh,PA,USA
©2022AssociationforComputingMachinery.
Figure1:(left)RawPRBdocumentand(right)Structured
ACMISBN978-1-4503-9226-6/22/05...$15.00
https://doi.org/10.1145/3510457.3513030 formobtainedthroughneuralinformationextraction
197
ICSE-SEIP’22,May21–29,2022,Pittsburgh,PA,USA AmritaSahaandStevenC.H.Hoi
AverageStats(mean±std)ofRaw&ExtractedPRBdatafields
Length(non-stopwords)ofPRBSubjectText 5.2±2.9
Length(non-stopwords)offullPRBInvestigationDoc 309.7±732.2
Length(–"–)ofPRBResolutionDocument 18.3±24.8
Length(–"–)ofPRBRCADocument 110.1±159
Length(non-stopwords)ofextractedSymptom 4.1±2.8
Length(–"–)ofextractedInvestigationTopics 3.1±1.0
Length(–"–)ofextractedInvestigationSummary 41.6±31.9
Length(–"–)ofextractedRootCause 5.9±4.1
Length(–"–)ofextractedResolutions 5.0±3.3
SevWiseAvgStats Sev0 Sev1 Sev2
PercentageofIncidents 3.61% 31.23% 65.15%
InvestigationDocLength 1479±2680 419±707 193±300
ResolutionDocLength 28±32 21±29 17±21.5
RCADocLength 189±163 152±150.6 86±157
Table1:Statsofourcollecteddatasetof2000PRBrecords
Figure2:Plotw.r.tdegreeofrepeatednessofincidents:(a)
Timelineofquarterlyincidentcount(b)Distributionofinci-
dentseverity(c)IncidentResolutionTime
evenunknowntotheexperiencedSRE.Withthisobjective,inSec.2,
containingevidencesfromdifferentkindsofsystemsdata(logs, wemotivatetheproblem,inSec.3wepresenttheproposedsystem
tracesetc)orteam-communications(emailorchatdiscussions).This whichweanalyzeandevaluateinSec.4andconcludeinSec.5.
processofdocumentingincidentinvestigationsisindeedacritical
component of any major ITOps pipeline, making PRBs a fairly 2 PROBLEMSETTINGANDMOTIVATION
genericdata-sourcelargelyavailableinallIncidentManagement
OurPRBdatasetiscollectedover2000investigationsofcloudser-
systems.Especiallywithrepeatedincidentscausingsimilarservice
viceincidentshavingSev0/1/2severitylevels,i.e.,respectively,Cat-
disruptions,pastincidentdatahasbecomeincreasinglyvaluable.
astrophic,CriticalorHighImpact.Inthissectionwemotivatethe
However,initsrawformthisrichinformativedata-sourcecannotbe
needforminingsuchaPRBdatasourceandelaborateitschallenges.
directlyconsumedbyAImodelsordomainexpertsforknowledge
reuse,norarethereanyexistingAIOpspipelineleveragingit. Motivation-1:InadequatePriorWork:MostofRCAliterature
Withthismotivation,ourmainResearchQuestionisCanAI hasfocusedonminingusableknowledgefromSoftwareLogging
assistongoingincidentanalysisbyextractingandminingrelevant dataandExecutiontraces,ServiceCallGraphsandTimeSeries
RCAinformationfrompastinvestigationsandreusingthisknowledge data.Theclosestworksrelatedtousare[10,12,27]whichmines
toquicklyresolverepeatingincidents? knowledgefromincidentdescriptionsorTroubleshootingGuides
Towardsthisend,OurPrimaryContributionsare: orBugFixes.However,theyfocusonmorestraightforwardtasks,
• WeproposeanAIpipelineofIncidentCausationAnalysis(ICA) involvingsimplermodelsorreadilyavailabletrainingdata.[27]
overpastIncidentInvestigations(i.e.PRB)data,constitutingof onlytagsnamedentitiesfromIncidentDescriptions,byleverag-
– AtargetedNeuralNLPandInformationExtractionsystemto ingtheavailablestructuredkey-valuepairdata.[12]recommends
extractkeyRCAinformationfromeachunstructuredPRB TroubleShootingguidesforincidentswithavailableparalleldatato
– AspecializedNeuralKnowledgeMiningsystemtoaggregate trainCNN/LSTMmodels.[10]doesbugtriagingonstructuredBug-
document-levelinformationoverallincidentsintoadomain- Fixdocumentsusingnon-neuralandheuristicmethods.Because
specificCausalKnowledgeGraph oftheiruse-cases,theydonotrequirethetargetedinformation