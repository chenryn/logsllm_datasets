和流程。
2.工作组的角色
一般情况下，企业需要抽组人员建立工作组来执行测试和评估战略。这个工作组常常被称
为测试和评估集成产品小组，由测试和评估领域的专家，客户代表，和其他利益相关方组成。
—172—
3.验证 Verification 与确证 Validation
验证判断产品是否准确体现和满足了产品规范。（满足需求规格书）
确证是指软件或系统可以满足文档的需求和用户期望。（满足实际业务）
关于认证/认可什么的详细描述在第三域 C 章节的第 5 条。
B.执行安全控制测试
1.基于分类的 25 个最危险软件错误
2011 年 CWE/SANS（Common Wiakness Enumeration/SysAdmin,Audit,Network,Security）
发布了 25 个最危险软件错误，即一个最广泛和关键的错误列表，这些错误可能导致严重的软
件漏洞。它们常常很容易被发现和利用。它们之所以危险是因为黑客可以利用它们完全控制软
件或使软件彻底不工作。CBK 里整理了三大高级类型的错误：
①组件之间不安全的交互,Insecure interaction between components（通信弱）
②高风险的资源管理,Risky resource management（管不好）
③漏洞百出的防御,porous defenses（防得差）
2.SANS 协会的关键安全控制
SANS 协会（SysAdmin audit Network Security），又叫系统管理和网络安全审计委员会，
是提供计算机安全培训和专业认证的机构。除了上述 25 个最危险软件错误列表，SANS 关键安
全控制列表是这一领域另一有价值的资源。特别是应用软件安全。其中第 6 号控制列表（CSC6）
是为了管理所有内部开发或外部获取的软件安全生命周期而设计的，用来防止，探测和矫正安
全弱点。具体列表就不复制了，在 CBK 里有。
B.1 脆弱性评估
一、脆弱性评估
目标：评估安全状态、查找全部漏洞、测试响应措施，测试前要告知可能的影响。
分类：
①黑盒测试，零了解，渗透团队在不了解测试目标的情况下测试。
②灰盒测试，中了解，在了解一些与测试目标相关的信息上测试。
③白盒测试，全了解，了解目标的本质的基础上测试。
评估内容还包括对员工的职能测试、社会学测试和对设备的物理性测试。评估结果仅针对
当前时间，之后仍需定期评估。
为了做好脆弱性评估，安防人员最好在筹划准备阶段定义好具体的防护目标和要求，包括：
①威胁定义 threat definition；
②目标识别 target identification；
③系统(站点)特点 facility characteristics。
二、漏洞扫描 Vulnerability Scans
自动对系统、应用程序和网络进行探测，寻找可能会被攻击者利用的弱点。漏洞扫描的类
型主要有三种：网络发现扫描、网络漏洞扫描和 Web 应用程序漏洞扫描。
1.网络发现扫描 Network Discovery Scanning
—173—
使用多种技术对一系列 IP 地址进行扫描，搜索配有开放网络端口的系统。网络发现扫描
器实际上不能探测系统的漏洞，只是提供一份网络检测的系统显示报告和一份端口清单，这份
清单通过网络和服务器防火墙公开了隐藏在扫描器和扫描系统之间网络路径中的端口。
①TCP-SYN 扫描。“半开放”扫描，向每个被扫描的端口发送带有 SYN 标志设置的单个
数据包，也就是请求一个新连接。如果扫描器收到了 SYN 和 ACK 标志设置的响应包，则表明
该且端口是开放的，TCP 握手移至第二阶段。
②TCP 连接扫描。向指定端口的远程系统打开一个全连接。这种扫描的使用情景是，扫描
用户没有运行“半开放”扫描的必要权限。
③TCP-ACK 扫描。发送带有 ACK 标志设置的单个数据包，表明它是开放连接的一部分。
④Xmas 扫描。发送带有 FIN 、PSH 和 URG 标志设置的数据包。这个数据包带有很多标志
设置，被称为是“点亮的圣诞树” Christmas tree，从而给这种扫描起了这个名字。
TCP 的三次握手和详细知识看第四域的 A.1 章节。
⑤扫描神器 NMAP
解释一下 NMAP 扫描结果的三种端口状态：
*开放/在用 open：端口在远程系统上是开放的，有一个应用程序正在连接该端口。
*关闭/未用 closed：端口在远程系统上可用，防火墙允许通，但无应用程序连接该端口。
*过滤/阻拦/未知 filtered：无法确定状态，很可能防火墙过滤了。
2.网络漏洞扫描 Network Vulnerability Scanning
网络漏洞扫描在检测到开放端口后会继续调查目标系统或网络，来查找己知的漏洞。在某
些情况下，扫描器可能没有足够的信息来最终确定一个漏洞的存在，它也可能会在没有问题的
时候报告漏洞，这种情况被称为假性正面报告 false positive report（误报）。更危险的是，
漏洞扫描器可能会漏掉漏洞，从而不能提醒管理员危险情况的存在，这个错误被称为假性负面
报告 false negative report（漏报）。
3.Web 漏洞扫描 Web Vulnerability Scanning
Web 服务器上的应用程序是复杂的，经常对底层数据库有访问特权。攻击者通常使用 SQL
注入和其他针对 Web 应用程序的安全设计缺陷来攻击。
B.2 渗透测试
渗透测试 PT（Penetration Testing）超越了漏洞测试技术。渗透，就是攻击成功了，入
侵者能够突破系统环境的边界。安全的一个重要目标就是防止渗透。因为它不止是找出漏洞，
更要利用漏洞进行模拟攻击。渗透测试人员通常使用一个工具叫 Metasploit，还有 KALI 也用
得很多。有人把渗透测试等同与安全评估，其实安全评估的范围大得多，不只是网络渗透，还
有物理安全、人员安全、管理安全什么的。
根据双方的关系，分为肓测、双肓测、目标测试。
根据掌握的信息，分为零知识（黑盒）、部分知识（灰盒）、全知识（白盒）。
白盒有 2 种英文：Crystal box（水晶盒）、white box。
黑盒也有另一种说法：realistic type of penetration test（基于现实的测试）
考试里的渗透测试步骤是这样的：
—174—
①discovery 发现，搜集和收集目标的相关信息
②enumeration 枚举，进行端口扫描和资源标识方法
③vulnerability mapping 脆弱性映射，在确定的系统和资源中标识脆弱性
④exploitation 利用，尝试利用脆弱性进行未授权访问
⑤report to manager 向管理层报告，向管理层提交报告和安全建议
（搜、举、射、用、报）
脆弱性评估（测试）与渗透测试的区别：
前者扫描环境中存在的所有可能漏洞；后者找出并利用漏洞入侵客户系统。
选择一个安全测试或渗透测试采用的方法/工具，应考虑以下因素：
①攻击面 Attack Surface。用不同的工具查找不同类型的漏洞。
②应用类型 Application type。对不同的软件系统用不同的测试方法。
③测试结果的质量要求和用途 Quality of Results and Usability。不同标准（低误报、
零漏报）、不同用途（如评标、主级等）对应不同的方法。
④功能特点 Supported Technologies。评测工具有自身的功能特点，有的只管 C 语言，
有的只能搞网站。
⑤性能要求 Performance and Resource Utilization。不同的工具需要不同的计算能力、
人力、经费等。
考试中经常涉及的渗透测试的工具：
①Nikto/Burp Suite/Wapiti：web 服务、web 应用的漏洞扫描。
②Metasploit：渗透测试工具集，包括网络扫描、漏洞扫描等，并不针对某一特定功能。
③sqlmap：SQL 注入测试。
④Nmap：端口扫描神器。
⑤Nessus：漏洞扫描。
安全内容自动操作协议 SCAP(The Security Content Automation Protocol)，是用来处
理漏洞信息和漏洞管理信息的通信规范，可以传输和保护漏洞信息和安全配置信息(CVE、NVD)。
通用漏洞评级系统 CVSS(Common Vulnerability Scoring System)，是用来称量和量化漏
洞的风险等级、影响程度的指标，也包括了消减建议等内容。
NVD(National Vulnerability Database),国家漏洞库。
CVE(Common Vulnerabilities and Exposures),通用公共漏洞库和暴露。
CSV(Comma-Separated Values)不知道是什么。
B.3 日志审查
信息安全管理人员应该定期进行日志审查，以确保特权用户不滥用特权。安全信息和事件
管理(SIEM)系统在这些过程中发挥重要作用，将日志审查的大部分日常工作自动化。
1.日志
日志是系统和网络中发生的事件记录。日志由一些日志项组成，每个日志项包含了与系统
和网络中发生的事件相关的信息。安全日志有很多源头，比如安全软件(反病毒软件，防火墙，
—175—
入侵探测和防御系统)，工作站和服务器的操作系统，网络设备和应用软件等。
2.日志管理
安全日志管理：生成，传输，存储，分析，和废弃计算机安全日志数据的全过程。
3.日志分析
网络和系统管理员传统上负责执行日志分析——研究日志记录以辨识感兴趣的事件。
4.日志的作用
①进行审计和取证调查；②内部调查；③建立基线；④识别运行趋势以及发现长期问题。
5.最常见的与安全相关的操作系统数据
①系统事件：系统事件就是由操作系统组件执行的操作行动，比如关机，启动服务等。一
般来说失败的事件和最重要的成功事件应当被记录，但是大多数操作系统允许管理员指定哪类
事件需要被记录在日志里。每个事件被记录的细节也大相径庭：每个事件一般有时间戳，以及
其他信息，比如事件状态，错误码，服务名和事件有关的用户或系统账号。
②审计记录：审计记录包含安全事件信息比如成功和失败的身份认证尝试，文件访问，安
全策略变更，账号变更(账号创建，删除，账号权限分配)，以及权限的使用。操作系统通常允
许系统管理员指定哪些类型的事件应被审计以及是否记录执行特定活动的成功或失败的尝试
信息。
B.4 综合事务/综合交易/合成交易 synthetic transactions
搞信息系统运行维护的一项重要任务就是监控掌握各类事务（业务）的运行状态，包括人
工检测和自动检测。
1.实际用户监控(RUM)（考点）
实际用户监控(RUM)/真实用户监控，是 Web 监控的一种方式，旨在捕获和分析网站或应用
的每个用户的每个交易。有时也被称为实际用户测量，实际用户度量，或终端用户体验监控
(RUM)，是一种被动监控方式，依赖于可以持续观察系统行为，追踪可用性，功能性和反应时
间的 Web 监控服务。人工的性能监控，也被称为被动监控，使用轻量级的、低水平的代理来完
成，如 JavvaScript,CSS,和 AJAX 的调用等。
一些自下而上 bottom-up forms 的实际用户监控(RUM)依赖于捕获服务器侧信息，以重建
用户体验，而自上而下 top-down client side 的基于客户端的实际用户监控(RUM)则可以直接
看到用户如何与应用交互，以及他们的体验究竟如何。（下是服务器）
2.人工合成交易/综合交易的性能监控/综合性能监控/合成性能监控 synthetic
transactions
监控真实的用户要追踪实际用户的会话，容易出现躁音（误差）；更有效的是使用自动工
具模拟一个脚本化的浏览器进行集成测试，它能精确测量在线时间，获取更多的功能和性能细
节，并提供图形化的态势界面。其实就是一套综合的性能管控系统。综合交易也有翻译成：人
工合成交易的。它不跟踪用户实际的会话。
使用综合交易监控的典型例子是：微软的系统中心运行管理器。使用它你能够创造不同类
型的合成交易，用于监控数据库、网站和 TCP 端口的使用。
监控的方式通常有：①监控 Web 站点；②监控数据库；③监控 TCP 端口。
—176—
B.5 代码审核与测试 （例如：手动、 动态、静态、 模糊测试）
第八域 C.3 章节也讲了软件的测试，什么白盒测试（代码）、黑盒测试（功能）、统计测
试、变更测试、单元测试、集成测试、系统测试就不在这讲了，都很容易理解。（这是考点）
软件开发时的安全脆弱性的起因有很多（考点），如：
①不良编程习惯；Bad programming patterns（习惯差）
②安全基础设施的错误配置；Misconfiguration of security infrastructures（配置错）
③安全基础设施的功能缺陷；Functional bugs in security infrastructures（功能弱）
④实施过程中存在逻辑缺陷。Logical flaws in the implemented processes（逻辑乱）
缺陷不是漏洞。
1.代码审查（Code Review）
是软件评估程序的基础。在代码审查(也称为“并行审核”peer review)期间，由不是写
代码的开发人员进行审查、查找缺陷。最正式的代码评审过程，称为范根检查法 Fagan
inspections 或 Fagan testing，有六个步骤：
①规划 Planning
②概述 Overview
③准备 Preparation
④检查 Inspection
⑤返工 Rework
⑥后续 Follow-up
2.静态测试 Static Testing
在不运行软件的情况下通过分析源代码或编译的应用程序对软件进行评估。静态分析通常