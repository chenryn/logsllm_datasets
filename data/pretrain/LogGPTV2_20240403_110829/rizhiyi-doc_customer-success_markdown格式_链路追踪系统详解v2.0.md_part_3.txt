                                                                              跳过空数据点                         
                   忽略异常                                                   输入处理异常的信息                   
                                                                              提交并保存异常信息                   
                                                                              取消                                 
                   显示当前刻度位置和总的刻度数量                                                                  
  业务历史         维持业务历史表                                                                                  
                   根据对应时间选择历史                                                                            
                   不同的历史信息可以继承链路历史信息                                                              
  输入项创建模块   下拉菜单类型                                               可选值集                             值
                                                                                                                   别名
                                                                              单选/多选                            
                                                                              值前缀后缀、选项前缀后缀、分隔符     
                   文本类型                                                   文本值                               
                   动态菜单类型                                               SPL                                  
                                                                              日期选择                             
                                                                              搜索按钮                             
                                                                              动态可选值                           
                                                                              手动可选值                           值
                                                                                                                   别名
                                                                              单选/多选                            
                                                                              值前缀后缀、选项前缀后缀、分隔符     
                                                                              选中字段                             
                   title、token                                                                                    
                   预览                                                                                            
                   对应报表（？是这个说法）                                                                        
                   自更新                                                                                          
                   取消、确定按钮                                                                                  
  SPL模块          展示搜索数据集                                                                                  
                   输入链路SPL                                                                                     
                   展示搜索结果的表格数据                                                                          
                   创建链路图按钮                                                                                  
                   选择链路SPL搜索的时间                                                                           
                   搜索                                                                                            
                   记忆SPL                                                                                         
  链路图           自动布局-备注4                                                                                  
                   手动布局                                                                                        
                   渲染链路图                                                 渲染节点告警颜色                     
                   响应节点点击事件                                                                                
                   响应画布点击事件                                                                                
                   画布缩放、拖拽功能                                                                              
                   节点hover显示tooltip                                       显示KPI告警颜色                      
                                                                              挂载KPI钻取事件                      
  链路历史         历史实例                                                   链路图布局信息                       
                                                                              节点信息集                           节点唯一ID
                                                                                                                   节点布局信息
                                                                                                                   节点KPI
                                                                              异常状态信息集                       
                                                                              异常处理信息集                       
  --------------------------------------------------------------------------------------------------------------------------------------------------
**表2-3-1-1**
![](media/image19.png){width="5.653465660542432in"
height="8.384090113735782in"}
**图2-3-1**
原图链接：
## 数据结构
全链路视图关键字段：
  -----------------------------------------------------------------------
  字段名称                       描述
  ------------------------------ ----------------------------------------
  trace.productNoname            产品名称
  trace.eventNoname              产品类别
  trace.ssi                      节点名称（系统+服务+接口）
  \_totalCount                   调用量
  \_avgTimeCost                  平均耗时
  \_succRate                     成功率
  \_selfErrorCount               自身错误
  \_noSelfErrorCount             非自身错误
  \_TimeoutErrorCount            超时错误
  from                           上游节点（与自身节点相同）
  to                             下游节点
  -----------------------------------------------------------------------
**表2-4-1-1**
时间轴关键字段：
  --------------------------------------------------------------------------------------------------
  字段名称                       描述
  ------------------------------ -------------------------------------------------------------------
  ts                             时间（根据run_timestamp或start_timestamp字段按1分钟粒度进行合并）
  \_TimeoutErrorCount            超时总量
  \_noSelfErrorCount             自身错误总量
  \_noSelfErrorCount             非自身错误总量
  --------------------------------------------------------------------------------------------------
**表2-4-1-2**
# 部署方案
部署日志易全链路追踪系统包括产品部署及产品操作两部分，产品操作又包括日志设计及产品使用。
日志设计可以在全链路追踪系统部署前就着手进行，根据企业数据特色日志设计会有不同的关注点，下面将在日志规范小节中逐一说明。
日志规范在具体企业场景中的落实及应用实例可参见产品使用小节。
1.  ## 产品部署
    1.  ### 介质包
如果是首次安装，需要rizhiyi-dataengine-3.2.0.5-release.tar.gz及以上版本的安装包；
如果在已有日志易环境基础上使用调用链，部分模块的版本需确保符合以下要求：
  ---------------------------------------------------------------------------
  模块                     版本                说明
  ------------------------ ------------------- ------------------------------
  yottaweb                 定制包               
  rizhiyi-manager-server   3.1.0.11及以上      须确认manager
                                               server支持管理fornaxee
  nginx                    3.1.0.3及以上        
  flink_taskmanager        1.0.0.10及以上       
  flink_jobmanager         1.0.0.10(含)以上     
  flink_minio              3.2.0.100及以上      
  fornaxee                 1.0.0.10及以上       
  ---------------------------------------------------------------------------
2.  ### 日志易部署
    1.  #### 操作系统
Centos: 6.3-7.5 64位
RedHat: 6.3-7.5，64位
SUSE : 12 Sp4 64位
其余的os版本不推荐使用。（Suse11确定在2.0以后版本会出问题，不要使用，历史上的Suse11环境要升级请先升级系统到Suse12）
#### 硬盘分区
操作系统系统磁盘分区建议配置：
  -------------------------------------------------------------------------
  挂载点   磁盘容量   类型       备注
  -------- ---------- ---------- ------------------------------------------
  /        50GB       本地挂载   建议值
  /boot    512MB      本地挂载   建议值
  /swap    32GB       本地挂载   建议值
  /opt     30GB       本地挂载   如果无 /opt 分区直接挂载，/
                                 分区必须30GB+。
  /var     10GB       本地挂载   如果无 /var 分区直接挂载，/
                                 分区必须30GB+。
  /data    100GB      本地挂载   如果无 /data 分区直接挂载，/
                                 分区必须100GB+。
  -------------------------------------------------------------------------
**表3-1-2-1**
#### 服务器硬件资源配置
服务器所需最低配置如下：
CPU: 4核 2.0GHz
MEM: 16GB（单机模式建议32G）
DISK: 100GB
IOPS: 100以上
索引数据、中间数据在服务器上存储的时间受限于服务器磁盘空间，至少100GB。
请务必保证以上CPU、MEM资源。
IOPS数据会由安装脚本使用fio进行测试，无需手工测试。如果服务器iops低于100，务必进行更换，过低的iops会严重影响系统稳定性/性能。
#### 防火墙设置
请使用root权限关闭防火墙、SElinux。可执行如下命令来关闭防火墙：
\# iptables -F
\# service iptables stop
\# service iptables save
\# setenforce 0
\# sed -i \'s/\^SELINUX=.\*\$/SELINUX=disabled/g\' /etc/selinux/config
关闭防火墙
\# systemctl stop firewalld.service
\# systemctl disable firewalld.service
关闭selinux
\# setenforce 0
\# sed -i \'s/\^SELINUX=.\*\$/SELINUX=disabled/g\' /etc/selinux/config
#### 服务器时间
日志易安装程序自带了时间同步服务，同样建议在安装前使用date命令检查每台机器的时间、时区是否正常，特别是在集群部署的时候，请务必提前检查。
常用修改系统时区命令可供参考：
\# ln -s /usr/share/zoneinfo/Asia/Shanghai /etc/localtime
同步主机NTP
配置NTP，如NTP服务器:10.8.9.103
\# crontab -e
\*/10 \* \* \* \* /usr/sbin/ntpdate 10.8.9.103
#### 服务器主机名
1.  主机务必唯一
请务必保证每个机器的主机名唯一，不可以重复。否则会导致机器失联。
2.  主机命名建议
日志易建议主机命名方式为 A-B-C-D 的形式。
示例说明：
IP：10.0.0.7