术被装入 SSL 或 TLS 会话。 此外， 如果何有王联网 电话或 VoIP 系统， 那 么语音通信会通过也草技
术被装入某种 VoIP 协议。
在日常生活中 ， 还会遇到 多 少使用 隧道技术的 实例?
第 1 2 童 安全通信和网络攻击
如果封装协议的操作涉及加密， 那么隧道技术可以提供通过不可信的中间网络传输敏感数据的
方法， 并且不必担心丢失机密性和完整性。
隧道技术并不是没有问题。 由于大多数协议都包含自身的错误检测 、 错误处理、 确认和会话管
理功能， 因此隧道技术通常不是一种有效的通信方法。 正因为如此， 在传输单独的报文时， 一次使
用 多个协议会混合额外的开销。 而且， 隧道技术生成了 更大的或者数量更多的信息包， 这也会消耗
额外的网络带宽。 如果没有足够的带宽， 那么隧道技术会很快使网络饱和 。 此外， 隧道技术是一种
点对点的通信机制， 并且设计时没有考虑对广播通信的处理。 隧道技术也使得在某些情况下监控流
量的内容变得很难， 但不是不可能， 这为安全从业者制造了 不少麻烦 。
1 2.6.2 VPN 的工作原理
VPN 连接能够被建立在其他任何网络通信连接上， 这些连接可以是典型的 LAN 线缆连接、 无
线 L剧 连接、 远程访问拨号连接、 W剧 连接， 甚至可以是客户端访问办公室 LAN 时使用的互联
网连接。 VPN 连接就像一条典型的直接 LAN 线缆连接， 唯一的区别可能是速率， 而速率依赖于客
户 端系统和服务器系统之间 的中间网络和连接类型。 在一条 VPN 连接上， 客户端可以像通过一条
LAN 线缆直接连接那样执行完全相 同 的操作和访 问相同 的资源。
VPN 可 以连接两个单独的系统或两个完整的网络。 二者唯一的区别在于: 被传输的数据只有在
位于 VPN 隧道内时才会受到保护。 网络边界上的远程访问服务器或防火墙是 VPN 的起点或终点 。
因此， 通信在源 LAN 中没有受到保护， 在边界 VPN 服务器之间得到了保护， 一旦到达 目 的地， LAN
就不再受到保护 。
穿越互联网进行远距离网络连接的 VPN 连接常常是替代直接连接或租用线路的便直选择。 两
条至本地 ISP 的 、 支持 VPN 的高速互联网连接的成本， 往往远小于其他任何可用连接方式的成本。
1 2.6.3 常 用 VPN 协议
使用软件或硬件解决方案都可以实现 VPN。 不管来用明阿'Il解决方案， 总是存在 4 种常用 的 VPN
协议: PPTP， L2F、 L2TP 和 IPSeco PPTP， L2F 和 L2TP 在 OSI 模型的数据链路层(第 2 层)上工作。
PPTP 和 IPSec 被限制在 IP 网络中使用 ， 而 L2F 和 L2TP 则被用 于封装任何 LAN 协议。
注意 :
SSUTLS 也可以被用 来作为 VPN 协议， 而 不只 是作为 工作在 TCP 之上的会话加密。 CISSP 考
试似乎并不 包括 SSL/TLS VPN 的内容。
1 点对点隧道协议
点对点隧道协议σPTP)是从拨号协议点对点协议(PPP)开发出来的一种封装协议， 工作在 OSI
模型的数据链路层(第 2 层)上 ， 并且被用在 E 网络中。 P町P 在两个系统之间创建了一条点对点隧
道， 井且封装 了 PPP 包 。 通过与 PPP 支持相同的身仇呗证协 议， P盯P 为身份认证通信提供了倒户 。
这些身份认证协议包括:
• Microsoft 挑战握手身份认证协议(MS-CHAP)
• 挑战握手身份认证协议(CHAP)
363
364
CISSP 官方学习指南(第 7 版)
• 密码身份认证协议(PAP)
• 扩展身份认证协议(EAP)
• Shiva 密码身份认证协议(SPAP)
注意 :
C1SSP 考试的重点是 PPTP 的 盯C 2637 版本， 而 不是微制反本的 实现， 在锹版本进行 了 专 n修
改并使用 微软点对，主力口 密(MPPE)来支持数据加 密 。
PPTP 使用 的最初隧道协商过程并没有加密。 因此， 包含发送者和接收者 E 地址(可以包括用户
名和散列密码)的会话建立通信包可能被第三方截获。 PPTP 被用在 VPN 上 ， 但是它常常被第二层隧
道协议(L2TP)代替。 L2TP 可 以使用 1PSec 为 VPN 提供通信加密。
PPTP 不支持 TACACS+和RAD町S。
2. 二层转发协议和二层隧道协议
思科公司开发了 自 己的 VPN 协议: 第二层转发协议(L2F)， 这是一种相互的身份认证隧道机制。
然而， L2F 并不提供加密。 L2F 没有得到广泛部署， 并且很快被 L2TP 取代。 正如它们的名字所暗
示的， 它们都工作在 OS1 模型的第 2 层上 。 它们都可 以封装任何局域网协议。
二层隧道协议(L2TP)源 自 于 P盯P 和 L2F 的组合。 L2TP 会在通信的端点之间建立一条点对点的
隧道。 L2TP 缺乏内置的加密方案， 而是通常依赖 IPS巳c 作为安全机制。 L2TP 还支持 TACACS+和
RADIUS o IPSec 通常为 L2TP 用 做一种安全机制 。
3. IP 安全协议
目 前最常用 的 VPN 协 议是 IPSeco IPSec 既是一个独立的 VPN 协议， 也是用于 L2TP 的安全机
制 ， 并且只能用于 E 通信 。 IPSec 提供了 安全的身份认证以及加密的数据传输。 IPSec 具有下列两
个主要的组件或功能:
身份认证头(AH) AH 提供身份认证、 完整性 以及不可否认性 。
封装安全有效载荷(ESP) ESP 提供了加密， 从而能够保护传输数据的机密性 ， 不过也可以执
行有限的身份认证操作。 ESP 在网络层(第 3 层)上工作， 并且可以用在传输模式或隧道模式中 。 在
传输模式中 ， 对E数据包数据进行了加密 ， 但是对数据包的头部并没有进行加密。 在隧道模式中 ，
对整个 IP 数据包都进行了加密， 并且新的数据包头被添加至 E 数据包， 从而能够控制通过隧道进
行 的传输。
表 1 2. 1 说明了 VPN 协议的主要特征。
表 12.1 VPN 协议的主要特征
自 带身份 自 带数据 支持拨号 同时存在的
VPN 协议 支持的协议
认证保护 ? 加密? 连接? 连接数
PPTP 是 否 只支持 IP 是 单个点对点连接
L2F 是 否 只支持 IP 是 单个点对点连接
L2TP 是 否(可 以使用 IPSec) 支持任何协议 是 单个点对点连接
IPSec 是 是 只 支持 IP 否 多 个连接
第 12 章 安全通信和网络攻击
VPN 设备是一种网络增件设备， 用 于创建与服务器或客户端系统分隔开的 VPN 隧道。 对于互
联系统来说， 对 VPN 设备的使用是透明的。
1 2.6.4 虚拟局域网
虚拟局域网(VLAN)被用于硬件上以实施网络分隔。 VL剧 在网络上进行逻辑隔离而不改变其
物理拓扑。
VLAN 由 交换机创建。 默认情况下， 交换机上的所有端口 都属于 吼剧# 1 。 但随着交换机管理
员 更改每个端 口上的 叽剧 分配， 不同的端口可以组合在一起并且使用 各 自不同的 叽剧 端口名
称 。 这样， 在 同一个网络上可 以创建多个逻辑网络分段。
在相同 叽剧 中 的端口之间通信是没有阻碍的。 不同 VLAN 之间 的通信可以通过使用路由功
能拒绝或支持 。 路由可以由外部路由器或交换机的 内 部软件提供(可 由 多层交换机提供)。
因 为安全或性能的原因， VLAN 管理使用 VL剧控制流量。 VLAN 执行多个流量管理功能， 其
中 一些是与安全相关的:
• 控制和限制广播流量 。 阻断子网和 VLAN 中 的广播 。 .
• 隔离网络分段间 的流量。 默认情况下， 不 同 VLAN 之间没有提供彼此之间通信的路由 。 也
可以允许 VL剧 间 的通信 ， 但是要在特定 的 VALN 间(或 VL剧 的特定成员 间)指定拒绝
过滤。
• 减少网络监昕的脆弱性。
• 防止广播风暴(多余的网络广播流量泛洪)。
一些 VL剧 部署的另一个元素是端 口 隔离或私有端口。 这些私有 VL剧 的配置是为了使用一
个专用 的或预留 的上行端口。 私有 VLAN 或端 口 隔离 VLAN 的成员仅可以通过预定的 出 口或上行
端 口进行相互通信。 一种端口 隔离的常见示例是在酒店里。 酒店网络可以被配置以便于将每个房间
或套房的 以太网端口隔离在单独的 VLAN 中 ， 从而达到相同单元的实体可以通信而不同单元的实体
不 能通信的 效果 。 但是， 所有这些私有 VLAN 都有一条到互联网(即上行端 口 )的路径 。
提示 :
VLAN 的作用 就像子网， 但是记住它们不是真正的子网 。 VLAl'咱是由 交换机生成的 。 子网却是
由 IP 地址和子 网 掩码构成的 。
用 于安全的 VLAN 管理
不需要彼此通信去完成工作任务/功能的千到可网段都不应该能够这样做。 使用 VLAN 九许必要
的 ， 而 阻断/拒绝任何不必要的 。 需要记住， "默认拒绝; 九许例外" 不仅仅是一条防火墙规则 ， 而
且是一条安全通用 准 则 。
1 2.7 虚拟化
虚拟化技术用来在单一主机的内存中承载一个或多个操作系统。 这种机制允许在任意硬件上虚
拟任意的操作系统。 这样的操作系统也被称为客户端操作系统。 根据这个观点， 存在在计算机硬件
365
366
CISSP 官方学习指南(第 7 版)
上直接安装的原始或宿主操作系统， 被托管在虚拟机管理系统上的额外操作系统是客户端操作系统。
它同样允许多个操作系统同时使用相同的硬件进行工作。 常见的例子包括 VMWare、 微软的 VJrtual
PC 和 Virtual Server、 Windows Server 2008 的 Hyper-V、 VirtualBox 和苹果的 Parallels。
从用户 的角 度看 ， 虚拟化的服务器和服务与传统的 服务器和服务没有区别。
虚拟化有几个好处， 例如， 能够在需要的情况下， 启 动单个服务器或服务的实例 ， 实时的可扩
展'性， 并且能够运行应用程序所需的额外操作系统版本。 此外， 从受损、 崩溃或损坏的虚拟系统恢
复往往十分简单快捷: 只需要用干净的备份版本简单取代虚拟系统的主硬盘文件， 然后重新启动
即可。
在安全性方面， 虚拟化提供了 几个好处。 整个虚拟系统的备份比同等安装在本地硬件上的系统
更容易和更快速。 另外， 当 出现错误或问题时， 虚拟系统可以在几分钟 内被备份替换。 虚拟系统的
恶意代码破坏或感染很难影响主机操作系统 ， 这将有利于进行安全测试和实验 。
虚拟化被用于各种各样的新的体系结构和系统设计解决方案。 云计算是一种最终的虚拟化形式
(更多关于云计算的信息， 请参阅第 9 章 " 安全脆弱性、 威胁和对策" )。 本地(或至少在组织的私有
基础设施中)， 虚拟化可以用在宿主服务器、 客户端操作系统、 受限的用户接口(即虚拟桌面)应用 以