1 In Server Admin, click Web in the list for the server you want.
2 Click Settings in the button bar.
3 In the Sites pane, double-click the site in the list.
4 In the General pane, type the port number in the Port field.
5 Click Save.
Web service restarts.
Improving Performance of Static Websites 
(Performance Cache)
If your websites contain static HTML files, and you expect high usage of the pages, you 
can enable the performance cache to improve server performance. The performance 
cache is enabled by default.
You should disable the performance cache if:
• You do not anticipate heavy usage of your website.
• Most of the pages on your website are generated dynamically.
Understanding the Effect of Using a Web Service 
Performance Cache
Web service's performance cache is enabled by default and significantly improves 
performance for most websites. Sites that benefit most from the performance cache 
contain mostly static content and can fit entirely in RAM. Website content is cached in 
system RAM and is accessed very quickly in response to client requests.
Enabling the performance cache does not always improve performance. For example, 
when the amount of static web content exceeds the physical RAM of your server, using 
a performance cache increases memory swapping, which degrades performance.
Also note that when your server is running other services that compete for physical 
RAM, such as AFP, the web performance cache may be less effective or may impact the 
performance of those other services.
 LL2350.book  Page 26  Friday, August 22, 2003  2:32 PM
Chapter 3    Managing Websites
27
To enable or disable the performance cache for your web server:
1 In Server Admin, click Web in the list for the server you want.
2 Click Settings in the button bar.
3 In the Sites pane, double-click the site in the list.
4 In the Options pane, click Performance Cache to change its state.
5 Click Save.
Web service restarts.
You can also improve server performance by disabling the access log.
Enabling Access and Error Logs for a Website
You can set up error and access logs for individual websites that you host on your 
server. However, enabling the logs can slow server performance.
To enable access and error logs for a website:
1 In Server Admin, click Web in the list for the server you want.
2 Click Settings in the button bar.
3 In the Sites pane, double-click the site in the list.
4 In the Logging pane, check Enable Access Log to enable this log.
5 Set how often you want the logs to be archived by clicking the checkbox and typing a 
number of days.
6 Type the path to the folder where you want to store the logs.
You can also click the Browse button to locate the folder you want to use.
If you are administering a remote server, file service must be running on the remote 
server to use the Browse button.
7 Choose a log format from the Format pop-up menu.
8 Edit the format string, if necessary.
9 Enter archive, location, and level choices for the error log as desired.
10 Click Save.
Web service restarts.
 LL2350.book  Page 27  Friday, August 22, 2003  2:32 PM
28
Chapter 3    Managing Websites
Understanding the New Web Service access_log Format
In version 10.3 of Mac OS X Server, the web performance cache does not prevent a 
remote client's IP address from being logged in the access_log. The web performance 
cache process now adds an HTTP header named “PC-Remote-Addr” that contains the 
client's IP address before passing a request to the Apache web server.
With the performance cache disabled, the standard log format string on the 
CustomLog directive in httpd.conf remains the same as in earlier versions: 
%h  %l %u %t "%r" %>s %b
When the performance cache is enabled (default) the “%h” item will extract the local 
machine's IP address. To extract the remote client's IP address, the log format string 
needs to be modified as follows:
%{PC-Remote-Addr}i  %l %u %t "%r" %>s %b
When you use the Server Admin application to enable and disable web performance 
cache for each site (virtual host), the CustomLog directive in httpd.conf for each site is 
adjusted automatically  so your access logs should always contain the correct remote 
client address.
Setting Up Directory Listing for a Website
When users specify the URL for a directory, you can display either a default webpage 
(such as index.html) or a list of the directory contents. You can display a folder list. To 
set up directory listing, you need to enable indexing for the website.
Note:  Folder listings are displayed only if no default document is found.
To enable indexing for a website:
1 In Server Admin, click Web in the list for the server you want.
2 Click Settings in the button bar.
3 In the Sites pane, double-click the site in the list.
4 In the Options pane, select Folder Listing.
5 Click Save.
Web service restarts.
 LL2350.book  Page 28  Friday, August 22, 2003  2:32 PM
Chapter 3    Managing Websites
29
Creating Indexes for Searching Website Content
Version 10.3 of Mac OS X Server continues to support the mod_sherlock_apple Apache 
module, which allows web browsers to search the content of your website. As in 
previous versions of the server, you must produce a content index before content 
searching is possible. 
Content indexes in earlier server versions had to be created in Sherlock. Now, you can 
create content indexes using the Finder. Select the folder containing the files you want 
to index, then choose File > GetInfo. Click Content Index, then click Index Now. (You 
can remove an index by using the Delete Index button in the Info window.)
In addition, there are new constraints that restrict the creation of index files. To create 
an index, you must be the owner of the folder and must own any files in that folder 
that are to be indexed. In the case of content in the /Library/WebServer/Documents 
folder, the folder and all the files within it are owned by root. Even though the folder 
and files are writable by members of the admin group, you must still be logged in as 
root to create a content index.
Creating an index remotely or on a headless server is done using a command-line tool 
named indexfolder. See the man pages for usage details. The operation of indexfolder 
is affected by the login window. If nobody is logged in at the login window, the tool 
must be run as root. If an administrator is logged in at the login window, the tool must 
be run as that administrator. Otherwise, the tool will fail with messages similar to these:
kCGErrorIllegalArgument : initCGDisplayState: cannot map display interlocks.
kCGErrorIllegalArgument : CGSNewConnection cannot get connection port.
Whether done from the Finder or the indexfolder tool, content indexing creates a 
folder named “.FBCIndex” either in the folder to be indexed or in one of its parent 
folders.
Connecting to Your Website
Once you configure your website, it’s a good idea to view the site with a web browser 
to verify that everything appears as intended.
To make sure a website is working properly:
1 Open a web browser and type the web address of your server.
You can use either the IP address or the DNS name of the server.
2 Type the port number, if you are not using the default port.
3 If you’ve restricted access to specific users, enter a valid user name and password.
 LL2350.book  Page 29  Friday, August 22, 2003  2:32 PM
30
Chapter 3    Managing Websites
Enabling WebDAV on Websites
Web-based Distributed Authoring and Versioning (WebDAV) allows you or your users 
to make changes to websites while the sites are running. If you enable WebDAV, you 
also need to assign access privileges for the sites and for the web folders.
To enable WebDAV for a site:
1 In Server Admin, click Web in the list for the server you want.
2 Click Settings in the button bar.
3 In the Sites pane, double-click the site in the list.
4 In the Options pane, select WebDAV and click Save.
5 Click Realms. Double-click a realm to edit it, or click the Add button to create a new 
realm.
The realm is the part of the website users can access.
6 Type the name you want users to see when they log in.
The default realm name is “untitled.”
7 If you want digest authentication for the realm, choose Digest from the Authorization 
pop-up menu.
Basic authorization is on by default.
8 Type the path to the location in the website to which you want to limit access, and 
click OK.
You can also click the Browse button to locate the folder you want to use.
If you are administering a remote server, file service must be running on the remote 
server to use the Browse button.
9 Click Save.
Web service restarts.
Note:  If you have turned off the WebDAV modules in the Modules pane of Server 
Admin, you must turn it on again before WebDAV takes effect for a site. This is true 
even if the WebDAV option is checked in the Options pane for the site. See “Apache 
Modules” on page 61 for more about enabling modules.
 LL2350.book  Page 30  Friday, August 22, 2003  2:32 PM
Chapter 3    Managing Websites
31
Setting Access for WebDAV-Enabled Sites
You create realms to provide security for websites. Realms are locations within a site 
that users can view or make changes to when WebDAV is enabled. When you define a 
realm, you can assign browsing and authoring privileges to users of the realm.
To add users and groups to a realm:
1 In Server Admin, click Web in the list for the server you want.
2 Click Settings in the button bar.
3 In the Sites pane, double-click the site in the list.
4 In the Realms pane, select the realm you want to edit.
If no realm names are listed, create one using the instructions in “Enabling WebDAV on 
Websites” on page 30.
5 To set access for all users, do one of the following:
• If you want all users to browse or author, or both, select Can Browse or Can Author 
for Everyone.
When you select privileges for Everyone, you have these options:
Browse allows everyone who can access this realm to see it. You can add additional 
users and groups to the User or Group list to enable authoring for them.
Browse and Author together allow everyone who has access to this realm to see and 
make changes to it.
• If you want to assign access to specific users (and not to all users), do not select Can 
Browse or Can Author for Everyone.
6 To specify access for individual users and groups, click Users & Groups to open a drawer 
listing users and groups.
7 Click Users or Groups in the drawer’s button bar to show the list you want.
8 Drag user names to the Users field or group names to the Groups field.
Note:  You can also use the add (+) button to open a sheet in which you type a user or 
group name and select access options.
9 Select Can Browse and Can Author for each user and group as desired.
10 Click Save.
Web service restarts.
Use the Realms pane to delete a user or group by selecting the name and clicking the 
Delete (–) button.
 LL2350.book  Page 31  Friday, August 22, 2003  2:32 PM
32
Chapter 3    Managing Websites
WebDAV and Web Content File and Folder Permissions
Mac OS X Server imposes the following constraints on web content files and folders 
(which are located by default in /Library/WebServer/Documents):
• For security reasons, web content files and folders should not be writable by world.
• Web content files and folders are owned by user root and group admin by default, so 
they are modifiable by any administrator but not by user or group www.
• To use WebDAV, web content files must be readable and writable by user or group 
www, and folders must be readable, writable, and executable by user or group www.
• If you need to modify web content files and folders while you are logged in as an 
administrator, those files or folders need to be modifiable by the administrator.
If you want to use WebDAV, you need to enable it in Server Admin and manually 
change the web content files’ or folders’ ownership to user and group www. If you are 
using WebDAV and you want to make changes to web content files or folders while 
logged in as an administrator, you need to change the web content file and folder 
permissions to admin, make your edits, and then restore the file and folder permissions 
to www.
To add sites to your web server while using WebDAV:
1 Change the group privileges of the folder containing your websites to admin (default 
folder location is:  /Library/Webserver/Documents).
2 Add your new site folder.
3 Change the group privileges of the folder containing your websites back to www.
Enabling Integrated WebDAV Digest Authentication
You can enable digest authentication for WebDAV realms in the Realms pane of Server 
Admin. See “Setting Access for WebDAV-Enabled Sites” on page 31 for more 
information.
WebDAV and Web Performance Cache Conflict
If you enable both WebDAV and the web performance cache on one or more virtual 
hosts (sites), WebDAV clients may encounter problems if they try to upload multiple 
files in the Finder—the upload may fail to complete.
To avoid this problem, disable the web performance cache for virtual hosts with 
WebDAV enabled. See “Improving Performance of Static Websites (Performance Cache)” 
on page 26 for more information about the performance cache.
 LL2350.book  Page 32  Friday, August 22, 2003  2:32 PM
Chapter 3    Managing Websites
33
Enabling a Common Gateway Interface (CGI) Script
Common Gateway Interface (CGI) scripts (or programs) send information back and 
forth between your website and applications that provide different services for the site.
• If a CGI is to be used by only one site, install the CGI in the Documents folder for the 
site. The CGI name must end with the suffix “.cgi.”
• If a CGI is to be used by all sites on the server, install it in the /Library/WebServer/CGI-
Executables folder. In this case, clients must include /cgi-bin/ in the URL for the site. 
For example, http://www.example.com/cgi-bin/test-cgi.
• Make sure the file permissions on the CGI allow it to be executed by the user named 
“www.” Since the CGI typically isn’t owned by www, the file should be executable by 
everyone.
To enable a CGI for a website:
1 In Server Admin, click Web in the list for the server you want.
2 Click Settings in the button bar.
3 In the Sites pane, double-click the site in the list.
4 In the Options pane, select CGI Execution.
5 Click Save.
Web service restarts.
Enabling Server Side Includes (SSI)
Enabling Server Side Includes (SSI) allows a chunk of HTML code or other information 
to be shared by different webpages on your site. SSIs can also function like CGIs and 
execute commands or scripts on the server.
Note:  Enabling SSI requires making changes to UNIX configuration files in the Terminal 
application. To enable SSI, you must be comfortable with typing UNIX commands and 
using a UNIX text editor.
To enable SSI:
1 In the Terminal application, use the sudo command with a text editor to edit as the 
super user (root):
2 Add the following line to each virtual host for which you want SSI enabled:
Options Includes
Each site is in a separate file in /etc/httpd/sites/.
To enable SSI for all virtual hosts, add the line outside any virtual host block.
3 In Server Admin for the server you want, click Settings in the button bar.
4 In the Sites pane, double-click one of the virtual host sites.
 LL2350.book  Page 33  Friday, August 22, 2003  2:32 PM
34
Chapter 3    Managing Websites
5 In the General pane, add index.shtml to the set of default index files for that site.
Repeat this procedure for each virtual host site that uses SSI. (See “Setting the Default 
Page for a Website” on page 25 for more information.)
By default, the /etc/httpd/httpd.conf file maintained by Server Admin contains the 
following two lines:
AddHandler server-parsed shtml
AddType text/html shtml
You can add MIME types in Server Admin from the MIME Types pane.
The changes take effect when you restart web service.
Viewing Website Settings
You can use the Sites pane of Server Admin to see a list of your websites. The Sites 
pane shows:
• Whether a site is enabled
• The site’s DNS name and IP address
• The port being used for the site
Double-clicking a site in the Sites pane opens the site details window, where you can 
view or change the settings for the site.
Setting Server Responses to MIME Types and 
Content Handlers
Multipurpose Internet Mail Extension (MIME) is an Internet standard for specifying what 
happens when a web browser requests a file with certain characteristics. Content 
handlers are similar and also use suffixes to determine how a file is handled. A file’s 
suffix describes the type of data in the file. Each suffix and its associated response 
together is called a MIME type mapping or a content handler mapping. See 
“Understanding Multipurpose Internet Mail Extension” on page 11 for more 
information.
 LL2350.book  Page 34  Friday, August 22, 2003  2:32 PM
Chapter 3    Managing Websites
35
To set the server response for a MIME type or content handler:
1 In Server Admin, click Web in the list for the server you want.
2 Click Settings in the button bar.
3 In the MIME Types or content Handlers pane, click the Add button, or select the item in 
the list you want to edit and click the Edit button.
4 If necessary, type a name for a new MIME type or content handler, then type the file 
suffix associated with this mapping in the Suffixes field.
If you use the suffix cgi, make sure you’ve enabled CGI execution for the website.
5 Click Save.
Web service restarts.
Enabling SSL
Before you can enable Secure Sockets Layer (SSL) protection for a website, you have to 
obtain the proper certificates. For more information, see “Secure Sockets Layer (SSL)” 
on page 45. When you have obtained a certificate, you can set up SSL for a site.
To set up SSL for a website:
1 In Server Admin, click Web in the list for the server you want.
2 Click Settings in the button bar.