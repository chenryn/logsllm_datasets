e
c
n
e
g
r
e
v
n
o
C
h
t
i
a
P
g
n
d
r
a
w
r
o
F
Forwarding Path Convergence Time
Routing Convergence Time
30
25
20
15
10
5
0
2
3
4
5
6
7
RIP
DBF
BGP’
BGP
10 11 12 13 14 15 16 17
9
8
Node Degree
i
)
s
d
n
o
c
e
s
(
e
m
T
e
c
n
e
g
r
e
v
n
o
C
RIP
DBF
BGP’
BGP
 100
 80
 60
 40
 20
 0
 2
 3  4
 5  6
 7  8
 9  10  11  12  13  14  15  16  17
Node Degree
(a) Forwarding Path Convergence Time
(b) Network Routing Convergence Time
Figure 6. Forwarding Path Convergence Time and Routing Convergence Time
Delay vs Time (degree=4)
Delay vs Time (degree=5)
Delay vs Time (degree=6)
)
d
n
o
c
e
s
(
y
a
e
D
l
0.018
0.017
0.016
0.015
0.014
0.013
0.012
0.011
0.01
0.009
RIP
DBF
BGP’
BGP
0
20
40
60
Time(seconds)
80
100
)
d
n
o
c
e
s
(
y
a
e
D
l
0.018
0.017
0.016
0.015
0.014
0.013
0.012
0.011
0.01
0.009
RIP
DBF
BGP’
BGP
0
20
40
60
Time(seconds)
80
100
)
d
n
o
c
e
s
(
y
a
e
D
l
0.018
0.017
0.016
0.015
0.014
0.013
0.012
0.011
0.01
0.009
RIP
DBF
BGP’
BGP
0
20
40
60
Time(seconds)
80
100
Figure 7. Instantaneous Packet Delay
general, differences in routing protocol designs can lead to
signiﬁcant differences in packet delivery performance. Our
observations show that
• When a router keeps information about alternate
paths, it can instantly switch packet forwarding to an
alternate path P when the best path to a destination
fails. Even in cases when P is not the ﬁnal path that
will be used when the routing protocol has converged,
packets forwarded to P have a good chance of reach-
ing their destinations in a well connected network. In-
creases in network connectivity increase the probabil-
ity of packet delivery.
• Once a failure is detected, the routing protocol should
propagate the failure information as fast as possible.
Not only can fast failure report minimize the conver-
gence time, it can also improve the delivery ratio of
those en-route packets at the time of failure.
• Contrary to common intuition, a path vector routing
protocol does not necessarily eliminating loops. Our
simulation demonstrated that transient routing loops
can occur in a network using BGP as the routing pro-
tocol. Furthermore, the looping duration is lengthened
by BGP’s MRAI timer.
We also observed that, although using alternative paths
without validity veriﬁcation can potentially lead to routing
loops, increases in network connectivity can quickly reduce
the probability and duration of looping. In a well connected
network, how to handle the counting-into-inﬁnity issue as-
sociated with distance vector routing protocols deserves a
re-examination. For example, in order to reduce the risk of
counting-into-inﬁnity, RIP design keeps no alternate path
information which results in packet losses once the best
path to a destination fails, and new reachability can take
long to establish. Similarly, other existing loop prevention
approaches such as those proposed in [6] eliminate routing
loops by paying a high cost of delaying routing updates and
stopping packet delivery during convergence. Our study
shows that, in a network with redundant connectivity, af-
ter a path failure a distance vector routing protocol sim-
ply counts to the next-best path instead of counting-into-
inﬁnity. The higher the redundancy in connectivity, the
sooner the counting-into-inﬁnity is likely to stop.
This work represents a ﬁrst step towards understanding
packet delivery during routing convergence. Our investi-
gation started with the simplest case of packet delivery be-
tween a single source and a single destination connected
by a regular topology, and measured the routing and packet
delivery dynamics after a single isolated failure. As a next
Proceedings of the 2003 International Conference on Dependable Systems and Networks (DSN’03) 
0-7695-1959-8/03 $17.00 (c) 2003 IEEE
Authorized licensed use limited to: Tsinghua University. Downloaded on March 19,2021 at 04:29:48 UTC from IEEE Xplore.  Restrictions apply. 
[13] C. Labovitz, R. Wattenhofer, S. Venkatachary,
and
A. Ahuja. The Impact of Internet Policy and Topology on
Delayed Routing Convergence. In Proceedings of the IEEE
INFOCOM, April 2001.
[14] G. Malkin. Routing Information Protocol Version 2. RFC
2453, SRI Network Information Center, November 1998.
[15] Z. Mao, R. Govindan, G. Varghese, and R. Katz. Route
Flap Damping Exacerbates Internet Routing Convergence.
In Proceedings of ACM Sigcomm, August 2002.
[16] P. M. Merlin and A. Segall. A failsafe distributed rout-
IEEE Transactions on Communications,
ing protocol.
27:1280–7, 1979.
[17] J. Moy. OSPF Version 2. RFC 2328, SRI Network Infor-
mation Center, September 1998.
[18] J. Moy, P. Padma, and A. Lindem.
Hitless OSPF
Restart. http://www.ietf.org/internet-drafts/draft-ietf-ospf-
hitless-restart-04.txt, October 2002.
[19] V. Paxson. End-to-End Routing Behavior in the Inthernet.
IEEE/ACM Transactions on Communications, 5(5):610–
615, 1997.
[20] D. Pei, L. Wang, D. Massey, S. F. Wu, and L. Zhang.
A study of packet delivery performance during routing
convergence. Technical Report UCLA-CSD-TR-030004,
UCLA CSD.
[21] D. Pei, X. Zhao, L. Wang, D. Massey, A. Mankin, F. S. Wu,
and L. Zhang. Improving BGP Convergence Through As-
sertions Approach. In Proceedings of the IEEE INFOCOM,
June 2002.
[22] Y. Rekhter and T. Li. Border Gateway Protocol 4. RFC
1771, SRI Network Information Center, July 1995.
[23] S. R. Sangli, Y. Rekhter, R. Fernando,
J. Scud-
Graceful Restart Mechanism
der,
for BGP. http://www.ietf.org/internet-drafts/draft-ietf-idr-
restart-05.txt, October 2002.
and E. Chen.
[24] A. Shaikh, D. Dube, and A. Varma. Avoiding Istability
In Proceedings of the IEEE
during Shutdown of OSPF.
INFOCOM, June 2002.
[25] A. U. Shankar, C. Alaettinoglu, K. Dussa-Zieger, and
I. Matta. Transient and steady-state performance of rout-
ing protocols: Distance-vector versus link-state. Journal of
Internetworking: Research and Experience, 6:59–87, 1995.
[26] A. Terzis, K. Nikoloudakis, L. Wang, and L. Zhang. IRL-
Sim: A general purpose packet level network simulator. In
Proceedings of the 33rd ACM-SIAM Symposium on Dis-
crete Algorithms, April 2000.
[27] Z. Wang and J. Crowcroft. Shortest path ﬁrst with emer-
gency exits. In Proceedings of ACM Sigcomm, pages 166–
176, 1990.
[28] W. Zaumen and J. J. G.-L. Aceves. Dynamics of Distributed
Shortest-Path Routing Algorithms. In Proceedings of ACM
Sigcomm, August 1991.
step to gain further insight, we plan to extend the simula-
tion experiments to larger network sizes, multiple pairs of
data sources and destinations, as well as multiple failures
which can potentially overlay with each other in time.
Two other directions for future work include extending
the routing protocol family being examined from distance-
vector and path-vector based routing protocols (RIP, DBF,
and BGP) to include link-state routing protocols, and com-
paring the results with those of distance-vector based pro-
tocols; and extending the packet delivery performance
measure from IP layer to include end-to-end TCP perfor-
mance during routing convergence period.
7 Acknowledgments
We would like to thank Ke Zhang, Xiaoliang Zhao and
Mohit Lad for their comments on an earlier version of this
paper and thank the DSN 2003 anonymous reviewers for
their valuable and insightful comments which helped im-
prove the quality of this paper. We would also like to thank
Peter Follett, Charlie Fritzius and Stephen Sakamoto for
providing us additional computing resources for the simu-
lation experiments.
References
[1] C. Alaettino and A. Zinin.
Igp fast reroute. Talk slides,
http://www.packetdesign.com/publications, 2002.
[2] P. Baran. On Distributed Communication Networks. IEEE
Transactions on Communications, 12(1):1–9, 1964.
[3] D. Bertsekas and R. Gallager. Data Network. Prentice-Hall,
1992.
[4] R. Bush, T. Grifﬁn, and Z. M. Mao. Route Flap Damping:
Harmful? http://www.ripe.net/ripe/meetings/archive/ripe-
43/presentations/ripe43-routing-ﬂap.pdf, 2002.
[5] C. Cheng, R. Riley, S. Kumar, and J. Garcia-Lunes-Aceves.
A Loop-Free Extended Bellman-Ford Routing Protocol
Without Bouncing Effect.
In Proceedings of ACM Sig-
comm, pages 224–236, August 1989.
[6] J. J. Garcia-Luna-Aceves. A uniﬁed approach to loop-free
routing algorithm using distance vectors or link states. In
Proceedings of ACM Sigcomm, September 1989.
[7] T. Grifﬁn and B. Premore. An Experimental Analysis of
BGP Convergence Time. In Proceedings of ICNP, Novem-
ber 2001.
[8] H. Hengartner, S. Moon, R. Mortier, and C. Diot. Dection
and Analysis of Routing Loops in Packet Traces. In Pro-
ceedings of ACM IMW 2002, October 2002.
[9] G. Huston.
The
State
of BGP Routing.
http://www.ietf.org/proceedings/01mar/slides/plenary-
2/index.html.
[10] G. Iannaccone, C. Chuah, R. Mortier, S. Bhattacharyya, and
C. Diot. Analysis of Link Failures in an IP Backbone. In
Proceedings of ACM IMW 2002, October 2002.
[11] C. Labovitz, A. Ahuja, A. Bose, and F. Jahanian. Delayed
Internet Routing Convergence. In Proceedings of ACM Sig-
comm, August 2000.
[12] C. Labovitz, A. Ahuja, and F. Jahanian. Experimental Study
of Internet Stability and Wide-Area Network Failures. In
Proceedings of FTCS99, June 1999.
Proceedings of the 2003 International Conference on Dependable Systems and Networks (DSN’03) 
0-7695-1959-8/03 $17.00 (c) 2003 IEEE
Authorized licensed use limited to: Tsinghua University. Downloaded on March 19,2021 at 04:29:48 UTC from IEEE Xplore.  Restrictions apply.