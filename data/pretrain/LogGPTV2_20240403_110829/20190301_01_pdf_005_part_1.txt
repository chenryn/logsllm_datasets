Database Compatibility for Oracle®
Developers Reference Guide
EDB Postgres™ Advanced Server 11
December 19, 2018
Database Compatibility for Oracle® Developers
Reference Guide
by EnterpriseDB® Corporation
Copyright © 2007 - 2018 EnterpriseDB Corporation. All rights reserved.
EnterpriseDB Corporation, 34 Crosby Drive, Suite 201, Bedford, MA 01730, USA
T +1 781 357 3390 F +1 978 467 1307 E PI:EMAIL www.enterprisedb.com
Database Compatibility for Oracle® Developers
Reference Guide
Table of Contents
1 Introduction ............................................................................................................................................ 8
1.1 What‟s New .................................................................................................................................... 9
1.2 Typographical Conventions Used in this Guide ............................................................................. 9
2 The SQL Language ................................................................................................................................10
2.1 SQL Syntax ...................................................................................................................................10
2.1.1 Lexical Structure ....................................................................................................................11
2.1.2 Identifiers and Key Words .....................................................................................................12
2.1.3 Constants ...............................................................................................................................14
2.1.3.1 String Constants ................................................................................................................14
2.1.3.2 Numeric Constants ............................................................................................................14
2.1.3.3 Constants of Other Types ..................................................................................................15
2.1.4 Comments ..............................................................................................................................16
2.2 Data Types .....................................................................................................................................17
2.2.1 Numeric Types ......................................................................................................................18
2.2.1.1 Integer Types ....................................................................................................................18
2.2.1.2 Arbitrary Precision Numbers ............................................................................................18
2.2.1.3 Floating-Point Types .........................................................................................................19
2.2.2 Character Types .....................................................................................................................20
2.2.3 Binary Data ............................................................................................................................22
2.2.4 Date/Time Types ...................................................................................................................23
2.2.4.1 INTERVAL Types ............................................................................................................24
2.2.4.2 Date/Time Input ................................................................................................................25
2.2.4.2.1 Dates ........................................................................................................................25
2.2.4.2.2 Times .......................................................................................................................26
2.2.4.2.3 Time Stamps ............................................................................................................26
2.2.4.3 Date/Time Output .............................................................................................................27
2.2.4.4 Internals ............................................................................................................................27
2.2.5 Boolean Type .........................................................................................................................28
2.2.6 XML Type .............................................................................................................................29
2.3 SQL Commands ............................................................................................................................30
2.3.1 ALTER INDEX .....................................................................................................................31
2.3.2 ALTER PROCEDURE ..........................................................................................................33
2.3.3 ALTER PROFILE .................................................................................................................34
2.3.4 ALTER QUEUE ....................................................................................................................38
2.3.5 ALTER QUEUE TABLE ......................................................................................................42
2.3.6 ALTER ROLE… IDENTIFIED BY .....................................................................................43
2.3.7 ALTER ROLE - Managing Database Link and DBMS_RLS Privileges ..............................45
2.3.8 ALTER SEQUENCE ............................................................................................................48
2.3.9 ALTER SESSION .................................................................................................................50
2.3.10 ALTER TABLE ....................................................................................................................52
2.3.11 ALTER TABLESPACE ........................................................................................................55
2.3.12 ALTER USER… IDENTIFIED BY ......................................................................................56
2.3.13 ALTER USER|ROLE… PROFILE MANAGEMENT CLAUSES .......................................58
2.3.14 CALL .....................................................................................................................................61
2.3.15 COMMENT ...........................................................................................................................62
2.3.16 COMMIT ...............................................................................................................................64
2.3.17 CREATE DATABASE .........................................................................................................65
2.3.18 CREATE [PUBLIC] DATABASE LINK .............................................................................66
2.3.19 CREATE DIRECTORY ........................................................................................................78
2.3.20 CREATE FUNCTION...........................................................................................................80
2.3.21 CREATE INDEX ..................................................................................................................87
2.3.22 CREATE MATERIALIZED VIEW ......................................................................................89
Copyright © 2007 - 2018 EnterpriseDB Corporation. All rights reserved. 3
Database Compatibility for Oracle® Developers
Reference Guide
2.3.23 CREATE PACKAGE ............................................................................................................92
2.3.24 CREATE PACKAGE BODY ................................................................................................95
2.3.25 CREATE PROCEDURE .....................................................................................................100
2.3.26 CREATE PROFILE ............................................................................................................107
2.3.27 CREATE QUEUE ...............................................................................................................112
2.3.28 CREATE QUEUE TABLE .................................................................................................114
2.3.29 CREATE ROLE ..................................................................................................................117
2.3.30 CREATE SCHEMA ............................................................................................................119
2.3.31 CREATE SEQUENCE ........................................................................................................121
2.3.32 CREATE SYNONYM.........................................................................................................124
2.3.33 CREATE TABLE ................................................................................................................126
2.3.34 CREATE TABLE AS ..........................................................................................................134
2.3.35 CREATE TRIGGER ...........................................................................................................136
2.3.36 CREATE TYPE ...................................................................................................................140
2.3.37 CREATE TYPE BODY ......................................................................................................148
2.3.38 CREATE USER ..................................................................................................................152
2.3.39 CREATE USER|ROLE… PROFILE MANAGEMENT CLAUSES ..................................153
2.3.40 CREATE VIEW ..................................................................................................................156
2.3.41 DELETE ..............................................................................................................................158
2.3.42 DROP DATABASE LINK ..................................................................................................161
2.3.43 DROP DIRECTORY ...........................................................................................................162
2.3.44 DROP FUNCTION .............................................................................................................163
2.3.45 DROP INDEX .....................................................................................................................165
2.3.46 DROP PACKAGE ...............................................................................................................166
2.3.47 DROP PROCEDURE ..........................................................................................................167
2.3.48 DROP PROFILE .................................................................................................................169
2.3.49 DROP QUEUE ....................................................................................................................170
2.3.50 DROP QUEUE TABLE ......................................................................................................171
2.3.51 DROP SYNONYM .............................................................................................................173
2.3.52 DROP ROLE .......................................................................................................................174
2.3.53 DROP SEQUENCE .............................................................................................................176
2.3.54 DROP TABLE .....................................................................................................................177
2.3.55 DROP TABLESPACE ........................................................................................................179
2.3.56 DROP TRIGGER ................................................................................................................180
2.3.57 DROP TYPE........................................................................................................................181
2.3.58 DROP USER .......................................................................................................................182
2.3.59 DROP VIEW .......................................................................................................................184
2.3.60 EXEC ...................................................................................................................................185
2.3.61 GRANT ...............................................................................................................................186
2.3.62 GRANT on Database Objects ..............................................................................................188
2.3.63 GRANT on Roles ................................................................................................................190
2.3.64 GRANT on System Privileges .............................................................................................193
2.3.65 INSERT ...............................................................................................................................195
2.3.66 LOCK ..................................................................................................................................199
2.3.67 REVOKE .............................................................................................................................202
2.3.68 ROLLBACK ........................................................................................................................206
2.3.69 ROLLBACK TO SAVEPOINT ..........................................................................................207
2.3.70 SAVEPOINT .......................................................................................................................208
2.3.71 SELECT ..............................................................................................................................210
2.3.71.1 FROM Clause ............................................................................................................211
2.3.71.2 WHERE Clause ..........................................................................................................214
2.3.71.3 GROUP BY Clause ....................................................................................................214
2.3.71.4 HAVING Clause ........................................................................................................215
2.3.71.5 SELECT List ..............................................................................................................216
2.3.71.6 UNION Clause ...........................................................................................................217
2.3.71.7 INTERSECT Clause ..................................................................................................217
Copyright © 2007 - 2018 EnterpriseDB Corporation. All rights reserved. 4
Database Compatibility for Oracle® Developers
Reference Guide
2.3.71.8 MINUS Clause ...........................................................................................................218
2.3.71.9 CONNECT BY Clause ..............................................................................................218
2.3.71.10 ORDER BY Clause ....................................................................................................219
2.3.71.11 DISTINCT Clause ......................................................................................................220
2.3.71.12 FOR UPDATE Clause ...............................................................................................221
2.3.72 SET CONSTRAINTS ..........................................................................................................222
2.3.73 SET ROLE ...........................................................................................................................224
2.3.74 SET TRANSACTION .........................................................................................................225
2.3.75 TRUNCATE ........................................................................................................................226
2.3.76 UPDATE .............................................................................................................................227
2.4 Functions and Operators ..............................................................................................................230
2.4.1 Logical Operators ................................................................................................................230
2.4.2 Comparison Operators .........................................................................................................231
2.4.3 Mathematical Functions and Operators ...............................................................................233
2.4.4 String Functions and Operators ...........................................................................................236
2.4.4.1 Truncation of String Text Resulting from Concatenation with NULL ...........................239
2.4.5 Pattern Matching String Functions ......................................................................................242
2.4.5.1 REGEXP_COUNT .........................................................................................................242
2.4.5.2 REGEXP_INSTR ...........................................................................................................243
2.4.5.3 REGEXP_SUBSTR ........................................................................................................245
2.4.6 Pattern Matching Using the LIKE Operator ........................................................................248
2.4.7 Data Type Formatting Functions .........................................................................................249
2.4.7.1 IMMUTABLE TO_CHAR(TIMESTAMP, format) Function ........................................253
2.4.8 Date/Time Functions and Operators ....................................................................................255
2.4.8.1 ADD_MONTHS .............................................................................................................256
2.4.8.2 EXTRACT ......................................................................................................................257
2.4.8.3 MONTHS_BETWEEN...................................................................................................258
2.4.8.4 NEXT_DAY ...................................................................................................................259
2.4.8.5 NEW_TIME....................................................................................................................259
2.4.8.6 ROUND ..........................................................................................................................260
2.4.8.7 TRUNC ...........................................................................................................................265
2.4.8.8 CURRENT DATE/TIME ...............................................................................................268
2.4.8.9 NUMTODSINTERVAL .................................................................................................269
2.4.8.10 NUMTOYMINTERVAL ...........................................................................................269
2.4.9 Sequence Manipulation Functions .......................................................................................271
2.4.10 Conditional Expressions ......................................................................................................272
2.4.10.1 CASE .........................................................................................................................272
2.4.10.2 COALESCE ...............................................................................................................273
2.4.10.3 NULLIF .....................................................................................................................274
2.4.10.4 NVL ...........................................................................................................................274
2.4.10.5 NVL2 .........................................................................................................................274
2.4.10.6 GREATEST and LEAST ...........................................................................................275
2.4.11 Aggregate Functions ............................................................................................................276
2.4.12 Subquery Expressions ..........................................................................................................278
2.4.12.1 EXISTS ......................................................................................................................278
2.4.12.2 IN ...............................................................................................................................278
2.4.12.3 NOT IN ......................................................................................................................279
2.4.12.4 ANY/SOME ...............................................................................................................279
2.4.12.5 ALL ............................................................................................................................280
3 Oracle Catalog Views ..........................................................................................................................281
3.1 ALL_ALL_TABLES ...................................................................................................................281
3.2 ALL_CONS_COLUMNS ...........................................................................................................281
3.3 ALL_CONSTRAINTS ................................................................................................................282
3.4 ALL_DB_LINKS ........................................................................................................................282
3.5 ALL_DIRECTORIES .................................................................................................................283
3.6 ALL_IND_COLUMNS ...............................................................................................................283
Copyright © 2007 - 2018 EnterpriseDB Corporation. All rights reserved. 5
Database Compatibility for Oracle® Developers
Reference Guide
3.7 ALL_INDEXES ..........................................................................................................................283
3.8 ALL_JOBS ..................................................................................................................................284
3.9 ALL_OBJECTS ..........................................................................................................................285
3.10 ALL_PART_KEY_COLUMNS ..................................................................................................285
3.11 ALL_PART_TABLES ................................................................................................................286
3.12 ALL_POLICIES ..........................................................................................................................287
3.13 ALL_QUEUES ............................................................................................................................287
3.14 ALL_QUEUE_TABLES .............................................................................................................288
3.15 ALL_SEQUENCES ....................................................................................................................289
3.16 ALL_SOURCE ............................................................................................................................289
3.17 ALL_SUBPART_KEY_COLUMNS ..........................................................................................290
3.18 ALL_SYNONYMS .....................................................................................................................290
3.19 ALL_TAB_COLUMNS ..............................................................................................................291
3.20 ALL_TAB_PARTITIONS ..........................................................................................................292
3.21 ALL_TAB_SUBPARTITIONS ..................................................................................................293
3.22 ALL_TABLES ............................................................................................................................294
3.23 ALL_TRIGGERS ........................................................................................................................294
3.24 ALL_TYPES ...............................................................................................................................295
3.25 ALL_USERS ...............................................................................................................................295
3.26 ALL_VIEW_COLUMNS............................................................................................................296
3.27 ALL_VIEWS ...............................................................................................................................296
3.28 DBA_ALL_TABLES ..................................................................................................................297
3.29 DBA_CONS_COLUMNS ...........................................................................................................297
3.30 DBA_CONSTRAINTS ...............................................................................................................298
3.31 DBA_DB_LINKS .......................................................................................................................298
3.32 DBA_DIRECTORIES .................................................................................................................299
3.33 DBA_IND_COLUMNS ..............................................................................................................299
3.34 DBA_INDEXES ..........................................................................................................................299
3.35 DBA_JOBS .................................................................................................................................300
3.36 DBA_OBJECTS ..........................................................................................................................301
3.37 DBA_PART_KEY_COLUMNS .................................................................................................301
3.38 DBA_PART_TABLES ...............................................................................................................302
3.39 DBA_POLICIES .........................................................................................................................303
3.40 DBA_PROFILES ........................................................................................................................304
3.41 DBA_QUEUES ...........................................................................................................................304
3.42 DBA_QUEUE_TABLES ............................................................................................................305
3.43 DBA_ROLE_PRIVS ...................................................................................................................305
3.44 DBA_ROLES ..............................................................................................................................306
3.45 DBA_SEQUENCES ....................................................................................................................306
3.46 DBA_SOURCE ...........................................................................................................................306
3.47 DBA_SUBPART_KEY_COLUMNS .........................................................................................307
3.48 DBA_SYNONYMS ....................................................................................................................307
3.49 DBA_TAB_COLUMNS .............................................................................................................308
3.50 DBA_TAB_PARTITIONS..........................................................................................................309
3.51 DBA_TAB_SUBPARTITIONS ..................................................................................................310
3.52 DBA_TABLES ............................................................................................................................311
3.53 DBA_TRIGGERS .......................................................................................................................311
3.54 DBA_TYPES ..............................................................................................................................312
3.55 DBA_USERS ..............................................................................................................................313
3.56 DBA_VIEW_COLUMNS ...........................................................................................................314
3.57 DBA_VIEWS ..............................................................................................................................314
3.58 USER_ALL_TABLES ................................................................................................................315
3.59 USER_CONS_COLUMNS .........................................................................................................315
3.60 USER_CONSTRAINTS .............................................................................................................316
3.61 USER_DB_LINKS ......................................................................................................................316
3.62 USER_IND_COLUMNS ............................................................................................................317
Copyright © 2007 - 2018 EnterpriseDB Corporation. All rights reserved. 6
Database Compatibility for Oracle® Developers
Reference Guide
3.63 USER_INDEXES ........................................................................................................................317
3.64 USER_JOBS ................................................................................................................................318
3.65 USER_OBJECTS ........................................................................................................................318
3.66 USER_PART_KEY_COLUMNS ...............................................................................................319
3.67 USER_PART_TABLES ..............................................................................................................320
3.68 USER_POLICIES .......................................................................................................................321
3.69 USER_QUEUES .........................................................................................................................322
3.70 USER_QUEUE_TABLES ..........................................................................................................322
3.71 USER_ROLE_PRIVS .................................................................................................................323
3.72 USER_SEQUENCES ..................................................................................................................323
3.73 USER_SOURCE .........................................................................................................................324
3.74 USER_SUBPART_KEY_COLUMNS .......................................................................................324
3.75 USER_SYNONYMS ...................................................................................................................324
3.76 USER_TAB_COLUMNS ...........................................................................................................325
3.77 USER_TAB_PARTITIONS ........................................................................................................326
3.78 USER_TAB_SUBPARTITIONS ................................................................................................327
3.79 USER_TABLES ..........................................................................................................................328
3.80 USER_TRIGGERS .....................................................................................................................328
3.81 USER_TYPES .............................................................................................................................329
3.82 USER_USERS ............................................................................................................................330
3.83 USER_VIEW_COLUMNS .........................................................................................................331
3.84 USER_VIEWS ............................................................................................................................331
3.85 V$VERSION ...............................................................................................................................331
3.86 PRODUCT_COMPONENT_VERSION .....................................................................................332
4 System Catalog Tables ........................................................................................................................333
4.1 dual ..............................................................................................................................................333
4.2 edb_dir .........................................................................................................................................333
4.3 edb_password_history .................................................................................................................333
4.4 edb_policy ...................................................................................................................................334
4.5 edb_profile ...................................................................................................................................334
4.6 edb_variable ................................................................................................................................335
4.7 pg_synonym ................................................................................................................................336
4.8 product_component_version........................................................................................................336
5 Acknowledgements .............................................................................................................................337
Copyright © 2007 - 2018 EnterpriseDB Corporation. All rights reserved. 7
Database Compatibility for Oracle® Developers
Reference Guide
1 Introduction
Database Compatibility for Oracle means that an application runs in an Oracle
environment as well as in the EDB Postgres Advanced Server (Advanced Server)
environment with minimal or no changes to the application code.
This guide provides reference material about the compatibility features offered by
Advanced Server:
 SQL Language syntax support
 Compatible Data Types
 SQL Commands
 Catalog Views
 System Catalog Tables
Developing an application that is compatible with Oracle databases in the Advanced
Server requires special attention to which features are used in the construction of the
application. For example, developing a compatible application means selecting:
 Data types to define the application‟s database tables that are compatible with
Oracle databases
 SQL statements that are compatible with Oracle SQL
 System and built-in functions for use in SQL statements and procedural logic that
are compatible with Oracle databases
 Stored Procedure Language (SPL) to create database server-side application logic
for stored procedures, functions, triggers, and packages
 System catalog views that are compatible with Oracle‟s data dictionary
For detailed information about Advanced Server's compatibility features and extended
functionality, please see the complete library of Advanced Server documentation,
available at:
https://www.enterprisedb.com/resources/product-documentation
Copyright © 2007 - 2018 EnterpriseDB Corporation. All rights reserved. 8
Database Compatibility for Oracle® Developers
Reference Guide
1.1 What’s New
The following database compatibility for Oracle features have been added to Advanced
Server 10 to create Advanced Server 11:
 Advanced Server now supports SPL standalone procedure overloading. Note that
this feature is not compatible with Oracle databases. For more information, see
Section 2.3.25.
 Advanced Server now supports the PRAGMA AUTONOMOUS_TRANSACTION
directive within any SPL block to provide the autonomous transaction capability.
For information, see the Database Compatibility for Oracle Developer’s Guide.
For affected SPL programs, see sections 2.3.20, 2.3.24, 2.3.25, 2.3.35, and 2.3.37.
1.2 Typographical Conventions Used in this Guide
Certain typographical conventions are used in this manual to clarify the meaning and
usage of various commands, statements, programs, examples, etc. This section provides a
summary of these conventions.
In the following descriptions a term refers to any word or group of words which may be
language keywords, user-supplied values, literals, etc. A term‟s exact meaning depends
upon the context in which it is used.
 Italic font introduces a new term, typically, in the sentence that defines it for the
first time.
 Fixed-width (mono-spaced) font is used for terms that must be given
literally such as SQL commands, specific table and column names used in the
examples, programming language keywords, etc. For example, SELECT * FROM
emp;
 Italic fixed-width font is used for terms for which the user must
substitute values in actual usage. For example, DELETE FROM table_name;
 A vertical pipe | denotes a choice between the terms on either side of the pipe. A
vertical pipe is used to separate two or more alternative terms within square
brackets (optional choices) or braces (one mandatory choice).
 Square brackets [ ] denote that one or none of the enclosed term(s) may be
substituted. For example, [ a | b ], means choose one of “a” or “b” or neither
of the two.
 Braces {} denote that exactly one of the enclosed alternatives must be specified.
For example, { a | b }, means exactly one of “a” or “b” must be specified.
 Ellipses ... denote that the proceeding term may be repeated. For example, [ a |
b ] ... means that you may have the sequence, “b a a b a”.
Copyright © 2007 - 2018 EnterpriseDB Corporation. All rights reserved. 9
Database Compatibility for Oracle® Developers
Reference Guide
2 The SQL Language
The following sections describe the subset of the Advanced Server SQL language
compatible with Oracle databases. The following SQL syntax, commands, data types,
and functions work in both EDB Postgres Advanced Server and Oracle.
The Advanced Server documentation set includes syntax and commands for extended
functionality (functionality that does not provide database compatibility for Oracle or
support Oracle-styled applications) that is not included in this guide.
This section is organized into the following sections:
 General discussion of Advanced Server SQL syntax and language elements
 Data types
 Summary of SQL commands
 Built-in functions
2.1 SQL Syntax
This section describes the general syntax of SQL. It forms the foundation for
understanding the following chapters that include detail about how the SQL commands
are applied to define and modify data.
Copyright © 2007 - 2018 EnterpriseDB Corporation. All rights reserved. 10
Database Compatibility for Oracle® Developers
Reference Guide
2.1.1 Lexical Structure
SQL input consists of a sequence of commands. A command is composed of a sequence
of tokens, terminated by a semicolon (;). The end of the input stream also terminates a
command. Which tokens are valid depends on the syntax of the particular command.
A token can be a key word, an identifier, a quoted identifier, a literal (or constant), or a
special character symbol. Tokens are normally separated by whitespace (space, tab, new
line), but need not be if there is no ambiguity (which is generally only the case if a
special character is adjacent to some other token type).
Additionally, comments can occur in SQL input. They are not tokens - they are
effectively equivalent to whitespace.
For example, the following is (syntactically) valid SQL input:
SELECT * FROM MY_TABLE;
UPDATE MY_TABLE SET A = 5;
INSERT INTO MY_TABLE VALUES (3, 'hi there');
This is a sequence of three commands, one per line (although this is not required; more
than one command can be on a line, and commands can usually be split across lines).
The SQL syntax is not very consistent regarding what tokens identify commands and
which are operands or parameters. The first few tokens are generally the command name,
so in the above example we would usually speak of a SELECT, an UPDATE, and an
INSERT command. But for instance the UPDATE command always requires a SET token
to appear in a certain position, and this particular variation of INSERT also requires a