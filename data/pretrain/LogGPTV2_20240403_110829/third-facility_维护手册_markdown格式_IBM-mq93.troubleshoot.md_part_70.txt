• trace=trace specification
The trace property determines the internal classes and packages that are to be traced.
Unless otherwise specified by your IBM Support representative, set this property to the value
com.ibm.wmqfte=all.
• traceFiles=number of trace files to use
• traceSize=size of each trace file, in MB
The traceFiles and traceSize properties are used to control the amount of trace data that is
collected. You should set these properties to large values, to collect as much trace data as possible.
For example, to collect 1GB of wrapping trace using the trace specification com.ibm.wmqfte=all,
add the following lines to the logger.properties file:
trace=com.ibm.wmqfte=all
traceFiles=5
traceSize=200
This results in the logger writing trace data to a maximum of 5 files, where each file has a size of
200MB.
For more information on these logger properties, see The MFT logger.properties file.
3.Stop the logger that needs to be traced, using the fteStopLogger command.
4.Start the logger, by running the fteStartLogger command.
5.Reproduce the issue.
6.Stop the logger.
7.Edit the logger.properties file for the logger, and remove the entries for the trace, traceFiles,
and traceSize properties that you added in step “2” on page 448.
This ensures that trace is not enabled the next time you restart the logger.
Results
The resultant trace files are written to the MQ_DATA_PATH/mqft/logs/coordination_qmgr_name/
loggers/logger_name/logs/trace%PID% directory, where %PID% is the process identifier for the
logger.
Collecting a Managed File Transfer standalone logger trace dynamically
The fteSetLoggerTraceLevel command allows trace to be collected from a running logger. This can
be very useful if IBM Support need to see a trace from a logger that cannot be stopped.
About this task
To collect a trace from a Managed File Transfer logger using the fteSetLoggerTraceLevel command,
complete the following steps.
Procedure
1.Turn trace on for the logger, by running the following command:
448 Troubleshooting and Support for IBM MQ
fteSetLoggerTraceLevel -traceLogger classes=level logger_name
The -traceLogger parameter determines the internal classes and packages that are to be traced.
Unless otherwise specified by your IBM Support representative, set this property to the value
com.ibm.wmqfte=all.
2.Reproduce the issue.
3.Turn trace off for the logger, by running the following command:
fteSetLoggerTraceLevel -traceLogger =off logger_name
4.If a logger is busy, then the trace files might wrap quickly and overwrite the information needed to
investigate the issue.
If you can stop the logger for a short period of time, complete the following steps to reduce the
amount of trace data that is collected. Otherwise, contact IBM Support and discuss alternative trace
specifications to reduce the amount of trace data that is collected.
a)Schedule some time to stop the logger.
b)Locate the logger.properties file for the logger that needs to be traced.
The logger.properties file can be found in the MQ_DATA_PATH/mqft/config/
coordination_qmgr_name/loggers/logger_name directory.
c)Edit the file and add entries for the following properties:
traceFiles=number_of_trace_files_to_use
traceSize=size_of_each_trace_file_in_MB
The traceFiles and traceSize properties are used to control the amount of trace data that is
collected.
The default value of the traceFiles property is 5, and the traceSize property has the default
value of 20MB. This means that if you turn on trace dynamically, and you have not set the
properties, the agent writes trace information to 5 wrapping trace files, each with a maximum
size of 20MB.
You should set these properties to large values, to collect as much trace data as possible.
For example, to collect 1GB of wrapping trace, add the following lines to the logger.properties
file:
traceFiles=5
traceSize=200
This results in the logger writing trace data to a maximum of 5 files, where each file has a size of
200MB.
For more information on these logger properties, see The MFT logger.properties file.
d)Stop the logger, by running the fteStopLogger command.
e)Start the logger, by running the fteStartLogger command.
f)Turn trace on for the logger, by running the following command. Unless otherwise specified by your
IBM Support representative, set the -traceLogger property to the value com.ibm.wmqfte=all.
fteSetLoggerTraceLevel -traceLogger classes=level logger_name
g)Reproduce the issue.
h)Turn trace off for the logger, by running the following command:
fteSetLoggerTraceLevel -traceLogger =off logger_name
IBM MQ troubleshooting and support 449
Results
The resultant trace files are written to the MQ_DATA_PATH/mqft/logs/coordination_qmgr_name/
loggers/logger_name/logs/trace%PID% directory, where %PID% is the process identifier for the
logger.
Tracing Managed File Transfer for z/OS resources
The trace facility in Managed File Transfer for z/OS is provided to help IBM Support diagnose your
problems and issues. You can trace various different resources.
Procedure
• To trace a Managed File Transfer agent on z/OS, see “Tracing Managed File Transfer for z/OS agents”
on page 450.
• To trace a command, see “Tracing Managed File Transfer for z/OS commands” on page 456.
• To trace a Managed File Transfer stand-alone database logger on z/OS see “Tracing Managed File
Transfer for z/OS standalone database loggers” on page 458.
Related tasks
“Collecting troubleshooting information for IBM Support” on page 302
When you open a case with IBM, you can include additional IBM MQ troubleshooting information
(MustGather data) that you have collected to help with investigating the problem. In addition to the
information described in this section, IBM Support might request further information on a case by case
basis.
Tracing Managed File Transfer for z/OS agents
The trace facility in Managed File Transfer for z/OS is provided to help IBM Support diagnose your
problems and issues. Various commands and properties control the behavior of this facility.
About this task
If you are asked to provide trace output to investigate an issue with an agent, use one of the following
options.
If you are unsure which option to use, contact your IBM Support representative and they will advise you
on the best way to collect trace for the issue that you are seeing.
Procedure
• If it is possible for you to stop an agent for a short period of time, collect a trace of the agent from
startup.
For more information, see “Collecting a Managed File Transfer for z/OS agent trace from startup” on
page 450.
• If it is not possible for you to stop an agent, then collect a trace dynamically using the
fteSetAgentTraceLevel command.
For more information, see “Collecting a Managed File Transfer for z/OS agent trace dynamically” on
page 453.
Collecting a Managed File Transfer for z/OS agent trace from startup
Where it is possible for you to stop an agent for a short period of time, you should collect IBM MQ
Managed File Transfer agent trace from startup.
About this task
The way to collect the trace depends on whether the agent is being administered using z/OS UNIX System
Services (z/OS UNIX) or JCL.
450 Troubleshooting and Support for IBM MQ
If you are unsure which of the following options to use, contact your IBM Support representative and they
will advise you on the best way to collect trace for the issue that you are seeing.
Procedure
• If you are using z/OS UNIX, see “Collecting an agent trace from startup using z/OS UNIX” on page 451.
• If you are using JCL, see “Collecting an agent trace from startup using JCL” on page 452.
Collecting an agent trace from startup using z/OS UNIX
To collect a trace of a Managed File Transfer for z/OS agent that is being administered using z/OS
UNIX System Services (z/OS UNIX) from startup, you need to set various properties need in the
agent.properties file for that agent before it is started.
About this task
To collect a trace from startup, complete the following steps.
Procedure
1.Locate the agent.properties file for the agent that needs to be traced.
The agent.properties file can be found in the BFG_DATA/mqft/config/
coordination_qmgr_name/agents/agent_name directory.
2.Edit the files and add entries for the following properties:
• trace=trace specification
The trace property determines the internal classes and packages that are to be traced.
Unless otherwise specified by your IBM Support representative, set this property to the value
com.ibm.wmqfte=all.
• traceFiles=number of trace files to use
• traceSize=size of each trace file, in MB
The traceFiles and traceSize properties are used to control the amount of trace data that is
collected. You should set these properties to large values, to collect as much trace data as possible.
For example, to collect 1GB of wrapping trace using the trace specification com.ibm.wmqfte=all,
add the following lines to the agent.properties file:
trace=com.ibm.wmqfte=all
traceFiles=5
traceSize=200
This results in the agent writing trace data to a maximum of 5 files, where each file has a size of
200MB.
For more information on these agent properties, see The MFT agent.properties file.
3.Stop the agent that needs to be traced, using the fteStopAgent command.
4.Start the agent, by running the fteStartAgent command.
5.Reproduce the issue.
6.Stop the agent.
7.Edit the agent.properties file for the agent, and remove the entries for the trace, traceFiles,
and traceSize properties that you added in step “2” on page 451.
This ensures that trace is not enabled the next time you restart the agent.
Results
The resultant trace files are written to the BFG_DATA/mqft/logs/coordination_qmgr_name/
agents/agent_name/logs/trace%PID% directory, where %PID% is the process identifier for the
agent.
IBM MQ troubleshooting and support 451
Collecting an agent trace from startup using JCL
To collect a trace of a Managed File Transfer for z/OS agent that is being administered using JCL from
startup, you need to set various properties need in the agent.properties file for that agent before it is
started.
About this task
To collect a trace from startup, complete the following steps.
Procedure
1.Locate the agent.properties file for the agent that needs to be traced.
The agent.properties file can be found in the BFG_DATA/mqft/config/
coordination_qmgr_name/agents/agent_name directory.
2.Edit the files and add entries for the following properties:
• trace=trace specification
The trace property determines the internal classes and packages that are to be traced.
Unless otherwise specified by your IBM Support representative, set this property to the value
com.ibm.wmqfte=all.
• traceFiles=number of trace files to use
• traceSize=size of each trace file, in MB
The traceFiles and traceSize properties are used to control the amount of trace data that is
collected. You should set these properties to large values, to collect as much trace data as possible.
For example, to collect 1GB of wrapping trace using the trace specification com.ibm.wmqfte=all,
add the following lines to the agent.properties file:
trace=com.ibm.wmqfte=all
traceFiles=5
traceSize=200
This results in the agent writing trace data to a maximum of 5 files, where each file has a size of
200MB.
For more information on these agent properties, see The MFT agent.properties file.
3.Locate the data set containing the JCL for the agent that needs to be traced.
4.Submit the BFGAGSP member within the data set to stop the agent.
5.Restart the agent, by submitting the BFGAGST member in the data set .
6.Reproduce the issue.
7.Submit the BFGAGSP member in the data set to stop the agent again.
8.Edit the agent.properties file for the agent, and remove the entries for the trace, traceFiles,
and traceSize properties that you added in step “2” on page 452.
This ensures that trace is not enabled the next time you restart the agent.
Results
The resultant trace files are written to the BFG_DATA/mqft/logs/coordination_qmgr_name/
agents/agent_name/logs/trace%PID% directory, where %PID% is the process identifier for the
agent.
452 Troubleshooting and Support for IBM MQ
Collecting a Managed File Transfer for z/OS agent trace dynamically
Where it is not possible for you to stop an agent for a short period of time, you should collect Managed File
Transfer for z/OS agent trace dynamically.
About this task
The way to collect the trace depends on whether the agent is being administered using z/OS UNIX System
Services (z/OS UNIX) or JCL.
If you are unsure which of the following options to use, contact your IBM Support representative and they
will advise you on the best way to collect trace for the issue that you are seeing.
Procedure
• If you are using:
– z/OS UNIX, see “Collecting an agent trace dynamically using z/OS UNIX” on page 453.
– JCL, see “Collecting an agent trace dynamically using JCL” on page 454.
Collecting an agent trace dynamically using z/OS UNIX
Under z/OS UNIX System Services (z/OS UNIX), you can use the fteSetAgentTraceLevel command
to collect trace from a running agent. This can be very useful if IBM Support need to see a trace from an
agent that cannot be stopped.
About this task
To collect a trace from a Managed File Transfer for z/OS agent using the fteSetAgentTraceLevel
command, complete the following steps.
Procedure
1.Turn trace on for the agent, by running the following command:
fteSetAgentTraceLevel -traceAgent classes=level agent_name
The -traceAgent parameter determines the internal classes and packages that are to be traced.
Unless otherwise specified by your IBM Support representative, set this property to the value
com.ibm.wmqfte=all.
2.Reproduce the issue.
3.Turn trace off for the agent, by running the following command:
fteSetAgentTraceLevel -traceAgent =off agent_name
4.If an agent is busy, then the trace files might wrap quickly and overwrite the information needed to
investigate the issue.
If you can stop the agent for a short period of time, complete the following steps to reduce the
amount of trace data that is collected. Otherwise, contact IBM Support and discuss alternative trace
specifications to reduce the amount of trace data that is collected.
a)Schedule some time to stop the agent.
b)Locate the agent.properties file for the agent that needs to be traced.
The agent.properties file can be found in the BFG_DATA/mqft/config/
coordination_qmgr_name/agents/agent_name directory.
c)Edit the file and add entries for the following properties:
traceFiles=number_of_trace_files_to_use
traceSize=size_of_each_trace_file_in_MB
IBM MQ troubleshooting and support 453
The traceFiles and traceSize properties are used to control the amount of trace data that is
collected.
The default value of the traceFiles property is 5, and the traceSize property has the default
value of 20MB. This means that if you turn on trace dynamically, and you have not set the
properties, the agent writes trace information to 5 wrapping trace files, each with a maximum
size of 20MB.
You should set these properties to large values, to collect as much trace data as possible.
For example, to collect 1GB of wrapping trace, add the following lines to the agent.properties
file:
traceFiles=5
traceSize=200
This results in the agent writing trace data to a maximum of 5 files, where each file has a size of
200MB.
For more information on these agent properties, see The MFT agent.properties file.
d)Stop the agent, by running the fteStopAgent command.
e)Start the agent, by running the fteStartAgent command.
f)Turn trace on for the agent, by running the following command:
fteSetAgentTraceLevel -traceAgent trace_specification agent_name
g)Reproduce the issue.
h)Turn trace off for the agent, by running the following command:
fteSetAgentTraceLevel -traceAgent =off agent_name
Results
The trace files are written to the BFG_DATA/mqft/logs/coordination_qmgr_name/agents/
agent_name/logs/trace%PID% directory, where %PID% is the process identifier for the agent.
Collecting an agent trace dynamically using JCL
You can use the BFGAGTC member within the data set containing the JCL, for the agent that needs to be
traced, to collect trace from a running Managed File Transfer for z/OS agent This can be very useful if IBM
Support need to see a trace from an agent that cannot be stopped.
About this task
To collect a trace from an agent using the BFGAGTC member, complete the following steps.
Procedure
1.Locate the data set containing the JCL for the agent that needs to be traced.
2.Edit the BFGAGTC member within the data set, and locate the line that contains the text:
-traceAgent
The text following this contains the list of internal classes and packages that are to be traced. By
default, this list is set to:
com.ibm.wmqfte=all
Unless otherwise specified by your IBM Support representative, leave this value as is.
3.Submit the BFGAGTC member.
4.Reproduce the issue.
454 Troubleshooting and Support for IBM MQ
5.Edit the BFGAGTC member again, and set the -traceAgent parameter to =off, as shown:
-traceAgent =off +
6.Submit the BFGAGTC member again, to turn trace off.