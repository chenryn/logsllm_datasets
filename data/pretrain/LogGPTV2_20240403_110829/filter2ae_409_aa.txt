这一篇给大家介绍操作系统的初步配置和4种破解Wifi连接密码的方式，分别为WEP类型、WPA2-PSK类型、利用WPS功能以及本地破解历史连接记录。上一篇介绍过，破解密码用的操作系统我们选择使用Kali Linux，网卡选择了TP-LINK的TL-WN722N，由于这里主要介绍破解方法，所以路由器是由笔者自行任意设置。
       在这里特别说明一下，Kali Linux中集成的工具数量众多，各大平台用于Wifi密码破解的工具也很多，这里我们选择比较有代表性的数种工具进行介绍，并不能涵盖全部的主流工具。在Kali Linux中，关于Wifi密码破解的工具，有专门的分类，如下图所示：
    打开Kali虚拟机（虚拟机的安装过程不再讲解，网上很多，请大家自行搜索安装），在上方的菜单栏中选择“虚拟机”选项卡，在“可移动设备中”选择无线网卡连接Kali系统。提示连接成功后，Kali系统就能够正确的加载无线网卡的驱动。
       特别提醒：使用Kali应当养成一个好习惯，在没有特殊需求的情况下，经常使用apt-get update和apt-get upgrade升级一下软件。
       使用无线网卡破解Wifi密码，首先需要对无线网卡在Kali中进行一个设置，加载网卡并设置为监听模式。无线网卡只有工作在监听模式，才能够抓取周围能够探测到的无线网络信号数据包。在无线网卡被正确连接到虚拟机后，我们打开系统终端，查看一下网卡的情况，命令为ifconfig -a，如下图所示：
    图中wlan0就是我们连接的无线网卡，eth0为虚拟有线网卡，是VMware提供的，lo为本地环回地址，即127.0.0.1。这里需要再次确认加载了无线网卡，使用一条命令：
这里ifconfig wlan0 up
就是确认激活无线网卡为可用状态，此时没有异常提示的情况下，无线网卡就正式启动了。如果有疑虑，还可以使用专门查看无线网卡状态的命令iwconfig进行查看，如下图所示：
    这样就再次确认了无线网卡的成功加载，下一步，要将无线网卡设置为监听模式，设置命令为：
    这里的命令airmon-ng start wlan0是利用了Aircrack-ng工具套件（这也是破解WiFi密码将要用到的重要工具集）中的一个设置工具。使用这个工具后，就可以将无线网卡成功设置为监听模式，如下图：
    这里做一个提示，如果设置失败，需要重新加载网卡，如果别的程序或者进程在占用这个无线网卡，设置是不会成功的。设置成功后，使用iwconfig命令查看一下无线网卡，如果显示如下图:
    无线网卡的名称由wlan0变为wlan0mon，就确认设置成功了，此时无线网卡就是工作在监听模式中。在Kali Linux 1.x的版本中，监听模式无线网卡名称为mon0，2.0版本后更改为wlan0mon，这里有区别，需要注意一下。下面讲解一下密码破解的内容。
1.WEP密码破解  
前面的连载文章中我们已经介绍过WEP加密，WEP是一种比较老的加密方式，现在已经被淘汰。作为技术讲解，还是觉得有必要加入进来。这里我们使用两种工具进行演示，都是Kali
Linux系统下，一种是大名鼎鼎的Aircrack-ng工具套件，另一种是Fern WIFI Cracker。首先我们使用Aircrack-ng讲解一下破解过程。这里笔者预置了一个SSID为target的无线路由器，采用WEP加密方式。  
破解过程的第一步，就是需要搜索无线网卡能够接收探测到的周围无线网络信号，这里使用Aircrack-ng套件中的airodump-ng工具，命令如下图：
    这里使用的airodump-ng wlan0mon，就是调用工具列举出周围能够探测到的无线信号，这里的工具列举出来的无线信号已经比较详细，工具探测截图如下：
    这里有几个项目需要了解一下：
BSSID：无线路由器的MAC地址  
PWR：无线路由器的信号强度（负值的绝对值越低信号越强，绝对值50以上的信号就一般了，70以上的信号算是比较差的）  
CH：无线路由器工作信道  
MB：无线路由器速率  
ENC：加密方式  
ESSID：无线网络的名称，也就是打开终端搜索到的无线网络名  
STATION：连接某无线路由器的一个客户端，例如笔记本电脑、手机等  
这里我们将这个终端放在这里不要关闭，重新打开一个新的终端，输入使用新的命令，如下图：
    airodump-ng –ivs –w wep –c 1 wlan0mon这条命令，--ivs是破解WEP重要的命令，抓取WEP加密的iv向量，用于破解密码使用。-c 1，是指定抓取工作在信道1的无线网络数据包。命令运行后效果如下：
    破解WEP的关键在于抓取数量足够多的iv包，采用WEP加密的无线网络中，更多的iv包意味着无线网络具有更大的数据传输流量。破解WEP最理想的情况是，目标网络中有个终端正在下载、看视频、传输大文件等操作，这些都是产生大流量iv包的情况。如果没有大流量的支持，破解需要收集足够多的iv包是需要很长时间的，这里使用ARP REQUEST攻击进行流量激发。保持当前窗口运行，新建一个终端窗口，输入如下命令：
这里aireplay-ng是套件中的一个工具，参数设置为-3，是设置做ARP
REQUEST攻击，-b后面设置无线路由器的MAC地址，-h后面设置当前与目标无线路由器连接的一个终端的MAC地址（破解WEP需要有个合法终端已经连接在目标无线路由器上）。Aireplay-ng还有很多其他的参数可以使用，请大家自行上网搜索一下，这里不再列举。执行命令后可能出现如下情况：
    最后一行说明无线网卡工作在信道5，无线路由器工作在信道1，两个信道不匹配，所以无法进行ARP REQUEST攻击。这里提醒大家，无线路由器设置好后，是工作在指定信道上的，而无线网卡为了搜索更多网络，是循环工作在不同信道上的。这里大家将这个命令重复执行多几次，直到出现如下提示，说明无线路由器和无线网卡恰好工作在同一个信道上，ARP REQUEST攻击成功：
    这里需要大家耐心等待，保持终端窗口运行，终端和无线路由器产生的流量足够多，抓取足够多的iv包才可以成功破解。稳妥起见，建议抓取十万以上iv包再进行密码破解。抓取到的iv包，工具会自动存储在/home文件夹下，一般以wep-01.ivs这种名称进行保存：