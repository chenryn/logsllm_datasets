traﬃc volume often require direct peering sessions on dedicated physical infras-
tructure with guaranteed capacity. This form of interconnection usually comes
with monetary compensation for certain Service-Level Agreements (SLAs). Even
though private peering keeps the peering policies of an AS hidden and often pro-
vides dedicated capacity, even private peering sessions can suﬀer from outages
when, e.g., the entire colocation facility goes down—a not so uncommon scenario
as Giotsas et al. reported (160 outages in 5 years) [32].
Cloud and Content Provider Connectivity. Many Cloud and Content
providers peer at hundreds of physically distinct locations [11] to thousands
of diﬀerent networks [6]. While they often require private peering connections,
they sometimes also rely on bi-lateral peering to ensure that they directly con-
nect with as many eyeball ASes as possible [24] or to gain tens of milliseconds of
latency improvements over their transit providers [69]. Hence, it is unsurprising
that those providers also dominate the peering LAN traﬃc (as shown for two
medium-sized IXPs by Cardona et al. [19]). Yet, as most networks try to estab-
lish private peering connections with them directly in the colocation facilities,
those facilities have established so-called cloud exchanges—speciﬁc ports which
directly provide connectivity (called virtual private interconnection (VPI)) to
any number of cloud service providers within the colocation facility [79].
Identifying Peering Partners. Many network operators rely on a network pol-
icy database called PeeringDB to identify potential peering partners [62]. In par-
ticular, PeeringDB diﬀerentiates between four peering policy types: (1) open: A
network with an open peering policy that peers with any other network, (2) selec-
tive: A network that will peer under certain conditions, e.g., minimum traﬃc
volume or location, (3) restrictive: A network that already has an existing set of
peers and needs strong, convincing arguments to establish a peering connection,
and (4) no peering: These networks do not peer at all and rely entirely upon
transit [58]. Notably, the vast majority of peering policies in PeeringDB are of the
‘open’ type. Yet, PeeringDB is known to have certain inaccurate entries [45,74].
Further, many small networks—especially in developing regions—do simply not
register in PeeringDB [45].
3 Preface: Data Sets
While we introduce each data set separately when using it, this section sum-
marizes the used data sets to provide a better overview of time coherence and
caveats.
Peering Only?
343
3.1 Main Data Sets
PeeringDB Snapshots (2010/08/01–2021/06/01, Monthly). PeeringDB
is a community-eﬀort database containing information about the infrastructure
and policies for IXPs, colocation facilities, peering LANs, and networks [62].
PeeringDB is known to have a small set of inaccurate entries [45,74]. Similarly,
Lodhi et al. reported that PeeringDB underrepresents small—especially devel-
oping country—networks [45]. The Center for Applied Internet Data Analysis
(CAIDA) produces monthly snapshots of this database [17].
Route Server Snapshots (2021/06/06–21, Once). WWe compiled a set
of Route Server snapshots for the largest (in terms of members) peering LAN
for eight of the world’s largest IXPs. We received these snapshots via multiple
personal contacts throughout 15 days.
IXP Traﬃc Data (2021/05/01–2021/06/07). We obtain IPFIX traﬃc cap-
tures from one of the largest European IXPs. The traﬃc is sampled at a rate of
1 out of 10K (1:10k) ﬂows. The captures encompass all traﬃc exchanged via the
peering LAN; hence, it contains traﬃc exchanged via multi-lateral and bi-lateral
peering sessions but misses private peering traﬃc. In particular, we utilize the
data from May 2021 to analyze how our observation period inﬂuences our results
and subsequently report most of our results based on the ﬁrst week in June 2021.
ISP Traﬃc Data (2021/06/10). We obtain a single workday of egress traﬃc
captured from all border routers from a large European eyeball network. The
data was sampled at a rate of 1:1K packets.
Domain-Based Preﬁx Top List (2021/04/30). We obtain a recently recom-
puted domain-based preﬁx top list from Naab et al. [55]. Their methodology
relies on a domain top list as input, then resolves those domains to IP addresses
from a single physical location, and ﬁnally aggregated the number of Fully Qual-
iﬁed Domain Names that is served by every norm-preﬁx (i.e., a /24 preﬁx in IPv4
and a /48 preﬁx in IPv6). We use the preﬁx top list that relied on Umbrella’s
domain top list [25] as input, as it was the only one that could provide us with
10K IPv6 preﬁxes. Notably, this domain-based preﬁx top list is biased towards
the European service region as DNS load-balancing [71] and caching [67] may
lead to strongly regionalized address resolutions.
Please note that we handled our traﬃc data sets in compliance with mea-
surement ethics and best practices. We performed all data analyses on servers
located at the respective premises of our vantage points using data collected
as a part of their routine network analysis. We analyzed ﬂow data summaries
based on packet headers that did not reveal any payload information. We further
anonymized all ﬂow attributes not explicitly needed for the results presented in
this paper. This is in line with Ethical Committee policies. For the remaining
data sets, we rely on publicly available sources only.
344
L. Prehn et al.
3.2 Orthogonal Data Sets
Maxmind GeoLite2 Snapshot (2021/06/01). We utilize a snapshot of Max-
mind’s GeoLite2 database [53] to geolocate Route Server preﬁxes. While they can
have signiﬁcant inaccuracies on a city or country-level [21], even freely available
databases achieve near-perfect continent-level predictions [52].
CAIDA’s AS Relationships Snapshot (2021/06/01). CAIDA produces
monthly snapshots of the business relationships inferred by ASRank [47] based
on routing information collected by RouteViews [61] and RIPE/RIS [56] from
the ﬁrst ﬁve days within the month [14]. While it misses many peering links, this
data is reasonably complete for transit links [35,59,60]. Further, the inference
algorithm is known to near-perfectly infer transit relationships but often misin-
fers peering relationships as transit [30,39,40], i.e., it overestimates the number
of transit relationships.
CAIDA’s IP-to-AS Mapping Snapshot (2021/06/10). CAIDA generates
daily IP to AS mappings based on routing information from selected Route
Views [61] collectors [18].
CAIDA’s AS-to-Org Mapping Snapshot (2021/04/01). CAIDA produces
quarterly snapshots of AS-to-Organization mappings generated based on the
WHOIS databases of all Regional and some National Internet Registries [16].
Notably, WHOIS data is known to contain malformatted and hard-to-parse
entries [44], leading to potential inaccuracies in the inferred AS-to-Organization
mapping. The April snapshot is the latest available snapshot before our mea-
surement period.
4 Multilateral Peering
We start our analysis with the lowest-hanging fruit: multi-lateral peering. While
some IXPs have explicit APIs that could be used to re-build the current routing
table of their route servers, we explicitly request Route Server snapshots for the
largest peering LAN of diﬀerent IXPs. Out of the ten IXPs shown in Fig. 1, only
Nl-IX and EPIX did not fulﬁl our request. Our eight Route Server snapshots are
from diﬀerents days between 6th and 21st June, 20212 and contain the entire
routing information base for each session, i.e., they contain all paths from all
neighbours (rather than just one best path) for a given preﬁx. Using those snap-
shots, we look at what routes an AS may expect from the Route Server and how
consistent those ﬁndings are across diﬀerent IXP Route Server. In particular, we
arrive at the following takeaways:
– Large Route Servers across the world are very similar: They not only have the
same distribution of routes per peer but also share the majority of reachable
2 As we obtained similar results for all Route Server related plots for a set of inital
snapshots that we obtained throughout January and February, we do not expect any
major inconsistencies due to a two week oﬀset.
Peering Only?
345
preﬁxes and IPs, i.e., joining a second, third, etc. Route Server only negligibly
improves reachability.
– Due to the growing trend of remote peering, Route Servers provide only a
limited amount of in-continent routes.
– We observe that most routes (at all analyzed Route Servers) contain at
least three hops. While both close and distant peers announce those lengthy,
unattractive routes, we ﬁnd that members often only use one-hop Route
Server routes.
How Consistent are the Distribution of Routes to Peers Across Route
Servers? Our snapshots show that connecting to the Route Server immediately
provides routes from up to 650 IXP members. Yet, Richter et al. already reported
that not all IXP members announce the same number of preﬁxes [68]. As a ﬁrst
look at how similar Route Servers are, we analyze whether this distribution is
consistent across them. Figure 3 shows the number of preﬁxes (y-axis, logarith-
mic) announced by every peer (x-axis) per Route Server. Indeed, we observe
strong consistency across diﬀerent IXP Route Servers regardless of the protocol.
For the AMS-IX Route Server (top curve), the top ˜1.5, 10, 30, and 70% of
Route Server peers announce routes for more than 10K, 1K, 100, and 10 IPv4
(1K, 100, 20, and 5 IPv6) preﬁxes. While most Route Servers are close to AMS-
IX, peers at NAPAfrica (bottom curve) announce around an order of magnitude
fewer preﬁxes.e fewer preﬁxes, most other IXPs are closer to AMS-IX.
Notably, not all preﬁxes are nec-
essarily exported to all peers by the
Route Server. To estimate how many
preﬁxes can only be received condi-
tionally, we inspect the Route Server
snapshots for BGP communities that
control
its redistribution rules. For,
e.g., DE-CIX, we inspect routes with
the 0:6695 Community that is used
to exclude all peers; this commu-
nity is usually combined with other
BGP Communities of the form 6695:X
which instruct the Route Server to
explicitly redistribute a route to peer
X. Overall, we ﬁnd that 31.3% of IPv4
and 11.2% of IPv6 Route Server pre-
ﬁxes are not globally exported.
Fig. 3. Number of preﬁxes announced per
peer
Do Route Servers Help to Keep Local Traﬃc Local? As brieﬂy discussed
in Sect. 2, IXPs initially were established as a solution to interconnect geograph-
ically close ASes following the idea to “keep local traﬃc local”. Yet, given that
many peers announce tens of thousands of preﬁxes to hundreds of millions of
hosts, we now want to take a look at how strictly this idea is followed through by
today’s Route Servers. We ﬁrst use a na¨ıve approach to answering this question:
346
L. Prehn et al.
We look at the AS path length (after removing AS Path Prepending). Figure 4
shows the Route Server preﬁxes of diﬀerent IXPs separated by the number of
ASes in their shortest route. We observe that for around half of all preﬁxes the
shortest path contains three or more ASes. This result goes against the “keep
local traﬃc local” idea, as local routes would likely either directly lead to an
access/eyeball network or indirectly via a national service provider. However,
given that the AS path length is often not a good proxy for geographic distance,
we now switch to a more insightful perspective.
Fig. 4. Length of shortest AS path per
preﬁx
Fig. 5. Geolocation of preﬁxes relative to
Route Server
Rather than looking at the AS path, we now directly map the visible pre-
ﬁxes to countries and continents using a snapshot of Maxmind’s GeoLite2
database [53] from 1st June 2021. While perfect IP-to-geolocation mapping is
a long-standing research problem, previous work showed that for various public
geolocation databases 99% of predictions stay within 600 km of the actual loca-
tion [21]. Similarly, Maxmind claims that for many countries 0% of predictions
are oﬀ by more than 250 km [52]. While this large radius might inﬂuence the
accuracy of country-level predictions, it provides us with near-perfect accuracy
for continental predictions as most of our Route Servers have even more dis-
tance between their location and the closest continental border. Figure 5 shows
the Route Server preﬁxes of diﬀerent IXPs separated by whether they lead to
in-country, in-continent, or out-of-continent (“other”) hosts. Notably, there is
a small number of preﬁxes for which the database did not include a mapping
(“NA”). Interestingly, looking at host locations provides an even more drastic
result than looking at AS paths: Regardless of the actual Route Server, around
two-thirds of all preﬁxes lead to out-of-continent hosts.
While the growing trend of remote-peering [57] can easily lead to many out-
of-continent routes, it is unclear whether it also contributes to the high number of
Peering Only?
347
lengthy routes. To better understand whether this correlation exists, we want to
compare the path length of each route with the RTT (as a proxy for distance) to
its next-hop interface. Hence, we run ping measurements from a server directly
connected to the switching fabric of L-IXP towards each member interface.3