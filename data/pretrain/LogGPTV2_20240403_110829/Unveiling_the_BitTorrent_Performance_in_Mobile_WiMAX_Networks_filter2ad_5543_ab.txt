1
0.8
0.6
0.4
F
D
C
0.2
0
0
Stationary
Subway
Bus
0.8
Aggregated Connection Session
0.2
0.4
0.6
1
1
0.8
0.6
0.4
F
D
C
0.2
0
0
Stationary
Subway
Bus
0.8
0.2
Inter−Connection Session
0.4
0.6
1
(b) Aggregated CS distri-
bution
Fig. 3. Peer Connectivity
(c) Inter-CS distribution
link conditions. Active and passive disconnections can be determined by checking
whether there is a TCP FIN ﬂag at the end of a CS. We observe that the ratio
of the CSs ended by passive disconnections to all the CSs is 0%, 87.2% , 88.7%
and 92.1% in the Ethernet, stationary, subway, and bus cases, respectively.
We show the cumulative distribution functions (CDFs) of CSs and aggregated
CSs in Figs. 3(a) and 3(b), respectively. We observe that more than 50% of the
CSs are extremely short, less than 2% of the total download time. In the bus
scenario, around 80% of the aggregated CSs are shorter than half of the total
download time, but in the subway and stationary scenarios, about 40% of the
aggregated CSs are longer than half of the total download time. We also plot
the CDF of idle durations between the adjacent CSs to the same peer, dubbed
inter-CS times, in Fig. 3(c). In the bus case, half of the inter-CSs are shorter
than 10% of the total download time, which indicates frequent disconnections
and reconnections to the same peers. Frequent disconnections indicate poor con-
nectivity to peers; the bus scenario exhibits the poorest connectivity since its
wireless link is highly ﬂuctuating while the bus moves in outdoor environments.
Table 2 shows the statistical averages of CSs, aggregated CSs and inter-CSs of
each scenario, and we compute that, on average, WiMAX hosts performance
worse than Ethernet one, and the bus host performance the worst.
Table 2. Averages of the metrics are shown where ind., agg., inter- stand for individual,
aggregated, inter-session times, respectively. All session times are normalized to the
total download time in each case, and the unit of the traﬃc is KB.
CS
ind. agg.
DS
ind. agg.
inter-
ind. agg.
Ethernet N/A N/A N/A 0.286 0.350 0.049 1818 1972 0.026 0.232 87 791
Stationary 0.253 0.352 0.487 0.052 0.227 0.020 227 2107 0.006 0.056 55 542
0.201 0.327 0.396 0.043 0.181 0.019 192 2113 0.005 0.081 50 855
0.155 0.210 0.259 0.021 0.088 0.013 133 1281 0.003 0.031 21 205
ind. agg.
ind. agg.
Subway
inter-
Bus
DT
US
UT
4.2 Download Stability
Download sessions (DSs) may be interrupted or terminated by multiple reasons:
(a) bad link conditions incur large RTTs and frequent packet losses, so that
190
X. Wang et al.
F
D
C
1
0.8
0.6
0.4
0.2
0
0
1
Ethernet
Stationary
Subway
Bus
0.8
0.2
Individual Download Session
(a) Individual DS
0.4
0.6
1
0.8
0.6
0.4
0.2
F
D
C
0
0
Ethernet
Stationary
Subway
Bus
0.8
0.6
0.4
0.2
Aggregated Download Session
(b) Aggregated DS
1
1
0.8
0.6
0.4
F
D
C
0.2
0
0
1
Ethernet
Stationary
Subway
Bus
0.8
0.2
0.4
0.6
Inter−Download Session
(c) Inter-DS
Fig. 4. Download Stability
TCP connections can be disrupted, (b) a chunk delivery (with chunk size of 512
KB for a 400 MB ﬁle [11] [13]) is ﬁnished successfully, (c) the host is so slow
that it may be choked, (d) by the end of ﬁle download time, transmissions are
withdrawn intentionally by the BitTorrent protocol. We exclude the latter three
cases, which can be classiﬁed as active disconnections. We observe that DSs are
passively disconnected (i.e. case (a)) with the ratios of 71.2%, 84.6%, 85.7%,
and 91.6% in the Ethernet, stationary, subway, and bus cases, of all the DSs
respectively.
The CDF of DSs due to passive disconnections is shown in Fig. 4(a), which
reveals the stability of downloading the ﬁle. (Note that peers, which do not
transmit data to the host, are not included in the ﬁgure.) The Ethernet host
outperforms the WiMAX hosts signiﬁcantly due to its high uplink capacity.
Hosts in the WiMAX network suﬀer from short DSs; almost 90% of the DSs are
shorter than 10% of the total download time. Fig. 4(b) shows the CDF of the
aggregated DSs of the peers. Surprisingly the WiMAX hosts have negligible DSs
from almost 60% of the peers, while the Ethernet host has marginal DSs from
around 30% of the peers. The aggregated DSs (of peers) of the WiMAX hosts
are much shorter than that of the Ethernet host. In particular, the WiMAX
host in the bus scenario has the worst performance; 90% of its peers maintain
aggregated DSs less than 40% of the total download time. We also plot the CDF
of the inter-DS times, the inactive download periods, in Fig. 4(c), showing
the inter-DS times are very short in the WiMAX cases, indicating that the
download is terminated and recovered frequently. From Table 2, the average
durations of individual and aggregated DSs (of peers) of the WiMAX hosts are
quite shorter than those of the Ethernet hosts due to frequent interruptions and
disconnections.
4.3 Download Traﬃc
During the DSs, the amount of the download traﬃc from remote peers to a host
is time-varying depending on the link dynamics (and hence transmission rate
of a channel). We measure the DT for each DS to observe how much traﬃc a
remote peer transmits to the host. As shown in Fig. 5 (X axis is in log scale),
the WiMAX host in the bus case receives the smallest DT per DS. Most of the
DT to the Ethernet host are transmitted from a few peers in a short time. In
Unveiling the BitTorrent Performance in Mobile WiMAX Networks
191
1
0.8
1
0.8
F
D
C
0.6
0.4
0.2
0
100
Ethernet
Stationary
Subway
Bus
102
104
106
Individual Download Traffic (bytes)
F
D
C
0.6
0.4
0.2
0
100
Ethernet
Stationary
Subway
Bus
102
104
Aggregated Download Traffic (bytes)
6
10
F
D
C
1
0.8
0.6
0.4
0.2
0
1
Ethernet
Stationary
Subway
Bus
10
100
400
No. of Successful Chunks per DS
(a) Individual DT
(b) Aggregated DT
(c) # of Chunks per DS
Fig. 5. Download Traﬃc
contrast, the WiMAX hosts can download only a small amount of traﬃc from a
large number of peers due to its link instability.
The eﬀective download of a host is critical to evaluate the BitTorrent perfor-
mance. We calculate the CDF of the numbers of successfully transmitted chunks
during each DS. From Fig. 5(c), we observe that in the WiMAX cases, about
90% of the DSs cannot continuously download even a single chunk successfully.
The average number of successful chunks per DS is 2.951, 0.218, 0.162, and 0.103
in the Ethernet, stationary, subway and bus cases, respectively. Consequently,
frequent disruptions of chunk will result in retransmissions of some packets of
the interrupted chunk. We suggest that reducing the chunk size may increase
the eﬃciency of chunk delivery in mobile environments.
4.4 Upload Stability and Traﬃc
We evaluate upload stability and upload traﬃc similarly. CDFs of USs and UTs
are shown in Fig. 6. Most of the individual USs of the WiMAX hosts exist for
extremely short periods: 0.1% ∼ 1% of the total download time. By comparison,
the Ethernet host maintains higher USs due to its stable link. Fig. 6(c) shows
that the UT of each of the WiMAX cases (except the bus case) is not so diﬀerent
from that of the Ethernet case. It is because that there is not so much need to
upload even for the Ethernet host due to the huge amount of seeds, as the content
is quite popular 2. We conclude that the small uplink capacity of the WiMAX
networks along with the small percentage of leechers in the “popular” swarm
relieves the WiMAX hosts of uploading the chunks.
1
0.8
F
D
C
0.6
0.4
0.2
0
0.001
1
1
0.8
F
D
C
0.6
0.4
0.2
0
0.001
Ethernet
Stationary
Subway
Bus
0.01
0.1
Individual Upload Session
Ethernet
Stationary
Subway
Bus
0.01
0.1
Aggregated Upload Session
1
F
D
C
1
0.8
0.6
0.4
0.2
0
100
Ethernet
Stationary
Subway
Bus
101
Individual Upload Traffic (bytes)
102
103
104
F
D
C
1
0.8
0.6
0.4
0.2
0
100
Ethernet
Stationary
Subway
Bus
101
Aggregated Upload Traffic (bytes)
102
103
104
(a) Individual US
(b) Aggregated US
(c) Individual UT
(d) Aggregated UT
Fig. 6. Upload Stability and Traﬃc
2 As we measured, about 90% of peers are seeds.
192
X. Wang et al.
5 Protocol Control Behaviors
In this section, we evaluate the message exchange time of each BitTorrent control
message, which means one RTT and the potential processing delay. We classify
BitTorrent control packets [13] and then average their RTTs, as shown in Fig.
7. We observe that all control message exchanges in WiMAX cases take longer
times than the Ethernet case. Thus, BitTorrent in WiMAX environments may
not be able to adapt to the link dynamics timely. We also plot how long it
takes to perform TCP connection setup (3-way handshake), TCP retransmission
(reTX), and TCP close (2 RTTs), all of which are triggered by a host (not from
a remote peer). Especially, TCP retransmissions take much longer time because
they occur mostly when the link quality is not good. Consequently, large RTTs
of WiMAX networks, along with TCP retransmissions, will increase the control
signaling between BitTorrent peers signiﬁcantly. How to optimize and revamp
control signaling is crucial for BitTorrent performance in mobile environments.
Fig. 7. The RTT of each BitTorrent control message exchange (Intrs., Not intrs., and
BT HS stand for Interest, Not interest, and BitTorrent handshake, respectively.)
HS
setup
TX
TCP close
6 Conclusion
We comprehensively measured and analyzed the BitTorrent performance of a
host in the commercial mobile WiMAX network. Based on the empirical mea-
surements, we reach the following conclusions: (1) the wireless links in mobile
WiMAX networks are quite unstable due to the ﬂuctuation of signal strengths
and handovers. Thus connections amongst peers are often in poor conditions
and sometimes broken depending on mobility; (2) the poor link condition de-
grades download performance since TCP reduces its congestion window for
packet losses; (3) handovers often terminate peer connectivity and slow down
the TCP transmissions, which may not be recovered eﬃciently; (4) due to the
large delay with remote peers, the control message exchanges take noticeable
time; (5) WiMAX hosts suﬀer from frequent disconnections, short download ses-
sions, small download throughput, and negligible upload contributions. Overall,
the current BitTorrent protocols cannot adapt to the mobile WiMAX environ-
ments well. How to adjust BitTorrent protocols in mobile environments or even
to create new protocols will be our future work.
Unveiling the BitTorrent Performance in Mobile WiMAX Networks
193
Acknowledgment
This publication is partially based on work performed in the framework of the
Project COAST-ICT-248036, which is supported by the European Community.
The research is also supported partly by the NAP of Korea Research Council
of Fundamental Science & Technology, and the MKE(The Ministry of Knowl-
edge Economy), Korea, under the ITRC(Information Technology Research Cen-
ter) support program supervised by the NIPA (National IT Industry Promotion
Agency)(NIPA-2010-(C1090-1011-0004)). The ICT at Seoul National University
provided research facilities for this study.
References
1. CISCO, Cisco visual networking index: Global mobile data traﬃc forecast update,
2009-2014, CISCO, Tech. Rep. (2010)
2. Kim, D., Cai, H., Na, M., Choi, S.: Performance measurement over mobile
wimax/ieee 802.16e network. In: IEEE WoWMoM (2008)
3. Woo, S., Jang, K., Kim, S., Cho, S., Lee, J., Lee, Y., Moon, S.: Best-case wibro
performance for a single ﬂow. In: ACM MobiCom Workshop, MICNET (2009)
4. Wang, X., Kim, H., Vasilakos, A.V., Kwon, T.T., Choi, Y., Choi, S., Jang, H.:
Measurement and analysis of world of warcraft in mobile wimax networks. In:
ACM NetGames (2009)
5. Han, M., Lee, Y., Moon, S., Jang, K., Lee, D.: Evaluation of voIP quality over
wiBro. In: Claypool, M., Uhlig, S. (eds.) PAM 2008. LNCS, vol. 4979, pp. 51–60.
Springer, Heidelberg (2008)
6. Huang, C.M., Hsu, T.H., Hsu, M.F.: Network-aware P2P ﬁle sharing over the
wireless mobile networks. In: IEEE JSAC, vol. 25 (2007)
7. Wu, H., Shi, C., Chen, H., Zhou, X., Gao, C.: An architecture for mobile P2P ﬁle
sharing in marine domain. In: IEEE PerCOM (2008)
8. Hsieh, H., Sivakumar, R.: On Using Peer-to-peer Communication in Cellular Wire-
less Data Networks. IEEE Transaction on Mobile Computing 3(1) (2004)
9. Kim, S., Wang, X., Kim, H., Kwon, T.T., Choi, Y.: Measurement and Analysis of
BitTorrent Traﬃc in Mobile WiMAX. In: IEEE P2P (2010)
10. KT WiBro, http://www.ktwibro.com/
11. Vuze, http://www.vuze.com/
12. XRONet Corp., http://www.xronet.co.kr/product/product_xro7000.php
13. BitTorrent Speciﬁcation, http://www.bittorrent.org/beps/bep_0003.html