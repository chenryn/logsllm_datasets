# 15 \| 浮点数和定点数（上）：怎么用有限的Bit表示尽可能多的信息？在我们日常的程序开发中，不只会用到整数。更多情况下，我们用到的都是实数。比如，我们开发一个电商App，商品的价格常常会是 9 块9；再比如，现在流行的深度学习算法，对应的机器学习里的模型里的各个权重也都是1.23这样的数。可以说，在实际的应用过程中，这些有零有整的实数，是和整数同样常用的数据类型，我们也需要考虑到。
## 浮点数的不精确性那么，我们能不能用二进制表示所有的实数，然后在二进制下计算它的加减乘除呢？先不着急，我们从一个有意思的小案例来看。你可以在 Linux 下打开 Python 的命令行 Console，也可以在 Chrome浏览器里面通过开发者工具，打开浏览器里的 Console，在里面输入"0.3 +0.6"，然后看看你会得到一个什么样的结果。    >>> 0.3 + 0.60.8999999999999999不知道你有没有大吃一惊，这么简单的一个加法，无论是在 Python 还是在JavaScript 里面，算出来的结果居然不是准确的 0.9，而是 0.8999999999999999这么个结果。这是为什么呢？在回答为什么之前，我们先来想一个更抽象的问题。通过前面的这么多讲，你应该知道我们现在用的计算机通常用16/32 个比特（bit）来表示一个数。那我问你，我们用 32个比特，能够表示所有实数吗？``{=html}答案很显然是不能。32 个比特，只能表示 2 的 32 次方个不同的数，差不多是40亿个。如果表示的数要超过这个数，就会有两个不同的数的二进制表示是一样的。那计算机可就会一筹莫展，不知道这个数到底是多少。40亿个数看似已经很多了，但是比起无限多的实数集合却只是沧海一粟。所以，这个时候，计算机的设计者们，就要面临一个问题了：我到底应该让这40 亿个数映射到实数集合上的哪些数，在实际应用中才能最划得来呢？
## 定点数的表示有一个很直观的想法，就是我们用 4 个比特来表示 0～9 的整数，那么 32个比特就可以表示 8 个这样的整数。然后我们把最右边的 2 个 0～9的整数，当成小数部分；把左边 6 个 0～9的整数，当成整数部分。这样，我们就可以用 32 个比特，来表示从 0 到999999.99 这样 1 亿个实数了。![](Images/1b1a3af203756c4a9d285d2ce70f9276.png){savepage-src="https://static001.geekbang.org/resource/image/f5/b3/f5a0b0f2188ebe0d18f4424578a588b3.jpg"}这种用二进制来表示十进制的编码方式，叫作[**BCD编码**](https://zh.wikipedia.org/wiki/%E4%BA%8C%E9%80%B2%E7%A2%BC%E5%8D%81%E9%80%B2%E6%95%B8)（Binary-CodedDecimal）。其实它的运用非常广泛，最常用的是在超市、银行这样需要用小数记录金额的情况里。在超市里面，我们的小数最多也就到分。这样的表示方式，比较直观清楚，也满足了小数部分的计算。不过，这样的表示方式也有几个缺点。**第一，这样的表示方式有点"浪费"。**本来 32 个比特我们可以表示 40亿个不同的数，但是在 BCD 编码下，只能表示 1亿个数，如果我们要精确到分的话，那么能够表示的最大金额也就是到 100万。如果我们的货币单位是人民币或者美元还好，如果我们的货币单位变成了津巴布韦币，这个数量就不太够用了。**第二，这样的表示方式没办法同时表示很大的数字和很小的数字。**我们在写程序的时候，实数的用途可能是多种多样的。有时候我们想要表示商品的金额，关心的是9.99这样小的数字；有时候，我们又要进行物理学的运算，需要表示光速，也就是]{.MathJax_Previewstyle="color: inherit; display: none;"}[``{=html}[[3]{#16.html#MathJax-Span-3.mn style="font-family: MathJax_Main;"}[×]{#16.html#MathJax-Span-4 .mostyle="font-family: MathJax_Main; padding-left: 0.238em;"}[10]{#16.html#MathJax-Span-6.mnstyle="font-family: MathJax_Main;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.202em, 1000.94em, 4.144em, -999.998em); top: -3.998em; left: 0em;"}[[8]{#16.html#MathJax-Span-7.mnstyle="font-size: 70.7%; font-family: MathJax_Main;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; top: -4.374em; left: 0.991em;"}]{style="display: inline-block; position: relative; width: 1.414em; height: 0px;"}]{#16.html#MathJax-Span-5.msubsup style="padding-left: 0.238em;"}]{#16.html#MathJax-Span-2.mrow}[]{style="display: inline-block; width: 0px; height: 2.355em;"}]{style="position: absolute; clip: rect(1.367em, 1003.15em, 2.496em, -999.998em); top: -2.351em; left: 0em;"}]{style="display: inline-block; position: relative; width: 3.155em; height: 0px; font-size: 125%;"}[]{style="display: inline-block; overflow: hidden; vertical-align: -0.056em; border-left: 0px solid; width: 0px; height: 1.238em;"}]{#16.html#MathJax-Span-1.mathstyle="width: 3.955em; display: inline-block;"}``{=html}[$3 \times 10^{8}$]{.MJX_Assistive_MathMLrole="presentation"}]{#16.html#MathJax-Element-1-Frame .MathJaxtabindex="0" style="position: relative;"mathml="3×108"role="presentation"}$$这样很大的数字。那么，我们有没有一个办法，既能够表示很小的数，又能表示很大的数呢？
## 浮点数的表示答案当然是有的，就是你可能经常听说过的**浮点数**（FloatingPoint），也就是**float 类型**。我们先来想一想。如果我们想在一张便签纸上，用一行来写一个十进制数，能够写下多大范围的数？因为我们要让人能够看清楚，所以字最小也有一个限制。你会发现一个和上面我们用BCD编码表示数一样的问题，就是纸张的宽度限制了我们能够表示的数的大小。如果宽度只放得下8 个数字，那么我们还是只能写下最大到 99999999 这样的数字。![](Images/a761cc7b71e1469e41db09610dbd2534.png){savepage-src="https://static001.geekbang.org/resource/image/c3/56/c321a0b9d95ba475439f9fbdff07bf56.png"}```{=html}```有限宽度的便签，只能写下有限大小的数字]{.reference}```{=html}```其实，这里的纸张宽度，就和我们 32个比特一样，是在空间层面的限制。那么，在现实生活中，我们是怎么表示一个很大的数的呢？比如说，我们想要在一本科普书里，写一下宇宙内原子的数量，莫非是用一页纸，用好多行写下很多个0 么？当然不是了，我们会用科学计数法来表示这个数字。宇宙内的原子的数量，大概在10 的 82 次方左右，我们就用 []{.MathJax_Previewstyle="color: inherit; display: none;"}[``{=html}[[1.0]{#16.html#MathJax-Span-10.mn style="font-family: MathJax_Main;"}[×]{#16.html#MathJax-Span-11 .mostyle="font-family: MathJax_Main; padding-left: 0.238em;"}[10]{#16.html#MathJax-Span-13.mnstyle="font-family: MathJax_Main;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.202em, 1000.94em, 4.144em, -999.998em); top: -3.998em; left: 0em;"}[[8]{#16.html#MathJax-Span-14.mnstyle="font-size: 70.7%; font-family: MathJax_Main;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; top: -4.374em; left: 0.991em;"}]{style="display: inline-block; position: relative; width: 1.414em; height: 0px;"}]{#16.html#MathJax-Span-12.msubsup style="padding-left: 0.238em;"}[2]{#16.html#MathJax-Span-15 .mnstyle="font-family: MathJax_Main;"}]{#16.html#MathJax-Span-9.mrow}[]{style="display: inline-block; width: 0px; height: 2.355em;"}]{style="position: absolute; clip: rect(1.367em, 1004.43em, 2.496em, -999.998em); top: -2.351em; left: 0em;"}]{style="display: inline-block; position: relative; width: 4.473em; height: 0px; font-size: 125%;"}[]{style="display: inline-block; overflow: hidden; vertical-align: -0.056em; border-left: 0px solid; width: 0px; height: 1.238em;"}]{#16.html#MathJax-Span-8.mathstyle="width: 5.602em; display: inline-block;"}``{=html}[$1.0 \times 10^{8}2$]{.MJX_Assistive_MathMLrole="presentation"}]{#16.html#MathJax-Element-2-Frame .MathJaxtabindex="0" style="position: relative;"mathml="1.0×1082"role="presentation"}$$ 这样的形式来表示这个数值，不需要写下 82 个 0。在计算机里，我们也可以用一样的办法，用科学计数法来表示实数。浮点数的科学计数法的表示，有一个**IEEE**的标准，它定义了两个基本的格式。一个是用32 比特表示单精度的浮点数，也就是我们常常说的 float 或者 float32类型。另外一个是用 64 比特表示双精度的浮点数，也就是我们平时说的 double或者 float64 类型。双精度类型和单精度类型差不多，这里，我们来看单精度类型，双精度你自然也就明白了。![](Images/6f141dad274365e5b6f9d44a29efa48f.png){savepage-src="https://static001.geekbang.org/resource/image/91/41/914b71bf1d85fb6ed76e1135f39b6941.jpg"}单精度的 32 个比特可以分成三部分。第一部分是一个**符号位**，用来表示是正数还是负数。我们一般用**s**来表示。在浮点数里，我们不像正数分符号数还是无符号数，所有的浮点数都是有符号的。接下来是一个 8 个比特组成的**指数位**。我们一般用**e**来表示。8个比特能够表示的整数空间，就是 0～255。我们在这里用 1～254 映射到-126～127 这 254个有正有负的数上。因为我们的浮点数，不仅仅想要表示很大的数，还希望能够表示很小的数，所以指数位也会有负数。你发现没，我们没有用到 0 和 255。没错，这里的 0（也就是 8 个比特全部为0） 和 255 （也就是 8 个比特全部为 1）另有它用，我们等一下再讲。最后，是一个 23个比特组成的**有效数位**。我们用**f**来表示。综合科学计数法，我们的浮点数就可以表示成下面这样：]{.MathJax_Previewstyle="color: inherit; display: none;"}[``{=html}[[(]{#16.html#MathJax-Span-18.mo style="font-family: MathJax_Main;"}[−]{#16.html#MathJax-Span-19 .mostyle="font-family: MathJax_Main;"}[1]{#16.html#MathJax-Span-20 .mnstyle="font-family: MathJax_Main;"}[)]{#16.html#MathJax-Span-22 .mostyle="font-family: MathJax_Main;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.108em, 1000.28em, 4.379em, -999.998em); top: -3.998em; left: 0em;"}[[s]{#16.html#MathJax-Span-23.mistyle="font-size: 70.7%; font-family: MathJax_Math-italic;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; top: -4.374em; left: 0.379em;"}]{style="display: inline-block; position: relative; width: 0.802em; height: 0px;"}]{#16.html#MathJax-Span-21.msubsup}[×]{#16.html#MathJax-Span-24 .mostyle="font-family: MathJax_Main; padding-left: 0.238em;"}[1.]{#16.html#MathJax-Span-25.mnstyle="font-family: MathJax_Main; padding-left: 0.238em;"}[f[]{style="display: inline-block; overflow: hidden; height: 1px; width: 0.049em;"}]{#16.html#MathJax-Span-26.mistyle="font-family: MathJax_Math-italic;"}[×]{#16.html#MathJax-Span-27.mostyle="font-family: MathJax_Main; padding-left: 0.238em;"}[2]{#16.html#MathJax-Span-29.mnstyle="font-family: MathJax_Main;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.202em, 1000.47em, 4.144em, -999.998em); top: -3.998em; left: 0em;"}[[e]{#16.html#MathJax-Span-30.mistyle="font-size: 70.7%; font-family: MathJax_Math-italic;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; top: -4.374em; left: 0.52em;"}]{style="display: inline-block; position: relative; width: 0.896em; height: 0px;"}]{#16.html#MathJax-Span-28.msubsup style="padding-left: 0.238em;"}]{#16.html#MathJax-Span-17.mrow}[]{style="display: inline-block; width: 0px; height: 2.355em;"}]{style="position: absolute; clip: rect(1.461em, 1007.2em, 2.732em, -999.998em); top: -2.351em; left: 0em;"}]{style="display: inline-block; position: relative; width: 7.202em; height: 0px; font-size: 125%;"}[]{style="display: inline-block; overflow: hidden; vertical-align: -0.35em; border-left: 0px solid; width: 0px; height: 1.356em;"}]{#16.html#MathJax-Span-16.mathstyle="width: 9.038em; display: inline-block;"}``{=html}[$( - 1)^{s} \times 1.f \times 2^{e}$]{.MJX_Assistive_MathMLrole="presentation"}]{#16.html#MathJax-Element-3-Frame .MathJaxtabindex="0" style="position: relative;"mathml="(−1)s×1.f×2e"role="presentation"}$$你会发现，这里的浮点数，没有办法表示 0。的确，要表示 0和一些特殊的数，我们就要用上在 e 里面留下的 0 和 255这两个表示，这两个表示其实是两个标记位。在 e 为 0 且 f 为 0的时候，我们就把这个浮点数认为是 0。至于其它的 e 是 0 或者 255的特殊情况，你可以看下面这个表格，分别可以表示出无穷大、无穷小、NAN以及一个特殊的不规范数。![](Images/bf9b7697caf1095b09a32887193b0f07.png){savepage-src="https://static001.geekbang.org/resource/image/f9/4c/f922249a89667c4d10239eb8840dc94c.jpg"}我们可以以 0.5 为例子。0.5 的符号为 s 应该是 0，f 应该是 0，而 e 应该是-1，也就是]{.MathJax_Previewstyle="color: inherit; display: none;"}[``{=html}[[0.5]{#16.html#MathJax-Span-33.mn style="font-family: MathJax_Main;"}[=]{#16.html#MathJax-Span-34 .mostyle="font-family: MathJax_Main; padding-left: 0.285em;"}[(]{#16.html#MathJax-Span-35.mostyle="font-family: MathJax_Main; padding-left: 0.285em;"}[−]{#16.html#MathJax-Span-36.mo style="font-family: MathJax_Main;"}[1]{#16.html#MathJax-Span-37 .mnstyle="font-family: MathJax_Main;"}[)]{#16.html#MathJax-Span-39 .mostyle="font-family: MathJax_Main;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.108em, 1000.28em, 4.379em, -999.998em); top: -3.998em; left: 0em;"}[[0]{#16.html#MathJax-Span-40.mnstyle="font-size: 70.7%; font-family: MathJax_Main;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; top: -4.374em; left: 0.379em;"}]{style="display: inline-block; position: relative; width: 0.802em; height: 0px;"}]{#16.html#MathJax-Span-38.msubsup}[×]{#16.html#MathJax-Span-41 .mostyle="font-family: MathJax_Main; padding-left: 0.238em;"}[1.0]{#16.html#MathJax-Span-42.mnstyle="font-family: MathJax_Main; padding-left: 0.238em;"}[×]{#16.html#MathJax-Span-43.mostyle="font-family: MathJax_Main; padding-left: 0.238em;"}[2]{#16.html#MathJax-Span-45.mnstyle="font-family: MathJax_Main;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.202em, 1000.47em, 4.144em, -999.998em); top: -3.998em; left: 0em;"}[−]{#16.html#MathJax-Span-48.mostyle="font-size: 70.7%; font-family: MathJax_Main;"}[1]{#16.html#MathJax-Span-49.mnstyle="font-size: 70.7%; font-family: MathJax_Main;"}]{#16.html#MathJax-Span-47.mrow}]{#16.html#MathJax-Span-46.texatom}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; top: -4.374em; left: 0.52em;"}]{style="display: inline-block; position: relative; width: 1.461em; height: 0px;"}]{#16.html#MathJax-Span-44.msubsup style="padding-left: 0.238em;"}[=]{#16.html#MathJax-Span-50 .mostyle="font-family: MathJax_Main; padding-left: 0.285em;"}[0.5]{#16.html#MathJax-Span-51.mnstyle="font-family: MathJax_Main; padding-left: 0.285em;"}]{#16.html#MathJax-Span-32.mrow}[]{style="display: inline-block; width: 0px; height: 2.355em;"}]{style="position: absolute; clip: rect(1.367em, 1012.9em, 2.732em, -999.998em); top: -2.351em; left: 0em;"}]{style="display: inline-block; position: relative; width: 12.944em; height: 0px; font-size: 125%;"}[]{style="display: inline-block; overflow: hidden; vertical-align: -0.35em; border-left: 0px solid; width: 0px; height: 1.532em;"}]{#16.html#MathJax-Span-31.mathstyle="width: 16.191em; display: inline-block;"}``{=html}[$0.5 = ( - 1)^{0} \times 1.0 \times 2^{- 1} = 0.5$]{.MJX_Assistive_MathMLrole="presentation"}]{#16.html#MathJax-Element-4-Frame .MathJaxtabindex="0" style="position: relative;"mathml="0.5=(−1)0×1.0×2−1=0.5"role="presentation"}$$，对应的浮点数表示，就是 32 个比特。![](Images/8b11e43d3dc9c3cf54d3a133badc7c57.png){savepage-src="https://static001.geekbang.org/resource/image/51/50/5168fce3f313f4fc0b600ce5d1805c50.jpeg"}]{.MathJax_Previewstyle="color: inherit; display: none;"}[``{=html}[[s]{#16.html#MathJax-Span-54.mistyle="font-family: MathJax_Math-italic;"}[=]{#16.html#MathJax-Span-55.mostyle="font-family: MathJax_Main; padding-left: 0.285em;"}[0]{#16.html#MathJax-Span-56.mnstyle="font-family: MathJax_Main; padding-left: 0.285em;"}[，]{style="font-family: STIXGeneral, \"Arial Unicode MS\", serif; font-size: 80%; font-style: normal; font-weight: normal;"}]{#16.html#MathJax-Span-59.mo}]{#16.html#MathJax-Span-58 .mrow}]{#16.html#MathJax-Span-57.texatom}[e]{#16.html#MathJax-Span-60 .mistyle="font-family: MathJax_Math-italic;"}[=]{#16.html#MathJax-Span-61.mostyle="font-family: MathJax_Main; padding-left: 0.285em;"}[2]{#16.html#MathJax-Span-63.mnstyle="font-family: MathJax_Main;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.202em, 1000.47em, 4.144em, -999.998em); top: -3.998em; left: 0em;"}[−]{#16.html#MathJax-Span-66.mostyle="font-size: 70.7%; font-family: MathJax_Main;"}[1]{#16.html#MathJax-Span-67.mnstyle="font-size: 70.7%; font-family: MathJax_Main;"}]{#16.html#MathJax-Span-65.mrow}]{#16.html#MathJax-Span-64.texatom}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; top: -4.374em; left: 0.52em;"}]{style="display: inline-block; position: relative; width: 1.461em; height: 0px;"}]{#16.html#MathJax-Span-62.msubsup style="padding-left: 0.285em;"}]{#16.html#MathJax-Span-53.mrow}[]{style="display: inline-block; width: 0px; height: 2.355em;"}]{style="position: absolute; clip: rect(1.367em, 1006.4em, 2.685em, -999.998em); top: -2.351em; left: 0em;"}]{style="display: inline-block; position: relative; width: 6.402em; height: 0px; font-size: 125%;"}[]{style="display: inline-block; overflow: hidden; vertical-align: -0.291em; border-left: 0px solid; width: 0px; height: 1.474em;"}]{#16.html#MathJax-Span-52.mathstyle="width: 8.002em; display: inline-block;"}``{=html}[$s = 0，e = 2^{- 1}$]{.MJX_Assistive_MathMLrole="presentation"}]{#16.html#MathJax-Element-5-Frame .MathJaxtabindex="0" style="position: relative;"mathml="s=0，e=2−1"role="presentation"}$$，需要注意，e 表示从 -126 到 127 个，-1 是其中的第126 个数，这里的 e 如果用整数表示，就是 []{.MathJax_Previewstyle="color: inherit; display: none;"}[``{=html}[[[[[2]{#16.html#MathJax-Span-71.mnstyle="font-family: MathJax_Main;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.202em, 1000.47em, 4.144em, -999.998em); top: -3.998em; left: 0em;"}[[6]{#16.html#MathJax-Span-72.mnstyle="font-size: 70.7%; font-family: MathJax_Main;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; top: -4.374em; left: 0.52em;"}]{style="display: inline-block; position: relative; width: 0.944em; height: 0px;"}]{#16.html#MathJax-Span-70.msubsup}[+]{#16.html#MathJax-Span-73 .mostyle="font-family: MathJax_Main; padding-left: 0.238em;"}[2]{#16.html#MathJax-Span-75.mnstyle="font-family: MathJax_Main;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.202em, 1000.47em, 4.144em, -999.998em); top: -3.998em; left: 0em;"}[[5]{#16.html#MathJax-Span-76.mnstyle="font-size: 70.7%; font-family: MathJax_Main;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; top: -4.374em; left: 0.52em;"}]{style="display: inline-block; position: relative; width: 0.944em; height: 0px;"}]{#16.html#MathJax-Span-74.msubsup style="padding-left: 0.238em;"}[+]{#16.html#MathJax-Span-77 .mostyle="font-family: MathJax_Main; padding-left: 0.238em;"}[2]{#16.html#MathJax-Span-79.mnstyle="font-family: MathJax_Main;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.202em, 1000.47em, 4.144em, -999.998em); top: -3.998em; left: 0em;"}[[4]{#16.html#MathJax-Span-80.mnstyle="font-size: 70.7%; font-family: MathJax_Main;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; top: -4.374em; left: 0.52em;"}]{style="display: inline-block; position: relative; width: 0.944em; height: 0px;"}]{#16.html#MathJax-Span-78.msubsup style="padding-left: 0.238em;"}[+]{#16.html#MathJax-Span-81 .mostyle="font-family: MathJax_Main; padding-left: 0.238em;"}[2]{#16.html#MathJax-Span-83.mnstyle="font-family: MathJax_Main;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.202em, 1000.47em, 4.144em, -999.998em); top: -3.998em; left: 0em;"}[[3]{#16.html#MathJax-Span-84.mnstyle="font-size: 70.7%; font-family: MathJax_Main;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; top: -4.374em; left: 0.52em;"}]{style="display: inline-block; position: relative; width: 0.944em; height: 0px;"}]{#16.html#MathJax-Span-82.msubsup style="padding-left: 0.238em;"}[+]{#16.html#MathJax-Span-85 .mostyle="font-family: MathJax_Main; padding-left: 0.238em;"}[2]{#16.html#MathJax-Span-87.mnstyle="font-family: MathJax_Main;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.202em, 1000.47em, 4.144em, -999.998em); top: -3.998em; left: 0em;"}[[2]{#16.html#MathJax-Span-88.mnstyle="font-size: 70.7%; font-family: MathJax_Main;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; top: -4.374em; left: 0.52em;"}]{style="display: inline-block; position: relative; width: 0.944em; height: 0px;"}]{#16.html#MathJax-Span-86.msubsup style="padding-left: 0.238em;"}[+]{#16.html#MathJax-Span-89 .mostyle="font-family: MathJax_Main; padding-left: 0.238em;"}[2]{#16.html#MathJax-Span-91.mnstyle="font-family: MathJax_Main;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.202em, 1000.47em, 4.144em, -999.998em); top: -3.998em; left: 0em;"}[[1]{#16.html#MathJax-Span-92.mnstyle="font-size: 70.7%; font-family: MathJax_Main;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; top: -4.374em; left: 0.52em;"}]{style="display: inline-block; position: relative; width: 0.944em; height: 0px;"}]{#16.html#MathJax-Span-90.msubsup style="padding-left: 0.238em;"}[=]{#16.html#MathJax-Span-93 .mostyle="font-family: MathJax_Main; padding-left: 0.285em;"}[126]{#16.html#MathJax-Span-94.mnstyle="font-family: MathJax_Main; padding-left: 0.285em;"}]{#16.html#MathJax-Span-69.mrow}[]{style="display: inline-block; width: 0px; height: 2.355em;"}]{style="position: absolute; clip: rect(1.32em, 1014.73em, 2.591em, -999.998em); top: -2.351em; left: 0em;"}]{style="display: inline-block; position: relative; width: 14.779em; height: 0px; font-size: 125%;"}[]{style="display: inline-block; overflow: hidden; vertical-align: -0.174em; border-left: 0px solid; width: 0px; height: 1.297em;"}]{#16.html#MathJax-Span-68.mathstyle="width: 18.496em; display: inline-block;"}``{=html}[$2^{6} + 2^{5} + 2^{4} + 2^{3} + 2^{2} + 2^{1} = 126$]{.MJX_Assistive_MathMLrole="presentation"}]{#16.html#MathJax-Element-6-Frame .MathJaxtabindex="0" style="position: relative;"mathml="26+25+24+23+22+21=126"role="presentation"}$$，[]{.MathJax_Previewstyle="color: inherit; display: none;"}[``{=html}[[1.]{#16.html#MathJax-Span-97.mnstyle="font-family: MathJax_Main;"}[f[]{style="display: inline-block; overflow: hidden; height: 1px; width: 0.049em;"}]{#16.html#MathJax-Span-98.mistyle="font-family: MathJax_Math-italic;"}[=]{#16.html#MathJax-Span-99.mostyle="font-family: MathJax_Main; padding-left: 0.285em;"}[1.0]{#16.html#MathJax-Span-100.mnstyle="font-family: MathJax_Main; padding-left: 0.285em;"}]{#16.html#MathJax-Span-96.mrow}[]{style="display: inline-block; width: 0px; height: 2.355em;"}]{style="position: absolute; clip: rect(1.508em, 1003.91em, 2.685em, -999.998em); top: -2.351em; left: 0em;"}]{style="display: inline-block; position: relative; width: 3.955em; height: 0px; font-size: 125%;"}[]{style="display: inline-block; overflow: hidden; vertical-align: -0.291em; border-left: 0px solid; width: 0px; height: 1.238em;"}]{#16.html#MathJax-Span-95.mathstyle="width: 4.944em; display: inline-block;"}``{=html}[$1.f = 1.0$]{.MJX_Assistive_MathMLrole="presentation"}]{#16.html#MathJax-Element-7-Frame .MathJaxtabindex="0" style="position: relative;"mathml="1.f=1.0"role="presentation"}$$。在这样的浮点数表示下，不考虑符号的话，浮点数能够表示的最小的数和最大的数，差不多是]{.MathJax_Previewstyle="color: inherit; display: none;"}[``{=html}[[1.17]{#16.html#MathJax-Span-103.mn style="font-family: MathJax_Main;"}[×]{#16.html#MathJax-Span-104 .mostyle="font-family: MathJax_Main; padding-left: 0.238em;"}[10]{#16.html#MathJax-Span-106.mnstyle="font-family: MathJax_Main;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.202em, 1000.94em, 4.144em, -999.998em); top: -3.998em; left: 0em;"}[−]{#16.html#MathJax-Span-109.mostyle="font-size: 70.7%; font-family: MathJax_Main;"}[38]{#16.html#MathJax-Span-110.mnstyle="font-size: 70.7%; font-family: MathJax_Main;"}]{#16.html#MathJax-Span-108.mrow}]{#16.html#MathJax-Span-107.texatom}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; top: -4.374em; left: 0.991em;"}]{style="display: inline-block; position: relative; width: 2.355em; height: 0px;"}]{#16.html#MathJax-Span-105.msubsup style="padding-left: 0.238em;"}]{#16.html#MathJax-Span-102.mrow}[]{style="display: inline-block; width: 0px; height: 2.355em;"}]{style="position: absolute; clip: rect(1.367em, 1005.41em, 2.496em, -999.998em); top: -2.351em; left: 0em;"}]{style="display: inline-block; position: relative; width: 5.414em; height: 0px; font-size: 125%;"}[]{style="display: inline-block; overflow: hidden; vertical-align: -0.056em; border-left: 0px solid; width: 0px; height: 1.238em;"}]{#16.html#MathJax-Span-101.mathstyle="width: 6.779em; display: inline-block;"}``{=html}[$1.17 \times 10^{- 38}$]{.MJX_Assistive_MathMLrole="presentation"}]{#16.html#MathJax-Element-8-Frame .MathJaxtabindex="0" style="position: relative;"mathml="1.17×10−38"role="presentation"}$$ 和 []{.MathJax_Previewstyle="color: inherit; display: none;"}[``{=html}[[3.40]{#16.html#MathJax-Span-113.mn style="font-family: MathJax_Main;"}[×]{#16.html#MathJax-Span-114 .mostyle="font-family: MathJax_Main; padding-left: 0.238em;"}[10]{#16.html#MathJax-Span-116.mnstyle="font-family: MathJax_Main;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.202em, 1000.94em, 4.144em, -999.998em); top: -3.998em; left: 0em;"}[38]{#16.html#MathJax-Span-119.mnstyle="font-size: 70.7%; font-family: MathJax_Main;"}]{#16.html#MathJax-Span-118.mrow}]{#16.html#MathJax-Span-117.texatom}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; top: -4.374em; left: 0.991em;"}]{style="display: inline-block; position: relative; width: 1.791em; height: 0px;"}]{#16.html#MathJax-Span-115.msubsup style="padding-left: 0.238em;"}]{#16.html#MathJax-Span-112.mrow}[]{style="display: inline-block; width: 0px; height: 2.355em;"}]{style="position: absolute; clip: rect(1.367em, 1004.85em, 2.496em, -999.998em); top: -2.351em; left: 0em;"}]{style="display: inline-block; position: relative; width: 4.849em; height: 0px; font-size: 125%;"}[]{style="display: inline-block; overflow: hidden; vertical-align: -0.056em; border-left: 0px solid; width: 0px; height: 1.238em;"}]{#16.html#MathJax-Span-111.mathstyle="width: 6.073em; display: inline-block;"}``{=html}[$3.40 \times 10^{38}$]{.MJX_Assistive_MathMLrole="presentation"}]{#16.html#MathJax-Element-9-Frame .MathJaxtabindex="0" style="position: relative;"mathml="3.40×1038"role="presentation"}$$。比前面的 BCD 编码能够表示的范围大多了。
## 总结延伸你会看到，在这样的表示方式下，浮点数能够表示的数据范围一下子大了很多。正是因为这个数对应的小数点的位置是"浮动"的，它才被称为浮点数。随着指数位e 的值的不同，小数点的位置也在变动。对应的，前面的 BCD编码的实数，就是小数点固定在某一位的方式，我们也就把它称为**定点数**。回到我们最开头，为什么我们用 0.3 + 0.6 不能得到 0.9呢？这是因为，浮点数没有办法精确表示 0.3、0.6 和 0.9。事实上，我们拿出0.1～0.9 这 9 个数，其中只有 0.5能够被精确地表示成二进制的浮点数，也就是 s = 0、e = -1、f = 0这样的情况。而 0.3、0.6 乃至我们希望的0.9，都只是一个近似的表达。这个也为我们带来了一个挑战，就是浮点数无论是表示还是计算其实都是近似计算。那么，在使用过程中，我们该怎么来使用浮点数，以及使用浮点数会遇到些什么问题呢？下一讲，我会用更多的实际代码案例，来带你看看浮点数计算中的各种"坑"。
## 推荐阅读如果对浮点数的表示还不是很清楚，你可以仔细阅读一下《计算机组成与设计：硬件/ 软件接口》的 3.5.1 节。