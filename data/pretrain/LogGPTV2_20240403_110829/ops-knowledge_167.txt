User: Please implement a network monitoring tool that can monitor multiple hosts and provide real-time alarm functions.
Assistant: The following is a simple Python code implementation: 1. A function to monitor a single host: ```python import subprocess def ping(host): res = subprocess.call(['ping', '-c', '3', host ]) return res == 0 ``` This function uses the `subprocess` library to execute the system command `ping`, and checks the return value to determine whether the host is online. 2. Function to monitor multiple hosts: ```python import time def watch(hosts, interval=60): while True: for host in hosts: if not ping(host): print(f"{host} is down! ") time.sleep(interval) ``` This function accepts a list of hosts and a monitoring interval, and continuously checks the online status of each host in a loop. 3. Real-time alarm function: ```python import smtplib from email.mime.text import MIMEText def alert(sender, receiver, subject, content): # Mailbox configuration information smtp_server = "smtp.163.com" smtp_port = 25 username = "yourusername" password = "yourpassword" #Construct mail message message = MIMEText(content, "plain", "utf-8") message['From'] = sender message['To'] = receiver message['Subject'] = subject # send mail try: smtp = smtplib.SMTP(smtp_server, smtp_port) smtp.login(username, password) smtp.sendmail(sender, receiver, message.as_string()) smtp.quit() print("Alert sent! ") except Exception as e: print(f"Failed to send alert: {e}") ``` This function uses the `smtplib` library to send email alerts. You can configure email information according to actual needs. Finally, a simple network monitoring tool can be implemented by combining these three functions: ```python hosts = ['192.168.0.1', '192.168.0.2', '192.168.0.3'] sender = "youremail@ 163.com" receiver = "admin@example.com" interval = 60 # The monitoring interval is 60 seconds while True: for host in hosts: if not ping(host): content = f"Host {host} is down!" alert (sender, receiver, "Network Alert", content) time.sleep(interval) ``` This code will constantly check the online status of the three hosts, and send an email alert to the administrator when a host is offline.