Mac OS X Server
Mail Service
Administration
For Version 10.3 or Later
034-2349_Cvr  9/12/03  7:28 AM  Page 1
K
Apple Computer, Inc.
© 2003 Apple Computer, Inc. All rights reserved. 
The owner or authorized user of a valid copy of 
Mac OS X Server software may reproduce this 
publication for the purpose of learning to use such 
software. No part of this publication may be reproduced 
or transmitted for commercial purposes, such as selling 
copies of this publication or for providing paid for 
support services.
The Apple logo is a trademark of Apple Computer, Inc., 
registered in the U.S. and other countries. Use of the 
“keyboard” Apple logo (Option-Shift-K) for commercial 
purposes without the prior written consent of Apple 
may constitute trademark infringement and unfair 
competition in violation of federal and state laws. 
Apple, the Apple logo, AppleScript, AppleShare, 
AppleTalk, ColorSync, FireWire, Keychain, Mac, 
Macintosh, Power Macintosh, QuickTime, Sherlock, and 
WebObjects are trademarks of Apple Computer, Inc., 
registered in the U.S. and other countries. AirPort, 
Extensions Manager, Finder, iMac, and Power Mac are 
trademarks of Apple Computer, Inc. 
Adobe and PostScript are trademarks of Adobe Systems 
Incorporated.
Java and all Java-based trademarks and logos are 
trademarks or registered trademarks of Sun 
Microsystems, Inc. in the U.S. and other countries.
Netscape Navigator is a trademark of Netscape 
Communications Corporation.
RealAudio is a trademark of Progressive Networks, Inc.
1995–2001 The Apache Group. All rights reserved.
UNIX is a registered trademark in the United States and 
other countries, licensed exclusively through X/Open 
Company, Ltd. 
034-2349/8/22/03
LL2349.Book  Page 2  Friday, August 22, 2003  2:47 PM
3
1
Contents
Preface
7
How to Use This Guide
7
What’s Included in This Guide
7
Using This Guide
7
Setting Up Mac OS X Server for the First Time
8
Getting Help for Everyday Management Tasks
8
Getting Additional Information
Chapter 1
9
Mail Service Setup
10
Mail Service Protocols
10
Outgoing Mail
10
Incoming Mail
11
User Interaction With Mail Service
12
Where Mail Is Stored
12
Outgoing Mail Location
12
Incoming Mail Location
12
Maximum Number of Mail Messages per Volume
13
What Mail Service Doesn’t Do
13
Using Network Services With Mail Service
14
Configuring DNS for Mail Service
14
How Mail Service Uses SSL
15
Enabling Secure Mail Transport With SSL
15
Before You Begin
15
How User Account Settings Affect Mail Service
16
Moving Mail Messages From Apple Mail Server to Mac OS X  Server Version 10.3
16
Overview of Mail Service Tools
16
Setup Overview
19
Configuring Incoming Mail Service
19
Enabling Secure POP Authentication
19
Enabling Less Secure Authentication for POP
20
Configuring SSL Transport for POP Connections
20
Enabling Secure IMAP Authentication
21
Enabling Less Secure IMAP Authentication
21
Controlling the Number of IMAP Connections
LL2349.Book  Page 3  Friday, August 22, 2003  2:47 PM
4
Contents
21
Configuring SSL Transport for IMAP Connections
22
Configuring Outgoing Mail Service
22
Enabling Secure SMTP Authentication
23
Enabling Less Secure SMTP Authentication
23
Configuring SSL Transport for SMTP Connections
24
Relaying SMTP Mail Through Another Server
24
Supporting Mail Users
24
Configuring Mail Settings for User Accounts
25
Configuring Email Client Software
26
Creating an Administration Account
26
Creating Additional Email Addresses for a User
27
Setting Up Forwarding Email Addresses for a User
28
Adding or Removing Virtual Domains
29
Limiting Junk Mail
29
Requiring SMTP Authentication
30
Restricting SMTP Relay
31
Rejecting SMTP Connections From Specific Servers
31
Rejecting Mail From Blacklisted Senders
32
Filtering SMTP Connections
Chapter 2
33
Mail Service Maintenance
33
Starting and Stopping Mail Service
34
Reloading Mail Service
34
Changing Protocol Settings for Incoming Mail Service
34
Improving Performance
35
Working With the Mail Store and Database
35
Repairing the Mail Store Database
36
Converting the Mail Store and Database From an Earlier Version
36
Using Amsmailtool
37
Specifying the Location for the Mail Database and Mail Store
37
Backing Up and Restoring Mail Messages
38
Monitoring Mail Messages and Folders
38
Allowing Administrator Access to the Mail Folders
39
Saving Mail Messages for Monitoring and Archival Purposes
39
Monitoring Mail Service
40
Viewing Overall Mail Service Activity
40
Viewing the Mail Connections List
40
Viewing Mail Accounts
40
Viewing Mail Service Logs
41
Setting Mail Service Log Detail Level
41
Archiving Mail Service Logs by Schedule
41
Reclaiming Disk Space Used by Mail Service Log archives
42
Dealing With a Full Disk
LL2349.Book  Page 4  Friday, August 22, 2003  2:47 PM
Contents
5
42
Working With Undeliverable Mail
42
Forwarding Undeliverable Incoming Mail
43
Where to Find More Information
43
Books
43
Internet
Chapter 3
45
Mailing Lists
45
Setting Up a List
45
Enabling Mailing Lists
46
Defining a List Name
46
Adding a Subscriber
47
Changing a List
47
Adding a Subscriber to an Existing List
47
Removing a List Subscriber
48
Changing Subscriber Posting Privileges
48
Suspending a Subscriber
49
Administering Lists
49
Designating a List Administrator
49
Where to Find More Information
Glossary
51
Index
55
LL2349.Book  Page 5  Friday, August 22, 2003  2:47 PM
LL2349.Book  Page 6  Friday, August 22, 2003  2:47 PM
7
Preface
How to Use This Guide
What’s Included in This Guide
This guide explains how to administer Mac OS X Server mail services.
Using This Guide
The first chapter provides an overview of how the mail service works, what it can do for 
you, strategies for using it, how to set it up for the first time, and how to administer it 
over time. 
Also take a look at any chapter that describes a service with which you’re unfamiliar. 
You may find that some of the services you haven’t used before can help you run your 
network more efficiently and improve performance for your users.
Most chapters end with a section called “Where to Find More Information.” This section 
points you to web sites and other reference material containing more information 
about the service.
Setting Up Mac OS X Server for the First Time
If you haven’t installed and set up Mac OS X Server, do so now. 
•
Refer to 
Mac OS X Server Getting Started For Version 10.3 or Later,
 the document that 
came with your software, for instructions on server installation and setup. For many 
environments, this document provides all the information you need to get your 
server up, running, and available for initial use.
•
Read specific sections to learn how to continue setting up individual features of mail 
service. Pay particular attention to the information in these sections:  “Setup 
Overview,” “Before You Begin,” and “Setting Up for the First Time.”
LL2349.Book  Page 7  Friday, August 22, 2003  2:47 PM
8
Preface
    How to Use This Guide
Getting Help for Everyday Management Tasks
If you want to change settings, monitor services, view service logs, or do any other day-
to-day administration task, you can find step-by-step procedures by using the on-
screen help available with server administration programs. While all the administration 
tasks are also documented in the second chapter of this guide, sometimes it’s more 
convenient to retrieve information in on-screen help form while using your server.
Getting Additional Information
In addition to this document, you’ll find information about Mac OS X Server in:
•
Mac OS X Server Getting Started For Version 10.3 or Later,
 which tells you how to install 
and set up your server initially
•
Mac OS X Server Migration to Version 10.3 or Later,
 which provides instructions for 
migrating data to Mac OS X Server from existing Macintosh computers
•
on-screen help on your server
•
Read Me files on your server CD
•
and at www.apple.com/server
LL2349.Book  Page 8  Friday, August 22, 2003  2:47 PM
1
9
1
Mail Service Setup
Mail service in Mac OS X Server allows network users to send and receive email over 
your network or across the Internet. Mail service sends and receives email using the 
standard Internet mail protocols:  Internet Message Access Protocol (IMAP), Post Office 
Protocol (POP), and Simple Mail Transfer Protocol (SMTP). Mail service also uses a 
Domain Name System (DNS) service to determine the destination IP address of 
outgoing mail.
This chapter begins with a look at the standard protocols used for sending and 
receiving email. Then it explains how mail service works, summarizes the aspects of 
mail service setup, and tells you how to:
•
Set up mail service for incoming and outgoing mail
• Support mail users
• Limit junk mail
In
Out
PI:EMAIL
The Internet
PI:EMAIL
In
Mail server for example.com
Mail server for school.edu
Out
LL2349.Book  Page 9  Friday, August 22, 2003  2:47 PM
10
Chapter 1    Mail Service Setup
Mail Service Protocols
A standard mail client setup uses SMTP to send outgoing email and POP and IMAP to 
receive incoming email. Mac OS X Server includes an SMTP service and a combined 
POP and IMAP service. You may find it helpful to take a closer look at the three email 
protocols.
Outgoing Mail
Outgoing mail service is the means by which your users can send mail out to the 
Internet. Subject to restrictions that you control, the SMTP service also transfers mail to 
and from mail service on other servers. If your mail users send messages to another 