User: 请解答这个和日志有关的问题Redirect HTTP to HTTPS /etc/apache2/sites-available/default not working I know this question has been posted ad-nauseam; however, I still cannot manage to get a working solution.

OS being used is Debian 7 Wheezy.

vHosts file (/etc/apache2/sites-available/default):

&lt;VirtualHost *:80&gt;
  ServerName www.example.com
  ServerAlias *.example.com
  RedirectPermanent / https://www.example.com/
&lt;/VirtualHost&gt;

&lt;VirtualHost *:443&gt;
        ServerAdmin domains@example.com
        SSLEngine on
        ServerName www.example.com
        SSLCertificateFile /etc/apache2/ssl/ev-cert.crt
        SSLCertificateKeyFile /etc/apache2/ssl/private.key
        SSLCertificateChainFile /etc/apache2/ssl/intermediate.crt
        SSLProtocol all
        SSLCipherSuite HIGH:MEDIUM
        DocumentRoot /var/www

    &lt;Directory /var/www/&gt;
            Options -Indexes FollowSymLinks MultiViews
            AllowOverride All
            Order allow,deny
            allow from all
    &lt;/Directory&gt;

        ErrorLog /var/log/apache2/error.log
        LogLevel info
        CustomLog /var/log/apache2/access.log combined
&lt;/VirtualHost&gt;


EDIT (Added description of the problem):

Upon restarting apache2, I get no errors; however, when I visit http://www.example.com it goes no where and get a server connection error (cannot connect to server), though when I visit https://www.example.com I get through just fine.  There are no logs in apache to indicate a failure.

Assistant: You do it wrong.
All you need mod_rewrite. So Basicly first check that this module is on in httpd.conf

# vi /usr/local/etc/apache24/httpd.conf
LoadModule rewrite_module libexec/apache24/mod_rewrite.so

create .htaccess in folder you want redirect to https

# touche /usr/local/www/site1/.htaccess


then add rule for redirection

# echo 'RewriteEngine On' &gt;&gt; /usr/local/www/site1/.htaccess
# echo 'RewriteCond %{HTTPS} off' &gt;&gt; /usr/local/www/site1/.htaccess
# echo 'RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI}' &gt;&gt; /usr/local/www/site1/.htaccess


Or you can add this line to youre vhost.conf file for http delete RedirectPermanent line and add

RewriteEngine On
RewriteCond %{HTTPS} off
RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI}


save and restart apache
# apachectl restart
P.S. All path for freebsd don't know what os you use.