L. Prehn et al.
To reduce their operational costs, members of large IXPs may egress most—if
not all—of their high-volume destination traﬃc via (mostly bi-lateral) peering
connections while using their transit to egress low-volume yet domain-heavy
preﬁxes. Notably, between 25 and 50% of both top-10k preﬁx lists can be reached
via multi-lateral peering—a ﬁnding that further highlights the importance of
Route Server connections especially for new IXP members.
6.3 Missing Routes
To get some idea of which routes were not available, we mapped norm-preﬁxes
to ASes via a longest-preﬁx match on the previously mentioned IP-to-AS data
set from CAIDA. We further map each origin AS to a class using CAIDA’s AS
Classiﬁcation data set [15].
We further reﬁne the classiﬁcation
using lists of Tier 1 Networks [77]
and Hypergiants [12]. Figure 18 shows
the number of missing norm-preﬁxes
(y-axis) that are originated by the
ASes of diﬀerent classes (x-axis) for
IPv4 (bottom) and IPv6 (top). For
IPv4, we observe that most of the
missing/24 preﬁxes belong to content
providers/hypergiants. In particular,
we observe that more than half of the
preﬁxes in both of those classes can be
attributed to Amazon’s AS14618 and
AS16509. Notably, most of the miss-
ing preﬁxes for Amazon do not see any
peering LAN traﬃc (regardless of the
business relationship) throughout our
measurement period. As most of these preﬁxes are unique to the traﬃc-based
preﬁx ranking, we suspect that our eyeball vantage point has access to routes that
are only announced via private peering on dedicated connections, and, hence,
remain hidden from the peering LAN. Taking Amazon out of the picture, the
most prominent class would be the same as for IPv6: Transit ASes. Notably,
the individual contributions made by single ASes are much more uniformly dis-
tributed; out of the 61 and 231 total ASes contributing to the IPv4 and IPv6
Transit AS class, the top ASes contribute no more than 21 and 29 preﬁxes
respectively. Further, we observe that the vast majority of the preﬁxes that
belong to Transit ASes are only present in the domain-based top list but not in
the traﬃc-based top list. In summary, our observations suggest that ASes can
indeed oﬄoad high-volume preﬁxes to peering links by joining an IXP but they
still require transit to reach the heavy tail of (potentially low-traﬃc) domains.
Fig. 18. Unavailable preﬁxes by origin AS
type.
Peering Only?
359
6.4 Limitations
Next, we discuss limitations and speciﬁcally elaborate on the generalization of
our ﬁndings. Multi-lateral Peering: We analyzed the Route Servers of diﬀerent
IXPs based on separate snapshots generated throughout seven days. Hence, our
observations may be biased by sequences of high-frequency updates (as described
by Ariemma et al. [5]). Yet, we discussed our results with some of the IXP
operators that provided Route Server snapshots, and they told us that they
did not observe unusual behavior during the days from which the snapshot was
taken. Yet, as many preﬁxes can only be seen when aggregating updates over
some amount of time, a single snapshot might miss unstable routing information.
Bi-lateral Peering: Our analysis of bi-lateral peering reachability relied on
sampled peering LAN traﬃc data and inferred business relationships. While
we used an entire week of traﬃc data to partially overcome the problem of
missing traﬃc for existing routes, we likely still missed a few routes as (1) they
genuinely did not receive any traﬃc during our observation period or (2) they
small amounts of traﬃc yet the sampling algorithm did not incorporate any of
their packets. While we did our best to improve the coverage of inferred business
relationships, we can not guarantee for the correctness of the business inference
algorithm. While both algorithms were shown to provide high-quality inferences
on public data [33,47], we utilize them in a rather diﬀerent context which could
potentially lead to iimpairments in their performance [64]. Private Peering: For
the inference of private peering routes, we used a very small set of looking glasses
and queried them in a restrictive manner. Especially for our ﬁndings regarding
the summed reachability, our observations can only be seen as a lower bound. If
our number of vantage points would have been signiﬁcantly higher and we could
have triggered queries at a high rate, the amount of private peering preﬁxes
would have certainly increased leading to overall higher estimates for the total
achievable reachability. Regional Importance Bias: The utilized data sets to
infer peering relations and qualify the importance of IPs and preﬁxes (see Sect.
5 and Sect. 6) are biased towards the European service region. While it is for
the conducted analysis required to compare reachability at IXPs and relevance
(ISP data set and DNS) in the very same region, it may not necessarily apply to
others. As diﬀerent cultures may have unique eyeball behaviors, a traﬃc-based
ranking for other large eyeball networks around the world may lead to diﬀerent
preﬁxes especially in the lower part of the top-10k ranking. As address resolution
is often location-skewed (e.g., due to DNS load balancing) our domain-based
ranking is likely biased towards norm-preﬁxes primarily used in the European
region. While we expect unmatching biases (e.g., comparing American top lists
to European IXP) to lower the overall top list coverage based on, e.g., routing
policy diﬀerences [34], we do not expect that such a comparison would yield
considerable diﬀerences.
360
L. Prehn et al.
7 Discussion
Our results suggest that networks that peer at one of the larger IXPs can indeed
move most traﬃc to bi-lateral peerings, yet (especially for IPv6) not all preﬁxes
that serve a high number of domains are reachable via peering. While an assess-
ment of the quality of those available peering relationships (i.e., the capacity and
latency guarantees they provide) goes beyond the scope of this work, previous
works already hinted at certain obtainable beneﬁts [2], e.g., Schlinker et al. [69]
showed that the latencies for 10% of Facebook’s traﬃc can be decreased by up
to 10ms when switching from transit to peering routes.
That many high-volume preﬁxes can be served via bi-lateral peering at
IXPs is strongly correlated with the observation that Hypergiants—large con-
tent providers such as Google, Facebook, or Amazon [12]— interconnect at tens
(if not hundreds) of IXPs (see PeeringDB). According to Pujol et al. [65], these
relatively few Hypergiants can be responsible for up to 80% of all ingress traﬃc
of large eyeball networks.
Similar to hypergiants, the routes of many lower-tier networks are also avail-
able via peering. To them, broadly announcing their routes allows them to reduce
the volume of ingress traﬃc delivered via some of their transit providers. Over
time, such an approach may transform an asymmetric traﬃc ratio into a symmet-
ric one, and allows these networks to re-negotiate their previous transit providers
into a peering relationship.
In contrast, we observe that many of the domain-based top preﬁxes belong to
large transit providers and Tier-1s. To reach those preﬁxes, IXP members often
still have to rely on transit.
But how do those ﬁndings relate to diﬀerent types of networks? Large
networks and hypergiants already established thousands of peering connec-
tions [6] and use sophisticated traﬃc engineering strategies [70,78] among those
connections. Their egress traﬃc mapping is already automated to a degree where
adding new peers does not pose a challenge anymore which leads to constant
growth of their peering edges and continuous dwindling of dependence on their
transit connections.
In contrast, small (access) networks may rely on a few border routers
operated mostly manually by a small group of network engineers. Adding new
bi-lateral peers for these networks often poses a challenge in terms of resources
and network complexity (operational costs). Hence, despite our ﬁndings, many
of such networks may only peer with a Route Server and a few carefully selected
bi-lateral peers on purpose. To them, the reduced supplier cost that comes
with sophisticated peering is often not worth the increasing added operational
complexity.
Medium-Sized Networks. (e.g., smaller national service providers) sit in
between those two extremes. While many of them have neither automated their
egress traﬃc mapping nor their peer acquisition yet, they are typically run by
competent IT staﬀ capable of anticipating how much their network would ben-
eﬁt from a particular peer. The earlier those networks transition from a few
Peering Only?
361
expensive yet feature-rich routers to a distributed ﬂeet of cheaper routers (with
potentially partial visibility), the sooner they can quickly scale their peering
edge allowing them to take full advantage of the opportunities provided by large
IXPs.
8 Conclusion
Throughout this paper, we analyzed the routes available via multi-lateral, bi-
lateral, and private peering. For multi-lateral peering, we analyzed Route Server
snapshots from eight of the world’s largest peering LANs and showed that most
of their routes lead to out-of-continent locations via three or more AS hops.
While remote peering might be a major contributor to the geographic distance
of Route Server destinations, we observe that close and distant IXP members
alike provide lengthy, unattractive routes to the Route Server. When comparing
those ﬁndings to peering LAN traﬃc, obtained through a collaboration with
one large IXP, we saw that mostly one-hop routes saw substantial traﬃc. In
fact, we observed that 25% and 77% of IPv4 and IPv6 Route Server preﬁxes
with at least four hop long paths see no traﬃc at all. This indicates that even
though Route Servers provide many routes, most IXP members only make use
of local routes. Afterwards, we used two heuristic-based methodologies to infer
bi-lateral and private peering routes from the IXP’s peering LAN traﬃc. During
our inferences, we carefully isolated transit connections that were established
over the peering LAN—a phenomenon previously reported by Ager et al. [1].
Based on our inference, we observe that at least 19.8, 57.1, and 57.4% (37.3,
37.4, 37.8%) of all routed IPv4 (IPv6) address space can be reached at our
IXP via multi-lateral, bi-lateral, and private peering, respectively. Those results
provide practical contrast to the 70+ % reachability theoretically calculated by
B¨ottger et al. [10]. Finally, we show that almost all of the top 10k egress preﬁxes
of a large European eyeball network can be reached via bi-lateral peerings. In
contrast, we also ﬁnd that up to 15% of top 10k domain-serving preﬁxes can not
be reached via any type of peering at our IXP. Notably, we observe that most
of these preﬁxes belong to large transit and Tier 1 providers.
References
1. Ager, B., Chatzis, N., Feldmann, A., Sarrar, N., Uhlig, S., Willinger, W.: Anatomy
of a large European IXP. In: Proceedings of the ACM SIGCOMM 2012 Confer-
ence on Applications, Technologies, Architectures, and Protocols for Computer
Communication, pp. 163–174 (2012)
2. Ahmed, A., Shaﬁq, Z., Bedi, H., Khakpour, A.: Peering vs. transit: performance
comparison of peering and transit interconnections. In: 2017 IEEE 25th Interna-
tional Conference on Network Protocols (ICNP), pp. 1–10. IEEE (2017)
3. Alexa: The top 500 sites on the web (2021). https://www.alexa.com/topsites.
Accessed 21 June 2021
362
L. Prehn et al.
4. AMS-IX: Total
traﬃc statistics
(2021). https://stats.ams-ix.net/index.html.
2021. Archived version. https://web.archive.org/web/
Accessed 27
20210627072325/stats.ams-ix.net/index.html
June
5. Ariemma, L., Liotta, S., Candela, M., Di Battista, G.: Long-lasting sequences of
BGP updates. In: Hohlfeld, O., Lutu, A., Levin, D. (eds.) PAM 2021. LNCS, vol.
12671, pp. 213–229. Springer, Cham (2021). https://doi.org/10.1007/978-3-030-
72582-2 13
6. Arnold, T., et al.: Cloud provider connectivity in the ﬂat internet. In: Proceedings
of the ACM Internet Measurement Conference, pp. 230–246 (2020)
7. Augustin, B., et al.: Avoiding traceroute anomalies with Paris traceroute. In: Pro-
ceedings of the 6th ACM SIGCOMM Conference on Internet Measurement, pp.
153–158 (2006)
8. BGP4.as: BGP looking glasses for IPv4/IPv6, traceroute & BGP route servers
(2021). https://www.bgp4.as/looking-glasses. Accessed 21 June 2021
9. bgplookingglass.com: BGP looking
glass database
(2021).
http://www.
bgplookingglass.com/. Accessed 21 June 2021
10. B¨ottger, T., et al.: The elusive internet ﬂattening: 10 years of IXP growth. arXiv
e-prints (2018)
11. B¨ottger, T., Cuadrado, F., Tyson, G., Castro, I., Uhlig, S.: Open connect every-
where: a glimpse at the internet ecosystem through the lens of the Netﬂix CDN.
ACM SIGCOMM Comput. Commun. Rev. 48(1), 28–34 (2018)
12. B¨ottger, T., Cuadrado, F., Uhlig, S.: Looking for hypergiants in peeringDB. ACM