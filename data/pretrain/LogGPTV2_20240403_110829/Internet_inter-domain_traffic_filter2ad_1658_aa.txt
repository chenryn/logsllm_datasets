title:Internet inter-domain traffic
author:Craig Labovitz and
Scott Iekel-Johnson and
Danny McPherson and
Jon Oberheide and
Farnam Jahanian
Internet Inter-Domain Trafﬁc
Craig Labovitz, Scott Iekel-Johnson,
Danny McPherson
Arbor Networks
Ann Arbor, MI
{labovit, scottij, danny}@arbor.net
Jon Oberheide, Farnam Jahanian
University of Michigan
Ann Arbor, MI
{jonojono, farnam}@umich.edu
ABSTRACT
In this paper, we examine changes in Internet inter-domain
traﬃc demands and interconnection policies. We analyze
more than 200 Exabytes of commercial Internet traﬃc over
a two year period through the instrumentation of 110 large
and geographically diverse cable operators,
international
transit backbones, regional networks and content providers.
Our analysis shows signiﬁcant changes in inter-AS traﬃc
patterns and an evolution of provider peering strategies.
Speciﬁcally, we ﬁnd the majority of inter-domain traﬃc by
volume now ﬂows directly between large content providers,
data center / CDNs and consumer networks. We also show
signiﬁcant changes in Internet application usage, including
a global decline of P2P and a signiﬁcant rise in video traﬃc.
We conclude with estimates of the current size of the Inter-
net by inter-domain traﬃc volume and rate of annualized
inter-domain traﬃc growth.
Categories and Subject Descriptors: C.2 [Computer
Communication Networks]: Miscellaneous
General Terms: Measurement.
1.
INTRODUCTION
Saying the Internet has changed dramatically over the
last ﬁve years is clich´e – the Internet is always changing
dramatically: ﬁfteen years ago, new applications (e.g., the
web) drove widespread consumer interest and Internet adop-
tion. Ten years ago, new backbone and subscriber access
technologies (e.g., DSL/Cable broadband) signiﬁcantly ex-
panded end-user connections speeds. And more recently, ap-
plications like social networking and video (e.g., Facebook
and YouTube) again reshaped consumer Internet usage.
But beyond the continued evolution of Internet protocols
and technologies, we argue the last ﬁve years saw the start
of an equally signiﬁcant shift in Internet inter-domain traﬃc
demands and peering policies. For most of the past ﬁfteen
years of the commercial Internet, ten to twelve large tran-
sit providers comprised the Internet “core” interconnecting
thousands of tier-2, regional providers, consumer networks
Permission to make digital or hard copies of all or part of this work for
personal or classroom use is granted without fee provided that copies are
not made or distributed for proﬁt or commercial advantage and that copies
bear this notice and the full citation on the ﬁrst page. To copy otherwise, to
republish, to post on servers or to redistribute to lists, requires prior speciﬁc
permission and/or a fee.
SIGCOMM’10, August 30–September 3, 2010, New Delhi, India.
Copyright 2010 ACM 978-1-4503-0201-2/10/08 ...$10.00.
and content / hosting companies. Textbook diagrams of the
Internet and research publications based on active probing
and BGP routing table analysis generally produce logical
Internet maps similar to Figure 1a [1]. This diagram shows
a strict hierarchy of global transit providers at the core in-
terconnecting smaller tier-2 and regional / tier-3 providers.
Over the past several years industry economic forces, in-
cluding the continued decline of the price of IP wholesale
transit and the growth of advertisement-supported content,
signiﬁcantly altered the interconnection strategies of many
providers [2]. In the emerging new Internet economy, con-
tent providers build their own global backbones, cable In-
ternet service providers oﬀer wholesale national transit, and
transit ISPs oﬀer CDN and cloud / content hosting services
[3, 4, 5, 6]. For example, we found that over the last two
years Google migrated the majority of its video and search
traﬃc (which we later show constitutes more than 5% of all
inter-domain traﬃc) away from transit providers to its own
ﬁber backbone infrastructure and direct interconnects with
consumer networks.
The substantial changes in provider inter-connection
strategies have signiﬁcant ongoing implications for backbone
engineering, design of Internet-scale applications, and re-
search. However, most providers treat their Internet traf-
ﬁc statistics with great commercial secrecy as these val-
ues reveal insights into market penetration and competitive
strategies. As a result, the signiﬁcant shift in Internet inter-
domain traﬃc patterns has gone largely undocumented in
the commercial and research literature.
Most Internet traﬃc research has typically focused on sec-
ondary indicators of Internet traﬃc such as BGP route ad-
vertisements [7, 8, 9], DNS probing [10], broad industry sur-
veys [11], private CDN statistics [12], or traﬃc measured on
an individual provider or enterprise network [13].
A few more closely related eﬀorts have studied global In-
ternet traﬃc using publicly available exchange point statis-
tics [14] or a small set of residential networks [15, 16, 17,
18]. Still other work used industry surveys and targeted
discussions with providers [19, 20, 21]. Finally, traceroute
analysis in [22] also identiﬁed a topological trend towards a
more densely interconnected Internet especially with respect
to large content providers.
In this paper, we provide one of the ﬁrst large scale
longitudinal studies of Internet inter-domain traﬃc using
direct instrumentation of peering routers across multiple
providers. We address signiﬁcant experimental data collec-
tion and commercial privacy challenges to instrument 3,095
peering routers across 18 global carriers, 38 regional / tier-
752, and 42 consumer and content providers in the Americas,
Asia, and Europe. At its peak, the study monitored more
than 12 terabits per second of oﬀered load and a total of
more than 200 exabytes of Internet traﬃc over the two-year
life of the study (July 2007 to July 2009). Based on inde-
pendent estimates of total Internet traﬃc volume in [14, 23],
we believe the probes directly monitor more than 25% of all
Internet inter-domain traﬃc.
Our major ﬁndings include:
• Evolution of the Internet “Core”: Over the last
two years, the majority of Internet inter-domain traf-
ﬁc growth has occurred outside the traditional ten to
twelve global transit carriers. Today, most Internet
inter-domain traﬃc by volume ﬂows directly between
large content providers, hosting / CDNs and consumer
networks.
• Consolidation of Content: Most content by inter-
domain traﬃc volume has migrated to a relatively
small number of
large hosting, cloud and content
providers. Out of the approximately thirty-thousand
ASNs in the default-free BGP routing tables [24], 30
ASNs contribute a disproportionate average of 30% of
all Internet inter-domain traﬃc in July 2009.
• Estimation of Google’s Traﬃc Contribution: At
a average of more than 5% of all inter-domain traf-
ﬁc in July 2009, Google represents both the largest
and fastest growing contributor of inter-domain traf-
ﬁc. Google’s share of all inter-domain traﬃc grew by
more than 4% between July 2007 and July 2009.
• Consolidation of Application Transport: The
majority of inter-domain traﬃc has migrated to a rel-
atively small number of protocols and TCP / UDP
ports, including video over HTTP and Adobe Flash.
Other mechanisms for video and application distribu-
tion like P2P have declined signiﬁcantly in the last two
years.
• Estimation of Internet Size: Using data from inde-
pendent known inter-domain provider traﬃc volumes,
we estimate both the volume and annualized growth
rate of all inter-domain traﬃc. As of July 2009, we
estimate inter-domain traﬃc peaks exceed 39 Tbps
and grew an annualized average of 44.5% between July
2007 and 2009.
The rest of this report is organized as follows: §2 provides
an overview of our data collection infrastructure and analy-
sis methodology. §3 discusses signiﬁcant changes in Internet
topology and commercial interconnection relationships be-
tween providers. §4 analyzes changes in Internet protocols
and applications. Finally, we conclude with validation of our
data and estimates of both the volume of all inter-domain
traﬃc and annualized rate of growth.
2. METHODOLOGY
Our analysis in this paper is based on traﬃc statistics ex-
ported by operational routers from a large and, we argue
later, representative sample of Internet providers. Speciﬁ-
cally, we leverage a widely deployed commercial security and
traﬃc monitoring platform to instrument the BGP peering
edge routers of 110 participating Internet providers. Based
on private commercial sales data, we believe the majority
of the probe deployments enjoy complete coverage of the
provider’s BGP peering edge. However, we lack speciﬁc vis-
ibility into the network probe coverage of any individual
anonymous study participant.
The instrumented routers export both traﬃc ﬂow sam-
ples (e.g., NetFlow, cFlowd, IPFIX, or sFlow) and partici-
pate in routing protocol exchange (i.e., iBGP) with one or
more probe devices. A smaller number of providers have
deployed inline or “port span” versions of the appliances to
monitor traﬃc payloads and enact security policies. Per our
anonymity agreement with participating providers, we did
not collect more speciﬁc details on deployment conﬁguration
(e.g., ﬂow sample rates, router model number, etc.).
While sampled ﬂow introduces potential data artifacts
particularly around short-lived ﬂows [25], we believe the ac-
curacy of ﬂow is suﬃcient for the granularity of our inter-
domain traﬃc analysis. Further, we argue ﬂow provides the
only scalable and cost-eﬀective monitoring approach given
the scale of our study.
Each probe independently calculates traﬃc statistics
based on user conﬁgured information and BGP learned
topology. Calculated statistics include breakdowns of traﬃc
per BGP autonomous system (AS), ASPath, network and
transport layer protocols, ports, nexthops, and countries. A
more detailed description of the probe capabilities is avail-
able in commercial datasheets and white papers at [26].
The probe conﬁguration includes user supplied classiﬁca-
tion of the probe’s primary geographic coverage area (i.e.,
North America, Europe, etc.) as well as market segment
(i.e., tier-1, tier-2, content, consumer or educational). We
use the provider supplied self-categorizations in our aggre-
gate data analysis discussed in later Sections.
We worked extensively with the provider community to
address commercial privacy concerns. For example, every
participating probe strips all provider identifying informa-
tion from the calculated statistics before forwarding an en-
crypted and authenticated snapshot of the data to central
servers. We also agreed to not publish any per provider
traﬃc rates nor customer data derived from ASPath traﬃc
analysis. 1
We pursued several approaches to mitigate sources of pos-
sible error in the data. We began by excluding three ISPs
(out of 113) from the dataset that exhibited signs of obvious
misconﬁguration via manual inspection (i.e., wild daily ﬂuc-
tuations, unrealistic traﬃc statistics, internally inconsistent
data, etc.).
Unfortunately, our measurement infrastructure suﬀered
from the real-world operational exigencies of providers.
Throughout the course of the study, providers expanded
deployments with new probes, decommissioned older ap-
pliances and otherwise modiﬁed the conﬁguration of their
probes and backbone infrastructure. As a result, the ab-
solute traﬃc volumes reported by probes exhibited occa-
sional discontinuities. For example, one probe consistently
1While we discuss several Internet providers by name in this
paper, we base all provider-speciﬁc analysis on anonymized
ASN and ASPath datasets aggregated across all study par-
ticipants. Any overlap or correlation with providers who
may (or may not) be sharing data or have research or com-
mercial aﬃliations with the institutions or authors of this
paper is unintended and coincidental.
76Segment
Regional / Tier2
Global Transit / Tier1
Unclassiﬁed
Consumer (Cable and DSL)
Content / Hosting
Research/ Educational
CDN
Percentage
34
16
16
11
11
9
3
(a) Market Segment
Region
North America
Europe
Unclassiﬁed
Asia
South America
Middle East
Africa
Percentage
48
18
15
9
8
1
1
(b) Geographic Region
Table 1: Distribution of anonymous
Internet
provider participants in our study by market seg-
ment and geographic region.
reported hundreds of gigabits of traﬃc until dropping to
zero abruptly in early 2009 as the provider migrated traﬃc
to other routers and newer probe appliances.
The probe data exhibited less variance with respect to
traﬃc ratios (i.e., the ratio of ASN, port, protocol, etc. to
all inter-domain traﬃc in each deployment). Speciﬁcally
ratios such as TCP port 80 or Google ASN origin traﬃc
remained relatively consistent even as the number of moni-
tored routers, probe appliances and absolute volume of re-
ported traﬃc ﬂuctuated in a deployment. Given the relative
consistency of ratios and our inability to distinguish changes
in absolute traﬃc volumes from artifacts due to provider
measurement infrastructure changes, most of the analysis in
this paper focuses on traﬃc percentages (i.e. share of traf-
ﬁc) rather than absolute traﬃc values. The focus on ratios
also simpliﬁes our aggregate analysis across a large set of
heterogeneous providers.
Throughout every 24 hour period, the probes indepen-
dently calculated the average traﬃc volume every ﬁve min-
utes for all members of all datasets (i.e., traﬃc contributed
by every nexthop, AS Path, ASN, etc.) as well as the aver-
age volume of total inter-domain network traﬃc. The probes
then calculated a 24 hour average for each of these items us-
ing the ﬁve minute averages. Finally, the probes used the
daily traﬃc volume per item and network total to calculate
a daily percentage for each item.
The ﬁrst chart in Table 1 provides a market segment
breakdown of anonymous provider participants by percent-
age of all deployments in our study. The second table shows
a breakdown of percentage of deployments by geographic
region. Regional and tier-2 providers comprise the largest
component at 34% of anonymous statistics followed by un-
classiﬁed and tier-1 at 16% each.
We observe that the relative high cost of the commer-
cial probes used in our study may introduce a selection bias
towards larger providers. We further note that both ana-
lyst data and our study participant set reﬂect a continued
weighting towards North America and Europe both in traﬃc
volume and number of providers [27, 11, 6, 28].
While our study included a large and diverse set of In-
ternet providers, evaluation of sample bias is a challenge
given the anonymity of the study participants and the lack
of “ground-truth” quantitative market data (i.e., most avail-
able data on provider Internet traﬃc volumes is based on
qualitative surveys [27, 11]).
We evaluated several mechanisms for weighting the traf-
ﬁc ratio samples from the 110 deployments to reduce selec-
tion bias. However, the anonymity of the study participants
and the narrow scope of our data collection provided a lim-
ited number of weighting options. Ultimately, we found a
weighted average based on the number of routers in each
deployment provided the best results during data validation
in §5 and represents a compromise between the relative size
of an ISP while not obscuring data from smaller networks.
Speciﬁcally, for each day d we calculate the weighted av-
erage percent share of Internet traﬃc Pd(A) for a speciﬁc
traﬃc attribute A, where A is an ASN, TCP port, country
of origin, etc. The weights are calculated based on the total
number of routers reporting traﬃc on that day at each of the
N study participants reporting data for that day. Thus, on
day d for participant i with router count Rd,i we calculate
the weight:
Wd,i =
Rd,i
x=1 Rd,x
PN
We then calculate day d’s weighted average percent share
Pd(A) based on each provider’s measured average traﬃc vol-
ume for A on day d, Md,i(A), and total average inter-domain
traﬃc for day d, Td,i. This gives a weighted average percent
share of traﬃc for A as
Pd(A) =
N
X
x=1
Wd,x ∗
Md,x(A)
Td,x
∗ 100
We excluded any provider more than 1.5 standard devi-
ations from the true mean in order to focus on values that
were less likely to have measurement errors due to tran-
sient provider issues (misconﬁguration, network problems,
or probe failures). With the exception of Comcast’s peering
ratios discussed in §3, we used the sum of traﬃc both in and
out of the provider networks for Md,i(A) and Td,i.
In some cases, our analysis may underestimate categories
of inter-domain traﬃc. Speciﬁcally, the probes lack visibil-
ity into traﬃc exchanged over direct peering adjacencies be-
tween enterprise business partners or between smaller tier-2
and tier-3 Internet edge providers. Similarly, the study may
underestimate inter-domain traﬃc associated with large con-
tent providers such as Google who are increasingly pursuing
edge peering strategies. We also emphasize that our study
is limited to inter-domain traﬃc and excludes all internal
provider traﬃc, such as intra-domain cache traﬃc, VPNs,
IPTV and VoIP services.
Finally, we validated our ﬁndings with private discussions
with more than twenty large content providers, transit ISPs
and regional networks. These discussions provided “ground-
truth” and additional color to better understand the market
forces underlying our observed inter-domain traﬃc trends.
We note that our derived data matched provider expecta-
tions both in relative ordering and magnitude of ASN traﬃc
volumes.
In addition, twelve providers supplied indepen-
dent inter-domain traﬃc measurements for validation of our
analysis. We use these twelve known provider traﬃc values
in §5 to add conﬁdence to our calculated inter-domain ASN
traﬃc distributions as well as to estimate the overall volume
of global inter-domain traﬃc.
773. ASN TRAFFIC ANALYSIS
In this section, we present a coarse grained analysis of
changes in inter-domain traﬃc patterns. We begin with a
look at the ten largest contributors (based on our analysis)
of inter-domain traﬃc in the months of July 2007 and July
2009. With the exception of content providers (i.e., Google,
Microsoft) and Comcast, we anonymize provider names in
sensitivity to the potential commercial impact of this data.
3.1 Provider Inter-domain Trafﬁc Share
We calculate the ten largest contributors of inter-domain
traﬃc in the ﬁrst two charts of Table 2 using the weighted av-
erage percentage of inter-domain traﬃc (i.e., P (A)) reported
by each Internet provider in our study either originating or
transiting each ASN A. We then aggregate all ASNs which
are managed by the same Internet commercial entity (e.g.,
Verizon’s AS701, AS702, etc.). This last step is required
since many large transit providers manage dozens of ASNs
reﬂecting geographic backbone segmentation and merger or
acquisition lineage. Finally, we exclude stub ASNs from the
aggregation step which we only observed downstream from
other corporate ASN (e.g., DoubleClick (AS 6432) traﬃc
transits Google (AS 15169) in all our observed ASPaths).
(a) Traditional Internet logical topology
Global Internet
 Core
Global Transit /
National 
Backbones
"Hyper Giants"
Large Content, Consumer, Hosting CDN
IXP
IXP
IXP
ISP1
ISP2
Regional / Tier2
Providers
Customer IP 
Networks 
(b) Emerging new Internet logical topology
Figure 1: The hierarchical old and more densely in-
terconnected emerging Internet. Figure A gener-
ally reﬂects historical BGP topology while Figure B
illustrates emerging dominant Internet traﬃc pat-
terns.
As a category, the ten largest providers by inter-domain
traﬃc volume in Table 2a account for 28.8% of all inter-
domain traﬃc. ISP A represents the largest provider traﬃc
share in 2007 with an average of 5.77% of all inter-domain
traﬃc, followed by ISP B (4.55%) and ISP C (3.35%).


























