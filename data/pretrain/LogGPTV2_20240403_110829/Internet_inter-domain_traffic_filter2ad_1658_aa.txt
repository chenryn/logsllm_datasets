title:Internet inter-domain traffic
author:Craig Labovitz and
Scott Iekel-Johnson and
Danny McPherson and
Jon Oberheide and
Farnam Jahanian
Internet Inter-Domain Trafï¬c
Craig Labovitz, Scott Iekel-Johnson,
Danny McPherson
Arbor Networks
Ann Arbor, MI
{labovit, scottij, danny}@arbor.net
Jon Oberheide, Farnam Jahanian
University of Michigan
Ann Arbor, MI
{jonojono, farnam}@umich.edu
ABSTRACT
In this paper, we examine changes in Internet inter-domain
traï¬ƒc demands and interconnection policies. We analyze
more than 200 Exabytes of commercial Internet traï¬ƒc over
a two year period through the instrumentation of 110 large
and geographically diverse cable operators,
international
transit backbones, regional networks and content providers.
Our analysis shows signiï¬cant changes in inter-AS traï¬ƒc
patterns and an evolution of provider peering strategies.
Speciï¬cally, we ï¬nd the majority of inter-domain traï¬ƒc by
volume now ï¬‚ows directly between large content providers,
data center / CDNs and consumer networks. We also show
signiï¬cant changes in Internet application usage, including
a global decline of P2P and a signiï¬cant rise in video traï¬ƒc.
We conclude with estimates of the current size of the Inter-
net by inter-domain traï¬ƒc volume and rate of annualized
inter-domain traï¬ƒc growth.
Categories and Subject Descriptors: C.2 [Computer
Communication Networks]: Miscellaneous
General Terms: Measurement.
1.
INTRODUCTION
Saying the Internet has changed dramatically over the
last ï¬ve years is clichÂ´e â€“ the Internet is always changing
dramatically: ï¬fteen years ago, new applications (e.g., the
web) drove widespread consumer interest and Internet adop-
tion. Ten years ago, new backbone and subscriber access
technologies (e.g., DSL/Cable broadband) signiï¬cantly ex-
panded end-user connections speeds. And more recently, ap-
plications like social networking and video (e.g., Facebook
and YouTube) again reshaped consumer Internet usage.
But beyond the continued evolution of Internet protocols
and technologies, we argue the last ï¬ve years saw the start
of an equally signiï¬cant shift in Internet inter-domain traï¬ƒc
demands and peering policies. For most of the past ï¬fteen
years of the commercial Internet, ten to twelve large tran-
sit providers comprised the Internet â€œcoreâ€ interconnecting
thousands of tier-2, regional providers, consumer networks
Permission to make digital or hard copies of all or part of this work for
personal or classroom use is granted without fee provided that copies are
not made or distributed for proï¬t or commercial advantage and that copies
bear this notice and the full citation on the ï¬rst page. To copy otherwise, to
republish, to post on servers or to redistribute to lists, requires prior speciï¬c
permission and/or a fee.
SIGCOMMâ€™10, August 30â€“September 3, 2010, New Delhi, India.
Copyright 2010 ACM 978-1-4503-0201-2/10/08 ...$10.00.
and content / hosting companies. Textbook diagrams of the
Internet and research publications based on active probing
and BGP routing table analysis generally produce logical
Internet maps similar to Figure 1a [1]. This diagram shows
a strict hierarchy of global transit providers at the core in-
terconnecting smaller tier-2 and regional / tier-3 providers.
Over the past several years industry economic forces, in-
cluding the continued decline of the price of IP wholesale
transit and the growth of advertisement-supported content,
signiï¬cantly altered the interconnection strategies of many
providers [2]. In the emerging new Internet economy, con-
tent providers build their own global backbones, cable In-
ternet service providers oï¬€er wholesale national transit, and
transit ISPs oï¬€er CDN and cloud / content hosting services
[3, 4, 5, 6]. For example, we found that over the last two
years Google migrated the majority of its video and search
traï¬ƒc (which we later show constitutes more than 5% of all
inter-domain traï¬ƒc) away from transit providers to its own
ï¬ber backbone infrastructure and direct interconnects with
consumer networks.
The substantial changes in provider inter-connection
strategies have signiï¬cant ongoing implications for backbone
engineering, design of Internet-scale applications, and re-
search. However, most providers treat their Internet traf-
ï¬c statistics with great commercial secrecy as these val-
ues reveal insights into market penetration and competitive
strategies. As a result, the signiï¬cant shift in Internet inter-
domain traï¬ƒc patterns has gone largely undocumented in
the commercial and research literature.
Most Internet traï¬ƒc research has typically focused on sec-
ondary indicators of Internet traï¬ƒc such as BGP route ad-
vertisements [7, 8, 9], DNS probing [10], broad industry sur-
veys [11], private CDN statistics [12], or traï¬ƒc measured on
an individual provider or enterprise network [13].
A few more closely related eï¬€orts have studied global In-
ternet traï¬ƒc using publicly available exchange point statis-
tics [14] or a small set of residential networks [15, 16, 17,
18]. Still other work used industry surveys and targeted
discussions with providers [19, 20, 21]. Finally, traceroute
analysis in [22] also identiï¬ed a topological trend towards a
more densely interconnected Internet especially with respect
to large content providers.
In this paper, we provide one of the ï¬rst large scale
longitudinal studies of Internet inter-domain traï¬ƒc using
direct instrumentation of peering routers across multiple
providers. We address signiï¬cant experimental data collec-
tion and commercial privacy challenges to instrument 3,095
peering routers across 18 global carriers, 38 regional / tier-
752, and 42 consumer and content providers in the Americas,
Asia, and Europe. At its peak, the study monitored more
than 12 terabits per second of oï¬€ered load and a total of
more than 200 exabytes of Internet traï¬ƒc over the two-year
life of the study (July 2007 to July 2009). Based on inde-
pendent estimates of total Internet traï¬ƒc volume in [14, 23],
we believe the probes directly monitor more than 25% of all
Internet inter-domain traï¬ƒc.
Our major ï¬ndings include:
â€¢ Evolution of the Internet â€œCoreâ€: Over the last
two years, the majority of Internet inter-domain traf-
ï¬c growth has occurred outside the traditional ten to
twelve global transit carriers. Today, most Internet
inter-domain traï¬ƒc by volume ï¬‚ows directly between
large content providers, hosting / CDNs and consumer
networks.
â€¢ Consolidation of Content: Most content by inter-
domain traï¬ƒc volume has migrated to a relatively
small number of
large hosting, cloud and content
providers. Out of the approximately thirty-thousand
ASNs in the default-free BGP routing tables [24], 30
ASNs contribute a disproportionate average of 30% of
all Internet inter-domain traï¬ƒc in July 2009.
â€¢ Estimation of Googleâ€™s Traï¬ƒc Contribution: At
a average of more than 5% of all inter-domain traf-
ï¬c in July 2009, Google represents both the largest
and fastest growing contributor of inter-domain traf-
ï¬c. Googleâ€™s share of all inter-domain traï¬ƒc grew by
more than 4% between July 2007 and July 2009.
â€¢ Consolidation of Application Transport: The
majority of inter-domain traï¬ƒc has migrated to a rel-
atively small number of protocols and TCP / UDP
ports, including video over HTTP and Adobe Flash.
Other mechanisms for video and application distribu-
tion like P2P have declined signiï¬cantly in the last two
years.
â€¢ Estimation of Internet Size: Using data from inde-
pendent known inter-domain provider traï¬ƒc volumes,
we estimate both the volume and annualized growth
rate of all inter-domain traï¬ƒc. As of July 2009, we
estimate inter-domain traï¬ƒc peaks exceed 39 Tbps
and grew an annualized average of 44.5% between July
2007 and 2009.
The rest of this report is organized as follows: Â§2 provides
an overview of our data collection infrastructure and analy-
sis methodology. Â§3 discusses signiï¬cant changes in Internet
topology and commercial interconnection relationships be-
tween providers. Â§4 analyzes changes in Internet protocols
and applications. Finally, we conclude with validation of our
data and estimates of both the volume of all inter-domain
traï¬ƒc and annualized rate of growth.
2. METHODOLOGY
Our analysis in this paper is based on traï¬ƒc statistics ex-
ported by operational routers from a large and, we argue
later, representative sample of Internet providers. Speciï¬-
cally, we leverage a widely deployed commercial security and
traï¬ƒc monitoring platform to instrument the BGP peering
edge routers of 110 participating Internet providers. Based
on private commercial sales data, we believe the majority
of the probe deployments enjoy complete coverage of the
providerâ€™s BGP peering edge. However, we lack speciï¬c vis-
ibility into the network probe coverage of any individual
anonymous study participant.
The instrumented routers export both traï¬ƒc ï¬‚ow sam-
ples (e.g., NetFlow, cFlowd, IPFIX, or sFlow) and partici-
pate in routing protocol exchange (i.e., iBGP) with one or
more probe devices. A smaller number of providers have
deployed inline or â€œport spanâ€ versions of the appliances to
monitor traï¬ƒc payloads and enact security policies. Per our
anonymity agreement with participating providers, we did
not collect more speciï¬c details on deployment conï¬guration
(e.g., ï¬‚ow sample rates, router model number, etc.).
While sampled ï¬‚ow introduces potential data artifacts
particularly around short-lived ï¬‚ows [25], we believe the ac-
curacy of ï¬‚ow is suï¬ƒcient for the granularity of our inter-
domain traï¬ƒc analysis. Further, we argue ï¬‚ow provides the
only scalable and cost-eï¬€ective monitoring approach given
the scale of our study.
Each probe independently calculates traï¬ƒc statistics
based on user conï¬gured information and BGP learned
topology. Calculated statistics include breakdowns of traï¬ƒc
per BGP autonomous system (AS), ASPath, network and
transport layer protocols, ports, nexthops, and countries. A
more detailed description of the probe capabilities is avail-
able in commercial datasheets and white papers at [26].
The probe conï¬guration includes user supplied classiï¬ca-
tion of the probeâ€™s primary geographic coverage area (i.e.,
North America, Europe, etc.) as well as market segment
(i.e., tier-1, tier-2, content, consumer or educational). We
use the provider supplied self-categorizations in our aggre-
gate data analysis discussed in later Sections.
We worked extensively with the provider community to
address commercial privacy concerns. For example, every
participating probe strips all provider identifying informa-
tion from the calculated statistics before forwarding an en-
crypted and authenticated snapshot of the data to central
servers. We also agreed to not publish any per provider
traï¬ƒc rates nor customer data derived from ASPath traï¬ƒc
analysis. 1
We pursued several approaches to mitigate sources of pos-
sible error in the data. We began by excluding three ISPs
(out of 113) from the dataset that exhibited signs of obvious
misconï¬guration via manual inspection (i.e., wild daily ï¬‚uc-
tuations, unrealistic traï¬ƒc statistics, internally inconsistent
data, etc.).
Unfortunately, our measurement infrastructure suï¬€ered
from the real-world operational exigencies of providers.
Throughout the course of the study, providers expanded
deployments with new probes, decommissioned older ap-
pliances and otherwise modiï¬ed the conï¬guration of their
probes and backbone infrastructure. As a result, the ab-
solute traï¬ƒc volumes reported by probes exhibited occa-
sional discontinuities. For example, one probe consistently
1While we discuss several Internet providers by name in this
paper, we base all provider-speciï¬c analysis on anonymized
ASN and ASPath datasets aggregated across all study par-
ticipants. Any overlap or correlation with providers who
may (or may not) be sharing data or have research or com-
mercial aï¬ƒliations with the institutions or authors of this
paper is unintended and coincidental.
76Segment
Regional / Tier2
Global Transit / Tier1
Unclassiï¬ed
Consumer (Cable and DSL)
Content / Hosting
Research/ Educational
CDN
Percentage
34
16
16
11
11
9
3
(a) Market Segment
Region
North America
Europe
Unclassiï¬ed
Asia
South America
Middle East
Africa
Percentage
48
18
15
9
8
1
1
(b) Geographic Region
Table 1: Distribution of anonymous
Internet
provider participants in our study by market seg-
ment and geographic region.
reported hundreds of gigabits of traï¬ƒc until dropping to
zero abruptly in early 2009 as the provider migrated traï¬ƒc
to other routers and newer probe appliances.
The probe data exhibited less variance with respect to
traï¬ƒc ratios (i.e., the ratio of ASN, port, protocol, etc. to
all inter-domain traï¬ƒc in each deployment). Speciï¬cally
ratios such as TCP port 80 or Google ASN origin traï¬ƒc
remained relatively consistent even as the number of moni-
tored routers, probe appliances and absolute volume of re-
ported traï¬ƒc ï¬‚uctuated in a deployment. Given the relative
consistency of ratios and our inability to distinguish changes
in absolute traï¬ƒc volumes from artifacts due to provider
measurement infrastructure changes, most of the analysis in
this paper focuses on traï¬ƒc percentages (i.e. share of traf-
ï¬c) rather than absolute traï¬ƒc values. The focus on ratios
also simpliï¬es our aggregate analysis across a large set of
heterogeneous providers.
Throughout every 24 hour period, the probes indepen-
dently calculated the average traï¬ƒc volume every ï¬ve min-
utes for all members of all datasets (i.e., traï¬ƒc contributed
by every nexthop, AS Path, ASN, etc.) as well as the aver-
age volume of total inter-domain network traï¬ƒc. The probes
then calculated a 24 hour average for each of these items us-
ing the ï¬ve minute averages. Finally, the probes used the
daily traï¬ƒc volume per item and network total to calculate
a daily percentage for each item.
The ï¬rst chart in Table 1 provides a market segment
breakdown of anonymous provider participants by percent-
age of all deployments in our study. The second table shows
a breakdown of percentage of deployments by geographic
region. Regional and tier-2 providers comprise the largest
component at 34% of anonymous statistics followed by un-
classiï¬ed and tier-1 at 16% each.
We observe that the relative high cost of the commer-
cial probes used in our study may introduce a selection bias
towards larger providers. We further note that both ana-
lyst data and our study participant set reï¬‚ect a continued
weighting towards North America and Europe both in traï¬ƒc
volume and number of providers [27, 11, 6, 28].
While our study included a large and diverse set of In-
ternet providers, evaluation of sample bias is a challenge
given the anonymity of the study participants and the lack
of â€œground-truthâ€ quantitative market data (i.e., most avail-
able data on provider Internet traï¬ƒc volumes is based on
qualitative surveys [27, 11]).
We evaluated several mechanisms for weighting the traf-
ï¬c ratio samples from the 110 deployments to reduce selec-
tion bias. However, the anonymity of the study participants
and the narrow scope of our data collection provided a lim-
ited number of weighting options. Ultimately, we found a
weighted average based on the number of routers in each
deployment provided the best results during data validation
in Â§5 and represents a compromise between the relative size
of an ISP while not obscuring data from smaller networks.
Speciï¬cally, for each day d we calculate the weighted av-
erage percent share of Internet traï¬ƒc Pd(A) for a speciï¬c
traï¬ƒc attribute A, where A is an ASN, TCP port, country
of origin, etc. The weights are calculated based on the total
number of routers reporting traï¬ƒc on that day at each of the
N study participants reporting data for that day. Thus, on
day d for participant i with router count Rd,i we calculate
the weight:
Wd,i =
Rd,i
x=1 Rd,x
PN
We then calculate day dâ€™s weighted average percent share
Pd(A) based on each providerâ€™s measured average traï¬ƒc vol-
ume for A on day d, Md,i(A), and total average inter-domain
traï¬ƒc for day d, Td,i. This gives a weighted average percent
share of traï¬ƒc for A as
Pd(A) =
N
X
x=1
Wd,x âˆ—
Md,x(A)
Td,x
âˆ— 100
We excluded any provider more than 1.5 standard devi-
ations from the true mean in order to focus on values that
were less likely to have measurement errors due to tran-
sient provider issues (misconï¬guration, network problems,
or probe failures). With the exception of Comcastâ€™s peering
ratios discussed in Â§3, we used the sum of traï¬ƒc both in and
out of the provider networks for Md,i(A) and Td,i.
In some cases, our analysis may underestimate categories
of inter-domain traï¬ƒc. Speciï¬cally, the probes lack visibil-
ity into traï¬ƒc exchanged over direct peering adjacencies be-
tween enterprise business partners or between smaller tier-2
and tier-3 Internet edge providers. Similarly, the study may
underestimate inter-domain traï¬ƒc associated with large con-
tent providers such as Google who are increasingly pursuing
edge peering strategies. We also emphasize that our study
is limited to inter-domain traï¬ƒc and excludes all internal
provider traï¬ƒc, such as intra-domain cache traï¬ƒc, VPNs,
IPTV and VoIP services.
Finally, we validated our ï¬ndings with private discussions
with more than twenty large content providers, transit ISPs
and regional networks. These discussions provided â€œground-
truthâ€ and additional color to better understand the market
forces underlying our observed inter-domain traï¬ƒc trends.
We note that our derived data matched provider expecta-
tions both in relative ordering and magnitude of ASN traï¬ƒc
volumes.
In addition, twelve providers supplied indepen-
dent inter-domain traï¬ƒc measurements for validation of our
analysis. We use these twelve known provider traï¬ƒc values
in Â§5 to add conï¬dence to our calculated inter-domain ASN
traï¬ƒc distributions as well as to estimate the overall volume
of global inter-domain traï¬ƒc.
773. ASN TRAFFIC ANALYSIS
In this section, we present a coarse grained analysis of
changes in inter-domain traï¬ƒc patterns. We begin with a
look at the ten largest contributors (based on our analysis)
of inter-domain traï¬ƒc in the months of July 2007 and July
2009. With the exception of content providers (i.e., Google,
Microsoft) and Comcast, we anonymize provider names in
sensitivity to the potential commercial impact of this data.
3.1 Provider Inter-domain Trafï¬c Share
We calculate the ten largest contributors of inter-domain
traï¬ƒc in the ï¬rst two charts of Table 2 using the weighted av-
erage percentage of inter-domain traï¬ƒc (i.e., P (A)) reported
by each Internet provider in our study either originating or
transiting each ASN A. We then aggregate all ASNs which
are managed by the same Internet commercial entity (e.g.,
Verizonâ€™s AS701, AS702, etc.). This last step is required
since many large transit providers manage dozens of ASNs
reï¬‚ecting geographic backbone segmentation and merger or
acquisition lineage. Finally, we exclude stub ASNs from the
aggregation step which we only observed downstream from
other corporate ASN (e.g., DoubleClick (AS 6432) traï¬ƒc
transits Google (AS 15169) in all our observed ASPaths).
(a) Traditional Internet logical topology
Global Internet
 Core
Global Transit /
National 
Backbones
"Hyper Giants"
Large Content, Consumer, Hosting CDN
IXP
IXP
IXP
ISP1
ISP2
Regional / Tier2
Providers
Customer IP 
Networks 
(b) Emerging new Internet logical topology
Figure 1: The hierarchical old and more densely in-
terconnected emerging Internet. Figure A gener-
ally reï¬‚ects historical BGP topology while Figure B
illustrates emerging dominant Internet traï¬ƒc pat-
terns.
As a category, the ten largest providers by inter-domain
traï¬ƒc volume in Table 2a account for 28.8% of all inter-
domain traï¬ƒc. ISP A represents the largest provider traï¬ƒc
share in 2007 with an average of 5.77% of all inter-domain
traï¬ƒc, followed by ISP B (4.55%) and ISP C (3.35%).


























