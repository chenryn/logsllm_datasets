Copy
HAAA
%XX
aste
 Delete
Cut
Quick
Ipu
election
gC New Graph (1) + x
Main View
Bubble View
Entity List
C Detal view
paterva.com
图4.29添加注释
· 113 ·
---
## Page 126
第2篇信息的收集及利用
（6）在该界面可以看到添加的注释信息，该信息可以修改。将鼠标点到注释信息的位
置即可修改。在该界面还可以拖曳其他实体，这里拖另一个实体域名，用来记录来自目标
主机的DNS信息，如图4.30所示。
Ade 
HAAA
 Cut
Quick
%XX
StartPage New
Graph (1) *
Main ViewBubble 1
ViewEntity List
 Infrastru....
Groups
This is our starting poin
paterva.com
图4.30域名实体
（7）在该界面可以将这两个实体连接起来。只需要拖一个线，从一个实体到另一个实
体即可，如图4.31所示。
Investigate
Manage
Ide>
HAAA
K Cut
%XX
Start PageC New
ices
Graph (3) *
Events
Main View
Bubble ViewEntity List
Infrastru.
 Groups
This is our starting poist
C Detal View
DNSName
alpine.pater
图4.31连接两个实体
（8）连接两个实体后，将显示如图4.32所示的界面。
Properties
X
Caler
9ye 54
90
图4.32线条属性界面
• 114 *
---
## Page 127
第4章信息收集
（9）该界面用来设置线条的属性。可以修改线的粗细、格式和颜色等。
（10）重复以上第（5）、（6）、（7）和（8）步骤添加更多信息，来绘制网络图。下
面绘制一个简单的组织网络结构图，如图4.33所示。
Start Page New Graph (1) *x
000
Main ViewBubble ViewEntity List
Targe
192.168.10.101
74.207.243.85
192.168.10.106
192.168.10.201
图4.33
组织网络
（11）从该界面可以看到一个组织网络结构图。此时用户可以保存该图，如果需要的时
候，以后可以打开并编辑该图。如果需要重新打开一个Grapb窗口，可以单击左上角的
或者图标，如图4.34所示。
智电目邮
Y10.1
New
Recent Documents
Open
Save
AO7
 save Al
Save As
E Detai.x
Save to Server
 mport
Export
Print
More about CaseFile
 Exit Options
图4.34新建Graph
· 115 •
---
## Page 128
第2篇信息的收集及利用
在该界面单击New按钮，将会创建一个新的Graph，此时会命名为NewGraph(2)，如
图4.35所示。
Maltego CaseFile Community 1.0.1
Investigate
Manage
Organize
Copy
HAAA
Paste Clear
 Cut
Quick
Entity
%Xx
All
Delete
Find
Selection
Clipboard
Find
Selection
Palette
 Start Page×C New Graph (1) *CG New Graph (2) x
Main View
Bubble View
Entity List
Domain
IPv4 Addr
An IP versi
MX Recor
A DNS:
NS Recort
A DNS mar
Netblock
图4.35新建的NewGraph(2)
• 116 •
---
## Page 129
第5章漏洞扫描
漏洞扫描器是一种能够自动在计算机、信息系统、网络及应用软件中寻找和发现安全
弱点的程序。它通过网络对目标系统进行探测，向目标系统发生数据，并将反馈数据与自
带的漏洞特征库进行匹配，进而列举目标系统上存在的安全漏洞。漏洞扫描是保证系统和
网络安全必不可少的手段，面对互联网入侵，如果用户能够根据具体的应用环境，尽可能
早的通过网络扫描来发现安全漏洞，并及时采取适当的处理措施进行修补，就可以有效地
阻正入侵事件的发生。由于该工作相对枯燥，所以我们可以借助一些使捷的工具来实施，
如Nessus和OpenVAS。本章将详细讲解这两个工具的使用。
5.1使用Nessus
TH
Nessus号称是世界上最流行的漏洞扫描程序，全世界有超过75000个组织在使用它。
该工具提供完整的电脑漏洞扫描服务，并随时更新其漏洞数据库。Nessus不同于传统的漏
洞扫描软件，Nessus可同时在本机或远端上遥控，进行系统的漏洞分析扫描。Nessus也是
渗透测试重要工具之一。所以，本章将介绍安装、配置并启动Nessus。
5.1.1安装和配置NeSSuS
为了定位在目标系统上的漏洞，Nessus 依赖feeds的格式实现漏洞检查。Nessus官网
提供了两种版本：家庭版和专业版。
口家庭版：家庭版是供非商业性或个人使用。家庭版比较适合个人使用，可以用于
非专业的环境。
本小节使用Nessus的家庭版来介绍它的安装。具体操作步骤如下所示。
（1）下载Nessus软件包。Nessus的官方下载地址是http://www.tenable.com/products
nessus/select-your-operating-system。在浏览器中输入该地址，将显示如图5.1所示的界面。
（2）在该界面左侧的DownloadNessus下，单击Linux，并选择下载Nessus-5.2.6-
debian6_i386.deb包，如图5.2所示。
（3）单击Nessus-5.2.6-debian6_i386.deb包后，将显示如图5.3所示的界面。
（4）在该界面单击Agree按钮，将开始下载。然后将下载的包，保存到自已想要保存
的位置。
---
## Page 130
第2篇
信息的收集及利用
ODow
nload Nessus | Ten ×
←→
Cwww.tenable.com/products/nessus/select-your-operating 5a
三
应用Google租泽图百度-您的访间出错图百度一下.你就知建夜网站
Download Nessus
Please Select Your Operating System
Microsoft Windows
What's New in Nessus
Mac OS X
Nessus, a versatile vulnerability.
Linux
configuration, end compliance essessment
solution, provides customers with new
FreeBSD
fetures and enhancements to improve
configuration and start-up, multiple scanner
control, usability, mawere detection, and
ms & GPG Keys
图5.1Nessus 下载界面
DownloadNessus
Please Select Your Operating System
Subscription Agreement
TENABLE NETWORK SECURITY, INC.
SOFTWARE LICENSE AGREEMENT
NESSUS#
Mac OS X
Security, Inc. a Delaware corporation heving offices at 7021
This is a legel agreement (°Agreement") betw
een Tenable Net
Columbia Gatewly Drive, Suite 500, Columbia, MD 21046 (Tenable7.
and you, the perty licensing Sofbware (°You')_ This Agreement
Debian 6.0 (32 blts):
YOU INDICATE YOUR ACCEPTANCE OF THIS AGREEMENT AND
covers Your permitted use of the Software. BY CLICKING BELOW
Nessus-5.2.6-deblan6_i386.deb
Debian 6.0 (54 bits):
Nessus-5.2.6-deblan6_amd64.deb
ce, Expo
Red Hat ES 4 / CentOS 4:
Nessus-5.2.6-es4.1386.rpm
Red Hat ES 5 (32 bits) / CentOS 5 / Oracle Linux 5 (including
图5.2下载Linux系统的Nessus
图5.3接收许可证
（5）下载完Nessus 软件包，现在就可以来安装该工具。执行命令如下所示：
root@kali:~# dpkg -i Nessus-5.2.6-debian6_i386.deb
Selecting previously unselected package nessus.
（正在读取数据库.系统当前共安装有276380个文件和目录。）
正在解压缩 nessus（从Nessus-5.2.6-debian6_i386.deb) .
正在设置nessus（5.2.6)...
nessusd (Nessus) 5.2.6 [build N25116] for Linux
Copyright (C) 1998 - 2014 Tenable Network Security, Inc
Processing the Nessus plugins..
All plugins loaded
- You can start nessusd by typing /etclinit.d/nessusd start
- Then go to https://kali:8834/ to configure your scanner
• 118 ·
---
## Page 131
第5章漏洞扫描
看到以上类似的输出信息，表示Nessus软件包安装成功。Nessus默认将被安装在
/opt/nessus 目录中。
（6）启动Nessus。执行命令如下所示：
root@kali:~#/etc/init.d/nessusd start
$Starting Nessus : .
从输出的信息中可以看到Nessus服务已经启动。
注意：使用Nessus之前，必须有一个注册码。关于获取激活码的方法在第2章已经介
绍过，这里就不再赞述。
（7）激活Nessus。执行命令如下所示：
（8）为Nessus创建一个用户。执行命令如下所示：
root@Kali:~#/opt/nessus/sbin/nessus-adduser
（9）登录Nessus。在浏览器中输入地址https://主机IP:8834或https://主机名：8834。
通过以上步骤的详细介绍，Nessus就配置好了，现在就可以使用Nessus扫描各种的漏
洞。使用Nessus扫描漏洞之前需要新建扫描策略和扫描任务，为了后面能顺利的扫描各种
漏洞，接下来将介绍新建策略和扫描任务的方法。
1.添加策略
2
添加策略的具体操作步骤如下所示。
（1）登录Nessus。Nessus是一个安全链接，所以需要添加信任后才允许登录。在浏览
器地址栏中输入https://192.168.41.234:8834/，将显示如图5.4所示的界面。
Untrusted Connection - Iceweasel
-0x
Eile [dt YiewHigtory BookmariksIoolsHelp
 Untrusted Connection
+
 https:/192.168.41.234:8834
Google
Most Visited Illoffensive Security , Kali Linux , Kali Docs Bxploit-D8  Aircrack-ng
This Connection is Untrusted
You have asked Iceweasel to connect securely to 192.168.41.234:8834,
but we can’t confirm that your connection is secure.
Normally, when you try to connect securely, sites will present trusted
identification to prove that you are going to the right place. However, this
site's identity can’t be verified
What Should 1 Do?
that s
 is trying to imperi
Get me out of here!
Technical Details
1Understand the Risks
图5.4连接不被信任
· 119 •
---
## Page 132
第2篇信息的收集及利用
（2）在该界面单击IUnderstandtheRisks按钮，将显示如图5.5所示的界面。
Untrusted Connection - Iceweasel
-ox
EileEdit View HistoryBookmarks IoolsHelp
 Untrusted Connection
+
@ https:/192.168.41.234:8.834
↑
 Most VisitedIlOffensive Security , Kali Linux , Kali Docs Exploit-DB Aircrack-ng
continue.
Get me out of herel
Technical Details
1 Understand the Risks
If you understand what's going on, you can tell Iceweasel to start
trusting this site's identification. Even if you trust the site, this error
could mean that someone is tampering with your connection.
Don't add an exception unless you know there's a good reason why this
site doesn’t use trusted identification.
Add Exception....
图5.5了解风险
（3）该界面显示了所存在的风险，单击AddException按钮，将显示如图5.6所示的
界面。
sopgdaoxg Aqunoag ppy
You are about to override how Iceweasel identifies this site.
Legitimate banks, stores, and other public sites will not
ask you to do this.
Server
Location:
https://192.168.41. 234:8834/
Get Certificate
Certificate Status
This site attempts to identify itself with invalid
information.
View.
Wrong Site
identity theft.
Unknown Identity
Certificate is not trusted, because it hasn't been verified by a
'aunqeubis aunzas e 5uisn Aquoune pazubosa,
 Permanently store this exception
Confirm Security Exception
Cancel
图5.6添加安全例外
（4）在该界面单击ConfirmSecurityException按钮，将显示如图5.7所示的界面。
· 120 ·
---
## Page 133
第5章漏洞扫描
Nessus / Login - Iceweasel
FileEditViewHistoryBookmarks
Tools
Help
Nessus / Login
+
 https:/192.168.41. 234:8.834/html.5.html #/
↑
Most VisitedIOffensive Security , Kali Linux , Kali Docs Exploit-DB Aircrack-ng
Nessus
home
admin
Remember Me
Sign In
图5.7Nessus登录界面
（5）在该界面输入前面创建的用户名和密码，然后单击SignIn按钮，将显示如图5.8
所示的界面。
Nessus / Scans - Iceweasel
-口x
FileEditViewHigtoryBookmarksIoolsHelp
 Nessus / Scans
+
< https:/1 27.0.0.1:8.834/html5.html #/scans
Most VisitedlOffensive Security
,Kali Linux Kali DocsExploit-DB Aircrack-ng
Nessus
Scans
Schedules
Polcies
Users
Scans