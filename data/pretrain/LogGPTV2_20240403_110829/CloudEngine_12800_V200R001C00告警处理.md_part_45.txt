### 原因1：接口状态问题
1. 修改配置，检查接口状态是否变为UP。
   - 如果是，请执行步骤4。
   - 如果不是，请执行步骤3。
2. 收集该设备的告警信息、日志信息和配置信息，并联系技术支持人员。
3. 结束。

### 原因2：协议问题
1. 使用`display current-configuration`命令检查本地配置是否正确。
   - 如果是，请执行步骤3。
   - 如果不是，请执行步骤2。
2. 修改本地配置，检查邻居状态是否变为UP。
   - 如果是，请执行步骤6。
   - 如果不是，请执行步骤5。
3. 使用`display cpu`命令，查看CPU占用率是否过高。
   - 如果是，请执行步骤4。
   - 如果不是，请执行步骤5。
4. 删除不必要的配置，检查邻居状态是否UP。
   - 如果是，请执行步骤6。
   - 如果不是，请执行步骤5。
5. 收集该设备的告警信息、日志信息和配置信息，并联系技术支持人员。
6. 结束。

### 原因3：BFD检测到邻居故障
1. 使用`ping`命令检查到对端路由器的链路状态是否良好。
   - 如果是，请执行步骤3。
   - 如果不是，请执行步骤2。
2. 检查链路配置。
3. 收集该设备的告警信息、日志信息和配置信息，并联系技术支持人员。
4. 结束。

### 原因4：配置变更
1. 检查最近修改的配置中是否存在某些会影响邻居建立的配置。
   - 如果是，请执行步骤2。
   - 如果不是，请执行步骤4。
2. 查看配置修改是否是用户期望的。
   - 如果是，请执行步骤5。
   - 如果不是，请执行步骤3。
3. 修改回原有配置，检查邻居状态是否UP。
   - 如果是，请执行步骤5。
   - 如果不是，请执行步骤4。
4. 收集该设备的告警信息、日志信息和配置信息，并联系技术支持人员。
5. 结束。

### 原因5：对端路由器问题
1. 检查对端路由器是否存在问题。
   - 如果是，请执行步骤2。
   - 如果不是，请执行步骤3。
2. 解决对端路由器问题并检查邻居是否UP。
   - 如果是，请执行步骤4。
   - 如果不是，请执行步骤3。
3. 收集该设备的告警信息、日志信息和配置信息，并联系技术支持人员。
4. 结束。

### Trap Buffer 信息解释
**System ID冲突**
- **Trap OID**: 1.3.6.1.4.1.2011.5.25.24.2.4.1
- **Mnemonic Code**: hwIsisSystemIdConflict
- **描述**: IS-IS在区域内检测到System ID冲突。
- **可能影响**: 可能导致LSP不断刷新，造成路由振荡。
- **处理步骤**:
  1. 查看告警中OwnSystemId与hwisisSysInstance参数。
     - 如果本地系统ID与产生冲突的系统ID相同，则修改本地System ID。如果告警解除，请执行步骤4；若告警仍然存在，执行步骤3。
     - 如果本地系统ID不是产生冲突的系统ID，执行步骤2。
  2. 检查网络中其他路由器的系统ID设置，找到冲突的系统ID，修改配置。
     - 如果告警解除，请执行步骤4。
     - 如果告警仍然存在，请执行步骤3。
  3. 收集该设备的告警信息、日志信息和配置信息，并联系技术支持人员。
  4. 结束。

**自动修复System ID冲突**
- **Trap OID**: 1.3.6.1.4.1.2011.5.25.24.2.4.12
- **Mnemonic Code**: hwIsisSystemIdAutoRecover
- **描述**: IS-IS在区域内检测到System ID冲突后，自动修改System ID。
- **可能影响**: System ID冲突修复后，LSP将不再频繁刷新，路由也不再震荡。
- **处理步骤**:
  1. 正常运行信息，无需处理。

**LSP序列号超过阈值**
- **Trap OID**: 1.3.6.1.4.1.2011.5.25.24.2.4.14
- **Mnemonic Code**: hwIsisSeqNumExceedThreshold
- **描述**: LSP报文序列号达到告警上限阈值。
- **可能影响**: 当LSP的序列号大于0xFFFFFFFF多于三次后，IS-IS协议的实例系统将要进入休眠模式。
- **可能原因**:
  - 网络收到恶意报文，该报文模拟本地设备发送的LSP，并将报文的序列号修改成大于上限阈值。
  - 网络中存在重复的IS-IS System ID，导致网络长时间震荡。
- **处理步骤**:
  1. 使用`display isis lsdb`命令连续查看本地路由器产生的LSP序列号。
     - 如果序列号正常增加，则是正常运行信息，无需处理。
     - 如果序列号增加速度过快，请执行步骤2。
  2. 在IS-IS视图下使用`timer lsp-refresh`命令，调大LSP刷新定时器的值，再继续执行`display isis lsdb`命令查看本地路由器产生的LSP序列号。
     - 如果序列号正常增加，请执行步骤5。
     - 如果序列号仍然增加速度过快，请执行步骤3。
  3. 查看域内是否存在与本地System ID冲突的设备。
     - 如果是，请修改其中一台冲突设备的System ID。
     - 如果不是，请执行步骤4。
  4. 收集相关显示信息，并联系技术支持人员。
  5. 结束。

**LSP序列号低于阈值**
- **Trap OID**: 1.3.6.1.4.1.2011.5.25.24.2.4.15
- **Mnemonic Code**: hwIsisSeqNumExceedThresholdClear
- **描述**: LSP报文序列号已经低于告警上限阈值。
- **处理步骤**:
  1. 正常运行信息，无需处理。

---

**文档版本 06 (2017-09-12) 华为专有和保密信息**

版权所有 © 华为技术有限公司

**CloudEngine 12800系列交换机**

**告警处理 26 IS-IS**