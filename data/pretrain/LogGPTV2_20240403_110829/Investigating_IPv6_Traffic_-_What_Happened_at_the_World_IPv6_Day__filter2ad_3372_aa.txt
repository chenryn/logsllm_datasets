title:Investigating IPv6 Traffic - What Happened at the World IPv6 Day?
author:Nadi Sarrar and
Gregor Maier and
Bernhard Ager and
Robin Sommer and
Steve Uhlig
Investigating IPv6 Trafﬁc
What Happened at the World IPv6 Day?
Nadi Sarrar1, Gregor Maier2, Bernhard Ager1, Robin Sommer2,3, and Steve Uhlig4
1 TU Berlin / Telekom Innovation Laboratories, Berlin, Germany
2 International Computer Science Institute, Berkeley, CA, USA
3 Lawrence Berkeley National Laboratory, Berkeley, CA, USA
4 Queen Mary, University of London, London, UK
Abstract. While the IETF standardized IPv6 more than ﬁfteen years ago, IPv4 is
still the prevalent Internet protocol today. On June 8th, 2011, several large content
and service providers coordinated a large-scale IPv6 test-run, by enabling support
for IPv6 simultaneously: the World IPv6 Day. In this paper, we compare IPv6
activity before, during, and after the event. We examine trafﬁc traces recorded at
a large European Internet Exchange Point (IXP) and on the campus of a major US
university; analyzing volume, application mix, and the use of tunneling protocols
for transporting IPv6 packets.
For the exchange point we ﬁnd that native IPv6 trafﬁc almost doubled during
the World IPv6 Day while changes in tunneled trafﬁc were limited. At the uni-
versity, IPv6 trafﬁc increased from 3–6 GB/day to over 130 GB/day during the
World IPv6 Day, accompanied by a signiﬁcant shift in the application and HTTP
destination mix. Our results also show that a signiﬁcant number of participants
at the World IPv6 Day kept their IPv6 support online even after the test period
ended, suggesting that they did not encounter any signiﬁcant problems.
1 Introduction
The fourth incarnation of the Internet Protocol (IPv4) successfully supported the phe-
nomenal growth of the Internet since its introduction in 1981. Yet, due to this unex-
pected success, the pressure from the IPv4 address space exhaustion is being felt more
and more. This led to the standardization of IPv6 more than 15 years ago, which pro-
vides a signiﬁcantly larger address space. Since then, the transition from IPv4 to IPv6
is happening at a lethargic pace. One of the reasons for the hesitant adoption of IPv6
by end-users is the limited amount of content available through IPv6. A reason for
network operators is the fear of breaking critical services. Indeed, the current best prac-
tices for deploying IPv6, such as white-listing of well-known network regions, are very
conservative. Furthermore, such approaches prevent us from gaining insights into the
challenges involved with a global transition to IPv6.
To ﬁll the gap, several operators coordinated a joint experiment on June 8th, 2011:
the World IPv6 Day. For the duration of that day, the participants agreed to enable IPv6
support in parts of their networks. Participants included Comcast, Google, Facebook,
Microsoft, and many others. Their observations have been reported at the IETF 81 meet-
ing. They found that besides a signiﬁcant and sustained increase of IPv6 trafﬁc on and
N. Taft and F. Ricciato (Eds.): PAM 2012, LNCS 7192, pp. 11–20, 2012.
c(cid:2) Springer-Verlag Berlin Heidelberg 2012
12
N. Sarrar et al.
Table 1. Overview of data sets. All data sets are from 2011.
Name Type
Location Start date Duration
Name Type Location Start dateDuration
JUN1 Packet Campus Thu, Jun 2
JUN2 Packet Campus Fri, Jun 17
JUN3 Packet Campus Fri, Jun 24
9 d
4 d
7 d
IXP1
IXP2
sFlow IXP
sFlow IXP
Wed, Jun 1
Mon, Aug 8
22 d
7 d
after the World IPv6 Day, the awareness of IPv6 increased dramatically, and the ex-
perience obtained through real IPv6 deployments and measurements were invaluable.
The presented results were focused mainly on operational questions, e. g., bandwidth,
number of clients, and “IPv6 brokenness”.
In this paper, we complement these observations by investigating IPv6 trafﬁc charac-
teristics from two vantage points in the Internet. We examine the use of tunneled IPv6,
the presence of applications in IPv6 trafﬁc, and highlight the major IPv6 trafﬁc contrib-
utors in the Internet. Our study is based on two traces of production Internet trafﬁc. The
ﬁrst was collected at a large European Internet Exchange Point (IXP) interconnecting
hundreds of networks. The second has been gathered at a major US university, a funda-
mentally different vantage point compared to the IXP, both in scale and level of trafﬁc
aggregation. Combined, the two data sets enable us to take a broad look at the impact
of the World IPv6 Day.
To the best of our knowledge, this paper is the ﬁrst systematic study of what has
happened around the World IPv6 Day. Our contributions include characterizations of:
Trafﬁc volume: In both traces, we observe a steep and sustained increase of IPv6 trafﬁc.
Native IPv6 trafﬁc doubled at the IXP and increased more than 20-fold at the campus.
Tunneling mechanisms: Encapsulated packets contribute a large fraction of IPv6 traf-
ﬁc at the IXP. Teredo tunnels are widespread but mostly idle.
Application mix: Since the World IPv6 Day, the application mix of native and 6in4
IPv6 trafﬁc changed fundamentally and now exhibits similarities to IPv4.
Trafﬁc contributors: Since the World IPv6 Day, YouTube is the main contributor at
the campus vantage point. A large content provider is the main contributor at the IXP.
The remainder of this paper is organized as follows. In Section 2, we provide details
about our two data sets. We investigate overall IPv6 trafﬁc volume and tunnel encapsu-
lations in Section 3 and the application mix in Section 4. In Section 5 we identify the
content providers that contribute most trafﬁc before, during, and after the World IPv6
Day. We present related work in Section 6 and summarize our results in Section 7.
2 Data Sets
We base our analysis on network trafﬁc gathered at the Internet uplink of a major US
university and at a large European Internet Exchange Point (IXP). Table 1 gives an
overview of our data sets.
In addition to analyzing native IPv6 trafﬁc, we also investigate commonly used
tunnel encapsulation methods to transfer IPv6 datagrams over IPv4. In particular, we
Investigating IPv6 Trafﬁc
13
analyze Teredo (RFC 4380), 6in4 (RFC 4212), and AYIYA1 encapsulations. We note that
6in4 encapsulation also covers 6to4 (RFC 3068) and 6rd (RFC 5969). Some tunneled
trafﬁc can be detected by ﬁltering on a speciﬁc UDP port; Teredo uses UDP port 3544,
and AYIYA commonly runs on port 5072. In contrast, 6in4 has its own IP protocol num-
ber, 41, which can be used for ﬁltering. In all of our analyses, we further veriﬁed that
the tunnel payload actually contains an IPv6 packet to mitigate against false positives.
Internet Exchange Point: The IXP data sets consist of anonymized sampled sFlow
records from the whole trafﬁc exchanged at the IXP. More than 400 networks currently
exchange trafﬁc at this IXP. sFlow does not employ ﬂow record aggregation like Net-
Flow. Instead, sFlow samples one out of n packets and exports the initial portion of it
as a sFlow record. The sFlow probes at the IXP use a sampling ratio of 1:214. We use
a customized version of sflowtool [14] to extract relevant portions from the sFlow
data. As a sFlow record corresponds to the initial portion of a packet, it is possible to
examine the protocol and tunneling stack.
US university: We base our analysis of IPv6 trafﬁc at the US university campus on
packet level traces collected at the university’s central uplink to the Internet. We lim-
ited the trace collection to native IPv6 trafﬁc, 6in4 encapsulated trafﬁc and IPv4 trafﬁc
on Teredo’s well-known UDP port. We then analyze these traces using a customized
version of the Bro IDS [13] capable of analyzing tunneled IPv6 trafﬁc.
3 Trafﬁc Volume and Tunneling
We start by investigating the overall volume of IPv6 trafﬁc before, during, and post the
World IPv6 Day. This enables us to calibrate our expectations for subsequent analyses
when we dig deeper into used protocols, applications, and trafﬁc contributors.
In Figure 1 and Figure 2 we plot the total bandwidth of IPv6 trafﬁc (native and
tunneled) over time at the IXP and the US university, respectively. The World IPv6 Day
is highlighted by a gray bar. We observe that before the ofﬁcial start of the World IPv6
Day (at midnight UTC), IPv6 trafﬁc begins to ramp up as content providers enable IPv6
on their systems. During the World IPv6 Day, we observe a 30 % increase of IPv6 trafﬁc
at the IXP and an increase from 3–6 GB/day to over 130 GB at the university. We also
ﬁnd that the IPv6 trafﬁc volume remains high after the World IPv6 Day ofﬁcially ended,
indicating that a signiﬁcant number of participants kept their IPv6 support enabled, and
suggesting that they did not encounter signiﬁcant problems. This is consistent with other
reports [1, 9, 15] that observed similar behavior during and after the World IPv6 Day.
Analyzing IPv6 trafﬁc in 1 hour bins shows a clear time-of-day pattern (plot not
shown). During and after the World IPv6 Day, the trafﬁc volume during the busy-
hour has increased signiﬁcantly while the trafﬁc dips during off-hours has remained
unchanged, indicating that only peak usage has changed but not baseline activity.
We next turn to the question of how much IPv6 trafﬁc is tunneled versus native IPv6
trafﬁc. At the university campus we ﬁnd hardly any tunneled trafﬁc. At the IXP tunneled
trafﬁc is more common. In Figure 3, we plot the IPv6 volume by tunnel encapsulation
type for the IXP data sets. During and after the World IPv6 Day, we observe a signiﬁcant
1 http://www.sixxs.net/tools/ayiya/
N. Sarrar et al.
14
h
t
i
d
w
d
n
a
b
6
v
P
I
d
e
z
i
l
a
m
r
o
N
]
s
p
b
M
i
[
h
t
d
w
d
n
a
b
e
g
a
r
e
v
A
1 week before
World IPv6 Day
1 week after
9 weeks after
Fig. 1. Total IPv6 trafﬁc volume (IXP). The tick marks are at noon UTC.
1 day bins
1 hour bins
1 day bins
1 hour bins
8
.
0
4
0
.
0
0
.
5
3
5
2
5
1
5
0
1 week before
World IPv6 Day
1 week after
2 weeks after
3 weeks after
Fig. 2. Total IPv6 trafﬁc volume (campus). The tick marks are at noon UTC.
increase in native IPv6 trafﬁc, while tunneled trafﬁc remains essentially unchanged. The
fraction of tunneled trafﬁc decreases accordingly from 69 % to 58 % on average.
We next compare the packet size distributions of IPv4 and IPv6 trafﬁc during the
World IPv6 Day and plot the results in Figure 4. We remove the tunnel headers and
plot the size of the innermost IPv4 or IPv6 packet. IPv4 shows the usual distribution
with peaks at small packet sizes (32 %) and large packet sizes ≥1,492 bytes (25 %).
The packet size distribution for IPv6 at the US university resembles the one of IPv4.
However, since an IPv6 header is larger than an IPv4 header without options, we ﬁnd
that the “small” packets for IPv6 are slightly larger. We also observe an additional mode
at 1,280 bytes for IPv6. This represents the minimum MTU for IPv6 (RFC 2460), and
the recommended MTU for tunneling mechanisms in order to mitigate problems with
fragmentation (RFC 4380, RFC 4212).
We observe a different packet size distribution for IPv6 at the IXP that shows a signif-
icantly larger fraction of small packets. More than 82 % of all IPv6 packets are at most
72 bytes in size. Moreover, we notice two modes in the distribution of larger packets,
one at the full MTU, and another one at 1,280 bytes. The latter is more pronounced than
in the campus data set.
To understand what causes this disparity, we take a closer look at the IPv6 packet
size distribution at the IXP by breaking it down according to the type of packet encap-
sulation. Figure 5 compares the IPv6 packet size distributions for native, 6in4, Teredo,
and AYIYA packets. We ﬁnd strong differences between different encapsulation tech-
niques. Native IPv6 trafﬁc is the only signiﬁcant source of full-sized 1,500 byte packets,
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
h
t
i
d
w
d
n
a
b
6
v
P
I
d
e
z
i
l
a
m
r
o
N
4
.
0
3
.
0
2
.
0
1
.
0
0
.
0
Investigating IPv6 Trafﬁc
15
Native IPv6
6in4
Teredo
AYIYA
1 week before
World IPv6 Day
1 week after
9 weeks after
Fig. 3. IPv6 trafﬁc volume by tunnel encapsulation (IXP)
since tunneled trafﬁc needs room for additional encapsulation headers. In contrast to the
native IPv6 trafﬁc in the campus data set, we still observe larger fractions of small pack-
ets and a stronger mode at 1,280 bytes. While the packet size distributions for native,
6in4, and AYIYA trafﬁc show some similarities to IPv4, we ﬁnd that 98 % of Teredo
packets are small. A closer examination reveals that at our vantage point, Teredo is
mostly composed of control trafﬁc: 76 % of all observed Teredo packets are keep-alive
messages (IPv6 headers without payload), and 23 % are ICMP messages. Since Teredo
contributes 62 % of IPv6 packets during the IPv6 day, we conclude that Teredo skews
the overall packet size distribution dramatically.
4 Application Mix
We now turn to the application layer protocol mix of IPv6 trafﬁc. We utilize Bro’s
dynamic protocol detection framework [4] to classify application layer protocols in the
university data sets. As the IXP data set only provided sampled packet headers, we rely
on well-known port numbers to identify applications. We use a selection of 86 well-
known ports which have been shown to work reasonably well [11]. We report the top
protocols and aggregate other trafﬁc on well-known ports into the category well-known.
If the port numbers do not allow to infer the application layer protocol, we attribute the
trafﬁc to the unknown category.
Figure 6 shows the daily application mix for native IPv6 trafﬁc at the IXP for IXP1
and IXP2. The World IPv6 Day is highlighted by a red rectangle and IXP1 and IXP2 are
separated by a red vertical line. Prior to the World IPv6 Day, NNTP was the strongest
contributor with about 40 % of the volume, a protocol now frequently used for ﬁle-
sharing [7]. While we cannot reliably identify P2P trafﬁc in the IXP dataset, its share
must be less than 30 % (sum of “well-known” and ”unknown” categories). In contrast,
Labovitz [8] reports P2P as the main contributor in IPv6 trafﬁc before the World IPv6
Day, with 61 % of the total volume. ICMPv6 contributes 10 % to 13 % of the overall
trafﬁc volume. During the World IPv6 Day, the application mix has changed substan-
tially. HTTP is dominating with more than 60 % of the trafﬁc volume, NNTP dropped
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
●
16
N. Sarrar et al.
]
s
t
e
k
c
a
p
f
o
r
e
b
m
u
n
[
F
D
C
0
.
1
8
.
0
6
.
0
4
.
0
2
.
0
0
0
.
Helper lines at 40,
60, 72, 1280, 1492
and 1500 bytes
IPv6 IXP
IPv4 IXP
IPv6 campus
]
s
t
e
k
c
a
p
f
o
r
e
b
m
u
n
[
F
D
C
0
.
1
8
.
0
6
.
0
4
.
0
2
.
0
0
0
.
Helper lines at 40,
60, 72, 1280, 1480
and 1500 bytes
Teredo
Native IPv6
6in4
AYIYA
0
500
1000
1500
0
500
1000
1500
Fig. 4. Packet size distributions of IPv4 and
IPv6 trafﬁc (IXP and campus)
Fig. 5. Packet size distributions per encapsu-
lation type (IXP)
to 7 % and ICMP to 6 %. In addition, “unknown”, and “well-known” now account for
less than 15 %. After the World IPv6 Day, the application mix stays roughly similar to
the one during the World IPv6 Day, with HTTP loosing about 7 to 10 % of its popularity