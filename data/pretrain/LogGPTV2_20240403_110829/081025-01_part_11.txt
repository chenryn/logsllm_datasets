所有的交换机和路由器都有配置文件，所有的服务器、计算机都有配置选项，而其中任何
一台设备的配置文件和配置选项设置不当，都会导致网络故障。如路由器的访问列表配置不当
会导致Internet连接故障；交换机的VLAN 设置不当会导致VLAN间的通信故障，彼此之间都
无法访问，更不用说访问 Internet 了；服务器权限设置不当，会导致资源无法共享或无法获得
足够权限的故障；计算机网卡配置不当，会导致无法连接的故障等。因此在排除硬件故障之后，
就需要重点检查配置文件和选项的故障了。
当某一台计算机无法接入网络，或无法与连接至同一交换机的其他计算机通信时，应当检
查接入计算机的配置；当某台接入层交换机无法连接至网络时，应当检查该交换机级联端及汇
聚层交换机的配置；当同 VLAN 或几个 VLAN 内的交换机无法访问时，应当检查接入、汇聚
第3章 信息系统设施运维 157
或核心交换机的配置；当所有交换机都无法访问 Internet 时，就应当检查路由器或代理服务器
的配置；当个别服务无法实现时，应当检查提供相应服务的服务器配置。
3．网络协议
网络协议是在网络设备和计算机网络中彼此“交谈”时所使用的语言。网络协议的配置在
网络中有着举足轻重的地位，决定着网络能否正常运行。任何一个网络协议配置不当，都有可
能导致网络瘫痪，或导致某些服务被终止，从而出现网络故障。
4．服务故障
服务故障主要包括三个方面，即服务器硬件故障、网络操作系统故障和网络服务故障。所
有的网络服务都必须进行严格的配置或授权，否则就会导致网络服务故障。例如，服务器权限
设置不当，会导致资源无法访问；主目录或默认文件名指定错误，会导致Web网站发布错误；
端口映射错误，会导致无法提供某种服务等。
因此，当排除硬件故障之后，就需要重点检查配置文件和选项；当网络内所有的服务都无
法实现时，应当检查网络设备的配置，尤其是连接网络服务器的交换机的配置；如果只有个别
服务无法实现，则应当检查提供相应网络服务的相关配置。
3.4.2 故障排除步骤
在开始动手排除故障之前，应当养成一种良好的习惯，即进行故障排除时就开始做好记录，
而不是在事情做完之后才来记录，认真而翔实的记录不仅有助于一步一步地记录问题、跟踪问
题并最终解决问题，而且也为自己或其他运维人员以后解决类似问题提供了完整的技术文档和
帮助文件。
1．识别故障现象
识别问题是排除故障的关键。运维人员在排除故障之前，必须确切地知道网络上到底出了
什么毛病，是不能共享资源，还是不能浏览 Web 页，或是不能使用 QQ 等。对一名优秀运维
人员的最基本要求，就是能够对问题进行快速定位。为了与故障现象进行对比，必须非常清楚
网络的正常运行状态，即了解网络设备、网络服务、网络软件、网络资源在正常状态下的表现
方式，了解网络拓扑结构，理解网络协议，掌握操作系统和应用程序，都是故障排除必不可少
的理论和知识准备。识别故障现象时，应该询问以下几个问题。
（1）故障的表现是什么? 无响应? 报错?
（2）故障是什么时候发现的?
（3）故障是否可重现?
（4）有没有出现的规律（如每小时出现一次）?
（5）故障影响的特定用户群是什么样的（已登录的、退出的、某个地域的……）?
（6）最后一次对整个平台进行更新的内容是什么（代码、服务器等）?
158 信息系统运行管理员教程（第2版）
（7）当被记录的故障现象发生时，正在运行什么进程?
（8）这个进程以前运行过吗?
（9）以前这个进程的运行是否成功?
（10）这个进程最后一次成功运行是什么时候?
（11）基础架构（物理的、逻辑的）的文档是否能找到?
（12）是否有监控平台? 是否可用?
（13）是否有日志可以查看?
2．对故障现象进行详细描述
在处理由用户报告的问题时，对故障现象的详细描述显得尤为重要。例如，运维人员接到
用户电话，说无法浏览Web网站，那么仅凭这些信息，恐怕任何人都无法做出明确的判断。这
时，就要亲自到现场去试着操作一下，运行一下程序，并注意出错信息。例如，在使用Web浏
览器进行浏览时，无论输入哪个网站都返回“该页无法显示”之类的信息；或者使用ping程序
时，无论 ping 哪个 IP 地址都显示超时连接信息等，诸如此类的出错消息会为缩小问题范围提
供许多有价值的信息。注意每一个错误信息，并在用户手册中找到它们，从而得到关于该问题
更详细的解释，是解决问题的关键。另外，亲自到故障现场进行操作，也有机会检查用户操作
系统或应用程序是否运行正常，各种选项和参数是否被正确地设定。如果在操作时没有任何问
题，那就可能是操作者的问题了。不妨让用户再试一次，认真监督他的每一步操作，以确保所
有的操作和选项都被正确地执行和设置。当然，在亲自操作时，应当对故障现象做出详细的描
述，认真记录所有的出错信息，并快速记录所有有关的故障迹象，制作详尽的故障笔记。分析
这些究竟表明了什么，这些故障现象是否相互联系，在寻找问题答案的过程中，很有可能又导
致更多的故障现象产生。所以在开始排除故障之前，应按以下步骤执行。
（1）收集有关故障现象的信息。
（2）对问题和故障现象进行详细的描述。
（3）注意细节。
（4）把所有的问题都记下来。
3．列举可能导致错误的原因
接下来要做的就是列举所有可能导致故障现象的原因了。运维人员应当考虑，导致无法用
Web 浏览器的原因可能有哪些，是网卡硬件故障、网络设备故障，还是 TCP/IP 协议设置不当
等。在这个阶段不要试图去找出哪一个原因就是问题的所在，只要尽量多地记录下自己所能想
到的，而且是可能导致问题发生的原因就可以了，也可以根据出错的可能性把这些原因按优先
级别进行排序，不要忽略其中的任何一个细节。
4．缩小搜索范围
运维人员必须采用有效的软硬件工具，从各种可能导致错误的原因中一一提出非故障因
第3章 信息系统设施运维 159
素。对所有列出的可能导致错误的原因逐一进行测试，而且不要根据一次测试就断定某一区域
的网络是运行正常还是不正常。另外，当确定了一个错误后也不要自以为是地停下，而不再继
续测试。因为此时既可能是搞错了，也可能是存在的错误不止一个，所以，应该使用所有可能
的方法来测试所有的可能性。
除了测试之外，还要注意以下几件重要的事情。
（1）检查网卡、交换机和路由器面板上的LED指示灯。通常情况下，绿灯表示连接正常；
红灯表示连接故障；不亮表示无连接或线路不通；长亮表示广播风暴；指示灯有规律地闪烁才
是网络正常运行的标志。
（2）检查服务器、交换机或路由器的系统日志，因为在这些系统日志中往往记载着产生的
错误及错误发生的全部过程。
（3）利用网络管理软件检查问题设备。如Cisco Works、HP OpenView 等网管软件，具有
图形化的用户界面，交换机各端口的工作状态可以一目了然地显示在屏幕上。更进步，许多网
络管理软件还具有故障预警和告警功能，从而使在缩小搜索范围时省下不少的力气。
当然，在这一步骤中要及时记录下所有的观察及测试的手段和结果。
5．定位错误
运维人员经过反复的测试，明确故障源，假设可能是计算机出错，则首先检查该计算机网
卡是否安装好，TCP/IP协议是否安装并设置正确，Web浏览器的连接设置是否得当等一切与已
知故障现象相关的内容。然后就是排除故障。在排除之前需要对发生的故障有充分的了解，这
样故障排除也就变得简单了。但是，不要就此匆忙地结束工作，因为还有更重要的事情——故
障分析。
6．故障分析
故障处理完之后，作为运维人员必须搞清楚故障是如何发生的，是什么原因导致了故障的
发生，以及如何避免类似故障的发生，应拟定相应的对策，采取必要的措施，制定严格的规章
制度。
对于一些对于非常简单明显的故障，上述过程看起来可能会显得有些烦琐。但对于一些复
杂的问题，这却是必须遵循的操作规程。
最后，记录所有的问题，保存所有的记录。另外，经常回顾曾经处理过的故障也是种好的
习惯，这不仅是一种经验的积累，便于以后处理类似故障，而且还会启发思考许许多多与此相
关联的问题，从而进一步提高理论和技术水平。
3.4.3 故障诊断方法
信息系统设施的故障多种多样，不同的故障有不同的表现形式。在分析故障时要透过各种
现象灵活运用诊断方法，如排除法、对比法、替换法等。在实际应用中，要根据不同的故障现
象使用不同的方法，或者几种方法综合使用。
160 信息系统运行管理员教程（第2版）
1．排除法
排除法主要是根据所观察到的故障现象，尽可能全面地列举出所有可能导致故障发生的原
因，然后逐一分析、诊断和排除。
使用排除法虽然可以应付各种各样的设施故障，但要求运维人员拥有深厚的理论功底、丰
富的实践经验和较强的逻辑思维能力，且全面了解、掌握并灵活运用各种网络测试工具和管理
工具软件，善于分析问题和解决问题。同时，由于导致故障现象发生的因素比较复杂，往往是
一因多果或一果多因，因此，在解决和排除故障时会耗费较多的时间。由此可见，应当仔细观
察故障现象，并根据经验依次排列可能的故障原因，先从最可能导致故障的原因开始调查，从
而缩短故障定位和解决问题所用的时间。归根到底，其他所有故障排除方法都是从排除法演变
而来的，包括对比法和替换法，只是对比法和替换法在某些场合中比排除法更具有针对性而已。
2．对比法
顾名思义，就是对比故障设备和非故障设备之间的“软”“硬”差异，从而找出可能导致
故障的原因。可用于对比的内容包括网络设备、端口、线卡、系统配置和系统映像。
使用与所怀疑发生故障的网络设备完全相同的设备进行替换，或者使用相同的端口、插槽
或模块进行替换，并对两台设备或端口的不同连接进行对比，在对比结果中找出故障点并进行
排除。这种方法虽然简单有效，但有时可能出现故障的设备不止一台，那么排除起来就可能非
常麻烦了。
3．替换法
“替换法”从某种意义上来说与“对比法”是相同的，都是使用已知正常的设备或设备部
件进行替换，并找出故障的部件进行排障。替换法主要用于设备硬件故障的诊断，需要注意的
是，替换的部件必须是相同品牌、相同型号的同类网络设备。同时，替换法还是平时维修计算
机的一种方法，该方法在硬件维护方面的应用非常广泛。
3.4.4 故障诊断与修复原则
在排除设备故障时，决不能没有目的地乱碰运气，而应当遵循应有的规则和策略，只有如