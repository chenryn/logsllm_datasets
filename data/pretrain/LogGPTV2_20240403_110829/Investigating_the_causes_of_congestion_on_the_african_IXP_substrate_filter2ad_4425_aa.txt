title:Investigating the causes of congestion on the african IXP substrate
author:Rod&apos;erick Fanou and
Francisco Valera and
Amogh Dhamdhere
Investigating the Causes of Congestion
on the African IXP substrate
Rodérick Fanou
IMDEA Networks Institute and
Universidad Carlos III de Madrid
PI:EMAIL
Francisco Valera
Universidad Carlos III de Madrid
PI:EMAIL
Amogh Dhamdhere
CAIDA/UC San Diego
PI:EMAIL
ABSTRACT
The goal of this work is to investigate the prevalence, causes, and
impact of congestion on the African IXP substrate. Towards this
end, we deployed Ark probes (within networks peering) at six
African IXPs and ran the time-sequence latency probes (TSLP)
algorithm, thereby collecting latency measurements to both ends
of each mapped AS link for a whole year. We were able to detect
congestion events and quantify their periods and magnitudes at
four IXPs. We then verified the events and investigated the causes
by interviewing the IXP operators. Our results show that only
2.2% of the discovered IP links experienced (sustained or transient)
congestion during our measurement period. Our findings suggest
the need for ISPs to carefully monitor the provision of their peering
links, so as to avoid or quickly mitigate the occurrence of congestion.
Regulators may also define the maximum level of packet loss in
those links to provide some protection to communications routed
through local IXPs.
CCS CONCEPTS
• General and reference → Measurement; • Networks → Net-
work measurement; Network monitoring;
KEYWORDS
Congestion, IXP, Performance.
ACM Reference format:
Rodérick Fanou, Francisco Valera, and Amogh Dhamdhere. 2017. Investigat-
ing the Causes of Congestion on the African IXP substrate. In Proceedings
of IMC ’17, London, United Kingdom, November 1–3, 2017, 7 pages.
https://doi.org/10.1145/3131365.3131394
1 INTRODUCTION
The growing popularity of bandwidth-hungry applications such as
streaming video has generated renewed interest in understanding
the nature, location, and causes of performance degradations in
the Internet infrastructure. In the US or in Europe, previous studies
have found that congestion often occurs at the boundaries between
networks, due to disputes about which party should pay to upgrade
the infrastructure necessary for carrying traffic [16, 28]. However,
Permission to make digital or hard copies of all or part of this work for personal or
classroom use is granted without fee provided that copies are not made or distributed
for profit or commercial advantage and that copies bear this notice and the full citation
on the first page. Copyrights for components of this work owned by others than ACM
must be honored. Abstracting with credit is permitted. To copy otherwise, or republish,
to post on servers or to redistribute to lists, requires prior specific permission and/or a
fee. Request permissions from permissions@acm.org.
IMC ’17, November 1–3, 2017, London, United Kingdom
© 2017 Association for Computing Machinery.
ACM ISBN 978-1-4503-5118-8/17/11...$15.00
https://doi.org/10.1145/3131365.3131394
much less is known about the nature of congestion and its causes at
Internet Exchange Points (IXPs), particularly those located in devel-
oping regions such as Africa. While the possibility of performance
problems due to congestion is not unique to IXPs and could also
occur within ISPs operating in these regions, IXPs are of particular
interest due to their position as hubs that facilitate traffic exchange
between hundreds of connected networks. As there is a great push
to promote peering at IXPs in Africa [2, 13, 14, 25], it is of interest to
quantify the performance at those infrastructures. The absence of
congestion or performance problems on the IXP may help to dispel
the doubts of ISPs that are still reluctant to join local IXPs. In cases
where there is evidence of poor performance, it is also important
to be aware of the causes (peering disputes or other reasons).
To fill the lack of congestion related measurements at IXPs in
Africa, we selected six IXPs located in three of the five African
sub-regions [1, 3] for reasons discussed in §3. Notably, the only
sub-regions involved are West, East, and Southern Africa, as we
were not able to find hosts to deploy our probes at IXPs in the
other African sub-regions. We used techniques allowing continuous,
fine-grained, and longitudinal measurements. Using time-sequence
latency probes (TSLP) [28] measurements run from Ark probes
deployed at those selected IXPs over a year (from February 2016 to
April 2017), we inferred whether any of the discovered links were
congested. We then evaluated the extent to which this phenomenon
influenced RTTs to the near and far ends of those links and the
characteristics of the observed patterns. We also evaluated the
impact on the links in terms of packet loss. Finally, we investigated
the causes by interviewing the IXP operators.
We detected cases of congestion at four IXPs. We show how
RTTs and loss rates to the far end increase drastically during the
congestion events, and delve into the root cause of the observed
congestion. Although we did not find any evidence of widespread
congestion (only 2.2% of the measured links showed evidence of
congestion during our measurement period), our findings suggest
the need for ISPs to monitor the provisioning of their peering
links to avoid or quickly mitigate the occurrence of congestion.
Regulators may also define the maximum permissible level of packet
loss in those links with the goal of improving performance at local
IXPs and thereby making those facilities attractive hubs for local
interconnection.
The rest of this paper is organized as follows. We discuss re-
lated work in §2. We then give a description of our measurement
infrastructure in §3. In §4 we present the data collection process as
well as the AS link inference and validation. We detail the analysis
performed on the dataset in §5. In §6 we present case studies of
congestion discovered on links probed from our vantage points
(VPs) located at two of the studied IXPs, discuss their causes, and
IMC ’17, November 1–3, 2017, London, United Kingdom
R. Fanou et al.
examine their consequences. Finally, we conclude and outline our
perspectives for future work in §8.
2 RELATED WORK
Chetty et al. [11] measured broadband performance in South Africa
using measurement software implemented on mobile phones and
home routers. They found that users in South Africa do not get ad-
vertised speeds, and the interconnection (or lack of it) between local
ISPs mainly determines reliability and user performance. Gupta et
al. [18] found that 66.8 % of paths from their vantage points toward
Google caches, both located in the region, detoured through Eu-
rope. Using RIPE Atlas probes scattered throughout Africa, Fanou et
al. [13] underlined the reliance on ISPs based outside the continent
for serving intra-continental traffic, detected the launch of new
IXPs, and showed the positive impact of peering at local IXPs on
AS path lengths and delays. Chavula et al. [22] examined, using
Ark monitors, communications among African research networks.
They found that 75 % of the paths are routed via Europe and the
US, increasing RTTs by 150 ms on average. More recently, Fanou et
al. performed a longitudinal study [14] of the evolution of connec-
tivity among local African networks from 2013 to 2016, highlighting
the prevailing dominance of intercontinental ASes, mapping both
existing and newly launched IXPs, and exhibiting with diverse case
studies the significant improvements in QoS resulting from more
peering in the region.
3 MEASUREMENT INFRASTRUCTURE
The time-sequence latency probes (TSLP) method [28] consists of
frequently performing round trip time (RTT) measurements from
a vantage point (VP) within a network to the near and far routers
of an interdomain link of the hosting network. If the interdomain
link is congested, then the buffer occupancy at the link increases
and RTTs measured across the link also increase. We can thus infer
from a pattern showing an increase of RTTs to the far end of an
AS link (but no increase to the near end of the link), that a queue
between the routers on both sides of the link caused the observed
delay. Luckie et al. [28] used traffic data from a research network
to validate the TSLP technique. An advantage of adopting the said
technique is that it makes it possible for a vantage point placed
within or at the edge of a network to monitor congestion in that
network without explicit cooperation from the network operator.
We used the CAIDA Archipelago (Ark) measurement plat-
form [9] because of its capacity to perform fine-grained measure-
ments. Ark allows us to run scamper [27] on its monitors (e.g., for
limiting the TTL value of the ICMP packets, sending a burst of
packets through the congested link, etc.) and to gain more vis-
ibility on the events occurring on the IP layer, while perform-
ing a longitudinal TSLP-based study. We used probes deployed
at six African IXPs [15, 42] located in three of the five African sub-
regions: Ghana Internet eXchange Association (GIXA, launched in
Ghana in 2005) [17], Johannesburg INternet eXchange (JINX, South
Africa, 1996) [21], Kenya IXP (KIXP, Kenya, 2002) [41], Serekunda
IXP (SIXP, Gambia, 2014) [38], and Tanzania IXP (TIX, Tanzania,
2004) [39].
These are interesting IXPs, as (i) they are mature and large Inter-
net markets that will allow us to analyze a large number of peering
links from each VP, (ii) they may become regional IXP hubs in
the near future, as they have the potential to attract more mem-
bers. By regional IXP hub we refer to a local IXP at which most
networks operating in a sub-region peer, which thus helps localize
traffic among countries located in that sub-region. We deployed
the VPs in two different settings: some (VP1–3) are plugged into
the content network of the IXP. The term content network refers to
the network, usually connected to the IXP switches, which hosts
all resources designed to offer common services to the members
i.e., cache instances, Internet portals, search engines, NTP servers,
routing registry, looking glass, etc. Commonly, the content network
is not separated from the peering network. As we show later (§6.2.1),
this is not the case for all IXPs. From VPs deployed on the content
network of the IXP, we expect to discover all networks accessing
the content available at the IXP. Others (VP4–6) are hosted by ASes
that peer at the IXPs. From these VPs we expect to discover, among
others, the peers of the host network at the IXP.
4 DATA COLLECTION
We detail how we collected the studied dataset and how we inferred
and validated the AS relationships.
We automatically inferred the host networks’ boundaries and dis-
covered their respective border links using the CAIDA’s border map-
ping tool bdrmap [10, 29]. The border mapping process first gathers
routing and addressing data used for data collection and analysis.
The input datasets are prefix-AS mappings constructed from public
BGP data (RouteViews [30] and RIPE RIS [36]), CAIDA’s AS-rank
algorithm [8] used to infer AS relationships, delegation files pub-
lished by the 5 Regional Internet Registries (RIRs) [4, 5, 7, 26, 35], a
list of IXP prefixes from PeeringDB [33] and Packet Clearing House
(PCH) [31], and a list of sibling ASes of the VP’s AS. The creation of
the sibling list is a semi-manual process seeded with CAIDA’s AS-
to-organization mapping to which we then manually add missing
siblings and remove spurious ones. bdrmap uses an efficient variant
of traceroute to trace the path from each VP to every routed prefix
observed in BGP. It then applies alias resolution techniques to infer
routers and point-to-point links used for interdomain interconnec-
tion. This collected data is used to assemble constraints that guide
the execution of heuristics to infer router ownership. The border
mapping process aims to obtain sufficient information about the
links observed from the VP’s AS toward every other AS to constrain
the border router inferences. To validate the bdrmap output we first
checked the inferred links against public datasets [20, 32, 33, 37].
We emailed the probe hosts for cross-checking when our results
were in contradiction with those public datasets. Four of the six
involved VP hosts responded to our queries. They also gave us more
insights into the setup of links that the border mapping process had
correctly discovered (§6.2). This cooperation allowed us to better
analyze the collected data. On average the border mapping process
correctly discovered 96.2 % of the neighbors of the VP networks.
Next, we periodically probed both ends of each discovered IP
link every 5 minutes using TTL-limited probes set to expire at the
near and far ends of the link. Regarding ethical considerations, we
ensured that our measurements would not adversely affect the VP
network by using a low probing rate (small packets sent at the rate of
100 packets per second). Moreover, the targets of the probing traffic
Investigating the Causes of Congestion on the African IXP substrate
IMC ’17, November 1–3, 2017, London, United Kingdom
(both ends of each mapped IP link) do not put the Ark probe hosts
at risk. Our probes do not collect traffic data or any information
that may be considered sensitive due to privacy reasons. We ran our
measurements for a year from 22/02/2016 to 27/03/2017. In §5.2 we
detail how we detect congestion events from the analysis of these
TSLP measurements. In case we detected repeated occurrences of
congestion on a link (§5.2), we set up measurements attempting to
measure packet loss on those links by probing both ends of those
links at a higher rate, i.e., one packet per second, and then computed
the loss rate over every batch of 100 probes. We ran the loss rate
measurements from 19/07/2016 to 01/04/2017; these began roughly
5 months after latency measurements, because we made sure the
targeted links were all suffering from repetitive congestion events
before launching the loss rate measurements.
5 DATA ANALYSIS
5.1 Evolution of number of discovered links
For each VP we identified the links discovered from that VP that
were at the IXP, since some VPs are hosted by an IXP member,
whereas others are in the content network of an IXP (§3). To achieve
this, we categorized the links having any of their IPs belonging
to the (peering or management) prefix of any studied IXP as links
established at those IXPs. After that, we validated the bdrmap out-
put (§4) with the corresponding IXP operator and inspected the
evolution of the number of neighbors of the VP’s AS over time
(§6.1). We also geolocated both IPs of each link using the Netacuity
Edge Database [12] and hints in Reverse DNS outputs [19, 34] as
added checks that those links were indeed established at the IXPs.
5.2 Analysis of congestion cases
We began by gathering the RTT time series collected in §4 per
VP and discovered neighbor. Then, we applied an algorithm to
detect level shifts in the measured time series, which indicate that
the router queue at the interdomain link was filling up, possibly
due to the link being congested. The level-shift algorithm identifies
changes in the direction of the rank-based non-parametric statistical
cumulative sum (CUSUM) test [40] as evidence of a level-shift. We
tuned the algorithm to use 5-minute latency samples and to detect
level shifts that last at least 30 minutes. The magnitude of a level
shift that results from congestion corresponds to the size of the
router buffer. We impose a threshold on the minimum magnitude
of the level shifts that we label as potentially caused by congestion.
The objective of this threshold is to eliminate false detections that
result from noise in the RTT times series or slow ICMP response
generation from the routers. Next, we show that this objective is
achieved reasonably well with a threshold of 10 ms.
We inspected the sensitivity of selecting 10 ms as opposed
to 5 ms, 15 ms, or 20 ms by analyzing the variation in the num-
ber of inferred congested links. For each value of the threshold,
we obtained the links flagged as potentially congested (Table 1),
and manually checked whether those links had a persistent di-
urnal pattern indicating peak-hour congestion. We flagged 11.2 %
more links as potentially congested when using 5 ms; however, the
number of links for which we identified a recurring diurnal pat-
tern was the same as that with a 10 ms threshold. In contrast, we
flagged 50 % fewer links with recurring diurnal patterns when using
a 15 ms or 20 ms threshold. Finally, we contacted the IXP operators
to confirm whether 10 ms was a reasonable threshold. We received
2 responses; both stated that they considered 10 ms a reasonable
threshold.
Table 1: Sensitivity analysis of the threshold value used for
labeling potentially congested links in our datasets.
VP
VP1
VP2
VP3
VP4
VP5
VP6
All VPs
# Potentially congested links (with