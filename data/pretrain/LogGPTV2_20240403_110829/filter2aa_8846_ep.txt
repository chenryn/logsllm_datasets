①电子链接/电子传送 Electronic Vaulting（不是实时同步的/1 天 1 次）
数据库备份通过定时周期性的、批量传送的方式备份到远处的一个场所。如果你使用了电
子链接，那么需要记住的是，从宣布灾难开始到数据库准备好当前的数据准备运营，可能存在
着相当大的时间延迟。如果你决定启用恢复站点，技术人员需要从电子链接中检索到适当的备
份数据，并应用到恢复站点中即将投入使用的生产服务器上。与供应商签订电子链接合同的时
候，要考虑存储容量、通信链接带宽、定期测试和在灾难发生时检索到保险库数据所需的时间
等各种因素。庞大的数据库是通过其它方式先运输并存储到异地的，再通过链接来访问。
②电子日志/远程日志处理 Remote Journaling（不是实时同步的/1 小时 1 次/更频繁）
远程日志处理是以一种更加迅速的方式完成数据的传输。数据传输仍然是以批量传输的方
式进行，但是发生的更加频繁，通常每小时一次或者问隔时间更短。与电子链接不一样的是，
在数据库不转移数据文件，只同步日志，备份数据库根据日志自行更新数据。当宣布发生灾难
的时候，技术人员找到合适的事务日志并将其应用于生产数据库。
③远程镜像 Remote Mirroring（实时的全备份）
远程镜像是最先进的数据库备份解决方案，也是最贵的。远程镜像所使用的技术水平超过
了远程日志处理和电子链接。具体怎么做的，跟日志有什么区别，我不知道。
其实还有其它几种方式：
④磁带传送 tape vaulting
将数据备份到磁带上，然后由一名收发员手动将它们运输到一处异地设施。如果使用自动
磁带传送(tape vaulting)技术，数据通过一条串行线路传送到异地设施的备份磁带系统中。
维护异地设施的公司对这个系统进行维护，并在必要时更换磁带。在需要时，它可以迅速地备
份和检索数据。
5.备份和离站存储 Backups and Offsite Storage
灾难恢复计划(尤其是技术指南) disaster recovery plan 应该完整地说明组织要求的备
份策略。有 3 种备份类型：
①完整备份/全备份 Full Backups。
采用离站存储数据，包括全部关键数据。最有效，最费时。
②增量备份 Incremental Backups。
基于最近的完全备份或增量备份，再备份已改变的数据。为了确认文件在上次完全备份后
是否有改变，使用归档位（archive bit）标识该文档，即：只复制归档比特被打开、启用或
设置为 1 的文件；一旦增量备份完成，所有被复制的文件的归档比特都会被重置、关闭或设置
为 0。恢复时，先恢复完全备份，再按时间逐个恢复增量备份。
—211—
③差量备份 Differential Backups。/差异备份
基于最近的完全备份，仅备份改变的数据，不改变归档位的值。恢复时，先恢复完全备份，
再恢复差量备份。
④差量和增量的区别：一是基础，差量基于上次的完全备份，增量不管上次是什么备份；
二是标记，差量不改变归档位，增量改变；三是时间，组合使用完整备份和差异备份，只还原
两个备份，更快；组合使用完整备份和增量备份，需要还原最近的完整备份和所有的增量备份，
更慢。（差完全、增上次）
不能将差量备份和增量备份混杂起来，这种重叠可能造成文件丢失。
6.驱动器和数据存储
包括存储区域网络(SAN)和网络附加存储(NAS)等。其中最常见的故障类型是驱动器故障。
①SAN 存储区域网络(Storage Area Network )
一个 SAN 包括专用的块级存储和专用的网络。包括各类存储设备，如磁带库，光盘驱动器
和磁盘阵列。他们利用 iSCSI 协议连接操作系统的本地连接设备，提供了相同的 RAID 水平。
SANS 还提供额外的性能，容量和冗佘选项等。例如，为温站点或热站点提供系统备件，提供
远程异地镜像，等。
②网络附加存储 NAS(network attached storage)
NAS 是一个类似 SAN，但有几个非常重要的区别。NAS 一般设计用于简单存储服务文件，
NAS 操作不是块级，而是文件级。常用于 FTP 服务器和其他类型的文件服务器，它们通常映射
为网络驱动器。也可以用来提供跨网络的多个系统的存储。它们也普遍支持相同的 RAID 级别，
在应用程序和数据库软件平台上，也有额外的冗余选项。例如，数据库同步技术可以使用数据
库管理系统在多个位置更新记录。无盘工作站就是通过网络来存储的，就是 NAS，就是网盘。
7.磁盘簇
如果所有这一切需要的是基本的数据存储，那么 just-a-bunch-of-drives(JBOD)配置可
能是最合适的。如果磁盘配置以这种方式，每个磁盘可以单独使用，并彼此隔离。
在这种情况下，数据被存储在离散的磁盘上，而不是存储在多个磁盘上。分区通常存储在
单个磁盘上(而不是跨越多个磁盘)。在某个驱动程序失败的情况下，所有的数据都会被丢失，
但其他驱动器将继续提供。这可能需要使用多个磁盘的一个分区，这称为级联。级联磁盘会出
现操作系统作为一个单一的连续驱动管理。这可能是最合适的，特别大的分区是可取的，但驱
动器故障可能会造成相当大的问题，因为所有的数据在驱动器失败时候将丢失。
K.2 恢复站点策略
1.受信恢复 Trusted Recovery
恢复程序能够保证系统在发生故障或崩溃之后，能够还原因之前的状态。系统可以被预置，
在损坏时能够处于故障防护状态 fail-secure system 或者应急开放状态 fail-open system。
故障防护状态的系统会在故障发生时保持在防护状态，并禁止所有访问；而应急开放状态在发
生故障前保持在开放的状态，并允许所有访问。举个栗子就是，一扇自动门如何停电了，是保
持关闭还是开放呢？这个选择取决于在系统的业务运行重要还是安全更重要。
失效安全和失效开放 Fail-secure and fail-open
—212—
应用程序故障时，其代码应被设计成能有效应对一般意义上的失败，有两个基本选择：
①失效安全状态/故障安全机制：置系统于一个高安全级别(甚至完全关闭禁用它)直到管
理员可以诊断问题和恢复系统正常运行。（微软的蓝屏）
②失效开放状态/故障保护控制：允许用户绕过失败的安全控制，忽略错误的发生。
任何系统的恢复过程有两个要素来确保一个可信的解决方案的实施。
一是失败准备。除了备份方案之外，还要有系统恢复及容错的方法。
二是系统恢复的过程。系统应该重新启动，恢复所有受影响的文件和服务，检查所有重要
的安全文件的设置等等。
受信恢复有 4 种类型：
①手动式恢复 Manual Recovery
如果系统崩溃了，系统并没有处于故障防护状态。相反的是，在系统故障或崩溃后，管理
员需要手动执行必要措施，以实现系统恢复。
②自动式恢复 Automated Recovery（多种故障）
对于至少一种类型的系统故障，系统能够自动执行受信恢复。例如，RAID 硬盘能够恢复
硬盘驱动器故障但是不能恢复整个服务器故障。一些类型的故障需要手动恢复。
③无过度损失的自动式恢复 Automated Recovery without Undue Loss
这类似于自动式恢复，对于至少一种类型的系统故障，系统能够自动执行恢复过程。然而，
这其中包括一些能够保护特定对象免受损失的机制。无过度损失的自动化恢复的方法包括对数
据及其他对象的恢复。它可能含有其他机制，以恢复受损文件，重建日志数据，并验证密钥系
统和安全组件的完整性。
④功能恢复 Function Recovery
支持功能恢复的系系能够自动恢复某些特定功能。这种状态能够确保系统成功地完成功能
恢复。否则系统将会回到变更前时的故障防护状态。
2.确定业务单元的优先顺序 Business Unit and Functional Priorities
为了尽可能最有效地恢复你的业务运营，你就必须精心策划你的灾难恢复计划，以至于优
先级别最高的业务单元能被最先恢复。你必须识别和优化重要业务功能，还有你能定义在发生
灾难或错误之后你想恢复哪个功能或者以什么顺序恢复。
第一域的 G.2 章节已经讲过业务影响分析 BIA 了，这里也要用到。大多数单位将 BIA 作为
业务连续性规划过程的一部分，这种分析能够检测漏洞、建立策略来降低风险， 并最终生成
一个BIA报告以描述组织面临的潜在风险并确定重要的商业单元和功能。拥有所有的BIA信息，
便可以使用生成的文件作为优先级任务的基础。
3.可替代的工作站点 Alternate Processing Sites
灾难恢复计划中最重要的要素之一是：在主要的工作站点无法使用的时候，选择可以替代
的工作站点。在灾难恢复计划中经常使用的几类站点有：冷站点、温站点、热站点、移动站点、
服务局（service bureaus）以及多站点。
热站是在线的，其它都是离线的离站。Offsite。
①冗余站点（rddundant site）冗余场所/镜像站点
地理上分散的两个数据中心，之间热交换或负载平衡，可以完全接替，连人都有备份。
—213—
冗余中心的优势：*很少或没有停机时间、*易于维护、*没有恢复需求
冗余中心的缺点：*更多的费用、*需要冗余的硬件、网络系统和员工、*距离限制
②内部或者外部热站点（hot site）/完备场所
内部热站点：该站点是准备就绪的，包括所有的技术、设备和应用程序，有实时数据。
外部热站点：与服务商提供签约提供的，与在线站点尽可能接近。在外部热站点上只有硬
件，没有任何应用程序或数据。
内部或外部热站点的优点：*允许测试恢复、*高可用性、*站点快速恢复
内部或外部热站点的缺点：*价格昂贵、*外部站点的硬件和软件兼容性问题
③温站点或冷站点（warm site/cold site）基本完备场所/基础场所
温站点：有基础设施(空调/电脑/布线/通信)，无服务器、无数据（通常 12 小时启用）。
冷站点：空的数据中心空间，只有物理设施，所有设备和技术必须在灾难时购买或获得。
温和冷的网站的优点：*更少的费用、*长期恢复的可用性
温和冷的网站的缺点：*不能立即使用、*没有完整的测试、*只支持部分关键业务恢复
④移动站点（rolling hot site）滚动完备场所
将数据中心被安置在一个移动拖车或一个标准的海运集装箱中。灾难发生时，将它移动到
另一个有必要的电力、资源和通信的地点继续经营。
移动站点的优势包括：*高可移动性、*模块化、*不需要房间
缺点包括：*冷站点能力有限、*密度和容积升级容量有限、*运输成本高
⑤互助协议/互惠协议 Mutual Assistance Agreements/ reciprocal agreement
互惠协议（reciprocal agreement）是在组织之间分担彼此风险，帮助对方在空难中恢复
数据和处理。虽然合乎逻辑，但也充满兼容性、竞争保密、性能不足等问题。
联盟是互惠协议的一个变体，也称为相互援助协议（mutual aid agreement），就是多个
组织互相帮助。
⑥服务局 Service Bureaus（相当于云服务供应商或产品租赁商）
服务局是租借计算机时间的公司。服务局拥有很大的服务器群，并且通常具有大量工作站。
任何组织机构都可以与服务局签署购买合同，以便使用部分处理能力。访问可以是联机的，也
可以是远程的。在发生灾难时，服务局的工作人员通常能够为你的所有 IT 需求提供支持，甚
至工作人员还能够使用台式机。与服务局签署的合同往往包含测试和备份以及响应时间和可用
性。
⑦外包
为了避免这些问题的互惠协议和建设替代站点的成本，一些组织可以通过服务水平协议
(SLA)选择外包他们的应急行动和灾难恢复。但真出事了，不一定靠谱。
4.集群
集群技术也可以使用，但不是冗余和负载平衡。在集群技术中，双活系统可以随时提供服
务，在一个系统失败的情况下，会降低服务能力。
K.3 多处理站点（例如：运行的冗余系统）（multiple processing center）多处理中心
企业的另一种备份方案，如跨国公司在世界各地都有服务站点，就可以互为备份。这是新
—214—
加的内容，不知道怎么考。
K.4 系统弹性、高可用性、服务质量和容错
系统的弹性、高可用性、服务质量和容错的备件冗余项目被称为在系统中提供容错。就是
容灾备份了。总之：冗余、容错和故障转移功能提高了系统或网络的可靠性；高可靠性可实现
高可用性。
1.容错能力 Fault Tolerance
是指系统在发生故障的情况下，仍然继续运行的能力。容错性是通过添加冗余组件实现的，
如在廉价冗余磁盘阵列(RAID)中的额外磁盘，或在故障转移群集配置中的额外服务器。
2.系统弹性 System Resilience
指的是系统在发生不利事件时保持一个可接受的服务水平能力。这可能是硬件错误，或可
能是其他控制管理的攻击。在某些情况下，它指的是在发生不利事件后，系统的还原能力。
容错能够使得系统故障转移到另外的服务器上，而系统弹性能够保障在原系统修复后，该
集群能够返回原服务器。
3.服务质量 Quality of Service
服务质量（QOS）控制能够保护负载下的数据网络的完整性。许多不同的因素有助于提升
最终用户体验的质量，服务质量对这些要素进行管理，以创造能够满足商业需求的环境。有助
于服务质量提升的一些因素如下：
①宽带 Bandwidth——可供通信的网络容量。
②延迟 Latency——时间数据包从源到目的地所需要的时间。
③抖动 Jitter——不同数据包之间的延迟变化。
④丢包 Packet Loss——数据包可能会在源和目的地之间的传送过程中丢失，需要重传。
⑤干扰 Interference——电噪声、故障设备等因素可能会损坏数据包的内容。
除了控制这些因素之外，QOS 也会给业务按优先级排序，先保障高级别的业务。
4.高可用性(HA)
高可用性(HA)是保证一些业务始终正常运行的一种技术和流程的结合。具体业务可能是一
个数据库、一个网络、一个应用程序、一个电源等。服务提供商与他们的客户之间有服务水平
协议 SLA，其中概述了它们承诺提供的正常运行时间和当网络无法连接时能够使该服务正常运
转的周转时间。例如，托管公司可以保证互联网连接提供 98%的正常运行时间。这意味着它们
可以保证至少 98%的时间内你在他们那儿购买的互联网连接能够正常启动并运行。为了提供这