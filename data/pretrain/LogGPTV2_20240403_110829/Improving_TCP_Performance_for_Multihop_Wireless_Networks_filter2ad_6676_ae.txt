0-7695-2282-3/05 $20.00 © 2005 IEEE
FTP 1
FTP 1
FTP 2
FTP 2
FTP 3
FTP 3
FTP 4
FTP 4
FTP 5
FTP 5
FTP 6
FTP 6
Aggregate Goodput
Aggregate Goodput
1600
1600
1400
1400
1200
1200
1000
1000
800
800
600
600
400
400
200
200
0
0
]
]
s
s
/
/
t
t
i
i
b
b
K
K
[
[
t
t
u
u
p
p
d
d
o
o
o
o
G
G
Vegas
Vegas
NewReno
NewReno
Vegas 
Vegas 
NewReno
NewReno
ACK Thinning
ACK Thinning
ACK Thinning
ACK Thinning
Fig 17: Grid topology: Single goodput of each flow 
and aggregate goodput over all flows for different 
TCP variants at 11 Mbit/s
Table 3: Grid topology: Jain’s fairness index
TCP Vegas TCP NewReno
TCP Vegas w/ 
ACK Thinning
 TCP NewReno w/ 
ACK Thinning
0.54          
0.32           
0.69             
0.40              
2 Mbit/s
[0.53 : 0.55]
[0.31 : 0.33]
[0.68 : 0.70]
[0.38 : 0.42]
0.64          
0.43           
0.87             
0.56              
5.5 Mbit/s
[0.60 : 0.68]
[0.40 : 0.46]
[0.84 : 0.90]
[0.52 : 0.60]
0.73          
0.52           
0.94             
0.63              
11 Mbit/s
[0.69 : 0.77]
[0.48 : 0.56]
[0.90 : 0.98]
[0.60 : 0.66]
one  and  six  achieve  the  highest  goodput  on  cost  of  the 
remaining flows, which basically starve. However, using 
TCP  Vegas,  flows  one  and  six  achieve  less  goodput, 
sacrificing more bandwidth for the remaining flows, and 
thus  achieving  more  fairness.  Regarding  TCP  NewReno 
with ACK thinning and TCP Vegas with ACK thinning, 
we observe similar effects. Although TCP NewReno with 
ACK  thinning outperforms  all other  variants  in  terms  of 
aggregate  goodput,  it  achieves  less  fairness  than  TCP 
Vegas with ACK thinning. In fact, TCP Vegas with ACK 
thinning  achieves  the  best  fairness  of  all  variants  with 
only  10%  less  aggregate  goodput  than  TCP  NewReno 
with  ACK  thinning.  Previous  studies  [14]  have  reported 
up  to  42%  less  aggregate  goodput  in  order  to  achieve 
near-optimal  fairness.  To  formally 
the 
fairness  among  all  six  TCP  flows,  we  calculate  Jain’s 
fairness index for each variant and bandwidth as defined 
in  Section  4.1.  The  results  are  shown  in  Table  3.  Recall 
that  a  fairness  index  of  1/n  indicates  worst  fairness 
among  n  flows,  while  a  fairness  index  of  1  indicates 
optimal  fairness.  The  values  in  the  table  confirm  our 
previous  findings.  Furthermore,  we  notice  that  not  only 
ACK  thinning  improves  the  fairness  of  TCP  Vegas  and 
TCP NewReno, but also increasing the bandwidth, since 
both  reducing  the  TCP  ACKs  as  well  as  increasing  the 
bandwidth result in less contention on the link layer, and 
thus less competition between the flows.  
investigate 
Consistent  with  the  results  of  Section  4.3,  we 
conclude from Figures 16 and 17 as well as from Table 3 
that  TCP  Vegas  with  ACK  thinning  is  the  protocol  of 
choice for achieving the best trade-off between aggregate 
goodput and fairness. Among all examined variants, TCP 
Vegas  with  ACK  thinning  achieves  best  fairness  results 
and  has  only  10%  less  aggregate  goodput  than  TCP 
NewReno with ACK thinning. 
4.4.2
Random Topology 
As  a  third  topology,  we  consider  a  random  topology 
of  120  nodes  uniformly  distributed  on  an  area  A  = 
2500x1000  m2.  We  set  10  FTP  connections  that  run 
simultaneously,  with  all  FTP  sources  and  destinations 
randomly  selected.  According  to  [2],  all  nodes  in  the 
network  can  communicate  with  each  other  over  one  or 
more hops with probability P = 99.9%. 
Figure  18  plots  the  aggregate  goodput  for  the  TCP 
variants  at  different  bandwidths.  Consistent  with  the 
results for the previous topology, we see that TCP Vegas 
and  TCP  NewReno  achieve  similar  goodput  for  all 
bandwidths,  with  a  maximum  of  3%  more  goodput  for 
TCP  Vegas  at  11  Mbit/s.  Applying  ACK  thinning  for 
both  TCP  Vegas  and  TCP  NewReno  also  improves  the 
goodput  for  increasing  bandwidth.  Different  from  the 
cases  for  2  Mbit/s  and  5.5  Mbit/s  where  TCP  NewReno 
with ACK thinning slightly outperforms TCP Vegas with 
ACK  thinning,  both  variants  achieve  identical  goodput 
for 11 Mbit/s. Figure 19 shows the goodput of each flow 
as  well  as  the  aggregate  goodput  over  all  flows  for  all 
examined  TCP  variants  and  a  bandwidth  of  11  Mbit/s. 
Compliant  with  the  results  for  the  grid  topology,  we 
observe  that  by  using  TCP  NewReno,  the  fourth  flow 
gets  the  highest  fraction  of  the  available  bandwidth  on 
cost  of  the  other  flows,  letting  flows  three  and  eight  
completely  starve.  Overall,  TCP  Vegas  achieves  more 
fairness than TCP NewReno, and applying ACK thinning 
further  improves  fairness,  letting  TCP  Vegas  with  ACK 
thinning  achieve  the  best  fairness  among  all  variants. 
Extending  our  findings  of  Figure  17,  we  observe  that 
Vegas
Vegas
NewReno
NewReno
Vegas ACK Thinning
Vegas ACK Thinning
NewReno ACK Thinning
NewReno ACK Thinning
]
]
s
s
/
/
t
t
i
i
b
b
K
K
[
[
t
t
u
u
p
p
d
d
o
o
o
o
G
G
e
e
t
t
a
a
g
g
e
e
r
r
g
g
g
g
A
A
600
600
500
500
400
400
300
300
200
200
100
100
0
0
2
2
5.5
5.5
11
11
Bandwidth [Mbit/s]
Bandwidth [Mbit/s]
Fig 18: Random topology: Aggregate goodput for 
different bandwiths
]
]
s
s
/
/
t
t
i
i
b
b
K
K
[
[
t
t
u
u
p
p
d
d
o
o
o
o
G
G
600
600
500
500
400
400
300
300
200
200
100
100
0
0
Vegas
Vegas
NewReno
NewReno
Vegas 
Vegas 
NewReno
NewReno
ACK Thinning
ACK Thinning
ACK Thinning
ACK Thinning
FTP 1
FTP 1
FTP 2
FTP 2
FTP 3
FTP 3
FTP 4
FTP 4
FTP 5
FTP 5
FTP 6
FTP 6
FTP 7
FTP 7
FTP 8
FTP 8
FTP 9
FTP 9
FTP 10
FTP 10
Aggregate Goodput
Aggregate Goodput
Fig 19: Random topology: Single goodput of each 
flow and aggregate goodput over all flows for 
different TCP variants at 11 Mbit/s
Proceedings of the 2005 International Conference on Dependable Systems and Networks (DSN’05) 
0-7695-2282-3/05 $20.00 © 2005 IEEE
Table 4: Random topology: Jain’s fairness 
index
TCP Vegas
TCP NewReno
TCP Vegas w/ 
ACK Thinning
 TCP NewReno w/ 
ACK Thinning
2 Mbit/s
[0.41 : 0.45]
[0.20 : 0.24]
[0.60 : 0.64]
[0.38 : 0.42]
0.43          
0.22           
0.62             
0.40              
5.5 Mbit/s
[0.77 : 0.83]
[0.64 : 0.72]
[0.85 : 0.89]
[0.67 : 0.73]
0.80          
0.68           
0.87             
0.70              
11 Mbit/s
[0.84 : 0.90]
[0.70 : 0.74]
[0.88 : 0.92]
[0.71 : 0.77]
0.87          
0.72           
0.90             
0.74              
increasing 
thinning  and 
TCP  Vegas  with  ACK  thinning  achieves  the  same 
aggregate goodput as TCP NewReno with ACK thinning 
in  spite  of  its  best  fairness  results.  In  this  case,  TCP 
Vegas  with  ACK  thinning  achieves  the  best  trade-off 
between aggregate goodput and fairness. Equivalent with 
the  results  for  the  grid  topology,  Table  4  confirms  that 
both  applying  ACK 
the 
bandwidth  availability  increases fairness for  all variants. 
This  simulation  confirms  that  TCP  Vegas  with  ACK 
thinning is the protocol of choice for all bandwidths and 
multi-flow  environments.  Figure  19  further  extends  our 
findings by showing that TCP Vegas with ACK Thinning 
can  achieve  best  fairness  results  without  sacrificing 
aggregate goodput in comparison to TCP NewReno with 
ACK  thinning.  From  Table  3  and  Table  4  we  conclude 
that  TCP  Vegas  achieves  between  21%  and  95%  more 
fairness  than  TCP  NewReno,  whereas  TCP  Vegas  with 
ACK  thinning  yields  a  fairness  improvement  of  22%  to 
73% compared to TCP NewReno with ACK thinning. 
Conclusions 
that 
We showed that in static multihop wireless networks 
using IEEE 802.11, TCP Vegas with parameters (cid:68) = (cid:69) = 
2  clearly  outperforms  TCP  NewReno,  which  is  widely 
deployed in wired networks. In fact, TCP Vegas achieves 
up  to  83%  higher  goodput  and  up  to  99%  less  packet 
retransmissions.  Consistent  with  [1],  we  find  that  ACK 
thinning substantially increases the performance for TCP 
NewReno  for  persistent  flows  over  IEEE  802.11  with  2 
Mbit/s  bandwidth.  However,  we  observe 
this 
improvement  is  not  due  to  the  reduced  number  of  link-
layer  packet  collisions  triggered  by  hidden  terminal 
effects.  In  fact,  the  key  driver  why  ACK  thinning 
improves  the  performance  of  TCP  NewReno  constitutes 
the  fact  that  ACK  thinning  considerably  reduces  the 
average window size and, thus, helps TCP NewReno stay 
closer to the optimum window size for multihop wireless 
networks.  TCP  Vegas  with  appropriately  chosen 
parameters  already  keeps  its  window  size  close  to  the 
optimum. As a consequence, ACK thinning yields almost 
no  goodput  improvement  for  TCP  Vegas  over  IEEE 
802.11  with  2  Mbit/s  bandwidth.  For  TCP  Vegas  over 
IEEE 802.11 with 5.5 Mbit/s and 11 Mbit/s bandwidths, 
ACK  thinning  yields  up  to  25%  goodput  improvement, 
because  the  reduced  ACK  stream  causes  better  channel 
utilization for data packets. 
We find that TCP Vegas achieves better fairness than 
TCP NewReno and that both applying ACK thinning and 
increasing 
the  bandwidth  availability  yield  further 
fairness  improvement,  letting  TCP  Vegas  with  ACK 
thinning  achieve  the  best  fairness  results  among  all 
examined  variants  for  all  bandwidths,  with  24%  to  73% 
more fairness than TCP NewReno with ACK thinning. 
Finally, it is noteworthy that the substantially reduced 
amount of packet retransmissions of TCP Vegas and TCP 
Vegas  with  ACK  thinning  results  in  significant  savings 
of  energy  consumption.  Thus,  if  we  consider  both 
goodput and fairness, the transport protocol of choice for 
ad  hoc  networked  PDAs  and  other  mobile  devices  with 
restricted  energy  resources  should  be  TCP  Vegas  with 
ACK 
in  case  of  2,  5.5  and  11  Mbit/s 
bandwidths, respectively. 
thinning 
References
[1]   E.  Altman  and  T.  Jiménez,  Novel  Delayed  ACK 
Techniques for Improving TCP Performance in Multihop 
Personal  Wireless 
Wireless  Networks, 
Communications Conf., Venice Italy, 2003. 
Proc.
[2]  C.  Bettstetter,  On  the  Minimum  Node  Degree  and 
Connectivity  of  a  Wireless  Multihop  Network,  Proc. 
ACM MOBIHOC, Lausanne, Switzerland, 2002. 
[3]  L.S. Brakmo and L.L. Peterson, TPC Vegas: End-to-End 
Congestion  Avoidance  on  a  Global  Internet,  IEEE 
Journal on Selected Areas in Comm., 13, 1995. 
[4]  K.  Fall  and  K.  Varadhan  (Ed.),  The  ns-2  Manual, 
Technical  Report,  The  VINT  Project,  UC  Berkeley,  LBL, 
and Xerox PARC, 2003. 
[5]  Z. Fu, P. Zerfos, H. Luo, S. Lu, L. Zhang, and M. Gerla, 
The  Impact  of  Multihop  Wireless  Channel  on  TCP 
Throughput  and  Loss,  Proc.
IEEE  INFOCOM,  San 
Francisco CA, 2003. 
[6]  G. Hasegawa, M. Murata, and H. Miyahara, Fairness and 
Stability  of  Congestion  Control  Mechanisms,  Proc.
GLOBECOM, Rio de Janeiro, Brazil, 1999. 
[7]  G. Holland and N. Vaidya, Analysis of TCP Performance 
over Mobile Ad Hoc Networks, Proc. ACM  MOBICOM,
Seattle WA, 1999.  
IEEE 
http://standards.ieee.org/getieee802/802.11.html. 
J.  Li,  C.  Blake,  D.S. De  Couto,  H.I.  Lee,  and  R.  Morris, 
Capacity  of  Ad  Hoc  Wireless  Networks,  Proc. ACM 
MOBICOM, Rome, Italy, 2001. 
available 
Standard 
[8] 
[9] 
802.11g, 
at 
[10]  S.H.  Low,  L.L.  Peterson,  and  L.  Wang,  Understanding 
TCP  Vegas:  A  Duality  Model,  Proc.  ACM 
SIGMETRICS/Performance, Cambridge MA, 2001. 
[11]  C.  Perkins,  E.  Royer,  and  S.  Das,  Ad  hoc  On-Demand 
Distance  Vector  (AODV)  Routing,  IETF  RFC  3561,
2003. 
[12]  C.  Samios  and  M.  Vernon,  Modeling  the  Throughput  of 
TCP  Vegas,  Proc.  ACM  SIGMETRICS,  San  Diego  CA, 
2003. 
[13]  F.  Wang  and  Y.  Zhang,  Improving  TCP  Performance 
over  Mobile  Ad-Hoc  Networks  with  Out-of-Order 
Detection  and  Response,  Proc.  ACM  MOBIHOC,
Lausanne, Switzerland, 2002. 
[14]  K.  Xu,  M.  Gerla,  L.  Qi  and  Y.  Shu,  Enhancing  TCP 
Fairness 
in  Ad  Hoc  Wireless  Networks  using 
Neighborhood  RED,  Proc.  ACM  MOBICOM,  San  Diego 
CA, 2003. 
[15]  S.  Xu  and  T.  Saadawi,  Performance  evaluation  of  TCP 
algorithms 
in  multi-hop  wireless  packet  networks, 
Wireless  Communications  and  Mobile  Computing,  pages 
85 – 100, 2002. 
Proceedings of the 2005 International Conference on Dependable Systems and Networks (DSN’05) 
0-7695-2282-3/05 $20.00 © 2005 IEEE