every computer or device (printer, file server, etc.) that has a static IP address and needs 
a name. When you create an A record, you have the option to specify the creation of a 
reverse lookup record and it’s corresponding zone. See “Managing Records” on page 25 
for instructions.
Step 6:  Set up a mail exchange (MX) record (optional)
If you provide mail service over the Internet, you need to set up an MX record for your 
server. See “Setting Up MX Records” on page 33 for more information.
Step 7:  Configure the reverse lookup zone (optional)
For each zone that you create, Mac OS X Server creates a reverse lookup zone. Reverse 
lookup zones translate IP addresses to domain names, rather than normal lookups 
which translate domain names to IP addresses. If you have not specified reverse lookup 
records when initially creating your A records, you might need to configure your 
reverse lookup zone after its creation.
Step 8:  Start DNS service
Mac OS X Server includes a simple interface for starting and stopping DNS service.
See “Starting and Stopping DNS Service” on page 21 for more information.
LL2351.Book  Page 20  Monday, September 8, 2003  2:47 PM
Chapter 2    DNS Service
21
Managing DNS Service
Mac OS X Server provides a simple interface for starting and stopping DNS service as 
well as viewing logs and status. Basic DNS settings can be configured with Server 
Admin. More advanced features require configuring BIND from the command-line, and 
are not covered here.
Starting and Stopping DNS Service
Use this procedure to start or stop DNS service. Remember to restart the DNS service 
whenever you make changes to the DNS service in Server Admin.
To start or stop DNS service:
1 In Server Admin, choose DNS from the Computers & Services list.
2 Make sure you have at least one Zone and its reverse lookup zone created and fully 
configured.
3 Click Start Service or Stop Service.
 The service may take a moment to start (or stop).
Enabling or Disabling Zone Transfers
In the Domain Name System, zone data is replicated among authoritative DNS servers 
by means of the “zone transfer.” Secondary DNS servers (“slaves”) use zone transfers to 
acquire their data from primary DNS servers (“masters”). Zone transfers must be 
enabled to use secondary DNS servers. 
To enable or disable zone transfer:
1 In Server Admin, choose DNS in the Computer & Services list.
2 Click Settings.
3 Select the General tab.
4 Select or deselect Allow Zone Transfers as needed.
Enabling or Disabling Recursion
Recursion is a process to fully resolve domain names into IP addresses. Users’ 
applications depend on the DNS server to perform this function. Other DNS servers 
that query yours don’t have to perform the recursion.
To prevent malicious users from altering the master zone’s records (“cache poisoning”), 
or allowing unauthorized use of the server for DNS service, you can disable recursion. 
However, if you stop it, your own users won’t be able to use your DNS service to look 
up any names outside of your zones.
You should only disable recursion if no clients are using this DNS server for name 
resolution and no servers are using it for forwarding.
LL2351.Book  Page 21  Monday, September 8, 2003  2:47 PM
22
Chapter 2    DNS Service
To enable or disable recursion:
1 In Server Admin, choose DNS in the Computer & Services list.
2 Click Settings.
3 Select the General tab.
4 Select or deselect Allow Recursion as needed.
If you choose to enable recursion, consider disabling it for external IP addresses, but 
enabling it for LAN IP addresses, by editing BIND’s named.conf file. See BIND’s 
documentation for more information.
Managing Zones
Zones are the basic organizational unit of the Domain Name System. Zones contain 
records and are defined by how they acquire those records, and how they respond to 
DNS requests. There are three kinds of zones:
Master
A master zone has the master copy of the zone’s records, and provides authoritative 
answers to lookup requests.
Slave
A slave zone is a copy of a master zone stored on a slave or secondary name server. 
Each slave zone keeps a list of masters that it contacts to receive updates to records in 
the master zone. Slaves must be configured to request the copy of the master zone’s 
data. Slave zones use zone transfers to get copies of the master zone data. Slave name 
servers can take lookup requests like master servers. By using several slave zones linked 
to one master, you can distribute DNS query loads across several computers and ensure 
lookup requests are answered when the master name server is down. 
Slave zones also have a refresh interval also. It determines how often slave zones check 
for changes from the master zone. You can change the zone refresh interval by using 
BIND’s configuration file. See BIND’s documentation for more information.
Forward
A forward zone directs all lookup requests for that zone to other DNS servers. Forward 
zones don’t do zone transfers. Often, forward zone servers are used to provide DNS 
services to a private network behind a firewall. In this case, the DNS server must have 
access to the Internet and a DNS server outside the firewall.
Adding a Master Zone
A master zone has the master copy of the zone’s records and provides authoritative 
answers to lookup requests. After adding a master zone, Server Admin automatically 
creates an NS record with the same name as the Source of Authority (SOA).
LL2351.Book  Page 22  Monday, September 8, 2003  2:47 PM
Chapter 2    DNS Service
23
To add a master zone:
1 In Server Admin, choose DNS in the Computer & Services list.
2 Click Settings.
3 Select the Zones tab.
4 Click Add beneath the Zones list.
5 Enter a zone name.
The zone name must have a trailing period:  “example.com.”
6 Choose Master from the Zone Type pop-up menu.
7 Enter the hostname of the domain’s SOA.
If this computer will be the authoritative name server for the domain, enter the 
computer’s hostname (with a trailing period). For example, “ns.example.com.”
8 Enter the email address of the zone’s administrator.
The email address must not have an “@”, but a period; it should also have a trailing 
period. For example, the email address “PI:EMAIL” should be entered as 
“admin.example.com.” (Remember to leave the trailing period.)
9 Click OK and then click Save.
Adding a Slave Zone
A slave zone is a copy of a master zone stored on a slave or secondary name server. 
Slaves must be configured to request the copy of the master zone’s data. Slave zones 
use zone transfers to get copies of the master zone data.
To add a slave zone:
1 In Server Admin, choose DNS in the Computer & Services list.
2 Click Settings.
3 Select the Zones tab.
4 Click Add beneath the Zones list.
5 Enter a zone name.
The Zone name must have a trailing period:  “example.com.”
6 Choose Slave from the Zone Type pop-up menu.
7 Click OK.
8 Click Add under the “Master servers for backup” pane.
9 Enter the IP addresses for the master servers for this zone.
10 Click Save.
LL2351.Book  Page 23  Monday, September 8, 2003  2:47 PM
24
Chapter 2    DNS Service
Adding a Forward Zone
A forward zone directs all lookup requests to other DNS servers.
To add a forward zone:
1 In Server Admin, choose DNS in the Computer & Services list.
2 Click Settings.
3 Select the Zones tab.
4 Click Add beneath the Zones list.
5 Enter a zone name.
The Zone name must have a trailing period:  “example.com.”
6 Choose the Forward zone type from the Zone Type pop-up menu.
7 Click OK.
8 Click Add under the “Forward servers for fwd” pane.
9 Enter the IP addresses for the master servers for this zone.
10 Click Save.
Duplicating a Zone
You can create a copy of an existing zone on the same computer. You could use this to 
speed up configuration of multiple zones.
To duplicate a zone:
1 In Server Admin, choose DNS in the Computer & Services list.
2 Click Settings.
3 Select the Zones tab.
4 Click the Duplicate button beneath the Zones list.
5 If desired, double-click the newly duplicated zone to change the zone name, SOA or 
administrator email address.
6 Click Save.
LL2351.Book  Page 24  Monday, September 8, 2003  2:47 PM
Chapter 2    DNS Service
25
Modifying a Zone
This section describes modifying a zone’s type and settings but not modifying the 
records within a zone. You may need to change a zone’s administrator address, type, or 
domain name.
To modify a zone:
1 In Server Admin, choose DNS in the Computer & Services list.
2 Click Settings.
3 Select the Zones tab.
4 Click the Edit button beneath the Zones list.
5 Change the zone name, type, or administrator email address as needed.
For more information on zone types, see “Managing Zones” on page 22.
6 Click OK, and click Save.
Deleting a Zone
The section describes how to delete an existing zone. This deletes the zone and all the 
records associated with it.
To delete a zone:
1 In Server Admin, choose DNS in the Computer & Services list.
2 Click Settings.
3 Select the Zones tab.
4 Click the Delete button beneath the Zones list.
5 Click Save to confirm the deletion.
Managing Records
Each zone contains a number of records. These records are requested when a client 
computer needs to translate a domain name (like www.example.com) to an IP number. 
Web browsers, email clients, and other network applications rely on a zone’s records to 
contact the appropriate server.
The master zone’s records will be queried by others across the Internet so they can 
connect to your network services. There are several kinds of DNS records. The records 
which are available for configuration by Server Admin’s user interface are:
• Address (A):  Stores the IP address associated with a domain name.
• Canonical Name (CNAME):  Stores the “real name” of a server when given a “nickname” 
or alias. For example, mail.apple.com might have a canonical name of 
MailSrv473.apple.com.
• Mail Exchanger (MX):  Stores the domain name of the computer that is used for email 
in a zone.
LL2351.Book  Page 25  Monday, September 8, 2003  2:47 PM
26
Chapter 2    DNS Service
• Name Server (NS):  Stores the authoritative name server for a given zone.
• Pointer (PTR):  Stores the domain name of a given IP address (reverse lookup).
• Text (TXT):  Stores a text string as a response to a DNS query.
If you need access to other kinds of records, you’ll need to edit BIND’s configuration 
files manually. Please see BIND’s documentation for details.
Adding a Record to a Zone
You need to add records for each domain name (example.com) and subdomain name 
(machine.example.com) for which the DNS master zone has responsibility. You should 
not add records for domain names that this zone doesn’t control.
To add a record:
1 In Server Admin, choose DNS in the Computer & Services list.
2 Click Settings.
3 Select the Zones tab.
4 Select the Zone to which this record will be added.
5 Click the Add button beneath the Records list.
6 Select a record type from the Type pop-up menu.
7 In the first field, enter the fully qualified domain name.
The domain name must have a trailing period: “example.com.”
If you’re creating a PTR record, enter the IP address instead.
If you’re creating a TXT record, enter the text string you want.
8 In the second field, for the following record types, enter:
• A records:  the IP address.
• AAAA records:  the IPv6 address.
• C-NAME records:  the real name of the computer.
• MX records:  the name (with trailing period) or IP address of the domain’s mail 
exchanger.
• PTR records:  the full domain name with trailing period.
9 If creating an A record, select “Create reverse mapping record” to automatically create 
its corresponding PTR record.
10 Click OK, and click Save.
LL2351.Book  Page 26  Monday, September 8, 2003  2:47 PM
Chapter 2    DNS Service
27
Modifying a Record in a Zone
If you make frequent changes to the namespace for the domain, you’ll need to update 
the DNS records as often as that namespace changes. Upgrading hardware or adding 
to a domain name might require updating the DNS records as well.
To modify a record:
1 In Server Admin, choose DNS in the Computer & Services list.
2 Click Settings.
3 Select the Zones tab.
4 Select the Zone in which this record will be modified.
5 Double-click the record to be modified, or select the record and click the Edit button.
6 Modify the record as needed.
You can change the hostname, record type, or IP number.
7 Click OK.
Deleting a Record From a Zone
You should delete records whenever a domain name is no longer associated with a 
working address.
To delete a record:
1 In Server Admin, choose DNS in the Computer & Services list.
2 Click Settings.
3 Select the Zones tab.
4 Select the zone from which this record will be deleted.
5 Select the record to be deleted.
6 Click the Delete button beneath the Records list.
7 Click Save to confirm the deletion.
LL2351.Book  Page 27  Monday, September 8, 2003  2:47 PM
28
Chapter 2    DNS Service
Monitoring DNS
You may want to monitor DNS status to troubleshoot name resolution problems, check 
how often the DNS service is used, or even check for unauthorized or malicious DNS 
service use. This section discusses common monitoring tasks for DNS service.
Viewing DNS Service Status
You can check the DNS Status window to see:
• Whether the service is running.
• The version of BIND (the underlying software for DNS) that is running.
• When the service was started and stopped.
• The number of zones allocated.
To view DNS service status:
1 In Server Admin, choose DNS in the Computer & Services list.
2 Click the Overview button for general DNS service information.
Viewing DNS Service Activity
You can check the DNS Status window to see:
• The number of transfers running and deferred.
• Whether the service is loading the configuration file.
• If the service is priming.
• Whether query logging is turned on or off.
• The number of Start of Authority (SOA) queries in progress.
To view DNS service activity:
1 In Server Admin, choose DNS in the Computer & Services list.
2 Click Activity to view operations currently in progress.
Viewing DNS Log Entries
DNS service creates entries in the system log for error and alert messages.
To see DNS log entries:
1 In Server Admin, choose DNS in the Computer & Services list.
2 Click Log.
Changing DNS Log Detail Levels
You can change the detail level of the DNS service log. You may want a highly detailed 
log for debugging, or a less detailed log that only shows critical warnings.
LL2351.Book  Page 28  Monday, September 8, 2003  2:47 PM
Chapter 2    DNS Service
29
To change the log detail level:
1 In Server Admin, choose DNS in the Computer & Services list.
2 Click Settings.
3 Select the Logging tab.
4 Choose the detail level from the Log Level pop-up menu.
The possible log levels are:
• Critical (less detailed)
• Error
• Warning
• Notice
• Information
• Debug (most detailed)
Changing DNS Log File Location
You can change the location of the DNS service log. You may want to put it somewhere 
other than the default path.
To change the log detail level:
1 In Server Admin, choose DNS in the Computer & Services list.
2 Click Settings.
3 Select the Logging tab.
4 Enter the desired path for the file path for the DNS service log, or select a path using 
the Browse button.
If no path is entered, the default location is /var/logs/.
Viewing DNS Usage Statistics
You can check the DNS Statistics window to see statistics on common DNS queries. 
Some common DNS queries begin with the following:
• Name Server (NS):  Asks for the authoritative name server for a given zone.
• Address (A):  Asks for the IP address associated with a domain name.
• Canonical Name (CName):  Asks for the “real name” of a server when given a 
“nickname” or alias. For example, mail.apple.com might have a canonical name of 
MailSrv473.apple.com.
• Pointer (PTR):  Asks for the domain name of a given IP address (reverse lookup).
• Mail Exchanger (MX):  Asks which computer in a zone is used for email.
• Start Of Authority (SOA):  Asks for name server information shared with other name 
servers and possibly the email address of the technical contact for this name server.
• Text (TXT):  Asks for text records used by the administrator.
LL2351.Book  Page 29  Monday, September 8, 2003  2:47 PM
30
Chapter 2    DNS Service
To see DNS usage statistics:
1 In Server Admin, choose DNS in the Computer & Services list.
2 Click Activity to view operations currently in progress and usage statistics.
Securing the DNS Server
DNS servers are targeted by malicious computer users (commonly called “hackers”) in 
addition to other legitimate Internet servers. There are several kinds of attacks that DNS 
servers are susceptible to. By taking extra precautions, you can prevent the problems 
and downtime associated with malicious users. There are several kinds of security hacks 
associated with DNS service. They’re:
• DNS Spoofing.
• Server Mining.
• DNS Service Profiling.
• Denial-of-Service (DoS).
• Service Piggybacking.
DNS Spoofing
DNS spoofing is adding false data into the DNS Server’s cache. This allows hackers to do 
any of the following:
• Redirect real domain name queries to alternative IP Addresses.
For example, a falsified A record for a bank could point a computer user’s browser to 
a different IP address that is controlled by the hacker. A duplicate website could fool 
him or her into giving their bank account numbers and passwords to the hacker 
unintentionally.
Also, a falsified mail record could allow a hacker to intercept mail sent to or from a 
domain. If the hacker also forwards those emails to the correct mail server after 
copying them, this can go undetected indefinitely.
• Prevent proper domain name resolution and access to the Internet.
This is the most benign of DNS spoof attacks. It merely makes a DNS server appear to 
be malfunctioning.