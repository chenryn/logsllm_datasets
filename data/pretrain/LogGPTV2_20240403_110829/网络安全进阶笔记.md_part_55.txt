a=b·（（a+G（b.c.d）·x[k}·T）”标识结束。
注意“”之间不要有空格。
282
---
## Page 271
第5章趣解加密与解密
以下是一个简单的XML文件：
风之扬
男
2000年1月1日
上面的XML文件的根标记的开始标记是，结束标记是，该根标记有一个子
标记.，而标记..的子标记是..和.
。使用文本编辑器编辑XML文件后，在保存文件时，必须将“保存类型”选择为
那么在保存文件时可以将文件名用双引号括起来。当然，也可以直接使用EditPlus等编辑器进
行保存，如图5.45所示。
文件名：
1.
提存员量（）：
BL (.a:*. cfig*aeifst. 
编码：
7-0
口
图5.45使用EditPlus编辑器进行保存
上面的XML文件包含一个XML声明和4个标记。每个标记都必须包括开始标记和结束
标记，标记的开始标记和结束标记之间的内容称为该标记所标记的内容，简称“标记的内容”。
一个标记的内容中可以包含文本或其他的标记，其中包含的标记称为该标记的子标记，XML
文件有且仅有一个根标记，其他标记都必须封装在根标记中，文件的标记必须形成树状结构。
2.浏览一个规范的XML文件
XML文件分为规范的XML文件和有效的XML文件，符合W3C制定的基本规则的XML
文件称为规范的XML文件，规范的XML文件如果再符合额外的一些约束就称为有效的XML
文件。为了检查XML文件是否规范，一个简单的办法就是用浏览器（如IE6.0）打开XML文件，
如果XML是规范的，浏览器将显示XML源文件，如图5.46所示。
小提示：HTML与XML，HTML是用来编写Web页的语言，HTML把数据和数据的显示外观
捆绑在一起，如果将数据和外观分离将会十分困难，HTML不允许用户自定义标记，
目前的HTML大约有100多个标记.HTML不能体现数据的结构，只能够描述数据
的显示格式.XML可以很好地描这数据的结构，有效地分离数据的结构和表示，可
以作为数据交换的标准格式。
XML的威力在于将用户界面与结构化数据相分离，允许不同来源数据的无缝集成和对同
一数据的多种处理。再加上W3C等组织的推动，使得XML语言得到了广泛的应用，比如远
程教育、电子商务、电子银行、电子政务等。但是，XML仅仅是一种语言，它自身无法保证
基于它的应用的安全性。因此，安全问题成为这些应用能否成功的关键问题。
263
---
## Page 272
网络安全进阶笔记
c\Dpcntm Seting\Asitr\..
工A）
员
名
甲B>
图5.46浏览一个规范的XML文件
5.7.2XML文档加密及其实现
XML文档的加密原理是先将XML数据抽象成为DOM（文档对象模型），并提取被加密对
象信息，按通信双方约定的某种加密密钥和加密算法对其进行加密，然后将加密的结果按照
W3C规定的XML标记格式替换原有的信息，形成加密后的XML数据，加密后的文档依然保
持XML文件的数据格式。
1.XML加密的语法结构
与其他任何文档一样，可以将XML文档整篇加密，然后安全地发送给一个或多个接收方，
同部分进行不同处理的情况。XML加密定义了一个对明文加密产生密文以及对密文解密恢复
明文数据的过程。明文可以是任意文件，如一篇完整的XML文档或是XML文档的一个小段
落。但只允许有两种形式的XML文档段落：XML元素或XML元素的内容。
W3C对XML加密文档的语法结构进行了定义，参考地址为http:/www.w3.orgTR/2002/
REC-xmlenc-core-20021210/Overview.html。语法结构如下所示；
?
7
?
?
?
?
cCipherData>
?
?
?
在上述结构中，“？”表示该元素不出现或只出现一次，默认值表示该元素出现且只出现
284
---
## Page 273
三
第5章趣解加密与解密
一次。下面，分别介绍每个元素的含义。
·：XML加密标记元素，完整地表达了传输一个加密数据的所有信息。
：子元素使用URI方式唯一地标识采用的加密算法，使得通信双
方对加密算法取得一致。
·：元素可以直接封装或间接指向被加密的数据。当加密数据信息保存在
XML文档中时，则使用元素来直接包含加密数据：如果加密后的数据
置于文档外部的某一个URI地址，则使用~CipherReference>元素指向一个加密数据的
URI地址
·：该子元素表达了用于加密数据的密钥信息，该元素是一个可选元素并且
灵活性很大，根据通信双方实现约定，该元素记录可能是一个密钥名称、密钥值、数
字证书，甚至是获得密钥的转换方法描述，从而确保密钥的安全性。
·：该子元素记录了关于加密数据和密钥的附加信息，比如时间
戳、加密序列号等.信息发送方首先将XML文档中敏感信息加密后，按照元素的结构创建该元素，然后替换掉原文中相应的部分，形成加密后的XML
文档，最后传送给接收方。接收方从元素中获取解密所需的加密算法、
参数和密钥信息，从面正确解密信息。