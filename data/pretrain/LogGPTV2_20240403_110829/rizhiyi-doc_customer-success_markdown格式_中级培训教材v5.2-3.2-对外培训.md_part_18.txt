在仪表盘标签页的标题栏右下角，还有一个小的收起按钮。点击收起，会隐藏掉整个标签页
标题栏，给图表部分留出更多的数据展示空间。当您只需要一个标签页，或者直接通过 App
的多级菜单来直接展示仪表盘列表时，可以收起标题栏。
4-195
日志学院
图表布局调整
为了尽力保证用户视觉的饱满度，日志易仪表盘秉持尽量填满空间的布局原则，设计了一整
套图表自动填充和碰撞协商机制：
 默认情况下，新添加的图表，都以其默认高度，独占新的一行。
 在拖动图表到其他位置时，将该位置原有图表进行挤压，腾挪空间。
 对任一图表的高度进行调整，都将影响调整方向上其他所有图表。
 对任一图表的宽度进行调整，都将影响调整方向上其他所有图表。
 对任一图表进行宽高度调整时，如果其高度与左右图表高度不一致，无法构成独立的行，
则调整无法完成挤压，可能形成空洞效果。建议不要采用这种布局。
 拖动或调整的挤压效果，到一行12个栅格都被单独占用为止。
 挤压时，以原图表对角线为分隔线，鼠标当前位于对角线右侧，则让出右侧一半空间给
新图表；位于对角线上侧，则让出上侧一半空间给新图表；左侧下侧亦然。
点击"编辑布局"进入图表布局编辑器。日志易提供占位阴影的方式，提示用户挤压后的预览
效果。如果不满意，不要释放鼠标，继续拖动图表到其他位置，查看新效果即可。
4-196
日志学院
事件列表
点击’添加'，选择’添加事件列表'，看到浮层界面如下：
添加事件列表的可设置内容包括：
 名称：事件列表的名称
 搜索语句：spl语句，具体请参考《日志易搜索示例手册 》；
 时间范围：选择搜索时间范围，支持实时窗口选择。
 数据集：选择搜索数据集，不选择默认不进行数据集设置。
示例：添加名称为’所有事件'，搜索语句为'*'，时间范围为1天的事件列表，在仪表盘标签
页中显示如下:
搜索内容等同与搜索页面结果。点击展开单个事件，可以点击事件操作，执行系统默认操作
（查看上下文，实时查看，配置字段提取，添加到知识库）或其他自定义事件操作。
配置中包括：通用配置，钻取配置和高级编辑通用配置。
4-197
日志学院
通用配置
通用配置中除了图表标题，查询语句和时间范围，还有数据集(目前默认’全部日志')，图表描
述，还可以点击’在搜索页打开’跳转到搜索页。
钻取配置
钻取配置和图表管理中的钻取配置功能相同。在raw_message上选中一段文本时，是作为
${click.value}传递；在展开的事件详情里点击时，字段名作为${click.name}，字段值作为
${click.value}传递。
4-198
日志学院
高级编辑
高级编辑和图表管理中的高级编辑功能相同。
4-199
日志学院
时间范围选择
点击"过滤"图标，展开/收起的过滤器区域内，左起第一个就是全局时间范围选择器，样式
与搜索页的时间范围选择器一致。
用户可对当前仪表盘页面的时间范围进行临时性的全局修改，也可以对仪表盘上单个图表的
时间范围进行临时性的个别修改。无论全局还是个别，仪表盘图表的临时时间范围永远以最
近一次操作为准，但并不影响永久保存的设置值。
仪表盘的时间范围同样支持实时窗口选择。
过滤项
点击添加过滤项看到的浮层界面如下：
过滤项组件的可设置内容包括：
 标题：展示名称；
4-200
日志学院
 标识：该过滤项的id，在本标签页内应该唯一确定。默认可以等同于标题，建议使用英
文；
 自动搜索：启用该选项后，在输入框内完成输入，直接回车立刻搜索，不用手动点击‘更
新’按钮；
 过滤字段：输入值属于哪个字段，如果不确定，可以留空或写raw_message表示全文
搜索；
 绑定图表：过滤条件对哪些图表生效。
过滤类型可选择：文本输入、下拉菜单或者动态菜单三种形式。
过滤类型选择“下拉菜单”效果如下：
选定下拉菜单，一一先添加需要过滤的菜单选项，再设置默认值。示意图中，我们添加一个
日志类型菜单。
为了方便用户查看，日志易支持为选项值额外定义可选的选项别名。比如为"logtype:fw"定义
展示别名为"防火墙"。
4-201
日志学院
“动态菜单”是在下拉菜单基础上的更高级运用。选定动态菜单以后，在搜索内容中填写SPL
语句，选择搜索时间，然后设置动态字段值（注意动态字段应该是搜索内容所返回的结果中
存在的字段）。点击搜索后，即可在默认值菜单中看到本次搜索的结果，你可以选择一个作
为本过滤项以后的默认值。
为了方便用户查看，"动态菜单"同样也支持额外定义一个可选的动态别名字段。
考虑到 SPL 语句生成的选项时刻在变动，有时候可能会有缺失，所以即使在"动态菜单"类
型下，也支持固定选项的自定义。最常见的场景，就是加一个值为'*'，别名为’全部’的固定
选项作为"动态菜单"的默认值。示例配置如下：
对应的别名效果如下图，可以看到实际发起的请求是采用了字段值的内容：
4-202
日志学院
下拉菜单和动态菜单默认为单选菜单格式，用户可以指定为多选菜单格式。
4-203
日志学院
过滤类型设定完成后，下一步勾选需要绑定的图表。点击“确定”后，过滤组件即完成，之后
使用的用户可以使用过滤组件完成对该仪表盘页面的过滤操作。
示例：
1、点击添加过滤组件，配置“标题”为“主机名”，“标识”为“host”，“过滤类型”为“文本输入”，“过
滤字段”为“hostname”，“默认值”为“*”，绑定图表全选。
2、点击确定。页面出现文本输入框组件和搜索按钮。
3、输入框内输入192.168.0.1字样，回车或点击搜索按钮。
结果：页面上三个图表都变成仅为192.168.0.1条件下的结果。
4-204
日志学院
输入项
输入项和过滤项在普通场景下作用类似，其主要设置内容也类似。如下图所示：
可以看到，在过滤类型为‘文本输入’时，输入项和过滤项的区别仅在于没有‘绑定图表’
的设置。因为输入项的功能，不仅可以作为图表的过滤条件，还可以作为更高级的图表功能
控制项。
比如，通过上图的输入项，能控制折线图的时间分组颗粒度。我们在受控的图表设置里，填
入如下SPL语句即可：
日志易系统会自动根据查询语句里引用的标记token，找到对应的输入项，获取值的内容并
填入语句。最终，实际发送的查询语句就变成了：
*|buckettimestampspan=1masts|statscount()byts
4-205
日志学院
当输入项无实际值时，图表会直接提示目前处于‘等待输入项’的状态：
显然，对于bucket指令的span参数，常用值是比较确定的，使用文本输入反而要担心输入
错误的问题。输入项和过滤项一样，也提供了下拉菜单和动态菜单的输入类型。
考虑到输入项最终要作为字符串内容插入到查询语句中，而检索语法和统计语法中，对多值
的处理设计未必一致。输入类型为下拉菜单或动态菜单时，用户需要根据实际引用输入项的
语句情况，合理设置其前后缀设置。
比如下图设置的下拉菜单：
当它预备作为检索语句的一部分时，语句如：*AND${logtype}|statscount()byhostname* 或
|statscount()bylogtype|where${logtype}
4-206
日志学院
则前后缀配置应该是：
当输入项类型为动态菜单时，在搜索语句里，还可以引用其他已有输入项标识，达到多个输
入项的联动效果。
比如，创建如下两个输入项：
标识为f1的下拉菜单，可选值为apache,json,other；
标识为f2的动态菜单，搜索语句为：logtype:${f1}|statscount()byhostname。
输入项的初始状态如下：
当选择了f1输入项的具体值时，f2自动刷新得到新的可选项了：
标签页高级编辑
标签页高级编辑中，可以查看到本节所述各种标签页配置的JSON格式存储。在熟悉日志易
设计的前提下，您可以直接在此调整仪表盘标签页设计。
4-207
日志学院
此外，在高级编辑中，我们还可以额外给过滤项、输入项定义 visible 属性。如上图所示，
当"inner_aaa" 输入项的"visible"属性被修改为"false"时，仪表盘标签页上，就看不到这个输入
项。但是图表SPL、钻取配置和其他输入项SPL中，依然可以引用 "inner_aaa" 这个 token 变
量。对于一些仅用于钻取流程中变量传递的输入项来说，隐藏起来有利于界面美观。
4.2. 仪表盘图表管理
每个仪表盘标签页都有自己独立的编辑组件。点击页面上方的编辑按钮，当按钮变成蓝色时，
仪表盘进入可编辑状态，仪表盘中的图表会显现出配置栏：
从左到右依次是：
 时间：默认是趋势图创建时的搜索时间，也可以自行修改
 图表类型：序列，维度，关系，复合，地图，其他
 图表配置：数值，展示
 更多配置：通用配置，钻取配置，高级编辑，恢复初始
 删除：删除该图表
4-208
日志学院
图表类型
支持用户自定义图表类型：
支持切换图形效果并重新定义XY轴配置项，同时也支持为SPL统计采取表格形式展示。例
如上例查询语句，如果选择【常用】-【统计表】展现形式如下图。图表切换也可以直接在
图表顶部操作栏【其他配置】-【恢复初始】:
4-209
日志学院
图表配置
统计表状态，【图表配置】为灰，不可选。
单值滚动效果
在仪表盘的使用场景中，对一些全局KPI的数值，通常需要重点关注其实时走势情况。日志
易单独在仪表盘上提供对单值类型图表的‘实时滚动刷新’效果。
起始颜色设置
图表的颜色在日志易候选色系中可以任意选择，默认的起始颜色均为：蓝色。为了更美观的
仪表盘效果，用户可以给不同图表挂件选择不同的起始颜色。
4-210
日志学院
以单值为例：
1. 配置一个最近五分钟 *|stats count()的单值可视化；
2. 选择‘默认’展示；
3. 选择颜色为橙色；
4. 看到单值字体颜色变为橙色。
再勾选【填充背景颜色】，则得到橙色卡片效果。
通用配置
支持用户自定义图表标题、时间范围、描述等通用属性;同时也支持在仪表盘上修改控件的
SPL语句，完成高级视图的编辑操作。
例如可以更改查询语句为
*|buckettimestampspan=3hasts
|statscount(appname)ascount_byts
|movingavgcount_,5asma
|rollingstdcount_,5asrs
|evallower=ma-1*rs
|evalupper=ma+1*rs
|evaloutlier=if(count_>upper||count_<lower, count_,null)
在通用设置中，用户还可以设置针对这个图表挂件单独的自动刷新设置。和整个仪表盘标签
页的自动刷新设置一样支持自定义间隔。
4-211
日志学院
钻取配置
日志易支持点击操作生成钻取条件，用户可以自定义点击钻取的目的地址，最终串联成为场
景故事。
在组件配置-钻取配置中，提供六种钻取模式：
 跳转到搜索页：图表点击跳转对应过滤条件下的日志搜索界面；
 跳转到标签页：点击操作自动跳转到某个仪表盘标签页，并携带点击生成的一到多个过
滤/输入条件。还根据点击行为的不同，下钻到不同的仪表盘；
 管理本页过滤项/输入项：点击操作可以影响到本页的过滤项/输入项的内容变化。并因
此导致本页内图表的数据变化；
 跳转到自定义URL：点击打开某个自定义的固定URL；
 地图内部下钻：在仪表盘上点击完成地图内部的钻取操作；
 无钻取动作：在仪表盘上点击时不进行任何钻取操作。
跳转到搜索页
跳转到搜索页-自动
例如，仪表盘上有一个 IP 地址统计的饼图。我们单击其中内容为 180.107.79.77 的饼图分
片：
4-212
日志学院
日志易会自动打开一个新的搜索页面，输入框中自动添加了 apache.clientip:"180.107.79.77"
查询条件，事件列表中高亮显示：
跳转到搜索页-自定义
日志易提供钻取到搜索页支持自定义搜索语句的功能。这个操作结果和标准的钻取到搜索页