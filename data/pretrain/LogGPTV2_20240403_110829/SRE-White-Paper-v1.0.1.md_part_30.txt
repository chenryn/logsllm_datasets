于该软件二次开发的服务，如架构升级，研发语言变更，数
据结构重组，API下架或 API不兼容
 运维侧：停机升级 / 数据迁移等，其他产品关联产品也需
要配合升级
b. 次版本号 Minior：
 产品侧：新增功能
 研发侧：接口新增/接口调整（向下兼容）/性能优化等; 原
则上不允许 API 下架
 运维侧：升级前需要查看下升级文档，允许做一些数据迁
移相关的操作
c. 修订号 Patch：
 产品侧：展示/交互/描述等小调整，例如文案的修复等
 研发侧：bugfix，不会新增功能
 运维侧：为了解决一些 bug或安全问题，不会新增功能
（1）规范应用制品晋级标准：选择并使用几个关键节点作为制
品晋级的必经阶段，定义制品的生命周期，并约定制品晋级的准
则。如 1.0.0-alpha表示当前应用的版本号是 1.0.0，该制品处于 alpha
阶段，仅完成了开发自测，可以发布到测试环境，提交给测试发起
测试验收，禁止发布到预发布环境等其他环境。若需要晋级为
beta，则需要通过测试验收，才可以发布到预发布环境。
（1）提供把应用发布到某个环境的CD流水线插件：通过提供必
要的应用基本信息，秘钥信息，版本号，制品等级，环境信息等，
⽹址：SRE-Elite.com 20 8 微信：SRE精英联盟
SRE实践白皮书（2023年）
使用 YAML 或者 Json 配置的方式，就能实现应用发布。
3）扩展服务（扩缩容、CLI等）
（1）可扩展的存储服务，如为应用开发者提供存储服务，默认
提供关系型数据库 MySQL、非关系型数据库 Redis，可扩展支持非
关系型数据库 MongoDB、时间序列数据库 InfluxDB、搜索引擎数据
库 Elasticsearch等；
（2）扩缩容能力，在k8s能力的基础上，针对应用运行时需要的
资源进行实时监控，确保对计算、存储、网络等资源要求是合理
的，并能弹性扩展，以满足不同的业务需求；
（3）命令行界面 CLI （Command Line Interface）功能，不需要
鼠标和图形化界面，而是通过键盘输入命令来完成各种操作。需要
提供应用信息查询，应用部署，部署结果 /历史查询等功能，支持
Linux、Windows等主流的操作系统。
3.7.2.3 iPaaS结构设计
iPaaS 是 Integration Platform as a Service 的缩写，翻译为集成平
台即服务。在整个工程平台的设计中，iPaaS连接上层的 aPaaS 和下
层的原子平台，需要对已有的原子平台进行自动化的管理，自动化
地接入外部第三方系统，实现对上提供统一的标准协议 API，可以
让使用 aPaaS 的开发者们，快速拥有 SaaS 的组装能力。
1．接入端设计
（1）原子平台提供 API：所有原子平台都通过 API 的方式，向
上提供平台本身的核心能力。
⽹址：SRE-Elite.com 20 9 微信：SRE精英联盟
SRE实践白皮书（2023年）
 设计网关的接入流程：让原子平台可以最低成本注册 API
资源。提供可视化的 Web 页面，首先需要“创建网关-完善
网关基本信息”即就是原子平台的基本信息，然后逐个“新
建资源”，填写注册 API 的前端“请求方法、请求路径”，后
端“Method、Path、Hosts、超时时间、Header 转换”，完善
安全设置（如 API 使用的认证方式），实现一个 API 的有效
注册。
 提供 API 的管理能力：一个原子平台可能会提供数十个具
体的 API，在 API 创建过程时，要提供可视化的 API 配置和
文档编写页面，提供将 API 发布到不同的环境进行测试的方
案，可以指定 API 进行特殊操作，如限制频率、授权使用、
下架等。
（2）开发者使用 API：用户能看到的 API 要确保文档内容准
确，并可以快速验证 API可用性。
 API 文档：要提供可供搜索的 API 文档，且采用统一的格
式编写 API 文档，文档内容应该包括 API 基本信息（如更新
时间、是否要申请权限）、 API 地址（如请求环境、请求方
法、请求地址）、公共请求参数、输入参数说明、调用示
例、返回结果、返回结果说明等。
 通用 SDK：要提供自助发布 SDK 的能力，每个原子平台
可以将自己的 API 发布成 SDK，开发者通过下载并安装对应
的 SDK，即可使用原子平台的全部 API。
⽹址：SRE-Elite.com 21 0 微信：SRE精英联盟
SRE实践白皮书（2023年）
 在线调试：提供在线的测试环境，让开发者可以通过
mock 的方式，输入必要的参数，得到文档描述的预期效
果。
2．管理端设计
（1）确定网关服务模式：
 选择流量网关：流量网关在 iPaaS 架构中的作用是全局性
的，与后端服务完全无关的策略网关。不支持代码扩展。如
一般使用 IAS，底层一般使用 Nginx，也可以选择 ngx_lua 。
 设计业务网关：业务网关，即 API 网关， 它与后端服务
（如原子平台，业务系统）有一定的策略逻辑的网关。支持
代码扩展，提供公共的能力（如限流、鉴权、监控等），不
涉及后端服务具体的逻辑，不涉及 API 具体功能。可以采用
插件的模式提供这些公共能力，需要设计一套插件的加载流
程。
 插件扩展功能：插件的内部要采用统一的结构，包括初始
化 init、检查外包依赖 check_schema、rewrite、access、log
等，这样可以对插件进行统一管理。依照这样的结构化模
式，可以提供协议转换、路由寻址、负载均衡、服务发现、
流量管理、安全防护、服务治理等插件，增强 API 网关的能
力。
（2）建设插件生态：
 插件文档：文档内容遵守统一的规范，包括插件名、插件
⽹址：SRE-Elite.com 21 1 微信：SRE精英联盟
SRE实践白皮书（2023年）
版本、功能描述、属性字段、启用插件步骤、测试插件的效
果、删除插件方法。
 插件市场：提供“插件模板”、“插件商城”等功能，使插
件开发者和插件使用者快速分享并启用感兴趣的插件。
3.7.2.4 通用原子设计
平台工程需要建设多个方面的能力，而原子平台位于整个平台
工程的最底层，它的能力就组成了整个平台工程的最基础的核心能
力。以下是在平台工程建设中，SRE 推荐的首要的、基础的原子平
台。
1．配置管理平台
（1）主机管理能力：提供主机信息的管理，支持主机信息的编
辑，如导入导出，修改，复制等基础操作，可以扩展主机相关的字
段，主机所属的运维人员，业务信息， SLA、城市等；主机信息不
仅包括企业自建机房，私有云的主机，还应该可以同步各类云主
机，并无差别对主机进行统一管理；主机信息变更可以通过订阅等
方式，与周边系统进行实施同步与修订。
（2）空间管理能力：可以按照“业务”、“项目”等空间管理的
概念，划分主机的管理空间，并在这种空间维度上，对主机进行分
类，如空闲机、故障机、待回收等；建设主机的默认拓扑关系，如
“业务-集群-大区-模块”，可以通过“服务模板”、“集群模板”的方
式，快速创建同类型的主机拓扑关系。
（3）模型管理能力：“主机”的模型是最基础的配置管理信息，
⽹址：SRE-Elite.com 21 2 微信：SRE精英联盟
SRE实践白皮书（2023年）
支持抽象，自定义创建更多的模型，如交换机、路由器、负载均
衡、防火墙等。按照设备类型，组织架构，职能等多维度自定义模
型，并将使用对应的模型数据，进行配置信息的管理。
（4）API 能力：作为基础的配置管理信息，需要提供全面的
API，供消费方使用，并要封装部分场景类 API，提高 API 的性能。
（5）查询能力：围绕主机的全文检索能力，要有基本的 IP 信息
查询，还要建设动态分组查询的功能，以适应不断变化的配置基础
信息。
（6）云资源管理能力：对于高频使用的云产品，如 IaaS 层的产
品，必须进行纳管，并提供针对全生命周期的操作管理功能（申
请、购买、新建，操作，配置调整，回收，销毁）。对于云上 PaaS
层的产品，不同的云，有不同的形态，尽量按照同一管理模型纳
管，如 CLB、COS 等。
2．作业管理平台
（1）脚本执行：支持通过手动编写、本地上传的方式写脚本，
脚本支持 SRE 常用语 言， 包 括 Shell、Bat、Perl、Python、
Powershell、SQL等 ；需要有“脚本管理”的功能，常用的的脚本可
以通过“脚本引用”的方式被其他脚本再次使用；选择目标执行的
主机后，通过“滚动执行-滚动策略-滚动机制”的方式，能分批快
速完成脚本执行。
（2）文件分发：支持从本地或从服务器上选择源文件上传后分
发的模式，满足“一对多”、“多对多”、“多对一”等多种分发文件
⽹址：SRE-Elite.com 21 3 微信：SRE精英联盟
SRE实践白皮书（2023年）
场景，且能自由控制上传/下载的速率，并设置文件分发超时时长；
可以通过“滚动执行-滚动策略-滚动机制”的方式设置批量文件上
传的滚动方案。
（3）任务编排：支持将脚本执行、文件上传、定时策略等多线
任务进行编排，组装成一个作业，可以提前预置作业“执行方案”，
在执行的时候，输入必要的参数即可。
3．容器管理平台
（1）集群管理：提供 K8S 原生集群创建的能力，支持自定义设
置 Master 和 Node 节点，一键自动安装集群组件，在用户独占集群
时，保证安全隔离性；提供集群导入的能力，支持通过集群
kubeconfig 文件导入外部集群，对外部导入集群和已有的集群统一
在容器管理平台进行管理；支持通过公有云的云凭证导入云上 K8S
集群，支持 Worker 节点自动扩缩容；集群管理支持节点添加和删
除，集群删除，支持节点标签、污点与资源调度等节点管理功能，
支持集群和节点级别的监控告警及主要数据的视图展示等。
（2）模板管理：提供在集群中部署资源的管理方案，支持设置
容器编排的 Helm Chart。可以将同一套 Helm Chart，实例化到不同的
命名空间，通过不同的 values，完成差异化的资源编排。
（3）应用管理：提供容器视图功能，可以通过应用视图或者命
名空间视图管理容器，查看应用、 POD、容器等的在线状态，启停
容器，重新调度容器，对应用做更新，例如扩缩容、滚动升级等。
（4）镜像管理：提供公共镜像管理，包含了一些实用程度比较
⽹址：SRE-Elite.com 21 4 微信：SRE精英联盟
SRE实践白皮书（2023年）
高，且开源共有的镜像资源。公共镜像对所有用户可见；提供项目