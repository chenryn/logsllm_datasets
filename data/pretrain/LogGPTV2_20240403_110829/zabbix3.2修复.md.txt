### centos7部署zabbix监控服务端和客户端
> 部署zabbix服务端需要LAMP环境(Apache,mysql,php),其它数据库也可以,我这里使用mysql,
**部署zabbix服务端**
1.  创建zabbix用户：
> useradd -s /sbin/nologin zabbix
2.  安装依赖软件库: yum -y install gcc gcc-c++ httpd mariadb
    mariadb-server mariadb-devel php\* php-\* net-snmp-devel
    libxml2-devel libcurl-devel
> 安装php-bcmath-5.4.16-36.el7_1.x86_64.rpm 和
> php-mbstring-5.4.16-36.el7_1.x86_64.rpm
>
> ![](media/image1.png){width="6.689583333333333in"
> height="0.4131944444444444in"}
3.配置php和apache的整合：
> ![](media/image2.png){width="4.718055555555556in"
> height="0.22916666666666666in"}
>
> 添加首页支持
>
> ![](media/image3.png){width="3.2909722222222224in"
> height="0.6041666666666666in"}
>
> 添加应用支持
>
> ![](media/image4.png){width="5.301388888888889in"
> height="1.2395833333333333in"}
4.进入源码包进行编译安装
解压: ![](media/image5.png){width="3.7597222222222224in"
height="0.19791666666666666in"}
cd zabbix-3.2.2
./configure \--prefix=/usr/local/zabbix \--enable-server \--enable-agent
\--with-mysql \--with-net-snmp \--with-libcurl \--with-libxml2
\--with-gettext
make && make install
5.配置mysql数据库:
开启数据库：systemctl start mariadb
创建数据库并把数据库默认编码设置为utf8
mysql -e \"create database zabbix default charset utf8\"
修改数据库root用户密码：mysqladmin password 123
导入以下数据库
\[root@wiki mysql\]# cd /root/zabbix-3.2.2/database/mysql
//你的源码包目录
mysql -uroot -p123 zabbix \ cp /root/zabbix-3.2.2/misc/init.d/fedora/core/zabbix\_\* /etc/init.d/
>
> chmod 755 /etc/rc.d/init.d/zabbix\_\*
>
> chkconfig zabbix_server on
>
> chkconfig zabbix_agentd on
9\. 配置php文件，适应zabbix安装所需的参数
vim /etc/php.ini
date.timezone = Asia/Shanghai
max_execution_time = 300
max_input_time = 300
post_max_size = 32M
10.启动zabbix服务端:
service zabbix_server start
service zabbix_agentd start
重启Apache:
systemctl restart httpd.service
11,在线配置zabbix
输入服务器ip和端口,http://192.168.253.160/setup.php
下一步
![](media/image6.jpeg){width="7.072916666666667in"
height="3.7083333333333335in"}按照图中要求修改php配置文件php.ini的参数,进行下一步即可,如果修改过了就跳过！
![](media/image7.jpeg){width="7.125in" height="3.84375in"}
这里有警告,原因是我的php之前进行编译安装没有指定这个库
\--with-gettext,重新编译安装php开启这个库即可,这个最好是开启gettext,否则后面无法汉化zabbix\
![](media/image8.jpeg){width="6.90625in" height="3.3854166666666665in"}
填数据库名和用户密码以及数据库ip
![](media/image9.jpeg){width="7.083333333333333in"
height="2.9479166666666665in"}
![](media/image10.jpeg){width="7.072916666666667in"
height="2.5520833333333335in"}
这里安装失败,安装提示点击下载配置文件,并保存到zabbix服务端指定目录
![](media/image11.jpeg){width="7.072916666666667in" height="3.96875in"}
登陆zabbix，默认用户名：Admin，密码：zabbix
![](media/image12.jpeg){width="7.229166666666667in"
height="3.2395833333333335in"}
安装zabbix客户端:
tar xf zabbix-3.2.2.tar.gz
cd zabbix-3.2.2
./configure \--prefix=/usr/local/zabbix-agent \--enable-agent
make && make install
**安装zabbix客户端:**
vim /usr/local/zabbix-agent/etc/zabbix_agentd.conf
Server=服务端ip
ServerActive=服务端ip
Hostname=Zabbix server //自定义
LogFile=/tmp/zabbix_server.log //日志保存路径
添加用户:
useradd -s /sbin/nologin zabbix
 配置zabbix启动服务脚本
> cp /root/zabbix-3.2.2/misc/init.d/fedora/core5/zabbix_agentd
> /etc/init.d/zabbix_agentd
>
> chmod +x /etc/init.d/zabbix_agentd
>
> chkconfig zabbix_agentd on
>
> 启动zabbix客户端:
>
> service zabbix_agentd start