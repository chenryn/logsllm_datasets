# 针对自私挖矿的重新审查（下）
##### 译文声明
本文是翻译文章，文章原作者 Kevin Alarcon Negy, Peter Rizun， Emin Gun
Sirer，文章来源：fc20.ifca.ai
原文地址：
译文仅供参考，具体内容表达以及含义原文为准。
本文将在流行的加密货币中使用的几种困难调整算法（DAA）下自私挖矿的盈利能力进行研究。提出一个流行的难度调整算法分类，量化了算法选择对哈希波动的影响，并展示了不同的DAA家族对自私挖矿的抵抗力。
上一篇文章引入了间歇性自私挖矿，并研究了几种在进行自私挖矿时的难度调整算法。通过间歇性的自私挖矿，表明在比特币DAA下进行自私挖矿就可以获利，而无需将攻击扩展到难度调整之上。
## 0x01 Difficulty Adjustment Algorithms
现在将分析重点放在难度调整算法（DAA）上。鉴于现在存在具有不同协议的各种PoW代币，有必要分析几种当前的DAA及其对自私挖矿的影响。
难度调整算法的主要目的是设置一个困难，使块在规则的目标时间间隔内被挖掘。响应式DAA允许加密货币快速调整难度，以防止与目标速率相比过高或过低的水平开采区块。
另一方面，过于敏感的反应将使大型矿工在受益时只要进出矿场就可以轻松地控制难度。在本节中，对诚实的矿工和自私的矿工进行各种DAA的分类，并评估它们对算力增加的响应。
###  A.DAA分类
现有的DAA方法可以分为三类：
####  1）基于时间段：
基于周期的DAA是一种算法，其中仅在通常固定周期的末尾调整难度。周期定义为在主链上生成w个块所花费的时间。周期宽度w可以选择为足够大以最小化极端困难的波动，但必须足够小以适应主要的哈希率变化。
上图a显示了w = 3的基于周期的DAA。在挖出块F之后，该周期结束，并且根据块D-F的块时间重新计算难度。然后为块G到I的下一个周期设置难度。
对DAA的评估使用比特币作为基于周期的加密货币。比特币DAA的目标是每块平均开采时间为十分。在主链上开采2016个区块后，大约需要两周时间，调整难度以接近目标区块时间。
####  2）逐步扩大：
逐步扩大的DAA会根据新的块在块定时界限之外的距离来增加/减少难度。与比特币相反，在比特币中可以使用一定比例来计算新的难度，而逐步扩大的难度则将当前难度增加/减小了一部分。该DAA限制了加密货币对哈希率变化的响应能力。
上图b显示了逐步扩大DAA的示例。为了挖掘块G，DAA仅查看自生成父块F以来的经过时间，然后根据经过时间与目标块时间的接近程度来从父难度中增加或减去。
从拜占庭开始，以太坊（ETH）使用逐步扩大的DAA，该DAA在每个新区块处进行调整。通过测量当前时间戳与其父时间戳之间的时间差，然后根据该时差是否在9-17秒的期望范围之外来增加或递减父难度，可以计算出每个新的块难度。如结果所示，与使用比例计算并可以在一个区块内完全调整难度的DAA相比，网络中哈希率的突然加倍将导致难度变化缓慢。
####  3）滑动窗口：
滑动窗口DAA类似于基于周期的DAA，但它的重新计算困难发生在每个新块上。为了计算当前难度，使用了由祖先块组成的宽度为w的块窗口。根据与预期时间相比，在块窗口中生成块所花费的时间来计算新的难度。
上图c显示了w = 5的滑动窗口DAA。要挖掘块G，DAA将其窗口滑动到块B-F上，并根据与目标值相比在窗口内生成块所花费的时间来重新计算难度。开采G后，它将包含在下一个窗口中。
使用滑动窗口DAA的加密货币是比特币现金（BCH），比特币SV（BSV）和门罗币（XMR）。假设BSV从BCH分支出来，它们都共享相同的DAA，在本文中，将它们统称为BCH
/ BSV。 BCH / BSV的目标是每块10分钟，而Monero的目标是每块2分钟。
BCH / BSV和XMR的滑动窗口宽度分别约为144和600块。为了避免基于时间戳的攻击，BCH /
BSV根据时间戳选择三个最新块的中值以及当前块之后的144-146个块的中值，分别用作窗口的开始和结束
。另一方面，XMR排序最后的745个块，排除最近的15个块，然后省略外部的120个块（即60个最近的块和60个最旧的块），并在其窗口中保留600个块。
###  B.DAA评估
’要评估这些难度调整算法，将检查通过租用无关的算力而发动的攻击，并提出以下问题：
（1）如果向网络引入大量算力，DAA在调整难度方面的效果如何？
（2）新矿工在进入新的加密货币后可以按大获胜率获利多少？
首先分析了新的诚实矿工进入系统后，比特币，ETH，BCH / BSV和Monero的各种DAA如何改变难度。还评估了新矿工在利用旧困难的同时的成功率。
其次，比较了一个新的自私矿工在不同DAA方案下的盈利能力。和以前一样，每个实验都模拟每个区块链（不包括孤立块）上的8086块的生成。
因此，模拟从具有给定哈希能力的网络开始，然后添加属于对手的其他挖掘能力。例如，要介绍一个具有30％哈希率的矿工，给矿工足够的哈希能力S，使得S /（S +
H）= 0.3，其中H是网络中的初始哈希能力。
忽略了矿工的时间戳操纵攻击（timestamp manipulation
attack），因为它们是一个正交的问题，对其的全面处理不在本文的讨论范围之内。因此，在选择中位数BCH /
BSV外部块时，中间的块始终是外部块，因为三个块都保证在时间戳序列中。这些系统的最新数据表明，新块中的时间戳与全局时间相匹配，不到几秒钟。
模拟还考虑了比特币和BCH /