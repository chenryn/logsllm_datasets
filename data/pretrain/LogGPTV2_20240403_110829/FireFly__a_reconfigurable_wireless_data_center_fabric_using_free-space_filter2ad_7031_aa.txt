title:FireFly: a reconfigurable wireless data center fabric using free-space
optics
author:Navid Hamed Azimi and
Zafar Ayyub Qazi and
Himanshu Gupta and
Vyas Sekar and
Samir R. Das and
Jon P. Longtin and
Himanshu Shah and
Ashish Tanwer
FireFly: A Reconﬁgurable Wireless Data Center Fabric
Using Free-Space Optics
Navid Hamedazimi,† Zafar Qazi,† Himanshu Gupta,† Vyas Sekar,(cid:63) Samir R. Das,† Jon P. Longtin,†
Himanshu Shah,† and Ashish Tanwer†
†Stony Brook University
(cid:63)Carnegie Mellon University
ABSTRACT
Conventional static datacenter (DC) network designs offer extreme
cost vs. performance tradeoffs—simple leaf-spine networks are cost-
effective but oversubscribed, while “fat tree”-like solutions offer
good worst-case performance but are expensive. Recent results
make a promising case for augmenting an oversubscribed network
with reconﬁgurable inter-rack wireless or optical links.
Inspired
by the promise of reconﬁgurability, this paper presents FireFly, an
inter-rack network solution that pushes DC network design to the
extreme on three key fronts: (1) all links are reconﬁgurable; (2) all
links are wireless; and (3) non top-of-rack switches are eliminated
altogether. This vision, if realized, can offer signiﬁcant beneﬁts in
terms of increased ﬂexibility, reduced equipment cost, and minimal
cabling complexity. In order to achieve this vision, we need to look
beyond traditional RF wireless solutions due to their interference
footprint which limits range and data rates. Thus, we make the case
for using free-space optics (FSO). We demonstrate the viability of
this architecture by (a) building a proof-of-concept prototype of a
steerable small form factor FSO device using commodity compo-
nents and (b) developing practical heuristics to address algorithmic
and system-level challenges in network design and management.
Categories and Subject Descriptors
C.2.1 [Computer-Communication Networks]: Network Architec-
ture and Design
Keywords
Data Centers; Free-Space Optics; Reconﬁgurablility
1
A robust data center (DC) network must satisfy several goals: high
throughput [13, 23], low equipment and management cost [13, 40],
robustness to dynamic trafﬁc patterns [14, 26, 48, 52], incremen-
tal expandability [18, 45], low cabling complexity [37], and low
power and cooling costs. With respect to cost and performance,
conventional designs are either (i) overprovisioned to account for
worst-case trafﬁc patterns, and thus incur high cost (e.g., fat-trees
or Clos networks [13, 16, 23]), or (ii) oversubscribed (e.g., simple
trees or leaf-spine architectures [1]) which incur low cost but offer
poor performance due to congested links.
Introduction
Permission to make digital or hard copies of all or part of this work for personal or
classroom use is granted without fee provided that copies are not made or distributed
for proﬁt or commercial advantage and that copies bear this notice and the full citation
on the ﬁrst page. Copyrights for components of this work owned by others than the
author(s) must be honored. Abstracting with credit is permitted. To copy otherwise, or
republish, to post on servers or to redistribute to lists, requires prior speciﬁc permission
and/or a fee. Request permissions from permissions@acm.org.
SIGCOMM’14, August 17–22, 2014, Chicago, IL, USA.
Copyright is held by the owner/author(s). Publication rights licensed to ACM.
ACM 978-1-4503-2836-4/14/08 ...$15.00.
http://dx.doi.org/10.1145/2619239.2626328.
Figure 1: High-level view of the FireFly architecture. The only
switches are the Top-of-Rack (ToR) switches.
Recent work suggests a promising middleground that augments
an oversubscribed network with a few reconﬁgurable links, using
either 60 Ghz RF wireless [26, 52] or optical switches [48].
In-
spired by the promise of these ﬂexible DC designs,1 we envision a
radically different DC architecture that pushes the network design
to the logical extreme on three dimensions: (1) All inter-rack links
are ﬂexible; (2) All inter-rack links are wireless; and (3) we get rid
of the core switching backbone.
This extreme vision, if realized, promises unprecedented qualita-
tive and quantitative beneﬁts for DC networks. First, it can reduce
infrastructure cost without compromising on performance. Second,
ﬂexibility increases the effective operating capacity and can im-
prove application performance by alleviating transient congestion.
Third, it unburdens DC operators from dealing with cabling com-
plexity and its attendant overheads (e.g., obstructed cooling) [37].
Fourth, it can enable DC operators to experiment with, and bene-
ﬁt from, new topology structures that would otherwise remain un-
realizable due to cabling costs. Finally, ﬂexibly turning links on
or off can take us closer to the vision of energy proportionality
(e.g., [29]).
This paper describes FireFly,2 a ﬁrst but signiﬁcant step toward
realizing this vision. Figure 1 shows a high-level overview of Fire-
Fly. Each ToR is equipped with reconﬁgurable wireless links which
can connect to other ToR switches. However, we need to look
beyond traditional radio-frequency (RF) wireless solutions (e.g.,
60GHz) as their interference characteristics limit range and capac-
ity. Thus, we envision a new use-case for Free-Space Optical com-
munications (FSO) as it can offer high data rates (tens of Gbps)
over long ranges using low transmission power and with zero in-
terference [31]. The centralized FireFly controller reconﬁgures the
topology and forwarding rules to adapt to changing trafﬁc patterns.
While prior work made the case for using FSO links in DCs [19,
28], these fail to establish a viable hardware design and also do not
address practical network design and management challenges that
1We use the terms ﬂexible and reconﬁgurable interchangeably.
2FireFly stands for Free-space optical Inter-Rack nEtwork with
high FLexibilitY.
Rack	
  1	
  Rack	
  N	
  Rack	
  r	
  Steerable	
  FSOs	
  Ceiling	
  mirror	
  ToR	
  switch	
  FireFly	
  Controller	
  Traﬃc	
  Pa=erns	
  Rule	
  change	
  FSO	
  reconf	
  319arise in reconﬁgurable designs. Our work bridges this gap along
three dimensions:
• Practical steerable FSO devices (§3): Commodity FSO de-
signs are bulky, power hungry, and offer ﬁxed point-to-point
links. Our vision imposes new form-factor, cost, and steer-
ability requirements which are fundamentally different w.r.t.
traditional FSO use-cases. To this end, we establish the vi-
ability for a small-form factor FSO design using commodity
optical devices. We demonstrate two promising steering tech-
nologies using switchable mirrors [4] and Galvo mirrors [2].
• Network provisioning (§4): Given the budget and physical
constraints, the FireFly network hardware must be provisioned
to handle unforeseen trafﬁc patterns. We argue that ﬂexible
network designs should strive to optimize a new notion of dy-
namic bisection bandwidth. While it is hard to analytically
reason about topologies that optimize this metric, we show that
random regular graphs are surprisingly good in practice.
• Network management (§5,§6): The FireFly controller needs
fast and efﬁcient topology selection and trafﬁc engineering al-
gorithms to adapt to changing trafﬁc conditions. However,
state-of-art off-the-shelf solvers fail to scale beyond 32-rack
DCs. Thus, we develop fast heuristics that achieve near-optimal
performance (§5). In addition, the FireFly controller must en-
sure that performance is not adversely impacted during recon-
ﬁgurations. We design simple but effective mechanisms that
ensure that the network always remains connected, there are
no black holes, and that the per-packet latency is bounded.
We evaluate our FSO prototype using a range of controlled lab
experiments and a longitudinal study in a real DC setting. We ﬁnd
that the links are robust to real environmental disturbances and
achieve wireline-equivalent throughput, and the steering mecha-
nisms are fast, precise, and accurate. We evaluate the end-to-end
performance of FireFly using a combination of detailed packet-
level simulations [3], large scale ﬂow-level simulations, and virtual
emulation platforms [7]. We compare FireFly against state-of-art
augmented designs and overprovisioned DC architectures. Over-
all, we ﬁnd that FireFly can achieve performance close to a full
bisection bandwidth network but at 40-60% of the cost.
We acknowledge that there are several operational concerns, es-
pecially related to maintenance, reliability, and reluctance of op-
erators to adopt dynamic network designs. (We discuss some of
these in §9). We also note that other cost factors may dominate
deployment considerations; e.g., server vs. network vs. manage-
ment costs. In spite of these valid concerns, we believe that there is
value in exploring an FSO-based all-wireless design since it could
lead to unprecedented beneﬁts. In particular, pursuing such a vision
could open up other avenues amenable to more incremental adop-
tion (e.g., hybrid/augmented networks) and inspire other novel use
cases for FSO in DCs.
2 Motivation and Overview
We begin with motivating key aspects of our vision: full ﬂexibility,
wireless links, and use of free-space optics.
2.1 Case for Full Flexibility
A key intuition behind FireFly’s design is that a fully-ﬂexible inter-
rack network can yield near-optimal bisection bandwidth even with-
out any core (non-ToR) switches.
To provide the basis for this intuition, we consider an abstract
model of a DC network with n racks (and hence n ToR switches).
We consider two abstract DC designs: (a) FBB: a full-bisection
bandwidth network, and (b) Flexible(f): an architecture with only
Figure 2: A fully-ﬂexible network can offer optimal (full-
bisection) performance at a fraction of the cost. Here, the nor-
malized performance and costs are that of the ﬂexible architec-
ture w.r.t. a full-bisection bandwidth network.
ToR switches, each of which has f ﬂexible ports that can be rewired,
whenever needed, to connect to another ToR switch. (The ﬂexible
ports are in addition to the ports connected to the servers.)
The performance metric of interest here is the evacuation time
of satisfying the demands in a given inter-rack trafﬁc matrix. Com-
puting evacuation time for FBB is straightforward as there is no
congestion. For Flexible(f) too, we can compute evacuation time
by computing a near-optimal sequence of reconﬁgurations (see [27]
for details). Note that, for a given trafﬁc matrix, Flexible(f) can re-
conﬁgure the topology multiple times; we restrict the number of
reconﬁgurations to be at most the number of non-zero entries in the
given trafﬁc matrix.
In Figure 2, we plot the normalized performance and cost of
Flexible(f) w.r.t. FBB, for varying ratio of number of ﬂexible ports
and number of servers on each rack. Here, we model the cost as
simply a (constant) multiple of the total number of ports in the
architecture. The normalized performance is the average ratio of
evacuation times of the two architectures, over many random traf-
ﬁc matrices. The key takeaway is that the coreless fully-ﬂexible
Flexible(f) architecture yields near-optimal performance when the
number of ﬂexible ports (f ) is equal to the number of servers per
rack, and at this point, its cost is only 40% of FBB (assuming FBB
to be a complete FatTree [13]). We note that this result is indepen-
dent of the number of racks or the number of servers per rack.3
Of course, any actual realization of Flexible(f) will be less opti-
mal because of limited ﬂexibility, non-zero reconﬁguration latency,
and other system inefﬁciencies. We show that our instantiation of
Flexible(f) via FireFly results in only a minimal degradation in this
cost-performance tradeoff.
2.2 Case for Wireless via Free-Space Optics
To realize a Flexible(f)-like network, conceptually we need a “patch-
panel” between racks. Of course, this is infeasible on several fronts:
(1) it requires very high fanout and backplane capacity (potentially
nullifying the cost beneﬁts), (2) the cabling complexity would be
high [37], and (3) it introduces a single-point of failure [14, 20].
Thus, we look toward reconﬁgurable wireless links between the
ToR switches.
The seemingly natural solution is RF-based wireless (e.g., 60GHz)
[26, 52]. However, since we seek to remove the wired core en-
tirely rather than just augment it, we need a large number of high-
bandwidth links to be active simultaneously. This makes the in-
terference management problem much more challenging than prior
work (e.g., using interference alignment and cancellation [22]). Al-
ternatively, one could eliminate interference by enabling laser-like
3We can show that the normalized performance of Flexible(f)
w.r.t. FBB is ≈ min(f /l, 1) where l is the number of servers per
rack [27].
 0 0.2 0.4 0.6 0.8 1 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2Normalized metric (# Flexible ports / # Servers) per rackNormalized CostNormalized Performance320directionality in RF links, but this would require antennas or an-
tenna arrays that are a few meters wide [39].4 Fundamentally, the
hardness here is due to the large wavelengths of RF for commonly
used RF bands. Finally, regulations over RF bandwidth and trans-
mit power further limit achievable data rates.
These limitations can be circumvented if we use a different part
of the EM spectrum with much smaller wavelengths. In particu-
lar, free-space optics (FSO) is a relatively established technology5
that uses modulated visible or infrared (IR) laser beams transmitted
through free space [31]. Laser beams can be very narrow, thus au-
tomatically eliminating interference and minimizing path loss. Fur-
ther, optical spectrum is unregulated and has no bandwidth limita-
tions. Thus, FSO links can easily offer Gbps–Tbps bitrates at long
distances (several kms) using relatively low transmit power [15,31].
2.3 FireFly System Overview
Building on the previous insights, FireFly uses a fully-ﬂexible inter-
rack fabric enabled by wireless FSO links (Figure 1). FireFly uses
traditional wires for intra-rack connections. We assume an out-of-
band control network to conﬁgure the ToR switches and the FSO
devices (e.g., [8]).
FSO Links. Each ToR is equipped with a number of steerable
FSO devices. We assume that the FSO devices export APIs to the
controller for reconﬁguration. We exploit the space above the racks