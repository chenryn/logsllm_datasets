Mobile and AT&T, along with two large South Korean carriers, SK
Telecom and LG U+. The number of clients distributed within each
of these operators is given in Table 1. These markets were chosen
due to the prevalence of LTE coverage, and the large volume of 4G
trafﬁc within their networks [12]. Our measurements cover a ﬁve
month period between March 1, 2014, and August 1, 2014.
In all, our dataset consists of over 280,000 individual experi-
ments, totaling over 8.1 million DNS resolutions, and 2.4 million
pings, traceroutes and HTTP GET requests from mobile end hosts.
3.2 Experiment Description
Each device ran the speciﬁed experiment in the background,
approximately once per hour. Taking into account the performance
characteristics of different radio states in LTE devices [11], each
experiment begins with a bootstrap ping to wake the radio up and
mitigate any state promotion delay from the radio. Our experiment
Mobile domains
m.yelp.com
www.youtube.com
www.facebook.com
www.google.com
www.yahoo.com
www.answers.com
www.buzzfeed.com
www.upworthy.com
Table 2: List of popular sites measured.
scripts are also designed to run continually and as quickly as
possible to maintain the radio in a high power state. For the data
presented in this paper, each experiment consist of the following:
• DNS resolutions for 9 popular mobile domains. The domains
were chosen given their popularity and because their DNS
resolution initially resulted in a canonical name (CNAME)
record, indicating the use of DNS based load balancing and
server selection. Table 2 list the different domains measured.
These were conducted for the locally conﬁgured resolver, as
well as public DNS services Google DNS and OpenDNS.
• Ping and traceroute probes to each replica server IP address
returned from the previous resolutions. An HTTP GET
request is also sent to each replica IP returned for the index
page at that address.
• Resolution of clients’ resolver IP addresses. The IPs are
found, as in Mao et al. [16], by using an authoritative DNS
(ADNS) for a subdomain of our research group’s website.
The IP address of the client’s resolver is returned in the
answer section of the response. These are conducted for
locally conﬁgured resolver and public DNS resolvers for
GoogleDNS and OpenDNS.
• Ping and traceroute probes to each IP address returned by
our ADNS. In the case of the device’s locally conﬁgured re-
solver, we ran additional probes to the IP address conﬁgured
0100200300400500Percent Increase %0.00.20.40.60.81.0CDFSprintwww.youtube.comwww.buzzfeed.comwww.facebook.comwww.google.com0100200300400500Percent Increase %0.00.20.40.60.81.0CDFVerizon Wirelesswww.youtube.comwww.buzzfeed.comwww.facebook.comwww.google.com0100200300400500Percent Increase %0.00.20.40.60.81.0CDFT-Mobilewww.youtube.comwww.buzzfeed.comwww.facebook.comwww.google.com0100200300400500Percent Increase %0.00.20.40.60.81.0CDFAT&Twww.youtube.comwww.buzzfeed.comwww.facebook.comwww.google.com0100200300400500Percent Increase %0.00.20.40.60.81.0CDFLG U+www.youtube.comwww.buzzfeed.comwww.facebook.comwww.google.com0100200300400500Percent Increase %0.00.20.40.60.81.0CDFSKTelecomwww.youtube.comwww.buzzfeed.comwww.facebook.comwww.google.com61on the device as well as to the one returned by our ADNS,
since they differed in all cases we measured.
3.3 Isolating Mobile Context and Performance
Issues
We now describe some of the techniques used for mitigating
device context and performance variation seen in network mea-
surements from mobile devices [8]. Our comparison of content
replicas is based on the latency from mobile devices to the content
replicas they ﬁnd. Each series of measurements described in the
previous section are captured as a discrete experiment, with all
measurements listed being taken at approximately the same time
and within the device context.
We use ping latency, rather than throughput based measurements
like page load time, to compare replica servers in light of previous
work by Gember et al. [8] which showed that the former are more
stable and less affected by changes in user context than the latter.
Current mobile devices are equipped with multiple radio tech-
nologies (i.e. LTE, HSPA, UTMS), each of which offer different
levels of performance. For example, 7 different radio technologies
were reported from users within both AT&T and T-Mobile, each
showing different performance characteristics. Our focus on LTE
and LTE’s performance characteristics also helps control for these
variations. LTE performance has been shown to provide much
lower and more stable radio access latency than previous wireless
technologies [11]. Figure 3 illustrates the performance and stability
of LTE connections.
These ﬁgures show the performance of different radio technolo-
gies on domain name resolution performance for devices in four
different US and two South Korean carriers. The different radio
technologies present very distinct bands of performance, following
the expected trend with newer generation radios offering lower
resolution time. For example, we see a consistent performance
differential between 4G technologies like LTE and 3G technologies
like EHRPD and EVDO Rev. A, around 50ms at the median for
both Sprint and Verizon CDMA networks. The ﬁgures also show
the poor performance of 2G radio technologies like 1xRTT, taking
nearly 1 second to complete a domain name resolution.
4. CELLULAR DNS CHARACTERIZATION
In this section, we present results of our characterization of
the DNS infrastructure of four major US and two South Korean
cellular providers. We ﬁnd an indirect DNS resolver structure, with
separate client-facing and external-facing resolvers, in all of the
cellular networks we investigated. We evaluate the performance of
cellular DNS resolution, and show that its performance under LTE
is comparable to that of current residential broadband connections.
We also examine the opacity of cellular LDNS resolvers, ﬁnding
that cellular network opaqueness extends to their DNS resolvers,
both in their external reachability and in their inconsistent mapping
to clients.
Throughout the experiments described in Section 3, we used
DNS resolutions to our ADNS servers to return the visible LDNS
resolver IP address to clients. Looking at these IP addresses,
and comparing them with the IP addresses conﬁgured as device
resolvers, we ﬁnd the use of indirect resolution techniques in all
observed networks, where the LDNS resolver seen by the client
(client-facing) differs from the resolver seen by other entities.
One of the concerns with indirect LDNS resolution is that it can
further distance end-hosts from their visible local DNS resolver,
and obfuscate information for CDNs.
Indirect LDNS resolution takes the form of anycasted DNS
resolvers, LDNS Pools [2], and tiered resolver infrastructure. In an
Client
Provider
19
Sprint
27
Verizon
3
T-Mobile
AT&T
5
SK Telecom 2
LG U+
5
External
22
28
32
43
24
80
Pairs Consistency %
31
27
32
43
24
80
64.1
100
7.3
12
12
6.2
Table 3: Number of LDNS Pairs seen by our mobile clients.
Network structure and conﬁguration varies by network in both the
number of client facing and external facing resolvers, as well as the
consistency of their pairings.
anycast DNS resolver setup, each client keeps the same IP address
for a DNS resolver, regardless of their location. DNS queries are
directed toward nearby DNS resolvers within the cellular network
through anycast routing.
LDNS pools, as previously described by Azloubi et al. [2],
consist of a collection of servers which load balance DNS requests
within themselves. Unlike Azloubi et al., who detected the pres-
ence of LDNS pools by seeing different resolvers for consecutive
queries responding to a CNAME entry, we were able to identify
LDNS pools by directly comparing the conﬁgured resolver on the
mobile device with the IP address seen by our ADNS.
Finally, we observed tiered DNS servers, which exist as two
separate public IP addresses, yet with one client resolver and one
external facing resolver. These paired resolvers also differ in
latency and traceroute hops from client probes. For example, tiered
resolvers in Verizon’s network exist in entirely different ASes.
Tiered resolvers may indicate a hierarchy of DNS resolvers within
that operator’s network, however, we are only able to observe the
end points from our experiments.
We recorded the grouping of observed client- and external-
facing resolvers to understand the conﬁguration and dynamics of
cellular infrastructure and their DNS resolvers. We refer to each
grouping as an LDNS Pair. We calculate the consistency of these
resolver pairings as the percentage of our measurements in which
the client- and external-facing resolvers are paired. The consistency
of pairings captures the stability of mappings between clients,
their locally conﬁgured resolver, and the external facing resolver.
For example, a client resolver equally load balanced between two
external resolvers would have a consistency of 50%.
4.1 Cellular DNS Infrastructure
In our characterization, we ﬁnd different DNS conﬁgurations
within each of the cellular providers studied.
While every cellular provider measured employs indirect resolu-
tion techniques, their individual policies differ with regards to both
the number of client-facing and external-facing DNS resolvers, and
their consistency of pairings. Looking at the composition of LDNS
pairings, we ﬁnd several patterns emerging in DNS infrastructure
conﬁgurations including the use of anycasted DNS, the presence
of LDNS pools, and tiered DNS resolvers in separate ASes. A
summary of each operator’s DNS infrastructure is given in Table 3.
We observed the presence of LDNS pools within the Sprint’s
network and the network of the two South Korean carriers.
In
each of these cases, all resolvers are public IP addresses, and all
have pairs in which a client facing resolver is observed paired with
multiple external resolver addresses.
In the case of Sprint, each
resolver maintains a fairly consistent mapping between client and
external resolvers, over 60% of the time.
62(a) US Carriers
(b) SK Carriers
Figure 3: DNS resolution times for each cellular operator’s DNS, grouped by the radio technology active during the domain resolution. We
see very deﬁned performance boundaries between different radio technologies.
For South Korean carriers SK Telecom and LG U+, we observed
2 and 5 client conﬁgured LDNS resolver addresses and 24 and 89
publicly visible addresses, respectively. For these carriers, each
client and external pair are contained within the same /24 preﬁx. In
Sprint, however, we ﬁnd a high degree of load balancing between
external resolvers in Sprint’s network. We elaborate on the resolver
consistency over time issue in Section 4.5.
Additionally, we found the use of anycasted DNS within AT&T’s
and T-Mobile’s networks. Both carriers showed a limited number
of conﬁgured DNS resolver addresses on client devices with a
signiﬁcantly larger number of publicly visible addresses indicating
the use of IP anycast for resolvers. For example, a single AT&T
address (172.26.38.1) in our measurements shows mapping to 40
external resolver addresses.
Verizon was the only cellular operator which maintained a
100% consistency between client and external facing resolvers.
While both resolver locations were public IP addresses, we were
unable to measure the distance between these resolver pairs due
to unresponsive external resolver probes. However, each LDNS
pair within Verizon exists in different ASes: 6167 for client facing
resolvers and 22394 for external facing resolvers.
4.2 Cellular Resolver Distance
An important aspect of DNS in cellular networks is the net-
work distance between clients and their corresponding resolver
infrastructure. Distance to client facing resolvers is important for
resolution performance, while distance to external facing resolvers
has implications on content replica selection [18].
To capture the differences between both types of resolvers,
clients were directed to issue ping probes to the sets of resolvers
during each experiment. Figure 4 plots the cumulative distribution
of latencies to clients’ conﬁgured client facing resolver and external
facing resolver. We see cases where both resolvers have nearly
equal latencies indicating either identical machines or collocated
resolvers, as is the case with SK Telecom. Resolvers in T-Mobile,
Sprint and AT&T showed signs of distance between resolvers,
revealing physical hierarchy of resolvers within their networks.
We were unable to determine structural properties from latency
measurements since only a minor fraction of external resolvers
within Verizon and LG U+ networks responded to probes.
Figure 5: DNS resolution time for US carriers measured from client
devices for the 4 major US cellular providers.
While we recorded traceroutes to each client and external facing
resolver found, we observed the use of widespread tunnelling
within each cellular network (e.g. VPN or MPLS). This rendered
irrelevant much of the structural information, such as hop distance,
gathered by these probes.
4.3 Cellular DNS Performance
We now look at the resolution performance of each mobile
client’s DNS provided from their cellular operator. We ﬁnd DNS
performance under LTE to be relatively consistent and comparable
to DNS performance on wired broadband.
Figures 5 and
6 present, respectively, CDFs of resolution
time for each of the four US carriers, and for the two South
Korean carriers we studied. The ﬁgures show reasonable resolution
performance for carriers in both markets, each having median
resolution times between 30 and 50 ms. These numbers are
comparable to resolution times within the wired Internet [1] for the
lower 50th percentile.
Both South Korean carriers and T-Mobile exhibit bimodal be-
havior above their 50th percentile, and the remaining operators
show a long tail of resolution times above the 80th percentile. To
determine measure the impact of resolver cache on resolution time
tails, we conducted back to back queries, measuring the difference
between the ﬁrst and second DNS queries. The results, presented
101102103104Resolution Time (ms)0.00.20.40.60.81.0CDFSprint1xRTTEHRPDEVDO_ALTE101102103104Resolution Time (ms)0.00.20.40.60.81.0CDFVerizon Wireless1xRTTEHRPDEVDO_ALTE101102103104Resolution Time (ms)0.00.20.40.60.81.0CDFT-MobileEDGEGPRSHSDPAHSPAHSPAPLTEUTMS101102103104Resolution Time (ms)0.00.20.40.60.81.0CDFAT&TEDGEGPRSHSDPAHSPAHSPAPLTEUTMS101102103104Resolution Time (ms)0.00.20.40.60.81.0CDFLG U+EHRPDLTE101102103104Resolution Time (ms)0.00.20.40.60.81.0CDFSKTelecomHSDPAHSPAHSPAPHSUPALTEUTMS101102103104Resolution Time (ms)0.00.20.40.60.81.0CDFVerizon WirelessSprintT-MobileAT&T63(a) US Carriers
(b) SK Carriers
Figure 4: Client latency to internal and external resolver locations. Ping latencies in Sprint, T-Mobile and AT&T reveal resolvers which are
located in separate locations, with external resolvers located further away from clients. Although no external resolvers in either Verizon’s or
LG U+’s networks responded to probes, client and external resolvers exist in separate ASes in the case of Verizon.
Figure 6: DNS resolution time for South Korean carriers measured
from client devices for 2 major cellular providers.
in Figure 7, show cache misses accounting for additional delays
approximately 20% of the time, similar to the bimodal behavior
seen in Figures 5 and 6.
4.4 Cellular Network Opaqueness