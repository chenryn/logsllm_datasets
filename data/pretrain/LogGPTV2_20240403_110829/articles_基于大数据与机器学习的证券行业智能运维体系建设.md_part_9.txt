日志中的3号变量（订单处理情况）再异常时段其撤成处理占比从正常的30%上
升到 75%；4 号变量（组播序号）从正常的平均分布情况集中到少数几个组播序
号取值上。这些变量内容的异常可以进一步帮助撰写日志、对异常系统有所了解
的同事去定位故障所在。
6.2.4 定位问题–多指标异常定位
6.2.4.1 算法支持
在故障发生时（业务指标发生异常），会触发定位系统开始分析。其主要分
为三部分：
 指标异常程度评判
系统会收集当前一段时间所有机器和模块的指标数据，并执行异常检测算法
去检测所有指标的异常程度。
 相似异常机器聚类
得到所有指标的异常程度后，通过聚类算法将具有类似指标异常的机器进行
聚类。
 定位结果排序
通过运行智能排序算法，将所有的聚类结果按照异常程度排名，并最终展现
给运维人员。
6.2.4.1 场景展示
当发现异常时，通过分析 O32 系统的机器指标（CPU、内存、IO、网络等）
来快速定位问题发生的位置和指标。针对 11 月 13 日的告警，利用机器指标进
一步分析并推荐可能的故障为：
Oracle 数据库的 lock-waiting-sessions 异常
Oracle 数据库的 sys-cpu 异常
6.2.5 分析问题 - 业务/机器指标的关联分析
6.2.5.1 算法支持
通过结合 CMDB 中的应用链路关系，基于相同的故障时间点，通过结合无监
督异常检测、多维指标异常定位、以及聚类等相关算法，从业务指标的异常入手，
从端到端全链路的角度，关联分析所有跟该业务异常有关的应用、中间件、数据
库的各项机器指标以及应用日志、中间件日志、数据库日志等，给出问题的关联
影响分析，通过运维专家经验介入，帮助运维人员分析问题，便于运维人员排查
问题。
6.2.5.2 场景展示
从业务性能指标异常发现出发通过关联机器指标和日志中的异常信息，可以
分析得出，当业务发生问题时，CPU使用率异常同时关联得到日志模板数量与变
量分布显著异常的，并提取出整体表现异常的日志Top10。
异常时段日志内容对比
第 章收益及展望
7
本章分享了课题建设带来的收益，同时总结和积累对于智能运维体系建设的
经验和教训，为后续项目的开展提供经验的积累。
7.1 预期收益
 运维数字化管理
基于明细、汇总的数据，加入智能化算法进行多维分析和数据挖掘，为运维
决策提供了大量数据支持，为运维创新创造了有利条件。
 提升运维效率
通过对数据进行集中收集、清洗，为管理分析、挖掘预测类等系统提供一致
的数据基础，通过无监督的异常检测以及定位，帮助运维人员及时发现异常的影
响，在故障发生前可以提前发现隐患，大大提高运维的效率。
 提升系统可用性
通过快速发现问题、定位故障的原因、帮助分析问题，实现在故障发生时大
幅减少处置的时间，使得业务中断的几率大幅降低。在故障发生时，缩短运维人
员分析的花费，使得业务中断时间大幅缩小。
 改善数据质量
从中长期看，数据平台对分散在各个业务系统中的数据整合、清洗，有助于
整体数据质量的改善，提高的数据的实用性。
 促进内部协作
实现分散在各个业务系统中的数据在大数据平台中的集中和整合，建立统一
的运维视图，有效促进业务的集成和协作。
7.2 经验分享
通过本次课题的研究与实践，我们为此类项目的持续性建设和推广开展提供
了如下的经验和教训：
 AI算法具有一定的局限性
我们在实施的过程中，需要制定明确的预期目标。首先目前的 AI 算法的场
景应用并不是万能的，对于每一个运维场景是否有合适的计算模型，都需要运维
专家与算法团队进行充分的可行性论证。
 算法的落地需要运维专家与算法专业团队配合
算法人才往往比较稀缺，懂得运维的算法人才更少。在课题建设初期，我们
尝试自己去根据场景和数据去选择相应的算法去进行调试，比如自主调试过
ARIMA算法、LSTM、混合泊松等算法来进行容量预测，但是效果一般。我们通过
和清华团队合作，一起进行算法优化和落地，算法应用的准确度大幅提升。
 数据的梳理和处理要有合理的规划
数据是AIOps的基础，在建设之前，需要对运维数据进行梳理。同时，结合
实际的场景进行数据采集、处理。
本次课题中，我们梳理的数据类型如下：
数据类型 描述 对接方式
业务日志客户行为 Agent采集
核心业务数据
天旦系统业务笔数 通过kafka对接
应用日志监控 Agent采集
应用运行数据
功能耗时 对接kafka
CMDB 对接kafka/DB采集
ITSM流程数据
事件/变更/知识库 DB采集
操作系统、数据库 操作系统日志，MAXGAUGE，BMC API、Agent采集
监控数据 BMC TrueSight API
网络流量 网管软件 Kafka对接
 智能运维体系的持续发展需要平台具备可扩展性
平台如不具备可扩展性，后续的建设往往受限某个厂商，制约了应用场景的
拓展。我们在体系的设计中，选择了基于微服务的平台架构。可以有效的整合不
同厂商的算法产品，更容易水平扩展。
 体系建设需要合理规划、分步实施
智能运维体系的建设不能一蹴而就，需要根据团队的建设、数据的积累、算
法的持续优化、AI技术的不断发展，进行分阶段分批次的建设。
7.3 未来展望
运维领域具备人工智能发挥效果的天然优势（数据丰富），但同时也有众多
挑战（问题复杂，难以抽象定义），通过AI处理运维数据切入，可以打通完整的
智能运维落地流程，积累宝贵经验和方法论，指导后续更多智能运维的尝试,最
终实现智能运维的落地实施。
证券行业的业务系统是一个复杂的大型分布式异构系统，针对不同的应用，
智能运维工作的场景和需求都不相同，无法通过简单的算法实现。本项目我们将
异常检测和异常定位上的算法的研究和逐步落地实施，后续将会在根因分析和异
常预测方面进一步开展，最终将分散的AIOps算法场景进行组合，并且通过数据
积累和分析将业务运行基线整理清晰，最终实现贴近实际运维场景的系统画像功
能，实现整个运维工作向智能化的转变。
随着自动化运维工具的不断成熟，我们也在尝试思考智能运维与自动化工具
结合的需要人工干预的半智能自愈在运维场景的实现，进一步提升运维工作的整
体处置效率。
参考文献
• 牛新庄, 双轮驱动，打造数字化智能银行, 中国金融电脑, 2018.9
• 饶琛琳，ELKStack权威指南（第2版），机械工业出版社，2017.5
• 裴丹, 基于AIOps的无人运维, 高效运 2018,
https://mp.weixin.qq.com/s/zN3PCjwOw62pAUEl0id4Tg
• 张戎, 腾讯运维的 AI 实践,高效运维 2018
• 高赟, 周薇, 韩冀中, 等. 一种基于文法压缩的日志异常检测算法[J].
计算机学报, 2014, 37(1): 73-86.
• 何清, 李宁, 罗文娟, 等. 大数据下的机器学习算法综述[J]. 模式识别
与人工智能, 2014, 27(4): 327-336.
• 贺倩. 人工智能技术的发展与应用[J]. 电力信息与通信技术, 2017,
15(9): 32-37.
• 李叶紫, 王振友, 周怡璐, 等. 基于贝叶斯最优化的 Xgboost 算法的改
进及应用[J]. 广东工业大学学报, 2017, 35(01): 23-28.
• 曾军, 周国富. 基于机器学习的多语言文本抽取系统实现[J]. 计算机应
用与软件, 2017, 34(4): 87-92.
• 程学旗, 靳小龙, 王元卓, 等. 大数据系统和分析技术综述[J]. 软件学
报, 2014, 9.
附录
课题参与人员简介
单位 姓名 通讯地址 邮箱
光大证券 周雄伟 富特中路299号47号楼三楼 PI:EMAIL
（光大证券信息技术总部副总经理） 13621955575
光大证券 吴浩 富特中路299号47号楼三楼 PI:EMAIL
光大证券 孙伟 富特中路299号47号楼三楼 PI:EMAIL
光大证券 耿锋 富特中路299号47号楼三楼 PI:EMAIL
清华 NetMan 朱晶 北京市海淀区中关村东路 8 号东升大厦 PI:EMAIL
实验室 B座502
清华 NetMan 刘大鹏 北京市海淀区中关村东路 8 号东升大厦 PI:EMAIL
实验室 B座502
合胜科技 鲍捷 上海市长宁区协和路787号A北合胜楼 PI:EMAIL
合胜科技 李腾达 上海市长宁区协和路787号A北合胜楼 PI:EMAIL
日志易 黄俊毅 北京市朝阳区望京阜通西大街 望京 huang.junyi@yottabyte.
SOHO T2-B座-1706 cn
日志易 陈秋华 北京市朝阳区望京阜通西大街 望京 chen.qiuhua@yottabyte.
SOHO T2-B座-1706 cn
日志易 王振宇 北京市朝阳区望京阜通西大街 望京 wang.zhenyu@yottabyte.
SOHO T2-B座-1706 cn