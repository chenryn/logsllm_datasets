#### 原因：做一些奇怪的、自定义的事情
你可以写一个 DNS 服务器，做任何你想做的事情，它不一定要只返回一组静态记录。
有几个例子：
* Replit 有一篇博文介绍了 [为什么他们编写自己的权威性 DNS 服务器来处理路由](https://blog.replit.com/dns)
* [nip.io](https://nip.io) 将 [10.0.0.1.nip.io](http://10.0.0.1.nip.io) 映射为 10.0.0.1
* 我为 [乱用 dns](https://jvns.ca/blog/2021/12/15/mess-with-dns/) 而写了一个自定义 DNS 服务器
#### 原因：省钱
权威名称服务器似乎一般按每百万次 DNS 查询收费。比如，似乎 Route 53 每百万次查询收费 0.5 美元，[NS1](https://ns1.com/plans) 每百万次查询收费约 8 美元。
我对一个大型网站的权威 DNS 服务器实际需要解决多少次查询没有概念（哪些类型的网站会对其权威 DNS 服务器进行 10 亿次 DNS 查询？可能是很多，但我没有这方面的经验）。但是有几个人在回复中提到成本是一个原因。
#### 原因：你可以改变你的注册商
如果你为你的域名使用一个单独的权威名称服务器，而不是你的注册商的名称服务器，那么当你转移到一个不同的注册商时，你所要做的就是把你的权威 DNS 服务器设置为正确的值，从而使你的 DNS 恢复正常。你不需要迁移你所有的 DNS 记录，那非常痛苦。
但你不需要为此而运行你自己的名字服务器。
#### 原因：地理 DNS
你可能想根据客户的位置为你的域名返回不同的 IP 地址，给他们一个离他们很近的服务器。
这是很多权威的域名服务器服务所提供的服务，你不需要为此而专门运行名字服务器。
#### 原因：避免针对他人的拒绝服务攻击
许多权威 DNS 服务器是共享的。这意味着，如果有人攻击 `google.com` 或其他的 DNS 服务器，而你恰好在使用同一个权威 DNS 服务器，你可能会受到影响，即使攻击不是针对你。例如，2016 年的这次 [对 Dyn 的 DDoS 攻击](https://en.wikipedia.org/wiki/DDoS_attack_on_Dyn)。
#### 原因：把所有的配置放在一个地方
有一个人提到，他们喜欢把所有的配置（DNS 记录、let's encrypt、nginx 等）放在一台服务器上的同一个地方。
#### 另类原因：把 DNS 当作 VPN 使用
显然，[iodine](https://github.com/yarrick/iodine) 是一个可以让你通过 DNS 隧道传输流量的权威 DNS 服务器，它可以让你像 VPN 一样与外界联系，
### 运行解析器的原因
#### 原因：隐私
如果有人能看到你所有的 DNS 查询，他们就有你（或你组织中的每个人）正在访问的所有域名的完整列表！你可能更愿意保持这种隐私。你可能更愿意保持这种隐私。
#### 原因：阻止恶意网站
如果你运行你自己的解析器，你可以（通过不返回任何结果）拒绝解析你认为 “坏” 的域名的 DNS 查询。
几个你可以自己运行（或只是使用）的解析器的例子：
* [Pi-Hole](https://pi-hole.net/) 阻止广告商
* [Quad9](https://www.quad9.net/) 阻止做恶意软件/网络钓鱼/间谍软件的域名。 Cloudflare 似乎有一个 [类似的服务](https://developers.cloudflare.com/1.1.1.1/1.1.1.1-for-families)
* 我想也有一些企业安全软件会阻止那些托管恶意软件的域名的 DNS 查询
* DNS 不是静态数据库。它是非常动态的，答案往往实时取决于查询的 IP 地址、内容服务器的当前负载等。除非你将这些记录的服务委托给做出这些决定的实体，否则很难实时实现。
* DNS 委派控制使访问控制非常简单。从区域中切下的部分都由控制委派服务器的人控制，所以对一个主机名的责任是隐含在 DNS 委派中的。
#### 原因：在 nginx 中获得动态代理
这里有一个很酷的故事，来自 [这条推文](https://twitter.com/jordanorelli/status/1478795241876504577)：
> 
> 我在一个应用程序中写了一个 DNS 服务器，然后把它设置为 nginx 的解析器，这样我就可以获得动态的后端代理，而不需要 nginx 运行 lua。Nginx 向应用程序发送 DNS 查询，应用程序查询 Redis 并作出相应的反应。这对我正在做的事情来说，效果非常好。
> 
> 
> 
#### 原因：避免恶意解析器
一些 ISP 运行的 DNS 解析器会做一些不好的事情，比如把不存在的域名指向他们控制的 IP，向你显示广告或他们控制的奇怪的搜索页面。
使用你控制的解析器或你信任的另一个解析器可以帮助你避免这种情况。
#### 原因：解析内部域名
你可能有一个内部网络，其域名（比如 `blah.corp.yourcompany.com`）并不在公共互联网上。为内部网络中的机器运行你自己的解析器，就有可能访问这些域名。
无论是访问只在本地的服务，还是为公共互联网上的服务获得本地地址，你都可以在家庭网络中做同样的事情。
#### 原因：避免你的 DNS 查询被中间人劫持
有一个人 [说](https://twitter.com/passcod/status/1478806468539269120)：
> 
> 我在我的局域网路由器上运行了一个解析器，它的上游使用了基于 HTTPS 的 DNS（DoH），所以物联网和其他不支持 DoH 或 DoT 的设备不会在外面喷射明文 DNS 查询。
> 
> 
> 
### 就是这样
对我来说，探索 DNS 的 “原因” 感觉很重要，因为它是一个如此复杂凌乱的系统，我认为大多数人如果不理解为什么这些复杂的东西是有用的，就很难有动力去学习这么复杂的主题。
感谢 Marie 和 Kamal 对这篇文章的讨论，也感谢 Twitter 上提供这些原因的所有人。
---
via: 
作者：[Julia Evans](https://jvns.ca/) 选题：[lujun9972](https://github.com/lujun9972) 译者：[wxy](https://github.com/wxy) 校对：[wxy](https://github.com/wxy)
本文由 [LCTT](https://github.com/LCTT/TranslateProject) 原创编译，[Linux中国](https://linux.cn/) 荣誉推出