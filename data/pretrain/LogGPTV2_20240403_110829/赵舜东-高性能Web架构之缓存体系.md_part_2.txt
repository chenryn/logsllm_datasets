### 存储使用情况
- **已用存储**：122KD
- **存储磁盘位置**：C:\usersjanc

### 缓存条目列表
- 北京

---

## 第25页
### 控制台
- HTML
- CSS
- DOM
- 网络

### 详细信息
- **URL**：alidns.com
- **状态码**：200
- **大小**：3.2KB
- **远程IP**：110.75.69.72:80
- **响应时间**：8.5ms

#### 响应头信息
- **Connection**：keep-alive
- **Content-Encoding**：gzip
- **Content-Type**：text/html
- **Date**：Sun, 27 Mar 2016 01:16:26 GMT
- **Last-Modified**：Fri, 11 Jul 2014 03:25:04 GMT
- **Server**：Tengine/1.4.6
- **Transfer-Encoding**：chunked

#### 请求头信息
- **Accept**：text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
- **Accept-Encoding**：gzip, deflate
- **Accept-Language**：zh-CN,zh;q=0.8,en-US;q=0.5,en;q=0.3
- **Cache-Control**：no-cache
- **Connection**：keep-alive
- **Host**：alidns.com
- **Pragma**：no-cache
- **User-Agent**：Mozilla/5.0 (Windows NT 6.1; WOW64; rv:44.0) Gecko/20100101 Firefox/44.0

### 其他请求
- **GET jquery.min.js**
  - **状态码**：200
  - **大小**：90.9KB
  - **远程IP**：110.75.69.72:80
- **GET jqueryslider.min.js**
  - **状态码**：200
  - **大小**：2.7KB
  - **远程IP**：110.75.69.72:80
- **GET jquery.alinav.js**
  - **状态码**：200
  - **大小**：3.5KB
  - **远程IP**：110.75.69.72:80
- **GET site.js**
  - **状态码**：200
  - **大小**：4.1KB
  - **远程IP**：110.75.69.72:80
- **GET wb.js**
  - **状态码**：200
  - **大小**：12.2KB
  - **远程IP**：124.165.204.43:80
- **GET logo.png**
  - **状态码**：200
  - **大小**：17.9KB
  - **远程IP**：110.75.69.72:80

---

## 第26页
### Cookies
- 清除
- 保持
- 全部HTML
- CSS
- JavaScript
- XHR
- 图片
- 插件
- 媒体
- 字体

### 详细信息
- **URL**：alidns.com
- **状态码**：200
- **大小**：3.2KB
- **远程IP**：110.75.69.72:80
- **响应时间**：34ms

#### 响应头信息
- **Connection**：keep-alive
- **Date**：Sun, 27 Mar 2016 01:48:37 GMT
- **Last-Modified**：Fri, 11 Jul 2014 03:25:01 GMT
- **Server**：Tengine/1.4.6

#### 请求头信息
- **Accept**：text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
- **Accept-Encoding**：gzip, deflate
- **Accept-Language**：zh-CN,zh;q=0.8,en-US;q=0.5,en;q=0.3
- **Cache-Control**：max-age=0
- **Connection**：keep-alive
- **Host**：alidns.com
- **If-Modified-Since**：Fri, 11 Jul 2014 03:25:04 GMT
- **User-Agent**：Mozilla/5.0 (Windows NT 6.1; WOW64; rv:44.0) Gecko/20100101 Firefox/44.0

### 其他请求
- **GET global.css**
  - **状态码**：200
  - **大小**：12.9KB
  - **远程IP**：110.75.69.72:80
- **GET jquery.min.js**
  - **状态码**：304
  - **大小**：90.9KB
  - **远程IP**：110.75.69.72:80
- **GET jquery.slider.min.js**
  - **状态码**：200
  - **大小**：2.7KB
  - **远程IP**：110.75.69.72:80
- **GET jquery.ainav.js**
  - **状态码**：200
  - **大小**：3.5KB
  - **远程IP**：110.75.69.72:80
- **GET sibe.js**
  - **状态码**：200
  - **大小**：4.1KB
  - **远程IP**：110.75.69.72:80
- **GET wb.js**
  - **状态码**：200
  - **大小**：12.2KB
  - **远程IP**：124.165.204.43:80
- **GET logo.png**
  - **状态码**：200
  - **大小**：17.9KB
  - **远程IP**：110.75.69.72:80
- **GET 22-bg.png**
  - **状态码**：200
  - **大小**：1.9KB
  - **远程IP**：110.75.69.72:80

---

## 第27页
### 支持页面
- **URL**：support.html
- **状态码**：200
- **域**：linuxhot.com

#### 响应头信息
- **Connection**：keep-alive
- **Content-Encoding**：gzip
- **Content-Type**：text/html
- **Date**：Thu, 27 Jul 2017 08:23:49 GMT
- **Etag**：W/"58b7565e-2fd7"
- **Last-Modified**：Wed, 01 Mar 2017 23:16:44 GMT
- **Server**：openresty
- **Transfer-Encoding**：chunked
- **Vary**：Accept-Encoding

#### 请求头信息
- **Accept**：text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
- **Accept-Encoding**：gzip, deflate, br
- **Accept-Language**：zh-CN,zh;q=0.8,en-US;q=0.5,en;q=0.3
- **Cache-Control**：max-age=0
- **Connection**：keep-alive
- **Cookie**：Hm_lyt_9278c07b1e6ab84d8b45b99c33fac1bs=1500713774, 1500714105, 150111; Hm_1yt_994e57aedfo1779e135da9839e946ed9=1484831974; wp-settings-1=mfo1d3Do%261ibraryContent%SDhrowse%26editor%3Dtinyn; wp-settings-time-i=149543176l; qqmsil_alias-workweixin222s=1501144422; mb-referrer hostmame-ww linuxhot.com; nh-start-page-ur=%2Fsupport.html
- **Host**：www.linuxhot.com
- **If-None-Match**：*5979a52c-2fd7
- **Upgrade-Insecure-Requests**：1
- **User-Agent**：Mozilla/5.0 (Windows NT 6.1; WOW64; rv:53.0) Gecko/20100101 Firefox/53.0

---

## 第28页
### 刷新方式
1. **在地址栏中输入网址后按回车或点击转到按钮**：
   - 浏览器会对所有没有过期的内容直接使用本地缓存，这时Last-Modified、Etag和Expires均不会受影响。
2. **按F5或浏览器刷新按钮**：
   - 浏览器会在请求中附加必要的缓存协商，这时Last-Modified和Etag会受到影响，需要发起缓存协商的动作，但对Expires无效。
3. **按Ctrl+F5或按Ctrl并点击刷新按钮**：
   - 每次浏览器都发起一个全新的请求，不使用任何缓存。

---

## 第29页
### 如何禁用浏览器缓存
1. **直接修改文件名**：
   - 例如：`http://www.example.com/js/code.js?20160101`

---

## 第30页
### 目录
- Web缓存知识体系
- Buffer与Cache详解
- DNS与浏览器缓存
- CDN与反向代理缓存
- Web服务器与分布式缓存
- 数据库与操作系统缓存

---

## 第31页
### DNS递归查询
- **www.test.com.cdn.dnsv1.com**
- **TencentDNS**
- **返回最佳接入节点IP**

### CDN请求流程
1. **DNS解析**
2. **源站**
3. **Local DNS**
4. **返回最佳接入节点IP**
5. **发起请求**
6. **内部路由**
7. **转发请求**
8. **返回数据**
9. **CDN节点获取数据并缓存**
10. **用户获取数据**

### 示例请求
- **请求**：`http://www.test.com/1.jpg`
- **CDN中间源**
- **CDN接入节点**

---

## 第32页
### CDN关键技术
- **内容路由（请求调度）**
- **内容分发（PUSH（分发）、PULL（回源））**
- **内容存储（内容源存储、Cache节点存储）**
- **内容管理**

---

## 第33页
### 反向代理缓存现状
- **Nginx+Lua (Openresty)**
- **Squid**
- **Varnish**
- **ATS**

---

## 第34页
### Nginx反向代理缓存配置
```nginx
[root@www ~]# vim /usr/local/nginx/conf/proxy.conf
#CDN+
proxy_temp_path /data/cdn_cache/proxy_temp_dir;
max_size=1g;
proxy_connect_timeout 5;
proxy_read_timeout 60;
proxy_send_timeout 5;
proxy_buffer_size 16k;
proxy_buffers 4 64k;
proxy_busy_buffers_size 128k;
proxy_temp_file_write_size 128k;
proxy_next_upstream error timeout invalid_header http_500 http_502 http_503 http_404;

# Use Proxy Cache
proxy_cache cache_one;
proxy_cache_key "$host$request_uri";
add_header Cache "$upstream_cache_status";
proxy_cache_valid 200 304 301 302 8h;
proxy_cache_valid 404 1m;
proxy_cache_valid any 2d;
```

---

## 第35页
### Firebug控制台
- **HTML**
- **CSS**
- **DOM**
- **网络**
- **Cookies**

### 详细信息
- **URL**：example.com
- **状态码**：304
- **大小**：24B
- **远程IP**：192.168.56.11:80

#### 响应头信息
- **Cache-Control**：public, max-age=0
- **Connection**：keep-alive
- **Date**：Mon, 28 Mar 2016 16:41:45 GMT
- **Etag**："18-52438f7899228"
- **Last-Modified**：Fri, 04 Mar 2016 13:19:37 GMT
- **Server**：nginx/1.9.12

#### 请求头信息
- **Accept**：text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
- **Accept-Encoding**：gzip, deflate
- **Accept-Language**：zh-CN,zh;q=0.8,en-US;q=0.5,en;q=0.3
- **Cache-Control**：max-age=0
- **Connection**：keep-alive
- **Host**：m.example.com
- **If-Modified-Since**：Fri, 04 Mar 2016 13:19:37 GMT
- **If-None-Match**："18-52438f7899228"
- **User-Agent**：Mozilla/5.0 (Windows NT 6.1; WOW64; rv:44.0) Gecko/20100101 Firefox/44.0

---

## 第36页
### 目录
- Web缓存知识体系
- Buffer与Cache详解
- DNS与浏览器缓存
- CDN与反向代理缓存
- Web服务器与分布式缓存
- 数据库与操作系统缓存

---

## 第37页
### Web服务器缓存
- **缓存动态内容输出 (SSI慎用)**
- **页面静态化**
- **Opcode缓存**
- **应用程序本地缓存**

---

## 第38页
### 页面静态化
- **用户**
- **浏览器（缓存）**
- **CDN**
- **原站**
- **img1.shopimg.com**
- **js1.shopimg.com**
- **passport.shop.com**
- **item.shop.com**
- **cart.shop.com**
- **price.shop.com**
- **css1.shopmg.com**
- **search.shop.com**
- **xuibu**
- **tuan.shop.com**
- **club.shop.com**

- **Java、PHP应用**
- **MooseFS**

---

## 第39页
### FastCGI缓存流程
- **HTTP请求**
- **Redis**
- **缓存命中？**
- **FastCGI**
- **Nginx**
- **PHP-FPM**
- **MySQL**
- **缓存**
- **HTTP响应**

---

## 第40页
### 应用代码执行缓存
- **编译型语言**：C++, Java, Go, Swift, C#
- **解释型语言**：JavaScript, Python, PHP, Ruby, Perl, Pascal, Erlang
- **混合型语言**：Objective-C

---

## 第41页
### PHP脚本执行
- **检查Opcode缓存**
  - **未缓存**：
    - **解析**
    - **读取共享内存**
    - **编译为Opcode**
    - **保存到共享内存**
  - **已缓存**：
    - **执行 (Zend Engine)**
    - **输出**

---

## 第42页
### PHP OpCache缓存
- **PHP 5.5.0之前版本**
  1. 使用APC（Alternative PHP Cache）扩展
  2. 修改php.ini增加`extension=/full/path/to/php_apc.so`
  3. 修改php.ini配置相关参数
- **PHP 5.5.0及后续版本**
  1. 编译时增加`--enable-opcache`
  2. 修改php.ini增加`zend_extension=/full/path/to/opcache.so`
  3. 修改php.ini配置相关参数