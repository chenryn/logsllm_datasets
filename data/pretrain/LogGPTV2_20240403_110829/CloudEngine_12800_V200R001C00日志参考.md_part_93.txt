日志参考 83 VBST
83.1 VBST/4/hwVbstVlanNumExceeded_active
日志信息
VBST/4/hwVbstVlanNumExceeded_active: The number of VLANs running VBST has
exceeded the upper limit, and the VBST function may not take effect on some VLANs.
(hwVbstMaxVlanNum=[hwVbstMaxVlanNum])
日志含义
VBST支持的VLAN个数已经超出上限，部分VLAN的VBST功能无法生效。
日志参数
参数名称 参数含义
hwVbstMaxVlanNum VBST支持的VLAN最大个数。
可能原因
配置的VLAN个数超过了最大值。
处理步骤
l 使用命令display stp vlan instance查看实例分配成功的VLAN，对于未分配到实例
的VLAN建议删除。
----结束
83.2 VBST/4/hwVbstVlanNumExceeded_clear
日志信息
VBST/4/hwVbstVlanNumExceeded_clear: The number of VLANs running VBST has
restored to the normal range. (hwVbstMaxVlanNum=[hwVbstMaxVlanNum])
日志含义
支持VBST的VLAN数目恢复正常。
日志参数
参数名称 参数含义
hwVbstMaxVlanNum VBST支持的VLAN最大个数。
文档版本 06 (2017-09-12) 华为专有和保密信息 886
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
日志参考 83 VBST
可能原因
当前所有配置的VLAN都已分配到了实例，并且个数低于上限值的95%。
处理步骤
l 正常运行，无需处理
----结束
文档版本 06 (2017-09-12) 华为专有和保密信息 887
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
日志参考 84 VIRTUAL-PERCEPTION
84
VIRTUAL-PERCEPTION
关于本章
84.1 VIRTUAL-PERCEPTION/2/hwVpVmDownloadProfileFault_active
84.2 VIRTUAL-PERCEPTION/2/hwVpVmDownloadProfileFault_clear
文档版本 06 (2017-09-12) 华为专有和保密信息 888
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
日志参考 84 VIRTUAL-PERCEPTION
84.1 VIRTUAL-PERCEPTION/2/
hwVpVmDownloadProfileFault_active
日志信息
VIRTUAL-PERCEPTION/2/hwVpVmDownloadProfileFault_active:Failed to download the
VM profile. (VMVlan=[VMVlan], VMMAC=[VMMAC], ProfileID=[ProfileId],
IfIndex=[IfIndex], IfName=[IfName])
日志含义
获取策略失败。
日志参数
参数名称 参数含义
VMVlan 虚拟机所属的VLAN ID
VMMAC 虚拟机的MAC地址
ProfileID 策略ID
IfIndex 端口索引
IfName 端口名称
可能原因
虚拟机无法获取策略，影响业务运行。
处理步骤
步骤1 执行命令display radius-server configuration，检查radius server是否配置正确，如果配
置错误，需要修正。
步骤2 执行命令vm-manager，进入VM管理视图。执行display this命令查看配置的radius
server group（VM管理视图） group-name 与步骤1中查看到的group-name是否相同。
步骤3 检查radius server上是否存在对应虚拟机的策略，如果没有策略，需要添加对应的策
略。
步骤4 请联系技术支持人员。
步骤5 结束。
----结束
文档版本 06 (2017-09-12) 华为专有和保密信息 889
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
日志参考 84 VIRTUAL-PERCEPTION
84.2 VIRTUAL-PERCEPTION/2/
hwVpVmDownloadProfileFault_clear
日志信息
VIRTUAL-PERCEPTION/2/hwVpVmDownloadProfileFault_clear: Succeeded in
downloading the VM profile. (VMVlan=[VMVlan], VMMAC=[VMMAC],
ProfileID=[ProfileID], IfIndex=[IfIndex], IfName=[IfName])
日志含义
获取策略成功。
日志参数
参数名称 参数含义
VMVlan 虚拟机所属的VLAN ID
VMMAC 虚拟机的MAC地址
ProfileID 策略ID
IfIndex 端口索引
IfName 端口名称
可能原因
虚拟机成功获取策略。
处理步骤
步骤1 正常运行信息，无需处理。
----结束
文档版本 06 (2017-09-12) 华为专有和保密信息 890
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
日志参考 85 VRRP
85
VRRP
关于本章
85.1 VRRP/3/VRRP_DOUBLE_MASTER_ERR
85.2 VRRP/3/vrrpTrapAuthFailure
85.3 VRRP/4/vrrpTrapMasterDown
85.4 VRRP/4/vrrpTrapNewMaster
85.5 VRRP/4/vrrpTrapNonMaster
85.6 VRRP6/3/VRRP6_DOUBLE_MASTER_ERR
85.7 VRRP6/4/vrrp6MasterDown
85.8 VRRP6/4/vrrp6NewMaster
85.9 VRRP6/4/vrrp6NonMaster
文档版本 06 (2017-09-12) 华为专有和保密信息 891
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
日志参考 85 VRRP
85.1 VRRP/3/VRRP_DOUBLE_MASTER_ERR
日志信息
VRRP/3/VRRP_DOUBLE_MASTER_ERR:VRRP detected double masters.
(IfIndex=[IfIndex], IfName=[IfName], VrId=[VrId], PeerIp=[SrcIpAddr],
PeerPriority=[PeerPriority])
日志含义
VRRP检测到双主。
日志参数
参数名称 参数含义
IfIndex
接口索引
IfName
接口名称
VrId
VRRP备份组ID
PeerIp
IPV4版本对端备份组所在接口的主IP地址
PeerPriority
对端VRRP备份组的优先级
可能原因
可能产生的原因如下：
l 本端VRRP备份组的VRRP协议报文没有发送出去。
l 链路负载大，导致本端发送的VRRP协议报文被丢弃。
l 本端VRRP的配置和对端不一致（认证方式不一致，认证字不一致，虚IP列表不一
致、协议版本号不一致）。
处理步骤
步骤1 执行命令debugging vrrp { state | packet | timer } [ interface interface-type interface-
number [ vrid virtual-router-id ] ]，查看VRRP协议报文没有发出去的原因。
步骤2 执行命令display vrrp verbose查看两端认证方式是否一致，认证字是否一致。若不一
致，执行命令vrrp vrid virtual-router-id authentication-mode { simple { [ plain ] key |
cipher cipher-key } | md5 md5-key }，重新配置VRRP报文认证方式。
步骤3 执行命令display vrrp查看虚IP地址及数目是否一致。若不一致，执行命令vrrp vrid
virtual-router-id virtual-ip virtual-address，重新配置VRRP的虚IP地址。
步骤4 执行命令display vrrp protocol-information查看两端协议版本号是否一致。若不一致，
执行命令vrrp version { 2 | 3 }，重新配置VRRP的协议版本号。
文档版本 06 (2017-09-12) 华为专有和保密信息 892
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
日志参考 85 VRRP
步骤5 结束。
----结束
85.2 VRRP/3/vrrpTrapAuthFailure
日志信息
VRRP/3/vrrpTrapAuthFailure: VRRP authentication failed.
(vrrpTrapPacketSrc=[vrrpTrapPacketSrc],
vrrpTrapAuthErrorType=[vrrpTrapAuthErrorType])
日志含义
收到的VRRP报文的认证方式或认证字和本设备冲突。
日志参数
参数名称 参数含义
vrrpTrapPacketSrc 接收报文的源IP地址
vrrpTrapAuthErrorType 认证失败的原因，有如下3种：
l invalidAuthType
l authTypeMismatch
l authFailure
可能原因
可能产生的原因为收到的VRRP报文的认证方式或认证字和本设备冲突。
处理步骤
步骤1 执行命令display vrrp verbose查看两端认证方式是否一致，认证字是否一致。若不一
致，执行命令vrrp vrid virtual-router-id authentication-mode { simple { [ plain ] key |
cipher cipher-key } | md5 md5-key }，重新配置VRRP报文认证方式。
步骤2 结束。
----结束
85.3 VRRP/4/vrrpTrapMasterDown
日志信息
VRRP/4/vrrpTrapMasterDown: The VRRP status changed from master to another state.
(ifIndex=[ifIndex], VrId=[VrId], MasterIpAddr=[MasterIpAddr], sysName=[sysName],
ifName=[ifName], CurrentState=[CurrentState], ChangeReason=[ChangeReason])
文档版本 06 (2017-09-12) 华为专有和保密信息 893
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
日志参考 85 VRRP
日志含义
VRRP状态由Master迁移到其他状态。
日志参数
参数名称 参数含义
ifIndex
VRRP所在接口名索引
VrId
备份组号
MasterIpAddr
主IP地址
sysName
系统名称
ifName
VRRP所在接口名称
CurrentState
VRRP当前状态
ChangeReason
状态变化的原因
可能原因
可能产生的原因如下：
l priority calculation：主用设备或备份设备的VRRP优先级发生变化。
l interface down：主用设备上VRRP所在的接口状态变为Down。
l standby deleted：VRRP被删除。
l admin-vrrp drove：管理VRRP状态发生变化。
l ip change：VRRP所在接口的IP地址发生变化。
l link BFD session down：与VRRP联动的Link BFD的状态变为Down。
l link BFD down-number changed：与VRRP联动的Link BFD的状态为Down的个数发
生变化。
l exiting load-balance group：VRRP退出负载分担管理组。
l becoming normal-vrrp：未配置虚IP地址的管理VRRP切换成为普通VRRP。
处理步骤
步骤1 检查告警中CurentState的值，查到VRRP变化后的状态，根据具体状态处理如下：
l 如果状态是initialize，则请执行步骤2。
l 如果状态是backup，则请执行步骤3。
步骤2 原主用设备故障，检查故障原因，恢复主用设备。
l 检查VRRP所在接口是否正常，不正常，则请执行步骤4。
文档版本 06 (2017-09-12) 华为专有和保密信息 894
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
日志参考 85 VRRP
步骤3 使用命令display vrrp verbose查看原主用和备用设备的VRRP的配置优先级和运行优先
级。
l 检查VRRP所监视的接口或BFD是否发生故障，优先级进行了增减计算， 需检查
故障的原因，恢复所监视的链路，正常，则请执行步骤6。
l 如果VRRP所监视的接口或BFD均正常，则请执行步骤5。
步骤4 在vrrp所在接口视图下使用命令display this interface，检查该接口的物理状态和协议状
态。
l 如果物理状态Down，则说明链路有故障，请检查故障原因，恢复链路，并执行步
骤6。
l 如果物理状态Up，检查协议状态，如果协议状态Down，则说明IP地址被删除，并
执行步骤6。
l 如果协议状态Up，则说明IP地址被配置为与VRRP的虚IP地址不在同一网段。
步骤5 联系技术支持人员。检查本端配置与对端配置，配置不合理的进行修改。
步骤6 结束。
----结束
85.4 VRRP/4/vrrpTrapNewMaster
日志信息
VRRP/4/vrrpTrapNewMaster: The VRRP status changed to master. (ifIndex=[ifIndex],
VrId=[VrId], MasterIPAddress=[MasterIPAddress], sysName=[sysName], ifName=[ifName],
ChangeReason=[ChangeReason])
日志含义
有设备变成Master状态。
日志参数
参数名称 参数含义
ifIndex
VRRP所在接口名索引
VrId
备份组号
MasterIPAddress
主IP地址
sysName
系统名称
ifName
VRRP所在接口名称
ChangeReason
状态变化的原因
文档版本 06 (2017-09-12) 华为专有和保密信息 895
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
日志参考 85 VRRP
可能原因
可能产生的原因为设备变为Master。
处理步骤
l 正常运行信息，无需处理。
----结束
85.5 VRRP/4/vrrpTrapNonMaster
日志信息
VRRP/4/vrrpTrapNonMaster: The VRRP status changed between backup and initialize.
(ifIndex=[ifIndex], VrId=[VrId], MasterIpAddr=[MasterIpAddr], sysName=[sysName],
ifName=[ifName], CurrentState=[CurrentState], ChangeReason=[ChangeReason])
日志含义
VRRP状态在Backup和Initialize之间切换。
日志参数
参数名称 参数含义
ifIndex
VRRP所在接口名索引
VrId
备份组号
MasterIpAddr
主IP地址
sysName
系统名称
ifName
VRRP所在接口名称
CurrentState
VRRP变化后的状态。可能的取值如下：
l Initialize
l Backup
ChangeReason