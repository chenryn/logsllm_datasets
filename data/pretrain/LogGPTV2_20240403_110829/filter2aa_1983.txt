百度数据中心自动化平台演进
百度系统部
高级项目经理
陆川
2015-04-24
目录
IDC自动化平台的定义
1
2
3
百度IDC自动化平台演进
IDC自动化平台的未来
IDC内部
百度IDC运营平台
分布式集群
Web/DB
业务监控
部署
上线
业务运维
IDC运营平台
资源管理
容量管理
监控报警
资源管理
网络
交换机上架
服务器
上架
DNS
负载均衡
初始化
故障处理
供电
空调
冷机
机房
。。。
。。。
。。。
变更管理
百度IDC自动化平台-why
• 百度每年在IDC上的投入？
• 上架交付3000台机器需要多长时间？
百度IDC自动化平台-why
2010
2011
2012
2013
2014
百度服务器保有量
历史上的今天
IDC自动化平台-建立
机器规模
千级
Table.js
if（）{
。。。
}elseif（）{
。。。
}else{
。。。
IDC自动化平台-扩张
机器规模
万级
变更管理
资源管理
可视化
商业流程引擎
权限管理
配置管理
BPM
数据库
用户管理
业务层
基础层
故障管理
IDC自动化平台-扩张
机器规模
万级
商业流程引擎
流程数量2100+
流程越来越复杂
效率要求越来越高
crontab
自动任务
控制器
参数定制
周期控制
状态控制
通知机制
IDC自动化平台-成长
机器规模
十万级
机器上线流程
50
8
机器重装流程
50
8
• 操作时间不可控
• 优先级不可控
• 工作量不均等
• 业务逻辑过于复杂
• 代码很难复用
IDC自动化平台-成长
机器规模
十万级
流程A
流程B
流程C
OP1
OP2
OP3
OP4
……
原子操作
抽象
按需组合
操作A
OP1
OP3
OP5
操作B
OP1
OP6
操作C
OP2
OP4
OP6
IDC自动化平台-成长
机器规模
十万级
50台机器重装
50台机器上架
10台机器申请vip
流程处理
业务队列
审核、确认
校验、拆分
serverA | 重装
serverB | 重装
serverC | 上架
serverD | VIP
单机操作
IDC自动化平台-成长
机器规模
十万级
serverA | 重装
serverD | VIP
任务接收
任务处理
校验、参数处理
拆分、下发
serverA | 重装 | 发送安装参数 | RADI5
serverD | vip | 分配IP | XX集群
serverE | 上架 | 2
serverE | 上架 | 安装校验 | IP/RAID
单机原子操作
重装序列
1
OP1
2
OP2
3
OP3
单机操作
IDC自动化平台-成长
机器规模
十万级
serverA | 重装 | 发送安装参数 | RADI5
serverD | vip | 分配IP | XX集群
serverE | 上架 | 安装校验 | IP/RAID
操作调度
校验、缓存、调度
workA
workB
workC
松耦合
定制接入
单机原子操作
IDC自动化平台-成长
机器规模
十万级
serverA | 重装 | 发送安装参数 | RADI5
serverD | vip | 分配IP | XX集群
serverE | 上架 | 安装校验 | IP/RAID
任务队列
事件中心
运维中心
成功-继续下一个操作
失败-转人工运维
原子操作结果
Protal
IDC自动化平台-成长
机器规模
十万级
50
28
1
1
1
1
1
…
流程处理
业务处理
审核
确认
开放平台
300
任务处理层
操作调度层
事件中心
运维中心
超时管理
任务监控
智能分配
集中处理
IDC自动化平台-成长
机器规模
十万级
2010
2011
2012
2013
2014
服务器平均操作时间
2010
2011
2012
2013
2014
网络平均操作时间
IDC自动化平台-成长
机器规模
十万级
2010
2014
人员组成
开发
运维
-10%
0%
10%
20%
30%
40%
50%
60%
70%
80%
90%
100%
2010
2014
自动化成功率
IDC自动化平台-成长
机器规模
十万级
操作调度
集群操作系统
业务运维系统
监控系统
IDC对象
自动化体系结构
外包服务平台
数据统计分析
外部平台
IDC自动化平台-未来
机器规模
百万级
业务监控
IDC监控
CMDB
模式识别
调度处理
可视化
扩容缩容
故障恢复
智能化
结束语
• 致谢
– 感谢我的家人
– 感谢InfoQ & 2015QconBeijing
– 感谢百度系统部&技术管理部
• 招最优秀的人才
– 简历发送至：PI:EMAIL
• 参考资料
– 百度发布2014年第四季度财报
– 日交付3000台 百度携浪潮刷新服务器记录
Q&A
Thanks
微信：silentime
@InfoQ
infoqchina