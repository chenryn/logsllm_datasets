    tests/test_logging.py::test_logger PASSED                                                                                                                                                        [ 79%]
    tests/test_logging.py::test_logger_debug PASSED                                                                                                                                                  [ 79%]
    tests/test_logging.py::test_existing_handler PASSED                                                                                                                                              [ 80%]
    tests/test_logging.py::test_wsgi_errors_stream PASSED                                                                                                                                            [ 80%]
    tests/test_logging.py::test_has_level_handler PASSED                                                                                                                                             [ 80%]
    tests/test_logging.py::test_log_view_exception PASSED                                                                                                                                            [ 80%]
    tests/test_logging.py::test_warn_old_config PASSED                                                                                                                                               [ 80%]
    tests/test_meta.py::test_changelog_utf8_compatible PASSED                                                                                                                                        [ 80%]
    tests/test_regression.py::test_memory_consumption PASSED                                                                                                                                         [ 81%]
    tests/test_regression.py::test_safe_join_toplevel_pardir PASSED                                                                                                                                  [ 81%]
    tests/test_regression.py::test_aborting FAILED                                                                                                                                                   [ 81%]
    tests/test_reqctx.py::test_teardown_on_pop PASSED                                                                                                                                                [ 81%]
    tests/test_reqctx.py::test_teardown_with_previous_exception PASSED                                                                                                                               [ 81%]
    tests/test_reqctx.py::test_teardown_with_handled_exception PASSED                                                                                                                                [ 82%]
    tests/test_reqctx.py::test_proper_test_request_context PASSED                                                                                                                                    [ 82%]
    tests/test_reqctx.py::test_context_binding PASSED                                                                                                                                                [ 82%]
    tests/test_reqctx.py::test_context_test PASSED                                                                                                                                                   [ 82%]
    tests/test_reqctx.py::test_manual_context_binding PASSED                                                                                                                                         [ 82%]
    tests/test_reqctx.py::TestGreenletContextCopying::test_greenlet_context_copying SKIPPED                                                                                                          [ 83%]
    tests/test_reqctx.py::TestGreenletContextCopying::test_greenlet_context_copying_api SKIPPED                                                                                                      [ 83%]
    tests/test_reqctx.py::test_session_error_pops_context PASSED                                                                                                                                     [ 83%]
    tests/test_reqctx.py::test_bad_environ_raises_bad_request PASSED                                                                                                                                 [ 83%]
    tests/test_reqctx.py::test_environ_for_valid_idna_completes PASSED                                                                                                                               [ 83%]
    tests/test_reqctx.py::test_normal_environ_completes PASSED                                                                                                                                       [ 83%]
    tests/test_signals.py::test_template_rendered PASSED                                                                                                                                             [ 84%]
    tests/test_signals.py::test_before_render_template PASSED                                                                                                                                        [ 84%]
    tests/test_signals.py::test_request_signals PASSED                                                                                                                                               [ 84%]
    tests/test_signals.py::test_request_exception_signal PASSED                                                                                                                                      [ 84%]
    tests/test_signals.py::test_appcontext_signals PASSED                                                                                                                                            [ 84%]
    tests/test_signals.py::test_flash_signal PASSED                                                                                                                                                  [ 85%]
    tests/test_signals.py::test_appcontext_tearing_down_signal PASSED                                                                                                                                [ 85%]
    tests/test_subclassing.py::test_suppressed_exception_logging PASSED                                                                                                                              [ 85%]
    tests/test_templating.py::test_context_processing PASSED                                                                                                                                         [ 85%]
    tests/test_templating.py::test_original_win PASSED                                                                                                                                               [ 85%]
    tests/test_templating.py::test_request_less_rendering PASSED                                                                                                                                     [ 85%]
    tests/test_templating.py::test_standard_context PASSED                                                                                                                                           [ 86%]
    tests/test_templating.py::test_escaping PASSED                                                                                                                                                   [ 86%]
    tests/test_templating.py::test_no_escaping PASSED                                                                                                                                                [ 86%]
    tests/test_templating.py::test_escaping_without_template_filename PASSED                                                                                                                         [ 86%]
    tests/test_templating.py::test_macros PASSED                                                                                                                                                     [ 86%]
    tests/test_templating.py::test_template_filter PASSED                                                                                                                                            [ 87%]
    tests/test_templating.py::test_add_template_filter PASSED                                                                                                                                        [ 87%]
    tests/test_templating.py::test_template_filter_with_name PASSED                                                                                                                                  [ 87%]
    tests/test_templating.py::test_add_template_filter_with_name PASSED                                                                                                                              [ 87%]
    tests/test_templating.py::test_template_filter_with_template PASSED                                                                                                                              [ 87%]
    tests/test_templating.py::test_add_template_filter_with_template PASSED                                                                                                                          [ 88%]
    tests/test_templating.py::test_template_filter_with_name_and_template PASSED                                                                                                                     [ 88%]
    tests/test_templating.py::test_add_template_filter_with_name_and_template PASSED                                                                                                                 [ 88%]
    tests/test_templating.py::test_template_test PASSED                                                                                                                                              [ 88%]
    tests/test_templating.py::test_add_template_test PASSED                                                                                                                                          [ 88%]
    tests/test_templating.py::test_template_test_with_name PASSED                                                                                                                                    [ 88%]
    tests/test_templating.py::test_add_template_test_with_name PASSED                                                                                                                                [ 89%]
    tests/test_templating.py::test_template_test_with_template PASSED                                                                                                                                [ 89%]
    tests/test_templating.py::test_add_template_test_with_template PASSED                                                                                                                            [ 89%]
    tests/test_templating.py::test_template_test_with_name_and_template PASSED                                                                                                                       [ 89%]
    tests/test_templating.py::test_add_template_test_with_name_and_template PASSED                                                                                                                   [ 89%]
    tests/test_templating.py::test_add_template_global PASSED                                                                                                                                        [ 90%]
    tests/test_templating.py::test_custom_template_loader PASSED                                                                                                                                     [ 90%]
    tests/test_templating.py::test_iterable_loader PASSED                                                                                                                                            [ 90%]
    tests/test_templating.py::test_templates_auto_reload PASSED                                                                                                                                      [ 90%]
    tests/test_templating.py::test_templates_auto_reload_debug_run PASSED                                                                                                                            [ 90%]
    tests/test_templating.py::test_template_loader_debugging PASSED                                                                                                                                  [ 90%]
    tests/test_templating.py::test_custom_jinja_env PASSED                                                                                                                                           [ 91%]
    tests/test_testing.py::test_environ_defaults_from_config PASSED                                                                                                                                  [ 91%]
    tests/test_testing.py::test_environ_defaults PASSED                                                                                                                                              [ 91%]
    tests/test_testing.py::test_environ_base_default PASSED                                                                                                                                          [ 91%]
    tests/test_testing.py::test_environ_base_modified PASSED                                                                                                                                         [ 91%]
    tests/test_testing.py::test_client_open_environ PASSED                                                                                                                                           [ 92%]
    tests/test_testing.py::test_specify_url_scheme PASSED                                                                                                                                            [ 92%]
    tests/test_testing.py::test_path_is_url PASSED                                                                                                                                                   [ 92%]
    tests/test_testing.py::test_make_test_environ_builder PASSED                                                                                                                                     [ 92%]
    tests/test_testing.py::test_environbuilder_json_dumps PASSED                                                                                                                                     [ 92%]
    tests/test_testing.py::test_blueprint_with_subdomain PASSED                                                                                                                                      [ 92%]
    tests/test_testing.py::test_redirect_keep_session PASSED                                                                                                                                         [ 93%]
    tests/test_testing.py::test_session_transactions PASSED                                                                                                                                          [ 93%]
    tests/test_testing.py::test_session_transactions_no_null_sessions PASSED                                                                                                                         [ 93%]
    tests/test_testing.py::test_session_transactions_keep_context PASSED                                                                                                                             [ 93%]
    tests/test_testing.py::test_session_transaction_needs_cookies PASSED                                                                                                                             [ 93%]
    tests/test_testing.py::test_test_client_context_binding PASSED                                                                                                                                   [ 94%]
    tests/test_testing.py::test_reuse_client PASSED                                                                                                                                                  [ 94%]
    tests/test_testing.py::test_test_client_calls_teardown_handlers PASSED                                                                                                                           [ 94%]
    tests/test_testing.py::test_full_url_request PASSED                                                                                                                                              [ 94%]
    tests/test_testing.py::test_json_request_and_response PASSED                                                                                                                                     [ 94%]
    tests/test_testing.py::test_client_json_no_app_context PASSED                                                                                                                                    [ 95%]
    tests/test_testing.py::test_subdomain PASSED                                                                                                                                                     [ 95%]
    tests/test_testing.py::test_nosubdomain PASSED                                                                                                                                                   [ 95%]
    tests/test_testing.py::test_cli_runner_class PASSED                                                                                                                                              [ 95%]
    tests/test_testing.py::test_cli_invoke PASSED                                                                                                                                                    [ 95%]
    tests/test_testing.py::test_cli_custom_obj PASSED                                                                                                                                                [ 95%]
    tests/test_testing.py::test_client_pop_all_preserved PASSED                                                                                                                                      [ 96%]
    tests/test_user_error_handler.py::test_error_handler_no_match PASSED                                                                                                                             [ 96%]
    tests/test_user_error_handler.py::test_error_handler_subclass PASSED                                                                                                                             [ 96%]
    tests/test_user_error_handler.py::test_error_handler_http_subclass PASSED                                                                                                                        [ 96%]
    tests/test_user_error_handler.py::test_error_handler_blueprint PASSED                                                                                                                            [ 96%]
    tests/test_user_error_handler.py::test_default_error_handler PASSED                                                                                                                              [ 97%]
    tests/test_user_error_handler.py::TestGenericHandlers::test_handle_class_or_code[InternalServerError] PASSED                                                                                     [ 97%]
    tests/test_user_error_handler.py::TestGenericHandlers::test_handle_class_or_code[500] PASSED                                                                                                     [ 97%]
    tests/test_user_error_handler.py::TestGenericHandlers::test_handle_generic_http PASSED                                                                                                           [ 97%]
    tests/test_user_error_handler.py::TestGenericHandlers::test_handle_generic PASSED                                                                                                                [ 97%]
    tests/test_views.py::test_basic_view PASSED                                                                                                                                                      [ 97%]
    tests/test_views.py::test_method_based_view PASSED                                                                                                                                               [ 98%]
    tests/test_views.py::test_view_patching PASSED                                                                                                                                                   [ 98%]
    tests/test_views.py::test_view_inheritance PASSED                                                                                                                                                [ 98%]
    tests/test_views.py::test_view_decorators PASSED                                                                                                                                                 [ 98%]
    tests/test_views.py::test_view_provide_automatic_options_attr PASSED                                                                                                                             [ 98%]
    tests/test_views.py::test_implicit_head PASSED                                                                                                                                                   [ 99%]
    tests/test_views.py::test_explicit_head PASSED                                                                                                                                                   [ 99%]
    tests/test_views.py::test_endpoint_override PASSED                                                                                                                                               [ 99%]
    tests/test_views.py::test_methods_var_inheritance PASSED                                                                                                                                         [ 99%]
    tests/test_views.py::test_multiple_inheritance PASSED                                                                                                                                            [ 99%]
    tests/test_views.py::test_remove_method_from_parent PASSED                                                                                                                                       [100%]
    =============================================================================================== FAILURES ===============================================================================================
    ____________________________________________________________________________________________ test_aborting _____________________________________________________________________________________________
    app = 
        def test_aborting(app):
            class Foo(Exception):
                whatever = 42
            @app.errorhandler(Foo)
            def handle_foo(e):
                return str(e.whatever)
            @app.route("/")
            def index():
                raise flask.abort(flask.redirect(flask.url_for("test")))
            @app.route("/test")
            def test():
                raise Foo()
            with app.test_client() as c:
                rv = c.get("/")
    >           assert rv.headers["Location"] == "http://localhost/test"
    E           AssertionError: assert '/test' == 'http://localhost/test'
    E             - /test
    E             + http://localhost/test
    tests/test_regression.py:95: AssertionError
    ====================================================================== 1 failed, 534 passed, 6 skipped, 1 xpassed in 4.48 seconds ======================================================================