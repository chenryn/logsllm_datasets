Delft University of Technology
LogChunks: A Data Set for Build Log Analysis
Brandt, Carolin E.; Panichella, Annibale; Zaidman, Andy; Beller, Moritz
DOI
10.1145/3379597.3387485
Publication date
2020
Document Version
Submitted manuscript
Published in
Proceedings - 2020 IEEE/ACM 17th International Conference on Mining Software Repositories, MSR 2020
Citation (APA)
Brandt, C. E., Panichella, A., Zaidman, A., & Beller, M. (2020). LogChunks: A Data Set for Build Log
Analysis. In Proceedings - 2020 IEEE/ACM 17th International Conference on Mining Software Repositories,
MSR 2020 (pp. 583-587). (Proceedings - 2020 IEEE/ACM 17th International Conference on Mining
Software Repositories, MSR 2020). https://doi.org/10.1145/3379597.3387485
Important note
To cite this publication, please use the final published version (if applicable).
Please check the document version above.
Copyright
Other than for strictly personal use, it is not permitted to download, forward or distribute the text or part of it, without the consent
of the author(s) and/or copyright holder(s), unless the work is under an open content license such as Creative Commons.
Takedown policy
Please contact us and provide details if you believe this document breaches copyrights.
We will remove access to the work immediately and investigate your claim.
This work is downloaded from Delft University of Technology.
For technical reasons the number of authors shown on this cover page is limited to a maximum of 10.
LogChunks: A Data Set for Build Log Analysis
CarolinE.Brandt,AnnibalePanichella,AndyZaidman,MoritzBeller
{c.e.brandt,a.panichella,a.e.zaidman,m.m.beller}@tudelft.nl
DelftUniversityofTechnology
TheNetherlands
ABSTRACT directhumanconsumption.Therefore,tosupportdevelopersand
Buildlogsaretextualby-productsthatasoftwarebuildprocess researchers in efficiently making use of the information within
creates,oftenaspartofitsContinuousIntegration(CI)pipeline. buildlogs,wemustatleastsemi-automaticallyretrievethechunks
Buildlogsareaparamountsourceofinformationfordevelopers ofthelogthatdescribethetargetedinformation.
whendebuggingintoandunderstandingabuildfailure.Recently, Therearedifferenttechniquestoretrieveinformationchunks
attemptstopartlyautomatethistime-consuming,purelymanual fromCIbuildlogs.Belleretal.usearule-basedsystemofregular
activityhavecomeup,suchasrule-orinformation-retrieval-based expressionstoanalyzelogsfromTravisCI[2].Suchregularexpres-
techniques. sionsaredevelopedbylookingatexemplarybuildlogs.Vassallo
Webelievethathavingacommondatasettocomparedifferent etal.wroteacustomparsertogatherinformationforbuildrepair
buildloganalysistechniqueswilladvancetheresearcharea.Itwill hints[19].Recently,Amaretal.reducedthenumberoflinesfora
ultimatelyincreaseourunderstandingofCIbuildfailures.Inthis developertoinspectbycreatingadiffbetweenlogsfromfailedand
paper,wepresentLogChunks,acollectionof797annotatedTravis successfulbuilds[1].
CIbuildlogsfrom80GitHubrepositoriesin29programminglan- Theseapproacheshavevariousstrengthsandweaknesses:Reg-
guages.Foreachbuildlog,LogChunkscontainsamanuallylabeled ularexpressionsareexact,buttediousanderror-pronetomain-
logpart(chunk)describingwhythebuildfailed.Weexternally tain[12].Customparsersarepowerfulthoughfragileinlightof
validatedthedatasetwiththedeveloperswhocausedtheoriginal changesinthelogstructure.Diffingbetweenfailedandsuccess-
buildfailure. fullogscanreducetheinformationtobeprocessed,butisatbest
ThewidthanddepthoftheLogChunksdatasetareintendedto semi-automatic[1].
makeitthedefaultbenchmarkforautomatedbuildloganalysis At the moment, there is only anecdotal evidence on the per-
techniques. formanceofthesetechniques,andwhenatechniqueshouldbe
preferredoveritsalternatives.Infact,thereisnodatasetavailable
KEYWORDS tosupportthecreationofsuchabenchmarkforbuildloganalysis
techniques.FollowingSimetal.,abenchmarkgivesusthechance
CI,BuildLogAnalysis,BuildFailure,ChunkRetrieval
to“increasethescientificmaturityofthearea”[15]ofbuildlog
ACMReferenceFormat: analysisbyevaluatingandcomparingresearchcontributions.
CarolinE.Brandt,AnnibalePanichella,AndyZaidman,MoritzBeller.2020. Thus,inthispaper,wepresentLogChunks[4],1acollectionof
LogChunks:ADataSetforBuildLogAnalysis.In17thInternationalCon-
797labeledTravisCIbuildlogsfrom80highlypopularGitHub
ferenceonMiningSoftwareRepositories(MSR’20),October5–6,2020,Seoul, repositoriesin29programminglanguageswithwemanuallyla-
RepublicofKorea.ACM,NewYork,NY,USA,5pages.https://doi.org/10.
beledthechunkdescribingwhythebuildfailed.Thedatasetalso
1145/3379597.3387485
provideskeywordstheauthorswouldusetosearchforthelabeled
logchunkandcategorizesthelogchunksaccordingtotheirformat
1 INTRODUCTION
withinthelog.
Continuous Integration (CI) has become a common practice in
softwareengineering[10].ManysoftwareprojectsuseCI[2,10,17]
2 CREATINGLOGCHUNKS
todetectbugsearly[8,18],improvedeveloperproductivity[10,13]
andcommunication[7].CIbuildsproducelogswhichreportresults Thissectionpresentshowwegatheredthelogsandourmanual
of various sub-steps within the build. These build logs contain labelingprocess.
alotofvaluableinformationfordevelopersandresearchers—for
example,descriptionsofcompileerrorsorfailedtests[2,14,20]. 2.1 LogCollection
However,buildlogscanbeverboseandlarge—sometimesin Inthissection,wedescribealongtheoverviewinFigure1howwe
excessof50MBofASCIItext[2]—makingtheminadequatefor createdLogChunks.AllstepsareautomatizedasRubyscripts2and
highlyconfigurable.
Permissiontomakedigitalorhardcopiesofallorpartofthisworkforpersonalor
classroomuseisgrantedwithoutfeeprovidedthatcopiesarenotmadeordistributed
forprofitorcommercialadvantageandthatcopiesbearthisnoticeandthefullcitation RepositorySampling. WetargetmatureGitHubrepositoriesthat
onthefirstpage.Copyrightsforcomponentsofthisworkownedbyothersthanthe are using Travis CI. To avoid personal and toy projects we se-
author(s)mustbehonored.Abstractingwithcreditispermitted.Tocopyotherwise,or
lectpopularprojectsbasedonthenumberofusersthatstarred
republish,topostonserversortoredistributetolists,requirespriorspecificpermission
and/orafee.Requestpermissionsfrompermissions@acm.org.
MSR’20,October5–6,2020,Seoul,RepublicofKorea
©2020Copyrightheldbytheowner/author(s).PublicationrightslicensedtoACM. 1LogChunksisopenlyavailableonZenodo:https://zenodo.org/record/3632351
ACMISBN978-1-4503-7517-7/20/05...$15.00 2Datacollectionscriptsandtheiroriginalparameterizationareincludedinthedata
https://doi.org/10.1145/3379597.3387485 set.
MSR’20,October5–6,2020,Seoul,RepublicofKorea Brandt,etal.
Logs from
Popular Failed CI Builds
Repositories
Manual
GitHub Labeling
Travis CI
Structural
Category
Search
Failure: ===stderr===
Chunk That Describes Keywords
Why The Build Failed
Failure, xxx xxx
FAIL: TestClientNotificationStorm (2.33s) Error,
client_test.go:378: didn't get expected error ===DIFF=== ——— ===stdout===
Figure1:OverviewofLogChunks
aproject[11].WequeryGHTorrent[9]forthemostpopularlan- SearchKeywords. Toextractthesearchkeywords,weconsidered
guagesonGitHub,andsubsequently,themostpopularrepositories theChunkandtenlinesaboveandbelow.Thelabeler’staskwas
foragivenlanguage. tonotedownthreestringstheywouldsearchfor(“grep”)tofind
ForLogChunks,wequeriedGHTorrentfrom2018-04-01forthe thisfailuredescription.Thestringsshouldappearinoraroundthe
threemostpopularrepositoriesofeachofthe30mostpopularlan- Chunkandarecase-sensitive.Wemadenolimitationsonthesearch
guagestocoverabroadrangeofdevelopmentlanguages.Among string;particularly,spacesareallowed.
theresultingrepositoriesare,forexample,Microsoft/TypeScript,
Structural Category. To label the structural categories we pre-
git/gitandjwilm/alacritty.
sentedtheChunkandthesurroundingcontexttothelabelerforall
logsfromarepository.Weaskedthelabelertoassignnumerical
BuildSampling. TosamplebuildsforLogChunkswekeepthe
categoriesaccordingtowhethertheChunkhadthesamestructural
tenmostrecentbuildsofthestatusfailed[6].Wecheckupto1,000
representation.
buildsperrepositorytoensurepredictableterminationofthelog
collection.
2.3 Validation
LogSampling. TravisCIbuildscompriseanumberofjobsthat Wevalidatedourcollecteddatapointsinaniterativefashion.First,
actualize a build process in different environments. Hence, the weperformedaninitialinter-raterreliabilitystudywiththesecond
outcomefromdifferentjobsmightbedifferent.Foreachbuildin authorofthispaper.Ourlearningsfromthisinitialinternalstudy
LogChunks,wedownloadthelogofthefirstjobthathasthesame arethat1)itisimportantanddifficulttoadequatelycommunicate
stateastheoverallbuild. alldecisionsandassumptionsonhowtoandwhichdatatolabeland
Weinspectedthecollectedbuildlogsanddiscardedlogsfrom 2)therecanbedifferentlegitimateviewpointsonwhichlogchunk
threerepositories.Onehadonlyonefailedbuild,twoothershad constitutethecardinalerrorandwhichkeywordsbesttouse.These
emptybuildlogsonTravisCI.Intotal,wecollected797logsfrom learninginformedthedesignofasecond,largercross-validation
80repositoriesspanning29languages. studyforwhichwecontactedover200developers.
Inoursecondvalidation,wesentoutemailstotheoriginaldevel-
operswhosecommitstriggeredthebuildsrepresentedinLogChunks
2.2 ManualLabeling
andaskedthemwhetherthelogchunkwelabeledactuallydescribes
Aftercollectingbuildlogs,thefirstauthormanuallylabeledwhich
whythebuildfailed.Thissectiondescribesoursurveyanddiscusses
textchunkdescribeswhythebuildfailed.Followingthat,sheas-
ourresults.
signedsearchkeywordsandstructuralcategoriestoeachlogchunk.
Method. UsingtheTravisAPI,wecollectedthecommitinfor-
ChunkThatDescribesWhyTheBuildFailed. Foreachrepository, mationforeachbuildrepresentedinLogChunks.Wegroupedall
thelabelerskimmedthroughthebuildlogsandcopiedoutthefirst commitstriggeredbyonedeveloperandsentoutanemailtothem.
occurrenceofadescriptionwhythebuildfailed.Shepreserved Itincludedlinkstothecorrespondingcommits,thebuildoverview
whitespacesandspecialcharacters,asthesemightbecrucialto andthelogfile.Weaskedthedeveloperstofilloutashortform
detectthetargetedsubstring.Tosupportlearningofregularexpres- incaseourextractionwasnotcorrect.Inthesurvey,weaskedthe
sionsidentifyingthelabeledsubstringsthelabeleraimedtostart developertopasteinthelogpartactuallydescribingthefailure
andendthelabeledsubstringatconsistentlocationsaroundthe reasonordescribeintheirownwordswhyouroriginalextraction
faultdescription. wasincorrect.
LogChunks:ADataSetforBuildLogAnalysis MSR’20,October5–6,2020,Seoul,RepublicofKorea
Results. In total, from 2019-10-15 to 2019-10-17, we sent out ========DIFF========
emailsto246developers.Ofthese,32couldnotbedelivered.We -=-=-=-=-=-
005+ Parameter #1 [ $flags]
performedthesendingoutinthreebatchesandusedthefirstau-
005− Parameter #1 [ $ar_flags]
thor’sacademicemailaddressasthesender.Allemailswerespecific ========DONE========
toeachrecipient.Weonlysentonemailperrecipient.Wereceived FAIL Bug#71412 ArrayIterator reflection
-=-=-=-=-=-
answersfrom61developers,correspondingto144buildlogswith TEST 9895/13942 [2/2 test workers running]
aresponserateof24.8%.Comparedtotypicalresponseratesto
coldcallingknownfromSoftwareEngineering[16],thisisvery Figure 2: Log chunk from the same structural category as
high.Webelievethatourpersonalizationandtheeaseofuseforthe thelogchunkpresentedinTable1.Weinsertedthespecial
participantarethemainreasonsforthis—simplyclickingonalink marker“-=-=-=-=-=-”toseparatethelogchunkfromitscon-