Gain
6.22%
9.70%
3.99%
6.54%
15.19%
3.81%
3.43%
2.43%
5.78%
6.30%
4.66%
6.19%
1,455
472
155
145
4,316
48
858
20
713
3,444
170,154
16,525
Iterations
450,502
203,332
240,116
107,089
2,850,176
201,057
345,320
50,814
401,730
907,834
7,502,210
1,205,471
Table 7: Improvements in estimated performance of programs according to K2.
Setting ID
Compute error cost
Avg. total error cost by # test cases or not
Weight of error cost (𝛼)
Weight of performance cost (𝛽)
Probability of instruction replacement (𝑝𝑟𝑜𝑏𝑖𝑟 )
Probability of operand replacement (𝑝𝑟𝑜𝑏𝑜𝑟 )
Probability of replacement by NOP (𝑝𝑟𝑜𝑏𝑛𝑟 )
Probability of memory exchange type 1 (𝑝𝑟𝑜𝑏𝑚𝑒1)
Probability of memory exchange type 2 (𝑝𝑟𝑜𝑏𝑚𝑒2)
Probability of replacement of contiguous instructions (𝑝𝑟𝑜𝑏𝑐𝑖𝑟 )
1
ABS
No
0.5
5
0.2
0.4
0.15
0.2
0
0.05
2
POP
No
0.5
5
0.17
0.33
0.15
0.17
0
0.18
4
5
3
POP ABS ABS
Yes
No
0.5
0.5
1.5
5
0.2
0.17
0.33
0.4
0.15
0.15
0
0.2
0
0.17
0.18
0.05
No
0.5
5
0.17
0.33
0.15
0
0.17
0.18
Table 8: Details of K2’s five best-performing parameter settings (§3). ABS corresponds to the absolute error cost function, while POP corre-
sponds to population count of the bitwise difference.
Parameter setting ID
# instructions
% of paras
Time to find
of the smallest prog.
get the smallest prog.
the smallest prog. (sec)
Benchmark
(1) xdp_exception
(2) xdp_redirect_err
(3) xdp_devmap_xmit
(4) xdp_cpumap_kthread
(5) xdp_cpumap_enqueue
(6) sys_enter_open
(7) socket/0
(8) socket/1
(9) xdp_router_ipv4
(10) xdp_redirect
(11) xdp1_kern/xdp1
(12) xdp2_kern/xdp1
(13) xdp_fwd
(14) xdp_pktcntr
(15) xdp_fw
(16) xdp_map_access
(17) from-network
(18) recvmsg4
(19) xdp-balancer
1
16
16
30
19
22
21
27
30
101
35
56
71
128
19
65
26
30
81
1,624
3
16
16
30
19
22
21
27
30
99
35
56
71
130
19
65
26
30
81
1,627
2
18
16
29
18
21
21
27
30
99
35
56
72
130
19
65
26
30
81
1,607
Table 9: Performance of K2 under different parameter settings.
4
16
16
32
22
26
20
27
30
100
35
57
71
133
20
68
27
31
83
1,679
5
16
16
30
18
22
21
27
30
100
37
58
72
134
19
69
26
29
84
1,684
16
16
29
18
21
20
27
30
99
35
56
71
128
19
65
26
29
81
1,607
80%
100%
20%
40%
20%
20%
100%
100%
40%
80%
60%
60%
20%
80%
60%
80%
20%
60%
20%
21
323
10
1,213
1,170
1,848
519
6
9
898
523
598
159
6,137
288
826
32
6,871
3,350
167,428
arXiv, July 14, 2021
Benchmark
(1) xdp_exception
(2) xdp_redirect_err
(3) xdp_devmap_xmit
(4) xdp_cpumap_kthread
(5) xdp_cpumap_enqueue
(6) sys_enter_open
(7) socket/0
(8) socket/1
(9) xdp_router_ipv4
(10) xdp_redirect
(11) xdp1_kern/xdp1
(12) xdp2_kern/xdp1
(13) xdp_fwd
(14) xdp_pktcntr
(15) xdp_fw
(16) xdp_map_access
(17) from-network
(18) recvmsg4
16*
16*
29*
18*
21*
21
27*
30*
99*
35*
56*
71*
128*
19*
65*
26*
30
81*
8
10
1,201
1,848
214
6
9
598
482
826
269
3,350
4,944
1,194
898
523
366
1,170
16*
16*
30
18*
21*
20*
27*
30*
99*