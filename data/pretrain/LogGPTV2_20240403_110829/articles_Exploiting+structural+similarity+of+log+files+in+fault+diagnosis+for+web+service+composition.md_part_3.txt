nosis by classifying log data using the proposed generative geneoussources,werepresentaportionoftheselogdatausing
model.Accordingtothis,themainapproachoffaultdiagnosis different XML structure. Then, we get the training dataset by
istofirstconstructthecombinationpartofCBNsbymatching labelingeachrecordoftheseXMLlogdata.Thereare30Web
schema trees, then compute the probabilities of CBNs from servicesrunningonthisplatformwhichistakenasthetestbed
trainingdatabasedonestimatedsimilaritydegrees,andfinally ofourexperiment.Since faultsinapplicationandmiddleware
classify the newly obtained log data into possible fault cate- levels are the common causes of failures in Web services
gories using generated CBNs. execution, we inject 95 such faults into running services in-
In classification task, the CBN model plays a key role stances.Inaddition,weimplementasyntheticdatageneration
which is proposed as a generative model based on Bayesian program to simulate the creation of log data, based on the
networks. The log records in training dataset with the same symptom database [28] for IBM WebSphere Application
category will share the parameters of a CBN. That is to say, Server. We have generated 1000 pieces of log records from
there is a set of such parameters for each fault category. The 11,601 pieces of XML log records in this database. And the
similarity-based probabilities of the CBNs can improve the training dataset is obtained by labeling each data record ac-
accuracy of the classification task. Then, the log records in cording to the value of “symptomtype” attribute.
testing dataset can be classified into possible fault categories,
bycalculatingtheprobabilitythateachcategorywillgenerate 5.2. Datasets
the log data record. Given a category c and a test log record
r , we can estimate the conditional probability by the Herein,trainingdataandtestdataareselectedrandomlyin
test
formula accordance with the 90/10 ratio. Then, 50 percent of training
Y Y dataisusedasnewdata.Tosimulatetheupdateofthetraining
Pðr jcÞ¼ Pðn jpaðn Þ;cÞ PðnjpaðnÞ;cÞ ð8Þ datasetindynamicenvironment,newlogdataareaddedtothe
test s s t t
ns2Ns nt2Nt training dataset at a fixed speed. For each dataset, we design
40 simulation cases, which has a corresponding training and
test datasets.
Given the set of predefined categories, our objective is to
Table3showsthedetailedinformationofexampledatasets
assign most probable category labels to unlabeled log re-
cords, based on the likelihood inference in corresponding used in evaluation. The real and synthetic datasets are further
CBNs. According to computed conditional probabilities, we dividedintotwosubsetsindifferentstructure,respectively.We
will choose the category c which has the maximum select 65 percent of data records in training dataset, which
MAP
posteriori probability value to label the test log record, as have the structure different from those of the other portion.
Then,toshowtheadvantageofourapproach,wechooseonly
shown below.
30percent ofrecordsintestingdataset,whosestructureis the
same to that of the major portion of training dataset.
c ¼argmaxPðcÞPðr jcÞ
MAP test
c2C Y Y There are some advantages to evaluate our approach on
¼argmaxPðcÞ Pðn jpaðn Þ;cÞ PðnjpaðnÞ;cÞ ð9Þ both real and synthetic log datasets. On one hand, we use the
s s t t
c2C ns2Ns nt2Nt realdatasettovalidatetheapproachinpracticalsituations.On
theotherhand,thesyntheticdatasethelpustostudytheeffects
of different kinds of structural patterns.
5. Evaluation
5.3. Evaluation results
To evaluate our approach for fault classification of Web
serviceflows,wehaveconductedexperimentonbothrealand For evaluating the performance of corresponding ap-
synthetic log datasets in this section. We compare the classi- proaches,we defineaccuracyastheproportionoflogrecords
fication results of our approach with those of other classifiers that are correctly assigned to a category. The average accu-
forsemi-structureddocuments.Experimentalresultsshowour racyisusedasthekeymetricinthisexperiment,whichisthe
approach outperforms other two approaches in dynamic and mean accuracy over all categories of the real and synthetic
heterogeneous environment. datasets.
X.Hanetal./CAAITransactionsonIntelligenceTechnology1(2016)61e71 69
Table3 fixed rate. Herein, we use update rate (UR) to represent the
Exampledatasetsusedinevaluation. fixedrateandsetthevalueofURtorrecordsperminute.And
Recordnumber Realdataset Syntheticdataset theoccurrencetimeofeachnewrecordissetrandomly.Inthe
StructureT StructureT StructureT0 StructureT0 simulation of dynamic environment, we add the new training
0 1 0 1
data at various update rates (e.g., UR ¼ 5 and UR ¼ 10).
TrainingDataset 28 52 315 585
Testingdataset 10 5 70 30 In Fig. 5, the comparative results of three classification
approaches are demonstrated. Fig. 5a shows comparative
result on average diagnosis accuracy of BN, SBN and DSBN
Thosealgorithmsforfaultclassificationareimplementedin algorithms. For different algorithms with the same UR, BN
Java, and runs on a Windows machine with a dual (2.4 GHz) has poor diagnosis accuracy since it cannot handle heteroge-
coreIntelprocessor.Toshowtheadvantageofourapproachin neous training data. Though DSBN can efficiently integrate
classification task, we compare it with other classifiers heterogeneous information in dynamic environment, its ac-
designed for semistructured documents, including Bayesian curacy has been affected by updating model incrementally. In
network model (BN). contrasttoDSBN,SBNlearnsfromtheentiretrainingdataset
Forsimplicity,weuseSBNandDSBNtorepresentoriginal fromtimetotime,soitcanobtainaprecisemodelandachieve
and improved similarity based learning algorithms respec- relatively high accuracy. Similarly, due to higher UR, the
tively. Both of SBN and BN methods [22] achieve learning update speed of training data increases, resulting in the delay
model updates learning from entire training datasets repeat- of model update. Because of high cost of model update, SBN
edly. In contrast, DSBN method is able to update its model has downward trends in diagnosis accuracy. Fig. 5b demon-
incrementally in dynamic environment. Considering the dy- strates the comparative result of accuracy variance of BN,
namic feature, we assume new training data appear at some SBN and DSBN algorithms. Considering different algorithms
70 0.30
DSBN(UR=5) DSBN(UR=5)
SBN(UR=5) SBN(UR=5)
65 BN(UR=5) 0.25 BN(UR=5) ycaruccA
DSBN(UR=10) DSBN(UR=10) )%(
SBN(UR=10) SBN(UR=10)
60 0.20
BN(UR=10) BN(UR=10) ycaruccA
sisongaiD
55 0.15
sisongaiD
fo
50 0.10 ecnairaV
45 0.05
40 0.00
200 300 400 500 600 700 800 900 200 300 400 500 600 700 800 900
Dataset Size Dataset Size
(a) Average accuracy (b) Variance of diagnosis accuracy
60.00 30
DSBN(UR=5)
SBN(UR=5)
55.00 25 BN(UR=5)
DSBN(UR=10)
)%(
50.00 20 SBN(UR=10) )s(
BN(UR=10) etaR
emiT
45.00 15 sisongaidsiM sisongaiD
DSBN(UR=5)
40.00 10
SBN(UR=5)
BN(UR=5)
35.00 DSBN(UR=10) 5
SBN(UR=10)
BN(UR=10)
30.00 0
200 300 400 500 600 700 800 900 200 300 400 500 600 700 800 900
Dataset Size Dataset Size
(c) Misdiagnosis rate (d) Diagnosis time
Fig.5.Comparisonofdiagnosisapproaches.
70 X.Hanetal./CAAITransactionsonIntelligenceTechnology1(2016)61e71
withthesameUR,thecurvesofSBNandDSBNarerelatively tolerant service flow execution, DSBN algorithm should be
close to each other. The changing trends of SBN and DSBN chosen and deployed inpractical system for diagnosing faults
seem more stable than BN. For the same algorithm with of Web service composition.
variousUR,higherURisoftencompaniedbylargeraccuracy Asthefirststep,thispaperpresentsourworkinfaultdiag-
variance. In Fig. 5c, we give the comparative result of nosisofWebservicecompositionbyanalyzinglogdata,espe-
misdiagnosis rate of BN, SBN and DSBN algorithms. ciallyindynamicandheterogeneousenvironment.Inthefuture,
Comparing different algorithms with the same UR, the we will enlarge the size of log datasets from more real-world
misdiagnosis rates of SBN and DSBN are lower than that of service flows. Moreover, we are to study on strategies and
BN. And SBN has a slight advantage over DSBN in terms of mechanismsforoptimizingthetrade-offbetweenaccuracyand
misdiagnosis rate. Since SBN and DSBN can handle hetero- efficiencyoffaultdiagnosisforWebservicecomposition.
geneous data, they have low misdiagnosis rate. Moreover,
SBN is able to get a more accurate model by repeatedly Acknowledgment
learning from entire training dataset, thus it can outperforms
DSBN.However,withincreasingUR,themisdiagnosisrateof This work is partially supported by National Basic
SBN becomes higher than before. Fig. 5d shows the Research Priorities Programme (No. 2013CB329502), Na-
comparativeresultsofdiagnosistime.Forthesamealgorithm tional Natural Science Foundation of China (No. 61472468,
with different URs, the diagnosis time seems close to each 61502115), General Research Fund of Hong Kong (No.
other.While,fordifferentalgorithmswith thesame UR,SBN 417112), and Fundamental Research Funds for the Central
spends the most time since it need to learn from the whole Universities (No. 3262014T75, 3262015T20, 3262015T70,
dataset for updating the generation model. In comparison to 3262016T31).
SBN,thetimecostofDSBNisslightlymorethanBN,sinceit
only adjusts the generation model in an incremental way. References
Accordingly, BN is capable of learning from data with the
identical structure, so it has the least time consuming. [1] M.P.Papazoglou,P.Traverso,S.Dustdar,F.Leymann,Computer40(11)
(2007)38e45.
In terms of diagnosis accuracy and its variance, experi-
[2] M.P.Papazoglou,W.-J.Heuvel,VLDBJ.16(3)(2007)389e415.
mental results show that SBN algorithm outperforms BN al-
[3] L. Richardson, S. Ruby, RESTful Web Services, O'Reilly, Sebastopol,
gorithmwhenthesizeoflogdatasetisincreasing.Incontrast,
CA,2007.
DSBN algorithm has advantages over SBN and BN algo- [4] C. Pautasso, O. Zimmermann, F. Leymann, RESTful Web services vs.
rithms, in terms of both diagnosis accuracy and time. Since Big‘ Web services: making the right architectural decision, in: Proc.
InternationalWorldWideWebConference(WWW’08),Beijing,China,
diagnosistimeisamajorconsiderationinfaulttolerantservice
2008.
flow execution, DSBN algorithm is more suitable for deploy-
[5] Q.Z.Sheng,X.Qiao,A.V.Vasilakos,C.Szabo,S.Bourne,etal.,Inf.Sci.
ment in practical systems, which support diagnosing faults of 280(2014)218e238.
Web service composition in dynamic and heterogeneous [6] A.Alves,A.Arkin,S.Askary,C.Barreto,B.Bloch,etal.(Eds.),Web
environment. Service Business Process Execution Language Version 2.0, 2007.
Availableonlineat:http://docs.oasis-open.org/wsbpel/2.0/OS/wsbpel-v2.
0-OS.html.
6. Conclusion
[7] J.Lee,S.-J.Lee,P.-F.Wang,IEEETrans.Serv.Comput.8(2)(2015).
[8] L.Ardissono,R.Furnari,A.Goy,G.Petrone,M.Segnan,Faulttolerant
In this paper, we focus on fault diagnosis by analyzing Web service orchestration by means of diagnosis, in: Proc. European
semi-structured log data. By transforming fault diagnosis WorkshoponSoftwareArchitecture(EWSA’06),Nantes,France,2006.
problem into classification problem, we can utilize the corre- [9] G. Friedrich, M. Fugini, E. Mussi, B. Pernici, G. Tagni, IEEE Trans.
Softw.Eng.36(2010)198e215.
sponding classification methods to diagnose faults. We pro-
[10] O.Kopp,F.Leymann,D.Wutke,Faulthandlinginthewebservicestack,
pose a similarity-based Bayesian learning approach for
in: Proc. International Conference on Service Oriented Computing,
constructing combined Bayesian networks, which are used as LNCS6470,2010,pp.303e317.
generative model to classify fault related log data. Different [11] WS-DIAMOND team, WS-DIAMOND: Web Services DIAgnosability,
from other approaches, it can learn from training data with MONitoringandDiagnosis,2005.Availableonlineat:http://wsdiamond.
di.unito.it/.
differentstructuralinformation.Torealizefaultdiagnosis,our
[12] Y.Yan,P.Dague,MonitoringanddiagnosingorchestratedWebservice
approach consists of three main steps: (1) estimate similarity
processes, in: Proc. IEEE International Conference on Web Services
degrees of structural elements from different log files, (2) (ICWS’07),SaltLakeCity,Utah,USA,2007.
construct the basic structure of CBNs by computing its prob- [13] Y. Yan, P. Dague, Y. Pencol(cid:1)e, M.O. Cordier, Int. J. Web Serv. Res.
(JWSR)6(1)(2009)87e110.
abilities using similarity-based learning algorithm, and (3)
[14] W.Mayer,G.Friedrich,M.Stumptner,Diagnosisofservicefailuresby
classifytestlogdataintopossiblefaultcategoriesbasedonthe
traceanalysiswithpartialknowledge,in:Proc.InternationalConference
generated CBNs. onServiceOrientedComputing,LNCS6470,2010,pp.334e349.
Based on evaluation results, SBN algorithm outperforms [15] Y.Dai,L.Yang,B.Zhang,Z.Zhu,Exceptiondiagnosisforcomposite
BN algorithm when the size of log dataset is increasing. In servicebasedonerrorpropagationdegree,in:Proc.IEEEInternational
ConferenceonServicesComputing(SCC’11),2011,pp.160e167.
terms of both diagnosis accuracy and time, the proposed
[16] Z. Zhu, J. Li, Y. Zhao, Z. Li, SCENETester: a testing framework to
DSBN algorithm has advantages over SBN and BN algo-
support fault diagnosis for Web Service Composition, in: Proc. IEEE
rithms. Since diagnosis time is a major consideration in fault
X.Hanetal./CAAITransactionsonIntelligenceTechnology1(2016)61e71 71
International Conference on Computer and Information Technology, [23] M.J.Zaki,C.C.Aggarwal,Xrules:aneffectivestructuralclassifierforxml
2011,pp.109e114. data, in: Proc. ACM SIGKDD International Conference on Knowledge
[17] Z.Jia,R.Chen,Hybridmodel-baseddiagnosisofwebservicecompo- DiscoveryandDataMining(SIGKDD’03),Washington,DC,USA,2003.
sitions,in:Proc.InternationalJointAAAIConferenceonArtificialIn- [24] S.Modafferi,M.Enrico,P.Barbara,SH-BPEL:aself-healingpluginfor
telligence (AAAI'13), Bellevue, Washington, USA, 2013, pp. Ws-BPELengines,in:Proc.WorkshoponMiddlewareforServiceOri-
1617e1618. entedComputing,Melbourne,Australia,2006.
[18] T.Li,F.Liang,S.Ma,W.Peng,Anintegratedframeworkonmininglogs [25] X. Han, Z. Shi, W. Niu, K. Chen, X. Yang, Similarity-based Bayesian
files for computing system management, in: Proc. ACM SIGKDD In- learning from semi-structured log files for fault diagnosis of Web ser-
ternational Conference on Knowledge Discovery and Data Mining vices, in: Proc. IEEE/WIC/ACM International Conference on Web In-
(SIGKDD’05),Chicago,Illinois,USA,2005. telligence,Toronto,Canada,2010.
[19] W.Peng,T.Li,S.Ma,SIGKDDExplor.7(1)(2008)44e51. [26] S.Melnik,H.Garcia-Molina,E.Rahm,Similarityflooding:aversatile
[20] T. Reidemeister, M.A. Munawar, M. Jiang, P.A.S. Ward, Diagnosis of graph matching algorithm and its application to schema matching, in:
recurrent faults using log files, in: Proc. Conference of the Center for Proc. IEEE International Conference on Data Engineering (ICDE’02),
Advanced Studies on Collaborative Research (CASCON’09), Ontario, SanJose,California,USA,2002.
Canada,2009. [27] ActiveVOS, Available online at http://www.activevos.com/developers/
[21] S. Duan, S. Babu, K. Munagala, Fa: a system for automating failure sdks,2011.
diagnosis,in:Proc.IEEEInternationalConferenceonDataEngineering [28] S.K.Chilukuri,K.Doraisamy,Symptomdatabasebuilderforautonomic
(ICDE’09),Shanghai,China,2009. computing, in: Proc. International Conference on Autonomic and
[22] L.Denoyer,P.Gallinari,Inf.Process.Manag.40(5)(2004)807e827. AutonomousSystems(ICAS’06),SiliconValley,CA,USA,2006.