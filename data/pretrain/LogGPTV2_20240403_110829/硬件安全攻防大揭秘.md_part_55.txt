453
---
## Page 466
硬件安宝攻防大揭接
9.7论外壳包装的重要性
产品外壳和包装的重要性不用多说，大家都知道，PCB硬件设计得再好，外壳太丑，包
装太土，都会影响产品的使用和产品的市场。所以在产品设计时，不光是里面要做好，外面
同样重要！因此，硬件设计领域通常会和外壳ID设计相关联。
9.7.1外壳ID设计
外壳，看起来很简单，但真的简单吗？就像国画，都是毛笔和墨，大师能画出名作，新
手只能画出“小鸡吃米图”。好的外壳设计是争相仿造的经典：差的外壳设计，只会被市场
淘汰。
外壳设计，也称ID设计，是一个技术行业，类似PCB设计行业，通常也称为“工业设
计”。外壳设计其实包含两个部分，一个是外壳外形外观设计，另一个是内部结构设计，两
者相辅相成，缺一不可。
ID设计是一个很考验人审美观的行业，也是一个很考验人专业知识功底的行业（物理、
审美、化学知识）。外壳材质、工艺、外形、内部结构，每个方面都需要注意。
9.7.2手板、开模与量产
ID设计好之后，通常要先做出几个手板（prototype），也就是用蜡模、石音模、CNC 等
手段人工制出样品，用于检测ID设计是不是合适，手板的耗时相对较短，一般一两周可以完
成，不过费用很高，一般几千元到数万元不等。在开模之前，手板确认是必需的步骤，如果
发现不足，还需要再做手板，直到最终确认无误。
手板确认之后，就需要开模了，不同的模具厂工艺精度不同，用材不同寿命不同，但他
们有一个共通之处，那就是用时很长，都需要一个月甚至几个月。所以ID设计和开模越早定
下来越好，这个很花时间，而且很难缩减。
模具开好以后，就是量产，量产的价格相对手板要低很多，一般都是按材料费用外加工
艺费用，但需要注意的是，材料很重要。ABS、PLA等材料有进口的也有国产的，有耐高温
的也有不耐高温的，价格差异很大，通常模具厂可能会在这里做文章，这就需要ID设计公司
或者客户自己町着，出来的外壳最好交由第三方检测机构检验，特别是工业用途或者要运往
国外销售的产品
454
---
## Page 467
第9章打造专属硬件工段
在生产天巡系列产品时，作者曾经遇到生产出来的外壳在七八十度高温下就变形的情况，
我们的要求是140度，这就是模具厂偷工减料导致的。鉴于此，之后生产是和富士康合作，
价格虽然相对高一点，但质量绝对一流。
9.7.33D打印技术
如图9-167所示，近几年3D打印机很火，网上一两千元就能买一台基础版的3D打印机，
本节就介绍3D打印技术。
3D打印（3DP）即快速成型技术的一种，它是一种以数字模型文件为基础，运用粉末状
金属或塑料等可粘合材料，通过逐层打印的方式来构造物体的技术。
日常生活中使用的普通打印机可以打印计算机设计的平面物品，而所谓的3D打印机与普
通打印机的工作原理基本相同，只是打印材料有些不同，普通打印机的打印材料是墨水和纸
张，面3D打印机内装有金属、陶瓷、塑料、砂等不同的“打印材料”，是实实在在的原材料，
打印机与计算机连接后，通过计算机控制可以把“打印材料”一层层叠加起来，最终把计算
机上的蓝图变成实物。通俗地说，3D打印机是可以“打印”出真实的3D物体的一种设备，
所以也被称为“增材制造”。例如，打印一个机器人、打印玩具车，打印各种模型，甚至是
食物。之所以称其为“打印机”是参照了普通打印机的技术原理，因为分层加工的过程与喷
墨打印十分相似。这项打印技术称为3D立体打印技术。一般打印一个模型，需要先在三维设
计软件上设计模型，然后用专用软件切片生成Gcode代码，最后上机完成打印。
1.三维设计
层的截面，即切片，从而指导打印机逐层打印。
设计软件和打印机之间协作的标准文件格式是 STL文件格式。一个STL文件使用三角面
来近似模拟物体的表面。三角面越小其生成的表面分辨率越高。PLY是一种通过扫描产生的
455
---
## Page 468
硬件安全攻防大降
三维文件的扫描器，其生成的VRML或者WRL文件经常被用作全彩打印的输入文件。
使用著名的三维建模软件UG来设计模型，导出STL的过程如图9-168所示。
x.
UtD
i9
 esa
Ra
.
8R0
me
RAENU
三角公幢
9
RT TM
三AB
电
图9-168使用UG导出STL
图9-169设置参数
在弹出的快速成型框体中，输出类型选择二进制、三角公差输入0.08、相邻公差输入
0.08、采用“自动法向生成”的方法，如图9-170所示。
选择一个存储STL文件的位置，并命名这个STL文件，如图9-171所示。
如图9-172所示，选择要转换的三维对象，然后单击“确定”按钮，即可完成转换。
田
fitas
型
图9-170保存STL文件
图9-171转换3D文件
456
---
## Page 469
第9章打造专属续件工具
2.切片处理
打印机通过读取文件中的横截面信息，用液体状、粉状或片状的材料将这些截面逐层打
印出来，再将各层截面以各种方式粘合起来从而制造出一个实体。这种技术的特点在于其几
乎可以造出任何形状的物品。
打印机打出的截面的厚度（即Z方向）及平面方向即X-Y方向的分辨率是以dpi（像素
每英寸）或者微米计算的。一般的厚度为100微米，即0.1毫米，也有部分打印机如
ObjetConnex 系列还有三维 Systems'ProJet 系列可以打印出16微米薄的一层。平面方向则可以
打印出跟激光打印机相近的分辨率。打印出来的“墨水滴”的直径通常为50到100微米。用
传统方法制造出一个模型通常需要数小时到数天，根据模型的尺寸及复杂程度而定。用三维
打印技术可以将时间缩短为数小时，当然其是由打印机的性能及模型的尺寸和复杂程度而定
的。
更快、更有弹性及更低成本的办法生产数量相对较少的产品。一个桌面尺寸的三维打印机就
可以满足设计者或概念开发小组制造模型的需要。
下面以 setupRepetierHost 切片软件为例，将UG 导出的 STL文件切片生成打印机需要的
Gcode代码，在物体放置栏目中，我们可以对物体进行复制、旋转、平移等操作。将物体放
置到正确的位置后，对物体进行切片，如图9-172所示。
图9-173所示为切片软件的配置部分，现在打印机设定部分仍然不可操作，这时需要先
进行一些参数的配置。
C
开始切片Slic3r
e
mes
088.
096i9
图9-172切片
图9-173参数配置
在设置打印参数时，层周长和层厚是很重要的参数，这两个参数决定了打印的精度和打
印的时间，0.1mm最精细但打印时间最长，0.2mm精度一般能满足大部分要求但打印时间较
短，0.3mm很租椅但打印时间最短，两个值设成相同即可。外围圈数，一般只需要外观的模
457
---
## Page 470
更件安全放防大民控
型，设成2即可，如果需要结构比较牢固，可以增大。打印花瓶时，勾选“Spiralvase”参数，
会使Z轴渐近升高，而不是每一层升高一次。再就是水平层数设置及顶层和底层的层数设置，
如果层厚比较薄，可考虑适当增加层数，否则顶层会有“洞”，如图9-174所示。
图9-174层厚参数配置
下面是填充的选项，非结构性物体选择10%的填充即可，可以节省大量的打印时间。如
果需要一定的强度，最好在40%以上。填充类型最好选择蜂窝填充，强度高用料省，如图9-175
所示。
 91
图9-175填充设置
458
---
## Page 471
第日莞打造专址件工具
如图9-176所示，支撑物如果有悬空，最好选择生成支撑材料，但有时机器能够“拉丝
过桥”，不需要支撑也行。所以这个配置需要凭经验设置，如果你不是很懂，最好勾选上。
筏子，非常有用的东西，在底板不平或调平没做好时比较有用，但有时不是特别好剥离，如
果需要的话，选3层比较好。
vir
图9-176填充设置
对于耗材的设置。耗材的直径通常不容易理想，根据实际量出的结果设置，将其值设置
小一点使挤出的丝稍微多一点，会使打印更不容易虚层。如果打印PLA，210~230度是非常
不错的温度，190度刚好融。如果温度设置过低而且有抖动，非常容易挤不动面虚层。ABS
材质设置成230-240度甚至更高都是可以的。相对面言，PLA的黏度随温度升高而降低非常
明显，而ABS超过230度后黏度随温度变化不明显。PLA平台无须加热（除非室温非常低），
设成0即可，ABS设成110度，可以减少翘边，如图9-177所示。
打印机设置部分，和具体的打印机特性相关，Zoffset 用来调整打印机零点和底板的距离，
Extruders用来设定打印机的头数，Custom G-code用来添加一些自定义的G代码，如图9-178
所示。
459
---
## Page 472
硬件安全攻防大玛税
图9-177依据耗材设置温度
l 
Z oflue
图9-178打印机设置
最后将设置保存，并选择目前的设置。单击“开始切片”按钮，生成我们需要的Gcode，
软件会自动计算当前模型全部打印完毕需要的时间，以及预计使用的材料总长度。可以显示
460
---
## Page 473
第9室打造专属硬件工具
每一层的路径、编辑Gcode 代码等。最后我们将 Gcode 另存到 SD卡里，就可以用打印机打
印模型了，如图9-179和图9-180所示。
开始切片Slic3r
3 16分 4519
118805
136
9584 mm
ttiNg
Flam
图9-179开始切片
图9-180预览
3.完成打印
三维打印机的分辨率对大多数应用来说已经足够（在弯曲的表面可能会比较粗糙，像图
像上的锯齿一样），可以通过如下方法获得更高分辨率的物品。先用当前的三维打印机打出
稍大一点的物体，再稍微经过表面打磨得到表面光滑的“高分辨率”物品。有些技术可以同
时使用多种材料进行打印，如图9-181所示。有些技术在打印的过程中还会用到支撑物，比
如在打印出一些有例挂状的物体时就需要用到易于除去的东西（如可溶的东西）作为支撑物。
图9-1813D打印机与打印出来的物件
4.打印外壳
3D打印机最大的优势是可以自己打印外壳及简单的结构件。在玩硬件时，使用裸电路板
总是有些志忘，担心沾灰、担心被冬天身上的静电打坏、担心不小心摔坏，如果有个外壳保
护就放心多了。如果在网上找人DIY外壳，费用通常都很贵。这时，买一台3D打印机，精
461
---
## Page 474
段件安全攻防大超社
度虽然不高，但打一个保护PCB电路板的外壳还是绰绰有余的。
当然，外壳设计是需要CAD设计能力的。如果自已不想学，有些常规的板子可以用。例
如树莓派、Arduino，有很多人在网上放出设计好的文件，甚至格式都已经转好，直接复制过
去插卡打印就行。
最后晒晒作者打的外壳，比如B210外壳（如图9-182所示）、笔筒（如图9-183所示）、
树莓派外壳（如图9-184所示）、B200Mini（如图9-185所示）。
图9-182USRPB200和半个外壳
图9-183笔筒
图9-184树莓派3及外壳
图9-185USRPB200Mini带外壳
462
---
## Page 475
第9章打造专属硬件工具
9.7.4小结
本节主要科普了外壳设计和加工生产方面的知识与经验，以及3D打印机的简单用法。在
设计焊接调试完硬件电路板之后，有个外壳是不是更美观更酷炫？而且还能更好地保护电路
板，防止在接触电路板时被人体带的静电打击。当然，还能在不小心跌落时保护好电路板，
再就是还能防灰尘。
463
---
## Page 476
后
记
硬件设计是一门基础与创意并重的行业，而硬件安全行业，更是一门集合硬件与安全两
方面技术的“独角兽”。
在作者的理解中，硬件设计是依照产品需求，在兼顾成本和性能的情况下，在规定时间
内，使用业界成熟的技术或者方案，完成符合功能需求。能够通过诸如EMI、安规等各种认
证的，可以量产的硬件产品。
硬件设计入门其实不难，电子专业的大学生毕业时基本都能画个简单的PCB图，但这够
么？当然不够，他们画的都是很简单的PCB板，也仅仅只是实现功能，完全谈不上性能。如
果遇到大电流、高电压、强电磁干扰、高速通信、射频等需求，他们就只能干瞪眼了。硬件
设计要深入是非常难的，涉及的相关内容太多，没经历过风雨的“温室小花朵”才会认为只
需要做封装走线就行了。
要设计一个硬件产品要考虑的方面很多，成本、元件采购、信号完整性、电源、功耗、
散热、电磁兼容、安规、可靠性、生产测试难度，甚至还有噪音，这些都兼顾需要大量的知
识和经验！这些是在学校里学不出来的！实践是检验真理的唯一标准，同样，硬件设计也要
多学多练，不跳过这些坑怎么记得住教训。
硬件设计需要的是长年累月的积紧，足够的经验阅历，天赋与汗水缺一不可。而安全，
更考验天分，敏锐的直觉，扎实的功底，天马行空的思维，想人所不能想才更出彩！所以，
硬件安全是集二者之长，资深硬件设计师可以转行进入安全圈。
最后，祝愿大家都能够在硬件安全这个特殊领域，收获自己需要的知识、经验、乐趣乃
至利益！谢谢！
---
## Page 477
Broadview
博文视点·IT出版旗舰品牌
技术凝聚实力·专业创新出版
名家点评
万物互联的时代，也是万物可以被破解的时代，了解硬件与无线电攻击原理和
防守思路，才有可能设计出安全的智能硬件。
360首席安全官
具备硬件设计、制作、破解的一线高手们操刀打造，强调实操能力的培养，拿
谭晓生
起螺丝刀和电烙铁，边看书边动手试试吧！
者介绍
360无线电硬件实验室负责人，独角兽安全团队（UnicomTeam）联
合创始人。资深硬件安全架构师，玩转各种电路板、烙铁及元器件的硬件达人，
360天巡传感器硬件原型设计者，历届SyScan360安全大会可破解Badge设
计者，美国BlackHat大会演讲者。带领团队设计完成了360卡防、HackID
简云定
Pro、HackReader等安全攻防产品。
360无线电安全研究部及360天巡企业安全产品总负责人。独角兽安全
团队（UnicornTeam）创始人。国内首个地铁无线网（Wireless）与公交
卡（NFC）安全漏洞的发现及报告者。2015年3·15晚会W-Fi安全环节的网
络安全工程师及技术负责人。美国DEFCON、加拿大CanSecWest、韩国
POC、澳大利亚Ruxcon及中国XCon、ISC、HackPwn等安全峰会演讲者。
杨御
安全书籍《无线电安全攻防大揭秘》作者。安在新媒体荣誉顾问。
上架建议：信息安全
专文视点Broadvi
@博文视点Broadview
责任编辑：郑柳洁
封面设计：侯士卿卫智玲
定价：99.00元
---