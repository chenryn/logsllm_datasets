To configure a policy that raises a trap on receipt of an event, include the following statements at the
[edit event-options policy policy-name] hierarchy level:
The following example shows the sample configuration for raising a trap for the event ui_mgd_terminate:
[edit event-options policy p1]
events ui_mgd_terminate;
then {
raise-trap;
}
• Filter Traps Based on the Trap Category:
SNMP traps are categorized into many categories. The Junos OS provides a configuration option,
categories at the [edit snmp trap-group trap-group] hierarchy level, that enables you to specify categories
of traps that you want to receive on a particular host. You can use this option when you want to
monitor only specific modules of the Junos OS.
The following example shows a sample configuration for receiving only link, vrrp-events, services, and
otn-alarms traps:
[edit snmp]
trap-group jnpr {
categories {
link;
vrrp-events;
services;
otn-alarms;
}
targets {
466
192.168.69.179;
}
}
• Filter Traps Based on the Object Identifier:
The Junos OS also provides a more advanced filter option that enables you to filter out specific traps
based on their object identifiers. You can use the notify-filter option to filter out a specific trap or a
group of traps.
The following example shows the sample configuration for excluding Juniper Networks enterprise-
specific configuration management traps (note that the SNMPv3 configuration also supports filtering
of SNMPv1 and SNMPv2 traps as is shown in the following example):
[edit snmp]
v3 {
vacm {
security-to-group {
security-model v2c {
security-name sn_v2c_trap {
group gr_v2c_trap;
}
}
}
access {
group gr_v2c_trap {
default-context-prefix {
security-model v2c {
security-level none {
read-view all;
notify-view all;
}
}
}
}
}
}
target-address TA_v2c_trap {
address 10.209.196.166;
port 9001;
tag-list tg1;
target-parameters TP_v2c_trap;
467
}
target-parameters TP_v2c_trap {
parameters {
message-processing-model v2c;
security-model v2c;
security-level none;
security-name sn_v2c_trap;
}
notify-filter nf1;
}
notify v2c_notify {
type trap;
tag tg1;
}
notify-filter nf1 {
oid .1.3.6.1.4.1.2636.4.5 exclude;
oid .1 include;
}
snmp-community index1 {
community-name "$9$tDLl01h7Nbw2axN"; ## SECRET-DATA
security-name sn_v2c_trap;
tag tg1;
}
view all {
oid .1 include;
}
}
SNMP Traps Supported by Junos OS
IN THIS SECTION
SNMP Traps Support | 468
Standard SNMP Traps Supported by Junos OS | 487
Customized SNMP MIBs for Syslog Traps | 498
468
The QFX Series standalone switches, QFX Series Virtual Chassis, and QFabric systems support standard
SNMP traps and Juniper Networks enterprise-specific traps.
SNMP Traps Support
IN THIS SECTION
SNMP Traps Supported on QFX Series Standalone Switches and QFX Series Virtual Chassis | 468
SNMP Traps Supported on QFabric Systems | 482
SNMP Traps Supported on QFX Series Standalone Switches and QFX Series Virtual
Chassis
QFX Series standalone switches and QFX Series Virtual Chassis support SNMPv1 and v2 traps. For
more information, see:
SNMPv1 Traps
QFX Series standalone switches and QFX Series Virtual Chassis support both standard SNMPv1 traps
and Juniper Networks enterprise-specific SNMPv1 traps. See:
• Table 37 on page 469 for standard SNMPv1 traps.
• Table 38 on page 472 for enterprise-specific SNMPv1 traps.
The traps are organized first by trap category and then by trap name. The system logging severity levels
are listed for those traps that have them. Traps that do not have corresponding system logging severity
levels are marked with an en dash (–).
469
Table 37: Standard SNMP Version 1 Traps Supported on QFX Series Standalone Switches and QFX
Series Virtual Chassis
Defined in Trap Name Enterprise ID Generi Specifi System Syslog Tag
c Trap c Trap Loggin
Numb Numb g
er er Severit
y Level
Link Notifications
RFC 1215, linkDown 1.3.6.1.4.1.2636 2 0 Warnin SNMP_ TRAP_
Conventions for g LINK_DOWN
Defining Traps
for Use with the
linkUp 1.3.6.1.4.1.2636 3 0 Info SNMP_TRAP_
SNMP
LINK_UP
Remote Operations Notifications
pingProbeFailed 1.3.6.1.2.1.80.0 6 1 Info SNMP_TRAP
RFC 2925,
_PING_ PROBE_
Definitions of
FAILED
Managed
Objects for
Remote Ping, pingTestFailed 1.3.6.1.2.1.80.0 6 2 Info SNMP_TRAP_
Traceroute, and PING_TEST
Lookup _FAILED
Operations
pingTestCompleted 1.3.6.1.2.1.80.0 6 3 Info SNMP_TRAP_
PING_TEST_
COMPLETED
traceRoutePathChan 1.3.6.1.2.1.81.0 6 1 Info SNMP_TRAP_
ge TRACE_ROUTE_
PATH_CHANGE
traceRouteTestFailed 1.3.6.1.2.1.81.0 6 2 Info SNMP_TRAP_
TRACE_ROUTE_
TEST_FAILED
470
Table 37: Standard SNMP Version 1 Traps Supported on QFX Series Standalone Switches and QFX
Series Virtual Chassis (Continued)
Defined in Trap Name Enterprise ID Generi Specifi System Syslog Tag
c Trap c Trap Loggin
Numb Numb g
er er Severit
y Level
traceRouteTestComp 1.3.6.1.2.1.81.0 6 3 Info SNMP_TRAP_
leted TRACE_ROUTE_
TEST_COMPLETE
D
RMON Alarms
RFC 2819a, fallingAlarm 1.3.6.1.2.1.16 6 2 – –
RMON MIB
risingAlarm 1.3.6.1.2.1.16 6 1 – –
Routing Notifications
BGP 4 MIB bgpEstablished 1.3.6.1.2.1.15.7 6 1 – –
bgpBackwardTransiti 1.3.6.1.2.1.15.7 6 2 – –
on
OSPF TRAP ospfVirtIfStateChan 1.3.6.1.2.1.14.16. 6 1 – –
MIB ge 2
ospfNbrStateChang 1.3.6.1.2.1.14.16. 6 2 – –
e 2
ospfVirtNbrStateCh 1.3.6.1.2.1.14.16. 6 3 – –
ange 2
ospfIfConfigError 1.3.6.1.2.1.14.16. 6 4 – –
2
471
Table 37: Standard SNMP Version 1 Traps Supported on QFX Series Standalone Switches and QFX
Series Virtual Chassis (Continued)
Defined in Trap Name Enterprise ID Generi Specifi System Syslog Tag
c Trap c Trap Loggin
Numb Numb g
er er Severit
y Level
ospfVirtIfConfigErro 1.3.6.1.2.1.14.16. 6 5 – –
r 2
ospfIfAuthFailure 1.3.6.1.2.1.14.16. 6 6 – –
2
ospfVirtIfAuthFailur 1.3.6.1.2.1.14.16. 6 7 – –
e 2
ospfIfRxBadPacket 1.3.6.1.2.1.14.16. 6 8 – –
2
ospfVirtIfRxBadPack 1.3.6.1.2.1.14.16. 6 9 – –
et 2
ospfTxRetransmit 1.3.6.1.2.1.14.16. 6 10 – –
2
ospfVirtIfTxRetrans 1.3.6.1.2.1.14.16. 6 11 – –
mit 2
ospfMaxAgeLsa 1.3.6.1.2.1.14.16. 6 13 – –
2
ospfIfStateChange 1.3.6.1.2.1.14.16. 6 16 – –
2
Startup Notifications
472
Table 37: Standard SNMP Version 1 Traps Supported on QFX Series Standalone Switches and QFX
Series Virtual Chassis (Continued)
Defined in Trap Name Enterprise ID Generi Specifi System Syslog Tag
c Trap c Trap Loggin
Numb Numb g
er er Severit
y Level
RFC 1215, authenticationFailur 1.3.6.1.4.1.2636 4 0 Notice SNMPD_ TRAP_
Conventions for e GEN_FAILURE
Defining Traps
for Use with the
coldStart 1.3.6.1.4.1.2636 0 0 Critical SNMPD_TRAP_
SNMP
COLD_START
warmStart 1.3.6.1.4.1.2636 1 0 Error SNMPD_TRAP_
WARM_START
VRRP Notifications
RFC 2787, vrrpTrapNewMaster 1.3.6.1.2.1.68 6 1 Warnin VRRPD_NEW
Definitions of g MASTER_TRAP
Managed
Objects for the
vrrpTrapAuthFailure 1.3.6.1.2.1.68 6 2 Warnin VRRPD_AUTH_
Virtual Router
g FAILURE_TRAP
Redundancy
Protocol
Table 38: Enterprise-Specific SNMPv1 Traps Supported on QFX Series Standalone Switches and QFX
Series Virtual Chassis
Defined in Trap Name Enterprise ID Generic Specific System System Log Tag
Trap Trap Logging
Number Number Severity
Level
Chassis Notifications (Alarm Conditions)
Chassis MIB (jnx- jnxPowerSupplyFailure 1.3.6.1.4.1.2636 6 1 Warning CHASSISD_
chassis. mib) .4.1 SNMP_ TRAP
473
Table 38: Enterprise-Specific SNMPv1 Traps Supported on QFX Series Standalone Switches and QFX Series
Virtual Chassis (Continued)
Defined in Trap Name Enterprise ID Generic Specific System System Log Tag
Trap Trap Logging
Number Number Severity
Level
jnxFanFailure 1.3.6.1.4.1.2636 6 2 Critical CHASSISD_
1 SNMP_ TRAP
jnxOverTemperature 11.4.1.2636.4.1 6 3 Alert CHASSISD_
SNMP_ TRAP
jnxFruRemoval 1.3.6.1.4.1.2636 6 5 Notice CHASSISD_
.4.1 SNMP_ TRAP
jnxFruInsertion 1.3.6.1.4.1.2636 6 6 Notice CHASSISD_
.4.1 SNMP_ TRAP
jnxFruPowerOff 1.3.6.1.4.1.2636 6 7 Notice CHASSISD_
.4.1 SNMP_ TRAP
jnxFruPowerOn 1.3.6.1.4.1.2636 6 8 Notice CHASSISD_
.4.1 SNMP_ TRAP
jnxFruFailed 1.3.6.1.4.1.2636 6 9 Warning CHASSISD_
.4.1 SNMP_ TRAP
jnxFruOffline 1.3.6.1.4.1.2636 6 10 Notice CHASSISD_
.4.1 SNMP_ TRAP
jnxFruOnline 1.3.6.1.4.1.2636 6 11 Notice CHASSISD_
.4.1 SNMP_ TRAP
jnxFruCheck 1.3.6.1.4.1.2636 6 12 Warning CHASSISD_
.4.1 SNMP_ TRAP
474
Table 38: Enterprise-Specific SNMPv1 Traps Supported on QFX Series Standalone Switches and QFX Series
Virtual Chassis (Continued)
Defined in Trap Name Enterprise ID Generic Specific System System Log Tag
Trap Trap Logging
Number Number Severity
Level
jnxPowerSupplyOk 1.3.6.1.4.1.2636 6 1 Critical CHASSISD_
.4.2 SNMP_ TRAP
jnxFanOK 1.3.6.1.4.1.2636 6 2 Critical CHASSISD_
.4.2 SNMP_ TRAP
jnxTemperatureOK 1.3.6.1.4.1.2636 6 3 Alert CHASSISD_
.4.2 SNMP_ TRAP
Configuration Notifications
Configuration jnxCmCfgChange 1.3.6.1.4.1.2636 6 1 – –
Management .4.5
MIB (jnx-
configmgmt. mib)
jnxCmRescueChange 1.3.6.1.4.1.2636 6 2 – –
.4.5
Remote Operations
Ping MIB (jnx- jnxPingRttThresholdExc 1.3.6.1.4.1.2636 6 1 – –
ping.mib) eeded .4.9
jnxPingRttStdDevThresh 1.3.6.1.4.1.2636 6 2 – –
old Exceeded .4.9
jnxPingRttJitterThreshol 1.3.6.1.4.1.2636 6 3 – –
d Exceeded .4.9
jnxPingEgressThreshold 1.3.6.1.4.1.2636 6 4 – –
Exceeded .4.9
475
Table 38: Enterprise-Specific SNMPv1 Traps Supported on QFX Series Standalone Switches and QFX Series
Virtual Chassis (Continued)
Defined in Trap Name Enterprise ID Generic Specific System System Log Tag
Trap Trap Logging
Number Number Severity
Level
jnxPingEgressStdDev 1.3.6.1.4.1.2636 6 5 – –
ThresholdExceeded .4.9
jnxPingEgressJitterThres 1.3.6.1.4.1.2636 6 6 – –
hold Exceeded .4.9
jnxPingIngressThreshold 1.3.6.1.4.1.2636 6 7 – –
Exceeded .4.9
jnxPingIngressStddevThr 1.3.6.1.4.1.2636 6 8 – –
eshold Exceeded .4.9
jnxPingIngressJitterThre 1.3.6.1.4.1.2636 6 9 – –
shold Exceeded .4.9
RMON Alarms
RMON MIB (jnx- jnxRmonAlarmGetFailur 1.3.6.1.4.1.2636 6 1 – –
rmon. mib) e .4.3
jnxRmonGetOk 1.3.6.1.4.1.2636 6 2 – –
.4.3
SNMPv2 Traps
• Table 39 on page 476 lists the standard SNMP traps
• Table 40 on page 479 lists the Juniper Networks enterprise-specific traps
476
Table 39: Standard SNMPv2 Traps Supported on QFX Series Standalone Switches and QFX Series
Virtual Chassis
Defined in Trap Name SNMP Trap OID System Syslog Tag
Logging
Severity Level
Link Notifications
RFC 2863, The linkDown 1.3.6.1.6.3.1.1.5. Warning SNMP_TRAP_
Interfaces Group MIB 3 LINK_DOWN
linkUp 1.3.6.1.6.3.1.1.5. Info SNMP_TRAP_
4 LINK_UP
Remote Operations Notifications
RFC 2925, Definitions of pingProbeFailed 1.3.6.1.2.1.80.0. Info SNMP_TRAP_
Managed Objects for 1 PING_PROBE_
Remote Ping, Traceroute, FAILED
and Lookup Operations
pingTestFailed 1.3.6.1.2.1.80.0. Info SNMP_TRAP_PING_
2 TEST_FAILED
pingTestCompleted 1.3.6.1.2.1.80.0. Info SNMP_TRAP_PING_
3 TEST_COMPLETED
traceRoutePathChang 1.3.6.1.2.1.81.0. Info SNMP_TRAP_TRACE_
e 1 ROUTE_PATH_
CHANGE
traceRouteTestFailed 1.3.6.1.2.1.81.0. Info SNMP_TRAP_TRACE_
2 ROUTE_TEST_FAILED
traceRouteTestComple 1.3.6.1.2.1.81.0. Info SNMP_TRAP_TRACE_
ted 3 ROUTE_TEST_
COMPLETED
RMON Alarms
477
Table 39: Standard SNMPv2 Traps Supported on QFX Series Standalone Switches and QFX Series
Virtual Chassis (Continued)
Defined in Trap Name SNMP Trap OID System Syslog Tag
Logging
Severity Level
RFC 2819a, RMON MIB fallingAlarm 1.3.6.1.2.1.16.0. – –
1
risingAlarm 1.3.6.1.2.1.16.0. – –
2
Routing Notifications
BGP 4 MIB bgpEstablished 1.3.6.1.2.1.15.7. – –
1
bgpBackwardTransitio 1.3.6.1.2.1.15.7. – –
n 2
OSPF Trap MIB ospfVirtIfStateChange 1.3.6.1.2.1.14.16 – –