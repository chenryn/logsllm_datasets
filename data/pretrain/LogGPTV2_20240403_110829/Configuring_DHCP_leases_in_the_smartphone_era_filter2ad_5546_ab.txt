### Implementation of DNAv4 in iOS and Mac OS X

The implementation of DNAv4 [4] in iOS and Mac OS X [6, 13] optimizes re-attachment to previously connected networks. This is achieved by reusing a previous but still valid configuration, reducing the number of DHCP exchange messages, and using unicast ARP requests [3].

### Acknowledged Requests and DHCP Relays

We use acknowledged requests to avoid accounting for messages generated by DHCP relays.

### CDF of DHCP Request Messages

Figure 1 shows the cumulative distribution function (CDF) of the number of DHCP request messages in both corporate and educational networks. The figures are broken down by different states: all states, select state, init-boot state, and renew or rebinding state.

**Corporate Network:**
- **All States (Corporate):** Figure 1(a-1)
- **Select State (Corporate):** Figure 1(b-1)
- **Init-Boot State (Corporate):** Figure 1(c-1)
- **Renew or Rebinding State (Corporate):** Figure 1(d-1)

**Educational Network:**
- **All States (Educational):** Figure 1(a-2)
- **Select State (Educational):** Figure 1(b-2)
- **Init-Boot State (Educational):** Figure 1(c-2)
- **Renew or Rebinding State (Educational):** Figure 1(d-2)

### Interarrival Time of DHCP Request Messages

Figure 2 plots the interarrival time of DHCP request messages. The first graph corresponds to the educational network, while the second and third graphs correspond to the corporate network with lease times of one hour and twelve hours, respectively. A vertical dotted line indicates half of the lease time, which is when a DHCP client typically requests a lease extension. In the educational network, most request messages are generated at half of the lease time, indicating they are renewal requests. In the corporate network, with longer lease times, fewer requests for IP address renewal are generated.

### Network Access Patterns

Proper setting of DHCP lease times depends on the duration devices remain active in the network. For a specific host, identified by its MAC address, we define:

- **Active Time:** The period from the initial DHCP lease offer until a Release message is issued or the last packet is generated before the next lease offer.
- **Inactive Time:** The period between the end of an active period and the start of the next active period.

**Observations:**
- Smartphones have shorter active times compared to laptops.
- iOS devices have shorter active times than other smartphones, due to:
  - User behavior (e.g., how users interact with laptops vs. smartphones).
  - Energy management policies (e.g., wireless interfaces in laptops are always active, while in smartphones, they can switch off after inactivity).

**iOS Devices:**
- If the device is not plugged in and the display is off, the Wi-Fi interface is switched off, and the cellular network becomes the primary interface.

**Android Devices:**
- Users can configure the WiFi sleep policy, though there is no unique default policy.

**Educational Network:**
- Many smartphone devices, especially iOS, have active times of one minute or less, likely due to users roaming across different subnets on campus.

### DHCP Lease Policies

An ideal DHCP lease allocation policy should account for the differences in behavior of various mobile devices. The goals of this policy, in order of priority, are:

1. **Address Space Utilization:** Minimize the use of available address space to support the most concurrent users.
2. **Broadcast Traffic:** Minimize broadcasts to reduce power consumption and wake-up of idle clients.
3. **Server Load:** Minimize the load on the DHCP server to reduce capital and operational expenditures (capex and opex).

By considering these factors, the DHCP lease policy can be optimized to better serve the needs of different types of devices and network environments.