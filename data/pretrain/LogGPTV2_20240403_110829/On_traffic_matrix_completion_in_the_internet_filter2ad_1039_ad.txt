a number of drawbacks. First, although the previous analyses
give some indication of what conditions are best to allow an
AS to perform TM completion, it is not clear where in the In-
ternet those conditions are most prevalent. Second, the analy-
ses assume highly idealized network models, which differ sig-
405ZĞƐƚŽĨƚŚĞ
ŐƌĂƉŚ
ZĞƐƚŽĨƚŚĞ
ŐƌĂƉŚ
ǀŽ
ǀŽ
Đϭ
ĐϮ
ĐŬ
^WůĞĨƚƚƌĞĞ
^WƌŝŐŚƚƚƌĞĞ
(a)
(b)
Figure 8: Comparison of two SPC trees.
niﬁcantly from the actual AS topology. For example, the anal-
yses assume there is a single source and destination in each
node, and that routing is shortest-path and symmetric. These
assumptions are all invalid in the AS-level Internet.
In this section we evaluate the ability of real ASes to do TM
completion. Our goal in doing so is twofold: ﬁrst, we seek to
verify that the positive results from Section 3 hold in practice
– namely, that TM completion is possible, at least for certain
rank matrices, in the real Internet. Second, we seek to answer
a set of natural follow-on questions. In particular, we would
like to know: (1) Given that the analyses in the previous sec-
tion suggested that TM completion may be possible at differ-
ent ‘locations’ in the Internet (ie, among top-tier ISPs as well
as ISPs lower in the AS hierarchy), where in fact is the oppor-
tunity for TM completion greatest? And: (2) Given that the
analyses in the previous section pointed to various factors that
can inﬂuence TM completion ability, what factors are actually
most signiﬁcant in the Internet?
4.1 Data
To answer these questions we analyze a large survey of AS
paths in use in the Internet. Our data consists of a snapshot of
all active BGP paths in use by 376 ASes (monitors), taken at
midnight UTC on August 6th, 2010. The dataset consists of
over 100 million AS paths, and contains 524,761 unique pre-
ﬁxes. (Note that not all BGP tables show paths to all preﬁxes.)
Because these paths are the active paths at the time of col-
lection, each path represents the sequence of ASes that trafﬁc
will ﬂow through when going from the particular monitor to
the path’s destination preﬁx.2
Next we select a subset of monitors and a subset of preﬁxes
such that, for every monitor and every preﬁx, our dataset has
the AS path from the monitor to the preﬁx. This results in 133
monitors and 225,041 preﬁxes.
Because we have the path from every monitor to every des-
tination, we can construct visibility matrices for every AS ap-
pearing in the dataset – 28,763 ASes. These visibility matrices
have size 133 × 225,041; for each entry in each visibility ma-
trix, we can determine whether its value is 0 or 1. This is be-
cause we have the AS path corresponding to each element of
the matrix, and to determine the 0-1 status of that element for
a particular observer AS, we simply need to check whether the
observer AS appears on that AS path. So our input to the anal-
yses below consists of over 28,000 visibility matrices, each of
2We are ignoring possible conﬁguration errors, false BGP ad-
vertisements, or path changes that have not yet reached the
monitors – each of which we expect to have negligible effects
on our results.
which consists of about 30 million elements, known with high
conﬁdence.
Of course, these visibility matrices are only a portion of the
complete visibility matrix of each AS, so our analyses in this
section concern each AS’s attempt to apply matrix completion
to a portion of its TM.
In some our results, we make use of AS relationships (cus-
tomer/provider and peer/peer); for that purpose we use the
AS relationship labeling performed and published by CAIDA
[11], which is based on the most comprehensive methodology
available at present.
4.2 Metrics
We characterize an observer AS in two ways: via standard
metrics used in the study of complex networks, and using met-
rics that capture networking-speciﬁc properties. First, to mea-
sure “centrality” of an observer AS, we use its k-core decom-
position shell (or just “k-shell”) [1]. As described in Sec-
tion 2.5, the k-core decomposition identiﬁes shells (vertex sets)
of a graph that are nested, and successively more densely inter-
connected. Since we have seen in Section 3 that node degree is
signiﬁcant, we also measure each observer’s degree (the num-
ber of ASs that are adjacent along a BGP path with the ob-
server). Finally, we also consider networking-speciﬁc metrics:
the number of customers of the observer, and the number of
peers of the observer.
Each observer’s TM completion ability depends on the rank
k at which TM completion is attempted, with higher rank in-
dicative of more accurate completion ability. In most cases in
our data, observers cannot complete their entire TMs. How-
ever, AICMC identiﬁes the subset of elements that can be re-
covered for any given rank. Thus rather than asking “at what
rank k can the entire TM be recovered?” as we did in Sec-
tion 3, here we use a different metric, which we call expected
rank. Expected rank is deﬁned as the expected value of the
maximum rank at which a randomly chosen entry can be re-
covered. To compute the metric, we take the average over all
non-visible entries of the maximum rank at which the element
can be recovered (using zero when the element cannot be re-
covered at any rank).
Note that the matrices we use in this section are not struc-
tured the same way as those in Section 3. For example, ma-
trices in this section are not symmetric, and are indexed dif-
ferently. Because of this, rank values cannot be compared di-
rectly. Hence our focus is on how effective rank varies, rather
than its speciﬁc value.
4.3 Results
We ﬁrst consider whether centrality in the Internet as mea-
sured by k-shell is a good predictor of TM completion ability.
For this, we look at the top 500 ASes in terms of k-shell num-
ber. Figure 9(a) shows a scatterplot of k-shell versus expected
rank, and Figure 9(b) shows expected rank for ASes in order
of decreasing k-shell number. In the this ﬁgure, values have
been smoothed to reduce the effects of noise.
The ﬁgures show that centrality as measured by k-shell has
some relationship to completion ability, but the relationship is
not strong. Among ASes in the innermost shell (the nucleus),
many have low completion ability. In fact, on average ASes in
the core have lower completion ability than those ‘just outside’
the nucleus.
406k
n
a
r
d
e
t
c
e
p
x
E
4.5
4
3.5
3
2.5
2
1.5
1
0.5
0
30
k
n
a
R
d
e
t
c
e
p
x
E
35
4.5
4
3.5
3
2.5
2
1.5
1
0.5
0
0
k
n
a
r
d
e
t
c
e
p
x
E
4
3.5
3
2.5
2
1.5
1
0.5
0
0
55
60
k
n
a
r
d
e
t
c
e
p
x
E
4.5
4
3.5
3
2.5
2
1.5
1
0.5
0
1.5
500
2
100
400
AS ranking (higher to lower)
200
300
(b)
40
50
K−core Degree
45
(a)
k
n
a
r
d
e
t
c
e
p
x
E
4
3.5
3
2.5
2
1.5
1
0.5
0
0
3
3.5
100
400
AS ranking (higher to lower)
200
300
(d)
500
Node Degree (log)
2.5
(c)
Figure 9: Expected rank as a function of (a),(b) k-shell and (c),(d) degree.
s
e
S
A
180
160
140
120
100
80
60
40
20
0
0
2.5
3
180
160
140
120
100
80
60
40
20
0
0
s
e
S
A
140
5
40
20
120
knowns per customer column
100
80
60
(b)
1.5
2
Number of Peers (log)
1
(a)
Figure 11: Effect of peers vs. customers completion ability.
10
knowns per peer column
20
25
30
15
(c)
0.5
4
3.5
3
2.5
2
1.5
1
0.5
)
g
o
l
(
s
r
e
m
o
t
s
u