â„=1ğ‘â„,ğ‘˜
âˆ‘ğ¾ğ‘–
â„=1,â„âˆ•=ğ‘˜ğ‘ğ‘˜,â„
ğ‘– +
ğ‘–,ğ‘– ğ‘ˆ ğ‘˜
â„=1,â„âˆ•=ğ‘˜ğ‘â„,ğ‘˜
ğ‘– =
ğ‘–,ğ‘— ğ¸â„
âˆ‘ğ¾ğ‘–
âˆ‘ğ‘€
ğ‘–,ğ‘– ğ‘ˆ â„
ğ‘–
(15)
ğ‘—=1,ğ‘—âˆ•=ğ‘–
Proof: (Outline) The proof follows the same steps of
the BAS case. However, (15) differs from the BAS case
because in RS-RD a queue is never effectively blocked. As
a consequence, for self-routed jobs the classical utilization
should be taken into account. A complete derivation can be
found in [8, Thm. 2â€²
].
The following theorem shows that a balance holds between
the marginal probabilities similarly to the one developed in the
BAS case. This theorem differs from the one for non-blocking
MAP networks in [5] only in the fact that it involves a subset
of the original state space.
Theorem 7: The arrival rate at queue ğ‘– when its queue
length is ğ‘›ğ‘– jobs, 0 < ğ‘›ğ‘– â‰¤ ğ¹ğ‘– âˆ’ 1, is balanced by the rate of
1The interested reader can refer to [3] for a recursive expression to compute
the state space cardinality for a queueing network where all queues have the
same capacity and RS-RD blocking.
Authorized licensed use limited to: Tsinghua University. Downloaded on March 18,2021 at 14:27:39 UTC from IEEE Xplore.  Restrictions apply. 
580departures when the queue length is ğ‘›ğ‘– + 1, i.e.,
âˆ‘ğ‘€
âˆ‘ğ‘€
=
ğ‘—=1,ğ‘—âˆ•=ğ‘–
ğ‘—=1,ğ‘—âˆ•=ğ‘–
âˆ‘ğ¹ğ‘—
âˆ‘ğ¹ğ‘—âˆ’1
âˆ‘ğ¾ğ‘—
âˆ‘ğ¾ğ‘—
ğ‘›ğ‘— =1
ğ‘˜=1
âˆ‘ğ¾ğ‘—
âˆ‘ğ¾ğ‘–
â„=1
âˆ‘ğ¾ğ‘–
âˆ‘ğ¾ğ‘–
ğ‘›ğ‘— =0
ğ‘¢=1
ğ‘˜=1
ğ‘¢=1ğ‘ğ‘˜,â„
â„=1ğ‘ğ‘˜,â„
ğ‘—,ğ‘– ğœ‹(ğ‘›ğ‘–, ğ‘¢, ğ‘›ğ‘—, ğ‘˜)
ğ‘–,ğ‘— ğœ‹(ğ‘›ğ‘–+1, ğ‘˜, ğ‘›ğ‘—, ğ‘¢)
(16)
for all 1 â‰¤ ğ‘– â‰¤ ğ‘€. In the case ğ‘›ğ‘– = 0, the marginal balance
âˆ‘ğ‘€
specializes to the more informative relation
âˆ‘ğ¹ğ‘—
âˆ‘ğ¾ğ‘—
âˆ‘ğ¹ğ‘—âˆ’1
âˆ‘ğ¾ğ‘—
âˆ‘ğ¾ğ‘—
ğ‘˜=1
â„=1ğ‘ğ‘˜,â„
âˆ‘ğ¾ğ‘–
ğ‘›ğ‘— =1
ğ‘—,ğ‘– ğœ‹(ğ‘›ğ‘– = 0, ğ‘¢, ğ‘›ğ‘—, ğ‘˜)
ğ‘˜=1ğ‘ğ‘˜,ğ‘¢
ğ‘–,ğ‘— ğœ‹(ğ‘›ğ‘– = 1, ğ‘˜, ğ‘›ğ‘—, â„)
âˆ‘ğ‘€
ğ‘—=1,ğ‘—âˆ•=ğ‘–
=
ğ‘—=1,ğ‘—âˆ•=ğ‘–
ğ‘›ğ‘— =0
â„=1
(17)
which holds for each phase ğ‘¢, 1 â‰¤ ğ‘¢ â‰¤ ğ¾ğ‘–, with 1 â‰¤ ğ‘– â‰¤ ğ‘€.
Proof: A complete derivation can be found in [8, Thm.
3â€²
].
Also Theorem 2, Corollary 1 and Theorem 3 of the BAS case
still hold for the RS-RD case by setting ğ’ = âˆ…, the proof is
qualitatively identical to the BAS case [8].
Finally, as for the original MAP queueing networks, the
queue-length of ğ‘– in all its phases satisï¬es the follows balance.
Theorem 8: The states of queue ğ‘– in phase ğ‘˜ and in phase
â„ are related by the balance
ğ‘›ğ‘–=1ğ‘ğ‘˜,â„
â„=1,â„âˆ•=ğ‘˜
+
ğ‘—=1,ğ‘—âˆ•=ğ‘–
â„=1,â„âˆ•=ğ‘˜
ğ‘›ğ‘— =0
ğ‘›ğ‘–=1ğ‘ğ‘˜,â„
ğ‘¢=1
ğ‘–,ğ‘– ğ‘›ğ‘–ğœ‹(ğ‘›ğ‘–, ğ‘˜, ğ‘›ğ‘–, ğ‘˜)
âˆ‘ğ‘€
âˆ‘ğ¾ğ‘–
âˆ‘ğ¾ğ‘–
âˆ‘ğ¾ğ‘—
âˆ‘ğ¾ğ‘–
âˆ‘ğ‘€
âˆ‘ğ¾ğ‘–
âˆ‘ğ‘€
âˆ‘ğ‘€
âˆ‘ğ¾ğ‘–
â„=1,â„âˆ•=ğ‘˜
Proof: A complete derivation is given in [8, Thm. 5â€²
âˆ‘ğ¾ğ‘—
âˆ‘ğ¹ğ‘—âˆ’1
âˆ‘ğ¹ğ‘–
âˆ‘ğ¹ğ‘–
âˆ‘ğ¹ğ‘–
âˆ‘ğ¾ğ‘—
âˆ‘ğ¹ğ‘—âˆ’1
âˆ‘ğ¹ğ‘—
âˆ‘ğ¾ğ‘—
âˆ‘ğ¹ğ‘–
âˆ‘ğ¹ğ‘—âˆ’1
âˆ‘ğ¾ğ‘—
ğ‘–,ğ‘— ğœ‹(ğ‘›ğ‘–, â„, ğ‘›ğ‘—, ğ‘¢)
ğ‘›ğ‘–=0ğœ‹(ğ‘›ğ‘–, ğ‘˜, ğ‘›ğ‘—, â„)
ğ‘›ğ‘–=1ğ‘â„,ğ‘˜
âˆ‘ğ¹ğ‘–âˆ’1
âˆ‘ğ¹ğ‘–
â„=1
â„=1,â„âˆ•=ğ‘˜
ğ‘—=1,ğ‘—âˆ•=ğ‘–
ğ‘–,ğ‘– ğ‘›ğ‘–ğœ‹(ğ‘›ğ‘–, â„, ğ‘›ğ‘–, â„)
ğ‘—=1,ğ‘—âˆ•=ğ‘–
ğ‘—=1,ğ‘—âˆ•=ğ‘–
ğ‘›ğ‘— =1ğ‘â„,ğ‘¢
ğ‘›ğ‘–=1ğ‘â„,ğ‘˜
ğ‘›ğ‘–=1ğ‘â„,ğ‘˜
+
=
ğ‘›ğ‘— =0
ğ‘¢=1
ğ‘›ğ‘— =0
ğ‘¢=1
ğ‘¢=1
â„=1
+
+
].
ğ‘—,ğ‘–
ğ‘–,ğ‘— ğ‘›ğ‘–ğœ‹(ğ‘›ğ‘–, â„, ğ‘›ğ‘—, ğ‘¢)
ğ‘–,ğ‘— ğ‘›ğ‘–ğœ‹(ğ‘›ğ‘–, ğ‘˜, ğ‘›ğ‘—, ğ‘¢)
IV. BOUNDABLE APPROXIMATIONS
The fundamental idea behind the proposed approximations
and bounds is to use the exact characterization developed in
Sections II and III to formulate an educated guess of the
values of the QR marginal probabilities. We here describe
our methodology for BAS networks, the application to RS-
RD blocking follows easily by considering ğ’ = âˆ….
To determine an approximate marginal distribution for the
model, we assume the values ğœ‹(ğ‘›ğ‘–, ğ‘˜ğ‘–, ğ‘›ğ‘—, ğ‘˜ğ‘—, ğ’) as unknowns
in an optimization program ğ’ª. This optimization program
takes the form
ğ’ª :
s.t.
min ğ‘“ğ‘œğ‘ğ‘—(ğ…ğº)
Ağ…ğº â‰¤ ğ’ƒ
Cğ…ğº â‰¤ ğ’…
where ğ…ğº is the vector of the current guesses for all the QR
marginal probabilities ğœ‹(ğ‘›ğ‘–, ğ‘˜ğ‘–, ğ‘›ğ‘—, ğ‘˜ğ‘—, ğ’), ğ‘“ğ‘œğ‘ğ‘— is a (possi-
bly nonlinear) objective function to be optimized, and the
constraints are of two types. A ï¬rst group of constraints,
Ağ…ğº â‰¤ ğ’ƒ,
is the set of all equations and inequalities
developed in the BAS (or RS-RD) characterizations, including
the specialized marginal balances for ğ‘›ğ‘– = 0. Notice that
such equations are all linear constraints, mainly equalities.
A second group of linear constraints, Cğ…ğº â‰¤ ğ’…, imposes
obvious conditions that describe in the optimization program
the feasible values of the terms ğœ‹ğº(ğ‘›ğ‘–, ğ‘˜ğ‘–, ğ‘›ğ‘—, ğ‘˜ğ‘—, ğ’) âˆˆ ğ…ğº
in order to specify a valid QR marginal distribution. These
constraints impose, for instance, that the unknowns of the
linear program are probabilities, hence numbers ranging in
[0, 1], or that a queue can only be in a single state at a time
hence, e.g., ğœ‹ğº(ğ‘›ğ‘–, ğ‘˜ğ‘–, ğ‘›ğ‘– + ğ‘, ğ‘˜ğ‘–, ğ’) = 0, âˆ€ğ‘ âˆ•= 0. A summary
of these basic conditions is given in Table II.
Let ğ…ğº
ğ‘œğ‘ğ‘¡ be the guess ğ…ğº which provides the optimal
value for the objective function ğ‘“ğ‘œğ‘ğ‘—. The crucial property
of the optimization program ğ’ª is that
its constraints are
satisï¬ed by the exact QR marginal distribution ğ…. It then
follows that the exact solution ğ‘“ğ‘œğ‘ğ‘—(ğ…) is always a feasible
solution for the optimization program ğ’ª, although it may not
be necessarily the optimal one ğ‘“ğ‘œğ‘ğ‘—(ğ…ğº
ğ‘œğ‘ğ‘¡). This property leads
to the following approximation and bounding techniques.
A. Performance Metric Bounds
First, suppose that ğ‘“ğ‘œğ‘ğ‘— deï¬nes a performance metric of
interest, such as the utilization of station ğ‘–
ğ‘“ğ‘œğ‘ğ‘—(ğ…ğº) =
ğœ‹ğº(ğ‘›ğ‘–, ğ‘˜ğ‘–, ğ‘›ğ‘–, ğ‘˜ğ‘–, ğ’)
or its average queue-length
ğ¾ğ‘–âˆ‘
âˆ‘
ğ‘˜ğ‘–=1
ğ‘›ğ‘–â‰¥1
ğ¾ğ‘–âˆ‘
âˆ‘
ğ‘˜ğ‘–=1
ğ‘›ğ‘–â‰¥1
ğ‘“ğ‘œğ‘ğ‘—(ğ…ğº) =
ğ‘›ğ‘–ğœ‹ğº(ğ‘›ğ‘–, ğ‘˜ğ‘–, ğ‘›ğ‘–, ğ‘˜ğ‘–, ğ’)
Then, by construction, minimizing ğ’ª returns a lower bound
ğ‘œğ‘ğ‘¡) = min ğ‘“ğ‘œğ‘ğ‘—(ğ…ğº) â‰¤ ğ‘“ğ‘œğ‘ğ‘—(ğ…), since ğ…ğº = ğ… is
ğ‘“ğ‘œğ‘ğ‘—(ğ…ğº
a feasible solution of the optimization program. Similarly,
solving ğ’ª as a maximization problem returns an upper bound
ğ‘œğ‘ğ‘¡) = max ğ‘“ğ‘œğ‘ğ‘—(ğ…ğº) â‰¥ ğ‘“ğ‘œğ‘ğ‘—(ğ…). Noting that utiliza-
ğ‘“ğ‘œğ‘ğ‘—(ğ…ğº
tions and queue-lengths are linear functions of ğ…ğº, it then
follows that ğ’ª can be solved efï¬ciently as a linear optimization
program. Such a solution provides upper and lower bounds
on the performance metrics of a MAP queueing network2.
Notice that other metrics, such as the effective utilization or
the throughput, may be deï¬ned similarly to the utilization
and queue-length in terms of a linear objective function.
Conversely, response times need to be estimated using Littleâ€™s
law as ratios of average queue-length and average throughput.
Hence, they can be solved as nonlinear global optimization
programs or, more easily, estimated indirectly from the bounds
on queue-length and throughput. This approach to bounding
the performance of a MAP queueing network has been also
investigated for models without blocking in [5] and we refer
to it as QR bounds.
2We stress again that such values are guaranteed to be bounds by construc-
tion if the optimizer returns a global optimum for ğ’ª, as it is always the case
for linear programs used for bounds computation.
Authorized licensed use limited to: Tsinghua University. Downloaded on March 18,2021 at 14:27:39 UTC from IEEE Xplore.  Restrictions apply. 
581B. Approximate Model Solution
The second main application of the optimization program ğ’ª
is in approximating the QR marginal probabilities. We deï¬ne
objective functions that allow one to obtain accurate approx-
imations, noticeably also on cases where the QR bounds are
not tight. We here introduce two approximation techniques: a
maximum entropy method (MEM) for MAP queueing networks
and a new principle of minimal mutual information (MMI). It
is important to remark that, since the QR bounds can always be
generated regardless of these approximations, the gap between
upper and lower bounds provides an independent assessment
on the maximum inaccuracy in using MEM or MMI in place
of an exact solution. Thus, such approximations are always
bounded, meaning that the maximum error of MEM or MMI is
the maximum distance from a point lying in between the upper
and lower QR bounds. Furthermore, the objective functions
are non-linear, hence one should consider a local optimum
obtained by a nonlinear solver3.
MEM searches for a set of QR marginal probabilities
that maximizes the information content of the distribution as
deï¬ned by the entropy function ğ». To simplify notation, for
the rest of this section let
MEM optimizes in ğ’ª the objective function
ğœ‹ğº(ğ‘›ğ‘–, ğ‘›ğ‘—) â‰¡ ğœ‹ğº(ğ‘›ğ‘–, ğ‘˜ğ‘–, ğ‘›ğ‘—, ğ‘˜ğ‘—, ğ’).
(
âˆ‘
max ğ» = max
âˆ’
ğœ‹ğº(ğ‘›ğ‘–, ğ‘›ğ‘—) log2 ğœ‹ğº(ğ‘›ğ‘–, ğ‘›ğ‘—)
ğ‘›ğ‘–,ğ‘›ğ‘— ,ğ‘˜ğ‘–,ğ‘˜ğ‘— ,ğ’
)
The values of performance indexes such as utilizations and
queue-lengths are then obtained directly from the QR marginal
distribution that maximizes ğ». The rationale behind a max-
imum entropy solution is that it is known to be exact in a
number of queueing models, noticeably in exponential single-
class closed queueing networks [10]. Notice that a well-
known maximum entropy method for queueing networks has
already been developed in [11] based on the analysis of the
ğºğ¼/ğºğ¼/1 queue. However, the MEM technique we propose
differs substantially from the one in [11]. First, the method
is able for the ï¬rst
the
queues in the network simultaneously, instead of recursively
evaluating queues one at a time as in [11]. Importantly, our
technique is also able to consider the impact of autocorrelation
in job ï¬‚ows introduced by MAPs, which is ignored in the
analysis of the ğºğ¼/ğºğ¼/1 queue. Indeed, this is a critical
aspect of a MAP queueing network that cannot be ignored,
being responsible of dynamic bottleneck switch effects, even
at equilibrium, that signiï¬cantly affect the model solution [4].
Finally, and perhaps most importantly, our MEM solution is