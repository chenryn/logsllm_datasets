向200个节点分发500M的镜像，比docker原生模式使用更低的网络流量，
实验数据表明采用蜻蜓后，Registry的出流量降低了99.5%以上；而在1000并发
规模下，Registry的出流量更可以降低到99.9%左右。
阿里巴巴实践效果
蜻蜓在阿里投入使用大概已有两年，两年来业务发展迅速，从分发的次数来统计
目前一个月接近20亿次，分发3.4PB数据。其中容器镜像的分发量接近一半。
蜻蜓在阿里文件vs镜像分发流量趋势图
新基础  9年双11：互联网技术超级工程
任务调度，我们经历了无数次的尝试和探索，最终通过多维度（比如机器硬件配置、
地理位置、网络环境、历史下载结果和速率等等维度的数据）的数据分析（主要利用
了梯度下降算法，后续还会尝试其他算法），智能动态决定当前请求者最优的后续分
块任务列表。
智能压缩
智能压缩会对文件中最值得压缩的部分实施相应的压缩策略，从而可以节约大量
的网络带宽资源。
对容器镜像目前的实际平均数据来看，压缩率(Compression Ration)是40%，
也就是说100MB镜像可以压缩到40MB。针对1000并发规模，通过智能压缩可以
减少60%的流量。
安全
在下载某些敏感的文件（比如秘钥文件或者账号数据文件等）时，传输的安全性
必须要得到有效的保证，在这方面，蜻蜓主要做了两个工作：
新基础  9年双11：互联网技术超级工程
https://github.com/alibaba/dragonfly
[6] 阿里云容器服务：
https://www.aliyun.com/product/containerservice
[7] 飞天专有云敏捷版：
https://yq.aliyun.com/articles/224507
[8] 云效智能运维平台：
https://www.aliyun.com/product/yunxiao
新基础  9年双11：互联网技术超级工程
2014.07 Tair v3.0正式上线，性能X倍提升；
●
2016.11泰斗智能运维平台上线，助力2016双11迈入千亿时代；
●
2017.11性能飞跃，热点散列，资源调度，支持万亿流量。
●
Tair是一个高性能、分布式、可扩展、高可靠的key/value结构存储系统！
Tair特性主要体现在以下几个方面：
高性能：在高吞吐下保证低延迟，是阿里集团内调用量最大系统之一，双11
●
达到每秒5亿次峰值的调用量，平均访问延迟在1毫秒以下；
高可用：自动failover单元化机房内以及机房间容灾，确保系统在任何情况下
●
都能正常运行；
规模化：分布全球各个数据中心，阿里集团各个BU都在使用；
●
业务覆盖：电商、蚂蚁、合一、阿里妈妈、高德、阿里健康等。
●
Tair除了普通Key/Value系统提供的功能，比如get、put、delete以及批量接
口外，还有一些附加的实用功能，使得其有更广的适用场景。Tair应用场景包括以下
四种：
1. MDB典型应用场景：用于缓存，降低对后端数据库的访问压力，比如淘宝中
的商品都是缓存在Tair中；用于临时数据存储，部分数据丢失不会对业务产
生较大影响；读多写少，读qps达到万级别以上。
2. LDB典型应用场景：通用kv存储、交易快照、安全风控等；存储黑白单数
据，读qps很高；计数器功能，更新非常频繁，且数据不可丢失。
3. RDB典型应用场景：复杂的数据结构的缓存与存储，如播放列表，直播间等。
4. FastDump典型应用场景：周期性地将离线数据快速地导入到Tair集群中，
快速使用到新的数据，对在线读取要求非常高；读取低延迟，不能有毛刺。
新基础 交易峰值>总GMV，如
何确保成本不超过交易峰值增速？对于带数据的分布式系统来说，缓存问题都是比较难
解决的，缓存流量特别大，2017年双11后，我们彻底解决掉了缓存问题。我们现在
的交易系统和导入系统都是多地域多单元多机房部署的，如何快速部署业务系统呢？
多地域多单元
多地域多单元首先是中心机房，我们做了双机房容灾，两侧还有若干个单元。机
房内系统图如图，从流量接入进统一接入层-应用层-中间件-Tair-DB，在数据层
我们会做多地域的数据同步。
206 > 9年双11：互联网技术超级工程
弹性建站
我们需要系统具备弹性建站的能力。Tair是一个复杂的分布式存储系统，我们为
之建立了一整套运营管控系统泰斗，在泰斗里建设弹性建站系统，它会经过一系列工
作步骤将Tair系统建设起来，我们还会从系统层面、集群层面和实例连通层面进行
验证，以确保系统功能、稳定性万无一失。
Tair的每一个业务集群水位其实是不一样的，双11前的每一次全链路压测下，
由于业务模型的变化，所用Tair资源会发生变化，造成水位出现变化。在此情况下，
我们需要每一次压测完在多个集群间调度Tair资源，如果水位低，就会把某些机器
服务器资源往水位高挪，达到所有集群水位值接近。
新基础 < 207