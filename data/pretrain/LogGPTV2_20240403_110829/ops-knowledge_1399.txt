User: Please write an Ansible script to automate the deployment of web applications and implement load balancing and automatic expansion
Assistant: Since this is a customized requirement, it needs to be configured according to the actual situation. A basic Ansible script example is provided below. Please modify and optimize according to your actual situation. --- - name: Automatic deployment of web applications hosts: loadbalancer become: true vars: app_servers: - ip: 192.168.1.1 port: 8080 - ip: 192.168.1.2 port: 8080 tasks: - name: Install and configure Nginx apt: name : nginx state: present - name: Configure Nginx copy: src: "{{ item }}" dest: /etc/nginx/{{ item }} owner: root group: root mode: 0644 notify: Reload Nginx with_items: - nginx .conf - conf.d/default.conf - name: adjust Nginx configuration lineinfile: path: /etc/nginx/nginx.conf regexp: '^worker_processes' line: 'worker_processes auto;' - name: configure web application apt: name : tomcat7 state: present vars: app_port: "{{ item.port }}" with_items: "{{ app_servers }}" - name: deploy web application copy: src: app.war dest: /var/lib/tomcat7/webapps / owner: root group: tomcat7 mode: 0644 with_items: "{{ app_servers }}" notify: Restart Tomcat - name: Start Tomcat service: name: tomcat7 state: started with_items: "{{ app_servers }}" handlers: - name: Reload Nginx service: name: nginx state: reloaded - name: Restart Tomcat service: name: tomcat7 state: restarted with_items: "{{ app_servers }}"