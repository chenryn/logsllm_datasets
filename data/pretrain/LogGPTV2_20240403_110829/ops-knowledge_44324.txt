User: On a Linux server, how to set up the SSH service to improve server security and prevent illegal login?
Assistant: In order to improve the security of the Linux server and prevent illegal login, you can set up the SSH service according to the following steps: 1. Install the SSH service: Run the following command on the Linux server to install the SSH service: ``` sudo apt-get install openssh-server ` `` 2. Modify the SSH configuration file: Run the following command in the terminal window to open the SSH configuration file: ``` sudo nano /etc/ssh/sshd_config ``` Modify the following line: ``` Port 22 #Modify the SSH port number, default For 22 PermitRootLogin no #Prohibit root account login PasswordAuthentication no #Disable password authentication, use key authentication``` 3. Restart the SSH service: Run the following command in the terminal window to restart the SSH service to make the modified configuration file take effect: ``` sudo service ssh restart ``` 4. Set firewall rules: Use firewall tools such as iptables to set rules to allow SSH port access and deny illegal access. For example, if you change the SSH port to 2222, you can use the following command to set the rule: ``` sudo iptables -A INPUT -p tcp --dport 2222 -j ACCEPT ``` 5. Configure SSH key authentication: generate public key and private key pair, and copy the public key to the ~/.ssh/authorized_keys file on the Linux server. This method is more secure than password authentication, because the private key is not easily cracked. The key can be generated using the following command: ``` ssh-keygen -t rsa ``` 6. Close unnecessary SSH ports: If the server only allows internal access, you can close the external SSH port. For example, if the server only allows internal access, you can close the external SSH port with the following rule: ``` sudo iptables -A INPUT -s 192.168.0.0/16 -p tcp --dport 22 -j ACCEPT sudo iptables -A INPUT - p tcp --dport 22 -j DROP ``` Setting the SSH service through the above steps can improve the security of the server and prevent illegal login.