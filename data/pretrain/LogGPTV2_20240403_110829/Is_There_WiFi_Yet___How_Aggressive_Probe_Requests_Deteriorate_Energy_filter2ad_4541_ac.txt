over time.
In addition, we have investigated the varying numbers of
SSIDs contained within a PNL of individual PRs. WiFi
scans are divided into sweeps representing a complete ac-
tive scans with the number of unique SSIDs requested being
mapped to each individual source MAC within that time
frame. As demonstrated by Figure 3, most nodes (80%) do
not make requests for SSIDs from their PNL but rather only
make requests for the the empty (unknown) SSID. We com-
ment a bit later on scan mechanisms and how the length of
the PNL has only a minimal impact on the actual number
of resulting scans (ex. some mobile nodes tend to scan for
a timed duration rather than simple PNL coverage). Re-
cent trends with regards to privacy indicate that the scan
for only a single empty SSID is more likely to be the norm
than scans with long and varied PNLs.
4. PERFORMANCE DETERIORATION
We now explore the energy and throughput costs of ag-
gressive WiFi scanning in a controlled laboratory setting.
Although it would be ideal to instrument the entirety of
the stadium and to provide pervasive instrumentation, the
laboratory experiments can shed some light on what might
occur in the larger scale scenarios. To that end, we con-
ducted a group of small-scale, controlled experiments with
four types of handsets: the iPod touch (iOS 8.4), the Dell
Venue 7 (Android 4.4), the Nexus 10 (Android 5.1), and
the Samsung Galaxy S4 smartphone (Android 4.2). We are
particularly interested in measuring the power cost of an ac-
tive WiFi scan as well as the throughput impacts associated
with WiFi scans. Moreover, the lab setting provides ideal
cases for attempting to replicate the various intra-scan be-
havior observed in the stadium and the respective energy
implications.
For our experiments, we investigated WiFi scanning be-
haviors for the aforementioned devices by conﬁguring the
devices with two diﬀerent settings while at the same time
running tcpdump in monitor mode for capturing PRs. The
laptops utilized for packet capture were identical to the se-
tups used for packet capture in the stadium environment.
Scanning behaviors of the devices are summarized in Table
2. The distinguishing factor between the two columns refers
to whether or not the WiFi settings screen was open (which
implies a much more aggressive approach to scan). We ob-
served for each active scan, all four types of devices typically
sweep the PNL on one speciﬁc channel and then hop to the
next channel.
As indicated by Table 2, for all four types of devices (WiFi
enabled), if the listing of current WiFi is open, the intervals
between two consecutive WiFi scans are roughly 10 seconds
(3 s and 8 s were also observed for iOS device). If WiFi is still
on but the user is not in the WiFi settings screen (and not
Settings
Baseline
Scanning
Power Consumption (uAh)
Average
Std Dev
12,333.42
17,801.18
7.18
60.08
connected to WiFi), the scan interval for diﬀerent devices
varies from 10 seconds to up to 8 minutes.
Interestingly,
iOS 8 tends to exponentially increase the scanning interval
from 15 s to 480 s (i.e., 15 s, 30 s, 60 s, ... 480 s) when not in
the WiFi settings panel. For all other experiments presented
in this section, we forced the handset to stay in WiFi set-
tings screen as this conﬁguration allows us to better mimic
denser environmental scenarios. We surmise though more
diﬃcult to measure, that the lack of cellular connectivity
may also have caused more rapid scanning as the cellular
network tended to be quite overwhelmed with the nearly
150k users in the local area (good perceived downlink signal
but impossible to actually send data on the uplink).
4.1 Energy Impact
For the purpose of evaluating energy cost per WiFi scan,
we use the Monsoon power monitor and its PowerTool soft-
ware [14]. We instrument the Galaxy S4 smartphone as it
is the only device possessing a removable battery. Power
for the phone is supplied by the Monsoon power monitor
with the energy consumption recorded at a sampling rate
of 5 KHz. The phone is evaluated in two diﬀerent settings,
Baseline where WiFi is oﬀ but the screen remains on and
Scanning where the phone stays in the WiFi settings screen
but remains unaﬃliated with regards to WiFi. Power mon-
itoring was run for an extended period of time (5 minutes).
The average and standard deviation of power consumption
with each setting are given in Table 3.
After recording the average power consumption for both
the Baseline and the Scanning settings, the energy cost of
an active WiFi scan can be approximated by calculating the
delta between the consumption values of these two settings
over the entirety of the monitoring period, yielding 5467.76
uAh for the 5-minute time window. Notably, this represents
a 44.3% increase over the Baseline consumption despite the
fact that the screen is on for both cases. We can further in-
fer the power cost per scan since Table 2 has indicated WiFi
scan is invoked every 10 seconds if WiFi settings screen is ac-
tive. While somewhat crude in its approximation, each WiFi
scan in an ideal scenario (no background traﬃc, no DCF is-
sues) consumes roughly 182.26 uAh. An individual waiting
in line for 10 minutes without WiFi while aggressively scan-
ning could end up consuming nearly 10936 uAh extra energy,
eﬀectively 0.4% of a fully charged battery (2600 mAh).
4.2 Throughput Loss
While the energy losses may be tolerable (though still
wasteful), aggressive WiFi scanning also has impacts on per-
formance by introducing overhead to the wireless channels.
For the purpose of measuring the potential network perfor-
mance degradation, we designed a small-scale experiment
using iperf2 conﬁgured for UDP throughput. The compo-
nents of this experiment are described follows:
iperf client and server: We instrumented a Dell EliteBook
8560 with a 802.11n dual-band network interface as the iperf
321client and a HP 3450 laptop with Ubuntu Linux installed as
the iperf server.
Handsets: We used one iPod Touch, one Dell Venue 7
tablet, and thirteen Android smartphones as our handsets.
All devices are dual-band capable. For each device, we de-
associated the device from any known WiFi and created a
PNL consisting of two hidden SSIDs. Screens were kept on
and the devices were kept in the WiFi scan screen.
Wireless router: A Netgear AC1900 router (dual-band,
802.11ac capable) was used to set up the WLAN. The router
provided up to 600 Mbps and 1300 Mbps WiFi down-link
speeds on the 2.4 and 5 GHz bands respectively. The client
was the only node associated with the AP and the server was
directly connected to the router via GigE. A full 40 MHz of
spectrum (full 802.11n speeds) was selected for the router
with validation. Experiments were conducted in a basement
with minimal interference from other devices. The distance
between the client and the server was roughly three meters
and all handsets were positioned between the client and the
server.
The client was tuned in order to determine the maximum
lossless send rate between the client and the server. Com-
munications were unidirectional going only from the client
to the server. On the 5GHz band, client performance topped
out at roughly 180 Mb/s without any background traﬃc (see
Figure 4). Each experiment setting was repeated multiple
times with a typical test duration of ﬁve minutes. Once the
baseline was established, the experiments were conducted by
gradually increasing the number of UEs actively scanning.
Notably, WiFi performance decreased by 16.7% once all ﬁf-
teen devices were introduced, i.e., from the peak of 180.0
Mb/s down to 149.8 Mb/s. While degradation of perfor-
mance is not entirely unexpected with WiFi, the fact that
this performance decrease comes by virtue of ‘useless’ PRs
is problematic. As noted earlier, stadium environments may
have nodes both associated and un-associated with the WiFi
infrastructure with the unaﬃliated mobile nodes still chirp-
ing for WiFi. Furthermore, our limited lab experiments were
actually quite benign entailing only roughly 360 PRs per
min (observed via tcpdump).
In the stadium case, such
as the Northwestern game where 967 PRs were generated
every minute, unaﬃliated nodes could have signiﬁcant per-
formance issues even in the ‘better’ 5 GHz bands. As noted
in Figure 4, the 2.4 GHz performance has a similar degra-
dation pattern except with an obviously lower baseline and
would potentially be much worse for the stadium case with
dramatically higher numbers of PRs (360 PRs per minute
versus 2568 PRs per minute).
5. DISCUSSIONS AND FUTURE WORK
The issue of how to solve the dilemma of aggressive WiFi
speaks to the complexities of the wireless industry. On one
hand, the solution would appear to be fairly trivial: slow
down the WiFi scanning rate and scan only on a screen ac-
tivation. The reality though is decidedly more complicated
as applications largely do not wait to send data until there is
WiFi available and the delay before locating WiFi at home
could be considerable. Critically, the vast majority of a user
experience tends to be dominated by the simple cases, ex.
only a few devices and well-known SSIDs. In those cases,
the ﬁrst scan when in range tends to be successful and faster
scanning means faster hopping onto WiFi.
Figure 4: Throughput Reduction
Furthermore, the vendors at ﬁrst glance most impacted by
aggressive Probe Requests tend to be the WiFi infrastruc-
ture vendors who have little to no control over the mobile
devices. After all, WiFi exists in the unlicensed bands which
means that for all practical purposes, the equipment infras-
tructure vendors must simply endure. Recent discussions
with the 802.11ax standard have noted that indeed, aggres-
sive Probe Requests do create sizable issues in ultra-dense
venues [4]. Handset and OS vendors are only marginally
motivated by claims of reduced throughput as the vast ma-
jority of throughput scenarios are OK (the typical cases).
However, we would argue that the energy cost of being ag-
gressive is non-trivial and moreover, that energy cost burns
worst when most users tend to be suﬀering energy issues (ex.
the ultra-dense venue).
In conclusion, we believe that aggressive WiFi scanning
has signiﬁcant side eﬀects on normal wireless network users,
both with respect to energy and throughput. Moreover, we
believe that our stadium analyses show that not only are
aggressive Probe Requests wasteful in the ultra-dense case,
the degree to which such wasteful Probe Requests occur far
outstrips what is perceived in the literature. Moreover, de-
spite research eﬀorts to tamp down the impacts of Probe Re-
quests, the perceived beneﬁts with regards to WiFi joining
speed seem to largely outweigh occasional problems in dense
venues. Future work is needed to explore how one can bridge
the conﬂicting goals of rapid WiFi detection with the cost
of wasted WiFi scans in a deployable manner, likely with
the assistance of handset or cellular carriers, a considerable
challenge. For encouraging such eﬀorts, the full anonymized
stadium and classroom datasets are made publicly available.
6. ACKNOWLEDGMENTS
This material is based upon work supported by the National
Science Foundation under Grant No. IIS-0968529. Further
support was provided through the University of Notre Dame
and Sprint.
 50 75 100 125 150 175 200 0 5 10 15Throughput (Mbps)Number of UEs2.4GHz5GHz3227. REFERENCES
[1] J. Andrews, S. Buzzi, W. Choi, S. Hanly, A. Lozano,
A. Soong, and J. Zhang, “What Will 5G Be?” IEEE
Journal on Selected Areas in Communications, vol. 32,
no. 6, pp. 1065–1082, June 2014.
[2] “Cellular-Wi-Fi Integration,” InterDigital, Tech. Rep.,
2012.
[3] “The Future of Hotspots: Making Wi-Fi as Secure and
Easy to Use as Cellular,” Cisco, Tech. Rep., 2012.
[4] B. Hart, M. Swartz, J. Suhr, and M. Silverman,
“Stadium Measurements,” 802.11ax Working Group
(Doc 1223), September 2014.
[5] R. Raghavendra, E. Belding, K. Papagiannaki, and
K. Almeroth, “Unwanted Link Layer Traﬃc in Large
IEEE 802.11 Wireless Networks,” IEEE Transactions
on Mobile Computing, vol. 9, no. 9, pp. 1212–1225,
September 2010.
[6] A. Gupta, J. Min, and I. Rhee, “WiFox: Scaling WiFi
Performance for Large Audience Environments,” in
CoNEXT 2012, ACM, 2012, pp. 217–228.
[7] G. Ananthanarayanan and I. Stoica, “Blue-Fi:
Enhancing Wi-Fi Performance Using Bluetooth
Signals,” in MobiSys 2009, ACM, 2009, pp. 249–262.
[8] H. Wu, K. Tan, J. Liu, and Y. Zhang, “Footprint:
Cellular Assisted Wi-Fi AP Discovery on Mobile
Phones for Energy Saving,” in WINTECH 2009,
ACM, 2009, pp. 67–76.
[9] J. Teng, C. Xu, W. Jia, and D. Xuan, “D-Scan:
Enabling Fast and Smooth Handoﬀs in AP-Dense
802.11 Wireless Networks,” in INFOCOM 2009, IEEE,
April 2009, pp. 2616–2620.
[10] J. Yeo, M. Youssef, and A. Agrawala, “A Framework
for Wireless LAN Monitoring and Its Applications,” in
WiSe 2004, ACM, 2004, pp. 70–79.
[11] S. Rayanchu, A. Patro, and S. Banerjee, “Catching
Whales and Minnows Using WiFiNet: Deconstructing
non-WiFi Interference Using WiFi Hardware,” in
NSDI 2012, USENIX, 2012, pp. 57–70.
[12] A. Gupta and P. Mohapatra, “Energy Consumption
and Conservation in WiFi Based Phones: A
Measurement-Based Study,” in SECON 2007, IEEE,
June 2007, pp. 122–131.
[13] B. Misra, “iOS8 MAC Randomization,” accessed:
2015-05-05. [Online]. Available:
http://blog.airtightnetworks.com/
ios8-mac-randomization-analyzed/
[14] “Monsoon Power Monitor.” [Online]. Available: https:
//www.msoon.com/LabEquipment/PowerMonitor/
323