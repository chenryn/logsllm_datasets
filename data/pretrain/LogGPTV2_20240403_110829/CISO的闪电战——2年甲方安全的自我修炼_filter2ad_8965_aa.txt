# CISO的闪电战——2年甲方安全的自我修炼
##### 译文声明
本文是翻译文章
译文仅供参考，具体内容表达以及含义原文为准。
作者：ayazero
## 前言
两年时间在企业安全上能做什么，笔者尝试挑战了一下这个问题。截至写这篇文章时，还有一些子领域做得不太好，不过既然时间差不多2年了，就拿出来分享一下吧。
对于企业安全建设，能说出来的人很多，但能落地庞大安全体系的人极少，大多需要5-10年。
## 范围对象
笔者任职公司是一个拥有数亿用户、各种各样的业务、几十个APP、几十万Server
OS实例、数万雇员的公司，并且有多家投资公司，上下游有大量产业链合作伙伴，还有跨境业务。
在这种体量的公司规模下，先简单解读一下面临的挑战及安全需求：
1\. IDC规模决定不可能用“买买买”搞定这摊子事，也不可能依赖开源软件，只能开启大规模自研之路。
2\. IT雇员规模虽然不是互联网行业最大，但也是非常庞大（数万），并且呈现高度的地域离散化和移动化，除了BeyondCorp之类的搞不定。
3\. 不只是做自己的企业边界内安全就可以，还要兼顾投后赋能、第三方、（数据）供应链安全；边做自己同时还要兼顾生态安全。
4\. 建团队不能只靠HR、猎头，用常规手段多半是2年也建不起来能消化这些总需求的团队。
## 目标设定
对于一个体量虽然不是最大，但跟最大的互联网公司业务形态非常类似，技术栈广度又比较接近的情况而言，在结果上必须达到一线互联网公司将近全部的安全能力，才可以认为满足当下的需求。
设定这个目标并不是表面做做，或者为了PR的需求，而是真实的需求。稍微展开一下有几个很关键的因素：
实事求是地讲，一线互联网公司安全水平70%-80%左右的能力，并不是一个行业很高的标准，对于大多数公司来说这只是一个真正意义上及格的水平。原因在于70%-80%能力大约也就实现了相对系统化的安全体系，安全能力覆盖率接近100%，在重点技术栈部分有纵深防御能力。纵深防御在很多场景下是及格的入门标准，熟悉攻击的人都知道，单层防御没有兜底方案被突破的概率很大，结果往往等同于安全能力不及格。
那有人也许会问，照你这么说市面上那么多公司都不具备所谓的纵深防御能力，他们全都不及格么？真相总是残酷的，笔者也无力回答这个问题。
另一方面，仅仅“满足当下的需求”并不一定能适配未来的发展，有可能跟不上未来互联网/IT技术本身的发展，或者表现出安全阻碍业务的效率（不是说安全绝对不阻碍业务，而是说相对行业水平来说拖后腿）。
### 挑战1：没有人
没有人可能是最大的困扰了，如此庞大的安全体系One man
army是不可能的，说的再好，安全负责人的知识结构再完整也无济于事。且要实现这种目标必须让团队具备全栈的能力，不仅仅是web，也不是加二进制就够了，而是开发、算法、隐私保护、运营各样各样的全都需要，最终安全团队的技能需要覆盖互联网全技术栈和所有的安全领域（工控这种小众一点的除外）。上哪儿去搬来这样的团队是个大考验，而且我们还是有倒计时目标的。
很多时候我们看一家公司的安全能力，不妨先从侧面看看他的安全团队的知识结构和技能，这样往往可以印证是不是跟他PR的一样，也可以作为一种侧面窥探安全能力的参考。譬如，一个安全团队规模不大，假如只有30人以下，那么他基本不太可能具备大规模自研的能力，也不可能去实践纵深防御体系。如果一个安全团队的技能主要以web安全为主，主业也是一个webservice为主的简单业务，是不是能说安全可以cover了呢？答案是否，因为资产技术栈和防御技术栈不对等，资产技术栈比攻击面选择性稍微大一点，但通常远大于web的防御技术栈，所以一旦攻击涉及到二进制层面就可能不能从容应对，从现实来说小安全团队的组成选择主营业务对口虽然无可厚非，但苛求结果的角度来说不会特别理想。
反之，如果团队的知识结构没有问题，而效率、ROI不理想，那么最大的瓶颈可能在安全负责人。尤其当主营业务相当挣钱，对安全不是那么计较投产比的时候，往往很容易掩盖这个问题。
### 挑战2：工程能力
对于很多市值100亿美元以上公司的安全团队来说，他们的真实瓶颈往往不是安全技术能力，而是工程化能力。这种所谓的工程化能力体现在能把自研的安全产品、安全系统落地于海量分布式环境，落地于规模庞大的组织的IT系统上，且不降低性能，不影响可用性，不出故障和运营事故。做一个安全产品demo是相对简单的，但也只是第一步，很多人以为随便凑几个RD便可以开发出安全产品部署到数以万计的系统上，但结果往往会半途而废。预估不足就在于安全方案设计，规则运营，数据分析都不是最难的，难的往往是性能和可用性。
这也是国内互联网公司安全能力跟全球头部公司比安全能力受制约最大的地方。
笔者就职时这家公司的其他技术领域已经有较大的发展和积累，对运维事故、可用性都有严格的定义和管理，大多数系统都有比较苛刻的逐年提升的可用性指标，对安全建设来说最大的坏处是你已经享受不到不用背负事故指标可以随意发布的红利，而是既要……又要……还要……在这种情况下，两年内研发出十几个安全基础组件覆盖所有的APP、服务器、员工终端、网络流量、敏感数据是极大的挑战。
强调工程能力和全栈技术视野的另一重影响是：这个因素直接决定安全团队和其他团队（SRE、IaaS和PaaS研发、业务研发）的沟通宽度。当两者之间的沟通管道越窄时，安全团队越容易落入自嗨，越宽则有利于作出接地气的项目。
### 挑战3：向上管理能力
经常听到一些声音，诸如：
  * “老板不重视安全”；