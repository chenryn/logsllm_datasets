### 通过互联网向客户提供API服务

提供API服务时，需要明确并遵守服务级别协议（SLA），承诺响应时间，并处理客户的支持请求。然而，这种做法有时被视为一种反模式，因为它让人联想到十年前的流程：开发者需将代码或二进制文件提交给运维团队，等待他们发布。尽管这种方法在过去是一种认真、有纪律且被广泛接受的业务实践，但如今它已经显得过时。

#### SLI 和 SLO 的定义

在2017年的SRECon美洲大会上，Dave Rensin发表了一次精彩的演讲，详细解释了SLI（服务级别指标）和SLO（服务级别目标）的计算方法和技术原则。如果你还没有看过，可以参考[视频和幻灯片](https://www.usenix.org/conference/srecon17americas/program/presentation/rensin)。例如，在30天内达到99.99%的可靠性目标意味着只能允许4.32分钟的停机时间；而99.999%的目标则只允许26秒的停机时间。

#### 共享指标的重要性

如果没有共享指标和警报，即使你的系统达到了99.99%的阈值，客户的SLO也可能无法满足。因为从客户的角度来看，他们还需要考虑警报、调查和支持请求的时间。这些额外的时间可能会导致他们的错误预算迅速耗尽。因此，你需要超越自身的SLA，与关键客户合作，确保整个系统的可靠性。

#### 合作与改进

为了实现这一目标，你应该：

- **查看流量**并与产品经理沟通，了解关键客户。
- **决定共享指标**，确保所有相关方都理解SLO的含义。
- **建立轮值响应机制**，确保快速响应支持请求。
- **制定共享通信和事件响应程序**，以便对关键客户的问题采用一致的响应模式。

当拜访重要客户时，应共同审查测量指标和服务需求，确定改进措施，并共同服务于客户的客户。这包括承诺立即发出警报，为共享集成测试和生产/试错环境提供远程访问机制。

#### SRE的文化转变

SRE不仅仅是雇佣一些工程师来执行特定任务，而是需要整个公司进行文化转变。这涉及如何确定优先级、规划、决策、设计和构建系统，以及团队之间的互动。成功的SRE需要全公司的支持，特别是高层管理层的支持。只有这样，才能实现可持续的工作平衡，避免技术债务和运维负担。

#### 反模式：修复运维团队

认为通过雇佣SRE工程师就能解决所有问题是一种误解。SRE不是简单的替换运维团队，而是一种新的工作方式。它需要从根本上重新组织业务流程，以提高整体的生产服务质量。如果缺乏全公司的支持，SRE的效果将大打折扣。

#### 结论

总之，SRE的成功依赖于持续的学习和改进。我们需要不断审视自己和同行遇到的问题，并从中吸取教训。建立一个反模式存储库，分享和讨论潜在的新模式或变体，可以帮助我们避免重复相同的错误。如果你有任何想法或建议，请随时联系我，我们可以一起推动这个领域的进步。

---

### 编者介绍

Blake Bisset 在16岁时开始了他的第一份合法技术工作。他创立了三家初创公司（一家生物化学公司、一家制药公司，还有一家是因一群孩子想在网上看电影而成立的）。之后，他在YouTube和Chrome担任SRE经理，并连续多年被评为最佳故障报告撰写者。目前，他是USENIX SRECon计划委员会成员，并担任Dropbox的可靠性工程主管。