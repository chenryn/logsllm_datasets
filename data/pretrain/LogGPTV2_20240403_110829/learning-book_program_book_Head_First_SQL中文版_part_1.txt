# OCR Output
## Page 1
O'ReillyMedia，Inc.介绍
为了满足读者对网络和软件技术知识的迫切需求，世界著名计算机图书出版机构
O'ReillyMedia，Inc.授权东南大学出版社，翻译出版一批该公司久负盛名的英文经
典技术专著。
O'ReillyMedia.Inc.是世界上在Unix、X、Internet和其他开放系统图书领域具有领
导地位的出版公司，同时也是联机出版的先锋。
从最畅销的《TheWholeInternetUser'sGuide&Catalog》（被纽约公共图书馆评为
20世纪最重要的50本书之一)到GNN（最早的Internet门户和商业网站），再到WebSite
（第一个桌面PC的Web服务器软件），O'ReillyMedia,Inc.一直处于Internet发展的
最前沿。
本书都一版再版。与大多数计算机图书出版商相比，O'ReillyMedia，Inc.具有深厚
的计算机专业背景，这使得O'ReillyMedia，Inc.形成了一个与其他出版商然不同
的出版方针。O'ReillyMedia，Inc.所有的编辑人员以前都是程序员，或者是顶尖级
的技术专家。O'ReillyMedia，Inc.还有许多固定的作者群体一一他们本身是相关领
域的技术专家、咨询专家，而现在编写著作，O'ReillyMedia，Inc.依靠他们及时地
推出图书。因为O'ReillyMedia，Inc.紧密地与计算机业界联系着，所以O'Reilly
Media，Inc.知道市场上真正需要什么图书。
---
## Page 2
深入浅出SQL
如果有一本书能教会我SQL，同时不会
让我想远远地躲到没有数据库的无人荒岛
上那该有多好！喉！或许这只是我的幻
想吧...·…
LymnBeighley著
OReillyTaiwan公司编译
O'REILLY?
Beijing·Cambridge·Koln·Sebastopol·Taipei·Tokyo
O'ReillyMedia,Inc.授权东南大学出版社出版
东南大学出版社
---
## Page 3
作者
《深入浅出SQL》的作者
SQL？这本书不是应
该称为《深入浅出
SQRL》吗？
个
LynnBeighley
Lynn是位困在技术撰稿人身体里的小说家。当她发现
技术书籍可以带来实际收人后，终于慢慢地学着接受并
享受这方面的工作。
重返校园取得计算机科学硕士学位后，她为NRL和
LNAL工作。然后她发现了Flash的存在，并写出她的第一
本畅销书。
Lynn的富外风光。
Lynn选择移居硅谷的时机实在不太好，没过多久网络泡沫
就发生了。接下来的儿年，她在Yahoo！工作，同时也写了
几本书并培训课程。最后她决定转到创意写作行业，因而搬
到纽约，取得创意写作的MFA学位。
对着满屋子的教授和同学，她的HeadFirst风格的论文获得
了极高的评价，她拿到了学位，也完成了《深入浅出SQL》，
等不及要投人下一本书的创作中去。
Lynn喜欢旅游、烹饪、为完全不认识的人编织详细的背景
故事。对了，她还有点小害羞。
vii
---
## Page 4
如何使用本书
序
真不敢相信有人把SQL
书做成这样！
本章回答了热门话题：
“为什么要把这些东西放进SQL书籍里？”
XXV
---
## Page 5
如何使用本书
这本书适合谁？
请回答下列问题：
①你在安装了RDBMS（例如Oracle、MSSQL、
MySQL）的机器上有访问权限吗？还是你有一台可
以安装MySQL或其他RDBMS的机器？
我们将以更容易理解及实际应用
的方式协助大家学习SQL的概念和
②想要学习、了解、牢记如何创建表、数据库并使用
语法，差不多就是我们需要使用
最新标准设计查询吗？
SQL的方式。
③比较喜欢刺激的晚宴对话，而不喜欢枯燥乏味的学
术演讲？
如果上述问题你都回答“是”，这本书就是为你而写。
谁或许应该远离这本书？
如果你想回顾一下从前学过的
请回答下列问题：
SQL.或是一直都不算很了解的
规范化、一对多关联、左外联接
①你已经完全熟悉SQL基础语法，正在寻找帮助你更<
等问题，本书对你也是有帮助的。
好设计数据库的理论吗？
②你已经是一位很有经验的SQL设计师，正在寻找SQL
的参考书籍吗？
③你害怕尝试不同的事物吗？宁可接受根管治疗（抽
神经）也不愿意混搭格子衫与条纹裤？你认为技术
书籍若为SQL概念赋予人性则不够认真严肃吗？
如果上述问题你都能回答“是”，那这本书就不符合你的期望。
【销售部门补充：本书递合所有有信用卡的人。]
xxvi
序
---
## Page 6
序
我们知道你在想什么。
“这怎么可能是一本正经的SQL书籍？”
“这一堆图是干什么的？”
“这样真能让我学到东西吗？”
你的脑集认为
这才重要。
我们也知道你的脑袋在想什么。
你的脑袋渴望新奇的事物，它总是在搜寻、扫描、期待着不寻常的事物。
人类的大脑生来如此，正是这样的特质帮助我们常保活力，在竞争激
烈的生命树上存活至今。
那么，对于那些每天都要面对的一成不变、平淡无奇的事物，你
的脑袋又作何反应？它会尽量阻止这些事去干扰大脑的真正工作
一记录真正重要的事。大脑不会浪费脑细胞去保存无聊的事，
它们绝对无法通对“这显然不重要”的过滤器。
你的脑袋究竞怎样知道什么是重要的？假设你去郊游，突然有只老
虎跳到你的眼前，你的脑袋和身体会做出怎样的反应？
好根了！只有
神经紧绷、情绪激动、肾上腺素激增！
560多页枯燥，
无聊、乏味的内容。
这就是脑袋“知道”的方式…
这绝对重要！别忘了！
你的脑袋认为
这不值得保存。
但是，想象一下你在家里或图书馆。这里安全、温暖而且没有老
虎出没。你正在读书、为考试做准备或者研究某个技术难题
你的老板认为需要1周，最多10天就能完成的难题。
但是有个问题。你的脑袋正试图帮忙，它试着确保这件显然不重
要的事不会占用有限的资源。毕竞，资源最好用来保存真正的大
事，如遇到老虎、火灾的危险或绝对不应该穿短裤玩滑雪板。
而且也没有简单的方法可以告诉你的脑袋：“脑袋呀！拜托你
啊……不管这本书多么枯燥，多么让我昏昏欲睡，还是请你把
这些内容全都记住。”
当前位置
!!AXX
---
## Page 7
如何使用本书
我们将“HeadFirst”的读者视为学习者。
那么，该怎么学习呢？首先，你必须理解它，然后确定不会忘记它。我们不会用填鸭的
方式来对待你。根据认知科学、神经生物学、教育心理学最新的研究，学习过程所需要
的绝对不只是页面上的文字。我们知道如何开启你的脑袋。
HeadFirst学习守则：
视觉化。图像远比文字更容易记忆，让学习更有效率
（可让知识的回想和转换的效率提升89%）。图像也能
让事情更容易理解，将文字放进或靠近相关联的图像
中，而不是把文字放在图像下或后一页，可让学习者在
解决相关内容的问题时达到事半功倍的效果。
你问我哪显好乐？问我保
使用对话方式与拟人化风格。最新的研究
个小且好现响？得凳得我
发现，比起正式的叙述方式，改以第一人称
好玩响7
的角度、谈话式风格直接与读者对话，学员
课后测试成绩的提升可达40%。用故事代替论述，以轻松的
口语取代正式的演说，别太严肃。你觉得晚宴伴侣的耳边细语和课堂上的演说，
哪一种更能引起你的注意力？
让学习者更深入地思考：换句话说，除非你主动刺激你的神经，否则大脑就不
会有所作为。读者必须被激发，亲自参与，产生好奇心，自发去解决问题，作
出结论，最后产生新知识。为达此目的，你必须接受挑战、勤做练习、用问题诱导思想、
用活动活化左右脑并触发多重的感知。
引起一并保持一读者的注意力。我们都有这样的经验：“我真的很想学会这个东西，
但是还没翻过第一页就已经昏昏欲睡了。”你的脑袋只会注意到特殊、有趣、怪异、引
人注目以及超乎预期的东西。新颖、困难、技术主题学起来未
必枯燥乏味，如果不觉得无聊，你的大脑就会学得快得
多。
触动心弦。现在，我们知道记忆能力大大取决于情绪。
你会记得自己在平的事，当你心有所感时，你就会记住。不！我不是
在说小狗和小主人之间心有灵犀的故事，而是在说当你解出迷题、
学会别人觉得困难的东西或发现自己比工程部的Bob更懂技术时
所产生的惊讶、好奇、有趣以及“我好棒”这类的情绪与感觉。
xxvii
序
---
## Page 8
序
元认知：想一想如何思考 (译注1)
如果你真的想学习，想学得更快、更深入，那么请注意你是如何集中注意力，
想想如何思考，学学如何学习。
真不知该如何骗
大多数人在成长过程中没有修过元认知或学习理论的课程，我们希望学习，却
我的大脑记住这些
东西....
又不知道如何学习。
我们假设大家拿着这本书是为了学习SQL，而且可能不想花费太多时间。因为
你可能很快就要试验SQL的操作，你必须记住读过的东西。为此目的，你必须
先理解它。想要从本书（或任何书籍与学习经验）得到最多的知识，就请好好
照料你的大脑，让你的大脑好好注意这些内容。
秘决就在于让你的大脑认为你正在学习的新知识确实很重要，与
你的生死存亡有关，就像跳到你面前的食人虎。否则，你就会
不断陷入与大脑的苦战，老是记不住新知识。
那么，该如何让大脑把SQL视为一只饥饿的大老虎？
有既慢且繁琐的方法，也有快且有效的方法。慢的方法就是多
读几次。你很清楚地知道勤能补拙，即使再乏味的知识，你
也能够学会并记住。只要重复的次数够多，你的大脑就会
说：“这虽然感觉不怎么重要，但他却一而再，再而三地苦读这部
分，所以我想这应该是重要的吧！”
快的方法则是想办法增加大脑活动，特别是不同类型的大脑活动。前页出现的素材
是解决办法的一种，已经被证实有助于大脑运作。例如，研究显示将文字放在它所
描述的图片内（而不是置于页面内其他地方、如图解或正文），有助于大脑将两者
联系起来，可以触发更多的神经元。越多的神经活动=大脑越容易把这部分内容视
为值得注意的信息，也越可能将它们记录下来。
对话式风格也很有帮助，因为在意识到自已身处对话中时，人们会付出更多的关注，
因为他们必须竖起耳朵，注意整个对话的进行，跟上双方的谈话内容。神奇的是，
式又枯燥，你的大脑会以为正在聆听一场演讲，自己只是一个被动的听众、根本不
需要保持清醒。
然而，图片和对话式风格只不过是一个开端。
译注1：元认知、metacognition，教育心理学上的专有名
词。管理学习和认知的过程，提高学习的效率。
当前位置xxix
---
## Page 9
如何使用本书
这是我们的做法：
我们使用图片，因为你的大脑对视觉化效果比较有感觉，而非文字。对你的大脑而
言，一张图片胜过千言万语。当文字和图片需要合作时，我们将文字嵌人图片中，因
为文字若不是在图解或正文中的某处，而是位于相关图片中，大脑会运作得更有效率。
我们重复表现相同的内容，以不同的表现方式、不同的媒介、多重的感知叙述相同的
事物。之所以这么做，是为了增加机会将该内容烙印在大脑的不同区域。
我们以超平预期的方式使用概念和图，因为大脑遇到新鲜有趣的事，波长才会同调。
我们使用的图片与概念或多或少都具有情绪内容，也是因为大脑会注意情绪带来的化
toys.toy
boys .bo
学反应。对于让我们有感觉的事物，自然较容易记住，即使那些感觉不过是幽默、惊
toy
Aoq
hulo hoop
Dove
讶、有趣等。
aqog
我们使用拟人化、对话式的风格，因为当大脑相信你处于对话过程中，而不是被动地
聆听演说时会付出更多注意力，即使你的交谈对象是一本书。也就是说，虽然你是
在“阅读”对话，但大脑还是会这么做。
我们用了超过80个的活动，因为当你做事情时的学习效果会比读东西时的效果更佳。
我们让习题维持在具有挑战性，但又可以完成的程度，因为大多数人喜欢接受挑战。
我们使用了多种学习风格，因为你可能比较喜欢按部就班，有些人则喜欢先了解大方
向，还有一些人则喜欢直接看程序代码范例。然而，不管你是哪一种人，都能受益于
本书以不同方式表现相同内容的手法。
本书的设计同时考虑到左右脑，因为大脑中有越多脑细胞参与，你就越容易学会并记
住这些东西，而且能保持更长时间的专注。使用一边的大脑，往往意味着另一边的大
脑有机会休息，你就可以学得更久且更有效率。
复习要点
我们也会用故事和练习呈现多个角度的看法，因为当大脑被迫进行评估或判断时会学
习得更深入。
书中也有相当多的挑战习题，通过问题，而答案不见得都很直接。我们的用意是让大
脑努力工作，才能学得更多、记得更牢。你想想看，只是看别人运动，你有办法达成
帮自己塑身的效果吗？同时，我们尽量确保大脑往正确的方向努力，以免浪费大量脑
力用于处理难以理解的范例或难以剖析、充满行话、咬文嚼字的论述。
我们还会使用人物。在故事、图片和范例中，处处都是人物。因为你也是人！你的大
脑对于人会比对事物更加注意。
XXX序
---
## Page 10
让你的大脑顺从你的方法
序
好吧，该做的我们都做了，剩下的就靠你了。这里介绍一些技
巧，但只是一个开端，你应该听从你的大脑，看看哪些对你的大
脑有效，哪些无效。试试看吧！
沿虑线剪下.用HelloKitty磁铁
贴在冰箱上。
①慢慢来，理解越多，需要强记的就越少。
说出来，大声说出来。
别只顾着翻页，记得停下来，好好思考。书中提
说话驱动大脑的不同部位。如果你需要理解某
出问题时，别完全不思考就直接看答案。想象有
项事物或试图增强记忆力，请大声说出来。大
另外一个人面对面地向你提问，如果能够迫使大
声地解释给别人听，效果更佳。你会学得更快，
脑思考得更深入，你就有机会理解并记得更多的
甚至触发许多新的想法，这是光凭读书做不到
知识。
的。
②勤做练习，写下你的心得笔记。
倾听大脑的声音。
我们在书中安排了习题，如果你只看不做，就好
注意你的大脑是否负荷过重，如果你发现自己
像看着别人做你想做的塑身运动，那是不会有效
开始漫不经心，或者过目即忘，就到了应该休
果的。使用铅笔作答。大量证据显示，学习中的
息的时候。当你错过某些重点时，放慢脚步，
实质活动可增强学习的效果。
否则你将失去更多。
③认真阅读“没有蠢问题”单元。
⑧用心感受！
详细阅读所有的“没有蠢问题”。这可不是无关
必须让脑袋知道这一切都很重要。试着融入故
紧要的说明，而是核心内容的一部分！千万别略
事情境，为照片加上自己的说明，即使抱怨笑
过了。
话太冷，都比毫无感觉要好，任何感觉对学习
效果都有帮助。
④把阅读本书作为睡前最后一件事，或者至少当作
睡前最后一件具有挑战的事。
9动手设计！
学习中的一部分反应发生在放下书本之后（特别
将所学内容应用到你的日常工作或项目决策中。
是转化为长期记忆的过程）。你的大脑需要进一
反正就是尽量运用知识获取本书习题与活动之
步处理新知识的时间。如果你在处理期间塞进其
外的实践经验。你需要一个有待解决的难题
他新知识，某些刚学过的东西就会遗失。
找一个能够运用本书技术的问题，试着解决它。
喝水，多喝水。
你的大脑需要浸泡在充分的液体内（译注2）才
能运作良好，脱水（往往发生在感觉口渴之前）
会减缓认知功能。
译注2：医学报告指出，大脑的80%由水组成。
当前位置
xxxi
---
## Page 11
如何使用本书
读我
这是一段学习经验，而不是一本参考书。所有阻碍学习的东西，我们都会刻意排除。
第一次阅读时，你必须从头开始，因为本书对读者的知识背景做了一些假设。
我们从SQL基础语法开始，然后是SQL数据库设计概念，接下来是高级
查询。
虽然说创建设计良好的数据库和数据表的确很重要，不过在到达这个境界前，我们需
要了解SQL的语法。所以我们先提供大家可以动手尝试的SQL语句。你可以用这种
方式以SQL做出成品，这样才有兴趣进一步接触SQL。接触较多后，我们再引人良
好的数据库设计实践。届时，各位已经很熟悉语法的运用，就可以专心地学习新概
念。
我们并未涉及每一个SQL语句、函数或关键字。
虽然我们可以非常详细地涵盖所有SQL语句、函数和关键字，但是各位应该更希望
拿到一本重量还算可以接受，但又能从中学到重要语句、函数、关键字的书籍吧。我
们收录使用SQL时95%常用的必备知识。当你理解本书内容后，可以带着自信寻求
高深查询所需要的深奥函数。
我们并未加入RDBMS的每一种特色。
市面上有 Standard SQL、MySQL、Oracle、MS SQLServer、PostgreSQL、DB2等众
多RDBMS系统，如果本书试图囊括每个指令在各种系统上的变形，那么页数绝不只
现在这么多。我们热爱珍贵的树木，所以只利用MySQL表达StandardSQL语法。本
书大多数范例均可用MySQL运行，多半也能在前面提到的RDBMS上通行无阻。有
需要时再购买RDBMS的专属参考书吧！
xxxii
序
---
## Page 12
不要略过任何活动。
习题与活动并非附加的装饰品，而是本书核心内容的一部分。有些可以帮助记忆，
有些可以帮助理解，还有些可以帮助应用。所以，请不要略过这些练习。填字游戏
是唯一非必要的部分，但是它们提供了不同情境来帮助大脑回顾学过的关键字与术
语，中文版虽然翻译了提示，但答案还是英文哦。
重复是刻意且有必要的。
我们希望“HeadFirst”系列书籍能让你真正学到东西，希望你读完此书之后能够
记住你所读过的内容。大部分参考用书的目标并不包括知识记忆的保存和触发，但
本书的重点是学习，所以重要内容会一再出现以加深你的印象。
程序范例尽量精简。
我们的读者告诉我们，不希望看到书中列出200行的程序代码，而其中和主题有关
的关键程序代码却只有两行。本书尽量把程序代码缩短，让学习的过程清晰简单。
不要期待所有的程序代码都很牢靠或完整，毕竞我们的程序代码是辅助学习之用，
不见得一定功能完整。
我们把很多指令放在网站上以方便大家复制及粘贴到数据库软件或终端上。网址是
http://www.headfirstlabs.com/books/hfsql/。
“动动脑”习题没有答案。
启发的学习经验在于自我判断答案是否正确以及答案正确的时机。在某些习题中，
我们会提供暗示来为你指引正确的方向。
当前位置》Xxxi
---
## Page 13
审阅团队
技术审阅团队
ShelleyRheams
JamieHenderson
Cary Collett
Steve Milano
LuAnn Mazza
狗狗Chaucei也有
下
不少贡献。
惊天动地的审阅团队：
CaryCollett15年来呆过新创企业、政府研究单位，“Shelley”Moira MichelleRheams，MEd、MCP、
目前服务于某个财政部门并审阅本书，他打算有空时MCSE的讲师，并于新奥尔良WestBand学院的
要好好地享受工作以外的生活乐趣，像烹饪、登山健Delgado社区大学执行早期儿童教育计划。她现在乐于
行、阅读以及陪狗玩。
配合Katrina飓风灾后重建的需要，把课程放到网上，
我们特别感谢她从满载的行程中抽出时间配合我们。
人在伊利诺斯州的LuAnnMazza，从极度繁忙的专业
软件设计与分析工作中神奇地抽出时间详细审阅本书，JamieHenderson是位有着紫色头发的资深系统构造
我们非常高兴听到她现在有空享受骑自行车、摄影、师，她的休息时间都分给了大提琴、阅读、电子游戏
玩电脑、听音乐与打网球等休闲爱好。
与DVD。
如果SteveMilano并未因为工作而埋首于十几种不同审阅团队是本书的程序代码与习题能够使用的原因，
语言里，也没有为《深人浅出SQL》贡献他的一流审也是让大家在读完本书后成为一名自信SQL设计师的
阅功力，甚至不是跟摇滚乐团OnionFlavoredRings一重要推手。他们对细节的重视也让我们的文字不会可
起在没有空调的地下室练习，那他应该是在家陪他的爱过头、不会太过沾沾自喜，有时候甚至还阻止我们
爱猫Ralph和Squeak。
的冷笑话讲过头。
xxxiv
序
---
## Page 14
序
致谢
给我的编辑：
首先，我要谢谢我的编辑BretMcLaughlin，他不仅指导了一本书，
而且指导我这个新手写出两本“HeadFirst”系列书籍。Brett不只是
我的编辑，他更是试金石与精神导师的综合体，如果没有他的指导、
支持与关心，我绝对写不完本书。除了推动我参加一开始的作家甄
选，Brett还能够觉得我的超级冷笑话可以令人发笑，让这段时间成
为我体验过的最佳写作过程。他还提供了许多建议与提示，也给了
我非常多的指导。感谢你，Bretu！
Brett McLaughlin
编辑CatherineNolan最近得了溃疡，都是我在编辑过程快结
束前发生的意外所害。因为有她，这本书才没有拖到2008年，
或许她就是这本书存在的原因。截稿日期的控管就像把小猫抓
在手上，Catherine总是能阻止小猫落地或被小猫抓伤。我非常
需要进度表，而Catherine是我遇过的最佳进度安排管理人，或
许我也是她遇过的最不会安排时间的人吧！我衷心希望她的下
一个项目能顺利一点。
Catherine Nolan
给O'Reilly小组：
设计编辑LouiseBarr既是很好相处的朋友，也是非常出色的图片设计师，她总是有
办法把我胡思乱想的想法转化为惊艳不凡的图片，让难懂的概念变得清晰易懂。所有
卓越的版面设计都要归功于她，我相信各位也会想感谢她的设计。
如果没有技术审阅的过程，我们就会生出一本错误百出的书，编辑
SandersKleinfeld在这方面有很大贡献。他还指出一些非常需要补上“桥梁”的概
念深谷，这远远超出他的职责了。谢谢你，Sanders！
最后，我想谢谢KathySierra和BertBates，他们开创了这么美好的系列书籍，让
我得以参加最能挑战智力的HeadFirst新手培训。没有那三天的培训，我根本难以想
象“HeadFirst”系列书籍多么难以创作。还有，Bert提出的最终编辑建议一针见血，大幅提
升了这本书的品质。
Lou Barr
当前位置
XXXV
---
## Page 15
目录
目录（摘要版）
序
xXV
数据和表：保存所有东西的地方
1
2
SELECT语句：取得精美包装里的数据
53
3
DELETE和UPDATE：改变是件好事
119
4
聪明的表设计：为什么要规范化？
159
5
ALTER：改写历史
197
6
SELECT进阶：以新视角看你的数据
235
7
多张表的数据库设计：拓展你的表
281
8
联接与多张表的操作：不能单独存在吗？
343
9
子查询：查询中的查询
379
10
外联接、自联接与联合：新策略
417
约束、视图与事务：人多手杂，数据库受不了
455
12
安全性：保护你的资产
493
目录（具体版）
序
让大脑SQL一下。当我们试着学习新事物时，我们的大脑会试着帮
忙一一帮我们忘掉刚刚学来的内容。大脑是这么想的：“记忆空间这么
宝贵，最好留给更重要的内容，例如该避开的动物或穿短裤玩滑雪板是
否适合等问题。”究竞应该如何欺骗大脑，让他觉得了解SQL关乎生死
存亡呢？
这本书适合谁？
xxvi
我们知道你在想什么
xxvii
元认知
xxix
让你的大脑顺从你的方法