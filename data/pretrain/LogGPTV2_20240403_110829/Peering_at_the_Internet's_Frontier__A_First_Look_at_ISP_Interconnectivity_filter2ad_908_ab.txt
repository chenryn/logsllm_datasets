3.2 The Cause of High Latency: Circuitous Paths
We deﬁne a circuitous path as one that traverses a geographic location that is far from
the path created by taking the geographically shortest path between two endpoints.
There are two common reasons for circuitous paths: (1) the ASes that provide con-
nectivity along the Internet path between two endpoints are not physically present in
a local Internet exchange point (IXP) that is close to the geographic shortest path; or
(2) the ASes that provide connectivity are present at a geographically proximal IXP but
do not have business relationships with one another or do not prefer that route.
The presence of a local IXP facilitates local peering between multiple ISPs and pre-
vents local trafﬁc from leaving the region. The existence of a local IXP is not enough
to guarantee a low-latency path: local ISPs must also choose to connect at the local
IXPs. When local ISPs do not connect at a local IXP, the resulting paths can be cir-
cuitous. For example, Liquid Telecom (AS 30844) connects at JINX and has a presence
in Nairobi [8], but does not peer at KIXP. As a result, users in South Africa must reach
must reach many Kenyan networks via LINX in London, signiﬁcantly increasing the
latency of these paths.
Observation: Local IXPs are often not present on local Internet paths. We analyzed
the traceroutes between BISmark routers in South Africa and Measurement Lab server
locations in Tunisia, Kenya, and South Africa to quantify prevalence of different IXPs
Peering at the Internet’s Frontier
209
(a) Johannesburg
(b) Nairobi
(c) Tunis
Fig. 4. Distribution of IXP prevalence for the paths from BISmark nodes in South Africa to M-
Lab servers in three different cities
along Internet paths between end points within Africa. We conﬁrmed that the routers
at the IXPs responded to our traceroute probes; we used these responses to identify an
IXP’s presence on a particular path. We deﬁne IXP prevalence, which quantiﬁes the
pervasiveness of an IXP for various routing paths between the two end hosts. For a pair
of end hosts with N observed routing paths, IXP prevalence for the IXP I, PI , is deﬁned
i=1 xiPi, ∀xi ∈ {0, 1}, where Pi is the prevalence of the ith routing path
as: PI =
and xi = 1 indicates IXP I is present for this route.
(cid:2)N
Local IXPs in South Africa keep local trafﬁc within South Africa. In contrast, lo-
cal IXPs are much less prevalent along paths between South Africa and other African
countries. Figure 4 shows the distribution of IXP prevalence for paths between BISmark
routers in South Africa and the three Measurement Lab locations in Africa. Figure 4a
shows the IXP prevalence distribution for the Johannesburg M-Lab server; because most
BISmark routers are located in South Africa, we observe most of the trafﬁc to Johannes-
burg traverses IXPs in Johannesburg (JINX) and Cape Town (CINX). Figure 4b, on the
other hand, shows a completely different story for paths between the BISmark routers
in South Africa and the M-Lab server in Nairobi. The results show a lack of peering at
local IXPs and we also did not observe any private peering. Interestingly, KIXP is not
at all prevalent for these paths. Figure 4c shows that paths to the M-Lab server in Tunis
do not traverse local IXPs in either Tunisia or South Africa.
Cause #1: ISPs do not connect to local IXPs. Sometimes, local ISPs do not connect at
the local IXP at all. For example, we observed that Liquid Telecom (AS 30844) connects
at JINX and has a ﬁber presence in Nairobi [8], but for some reason decides not to peer
at KIXP, thus causing users in South Africa to take circuitous paths to destinations in
Kenya. ISPs in Africa often prefer to interconnect at European exchange points such
as LINX because of economy of scale. Most ISPs they need to peer with are present at
LINX, not at the local exchanges, so connectivity at LINX is a requirement. Because
African ISPs typically all connect at LINX anyhow, connecting at local IXPs simply
represents an additional cost with limited additional beneﬁt. Further, the absence of IP
trafﬁc between African countries, such as between South Africa and Kenya, reduces
210
A. Gupta et al.
(a) Johannesburg (JINX)
(b) Nairobi (KIXP)
Fig. 5. Peering matrices for the ASes at two African IXPs. White squares represent the presence
of peering between an local AS pair, which in many cases we can observe at the IXP itself using
traceroute data. Black squares represent pairs of ASes for which we do not observe peering.
the incentive of ISPs to connect locally. Deploying a cache server in one country to
serve the users in another might increase trafﬁc local to the African continent, but such
a scenario introduces a catch-22: A service provider such as Google cannot improve
performance for South African users by deploying a cache server in Kenya (or vice
versa) until the local interconnectivity improves.
Cause #2: ISPs are present at the local IXP, but do not peer. In other cases, ISPs may
be present at the same local IXP but may choose not to peer with one another. To study
this phenomenon, we analyzed the peering matrix of several IXPs, which shows the
IXP participants that peer with one another. We constructed peering matrices for the
major IXPs in South Africa and Kenya (JINX and KIXP, respectively) using methods
from previous work [2, 7]. We used both PeeringDB and the website of each IXP to
enumerate the IXP participants. We then analyzed the BGP routing tables as described
in Section 2.1 to infer peering relationships at each IXP.
Figure 5 shows the peering matrices for JINX and KIXP. We mapped 51 and 27 ASes
for JINX and KIXP, respectively, but the ﬁgure includes only the ASes for which we
could conﬁrm at least one peering link for these peering matrices (30 ASes at JINX
and 22 ASes at KIXP). Figure 5 assumes that if we observe a peering in any path
between local ASes that the peering exists at the local IXP, even when we do not always
directly observe the peering at the IXP itself. Our data sometimes prevents us from
verifying the precise location of the peering link. When we use BGP AS paths, we
cannot locate the peering link; we can only observe the existence of peering. In the case
of our traceroute measurements, occasionally we see a direct peering without address
space from the IXP, but such an observation does not mean a peering at the IXP does not
exist. Peering may exist at the IXP but be numbered from one of the peer AS’s address
ranges, or the path through the IXP may be less preferred than another local private
peering. We assumed that a relationship between two local ASes implies a peering
relationship at the corresponding local IXP. Note that inferring peering links at an IXP
is a hard problem [2] and even after combining multiple data sources, we were not able
to infer all the peering links at these IXPs.
Peering at the Internet’s Frontier
211
(a) Adding more Links
(b) Cache servers in local ISPs (c) Adding more cache nodes
Fig. 6. Performance beneﬁts associated with adding additional peering links, placing caching
servers in local ISPs, and adding more cache nodes in a region
Figure 5 suggests that the peering matrices at each of these IXPs may be sparse. Even
when local ISPs are present at an IXP, they do not always peer with one another. When
local ISPs do not peer with one another at these exchanges, paths between the local ISPs
may be circuitous. Speciﬁc examples at KIXP are telling: AS 36914 (KENET) is present
at KIXP but we only observed its peering with Ubuntunet and Jamii Telecom. Thus,
most paths between KENET and South Africa take a circuitous path through LINX,
even though several transit providers at KIXP have direct peering relationships with
providers in South Africa (e.g., AS 12556, Internet Solutions, and AS 16637, MTN, are
both present at KIXP but do not peer with KENET).
4 Reducing Latencies to Popular Internet Sites and Services
We now evaluate the expected performance improvements that clients in Africa would
experience as a result of increased peering at major local ISPs. We also evaluate the rel-
ative beneﬁts of adding links versus deploying additional local cache nodes for improv-
ing the performance of distributed services using the recent Google cache expansion.
4.1 Add More Peering Links
We quantify the performance beneﬁts of increasing peering at local IXPs to avoid cir-
cuitous routes between local ASes. We assume that any circuitous path to Europe could
be avoided if the path includes two ASes in Africa that are both present at either JINX
or KIXP. In these cases, we replace the delay associated with traversing a path through
Europe with the propagation delay between JINX and KIXP, which is about 30 mil-
liseconds. Figure 6a shows the distribution of existing latencies between South Africa
and KIXP, and how that distribution would change if these circuitous paths could be
avoided. Adding peering links between the ASes that are already present at these local
exchanges can signiﬁcantly improve performance.
4.2 Add More Local Caches
Figure 6b shows the median latencies (from measurements issued every ten minutes
over three days) from BISmark routers in South Africa to two Google cache nodes, one
212
A. Gupta et al.
in Kenya hosted by a peer of Internet Solutions, and one in Uganda hosted by MTN.
Routers in an AS that hosts a cache node or in an AS that peers with an AS that hosts
a cache node see low latency; on the other hand routers that are geographically nearby
but not in the AS or one of its peers see signiﬁcantly higher latencies (typically, more
than 300 ms round-trip times). We expect that clients in a customer of an AS hosting a
cache node would also see low latencies, but we lack such a vantage point.
This result demonstrates that Internet services such as Google can achieve signiﬁ-
cantly better performance by placing caches to serve local users in the caches’ customer
cones (or, in some cases, in their peers), even if the clients are in a different country from
the caches. Performance from BISmark nodes that are geographically nearby but lack
direct paths typically leave the continent and must traverse exchange points in Europe
(e.g., LINX). Even when direct paths do exist, the performance beneﬁts may depend
on cache placement, since caches typically serve only over customer links and not to
providers and peers. Thus, in the absence of adequate interconnectivity, adding cache
servers may not improve latency performance for local users who are outside the cus-
tomer cone of any Google cache. If, on the other hand, a service provider adds caches
and peers with local ISPs, latencies for local users can improve signiﬁcantly, even if the
service provider places only a single cache in a local ISP. Figure 6c shows the effects
of adding additional Google cache nodes in Kenya (which we simulated by taking the
minimum latency between a client among k Google cache nodes in Kenya), with and
without additional local peering links. This result suggests that content providers should
encourage local ISPs to connect at local exchanges, which might ultimately reduce the
number of cache server deployments required to achieve a particular level of service.
5 Related Work
A recent study on “boomerang routing” [5] observed that many paths between ISPs in
Canada take indirect paths through the United States. We observe similar phenomena
for Internet paths that are located in Africa, with the exception that the boomerang is
to Europe, as opposed to the United States (and the concern is performance, as op-
posed to security). Other recent work has studied the internal anatomy and intercon-
nectivity of IXPs [1, 2] but do not share our focus on performance or connectivity in
Africa. Other work has highlighted the importance of Internet exchange points for the
development of Internet connectivity [4]. Policy work has highlighted the importance
of self-organization to improve the efﬁciency of peering at IXPs in developing-world
contexts [10], a behavior that we believe will become increasingly important as peering
and interconnection increases in Africa in the coming years.
6 Conclusion
We have taken a ﬁrst look at Internet paths between locations in Africa, focusing on
paths between South Africa, Kenya, and Tunisia. Although this initial study does not
represent connectivity across an entire continent, it highlights speciﬁc phenomena that
deserve attention and further study. First, a signiﬁcant fraction of local Internet paths in
Peering at the Internet’s Frontier
213
Africa detour through Europe, resulting in latency penalties of several hundred millisec-
onds. For example, 66.8% of paths between BISmark routers and Google cache servers
in Africa leave the continent. (Latency penalties to other global regions such as South
America are also high.) Second, we ﬁnd that local ISPs are often either (1) not present
at the local exchanges; or (2) do not peer with one another at the local exchanges.
ISPs may or may not connect at speciﬁc IXPs or peer with one another at a given
local IXP for many reasons. These reasons may be economic and political as much
as technical, and this issue deserves further study. In contrast to ISPs in developed
regions, ISPs in Africa must attain “backhaul” connectivity to large, distant IXPs in
Europe, where they can achieve economies of scale with connectivity to other ISPs.
Once an ISP connects to Internet destinations via Europe, it has less incentive to connect
to local IXPs, which impose additional cost but no signiﬁcant gains, particularly for
ISPs where much trafﬁc is remote. Some disincentives for local peering may relate
to the absence of large volumes of trafﬁc between local ISPs, yet we expect that the
continued expansion of cache nodes into these regions (e.g., from Google) may change
this dynamic. In turn, the deployment of any single cache node may garner much more
signiﬁcant performance beneﬁts in the presence of richer local peering arrangements.
As more cache nodes are deployed and more trafﬁc could remain local, the peering
ecosystem may rapidly evolve to include more local peering links.
Acknowledgments. This work was partially supported by NSF Awards CNS-1059350
and CNS-1162088, and a Google Focused Research Award.
References
1. Ager, B., Chatzis, N., Feldmann, A., Sarrar, N., Uhlig, S., Willinger, W.: Anatomy of a Large
European IXP. In: Proc. ACM SIGCOMM (2012)
2. Augustin, B., Krishnamurthy, B., Willinger, W.: IXPs: Mapped? In: Proceedings of the 9th
ACM SIGCOMM Internet Measurement Conference, IMC 2009, pp. 336–349. ACM, New
York (2009)
3. Calder, M., Fan, X., Hu, Z., Katz-Bassett, E., Heidemann, J., Govindan, R.: Mapping the
Expansion of Google’s Serving Infrastructure. In: Proceedings of the ACM Internet Mea-
surement Conference, IMC 2013 (October 2013)
4. Chatzis, N., Smaragdakis, G., Feldmann, A.: On the importance of Internet eXchange Points
for Today’s Internet Ecosystem. CoRR, abs/1307.5264 (2013)
5. Clement, A., Obar, J.: Internet Boomerang Routing: Surveillance, Privacy and Network
Sovereignty in a North American Context (2013)
6. Github: Peering-Africa, https://github.com/agupta13/Peering-Africa
7. He, Y., Siganos, G., Faloutsos, M., Krishnamurthy, S.: Lord of the links: a framework for
discovering missing links in the internet topology. IEEE/ACM Trans. Netw. 17(2), 391–404
(2009)
8. Liquid Telecom Fiber, http://www.liquidtelecom.com/fibre/fibre-map
9. Sundaresan, S., de Donato, W., Feamster, N., Teixeira, R., Crawford, S., Pescap`e, A.: Mea-
suring home broadband performance. Commun. ACM 55(11), 100–109 (2012)
10. Weller, D., Woodcock, B.: Internet trafﬁc exchange: Market developments and policy chal-
lenges. Technical report. OECD Publishing (2012)