# A First Look at Traffic on Smartphones

**Authors:**
- Hossein Falaki, CENS, UCLA
- Dimitrios Lymberopoulos, Microsoft Research
- Ratul Mahajan, Microsoft Research
- Srikanth Kandula, Microsoft Research
- Deborah Estrin, CENS, UCLA

## Abstract
Using data from 43 users across two platforms, we provide a detailed analysis of smartphone traffic. We find that web browsing contributes over half of the traffic, while each of email, media, and maps contribute approximately 10%. Additionally, the overhead of lower-layer protocols is high due to small transfer sizes. For half of the transfers using transport-level security, header bytes account for 40% of the total. Packet loss is the primary factor limiting the throughput of smartphone traffic, but larger send buffers at Internet servers can improve the throughput for a quarter of the transfers. Finally, by studying the interaction between smartphone traffic and radio power management policies, we find that the power consumption of the radio can be reduced by 35% with minimal impact on packet exchange performance.

## Categories and Subject Descriptors
C.2.5 [Computer-Communication Networks] Local and Wide-Area Networks â€“ Internet

## General Terms
Measurement, Performance

## Keywords
Smartphone traffic, Power management

## 1. Introduction
Smartphone traffic now represents an increasingly large share of internet traffic. Cellular traffic is projected to grow ten times faster than fixed internet traffic, and most of this growth is driven by smartphones. By next year, smartphone sales are expected to surpass those of desktop PCs.

However, little is known about the nature of smartphone traffic. Two recent studies have provided valuable insights into some aspects of this traffic. Trestian et al. studied the types of websites accessed at different times of the day, and Maier et al. analyzed HTTP traffic generated by mobile handheld devices, including music players and personal gaming consoles, in home environments. Both studies were based on data gathered at a link in the middle of the network, which limits their ability to capture a detailed, comprehensive view of individual devices.

In this paper, we report on our ongoing work to characterize smartphone traffic in detail. Our approach involves deploying passive sniffers on the devices to record all sent and received traffic. While this method has limitations in terms of the number of devices that can be continuously monitored, it provides a comprehensive view of smartphone traffic for the monitored devices, enabling inferences that would otherwise be impossible. For example, we can study the total daily traffic generated by a device and its interaction with radio power management.

Our results are based on two datasets:
- **Dataset 1:** Consists of 10 users across two smartphone platforms, with packet-level traces captured.
- **Dataset 2:** Consists of 33 Android users, with application-level traffic information recorded every two minutes.

Using these datasets, we shed light on several aspects of smartphone traffic. We find that web browsing contributes over half of the traffic, while messaging (email, IM), maps, and media each contribute roughly 10%.

We also find that most smartphone data transfers are small, with a median size of only 3 KB. This leads to high overhead for lower-layer protocols. For half of the transfers, header bytes constitute over 12% of the total, and with transport security, this overhead grows to 40%. Lower-layer handshakes account for 20% of the total completion time for half of the transfers.

Consistent with controlled experiments, we find that smartphone data transfers experience high delays and losses. Focusing on transfers with more than 10 data packets, the median throughput is only 3.5 kbps in the downlink and 0.8 kbps in the uplink.

Analysis reveals that packet loss is the primary factor limiting the throughput of smartphone data transfers. However, a quarter of the downlink transfers are bottlenecked by the size of the sender-side transport buffer. Increasing buffer sizes at servers can improve the throughput of such flows.

Finally, we study the interaction between smartphone traffic and radio power management. We find that current sleep timers are overly long. Reducing them based on current traffic patterns can reduce radio power consumption by at least 35% with minimal impact on performance.

## 2. Datasets
Our results are based on two sets of traces:

### Dataset 1
- **Users:** 8 Windows Mobile (HTC Touch) users and 2 Android (HTC Dream) users.
- **Data Collection:** Packet-level traces, including link layer headers, collected using Netlog on Windows Mobile and tcpdump on Android.
- **Data Period:** 532 days of data, ranging from 26 to 84 days per user.
- **User Demographics:** Knowledge workers with unlimited data plans from AT&T and T-Mobile, residing in two different U.S. cities.

### Dataset 2
- **Users:** 33 Android (HTC Dream) users.
- **Data Collection:** Application-level traffic information recorded every two minutes using a custom logging tool.
- **Data Period:** 1660 days of data, ranging from 49 to 147 days per user.
- **User Demographics:** 17 knowledge workers and 16 high school students, all with unlimited voice, text, and data plans from T-Mobile, residing in the same U.S. city.

A key limitation of our work is the small user population, even though the datasets provide independent vantage points on smartphone traffic characteristics. Expanding our user set is an ongoing effort.

## 3. Traffic Composition
In this section, we analyze the basic makeup of smartphone traffic, starting with the volume per user. Figure 1(a) shows the daily traffic exchanged by users, ranging from 2-20 MB in Dataset 1 and 1-500 MB in Dataset 2. Compared to residential broadband traffic, this is roughly one order of magnitude smaller.

Two factors may explain the differences between the datasets:
1. **Platform Differences:** Dataset 1 is dominated by Windows Mobile, while Dataset 2 is exclusively Android. Android users and the OS likely generate more traffic.
2. **WiFi Usage:** Many users in Dataset 2 use WiFi heavily, whereas WiFi usage was minimal among Dataset 1 users.

Figure 1(b) shows the ratio of WiFi traffic in Dataset 2, with a median ratio of almost 0.5 but varying widely across users. The bottom 20% do not use WiFi at all, while the top 20% use it for more than 80% of their traffic. This implies that studies based solely on cellular or WiFi traffic can miss a significant fraction of device traffic.

### Downlink vs. Uplink
Figure 2 shows the ratio of downlink (from the network to the smartphone) to uplink traffic. There is wide variation among users, with the average downlink to uplink ratio being 6:1. This high asymmetry, indicating a strong bias towards downloads, has implications for provisioning access technologies for smartphones.

### Common Ports [Dataset 1]
Ports provide insight into user activities on smartphones. Table 1 shows the ports used by IP packets in Dataset 1, with HTTPS (443) and HTTP (80) carrying the majority of the traffic.

| Port | Bytes (%) | Packets (%) |
|------|-----------|-------------|
| HTTPS (443) | 43.88 | 31.66 |
| HTTP (80) | 37.48 | 22.16 |
| IMAP4S (993) | 15.21 | 39.32 |
| DNS (53) | 1.08 | 2.31 |
| IM (5000-01) | 0.69 | 0.32 |
| Android-Mkt (5228) | 0.48 | 1.10 |
| IPv6local (5355) | 0.22 | 0.88 |
| DHCP (67) | 0.22 | 0.24 |
| NetBIOS (137-39) | 0.17 | 0.60 |
| Other | 0.57 | 0.37 |

### Transfer Sizes
Figure 3 shows the transfer sizes in Dataset 1, with the x-axes on a log scale. The median transfer size is 3 KB, and the overhead of lower-layer protocols is significant for small transfers.

### Traffic Breakdown
- **Browsing:** Over 50%
- **Media:** ~10%
- **Messaging (Email, IM):** ~10%
- **Maps:** ~10%
- **System:** Remaining

This detailed analysis provides a comprehensive view of smartphone traffic and highlights the need for further research to optimize both performance and power consumption.