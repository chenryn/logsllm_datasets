title:A first look at traffic on smartphones
author:Hossein Falaki and
Dimitrios Lymberopoulos and
Ratul Mahajan and
Srikanth Kandula and
Deborah Estrin
A First Look at Trafﬁc on Smartphones
Hossein Falaki
CENS, UCLA
Dimitrios Lymberopoulos
Microsoft Research
Ratul Mahajan
Microsoft Research
Srikanth Kandula
Microsoft Research
Deborah Estrin
CENS, UCLA
Abstract—Using data from 43 users across two platforms, we
present a detailed look at smartphone trafﬁc. We ﬁnd that browsing
contributes over half of the trafﬁc, while each of email, media, and
maps contribute roughly 10%. We also ﬁnd that the overhead of
lower layer protocols is high because of small transfer sizes. For
half of the transfers that use transport-level security, header bytes
correspond to 40% of the total. We show that while packet loss
is the main factor that limits the throughput of smartphone trafﬁc,
larger send buffers at Internet servers can improve the throughput
of a quarter of the transfers. Finally, by studying the interaction be-
tween smartphone trafﬁc and the radio power management policy,
we ﬁnd that the power consumption of the radio can be reduced by
35% with minimal impact on the performance of packet exchanges.
Categories and Subject Descriptors
C.2.5 [Computer-Communication Networks] Local and Wide-
Area Networks – Internet
General Terms
Measurement, Performance
Keywords
Smartphone trafﬁc, Power management
1.
INTRODUCTION
Smartphone trafﬁc represents an increasingly large share of In-
ternet trafﬁc. Cellular trafﬁc is projected to grow 10 times faster
than ﬁxed Internet trafﬁc [22] and most of this trafﬁc is generated
by smartphones [9]. By next year, smartphone sales are projected
to surpass desktop PCs [18].
However, little is known today about the nature of smartphone
trafﬁc. Two recent studies have shed valuable light on some as-
pects of this trafﬁc. Trestian et al. study the kinds of Web sites
accessed at different times of the day [20]; and Maier et al. study
HTTP trafﬁc generated by mobile handheld devices (which include
music players and personal gaming consoles in addition to smart-
phones) in homes [15]. Both studies are based on data gathered at
a link in the middle of the network. As a result, while they can
analyze trafﬁc from a large number of devices, they do not capture
Permission to make digital or hard copies of all or part of this work for
personal or classroom use is granted without fee provided that copies are
not made or distributed for proﬁt or commercial advantage and that copies
bear this notice and the full citation on the ﬁrst page. To copy otherwise, to
republish, to post on servers or to redistribute to lists, requires prior speciﬁc
permission and/or a fee.
IMC’10, November 1–3, 2010, Melbourne, Australia.
Copyright 2010 ACM 978-1-4503-0057-5/10/11 ...$10.00.
a detailed, comprehensive view of individual devices. For instance,
the second study misses trafﬁc exchanged by devices through the
cellular interfaces or outside of their homes.
In this paper, we report on our ongoing work on detailed char-
acterization of smartphone trafﬁc. Our approach is complementary
to that of previous studies—we employ passive sniffers on the de-
vice and record all sent and received trafﬁc. Given the difﬁculty
of deploying continuous monitoring on a large number of end user
devices, the breadth achievable using this method is limited. But
the comprehensive view of smartphone trafﬁc that it provides for
monitored devices enables inferences that would otherwise be im-
possible to make. For instance, we can study how much total trafﬁc
a device generates in a day and interaction of its trafﬁc patterns with
radio power management.
The results in this paper are based on two datasets. Our primary
dataset consists of 10 users across two smartphone platforms. For
these users, we deployed a logger that captured packet-level traces.
Our other dataset consists of 33 Android users. It contains bytes
sent and received by each application in every two-minute window.
We have from 1 to 5 months of data for each user.
Using these datasets, we shed light on several aspects of smart-
phone trafﬁc. By analyzing commonly used ports and applications,
we quantify trafﬁc generated by various applications. We ﬁnd that
browsing contributes over half of the trafﬁc, while each of messag-
ing (email, IM), maps and media contribute roughly 10%.
We also ﬁnd that most smartphone data transfers are small, with
the median size being only 3 KB. Such small transfers have many
implications. For instance, the overhead of lower layer protocols
can be high. We show that for half of the transfers, header bytes
constitute over 12% of the total bytes. In the presence of transport
security, this overhead grows to 40%. For half of the transfers,
lower layer handshakes constitute 20% of the total completion time.
Consistent with controlled experiments with probe trafﬁc [12],
we ﬁnd that smartphone data transfers experience high delays and
losses. Unlike controlled experiments, however, our data allows
us to also study the impact of these path characteristics on actual
smartphone workloads. Focusing on transfers with more than 10
data packets, we ﬁnd that the median throughput is only 3.5 kbps
in the downlink (from the network to the smartphone) and 0.8 Kbps
in the uplink.
Analysis of what limits the throughput of smartphone data trans-
fers [23] reveals that packet loss is the primary culprit. But in-
terestingly, a quarter of the downlink transfers are bottlenecked
by the size of the sender-side transport buffer. The throughput of
such ﬂows can be improved by simply increasing the buffer sizes
at servers that communicate with smartphone clients.
Finally, we study the interaction of smartphone trafﬁc with the
radio power management policy. We ﬁnd that the current sleep
281)
F
D
C
(
s
r
e
s
u
%
100
80
60
40
20
0
Dataset1
Dataset2
1
10
100
(a) MB per day
)
F
D
C
(
s
r
e
s
u
%
100
80
60
40
20
0
Dataset2
0.0 0.2 0.4 0.6 0.8 1.0
(b) Ratio of WiFi traffic
)
F
D
C
(
s
r
e
s
u
%
100
80
60
40
20
0
Dataset1
Dataset2
0
5
10
Downlink/Uplink ratio
Figure 1: (a) Smartphone trafﬁc per day. (b) Ratio of trafﬁc
sent on the WiFi interface.
Figure 2: Ratio of downlink to uplink trafﬁc.
timers, that is, the idle period after which the radio will go to sleep,
are overly long. By reducing them based on current trafﬁc patterns,
radio power consumption can be reduced by at least 35% with min-
imal impact on performance.
2. DATASETS
Our results are based on two sets of traces. The ﬁrst data set
consists of packet level traces from 10 smartphone users across two
different platforms. Our second data set contains application level
trafﬁc information from 33 Android users.
Dataset1 Our ﬁrst dataset is from 8 Windows Mobile (HTC
Touch) users and 2 Android (HTC Dream) users. It contains packet-
level traces, including link layer headers, for data sent and received
by the smartphone. We collected these traces using Netlog on Win-
dows Mobile and tcpdump on Android. The traces were stored lo-
cally and uploaded at regular intervals using the USB connection.
All users are knowledge workers. Each had an unlimited data
plan with their carrier (7 AT&T, 3 T-Mobile). The users were resi-
dent in two different cities in the USA.
Across all users, there is 532 days of data. For individual users,
the data varies from 26 to 84 days.
Dataset2 Our second dataset is from 33 Android (HTC Dream)
users. It was collected using a custom logging tool that provides an
application-level view of smartphone trafﬁc. Every two minutes, it
records the number of bytes sent and received by every process that
runs on the smartphone. This tool is available to other researchers
by request and more details on its operation are available in [10].
The set of users consists of 17 knowledge workers and 16 high
school students. As for user interactions [10], we did not ﬁnd statis-
tically valid differences among the two demographics with respect
to trafﬁc. We thus present their results jointly. Each participant was
provided an unlimited voice, text and data plan through T-Mobile.
The users were resident in the same city in the USA.
Across all users, there is 1660 days of data. For individual users,
the data varies from 49-147 days.
A key limitation of our work is the small user populations of our
datasets, even though they provide independent vantage points on
smartphone trafﬁc characteristics. Expanding our set of users is a
subject of ongoing work.
3. TRAFFIC COMPOSITION
In this section, we study the basic makeup of smartphone trafﬁc,
starting with volume per user. Figure 1(a) shows how much trafﬁc
is exchanged per day by users. This amount is 2-20 MB in Dataset1
and 1-500 MB in Dataset2. Compared to residential broadband
trafﬁc this is roughly one order of magnitude smaller [1].
Two factors may explain the differences in the two datasets. One
is that Dataset1 is dominated by Windows Mobile, while Dataset2
is exclusively Android. It is likely that the Android OS and users
generate more trafﬁc. The heaviest user in Dataset1 is in fact an
Android user. In earlier work, we found that Android users interact
with their devices more heavily than Windows Mobile users [10].
For instance, the median session length of Android users is more
than twice that of Windows Mobile users.
The second factor, not unrelated to the ﬁrst, is that many users in
Dataset2 use WiFi heavily. Dataset1 does not provide direct infor-
mation on the interface (WiFi or cellular) used by individual pack-
ets. But by observing interface addresses and path delays—cellular
delays are much higher—we conclude that WiFi usage was mini-
mal among those users. In Dataset2, we can reliably identify the
share of WiFi trafﬁc using information about interface state.
Figure 1(b) shows the ratio of WiFi trafﬁc in Dataset2. We see
that the median ratio is almost 0.5 but it varies widely across users.
While the bottom 20% do not use WiFi at all, the top 20% use
it for more than 80% of their trafﬁc. These results also imply that
depending on the user population smartphone studies based on only
cellular trafﬁc [20] or only WiFi trafﬁc [15] can miss a signiﬁcant
fraction of device trafﬁc.
We now study the composition of smartphone trafﬁc from other
perspectives.
Downlink vs. uplink
Figure 2 shows the ratio of downlink
(from the network to the smartphone) to uplink trafﬁc. There is a
wide variation among users, caused likely by diversity in applica-
tion usage, from downlink trafﬁc equaling uplink trafﬁc to it being
over 10 times the uplink trafﬁc. The average across all users for
downlink to uplink ratio is 6:1. This high asymmetry, indicating a
strong bias towards downloads, has implications for provisioning
access technologies for smartphones. It is comparable to asymme-
try in residential broadband trafﬁc in Europe [14] and Japan [11]
but is well above the subset of “peer-type heavy-hitters”[11] whose
ratio is close to 1:1.
Despite differences in total trafﬁc exchanged the downlink to up-
link ratios in the two datasets are similar. This suggests that the mix
of activities that generate network trafﬁc may not be disparate for
the two cases. We study these next.
Common ports [Dataset1] Ports provide insight into user ac-
tivities on smartphones. Identifying applications using ports may
be inaccurate in some cases (e.g., peer-to-peer), but it is a simple
indicator that works well overall [14].
Table 1 shows for Dataset1 all ports that carry over 0.1% of the
282HTTPS (443)
HTTP (80)
IMAP4S (993)
DNS (53)
IM (5000-01)
Android-Mkt (5228)
IPv6local (5355)
DHCP (67)
NetBIOS (137-39)
other
Bytes (%)
43.88
37.48
15.21
1.08
0.69
0.48
0.22
0.22
0.17
0.57
Packets (%)
31.66
22.16
39.32
2.31
0.32
1.10
0.88
0.24
0.60
0.37
)
F
D
C
(
s
r
e
f
s
n
a
r
t
f
o
%
100
80
60
40
20
0
)
F
D
C
(
s
r
e
f
s
n
a
r
t
f
o
%
100
80
60
40
20
0
Uplink
Downlink
0
1
10
100 1000
(a) Transfer size in KB
Uplink
Downlink
1
10
100
1000
(b) Transfer size in Pkts.
Table 1: Ports (in parenthesis) used by IP packets in Dataset1.
Figure 3: Transfer sizes in Dataset1. The x-axes are log scale.
Browsing
Media
Messaging (Email, IM)
Maps
System
Social networking
Games