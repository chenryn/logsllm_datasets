为又有人破坏了风恩的部署环境！“他用一种尖细的、女核子似的声音说，“那就意味着，在你负责的领域
内，某些关键操作的周期时间比节拍时间要长。这就是你跟不上客户需求的原因。”
“在第二工作法中，你需要创建一条反馈环路，一直往回通向产品定义、设计及开发的最初环节。“他
说，“考虑到你和迪克之间的谈话，你们也许还能把环路延伸到产品生产流程的更早阶段。”
品。但这也注定，那条特定的工作流包含了准备和加工时间最长的两个操作步骤：粉末涂料喷涂，以及在
烘房中烘干涂料。”
他指起头，展升双臂。“想当年，那两个操作步骤的周期时间比节拍时间长得多，我们一直跟不上客户的需
求。生活怎能如此不公？烘房和喷涂站是我们的两个约束点，可利润最高的产品都要用到它们！我们该怎
么办？”
“客户甚至主动提出要送钱给我们，悬求我们提供更多这类小部件，但我们只能回绝他们，每一项工作的准
备时间都需要几小时乃至几天。我们只能靠巨大的批量规模来满足需求。我们使用巨大无比的油漆托盘，
每次把尽可能多的部件塞进烘房烘干。我们明白，要想提高生产能力，必须降低批量规模，但每个人都说
那是不可能做到的。”
“丰田公司解决这个间题的办法富有传奇色彩。“他说，“在20世纪50年代，他们有一个发动机盖冲压工序
转换时间约为三大。这需要移动重达好儿吨的巨大笨重的冲模。和我们一样，因为准备时间太长，他们只
能用很大的批量规模来生产，这让他们无法用同一台冲压机在同一时间生产不同的车型。要是换模需要三
天时间，就没法先造好一个普瑞斯的发动机盖，再去造一个凯美瑞的发动机盖了，对不对？”
“他们是怎么做的？“他煞有介事地问，“他们仔细观察了换模所需的全部步骤，然后提出了一系列预备和改
进措施，把换模时间降至十分钟以内。当然啦，这就是富有传奇色彩的快速换模术语的由来。”
“我们研究了大野、斯皮尔和罗瑟的所有著作。我们知道，必须降低批量规模，但我们要处理的不是发动机
盖冲压模具，而是喷涂以及烘干。“他继续说，“经过几个星期的头脑风暴、调查研究，并与工程部共同开
展实验，我们有了个疯狂的主意：也许我们可以用同一台机器进行喷涂和烘干。我们用自行车的链条和齿
轮对烘房进行了改造，使它兼具为零部件上漆的功能。”
*我们把四个工作中心合而为一，排除了三十多个容易出错的人工步骤，使整个工作周期完全实现了自动
化，形成了单一工作流，并且去掉了所有的准备时间。生产能力一飞冲天。”
“成效非常显著。“他骄做地说，“首先，一且发现缺陷，就能立刻修复，而不必报废那个批次里的其他部
件。其次，半成品数量下降了，因为每个工作中心都不会过度生产过剩产品，排队等候进入下一个工作中
心。不过，最重要的成效是，订单交付期从一个月缩短到了一周内。不论客户想要什么、要多少，我们都
能生产并交付产品，不会再成天往仓库里堆放只能用跳屋价清仓甩卖掉的垃圾。”
“那么，现在轮到你了，“他一本正经地说，伸出一根手指在我胸前截了一下，“你得想出办法来降低转换时
间，让部署周期时间加快。”
“我想，你的目标应该是..."他说着，停顿了片刻，“一天十个部署。为什么不呢？”
我张大了嘴巴，说：“那是不可能的。”
“哦，真的吗？“他冷着脸说，“给你讲个故事吧。2009年，我是一家科技公司的董事，我们公司的一个工程
---
## Page 175
师参加了Velocity大会（译注：由OReilly组织的Web性能与运营年度大会），回来后他像个疯子一样语无伦
次，满脑子危险的、不切实际的想法。他目了约翰·阿尔斯帕瓦及其同事保罗-哈蒙德的那场震动世界的演
讲。阿尔斯帕瓦和哈蒙德管理着Flickr（译注：一个相片分享网站）的IT运维部和工程团队。他们并没有斗
得不可开交，而是谈了如何协同工作，经常能每天完成十个部署！在当时的世道下，大部分T部门大多是
“让我告诉你吧，“他继续说，“我们都认为这个工程师失去了理智。但我从中学到的是，阿尔斯帕瓦和哈蒙
德所倡导的做法，是在T价值流中应用三步工作法的必然结果。它完全颠覆了我们管理IT的方式，并且拯
数了我们的公司。”
“他们是怎么做到的？“我目瞪口呆地问。
“好间题。“他回答，“阿尔斯帕瓦教导我们，只要开发部和运维部协同工作，连同QA和业务部门一起，这
个超级部落就能够成就各种不可思议之事。他们也知道，在代码投产之前，实际上并未产生任何价值，因
为那只是困在系统里的半成品。他不断缩减批量规模，实现快速功能流。从一定程度上说，他确保了部署
环境时刻准备就绪，按需投产。他把创建和部署流程自动化，并且认识到，可以把基础架构当作代码一样
对待，就像开发部推出的应用程序一样。这让他得以构建一步到位的生产环境和部署流程，就像我们想出
一步到位的喷涂和烘干方法一样。”
“所以，我们现在知道了，归根结底，阿尔斯帕瓦和哈蒙德并不疯狂。杰效·亨伯尔和戴夫·法利也自行得出
了同样的结论，然后在他们的著作《持续交付》中归纳了能够在一天内完成多个部署的做法和原则。随
后，埃里克·里斯在他的书《精益创业》中告诉我们，这种能力是如何帮助公司成长并取得成功的。
埃瑞克说话时，一如既往地精力充沛。他摇了摇头，严厉地看着我。
“这样的话，下一步你该做什么应该很清楚了，小菜鸟。为了跟上客户需求，其中也包括开发部那些上游战
发的需求，“他说，“你们应该创建亨伯尔和法利所说的“部署管道”，那是从代妈签入到投产的整个价值流
那不是一种技术，而是生产。你们应该对所有东西都进行版本控制。所有东西，不只是代码，而是创建环
境所需的每一样东西。然后，你们应该把整个环境创建流程自动化。你们需要一个部署管道，在其中创建
测试和生产环境，然后彻底按照要求往里面部署代码。那样你们才能缩短准备时间并排除故障，才能随时
跟上开发部的各种工作节奏。”
埃瑞克严厉地者者我说：“去间布伦特，把他派到那个新的团队里去，确保他不会分心，此刻更是如此，在
完成创建流程自动化之前，他一直都是你的瓶颈。把他脑子里的东西转换成编码，导入创建流程。把人从
部署业务中解脱出来。想出一天完成十个部署的办法来。”
我无法克服自已的怀疑。“一天十个部署？我确信，没人要求这样做。你这不是设置了一个超越业务需求的
目标吗？”
埃瑞克叹了口气，翻了个白眼，说：“别再盯着部署目标速度了。业务敏捷度并不单看生产的净速度，而是
要看你捕捉和适应市场变化并为此承担更大风险的能力。它关乎持续不断的尝试，就像斯科特·库克在《直
觉》中所做的，他们在纳税甲报高峰期升展了四十多次试验，才奔清楚如何将客户转化率最大化。在纳税
申报高峰期！”
“如果你无法及时完成测试并在业务敏捷度上打败竞争对手，你就玩儿完了，功能总是要碰运气的，要是你
走运，10%的功能会得到预期的收益。因此，越快把那些功能推向市场接受考验，对你就越好。顺便提
句，你也能更快地为公司收回成本，那就意味着，公司也开始更快地赚钱了。”
“史蒂夫把他的身家性命全都押在了你们能否提高执行和部署能力上。所以，去和克里斯一起想办法，如何
才能保证在敏捷开发流程的每一个阶段，不仅有可推出的代码，还能具备能够部署这些代码的工作环境！”
“好吧，好吧。“我说，“不过，你为什么要大老远把我拖到这里来，接受严寒的考验？在一块白板上讲解还
不够吗？”
---
## Page 176
为止，你们的所作所为都不过如此。这栋楼里的人可要比你们这些T工作者更有创意，也更有胆量。”
---
## Page 177
第31章
11月3日，星期
中午12点13分，我步入了特别行动队启动会议的会场。我是坐埃瑞克的散篷车回来的，头发湿透了，衬衫
地皱了。克里斯正在讲话。“一—所以，史蒂夫已经授权这个小团队开发并交付这个促销功能，并且不惜一
切代价，对假期购物季产生正面的影响。”
克里斯转向我，指了指会议室后方说：“我先把会开起来了，还为大家定了午餐，去吃吧一你怎么了？“
我摆了摆手，没有回答他的问题。顺着他指的方向望去，我又惊又喜地看到那里还留着一个火鸡三明治的
午餐盒。我一把抓起午餐盒，找了个地方坐下来，打量着房间里的每一个人，尤其是布伦特。
“那正是我们今天要弄明白的事情。“韦斯诚息地说，“你和我们一样心知肚明。有个可能会成为董事会成员
的人坚持要你加入这个团队。老实说，有那么多次他都是对的，所以哪怕不明白这是为什么，我还是信任
他。”
帕蒂附和道：“好吧，他给了我们一些线索。他说，我们需要聚焦的问题是部署的流程以及构建环境的方
法。他似乎认为，由于每一次风凰部署都出现了混乱的结果，我们一定犯了一些根本性的错误。”
我拆开三明治的包装纸，说道：“我刚和他见过面，他给我看了一大堆东西，还解释了丰田公司是如何做到
这样能支持业务所需的功能部署周期，不仅是生存下去，还要赢得市场。”
期是三个星期。我们拿不出那么多东西来一天部署十次！”
帕蒂摇着头说：“你确定吗？那么故障修复呢？像前两次大规模发布时遇到的情况，网站停额时的性能改进
呢？难道你不喜欢在生产中定期开展这类变更，而不必为了开展某个紧急变更而打破所有规则吗？
克里斯想了一会儿，然后才回答：“有点意思。我通常把这类修复称作一个补丁或者一次小规模发布。不过
你是对的—那些也是部署。如果我们能更快地推出修复，那就好极了，不过得了吧，一天十个部署？”
我回想着埃瑞克说的话，补充道：“让市场营销部修改他们自已的内容或业务规则，或者启用更快速的试验
和A/B对比测试，看看怎样对工作最有帮助，这怎么样？”
书斯把双手放在桌上，说：“各位，听我说。这是不可能完成的。我们面对的是物理定律。忘掉现在要花多
长时间吧，现在需要超过一星期的准备时间和超过八小时的实际部署时间！往硬盘上写数据只能这么快
了。”
要是我没和艾增克一起去工厂转悠，我一定也会这么说的。我恳切地说：“看，也许你们说得对，不过请给
我一点儿时间：在整个部署从头到尾的流程中，究竞有多少个步骤？我们现在讨论的是二十个步骤、两百
两步骤，还是两千个步骤？”
书斯挠了头，然后说：“布伦特，你怎么看？我想大概有一百来个步骤...”
“真的吗？“布伦特回答，“我想大概有二十多个步骤。”
威廉插话道：“我不知道你们是从哪里开始计算的，不过如果从开发部提交代码并将其标注为“候选版本'的
时间点算起，即便是在我们把代码移交给IT运维部之前，我大概就能想出一百个步骤。“