## 排行榜算法最简单的排行榜，就是直接统计某种指标，按照大小去排序。在社交网站上，按照点赞数、转发数、评论数去排序，这是一种最常见、最朴素的排行榜。类似的做法还有，在电商网站上按照销量去排序。这样的做法也算是推荐算法？当然我确实很难说它不是，因为确实简单，容易上线运行，但我只能说这样做不靠谱，不靠谱的原因在于以下的几个问题。1.  非常容易被攻击，也就是被刷榜；2.  马太效应一直存在，除非强制替换，否则一些破了纪录的物品会一直占据在榜单中；3.  不能反映出排行榜随着时间的变化，这一点和马太效应有关。既然朴素的排行榜有这些弊端，那么就针对他们来一一设计应对措施。``{=html}
### 1. 考虑时间因素接下来，我要把用户给物品贡献的行为看做是用户在投票，这个很容易理解，好像热门的东西都是大多数人投票民主选举出来的。排行榜中的物品，你可以想象它们每一个都是炙手可热的，都有一定的温度，那么这个温度按照热力学定律来讲，随着时间推移就一定会耗散到周围，温度就会下降。或者，把排行榜想象成一个梯子，每个物品都在奋力往上爬，他们的动力来自用户的手动投票，物品本身都要承受一定的重力，会从梯子上掉下来，用户投票可以抵挡部分重力，投票数不及时或者不够，排行榜上的物品就会掉下来。把这个规律反映在排行榜分数计算公式中，就比简单统计数量，再强制按照天更新要科学得多。HackerNews计算帖子的热度就用到了这个思想，它们的做法用公式表达是下面这个样子。]{.MathJax_Preview style="color: inherit; display: none;"} {.MathJax_Display style="text-align: center;"}``{=html}[[[[[[P[]{style="display: inline-block; overflow: hidden; height: 1px; width: 0.096em;"}]{#10.html#MathJax-Span-5.mistyle="font-family: MathJax_Math-italic;"}[−]{#10.html#MathJax-Span-6.mostyle="font-family: MathJax_Main; padding-left: 0.238em;"}[1]{#10.html#MathJax-Span-7.mnstyle="font-family: MathJax_Main; padding-left: 0.238em;"}]{#10.html#MathJax-Span-4.mrow}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.155em, 1002.45em, 4.238em, -999.998em); top: -4.656em; left: 50%; margin-left: -1.268em;"}(]{#10.html#MathJax-Span-9.mostyle="font-family: MathJax_Main;"}[T[]{style="display: inline-block; overflow: hidden; height: 1px; width: 0.144em;"}]{#10.html#MathJax-Span-10.mistyle="font-family: MathJax_Math-italic;"}[+]{#10.html#MathJax-Span-11.mostyle="font-family: MathJax_Main; padding-left: 0.238em;"}[2]{#10.html#MathJax-Span-12.mnstyle="font-family: MathJax_Main; padding-left: 0.238em;"}[)]{#10.html#MathJax-Span-14.mostyle="font-family: MathJax_Main;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.108em, 1000.28em, 4.379em, -999.998em); top: -3.998em; left: 0em;"}[[G]{#10.html#MathJax-Span-15.mistyle="font-size: 70.7%; font-family: MathJax_Math-italic;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; top: -4.28em; left: 0.379em;"}]{style="display: inline-block; position: relative; width: 1.038em; height: 0px;"}]{#10.html#MathJax-Span-13.msubsup}]{#10.html#MathJax-Span-8.mrow}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.061em, 1003.86em, 4.379em, -999.998em); top: -3.245em; left: 50%; margin-left: -1.927em;"}[[]{style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 4.002em; height: 0px;"}[]{style="display: inline-block; width: 0px; height: 1.085em;"}]{style="position: absolute; clip: rect(0.896em, 1004em, 1.226em, -999.998em); top: -1.315em; left: 0em;"}]{style="display: inline-block; position: relative; width: 4.002em; height: 0px; margin-right: 0.144em; margin-left: 0.144em;"}]{#10.html#MathJax-Span-3.mfrac}]{#10.html#MathJax-Span-2.mrow}[]{style="display: inline-block; width: 0px; height: 2.308em;"}]{style="position: absolute; clip: rect(0.802em, 1004.28em, 3.438em, -999.998em); top: -2.304em; left: 0em;"}]{style="display: inline-block; position: relative; width: 4.285em; height: 0px; font-size: 125%;"}[]{style="display: inline-block; overflow: hidden; vertical-align: -1.291em; border-left: 0px solid; width: 0px; height: 3.062em;"}]{#10.html#MathJax-Span-1.mathstyle="width: 5.367em; display: inline-block;"}``{=html}[$$\frac{P - 1}{(T + 2)^{G}}$$]{.MJX_Assistive_MathML.MJX_Assistive_MathML_Blockrole="presentation"}]{#10.html#MathJax-Element-1-Frame .MathJaxtabindex="0" style="text-align: center; position: relative;"mathml="P−1(T+2)G"role="presentation"}$$$$公式中三个字母分别代表如下意义：1.  P：得票数，去掉帖子作者自己投票。2.  T：帖子距离现在的小时数，加上帖子发布到被转帖至 Hacker News    的平均时长。3.  G：帖子热度的重力因子。公式中，分子是简单的帖子数统计，一个小技巧是去掉了作者自己的投票。分母就是将前面说到的时间因素考虑在内，随着帖子的发表时间增加，分母会逐渐增大，帖子的热门程度分数会逐渐降低。其中，重力因子的选择根据情况而定，重力因子越大，帖子的热度衰减越快，不同的重力因子对比如下图所示。![](Images/a75fdc3ee60100393eb591f839fdc2aa.png){savepage-src="https://static001.geekbang.org/resource/image/8e/b1/8e2198331001233d2b93a877b412b0b1.png"}可以看到，重力因子越大，衰减越快。再看一下，相同重力因子选择的情形下，不同的得票数的对比。![](Images/db86bc00d16b43346bfd5152d6cb5ced.png){savepage-src="https://static001.geekbang.org/resource/image/18/16/18d68d8218036fbbbd3222d033835516.png"}这这个示意图可以看到，这个公式仍然能够反映出相同时间的帖子之间的相对热度差别。另一个考虑时间因素的排行榜算法是牛顿冷却定律。物品受关注度如同温度一样，不输入能量的话它会自然冷却，而且物体的冷却速度和其当前温度与环境温度之差成正比。将这一定律表述为公式就是下面的样子：]{.MathJax_Preview style="color: inherit; display: none;"} {.MathJax_Display style="text-align: center;"}``{=html}[[T[]{style="display: inline-block; overflow: hidden; height: 1px; width: 0.144em;"}]{#10.html#MathJax-Span-18.mistyle="font-family: MathJax_Math-italic;"}[(]{#10.html#MathJax-Span-19.mo style="font-family: MathJax_Main;"}[t]{#10.html#MathJax-Span-20 .mistyle="font-family: MathJax_Math-italic;"}[)]{#10.html#MathJax-Span-21.mo style="font-family: MathJax_Main;"}[=]{#10.html#MathJax-Span-22 .mostyle="font-family: MathJax_Main; padding-left: 0.285em;"}[H[]{style="display: inline-block; overflow: hidden; height: 1px; width: 0.049em;"}]{#10.html#MathJax-Span-23.mistyle="font-family: MathJax_Math-italic; padding-left: 0.285em;"}[+]{#10.html#MathJax-Span-24.mostyle="font-family: MathJax_Main; padding-left: 0.238em;"}[C[]{style="display: inline-block; overflow: hidden; height: 1px; width: 0.049em;"}]{#10.html#MathJax-Span-25.mistyle="font-family: MathJax_Math-italic; padding-left: 0.238em;"}[e]{#10.html#MathJax-Span-27.mistyle="font-family: MathJax_Math-italic;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.438em, 1000.43em, 4.144em, -999.998em); top: -3.998em; left: 0em;"}[−]{#10.html#MathJax-Span-30.mostyle="font-size: 70.7%; font-family: MathJax_Main;"}[α]{#10.html#MathJax-Span-31.mistyle="font-size: 70.7%; font-family: MathJax_Math-italic;"}[t]{#10.html#MathJax-Span-32.mistyle="font-size: 70.7%; font-family: MathJax_Math-italic;"}]{#10.html#MathJax-Span-29.mrow}]{#10.html#MathJax-Span-28.texatom}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; top: -4.421em; left: 0.473em;"}]{style="display: inline-block; position: relative; width: 1.791em; height: 0px;"}]{#10.html#MathJax-Span-26.msubsup}]{#10.html#MathJax-Span-17.mrow}[]{style="display: inline-block; width: 0px; height: 2.355em;"}]{style="position: absolute; clip: rect(1.367em, 1007.91em, 2.732em, -999.998em); top: -2.351em; left: 0em;"}]{style="display: inline-block; position: relative; width: 7.908em; height: 0px; font-size: 125%;"}[]{style="display: inline-block; overflow: hidden; vertical-align: -0.35em; border-left: 0px solid; width: 0px; height: 1.474em;"}]{#10.html#MathJax-Span-16.mathstyle="width: 9.885em; display: inline-block;"}``{=html}[$$T(t) = H + Ce^{- \alpha t}$$]{.MJX_Assistive_MathML.MJX_Assistive_MathML_Blockrole="presentation"}]{#10.html#MathJax-Element-2-Frame .MathJaxtabindex="0" style="text-align: center; position: relative;"mathml="T(t)=H+Ce−αt"role="presentation"}$$$$公式中字母的意义如下。-   H：为环境温度，可以认为是平均票数，比如电商中的平均销量，由于不影响排序，可以不使用。-   C：为净剩票数，即时刻 t    物品已经得到的票数，也就是那个最朴素的统计量，比如商品的销量。-   t：为物品存在时间，一般以小时为单位。-   []{.MathJax_Preview    style="color: inherit; display: none;"}[``{=html}[[α]{#10.html#MathJax-Span-35    .mi    style="font-family: MathJax_Math-italic;"}]{#10.html#MathJax-Span-34    .mrow}[]{style="display: inline-block; width: 0px; height: 2.308em;"}]{style="position: absolute; clip: rect(1.744em, 1000.61em, 2.449em, -999.998em); top: -2.304em; left: 0em;"}]{style="display: inline-block; position: relative; width: 0.661em; height: 0px; font-size: 125%;"}[]{style="display: inline-block; overflow: hidden; vertical-align: -0.056em; border-left: 0px solid; width: 0px; height: 0.709em;"}]{#10.html#MathJax-Span-33    .math    style="width: 0.849em; display: inline-block;"}``{=html}[$\alpha$]{.MJX_Assistive_MathML    role="presentation"}]{#10.html#MathJax-Element-3-Frame .MathJax    tabindex="0" style="position: relative;"    mathml="α"    role="presentation"}$$ ：是冷却系数，反映物品自然冷却的快慢。问题来了，这个反映物品自然冷却快慢的 []{.MathJax_Previewstyle="color: inherit; display: none;"}[``{=html}[[α]{#10.html#MathJax-Span-38.mi style="font-family: MathJax_Math-italic;"}]{#10.html#MathJax-Span-37.mrow}[]{style="display: inline-block; width: 0px; height: 2.308em;"}]{style="position: absolute; clip: rect(1.744em, 1000.61em, 2.449em, -999.998em); top: -2.304em; left: 0em;"}]{style="display: inline-block; position: relative; width: 0.661em; height: 0px; font-size: 125%;"}[]{style="display: inline-block; overflow: hidden; vertical-align: -0.056em; border-left: 0px solid; width: 0px; height: 0.709em;"}]{#10.html#MathJax-Span-36.mathstyle="width: 0.849em; display: inline-block;"}``{=html}[$\alpha$]{.MJX_Assistive_MathMLrole="presentation"}]{#10.html#MathJax-Element-4-Frame .MathJaxtabindex="0" style="position: relative;"mathml="α"role="presentation"}$$该如何确定呢？有一个更直观的办法。假如一个物品在时间过去 B个单位后，因为增加了 A 个投票数，而保持了热门程度不变，那这样的话]{.MathJax_Previewstyle="color: inherit; display: none;"}[``{=html}[[α]{#10.html#MathJax-Span-41.mi style="font-family: MathJax_Math-italic;"}]{#10.html#MathJax-Span-40.mrow}[]{style="display: inline-block; width: 0px; height: 2.308em;"}]{style="position: absolute; clip: rect(1.744em, 1000.61em, 2.449em, -999.998em); top: -2.304em; left: 0em;"}]{style="display: inline-block; position: relative; width: 0.661em; height: 0px; font-size: 125%;"}[]{style="display: inline-block; overflow: hidden; vertical-align: -0.056em; border-left: 0px solid; width: 0px; height: 0.709em;"}]{#10.html#MathJax-Span-39.mathstyle="width: 0.849em; display: inline-block;"}``{=html}[$\alpha$]{.MJX_Assistive_MathMLrole="presentation"}]{#10.html#MathJax-Element-5-Frame .MathJaxtabindex="0" style="position: relative;"mathml="α"role="presentation"}$$应该是多少呢？简单把这个描述列成方程就是下面的样子。]{.MathJax_Preview style="color: inherit; display: none;"} {.MathJax_Display style="text-align: center;"}``{=html}[[C[]{style="display: inline-block; overflow: hidden; height: 1px; width: 0.049em;"}]{#10.html#MathJax-Span-44.mistyle="font-family: MathJax_Math-italic;"}[e]{#10.html#MathJax-Span-46.mistyle="font-family: MathJax_Math-italic;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.438em, 1000.43em, 4.144em, -999.998em); top: -3.998em; left: 0em;"}[−]{#10.html#MathJax-Span-49.mostyle="font-size: 70.7%; font-family: MathJax_Main;"}[α]{#10.html#MathJax-Span-50.mistyle="font-size: 70.7%; font-family: MathJax_Math-italic;"}[t]{#10.html#MathJax-Span-51.mistyle="font-size: 70.7%; font-family: MathJax_Math-italic;"}]{#10.html#MathJax-Span-48.mrow}]{#10.html#MathJax-Span-47.texatom}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; top: -4.421em; left: 0.473em;"}]{style="display: inline-block; position: relative; width: 1.791em; height: 0px;"}]{#10.html#MathJax-Span-45.msubsup}[=]{#10.html#MathJax-Span-52 .mostyle="font-family: MathJax_Main; padding-left: 0.285em;"}[(]{#10.html#MathJax-Span-53.mostyle="font-family: MathJax_Main; padding-left: 0.285em;"}[C[]{style="display: inline-block; overflow: hidden; height: 1px; width: 0.049em;"}]{#10.html#MathJax-Span-54.mistyle="font-family: MathJax_Math-italic;"}[+]{#10.html#MathJax-Span-55.mostyle="font-family: MathJax_Main; padding-left: 0.238em;"}[A]{#10.html#MathJax-Span-56.mistyle="font-family: MathJax_Math-italic; padding-left: 0.238em;"}[)]{#10.html#MathJax-Span-57.mo style="font-family: MathJax_Main;"}[e]{#10.html#MathJax-Span-59.mistyle="font-family: MathJax_Math-italic;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.438em, 1000.43em, 4.144em, -999.998em); top: -3.998em; left: 0em;"}[−]{#10.html#MathJax-Span-62.mostyle="font-size: 70.7%; font-family: MathJax_Main;"}[α]{#10.html#MathJax-Span-63.mistyle="font-size: 70.7%; font-family: MathJax_Math-italic;"}[(]{#10.html#MathJax-Span-64.mostyle="font-size: 70.7%; font-family: MathJax_Main;"}[t]{#10.html#MathJax-Span-65.mistyle="font-size: 70.7%; font-family: MathJax_Math-italic;"}[+]{#10.html#MathJax-Span-66.mostyle="font-size: 70.7%; font-family: MathJax_Main;"}[B]{#10.html#MathJax-Span-67.mistyle="font-size: 70.7%; font-family: MathJax_Math-italic;"}[)]{#10.html#MathJax-Span-68.mostyle="font-size: 70.7%; font-family: MathJax_Main;"}]{#10.html#MathJax-Span-61.mrow}]{#10.html#MathJax-Span-60.texatom}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; top: -4.421em; left: 0.473em;"}]{style="display: inline-block; position: relative; width: 3.438em; height: 0px;"}]{#10.html#MathJax-Span-58.msubsup}]{#10.html#MathJax-Span-43.mrow}[]{style="display: inline-block; width: 0px; height: 2.355em;"}]{style="position: absolute; clip: rect(1.273em, 1010.87em, 2.732em, -999.998em); top: -2.351em; left: 0em;"}]{style="display: inline-block; position: relative; width: 10.873em; height: 0px; font-size: 125%;"}[]{style="display: inline-block; overflow: hidden; vertical-align: -0.35em; border-left: 0px solid; width: 0px; height: 1.591em;"}]{#10.html#MathJax-Span-42.mathstyle="width: 13.602em; display: inline-block;"}``{=html}[$$Ce^{- \alpha t} = (C + A)e^{- \alpha(t + B)}$$]{.MJX_Assistive_MathML.MJX_Assistive_MathML_Blockrole="presentation"}]{#10.html#MathJax-Element-6-Frame .MathJaxtabindex="0" style="text-align: center; position: relative;"mathml="Ce−αt=(C+A)e−α(t+B)"role="presentation"}$$$$可以解得。]{.MathJax_Preview style="color: inherit; display: none;"} {.MathJax_Display style="text-align: center;"}``{=html}[[α]{#10.html#MathJax-Span-71 .mistyle="font-family: MathJax_Math-italic;"}[=]{#10.html#MathJax-Span-72.mostyle="font-family: MathJax_Main; padding-left: 0.285em;"}[1]{#10.html#MathJax-Span-74.mnstyle="font-family: MathJax_Main;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.202em, 1000.43em, 4.144em, -999.998em); top: -4.656em; left: 50%; margin-left: -0.233em;"}[[B]{#10.html#MathJax-Span-75.mistyle="font-family: MathJax_Math-italic;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.155em, 1000.75em, 4.144em, -999.998em); top: -3.292em; left: 50%; margin-left: -0.374em;"}[[]{style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 0.896em; height: 0px;"}[]{style="display: inline-block; width: 0px; height: 1.085em;"}]{style="position: absolute; clip: rect(0.896em, 1000.9em, 1.226em, -999.998em); top: -1.315em; left: 0em;"}]{style="display: inline-block; position: relative; width: 0.896em; height: 0px; margin-right: 0.144em; margin-left: 0.144em;"}]{#10.html#MathJax-Span-73.mfrac style="padding-left: 0.285em;"}[l]{#10.html#MathJax-Span-76 .mistyle="font-family: MathJax_Math-italic;"}[n]{#10.html#MathJax-Span-77.mistyle="font-family: MathJax_Math-italic;"}[(]{#10.html#MathJax-Span-78.mo style="font-family: MathJax_Main;"}[1]{#10.html#MathJax-Span-79 .mnstyle="font-family: MathJax_Main;"}[+]{#10.html#MathJax-Span-80 .mostyle="font-family: MathJax_Main; padding-left: 0.238em;"}[A]{#10.html#MathJax-Span-82.mistyle="font-family: MathJax_Math-italic;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.155em, 1000.71em, 4.144em, -999.998em); top: -4.656em; left: 50%; margin-left: -0.374em;"}[[C[]{style="display: inline-block; overflow: hidden; height: 1px; width: 0.049em;"}]{#10.html#MathJax-Span-83.mistyle="font-family: MathJax_Math-italic;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.155em, 1000.75em, 4.144em, -999.998em); top: -3.292em; left: 50%; margin-left: -0.374em;"}[[]{style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 0.896em; height: 0px;"}[]{style="display: inline-block; width: 0px; height: 1.085em;"}]{style="position: absolute; clip: rect(0.896em, 1000.9em, 1.226em, -999.998em); top: -1.315em; left: 0em;"}]{style="display: inline-block; position: relative; width: 0.896em; height: 0px; margin-right: 0.144em; margin-left: 0.144em;"}]{#10.html#MathJax-Span-81.mfrac style="padding-left: 0.238em;"}[)]{#10.html#MathJax-Span-84 .mostyle="font-family: MathJax_Main;"}]{#10.html#MathJax-Span-70.mrow}[]{style="display: inline-block; width: 0px; height: 2.355em;"}]{style="position: absolute; clip: rect(0.802em, 1007.67em, 3.202em, -999.998em); top: -2.351em; left: 0em;"}]{style="display: inline-block; position: relative; width: 7.767em; height: 0px; font-size: 125%;"}[]{style="display: inline-block; overflow: hidden; vertical-align: -0.938em; border-left: 0px solid; width: 0px; height: 2.768em;"}]{#10.html#MathJax-Span-69.mathstyle="width: 9.744em; display: inline-block;"}``{=html}[$$\alpha = \frac{1}{B}ln(1 + \frac{A}{C})$$]{.MJX_Assistive_MathML.MJX_Assistive_MathML_Blockrole="presentation"}]{#10.html#MathJax-Element-7-Frame .MathJaxtabindex="0" style="text-align: center; position: relative;"mathml="α=1Bln(1+AC)"role="presentation"}$$$$用这个公式加上自己产品的要求来确定 []{.MathJax_Previewstyle="color: inherit; display: none;"}[``{=html}[[a]{#10.html#MathJax-Span-87.mistyle="font-family: MathJax_Math-italic;"}[l]{#10.html#MathJax-Span-88.mistyle="font-family: MathJax_Math-italic;"}[p]{#10.html#MathJax-Span-89.mistyle="font-family: MathJax_Math-italic;"}[h]{#10.html#MathJax-Span-90.mistyle="font-family: MathJax_Math-italic;"}[a]{#10.html#MathJax-Span-91.mi style="font-family: MathJax_Math-italic;"}]{#10.html#MathJax-Span-86.mrow}[]{style="display: inline-block; width: 0px; height: 2.308em;"}]{style="position: absolute; clip: rect(1.461em, 1002.45em, 2.638em, -999.998em); top: -2.304em; left: 0em;"}]{style="display: inline-block; position: relative; width: 2.449em; height: 0px; font-size: 125%;"}[]{style="display: inline-block; overflow: hidden; vertical-align: -0.291em; border-left: 0px solid; width: 0px; height: 1.238em;"}]{#10.html#MathJax-Span-85.mathstyle="width: 3.061em; display: inline-block;"}``{=html}[$alpha$]{.MJX_Assistive_MathMLrole="presentation"}]{#10.html#MathJax-Element-8-Frame .MathJaxtabindex="0" style="position: relative;"mathml="alpha"role="presentation"}$$ 就容易得多，假如按照 B =24，也就是过一天来看，我来举几个例子。![](Images/586db099a6b40c5296e3cc6f59ce30e3.png){savepage-src="https://static001.geekbang.org/resource/image/1d/bb/1dfbf15946ae2783807c074ca8eaf3bb.png"}你可以在自己的产品中，设定一个假设，然后计算出相应的 []{.MathJax_Previewstyle="color: inherit; display: none;"}[``{=html}[[α]{#10.html#MathJax-Span-94.mi style="font-family: MathJax_Math-italic;"}]{#10.html#MathJax-Span-93.mrow}[]{style="display: inline-block; width: 0px; height: 2.308em;"}]{style="position: absolute; clip: rect(1.744em, 1000.61em, 2.449em, -999.998em); top: -2.304em; left: 0em;"}]{style="display: inline-block; position: relative; width: 0.661em; height: 0px; font-size: 125%;"}[]{style="display: inline-block; overflow: hidden; vertical-align: -0.056em; border-left: 0px solid; width: 0px; height: 0.709em;"}]{#10.html#MathJax-Span-92.mathstyle="width: 0.849em; display: inline-block;"}``{=html}[$\alpha$]{.MJX_Assistive_MathMLrole="presentation"}]{#10.html#MathJax-Element-9-Frame .MathJaxtabindex="0" style="position: relative;"mathml="α"role="presentation"}$$ 来。
### 2. 考虑三种投票前面的热度计算方法，只考虑用户投票和用户弃权两种，虽然这种情况很常见，但是还有一些产品会存在运行用户投反对票的情形，比如问答网站中对答案的投票，既可以赞成，又可以反对。在这样的情形下，一般这样来考虑：1.  同样多的总票数，支持赞成票多的，因为这符合平台的长期利益；2.  同样多的赞成票数，支持最有价值的，同样这符合平台长期利益。以国外某著名程序员问答网站为例，你就不要打听到底是哪个网站了，这个不重要，下面看一下他们对热门问题的热度计算公式：]{.MathJax_Preview style="color: inherit; display: none;"} {.MathJax_Display style="text-align: center;"}``{=html}[[[[[[(]{#10.html#MathJax-Span-99.mo style="font-family: MathJax_Main;"}[l]{#10.html#MathJax-Span-100 .mistyle="font-family: MathJax_Math-italic;"}[o]{#10.html#MathJax-Span-101.mistyle="font-family: MathJax_Math-italic;"}[g[]{style="display: inline-block; overflow: hidden; height: 1px; width: 0.002em;"}]{#10.html#MathJax-Span-103.mistyle="font-family: MathJax_Math-italic;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.438em, 1000.47em, 4.332em, -999.998em); top: -3.998em; left: 0em;"}[10]{#10.html#MathJax-Span-106.mnstyle="font-size: 70.7%; font-family: MathJax_Main;"}]{#10.html#MathJax-Span-105.mrow}]{#10.html#MathJax-Span-104.texatom}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; top: -3.856em; left: 0.473em;"}]{style="display: inline-block; position: relative; width: 1.273em; height: 0px;"}]{#10.html#MathJax-Span-102.msubsup}[Q]{#10.html#MathJax-Span-107 .mistyle="font-family: MathJax_Math-italic;"}[v]{#10.html#MathJax-Span-108.mistyle="font-family: MathJax_Math-italic;"}[i]{#10.html#MathJax-Span-109.mistyle="font-family: MathJax_Math-italic;"}[e]{#10.html#MathJax-Span-110.mistyle="font-family: MathJax_Math-italic;"}[w]{#10.html#MathJax-Span-111.mistyle="font-family: MathJax_Math-italic;"}[s]{#10.html#MathJax-Span-112.mistyle="font-family: MathJax_Math-italic;"}[)]{#10.html#MathJax-Span-113.mo style="font-family: MathJax_Main;"}[×]{#10.html#MathJax-Span-114 .mostyle="font-family: MathJax_Main; padding-left: 0.238em;"}4]{#10.html#MathJax-Span-117.mn style="font-family: MathJax_Main;"}]{#10.html#MathJax-Span-116.mrow}]{#10.html#MathJax-Span-115 .texatomstyle="padding-left: 0.238em;"}[+]{#10.html#MathJax-Span-118 .mostyle="font-family: MathJax_Main; padding-left: 0.238em;"}[[Q]{#10.html#MathJax-Span-121.mistyle="font-size: 70.7%; font-family: MathJax_Math-italic;"}[a]{#10.html#MathJax-Span-122.mistyle="font-size: 70.7%; font-family: MathJax_Math-italic;"}[n]{#10.html#MathJax-Span-123.mistyle="font-size: 70.7%; font-family: MathJax_Math-italic;"}[s]{#10.html#MathJax-Span-124.mistyle="font-size: 70.7%; font-family: MathJax_Math-italic;"}[w]{#10.html#MathJax-Span-125.mistyle="font-size: 70.7%; font-family: MathJax_Math-italic;"}[e]{#10.html#MathJax-Span-126.mistyle="font-size: 70.7%; font-family: MathJax_Math-italic;"}[r]{#10.html#MathJax-Span-127.mistyle="font-size: 70.7%; font-family: MathJax_Math-italic;"}[s]{#10.html#MathJax-Span-128.mistyle="font-size: 70.7%; font-family: MathJax_Math-italic;"}[×]{#10.html#MathJax-Span-129.mostyle="font-size: 70.7%; font-family: MathJax_Main;"}Q]{#10.html#MathJax-Span-132.mistyle="font-size: 70.7%; font-family: MathJax_Math-italic;"}[s]{#10.html#MathJax-Span-133.mistyle="font-size: 70.7%; font-family: MathJax_Math-italic;"}[c]{#10.html#MathJax-Span-134.mistyle="font-size: 70.7%; font-family: MathJax_Math-italic;"}[o]{#10.html#MathJax-Span-135.mistyle="font-size: 70.7%; font-family: MathJax_Math-italic;"}[r]{#10.html#MathJax-Span-136.mistyle="font-size: 70.7%; font-family: MathJax_Math-italic;"}[e]{#10.html#MathJax-Span-137.mistyle="font-size: 70.7%; font-family: MathJax_Math-italic;"}]{#10.html#MathJax-Span-131.mrow}]{#10.html#MathJax-Span-130 .texatom}]{#10.html#MathJax-Span-120.mrow}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.344em, 1005.88em, 4.285em, -999.998em); top: -4.515em; left: 50%; margin-left: -2.962em;"}[[5]{#10.html#MathJax-Span-138.mnstyle="font-size: 70.7%; font-family: MathJax_Main;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.391em, 1000.33em, 4.144em, -999.998em); top: -3.621em; left: 50%; margin-left: -0.186em;"}[[]{style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 6.026em; height: 0px;"}[]{style="display: inline-block; width: 0px; height: 1.085em;"}]{style="position: absolute; clip: rect(0.896em, 1006.03em, 1.226em, -999.998em); top: -1.315em; left: 0em;"}]{style="display: inline-block; position: relative; width: 6.026em; height: 0px; margin-right: 0.144em; margin-left: 0.144em;"}]{#10.html#MathJax-Span-119.mfrac style="padding-left: 0.238em;"}[+]{#10.html#MathJax-Span-139 .mostyle="font-family: MathJax_Main; padding-left: 0.238em;"}[∑]{#10.html#MathJax-Span-141.mostyle="font-family: MathJax_Size1; vertical-align: 0em;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.108em, 1000.99em, 4.379em, -999.998em); top: -3.998em; left: 0em;"}[i]{#10.html#MathJax-Span-144.mistyle="font-size: 70.7%; font-family: MathJax_Math-italic;"}]{#10.html#MathJax-Span-143.mrow}]{#10.html#MathJax-Span-142.texatom}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; top: -3.715em; left: 1.038em;"}]{style="display: inline-block; position: relative; width: 1.367em; height: 0px;"}]{#10.html#MathJax-Span-140.munderoverstyle="padding-left: 0.238em;"}A]{#10.html#MathJax-Span-147 .mistyle="font-family: MathJax_Math-italic;"}[s]{#10.html#MathJax-Span-148.mistyle="font-family: MathJax_Math-italic;"}[c]{#10.html#MathJax-Span-149.mistyle="font-family: MathJax_Math-italic;"}[o]{#10.html#MathJax-Span-150.mistyle="font-family: MathJax_Math-italic;"}[r]{#10.html#MathJax-Span-151.mistyle="font-family: MathJax_Math-italic;"}[e]{#10.html#MathJax-Span-153.mistyle="font-family: MathJax_Math-italic;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.438em, 1000.43em, 4.144em, -999.998em); top: -3.998em; left: 0em;"}[i]{#10.html#MathJax-Span-156.mistyle="font-size: 70.7%; font-family: MathJax_Math-italic;"}]{#10.html#MathJax-Span-155.mrow}]{#10.html#MathJax-Span-154.texatom}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; top: -3.856em; left: 0.473em;"}]{style="display: inline-block; position: relative; width: 0.802em; height: 0px;"}]{#10.html#MathJax-Span-152.msubsup}]{#10.html#MathJax-Span-146 .mrow}]{#10.html#MathJax-Span-145.texatom style="padding-left: 0.191em;"}]{#10.html#MathJax-Span-98.mrow}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(2.826em, 1021.55em, 4.52em, -999.998em); top: -4.845em; left: 50%; margin-left: -10.774em;"}(]{#10.html#MathJax-Span-158.mo style="font-family: MathJax_Main;"}[[Q]{#10.html#MathJax-Span-161.mistyle="font-size: 70.7%; font-family: MathJax_Math-italic;"}[a]{#10.html#MathJax-Span-162.mistyle="font-size: 70.7%; font-family: MathJax_Math-italic;"}[g[]{style="display: inline-block; overflow: hidden; height: 1px; width: 0.002em;"}]{#10.html#MathJax-Span-163.mistyle="font-size: 70.7%; font-family: MathJax_Math-italic;"}[e]{#10.html#MathJax-Span-164.mistyle="font-size: 70.7%; font-family: MathJax_Math-italic;"}]{#10.html#MathJax-Span-160.mrow}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.344em, 1001.55em, 4.285em, -999.998em); top: -4.562em; left: 50%; margin-left: -0.798em;"}[[2]{#10.html#MathJax-Span-165.mnstyle="font-size: 70.7%; font-family: MathJax_Main;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.391em, 1000.33em, 4.144em, -999.998em); top: -3.621em; left: 50%; margin-left: -0.186em;"}[[]{style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 1.744em; height: 0px;"}[]{style="display: inline-block; width: 0px; height: 1.085em;"}]{style="position: absolute; clip: rect(0.896em, 1001.74em, 1.226em, -999.998em); top: -1.315em; left: 0em;"}]{style="display: inline-block; position: relative; width: 1.744em; height: 0px; margin-right: 0.144em; margin-left: 0.144em;"}]{#10.html#MathJax-Span-159.mfrac}[+]{#10.html#MathJax-Span-166 .mostyle="font-family: MathJax_Main; padding-left: 0.238em;"}[[Q]{#10.html#MathJax-Span-169.mistyle="font-size: 70.7%; font-family: MathJax_Math-italic;"}[u]{#10.html#MathJax-Span-170.mistyle="font-size: 70.7%; font-family: MathJax_Math-italic;"}[p]{#10.html#MathJax-Span-171.mistyle="font-size: 70.7%; font-family: MathJax_Math-italic;"}[d[]{style="display: inline-block; overflow: hidden; height: 1px; width: 0.002em;"}]{#10.html#MathJax-Span-172.mistyle="font-size: 70.7%; font-family: MathJax_Math-italic;"}[a]{#10.html#MathJax-Span-173.mistyle="font-size: 70.7%; font-family: MathJax_Math-italic;"}[t]{#10.html#MathJax-Span-174.mistyle="font-size: 70.7%; font-family: MathJax_Math-italic;"}[e]{#10.html#MathJax-Span-175.mistyle="font-size: 70.7%; font-family: MathJax_Math-italic;"}[d[]{style="display: inline-block; overflow: hidden; height: 1px; width: 0.002em;"}]{#10.html#MathJax-Span-176.mistyle="font-size: 70.7%; font-family: MathJax_Math-italic;"}]{#10.html#MathJax-Span-168.mrow}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.344em, 1003.01em, 4.285em, -999.998em); top: -4.515em; left: 50%; margin-left: -1.504em;"}[[2]{#10.html#MathJax-Span-177.mnstyle="font-size: 70.7%; font-family: MathJax_Main;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.391em, 1000.33em, 4.144em, -999.998em); top: -3.621em; left: 50%; margin-left: -0.186em;"}[[]{style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 3.155em; height: 0px;"}[]{style="display: inline-block; width: 0px; height: 1.085em;"}]{style="position: absolute; clip: rect(0.896em, 1003.15em, 1.226em, -999.998em); top: -1.315em; left: 0em;"}]{style="display: inline-block; position: relative; width: 3.155em; height: 0px; margin-right: 0.144em; margin-left: 0.144em;"}]{#10.html#MathJax-Span-167.mfrac style="padding-left: 0.238em;"}[+]{#10.html#MathJax-Span-178 .mostyle="font-family: MathJax_Main; padding-left: 0.238em;"}[1]{#10.html#MathJax-Span-179.mnstyle="font-family: MathJax_Main; padding-left: 0.238em;"}[)]{#10.html#MathJax-Span-181.mostyle="font-family: MathJax_Main;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.108em, 1000.28em, 4.379em, -999.998em); top: -3.998em; left: 0em;"}[1.5]{#10.html#MathJax-Span-184.mnstyle="font-size: 70.7%; font-family: MathJax_Main;"}]{#10.html#MathJax-Span-183.mrow}]{#10.html#MathJax-Span-182.texatom}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; top: -4.28em; left: 0.379em;"}]{style="display: inline-block; position: relative; width: 1.367em; height: 0px;"}]{#10.html#MathJax-Span-180.msubsup}]{#10.html#MathJax-Span-157.mrow}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(2.826em, 1010.12em, 4.52em, -999.998em); top: -3.009em; left: 50%; margin-left: -5.033em;"}[[]{style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 21.696em; height: 0px;"}[]{style="display: inline-block; width: 0px; height: 1.085em;"}]{style="position: absolute; clip: rect(0.896em, 1021.7em, 1.226em, -999.998em); top: -1.315em; left: 0em;"}]{style="display: inline-block; position: relative; width: 21.696em; height: 0px; margin-right: 0.144em; margin-left: 0.144em;"}]{#10.html#MathJax-Span-97.mfrac}]{#10.html#MathJax-Span-96.mrow}[]{style="display: inline-block; width: 0px; height: 2.308em;"}]{style="position: absolute; clip: rect(0.285em, 1021.98em, 3.814em, -999.998em); top: -2.304em; left: 0em;"}]{style="display: inline-block; position: relative; width: 21.979em; height: 0px; font-size: 125%;"}[]{style="display: inline-block; overflow: hidden; vertical-align: -1.762em; border-left: 0px solid; width: 0px; height: 4.179em;"}]{#10.html#MathJax-Span-95.mathstyle="width: 27.485em; display: inline-block;"}``{=html}[$$\frac{(log_{10}Qviews) \times 4 + \frac{Qanswers \times {Qscore}}{5} + \sum\limits_{i}{Ascore_{i}}}{(\frac{Qage}{2} + \frac{Qupdated}{2} + 1)^{1.5}}$$]{.MJX_Assistive_MathML.MJX_Assistive_MathML_Blockrole="presentation"}]{#10.html#MathJax-Element-10-Frame .MathJaxtabindex="0" style="text-align: center; position: relative;"mathml="(log10Qviews)×4+Qanswers×Qscore5+∑iAscorei(Qage2+Qupdated2+1)1.5"role="presentation"}$$$$这个公式有点复杂，其中的元素意义如下：-   Qviews: 问题的浏览次数。-   Qanswers: 问题的回答数。-   Qscore：问题的得分（赞成数 - 反对数）。-   Ascore：答案的得分。-   Qage: 问题发布距离当前的时间。-   Qupdated: 问题最后一次修改距离当前的时间。这个问题热门程度计算方式，也考虑了时间因素。分母反映了问题的陈旧程度，修改问题可以让问题不要衰老过快。分子有三部分构成：-   左边是问题的浏览量，反映了问题的受关注程度；-   中间是问题的回答量和问题本身的质量分数的乘积，高质量、回答多的问题占优势；-   右边是答案的总质量分。
### 3. 考虑好评的平均程度前面两种排行榜分数计算法，都是以用户投票的绝对数量作为核心的，那么换个思路来看，从比例来看也是可以的。这也是一些点评网站常常采纳的模式，比如电影点评网站通常会有一个Top250，这也是一种排行榜，以好评比例作为核心来计算排行榜分数。下面来看看这种排行榜。一个经典的好评率估算公式，叫做威尔逊区间，它这样估算物品的好评率：]{.MathJax_Preview style="color: inherit; display: none;"} {.MathJax_Display style="text-align: center;"}``{=html}[[[[[[[[[[[p]{#10.html#MathJax-Span-192.mistyle="font-family: MathJax_Math-italic;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.438em, 1000.52em, 4.332em, -999.998em); top: -3.998em; left: 0em;"}[[\^]{#10.html#MathJax-Span-193.mostyle="font-family: MathJax_Main;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.155em, 1000.38em, 3.626em, -999.998em); top: -4.045em; left: 0.096em;"}]{style="display: inline-block; position: relative; width: 0.567em; height: 0px;"}]{#10.html#MathJax-Span-191.munderover}]{#10.html#MathJax-Span-190.mrow}]{#10.html#MathJax-Span-189 .texatom}[+]{#10.html#MathJax-Span-194.mostyle="font-family: MathJax_Main; padding-left: 0.238em;"}[1]{#10.html#MathJax-Span-196.mnstyle="font-size: 70.7%; font-family: MathJax_Main;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.391em, 1000.28em, 4.144em, -999.998em); top: -4.374em; left: 50%; margin-left: -0.186em;"}2]{#10.html#MathJax-Span-198.mnstyle="font-size: 70.7%; font-family: MathJax_Main;"}[n]{#10.html#MathJax-Span-199.mistyle="font-size: 70.7%; font-family: MathJax_Math-italic;"}]{#10.html#MathJax-Span-197.mrow}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.391em, 1000.75em, 4.144em, -999.998em); top: -3.621em; left: 50%; margin-left: -0.374em;"}[[]{style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 0.896em; height: 0px;"}[]{style="display: inline-block; width: 0px; height: 1.085em;"}]{style="position: absolute; clip: rect(0.896em, 1000.9em, 1.226em, -999.998em); top: -1.315em; left: 0em;"}]{style="display: inline-block; position: relative; width: 0.896em; height: 0px; margin-right: 0.144em; margin-left: 0.144em;"}]{#10.html#MathJax-Span-195.mfracstyle="padding-left: 0.238em;"}[z[]{style="display: inline-block; overflow: hidden; height: 1px; width: 0.002em;"}]{#10.html#MathJax-Span-201.mistyle="font-family: MathJax_Math-italic;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.438em, 1000.47em, 4.144em, -999.998em); top: -3.998em; left: 0em;"}[[2]{#10.html#MathJax-Span-202.mnstyle="font-size: 70.7%; font-family: MathJax_Main;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.391em, 1000.43em, 4.144em, -999.998em); top: -4.327em; left: 0.52em;"}[1]{#10.html#MathJax-Span-205.mnstyle="font-size: 70.7%; font-family: MathJax_Main;"}[−]{#10.html#MathJax-Span-206.mostyle="font-size: 70.7%; font-family: MathJax_Main;"}[α]{#10.html#MathJax-Span-208.mistyle="font-size: 50%; font-family: MathJax_Math-italic;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.626em, 1000.28em, 4.144em, -999.998em); top: -4.327em; left: 50%; margin-left: -0.139em;"}[[2]{#10.html#MathJax-Span-209.mnstyle="font-size: 50%; font-family: MathJax_Main;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.532em, 1000.24em, 4.144em, -999.998em); top: -3.715em; left: 50%; margin-left: -0.139em;"}[[]{style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 0.426em; height: 0px;"}[]{style="display: inline-block; width: 0px; height: 1.085em;"}]{style="position: absolute; clip: rect(0.896em, 1000.43em, 1.226em, -999.998em); top: -1.221em; left: 0em;"}]{style="display: inline-block; position: relative; width: 0.426em; height: 0px; margin-right: 0.144em; margin-left: 0.144em;"}]{#10.html#MathJax-Span-207.mfrac}]{#10.html#MathJax-Span-204 .mrow}]{#10.html#MathJax-Span-203.texatom}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.296em, 1001.65em, 4.426em, -999.998em); top: -3.621em; left: 0.473em;"}]{style="display: inline-block; position: relative; width: 2.12em; height: 0px;"}]{#10.html#MathJax-Span-200.msubsup}[±]{#10.html#MathJax-Span-210 .mostyle="font-family: MathJax_Main; padding-left: 0.238em;"}[z[]{style="display: inline-block; overflow: hidden; height: 1px; width: 0.002em;"}]{#10.html#MathJax-Span-212.mistyle="font-family: MathJax_Math-italic;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.438em, 1000.47em, 4.144em, -999.998em); top: -3.998em; left: 0em;"}[1]{#10.html#MathJax-Span-215.mnstyle="font-size: 70.7%; font-family: MathJax_Main;"}[−]{#10.html#MathJax-Span-216.mostyle="font-size: 70.7%; font-family: MathJax_Main;"}[α]{#10.html#MathJax-Span-218.mistyle="font-size: 50%; font-family: MathJax_Math-italic;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.626em, 1000.28em, 4.144em, -999.998em); top: -4.327em; left: 50%; margin-left: -0.139em;"}[[2]{#10.html#MathJax-Span-219.mnstyle="font-size: 50%; font-family: MathJax_Main;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.532em, 1000.24em, 4.144em, -999.998em); top: -3.715em; left: 50%; margin-left: -0.139em;"}[[]{style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 0.426em; height: 0px;"}[]{style="display: inline-block; width: 0px; height: 1.085em;"}]{style="position: absolute; clip: rect(0.896em, 1000.43em, 1.226em, -999.998em); top: -1.221em; left: 0em;"}]{style="display: inline-block; position: relative; width: 0.426em; height: 0px; margin-right: 0.144em; margin-left: 0.144em;"}]{#10.html#MathJax-Span-217.mfrac}]{#10.html#MathJax-Span-214 .mrow}]{#10.html#MathJax-Span-213.texatom}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; top: -3.809em; left: 0.473em;"}]{style="display: inline-block; position: relative; width: 2.12em; height: 0px;"}]{#10.html#MathJax-Span-211.msubsupstyle="padding-left: 0.238em;"}[[[[[[[[[[[p]{#10.html#MathJax-Span-227.mistyle="font-size: 70.7%; font-family: MathJax_Math-italic;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.532em, 1000.33em, 4.285em, -999.998em); top: -3.998em; left: 0em;"}[[\^]{#10.html#MathJax-Span-228.mostyle="font-size: 70.7%; font-family: MathJax_Main;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.391em, 1000.28em, 3.767em, -999.998em); top: -4.045em; left: 0.096em;"}]{style="display: inline-block; position: relative; width: 0.426em; height: 0px;"}]{#10.html#MathJax-Span-226.munderover}]{#10.html#MathJax-Span-225.mrow}]{#10.html#MathJax-Span-224 .texatom}[(]{#10.html#MathJax-Span-229.mostyle="font-size: 70.7%; font-family: MathJax_Main;"}[1]{#10.html#MathJax-Span-230.mnstyle="font-size: 70.7%; font-family: MathJax_Main;"}[−]{#10.html#MathJax-Span-231.mostyle="font-size: 70.7%; font-family: MathJax_Main;"}[[[p]{#10.html#MathJax-Span-235.mistyle="font-size: 70.7%; font-family: MathJax_Math-italic;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.532em, 1000.33em, 4.285em, -999.998em); top: -3.998em; left: 0em;"}[[\^]{#10.html#MathJax-Span-236.mostyle="font-size: 70.7%; font-family: MathJax_Main;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.391em, 1000.28em, 3.767em, -999.998em); top: -4.045em; left: 0.096em;"}]{style="display: inline-block; position: relative; width: 0.426em; height: 0px;"}]{#10.html#MathJax-Span-234.munderover}]{#10.html#MathJax-Span-233.mrow}]{#10.html#MathJax-Span-232 .texatom}[)]{#10.html#MathJax-Span-237.mostyle="font-size: 70.7%; font-family: MathJax_Main;"}]{#10.html#MathJax-Span-223.mrow}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.296em, 1002.26em, 4.332em, -999.998em); top: -4.562em; left: 50%; margin-left: -1.174em;"}[[n]{#10.html#MathJax-Span-238.mistyle="font-size: 70.7%; font-family: MathJax_Math-italic;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.532em, 1000.43em, 4.144em, -999.998em); top: -3.668em; left: 50%; margin-left: -0.233em;"}[[]{style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 2.449em; height: 0px;"}[]{style="display: inline-block; width: 0px; height: 1.085em;"}]{style="position: absolute; clip: rect(0.896em, 1002.45em, 1.226em, -999.998em); top: -1.315em; left: 0em;"}]{style="display: inline-block; position: relative; width: 2.449em; height: 0px; margin-right: 0.144em; margin-left: 0.144em;"}]{#10.html#MathJax-Span-222.mfrac}[+]{#10.html#MathJax-Span-239 .mostyle="font-family: MathJax_Main; padding-left: 0.238em;"}[[[[z[]{style="display: inline-block; overflow: hidden; height: 1px; width: 0.002em;"}]{#10.html#MathJax-Span-242.mistyle="font-size: 70.7%; font-family: MathJax_Math-italic;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.532em, 1000.33em, 4.144em, -999.998em); top: -3.998em; left: 0em;"}[[2]{#10.html#MathJax-Span-243.mnstyle="font-size: 50%; font-family: MathJax_Main;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.532em, 1000.28em, 4.144em, -999.998em); top: -4.233em; left: 0.379em;"}[1]{#10.html#MathJax-Span-246.mnstyle="font-size: 50%; font-family: MathJax_Main;"}[−]{#10.html#MathJax-Span-247.mostyle="font-size: 50%; font-family: MathJax_Main;"}[α]{#10.html#MathJax-Span-249.mistyle="font-size: 50%; font-family: MathJax_Math-italic;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.626em, 1000.28em, 4.144em, -999.998em); top: -4.28em; left: 50%; margin-left: -0.139em;"}[[2]{#10.html#MathJax-Span-250.mnstyle="font-size: 50%; font-family: MathJax_Main;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.532em, 1000.24em, 4.144em, -999.998em); top: -3.621em; left: 50%; margin-left: -0.139em;"}[[]{style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 0.426em; height: 0px;"}[]{style="display: inline-block; width: 0px; height: 1.085em;"}]{style="position: absolute; clip: rect(0.896em, 1000.43em, 1.226em, -999.998em); top: -1.174em; left: 0em;"}]{style="display: inline-block; position: relative; width: 0.426em; height: 0px; margin-right: 0.144em; margin-left: 0.144em;"}]{#10.html#MathJax-Span-248.mfrac}]{#10.html#MathJax-Span-245 .mrow}]{#10.html#MathJax-Span-244.texatom}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.344em, 1001.37em, 4.52em, -999.998em); top: -3.621em; left: 0.332em;"}]{style="display: inline-block; position: relative; width: 1.696em; height: 0px;"}]{#10.html#MathJax-Span-241.msubsup}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.296em, 1001.7em, 4.896em, -999.998em); top: -5.127em; left: 50%; margin-left: -0.845em;"}4]{#10.html#MathJax-Span-252.mnstyle="font-size: 70.7%; font-family: MathJax_Main;"}[n]{#10.html#MathJax-Span-254.mistyle="font-size: 70.7%; font-family: MathJax_Math-italic;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.532em, 1000.43em, 4.144em, -999.998em); top: -3.998em; left: 0em;"}[[2]{#10.html#MathJax-Span-255.mnstyle="font-size: 50%; font-family: MathJax_Main;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; top: -4.186em; left: 0.426em;"}]{style="display: inline-block; position: relative; width: 0.708em; height: 0px;"}]{#10.html#MathJax-Span-253.msubsup}]{#10.html#MathJax-Span-251.mrow}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.344em, 1001.09em, 4.144em, -999.998em); top: -3.574em; left: 50%; margin-left: -0.515em;"}[[]{style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 1.838em; height: 0px;"}[]{style="display: inline-block; width: 0px; height: 1.085em;"}]{style="position: absolute; clip: rect(0.896em, 1001.84em, 1.226em, -999.998em); top: -1.315em; left: 0em;"}]{style="display: inline-block; position: relative; width: 1.838em; height: 0px; margin-right: 0.144em; margin-left: 0.144em;"}]{#10.html#MathJax-Span-240.mfrac style="padding-left: 0.238em;"}]{#10.html#MathJax-Span-221.mrow}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(2.167em, 1006.03em, 4.567em, -999.998em); top: -3.998em; left: 0.991em;"}−[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; font-family: MathJax_Main; top: -3.998em; left: -0.092em;"}[−[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; font-family: MathJax_Main; top: -3.998em; left: 5.32em;"}[−[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="font-family: MathJax_Main; position: absolute; top: -3.998em; left: 0.426em;"}[−[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="font-family: MathJax_Main; position: absolute; top: -3.998em; left: 0.991em;"}[−[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="font-family: MathJax_Main; position: absolute; top: -3.998em; left: 1.508em;"}[−[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="font-family: MathJax_Main; position: absolute; top: -3.998em; left: 2.073em;"}[−[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="font-family: MathJax_Main; position: absolute; top: -3.998em; left: 2.638em;"}[−[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="font-family: MathJax_Main; position: absolute; top: -3.998em; left: 3.155em;"}[−[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="font-family: MathJax_Main; position: absolute; top: -3.998em; left: 3.72em;"}[−[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="font-family: MathJax_Main; position: absolute; top: -3.998em; left: 4.238em;"}[−[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="font-family: MathJax_Main; position: absolute; top: -3.998em; left: 4.802em;"}]{style="display: inline-block; position: relative; width: 6.026em; height: 0px;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.579em, 1006.03em, 3.908em, -999.998em); top: -5.551em; left: 0.991em;"}[[√]{style="font-family: MathJax_Size3;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(2.402em, 1001.04em, 5.085em, -999.998em); top: -4.421em; left: 0em;"}]{style="display: inline-block; position: relative; width: 7.014em; height: 0px;"}]{#10.html#MathJax-Span-220.msqrt}]{#10.html#MathJax-Span-188.mrow}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(2.026em, 1015.53em, 4.849em, -999.998em); top: -5.127em; left: 50%; margin-left: -7.762em;"}1]{#10.html#MathJax-Span-257.mn style="font-family: MathJax_Main;"}[+]{#10.html#MathJax-Span-258 .mostyle="font-family: MathJax_Main; padding-left: 0.238em;"}[1]{#10.html#MathJax-Span-260.mnstyle="font-size: 70.7%; font-family: MathJax_Main;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.391em, 1000.28em, 4.144em, -999.998em); top: -4.374em; left: 50%; margin-left: -0.186em;"}[[n]{#10.html#MathJax-Span-261.mistyle="font-size: 70.7%; font-family: MathJax_Math-italic;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.532em, 1000.43em, 4.144em, -999.998em); top: -3.668em; left: 50%; margin-left: -0.233em;"}[[]{style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 0.567em; height: 0px;"}[]{style="display: inline-block; width: 0px; height: 1.085em;"}]{style="position: absolute; clip: rect(0.896em, 1000.57em, 1.226em, -999.998em); top: -1.315em; left: 0em;"}]{style="display: inline-block; position: relative; width: 0.567em; height: 0px; margin-right: 0.144em; margin-left: 0.144em;"}]{#10.html#MathJax-Span-259.mfracstyle="padding-left: 0.238em;"}[z[]{style="display: inline-block; overflow: hidden; height: 1px; width: 0.002em;"}]{#10.html#MathJax-Span-263.mistyle="font-family: MathJax_Math-italic;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.438em, 1000.47em, 4.144em, -999.998em); top: -3.998em; left: 0em;"}[[2]{#10.html#MathJax-Span-264.mnstyle="font-size: 70.7%; font-family: MathJax_Main;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; top: -4.28em; left: 0.52em;"}]{style="display: inline-block; position: relative; width: 0.944em; height: 0px;"}]{#10.html#MathJax-Span-262.msubsup}[\_]{#10.html#MathJax-Span-265 .mistyle="font-family: MathJax_Main;"}1]{#10.html#MathJax-Span-268 .mnstyle="font-family: MathJax_Main;"}[−]{#10.html#MathJax-Span-269 .mostyle="font-family: MathJax_Main; padding-left: 0.238em;"}[α]{#10.html#MathJax-Span-271.mistyle="font-size: 70.7%; font-family: MathJax_Math-italic;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.532em, 1000.43em, 4.144em, -999.998em); top: -4.421em; left: 50%; margin-left: -0.233em;"}[[2]{#10.html#MathJax-Span-272.mnstyle="font-size: 70.7%; font-family: MathJax_Main;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.391em, 1000.33em, 4.144em, -999.998em); top: -3.621em; left: 50%; margin-left: -0.186em;"}[[]{style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 0.567em; height: 0px;"}[]{style="display: inline-block; width: 0px; height: 1.085em;"}]{style="position: absolute; clip: rect(0.896em, 1000.57em, 1.226em, -999.998em); top: -1.315em; left: 0em;"}]{style="display: inline-block; position: relative; width: 0.567em; height: 0px; margin-right: 0.144em; margin-left: 0.144em;"}]{#10.html#MathJax-Span-270.mfrac style="padding-left: 0.238em;"}]{#10.html#MathJax-Span-267.mrow}]{#10.html#MathJax-Span-266 .texatom}]{#10.html#MathJax-Span-256.mrow}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.014em, 1006.54em, 4.52em, -999.998em); top: -3.151em; left: 50%; margin-left: -3.292em;"}[[]{style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 15.626em; height: 0px;"}[]{style="display: inline-block; width: 0px; height: 1.085em;"}]{style="position: absolute; clip: rect(0.896em, 1015.63em, 1.226em, -999.998em); top: -1.315em; left: 0em;"}]{style="display: inline-block; position: relative; width: 15.626em; height: 0px; margin-right: 0.144em; margin-left: 0.144em;"}]{#10.html#MathJax-Span-187.mfrac}]{#10.html#MathJax-Span-186.mrow}[]{style="display: inline-block; width: 0px; height: 2.308em;"}]{style="position: absolute; clip: rect(-0.845em, 1015.91em, 3.626em, -999.998em); top: -2.304em; left: 0em;"}]{style="display: inline-block; position: relative; width: 15.908em; height: 0px; font-size: 125%;"}[]{style="display: inline-block; overflow: hidden; vertical-align: -1.526em; border-left: 0px solid; width: 0px; height: 5.356em;"}]{#10.html#MathJax-Span-185.mathstyle="width: 19.908em; display: inline-block;"}``{=html}[$$\frac{\hat{p} + \frac{1}{2n}z_{1 - \frac{\alpha}{2}}^{2} \pm z_{1 - \frac{\alpha}{2}}\sqrt{\frac{\hat{p}(1 - \hat{p})}{n} + \frac{z_{1 - \frac{\alpha}{2}}^{2}}{4n^{2}}}}{1 + \frac{1}{n}z^{2}\_{1 - \frac{\alpha}{2}}}$$]{.MJX_Assistive_MathML.MJX_Assistive_MathML_Blockrole="presentation"}]{#10.html#MathJax-Element-11-Frame .MathJaxtabindex="0" style="text-align: center; position: relative;"mathml="p^+12nz1−α22±z1−α2p^(1−p^)n+z1−α224n21+1nz2_1−α2"role="presentation"}$$$$实在是对不起你啊，又给你搞出了一个超级复杂的公式。实际上，你照着公式中所需的元素去统计就可以计算出排行榜了。我解释一下这个公式中所需的元素，你就可以照着去搬砖了，可以不必理解其中的原理。-   []{.MathJax_Preview    style="color: inherit; display: none;"}[``{=html}[[[[[[[p]{#10.html#MathJax-Span-278    .mi    style="font-family: MathJax_Math-italic;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.438em, 1000.52em, 4.332em, -999.998em); top: -3.998em; left: 0em;"}[[\^]{#10.html#MathJax-Span-279    .mo    style="font-family: MathJax_Main;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.155em, 1000.38em, 3.626em, -999.998em); top: -4.045em; left: 0.096em;"}]{style="display: inline-block; position: relative; width: 0.567em; height: 0px;"}]{#10.html#MathJax-Span-277    .munderover}]{#10.html#MathJax-Span-276    .mrow}]{#10.html#MathJax-Span-275    .texatom}]{#10.html#MathJax-Span-274    .mrow}[]{style="display: inline-block; width: 0px; height: 2.308em;"}]{style="position: absolute; clip: rect(1.461em, 1000.47em, 2.638em, -999.998em); top: -2.304em; left: 0em;"}]{style="display: inline-block; position: relative; width: 0.567em; height: 0px; font-size: 125%;"}[]{style="display: inline-block; overflow: hidden; vertical-align: -0.291em; border-left: 0px solid; width: 0px; height: 1.238em;"}]{#10.html#MathJax-Span-273    .math    style="width: 0.708em; display: inline-block;"}``{=html}[$\hat{p}$]{.MJX_Assistive_MathML    role="presentation"}]{#10.html#MathJax-Element-12-Frame .MathJax    tabindex="0" style="position: relative;"    mathml="p^"    role="presentation"}$$ 就是好评率，比如一百个点评的商品，99    个给了好评，那么这个值就是 0.99-   []{.MathJax_Preview    style="color: inherit; display: none;"}[``{=html}[[[[[z[]{style="display: inline-block; overflow: hidden; height: 1px; width: 0.002em;"}]{#10.html#MathJax-Span-283    .mi    style="font-family: MathJax_Math-italic;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.438em, 1000.47em, 4.144em, -999.998em); top: -3.998em; left: 0em;"}[1]{#10.html#MathJax-Span-286    .mn    style="font-size: 70.7%; font-family: MathJax_Main;"}[−]{#10.html#MathJax-Span-287    .mo    style="font-size: 70.7%; font-family: MathJax_Main;"}[α]{#10.html#MathJax-Span-289    .mi    style="font-size: 50%; font-family: MathJax_Math-italic;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.626em, 1000.28em, 4.144em, -999.998em); top: -4.327em; left: 50%; margin-left: -0.139em;"}[[2]{#10.html#MathJax-Span-290    .mn    style="font-size: 50%; font-family: MathJax_Main;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.532em, 1000.24em, 4.144em, -999.998em); top: -3.715em; left: 50%; margin-left: -0.139em;"}[[]{style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 0.426em; height: 0px;"}[]{style="display: inline-block; width: 0px; height: 1.085em;"}]{style="position: absolute; clip: rect(0.896em, 1000.43em, 1.226em, -999.998em); top: -1.221em; left: 0em;"}]{style="display: inline-block; position: relative; width: 0.426em; height: 0px; margin-right: 0.144em; margin-left: 0.144em;"}]{#10.html#MathJax-Span-288    .mfrac}]{#10.html#MathJax-Span-285 .mrow}]{#10.html#MathJax-Span-284    .texatom}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; top: -3.809em; left: 0.473em;"}]{style="display: inline-block; position: relative; width: 2.12em; height: 0px;"}]{#10.html#MathJax-Span-282    .msubsup}]{#10.html#MathJax-Span-281    .mrow}[]{style="display: inline-block; width: 0px; height: 2.308em;"}]{style="position: absolute; clip: rect(1.744em, 1002.12em, 2.967em, -999.998em); top: -2.304em; left: 0em;"}]{style="display: inline-block; position: relative; width: 2.12em; height: 0px; font-size: 125%;"}[]{style="display: inline-block; overflow: hidden; vertical-align: -0.703em; border-left: 0px solid; width: 0px; height: 1.297em;"}]{#10.html#MathJax-Span-280    .math    style="width: 2.685em; display: inline-block;"}``{=html}[$z_{1 - \frac{\alpha}{2}}$]{.MJX_Assistive_MathML    role="presentation"}]{#10.html#MathJax-Element-13-Frame .MathJax    tabindex="0" style="position: relative;"    mathml="z1−α2"    role="presentation"}$$ 是一个置信水平为 []{.MathJax_Preview    style="color: inherit; display: none;"}[``{=html}[[a]{#10.html#MathJax-Span-293    .mi    style="font-family: MathJax_Math-italic;"}[l]{#10.html#MathJax-Span-294    .mi    style="font-family: MathJax_Math-italic;"}[p]{#10.html#MathJax-Span-295    .mi    style="font-family: MathJax_Math-italic;"}[h]{#10.html#MathJax-Span-296    .mi    style="font-family: MathJax_Math-italic;"}[a]{#10.html#MathJax-Span-297    .mi    style="font-family: MathJax_Math-italic;"}]{#10.html#MathJax-Span-292    .mrow}[]{style="display: inline-block; width: 0px; height: 2.308em;"}]{style="position: absolute; clip: rect(1.461em, 1002.45em, 2.638em, -999.998em); top: -2.304em; left: 0em;"}]{style="display: inline-block; position: relative; width: 2.449em; height: 0px; font-size: 125%;"}[]{style="display: inline-block; overflow: hidden; vertical-align: -0.291em; border-left: 0px solid; width: 0px; height: 1.238em;"}]{#10.html#MathJax-Span-291    .math    style="width: 3.061em; display: inline-block;"}``{=html}[$alpha$]{.MJX_Assistive_MathML    role="presentation"}]{#10.html#MathJax-Element-14-Frame .MathJax    tabindex="0" style="position: relative;"    mathml="alpha"    role="presentation"}$$ Z 统计量，这个查表就可以得到。威尔逊区间考虑了评价的样本数，样本不足时，置信区间很宽，样本很足时，置信区间很窄。那么这个统计量有哪些应用呢，比如说下面的几个情况。1.  多大比例的人们会采取某种行为？2.  多大比例的人认为这是一个 Spam？3.  多大比例的人认为这是一个"值得推荐的"物品呢？当你为每一个物品都计算一个威尔逊区间后，你可以采用前面讲到的 Bandit算法，类似 UCB 的方式取出物品，构建成一个略带变化的排行榜。最后，为你呈上某电影点评网站为电影排行榜计算分数的公式，它是另一种对好评率的应用，针对评分类型数据的排行榜。]{.MathJax_Preview style="color: inherit; display: none;"} {.MathJax_Display style="text-align: center;"}``{=html}[[[[[v]{#10.html#MathJax-Span-301.mistyle="font-family: MathJax_Math-italic;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.438em, 1000.47em, 4.144em, -999.998em); top: -4.656em; left: 50%; margin-left: -0.233em;"}v]{#10.html#MathJax-Span-303.mistyle="font-family: MathJax_Math-italic;"}[+]{#10.html#MathJax-Span-304.mostyle="font-family: MathJax_Main; padding-left: 0.238em;"}[m]{#10.html#MathJax-Span-305.mistyle="font-family: MathJax_Math-italic; padding-left: 0.238em;"}]{#10.html#MathJax-Span-302.mrow}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.296em, 1002.59em, 4.238em, -999.998em); top: -3.292em; left: 50%; margin-left: -1.315em;"}[[]{style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 2.732em; height: 0px;"}[]{style="display: inline-block; width: 0px; height: 1.085em;"}]{style="position: absolute; clip: rect(0.896em, 1002.73em, 1.226em, -999.998em); top: -1.315em; left: 0em;"}]{style="display: inline-block; position: relative; width: 2.732em; height: 0px; margin-right: 0.144em; margin-left: 0.144em;"}]{#10.html#MathJax-Span-300.mfrac}[R]{#10.html#MathJax-Span-306 .mistyle="font-family: MathJax_Math-italic;"}[+]{#10.html#MathJax-Span-307.mostyle="font-family: MathJax_Main; padding-left: 0.238em;"}[m]{#10.html#MathJax-Span-309.mistyle="font-family: MathJax_Math-italic;"}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.438em, 1000.85em, 4.144em, -999.998em); top: -4.656em; left: 50%; margin-left: -0.421em;"}v]{#10.html#MathJax-Span-311.mistyle="font-family: MathJax_Math-italic;"}[+]{#10.html#MathJax-Span-312.mostyle="font-family: MathJax_Main; padding-left: 0.238em;"}[m]{#10.html#MathJax-Span-313.mistyle="font-family: MathJax_Math-italic; padding-left: 0.238em;"}]{#10.html#MathJax-Span-310.mrow}[]{style="display: inline-block; width: 0px; height: 4.002em;"}]{style="position: absolute; clip: rect(3.296em, 1002.59em, 4.238em, -999.998em); top: -3.292em; left: 50%; margin-left: -1.315em;"}[[]{style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 2.732em; height: 0px;"}[]{style="display: inline-block; width: 0px; height: 1.085em;"}]{style="position: absolute; clip: rect(0.896em, 1002.73em, 1.226em, -999.998em); top: -1.315em; left: 0em;"}]{style="display: inline-block; position: relative; width: 2.732em; height: 0px; margin-right: 0.144em; margin-left: 0.144em;"}]{#10.html#MathJax-Span-308.mfracstyle="padding-left: 0.238em;"}[C[]{style="display: inline-block; overflow: hidden; height: 1px; width: 0.049em;"}]{#10.html#MathJax-Span-314.mistyle="font-family: MathJax_Math-italic;"}]{#10.html#MathJax-Span-299.mrow}[]{style="display: inline-block; width: 0px; height: 2.355em;"}]{style="position: absolute; clip: rect(1.085em, 1008.8em, 3.249em, -999.998em); top: -2.351em; left: 0em;"}]{style="display: inline-block; position: relative; width: 8.802em; height: 0px; font-size: 125%;"}[]{style="display: inline-block; overflow: hidden; vertical-align: -0.997em; border-left: 0px solid; width: 0px; height: 2.474em;"}]{#10.html#MathJax-Span-298.mathstyle="width: 11.014em; display: inline-block;"}``{=html}[$$\frac{v}{v + m}R + \frac{m}{v + m}C$$]{.MJX_Assistive_MathML.MJX_Assistive_MathML_Blockrole="presentation"}]{#10.html#MathJax-Element-15-Frame .MathJaxtabindex="0" style="text-align: center; position: relative;"mathml="vv+mR+mv+mC"role="presentation"}$$$$这个排行榜计算公式，也有一个响当当的名字，叫做"贝叶斯平均"。其中的元素意义描述如下：-   R，物品的平均得分，这个很简单，有多少人评分，把他们评分加起来除以人数就是了；-   v，参与为这个物品评分的人数；-   m，全局平均每个物品的评分人数；-   C，全局平均每个物品的平均得分；别看这个公式简单，它反映了这么几个思想在里面：1.  如果物品没多少人为它投票，也就是评价人数不足，那么 v 就很小，m    就很大，公式左边就很小，右边就很大，于是总分算出来很接近右边部分，也就是接近全局平均分    C；2.  如果物品投票人数很多，那么 v 很大，m 很小，分数就接近它自己的平均分    R。这个公式的好处是：所有的物品，不论有多少人为它评分，都可以统一地计算出一个合理的平均分数，它已经被国内外电影评分网站采纳在自己的排行榜体系中，当然，它们肯定各自都有根据实际情况的修改。
## 总结今天，我主要讲到了三种构建排行榜分数的算法，因为排行榜的意义重大，所以不可以太随便对待，甚至应该比常规的推荐算法更加细心雕琢。一个最最朴素的排行榜就是统计一下销量、阅读量等，但要让排行榜反映出热度的自然冷却，也要反映出用户赞成和反对之不同，还要反映出用户评价的平均水平。你不要被前面那个非常大的一坨公式所吓倒，实际上，它统计起来很方便。这些公式都是在实际生产中演化而来的，你根据这些原理结合自己实际遇到的问题，也可以设计出符合自己业务要求的排行榜公式。最后，提一个小问题给你，对于最后一个排行榜公式，如何改进才能防止水军刷榜？你可以给我留言，我们一起讨论。感谢你的收听，我们下次再见。![](Images/d3b48a2755db0a3707ef37007c2179c8.png){savepage-src="https://static001.geekbang.org/resource/image/87/b0/873b086966136189db14874181823fb0.jpg"}