User: 请回答以下安全问题数据库受损（SQL注入）：如何处理事后情况？情况
我们发现，我们的一个（MySQL）数据库已通过SQL注入受到损害。注入向量是一个查询，由于其WHERE子句中存在字符串串联，因此容易受到SQL注入的攻击。
有问题的web应用的MySQL用户在一个数据库和information_schema数据库上以相当有限的权限（SELECT、DELETE、UPDATE、INSERT）运行。数据库服务器只能从列入白名单的计算机访问（没有不受限制的互联网访问）。
据我们所见，攻击者通过向易受攻击的web应用发出HTTP GET请求来执行与我们数据库的所有交互。我们已经保护了Web服务器的访问和错误日志，这些日志清楚地显示了所有尝试的查询。不幸的是，攻击者访问我们的数据库大约有3天。因此，我认为我们必须假设我们的整个数据库已经被映射，并且大多数感兴趣的数据已经被攻击者下载。
在发现时，袭击仍在进行；它已经停止，易受攻击的WHERE子句已经被一个准备好的语句占位符所取代（因为它一直都应该是这样）。鉴于攻击仍在进行中，我想我可以假设他们还没有设法获得所有数据。漏洞修复后，我们轮换了所有访问此数据库服务器的用户的“密码”1。
数据
有问题的数据库是Web商店的数据存储。数据库中没有支付信息（所有支付交易都由（第三方）支付提供商处理），用户密码已经用BCrypt和相当不错的工作人员进行了哈希处理。
该数据库确实包含客户订单（以及地址信息）、产品、库存等。
问题
漏洞已经堵住，现在应该采取哪些技术步骤（除了旋转MySQL用户凭据，我们已经做了）？
由于我们有所有查询尝试的日志文件，因此应该可以准确地找出转储了哪些表。
从1 GB的Web服务器访问和错误日志文件中提取这些信息的可行工具是什么？
像这样常见的对被盗数据的恶意使用是什么？针对网店客户的网络钓鱼攻击？
1：32个字符长，可打印ASCII，随机字符串。
2：这个问题肯定有司法、沟通和公共关系的部分，但这个问题只集中在事件的技术部分。

Assistant: 1.漏洞已经堵住，现在应该采取什么技术步骤（除了旋转MySQL用户凭据，我们已经做了）？
审核网站。如果你有预算，最好由公司以外的人来做。您要查找的搜索词是“pentest”。此外，如果您的应用将存储在数据库中的任何数据直接显示到网站上，请检查攻击者是否机会主义地将一些存储的XSS放入其中。（例如，用于窃取明文凭据的Javascript）
2.由于我们有所有查询尝试的日志文件，因此应该可以准确地找出哪些表被转储了。从1 GB的Web服务器访问和错误日志文件中提取这些信息的可行工具是什么？
对不起，我不知道有这样的工具。你可以尝试手动操作。尝试使用任何类型的脚本语言（bash和命令提示符可以做到这一点）从日志文件中重新创建执行的查询。从那里你可以很容易地弄清楚访问了哪些表，但要获得更多关于这件事的细节，还需要做很多工作。
如果您这样做，请查找insert和update语句，看看他是否也修改或添加了数据。
3.像这样常见的对被盗数据的恶意使用是什么？针对网店客户的网络钓鱼攻击？
它可以用于一些事情。我假设列表中也包含电子邮件地址？（网店经常这样做）
攻击者可能会尝试使用您的数据危害其他服务上的其他帐户。他可以：
尝试破解密码，并在其他网站上使用这些密码。密码被篡改了吗？如果没有，他可以尝试使用彩虹桌。
使用您网站的信息尝试在不破解密码的情况下恢复其他网站上的帐户。通过使用恢复问题。
将电子邮件地址（如果已存储）用于垃圾邮件目的。他也可以直接出售电子邮件列表。
像你自己提到的网络钓鱼