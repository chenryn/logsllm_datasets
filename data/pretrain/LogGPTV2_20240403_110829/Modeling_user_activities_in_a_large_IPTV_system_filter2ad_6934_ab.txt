16:00
(a) Switching-on events
Figure 4: The normalized switching-on, switching-off, and channel switching events (one-minute granularity)
4:00
16:00
(b) Switching-off events
Local Time
8:00
12:00
4:00
20:00
(c) Channel switching events
Local time
16:00
20:00
24:00
8:00
12:00
24:00
s
B
T
S
f
o
r
e
b
m
u
n
d
e
z
i
l
a
m
r
o
N
1.6
1.4
1.2
1
0.8
4/2
4/3
4/4
4/5
Local time
4/6
4/7
Figure 3: Number of on-line STBs
the daily living schedules of most people. More interestingly, we
observe that both event rate series are very bursty, with signiﬁcant
spikes aligning closely with hour or half-hour boundaries (it is more
pronounced in Figure 4b). This is due to the fact that most TV
programs are aligned to hour boundaries. Many users may turn on
TV in anticipating for a TV program or turn off TV after watching a
TV program. This introduces signiﬁcant correlations among users’
activities, causing very strong bursts in the aggregate event rates.
3.2 Switching Channels
We now turn to channel switches. Figure 2 shows the distribution
function of the length of channel-sessions, which we deﬁne as the
duration from the time of a user’s last channel switch (or turning
on STB) till the next channel switch (or turning off STB). We ﬁnd
that this distribution also has a long tail, although not as heavy as
those of on- and off-sessions.
Similar to those for switching-on and switching-off events, we
also examine the aggregate event process for channel switches. Fig-
ure 4c shows the time-series of such event rate, which is deﬁned
as the total number of channel switches normalized by the num-
ber of on-line STBs. We note that the diurnal pattern in Figure 4c
is quite representative of different days. Compared to switching-
on/-off event rates, the channel switching events demonstrate even
stronger spikes with the period of 30 minutes. This is again due to
correlated user activities related to TV program alignment – many
users switch channels together when a TV program ends, which
may create temporarily high workload on the IPTV servers.
We next try to gain insight on how IPTV users switch chan-
nels. We classify channel switching events into two categories:
sequential-scanning and target-switching. Sequential scanning
represents the user in a channel-browsing mode by going through
the available channels using the Up/Down button on the remote
controller, while target switching represents the user intentionally
switching to a speciﬁc channel of choice. We assume channel
switches between adjacent channels being the sequential-scanning
and the rest target-switching. To deﬁne the channel adjacency, we
need to infer the list of available channels, which can be quite dif-
ferent from one user to another (e.g., due to different subscription
plans). We keep track of all channels that a STB requests over an
extended period (e.g., one month) and regard these channels as the
complete list.
From the data we collected, we observe that 56% of channel
switching events are sequential-scanning. This is a little bit lower
than our expectation. We ﬁnd that the high ratio of target switching
can be attributed to many advanced features that the IPTV provider
supports, including a user-customized favorite-channel list, a pro-
gram menu where users can browse and switch channels by name,
and an easy access to DVR. All of these help users ﬁnd the TV
program of interest easily and directly. To understand this effect
better, we construct a user’s favorite channel list using a heuris-
tic (top ranked channels by watching time and frequency, e.g.,
watched in at least 4 days of a week) and ﬁnd a large portion
(46%) of the target-switching is toward such “favorite channels".
Among sequential-scanning, we observe an unbalanced up- and
down-channel-switches – 72% of them are up-channel-switches.
It implies that more people prefer increasing channel number. Our
analysis ﬁnds the ratio moderately stable over time, although we do
not have a good intuition on why this is the case.
3.3 Channel Popularity
We now focus our attention on the properties of different chan-
nels. We ﬁrst rank nearly 700 different channels that appeared in
our data using two metrics: (1) the request count, which we call
channel access frequency, and (2) total time STBs stay tuned in the
channel, which we call channel dwell time. Figure 5 shows the cu-
mulative distribution function of channel popularity ranked by the
two metrics. We ﬁnd that the distribution of channel dwell time
is highly skewed – the top 100 channels account for around 63%
of the total channel dwell time. As a comparison, the channel ac-
cess frequency curve is less skewed. This is likely due to the large
number of sequential-scanning channel switch events. We observe
similar level of skewness in the distribution of channel popularity
when we examine different subsets of our data (such as by differ-
ent time zones or by different date), although the ranking of the
channels varies from one subset to another.
Figure 6 shows how the top 10/50/100 popular channels change
in the two adjacent hours during a day. The change percentages
are averaged over 6-day data. We observe that the channel popular-
433 
Channel dwell time
Channel access frequency
400
300
200
100
600
Channel index (sorted by channel popularity)
Figure 5: CDF of channels popularity
500
700
Top 10
Top 50
Top 100
)
F
D
C
(
n
o
i
t
r
o
p
o
r
P
1
0.8
0.6
0.4
0.2
0
0
50
40
30
20
10
)
%
(
s
e
g
n
a
h
c
f
o
e
g
a
t
n
e
c
r
e
P
0
0:00
4:00
8:00
12:00
Local time
16:00
20:00
24:00
Figure 6: Ratio of change in popular channels, as seen over
hours in a single day.
s
B
T
S
f
o
r
e
b
m
u
n
d
e
z
i
l
a
m
r
o
N
2
1.8
1.6
1.4
1.2
1
0.8
0:00
4:00
8:00
12:00
Local time
16:00
20:00
24:00
Figure 7: Channel popularity distribution change (hourly)
ity is relatively stable over time of day. For example, in Figure 6,
among top 100 channels at 12pm, less than 20% of them did not
belong to top 100 channels at 1pm, while more than 80% of them
were among top 100 channels at both time periods. We ﬁnd that
the relative channel popularity changes the most during morning
hours, but remain moderately stable for most part of the day. Fig-
ure 7 illustrates an example on the dynamics of channel popularity
within a day, in which we compare normalized numbers of STBs
of a top-ranked kids channel and a top-ranked local news channel
against that of the “recorded TV" that people use to watch recorded
contents (called DVR channel). We observe some interesting time-
Table 1: Model parameters for session length distributions
a3
0.04
On-session
Off-session
0.06
Channel-session
0.13
λ2
3.3e-3
2.5e-3
2.6e-2
λ3
2.3e-4
2.4e-4
3.2e-3
λ1
1.3e-2
3.2e-2
2.1
a2
0.66
0.75
0.64
a1
0.3
0.19
0.23
of-day trends – for example, the local channel peaks in the morning
when people catch early news and weather forecast before going to
work; the kids channel sharply loses popularity after 8PM when
most kids go to bed. In comparison, the DVR channel has the most
dramatic change in scale, which ﬁnds its peak late into night. The
recent work [15] uncovered the reasons behind this behavior by
grouping the whole user population into subgroups according to
their preference. We will also integrate this into our workload gen-
erator in Section 4.4.
4. MODELING USER ACTIVITIES
In this section, we construct mathematical models to capture
the observed characteristics of IPTV user activities. We need to
model three different user activities – switching-on, switching-off
and channel-switch. For each of them, we match their timing prop-
erties in both the session length distribution and the dynamics of the
aggregate rate. For channel-switch, we also model channel popu-
larity properties including popularity distribution and its temporal
dynamics. We ﬁrst present our models and then describe our meth-
ods to deriving the parameters of our model from the data traces.
4.1 Modeling Session Length
In order to capture the long tails exhibited in the empirical
session length distributions (Figure 2), we adopt the mixture-
exponential model [13] for on-, off-, and channel-sessions. The
probability density function (PDF) of a mixture-exponential distri-
bution is
nX
n
i=1
P
where 1/λi is the mean of the i-th exponential distribution in the
mixture and
i=1 ai = 1. This model has been widely applied
due to its simple form and its capability in approximating heavy-
tailed distributions in a wide range [13].
To determine the model parameters that best describe the data
trace we collected, we apply data ﬁtting for on-, off-, and channel-
In the following, we use channel-sessions
sessions respectively.
as an example while the procedure for ﬁtting on- and off-sessions
is essentially the same. We iteratively explore different values for
the number of exponential distributions, n, in the mixture model.
For a given n, we apply the Expectation Maximization (EM) al-
gorithm [4] to ﬁnd the maximum likelihood estimate (MLE) for
the parameters λi and ai. For the length distribution of channel-
sessions, we identify the best tradeoff at n = 3, as it achieves
a close match to the data while using a small number (i.e., 6) of
model parameters. In Table 1, we report the parameter values that
ﬁt our trace. The QQ (quantile-quantile) plots in Figure 8 demon-
strate good matches between our models and real traces collected.
Looking into the parameters, we gain tremendous insight on the
process. For channel-sessions, the different λi corresponds to Pois-
son processes with average inter-arrival time of around 30 seconds,
40 minutes and 5 hours, representing an IPTV user in the state of
channel-browsing, TV-program-watching, and being away-from-
TV respectively. The likelihood of a user entering these modes
Recorded TV
Local News
Kids
f (x) =
−λix
aiλie
(1)
434104
102
)
e
l
a
c
s
g
o
l
(
g
n
i
t
t
i
f
l
e
d
o
M
100
100
102
Real trace (log scale)
104
(a) The length of on-sessions
104
102
)
e
l
a
c
s
g
o
l
(
g
n
i
t
t
i
f
l
e
d
o
M
100
100
102
Real trace (log scale)
104
(b) The length of off-sessions
)
e
l
a
c
s
g
o
l
(
g
n
i
t
t
i
f
l
e
d
o
M
104
102
100
100