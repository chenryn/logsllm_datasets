You can choose the level of detail you want to log for VPN service.
• Non-verbose will indicate conditions for which you need to take immediate action 
(for example, if the VPN service can’t start up).
• Verbose will record all activity by the VPN service, including routine functions.
Non-verbose login is enabled by default.
To set VPN log detail:
1 In Server Admin, choose VPN Service from the Computers & Services list.
2 Click Settings.
3 Select the Logging tab.
4 Select Verbose to enable verbose logging, if desired.
5 Click Save.
Setting the VPN Log Archive Interval
Mac OS X Server can automatically archive VPN service logs after a certain amount of 
time. Each archive log is compressed and uses less disk space than the original log file. 
You can customize the schedule to archive the logs after a set period of time, measured 
in days.
To set up the log archive interval:
1 In Server Admin, choose VPN Service from the Computers & Services list.
2 Click Settings.
3 Select the Logging tab.
4 Select “Archive Log every ___ days”
5 Enter the log archive rollover interval you want.
6 Click Save.
LL2351.Book  Page 76  Monday, September 8, 2003  2:47 PM
Chapter 5    VPN Service
77
Viewing the VPN Log
You’ll need to monitor VPN logs to ensure smooth operation of your Virtual Private 
Network. The VPN logs can help you troubleshoot problems.
To view the log:
1 In Server Admin, choose VPN Service from the Computers & Services list.
2 Click Logs.
Viewing VPN Client Connections
You can monitor VPN client connections to ensure secure access to the Virtual Private 
Network. The client connection screen allows you to see the user connected, the IP 
address that user is connection from, the IP address assigned by your network, and the 
type and duration of connection.
You can sort the list by clicking on the column headers.
To view client connections:
1 In Server Admin, choose VPN Service from the Computers & Services list.
2 Click Connections.
Where to Find More Information
For more information about L2TP/IPSec:
The Internet Engineering Task Force (IETF) is working on formal standards for L2TP/
IPsec user authentication. See the website www.ietf.org/ids.by.wg/ipsec.html for more 
information.
Request For Comment Documents
Request for Comments (RFC) documents provide an overview of a protocol or service 
and details about how the protocol should behave. If you’re a novice server 
administrator, you’ll probably find some of the background information in an RFC 
helpful. If you’re an experienced server administrator, you can find all the technical 
details about a protocol in its RFC document. You can search for RFC documents by 
number at the website www.faqs.org/rfcs.
• For L2TP description, see RFC 2661.
• For PPTP description, see RFC 2637.
LL2351.Book  Page 77  Monday, September 8, 2003  2:47 PM
LL2351.Book  Page 78  Monday, September 8, 2003  2:47 PM
6
79
6 NTP Service
Network Time Protocol (NTP) is a network protocol used to synchronize the clocks of 
computers on your network to a time reference clock. NTP is used to ensure that all the 
computers on a network are reporting the same time.
If an isolated network, or even a single computer, is running on wrong time, services 
that use time and date stamps (like mail service, or web service with timed cookies) will 
send wrong time and date stamps and be out of synchronization with other computers 
across the Internet. For example, an email message could arrive minutes or years before 
it was sent (according to the time stamp), and a reply to that message could come 
before the original was sent.
How NTP Works
NTP uses Universal Time Coordinated (UTC) as its reference time. UTC is based on an 
atomic resonance, and clocks that run according to UTC are often called “atomic 
clocks.” 
Internet-wide, authoritative NTP servers (called Stratum 1 servers) keep track of the 
current UTC time. Other subordinate servers (called Stratum 2 and 3 servers) query the 
Stratum 1 servers on a regular basis and estimate the time taken across the network to 
send and receive the query. They then factor this estimate with the query result to set 
the Stratum 2 or 3 servers own time. The estimates are accurate to the nanosecond.
Your local network can then query the Stratum 3 servers for the time. Then it repeats 
the process. An NTP client computer on your network then takes the UTC time 
reference and converts it, through its own time zone setting to local time, and sets its 
internal clock accordingly.
LL2351.Book  Page 79  Monday, September 8, 2003  2:47 PM
80
Chapter 6    NTP Service
Using NTP on Your Network
Mac OS X Server can act not only as an NTP client, receiving authoritative time from 
an Internet time server, but also as an authoritative time server for a network. Your local 
clients can query your server to set their clocks. It’s advised that if you set your server to 
answer time queries, you should also set it to query an authoritative server on the 
Internet.
Setting Up NTP Service
If you choose to run NTP service on your network, make sure your designated server 
can access a higher-authority time server. Apple provides a Stratum 2 time server for 
customer use at time.apple.com.
Additionally, you’ll need to make sure your firewall allows NTP queries out to an 
authoritative time server on UDP port 123, and incoming queries from local clients on 
the same port. See Chapter 3, “IP Firewall Service,” on page 43 for more information on 
configuring your firewall.
To set up NTP service:
1 Make sure your server is configured to “Set Date & Time automatically.”
This setting is in the Date & Time pane of System Preferences, or the Server Admin 
Settings pane for the server.
2 Open Server Admin, and select the server you want to act as a time server.
3 Click Settings.
4 Select the Advanced tab.
5 Select Enable NTP.
6 Click Save.
LL2351.Book  Page 80  Monday, September 8, 2003  2:47 PM
Chapter 6    NTP Service
81
Configuring NTP on Clients
If you have set up a local time server, you can configure your clients to query your time 
server for getting the network date and time. By default, clients can query Apple’s time 
server. These instructions allow you to set your clients to query your time server.
To configure NTP on clients:
1 Open System Preferences.
2 Click Date & Time.
3 Select the Network Time tab.
4 Select “Set Date & Time automatically.”
5 Select and delete the text in the field rather than use the pop-up menu.
6 Enter the host name of your time server.
Your host name can be either a domain name (like time.example.com) or an IP address.
7 Quit System Preferences.
Where to Find More Information
The NTP working group, documentation, and an F.A.Q. for NTP can be found at the 
website www.ntp.org.
Request For Comment Documents
Request for Comments (RFC) documents provide an overview of a protocol or service 
and details about how the protocol should behave. If you’re a novice server 
administrator, you’ll probably find some of the background information in an RFC 
helpful. If you’re an experienced server administrator, you can find all the technical 
details about a protocol in its RFC document. You can search for RFC documents by 
number at the website www.faqs.org/rfcs.
The official specification of NTP version 3 is RFC 1305.
LL2351.Book  Page 81  Monday, September 8, 2003  2:47 PM
LL2351.Book  Page 82  Monday, September 8, 2003  2:47 PM
7
83
7 IPv6 Support
IPv6 is short for “Internet Protocol Version 6."IPv6 is the Internet’s next-generation 
protocol designed to replace the current Internet Protocol, IP Version 4 (IPv4, or just IP).
The current Internet Protocol is beginning to have problems coping with the growth 
and popularity of the Internet. IPv4’s main problems are:
• Limited IP addressing.
IPv4 addresses are 32 bits, meaning there can be only 4,300,000,000 network 
addresses.
• Increased routing and configuration burden.
The amount of network overhead, memory, and time to route IPv4 information is 
rapidly increasing with each new computer connected to the Internet.
• End-to-end communication is routinely circumvented.
This point is actually an outgrowth from the IPv4 addressing problem. As the number 
of computers increases and the address shortages become more acute, another 
addressing and routing service has been developed, Network Address Translation 
(NAT), which mediates and separates the two network end points. This frustrates a 
number of network services and is limiting.
IPv6 fixes some of these problems and helps others. It adds improvements in areas 
such as routing and network auto-configuration. It has increased the number of 
network addresses to over 3 x1038, and eliminates the need for NAT. IPv6 is expected to 
gradually replace IPv4 over a number of years, with the two coexisting during the 
transition.
This chapter lists the IPv6 enabled services used by Mac OS X Server, gives guidelines 
for using the IPv6 addresses in those services, and explains IPv6 address types and 
notation.
LL2351.Book  Page 83  Monday, September 8, 2003  2:47 PM
84
Chapter 7    IPv6 Support
IPv6 Enabled Services
The following services in Mac OS X Server support IPv6 in addressing:
• DNS (BIND)
• IP Firewall
• Mail (POP/IMAP/SMTP)
• SMB
• Web (Apache 2)
Additionally, there are a number of command-line tools installed with Mac OS X Server 
that support IPv6 (for example, ping6, and traceroute6).
IPv6 Addresses in the Server Admin
The services above don’t support IPv6 addresses in the user interface. They can be 
configured with command-line tools to add IPv6 addresses, but those same addresses 
will fail if entered into address fields in Server Admin.
IPv6 Addresses
IPv6 addresses are different than IPv4 addresses. In changing addresses, there are 
changes in address notation, reserved addresses, the address model, and address types.
Notation
While IPv4 addresses are 4 bytes long and expressed in decimals, IPv6 addresses are 16 
bytes long and can be expressed a number of ways.
IPv6 addresses are generally written in the following form:
xxxx:xxxx:xxxx:xxxx:xxxx:xxxx:xxxx:xxxx
Pairs of IPv6 bytes are separated by a colon and each byte is represented as a pair of 
hexadecimal number, as in the following example:
E3C5:0000:0000:0000:0000:4AC8:C0A8:6420
or
E3C5:0:0:0:0:4AC8:C0A8:6420
IPv6 addresses often contain many bytes with a zero value, so a shorthand notation is 
available. The shorthand notation removes the zero values from the text representation 
and puts the colons next to each other, as follows:
E3C5::4AC8:C0A8:6420
LL2351.Book  Page 84  Monday, September 8, 2003  2:47 PM
Chapter 7    IPv6 Support
85
The final notation type includes IPv4 addresses. Because many IPv6 addresses are 
extensions of IPv4 addresses, the right-most four bytes of an IPv6 address (the right-
most two byte pairs) can be rewritten in the IPv4 notation. This mixed notation (from 
the above example) could be expressed as:
E3C5:4AC8:192.168.100.32
IPv6 Reserved Addresses
IPv6 reserves two addresses that network nodes can’t use for their own communication 
purposes: 
0:0:0:0:0:0:0:0 (unspecified address, internal to the protocol)
0:0:0:0:0:0:0:1 (loopback address, just like127.0.0.1 in IPv4)
IPv6 Addressing Model
IPv6 addresses are assigned to interfaces (for example, your Ethernet card), and not 
nodes (for example, your computer). A single interface can be assigned multiple IPv6 
addresses. Also, a single IPv6 address can be assigned to several interfaces for load 
sharing. Finally, routers don’t need an IPv6 address, eliminating the need to configure 
the routers for point to point unicasts. Additionally, IPv6 doesn’t use IPv4 address 
classes.
IPv6 Address Types
IPv6 supports the following three IP address types:
• Unicast (one to one communication)
• Multicast (one to many communication)
• Anycast
Note that IPv6 does not support broadcast. Multicast is preferred for network 
broadcasts. Otherwise, unicast and multicast in IPv6 are the same as in IPv4. Multicast 
addresses in IPv6 start with “FF” (255).
Anycast is a variation of multicast. While multicast delivers messages to all nodes in the 
multicast group, anycast delivers messages to any one node in the multicast group.
LL2351.Book  Page 85  Monday, September 8, 2003  2:47 PM
86
Chapter 7    IPv6 Support
Where to Find More Information
The working group for the Internet Protocol Version 6 website is www.ipv6.org.
A group of IPv6 enthusiasts maintains a list of applications that support IPv6 at the 
website www.ipv6forum.com/navbar/links/v6apps.htm.
Request For Comment Documents
Request for Comments (RFC) documents provide an overview of a protocol or service 
and details about how the protocol should behave. If you’re a novice server 
administrator, you’ll probably find some of the background information in an RFC 
helpful. If you’re an experienced server administrator, you can find all the technical 
details about a protocol in its RFC document. You can search for RFC documents by 
number at the website www.faqs.org/rfcs.
There are over 29 IPv6 related RFC documents. A list can be found at
http://www.ipv6.org/specs.html
LL2351.Book  Page 86  Monday, September 8, 2003  2:47 PM
87
Glossary
Glossary
This glossary defines terms and spells out abbreviations you may encounter while 
working with online help or the Mac OS X Server Network Services Administration for 
Version 10.3 or Later manual. References to terms defined elsewhere in the glossary 
appear in italics.
bit  A single piece of information, with a value of either 0 or 1. 
broadcast  The process of transmitting one copy of a stream over the whole network. 
byte  Eight bits. 
DHCP (Dynamic Host Configuration Protocol)  A protocol used to distribute IP 
addresses to client computers. Each time a client computer starts up, the protocol looks 
for a DHCP server and then requests an IP address from the DHCP server it finds. The 
DHCP server checks for an available IP address and sends it to the client computer 
along with a lease period—the length of time the client computer may use the address.
directory services  Services that provide system software and applications with 
uniform access to directory domains and other sources of information about users and 
resources.
DNS (Domain Name System)  A distributed database that maps IP addresses to 
domain names. A DNS server, also known as a name server, keeps a list of names and 
the IP addresses associated with each name. 
DoS (denial of service) attack  An Internet attack that uses thousands of network pings 
to prevent the legitimate use of a server.
dynamic IP address  An IP address that is assigned for a limited period of time or until 
the client computer no longer needs the IP address.
filter  A “screening” method used to control access to your server. A filter is made up of 
an IP address and a subnet mask, and sometimes a port number and access type. The 
IP address and the subnet mask together determine the range of IP addresses to which 
the filter applies.
LL2351.Book  Page 87  Monday, September 8, 2003  2:47 PM
88
Glossary    
firewall  Software that protects the network applications running on your server. IP 
firewall service, which is part of Mac OS X Server software, scans incoming IP packets 
and rejects or accepts these packets based on a set of filters you create.
FTP (File Transfer Protocol)  A protocol that allows computers to transfer files over a 
network. FTP clients using any operating system that supports FTP can connect to a file 
server and download files, depending on their access privileges. Most Internet browsers 
and a number of freeware applications can be used to access an FTP server.
HTTP (Hypertext Transfer Protocol)  The client/server protocol for the World Wide Web. 
The HTTP protocol provides a way for a web browser to access a web server and 
request hypermedia documents created using HTML.
IANA (Internet Assigned Numbers Authority)  An organization responsible for 
allocating IP addresses, assigning protocol parameters, and managing domain names.
ICMP (Internet Control Message Protocol)  A message control and error-reporting 
protocol used between host servers and gateways. For example, some Internet 
software applications use ICMP to send a packet on a round-trip between two hosts to 
determine round-trip times and discover problems on the network.
IGMP (Internet Group Management Protocol)  An Internet protocol used by hosts and 
routers to send packets to lists of hosts that want to participate, in a process known as 
multicasting. QuickTime Streaming Server (QTSS) uses multicast addressing, as does 
Service Location Protocol (SLP).
IP (Internet Protocol)  Also known as IPv4. A method used with Transmission Control 
Protocol (TCP) to send data between computers over a local network or the Internet. IP 
delivers packets of data, while TCP keeps track of data packets.
IP address  A unique numeric address that identifies a computer on the Internet. 
IP subnet  A portion of an IP network, which may be a physically independent network 
segment, that shares a network address with other portions of the network and is 
identified by a subnet number. 
IPSec  A security addition to IP. A protocol that provides data transmission security for 
L2TP VPN connections. IPSec acts at the network layer, protecting and authenticating IP 
packets between participating IPSec nodes.
IPv6 (Internet Protocol Version 6)  The next generation communication protocol to 
replace IP (also known as IPv4). IPv6 allows a greater number of network addresses and 
can reduce routing loads across the Internet.
LL2351.Book  Page 88  Monday, September 8, 2003  2:47 PM
Glossary    
89
ISP (Internet service provider)  A business that sells Internet access and often provides 
web hosting for ecommerce applications as well as mail services.
L2TP (Layer Two Tunnelling Protocol)  A network transport protocol used for VPN 
connections. It is essentially a combination of Cisco’s L2F and PPTP. L2TP itself is not an 
encryption protocol, so it uses IPSec for packet encryption.
LAN (local area network)  A network maintained within a facility, as opposed to a WAN 
(wide area network) that links geographically separated facilities. 
LDAP (Lightweight Directory Access Protocol)  A standard client-server protocol for 
accessing a directory domain.
lease period  A limited period of time during which IP addresses are assigned. By using 
short leases, DHCP can reassign IP addresses on networks that have more computers 
than available IP addresses.
load balancing  The process of distributing the demands by client computers for 
network services across multiple servers in order to optimize performance by fully 
utilizing the capacity of all available servers.
local domain  A directory domain that can be accessed only by the computer on which 
it resides.
Mac OS X  The latest version of the Apple operating system. Mac OS X combines the 
reliability of UNIX with the ease of use of Macintosh. 
Mac OS X Server  An industrial-strength server platform that supports Mac, Windows, 
UNIX, and Linux clients out of the box and provides a suite of scalable workgroup and 
network services plus advanced remote management tools. 
mail host  The computer that provides your mail service.
Manual Unicast  A method for transmitting a live stream to a single QuickTime Player 
client or to a computer running QTSS. An SDP file is usually created by the broadcaster 
application and then must be manually sent to the viewer or streaming server. 
master zone  The DNS zone records held by a primary DNS server. A master zone is 
replicated by zone transfers to slave zones on secondary DNS servers.
MS-CHAPv2 (Microsoft’s Challenge Handshake Authentication Protocol version 2)  
The standard Windows authentication scheme for VPN. This authentication method 
encodes passwords when they are sent over the network and stores them in a 
scrambled form on the server. It offers good security during network transmission.
LL2351.Book  Page 89  Monday, September 8, 2003  2:47 PM
90
Glossary    
multicast  An efficient, one-to-many form of streaming. Users can join or leave a 
multicast but cannot otherwise interact with it. 
multihoming   The ability to support multiple network connections. When more than 
one connection is available, Mac OS X selects the best connection according to the 
order specified in Network preferences.
MX record (mail exchange record)  An entry in a DNS table that specifies which 
computer manages mail for an Internet domain. When a mail server has mail to deliver 
to an Internet domain, the mail server requests the MX record for the domain. The 