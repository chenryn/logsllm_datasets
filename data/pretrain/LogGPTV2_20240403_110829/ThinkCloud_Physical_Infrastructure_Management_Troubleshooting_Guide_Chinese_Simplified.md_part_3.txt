7
安全问题
本章介绍如何解决安全问题，包括以下章节：
 忘记本地恢复用户或主管用户的密码
 无法信任SSL证书
 服务器认证验证失败
 Samba和Apache漏洞
7.1 忘记本地恢复用户或主管用户的密码
如果无法使用其他主管帐户登录到系统或没有其他主管帐户，用户可以安装包含配置
文件（配置文件中含有新密码）的ISO映像，来重置具有lxc-recovery或lxc-
supervisor权限的本地用户的密码。
 用户必须具有访问系统主机系统的权限。
 要重置的用户名必须具有lxc-recovery或lxc-supervisor权限。
 密码必须遵守系统强制实施的相同验证规则。
 重置密码后，用户无需在首次访问系统时更改密码。
如需创建和装载ISO映像，请遵循以下步骤：
(1) 关闭虚拟机电源。
(2) 使用echo命令创建一个名为passwordreset.properties的配置文件。
echo com.lenovo.lxca.passwordreset/passwordreset.user =admin > ./
passwordreset.properties
echo com.lenovo.lxca.passwordreset/passwordreset.password
=New_Passw0rd >> ./ passwordreset.properties
(3) 创建一个包含passwordreset.properties配置文件的ISO映像。在Windows系统
中，使用常用ISO软件即可创建ISO映像。在Linux系统中，使用
[Lenovo]#mkisofs -V passreset -J -o ./passreset.iso ./passwordreset.properties
命令创建ISO映像。
P100V001R00 13
7 安全问题 联想数据中心基础设施运维管理系统
(4) 使用数据存储浏览器将该ISO映像上传到目标位置。
(5) 将该ISO映像装载到RedHat虚拟机。
a) 在虚拟机管理器中选择虚拟机，然后单击，弹出“添加新虚拟硬
件”对话框。
b) 单击“存储”页签。
c) 选择受管存储或其他现有存储，单击，然后选择passrest.iso映像。
d) 选择“VirtIO”作为设备类型。对于PIM V1.4.0或更低版本，将磁盘总线设
置为“IDE”。
e) 配置高速缓存模式为“无”。
f) 单击。
7.2 无法信任 SSL 证书
证书链可能包含一个自己签署的签名或非由已知的证书颁发机构生成的签名。
系统实例都拥有一个唯一的、内部生成的CA（Certificate Authority，证书颁发机
构）。缺省情况下，用户与虚拟设备之间、或受管设备与虚拟设备之间用于通信的端口
（端口443、3888、9090、50636、50637）使用由该CA签署的证书。如果系统不信
任SSL证书，请生成并部署定制的外部签名服务器证书到系统。
在部署操作系统过程中，系统将该CA证书添加到要推送到目标服务器的操作系统映
像中。目标服务器连接端口3001和8443，并验证握手期间端口3001和8443提供
的证书。
7.3 服务器认证验证失败
当系统尝试执行以下操作时，服务器认证验证可能会失败：
 使用CIM-XML通过HTTPS连接到受管设备。
 使用安全LDAP连接到外部认证服务器（如果已配置安全LDAP连接）。
 使用安全连接连接到外部SAML身份提供商（如果已配置SAML）。
 连接到远程文件服务器，以便导入操作系统映像（如果已配置HTTPS映像服务
器）。
 连接到Lenovo以获取保修状态信息。
当服务器验证失败时，请采取以下措施：
 确保系统的可信证书或外部服务证书信任存储区的证书或其签名证书。
 确保未吊销证书。
 确保服务器的IP地址或主机名匹配某个认证主题的备用名称或证书中的公用名
（如果不存在SAN）。
14 P100V001R00
联想数据中心基础设施运维管理系统 7 安全问题
 确保当前日期介于证书中的“之前无效”和“之后无效”日期之间。
 确保使用SHA1或SHA256算法签署该证书。如果处于Legacy模式或NIST严
格模式，需要更复杂的算法。
7.4 Samba 和 Apache 漏洞
部署操作系统和更新操作系统设备驱动程序时，系统使用Samba和Apache服务器
作为只读远程共享。如果不使用系统管理操作系统，用户可以将系统网络角色配置为
“仅发现和管理硬件”，禁用Samba和Apache服务器。
如需禁用Samba和Apache服务器，请遵循以下步骤：
(1) 在系统主界面，单击[管理/网络访问权限]，显示当前定义的网络设置。
(2) 单击，弹出“编辑网络访问权限”页面，如图7-1所示。
图7-1 编辑网络访问权限
P100V001R00 15
7 安全问题 联想数据中心基础设施运维管理系统
(3) 在“IP设置”页签，将网络接口配置为“仅发现和管理硬件”。
(4) 单击。
(5) 单击。
16 P100V001R00
联想数据中心基础设施运维管理系统 8 用户界面问题
8
用户界面问题
本章介绍如何解决用户界面问题，包括以下章节：
 打开多个标签页时Web浏览器不响应
 JSON响应失败、分析错误和其他意外错误
 用户界面未使用首选语言
 加载缓慢或无响应、长时间等待刷新、呈现出错
 机架视图中未反映设备位置更改
8.1 打开多个标签页时 Web 浏览器不响应
系统使用客户端JavaScript与管理软件交换大量数据。当用户在Web浏览器中打开
多个标签页时，Web浏览器会消耗更多内存、处理器周期和网络带宽，这可能会导致
Web浏览器崩溃或未响应（取决于Web浏览器的类型和版本）。在这种情况下，用户
应该尽量减少在Web浏览器打开的标签页的数量。
8.2 JSON 响应失败、分析错误和其他意外错误
当JSON响应失败时，用户可以先注销当前用户的登录，然后再重新登录到系统。
如需从系统中注销当前用户的登录，请遵循以下步骤：
(1) 在系统标题栏，单击用户右侧的下拉菜单，然后单击，如图8-1所示。
P100V001R00 17
8 用户界面问题 联想数据中心基础设施运维管理系统
图8-1 注销当前用户
(2) 单击，注销当前用户，如图8-2所示。
图8-2 确认注销
8.3 用户界面未使用首选语言
当系统的用户界面未使用首选语言时，请采取以下措施：
(1) 确保Web浏览器使用首选语言的语言环境。
(2) 在系统标题栏，单击用户右侧的下拉菜单，然后单击，弹出“语言”
对话框，如图8-3所示。
18 P100V001R00
联想数据中心基础设施运维管理系统 8 用户界面问题
图8-3 更改语言
(3) 在下拉列表中选择系统用户界面要使用的语言，然后单击，如图8-4所
示。
图8-4 选择用户界面语言
8.4 加载缓慢或无响应、长时间等待刷新、呈现出错
当系统的Web管理界面加载缓慢、长时间未响应或加载错误时，请采取以下措施：
(1) 单击Web浏览器上的“刷新”按钮（ ）刷新页面。
(2) 清除Web浏览器高速缓存，然后重新加载页面。
P100V001R00 19
8 用户界面问题 联想数据中心基础设施运维管理系统
8.5 机架视图中未反映设备位置更改
如果系统的受管设备使用以下API（Application Program Interface，应用程序编程接
口）更改受管设备的位置，系统用户界面中的机架视图中不会反映受管设备的位置变
更。在这种情况下，用户需在系统的用户界面中编辑受管设备的属性或机架以反映在
API中作出的更改。
 PUT /canisters/
 PUT /chassis/
 PUT /nodes/
20 P100V001R00
联想数据中心基础设施运维管理系统 9 事件和警报消息
9
事件和警报消息
在事件或警报日志列出系统生成的消息。每个事件消息提供以下信息：
 事件标识符：一个字符串，它唯一地标识一个事件或一类事件。这是一个由12
个字符组成的字符串，格式如下FQXppnnxxxxc：
− pp：表示产生事件的产品，包括以下产品：
○ HM：联想数据中心基础设施运维管理系统
○ RS：联想RackSwitch设备
○ ST：联想Storage设备
○ TS：联想ThinkServer设备
− nn：表示产生事件的组件，包括以下组件：
○ CP：Configuration Patterns
○ CR：虚拟器件
○ DI：发现和设备管理
○ DM：数据管理
○ EM：事件和监控
○ FC：操作系统部署
○ JM：作业管理
○ MI：数据迁移
○ NM：网络管理
○ RC：远程控制
○ SE：安全性
○ SP：交换机端口
○ SS：服务与支持
○ ST：存储管理
○ TS：ThinkServer管理
P100V001R00 21
9 事件和警报消息 联想数据中心基础设施运维管理系统
○ UP：更新
○ CN：控制台
− xxxx：表示特定消息。
− c：表示事件严重性，包括以下级别：
○ I：参考。无需进行任何操作
○ F：警告。无需执行任何操作
○ G：警告。可延迟操作。
○ J：错误（次要）。需要立即操作
○ L：错误（主要）。需要立即操作
○ M：错误（紧急）。需要立即操作
○ N：错误（致命）。需要立即操作。
 严重性：表示对于状况的担心程度，包括以下级别：
− 参考：记录此类事件以供审核。通常是用户操作或状态更改，属于正常行
为。
− 警告：此类事件级别不是特别严重。如有可能，应该在事件进一步恶化之前
纠正该状况。也可能是需要额外监控或维护的状况。
− 次要：此类事件是次要严重状况。
− 主要：此类事件是主要严重状况。
− 紧急：此类事件是故障或紧急状况，可能会影响服务或预期功能。
 警报类别：表示警报分类，如“审核-用户操作”。
 可维护：表示是否需要由用户或联想技术支持人员执行操作才能解决问题。
 用户响应：表示为解决事件而要执行的操作。
22 P100V001R00