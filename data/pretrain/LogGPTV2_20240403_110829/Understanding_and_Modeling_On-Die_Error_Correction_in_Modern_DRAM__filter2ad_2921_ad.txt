redundant data). However, inferring error rates is sufficient
to study aggregate distributions, and we leave error localiza-
tion to future work.
6. Experimental Setup
We experimentally characterize 232 LPDDR4 [44] DRAM de-
vices with on-die ECC from a single major DRAM manufac-
turer that we cannot disclose for confidentiality reasons. For
comparison purposes, we test 82 LPDDR4 DRAM devices of
the previous technology generation without on-die ECC from
across three major DRAM manufacturers. Given that DRAM
manufacturers provide neither: i) non-ECC counterparts of de-
vices with on-die ECC nor ii) a mechanism by which to disable
on-die ECC, the older-generation devices provide our closest
point of comparison.
We perform all testing using a home-grown infrastructure
that provides precise control over DRAM timing parameters,
◦
a tolerance of of ±1
bus commands, and bus addresses. Our infrastructure provides
◦
C with
reliable ambient temperature control between 40
C. To improve local temperature stabil-
ity for each DRAM device throughout testing, a local heating
◦
source maintains DRAM at 15
C above the ambient temper-
ature at all times, providing an effective DRAM temperature
◦
testing range of 55
◦
C - 70
◦
C - 55
C.
7. Experimentally Inferring On-Die ECC
and Pre-Correction Error Rates Using EIN
In this section, we apply EIN to infer the i) on-die ECC scheme
and ii) pre-correction error rates of real devices with on-die
ECC. Before doing so, we validate our uniform-random statis-
tical model for pre-correction errors and determine the layout
of true-/anti-cells to accurately model the pre-correction error
distribution of the devices that we test.
7.1. Validating Uniform-Random Retention Errors
Our model for data-retention errors (Section 4.3) treats errors
as independent, uniform-randomly distributed events based on
observations made in several prior works [5, 30, 57, 80, 112, 124].
For such errors, the total number of errors X in each fixed-
length n-bit region of DRAM follows a binomial distribution [5,
98, 124] parameterized by the RBER R:
(cid:3)
(cid:4)
P[X = x | R] =
n
x
Rx (1 – R)n–x
(11)
Before demonstrating the use of EIN, we first validate that
the independent, uniform-random data-retention error model
holds for the devices that we test by comparing experimentally-
measured error distributions to the expected distributions. Fig-
ure 5 shows both the expected and experimental probabilities
of observing an X -bit error in a single 256-bit word throughout
DRAM at fixed operating conditions of tREFW = 20s and 60
C
for a single representative DRAM device without on-die ECC.
◦
y
t
i
l
i
b
a
b
o
r
P
10 1
10 3
10 5
10 7
10 9
Experimental (Measured)
Expected (Binomial Distribution)
0
2
4
6
8
10
12
14
16
18
20
Number of Bit Errors in a 256-bit Word
Figure 5: Expected and experimental probabilities of observ-
ing an X -bit error in a 256-bit word for a representative DRAM
device without on-die ECC at tREFW = 20s and 60
C.
◦
The experimental data is well predicted by the binomial
distribution and diverges only at extreme error counts that have
few experimental samples. This validates modeling retention
errors using a uniform-random distribution for the devices
without on-die ECC. We repeat this experiment across all of
our devices without on-die ECC for various word sizes, refresh
windows, and temperatures, and we find that the uniform-
random model holds across all experiments.
7.2. Determining the True-/Anti-Cell Layout
We reverse-engineer the true-/anti-cell layout in the devices
with on-die ECC to ensure that we can accurately model the
20
Authorized licensed use limited to: Tsinghua University. Downloaded on March 19,2021 at 10:57:59 UTC from IEEE Xplore.  Restrictions apply. 
pre-correction error distribution in simulation (as described
in Section 5.1, we only inject errors in cells programmed to
the “charged” state). We do this by studying the locations of
data-retention errors after disabling refresh for a long time
(e.g., >30 minutes), which causes most cells to leak to their
discharged state.8 Figure 6 illustrates the resulting pattern,
showing how individual rows comprise entirely true- or anti-
cells, and contiguous groups of either 824 or 400 rows alternate
throughout a bank. In simulation, we model each DRAM burst
to be entirely composed of either true- or anti-cells with a 50%
probability. This accurately models sampling an arbitrary burst
from the entire memory address space.
8192 Rows
.
.
.
824 Rows
824 Rows
400 Rows
2048 Rows
True-Cells
Anti-Cells
Figure 6: A DRAM bank comprises groups of 824 or 400 rows
with alternating true- and anti-cells per group.
Despite the observed true-/anti-cell pattern, we find that a
small amount of uniquely randomly-distributed rows in each
bank do not follow the pattern shown in Figure 6. Instead,
these rows alternate true- and anti-cells every byte and are
often found in clusters of two or more. A histogram of the
number of such rows, called outlier rows, per bank across
all 232 devices with on-die ECC is shown in Figure 7 along-
side a best-fit negative-binomial distribution curve. Both the
shape of the frequency distribution and the observed clustering
are consistent with post-manufacturing repair row remapping
techniques [38]. Since these rows have a different true- and
anti-cell composition, they add unwanted noise to our reverse-
engineering analysis. While we could account for them in our
simulations, we simply skip testing these rows in our experi-
mental analysis to avoid unnecessary complexity.
y
t
i
l
i
b
a
b
o
r
P
6
4
2
0
1e 4
0
Experimental Data
NB(5.2157, 0.0026) Fit
1000
Number of Outlier Rows per Bank
3000
2000
4000
5000
Figure 7: Histogram of the number of rows with outlier
true-/anti-cell layouts per bank across all banks of all DRAM
devices with on-die ECC (NB: negative-binomial).
7.3. Applying EIN to DRAM with On-Die ECC
We demonstrate applying EIN to the DRAM devices with on-
die ECC using the experimental configuration shown in Ta-
ble 1. The error distribution resulting from a single experiment
provides the PMF given by Equation 3, which forms the obser-
vations O in the overall optimization problem (Equation 9).
Model Parameter
Experiment
Simulation
Word Size
True-/Anti-Cell Layout
Data Pattern
Outlier Rows
Temperature
tREFW
256-bits
50%/50% at word-granularity
RANDOM and 0xFF
Ignored
Encompassed in the RBER
Encompassed in the RBER
RANDOM
Skipped
◦
70
C
5 minutes
Table 1: Experimental and simulation setup for reverse-
engineering the ECC scheme used in the tested devices.
Using a representative device, we perform a single exper-
iment at the conditions shown in Table 1, measuring a post-
correction BER of 0.041578. Then, configuring EINSim with
the parameters listed under “Simulation” in Table 1, we eval-
uate the full optimization problem of Equation 9 using the
grid-search approach described in Section 5.4.
Figure 8 presents the negative log-likelihoods (Equation 8)
of the eight highest-likelihood ECC schemes for each of the
0xFF and RANDOM data patterns. Models are sorted in order of
increasing likelihood (i.e., decreasing negative log-likelihood)
from left to right for each data pattern. Bars show black confi-
dence intervals spanning the min/max values when bootstrap-
ping the observed data 105 times (described in Section 5.5).
The confidence intervals are tight enough to appear as a single
line atop each bar. Note that the 0xFF models have low likeli-
hoods (i.e., higher bars), which agrees with the fact that our
experimental data is obtained using a RANDOM data pattern.
1.7×107
1.6×107
0.4×107
0.2×107
0.0×107
0xFF
RANDOM
)
d
o
o
h
i
l
i
e
k
L
(
g
o
L
)
3
,
8
2
1
,
6
3
1
(
)
5
,
4
6
,
8
7
(
)
3
,
6
5
2
,
5
6
2
(
)
3
,
2
3
,
8
3
(
)
5
,
2
3
,
4
4
(
)
5
,
6
5
2
,
4
7
2
(
)
3
,
4
6
,
1
7
(
)
5
,
8
2
1
,
4
4
1
(
)
5
,
2
3
,
4
4
(
)
5
,
4
6
,
8
7
(
)
3
,
2