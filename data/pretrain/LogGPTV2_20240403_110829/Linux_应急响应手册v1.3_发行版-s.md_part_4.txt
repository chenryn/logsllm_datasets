#Specify the server verbosity level.
#This can be one of:
#debug（a lot of information,useful for development/testing)
#verbose （many rarely useful info,but not amess like the debug level)
#notice （moderately verbose,what you want in production probably)
#warning （only very important /critical messages are logged)
loglevel debug
#Specify the log file name.Also the empty string can be used to force
#Redis to log on the standard output. Note that if you use standard
#output for logging but daemonize,logs will be sent to/dev/null
logfile"/var/log/redis-test.log"
#and optionally update the other syslog parameters to suit your needs.
#syslog-enabledne
is-test.,log
r of open files to 18e32 (it mas originally set to 1024).
Redis 2.8.17 (00000000/e) 64 blt
PID:5963
http://redis.1o
mit_mee
y condition. To fix this issue
The
ect:lons on port 6379
87:49:56.
[s0) pe1
aves),。 752296 bytes in use
/EE
4:01:557
664
0 clients comr
综上可以看出：
只有手动设置logfile才能保存日志，默认不设置
默认的日志级别notice是不会记录登录、执行指令、退出的。
●loglevel设置为verbose或者debug才会记录登录主机
执行的指令 info，set 等即使 loglevel是debug 级别也不会记录，但是会记录我们设置了多少个key，具体key名称以及内
容不会记录
如果想临时记录一下详细日志可以使用MONITOR
---
## Page 32
使用我们的主机登录redis，之后执行MONITOR指令，之后就可以看到其他主机连接redis服务器后的详细操作了
root@helper
#./redis-2.8.17/src/redis-cli
127.0.0.1:6379>MONITOR
OK
1618819132.622082
[0192.168.43.234:41040]
O.
1618819135.808802
[0192.168.43.234:41040]
"info"
1618819150.404718[0 192.168.43.234:41040]
“set""hello""world"
redis 暴力破解
helper@helper:~/redis-2.8.17/srcsnetstat-pantu
Not
all processes could be identified, non-ouned process info
ections (servers and established)
Proto
Recv-Q
Send-Q Local Addre
Foreign Address
State
d1
0127.0.0.53:53
0'0′0'0
LISTEN
tcp
00.0.0.0:22
tcp
0.0.0.0:*
NISIT
192.168.43.219:6379
0 0.0.0.0:6379
192.168.43.51:53361
0.0.0.0:*
ESTABLISHED
LISTEN
tcp
tcp
tcp
0 192.168.43.219:6379
192.168.43.51:53367
0 192.168.43.219:6379
192.168.43.51:53348
ESTABLISHED
tcp
0192.168.43.219:22
192.168.43.51:57329
ESTABLISHED
192.168.43.51:53364
ESTABLISHED
tcp
0192.168.43.219:6379
0 192.168.43.219:6379
ESTABLISHED
tcp
192.168.43.51:49978
ESTABLISHED
tcp
36 192.168.43.219:22
0192.168.43.219:6379
192.168.43.51:53377
tcp
0192.168.43.219:6379
192.168.43.51:53374
ESTABLISHED
192.168.43.51:53350
ESTABLISHED
0 192.168.43.219:6379
0 192.168.43.219:6379
ESTABLISHED
tcp
tcp
0192.168.43.219:6379
192.168.43.51:53355
ESTABLISHED
tcp
192.168.43.219:6379
ESTABLISHED
tcp
0192.168.43.219:6379
192.168
.43.51:53372
.43.51:53378
ESTABLISHED
ESTAB
LISHED
192.168.43.219:6379
0 192.168.43.219:6379
192.168.43.51:53373
192.168
.43.51:53376
ESTABLISHED
0192.168.43.219:6379
192.168.43.51:53351
ESTABLISHED
192.168.43.219:6379
192.168
.43.51:53371
ESTABLISHED
tcp
0192.168.43.219:6379
192.168.43.51:53370
ESTAB
ESTABLISHED
HLISHED
tcP
0192.168.43.219:6379
192.168.43.51:53349
192.168.43.51:53365
ESTABLISHED
192.168
ESTABLISHED
tcp
0192.168.43.219:6379
0 192.168.43.219:6379
ESTABLISHED
tcp
0192.168.43.219:6379
192.168
.43.51:53352
192.168.43.219:6379
ESTABLISHED
tcp
0192.168.43.219:6379
192.
ESTABLISHED
ESTABLISHED
tcp
0192.168.43.219:6379
192.168.43.51:53359
0192.168.43.219:6379
192.168.43.51:53375
ESTABLISHED
ESTABLISHED
tcp
0192.168.43.219:6379
192.168.43.51:53356
tcp
ESTABLISHED
0 192.168.43.219:6379
0192.168.43.219:6379
192.168.43.51:53353
ESTABLISHED
192.168.43.51:53369
ESTABLISHED
● loglevel = notice
---
## Page 33
er of open files to 18e32 (it was originally set to 1024).
Redis 2.8.17 (0e00000e/0) 64 bit
Running in stand alone 
PID: 6325
Port:6379
http://redis.io
0-2
ory condition. To fix this is
[6325]19Apr 08:24:55.
325
61
6E9 1nod u0 su31de3e 0 4pe wou 5g Janas 841  TE
fron d
● loglevel = verbose
6355] 19 Apr 08:27:53.799 # Server started, Redis version 2.8.17
6355]19Apr08:27:53.799#WARNINGover
ory is set to e!Background save n
63551
19 Apr 08:27:53.799 * DB 1oaded from disk: 0.000 seconds
6355
19 Apr 08:27:53.79g * The server is now ready to accept connections on port 6379
SSE9
6T
08:27:53.810
-0clients
6355
19
08:27:58.964-θc1ientsconnected
(0 slaves),
752200 bytes in use
SSES
61
08:28:04.076
θclients
cted
(θ slaves), 752200 bytes in use
Apr 08:28:08.180 - Accepted 192.168.43.51:53569
61
08:28:09.176-0c1ients co
08:28:68.286
Client closed cor
hected (0 slaves), 752200 bytes in use
ctior
Apr
6
88:28:13.613
Accepted 192.168.43.51:53703
Accepted 192.168.43.51:53702
19
Apr
08:28:13.613
61
08:28:13.613
Accepted
192.168.43.51:53704
6L
Apr
08:28:13.614
Accepted
192.168.43.51:53705
08:28:13.614
08:28:13.614
Accepted
192.168.43.51:53707
192.168.43.51:53706
61
Apr
Accepted
08:28:13.614
Accepted
192.168.43.51:53708
19
Apr
08:28:13.614
Accepted
192.168.43.51:53709
08:28:13.615
08:28:13.615
Accepted
192.168.43.51:53711
192.168.43.51:53710
Accepted
19
Apr
08:28:13.615
Accepted
192.168.43.51:53712
19
Apr
08:28:13.615
Accepted
Accepted
192.168.43.51:53713
19
Apr
08:28:13.616
08:28:13.615
Accepted 192.168.43.51:53715
192.168.43.51:53714
19
19
Apr
08:28:13.616
Accepted
192.168.43.51:53716
5355
19
08:28:13.616
192.168.43.51:53717
5355
19
Apr
08:28:13.616
Accepted
192.168.43.51:53718
5355
19
Apr
08:28:13.616-Accepted
08:28:13.616
Accepted
192.168.43.51:53720
192.168.43.51:53719
19
Apr
6T
Apr
08:28:13.617
192.168.43.51:53721
19 Apr 08:28:13.617
-Accepted 192.168.43.51:53722
●loglevel=debug
---
## Page 34
19
DB loaded from disk: 0.e00
6413]
6413
19Apr
61
08:29:25.421
75220 bytes in use
6413
08:29:30.668
-θclients co
ected
(0slaves),
752288 bytes in use
6413
08:29:35.768
0clients
slaves),752200 bytes in use
6413
19Apr
08:29:39.324-
Accepted 192.168.43.51:53835
08:29:40.868
8:29:39.431
9
nected (0 slaves), 752200 bytes in use
38:29:44.764
Accepted 192.168.43.51:53970
Accepted 192.168.43.51:53969
9
88:29:44.764-
88:29:44.764
8: 29 :44.764
Accepted 192.168.43.51:53972
88:29:44.764
88:29:44.764
Accepted 192.168.43.51:53974
192.168.43.51:53973
413
88:29:44.765
44.764
cepted
192.168.43.51:53975
88:29:44.765
:29:
44.765
9
Accepted
44.765
192.168.43.51:53979
98:29:44.766
44.766
Accepted
pted
192.168.43.51:5398
192.168.43.51:53982
44.766
38:29:44.766
29:
44.766
epted
192.168.43.51:539
9
44.766
44.767
192.168.
08:29:44.767
Accepted.
44.767
Accepted
38:29:44.768
44.768
cepted
192.168.43.51:5399
9
Accepted
9
Accepted 192.168.43.51:53996
192.168.43.51:53995
19Apr
08:29:44.768
08:29:44.768
Accepted 192.168.43.51:53997
64137
19Apr
08:29:44.768
19A
B8:29:44.769
Accepted 192.168.43.51:53999
1-31clients connected (0 slaves),1399480 bytes in use
综上来看，我们只有把loglevel设置为 verbose 或者debug 的时候才可以记录到暴力破解
也就是说默认情况下不看网络连接根本无法观察到暴力破解，当然了，安全设备如edr可能是会监测的
20210419现在的问题是redis对于认证成功和失败日志都是一样的，无法区分攻击和正常登录，需要后期再讨论
20210513redis目前无法通过日志来判断是否被暴力破解
---
## Page 35
r condition. To fix this issu
6379
oytes
暴力破解的
---
## Page 36
[6652]19 Apr08:46:10.846-0c1ients connected （0slaves),752200 bytes in use
[6652]
19 Apr 08:46:14.720-Accepted 192.168.43.51:55229
6652]
19 Apr 08:46:14.825-Client closed connection
[6652]
19Apr08:46:15.960-0c1ientsconnected （0slaves）,752200 bytes inuse
6652]
19 Apr 08:46:20.048-Accepted 192.168.43.51:55361
[6652]
19Apr08:46:20.049-Accepted 192.168.43.51:55362
[6652]
19 Apr 08:46:20.049-Accepted 192.168.43.51:55363
6652]
19 Apr 08:46:20.049-Accepted 192.168.43.51:55364
[6652]
19 Apr 08:46:20.049-Accepted 192.168.43.51:55365
[6652]
19 Apr 08:46:20.050-Accepted 192.168.43.51:55366
[6652]
19 Apr 08:46:20.050-Accepted 192.168.43.51:55367
[6652]
19Apr08:46:20.050-Accepted 192.168.43.51:55368
[6652]
19Apr 08:46:20.050-Accepted192.168.43.51:55369
[6652]
19 Apr08:46:20.051-Accepted 192.168.43.51:55370
[6652]
19 Apr 08:46:20.051-Accepted 192.168.43.51:55371
[6652]
19 Apr 08:46:20.051-Accepted 192.168.43.51:55372
6652]
19Apr 08:46:20.052-Accepted192.168.43.51:55373
[6652]
19Apr08:46:20.052-Accepted 192.168.43.51:55374
[6652]
19 Apr 08:46:20.052-Accepted 192.168.43.51:55375
[6652]
19Apr 08:46:20.052-Accepted192.168.43.51:55376
[6652]
19 Apr 08:46:20.052-Accepted 192.168.43.51:55377
[6652]
19Apr08:46:20.053-Accepted192.168.43.51:55378
[6652]
19 Apr 08:46:20.053-Accepted 192.168.43.51:55379
[6652]
19Apr08:46:20.053-Accepted 192.168.43.51:55380
[6652]
19 Apr 08:46:20.053-Accepted 192.168.43.51:55381
6652]