 0.01
Europe
North America
Asia
 100
 10
 1
Time Until First Query, x (sec)
 10000  100000
 1000
(a) Each Geographic Region 
s
n
o
i
s
s
e
S
f
o
n
o
i
t
c
a
r
F
x
>
i
e
m
T
h
t
i
w
 1
 0.1
 0.01
> 3 Queries
= 3 Queries
i
e
m
T
h
t
i
w
 1
 0.1
 0.01
Start at 03:00-04:00
Start at 11:00-12:00
Start at 13:00-14:00
Start at 19:00-20:00
 10
 100
 1000
 1
Time Until First Query, x (sec)
(c) Each Key Period,  
 10000 100000
Peers in Europe 
Figure 7. Distribution of Time Until First Query for Active Sessions 
distribution  of  the  number  of  queries  per  session  for  each 
geographical region in Figure 6 (c). We observe that the number of 
queries  without  applying  filter  rules  4  and  5  most  significantly 
changes for Asian peers. For Asian peers there is a large fraction of 
about 4% of sessions with more than 100 queries. In future work 
we will further analyze if the queries in these sessions are truly user 
generated. The analysis in the remainder of this paper is based on 
the number of queries with filter rules 4 and 5 applied. 
We plot in Figure 7 (a) the CCDF for the time until the first query 
after  the  connection  establishment  of  a  session  broken  down  by 
geographical region. While the curves look very similar for North 
American and European peers, there is a significant difference for 
Asian peers. The first query within a session from Asian peers is 
issued within 10 seconds for 10% of the peers, whereas this fraction 
constitutes  20%  for  North  America  and  Europe.  The  fraction  of 
peers that issue a query within 30 seconds stays with 40% almost 
equal for all regions. Another 50% of the Asian peers issue the first 
query within 30 and 90 seconds. The same fraction of peers issues 
the first query within 30 and 1,000 seconds for Europe, indicating a 
significant  correlation  to  geographical  region.  Furthermore,  a 
fraction of 1% of the sessions started in North America and Europe 
issue the first query after 80,000 seconds, i.e., after more than 20 
hours.  
To analyze correlations between the time until first query and the 
number of queries issued in a session, Figure 7 (b) plots the CCDF 
for  sessions  with  less  than  3  queries,  exactly  3  queries  and  more 
than 3 queries for North American peers. This figure shows that the 
conditional distributions are equal for 50% of the sessions with an 
early first query, while there is a significant difference for the 50% 
of  the  session  with  late  first  query.  In  particular,  in  90%  of  the 
sessions with less than 3 queries the first query is issued before 200 
seconds, in the sessions with exactly 3 queries before 1,000 seconds 
this  correlation, 
and in sessions with more than 3 queries before 2,000 seconds. We 
conclude from Figure 7 (b) that for North America the time until 
first  query  is  correlated  with  the  session  length  in  number  of 
queries. In an experiment not shown, we found the same result for 
European peers. 
Figure  7  (c)  plots  the  CCDF  of  time  until  first  query  for  the 
important  daily  time  periods  of  European  peers  identified  above. 
We  find  that  in  sessions  started  in  the  non-peak  hours  in  a 
significant  fraction  of  the  sessions  the  first  query  is  sent  10,000 
seconds and more after session start. These fractions constitute 10% 
for  Europe.  The  same  trend  can  be  observed  for  the  other 
geographical regions. We conclude from Figure 7 (c) that there is a 
significant correlation between time of day and the time until first 
query.  To  capture 
the  workload  model 
distinguishes  between  sessions  starting  in  peak  and  in  non-peak-
hours. 
The time until the first query conditioned on geographical region, 
time of day and number of queries per session can be modeled by a 
bimodal  distribution  composed  of  a  Weibull  distribution  for  the 
body and a lognormal distribution for the tail as shown in Figure 
A.1  (b)  of  the  Appendix.  The  parameters  for  the  conditional 
distributions for North American peers are presented in Table A.3. 
We  denote  the  time  between  issuing  two  subsequent  queries  as 
query  interarrival  time.  Figure  8  (a)  plots  the  CCDF  of  query 
interarrival time broken down by geographical region. This figure 
shows  that  queries  generated  by  European  peers  have  shorter 
interarrival  times  than  the  peers  from  the  other  two  regions.  For 
instance,  the  fraction  of  interarrival  times  below  100  seconds 
constitutes 90% for Europe, while it is 80% for Asia and 70% for 
North  America.  We  conclude  from  Figure  8  (a)  that  query 
interarrival  time  shows  a  significant  correlation  to  geographical 
h
t
i
x
>
e
m
T
i
l
a
v
i
r
r
a
r
e
t
n
I
w
s
e
i
r
e
u
Q
f
o
n
o
i
t
c
a
r
F
 1
 0.1
 0.01
 1
s
e
i
r
e
u
Q
f
o
n
o
i
t
c
a
r
F
x
>
i
e
m
T
h
t
i
w
 1
 0.1
 0.01
 1
 10000
h
t
i
x
>
e
m
T
i
l
a
v
i
r
r
a
r
e
t
n
I
w
s
e
i
r
e
u
Q
f
o
n
o
i
t
c
a
r
F
 1
 0.1
 0.01
 1
10000
Start at 03:00-04:00
Start at 19:00-20:00
Start at 13:00-14:00
Start at 11:00-12:00
 10
 100
 1000
10000
Interarrival Time, x (sec)
= 2 Queries
3-7 Queries
> 7 Queries
 10
 100
 1000
Interarrival Time, x (sec)
North America
Asia
Europe
 10
 100
 1000
Interarrival Time, x (sec)
(a) Each Geographic Region 
(b) Conditioned on Session Length, 
Peers in Europe 
(c) Each Key Period,  
Peers in Europe 
Figure 8. Distribution of Time Between Queries for Active Sessions 
s
n
o
i
s
s
e
S
f
o
n
o
i
t
c
a
r
F
x
>
i
e
m
T
h
t
i
w
 1
 0.1
 0.01
Europe
North America
Asia
 100
 10
 1
Time After Last Query, x (sec)
 10000  100000
 1000
(a) Each Geographic Region 
 1
 0.1
 0.01
s
n
o
i
s
s
e
S
f
o
n
o
i
t
c
a
r
F
x
>
i
e
m
T
h
t
i
w
8 Queries
>8 Queries
2 Queries
3-7 Queries
1 Query
 10
 100
 1
Time After Last Query, x (sec)
(b) Conditioned on Session Length, 
 1000
 10000 100000
Peers in North America 
 1
 0.1
 0.01
s
n
o
i
s
s
e
S
f
o
n
o
i
t
c
a
r
F
x
>
i
e
m
T
h
t
i
w
Last Query at 11:00-12:00
Last Query at 13:00-14:00
Last Query at 19:00-20:00
Last Query at 03:00-04:00