Trap Severity Warning
Mnemonic Code hwMstpiPortStateForwarding
Trap OID 1.3.6.1.4.1.2011.5.25.42.4.2.1
Alarm ID 该Trap是事件Trap，不涉及告警ID。
文档版本 06 (2017-09-12) 华为专有和保密信息 534
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 37 MSTP
Trap属性 描述
Alarm Type 该Trap是事件Trap，不涉及告警类型。
Raise or Clear 该Trap是事件Trap，不涉及告警产生或恢复。
Match trap 该Trap是事件Trap，不涉及配对Trap。
Trap Buffer 信息参数
参数名称 参数含义
InstanceID 实例ID。
PortIndex 端口所属实例ID。
IfIndex 端口索引。
PortName 端口名称。
PwName PW名称。
VB 信息参数
VB OID VB Name VB Index
1.3.6.1.4.1.2011.5.25.42.4.1. hwMstpInstanceID hwMstpInstanceID
19.1.1
1.3.6.1.4.1.2011.5.25.42.4.1. hwMstpInstanceID hwMstpiPortIndex
20.1.1
1.3.6.1.2.1.31.1.1.1.1 hwMstpiPortIndex ifName
对系统的影响
网络拓扑发生变化。
可能原因
原因1：The network topology changes.（网络拓扑发生变化。）
处理步骤
l 原因1：The network topology changes.
a. 请查看网络拓扑中的物理设备，是否有启用生成树协议的新的物理链路加
入。
n 如果有启用生成树协议的新的物理链路加入，则请执行步骤2。
n 如果没有启用生成树协议的新的物理链路加入，则请执行步骤3。
文档版本 06 (2017-09-12) 华为专有和保密信息 535
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 37 MSTP
b. 请检查新加入的物理链路是否是需要的物理链路。
n 如果是需要的物理链路，则请执行步骤3。
n 如果不是需要的物理链路，则请执行步骤4。
c. 执行命令display stp [ process process-id ] [ instance instance-id ] [ interface
interface-type interface-number | slot slot-id ] [ brief ]查看各个端口是否符合协
议计算结果。
n 如果各个端口符合协议计算结果，则告警消除。
n 如果各个端口不符合协议计算结果，则请执行步骤5。
d. 请正确部署网络拓扑，查看告警是否消除。如果告警未消除，请执行步骤5。
e. 请收集告警信息、日志信息和配置信息，并联系技术支持人员。
----结束
37.4 MSTP_1.3.6.1.4.1.2011.5.25.42.4.2.2
hwMstpiPortStateDiscarding
Trap Buffer 信息解释
The port has been set to discarding state. (InstanceID=[INTEGER], PortIndex=[INTEGER],
IfIndex=[INTEGER], PortName=[STRING], PwName=[STRING])
端口进入阻塞状态。
Trap 属性
Trap属性 描述
Alarm or Event Event
Trap Severity Warning
Mnemonic Code hwMstpiPortStateDiscarding
Trap OID 1.3.6.1.4.1.2011.5.25.42.4.2.2
Alarm ID 该Trap是事件Trap，不涉及告警ID。
Alarm Type 该Trap是事件Trap，不涉及告警类型。
Raise or Clear 该Trap是事件Trap，不涉及告警产生或恢复。
Match trap 该Trap是事件Trap，不涉及配对Trap。
Trap Buffer 信息参数
参数名称 参数含义
InstanceID 实例ID。
文档版本 06 (2017-09-12) 华为专有和保密信息 536
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 37 MSTP
参数名称 参数含义
PortIndex 端口ID。
IfIndex 端口索引。
PortName 端口名称。
PwName PW名称。
VB 信息参数
VB OID VB Name VB Index
1.3.6.1.4.1.2011.5.25.42.4.1. hwMstpInstanceID hwMstpInstanceID
19.1.1
1.3.6.1.4.1.2011.5.25.42.4.1. hwMstpInstanceID hwMstpiPortIndex
20.1.1
1.3.6.1.2.1.31.1.1.1.1 hwMstpiPortIndex ifName
对系统的影响
网络拓扑发生变化。
可能原因
原因1：The network topology changes.（网络拓扑发生变化。）
处理步骤
l 原因1：The network topology changes.
a. 请查看网络拓扑中的物理设备，是否有启用生成树协议的新的物理链路加
入。
n 如果有启用生成树协议的新的物理链路加入，则请执行步骤2。
n 如果没有启用生成树协议的新的物理链路加入，则请执行步骤3。
b. 请检查新加入的物理链路是否是需要的物理链路。
n 如果是需要的物理链路，则请执行步骤3。
n 如果不是需要的物理链路，则请执行步骤4。
c. 执行命令display stp [ process process-id ] [ instance instance-id ] [ interface
interface-type interface-number | slot slot-id ] [ brief ]查看各个端口是否符合协
议计算结果。
n 如果各个端口符合协议计算结果，则告警消除。
n 如果各个端口不符合协议计算结果，则请执行步骤5。
d. 请正确部署网络拓扑，查看告警是否消除。如果告警未消除，请执行步骤5。
文档版本 06 (2017-09-12) 华为专有和保密信息 537
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 37 MSTP
e. 请收集告警信息、日志信息和配置信息，并联系技术支持人员。
----结束
37.5 MSTP_1.3.6.1.4.1.2011.5.25.42.4.2.3
hwMstpiBridgeLostRootPrimary
Trap Buffer 信息解释
This bridge is no longer the root bridge of the MSTP. (InstanceID=[InstanceID])
本桥不再是实例的根桥。
Trap 属性
Trap属性 描述
Alarm or Event Event
Trap Severity Notice
Mnemonic Code hwMstpiBridgeLostRootPrimary
Trap OID 1.3.6.1.4.1.2011.5.25.42.4.2.3
Alarm ID 该Trap是事件Trap，不涉及告警ID。
Alarm Type 该Trap是事件Trap，不涉及告警类型。
Raise or Clear 该Trap是事件Trap，不涉及告警产生或恢复。
Match trap 该Trap是事件Trap，不涉及配对Trap。
Trap Buffer 信息参数
参数名称 参数含义
InstanceID 实例ID。
VB 信息参数
VB OID VB Name VB Index
1.3.6.1.4.1.2011.5.25.42.4.1. hwMstpInstanceID hwMstpInstanceID
19.1.1
文档版本 06 (2017-09-12) 华为专有和保密信息 538
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 37 MSTP
对系统的影响
网络实际拓扑可能与组网预期不一致。
可能原因
原因1：This bridge receives BPDU packets of higher priority.（本桥收到更高优先级的
BPDU报文。）
原因2：The bridge priorities of other bridge is modified to be higher than the root bridge
priority.（其他桥修改了桥优先级，并且优于根桥。）
处理步骤
l 原因1：This bridge receives BPDU packets of higher priority.
a. 请检查新加入的物理链路是否是需要的物理链路。
n 如果是需要的物理链路，则请执行步骤2。
n 如果是不需要的物理链路，则请执行步骤3。
b. 执行命令display stp [ process process-id ] [ instance instance-id ] [ interface
interface-type interface-number ] [ brief ]查看各个端口是否符合协议计算结
果。
n 如果符合协议计算结果，则无需处理。
n 如果不符合协议计算结果，则请执行步骤4。
c. 请正确部署网络拓扑，查看告警是否消除。如果未消除，请执行步骤4。
d. 请收集告警信息、日志信息和配置信息，并联系技术支持人员。
l 原因2：The bridge priorities of other bridge is modified to be higher than the root
bridge priority.
a. 执行命令display stp [ process process-id ] [ instance instance-id ] [ interface
interface-type interface-number | slot slot-id ] [ brief ]检查网络拓扑中优先级更
改操作是否是正常操作。
n 如果是正常操作，则无需处理。
n 如果是非正常操作，则请执行步骤2。
b. 请在系统视图下执行命令stp [ instance instance-id ] priority priority，根据实
际需要重新配置本桥的优先级。或者执行命令undo stp [ instance instance-id ]
priority、undo stp [ instance instance-id ] root将桥优先级还原成缺省值。查看
告警是否消除。如果未消除，请执行步骤3。
c. 请收集告警信息、日志信息和配置信息，并联系技术支持人员。
----结束
37.6 MSTP_1.3.6.1.4.1.2011.5.25.42.4.2.4
hwMstpiPortRootGuarded
Trap Buffer 信息解释
The root protection port received a superior message. (InstanceID=[InstanceID],
PortIndex=[PortIndex], IfIndex=[IfIndex], PortName=[PortName], PwName=[PwName])
文档版本 06 (2017-09-12) 华为专有和保密信息 539
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 37 MSTP
启用了根保护功能的端口上收到了较优的消息。
Trap 属性
Trap属性 描述
Alarm or Event Event
Trap Severity Warning
Mnemonic Code hwMstpiPortRootGuarded
Trap OID 1.3.6.1.4.1.2011.5.25.42.4.2.4
Alarm ID 该Trap是事件Trap，不涉及告警ID。
Alarm Type 该Trap是事件Trap，不涉及告警类型。
Raise or Clear 该Trap是事件Trap，不涉及告警产生或恢复。
Match trap 该Trap是事件Trap，不涉及配对Trap。
Trap Buffer 信息参数
参数名称 参数含义
InstanceID 实例ID。
PortIndex 端口ID。
IfIndex 端口索引。
PortName 端口名称。
PwName PW名称。
VB 信息参数
VB OID VB Name VB Index
1.3.6.1.4.1.2011.5.25.42.4.1. hwMstpInstanceID hwMstpInstanceID
19.1.1
1.3.6.1.4.1.2011.5.25.42.4.1. hwMstpInstanceID hwMstpiPortIndex
20.1.1
1.3.6.1.2.1.31.1.1.1.1 hwMstpiPortIndex ifName
对系统的影响
网络实际拓扑可能与组网预期不一致。
文档版本 06 (2017-09-12) 华为专有和保密信息 540
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 37 MSTP
可能原因
原因1：The port enabled with the root protection function received BPDUs of a higher
priority than that of the bridge.（配置了根保护的指定端口收到了比本桥优先级高的
BPDU报文。）
原因2：The priority of some switch changed in the network.（网络拓扑有交换机优先级发
生变化。）
处理步骤
l 原因1：The port enabled with the root protection function received BPDUs of a higher
priority than that of the bridge.
a. 请检查新加入的物理链路是否是需要的物理链路。
n 如果新加入的物理链路是需要的物理链路，则请执行步骤2。
n 如果新加入的物理链路不是需要的物理链路，则请执行步骤3。
b. 执行命令display stp [ process process-id ] [ instance instance-id ] [ interface
interface-type interface-number ] [ brief ]查看各个端口是否符合协议计算结
果。
n 如果各个端口符合协议计算结果，则无需处理。
n 如果各个端口不符合协议计算结果，则请执行步骤4。
c. 请正确部署网络拓扑，查看告警是否消除。如果未消除，则请执行步骤4。
d. 执行命令display stp [ process process-id ] [ instance instance-id ] [ interface
interface-type interface-number | slot slot-id ] [ brief ]查看网络中是否有端口被
规划为根保护端口。
n 如果有端口被规划为根保护端口，则请执行步骤5。
n 如果没有端口被规划为根保护端口，则请执行步骤6。
e. 在接口视图下，执行命令undo stp root-protection去除根保护配置，查看告警
是否消除。如果未消除，则请执行步骤6。
f. 请收集告警信息、日志信息和配置信息，并联系技术支持人员。
l 原因2：The priority of some switch changed in the network.
a. 执行命令display stp [ process process-id ] [ instance instance-id ] [ interface
interface-type interface-number ] [ brief ]查看网络拓扑中优先级的更改操作是
否是正常操作。
n 如果是正常操作，则请执行步骤3。
n 如果不是正常操作，则请执行步骤2。
b. 请在系统视图下执行命令stp [ instance instance-id ] priority priority，根据实
际需要重新配置本桥的优先级。或者执行命令undo stp [ instance instance-id ]
priority、undo stp [ instance instance-id ] root将桥优先级还原成缺省值。查看
告警是否消除。如果告警未消除，则请执行步骤3。
c. 执行命令display stp [ process process-id ] [ instance instance-id ] [ interface
interface-type interface-number ] [ brief ]查看网络中是否有端口被规划为根保
护端口。
n 如果有端口被规划为根保护端口，则请执行步骤4。
n 如果没有端口被规划为根保护端口，则请执行步骤5。
d. 在接口视图下，执行命令undo stp root-protection去除根保护配置，查看告警
是否消除。如果未消除，则请执行步骤5。
文档版本 06 (2017-09-12) 华为专有和保密信息 541
版权所有 © 华为技术有限公司
CloudEngine 12800系列交换机
告警处理 37 MSTP
e. 请收集告警信息、日志信息和配置信息，并联系技术支持人员。
----结束
37.7 MSTP_1.3.6.1.4.1.2011.5.25.42.4.2.5
hwMstpiPortBpduGuarded
Trap Buffer 信息解释
The edge port with BPDU protection enabled will be shut down, because it received a BPDU
packet that may be used to initiate an attack. (InstanceID=[InstanceID],
PortIndex=[PortIndex], IfIndex=[IfIndex], PortName=[PortName])
启用了BPDU保护功能的边缘端口上收到了BPDU报文，将被shutdown。
Trap 属性
Trap属性 描述
Alarm or Event Event
Trap Severity Warning
Mnemonic Code hwMstpiPortBpduGuarded
Trap OID 1.3.6.1.4.1.2011.5.25.42.4.2.5