One-Liners to Rule 
Them All
egypt
wvu
What this is
Bash basics
●
Minor portability considerations
One-liners and demos of stuff we find to be useful
@egyp7
@wvuuuuuuuuuuuuu
What this isn’t
Linux system administration
●
Although there is some amount of overlap
Reading the man page to you
@egyp7
@wvuuuuuuuuuuuuu
`man bash` is 
cavernous
There are resources to help
From the abstract
Sometimes you just need to pull out the third column of a CSV 
file. Sometimes you just need to sort IP addresses. Sometimes you 
have to pull out IP addresses from the third column and sort them, 
but only if the first column is a particular string and for some 
reason the case is random.
Up, edit, enter, repeat
cat file
cat file | grep open
cat file | grep -i open
cat file | grep -i open | cut -d, -f3
grep -i open | cut -d, -f3
awk -F, 'tolower($1) ~ /open/ { print $3 }' file | sort -V
Conventions
Commands are usually suffixed with a man(1) section
Almost all of what we’re talking about here is man section 1
But there’s naming overlaps with syscalls (man section 2), C 
functions (man section 3), and occasionally config files (man 
section 5)
Core Concepts
●
Pipes and redirection
●
Variables and substitution
●
Standard tools
●
History expansion
●
Brace expansion
●
Tilde expansion
Pipes and Redirection
The following slides are for 
the folks playing at home. All 
of this is happening in a 
shell. Pay no attention to the 
man behind the curtain.
Pipes and Redirection
●
echo wut | cat
●
echo wut > /tmp/wut
○
cat /tmp/wut
○
cat &1
exec 3<>/dev/tcp/10.1.1.1/80;echo $'GET / HTTP/1.0\n' >&3;cat  and  to search based on what we've already typed
"\e[A": history-search-backward
"\e[B": history-search-forward
Brace expansion
Everything inside braces, separated by commas
●
echo {a,b,c}
●
cp file.{csv,txt}
As a replacement for seq(1)
●
{1..99} # same as `seq 1 99`
●
{01..99} # Zero-pad
●
{01..99..2} # Zero-pad, with a step of 2
Tilde expansion
~user is user’s home dir
●
E.g. ~egypt is /home/egypt
~ is the current user’s home directory
●
$HOME
~+ is $PWD # Not the same as .
~- is $OLDPWD
Loops 
for var in expression; do command; command; done
●
for f in *; do mv “$f” “${f/.csv/.txt}”; done
while expression; do command; command; done
●
()
cat  lfile # Like scp(1) download
Remote stuff with bash
gzip -c file > /dev/tcp/192.168.0.1/80
●
/dev/tcp is a special magical “file” in bash
●
Compile-time option, default now in Debian derivatives
# Shitty portscanner
for port in {1..1023}; do
: 2> /dev/null > "/dev/tcp/192.168.0.1/$port" && echo "$port"
done
Random stuff
xsel -b  file.bin
xxd -r -p  file.bin
perl -e 'print "\105\114\106\177"' > file.bin
Bonus!
Everything on the previous two slides is automatic on shell 
sessions in Metasploit. Upload and download just work (tm).
Host some stuff
python -m SimpleHTTPServer 8080
python -m http.server 8080
ruby -run -e httpd
php -S 0:8080 # Interprets PHP, too
busybox httpd -p 8080
Resources
http://explainshell.com  # Break it down
http://www.tldp.org/LDP/abs/html/  # Classic
http://wiki.bash-hackers.org/  # Awesome
https://mywiki.wooledge.org/BashPitfalls  # Good to know
Google site:stackoverflow.com
@egyp7
@wvuuuuuuuuuuuuu