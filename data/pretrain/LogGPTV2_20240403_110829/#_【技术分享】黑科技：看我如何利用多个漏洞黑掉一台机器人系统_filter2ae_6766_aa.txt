# 【技术分享】利用多个漏洞攻破协同机器人系统

#### 译文声明
本文为翻译文章，原文来源于ioactive.com。具体表达及含义以原文为准。
- 译者：[blueSky](http://bobao.360.cn/member/contribute?uid=1233662000)
- 预估稿费：260 RMB
- 投稿方式：发送邮件至linwei#360.cn 或 登录网页版在线投稿

在传统观念中，工业机器人主要用于执行重复性、程序化的任务，通常在制造和生产环境中独立或在人类指导下工作。由于这些任务往往具有危险性或不适合人类操作，因此工业机器人的工作环境通常与人类和其他重要设备隔离。

然而，最新一代的协同机器人（“cobots”）却有所不同。它们能够在符合安全标准的前提下，与人类或其他机器在同一环境中协同工作。Cobots不仅能够辅助人类完成任务，还能通过高清摄像头和麦克风等传感器进行学习和感知。

### Cobots的安全研究
相较于传统的工业机器人，Cobots提供了更为丰富的攻击面。不仅如此，Cobots的应用范围也不再局限于工业领域，它们可以被集成到各种其他装置中。

去年二月，Cesar Cerrudo和我共同发表了一篇非技术性的论文《Hacking Robots Before Skynet》。在这篇论文中，我们对多家知名厂商生产的家用、商用以及工业机器人进行了详细研究，并发现了近50个关键的安全漏洞。其中，针对Rethink Robotics的Baxter/Sawyer和Universal的UR机器人，我们发现了一些重要的安全问题。

#### 具体漏洞
- **Baxter/Sawyer**:
  - 身份验证漏洞
  - 使用不安全的协议传输数据
  - 默认配置易受物理攻击
  - 使用存在多个安全漏洞的ROS框架
  - 主要问题已在2017年2月修复

- **UR**:
  - 控制协议中的身份验证问题
  - 易受物理攻击
  - 内存破坏漏洞
  - 不安全的通信传输
  - 截至2017年5月，这些问题仍未修补

根据IOActive网络安全公司的漏洞披露政策，我们在去年1月份已经与相关供应商取得联系，以便他们有足够的时间修复这些漏洞并通知客户。我们的目标是提高Cobots的安全性，防止攻击者利用这些漏洞对企业、员工和周围环境造成严重伤害。

### 攻击示例
在本文中，我将讨论攻击者如何利用Cobot（如UR3, UR5, UR10 – Universal Robots）的多个漏洞远程修改安全设置，违反适用的安全准则，并通过移动机器人对其周围的工作人员造成身体上的伤害。我们将展示如何利用六个漏洞来改变其安全限制，并通过远程网络禁用安全面板和紧急按钮/传感器。

### 常见问题解答
- **问：这些机器人真的可以伤害一个人吗？**
  - 答：是的。加拿大蒙特利尔(ETS)技术研究所的控制和机器人实验室的一项研究表明，即使是较小的UR5模型，其力量也足以造成严重的身体伤害，包括颅骨骨折。

- **问：它们有没有安全功能来防止伤害附近的人类？**
  - 答：是的，但黑客可以通过远程入侵绕过这些安全措施。我将在接下来的技术部分详细介绍黑客是如何入侵这些系统的。

- **问：这些机器人部署在哪里？**
  - 答：世界各地，在多个生产环境中都有使用。

### 集成商的角色
Universal Robots公司是UR机器人的制造商，但在特定应用中安装UR机器人的公司被称为集成商。只有经过集成和安装后，一个机器人才被认为是一个完整的系统。

集成商负责确保整个机器人系统的安全性，包括：
1. 对整个系统进行风险评估（在许多国家这是法律要求）。
2. 如果风险评估认为安全，则连接其他机器和其他安全装置。
3. 在Polyscope软件（控制面板）中设置相应的安全设置，确保用户不会使用“安全密码”来修改任何安全措施。
4. 验证整个系统的设计和安装是否正确。

Universal Robots公司意识到集成商必须考虑机器人存在的潜在重大危害，例如：
1. 机器人工具或工具连接器上的锋利边缘可能刺伤皮肤。
2. 机器人轨道附近的障碍物上的锋利边缘可能刺伤皮肤。
3. 由机器人的碰撞引起的瘀伤。
4. 由机器人沉重的机器零件或材料表面之间的碰撞而产生的扭伤或骨折。
5. 未经授权更改安全配置参数导致的错误。

### 安全相关功能
一些专为Cobot应用设计的安全功能包括：
1. 力和功率限制：减少机器人在碰撞时施加的夹紧力和压力。
2. 动量限制：通过降低速度减少高瞬态能量和冲击力。
3. 刀具定向限制：避免锋利边缘指向操作员。
4. 速度限制：确保机器人手臂低速运行。
5. 安全边界：限制机器人的工作空间。
6. 安全I/O：当触发紧急按钮或传感器时，使安全系统进入“减小”模式。

### 远程更改安全配置
“安全配置只能根据集成商进行的风险评估进行更改。如果改变了安全参数，整个系统应被视为新的，并重新进行风险评估。”

远程更改安全配置的过程如下：
1. 通过UR Dashboard Server上的身份验证漏洞获取远程机器人系统的版本信息。
2. 通过UR Modbus TCP服务中的基于堆栈的缓冲区溢出漏洞获得系统控制权限，并以root身份执行命令。

通过以上步骤，攻击者可以绕过现有的安全措施，操纵机器人威胁人类生命。希望这篇文章能推动Cobots的安全性向前发展，使我们能够更安全地使用这些机器人及其后续版本。