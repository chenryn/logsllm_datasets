Number: 332937-003, Jul. 2016.
allowed in data centers,” in ICAC, 2011.
key drivers and barriers,” Issue Paper, Aug. 2014.
DataCenterKnowledge, April 2016.
[20] NRDC, “Scaling up energy efficiency across the data center industry: Evaluating
[21] Y. Sverdlik, “Google to build and lease data centers in big cloud expansion,” in
[22] Apple, “Environmental responsibility report,” 2016.
[23] Internap, “Colocation services and SLA,” http://www.internap.com/internap/
wp-content/uploads/2014/06/Attachment-3-Colocation-Services-SLA.pdf.
[24] On Semiconductor, “Power factor correction (PFC) handbook,” http://www.
onsemi.com/pub/Collateral/HBD853-D.PDF.
Hill New York, 2007.
[25] H. W. Beaty and D. G. Fink, Standard handbook for electrical engineers. McGraw-
[26] EdgeConnex, http://www.edgeconnex.com/.
[27] DatacenterMap, “Colocation USA,” http://www.datacentermap.com/usa/.
[28] “Colocation market by solutions, end users, verticals & region - worldwide
market forecast and analysis (2013 - 2018),” http://www.researchandmarkets.
com/research/pxndbm/colocation_market.
[29] DatacenterKnowledge, “Vapor IO to sell data center colocation services
at cell towers,” http://www.datacenterknowledge.com/archives/2017/06/21/
vapor-io-to-sell-data-center-colocation-services-at-cell-towers.
[30] Vapor IO, “The edge data center,” https://www.vapor.io/.
[31] Telecommunications Industry Association, “Data center standards overview,” TIA
[32] Colocation America, “Data center standards (Tiers I-IV),” 2017, https://www.
942, 2005 (amended in 2014).
colocationamerica.com/data-center/tier-standards-overview.htm.
[33] M. Sedaghat, E. Wadbro, J. Wilkes, S. D. Luna, O. Seleznjev, and E. Elmroth,
“Diehard: Reliable scheduling to survive correlated failures in cloud data centers,”
in CCGrid, 2016.
[34] M. Sheppy, C. Lobato, O. V. Geet, S. Pless, K. Donovan, and C. Powers, “Reducing
data center loads for a large-scale, low-energy office building: NREL’s research
support facility,” Nov. 2011.
[35] S.-J. Moon, V. Sekar, and M. K. Reiter, “Nomad: Mitigating arbitrary cloud side
[36] X. Gao, Z. Xu, H. Wang, L. Li, and X. Wang, “Reduced cooling redundancy: A
channels via provider-assisted migration,” in CCS, 2015.
new security vulnerability in a hot data center,” in NDSS, 2018.
providers?,”
can-edgeconnex-disrupt-incumbent-data-center-providers/.
[37] DatacenterKnowledge, “Can edgeconnex disrupt
incumbent data center
http://www.datacenterknowledge.com/archives/2016/09/13/
[38] Vertiv, “Flexible, efficient scalable UPS for room or row-based applications,” Lib-
[39] Energy Star, “Computers specification version 7.0,” 2018, https://www.energystar.
erty APS Product Brocure, 2016.
gov/products/spec/computers_specification_version_7_0_pd.
[40] IECEE, “IEC 61000-3-2:2018: Electromagnetic compatibility (EMC) - part 3-2,”
http://www.onsemi.com/pub/Collateral/HBD853-D.PDF.
[41] Microchip, “Switch mode power supply (SMPS) topologies,” http://ww1.
MePNFj.
microchip.com/downloads/en/AppNotes/01114A.pdf.
[42] Infineon Technologies AG, “PFC boost converter design guide,” https://goo.gl/
[43] L. Chen, J. Xia, B. Yi, and K. Chen, “Powerman: An out-of-band management
network for datacenters using power line communication,” in NSDI, 2018.
[44] J. Zhang, J. Shao, P. Xu, F. C. Lee, and M. M. Jovanovic, “Evaluation of input
current in the critical mode boost pfc converter for distributed power systems,”
in IEEE Applied Power Electronics Conference and Exposition.
[45] G. Wang, S. Wang, B. Luo, W. Shi, Y. Zhu, W. Yang, D. Hu, L. Huang, X. Jin, and
W. Xu, “Increasing large-scale data center capacity by statistical power control,”
in EuroSys, 2016.
[46] D. G. Feitelson, D. Tsafrir, and D. Krakov, “Experience with using the parallel
workloads archive,” Journal of Parallel and Distributed Computing, vol. 74, no. 10,
pp. 2967–2982, 2014.
[47] Parallel Workloads Archive, http://www.cs.huji.ac.il/labs/parallel/workload/.
[48] N. Rasmussen, “High-efficiency ac power distribution for data centers,” Schnei-
der Electric White Paper Library, http://www.apc.com/salestools/nran-6cn8pk/
nran-6cn8pk_r2_en.pdf.
[49] N. Rasmussen, “Efficiency and other benefits of 208 volt over 120 volt input
for it equipment,” Schneider Electric White Paper Library, http://www.apc.com/
salestools/SADE-5TNQZ7/SADE-5TNQZ7_R3_EN.pdf.
[50] W. Xu, W. Trappe, and Y. Zhang, “Anti-jamming timing channels for wireless
[52] D. Wang, C. Ren, A. Sivasubramaniam, B. Urgaonkar, and H. Fathy, “Energy
networks,” in WiSec, 2008.
[51] S. Govindan, D. Wang, A. Sivasubramaniam, and B. Urgaonkar, “Leveraging stored
energy for handling power emergencies in aggressively provisioned datacenters,”
in ASPLOS, 2012.
storage in datacenters: what, where, and how much?,” in SIGMETRICS, 2012.
[53] D. S. Palasamudram, R. K. Sitaraman, B. Urgaonkar, and R. Urgaonkar, “Using
batteries to reduce the power costs of internet-scale distributed networks,” in
SoCC, 2012.
[54] M. Guri, M. Monitz, Y. Mirski, and Y. Elovici, “Bitwhisper: Covert signaling
channel between air-gapped computers using thermal manipulations,” in IEEE
Computer Security Foundations Symposium, 2015.
[55] P. C. Kocher, J. Jaffe, and B. Jun, “Differential power analysis,” in CRYPTO, 1999.
[56] M. A. Islam, H. Mahmud, S. Ren, and X. Wang, “Paying to save: Reducing cost of
colocation data center via rewards,” in HPCA, 2015.
[57] C. Wang, N. Nasiriani, G. Kesidis, B. Urgaonkar, Q. Wang, L. Y. Chen, A. Gupta, and
R. Birke, “Recouping energy costs from cloud tenants: Tenant demand response
aware pricing design,” in eEnergy, 2015.
[58] N. Nasiriani, C. Wang, G. Kesidis, B. Urgaonkar, L. Y. Chen, and R. Birke, “On
fair attribution of costs under peak-based pricing to cloud tenants,” in MASCOTS,
2015.
[59] M. A. Islam, X. Ren, S. Ren, and A. Wierman, “A spot capacity market to increase
[60] On Semiconductor, “Switch-mode power supply reference manual,” https://www.
power infrastructure utilization in multi-tenant data centers,” in HPCA, 2018.
onsemi.com/pub/Collateral/SMPSRM-D.PDF.
APPENDIX
A THE NEED OF PFC IN SERVER’S POWER
SUPPLY UNIT
Here, we discuss the implication of not using a power factor correc-
tion (PFC) circuit in a server’s power supply unit. Fig. 20(a) shows
a AC-to-DC converter without the PFC stage. The output of the
bridge-rectifier is delivered to the load (e.g., CPU, disk, etc.) through
a diode. A bulk capacitor is placed at the output to stabilize the
voltage. As shown in Fig. 20(b), this circuit can provide a relatively
stable DC voltage to the load. However, due to the diode, the load
gets current from the source only when the load voltage is lower
than the rectifier output voltage. It gets its needed current from
the bulk capacitor when the rectifier output voltage is lower than
the load voltage. Hence, the bridge rectifier only conducts current
during a brief moment near the input voltage’s peak when the
input voltage is higher than the load voltage (which is also the
voltage across the bulk capacitor). In addition, during the rectifier
conduction, the external source line powers both the load and the
bulk capacitor, creating a high current spike from the source line.
Fig. 20(c) shows the source voltage at the AC-to-DC converter’s
input and the current supplied by the source line (i.e., drawn from
the UPS through the PDU). The large difference between the voltage
and the current shape reduces the power factor to a level much
less than 1 (i.e., for much of the time, the UPS and PDU are not
delivering any actual current or power to the server).
(a)
(b)
(c)
Figure 20: (a) A basic AC/DC power supply unit without a
PFC circuit. (b) Rectifier delivers current in bursts. (c) The
heavily-distorted current drawn by the server’s power sup-
ply unit without the PFC.
Thus, for improving power factor as mandated by [39, 40], a PFC
circuit (which universally uses the PWM switching design due to
its high efficiency [60]) is needed for server’s power supply unit.
SourceVoltageAC120/208VBulkCapacitorLoadRectifiedVoltageLoadVoltageFull-bridgeRectifierRectifier voltageLoad voltageRectifier conductionRectifier currentSource voltageSource currentB SERVER POWER VS. PSD FOR ALTERNATE
POWER SUPPLY UNIT
Fig. 21 shows the relation between the server power and the result-
ing PSD for one of our servers with a 350W power supply unit. As
in Fig. 9(b), we see a monotonic increasing relation between the
aggregate PSD and server’s power consumption.
(a) Voltage
(b) On battery backup
Figure 23: (a) Voltage reading at the PDU with the UPS run-
ning in normal mode and in battery-backup mode. (b) The
PSD spike from server power supply unit is still visible with
the non-sinusoidal voltage during the battery-backup mode.
E POWER SUPPLY UNITS
Fig. 24 shows the three different types of power supplies we have in
our servers. Even though all of these are used by the Dell PowerEdge
servers, they have different model numbers and are manufactured
by different companies. While the 350W power supply unit ap-
parently has a different size and rating than the other two, and
therefore cannot be swapped, the similar sized 495W power sup-
plies are also not allowed (server does not boot) to be swapped due
to their model differences.
Figure 21: Server power vs. PSD aggregated within the band-
width of 63 ∼ 64kHz for the 350W PSU.
C POWER VS. PSD FOR DIFFERENT SERVERS
Fig. 22 shows the power vs. aggregate PSD plot for the three benign
tenants from our 12-hour experiment. This figure is based on the
same results of Fig. 12. Instead of plotting all data points from the
12-hour trace, we randomly choose 500 data points for this figure.
It reveals that for the same power level, tenant #1’s servers have a
smaller aggregate PSD than the other two tenants. This supports
our choice of treating each group of spikes separately.
Figure 22: Power vs. PSD plot of different server groups.
D WHEN UPS IS ON BATTERY.
In our previous experiments, the UPS is working in the normal mode
without performing voltage regulation. Now, we see if the voltage
ripple is still prominent when the UPS is active and providing
power through its battery. Fig. 23(a) shows the waveforms of the
UPS output voltage in the normal and on-battery modes: the UPS
passes the grid voltage to the PDU without much modification in
the normal mode, whereas it produces an alternating square wave
with a duty cycle of 0.5 when on battery (typically due to loss of grid
power). Intuitively, when on battery, the non-sinusoidal voltage will
add additional frequency components. When the UPS is on battery,
we turn on one server and show in Fig. 23(b) the resulting PSD
of the measured voltage. While the battery operation introduces
additional frequency components (mostly at the lower frequencies),
the PSD spike due to the server’s PFC switching is still clearly
visible at around 70kHz. Along with our previous experiments, this
demonstrates that, even though the UPS modifies the incoming grid
voltage, the attacker can still exploit the PSD spikes to estimate
servers’ aggregate power usage.
Figure 24: The three different types of server power supplies
in our experiments.
F PFC SWITCHING FREQUENCY
Here we investigate the temporal variation of the switching fre-
quency of the server power supply unit. For this, we record the PDU
voltage reading for two hours with one server running. We then
get the PSD for each one-second sample and extract the switch-
ing frequency from the PSD spike around 70kHz. Fig. 25 shows
the probability mass function (PMF) of the switching frequency.
We see that while not perfectly fixed, the switching frequency re-
mains mostly within a narrow (<100Hz) window. Due to this small
temporal variation combined with the random manufacturing im-
perfections, PSD spikes from multiple servers with the same (model
and generation) power supply unit do not perfectly overlap with
each other, and therefore generates a group of spikes in the voltage
PSD.
G DC POWER DISTRIBUTION
We show a data center a with DC power distribution in Fig. 26.
In this type of data center, a UPS converts the grid’s three phase
AC voltage to a 380V-DC voltage and distributes inside the data
center through DC PDUs. DC distribution requires all servers to
have DC power supply units which use only a DC to DC converter
405060708090Power (W)0.00.20.40.60.81.01.21.4Aggregate PSD (W)£10−5Data pointsFitting100150200250300350400450Power (W)0.00.20.40.60.81.0Aggregate PSD (W)£10−5Tenant #1Tenant #2Tenant #305101520253035404550Time (millisecond)−200−1000100200300UPS Voltage (V)NormalOn Battery020406080100Frequency (kHz)10-610-510-410-310-210-1100101PSD (W/Hz)Spike due toPFC switching2495W, PFC Switching 6kHzModel: F495E-S0Manufacturer: AstecIntl. Ltd.1350W, PFC Switching kHzModel: D35E-S1Manufacturer: Delta Electronics Inc.3495W, PFC Switching kHzModel: E495E-S1Manufacturer: Flextronics Intl. Ltd.Figure 25: PMF shows the PFC switching frequency only
fluctuates slightly.
to supply regulated 12V to server internal components. Unlike AC
power supplies, the DC power supplies do not require a power
factor correction circuit.
Figure 28: Three-phase distribution with three-phase
server/server racks.
Figure 26: DC power distribution with DC server power sup-
ply unit that has no PFC circuit.
H DIFFERENT THREE-PHASE LINE
CONNECTIONS
We show two alternate three-phase line connections used in large
multi-tenant data centers.
Fig. 27 shows the connectivity for a three-phase line-to-neutral
connection that supplies power to servers at 120V. In this type of
connection, a server/server rack is connected to only one phase.
Thus, the voltage drop of each phase depends on only the servers
connected to that phase. As a result, this can be handled as three
separate single-phase systems, and the attacker can easily track the
tenants’ per-phase total power usage by housing one server rack
on each phase.
Figure 27: Three-phase distribution with single-phase, 120V
server/server racks.
Fig. 28 shows the line connectivity that uses three-phase dis-
tribution all the way down to servers. This type of connection
is not common because of the three-phase server power supply
unit requirement. The 3-phase power supply unit equally loads its
three phases, and hence this type of connection can be treated as a
single-phase system replicated three times.
70.070.170.270.3Switching Frequency (kHz)0.000.020.040.060.080.100.120.140.16PMFVoltage RegulatorDC/DCDC power supplyServer380V12V380V, DCAC/DC UPSPDU480V3𝝓AC3 phase PDU3 phase UPS𝑹𝑳𝑽𝒂𝑽𝑨𝑰𝒂,𝟏𝑰𝑨𝑹𝑳𝑽𝒃𝑽𝑩𝑰𝑩𝑹𝑳𝑽𝑪𝑰𝑪𝑽𝒂𝑰𝒂,𝑵𝒂𝑽𝒂𝑰𝒂=𝑰𝒂,𝟏+⋯+𝑰𝒂,𝑵𝒂𝑹𝑵𝑽𝑨𝑰𝑵𝑰𝒃,𝟏𝑽𝒃𝑰𝒃,𝑵𝒃𝑽𝒃𝑰𝒃=𝑰𝒃,𝟏+⋯+𝑰𝒃,𝑵𝒃𝑰𝒄,𝟏𝑽𝒃𝑰𝒄,𝑵𝒃𝑽𝒃𝑰𝒄=𝑰𝒄,𝟏+⋯+𝑰𝒄,𝑵𝒄𝑽𝒄𝑰𝑨=𝑰𝒂𝑰𝑩=𝑰𝒃𝑰𝑪=𝑰𝒄Current equations3 phase PDU𝑹𝑳𝑽𝒂𝑽𝑨𝑰𝒂,𝟏𝑰𝑨𝑹𝑳𝑽𝒃𝑽𝑩𝑰𝑩𝑹𝑳𝑽𝑪𝑰𝑪𝑽𝒂𝑽𝒃𝑰𝑨= 𝑰𝒂=𝑰𝒂,𝟏+⋯+𝑰𝒂,𝑵 𝑽𝑪𝑰𝒃,𝟏𝑽𝒄𝑰𝒄,𝟏𝑰𝒂,𝑵𝑽𝒂𝑽𝒃𝑰𝒃,𝑵𝑽𝒄𝑰𝒄,𝑵𝑰𝑩= 𝑰𝒃=𝑰𝒃,𝟏+⋯+𝑰𝒃,𝑵 𝑰𝑪= 𝑰𝒄=𝑰𝒄,𝟏+⋯+𝑰𝒄,𝑵 3 phase UPSCurrent equations