Figure 11: Diversity Throughput. Throughput of a JMB client
when using diversity with 2, 4, 6, 8 and 10 APs. JMB can achieve
close to maximum rate even to a client unable to receive any packets
with 802.11.
11.4 Diversity
As described in §8, in addition to providing multiplexing gains,
JMB can also provide throughput gains through diversity. In this sec-
tion, we investigate JMB’s diversity gains.
Method. We place several APs in random AP locations in the
testbed, and one node at a client location, ensuring it has roughly
similar SNRs to all APs. We then compute the throughput with reg-
ular 802.11 and JMB. We repeat the experiment with the number
of APs varying from 2 to 10, and plot the results for the range of
operational SNRs of 802.11.
Results. Fig. 11 shows throughput of 802.11 and JMB as a func-
tion of SNR for 2, 4, 6, 8 and 10 APs. Note that JMB provides sig-
niﬁcant gains over 802.11, especially at low SNRs. For instance, a
client that has 0 dB channels to all APs (i.e. its received power from
each AP is about the same as the noise) cannot get any throughput
with 802.11. However the ﬁgure shows that, with 10 APs, such a
client can achieve a throughput of 21 Mbps with JMB. Thus, us-
ing JMB for diversity can signiﬁcantly expand the coverage range
of an 802.11 deployment, and alleviate dead spots. This is expected
because with JMB’s coherent diversity, using APs to coherent com-
bine the signal can provide a multiplicative increase in the SNR of
N2 [39]. This results in signiﬁcant throughput improvements in the
low SNR regime.
 0 50 100 150 200 250 2 3 4 5 6 7 8 9 10Throughput (Mbps)Number of receivers802.11JMB 0 30 60 90 120 150 2 3 4 5 6 7 8 9 10Number of receivers802.11JMB 0 20 40 60 80 100 2 3 4 5 6 7 8 9 10Number of receivers802.11JMB 0 0.2 0.4 0.6 0.8 1 1 2 3 4 5 6 7 8 9 10Fraction of receiversThroughput Gain2 APs6 APs10 APs 0 0.2 0.4 0.6 0.8 1 1 2 3 4 5 6 7 8 9 10Throughput Gain2 APs6 APs10 APs 0 0.2 0.4 0.6 0.8 1 1 2 3 4 5 6 7 8 9 10Throughput Gain2 APs6 APs10 APs-5 0 5 10 15 20 25 0 5 10 15 20 25Throughput (Mbps)Effective SNR (dB)10 APs8 APs6 APs4 APs2 APs802.11 transmitter24412. CONCLUSION
This paper enables joint beamforming from distributed indepen-
dent transmitters. The key challenge in delivering this system is to
perform accurate phase synchronization across multiple distributed
transmitters. The lessons learnt from building the system and test-
ing it with real hardware are : 1) Estimates of frequency offset can
be made accurate enough to predict (and hence correct) phase mis-
alignment within an 802.11 packet; however, these estimates cannot
be used across multiple packets due to large build-ups in phase errors
over time; and 2) Joint multi-user beamforming can be achieved by
synchronizing the phases of all senders to one lead sender, and does
not impose any phase synchronization constraints on the receivers.
We believe that the design of JMB has wider implications than ex-
plored in this paper. In particular, several areas of information theory
like lattice coding, noisy network coding, and transmitter coopera-
tion for cognitive networks [26, 18, 23] assume tight phase synchro-
nization across transmitters. We are optimistic that the algorithms
presented in this paper can bring these ideas closer to practice.
Acknowledgments: We thank Dan Halperin for answering various
questions about CSI feedback from the Intel cards, and Shyam Gol-
lakota and Nate Kushman for their helpful comments on the paper.
This work is funded by NSF.
13. REFERENCES
[1] IEEE standard for information technology–telecommunications and information
exchange between systems–local and metropolitan area networks–speciﬁc
requirements part 11: Wireless LAN medium access control (MAC) and physical
layer (PHY) speciﬁcations amendment 5: Enhancements for higher throughput.
IEEE Std 802.11n-2009 (Amendment to IEEE Std 802.11-2007 as amended by
IEEE Std 802.11k-2008, IEEE Std 802.11r-2008, IEEE Std 802.11y-2008, and
IEEE Std 802.11w-2009), pages c1 –502, 29 2009.
[2] S. Aeron and V. Saligrama. Wireless ad hoc networks: Strategies and scaling laws
for the ﬁxed SNR regime. IEEE Transactions on Inf. Theor., 53(6), 2007.
[3] E. Aryafar, N. Anand, T. Salonidis, and E. Knightly. Design and experimental
evaluation of multi-user beamforming in wireless LANs. In Mobicom 2010.
[4] S. Berger and A. Wittneben. Carrier phase synchronization of multiple distributed
nodes in a wireless network. In 8th IEEE Workshop on Signal Processing
Advances for Wireless Communications (SPAWC), Helsinki, Finland, June 2007.
[5] Distributed Antenna Systems.
http://medicalconnectivity.com/2008/02/05/distributed-antenna-systems-no-
replacement-for-wireless-strategy.
[6] USRP. http://www.ettus.com. Ettus Inc.
[7] A. Forenza, R. W. H. Jr., and S. G. Perlman. System and Method For Distributed
Input-Distributed Output Wireless Communications. U.S. Patent Application
number 20090067402.
[8] System for increasing capacity in future mobile communications networks.
http://www.hhi.fraunhofer.de/fileadmin/hhi/downloads/
BM/PR_Demonstration_Network_MIMO.pdf. Fraunhofer Heinrich
Hertz Institute.
[9] A. Goldsmith. Wireless Communications. Cambridge University Press, 2005.
[10] S. Gollakota, S. Perli, and D. Katabi. Interference alignment and cancellation.
ACM SIGCOMM, 2009.
[11] Greentouch consortium.
https://www.youtube.com/watch?v=U3euDDr0uvo. GreenTouch
Demonstrates Large-Scale Antenna.
[12] D. Halperin, W. Hu, A. Sheth, and D. Wetherall. Tool release: gathering 802.11n
traces with channel state information. SIGCOMM Comput. Commun. Rev.,
41:53–53.
[13] D. Halperin, W. Hu, A. Sheth, and D. Wetherall. Predictable 802.11 packet
delivery from wireless channel measurements. In ACM SIGCOMM, 2010.
[14] B. Han, A. Schulman, F. Gringoli, N. Spring, B. Bhattacharjee, L. Nava, L. Ji,
S. Lee, and R. Miller. Maranello: practical partial packet recovery for 802.11. In
Proceedings of the 7th USENIX conference on Networked systems design and
implementation, NSDI’10, pages 14–14, Berkeley, CA, USA, 2010. USENIX
Association.
[15] J. Heiskala and J. Terry. OFDM Wireless LANs: A Theoretical & Practical Guide.
Sams Publishing, 2001.
[16] The iPad and its impact on hotel owners and operators. http://www.ibahn.
com/en-us/public/docs/The_Impact_of_iPad.pdf. iBAHN.
[17] D. C. Jenn, J. H. Ryu, T. Yen-Chang, and R. Broadston. Adaptive phase
synchronization in distributed digital arrays. In Adaptive Hardware and Systems
(AHS), 2010 NASA/ESA Conference on, pages 199 –204, june 2010.
Figure 12: Throughput achieved using JMB on off-the-shelf
802.11n cards. JMB signiﬁcantly improves the performance of off-
the-shelf 802.11n cards at high (>18 dB), medium (12-18 dB) and
low (6-12 dB) SNRs.
Figure 13: Fairness Results. For all nodes in our testbed, JMB de-
livers a throughput gain between 1.65-2×, with a median gain of
1.8× across SNRs. This shows that JMB provides similar through-
put gains for every node in the network.
11.5 Compatibility with 802.11
Finally, as described in §6, JMB is compatible with existing
802.11n cards. In this section, we investigate whether JMB can
deliver signiﬁcant throughput gains when used with commodity
802.11n cards. Further, since each AP and each 802.11n card in this
system has 2 antennas, this experiment also veriﬁes that JMB can
provide its expected gains with multi-antenna transmitters and re-
ceivers.
Method. We place 2 JMB nodes at random AP locations in the
testbed, and 2 802.11n receivers at random client locations in the
testbed. For each topology, we compute the total throughput with
802.11n and with JMB. As before, we compute the 802.11n through-
put by giving each transmitter an equal share of the medium. We re-
peat the experiment across multiple topologies and the entire range
of SNRs.
Results. Fig. 12 shows the total throughput with and without JM-
Bat high, medium and low SNRs. Since we have two receivers in this
experiment, the theoretically throughput gain compared to 802.11n
is 2×. The chart shows that JMB delivers an average gain of 1.67-
1.83× across all SNR ranges. Similar to the case with USRP re-
ceivers, the gains in the high SNR regime are larger than gains in the
low SNR regime.
We now investigate JMB’s fairness, i.e. whether JMB can deliver
its throughput gains for every receiver in the network across all lo-
cations and SNRs. Fig. 13 shows the CDF of the throughput gain
achieved by JMB as compared to 802.11n across all the runs. The
results show that JMB delivers throughput gains between 1.65-2×
for all the receivers and hence is fair to the receivers in the network.
050100150200250HighSNRMediumSNRLowSNRThroughput(Mbps)802.11nJMB 0 0.2 0.4 0.6 0.8 1 1.6 1.7 1.8 1.9 2 2.1Fraction of runsThroughput Gain245[18] S. Lim, Y. Kim, A. El Gamal, and S. Chung. Noisy network coding. In IEEE Info.
Theor. Workshop, 2010.
[19] K. C.-J. Lin, S. Gollakota, and D. Katabi. Random access heterogeneous mimo
networks. In Proceedings of the ACM SIGCOMM 2011 conference, SIGCOMM
’11, pages 146–157, New York, NY, USA, 2011. ACM.
[20] K. C.-J. Lin, N. Kushman, and D. Katabi. ZipTx: Harnessing Partial Packets in
802.11 Networks.
[21] LTE: MIMO techniques in 3GPP-LTE.
http://lteportal.com/Files/MarketSpace/Download/130_
LTEMIMOTechniquesFreescaleNov52008.pdf.
[22] Z. Ma, M. Zierdt, J. Pastalan, A. Siegel, T. Sizer, A. J. de Lind van Wijngaarden,
P. R. Kasireddy, and D. M. Samardzija. Radiostar: Providing wireless coverage
over gigabit ethernet. Bell Lab. Tech. J., 14:7–24, May 2009.
[23] I. Maric, N. Liu, and A. Goldsmith. Encoding against an interferer’s codebook. In
Allerton, 2008.
[24] MIMO schemes in 16m (WiMAX 2.0). http://www.wimax360.com/
profiles/blogs/mimo-schemes-in-16m-wimax-20. WiMax360.
[25] A. Miu, H. Balakrishnan, and C. E. Koksal. Improving loss resilience with
multi-radio diversity in wireless networks. In MobiCom ’05: Proceedings of the
11th annual international conference on Mobile computing and networking,
2005.
[26] B. Nazer and M. Gastpar. The case for structured random codes in network
capacity theorems. European Transactions on Telecommunications, 19(4), 2008.
[27] Network MIMO. http:
//www.alcatel-lucent.com/wps/DocumentStreamerServlet?
LMSG_CABINET=Docs_and_Resource_Ctr&LMSG_CONTENT_FILE=
Data_Sheets/Network_MIMO.pdf. Alcatel-Lucent.
[28] A. Ozgur, O. Leveque, and D. Tse. Hierarchical cooperation achieves optimal
capacity scaling in ad hoc networks. IEEE Trans. on Info. Theor., 2007.
[29] H. Rahul, F. Edalat, D. Katabi, and C. Sodini. Frequency-Aware Rate Adaptation
and MAC Protocols. In ACM MOBICOM 2009, Beijing, China, September 2009.
[30] H. Rahul, H. Hassanieh, and D. Katabi. Sourcesync: a distributed wireless
architecture for exploiting sender diversity. SIGCOMM, 2010.
[31] Distributed-input distributed-output wireless technology. http:
//www.rearden.com/DIDO/DIDO_White_Paper_110727.pdf.
Rearden Companies.
[32] Mobile broadband capacity constraints and the need for optimization.
http://rysavy.com/Articles/2010_02_Rysavy_Mobile_
Broadband_Capacity_Constraints.pdf. Rysavy Research.
[33] L. Shen-fa and W. Wei-ling. Fast antenna selection algorithms for distributed
mimo systems. In Journal of Beijing University of Posts and Telecommunication,
volume 30, pages 50–53, Jun. 2007.
[34] V. Shrivastava, N. Ahmed, S. Rayanchu, S. Banerjee, S. Keshav,
K. Papagiannaki, and A. Mishra. Centaur: realizing the full potential of
centralized wlans through a hybrid data path. In Proceedings of the 15th annual
international conference on Mobile computing and networking, MobiCom ’09,
pages 297–308, New York, NY, USA, 2009. ACM.
[35] O. Simeone, O. Somekh, H. Poor, and S. Shamai. Distributed MIMO in multi-cell
wireless systems via ﬁnite-capacity links. In ISCCSP, 2008.
[36] K. Tan, J. Fang, Y. Zhang, S. Chen, L. Shi, J. Zhang, and Y. Zhang. Fine-grained
channel access in wireless lan. In ACM SIGCOMM 2010.
[37] K. Tan, H. Liu, J. Fang, W. Wang, J. Zhang, M. Chen, and G. M. Voelker. SAM:
enabling practical spatial multiple access in wireless LAN. In MobiCom 2009.
[38] I. Thibault, G. Corazza, and L. Deambrogio. Phase synchronization algorithms
for distributed beamforming with time varying channels in wireless sensor
networks. In Wireless Communications and Mobile Computing Conference
(IWCMC), 2011 7th International, pages 77 –82, july 2011.
[39] D. Tse and P. Vishwanath. Fundamentals of Wireless Communications.
Cambridge University Press, 2005.
[40] Turn off your wi-ﬁ network!
http://www.youtube.com/watch?v=fFiJ5rnIPVw. Steve Jobs
iPhone4 Keynote.
[41] S. Venkatesan et al. A WiMAX-based implementation of network MIMO for
indoor wireless. EURASIP, ’09.
[42] Z. Xin-sheng, Y. Xiao-hu, and Z. Ding-qian. An investigation on dynamic rau
selection method for distributed radio mobile communications system. In Journal
of Electronics ïij ˛E Information Technology, volume 28, pages 2334–2338, Dec.
2006.
[43] L. Ying-Dong and Z. Guang-Xi. Transmit-receive antenna selection for
distributed multi-user mimo downlink channels. In Information Science and
Engineering (ICISE), 2009 1st International Conference on, pages 2767 –2770,
dec. 2009.
APPENDIX
A. DECOUPLING MEASUREMENTS TO
DIFFERENT RECEIVERS.
For simplicity, we focus on the example of two APs and two
clients in Fig. 2. Let us consider a system where the channels, h11
and h12, to receiver 1 are measured at time t1 and the channels, h21
and h22, to receiver 2 are measured at time t2. For a subsequent trans-
mission at time t, the channels experienced to receiver 1 experience
a rotation corresponding to the time t − t1, while the channels ex-
perienced to receiver 2 experience a rotation corresponding to time
t − t2. In particular, the channel matrix experienced at time t can be
written as:
(cid:18)h11ej(ωR1−ωT1)(t−t1)
h21ej(ωR2−ωT1)(t−t2)
H(t) =
h12ej(ωR1−ωT2)(t−t1)
h22ej(ωR2−ωT2)(t−t2)
(6)
(cid:19)
Recall that for JMB to perform distributed phase synchronization,
we need to decompose H(t) into the form R(t)HT(t) where H is
time-invariant, and the time-dependent matrices R(t) and T(t) are
diagonal, and the ith diagonal entry of T(t) (similarly ) depends only
on parameters that the ith AP (similarly ith receiver) can estimate
locally. The APs can then all use the time invariant matrix H to cal-
culate their beamforming signal, and perform correction using the
relevant entry of T(t).
We observe that H(t) can indeed be written in this desired form.
Speciﬁcally, we can write H(t) as R(t)HT(t), where
R(t) =
(cid:18)ej(ωR1−ωT1)(t−t1)
(cid:18)h11
0
H =
h21
h22e−j(ωT1−ωT2)(t2−t1)
(cid:18)1
h12
0
T(t) =
0 ej(ωT1−ωT2)(t−t1)
(cid:19)
0
ej(ωR2−ωT1)(t−t2)
(cid:19)
(cid:19)
(7)
(8)
(9)
i
Note that H is now time invariant as desired. The entries only
depend on the oscillator offset between times t1 and t2. Slave AP i
can easily compute this offset by using the reference channel, hlead
from the lead measured at time t1 and t2.
Further, note that the diagonal entries of the matrix T(t) only de-
pend on the frequency offset of the corresponding slave AP from
the lead AP, and hence each slave AP can, as before, observe the
channel of the sync header, compute the oscillator offset using the
channel measured at time t1 as reference, and correct its transmis-
sion appropriately.
Similarly the diagonal entries of the matrix R(t) only depend on
the frequency offset of the corresponding receiver from the lead AP,
and hence each receiver can independently decode its packet as if it
were sent from a single transmitter.
Intuitively, this scheme can be understood as the slave AP rotating
its measured channel to receiver 2 back to the time t1 by multiply-
ing h22 by e−j(ωT1−ωT2)(t2−t1), and then performing all future channel
corrections relative to the time t1. This is why it corrects by the time
dependent quantity e−j(ωT1−ωT2)(t−t1) shown in T(t).
246