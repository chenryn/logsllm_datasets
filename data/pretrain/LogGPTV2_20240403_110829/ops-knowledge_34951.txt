User: Please provide a Python script to monitor the CPU and memory usage of the server and send the results to the specified mailbox.
Assistant: complete Python script is provided here, which can monitor the server CPU and memory usage and send the results to the specified mailbox. You need to install the psutil and smtplib modules first, and set up the email account and password. ```python import psutil import smtplib import time from email.mime.text import MIMEText from email.mime.multipart import MIMEMultipart from email.header import Header def get_cpu_usage(): """ Get CPU usage """ cpu_usage = psutil .cpu_percent(interval=1) return cpu_usage def get_memory_usage(): """ Get memory usage """ mem = psutil.virtual_memory() memory_usage = {'total': mem.total, 'available': mem.available, 'percent': mem.percent} return memory_usage def send_email(email_address, email_password, to_address, title, content): """Send email""" try: smtp_server = 'smtp.' + email_address.split('@')[ 1] smtp_port = 25 smtp = smtplib.SMTP(smtp_server, smtp_port) smtp.login(email_address, email_password) msg = MIMEMultipart() msg['From'] = email_address msg['To'] = to_address msg['Subject'] = Header(title, 'utf-8') msg.attach(MIMEText(content, 'plain', 'utf-8')) smtp.sendmail(email_address, to_address, msg.as_string()) smtp.quit() return True except Exception as e: print('Failed to send email:', e) return False if __name__ == '__main__': # Mailbox configuration email_address = '<mail address for sending email>' email_password = '<password for sending email >' to_address = '<receiving email address>' while True: # Get CPU usage and memory usage cpu_usage = get_cpu_usage() memory_usage = get_memory_usage() # Assemble email content title = 'Server Monitoring' content = 'CPU usage Rate: {}%\nTotal memory: {}MB\nAvailable memory: {}MB\nMemory usage: {}%'.format( cpu_usage, int(memory_usage['total'] / 1024 / 1024) , int(memory_usage['available'] / 1024 / 1024), memory_usage['percent']) # send email send_email(email_address, email_password, to_address, title, content) # send email every 1 hour time.sleep(3600 ) ```