4.71 %
2.95 %
Table 2: Comparison between connected client distribution in
our dataset in November 2009 and results from a swarm crawl
conducted in August 2009.
source (Table 2). We use VP data from November 2009 and a
client distribution collected in August 2009 that is derived from
crawls of 400 swarms [27]. As the table shows, there is a strong
correspondence in both client rank and market share between the
two sets.
Overall, we ﬁnd no strong evidence of signiﬁcant bias in our
dataset using any of these metrics. In the following sections, we use
this dataset to analyze the network impact of BitTorrent, starting
with a description of observed usage patterns and trends.
4. BITTORRENT USAGE TRENDS
In this section, we use our BitTorrent traces to analyze several
key usage trends that affect the system’s network impact.
In
particular, we ﬁnd that despite reports of declining usage [17] the
absolute volume of BitTorrent trafﬁc continues to rise. Further,
we ﬁnd that BitTorrent’s temporal usage patterns are increasingly
aligned with diurnal trafﬁc patterns, which has implications for its
contribution to ISPs’ costs.
4.1 Sampling Methodology
Obtaining representative, longitudinal snapshots of BitTorrent
trafﬁc and user behavior is challenging, given the high degree
of churn in the system. To enable comparisons across multiple
time scales, we aggregate user statistics at one-hour granularity,
then use random sampling of our dataset to obtain a constant
number of users (1000) during each hour for inclusion in our
analysis. We repeat this random sampling 5 times to derive a
statistically signiﬁcant average for each hour.
the
standard deviations of our samples are relatively small, and we
include corresponding error bars in our ﬁgures.
In general,
The following analysis focuses on comparisons using the second
week of every 2 months over the year of study. In some cases, we
use data collected in November 2008 to analyze trends over two
years.
4.2 Key Trends
In the following paragraphs, we examine trends in overall
BitTorrent trafﬁc in terms of number of connected peers and per-
peer download volumes.
We begin by examining the volume of trafﬁc generated by indi-
vidual peers. Figure 2 depicts average per-peer hourly download
volumes over one year, between November 2009 and 2010. As
the ﬁgure shows, BitTorrent’s network impact in terms of hourly
download volumes per-peer have grown consistently over this
period, increasing by 25% on average.
Beyond the download volumes generated by users, we ﬁnd
two important and related trends that refer to (1) the number
of BitTorrent users and (2) the temporal patterns behind their
activities. Variations in the number of connected peers may hint
at changes in the size of the overall BitTorrent population. An
understanding of temporal patterns behind user activities, on the
(a) Vantage points
(b) Connected peers
Figure 1: Distribution of BitTorrent users by continent for our
vantage points (left) and the set of all peers connected to our
vantage points (right) in November 2010. Both distributions
match closely but for small differences in North America and
Asia.
Network type
Large transit
Small transit
Access providers
Vantage points Remote peers
4.07 %
53.7 %
42.3 %
5.18 %
51.6 %
43.2 %
Table 1: Portion of VPs and remote peers located in each type
of network, suggesting that the VP population is representative
of the general BitTorrent population.
Given the default random peer selection strategy in BitTorrent,
we expect that the remaining peers that the VPs connect to are
representative of the system as a whole. We evaluate this by testing
for similarities in geography, network topology, and BitTorrent
client use.
We compare the VPs’ geographic distribution to that of the peers
they connect to, using geolocation information obtained from a
popular IP-to-ASN mapping service [24]. Figure 1 shows, side
by side, the distribution of VPs and their connected peers per
continent. These distributions match closely, having equal portions
in Europe (52%), with small differences of 16/20% in North
America, and 23/19% in Asia.
For reference, we also compare the observed distributions with
those reported in previous studies and ﬁnd strong similarities.
Zhang et al. [31] crawl tracker sites from 2008 to 2009 and report
the number of BitTorrent users for the top-20 countries sorted by
peer population. These data show that 49% of users are in Europe,
28% in North America and 18% in Asia. Note that these statistics
under-represent the fractions of European and Asian peers since
many countries in these regions did not appear in the top-20 list.
This explains why North American peers are a larger portion of the
peers (28%) relative to our distributions (16/20%). The reported
fractions of European and Asian peers match closely those found
in our dataset.
We also compare the distribution of VPs and remote peers
in terms of network topology, by contrasting the number of IP
addresses per network class, following the scheme recently pro-
posed by Dhamdhere and Dovrolis [7]. Table 1 shows that these
distributions align – the portion of peers in each network class
differs by at most 2%.
Last, we determine whether there is any signiﬁcant bias based on
the types of BitTorrent clients that our VPs connect to. This could
result, for example, from Vuze peers preferentially connecting to
other Vuze peers. We evaluate this by comparing the distribution of
BitTorrent clients connected to our VPs with that of an independent
EU52%NA16%AS23%SA4%OC3%AF2%EU52%NA20%AS19%SA4%OC3%AF2%112A
B
C
D (A/C)
E (B*C)
F (D*E)
Metric
Peer download rate
Unique peers per hour
Concurrent ﬂows
Per-ﬂow download rate
Total ﬂows
Total download rate
2009
110.9
276.6
32.7
3.39
9040
30700
2010
138.7
248.0
28.9
4.80
7170
34400
∆
+25.0%
-10.3%
-11.6%
+41.5%
-20.7%
+12.1%
Table 3:
Summary of calculations to determine overall
BitTorrent trafﬁc, based on product of number of ﬂows and
per-ﬂow download rate. All download rates are in MB/hr. We
ﬁnd that total BitTorrent trafﬁc has increased 12.1% from 2009
to 2010.
shorter session times. While it is difﬁcult to quantify the former,
we can use our dataset to directly evaluate the latter. Figure 5
shows a typical distribution of session times, and also plots median
session time for vantage points in each continent from November
2008 to 2010. We ﬁnd that, from 2009 to 2010, median session
times have decreased for each of the three main continents. Since
2008, session times in Europe, North America and Asia decreased
by 13%, 23%, and 20%, respectively.
Finally, we note that changes in the average number of connected
peers are dominated by a 30% drop in the number of European
peers. This is aligned with previous reports that European users
are increasingly using direct download sites in lieu of P2P [17]. In
contrast, usage in Africa and Asia increased by 75% and 45% from
2008 levels, indicating a growing presence in developing regions.
These results reveal conﬂicting trends that make it difﬁcult to
estimate changes in aggregate BitTorrent trafﬁc. With this in mind,
we compute a measure of the total BitTorrent trafﬁc as the product
between the number of BitTorrent ﬂows in the network and the
average per-ﬂow hourly trafﬁc volume. For this, we determine the
average number of concurrent connections (i.e. ﬂows) maintained
by each peer and use it to compute the average per-ﬂow download
rate and an estimate of the total ﬂows in the system. Table 3
provides a summary of these metrics and calculations. We use the
Peer download rate (A) and the number of Concurrent ﬂows (C) to
estimate the Per-ﬂow download rate (D) and compute an estimate
of the number of Total ﬂows (E) as the product of the number of
Unique peers per hour (B) and the number of Concurrent ﬂows (C).
The Total download rate (F) is then computed as the product of the
Per-ﬂow download rate (D) and the number of Total ﬂows (E). The
reduction in the number of ﬂows per peer results in an increase in
the per-ﬂow download rate of 41.5%. Thus, while the total number
of ﬂows in the system has shrunk by 20.7%, the BitTorrent trafﬁc
has had a net increase of 12.1% between 2009 and 2010.
To summarize, we ﬁnd that BitTorrent trafﬁc volume is growing,
and its trafﬁc is increasingly generated from shorter sessions that
tend to occur during peak hours. As we show in Sec. 6, these
temporal trends have a signiﬁcant impact on transit charges. The
next sections build on the identiﬁed trends to determine which parts
of the Internet are most affected by the corresponding trafﬁc and the
impact of this trafﬁc in terms of costs and revenue.
5. WHERE BITTORRENT FLOWS
We now discuss where BitTorrent trafﬁc ﬂows through the
network. We begin with a discussion of how to map trafﬁc ﬂows to
the network paths they traverse. We use these mappings to study the
geographic and topological characteristics of the trafﬁc exchanged
between users from March through the end of May 2010.
Figure 2: Average per-user hourly download volume between
November 2009 and 2010, showing that download volumes have
increased by 25%.
Figure 4: Average daily peak-to-trough ratio of hourly peers
seen by continent, from 2008 to 2010. Peers in Europe, Oceania
and South America appear to have increasingly strong diurnal
patterns. The diurnal patterns of North American peers
remain consistently strong.
other hand, is necessary to understand the potential contributions
of BitTorrent to congestion and near-peak transit charging rates.
We begin by plotting weekly timelines of the number of peers
connected to each vantage point in 2008 and 2010 (Fig. 3). We
group peers by location to highlight variations in usage over time
and across regions. Focusing ﬁrst on Europe, the largest contributor
to connected peers, we see increasingly deﬁned diurnal patterns
with peak usage in the late evening, and relatively larger peaks and
troughs in 2010 compared to 2008. This is surprising given the
logical, common belief that BitTorrent is used out-of-phase with
other applications because of the high load it imposes on users
connections [17].
To better illustrate changes in diurnal patterns for the number
of connected peers over time, we plot the average peak-to-trough
ratio of the hourly connected peers by continent (Fig. 4). Larger
ratio values indicate that greater portions of peers in each region
use BitTorrent at the same time. The ﬁgure shows that the ratio of
connected peers in North America has remained consistently high
over the last two years, with 80% more peers online during peak
usage. Meanwhile, diurnal patterns in Europe have grown more
pronounced during the same period. While the exact causes for
this behavior are beyond the scope of this paper, we speculate that
variations in copyright law and enforcement (which can affect how
long users leave BitTorrent running) across time and regions may
contribute to this effect.
Figure 3 also indicates that the average number of connections to
each vantage point per hour has decreased during the observation
period by 10% (compare the “All” curves in Figs. 3a and 3b). This
could be explained in part by a drop in the system popularity and/or
Nov’09Jan’10Mar’10May’10Jul’10Sep’10Nov’10020406080100120140160HourlyPeerDownloadVolume(MB)EUNAASSAOCAFConnectedPeerContinent1.01.21.41.61.82.0Peak:TroughRatio,HourlyPeersNov’08Nov’09Nov’10113(a) November 2008
(b) November 2010
Figure 3: Distribution of connected peers per hour, grouped by continent, in 2008 and 2010 (semi-log scale). Vertical grid lines
correspond with midnight, UTC. Note the increasingly deﬁned diurnal patterns.
address this by supplementing the public view with traceroutes
collected between our vantage points and their connected peers.