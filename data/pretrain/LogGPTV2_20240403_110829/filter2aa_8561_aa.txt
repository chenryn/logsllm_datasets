.\"Generated by db2man.xsl. Don't modify this, modify the source.
.de Sh \" Subsection
.br
.if t .Sp
.ne 5
.PP
\fB\\$1\fR
.PP
..
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Ip \" List item
.br
.ie \\n(.$>=3 .ne \\$3
.el .ne 3
.IP "\\$1" \\$2
..
.TH "SMBCLIENT" 1 "" "" ""
.SH NAME
smbclient \- 类似FTP操作方式的访问SMB/CIFS服务器资源的客户端
.SH "总览 SYNOPSIS"
\fBsmbclient\fR {servicename} [password] [-b ] [-d
debuglevel] [-D Directory] [-U username] [-W workgroup] [-M ] [-m maxprotocol] [-A authfile] [-N] [-l logfile] [-L ] [-I destinationIP] [-E] [-c ] [-i scope] [-O
] [-p port] [-R ] [-s ] [-TIXFqgbNan] [-k]
.SH "描述 DESCRIPTION"
.PP
此程序是\fBSamba\fR(7)套件的一部分。
.PP
\fBsmbclient\fR 是个可以和SMB/CIFS服务器\(lq交谈\(rq的客户端程序。它提供
了类似FTP程序(参见\fBftp\fR (1))的用户界面。它可以完成的操作包括象从服务
器下载文件到本地，上传本地文件到服务器及在服务器上查找目录信息等。
.SH "选项 OPTIONS"
.TP
servicename
servicename就是你要使用的服务名称。服务名使用\fI//server/service\fR这样的形式，其中\fIserver \fR 是提供服务的SMB/CIFS服务器的NetBIOS名字，而\fIservice\fR 是可获得服务资源的名称。所以如果要联接服务器"smbserver"上的"printer"服务的话，应该使用这样的服务名称：\fI//smbserver/printer \fR
注意服务名不使用服务器的IP(或DNS)主机名，而应该用NetBIOS名，而它可能与服务器的IP主机名相同当然也可能不相同。
服务器名是根据\fBsmbclient\fR使用的\fI-R\fR 参数或者\fBsmb.conf\fR(5)配置文件中的名称解析顺序参数来解析的。名称解析参数使管理员可以控制名称解析的顺序和方法。
.TP
password
用password指定访问服务时所需的口令。如果使用了这个选项，就假定使用了\fI-N\fR(suppress password prompt)参数，在执行过程中不出现口令提示。
口令没有默认值。如果在命令行上没有提供口令(或者使用这个参数，或者在\fI-U-fR参数中指定)，并且也没有使用\fI-N\fR选项，那么即使需要的服务项不要求口令，程序也会提供要用户输入一个口令。(如果服务不需要口令，只要简单地打个回车就向服务器回应了一个空口令)
 注意：有些服务器(包括OS/2和Windows for Workgroups)会强调使用大写口令，它们会拒绝小写或者大小写混合的口令。
在脚本中使用口令要小心。(可能有安全问题嘛！)
.TP
-R 
通过指定这个选项让Samba套件中的程序决定使用怎样的名字解析服务及其次序来解决主机名和IP的对应。这个选项以一个以空格分隔的不同的名称解析方法为选项值。
可选值是：\(lqlmhosts\(rq，\(lqhost\(rq，\(lqwins\(rq和\(lqbcast\(rq。这些选项使名字解析按以下的方法来进行：
\fBlmhosts\fR: 向Samba的lmhosts文件查询IP地址。If the line in lmhosts has no name type attached to the NetBIOS name (see the \fBlmhosts\fR(5) for details) then any name type matches for lookup.
\fBhost\fR: 用标准的名字到IP地址解析方法：系统\fI/etc/hosts\fR文件，NIS或DNS查询。如何使用这个名字解析由系统决定。举例来说，在IRIX或者Solaris系统中，\fI/etc/nsswitch.conf\fR文件会处理这些问题。 Note that this method is only used if the NetBIOS name type being queried is the 0x20 (server) name type, otherwise it is ignored.
\fBwins\fR: 用配置文件中\fIwins server\fR选项列出的地址来查询名字。如果没有指定WINS服务器的话	会略过这种方法。
\fBbcast\fR: 向配置文件中\fIinterfaces\fR参数列出的每个已知本地接口进行广播来进行查询。这是最不可靠的名字解析方法，因为它要求目标主机在本地子网内。
如果不使用这个参数的话，将按 \fBsmb.conf\fR(5)配置文件中(name resolve order)参数指定的次序来进行名字解析。
默认的解析次序是lmhosts，host，wins，bcast，在不使用这个参数或者没有在\fBsmb.conf\fR(5)配置文件中设定\fIname resolve order \fR参数的情况下将使用这样的次序进行解析。
.TP
-M NetBIOS name
使用这个选项可以让你以\(lqWinPopup\(rq 协议向其它计算机发送信息。一旦联接成功你就可以发送信息了，结束时可以按^D(Ctl-D).
如果接受方计算机也正在运行WinPopup的话，用户会收到发送的信息并且系统可能会鸣叫一声。如果对方并没有运行WinPopup的话信息就被丢弃，而不会发出出错信息。
如果发送的信息超过1600字节的话会自动被截断，因为这是此协议规定的极限。
这里有个很有用的小技巧，通过\fBsmbclient\fR，用cat处理信息，例如：
\fB cat mymessage.txt | smbclient -M FRED \fR 将会把 \fImymessage.txt\fR 中的信息发送给主机 FRED.
你也许会发现\fI-U\fR和\fI-I\fR选项很有用，因为它们允许你控制信息的源地址和目的地址部分。
参见\fBsmb.conf\fR(5)配置文件中的\fImessage command\fR参数获得如何在Samba中处理新进的WinPopup消息的详细描述。
\fB注意\fR：如果你总是要用你的WfWg PC的WinPopup来接收消息的话可以在你的Windows机器中把它拷到\(lq启动\(rq中。
.TP
-p port
联接服务器所用的TCP端口号。标准(众所周知)的SMB/CIFS服务器TCP端口是139，当然也是默认值。
.TP
-h|--help
打印出命令行帮助信息。
.TP
-I IP-address
指定要联接的服务器IP地址。当然格式应该是\(lqa.b.c.d\(rq。
通常client会使用上面介绍过的\fIname resolve order\fR参数中描述的NetBIOS名字解析机制通过查询尝试查找一个已命名的SMB/CIFS服务器。使用这个参数会强制客户端程序采用指定的IP地址而忽略要联接的服务资源的NetBIOS名部分。
这个参数并没有默认值。如果不指定的话程序会用上面说的方法来自动检测。
.TP
-E
当使用了这个参数后，程序会把信息写到标准错误流(stderr)而不是标准输入流中。
默认情况下，程序会把信息写入标准输入中 - 典型的例子是用户的tty。
.TP
-L
此选项允许你查看服务器上可以获得的服务资源。使用\fBsmbclient -L host\fR 命令会显示一份列表。如果你的NetBIOS名与TCP/IP域名不匹配或者要在其它网络上查找主机时，\fI-I \fR  选项会非常有用。
.TP
-t terminal code
用这个选项告诉\fBsmbclient\fR怎样解释从远程服务器上传来的文件名。通常，UNIX系统对亚洲多字节的语言的实现与SMB/CIFS服务器使用的字符集不同(例如用\fBEUC\fR代替\fB SJIS\fR)。设置这个参数可以让\fBsmbclient\fR 在UNIX文件名与SMB文件名之间进行正确的转换。不过，这个选项还没有经过严格的测试，所以可能会有些问题。
终端编码包含CWsjis, CWeuc, CWjis7, CWjis8, CWjunet, CWhex, CWcap. 当然这个列表并不完整，要获取完整列表请查看samba 源码。
.TP
-b buffersize
在对服务器进行上/下传文件时可以用这个选项来改变传输缓冲大小。默认值是65520个字节。当从一个Win9x的服务器上进行文件传输时，把这个值设为稍小一点的值(例如1200字节)可以得到一些速度提升。
.TP
-V
Prints the program version number\&.
.TP
-s 
指定的这个文件包含服务器需要的配置详细信息。文件中的信息包含针对服务器的信息，比如使用什么printcap文件，还有所有服务器提供的服务的描述。参见\fIsmb.conf\fR来获得更多信息。默认的配置文件名是在编译时指定的。
.TP
-d|--debug=debuglevel
\fIdebuglevel\fR 调试等级是个从0到10的整数。参数未指定时默认值为0。
如果这个值越高，越多关于服务器的详细活动信息将被记录到文件中。在0调试级时，只记录紧急错误和严重警告。对于平日的运行服务，1调试级是个合理的等级，它只产生小量的关于执行操作的信息。
1以上的调试级将产生相当多的记录数据，并且只在解决问题时才有用。3以上的调试级只被设计为让开发者使用并会产生极大数量的记录数据，而且其中很多部分非常难以理解。
注意在此使用这个参数将越过在\fIsmb.conf\fR (5)文件中的\fIlog level\fR参数。
.TP
-l|--logfile=logbasename
指定一个记录和调试的文件名。文件会被添加\fB.client\fR扩展名。记录文件无法被客户端删除。
.TP
-N
如果指定了这个选项，就会省略通常的口令提示。当访问无需口令的服务资源时它很有用。
除非在命令行上输入了口令或者使用了上述这个选项，否则用户将被提示要求输入一个口令。
.TP
-k
Try to authenticate with kerberos\&. Only useful in an Active Directory environment\&.
.TP
-A|--authfile=filename
This option allows you to specify a file from which to read the username and password used in the connection\&. The format of the file is
.nf
username = 
password = 