any particular link using the whois servers from RADB [27] and
RIPE [28] routing registries. In addition, we use the results of [33]
to categorize these ASes into tiers.
Our second classiﬁcation is based on the latency of the bottle-
neck links. We classify bottlenecks according to three different
levels of latency – low latency ( 15ms). Within each level, we identify bottle-
necks that are within ISPs and those that are between carrier ISPs.
For paths to the NAPs, we classify the path into three categories
– those that do not have a bottleneck (as reported by BFind), those
that have a bottleneck at the NAP, and those that have a bottleneck
elsewhere. Again, we are only interested in non-access bottlenecks.
For each category in the classiﬁcation scheme described above,
we present a cumulative distribution function of the available ca-
pacity of the bottlenecks of the particular category.
2.5 A Subjective Critique
We describe some possible shortcomings of our approach here.
To approximate the measurement of “typical” paths, we choose
what we believe to be a representative set of network paths. While
the set of paths is not exhaustive, we believe that they are diverse
in their location and network connectivity. However, as the sources
for our measurements are dominated by PlanetLab’s academic hosts,
there may be some hidden biases in their connectivity. For exam-
ple, they may all have Internet2 connections which are uncommon
elsewhere. This particular bias does not affect our measurements
since our destinations are not academic sites (and hence the paths
do not pass over Internet2). However, our test nodes are relatively
USA-centric (only 3 international sources and 7 destinations) and
may not measure international network connectivity well.
Routing could also have a signiﬁcant impact on our measure-
ments.
If routes change frequently, it becomes difﬁcult for the
BFind tool to saturate a path and detect a bottleneck. Similarly,
if an AS uses multipath routing, BFind’s UDP probe trafﬁc and
its traceroutes may take different paths through the network. As a
result, BFind may not detect any queuing delays nor, hence, any
bottleneck despite saturating the network with trafﬁc. If either of
these situations occurred, traceroutes along the tested path would
likely reveal multiple possible routes. However, despite our con-
tinuous sampling of the path with traceroute during a BFind test,
we did not observe either of these routing problems occurring fre-
quently. This is consistent with recent results showing that most
Internet paths tend to be stable, even on an hours timescale [37].
The processing time taken by routers to generate traceroute ICMP
responses can impact our measurement of queuing delay and, there-
fore, bottlenecks in the network. Many researchers have noted that
ICMP error processing, typically done in the router “slow” pro-
cessing path, takes much longer than packet forwarding.
In ad-
dition, some routers pace their ICMP processing in order to avoid
being overwhelmed. Either of these could cause the delays reported
by traceroute to be artiﬁcially inﬂated. However, recent work [9]
has shown that slow path/fast path differences should not affect
trafﬁc measurement tools in practice since the typically observed
ICMP processing delays are on the order of 1-2 ms, well within the
timescales we need for accurate bottleneck detection.
Address allocation may also skew our results. We rely on us-
ing the address reported by routers in their response to traceroute
probes to determine their ownership. However, in some peering ar-
rangements, a router owned by an ISP is allocated an address from
the peer ISP’s address space to make conﬁguration convenient. In
such situations, our link classiﬁcation may erroneously identify the
incorrect link (by one hop) as a the peering link between the ISPs.
However, we believe that the common use of point-to-point links in
private peering situations and separate address allocations used in
public exchanges (these both eliminate the above problem) reduce
the occurrence of this problem signiﬁcantly.
Finally, we note that our results represent an empirical snapshot
of non-access Internet bottlenecks. That is, we focus on collect-
ing observations from a large number of paths, rather than taking
repeated measurements of a few paths over an extended period.
While our approach provides a wider view of the characteristics
and locations of bottlenecks, we cannot judge, for example, how
stable or persistent the locations are. A longer-term characteriza-
tion of bottlenecks is, hence, a natural extension to our work.
3. RESULTS
Over a period of 5 weekdays, we ran our BFind tool between our
chosen source and destination sites. The experiments were con-
ducted between 9am and 5pm EST on weekdays. These tests iden-
tiﬁed a large number (889) of non-access bottleneck links along
many (2028) paths. As described in Section 2, our post-processing
tools categorize these network links and bottlenecks in a variety of
ways. In this section, we describe the properties of these paths and
bottleneck in these different categories.
3.1 Path Properties
As described in Section 2, our results are based on observations
made on paths between the PlanetLab sites and ISPs at different
tiers in the Internet hierarchy. Before describing the results on bot-
tleneck links, it is useful to consider some important overall char-
Tier 4 links
Tier 3 links
Tier 2 links
Tier 1 links
s
k
n
i
l
k
c
e
n
e
l
t
t
o
b
f
o
r
e
b
m
u
n
d
e
z
i
l
a
m
r
o
N
0.3
0.25
0.2
0.15
0.1
0.05
0
paths to Tier-1
paths to Tier-2
paths to Tier-3
paths to Tier-4
(a) intra-ISP bottlenecks
s
k
n
i
l
f
o
r
e
b
m
u
n
d
e
z
i
l
a
m
r
o
N
8
7
6
5
4
3
2
1
0
paths to Tier-1
paths to Tier-2
paths to Tier-3
paths to Tier-4
(b) All intra-ISP links
s
e
p
y
t
k
n
i
l
f
o
n
o
i
t
c
a
r
F
1
0.9
0.8
0.7
0.6
0.5
0.4
0.3
0.2
0.1
0
paths to Tier-1
paths to Tier-4
(c) Relative proportions: bottleneck links vs. all links
paths to Tier-2
paths to Tier-3
Figure 3: Relative prevalence of intra-ISP bottlenecks: Graph (a) shows the average number of bottlenecks of each kind appearing
inside carrier ISPs, classiﬁed by path type. The graph in (b) shows the total number of links (bottleneck or not) of each kind
appearing in all the paths we considered. In (a) and (b), the left bar shows the overall average number of links, while the right shows
the average number of unique links. Graph (c) shows the relative fraction of intra-ISP bottlenecks links of various types (left bar)
and the average path composition of all links (right bar).
Tier 4-Tier 4
Tier 3-Tier 4
Tier 3-Tier 3
Tier 2-Tier 4
Tier 2-Tier 3
Tier 2-Tier 2
Tier 1-Tier 4
Tier 1-Tier 3
Tier 1-Tier 2
Tier 1-Tier 1
0.35
0.3
0.25
0.2
0.15
0.1
0.05
s
k
n
i
l
k
c
e
n
e
l
t
t
o
b
f
o
r
e
b
m
u
n
d
e
z
i
l
a
m
r
o
N
1.6
1.4
1.2
1
0.8
0.6
0.4
0.2
s
k
n
i
l
f
o
r
e
b
m
u
n
d
e
z
i
l
a
m
r
o
N
s
e
p
y
t
k
n
i
l
f
o
n
o
i
t
c
a
r
F
1
0.9
0.8
0.7
0.6
0.5
0.4
0.3
0.2
0.1
0
paths to Tier-2
paths to Tier-3
paths to Tier-4
paths to Tier-1
(a) Bottlenecks at peering links
paths to Tier-4
(c) Relative proportions: bottlenecks vs. all links
Figure 4: Relative prevalence of peering bottlenecks: Graph (a) shows the average number of bottlenecks of each kind appearing
between carrier ISPs, classiﬁed by path type. The graph in (b) shows the total number of links (bottleneck or not) of each kind
appearing in all the paths we considered. In (a) and (b), the left bar shows the overall average number of links, while the right shows
the average number of unique links. Graph (c) shows relative fraction of peering bottlenecks of various types (left bar) and the
average path composition for all links (right bar).
(b) All peering links
paths to Tier-1
paths to Tier-2
paths to Tier-3
paths to Tier-1
paths to Tier-2
0
paths to Tier-3
paths to Tier-4
0
acteristics of these paths.
The graphs in Figures 3(b) and 4(b) summarize overall features
of paths from PlanetLab sites, classiﬁed by paths to ISPs of a par-
ticular tier. On the y-axis, we plot the normalized number of links,
i.e., the total number of links encountered of each type divided by
the total number of paths in each class. Each path class has a pair of
bars. The left bars in the graphs show the overall average properties
of the paths. The right bars in the graphs show the average number
of unique links that each path class adds to our measurements. This
number is signiﬁcantly less, by a factor of 2 or 3, than the actual
link counts. This is because links near the sources and destinations
are probed by many paths (and are counted repeatedly). Such links
can bias our measurements since they may appear as bottlenecks for
many paths. Therefore, we also present information about unique
links instead of describing only average path properties.
Note that Figure 3 shows intra-ISP links while Figure 4 shows
peering links. Characteristics of the entire paths are evident by ex-
amining the two together. For example, Figure 3(b) shows that the
average path between a PlanetLab site and one of the tier-2 desti-
nations traversed about 4.5 links inside tier-1 ISPs, 2.0 tier-2 ISP
links, and 0.5 tier-3 links. Figure 4(b), which illustrates the loca-
tion of the peering links, shows that these same paths also traversed
about 0.25 tier-1 to tier-1 peering links, 0.75 tier-1 to tier-2 links,
0.2 tier-1 to tier-3 links, 0.2 tier-2 to tier-2 links, and a small num-
ber of other peering links. The total average path length of paths to
tier-2 ISPs, then, is the sum of these two bars, i.e. 7 + 1.4 = 8.4
hops. Similar bars for tier-1, tier-3 and tier-4 destinations show
the breakdown for those paths. One clear trend is that the total
path length for lower tier destinations is longer. The tier-1 aver-
age length is 7.8 hops, tier-2 is 8.3, tier-3 is 8.3 and tier-4 is 8.8.
Another important feature is the number of different link types that
make up typical paths in each class. As expected from the deﬁni-
tion of the tiers, we see a much greater diversity (i.e., hops from
different tiers) in the paths to lower tier destinations. For example,
paths to tier-4 destinations contain a signiﬁcant proportion of all
types of peering and intra-ISP links.
3.2 Locations of Bottlenecks
Figures 3(a) and 4(a) describe the different types of bottleneck
links found on paths to different tier destinations. Recall that BFind
identiﬁes either one, or zero, bottleneck links on each path. The left