# 版权声明
版权所有 © 1994, 1995 丹尼尔·奎因兰 (PI:EMAIL)  
网络部分由艾伦·考克斯 (PI:EMAIL) 添加  
SCSI 部分由迈克尔·纽弗 (PI:EMAIL) 添加  
sysctl 部分由安德里斯·布劳沃 (PI:EMAIL) 添加  
中文版版权归属：映射，Laser www.linuxforum.net 2000

本文件为自由文档；您可以在遵循 GNU 通用公共许可证（GPL）的条件下，重新发布或修改它。该许可证由自由软件基金会发布；您可以使用版本 2 或者任何后续版本。

GNU 通用公共许可证中提到的“目标代码”和“可执行文件”应被解释为任何文档格式化或排版系统的输出，包括中间和打印输出。

本手册以希望对用户有用为目的而发布，但不提供任何形式的担保，甚至没有隐含的商品性或特定目的适用性的保证。更多详情，请参阅 GNU 通用公共许可证。

如果您没有收到随此手册一起提供的 GNU 通用公共许可证副本，请写信至美国马萨诸塞州剑桥市 Mass Ave 675 号，邮编 02139 的自由软件基金会索取。

更新记录：
- 1995 年 5 月 17 日：PI:EMAIL 更新了 BUGS 部分。
- PI:EMAIL 和 Marty Leisner (PI:EMAIL) 进行了一些小修改。
- 1996 年 4 月 13 日：PI:EMAIL 增加了 sys，并进行了各种修复。
- 1996 年 7 月 22 日：PI:EMAIL 进行了一次小修正。

# proc - Linux Programmer's Manual

## 名称
proc — 进程信息伪文件系统

## 描述
/proc 是一个伪文件系统，用于作为内核数据结构的接口，而不仅仅是 /dev/kmem 的简单表示。大多数 /proc 中的文件都是只读的，但通过向某些文件写入内容也可以改变内核变量。

### 目录概览
下面是对整个 /proc 目录的大致介绍。

#### [number]
在 /proc 目录下，每个正在运行的进程都有以其进程 ID 命名的子目录，包含以下子目录和伪文件：

- **cmdline**
    - 文件内容：完整命令行。
    - 如果进程已交换出内存或僵死，则该文件为空。
    - 文件以空字符而非换行符结尾。

- **cwd**
    - 类型：符号链接。
    - 指向：进程当前工作目录。
    - 示例：`cd /proc/20/cwd; /bin/pwd` 显示 PID 为 20 的进程的工作目录。
    - 注意：如果 `pwd` 是 shell 内置命令，可能无法正常工作。

- **environ**
    - 文件内容：环境变量列表，各变量间以空字符分隔。
    - 示例：`(cat /proc/1/environ; echo) | tr "\\000" "\\n"` 输出 PID 为 1 的进程环境变量。

- **exe**
    - 类型：符号链接。
    - 指向：被执行的二进制代码路径。
    - 在 Linux 2.0 及更早版本中，返回 `[设备号]:节点号` 格式的字符串。
    - 在 Linux 2.2 中，给出实际路径名。
    - 该链接可正常使用，如 `readlink(2)` 可解析其路径。

- **fd**
    - 子目录：包含进程打开的所有文件描述符的符号链接。
    - 文件描述符：0 表示标准输入，1 表示标准输出，2 表示标准错误等。
    - 示例：`foobar -i /proc/self/fd/0 -o /proc/self/fd/1 ...` 创建过滤器。

- **maps**
    - 文件内容：当前内存映射区及其访问权限。
    - 格式：`address perms offset dev inode [pathname]`
    - 权限集：`r` (读), `w` (写), `x` (执行), `s` (共享), `p` (私有, 复制时写)
    - 示例：
        ```
        address           perms offset   dev   inode
        00000000-0002f000 r-x-- 00000400 03:03 1401
        ```

- **mem**
    - 文件内容：进程的内存空间。
    - 当前状态：不能进行 mmap 操作，未来可能会支持。

- **mmap**
    - 符号链接：指向 `mmap(2)` 映射目录。
    - 已废弃：建议使用 `maps` 文件替代。

- **root**
    - 类型：符号链接。
    - 指向：进程的根目录，由 `chroot(2)` 设置。

- **stat**
    - 文件内容：进程状态信息，供 `ps(1)` 使用。
    - 字段说明：
        - `pid %d`: 进程标识
        - `comm %s`: 可执行文件名
        - `state %c`: 进程状态 (`R`, `S`, `D`, `Z`, `T`)
        - `ppid %d`: 父进程 PID
        - `pgrp %d`: 进程组 ID
        - `session %d`: 会话 ID
        - `tty %d`: 终端 ID
        - `tpgid %d`: 控制终端的前台进程组 ID
        - `flags %u`: 进程标志
        - `minflt %u`: 小页面错误数
        - ...

以上是 /proc 目录的主要内容概述。更多详细信息请参考相关文档。