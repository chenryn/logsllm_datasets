title:AS-level topology collection through looking glass servers
author:Akmal Khan and
Taekyoung Kwon and
Hyunchul Kim and
Yanghee Choi
AS-level Topology Collection through Looking Glass
Servers
Akmal Khan, Ted “Taekyoung” Kwon, *Hyun-chul Kim, Yanghee Choi
Seoul National University,*Sangmyung University
akmalshabaz,PI:EMAIL, tkkwon,PI:EMAIL
ABSTRACT
While accurate and complete modeling of the Internet topol-
ogy at the Autonomous System (AS) level is critical for
future protocol design, performance evaluation, simulation
and analysis, still it remains a challenge to construct its ac-
curate representation. In this paper, we collect BGP route
announcements of ASes from Looking glass (LG) servers.
By querying LG servers, we build an AS topology estimate
of around 116 K AS links, from which we discover 11 K new
AS links and 686 new ASes. We conclude that collecting
BGP traces from LG servers can help enhance the current
view of the AS topology from the BGP collector projects
(e.g., RouteViews).
Categories and Subject Descriptors
C.2.2 [Network Protocols: Routing Protocols]:
Keywords
Inter-domain Routing, Border Gateway Protocol (BGP), Look-
ing Glass servers
1.
INTRODUCTION
The Internet consists of Autonomous Systems (ASes) that
exchange inter-domain routing information using Border Gate-
way Protocol (BGP) [1]. The entire Internet can be viewed
as an AS-level topology graph where each AS is a node, and
a BGP connection between two ASes is a link. The im-
portance of the AS topology has been highlighted through
many studies, such as analyzing Internet topological proper-
ties [3,5,9], inferring AS relationships [12], building network
topology generators for simulations [13], and evaluating the
eﬀectiveness of new protocols and improvements [11]. Con-
sidering the importance of the AS topology in many areas
of networking research, signiﬁcant eﬀorts [2, 7–10, 14, 19, 20]
have been made to discover and construct it. However, it
still remains as a challenge to develop a complete and accu-
rate view of the AS-level topology [4, 7–9, 22].
Permission to make digital or hard copies of all or part of this work for personal or
classroom use is granted without fee provided that copies are not made or distributed
for proﬁt or commercial advantage and that copies bear this notice and the full cita-
tion on the ﬁrst page. Copyrights for components of this work owned by others than
ACM must be honored. Abstracting with credit is permitted. To copy otherwise, or re-
publish, to post on servers or to redistribute to lists, requires prior speciﬁc permission
and/or a fee. Request permissions from permissions@acm.org.
IMC’13, October 23–25, 2013, Barcelona, Spain.
Copyright 2013 ACM 978-1-4503-1953-9/13/10 ...$15.00.
http://dx.doi.org/10.1145/2504730.2504758.
There have been three main approaches to construct the
AS topology, each of which has its own limitations: (i) pas-
sive measurements by collecting BGP routing tables and up-
dates [18] suﬀer from routing policy ﬁlters and best path se-
lection decisions made by the neighboring ASes of BGP col-
lectors [22], (ii) active measurements using traceroute [14,19]
are error-prone and generate potentially false AS links due
to non-responsive hosts or errors in converting IP addresses
to AS numbers (IP-to-AS mapping) [15, 16], and (iii) Inter-
net routing registry (IRR) [21] is known to have incomplete
and/or outdated information and possibly biased towards
RIPE region [6, 17].
In this paper, we focus on the construction of the AS
topology by using Looking glass (LG) servers, which are
web-based portals run by Internet service providers (ISPs)
or network operation centers (NOCs), that help understand
network status like connectivity, path, and routing informa-
tion. We collect around 116 K AS links from 245 LG servers
across 110 countries. Then, we analyze the LG server-based
AS topology against BGP (IRL [18]), traceroute (Ark [19]
and iPlane [20]), and IRR based [21] AS topologies. The
main ﬁndings of our study are as follows.
We observe 620 neighboring ASes of the LG servers that
are not sharing their BGP traces with any of RouteViews [31],
RIPE-RIS [32], and PCH [33]. We ﬁnd 11 K new AS links
in the AS topology from the LG servers. By comparing the
AS topology from the LG servers against the BGP-based AS
topology (i.e., IRL [18]), we observe the increase in the con-
nectivity of some popular content providers, such as 22%
more for Microsoft. We discover 686 new ASes in the AS
topology from the LG servers that are hidden from other
AS topologies. Moreover, 98% of the newly discovered ASes
have only one provider AS. Overall, we conclude that collect-
ing BGP traces from the LG servers help increase the narrow
view of BGP observed from current BGP collectors [22].
2. LOOKING GLASS SERVERS
Looking glass (LG) servers are web based portals operated
by network operators to provide a look into the BGP routing
tables of the ASes in which the server resides. For example,
from a response of a query to an LG server, a network prob-
lem can be traced back to its reasons like misconﬁgured BGP
route advertisement, wrong route aggregation, or misconﬁg-
ured AS path prepending. By an LG server, we mean a web
site that allows running commands (e.g., traceroute) from
one or more BGP routers that are under the control of the
Table 1: A sample result of the show ip bgp summary com-
mand.
Table 2: A sample result of the BGP neighbor ip adver-
tised routes command.
Router: cr1-eqx3-pa3 Local AS Number: 29075
Router: cr1-eqx3-pa3 Local AS Number: 29075
Command: show ip bgp summary
Command: BGP neighbor 195.42.144.104 advertised routes
Neighbor
AS# State
Time Received Sent
Preﬁx
Next Hop
AS PATH
195.42.144.104
6939 ESTAB
61d
36,464
153
149.154.80.0/21
195.42.144.71 29075 50618 57141
91.227.48.0/24
195.42.144.71 29075 50618 25091 56728
LG server1. For instance, the LG server of Hurricane Elec-
tric2 provides facilities to run LG commands on its BGP
routers that are distributed across 92 locations worldwide.
The importance of LG servers in constructing the Inter-
net AS-level topology has been highlighted in many stud-
ies [2, 7, 9]. For instance, Augustin et al. [2] uses the show
ip bgp summary3 and traceroute commands to map IXPs,
their members, and their peering matrices. While prior stud-
ies have shown the usefulness of LG servers, it is not clear
what other information (apart from those available with
the show ip bgp summary command) is available with LG
servers for the purpose of collecting the AS topology. Thus,
we conducted a comprehensive investigation to ﬁnd out how
many LG servers are operational and what functionalities
are provided by individual LG servers. We ﬁrst build a list
of LG servers from the following sources: peeringDB [23],
Traceroute.org [24], Traceroute.net.ru [25], BGP4.as [26],
BGP4.net [27], and Virusnet [28]. After removing the over-
lapping LG servers from the above sources, we ﬁnd 1.2 K
LG servers, only 420 of which were in operation at the time
of this study, in the month of March 2013. Our scripts can
query 388 LG servers since the web sites of the other 20 LG
servers are not parsable and 12 LG servers limit automated
queries.
We queried 388 LG servers (running on 410 ASes) to learn
their supported functionalities. We ﬁnd that as many as two
dozen commands4 are supported by diﬀerent LG servers,
while a few of them are more widely supported than others.
For example, all the 388 LG servers support traceroute
and ping commands from 4.4 K (in total) locations in the
Internet. Another widely supported command is show ip
bgp summary, which is supported by 245 LG servers from
1.9 K locations. The regional Internet registries (RIR) wise
distribution of 245 LG servers are as follows: RIPE (175),
ARIN (40), APNIC (15), LACNIC (13), and AfriNIC (2).
Table 1 illustrates a sample result of querying a router
(cr1-eqx3-pa3 operating at Paris Equinix) with the show ip
bgp summary command through the LG server provided by
Ielo (AS29075). It shows that Ielo has a BGP session with
Hurricane Electric (AS6939) at Paris Equinix. It also shows
other important information, such as (i) how long the BGP
session has been alive (61 days), (ii) 36,464 routes received
from the BGP neighbor, and (iii) 153 routes advertised to
the BGP neighbor over this link.
1A BGP router under the control of an LG server is called
an LG router.
2Hurricane Electric LG. http://lg.he.net
3show ip bgp summary lists the BGP sessions established
with an LG router, and details the ASN and IP address of
its peering BGP router, for each BGP session.
4The full
datasets
http://mmlab.snu.ac.kr/traces/lg.
list of LG commands along with all
the
found at
collected in this
study can be
We also ﬁnd that 59 LG servers (distributed over 250 lo-
cations) allow us to run the BGP neighbor ip advertised
routes command, which helps observe IP preﬁx announce-
ment(s) advertised by an LG router to its peering BGP
routers. Table 2 shows a sample result of the BGP neigh-
bor ip advertised routes command on the BGP router
cr1-eqx3-pa3. Each row shows an IP preﬁx, its next hop
address and AS path information.
3. AS-LEVEL TOPOLOGIES
We ﬁrst describe our methodology to build an AS topol-
ogy from LG servers. We also brieﬂy describe AS topology
snapshots derived from other data sources, such as BGP
traces.
3.1 AS Topology derived from LG servers
We design a tool to automate a querying process to the 388
LG servers. Our tool issues 30 queries in parallel to the LG
servers and waits for 15s between successive queries to the
same LG server to avoid overloading them. Collecting data
from an LG server is a multi-step process. First, for each
LG server our tool learns, by parsing LG server websites,
the supported LG commands and its LG routers to which
our tool sends queries to collect the data. Second, to each
LG router, our tool sends the show ip bgp summary com-
mand to the LG server. Third, from the returned response
of show ip bgp summary, our tool extracts IP address(es) of
the neighboring router(s) of the LG router. Fourth, by using
the IP addresses of the neighboring routers, our tool sends
a query of BGP neighbor ip advertised routes to collect
the BGP routes advertised by the LG router to its neigh-
boring routers. Finally, all the responses of the show ip bgp
summary and BGP neighbor ip advertised routes commands
from the LG server are stored in text ﬁles for constructing
the AS topology.
We queried 245 LG servers that provide the option of run-
ning show ip bgp summary command from around 1.9 K lo-
cations (distributed across 110 countries), twice a week in
the month of March 2013. Total 8 snapshots are combined
to create an AS link dataset, which consists of around 70 K
AS links. We ﬁnd 77% of the AS links are intra-AS links,
i.e., the source and destination ASes of a link are the same.
As we are only interested in inter-AS links in this study, we
ﬁlter out these intra-AS links and selected only 16 K inter-
AS links. Throughout this paper, AS links refer to those
inter-AS links.
We also queried 59 LG servers (out of the 245 ones) that
provide the option of running BGP neighbor ip advertised
routes command, once a week in the month of Mar. 2013.
Their LG routers are located in 250 locations distributed
across 40 countries. Moreover, these LG servers advertise
routes to 5 K routers of their neighboring ASes. From the
BGP traces collected from the 59 LG servers, we extracted
around 2 million AS paths and broke down these AS paths
into around 103 K AS links.
Overall, by running the show ip bgp summary and BGP
neighbor ip advertised routes commands on the LG servers,
we have collected 116 K unique AS links (103 K+16 K=119 K-
3 K overlapping AS links). To the best of our knowledge,
this is the ﬁrst study that investigates not only show ip bgp
summary but also BGP neighbor ip advertised routes com-
mands to construct the AS topology.
3.2 Other AS-level Topologies
In this section, we describe other AS topologies: BGP
based (IRL [18]), traceroute based (Ark [19], iPlane [20]),
and IRR [21] based, all of which are used in this paper.
We have decided to use the recently (and regularly) pub-
lished AS topology datasets only, not including ones such
as Ono [10], which had been collected using BitTorrent P2P
clients in 2007-2008. Since we cannot quantify how much
of this AS topology dataset is outdated, we decided not to
use it. Similarly, we exclude DIMES [14] as it has not been
updated since Apr. 2012. Note that all the AS topologies
are collected in March 2013.
IRL: UCLA IRL [18] regularly publishes the AS topology
extracted from the BGP traces shared by RouteViews [31],
RIPE-RIS [32], Packet Clearing House (PCH) [33], and In-
ternet2 [34]. We ﬁnd 179 K AS links in the AS topology
published by IRL in March 2013.
Ark: CAIDA Archipelago (Ark) [19] provides the AS
topology derived from the traceroute based measurements.
As of March 2013, there are 71 Ark monitors distributed
across the Internet. We used Ark’s IPv4 Routed/24 AS link
dataset, which includes direct and indirect AS links. A di-
rect AS link means that a pair of connected ASes have a pair
of adjacent hops in the traceroute path, while an indirect AS
link means that two connected ASes are separated by one
or more unmapped or non-responsive hops. We discarded
indirect AS links and used direct AS links. We ﬁnd 116 K
direct AS links from the Ark dataset in March 2013.
iPlane: Madhyastha et al. proposed the iPlane [20]
service that performs traceroute from around 300 PlanetLab
locations daily to map the Internet topology. We ﬁnd 81 K
AS links from the iPlane AS topology in March 2013.
Internet Routing Registry (IRR): The Internet Rout-
ing Registry (IRR) [21] is a set of globally distributed databases
with which ASes can register their routing and address re-
lated information. The IRR has been reported to contain
stale records [6]. Nevertheless, the IRR contains AS links
that are not observed in BGP and traceroute based AS
topologies [9]. we downloaded the IRR data from the RIPE
Routing Registry (RR) [29] and RADB [30] in March 2013.
To derive AS link information from the IRR, we investigate
aut-num objects’ import, export and default attributes. We
extract 206 K AS links from the IRR, most of which (75%)