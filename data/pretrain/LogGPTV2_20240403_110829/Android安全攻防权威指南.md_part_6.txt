11月27日
Heifu
2月11日
v22
图1-1Android版本
---
## Page 19
1.1了解Android的根源3
与Android 发行版以代号命名类似，Android 的各个编译链接版本（build）通过一个短的内
部构建代号进行命名，关于版本代号名称、标签和内部版本号的详细解释，参见
http://source.android.com/source/build-numbers.html。以内部版本号JOP40D为例，首字母代表
Android发行版的代号（J代表JellyBean），第二个字母代表这个编译链接版本生成的代码分支。
尽管其确切含义在各个链接版本中都并非固定不变。第三个字母和随后的两个数字组成了一个日
期代码，字母代表季度，从A开始（A代表2009年第一季度）。在这个例子中，P就代表2012
年第四季度，两个数字则代表从本季度开始的天数。在该例子中，P40就是2012年11月10日。
最后一个字母区分当日发布的不同版本，同样从A开始。某天的第一个编译链接版本应该以A
来指明，但通常不会使用这个字母。
1.1.3审视Android设备家族
随着Android的成长，基于Android 操作系统的设备数量也随之增长。在过去的几年里。
Android已经缓慢地从传统的智能手机和平板电脑市场往外扩张，进入最不可能的领域中。例如，
智能手表、电视机配件、游戏主机、烤箱、发送到太空中的卫星，以及新的GoogleGlass（具有
头藏式显示屏的可穿藏设备）等设备都是由Android系统支持的。汽车产业也开始使用Android
作为车辆信息娱乐系统。这款操作系统也开始在嵌入式Linux领域中站稳脚跟，成为对嵌人式开
发者非常有吸引力的替代方案。所有这些都将让Androi设备家族成为一个非常多样化的领域。
你可以从世界各地的零售店里购买到Android设备。自前，大多数移动用户通过他们的移动
运营商获得带有价格补贴的设备。运营商只在用户接受语音和数据服务合约的条件下，为用户提
供带有价格补贴的设备。不愿意受限于某一个运营商的用户也可以自己从消费类电子产品商店或
在线购买Android设备。在一些国家，谷歌在他们的在线商店GooglePlay上销售Nexus系列产品。
1.谷歌Nexus
Nexus系列是谷歌公司智能移动设备的旗舰系列，产品主要包括智能手机和平板电脑。每
台设备都是由不同的与谷歌拥有密切伙伴关系的原始设备制造商（OEM）所生产。它们通过
GooglePlay在线商店以无锁版形式出售，非常方便用户更换运营商以及在旅行时使用。迄今为
止，谷歌已与HTC、三星、LG和华硕合作生产过Nexus智能手机和平板电脑。图1-2所示为最
近几年发布的一些Nexus设备。
Nexus设备的目的是为新的 Android 版本提供一个参考平台，因此在一个新的Android版本
发布后，谷歌会很快自己更新Nexus设备。作为开发者的开放平台，这些设备拥有解锁后的引导
装载程序，从而允许刷上定制Android编译链接版本，并且得到Android开源项目（AOSP）的支
持。谷歌也提供原厂ROM镜像，这些镜像是二进制固件镜像，可以将设备系统刷回未经修改的
原始状态：
Nexus设备的另一个好处是，它们提供了纯粹的谷歌体验，这意味着用户界面没有被修改过
的痕迹，而是从AOSP编译过来原厂Android中的用户接口。Nexus设备中也带有一些谷歌专有
应用.比如 Google Now、Gmail、Google Play、Google Drive 和l Hangouts 等。
---
## Page 20
4第1章级观Android生态图
2210
图 1-2谷歌 Nexus 设备
2.市场份额
智能手机市场份额的统计数据往往因数据源而异。数据源有很多，其中包括ComScore、
Kantar、IDC和 StrategyAnalytics 等。通过对这些数据源的统计数据进行全面i观察，会发现Android
的市场份额在大多数国家中都呈增长态势。根据一份由 Goldman Sachs发布的报告，Android在
2012 年年末的全球计算市场上处于首位。StatCounter 公司发布的GlobalStats 报告（http:/gs.
statcounter.com/）显示，Android在2013年11月在移动操作系统市场中排名第一，拥有全球41.3%
的市场占有率。尽管存在着一些细微的差异，但是所有的数据源看起来都认同Android目前正在
统治移动操作系统市场。
3.发行版的采纳
并不是所有Android设备上都运行着相同的Android版本。谷歌定期发布一个统计报表
（dashboard），给出运行每个Android版本的设备所占的相对百分比。这些信息是基于访间 Google
Play的日志收集统计的，而Google Play则在所有经过批准的设备中都存在。要了解最新的统计
报表，可访问链接：http:/developer.android.com/about/dashboards/。此外维基百科也包含了一个图
表，能够显示在一定时期内汇总的统计数据。图1-3显示了撰写本书时的最新图表，其中包含了
从2009年12月至2013年2月的数据。
如图1-3所示，Android的新版本有着一个相对缓慢的采纳周期，需要超过一年的时间才能
让一个新版本在90%以上的设备上运行。你可以在1.3节中阅读到关于这一向题的更多细节，以
及Android所面临的更多其他挑战。
---
## Page 21
1.1了解Android的根源
5
Android
版本
I1.I
} Cgcaht
} 0ut
} fms
3
811
#12
84
84.
Ri, fmiustak (Creative Ca
Amributins-Share Aliae 3.0 Unperted licese
图1-3Android版本分布的历史情况
1.1.4主体开源
AOSP是谷歌和手机开放联盟（OUA）其他会员对开放性承诺的表现形式。作为AOSP的基
石，Android操作系统是构建于许多不同开放源代码项目组件之上的，其中包含许多程序库、Linux
内核、一个完整的用户接口和一些应用程序等。所有这些软件组件都拥有开放源代码倡议（OSI）
所认证的版本许可协议。大多数Android的源码是基于Apache软件许可协议V2.0版本而发布的。
你可以通过http:/www.apache.org/licenses/LICENSE-2.0获取到这份协议条款。但是也存在着一些
例外情况，主要包括一些上游项目，是Android所依粮的一些外部开源项目。两个例子是以GPLv2
软件许可协议发布的Linux内核代码，以及使用BSD族软件许可协议的WebKit项目。AOSP源
代码库将所有这些项目都聚集在一处。
尽管Android软件栈的绝大部分是开源的，但是最终的消费设备中会包含多个封闭源代码的
软件组件。甚至谷歌官方的旗舰产品线Nexus系列设备中也包含着专有的二进制软件。例子包括
引导装载程序、外设固件、无线电组件、数字权限管理（DRM）软件和一些应用程序。许多软
件仍然保持封闭源代码，以努力保护知识产权。然面，保持它们封闭源代码也阻碍软件的互联互
通，使得开发社区的移植工作更具挑战性。
此外，许多会试参与Android代码开发的开源爱好者发现，Android并不是完全开放式地开
发。有证据表明，谷歌开发Android很大程度上是以秘密的方式进行的。代码更改不会马上提供
---
## Page 22
6第1章纵观Android生态图
给公众，与之相反，开源发布伴随着新版本发布进行。但尽管这样，好几次开源代码也并没有在
发布时公开。事实上，Android的Honeycomb版本（3.0）的源代码直到Ice Cream Sandwich（4.0）
源代码发布后才最终公布，另外，IceCreamSandwich的源代码直到版本发布差不多一个月之后
才公开。像这样的事件不仅违背了开放源代码的精神，也违背了Android的两个既定目标：创新
性和开放性。
1.2了解Android的利益相关者
了解Android生态圈中到底有哪些利益相关者是非常重要的，这不但可以提供不同的视角。
还可以让人们理解谁负责开发支持不同组件的代码。本节将审视主要的Android利益相关者群体，
包括谷歌、硬件厂商、移动通信运营商、开发者、用户和安全研究人员，探讨每类利益相关者的
目的与动机，并分析他们是如何相互关联的。
每个群体都属于一种不同的产业领域，在Android生态圈中承担着不同的角色。谷歌推动了
Android的诞生，开发核心的操作系统，并管理Android品牌。硬件加工厂商制造了底层的硬件
部件与外围设备。原始设备制造商（OEM）则制造了终端用户设备，将不同的部件组装在一起，
进面形成完整的设备。移动通信运营商为移动设备提供了语音和数据访问服务。一大批开发者，
包括那些被其他群体雇用的程序员，在众多项目中一起工作，共同塑造着Android生态圈。
图1-4显示了Android生态圈主要利益相关者群体之间的关系。
谷歌
所有显次
系统芯片制造商
内核、无线电
OEM
所有层次
移动通信运营商
应用、引导装载程
序和无线电规范
消费者
图14生态关联关系
这些关系表明了在制造或升级一个Android设备时各方的关联情况。正如图1-4所清晰显示
出的，Android生态圈非常复杂。这些业务关系极难管理，同时还会变得更加复杂。关于这一点，
本章稍后再进行讨论。在研究这些问题之前，先来详细讨论每一个群体。
---
## Page 23
1.2了解Android的利益相关者7
1.2.1谷歌
作为将Android引人市场的公司，谷歌在该生态圈中拥有几个关键角色。它的责任包括法务
管理、品牌管理、基础设施管理、内部开发，以及支持外部开发等。通过与合作伙伴的紧密合作，
谷歌创建了Nexus产品系列，并且通过这种做法达成了一些必要的商业协议，进而确保了一些重
要的Android设备能及时推向市场。正是由于谷歌在所有这些事务上所表现出的超强执行力，才
造就了Android对消费者的吸引力。
首先最重要的是，谷歌拥有并管理Android品牌。除非所生产的设备达到谷歌的兼容性要求
（这些要求的细节将在1.3.2节中详细描述），否则OEM不能给设备贴上Android品牌，或者提供
对Google Play商店的访问。由于Android是开源的，所以对谷歌来说，强制实施兼容性是其能
对其他利益相关者产生影响力的少数几个途径之一。如果没有它，谷歌将基本无力阻止Android
品牌被合作伙伴无意或有意地破坏。
谷歌的下一个角色则涉及支持Android设备的软硬件基础设施。支持Gmail、日历、联系人
及其他许多应用的服务都是由谷歌提供的。此外，谷歌还运营着GooglePlay应用商店，其中包
括以图书、杂志、视频、音乐等各种形式分发的富媒体内容，发行这些内容需要与世界各地的发
行公司签订授权协议。此外，谷歌还在自已的数据中心维护看许多物理服务器来支持这些服务，
为AOSP提供许多关键服务，比如托管AOSP源代码，提供原厂镜像下载及二进制驱动下载，提
供问题跟踪服务器以及Gemit代码审查工具等。
谷歌也负责监督Android核心平台的发展。在公司内部，谷歌将Android项目视作一个全面
的产品开发运营部，在谷歌内部开发的软件包括操作系统内核、一组核心应用以及一些可选的非
核心应用。如前所述，谷歌一直在为未来的Android版本秘密地开发一些创新与增强功能，谷歌
的工程师使用对设备厂商、运营商和第三方开发者不可见的内部开发树。当谷歌决定发布新版本
时，它才同时公布原厂镜像、源代码和应用程序编程接口（API）文档，它也通过空中下载（OTA）
分发渠道推送更新。在AOSP发布之后，每个人都可以克隆它，然后开始在最新发布的版本上开
始自己的工作，构建自己的版本。这种隔离开发方式使开发者和设备制造商得以专注于一个版本，
而无需跟踪谷歌内部团队的未完成工作。尽管有这个好处，但这种封闭的开发模式还是对AOSP
作为一个开源项目的声誉产生了损害。
谷歌的另一个角色是培养一个开放性的基于Android平台的开发社区，谷歌为第三方开发者
提供开发工具套件、API文档、源代码、编码风格指导等信息。所有这些努力都有助于在大量第
三方应用中建立有凝聚力、一致的用户体验。
通过承担这些角色，谷歌确保了Android作为品牌、平台和开源项目的充分活力。
1.2.2硬件厂商
操作系统的目标是管理设备中所连接的硬件并向应用提供服务。毕竞，如果没有硬件
Android操作系统也不可能有什么用。现在的智能手机的硬件都是非常复杂的，在如此小巧的外
形要求和大量外设的情况下，配置所需的硬件是一项相当复杂的工程。为了更好地观察这一群体
---
## Page 24
8第1章纵观Android生态图
中的利益相关者，下面几小节中将硬件厂商分为三个子群体，他们分别制造中央处理器（CPU）、
系统芯片（System-on-Chip）与移动设备。
1.CPU制造商
尽管Android应用是与处理器无关的，但原生二进制文件的情况却并非这样。原生二进制文
件会针对特定设备所使用的特定处理器进行编译。Android是基于Linux 内核的，面Linux是可
移植的，并且还支持多种处理器架构。同样，Android的原生开发套件（NDK）所包含的工具可
用于在Android支持的所有应用处理器架构上开发用户空间原生代码。Android支持的处理器架
构包括ARM、Intel x86和 MIPS。
由于功耗低，ARM架构已经成为移动设备中最广泛使用的处理器架构。ARM公司（ARM
Holdings）不像其他的微处理器厂商一样自己制造CPU，他们仅以知识产权的方式授权技术。ARM
公司提供了多种微处理器核心设计，其中包括ARM11、Cortex-A8、Cortex-A9和Cortex-A15，
现在的Android设备上所用的设计通常都支持ARMv7指令集。
2011年，英特尔宣布与谷歌合作，为Android提供对英特尔处理器的支持。以Medfeld平台
为基础的Atom处理器成为Android支持的第一个英特尔平台。此外，英特尔启动了Androidon
Intel Architecture（Andorid-IA）项目，这一项目基于AOSP，为英特尔处理器上的 Android提供
代码支持。Android-IA项目网站https:/01.org/android-ia/是为系统与平台开发者提供的，面英特尔