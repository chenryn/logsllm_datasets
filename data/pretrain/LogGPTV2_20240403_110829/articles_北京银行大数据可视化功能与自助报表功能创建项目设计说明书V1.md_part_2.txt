```{=html}
```
a)  本系统前端应用访问的应用服务器有2台，已做负载均衡，可减轻服务器压力。
b)  本系统前端应用访问的数据库服务器为Oracle11g RAC。
    1.  ### 物理架构 {#物理架构 .样式3}
本系统生产环境物理架构数据存储服务器（GP、SQLServer、Oracle 11g
RAC）、数据调度服务器(control-m)、润干V4.5服务器、润干V5服务器、邮件服务器、ASP报表平台服务器、smartBI服务器、WEB服务器以及存储设备组成，生产环境的所有服务器均直接部署于北京银行局域网内。详细配置见下图。
![clipboard_1566200966944](media/image4.png){width="6.933333333333334in"
height="4.295138888888889in"}
服务器物理IP地址配置参考如下：
  ---------------- -------------------- ----------------------- -------------------- ----------------- -------------------
  **地点**         **服务器类型**       **用途**                **IP地址（外网）**   **万兆1(内网)**   **万兆2（内网）**
                   GP数据库服务器       master                  XXX.XXX.XXX.50       XXX.XXX.XXX.1     XXX.XXX.XXX.1
  西安灾备中心                          standby                 XXX.XXX.XXX.51       XXX.XXX.XXX.2     XXX.XXX.XXX.2
                                        seg1                    XXX.XXX.XXX.52       XXX.XXX.XXX.11    XXX.XXX.XXX.11
                                        seg2                    XXX.XXX.XXX.53       XXX.XXX.XXX.12    XXX.XXX.XXX.12
                                        seg3                    XXX.XXX.XXX.54       XXX.XXX.XXX.13    XXX.XXX.XXX.13
                                        seg4                    XXX.XXX.XXX.55       XXX.XXX.XXX.14    XXX.XXX.XXX.14
                   Oracle数据库服务器   数据库服务器1           XXX.XXX.XXX.9        无                无
                                        数据库服务器2           XXX.XXX.XXX.10       无                无
                   SQLServer服务器                                                                     
                   Control-m                                                                           
                   润干V4.5                                     XXX.XXX.XXX.27                         
                                                                XXX.XXX.XXX.28                         
                   润干V5                                                                              
                   ASP报表平台                                  XXX.XXX.XXX.128                        
                                                                XXX.XXX.XXX.129                        
                   统一认证服务器                                                                      
                   Smartbi服务器                                                                       
                   应用服务器           应用服务器1(负载均衡)   XXX.XXX.XXX.196      无                无
                                        应用服务器2(负载均衡)   XXX.XXX.XXX.197      无                无
  和平里生产中心                        负载均衡（F5）          XXX.XXX.XXX.100      无                无
  ---------------- -------------------- ----------------------- -------------------- ----------------- -------------------
除生产环境外，至少还需配置一套开发环境和一套测试环境，初期开发和测试可暂时使用一套环境，生产环境中的每一部分都需要在开发和测试环境中有对应，但服务器、存储的规模和配置都可根据实际情况缩减。
## 数据库设计
### 用户及权限规划 {#用户及权限规划 .样式3}
  ------------------- ---------------------------------------------------
  **用户名称**        **用户描述**
  portal              前台访问用户
  ------------------- ---------------------------------------------------
## 开发规范设计
### 数据库规范 {#数据库规范 .样式3}
> 参见《EYE-SQL开发规范V1.0》，详见00-Developing\\02-项目工程文档\\202-设计文档\\20202-系统设计\\2020206-开发规范
### 代码开发规范 {#代码开发规范 .样式3}
> 参见《EYE-Java开发规范V1.0》，详见00-Developing\\02-项目工程文档\\202-设计文档\\20202-系统设计\\2020206-开发规范
# 模型/数据库设计
## Oracle数据库设计
### 数据库名称 {#数据库名称 .样式3}
  --------------------------------- -------------------------------------
  **Oracle实例名**                  **备注**
  orcl_dev                          开发环境数据库实例名
  sit                               sit/uat测试环境数据库实例名
  orcl                              准生产环境数据库实例名
  --------------------------------- -------------------------------------
### 表空间设计 {#表空间设计 .样式3}
本系统ORACLE数据库的表空间与逻辑层、块对应。具体如下：
  ------------------------------ ----------------------------------------
  **表空间名称**                 **对应逻辑层/块**
  EYE_TBS_WEB                    WEB
  ------------------------------ ----------------------------------------
### 用户设计 {#用户设计 .样式3}
本系统ORACLE数据库按照功能分配的用户及用途如下：
  ------------------------ -------------------- -------------------------
  **用户名称**             **对应逻辑层/块**    **用途**
  PORTAL                   WEB                  前端系统配置信息
  ------------------------ -------------------- -------------------------
### Oracle数据库参数 {#oracle数据库参数 .样式3}
> 为了提高数据库的查询效率、增加数据兼容性以便更好地支持前端展现，数据库的主要参数及功能如下：
  ---------------------------------------------- ------------------------
  **参数名称**                                   **值**
  NLS_CHARACTERSET                               AL32UTF8
  NLS_LANGUAGE                                   AMERICAN
  NLS_TERRITORY                                  UNITED STATE
  NLS_NCHAR_CHARACTERSET                         AL16UTF16
  ---------------------------------------------- ------------------------
> 其它参数由Oracle11 RAC自动调整。
1.  
2.  ## 模型设计
-   **后端ERWIN模型**
> ![](media/image5.emf)
-   **前端数据库设计说明书**
# 接口设计
## 外部硬件接口
无
# 功能设计 
## 功能清单
  -------------- -------------- ----------------------- ----------------------------------------------------------------------------------------------------------------------------------------- ----------
  **一级模块**   **二级模块**   **三级模块**            **功能概述**                                                                                                                              **说明**
  登录                                                增加统一认证产品认证，调整页面风格                                                                                                        调整功能
  首页                                                调整页面风格                                                                                                                              新增功能
  报表订阅       订阅报表管理                          提供订阅报表的管理功能。主要包含查询、重置、新增、修改、删除功能。                                                                        新增功能
                 报表订阅管理                          提供报表订阅基础信息、参数信息维护。主要包含查询、重置、新增、修改、删除、配置参数及值功能。                                              新增功能
                  我的订阅                            对已生成报表文件提供查询、下载功能。                                                                                                      新增功能
                 后台跑批       数据文件校验开发(5个)   主要用于校验ODS下发数据文件是否下发完成。                                                                                                 新增功能
                                报表订阅信息生成        根据所维护的报表订阅的基础信息及参数信息按频率在指定日期生成相应的报表订阅信息。                                                          新增功能
                                报表订阅文件生成        循环遍历生成的报表订阅信息，调用指定润干集算器的命令，传递润干集算器脚本名称、模板名称、参数及值给润干集算器来生成报表订阅的Excel文件。   新增功能
                 定时任务       报表订阅发送邮件        根据报表订阅生成的Excel文件提供发送邮件功能。                                                                                             新增功能
  自助报表        电子银行      电子银行              对电子银行报表进行开发                                                                                                                    新增功能
                  绩效考核      绩效0038              对绩效0038报表进行开发                                                                                                                    新增功能
                                 绩效0039              对绩效0039报表进行开发                                                                                                                    新增功能
  固定报表       综合报表       公司业务                调整整体风格样式；升级部分报表服务器至V5                                                                                                  调整功能
                                个人业务                                                                                                                                                          调整功能
                                结算业务                                                                                                                                                          调整功能
                                金融市场                                                                                                                                                          调整功能
                                绩效考核                                                                                                                                                          调整功能
                                财务会计                                                                                                                                                          调整功能
                                工资报表                                                                                                                                                          调整功能
                                数据仓库                                                                                                                                                          调整功能
                                报表知识库                                                                                                                                                        调整功能
                                数据申请                                                                                                                                                          调整功能
                                深圳分行                                                                                                                                                          调整功能
                                杭州分行                                                                                                                                                          调整功能
                                准生产报表服务器                                                                                                                                                  调整功能
                                测试报表                                                                                                                                                          调整功能
                                天津分行                                                                                                                                                          调整功能
                                济南分行                                                                                                                                                          调整功能
                                自贸区报表测试                                                                                                                                                    调整功能
                                金融市场                                                                                                                                                          调整功能
                                上海分行                                                                                                                                                          调整功能
                                Rpx双报表服务器                                                                                                                                                   新增功能
                  资源定制     报表发布                调整整体风格样式                                                                                                                          调整功能
                                报表批量删除                                                                                                                                                      调整功能
                                报表上线申请                                                                                                                                                      调整功能
                                报表文档下载                                                                                                                                                      调整功能
                                指标维护                                                                                                                                                          调整功能
                                资源管理                                                                                                                                                          调整功能
                                页面定制                                                                                                                                                          调整功能
                                报表批量发布                                                                                                                                                      调整功能
  系统管理        权限管理     用户管理                调整整体风格样式                                                                                                                          调整功能
                                角色管理                调整整体风格样式；并与asp报表权限合并                                                                                                     调整功能
                                机构管理                调整整体风格样式                                                                                                                          调整功能
                                用户激活                调整整体风格样式                                                                                                                          调整功能
                                激活管理员              调整整体风格样式                                                                                                                          调整功能
                                角色二次授权            调整整体风格样式                                                                                                                          调整功能
                 系统管理       菜单管理                调整整体风格样式                                                                                                                          调整功能
                                跑批管理                                                                                                                                                          调整功能
                                在线用户查询                                                                                                                                                      调整功能
                                权限相关表备份                                                                                                                                                    调整功能
                                分行版本配置管理                                                                                                                                                  调整功能
                                一键还原                                                                                                                                                          调整功能
                  消息通知     消息通知维护            对消息通知信息的增、删、改、查                                                                                                            新增功能
                                上传文档                对上传文档的管理                                                                                                                          新增功能
                  日志管理     系统日志管理            对系统日志查看及管理                                                                                                                      新增功能
  -------------- -------------- ----------------------- ----------------------------------------------------------------------------------------------------------------------------------------- ----------
## 登录
### 登录 {#登录-1 .样式3}
#### 功能概述
通过本功功能登录大数据可视化智能门户。
#### 操作界面
![](media/image6.png){width="5.999305555555556in" height="3.36875in"}
#### 模块流程
用户输入用户名以及密码,点击登陆按钮
#### 关联模块
无
#### 设计说明
  --------------------- --------------------------------------------------------
  **类名/功能点名称**   **描 述**
  前台页面名称          /portal/WebRoot/normalplatform/skins/default/login.jsp
  后台类                Login.java
  主要用途              验证用户登录的合法性
  --------------------- --------------------------------------------------------
#### 输入输出
【输入参数】
  --------------------- -------------- -------------- ----------- -------------
  **字段名称**          **输入类型**   **字段类型**   **约束**    **说明**
  用户名                文本框         字符串                     
  密码                  文本框         字符串                     
  --------------------- -------------- -------------- ----------- -------------