This is a duplicate of #24110 but that issue is closed and nobody seems to be
willing to open it (I even asked in #ansible).
##### ISSUE TYPE
  * Bug Report
##### COMPONENT NAME
pacman
##### ANSIBLE VERSION
    ansible-playbook 2.4.1.0
      config file = /etc/ansible/ansible.cfg
      configured module search path = [u'/home/thom/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']
      ansible python module location = /usr/lib/python2.7/site-packages/ansible
      executable location = /usr/bin/ansible-playbook
      python version = 2.7.14 (default, Sep 20 2017, 01:25:59) [GCC 7.2.0]
##### CONFIGURATION
N/A
##### OS / ENVIRONMENT
Arch Linux
##### SUMMARY
Pacman supports aliases when searching or installing package names, but
doesn't support them when querying package's installed states. This crashes
the Ansible `pacman` module.
##### STEPS TO REPRODUCE
    - hosts: localhost
      become: yes
      tasks:
        - pacman: name=svn state=present
##### EXPECTED RESULTS
Show that subversion is already installed
##### ACTUAL RESULTS
    task path: /home/thom/git/ansible/test.yml:4
    Using module file /usr/lib/python2.7/site-packages/ansible/modules/packaging/os/pacman.py
     ESTABLISH LOCAL CONNECTION FOR USER: thom
     EXEC /bin/sh -c 'echo ~ && sleep 0'
     EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /home/thom/.ansible/tmp/ansible-tmp-1510228510.14-193730463357425 `" && echo ansible-tmp-1510228510.14-193730463357425="` echo /home/thom/.ansible/tmp/ansible-tmp-1510228510.14-193730463357425 `" ) && sleep 0'
     PUT /tmp/tmpO43qZY TO /home/thom/.ansible/tmp/ansible-tmp-1510228510.14-193730463357425/pacman.py
     EXEC /bin/sh -c 'chmod u+x /home/thom/.ansible/tmp/ansible-tmp-1510228510.14-193730463357425/ /home/thom/.ansible/tmp/ansible-tmp-1510228510.14-193730463357425/pacman.py && sleep 0'
     EXEC /bin/sh -c 'sudo -H -S  -p "[sudo via ansible, key=piygkrwrgcualemppeyqvtcebrddppaq] password: " -u root /bin/sh -c '"'"'echo BECOME-SUCCESS-piygkrwrgcualemppeyqvtcebrddppaq; /usr/bin/python2 /home/thom/.ansible/tmp/ansible-tmp-1510228510.14-193730463357425/pacman.py; rm -rf "/home/thom/.ansible/tmp/ansible-tmp-1510228510.14-193730463357425/" > /dev/null 2>&1'"'"' && sleep 0'
    The full traceback is:
    Traceback (most recent call last):
      File "/tmp/ansible_VEhXK5/ansible_module_pacman.py", line 444, in 
        main()
      File "/tmp/ansible_VEhXK5/ansible_module_pacman.py", line 436, in main
        install_packages(module, pacman_path, p['state'], pkgs, pkg_files)
      File "/tmp/ansible_VEhXK5/ansible_module_pacman.py", line 298, in install_packages
        data = stdout.split('\n')[3].split(' ')[2:]
    IndexError: list index out of range
    fatal: [localhost]: FAILED! => {
        "changed": false, 
        "failed": true, 
        "module_stderr": "Traceback (most recent call last):\n  File \"/tmp/ansible_VEhXK5/ansible_module_pacman.py\", line 444, in \n    main()\n  File \"/tmp/ansible_VEhXK5/ansible_module_pacman.py\", line 436, in main\n    install_packages(module, pacman_path, p['state'], pkgs, pkg_files)\n  File \"/tmp/ansible_VEhXK5/ansible_module_pacman.py\", line 298, in install_packages\n    data = stdout.split('\\n')[3].split(' ')[2:]\nIndexError: list index out of range\n", 
        "module_stdout": "", 
        "msg": "MODULE FAILURE", 
        "rc": 0
    }
See also #24110