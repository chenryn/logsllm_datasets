Each element in the collection is 288 bytes. k-way replication simply
replicates the n balls into k-bins during the producer’s allocation, and
picks a different bin for the k balls during the consumer’s simulation.
Sharding maps balls to a single bin during the producer’s allocation,
and the consumer uses a hash function during simulation (this variant
has a high failure rate which we improve by replicating buckets).
(considering Encode is a one-time operation), and the relative
costs are consistent.
Figure 15 lists the CPU time taken by various operations for
all the variants we have implemented. Our hypothesis holds to
an extent: all the variants that are based on replication (for the
producer) and hashing (for the consumer) follow our prediction.
The source of costs for schedule generation corresponds to the
time taken to ﬁnd a solution to a k balls, b bins, and w choices
problem. The different allocation strategies approximate the
optimal solution, and among them, Cuckoo hashing yields the
best approximation by recursively relocating elements when
there are collisions (§4.5). Encoding performance, on the other
hand, is based on the number and the cost of the memory copies,
since encoding is a simple repetition code.
Our hypothesis does not hold for the PBC variant that cor-
responds to a port of Pung’s Hybrid multi-retrieval protocol.
The reason is that this variant is partially based on the subcube
batch code of Ishai et al. [52], for which the ﬁnal position of
each input element is statically determined and does not require
computing a hash function (unlike our hashing variants). This
allows computing a schedule by consulting a lookup table.
Finally, as mentioned above, our goal with this experiment
was to conﬁrm that all PBCs have reasonably efﬁcient encoding,
decoding, and schedule generation procedures. As such, our
evaluation (§7) focuses only on the Cuckoo variant since it
yields the most efﬁcient parameters, and the second lowest
failure probability (k-way replication never fails, but has a very
high value of m).
References
[1] Akamai state of the internet connectivity report.
https://www.akamai.com/fr/fr/multimedia/
documents/state-of-the-internet/q1-2017-state-
of-the-internet-connectivity-report.pdf, May 2017.
[2] Opensignal state of mobile networks: Usa.
https://opensignal.com/reports-
data/national/data-2017-08-usa/report.pdf, Aug.
2017.
[3] Pung: Unobservable communication over fully untrusted
infrastructure. https://github.com/pung-project/pung,
Sept. 2017.
[4] Simple encrypted arithmetic library — SEAL.
https://sealcrypto.org, 2017.
Authorized licensed use limited to: IEEE Xplore. Downloaded on March 18,2021 at 12:31:59 UTC from IEEE Xplore.  Restrictions apply. 
[5] XPIR: NFLLWE security estimator.
[23] A. D. Breslow, D. P. Zhang, J. L. Greathouse, N. Jayasena, and
https://github.com/XPIR-team/XPIR/blob/master/
crypto/NFLLWESecurityEstimator/
NFLLWESecurityEstimator-README, June 2017.
[6] XPIR NFLParams. https://github.com/XPIR-
team/XPIR/blob/master/crypto/NFLParams.cpp, June
2017.
[7] Internet providers with data caps.
https://broadbandnow.com/internet-providers-
with-data-caps, Jan. 2018.
[8] C. Aguilar-Melchor, J. Barrier, L. Fousse, and M.-O. Killijian.
XPIR: Private information retrieval for everyone. In Proceedings
of the Privacy Enhancing Technologies Symposium (PETS), July
2016.
[9] C. Aguilar-Melchor, J. Barrier, L. Fousse, and M.-O. Killijian.
XPIR: Private information retrieval for everyone.
https://github.com/xpir-team/xpir/, 2016.
[10] M. R. Albrecht, R. Player, and S. Scott. On the concrete
hardness of learning with errors. Journal of Mathematical
Cryptology, 9(3), Oct. 2015.
[11] S. Angel and S. Setty. Unobservable communication over fully
untrusted infrastructure. In Proceedings of the USENIX
Symposium on Operating Systems Design and Implementation
(OSDI), Nov. 2016.
D. M. Tullsen. Horton tables: Fast hash tables for in-memory
data-intensive computing. In Proceedings of the USENIX
Annual Technical Conference (ATC), June 2016.
[24] C. Cachin, S. Micali, and M. Stadler. Computationally private
information retrieval with polylogarithmic communication. In
Proceedings of the International Conference on the Theory and
Applications of Cryptographic Techniques (EUROCRYPT), May
1999.
[25] J. A. Cain, P. Sanders, and N. Wormald. The random graph
threshold for k-orientability and a fast algorithm for optimal
multiple-choice allocation. In Proceedings of the ACM-SIAM
Symposium on Discrete Algorithms (SODA), Jan. 2007.
[26] R. Canetti, J. Holmgren, and S. Richelson. Towards doubly
efﬁcient private information retrieval. In Proceedings of the
Theory of Cryptography Conference (TCC), Nov. 2017.
[27] Y.-C. Chang. Single database private information retrieval with
logarithmic communication. In Proceedings of the Australasian
Conference on Information Security and Privacy, July 2004.
[28] H. Chen, K. Han, Z. Huang, A. Jalali, and K. Laine. Simple
encrypted arithmetic library v2.3.0.
https://https://www.microsoft.com/en-
us/research/publication/simple-encrypted-
arithmetic-library-v2-3-0/, Dec. 2017.
[12] Y. Arbitman, M. Naor, and G. Segev. Backyard cuckoo hashing:
[29] H. Chen, K. Laine, and P. Rindal. Fast private set intersection
Constant worst-case operations with a succinct representation.
In Proceedings of the IEEE Symposium on Foundations of
Computer Science (FOCS), Oct. 2010.
from homomorphic encryption. In Proceedings of the ACM
Conference on Computer and Communications Security (CCS),
Oct. 2017.
[13] Y. Azar, A. Z. Broder, A. R. Karlin, and E. Upfal. Balanced
[30] L. T. Chen and D. Rotem. Optimal reponse time retrieval of
allocations. In Proceedings of the ACM Symposium on Theory of
Computing (STOC), May 1994.
replicated data. In Proceedings of the ACM Symposium on
Principles of Database Systems (PODS), May 1994.
[14] B. Barak, O. Goldreich, R. Impagliazzo, S. Rudich, A. Sahai,
[31] R. Cheng, W. Scott, B. Parno, I. Zhang, A. Krishnamurthy, and
S. P. Vadhan, and K. Yang. On the (im)possibility of obfuscating
programs. Journal of the ACM, 59(2), 2012.
[15] A. Beimel, Y. Ishai, E. Kushilevitz, and J.-F. Raymond. Breaking
the O(n1/(2k−1)) barrier for information-theoretic private
information retrieval. In Proceedings of the IEEE Symposium on
Foundations of Computer Science (FOCS), Nov. 2002.
T. Anderson. Talek: a private publish-subscribe protocol.
Technical Report UW-CSE-16-11-01, University of Washington
Computer Science and Engineering, Nov. 2016.
[32] B. Chor, N. Gilboa, and M. Naor. Private information retrieval
by keywords. Cryptology ePrint Archive, Report 1998/003, Feb.
1998. https://eprint.iacr.org/1998/003.
[16] A. Beimel, Y. Ishai, and T. Malkin. Reducing the servers
[33] B. Chor, O. Goldreich, E. Kushilevitz, and M. Sudan. Private
computation in private information retrieval: PIR with
preprocessing. In Proceedings of the International Cryptology
Conference (CRYPTO), Aug. 2000.
information retrieval. In Proceedings of the IEEE Symposium on
Foundations of Computer Science (FOCS), Oct. 1995.
[34] D. Coppersmith and S. Winograd. Matrix multiplication via
[17] B. H. Bloom. Space/time trade-offs in hash coding with
allowable errors. Communications of the ACM, 13(7), July 1970.
arithmetic progressions. In Proceedings of the ACM Symposium
on Theory of Computing (STOC), May 1987.
[18] N. Borisov, G. Danezis, and I. Goldberg. DP5: A private
[35] A. Czumaj and V. Stemann. Randomized allocation processes.
presence service. In Proceedings of the Privacy Enhancing
Technologies Symposium (PETS), June 2015.
In Proceedings of the IEEE Symposium on Foundations of
Computer Science (FOCS), Oct. 1997.
[19] E. Boyle, Y. Ishai, R. Pass, and M. Wootters. Can we access a
[36] D. Demmler, A. Herzberg, and T. Schneider. RAID-PIR:
database both locally and privately? In Proceedings of the
Theory of Cryptography Conference (TCC), Nov. 2017.
Practical multi-server PIR. In Proceedings of the ACM Cloud
Computing Security Workshop (CCSW), Nov. 2014.
[20] Z. Brakerski, C. Gentry, and V. Vaikuntanathan. (Leveled) fully
homomorphic encryption without bootstrapping. In Proceedings
of the Innovations in Theoretical Computer Science (ITCS)
Conference, Jan. 2012.
[21] Z. Brakerski and V. Vaikuntanathan. Efﬁcient fully
homomorphic encryption from (standard) LWE. In Proceedings
of the IEEE Symposium on Foundations of Computer Science
(FOCS), Oct. 2011.
[22] Z. Brakerski and V. Vaikuntanathan. Fully homomorphic
encryption from Ring-LWE and security for key dependent
messages. In Proceedings of the International Cryptology
Conference (CRYPTO), Aug. 2011.
[37] C. Devet, I. Goldberg, and N. Heninger. Optimally robust
private information retrieval. In Proceedings of the USENIX
Security Symposium, Aug. 2012.
[38] M. Dietzfelbinger and F. Meyer auf der Heide. A new universal
class of hash functions and dynamic hashing in real time. In
Proceedings of the International Colloquium on Automata,
Languages and Programming (ICALP), July 1990.
[39] C. Dong and L. Chen. A fast single server private information
retrieval protocol with low communication cost. In Proceedings
of the European Symposium on Research in Computer Security
(ESORICS), Sept. 2014.
[40] J. Fan and F. Vercauteren. Somewhat practical fully
977
Authorized licensed use limited to: IEEE Xplore. Downloaded on March 18,2021 at 12:31:59 UTC from IEEE Xplore.  Restrictions apply. 
homomorphic encryption. Cryptology ePrint Archive, Report
2012/144, Mar. 2012.
https://eprint.iacr.org/2012/144.pdf.
[41] D. Fernholz and V. Ramachandran. The k-orientability
thresholds for Gn,p. In Proceedings of the ACM-SIAM
Symposium on Discrete Algorithms (SODA), Jan. 2007.
[42] A. Frieze, P. Melsted, and M. Mitzenmacher. An analysis of
random-walk cuckoo hashing. SIAM Journal on Computing,
40(2), Mar. 2011.
Technologies Symposium (PETS), July 2015.
[57] E. Kushilevitz and R. Ostrovsky. Replication is not needed:
Single database, computationally-private information retrieval.
In Proceedings of the IEEE Symposium on Foundations of
Computer Science (FOCS), Oct. 1997.
[58] A. Kwon, D. Lazar, S. Devadas, and B. Ford. Rifﬂe: An efﬁcient
communication system with strong anonymity. In Proceedings
of the Privacy Enhancing Technologies Symposium (PETS), July
2016.
[43] S. Garg, E. Miles, P. Mukherjee, A. Sahai, A. Srinivasan, and
[59] H. Lipmaa. First CPIR protocol with data-dependent
M. Zhandry. Secure obfuscation in a weak multilinear map
model. In Proceedings of the Theory of Cryptography
Conference (TCC), Oct. 2016.
computation. In Proceedings of the International Conference on
Information, Security and Cryptology (ICISC), Dec. 2009.
[60] H. Lipmaa and K. Pavlyk. A simpler rate-optimal CPIR protocol.
[44] C. Gentry, S. Halevi, and N. P. Smart. Fully homomorphic
encryption with polylog overhead. In Proceedings of the
International Conference on the Theory and Applications of
Cryptographic Techniques (EUROCRYPT), Apr. 2012.
[45] C. Gentry and Z. Ramzan. Single-database private information
retrieval with constant communication rate. In Proceedings of
the International Colloquium on Automata, Languages and
Programming (ICALP), July 2005.
[46] I. Goldberg. Improving the robustness of private information
retrieval. In Proceedings of the IEEE Symposium on Security
and Privacy (S&P), May 2007.
[47] M. Green, W. Ladd, and I. Miers. A protocol for privately
reporting ad impressions at scale. In Proceedings of the ACM
Conference on Computer and Communications Security (CCS),
Oct. 2016.
[48] J. Groth, A. Kiayias, and H. Lipmaa. Multi-query
In Proceedings of the International Financial Cryptography
Conference, Apr. 2017.
[61] H. Lipmaa and V. Skachek. Linear batch codes. In Proceedings
of the International Castle Meeting on Coding Theory and
Applications, Sept. 2014.
[62] W. Lueks and I. Goldberg. Sublinear scaling for multi-client
private information retrieval. In Proceedings of the International
Financial Cryptography and Data Security Conference, Jan.
2015.
[63] P. Mittal, F. Olumoﬁn, C. Troncoso, N. Borisov, and I. Goldberg.
PIR-Tor: Scalable anonymous communication using private
information retrieval. In Proceedings of the USENIX Security
Symposium, Aug. 2011.
[64] M. Mitzenmacher. The power of two choices in randomized load
balancing. IEEE Transactions on Parallel and Distributed
Systems, 12(10), Oct. 2001.
computationally-private information retrieval with constant
communication rate. In Proceedings of the International
Conference on Practice and Theory in Public Key Cryptography
(PKC), May 2010.
[65] K. Ousterhout, P. Wendell, M. Zaharia, and I. Stoica. Sparrow:
Distributed, low latency scheduling. In Proceedings of the ACM
Symposium on Operating Systems Principles (SOSP), Nov. 2013.
[66] R. Pagh and F. F. Rodler. Cuckoo hashing. In Proceedings of the
[49] T. Gupta, N. Crooks, W. Mulhern, S. Setty, L. Alvisi, and
M. Walﬁsh. Scalable and private media consumption with
Popcorn. In Proceedings of the USENIX Symposium on
Networked Systems Design and Implementation (NSDI), Mar.
2016.
[50] R. Henry. Polynomial batch codes for efﬁcient IT-PIR. In
Proceedings of the Privacy Enhancing Technologies Symposium
(PETS), July 2016.
[51] R. Henry, Y. Huang, and I. Goldberg. One (block) size ﬁts all:
PIR and SPIR with variable-length records via multi-block
queries. In Proceedings of the Network and Distributed System
Security Symposium (NDSS), Feb. 2013.
[52] Y. Ishai, E. Kushilevitz, R. Ostrovsky, and A. Sahai. Batch codes
and their applications. In Proceedings of the ACM Symposium
on Theory of Computing (STOC), June 2004.
[53] D. Karger, E. Lehman, T. Leighton, R. Panigrahy, M. Levine,
and D. Lewin. Consistent hashing and random trees: distributed
caching protocols for relieving hot spots on the world wide web.
In Proceedings of the ACM Symposium on Theory of Computing
(STOC), May 1997.
[54] P. Key, L. Massoulié, and D. Towsley. Path selection and
multipath congestion control. In Proceedings of the IEEE
International Conference on Computer Communications
(INFOCOM), May 2007.
European Symposium on Algorithms (ESA), Aug. 2001.
[67] M. B. Paterson, D. R. Stinson, and R. Wei. Combinatorial batch
codes. Advances in Mathematics of Communications (AMC),
3(1), Feb. 2009.
[68] B. Pinkas, T. Schneider, and M. Zohner. Scalable private set
intersection based on OT extension. ACM Transactions on
Privacy and Security, 21(2), Jan. 2018.
[69] A. S. Rawat, Z. Song, A. G. Dimakis, and A. Gál. Batch codes
through dense graphs without short cycles. IEEE Transactions
on Information Theory, 62(4), Apr. 2016.
[70] N. Silberstein. Fractional repetition and erasure batch codes. In
Proceedings of the International Castle Meeting on Coding
Theory and Applications, Sept. 2014.
[71] N. Silberstein and T. Etzion. Optimal fractional repetittion codes
and fractional repetition batch codes. In Proceedings of the
IEEE International Symposium on Information Theory (ISIT),
June 2015.
[72] J. P. Stern. A new and efﬁcient all-or-nothing disclosure of
secrets protocol. In International Conference on the Theory and
Application of Cryptology and Information Security
(ASIACRYPT), Oct. 1998.
[73] V. Strassen. Gaussian elimination is not optimal. Numerische
Mathematik, 13(4), Aug. 1969.
[74] K. Talwar and U. Wieder. Balanced allocations: the weighted
[55] M. Khosla. Balls into bins made faster. In Proceedings of the
European Symposium on Algorithms (ESA), Sept. 2013.
case. In Proceedings of the ACM Symposium on Theory of
Computing (STOC), June 2007.
[56] A. Kiayias, N. Leonardos, H. Lipmaa, K. Pavlyk, and Q. Tang.
[75] B. Vöcking. How asymmetry helps load balancing. Journal of
Optimal rate private information retrieval from homomorphic
encryption. In Proceedings of the Privacy Enhancing
the ACM, 50(4), 2003.
[76] Z. Wang, H. M. Kiah, and Y. Cassuto. Optimal binary switch
978
Authorized licensed use limited to: IEEE Xplore. Downloaded on March 18,2021 at 12:31:59 UTC from IEEE Xplore.  Restrictions apply. 
codes with small query size. In Proceedings of the IEEE
International Symposium on Information Theory (ISIT), June
2015.
[77] Z. Wang, O. Shaked, Y. Cassuto, and J. Bruck. Codes for
network switches. In Proceedings of the IEEE International
Symposium on Information Theory (ISIT), July 2013.
[78] X. Yi, M. G. Kaosar, R. Paulet, and E. Bertino. Single-database
private information retrieval from fully homomorphic encryption.
IEEE Transactions on Knowledge and Data Engineering, 25(5),
May 2013.
979
Authorized licensed use limited to: IEEE Xplore. Downloaded on March 18,2021 at 12:31:59 UTC from IEEE Xplore.  Restrictions apply.