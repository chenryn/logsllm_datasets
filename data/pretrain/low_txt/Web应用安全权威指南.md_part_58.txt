### **7.4.2 恶意软件的感染途径**

根据独立行政法人信息处理推进机构的调查 [11]，恶意软件的主要感染途径如图 7-13 所示。调查显示，电子邮件是主要的传播渠道，占 45.2%；上网浏览网页占 48.3%；外置存储设备（如 U 盘、移动硬盘等）和外部设备（如带入公司的客户 PC 等）占 48%（该调查为多项选择）。

[11] 2009 年日本国内信息安全事件受害情况调查报告地址：[此处插入链接]

![{%}](Image00252.jpg)
**图 7-13 个人电脑病毒的入侵途径**

从上述数据可以看出，通过浏览网页、查看邮件以及使用外置存储设备等方式传播和感染病毒的情况较为常见。然而，在 Web 服务器上，由于这些操作较少发生，因此利用系统漏洞成为主要的感染途径。

通常情况下，谈到恶意软件的防范措施时，许多人首先会想到防病毒软件。但在 Web 服务器上安装防病毒软件的比例并不高，这是因为服务器上的感染途径与普通客户端 PC 有所不同。

### **7.4.3 Web 网站恶意软件防范对策概要**

基于感染途径的不同，Web 服务器上的恶意软件防范措施应包括以下几点：

- 定期进行服务器漏洞修复
- 不在服务器上安装或运行来源不明的软件
- 避免在服务器上进行无关操作（如浏览网页或查看邮件）
- 不在服务器上使用 USB 等外部存储设备
- 将 Web 服务器与公司内部网络隔离
- 确保访问服务器的客户端 PC 安装了防病毒软件并保持病毒库更新
- 通过 Windows Update 等方式在客户端 PC 上安装最新的安全补丁

首先，建立一个能够切实执行上述措施的机制。如果仍感到不安（例如无法及时实施漏洞修复），可以考虑在服务器上安装防病毒软件。

### **7.4.4 如何确保服务器不被恶意软件感染**

Web 服务器感染恶意软件的途径主要包括：

- 利用 Web 应用的文件上传漏洞（参见 4.12 节）
- 利用 Web 网站的漏洞进行内容篡改（参见 7.1 节）
- 通过 FTP 等管理软件非法登录（参见 7.1 节）
- 管理服务器的 PC 感染恶意软件后传播至服务器（参见 7.4.3 节）
- 网站内容被恶意软件感染（参见 7.4.3 节）

除了文件上传功能漏洞外，其他途径均可通过本章所述的方法进行防范。关于文件上传漏洞的预防，将在后续章节中详细讨论。

#### **探讨是否需要制定针对恶意软件的防范措施**

用户上传文件（如图片、免费软件、PDF 文档等）的恶意软件防范责任应由以下三方共同承担：

- Web 网站运营者
- 上传文件的用户
- 下载或查看文件的用户

网站应根据自身特点决定是否采取防病毒措施。具体判断依据如下：

- 上传文件的公开范围
- 上传文件是否有明确的责任人
- 谁对上传文件负主要责任
- 除防病毒软件外，是否有其他检查方法

#### **制定病毒防范政策并向用户公开**

在决定是否采取防病毒措施后，应以网站用户规约的形式向用户公开并实施。公开内容可包括：

- 防范病毒的方法（若不采取防病毒措施也需明确说明）
- 即使采取防病毒措施，也不可能完全查出所有病毒，感染风险仍然存在
- 用户需自行负责（建议用户使用防病毒软件并保持病毒库更新）
- 作为网站运营方不对用户感染病毒承担责任

以上条目是一般性内容，各网站应根据自身实际情况制定符合自身特点的病毒防范政策。

#### **使用防病毒软件**

对用户上传的文件进行病毒扫描的方法有：

- 在服务器上安装防病毒软件，并将文件上传目录设置为扫描对象
- 使用防病毒网关
- 利用防病毒软件提供的 API 在代码中进行病毒扫描

详细信息可咨询防病毒软件公司或代理商。

如果由网站进行病毒检查，可以参考微软的免费网盘 Windows Live SkyDrive [12] 的做法，参见下图 [13]。

[12] Windows Live SkyDrive
[13] 页面显示的文件 eicar.com 并非真正的病毒文件，而是用于测试防病毒软件的测试文件。可在 [此处插入链接] 下载。

![{%}](Image00253.jpg)
**图 7-14 Web 侧进行病毒扫描的例子（Windows Live SkyDrive）**

> **专栏：Web 网站的防病毒对策和 Gumblar 的关系**
>
> 本章提到的一些防病毒软件对策对抵御 Gumblar 也有很好的效果。
>
> "Gumblar" 是一种结合了 Web 网页篡改和通过浏览网页感染（仅浏览网页就会被感染的病毒）两种方法的病毒传播方式。
>
> Gumblar 为了扩大病毒传播范围，会盗取 FTP 用户名和密码，然后用这些账号信息篡改网站内容，进而感染浏览这些网站的用户。
>
> 如果采用本章介绍的安全防范措施，使用公钥认证的 SCP 或 SFTP 代替传统的 FTP，并加上 IP 访问限制，就可以预防非法登录攻击。此外，如果客户端 PC 安装了防病毒软件，也可以避免被病毒感染。
>
> 本章介绍的对策虽然都是最基本的内容，但如果熟练运用这些方法，自然也能抵御 Gumblar。
>
> 关于 Gumblar 的详细信息，可以参考 [1]。
>
> **参考文献**
>
> [1] 独立行政法人信息处理推进机构（IPA）。2010 年 2 月 3 日。计算机病毒·非法访问的报告状况 [1 月份]。参考日期：2010 年 12 月 2 日，参考网址：[此处插入链接]
>
> COLUMN END

## **7.5 总结**

本章围绕提高 Web 网站的安全性，主要介绍了以下几种方法：

- 针对 Web 服务器漏洞的对策
- 由管理软件导致的非法登录对策
- 防范伪装攻击的对策
- 防范网络监听和篡改的对策
- 防范恶意软件的对策

上述每种方法都是针对常见的 Web 网站攻击手段的防范措施。这些服务器对策及应用程序本身的安全防范措施，对于确保网站安全性至关重要。请各位参考本章内容来提高网站的安全性。

另外，关于如何防范钓鱼攻击，请参考独立行政法人产业技术综合研究所的“建立安全 Web 网站的铁则” [1]。

**参考文献**

[1] 独立行政法人产业技术综合研究所。2007 年 3 月 23 日。信息安全研究中心。参考日期：2010 年 12 月 4 日，参考网址：[此处插入链接]

# **第 8 章 开发安全的 Web 应用所需要的管理**

本章将讲解开发安全的 Web 应用所需的管理工作。这一章主要面向发包方（甲方）的相关人员以及实际进行开发（承包方，乙方）的项目经理。

## **8.1 开发管理中的安全对策概要**

开发管理可以从开发体制和开发过程两方面进行控制。图 8-1 从软件开发中发包方和承包方的立场出发，按照开发过程的各个阶段（从规划、招标到运维），整理了涉及安全性的关键因素。首先，需要在开发开始之前制定开发体制，因此制定开发标准、培养信息安全责任人以及对开发团队进行安全教育显得尤为重要。图 8-1 描述了项目双方在开发过程中各阶段需要注意的事项。

![{%}](Image00254.jpg)
**图 8-1 开发安全的应用程序所需的管理概要**

## **8.2 开发体制**

完备的开发体制对于开发安全的应用至关重要。一个好的开发体制应从开发标准等文档（物）和训练有素的团队（人）两方面着手。

- **开发标准的制定**

  根据笔者的咨询经验，对于开发安全的应用来说，性价比最高的措施就是整理出一份好的开发标准（安全指南）。一个好的开发标准应满足以下条件：

  - 内容精简实用
  - 方便查找相关内容
  - 明确记载应实施的措施
  - 持续改进

  虽然越来越多的企业开始制定开发标准，但许多标准文件内容冗长且抽象，阅读起来费力。开发标准是给开发工程师阅读的，因此只选取最有用的标准，将其做得简洁一些，有助于降低开发成本。

  即使开发工作外包给其他公司，也应该制定一份开发标准，在招标时作为安全性需求附件提供给投标方，这样也能取得很好的效果。

  开发标准中应包含以下重要项目：

  - 针对每种漏洞的应对方法
  - 用户认证、会话管理、日志输出等实现方法
  - 各阶段的评审（Review）和测试方法（时间、人员、对象、方法）
  - 项目验收（发布）评判标准（人员、时间、具体合格标准）

- **教育培训**

  尽管很多企业制定了开发标准，但真正能有效使用的却很少。原因可能是开发标准内容不切实际，或是团队（或公司）尚未建立严格遵守开发标准的组织框架。

  为了按照开发标准进行开发，需要遵循以下要点：

  - 开发标准本身的内容（参见上面内容）
  - 在团队内展开开发标准培训
  - 通过设计评审和代码评审检查开发标准的执行情况

  其中，开发标准培训的关键点包括：

  - 事件和事例的介绍（提高大家对安全性的重视程度）
  - 常见漏洞的原理及其影响
  - 必须遵守的事项

  此外，每个团队最好都能培养出自己团队内部的安全责任人。安全负责人的主要职责包括：

  - 制定和维护开发标准
  - 展开开发标准培训
  - 参加评审
  - 进行安全测试
  - 监测各种漏洞信息

  以安全负责人为中心，不断完善开发标准的同时，持续对开发团队进行安全培训，可以提高团队开发安全应用程序的能力。

## **8.3 开发过程**

本节将对开发安全应用程序的开发流程进行说明。以下说明虽然以应用程序外包开发为例，但公司内部开发时，除了角色不同之外，所需实施的内容基本相同。

### **8.3.1 规划阶段的注意事项**

在规划阶段非常重要的一件事就是要确保开发中与安全性相关的内容的预算。