### 4.2 Temporal Characteristics of Performance

Our temporal analysis begins by examining the frequency of use of the Speedtest application in the target regions. Figure 7 illustrates the number of hourly invocations of the application for both cellular and WiFi over a two-week period in six representative metropolitan areas. The figures clearly show the characteristic diurnal patterns for each region and technology. We observe that in larger metro areas, there are hundreds of Speedtest app invocations per day, while in smaller metro areas, such as Lawrence, KS, there are typically fewer than 10 invocations per hour. Additionally, we note that in some markets, the number of invocations over WiFi and cellular access is similar (e.g., New York, NY, and Los Angeles, CA), but there are significant differences in other markets (e.g., Manchester, UK).

Next, we analyze the temporal characteristics of upload and download performance for both cellular and WiFi. Figure 8 presents the hourly average upload and download performance for each technology over a six-day period for one metro area from each of the five area types (note the different y-axis scales for cellular and WiFi). For cellular access, the performance in all but the largest metro area (New York, NY) is fairly consistent over time. This trend is similar across other metro areas in the five area types. The latency profiles in Table 5 and Figure 5 suggest that the better-engineered cellular infrastructure in large metro areas significantly impacts throughput performance. For WiFi connections, while the smallest metro areas generally have lower throughputs, the differences among metro areas are not as pronounced as they are for cellular connections.

In other results (not shown due to space constraints), we observe that performance in the largest metro areas is better during non-peak hours (i.e., early morning hours) compared to peak hours. For other metro areas, there is no statistically significant difference in measured performance between peak and non-peak hours. This finding contrasts with the distinct performance differences observed in peak versus off-peak hours in Sundaresan et al. [33], which were attributed to network load. Our data shows a lower degree of performance consistency, likely due to the higher overall variability in wireless access performance resulting from frequency band contention and overbuffering at edge routers.

**Main Findings:**
- Larger metro areas exhibit higher throughput performance over time, indicating that service providers invest more effort in engineering networks in more populous locations.
- There is some evidence of higher performance during off-peak hours and lower performance during peak hours, though to a lesser degree than reported for wired broadband access. This difference is likely due to the higher overall variability in wireless access performance, influenced by frequency band contention and overbuffering at edge routers.

### 4.3 Spatial Analysis of Subregions of Performance

Our spatial analysis of subregions within metro areas begins by considering spatial performance variations using the entire 15-week dataset. To generate our plots, we apply an inverse distance weighting interpolation [32] to the performance measurements over a region. Pixels are colored according to interpolated performance. In the plots, we use the following color symbology for upload/download performance: < 2 Mb/s: indigo. This same symbology is applied to both upload and download performance to make the plots visually comparable.

Figure 9 shows plots of interpolated upload performance for WiFi (top) and cellular (bottom) for three different metro regions (Chicago, IL, Manchester, UK, and Lawrence, KS, left to right, respectively) over the 15-week data set. The plots indicate that upload performance is spatially variable. Regions where the color is yellow or red suggest consistently poor performance.

We also observe that although WiFi upload performance is, on average, at least twice as fast as cellular performance (c.f. Table 4), the spatial performance characteristics reveal a more complex picture. For the Chicago, IL metro area, WiFi upload performance is better across the entire region. However, in Manchester, UK, there is a clear separation in WiFi upload performance between areas closer to the city center and surrounding, more rural areas. Although this pattern is less clear for cellular upload performance in Manchester, the areas of highest performance still generally lie closer to the city center, with larger and more prevalent areas of poor performance in surrounding, less urban areas. A similar observation holds for the Lawrence, KS metro area and other areas (not shown). Note that since the Chicago, IL metro area is extremely large, this pattern is not observable in the plots shown; expanding the plotted region reveals poorer performance further away from the city center.

Plots of download performance reveal similar variability, with subareas exhibiting consistently poor or good performance. In future work, we intend to further examine spatial performance characteristics and utilize available cell tower and WiFi maps, along with economic and population data, to identify the likely causes of the observed performance characteristics.

**Main Findings:**
- There is a high degree of spatial performance variability, with some metro areas showing performance degradation as one moves further away from the city center.
- Observed performance differences are likely due to the placement and density of cellular towers and WiFi base stations, as well as local contention due to load.

### 5. Related Work

There is a substantial and growing body of work examining the behavior and characteristics of WiFi networks. Studies most closely related to ours focus on analyzing mobile usage characteristics in live deployments. Birk et al. [13] analyze the behavior and characteristics of a city-wide commercial WiFi mesh network, based on a diverse set of measurements from a 250-node mesh operated by a single provider. Their assessment of client performance, based on targeted active measurements, showed temporal variations with peak performance during the day, contrasting with wireline networks. Sen et al. [30] propose a framework for client-assisted active measurement of wide-area wireless networks. Similar empirical studies of WiFi behavior in localized settings include [9, 15, 22, 27]. LaCurts and Balakrishnan [25] report results from an empirical study of 110 different WiFi mesh networks in diverse markets, though their study does not address client performance, which is our focus. While these studies expand the body of knowledge on WiFi behavior, our work differs in objective, scope, measurement details, and the inclusion of cellular performance analysis.

There is also a growing literature on empirical studies of cellular networks. Tan et al. [34] describe one of the first empirical studies of 3G cellular networks, focusing on a single large metro area and examining client throughput and other performance characteristics. Their results show a wide range of variable behaviors (diurnal patterns, expanded RTTs during peak hours, etc.) consistent with many of our observations. Other empirical studies of cellular network behavior include [24, 26, 31]. Recent studies have focused on smartphone performance, such as Falaki et al. [20], who use instrumented handsets to study diversity in smartphone traffic characteristics, and Huang et al. [23], who use a purpose-built application deployed on a large number of handsets to study smartphone application performance. Shaﬁq et al. [31] and Elmokashfi et al. [18] recently examined cellular network performance characteristics, highlighting the impact of the topology of the cellular backhaul network on performance. Our work differs from these in its scope and focus on comparative analysis of cellular and WiFi.

Several prior studies investigate cellular and WiFi performance simultaneously. Balasubramanian et al. [10] address the combined use of cellular and WiFi in a vehicular setting, considering availability in three cities. Deshpande et al. [17] evaluate cellular and WiFi performance in the New York metro area, also in a vehicular setting, using a laptop driven throughout the target area. Their results highlight the widely available, lower performance characteristics of cellular versus the lower availability, higher performance characteristics of WiFi. While there are similarities between these studies and our own, our results complement and expand the prior work by reporting client performance in diverse markets using a larger body of crowd-sourced data.

### 6. Summary and Conclusions

Cellular and 802.11 WiFi are the de facto connectivity options for today's mobile users. The increasing availability of handsets and tablets that offer both connectivity options, coupled with the explosion of applications demanding high performance, means that users are sensitive to throughput performance for each technology. In this paper, we present a measurement study of cellular and WiFi performance using crowd-sourced data from the widely used throughput testing application, Speedtest.net.

Our results reveal a wide range of characteristics of cellular and WiFi performance. Raw comparisons show that WiFi provides superior download performance, with maximum WiFi performance varying widely. The difference in upload performance is much smaller but highly variable. WiFi latency measurements are at least a factor of two lower than cellular latency in all areas, but the consistency in latency is often better with cellular access. Overall, we find performance consistency for wireless access networks to be much lower than previously reported for wired networks. Temporal analysis reveals that performance is sensitive to the time of day in the largest metro areas, with performance decreasing for both cellular and WiFi during peak use hours. Comparisons between metro areas show that larger markets provide a consistently higher level of performance for both technologies, suggesting greater engineering effort and resources in more populous regions. However, analysis within more localized regions shows high variability in performance for both technologies in all markets.

While the emphasis of our study is on a broad comparison of cellular and WiFi in metro areas, our current results suggest several conclusions about mobile performance. First, while WiFi offers superior download performance, the relatively predictable level of cellular performance for some network providers, coupled with its ubiquity, makes it a compelling option for all but the most bandwidth-hungry apps. With the rollout of improved throughput access technologies like LTE, cellular may become the preferred option for wireless connectivity. Second, the stability and performance of both technologies in larger markets suggest that performance would be enhanced by further build-out of both WiFi and cellular infrastructure in smaller markets.

In future work, we plan to continue our investigation of Speedtest data. Specifically, we plan to expand the scope of the study by considering additional markets and drilling down on the data in greater detail to better understand variations in performance. We also plan to investigate hypotheses concerning provider backhaul infrastructure and its impact on access performance, overbuffering in access routers, and wireless access contention. We are considering how to augment the Speedtest measurement protocol to better understand these and other performance observations. Finally, we plan to conduct targeted, hypothesis-driven experiments in different markets using the Speedtest application to understand the root causes of observed performance results.

### Acknowledgements

This work was supported in part by NSF grants CNS-0716460, CNS-0831427, CNS-0905186, and CNS-1054985. Any opinions, findings, conclusions, or recommendations expressed in this material are those of the authors and do not necessarily reflect the views of the NSF.

We thank Ookla, Inc., and Andrew Bassett for generous access to the Speedtest.net performance data. We also thank Anton Kapella for his fruitful suggestions and input on this work.

### References

[1] Ulaanbaatar Statistics Bulletin. http://statis.ub.gov.mn, 2008.
[2] AntennaSearch.com. http://www.antennasearch.com, 2011.
[3] GeoNames Database. http://www.geonames.org, 2011.
[4] Kazakhstan Today. http://www.kt.kz, 2011.
[5] Ookla Documentation Wiki. http://wiki.ookla.com, 2011.
[6] Ookla, Inc. http://www.ookla.com, 2011.
[7] Speedtest.net. http://www.speedtest.net, 2011.
[8] Wireless Geographic Logging Engine. http://weigle.net, 2011.
[9] A. Balachandran, G. Voelker, P. Bahl, and P. Rangan. Characterizing User Behavior and Network Performance in a Public Wireless LAN. In Proceedings of ACM SIGMETRICS, Marina del Rey, CA, June 2002.
[10] A. Balasubramanian, R. Majahan, and A. Venkataramani. Augmenting Mobile 3G Using WiFi. In Proceedings of ACM MobiSys ’10, San Francisco, CA, June 2010.
[11] World Bank. World Indicators Development Database. http://siteresources.worldbank.org/DATASTATISTICS/, 2011.
[12] S. Bauer, D. Clark, and W. Lehr. Understanding Broadband Speed Measurements. In 38th Research Conference on Communication, Information and Internet Policy, September 2010.
[13] V. Birk, S. Rayanchu, S. Saha, S. Sen, V. Shrivastava, and S. Banerjee. A Measurement Study of a Commercial-grade Urban WiFi Mesh. In Proceedings of ACM Internet Measurement Conference, Vouliagmeni, Greece, October 2008.
[14] United States Census Bureau. Population and Housing Occupancy Status 2010. http://www.census.gov/popest/estimates.html, 2011.
[15] Y. Cheng, J. Bellardo, P. Benko, A. Snoeren, G. Voelker, and S. Savage. Solving the Puzzle of Enterprise 802.11 Analysis. In Proceedings of ACM SIGCOMM ’06, Pisa, Italy, August 2006.
[16] US Federal Communications Commission. Geographic Information Systems. http://wireless.fcc.gov, 2011.
[17] P. Deshpande, X. Hou, and S. Das. Performance Comparison of 3G and Metro-Scale WiFi for Vehicular Network Access. In Proceedings of ACM Internet Measurement Conference, Melbourne, Australia, November 2010.
[18] A. Elmokashfi, A. Kvalbein, J. Xiang, and K. Evensen. Characterizing Delays in Norwegian 3G Networks. In Passive and Active Measurement Conference, March 2012.
[19] ESRI. ArcGIS Geographic Information Systems. http://www.esri.com, 2011.
[20] H. Falaki, R. Mahajan, S. Kandula, D. Lymberopoulos, R. Govindan, and D. Estrin. Diversity in Smartphone Usage. In Proceedings of ACM MOBISYS ’10, San Francisco, CA, June 2010.
[21] J. Gettys and K. Nichols. Bufferbloat: Dark Buffers in the Internet. Queue, 9(11), November 2011.
[22] T. Henderson, D. Kotz, and I. Abyzov. The Changing Usage of a Mature Campus-wide Wireless Network. In Proceedings of ACM MOBICOM ’04, Philadelphia, PA, October 2004.
[23] J. Huang, Q. Xu, B. Tiwana, Z. Mao, M. Zhang, and P. Bahl. Anatomizing Application Performance on Smartphones. In Proceedings of ACM MobiSys ’10, San Francisco, CA, June 2010.
[24] K. Jang, M. Han, S. Cho, H. Ryu, J. Lee, and S. Moom. 3G and 3.5G Wireless Network Performance Measured from Moving Cars and High-speed Trains. In Proceedings of ACM MICNET ’09, Beijing, China, September 2009.
[25] K. LaCurts and H. Balakrishnan. Measurement and Analysis of Real-World 802.11 Mesh Networks. In Proceedings of ACM Internet Measurement Conference, Melbourne, Australia, November 2010.
[26] X. Liu, A. Sridharan, S. Machiraju, M. Seshadri, and H. Zang. Anatomizing Application Performance on Smartphones. In Proceedings of ACM MobiSys ’10, San Francisco, CA, June 2010.
[27] M. McNett and G. Voelker. Access and Mobility of Wireless PDA Users. ACM Mobile Computing and Communications Review, 9(2), April 2005.
[28] European Spatial Planning Observation Network. Study on Urban Functions. http://www.espon.eu/, 2007.
[29] M.A. Oliver and R. Webster. Kriging: A Method of Interpolation for Geographical Information Systems. Int. Journal of Geographic Information Systems, 4(3), 1990.
[30] S. Sen, J. Yoon, J. Hare, J. Ormont, and S. Banerjee. Can They Hear Me How?: A Case for a Client-Assisted Approach to Monitoring Wide-Area Wireless Networks. In Proceedings of ACM Internet Measurement Conference, Berlin, Germany, November 2011.
[31] M. Z. Shaﬁq, L. Ji, A. X. Liu, and J. Wang. Characterizing and Modeling Internet Traffic Dynamics of Cellular Devices. In Proceedings of ACM SIGMETRICS ’11, San Jose, CA, June 2011.
[32] D. Shepard. A Two-Dimensional Interpolation Function for Irregularly-Spaced Data. In Proceedings of the 1968 23rd ACM National Conference, ACM ’68, pages 517–524, 1968.
[33] S. Sundaresan, W. de Donato, N. Feamster, R. Teixeira, S. Crawford, and A. Pescapè. Broadband Internet Performance: A View from the Gateway. In Proceedings of ACM SIGCOMM ’11, Toronto, Canada, August 2011.
[34] F. Lam W. Tan and W. Lau. An Empirical Study on 3G Network Capacity and Performance. In Proceedings of IEEE INFOCOM, Anchorage, AK, May 2007.