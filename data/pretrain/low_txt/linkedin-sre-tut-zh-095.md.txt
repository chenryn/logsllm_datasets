# 循环时间（RTT）
在分布式服务或应用的整体性能中，延迟起着至关重要的作用。在这种环境中，主机之间的调用对于为用户提供服务至关重要。RTT（往返时间）是指数据包从发送方 A 到达接收方 B 并返回到 A 所需的时间，通常以毫秒为单位进行测量。这一指标对评估服务性能具有重要意义，特别是在不同服务器或服务之间进行调用时，以及影响可实现的 TCP 吞吐量。

当一个服务为了响应每个用户或客户端请求而多次调用其集群中的其他服务器或不同的服务（如身份验证、日志记录和数据库等）时，这种情况非常普遍。这些服务器可能位于不同的机柜内，甚至分布在同一个地区的不同数据中心。这在云解决方案中尤为常见，其中部署可能会跨越一个区域内多个地理位置分散的站点。随着 RTT 的增加，每次调用的响应时间也会相应延长，从而对最终发给用户的响应产生累积性的影响。

### RTT 与吞吐量的关系
RTT 和 TCP 吞吐量之间存在反比关系：随着 RTT 的增长，TCP 吞吐量会下降，类似于丢包对网络性能的影响。下面提供了一个基于 TCP 最大段大小 (MSS)、RTT 及丢包率来估算 TCP 吐量的公式：
![Diagram, schematic Description automatically generated](img/9285f6e5acbe34359cb9812802f4a7fc.png)

在数据中心内部，这种计算同样重要，因为客户可能会通过各种电信网络连接到由数据中心托管的服务。由于互联网路由策略的不确定性，导致了 RTT 的不稳定性。因此，在设计高效率的数据中心架构时，充分考虑 RTT 对系统性能的影响是非常必要的。