### 致谢

首先，我要感谢那些令人尊敬的合作作者们对本书的贡献和坦率的交流。此外，感谢Accuvant公司提供的宽松氛围，支持我撰写本书并从事其他研究工作。特别感谢Wiley出版社在整个过程中对作者撰写的激励和引导。最后，要感谢#droidsec、Android安全团队和高通安全团队的成员们，你们推动了Android安全的发展。
- Joshua J. Drake

我要感谢Lolanda Vilar鼓励我参与本书的撰写，并在我长时间守在电脑前时一如既往地支持我。感谢Ricard和Elena在我童年时期允许我追逐自己的梦想。感谢Wiley出版社和所有合作作者，我们一起度过了无数个日夜共同完成这本书。特别感谢Joshua Drake对我糟糕的英语提供了大量帮助。还要感谢viaForensics公司的同事们，我们一起完成了许多出色的技术研究。最后，感谢#droidsec IRC频道的所有伙伴们，以及G+上的Android安全社区、Nopcode、48bits和我在Twitter上关注的所有人，没有你们，我不可能跟得上移动安全领域的最新技术发展。
- Pau Oliva

我要感谢Sally，我生命中的挚爱，感谢她能够包容我。感谢我的家庭一直以来给我的鼓励。感谢Wiley出版社的编辑Carol和Ed提供的机会，感谢我的合作作者们与我分享这段虽然艰难但令人难忘的旅程。感谢Ben Nell、Craig Ingram、Kelly Lum、Chris Valasek、Jon Oberheide、Loukas K、John Cran和Patrick Schulz的支持和反馈，以及一路上支持和帮助过我的其他朋友。
- Zach Lanier

我要感谢我的女朋友Amity，我的家人、朋友和同事们的鼎力支持。此外，我要感谢我的顾问为这本书的写作付出了大量时间。特别感谢Joshua让这本书成功面世。
- Collin Mulliner

没有人比我的父亲Hiram O. Russell、母亲Imani Russell、弟弟Gabriel Russell和妹妹Mecca Russell更值得我感谢。我之所以能成为现在的我，离不开家人的支持和厚爱。父母给予了我无限的鼓励，弟弟和妹妹也不断地以他们的智慧、成就与品质打动我。你们是我生命中最重要的人。我还要感谢美丽的妻子Kimberly Ann Hartson，她一直包容我并在我生命中充当一个充满爱心和平静的力量。最后，我想感谢信息安全社区。这是一个非常独特的圈子，但它是我的“成长”家园。同事和研究人员（包括我的合著者）是我永恒的灵感之源，为我提供了获取新闻、八卦与理想目标的常规渠道，并让我对这方面的工作更感兴趣。我很荣幸有机会能够合作编撰本书。
- Stephen A. Ridley

我衷心感谢我的妻子Eva和儿子Jonathan，能够容忍我花时间写书，而不是去照顾他们。我爱你们。感谢Joshua将我们聚在一起让本书面世。
- Georg Wicherski

### 关于作者

**Joshua J. Drake** 是Accuvant LABS公司研究部门总监，专注于逆向工程、安全漏洞分析、挖掘与利用等领域的原创性研究。他在信息安全领域拥有十多年的研究经验，从1994年开始研究Linux安全，2009年开始研究Android安全，并于2012年开始为Android主流OEM提供咨询服务。他曾供职于Metasploit团队和VeriSign公司的iDefense实验室。在BlackHat USA 2012大会上，他和Georg成功演示了通过NFC攻破Android 4.0.1浏览器。Joshua曾在REcon、CanSecWest、RSA、Ruxcon/Breakpoint、Toorcon和DerbyCon等黑客会议上发表演讲。他在2013年赢得了Pwn2Own黑客大赛，并于2010年随ACMEPharm团队获得Defcon18 CTF决赛冠军。

**Pau Oliva Fora** 是viaForensics公司的移动安全工程师，此前在一家无线设备厂商担任研发工程师。自从2008年10月Android操作系统随T-Mobile G1推出后，他开始活跃于研究Android安全问题。他对智能手机安全的热情不仅体现在开发了大量的漏洞利用代码和工具上，还表现在其他方面，例如他在Android出现之前就担任了XDA开发者论坛的版主。他的工作是为一些主流的Android OEM提供咨询服务。对移动安全社区的亲身参与和近距离观察，让他特别兴奋地参与到这本描述移动安全本质的著作中。

**Zach Lanier** 是Duo Security公司的资深安全研究员，在信息安全的不同领域中有十多年的丰富经验。他从2009年开始进行移动与嵌入式安全研究，范围覆盖应用安全、平台安全（特别是Android）以及设备、网络与运营商安全。他的研究兴趣还包括攻击、防御和隐私增强技术。他曾在多个公开和内部的业界会议上发表过演讲，包括BlackHat、DEFCON、ShmooCon、RSA、Intel安全会议、Amazon ZonCon等。

**Collin Mulliner** 是美国东北大学的博士后研究员，主要研究兴趣是移动和嵌入式系统的安全和隐私，重点关注移动智能手机。他在该领域中的早期工作可追溯至1997年，当时他在为Palm OS开发应用。Collin以在彩信（MMS）和短信（SMS）安全方面的工作闻名。之前，他对漏洞分析和攻击技术更感兴趣，但最近他将关注点转移到了防御方向上，研究开发攻击缓解与应对措施。Collin在德国柏林科技大学获得计算机博士学位，之前分别在加州大学圣巴巴拉分校和达姆施塔特应用科技大学获得硕士和学士学位。

**Stephen A. Ridley**（他的朋友们这样称呼他）是一位安全研究员和技术作者，在软件开发、软件安全和逆向工程领域有十几年的经验。近年来，Stephen在除了南极洲的每个大陆上都演讲并展示了他在逆向工程和软件安全方面的研究成果。他曾是新型在线银行Simple.com的首席信息安全官，Matasano Security公司的资深研究员，以及一家美国国防部承包商的安全任务保障组创始成员。他精通安全漏洞研究、逆向工程和“攻击软件”，为美国国防部和情报部门提供技术支持。目前，Stephen是Xipiter（一家开发新型低能耗智能传感器设备的信息安全研发公司）的首席科学家。他的工作曾被NPR、NBC等电视台以及《连线》、《华盛顿邮报》、《快公司》、VentureBeat、Slashdot、The Register等媒体专题报道。

**Georg Wicherski** 是CrowdStrike公司的资深安全研究员，热衷于探索和修补计算机安全底层，手工调试私人定制的Shellcode，以及修改漏洞利用代码使其变得足够稳定与可靠。在加入CrowdStrike公司之前，Georg曾在卡巴斯基和迈克菲公司工作。在BlackHat USA 2012大会上，他和Joshua成功演示了通过NFC攻破Android 4.0.1浏览器。他曾在REcon、SyScan、BlackHat USA、BlackHat Japan、26C3、ph-Neutral、INBOT等会议上发表演讲。OldEurope是他的本地CTF战队，参加过无数黑客竞赛并多次赢得冠军。

### 版权声明

版权所有。此翻译版本根据授权出版。授权翻译自英文原版《Android Hacker's Handbook》，ISBN 9781118608647，由Joshua J. Drake, Pau Oliva Fora, Zach Lanier, Collin Mulliner, Stephen A. Ridley, Georg Wicherski编写，由John Wiley & Sons出版。未经原始版权持有人书面许可，不得以任何形式复制本书内容。

简体中文版由人民邮电出版社独家出版，授权自John Wiley & Sons, Inc.。本书封底贴有John Wiley & Sons, Inc.激光防伪标签，无标签者不得销售。版权所有，侵权必究。

### 目录

第1章 纵观Android生态圈
1.1 了解Android的根源
1.1.1 公司历史
1.1.2 版本历史
1.1.3 审视Android设备家族
1.1.4 主体开源
1.2 了解Android的利益相关者
1.2.1 谷歌
1.2.2 硬件厂商
1.2.3 移动通信运营商
1.2.4 开发者
1.2.5 用户
1.3 理解生态圈的复杂性
1.3.1 碎片化问题
1.3.2 兼容性
1.3.3 更新问题
1.3.4 安全性与开放性
1.3.5 公开披露
1.4 小结

第2章 Android的安全设计与架构
2.1 理解Android系统架构
2.2 理解安全边界和安全策略执行
2.2.1 Android沙盒
2.2.2 Android权限
2.3 深入理解各个层次
2.3.1 Android应用层
2.3.2 Android框架层
2.3.3 Dalvik虚拟机

第3章 Root Android设备
3.1 理解分区布局
3.2 引导加载程序的锁定与解锁
3.3 对未加锁引导加载程序的设备进行Root
3.4 对锁定引导加载程序的设备进行Root
3.4.1 在已启动系统中获取Root权限
3.4.2 NAND锁、临时性Root与永久性Root
3.4.3 对Root进行持久化
3.5 历史上的一些已知攻击
3.5.1 内核：Wunderbar/asroot
3.5.2 恢复：Volez
3.5.3 udev: Exploid
3.5.4 adbd: RageAgainstTheCage
3.5.5 Zygote: Zimperlich Zysploit
3.5.6 ashmem: KillinglnTheNameOf f psneuter
3.5.7 vold: GingerBreak
3.5.8 PowerVR: levitator
3.5.9 libsysutils: zergRush
3.5.10 内核：mempodroid