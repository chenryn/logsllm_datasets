# 网络攻击前的准备事项
## 作者与联系方式
- Canaan Kao
- Chuang Wang
- I-Ju Liao
- PI: EMAIL (请替换为实际电子邮件地址)

## 概要
- 动机
- 端口扫描基础
- 基于IDS/IDP的端口扫描检测
- 基于蜜罐的端口扫描检测
- SDN交换机的应用
- 长期观察
- 反僵尸网络项目遗留

## 个人简介
- 多年前，在大学期间撰写开源网管软件报告时，我抽签选择了Snort。
- 后来在一家从事IDS/IPS开发的公司工作了十多年。
- 在职业生涯的后期，我参与了教育部为期五年的反僵尸网络计划，并组织了四届台湾僵尸网络（BoT）研讨会。
- 请勿询问关于BoT2014的信息。
- 最近，我成为了某家防病毒公司的员工。

### 曾经演讲的主题
- **2010年**：家庭环境中的垃圾邮件源检测  
  - [详情](http://www.anti-botnet.edu.tw/content/confs/BoT2010.PPTs/B5.php)
- **2012年**：僵尸网络流量取证系统  
  - [详情](http://www.anti-botnet.edu.tw/content/confs/BoT2012.PPTs/B5.php)
- **2013年**：APT/恶意软件流量检测  
  - [详情](http://www.anti-botnet.edu.tw/content/confs/BoT2013.PPTs/B5.php)

### 术语解释
- **IDS**：不具备拦截功能的入侵检测系统（如Snort）
- **IPS**：具备拦截功能的入侵防御系统（如Snort-inline）
- **FW**：防火墙（例如NetFilter / iptables）
- **LAN**：以防火墙为界的内部网络
- **WAN**：以防火墙为界的外部网络
- **SDN**：软件定义网络

## 动机
- **内网威胁检测位置**
- **最佳检测时机**
- **事后检测是否足够？**
  - 如果恶意软件通过移动设备或其他途径进入内网，我们如何发现或阻止其活动？
  - 或者我们只能依赖于识别已感染主机的事后检测？
  - 当攻击流量不经过网关、防火墙、IDS或IPS时，还能否有效检测？

### IDS/IPS行业的公开秘密
- 对于网络攻击，厂商通常需要先获取攻击样本或恶意代码才能提高其产品的检测率。
- 因此面对零日漏洞或新型攻击手段时，被成功攻击的风险较大。
- 相对于僵尸网络/APT等高级持续性威胁，事后的检测更为可靠。
- 但是...

### 智能家居时代的来临
- [来源：苹果日报] 家庭生活越来越多地依赖于互联网控制。
- 问题：如果存在针对智能冰箱的恶意软件且已植入你的移动设备，它如何找到并攻击你家中的智能冰箱？

## 端口扫描基础知识
- **两种主要类型**：
  - 垂直扫描（单个目标主机）
  - 水平扫描（单一服务端口）
- **目的**：
  - 判断目标机器是否在线
  - 如果在线，则进一步检查特定服务是否开放
- **不同工具的扫描方式**：
  - Nmap
  - Bot/Malware
  - Internet Scan
- **案例分析**：
  - Nmap（每秒约可扫描1000个端口）
  - Perl-Bot(Eskent) 和 IlegalBrain_PerlBot 的扫描行为
  - 使用Masscan进行大规模扫描

### IDS/IDP端口扫描检测
- Snort v2.9.2 默认配置下端口扫描检测是关闭状态，设置较低的检测水平以减少误报。
- 计算单位时间内发生的扫描事件次数作为阈值。
- 如果购买了具有端口扫描检测能力的安全设备，应如何验证其有效性？
- 当扫描流量绕过IDS/IPS/FW时，这些安全措施可能失效。

### 蜜罐技术应用于端口扫描检测
- 由于局域网内部的攻击无法被防火墙和入侵检测系统捕捉到，因此可以使用蜜罐来监测此类攻击。
- **蜜罐定义**：任何能够诱导攻击者展示其意图的系统，可以是一台服务器、虚拟机或客户端等。
- **实现方法**：将蜜罐放置于待保护主机附近，并设置类似IP地址。当蜜罐收到对未开放端口的连接请求时，即可判断发起者为潜在的扫描器。