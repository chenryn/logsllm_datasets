## IMPORTANT: DevOps Kit (AzSK) is being sunset by the end of FY21. For more details, see [here](../../../ReleaseNotes/AzSKSunsetNotice.md).

----------------------------------------------

### Data Lake Analytics Controls and Rationale

| **Control** | **Description & Rationale** | **Severity** | **Automated Fix Script** |
|-------------|-----------------------------|--------------|--------------------------|
| **Data Lake Analytics Creator Access Control** | The creator of the Data Lake Analytics must be granted only the required Role-Based Access Control (RBAC) access on the Subscription/Resource Group/Resource. Leveraging RBAC to grant minimum access ensures that users have just enough permissions to perform their tasks, thereby minimizing resource exposure in case of a user or service account compromise. | Medium | No | No |
| **Authentication Using AAD-Backed Credentials** | All Data Lake Analytics users and service principals must be authenticated using Azure Active Directory (AAD) backed credentials. This ensures a high level of assurance in the user's identity, as all enterprise subscriptions are automatically associated with their enterprise directory (e.g., xxx.onmicrosoft.com). | High | No | No |
| **Minimum Required Permissions for Users/Identities** | All users and identities must be granted the minimum required permissions using RBAC. Granting minimum access minimizes resource exposure in case of a user or service account compromise. | Medium | Yes | No |
| **Least Required ACLs for Developers** | Data Lake Analytics developers (users or service principals) must have the least required Access Control Lists (ACLs) on the Catalog/Database and Data Lake Store file system. This ensures that U-SQL jobs can only perform intended read/write operations, minimizing data exposure in case of credential leaks or faulty job programming. | Medium | No | No |
| **Secure Storage Account Data Source** | The storage account data source must be added securely using PowerShell commands. This eliminates the risk of exposing the storage account key, as it is not displayed in the GUI. | Medium | No | No |
| **Secure Storage of Secrets** | Secrets used to access SQL Azure, SQL VM, or SQL Data Warehouse must be securely stored under Catalog database credentials. Storing credentials in plain text in U-SQL jobs increases the risk of compromise, especially if the code is checked into a repository. | High | No | No |
| **Upload U-SQL Scripts from Secured/Trusted Location** | U-SQL script files must be uploaded from a secured/trusted location. The ADLA U-SQL File Import wizard does not impose restrictions on file format or scan for security issues. If files are uploaded from an insecure location, they can be tampered with, leading to compromised ADLA jobs and data. | High | No | No |
| **Enable Diagnostics Logs with 365-Day Retention** | Diagnostics logs must be enabled with a retention period of at least 365 days. Long-term log retention is essential for recreating activity trails during investigations and meeting compliance requirements. | Medium | Yes | No |
| **Encrypt Sensitive Data at Rest** | Sensitive data must be encrypted at rest. This minimizes the risk of data loss from physical theft and helps meet regulatory compliance requirements. | High | Yes | No |
| **Encrypt Sensitive Data in Transit** | Sensitive data must be encrypted in transit using HTTPS. This ensures server/service authentication and protects data from man-in-the-middle, eavesdropping, and session-hijacking attacks. | High | No | No |
| **Backup and Disaster Recovery Planning** | Backup and disaster recovery must be planned for the default Data Lake Store account. Data Lake Analytics does not offer built-in features for backup and disaster recovery, so teams must ensure adequate backups of data and jobs (catalog, code, etc.) when processing critical workloads. | Medium | No | No |
| **Periodic Review of Diagnostic and Activity Logs** | Diagnostic and activity logs for Data Lake Analytics should be reviewed periodically. Regular reviews help identify anomalous activity early, preventing major compromises. | Medium | No | No |

This table provides a clear and organized overview of the controls, their descriptions, rationale, severity, and whether automated fix scripts are available.