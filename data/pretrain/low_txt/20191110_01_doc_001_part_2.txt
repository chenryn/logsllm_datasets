# PostgreSQL 生态概览与新版本特性精选

## 目录
- PG 生态
- PG 新版本开发者特性精选
- PG 与 Oracle 的全方位对比

## PG 生态

### 厂商
- **微软**: Citus
- **IBM**: EDB
- **国内厂商**:
  - 瀚高
  - 优炫
  - 恒辉
  - 云图
  - 亚信
  - Pivotal (GPDB)
  - 偶数
  - 南大富士通
  - Zilliz
- **开源社区**:
  - PG中国社区
  - 开源联盟PG分会

### 用户
- **企业用户**:
  - 平安
  - 国家电网
  - 邮储银行
  - 阿里
  - 腾讯
  - 探探
  - 去哪儿
  - 海鼎
  - 苏宁
  - 斗鱼
  - 恩墨
  - 晟数
  - 中兴
  - 国信
- **政府机构**:
  - 各级政府部门 (gov)

### 培训和支持
- **培训公司**:
  - Apple
  - Lazada
  - Red Hat
  - 阿里云大学
  - 高德
  - 华为
- **支持公司**:
  - 多家国内外公司提供代码级服务

### 社区和分会
- **全球财富**
- **PostgreSQL 1000的用户**
- **PG重新定义开源数据库**

## PG 新版本开发者特性精选

### PG 11
- **并行计算增强**:
  - 自动计算并行度，覆盖几乎所有复杂查询。
  - 几乎线性提升性能，包括表扫描、索引扫描、SQL过滤等。
  - 不需要改写SQL，平均提速20倍以上。
  - 支持JOIN、子查询、聚合、自定义函数、分区表、外部表等。
  
- **btree index include**:
  - 类似于B+树数据聚集，减少IO操作。
  - 示例: `CREATE INDEX idx_t1_1 ON t1 (id) INCLUDE (c1, c2, c3, info, crt_time);`
  - 解决数据离散存储导致的查询慢问题。

- **添加字段（含默认值）更快**:
  - 提升了添加字段的速度，特别是在大型表中。

### PG 12
- **AM接口**:
  - 提供更灵活的访问方法。
- **分区表性能提升**:
  - 大量分区性能提升，例如1000个分区时性能提升469倍。
- **GiST index include**:
  - 适用于轨迹和时空搜索，按结果集聚集存储，减少回表IO放大。
- **日志采样**:
  - `log_statement_sample_rate` 和 `log_transaction_sample_rate` 提供更细粒度的日志控制。
- **自定义统计信息支持多列 MCV**:
  - 提高查询优化器的准确性。
- **Reindex concurrently**:
  - 不堵塞写操作，提高可用性。
- **SQL/JSON path language**:
  - 更强大的JSON处理能力。
- **Generated columns**:
  - 支持生成列，简化数据维护。
- **Case-insensitive and accent-insensitive grouping and ordering**:
  - 提供更灵活的数据排序和分组。

## PG 与 Oracle 的全方位对比

### 核心功能
- **数据类型**:
  - PostgreSQL支持多种数据类型，如普通类型、数组、JSON、KV、GIS、多维、range等。
- **索引**:
  - 支持多种索引类型，如btree、hash、gin、gist、spgist、brin、rum等。
- **FDW**:
  - 支持多种外部数据源，如Postgres、MySQL、Oracle、MongoDB、MSSQL、JDBC、ODBC、Hadoop等。
- **存储**:
  - 支持多种存储方式，如heap、zheap、zedstore等。
- **SQL语法兼容性**:
  - 内置函数、操作符、自定义函数、类型等丰富。
- **高可用性**:
  - 在线备份、增量备份、增量恢复、实时容灾、审计等功能齐全。
- **扩展功能**:
  - 插件数不胜数，如GIS、路由、图、推荐、分布式、MM、流计算、多维向量等。

### 性能和稳定性
- **并行计算**:
  - 自动计算并行度，提高复杂查询性能。
- **分区表**:
  - 大量分区性能显著提升。
- **日志采样**:
  - 提供细粒度的日志控制。
- **自定义统计信息**:
  - 提高查询优化器的准确性。
- **自动垃圾回收**:
  - 自动调度，波动小。
- **锁粒度**:
  - 细粒度锁，读写不冲突，行锁不耗费内存，没有锁放大问题。

### 安全性和管理
- **安全性**:
  - ACL、认证过程加密、SSL、敏感信息掩码、TDE、存储级加密、权限控制等。
- **维护**:
  - 日常维护、性能监控、优化、诊断、错误代码解读等。
- **售后保障**:
  - 云、数据库厂商、支持公司、培训公司、高校等提供全面支持。
- **使用便捷**:
  - 丰富的GUI和CLI工具，函数开发、调试、集成框架等。

### 社区和文档
- **社区**:
  - 全球分布，涉及众多商业巨头。
- **文档**:
  - 手册、源码、书籍、视频、培训、认证、博客、微信、QQ、钉钉群等丰富的资源。

## 结语
感谢大家的关注和支持。我们每周都会在3000+人的大群中进行直播，欢迎大家加入我们的技术进阶之旅。

谢谢！