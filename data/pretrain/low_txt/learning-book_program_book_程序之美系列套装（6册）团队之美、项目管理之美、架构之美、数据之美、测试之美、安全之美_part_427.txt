## Page 2475
家长们如何访问这种日程表？保姆有权选择哪些人可以访问该日程表，这是通过计算SHA256（家长的姓名+家长的密码）来实现的。然后，他们会在类似于图15-4所示的访问表中添加一条记录。

---
## Page 2476
家长们可以通过输入他们的姓名和密码登录系统以生成他们的别名。随后，他们可以查询这个访问表来查找保姆姓名的别名。这使得家长们能够查看日程表，确认是否有合适的保姆可用。如果某位家长的别名未被保姆添加到第二张表中，则该家长将无法访问日程表。这样，保姆的信息就处于受控状态。
那么家长们如何知道具体的保姆是谁呢？第三列包含了使用家长的姓名与密码加密后的保姆姓名。因此，每一行中的保姆真实姓名都可以由相应的家长姓名与密码解密得出。在这种情况下，密钥的计算方式略有不同，即SHA256（家长的密码+家长的姓名）。这样一来，家长们只需记住一对信息（姓名和密码），即可计算出他们的别名和密钥，但其他人无法从公开的别名中猜测出秘密密钥。

---
## Page 2477
### 15.3 为便利而存储的个人数据
我的系统最大的优点在于保护了商店为了方便而记录的数据。许多实体店和在线商城都会保存客户的送货地址和信用卡信息，以便于未来交易时避免再次输入这些信息的麻烦。
一种保护这些信息的方法是结合传统的加密技术和单向散列函数。具体来说，可以使用单向散列函数对姓名和密码进行计算以生成密钥，然后用该密钥对地址和信用卡号进行加密。例如，可以使用SHA256（密码+姓名+填充字符）计算密钥，其中填充字符是一种额外的随机值，确保生成的密钥不同于用来替代姓名的数字别名SHA256（密码+姓名）。
在商品发货之前，商家需要一直跟踪客户的送货地址。之后，他们可以删除该数据，仅保留加密版本，直到客户再次光顾。

### 15.4 如何权衡
将数据库转换成难以理解的二进制数据是否值得？以下是我认为这种方法的一些优势：
- **更低的安全成本**：这些二进制数据对任何拥有管理权限的人都没有用处。这种系统甚至更易于将整个数据库分发给多个网站，因为每个单独的网站所拥有的信息较少。如果数据不可读，泄密就不再是问题。
- **更低的计算成本**：服务器不需要对数据进行加密或使用SSL会话协议。客户端有足够的计算周期来处理这些任务。
- **更有效的数据库操作**：一个好的单向散列函数可以使数据库密钥均匀分布于散列空间。使用类似姓名这样的字符串会导致常见单词和姓名的聚集，从而使数据库索引变慢。

然而，使用这种方法也存在一些代价：
- **没有负责恢复的超级用户**：如果服务器管理员没有权限读取数据，他也没有修改数据的权限。中心不能主动为半透明化数据库的商店提供服务，除非用户提供其别名才能启动服务。商店也无法发送如“你曾购买A、B和C，所以我们认为你可能也会喜欢correlation_function（A, B, C）”这样的电子邮件通知。有些人认为这是一种功能，因为它减少了垃圾邮件。
- **客户端成为攻击目标**：如果服务器是中立的，黑客可能会转而攻击客户端，利用强大的密钥探测器、社会工程和其他恶意软件等手段。用户可能不是好的系统管理员，不擅长阻止这种行为。但是，攻击一个单独的客户端的危害远小于攻击一个中央服务器。
- **加密数据更加脆弱**：对于姓名来说，简单的拼写错误是可以恢复的，但对于SHA256（x）来说，一位的变化都会使结果产生巨大差异。

这些考虑表明，这种方法最适合保护那些较为温和的敏感数据，即使丢失也不会造成严重后果。例如，失去访问某家商店购物历史权限的顾客不会遭受重大不便，但无法访问病历的病人则可能面临更大的麻烦。这种方法的一个最佳用途是用于多层次数据库。医院可以将病人的记录原封不动地保存在一个中央服务器中，同时使用半透明化方法将数据发送给研究人员进行统计分析。研究人员可以使用真实数据而不必担心隐私问题（Schneier, 2007）。

[1] 在《Translucent Databases》中介绍了几种减少这种危险的方法，在某些情况下，甚至可以消除这种危险。

---
## Page 2479
### 15.5 进一步深入
单向散列函数只是解决数据保护问题的开始。密码学家发明的其他传统数学工具也可以用于隐私保护。例如，隐写术的应用可以将隐藏的数据层与真实层混合，有效地创建双重数据库。只有拥有正确隐写层解密密钥的用户才能提取第二层的数据。公钥加密方案也可以创建一种单向函数，但只要拥有私钥的人就可以对数据库进行解密。在《Translucent Databases》（参见15.6节）中详细介绍了这些方案。

数字堡垒是传统存储敏感信息的方法。最好的数据库公司有许多天才，他们为数据加上了多层坚固的保护，包括访问级别、安全模型和多种角色管理方案，以允许正确的查询并阻止可疑行为。这些“不可攻破”的系统有其地位，但通常复杂、昂贵且脆弱。最好的方法是不保存任何真实数据，让用户自己掌握信息的命运。

### 15.6 参考资料
- 匿名，《纽约时报》，2003年9月23日，“Betraying One's Passengers”
- David Brin，《The Transparent Society》，New York: Basic Books，1998
- Fox Butterfield，《纽约时报》，2001年7月7日，“Theft of Painkiller Reflects Its Popularity on the Street”
- Amitai Etzioni，《纽约时报》，1999年4月6日，“Privacy Ain't Dead Yet”
- Barry Meier，《纽约时报》，2007年7月21日，“3 Executives Spared Prison in OxyContin Case”
- Eric Pfanner，《纽约时报》，2007年7月22日，“Data Leak in Britain Affects 25 Million”
- Philip Shenon、John Schwartz，《纽约时报》，2003年9月23日，“JetBlue Target Of Inquiries By 2 Agencies”
- Bruce Schneier，《在线》，2007年12月13日，“Why 'Anonymous' Data Sometimes Isn't”，http://www.schneier.com/blog/archives/2007/12/why_anonymous_1.html
- Matthew L. Wald，《纽约时报》，2004年2月21日，“U.S. Calls Release of JetBlue Data Improper”
- Peter Wayner，《Translucent Databases》，Flyzone，2003，http://www.wayner.org/books/td/
- Tom Zeller, Jr.，《纽约时报》，2006年1月27日，“U.S. Settles With Company on Leak of Consumers Data”

---
## Page 2480
### 第16章 铸造新词：PC安全剧场
天空阴云密布，大地笼罩着不安的气氛。盗贼在大路上肆无忌惮地游荡，每棵大树后面都隐藏着怪兽。巫师一边念咒语，一边把护身符交给行人，声称能提供保护。我们的主角相信灵符具有强大威力，能使其变得金刚不坏，战胜一切艰难险阻。
但主角受到了欺骗。目不识丁的农民们在他身边重复着护身符小贩的胡言乱语。他很快就会发现，这些咒语和魔法根本不能代替铠甲利剑以及头脑里的良好计划。
尽管这看起来像是鬼怪小说的开头，但它反映了计算机安全的现状。问题不在于我们用于保护计算机的解决方案的质量。事实上，当前许多安全解决方案非常出色，是由富有奉献精神、经验丰富且才华横溢的人创建的。但当我们观察安全的整体状况时，这些成果更像是错误的方向和魔法师的符咒，而不是负责任的有效策略。
我们需要一种新的安全策略，更好地利用现有工具，并指导开发新工具。古代炼金士和药剂师在化学和医学上留下了宝贵发现，但这些见解只有在现代科学观发展后才被证实有效。对于当前大量的反病毒和反间谍软件产品、防火墙、沙盒等工具，情况也是如此。除非我们采用新的安全方法，否则这些常见的工具在未来将变得无能为力，偏离方向。我们的研究和开发通过虚拟和现实系统的管理，通过使用人工智能检测异常行为，通过加速反病毒产品的开发，开启了新的安全保障可能性。本章讨论了一些推动我们转向这种解决方案的问题，并介绍了我们在一个名为Returnil的产品上的工作。

### 16.1 攻击不断增加，防御不断倒退
为了理解我们目前的位置，必须回顾安全市场的主体是如何偏离轨道的。我们不必追溯到20世纪70年代第一个真正病毒出现的时候，也不必回望80年代针对日益流行的IBM兼容PC设计的新恶意软件时代，只需回顾90年代末互联网泡沫时期。当时大量专业知识投入到网络防御开发中，但战争的天平还是向垃圾邮件发送者和间谍软件发行者倾斜。

#### 16.1.1 在互联网的传送带上
链条的第一个环节是反病毒厂商之间的区别消失。直到20世纪90年代中期之前，恶意软件主要通过一起工作或相互熟悉的人之间交换感染文件传播。因此，它在不同地理位置之间的传播速度较慢，导致了许多小型、区域性解决方案供应商的出现。
随着互联网的普及和恶意软件通过电子邮件的传播不断增加，显然反病毒厂商需要扩展视野，处理“其他人的问题”。虽然许多大型供应商仍然抵制这种变化，但率先改变思维的厂商由于大肆宣传其检测功能而收获了丰硕成果。这一转变导致了一段时期的合并，较大的公司开始合并或收购竞争对手。