Certainly! Here is the optimized and refined version of the provided text:

---

### References

[25] Stanley CF Chan, KM Chan, Ke Liu, and Jack YB Lee. 2013. On queue length and link buffer size estimation in 3G/4G mobile data networks. *IEEE Transactions on Mobile Computing* 13, 6 (2013), 1298–1311.

[26] Hsin-Hung Cho, Chin-Feng Lai, Timothy K Shih, and Han-Chieh Chao. 2014. Integration of SDR and SDN for 5G. *IEEE Access* 2 (2014), 1196–1204.

[27] D. Clark. 1988. The Design Philosophy of the DARPA Internet Protocols. *SIGCOMM Comput. Commun. Rev.* 18, 4 (1988).

[28] Ben Cox, Jan G Laufer, Simon R Arridge, Paul C Beard, A Jan G Laufer, A Simon R Arridge, et al. 1984. Long range dependence: A review. Iowa State University. Citeseer.

[29] Ning Ding, Daniel Wagner, Xiaomeng Chen, Abhinav Pathak, Y Charlie Hu, and Andrew Rice. 2013. Characterizing and modeling the impact of wireless signal strength on smartphone battery drain. *ACM SIGMETRICS Performance Evaluation Review* 41, 1 (2013), 29–40.

[30] Wikipedia enciclopedia libera. 2019. System-on-a-Chip. https://ro.wikipedia.org/wiki/System-on-a-Chip. (2019).

[31] FierceWireless. 2013. AT&T’s HARP Tool Tackling Smart Cell Propagation Challenge. https://www.fiercewireless.com/tech/propagation-at-t-s-harp-tool-tackling-smart-cell-propagation-challenge. (2013).

[32] Cheng Peng Fu and Soung C Liew. 2003. TCP Veno: TCP enhancement for transmission over wireless access networks. *IEEE Journal on Selected Areas in Communications* 21, 2 (2003), 216–228.

[33] Jim Gettys and Kathleen Nichols. 2011. Bufferbloat: Dark buffers in the internet. *Queue* 9, 11 (2011), 40–54.

[34] Arun Ghosh. 2019. Using High Tech ANTS to Unlock 5G’s Potential. https://about.att.com/innovationblog/2019/06/ants_and_5g.html. (2019).

[35] Asvin Gohil, Hardik Modi, and Shobhit K Patel. 2013. 5G technology of mobile communication: A survey. In *ISSP*. IEEE.

[36] Google. 2019. Tools for Web Developers. https://developers.google.com/web/tools/chrome-devtools?hl=zh-cn. (2019).

[37] Yu Guan, Chengyuan Zheng, Xinggong Zhang, Zongming Guo, and Junchen Jiang. 2019. Pano: Optimizing 360 video streaming with a better understanding of quality perception. In *ACM SIGCOMM*.

[38] Yihua Guo, Feng Qian, Qi Alfred Chen, Zhuoqing Morley Mao, and Subhabrata Sen. 2016. Understanding on-device bufferbloat for cellular upload. In *ACM IMC*.

[39] Sangtae Ha, Injong Rhee, and Lisong Xu. 2008. CUBIC: A new TCP-friendly high-speed TCP variant. *ACM SIGOPS Operating Systems Review* 42, 5 (2008), 64–74.

[40] Fourat Haider, Cheng-Xiang Wang, Harald Haas, Dongfeng Yuan, Haiming Wang, Xiqi Gao, Xiao-Hu You, and Erol Hepsaydir. 2011. Spectral efficiency analysis of mobile femtocell-based cellular systems. In *IEEE ICCT*.

[41] Pan Hu, Pengyu Zhang, Mohammad Rostami, and Deepak Ganesan. 2016. Braidio: An integrated active-passive radio for mobile devices with asymmetric energy budgets. In *ACM SIGCOMM*.

[42] Junxian Huang, Feng Qian, Alexandre Gerber, Z Morley Mao, Subhabrata Sen, and Oliver Spatscheck. 2012. A close examination of performance and power characteristics of 4G LTE networks. In *ACM MobiSys*.

[43] Junxian Huang, Feng Qian, Yihua Guo, Yuanyuan Zhou, Qiang Xu, Z Morley Mao, Subhabrata Sen, and Oliver Spatscheck. 2013. An in-depth study of LTE: Effect of network protocol and application behavior on performance. *ACM SIGCOMM Computer Communication Review* 43, 4 (2013), 363–374.

[44] Ehab Ahmed Ibrahim, MRM Rizk, and Ehab F Badran. 2015. Study of LTE-R X2 handover based on A3 event algorithm using MATLAB. In *2015 International Conference on Information and Communication Technology Convergence (ICTC)*. IEEE, 1155–1159.

[45] ifeng net. 2019. From NSA to SA: 5G Network Evolution Roadmap. https://tech.ifeng.com/c/7onp0cB69lw. (2019).

[46] Haiqing Jiang, Zeyu Liu, Yaogong Wang, Kyunghan Lee, and Injong Rhee. 2012. Understanding bufferbloat in cellular networks. In *Proceedings of the 2012 ACM SIGCOMM Workshop on Cellular Networks: Operations, Challenges, and Future Design*. 1–6.

[47] Yurong Jiang, Lenin Ravindranath Sivalingam, Suman Nath, and Ramesh Govindan. 2016. WebPerf: Evaluating what-if scenarios for cloud-hosted web applications. In *ACM SIGCOMM*.

[48] jocelyndang. 2017. Battery Historian: A tool to analyze battery consumers using Android "bugreport" files. https://github.com/google/battery-historian. (2017).

[49] kevinkong. 2019. Android Performance Test Tool: CPU, memory, network traffic, starting time, battery current, and status. https://github.com/NetEase/Emmagee. (2019).

[50] Tarmo Koppel, Andrei Shishkin, Heldur Haldre, Nikolajs Toropovs, Inese Vilcane, and Piia Tint. 2017. Reflection and Transmission Properties of Common Construction Materials at 2.4 GHz Frequency. *Energy Procedia* 113 (2017), 158–165. https://doi.org/10.1016/j.egypro.2017.04.045. International Scientific Conference “Environmental and Climate Technologies”, CONECT 2016, 12-14 October 2016, Riga, Latvia.

[51] Swarun Kumar, Ezzeldin Hamed, Dina Katabi, and Li Erran Li. 2014. LTE Radio Analytics Made Easy and Accessible. In *Proceedings of ACM SIGCOMM*.

[52] Juho Lee and Yongjun Kwak. 2016. 5G Standard Development: Technology and Roadmap. *Signal Processing for 5G* (2016).

[53] Li Li, Ke Xu, Tong Li, Kai Zheng, Chunyi Peng, Dan Wang, Xiangxiang Wang, Meng Shen, and Rashid Mijumbi. 2018. A measurement study on multi-path TCP with multiple cellular carriers on high-speed rails. In *ACM SIGCOMM*.

[54] Yuanjie Li, Haotian Deng, Jiayao Li, Chunyi Peng, and Songwu Lu. 2016. Instability in distributed mobility management: Revisiting configuration management in 3G/4G mobile networks. In *ACM SIGMETRICS*.

[55] Yuanjie Li, Chunyi Peng, Zengwen Yuan, Haotian Deng, Jiayao Li, and Tao Wang. 2017. MobileInsight: Analyzing cellular network information on smartphones. *GetMobile* 21, 1 (2017), 39–42.

[56] Ming Liu, Tianyi Cui, Henry Schuh, Arvind Krishnamurthy, Simon Peter, and Karan Gupta. 2019. Offloading distributed applications onto smartNICs using iPipe. In *ACM SIGCOMM*.

[57] Lu Lu, Geoffrey Ye Li, A Lee Swindlehurst, Alexei Ashikhmin, and Rui Zhang. 2014. An overview of massive MIMO: Benefits and challenges. *IEEE Journal of Selected Topics in Signal Processing* 8, 5 (2014), 742–758.

[58] Bruce A. Mah. 2019. iperf 3.7. https://github.com/esnet/iperf/releases/tag/3.7. (2019).

[59] Monsoon Company. 2019. A battery used to measure a user’s electric quantity. https://www.msoon.com/online-store. (2019).

[60] Arvind Narayanan, Jason Carpenter, Eman Ramadan, Qingxu Liu, Yu Liu, Feng Qian, and Zhi-Li Zhang. 2019. A First Measurement Study of Commercial mmWave 5G Performance on Smartphones. arXiv preprint arXiv:1909.07532 (2019).

[61] Arvind Narayanan, Eman Ramadan, Jason Carpenter, Qingxu Liu, Yu Liu, Feng Qian, and Zhi-Li Zhang. 2020. A First Look at Commercial 5G Performance on Smartphones. In *Proceedings of The Web Conference 2020 (WWW ’20)*. Association for Computing Machinery, New York, NY, USA, 894–905. https://doi.org/10.1145/3366423.3380169

[62] Navid Nikaein, Mahesh K Marina, Saravana Manickam, Alex Dawson, Raymond Knopp, and Christian Bonnet. 2014. OpenAirInterface: A flexible platform for 5G research. *ACM SIGCOMM Computer Communication Review* 44, 5 (2014), 33–38.

[63] Ashkan Nikravesh, Hongyi Yao, Shichang Xu, David Choffnes, and Z Morley Mao. 2015. Mobilyzer: An open platform for controllable mobile network measurements. In *ACM MobiSys*.

[64] HUAWEI Office. 2019. HUAWEI 5G CPE Pro. https://consumer.huawei.com/cn/routers/5g-cpe-pro/. (2019).

[65] ZTE Office. 2019. ZTE Axon 10 Pro. https://www.ztedevices.com/cn/product/smart-phone/axon_10s_pro. (2019). This is the first commercial 5G device in China.

[66] 3GPP Org. 2019. 3GPP Release 15. https://www.3gpp.org/release-15. (2019). Update of April 26, 2019.

[67] Mugen Peng, Yong Li, Zhongyuan Zhao, and Chonggang Wang. 2015. System architecture and key technologies for 5G heterogeneous cloud radio access networks. *IEEE Network* 29, 2 (2015), 6–14.

[68] piaobozaizai. 2020. A series of 5G measurement tools and dataset. https://github.com/piaobozaizai/5G_measurement. (2020).

[69] Qualcomm. 2019. A Global Perspective of 5G Network Performance. https://www.qualcomm.com/media/documents/files/signals-research-group-s-5g-benchmark-study.pdf. (2019).

[70] Qualcomm.org. 2020. Snapdragon 855 Mobile Platform. https://www.qualcomm.com/products/snapdragon-855-mobile-platform. (2020).

[71] Gaurav Raina, Don Towsley, and Damon Wischik. 2005. Part II: Control theory for buffer sizing. *ACM SIGCOMM CCR* 35, 3 (2005), 79–82.

[72] Ignacio Rodriguez, Huan C Nguyen, Niels TK Jørgensen, Troels B Sørensen, Jan Elling, Morten B Gentsch, and Preben Mogensen. 2013. Path loss validation for urban micro cell scenarios at 3.5 GHz compared to 1.9 GHz. In *IEEE GLOBECOM*.

[73] Ghoul Smail and Jia Weijia. 2017. Techno-economic analysis and prediction for the deployment of 5G mobile network. In *2017 20th Conference on Innovations in Clouds, Internet and Networks (ICIN)*. IEEE, 9–16.

[74] Marco Sousa, André Martins, and Pedro Vieira. 2016. Tracking Down High Interference and Low Coverage in 3G/4G Radio Networks Using Automatic RF Measurement Extraction. In *International Conference on E-Business and Telecommunications*. Springer, 401–425.

[75] Zhaowei Tan, Yuanjie Li, Qianru Li, Zhehui Zhang, Zhehan Li, and Songwu Lu. 2018. Supporting mobile VR in LTE networks: How close are we? *ACM POMACS* 2, 1 (2018), 1–31.

[76] Insta360 Team. 2019. Insta360 ONEX API. https://www.insta360.com/download/insta360-onex. (2019).

[77] Juan Pedro Tomas. 2019. 5G Base Stations: China Mobile Already Operates 50,000 5G Base Stations. https://www.rcrwireless.com/20191119/5g/china-mobile-alread-operates-50000-5g-base-stations-report. (2019).

[78] Guan-Hua Tu, Yuanjie Li, Chunyi Peng, Chi-Yu Li, Hongyi Wang, and Songwu Lu. 2014. Control-plane protocol interactions in cellular networks. *ACM SIGCOMM Computer Communication Review* 44, 4 (2014), 223–234.

[79] Cheng-Xiang Wang, Fourat Haider, Xiqi Gao, Xiao-Hu You, Yang Yang, Dongfeng Yuan, Hadi M Aggoune, Harald Haas, Simon Fletcher, and Erol Hepsaydir. 2014. Cellular Architecture and Key Technologies for 5G Wireless Communication Networks. *IEEE Communications Magazine* 52, 2 (2014), 122–130.

[80] Jing Wang, Yufan Zheng, Yunzhe Ni, Chenren Xu, Feng Qian, Wangyang Li, Wantong Jiang, Yihua Cheng, Zhuo Cheng, Yuanjie Li, et al. 2019. An active-passive measurement study of TCP performance over LTE on high-speed rails. In *ACM MobiCom*.

[81] Li Wang and Huaqing Wu. 2014. Fast pairing of device-to-device link underlay for spectrum sharing with cellular users. *IEEE Communications Letters* 18, 10 (2014), 1803–1806.

[82] Song Wang, Jingqi Huang, Xinyu Zhang, Hyoil Kim, and Sujit Dey. 2020. X-Array: Approximating Omnidirectional Millimeter-Wave Coverage Using an Array of Phased Arrays. In *Proceedings of the 26th Annual International Conference on Mobile Computing and Networking (MobiCom)*. Article 5, 14 pages.

[83] Teng Wei, Anfu Zhou, and Xinyu Zhang. 2017. Facilitating Robust 60 GHz Network Deployment by Sensing Ambient Reflectors. In *Proceedings of the 14th USENIX Conference on Networked Systems Design and Implementation (NSDI’17)*. USENIX Association, USA, 213–226.

[84] Jeroen Wigard, Troels Kolding, Lars Dalsgaard, and Claudio Coletti. 2009. On the user performance of LTE UE power savings schemes with discontinuous reception in LTE. In *2009 IEEE International Conference on Communications Workshops*. IEEE, 1–5.

[85] Damon Wischik and Nick McKeown. 2005. Part I: Buffer sizes for core routers. *ACM SIGCOMM CCR* 35, 3 (2005), 75–78.

[86] Gang Wu, Chenyang Yang, Shaoqian Li, and Geoffrey Ye Li. 2015. Recent advances in energy-efficient networks and their application in 5G systems. *IEEE Wireless Communications* 22, 2 (2015), 145–151.

[87] Feng Xia, Laurence T Yang, Lizhe Wang, and Alexey Vinel. 2012. Internet of Things. *International Journal of Communication Systems* 25, 9 (2012), 1101.

[88] Xiufeng Xie and Xinyu Zhang. 2017. POI360: Panoramic mobile video telephony over LTE cellular networks. In *ACM CoNext*. ACM, 336–349.

[89] Xiufeng Xie, Xinyu Zhang, Swarun Kumar, and Li Erran Li. 2015. PiStream: Physical layer informed adaptive video streaming over LTE. In *ACM MobiCom*.

[90] Xiufeng Xie, Xinyu Zhang, and Shilin Zhu. 2017. Accelerating mobile web loading using cellular link information. In *ACM MobiSys*. 427–439.

[91] Yasir Zaki, Thomas Pötsch, Jay Chen, Lakshminarayanan Subramanian, and Carmelita Görg. 2015. Adaptive Congestion Control for Unpredictable Cellular Networks. In *Proc. of ACM SIGCOMM*.

[92] Qi Zhang, Jianhui Liu, and Guodong Zhao. 2018. Towards 5G-enabled tactile robotic telesurgery. arXiv preprint arXiv:1803.03586 (2018).

[93] Xu Zhang, Siddhartha Sen, Daniar Kurniawan, Haryadi Gunawi, and Junchen Jiang. 2019. E2E: Embracing User Heterogeneity to Improve Quality of Experience on the Web. In *ACM SIGCOMM*.

[94] Peng Zhao. 2020. Last year, 13.76 million 5G mobile phones were shipped, and this year’s sales may exceed 170 million. http://www.bjd.com.cn/a/202001/16/WS5e1fca44e4b0e6e583938e4d.html. (2020).

[95] Anfu Zhou, Shaoqing Xu, Song Wang, Jingqi Huang, Shaoyuan Yang, Teng Wei, Xinyu Zhang, and Huadong Ma. 2019. Robot Navigation in Radio Beam Space: Leveraging Robotic Intelligence for Seamless MmWave Network Coverage. In *Proceedings of the Twentieth ACM International Symposium on Mobile Ad Hoc Networking and Computing (Mobihoc ’19)*. Association for Computing Machinery, New York, NY, USA, 161–170. https://doi.org/10.1145/3323679.3326514

[96] Anfu Zhou, Huanhuan Zhang, Guangyuan Su, Leilei Wu, Ruoxuan Ma, Zhen Meng, Xinyu Zhang, Xiufeng Xie, Huadong Ma, and Xiaojiang Chen. 2019. Learning to Coordinate Video Codec with Transport Protocol for Mobile Video Telephony. In *The 25th Annual International Conference on Mobile Computing and Networking, MobiCom 2019, Los Cabos, Mexico, October 21-25, 2019*. ACM, 29:1–29:16. https://doi.org/10.1145/3300061.3345430

[97] Lei Zhou, Haibo Xu, Hui Tian, Youjun Gao, Lei Du, and Lan Chen. 2008. Performance Analysis of Power Saving Mechanism with Adjustable DRX Cycles in 3GPP LTE. In *IEE VTC*.

[98] Yibo Zhu, Zengbin Zhang, Zhinus Marzi, Chris Nelson, Upamanyu Madhow, Ben Y. Zhao, and Haitao Zheng. 2014. Demystifying 60GHz Outdoor Picocells. In *The 20th Annual International Conference on Mobile Computing and Networking, MobiCom’14, Maui, HI, USA, September 7-11, 2014*. Sung-Ju Lee, Ashutosh Sabharwal, and Prasun Sinha (Eds.). ACM, 5–16. https://doi.org/10.1145/2639108.2639121

---

### Handoff Procedure in 5G NSA

In 5G Non-Standalone (NSA) mode, the 5G radio resource is controlled by the 4G master eNB. Therefore, a handoff from a 5G source gNB (S-gNB) to a target gNB (T-gNB) involves a more complex signaling procedure. Figure 24 illustrates the handoff procedure, which we reverse-engineered based on signaling message traces from XCAL-Mobile. To focus on the handoff, we present only the control plane signal exchange, omitting the user plane data transfer.

The entire handoff process can be divided into four phases: UE (User Equipment, i.e., a smartphone) measurement, results reporting, handoff decision, and handoff execution.

1. **UE Measurement**: The UE periodically monitors the physical signals from the serving gNB and neighboring gNBs, using key performance indicators (KPIs) such as Reference Signal Received Power (RSRP) and Reference Signal Received Quality (RSRQ) to quantify the channel quality.

2. **Results Reporting**: The UE sends a measurement report to the S-eNB, which allows the S-eNB to be aware of the real-time channel quality variations and make the handoff decision accordingly.

3. **Handoff Decision**: The S-eNB compares the reported KPIs and decides whether to trigger a handoff. Our measurements indicate that the A3 event is the dominant trigger, suggesting that cellular operators primarily use this event to initiate handoffs.

4. **Handoff Execution**: Once the handoff decision is made, the S-eNB initiates the handoff process, coordinating with the T-gNB to complete the handoff.

This detailed procedure ensures that the handoff is executed efficiently, maintaining optimal service quality for the user.

---

I hope this helps! If you need any further adjustments or additional sections, feel free to let me know.