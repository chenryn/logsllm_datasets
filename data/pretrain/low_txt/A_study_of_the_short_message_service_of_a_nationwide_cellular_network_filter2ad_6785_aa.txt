# A Study of the Short Message Service in a Nationwide Cellular Network

## Authors
- Petros Zerfos, Deutsche Telekom Laboratories, 10587 Berlin, Germany
- Xiaoqiao Meng, UCLA Computer Science Dept., Los Angeles, CA, 90095, USA
- Starsky H. Y. Wong, UCLA Computer Science Dept., Los Angeles, CA, 90095, USA
- Vidyut Samanta, UCLA Computer Science Dept., Los Angeles, CA, 90095, USA
- Songwu Lu, UCLA Computer Science Dept., Los Angeles, CA, 90095, USA

### Abstract
In recent years, the use of Short Message Service (SMS) in cellular networks has surged, making it a popular communication tool for both personal and content provider-to-person interactions. Despite its widespread use, there is limited understanding of the traffic and user behavior in real SMS systems. This paper presents a measurement study of SMS based on traces collected from a nationwide cellular carrier over a three-week period. We analyze message traffic at both the individual message level and the conversation thread level. Additionally, we examine the "store-and-forward" mechanism of SMS and present initial measurements on how messages are delivered.

### Categories and Subject Descriptors
C.2.3 [Computer-Communication Networks]: Network Operations

### General Terms
Measurement

### Keywords
Short Message Service, Network Measurements, Traffic Characterization

## 1. Introduction
The Short Message Service (SMS) is one of the most popular data services over cellular networks today. Originally conceived as a paging mechanism for voice mails in the GSM specification in 1992, SMS has evolved into a highly successful wireless data service. According to [13], SMS accounted for about 80% of data revenue generated by Western European mobile operators in 2005. In the largest twenty European countries, over 200 billion messages were exchanged monthly [19]. In Asia, China Mobile and China Unicom reported a combined message volume of 304.14 billion in 2005. SMS allows users to exchange short alphanumeric messages globally and has been extended to deliver a wide range of services, such as ringtone downloads, news, weather forecasts, voting, and mobile search.

Several characteristics contribute to the popularity of SMS:
1. **Ubiquitous Device Support**: Most mobile devices, from low-end phones to web interfaces, support SMS.
2. **Global Delivery**: SMS delivery and routing are supported by most cellular networks worldwide.
3. **Push Model**: SMS follows a push model, delivering messages in near real-time, similar to instant messaging applications like ICQ and AIM.
4. **Store-and-Forward Mechanism**: Similar to email, SMS stores undelivered messages temporarily and retries delivery later, making it robust against intermittent connectivity.

In this paper, we present a preliminary analysis of SMS traffic based on Charging Data Records (CDRs) obtained from the billing subsystem of a national cellular carrier in India. The logs, collected over three weeks, cover over 59 million short messages exchanged by more than 10 million mobile users. Our analysis makes three key contributions:
1. **Message Characteristics**: We examine message size distribution and arrival patterns, finding that 7.2% of messages sent by mobile users are requests to SMS services, and 10.1% of received messages are from content providers.
2. **Store-and-Forward Behavior**: We find that 94.9% of messages are successfully delivered, with 73.2% delivered within 10 seconds, 17% taking more than one minute, and 5% requiring over an hour and a half.
3. **Conversation Thread Analysis**: We characterize message traffic at the conversation thread level, showing that 87.1% of threads are static, with neither user changing their associated Mobile Switching Center (MSC).

Our findings can serve as a benchmark for protocol design, performance evaluation, and planning of SMS or other messaging systems. For example, our models can be used to evaluate the optimal buffer size in SMS [12] and to understand the unique "mobile behavior" of users, unlike Wi-Fi hotspot traffic [14]. Additionally, our study provides insights for the planning and provisioning of next-generation messaging systems like Multimedia Messaging Service (MMS) [6].

The rest of the paper is organized as follows: Section 2 provides a brief introduction to SMS and describes the collected traces. Section 3 presents a preliminary analysis of the SMS traces, including message-level characteristics, store-and-forward behaviors, and thread-level characteristics. Section 4 concludes the paper and outlines future work.

## 2. Background and Traces
### 2.1 SMS Network Architecture
In current cellular networks, SMS messages are transmitted over the Common Channel Signaling System 7 (SS7), which is the digital signaling control network used for call setup, routing, and mobility management. Figure 1 illustrates the typical network elements and architecture for handset-to-handset communication (Point-to-Point SMS).

The network architecture is divided into two segments:
- **Mobile Originating (MO) Part**: Includes the sender's Mobile Station (MS), Base Station (BS), and Originating Mobile Switching Center (MSC).
- **Mobile Terminating (MT) Part**: Includes the receiver's BS and MSC.

Additionally, an SMS Center (SMSC) acts as a centralized, store-and-forward server, assisted by the Home Location Register (HLR) and Visitor Location Register (VLR), which store location information about subscribers and their mobile devices.

### 2.2 Traces
We obtained permission from a cellular carrier in India to collect anonymized SMS logs for a period of about three weeks. The carrier operates a nationwide network covering almost the entire country. The number of phone numbers in our logs represents around 10% of the total mobile subscribers in the country.

The traces are logs of Charging Data Records (CDRs). For each SMS, two records are logged: one for the Mobile Originating part (MO-CDR) and another for the Mobile Terminating segment (MT-CDR). Each record includes the timestamp, mobile identification numbers, number of retransmissions, MSC address, message size, delivery result, and a reference value to associate the MO and MT records.

The traces were provided in a proprietary binary format, which we reverse-engineered to extract ASCII values. After conversion, we had 20GB of data, consisting of 48,573,312 MO and 59,612,388 MT records. Overall, 10,854,135 SMS-capable entities sent 5.206G characters and received 5.198G characters.

The SMS logs span from 04/04/2005, 15:01:02 to 04/26/2005, 00:00:04, with some time periods not logged, totaling 544,521 seconds (≈ 6.3 days) missing. An additional set of traces was collected around New Year’s Eve 2005 to analyze an overload incident.

## 3. Results
### 3.1 Message-Level Characteristics
We first analyze message-level statistics, including the distribution of messages among users, message size distribution, and message distribution across different locations.

Figure 2 shows the number of messages sent/received by each phone number versus the rank of the phone number in log-log scale. The majority of phone numbers send only one or two messages, but a few send thousands, likely due to value-added services and content providers. We identified 13,000 such providers in the trace.

The message size distribution varies by message type. Person-to-person messages span the allowable size range, with fragmentation limits at 140 and 160 characters. Person-to-application messages tend to be small, with 96% having less than 50 characters. Application-to-person messages are usually customized versions of pre-formatted messages, with sizes concentrated around specific values.

Messages in our trace are sent by 91 MSCs, with message arrival rates varying between 0 and 84 msg/minute. For MSCs with low arrival rates, the Exponential distribution models the interarrival times well, while no distribution fits high-arrival-rate MSCs.

### 3.2 Store-and-Forward Behavior
To understand the "store-and-forward" operation, we examine the message delivery process. We find that 94.9% of messages are successfully delivered, with 73.2% delivered within 10 seconds, 17% taking more than one minute, and 5% requiring over an hour and a half.

### 3.3 Conversation Thread Analysis
We group messages into conversational threads and characterize these threads. A conversation thread consists of messages continuously exchanged between two mobile users. Our study shows that 87.1% of threads are static, with neither user changing their associated MSC. The thread duration can be modeled by either the Weibull or Lognormal distribution, and the thread interarrival times can be modeled by either the Weibull or Gamma distribution.

## 4. Conclusion and Future Work
This paper presents a preliminary analysis of SMS traffic based on CDRs from a nationwide cellular carrier. We characterized message traffic at both the message and conversation thread levels and examined the store-and-forward mechanism. Our findings provide valuable insights for the design, evaluation, and planning of SMS and other messaging systems.

Future work will focus on extending the analysis to include more detailed user behavior models and to explore the impact of new messaging technologies like MMS.