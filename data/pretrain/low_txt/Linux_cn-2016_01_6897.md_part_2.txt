![](/data/attachment/album/201601/16/205236al2n8e3a92dlvpyp.jpg)

在一次讨论中，主持人向与会的开发人员提问是否更愿意在其手机上运行主线内核。大多数开发者对此表示赞同，但也有少数持反对意见。Rob 在 Project Ara 的支持下已对这个问题进行了近一年半的研究（详情参见： ）。然而，最新的研究结果并不尽如人意。

Rob 指出，通常情况下，手机运行着大量的过期代码（out-of-tree），而主线内核缺少的是能让手机正常工作的驱动程序。普通手机运行的过期代码量大约在100万至300万行之间。这些手机所使用的内核版本大多不超过3.10，有些甚至更加陈旧。这种情况的原因很多，但显而易见的是，在快速变化的手机行业中，很难跟上内核社区的步伐。因此，Rob 提问：“我们还担心什么呢？”

Tim Bird 补充道，第一款 Android 手机 Nexus 1 从未运行过任何一个主线内核，并且将来也不会。这打破了开源软件的承诺，使得用户无法将新的内核安装到手机中。从这一点来看，没有任何一款手机具备这种能力。Peter Zijlstra 询问有多少可工作的过期代码被从一台手机复制到了另一台手机；Rob 回答说，他已经看到了三个独立开发的热插拔 [Governors](http://androidmodguide.blogspot.com/p/blog-page.html)。

![](/data/attachment/album/201601/16/205253y3a1g4ncl12agngc.png)

Dirk Hohndel 提出了一个少有人注意到的观点。他说，在全球数以亿计的手机用户中，可能只有他们这27个人关心手机是否运行主线内核。其他用户只希望他们的手机能够正常工作。或许那些关注这一问题的开发者正在努力解决这个难题。

Chris Mason 认为，手机制造商目前面临的问题与过去 Linux 发行版遇到的问题类似，即处理大量无效且重复的工作。如果发行版决定使用主线内核而非自行维护的内核，那么这些问题将会更容易解决。关键在于帮助手机制造商认识到通过采用相同方法可以带来的好处，而不是依靠来自用户的压力来解决问题。

Grant Likely 对于那些无法升级其系统的 Android 设备的安全性表示担忧。他认为我们需要一个专为手机设计的发行版。只要手机厂商仍然控制着设备上的应用程序，同步更新就无法实现，从而导致严重的安全问题。Peter 补充说，随着 [Stagefright 漏洞](https://lwn.net/Articles/652728/) 的出现，这一挑战已经变得尤为紧迫。

Ted Ts'o 表示，他并不特别关注手机是否运行主线内核。他更希望看到假期期间销售的手机能运行 3.18 或 4.1 版本的内核，而不是继续停留在 3.10。他认为这是一个更有可能被解决的问题。Steve Rostedt 认为，按照 Ted 的建议并不能完全解决手机的安全问题，但 Ted 认为使用较新版本的内核至少可以让漏洞修复变得更加容易。Grant 表示，未来一年里这种情况可能会再次发生；过渡到更新的内核是一个逐步完善的过程。Kees Cook 补充说，修复旧版本内核中的漏洞并不会带来太多益处，真正的问题在于缺乏应对 bug 的措施（他将在今天晚些时候的另一个对话中详细探讨）。

Rob 强调，任何解决方案都需要得到当前市场上手机供应商的支持。否则，由于厂商对预装操作系统的严格控制，运行主线内核的策略将难以实施。Paolo Bonzini 问道，是否可以因为未修复的安全漏洞而起诉手机厂商，特别是在保修期内。Grant 认为，对于手机可更新性的保证必须源自市场需求，否则是无法实现的。促使其实现的原因可能是严重的安全问题，然后用户开始要求手机具有可更新性。同时，内核开发人员必须持续朝着这个方向努力。Rob 还指出，除了上述优点外，运行主线内核还可以帮助开发者测试和验证安卓设备上的新特性。

Josh Triplett 问道，如果手机厂商提出支持主线内核的想法，内核社区又该如何响应呢？这将需要针对手机各方面的特性进行大量测试和验证；[Android 兼容性测试套件](https://source.android.com/compatibility/cts/index.html) 中的失败将不得不重新回归到内核层面。Rob 建议可以在明年再讨论这个问题，先解决最基本的功能。但 Josh 强调，一旦需求出现，我们就应该能够提供一个好的答案。

Tim 认为，目前我们与厂商之间存在很大的脱节。厂商很少主动报告或贡献反馈给社区。双方之间的沟通缺失阻碍了进步。Josh 表示，当厂商开始报告他们在旧内核中发现的 bug 时，双方之间的接受度将会有所提高。Arnd Bergmann 认为，我们需要一家大型芯片厂商认可并支持使用主线内核，并将其硬件提升到能够支持主线内核运行的水平。然而，要实现这一目标，还需要随硬件一起分发自由 GPU 驱动程序——但目前这样的程序尚不存在。

![](/data/attachment/album/201601/16/205509qpmmlsipu67tlluu.jpg)

Rob 列出了存在问题的领域，但由于时间有限，无法深入讨论每个细节。WiFi 驱动仍然是一个问题，尤其是在新特性被添加到 Android 设备时。Johannes Berg 同意新特性确实存在问题；Android 开发人员甚至在这些新特性应用于 Android 设备之前都不会讨论它们是否存在潜在问题。不过，最终大部分技术支持都会落实到主线内核中。

会议接近尾声时，Ben Herrenschmidt 再次强调，在 Android 手机上运行主线内核的关键在于让厂商认识到这是获得最大利润的最佳选择。从长远来看，使用主线内核可以节省大量工作。Mark Brown 补充说，以前，当 Android 设备上的内核版本以更稳定的方式向前推进时，上游工作的优势对运营商来说更加明显。但现在，手机上的内核版本似乎停滞在 3.10，这种压力有所不同。

此次讨论以开发者们决定进一步改善现状而告终，但并没有提出明确的改进计划。

---
via: 
作者：[Jonathan Corbet](https://lwn.net/Articles/KernelSummit2015/)  
译者：[kylepeng93](https://github.com/kylepeng93)  
校对：[wxy](https://github.com/wxy)  
本文由 [LCTT](https://github.com/LCTT/TranslateProject) 原创翻译，[Linux中国](http://linux.cn/) 荣誉推出