### 5.4 Deriving Steady-State Results

Our User Activity Graph (UAG) growth model allows us to simulate user activity given some knowledge of the target graphs. However, simulating activity for millions of users can be time-consuming; for example, some of our simulations with 10 million nodes required over 5 hours to complete. To reduce this computational burden, we derive steady-state equations for the degree distributions generated by our growth model. These equations enable us to estimate key statistics that reflect user activity levels, such as the ratio of power to casual users, without running extensive simulations.

In this section, we provide a probabilistic derivation of these distributions and a theoretical proof that our UAG growth model generates synthetic graphs with more than a single connected component.

#### Asymptotic Degree Distributions

Mathematical analysis allows us to obtain steady-state properties assuming an infinite graph. However, our interest is in producing a finite graph that captures 7 days of user activity. We find that the simulated degree distributions converge quickly to the steady-state mathematical results as the number of seeding nodes (N0) increases.

**Figure 7: Simulated versus Theoretical Degree Distributions**

Figure 7 illustrates the theoretical steady-state and simulated degree distributions for the week 34-2009 UAG on iHeart. The theoretical formulation aligns well with our simulation results. The formulation is as follows:

First, consider out-degrees. Define \( N_t \) as the number of newly activated nodes at the \( t \)-th timestep and \( N \) as the total number of nodes. If \( x \in N_t \) is chosen uniformly at random, then the out-degree of \( x \) is a random variable \( m_x d_{x,t} \), where \( d_{x,t} = d_x \cdot 1_{d_x \leq 7-t} + (7 - t) \cdot 1_{d_x > 7-t} \). The indicator random variable \( 1_A \) outputs 1 if the event \( A \) has occurred, and 0 otherwise. The general formula for out-degree is:

\[ \Pr(\text{deg}_{\text{out}}(x) = j) = \frac{N_k}{N} \sum_{k=0}^{7} \Pr(m_x d_{x,k} \in (j, j+1)) \]

To calculate the in-degree, define \( N_{k,t} \) as the number of nodes of in-degree \( k \) after \( t \) edges have been added. If \( p_{k,t} \) is the probability of observing a node of in-degree \( k \) after \( t \) edges have been added, then \( p_{k,t} = \frac{t}{n} a_{k,t} \), where \( n \) is the number of nodes in the graph after \( t \) edges have been added. Dropping the \( t \) subscript in any of these variables denotes the asymptotic limit as \( t \to \infty \).

The master equations for \( N_{k,t} \) are:

\[ N_{1,t} = N_{1,t-1} - N_{1,t-1} \left(1 - \alpha\right)^{t-1} + \alpha \left(1 - \alpha\right) \]
\[ N_{2,t} = N_{2,t-1} \left[1 - \frac{2(1 - \alpha)}{t-1}\right] + N_{1,t-1} \left[\frac{2(1 - \alpha)}{t-1} - \frac{(1 - \alpha)}{t-1} \cdot \frac{1}{n}\right] \]
\[ \vdots \]
\[ N_{k,t} = N_{k,t-1} \left[1 - \frac{k(1 - \alpha)}{t-1}\right] + N_{k-1,t-1} \left[\frac{k(1 - \alpha)}{t-1} - \frac{(k-1)(1 - \alpha)}{t-1} \cdot \frac{1}{n}\right] \]

Using these master equations, we derive a recursive formula for \( p_k \) (Equation 1), which can be used to calculate \( p_k \) in time linear in \( k \) and can also be approximated in closed form. This approximation is found by taking logs of both sides of Equation 1 and replacing the resultant sum with an integral. This shows that for large \( k \), \( p_k \) decays as a power law (PL) with exponent \( 1 + \frac{1}{1-\alpha} \). Note that Equation 1 allows exponents strictly larger than 2.

\[ p_1 = \frac{t}{n} \]
\[ p_k = \frac{t}{n} \left( \frac{p_{k-1}}{1 + (1 - \alpha) \frac{t}{N_0 + (1 - \alpha) t}} \right) \]

#### Connectivity

Although our model relies on a modified form of Preferential Attachment, unlike graphs with pure Preferential Attachment, our synthetic graphs are disconnected with some very small components, as in our empirical UAGs. The theorem below shows that with high probability, the synthetic graph produced is not entirely connected, and in fact, for sufficiently large \( N_0 \), it has a component of any fixed size.

**Proposition 1.** Given any fixed integer \( t^* \), the graph \( G_{t^*} \) has multiple weakly connected components.

**Proof.** First, note that \( N_k \leq (M + 1) N_{k-1} \), so that \( N_{t^*} \leq (M + 1)^{t^*} N_0 \). It follows that \( \frac{N_0}{(M + 1)^{t^*}} > 0 \) and thus \( N_0 \) is proportional to \( N_{t^*} \) for any choice of parameters. Let \( x \) be a node in \( G_t \), and suppose \( y \) is a node that is sending out a heart. Since all nodes in \( G_t \) have in-degree at least 1, the probability that \( y \) sends the heart to \( x \) is at most \( \frac{1}{N_t} \). Since \( 0 < \frac{N_0}{N_{t^*}} \), it follows that the probability that a node \( x \) of in-degree 1 receives a heart is \( O\left(\frac{1}{N_{t^*}}\right) \) at any given time step. The out-degree of any node is bounded by the constant \( M t^* \), and so the probability that \( x \) receives no hearts at all throughout the process is \( \Omega\left(e^{-M t^*}\right) \).

It follows that some non-vanishing portion of nodes in \( N_t \) receive no hearts after time \( t-1 \), and some non-vanishing portion of nodes in \( N_0 \) receive no hearts from other users. Moreover, there is some non-vanishing portion of nodes in \( N_0 \) which have out-degree 1 and are connected to a node with out-degree 0. If both nodes receive no other hearts throughout the process, which will occur with probability \( \Omega\left(e^{-2 M t^*}\right) \), they form a component of size 2. Therefore, with high probability, a portion of the nodes in \( N_0 \) will be contained in a component of size 2. Similarly, it can be shown with high probability that for any \( k = o(\log N_{t^*}) \), there is at least one component of size \( k \) for sufficiently large \( n \).

### 6. Conclusion and Future Work

We have provided insights into user activity on Facebook-based gifting applications and presented our methodology to create the first UAG growth model for a class of social applications that use only Application Requests (ARs) for growth. Our algorithm requires minimal information to produce synthetic graphs for gifting applications and provides a feasible alternative to sharing large data sets that may violate user privacy. Together with our steady-state equations for the synthetic degree structure, our algorithm may serve as an efficient user activity prediction tool for application developers.

Our work is a first step towards modeling user activity from social applications and, as such, it does suffer from some shortcomings. Specifically, our growth model does not currently differentiate between male and female users, even though we speculate there are differences in gender-wise user behavior. Additionally, it only simulates weekly UAGs without tying multiple weeks' graphs into, say, a monthly or yearly UAG. A further (albeit minor) issue is that the very low clustering of nodes in our empirical UAGs is not accurately represented in our synthetic graphs, where the clustering is, in fact, even lower. It is important for future work to resolve these issues to create a more flexible UAG growth model.

We aim to create an algorithm that simulates UAGs from non-gifting social applications as well. While the gifting genre of applications is the second largest on at least Facebook, gaming applications are the largest and most lucrative. This is due to the fact that social gaming itself is now a $5+ billion industry, and shows no signs of declining with the advent of mobile platforms such as iPhone and Android. Modeling UAGs from gaming applications is, however, a highly challenging task due to the use of growth mechanisms in addition to ARs (Section 3.1) and the wide variety of possible in-game activities that affect their growth.

A cursory glance at the top ten Facebook gaming applications reveals that most, if not all, games incorporate a select few mechanisms to drive growth and increase user engagement. Social games differ from their counterparts in the same genre due to the extent of importance a given mechanism is afforded. Mechanics such as leaderboards, periodic item giveaways, holiday-themed in-game items, and non-friend interactions drive user engagement and subscriber growth, while pure growth mechanisms include gifting in-game items to Online Social Network (OSN)-resident friends. The common use of engagement and growth mechanisms in social games hints at a possible general growth model for social games.

A successful model for gaming applications must incorporate characteristics of social gaming user activity such as high clustering coefficients, presence of strong community structures, high average time spent per user, and lower organic subscriber growth compared to gifting applications [16]. For now, quantitative measurements from non-gifting applications are lacking, and this prevents research into creating a more elaborate model.

Our work is the first step towards modeling social applications that use a combination of growth mechanisms and begins to alleviate the lack of availability of social application data to the research community. We hope this work will encourage research into activity models for non-gifting social applications as well.

### Acknowledgements

We thank Manakki, LLC for the donation of anonymized activity data. This work is supported in part by AT&T Labs–Research, Google Research Award, Defense Threat Reduction Agency, Basic Research Award No. HDTRA1-10-1-0088, and the Army Research Laboratory under Cooperative Agreement Number W911NF-09-2-0053.

### 7. References

[1] Backstrom, L., et al. Four degrees of separation. In ArXiv, Social and Information Networks (2011).
[2] Cha, M., et al. Characterizing social cascades in Flickr. In ACM SIGCOMM Workshop on Online Social Networks (WoSN) (2008).
[3] Chierchetti, F., et al. Models for the compressible web. In Proc. of the Symposium on Foundations of Computer Science (2009).
[4] Clauset, A., et al. Power-law distributions in empirical data. In SIAM Review (2009).
[5] Gjoka, M., et al. Poking Facebook: Characterization of OSN applications. In ACM SIGCOMM Workshop on Online Social Networks (WoSN) (2008).
[6] Gjoka, M., et al. Walking in Facebook: A case study of unbiased sampling of OSNs. In Proc. IEEE INFOCOM (2010).
[7] Golder, S., et al. Rhythms of Social Interaction: Messaging within a Massive Online Network. In International Conference on Communities and Technologies (2007).
[8] Guo, F., et al. Recovering temporally rewiring networks: Model-based approach. In Proc. of International Conference on Machine Learning (2007).
[9] Handcock, M. S., et al. Model-based clustering for social networks. In Journal of the Royal Statistical Society, Series A (2007).
[10] Holme, P., and Saramäki, J. Epidemic spreading in scale-free networks. In Physical Review (2011).
[11] Krishnamurthy, B. A measure of online social networks. In Proc. International Conference on Communication Systems and Networks (2009).
[12] Krishnamurthy, B., et al. On the leakage of personally identifiable information via online social networks. In ACM SIGCOMM Workshop on Online Social Networks (WoSN) (2009).
[13] Leskovec, J., et al. Graphs over time: Densification laws, shrinking diameters and possible explanations. In International Conference on Knowledge Discovery and Data Mining (2005).
[14] Li, L., et al. A first principles approach to understanding the internet’s router-level topology. In Proc. ACM SIGCOMM (2004).
[15] Mislove, A., Marcon, M., Gummadi, K., Druschel, P., and Bhattacharjee, B. Measurement and Analysis of Online Social Networks. In Proc. ACM IMC (2007).
[16] Nazir, A., Raza, S., and Chuah, C.-N. Unveiling Facebook: A measurement study of social network based applications. In Proc. ACM IMC (2008).
[17] Nazir, A., Raza, S., Gupta, D., Chuah, C.-N., and Krishnamurthy, B. Network level footprints of Facebook applications. In Proc. ACM IMC (2009).
[18] Newman, M. E. J. The structure and function of complex networks. In SIAM Review (2003).
[19] Sala, A., et al. Measurement-calibrated graph models for social network experiments. In Proc. of World Wide Web Conference (2010).
[20] Sharan, U., and Neville, J. Temporal-relational classifiers for prediction in evolving domains. In Proc. of International Conference on Data Mining (2008).
[21] Tang, J., et al. Temporal distance metrics for social network analysis. In ACM SIGCOMM Workshop on Online Social Networks (WoSN) (2009).
[22] Torkjazi, M., Rejaie, R., and Willinger, W. Hot today, gone tomorrow: On the migration of MySpace users. In ACM SIGCOMM Workshop on Online Social Networks (WoSN) (2009).
[23] Ugander, J., Karrer, B., et al. The anatomy of the Facebook social graph. In ArXiv, Social and Information Networks (2011).
[24] Valafar, M., et al. Beyond friendship graphs: A study of user interactions in Flickr. In ACM SIGCOMM Workshop on Online Social Networks (WoSN) (2009).
[25] Viswanath, B., Mislove, A., Cha, M., and Gummadi, K. P. On the evolution of user interaction in Facebook. In ACM SIGCOMM Workshop on Online Social Networks (WoSN) (2009).
[26] App data. http://appdata.com/.
[27] Developer analytics. http://developeranalytics.com/.
[28] Farmville. https://apps.facebook.com/onthefarm/.
[29] Wilson, C., Boe, B., et al. User interactions in social networks and their implications. In ACM EuroSys (2009).