{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "Redis-Server进程系统内存及交换空间检查", "knowledge_description": "Redis-Server进程系统内存及交换空间检查"}, {"knowledge_name": "操作系统参数检查", "knowledge_description": "操作系统参数检查"}, {"knowledge_name": "redis内存碎片率分析", "knowledge_description": "redis内存碎片率分析"}], "description": "内存碎片率过高，会引起REDIS性能问题", "rule_name": "MEM_FRAG_REDIS", "id": "5586", "rule_expression": null, "db_type": "Redis", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "Redis Monitor诊断工具", "knowledge_description": "Redis Monitor诊断工具"}, {"knowledge_name": "Redis-Server进程系统内存及交换空间检查", "knowledge_description": "Redis-Server进程系统内存及交换空间检查"}, {"knowledge_name": "Redis慢查询诊断", "knowledge_description": "Redis慢查询诊断"}, {"knowledge_name": "redis相关命令分析", "knowledge_description": "redis相关命令分析"}, {"knowledge_description": "查找Redis的大Key"}], "description": "缓冲区命中率太低，REDIS存在隐患", "rule_name": "hit_rato_redis", "id": "5589", "rule_expression": null, "db_type": "Redis", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "Redis Monitor诊断工具", "knowledge_description": "Redis Monitor诊断工具"}, {"knowledge_name": "Redis慢查询诊断", "knowledge_description": "Redis慢查询诊断"}, {"knowledge_name": "Redis-Server进程系统内存及交换空间检查", "knowledge_description": "Redis-Server进程系统内存及交换空间检查"}, {"knowledge_name": "redis相关命令分析", "knowledge_description": "redis相关命令分析"}, {"knowledge_description": "查找Redis的大Key"}], "description": "客户端的longest_output过大，Redis性能有问题", "rule_name": "longest_output_redis", "id": "5587", "rule_expression": null, "db_type": "Redis", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "Redis Monitor诊断工具", "knowledge_description": "Redis Monitor诊断工具"}, {"knowledge_name": "Redis-Server进程系统内存及交换空间检查", "knowledge_description": "Redis-Server进程系统内存及交换空间检查"}], "description": "FORK耗时太多，REDIS性能存在问题", "rule_name": "Fork_redis", "id": "5588", "rule_expression": null, "db_type": "Redis", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "Redis Monitor诊断工具", "knowledge_description": "Redis Monitor诊断工具"}, {"knowledge_name": "Redis慢查询诊断", "knowledge_description": "Redis慢查询诊断"}, {"knowledge_name": "redis延时检查工具", "knowledge_description": "redis延时检查工具"}, {"knowledge_name": "redis相关命令分析", "knowledge_description": "redis相关命令分析"}, {"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-CPU使用率高OS层面分析"}, {"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-内存问题操作系统层面分析"}, {"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-网络操作系统分析"}, {"knowledge_description": "查找Redis的大Key"}], "description": "命令平均延时过大，REDIS性能存在问题", "rule_name": "CALL_LATENCY_REDIS", "id": "5584", "rule_expression": "[metric,2171007]>[num,$1] && ([metric,2171008]>[num,$2])", "db_type": "Redis", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "Redis-Server进程系统内存及交换空间检查", "knowledge_description": "Redis-Server进程系统内存及交换空间检查"}, {"knowledge_name": "操作系统核心资源分析", "knowledge_description": "操作系统核心资源分析"}, {"knowledge_name": "redis内存分析", "knowledge_description": "redis内存分析"}, {"knowledge_name": "redis内存碎片率分析", "knowledge_description": "redis内存碎片率分析"}], "description": "FREE内存少于2G，REDIS内存使用率高于90%，则数据库风险较高", "rule_name": "REDIS_HIGH_MEMORY_USAGE", "id": "5581", "rule_expression": "[metric,3000007]<[num,$1] && ([metric,2171014]>[num,$2])", "db_type": "Redis", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "Redis Monitor诊断工具", "knowledge_description": "Redis Monitor诊断工具"}, {"knowledge_name": "Redis慢查询诊断", "knowledge_description": "Redis慢查询诊断"}, {"knowledge_name": "redis相关命令分析", "knowledge_description": "redis相关命令分析"}, {"knowledge_description": "查找Redis的大Key"}], "description": "SYS CPU过高，REDIS性能存在风险", "rule_name": "SYS_CPU_TOOHIGH", "id": "5583", "rule_expression": null, "db_type": "Redis", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "Redis-Server进程系统内存及交换空间检查", "knowledge_description": "Redis-Server进程系统内存及交换空间检查"}, {"knowledge_name": "操作系统参数检查", "knowledge_description": "操作系统参数检查"}, {"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-CPU使用率高OS层面分析"}, {"knowledge_name": "采集CPU使用率比较高的TOP20进程", "knowledge_description": "采集CPU使用率比较高的TOP20进程"}, {"knowledge_name": "查看D/Z进程状态的数量", "knowledge_description": "操作系统进程状态分析"}], "description": "用户态CPU使用率超过核心态，则REDIS运行状态有风险", "rule_name": "CPU_SYS_VS_USR", "id": "5582", "rule_expression": "[metric,2170362]>[metric,2170361] && ([metric,2170362]+[metric,2170361])>[num,$1] && [metric,3000003]>[num,$2]", "db_type": "Redis", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "Redis Monitor诊断工具", "knowledge_description": "Redis Monitor诊断工具"}, {"knowledge_name": "redis参数检查", "knowledge_description": "redis参数检查"}], "description": "redis集群状态不对，redis集群可能存在问题", "rule_name": "cluster_state_failed", "id": "8395", "rule_expression": null, "db_type": "Redis", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "Redis Monitor诊断工具", "knowledge_description": "Redis Monitor诊断工具"}, {"knowledge_name": "redis参数检查", "knowledge_description": "redis参数检查"}], "description": "redis集群状态不对，redis集群可能存在问题", "rule_name": "cluster_state_failed", "id": "8396", "rule_expression": null, "db_type": "Redis", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-REDIS键值过期情况分析"}, {"knowledge_description": "查找Redis的大Key"}], "description": "未到期的KEY过期数量过多，REDIS内存配置可能不足", "rule_name": "rds_key_expired", "id": "8785", "rule_expression": "([metric,2174014]>[num,$1]) && ([metric,2171007]>[num,$2])  ", "db_type": "Redis", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-持久化时间过长分析"}, {"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-IO问题操作系统层面分析"}], "description": "最近一次持久化保存时间太长，REDIS存在风险", "rule_name": "rds_last_save_operation_time_too_large", "id": "8789", "rule_expression": "[metric,2170267]> ([metric hour avg,2170267]*[num,$1]) &&([metric,2170267]>[num,$2])", "db_type": "Redis", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-REDIS键值过期情况分析"}, {"knowledge_description": "查找Redis的大Key"}], "description": "因为内存受限每秒淘汰的键值过多，REDIS性能存在风险", "rule_name": "rds_key_evicted", "id": "8788", "rule_expression": "([metric,2174015]) && ([metric,2171007]>[num,$2])  ", "db_type": "Redis", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-REDIS键值过期情况分析"}, {"knowledge_description": "查找Redis的大Key"}], "description": "未到期的KEY过期数量过多，REDIS内存配置可能不足", "rule_name": "rds_key_expired", "id": "8786", "rule_expression": "([metric,2174014]>[num,$1]) && ([metric,2171007]>[num,$2])  ", "db_type": "Redis", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-会话登录情况分析"}], "description": "每秒连接数超出正常水平数倍，REDIS可能存在应用异常", "rule_name": "rds_logon_session", "id": "8792", "rule_expression": "[metric,2171001]> ([metric hour avg,2171001]*[num,$1]) &&([metric,2171001]>[num,$2])", "db_type": "Redis", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-会话登录情况分析"}], "description": "每秒连接数超出正常水平数倍，REDIS可能存在应用异常", "rule_name": "rds_logon_session", "id": "8791", "rule_expression": "[metric,2171001]> ([metric hour avg,2171001]*[num,$1]) &&([metric,2171001]>[num,$2])", "db_type": "Redis", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "LUA内存占用过多，建议及时清理", "rule_name": "rds_lua_usage_high", "id": "8793", "rule_expression": "[metric,2170110]> ([metric hour avg,2170110]*[num,$1]) ||([metric,2170110]>[num,$2])", "db_type": "Redis", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "Redis Monitor诊断工具", "knowledge_description": "Redis Monitor诊断工具"}, {"knowledge_name": "Redis慢查询诊断", "knowledge_description": "Redis慢查询诊断"}, {"knowledge_name": "redis相关命令分析", "knowledge_description": "redis相关命令分析"}, {"knowledge_description": "查找Redis的大Key"}], "description": "阻塞会话太多，系统存在风险", "rule_name": "BLOCK_SESSION_REDIS", "id": "5585", "rule_expression": null, "db_type": "Redis", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-REDIS键值过期情况分析"}, {"knowledge_description": "查找Redis的大Key"}], "description": "因为内存受限每秒淘汰的键值过多，REDIS性能存在风险", "rule_name": "rds_key_evicted", "id": "8787", "rule_expression": "([metric,2174015]) && ([metric,2171007]>[num,$2])  ", "db_type": "Redis", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "LUA内存占用过多，建议及时清理", "rule_name": "rds_lua_usage_high", "id": "8794", "rule_expression": "[metric,2170110]> ([metric hour avg,2170110]*[num,$1]) ||([metric,2170110]>[num,$2])", "db_type": "Redis", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "REDIS的命令并发量上升，平均命令执行时间大幅度上升", "rule_name": "rds_qps_raise", "id": "8795", "rule_expression": "[metric,2171007]> ([metric hour avg,2171007]*[num,$1]) &&[metric,2171008]> ([metric hour avg,2171008]*[num,$2])", "db_type": "Redis", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-会话登录情况分析"}], "description": "每秒拒绝连接数超出平均水平数倍，REDIS存在风险", "rule_name": "rds_reject_connction", "id": "8797", "rule_expression": "[metric,2171011]> ([metric hour avg,2171011]*[num,$1]) &&[metric,2171001]> [num,$2]", "db_type": "Redis", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "Redis-Server进程系统内存及交换空间检查", "knowledge_description": "Redis-Server进程系统内存及交换空间检查"}, {"knowledge_name": "操作系统参数检查", "knowledge_description": "操作系统参数检查"}, {"knowledge_name": "redis内存碎片率分析", "knowledge_description": "redis内存碎片率分析"}], "description": "内存碎片率过高，会引起REDIS性能问题", "rule_name": "MEM_FRAG_REDIS", "id": "5596", "rule_expression": null, "db_type": "Redis", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "Redis Monitor诊断工具", "knowledge_description": "Redis Monitor诊断工具"}, {"knowledge_name": "Redis慢查询诊断", "knowledge_description": "Redis慢查询诊断"}, {"knowledge_name": "Redis-Server进程系统内存及交换空间检查", "knowledge_description": "Redis-Server进程系统内存及交换空间检查"}, {"knowledge_name": "redis相关命令分析", "knowledge_description": "redis相关命令分析"}, {"knowledge_description": "查找Redis的大Key"}], "description": "客户端的longest_output过大，Redis性能有问题", "rule_name": "longest_output_redis", "id": "5595", "rule_expression": null, "db_type": "Redis", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-持久化时间过长分析"}, {"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-IO问题操作系统层面分析"}], "description": "最近一次持久化保存时间太长，REDIS存在风险", "rule_name": "rds_last_save_operation_time_too_large", "id": "8790", "rule_expression": "[metric,2170267]> ([metric hour avg,2170267]*[num,$1]) &&([metric,2170267]>[num,$2])", "db_type": "Redis", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "REDIS的命令并发量上升，平均命令执行时间大幅度上升", "rule_name": "rds_qps_raise", "id": "8796", "rule_expression": "[metric,2171007]> ([metric hour avg,2171007]*[num,$1]) &&[metric,2171008]> ([metric hour avg,2171008]*[num,$2])", "db_type": "Redis", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "Redis-Server进程系统内存及交换空间检查", "knowledge_description": "Redis-Server进程系统内存及交换空间检查"}, {"knowledge_name": "操作系统核心资源分析", "knowledge_description": "操作系统核心资源分析"}, {"knowledge_name": "redis内存分析", "knowledge_description": "redis内存分析"}, {"knowledge_name": "redis内存碎片率分析", "knowledge_description": "redis内存碎片率分析"}], "description": "FREE内存少于2G，REDIS内存使用率高于90%，则数据库风险较高", "rule_name": "REDIS_HIGH_MEMORY_USAGE", "id": "5597", "rule_expression": "[metric,3000007]<[num,$1] && ([metric,2171014]>[num,$2])", "db_type": "Redis", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "Redis Monitor诊断工具", "knowledge_description": "Redis Monitor诊断工具"}, {"knowledge_name": "Redis慢查询诊断", "knowledge_description": "Redis慢查询诊断"}, {"knowledge_name": "redis相关命令分析", "knowledge_description": "redis相关命令分析"}, {"knowledge_description": "查找Redis的大Key"}], "description": "阻塞会话太多，系统存在风险", "rule_name": "BLOCK_SESSION_REDIS", "id": "5590", "rule_expression": null, "db_type": "Redis", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "Redis Monitor诊断工具", "knowledge_description": "Redis Monitor诊断工具"}, {"knowledge_name": "Redis慢查询诊断", "knowledge_description": "Redis慢查询诊断"}, {"knowledge_name": "redis延时检查工具", "knowledge_description": "redis延时检查工具"}, {"knowledge_name": "redis相关命令分析", "knowledge_description": "redis相关命令分析"}, {"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-CPU使用率高OS层面分析"}, {"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-内存问题操作系统层面分析"}, {"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-网络操作系统分析"}, {"knowledge_description": "查找Redis的大Key"}], "description": "命令平均延时过大，REDIS性能存在问题", "rule_name": "CALL_LATENCY_REDIS", "id": "5591", "rule_expression": "[metric,2171007]>[num,$1] && ([metric,2171008]>[num,$2])", "db_type": "Redis", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "Redis-Server进程系统内存及交换空间检查", "knowledge_description": "Redis-Server进程系统内存及交换空间检查"}, {"knowledge_name": "操作系统参数检查", "knowledge_description": "操作系统参数检查"}, {"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-CPU使用率高OS层面分析"}, {"knowledge_name": "采集CPU使用率比较高的TOP20进程", "knowledge_description": "采集CPU使用率比较高的TOP20进程"}, {"knowledge_name": "查看D/Z进程状态的数量", "knowledge_description": "操作系统进程状态分析"}], "description": "用户态CPU使用率超过核心态，则REDIS运行状态有风险", "rule_name": "CPU_SYS_VS_USR", "id": "5592", "rule_expression": "[metric,2170362]>[metric,2170361] && ([metric,2170362]+[metric,2170361])>[num,$1] && [metric,3000003]>[num,$2]", "db_type": "Redis", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "Redis Monitor诊断工具", "knowledge_description": "Redis Monitor诊断工具"}, {"knowledge_name": "Redis-Server进程系统内存及交换空间检查", "knowledge_description": "Redis-Server进程系统内存及交换空间检查"}, {"knowledge_name": "Redis慢查询诊断", "knowledge_description": "Redis慢查询诊断"}, {"knowledge_name": "redis相关命令分析", "knowledge_description": "redis相关命令分析"}, {"knowledge_description": "查找Redis的大Key"}], "description": "缓冲区命中率太低，REDIS存在隐患", "rule_name": "hit_rato_redis", "id": "5594", "rule_expression": null, "db_type": "Redis", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "redis对象内存使用率过高", "rule_name": "redis_mem_overload", "id": "11284", "rule_expression": "[metric,2170101]/[metric,2170111] * [num,100] >[num,$1]", "db_type": "Redis", "warning_level": "4", "warning_message": "redis内存使用率为{[metric,2170101]/[metric,2170111]}，内存使用率过高，可能导致系统性能下降。"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "redis对象内存使用率过高", "rule_name": "redis_mem_overload", "id": "11283", "rule_expression": "[metric,2170101]/[metric,2170111] * [num,100] >[num,$1]", "db_type": "Redis", "warning_level": "4", "warning_message": "redis内存使用率为{[metric,2170101]/[metric,2170111]}，内存使用率过高，可能导致系统性能下降。"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-REDIS内存碎片隐患"}, {"knowledge_name": "服务器内存分析", "knowledge_description": "服务器内存分析"}, {"knowledge_name": "redis内存碎片率分析", "knowledge_description": "redis内存碎片率分析"}], "description": "内存碎片率大于1.5则需要做内存整理，小于1则可能服务器内存不足", "rule_name": "redis_mem_fragmen", "id": "8783", "rule_expression": "([metric,2170112]<[num,$1]) || ([metric,2170112]>[num,$2])", "db_type": "Redis", "warning_level": "3", "warning_message": "内存碎片率{[metric,2170112]}，{([metric,2170112]>[num,$2]) ? [str,需要做内存整理] : [str,可能服务器内存不足]}"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-REDIS内存碎片隐患"}, {"knowledge_name": "服务器内存分析", "knowledge_description": "服务器内存分析"}, {"knowledge_name": "redis内存碎片率分析", "knowledge_description": "redis内存碎片率分析"}], "description": "内存碎片率大于1.5则需要做内存整理，小于1则可能服务器内存不足", "rule_name": "redis_mem_fragmen", "id": "8784", "rule_expression": "([metric,2170112]<[num,$1]) || ([metric,2170112]>[num,$2])", "db_type": "Redis", "warning_level": "3", "warning_message": "内存碎片率{[metric,2170112]}，{([metric,2170112]>[num,$2]) ? [str,需要做内存整理] : [str,可能服务器内存不足]}"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "Redis Monitor诊断工具", "knowledge_description": "Redis Monitor诊断工具"}, {"knowledge_name": "Redis慢查询诊断", "knowledge_description": "Redis慢查询诊断"}, {"knowledge_name": "redis相关命令分析", "knowledge_description": "redis相关命令分析"}, {"knowledge_description": "查找Redis的大Key"}], "description": "SYS CPU过高，REDIS性能存在风险", "rule_name": "SYS_CPU_TOOHIGH", "id": "5598", "rule_expression": null, "db_type": "Redis", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-会话登录情况分析"}], "description": "每秒拒绝连接数超出平均水平数倍，REDIS存在风险", "rule_name": "rds_reject_connction", "id": "8798", "rule_expression": "[metric,2171011]> ([metric hour avg,2171011]*[num,$1]) &&[metric,2171001]> [num,$2]", "db_type": "Redis", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "Redis Monitor诊断工具", "knowledge_description": "Redis Monitor诊断工具"}, {"knowledge_name": "Redis-Server进程系统内存及交换空间检查", "knowledge_description": "Redis-Server进程系统内存及交换空间检查"}], "description": "FORK耗时太多，REDIS性能存在问题", "rule_name": "Fork_redis", "id": "5593", "rule_expression": null, "db_type": "Redis", "warning_level": "3"}}
