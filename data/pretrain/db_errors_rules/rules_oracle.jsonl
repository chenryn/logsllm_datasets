{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "oracle数据库连接失败分析", "knowledge_description": "oracle数据库连接失败分析"}], "description": "KYD客户端连接oracle数据库用户名错误", "rule_name": "oracle_dsmart_logon_failed", "id": "8445", "rule_expression": "([metric,1000000] [oper,contains][str,ORA-01017]) || ([metric,1000000] [oper,contains][str,ORA-28000])", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "一般来说，日志切换后归档进程就会进行归档操作，当前最多有一个日志组未归档。如果未归档日志组数量超过2个，一般来说系统就有问题,如果归档有问题，建议检查归档目录的写IO性能是不是很慢，检查归档目录状态及错误原因", "knowledge_description": "未归档日志组数量超过2个，一般来说系统就有问题"}, {"knowledge_name": "文件系统目录使用率分析", "knowledge_description": "文件系统目录使用率分析"}, {"knowledge_name": "分析服务器IO设备的IO情况", "knowledge_description": "分析服务器IO设备的IO情况"}, {"knowledge_description": "分析归档日志大小远小于redo log文件大小"}], "description": "未归档的日志组数量超过总的日志组数量的一半，说明系统归档出现了异常，不及时处理可能导致数据库挂起", "rule_name": "no_archived_log", "id": "114", "rule_expression": "[metric,2180513]/[cib,2201001,log_count]>[num,$1]", "db_type": "Oracle", "warning_level": "4", "warning_message": "系统归档异常，未归档日志组数量{[metric,2180513]}，超过总日志组数量{[cib,2201001,log_count]}的一半，不及时处理可能导致数据库挂起"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "oracle数据库连接失败分析", "knowledge_description": "oracle数据库连接失败分析"}], "description": "KYD到oracle数据库连接配置有问题，导致连接失败", "rule_name": "oracle_dsmart_connection_error", "id": "8485", "rule_expression": "([metric,1000000][oper,contains][str,ORA-12505] || [metric,1000000][oper,contains][str,ORA-12514]) && ([metric list in time,3,3000060][oper,any eq][cib,2201001,instance_name])", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "Oracle等待事件分析", "knowledge_description": "Oracle等待事件分析"}, {"knowledge_name": "显示数据库等待事件及数据库会话信息", "knowledge_description": "显示数据库等待事件及数据库会话信息"}, {"knowledge_name": "等待事件链分析", "knowledge_description": "等待事件链分析"}, {"knowledge_name": "根据智能诊断发现的异常指标以及推荐的诊断路径下钻分析", "knowledge_description": "泛路由-Oracle闩锁分析"}, {"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle共享池分析"}, {"knowledge_name": "以树形结构显示等待事件链信息", "knowledge_description": "以树形结构显示等待事件链信息"}, {"knowledge_name": "数据库后台进程错误及等待事件诊断", "knowledge_description": "数据库后台进程错误及等待事件诊断"}, {"knowledge_name": "根据闩锁等待类别进行分类处理", "knowledge_description": "latch等待事件分析，判断数据库出现哪类闩锁等待"}, {"knowledge_name": "一般来说，平均等待时间应该小于10毫秒，如果某些指标的平均等待时间超过20毫秒，则说明系统有问题。分析所有超出指标范围的指标项", "knowledge_description": "分析数据库集群相关等待事件，判断问题出在哪些方面"}, {"knowledge_name": "enq: CF - contention等待事件分析", "knowledge_description": "enq: CF - contention等待事件分析"}, {"knowledge_name": "分析数据库控制文件等待事件延时情况", "knowledge_description": "分析数据库控制文件等待事件延时情况"}, {"knowledge_name": "分析数据库中enq: KO - fast object checkpoint等待事件", "knowledge_description": "分析数据库中enq: KO - fast object checkpoint等待事件"}, {"knowledge_name": "列出数据库中非空闲等待事件", "knowledge_description": "列出数据库中非空闲等待事件"}, {"knowledge_name": "Buffer busy waits等待事件诊断", "knowledge_description": "Buffer busy waits等待事件诊断"}, {"knowledge_name": "等待事件enq: RO - fast object reuse诊断", "knowledge_description": "等待事件enq: RO - fast object reuse诊断"}], "description": "等待事件风险连续出现较高的情况", "rule_name": "wait_event_risk", "id": "8180", "rule_expression": null, "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "oracle数据库连接失败分析", "knowledge_description": "oracle数据库连接失败分析"}], "description": "KYD客户端连接oracle数据库用户名错误", "rule_name": "oracle_dsmart_logon_failed", "id": "8448", "rule_expression": "([metric,1000000] [oper,contains][str,ORA-01017]) || ([metric,1000000] [oper,contains][str,ORA-28000])", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "检索阻塞者会话信息，杀掉该会话可以解开相关的锁或者闩锁。注意部分后台进程是不能杀的，如果杀错会话，会导致数据库宕机", "knowledge_description": "检索阻塞会话信息"}, {"knowledge_name": "在创建索引一段时间后，无返回结果可用此脚本进行检查。", "knowledge_description": "检查数据库是否存在索引创建或者重建任务"}, {"knowledge_name": "通过oracle等待事件链分析得到导致等待事件的根会话", "knowledge_description": "生成Oracle数据库实例的会话等待链"}], "description": "enq:TM-contention 等待的总会话数超过10", "rule_name": "session_wait_enq_tm_cnt_exceed", "id": "93", "rule_expression": "[metric,2180508]>[num,$1]", "db_type": "Oracle", "warning_level": "2", "warning_message": "enq:TM-contention 等待的总会话数超过10，原因：1）不合理的锁表 2）DML语句相关表存在外键关系，并且子表外键缺少索引 3）BUG导致的并行创建索引缓慢"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "oracle数据库连接失败分析", "knowledge_description": "oracle数据库连接失败分析"}], "description": "KYD客户端连接oracle数据库用户名错误", "rule_name": "oracle_dsmart_logon_failed", "id": "15711", "rule_expression": "([metric,1000000] [oper,contains][str,ORA-01017]) || ([metric,1000000] [oper,contains][str,ORA-28000])", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "oracle数据库连接失败分析", "knowledge_description": "oracle数据库连接失败分析"}], "description": "KYD采样SQL在oracle数据库执行失败", "rule_name": "oracle_dsmart_monitor_sql_execute_failed", "id": "15712", "rule_expression": "[metric,1000000] [oper,contains][str,SQL执行失败]", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "运维对象连接失败，请检查运维对象是否down", "knowledge_description": "运维对象连接状态分析"}, {"knowledge_name": "操作系统核心资源分析", "knowledge_description": "操作系统核心资源分析"}, {"knowledge_name": "显示数据库负载指标情况", "knowledge_description": "显示数据库负载指标情况"}, {"knowledge_name": "数据库后台进程错误及等待事件诊断", "knowledge_description": "数据库后台进程错误及等待事件诊断"}, {"knowledge_name": "分析数据库控制文件等待事件延时情况", "knowledge_description": "分析数据库控制文件等待事件延时情况"}, {"knowledge_name": "通过oracle等待事件链分析得到导致等待事件的根会话", "knowledge_description": "生成Oracle数据库实例的会话等待链"}, {"knowledge_name": "服务器内存分析", "knowledge_description": "服务器内存分析"}, {"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}], "description": "数据库采集任务严重超时，数据库存在严重性能风险", "rule_name": "collector_exec_slow_oracle", "id": "6999", "rule_expression": "[metric,1000000][oper,eq][str,连接成功] && [metric,1000101] >([metric hour avg,1000101]*[num,$1])", "db_type": "Oracle", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "数据库IO功能分析", "knowledge_description": "数据库IO功能分析"}, {"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_name": "检查Physical Reads Direct Per Sec指标", "knowledge_description": "检查数据库中的物理读是否由Direct path read引起的，如果是建议系统中禁用direct path read"}], "description": "数据库IO延时过大，DBIO以外的IO比例过大", "rule_name": "dbio_cacheio_ratio_low", "id": "8261", "rule_expression": "[metric,2180056]/[metric,2180061]<[num,$1] && [metric,2180061]>[num,$2]  && [metric,2184302]>[num,$3]", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "检索阻塞者会话信息，杀掉该会话可以解开相关的锁或者闩锁。注意部分后台进程是不能杀的，如果杀错会话，会导致数据库宕机", "knowledge_description": "检索阻塞会话信息"}, {"knowledge_name": "在创建索引一段时间后，无返回结果可用此脚本进行检查。", "knowledge_description": "检查数据库是否存在索引创建或者重建任务"}, {"knowledge_name": "通过oracle等待事件链分析得到导致等待事件的根会话", "knowledge_description": "生成Oracle数据库实例的会话等待链"}], "description": "enq:TM-contention 等待的总会话数超过10", "rule_name": "session_wait_enq_tm_cnt_exceed", "id": "1069", "rule_expression": "[metric,2180508]>[num,$1]", "db_type": "Oracle", "warning_level": "2", "warning_message": "enq:TM-contention 等待的总会话数超过10，原因：1）不合理的锁表 2）DML语句相关表存在外键关系，并且子表外键缺少索引 3）BUG导致的并行创建索引缓慢"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "oracle SGA超过100G的数据库vm.max_map_count参数配置不正确", "rule_name": "oracle_big_sga_mmap_setting_incorrect", "id": "11940", "rule_expression": "[cib,2201010,sga_target]>[num,$1] && [cib,3010002,vm.max_map_count]<[num,$2]", "db_type": "Oracle", "warning_level": "4", "warning_message": "oracle SGA当前为{[cib,2201010,sga_target]}，超过100G，但数据库服务器vm.max_map_count参数为 {[cib,3010002,vm.max_map_count]}，配置过小，可能会导致数据库产生ORA-04030报错。"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "oracle数据库连接失败分析", "knowledge_description": "oracle数据库连接失败分析"}, {"knowledge_name": "网络接口分析", "knowledge_description": "(历史)网络接口分析"}], "description": "KYD客户端到oracle数据库网络出现问题，oracle数据库可能存在网络故障", "rule_name": "oracle_dsmart_network_failed", "id": "15713", "rule_expression": "(([metric,1000000][oper,contains][str,The Network Adapter could not establish the connection]) && ([metric in time,2,3000061]>[num,0]))", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "显示指定时间间隔内的日志报错信息", "knowledge_description": "显示指定时间间隔内的日志报错信息"}], "description": "Oracle日志分析结果分数过低，系统可能存在隐患", "rule_name": "logana_oracle", "id": "79", "rule_expression": null, "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析db file sequential read指标 ，如果大于10毫秒说明IO性能已经受到影响", "knowledge_description": "分析db file sequential read指标 ，如果大于10毫秒说明IO性能已经受到影响"}, {"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_name": "数据库物理读过高时分析物理读过高的SQL和SEGMENT", "knowledge_description": "数据库物理读过高时分析物理读过高的SQL和SEGMENT"}, {"knowledge_name": "查看top sql判断是物理读导致还是执行次数原因", "knowledge_description": "物理读较多的TOP SQL"}], "description": "DB FILE SEQUENTIAL READ延时超过最近1小时平均值的5倍，数据库读IO存在隐患", "rule_name": "db_file_seq_read", "id": "5711", "rule_expression": "[metric,2184302]/[metric hour avg,2184302]>[num,$1] && [metric,2184302]>[num,$2] && [metric,2189004]>[num,$3]", "db_type": "Oracle", "warning_level": "3", "warning_message": "DB FILE SEQUENTIAL READ延时（{[metric,2184302]}）ms，超过最近1小时平均值的{$1}倍，数据库读IO存在隐患"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "实时查询表空间使用情况，不要频繁点击查询，对于超大数据库，频繁查询可能会导致数据库hang死", "knowledge_description": "实时查询表空间使用情况"}, {"knowledge_name": "Oracle数据库表空间检查", "knowledge_description": "Oracle数据库表空间检查"}, {"knowledge_name": "查询数据库表空间信息", "knowledge_description": "查询数据库表空间信息"}, {"knowledge_description": "表空间使用情况检查"}], "description": "表空间容量风险高，数据库中存在表空间使用率大于95%且可用天数小于15天，存在表空间满的风险", "rule_name": "oracle_tbs_capacity_high_rish", "id": "12450", "rule_expression": "[metric max in time,240,2180045]==[num,$1]", "db_type": "Oracle", "warning_level": "4", "warning_message": "表空间({[metric in time,240,2180046]})容量风险高，使用率大于95%且可用天数小于15天，存在表空间满的风险"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析数据库实例在指定时间窗口内的数据库会话情况", "knowledge_description": "分析数据库实例在指定时间窗口内的数据库会话情况"}, {"knowledge_name": "查找执行次数比较高的TOP SQL", "knowledge_description": "查找执行次数比较高的TOP SQL"}, {"knowledge_name": "通过每秒执行的事务数和SQL数，检查数据库负载情况", "knowledge_description": "每秒执行的事务数和SQL语句每秒执行数量可以从宏观上显示出数据库负载运行情况。"}, {"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-oracle活跃会话分析"}, {"knowledge_name": "数据库负载模型相关指标分析", "knowledge_description": "数据库负载模型相关指标分析"}, {"knowledge_name": "执行数量超过5的活跃SQL", "knowledge_description": "执行数量超过5的活跃SQL"}], "description": "活跃会话过多（超过70个）,数据库健康可能存在问题", "rule_name": "avg_active_session", "id": "5603", "rule_expression": "[metric,2189147]>[num,$1] &&( [metric,2189147]<[cib,2201010,sessions])", "db_type": "Oracle", "warning_level": "3", "warning_message": "活跃会话数{[metric,2189147]}，超过{$1}个数据库健康可能存在问题"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "如果log file parallel write的平均等待时间超过10ms,说明数据库日志写IO性能存在问题；如果Log file sync与log file parallel write两个等待事件的平均等待时间的差值大于10ms 或者大于log file parallel write等待事件的平均等待时间的50%，则说明数据库日志同步存在性能问题", "knowledge_description": "LOG FILE SYNC等待延时超过n毫秒，说明数据库存在性能隐患"}, {"knowledge_description": "分析归档日志大小远小于redo log文件大小"}], "description": "LOG FILE SYNC等待延时较高(10ms-60ms)，说明系统存在性能隐患", "rule_name": "log_file_sync_wait", "id": "116", "rule_expression": "[metric,2184301]>[num,$1] && [metric,2184301]<=[num,$2] ", "db_type": "Oracle", "warning_level": "3", "warning_message": "LOG FILE SYNC等待延时较高（{[metric,2184301]}ms），系统存在性能隐患"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle RAC分析"}, {"knowledge_name": "分析指定时间间隔内GC相关指标可能存在的问题", "knowledge_description": "分析指定时间间隔内GC相关指标"}, {"knowledge_name": "RAC DRM分析", "knowledge_description": "RAC DRM分析"}, {"knowledge_name": "获取集群等待时间较高的TOP SQL", "knowledge_description": "获取集群等待时间较高的TOP SQL"}, {"knowledge_name": "对未分区的对象进行分区，对碎片严重的对象进行重组整理", "knowledge_description": "找出数据库集群间心跳流量比较大的SEGMENT，检查是否分区并对其进行碎片分析"}, {"knowledge_name": "数据库物理读过高时分析物理读过高的SQL和SEGMENT", "knowledge_description": "数据库物理读过高时分析物理读过高的SQL和SEGMENT"}, {"knowledge_name": "操作系统网络总体分析", "knowledge_description": "操作系统网络总体分析"}, {"knowledge_name": "操作系统网络层面丢包分析", "knowledge_description": "操作系统网络层面丢包分析"}, {"knowledge_name": "mtr网络诊断工具", "knowledge_description": "mtr网络诊断工具"}], "description": "Avg global cache cr block receive time 大于20毫秒并且RAC INTERCONNECT流量大于30M，说明集群性能存在隐患", "rule_name": "rac_interconnect_time_and_flow_problem", "id": "1067", "rule_expression": "[metric,2189098]>[num,$1] && [metric,2180204]>[num,$2]", "db_type": "Oracle", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "oracle数据库连接失败分析", "knowledge_description": "oracle数据库连接失败分析"}], "description": "KYD采样SQL在oracle数据库执行失败", "rule_name": "oracle_dsmart_monitor_sql_execute_failed", "id": "8474", "rule_expression": "[metric,1000000] [oper,contains][str,SQL执行失败]", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "TX锁分析", "knowledge_description": "TX锁分析"}, {"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_name": "显示数据库负载指标情况", "knowledge_description": "显示数据库负载指标情况"}], "description": "每秒索引叶节点分裂数量超过10个，并且单块读响应时间超过30毫秒，数据库可能存在TX锁恶化的风险", "rule_name": "index_split_lead_to_tx_enq", "id": "1061", "rule_expression": "[metric,2189083]>[num,$1] && [metric,2184302]>[num,$2]", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "一般来说，日志切换后归档进程就会进行归档操作，当前最多有一个日志组未归档。如果未归档日志组数量超过2个，一般来说系统就有问题,如果归档有问题，建议检查归档目录的写IO性能是不是很慢，检查归档目录状态及错误原因", "knowledge_description": "未归档日志组数量超过2个，一般来说系统就有问题"}], "description": "快速恢复区配置大小大于快速恢复区目的地实际可用大小", "rule_name": "db_recovery_dest_size_incorrect", "id": "5889", "rule_expression": "[metric,2180534]>([metric,2180525]+[metric,2180535])", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "显示指定时间间隔内的日志报错信息", "knowledge_description": "显示指定时间间隔内的日志报错信息"}, {"knowledge_name": "实时查询表空间使用情况，不要频繁点击查询，对于超大数据库，频繁查询可能会导致数据库hang死", "knowledge_description": "实时查询表空间使用情况"}, {"knowledge_name": "一般来说，日志切换后归档进程就会进行归档操作，当前最多有一个日志组未归档。如果未归档日志组数量超过2个，一般来说系统就有问题,如果归档有问题，建议检查归档目录的写IO性能是不是很慢，检查归档目录状态及错误原因", "knowledge_description": "未归档日志组数量超过2个，一般来说系统就有问题"}], "description": "用户回滚比例超过20%并且每秒回滚次数超过5次，应用可能存在异常", "rule_name": "rollback_ratio_exceed", "id": "1071", "rule_expression": "[metric,2189025]>[num,$1]  && [metric,2189024]>[num,$2]", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "oracle数据库连接失败分析", "knowledge_description": "oracle数据库连接失败分析"}], "description": "oracle数据库未知连接错误", "rule_name": "oracle_unkown_connect_failed", "id": "15719", "rule_expression": "[metric,1000000][oper,notcontains][str,ORA-28001] && [metric,1000000][oper,notcontains][str,ORA-12505] && [metric,1000000][oper,notcontains][str,ORA-12514] && [metric,1000000][oper,notcontains][str,ORA-12516] && [metric,1000000][oper,notcontains][str,ORA-00257] && [metric,1000000][oper,notcontains][str,ORA-01017] && [metric,1000000][oper,notcontains][str,ORA-28000] && [metric,1000000][oper,notcontains][str,The Network Adapter could not establish the connection] && [metric,1000000][oper,notcontains][str,SQL执行失败] && [metric,1000000][oper,neq][str,连接成功]", "db_type": "Oracle", "warning_level": "4", "warning_message": "oracle数据库连接错误：{[metric,1000000]}"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "显示数据库负载指标情况", "knowledge_description": "显示数据库负载指标情况"}, {"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle共享池分析"}, {"knowledge_name": "共享池分析", "knowledge_description": "共享池分析"}, {"knowledge_name": "查找解析次数比较高的SQL", "knowledge_description": "查找解析次数比较高的SQL"}], "description": "CURSOR解析相关等待会话数超过平均值的5倍并且大于20，共享池可能存在性能隐患", "rule_name": "cursor_parse_problem", "id": "3082", "rule_expression": "[metric,2180519]/[metric hour avg,2180519]>[num,$1] && [metric,2180519]>[num,$2][@Denominator0,0]", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "scn增长率检查"}, {"knowledge_name": "通过每秒执行的事务数和SQL数，检查数据库负载情况", "knowledge_description": "每秒执行的事务数和SQL语句每秒执行数量可以从宏观上显示出数据库负载运行情况。"}], "description": "每秒calls to kcmgas平均值大于16K则系统存在SCN HEADROOM问题隐患", "rule_name": "kcmgas", "id": "268", "rule_expression": null, "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据具体的登录方式判断并提供建议", "knowledge_description": "数据库存在频繁登录诊断分析"}, {"knowledge_name": "检查用户过期或密码错误", "knowledge_description": "检查用户过期或密码错误"}], "description": "使用独立模式的Oracle数据库的会话数比进程数多出20%，数据库系统可能存在隐患", "rule_name": "db_session_count_greater_than_db_process_count", "id": "3073", "rule_expression": "([metric,2180073]-[metric,2180537]-[metric,2180539]-[metric,2180049]+[metric,2180536]+[metric,2180538])>([metric,2180049]*[num,$1]) && ([metric,2180073]>[num,$2])", "db_type": "Oracle", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-oracle活跃会话分析"}, {"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-oracle活跃会话分析"}, {"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_description": "分析指标、SQL相似度"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Oracle 因为IO问题引发活跃会话异常增长原因分析"}], "description": "IO延时过大或者异常引发了活跃会话过大", "rule_name": "IO_active_sessionI", "id": "11609", "rule_expression": "(([metric,3000006]>[num,$1]) ||([metric iname,1000105,3000006][oper,eq][str,3]))&&([metric,2189147]>[num,$2])", "db_type": "Oracle", "warning_level": "2", "warning_message": "因为IO延时增加而导致活跃会话数变大，当前IO延时{([metric,3000006]}毫秒，活跃会话数{([metric,2189147]}"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析db file sequential read指标 ，如果大于10毫秒说明IO性能已经受到影响", "knowledge_description": "分析db file sequential read指标 ，如果大于10毫秒说明IO性能已经受到影响"}, {"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_name": "数据库物理读过高时分析物理读过高的SQL和SEGMENT", "knowledge_description": "数据库物理读过高时分析物理读过高的SQL和SEGMENT"}, {"knowledge_name": "查看top sql判断是物理读导致还是执行次数原因", "knowledge_description": "物理读较多的TOP SQL"}], "description": "DB FILE SEQUENTIAL READ延时超过最近1小时平均值的5倍，数据库读IO存在隐患", "rule_name": "db_file_seq_read", "id": "118", "rule_expression": "[metric,2184302]/[metric hour avg,2184302]>[num,$1] && [metric,2184302]>[num,$2] && [metric,2189004]>[num,$3]", "db_type": "Oracle", "warning_level": "3", "warning_message": "DB FILE SEQUENTIAL READ延时（{[metric,2184302]}）ms，超过最近1小时平均值的{$1}倍，数据库读IO存在隐患"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "显示数据库负载指标情况", "knowledge_description": "显示数据库负载指标情况"}, {"knowledge_name": "查找执行次数比较高的TOP SQL", "knowledge_description": "查找执行次数比较高的TOP SQL"}], "description": "每秒事务数超过最近1小时平均值的10倍，应用可能存在异常", "rule_name": "transcation_count_raise", "id": "3077", "rule_expression": "[metric,2189003]/[metric hour avg,2189003]>[num,$1] && [metric,2189003]>[num,$2]", "db_type": "Oracle", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_name": "数据库物理写IO性能分析", "knowledge_description": "数据库物理写IO性能分析"}, {"knowledge_name": "数据库IO功能分析", "knowledge_description": "数据库IO功能分析"}, {"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-Oracle IO分析"}], "description": "写IO性能异常同时读IO正常，可能存储复制链路存在问题", "rule_name": "ora_dbio_abnormal", "id": "15720", "rule_expression": "([metric,2184302]*[num,$1]<[metric,2184304]) && ([metric,3001011] <[num,$2]) && ([metric,2189128] <[num,$3]) && ([metric,2184301] >[num,$4])&& ([metric,3000007] <[num,$5])", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据具体的登录方式判断并提供建议", "knowledge_description": "数据库存在频繁登录诊断分析"}], "description": "每秒LOGONS的数量超过30个，数据库存在安全风险 ", "rule_name": "count_logon_sec_critical", "id": "8214", "rule_expression": "([metric,2189018] >[num,$1]) ||([metric in time,10,1000105,2189018][oper,eq][str,3])", "db_type": "Oracle", "warning_level": "3", "warning_message": "每秒登录数突发异常增长，达到{[metric,2189018]}/秒"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "共享池分析", "knowledge_description": "共享池分析"}, {"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle共享池分析"}, {"knowledge_name": "共享池分析", "knowledge_description": "共享池分析"}, {"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle共享池分析"}], "description": "因为存在热表而引起rowcache等待延时过大，相关应用性能存在问题", "rule_name": "ora_hot_rowcache", "id": "15721", "rule_expression": "([metric,2184319] >[num,$1]) && ([metric,2189046] >[num,$2]) ", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "共享池分析", "knowledge_description": "共享池分析"}, {"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle共享池分析"}, {"knowledge_name": "根据闩锁等待类别进行分类处理", "knowledge_description": "latch等待事件分析，判断数据库出现哪类闩锁等待"}, {"knowledge_name": "分析数据库的latch hit命中率", "knowledge_description": "分析数据库的latch hit命中率"}, {"knowledge_name": "latch,mutex资源诊断工具集", "knowledge_description": "latch工具"}], "description": "因为共享池引发的闩锁性能问题", "rule_name": "latch_shared_pool", "id": "11597", "rule_expression": "([metric,2180200] <[num,$1] ||[metric,2184321] >[num,$2])&&([metric,3001011]>[num,$3])&&([metric,\t2189112]<[num,$4]||[metric,\t2189110]<[num,$4])&&([metric,2184321]>[num,$5])", "db_type": "Oracle", "warning_level": "4", "warning_message": "闩锁命中率较低（{[metric,2180200] }%），很可能是共享池引起的问题，共享池闩锁平均延时{[metric,2184321]}毫秒"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "Library cache pin/lock分析工具"}], "description": "Oracle数据库因为expression tracking导致library cache pin性能问题", "rule_name": "ora_library_cache_pin_high", "id": "15723", "rule_expression": "[metric,2180084]>[num,$1]", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "REDO NOWAIT分析", "knowledge_description": "REDO NOWAIT分析"}, {"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_name": "显示数据库负载指标情况", "knowledge_description": "显示数据库负载指标情况"}], "description": "Redo Allocation Hit Ratio小于100%，说明REDO存在性能隐患，需要检查REDO和事务的相关情况", "rule_name": "redo_allocation_hit_ratio", "id": "1065", "rule_expression": "[metric,2189002]<[num,$1] && [metric,2189016]>[num,$2]", "db_type": "Oracle", "warning_level": "3", "warning_message": "Redo Allocation Hit Ratio 值为{[metric,2189002]}%，REDO存在性能隐患，需要检查REDO和事务的相关情况"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "共享池分析", "knowledge_description": "共享池分析"}, {"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle共享池分析"}, {"knowledge_name": "查询sga内存组件内存变化情况", "knowledge_description": "查询sga内存组件内存变化情况"}, {"knowledge_name": "查找执行次数比较高的TOP SQL", "knowledge_description": "查找执行次数比较高的TOP SQL"}, {"knowledge_name": "数据库并发执行维度分析", "knowledge_description": "数据库并发执行维度分析"}, {"knowledge_name": "判断SGA RESIZE操作是否异常", "knowledge_description": "分析SGA RESIZE操作是否异常"}], "description": "SQL解析异常，可能引起了数据库性能问题", "rule_name": "ora_non_parse_cpu", "id": "15724", "rule_expression": "([metric,2180201]<[num,$1]) && ([metric,2189046] >[num,$2]) && (([metric,2184319] >[num,$3]) || ([metric,2184316] >[num,$4]) || ([metric,3000003] >[num,$5]))", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据具体的登录方式判断并提供建议", "knowledge_description": "数据库存在频繁登录诊断分析"}, {"knowledge_name": "检查用户过期或密码错误", "knowledge_description": "检查用户过期或密码错误"}], "description": "oracle数据库的进程数比会话数多25%以上，说明Oracle数据库的登录存在问题，可能有应用不停在重试登录", "rule_name": "db_process_count_greater_than_db_session_count", "id": "3036", "rule_expression": "([metric,2180049]-[metric,2180073]-[metric,2180536]+[metric,2180537]-[metric,2180538]+[metric,2180539])>([metric,2180073]*[num,$1]) && ([metric,2180049]>[num,$2])", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析数据库实例在指定时间窗口内的数据库会话情况", "knowledge_description": "分析数据库实例在指定时间窗口内的数据库会话情况"}, {"knowledge_name": "查找执行次数比较高的TOP SQL", "knowledge_description": "查找执行次数比较高的TOP SQL"}, {"knowledge_name": "通过每秒执行的事务数和SQL数，检查数据库负载情况", "knowledge_description": "每秒执行的事务数和SQL语句每秒执行数量可以从宏观上显示出数据库负载运行情况。"}, {"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-oracle活跃会话分析"}, {"knowledge_name": "数据库负载模型相关指标分析", "knowledge_description": "数据库负载模型相关指标分析"}, {"knowledge_name": "执行数量超过5的活跃SQL", "knowledge_description": "执行数量超过5的活跃SQL"}], "description": "活跃会话过多（超过70个）,数据库健康可能存在问题", "rule_name": "avg_active_session", "id": "120", "rule_expression": "[metric,2189147]>[num,$1] &&( [metric,2189147]<[cib,2201010,sessions])", "db_type": "Oracle", "warning_level": "3", "warning_message": "活跃会话数{[metric,2189147]}，超过{$1}个数据库健康可能存在问题"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "查看top sql判断是物理读导致还是执行次数原因", "knowledge_description": "物理读较多的TOP SQL"}, {"knowledge_name": "通过每秒执行的事务数和SQL数，检查数据库负载情况", "knowledge_description": "每秒执行的事务数和SQL语句每秒执行数量可以从宏观上显示出数据库负载运行情况。"}, {"knowledge_name": "检查Physical Reads Direct Per Sec指标", "knowledge_description": "检查数据库中的物理读是否由Direct path read引起的，如果是建议系统中禁用direct path read"}, {"knowledge_name": "如果存在TOP SQL，建议优化", "knowledge_description": "分析物理读较高的SQL，从awr中获取"}], "description": "每秒物理读远超出平时平均值10倍，并且超过基线0.8倍，说明应用或者数据出现了异常", "rule_name": "more_phy_read", "id": "5632", "rule_expression": "(([metric,2189004]>[num,$1]) || ([metric in time,10,1000105,2189004][oper,eq][str,3])) && ([metric,2189004]>[num,$2])", "db_type": "Oracle", "warning_level": "2", "warning_message": "每秒物理读{[metric,2189004]}超出小时平均值{$1}倍，并且超过基线{$2}倍，应用或者数据出现了异常"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle RAC分析"}, {"knowledge_name": "RAC DRM分析", "knowledge_description": "RAC DRM分析"}, {"knowledge_name": "显示数据库负载指标情况", "knowledge_description": "显示数据库负载指标情况"}, {"knowledge_name": "获取集群等待时间较高的TOP SQL", "knowledge_description": "获取集群等待时间较高的TOP SQL"}, {"knowledge_name": "操作系统网络总体分析", "knowledge_description": "操作系统网络总体分析"}, {"knowledge_name": "mtr网络诊断工具", "knowledge_description": "mtr网络诊断工具"}], "description": "gcs drm freeze in enter server mode平均等待时间超过100毫秒，并且gc remaster 平均等待时间超过100毫秒，说明DRM已经影响了数据库的性能，建议关闭DRM", "rule_name": "rac_drm_problem", "id": "15727", "rule_expression": "[metric,2180059]>[num,$1] && [metric,2180060]>[num,$2]", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "判断SGA RESIZE操作是否异常", "knowledge_description": "分析SGA RESIZE操作是否异常"}, {"knowledge_name": "查询sga内存组件内存变化情况", "knowledge_description": "查询sga内存组件内存变化情况"}, {"knowledge_name": "通过SGA ADVISE找到合适的SGA建议值，并根据物理内存的大小，判断是否可以实施", "knowledge_description": "SGA调整建议"}, {"knowledge_name": "查找执行次数比较高的TOP SQL", "knowledge_description": "查找执行次数比较高的TOP SQL"}], "description": "SGA RESIZE频繁导致了共享池问题", "rule_name": "sga_resize_shared_pool", "id": "8242", "rule_expression": "([metric,2180519] > [num,$1]) && ([metric,2180055]> [cib,2201010,cpu_count]*[num,$2]) && ([metric,2180050]> [num,$3]) ", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析CPU使用情况", "knowledge_description": "分析CPU使用情况"}, {"knowledge_name": "查询数据库并行执行情况", "knowledge_description": "查询数据库并行执行情况"}, {"knowledge_name": "执行数量超过5的活跃SQL", "knowledge_description": "执行数量超过5的活跃SQL"}, {"knowledge_name": "区分top sql是逻辑读还是执行次数增多进行进一步诊断", "knowledge_description": "逻辑读较多的TOP SQL"}, {"knowledge_description": "分析指标、SQL相似度"}], "description": "CPU使用率高于20%并且活跃的并行进程数量大于5个，说明并行查询可能影响了CPU资源", "rule_name": "parallel_process_result_in_cpu_problem", "id": "955", "rule_expression": "[metric,2189057]>[num,$1] && [metric,2189149]>[num,$2]", "db_type": "Oracle", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_name": "数据库IO功能分析", "knowledge_description": "数据库IO功能分析"}], "description": "在工作时间，数据库物理读大于80M/秒，数据库备份IO超过50M/秒，导致单块读延时是平时的2倍，说明备份对IO性能造成了影响", "rule_name": "rman_backup_problem", "id": "15731", "rule_expression": "[metric,2180052]>[num,$1] && [metric,2180057]>[num,$2] && [metric,2180057]>[metric hour avg,2180057]*[num,$3]", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_name": "数据库IO功能分析", "knowledge_description": "数据库IO功能分析"}], "description": "在工作时间，数据库物理读大于80M/秒，数据库备份IO超过50M/秒，导致单块读延时是平时的2倍，说明备份对IO性能造成了影响", "rule_name": "rman_backup_problem", "id": "3080", "rule_expression": "[metric,2180052]>[num,$1] && [metric,2180057]>[num,$2] && [metric,2180057]>[metric hour avg,2180057]*[num,$3]", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "通过oracle等待事件链分析得到导致等待事件的根会话", "knowledge_description": "生成Oracle数据库实例的会话等待链"}, {"knowledge_name": "检索数据库哪些数据行发生行锁，对于找出存在行锁的行，如果长时间存在，说明阻塞者可能存在问题，可以通过“检查阻塞者会话信息”工具找到该会话，并杀掉该会话来解锁", "knowledge_description": "【实时分析】检索当前数据库哪些数据行发生行锁"}, {"knowledge_name": "分析数据库行锁相关指标", "knowledge_description": "【历史分析】分析数据库行锁相关指标"}], "description": "行锁等待严重超时（超过3600秒）数据库可能存在未提交的会话", "rule_name": "row_lock_wait_time_long", "id": "15733", "rule_expression": null, "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "如果log file parallel write的平均等待时间超过10ms,说明数据库日志写IO性能存在问题；如果Log file sync与log file parallel write两个等待事件的平均等待时间的差值大于10ms 或者大于log file parallel write等待事件的平均等待时间的50%，则说明数据库日志同步存在性能问题", "knowledge_description": "LOG FILE SYNC等待延时超过n毫秒，说明数据库存在性能隐患"}, {"knowledge_description": "分析归档日志大小远小于redo log文件大小"}], "description": "LOG FILE SYNC等待严重超时，数据库存在安全隐患", "rule_name": "log_file_sync_wait_critical", "id": "8211", "rule_expression": "(([metric,2184301] >[num,$1]) ||([metric in time,10,1000105,2184301][oper,eq][str,3]))&&([metric,2184301] >[num,$2])", "db_type": "Oracle", "warning_level": "4", "warning_message": "日志同步延时严重超标或者异常波动，达到{[metric,2184301]}毫秒"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_name": "分析服务器IO设备的IO情况", "knowledge_description": "分析服务器IO设备的IO情况"}, {"knowledge_name": "数据库IO功能分析", "knowledge_description": "数据库IO功能分析"}, {"knowledge_name": "查看top sql判断是物理读导致还是执行次数原因", "knowledge_description": "物理读较多的TOP SQL"}, {"knowledge_name": "区分top sql是逻辑读还是执行次数增多进行进一步诊断", "knowledge_description": "逻辑读较多的TOP SQL"}, {"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-Oracle IO分析"}], "description": "操作系统IO延时严重超标（超过100毫秒），数据库存在较大风险", "rule_name": "IO_latency_oracle_critical", "id": "8017", "rule_expression": "[metric,3000006]>[num,$1] && ([metric,3000100]>[num,$2] || [metric,3000101]>[num,$3])", "db_type": "Oracle", "warning_level": "4", "warning_message": "操作系统IO延时{[metric,3000006]}毫秒，数据库存在较大风险"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析CPU使用情况", "knowledge_description": "分析CPU使用情况"}, {"knowledge_description": "分析指标、SQL相似度"}, {"knowledge_name": "操作系统核心资源分析", "knowledge_description": "操作系统核心资源分析"}, {"knowledge_name": "区分top sql是逻辑读还是执行次数增多进行进一步诊断", "knowledge_description": "逻辑读较多的TOP SQL"}, {"knowledge_name": "显示数据库负载指标情况", "knowledge_description": "显示数据库负载指标情况"}], "description": "操作系统r队列超过CPU数量的2倍且CPU使用率超过90%，则可能存在CPU资源瓶颈", "rule_name": "more_running_proc_oracle", "id": "8136", "rule_expression": "[metric,3000009]/[metric,3000010]>[num,$1] && [metric,3000003]>[num,$2]", "db_type": "Oracle", "warning_level": "4", "warning_message": "操作系统r队列{[metric,3000009]}超过CPU数量的{$1}倍且CPU使用率{[metric,3000003]}%超过{$2}%，可能存在CPU资源瓶颈"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "一般来说，日志切换后归档进程就会进行归档操作，当前最多有一个日志组未归档。如果未归档日志组数量超过2个，一般来说系统就有问题,如果归档有问题，建议检查归档目录的写IO性能是不是很慢，检查归档目录状态及错误原因", "knowledge_description": "未归档日志组数量超过2个，一般来说系统就有问题"}, {"knowledge_name": "文件系统目录使用率分析", "knowledge_description": "文件系统目录使用率分析"}, {"knowledge_name": "分析服务器IO设备的IO情况", "knowledge_description": "分析服务器IO设备的IO情况"}, {"knowledge_description": "分析归档日志大小远小于redo log文件大小"}], "description": "未归档的日志组数量超过总的日志组数量的一半，说明系统归档出现了异常，不及时处理可能导致数据库挂起", "rule_name": "no_archived_log", "id": "5634", "rule_expression": "[metric,2180513]/[cib,2201001,log_count]>[num,$1]", "db_type": "Oracle", "warning_level": "4", "warning_message": "系统归档异常，未归档日志组数量{[metric,2180513]}，超过总日志组数量{[cib,2201001,log_count]}的一半，不及时处理可能导致数据库挂起"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "判断SGA RESIZE操作是否异常", "knowledge_description": "分析SGA RESIZE操作是否异常"}, {"knowledge_name": "查询sga内存组件内存变化情况", "knowledge_description": "查询sga内存组件内存变化情况"}, {"knowledge_name": "通过SGA ADVISE找到合适的SGA建议值，并根据物理内存的大小，判断是否可以实施", "knowledge_description": "SGA调整建议"}, {"knowledge_name": "查找执行次数比较高的TOP SQL", "knowledge_description": "查找执行次数比较高的TOP SQL"}], "description": "SGA RESIZE频繁导致了共享池问题", "rule_name": "sga_resize_shared_pool", "id": "8228", "rule_expression": "([metric,2180519] > [num,$1]) && ([metric,2180055]> [cib,2201010,cpu_count]*[num,$2]) && ([metric,2180050]> [num,$3]) ", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_name": "分析服务器IO设备的IO情况", "knowledge_description": "分析服务器IO设备的IO情况"}, {"knowledge_name": "数据库IO功能分析", "knowledge_description": "数据库IO功能分析"}, {"knowledge_name": "查看top sql判断是物理读导致还是执行次数原因", "knowledge_description": "物理读较多的TOP SQL"}, {"knowledge_name": "区分top sql是逻辑读还是执行次数增多进行进一步诊断", "knowledge_description": "逻辑读较多的TOP SQL"}, {"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-Oracle IO分析"}], "description": "操作系统IO延时严重超标（超过100毫秒），数据库存在较大风险", "rule_name": "IO_latency_oracle_critical", "id": "8018", "rule_expression": "[metric,3000006]>[num,$1] && ([metric,3000100]>[num,$2] || [metric,3000101]>[num,$3])", "db_type": "Oracle", "warning_level": "4", "warning_message": "操作系统IO延时{[metric,3000006]}毫秒，数据库存在较大风险"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "实时查询表空间使用情况，不要频繁点击查询，对于超大数据库，频繁查询可能会导致数据库hang死", "knowledge_description": "实时查询表空间使用情况"}, {"knowledge_name": "Oracle数据库表空间检查", "knowledge_description": "Oracle数据库表空间检查"}, {"knowledge_name": "查询数据库表空间信息", "knowledge_description": "查询数据库表空间信息"}, {"knowledge_description": "表空间使用情况检查"}], "description": "表空间容量风险高，数据库中存在表空间使用率大于95%且可用天数小于15天，存在表空间满的风险", "rule_name": "oracle_tbs_capacity_high_rish", "id": "15717", "rule_expression": "[metric max in time,240,2180045]==[num,$1]", "db_type": "Oracle", "warning_level": "4", "warning_message": "表空间({[metric in time,240,2180046]})容量风险高，使用率大于95%且可用天数小于15天，存在表空间满的风险"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "oracle数据库连接失败分析", "knowledge_description": "oracle数据库连接失败分析"}], "description": "KYD连接oracle数据库的用户密码过期", "rule_name": "oracle_dsmart_password_expried", "id": "8543", "rule_expression": "[metric,1000000][oper,contains][str,ORA-28001]", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "数据库IO功能分析", "knowledge_description": "数据库IO功能分析"}, {"knowledge_name": "数据库物理写IO性能分析", "knowledge_description": "数据库物理写IO性能分析"}, {"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_name": "显示数据库rman备份任务信息", "knowledge_description": "显示数据库rman备份任务信息"}], "description": "DB CACHE的物理读流量小于总的读IO流量的60%，说明存在大量非正常的IO操作", "rule_name": "db_cache_phy_read_ratio_low", "id": "2001", "rule_expression": "[metric,2180056]/[metric,2180061]<[num,$1] && [metric,2180061]>[num,$2]", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "实时查询表空间使用情况，不要频繁点击查询，对于超大数据库，频繁查询可能会导致数据库hang死", "knowledge_description": "实时查询表空间使用情况"}, {"knowledge_name": "Oracle数据库表空间检查", "knowledge_description": "Oracle数据库表空间检查"}, {"knowledge_name": "查询数据库表空间信息", "knowledge_description": "查询数据库表空间信息"}, {"knowledge_description": "表空间使用情况检查"}], "description": "表空间容量风险高，数据库中存在表空间使用率大于95%且可用天数小于15天，存在表空间满的风险", "rule_name": "oracle_tbs_capacity_high_rish", "id": "12452", "rule_expression": "[metric max in time,240,2180045]==[num,$1]", "db_type": "Oracle", "warning_level": "4", "warning_message": "表空间({[metric in time,240,2180046]})容量风险高，使用率大于95%且可用天数小于15天，存在表空间满的风险"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "oracle数据库连接失败分析", "knowledge_description": "oracle数据库连接失败分析"}], "description": "KYD连接oracle数据库的用户密码过期", "rule_name": "oracle_dsmart_password_expried", "id": "8560", "rule_expression": "[metric,1000000][oper,contains][str,ORA-28001]", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_name": "分析服务器IO设备的IO情况", "knowledge_description": "分析服务器IO设备的IO情况"}, {"knowledge_name": "数据库IO功能分析", "knowledge_description": "数据库IO功能分析"}, {"knowledge_name": "查看top sql判断是物理读导致还是执行次数原因", "knowledge_description": "物理读较多的TOP SQL"}, {"knowledge_name": "区分top sql是逻辑读还是执行次数增多进行进一步诊断", "knowledge_description": "逻辑读较多的TOP SQL"}, {"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-Oracle IO分析"}], "description": "操作系统IO延时过高（60ms-100ms)，数据库存在风险", "rule_name": "IO_latency_oracle_error", "id": "8050", "rule_expression": "[metric,3000006]<=[num,100] && [metric,3000006]>[num,$1] && ([metric,3000100]>[num,$2] || [metric,3000101]>[num,$3])", "db_type": "Oracle", "warning_level": "3", "warning_message": "操作系统IO延时过高（{[metric,3000006]}ms)，数据库存在风险"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "oracle数据库连接失败分析", "knowledge_description": "oracle数据库连接失败分析"}], "description": "KYD连接oracle数据库的用户密码过期", "rule_name": "oracle_dsmart_password_expried", "id": "8556", "rule_expression": "[metric,1000000][oper,contains][str,ORA-28001]", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "oracle数据库连接失败分析", "knowledge_description": "oracle数据库连接失败分析"}], "description": "KYD到oracle数据库连接配置有问题，导致连接失败", "rule_name": "oracle_dsmart_connection_error", "id": "8488", "rule_expression": "([metric,1000000][oper,contains][str,ORA-12505] || [metric,1000000][oper,contains][str,ORA-12514]) && ([metric list in time,3,3000060][oper,any eq][cib,2201001,instance_name])", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle RAC分析"}, {"knowledge_name": "操作系统网络层面丢包分析", "knowledge_description": "操作系统网络层面丢包分析"}, {"knowledge_name": "RAC DRM分析", "knowledge_description": "RAC DRM分析"}, {"knowledge_name": "对找出的SQL语句进行优化", "knowledge_description": "查找集群等待时间比较大的SQL语句"}, {"knowledge_name": "rac集群网络问题分析", "knowledge_description": "rac集群网络问题分析"}, {"knowledge_name": "进行Top SEGMENT和SQL分析", "knowledge_description": "如果数据库集群间出现了热块冲突，会导致RAC性能出现严重下降"}, {"knowledge_name": "Oracle等待事件分析", "knowledge_description": "Oracle等待事件分析"}], "description": "gc block lost值大于0，RAC可能存在风险", "rule_name": "oracle_gc_block_lost", "id": "8638", "rule_expression": "([metric,2189102] >[num,$1] || [metric,2189101] >[num,$2]) &&([metric,2189069] >[num,$3])", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "oracle数据库连接失败分析", "knowledge_description": "oracle数据库连接失败分析"}], "description": "KYD连接oracle数据库的用户密码过期", "rule_name": "oracle_dsmart_password_expried", "id": "8557", "rule_expression": "[metric,1000000][oper,contains][str,ORA-28001]", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "数据库IO功能分析", "knowledge_description": "数据库IO功能分析"}, {"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_name": "检查Physical Reads Direct Per Sec指标", "knowledge_description": "检查数据库中的物理读是否由Direct path read引起的，如果是建议系统中禁用direct path read"}], "description": "数据库IO延时过大，DBIO以外的IO比例过大", "rule_name": "dbio_cacheio_ratio_low", "id": "8263", "rule_expression": "[metric,2180056]/[metric,2180061]<[num,$1] && [metric,2180061]>[num,$2]  && [metric,2184302]>[num,$3]", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据具体的登录方式判断并提供建议", "knowledge_description": "数据库存在频繁登录诊断分析"}, {"knowledge_name": "检查用户过期或密码错误", "knowledge_description": "检查用户过期或密码错误"}], "description": "使用独立模式的Oracle数据库的会话数比进程数多出20%，数据库系统可能存在隐患", "rule_name": "db_session_count_greater_than_db_process_count", "id": "5713", "rule_expression": "([metric,2180073]-[metric,2180537]-[metric,2180539]-[metric,2180049]+[metric,2180536]+[metric,2180538])>([metric,2180049]*[num,$1]) && ([metric,2180073]>[num,$2])", "db_type": "Oracle", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "实时查询表空间使用情况，不要频繁点击查询，对于超大数据库，频繁查询可能会导致数据库hang死", "knowledge_description": "实时查询表空间使用情况"}, {"knowledge_name": "Oracle数据库表空间检查", "knowledge_description": "Oracle数据库表空间检查"}, {"knowledge_name": "查询数据库表空间信息", "knowledge_description": "查询数据库表空间信息"}, {"knowledge_description": "表空间使用情况检查"}], "description": "表空间容量风险高，数据库中存在表空间使用率大于95%且可用天数小于15天，存在表空间满的风险", "rule_name": "oracle_tbs_capacity_high_rish", "id": "12451", "rule_expression": "[metric max in time,240,2180045]==[num,$1]", "db_type": "Oracle", "warning_level": "4", "warning_message": "表空间({[metric in time,240,2180046]})容量风险高，使用率大于95%且可用天数小于15天，存在表空间满的风险"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "oracle数据库连接失败分析", "knowledge_description": "oracle数据库连接失败分析"}], "description": "KYD连接oracle数据库的用户密码过期", "rule_name": "oracle_dsmart_password_expried", "id": "8549", "rule_expression": "[metric,1000000][oper,contains][str,ORA-28001]", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "oracle数据库连接失败分析", "knowledge_description": "oracle数据库连接失败分析"}], "description": "KYD连接oracle数据库的用户密码过期", "rule_name": "oracle_dsmart_password_expried", "id": "8550", "rule_expression": "[metric,1000000][oper,contains][str,ORA-28001]", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据具体的登录方式判断并提供建议", "knowledge_description": "数据库存在频繁登录诊断分析"}, {"knowledge_name": "分析数据库实例在指定时间窗口内的数据库会话情况", "knowledge_description": "分析数据库实例在指定时间窗口内的数据库会话情况"}, {"knowledge_name": "检查用户过期或密码错误", "knowledge_description": "检查用户过期或密码错误"}, {"knowledge_name": "根据主机名称查询数据库会话及进程信息", "knowledge_description": "根据主机名称查询数据库会话及进程信息"}], "description": "数据库当前进程数超过process参数的95%，数据库存在连接数满的风险", "rule_name": "process_up_to_resource_limit", "id": "8042", "rule_expression": "[metric,2180049]>[cib,2201010,processes]*[num,$1]", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "oracle数据库连接失败分析", "knowledge_description": "oracle数据库连接失败分析"}], "description": "KYD连接oracle数据库的用户密码过期", "rule_name": "oracle_dsmart_password_expried", "id": "8547", "rule_expression": "[metric,1000000][oper,contains][str,ORA-28001]", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "oracle数据库连接失败分析", "knowledge_description": "oracle数据库连接失败分析"}], "description": "KYD连接oracle数据库的用户密码过期", "rule_name": "oracle_dsmart_password_expried", "id": "8544", "rule_expression": "[metric,1000000][oper,contains][str,ORA-28001]", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "oracle数据库连接失败分析", "knowledge_description": "oracle数据库连接失败分析"}], "description": "KYD连接oracle数据库的用户密码过期", "rule_name": "oracle_dsmart_password_expried", "id": "8555", "rule_expression": "[metric,1000000][oper,contains][str,ORA-28001]", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "显示数据库每天产生的归档日志的大小", "knowledge_description": "显示数据库每天产生的归档日志的大小"}, {"knowledge_name": "及时清理归档日志", "knowledge_description": "检查Oracle 归档日志空间使用情况"}], "description": "归档空间使用率超过90%并且预估可用时间小于3天，数据库存在归档满的风险。", "rule_name": "archive_space_exceed", "id": "15546", "rule_expression": "[metric,2180521]>[num,$1] && [metric,2180523]<[num,$2]", "db_type": "Oracle", "warning_level": "4", "warning_message": "数据库存在归档满的风险，归档空间使用率{[metric,2180521]}%，预估可用时间{[metric,2180523]}天"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-oracle活跃会话分析"}, {"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-oracle活跃会话分析"}, {"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_description": "分析指标、SQL相似度"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Oracle 因为IO问题引发活跃会话异常增长原因分析"}], "description": "IO延时过大或者异常引发了活跃会话过大", "rule_name": "IO_active_sessionI", "id": "15572", "rule_expression": "(([metric,3000006]>[num,$1]) ||([metric iname,1000105,3000006][oper,eq][str,3]))&&([metric,2189147]>[num,$2])", "db_type": "Oracle", "warning_level": "2", "warning_message": "因为IO延时增加而导致活跃会话数变大，当前IO延时{([metric,3000006]}毫秒，活跃会话数{([metric,2189147]}"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "oracle数据库连接失败分析", "knowledge_description": "oracle数据库连接失败分析"}], "description": "KYD连接oracle数据库的用户密码过期", "rule_name": "oracle_dsmart_password_expried", "id": "8551", "rule_expression": "[metric,1000000][oper,contains][str,ORA-28001]", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "实时查询表空间使用情况，不要频繁点击查询，对于超大数据库，频繁查询可能会导致数据库hang死", "knowledge_description": "实时查询表空间使用情况"}, {"knowledge_name": "Oracle数据库表空间检查", "knowledge_description": "Oracle数据库表空间检查"}, {"knowledge_name": "查询数据库表空间信息", "knowledge_description": "查询数据库表空间信息"}, {"knowledge_description": "表空间使用情况检查"}], "description": "表空间容量风险高，数据库中存在表空间使用率大于95%且可用天数小于15天，存在表空间满的风险", "rule_name": "oracle_tbs_capacity_high_rish", "id": "17345", "rule_expression": "[metric max in time,240,2180045]==[num,$1]", "db_type": "Oracle", "warning_level": "4", "warning_message": "表空间({[metric in time,240,2180046]})容量风险高，使用率大于95%且可用天数小于15天，存在表空间满的风险"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "oracle数据库连接失败分析", "knowledge_description": "oracle数据库连接失败分析"}], "description": "KYD连接oracle数据库的用户密码过期", "rule_name": "oracle_dsmart_password_expried", "id": "8559", "rule_expression": "[metric,1000000][oper,contains][str,ORA-28001]", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "oracle数据库连接失败分析", "knowledge_description": "oracle数据库连接失败分析"}], "description": "KYD连接oracle数据库的用户密码过期", "rule_name": "oracle_dsmart_password_expried", "id": "8552", "rule_expression": "[metric,1000000][oper,contains][str,ORA-28001]", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "oracle数据库连接失败分析", "knowledge_description": "oracle数据库连接失败分析"}], "description": "KYD连接oracle数据库的用户密码过期", "rule_name": "oracle_dsmart_password_expried", "id": "8553", "rule_expression": "[metric,1000000][oper,contains][str,ORA-28001]", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "oracle数据库连接失败分析", "knowledge_description": "oracle数据库连接失败分析"}], "description": "KYD连接oracle数据库的用户密码过期", "rule_name": "oracle_dsmart_password_expried", "id": "8554", "rule_expression": "[metric,1000000][oper,contains][str,ORA-28001]", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "查找执行次数比较高的TOP SQL", "knowledge_description": "查找执行次数比较高的TOP SQL"}, {"knowledge_name": "查找解析次数比较高的SQL", "knowledge_description": "查找解析次数比较高的SQL"}, {"knowledge_name": "根据闩锁等待类别进行分类处理", "knowledge_description": "latch等待事件分析，判断数据库出现哪类闩锁等待"}, {"knowledge_name": "根据智能诊断发现的异常指标以及推荐的诊断路径下钻分析", "knowledge_description": "泛路由-Oracle闩锁分析"}], "description": "因为解析问题导致的闩锁争用", "rule_name": "latch_parse", "id": "15579", "rule_expression": "([metric,2180200] <[num,$1])&&([metric,3001011]>[num,$2])&&([metric,2189044]>[num,$3])&&([metric,2189046]>[num,$4])&&([metric,2189121]>[num,2000])&&([metric,2184315]>[num,$5]||[metric,2184314]>[num,$5])", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "共享池分析", "knowledge_description": "共享池分析"}, {"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle共享池分析"}, {"knowledge_name": "根据闩锁等待类别进行分类处理", "knowledge_description": "latch等待事件分析，判断数据库出现哪类闩锁等待"}, {"knowledge_name": "分析数据库的latch hit命中率", "knowledge_description": "分析数据库的latch hit命中率"}, {"knowledge_name": "latch,mutex资源诊断工具集", "knowledge_description": "latch工具"}], "description": "因为共享池引发的闩锁性能问题", "rule_name": "latch_shared_pool", "id": "15580", "rule_expression": "([metric,2180200] <[num,$1] ||[metric,2184321] >[num,$2])&&([metric,3001011]>[num,$3])&&([metric,\t2189112]<[num,$4]||[metric,\t2189110]<[num,$4])&&([metric,2184321]>[num,$5])", "db_type": "Oracle", "warning_level": "3", "warning_message": "闩锁命中率较低（{[metric,2180200] }%），很可能是共享池引起的问题，共享池闩锁平均延时{[metric,2184321]}毫秒"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "区分top sql是逻辑读还是执行次数增多进行进一步诊断", "knowledge_description": "逻辑读较多的TOP SQL"}, {"knowledge_name": "通过每秒执行的事务数和SQL数，检查数据库负载情况", "knowledge_description": "每秒执行的事务数和SQL语句每秒执行数量可以从宏观上显示出数据库负载运行情况。"}, {"knowledge_name": "如果存在TOP SQL，建议优化", "knowledge_description": "分析逻辑读较高的SQL，从awr中获取"}], "description": "每秒逻辑读出现异常增长，说明应用或者数据出现了异常", "rule_name": "more_logic_read", "id": "15585", "rule_expression": "(([metric,2189030]>[num,$1]) || ([metric in time,10,1000105,2189030][oper,eq][str,3])) && ([metric,2189030]>[num,$2])", "db_type": "Oracle", "warning_level": "2", "warning_message": "每秒逻辑读出现异常增长，说明应用或者数据的应用可能出现了异常，当前逻辑读为{[metric,2189030]}/秒"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "数据库物理写IO性能分析", "knowledge_description": "数据库物理写IO性能分析"}, {"knowledge_description": "并发SQL语句分析"}, {"knowledge_name": "通过每秒执行的事务数和SQL数，检查数据库负载情况", "knowledge_description": "每秒执行的事务数和SQL语句每秒执行数量可以从宏观上显示出数据库负载运行情况。"}, {"knowledge_name": "显示数据库中的事务信息", "knowledge_description": "显示数据库中的事务信息"}, {"knowledge_name": "数据库并发执行维度分析", "knowledge_description": "数据库并发执行维度分析"}], "description": "物理写异常增长，应用可能存在异常", "rule_name": "more_phyisical_write", "id": "15586", "rule_expression": "(([metric,2189006]>[num,$1]) || ([metric in time,10,1000105,2189006][oper,eq][str,3])) && ([metric,2189006]>[num,$2])", "db_type": "Oracle", "warning_level": "2", "warning_message": "数据库物理写异常增长或者每秒物理写超过{[num,$1]}，应用可能存在异常，告警发生时的最新物理写{[metric,2189006]}/秒"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "oracle数据库连接失败分析", "knowledge_description": "oracle数据库连接失败分析"}], "description": "数据库自身故障导致连接失败", "rule_name": "oracle_db_broken_connect_failed", "id": "8441", "rule_expression": "([metric,1000000][oper,contains][str,ORA-12516]) || ([metric,1000000][oper,contains][str,ORA-00257]) || (([metric,1000000][oper,contains][str,ORA-12505] || [metric,1000000][oper,contains][str,ORA-12514]) && ([metric list in time,3,3000060][oper,all neq][cib,2201001,instance_name])) || (([metric,1000000][oper,contains][str,The Network Adapter could not establish the connection]) && ([metric in time,3,3000061]<[num,1]))", "db_type": "Oracle", "warning_level": "4", "warning_message": "数据库自身故障导致连接失败：{[metric,1000000]}"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "Library cache pin/lock分析工具"}], "description": "Oracle数据库因为expression tracking导致library cache pin性能问题", "rule_name": "ora_library_cache_pin_high", "id": "13191", "rule_expression": "[metric,2180084]>[num,$1]", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "查看全表扫描的对象"}, {"knowledge_name": "查看top sql判断是物理读导致还是执行次数原因", "knowledge_description": "物理读较多的TOP SQL"}, {"knowledge_name": "区分top sql是逻辑读还是执行次数增多进行进一步诊断", "knowledge_description": "逻辑读较多的TOP SQL"}, {"knowledge_name": "获取执行时间比较高的TOP SQL", "knowledge_description": "获取执行时间比较高的TOP SQL"}], "description": "Long table  scan Per Sec超过小时平均值的10倍，应用可能存在异常", "rule_name": "long_table_scan_time_raise", "id": "3087", "rule_expression": "[metric,2189036]/[metric hour avg,2189036]>[num,$1] && [metric,2189036]>[num,$2][@Denominator0,0]", "db_type": "Oracle", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "Library cache pin/lock分析工具"}], "description": "Oracle数据库因为expression tracking导致library cache pin性能问题", "rule_name": "ora_library_cache_pin_high", "id": "13194", "rule_expression": "[metric,2180084]>[num,$1]", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "查看全表扫描的对象"}, {"knowledge_name": "查看top sql判断是物理读导致还是执行次数原因", "knowledge_description": "物理读较多的TOP SQL"}, {"knowledge_name": "区分top sql是逻辑读还是执行次数增多进行进一步诊断", "knowledge_description": "逻辑读较多的TOP SQL"}, {"knowledge_name": "获取执行时间比较高的TOP SQL", "knowledge_description": "获取执行时间比较高的TOP SQL"}], "description": "Long table  scan Per Sec超过小时平均值的10倍，应用可能存在异常", "rule_name": "long_table_scan_time_raise", "id": "15584", "rule_expression": "[metric,2189036]/[metric hour avg,2189036]>[num,$1] && [metric,2189036]>[num,$2][@Denominator0,0]", "db_type": "Oracle", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "如果log file parallel write的平均等待时间超过10ms,说明数据库日志写IO性能存在问题；如果Log file sync与log file parallel write两个等待事件的平均等待时间的差值大于10ms 或者大于log file parallel write等待事件的平均等待时间的50%，则说明数据库日志同步存在性能问题", "knowledge_description": "LOG FILE SYNC等待延时超过n毫秒，说明数据库存在性能隐患"}, {"knowledge_description": "分析归档日志大小远小于redo log文件大小"}], "description": "LOG FILE SYNC等待严重超时，数据库存在安全隐患", "rule_name": "log_file_sync_wait_critical", "id": "15583", "rule_expression": "(([metric,2184301] >[num,$1]) ||([metric in time,10,1000105,2184301][oper,eq][str,3]))&&([metric,2184301] >[num,$2])", "db_type": "Oracle", "warning_level": "4", "warning_message": "日志同步延时严重超标或者异常波动，达到{[metric,2184301]}毫秒"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "分析归档日志大小远小于redo log文件大小"}, {"knowledge_name": "分析服务器IO设备的IO情况", "knowledge_description": "分析服务器IO设备的IO情况"}, {"knowledge_name": "数据库物理写IO性能分析", "knowledge_description": "数据库物理写IO性能分析"}, {"knowledge_name": "enq: CF - contention等待事件分析", "knowledge_description": "enq: CF - contention等待事件分析"}, {"knowledge_name": "分析数据库中enq: KO - fast object checkpoint等待事件", "knowledge_description": "分析数据库中enq: KO - fast object checkpoint等待事件"}, {"knowledge_name": "查找执行次数比较高的TOP SQL", "knowledge_description": "查找执行次数比较高的TOP SQL"}, {"knowledge_name": "数据库负载模型相关指标分析", "knowledge_description": "数据库负载模型相关指标分析"}, {"knowledge_name": "数据库负载维度分析", "knowledge_description": "数据库负载维度分析"}], "description": "活跃REDO LOG组数超过总日志组数量的2/3则系统可能有问题", "rule_name": "active_redo_log", "id": "5601", "rule_expression": "[metric,2180514]/([cib,2201001,log_count] -[num,1]) > [num,$1]", "db_type": "Oracle", "warning_level": "3", "warning_message": "活跃REDO LOG组数{[metric,2180514]}，超过总日志组数量（{[cib,2201001,log_count]}）的2/3，系统可能有问题"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断发现的异常指标以及推荐的诊断路径下钻分析", "knowledge_description": "泛路由-Oracle闩锁分析"}, {"knowledge_name": "根据闩锁等待类别进行分类处理", "knowledge_description": "latch等待事件分析，判断数据库出现哪类闩锁等待"}], "description": "Oracle数据库的闩锁存在问题，数据库存在风险", "rule_name": "ora_latch_free", "id": "8725", "rule_expression": "([metric,2180200] <[num,$1] ||[metric,2184322] >[num,$2]) &&([metric,3000003] >[num,$3])&&([metric,3001011] >[num,$4])", "db_type": "Oracle", "warning_level": "3", "warning_message": "闩锁争用严重，数据库存在风险（当前闩锁命中率{[metric,2180200]}%,闩锁平均等待时间：{[metric,2184322]}，SYS CPU使用率{[metric,3001011] }%"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "Library cache pin/lock分析工具"}], "description": "Oracle数据库因为expression tracking导致library cache pin性能问题", "rule_name": "ora_library_cache_pin_high", "id": "13193", "rule_expression": "[metric,2180084]>[num,$1]", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "共享池分析", "knowledge_description": "共享池分析"}, {"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle共享池分析"}, {"knowledge_name": "查询sga内存组件内存变化情况", "knowledge_description": "查询sga内存组件内存变化情况"}, {"knowledge_name": "查找执行次数比较高的TOP SQL", "knowledge_description": "查找执行次数比较高的TOP SQL"}, {"knowledge_name": "数据库并发执行维度分析", "knowledge_description": "数据库并发执行维度分析"}, {"knowledge_name": "判断SGA RESIZE操作是否异常", "knowledge_description": "分析SGA RESIZE操作是否异常"}], "description": "SQL解析异常，可能引起了数据库性能问题", "rule_name": "ora_non_parse_cpu", "id": "8827", "rule_expression": "([metric,2180201]<[num,$1]) && ([metric,2189046] >[num,$2]) && (([metric,2184319] >[num,$3]) || ([metric,2184316] >[num,$4]) || ([metric,3000003] >[num,$5]))", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析CPU使用情况", "knowledge_description": "分析CPU使用情况"}, {"knowledge_description": "分析指标、SQL相似度"}, {"knowledge_name": "操作系统核心资源分析", "knowledge_description": "操作系统核心资源分析"}, {"knowledge_name": "区分top sql是逻辑读还是执行次数增多进行进一步诊断", "knowledge_description": "逻辑读较多的TOP SQL"}, {"knowledge_name": "显示数据库负载指标情况", "knowledge_description": "显示数据库负载指标情况"}], "description": "操作系统r队列超过CPU数量的2倍且CPU使用率超过90%，则可能存在CPU资源瓶颈", "rule_name": "more_running_proc_oracle", "id": "15588", "rule_expression": "[metric,3000009]/[metric,3000010]>[num,$1] && [metric,3000003]>[num,$2]", "db_type": "Oracle", "warning_level": "3", "warning_message": "操作系统r队列{[metric,3000009]}超过CPU数量的{$1}倍且CPU使用率{[metric,3000003]}%超过{$2}%，可能存在CPU资源瓶颈"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "如果log file parallel write的平均等待时间超过10ms,说明数据库日志写IO性能存在问题；如果Log file sync与log file parallel write两个等待事件的平均等待时间的差值大于10ms 或者大于log file parallel write等待事件的平均等待时间的50%，则说明数据库日志同步存在性能问题", "knowledge_description": "LOG FILE SYNC等待延时超过n毫秒，说明数据库存在性能隐患"}, {"knowledge_description": "分析归档日志大小远小于redo log文件大小"}], "description": "LOG FILE SYNC等待严重超时，数据库存在安全隐患", "rule_name": "log_file_sync_wait_critical", "id": "17327", "rule_expression": "(([metric,2184301] >[num,$1]) ||([metric in time,10,1000105,2184301][oper,eq][str,3]))&&([metric,2184301] >[num,$2])", "db_type": "Oracle", "warning_level": "4", "warning_message": "日志同步延时严重超标或者异常波动，达到{[metric,2184301]}毫秒"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "一般来说，日志切换后归档进程就会进行归档操作，当前最多有一个日志组未归档。如果未归档日志组数量超过2个，一般来说系统就有问题,如果归档有问题，建议检查归档目录的写IO性能是不是很慢，检查归档目录状态及错误原因", "knowledge_description": "未归档日志组数量超过2个，一般来说系统就有问题"}, {"knowledge_name": "文件系统目录使用率分析", "knowledge_description": "文件系统目录使用率分析"}, {"knowledge_name": "分析服务器IO设备的IO情况", "knowledge_description": "分析服务器IO设备的IO情况"}, {"knowledge_description": "分析归档日志大小远小于redo log文件大小"}], "description": "未归档的日志组数量超过总的日志组数量的一半，说明系统归档出现了异常，不及时处理可能导致数据库挂起", "rule_name": "no_archived_log", "id": "15589", "rule_expression": "[metric,2180513]/[cib,2201001,log_count]>[num,$1]", "db_type": "Oracle", "warning_level": "4", "warning_message": "系统归档异常，未归档日志组数量{[metric,2180513]}，超过总日志组数量{[cib,2201001,log_count]}的一半，不及时处理可能导致数据库挂起"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据具体的登录方式判断并提供建议", "knowledge_description": "数据库存在频繁登录诊断分析"}, {"knowledge_name": "分析数据库实例在指定时间窗口内的数据库会话情况", "knowledge_description": "分析数据库实例在指定时间窗口内的数据库会话情况"}, {"knowledge_name": "检查用户过期或密码错误", "knowledge_description": "检查用户过期或密码错误"}, {"knowledge_name": "根据主机名称查询数据库会话及进程信息", "knowledge_description": "根据主机名称查询数据库会话及进程信息"}], "description": "数据库当前进程数超过process参数的95%，数据库存在连接数满的风险", "rule_name": "process_up_to_resource_limit", "id": "8044", "rule_expression": "[metric,2180049]>[cib,2201010,processes]*[num,$1]", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "scn增长率检查"}, {"knowledge_name": "通过每秒执行的事务数和SQL数，检查数据库负载情况", "knowledge_description": "每秒执行的事务数和SQL语句每秒执行数量可以从宏观上显示出数据库负载运行情况。"}], "description": "每秒calls to kcmgas平均值大于16K则系统存在SCN HEADROOM问题隐患", "rule_name": "kcmgas", "id": "77", "rule_expression": null, "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "操作系统核心资源分析", "knowledge_description": "操作系统核心资源分析"}, {"knowledge_name": "显示数据库负载指标情况", "knowledge_description": "显示数据库负载指标情况"}, {"knowledge_name": "区分top sql是逻辑读还是执行次数增多进行进一步诊断", "knowledge_description": "逻辑读较多的TOP SQL"}, {"knowledge_name": "服务器内存分析", "knowledge_description": "服务器内存分析"}, {"knowledge_name": "找出内存占用率较高的Top20进程", "knowledge_description": "找出内存占用率较高的Top20进程"}], "description": "物理内存空闲小于100M，且SWAP使用率大于30%，系统存在风险", "rule_name": "free_mem_oracle", "id": "3339", "rule_expression": "[metric,3000007]<[num,$1]*[num,1024] && [metric,3001031]>[num,$2]", "db_type": "Oracle", "warning_level": "2", "warning_message": "物理内存空闲{[metric,3000007]/[num,1024]}M，且SWAP使用率{[metric,3001031]}%，系统存在高风险"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle RAC分析"}, {"knowledge_name": "分析指定时间间隔内GC相关指标可能存在的问题", "knowledge_description": "分析指定时间间隔内GC相关指标"}, {"knowledge_name": "RAC DRM分析", "knowledge_description": "RAC DRM分析"}, {"knowledge_name": "获取集群等待时间较高的TOP SQL", "knowledge_description": "获取集群等待时间较高的TOP SQL"}, {"knowledge_name": "对未分区的对象进行分区，对碎片严重的对象进行重组整理", "knowledge_description": "找出数据库集群间心跳流量比较大的SEGMENT，检查是否分区并对其进行碎片分析"}, {"knowledge_name": "数据库物理读过高时分析物理读过高的SQL和SEGMENT", "knowledge_description": "数据库物理读过高时分析物理读过高的SQL和SEGMENT"}, {"knowledge_name": "操作系统网络总体分析", "knowledge_description": "操作系统网络总体分析"}, {"knowledge_name": "操作系统网络层面丢包分析", "knowledge_description": "操作系统网络层面丢包分析"}, {"knowledge_name": "mtr网络诊断工具", "knowledge_description": "mtr网络诊断工具"}], "description": "Avg global cache cr block receive time 大于20毫秒并且RAC INTERCONNECT流量大于30M，说明集群性能存在隐患", "rule_name": "rac_interconnect_time_and_flow_problem", "id": "5638", "rule_expression": "[metric,2189098]>[num,$1] && [metric,2180204]>[num,$2]", "db_type": "Oracle", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "如果log file parallel write的平均等待时间超过10ms,说明数据库日志写IO性能存在问题；如果Log file sync与log file parallel write两个等待事件的平均等待时间的差值大于10ms 或者大于log file parallel write等待事件的平均等待时间的50%，则说明数据库日志同步存在性能问题", "knowledge_description": "LOG FILE SYNC等待延时超过n毫秒，说明数据库存在性能隐患"}, {"knowledge_description": "分析归档日志大小远小于redo log文件大小"}], "description": "LOG FILE SYNC等待严重超时，数据库存在安全隐患", "rule_name": "log_file_sync_wait_critical", "id": "8213", "rule_expression": "(([metric,2184301] >[num,$1]) ||([metric in time,10,1000105,2184301][oper,eq][str,3]))&&([metric,2184301] >[num,$2])", "db_type": "Oracle", "warning_level": "4", "warning_message": "日志同步延时严重超标或者异常波动，达到{[metric,2184301]}毫秒"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "REDO NOWAIT分析", "knowledge_description": "REDO NOWAIT分析"}, {"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_name": "显示数据库负载指标情况", "knowledge_description": "显示数据库负载指标情况"}], "description": "Redo Allocation Hit Ratio小于100%，说明REDO存在性能隐患，需要检查REDO和事务的相关情况", "rule_name": "redo_allocation_hit_ratio", "id": "5639", "rule_expression": "[metric,2189002]<[num,$1] && [metric,2189016]>[num,$2]", "db_type": "Oracle", "warning_level": "3", "warning_message": "Redo Allocation Hit Ratio 值为{[metric,2189002]}%，REDO存在性能隐患，需要检查REDO和事务的相关情况"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "oracle数据库连接失败分析", "knowledge_description": "oracle数据库连接失败分析"}], "description": "KYD连接oracle数据库的用户密码过期", "rule_name": "oracle_dsmart_password_expried", "id": "15597", "rule_expression": "[metric,1000000][oper,contains][str,ORA-28001]", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "oracle数据库连接失败分析", "knowledge_description": "oracle数据库连接失败分析"}], "description": "数据库自身故障导致连接失败", "rule_name": "oracle_db_broken_connect_failed", "id": "15592", "rule_expression": "([metric,1000000][oper,contains][str,ORA-12516]) || ([metric,1000000][oper,contains][str,ORA-00257]) || (([metric,1000000][oper,contains][str,ORA-12505] || [metric,1000000][oper,contains][str,ORA-12514]) && ([metric list in time,3,3000060][oper,all neq][cib,2201001,instance_name])) || (([metric,1000000][oper,contains][str,The Network Adapter could not establish the connection]) && ([metric in time,3,3000061]<[num,1]))", "db_type": "Oracle", "warning_level": "4", "warning_message": "数据库自身故障导致连接失败：{[metric,1000000]}"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "显示数据库每天产生的归档日志的大小", "knowledge_description": "显示数据库每天产生的归档日志的大小"}, {"knowledge_name": "及时清理归档日志", "knowledge_description": "检查Oracle 归档日志空间使用情况"}], "description": "归档空间使用率超过90%并且预估可用时间小于3天，数据库存在归档满的风险。", "rule_name": "archive_space_exceed", "id": "5864", "rule_expression": "[metric,2180521]>[num,$1] && [metric,2180523]<[num,$2]", "db_type": "Oracle", "warning_level": "4", "warning_message": "数据库存在归档满的风险，归档空间使用率{[metric,2180521]}%，预估可用时间{[metric,2180523]}天"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_name": "数据库IO功能分析", "knowledge_description": "数据库IO功能分析"}], "description": "在工作时间，数据库物理读大于80M/秒，数据库备份IO超过50M/秒，导致单块读延时是平时的2倍，说明备份对IO性能造成了影响", "rule_name": "rman_backup_problem", "id": "5640", "rule_expression": "[metric,2180052]>[num,$1] && [metric,2180057]>[num,$2] && [metric,2180057]>[metric hour avg,2180057]*[num,$3]", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "通过SGA ADVISE找到合适的SGA建议值，并根据物理内存的大小，判断是否可以实施", "knowledge_description": "SGA调整建议"}, {"knowledge_name": "db cache调整建议", "knowledge_description": "db cache调整建议"}, {"knowledge_name": "查看top sql判断是物理读导致还是执行次数原因", "knowledge_description": "物理读较多的TOP SQL"}, {"knowledge_name": "对未分区的表进行分区，碎片严重的对象要重新整理", "knowledge_description": "找出数据库物理读较高的segment，判断其是否分区及是否存在碎片"}, {"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}], "description": "Buffer Hit %低于90%说明系统存在问题", "rule_name": "buffer_cache_hit_ratio", "id": "112", "rule_expression": "[metric,2189000]<[num,$1] && [metric,2189030]>[num,$2]", "db_type": "Oracle", "warning_level": "3", "warning_message": "Buffer Hit {[metric,2189000]}%，低于{$1}%，系统存在问题"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "检查DG环境"}], "description": "DG备库延迟超过1800秒或存在GAP", "rule_name": "dg_standby_delay_more", "id": "15564", "rule_expression": "[metric in time ,10,2180066]-[cib,2201001,apply_delay]>[num,$1] || [metric in time ,10,2180067]>[num,$2]", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "通过oracle等待事件链分析得到导致等待事件的根会话", "knowledge_description": "生成Oracle数据库实例的会话等待链"}, {"knowledge_name": "检索数据库哪些数据行发生行锁，对于找出存在行锁的行，如果长时间存在，说明阻塞者可能存在问题，可以通过“检查阻塞者会话信息”工具找到该会话，并杀掉该会话来解锁", "knowledge_description": "【实时分析】检索当前数据库哪些数据行发生行锁"}, {"knowledge_name": "分析数据库行锁相关指标", "knowledge_description": "【历史分析】分析数据库行锁相关指标"}], "description": "行锁等待严重超时（超过3600秒）数据库可能存在未提交的会话", "rule_name": "row_lock_wait_time_long", "id": "8048", "rule_expression": null, "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "分析归档日志大小远小于redo log文件大小"}, {"knowledge_name": "分析服务器IO设备的IO情况", "knowledge_description": "分析服务器IO设备的IO情况"}, {"knowledge_name": "数据库物理写IO性能分析", "knowledge_description": "数据库物理写IO性能分析"}, {"knowledge_name": "enq: CF - contention等待事件分析", "knowledge_description": "enq: CF - contention等待事件分析"}, {"knowledge_name": "分析数据库中enq: KO - fast object checkpoint等待事件", "knowledge_description": "分析数据库中enq: KO - fast object checkpoint等待事件"}, {"knowledge_name": "查找执行次数比较高的TOP SQL", "knowledge_description": "查找执行次数比较高的TOP SQL"}, {"knowledge_name": "数据库负载模型相关指标分析", "knowledge_description": "数据库负载模型相关指标分析"}, {"knowledge_name": "数据库负载维度分析", "knowledge_description": "数据库负载维度分析"}], "description": "活跃REDO LOG组数超过总日志组数量的2/3则系统可能有问题", "rule_name": "active_redo_log", "id": "17289", "rule_expression": "[metric,2180514]/([cib,2201001,log_count] -[num,1]) > [num,$1]", "db_type": "Oracle", "warning_level": "3", "warning_message": "活跃REDO LOG组数{[metric,2180514]}，超过总日志组数量（{[cib,2201001,log_count]}）的2/3，系统可能有问题"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle RAC分析"}, {"knowledge_name": "操作系统网络层面丢包分析", "knowledge_description": "操作系统网络层面丢包分析"}, {"knowledge_name": "RAC DRM分析", "knowledge_description": "RAC DRM分析"}, {"knowledge_name": "对找出的SQL语句进行优化", "knowledge_description": "查找集群等待时间比较大的SQL语句"}, {"knowledge_name": "rac集群网络问题分析", "knowledge_description": "rac集群网络问题分析"}, {"knowledge_name": "进行Top SEGMENT和SQL分析", "knowledge_description": "如果数据库集群间出现了热块冲突，会导致RAC性能出现严重下降"}, {"knowledge_name": "Oracle等待事件分析", "knowledge_description": "Oracle等待事件分析"}], "description": "gc block lost值大于0，RAC可能存在风险", "rule_name": "oracle_gc_block_lost", "id": "8637", "rule_expression": "([metric,2189102] >[num,$1] || [metric,2189101] >[num,$2]) &&([metric,2189069] >[num,$3])", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle热块冲突分析"}, {"knowledge_name": "进行Top SEGMENT和SQL分析", "knowledge_description": "如果数据库集群间出现了热块冲突，会导致RAC性能出现严重下降"}], "description": "Oracle热块冲突严重，数据库性能会受影响", "rule_name": "ora_bbw", "id": "8729", "rule_expression": "([metric,2184313] >[num,$1] || [metric,2184312] >[num,$2]) && ([metric,2189030] >[num,$3])", "db_type": "Oracle", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "分析归档日志大小远小于redo log文件大小"}, {"knowledge_name": "分析服务器IO设备的IO情况", "knowledge_description": "分析服务器IO设备的IO情况"}, {"knowledge_name": "数据库物理写IO性能分析", "knowledge_description": "数据库物理写IO性能分析"}, {"knowledge_name": "enq: CF - contention等待事件分析", "knowledge_description": "enq: CF - contention等待事件分析"}, {"knowledge_name": "分析数据库中enq: KO - fast object checkpoint等待事件", "knowledge_description": "分析数据库中enq: KO - fast object checkpoint等待事件"}, {"knowledge_name": "查找执行次数比较高的TOP SQL", "knowledge_description": "查找执行次数比较高的TOP SQL"}, {"knowledge_name": "数据库负载模型相关指标分析", "knowledge_description": "数据库负载模型相关指标分析"}, {"knowledge_name": "数据库负载维度分析", "knowledge_description": "数据库负载维度分析"}], "description": "活跃REDO LOG组数超过总日志组数量的2/3则系统可能有问题", "rule_name": "active_redo_log", "id": "115", "rule_expression": "[metric,2180514]/([cib,2201001,log_count] -[num,1]) > [num,$1]", "db_type": "Oracle", "warning_level": "3", "warning_message": "活跃REDO LOG组数{[metric,2180514]}，超过总日志组数量（{[cib,2201001,log_count]}）的2/3，系统可能有问题"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle热块冲突分析"}, {"knowledge_name": "进行Top SEGMENT和SQL分析", "knowledge_description": "如果数据库集群间出现了热块冲突，会导致RAC性能出现严重下降"}], "description": "Oracle热块冲突严重，数据库性能会受影响", "rule_name": "ora_bbw", "id": "8727", "rule_expression": "([metric,2184313] >[num,$1] || [metric,2184312] >[num,$2]) && ([metric,2189030] >[num,$3])", "db_type": "Oracle", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle热块冲突分析"}, {"knowledge_name": "进行Top SEGMENT和SQL分析", "knowledge_description": "如果数据库集群间出现了热块冲突，会导致RAC性能出现严重下降"}], "description": "Oracle热块冲突严重，数据库性能会受影响", "rule_name": "ora_bbw", "id": "8726", "rule_expression": "([metric,2184313] >[num,$1] || [metric,2184312] >[num,$2]) && ([metric,2189030] >[num,$3])", "db_type": "Oracle", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_name": "数据库物理写IO性能分析", "knowledge_description": "数据库物理写IO性能分析"}, {"knowledge_name": "数据库IO功能分析", "knowledge_description": "数据库IO功能分析"}, {"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-Oracle IO分析"}], "description": "写IO性能异常同时读IO正常，可能存储复制链路存在问题", "rule_name": "ora_dbio_abnormal", "id": "8821", "rule_expression": "([metric,2184302]*[num,$1]<[metric,2184304]) && ([metric,3001011] <[num,$2]) && ([metric,2189128] <[num,$3]) && ([metric,2184301] >[num,$4])&& ([metric,3000007] <[num,$5])", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断发现的异常指标以及推荐的诊断路径下钻分析", "knowledge_description": "泛路由-Oracle闩锁分析"}, {"knowledge_name": "根据闩锁等待类别进行分类处理", "knowledge_description": "latch等待事件分析，判断数据库出现哪类闩锁等待"}], "description": "Oracle数据库的闩锁存在问题，数据库存在风险", "rule_name": "ora_latch_free", "id": "8722", "rule_expression": "([metric,2180200] <[num,$1] ||[metric,2184322] >[num,$2]) &&([metric,3000003] >[num,$3])&&([metric,3001011] >[num,$4])", "db_type": "Oracle", "warning_level": "3", "warning_message": "闩锁争用严重，数据库存在风险（当前闩锁命中率{[metric,2180200]}%,闩锁平均等待时间：{[metric,2184322]}，SYS CPU使用率{[metric,3001011] }%"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "分析归档日志大小远小于redo log文件大小"}, {"knowledge_name": "分析服务器IO设备的IO情况", "knowledge_description": "分析服务器IO设备的IO情况"}, {"knowledge_name": "数据库物理写IO性能分析", "knowledge_description": "数据库物理写IO性能分析"}, {"knowledge_name": "enq: CF - contention等待事件分析", "knowledge_description": "enq: CF - contention等待事件分析"}, {"knowledge_name": "分析数据库中enq: KO - fast object checkpoint等待事件", "knowledge_description": "分析数据库中enq: KO - fast object checkpoint等待事件"}, {"knowledge_name": "查找执行次数比较高的TOP SQL", "knowledge_description": "查找执行次数比较高的TOP SQL"}, {"knowledge_name": "数据库负载模型相关指标分析", "knowledge_description": "数据库负载模型相关指标分析"}, {"knowledge_name": "数据库负载维度分析", "knowledge_description": "数据库负载维度分析"}], "description": "活跃REDO LOG组数超过总日志组数量的2/3则系统可能有问题", "rule_name": "active_redo_log", "id": "15544", "rule_expression": "[metric,2180514]/([cib,2201001,log_count] -[num,1]) > [num,$1]", "db_type": "Oracle", "warning_level": "3", "warning_message": "活跃REDO LOG组数{[metric,2180514]}，超过总日志组数量（{[cib,2201001,log_count]}）的2/3，系统可能有问题"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "判断SGA RESIZE操作是否异常", "knowledge_description": "分析SGA RESIZE操作是否异常"}, {"knowledge_name": "查询sga内存组件内存变化情况", "knowledge_description": "查询sga内存组件内存变化情况"}, {"knowledge_name": "通过SGA ADVISE找到合适的SGA建议值，并根据物理内存的大小，判断是否可以实施", "knowledge_description": "SGA调整建议"}, {"knowledge_name": "查找执行次数比较高的TOP SQL", "knowledge_description": "查找执行次数比较高的TOP SQL"}], "description": "SGA RESIZE频繁导致了共享池问题", "rule_name": "sga_resize_shared_pool", "id": "8243", "rule_expression": "([metric,2180519] > [num,$1]) && ([metric,2180055]> [cib,2201010,cpu_count]*[num,$2]) && ([metric,2180050]> [num,$3]) ", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle RAC分析"}, {"knowledge_name": "分析指定时间间隔内GC相关指标可能存在的问题", "knowledge_description": "分析指定时间间隔内GC相关指标"}, {"knowledge_name": "RAC DRM分析", "knowledge_description": "RAC DRM分析"}, {"knowledge_name": "检索数据库哪些数据行发生行锁，对于找出存在行锁的行，如果长时间存在，说明阻塞者可能存在问题，可以通过“检查阻塞者会话信息”工具找到该会话，并杀掉该会话来解锁", "knowledge_description": "【实时分析】检索当前数据库哪些数据行发生行锁"}, {"knowledge_name": "获取集群等待时间较高的TOP SQL", "knowledge_description": "获取集群等待时间较高的TOP SQL"}, {"knowledge_name": "对未分区的对象进行分区，对碎片严重的对象进行重组整理", "knowledge_description": "找出数据库集群间心跳流量比较大的SEGMENT，检查是否分区并对其进行碎片分析"}, {"knowledge_name": "查看top sql判断是物理读导致还是执行次数原因", "knowledge_description": "物理读较多的TOP SQL"}, {"knowledge_name": "数据库物理读过高时分析物理读过高的SQL和SEGMENT", "knowledge_description": "数据库物理读过高时分析物理读过高的SQL和SEGMENT"}, {"knowledge_name": "操作系统网络总体分析", "knowledge_description": "操作系统网络总体分析"}, {"knowledge_name": "mtr网络诊断工具", "knowledge_description": "mtr网络诊断工具"}], "description": "Avg global enqueue get time大于60毫秒，并且TX锁相关平均等待时间超过500毫秒，则说明行锁等待存在隐患", "rule_name": "rac_interconnect_time_and_enq_tx_problem", "id": "3074", "rule_expression": "[metric,2180205]>[num,$1] && [metric,2180058]>[num,$2]", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "共享池分析", "knowledge_description": "共享池分析"}, {"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle共享池分析"}, {"knowledge_name": "共享池分析", "knowledge_description": "共享池分析"}, {"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle共享池分析"}], "description": "因为存在热表而引起rowcache等待延时过大，相关应用性能存在问题", "rule_name": "ora_hot_rowcache", "id": "8831", "rule_expression": "([metric,2184319] >[num,$1]) && ([metric,2189046] >[num,$2]) ", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "Oracle等待事件分析", "knowledge_description": "Oracle等待事件分析"}, {"knowledge_name": "显示数据库等待事件及数据库会话信息", "knowledge_description": "显示数据库等待事件及数据库会话信息"}, {"knowledge_name": "等待事件链分析", "knowledge_description": "等待事件链分析"}, {"knowledge_name": "根据智能诊断发现的异常指标以及推荐的诊断路径下钻分析", "knowledge_description": "泛路由-Oracle闩锁分析"}, {"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle共享池分析"}, {"knowledge_name": "以树形结构显示等待事件链信息", "knowledge_description": "以树形结构显示等待事件链信息"}, {"knowledge_name": "数据库后台进程错误及等待事件诊断", "knowledge_description": "数据库后台进程错误及等待事件诊断"}, {"knowledge_name": "根据闩锁等待类别进行分类处理", "knowledge_description": "latch等待事件分析，判断数据库出现哪类闩锁等待"}, {"knowledge_name": "一般来说，平均等待时间应该小于10毫秒，如果某些指标的平均等待时间超过20毫秒，则说明系统有问题。分析所有超出指标范围的指标项", "knowledge_description": "分析数据库集群相关等待事件，判断问题出在哪些方面"}, {"knowledge_name": "enq: CF - contention等待事件分析", "knowledge_description": "enq: CF - contention等待事件分析"}, {"knowledge_name": "分析数据库控制文件等待事件延时情况", "knowledge_description": "分析数据库控制文件等待事件延时情况"}, {"knowledge_name": "分析数据库中enq: KO - fast object checkpoint等待事件", "knowledge_description": "分析数据库中enq: KO - fast object checkpoint等待事件"}, {"knowledge_name": "列出数据库中非空闲等待事件", "knowledge_description": "列出数据库中非空闲等待事件"}, {"knowledge_name": "Buffer busy waits等待事件诊断", "knowledge_description": "Buffer busy waits等待事件诊断"}, {"knowledge_name": "等待事件enq: RO - fast object reuse诊断", "knowledge_description": "等待事件enq: RO - fast object reuse诊断"}], "description": "等待事件风险连续出现较高的情况", "rule_name": "wait_event_risk", "id": "8182", "rule_expression": null, "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "共享池分析", "knowledge_description": "共享池分析"}, {"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle共享池分析"}, {"knowledge_name": "共享池分析", "knowledge_description": "共享池分析"}, {"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle共享池分析"}], "description": "因为存在热表而引起rowcache等待延时过大，相关应用性能存在问题", "rule_name": "ora_hot_rowcache", "id": "8829", "rule_expression": "([metric,2184319] >[num,$1]) && ([metric,2189046] >[num,$2]) ", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "oracle数据库连接失败分析", "knowledge_description": "oracle数据库连接失败分析"}], "description": "KYD连接oracle数据库的用户密码过期", "rule_name": "oracle_dsmart_password_expried", "id": "16584", "rule_expression": "[metric,1000000][oper,contains][str,ORA-28001]", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "并发SQL语句分析"}, {"knowledge_name": "显示数据库负载指标情况", "knowledge_description": "显示数据库负载指标情况"}, {"knowledge_name": "查找执行次数比较高的TOP SQL", "knowledge_description": "查找执行次数比较高的TOP SQL"}, {"knowledge_name": "区分top sql是逻辑读还是执行次数增多进行进一步诊断", "knowledge_description": "逻辑读较多的TOP SQL"}, {"knowledge_description": "分析SQL"}], "description": "某个SQL ID的SQL并发执行数量超过25，系统可能存在性能问题", "rule_name": "single_sql_exec_exceed", "id": "1063", "rule_expression": "[metric in time,10,2180511] > [num,$1]", "db_type": "Oracle", "warning_level": "3", "warning_message": "SQL ID（{[metric iname in time,10,2180511]}）的并发执行数量{[metric in time,10,2180511]}超过{$1}，系统可能存在性能问题"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "共享池分析", "knowledge_description": "共享池分析"}, {"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle共享池分析"}, {"knowledge_name": "查询sga内存组件内存变化情况", "knowledge_description": "查询sga内存组件内存变化情况"}, {"knowledge_name": "查找执行次数比较高的TOP SQL", "knowledge_description": "查找执行次数比较高的TOP SQL"}, {"knowledge_name": "数据库并发执行维度分析", "knowledge_description": "数据库并发执行维度分析"}, {"knowledge_name": "判断SGA RESIZE操作是否异常", "knowledge_description": "分析SGA RESIZE操作是否异常"}], "description": "SQL解析异常，可能引起了数据库性能问题", "rule_name": "ora_non_parse_cpu", "id": "8825", "rule_expression": "([metric,2180201]<[num,$1]) && ([metric,2189046] >[num,$2]) && (([metric,2184319] >[num,$3]) || ([metric,2184316] >[num,$4]) || ([metric,3000003] >[num,$5]))", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "如果log file parallel write的平均等待时间超过10ms,说明数据库日志写IO性能存在问题；如果Log file sync与log file parallel write两个等待事件的平均等待时间的差值大于10ms 或者大于log file parallel write等待事件的平均等待时间的50%，则说明数据库日志同步存在性能问题", "knowledge_description": "LOG FILE SYNC等待延时超过n毫秒，说明数据库存在性能隐患"}, {"knowledge_description": "分析归档日志大小远小于redo log文件大小"}], "description": "LOG FILE SYNC等待延时较高(10ms-60ms)，说明系统存在性能隐患", "rule_name": "log_file_sync_wait", "id": "5729", "rule_expression": "[metric,2184301]>[num,$1] && [metric,2184301]<=[num,$2] ", "db_type": "Oracle", "warning_level": "3", "warning_message": "LOG FILE SYNC等待延时较高（{[metric,2184301]}ms），系统存在性能隐患"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "查看top sql判断是物理读导致还是执行次数原因", "knowledge_description": "物理读较多的TOP SQL"}, {"knowledge_name": "通过每秒执行的事务数和SQL数，检查数据库负载情况", "knowledge_description": "每秒执行的事务数和SQL语句每秒执行数量可以从宏观上显示出数据库负载运行情况。"}, {"knowledge_name": "检查Physical Reads Direct Per Sec指标", "knowledge_description": "检查数据库中的物理读是否由Direct path read引起的，如果是建议系统中禁用direct path read"}, {"knowledge_name": "如果存在TOP SQL，建议优化", "knowledge_description": "分析物理读较高的SQL，从awr中获取"}], "description": "每秒物理读远超出平时平均值10倍，并且超过基线0.8倍，说明应用或者数据出现了异常", "rule_name": "more_phy_read", "id": "110", "rule_expression": "(([metric,2189004]>[num,$1]) || ([metric in time,10,1000105,2189004][oper,eq][str,3])) && ([metric,2189004]>[num,$2])", "db_type": "Oracle", "warning_level": "2", "warning_message": "每秒物理读{[metric,2189004]}超出小时平均值{$1}倍，并且超过基线{$2}倍，应用或者数据出现了异常"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_name": "分析服务器IO设备的IO情况", "knowledge_description": "分析服务器IO设备的IO情况"}, {"knowledge_name": "数据库IO功能分析", "knowledge_description": "数据库IO功能分析"}, {"knowledge_name": "查看top sql判断是物理读导致还是执行次数原因", "knowledge_description": "物理读较多的TOP SQL"}, {"knowledge_name": "区分top sql是逻辑读还是执行次数增多进行进一步诊断", "knowledge_description": "逻辑读较多的TOP SQL"}, {"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-Oracle IO分析"}], "description": "操作系统IO延时严重超标（超过100毫秒），数据库存在较大风险", "rule_name": "IO_latency_oracle_critical", "id": "8016", "rule_expression": "[metric,3000006]>[num,$1] && ([metric,3000100]>[num,$2] || [metric,3000101]>[num,$3])", "db_type": "Oracle", "warning_level": "4", "warning_message": "操作系统IO延时{[metric,3000006]}毫秒，数据库存在较大风险"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "如果log file parallel write的平均等待时间超过10ms,说明数据库日志写IO性能存在问题；如果Log file sync与log file parallel write两个等待事件的平均等待时间的差值大于10ms 或者大于log file parallel write等待事件的平均等待时间的50%，则说明数据库日志同步存在性能问题", "knowledge_description": "LOG FILE SYNC等待延时超过n毫秒，说明数据库存在性能隐患"}, {"knowledge_description": "分析归档日志大小远小于redo log文件大小"}], "description": "LOG FILE SYNC等待延时较高(10ms-60ms)，说明系统存在性能隐患", "rule_name": "log_file_sync_wait", "id": "5629", "rule_expression": "[metric,2184301]>[num,$1] && [metric,2184301]<=[num,$2] ", "db_type": "Oracle", "warning_level": "3", "warning_message": "LOG FILE SYNC等待延时较高（{[metric,2184301]}ms），系统存在性能隐患"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "区分top sql是逻辑读还是执行次数增多进行进一步诊断", "knowledge_description": "逻辑读较多的TOP SQL"}, {"knowledge_name": "通过每秒执行的事务数和SQL数，检查数据库负载情况", "knowledge_description": "每秒执行的事务数和SQL语句每秒执行数量可以从宏观上显示出数据库负载运行情况。"}, {"knowledge_name": "如果存在TOP SQL，建议优化", "knowledge_description": "分析逻辑读较高的SQL，从awr中获取"}], "description": "每秒逻辑读出现异常增长，说明应用或者数据出现了异常", "rule_name": "more_logic_read", "id": "109", "rule_expression": "(([metric,2189030]>[num,$1]) || ([metric in time,10,1000105,2189030][oper,eq][str,3])) && ([metric,2189030]>[num,$2])", "db_type": "Oracle", "warning_level": "2", "warning_message": "每秒逻辑读出现异常增长，说明应用或者数据的应用可能出现了异常，当前逻辑读为{[metric,2189030]}/秒"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "数据库物理写IO性能分析", "knowledge_description": "数据库物理写IO性能分析"}, {"knowledge_description": "并发SQL语句分析"}, {"knowledge_name": "通过每秒执行的事务数和SQL数，检查数据库负载情况", "knowledge_description": "每秒执行的事务数和SQL语句每秒执行数量可以从宏观上显示出数据库负载运行情况。"}, {"knowledge_name": "显示数据库中的事务信息", "knowledge_description": "显示数据库中的事务信息"}, {"knowledge_name": "数据库并发执行维度分析", "knowledge_description": "数据库并发执行维度分析"}], "description": "物理写异常增长，应用可能存在异常", "rule_name": "more_phyisical_write", "id": "11397", "rule_expression": "(([metric,2189006]>[num,$1]) || ([metric in time,10,1000105,2189006][oper,eq][str,3])) && ([metric,2189006]>[num,$2])", "db_type": "Oracle", "warning_level": "2", "warning_message": "数据库物理写异常增长或者每秒物理写超过{[num,$1]}，应用可能存在异常，告警发生时的最新物理写{[metric,2189006]}/秒"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "分析SQL"}], "description": "全量SQL分析发现多个执行计划风险", "rule_name": "oracle_fsa_multiple_sql_plan", "id": "12419", "rule_expression": "[metric,1000520][oper,==][num,$1]", "db_type": "Oracle", "warning_level": "4", "warning_message": "SQL：{[metric,1000521]}的执行计划发生变化。"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "表空间使用情况检查"}, {"knowledge_name": "显示数据库ASM磁盘组信息", "knowledge_description": "显示数据库ASM磁盘组信息"}, {"knowledge_description": "用户容量分析"}], "description": "表空间容量风险高，数据库中存在表空间使用率大于90%且可用天数小于30天，存在表空间满的风险", "rule_name": "oracle_tbs_capacity_risk", "id": "8184", "rule_expression": "[metric max in time,240,2180045]==[num,$1]", "db_type": "Oracle", "warning_level": "2", "warning_message": "表空间({[metric in time,240,2180516]})容量风险高，使用率大于90%且可用天数小于30天，存在表空间满的风险"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "分析SQL"}], "description": "全量SQL分析发现多个执行计划风险", "rule_name": "oracle_fsa_multiple_sql_plan", "id": "12417", "rule_expression": "[metric,1000520][oper,==][num,$1]", "db_type": "Oracle", "warning_level": "4", "warning_message": "SQL：{[metric,1000521]}的执行计划发生变化。"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "oracle数据库连接失败分析", "knowledge_description": "oracle数据库连接失败分析"}], "description": "KYD连接oracle数据库的用户密码过期", "rule_name": "oracle_dsmart_password_expried", "id": "8870", "rule_expression": "[metric,1000000][oper,contains][str,ORA-28001]", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析CPU使用情况", "knowledge_description": "分析CPU使用情况"}, {"knowledge_name": "查询数据库并行执行情况", "knowledge_description": "查询数据库并行执行情况"}, {"knowledge_name": "执行数量超过5的活跃SQL", "knowledge_description": "执行数量超过5的活跃SQL"}, {"knowledge_name": "区分top sql是逻辑读还是执行次数增多进行进一步诊断", "knowledge_description": "逻辑读较多的TOP SQL"}, {"knowledge_description": "分析指标、SQL相似度"}], "description": "CPU使用率高于20%并且活跃的并行进程数量大于5个，说明并行查询可能影响了CPU资源", "rule_name": "parallel_process_result_in_cpu_problem", "id": "5735", "rule_expression": "[metric,2189057]>[num,$1] && [metric,2189149]>[num,$2]", "db_type": "Oracle", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle RAC分析"}, {"knowledge_name": "对找出的SQL语句进行优化", "knowledge_description": "查找集群等待时间比较大的SQL语句"}, {"knowledge_name": "对未分区的对象进行分区，对碎片严重的对象进行重组整理", "knowledge_description": "找出数据库集群间心跳流量比较大的SEGMENT，检查是否分区并对其进行碎片分析"}, {"knowledge_name": "一般来说，平均等待时间应该小于10毫秒，如果某些指标的平均等待时间超过20毫秒，则说明系统有问题。分析所有超出指标范围的指标项", "knowledge_description": "分析数据库集群相关等待事件，判断问题出在哪些方面"}, {"knowledge_name": "操作系统网络层面丢包分析", "knowledge_description": "操作系统网络层面丢包分析"}, {"knowledge_name": "操作系统网络流量分析", "knowledge_description": "操作系统网络流量分析"}, {"knowledge_description": "Ping延迟及时钟差异"}], "description": "Estd Interconnect traffic (KB)过高，系统性能可能会有问题", "rule_name": "connect_traffic", "id": "57", "rule_expression": null, "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "Library cache pin/lock分析工具"}], "description": "Oracle数据库因为expression tracking导致library cache pin性能问题", "rule_name": "ora_library_cache_pin_high", "id": "15606", "rule_expression": "[metric,2180084]>[num,$1]", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "显示数据库负载指标情况", "knowledge_description": "显示数据库负载指标情况"}, {"knowledge_name": "查找执行次数比较高的TOP SQL", "knowledge_description": "查找执行次数比较高的TOP SQL"}], "description": "每秒事务数超过最近1小时平均值的10倍，应用可能存在异常", "rule_name": "transcation_count_raise", "id": "5644", "rule_expression": "[metric,2189003]/[metric hour avg,2189003]>[num,$1] && [metric,2189003]>[num,$2]", "db_type": "Oracle", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "显示数据库ASM磁盘组信息", "knowledge_description": "显示数据库ASM磁盘组信息"}, {"knowledge_description": "显示指定时间间隔内的日志信息"}], "description": "ASM磁盘组中出现offline的磁盘", "rule_name": "asm_disk_offline", "id": "6914", "rule_expression": "[metric max in time,30,2180526]>[num,$1]", "db_type": "Oracle", "warning_level": "4", "warning_message": "ASM磁盘组中出现offline的磁盘({[metric max iname in time,30,2180526]})"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle RAC分析"}, {"knowledge_name": "RAC DRM分析", "knowledge_description": "RAC DRM分析"}, {"knowledge_name": "显示数据库负载指标情况", "knowledge_description": "显示数据库负载指标情况"}, {"knowledge_name": "获取集群等待时间较高的TOP SQL", "knowledge_description": "获取集群等待时间较高的TOP SQL"}, {"knowledge_name": "操作系统网络总体分析", "knowledge_description": "操作系统网络总体分析"}, {"knowledge_name": "mtr网络诊断工具", "knowledge_description": "mtr网络诊断工具"}], "description": "gcs drm freeze in enter server mode平均等待时间超过100毫秒，并且gc remaster 平均等待时间超过100毫秒，说明DRM已经影响了数据库的性能，建议关闭DRM", "rule_name": "rac_drm_problem", "id": "15610", "rule_expression": "[metric,2180059]>[num,$1] && [metric,2180060]>[num,$2]", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_name": "数据库物理写IO性能分析", "knowledge_description": "数据库物理写IO性能分析"}], "description": "DB FILE PARALLEL WRITE延时超过最近一小时平均值的5倍或者超过100毫秒的次数超过2次，说明数据库写IO存在隐患", "rule_name": "db_file_parallel_write_problem", "id": "3084", "rule_expression": "[metric,2184304]/[metric hour avg,2184304]>[num,$1] && [metric,2184304]>[num,$2] && [metric,2189006]>[num,$3]", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "显示指定时间间隔内的日志报错信息", "knowledge_description": "显示指定时间间隔内的日志报错信息"}], "description": "Oracle日志分析结果分数过低，系统可能存在隐患", "rule_name": "logana_oracle", "id": "3344", "rule_expression": null, "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle RAC分析"}, {"knowledge_name": "RAC DRM分析", "knowledge_description": "RAC DRM分析"}, {"knowledge_name": "显示数据库负载指标情况", "knowledge_description": "显示数据库负载指标情况"}, {"knowledge_name": "获取集群等待时间较高的TOP SQL", "knowledge_description": "获取集群等待时间较高的TOP SQL"}, {"knowledge_name": "操作系统网络总体分析", "knowledge_description": "操作系统网络总体分析"}, {"knowledge_name": "mtr网络诊断工具", "knowledge_description": "mtr网络诊断工具"}], "description": "gcs drm freeze in enter server mode平均等待时间超过100毫秒，并且gc remaster 平均等待时间超过100毫秒，说明DRM已经影响了数据库的性能，建议关闭DRM", "rule_name": "rac_drm_problem", "id": "3086", "rule_expression": "[metric,2180059]>[num,$1] && [metric,2180060]>[num,$2]", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "通过oracle等待事件链分析得到导致等待事件的根会话", "knowledge_description": "生成Oracle数据库实例的会话等待链"}, {"knowledge_name": "检索数据库哪些数据行发生行锁，对于找出存在行锁的行，如果长时间存在，说明阻塞者可能存在问题，可以通过“检查阻塞者会话信息”工具找到该会话，并杀掉该会话来解锁", "knowledge_description": "【实时分析】检索当前数据库哪些数据行发生行锁"}, {"knowledge_name": "分析数据库行锁相关指标", "knowledge_description": "【历史分析】分析数据库行锁相关指标"}], "description": "行锁等待严重超时（超过3600秒）数据库可能存在未提交的会话", "rule_name": "row_lock_wait_time_long", "id": "8046", "rule_expression": null, "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "分析SQL"}], "description": "全量SQL分析发现多个执行计划风险", "rule_name": "oracle_fsa_multiple_sql_plan", "id": "12416", "rule_expression": "[metric,1000520][oper,==][num,$1]", "db_type": "Oracle", "warning_level": "4", "warning_message": "SQL：{[metric,1000521]}的执行计划发生变化。"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据具体的登录方式判断并提供建议", "knowledge_description": "数据库存在频繁登录诊断分析"}], "description": "每秒LOGONS数量异常，说明数据库存在频繁登录", "rule_name": "count_logon_sec", "id": "5707", "rule_expression": "([metric,2189018] >[num,$1]) ||([metric in time,10,1000105,2189018][oper,eq][str,3])", "db_type": "Oracle", "warning_level": "2", "warning_message": "每秒登录数突发异常增长，达到{[metric,2189018]}/秒"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析数据库实例在指定时间窗口内的数据库会话情况", "knowledge_description": "分析数据库实例在指定时间窗口内的数据库会话情况"}, {"knowledge_name": "查找执行次数比较高的TOP SQL", "knowledge_description": "查找执行次数比较高的TOP SQL"}, {"knowledge_name": "通过每秒执行的事务数和SQL数，检查数据库负载情况", "knowledge_description": "每秒执行的事务数和SQL语句每秒执行数量可以从宏观上显示出数据库负载运行情况。"}, {"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-oracle活跃会话分析"}, {"knowledge_name": "数据库负载模型相关指标分析", "knowledge_description": "数据库负载模型相关指标分析"}, {"knowledge_name": "执行数量超过5的活跃SQL", "knowledge_description": "执行数量超过5的活跃SQL"}], "description": "活跃会话过多（超过70个）,数据库健康可能存在问题", "rule_name": "avg_active_session", "id": "5703", "rule_expression": "[metric,2189147]>[num,$1] &&( [metric,2189147]<[cib,2201010,sessions])", "db_type": "Oracle", "warning_level": "3", "warning_message": "活跃会话数{[metric,2189147]}，超过{$1}个数据库健康可能存在问题"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "显示指定时间间隔内的日志报错信息", "knowledge_description": "显示指定时间间隔内的日志报错信息"}, {"knowledge_name": "实时查询表空间使用情况，不要频繁点击查询，对于超大数据库，频繁查询可能会导致数据库hang死", "knowledge_description": "实时查询表空间使用情况"}, {"knowledge_name": "一般来说，日志切换后归档进程就会进行归档操作，当前最多有一个日志组未归档。如果未归档日志组数量超过2个，一般来说系统就有问题,如果归档有问题，建议检查归档目录的写IO性能是不是很慢，检查归档目录状态及错误原因", "knowledge_description": "未归档日志组数量超过2个，一般来说系统就有问题"}], "description": "用户回滚比例超过20%并且每秒回滚次数超过5次，应用可能存在异常", "rule_name": "rollback_ratio_exceed", "id": "15615", "rule_expression": "[metric,2189025]>[num,$1]  && [metric,2189024]>[num,$2]", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "判断SGA RESIZE操作是否异常", "knowledge_description": "分析SGA RESIZE操作是否异常"}, {"knowledge_name": "查询sga内存组件内存变化情况", "knowledge_description": "查询sga内存组件内存变化情况"}, {"knowledge_name": "通过SGA ADVISE找到合适的SGA建议值，并根据物理内存的大小，判断是否可以实施", "knowledge_description": "SGA调整建议"}, {"knowledge_name": "查找执行次数比较高的TOP SQL", "knowledge_description": "查找执行次数比较高的TOP SQL"}], "description": "SGA RESIZE频繁导致了共享池问题", "rule_name": "sga_resize_shared_pool", "id": "15735", "rule_expression": "([metric,2180519] > [num,$1]) && ([metric,2180055]> [cib,2201010,cpu_count]*[num,$2]) && ([metric,2180050]> [num,$3]) ", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "运维对象连接失败，请检查运维对象是否down", "knowledge_description": "运维对象连接状态分析"}, {"knowledge_name": "操作系统核心资源分析", "knowledge_description": "操作系统核心资源分析"}, {"knowledge_name": "显示数据库负载指标情况", "knowledge_description": "显示数据库负载指标情况"}, {"knowledge_name": "通过oracle等待事件链分析得到导致等待事件的根会话", "knowledge_description": "生成Oracle数据库实例的会话等待链"}, {"knowledge_name": "服务器内存分析", "knowledge_description": "服务器内存分析"}, {"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_name": "分析数据库实例在指定时间窗口活跃会话的活动特征，并进行异常诊断： 1、高并发/执行时间长的SQL语句 2、主要等待事件 3、影响最大的会话 4、是否存在HANG状况及可能原因", "knowledge_description": "分析数据库实例情况"}], "description": "数据库连接严重超时，数据库存在巨大风险", "rule_name": "connect_slow_oracle", "id": "6988", "rule_expression": "([metric,1000102] >([metric hour avg,1000102]*[num,$1]))&& (([metric,1000102] >[num,$2])||([metric in time,10,1000105,1000102][oper,eq][str,3]))", "db_type": "Oracle", "warning_level": "2", "warning_message": "客户端连接数据库时间出现异常（超过平均水平10倍或者出现其他异常），目前值为{[metric,1000102]}毫秒"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "通过SGA ADVISE找到合适的SGA建议值，并根据物理内存的大小，判断是否可以实施", "knowledge_description": "SGA调整建议"}, {"knowledge_name": "db cache调整建议", "knowledge_description": "db cache调整建议"}, {"knowledge_name": "查看top sql判断是物理读导致还是执行次数原因", "knowledge_description": "物理读较多的TOP SQL"}, {"knowledge_name": "对未分区的表进行分区，碎片严重的对象要重新整理", "knowledge_description": "找出数据库物理读较高的segment，判断其是否分区及是否存在碎片"}, {"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}], "description": "Buffer Hit %低于90%说明系统存在问题", "rule_name": "buffer_cache_hit_ratio", "id": "56", "rule_expression": "[metric,2189000]<[num,$1] && [metric,2189030]>[num,$2]", "db_type": "Oracle", "warning_level": "3", "warning_message": "Buffer Hit {[metric,2189000]}%，低于{$1}%，系统存在问题"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "查找解析次数比较高的SQL", "knowledge_description": "查找解析次数比较高的SQL"}, {"knowledge_name": "共享池分析", "knowledge_description": "共享池分析"}, {"knowledge_name": "判断SGA RESIZE操作是否异常", "knowledge_description": "分析SGA RESIZE操作是否异常"}, {"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle共享池分析"}, {"knowledge_description": "分析指标、SQL相似度"}], "description": "SHARED POOL的使用率高于90%并且软解析比例低于90%，none-parse cpu time比例低于90%，SQL解析可能影响数据库的健康", "rule_name": "higher_shared_pool_used_lower_soft_parsed", "id": "5723", "rule_expression": "([num,100]-[metric,2189114])>[num,$1] && [metric,2189055]<[num,$2] && [metric,2180201]<[num,$3] ", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "sql告警分析", "knowledge_description": "sql告警分析"}], "description": "各种维度的top sql告警", "rule_name": "sql_alert", "id": "8177", "rule_expression": "[metric in time,3,2180543]>[num,$1]", "db_type": "Oracle", "warning_level": "2", "warning_message": "各种维度的top sql告警{[metric in time,3,2180543]}个"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "通过oracle等待事件链分析得到导致等待事件的根会话", "knowledge_description": "生成Oracle数据库实例的会话等待链"}, {"knowledge_name": "TX锁分析", "knowledge_description": "TX锁分析"}, {"knowledge_name": "显示数据库当前实例锁信息", "knowledge_description": "显示数据库当前实例锁信息"}, {"knowledge_name": "根据闩锁等待类别进行分类处理", "knowledge_description": "latch等待事件分析，判断数据库出现哪类闩锁等待"}, {"knowledge_id": 182, "knowledge_name": "Unknown", "knowledge_description": "Unknown"}], "description": "被阻塞的会话数过多（超过30个），系统可能存在隐患", "rule_name": "blocking_session", "id": "5704", "rule_expression": "([metric,2180518] >[num,$1]) ||([metric in time,10,1000105,2180518][oper,eq][str,3])", "db_type": "Oracle", "warning_level": "4", "warning_message": "被阻塞的会话数出现异常增长或者达到{[num,$1]}个，最新的阻塞会话数为{[metric,2180518]}"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "通过oracle等待事件链分析得到导致等待事件的根会话", "knowledge_description": "生成Oracle数据库实例的会话等待链"}, {"knowledge_name": "TX锁分析", "knowledge_description": "TX锁分析"}, {"knowledge_name": "显示数据库当前实例锁信息", "knowledge_description": "显示数据库当前实例锁信息"}, {"knowledge_name": "根据闩锁等待类别进行分类处理", "knowledge_description": "latch等待事件分析，判断数据库出现哪类闩锁等待"}, {"knowledge_id": 182, "knowledge_name": "Unknown", "knowledge_description": "Unknown"}], "description": "被阻塞的会话数过多（超过30个），系统可能存在隐患", "rule_name": "blocking_session", "id": "55", "rule_expression": "([metric,2180518] >[num,$1]) ||([metric in time,10,1000105,2180518][oper,eq][str,3])", "db_type": "Oracle", "warning_level": "4", "warning_message": "被阻塞的会话数出现异常增长或者达到{[num,$1]}个，最新的阻塞会话数为{[metric,2180518]}"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "oracle数据库连接失败分析", "knowledge_description": "oracle数据库连接失败分析"}], "description": "KYD采样SQL在oracle数据库执行失败", "rule_name": "oracle_dsmart_monitor_sql_execute_failed", "id": "8476", "rule_expression": "[metric,1000000] [oper,contains][str,SQL执行失败]", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle RAC分析"}, {"knowledge_name": "分析指定时间间隔内GC相关指标可能存在的问题", "knowledge_description": "分析指定时间间隔内GC相关指标"}, {"knowledge_name": "RAC DRM分析", "knowledge_description": "RAC DRM分析"}, {"knowledge_name": "检索数据库哪些数据行发生行锁，对于找出存在行锁的行，如果长时间存在，说明阻塞者可能存在问题，可以通过“检查阻塞者会话信息”工具找到该会话，并杀掉该会话来解锁", "knowledge_description": "【实时分析】检索当前数据库哪些数据行发生行锁"}, {"knowledge_name": "获取集群等待时间较高的TOP SQL", "knowledge_description": "获取集群等待时间较高的TOP SQL"}, {"knowledge_name": "对未分区的对象进行分区，对碎片严重的对象进行重组整理", "knowledge_description": "找出数据库集群间心跳流量比较大的SEGMENT，检查是否分区并对其进行碎片分析"}, {"knowledge_name": "查看top sql判断是物理读导致还是执行次数原因", "knowledge_description": "物理读较多的TOP SQL"}, {"knowledge_name": "数据库物理读过高时分析物理读过高的SQL和SEGMENT", "knowledge_description": "数据库物理读过高时分析物理读过高的SQL和SEGMENT"}, {"knowledge_name": "操作系统网络总体分析", "knowledge_description": "操作系统网络总体分析"}, {"knowledge_name": "mtr网络诊断工具", "knowledge_description": "mtr网络诊断工具"}], "description": "Avg global enqueue get time大于60毫秒，并且TX锁相关平均等待时间超过500毫秒，则说明行锁等待存在隐患", "rule_name": "rac_interconnect_time_and_enq_tx_problem", "id": "88", "rule_expression": "[metric,2180205]>[num,$1] && [metric,2180058]>[num,$2]", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "oracle数据库连接失败分析", "knowledge_description": "oracle数据库连接失败分析"}], "description": "数据库自身故障导致连接失败", "rule_name": "oracle_db_broken_connect_failed", "id": "8444", "rule_expression": "([metric,1000000][oper,contains][str,ORA-12516]) || ([metric,1000000][oper,contains][str,ORA-00257]) || (([metric,1000000][oper,contains][str,ORA-12505] || [metric,1000000][oper,contains][str,ORA-12514]) && ([metric list in time,3,3000060][oper,all neq][cib,2201001,instance_name])) || (([metric,1000000][oper,contains][str,The Network Adapter could not establish the connection]) && ([metric in time,3,3000061]<[num,1]))", "db_type": "Oracle", "warning_level": "4", "warning_message": "数据库自身故障导致连接失败：{[metric,1000000]}"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "分析归档日志大小远小于redo log文件大小"}, {"knowledge_name": "显示数据库每天产生的归档日志的大小", "knowledge_description": "显示数据库每天产生的归档日志的大小"}, {"knowledge_name": "一般来说，日志切换后归档进程就会进行归档操作，当前最多有一个日志组未归档。如果未归档日志组数量超过2个，一般来说系统就有问题,如果归档有问题，建议检查归档目录的写IO性能是不是很慢，检查归档目录状态及错误原因", "knowledge_description": "未归档日志组数量超过2个，一般来说系统就有问题"}, {"knowledge_name": "如果一小时内日志切换次数超过12次，说明切换频率过高，建议增大在线日志文件", "knowledge_description": "一小时内日志切换次数"}, {"knowledge_name": "分析日志切换频率是否合理", "knowledge_description": "分析日志切换频率是否合理"}], "description": "归档日志远小于redo日志文件大小，并且日志切换过于频繁", "rule_name": "archivelog_less_redo", "id": "15663", "rule_expression": "[metric,2180542]/[cib,2201000,redo_size]<[num,$1] && [metric,2180515]>[num,$2]", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "分析归档日志大小远小于redo log文件大小"}, {"knowledge_name": "显示数据库每天产生的归档日志的大小", "knowledge_description": "显示数据库每天产生的归档日志的大小"}, {"knowledge_name": "一般来说，日志切换后归档进程就会进行归档操作，当前最多有一个日志组未归档。如果未归档日志组数量超过2个，一般来说系统就有问题,如果归档有问题，建议检查归档目录的写IO性能是不是很慢，检查归档目录状态及错误原因", "knowledge_description": "未归档日志组数量超过2个，一般来说系统就有问题"}, {"knowledge_name": "如果一小时内日志切换次数超过12次，说明切换频率过高，建议增大在线日志文件", "knowledge_description": "一小时内日志切换次数"}, {"knowledge_name": "分析日志切换频率是否合理", "knowledge_description": "分析日志切换频率是否合理"}], "description": "归档日志远小于redo日志文件大小，并且日志切换过于频繁", "rule_name": "archivelog_less_redo", "id": "8041", "rule_expression": "[metric,2180542]/[cib,2201000,redo_size]<[num,$1] && [metric,2180515]>[num,$2]", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "显示数据库ASM磁盘组信息", "knowledge_description": "显示数据库ASM磁盘组信息"}, {"knowledge_description": "显示指定时间间隔内的日志信息"}], "description": "ASM磁盘组中出现offline的磁盘", "rule_name": "asm_disk_offline", "id": "15665", "rule_expression": "[metric max in time,30,2180526]>[num,$1]", "db_type": "Oracle", "warning_level": "4", "warning_message": "ASM磁盘组中出现offline的磁盘({[metric max iname in time,30,2180526]})"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle RAC分析"}, {"knowledge_name": "操作系统网络层面丢包分析", "knowledge_description": "操作系统网络层面丢包分析"}, {"knowledge_name": "RAC DRM分析", "knowledge_description": "RAC DRM分析"}, {"knowledge_name": "对找出的SQL语句进行优化", "knowledge_description": "查找集群等待时间比较大的SQL语句"}, {"knowledge_name": "rac集群网络问题分析", "knowledge_description": "rac集群网络问题分析"}, {"knowledge_name": "进行Top SEGMENT和SQL分析", "knowledge_description": "如果数据库集群间出现了热块冲突，会导致RAC性能出现严重下降"}, {"knowledge_name": "Oracle等待事件分析", "knowledge_description": "Oracle等待事件分析"}], "description": "gc block lost值大于0，RAC可能存在风险", "rule_name": "oracle_gc_block_lost", "id": "8639", "rule_expression": "([metric,2189102] >[num,$1] || [metric,2189101] >[num,$2]) &&([metric,2189069] >[num,$3])", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据具体的登录方式判断并提供建议", "knowledge_description": "数据库存在频繁登录诊断分析"}, {"knowledge_name": "分析数据库实例在指定时间窗口内的数据库会话情况", "knowledge_description": "分析数据库实例在指定时间窗口内的数据库会话情况"}, {"knowledge_name": "检查用户过期或密码错误", "knowledge_description": "检查用户过期或密码错误"}, {"knowledge_name": "根据主机名称查询数据库会话及进程信息", "knowledge_description": "根据主机名称查询数据库会话及进程信息"}], "description": "数据库当前进程数超过process参数的95%，数据库存在连接数满的风险", "rule_name": "process_up_to_resource_limit", "id": "8045", "rule_expression": "[metric,2180049]>[cib,2201010,processes]*[num,$1]", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle RAC分析"}, {"knowledge_name": "分析指定时间间隔内GC相关指标可能存在的问题", "knowledge_description": "分析指定时间间隔内GC相关指标"}, {"knowledge_name": "RAC DRM分析", "knowledge_description": "RAC DRM分析"}, {"knowledge_name": "获取集群等待时间较高的TOP SQL", "knowledge_description": "获取集群等待时间较高的TOP SQL"}, {"knowledge_name": "对未分区的对象进行分区，对碎片严重的对象进行重组整理", "knowledge_description": "找出数据库集群间心跳流量比较大的SEGMENT，检查是否分区并对其进行碎片分析"}, {"knowledge_name": "数据库物理读过高时分析物理读过高的SQL和SEGMENT", "knowledge_description": "数据库物理读过高时分析物理读过高的SQL和SEGMENT"}, {"knowledge_name": "操作系统网络总体分析", "knowledge_description": "操作系统网络总体分析"}, {"knowledge_name": "操作系统网络层面丢包分析", "knowledge_description": "操作系统网络层面丢包分析"}, {"knowledge_name": "mtr网络诊断工具", "knowledge_description": "mtr网络诊断工具"}], "description": "Avg global cache cr block receive time 大于20毫秒并且RAC INTERCONNECT流量大于30M，说明集群性能存在隐患", "rule_name": "rac_interconnect_time_and_flow_problem", "id": "5738", "rule_expression": "[metric,2189098]>[num,$1] && [metric,2180204]>[num,$2]", "db_type": "Oracle", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "显示指定时间间隔内的日志报错信息", "knowledge_description": "显示指定时间间隔内的日志报错信息"}, {"knowledge_name": "实时查询表空间使用情况，不要频繁点击查询，对于超大数据库，频繁查询可能会导致数据库hang死", "knowledge_description": "实时查询表空间使用情况"}, {"knowledge_name": "一般来说，日志切换后归档进程就会进行归档操作，当前最多有一个日志组未归档。如果未归档日志组数量超过2个，一般来说系统就有问题,如果归档有问题，建议检查归档目录的写IO性能是不是很慢，检查归档目录状态及错误原因", "knowledge_description": "未归档日志组数量超过2个，一般来说系统就有问题"}], "description": "用户回滚比例超过20%并且每秒回滚次数超过5次，应用可能存在异常", "rule_name": "rollback_ratio_exceed", "id": "5741", "rule_expression": "[metric,2189025]>[num,$1]  && [metric,2189024]>[num,$2]", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "通过oracle等待事件链分析得到导致等待事件的根会话", "knowledge_description": "生成Oracle数据库实例的会话等待链"}, {"knowledge_name": "检索数据库哪些数据行发生行锁，对于找出存在行锁的行，如果长时间存在，说明阻塞者可能存在问题，可以通过“检查阻塞者会话信息”工具找到该会话，并杀掉该会话来解锁", "knowledge_description": "【实时分析】检索当前数据库哪些数据行发生行锁"}, {"knowledge_name": "分析数据库行锁相关指标", "knowledge_description": "【历史分析】分析数据库行锁相关指标"}], "description": "行锁等待严重超时（超过3600秒）数据库可能存在未提交的会话", "rule_name": "row_lock_wait_time_long", "id": "8049", "rule_expression": null, "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "oracle数据库连接失败分析", "knowledge_description": "oracle数据库连接失败分析"}, {"knowledge_name": "网络接口分析", "knowledge_description": "(历史)网络接口分析"}], "description": "KYD客户端到oracle数据库网络出现问题，oracle数据库可能存在网络故障", "rule_name": "oracle_dsmart_network_failed", "id": "8470", "rule_expression": "(([metric,1000000][oper,contains][str,The Network Adapter could not establish the connection]) && ([metric in time,2,3000061]>[num,0]))", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "并发SQL语句分析"}, {"knowledge_name": "显示数据库负载指标情况", "knowledge_description": "显示数据库负载指标情况"}, {"knowledge_name": "查找执行次数比较高的TOP SQL", "knowledge_description": "查找执行次数比较高的TOP SQL"}, {"knowledge_name": "区分top sql是逻辑读还是执行次数增多进行进一步诊断", "knowledge_description": "逻辑读较多的TOP SQL"}, {"knowledge_description": "分析SQL"}], "description": "某个SQL ID的SQL并发执行数量超过25，系统可能存在性能问题", "rule_name": "single_sql_exec_exceed", "id": "5743", "rule_expression": "[metric in time,10,2180511] > [num,$1]", "db_type": "Oracle", "warning_level": "3", "warning_message": "SQL ID（{[metric iname in time,10,2180511]}）的并发执行数量{[metric in time,10,2180511]}超过{$1}，系统可能存在性能问题"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "分析归档日志大小远小于redo log文件大小"}, {"knowledge_name": "显示数据库每天产生的归档日志的大小", "knowledge_description": "显示数据库每天产生的归档日志的大小"}, {"knowledge_name": "一般来说，日志切换后归档进程就会进行归档操作，当前最多有一个日志组未归档。如果未归档日志组数量超过2个，一般来说系统就有问题,如果归档有问题，建议检查归档目录的写IO性能是不是很慢，检查归档目录状态及错误原因", "knowledge_description": "未归档日志组数量超过2个，一般来说系统就有问题"}, {"knowledge_name": "如果一小时内日志切换次数超过12次，说明切换频率过高，建议增大在线日志文件", "knowledge_description": "一小时内日志切换次数"}, {"knowledge_name": "分析日志切换频率是否合理", "knowledge_description": "分析日志切换频率是否合理"}], "description": "归档日志远小于redo日志文件大小，并且日志切换过于频繁", "rule_name": "archivelog_less_redo", "id": "8040", "rule_expression": "[metric,2180542]/[cib,2201000,redo_size]<[num,$1] && [metric,2180515]>[num,$2]", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "显示数据库每天产生的归档日志的大小", "knowledge_description": "显示数据库每天产生的归档日志的大小"}, {"knowledge_name": "及时清理归档日志", "knowledge_description": "检查Oracle 归档日志空间使用情况"}], "description": "归档空间使用率超过90%并且预估可用时间小于3天，数据库存在归档满的风险。", "rule_name": "archive_space_exceed", "id": "5866", "rule_expression": "[metric,2180521]>[num,$1] && [metric,2180523]<[num,$2]", "db_type": "Oracle", "warning_level": "4", "warning_message": "数据库存在归档满的风险，归档空间使用率{[metric,2180521]}%，预估可用时间{[metric,2180523]}天"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "显示数据库ASM磁盘组信息", "knowledge_description": "显示数据库ASM磁盘组信息"}, {"knowledge_description": "显示指定时间间隔内的日志信息"}], "description": "ASM磁盘组中出现offline的磁盘", "rule_name": "asm_disk_offline", "id": "6916", "rule_expression": "[metric max in time,30,2180526]>[num,$1]", "db_type": "Oracle", "warning_level": "4", "warning_message": "ASM磁盘组中出现offline的磁盘({[metric max iname in time,30,2180526]})"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "oracle数据库连接失败分析", "knowledge_description": "oracle数据库连接失败分析"}, {"knowledge_name": "网络接口分析", "knowledge_description": "(历史)网络接口分析"}], "description": "KYD客户端到oracle数据库网络出现问题，oracle数据库可能存在网络故障", "rule_name": "oracle_dsmart_network_failed", "id": "8472", "rule_expression": "(([metric,1000000][oper,contains][str,The Network Adapter could not establish the connection]) && ([metric in time,2,3000061]>[num,0]))", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "通过SGA ADVISE找到合适的SGA建议值，并根据物理内存的大小，判断是否可以实施", "knowledge_description": "SGA调整建议"}, {"knowledge_name": "db cache调整建议", "knowledge_description": "db cache调整建议"}, {"knowledge_name": "查看top sql判断是物理读导致还是执行次数原因", "knowledge_description": "物理读较多的TOP SQL"}, {"knowledge_name": "对未分区的表进行分区，碎片严重的对象要重新整理", "knowledge_description": "找出数据库物理读较高的segment，判断其是否分区及是否存在碎片"}, {"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}], "description": "Buffer Hit %低于90%说明系统存在问题", "rule_name": "buffer_cache_hit_ratio", "id": "5605", "rule_expression": "[metric,2189000]<[num,$1] && [metric,2189030]>[num,$2]", "db_type": "Oracle", "warning_level": "3", "warning_message": "Buffer Hit {[metric,2189000]}%，低于{$1}%，系统存在问题"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "oracle数据库连接失败分析", "knowledge_description": "oracle数据库连接失败分析"}, {"knowledge_name": "网络接口分析", "knowledge_description": "(历史)网络接口分析"}], "description": "KYD客户端到oracle数据库网络出现问题，oracle数据库可能存在网络故障", "rule_name": "oracle_dsmart_network_failed", "id": "8469", "rule_expression": "(([metric,1000000][oper,contains][str,The Network Adapter could not establish the connection]) && ([metric in time,2,3000061]>[num,0]))", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "显示数据库负载指标情况", "knowledge_description": "显示数据库负载指标情况"}, {"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle共享池分析"}, {"knowledge_name": "共享池分析", "knowledge_description": "共享池分析"}, {"knowledge_name": "查找解析次数比较高的SQL", "knowledge_description": "查找解析次数比较高的SQL"}], "description": "CURSOR解析相关等待会话数超过平均值的5倍并且大于20，共享池可能存在性能隐患", "rule_name": "cursor_parse_problem", "id": "15674", "rule_expression": "[metric,2180519]/[metric hour avg,2180519]>[num,$1] && [metric,2180519]>[num,$2][@Denominator0,0]", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle RAC分析"}, {"knowledge_name": "对找出的SQL语句进行优化", "knowledge_description": "查找集群等待时间比较大的SQL语句"}, {"knowledge_name": "对未分区的对象进行分区，对碎片严重的对象进行重组整理", "knowledge_description": "找出数据库集群间心跳流量比较大的SEGMENT，检查是否分区并对其进行碎片分析"}, {"knowledge_name": "一般来说，平均等待时间应该小于10毫秒，如果某些指标的平均等待时间超过20毫秒，则说明系统有问题。分析所有超出指标范围的指标项", "knowledge_description": "分析数据库集群相关等待事件，判断问题出在哪些方面"}, {"knowledge_name": "操作系统网络层面丢包分析", "knowledge_description": "操作系统网络层面丢包分析"}, {"knowledge_name": "操作系统网络流量分析", "knowledge_description": "操作系统网络流量分析"}, {"knowledge_description": "Ping延迟及时钟差异"}], "description": "Estd Interconnect traffic (KB)过高，系统性能可能会有问题", "rule_name": "connect_traffic", "id": "111", "rule_expression": null, "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "数据库IO功能分析", "knowledge_description": "数据库IO功能分析"}, {"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_name": "检查Physical Reads Direct Per Sec指标", "knowledge_description": "检查数据库中的物理读是否由Direct path read引起的，如果是建议系统中禁用direct path read"}], "description": "数据库IO延时过大，DBIO以外的IO比例过大", "rule_name": "dbio_cacheio_ratio_low", "id": "15560", "rule_expression": "[metric,2180056]/[metric,2180061]<[num,$1] && [metric,2180061]>[num,$2]  && [metric,2184302]>[num,$3]", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "数据库IO功能分析", "knowledge_description": "数据库IO功能分析"}, {"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_name": "检查Physical Reads Direct Per Sec指标", "knowledge_description": "检查数据库中的物理读是否由Direct path read引起的，如果是建议系统中禁用direct path read"}], "description": "数据库IO延时过大，DBIO以外的IO比例过大", "rule_name": "dbio_cacheio_ratio_low", "id": "15678", "rule_expression": "[metric,2180056]/[metric,2180061]<[num,$1] && [metric,2180061]>[num,$2]  && [metric,2184302]>[num,$3]", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析db file sequential read指标 ，如果大于10毫秒说明IO性能已经受到影响", "knowledge_description": "分析db file sequential read指标 ，如果大于10毫秒说明IO性能已经受到影响"}, {"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_name": "数据库物理读过高时分析物理读过高的SQL和SEGMENT", "knowledge_description": "数据库物理读过高时分析物理读过高的SQL和SEGMENT"}, {"knowledge_name": "查看top sql判断是物理读导致还是执行次数原因", "knowledge_description": "物理读较多的TOP SQL"}], "description": "DB FILE SEQUENTIAL READ延时超过最近1小时平均值的5倍，数据库读IO存在隐患", "rule_name": "db_file_seq_read", "id": "5611", "rule_expression": "[metric,2184302]/[metric hour avg,2184302]>[num,$1] && [metric,2184302]>[num,$2] && [metric,2189004]>[num,$3]", "db_type": "Oracle", "warning_level": "3", "warning_message": "DB FILE SEQUENTIAL READ延时（{[metric,2184302]}）ms，超过最近1小时平均值的{$1}倍，数据库读IO存在隐患"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "共享池分析", "knowledge_description": "共享池分析"}, {"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle共享池分析"}, {"knowledge_name": "查询sga内存组件内存变化情况", "knowledge_description": "查询sga内存组件内存变化情况"}, {"knowledge_name": "查找执行次数比较高的TOP SQL", "knowledge_description": "查找执行次数比较高的TOP SQL"}, {"knowledge_name": "数据库并发执行维度分析", "knowledge_description": "数据库并发执行维度分析"}, {"knowledge_name": "判断SGA RESIZE操作是否异常", "knowledge_description": "分析SGA RESIZE操作是否异常"}], "description": "SQL解析异常，可能引起了数据库性能问题", "rule_name": "ora_non_parse_cpu", "id": "8826", "rule_expression": "([metric,2180201]<[num,$1]) && ([metric,2189046] >[num,$2]) && (([metric,2184319] >[num,$3]) || ([metric,2184316] >[num,$4]) || ([metric,3000003] >[num,$5]))", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle RAC分析"}, {"knowledge_name": "对找出的SQL语句进行优化", "knowledge_description": "查找集群等待时间比较大的SQL语句"}, {"knowledge_name": "对未分区的对象进行分区，对碎片严重的对象进行重组整理", "knowledge_description": "找出数据库集群间心跳流量比较大的SEGMENT，检查是否分区并对其进行碎片分析"}, {"knowledge_name": "一般来说，平均等待时间应该小于10毫秒，如果某些指标的平均等待时间超过20毫秒，则说明系统有问题。分析所有超出指标范围的指标项", "knowledge_description": "分析数据库集群相关等待事件，判断问题出在哪些方面"}, {"knowledge_name": "操作系统网络层面丢包分析", "knowledge_description": "操作系统网络层面丢包分析"}, {"knowledge_name": "操作系统网络流量分析", "knowledge_description": "操作系统网络流量分析"}, {"knowledge_description": "Ping延迟及时钟差异"}], "description": "Estd Interconnect traffic (KB)过高，系统性能可能会有问题", "rule_name": "connect_traffic", "id": "5706", "rule_expression": null, "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "检查DG环境"}], "description": "DG备库延迟超过1800秒或存在GAP", "rule_name": "dg_standby_delay_more", "id": "15682", "rule_expression": "[metric in time ,10,2180066]-[cib,2201001,apply_delay]>[num,$1] || [metric in time ,10,2180067]>[num,$2]", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "数据库IO功能分析", "knowledge_description": "数据库IO功能分析"}, {"knowledge_name": "数据库物理写IO性能分析", "knowledge_description": "数据库物理写IO性能分析"}, {"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_name": "显示数据库rman备份任务信息", "knowledge_description": "显示数据库rman备份任务信息"}], "description": "DB CACHE的物理读流量小于总的读IO流量的60%，说明存在大量非正常的IO操作", "rule_name": "db_cache_phy_read_ratio_low", "id": "5609", "rule_expression": "[metric,2180056]/[metric,2180061]<[num,$1] && [metric,2180061]>[num,$2]", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "显示数据库ASM磁盘组信息", "knowledge_description": "显示数据库ASM磁盘组信息"}, {"knowledge_description": "显示指定时间间隔内的日志信息"}], "description": "ASM磁盘组中出现offline的磁盘", "rule_name": "asm_disk_offline", "id": "6915", "rule_expression": "[metric max in time,30,2180526]>[num,$1]", "db_type": "Oracle", "warning_level": "4", "warning_message": "ASM磁盘组中出现offline的磁盘({[metric max iname in time,30,2180526]})"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "显示数据库ASM磁盘组信息", "knowledge_description": "显示数据库ASM磁盘组信息"}, {"knowledge_description": "显示指定时间间隔内的日志信息"}], "description": "ASM磁盘组中出现offline的磁盘", "rule_name": "asm_disk_offline", "id": "6917", "rule_expression": "[metric max in time,30,2180526]>[num,$1]", "db_type": "Oracle", "warning_level": "4", "warning_message": "ASM磁盘组中出现offline的磁盘({[metric max iname in time,30,2180526]})"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_name": "数据库物理写IO性能分析", "knowledge_description": "数据库物理写IO性能分析"}, {"knowledge_name": "数据库IO功能分析", "knowledge_description": "数据库IO功能分析"}, {"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-Oracle IO分析"}], "description": "写IO性能异常同时读IO正常，可能存储复制链路存在问题", "rule_name": "ora_dbio_abnormal", "id": "8823", "rule_expression": "([metric,2184302]*[num,$1]<[metric,2184304]) && ([metric,3001011] <[num,$2]) && ([metric,2189128] <[num,$3]) && ([metric,2184301] >[num,$4])&& ([metric,3000007] <[num,$5])", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据闩锁等待类别进行分类处理", "knowledge_description": "latch等待事件分析，判断数据库出现哪类闩锁等待"}, {"knowledge_name": "分析数据库的latch hit命中率", "knowledge_description": "分析数据库的latch hit命中率"}, {"knowledge_name": "查询指定数据库会话的Latch持有信息", "knowledge_description": "查询指定数据库会话的Latch持有信息"}, {"knowledge_name": "latch,mutex资源诊断工具集", "knowledge_description": "latch工具"}, {"knowledge_name": "根据智能诊断发现的异常指标以及推荐的诊断路径下钻分析", "knowledge_description": "泛路由-Oracle闩锁分析"}, {"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle热块冲突分析"}, {"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle RAC分析"}, {"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle共享池分析"}, {"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-Oracle IO分析"}], "description": "闩锁命中率异常，系统存在并发风险", "rule_name": "latch_hit_ration", "id": "11314", "rule_expression": "([metric,2180200] <[num,$1]) ||([metric in time,10,1000105,2180200][oper,eq][str,1])", "db_type": "Oracle", "warning_level": "3", "warning_message": "闩锁命中率出现异常，达到{[metric,2180200]}%。"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据闩锁等待类别进行分类处理", "knowledge_description": "latch等待事件分析，判断数据库出现哪类闩锁等待"}, {"knowledge_name": "分析数据库的latch hit命中率", "knowledge_description": "分析数据库的latch hit命中率"}, {"knowledge_name": "查询指定数据库会话的Latch持有信息", "knowledge_description": "查询指定数据库会话的Latch持有信息"}, {"knowledge_name": "latch,mutex资源诊断工具集", "knowledge_description": "latch工具"}, {"knowledge_name": "根据智能诊断发现的异常指标以及推荐的诊断路径下钻分析", "knowledge_description": "泛路由-Oracle闩锁分析"}, {"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle热块冲突分析"}, {"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle RAC分析"}, {"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle共享池分析"}, {"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-Oracle IO分析"}], "description": "闩锁命中率异常，系统存在并发风险", "rule_name": "latch_hit_ration", "id": "11316", "rule_expression": "([metric,2180200] <[num,$1]) ||([metric in time,10,1000105,2180200][oper,eq][str,1])", "db_type": "Oracle", "warning_level": "3", "warning_message": "闩锁命中率出现异常，达到{[metric,2180200]}%。"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_name": "分析服务器IO设备的IO情况", "knowledge_description": "分析服务器IO设备的IO情况"}, {"knowledge_name": "数据库IO功能分析", "knowledge_description": "数据库IO功能分析"}, {"knowledge_name": "查看top sql判断是物理读导致还是执行次数原因", "knowledge_description": "物理读较多的TOP SQL"}, {"knowledge_name": "区分top sql是逻辑读还是执行次数增多进行进一步诊断", "knowledge_description": "逻辑读较多的TOP SQL"}, {"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-Oracle IO分析"}], "description": "操作系统IO延时过高（60ms-100ms)，数据库存在风险", "rule_name": "IO_latency_oracle_error", "id": "8052", "rule_expression": "[metric,3000006]<=[num,100] && [metric,3000006]>[num,$1] && ([metric,3000100]>[num,$2] || [metric,3000101]>[num,$3])", "db_type": "Oracle", "warning_level": "3", "warning_message": "操作系统IO延时过高（{[metric,3000006]}ms)，数据库存在风险"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "通过oracle等待事件链分析得到导致等待事件的根会话", "knowledge_description": "生成Oracle数据库实例的会话等待链"}, {"knowledge_name": "检索数据库哪些数据行发生行锁，对于找出存在行锁的行，如果长时间存在，说明阻塞者可能存在问题，可以通过“检查阻塞者会话信息”工具找到该会话，并杀掉该会话来解锁", "knowledge_description": "【实时分析】检索当前数据库哪些数据行发生行锁"}, {"knowledge_name": "分析数据库行锁相关指标", "knowledge_description": "【历史分析】分析数据库行锁相关指标"}], "description": "行锁等待严重超时（超过3600秒）数据库可能存在未提交的会话", "rule_name": "row_lock_wait_time_long", "id": "8047", "rule_expression": null, "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "oracle数据库连接失败分析", "knowledge_description": "oracle数据库连接失败分析"}], "description": "KYD连接oracle数据库的用户密码过期", "rule_name": "oracle_dsmart_password_expried", "id": "11082", "rule_expression": "[metric,1000000][oper,contains][str,ORA-28001]", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据闩锁等待类别进行分类处理", "knowledge_description": "latch等待事件分析，判断数据库出现哪类闩锁等待"}, {"knowledge_name": "分析数据库的latch hit命中率", "knowledge_description": "分析数据库的latch hit命中率"}, {"knowledge_name": "查询指定数据库会话的Latch持有信息", "knowledge_description": "查询指定数据库会话的Latch持有信息"}, {"knowledge_name": "latch,mutex资源诊断工具集", "knowledge_description": "latch工具"}, {"knowledge_name": "根据智能诊断发现的异常指标以及推荐的诊断路径下钻分析", "knowledge_description": "泛路由-Oracle闩锁分析"}, {"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle热块冲突分析"}, {"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle RAC分析"}, {"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle共享池分析"}, {"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-Oracle IO分析"}], "description": "闩锁命中率异常，系统存在并发风险", "rule_name": "latch_hit_ration", "id": "11317", "rule_expression": "([metric,2180200] <[num,$1]) ||([metric in time,10,1000105,2180200][oper,eq][str,1])", "db_type": "Oracle", "warning_level": "3", "warning_message": "闩锁命中率出现异常，达到{[metric,2180200]}%。"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "并发SQL语句分析"}, {"knowledge_name": "显示数据库负载指标情况", "knowledge_description": "显示数据库负载指标情况"}, {"knowledge_name": "查找执行次数比较高的TOP SQL", "knowledge_description": "查找执行次数比较高的TOP SQL"}, {"knowledge_name": "区分top sql是逻辑读还是执行次数增多进行进一步诊断", "knowledge_description": "逻辑读较多的TOP SQL"}, {"knowledge_description": "分析SQL"}], "description": "某个SQL ID的SQL并发执行数量超过25，系统可能存在性能问题", "rule_name": "single_sql_exec_exceed", "id": "94", "rule_expression": "[metric in time,10,2180511] > [num,$1]", "db_type": "Oracle", "warning_level": "3", "warning_message": "SQL ID（{[metric iname in time,10,2180511]}）的并发执行数量{[metric in time,10,2180511]}超过{$1}，系统可能存在性能问题"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "oracle数据库连接失败分析", "knowledge_description": "oracle数据库连接失败分析"}], "description": "KYD连接oracle数据库的用户密码过期", "rule_name": "oracle_dsmart_password_expried", "id": "11161", "rule_expression": "[metric,1000000][oper,contains][str,ORA-28001]", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "oracle数据库连接失败分析", "knowledge_description": "oracle数据库连接失败分析"}], "description": "KYD连接oracle数据库的用户密码过期", "rule_name": "oracle_dsmart_password_expried", "id": "11222", "rule_expression": "[metric,1000000][oper,contains][str,ORA-28001]", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "显示指定时间间隔内的日志报错信息", "knowledge_description": "显示指定时间间隔内的日志报错信息"}], "description": "Oracle日志分析结果分数过低，系统可能存在隐患", "rule_name": "logana_oracle", "id": "15698", "rule_expression": null, "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "显示指定时间间隔内的日志报错信息", "knowledge_description": "显示指定时间间隔内的日志报错信息"}], "description": "Oracle日志分析结果分数过低，系统可能存在隐患", "rule_name": "logana_oracle", "id": "15581", "rule_expression": null, "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "显示数据库负载指标情况", "knowledge_description": "显示数据库负载指标情况"}, {"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle共享池分析"}, {"knowledge_name": "共享池分析", "knowledge_description": "共享池分析"}, {"knowledge_name": "查找解析次数比较高的SQL", "knowledge_description": "查找解析次数比较高的SQL"}], "description": "CURSOR解析相关等待会话数超过平均值的5倍并且大于20，共享池可能存在性能隐患", "rule_name": "cursor_parse_problem", "id": "5708", "rule_expression": "[metric,2180519]/[metric hour avg,2180519]>[num,$1] && [metric,2180519]>[num,$2][@Denominator0,0]", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "streams pool 增长比例过快，超过10%", "rule_name": "streams_pool_incre_fast", "id": "17413", "rule_expression": "[metric,2180566,streams pool] [oper,>] [num,10]", "db_type": "Oracle", "warning_level": "2", "warning_message": "streams pool 增长比例过快，超过10%"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "streams pool 增长比例过快，超过10%", "rule_name": "streams_pool_incre_fast", "id": "17407", "rule_expression": "[metric,2180566,streams pool] [oper,>] [num,10]", "db_type": "Oracle", "warning_level": "2", "warning_message": "streams pool 增长比例过快，超过10%"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "分析归档日志大小远小于redo log文件大小"}, {"knowledge_name": "分析服务器IO设备的IO情况", "knowledge_description": "分析服务器IO设备的IO情况"}, {"knowledge_name": "数据库物理写IO性能分析", "knowledge_description": "数据库物理写IO性能分析"}, {"knowledge_name": "enq: CF - contention等待事件分析", "knowledge_description": "enq: CF - contention等待事件分析"}, {"knowledge_name": "分析数据库中enq: KO - fast object checkpoint等待事件", "knowledge_description": "分析数据库中enq: KO - fast object checkpoint等待事件"}, {"knowledge_name": "查找执行次数比较高的TOP SQL", "knowledge_description": "查找执行次数比较高的TOP SQL"}, {"knowledge_name": "数据库负载模型相关指标分析", "knowledge_description": "数据库负载模型相关指标分析"}, {"knowledge_name": "数据库负载维度分析", "knowledge_description": "数据库负载维度分析"}], "description": "活跃REDO LOG组数超过总日志组数量的2/3则系统可能有问题", "rule_name": "active_redo_log", "id": "5701", "rule_expression": "[metric,2180514]/([cib,2201001,log_count] -[num,1]) > [num,$1]", "db_type": "Oracle", "warning_level": "3", "warning_message": "活跃REDO LOG组数{[metric,2180514]}，超过总日志组数量（{[cib,2201001,log_count]}）的2/3，系统可能有问题"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "streams pool 增长比例过快，超过10%", "rule_name": "streams_pool_incre_fast", "id": "17408", "rule_expression": "[metric,2180566,streams pool] [oper,>] [num,10]", "db_type": "Oracle", "warning_level": "2", "warning_message": "streams pool 增长比例过快，超过10%"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "streams pool 增长比例过快，超过10%", "rule_name": "streams_pool_incre_fast", "id": "17409", "rule_expression": "[metric,2180566,streams pool] [oper,>] [num,10]", "db_type": "Oracle", "warning_level": "2", "warning_message": "streams pool 增长比例过快，超过10%"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "区分top sql是逻辑读还是执行次数增多进行进一步诊断", "knowledge_description": "逻辑读较多的TOP SQL"}, {"knowledge_name": "通过每秒执行的事务数和SQL数，检查数据库负载情况", "knowledge_description": "每秒执行的事务数和SQL语句每秒执行数量可以从宏观上显示出数据库负载运行情况。"}, {"knowledge_name": "如果存在TOP SQL，建议优化", "knowledge_description": "分析逻辑读较高的SQL，从awr中获取"}], "description": "每秒逻辑读出现异常增长，说明应用或者数据出现了异常", "rule_name": "more_logic_read", "id": "5731", "rule_expression": "(([metric,2189030]>[num,$1]) || ([metric in time,10,1000105,2189030][oper,eq][str,3])) && ([metric,2189030]>[num,$2])", "db_type": "Oracle", "warning_level": "2", "warning_message": "每秒逻辑读出现异常增长，说明应用或者数据的应用可能出现了异常，当前逻辑读为{[metric,2189030]}/秒"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析CPU使用情况", "knowledge_description": "分析CPU使用情况"}, {"knowledge_description": "分析指标、SQL相似度"}, {"knowledge_name": "操作系统核心资源分析", "knowledge_description": "操作系统核心资源分析"}, {"knowledge_name": "区分top sql是逻辑读还是执行次数增多进行进一步诊断", "knowledge_description": "逻辑读较多的TOP SQL"}, {"knowledge_name": "显示数据库负载指标情况", "knowledge_description": "显示数据库负载指标情况"}], "description": "操作系统r队列超过CPU数量的2倍且CPU使用率超过90%，则可能存在CPU资源瓶颈", "rule_name": "more_running_proc_oracle", "id": "8137", "rule_expression": "[metric,3000009]/[metric,3000010]>[num,$1] && [metric,3000003]>[num,$2]", "db_type": "Oracle", "warning_level": "4", "warning_message": "操作系统r队列{[metric,3000009]}超过CPU数量的{$1}倍且CPU使用率{[metric,3000003]}%超过{$2}%，可能存在CPU资源瓶颈"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "streams pool 增长比例过快，超过10%", "rule_name": "streams_pool_incre_fast", "id": "17410", "rule_expression": "[metric,2180566,streams pool] [oper,>] [num,10]", "db_type": "Oracle", "warning_level": "2", "warning_message": "streams pool 增长比例过快，超过10%"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "oracle数据库连接失败分析", "knowledge_description": "oracle数据库连接失败分析"}], "description": "KYD连接oracle数据库的用户密码过期", "rule_name": "oracle_dsmart_password_expried", "id": "8545", "rule_expression": "[metric,1000000][oper,contains][str,ORA-28001]", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "streams pool 增长比例过快，超过10%", "rule_name": "streams_pool_incre_fast", "id": "17411", "rule_expression": "[metric,2180566,streams pool] [oper,>] [num,10]", "db_type": "Oracle", "warning_level": "2", "warning_message": "streams pool 增长比例过快，超过10%"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "TX锁分析", "knowledge_description": "TX锁分析"}, {"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_name": "显示数据库负载指标情况", "knowledge_description": "显示数据库负载指标情况"}], "description": "每秒索引叶节点分裂数量超过10个，并且单块读响应时间超过30毫秒，数据库可能存在TX锁恶化的风险", "rule_name": "index_split_lead_to_tx_enq", "id": "5724", "rule_expression": "[metric,2189083]>[num,$1] && [metric,2184302]>[num,$2]", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "streams pool 增长比例过快，超过10%", "rule_name": "streams_pool_incre_fast", "id": "17412", "rule_expression": "[metric,2180566,streams pool] [oper,>] [num,10]", "db_type": "Oracle", "warning_level": "2", "warning_message": "streams pool 增长比例过快，超过10%"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_name": "数据库物理写IO性能分析", "knowledge_description": "数据库物理写IO性能分析"}, {"knowledge_name": "数据库IO功能分析", "knowledge_description": "数据库IO功能分析"}, {"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-Oracle IO分析"}], "description": "写IO性能异常同时读IO正常，可能存储复制链路存在问题", "rule_name": "ora_dbio_abnormal", "id": "8824", "rule_expression": "([metric,2184302]*[num,$1]<[metric,2184304]) && ([metric,3001011] <[num,$2]) && ([metric,2189128] <[num,$3]) && ([metric,2184301] >[num,$4])&& ([metric,3000007] <[num,$5])", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle热块冲突分析"}, {"knowledge_name": "进行Top SEGMENT和SQL分析", "knowledge_description": "如果数据库集群间出现了热块冲突，会导致RAC性能出现严重下降"}], "description": "Oracle热块冲突严重，数据库性能会受影响", "rule_name": "ora_bbw", "id": "15707", "rule_expression": "([metric,2184313] >[num,$1] || [metric,2184312] >[num,$2]) && ([metric,2189030] >[num,$3])", "db_type": "Oracle", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "oracle SGA超过100G的数据库vm.max_map_count参数配置不正确", "rule_name": "oracle_big_sga_mmap_setting_incorrect", "id": "15708", "rule_expression": "[cib,2201010,sga_target]>[num,$1] && [cib,3010002,vm.max_map_count]<[num,$2]", "db_type": "Oracle", "warning_level": "4", "warning_message": "oracle SGA当前为{[cib,2201010,sga_target]}，超过100G，但数据库服务器vm.max_map_count参数为 {[cib,3010002,vm.max_map_count]}，配置过小，可能会导致数据库产生ORA-04030报错。"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断发现的异常指标以及推荐的诊断路径下钻分析", "knowledge_description": "泛路由-Oracle闩锁分析"}, {"knowledge_name": "根据闩锁等待类别进行分类处理", "knowledge_description": "latch等待事件分析，判断数据库出现哪类闩锁等待"}], "description": "Oracle数据库的闩锁存在问题，数据库存在风险", "rule_name": "ora_latch_free", "id": "8724", "rule_expression": "([metric,2180200] <[num,$1] ||[metric,2184322] >[num,$2]) &&([metric,3000003] >[num,$3])&&([metric,3001011] >[num,$4])", "db_type": "Oracle", "warning_level": "3", "warning_message": "闩锁争用严重，数据库存在风险（当前闩锁命中率{[metric,2180200]}%,闩锁平均等待时间：{[metric,2184322]}，SYS CPU使用率{[metric,3001011] }%"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "数据库物理写IO性能分析", "knowledge_description": "数据库物理写IO性能分析"}, {"knowledge_description": "并发SQL语句分析"}, {"knowledge_name": "通过每秒执行的事务数和SQL数，检查数据库负载情况", "knowledge_description": "每秒执行的事务数和SQL语句每秒执行数量可以从宏观上显示出数据库负载运行情况。"}, {"knowledge_name": "显示数据库中的事务信息", "knowledge_description": "显示数据库中的事务信息"}, {"knowledge_name": "数据库并发执行维度分析", "knowledge_description": "数据库并发执行维度分析"}], "description": "物理写异常增长，应用可能存在异常", "rule_name": "more_phyisical_write", "id": "11399", "rule_expression": "(([metric,2189006]>[num,$1]) || ([metric in time,10,1000105,2189006][oper,eq][str,3])) && ([metric,2189006]>[num,$2])", "db_type": "Oracle", "warning_level": "2", "warning_message": "数据库物理写异常增长或者每秒物理写超过{[num,$1]}，应用可能存在异常，告警发生时的最新物理写{[metric,2189006]}/秒"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle RAC分析"}, {"knowledge_name": "RAC DRM分析", "knowledge_description": "RAC DRM分析"}, {"knowledge_name": "显示数据库负载指标情况", "knowledge_description": "显示数据库负载指标情况"}, {"knowledge_name": "获取集群等待时间较高的TOP SQL", "knowledge_description": "获取集群等待时间较高的TOP SQL"}, {"knowledge_name": "操作系统网络总体分析", "knowledge_description": "操作系统网络总体分析"}, {"knowledge_name": "mtr网络诊断工具", "knowledge_description": "mtr网络诊断工具"}], "description": "gcs drm freeze in enter server mode平均等待时间超过100毫秒，并且gc remaster 平均等待时间超过100毫秒，说明DRM已经影响了数据库的性能，建议关闭DRM", "rule_name": "rac_drm_problem", "id": "5736", "rule_expression": "[metric,2180059]>[num,$1] && [metric,2180060]>[num,$2]", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle RAC分析"}, {"knowledge_name": "分析指定时间间隔内GC相关指标可能存在的问题", "knowledge_description": "分析指定时间间隔内GC相关指标"}, {"knowledge_name": "RAC DRM分析", "knowledge_description": "RAC DRM分析"}, {"knowledge_name": "检索数据库哪些数据行发生行锁，对于找出存在行锁的行，如果长时间存在，说明阻塞者可能存在问题，可以通过“检查阻塞者会话信息”工具找到该会话，并杀掉该会话来解锁", "knowledge_description": "【实时分析】检索当前数据库哪些数据行发生行锁"}, {"knowledge_name": "获取集群等待时间较高的TOP SQL", "knowledge_description": "获取集群等待时间较高的TOP SQL"}, {"knowledge_name": "对未分区的对象进行分区，对碎片严重的对象进行重组整理", "knowledge_description": "找出数据库集群间心跳流量比较大的SEGMENT，检查是否分区并对其进行碎片分析"}, {"knowledge_name": "查看top sql判断是物理读导致还是执行次数原因", "knowledge_description": "物理读较多的TOP SQL"}, {"knowledge_name": "数据库物理读过高时分析物理读过高的SQL和SEGMENT", "knowledge_description": "数据库物理读过高时分析物理读过高的SQL和SEGMENT"}, {"knowledge_name": "操作系统网络总体分析", "knowledge_description": "操作系统网络总体分析"}, {"knowledge_name": "mtr网络诊断工具", "knowledge_description": "mtr网络诊断工具"}], "description": "Avg global enqueue get time大于60毫秒，并且TX锁相关平均等待时间超过500毫秒，则说明行锁等待存在隐患", "rule_name": "rac_interconnect_time_and_enq_tx_problem", "id": "5737", "rule_expression": "[metric,2180205]>[num,$1] && [metric,2180058]>[num,$2]", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "REDO NOWAIT分析", "knowledge_description": "REDO NOWAIT分析"}, {"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_name": "显示数据库负载指标情况", "knowledge_description": "显示数据库负载指标情况"}], "description": "Redo Allocation Hit Ratio小于100%，说明REDO存在性能隐患，需要检查REDO和事务的相关情况", "rule_name": "redo_allocation_hit_ratio", "id": "5739", "rule_expression": "[metric,2189002]<[num,$1] && [metric,2189016]>[num,$2]", "db_type": "Oracle", "warning_level": "3", "warning_message": "Redo Allocation Hit Ratio 值为{[metric,2189002]}%，REDO存在性能隐患，需要检查REDO和事务的相关情况"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_name": "数据库IO功能分析", "knowledge_description": "数据库IO功能分析"}], "description": "在工作时间，数据库物理读大于80M/秒，数据库备份IO超过50M/秒，导致单块读延时是平时的2倍，说明备份对IO性能造成了影响", "rule_name": "rman_backup_problem", "id": "5740", "rule_expression": "[metric,2180052]>[num,$1] && [metric,2180057]>[num,$2] && [metric,2180057]>[metric hour avg,2180057]*[num,$3]", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "检索阻塞者会话信息，杀掉该会话可以解开相关的锁或者闩锁。注意部分后台进程是不能杀的，如果杀错会话，会导致数据库宕机", "knowledge_description": "检索阻塞会话信息"}, {"knowledge_name": "在创建索引一段时间后，无返回结果可用此脚本进行检查。", "knowledge_description": "检查数据库是否存在索引创建或者重建任务"}, {"knowledge_name": "通过oracle等待事件链分析得到导致等待事件的根会话", "knowledge_description": "生成Oracle数据库实例的会话等待链"}], "description": "enq:TM-contention 等待的总会话数超过10", "rule_name": "session_wait_enq_tm_cnt_exceed", "id": "5742", "rule_expression": "[metric,2180508]>[num,$1]", "db_type": "Oracle", "warning_level": "2", "warning_message": "enq:TM-contention 等待的总会话数超过10，原因：1）不合理的锁表 2）DML语句相关表存在外键关系，并且子表外键缺少索引 3）BUG导致的并行创建索引缓慢"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "运维对象连接失败，请检查运维对象是否down", "knowledge_description": "运维对象连接状态分析"}, {"knowledge_name": "操作系统核心资源分析", "knowledge_description": "操作系统核心资源分析"}, {"knowledge_name": "显示数据库负载指标情况", "knowledge_description": "显示数据库负载指标情况"}, {"knowledge_name": "数据库后台进程错误及等待事件诊断", "knowledge_description": "数据库后台进程错误及等待事件诊断"}, {"knowledge_name": "分析数据库控制文件等待事件延时情况", "knowledge_description": "分析数据库控制文件等待事件延时情况"}, {"knowledge_name": "通过oracle等待事件链分析得到导致等待事件的根会话", "knowledge_description": "生成Oracle数据库实例的会话等待链"}, {"knowledge_name": "服务器内存分析", "knowledge_description": "服务器内存分析"}, {"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}], "description": "数据库采集任务严重超时，数据库存在严重性能风险", "rule_name": "collector_exec_slow_oracle", "id": "7002", "rule_expression": "[metric,1000000][oper,eq][str,连接成功] && [metric,1000101] >([metric hour avg,1000101]*[num,$1])", "db_type": "Oracle", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "表空间使用情况检查"}, {"knowledge_name": "显示数据库ASM磁盘组信息", "knowledge_description": "显示数据库ASM磁盘组信息"}, {"knowledge_description": "用户容量分析"}], "description": "表空间容量风险高，数据库中存在表空间使用率大于90%且可用天数小于30天，存在表空间满的风险", "rule_name": "oracle_tbs_capacity_risk", "id": "15718", "rule_expression": "[metric max in time,240,2180045]==[num,$1]", "db_type": "Oracle", "warning_level": "2", "warning_message": "表空间({[metric in time,240,2180516]})容量风险高，使用率大于90%且可用天数小于30天，存在表空间满的风险"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "查看全表扫描的对象"}, {"knowledge_name": "查看top sql判断是物理读导致还是执行次数原因", "knowledge_description": "物理读较多的TOP SQL"}, {"knowledge_name": "区分top sql是逻辑读还是执行次数增多进行进一步诊断", "knowledge_description": "逻辑读较多的TOP SQL"}, {"knowledge_name": "获取执行时间比较高的TOP SQL", "knowledge_description": "获取执行时间比较高的TOP SQL"}], "description": "Long table  scan Per Sec超过小时平均值的10倍，应用可能存在异常", "rule_name": "long_table_scan_time_raise", "id": "81", "rule_expression": "[metric,2189036]/[metric hour avg,2189036]>[num,$1] && [metric,2189036]>[num,$2][@Denominator0,0]", "db_type": "Oracle", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "sql告警分析", "knowledge_description": "sql告警分析"}], "description": "各种维度的top sql告警", "rule_name": "sql_alert", "id": "8179", "rule_expression": "[metric in time,3,2180543]>[num,$1]", "db_type": "Oracle", "warning_level": "2", "warning_message": "各种维度的top sql告警{[metric in time,3,2180543]}个"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "分析SQL"}, {"knowledge_description": "【Oracle】分析指定SQL的执行计划"}], "description": "关键SQL执行计划发生变化", "rule_name": "focus_sql_plan_change", "id": "11287", "rule_expression": "[metric,2180075][oper,==][num,$1]", "db_type": "Oracle", "warning_level": "4", "warning_message": "SQL：{[metric,2180074]}的执行计划发生变化。"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "oracle数据库连接失败分析", "knowledge_description": "oracle数据库连接失败分析"}], "description": "oracle数据库未知连接错误", "rule_name": "oracle_unkown_connect_failed", "id": "8481", "rule_expression": "[metric,1000000][oper,notcontains][str,ORA-28001] && [metric,1000000][oper,notcontains][str,ORA-12505] && [metric,1000000][oper,notcontains][str,ORA-12514] && [metric,1000000][oper,notcontains][str,ORA-12516] && [metric,1000000][oper,notcontains][str,ORA-00257] && [metric,1000000][oper,notcontains][str,ORA-01017] && [metric,1000000][oper,notcontains][str,ORA-28000] && [metric,1000000][oper,notcontains][str,The Network Adapter could not establish the connection] && [metric,1000000][oper,notcontains][str,SQL执行失败] && [metric,1000000][oper,neq][str,连接成功]", "db_type": "Oracle", "warning_level": "4", "warning_message": "oracle数据库连接错误：{[metric,1000000]}"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "如果log file parallel write的平均等待时间超过10ms,说明数据库日志写IO性能存在问题；如果Log file sync与log file parallel write两个等待事件的平均等待时间的差值大于10ms 或者大于log file parallel write等待事件的平均等待时间的50%，则说明数据库日志同步存在性能问题", "knowledge_description": "LOG FILE SYNC等待延时超过n毫秒，说明数据库存在性能隐患"}, {"knowledge_description": "分析归档日志大小远小于redo log文件大小"}], "description": "LOG FILE SYNC等待严重超时，数据库存在安全隐患", "rule_name": "log_file_sync_wait_critical", "id": "8212", "rule_expression": "(([metric,2184301] >[num,$1]) ||([metric in time,10,1000105,2184301][oper,eq][str,3]))&&([metric,2184301] >[num,$2])", "db_type": "Oracle", "warning_level": "4", "warning_message": "日志同步延时严重超标或者异常波动，达到{[metric,2184301]}毫秒"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "分析SQL"}, {"knowledge_description": "【Oracle】分析指定SQL的执行计划"}], "description": "关键SQL执行计划发生变化", "rule_name": "focus_sql_plan_change", "id": "11286", "rule_expression": "[metric,2180075][oper,==][num,$1]", "db_type": "Oracle", "warning_level": "4", "warning_message": "SQL：{[metric,2180074]}的执行计划发生变化。"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "分析SQL"}, {"knowledge_description": "【Oracle】分析指定SQL的执行计划"}], "description": "关键SQL执行计划发生变化", "rule_name": "focus_sql_plan_change", "id": "11285", "rule_expression": "[metric,2180075][oper,==][num,$1]", "db_type": "Oracle", "warning_level": "4", "warning_message": "SQL：{[metric,2180074]}的执行计划发生变化。"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "查看top sql判断是物理读导致还是执行次数原因", "knowledge_description": "物理读较多的TOP SQL"}, {"knowledge_name": "通过每秒执行的事务数和SQL数，检查数据库负载情况", "knowledge_description": "每秒执行的事务数和SQL语句每秒执行数量可以从宏观上显示出数据库负载运行情况。"}, {"knowledge_name": "检查Physical Reads Direct Per Sec指标", "knowledge_description": "检查数据库中的物理读是否由Direct path read引起的，如果是建议系统中禁用direct path read"}, {"knowledge_name": "如果存在TOP SQL，建议优化", "knowledge_description": "分析物理读较高的SQL，从awr中获取"}], "description": "每秒物理读远超出平时平均值10倍，并且超过基线0.8倍，说明应用或者数据出现了异常", "rule_name": "more_phy_read", "id": "83", "rule_expression": "(([metric,2189004]>[num,$1]) || ([metric in time,10,1000105,2189004][oper,eq][str,3])) && ([metric,2189004]>[num,$2])", "db_type": "Oracle", "warning_level": "2", "warning_message": "每秒物理读{[metric,2189004]}超出小时平均值{$1}倍，并且超过基线{$2}倍，应用或者数据出现了异常"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "运维对象连接失败，请检查运维对象是否down", "knowledge_description": "运维对象连接状态分析"}, {"knowledge_name": "操作系统核心资源分析", "knowledge_description": "操作系统核心资源分析"}, {"knowledge_name": "显示数据库负载指标情况", "knowledge_description": "显示数据库负载指标情况"}, {"knowledge_name": "通过oracle等待事件链分析得到导致等待事件的根会话", "knowledge_description": "生成Oracle数据库实例的会话等待链"}, {"knowledge_name": "服务器内存分析", "knowledge_description": "服务器内存分析"}, {"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_name": "分析数据库实例在指定时间窗口活跃会话的活动特征，并进行异常诊断： 1、高并发/执行时间长的SQL语句 2、主要等待事件 3、影响最大的会话 4、是否存在HANG状况及可能原因", "knowledge_description": "分析数据库实例情况"}], "description": "数据库连接严重超时，数据库存在巨大风险", "rule_name": "connect_slow_oracle", "id": "6990", "rule_expression": "([metric,1000102] >([metric hour avg,1000102]*[num,$1]))&& (([metric,1000102] >[num,$2])||([metric in time,10,1000105,1000102][oper,eq][str,3]))", "db_type": "Oracle", "warning_level": "2", "warning_message": "客户端连接数据库时间出现异常（超过平均水平10倍或者出现其他异常），目前值为{[metric,1000102]}毫秒"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析CPU使用情况", "knowledge_description": "分析CPU使用情况"}, {"knowledge_description": "分析指标、SQL相似度"}, {"knowledge_name": "操作系统核心资源分析", "knowledge_description": "操作系统核心资源分析"}, {"knowledge_name": "区分top sql是逻辑读还是执行次数增多进行进一步诊断", "knowledge_description": "逻辑读较多的TOP SQL"}, {"knowledge_name": "显示数据库负载指标情况", "knowledge_description": "显示数据库负载指标情况"}], "description": "操作系统r队列超过CPU数量的2倍且CPU使用率超过90%，则可能存在CPU资源瓶颈", "rule_name": "more_running_proc_oracle", "id": "8134", "rule_expression": "[metric,3000009]/[metric,3000010]>[num,$1] && [metric,3000003]>[num,$2]", "db_type": "Oracle", "warning_level": "4", "warning_message": "操作系统r队列{[metric,3000009]}超过CPU数量的{$1}倍且CPU使用率{[metric,3000003]}%超过{$2}%，可能存在CPU资源瓶颈"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据具体的登录方式判断并提供建议", "knowledge_description": "数据库存在频繁登录诊断分析"}, {"knowledge_name": "分析数据库实例在指定时间窗口内的数据库会话情况", "knowledge_description": "分析数据库实例在指定时间窗口内的数据库会话情况"}, {"knowledge_name": "检查用户过期或密码错误", "knowledge_description": "检查用户过期或密码错误"}, {"knowledge_name": "根据主机名称查询数据库会话及进程信息", "knowledge_description": "根据主机名称查询数据库会话及进程信息"}], "description": "数据库当前进程数超过process参数的95%，数据库存在连接数满的风险", "rule_name": "process_up_to_resource_limit", "id": "15726", "rule_expression": "[metric,2180049]>[cib,2201010,processes]*[num,$1]", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle RAC分析"}, {"knowledge_name": "分析指定时间间隔内GC相关指标可能存在的问题", "knowledge_description": "分析指定时间间隔内GC相关指标"}, {"knowledge_name": "RAC DRM分析", "knowledge_description": "RAC DRM分析"}, {"knowledge_name": "检索数据库哪些数据行发生行锁，对于找出存在行锁的行，如果长时间存在，说明阻塞者可能存在问题，可以通过“检查阻塞者会话信息”工具找到该会话，并杀掉该会话来解锁", "knowledge_description": "【实时分析】检索当前数据库哪些数据行发生行锁"}, {"knowledge_name": "获取集群等待时间较高的TOP SQL", "knowledge_description": "获取集群等待时间较高的TOP SQL"}, {"knowledge_name": "对未分区的对象进行分区，对碎片严重的对象进行重组整理", "knowledge_description": "找出数据库集群间心跳流量比较大的SEGMENT，检查是否分区并对其进行碎片分析"}, {"knowledge_name": "查看top sql判断是物理读导致还是执行次数原因", "knowledge_description": "物理读较多的TOP SQL"}, {"knowledge_name": "数据库物理读过高时分析物理读过高的SQL和SEGMENT", "knowledge_description": "数据库物理读过高时分析物理读过高的SQL和SEGMENT"}, {"knowledge_name": "操作系统网络总体分析", "knowledge_description": "操作系统网络总体分析"}, {"knowledge_name": "mtr网络诊断工具", "knowledge_description": "mtr网络诊断工具"}], "description": "Avg global enqueue get time大于60毫秒，并且TX锁相关平均等待时间超过500毫秒，则说明行锁等待存在隐患", "rule_name": "rac_interconnect_time_and_enq_tx_problem", "id": "15728", "rule_expression": "[metric,2180205]>[num,$1] && [metric,2180058]>[num,$2]", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle RAC分析"}, {"knowledge_name": "分析指定时间间隔内GC相关指标可能存在的问题", "knowledge_description": "分析指定时间间隔内GC相关指标"}, {"knowledge_name": "RAC DRM分析", "knowledge_description": "RAC DRM分析"}, {"knowledge_name": "获取集群等待时间较高的TOP SQL", "knowledge_description": "获取集群等待时间较高的TOP SQL"}, {"knowledge_name": "对未分区的对象进行分区，对碎片严重的对象进行重组整理", "knowledge_description": "找出数据库集群间心跳流量比较大的SEGMENT，检查是否分区并对其进行碎片分析"}, {"knowledge_name": "数据库物理读过高时分析物理读过高的SQL和SEGMENT", "knowledge_description": "数据库物理读过高时分析物理读过高的SQL和SEGMENT"}, {"knowledge_name": "操作系统网络总体分析", "knowledge_description": "操作系统网络总体分析"}, {"knowledge_name": "操作系统网络层面丢包分析", "knowledge_description": "操作系统网络层面丢包分析"}, {"knowledge_name": "mtr网络诊断工具", "knowledge_description": "mtr网络诊断工具"}], "description": "Avg global cache cr block receive time 大于20毫秒并且RAC INTERCONNECT流量大于30M，说明集群性能存在隐患", "rule_name": "rac_interconnect_time_and_flow_problem", "id": "15729", "rule_expression": "[metric,2189098]>[num,$1] && [metric,2180204]>[num,$2]", "db_type": "Oracle", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "检查应用", "knowledge_description": "查看死锁"}, {"knowledge_name": "检查应用", "knowledge_description": "查看死锁"}], "description": "存在死锁,请及时处理", "rule_name": "oracle_deadlock", "id": "17414", "rule_expression": "[metric in time,5,2180569][oper,>][num,$1] ", "db_type": "Oracle", "warning_level": "2", "warning_message": "存在死锁,SID为:{[metric,2180570]},请及时处理"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "检查应用", "knowledge_description": "查看死锁"}, {"knowledge_name": "检查应用", "knowledge_description": "查看死锁"}], "description": "存在死锁,请及时处理", "rule_name": "oracle_deadlock", "id": "17419", "rule_expression": "[metric in time,5,2180569][oper,>][num,$1] ", "db_type": "Oracle", "warning_level": "2", "warning_message": "存在死锁,SID为:{[metric,2180570]},请及时处理"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "检查应用", "knowledge_description": "查看死锁"}, {"knowledge_name": "检查应用", "knowledge_description": "查看死锁"}], "description": "存在死锁,请及时处理", "rule_name": "oracle_deadlock", "id": "17415", "rule_expression": "[metric in time,5,2180569][oper,>][num,$1] ", "db_type": "Oracle", "warning_level": "2", "warning_message": "存在死锁,SID为:{[metric,2180570]},请及时处理"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "检查应用", "knowledge_description": "查看死锁"}, {"knowledge_name": "检查应用", "knowledge_description": "查看死锁"}], "description": "存在死锁,请及时处理", "rule_name": "oracle_deadlock", "id": "17416", "rule_expression": "[metric in time,5,2180569][oper,>][num,$1] ", "db_type": "Oracle", "warning_level": "2", "warning_message": "存在死锁,SID为:{[metric,2180570]},请及时处理"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "检查应用", "knowledge_description": "查看死锁"}, {"knowledge_name": "检查应用", "knowledge_description": "查看死锁"}], "description": "存在死锁,请及时处理", "rule_name": "oracle_deadlock", "id": "17417", "rule_expression": "[metric in time,5,2180569][oper,>][num,$1] ", "db_type": "Oracle", "warning_level": "2", "warning_message": "存在死锁,SID为:{[metric,2180570]},请及时处理"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "检查应用", "knowledge_description": "查看死锁"}, {"knowledge_name": "检查应用", "knowledge_description": "查看死锁"}], "description": "存在死锁,请及时处理", "rule_name": "oracle_deadlock", "id": "17418", "rule_expression": "[metric in time,5,2180569][oper,>][num,$1] ", "db_type": "Oracle", "warning_level": "2", "warning_message": "存在死锁,SID为:{[metric,2180570]},请及时处理"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "检查应用", "knowledge_description": "查看死锁"}, {"knowledge_name": "检查应用", "knowledge_description": "查看死锁"}], "description": "存在死锁,请及时处理", "rule_name": "oracle_deadlock", "id": "17420", "rule_expression": "[metric in time,5,2180569][oper,>][num,$1] ", "db_type": "Oracle", "warning_level": "2", "warning_message": "存在死锁,SID为:{[metric,2180570]},请及时处理"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "显示数据库ASM磁盘组信息", "knowledge_description": "显示数据库ASM磁盘组信息"}, {"knowledge_name": "及时清理归档日志", "knowledge_description": "检查Oracle 归档日志空间使用情况"}, {"knowledge_name": "显示表空间容量使用情况，以MB为单位", "knowledge_description": "显示表空间容量使用情况，以MB为单位"}, {"knowledge_name": "查询数据库表空间信息", "knowledge_description": "查询数据库表空间信息"}], "description": "ASM磁盘组使用率超过80%且预估可用天数小于7天，系统存在风险", "rule_name": "dg_usage_exceed", "id": "46", "rule_expression": "([metric,2180533]<[num,$1]) && ([metric max in time,30,2180517]>[num,$2])", "db_type": "Oracle", "warning_level": "4", "warning_message": "ASM磁盘组{[metric max iname in time,30,2180517]}使用率{[metric max in time,30,2180517]}%，预估可用{[metric,2180533]}天"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "显示数据库ASM磁盘组信息", "knowledge_description": "显示数据库ASM磁盘组信息"}, {"knowledge_name": "及时清理归档日志", "knowledge_description": "检查Oracle 归档日志空间使用情况"}, {"knowledge_name": "显示表空间容量使用情况，以MB为单位", "knowledge_description": "显示表空间容量使用情况，以MB为单位"}, {"knowledge_name": "查询数据库表空间信息", "knowledge_description": "查询数据库表空间信息"}], "description": "ASM磁盘组使用率超过80%且预估可用天数小于7天，系统存在风险", "rule_name": "dg_usage_exceed", "id": "65", "rule_expression": "([metric,2180533]<[num,$1]) && ([metric max in time,30,2180517]>[num,$2])", "db_type": "Oracle", "warning_level": "4", "warning_message": "ASM磁盘组{[metric max iname in time,30,2180517]}使用率{[metric max in time,30,2180517]}%，预估可用{[metric,2180533]}天"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据具体的登录方式判断并提供建议", "knowledge_description": "数据库存在频繁登录诊断分析"}], "description": "每秒LOGONS的数量超过30个，数据库存在安全风险 ", "rule_name": "count_logon_sec_critical", "id": "8217", "rule_expression": "([metric,2189018] >[num,$1]) ||([metric in time,10,1000105,2189018][oper,eq][str,3])", "db_type": "Oracle", "warning_level": "3", "warning_message": "每秒登录数突发异常增长，达到{[metric,2189018]}/秒"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "共享池分析", "knowledge_description": "共享池分析"}, {"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle共享池分析"}, {"knowledge_name": "根据闩锁等待类别进行分类处理", "knowledge_description": "latch等待事件分析，判断数据库出现哪类闩锁等待"}, {"knowledge_name": "分析数据库的latch hit命中率", "knowledge_description": "分析数据库的latch hit命中率"}, {"knowledge_name": "latch,mutex资源诊断工具集", "knowledge_description": "latch工具"}], "description": "因为共享池引发的闩锁性能问题", "rule_name": "latch_shared_pool", "id": "11595", "rule_expression": "([metric,2180200] <[num,$1] ||[metric,2184321] >[num,$2])&&([metric,3001011]>[num,$3])&&([metric,\t2189112]<[num,$4]||[metric,\t2189110]<[num,$4])&&([metric,2184321]>[num,$5])", "db_type": "Oracle", "warning_level": "4", "warning_message": "闩锁命中率较低（{[metric,2180200] }%），很可能是共享池引起的问题，共享池闩锁平均延时{[metric,2184321]}毫秒"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "共享池分析", "knowledge_description": "共享池分析"}, {"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle共享池分析"}, {"knowledge_name": "根据闩锁等待类别进行分类处理", "knowledge_description": "latch等待事件分析，判断数据库出现哪类闩锁等待"}, {"knowledge_name": "分析数据库的latch hit命中率", "knowledge_description": "分析数据库的latch hit命中率"}, {"knowledge_name": "latch,mutex资源诊断工具集", "knowledge_description": "latch工具"}], "description": "因为共享池引发的闩锁性能问题", "rule_name": "latch_shared_pool", "id": "11593", "rule_expression": "([metric,2180200] <[num,$1] ||[metric,2184321] >[num,$2])&&([metric,3001011]>[num,$3])&&([metric,\t2189112]<[num,$4]||[metric,\t2189110]<[num,$4])&&([metric,2184321]>[num,$5])", "db_type": "Oracle", "warning_level": "4", "warning_message": "闩锁命中率较低（{[metric,2180200] }%），很可能是共享池引起的问题，共享池闩锁平均延时{[metric,2184321]}毫秒"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "通过oracle等待事件链分析得到导致等待事件的根会话", "knowledge_description": "生成Oracle数据库实例的会话等待链"}, {"knowledge_name": "TX锁分析", "knowledge_description": "TX锁分析"}, {"knowledge_name": "显示数据库当前实例锁信息", "knowledge_description": "显示数据库当前实例锁信息"}, {"knowledge_name": "根据闩锁等待类别进行分类处理", "knowledge_description": "latch等待事件分析，判断数据库出现哪类闩锁等待"}, {"knowledge_id": 182, "knowledge_name": "Unknown", "knowledge_description": "Unknown"}], "description": "被阻塞的会话数过多（超过30个），系统可能存在隐患", "rule_name": "blocking_session", "id": "359", "rule_expression": "([metric,2180518] >[num,$1]) ||([metric in time,10,1000105,2180518][oper,eq][str,3])", "db_type": "Oracle", "warning_level": "4", "warning_message": "被阻塞的会话数出现异常增长或者达到{[num,$1]}个，最新的阻塞会话数为{[metric,2180518]}"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "通过oracle等待事件链分析得到导致等待事件的根会话", "knowledge_description": "生成Oracle数据库实例的会话等待链"}, {"knowledge_name": "TX锁分析", "knowledge_description": "TX锁分析"}, {"knowledge_name": "显示数据库当前实例锁信息", "knowledge_description": "显示数据库当前实例锁信息"}, {"knowledge_name": "根据闩锁等待类别进行分类处理", "knowledge_description": "latch等待事件分析，判断数据库出现哪类闩锁等待"}, {"knowledge_id": 182, "knowledge_name": "Unknown", "knowledge_description": "Unknown"}], "description": "被阻塞的会话数过多（超过30个），系统可能存在隐患", "rule_name": "blocking_session", "id": "5604", "rule_expression": "([metric,2180518] >[num,$1]) ||([metric in time,10,1000105,2180518][oper,eq][str,3])", "db_type": "Oracle", "warning_level": "4", "warning_message": "被阻塞的会话数出现异常增长或者达到{[num,$1]}个，最新的阻塞会话数为{[metric,2180518]}"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "共享池分析", "knowledge_description": "共享池分析"}, {"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle共享池分析"}, {"knowledge_name": "根据闩锁等待类别进行分类处理", "knowledge_description": "latch等待事件分析，判断数据库出现哪类闩锁等待"}, {"knowledge_name": "分析数据库的latch hit命中率", "knowledge_description": "分析数据库的latch hit命中率"}, {"knowledge_name": "latch,mutex资源诊断工具集", "knowledge_description": "latch工具"}], "description": "因为共享池引发的闩锁性能问题", "rule_name": "latch_shared_pool", "id": "11594", "rule_expression": "([metric,2180200] <[num,$1] ||[metric,2184321] >[num,$2])&&([metric,3001011]>[num,$3])&&([metric,\t2189112]<[num,$4]||[metric,\t2189110]<[num,$4])&&([metric,2184321]>[num,$5])", "db_type": "Oracle", "warning_level": "4", "warning_message": "闩锁命中率较低（{[metric,2180200] }%），很可能是共享池引起的问题，共享池闩锁平均延时{[metric,2184321]}毫秒"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "数据库物理写IO性能分析", "knowledge_description": "数据库物理写IO性能分析"}, {"knowledge_description": "并发SQL语句分析"}, {"knowledge_name": "通过每秒执行的事务数和SQL数，检查数据库负载情况", "knowledge_description": "每秒执行的事务数和SQL语句每秒执行数量可以从宏观上显示出数据库负载运行情况。"}, {"knowledge_name": "显示数据库中的事务信息", "knowledge_description": "显示数据库中的事务信息"}, {"knowledge_name": "数据库并发执行维度分析", "knowledge_description": "数据库并发执行维度分析"}], "description": "物理写异常增长，应用可能存在异常", "rule_name": "more_phyisical_write", "id": "11400", "rule_expression": "(([metric,2189006]>[num,$1]) || ([metric in time,10,1000105,2189006][oper,eq][str,3])) && ([metric,2189006]>[num,$2])", "db_type": "Oracle", "warning_level": "2", "warning_message": "数据库物理写异常增长或者每秒物理写超过{[num,$1]}，应用可能存在异常，告警发生时的最新物理写{[metric,2189006]}/秒"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle热块冲突分析"}, {"knowledge_name": "区分top sql是逻辑读还是执行次数增多进行进一步诊断", "knowledge_description": "逻辑读较多的TOP SQL"}, {"knowledge_name": "db cache调整建议", "knowledge_description": "db cache调整建议"}], "description": "因为CBC引发的闩锁争用", "rule_name": "latch_cbc", "id": "11598", "rule_expression": "([metric,2180200] <[num,$1] ||[metric,2184321] >[num,$2])&&([metric,3001011]>[num,$3])&&([metric,\t2184313]>[num,$4])&&([metric,2184312]>[num,$5])", "db_type": "Oracle", "warning_level": "4", "warning_message": "CACHE BUFFER CHAINS延时（{[metric,2184312]}ms）严重，闩锁存在争用"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "查找执行次数比较高的TOP SQL", "knowledge_description": "查找执行次数比较高的TOP SQL"}, {"knowledge_name": "查找解析次数比较高的SQL", "knowledge_description": "查找解析次数比较高的SQL"}, {"knowledge_name": "根据闩锁等待类别进行分类处理", "knowledge_description": "latch等待事件分析，判断数据库出现哪类闩锁等待"}, {"knowledge_name": "根据智能诊断发现的异常指标以及推荐的诊断路径下钻分析", "knowledge_description": "泛路由-Oracle闩锁分析"}], "description": "因为解析问题导致的闩锁争用", "rule_name": "latch_parse", "id": "11603", "rule_expression": "([metric,2180200] <[num,$1])&&([metric,3001011]>[num,$2])&&([metric,2189044]>[num,$3])&&([metric,2189046]>[num,$4])&&([metric,2189121]>[num,2000])&&([metric,2184315]>[num,$5]||[metric,2184314]>[num,$5])", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle热块冲突分析"}, {"knowledge_name": "区分top sql是逻辑读还是执行次数增多进行进一步诊断", "knowledge_description": "逻辑读较多的TOP SQL"}, {"knowledge_name": "db cache调整建议", "knowledge_description": "db cache调整建议"}], "description": "因为CBC引发的闩锁争用", "rule_name": "latch_cbc", "id": "11599", "rule_expression": "([metric,2180200] <[num,$1] ||[metric,2184321] >[num,$2])&&([metric,3001011]>[num,$3])&&([metric,\t2184313]>[num,$4])&&([metric,2184312]>[num,$5])", "db_type": "Oracle", "warning_level": "4", "warning_message": "CACHE BUFFER CHAINS延时（{[metric,2184312]}ms）严重，闩锁存在争用"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle热块冲突分析"}, {"knowledge_name": "区分top sql是逻辑读还是执行次数增多进行进一步诊断", "knowledge_description": "逻辑读较多的TOP SQL"}, {"knowledge_name": "db cache调整建议", "knowledge_description": "db cache调整建议"}], "description": "因为CBC引发的闩锁争用", "rule_name": "latch_cbc", "id": "11602", "rule_expression": "([metric,2180200] <[num,$1] ||[metric,2184321] >[num,$2])&&([metric,3001011]>[num,$3])&&([metric,\t2184313]>[num,$4])&&([metric,2184312]>[num,$5])", "db_type": "Oracle", "warning_level": "4", "warning_message": "CACHE BUFFER CHAINS延时（{[metric,2184312]}ms）严重，闩锁存在争用"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "显示数据库每天产生的归档日志的大小", "knowledge_description": "显示数据库每天产生的归档日志的大小"}, {"knowledge_name": "及时清理归档日志", "knowledge_description": "检查Oracle 归档日志空间使用情况"}], "description": "归档空间使用率超过90%并且预估可用时间小于3天，数据库存在归档满的风险。", "rule_name": "archive_space_exceed", "id": "5865", "rule_expression": "[metric,2180521]>[num,$1] && [metric,2180523]<[num,$2]", "db_type": "Oracle", "warning_level": "4", "warning_message": "数据库存在归档满的风险，归档空间使用率{[metric,2180521]}%，预估可用时间{[metric,2180523]}天"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "查看top sql判断是物理读导致还是执行次数原因", "knowledge_description": "物理读较多的TOP SQL"}, {"knowledge_name": "通过每秒执行的事务数和SQL数，检查数据库负载情况", "knowledge_description": "每秒执行的事务数和SQL语句每秒执行数量可以从宏观上显示出数据库负载运行情况。"}, {"knowledge_name": "检查Physical Reads Direct Per Sec指标", "knowledge_description": "检查数据库中的物理读是否由Direct path read引起的，如果是建议系统中禁用direct path read"}, {"knowledge_name": "如果存在TOP SQL，建议优化", "knowledge_description": "分析物理读较高的SQL，从awr中获取"}], "description": "每秒物理读远超出平时平均值10倍，并且超过基线0.8倍，说明应用或者数据出现了异常", "rule_name": "more_phy_read", "id": "15704", "rule_expression": "(([metric,2189004]>[num,$1]) || ([metric in time,10,1000105,2189004][oper,eq][str,3])) && ([metric,2189004]>[num,$2])", "db_type": "Oracle", "warning_level": "2", "warning_message": "每秒物理读{[metric,2189004]}超出小时平均值{$1}倍，并且超过基线{$2}倍，应用或者数据出现了异常"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "表空间使用情况检查"}, {"knowledge_name": "显示数据库ASM磁盘组信息", "knowledge_description": "显示数据库ASM磁盘组信息"}, {"knowledge_description": "用户容量分析"}], "description": "表空间容量风险高，数据库中存在表空间使用率大于90%且可用天数小于30天，存在表空间满的风险", "rule_name": "oracle_tbs_capacity_risk", "id": "8186", "rule_expression": "[metric max in time,240,2180045]==[num,$1]", "db_type": "Oracle", "warning_level": "2", "warning_message": "表空间({[metric in time,240,2180516]})容量风险高，使用率大于90%且可用天数小于30天，存在表空间满的风险"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "表空间使用情况检查"}, {"knowledge_name": "显示数据库ASM磁盘组信息", "knowledge_description": "显示数据库ASM磁盘组信息"}, {"knowledge_description": "用户容量分析"}], "description": "表空间容量风险高，数据库中存在表空间使用率大于90%且可用天数小于30天，存在表空间满的风险", "rule_name": "oracle_tbs_capacity_risk", "id": "8187", "rule_expression": "[metric max in time,240,2180045]==[num,$1]", "db_type": "Oracle", "warning_level": "2", "warning_message": "表空间({[metric in time,240,2180516]})容量风险高，使用率大于90%且可用天数小于30天，存在表空间满的风险"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据具体的登录方式判断并提供建议", "knowledge_description": "数据库存在频繁登录诊断分析"}], "description": "每秒LOGONS的数量超过30个，数据库存在安全风险 ", "rule_name": "count_logon_sec_critical", "id": "15555", "rule_expression": "([metric,2189018] >[num,$1]) ||([metric in time,10,1000105,2189018][oper,eq][str,3])", "db_type": "Oracle", "warning_level": "3", "warning_message": "每秒登录数突发异常增长，达到{[metric,2189018]}/秒"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle RAC分析"}, {"knowledge_name": "对找出的SQL语句进行优化", "knowledge_description": "查找集群等待时间比较大的SQL语句"}, {"knowledge_name": "对未分区的对象进行分区，对碎片严重的对象进行重组整理", "knowledge_description": "找出数据库集群间心跳流量比较大的SEGMENT，检查是否分区并对其进行碎片分析"}, {"knowledge_name": "一般来说，平均等待时间应该小于10毫秒，如果某些指标的平均等待时间超过20毫秒，则说明系统有问题。分析所有超出指标范围的指标项", "knowledge_description": "分析数据库集群相关等待事件，判断问题出在哪些方面"}, {"knowledge_name": "操作系统网络层面丢包分析", "knowledge_description": "操作系统网络层面丢包分析"}, {"knowledge_name": "操作系统网络流量分析", "knowledge_description": "操作系统网络流量分析"}, {"knowledge_description": "Ping延迟及时钟差异"}], "description": "Estd Interconnect traffic (KB)过高，系统性能可能会有问题", "rule_name": "connect_traffic", "id": "5606", "rule_expression": null, "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "显示数据库负载指标情况", "knowledge_description": "显示数据库负载指标情况"}, {"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle共享池分析"}, {"knowledge_name": "共享池分析", "knowledge_description": "共享池分析"}, {"knowledge_name": "查找解析次数比较高的SQL", "knowledge_description": "查找解析次数比较高的SQL"}], "description": "CURSOR解析相关等待会话数超过平均值的5倍并且大于20，共享池可能存在性能隐患", "rule_name": "cursor_parse_problem", "id": "5608", "rule_expression": "[metric,2180519]/[metric hour avg,2180519]>[num,$1] && [metric,2180519]>[num,$2][@Denominator0,0]", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "显示数据库每天产生的归档日志的大小", "knowledge_description": "显示数据库每天产生的归档日志的大小"}, {"knowledge_name": "及时清理归档日志", "knowledge_description": "检查Oracle 归档日志空间使用情况"}], "description": "归档空间使用率超过90%并且预估可用时间小于3天，数据库存在归档满的风险。", "rule_name": "archive_space_exceed", "id": "5867", "rule_expression": "[metric,2180521]>[num,$1] && [metric,2180523]<[num,$2]", "db_type": "Oracle", "warning_level": "4", "warning_message": "数据库存在归档满的风险，归档空间使用率{[metric,2180521]}%，预估可用时间{[metric,2180523]}天"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle RAC分析"}, {"knowledge_name": "对找出的SQL语句进行优化", "knowledge_description": "查找集群等待时间比较大的SQL语句"}, {"knowledge_name": "对未分区的对象进行分区，对碎片严重的对象进行重组整理", "knowledge_description": "找出数据库集群间心跳流量比较大的SEGMENT，检查是否分区并对其进行碎片分析"}, {"knowledge_name": "一般来说，平均等待时间应该小于10毫秒，如果某些指标的平均等待时间超过20毫秒，则说明系统有问题。分析所有超出指标范围的指标项", "knowledge_description": "分析数据库集群相关等待事件，判断问题出在哪些方面"}, {"knowledge_name": "操作系统网络层面丢包分析", "knowledge_description": "操作系统网络层面丢包分析"}, {"knowledge_name": "操作系统网络流量分析", "knowledge_description": "操作系统网络流量分析"}, {"knowledge_description": "Ping延迟及时钟差异"}], "description": "Estd Interconnect traffic (KB)过高，系统性能可能会有问题", "rule_name": "connect_traffic", "id": "15553", "rule_expression": null, "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "查看top sql判断是物理读导致还是执行次数原因", "knowledge_description": "物理读较多的TOP SQL"}, {"knowledge_name": "通过每秒执行的事务数和SQL数，检查数据库负载情况", "knowledge_description": "每秒执行的事务数和SQL语句每秒执行数量可以从宏观上显示出数据库负载运行情况。"}, {"knowledge_name": "检查Physical Reads Direct Per Sec指标", "knowledge_description": "检查数据库中的物理读是否由Direct path read引起的，如果是建议系统中禁用direct path read"}, {"knowledge_name": "如果存在TOP SQL，建议优化", "knowledge_description": "分析物理读较高的SQL，从awr中获取"}], "description": "每秒物理读远超出平时平均值10倍，并且超过基线0.8倍，说明应用或者数据出现了异常", "rule_name": "more_phy_read", "id": "15587", "rule_expression": "(([metric,2189004]>[num,$1]) || ([metric in time,10,1000105,2189004][oper,eq][str,3])) && ([metric,2189004]>[num,$2])", "db_type": "Oracle", "warning_level": "2", "warning_message": "每秒物理读{[metric,2189004]}超出小时平均值{$1}倍，并且超过基线{$2}倍，应用或者数据出现了异常"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "Oracle等待事件分析", "knowledge_description": "Oracle等待事件分析"}, {"knowledge_name": "显示数据库等待事件及数据库会话信息", "knowledge_description": "显示数据库等待事件及数据库会话信息"}, {"knowledge_name": "等待事件链分析", "knowledge_description": "等待事件链分析"}, {"knowledge_name": "根据智能诊断发现的异常指标以及推荐的诊断路径下钻分析", "knowledge_description": "泛路由-Oracle闩锁分析"}, {"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle共享池分析"}, {"knowledge_name": "以树形结构显示等待事件链信息", "knowledge_description": "以树形结构显示等待事件链信息"}, {"knowledge_name": "数据库后台进程错误及等待事件诊断", "knowledge_description": "数据库后台进程错误及等待事件诊断"}, {"knowledge_name": "根据闩锁等待类别进行分类处理", "knowledge_description": "latch等待事件分析，判断数据库出现哪类闩锁等待"}, {"knowledge_name": "一般来说，平均等待时间应该小于10毫秒，如果某些指标的平均等待时间超过20毫秒，则说明系统有问题。分析所有超出指标范围的指标项", "knowledge_description": "分析数据库集群相关等待事件，判断问题出在哪些方面"}, {"knowledge_name": "enq: CF - contention等待事件分析", "knowledge_description": "enq: CF - contention等待事件分析"}, {"knowledge_name": "分析数据库控制文件等待事件延时情况", "knowledge_description": "分析数据库控制文件等待事件延时情况"}, {"knowledge_name": "分析数据库中enq: KO - fast object checkpoint等待事件", "knowledge_description": "分析数据库中enq: KO - fast object checkpoint等待事件"}, {"knowledge_name": "列出数据库中非空闲等待事件", "knowledge_description": "列出数据库中非空闲等待事件"}, {"knowledge_name": "Buffer busy waits等待事件诊断", "knowledge_description": "Buffer busy waits等待事件诊断"}, {"knowledge_name": "等待事件enq: RO - fast object reuse诊断", "knowledge_description": "等待事件enq: RO - fast object reuse诊断"}], "description": "等待事件风险连续出现较高的情况", "rule_name": "wait_event_risk", "id": "8181", "rule_expression": null, "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "通过SGA ADVISE找到合适的SGA建议值，并根据物理内存的大小，判断是否可以实施", "knowledge_description": "SGA调整建议"}, {"knowledge_name": "db cache调整建议", "knowledge_description": "db cache调整建议"}, {"knowledge_name": "查看top sql判断是物理读导致还是执行次数原因", "knowledge_description": "物理读较多的TOP SQL"}, {"knowledge_name": "对未分区的表进行分区，碎片严重的对象要重新整理", "knowledge_description": "找出数据库物理读较高的segment，判断其是否分区及是否存在碎片"}, {"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}], "description": "Buffer Hit %低于90%说明系统存在问题", "rule_name": "buffer_cache_hit_ratio", "id": "5705", "rule_expression": "[metric,2189000]<[num,$1] && [metric,2189030]>[num,$2]", "db_type": "Oracle", "warning_level": "3", "warning_message": "Buffer Hit {[metric,2189000]}%，低于{$1}%，系统存在问题"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "数据库IO功能分析", "knowledge_description": "数据库IO功能分析"}, {"knowledge_name": "数据库物理写IO性能分析", "knowledge_description": "数据库物理写IO性能分析"}, {"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_name": "显示数据库rman备份任务信息", "knowledge_description": "显示数据库rman备份任务信息"}], "description": "DB CACHE的物理读流量小于总的读IO流量的60%，说明存在大量非正常的IO操作", "rule_name": "db_cache_phy_read_ratio_low", "id": "5709", "rule_expression": "[metric,2180056]/[metric,2180061]<[num,$1] && [metric,2180061]>[num,$2]", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "分析SQL"}], "description": "全量SQL分析发现多个执行计划风险", "rule_name": "oracle_fsa_multiple_sql_plan", "id": "15598", "rule_expression": "[metric,1000520][oper,==][num,$1]", "db_type": "Oracle", "warning_level": "3", "warning_message": "SQL：{[metric,1000521]}的执行计划发生变化。"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "Oracle等待事件分析", "knowledge_description": "Oracle等待事件分析"}, {"knowledge_name": "显示数据库等待事件及数据库会话信息", "knowledge_description": "显示数据库等待事件及数据库会话信息"}, {"knowledge_name": "等待事件链分析", "knowledge_description": "等待事件链分析"}, {"knowledge_name": "根据智能诊断发现的异常指标以及推荐的诊断路径下钻分析", "knowledge_description": "泛路由-Oracle闩锁分析"}, {"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle共享池分析"}, {"knowledge_name": "以树形结构显示等待事件链信息", "knowledge_description": "以树形结构显示等待事件链信息"}, {"knowledge_name": "数据库后台进程错误及等待事件诊断", "knowledge_description": "数据库后台进程错误及等待事件诊断"}, {"knowledge_name": "根据闩锁等待类别进行分类处理", "knowledge_description": "latch等待事件分析，判断数据库出现哪类闩锁等待"}, {"knowledge_name": "一般来说，平均等待时间应该小于10毫秒，如果某些指标的平均等待时间超过20毫秒，则说明系统有问题。分析所有超出指标范围的指标项", "knowledge_description": "分析数据库集群相关等待事件，判断问题出在哪些方面"}, {"knowledge_name": "enq: CF - contention等待事件分析", "knowledge_description": "enq: CF - contention等待事件分析"}, {"knowledge_name": "分析数据库控制文件等待事件延时情况", "knowledge_description": "分析数据库控制文件等待事件延时情况"}, {"knowledge_name": "分析数据库中enq: KO - fast object checkpoint等待事件", "knowledge_description": "分析数据库中enq: KO - fast object checkpoint等待事件"}, {"knowledge_name": "列出数据库中非空闲等待事件", "knowledge_description": "列出数据库中非空闲等待事件"}, {"knowledge_name": "Buffer busy waits等待事件诊断", "knowledge_description": "Buffer busy waits等待事件诊断"}, {"knowledge_name": "等待事件enq: RO - fast object reuse诊断", "knowledge_description": "等待事件enq: RO - fast object reuse诊断"}], "description": "等待事件风险连续出现较高的情况", "rule_name": "wait_event_risk", "id": "15622", "rule_expression": null, "db_type": "Oracle", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "sql告警分析", "knowledge_description": "sql告警分析"}], "description": "各种维度的top sql告警", "rule_name": "sql_alert", "id": "15737", "rule_expression": "[metric in time,3,2180543]>[num,$1]", "db_type": "Oracle", "warning_level": "2", "warning_message": "各种维度的top sql告警{[metric in time,3,2180543]}个"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "实时查询表空间使用情况，不要频繁点击查询，对于超大数据库，频繁查询可能会导致数据库hang死", "knowledge_description": "实时查询表空间使用情况"}, {"knowledge_name": "Oracle数据库表空间检查", "knowledge_description": "Oracle数据库表空间检查"}, {"knowledge_name": "查询数据库表空间信息", "knowledge_description": "查询数据库表空间信息"}, {"knowledge_description": "表空间使用情况检查"}], "description": "表空间容量风险高，数据库中存在表空间使用率大于95%且可用天数小于15天，存在表空间满的风险", "rule_name": "oracle_tbs_capacity_high_rish", "id": "15600", "rule_expression": "[metric max in time,240,2180045]==[num,$1]", "db_type": "Oracle", "warning_level": "4", "warning_message": "表空间({[metric in time,240,2180046]})容量风险高，使用率大于95%且可用天数小于15天，存在表空间满的风险"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析CPU使用情况", "knowledge_description": "分析CPU使用情况"}, {"knowledge_description": "分析指标、SQL相似度"}, {"knowledge_name": "操作系统核心资源分析", "knowledge_description": "操作系统核心资源分析"}, {"knowledge_name": "区分top sql是逻辑读还是执行次数增多进行进一步诊断", "knowledge_description": "逻辑读较多的TOP SQL"}, {"knowledge_name": "显示数据库负载指标情况", "knowledge_description": "显示数据库负载指标情况"}], "description": "操作系统r队列超过CPU数量的2倍且CPU使用率超过90%，则可能存在CPU资源瓶颈", "rule_name": "more_running_proc_oracle", "id": "15705", "rule_expression": "[metric,3000009]/[metric,3000010]>[num,$1] && [metric,3000003]>[num,$2]", "db_type": "Oracle", "warning_level": "4", "warning_message": "操作系统r队列{[metric,3000009]}超过CPU数量的{$1}倍且CPU使用率{[metric,3000003]}%超过{$2}%，可能存在CPU资源瓶颈"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "分析归档日志大小远小于redo log文件大小"}, {"knowledge_name": "显示数据库每天产生的归档日志的大小", "knowledge_description": "显示数据库每天产生的归档日志的大小"}, {"knowledge_name": "一般来说，日志切换后归档进程就会进行归档操作，当前最多有一个日志组未归档。如果未归档日志组数量超过2个，一般来说系统就有问题,如果归档有问题，建议检查归档目录的写IO性能是不是很慢，检查归档目录状态及错误原因", "knowledge_description": "未归档日志组数量超过2个，一般来说系统就有问题"}, {"knowledge_name": "如果一小时内日志切换次数超过12次，说明切换频率过高，建议增大在线日志文件", "knowledge_description": "一小时内日志切换次数"}, {"knowledge_name": "分析日志切换频率是否合理", "knowledge_description": "分析日志切换频率是否合理"}], "description": "归档日志远小于redo日志文件大小，并且日志切换过于频繁", "rule_name": "archivelog_less_redo", "id": "15545", "rule_expression": "[metric,2180542]/[cib,2201000,redo_size]<[num,$1] && [metric,2180515]>[num,$2]", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "显示数据库ASM磁盘组信息", "knowledge_description": "显示数据库ASM磁盘组信息"}, {"knowledge_description": "显示指定时间间隔内的日志信息"}], "description": "ASM磁盘组中出现offline的磁盘", "rule_name": "asm_disk_offline", "id": "15547", "rule_expression": "[metric max in time,30,2180526]>[num,$1]", "db_type": "Oracle", "warning_level": "4", "warning_message": "ASM磁盘组中出现offline的磁盘({[metric max iname in time,30,2180526]})"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle RAC分析"}, {"knowledge_name": "对找出的SQL语句进行优化", "knowledge_description": "查找集群等待时间比较大的SQL语句"}, {"knowledge_name": "对未分区的对象进行分区，对碎片严重的对象进行重组整理", "knowledge_description": "找出数据库集群间心跳流量比较大的SEGMENT，检查是否分区并对其进行碎片分析"}, {"knowledge_name": "一般来说，平均等待时间应该小于10毫秒，如果某些指标的平均等待时间超过20毫秒，则说明系统有问题。分析所有超出指标范围的指标项", "knowledge_description": "分析数据库集群相关等待事件，判断问题出在哪些方面"}, {"knowledge_name": "操作系统网络层面丢包分析", "knowledge_description": "操作系统网络层面丢包分析"}, {"knowledge_name": "操作系统网络流量分析", "knowledge_description": "操作系统网络流量分析"}, {"knowledge_description": "Ping延迟及时钟差异"}], "description": "Estd Interconnect traffic (KB)过高，系统性能可能会有问题", "rule_name": "connect_traffic", "id": "15671", "rule_expression": null, "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "分析归档日志大小远小于redo log文件大小"}, {"knowledge_name": "分析服务器IO设备的IO情况", "knowledge_description": "分析服务器IO设备的IO情况"}, {"knowledge_name": "数据库物理写IO性能分析", "knowledge_description": "数据库物理写IO性能分析"}, {"knowledge_name": "enq: CF - contention等待事件分析", "knowledge_description": "enq: CF - contention等待事件分析"}, {"knowledge_name": "分析数据库中enq: KO - fast object checkpoint等待事件", "knowledge_description": "分析数据库中enq: KO - fast object checkpoint等待事件"}, {"knowledge_name": "查找执行次数比较高的TOP SQL", "knowledge_description": "查找执行次数比较高的TOP SQL"}, {"knowledge_name": "数据库负载模型相关指标分析", "knowledge_description": "数据库负载模型相关指标分析"}, {"knowledge_name": "数据库负载维度分析", "knowledge_description": "数据库负载维度分析"}], "description": "活跃REDO LOG组数超过总日志组数量的2/3则系统可能有问题", "rule_name": "active_redo_log", "id": "15662", "rule_expression": "[metric,2180514]/([cib,2201001,log_count] -[num,1]) > [num,$1]", "db_type": "Oracle", "warning_level": "3", "warning_message": "活跃REDO LOG组数{[metric,2180514]}，超过总日志组数量（{[cib,2201001,log_count]}）的2/3，系统可能有问题"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据具体的登录方式判断并提供建议", "knowledge_description": "数据库存在频繁登录诊断分析"}], "description": "每秒LOGONS的数量超过30个，数据库存在安全风险 ", "rule_name": "count_logon_sec_critical", "id": "15673", "rule_expression": "([metric,2189018] >[num,$1]) ||([metric in time,10,1000105,2189018][oper,eq][str,3])", "db_type": "Oracle", "warning_level": "3", "warning_message": "每秒登录数突发异常增长，达到{[metric,2189018]}/秒"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据具体的登录方式判断并提供建议", "knowledge_description": "数据库存在频繁登录诊断分析"}], "description": "每秒LOGONS数量异常，说明数据库存在频繁登录", "rule_name": "count_logon_sec", "id": "15554", "rule_expression": "([metric,2189018] >[num,$1]) ||([metric in time,10,1000105,2189018][oper,eq][str,3])", "db_type": "Oracle", "warning_level": "2", "warning_message": "每秒登录数突发异常增长，达到{[metric,2189018]}/秒"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据具体的登录方式判断并提供建议", "knowledge_description": "数据库存在频繁登录诊断分析"}], "description": "每秒LOGONS数量异常，说明数据库存在频繁登录", "rule_name": "count_logon_sec", "id": "5607", "rule_expression": "([metric,2189018] >[num,$1]) ||([metric in time,10,1000105,2189018][oper,eq][str,3])", "db_type": "Oracle", "warning_level": "2", "warning_message": "每秒登录数突发异常增长，达到{[metric,2189018]}/秒"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "显示指定时间间隔内的日志报错信息", "knowledge_description": "显示指定时间间隔内的日志报错信息"}], "description": "Oracle日志分析结果分数过低，系统可能存在隐患", "rule_name": "logana_oracle", "id": "5628", "rule_expression": null, "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析db file sequential read指标 ，如果大于10毫秒说明IO性能已经受到影响", "knowledge_description": "分析db file sequential read指标 ，如果大于10毫秒说明IO性能已经受到影响"}, {"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_name": "数据库物理读过高时分析物理读过高的SQL和SEGMENT", "knowledge_description": "数据库物理读过高时分析物理读过高的SQL和SEGMENT"}, {"knowledge_name": "查看top sql判断是物理读导致还是执行次数原因", "knowledge_description": "物理读较多的TOP SQL"}], "description": "DB FILE SEQUENTIAL READ延时超过最近1小时平均值的5倍，数据库读IO存在隐患", "rule_name": "db_file_seq_read", "id": "15677", "rule_expression": "[metric,2184302]/[metric hour avg,2184302]>[num,$1] && [metric,2184302]>[num,$2] && [metric,2189004]>[num,$3]", "db_type": "Oracle", "warning_level": "3", "warning_message": "DB FILE SEQUENTIAL READ延时（{[metric,2184302]}）ms，超过最近1小时平均值的{$1}倍，数据库读IO存在隐患"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据具体的登录方式判断并提供建议", "knowledge_description": "数据库存在频繁登录诊断分析"}, {"knowledge_name": "检查用户过期或密码错误", "knowledge_description": "检查用户过期或密码错误"}], "description": "oracle数据库的进程数比会话数多25%以上，说明Oracle数据库的登录存在问题，可能有应用不停在重试登录", "rule_name": "db_process_count_greater_than_db_session_count", "id": "15679", "rule_expression": "([metric,2180049]-[metric,2180073]-[metric,2180536]+[metric,2180537]-[metric,2180538]+[metric,2180539])>([metric,2180073]*[num,$1]) && ([metric,2180049]>[num,$2])", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "一般来说，日志切换后归档进程就会进行归档操作，当前最多有一个日志组未归档。如果未归档日志组数量超过2个，一般来说系统就有问题,如果归档有问题，建议检查归档目录的写IO性能是不是很慢，检查归档目录状态及错误原因", "knowledge_description": "未归档日志组数量超过2个，一般来说系统就有问题"}], "description": "快速恢复区配置大小大于快速恢复区目的地实际可用大小", "rule_name": "db_recovery_dest_size_incorrect", "id": "15680", "rule_expression": "[metric,2180534]>([metric,2180525]+[metric,2180535])", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据具体的登录方式判断并提供建议", "knowledge_description": "数据库存在频繁登录诊断分析"}, {"knowledge_name": "检查用户过期或密码错误", "knowledge_description": "检查用户过期或密码错误"}], "description": "使用独立模式的Oracle数据库的会话数比进程数多出20%，数据库系统可能存在隐患", "rule_name": "db_session_count_greater_than_db_process_count", "id": "15681", "rule_expression": "([metric,2180073]-[metric,2180537]-[metric,2180539]-[metric,2180049]+[metric,2180536]+[metric,2180538])>([metric,2180049]*[num,$1]) && ([metric,2180073]>[num,$2])", "db_type": "Oracle", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "oracle SGA超过100G的数据库vm.max_map_count参数配置不正确", "rule_name": "oracle_big_sga_mmap_setting_incorrect", "id": "11939", "rule_expression": "[cib,2201010,sga_target]>[num,$1] && [cib,3010002,vm.max_map_count]<[num,$2]", "db_type": "Oracle", "warning_level": "4", "warning_message": "oracle SGA当前为{[cib,2201010,sga_target]}，超过100G，但数据库服务器vm.max_map_count参数为 {[cib,3010002,vm.max_map_count]}，配置过小，可能会导致数据库产生ORA-04030报错。"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "oracle SGA超过100G的数据库vm.max_map_count参数配置不正确", "rule_name": "oracle_big_sga_mmap_setting_incorrect", "id": "11937", "rule_expression": "[cib,2201010,sga_target]>[num,$1] && [cib,3010002,vm.max_map_count]<[num,$2]", "db_type": "Oracle", "warning_level": "4", "warning_message": "oracle SGA当前为{[cib,2201010,sga_target]}，超过100G，但数据库服务器vm.max_map_count参数为 {[cib,3010002,vm.max_map_count]}，配置过小，可能会导致数据库产生ORA-04030报错。"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "显示数据库ASM磁盘组信息", "knowledge_description": "显示数据库ASM磁盘组信息"}, {"knowledge_name": "及时清理归档日志", "knowledge_description": "检查Oracle 归档日志空间使用情况"}, {"knowledge_name": "显示表空间容量使用情况，以MB为单位", "knowledge_description": "显示表空间容量使用情况，以MB为单位"}, {"knowledge_name": "查询数据库表空间信息", "knowledge_description": "查询数据库表空间信息"}], "description": "ASM磁盘组使用率超过80%且预估可用天数小于7天，系统存在风险", "rule_name": "dg_usage_exceed", "id": "15683", "rule_expression": "([metric,2180533]<[num,$1]) && ([metric max in time,30,2180517]>[num,$2])", "db_type": "Oracle", "warning_level": "4", "warning_message": "ASM磁盘组{[metric max iname in time,30,2180517]}使用率{[metric max in time,30,2180517]}%，预估可用{[metric,2180533]}天"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据具体的登录方式判断并提供建议", "knowledge_description": "数据库存在频繁登录诊断分析"}, {"knowledge_name": "检查用户过期或密码错误", "knowledge_description": "检查用户过期或密码错误"}], "description": "oracle数据库的进程数比会话数多25%以上，说明Oracle数据库的登录存在问题，可能有应用不停在重试登录", "rule_name": "db_process_count_greater_than_db_session_count", "id": "5712", "rule_expression": "([metric,2180049]-[metric,2180073]-[metric,2180536]+[metric,2180537]-[metric,2180538]+[metric,2180539])>([metric,2180073]*[num,$1]) && ([metric,2180049]>[num,$2])", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "显示数据库ASM磁盘组信息", "knowledge_description": "显示数据库ASM磁盘组信息"}, {"knowledge_name": "及时清理归档日志", "knowledge_description": "检查Oracle 归档日志空间使用情况"}, {"knowledge_name": "显示表空间容量使用情况，以MB为单位", "knowledge_description": "显示表空间容量使用情况，以MB为单位"}, {"knowledge_name": "查询数据库表空间信息", "knowledge_description": "查询数据库表空间信息"}], "description": "ASM磁盘组使用率超过80%且预估可用天数小于7天，系统存在风险", "rule_name": "dg_usage_exceed", "id": "5714", "rule_expression": "([metric,2180533]<[num,$1]) && ([metric max in time,30,2180517]>[num,$2])", "db_type": "Oracle", "warning_level": "4", "warning_message": "ASM磁盘组{[metric max iname in time,30,2180517]}使用率{[metric max in time,30,2180517]}%，预估可用{[metric,2180533]}天"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "分析SQL"}, {"knowledge_description": "【Oracle】分析指定SQL的执行计划"}], "description": "关键SQL执行计划发生变化", "rule_name": "focus_sql_plan_change", "id": "11288", "rule_expression": "[metric,2180075][oper,==][num,$1]", "db_type": "Oracle", "warning_level": "4", "warning_message": "SQL：{[metric,2180074]}的执行计划发生变化。"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "操作系统核心资源分析", "knowledge_description": "操作系统核心资源分析"}, {"knowledge_name": "显示数据库负载指标情况", "knowledge_description": "显示数据库负载指标情况"}, {"knowledge_name": "区分top sql是逻辑读还是执行次数增多进行进一步诊断", "knowledge_description": "逻辑读较多的TOP SQL"}, {"knowledge_name": "服务器内存分析", "knowledge_description": "服务器内存分析"}, {"knowledge_name": "找出内存占用率较高的Top20进程", "knowledge_description": "找出内存占用率较高的Top20进程"}], "description": "物理内存空闲小于100M，且SWAP使用率大于30%，系统存在风险", "rule_name": "free_mem_oracle", "id": "5715", "rule_expression": "[metric,3000007]<[num,$1]*[num,1024] && [metric,3001031]>[num,$2]", "db_type": "Oracle", "warning_level": "2", "warning_message": "物理内存空闲{[metric,3000007]/[num,1024]}M，且SWAP使用率{[metric,3001031]}%，系统存在高风险"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "scn增长率检查"}, {"knowledge_name": "通过每秒执行的事务数和SQL数，检查数据库负载情况", "knowledge_description": "每秒执行的事务数和SQL语句每秒执行数量可以从宏观上显示出数据库负载运行情况。"}], "description": "每秒calls to kcmgas平均值大于16K则系统存在SCN HEADROOM问题隐患", "rule_name": "kcmgas", "id": "15692", "rule_expression": null, "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析数据库实例在指定时间窗口内的数据库会话情况", "knowledge_description": "分析数据库实例在指定时间窗口内的数据库会话情况"}, {"knowledge_name": "查找执行次数比较高的TOP SQL", "knowledge_description": "查找执行次数比较高的TOP SQL"}, {"knowledge_name": "通过每秒执行的事务数和SQL数，检查数据库负载情况", "knowledge_description": "每秒执行的事务数和SQL语句每秒执行数量可以从宏观上显示出数据库负载运行情况。"}, {"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-oracle活跃会话分析"}, {"knowledge_name": "数据库负载模型相关指标分析", "knowledge_description": "数据库负载模型相关指标分析"}, {"knowledge_name": "执行数量超过5的活跃SQL", "knowledge_description": "执行数量超过5的活跃SQL"}], "description": "活跃会话过多（超过70个）,数据库健康可能存在问题", "rule_name": "avg_active_session", "id": "54", "rule_expression": "[metric,2189147]>[num,$1] &&( [metric,2189147]<[cib,2201010,sessions])", "db_type": "Oracle", "warning_level": "3", "warning_message": "活跃会话数{[metric,2189147]}，超过{$1}个数据库健康可能存在问题"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle热块冲突分析"}, {"knowledge_name": "区分top sql是逻辑读还是执行次数增多进行进一步诊断", "knowledge_description": "逻辑读较多的TOP SQL"}, {"knowledge_name": "db cache调整建议", "knowledge_description": "db cache调整建议"}], "description": "因为CBC引发的闩锁争用", "rule_name": "latch_cbc", "id": "15694", "rule_expression": "([metric,2180200] <[num,$1] ||[metric,2184321] >[num,$2])&&([metric,3001011]>[num,$3])&&([metric,\t2184313]>[num,$4])&&([metric,2184312]>[num,$5])", "db_type": "Oracle", "warning_level": "4", "warning_message": "CACHE BUFFER CHAINS延时（{[metric,2184312]}ms）严重，闩锁存在争用"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据具体的登录方式判断并提供建议", "knowledge_description": "数据库存在频繁登录诊断分析"}, {"knowledge_name": "检查用户过期或密码错误", "knowledge_description": "检查用户过期或密码错误"}], "description": "使用独立模式的Oracle数据库的会话数比进程数多出20%，数据库系统可能存在隐患", "rule_name": "db_session_count_greater_than_db_process_count", "id": "15563", "rule_expression": "([metric,2180073]-[metric,2180537]-[metric,2180539]-[metric,2180049]+[metric,2180536]+[metric,2180538])>([metric,2180049]*[num,$1]) && ([metric,2180073]>[num,$2])", "db_type": "Oracle", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据闩锁等待类别进行分类处理", "knowledge_description": "latch等待事件分析，判断数据库出现哪类闩锁等待"}, {"knowledge_name": "分析数据库的latch hit命中率", "knowledge_description": "分析数据库的latch hit命中率"}, {"knowledge_name": "查询指定数据库会话的Latch持有信息", "knowledge_description": "查询指定数据库会话的Latch持有信息"}, {"knowledge_name": "latch,mutex资源诊断工具集", "knowledge_description": "latch工具"}, {"knowledge_name": "根据智能诊断发现的异常指标以及推荐的诊断路径下钻分析", "knowledge_description": "泛路由-Oracle闩锁分析"}, {"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle热块冲突分析"}, {"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle RAC分析"}, {"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle共享池分析"}, {"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-Oracle IO分析"}], "description": "闩锁命中率异常，系统存在并发风险", "rule_name": "latch_hit_ration", "id": "15695", "rule_expression": "([metric,2180200] <[num,$1]) ||([metric in time,10,1000105,2180200][oper,eq][str,1])", "db_type": "Oracle", "warning_level": "3", "warning_message": "闩锁命中率出现异常，达到{[metric,2180200]}%。"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "查找执行次数比较高的TOP SQL", "knowledge_description": "查找执行次数比较高的TOP SQL"}, {"knowledge_name": "查找解析次数比较高的SQL", "knowledge_description": "查找解析次数比较高的SQL"}, {"knowledge_name": "根据闩锁等待类别进行分类处理", "knowledge_description": "latch等待事件分析，判断数据库出现哪类闩锁等待"}, {"knowledge_name": "根据智能诊断发现的异常指标以及推荐的诊断路径下钻分析", "knowledge_description": "泛路由-Oracle闩锁分析"}], "description": "因为解析问题导致的闩锁争用", "rule_name": "latch_parse", "id": "15696", "rule_expression": "([metric,2180200] <[num,$1])&&([metric,3001011]>[num,$2])&&([metric,2189044]>[num,$3])&&([metric,2189046]>[num,$4])&&([metric,2189121]>[num,2000])&&([metric,2184315]>[num,$5]||[metric,2184314]>[num,$5])", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "查找解析次数比较高的SQL", "knowledge_description": "查找解析次数比较高的SQL"}, {"knowledge_name": "共享池分析", "knowledge_description": "共享池分析"}, {"knowledge_name": "判断SGA RESIZE操作是否异常", "knowledge_description": "分析SGA RESIZE操作是否异常"}, {"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle共享池分析"}, {"knowledge_description": "分析指标、SQL相似度"}], "description": "SHARED POOL的使用率高于90%并且软解析比例低于90%，none-parse cpu time比例低于90%，SQL解析可能影响数据库的健康", "rule_name": "higher_shared_pool_used_lower_soft_parsed", "id": "15570", "rule_expression": "([num,100]-[metric,2189114])>[num,$1] && [metric,2189055]<[num,$2] && [metric,2180201]<[num,$3] ", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "TX锁分析", "knowledge_description": "TX锁分析"}, {"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_name": "显示数据库负载指标情况", "knowledge_description": "显示数据库负载指标情况"}], "description": "每秒索引叶节点分裂数量超过10个，并且单块读响应时间超过30毫秒，数据库可能存在TX锁恶化的风险", "rule_name": "index_split_lead_to_tx_enq", "id": "15571", "rule_expression": "[metric,2189083]>[num,$1] && [metric,2184302]>[num,$2]", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "显示数据库负载指标情况", "knowledge_description": "显示数据库负载指标情况"}, {"knowledge_name": "查找执行次数比较高的TOP SQL", "knowledge_description": "查找执行次数比较高的TOP SQL"}], "description": "每秒事务数超过最近1小时平均值的10倍，应用可能存在异常", "rule_name": "transcation_count_raise", "id": "95", "rule_expression": "[metric,2189003]/[metric hour avg,2189003]>[num,$1] && [metric,2189003]>[num,$2]", "db_type": "Oracle", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "分析归档日志大小远小于redo log文件大小"}, {"knowledge_name": "分析服务器IO设备的IO情况", "knowledge_description": "分析服务器IO设备的IO情况"}, {"knowledge_name": "数据库物理写IO性能分析", "knowledge_description": "数据库物理写IO性能分析"}, {"knowledge_name": "enq: CF - contention等待事件分析", "knowledge_description": "enq: CF - contention等待事件分析"}, {"knowledge_name": "分析数据库中enq: KO - fast object checkpoint等待事件", "knowledge_description": "分析数据库中enq: KO - fast object checkpoint等待事件"}, {"knowledge_name": "查找执行次数比较高的TOP SQL", "knowledge_description": "查找执行次数比较高的TOP SQL"}, {"knowledge_name": "数据库负载模型相关指标分析", "knowledge_description": "数据库负载模型相关指标分析"}, {"knowledge_name": "数据库负载维度分析", "knowledge_description": "数据库负载维度分析"}], "description": "活跃REDO LOG组数超过总日志组数量的2/3则系统可能有问题", "rule_name": "active_redo_log", "id": "52", "rule_expression": "[metric,2180514]/([cib,2201001,log_count] -[num,1]) > [num,$1]", "db_type": "Oracle", "warning_level": "3", "warning_message": "活跃REDO LOG组数{[metric,2180514]}，超过总日志组数量（{[cib,2201001,log_count]}）的2/3，系统可能有问题"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "区分top sql是逻辑读还是执行次数增多进行进一步诊断", "knowledge_description": "逻辑读较多的TOP SQL"}, {"knowledge_name": "通过每秒执行的事务数和SQL数，检查数据库负载情况", "knowledge_description": "每秒执行的事务数和SQL语句每秒执行数量可以从宏观上显示出数据库负载运行情况。"}, {"knowledge_name": "如果存在TOP SQL，建议优化", "knowledge_description": "分析逻辑读较高的SQL，从awr中获取"}], "description": "每秒逻辑读出现异常增长，说明应用或者数据出现了异常", "rule_name": "more_logic_read", "id": "82", "rule_expression": "(([metric,2189030]>[num,$1]) || ([metric in time,10,1000105,2189030][oper,eq][str,3])) && ([metric,2189030]>[num,$2])", "db_type": "Oracle", "warning_level": "2", "warning_message": "每秒逻辑读出现异常增长，说明应用或者数据的应用可能出现了异常，当前逻辑读为{[metric,2189030]}/秒"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "显示指定时间间隔内的日志报错信息", "knowledge_description": "显示指定时间间隔内的日志报错信息"}, {"knowledge_name": "实时查询表空间使用情况，不要频繁点击查询，对于超大数据库，频繁查询可能会导致数据库hang死", "knowledge_description": "实时查询表空间使用情况"}, {"knowledge_name": "一般来说，日志切换后归档进程就会进行归档操作，当前最多有一个日志组未归档。如果未归档日志组数量超过2个，一般来说系统就有问题,如果归档有问题，建议检查归档目录的写IO性能是不是很慢，检查归档目录状态及错误原因", "knowledge_description": "未归档日志组数量超过2个，一般来说系统就有问题"}], "description": "用户回滚比例超过20%并且每秒回滚次数超过5次，应用可能存在异常", "rule_name": "rollback_ratio_exceed", "id": "15732", "rule_expression": "[metric,2189025]>[num,$1]  && [metric,2189024]>[num,$2]", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle热块冲突分析"}, {"knowledge_name": "进行Top SEGMENT和SQL分析", "knowledge_description": "如果数据库集群间出现了热块冲突，会导致RAC性能出现严重下降"}], "description": "Oracle热块冲突严重，数据库性能会受影响", "rule_name": "ora_bbw", "id": "15590", "rule_expression": "([metric,2184313] >[num,$1] || [metric,2184312] >[num,$2]) && ([metric,2189030] >[num,$3])", "db_type": "Oracle", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "通过oracle等待事件链分析得到导致等待事件的根会话", "knowledge_description": "生成Oracle数据库实例的会话等待链"}, {"knowledge_name": "TX锁分析", "knowledge_description": "TX锁分析"}, {"knowledge_name": "显示数据库当前实例锁信息", "knowledge_description": "显示数据库当前实例锁信息"}, {"knowledge_name": "根据闩锁等待类别进行分类处理", "knowledge_description": "latch等待事件分析，判断数据库出现哪类闩锁等待"}, {"knowledge_id": 182, "knowledge_name": "Unknown", "knowledge_description": "Unknown"}], "description": "被阻塞的会话数过多（超过30个），系统可能存在隐患", "rule_name": "blocking_session", "id": "15667", "rule_expression": "([metric,2180518] >[num,$1]) ||([metric in time,10,1000105,2180518][oper,eq][str,3])", "db_type": "Oracle", "warning_level": "4", "warning_message": "被阻塞的会话数出现异常增长或者达到{[num,$1]}个，最新的阻塞会话数为{[metric,2180518]}"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "通过SGA ADVISE找到合适的SGA建议值，并根据物理内存的大小，判断是否可以实施", "knowledge_description": "SGA调整建议"}, {"knowledge_name": "db cache调整建议", "knowledge_description": "db cache调整建议"}, {"knowledge_name": "查看top sql判断是物理读导致还是执行次数原因", "knowledge_description": "物理读较多的TOP SQL"}, {"knowledge_name": "对未分区的表进行分区，碎片严重的对象要重新整理", "knowledge_description": "找出数据库物理读较高的segment，判断其是否分区及是否存在碎片"}, {"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}], "description": "Buffer Hit %低于90%说明系统存在问题", "rule_name": "buffer_cache_hit_ratio", "id": "15668", "rule_expression": "[metric,2189000]<[num,$1] && [metric,2189030]>[num,$2]", "db_type": "Oracle", "warning_level": "3", "warning_message": "Buffer Hit {[metric,2189000]}%，低于{$1}%，系统存在问题"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "运维对象连接失败，请检查运维对象是否down", "knowledge_description": "运维对象连接状态分析"}, {"knowledge_name": "操作系统核心资源分析", "knowledge_description": "操作系统核心资源分析"}, {"knowledge_name": "显示数据库负载指标情况", "knowledge_description": "显示数据库负载指标情况"}, {"knowledge_name": "数据库后台进程错误及等待事件诊断", "knowledge_description": "数据库后台进程错误及等待事件诊断"}, {"knowledge_name": "分析数据库控制文件等待事件延时情况", "knowledge_description": "分析数据库控制文件等待事件延时情况"}, {"knowledge_name": "通过oracle等待事件链分析得到导致等待事件的根会话", "knowledge_description": "生成Oracle数据库实例的会话等待链"}, {"knowledge_name": "服务器内存分析", "knowledge_description": "服务器内存分析"}, {"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}], "description": "数据库采集任务严重超时，数据库存在严重性能风险", "rule_name": "collector_exec_slow_oracle", "id": "15669", "rule_expression": "[metric,1000000][oper,eq][str,连接成功] && [metric,1000101] >([metric hour avg,1000101]*[num,$1])", "db_type": "Oracle", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "运维对象连接失败，请检查运维对象是否down", "knowledge_description": "运维对象连接状态分析"}, {"knowledge_name": "操作系统核心资源分析", "knowledge_description": "操作系统核心资源分析"}, {"knowledge_name": "显示数据库负载指标情况", "knowledge_description": "显示数据库负载指标情况"}, {"knowledge_name": "通过oracle等待事件链分析得到导致等待事件的根会话", "knowledge_description": "生成Oracle数据库实例的会话等待链"}, {"knowledge_name": "服务器内存分析", "knowledge_description": "服务器内存分析"}, {"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_name": "分析数据库实例在指定时间窗口活跃会话的活动特征，并进行异常诊断： 1、高并发/执行时间长的SQL语句 2、主要等待事件 3、影响最大的会话 4、是否存在HANG状况及可能原因", "knowledge_description": "分析数据库实例情况"}], "description": "数据库连接严重超时，数据库存在巨大风险", "rule_name": "connect_slow_oracle", "id": "15670", "rule_expression": "([metric,1000102] >([metric hour avg,1000102]*[num,$1]))&& (([metric,1000102] >[num,$2])||([metric in time,10,1000105,1000102][oper,eq][str,3]))", "db_type": "Oracle", "warning_level": "2", "warning_message": "客户端连接数据库时间出现异常（超过平均水平10倍或者出现其他异常），目前值为{[metric,1000102]}毫秒"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "REDO NOWAIT分析", "knowledge_description": "REDO NOWAIT分析"}, {"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_name": "显示数据库负载指标情况", "knowledge_description": "显示数据库负载指标情况"}], "description": "Redo Allocation Hit Ratio小于100%，说明REDO存在性能隐患，需要检查REDO和事务的相关情况", "rule_name": "redo_allocation_hit_ratio", "id": "15730", "rule_expression": "[metric,2189002]<[num,$1] && [metric,2189016]>[num,$2]", "db_type": "Oracle", "warning_level": "3", "warning_message": "Redo Allocation Hit Ratio 值为{[metric,2189002]}%，REDO存在性能隐患，需要检查REDO和事务的相关情况"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "表空间使用情况检查"}, {"knowledge_name": "显示数据库ASM磁盘组信息", "knowledge_description": "显示数据库ASM磁盘组信息"}, {"knowledge_description": "用户容量分析"}], "description": "表空间容量风险高，数据库中存在表空间使用率大于90%且可用天数小于30天，存在表空间满的风险", "rule_name": "oracle_tbs_capacity_risk", "id": "15601", "rule_expression": "[metric max in time,240,2180045]==[num,$1]", "db_type": "Oracle", "warning_level": "2", "warning_message": "表空间({[metric in time,240,2180516]})容量风险高，使用率大于90%且可用天数小于30天，存在表空间满的风险"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "运维对象连接失败，请检查运维对象是否down", "knowledge_description": "运维对象连接状态分析"}, {"knowledge_name": "操作系统核心资源分析", "knowledge_description": "操作系统核心资源分析"}, {"knowledge_name": "显示数据库负载指标情况", "knowledge_description": "显示数据库负载指标情况"}, {"knowledge_name": "数据库后台进程错误及等待事件诊断", "knowledge_description": "数据库后台进程错误及等待事件诊断"}, {"knowledge_name": "分析数据库控制文件等待事件延时情况", "knowledge_description": "分析数据库控制文件等待事件延时情况"}, {"knowledge_name": "通过oracle等待事件链分析得到导致等待事件的根会话", "knowledge_description": "生成Oracle数据库实例的会话等待链"}, {"knowledge_name": "服务器内存分析", "knowledge_description": "服务器内存分析"}, {"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}], "description": "数据库采集任务严重超时，数据库存在严重性能风险", "rule_name": "collector_exec_slow_oracle", "id": "7000", "rule_expression": "[metric,1000000][oper,eq][str,连接成功] && [metric,1000101] >([metric hour avg,1000101]*[num,$1])", "db_type": "Oracle", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "运维对象连接失败，请检查运维对象是否down", "knowledge_description": "运维对象连接状态分析"}, {"knowledge_name": "操作系统核心资源分析", "knowledge_description": "操作系统核心资源分析"}, {"knowledge_name": "显示数据库负载指标情况", "knowledge_description": "显示数据库负载指标情况"}, {"knowledge_name": "通过oracle等待事件链分析得到导致等待事件的根会话", "knowledge_description": "生成Oracle数据库实例的会话等待链"}, {"knowledge_name": "服务器内存分析", "knowledge_description": "服务器内存分析"}, {"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_name": "分析数据库实例在指定时间窗口活跃会话的活动特征，并进行异常诊断： 1、高并发/执行时间长的SQL语句 2、主要等待事件 3、影响最大的会话 4、是否存在HANG状况及可能原因", "knowledge_description": "分析数据库实例情况"}], "description": "数据库连接严重超时，数据库存在巨大风险", "rule_name": "connect_slow_oracle", "id": "6987", "rule_expression": "([metric,1000102] >([metric hour avg,1000102]*[num,$1]))&& (([metric,1000102] >[num,$2])||([metric in time,10,1000105,1000102][oper,eq][str,3]))", "db_type": "Oracle", "warning_level": "2", "warning_message": "客户端连接数据库时间出现异常（超过平均水平10倍或者出现其他异常），目前值为{[metric,1000102]}毫秒"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "共享池分析", "knowledge_description": "共享池分析"}, {"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle共享池分析"}, {"knowledge_name": "查询sga内存组件内存变化情况", "knowledge_description": "查询sga内存组件内存变化情况"}, {"knowledge_name": "查找执行次数比较高的TOP SQL", "knowledge_description": "查找执行次数比较高的TOP SQL"}, {"knowledge_name": "数据库并发执行维度分析", "knowledge_description": "数据库并发执行维度分析"}, {"knowledge_name": "判断SGA RESIZE操作是否异常", "knowledge_description": "分析SGA RESIZE操作是否异常"}], "description": "SQL解析异常，可能引起了数据库性能问题", "rule_name": "ora_non_parse_cpu", "id": "15607", "rule_expression": "([metric,2180201]<[num,$1]) && ([metric,2189046] >[num,$2]) && (([metric,2184319] >[num,$3]) || ([metric,2184316] >[num,$4]) || ([metric,3000003] >[num,$5]))", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "运维对象连接失败，请检查运维对象是否down", "knowledge_description": "运维对象连接状态分析"}, {"knowledge_name": "操作系统核心资源分析", "knowledge_description": "操作系统核心资源分析"}, {"knowledge_name": "显示数据库负载指标情况", "knowledge_description": "显示数据库负载指标情况"}, {"knowledge_name": "通过oracle等待事件链分析得到导致等待事件的根会话", "knowledge_description": "生成Oracle数据库实例的会话等待链"}, {"knowledge_name": "服务器内存分析", "knowledge_description": "服务器内存分析"}, {"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_name": "分析数据库实例在指定时间窗口活跃会话的活动特征，并进行异常诊断： 1、高并发/执行时间长的SQL语句 2、主要等待事件 3、影响最大的会话 4、是否存在HANG状况及可能原因", "knowledge_description": "分析数据库实例情况"}], "description": "数据库连接严重超时，数据库存在巨大风险", "rule_name": "connect_slow_oracle", "id": "6989", "rule_expression": "([metric,1000102] >([metric hour avg,1000102]*[num,$1]))&& (([metric,1000102] >[num,$2])||([metric in time,10,1000105,1000102][oper,eq][str,3]))", "db_type": "Oracle", "warning_level": "2", "warning_message": "客户端连接数据库时间出现异常（超过平均水平10倍或者出现其他异常），目前值为{[metric,1000102]}毫秒"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "通过oracle等待事件链分析得到导致等待事件的根会话", "knowledge_description": "生成Oracle数据库实例的会话等待链"}, {"knowledge_name": "TX锁分析", "knowledge_description": "TX锁分析"}, {"knowledge_name": "显示数据库当前实例锁信息", "knowledge_description": "显示数据库当前实例锁信息"}, {"knowledge_name": "根据闩锁等待类别进行分类处理", "knowledge_description": "latch等待事件分析，判断数据库出现哪类闩锁等待"}, {"knowledge_id": 182, "knowledge_name": "Unknown", "knowledge_description": "Unknown"}], "description": "被阻塞的会话数过多（超过30个），系统可能存在隐患", "rule_name": "blocking_session", "id": "15549", "rule_expression": "([metric,2180518] >[num,$1]) ||([metric in time,10,1000105,2180518][oper,eq][str,3])", "db_type": "Oracle", "warning_level": "3", "warning_message": "被阻塞的会话数出现异常增长或者达到{[num,$1]}个，最新的阻塞会话数为{[metric,2180518]}"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "分析SQL"}, {"knowledge_description": "【Oracle】分析指定SQL的执行计划"}], "description": "关键SQL执行计划发生变化", "rule_name": "focus_sql_plan_change", "id": "15566", "rule_expression": "[metric,2180075][oper,==][num,$1]", "db_type": "Oracle", "warning_level": "4", "warning_message": "SQL：{[metric,2180074]}的执行计划发生变化。"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析数据库实例在指定时间窗口内的数据库会话情况", "knowledge_description": "分析数据库实例在指定时间窗口内的数据库会话情况"}, {"knowledge_name": "查找执行次数比较高的TOP SQL", "knowledge_description": "查找执行次数比较高的TOP SQL"}, {"knowledge_name": "通过每秒执行的事务数和SQL数，检查数据库负载情况", "knowledge_description": "每秒执行的事务数和SQL语句每秒执行数量可以从宏观上显示出数据库负载运行情况。"}, {"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-oracle活跃会话分析"}, {"knowledge_name": "数据库负载模型相关指标分析", "knowledge_description": "数据库负载模型相关指标分析"}, {"knowledge_name": "执行数量超过5的活跃SQL", "knowledge_description": "执行数量超过5的活跃SQL"}], "description": "活跃会话过多（超过70个）,数据库健康可能存在问题", "rule_name": "avg_active_session", "id": "15666", "rule_expression": "[metric,2189147]>[num,$1] &&( [metric,2189147]<[cib,2201010,sessions])", "db_type": "Oracle", "warning_level": "3", "warning_message": "活跃会话数{[metric,2189147]}，超过{$1}个数据库健康可能存在问题"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "显示数据库每天产生的归档日志的大小", "knowledge_description": "显示数据库每天产生的归档日志的大小"}, {"knowledge_name": "及时清理归档日志", "knowledge_description": "检查Oracle 归档日志空间使用情况"}], "description": "归档空间使用率超过90%并且预估可用时间小于3天，数据库存在归档满的风险。", "rule_name": "archive_space_exceed", "id": "15664", "rule_expression": "[metric,2180521]>[num,$1] && [metric,2180523]<[num,$2]", "db_type": "Oracle", "warning_level": "4", "warning_message": "数据库存在归档满的风险，归档空间使用率{[metric,2180521]}%，预估可用时间{[metric,2180523]}天"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "运维对象连接失败，请检查运维对象是否down", "knowledge_description": "运维对象连接状态分析"}, {"knowledge_name": "操作系统核心资源分析", "knowledge_description": "操作系统核心资源分析"}, {"knowledge_name": "显示数据库负载指标情况", "knowledge_description": "显示数据库负载指标情况"}, {"knowledge_name": "数据库后台进程错误及等待事件诊断", "knowledge_description": "数据库后台进程错误及等待事件诊断"}, {"knowledge_name": "分析数据库控制文件等待事件延时情况", "knowledge_description": "分析数据库控制文件等待事件延时情况"}, {"knowledge_name": "通过oracle等待事件链分析得到导致等待事件的根会话", "knowledge_description": "生成Oracle数据库实例的会话等待链"}, {"knowledge_name": "服务器内存分析", "knowledge_description": "服务器内存分析"}, {"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}], "description": "数据库采集任务严重超时，数据库存在严重性能风险", "rule_name": "collector_exec_slow_oracle", "id": "15551", "rule_expression": "[metric,1000000][oper,eq][str,连接成功] && [metric,1000101] >([metric hour avg,1000101]*[num,$1])", "db_type": "Oracle", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "运维对象连接失败，请检查运维对象是否down", "knowledge_description": "运维对象连接状态分析"}, {"knowledge_name": "操作系统核心资源分析", "knowledge_description": "操作系统核心资源分析"}, {"knowledge_name": "显示数据库负载指标情况", "knowledge_description": "显示数据库负载指标情况"}, {"knowledge_name": "通过oracle等待事件链分析得到导致等待事件的根会话", "knowledge_description": "生成Oracle数据库实例的会话等待链"}, {"knowledge_name": "服务器内存分析", "knowledge_description": "服务器内存分析"}, {"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_name": "分析数据库实例在指定时间窗口活跃会话的活动特征，并进行异常诊断： 1、高并发/执行时间长的SQL语句 2、主要等待事件 3、影响最大的会话 4、是否存在HANG状况及可能原因", "knowledge_description": "分析数据库实例情况"}], "description": "数据库连接严重超时，数据库存在巨大风险", "rule_name": "connect_slow_oracle", "id": "15552", "rule_expression": "([metric,1000102] >([metric hour avg,1000102]*[num,$1]))&& (([metric,1000102] >[num,$2])||([metric in time,10,1000105,1000102][oper,eq][str,3]))", "db_type": "Oracle", "warning_level": "2", "warning_message": "客户端连接数据库时间出现异常（超过平均水平10倍或者出现其他异常），目前值为{[metric,1000102]}毫秒"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "TX锁分析", "knowledge_description": "TX锁分析"}, {"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_name": "显示数据库负载指标情况", "knowledge_description": "显示数据库负载指标情况"}], "description": "每秒索引叶节点分裂数量超过10个，并且单块读响应时间超过30毫秒，数据库可能存在TX锁恶化的风险", "rule_name": "index_split_lead_to_tx_enq", "id": "15688", "rule_expression": "[metric,2189083]>[num,$1] && [metric,2184302]>[num,$2]", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "oracle数据库连接失败分析", "knowledge_description": "oracle数据库连接失败分析"}], "description": "数据库自身故障导致连接失败", "rule_name": "oracle_db_broken_connect_failed", "id": "15709", "rule_expression": "([metric,1000000][oper,contains][str,ORA-12516]) || ([metric,1000000][oper,contains][str,ORA-00257]) || (([metric,1000000][oper,contains][str,ORA-12505] || [metric,1000000][oper,contains][str,ORA-12514]) && ([metric list in time,3,3000060][oper,all neq][cib,2201001,instance_name])) || (([metric,1000000][oper,contains][str,The Network Adapter could not establish the connection]) && ([metric in time,3,3000061]<[num,1]))", "db_type": "Oracle", "warning_level": "4", "warning_message": "数据库自身故障导致连接失败：{[metric,1000000]}"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "oracle数据库连接失败分析", "knowledge_description": "oracle数据库连接失败分析"}], "description": "KYD到oracle数据库连接配置有问题，导致连接失败", "rule_name": "oracle_dsmart_connection_error", "id": "15710", "rule_expression": "([metric,1000000][oper,contains][str,ORA-12505] || [metric,1000000][oper,contains][str,ORA-12514]) && ([metric list in time,3,3000060][oper,any eq][cib,2201001,instance_name])", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据具体的登录方式判断并提供建议", "knowledge_description": "数据库存在频繁登录诊断分析"}], "description": "每秒LOGONS的数量超过30个，数据库存在安全风险 ", "rule_name": "count_logon_sec_critical", "id": "8216", "rule_expression": "([metric,2189018] >[num,$1]) ||([metric in time,10,1000105,2189018][oper,eq][str,3])", "db_type": "Oracle", "warning_level": "3", "warning_message": "每秒登录数突发异常增长，达到{[metric,2189018]}/秒"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "数据库IO功能分析", "knowledge_description": "数据库IO功能分析"}, {"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_name": "检查Physical Reads Direct Per Sec指标", "knowledge_description": "检查数据库中的物理读是否由Direct path read引起的，如果是建议系统中禁用direct path read"}], "description": "数据库IO延时过大，DBIO以外的IO比例过大", "rule_name": "dbio_cacheio_ratio_low", "id": "8262", "rule_expression": "[metric,2180056]/[metric,2180061]<[num,$1] && [metric,2180061]>[num,$2]  && [metric,2184302]>[num,$3]", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "数据库IO功能分析", "knowledge_description": "数据库IO功能分析"}, {"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_name": "检查Physical Reads Direct Per Sec指标", "knowledge_description": "检查数据库中的物理读是否由Direct path read引起的，如果是建议系统中禁用direct path read"}], "description": "数据库IO延时过大，DBIO以外的IO比例过大", "rule_name": "dbio_cacheio_ratio_low", "id": "8264", "rule_expression": "[metric,2180056]/[metric,2180061]<[num,$1] && [metric,2180061]>[num,$2]  && [metric,2184302]>[num,$3]", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "分析归档日志大小远小于redo log文件大小"}, {"knowledge_name": "显示数据库每天产生的归档日志的大小", "knowledge_description": "显示数据库每天产生的归档日志的大小"}, {"knowledge_name": "一般来说，日志切换后归档进程就会进行归档操作，当前最多有一个日志组未归档。如果未归档日志组数量超过2个，一般来说系统就有问题,如果归档有问题，建议检查归档目录的写IO性能是不是很慢，检查归档目录状态及错误原因", "knowledge_description": "未归档日志组数量超过2个，一般来说系统就有问题"}, {"knowledge_name": "如果一小时内日志切换次数超过12次，说明切换频率过高，建议增大在线日志文件", "knowledge_description": "一小时内日志切换次数"}, {"knowledge_name": "分析日志切换频率是否合理", "knowledge_description": "分析日志切换频率是否合理"}], "description": "归档日志远小于redo日志文件大小，并且日志切换过于频繁", "rule_name": "archivelog_less_redo", "id": "8039", "rule_expression": "[metric,2180542]/[cib,2201000,redo_size]<[num,$1] && [metric,2180515]>[num,$2]", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle RAC分析"}, {"knowledge_name": "操作系统网络层面丢包分析", "knowledge_description": "操作系统网络层面丢包分析"}, {"knowledge_name": "RAC DRM分析", "knowledge_description": "RAC DRM分析"}, {"knowledge_name": "对找出的SQL语句进行优化", "knowledge_description": "查找集群等待时间比较大的SQL语句"}, {"knowledge_name": "rac集群网络问题分析", "knowledge_description": "rac集群网络问题分析"}, {"knowledge_name": "进行Top SEGMENT和SQL分析", "knowledge_description": "如果数据库集群间出现了热块冲突，会导致RAC性能出现严重下降"}, {"knowledge_name": "Oracle等待事件分析", "knowledge_description": "Oracle等待事件分析"}], "description": "gc block lost值大于0，RAC可能存在风险", "rule_name": "oracle_gc_block_lost", "id": "15716", "rule_expression": "([metric,2189102] >[num,$1] || [metric,2189101] >[num,$2]) &&([metric,2189069] >[num,$3])", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析CPU使用情况", "knowledge_description": "分析CPU使用情况"}, {"knowledge_name": "查询数据库并行执行情况", "knowledge_description": "查询数据库并行执行情况"}, {"knowledge_name": "执行数量超过5的活跃SQL", "knowledge_description": "执行数量超过5的活跃SQL"}, {"knowledge_name": "区分top sql是逻辑读还是执行次数增多进行进一步诊断", "knowledge_description": "逻辑读较多的TOP SQL"}, {"knowledge_description": "分析指标、SQL相似度"}], "description": "CPU使用率高于20%并且活跃的并行进程数量大于5个，说明并行查询可能影响了CPU资源", "rule_name": "parallel_process_result_in_cpu_problem", "id": "15725", "rule_expression": "[metric,2189057]>[num,$1] && [metric,2189149]>[num,$2]", "db_type": "Oracle", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据具体的登录方式判断并提供建议", "knowledge_description": "数据库存在频繁登录诊断分析"}, {"knowledge_name": "检查用户过期或密码错误", "knowledge_description": "检查用户过期或密码错误"}], "description": "oracle数据库的进程数比会话数多25%以上，说明Oracle数据库的登录存在问题，可能有应用不停在重试登录", "rule_name": "db_process_count_greater_than_db_session_count", "id": "63", "rule_expression": "([metric,2180049]-[metric,2180073]-[metric,2180536]+[metric,2180537]-[metric,2180538]+[metric,2180539])>([metric,2180073]*[num,$1]) && ([metric,2180049]>[num,$2])", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "检索阻塞者会话信息，杀掉该会话可以解开相关的锁或者闩锁。注意部分后台进程是不能杀的，如果杀错会话，会导致数据库宕机", "knowledge_description": "检索阻塞会话信息"}, {"knowledge_name": "在创建索引一段时间后，无返回结果可用此脚本进行检查。", "knowledge_description": "检查数据库是否存在索引创建或者重建任务"}, {"knowledge_name": "通过oracle等待事件链分析得到导致等待事件的根会话", "knowledge_description": "生成Oracle数据库实例的会话等待链"}], "description": "enq:TM-contention 等待的总会话数超过10", "rule_name": "session_wait_enq_tm_cnt_exceed", "id": "15734", "rule_expression": "[metric,2180508]>[num,$1]", "db_type": "Oracle", "warning_level": "2", "warning_message": "enq:TM-contention 等待的总会话数超过10，原因：1）不合理的锁表 2）DML语句相关表存在外键关系，并且子表外键缺少索引 3）BUG导致的并行创建索引缓慢"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "共享池分析", "knowledge_description": "共享池分析"}, {"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle共享池分析"}, {"knowledge_name": "共享池分析", "knowledge_description": "共享池分析"}, {"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle共享池分析"}], "description": "因为存在热表而引起rowcache等待延时过大，相关应用性能存在问题", "rule_name": "ora_hot_rowcache", "id": "8830", "rule_expression": "([metric,2184319] >[num,$1]) && ([metric,2189046] >[num,$2]) ", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle RAC分析"}, {"knowledge_name": "RAC DRM分析", "knowledge_description": "RAC DRM分析"}, {"knowledge_name": "显示数据库负载指标情况", "knowledge_description": "显示数据库负载指标情况"}, {"knowledge_name": "获取集群等待时间较高的TOP SQL", "knowledge_description": "获取集群等待时间较高的TOP SQL"}, {"knowledge_name": "操作系统网络总体分析", "knowledge_description": "操作系统网络总体分析"}, {"knowledge_name": "mtr网络诊断工具", "knowledge_description": "mtr网络诊断工具"}], "description": "gcs drm freeze in enter server mode平均等待时间超过100毫秒，并且gc remaster 平均等待时间超过100毫秒，说明DRM已经影响了数据库的性能，建议关闭DRM", "rule_name": "rac_drm_problem", "id": "87", "rule_expression": "[metric,2180059]>[num,$1] && [metric,2180060]>[num,$2]", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle RAC分析"}, {"knowledge_name": "分析指定时间间隔内GC相关指标可能存在的问题", "knowledge_description": "分析指定时间间隔内GC相关指标"}, {"knowledge_name": "RAC DRM分析", "knowledge_description": "RAC DRM分析"}, {"knowledge_name": "获取集群等待时间较高的TOP SQL", "knowledge_description": "获取集群等待时间较高的TOP SQL"}, {"knowledge_name": "对未分区的对象进行分区，对碎片严重的对象进行重组整理", "knowledge_description": "找出数据库集群间心跳流量比较大的SEGMENT，检查是否分区并对其进行碎片分析"}, {"knowledge_name": "数据库物理读过高时分析物理读过高的SQL和SEGMENT", "knowledge_description": "数据库物理读过高时分析物理读过高的SQL和SEGMENT"}, {"knowledge_name": "操作系统网络总体分析", "knowledge_description": "操作系统网络总体分析"}, {"knowledge_name": "操作系统网络层面丢包分析", "knowledge_description": "操作系统网络层面丢包分析"}, {"knowledge_name": "mtr网络诊断工具", "knowledge_description": "mtr网络诊断工具"}], "description": "Avg global cache cr block receive time 大于20毫秒并且RAC INTERCONNECT流量大于30M，说明集群性能存在隐患", "rule_name": "rac_interconnect_time_and_flow_problem", "id": "89", "rule_expression": "[metric,2189098]>[num,$1] && [metric,2180204]>[num,$2]", "db_type": "Oracle", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "REDO NOWAIT分析", "knowledge_description": "REDO NOWAIT分析"}, {"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_name": "显示数据库负载指标情况", "knowledge_description": "显示数据库负载指标情况"}], "description": "Redo Allocation Hit Ratio小于100%，说明REDO存在性能隐患，需要检查REDO和事务的相关情况", "rule_name": "redo_allocation_hit_ratio", "id": "90", "rule_expression": "[metric,2189002]<[num,$1] && [metric,2189016]>[num,$2]", "db_type": "Oracle", "warning_level": "3", "warning_message": "Redo Allocation Hit Ratio 值为{[metric,2189002]}%，REDO存在性能隐患，需要检查REDO和事务的相关情况"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_name": "数据库IO功能分析", "knowledge_description": "数据库IO功能分析"}], "description": "在工作时间，数据库物理读大于80M/秒，数据库备份IO超过50M/秒，导致单块读延时是平时的2倍，说明备份对IO性能造成了影响", "rule_name": "rman_backup_problem", "id": "91", "rule_expression": "[metric,2180052]>[num,$1] && [metric,2180057]>[num,$2] && [metric,2180057]>[metric hour avg,2180057]*[num,$3]", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "显示指定时间间隔内的日志报错信息", "knowledge_description": "显示指定时间间隔内的日志报错信息"}, {"knowledge_name": "实时查询表空间使用情况，不要频繁点击查询，对于超大数据库，频繁查询可能会导致数据库hang死", "knowledge_description": "实时查询表空间使用情况"}, {"knowledge_name": "一般来说，日志切换后归档进程就会进行归档操作，当前最多有一个日志组未归档。如果未归档日志组数量超过2个，一般来说系统就有问题,如果归档有问题，建议检查归档目录的写IO性能是不是很慢，检查归档目录状态及错误原因", "knowledge_description": "未归档日志组数量超过2个，一般来说系统就有问题"}], "description": "用户回滚比例超过20%并且每秒回滚次数超过5次，应用可能存在异常", "rule_name": "rollback_ratio_exceed", "id": "92", "rule_expression": "[metric,2189025]>[num,$1]  && [metric,2189024]>[num,$2]", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "Oracle等待事件分析", "knowledge_description": "Oracle等待事件分析"}, {"knowledge_name": "显示数据库等待事件及数据库会话信息", "knowledge_description": "显示数据库等待事件及数据库会话信息"}, {"knowledge_name": "等待事件链分析", "knowledge_description": "等待事件链分析"}, {"knowledge_name": "根据智能诊断发现的异常指标以及推荐的诊断路径下钻分析", "knowledge_description": "泛路由-Oracle闩锁分析"}, {"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle共享池分析"}, {"knowledge_name": "以树形结构显示等待事件链信息", "knowledge_description": "以树形结构显示等待事件链信息"}, {"knowledge_name": "数据库后台进程错误及等待事件诊断", "knowledge_description": "数据库后台进程错误及等待事件诊断"}, {"knowledge_name": "根据闩锁等待类别进行分类处理", "knowledge_description": "latch等待事件分析，判断数据库出现哪类闩锁等待"}, {"knowledge_name": "一般来说，平均等待时间应该小于10毫秒，如果某些指标的平均等待时间超过20毫秒，则说明系统有问题。分析所有超出指标范围的指标项", "knowledge_description": "分析数据库集群相关等待事件，判断问题出在哪些方面"}, {"knowledge_name": "enq: CF - contention等待事件分析", "knowledge_description": "enq: CF - contention等待事件分析"}, {"knowledge_name": "分析数据库控制文件等待事件延时情况", "knowledge_description": "分析数据库控制文件等待事件延时情况"}, {"knowledge_name": "分析数据库中enq: KO - fast object checkpoint等待事件", "knowledge_description": "分析数据库中enq: KO - fast object checkpoint等待事件"}, {"knowledge_name": "列出数据库中非空闲等待事件", "knowledge_description": "列出数据库中非空闲等待事件"}, {"knowledge_name": "Buffer busy waits等待事件诊断", "knowledge_description": "Buffer busy waits等待事件诊断"}, {"knowledge_name": "等待事件enq: RO - fast object reuse诊断", "knowledge_description": "等待事件enq: RO - fast object reuse诊断"}], "description": "等待事件风险连续出现较高的情况", "rule_name": "wait_event_risk", "id": "8183", "rule_expression": null, "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "操作系统核心资源分析", "knowledge_description": "操作系统核心资源分析"}, {"knowledge_name": "显示数据库负载指标情况", "knowledge_description": "显示数据库负载指标情况"}, {"knowledge_name": "区分top sql是逻辑读还是执行次数增多进行进一步诊断", "knowledge_description": "逻辑读较多的TOP SQL"}, {"knowledge_name": "服务器内存分析", "knowledge_description": "服务器内存分析"}, {"knowledge_name": "找出内存占用率较高的Top20进程", "knowledge_description": "找出内存占用率较高的Top20进程"}], "description": "物理内存空闲小于100M，且SWAP使用率大于30%，系统存在风险", "rule_name": "free_mem_oracle", "id": "5615", "rule_expression": "[metric,3000007]<[num,$1]*[num,1024] && [metric,3001031]>[num,$2]", "db_type": "Oracle", "warning_level": "2", "warning_message": "物理内存空闲{[metric,3000007]/[num,1024]}M，且SWAP使用率{[metric,3001031]}%，系统存在高风险"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "通过SGA ADVISE找到合适的SGA建议值，并根据物理内存的大小，判断是否可以实施", "knowledge_description": "SGA调整建议"}, {"knowledge_name": "db cache调整建议", "knowledge_description": "db cache调整建议"}, {"knowledge_name": "查看top sql判断是物理读导致还是执行次数原因", "knowledge_description": "物理读较多的TOP SQL"}, {"knowledge_name": "对未分区的表进行分区，碎片严重的对象要重新整理", "knowledge_description": "找出数据库物理读较高的segment，判断其是否分区及是否存在碎片"}, {"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}], "description": "Buffer Hit %低于90%说明系统存在问题", "rule_name": "buffer_cache_hit_ratio", "id": "15550", "rule_expression": "[metric,2189000]<[num,$1] && [metric,2189030]>[num,$2]", "db_type": "Oracle", "warning_level": "3", "warning_message": "Buffer Hit {[metric,2189000]}%，低于{$1}%，系统存在问题"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "数据库IO功能分析", "knowledge_description": "数据库IO功能分析"}, {"knowledge_name": "数据库物理写IO性能分析", "knowledge_description": "数据库物理写IO性能分析"}, {"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_name": "显示数据库rman备份任务信息", "knowledge_description": "显示数据库rman备份任务信息"}], "description": "DB CACHE的物理读流量小于总的读IO流量的60%，说明存在大量非正常的IO操作", "rule_name": "db_cache_phy_read_ratio_low", "id": "15557", "rule_expression": "[metric,2180056]/[metric,2180061]<[num,$1] && [metric,2180061]>[num,$2]", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析db file sequential read指标 ，如果大于10毫秒说明IO性能已经受到影响", "knowledge_description": "分析db file sequential read指标 ，如果大于10毫秒说明IO性能已经受到影响"}, {"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_name": "数据库物理读过高时分析物理读过高的SQL和SEGMENT", "knowledge_description": "数据库物理读过高时分析物理读过高的SQL和SEGMENT"}, {"knowledge_name": "查看top sql判断是物理读导致还是执行次数原因", "knowledge_description": "物理读较多的TOP SQL"}], "description": "DB FILE SEQUENTIAL READ延时超过最近1小时平均值的5倍，数据库读IO存在隐患", "rule_name": "db_file_seq_read", "id": "15559", "rule_expression": "[metric,2184302]/[metric hour avg,2184302]>[num,$1] && [metric,2184302]>[num,$2] && [metric,2189004]>[num,$3]", "db_type": "Oracle", "warning_level": "3", "warning_message": "DB FILE SEQUENTIAL READ延时（{[metric,2184302]}）ms，超过最近1小时平均值的{$1}倍，数据库读IO存在隐患"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "scn增长率检查"}, {"knowledge_name": "通过每秒执行的事务数和SQL数，检查数据库负载情况", "knowledge_description": "每秒执行的事务数和SQL语句每秒执行数量可以从宏观上显示出数据库负载运行情况。"}], "description": "每秒calls to kcmgas平均值大于16K则系统存在SCN HEADROOM问题隐患", "rule_name": "kcmgas", "id": "5626", "rule_expression": null, "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "查找执行次数比较高的TOP SQL", "knowledge_description": "查找执行次数比较高的TOP SQL"}, {"knowledge_name": "查找解析次数比较高的SQL", "knowledge_description": "查找解析次数比较高的SQL"}, {"knowledge_name": "根据闩锁等待类别进行分类处理", "knowledge_description": "latch等待事件分析，判断数据库出现哪类闩锁等待"}, {"knowledge_name": "根据智能诊断发现的异常指标以及推荐的诊断路径下钻分析", "knowledge_description": "泛路由-Oracle闩锁分析"}], "description": "因为解析问题导致的闩锁争用", "rule_name": "latch_parse", "id": "11607", "rule_expression": "([metric,2180200] <[num,$1])&&([metric,3001011]>[num,$2])&&([metric,2189044]>[num,$3])&&([metric,2189046]>[num,$4])&&([metric,2189121]>[num,2000])&&([metric,2184315]>[num,$5]||[metric,2184314]>[num,$5])", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据具体的登录方式判断并提供建议", "knowledge_description": "数据库存在频繁登录诊断分析"}, {"knowledge_name": "检查用户过期或密码错误", "knowledge_description": "检查用户过期或密码错误"}], "description": "oracle数据库的进程数比会话数多25%以上，说明Oracle数据库的登录存在问题，可能有应用不停在重试登录", "rule_name": "db_process_count_greater_than_db_session_count", "id": "15561", "rule_expression": "([metric,2180049]-[metric,2180073]-[metric,2180536]+[metric,2180537]-[metric,2180538]+[metric,2180539])>([metric,2180073]*[num,$1]) && ([metric,2180049]>[num,$2])", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "一般来说，日志切换后归档进程就会进行归档操作，当前最多有一个日志组未归档。如果未归档日志组数量超过2个，一般来说系统就有问题,如果归档有问题，建议检查归档目录的写IO性能是不是很慢，检查归档目录状态及错误原因", "knowledge_description": "未归档日志组数量超过2个，一般来说系统就有问题"}], "description": "快速恢复区配置大小大于快速恢复区目的地实际可用大小", "rule_name": "db_recovery_dest_size_incorrect", "id": "15562", "rule_expression": "[metric,2180534]>([metric,2180525]+[metric,2180535])", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "操作系统核心资源分析", "knowledge_description": "操作系统核心资源分析"}, {"knowledge_name": "显示数据库负载指标情况", "knowledge_description": "显示数据库负载指标情况"}, {"knowledge_name": "区分top sql是逻辑读还是执行次数增多进行进一步诊断", "knowledge_description": "逻辑读较多的TOP SQL"}, {"knowledge_name": "服务器内存分析", "knowledge_description": "服务器内存分析"}, {"knowledge_name": "找出内存占用率较高的Top20进程", "knowledge_description": "找出内存占用率较高的Top20进程"}], "description": "物理内存空闲小于100M，且SWAP使用率大于30%，系统存在风险", "rule_name": "free_mem_oracle", "id": "15567", "rule_expression": "[metric,3000007]<[num,$1]*[num,1024] && [metric,3001031]>[num,$2]", "db_type": "Oracle", "warning_level": "2", "warning_message": "物理内存空闲{[metric,3000007]/[num,1024]}M，且SWAP使用率{[metric,3001031]}%，系统存在高风险"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_name": "分析服务器IO设备的IO情况", "knowledge_description": "分析服务器IO设备的IO情况"}, {"knowledge_name": "数据库IO功能分析", "knowledge_description": "数据库IO功能分析"}, {"knowledge_name": "查看top sql判断是物理读导致还是执行次数原因", "knowledge_description": "物理读较多的TOP SQL"}, {"knowledge_name": "区分top sql是逻辑读还是执行次数增多进行进一步诊断", "knowledge_description": "逻辑读较多的TOP SQL"}, {"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-Oracle IO分析"}], "description": "操作系统IO延时严重超标（超过100毫秒），数据库存在较大风险", "rule_name": "IO_latency_oracle_critical", "id": "15573", "rule_expression": "[metric,3000006]>[num,$1] && ([metric,3000100]>[num,$2] || [metric,3000101]>[num,$3])", "db_type": "Oracle", "warning_level": "3", "warning_message": "操作系统IO延时{[metric,3000006]}毫秒，数据库存在较大风险"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_name": "分析服务器IO设备的IO情况", "knowledge_description": "分析服务器IO设备的IO情况"}, {"knowledge_name": "数据库IO功能分析", "knowledge_description": "数据库IO功能分析"}, {"knowledge_name": "查看top sql判断是物理读导致还是执行次数原因", "knowledge_description": "物理读较多的TOP SQL"}, {"knowledge_name": "区分top sql是逻辑读还是执行次数增多进行进一步诊断", "knowledge_description": "逻辑读较多的TOP SQL"}, {"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-Oracle IO分析"}], "description": "操作系统IO延时过高（60ms-100ms)，数据库存在风险", "rule_name": "IO_latency_oracle_error", "id": "15574", "rule_expression": "[metric,3000006]<=[num,100] && [metric,3000006]>[num,$1] && ([metric,3000100]>[num,$2] || [metric,3000101]>[num,$3])", "db_type": "Oracle", "warning_level": "3", "warning_message": "操作系统IO延时过高（{[metric,3000006]}ms)，数据库存在风险"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle热块冲突分析"}, {"knowledge_name": "区分top sql是逻辑读还是执行次数增多进行进一步诊断", "knowledge_description": "逻辑读较多的TOP SQL"}, {"knowledge_name": "db cache调整建议", "knowledge_description": "db cache调整建议"}], "description": "因为CBC引发的闩锁争用", "rule_name": "latch_cbc", "id": "15577", "rule_expression": "([metric,2180200] <[num,$1] ||[metric,2184321] >[num,$2])&&([metric,3001011]>[num,$3])&&([metric,\t2184313]>[num,$4])&&([metric,2184312]>[num,$5])", "db_type": "Oracle", "warning_level": "3", "warning_message": "CACHE BUFFER CHAINS延时（{[metric,2184312]}ms）严重，闩锁存在争用"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据闩锁等待类别进行分类处理", "knowledge_description": "latch等待事件分析，判断数据库出现哪类闩锁等待"}, {"knowledge_name": "分析数据库的latch hit命中率", "knowledge_description": "分析数据库的latch hit命中率"}, {"knowledge_name": "查询指定数据库会话的Latch持有信息", "knowledge_description": "查询指定数据库会话的Latch持有信息"}, {"knowledge_name": "latch,mutex资源诊断工具集", "knowledge_description": "latch工具"}, {"knowledge_name": "根据智能诊断发现的异常指标以及推荐的诊断路径下钻分析", "knowledge_description": "泛路由-Oracle闩锁分析"}, {"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle热块冲突分析"}, {"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle RAC分析"}, {"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle共享池分析"}, {"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-Oracle IO分析"}], "description": "闩锁命中率异常，系统存在并发风险", "rule_name": "latch_hit_ration", "id": "15578", "rule_expression": "([metric,2180200] <[num,$1]) ||([metric in time,10,1000105,2180200][oper,eq][str,1])", "db_type": "Oracle", "warning_level": "3", "warning_message": "闩锁命中率出现异常，达到{[metric,2180200]}%。"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "如果log file parallel write的平均等待时间超过10ms,说明数据库日志写IO性能存在问题；如果Log file sync与log file parallel write两个等待事件的平均等待时间的差值大于10ms 或者大于log file parallel write等待事件的平均等待时间的50%，则说明数据库日志同步存在性能问题", "knowledge_description": "LOG FILE SYNC等待延时超过n毫秒，说明数据库存在性能隐患"}, {"knowledge_description": "分析归档日志大小远小于redo log文件大小"}], "description": "LOG FILE SYNC等待延时较高(10ms-60ms)，说明系统存在性能隐患", "rule_name": "log_file_sync_wait", "id": "15582", "rule_expression": "[metric,2184301]>[num,$1] && [metric,2184301]<=[num,$2] ", "db_type": "Oracle", "warning_level": "2", "warning_message": "LOG FILE SYNC等待延时较高（{[metric,2184301]}ms），系统存在性能隐患"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "操作系统核心资源分析", "knowledge_description": "操作系统核心资源分析"}, {"knowledge_name": "显示数据库负载指标情况", "knowledge_description": "显示数据库负载指标情况"}, {"knowledge_name": "区分top sql是逻辑读还是执行次数增多进行进一步诊断", "knowledge_description": "逻辑读较多的TOP SQL"}, {"knowledge_name": "服务器内存分析", "knowledge_description": "服务器内存分析"}, {"knowledge_name": "找出内存占用率较高的Top20进程", "knowledge_description": "找出内存占用率较高的Top20进程"}, {"knowledge_name": "操作系统核心资源分析", "knowledge_description": "操作系统核心资源分析"}, {"knowledge_name": "显示数据库负载指标情况", "knowledge_description": "显示数据库负载指标情况"}, {"knowledge_name": "区分top sql是逻辑读还是执行次数增多进行进一步诊断", "knowledge_description": "逻辑读较多的TOP SQL"}, {"knowledge_name": "服务器内存分析", "knowledge_description": "服务器内存分析"}, {"knowledge_name": "找出内存占用率较高的Top20进程", "knowledge_description": "找出内存占用率较高的Top20进程"}], "description": "内存不可用率过高，超过90%，可能存在换页和OOM Kill的风险", "rule_name": "memory_used_high_oracle", "id": "15772", "rule_expression": "[metric,3000014]>[num,$1]  && [metric,3001031]>[num,$2]", "db_type": "Oracle", "warning_level": "4", "warning_message": "指标< Mem unavailable >(内存不可用率)过高，操作系统内存出现严重不足，可能存在换页和OOM Kill的风险。内存不可用率：（{[metric,3000014]}%）且swap usage达到{[metric,3001031]}%。"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "oracle SGA超过100G的数据库vm.max_map_count参数配置不正确", "rule_name": "oracle_big_sga_mmap_setting_incorrect", "id": "15591", "rule_expression": "[cib,2201010,sga_target]>[num,$1] && [cib,3010002,vm.max_map_count]<[num,$2]", "db_type": "Oracle", "warning_level": "4", "warning_message": "oracle SGA当前为{[cib,2201010,sga_target]}，超过100G，但数据库服务器vm.max_map_count参数为 {[cib,3010002,vm.max_map_count]}，配置过小，可能会导致数据库产生ORA-04030报错。"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "oracle数据库连接失败分析", "knowledge_description": "oracle数据库连接失败分析"}], "description": "KYD到oracle数据库连接配置有问题，导致连接失败", "rule_name": "oracle_dsmart_connection_error", "id": "15593", "rule_expression": "([metric,1000000][oper,contains][str,ORA-12505] || [metric,1000000][oper,contains][str,ORA-12514]) && ([metric list in time,3,3000060][oper,any eq][cib,2201001,instance_name])", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "oracle数据库连接失败分析", "knowledge_description": "oracle数据库连接失败分析"}], "description": "KYD客户端连接oracle数据库用户名错误", "rule_name": "oracle_dsmart_logon_failed", "id": "15594", "rule_expression": "([metric,1000000] [oper,contains][str,ORA-01017]) || ([metric,1000000] [oper,contains][str,ORA-28000])", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "oracle数据库连接失败分析", "knowledge_description": "oracle数据库连接失败分析"}], "description": "KYD采样SQL在oracle数据库执行失败", "rule_name": "oracle_dsmart_monitor_sql_execute_failed", "id": "15595", "rule_expression": "[metric,1000000] [oper,contains][str,SQL执行失败]", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "oracle数据库连接失败分析", "knowledge_description": "oracle数据库连接失败分析"}, {"knowledge_name": "网络接口分析", "knowledge_description": "(历史)网络接口分析"}], "description": "KYD客户端到oracle数据库网络出现问题，oracle数据库可能存在网络故障", "rule_name": "oracle_dsmart_network_failed", "id": "15596", "rule_expression": "(([metric,1000000][oper,contains][str,The Network Adapter could not establish the connection]) && ([metric in time,2,3000061]>[num,0]))", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle RAC分析"}, {"knowledge_name": "操作系统网络层面丢包分析", "knowledge_description": "操作系统网络层面丢包分析"}, {"knowledge_name": "RAC DRM分析", "knowledge_description": "RAC DRM分析"}, {"knowledge_name": "对找出的SQL语句进行优化", "knowledge_description": "查找集群等待时间比较大的SQL语句"}, {"knowledge_name": "rac集群网络问题分析", "knowledge_description": "rac集群网络问题分析"}, {"knowledge_name": "进行Top SEGMENT和SQL分析", "knowledge_description": "如果数据库集群间出现了热块冲突，会导致RAC性能出现严重下降"}, {"knowledge_name": "Oracle等待事件分析", "knowledge_description": "Oracle等待事件分析"}], "description": "gc block lost值大于0，RAC可能存在风险", "rule_name": "oracle_gc_block_lost", "id": "15599", "rule_expression": "([metric,2189102] >[num,$1] || [metric,2189101] >[num,$2]) &&([metric,2189069] >[num,$3])", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "oracle数据库连接失败分析", "knowledge_description": "oracle数据库连接失败分析"}], "description": "oracle数据库未知连接错误", "rule_name": "oracle_unkown_connect_failed", "id": "15602", "rule_expression": "[metric,1000000][oper,notcontains][str,ORA-28001] && [metric,1000000][oper,notcontains][str,ORA-12505] && [metric,1000000][oper,notcontains][str,ORA-12514] && [metric,1000000][oper,notcontains][str,ORA-12516] && [metric,1000000][oper,notcontains][str,ORA-00257] && [metric,1000000][oper,notcontains][str,ORA-01017] && [metric,1000000][oper,notcontains][str,ORA-28000] && [metric,1000000][oper,notcontains][str,The Network Adapter could not establish the connection] && [metric,1000000][oper,notcontains][str,SQL执行失败] && [metric,1000000][oper,neq][str,连接成功]", "db_type": "Oracle", "warning_level": "4", "warning_message": "oracle数据库连接错误：{[metric,1000000]}"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_name": "数据库物理写IO性能分析", "knowledge_description": "数据库物理写IO性能分析"}, {"knowledge_name": "数据库IO功能分析", "knowledge_description": "数据库IO功能分析"}, {"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-Oracle IO分析"}], "description": "写IO性能异常同时读IO正常，可能存储复制链路存在问题", "rule_name": "ora_dbio_abnormal", "id": "15603", "rule_expression": "([metric,2184302]*[num,$1]<[metric,2184304]) && ([metric,3001011] <[num,$2]) && ([metric,2189128] <[num,$3]) && ([metric,2184301] >[num,$4])&& ([metric,3000007] <[num,$5])", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "共享池分析", "knowledge_description": "共享池分析"}, {"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle共享池分析"}, {"knowledge_name": "共享池分析", "knowledge_description": "共享池分析"}, {"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle共享池分析"}], "description": "因为存在热表而引起rowcache等待延时过大，相关应用性能存在问题", "rule_name": "ora_hot_rowcache", "id": "15604", "rule_expression": "([metric,2184319] >[num,$1]) && ([metric,2189046] >[num,$2]) ", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断发现的异常指标以及推荐的诊断路径下钻分析", "knowledge_description": "泛路由-Oracle闩锁分析"}, {"knowledge_name": "根据闩锁等待类别进行分类处理", "knowledge_description": "latch等待事件分析，判断数据库出现哪类闩锁等待"}], "description": "Oracle数据库的闩锁存在问题，数据库存在风险", "rule_name": "ora_latch_free", "id": "15605", "rule_expression": "([metric,2180200] <[num,$1] ||[metric,2184322] >[num,$2]) &&([metric,3000003] >[num,$3])&&([metric,3001011] >[num,$4])", "db_type": "Oracle", "warning_level": "3", "warning_message": "闩锁争用严重，数据库存在风险（当前闩锁命中率{[metric,2180200]}%,闩锁平均等待时间：{[metric,2184322]}，SYS CPU使用率{[metric,3001011] }%"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析CPU使用情况", "knowledge_description": "分析CPU使用情况"}, {"knowledge_name": "查询数据库并行执行情况", "knowledge_description": "查询数据库并行执行情况"}, {"knowledge_name": "执行数量超过5的活跃SQL", "knowledge_description": "执行数量超过5的活跃SQL"}, {"knowledge_name": "区分top sql是逻辑读还是执行次数增多进行进一步诊断", "knowledge_description": "逻辑读较多的TOP SQL"}, {"knowledge_description": "分析指标、SQL相似度"}], "description": "CPU使用率高于20%并且活跃的并行进程数量大于5个，说明并行查询可能影响了CPU资源", "rule_name": "parallel_process_result_in_cpu_problem", "id": "15608", "rule_expression": "[metric,2189057]>[num,$1] && [metric,2189149]>[num,$2]", "db_type": "Oracle", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据具体的登录方式判断并提供建议", "knowledge_description": "数据库存在频繁登录诊断分析"}, {"knowledge_name": "分析数据库实例在指定时间窗口内的数据库会话情况", "knowledge_description": "分析数据库实例在指定时间窗口内的数据库会话情况"}, {"knowledge_name": "检查用户过期或密码错误", "knowledge_description": "检查用户过期或密码错误"}, {"knowledge_name": "根据主机名称查询数据库会话及进程信息", "knowledge_description": "根据主机名称查询数据库会话及进程信息"}], "description": "数据库当前进程数超过process参数的95%，数据库存在连接数满的风险", "rule_name": "process_up_to_resource_limit", "id": "15609", "rule_expression": "[metric,2180049]>[cib,2201010,processes]*[num,$1]", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle RAC分析"}, {"knowledge_name": "分析指定时间间隔内GC相关指标可能存在的问题", "knowledge_description": "分析指定时间间隔内GC相关指标"}, {"knowledge_name": "RAC DRM分析", "knowledge_description": "RAC DRM分析"}, {"knowledge_name": "检索数据库哪些数据行发生行锁，对于找出存在行锁的行，如果长时间存在，说明阻塞者可能存在问题，可以通过“检查阻塞者会话信息”工具找到该会话，并杀掉该会话来解锁", "knowledge_description": "【实时分析】检索当前数据库哪些数据行发生行锁"}, {"knowledge_name": "获取集群等待时间较高的TOP SQL", "knowledge_description": "获取集群等待时间较高的TOP SQL"}, {"knowledge_name": "对未分区的对象进行分区，对碎片严重的对象进行重组整理", "knowledge_description": "找出数据库集群间心跳流量比较大的SEGMENT，检查是否分区并对其进行碎片分析"}, {"knowledge_name": "查看top sql判断是物理读导致还是执行次数原因", "knowledge_description": "物理读较多的TOP SQL"}, {"knowledge_name": "数据库物理读过高时分析物理读过高的SQL和SEGMENT", "knowledge_description": "数据库物理读过高时分析物理读过高的SQL和SEGMENT"}, {"knowledge_name": "操作系统网络总体分析", "knowledge_description": "操作系统网络总体分析"}, {"knowledge_name": "mtr网络诊断工具", "knowledge_description": "mtr网络诊断工具"}], "description": "Avg global enqueue get time大于60毫秒，并且TX锁相关平均等待时间超过500毫秒，则说明行锁等待存在隐患", "rule_name": "rac_interconnect_time_and_enq_tx_problem", "id": "15611", "rule_expression": "[metric,2180205]>[num,$1] && [metric,2180058]>[num,$2]", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "oracle数据库连接失败分析", "knowledge_description": "oracle数据库连接失败分析"}], "description": "KYD连接oracle数据库的用户密码过期", "rule_name": "oracle_dsmart_password_expried", "id": "8562", "rule_expression": "[metric,1000000][oper,contains][str,ORA-28001]", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle RAC分析"}, {"knowledge_name": "分析指定时间间隔内GC相关指标可能存在的问题", "knowledge_description": "分析指定时间间隔内GC相关指标"}, {"knowledge_name": "RAC DRM分析", "knowledge_description": "RAC DRM分析"}, {"knowledge_name": "获取集群等待时间较高的TOP SQL", "knowledge_description": "获取集群等待时间较高的TOP SQL"}, {"knowledge_name": "对未分区的对象进行分区，对碎片严重的对象进行重组整理", "knowledge_description": "找出数据库集群间心跳流量比较大的SEGMENT，检查是否分区并对其进行碎片分析"}, {"knowledge_name": "数据库物理读过高时分析物理读过高的SQL和SEGMENT", "knowledge_description": "数据库物理读过高时分析物理读过高的SQL和SEGMENT"}, {"knowledge_name": "操作系统网络总体分析", "knowledge_description": "操作系统网络总体分析"}, {"knowledge_name": "操作系统网络层面丢包分析", "knowledge_description": "操作系统网络层面丢包分析"}, {"knowledge_name": "mtr网络诊断工具", "knowledge_description": "mtr网络诊断工具"}], "description": "Avg global cache cr block receive time 大于20毫秒并且RAC INTERCONNECT流量大于30M，说明集群性能存在隐患", "rule_name": "rac_interconnect_time_and_flow_problem", "id": "15612", "rule_expression": "[metric,2189098]>[num,$1] && [metric,2180204]>[num,$2]", "db_type": "Oracle", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "REDO NOWAIT分析", "knowledge_description": "REDO NOWAIT分析"}, {"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_name": "显示数据库负载指标情况", "knowledge_description": "显示数据库负载指标情况"}], "description": "Redo Allocation Hit Ratio小于100%，说明REDO存在性能隐患，需要检查REDO和事务的相关情况", "rule_name": "redo_allocation_hit_ratio", "id": "15613", "rule_expression": "[metric,2189002]<[num,$1] && [metric,2189016]>[num,$2]", "db_type": "Oracle", "warning_level": "3", "warning_message": "Redo Allocation Hit Ratio 值为{[metric,2189002]}%，REDO存在性能隐患，需要检查REDO和事务的相关情况"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_name": "数据库IO功能分析", "knowledge_description": "数据库IO功能分析"}], "description": "在工作时间，数据库物理读大于80M/秒，数据库备份IO超过50M/秒，导致单块读延时是平时的2倍，说明备份对IO性能造成了影响", "rule_name": "rman_backup_problem", "id": "15614", "rule_expression": "[metric,2180052]>[num,$1] && [metric,2180057]>[num,$2] && [metric,2180057]>[metric hour avg,2180057]*[num,$3]", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "通过oracle等待事件链分析得到导致等待事件的根会话", "knowledge_description": "生成Oracle数据库实例的会话等待链"}, {"knowledge_name": "检索数据库哪些数据行发生行锁，对于找出存在行锁的行，如果长时间存在，说明阻塞者可能存在问题，可以通过“检查阻塞者会话信息”工具找到该会话，并杀掉该会话来解锁", "knowledge_description": "【实时分析】检索当前数据库哪些数据行发生行锁"}, {"knowledge_name": "分析数据库行锁相关指标", "knowledge_description": "【历史分析】分析数据库行锁相关指标"}], "description": "行锁等待严重超时（超过3600秒）数据库可能存在未提交的会话", "rule_name": "row_lock_wait_time_long", "id": "15616", "rule_expression": null, "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "判断SGA RESIZE操作是否异常", "knowledge_description": "分析SGA RESIZE操作是否异常"}, {"knowledge_name": "查询sga内存组件内存变化情况", "knowledge_description": "查询sga内存组件内存变化情况"}, {"knowledge_name": "通过SGA ADVISE找到合适的SGA建议值，并根据物理内存的大小，判断是否可以实施", "knowledge_description": "SGA调整建议"}, {"knowledge_name": "查找执行次数比较高的TOP SQL", "knowledge_description": "查找执行次数比较高的TOP SQL"}], "description": "SGA RESIZE频繁导致了共享池问题", "rule_name": "sga_resize_shared_pool", "id": "15618", "rule_expression": "([metric,2180519] > [num,$1]) && ([metric,2180055]> [cib,2201010,cpu_count]*[num,$2]) && ([metric,2180050]> [num,$3]) ", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "检索阻塞者会话信息，杀掉该会话可以解开相关的锁或者闩锁。注意部分后台进程是不能杀的，如果杀错会话，会导致数据库宕机", "knowledge_description": "检索阻塞会话信息"}, {"knowledge_name": "在创建索引一段时间后，无返回结果可用此脚本进行检查。", "knowledge_description": "检查数据库是否存在索引创建或者重建任务"}, {"knowledge_name": "通过oracle等待事件链分析得到导致等待事件的根会话", "knowledge_description": "生成Oracle数据库实例的会话等待链"}], "description": "enq:TM-contention 等待的总会话数超过10", "rule_name": "session_wait_enq_tm_cnt_exceed", "id": "15617", "rule_expression": "[metric,2180508]>[num,$1]", "db_type": "Oracle", "warning_level": "2", "warning_message": "enq:TM-contention 等待的总会话数超过10，原因：1）不合理的锁表 2）DML语句相关表存在外键关系，并且子表外键缺少索引 3）BUG导致的并行创建索引缓慢"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "并发SQL语句分析"}, {"knowledge_name": "显示数据库负载指标情况", "knowledge_description": "显示数据库负载指标情况"}, {"knowledge_name": "查找执行次数比较高的TOP SQL", "knowledge_description": "查找执行次数比较高的TOP SQL"}, {"knowledge_name": "区分top sql是逻辑读还是执行次数增多进行进一步诊断", "knowledge_description": "逻辑读较多的TOP SQL"}, {"knowledge_description": "分析SQL"}], "description": "某个SQL ID的SQL并发执行数量超过25，系统可能存在性能问题", "rule_name": "single_sql_exec_exceed", "id": "15619", "rule_expression": "[metric in time,10,2180511] > [num,$1]", "db_type": "Oracle", "warning_level": "3", "warning_message": "SQL ID（{[metric iname in time,10,2180511]}）的并发执行数量{[metric in time,10,2180511]}超过{$1}，系统可能存在性能问题"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "sql告警分析", "knowledge_description": "sql告警分析"}], "description": "各种维度的top sql告警", "rule_name": "sql_alert", "id": "15620", "rule_expression": "[metric in time,3,2180543]>[num,$1]", "db_type": "Oracle", "warning_level": "2", "warning_message": "各种维度的top sql告警{[metric in time,3,2180543]}个"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "显示数据库负载指标情况", "knowledge_description": "显示数据库负载指标情况"}, {"knowledge_name": "查找执行次数比较高的TOP SQL", "knowledge_description": "查找执行次数比较高的TOP SQL"}], "description": "每秒事务数超过最近1小时平均值的10倍，应用可能存在异常", "rule_name": "transcation_count_raise", "id": "15621", "rule_expression": "[metric,2189003]/[metric hour avg,2189003]>[num,$1] && [metric,2189003]>[num,$2]", "db_type": "Oracle", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-oracle活跃会话分析"}, {"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-oracle活跃会话分析"}, {"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_description": "分析指标、SQL相似度"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Oracle 因为IO问题引发活跃会话异常增长原因分析"}], "description": "IO延时过大或者异常引发了活跃会话过大", "rule_name": "IO_active_sessionI", "id": "11608", "rule_expression": "(([metric,3000006]>[num,$1]) ||([metric iname,1000105,3000006][oper,eq][str,3]))&&([metric,2189147]>[num,$2])", "db_type": "Oracle", "warning_level": "2", "warning_message": "因为IO延时增加而导致活跃会话数变大，当前IO延时{([metric,3000006]}毫秒，活跃会话数{([metric,2189147]}"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-oracle活跃会话分析"}, {"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-oracle活跃会话分析"}, {"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_description": "分析指标、SQL相似度"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Oracle 因为IO问题引发活跃会话异常增长原因分析"}], "description": "IO延时过大或者异常引发了活跃会话过大", "rule_name": "IO_active_sessionI", "id": "11611", "rule_expression": "(([metric,3000006]>[num,$1]) ||([metric iname,1000105,3000006][oper,eq][str,3]))&&([metric,2189147]>[num,$2])", "db_type": "Oracle", "warning_level": "2", "warning_message": "因为IO延时增加而导致活跃会话数变大，当前IO延时{([metric,3000006]}毫秒，活跃会话数{([metric,2189147]}"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "Oracle等待事件分析", "knowledge_description": "Oracle等待事件分析"}, {"knowledge_name": "显示数据库等待事件及数据库会话信息", "knowledge_description": "显示数据库等待事件及数据库会话信息"}, {"knowledge_name": "等待事件链分析", "knowledge_description": "等待事件链分析"}, {"knowledge_name": "根据智能诊断发现的异常指标以及推荐的诊断路径下钻分析", "knowledge_description": "泛路由-Oracle闩锁分析"}, {"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle共享池分析"}, {"knowledge_name": "以树形结构显示等待事件链信息", "knowledge_description": "以树形结构显示等待事件链信息"}, {"knowledge_name": "数据库后台进程错误及等待事件诊断", "knowledge_description": "数据库后台进程错误及等待事件诊断"}, {"knowledge_name": "根据闩锁等待类别进行分类处理", "knowledge_description": "latch等待事件分析，判断数据库出现哪类闩锁等待"}, {"knowledge_name": "一般来说，平均等待时间应该小于10毫秒，如果某些指标的平均等待时间超过20毫秒，则说明系统有问题。分析所有超出指标范围的指标项", "knowledge_description": "分析数据库集群相关等待事件，判断问题出在哪些方面"}, {"knowledge_name": "enq: CF - contention等待事件分析", "knowledge_description": "enq: CF - contention等待事件分析"}, {"knowledge_name": "分析数据库控制文件等待事件延时情况", "knowledge_description": "分析数据库控制文件等待事件延时情况"}, {"knowledge_name": "分析数据库中enq: KO - fast object checkpoint等待事件", "knowledge_description": "分析数据库中enq: KO - fast object checkpoint等待事件"}, {"knowledge_name": "列出数据库中非空闲等待事件", "knowledge_description": "列出数据库中非空闲等待事件"}, {"knowledge_name": "Buffer busy waits等待事件诊断", "knowledge_description": "Buffer busy waits等待事件诊断"}, {"knowledge_name": "等待事件enq: RO - fast object reuse诊断", "knowledge_description": "等待事件enq: RO - fast object reuse诊断"}], "description": "等待事件风险连续出现较高的情况", "rule_name": "wait_event_risk", "id": "15739", "rule_expression": null, "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_name": "数据库物理写IO性能分析", "knowledge_description": "数据库物理写IO性能分析"}], "description": "DB FILE PARALLEL WRITE延时超过最近一小时平均值的5倍或者超过100毫秒的次数超过2次，说明数据库写IO存在隐患", "rule_name": "db_file_parallel_write_problem", "id": "5710", "rule_expression": "[metric,2184304]/[metric hour avg,2184304]>[num,$1] && [metric,2184304]>[num,$2] && [metric,2189006]>[num,$3]", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "一般来说，日志切换后归档进程就会进行归档操作，当前最多有一个日志组未归档。如果未归档日志组数量超过2个，一般来说系统就有问题,如果归档有问题，建议检查归档目录的写IO性能是不是很慢，检查归档目录状态及错误原因", "knowledge_description": "未归档日志组数量超过2个，一般来说系统就有问题"}], "description": "快速恢复区配置大小大于快速恢复区目的地实际可用大小", "rule_name": "db_recovery_dest_size_incorrect", "id": "5892", "rule_expression": "[metric,2180534]>([metric,2180525]+[metric,2180535])", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "检查DG环境"}], "description": "DG备库延迟超过1800秒或存在GAP", "rule_name": "dg_standby_delay_more", "id": "8209", "rule_expression": "[metric in time ,10,2180066]-[cib,2201001,apply_delay]>[num,$1] || [metric in time ,10,2180067]>[num,$2]", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "运维对象连接失败，请检查运维对象是否down", "knowledge_description": "运维对象连接状态分析"}, {"knowledge_name": "操作系统核心资源分析", "knowledge_description": "操作系统核心资源分析"}, {"knowledge_name": "显示数据库负载指标情况", "knowledge_description": "显示数据库负载指标情况"}, {"knowledge_name": "数据库后台进程错误及等待事件诊断", "knowledge_description": "数据库后台进程错误及等待事件诊断"}, {"knowledge_name": "分析数据库控制文件等待事件延时情况", "knowledge_description": "分析数据库控制文件等待事件延时情况"}, {"knowledge_name": "通过oracle等待事件链分析得到导致等待事件的根会话", "knowledge_description": "生成Oracle数据库实例的会话等待链"}, {"knowledge_name": "服务器内存分析", "knowledge_description": "服务器内存分析"}, {"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}], "description": "数据库采集任务严重超时，数据库存在严重性能风险", "rule_name": "collector_exec_slow_oracle", "id": "7001", "rule_expression": "[metric,1000000][oper,eq][str,连接成功] && [metric,1000101] >([metric hour avg,1000101]*[num,$1])", "db_type": "Oracle", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_name": "数据库物理写IO性能分析", "knowledge_description": "数据库物理写IO性能分析"}], "description": "DB FILE PARALLEL WRITE延时超过最近一小时平均值的5倍或者超过100毫秒的次数超过2次，说明数据库写IO存在隐患", "rule_name": "db_file_parallel_write_problem", "id": "5610", "rule_expression": "[metric,2184304]/[metric hour avg,2184304]>[num,$1] && [metric,2184304]>[num,$2] && [metric,2189006]>[num,$3]", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle RAC分析"}, {"knowledge_name": "操作系统网络层面丢包分析", "knowledge_description": "操作系统网络层面丢包分析"}, {"knowledge_name": "RAC DRM分析", "knowledge_description": "RAC DRM分析"}, {"knowledge_name": "对找出的SQL语句进行优化", "knowledge_description": "查找集群等待时间比较大的SQL语句"}, {"knowledge_name": "rac集群网络问题分析", "knowledge_description": "rac集群网络问题分析"}, {"knowledge_name": "进行Top SEGMENT和SQL分析", "knowledge_description": "如果数据库集群间出现了热块冲突，会导致RAC性能出现严重下降"}, {"knowledge_name": "Oracle等待事件分析", "knowledge_description": "Oracle等待事件分析"}], "description": "gc block lost值大于0，RAC可能存在风险", "rule_name": "oracle_gc_block_lost", "id": "8640", "rule_expression": "([metric,2189102] >[num,$1] || [metric,2189101] >[num,$2]) &&([metric,2189069] >[num,$3])", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据具体的登录方式判断并提供建议", "knowledge_description": "数据库存在频繁登录诊断分析"}, {"knowledge_name": "检查用户过期或密码错误", "knowledge_description": "检查用户过期或密码错误"}], "description": "oracle数据库的进程数比会话数多25%以上，说明Oracle数据库的登录存在问题，可能有应用不停在重试登录", "rule_name": "db_process_count_greater_than_db_session_count", "id": "5612", "rule_expression": "([metric,2180049]-[metric,2180073]-[metric,2180536]+[metric,2180537]-[metric,2180538]+[metric,2180539])>([metric,2180073]*[num,$1]) && ([metric,2180049]>[num,$2])", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "一般来说，日志切换后归档进程就会进行归档操作，当前最多有一个日志组未归档。如果未归档日志组数量超过2个，一般来说系统就有问题,如果归档有问题，建议检查归档目录的写IO性能是不是很慢，检查归档目录状态及错误原因", "knowledge_description": "未归档日志组数量超过2个，一般来说系统就有问题"}], "description": "快速恢复区配置大小大于快速恢复区目的地实际可用大小", "rule_name": "db_recovery_dest_size_incorrect", "id": "5891", "rule_expression": "[metric,2180534]>([metric,2180525]+[metric,2180535])", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据具体的登录方式判断并提供建议", "knowledge_description": "数据库存在频繁登录诊断分析"}, {"knowledge_name": "检查用户过期或密码错误", "knowledge_description": "检查用户过期或密码错误"}], "description": "使用独立模式的Oracle数据库的会话数比进程数多出20%，数据库系统可能存在隐患", "rule_name": "db_session_count_greater_than_db_process_count", "id": "5613", "rule_expression": "([metric,2180073]-[metric,2180537]-[metric,2180539]-[metric,2180049]+[metric,2180536]+[metric,2180538])>([metric,2180049]*[num,$1]) && ([metric,2180073]>[num,$2])", "db_type": "Oracle", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "检查DG环境"}], "description": "DG备库延迟超过1800秒或存在GAP", "rule_name": "dg_standby_delay_more", "id": "8208", "rule_expression": "[metric in time ,10,2180066]-[cib,2201001,apply_delay]>[num,$1] || [metric in time ,10,2180067]>[num,$2]", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "显示数据库ASM磁盘组信息", "knowledge_description": "显示数据库ASM磁盘组信息"}, {"knowledge_name": "及时清理归档日志", "knowledge_description": "检查Oracle 归档日志空间使用情况"}, {"knowledge_name": "显示表空间容量使用情况，以MB为单位", "knowledge_description": "显示表空间容量使用情况，以MB为单位"}, {"knowledge_name": "查询数据库表空间信息", "knowledge_description": "查询数据库表空间信息"}], "description": "ASM磁盘组使用率超过80%且预估可用天数小于7天，系统存在风险", "rule_name": "dg_usage_exceed", "id": "5614", "rule_expression": "([metric,2180533]<[num,$1]) && ([metric max in time,30,2180517]>[num,$2])", "db_type": "Oracle", "warning_level": "4", "warning_message": "ASM磁盘组{[metric max iname in time,30,2180517]}使用率{[metric max in time,30,2180517]}%，预估可用{[metric,2180533]}天"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "查找解析次数比较高的SQL", "knowledge_description": "查找解析次数比较高的SQL"}, {"knowledge_name": "共享池分析", "knowledge_description": "共享池分析"}, {"knowledge_name": "判断SGA RESIZE操作是否异常", "knowledge_description": "分析SGA RESIZE操作是否异常"}, {"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle共享池分析"}, {"knowledge_description": "分析指标、SQL相似度"}], "description": "SHARED POOL的使用率高于90%并且软解析比例低于90%，none-parse cpu time比例低于90%，SQL解析可能影响数据库的健康", "rule_name": "higher_shared_pool_used_lower_soft_parsed", "id": "5623", "rule_expression": "([num,100]-[metric,2189114])>[num,$1] && [metric,2189055]<[num,$2] && [metric,2180201]<[num,$3] ", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "TX锁分析", "knowledge_description": "TX锁分析"}, {"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_name": "显示数据库负载指标情况", "knowledge_description": "显示数据库负载指标情况"}], "description": "每秒索引叶节点分裂数量超过10个，并且单块读响应时间超过30毫秒，数据库可能存在TX锁恶化的风险", "rule_name": "index_split_lead_to_tx_enq", "id": "5624", "rule_expression": "[metric,2189083]>[num,$1] && [metric,2184302]>[num,$2]", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "区分top sql是逻辑读还是执行次数增多进行进一步诊断", "knowledge_description": "逻辑读较多的TOP SQL"}, {"knowledge_name": "通过每秒执行的事务数和SQL数，检查数据库负载情况", "knowledge_description": "每秒执行的事务数和SQL语句每秒执行数量可以从宏观上显示出数据库负载运行情况。"}, {"knowledge_name": "如果存在TOP SQL，建议优化", "knowledge_description": "分析逻辑读较高的SQL，从awr中获取"}], "description": "每秒逻辑读出现异常增长，说明应用或者数据出现了异常", "rule_name": "more_logic_read", "id": "5631", "rule_expression": "(([metric,2189030]>[num,$1]) || ([metric in time,10,1000105,2189030][oper,eq][str,3])) && ([metric,2189030]>[num,$2])", "db_type": "Oracle", "warning_level": "2", "warning_message": "每秒逻辑读出现异常增长，说明应用或者数据的应用可能出现了异常，当前逻辑读为{[metric,2189030]}/秒"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "oracle SGA超过100G的数据库vm.max_map_count参数配置不正确", "rule_name": "oracle_big_sga_mmap_setting_incorrect", "id": "11938", "rule_expression": "[cib,2201010,sga_target]>[num,$1] && [cib,3010002,vm.max_map_count]<[num,$2]", "db_type": "Oracle", "warning_level": "4", "warning_message": "oracle SGA当前为{[cib,2201010,sga_target]}，超过100G，但数据库服务器vm.max_map_count参数为 {[cib,3010002,vm.max_map_count]}，配置过小，可能会导致数据库产生ORA-04030报错。"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "oracle数据库连接失败分析", "knowledge_description": "oracle数据库连接失败分析"}], "description": "数据库自身故障导致连接失败", "rule_name": "oracle_db_broken_connect_failed", "id": "8443", "rule_expression": "([metric,1000000][oper,contains][str,ORA-12516]) || ([metric,1000000][oper,contains][str,ORA-00257]) || (([metric,1000000][oper,contains][str,ORA-12505] || [metric,1000000][oper,contains][str,ORA-12514]) && ([metric list in time,3,3000060][oper,all neq][cib,2201001,instance_name])) || (([metric,1000000][oper,contains][str,The Network Adapter could not establish the connection]) && ([metric in time,3,3000061]<[num,1]))", "db_type": "Oracle", "warning_level": "4", "warning_message": "数据库自身故障导致连接失败：{[metric,1000000]}"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "oracle数据库连接失败分析", "knowledge_description": "oracle数据库连接失败分析"}], "description": "KYD采样SQL在oracle数据库执行失败", "rule_name": "oracle_dsmart_monitor_sql_execute_failed", "id": "8475", "rule_expression": "[metric,1000000] [oper,contains][str,SQL执行失败]", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "oracle数据库连接失败分析", "knowledge_description": "oracle数据库连接失败分析"}, {"knowledge_name": "网络接口分析", "knowledge_description": "(历史)网络接口分析"}], "description": "KYD客户端到oracle数据库网络出现问题，oracle数据库可能存在网络故障", "rule_name": "oracle_dsmart_network_failed", "id": "8471", "rule_expression": "(([metric,1000000][oper,contains][str,The Network Adapter could not establish the connection]) && ([metric in time,2,3000061]>[num,0]))", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle RAC分析"}, {"knowledge_name": "RAC DRM分析", "knowledge_description": "RAC DRM分析"}, {"knowledge_name": "显示数据库负载指标情况", "knowledge_description": "显示数据库负载指标情况"}, {"knowledge_name": "获取集群等待时间较高的TOP SQL", "knowledge_description": "获取集群等待时间较高的TOP SQL"}, {"knowledge_name": "操作系统网络总体分析", "knowledge_description": "操作系统网络总体分析"}, {"knowledge_name": "mtr网络诊断工具", "knowledge_description": "mtr网络诊断工具"}], "description": "gcs drm freeze in enter server mode平均等待时间超过100毫秒，并且gc remaster 平均等待时间超过100毫秒，说明DRM已经影响了数据库的性能，建议关闭DRM", "rule_name": "rac_drm_problem", "id": "5636", "rule_expression": "[metric,2180059]>[num,$1] && [metric,2180060]>[num,$2]", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "查看全表扫描的对象"}, {"knowledge_name": "查看top sql判断是物理读导致还是执行次数原因", "knowledge_description": "物理读较多的TOP SQL"}, {"knowledge_name": "区分top sql是逻辑读还是执行次数增多进行进一步诊断", "knowledge_description": "逻辑读较多的TOP SQL"}, {"knowledge_name": "获取执行时间比较高的TOP SQL", "knowledge_description": "获取执行时间比较高的TOP SQL"}], "description": "Long table  scan Per Sec超过小时平均值的10倍，应用可能存在异常", "rule_name": "long_table_scan_time_raise", "id": "5630", "rule_expression": "[metric,2189036]/[metric hour avg,2189036]>[num,$1] && [metric,2189036]>[num,$2][@Denominator0,0]", "db_type": "Oracle", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "oracle数据库连接失败分析", "knowledge_description": "oracle数据库连接失败分析"}], "description": "oracle数据库未知连接错误", "rule_name": "oracle_unkown_connect_failed", "id": "8483", "rule_expression": "[metric,1000000][oper,notcontains][str,ORA-28001] && [metric,1000000][oper,notcontains][str,ORA-12505] && [metric,1000000][oper,notcontains][str,ORA-12514] && [metric,1000000][oper,notcontains][str,ORA-12516] && [metric,1000000][oper,notcontains][str,ORA-00257] && [metric,1000000][oper,notcontains][str,ORA-01017] && [metric,1000000][oper,notcontains][str,ORA-28000] && [metric,1000000][oper,notcontains][str,The Network Adapter could not establish the connection] && [metric,1000000][oper,notcontains][str,SQL执行失败] && [metric,1000000][oper,neq][str,连接成功]", "db_type": "Oracle", "warning_level": "4", "warning_message": "oracle数据库连接错误：{[metric,1000000]}"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析CPU使用情况", "knowledge_description": "分析CPU使用情况"}, {"knowledge_name": "查询数据库并行执行情况", "knowledge_description": "查询数据库并行执行情况"}, {"knowledge_name": "执行数量超过5的活跃SQL", "knowledge_description": "执行数量超过5的活跃SQL"}, {"knowledge_name": "区分top sql是逻辑读还是执行次数增多进行进一步诊断", "knowledge_description": "逻辑读较多的TOP SQL"}, {"knowledge_description": "分析指标、SQL相似度"}], "description": "CPU使用率高于20%并且活跃的并行进程数量大于5个，说明并行查询可能影响了CPU资源", "rule_name": "parallel_process_result_in_cpu_problem", "id": "5635", "rule_expression": "[metric,2189057]>[num,$1] && [metric,2189149]>[num,$2]", "db_type": "Oracle", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle RAC分析"}, {"knowledge_name": "分析指定时间间隔内GC相关指标可能存在的问题", "knowledge_description": "分析指定时间间隔内GC相关指标"}, {"knowledge_name": "RAC DRM分析", "knowledge_description": "RAC DRM分析"}, {"knowledge_name": "检索数据库哪些数据行发生行锁，对于找出存在行锁的行，如果长时间存在，说明阻塞者可能存在问题，可以通过“检查阻塞者会话信息”工具找到该会话，并杀掉该会话来解锁", "knowledge_description": "【实时分析】检索当前数据库哪些数据行发生行锁"}, {"knowledge_name": "获取集群等待时间较高的TOP SQL", "knowledge_description": "获取集群等待时间较高的TOP SQL"}, {"knowledge_name": "对未分区的对象进行分区，对碎片严重的对象进行重组整理", "knowledge_description": "找出数据库集群间心跳流量比较大的SEGMENT，检查是否分区并对其进行碎片分析"}, {"knowledge_name": "查看top sql判断是物理读导致还是执行次数原因", "knowledge_description": "物理读较多的TOP SQL"}, {"knowledge_name": "数据库物理读过高时分析物理读过高的SQL和SEGMENT", "knowledge_description": "数据库物理读过高时分析物理读过高的SQL和SEGMENT"}, {"knowledge_name": "操作系统网络总体分析", "knowledge_description": "操作系统网络总体分析"}, {"knowledge_name": "mtr网络诊断工具", "knowledge_description": "mtr网络诊断工具"}], "description": "Avg global enqueue get time大于60毫秒，并且TX锁相关平均等待时间超过500毫秒，则说明行锁等待存在隐患", "rule_name": "rac_interconnect_time_and_enq_tx_problem", "id": "5637", "rule_expression": "[metric,2180205]>[num,$1] && [metric,2180058]>[num,$2]", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "显示指定时间间隔内的日志报错信息", "knowledge_description": "显示指定时间间隔内的日志报错信息"}, {"knowledge_name": "实时查询表空间使用情况，不要频繁点击查询，对于超大数据库，频繁查询可能会导致数据库hang死", "knowledge_description": "实时查询表空间使用情况"}, {"knowledge_name": "一般来说，日志切换后归档进程就会进行归档操作，当前最多有一个日志组未归档。如果未归档日志组数量超过2个，一般来说系统就有问题,如果归档有问题，建议检查归档目录的写IO性能是不是很慢，检查归档目录状态及错误原因", "knowledge_description": "未归档日志组数量超过2个，一般来说系统就有问题"}], "description": "用户回滚比例超过20%并且每秒回滚次数超过5次，应用可能存在异常", "rule_name": "rollback_ratio_exceed", "id": "5641", "rule_expression": "[metric,2189025]>[num,$1]  && [metric,2189024]>[num,$2]", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "检索阻塞者会话信息，杀掉该会话可以解开相关的锁或者闩锁。注意部分后台进程是不能杀的，如果杀错会话，会导致数据库宕机", "knowledge_description": "检索阻塞会话信息"}, {"knowledge_name": "在创建索引一段时间后，无返回结果可用此脚本进行检查。", "knowledge_description": "检查数据库是否存在索引创建或者重建任务"}, {"knowledge_name": "通过oracle等待事件链分析得到导致等待事件的根会话", "knowledge_description": "生成Oracle数据库实例的会话等待链"}], "description": "enq:TM-contention 等待的总会话数超过10", "rule_name": "session_wait_enq_tm_cnt_exceed", "id": "5642", "rule_expression": "[metric,2180508]>[num,$1]", "db_type": "Oracle", "warning_level": "2", "warning_message": "enq:TM-contention 等待的总会话数超过10，原因：1）不合理的锁表 2）DML语句相关表存在外键关系，并且子表外键缺少索引 3）BUG导致的并行创建索引缓慢"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "并发SQL语句分析"}, {"knowledge_name": "显示数据库负载指标情况", "knowledge_description": "显示数据库负载指标情况"}, {"knowledge_name": "查找执行次数比较高的TOP SQL", "knowledge_description": "查找执行次数比较高的TOP SQL"}, {"knowledge_name": "区分top sql是逻辑读还是执行次数增多进行进一步诊断", "knowledge_description": "逻辑读较多的TOP SQL"}, {"knowledge_description": "分析SQL"}], "description": "某个SQL ID的SQL并发执行数量超过25，系统可能存在性能问题", "rule_name": "single_sql_exec_exceed", "id": "5643", "rule_expression": "[metric in time,10,2180511] > [num,$1]", "db_type": "Oracle", "warning_level": "3", "warning_message": "SQL ID（{[metric iname in time,10,2180511]}）的并发执行数量{[metric in time,10,2180511]}超过{$1}，系统可能存在性能问题"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "sql告警分析", "knowledge_description": "sql告警分析"}], "description": "各种维度的top sql告警", "rule_name": "sql_alert", "id": "8178", "rule_expression": "[metric in time,3,2180543]>[num,$1]", "db_type": "Oracle", "warning_level": "2", "warning_message": "各种维度的top sql告警{[metric in time,3,2180543]}个"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据具体的登录方式判断并提供建议", "knowledge_description": "数据库存在频繁登录诊断分析"}], "description": "每秒LOGONS数量异常，说明数据库存在频繁登录", "rule_name": "count_logon_sec", "id": "58", "rule_expression": "([metric,2189018] >[num,$1]) ||([metric in time,10,1000105,2189018][oper,eq][str,3])", "db_type": "Oracle", "warning_level": "2", "warning_message": "每秒登录数突发异常增长，达到{[metric,2189018]}/秒"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据具体的登录方式判断并提供建议", "knowledge_description": "数据库存在频繁登录诊断分析"}], "description": "每秒LOGONS的数量超过30个，数据库存在安全风险 ", "rule_name": "count_logon_sec_critical", "id": "8215", "rule_expression": "([metric,2189018] >[num,$1]) ||([metric in time,10,1000105,2189018][oper,eq][str,3])", "db_type": "Oracle", "warning_level": "3", "warning_message": "每秒登录数突发异常增长，达到{[metric,2189018]}/秒"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "显示数据库负载指标情况", "knowledge_description": "显示数据库负载指标情况"}, {"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle共享池分析"}, {"knowledge_name": "共享池分析", "knowledge_description": "共享池分析"}, {"knowledge_name": "查找解析次数比较高的SQL", "knowledge_description": "查找解析次数比较高的SQL"}], "description": "CURSOR解析相关等待会话数超过平均值的5倍并且大于20，共享池可能存在性能隐患", "rule_name": "cursor_parse_problem", "id": "59", "rule_expression": "[metric,2180519]/[metric hour avg,2180519]>[num,$1] && [metric,2180519]>[num,$2][@Denominator0,0]", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "数据库IO功能分析", "knowledge_description": "数据库IO功能分析"}, {"knowledge_name": "数据库物理写IO性能分析", "knowledge_description": "数据库物理写IO性能分析"}, {"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_name": "显示数据库rman备份任务信息", "knowledge_description": "显示数据库rman备份任务信息"}], "description": "DB CACHE的物理读流量小于总的读IO流量的60%，说明存在大量非正常的IO操作", "rule_name": "db_cache_phy_read_ratio_low", "id": "60", "rule_expression": "[metric,2180056]/[metric,2180061]<[num,$1] && [metric,2180061]>[num,$2]", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_name": "数据库物理写IO性能分析", "knowledge_description": "数据库物理写IO性能分析"}], "description": "DB FILE PARALLEL WRITE延时超过最近一小时平均值的5倍或者超过100毫秒的次数超过2次，说明数据库写IO存在隐患", "rule_name": "db_file_parallel_write_problem", "id": "61", "rule_expression": "[metric,2184304]/[metric hour avg,2184304]>[num,$1] && [metric,2184304]>[num,$2] && [metric,2189006]>[num,$3]", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析db file sequential read指标 ，如果大于10毫秒说明IO性能已经受到影响", "knowledge_description": "分析db file sequential read指标 ，如果大于10毫秒说明IO性能已经受到影响"}, {"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_name": "数据库物理读过高时分析物理读过高的SQL和SEGMENT", "knowledge_description": "数据库物理读过高时分析物理读过高的SQL和SEGMENT"}, {"knowledge_name": "查看top sql判断是物理读导致还是执行次数原因", "knowledge_description": "物理读较多的TOP SQL"}], "description": "DB FILE SEQUENTIAL READ延时超过最近1小时平均值的5倍，数据库读IO存在隐患", "rule_name": "db_file_seq_read", "id": "62", "rule_expression": "[metric,2184302]/[metric hour avg,2184302]>[num,$1] && [metric,2184302]>[num,$2] && [metric,2189004]>[num,$3]", "db_type": "Oracle", "warning_level": "3", "warning_message": "DB FILE SEQUENTIAL READ延时（{[metric,2184302]}）ms，超过最近1小时平均值的{$1}倍，数据库读IO存在隐患"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "一般来说，日志切换后归档进程就会进行归档操作，当前最多有一个日志组未归档。如果未归档日志组数量超过2个，一般来说系统就有问题,如果归档有问题，建议检查归档目录的写IO性能是不是很慢，检查归档目录状态及错误原因", "knowledge_description": "未归档日志组数量超过2个，一般来说系统就有问题"}], "description": "快速恢复区配置大小大于快速恢复区目的地实际可用大小", "rule_name": "db_recovery_dest_size_incorrect", "id": "5890", "rule_expression": "[metric,2180534]>([metric,2180525]+[metric,2180535])", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据具体的登录方式判断并提供建议", "knowledge_description": "数据库存在频繁登录诊断分析"}, {"knowledge_name": "检查用户过期或密码错误", "knowledge_description": "检查用户过期或密码错误"}], "description": "使用独立模式的Oracle数据库的会话数比进程数多出20%，数据库系统可能存在隐患", "rule_name": "db_session_count_greater_than_db_process_count", "id": "64", "rule_expression": "([metric,2180073]-[metric,2180537]-[metric,2180539]-[metric,2180049]+[metric,2180536]+[metric,2180538])>([metric,2180049]*[num,$1]) && ([metric,2180073]>[num,$2])", "db_type": "Oracle", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "检查DG环境"}], "description": "DG备库延迟超过1800秒或存在GAP", "rule_name": "dg_standby_delay_more", "id": "8207", "rule_expression": "[metric in time ,10,2180066]-[cib,2201001,apply_delay]>[num,$1] || [metric in time ,10,2180067]>[num,$2]", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "操作系统核心资源分析", "knowledge_description": "操作系统核心资源分析"}, {"knowledge_name": "显示数据库负载指标情况", "knowledge_description": "显示数据库负载指标情况"}, {"knowledge_name": "区分top sql是逻辑读还是执行次数增多进行进一步诊断", "knowledge_description": "逻辑读较多的TOP SQL"}, {"knowledge_name": "服务器内存分析", "knowledge_description": "服务器内存分析"}, {"knowledge_name": "找出内存占用率较高的Top20进程", "knowledge_description": "找出内存占用率较高的Top20进程"}], "description": "物理内存空闲小于100M，且SWAP使用率大于30%，系统存在风险", "rule_name": "free_mem_oracle", "id": "66", "rule_expression": "[metric,3000007]<[num,$1]*[num,1024] && [metric,3001031]>[num,$2]", "db_type": "Oracle", "warning_level": "2", "warning_message": "物理内存空闲{[metric,3000007]/[num,1024]}M，且SWAP使用率{[metric,3001031]}%，系统存在高风险"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "查找解析次数比较高的SQL", "knowledge_description": "查找解析次数比较高的SQL"}, {"knowledge_name": "共享池分析", "knowledge_description": "共享池分析"}, {"knowledge_name": "判断SGA RESIZE操作是否异常", "knowledge_description": "分析SGA RESIZE操作是否异常"}, {"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle共享池分析"}, {"knowledge_description": "分析指标、SQL相似度"}], "description": "SHARED POOL的使用率高于90%并且软解析比例低于90%，none-parse cpu time比例低于90%，SQL解析可能影响数据库的健康", "rule_name": "higher_shared_pool_used_lower_soft_parsed", "id": "74", "rule_expression": "([num,100]-[metric,2189114])>[num,$1] && [metric,2189055]<[num,$2] && [metric,2180201]<[num,$3] ", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "TX锁分析", "knowledge_description": "TX锁分析"}, {"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_name": "显示数据库负载指标情况", "knowledge_description": "显示数据库负载指标情况"}], "description": "每秒索引叶节点分裂数量超过10个，并且单块读响应时间超过30毫秒，数据库可能存在TX锁恶化的风险", "rule_name": "index_split_lead_to_tx_enq", "id": "75", "rule_expression": "[metric,2189083]>[num,$1] && [metric,2184302]>[num,$2]", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_name": "分析服务器IO设备的IO情况", "knowledge_description": "分析服务器IO设备的IO情况"}, {"knowledge_name": "数据库IO功能分析", "knowledge_description": "数据库IO功能分析"}, {"knowledge_name": "查看top sql判断是物理读导致还是执行次数原因", "knowledge_description": "物理读较多的TOP SQL"}, {"knowledge_name": "区分top sql是逻辑读还是执行次数增多进行进一步诊断", "knowledge_description": "逻辑读较多的TOP SQL"}, {"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-Oracle IO分析"}], "description": "操作系统IO延时过高（60ms-100ms)，数据库存在风险", "rule_name": "IO_latency_oracle_error", "id": "8051", "rule_expression": "[metric,3000006]<=[num,100] && [metric,3000006]>[num,$1] && ([metric,3000100]>[num,$2] || [metric,3000101]>[num,$3])", "db_type": "Oracle", "warning_level": "3", "warning_message": "操作系统IO延时过高（{[metric,3000006]}ms)，数据库存在风险"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle热块冲突分析"}, {"knowledge_name": "区分top sql是逻辑读还是执行次数增多进行进一步诊断", "knowledge_description": "逻辑读较多的TOP SQL"}, {"knowledge_name": "db cache调整建议", "knowledge_description": "db cache调整建议"}], "description": "因为CBC引发的闩锁争用", "rule_name": "latch_cbc", "id": "11600", "rule_expression": "([metric,2180200] <[num,$1] ||[metric,2184321] >[num,$2])&&([metric,3001011]>[num,$3])&&([metric,\t2184313]>[num,$4])&&([metric,2184312]>[num,$5])", "db_type": "Oracle", "warning_level": "4", "warning_message": "CACHE BUFFER CHAINS延时（{[metric,2184312]}ms）严重，闩锁存在争用"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据闩锁等待类别进行分类处理", "knowledge_description": "latch等待事件分析，判断数据库出现哪类闩锁等待"}, {"knowledge_name": "分析数据库的latch hit命中率", "knowledge_description": "分析数据库的latch hit命中率"}, {"knowledge_name": "查询指定数据库会话的Latch持有信息", "knowledge_description": "查询指定数据库会话的Latch持有信息"}, {"knowledge_name": "latch,mutex资源诊断工具集", "knowledge_description": "latch工具"}, {"knowledge_name": "根据智能诊断发现的异常指标以及推荐的诊断路径下钻分析", "knowledge_description": "泛路由-Oracle闩锁分析"}, {"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle热块冲突分析"}, {"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle RAC分析"}, {"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle共享池分析"}, {"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-Oracle IO分析"}], "description": "闩锁命中率异常，系统存在并发风险", "rule_name": "latch_hit_ration", "id": "11318", "rule_expression": "([metric,2180200] <[num,$1]) ||([metric in time,10,1000105,2180200][oper,eq][str,1])", "db_type": "Oracle", "warning_level": "3", "warning_message": "闩锁命中率出现异常，达到{[metric,2180200]}%。"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "查找执行次数比较高的TOP SQL", "knowledge_description": "查找执行次数比较高的TOP SQL"}, {"knowledge_name": "查找解析次数比较高的SQL", "knowledge_description": "查找解析次数比较高的SQL"}, {"knowledge_name": "根据闩锁等待类别进行分类处理", "knowledge_description": "latch等待事件分析，判断数据库出现哪类闩锁等待"}, {"knowledge_name": "根据智能诊断发现的异常指标以及推荐的诊断路径下钻分析", "knowledge_description": "泛路由-Oracle闩锁分析"}], "description": "因为解析问题导致的闩锁争用", "rule_name": "latch_parse", "id": "11605", "rule_expression": "([metric,2180200] <[num,$1])&&([metric,3001011]>[num,$2])&&([metric,2189044]>[num,$3])&&([metric,2189046]>[num,$4])&&([metric,2189121]>[num,2000])&&([metric,2184315]>[num,$5]||[metric,2184314]>[num,$5])", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "如果log file parallel write的平均等待时间超过10ms,说明数据库日志写IO性能存在问题；如果Log file sync与log file parallel write两个等待事件的平均等待时间的差值大于10ms 或者大于log file parallel write等待事件的平均等待时间的50%，则说明数据库日志同步存在性能问题", "knowledge_description": "LOG FILE SYNC等待延时超过n毫秒，说明数据库存在性能隐患"}, {"knowledge_description": "分析归档日志大小远小于redo log文件大小"}], "description": "LOG FILE SYNC等待延时较高(10ms-60ms)，说明系统存在性能隐患", "rule_name": "log_file_sync_wait", "id": "80", "rule_expression": "[metric,2184301]>[num,$1] && [metric,2184301]<=[num,$2] ", "db_type": "Oracle", "warning_level": "3", "warning_message": "LOG FILE SYNC等待延时较高（{[metric,2184301]}ms），系统存在性能隐患"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "数据库物理写IO性能分析", "knowledge_description": "数据库物理写IO性能分析"}, {"knowledge_description": "并发SQL语句分析"}, {"knowledge_name": "通过每秒执行的事务数和SQL数，检查数据库负载情况", "knowledge_description": "每秒执行的事务数和SQL语句每秒执行数量可以从宏观上显示出数据库负载运行情况。"}, {"knowledge_name": "显示数据库中的事务信息", "knowledge_description": "显示数据库中的事务信息"}, {"knowledge_name": "数据库并发执行维度分析", "knowledge_description": "数据库并发执行维度分析"}], "description": "物理写异常增长，应用可能存在异常", "rule_name": "more_phyisical_write", "id": "11398", "rule_expression": "(([metric,2189006]>[num,$1]) || ([metric in time,10,1000105,2189006][oper,eq][str,3])) && ([metric,2189006]>[num,$2])", "db_type": "Oracle", "warning_level": "2", "warning_message": "数据库物理写异常增长或者每秒物理写超过{[num,$1]}，应用可能存在异常，告警发生时的最新物理写{[metric,2189006]}/秒"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析CPU使用情况", "knowledge_description": "分析CPU使用情况"}, {"knowledge_description": "分析指标、SQL相似度"}, {"knowledge_name": "操作系统核心资源分析", "knowledge_description": "操作系统核心资源分析"}, {"knowledge_name": "区分top sql是逻辑读还是执行次数增多进行进一步诊断", "knowledge_description": "逻辑读较多的TOP SQL"}, {"knowledge_name": "显示数据库负载指标情况", "knowledge_description": "显示数据库负载指标情况"}], "description": "操作系统r队列超过CPU数量的2倍且CPU使用率超过90%，则可能存在CPU资源瓶颈", "rule_name": "more_running_proc_oracle", "id": "8135", "rule_expression": "[metric,3000009]/[metric,3000010]>[num,$1] && [metric,3000003]>[num,$2]", "db_type": "Oracle", "warning_level": "4", "warning_message": "操作系统r队列{[metric,3000009]}超过CPU数量的{$1}倍且CPU使用率{[metric,3000003]}%超过{$2}%，可能存在CPU资源瓶颈"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "一般来说，日志切换后归档进程就会进行归档操作，当前最多有一个日志组未归档。如果未归档日志组数量超过2个，一般来说系统就有问题,如果归档有问题，建议检查归档目录的写IO性能是不是很慢，检查归档目录状态及错误原因", "knowledge_description": "未归档日志组数量超过2个，一般来说系统就有问题"}, {"knowledge_name": "文件系统目录使用率分析", "knowledge_description": "文件系统目录使用率分析"}, {"knowledge_name": "分析服务器IO设备的IO情况", "knowledge_description": "分析服务器IO设备的IO情况"}, {"knowledge_description": "分析归档日志大小远小于redo log文件大小"}], "description": "未归档的日志组数量超过总的日志组数量的一半，说明系统归档出现了异常，不及时处理可能导致数据库挂起", "rule_name": "no_archived_log", "id": "85", "rule_expression": "[metric,2180513]/[cib,2201001,log_count]>[num,$1]", "db_type": "Oracle", "warning_level": "4", "warning_message": "系统归档异常，未归档日志组数量{[metric,2180513]}，超过总日志组数量{[cib,2201001,log_count]}的一半，不及时处理可能导致数据库挂起"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "分析SQL"}, {"knowledge_description": "【Oracle】分析指定SQL的执行计划"}], "description": "关键SQL执行计划发生变化", "rule_name": "focus_sql_plan_change", "id": "15684", "rule_expression": "[metric,2180075][oper,==][num,$1]", "db_type": "Oracle", "warning_level": "4", "warning_message": "SQL：{[metric,2180074]}的执行计划发生变化。"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "oracle数据库连接失败分析", "knowledge_description": "oracle数据库连接失败分析"}], "description": "数据库自身故障导致连接失败", "rule_name": "oracle_db_broken_connect_failed", "id": "8442", "rule_expression": "([metric,1000000][oper,contains][str,ORA-12516]) || ([metric,1000000][oper,contains][str,ORA-00257]) || (([metric,1000000][oper,contains][str,ORA-12505] || [metric,1000000][oper,contains][str,ORA-12514]) && ([metric list in time,3,3000060][oper,all neq][cib,2201001,instance_name])) || (([metric,1000000][oper,contains][str,The Network Adapter could not establish the connection]) && ([metric in time,3,3000061]<[num,1]))", "db_type": "Oracle", "warning_level": "4", "warning_message": "数据库自身故障导致连接失败：{[metric,1000000]}"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "oracle数据库连接失败分析", "knowledge_description": "oracle数据库连接失败分析"}], "description": "KYD到oracle数据库连接配置有问题，导致连接失败", "rule_name": "oracle_dsmart_connection_error", "id": "8486", "rule_expression": "([metric,1000000][oper,contains][str,ORA-12505] || [metric,1000000][oper,contains][str,ORA-12514]) && ([metric list in time,3,3000060][oper,any eq][cib,2201001,instance_name])", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "oracle数据库连接失败分析", "knowledge_description": "oracle数据库连接失败分析"}], "description": "KYD客户端连接oracle数据库用户名错误", "rule_name": "oracle_dsmart_logon_failed", "id": "8446", "rule_expression": "([metric,1000000] [oper,contains][str,ORA-01017]) || ([metric,1000000] [oper,contains][str,ORA-28000])", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "分析SQL"}], "description": "全量SQL分析发现多个执行计划风险", "rule_name": "oracle_fsa_multiple_sql_plan", "id": "12418", "rule_expression": "[metric,1000520][oper,==][num,$1]", "db_type": "Oracle", "warning_level": "4", "warning_message": "SQL：{[metric,1000521]}的执行计划发生变化。"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "表空间使用情况检查"}, {"knowledge_name": "显示数据库ASM磁盘组信息", "knowledge_description": "显示数据库ASM磁盘组信息"}, {"knowledge_description": "用户容量分析"}], "description": "表空间容量风险高，数据库中存在表空间使用率大于90%且可用天数小于30天，存在表空间满的风险", "rule_name": "oracle_tbs_capacity_risk", "id": "8185", "rule_expression": "[metric max in time,240,2180045]==[num,$1]", "db_type": "Oracle", "warning_level": "2", "warning_message": "表空间({[metric in time,240,2180516]})容量风险高，使用率大于90%且可用天数小于30天，存在表空间满的风险"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "oracle数据库连接失败分析", "knowledge_description": "oracle数据库连接失败分析"}], "description": "oracle数据库未知连接错误", "rule_name": "oracle_unkown_connect_failed", "id": "8482", "rule_expression": "[metric,1000000][oper,notcontains][str,ORA-28001] && [metric,1000000][oper,notcontains][str,ORA-12505] && [metric,1000000][oper,notcontains][str,ORA-12514] && [metric,1000000][oper,notcontains][str,ORA-12516] && [metric,1000000][oper,notcontains][str,ORA-00257] && [metric,1000000][oper,notcontains][str,ORA-01017] && [metric,1000000][oper,notcontains][str,ORA-28000] && [metric,1000000][oper,notcontains][str,The Network Adapter could not establish the connection] && [metric,1000000][oper,notcontains][str,SQL执行失败] && [metric,1000000][oper,neq][str,连接成功]", "db_type": "Oracle", "warning_level": "4", "warning_message": "oracle数据库连接错误：{[metric,1000000]}"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据具体的登录方式判断并提供建议", "knowledge_description": "数据库存在频繁登录诊断分析"}, {"knowledge_name": "分析数据库实例在指定时间窗口内的数据库会话情况", "knowledge_description": "分析数据库实例在指定时间窗口内的数据库会话情况"}, {"knowledge_name": "检查用户过期或密码错误", "knowledge_description": "检查用户过期或密码错误"}, {"knowledge_name": "根据主机名称查询数据库会话及进程信息", "knowledge_description": "根据主机名称查询数据库会话及进程信息"}], "description": "数据库当前进程数超过process参数的95%，数据库存在连接数满的风险", "rule_name": "process_up_to_resource_limit", "id": "8043", "rule_expression": "[metric,2180049]>[cib,2201010,processes]*[num,$1]", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "实时查询表空间使用情况，不要频繁点击查询，对于超大数据库，频繁查询可能会导致数据库hang死", "knowledge_description": "实时查询表空间使用情况"}, {"knowledge_name": "Oracle数据库表空间检查", "knowledge_description": "Oracle数据库表空间检查"}, {"knowledge_name": "查询数据库表空间信息", "knowledge_description": "查询数据库表空间信息"}, {"knowledge_description": "表空间使用情况检查"}], "description": "表空间容量风险高，数据库中存在表空间使用率大于95%且可用天数小于15天，存在表空间满的风险", "rule_name": "oracle_tbs_capacity_high_rish", "id": "12453", "rule_expression": "[metric max in time,240,2180045]==[num,$1]", "db_type": "Oracle", "warning_level": "4", "warning_message": "表空间({[metric in time,240,2180046]})容量风险高，使用率大于95%且可用天数小于15天，存在表空间满的风险"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "Library cache pin/lock分析工具"}], "description": "Oracle数据库因为expression tracking导致library cache pin性能问题", "rule_name": "ora_library_cache_pin_high", "id": "13192", "rule_expression": "[metric,2180084]>[num,$1]", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_name": "数据库物理写IO性能分析", "knowledge_description": "数据库物理写IO性能分析"}, {"knowledge_name": "数据库IO功能分析", "knowledge_description": "数据库IO功能分析"}, {"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-Oracle IO分析"}], "description": "写IO性能异常同时读IO正常，可能存储复制链路存在问题", "rule_name": "ora_dbio_abnormal", "id": "8822", "rule_expression": "([metric,2184302]*[num,$1]<[metric,2184304]) && ([metric,3001011] <[num,$2]) && ([metric,2189128] <[num,$3]) && ([metric,2184301] >[num,$4])&& ([metric,3000007] <[num,$5])", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断发现的异常指标以及推荐的诊断路径下钻分析", "knowledge_description": "泛路由-Oracle闩锁分析"}, {"knowledge_name": "根据闩锁等待类别进行分类处理", "knowledge_description": "latch等待事件分析，判断数据库出现哪类闩锁等待"}], "description": "Oracle数据库的闩锁存在问题，数据库存在风险", "rule_name": "ora_latch_free", "id": "8723", "rule_expression": "([metric,2180200] <[num,$1] ||[metric,2184322] >[num,$2]) &&([metric,3000003] >[num,$3])&&([metric,3001011] >[num,$4])", "db_type": "Oracle", "warning_level": "3", "warning_message": "闩锁争用严重，数据库存在风险（当前闩锁命中率{[metric,2180200]}%,闩锁平均等待时间：{[metric,2184322]}，SYS CPU使用率{[metric,3001011] }%"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析CPU使用情况", "knowledge_description": "分析CPU使用情况"}, {"knowledge_name": "查询数据库并行执行情况", "knowledge_description": "查询数据库并行执行情况"}, {"knowledge_name": "执行数量超过5的活跃SQL", "knowledge_description": "执行数量超过5的活跃SQL"}, {"knowledge_name": "区分top sql是逻辑读还是执行次数增多进行进一步诊断", "knowledge_description": "逻辑读较多的TOP SQL"}, {"knowledge_description": "分析指标、SQL相似度"}], "description": "CPU使用率高于20%并且活跃的并行进程数量大于5个，说明并行查询可能影响了CPU资源", "rule_name": "parallel_process_result_in_cpu_problem", "id": "86", "rule_expression": "[metric,2189057]>[num,$1] && [metric,2189149]>[num,$2]", "db_type": "Oracle", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "查找解析次数比较高的SQL", "knowledge_description": "查找解析次数比较高的SQL"}, {"knowledge_name": "共享池分析", "knowledge_description": "共享池分析"}, {"knowledge_name": "判断SGA RESIZE操作是否异常", "knowledge_description": "分析SGA RESIZE操作是否异常"}, {"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle共享池分析"}, {"knowledge_description": "分析指标、SQL相似度"}], "description": "SHARED POOL的使用率高于90%并且软解析比例低于90%，none-parse cpu time比例低于90%，SQL解析可能影响数据库的健康", "rule_name": "higher_shared_pool_used_lower_soft_parsed", "id": "15687", "rule_expression": "([num,100]-[metric,2189114])>[num,$1] && [metric,2189055]<[num,$2] && [metric,2180201]<[num,$3] ", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_name": "分析服务器IO设备的IO情况", "knowledge_description": "分析服务器IO设备的IO情况"}, {"knowledge_name": "数据库IO功能分析", "knowledge_description": "数据库IO功能分析"}, {"knowledge_name": "查看top sql判断是物理读导致还是执行次数原因", "knowledge_description": "物理读较多的TOP SQL"}, {"knowledge_name": "区分top sql是逻辑读还是执行次数增多进行进一步诊断", "knowledge_description": "逻辑读较多的TOP SQL"}, {"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-Oracle IO分析"}], "description": "操作系统IO延时严重超标（超过100毫秒），数据库存在较大风险", "rule_name": "IO_latency_oracle_critical", "id": "15690", "rule_expression": "[metric,3000006]>[num,$1] && ([metric,3000100]>[num,$2] || [metric,3000101]>[num,$3])", "db_type": "Oracle", "warning_level": "4", "warning_message": "操作系统IO延时{[metric,3000006]}毫秒，数据库存在较大风险"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_name": "分析服务器IO设备的IO情况", "knowledge_description": "分析服务器IO设备的IO情况"}, {"knowledge_name": "数据库IO功能分析", "knowledge_description": "数据库IO功能分析"}, {"knowledge_name": "查看top sql判断是物理读导致还是执行次数原因", "knowledge_description": "物理读较多的TOP SQL"}, {"knowledge_name": "区分top sql是逻辑读还是执行次数增多进行进一步诊断", "knowledge_description": "逻辑读较多的TOP SQL"}, {"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-Oracle IO分析"}], "description": "操作系统IO延时过高（60ms-100ms)，数据库存在风险", "rule_name": "IO_latency_oracle_error", "id": "15691", "rule_expression": "[metric,3000006]<=[num,100] && [metric,3000006]>[num,$1] && ([metric,3000100]>[num,$2] || [metric,3000101]>[num,$3])", "db_type": "Oracle", "warning_level": "3", "warning_message": "操作系统IO延时过高（{[metric,3000006]}ms)，数据库存在风险"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-oracle活跃会话分析"}, {"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-oracle活跃会话分析"}, {"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_description": "分析指标、SQL相似度"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Oracle 因为IO问题引发活跃会话异常增长原因分析"}], "description": "IO延时过大或者异常引发了活跃会话过大", "rule_name": "IO_active_sessionI", "id": "11610", "rule_expression": "(([metric,3000006]>[num,$1]) ||([metric iname,1000105,3000006][oper,eq][str,3]))&&([metric,2189147]>[num,$2])", "db_type": "Oracle", "warning_level": "2", "warning_message": "因为IO延时增加而导致活跃会话数变大，当前IO延时{([metric,3000006]}毫秒，活跃会话数{([metric,2189147]}"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_name": "分析服务器IO设备的IO情况", "knowledge_description": "分析服务器IO设备的IO情况"}, {"knowledge_name": "数据库IO功能分析", "knowledge_description": "数据库IO功能分析"}, {"knowledge_name": "查看top sql判断是物理读导致还是执行次数原因", "knowledge_description": "物理读较多的TOP SQL"}, {"knowledge_name": "区分top sql是逻辑读还是执行次数增多进行进一步诊断", "knowledge_description": "逻辑读较多的TOP SQL"}, {"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-Oracle IO分析"}], "description": "操作系统IO延时严重超标（超过100毫秒），数据库存在较大风险", "rule_name": "IO_latency_oracle_critical", "id": "8019", "rule_expression": "[metric,3000006]>[num,$1] && ([metric,3000100]>[num,$2] || [metric,3000101]>[num,$3])", "db_type": "Oracle", "warning_level": "4", "warning_message": "操作系统IO延时{[metric,3000006]}毫秒，数据库存在较大风险"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_name": "分析服务器IO设备的IO情况", "knowledge_description": "分析服务器IO设备的IO情况"}, {"knowledge_name": "数据库IO功能分析", "knowledge_description": "数据库IO功能分析"}, {"knowledge_name": "查看top sql判断是物理读导致还是执行次数原因", "knowledge_description": "物理读较多的TOP SQL"}, {"knowledge_name": "区分top sql是逻辑读还是执行次数增多进行进一步诊断", "knowledge_description": "逻辑读较多的TOP SQL"}, {"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-Oracle IO分析"}], "description": "操作系统IO延时过高（60ms-100ms)，数据库存在风险", "rule_name": "IO_latency_oracle_error", "id": "8053", "rule_expression": "[metric,3000006]<=[num,100] && [metric,3000006]>[num,$1] && ([metric,3000100]>[num,$2] || [metric,3000101]>[num,$3])", "db_type": "Oracle", "warning_level": "3", "warning_message": "操作系统IO延时过高（{[metric,3000006]}ms)，数据库存在风险"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "scn增长率检查"}, {"knowledge_name": "通过每秒执行的事务数和SQL数，检查数据库负载情况", "knowledge_description": "每秒执行的事务数和SQL语句每秒执行数量可以从宏观上显示出数据库负载运行情况。"}], "description": "每秒calls to kcmgas平均值大于16K则系统存在SCN HEADROOM问题隐患", "rule_name": "kcmgas", "id": "5726", "rule_expression": null, "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "查找执行次数比较高的TOP SQL", "knowledge_description": "查找执行次数比较高的TOP SQL"}, {"knowledge_name": "查找解析次数比较高的SQL", "knowledge_description": "查找解析次数比较高的SQL"}, {"knowledge_name": "根据闩锁等待类别进行分类处理", "knowledge_description": "latch等待事件分析，判断数据库出现哪类闩锁等待"}, {"knowledge_name": "根据智能诊断发现的异常指标以及推荐的诊断路径下钻分析", "knowledge_description": "泛路由-Oracle闩锁分析"}], "description": "因为解析问题导致的闩锁争用", "rule_name": "latch_parse", "id": "11604", "rule_expression": "([metric,2180200] <[num,$1])&&([metric,3001011]>[num,$2])&&([metric,2189044]>[num,$3])&&([metric,2189046]>[num,$4])&&([metric,2189121]>[num,2000])&&([metric,2184315]>[num,$5]||[metric,2184314]>[num,$5])", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "显示指定时间间隔内的日志报错信息", "knowledge_description": "显示指定时间间隔内的日志报错信息"}], "description": "Oracle日志分析结果分数过低，系统可能存在隐患", "rule_name": "logana_oracle", "id": "5728", "rule_expression": null, "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "查看top sql判断是物理读导致还是执行次数原因", "knowledge_description": "物理读较多的TOP SQL"}, {"knowledge_name": "通过每秒执行的事务数和SQL数，检查数据库负载情况", "knowledge_description": "每秒执行的事务数和SQL语句每秒执行数量可以从宏观上显示出数据库负载运行情况。"}, {"knowledge_name": "检查Physical Reads Direct Per Sec指标", "knowledge_description": "检查数据库中的物理读是否由Direct path read引起的，如果是建议系统中禁用direct path read"}, {"knowledge_name": "如果存在TOP SQL，建议优化", "knowledge_description": "分析物理读较高的SQL，从awr中获取"}], "description": "每秒物理读远超出平时平均值10倍，并且超过基线0.8倍，说明应用或者数据出现了异常", "rule_name": "more_phy_read", "id": "5732", "rule_expression": "(([metric,2189004]>[num,$1]) || ([metric in time,10,1000105,2189004][oper,eq][str,3])) && ([metric,2189004]>[num,$2])", "db_type": "Oracle", "warning_level": "2", "warning_message": "每秒物理读{[metric,2189004]}超出小时平均值{$1}倍，并且超过基线{$2}倍，应用或者数据出现了异常"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "一般来说，日志切换后归档进程就会进行归档操作，当前最多有一个日志组未归档。如果未归档日志组数量超过2个，一般来说系统就有问题,如果归档有问题，建议检查归档目录的写IO性能是不是很慢，检查归档目录状态及错误原因", "knowledge_description": "未归档日志组数量超过2个，一般来说系统就有问题"}, {"knowledge_name": "文件系统目录使用率分析", "knowledge_description": "文件系统目录使用率分析"}, {"knowledge_name": "分析服务器IO设备的IO情况", "knowledge_description": "分析服务器IO设备的IO情况"}, {"knowledge_description": "分析归档日志大小远小于redo log文件大小"}], "description": "未归档的日志组数量超过总的日志组数量的一半，说明系统归档出现了异常，不及时处理可能导致数据库挂起", "rule_name": "no_archived_log", "id": "5734", "rule_expression": "[metric,2180513]/[cib,2201001,log_count]>[num,$1]", "db_type": "Oracle", "warning_level": "4", "warning_message": "系统归档异常，未归档日志组数量{[metric,2180513]}，超过总日志组数量{[cib,2201001,log_count]}的一半，不及时处理可能导致数据库挂起"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle热块冲突分析"}, {"knowledge_name": "进行Top SEGMENT和SQL分析", "knowledge_description": "如果数据库集群间出现了热块冲突，会导致RAC性能出现严重下降"}], "description": "Oracle热块冲突严重，数据库性能会受影响", "rule_name": "ora_bbw", "id": "8728", "rule_expression": "([metric,2184313] >[num,$1] || [metric,2184312] >[num,$2]) && ([metric,2189030] >[num,$3])", "db_type": "Oracle", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "oracle数据库连接失败分析", "knowledge_description": "oracle数据库连接失败分析"}], "description": "KYD到oracle数据库连接配置有问题，导致连接失败", "rule_name": "oracle_dsmart_connection_error", "id": "8487", "rule_expression": "([metric,1000000][oper,contains][str,ORA-12505] || [metric,1000000][oper,contains][str,ORA-12514]) && ([metric list in time,3,3000060][oper,any eq][cib,2201001,instance_name])", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "oracle数据库连接失败分析", "knowledge_description": "oracle数据库连接失败分析"}], "description": "KYD连接oracle数据库的用户密码过期", "rule_name": "oracle_dsmart_password_expried", "id": "8561", "rule_expression": "[metric,1000000][oper,contains][str,ORA-28001]", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "oracle数据库连接失败分析", "knowledge_description": "oracle数据库连接失败分析"}], "description": "oracle数据库未知连接错误", "rule_name": "oracle_unkown_connect_failed", "id": "8484", "rule_expression": "[metric,1000000][oper,notcontains][str,ORA-28001] && [metric,1000000][oper,notcontains][str,ORA-12505] && [metric,1000000][oper,notcontains][str,ORA-12514] && [metric,1000000][oper,notcontains][str,ORA-12516] && [metric,1000000][oper,notcontains][str,ORA-00257] && [metric,1000000][oper,notcontains][str,ORA-01017] && [metric,1000000][oper,notcontains][str,ORA-28000] && [metric,1000000][oper,notcontains][str,The Network Adapter could not establish the connection] && [metric,1000000][oper,notcontains][str,SQL执行失败] && [metric,1000000][oper,neq][str,连接成功]", "db_type": "Oracle", "warning_level": "4", "warning_message": "oracle数据库连接错误：{[metric,1000000]}"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "共享池分析", "knowledge_description": "共享池分析"}, {"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle共享池分析"}, {"knowledge_name": "共享池分析", "knowledge_description": "共享池分析"}, {"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle共享池分析"}], "description": "因为存在热表而引起rowcache等待延时过大，相关应用性能存在问题", "rule_name": "ora_hot_rowcache", "id": "8832", "rule_expression": "([metric,2184319] >[num,$1]) && ([metric,2189046] >[num,$2]) ", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "共享池分析", "knowledge_description": "共享池分析"}, {"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle共享池分析"}, {"knowledge_name": "查询sga内存组件内存变化情况", "knowledge_description": "查询sga内存组件内存变化情况"}, {"knowledge_name": "查找执行次数比较高的TOP SQL", "knowledge_description": "查找执行次数比较高的TOP SQL"}, {"knowledge_name": "数据库并发执行维度分析", "knowledge_description": "数据库并发执行维度分析"}, {"knowledge_name": "判断SGA RESIZE操作是否异常", "knowledge_description": "分析SGA RESIZE操作是否异常"}], "description": "SQL解析异常，可能引起了数据库性能问题", "rule_name": "ora_non_parse_cpu", "id": "8828", "rule_expression": "([metric,2180201]<[num,$1]) && ([metric,2189046] >[num,$2]) && (([metric,2184319] >[num,$3]) || ([metric,2184316] >[num,$4]) || ([metric,3000003] >[num,$5]))", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "判断SGA RESIZE操作是否异常", "knowledge_description": "分析SGA RESIZE操作是否异常"}, {"knowledge_name": "查询sga内存组件内存变化情况", "knowledge_description": "查询sga内存组件内存变化情况"}, {"knowledge_name": "通过SGA ADVISE找到合适的SGA建议值，并根据物理内存的大小，判断是否可以实施", "knowledge_description": "SGA调整建议"}, {"knowledge_name": "查找执行次数比较高的TOP SQL", "knowledge_description": "查找执行次数比较高的TOP SQL"}], "description": "SGA RESIZE频繁导致了共享池问题", "rule_name": "sga_resize_shared_pool", "id": "8244", "rule_expression": "([metric,2180519] > [num,$1]) && ([metric,2180055]> [cib,2201010,cpu_count]*[num,$2]) && ([metric,2180050]> [num,$3]) ", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "显示数据库负载指标情况", "knowledge_description": "显示数据库负载指标情况"}, {"knowledge_name": "查找执行次数比较高的TOP SQL", "knowledge_description": "查找执行次数比较高的TOP SQL"}], "description": "每秒事务数超过最近1小时平均值的10倍，应用可能存在异常", "rule_name": "transcation_count_raise", "id": "5744", "rule_expression": "[metric,2189003]/[metric hour avg,2189003]>[num,$1] && [metric,2189003]>[num,$2]", "db_type": "Oracle", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "查看全表扫描的对象"}, {"knowledge_name": "查看top sql判断是物理读导致还是执行次数原因", "knowledge_description": "物理读较多的TOP SQL"}, {"knowledge_name": "区分top sql是逻辑读还是执行次数增多进行进一步诊断", "knowledge_description": "逻辑读较多的TOP SQL"}, {"knowledge_name": "获取执行时间比较高的TOP SQL", "knowledge_description": "获取执行时间比较高的TOP SQL"}], "description": "Long table  scan Per Sec超过小时平均值的10倍，应用可能存在异常", "rule_name": "long_table_scan_time_raise", "id": "5730", "rule_expression": "[metric,2189036]/[metric hour avg,2189036]>[num,$1] && [metric,2189036]>[num,$2][@Denominator0,0]", "db_type": "Oracle", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "一般来说，日志切换后归档进程就会进行归档操作，当前最多有一个日志组未归档。如果未归档日志组数量超过2个，一般来说系统就有问题,如果归档有问题，建议检查归档目录的写IO性能是不是很慢，检查归档目录状态及错误原因", "knowledge_description": "未归档日志组数量超过2个，一般来说系统就有问题"}, {"knowledge_name": "文件系统目录使用率分析", "knowledge_description": "文件系统目录使用率分析"}, {"knowledge_name": "分析服务器IO设备的IO情况", "knowledge_description": "分析服务器IO设备的IO情况"}, {"knowledge_description": "分析归档日志大小远小于redo log文件大小"}], "description": "未归档的日志组数量超过总的日志组数量的一半，说明系统归档出现了异常，不及时处理可能导致数据库挂起", "rule_name": "no_archived_log", "id": "15706", "rule_expression": "[metric,2180513]/[cib,2201001,log_count]>[num,$1]", "db_type": "Oracle", "warning_level": "4", "warning_message": "系统归档异常，未归档日志组数量{[metric,2180513]}，超过总日志组数量{[cib,2201001,log_count]}的一半，不及时处理可能导致数据库挂起"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "并发SQL语句分析"}, {"knowledge_name": "显示数据库负载指标情况", "knowledge_description": "显示数据库负载指标情况"}, {"knowledge_name": "查找执行次数比较高的TOP SQL", "knowledge_description": "查找执行次数比较高的TOP SQL"}, {"knowledge_name": "区分top sql是逻辑读还是执行次数增多进行进一步诊断", "knowledge_description": "逻辑读较多的TOP SQL"}, {"knowledge_description": "分析SQL"}], "description": "某个SQL ID的SQL并发执行数量超过25，系统可能存在性能问题", "rule_name": "single_sql_exec_exceed", "id": "15736", "rule_expression": "[metric in time,10,2180511] > [num,$1]", "db_type": "Oracle", "warning_level": "3", "warning_message": "SQL ID（{[metric iname in time,10,2180511]}）的并发执行数量{[metric in time,10,2180511]}超过{$1}，系统可能存在性能问题"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "显示数据库负载指标情况", "knowledge_description": "显示数据库负载指标情况"}, {"knowledge_name": "查找执行次数比较高的TOP SQL", "knowledge_description": "查找执行次数比较高的TOP SQL"}], "description": "每秒事务数超过最近1小时平均值的10倍，应用可能存在异常", "rule_name": "transcation_count_raise", "id": "15738", "rule_expression": "[metric,2189003]/[metric hour avg,2189003]>[num,$1] && [metric,2189003]>[num,$2]", "db_type": "Oracle", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "操作系统核心资源分析", "knowledge_description": "操作系统核心资源分析"}, {"knowledge_name": "显示数据库负载指标情况", "knowledge_description": "显示数据库负载指标情况"}, {"knowledge_name": "区分top sql是逻辑读还是执行次数增多进行进一步诊断", "knowledge_description": "逻辑读较多的TOP SQL"}, {"knowledge_name": "服务器内存分析", "knowledge_description": "服务器内存分析"}, {"knowledge_name": "找出内存占用率较高的Top20进程", "knowledge_description": "找出内存占用率较高的Top20进程"}, {"knowledge_name": "操作系统核心资源分析", "knowledge_description": "操作系统核心资源分析"}, {"knowledge_name": "显示数据库负载指标情况", "knowledge_description": "显示数据库负载指标情况"}, {"knowledge_name": "区分top sql是逻辑读还是执行次数增多进行进一步诊断", "knowledge_description": "逻辑读较多的TOP SQL"}, {"knowledge_name": "服务器内存分析", "knowledge_description": "服务器内存分析"}, {"knowledge_name": "找出内存占用率较高的Top20进程", "knowledge_description": "找出内存占用率较高的Top20进程"}], "description": "内存不可用率过高，超过90%，可能存在换页和OOM Kill的风险", "rule_name": "memory_used_high_oracle", "id": "15771", "rule_expression": "[metric,3000014]>[num,$1]  && [metric,3001031]>[num,$2]", "db_type": "Oracle", "warning_level": "4", "warning_message": "指标< Mem unavailable >(内存不可用率)过高，操作系统内存出现严重不足，可能存在换页和OOM Kill的风险。内存不可用率：（{[metric,3000014]}%）且swap usage达到{[metric,3001031]}%。"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "操作系统核心资源分析", "knowledge_description": "操作系统核心资源分析"}, {"knowledge_name": "显示数据库负载指标情况", "knowledge_description": "显示数据库负载指标情况"}, {"knowledge_name": "区分top sql是逻辑读还是执行次数增多进行进一步诊断", "knowledge_description": "逻辑读较多的TOP SQL"}, {"knowledge_name": "服务器内存分析", "knowledge_description": "服务器内存分析"}, {"knowledge_name": "找出内存占用率较高的Top20进程", "knowledge_description": "找出内存占用率较高的Top20进程"}], "description": "物理内存空闲小于100M，且SWAP使用率大于30%，系统存在风险", "rule_name": "free_mem_oracle", "id": "15685", "rule_expression": "[metric,3000007]<[num,$1]*[num,1024] && [metric,3001031]>[num,$2]", "db_type": "Oracle", "warning_level": "2", "warning_message": "物理内存空闲{[metric,3000007]/[num,1024]}M，且SWAP使用率{[metric,3001031]}%，系统存在高风险"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "显示数据库ASM磁盘组信息", "knowledge_description": "显示数据库ASM磁盘组信息"}, {"knowledge_name": "及时清理归档日志", "knowledge_description": "检查Oracle 归档日志空间使用情况"}, {"knowledge_name": "显示表空间容量使用情况，以MB为单位", "knowledge_description": "显示表空间容量使用情况，以MB为单位"}, {"knowledge_name": "查询数据库表空间信息", "knowledge_description": "查询数据库表空间信息"}], "description": "ASM磁盘组使用率超过80%且预估可用天数小于7天，系统存在风险", "rule_name": "dg_usage_exceed", "id": "15565", "rule_expression": "([metric,2180533]<[num,$1]) && ([metric max in time,30,2180517]>[num,$2])", "db_type": "Oracle", "warning_level": "4", "warning_message": "ASM磁盘组{[metric max iname in time,30,2180517]}使用率{[metric max in time,30,2180517]}%，预估可用{[metric,2180533]}天"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "数据库物理写IO性能分析", "knowledge_description": "数据库物理写IO性能分析"}, {"knowledge_description": "并发SQL语句分析"}, {"knowledge_name": "通过每秒执行的事务数和SQL数，检查数据库负载情况", "knowledge_description": "每秒执行的事务数和SQL语句每秒执行数量可以从宏观上显示出数据库负载运行情况。"}, {"knowledge_name": "显示数据库中的事务信息", "knowledge_description": "显示数据库中的事务信息"}, {"knowledge_name": "数据库并发执行维度分析", "knowledge_description": "数据库并发执行维度分析"}], "description": "物理写异常增长，应用可能存在异常", "rule_name": "more_phyisical_write", "id": "15703", "rule_expression": "(([metric,2189006]>[num,$1]) || ([metric in time,10,1000105,2189006][oper,eq][str,3])) && ([metric,2189006]>[num,$2])", "db_type": "Oracle", "warning_level": "2", "warning_message": "数据库物理写异常增长或者每秒物理写超过{[num,$1]}，应用可能存在异常，告警发生时的最新物理写{[metric,2189006]}/秒"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断发现的异常指标以及推荐的诊断路径下钻分析", "knowledge_description": "泛路由-Oracle闩锁分析"}, {"knowledge_name": "根据闩锁等待类别进行分类处理", "knowledge_description": "latch等待事件分析，判断数据库出现哪类闩锁等待"}], "description": "Oracle数据库的闩锁存在问题，数据库存在风险", "rule_name": "ora_latch_free", "id": "15722", "rule_expression": "([metric,2180200] <[num,$1] ||[metric,2184322] >[num,$2]) &&([metric,3000003] >[num,$3])&&([metric,3001011] >[num,$4])", "db_type": "Oracle", "warning_level": "3", "warning_message": "闩锁争用严重，数据库存在风险（当前闩锁命中率{[metric,2180200]}%,闩锁平均等待时间：{[metric,2184322]}，SYS CPU使用率{[metric,3001011] }%"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "操作系统核心资源分析", "knowledge_description": "操作系统核心资源分析"}, {"knowledge_name": "显示数据库负载指标情况", "knowledge_description": "显示数据库负载指标情况"}, {"knowledge_name": "区分top sql是逻辑读还是执行次数增多进行进一步诊断", "knowledge_description": "逻辑读较多的TOP SQL"}, {"knowledge_name": "服务器内存分析", "knowledge_description": "服务器内存分析"}, {"knowledge_name": "找出内存占用率较高的Top20进程", "knowledge_description": "找出内存占用率较高的Top20进程"}, {"knowledge_name": "操作系统核心资源分析", "knowledge_description": "操作系统核心资源分析"}, {"knowledge_name": "显示数据库负载指标情况", "knowledge_description": "显示数据库负载指标情况"}, {"knowledge_name": "区分top sql是逻辑读还是执行次数增多进行进一步诊断", "knowledge_description": "逻辑读较多的TOP SQL"}, {"knowledge_name": "服务器内存分析", "knowledge_description": "服务器内存分析"}, {"knowledge_name": "找出内存占用率较高的Top20进程", "knowledge_description": "找出内存占用率较高的Top20进程"}], "description": "内存不可用率过高，超过90%，可能存在换页和OOM Kill的风险", "rule_name": "memory_used_high_oracle", "id": "15773", "rule_expression": "[metric,3000014]>[num,$1]  && [metric,3001031]>[num,$2]", "db_type": "Oracle", "warning_level": "4", "warning_message": "指标< Mem unavailable >(内存不可用率)过高，操作系统内存出现严重不足，可能存在换页和OOM Kill的风险。内存不可用率：（{[metric,3000014]}%）且swap usage达到{[metric,3001031]}%。"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "操作系统核心资源分析", "knowledge_description": "操作系统核心资源分析"}, {"knowledge_name": "显示数据库负载指标情况", "knowledge_description": "显示数据库负载指标情况"}, {"knowledge_name": "区分top sql是逻辑读还是执行次数增多进行进一步诊断", "knowledge_description": "逻辑读较多的TOP SQL"}, {"knowledge_name": "服务器内存分析", "knowledge_description": "服务器内存分析"}, {"knowledge_name": "找出内存占用率较高的Top20进程", "knowledge_description": "找出内存占用率较高的Top20进程"}, {"knowledge_name": "操作系统核心资源分析", "knowledge_description": "操作系统核心资源分析"}, {"knowledge_name": "显示数据库负载指标情况", "knowledge_description": "显示数据库负载指标情况"}, {"knowledge_name": "区分top sql是逻辑读还是执行次数增多进行进一步诊断", "knowledge_description": "逻辑读较多的TOP SQL"}, {"knowledge_name": "服务器内存分析", "knowledge_description": "服务器内存分析"}, {"knowledge_name": "找出内存占用率较高的Top20进程", "knowledge_description": "找出内存占用率较高的Top20进程"}], "description": "内存不可用率过高，超过90%，可能存在换页和OOM Kill的风险", "rule_name": "memory_used_high_oracle", "id": "15774", "rule_expression": "[metric,3000014]>[num,$1]  && [metric,3001031]>[num,$2]", "db_type": "Oracle", "warning_level": "4", "warning_message": "指标< Mem unavailable >(内存不可用率)过高，操作系统内存出现严重不足，可能存在换页和OOM Kill的风险。内存不可用率：（{[metric,3000014]}%）且swap usage达到{[metric,3001031]}%。"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "操作系统核心资源分析", "knowledge_description": "操作系统核心资源分析"}, {"knowledge_name": "显示数据库负载指标情况", "knowledge_description": "显示数据库负载指标情况"}, {"knowledge_name": "区分top sql是逻辑读还是执行次数增多进行进一步诊断", "knowledge_description": "逻辑读较多的TOP SQL"}, {"knowledge_name": "服务器内存分析", "knowledge_description": "服务器内存分析"}, {"knowledge_name": "找出内存占用率较高的Top20进程", "knowledge_description": "找出内存占用率较高的Top20进程"}, {"knowledge_name": "操作系统核心资源分析", "knowledge_description": "操作系统核心资源分析"}, {"knowledge_name": "显示数据库负载指标情况", "knowledge_description": "显示数据库负载指标情况"}, {"knowledge_name": "区分top sql是逻辑读还是执行次数增多进行进一步诊断", "knowledge_description": "逻辑读较多的TOP SQL"}, {"knowledge_name": "服务器内存分析", "knowledge_description": "服务器内存分析"}, {"knowledge_name": "找出内存占用率较高的Top20进程", "knowledge_description": "找出内存占用率较高的Top20进程"}], "description": "内存不可用率过高，超过90%，可能存在换页和OOM Kill的风险", "rule_name": "memory_used_high_oracle", "id": "15775", "rule_expression": "[metric,3000014]>[num,$1]  && [metric,3001031]>[num,$2]", "db_type": "Oracle", "warning_level": "4", "warning_message": "指标< Mem unavailable >(内存不可用率)过高，操作系统内存出现严重不足，可能存在换页和OOM Kill的风险。内存不可用率：（{[metric,3000014]}%）且swap usage达到{[metric,3001031]}%。"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "共享池分析", "knowledge_description": "共享池分析"}, {"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle共享池分析"}, {"knowledge_name": "根据闩锁等待类别进行分类处理", "knowledge_description": "latch等待事件分析，判断数据库出现哪类闩锁等待"}, {"knowledge_name": "分析数据库的latch hit命中率", "knowledge_description": "分析数据库的latch hit命中率"}, {"knowledge_name": "latch,mutex资源诊断工具集", "knowledge_description": "latch工具"}], "description": "因为共享池引发的闩锁性能问题", "rule_name": "latch_shared_pool", "id": "15697", "rule_expression": "([metric,2180200] <[num,$1] ||[metric,2184321] >[num,$2])&&([metric,3001011]>[num,$3])&&([metric,\t2189112]<[num,$4]||[metric,\t2189110]<[num,$4])&&([metric,2184321]>[num,$5])", "db_type": "Oracle", "warning_level": "4", "warning_message": "闩锁命中率较低（{[metric,2180200] }%），很可能是共享池引起的问题，共享池闩锁平均延时{[metric,2184321]}毫秒"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "操作系统核心资源分析", "knowledge_description": "操作系统核心资源分析"}, {"knowledge_name": "显示数据库负载指标情况", "knowledge_description": "显示数据库负载指标情况"}, {"knowledge_name": "区分top sql是逻辑读还是执行次数增多进行进一步诊断", "knowledge_description": "逻辑读较多的TOP SQL"}, {"knowledge_name": "服务器内存分析", "knowledge_description": "服务器内存分析"}, {"knowledge_name": "找出内存占用率较高的Top20进程", "knowledge_description": "找出内存占用率较高的Top20进程"}, {"knowledge_name": "操作系统核心资源分析", "knowledge_description": "操作系统核心资源分析"}, {"knowledge_name": "显示数据库负载指标情况", "knowledge_description": "显示数据库负载指标情况"}, {"knowledge_name": "区分top sql是逻辑读还是执行次数增多进行进一步诊断", "knowledge_description": "逻辑读较多的TOP SQL"}, {"knowledge_name": "服务器内存分析", "knowledge_description": "服务器内存分析"}, {"knowledge_name": "找出内存占用率较高的Top20进程", "knowledge_description": "找出内存占用率较高的Top20进程"}], "description": "内存不可用率过高，超过90%，可能存在换页和OOM Kill的风险", "rule_name": "memory_used_high_oracle", "id": "15776", "rule_expression": "[metric,3000014]>[num,$1]  && [metric,3001031]>[num,$2]", "db_type": "Oracle", "warning_level": "4", "warning_message": "指标< Mem unavailable >(内存不可用率)过高，操作系统内存出现严重不足，可能存在换页和OOM Kill的风险。内存不可用率：（{[metric,3000014]}%）且swap usage达到{[metric,3001031]}%。"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据具体的登录方式判断并提供建议", "knowledge_description": "数据库存在频繁登录诊断分析"}], "description": "每秒LOGONS数量异常，说明数据库存在频繁登录", "rule_name": "count_logon_sec", "id": "15672", "rule_expression": "([metric,2189018] >[num,$1]) ||([metric in time,10,1000105,2189018][oper,eq][str,3])", "db_type": "Oracle", "warning_level": "2", "warning_message": "每秒登录数突发异常增长，达到{[metric,2189018]}/秒"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "数据库IO功能分析", "knowledge_description": "数据库IO功能分析"}, {"knowledge_name": "数据库物理写IO性能分析", "knowledge_description": "数据库物理写IO性能分析"}, {"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_name": "显示数据库rman备份任务信息", "knowledge_description": "显示数据库rman备份任务信息"}], "description": "DB CACHE的物理读流量小于总的读IO流量的60%，说明存在大量非正常的IO操作", "rule_name": "db_cache_phy_read_ratio_low", "id": "15675", "rule_expression": "[metric,2180056]/[metric,2180061]<[num,$1] && [metric,2180061]>[num,$2]", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_name": "数据库物理写IO性能分析", "knowledge_description": "数据库物理写IO性能分析"}], "description": "DB FILE PARALLEL WRITE延时超过最近一小时平均值的5倍或者超过100毫秒的次数超过2次，说明数据库写IO存在隐患", "rule_name": "db_file_parallel_write_problem", "id": "15676", "rule_expression": "[metric,2184304]/[metric hour avg,2184304]>[num,$1] && [metric,2184304]>[num,$2] && [metric,2189006]>[num,$3]", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-oracle活跃会话分析"}, {"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-oracle活跃会话分析"}, {"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_description": "分析指标、SQL相似度"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Oracle 因为IO问题引发活跃会话异常增长原因分析"}], "description": "IO延时过大或者异常引发了活跃会话过大", "rule_name": "IO_active_sessionI", "id": "15689", "rule_expression": "(([metric,3000006]>[num,$1]) ||([metric iname,1000105,3000006][oper,eq][str,3]))&&([metric,2189147]>[num,$2])", "db_type": "Oracle", "warning_level": "2", "warning_message": "因为IO延时增加而导致活跃会话数变大，当前IO延时{([metric,3000006]}毫秒，活跃会话数{([metric,2189147]}"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "查看全表扫描的对象"}, {"knowledge_name": "查看top sql判断是物理读导致还是执行次数原因", "knowledge_description": "物理读较多的TOP SQL"}, {"knowledge_name": "区分top sql是逻辑读还是执行次数增多进行进一步诊断", "knowledge_description": "逻辑读较多的TOP SQL"}, {"knowledge_name": "获取执行时间比较高的TOP SQL", "knowledge_description": "获取执行时间比较高的TOP SQL"}], "description": "Long table  scan Per Sec超过小时平均值的10倍，应用可能存在异常", "rule_name": "long_table_scan_time_raise", "id": "15701", "rule_expression": "[metric,2189036]/[metric hour avg,2189036]>[num,$1] && [metric,2189036]>[num,$2][@Denominator0,0]", "db_type": "Oracle", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "如果log file parallel write的平均等待时间超过10ms,说明数据库日志写IO性能存在问题；如果Log file sync与log file parallel write两个等待事件的平均等待时间的差值大于10ms 或者大于log file parallel write等待事件的平均等待时间的50%，则说明数据库日志同步存在性能问题", "knowledge_description": "LOG FILE SYNC等待延时超过n毫秒，说明数据库存在性能隐患"}, {"knowledge_description": "分析归档日志大小远小于redo log文件大小"}], "description": "LOG FILE SYNC等待延时较高(10ms-60ms)，说明系统存在性能隐患", "rule_name": "log_file_sync_wait", "id": "15699", "rule_expression": "[metric,2184301]>[num,$1] && [metric,2184301]<=[num,$2] ", "db_type": "Oracle", "warning_level": "3", "warning_message": "LOG FILE SYNC等待延时较高（{[metric,2184301]}ms），系统存在性能隐患"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "区分top sql是逻辑读还是执行次数增多进行进一步诊断", "knowledge_description": "逻辑读较多的TOP SQL"}, {"knowledge_name": "通过每秒执行的事务数和SQL数，检查数据库负载情况", "knowledge_description": "每秒执行的事务数和SQL语句每秒执行数量可以从宏观上显示出数据库负载运行情况。"}, {"knowledge_name": "如果存在TOP SQL，建议优化", "knowledge_description": "分析逻辑读较高的SQL，从awr中获取"}], "description": "每秒逻辑读出现异常增长，说明应用或者数据出现了异常", "rule_name": "more_logic_read", "id": "15702", "rule_expression": "(([metric,2189030]>[num,$1]) || ([metric in time,10,1000105,2189030][oper,eq][str,3])) && ([metric,2189030]>[num,$2])", "db_type": "Oracle", "warning_level": "2", "warning_message": "每秒逻辑读出现异常增长，说明应用或者数据的应用可能出现了异常，当前逻辑读为{[metric,2189030]}/秒"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "如果log file parallel write的平均等待时间超过10ms,说明数据库日志写IO性能存在问题；如果Log file sync与log file parallel write两个等待事件的平均等待时间的差值大于10ms 或者大于log file parallel write等待事件的平均等待时间的50%，则说明数据库日志同步存在性能问题", "knowledge_description": "LOG FILE SYNC等待延时超过n毫秒，说明数据库存在性能隐患"}, {"knowledge_description": "分析归档日志大小远小于redo log文件大小"}], "description": "LOG FILE SYNC等待严重超时，数据库存在安全隐患", "rule_name": "log_file_sync_wait_critical", "id": "15700", "rule_expression": "(([metric,2184301] >[num,$1]) ||([metric in time,10,1000105,2184301][oper,eq][str,3]))&&([metric,2184301] >[num,$2])", "db_type": "Oracle", "warning_level": "4", "warning_message": "日志同步延时严重超标或者异常波动，达到{[metric,2184301]}毫秒"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "显示数据库负载指标情况", "knowledge_description": "显示数据库负载指标情况"}, {"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle共享池分析"}, {"knowledge_name": "共享池分析", "knowledge_description": "共享池分析"}, {"knowledge_name": "查找解析次数比较高的SQL", "knowledge_description": "查找解析次数比较高的SQL"}], "description": "CURSOR解析相关等待会话数超过平均值的5倍并且大于20，共享池可能存在性能隐患", "rule_name": "cursor_parse_problem", "id": "15556", "rule_expression": "[metric,2180519]/[metric hour avg,2180519]>[num,$1] && [metric,2180519]>[num,$2][@Denominator0,0]", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_name": "数据库物理写IO性能分析", "knowledge_description": "数据库物理写IO性能分析"}], "description": "DB FILE PARALLEL WRITE延时超过最近一小时平均值的5倍或者超过100毫秒的次数超过2次，说明数据库写IO存在隐患", "rule_name": "db_file_parallel_write_problem", "id": "15558", "rule_expression": "[metric,2184304]/[metric hour avg,2184304]>[num,$1] && [metric,2184304]>[num,$2] && [metric,2189006]>[num,$3]", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "scn增长率检查"}, {"knowledge_name": "通过每秒执行的事务数和SQL数，检查数据库负载情况", "knowledge_description": "每秒执行的事务数和SQL语句每秒执行数量可以从宏观上显示出数据库负载运行情况。"}], "description": "每秒calls to kcmgas平均值大于16K则系统存在SCN HEADROOM问题隐患", "rule_name": "kcmgas", "id": "15575", "rule_expression": null, "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据具体的登录方式判断并提供建议", "knowledge_description": "数据库存在频繁登录诊断分析"}], "description": "每秒LOGONS的数量超过30个，数据库存在安全风险 ", "rule_name": "count_logon_sec_critical", "id": "17300", "rule_expression": "([metric,2189018] >[num,$1]) ||([metric in time,10,1000105,2189018][oper,eq][str,3])", "db_type": "Oracle", "warning_level": "3", "warning_message": "每秒登录数突发异常增长，达到{[metric,2189018]}/秒"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "分析归档日志大小远小于redo log文件大小"}, {"knowledge_name": "显示数据库每天产生的归档日志的大小", "knowledge_description": "显示数据库每天产生的归档日志的大小"}, {"knowledge_name": "一般来说，日志切换后归档进程就会进行归档操作，当前最多有一个日志组未归档。如果未归档日志组数量超过2个，一般来说系统就有问题,如果归档有问题，建议检查归档目录的写IO性能是不是很慢，检查归档目录状态及错误原因", "knowledge_description": "未归档日志组数量超过2个，一般来说系统就有问题"}, {"knowledge_name": "如果一小时内日志切换次数超过12次，说明切换频率过高，建议增大在线日志文件", "knowledge_description": "一小时内日志切换次数"}, {"knowledge_name": "分析日志切换频率是否合理", "knowledge_description": "分析日志切换频率是否合理"}], "description": "归档日志远小于redo日志文件大小，并且日志切换过于频繁", "rule_name": "archivelog_less_redo", "id": "17290", "rule_expression": "[metric,2180542]/[cib,2201000,redo_size]<[num,$1] && [metric,2180515]>[num,$2]", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "显示数据库每天产生的归档日志的大小", "knowledge_description": "显示数据库每天产生的归档日志的大小"}, {"knowledge_name": "及时清理归档日志", "knowledge_description": "检查Oracle 归档日志空间使用情况"}], "description": "归档空间使用率超过90%并且预估可用时间小于3天，数据库存在归档满的风险。", "rule_name": "archive_space_exceed", "id": "17291", "rule_expression": "[metric,2180521]>[num,$1] && [metric,2180523]<[num,$2]", "db_type": "Oracle", "warning_level": "4", "warning_message": "数据库存在归档满的风险，归档空间使用率{[metric,2180521]}%，预估可用时间{[metric,2180523]}天"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "显示数据库ASM磁盘组信息", "knowledge_description": "显示数据库ASM磁盘组信息"}, {"knowledge_description": "显示指定时间间隔内的日志信息"}], "description": "ASM磁盘组中出现offline的磁盘", "rule_name": "asm_disk_offline", "id": "17292", "rule_expression": "[metric max in time,30,2180526]>[num,$1]", "db_type": "Oracle", "warning_level": "4", "warning_message": "ASM磁盘组中出现offline的磁盘({[metric max iname in time,30,2180526]})"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "通过oracle等待事件链分析得到导致等待事件的根会话", "knowledge_description": "生成Oracle数据库实例的会话等待链"}, {"knowledge_name": "TX锁分析", "knowledge_description": "TX锁分析"}, {"knowledge_name": "显示数据库当前实例锁信息", "knowledge_description": "显示数据库当前实例锁信息"}, {"knowledge_name": "根据闩锁等待类别进行分类处理", "knowledge_description": "latch等待事件分析，判断数据库出现哪类闩锁等待"}, {"knowledge_id": 182, "knowledge_name": "Unknown", "knowledge_description": "Unknown"}], "description": "被阻塞的会话数过多（超过30个），系统可能存在隐患", "rule_name": "blocking_session", "id": "17294", "rule_expression": "([metric,2180518] >[num,$1]) ||([metric in time,10,1000105,2180518][oper,eq][str,3])", "db_type": "Oracle", "warning_level": "4", "warning_message": "被阻塞的会话数出现异常增长或者达到{[num,$1]}个，最新的阻塞会话数为{[metric,2180518]}"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "通过SGA ADVISE找到合适的SGA建议值，并根据物理内存的大小，判断是否可以实施", "knowledge_description": "SGA调整建议"}, {"knowledge_name": "db cache调整建议", "knowledge_description": "db cache调整建议"}, {"knowledge_name": "查看top sql判断是物理读导致还是执行次数原因", "knowledge_description": "物理读较多的TOP SQL"}, {"knowledge_name": "对未分区的表进行分区，碎片严重的对象要重新整理", "knowledge_description": "找出数据库物理读较高的segment，判断其是否分区及是否存在碎片"}, {"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}], "description": "Buffer Hit %低于90%说明系统存在问题", "rule_name": "buffer_cache_hit_ratio", "id": "17295", "rule_expression": "[metric,2189000]<[num,$1] && [metric,2189030]>[num,$2]", "db_type": "Oracle", "warning_level": "3", "warning_message": "Buffer Hit {[metric,2189000]}%，低于{$1}%，系统存在问题"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "运维对象连接失败，请检查运维对象是否down", "knowledge_description": "运维对象连接状态分析"}, {"knowledge_name": "操作系统核心资源分析", "knowledge_description": "操作系统核心资源分析"}, {"knowledge_name": "显示数据库负载指标情况", "knowledge_description": "显示数据库负载指标情况"}, {"knowledge_name": "数据库后台进程错误及等待事件诊断", "knowledge_description": "数据库后台进程错误及等待事件诊断"}, {"knowledge_name": "分析数据库控制文件等待事件延时情况", "knowledge_description": "分析数据库控制文件等待事件延时情况"}, {"knowledge_name": "通过oracle等待事件链分析得到导致等待事件的根会话", "knowledge_description": "生成Oracle数据库实例的会话等待链"}, {"knowledge_name": "服务器内存分析", "knowledge_description": "服务器内存分析"}, {"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}], "description": "数据库采集任务严重超时，数据库存在严重性能风险", "rule_name": "collector_exec_slow_oracle", "id": "17296", "rule_expression": "[metric,1000000][oper,eq][str,连接成功] && [metric,1000101] >([metric hour avg,1000101]*[num,$1])", "db_type": "Oracle", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "运维对象连接失败，请检查运维对象是否down", "knowledge_description": "运维对象连接状态分析"}, {"knowledge_name": "操作系统核心资源分析", "knowledge_description": "操作系统核心资源分析"}, {"knowledge_name": "显示数据库负载指标情况", "knowledge_description": "显示数据库负载指标情况"}, {"knowledge_name": "通过oracle等待事件链分析得到导致等待事件的根会话", "knowledge_description": "生成Oracle数据库实例的会话等待链"}, {"knowledge_name": "服务器内存分析", "knowledge_description": "服务器内存分析"}, {"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_name": "分析数据库实例在指定时间窗口活跃会话的活动特征，并进行异常诊断： 1、高并发/执行时间长的SQL语句 2、主要等待事件 3、影响最大的会话 4、是否存在HANG状况及可能原因", "knowledge_description": "分析数据库实例情况"}], "description": "数据库连接严重超时，数据库存在巨大风险", "rule_name": "connect_slow_oracle", "id": "17297", "rule_expression": "([metric,1000102] >([metric hour avg,1000102]*[num,$1]))&& (([metric,1000102] >[num,$2])||([metric in time,10,1000105,1000102][oper,eq][str,3]))", "db_type": "Oracle", "warning_level": "2", "warning_message": "客户端连接数据库时间出现异常（超过平均水平10倍或者出现其他异常），目前值为{[metric,1000102]}毫秒"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle RAC分析"}, {"knowledge_name": "对找出的SQL语句进行优化", "knowledge_description": "查找集群等待时间比较大的SQL语句"}, {"knowledge_name": "对未分区的对象进行分区，对碎片严重的对象进行重组整理", "knowledge_description": "找出数据库集群间心跳流量比较大的SEGMENT，检查是否分区并对其进行碎片分析"}, {"knowledge_name": "一般来说，平均等待时间应该小于10毫秒，如果某些指标的平均等待时间超过20毫秒，则说明系统有问题。分析所有超出指标范围的指标项", "knowledge_description": "分析数据库集群相关等待事件，判断问题出在哪些方面"}, {"knowledge_name": "操作系统网络层面丢包分析", "knowledge_description": "操作系统网络层面丢包分析"}, {"knowledge_name": "操作系统网络流量分析", "knowledge_description": "操作系统网络流量分析"}, {"knowledge_description": "Ping延迟及时钟差异"}], "description": "Estd Interconnect traffic (KB)过高，系统性能可能会有问题", "rule_name": "connect_traffic", "id": "17298", "rule_expression": null, "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据具体的登录方式判断并提供建议", "knowledge_description": "数据库存在频繁登录诊断分析"}], "description": "每秒LOGONS数量异常，说明数据库存在频繁登录", "rule_name": "count_logon_sec", "id": "17299", "rule_expression": "([metric,2189018] >[num,$1]) ||([metric in time,10,1000105,2189018][oper,eq][str,3])", "db_type": "Oracle", "warning_level": "2", "warning_message": "每秒登录数突发异常增长，达到{[metric,2189018]}/秒"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "显示数据库负载指标情况", "knowledge_description": "显示数据库负载指标情况"}, {"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle共享池分析"}, {"knowledge_name": "共享池分析", "knowledge_description": "共享池分析"}, {"knowledge_name": "查找解析次数比较高的SQL", "knowledge_description": "查找解析次数比较高的SQL"}], "description": "CURSOR解析相关等待会话数超过平均值的5倍并且大于20，共享池可能存在性能隐患", "rule_name": "cursor_parse_problem", "id": "17301", "rule_expression": "[metric,2180519]/[metric hour avg,2180519]>[num,$1] && [metric,2180519]>[num,$2][@Denominator0,0]", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "数据库IO功能分析", "knowledge_description": "数据库IO功能分析"}, {"knowledge_name": "数据库物理写IO性能分析", "knowledge_description": "数据库物理写IO性能分析"}, {"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_name": "显示数据库rman备份任务信息", "knowledge_description": "显示数据库rman备份任务信息"}], "description": "DB CACHE的物理读流量小于总的读IO流量的60%，说明存在大量非正常的IO操作", "rule_name": "db_cache_phy_read_ratio_low", "id": "17302", "rule_expression": "[metric,2180056]/[metric,2180061]<[num,$1] && [metric,2180061]>[num,$2]", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_name": "数据库物理写IO性能分析", "knowledge_description": "数据库物理写IO性能分析"}], "description": "DB FILE PARALLEL WRITE延时超过最近一小时平均值的5倍或者超过100毫秒的次数超过2次，说明数据库写IO存在隐患", "rule_name": "db_file_parallel_write_problem", "id": "17303", "rule_expression": "[metric,2184304]/[metric hour avg,2184304]>[num,$1] && [metric,2184304]>[num,$2] && [metric,2189006]>[num,$3]", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析数据库实例在指定时间窗口内的数据库会话情况", "knowledge_description": "分析数据库实例在指定时间窗口内的数据库会话情况"}, {"knowledge_name": "查找执行次数比较高的TOP SQL", "knowledge_description": "查找执行次数比较高的TOP SQL"}, {"knowledge_name": "通过每秒执行的事务数和SQL数，检查数据库负载情况", "knowledge_description": "每秒执行的事务数和SQL语句每秒执行数量可以从宏观上显示出数据库负载运行情况。"}, {"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-oracle活跃会话分析"}, {"knowledge_name": "数据库负载模型相关指标分析", "knowledge_description": "数据库负载模型相关指标分析"}, {"knowledge_name": "执行数量超过5的活跃SQL", "knowledge_description": "执行数量超过5的活跃SQL"}], "description": "活跃会话过多（超过70个）,数据库健康可能存在问题", "rule_name": "avg_active_session", "id": "17293", "rule_expression": "[metric,2189147]>[num,$1] &&( [metric,2189147]<[cib,2201010,sessions])", "db_type": "Oracle", "warning_level": "3", "warning_message": "活跃会话数{[metric,2189147]}，超过{$1}个数据库健康可能存在问题"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析db file sequential read指标 ，如果大于10毫秒说明IO性能已经受到影响", "knowledge_description": "分析db file sequential read指标 ，如果大于10毫秒说明IO性能已经受到影响"}, {"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_name": "数据库物理读过高时分析物理读过高的SQL和SEGMENT", "knowledge_description": "数据库物理读过高时分析物理读过高的SQL和SEGMENT"}, {"knowledge_name": "查看top sql判断是物理读导致还是执行次数原因", "knowledge_description": "物理读较多的TOP SQL"}], "description": "DB FILE SEQUENTIAL READ延时超过最近1小时平均值的5倍，数据库读IO存在隐患", "rule_name": "db_file_seq_read", "id": "17304", "rule_expression": "[metric,2184302]/[metric hour avg,2184302]>[num,$1] && [metric,2184302]>[num,$2] && [metric,2189004]>[num,$3]", "db_type": "Oracle", "warning_level": "3", "warning_message": "DB FILE SEQUENTIAL READ延时（{[metric,2184302]}）ms，超过最近1小时平均值的{$1}倍，数据库读IO存在隐患"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "数据库IO功能分析", "knowledge_description": "数据库IO功能分析"}, {"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_name": "检查Physical Reads Direct Per Sec指标", "knowledge_description": "检查数据库中的物理读是否由Direct path read引起的，如果是建议系统中禁用direct path read"}], "description": "数据库IO延时过大，DBIO以外的IO比例过大", "rule_name": "dbio_cacheio_ratio_low", "id": "17305", "rule_expression": "[metric,2180056]/[metric,2180061]<[num,$1] && [metric,2180061]>[num,$2]  && [metric,2184302]>[num,$3]", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据具体的登录方式判断并提供建议", "knowledge_description": "数据库存在频繁登录诊断分析"}, {"knowledge_name": "检查用户过期或密码错误", "knowledge_description": "检查用户过期或密码错误"}], "description": "oracle数据库的进程数比会话数多25%以上，说明Oracle数据库的登录存在问题，可能有应用不停在重试登录", "rule_name": "db_process_count_greater_than_db_session_count", "id": "17306", "rule_expression": "([metric,2180049]-[metric,2180073]-[metric,2180536]+[metric,2180537]-[metric,2180538]+[metric,2180539])>([metric,2180073]*[num,$1]) && ([metric,2180049]>[num,$2])", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "一般来说，日志切换后归档进程就会进行归档操作，当前最多有一个日志组未归档。如果未归档日志组数量超过2个，一般来说系统就有问题,如果归档有问题，建议检查归档目录的写IO性能是不是很慢，检查归档目录状态及错误原因", "knowledge_description": "未归档日志组数量超过2个，一般来说系统就有问题"}], "description": "快速恢复区配置大小大于快速恢复区目的地实际可用大小", "rule_name": "db_recovery_dest_size_incorrect", "id": "17307", "rule_expression": "[metric,2180534]>([metric,2180525]+[metric,2180535])", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据具体的登录方式判断并提供建议", "knowledge_description": "数据库存在频繁登录诊断分析"}, {"knowledge_name": "检查用户过期或密码错误", "knowledge_description": "检查用户过期或密码错误"}], "description": "使用独立模式的Oracle数据库的会话数比进程数多出20%，数据库系统可能存在隐患", "rule_name": "db_session_count_greater_than_db_process_count", "id": "17308", "rule_expression": "([metric,2180073]-[metric,2180537]-[metric,2180539]-[metric,2180049]+[metric,2180536]+[metric,2180538])>([metric,2180049]*[num,$1]) && ([metric,2180073]>[num,$2])", "db_type": "Oracle", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "检查DG环境"}], "description": "DG备库延迟超过1800秒或存在GAP", "rule_name": "dg_standby_delay_more", "id": "17309", "rule_expression": "[metric in time ,10,2180066]-[cib,2201001,apply_delay]>[num,$1] || [metric in time ,10,2180067]>[num,$2]", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "显示数据库ASM磁盘组信息", "knowledge_description": "显示数据库ASM磁盘组信息"}, {"knowledge_name": "及时清理归档日志", "knowledge_description": "检查Oracle 归档日志空间使用情况"}, {"knowledge_name": "显示表空间容量使用情况，以MB为单位", "knowledge_description": "显示表空间容量使用情况，以MB为单位"}, {"knowledge_name": "查询数据库表空间信息", "knowledge_description": "查询数据库表空间信息"}], "description": "ASM磁盘组使用率超过80%且预估可用天数小于7天，系统存在风险", "rule_name": "dg_usage_exceed", "id": "17310", "rule_expression": "([metric,2180533]<[num,$1]) && ([metric max in time,30,2180517]>[num,$2])", "db_type": "Oracle", "warning_level": "4", "warning_message": "ASM磁盘组{[metric max iname in time,30,2180517]}使用率{[metric max in time,30,2180517]}%，预估可用{[metric,2180533]}天"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "分析SQL"}, {"knowledge_description": "【Oracle】分析指定SQL的执行计划"}], "description": "关键SQL执行计划发生变化", "rule_name": "focus_sql_plan_change", "id": "17311", "rule_expression": "[metric,2180075][oper,==][num,$1]", "db_type": "Oracle", "warning_level": "4", "warning_message": "SQL：{[metric,2180074]}的执行计划发生变化。"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "操作系统核心资源分析", "knowledge_description": "操作系统核心资源分析"}, {"knowledge_name": "显示数据库负载指标情况", "knowledge_description": "显示数据库负载指标情况"}, {"knowledge_name": "区分top sql是逻辑读还是执行次数增多进行进一步诊断", "knowledge_description": "逻辑读较多的TOP SQL"}, {"knowledge_name": "服务器内存分析", "knowledge_description": "服务器内存分析"}, {"knowledge_name": "找出内存占用率较高的Top20进程", "knowledge_description": "找出内存占用率较高的Top20进程"}], "description": "物理内存空闲小于100M，且SWAP使用率大于30%，系统存在风险", "rule_name": "free_mem_oracle", "id": "17312", "rule_expression": "[metric,3000007]<[num,$1]*[num,1024] && [metric,3001031]>[num,$2]", "db_type": "Oracle", "warning_level": "2", "warning_message": "物理内存空闲{[metric,3000007]/[num,1024]}M，且SWAP使用率{[metric,3001031]}%，系统存在高风险"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "查找解析次数比较高的SQL", "knowledge_description": "查找解析次数比较高的SQL"}, {"knowledge_name": "共享池分析", "knowledge_description": "共享池分析"}, {"knowledge_name": "判断SGA RESIZE操作是否异常", "knowledge_description": "分析SGA RESIZE操作是否异常"}, {"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle共享池分析"}, {"knowledge_description": "分析指标、SQL相似度"}], "description": "SHARED POOL的使用率高于90%并且软解析比例低于90%，none-parse cpu time比例低于90%，SQL解析可能影响数据库的健康", "rule_name": "higher_shared_pool_used_lower_soft_parsed", "id": "17314", "rule_expression": "([num,100]-[metric,2189114])>[num,$1] && [metric,2189055]<[num,$2] && [metric,2180201]<[num,$3] ", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "TX锁分析", "knowledge_description": "TX锁分析"}, {"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_name": "显示数据库负载指标情况", "knowledge_description": "显示数据库负载指标情况"}], "description": "每秒索引叶节点分裂数量超过10个，并且单块读响应时间超过30毫秒，数据库可能存在TX锁恶化的风险", "rule_name": "index_split_lead_to_tx_enq", "id": "17315", "rule_expression": "[metric,2189083]>[num,$1] && [metric,2184302]>[num,$2]", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-oracle活跃会话分析"}, {"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-oracle活跃会话分析"}, {"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_description": "分析指标、SQL相似度"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Oracle 因为IO问题引发活跃会话异常增长原因分析"}], "description": "IO延时过大或者异常引发了活跃会话过大", "rule_name": "IO_active_sessionI", "id": "17316", "rule_expression": "(([metric,3000006]>[num,$1]) ||([metric iname,1000105,3000006][oper,eq][str,3]))&&([metric,2189147]>[num,$2])", "db_type": "Oracle", "warning_level": "2", "warning_message": "因为IO延时增加而导致活跃会话数变大，当前IO延时{([metric,3000006]}毫秒，活跃会话数{([metric,2189147]}"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_name": "分析服务器IO设备的IO情况", "knowledge_description": "分析服务器IO设备的IO情况"}, {"knowledge_name": "数据库IO功能分析", "knowledge_description": "数据库IO功能分析"}, {"knowledge_name": "查看top sql判断是物理读导致还是执行次数原因", "knowledge_description": "物理读较多的TOP SQL"}, {"knowledge_name": "区分top sql是逻辑读还是执行次数增多进行进一步诊断", "knowledge_description": "逻辑读较多的TOP SQL"}, {"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-Oracle IO分析"}], "description": "操作系统IO延时严重超标（超过100毫秒），数据库存在较大风险", "rule_name": "IO_latency_oracle_critical", "id": "17317", "rule_expression": "[metric,3000006]>[num,$1] && ([metric,3000100]>[num,$2] || [metric,3000101]>[num,$3])", "db_type": "Oracle", "warning_level": "4", "warning_message": "操作系统IO延时{[metric,3000006]}毫秒，数据库存在较大风险"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析CPU使用情况", "knowledge_description": "分析CPU使用情况"}, {"knowledge_name": "查询数据库并行执行情况", "knowledge_description": "查询数据库并行执行情况"}, {"knowledge_name": "执行数量超过5的活跃SQL", "knowledge_description": "执行数量超过5的活跃SQL"}, {"knowledge_name": "区分top sql是逻辑读还是执行次数增多进行进一步诊断", "knowledge_description": "逻辑读较多的TOP SQL"}, {"knowledge_description": "分析指标、SQL相似度"}], "description": "CPU使用率高于20%并且活跃的并行进程数量大于5个，说明并行查询可能影响了CPU资源", "rule_name": "parallel_process_result_in_cpu_problem", "id": "17353", "rule_expression": "[metric,2189057]>[num,$1] && [metric,2189149]>[num,$2]", "db_type": "Oracle", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_name": "分析服务器IO设备的IO情况", "knowledge_description": "分析服务器IO设备的IO情况"}, {"knowledge_name": "数据库IO功能分析", "knowledge_description": "数据库IO功能分析"}, {"knowledge_name": "查看top sql判断是物理读导致还是执行次数原因", "knowledge_description": "物理读较多的TOP SQL"}, {"knowledge_name": "区分top sql是逻辑读还是执行次数增多进行进一步诊断", "knowledge_description": "逻辑读较多的TOP SQL"}, {"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-Oracle IO分析"}], "description": "操作系统IO延时过高（60ms-100ms)，数据库存在风险", "rule_name": "IO_latency_oracle_error", "id": "17318", "rule_expression": "[metric,3000006]<=[num,100] && [metric,3000006]>[num,$1] && ([metric,3000100]>[num,$2] || [metric,3000101]>[num,$3])", "db_type": "Oracle", "warning_level": "3", "warning_message": "操作系统IO延时过高（{[metric,3000006]}ms)，数据库存在风险"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "scn增长率检查"}, {"knowledge_name": "通过每秒执行的事务数和SQL数，检查数据库负载情况", "knowledge_description": "每秒执行的事务数和SQL语句每秒执行数量可以从宏观上显示出数据库负载运行情况。"}], "description": "每秒calls to kcmgas平均值大于16K则系统存在SCN HEADROOM问题隐患", "rule_name": "kcmgas", "id": "17319", "rule_expression": null, "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle热块冲突分析"}, {"knowledge_name": "区分top sql是逻辑读还是执行次数增多进行进一步诊断", "knowledge_description": "逻辑读较多的TOP SQL"}, {"knowledge_name": "db cache调整建议", "knowledge_description": "db cache调整建议"}], "description": "因为CBC引发的闩锁争用", "rule_name": "latch_cbc", "id": "17321", "rule_expression": "([metric,2180200] <[num,$1] ||[metric,2184321] >[num,$2])&&([metric,3001011]>[num,$3])&&([metric,\t2184313]>[num,$4])&&([metric,2184312]>[num,$5])", "db_type": "Oracle", "warning_level": "4", "warning_message": "CACHE BUFFER CHAINS延时（{[metric,2184312]}ms）严重，闩锁存在争用"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据闩锁等待类别进行分类处理", "knowledge_description": "latch等待事件分析，判断数据库出现哪类闩锁等待"}, {"knowledge_name": "分析数据库的latch hit命中率", "knowledge_description": "分析数据库的latch hit命中率"}, {"knowledge_name": "查询指定数据库会话的Latch持有信息", "knowledge_description": "查询指定数据库会话的Latch持有信息"}, {"knowledge_name": "latch,mutex资源诊断工具集", "knowledge_description": "latch工具"}, {"knowledge_name": "根据智能诊断发现的异常指标以及推荐的诊断路径下钻分析", "knowledge_description": "泛路由-Oracle闩锁分析"}, {"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle热块冲突分析"}, {"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle RAC分析"}, {"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle共享池分析"}, {"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-Oracle IO分析"}], "description": "闩锁命中率异常，系统存在并发风险", "rule_name": "latch_hit_ration", "id": "17322", "rule_expression": "([metric,2180200] <[num,$1]) ||([metric in time,10,1000105,2180200][oper,eq][str,1])", "db_type": "Oracle", "warning_level": "3", "warning_message": "闩锁命中率出现异常，达到{[metric,2180200]}%。"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "查找执行次数比较高的TOP SQL", "knowledge_description": "查找执行次数比较高的TOP SQL"}, {"knowledge_name": "查找解析次数比较高的SQL", "knowledge_description": "查找解析次数比较高的SQL"}, {"knowledge_name": "根据闩锁等待类别进行分类处理", "knowledge_description": "latch等待事件分析，判断数据库出现哪类闩锁等待"}, {"knowledge_name": "根据智能诊断发现的异常指标以及推荐的诊断路径下钻分析", "knowledge_description": "泛路由-Oracle闩锁分析"}], "description": "因为解析问题导致的闩锁争用", "rule_name": "latch_parse", "id": "17323", "rule_expression": "([metric,2180200] <[num,$1])&&([metric,3001011]>[num,$2])&&([metric,2189044]>[num,$3])&&([metric,2189046]>[num,$4])&&([metric,2189121]>[num,2000])&&([metric,2184315]>[num,$5]||[metric,2184314]>[num,$5])", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "共享池分析", "knowledge_description": "共享池分析"}, {"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle共享池分析"}, {"knowledge_name": "根据闩锁等待类别进行分类处理", "knowledge_description": "latch等待事件分析，判断数据库出现哪类闩锁等待"}, {"knowledge_name": "分析数据库的latch hit命中率", "knowledge_description": "分析数据库的latch hit命中率"}, {"knowledge_name": "latch,mutex资源诊断工具集", "knowledge_description": "latch工具"}], "description": "因为共享池引发的闩锁性能问题", "rule_name": "latch_shared_pool", "id": "17324", "rule_expression": "([metric,2180200] <[num,$1] ||[metric,2184321] >[num,$2])&&([metric,3001011]>[num,$3])&&([metric,\t2189112]<[num,$4]||[metric,\t2189110]<[num,$4])&&([metric,2184321]>[num,$5])", "db_type": "Oracle", "warning_level": "4", "warning_message": "闩锁命中率较低（{[metric,2180200] }%），很可能是共享池引起的问题，共享池闩锁平均延时{[metric,2184321]}毫秒"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "显示指定时间间隔内的日志报错信息", "knowledge_description": "显示指定时间间隔内的日志报错信息"}], "description": "Oracle日志分析结果分数过低，系统可能存在隐患", "rule_name": "logana_oracle", "id": "17325", "rule_expression": null, "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "如果log file parallel write的平均等待时间超过10ms,说明数据库日志写IO性能存在问题；如果Log file sync与log file parallel write两个等待事件的平均等待时间的差值大于10ms 或者大于log file parallel write等待事件的平均等待时间的50%，则说明数据库日志同步存在性能问题", "knowledge_description": "LOG FILE SYNC等待延时超过n毫秒，说明数据库存在性能隐患"}, {"knowledge_description": "分析归档日志大小远小于redo log文件大小"}], "description": "LOG FILE SYNC等待延时较高(10ms-60ms)，说明系统存在性能隐患", "rule_name": "log_file_sync_wait", "id": "17326", "rule_expression": "[metric,2184301]>[num,$1] && [metric,2184301]<=[num,$2] ", "db_type": "Oracle", "warning_level": "3", "warning_message": "LOG FILE SYNC等待延时较高（{[metric,2184301]}ms），系统存在性能隐患"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "查看全表扫描的对象"}, {"knowledge_name": "查看top sql判断是物理读导致还是执行次数原因", "knowledge_description": "物理读较多的TOP SQL"}, {"knowledge_name": "区分top sql是逻辑读还是执行次数增多进行进一步诊断", "knowledge_description": "逻辑读较多的TOP SQL"}, {"knowledge_name": "获取执行时间比较高的TOP SQL", "knowledge_description": "获取执行时间比较高的TOP SQL"}], "description": "Long table  scan Per Sec超过小时平均值的10倍，应用可能存在异常", "rule_name": "long_table_scan_time_raise", "id": "17328", "rule_expression": "[metric,2189036]/[metric hour avg,2189036]>[num,$1] && [metric,2189036]>[num,$2][@Denominator0,0]", "db_type": "Oracle", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "操作系统核心资源分析", "knowledge_description": "操作系统核心资源分析"}, {"knowledge_name": "显示数据库负载指标情况", "knowledge_description": "显示数据库负载指标情况"}, {"knowledge_name": "区分top sql是逻辑读还是执行次数增多进行进一步诊断", "knowledge_description": "逻辑读较多的TOP SQL"}, {"knowledge_name": "服务器内存分析", "knowledge_description": "服务器内存分析"}, {"knowledge_name": "找出内存占用率较高的Top20进程", "knowledge_description": "找出内存占用率较高的Top20进程"}, {"knowledge_name": "操作系统核心资源分析", "knowledge_description": "操作系统核心资源分析"}, {"knowledge_name": "显示数据库负载指标情况", "knowledge_description": "显示数据库负载指标情况"}, {"knowledge_name": "区分top sql是逻辑读还是执行次数增多进行进一步诊断", "knowledge_description": "逻辑读较多的TOP SQL"}, {"knowledge_name": "服务器内存分析", "knowledge_description": "服务器内存分析"}, {"knowledge_name": "找出内存占用率较高的Top20进程", "knowledge_description": "找出内存占用率较高的Top20进程"}], "description": "内存不可用率过高，超过90%，可能存在换页和OOM Kill的风险", "rule_name": "memory_used_high_oracle", "id": "17329", "rule_expression": "[metric,3000014]>[num,$1]  && [metric,3001031]>[num,$2]", "db_type": "Oracle", "warning_level": "4", "warning_message": "指标< Mem unavailable >(内存不可用率)过高，操作系统内存出现严重不足，可能存在换页和OOM Kill的风险。内存不可用率：（{[metric,3000014]}%）且swap usage达到{[metric,3001031]}%。"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "区分top sql是逻辑读还是执行次数增多进行进一步诊断", "knowledge_description": "逻辑读较多的TOP SQL"}, {"knowledge_name": "通过每秒执行的事务数和SQL数，检查数据库负载情况", "knowledge_description": "每秒执行的事务数和SQL语句每秒执行数量可以从宏观上显示出数据库负载运行情况。"}, {"knowledge_name": "如果存在TOP SQL，建议优化", "knowledge_description": "分析逻辑读较高的SQL，从awr中获取"}], "description": "每秒逻辑读出现异常增长，说明应用或者数据出现了异常", "rule_name": "more_logic_read", "id": "17330", "rule_expression": "(([metric,2189030]>[num,$1]) || ([metric in time,10,1000105,2189030][oper,eq][str,3])) && ([metric,2189030]>[num,$2])", "db_type": "Oracle", "warning_level": "2", "warning_message": "每秒逻辑读出现异常增长，说明应用或者数据的应用可能出现了异常，当前逻辑读为{[metric,2189030]}/秒"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "数据库物理写IO性能分析", "knowledge_description": "数据库物理写IO性能分析"}, {"knowledge_description": "并发SQL语句分析"}, {"knowledge_name": "通过每秒执行的事务数和SQL数，检查数据库负载情况", "knowledge_description": "每秒执行的事务数和SQL语句每秒执行数量可以从宏观上显示出数据库负载运行情况。"}, {"knowledge_name": "显示数据库中的事务信息", "knowledge_description": "显示数据库中的事务信息"}, {"knowledge_name": "数据库并发执行维度分析", "knowledge_description": "数据库并发执行维度分析"}], "description": "物理写异常增长，应用可能存在异常", "rule_name": "more_phyisical_write", "id": "17331", "rule_expression": "(([metric,2189006]>[num,$1]) || ([metric in time,10,1000105,2189006][oper,eq][str,3])) && ([metric,2189006]>[num,$2])", "db_type": "Oracle", "warning_level": "2", "warning_message": "数据库物理写异常增长或者每秒物理写超过{[num,$1]}，应用可能存在异常，告警发生时的最新物理写{[metric,2189006]}/秒"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "查看top sql判断是物理读导致还是执行次数原因", "knowledge_description": "物理读较多的TOP SQL"}, {"knowledge_name": "通过每秒执行的事务数和SQL数，检查数据库负载情况", "knowledge_description": "每秒执行的事务数和SQL语句每秒执行数量可以从宏观上显示出数据库负载运行情况。"}, {"knowledge_name": "检查Physical Reads Direct Per Sec指标", "knowledge_description": "检查数据库中的物理读是否由Direct path read引起的，如果是建议系统中禁用direct path read"}, {"knowledge_name": "如果存在TOP SQL，建议优化", "knowledge_description": "分析物理读较高的SQL，从awr中获取"}], "description": "每秒物理读远超出平时平均值10倍，并且超过基线0.8倍，说明应用或者数据出现了异常", "rule_name": "more_phy_read", "id": "17332", "rule_expression": "(([metric,2189004]>[num,$1]) || ([metric in time,10,1000105,2189004][oper,eq][str,3])) && ([metric,2189004]>[num,$2])", "db_type": "Oracle", "warning_level": "2", "warning_message": "每秒物理读{[metric,2189004]}超出小时平均值{$1}倍，并且超过基线{$2}倍，应用或者数据出现了异常"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析CPU使用情况", "knowledge_description": "分析CPU使用情况"}, {"knowledge_description": "分析指标、SQL相似度"}, {"knowledge_name": "操作系统核心资源分析", "knowledge_description": "操作系统核心资源分析"}, {"knowledge_name": "区分top sql是逻辑读还是执行次数增多进行进一步诊断", "knowledge_description": "逻辑读较多的TOP SQL"}, {"knowledge_name": "显示数据库负载指标情况", "knowledge_description": "显示数据库负载指标情况"}], "description": "操作系统r队列超过CPU数量的2倍且CPU使用率超过90%，则可能存在CPU资源瓶颈", "rule_name": "more_running_proc_oracle", "id": "17333", "rule_expression": "[metric,3000009]/[metric,3000010]>[num,$1] && [metric,3000003]>[num,$2]", "db_type": "Oracle", "warning_level": "4", "warning_message": "操作系统r队列{[metric,3000009]}超过CPU数量的{$1}倍且CPU使用率{[metric,3000003]}%超过{$2}%，可能存在CPU资源瓶颈"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "一般来说，日志切换后归档进程就会进行归档操作，当前最多有一个日志组未归档。如果未归档日志组数量超过2个，一般来说系统就有问题,如果归档有问题，建议检查归档目录的写IO性能是不是很慢，检查归档目录状态及错误原因", "knowledge_description": "未归档日志组数量超过2个，一般来说系统就有问题"}, {"knowledge_name": "文件系统目录使用率分析", "knowledge_description": "文件系统目录使用率分析"}, {"knowledge_name": "分析服务器IO设备的IO情况", "knowledge_description": "分析服务器IO设备的IO情况"}, {"knowledge_description": "分析归档日志大小远小于redo log文件大小"}], "description": "未归档的日志组数量超过总的日志组数量的一半，说明系统归档出现了异常，不及时处理可能导致数据库挂起", "rule_name": "no_archived_log", "id": "17334", "rule_expression": "[metric,2180513]/[cib,2201001,log_count]>[num,$1]", "db_type": "Oracle", "warning_level": "4", "warning_message": "系统归档异常，未归档日志组数量{[metric,2180513]}，超过总日志组数量{[cib,2201001,log_count]}的一半，不及时处理可能导致数据库挂起"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle热块冲突分析"}, {"knowledge_name": "进行Top SEGMENT和SQL分析", "knowledge_description": "如果数据库集群间出现了热块冲突，会导致RAC性能出现严重下降"}], "description": "Oracle热块冲突严重，数据库性能会受影响", "rule_name": "ora_bbw", "id": "17335", "rule_expression": "([metric,2184313] >[num,$1] || [metric,2184312] >[num,$2]) && ([metric,2189030] >[num,$3])", "db_type": "Oracle", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "oracle SGA超过100G的数据库vm.max_map_count参数配置不正确", "rule_name": "oracle_big_sga_mmap_setting_incorrect", "id": "17336", "rule_expression": "[cib,2201010,sga_target]>[num,$1] && [cib,3010002,vm.max_map_count]<[num,$2]", "db_type": "Oracle", "warning_level": "4", "warning_message": "oracle SGA当前为{[cib,2201010,sga_target]}，超过100G，但数据库服务器vm.max_map_count参数为 {[cib,3010002,vm.max_map_count]}，配置过小，可能会导致数据库产生ORA-04030报错。"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "oracle数据库连接失败分析", "knowledge_description": "oracle数据库连接失败分析"}], "description": "数据库自身故障导致连接失败", "rule_name": "oracle_db_broken_connect_failed", "id": "17337", "rule_expression": "([metric,1000000][oper,contains][str,ORA-12516]) || ([metric,1000000][oper,contains][str,ORA-00257]) || (([metric,1000000][oper,contains][str,ORA-12505] || [metric,1000000][oper,contains][str,ORA-12514]) && ([metric list in time,3,3000060][oper,all neq][cib,2201001,instance_name])) || (([metric,1000000][oper,contains][str,The Network Adapter could not establish the connection]) && ([metric in time,3,3000061]<[num,1]))", "db_type": "Oracle", "warning_level": "4", "warning_message": "数据库自身故障导致连接失败：{[metric,1000000]}"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "oracle数据库连接失败分析", "knowledge_description": "oracle数据库连接失败分析"}], "description": "KYD到oracle数据库连接配置有问题，导致连接失败", "rule_name": "oracle_dsmart_connection_error", "id": "17338", "rule_expression": "([metric,1000000][oper,contains][str,ORA-12505] || [metric,1000000][oper,contains][str,ORA-12514]) && ([metric list in time,3,3000060][oper,any eq][cib,2201001,instance_name])", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "oracle数据库连接失败分析", "knowledge_description": "oracle数据库连接失败分析"}], "description": "KYD客户端连接oracle数据库用户名错误", "rule_name": "oracle_dsmart_logon_failed", "id": "17339", "rule_expression": "([metric,1000000] [oper,contains][str,ORA-01017]) || ([metric,1000000] [oper,contains][str,ORA-28000])", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "oracle数据库连接失败分析", "knowledge_description": "oracle数据库连接失败分析"}], "description": "KYD采样SQL在oracle数据库执行失败", "rule_name": "oracle_dsmart_monitor_sql_execute_failed", "id": "17340", "rule_expression": "[metric,1000000] [oper,contains][str,SQL执行失败]", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "oracle数据库连接失败分析", "knowledge_description": "oracle数据库连接失败分析"}, {"knowledge_name": "网络接口分析", "knowledge_description": "(历史)网络接口分析"}], "description": "KYD客户端到oracle数据库网络出现问题，oracle数据库可能存在网络故障", "rule_name": "oracle_dsmart_network_failed", "id": "17341", "rule_expression": "(([metric,1000000][oper,contains][str,The Network Adapter could not establish the connection]) && ([metric in time,2,3000061]>[num,0]))", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "oracle数据库连接失败分析", "knowledge_description": "oracle数据库连接失败分析"}], "description": "KYD连接oracle数据库的用户密码过期", "rule_name": "oracle_dsmart_password_expried", "id": "17342", "rule_expression": "[metric,1000000][oper,contains][str,ORA-28001]", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "分析SQL"}], "description": "全量SQL分析发现多个执行计划风险", "rule_name": "oracle_fsa_multiple_sql_plan", "id": "17343", "rule_expression": "[metric,1000520][oper,==][num,$1]", "db_type": "Oracle", "warning_level": "4", "warning_message": "SQL：{[metric,1000521]}的执行计划发生变化。"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle RAC分析"}, {"knowledge_name": "操作系统网络层面丢包分析", "knowledge_description": "操作系统网络层面丢包分析"}, {"knowledge_name": "RAC DRM分析", "knowledge_description": "RAC DRM分析"}, {"knowledge_name": "对找出的SQL语句进行优化", "knowledge_description": "查找集群等待时间比较大的SQL语句"}, {"knowledge_name": "rac集群网络问题分析", "knowledge_description": "rac集群网络问题分析"}, {"knowledge_name": "进行Top SEGMENT和SQL分析", "knowledge_description": "如果数据库集群间出现了热块冲突，会导致RAC性能出现严重下降"}, {"knowledge_name": "Oracle等待事件分析", "knowledge_description": "Oracle等待事件分析"}], "description": "gc block lost值大于0，RAC可能存在风险", "rule_name": "oracle_gc_block_lost", "id": "17344", "rule_expression": "([metric,2189102] >[num,$1] || [metric,2189101] >[num,$2]) &&([metric,2189069] >[num,$3])", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据具体的登录方式判断并提供建议", "knowledge_description": "数据库存在频繁登录诊断分析"}, {"knowledge_name": "分析数据库实例在指定时间窗口内的数据库会话情况", "knowledge_description": "分析数据库实例在指定时间窗口内的数据库会话情况"}, {"knowledge_name": "检查用户过期或密码错误", "knowledge_description": "检查用户过期或密码错误"}, {"knowledge_name": "根据主机名称查询数据库会话及进程信息", "knowledge_description": "根据主机名称查询数据库会话及进程信息"}], "description": "数据库当前进程数超过process参数的95%，数据库存在连接数满的风险", "rule_name": "process_up_to_resource_limit", "id": "17354", "rule_expression": "[metric,2180049]>[cib,2201010,processes]*[num,$1]", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "表空间使用情况检查"}, {"knowledge_name": "显示数据库ASM磁盘组信息", "knowledge_description": "显示数据库ASM磁盘组信息"}, {"knowledge_description": "用户容量分析"}], "description": "表空间容量风险高，数据库中存在表空间使用率大于90%且可用天数小于30天，存在表空间满的风险", "rule_name": "oracle_tbs_capacity_risk", "id": "17346", "rule_expression": "[metric max in time,240,2180045]==[num,$1]", "db_type": "Oracle", "warning_level": "2", "warning_message": "表空间({[metric in time,240,2180516]})容量风险高，使用率大于90%且可用天数小于30天，存在表空间满的风险"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "oracle数据库连接失败分析", "knowledge_description": "oracle数据库连接失败分析"}], "description": "oracle数据库未知连接错误", "rule_name": "oracle_unkown_connect_failed", "id": "17347", "rule_expression": "[metric,1000000][oper,notcontains][str,ORA-28001] && [metric,1000000][oper,notcontains][str,ORA-12505] && [metric,1000000][oper,notcontains][str,ORA-12514] && [metric,1000000][oper,notcontains][str,ORA-12516] && [metric,1000000][oper,notcontains][str,ORA-00257] && [metric,1000000][oper,notcontains][str,ORA-01017] && [metric,1000000][oper,notcontains][str,ORA-28000] && [metric,1000000][oper,notcontains][str,The Network Adapter could not establish the connection] && [metric,1000000][oper,notcontains][str,SQL执行失败] && [metric,1000000][oper,neq][str,连接成功]", "db_type": "Oracle", "warning_level": "4", "warning_message": "oracle数据库连接错误：{[metric,1000000]}"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_name": "数据库物理写IO性能分析", "knowledge_description": "数据库物理写IO性能分析"}, {"knowledge_name": "数据库IO功能分析", "knowledge_description": "数据库IO功能分析"}, {"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-Oracle IO分析"}], "description": "写IO性能异常同时读IO正常，可能存储复制链路存在问题", "rule_name": "ora_dbio_abnormal", "id": "17348", "rule_expression": "([metric,2184302]*[num,$1]<[metric,2184304]) && ([metric,3001011] <[num,$2]) && ([metric,2189128] <[num,$3]) && ([metric,2184301] >[num,$4])&& ([metric,3000007] <[num,$5])", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "共享池分析", "knowledge_description": "共享池分析"}, {"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle共享池分析"}, {"knowledge_name": "共享池分析", "knowledge_description": "共享池分析"}, {"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle共享池分析"}], "description": "因为存在热表而引起rowcache等待延时过大，相关应用性能存在问题", "rule_name": "ora_hot_rowcache", "id": "17349", "rule_expression": "([metric,2184319] >[num,$1]) && ([metric,2189046] >[num,$2]) ", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断发现的异常指标以及推荐的诊断路径下钻分析", "knowledge_description": "泛路由-Oracle闩锁分析"}, {"knowledge_name": "根据闩锁等待类别进行分类处理", "knowledge_description": "latch等待事件分析，判断数据库出现哪类闩锁等待"}], "description": "Oracle数据库的闩锁存在问题，数据库存在风险", "rule_name": "ora_latch_free", "id": "17350", "rule_expression": "([metric,2180200] <[num,$1] ||[metric,2184322] >[num,$2]) &&([metric,3000003] >[num,$3])&&([metric,3001011] >[num,$4])", "db_type": "Oracle", "warning_level": "3", "warning_message": "闩锁争用严重，数据库存在风险（当前闩锁命中率{[metric,2180200]}%,闩锁平均等待时间：{[metric,2184322]}，SYS CPU使用率{[metric,3001011] }%"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "Library cache pin/lock分析工具"}], "description": "Oracle数据库因为expression tracking导致library cache pin性能问题", "rule_name": "ora_library_cache_pin_high", "id": "17351", "rule_expression": "[metric,2180084]>[num,$1]", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "共享池分析", "knowledge_description": "共享池分析"}, {"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle共享池分析"}, {"knowledge_name": "查询sga内存组件内存变化情况", "knowledge_description": "查询sga内存组件内存变化情况"}, {"knowledge_name": "查找执行次数比较高的TOP SQL", "knowledge_description": "查找执行次数比较高的TOP SQL"}, {"knowledge_name": "数据库并发执行维度分析", "knowledge_description": "数据库并发执行维度分析"}, {"knowledge_name": "判断SGA RESIZE操作是否异常", "knowledge_description": "分析SGA RESIZE操作是否异常"}], "description": "SQL解析异常，可能引起了数据库性能问题", "rule_name": "ora_non_parse_cpu", "id": "17352", "rule_expression": "([metric,2180201]<[num,$1]) && ([metric,2189046] >[num,$2]) && (([metric,2184319] >[num,$3]) || ([metric,2184316] >[num,$4]) || ([metric,3000003] >[num,$5]))", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle RAC分析"}, {"knowledge_name": "RAC DRM分析", "knowledge_description": "RAC DRM分析"}, {"knowledge_name": "显示数据库负载指标情况", "knowledge_description": "显示数据库负载指标情况"}, {"knowledge_name": "获取集群等待时间较高的TOP SQL", "knowledge_description": "获取集群等待时间较高的TOP SQL"}, {"knowledge_name": "操作系统网络总体分析", "knowledge_description": "操作系统网络总体分析"}, {"knowledge_name": "mtr网络诊断工具", "knowledge_description": "mtr网络诊断工具"}], "description": "gcs drm freeze in enter server mode平均等待时间超过100毫秒，并且gc remaster 平均等待时间超过100毫秒，说明DRM已经影响了数据库的性能，建议关闭DRM", "rule_name": "rac_drm_problem", "id": "17355", "rule_expression": "[metric,2180059]>[num,$1] && [metric,2180060]>[num,$2]", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle RAC分析"}, {"knowledge_name": "分析指定时间间隔内GC相关指标可能存在的问题", "knowledge_description": "分析指定时间间隔内GC相关指标"}, {"knowledge_name": "RAC DRM分析", "knowledge_description": "RAC DRM分析"}, {"knowledge_name": "检索数据库哪些数据行发生行锁，对于找出存在行锁的行，如果长时间存在，说明阻塞者可能存在问题，可以通过“检查阻塞者会话信息”工具找到该会话，并杀掉该会话来解锁", "knowledge_description": "【实时分析】检索当前数据库哪些数据行发生行锁"}, {"knowledge_name": "获取集群等待时间较高的TOP SQL", "knowledge_description": "获取集群等待时间较高的TOP SQL"}, {"knowledge_name": "对未分区的对象进行分区，对碎片严重的对象进行重组整理", "knowledge_description": "找出数据库集群间心跳流量比较大的SEGMENT，检查是否分区并对其进行碎片分析"}, {"knowledge_name": "查看top sql判断是物理读导致还是执行次数原因", "knowledge_description": "物理读较多的TOP SQL"}, {"knowledge_name": "数据库物理读过高时分析物理读过高的SQL和SEGMENT", "knowledge_description": "数据库物理读过高时分析物理读过高的SQL和SEGMENT"}, {"knowledge_name": "操作系统网络总体分析", "knowledge_description": "操作系统网络总体分析"}, {"knowledge_name": "mtr网络诊断工具", "knowledge_description": "mtr网络诊断工具"}], "description": "Avg global enqueue get time大于60毫秒，并且TX锁相关平均等待时间超过500毫秒，则说明行锁等待存在隐患", "rule_name": "rac_interconnect_time_and_enq_tx_problem", "id": "17356", "rule_expression": "[metric,2180205]>[num,$1] && [metric,2180058]>[num,$2]", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle RAC分析"}, {"knowledge_name": "分析指定时间间隔内GC相关指标可能存在的问题", "knowledge_description": "分析指定时间间隔内GC相关指标"}, {"knowledge_name": "RAC DRM分析", "knowledge_description": "RAC DRM分析"}, {"knowledge_name": "获取集群等待时间较高的TOP SQL", "knowledge_description": "获取集群等待时间较高的TOP SQL"}, {"knowledge_name": "对未分区的对象进行分区，对碎片严重的对象进行重组整理", "knowledge_description": "找出数据库集群间心跳流量比较大的SEGMENT，检查是否分区并对其进行碎片分析"}, {"knowledge_name": "数据库物理读过高时分析物理读过高的SQL和SEGMENT", "knowledge_description": "数据库物理读过高时分析物理读过高的SQL和SEGMENT"}, {"knowledge_name": "操作系统网络总体分析", "knowledge_description": "操作系统网络总体分析"}, {"knowledge_name": "操作系统网络层面丢包分析", "knowledge_description": "操作系统网络层面丢包分析"}, {"knowledge_name": "mtr网络诊断工具", "knowledge_description": "mtr网络诊断工具"}], "description": "Avg global cache cr block receive time 大于20毫秒并且RAC INTERCONNECT流量大于30M，说明集群性能存在隐患", "rule_name": "rac_interconnect_time_and_flow_problem", "id": "17357", "rule_expression": "[metric,2189098]>[num,$1] && [metric,2180204]>[num,$2]", "db_type": "Oracle", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "REDO NOWAIT分析", "knowledge_description": "REDO NOWAIT分析"}, {"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_name": "显示数据库负载指标情况", "knowledge_description": "显示数据库负载指标情况"}], "description": "Redo Allocation Hit Ratio小于100%，说明REDO存在性能隐患，需要检查REDO和事务的相关情况", "rule_name": "redo_allocation_hit_ratio", "id": "17358", "rule_expression": "[metric,2189002]<[num,$1] && [metric,2189016]>[num,$2]", "db_type": "Oracle", "warning_level": "3", "warning_message": "Redo Allocation Hit Ratio 值为{[metric,2189002]}%，REDO存在性能隐患，需要检查REDO和事务的相关情况"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析数据库IO可能存在的问题", "knowledge_description": "分析数据库IO情况"}, {"knowledge_name": "数据库IO功能分析", "knowledge_description": "数据库IO功能分析"}], "description": "在工作时间，数据库物理读大于80M/秒，数据库备份IO超过50M/秒，导致单块读延时是平时的2倍，说明备份对IO性能造成了影响", "rule_name": "rman_backup_problem", "id": "17359", "rule_expression": "[metric,2180052]>[num,$1] && [metric,2180057]>[num,$2] && [metric,2180057]>[metric hour avg,2180057]*[num,$3]", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "显示指定时间间隔内的日志报错信息", "knowledge_description": "显示指定时间间隔内的日志报错信息"}, {"knowledge_name": "实时查询表空间使用情况，不要频繁点击查询，对于超大数据库，频繁查询可能会导致数据库hang死", "knowledge_description": "实时查询表空间使用情况"}, {"knowledge_name": "一般来说，日志切换后归档进程就会进行归档操作，当前最多有一个日志组未归档。如果未归档日志组数量超过2个，一般来说系统就有问题,如果归档有问题，建议检查归档目录的写IO性能是不是很慢，检查归档目录状态及错误原因", "knowledge_description": "未归档日志组数量超过2个，一般来说系统就有问题"}], "description": "用户回滚比例超过20%并且每秒回滚次数超过5次，应用可能存在异常", "rule_name": "rollback_ratio_exceed", "id": "17360", "rule_expression": "[metric,2189025]>[num,$1]  && [metric,2189024]>[num,$2]", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "通过oracle等待事件链分析得到导致等待事件的根会话", "knowledge_description": "生成Oracle数据库实例的会话等待链"}, {"knowledge_name": "检索数据库哪些数据行发生行锁，对于找出存在行锁的行，如果长时间存在，说明阻塞者可能存在问题，可以通过“检查阻塞者会话信息”工具找到该会话，并杀掉该会话来解锁", "knowledge_description": "【实时分析】检索当前数据库哪些数据行发生行锁"}, {"knowledge_name": "分析数据库行锁相关指标", "knowledge_description": "【历史分析】分析数据库行锁相关指标"}], "description": "行锁等待严重超时（超过3600秒）数据库可能存在未提交的会话", "rule_name": "row_lock_wait_time_long", "id": "17361", "rule_expression": null, "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "检索阻塞者会话信息，杀掉该会话可以解开相关的锁或者闩锁。注意部分后台进程是不能杀的，如果杀错会话，会导致数据库宕机", "knowledge_description": "检索阻塞会话信息"}, {"knowledge_name": "在创建索引一段时间后，无返回结果可用此脚本进行检查。", "knowledge_description": "检查数据库是否存在索引创建或者重建任务"}, {"knowledge_name": "通过oracle等待事件链分析得到导致等待事件的根会话", "knowledge_description": "生成Oracle数据库实例的会话等待链"}], "description": "enq:TM-contention 等待的总会话数超过10", "rule_name": "session_wait_enq_tm_cnt_exceed", "id": "17362", "rule_expression": "[metric,2180508]>[num,$1]", "db_type": "Oracle", "warning_level": "2", "warning_message": "enq:TM-contention 等待的总会话数超过10，原因：1）不合理的锁表 2）DML语句相关表存在外键关系，并且子表外键缺少索引 3）BUG导致的并行创建索引缓慢"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "判断SGA RESIZE操作是否异常", "knowledge_description": "分析SGA RESIZE操作是否异常"}, {"knowledge_name": "查询sga内存组件内存变化情况", "knowledge_description": "查询sga内存组件内存变化情况"}, {"knowledge_name": "通过SGA ADVISE找到合适的SGA建议值，并根据物理内存的大小，判断是否可以实施", "knowledge_description": "SGA调整建议"}, {"knowledge_name": "查找执行次数比较高的TOP SQL", "knowledge_description": "查找执行次数比较高的TOP SQL"}], "description": "SGA RESIZE频繁导致了共享池问题", "rule_name": "sga_resize_shared_pool", "id": "17363", "rule_expression": "([metric,2180519] > [num,$1]) && ([metric,2180055]> [cib,2201010,cpu_count]*[num,$2]) && ([metric,2180050]> [num,$3]) ", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "并发SQL语句分析"}, {"knowledge_name": "显示数据库负载指标情况", "knowledge_description": "显示数据库负载指标情况"}, {"knowledge_name": "查找执行次数比较高的TOP SQL", "knowledge_description": "查找执行次数比较高的TOP SQL"}, {"knowledge_name": "区分top sql是逻辑读还是执行次数增多进行进一步诊断", "knowledge_description": "逻辑读较多的TOP SQL"}, {"knowledge_description": "分析SQL"}], "description": "某个SQL ID的SQL并发执行数量超过25，系统可能存在性能问题", "rule_name": "single_sql_exec_exceed", "id": "17364", "rule_expression": "[metric in time,10,2180511] > [num,$1]", "db_type": "Oracle", "warning_level": "3", "warning_message": "SQL ID（{[metric iname in time,10,2180511]}）的并发执行数量{[metric in time,10,2180511]}超过{$1}，系统可能存在性能问题"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "sql告警分析", "knowledge_description": "sql告警分析"}], "description": "各种维度的top sql告警", "rule_name": "sql_alert", "id": "17365", "rule_expression": "[metric in time,3,2180543]>[num,$1]", "db_type": "Oracle", "warning_level": "2", "warning_message": "各种维度的top sql告警{[metric in time,3,2180543]}个"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "显示数据库负载指标情况", "knowledge_description": "显示数据库负载指标情况"}, {"knowledge_name": "查找执行次数比较高的TOP SQL", "knowledge_description": "查找执行次数比较高的TOP SQL"}], "description": "每秒事务数超过最近1小时平均值的10倍，应用可能存在异常", "rule_name": "transcation_count_raise", "id": "17366", "rule_expression": "[metric,2189003]/[metric hour avg,2189003]>[num,$1] && [metric,2189003]>[num,$2]", "db_type": "Oracle", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "Oracle等待事件分析", "knowledge_description": "Oracle等待事件分析"}, {"knowledge_name": "显示数据库等待事件及数据库会话信息", "knowledge_description": "显示数据库等待事件及数据库会话信息"}, {"knowledge_name": "等待事件链分析", "knowledge_description": "等待事件链分析"}, {"knowledge_name": "根据智能诊断发现的异常指标以及推荐的诊断路径下钻分析", "knowledge_description": "泛路由-Oracle闩锁分析"}, {"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle共享池分析"}, {"knowledge_name": "以树形结构显示等待事件链信息", "knowledge_description": "以树形结构显示等待事件链信息"}, {"knowledge_name": "数据库后台进程错误及等待事件诊断", "knowledge_description": "数据库后台进程错误及等待事件诊断"}, {"knowledge_name": "根据闩锁等待类别进行分类处理", "knowledge_description": "latch等待事件分析，判断数据库出现哪类闩锁等待"}, {"knowledge_name": "一般来说，平均等待时间应该小于10毫秒，如果某些指标的平均等待时间超过20毫秒，则说明系统有问题。分析所有超出指标范围的指标项", "knowledge_description": "分析数据库集群相关等待事件，判断问题出在哪些方面"}, {"knowledge_name": "enq: CF - contention等待事件分析", "knowledge_description": "enq: CF - contention等待事件分析"}, {"knowledge_name": "分析数据库控制文件等待事件延时情况", "knowledge_description": "分析数据库控制文件等待事件延时情况"}, {"knowledge_name": "分析数据库中enq: KO - fast object checkpoint等待事件", "knowledge_description": "分析数据库中enq: KO - fast object checkpoint等待事件"}, {"knowledge_name": "列出数据库中非空闲等待事件", "knowledge_description": "列出数据库中非空闲等待事件"}, {"knowledge_name": "Buffer busy waits等待事件诊断", "knowledge_description": "Buffer busy waits等待事件诊断"}, {"knowledge_name": "等待事件enq: RO - fast object reuse诊断", "knowledge_description": "等待事件enq: RO - fast object reuse诊断"}], "description": "等待事件风险连续出现较高的情况", "rule_name": "wait_event_risk", "id": "17367", "rule_expression": null, "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "oracle数据库连接失败分析", "knowledge_description": "oracle数据库连接失败分析"}], "description": "KYD连接oracle数据库的用户密码过期", "rule_name": "oracle_dsmart_password_expried", "id": "17512", "rule_expression": "[metric,1000000][oper,contains][str,ORA-28001]", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "oracle数据库连接失败分析", "knowledge_description": "oracle数据库连接失败分析"}], "description": "KYD连接oracle数据库的用户密码过期", "rule_name": "oracle_dsmart_password_expried", "id": "15714", "rule_expression": "[metric,1000000][oper,contains][str,ORA-28001]", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "检查DG环境"}], "description": "DG备库延迟超过1800秒或存在GAP", "rule_name": "dg_standby_delay_more", "id": "8206", "rule_expression": "[metric in time ,10,2180066]-[cib,2201001,apply_delay]>[num,$1] || [metric in time ,10,2180067]>[num,$2]", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "如果log file parallel write的平均等待时间超过10ms,说明数据库日志写IO性能存在问题；如果Log file sync与log file parallel write两个等待事件的平均等待时间的差值大于10ms 或者大于log file parallel write等待事件的平均等待时间的50%，则说明数据库日志同步存在性能问题", "knowledge_description": "LOG FILE SYNC等待延时超过n毫秒，说明数据库存在性能隐患"}, {"knowledge_description": "分析归档日志大小远小于redo log文件大小"}], "description": "LOG FILE SYNC等待严重超时，数据库存在安全隐患", "rule_name": "log_file_sync_wait_critical", "id": "8210", "rule_expression": "(([metric,2184301] >[num,$1]) ||([metric in time,10,1000105,2184301][oper,eq][str,3]))&&([metric,2184301] >[num,$2])", "db_type": "Oracle", "warning_level": "4", "warning_message": "日志同步延时严重超标或者异常波动，达到{[metric,2184301]}毫秒"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "oracle数据库连接失败分析", "knowledge_description": "oracle数据库连接失败分析"}], "description": "KYD客户端连接oracle数据库用户名错误", "rule_name": "oracle_dsmart_logon_failed", "id": "8447", "rule_expression": "([metric,1000000] [oper,contains][str,ORA-01017]) || ([metric,1000000] [oper,contains][str,ORA-28000])", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "查找解析次数比较高的SQL", "knowledge_description": "查找解析次数比较高的SQL"}, {"knowledge_name": "共享池分析", "knowledge_description": "共享池分析"}, {"knowledge_name": "判断SGA RESIZE操作是否异常", "knowledge_description": "分析SGA RESIZE操作是否异常"}, {"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-Oracle共享池分析"}, {"knowledge_description": "分析指标、SQL相似度"}], "description": "SHARED POOL的使用率高于90%并且软解析比例低于90%，none-parse cpu time比例低于90%，SQL解析可能影响数据库的健康", "rule_name": "higher_shared_pool_used_lower_soft_parsed", "id": "957", "rule_expression": "([num,100]-[metric,2189114])>[num,$1] && [metric,2189055]<[num,$2] && [metric,2180201]<[num,$3] ", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "分析SQL"}], "description": "全量SQL分析发现多个执行计划风险", "rule_name": "oracle_fsa_multiple_sql_plan", "id": "15715", "rule_expression": "[metric,1000520][oper,==][num,$1]", "db_type": "Oracle", "warning_level": "2", "warning_message": "SQL：{[metric,1000521]}的执行计划发生变化。"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析数据库实例在指定时间窗口内的数据库会话情况", "knowledge_description": "分析数据库实例在指定时间窗口内的数据库会话情况"}, {"knowledge_name": "查找执行次数比较高的TOP SQL", "knowledge_description": "查找执行次数比较高的TOP SQL"}, {"knowledge_name": "通过每秒执行的事务数和SQL数，检查数据库负载情况", "knowledge_description": "每秒执行的事务数和SQL语句每秒执行数量可以从宏观上显示出数据库负载运行情况。"}, {"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-oracle活跃会话分析"}, {"knowledge_name": "数据库负载模型相关指标分析", "knowledge_description": "数据库负载模型相关指标分析"}, {"knowledge_name": "执行数量超过5的活跃SQL", "knowledge_description": "执行数量超过5的活跃SQL"}], "description": "活跃会话过多（超过70个）,数据库健康可能存在问题", "rule_name": "avg_active_session", "id": "15548", "rule_expression": "[metric,2189147]>[num,$1] &&( [metric,2189147]<[cib,2201010,sessions])", "db_type": "Oracle", "warning_level": "3", "warning_message": "活跃会话数{[metric,2189147]}，超过{$1}个数据库健康可能存在问题"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "oracle数据库连接失败分析", "knowledge_description": "oracle数据库连接失败分析"}], "description": "KYD连接oracle数据库的用户密码过期", "rule_name": "oracle_dsmart_password_expried", "id": "8558", "rule_expression": "[metric,1000000][oper,contains][str,ORA-28001]", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "分析归档日志大小远小于redo log文件大小"}, {"knowledge_name": "显示数据库每天产生的归档日志的大小", "knowledge_description": "显示数据库每天产生的归档日志的大小"}, {"knowledge_name": "一般来说，日志切换后归档进程就会进行归档操作，当前最多有一个日志组未归档。如果未归档日志组数量超过2个，一般来说系统就有问题,如果归档有问题，建议检查归档目录的写IO性能是不是很慢，检查归档目录状态及错误原因", "knowledge_description": "未归档日志组数量超过2个，一般来说系统就有问题"}, {"knowledge_name": "如果一小时内日志切换次数超过12次，说明切换频率过高，建议增大在线日志文件", "knowledge_description": "一小时内日志切换次数"}, {"knowledge_name": "分析日志切换频率是否合理", "knowledge_description": "分析日志切换频率是否合理"}], "description": "归档日志远小于redo日志文件大小，并且日志切换过于频繁", "rule_name": "archivelog_less_redo", "id": "8038", "rule_expression": "[metric,2180542]/[cib,2201000,redo_size]<[num,$1] && [metric,2180515]>[num,$2]", "db_type": "Oracle", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据具体的登录方式判断并提供建议", "knowledge_description": "数据库存在频繁登录诊断分析"}], "description": "每秒LOGONS数量异常，说明数据库存在频繁登录", "rule_name": "count_logon_sec", "id": "113", "rule_expression": "([metric,2189018] >[num,$1]) ||([metric in time,10,1000105,2189018][oper,eq][str,3])", "db_type": "Oracle", "warning_level": "2", "warning_message": "每秒登录数突发异常增长，达到{[metric,2189018]}/秒"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "sql告警分析", "knowledge_description": "sql告警分析"}], "description": "各种维度的top sql告警", "rule_name": "sql_alert", "id": "8176", "rule_expression": "[metric in time,3,2180543]>[num,$1]", "db_type": "Oracle", "warning_level": "2", "warning_message": "各种维度的top sql告警{[metric in time,3,2180543]}个"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "oracle数据库连接失败分析", "knowledge_description": "oracle数据库连接失败分析"}], "description": "KYD采样SQL在oracle数据库执行失败", "rule_name": "oracle_dsmart_monitor_sql_execute_failed", "id": "8473", "rule_expression": "[metric,1000000] [oper,contains][str,SQL执行失败]", "db_type": "Oracle", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_id": 63, "knowledge_name": "Unknown", "knowledge_description": "Unknown"}], "description": "日检任务", "rule_name": "daycheck", "id": "419", "rule_expression": null, "db_type": "Oracle", "warning_level": "2"}}
