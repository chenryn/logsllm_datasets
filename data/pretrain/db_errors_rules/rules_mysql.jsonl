{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL Top SQL-按错误/警告数排序"}], "description": "5分钟内出现多次错误或告警的SQL语句，可能是应用发出", "rule_name": "error_sql", "id": "8878", "rule_expression": "[metric,2020424]>[num,$1]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "MySQL数据库InnoDB存储引擎参数检查", "knowledge_description": "MySQL数据库InnoDB存储引擎参数检查"}], "description": "BUFFER POOL的实例个数设置有误，超过了最大值64", "rule_name": "mysql_bufferpool_instances", "id": "8249", "rule_expression": "[cib,2210002,innodb_buffer_pool_instances]>[num,$1]", "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "MySQL数据库InnoDB存储引擎参数检查", "knowledge_description": "MySQL数据库InnoDB存储引擎参数检查"}], "description": "BUFFER POOL的大小小于1G,但缓冲池实例个数大于1", "rule_name": "mysql_bufferpool_less_than1G", "id": "8251", "rule_expression": "[cib,2210002,innodb_buffer_pool_size]/[num,1024]/[num,1024]/[num,1024]<[num,$1]&&[cib,2210002,innodb_buffer_pool_instances]>[num,$2]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "对MySQL的连接分布情况进行分析"}], "description": "客户端登录验证失败次数过多，可能应用配置的凭证信息未及时更新", "rule_name": "mysql_authentication_errors", "id": "15228", "rule_expression": "[metric in time,30,2020507]>[num,0]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析服务器IO设备的IO情况", "knowledge_description": "分析服务器IO设备的IO情况"}, {"knowledge_description": "MySQL Top SQL汇总"}, {"knowledge_name": "根据事件类型查数据库IO延时情况", "knowledge_description": "根据事件类型查数据库IO延时情况"}], "description": "每秒数据文件读增长异常，是近1小时平均值的5倍", "rule_name": "mysql_file_read", "id": "1327", "rule_expression": "[metric,2020243]/[metric hour avg,2020243]>[num,$1]&&[metric,2020243]>[bsl upper,2020243]*[num,$2][@Denominator0,0]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL事务分析"}, {"knowledge_description": "MySQL锁等待分析"}, {"knowledge_description": "对MySQL的运行状态进行分析"}], "description": "事务持续时间超过阀值", "rule_name": "mysql_long_trx", "id": "5755", "rule_expression": null, "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "对MySQL的运行状态进行分析"}, {"knowledge_name": "MySQL数据库重启检查", "knowledge_description": "MySQL数据库重启检查"}], "description": "数据库可能发生了重启", "rule_name": "db_restart", "id": "16247", "rule_expression": "[metric,2020199]<[num,$1] && [metric,2020453][oper,contains][str,20]", "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "对MySQL的连接分布情况进行分析"}, {"knowledge_description": "对MySQL的运行状态进行分析"}], "description": "每秒登陆次数超过50次，说明数据库存在频繁登陆", "rule_name": "mysql_logon", "id": "5753", "rule_expression": null, "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL锁等待分析"}, {"knowledge_description": "对MySQL的运行状态进行分析"}], "description": "非事务锁等待（包括等待刷新完成）并发数超过阀值", "rule_name": "mysql_rwlock_wait", "id": "5757", "rule_expression": null, "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "对MySQL的连接分布情况进行分析"}, {"knowledge_description": "对MySQL的运行状态进行分析"}], "description": "每秒登陆次数超过50次，说明数据库存在频繁登陆", "rule_name": "mysql_logon", "id": "5780", "rule_expression": null, "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL锁等待分析"}, {"knowledge_description": "对MySQL的运行状态进行分析"}], "description": "Innodb事务锁等待并发数超过阀值", "rule_name": "mysql_txlock_wait", "id": "5759", "rule_expression": null, "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "检查query_cache_size数据库参数", "knowledge_description": "检查query_cache_size数据库参数"}], "description": "查询缓存可能不足", "rule_name": "qcache_low", "id": "3833", "rule_expression": "[cib,2210002,query_cache_size]>[num,0] && [cib,2210002,query_cache_type][oper,neq][str,OFF] && [metric,2020284]>[num,$1]", "db_type": "MySQL", "warning_level": "1"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "对MySQL的运行状态进行分析"}, {"knowledge_description": "MySQL Top SQL-按锁时间排序"}], "description": "被锁定的查询数过多，超过5个", "rule_name": "locked_query", "id": "3843", "rule_expression": "[metric,2020422]>[num,$1]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "对MySQL的运行状态进行分析"}, {"knowledge_description": "MySQL Top SQL-按执行时间排序"}, {"knowledge_name": "检查slow_query_log数据库参数", "knowledge_description": "检查slow_query_log数据库参数"}, {"knowledge_name": "检查long_query_time数据库参数", "knowledge_description": "检查long_query_time数据库参数"}], "description": "长时间运行的查询数过多", "rule_name": "long_running", "id": "3845", "rule_expression": "[metric,2020423]>[num,$1]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL锁等待分析"}, {"knowledge_description": "MySQL Top SQL-按锁时间排序"}, {"knowledge_name": "检查lock_wait_timeout数据库参数", "knowledge_description": "检查lock_wait_timeout数据库参数"}, {"knowledge_name": "检查innodb_lock_wait_timeout数据库参数", "knowledge_description": "检查innodb_lock_wait_timeout数据库参数"}], "description": "表锁过度竞争,每秒表锁等待数超过2次", "rule_name": "table_lock_contenion", "id": "3847", "rule_expression": "[metric,2020199]>[num,$1]&&[metric,2020404]<[num,$2]&&[metric,2020265]>[num,$3]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "预编译语句执行比例过低分析", "knowledge_description": "预编译语句执行比例过低分析"}], "description": "未有效使用预编译语句", "rule_name": "stmt_used_suboptimal", "id": "3855", "rule_expression": "[metric,2020212]>[num,$1]&&[metric,2020211]/[metric,2020212]<[num,$2]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL Top SQL汇总"}, {"knowledge_description": "对MySQL的运行状态进行分析"}], "description": "每秒逻辑读增长异常，是近1小时平均值的5倍", "rule_name": "mysql_bp_read", "id": "16276", "rule_expression": "[metric,2020237]/[metric hour avg,2020237]>[num,$1]&&[metric,2020237]>[bsl upper,2020237]*[num,$2][@Denominator0,0]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL命中率分析"}, {"knowledge_name": "检查query_cache_size数据库参数", "knowledge_description": "检查query_cache_size数据库参数"}], "description": "查询缓存命中率不理想", "rule_name": "qcache_suboptimal", "id": "3835", "rule_expression": "[metric,2020199]>[num,$1] && [cib,2210002,query_cache_size]>[num,0] && [cib,2210002,query_cache_type][oper,neq][str,OFF] && [metric,2020425]>[num,$2] && [metric,2020411]<[num,$3]", "db_type": "MySQL", "warning_level": "1"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "mysql临时表缓存命中率分析", "knowledge_description": "mysql临时表缓存命中率分析"}, {"knowledge_description": "MySQL Top SQL-按创建临时表数排序"}, {"knowledge_name": "MySQL数据库临时表及临时表空间分析", "knowledge_description": "MySQL数据库临时表及临时表空间分析"}, {"knowledge_name": "检查sort_buffer_size数据库参数", "knowledge_description": "检查sort_buffer_size数据库参数"}], "description": "检测到磁盘临时表使用量过多", "rule_name": "tmp_disk_tables", "id": "3851", "rule_expression": "[metric,2020199]>[num,$1]&&[metric,2020405]<[num,$2]&&[metric,2020267]>[num,$3]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL Top SQL-按错误/警告数排序"}], "description": "5分钟内出现多次错误或告警的SQL语句，可能是应用发出", "rule_name": "error_sql", "id": "3819", "rule_expression": "[metric,2020424]>[num,$1]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "对MySQL的连接分布情况进行分析"}, {"knowledge_name": "检查max_connections数据库参数", "knowledge_description": "检查max_connections数据库参数"}, {"knowledge_name": "检查wait_timeout数据库参数", "knowledge_description": "检查wait_timeout数据库参数"}, {"knowledge_description": "对MySQL的运行状态进行分析"}], "description": "连接数接近或达到最大连接限制", "rule_name": "connection_exceed", "id": "3821", "rule_expression": "[metric,2020199]>[num,$1] && [metric,2020416]>[num,$2]", "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "对MySQL的运行状态进行分析"}, {"knowledge_name": "MySQL数据库重启检查", "knowledge_description": "MySQL数据库重启检查"}], "description": "数据库可能发生了重启", "rule_name": "db_restart", "id": "3861", "rule_expression": "[metric,2020199]<[num,$1] && [metric,2020453][oper,contains][str,20]", "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "对MySQL的连接分布情况进行分析"}], "description": "连续多次出现连接异常终止，报错Got an error reading communication packets", "rule_name": "aborted_connection", "id": "3817", "rule_expression": "[metric,2020206]>[num,$1] && [metric,2020401]<[num,$2]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "获取oom_score较高的TOP进程", "knowledge_description": "获取oom_score较高的TOP进程"}, {"knowledge_name": "服务器内存分析", "knowledge_description": "服务器内存分析"}], "description": "SWAP使用率高于70%且MYSQL的OOM SCORE超过50，数据库存在风险", "rule_name": "oom_killer_risk", "id": "6945", "rule_expression": "[metric,3001031]>[num,$1] && [metric,2020198]>[num,$2]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "显示当前数据库容量使用情况，以MB为单位", "knowledge_description": "显示当前数据库容量使用情况，以MB为单位"}, {"knowledge_name": "显示当前数据库系统前20个最大的数据库表相关容量信息", "knowledge_description": "显示当前数据库系统前20个最大的数据库表相关容量信息"}], "description": "Innodb共享表空间存在无法扩展风险", "rule_name": "ib_data_space", "id": "6922", "rule_expression": "[metric,2020400,IBDATA]>[num,$1] && [metric,2020431]>[num,$2]", "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL Innodb引擎状态分析"}, {"knowledge_description": "对MySQL的运行状态进行分析"}], "description": "Innodb引擎出现大量等待进入查询", "rule_name": "queries_in_queue", "id": "6918", "rule_expression": null, "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析performance_schema_hosts_lost", "knowledge_description": "分析performance_schema_hosts_lost"}, {"knowledge_name": "显示MySQL Server分配的内存大小", "knowledge_description": "显示MySQL Server分配的内存大小"}], "description": "performance_schema_hosts_size设置过小", "rule_name": "host_cache_low", "id": "3827", "rule_expression": "[metric,2020285]>[num,$1]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "MySQL数据库临时表及临时表空间分析", "knowledge_description": "MySQL数据库临时表及临时表空间分析"}, {"knowledge_description": "MySQL Top SQL-按创建临时表数排序"}], "description": "最大临时表大小超过5GB", "rule_name": "tmp_table_size", "id": "3863", "rule_expression": "[metric,2020428]>[num,$1]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL事务分析"}], "description": "事务回滚比例较大，应用可能出现异常", "rule_name": "rollback_ratio_high", "id": "7013", "rule_expression": "[metric,2020213]>[num,$1]&&[metric,2020214]<[num,$2]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL Top SQL-按创建临时表数排序"}, {"knowledge_description": "MySQL Top SQL-按排序行数排序"}, {"knowledge_description": "对MySQL的运行状态进行分析"}, {"knowledge_name": "mysql临时表缓存命中率分析", "knowledge_description": "mysql临时表缓存命中率分析"}, {"knowledge_name": "MySQL数据库临时表及临时表空间分析", "knowledge_description": "MySQL数据库临时表及临时表空间分析"}], "description": "Innodb临时表空间存在无法扩展风险", "rule_name": "ib_tmp_space", "id": "6924", "rule_expression": "[metric,2020400,IBTMP]>[num,$1] && [metric,2020433]>[num,$2]", "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析MySQL InnoDB 写入日志等待", "knowledge_description": "分析MySQL InnoDB 写入日志等待"}, {"knowledge_name": "检查数据库innodb_log_buffer_size参数是否设置合理", "knowledge_description": "检查数据库innodb_log_buffer_size参数是否设置合理"}, {"knowledge_name": "检查sync_binlog数据库参数", "knowledge_description": "检查sync_binlog数据库参数"}, {"knowledge_name": "检查innodb_flush_log_at_trx_commit数据库参数是否设置合理", "knowledge_description": "检查innodb_flush_log_at_trx_commit数据库参数是否设置合理"}, {"knowledge_name": "检查log_bin数据库参数", "knowledge_description": "检查log_bin数据库参数"}], "description": "Innodb日志等待可能是性能瓶颈", "rule_name": "log_nowait_low", "id": "3859", "rule_expression": "[metric,2020427]<[num,$1]&&[metric,2020254]>[num,$2]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "mysql表缓存命中率分析", "knowledge_description": "mysql表缓存命中率分析"}, {"knowledge_name": "检查table_open_cache_instances数据库参数", "knowledge_description": "检查table_open_cache_instances数据库参数"}], "description": "表缓存不是最佳的", "rule_name": "table_cache_suboptimal", "id": "3829", "rule_expression": "[metric,2020076]>[cib,2210002,table_open_cache]*[num,0.95] && [metric,2020273]>[num,$1]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL Thread Cache命中率分析"}, {"knowledge_name": "检查innodb_thread_concurrency数据库参数", "knowledge_description": "检查innodb_thread_concurrency数据库参数"}], "description": "线程缓存大小可能不是最佳的", "rule_name": "thread_cache_suboptimal", "id": "3831", "rule_expression": "[metric,2020199]>[num,$1] && [metric,2020412]<[num,$2] && [cib,2210002,thread_cache_size]>[num,0]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "未清理回滚日志数异常分析"}, {"knowledge_description": "MySQL事务分析"}, {"knowledge_description": "MySQL Innodb引擎状态分析"}], "description": "Innodb引擎未清除事务数过多", "rule_name": "trx_history_list", "id": "6920", "rule_expression": null, "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "每秒更新操作过多，是最近1小时平均数的5倍", "rule_name": "mysql_more_update", "id": "16299", "rule_expression": "[metric,2020160]/[metric hour avg,2020160]>[num,5] && [metric,2020160]>[bsl upper,2020160]*[num,1.2][@Denominator0,0]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL Top SQL汇总"}, {"knowledge_description": "对MySQL的运行状态进行分析"}], "description": "每秒逻辑读增长异常，是近1小时平均值的5倍", "rule_name": "mysql_bp_read", "id": "1326", "rule_expression": "[metric,2020237]/[metric hour avg,2020237]>[num,$1]&&[metric,2020237]>[bsl upper,2020237]*[num,$2][@Denominator0,0]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL文件IO汇总"}, {"knowledge_description": "MySQL Top SQL-按返回行数排序"}, {"knowledge_description": "MySQL Top SQL-按排序行数排序"}, {"knowledge_description": "MySQL Top SQL-按执行时间排序"}, {"knowledge_name": "显示数据库中未使用的索引信息", "knowledge_description": "显示数据库中未使用的索引信息"}], "description": "每秒物理读增长异常，是近1小时平均值的5倍", "rule_name": "mysql_physical_read", "id": "16302", "rule_expression": "[metric,2020238]/[metric hour avg,2020238]>[num,$1] && [metric,2020238]>[bsl upper,2020238]*[num,$2][@Denominator0,0]", "db_type": "MySQL", "warning_level": "3", "warning_message": "每秒物理读{[metric,2020238]}超出小时平均值{$1}倍，并且超过基线{$2}倍"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL Thread Cache命中率分析"}, {"knowledge_name": "检查innodb_thread_concurrency数据库参数", "knowledge_description": "检查innodb_thread_concurrency数据库参数"}], "description": "线程缓存大小可能不是最佳的", "rule_name": "thread_cache_suboptimal", "id": "11132", "rule_expression": "[metric,2020199]>[num,$1] && [metric,2020412]<[num,$2] && [cib,2210002,thread_cache_size]>[num,0]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "查看文件系统目录实时使用率", "knowledge_description": "查看文件系统目录实时使用率"}, {"knowledge_name": "检查log_bin数据库参数", "knowledge_description": "检查log_bin数据库参数"}], "description": "有90天以前生成的binlog未被清理，极大可能会导致磁盘空间不足", "rule_name": "mysql_no_del_binlog_90", "id": "8259", "rule_expression": "[metric,2020434] >  [num,$1]  && [metric,2020114] >  [num,$2] ", "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "每秒删除操作数过多，是最近1小时平均数的5倍", "rule_name": "mysql_more_delete", "id": "15285", "rule_expression": "[metric,2020159]/[metric hour avg,2020159]>[num,5] && [metric,2020159]>[bsl upper,2020159]*[num,1.2][@Denominator0,0]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "仅支持实时分析", "knowledge_description": "MySQL主从复制分析"}], "description": "MySQL从库的IO或SQL线程状态不是Yes", "rule_name": "mysql_slave_io_sql_running", "id": "8224", "rule_expression": "[metric max in time,30,2020450]<[num,3]", "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL Innodb引擎状态分析"}, {"knowledge_description": "对MySQL的运行状态进行分析"}], "description": "Innodb引擎出现大量等待进入查询", "rule_name": "queries_in_queue", "id": "6919", "rule_expression": null, "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "被驱动表的全表扫描次数过高", "rule_name": "mysql_select_full_join", "id": "16304", "rule_expression": "[metric in time,5,2020230][oper,>][num,$1]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析服务器IO设备的IO情况", "knowledge_description": "分析服务器IO设备的IO情况"}, {"knowledge_name": "MySQL数据库IO维度诊断", "knowledge_description": "MySQL数据库IO维度诊断"}, {"knowledge_description": "MySQL物理读高分析"}, {"knowledge_description": "分析物理写高"}], "description": "操作系统IO延时严重超标（超过100毫秒），数据库存在风险", "rule_name": "IO_latency_mysql_critical", "id": "8194", "rule_expression": "[metric,3000006]>[num,$1] && ([metric,3000100]>[num,$2] || [metric,3000101]>[num,$3])", "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "仅支持实时分析", "knowledge_description": "MySQL主从复制分析"}], "description": "MySQL从库的IO或SQL线程状态不是Yes", "rule_name": "mysql_slave_io_sql_running", "id": "16307", "rule_expression": "[metric max in time,30,2020450]<[num,3]", "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "仅支持实时分析", "knowledge_description": "MySQL主从复制分析"}, {"knowledge_name": "MySQL操作系统维度诊断", "knowledge_description": "MySQL操作系统维度诊断"}], "description": "MySQL主从复制延迟达到3600秒以上", "rule_name": "mysql_slave_is_lagging", "id": "8226", "rule_expression": "[metric max,2020451]>[num,$1]", "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "每秒异常断开客户端连接次数过多，超过5次", "rule_name": "mysql_aborted_clients", "id": "16270", "rule_expression": "[metric in time,5,2020454][oper,>][num,$1] ", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "获取oom_score较高的TOP进程", "knowledge_description": "获取oom_score较高的TOP进程"}, {"knowledge_name": "服务器内存分析", "knowledge_description": "服务器内存分析"}], "description": "SWAP使用率高于70%且MYSQL的OOM SCORE超过50，数据库存在风险", "rule_name": "oom_killer_risk", "id": "16311", "rule_expression": "[metric,3001031]>[num,$1] && [metric,2020198]>[num,$2]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "分析MySQL索引访问比例"}, {"knowledge_description": "MySQL Top SQL-按检查行数排序"}, {"knowledge_name": "获取指定数据库表的索引相关统计信息", "knowledge_description": "获取指定数据库表的索引相关统计信息"}, {"knowledge_name": "显示数据库中索引选择率较低的数据库对象信息", "knowledge_description": "显示数据库中索引选择率较低的数据库对象信息"}, {"knowledge_name": "显示数据库中未使用的索引信息", "knowledge_description": "显示数据库中未使用的索引信息"}], "description": "索引没有被有效利用", "rule_name": "index_used_suboptimal", "id": "3849", "rule_expression": "[metric,2020199]>[num,$1]&&[metric,2020223]>[num,$2]&&[metric,2020406]<[num,$3]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "mysql innodb数据块立即写入缓存比例分析", "knowledge_description": "mysql innodb数据块立即写入缓存比例分析"}, {"knowledge_name": "mysql innodb缓存命中率分析", "knowledge_description": "mysql innodb缓存命中率分析"}, {"knowledge_description": "对MySQL的运行状态进行分析"}, {"knowledge_description": "MySQL Top SQL-按执行时间排序"}, {"knowledge_name": "检查innodb_io_capacity数据库参数", "knowledge_description": "检查innodb_io_capacity数据库参数"}, {"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-MYSQL IO分析"}], "description": "Innodb缓存池写入可能是性能瓶颈", "rule_name": "buffer_nowait_low", "id": "3857", "rule_expression": "[metric,2020426]<[num,$1]&&[metric,2020238]>[num,$2]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL锁等待分析"}, {"knowledge_description": "MySQL Top SQL-按锁时间排序"}], "description": "行锁等待严重超时（超过3600秒)，数据库可能存在未提交的会话", "rule_name": "row_lock_wait_time_long_mysql", "id": "8196", "rule_expression": null, "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "mysql innodb缓存命中率分析", "knowledge_description": "mysql innodb缓存命中率分析"}, {"knowledge_description": "对MySQL的运行状态进行分析"}, {"knowledge_description": "MySQL物理读高分析"}, {"knowledge_description": "分析物理写高"}], "description": "Innodb缓冲区命中率不理想，低于95%", "rule_name": "buffer_cache_suboptimal", "id": "3839", "rule_expression": "[metric,2020199]>[num,$1] && [metric,2020402]<[num,$2] && [metric,2020237]>[num,$3]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL死锁检查"}], "description": "存在死锁", "rule_name": "mysql_deadlock", "id": "16636", "rule_expression": "[metric in time,30,2020155]>[num,0] ", "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "服务器内存分析", "knowledge_description": "服务器内存分析"}, {"knowledge_name": "MySQL内存分析", "knowledge_description": "MySQL内存分析"}, {"knowledge_name": "Swap占用较多的前30个线程", "knowledge_description": "Swap占用较多的前30个线程"}], "description": "物理内存空闲小于100M，且SWAP使用率大于90%，系统存在高风险", "rule_name": "swap_used_mysql_critical", "id": "16322", "rule_expression": "[metric,3000007]<[num,$1]*[num,1024] && [metric,3001031]>[num,$2]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "服务器内存分析", "knowledge_description": "服务器内存分析"}, {"knowledge_name": "MySQL内存分析", "knowledge_description": "MySQL内存分析"}, {"knowledge_name": "Swap占用较多的前30个线程", "knowledge_description": "Swap占用较多的前30个线程"}], "description": "物理内存空闲小于100M，且SWAP使用率大于90%，系统存在高风险", "rule_name": "swap_used_mysql_critical", "id": "8200", "rule_expression": "[metric,3000007]<[num,$1]*[num,1024] && [metric,3001031]>[num,$2]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "对MySQL的运行状态进行分析"}, {"knowledge_name": "操作系统核心资源分析", "knowledge_description": "操作系统核心资源分析"}, {"knowledge_name": "分析CPU使用情况", "knowledge_description": "分析CPU使用情况"}, {"knowledge_description": "分析指标、SQL相似度"}], "description": "操作系统r队列超过CPU数量的2倍且CPU使用率超过90%，则可能存在CPU资源瓶颈", "rule_name": "more_running_proc_mysql", "id": "8174", "rule_expression": "[metric,3000009]/[metric,3000010]>[num,$1] && [metric,3000003]>[num,$2]", "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "分析MySQL索引访问比例"}, {"knowledge_description": "MySQL Top SQL-按检查行数排序"}, {"knowledge_name": "获取指定数据库表的索引相关统计信息", "knowledge_description": "获取指定数据库表的索引相关统计信息"}, {"knowledge_name": "显示数据库中索引选择率较低的数据库对象信息", "knowledge_description": "显示数据库中索引选择率较低的数据库对象信息"}, {"knowledge_name": "显示数据库中未使用的索引信息", "knowledge_description": "显示数据库中未使用的索引信息"}], "description": "索引没有被有效利用", "rule_name": "index_used_suboptimal", "id": "5771", "rule_expression": "[metric,2020199]>[num,$1]&&[metric,2020223]>[num,$2]&&[metric,2020406]<[num,$3]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "对MySQL的运行状态进行分析"}, {"knowledge_description": "MySQL Top SQL-按锁时间排序"}], "description": "被锁定的查询数过多，超过5个", "rule_name": "locked_query", "id": "8887", "rule_expression": "[metric,2020422]>[num,$1]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "对MySQL的运行状态进行分析"}, {"knowledge_description": "对MySQL的Top SQL进行分析"}], "description": "活跃进程数量超过100", "rule_name": "mysql_active_threads", "id": "5751", "rule_expression": null, "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "对MySQL的运行状态进行分析"}, {"knowledge_description": "对MySQL的Top SQL进行分析"}], "description": "活跃进程数量超过100", "rule_name": "mysql_active_threads", "id": "16398", "rule_expression": null, "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "MySQL数据库InnoDB存储引擎参数检查", "knowledge_description": "MySQL数据库InnoDB存储引擎参数检查"}], "description": "BUFFER POOL的实例个数设置有误，超过了最大值64", "rule_name": "mysql_bufferpool_instances", "id": "8895", "rule_expression": "[cib,2210002,innodb_buffer_pool_instances]>[num,$1]", "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL锁等待分析"}, {"knowledge_description": "对MySQL的运行状态进行分析"}], "description": "非事务锁等待（包括等待刷新完成）并发数超过阀值", "rule_name": "mysql_rwlock_wait", "id": "11117", "rule_expression": null, "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "对MySQL的连接分布情况进行分析"}, {"knowledge_description": "对MySQL的运行状态进行分析"}], "description": "每秒登陆次数超过50次，说明数据库存在频繁登陆", "rule_name": "mysql_logon", "id": "8899", "rule_expression": null, "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL事务分析"}, {"knowledge_description": "MySQL锁等待分析"}, {"knowledge_description": "对MySQL的运行状态进行分析"}], "description": "事务持续时间超过阀值", "rule_name": "mysql_long_trx", "id": "8900", "rule_expression": null, "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "查看文件系统目录实时使用率", "knowledge_description": "查看文件系统目录实时使用率"}, {"knowledge_name": "检查log_bin数据库参数", "knowledge_description": "检查log_bin数据库参数"}], "description": "有30天以前生成的binlog未被清理，可能会导致磁盘空间不足", "rule_name": "mysql_no_del_binlog", "id": "8901", "rule_expression": "[metric,2020434] >  [num,$1] && [metric,2020114] >  [num,$2] ", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "查看文件系统目录实时使用率", "knowledge_description": "查看文件系统目录实时使用率"}, {"knowledge_name": "检查log_bin数据库参数", "knowledge_description": "检查log_bin数据库参数"}], "description": "有90天以前生成的binlog未被清理，极大可能会导致磁盘空间不足", "rule_name": "mysql_no_del_binlog_90", "id": "8902", "rule_expression": "[metric,2020434] >  [num,$1]  && [metric,2020114] >  [num,$2] ", "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "获取oom_score较高的TOP进程", "knowledge_description": "获取oom_score较高的TOP进程"}, {"knowledge_name": "服务器内存分析", "knowledge_description": "服务器内存分析"}], "description": "SWAP使用率高于70%且MYSQL的OOM SCORE超过50，数据库存在风险", "rule_name": "oom_killer_risk", "id": "8909", "rule_expression": "[metric,3001031]>[num,$1] && [metric,2020198]>[num,$2]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL并发SQL语句分析"}, {"knowledge_description": "SQL及等待链分析\t活跃会话过高时分析正在执行的的SQL语句及可能存在的等待链"}], "description": "相同SQL的并发数过多，超过5次", "rule_name": "mysql_similar_sqls", "id": "16677", "rule_expression": "[metric in time,30,2020170]>[num,4]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL锁等待分析"}, {"knowledge_description": "MySQL Top SQL-按锁时间排序"}], "description": "行锁等待严重超时（超过3600秒)，数据库可能存在未提交的会话", "rule_name": "row_lock_wait_time_long_mysql", "id": "8914", "rule_expression": null, "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL事务分析"}, {"knowledge_description": "MySQL锁等待分析"}, {"knowledge_description": "对MySQL的运行状态进行分析"}], "description": "事务持续时间超过阀值", "rule_name": "mysql_long_trx", "id": "5781", "rule_expression": null, "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "对MySQL的连接分布情况进行分析"}], "description": "连续多次出现连接异常终止，报错Got an error reading communication packets", "rule_name": "aborted_connection", "id": "16585", "rule_expression": "[metric,2020206]>[num,$1] && [metric,2020401]<[num,$2]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "mysql innodb缓存命中率分析", "knowledge_description": "mysql innodb缓存命中率分析"}, {"knowledge_description": "对MySQL的运行状态进行分析"}, {"knowledge_description": "MySQL物理读高分析"}, {"knowledge_description": "分析物理写高"}], "description": "Innodb缓冲区命中率不理想，低于95%", "rule_name": "buffer_cache_suboptimal", "id": "16586", "rule_expression": "[metric,2020199]>[num,$1] && [metric,2020402]<[num,$2] && [metric,2020237]>[num,$3]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "mysql innodb数据块立即写入缓存比例分析", "knowledge_description": "mysql innodb数据块立即写入缓存比例分析"}, {"knowledge_name": "mysql innodb缓存命中率分析", "knowledge_description": "mysql innodb缓存命中率分析"}, {"knowledge_description": "对MySQL的运行状态进行分析"}, {"knowledge_description": "MySQL Top SQL-按执行时间排序"}, {"knowledge_name": "检查innodb_io_capacity数据库参数", "knowledge_description": "检查innodb_io_capacity数据库参数"}, {"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-MYSQL IO分析"}], "description": "Innodb缓存池写入可能是性能瓶颈", "rule_name": "buffer_nowait_low", "id": "16587", "rule_expression": "[metric,2020426]<[num,$1]&&[metric,2020238]>[num,$2]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "操作系统核心资源分析", "knowledge_description": "操作系统核心资源分析"}, {"knowledge_name": "MySQL数据库负载指标分析", "knowledge_description": "MySQL数据库负载指标分析"}, {"knowledge_name": "分析服务器IO设备的IO情况", "knowledge_description": "分析服务器IO设备的IO情况"}, {"knowledge_name": "服务器内存分析", "knowledge_description": "服务器内存分析"}, {"knowledge_name": "MySQL数据库实例检查", "knowledge_description": "MySQL数据库实例检查"}, {"knowledge_description": "分析MySQL mutex锁"}, {"knowledge_description": "MySQL锁等待分析"}, {"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-MYSQL IO分析"}], "description": "数据库采集任务严重超时，数据库存在严重性能风险", "rule_name": "collector_exec_slow_mysql", "id": "16588", "rule_expression": "[metric,1000101] >([metric hour avg,1000101]*[num,$1])", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "对MySQL的连接分布情况进行分析"}, {"knowledge_name": "检查max_connections数据库参数", "knowledge_description": "检查max_connections数据库参数"}, {"knowledge_name": "检查wait_timeout数据库参数", "knowledge_description": "检查wait_timeout数据库参数"}, {"knowledge_description": "对MySQL的运行状态进行分析"}], "description": "连接数接近或达到最大连接限制", "rule_name": "connection_exceed", "id": "16589", "rule_expression": "[metric,2020199]>[num,$1] && [metric,2020416]>[num,$2]", "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "操作系统核心资源分析", "knowledge_description": "操作系统核心资源分析"}, {"knowledge_name": "MySQL数据库负载指标分析", "knowledge_description": "MySQL数据库负载指标分析"}, {"knowledge_name": "服务器内存分析", "knowledge_description": "服务器内存分析"}, {"knowledge_name": "分析服务器IO设备的IO情况", "knowledge_description": "分析服务器IO设备的IO情况"}, {"knowledge_name": "MySQL数据库实例检查", "knowledge_description": "MySQL数据库实例检查"}], "description": "数据库连接严重超时，数据库存在巨大风险", "rule_name": "connect_slow_mysql", "id": "16590", "rule_expression": "[metric,1000000][oper,eq][str,连接成功] && [metric,1000102] >([metric hour avg,1000102]*[num,$1])&& ([metric,1000102] >[num,$2])", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "对MySQL的运行状态进行分析"}, {"knowledge_name": "MySQL数据库重启检查", "knowledge_description": "MySQL数据库重启检查"}], "description": "数据库可能发生了重启", "rule_name": "db_restart", "id": "16591", "rule_expression": "[metric,2020199]<[num,$1] && [metric,2020453][oper,contains][str,20]", "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL Top SQL-按错误/警告数排序"}], "description": "5分钟内出现多次错误或告警的SQL语句，可能是应用发出", "rule_name": "error_sql", "id": "16592", "rule_expression": "[metric,2020424]>[num,$1]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "对MySQL的运行状态进行分析"}, {"knowledge_name": "检查lock_wait_timeout数据库参数", "knowledge_description": "检查lock_wait_timeout数据库参数"}, {"knowledge_name": "检查innodb_lock_wait_timeout数据库参数", "knowledge_description": "检查innodb_lock_wait_timeout数据库参数"}], "description": "元数据锁(flush table/lock table/ddl)等待时间超过10秒，可能会导致连锁反应", "rule_name": "flush_table", "id": "16593", "rule_expression": "[metric,2020421]>[num,$1]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "操作系统核心资源分析", "knowledge_description": "操作系统核心资源分析"}, {"knowledge_name": "MySQL数据库负载指标分析", "knowledge_description": "MySQL数据库负载指标分析"}, {"knowledge_name": "分析服务器IO设备的IO情况", "knowledge_description": "分析服务器IO设备的IO情况"}, {"knowledge_name": "服务器内存分析", "knowledge_description": "服务器内存分析"}, {"knowledge_name": "MySQL数据库实例检查", "knowledge_description": "MySQL数据库实例检查"}, {"knowledge_description": "分析MySQL mutex锁"}, {"knowledge_description": "MySQL锁等待分析"}, {"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-MYSQL IO分析"}], "description": "数据库采集任务严重超时，数据库存在严重性能风险", "rule_name": "collector_exec_slow_mysql", "id": "7003", "rule_expression": "[metric,1000101] >([metric hour avg,1000101]*[num,$1])", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析performance_schema_hosts_lost", "knowledge_description": "分析performance_schema_hosts_lost"}, {"knowledge_name": "显示MySQL Server分配的内存大小", "knowledge_description": "显示MySQL Server分配的内存大小"}], "description": "performance_schema_hosts_size设置过小", "rule_name": "host_cache_low", "id": "16595", "rule_expression": "[metric,2020285]>[num,$1]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "显示当前数据库容量使用情况，以MB为单位", "knowledge_description": "显示当前数据库容量使用情况，以MB为单位"}, {"knowledge_name": "显示当前数据库系统前20个最大的数据库表相关容量信息", "knowledge_description": "显示当前数据库系统前20个最大的数据库表相关容量信息"}], "description": "Innodb共享表空间存在无法扩展风险", "rule_name": "ib_data_space", "id": "16596", "rule_expression": "[metric,2020400,IBDATA]>[num,$1] && [metric,2020431]>[num,$2]", "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL Top SQL-按创建临时表数排序"}, {"knowledge_description": "MySQL Top SQL-按排序行数排序"}, {"knowledge_description": "对MySQL的运行状态进行分析"}, {"knowledge_name": "mysql临时表缓存命中率分析", "knowledge_description": "mysql临时表缓存命中率分析"}, {"knowledge_name": "MySQL数据库临时表及临时表空间分析", "knowledge_description": "MySQL数据库临时表及临时表空间分析"}], "description": "Innodb临时表空间存在无法扩展风险", "rule_name": "ib_tmp_space", "id": "16597", "rule_expression": "[metric,2020400,IBTMP]>[num,$1] && [metric,2020433]>[num,$2]", "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "分析MySQL索引访问比例"}, {"knowledge_description": "MySQL Top SQL-按检查行数排序"}, {"knowledge_name": "获取指定数据库表的索引相关统计信息", "knowledge_description": "获取指定数据库表的索引相关统计信息"}, {"knowledge_name": "显示数据库中索引选择率较低的数据库对象信息", "knowledge_description": "显示数据库中索引选择率较低的数据库对象信息"}, {"knowledge_name": "显示数据库中未使用的索引信息", "knowledge_description": "显示数据库中未使用的索引信息"}], "description": "索引没有被有效利用", "rule_name": "index_used_suboptimal", "id": "16598", "rule_expression": "[metric,2020199]>[num,$1]&&[metric,2020223]>[num,$2]&&[metric,2020406]<[num,$3]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL文件IO汇总"}, {"knowledge_description": "MySQL Top SQL-按返回行数排序"}, {"knowledge_description": "MySQL Top SQL-按排序行数排序"}, {"knowledge_description": "MySQL Top SQL-按执行时间排序"}, {"knowledge_name": "显示数据库中未使用的索引信息", "knowledge_description": "显示数据库中未使用的索引信息"}], "description": "每秒物理读增长异常，是近1小时平均值的5倍", "rule_name": "mysql_physical_read", "id": "7011", "rule_expression": "[metric,2020238]/[metric hour avg,2020238]>[num,$1] && [metric,2020238]>[bsl upper,2020238]*[num,$2][@Denominator0,0]", "db_type": "MySQL", "warning_level": "3", "warning_message": "每秒物理读{[metric,2020238]}超出小时平均值{$1}倍，并且超过基线{$2}倍"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析服务器IO设备的IO情况", "knowledge_description": "分析服务器IO设备的IO情况"}, {"knowledge_name": "MySQL数据库IO维度诊断", "knowledge_description": "MySQL数据库IO维度诊断"}, {"knowledge_description": "MySQL物理读高分析"}, {"knowledge_description": "分析物理写高"}], "description": "操作系统IO延时严重超标（超过100毫秒），数据库存在风险", "rule_name": "IO_latency_mysql_critical", "id": "16601", "rule_expression": "[metric,3000006]>[num,$1] && ([metric,3000100]>[num,$2] || [metric,3000101]>[num,$3])", "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析MySQL MyISAM key buffer命中率", "knowledge_description": "分析MySQL MyISAM key buffer命中率"}], "description": "Key缓冲区大小可能不是最佳的", "rule_name": "key_buffer_suboptimal", "id": "16602", "rule_expression": "[metric,2020199]>[num,$1] && [metric,2020283]>[num,$2] && [metric,2020410]<[num,$3]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "对MySQL的运行状态进行分析"}, {"knowledge_description": "MySQL Top SQL-按锁时间排序"}], "description": "被锁定的查询数过多，超过5个", "rule_name": "locked_query", "id": "16603", "rule_expression": "[metric,2020422]>[num,$1]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析MySQL InnoDB 写入日志等待", "knowledge_description": "分析MySQL InnoDB 写入日志等待"}, {"knowledge_name": "检查数据库innodb_log_buffer_size参数是否设置合理", "knowledge_description": "检查数据库innodb_log_buffer_size参数是否设置合理"}, {"knowledge_name": "检查sync_binlog数据库参数", "knowledge_description": "检查sync_binlog数据库参数"}, {"knowledge_name": "检查innodb_flush_log_at_trx_commit数据库参数是否设置合理", "knowledge_description": "检查innodb_flush_log_at_trx_commit数据库参数是否设置合理"}, {"knowledge_name": "检查log_bin数据库参数", "knowledge_description": "检查log_bin数据库参数"}], "description": "Innodb日志等待可能是性能瓶颈", "rule_name": "log_nowait_low", "id": "16604", "rule_expression": "[metric,2020427]<[num,$1]&&[metric,2020254]>[num,$2]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "操作系统核心资源分析", "knowledge_description": "操作系统核心资源分析"}, {"knowledge_name": "MySQL数据库负载指标分析", "knowledge_description": "MySQL数据库负载指标分析"}, {"knowledge_name": "服务器内存分析", "knowledge_description": "服务器内存分析"}, {"knowledge_name": "分析服务器IO设备的IO情况", "knowledge_description": "分析服务器IO设备的IO情况"}, {"knowledge_name": "MySQL数据库实例检查", "knowledge_description": "MySQL数据库实例检查"}], "description": "数据库连接严重超时，数据库存在巨大风险", "rule_name": "connect_slow_mysql", "id": "11088", "rule_expression": "[metric,1000000][oper,eq][str,连接成功] && [metric,1000102] >([metric hour avg,1000102]*[num,$1])&& ([metric,1000102] >[num,$2])", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "网络诊断工具包", "knowledge_description": "网络诊断工具包"}, {"knowledge_description": "TCP/IP协议分析"}], "description": "高可用数据库服务器间通信延迟较大", "rule_name": "mysql_comm_delay", "id": "15244", "rule_expression": "[metric,1001021,max]>[num,$1]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL锁等待分析"}, {"knowledge_description": "MySQL锁等待分析"}], "description": "MySQL MDL锁时间过长，请及时处理", "rule_name": "mysql_mdl_lock_warn", "id": "13416", "rule_expression": "[metric,2020153]>[num,$1]", "db_type": "MySQL", "warning_level": "4", "warning_message": "当前MDL锁时间为：{[metric,2020153]} 秒，MDL锁数量为：{[metric,2020152]} "}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "服务器内存分析", "knowledge_description": "服务器内存分析"}, {"knowledge_name": "MySQL内存分析", "knowledge_description": "MySQL内存分析"}, {"knowledge_name": "Swap占用较多的前30个线程", "knowledge_description": "Swap占用较多的前30个线程"}], "description": "内存不可用率过高，超过90%，可能存在换页和OOM Kill的风险\t", "rule_name": "memory_used_high_mysql", "id": "16606", "rule_expression": "[metric,3000014]>[num,$1]  && [metric,3001031]>[num,$2]", "db_type": "MySQL", "warning_level": "4", "warning_message": "指标< Mem unavailable >(内存不可用率)过高，操作系统内存出现严重不足，可能存在换页和OOM Kill的风险。内存不可用率：（{[metric,3000014]}%）且swap usage达到{[metric,3001031]}%。"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "MGR集群中节点状态异常", "rule_name": "mg_member_state_error", "id": "16608", "rule_expression": "[metric in time,30,2020446]>[num,0] ", "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "每秒更新操作过多，是最近1小时平均数的5倍", "rule_name": "mysql_more_update", "id": "15289", "rule_expression": "[metric,2020160]/[metric hour avg,2020160]>[num,5] && [metric,2020160]>[bsl upper,2020160]*[num,1.2][@Denominator0,0]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "查看文件系统目录实时使用率", "knowledge_description": "查看文件系统目录实时使用率"}, {"knowledge_name": "检查log_bin数据库参数", "knowledge_description": "检查log_bin数据库参数"}], "description": "有90天以前生成的binlog未被清理，极大可能会导致磁盘空间不足", "rule_name": "mysql_no_del_binlog_90", "id": "8260", "rule_expression": "[metric,2020434] >  [num,$1]  && [metric,2020114] >  [num,$2] ", "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL锁等待分析"}, {"knowledge_description": "对MySQL的运行状态进行分析"}], "description": "非事务锁等待（包括等待刷新完成）并发数超过阀值", "rule_name": "mysql_rwlock_wait", "id": "5783", "rule_expression": null, "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL文件IO汇总"}, {"knowledge_description": "MySQL Top SQL-按返回行数排序"}, {"knowledge_description": "MySQL Top SQL-按排序行数排序"}, {"knowledge_description": "MySQL Top SQL-按执行时间排序"}, {"knowledge_name": "显示数据库中未使用的索引信息", "knowledge_description": "显示数据库中未使用的索引信息"}], "description": "每秒物理读增长异常，是近1小时平均值的5倍", "rule_name": "mysql_physical_read", "id": "11116", "rule_expression": "[metric,2020238]/[metric hour avg,2020238]>[num,$1] && [metric,2020238]>[bsl upper,2020238]*[num,$2][@Denominator0,0]", "db_type": "MySQL", "warning_level": "3", "warning_message": "每秒物理读{[metric,2020238]}超出小时平均值{$1}倍，并且超过基线{$2}倍"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL锁等待分析"}, {"knowledge_description": "对MySQL的运行状态进行分析"}], "description": "Innodb事务锁等待并发数超过阀值", "rule_name": "mysql_txlock_wait", "id": "11121", "rule_expression": null, "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL锁等待分析"}, {"knowledge_description": "MySQL Top SQL-按锁时间排序"}], "description": "行锁等待严重超时（超过3600秒)，数据库可能存在未提交的会话", "rule_name": "row_lock_wait_time_long_mysql", "id": "11127", "rule_expression": null, "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析服务器IO设备的IO情况", "knowledge_description": "分析服务器IO设备的IO情况"}, {"knowledge_name": "分析服务器IO设备的IO情况", "knowledge_description": "分析服务器IO设备的IO情况"}], "description": "脏页比例超过30%并且每秒日志量超过每秒写大小的1.5倍，IO延迟超过10ms，数据库IO可能存在问题", "rule_name": "slow_io_lead_to_more_dirty_buffer", "id": "15093", "rule_expression": "([metric ,2020137]>[num,$1]) && (([metric ,2020303]/[metric,2020247])>=[num,$2]) &&([metric,3000006] >=[num,$3])", "db_type": "MySQL", "warning_level": "3", "warning_message": "脏页比例超过30%并且每秒日志量超过每秒写大小的1.5倍，IO延迟超过10ms，数据库IO可能存在问题"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "预编译语句执行比例过低分析", "knowledge_description": "预编译语句执行比例过低分析"}], "description": "未有效使用预编译语句", "rule_name": "stmt_used_suboptimal", "id": "11128", "rule_expression": "[metric,2020212]>[num,$1]&&[metric,2020211]/[metric,2020212]<[num,$2]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "MGR集群存在事务冲突", "rule_name": "mgr_confict_tranactions", "id": "16610", "rule_expression": "[metric in time,30,2020446]>[num,0] ", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "对MySQL的运行状态进行分析"}, {"knowledge_description": "对MySQL的Top SQL进行分析"}], "description": "活跃进程数量超过100", "rule_name": "mysql_active_threads", "id": "16624", "rule_expression": null, "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL锁等待分析"}, {"knowledge_description": "MySQL Top SQL-按锁时间排序"}, {"knowledge_name": "检查lock_wait_timeout数据库参数", "knowledge_description": "检查lock_wait_timeout数据库参数"}, {"knowledge_name": "检查innodb_lock_wait_timeout数据库参数", "knowledge_description": "检查innodb_lock_wait_timeout数据库参数"}], "description": "表锁过度竞争,每秒表锁等待数超过2次", "rule_name": "table_lock_contenion", "id": "11131", "rule_expression": "[metric,2020199]>[num,$1]&&[metric,2020404]<[num,$2]&&[metric,2020265]>[num,$3]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "服务器内存分析", "knowledge_description": "服务器内存分析"}, {"knowledge_name": "MySQL内存分析", "knowledge_description": "MySQL内存分析"}, {"knowledge_name": "Swap占用较多的前30个线程", "knowledge_description": "Swap占用较多的前30个线程"}], "description": "物理内存空闲小于100M，且SWAP使用率大于90%，系统存在高风险", "rule_name": "swap_used_mysql_critical", "id": "11129", "rule_expression": "[metric,3000007]<[num,$1]*[num,1024] && [metric,3001031]>[num,$2]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "mysql表缓存命中率分析", "knowledge_description": "mysql表缓存命中率分析"}, {"knowledge_name": "检查table_open_cache_instances数据库参数", "knowledge_description": "检查table_open_cache_instances数据库参数"}], "description": "表缓存不是最佳的", "rule_name": "table_cache_suboptimal", "id": "11130", "rule_expression": "[metric,2020076]>[cib,2210002,table_open_cache]*[num,0.95] && [metric,2020273]>[num,$1]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析performance_schema_hosts_lost", "knowledge_description": "分析performance_schema_hosts_lost"}, {"knowledge_name": "显示MySQL Server分配的内存大小", "knowledge_description": "显示MySQL Server分配的内存大小"}], "description": "performance_schema_hosts_size设置过小", "rule_name": "host_cache_low", "id": "5770", "rule_expression": "[metric,2020285]>[num,$1]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "MGR集群发生FC(流量控制)，集群处于暂停状态", "rule_name": "mgr_flow_control_paused", "id": "16611", "rule_expression": "[metric in time,5,2020154]>[num,0] ", "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析MySQL MyISAM key buffer命中率", "knowledge_description": "分析MySQL MyISAM key buffer命中率"}], "description": "Key缓冲区大小可能不是最佳的", "rule_name": "key_buffer_suboptimal", "id": "3837", "rule_expression": "[metric,2020199]>[num,$1] && [metric,2020283]>[num,$2] && [metric,2020410]<[num,$3]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL MGR分析"}, {"knowledge_description": "对MySQL的运行状态进行分析"}], "description": "MGR集群处于不可用状态", "rule_name": "mgr_unavailable", "id": "16614", "rule_expression": "[metric in time,30,2020446]>[num,0] && [metric in time,30,2020446]>[metric in time,30,2020447]", "db_type": "MySQL", "warning_level": "4", "warning_message": "MGR集群中离线成员数为：{[metric in time,30,2020446]} 大于 在线成员数：{[metric in time,30,2020447]}，集群处于不可用状态，请及时处理。"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "mysql临时表缓存命中率分析", "knowledge_description": "mysql临时表缓存命中率分析"}, {"knowledge_description": "MySQL Top SQL-按创建临时表数排序"}, {"knowledge_name": "MySQL数据库临时表及临时表空间分析", "knowledge_description": "MySQL数据库临时表及临时表空间分析"}, {"knowledge_name": "检查sort_buffer_size数据库参数", "knowledge_description": "检查sort_buffer_size数据库参数"}], "description": "检测到磁盘临时表使用量过多", "rule_name": "tmp_disk_tables", "id": "11133", "rule_expression": "[metric,2020199]>[num,$1]&&[metric,2020405]<[num,$2]&&[metric,2020267]>[num,$3]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "MGR集群中有成员处于离线状态", "rule_name": "mgr_offline_members", "id": "16613", "rule_expression": "[metric in time,30,2020446]>[num,0] ", "db_type": "MySQL", "warning_level": "4", "warning_message": "MGR集群中离线节点数为：{[metric in time,30,2020446]>[num,0] }，请立即检查"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "操作系统核心资源分析", "knowledge_description": "操作系统核心资源分析"}, {"knowledge_name": "MySQL数据库负载指标分析", "knowledge_description": "MySQL数据库负载指标分析"}, {"knowledge_name": "服务器内存分析", "knowledge_description": "服务器内存分析"}, {"knowledge_name": "分析服务器IO设备的IO情况", "knowledge_description": "分析服务器IO设备的IO情况"}, {"knowledge_name": "MySQL数据库实例检查", "knowledge_description": "MySQL数据库实例检查"}], "description": "数据库连接严重超时，数据库存在巨大风险", "rule_name": "connect_slow_mysql", "id": "6991", "rule_expression": "[metric,1000000][oper,eq][str,连接成功] && [metric,1000102] >([metric hour avg,1000102]*[num,$1])&& ([metric,1000102] >[num,$2])", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "MySQL数据库临时表及临时表空间分析", "knowledge_description": "MySQL数据库临时表及临时表空间分析"}, {"knowledge_description": "MySQL Top SQL-按创建临时表数排序"}], "description": "最大临时表大小超过3GB", "rule_name": "tmp_table_size", "id": "11134", "rule_expression": "[metric,2020428]>[num,$1]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "检查MySQL数据库参数", "knowledge_description": "检查MySQL数据库参数"}, {"knowledge_name": "分析服务器IO设备的IO情况", "knowledge_description": "分析服务器IO设备的IO情况"}], "description": "日志文件中存在大量page_cleaner警告，innodb_lru_scan_depth参数设置过大，建议调小该参数或提升IO能力", "rule_name": "more_page_cleaner_warn_in_logfile", "id": "16616", "rule_expression": "[cib,2210002,innodb_lru_scan_depth]>=[num,$1] && [metric,3000006]>[num,$2] && [metric,2020505]>[num,$3]", "db_type": "MySQL", "warning_level": "2", "warning_message": "日志文件中存在大量page_cleaner警告，innodb_lru_scan_depth参数设置过大，建议调小该参数或提升IO能力"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "对MySQL的运行状态进行分析"}, {"knowledge_name": "操作系统核心资源分析", "knowledge_description": "操作系统核心资源分析"}, {"knowledge_name": "分析CPU使用情况", "knowledge_description": "分析CPU使用情况"}, {"knowledge_description": "分析指标、SQL相似度"}], "description": "操作系统r队列超过CPU数量的2倍且CPU使用率超过90%，则可能存在CPU资源瓶颈", "rule_name": "more_running_proc_mysql", "id": "16617", "rule_expression": "[metric,3000009]/[metric,3000010]>[num,$1] && [metric,3000003]>[num,$2]", "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "仅支持实时分析", "knowledge_description": "MySQL主从复制分析"}], "description": "MySQL从库的IO或SQL线程状态不是Yes", "rule_name": "mysql_slave_io_sql_running", "id": "11118", "rule_expression": "[metric max in time,30,2020450]<[num,3]", "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "仅支持实时分析", "knowledge_description": "MySQL主从复制分析"}, {"knowledge_name": "MySQL操作系统维度诊断", "knowledge_description": "MySQL操作系统维度诊断"}], "description": "MySQL主从复制延迟达到3600秒以上", "rule_name": "mysql_slave_is_lagging", "id": "11119", "rule_expression": "[metric max,2020451]>[num,$1]", "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "每秒异常断开客户端连接次数过多，超过5次", "rule_name": "mysql_aborted_clients", "id": "16621", "rule_expression": "[metric in time,5,2020454][oper,>][num,$1] ", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "对MySQL的连接分布情况进行分析"}], "description": "每秒连接服务端失败次数过高，超过1次", "rule_name": "mysql_aborted_connects", "id": "16623", "rule_expression": "[metric in time,5,2020206][oper,>][num,$1] ", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "活跃会话数突增，是近1小时平均值的2倍", "rule_name": "myql_more_active_session", "id": "16619", "rule_expression": "[metric,2020069]/[metric hour avg,2020069]>[num,5] && [metric,2020069]>[bsl upper,2020069]*[num,1.2][@Denominator0,0]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "检查query_cache_size数据库参数", "knowledge_description": "检查query_cache_size数据库参数"}], "description": "查询缓存可能不足", "rule_name": "qcache_low", "id": "5786", "rule_expression": "[cib,2210002,query_cache_size]>[num,0] && [cib,2210002,query_cache_type][oper,neq][str,OFF] && [metric,2020284]>[num,$1]", "db_type": "MySQL", "warning_level": "1"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "已启用查询缓存，建议关闭", "rule_name": "mysql_enable_query_cache", "id": "16638", "rule_expression": "[cib,2210002,query_cache_type] [oper,eq][str,OFF]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "对MySQL的连接分布情况进行分析"}], "description": "客户端登录验证失败次数过多，可能应用配置的凭证信息未及时更新", "rule_name": "mysql_authentication_errors", "id": "16626", "rule_expression": "[metric in time,30,2020507]>[num,0]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "数据库点测超时或失败", "rule_name": "mysql_beacon", "id": "16628", "rule_expression": "[metric in time,30,1000106]>[num,60]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "分析MySQL Binlog缓存命中率"}], "description": "binlog缓存内存命中率较低，对记录binlog的性能有影响", "rule_name": "mysql_binlog_cache", "id": "16629", "rule_expression": "[metric,2020092] >[num,0] && ([metric,2020092]-[metric,2020091])*[num,100]/[metric,2020092] < [num,$1]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL Top SQL汇总"}, {"knowledge_description": "对MySQL的运行状态进行分析"}], "description": "每秒逻辑读增长异常，是近1小时平均值的5倍", "rule_name": "mysql_bp_read", "id": "16630", "rule_expression": "[metric,2020237]/[metric hour avg,2020237]>[num,$1]&&[metric,2020237]>[bsl upper,2020237]*[num,$2][@Denominator0,0]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL Top SQL-按错误/警告数排序"}], "description": "5分钟内出现多次错误或告警的SQL语句，可能是应用发出", "rule_name": "error_sql", "id": "5768", "rule_expression": "[metric,2020424]>[num,$1]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "MySQL数据库InnoDB存储引擎参数检查", "knowledge_description": "MySQL数据库InnoDB存储引擎参数检查"}], "description": "BUFFER POOL的实例个数设置有误，超过了最大值64", "rule_name": "mysql_bufferpool_instances", "id": "16631", "rule_expression": "[cib,2210002,innodb_buffer_pool_instances]>[num,$1]", "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "MySQL数据库InnoDB存储引擎参数检查", "knowledge_description": "MySQL数据库InnoDB存储引擎参数检查"}], "description": "BUFFER POOL的大小小于1G,但缓冲池实例个数大于1", "rule_name": "mysql_bufferpool_less_than1G", "id": "16632", "rule_expression": "[cib,2210002,innodb_buffer_pool_size]/[num,1024]/[num,1024]/[num,1024]<[num,$1]&&[cib,2210002,innodb_buffer_pool_instances]>[num,$2]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "网络诊断工具包", "knowledge_description": "网络诊断工具包"}, {"knowledge_description": "TCP/IP协议分析"}], "description": "高可用数据库服务器间通信延迟较大", "rule_name": "mysql_comm_delay", "id": "16634", "rule_expression": "[metric,1001021,max]>[num,$1]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析服务器IO设备的IO情况", "knowledge_description": "分析服务器IO设备的IO情况"}, {"knowledge_description": "MySQL Top SQL汇总"}, {"knowledge_name": "根据事件类型查数据库IO延时情况", "knowledge_description": "根据事件类型查数据库IO延时情况"}], "description": "每秒数据文件读增长异常，是近1小时平均值的5倍", "rule_name": "mysql_file_read", "id": "16639", "rule_expression": "[metric,2020243]/[metric hour avg,2020243]>[num,$1]&&[metric,2020243]>[bsl upper,2020243]*[num,$2][@Denominator0,0]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "innodb_log_file相关参数检查"}], "description": "REDO LOG大小的参数设置太合理，会切换日志文件切换次数过高，造成磁盘IO压力过大", "rule_name": "mysql_innodb_log_size_pct", "id": "16640", "rule_expression": "([cib,2210002,innodb_log_file_size]*[cib,2210002,innodb_log_files_in_group] * [num,100] / [cib,2210002,innodb_buffer_pool_size] <[num,$1] || [cib,2210002,innodb_log_file_size]*[cib,2210002,innodb_log_files_in_group] * [num,100] / [cib,2210002,innodb_buffer_pool_size] >[num,$2]) && [metric in time,30,2020303] * [num,3600] / [cib,2210002,innodb_log_file_size] > [num,5]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL Innodb引擎状态分析"}, {"knowledge_description": "对MySQL的运行状态进行分析"}], "description": "Innodb引擎出现大量等待进入查询", "rule_name": "queries_in_queue", "id": "8912", "rule_expression": null, "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "分析MySQL数据文件写等待"}], "description": "每秒数据文件写阻塞次数过大", "rule_name": "mysql_innodb_pending_wirtes", "id": "16644", "rule_expression": "[metric in time,5,2020249][oper,>][num,$1] ", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "每秒数据文件读阻塞次数过高", "rule_name": "mysql_innodb_pending_reads", "id": "16642", "rule_expression": "[metric in time,5,2020245][oper,>][num,$1] ", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "对MySQL的连接分布情况进行分析"}, {"knowledge_description": "对MySQL的运行状态进行分析"}], "description": "每秒登陆次数超过50次，说明数据库存在频繁登陆", "rule_name": "mysql_logon", "id": "16649", "rule_expression": null, "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "仅支持实时分析", "knowledge_description": "MySQL主从复制分析"}], "description": "MySQL从库的IO或SQL线程状态不是Yes", "rule_name": "mysql_slave_io_sql_running", "id": "16678", "rule_expression": "[metric max in time,30,2020450]<[num,3]", "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL事务分析"}, {"knowledge_description": "MySQL锁等待分析"}, {"knowledge_description": "对MySQL的运行状态进行分析"}], "description": "事务持续时间超过阀值", "rule_name": "mysql_long_trx", "id": "16652", "rule_expression": null, "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL锁等待分析"}, {"knowledge_description": "MySQL锁等待分析"}], "description": "MySQL MDL锁时间过长，请及时处理", "rule_name": "mysql_mdl_lock_warn", "id": "16653", "rule_expression": "[metric,2020153]>[num,$1]", "db_type": "MySQL", "warning_level": "4", "warning_message": "当前MDL锁时间为：{[metric,2020153]} 秒，MDL锁数量为：{[metric,2020152]} "}}
{"type": "rule", "data": {"knowledge_id": [], "description": "InnoDB 平均获取行锁时间大于5毫秒", "rule_name": "mysql_innodb_row_lock_time_avg", "id": "16646", "rule_expression": "[metric in time,5,2020261][oper,>][num,$1] ", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "显示指定时间间隔内的日志信息"}], "description": "日志文件增长过快", "rule_name": "mysql_logs", "id": "16651", "rule_expression": "[metric,2020437]/[metric hour avg,2020444]>[num,5] && [metric,2020437]>[bsl upper,2020444]*[num,1.2][@Denominator0,0]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "显示MySQL Server分配的内存大小", "knowledge_description": "显示MySQL Server分配的内存大小"}], "description": "MySQL进程占用内存持续增长，存在内存泄露可能", "rule_name": "mysql_memory", "id": "16655", "rule_expression": "[metric in time,10,2020455]>[num,1048576] && [metric in time,10,2020456]>[num,10]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL Latch等待检查"}], "description": "latch获取存在较长时间的等待", "rule_name": "mysql_latch", "id": "16648", "rule_expression": "[metric in time,30,2020172]>[num,0]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "活跃会话数突增，是近1小时平均值的2倍", "rule_name": "myql_more_active_session", "id": "15267", "rule_expression": "[metric,2020069]/[metric hour avg,2020069]>[num,5] && [metric,2020069]>[bsl upper,2020069]*[num,1.2][@Denominator0,0]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "数据库点测超时或失败", "rule_name": "mysql_beacon", "id": "15272", "rule_expression": "[metric in time,30,1000106]>[num,60]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "每秒删除操作数过多，是最近1小时平均数的5倍", "rule_name": "mysql_more_delete", "id": "16658", "rule_expression": "[metric,2020159]/[metric hour avg,2020159]>[num,5] && [metric,2020159]>[bsl upper,2020159]*[num,1.2][@Denominator0,0]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "对MySQL的运行状态进行分析"}, {"knowledge_name": "检查lock_wait_timeout数据库参数", "knowledge_description": "检查lock_wait_timeout数据库参数"}, {"knowledge_name": "检查innodb_lock_wait_timeout数据库参数", "knowledge_description": "检查innodb_lock_wait_timeout数据库参数"}], "description": "元数据锁(flush table/lock table/ddl)等待时间超过10秒，可能会导致连锁反应", "rule_name": "flush_table", "id": "5769", "rule_expression": "[metric,2020421]>[num,$1]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "显示当前数据库容量使用情况，以MB为单位", "knowledge_description": "显示当前数据库容量使用情况，以MB为单位"}, {"knowledge_name": "显示当前数据库系统前20个最大的数据库表相关容量信息", "knowledge_description": "显示当前数据库系统前20个最大的数据库表相关容量信息"}], "description": "Innodb共享表空间存在无法扩展风险", "rule_name": "ib_data_space", "id": "6923", "rule_expression": "[metric,2020400,IBDATA]>[num,$1] && [metric,2020431]>[num,$2]", "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "每秒插入操作数过多，是最近1小时平均数的5倍", "rule_name": "mysql_more_insert", "id": "16660", "rule_expression": "[metric,2020161]/[metric hour avg,2020161]>[num,5] && [metric,2020161]>[bsl upper,2020161]*[num,1.2][@Denominator0,0]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "每秒产生日志过多，是近1小时平均值的5倍", "rule_name": "mysql_more_log", "id": "16662", "rule_expression": "[metric,2020303]/[metric hour avg,2020303]>[num,5] && [metric,2020303]>[bsl upper,2020303]*[num,1.2][@Denominator0,0]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "MySQL数据库临时表及临时表空间分析", "knowledge_description": "MySQL数据库临时表及临时表空间分析"}, {"knowledge_description": "MySQL Top SQL-按创建临时表数排序"}], "description": "最大临时表大小超过5GB", "rule_name": "tmp_table_size", "id": "16327", "rule_expression": "[metric,2020428]>[num,$1]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "分析MySQL Binlog缓存命中率"}], "description": "binlog缓存内存命中率较低，对记录binlog的性能有影响", "rule_name": "mysql_binlog_cache", "id": "8254", "rule_expression": "[metric,2020092] >[num,0] && ([metric,2020092]-[metric,2020091])*[num,100]/[metric,2020092] < [num,$1]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "网络诊断工具包", "knowledge_description": "网络诊断工具包"}, {"knowledge_description": "TCP/IP协议分析"}], "description": "高可用数据库服务器间通信延迟较大", "rule_name": "mysql_comm_delay", "id": "15273", "rule_expression": "[metric,1001021,max]>[num,$1]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "每秒查询数过多，是最近1小时平均数的5倍", "rule_name": "mysql_more_select", "id": "16665", "rule_expression": "[metric,2020207]/[metric hour avg,2020207]>[num,5] && [metric,2020207]>[bsl upper,2020207]*[num,1.2][@Denominator0,0]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "每秒更新操作过多，是最近1小时平均数的5倍", "rule_name": "mysql_more_update", "id": "16667", "rule_expression": "[metric,2020160]/[metric hour avg,2020160]>[num,5] && [metric,2020160]>[bsl upper,2020160]*[num,1.2][@Denominator0,0]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL死锁检查"}], "description": "存在死锁", "rule_name": "mysql_deadlock", "id": "15277", "rule_expression": "[metric in time,30,2020155]>[num,0] ", "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "每秒数据文件读阻塞次数过高", "rule_name": "mysql_innodb_pending_reads", "id": "15279", "rule_expression": "[metric in time,5,2020245][oper,>][num,$1] ", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "查看文件系统目录实时使用率", "knowledge_description": "查看文件系统目录实时使用率"}, {"knowledge_name": "检查log_bin数据库参数", "knowledge_description": "检查log_bin数据库参数"}], "description": "有30天以前生成的binlog未被清理，可能会导致磁盘空间不足", "rule_name": "mysql_no_del_binlog", "id": "16668", "rule_expression": "[metric,2020434] >  [num,$1] && [metric,2020114] >  [num,$2] ", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "查看文件系统目录实时使用率", "knowledge_description": "查看文件系统目录实时使用率"}, {"knowledge_name": "检查log_bin数据库参数", "knowledge_description": "检查log_bin数据库参数"}], "description": "有90天以前生成的binlog未被清理，极大可能会导致磁盘空间不足", "rule_name": "mysql_no_del_binlog_90", "id": "16669", "rule_expression": "[metric,2020434] >  [num,$1]  && [metric,2020114] >  [num,$2] ", "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "每秒插入操作数过多，是最近1小时平均数的5倍", "rule_name": "mysql_more_insert", "id": "15286", "rule_expression": "[metric,2020161]/[metric hour avg,2020161]>[num,5] && [metric,2020161]>[bsl upper,2020161]*[num,1.2][@Denominator0,0]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "被驱动表的全表扫描次数过高", "rule_name": "mysql_select_full_join", "id": "16672", "rule_expression": "[metric in time,5,2020230][oper,>][num,$1]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL文件IO汇总"}, {"knowledge_description": "MySQL Top SQL-按返回行数排序"}, {"knowledge_description": "MySQL Top SQL-按排序行数排序"}, {"knowledge_description": "MySQL Top SQL-按执行时间排序"}, {"knowledge_name": "显示数据库中未使用的索引信息", "knowledge_description": "显示数据库中未使用的索引信息"}], "description": "每秒物理读增长异常，是近1小时平均值的5倍", "rule_name": "mysql_physical_read", "id": "16670", "rule_expression": "[metric,2020238]/[metric hour avg,2020238]>[num,$1] && [metric,2020238]>[bsl upper,2020238]*[num,$2][@Denominator0,0]", "db_type": "MySQL", "warning_level": "3", "warning_message": "每秒物理读{[metric,2020238]}超出小时平均值{$1}倍，并且超过基线{$2}倍"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "分析MySQL数据文件写等待"}], "description": "每秒数据文件写阻塞次数过大", "rule_name": "mysql_innodb_pending_wirtes", "id": "15280", "rule_expression": "[metric in time,5,2020249][oper,>][num,$1] ", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL锁等待分析"}, {"knowledge_description": "对MySQL的运行状态进行分析"}], "description": "非事务锁等待（包括等待刷新完成）并发数超过阀值", "rule_name": "mysql_rwlock_wait", "id": "16671", "rule_expression": null, "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "对MySQL的运行状态进行分析"}, {"knowledge_description": "对MySQL的Top SQL进行分析"}], "description": "活跃进程数量超过100", "rule_name": "mysql_active_threads", "id": "11105", "rule_expression": null, "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "InnoDB 平均获取行锁时间大于5毫秒", "rule_name": "mysql_innodb_row_lock_time_avg", "id": "15281", "rule_expression": "[metric in time,5,2020261][oper,>][num,$1] ", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "显示指定时间间隔内的日志信息"}], "description": "日志文件增长过快", "rule_name": "mysql_logs", "id": "15283", "rule_expression": "[metric,2020437]/[metric hour avg,2020444]>[num,5] && [metric,2020437]>[bsl upper,2020444]*[num,1.2][@Denominator0,0]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "显示MySQL Server分配的内存大小", "knowledge_description": "显示MySQL Server分配的内存大小"}], "description": "MySQL进程占用内存持续增长，存在内存泄露可能", "rule_name": "mysql_memory", "id": "15284", "rule_expression": "[metric in time,10,2020455]>[num,1048576] && [metric in time,10,2020456]>[num,10]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "预编译语句执行比例过低分析", "knowledge_description": "预编译语句执行比例过低分析"}], "description": "未有效使用预编译语句", "rule_name": "stmt_used_suboptimal", "id": "16696", "rule_expression": "[metric,2020212]>[num,$1]&&[metric,2020211]/[metric,2020212]<[num,$2]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "每秒产生日志过多，是近1小时平均值的5倍", "rule_name": "mysql_more_log", "id": "15287", "rule_expression": "[metric,2020303]/[metric hour avg,2020303]>[num,5] && [metric,2020303]>[bsl upper,2020303]*[num,1.2][@Denominator0,0]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "每秒查询数过多，是最近1小时平均数的5倍", "rule_name": "mysql_more_select", "id": "15288", "rule_expression": "[metric,2020207]/[metric hour avg,2020207]>[num,5] && [metric,2020207]>[bsl upper,2020207]*[num,1.2][@Denominator0,0]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "被驱动表的全表扫描次数过高", "rule_name": "mysql_select_full_join", "id": "15291", "rule_expression": "[metric in time,5,2020230][oper,>][num,$1]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "最外层的驱动表全表扫描次数过高", "rule_name": "mysql_select_scan", "id": "15292", "rule_expression": "[metric in time,5,2020229][oper,>][num,$1]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL锁等待分析"}, {"knowledge_description": "对MySQL的运行状态进行分析"}], "description": "Innodb事务锁等待并发数超过阀值", "rule_name": "mysql_txlock_wait", "id": "5784", "rule_expression": null, "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "查看文件系统目录实时使用率", "knowledge_description": "查看文件系统目录实时使用率"}, {"knowledge_name": "检查log_bin数据库参数", "knowledge_description": "检查log_bin数据库参数"}], "description": "有30天以前生成的binlog未被清理，可能会导致磁盘空间不足", "rule_name": "mysql_no_del_binlog", "id": "8256", "rule_expression": "[metric,2020434] >  [num,$1] && [metric,2020114] >  [num,$2] ", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL文件IO汇总"}, {"knowledge_description": "MySQL Top SQL-按返回行数排序"}, {"knowledge_description": "MySQL Top SQL-按排序行数排序"}, {"knowledge_description": "MySQL Top SQL-按执行时间排序"}, {"knowledge_name": "显示数据库中未使用的索引信息", "knowledge_description": "显示数据库中未使用的索引信息"}], "description": "每秒物理读增长异常，是近1小时平均值的5倍", "rule_name": "mysql_physical_read", "id": "7012", "rule_expression": "[metric,2020238]/[metric hour avg,2020238]>[num,$1] && [metric,2020238]>[bsl upper,2020238]*[num,$2][@Denominator0,0]", "db_type": "MySQL", "warning_level": "3", "warning_message": "每秒物理读{[metric,2020238]}超出小时平均值{$1}倍，并且超过基线{$2}倍"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "最外层的驱动表全表扫描次数过高", "rule_name": "mysql_select_scan", "id": "16675", "rule_expression": "[metric in time,5,2020229][oper,>][num,$1]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "仅支持实时分析", "knowledge_description": "MySQL主从复制分析"}, {"knowledge_name": "MySQL操作系统维度诊断", "knowledge_description": "MySQL操作系统维度诊断"}], "description": "MySQL主从复制延迟达到3600秒以上", "rule_name": "mysql_slave_is_lagging", "id": "16679", "rule_expression": "[metric max,2020451]>[num,$1]", "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL锁等待分析"}, {"knowledge_description": "对MySQL的运行状态进行分析"}], "description": "Innodb事务锁等待并发数超过阀值", "rule_name": "mysql_txlock_wait", "id": "16680", "rule_expression": null, "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "获取oom_score较高的TOP进程", "knowledge_description": "获取oom_score较高的TOP进程"}, {"knowledge_name": "服务器内存分析", "knowledge_description": "服务器内存分析"}], "description": "SWAP使用率高于70%且MYSQL的OOM SCORE超过50，数据库存在风险", "rule_name": "oom_killer_risk", "id": "6946", "rule_expression": "[metric,3001031]>[num,$1] && [metric,2020198]>[num,$2]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "发现有状态为\"Waiting in connection_control plugin\"的等待连接", "rule_name": "mysql_waiting_ connection_control", "id": "15294", "rule_expression": "[metric in time,5,2020450][oper,<][num,$1]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "仅支持实时分析", "knowledge_description": "MySQL主从复制分析"}], "description": "MySQL从库的IO或SQL线程状态不是Yes", "rule_name": "mysql_slave_io_sql_running", "id": "8225", "rule_expression": "[metric max in time,30,2020450]<[num,3]", "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "mysql innodb缓存命中率分析", "knowledge_description": "mysql innodb缓存命中率分析"}, {"knowledge_description": "对MySQL的运行状态进行分析"}, {"knowledge_description": "MySQL物理读高分析"}, {"knowledge_description": "分析物理写高"}], "description": "Innodb缓冲区命中率不理想，低于95%", "rule_name": "buffer_cache_suboptimal", "id": "11084", "rule_expression": "[metric,2020199]>[num,$1] && [metric,2020402]<[num,$2] && [metric,2020237]>[num,$3]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "mysql innodb数据块立即写入缓存比例分析", "knowledge_description": "mysql innodb数据块立即写入缓存比例分析"}, {"knowledge_name": "mysql innodb缓存命中率分析", "knowledge_description": "mysql innodb缓存命中率分析"}, {"knowledge_description": "对MySQL的运行状态进行分析"}, {"knowledge_description": "MySQL Top SQL-按执行时间排序"}, {"knowledge_name": "检查innodb_io_capacity数据库参数", "knowledge_description": "检查innodb_io_capacity数据库参数"}, {"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-MYSQL IO分析"}], "description": "Innodb缓存池写入可能是性能瓶颈", "rule_name": "buffer_nowait_low", "id": "11085", "rule_expression": "[metric,2020426]<[num,$1]&&[metric,2020238]>[num,$2]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "发现有状态为\"Waiting in connection_control plugin\"的等待连接", "rule_name": "mysql_waiting_ connection_control", "id": "16682", "rule_expression": "[metric in time,5,2020450][oper,<][num,$1]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "获取oom_score较高的TOP进程", "knowledge_description": "获取oom_score较高的TOP进程"}, {"knowledge_name": "服务器内存分析", "knowledge_description": "服务器内存分析"}], "description": "SWAP使用率高于70%且MYSQL的OOM SCORE超过50，数据库存在风险", "rule_name": "oom_killer_risk", "id": "16683", "rule_expression": "[metric,3001031]>[num,$1] && [metric,2020198]>[num,$2]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "检查query_cache_size数据库参数", "knowledge_description": "检查query_cache_size数据库参数"}], "description": "查询缓存可能不足", "rule_name": "qcache_low", "id": "16684", "rule_expression": "[cib,2210002,query_cache_size]>[num,0] && [cib,2210002,query_cache_type][oper,neq][str,OFF] && [metric,2020284]>[num,$1]", "db_type": "MySQL", "warning_level": "1"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL命中率分析"}, {"knowledge_name": "检查query_cache_size数据库参数", "knowledge_description": "检查query_cache_size数据库参数"}], "description": "查询缓存命中率不理想", "rule_name": "qcache_suboptimal", "id": "16685", "rule_expression": "[metric,2020199]>[num,$1] && [cib,2210002,query_cache_size]>[num,0] && [cib,2210002,query_cache_type][oper,neq][str,OFF] && [metric,2020425]>[num,$2] && [metric,2020411]<[num,$3]", "db_type": "MySQL", "warning_level": "1"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL Innodb引擎状态分析"}, {"knowledge_description": "对MySQL的运行状态进行分析"}], "description": "Innodb引擎出现大量等待进入查询", "rule_name": "queries_in_queue", "id": "16686", "rule_expression": null, "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL事务分析"}], "description": "事务回滚比例较大，应用可能出现异常", "rule_name": "rollback_ratio_high", "id": "16687", "rule_expression": "[metric,2020213]>[num,$1]&&[metric,2020214]<[num,$2]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL锁等待分析"}, {"knowledge_description": "MySQL Top SQL-按锁时间排序"}], "description": "行锁等待严重超时（超过3600秒)，数据库可能存在未提交的会话", "rule_name": "row_lock_wait_time_long_mysql", "id": "16688", "rule_expression": null, "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "分析MySQL索引访问比例"}, {"knowledge_description": "MySQL Top SQL-按检查行数排序"}, {"knowledge_name": "获取指定数据库表的索引相关统计信息", "knowledge_description": "获取指定数据库表的索引相关统计信息"}, {"knowledge_name": "显示数据库中索引选择率较低的数据库对象信息", "knowledge_description": "显示数据库中索引选择率较低的数据库对象信息"}, {"knowledge_name": "显示数据库中未使用的索引信息", "knowledge_description": "显示数据库中未使用的索引信息"}], "description": "索引没有被有效利用", "rule_name": "index_used_suboptimal", "id": "11096", "rule_expression": "[metric,2020199]>[num,$1]&&[metric,2020223]>[num,$2]&&[metric,2020406]<[num,$3]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "检查数据库参数", "knowledge_description": "检查数据库参数"}, {"knowledge_name": "检查数据库参数", "knowledge_description": "检查数据库参数"}], "description": "从库日志中频繁出现命中slave_pending_jobs_size_max的告警，slave_pending_jobs_size_max参数设置过小，可能会导致主从延迟", "rule_name": "slave_db_slave_pending_jobs_size_max_too_small", "id": "16690", "rule_expression": "[metric,2020506]>[num,$1] && [cib,2210002,slave_pending_jobs_size_max]<=[num,$1]", "db_type": "MySQL", "warning_level": "2", "warning_message": "从库日志中频繁出现命中slave_pending_jobs_size_max的告警，slave_pending_jobs_size_max参数设置过小，可能会导致主从延迟"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析服务器IO设备的IO情况", "knowledge_description": "分析服务器IO设备的IO情况"}, {"knowledge_name": "分析服务器IO设备的IO情况", "knowledge_description": "分析服务器IO设备的IO情况"}], "description": "脏页比例超过30%并且每秒日志量超过每秒写大小的1.5倍，IO延迟超过10ms，数据库IO可能存在问题", "rule_name": "slow_io_lead_to_more_dirty_buffer", "id": "16692", "rule_expression": "([metric ,2020137]>[num,$1]) && (([metric ,2020303]/[metric,2020247])>=[num,$2]) &&([metric,3000006] >=[num,$3])", "db_type": "MySQL", "warning_level": "3", "warning_message": "脏页比例超过30%并且每秒日志量超过每秒写大小的1.5倍，IO延迟超过10ms，数据库IO可能存在问题"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL命中率分析"}, {"knowledge_name": "检查query_cache_size数据库参数", "knowledge_description": "检查query_cache_size数据库参数"}], "description": "查询缓存命中率不理想", "rule_name": "qcache_suboptimal", "id": "5787", "rule_expression": "[metric,2020199]>[num,$1] && [cib,2210002,query_cache_size]>[num,0] && [cib,2210002,query_cache_type][oper,neq][str,OFF] && [metric,2020425]>[num,$2] && [metric,2020411]<[num,$3]", "db_type": "MySQL", "warning_level": "1"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL事务分析"}], "description": "事务回滚比例较大，应用可能出现异常", "rule_name": "rollback_ratio_high", "id": "7014", "rule_expression": "[metric,2020213]>[num,$1]&&[metric,2020214]<[num,$2]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL锁等待分析"}, {"knowledge_description": "MySQL Top SQL-按锁时间排序"}], "description": "行锁等待严重超时（超过3600秒)，数据库可能存在未提交的会话", "rule_name": "row_lock_wait_time_long_mysql", "id": "8197", "rule_expression": null, "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL Thread Cache命中率分析"}, {"knowledge_name": "检查innodb_thread_concurrency数据库参数", "knowledge_description": "检查innodb_thread_concurrency数据库参数"}], "description": "线程缓存大小可能不是最佳的", "rule_name": "thread_cache_suboptimal", "id": "5793", "rule_expression": "[metric,2020199]>[num,$1] && [metric,2020412]<[num,$2] && [cib,2210002,thread_cache_size]>[num,0]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "MySQL数据库临时表及临时表空间分析", "knowledge_description": "MySQL数据库临时表及临时表空间分析"}, {"knowledge_description": "MySQL Top SQL-按创建临时表数排序"}], "description": "最大临时表大小超过5GB", "rule_name": "tmp_table_size", "id": "5795", "rule_expression": "[metric,2020428]>[num,$1]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL Top SQL-按排序行数排序"}, {"knowledge_description": "MySQL Top SQL-按创建临时表数排序"}, {"knowledge_description": "MySQL Top SQL-按排序行数排序"}, {"knowledge_description": "MySQL Top SQL-按创建临时表数排序"}], "description": "排序过多且排序内存设置较小导致文件排序过多", "rule_name": "sort_buffer_size_too_small", "id": "16695", "rule_expression": "[cib,2210002,sort_buffer_size]<[num,$1] && [metric,2020504]>[num,$2] && [metric,2020267]>[num,$3]", "db_type": "MySQL", "warning_level": "3", "warning_message": "排序过多且排序内存设置较小导致文件排序过多"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "MGR集群中节点状态异常", "rule_name": "mg_member_state_error", "id": "15065", "rule_expression": "[metric in time,30,2020446]>[num,0] ", "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "服务器内存分析", "knowledge_description": "服务器内存分析"}, {"knowledge_name": "MySQL内存分析", "knowledge_description": "MySQL内存分析"}, {"knowledge_name": "Swap占用较多的前30个线程", "knowledge_description": "Swap占用较多的前30个线程"}], "description": "物理内存空闲小于100M，且SWAP使用率大于90%，系统存在高风险", "rule_name": "swap_used_mysql_critical", "id": "16697", "rule_expression": "[metric,3000007]<[num,$1]*[num,1024] && [metric,3001031]>[num,$2]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "mysql表缓存命中率分析", "knowledge_description": "mysql表缓存命中率分析"}, {"knowledge_name": "检查table_open_cache_instances数据库参数", "knowledge_description": "检查table_open_cache_instances数据库参数"}], "description": "表缓存不是最佳的", "rule_name": "table_cache_suboptimal", "id": "16698", "rule_expression": "[metric,2020076]>[cib,2210002,table_open_cache]*[num,0.95] && [metric,2020273]>[num,$1]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL锁等待分析"}, {"knowledge_description": "MySQL Top SQL-按锁时间排序"}, {"knowledge_name": "检查lock_wait_timeout数据库参数", "knowledge_description": "检查lock_wait_timeout数据库参数"}, {"knowledge_name": "检查innodb_lock_wait_timeout数据库参数", "knowledge_description": "检查innodb_lock_wait_timeout数据库参数"}], "description": "表锁过度竞争,每秒表锁等待数超过2次", "rule_name": "table_lock_contenion", "id": "16699", "rule_expression": "[metric,2020199]>[num,$1]&&[metric,2020404]<[num,$2]&&[metric,2020265]>[num,$3]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL Thread Cache命中率分析"}, {"knowledge_name": "检查innodb_thread_concurrency数据库参数", "knowledge_description": "检查innodb_thread_concurrency数据库参数"}], "description": "线程缓存大小可能不是最佳的", "rule_name": "thread_cache_suboptimal", "id": "16700", "rule_expression": "[metric,2020199]>[num,$1] && [metric,2020412]<[num,$2] && [cib,2210002,thread_cache_size]>[num,0]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "mysql临时表缓存命中率分析", "knowledge_description": "mysql临时表缓存命中率分析"}, {"knowledge_description": "MySQL Top SQL-按创建临时表数排序"}, {"knowledge_name": "MySQL数据库临时表及临时表空间分析", "knowledge_description": "MySQL数据库临时表及临时表空间分析"}, {"knowledge_name": "检查sort_buffer_size数据库参数", "knowledge_description": "检查sort_buffer_size数据库参数"}], "description": "检测到磁盘临时表使用量过多", "rule_name": "tmp_disk_tables", "id": "16701", "rule_expression": "[metric,2020199]>[num,$1]&&[metric,2020405]<[num,$2]&&[metric,2020267]>[num,$3]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "MySQL数据库临时表及临时表空间分析", "knowledge_description": "MySQL数据库临时表及临时表空间分析"}, {"knowledge_description": "MySQL Top SQL-按创建临时表数排序"}], "description": "最大临时表大小超过5GB", "rule_name": "tmp_table_size", "id": "16702", "rule_expression": "[metric,2020428]>[num,$1]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL MGR分析"}, {"knowledge_description": "对MySQL的运行状态进行分析"}], "description": "MGR集群处于不可用状态", "rule_name": "mgr_unavailable", "id": "6926", "rule_expression": "[metric in time,30,2020446]>[num,0] && [metric in time,30,2020446]>[metric in time,30,2020447]", "db_type": "MySQL", "warning_level": "4", "warning_message": "MGR集群中离线成员数为：{[metric in time,30,2020446]} 大于 在线成员数：{[metric in time,30,2020447]}，集群处于不可用状态，请及时处理。"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL MGR分析"}, {"knowledge_description": "对MySQL的运行状态进行分析"}], "description": "MGR集群处于不可用状态", "rule_name": "mgr_unavailable", "id": "6927", "rule_expression": "[metric in time,30,2020446]>[num,0] && [metric in time,30,2020446]>[metric in time,30,2020447]", "db_type": "MySQL", "warning_level": "4", "warning_message": "MGR集群中离线成员数为：{[metric in time,30,2020446]} 大于 在线成员数：{[metric in time,30,2020447]}，集群处于不可用状态，请及时处理。"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "mysql innodb数据块立即写入缓存比例分析", "knowledge_description": "mysql innodb数据块立即写入缓存比例分析"}, {"knowledge_name": "mysql innodb缓存命中率分析", "knowledge_description": "mysql innodb缓存命中率分析"}, {"knowledge_description": "对MySQL的运行状态进行分析"}, {"knowledge_description": "MySQL Top SQL-按执行时间排序"}, {"knowledge_name": "检查innodb_io_capacity数据库参数", "knowledge_description": "检查innodb_io_capacity数据库参数"}, {"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-MYSQL IO分析"}], "description": "Innodb缓存池写入可能是性能瓶颈", "rule_name": "buffer_nowait_low", "id": "8873", "rule_expression": "[metric,2020426]<[num,$1]&&[metric,2020238]>[num,$2]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "操作系统核心资源分析", "knowledge_description": "操作系统核心资源分析"}, {"knowledge_name": "MySQL数据库负载指标分析", "knowledge_description": "MySQL数据库负载指标分析"}, {"knowledge_name": "分析服务器IO设备的IO情况", "knowledge_description": "分析服务器IO设备的IO情况"}, {"knowledge_name": "服务器内存分析", "knowledge_description": "服务器内存分析"}, {"knowledge_name": "MySQL数据库实例检查", "knowledge_description": "MySQL数据库实例检查"}, {"knowledge_description": "分析MySQL mutex锁"}, {"knowledge_description": "MySQL锁等待分析"}, {"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-MYSQL IO分析"}], "description": "数据库采集任务严重超时，数据库存在严重性能风险", "rule_name": "collector_exec_slow_mysql", "id": "8874", "rule_expression": "[metric,1000101] >([metric hour avg,1000101]*[num,$1])", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL Top SQL-按错误/警告数排序"}], "description": "5分钟内出现多次错误或告警的SQL语句，可能是应用发出", "rule_name": "error_sql", "id": "11090", "rule_expression": "[metric,2020424]>[num,$1]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "MGR集群中有成员处于离线状态", "rule_name": "mgr_offline_members", "id": "15061", "rule_expression": "[metric in time,30,2020446]>[num,0] ", "db_type": "MySQL", "warning_level": "4", "warning_message": "MGR集群中离线节点数为：{[metric in time,30,2020446]>[num,0] }，请立即检查"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "MGR集群中节点状态异常", "rule_name": "mg_member_state_error", "id": "15064", "rule_expression": "[metric in time,30,2020446]>[num,0] ", "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "MGR集群存在事务冲突", "rule_name": "mgr_confict_tranactions", "id": "15069", "rule_expression": "[metric in time,30,2020446]>[num,0] ", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "对MySQL的运行状态进行分析"}, {"knowledge_name": "操作系统核心资源分析", "knowledge_description": "操作系统核心资源分析"}, {"knowledge_name": "分析CPU使用情况", "knowledge_description": "分析CPU使用情况"}, {"knowledge_description": "分析指标、SQL相似度"}], "description": "操作系统r队列超过CPU数量的2倍且CPU使用率超过90%，则可能存在CPU资源瓶颈", "rule_name": "more_running_proc_mysql", "id": "11104", "rule_expression": "[metric,3000009]/[metric,3000010]>[num,$1] && [metric,3000003]>[num,$2]", "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "MGR集群中有成员处于离线状态", "rule_name": "mgr_offline_members", "id": "15058", "rule_expression": "[metric in time,30,2020446]>[num,0] ", "db_type": "MySQL", "warning_level": "4", "warning_message": "MGR集群中离线节点数为：{[metric in time,30,2020446]>[num,0] }，请立即检查"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "MGR集群中节点状态异常", "rule_name": "mg_member_state_error", "id": "15062", "rule_expression": "[metric in time,30,2020446]>[num,0] ", "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "MGR集群存在事务冲突", "rule_name": "mgr_confict_tranactions", "id": "15066", "rule_expression": "[metric in time,30,2020446]>[num,0] ", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "仅支持实时分析", "knowledge_description": "MySQL主从复制分析"}], "description": "MySQL从库的IO或SQL线程状态不是Yes", "rule_name": "mysql_slave_io_sql_running", "id": "8905", "rule_expression": "[metric max in time,30,2020450]<[num,3]", "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL MGR分析"}, {"knowledge_description": "对MySQL的运行状态进行分析"}], "description": "MGR集群处于不可用状态", "rule_name": "mgr_unavailable", "id": "11103", "rule_expression": "[metric in time,30,2020446]>[num,0] && [metric in time,30,2020446]>[metric in time,30,2020447]", "db_type": "MySQL", "warning_level": "4", "warning_message": "MGR集群中离线成员数为：{[metric in time,30,2020446]} 大于 在线成员数：{[metric in time,30,2020447]}，集群处于不可用状态，请及时处理。"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL锁等待分析"}, {"knowledge_description": "对MySQL的运行状态进行分析"}], "description": "Innodb事务锁等待并发数超过阀值", "rule_name": "mysql_txlock_wait", "id": "8908", "rule_expression": null, "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "对MySQL的连接分布情况进行分析"}], "description": "连续多次出现连接异常终止，报错Got an error reading communication packets", "rule_name": "aborted_connection", "id": "11083", "rule_expression": "[metric,2020206]>[num,$1] && [metric,2020401]<[num,$2]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "对MySQL的运行状态进行分析"}, {"knowledge_name": "MySQL数据库重启检查", "knowledge_description": "MySQL数据库重启检查"}], "description": "数据库可能发生了重启", "rule_name": "db_restart", "id": "11089", "rule_expression": "[metric,2020199]<[num,$1] && [metric,2020453][oper,contains][str,20]", "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析performance_schema_hosts_lost", "knowledge_description": "分析performance_schema_hosts_lost"}, {"knowledge_name": "显示MySQL Server分配的内存大小", "knowledge_description": "显示MySQL Server分配的内存大小"}], "description": "performance_schema_hosts_size设置过小", "rule_name": "host_cache_low", "id": "11093", "rule_expression": "[metric,2020285]>[num,$1]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "仅支持实时分析", "knowledge_description": "MySQL主从复制分析"}, {"knowledge_name": "MySQL操作系统维度诊断", "knowledge_description": "MySQL操作系统维度诊断"}], "description": "MySQL主从复制延迟达到3600秒以上", "rule_name": "mysql_slave_is_lagging", "id": "8906", "rule_expression": "[metric max,2020451]>[num,$1]", "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "对MySQL的运行状态进行分析"}, {"knowledge_description": "MySQL Top SQL-按锁时间排序"}], "description": "被锁定的查询数过多，超过5个", "rule_name": "locked_query", "id": "11100", "rule_expression": "[metric,2020422]>[num,$1]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL慢查询日志分析"}], "description": "每秒慢查询数大于1且每秒慢查询超过每秒查询数量的20%，说明数据库性能存在较多的慢查询，数据库性能低下", "rule_name": "slow_query_too_more", "id": "15074", "rule_expression": "[metric,2020287]>=[num,$1] && ([metric,2020287]/[metric,2020207]>[num,$2] )", "db_type": "MySQL", "warning_level": "3", "warning_message": "每秒慢查询数大于1且每秒慢查询超过每秒查询数量的20%，说明数据库性能存在较多的慢查询，数据库性能低下"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL死锁检查"}], "description": "存在死锁", "rule_name": "mysql_deadlock", "id": "15081", "rule_expression": "[metric in time,30,2020155]>[num,0] ", "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL死锁检查"}], "description": "存在死锁", "rule_name": "mysql_deadlock", "id": "15078", "rule_expression": "[metric in time,30,2020155]>[num,0] ", "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL死锁检查"}], "description": "存在死锁", "rule_name": "mysql_deadlock", "id": "15080", "rule_expression": "[metric in time,30,2020155]>[num,0] ", "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "对MySQL的运行状态进行分析"}, {"knowledge_description": "MySQL Top SQL-按执行时间排序"}, {"knowledge_name": "检查slow_query_log数据库参数", "knowledge_description": "检查slow_query_log数据库参数"}, {"knowledge_name": "检查long_query_time数据库参数", "knowledge_description": "检查long_query_time数据库参数"}], "description": "长时间运行的查询数过多", "rule_name": "long_running", "id": "8889", "rule_expression": "[metric,2020423]>[num,$1]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "被驱动表的全表扫描次数过高", "rule_name": "mysql_select_full_join", "id": "15141", "rule_expression": "[metric in time,5,2020230][oper,>][num,$1]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "MGR集群中节点状态异常", "rule_name": "mg_member_state_error", "id": "16262", "rule_expression": "[metric in time,30,2020446]>[num,0] ", "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "已启用查询缓存，建议关闭", "rule_name": "mysql_enable_query_cache", "id": "15082", "rule_expression": "[cib,2210002,query_cache_type] [oper,eq][str,OFF]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析服务器IO设备的IO情况", "knowledge_description": "分析服务器IO设备的IO情况"}, {"knowledge_name": "分析服务器IO设备的IO情况", "knowledge_description": "分析服务器IO设备的IO情况"}], "description": "脏页比例超过30%并且每秒日志量超过每秒写大小的1.5倍，IO延迟超过10ms，数据库IO可能存在问题", "rule_name": "slow_io_lead_to_more_dirty_buffer", "id": "15090", "rule_expression": "([metric ,2020137]>[num,$1]) && (([metric ,2020303]/[metric,2020247])>=[num,$2]) &&([metric,3000006] >=[num,$3])", "db_type": "MySQL", "warning_level": "3", "warning_message": "脏页比例超过30%并且每秒日志量超过每秒写大小的1.5倍，IO延迟超过10ms，数据库IO可能存在问题"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "对MySQL的连接分布情况进行分析"}], "description": "每秒连接服务端失败次数过高，超过1次", "rule_name": "mysql_aborted_connects", "id": "16271", "rule_expression": "[metric in time,5,2020206][oper,>][num,$1] ", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "对MySQL的连接分布情况进行分析"}], "description": "每秒连接服务端失败次数过高，超过1次", "rule_name": "mysql_aborted_connects", "id": "15153", "rule_expression": "[metric in time,5,2020206][oper,>][num,$1] ", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "发现有状态为\"Waiting in connection_control plugin\"的等待连接", "rule_name": "mysql_waiting_ connection_control", "id": "15094", "rule_expression": "[metric in time,5,2020450][oper,<][num,$1]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "MySQL数据库InnoDB存储引擎参数检查", "knowledge_description": "MySQL数据库InnoDB存储引擎参数检查"}], "description": "BUFFER POOL的大小小于1G,但缓冲池实例个数大于1", "rule_name": "mysql_bufferpool_less_than1G", "id": "11109", "rule_expression": "[cib,2210002,innodb_buffer_pool_size]/[num,1024]/[num,1024]/[num,1024]<[num,$1]&&[cib,2210002,innodb_buffer_pool_instances]>[num,$2]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL Top SQL-按排序行数排序"}, {"knowledge_description": "MySQL Top SQL-按创建临时表数排序"}, {"knowledge_description": "MySQL Top SQL-按排序行数排序"}, {"knowledge_description": "MySQL Top SQL-按创建临时表数排序"}], "description": "排序过多且排序内存设置较小导致文件排序过多", "rule_name": "sort_buffer_size_too_small", "id": "15654", "rule_expression": "[cib,2210002,sort_buffer_size]<[num,$1] && [metric,2020504]>[num,$2] && [metric,2020267]>[num,$3]", "db_type": "MySQL", "warning_level": "3", "warning_message": "排序过多且排序内存设置较小导致文件排序过多"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL Top SQL-按排序行数排序"}, {"knowledge_description": "MySQL Top SQL-按创建临时表数排序"}, {"knowledge_description": "MySQL Top SQL-按排序行数排序"}, {"knowledge_description": "MySQL Top SQL-按创建临时表数排序"}], "description": "排序过多且排序内存设置较小导致文件排序过多", "rule_name": "sort_buffer_size_too_small", "id": "15655", "rule_expression": "[cib,2210002,sort_buffer_size]<[num,$1] && [metric,2020504]>[num,$2] && [metric,2020267]>[num,$3]", "db_type": "MySQL", "warning_level": "3", "warning_message": "排序过多且排序内存设置较小导致文件排序过多"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL事务分析"}, {"knowledge_description": "MySQL锁等待分析"}, {"knowledge_description": "对MySQL的运行状态进行分析"}], "description": "事务持续时间超过阀值", "rule_name": "mysql_long_trx", "id": "11113", "rule_expression": null, "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL Top SQL-按排序行数排序"}, {"knowledge_description": "MySQL Top SQL-按创建临时表数排序"}, {"knowledge_description": "MySQL Top SQL-按排序行数排序"}, {"knowledge_description": "MySQL Top SQL-按创建临时表数排序"}], "description": "排序过多且排序内存设置较小导致文件排序过多", "rule_name": "sort_buffer_size_too_small", "id": "15656", "rule_expression": "[cib,2210002,sort_buffer_size]<[num,$1] && [metric,2020504]>[num,$2] && [metric,2020267]>[num,$3]", "db_type": "MySQL", "warning_level": "3", "warning_message": "排序过多且排序内存设置较小导致文件排序过多"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "对MySQL的运行状态进行分析"}, {"knowledge_name": "MySQL数据库重启检查", "knowledge_description": "MySQL数据库重启检查"}], "description": "数据库可能发生了重启", "rule_name": "db_restart", "id": "5767", "rule_expression": "[metric,2020199]<[num,$1] && [metric,2020453][oper,contains][str,20]", "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL Top SQL-按排序行数排序"}, {"knowledge_description": "MySQL Top SQL-按创建临时表数排序"}, {"knowledge_description": "MySQL Top SQL-按排序行数排序"}, {"knowledge_description": "MySQL Top SQL-按创建临时表数排序"}], "description": "排序过多且排序内存设置较小导致文件排序过多", "rule_name": "sort_buffer_size_too_small", "id": "15657", "rule_expression": "[cib,2210002,sort_buffer_size]<[num,$1] && [metric,2020504]>[num,$2] && [metric,2020267]>[num,$3]", "db_type": "MySQL", "warning_level": "3", "warning_message": "排序过多且排序内存设置较小导致文件排序过多"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "每秒产生日志过多，是近1小时平均值的5倍", "rule_name": "mysql_more_log", "id": "16297", "rule_expression": "[metric,2020303]/[metric hour avg,2020303]>[num,5] && [metric,2020303]>[bsl upper,2020303]*[num,1.2][@Denominator0,0]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL Latch等待检查"}], "description": "latch获取存在较长时间的等待", "rule_name": "mysql_latch", "id": "15229", "rule_expression": "[metric in time,30,2020172]>[num,0]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL命中率分析"}, {"knowledge_name": "检查query_cache_size数据库参数", "knowledge_description": "检查query_cache_size数据库参数"}], "description": "查询缓存命中率不理想", "rule_name": "qcache_suboptimal", "id": "11124", "rule_expression": "[metric,2020199]>[num,$1] && [cib,2210002,query_cache_size]>[num,0] && [cib,2210002,query_cache_type][oper,neq][str,OFF] && [metric,2020425]>[num,$2] && [metric,2020411]<[num,$3]", "db_type": "MySQL", "warning_level": "1"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL Innodb引擎状态分析"}, {"knowledge_description": "对MySQL的运行状态进行分析"}], "description": "Innodb引擎出现大量等待进入查询", "rule_name": "queries_in_queue", "id": "11125", "rule_expression": null, "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL死锁检查"}], "description": "存在死锁", "rule_name": "mysql_deadlock", "id": "16406", "rule_expression": "[metric in time,30,2020155]>[num,0] ", "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "对MySQL的连接分布情况进行分析"}], "description": "连续多次出现连接异常终止，报错Got an error reading communication packets", "rule_name": "aborted_connection", "id": "8871", "rule_expression": "[metric,2020206]>[num,$1] && [metric,2020401]<[num,$2]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL锁等待分析"}, {"knowledge_description": "MySQL锁等待分析"}], "description": "MySQL MDL锁时间过长，请及时处理", "rule_name": "mysql_mdl_lock_warn", "id": "13417", "rule_expression": "[metric,2020153]>[num,$1]", "db_type": "MySQL", "warning_level": "4", "warning_message": "当前MDL锁时间为：{[metric,2020153]} 秒，MDL锁数量为：{[metric,2020152]} "}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL锁等待分析"}, {"knowledge_description": "MySQL锁等待分析"}], "description": "MySQL MDL锁时间过长，请及时处理", "rule_name": "mysql_mdl_lock_warn", "id": "13415", "rule_expression": "[metric,2020153]>[num,$1]", "db_type": "MySQL", "warning_level": "4", "warning_message": "当前MDL锁时间为：{[metric,2020153]} 秒，MDL锁数量为：{[metric,2020152]} "}}
{"type": "rule", "data": {"knowledge_id": [], "description": "最外层的驱动表全表扫描次数过高", "rule_name": "mysql_select_scan", "id": "15137", "rule_expression": "[metric in time,5,2020229][oper,>][num,$1]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "每秒异常断开客户端连接次数过多，超过5次", "rule_name": "mysql_aborted_clients", "id": "15149", "rule_expression": "[metric in time,5,2020454][oper,>][num,$1] ", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "每秒查询数过多，是最近1小时平均数的5倍", "rule_name": "mysql_more_select", "id": "16298", "rule_expression": "[metric,2020207]/[metric hour avg,2020207]>[num,5] && [metric,2020207]>[bsl upper,2020207]*[num,1.2][@Denominator0,0]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "对MySQL的运行状态进行分析"}, {"knowledge_description": "MySQL Top SQL-按执行时间排序"}, {"knowledge_name": "检查slow_query_log数据库参数", "knowledge_description": "检查slow_query_log数据库参数"}, {"knowledge_name": "检查long_query_time数据库参数", "knowledge_description": "检查long_query_time数据库参数"}], "description": "长时间运行的查询数过多", "rule_name": "long_running", "id": "11102", "rule_expression": "[metric,2020423]>[num,$1]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL Innodb引擎状态分析"}, {"knowledge_description": "对MySQL的运行状态进行分析"}], "description": "Innodb引擎出现大量等待进入查询", "rule_name": "queries_in_queue", "id": "16314", "rule_expression": null, "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "未清理回滚日志数异常分析"}, {"knowledge_description": "MySQL事务分析"}, {"knowledge_description": "MySQL Innodb引擎状态分析"}], "description": "Innodb引擎未清除事务数过多", "rule_name": "trx_history_list", "id": "16328", "rule_expression": null, "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL锁等待分析"}, {"knowledge_description": "MySQL Top SQL-按锁时间排序"}], "description": "行锁等待严重超时（超过3600秒)，数据库可能存在未提交的会话", "rule_name": "row_lock_wait_time_long_mysql", "id": "16316", "rule_expression": null, "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "检查数据库参数", "knowledge_description": "检查数据库参数"}, {"knowledge_name": "检查数据库参数", "knowledge_description": "检查数据库参数"}], "description": "从库日志中频繁出现命中slave_pending_jobs_size_max的告警，slave_pending_jobs_size_max参数设置过小，可能会导致主从延迟", "rule_name": "slave_db_slave_pending_jobs_size_max_too_small", "id": "15161", "rule_expression": "[metric,2020506]>[num,$1] && [cib,2210002,slave_pending_jobs_size_max]<=[num,$1]", "db_type": "MySQL", "warning_level": "2", "warning_message": "从库日志中频繁出现命中slave_pending_jobs_size_max的告警，slave_pending_jobs_size_max参数设置过小，可能会导致主从延迟"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "对MySQL的连接分布情况进行分析"}], "description": "每秒连接服务端失败次数过高，超过1次", "rule_name": "mysql_aborted_connects", "id": "15155", "rule_expression": "[metric in time,5,2020206][oper,>][num,$1] ", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "对MySQL的连接分布情况进行分析"}], "description": "每秒连接服务端失败次数过高，超过1次", "rule_name": "mysql_aborted_connects", "id": "15156", "rule_expression": "[metric in time,5,2020206][oper,>][num,$1] ", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL Latch等待检查"}], "description": "latch获取存在较长时间的等待", "rule_name": "mysql_latch", "id": "16289", "rule_expression": "[metric in time,30,2020172]>[num,0]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "MGR集群中有成员处于离线状态", "rule_name": "mgr_offline_members", "id": "16265", "rule_expression": "[metric in time,30,2020446]>[num,0] ", "db_type": "MySQL", "warning_level": "4", "warning_message": "MGR集群中离线节点数为：{[metric in time,30,2020446]>[num,0] }，请立即检查"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "活跃会话数突增，是近1小时平均值的2倍", "rule_name": "myql_more_active_session", "id": "16269", "rule_expression": "[metric,2020069]/[metric hour avg,2020069]>[num,5] && [metric,2020069]>[bsl upper,2020069]*[num,1.2][@Denominator0,0]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "检查MySQL数据库参数", "knowledge_description": "检查MySQL数据库参数"}, {"knowledge_name": "分析服务器IO设备的IO情况", "knowledge_description": "分析服务器IO设备的IO情况"}], "description": "日志文件中存在大量page_cleaner警告，innodb_lru_scan_depth参数设置过大，建议调小该参数或提升IO能力", "rule_name": "more_page_cleaner_warn_in_logfile", "id": "15159", "rule_expression": "[cib,2210002,innodb_lru_scan_depth]>=[num,$1] && [metric,3000006]>[num,$2] && [metric,2020505]>[num,$3]", "db_type": "MySQL", "warning_level": "2", "warning_message": "日志文件中存在大量page_cleaner警告，innodb_lru_scan_depth参数设置过大，建议调小该参数或提升IO能力"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "检查MySQL数据库参数", "knowledge_description": "检查MySQL数据库参数"}, {"knowledge_name": "分析服务器IO设备的IO情况", "knowledge_description": "分析服务器IO设备的IO情况"}], "description": "日志文件中存在大量page_cleaner警告，innodb_lru_scan_depth参数设置过大，建议调小该参数或提升IO能力", "rule_name": "more_page_cleaner_warn_in_logfile", "id": "15157", "rule_expression": "[cib,2210002,innodb_lru_scan_depth]>=[num,$1] && [metric,3000006]>[num,$2] && [metric,2020505]>[num,$3]", "db_type": "MySQL", "warning_level": "2", "warning_message": "日志文件中存在大量page_cleaner警告，innodb_lru_scan_depth参数设置过大，建议调小该参数或提升IO能力"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "检查MySQL数据库参数", "knowledge_description": "检查MySQL数据库参数"}, {"knowledge_name": "分析服务器IO设备的IO情况", "knowledge_description": "分析服务器IO设备的IO情况"}], "description": "日志文件中存在大量page_cleaner警告，innodb_lru_scan_depth参数设置过大，建议调小该参数或提升IO能力", "rule_name": "more_page_cleaner_warn_in_logfile", "id": "15160", "rule_expression": "[cib,2210002,innodb_lru_scan_depth]>=[num,$1] && [metric,3000006]>[num,$2] && [metric,2020505]>[num,$3]", "db_type": "MySQL", "warning_level": "2", "warning_message": "日志文件中存在大量page_cleaner警告，innodb_lru_scan_depth参数设置过大，建议调小该参数或提升IO能力"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "对MySQL的连接分布情况进行分析"}], "description": "连续多次出现连接异常终止，报错Got an error reading communication packets", "rule_name": "aborted_connection", "id": "16368", "rule_expression": "[metric,2020206]>[num,$1] && [metric,2020401]<[num,$2]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "mysql innodb缓存命中率分析", "knowledge_description": "mysql innodb缓存命中率分析"}, {"knowledge_description": "对MySQL的运行状态进行分析"}, {"knowledge_description": "MySQL物理读高分析"}, {"knowledge_description": "分析物理写高"}], "description": "Innodb缓冲区命中率不理想，低于95%", "rule_name": "buffer_cache_suboptimal", "id": "16369", "rule_expression": "[metric,2020199]>[num,$1] && [metric,2020402]<[num,$2] && [metric,2020237]>[num,$3]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "mysql innodb数据块立即写入缓存比例分析", "knowledge_description": "mysql innodb数据块立即写入缓存比例分析"}, {"knowledge_name": "mysql innodb缓存命中率分析", "knowledge_description": "mysql innodb缓存命中率分析"}, {"knowledge_description": "对MySQL的运行状态进行分析"}, {"knowledge_description": "MySQL Top SQL-按执行时间排序"}, {"knowledge_name": "检查innodb_io_capacity数据库参数", "knowledge_description": "检查innodb_io_capacity数据库参数"}, {"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-MYSQL IO分析"}], "description": "Innodb缓存池写入可能是性能瓶颈", "rule_name": "buffer_nowait_low", "id": "16370", "rule_expression": "[metric,2020426]<[num,$1]&&[metric,2020238]>[num,$2]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析performance_schema_hosts_lost", "knowledge_description": "分析performance_schema_hosts_lost"}, {"knowledge_name": "显示MySQL Server分配的内存大小", "knowledge_description": "显示MySQL Server分配的内存大小"}], "description": "performance_schema_hosts_size设置过小", "rule_name": "host_cache_low", "id": "16377", "rule_expression": "[metric,2020285]>[num,$1]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "对MySQL的连接分布情况进行分析"}, {"knowledge_name": "检查max_connections数据库参数", "knowledge_description": "检查max_connections数据库参数"}, {"knowledge_name": "检查wait_timeout数据库参数", "knowledge_description": "检查wait_timeout数据库参数"}, {"knowledge_description": "对MySQL的运行状态进行分析"}], "description": "连接数接近或达到最大连接限制", "rule_name": "connection_exceed", "id": "8875", "rule_expression": "[metric,2020199]>[num,$1] && [metric,2020416]>[num,$2]", "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析performance_schema_hosts_lost", "knowledge_description": "分析performance_schema_hosts_lost"}, {"knowledge_name": "显示MySQL Server分配的内存大小", "knowledge_description": "显示MySQL Server分配的内存大小"}], "description": "performance_schema_hosts_size设置过小", "rule_name": "host_cache_low", "id": "8880", "rule_expression": "[metric,2020285]>[num,$1]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL Top SQL汇总"}, {"knowledge_description": "对MySQL的运行状态进行分析"}], "description": "每秒逻辑读增长异常，是近1小时平均值的5倍", "rule_name": "mysql_bp_read", "id": "8894", "rule_expression": "[metric,2020237]/[metric hour avg,2020237]>[num,$1]&&[metric,2020237]>[bsl upper,2020237]*[num,$2][@Denominator0,0]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "活跃会话数突增，是近1小时平均值的2倍", "rule_name": "myql_more_active_session", "id": "15172", "rule_expression": "[metric,2020069]/[metric hour avg,2020069]>[num,5] && [metric,2020069]>[bsl upper,2020069]*[num,1.2][@Denominator0,0]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "每秒插入操作数过多，是最近1小时平均数的5倍", "rule_name": "mysql_more_insert", "id": "15192", "rule_expression": "[metric,2020161]/[metric hour avg,2020161]>[num,5] && [metric,2020161]>[bsl upper,2020161]*[num,1.2][@Denominator0,0]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "活跃会话数突增，是近1小时平均值的2倍", "rule_name": "myql_more_active_session", "id": "15169", "rule_expression": "[metric,2020069]/[metric hour avg,2020069]>[num,5] && [metric,2020069]>[bsl upper,2020069]*[num,1.2][@Denominator0,0]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "活跃会话数突增，是近1小时平均值的2倍", "rule_name": "myql_more_active_session", "id": "15171", "rule_expression": "[metric,2020069]/[metric hour avg,2020069]>[num,5] && [metric,2020069]>[bsl upper,2020069]*[num,1.2][@Denominator0,0]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "分析MySQL数据文件写等待"}], "description": "每秒数据文件写阻塞次数过大", "rule_name": "mysql_innodb_pending_wirtes", "id": "15203", "rule_expression": "[metric in time,5,2020249][oper,>][num,$1] ", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "每秒插入操作数过多，是最近1小时平均数的5倍", "rule_name": "mysql_more_insert", "id": "15191", "rule_expression": "[metric,2020161]/[metric hour avg,2020161]>[num,5] && [metric,2020161]>[bsl upper,2020161]*[num,1.2][@Denominator0,0]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "分析MySQL数据文件写等待"}], "description": "每秒数据文件写阻塞次数过大", "rule_name": "mysql_innodb_pending_wirtes", "id": "15201", "rule_expression": "[metric in time,5,2020249][oper,>][num,$1] ", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "每秒插入操作数过多，是最近1小时平均数的5倍", "rule_name": "mysql_more_insert", "id": "15189", "rule_expression": "[metric,2020161]/[metric hour avg,2020161]>[num,5] && [metric,2020161]>[bsl upper,2020161]*[num,1.2][@Denominator0,0]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "每秒查询数过多，是最近1小时平均数的5倍", "rule_name": "mysql_more_select", "id": "15177", "rule_expression": "[metric,2020207]/[metric hour avg,2020207]>[num,5] && [metric,2020207]>[bsl upper,2020207]*[num,1.2][@Denominator0,0]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "每秒删除操作数过多，是最近1小时平均数的5倍", "rule_name": "mysql_more_delete", "id": "15188", "rule_expression": "[metric,2020159]/[metric hour avg,2020159]>[num,5] && [metric,2020159]>[bsl upper,2020159]*[num,1.2][@Denominator0,0]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "每秒产生日志过多，是近1小时平均值的5倍", "rule_name": "mysql_more_log", "id": "15173", "rule_expression": "[metric,2020303]/[metric hour avg,2020303]>[num,5] && [metric,2020303]>[bsl upper,2020303]*[num,1.2][@Denominator0,0]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "每秒产生日志过多，是近1小时平均值的5倍", "rule_name": "mysql_more_log", "id": "15176", "rule_expression": "[metric,2020303]/[metric hour avg,2020303]>[num,5] && [metric,2020303]>[bsl upper,2020303]*[num,1.2][@Denominator0,0]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "每秒更新操作过多，是最近1小时平均数的5倍", "rule_name": "mysql_more_update", "id": "15184", "rule_expression": "[metric,2020160]/[metric hour avg,2020160]>[num,5] && [metric,2020160]>[bsl upper,2020160]*[num,1.2][@Denominator0,0]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "每秒删除操作数过多，是最近1小时平均数的5倍", "rule_name": "mysql_more_delete", "id": "15185", "rule_expression": "[metric,2020159]/[metric hour avg,2020159]>[num,5] && [metric,2020159]>[bsl upper,2020159]*[num,1.2][@Denominator0,0]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "InnoDB 平均获取行锁时间大于5毫秒", "rule_name": "mysql_innodb_row_lock_time_avg", "id": "15197", "rule_expression": "[metric in time,5,2020261][oper,>][num,$1] ", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "每秒更新操作过多，是最近1小时平均数的5倍", "rule_name": "mysql_more_update", "id": "15181", "rule_expression": "[metric,2020160]/[metric hour avg,2020160]>[num,5] && [metric,2020160]>[bsl upper,2020160]*[num,1.2][@Denominator0,0]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "InnoDB 平均获取行锁时间大于5毫秒", "rule_name": "mysql_innodb_row_lock_time_avg", "id": "15200", "rule_expression": "[metric in time,5,2020261][oper,>][num,$1] ", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "mysql innodb缓存命中率分析", "knowledge_description": "mysql innodb缓存命中率分析"}, {"knowledge_description": "对MySQL的运行状态进行分析"}, {"knowledge_description": "MySQL物理读高分析"}, {"knowledge_description": "分析物理写高"}], "description": "Innodb缓冲区命中率不理想，低于95%", "rule_name": "buffer_cache_suboptimal", "id": "8872", "rule_expression": "[metric,2020199]>[num,$1] && [metric,2020402]<[num,$2] && [metric,2020237]>[num,$3]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "操作系统核心资源分析", "knowledge_description": "操作系统核心资源分析"}, {"knowledge_name": "MySQL数据库负载指标分析", "knowledge_description": "MySQL数据库负载指标分析"}, {"knowledge_name": "服务器内存分析", "knowledge_description": "服务器内存分析"}, {"knowledge_name": "分析服务器IO设备的IO情况", "knowledge_description": "分析服务器IO设备的IO情况"}, {"knowledge_name": "MySQL数据库实例检查", "knowledge_description": "MySQL数据库实例检查"}], "description": "数据库连接严重超时，数据库存在巨大风险", "rule_name": "connect_slow_mysql", "id": "8876", "rule_expression": "[metric,1000000][oper,eq][str,连接成功] && [metric,1000102] >([metric hour avg,1000102]*[num,$1])&& ([metric,1000102] >[num,$2])", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "对MySQL的运行状态进行分析"}, {"knowledge_name": "MySQL数据库重启检查", "knowledge_description": "MySQL数据库重启检查"}], "description": "数据库可能发生了重启", "rule_name": "db_restart", "id": "8877", "rule_expression": "[metric,2020199]<[num,$1] && [metric,2020453][oper,contains][str,20]", "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "对MySQL的运行状态进行分析"}, {"knowledge_name": "检查lock_wait_timeout数据库参数", "knowledge_description": "检查lock_wait_timeout数据库参数"}, {"knowledge_name": "检查innodb_lock_wait_timeout数据库参数", "knowledge_description": "检查innodb_lock_wait_timeout数据库参数"}], "description": "元数据锁(flush table/lock table/ddl)等待时间超过10秒，可能会导致连锁反应", "rule_name": "flush_table", "id": "8879", "rule_expression": "[metric,2020421]>[num,$1]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "显示当前数据库容量使用情况，以MB为单位", "knowledge_description": "显示当前数据库容量使用情况，以MB为单位"}, {"knowledge_name": "显示当前数据库系统前20个最大的数据库表相关容量信息", "knowledge_description": "显示当前数据库系统前20个最大的数据库表相关容量信息"}], "description": "Innodb共享表空间存在无法扩展风险", "rule_name": "ib_data_space", "id": "8881", "rule_expression": "[metric,2020400,IBDATA]>[num,$1] && [metric,2020431]>[num,$2]", "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL Top SQL-按创建临时表数排序"}, {"knowledge_description": "MySQL Top SQL-按排序行数排序"}, {"knowledge_description": "对MySQL的运行状态进行分析"}, {"knowledge_name": "mysql临时表缓存命中率分析", "knowledge_description": "mysql临时表缓存命中率分析"}, {"knowledge_name": "MySQL数据库临时表及临时表空间分析", "knowledge_description": "MySQL数据库临时表及临时表空间分析"}], "description": "Innodb临时表空间存在无法扩展风险", "rule_name": "ib_tmp_space", "id": "8882", "rule_expression": "[metric,2020400,IBTMP]>[num,$1] && [metric,2020433]>[num,$2]", "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "分析MySQL索引访问比例"}, {"knowledge_description": "MySQL Top SQL-按检查行数排序"}, {"knowledge_name": "获取指定数据库表的索引相关统计信息", "knowledge_description": "获取指定数据库表的索引相关统计信息"}, {"knowledge_name": "显示数据库中索引选择率较低的数据库对象信息", "knowledge_description": "显示数据库中索引选择率较低的数据库对象信息"}, {"knowledge_name": "显示数据库中未使用的索引信息", "knowledge_description": "显示数据库中未使用的索引信息"}], "description": "索引没有被有效利用", "rule_name": "index_used_suboptimal", "id": "8883", "rule_expression": "[metric,2020199]>[num,$1]&&[metric,2020223]>[num,$2]&&[metric,2020406]<[num,$3]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析MySQL MyISAM key buffer命中率", "knowledge_description": "分析MySQL MyISAM key buffer命中率"}], "description": "Key缓冲区大小可能不是最佳的", "rule_name": "key_buffer_suboptimal", "id": "8886", "rule_expression": "[metric,2020199]>[num,$1] && [metric,2020283]>[num,$2] && [metric,2020410]<[num,$3]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析MySQL InnoDB 写入日志等待", "knowledge_description": "分析MySQL InnoDB 写入日志等待"}, {"knowledge_name": "检查数据库innodb_log_buffer_size参数是否设置合理", "knowledge_description": "检查数据库innodb_log_buffer_size参数是否设置合理"}, {"knowledge_name": "检查sync_binlog数据库参数", "knowledge_description": "检查sync_binlog数据库参数"}, {"knowledge_name": "检查innodb_flush_log_at_trx_commit数据库参数是否设置合理", "knowledge_description": "检查innodb_flush_log_at_trx_commit数据库参数是否设置合理"}, {"knowledge_name": "检查log_bin数据库参数", "knowledge_description": "检查log_bin数据库参数"}], "description": "Innodb日志等待可能是性能瓶颈", "rule_name": "log_nowait_low", "id": "8888", "rule_expression": "[metric,2020427]<[num,$1]&&[metric,2020254]>[num,$2]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "MySQL数据库InnoDB存储引擎参数检查", "knowledge_description": "MySQL数据库InnoDB存储引擎参数检查"}], "description": "BUFFER POOL的实例个数设置有误，超过了最大值64", "rule_name": "mysql_bufferpool_instances", "id": "16403", "rule_expression": "[cib,2210002,innodb_buffer_pool_instances]>[num,$1]", "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "InnoDB 平均获取行锁时间大于5毫秒", "rule_name": "mysql_innodb_row_lock_time_avg", "id": "15199", "rule_expression": "[metric in time,5,2020261][oper,>][num,$1] ", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "每秒数据文件读阻塞次数过高", "rule_name": "mysql_innodb_pending_reads", "id": "15207", "rule_expression": "[metric in time,5,2020245][oper,>][num,$1] ", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "每秒数据文件读阻塞次数过高", "rule_name": "mysql_innodb_pending_reads", "id": "15208", "rule_expression": "[metric in time,5,2020245][oper,>][num,$1] ", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "分析MySQL数据文件写等待"}], "description": "每秒数据文件写阻塞次数过大", "rule_name": "mysql_innodb_pending_wirtes", "id": "15204", "rule_expression": "[metric in time,5,2020249][oper,>][num,$1] ", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "分析MySQL数据文件写等待"}], "description": "每秒数据文件写阻塞次数过大", "rule_name": "mysql_innodb_pending_wirtes", "id": "16287", "rule_expression": "[metric in time,5,2020249][oper,>][num,$1] ", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "每秒数据文件读阻塞次数过高", "rule_name": "mysql_innodb_pending_reads", "id": "15205", "rule_expression": "[metric in time,5,2020245][oper,>][num,$1] ", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "对MySQL的运行状态进行分析"}, {"knowledge_name": "检查lock_wait_timeout数据库参数", "knowledge_description": "检查lock_wait_timeout数据库参数"}, {"knowledge_name": "检查innodb_lock_wait_timeout数据库参数", "knowledge_description": "检查innodb_lock_wait_timeout数据库参数"}], "description": "元数据锁(flush table/lock table/ddl)等待时间超过10秒，可能会导致连锁反应", "rule_name": "flush_table", "id": "11091", "rule_expression": "[metric,2020421]>[num,$1]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "对MySQL的运行状态进行分析"}, {"knowledge_name": "检查lock_wait_timeout数据库参数", "knowledge_description": "检查lock_wait_timeout数据库参数"}, {"knowledge_name": "检查innodb_lock_wait_timeout数据库参数", "knowledge_description": "检查innodb_lock_wait_timeout数据库参数"}], "description": "元数据锁(flush table/lock table/ddl)等待时间超过10秒，可能会导致连锁反应", "rule_name": "flush_table", "id": "3820", "rule_expression": "[metric,2020421]>[num,$1]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "每秒数据文件读阻塞次数过高", "rule_name": "mysql_innodb_pending_reads", "id": "16286", "rule_expression": "[metric in time,5,2020245][oper,>][num,$1] ", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "显示指定时间间隔内的日志信息"}], "description": "日志文件增长过快", "rule_name": "mysql_logs", "id": "15249", "rule_expression": "[metric,2020437]/[metric hour avg,2020444]>[num,5] && [metric,2020437]>[bsl upper,2020444]*[num,1.2][@Denominator0,0]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "检查数据库参数", "knowledge_description": "检查数据库参数"}, {"knowledge_name": "检查数据库参数", "knowledge_description": "检查数据库参数"}], "description": "从库日志中频繁出现命中slave_pending_jobs_size_max的告警，slave_pending_jobs_size_max参数设置过小，可能会导致主从延迟", "rule_name": "slave_db_slave_pending_jobs_size_max_too_small", "id": "15295", "rule_expression": "[metric,2020506]>[num,$1] && [cib,2210002,slave_pending_jobs_size_max]<=[num,$1]", "db_type": "MySQL", "warning_level": "2", "warning_message": "从库日志中频繁出现命中slave_pending_jobs_size_max的告警，slave_pending_jobs_size_max参数设置过小，可能会导致主从延迟"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "对MySQL的连接分布情况进行分析"}], "description": "客户端登录验证失败次数过多，可能应用配置的凭证信息未及时更新", "rule_name": "mysql_authentication_errors", "id": "15225", "rule_expression": "[metric in time,30,2020507]>[num,0]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "对MySQL的连接分布情况进行分析"}], "description": "客户端登录验证失败次数过多，可能应用配置的凭证信息未及时更新", "rule_name": "mysql_authentication_errors", "id": "15227", "rule_expression": "[metric in time,30,2020507]>[num,0]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "网络诊断工具包", "knowledge_description": "网络诊断工具包"}, {"knowledge_description": "TCP/IP协议分析"}], "description": "高可用数据库服务器间通信延迟较大", "rule_name": "mysql_comm_delay", "id": "15241", "rule_expression": "[metric,1001021,max]>[num,$1]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "数据库点测超时或失败", "rule_name": "mysql_beacon", "id": "15257", "rule_expression": "[metric in time,30,1000106]>[num,60]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "显示MySQL Server分配的内存大小", "knowledge_description": "显示MySQL Server分配的内存大小"}], "description": "MySQL进程占用内存持续增长，存在内存泄露可能", "rule_name": "mysql_memory", "id": "15253", "rule_expression": "[metric in time,10,2020455]>[num,1048576] && [metric in time,10,2020456]>[num,10]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "数据库点测超时或失败", "rule_name": "mysql_beacon", "id": "15260", "rule_expression": "[metric in time,30,1000106]>[num,60]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "服务器内存分析", "knowledge_description": "服务器内存分析"}, {"knowledge_name": "MySQL内存分析", "knowledge_description": "MySQL内存分析"}, {"knowledge_name": "Swap占用较多的前30个线程", "knowledge_description": "Swap占用较多的前30个线程"}], "description": "内存不可用率过高，超过90%，可能存在换页和OOM Kill的风险\t", "rule_name": "memory_used_high_mysql", "id": "15777", "rule_expression": "[metric,3000014]>[num,$1]  && [metric,3001031]>[num,$2]", "db_type": "MySQL", "warning_level": "4", "warning_message": "指标< Mem unavailable >(内存不可用率)过高，操作系统内存出现严重不足，可能存在换页和OOM Kill的风险。内存不可用率：（{[metric,3000014]}%）且swap usage达到{[metric,3001031]}%。"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "服务器内存分析", "knowledge_description": "服务器内存分析"}, {"knowledge_name": "MySQL内存分析", "knowledge_description": "MySQL内存分析"}, {"knowledge_name": "Swap占用较多的前30个线程", "knowledge_description": "Swap占用较多的前30个线程"}], "description": "内存不可用率过高，超过90%，可能存在换页和OOM Kill的风险\t", "rule_name": "memory_used_high_mysql", "id": "16261", "rule_expression": "[metric,3000014]>[num,$1]  && [metric,3001031]>[num,$2]", "db_type": "MySQL", "warning_level": "4", "warning_message": "指标< Mem unavailable >(内存不可用率)过高，操作系统内存出现严重不足，可能存在换页和OOM Kill的风险。内存不可用率：（{[metric,3000014]}%）且swap usage达到{[metric,3001031]}%。"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "服务器内存分析", "knowledge_description": "服务器内存分析"}, {"knowledge_name": "MySQL内存分析", "knowledge_description": "MySQL内存分析"}, {"knowledge_name": "Swap占用较多的前30个线程", "knowledge_description": "Swap占用较多的前30个线程"}], "description": "内存不可用率过高，超过90%，可能存在换页和OOM Kill的风险\t", "rule_name": "memory_used_high_mysql", "id": "15780", "rule_expression": "[metric,3000014]>[num,$1]  && [metric,3001031]>[num,$2]", "db_type": "MySQL", "warning_level": "4", "warning_message": "指标< Mem unavailable >(内存不可用率)过高，操作系统内存出现严重不足，可能存在换页和OOM Kill的风险。内存不可用率：（{[metric,3000014]}%）且swap usage达到{[metric,3001031]}%。"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "服务器内存分析", "knowledge_description": "服务器内存分析"}, {"knowledge_name": "MySQL内存分析", "knowledge_description": "MySQL内存分析"}, {"knowledge_name": "Swap占用较多的前30个线程", "knowledge_description": "Swap占用较多的前30个线程"}], "description": "物理内存空闲小于100M，且SWAP使用率大于90%，系统存在高风险", "rule_name": "swap_used_mysql_critical", "id": "16446", "rule_expression": "[metric,3000007]<[num,$1]*[num,1024] && [metric,3001031]>[num,$2]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL命中率分析"}, {"knowledge_name": "检查query_cache_size数据库参数", "knowledge_description": "检查query_cache_size数据库参数"}], "description": "查询缓存命中率不理想", "rule_name": "qcache_suboptimal", "id": "16313", "rule_expression": "[metric,2020199]>[num,$1] && [cib,2210002,query_cache_size]>[num,0] && [cib,2210002,query_cache_type][oper,neq][str,OFF] && [metric,2020425]>[num,$2] && [metric,2020411]<[num,$3]", "db_type": "MySQL", "warning_level": "1"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "InnoDB 平均获取行锁时间大于5毫秒", "rule_name": "mysql_innodb_row_lock_time_avg", "id": "16288", "rule_expression": "[metric in time,5,2020261][oper,>][num,$1] ", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "对MySQL的连接分布情况进行分析"}], "description": "连续多次出现连接异常终止，报错Got an error reading communication packets", "rule_name": "aborted_connection", "id": "16241", "rule_expression": "[metric,2020206]>[num,$1] && [metric,2020401]<[num,$2]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "mysql innodb缓存命中率分析", "knowledge_description": "mysql innodb缓存命中率分析"}, {"knowledge_description": "对MySQL的运行状态进行分析"}, {"knowledge_description": "MySQL物理读高分析"}, {"knowledge_description": "分析物理写高"}], "description": "Innodb缓冲区命中率不理想，低于95%", "rule_name": "buffer_cache_suboptimal", "id": "16242", "rule_expression": "[metric,2020199]>[num,$1] && [metric,2020402]<[num,$2] && [metric,2020237]>[num,$3]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "mysql innodb数据块立即写入缓存比例分析", "knowledge_description": "mysql innodb数据块立即写入缓存比例分析"}, {"knowledge_name": "mysql innodb缓存命中率分析", "knowledge_description": "mysql innodb缓存命中率分析"}, {"knowledge_description": "对MySQL的运行状态进行分析"}, {"knowledge_description": "MySQL Top SQL-按执行时间排序"}, {"knowledge_name": "检查innodb_io_capacity数据库参数", "knowledge_description": "检查innodb_io_capacity数据库参数"}, {"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-MYSQL IO分析"}], "description": "Innodb缓存池写入可能是性能瓶颈", "rule_name": "buffer_nowait_low", "id": "16243", "rule_expression": "[metric,2020426]<[num,$1]&&[metric,2020238]>[num,$2]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "MGR集群发生FC(流量控制)，集群处于暂停状态", "rule_name": "mgr_flow_control_paused", "id": "15070", "rule_expression": "[metric in time,5,2020154]>[num,0] ", "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "分析MySQL Binlog缓存命中率"}], "description": "binlog缓存内存命中率较低，对记录binlog的性能有影响", "rule_name": "mysql_binlog_cache", "id": "8253", "rule_expression": "[metric,2020092] >[num,0] && ([metric,2020092]-[metric,2020091])*[num,100]/[metric,2020092] < [num,$1]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL Top SQL-按错误/警告数排序"}], "description": "5分钟内出现多次错误或告警的SQL语句，可能是应用发出", "rule_name": "error_sql", "id": "16248", "rule_expression": "[metric,2020424]>[num,$1]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "对MySQL的运行状态进行分析"}, {"knowledge_name": "检查lock_wait_timeout数据库参数", "knowledge_description": "检查lock_wait_timeout数据库参数"}, {"knowledge_name": "检查innodb_lock_wait_timeout数据库参数", "knowledge_description": "检查innodb_lock_wait_timeout数据库参数"}], "description": "元数据锁(flush table/lock table/ddl)等待时间超过10秒，可能会导致连锁反应", "rule_name": "flush_table", "id": "16249", "rule_expression": "[metric,2020421]>[num,$1]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL Top SQL-按创建临时表数排序"}, {"knowledge_description": "MySQL Top SQL-按排序行数排序"}, {"knowledge_description": "对MySQL的运行状态进行分析"}, {"knowledge_name": "mysql临时表缓存命中率分析", "knowledge_description": "mysql临时表缓存命中率分析"}, {"knowledge_name": "MySQL数据库临时表及临时表空间分析", "knowledge_description": "MySQL数据库临时表及临时表空间分析"}], "description": "Innodb临时表空间存在无法扩展风险", "rule_name": "ib_tmp_space", "id": "16252", "rule_expression": "[metric,2020400,IBTMP]>[num,$1] && [metric,2020433]>[num,$2]", "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "分析MySQL索引访问比例"}, {"knowledge_description": "MySQL Top SQL-按检查行数排序"}, {"knowledge_name": "获取指定数据库表的索引相关统计信息", "knowledge_description": "获取指定数据库表的索引相关统计信息"}, {"knowledge_name": "显示数据库中索引选择率较低的数据库对象信息", "knowledge_description": "显示数据库中索引选择率较低的数据库对象信息"}, {"knowledge_name": "显示数据库中未使用的索引信息", "knowledge_description": "显示数据库中未使用的索引信息"}], "description": "索引没有被有效利用", "rule_name": "index_used_suboptimal", "id": "16253", "rule_expression": "[metric,2020199]>[num,$1]&&[metric,2020223]>[num,$2]&&[metric,2020406]<[num,$3]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "操作系统核心资源分析", "knowledge_description": "操作系统核心资源分析"}, {"knowledge_name": "MySQL数据库负载指标分析", "knowledge_description": "MySQL数据库负载指标分析"}, {"knowledge_name": "分析服务器IO设备的IO情况", "knowledge_description": "分析服务器IO设备的IO情况"}, {"knowledge_name": "服务器内存分析", "knowledge_description": "服务器内存分析"}, {"knowledge_name": "MySQL数据库实例检查", "knowledge_description": "MySQL数据库实例检查"}, {"knowledge_description": "分析MySQL mutex锁"}, {"knowledge_description": "MySQL锁等待分析"}, {"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-MYSQL IO分析"}], "description": "数据库采集任务严重超时，数据库存在严重性能风险", "rule_name": "collector_exec_slow_mysql", "id": "16244", "rule_expression": "[metric,1000101] >([metric hour avg,1000101]*[num,$1])", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "对MySQL的连接分布情况进行分析"}, {"knowledge_name": "检查max_connections数据库参数", "knowledge_description": "检查max_connections数据库参数"}, {"knowledge_name": "检查wait_timeout数据库参数", "knowledge_description": "检查wait_timeout数据库参数"}, {"knowledge_description": "对MySQL的运行状态进行分析"}], "description": "连接数接近或达到最大连接限制", "rule_name": "connection_exceed", "id": "16245", "rule_expression": "[metric,2020199]>[num,$1] && [metric,2020416]>[num,$2]", "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "操作系统核心资源分析", "knowledge_description": "操作系统核心资源分析"}, {"knowledge_name": "MySQL数据库负载指标分析", "knowledge_description": "MySQL数据库负载指标分析"}, {"knowledge_name": "服务器内存分析", "knowledge_description": "服务器内存分析"}, {"knowledge_name": "分析服务器IO设备的IO情况", "knowledge_description": "分析服务器IO设备的IO情况"}, {"knowledge_name": "MySQL数据库实例检查", "knowledge_description": "MySQL数据库实例检查"}], "description": "数据库连接严重超时，数据库存在巨大风险", "rule_name": "connect_slow_mysql", "id": "16246", "rule_expression": "[metric,1000000][oper,eq][str,连接成功] && [metric,1000102] >([metric hour avg,1000102]*[num,$1])&& ([metric,1000102] >[num,$2])", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析performance_schema_hosts_lost", "knowledge_description": "分析performance_schema_hosts_lost"}, {"knowledge_name": "显示MySQL Server分配的内存大小", "knowledge_description": "显示MySQL Server分配的内存大小"}], "description": "performance_schema_hosts_size设置过小", "rule_name": "host_cache_low", "id": "16250", "rule_expression": "[metric,2020285]>[num,$1]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "显示当前数据库容量使用情况，以MB为单位", "knowledge_description": "显示当前数据库容量使用情况，以MB为单位"}, {"knowledge_name": "显示当前数据库系统前20个最大的数据库表相关容量信息", "knowledge_description": "显示当前数据库系统前20个最大的数据库表相关容量信息"}], "description": "Innodb共享表空间存在无法扩展风险", "rule_name": "ib_data_space", "id": "16251", "rule_expression": "[metric,2020400,IBDATA]>[num,$1] && [metric,2020431]>[num,$2]", "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析服务器IO设备的IO情况", "knowledge_description": "分析服务器IO设备的IO情况"}, {"knowledge_name": "MySQL数据库IO维度诊断", "knowledge_description": "MySQL数据库IO维度诊断"}, {"knowledge_description": "MySQL物理读高分析"}, {"knowledge_description": "分析物理写高"}], "description": "操作系统IO延时严重超标（超过100毫秒），数据库存在风险", "rule_name": "IO_latency_mysql_critical", "id": "16255", "rule_expression": "[metric,3000006]>[num,$1] && ([metric,3000100]>[num,$2] || [metric,3000101]>[num,$3])", "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析MySQL MyISAM key buffer命中率", "knowledge_description": "分析MySQL MyISAM key buffer命中率"}], "description": "Key缓冲区大小可能不是最佳的", "rule_name": "key_buffer_suboptimal", "id": "16257", "rule_expression": "[metric,2020199]>[num,$1] && [metric,2020283]>[num,$2] && [metric,2020410]<[num,$3]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "对MySQL的运行状态进行分析"}, {"knowledge_description": "MySQL Top SQL-按锁时间排序"}], "description": "被锁定的查询数过多，超过5个", "rule_name": "locked_query", "id": "16258", "rule_expression": "[metric,2020422]>[num,$1]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析MySQL InnoDB 写入日志等待", "knowledge_description": "分析MySQL InnoDB 写入日志等待"}, {"knowledge_name": "检查数据库innodb_log_buffer_size参数是否设置合理", "knowledge_description": "检查数据库innodb_log_buffer_size参数是否设置合理"}, {"knowledge_name": "检查sync_binlog数据库参数", "knowledge_description": "检查sync_binlog数据库参数"}, {"knowledge_name": "检查innodb_flush_log_at_trx_commit数据库参数是否设置合理", "knowledge_description": "检查innodb_flush_log_at_trx_commit数据库参数是否设置合理"}, {"knowledge_name": "检查log_bin数据库参数", "knowledge_description": "检查log_bin数据库参数"}], "description": "Innodb日志等待可能是性能瓶颈", "rule_name": "log_nowait_low", "id": "16259", "rule_expression": "[metric,2020427]<[num,$1]&&[metric,2020254]>[num,$2]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "对MySQL的运行状态进行分析"}, {"knowledge_description": "MySQL Top SQL-按执行时间排序"}, {"knowledge_name": "检查slow_query_log数据库参数", "knowledge_description": "检查slow_query_log数据库参数"}, {"knowledge_name": "检查long_query_time数据库参数", "knowledge_description": "检查long_query_time数据库参数"}], "description": "长时间运行的查询数过多", "rule_name": "long_running", "id": "16260", "rule_expression": "[metric,2020423]>[num,$1]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "MGR集群存在事务冲突", "rule_name": "mgr_confict_tranactions", "id": "16263", "rule_expression": "[metric in time,30,2020446]>[num,0] ", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL MGR分析"}, {"knowledge_description": "对MySQL的运行状态进行分析"}], "description": "MGR集群处于不可用状态", "rule_name": "mgr_unavailable", "id": "16266", "rule_expression": "[metric in time,30,2020446]>[num,0] && [metric in time,30,2020446]>[metric in time,30,2020447]", "db_type": "MySQL", "warning_level": "4", "warning_message": "MGR集群中离线成员数为：{[metric in time,30,2020446]} 大于 在线成员数：{[metric in time,30,2020447]}，集群处于不可用状态，请及时处理。"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "对MySQL的连接分布情况进行分析"}], "description": "客户端登录验证失败次数过多，可能应用配置的凭证信息未及时更新", "rule_name": "mysql_authentication_errors", "id": "16273", "rule_expression": "[metric in time,30,2020507]>[num,0]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "分析MySQL Binlog缓存命中率"}], "description": "binlog缓存内存命中率较低，对记录binlog的性能有影响", "rule_name": "mysql_binlog_cache", "id": "16275", "rule_expression": "[metric,2020092] >[num,0] && ([metric,2020092]-[metric,2020091])*[num,100]/[metric,2020092] < [num,$1]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "MySQL数据库InnoDB存储引擎参数检查", "knowledge_description": "MySQL数据库InnoDB存储引擎参数检查"}], "description": "BUFFER POOL的实例个数设置有误，超过了最大值64", "rule_name": "mysql_bufferpool_instances", "id": "16277", "rule_expression": "[cib,2210002,innodb_buffer_pool_instances]>[num,$1]", "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "MySQL数据库InnoDB存储引擎参数检查", "knowledge_description": "MySQL数据库InnoDB存储引擎参数检查"}], "description": "BUFFER POOL的大小小于1G,但缓冲池实例个数大于1", "rule_name": "mysql_bufferpool_less_than1G", "id": "16278", "rule_expression": "[cib,2210002,innodb_buffer_pool_size]/[num,1024]/[num,1024]/[num,1024]<[num,$1]&&[cib,2210002,innodb_buffer_pool_instances]>[num,$2]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "网络诊断工具包", "knowledge_description": "网络诊断工具包"}, {"knowledge_description": "TCP/IP协议分析"}], "description": "高可用数据库服务器间通信延迟较大", "rule_name": "mysql_comm_delay", "id": "16279", "rule_expression": "[metric,1001021,max]>[num,$1]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "已启用查询缓存，建议关闭", "rule_name": "mysql_enable_query_cache", "id": "16283", "rule_expression": "[cib,2210002,query_cache_type] [oper,eq][str,OFF]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析服务器IO设备的IO情况", "knowledge_description": "分析服务器IO设备的IO情况"}, {"knowledge_description": "MySQL Top SQL汇总"}, {"knowledge_name": "根据事件类型查数据库IO延时情况", "knowledge_description": "根据事件类型查数据库IO延时情况"}], "description": "每秒数据文件读增长异常，是近1小时平均值的5倍", "rule_name": "mysql_file_read", "id": "16284", "rule_expression": "[metric,2020243]/[metric hour avg,2020243]>[num,$1]&&[metric,2020243]>[bsl upper,2020243]*[num,$2][@Denominator0,0]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "innodb_log_file相关参数检查"}], "description": "REDO LOG大小的参数设置太合理，会切换日志文件切换次数过高，造成磁盘IO压力过大", "rule_name": "mysql_innodb_log_size_pct", "id": "16285", "rule_expression": "([cib,2210002,innodb_log_file_size]*[cib,2210002,innodb_log_files_in_group] * [num,100] / [cib,2210002,innodb_buffer_pool_size] <[num,$1] || [cib,2210002,innodb_log_file_size]*[cib,2210002,innodb_log_files_in_group] * [num,100] / [cib,2210002,innodb_buffer_pool_size] >[num,$2]) && [metric in time,30,2020303] * [num,3600] / [cib,2210002,innodb_log_file_size] > [num,5]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL锁等待分析"}, {"knowledge_description": "MySQL锁等待分析"}], "description": "MySQL MDL锁时间过长，请及时处理", "rule_name": "mysql_mdl_lock_warn", "id": "16293", "rule_expression": "[metric,2020153]>[num,$1]", "db_type": "MySQL", "warning_level": "4", "warning_message": "当前MDL锁时间为：{[metric,2020153]} 秒，MDL锁数量为：{[metric,2020152]} "}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "显示MySQL Server分配的内存大小", "knowledge_description": "显示MySQL Server分配的内存大小"}], "description": "MySQL进程占用内存持续增长，存在内存泄露可能", "rule_name": "mysql_memory", "id": "16294", "rule_expression": "[metric in time,10,2020455]>[num,1048576] && [metric in time,10,2020456]>[num,10]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "每秒删除操作数过多，是最近1小时平均数的5倍", "rule_name": "mysql_more_delete", "id": "16295", "rule_expression": "[metric,2020159]/[metric hour avg,2020159]>[num,5] && [metric,2020159]>[bsl upper,2020159]*[num,1.2][@Denominator0,0]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "每秒插入操作数过多，是最近1小时平均数的5倍", "rule_name": "mysql_more_insert", "id": "16296", "rule_expression": "[metric,2020161]/[metric hour avg,2020161]>[num,5] && [metric,2020161]>[bsl upper,2020161]*[num,1.2][@Denominator0,0]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "最外层的驱动表全表扫描次数过高", "rule_name": "mysql_select_scan", "id": "16305", "rule_expression": "[metric in time,5,2020229][oper,>][num,$1]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "仅支持实时分析", "knowledge_description": "MySQL主从复制分析"}, {"knowledge_name": "MySQL操作系统维度诊断", "knowledge_description": "MySQL操作系统维度诊断"}], "description": "MySQL主从复制延迟达到3600秒以上", "rule_name": "mysql_slave_is_lagging", "id": "16308", "rule_expression": "[metric max,2020451]>[num,$1]", "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL锁等待分析"}, {"knowledge_description": "对MySQL的运行状态进行分析"}], "description": "Innodb事务锁等待并发数超过阀值", "rule_name": "mysql_txlock_wait", "id": "16309", "rule_expression": null, "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL并发SQL语句分析"}, {"knowledge_description": "SQL及等待链分析\t活跃会话过高时分析正在执行的的SQL语句及可能存在的等待链"}], "description": "相同SQL的并发数过多，超过5次", "rule_name": "mysql_similar_sqls", "id": "16306", "rule_expression": "[metric in time,30,2020170]>[num,4]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "对MySQL的连接分布情况进行分析"}, {"knowledge_description": "对MySQL的运行状态进行分析"}], "description": "每秒登陆次数超过50次，说明数据库存在频繁登陆", "rule_name": "mysql_logon", "id": "16290", "rule_expression": null, "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "发现有状态为\"Waiting in connection_control plugin\"的等待连接", "rule_name": "mysql_waiting_ connection_control", "id": "16310", "rule_expression": "[metric in time,5,2020450][oper,<][num,$1]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "检查query_cache_size数据库参数", "knowledge_description": "检查query_cache_size数据库参数"}], "description": "查询缓存可能不足", "rule_name": "qcache_low", "id": "16312", "rule_expression": "[cib,2210002,query_cache_size]>[num,0] && [cib,2210002,query_cache_type][oper,neq][str,OFF] && [metric,2020284]>[num,$1]", "db_type": "MySQL", "warning_level": "1"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL事务分析"}], "description": "事务回滚比例较大，应用可能出现异常", "rule_name": "rollback_ratio_high", "id": "16315", "rule_expression": "[metric,2020213]>[num,$1]&&[metric,2020214]<[num,$2]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "innodb_log_file相关参数检查"}], "description": "REDO LOG大小的参数设置太合理，会切换日志文件切换次数过高，造成磁盘IO压力过大", "rule_name": "mysql_innodb_log_size_pct", "id": "8248", "rule_expression": "([cib,2210002,innodb_log_file_size]*[cib,2210002,innodb_log_files_in_group] * [num,100] / [cib,2210002,innodb_buffer_pool_size] <[num,$1] || [cib,2210002,innodb_log_file_size]*[cib,2210002,innodb_log_files_in_group] * [num,100] / [cib,2210002,innodb_buffer_pool_size] >[num,$2]) && [metric in time,30,2020303] * [num,3600] / [cib,2210002,innodb_log_file_size] > [num,5]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "检查数据库参数", "knowledge_description": "检查数据库参数"}, {"knowledge_name": "检查数据库参数", "knowledge_description": "检查数据库参数"}], "description": "从库日志中频繁出现命中slave_pending_jobs_size_max的告警，slave_pending_jobs_size_max参数设置过小，可能会导致主从延迟", "rule_name": "slave_db_slave_pending_jobs_size_max_too_small", "id": "16317", "rule_expression": "[metric,2020506]>[num,$1] && [cib,2210002,slave_pending_jobs_size_max]<=[num,$1]", "db_type": "MySQL", "warning_level": "2", "warning_message": "从库日志中频繁出现命中slave_pending_jobs_size_max的告警，slave_pending_jobs_size_max参数设置过小，可能会导致主从延迟"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析服务器IO设备的IO情况", "knowledge_description": "分析服务器IO设备的IO情况"}, {"knowledge_name": "分析服务器IO设备的IO情况", "knowledge_description": "分析服务器IO设备的IO情况"}], "description": "脏页比例超过30%并且每秒日志量超过每秒写大小的1.5倍，IO延迟超过10ms，数据库IO可能存在问题", "rule_name": "slow_io_lead_to_more_dirty_buffer", "id": "16318", "rule_expression": "([metric ,2020137]>[num,$1]) && (([metric ,2020303]/[metric,2020247])>=[num,$2]) &&([metric,3000006] >=[num,$3])", "db_type": "MySQL", "warning_level": "3", "warning_message": "脏页比例超过30%并且每秒日志量超过每秒写大小的1.5倍，IO延迟超过10ms，数据库IO可能存在问题"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL慢查询日志分析"}], "description": "每秒慢查询数大于1且每秒慢查询超过每秒查询数量的20%，说明数据库性能存在较多的慢查询，数据库性能低下", "rule_name": "slow_query_too_more", "id": "16319", "rule_expression": "[metric,2020287]>=[num,$1] && ([metric,2020287]/[metric,2020207]>[num,$2] )", "db_type": "MySQL", "warning_level": "3", "warning_message": "每秒慢查询数大于1且每秒慢查询超过每秒查询数量的20%，说明数据库性能存在较多的慢查询，数据库性能低下"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "每秒数据文件读阻塞次数过高", "rule_name": "mysql_innodb_pending_reads", "id": "16410", "rule_expression": "[metric in time,5,2020245][oper,>][num,$1] ", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL文件IO汇总"}, {"knowledge_description": "MySQL Top SQL-按返回行数排序"}, {"knowledge_description": "MySQL Top SQL-按排序行数排序"}, {"knowledge_description": "MySQL Top SQL-按执行时间排序"}, {"knowledge_name": "显示数据库中未使用的索引信息", "knowledge_description": "显示数据库中未使用的索引信息"}], "description": "每秒物理读增长异常，是近1小时平均值的5倍", "rule_name": "mysql_physical_read", "id": "8903", "rule_expression": "[metric,2020238]/[metric hour avg,2020238]>[num,$1] && [metric,2020238]>[bsl upper,2020238]*[num,$2][@Denominator0,0]", "db_type": "MySQL", "warning_level": "3", "warning_message": "每秒物理读{[metric,2020238]}超出小时平均值{$1}倍，并且超过基线{$2}倍"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "innodb_log_file相关参数检查"}], "description": "REDO LOG大小的参数设置太合理，会切换日志文件切换次数过高，造成磁盘IO压力过大", "rule_name": "mysql_innodb_log_size_pct", "id": "8247", "rule_expression": "([cib,2210002,innodb_log_file_size]*[cib,2210002,innodb_log_files_in_group] * [num,100] / [cib,2210002,innodb_buffer_pool_size] <[num,$1] || [cib,2210002,innodb_log_file_size]*[cib,2210002,innodb_log_files_in_group] * [num,100] / [cib,2210002,innodb_buffer_pool_size] >[num,$2]) && [metric in time,30,2020303] * [num,3600] / [cib,2210002,innodb_log_file_size] > [num,5]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "mysql表缓存命中率分析", "knowledge_description": "mysql表缓存命中率分析"}, {"knowledge_name": "检查table_open_cache_instances数据库参数", "knowledge_description": "检查table_open_cache_instances数据库参数"}], "description": "表缓存不是最佳的", "rule_name": "table_cache_suboptimal", "id": "16323", "rule_expression": "[metric,2020076]>[cib,2210002,table_open_cache]*[num,0.95] && [metric,2020273]>[num,$1]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL锁等待分析"}, {"knowledge_description": "MySQL Top SQL-按锁时间排序"}, {"knowledge_name": "检查lock_wait_timeout数据库参数", "knowledge_description": "检查lock_wait_timeout数据库参数"}, {"knowledge_name": "检查innodb_lock_wait_timeout数据库参数", "knowledge_description": "检查innodb_lock_wait_timeout数据库参数"}], "description": "表锁过度竞争,每秒表锁等待数超过2次", "rule_name": "table_lock_contenion", "id": "16324", "rule_expression": "[metric,2020199]>[num,$1]&&[metric,2020404]<[num,$2]&&[metric,2020265]>[num,$3]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL Thread Cache命中率分析"}, {"knowledge_name": "检查innodb_thread_concurrency数据库参数", "knowledge_description": "检查innodb_thread_concurrency数据库参数"}], "description": "线程缓存大小可能不是最佳的", "rule_name": "thread_cache_suboptimal", "id": "16325", "rule_expression": "[metric,2020199]>[num,$1] && [metric,2020412]<[num,$2] && [cib,2210002,thread_cache_size]>[num,0]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "mysql临时表缓存命中率分析", "knowledge_description": "mysql临时表缓存命中率分析"}, {"knowledge_description": "MySQL Top SQL-按创建临时表数排序"}, {"knowledge_name": "MySQL数据库临时表及临时表空间分析", "knowledge_description": "MySQL数据库临时表及临时表空间分析"}, {"knowledge_name": "检查sort_buffer_size数据库参数", "knowledge_description": "检查sort_buffer_size数据库参数"}], "description": "检测到磁盘临时表使用量过多", "rule_name": "tmp_disk_tables", "id": "16326", "rule_expression": "[metric,2020199]>[num,$1]&&[metric,2020405]<[num,$2]&&[metric,2020267]>[num,$3]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析服务器IO设备的IO情况", "knowledge_description": "分析服务器IO设备的IO情况"}, {"knowledge_name": "MySQL数据库IO维度诊断", "knowledge_description": "MySQL数据库IO维度诊断"}, {"knowledge_description": "MySQL物理读高分析"}, {"knowledge_description": "分析物理写高"}], "description": "操作系统IO延时严重超标（超过100毫秒），数据库存在风险", "rule_name": "IO_latency_mysql_critical", "id": "8195", "rule_expression": "[metric,3000006]>[num,$1] && ([metric,3000100]>[num,$2] || [metric,3000101]>[num,$3])", "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析服务器IO设备的IO情况", "knowledge_description": "分析服务器IO设备的IO情况"}, {"knowledge_name": "MySQL数据库IO维度诊断", "knowledge_description": "MySQL数据库IO维度诊断"}, {"knowledge_description": "MySQL物理读高分析"}, {"knowledge_description": "分析物理写高"}], "description": "操作系统IO延时严重超标（超过100毫秒），数据库存在风险", "rule_name": "IO_latency_mysql_critical", "id": "11097", "rule_expression": "[metric,3000006]>[num,$1] && ([metric,3000100]>[num,$2] || [metric,3000101]>[num,$3])", "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析服务器IO设备的IO情况", "knowledge_description": "分析服务器IO设备的IO情况"}, {"knowledge_name": "MySQL数据库IO维度诊断", "knowledge_description": "MySQL数据库IO维度诊断"}, {"knowledge_description": "MySQL物理读高分析"}, {"knowledge_description": "分析物理写高"}], "description": "操作系统IO延时严重超标（超过100毫秒），数据库存在风险", "rule_name": "IO_latency_mysql_critical", "id": "8884", "rule_expression": "[metric,3000006]>[num,$1] && ([metric,3000100]>[num,$2] || [metric,3000101]>[num,$3])", "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "对MySQL的运行状态进行分析"}, {"knowledge_name": "操作系统核心资源分析", "knowledge_description": "操作系统核心资源分析"}, {"knowledge_name": "分析CPU使用情况", "knowledge_description": "分析CPU使用情况"}, {"knowledge_description": "分析指标、SQL相似度"}], "description": "操作系统r队列超过CPU数量的2倍且CPU使用率超过90%，则可能存在CPU资源瓶颈", "rule_name": "more_running_proc_mysql", "id": "16268", "rule_expression": "[metric,3000009]/[metric,3000010]>[num,$1] && [metric,3000003]>[num,$2]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "检查MySQL数据库参数", "knowledge_description": "检查MySQL数据库参数"}, {"knowledge_name": "分析服务器IO设备的IO情况", "knowledge_description": "分析服务器IO设备的IO情况"}], "description": "日志文件中存在大量page_cleaner警告，innodb_lru_scan_depth参数设置过大，建议调小该参数或提升IO能力", "rule_name": "more_page_cleaner_warn_in_logfile", "id": "16267", "rule_expression": "[cib,2210002,innodb_lru_scan_depth]>=[num,$1] && [metric,3000006]>[num,$2] && [metric,2020505]>[num,$3]", "db_type": "MySQL", "warning_level": "2", "warning_message": "日志文件中存在大量page_cleaner警告，innodb_lru_scan_depth参数设置过大，建议调小该参数或提升IO能力"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "分析MySQL数据文件写等待"}], "description": "每秒数据文件写阻塞次数过大", "rule_name": "mysql_innodb_pending_wirtes", "id": "16411", "rule_expression": "[metric in time,5,2020249][oper,>][num,$1] ", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "显示指定时间间隔内的日志信息"}], "description": "日志文件增长过快", "rule_name": "mysql_logs", "id": "16291", "rule_expression": "[metric,2020437]/[metric hour avg,2020444]>[num,5] && [metric,2020437]>[bsl upper,2020444]*[num,1.2][@Denominator0,0]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "对MySQL的连接分布情况进行分析"}, {"knowledge_description": "对MySQL的运行状态进行分析"}], "description": "每秒登陆次数超过50次，说明数据库存在频繁登陆", "rule_name": "mysql_logon", "id": "16414", "rule_expression": null, "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "MGR集群中节点状态异常", "rule_name": "mg_member_state_error", "id": "15262", "rule_expression": "[metric in time,30,2020446]>[num,0] ", "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "操作系统核心资源分析", "knowledge_description": "操作系统核心资源分析"}, {"knowledge_name": "MySQL数据库负载指标分析", "knowledge_description": "MySQL数据库负载指标分析"}, {"knowledge_name": "分析服务器IO设备的IO情况", "knowledge_description": "分析服务器IO设备的IO情况"}, {"knowledge_name": "服务器内存分析", "knowledge_description": "服务器内存分析"}, {"knowledge_name": "MySQL数据库实例检查", "knowledge_description": "MySQL数据库实例检查"}, {"knowledge_description": "分析MySQL mutex锁"}, {"knowledge_description": "MySQL锁等待分析"}, {"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-MYSQL IO分析"}], "description": "数据库采集任务严重超时，数据库存在严重性能风险", "rule_name": "collector_exec_slow_mysql", "id": "11086", "rule_expression": "[metric,1000101] >([metric hour avg,1000101]*[num,$1])", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "对MySQL的连接分布情况进行分析"}, {"knowledge_name": "检查max_connections数据库参数", "knowledge_description": "检查max_connections数据库参数"}, {"knowledge_name": "检查wait_timeout数据库参数", "knowledge_description": "检查wait_timeout数据库参数"}, {"knowledge_description": "对MySQL的运行状态进行分析"}], "description": "连接数接近或达到最大连接限制", "rule_name": "connection_exceed", "id": "11087", "rule_expression": "[metric,2020199]>[num,$1] && [metric,2020416]>[num,$2]", "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "显示当前数据库容量使用情况，以MB为单位", "knowledge_description": "显示当前数据库容量使用情况，以MB为单位"}, {"knowledge_name": "显示当前数据库系统前20个最大的数据库表相关容量信息", "knowledge_description": "显示当前数据库系统前20个最大的数据库表相关容量信息"}], "description": "Innodb共享表空间存在无法扩展风险", "rule_name": "ib_data_space", "id": "11094", "rule_expression": "[metric,2020400,IBDATA]>[num,$1] && [metric,2020431]>[num,$2]", "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL Top SQL-按创建临时表数排序"}, {"knowledge_description": "MySQL Top SQL-按排序行数排序"}, {"knowledge_description": "对MySQL的运行状态进行分析"}, {"knowledge_name": "mysql临时表缓存命中率分析", "knowledge_description": "mysql临时表缓存命中率分析"}, {"knowledge_name": "MySQL数据库临时表及临时表空间分析", "knowledge_description": "MySQL数据库临时表及临时表空间分析"}], "description": "Innodb临时表空间存在无法扩展风险", "rule_name": "ib_tmp_space", "id": "11095", "rule_expression": "[metric,2020400,IBTMP]>[num,$1] && [metric,2020433]>[num,$2]", "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析MySQL MyISAM key buffer命中率", "knowledge_description": "分析MySQL MyISAM key buffer命中率"}], "description": "Key缓冲区大小可能不是最佳的", "rule_name": "key_buffer_suboptimal", "id": "11099", "rule_expression": "[metric,2020199]>[num,$1] && [metric,2020283]>[num,$2] && [metric,2020410]<[num,$3]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析MySQL InnoDB 写入日志等待", "knowledge_description": "分析MySQL InnoDB 写入日志等待"}, {"knowledge_name": "检查数据库innodb_log_buffer_size参数是否设置合理", "knowledge_description": "检查数据库innodb_log_buffer_size参数是否设置合理"}, {"knowledge_name": "检查sync_binlog数据库参数", "knowledge_description": "检查sync_binlog数据库参数"}, {"knowledge_name": "检查innodb_flush_log_at_trx_commit数据库参数是否设置合理", "knowledge_description": "检查innodb_flush_log_at_trx_commit数据库参数是否设置合理"}, {"knowledge_name": "检查log_bin数据库参数", "knowledge_description": "检查log_bin数据库参数"}], "description": "Innodb日志等待可能是性能瓶颈", "rule_name": "log_nowait_low", "id": "11101", "rule_expression": "[metric,2020427]<[num,$1]&&[metric,2020254]>[num,$2]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL并发SQL语句分析"}, {"knowledge_description": "SQL及等待链分析\t活跃会话过高时分析正在执行的的SQL语句及可能存在的等待链"}], "description": "相同SQL的并发数过多，超过5次", "rule_name": "mysql_similar_sqls", "id": "15234", "rule_expression": "[metric in time,30,2020170]>[num,4]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "服务器内存分析", "knowledge_description": "服务器内存分析"}, {"knowledge_name": "MySQL内存分析", "knowledge_description": "MySQL内存分析"}, {"knowledge_name": "Swap占用较多的前30个线程", "knowledge_description": "Swap占用较多的前30个线程"}], "description": "内存不可用率过高，超过90%，可能存在换页和OOM Kill的风险\t", "rule_name": "memory_used_high_mysql", "id": "15778", "rule_expression": "[metric,3000014]>[num,$1]  && [metric,3001031]>[num,$2]", "db_type": "MySQL", "warning_level": "4", "warning_message": "指标< Mem unavailable >(内存不可用率)过高，操作系统内存出现严重不足，可能存在换页和OOM Kill的风险。内存不可用率：（{[metric,3000014]}%）且swap usage达到{[metric,3001031]}%。"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL并发SQL语句分析"}, {"knowledge_description": "SQL及等待链分析\t活跃会话过高时分析正在执行的的SQL语句及可能存在的等待链"}], "description": "相同SQL的并发数过多，超过5次", "rule_name": "mysql_similar_sqls", "id": "15233", "rule_expression": "[metric in time,30,2020170]>[num,4]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析服务器IO设备的IO情况", "knowledge_description": "分析服务器IO设备的IO情况"}, {"knowledge_description": "MySQL Top SQL汇总"}, {"knowledge_name": "根据事件类型查数据库IO延时情况", "knowledge_description": "根据事件类型查数据库IO延时情况"}], "description": "每秒数据文件读增长异常，是近1小时平均值的5倍", "rule_name": "mysql_file_read", "id": "11110", "rule_expression": "[metric,2020243]/[metric hour avg,2020243]>[num,$1]&&[metric,2020243]>[bsl upper,2020243]*[num,$2][@Denominator0,0]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "innodb_log_file相关参数检查"}], "description": "REDO LOG大小的参数设置太合理，会切换日志文件切换次数过高，造成磁盘IO压力过大", "rule_name": "mysql_innodb_log_size_pct", "id": "11111", "rule_expression": "([cib,2210002,innodb_log_file_size]*[cib,2210002,innodb_log_files_in_group] * [num,100] / [cib,2210002,innodb_buffer_pool_size] <[num,$1] || [cib,2210002,innodb_log_file_size]*[cib,2210002,innodb_log_files_in_group] * [num,100] / [cib,2210002,innodb_buffer_pool_size] >[num,$2]) && [metric in time,30,2020303] * [num,3600] / [cib,2210002,innodb_log_file_size] > [num,5]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "对MySQL的连接分布情况进行分析"}, {"knowledge_description": "对MySQL的运行状态进行分析"}], "description": "每秒登陆次数超过20次，说明数据库存在频繁登陆", "rule_name": "mysql_logon", "id": "11112", "rule_expression": null, "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "InnoDB Buffer Pool等待空闲页次数超过每秒5次", "rule_name": "innodb_buffer_pool_wait", "id": "16381", "rule_expression": "[metric in time,5,2020426][oper,<][num,$1] && [metric in time,5,2020239][oper,>][num,$2] ", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "MGR集群存在事务冲突", "rule_name": "mgr_confict_tranactions", "id": "16389", "rule_expression": "[metric in time,30,2020446]>[num,0] ", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "最外层的驱动表全表扫描次数过高", "rule_name": "mysql_select_scan", "id": "15140", "rule_expression": "[metric in time,5,2020229][oper,>][num,$1]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "未清理回滚日志数异常分析"}, {"knowledge_description": "MySQL事务分析"}, {"knowledge_description": "MySQL Innodb引擎状态分析"}], "description": "Innodb引擎未清除事务数过多", "rule_name": "trx_history_list", "id": "16452", "rule_expression": null, "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL锁等待分析"}, {"knowledge_description": "MySQL Top SQL-按锁时间排序"}], "description": "行锁等待严重超时（超过3600秒)，数据库可能存在未提交的会话", "rule_name": "row_lock_wait_time_long_mysql", "id": "16440", "rule_expression": null, "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "已启用查询缓存，建议关闭", "rule_name": "mysql_enable_query_cache", "id": "16407", "rule_expression": "[cib,2210002,query_cache_type] [oper,eq][str,OFF]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析服务器IO设备的IO情况", "knowledge_description": "分析服务器IO设备的IO情况"}, {"knowledge_description": "MySQL Top SQL汇总"}, {"knowledge_name": "根据事件类型查数据库IO延时情况", "knowledge_description": "根据事件类型查数据库IO延时情况"}], "description": "每秒数据文件读增长异常，是近1小时平均值的5倍", "rule_name": "mysql_file_read", "id": "16408", "rule_expression": "[metric,2020243]/[metric hour avg,2020243]>[num,$1]&&[metric,2020243]>[bsl upper,2020243]*[num,$2][@Denominator0,0]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "innodb_log_file相关参数检查"}], "description": "REDO LOG大小的参数设置太合理，会切换日志文件切换次数过高，造成磁盘IO压力过大", "rule_name": "mysql_innodb_log_size_pct", "id": "16409", "rule_expression": "([cib,2210002,innodb_log_file_size]*[cib,2210002,innodb_log_files_in_group] * [num,100] / [cib,2210002,innodb_buffer_pool_size] <[num,$1] || [cib,2210002,innodb_log_file_size]*[cib,2210002,innodb_log_files_in_group] * [num,100] / [cib,2210002,innodb_buffer_pool_size] >[num,$2]) && [metric in time,30,2020303] * [num,3600] / [cib,2210002,innodb_log_file_size] > [num,5]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "InnoDB 平均获取行锁时间大于5毫秒", "rule_name": "mysql_innodb_row_lock_time_avg", "id": "16412", "rule_expression": "[metric in time,5,2020261][oper,>][num,$1] ", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "查看文件系统目录实时使用率", "knowledge_description": "查看文件系统目录实时使用率"}, {"knowledge_name": "检查log_bin数据库参数", "knowledge_description": "检查log_bin数据库参数"}], "description": "有30天以前生成的binlog未被清理，可能会导致磁盘空间不足", "rule_name": "mysql_no_del_binlog", "id": "16300", "rule_expression": "[metric,2020434] >  [num,$1] && [metric,2020114] >  [num,$2] ", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "查看文件系统目录实时使用率", "knowledge_description": "查看文件系统目录实时使用率"}, {"knowledge_name": "检查log_bin数据库参数", "knowledge_description": "检查log_bin数据库参数"}], "description": "有90天以前生成的binlog未被清理，极大可能会导致磁盘空间不足", "rule_name": "mysql_no_del_binlog_90", "id": "16301", "rule_expression": "[metric,2020434] >  [num,$1]  && [metric,2020114] >  [num,$2] ", "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "对MySQL的连接分布情况进行分析"}], "description": "连续多次出现连接异常终止，报错Got an error reading communication packets", "rule_name": "aborted_connection", "id": "5761", "rule_expression": "[metric,2020206]>[num,$1] && [metric,2020401]<[num,$2]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "mysql innodb缓存命中率分析", "knowledge_description": "mysql innodb缓存命中率分析"}, {"knowledge_description": "对MySQL的运行状态进行分析"}, {"knowledge_description": "MySQL物理读高分析"}, {"knowledge_description": "分析物理写高"}], "description": "Innodb缓冲区命中率不理想，低于95%", "rule_name": "buffer_cache_suboptimal", "id": "5763", "rule_expression": "[metric,2020199]>[num,$1] && [metric,2020402]<[num,$2] && [metric,2020237]>[num,$3]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "mysql innodb数据块立即写入缓存比例分析", "knowledge_description": "mysql innodb数据块立即写入缓存比例分析"}, {"knowledge_name": "mysql innodb缓存命中率分析", "knowledge_description": "mysql innodb缓存命中率分析"}, {"knowledge_description": "对MySQL的运行状态进行分析"}, {"knowledge_description": "MySQL Top SQL-按执行时间排序"}, {"knowledge_name": "检查innodb_io_capacity数据库参数", "knowledge_description": "检查innodb_io_capacity数据库参数"}, {"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-MYSQL IO分析"}], "description": "Innodb缓存池写入可能是性能瓶颈", "rule_name": "buffer_nowait_low", "id": "5764", "rule_expression": "[metric,2020426]<[num,$1]&&[metric,2020238]>[num,$2]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "操作系统核心资源分析", "knowledge_description": "操作系统核心资源分析"}, {"knowledge_name": "MySQL数据库负载指标分析", "knowledge_description": "MySQL数据库负载指标分析"}, {"knowledge_name": "分析服务器IO设备的IO情况", "knowledge_description": "分析服务器IO设备的IO情况"}, {"knowledge_name": "服务器内存分析", "knowledge_description": "服务器内存分析"}, {"knowledge_name": "MySQL数据库实例检查", "knowledge_description": "MySQL数据库实例检查"}, {"knowledge_description": "分析MySQL mutex锁"}, {"knowledge_description": "MySQL锁等待分析"}, {"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-MYSQL IO分析"}], "description": "数据库采集任务严重超时，数据库存在严重性能风险", "rule_name": "collector_exec_slow_mysql", "id": "7004", "rule_expression": "[metric,1000101] >([metric hour avg,1000101]*[num,$1])", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "InnoDB Buffer Pool等待空闲页次数超过每秒5次", "rule_name": "innodb_buffer_pool_wait", "id": "15261", "rule_expression": "[metric in time,5,2020426][oper,<][num,$1] && [metric in time,5,2020239][oper,>][num,$2] ", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "MGR集群存在事务冲突", "rule_name": "mgr_confict_tranactions", "id": "15263", "rule_expression": "[metric in time,30,2020446]>[num,0] ", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "MGR集群发生FC(流量控制)，集群处于暂停状态", "rule_name": "mgr_flow_control_paused", "id": "15264", "rule_expression": "[metric in time,5,2020154]>[num,0] ", "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "MGR集群中有成员处于离线状态", "rule_name": "mgr_offline_members", "id": "15265", "rule_expression": "[metric in time,30,2020446]>[num,0] ", "db_type": "MySQL", "warning_level": "4", "warning_message": "MGR集群中离线节点数为：{[metric in time,30,2020446]>[num,0] }，请立即检查"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL事务分析"}], "description": "事务回滚比例较大，应用可能出现异常", "rule_name": "rollback_ratio_high", "id": "11126", "rule_expression": "[metric,2020213]>[num,$1]&&[metric,2020214]<[num,$2]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "检查数据库参数", "knowledge_description": "检查数据库参数"}, {"knowledge_name": "检查数据库参数", "knowledge_description": "检查数据库参数"}], "description": "从库日志中频繁出现命中slave_pending_jobs_size_max的告警，slave_pending_jobs_size_max参数设置过小，可能会导致主从延迟", "rule_name": "slave_db_slave_pending_jobs_size_max_too_small", "id": "15164", "rule_expression": "[metric,2020506]>[num,$1] && [cib,2210002,slave_pending_jobs_size_max]<=[num,$1]", "db_type": "MySQL", "warning_level": "2", "warning_message": "从库日志中频繁出现命中slave_pending_jobs_size_max的告警，slave_pending_jobs_size_max参数设置过小，可能会导致主从延迟"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "对MySQL的连接分布情况进行分析"}, {"knowledge_name": "检查max_connections数据库参数", "knowledge_description": "检查max_connections数据库参数"}, {"knowledge_name": "检查wait_timeout数据库参数", "knowledge_description": "检查wait_timeout数据库参数"}, {"knowledge_description": "对MySQL的运行状态进行分析"}], "description": "连接数接近或达到最大连接限制", "rule_name": "connection_exceed", "id": "5765", "rule_expression": "[metric,2020199]>[num,$1] && [metric,2020416]>[num,$2]", "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "操作系统核心资源分析", "knowledge_description": "操作系统核心资源分析"}, {"knowledge_name": "MySQL数据库负载指标分析", "knowledge_description": "MySQL数据库负载指标分析"}, {"knowledge_name": "服务器内存分析", "knowledge_description": "服务器内存分析"}, {"knowledge_name": "分析服务器IO设备的IO情况", "knowledge_description": "分析服务器IO设备的IO情况"}, {"knowledge_name": "MySQL数据库实例检查", "knowledge_description": "MySQL数据库实例检查"}], "description": "数据库连接严重超时，数据库存在巨大风险", "rule_name": "connect_slow_mysql", "id": "6992", "rule_expression": "[metric,1000000][oper,eq][str,连接成功] && [metric,1000102] >([metric hour avg,1000102]*[num,$1])&& ([metric,1000102] >[num,$2])", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL Top SQL-按创建临时表数排序"}, {"knowledge_description": "MySQL Top SQL-按排序行数排序"}, {"knowledge_description": "对MySQL的运行状态进行分析"}, {"knowledge_name": "mysql临时表缓存命中率分析", "knowledge_description": "mysql临时表缓存命中率分析"}, {"knowledge_name": "MySQL数据库临时表及临时表空间分析", "knowledge_description": "MySQL数据库临时表及临时表空间分析"}], "description": "Innodb临时表空间存在无法扩展风险", "rule_name": "ib_tmp_space", "id": "6925", "rule_expression": "[metric,2020400,IBTMP]>[num,$1] && [metric,2020433]>[num,$2]", "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析MySQL MyISAM key buffer命中率", "knowledge_description": "分析MySQL MyISAM key buffer命中率"}], "description": "Key缓冲区大小可能不是最佳的", "rule_name": "key_buffer_suboptimal", "id": "5772", "rule_expression": "[metric,2020199]>[num,$1] && [metric,2020283]>[num,$2] && [metric,2020410]<[num,$3]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "对MySQL的运行状态进行分析"}, {"knowledge_description": "MySQL Top SQL-按锁时间排序"}], "description": "被锁定的查询数过多，超过5个", "rule_name": "locked_query", "id": "5773", "rule_expression": "[metric,2020422]>[num,$1]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "服务器内存分析", "knowledge_description": "服务器内存分析"}, {"knowledge_name": "MySQL内存分析", "knowledge_description": "MySQL内存分析"}, {"knowledge_name": "Swap占用较多的前30个线程", "knowledge_description": "Swap占用较多的前30个线程"}], "description": "内存不可用率过高，超过90%，可能存在换页和OOM Kill的风险\t", "rule_name": "memory_used_high_mysql", "id": "15779", "rule_expression": "[metric,3000014]>[num,$1]  && [metric,3001031]>[num,$2]", "db_type": "MySQL", "warning_level": "4", "warning_message": "指标< Mem unavailable >(内存不可用率)过高，操作系统内存出现严重不足，可能存在换页和OOM Kill的风险。内存不可用率：（{[metric,3000014]}%）且swap usage达到{[metric,3001031]}%。"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "mysql表缓存命中率分析", "knowledge_description": "mysql表缓存命中率分析"}, {"knowledge_name": "检查table_open_cache_instances数据库参数", "knowledge_description": "检查table_open_cache_instances数据库参数"}], "description": "表缓存不是最佳的", "rule_name": "table_cache_suboptimal", "id": "5791", "rule_expression": "[metric,2020076]>[cib,2210002,table_open_cache]*[num,0.95] && [metric,2020273]>[num,$1]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "查看文件系统目录实时使用率", "knowledge_description": "查看文件系统目录实时使用率"}, {"knowledge_name": "检查log_bin数据库参数", "knowledge_description": "检查log_bin数据库参数"}], "description": "有90天以前生成的binlog未被清理，极大可能会导致磁盘空间不足", "rule_name": "mysql_no_del_binlog_90", "id": "16425", "rule_expression": "[metric,2020434] >  [num,$1]  && [metric,2020114] >  [num,$2] ", "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "对MySQL的运行状态进行分析"}, {"knowledge_name": "操作系统核心资源分析", "knowledge_description": "操作系统核心资源分析"}, {"knowledge_name": "分析CPU使用情况", "knowledge_description": "分析CPU使用情况"}, {"knowledge_description": "分析指标、SQL相似度"}], "description": "操作系统r队列超过CPU数量的2倍且CPU使用率超过90%，则可能存在CPU资源瓶颈", "rule_name": "more_running_proc_mysql", "id": "8175", "rule_expression": "[metric,3000009]/[metric,3000010]>[num,$1] && [metric,3000003]>[num,$2]", "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "对MySQL的连接分布情况进行分析"}], "description": "客户端登录验证失败次数过多，可能应用配置的凭证信息未及时更新", "rule_name": "mysql_authentication_errors", "id": "15271", "rule_expression": "[metric in time,30,2020507]>[num,0]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL Top SQL汇总"}, {"knowledge_description": "对MySQL的运行状态进行分析"}], "description": "每秒逻辑读增长异常，是近1小时平均值的5倍", "rule_name": "mysql_bp_read", "id": "5778", "rule_expression": "[metric,2020237]/[metric hour avg,2020237]>[num,$1]&&[metric,2020237]>[bsl upper,2020237]*[num,$2][@Denominator0,0]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "MySQL数据库InnoDB存储引擎参数检查", "knowledge_description": "MySQL数据库InnoDB存储引擎参数检查"}], "description": "BUFFER POOL的实例个数设置有误，超过了最大值64", "rule_name": "mysql_bufferpool_instances", "id": "8250", "rule_expression": "[cib,2210002,innodb_buffer_pool_instances]>[num,$1]", "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "MySQL数据库InnoDB存储引擎参数检查", "knowledge_description": "MySQL数据库InnoDB存储引擎参数检查"}], "description": "BUFFER POOL的大小小于1G,但缓冲池实例个数大于1", "rule_name": "mysql_bufferpool_less_than1G", "id": "8252", "rule_expression": "[cib,2210002,innodb_buffer_pool_size]/[num,1024]/[num,1024]/[num,1024]<[num,$1]&&[cib,2210002,innodb_buffer_pool_instances]>[num,$2]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析服务器IO设备的IO情况", "knowledge_description": "分析服务器IO设备的IO情况"}, {"knowledge_description": "MySQL Top SQL汇总"}, {"knowledge_name": "根据事件类型查数据库IO延时情况", "knowledge_description": "根据事件类型查数据库IO延时情况"}], "description": "每秒数据文件读增长异常，是近1小时平均值的5倍", "rule_name": "mysql_file_read", "id": "5779", "rule_expression": "[metric,2020243]/[metric hour avg,2020243]>[num,$1]&&[metric,2020243]>[bsl upper,2020243]*[num,$2][@Denominator0,0]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "检查MySQL数据库参数", "knowledge_description": "检查MySQL数据库参数"}, {"knowledge_name": "分析服务器IO设备的IO情况", "knowledge_description": "分析服务器IO设备的IO情况"}], "description": "日志文件中存在大量page_cleaner警告，innodb_lru_scan_depth参数设置过大，建议调小该参数或提升IO能力", "rule_name": "more_page_cleaner_warn_in_logfile", "id": "15266", "rule_expression": "[cib,2210002,innodb_lru_scan_depth]>=[num,$1] && [metric,3000006]>[num,$2] && [metric,2020505]>[num,$3]", "db_type": "MySQL", "warning_level": "2", "warning_message": "日志文件中存在大量page_cleaner警告，innodb_lru_scan_depth参数设置过大，建议调小该参数或提升IO能力"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "每秒异常断开客户端连接次数过多，超过5次", "rule_name": "mysql_aborted_clients", "id": "15269", "rule_expression": "[metric in time,5,2020454][oper,>][num,$1] ", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "对MySQL的连接分布情况进行分析"}], "description": "每秒连接服务端失败次数过高，超过1次", "rule_name": "mysql_aborted_connects", "id": "15270", "rule_expression": "[metric in time,5,2020206][oper,>][num,$1] ", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "已启用查询缓存，建议关闭", "rule_name": "mysql_enable_query_cache", "id": "15278", "rule_expression": "[cib,2210002,query_cache_type] [oper,eq][str,OFF]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "预编译语句执行比例过低分析", "knowledge_description": "预编译语句执行比例过低分析"}], "description": "未有效使用预编译语句", "rule_name": "stmt_used_suboptimal", "id": "5789", "rule_expression": "[metric,2020212]>[num,$1]&&[metric,2020211]/[metric,2020212]<[num,$2]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "服务器内存分析", "knowledge_description": "服务器内存分析"}, {"knowledge_name": "MySQL内存分析", "knowledge_description": "MySQL内存分析"}, {"knowledge_name": "Swap占用较多的前30个线程", "knowledge_description": "Swap占用较多的前30个线程"}], "description": "物理内存空闲小于100M，且SWAP使用率大于90%，系统存在高风险", "rule_name": "swap_used_mysql_critical", "id": "8201", "rule_expression": "[metric,3000007]<[num,$1]*[num,1024] && [metric,3001031]>[num,$2]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL锁等待分析"}, {"knowledge_description": "MySQL Top SQL-按锁时间排序"}, {"knowledge_name": "检查lock_wait_timeout数据库参数", "knowledge_description": "检查lock_wait_timeout数据库参数"}, {"knowledge_name": "检查innodb_lock_wait_timeout数据库参数", "knowledge_description": "检查innodb_lock_wait_timeout数据库参数"}], "description": "表锁过度竞争,每秒表锁等待数超过2次", "rule_name": "table_lock_contenion", "id": "5792", "rule_expression": "[metric,2020199]>[num,$1]&&[metric,2020404]<[num,$2]&&[metric,2020265]>[num,$3]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "mysql临时表缓存命中率分析", "knowledge_description": "mysql临时表缓存命中率分析"}, {"knowledge_description": "MySQL Top SQL-按创建临时表数排序"}, {"knowledge_name": "MySQL数据库临时表及临时表空间分析", "knowledge_description": "MySQL数据库临时表及临时表空间分析"}, {"knowledge_name": "检查sort_buffer_size数据库参数", "knowledge_description": "检查sort_buffer_size数据库参数"}], "description": "检测到磁盘临时表使用量过多", "rule_name": "tmp_disk_tables", "id": "5794", "rule_expression": "[metric,2020199]>[num,$1]&&[metric,2020405]<[num,$2]&&[metric,2020267]>[num,$3]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析服务器IO设备的IO情况", "knowledge_description": "分析服务器IO设备的IO情况"}, {"knowledge_name": "分析服务器IO设备的IO情况", "knowledge_description": "分析服务器IO设备的IO情况"}], "description": "脏页比例超过30%并且每秒日志量超过每秒写大小的1.5倍，IO延迟超过10ms，数据库IO可能存在问题", "rule_name": "slow_io_lead_to_more_dirty_buffer", "id": "15296", "rule_expression": "([metric ,2020137]>[num,$1]) && (([metric ,2020303]/[metric,2020247])>=[num,$2]) &&([metric,3000006] >=[num,$3])", "db_type": "MySQL", "warning_level": "3", "warning_message": "脏页比例超过30%并且每秒日志量超过每秒写大小的1.5倍，IO延迟超过10ms，数据库IO可能存在问题"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL慢查询日志分析"}], "description": "每秒慢查询数大于1且每秒慢查询超过每秒查询数量的20%，说明数据库性能存在较多的慢查询，数据库性能低下", "rule_name": "slow_query_too_more", "id": "15297", "rule_expression": "[metric,2020287]>=[num,$1] && ([metric,2020287]/[metric,2020207]>[num,$2] )", "db_type": "MySQL", "warning_level": "3", "warning_message": "每秒慢查询数大于1且每秒慢查询超过每秒查询数量的20%，说明数据库性能存在较多的慢查询，数据库性能低下"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "每秒异常断开客户端连接次数过多，超过5次", "rule_name": "mysql_aborted_clients", "id": "15151", "rule_expression": "[metric in time,5,2020454][oper,>][num,$1] ", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "数据库点测超时或失败", "rule_name": "mysql_beacon", "id": "15259", "rule_expression": "[metric in time,30,1000106]>[num,60]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL Latch等待检查"}], "description": "latch获取存在较长时间的等待", "rule_name": "mysql_latch", "id": "15231", "rule_expression": "[metric in time,30,2020172]>[num,0]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "操作系统核心资源分析", "knowledge_description": "操作系统核心资源分析"}, {"knowledge_name": "MySQL数据库负载指标分析", "knowledge_description": "MySQL数据库负载指标分析"}, {"knowledge_name": "分析服务器IO设备的IO情况", "knowledge_description": "分析服务器IO设备的IO情况"}, {"knowledge_name": "服务器内存分析", "knowledge_description": "服务器内存分析"}, {"knowledge_name": "MySQL数据库实例检查", "knowledge_description": "MySQL数据库实例检查"}, {"knowledge_description": "分析MySQL mutex锁"}, {"knowledge_description": "MySQL锁等待分析"}, {"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-MYSQL IO分析"}], "description": "数据库采集任务严重超时，数据库存在严重性能风险", "rule_name": "collector_exec_slow_mysql", "id": "16371", "rule_expression": "[metric,1000101] >([metric hour avg,1000101]*[num,$1])", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "对MySQL的连接分布情况进行分析"}, {"knowledge_name": "检查max_connections数据库参数", "knowledge_description": "检查max_connections数据库参数"}, {"knowledge_name": "检查wait_timeout数据库参数", "knowledge_description": "检查wait_timeout数据库参数"}, {"knowledge_description": "对MySQL的运行状态进行分析"}], "description": "连接数接近或达到最大连接限制", "rule_name": "connection_exceed", "id": "16372", "rule_expression": "[metric,2020199]>[num,$1] && [metric,2020416]>[num,$2]", "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "操作系统核心资源分析", "knowledge_description": "操作系统核心资源分析"}, {"knowledge_name": "MySQL数据库负载指标分析", "knowledge_description": "MySQL数据库负载指标分析"}, {"knowledge_name": "服务器内存分析", "knowledge_description": "服务器内存分析"}, {"knowledge_name": "分析服务器IO设备的IO情况", "knowledge_description": "分析服务器IO设备的IO情况"}, {"knowledge_name": "MySQL数据库实例检查", "knowledge_description": "MySQL数据库实例检查"}], "description": "数据库连接严重超时，数据库存在巨大风险", "rule_name": "connect_slow_mysql", "id": "16373", "rule_expression": "[metric,1000000][oper,eq][str,连接成功] && [metric,1000102] >([metric hour avg,1000102]*[num,$1])&& ([metric,1000102] >[num,$2])", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "对MySQL的运行状态进行分析"}, {"knowledge_name": "MySQL数据库重启检查", "knowledge_description": "MySQL数据库重启检查"}], "description": "数据库可能发生了重启", "rule_name": "db_restart", "id": "16374", "rule_expression": "[metric,2020199]<[num,$1] && [metric,2020453][oper,contains][str,20]", "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL Top SQL-按错误/警告数排序"}], "description": "5分钟内出现多次错误或告警的SQL语句，可能是应用发出", "rule_name": "error_sql", "id": "16375", "rule_expression": "[metric,2020424]>[num,$1]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "对MySQL的运行状态进行分析"}, {"knowledge_name": "检查lock_wait_timeout数据库参数", "knowledge_description": "检查lock_wait_timeout数据库参数"}, {"knowledge_name": "检查innodb_lock_wait_timeout数据库参数", "knowledge_description": "检查innodb_lock_wait_timeout数据库参数"}], "description": "元数据锁(flush table/lock table/ddl)等待时间超过10秒，可能会导致连锁反应", "rule_name": "flush_table", "id": "16376", "rule_expression": "[metric,2020421]>[num,$1]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "显示当前数据库容量使用情况，以MB为单位", "knowledge_description": "显示当前数据库容量使用情况，以MB为单位"}, {"knowledge_name": "显示当前数据库系统前20个最大的数据库表相关容量信息", "knowledge_description": "显示当前数据库系统前20个最大的数据库表相关容量信息"}], "description": "Innodb共享表空间存在无法扩展风险", "rule_name": "ib_data_space", "id": "16378", "rule_expression": "[metric,2020400,IBDATA]>[num,$1] && [metric,2020431]>[num,$2]", "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL Top SQL-按创建临时表数排序"}, {"knowledge_description": "MySQL Top SQL-按排序行数排序"}, {"knowledge_description": "对MySQL的运行状态进行分析"}, {"knowledge_name": "mysql临时表缓存命中率分析", "knowledge_description": "mysql临时表缓存命中率分析"}, {"knowledge_name": "MySQL数据库临时表及临时表空间分析", "knowledge_description": "MySQL数据库临时表及临时表空间分析"}], "description": "Innodb临时表空间存在无法扩展风险", "rule_name": "ib_tmp_space", "id": "16379", "rule_expression": "[metric,2020400,IBTMP]>[num,$1] && [metric,2020433]>[num,$2]", "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "MGR集群存在事务冲突", "rule_name": "mgr_confict_tranactions", "id": "15068", "rule_expression": "[metric in time,30,2020446]>[num,0] ", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "MGR集群中有成员处于离线状态", "rule_name": "mgr_offline_members", "id": "15060", "rule_expression": "[metric in time,30,2020446]>[num,0] ", "db_type": "MySQL", "warning_level": "4", "warning_message": "MGR集群中离线节点数为：{[metric in time,30,2020446]>[num,0] }，请立即检查"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL MGR分析"}, {"knowledge_description": "对MySQL的运行状态进行分析"}], "description": "MGR集群处于不可用状态", "rule_name": "mgr_unavailable", "id": "8890", "rule_expression": "[metric in time,30,2020446]>[num,0] && [metric in time,30,2020446]>[metric in time,30,2020447]", "db_type": "MySQL", "warning_level": "4", "warning_message": "MGR集群中离线成员数为：{[metric in time,30,2020446]} 大于 在线成员数：{[metric in time,30,2020447]}，集群处于不可用状态，请及时处理。"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "对MySQL的运行状态进行分析"}, {"knowledge_name": "操作系统核心资源分析", "knowledge_description": "操作系统核心资源分析"}, {"knowledge_name": "分析CPU使用情况", "knowledge_description": "分析CPU使用情况"}, {"knowledge_description": "分析指标、SQL相似度"}], "description": "操作系统r队列超过CPU数量的2倍且CPU使用率超过90%，则可能存在CPU资源瓶颈", "rule_name": "more_running_proc_mysql", "id": "8891", "rule_expression": "[metric,3000009]/[metric,3000010]>[num,$1] && [metric,3000003]>[num,$2]", "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "分析MySQL Binlog缓存命中率"}], "description": "binlog缓存内存命中率较低，对记录binlog的性能有影响", "rule_name": "mysql_binlog_cache", "id": "8893", "rule_expression": "[metric,2020092] >[num,0] && ([metric,2020092]-[metric,2020091])*[num,100]/[metric,2020092] < [num,$1]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "MySQL数据库InnoDB存储引擎参数检查", "knowledge_description": "MySQL数据库InnoDB存储引擎参数检查"}], "description": "BUFFER POOL的大小小于1G,但缓冲池实例个数大于1", "rule_name": "mysql_bufferpool_less_than1G", "id": "8896", "rule_expression": "[cib,2210002,innodb_buffer_pool_size]/[num,1024]/[num,1024]/[num,1024]<[num,$1]&&[cib,2210002,innodb_buffer_pool_instances]>[num,$2]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "网络诊断工具包", "knowledge_description": "网络诊断工具包"}, {"knowledge_description": "TCP/IP协议分析"}], "description": "高可用数据库服务器间通信延迟较大", "rule_name": "mysql_comm_delay", "id": "15243", "rule_expression": "[metric,1001021,max]>[num,$1]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "已启用查询缓存，建议关闭", "rule_name": "mysql_enable_query_cache", "id": "15084", "rule_expression": "[cib,2210002,query_cache_type] [oper,eq][str,OFF]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析服务器IO设备的IO情况", "knowledge_description": "分析服务器IO设备的IO情况"}, {"knowledge_description": "MySQL Top SQL汇总"}, {"knowledge_name": "根据事件类型查数据库IO延时情况", "knowledge_description": "根据事件类型查数据库IO延时情况"}], "description": "每秒数据文件读增长异常，是近1小时平均值的5倍", "rule_name": "mysql_file_read", "id": "8897", "rule_expression": "[metric,2020243]/[metric hour avg,2020243]>[num,$1]&&[metric,2020243]>[bsl upper,2020243]*[num,$2][@Denominator0,0]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "innodb_log_file相关参数检查"}], "description": "REDO LOG大小的参数设置太合理，会切换日志文件切换次数过高，造成磁盘IO压力过大", "rule_name": "mysql_innodb_log_size_pct", "id": "8898", "rule_expression": "([cib,2210002,innodb_log_file_size]*[cib,2210002,innodb_log_files_in_group] * [num,100] / [cib,2210002,innodb_buffer_pool_size] <[num,$1] || [cib,2210002,innodb_log_file_size]*[cib,2210002,innodb_log_files_in_group] * [num,100] / [cib,2210002,innodb_buffer_pool_size] >[num,$2]) && [metric in time,30,2020303] * [num,3600] / [cib,2210002,innodb_log_file_size] > [num,5]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "MySQL数据库临时表及临时表空间分析", "knowledge_description": "MySQL数据库临时表及临时表空间分析"}, {"knowledge_description": "MySQL Top SQL-按创建临时表数排序"}], "description": "最大临时表大小超过5GB", "rule_name": "tmp_table_size", "id": "8921", "rule_expression": "[metric,2020428]>[num,$1]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "显示指定时间间隔内的日志信息"}], "description": "日志文件增长过快", "rule_name": "mysql_logs", "id": "15251", "rule_expression": "[metric,2020437]/[metric hour avg,2020444]>[num,5] && [metric,2020437]>[bsl upper,2020444]*[num,1.2][@Denominator0,0]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL锁等待分析"}, {"knowledge_description": "MySQL锁等待分析"}], "description": "MySQL MDL锁时间过长，请及时处理", "rule_name": "mysql_mdl_lock_warn", "id": "13418", "rule_expression": "[metric,2020153]>[num,$1]", "db_type": "MySQL", "warning_level": "4", "warning_message": "当前MDL锁时间为：{[metric,2020153]} 秒，MDL锁数量为：{[metric,2020152]} "}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "显示MySQL Server分配的内存大小", "knowledge_description": "显示MySQL Server分配的内存大小"}], "description": "MySQL进程占用内存持续增长，存在内存泄露可能", "rule_name": "mysql_memory", "id": "15255", "rule_expression": "[metric in time,10,2020455]>[num,1048576] && [metric in time,10,2020456]>[num,10]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "每秒删除操作数过多，是最近1小时平均数的5倍", "rule_name": "mysql_more_delete", "id": "15187", "rule_expression": "[metric,2020159]/[metric hour avg,2020159]>[num,5] && [metric,2020159]>[bsl upper,2020159]*[num,1.2][@Denominator0,0]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "每秒产生日志过多，是近1小时平均值的5倍", "rule_name": "mysql_more_log", "id": "15175", "rule_expression": "[metric,2020303]/[metric hour avg,2020303]>[num,5] && [metric,2020303]>[bsl upper,2020303]*[num,1.2][@Denominator0,0]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "每秒查询数过多，是最近1小时平均数的5倍", "rule_name": "mysql_more_select", "id": "15179", "rule_expression": "[metric,2020207]/[metric hour avg,2020207]>[num,5] && [metric,2020207]>[bsl upper,2020207]*[num,1.2][@Denominator0,0]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "每秒更新操作过多，是最近1小时平均数的5倍", "rule_name": "mysql_more_update", "id": "15183", "rule_expression": "[metric,2020160]/[metric hour avg,2020160]>[num,5] && [metric,2020160]>[bsl upper,2020160]*[num,1.2][@Denominator0,0]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL锁等待分析"}, {"knowledge_description": "对MySQL的运行状态进行分析"}], "description": "非事务锁等待（包括等待刷新完成）并发数超过阀值", "rule_name": "mysql_rwlock_wait", "id": "8904", "rule_expression": null, "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "最外层的驱动表全表扫描次数过高", "rule_name": "mysql_select_scan", "id": "15139", "rule_expression": "[metric in time,5,2020229][oper,>][num,$1]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "发现有状态为\"Waiting in connection_control plugin\"的等待连接", "rule_name": "mysql_waiting_ connection_control", "id": "15096", "rule_expression": "[metric in time,5,2020450][oper,<][num,$1]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "检查query_cache_size数据库参数", "knowledge_description": "检查query_cache_size数据库参数"}], "description": "查询缓存可能不足", "rule_name": "qcache_low", "id": "8910", "rule_expression": "[cib,2210002,query_cache_size]>[num,0] && [cib,2210002,query_cache_type][oper,neq][str,OFF] && [metric,2020284]>[num,$1]", "db_type": "MySQL", "warning_level": "1"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL命中率分析"}, {"knowledge_name": "检查query_cache_size数据库参数", "knowledge_description": "检查query_cache_size数据库参数"}], "description": "查询缓存命中率不理想", "rule_name": "qcache_suboptimal", "id": "8911", "rule_expression": "[metric,2020199]>[num,$1] && [cib,2210002,query_cache_size]>[num,0] && [cib,2210002,query_cache_type][oper,neq][str,OFF] && [metric,2020425]>[num,$2] && [metric,2020411]<[num,$3]", "db_type": "MySQL", "warning_level": "1"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL事务分析"}], "description": "事务回滚比例较大，应用可能出现异常", "rule_name": "rollback_ratio_high", "id": "8913", "rule_expression": "[metric,2020213]>[num,$1]&&[metric,2020214]<[num,$2]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL并发SQL语句分析"}, {"knowledge_description": "SQL及等待链分析\t活跃会话过高时分析正在执行的的SQL语句及可能存在的等待链"}], "description": "相同SQL的并发数过多，超过5次", "rule_name": "mysql_similar_sqls", "id": "15235", "rule_expression": "[metric in time,30,2020170]>[num,4]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "检查数据库参数", "knowledge_description": "检查数据库参数"}, {"knowledge_name": "检查数据库参数", "knowledge_description": "检查数据库参数"}], "description": "从库日志中频繁出现命中slave_pending_jobs_size_max的告警，slave_pending_jobs_size_max参数设置过小，可能会导致主从延迟", "rule_name": "slave_db_slave_pending_jobs_size_max_too_small", "id": "15163", "rule_expression": "[metric,2020506]>[num,$1] && [cib,2210002,slave_pending_jobs_size_max]<=[num,$1]", "db_type": "MySQL", "warning_level": "2", "warning_message": "从库日志中频繁出现命中slave_pending_jobs_size_max的告警，slave_pending_jobs_size_max参数设置过小，可能会导致主从延迟"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析服务器IO设备的IO情况", "knowledge_description": "分析服务器IO设备的IO情况"}, {"knowledge_name": "分析服务器IO设备的IO情况", "knowledge_description": "分析服务器IO设备的IO情况"}], "description": "脏页比例超过30%并且每秒日志量超过每秒写大小的1.5倍，IO延迟超过10ms，数据库IO可能存在问题", "rule_name": "slow_io_lead_to_more_dirty_buffer", "id": "15092", "rule_expression": "([metric ,2020137]>[num,$1]) && (([metric ,2020303]/[metric,2020247])>=[num,$2]) &&([metric,3000006] >=[num,$3])", "db_type": "MySQL", "warning_level": "3", "warning_message": "脏页比例超过30%并且每秒日志量超过每秒写大小的1.5倍，IO延迟超过10ms，数据库IO可能存在问题"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL慢查询日志分析"}], "description": "每秒慢查询数大于1且每秒慢查询超过每秒查询数量的20%，说明数据库性能存在较多的慢查询，数据库性能低下", "rule_name": "slow_query_too_more", "id": "15076", "rule_expression": "[metric,2020287]>=[num,$1] && ([metric,2020287]/[metric,2020207]>[num,$2] )", "db_type": "MySQL", "warning_level": "3", "warning_message": "每秒慢查询数大于1且每秒慢查询超过每秒查询数量的20%，说明数据库性能存在较多的慢查询，数据库性能低下"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "预编译语句执行比例过低分析", "knowledge_description": "预编译语句执行比例过低分析"}], "description": "未有效使用预编译语句", "rule_name": "stmt_used_suboptimal", "id": "8915", "rule_expression": "[metric,2020212]>[num,$1]&&[metric,2020211]/[metric,2020212]<[num,$2]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "服务器内存分析", "knowledge_description": "服务器内存分析"}, {"knowledge_name": "MySQL内存分析", "knowledge_description": "MySQL内存分析"}, {"knowledge_name": "Swap占用较多的前30个线程", "knowledge_description": "Swap占用较多的前30个线程"}], "description": "物理内存空闲小于100M，且SWAP使用率大于90%，系统存在高风险", "rule_name": "swap_used_mysql_critical", "id": "8916", "rule_expression": "[metric,3000007]<[num,$1]*[num,1024] && [metric,3001031]>[num,$2]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "mysql表缓存命中率分析", "knowledge_description": "mysql表缓存命中率分析"}, {"knowledge_name": "检查table_open_cache_instances数据库参数", "knowledge_description": "检查table_open_cache_instances数据库参数"}], "description": "表缓存不是最佳的", "rule_name": "table_cache_suboptimal", "id": "8917", "rule_expression": "[metric,2020076]>[cib,2210002,table_open_cache]*[num,0.95] && [metric,2020273]>[num,$1]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL锁等待分析"}, {"knowledge_description": "MySQL Top SQL-按锁时间排序"}, {"knowledge_name": "检查lock_wait_timeout数据库参数", "knowledge_description": "检查lock_wait_timeout数据库参数"}, {"knowledge_name": "检查innodb_lock_wait_timeout数据库参数", "knowledge_description": "检查innodb_lock_wait_timeout数据库参数"}], "description": "表锁过度竞争,每秒表锁等待数超过2次", "rule_name": "table_lock_contenion", "id": "8918", "rule_expression": "[metric,2020199]>[num,$1]&&[metric,2020404]<[num,$2]&&[metric,2020265]>[num,$3]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL Thread Cache命中率分析"}, {"knowledge_name": "检查innodb_thread_concurrency数据库参数", "knowledge_description": "检查innodb_thread_concurrency数据库参数"}], "description": "线程缓存大小可能不是最佳的", "rule_name": "thread_cache_suboptimal", "id": "8919", "rule_expression": "[metric,2020199]>[num,$1] && [metric,2020412]<[num,$2] && [cib,2210002,thread_cache_size]>[num,0]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "mysql临时表缓存命中率分析", "knowledge_description": "mysql临时表缓存命中率分析"}, {"knowledge_description": "MySQL Top SQL-按创建临时表数排序"}, {"knowledge_name": "MySQL数据库临时表及临时表空间分析", "knowledge_description": "MySQL数据库临时表及临时表空间分析"}, {"knowledge_name": "检查sort_buffer_size数据库参数", "knowledge_description": "检查sort_buffer_size数据库参数"}], "description": "检测到磁盘临时表使用量过多", "rule_name": "tmp_disk_tables", "id": "8920", "rule_expression": "[metric,2020199]>[num,$1]&&[metric,2020405]<[num,$2]&&[metric,2020267]>[num,$3]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "每秒查询数过多，是最近1小时平均数的5倍", "rule_name": "mysql_more_select", "id": "16422", "rule_expression": "[metric,2020207]/[metric hour avg,2020207]>[num,5] && [metric,2020207]>[bsl upper,2020207]*[num,1.2][@Denominator0,0]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "每秒更新操作过多，是最近1小时平均数的5倍", "rule_name": "mysql_more_update", "id": "16423", "rule_expression": "[metric,2020160]/[metric hour avg,2020160]>[num,5] && [metric,2020160]>[bsl upper,2020160]*[num,1.2][@Denominator0,0]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "分析MySQL索引访问比例"}, {"knowledge_description": "MySQL Top SQL-按检查行数排序"}, {"knowledge_name": "获取指定数据库表的索引相关统计信息", "knowledge_description": "获取指定数据库表的索引相关统计信息"}, {"knowledge_name": "显示数据库中索引选择率较低的数据库对象信息", "knowledge_description": "显示数据库中索引选择率较低的数据库对象信息"}, {"knowledge_name": "显示数据库中未使用的索引信息", "knowledge_description": "显示数据库中未使用的索引信息"}], "description": "索引没有被有效利用", "rule_name": "index_used_suboptimal", "id": "16380", "rule_expression": "[metric,2020199]>[num,$1]&&[metric,2020223]>[num,$2]&&[metric,2020406]<[num,$3]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析服务器IO设备的IO情况", "knowledge_description": "分析服务器IO设备的IO情况"}, {"knowledge_name": "MySQL数据库IO维度诊断", "knowledge_description": "MySQL数据库IO维度诊断"}, {"knowledge_description": "MySQL物理读高分析"}, {"knowledge_description": "分析物理写高"}], "description": "操作系统IO延时严重超标（超过100毫秒），数据库存在风险", "rule_name": "IO_latency_mysql_critical", "id": "16382", "rule_expression": "[metric,3000006]>[num,$1] && ([metric,3000100]>[num,$2] || [metric,3000101]>[num,$3])", "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "服务器内存分析", "knowledge_description": "服务器内存分析"}, {"knowledge_name": "MySQL内存分析", "knowledge_description": "MySQL内存分析"}, {"knowledge_name": "Swap占用较多的前30个线程", "knowledge_description": "Swap占用较多的前30个线程"}], "description": "内存不可用率过高，超过90%，可能存在换页和OOM Kill的风险\t", "rule_name": "memory_used_high_mysql", "id": "16387", "rule_expression": "[metric,3000014]>[num,$1]  && [metric,3001031]>[num,$2]", "db_type": "MySQL", "warning_level": "4", "warning_message": "指标< Mem unavailable >(内存不可用率)过高，操作系统内存出现严重不足，可能存在换页和OOM Kill的风险。内存不可用率：（{[metric,3000014]}%）且swap usage达到{[metric,3001031]}%。"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析MySQL MyISAM key buffer命中率", "knowledge_description": "分析MySQL MyISAM key buffer命中率"}], "description": "Key缓冲区大小可能不是最佳的", "rule_name": "key_buffer_suboptimal", "id": "16383", "rule_expression": "[metric,2020199]>[num,$1] && [metric,2020283]>[num,$2] && [metric,2020410]<[num,$3]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "对MySQL的运行状态进行分析"}, {"knowledge_description": "MySQL Top SQL-按锁时间排序"}], "description": "被锁定的查询数过多，超过5个", "rule_name": "locked_query", "id": "16384", "rule_expression": "[metric,2020422]>[num,$1]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "数据库点测超时或失败", "rule_name": "mysql_beacon", "id": "16274", "rule_expression": "[metric in time,30,1000106]>[num,60]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "网络诊断工具包", "knowledge_description": "网络诊断工具包"}, {"knowledge_description": "TCP/IP协议分析"}], "description": "高可用数据库服务器间通信延迟较大", "rule_name": "mysql_comm_delay", "id": "16405", "rule_expression": "[metric,1001021,max]>[num,$1]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析MySQL InnoDB 写入日志等待", "knowledge_description": "分析MySQL InnoDB 写入日志等待"}, {"knowledge_name": "检查数据库innodb_log_buffer_size参数是否设置合理", "knowledge_description": "检查数据库innodb_log_buffer_size参数是否设置合理"}, {"knowledge_name": "检查sync_binlog数据库参数", "knowledge_description": "检查sync_binlog数据库参数"}, {"knowledge_name": "检查innodb_flush_log_at_trx_commit数据库参数是否设置合理", "knowledge_description": "检查innodb_flush_log_at_trx_commit数据库参数是否设置合理"}, {"knowledge_name": "检查log_bin数据库参数", "knowledge_description": "检查log_bin数据库参数"}], "description": "Innodb日志等待可能是性能瓶颈", "rule_name": "log_nowait_low", "id": "16385", "rule_expression": "[metric,2020427]<[num,$1]&&[metric,2020254]>[num,$2]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "对MySQL的运行状态进行分析"}, {"knowledge_description": "MySQL Top SQL-按执行时间排序"}, {"knowledge_name": "检查slow_query_log数据库参数", "knowledge_description": "检查slow_query_log数据库参数"}, {"knowledge_name": "检查long_query_time数据库参数", "knowledge_description": "检查long_query_time数据库参数"}], "description": "长时间运行的查询数过多", "rule_name": "long_running", "id": "16386", "rule_expression": "[metric,2020423]>[num,$1]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "MGR集群中节点状态异常", "rule_name": "mg_member_state_error", "id": "16388", "rule_expression": "[metric in time,30,2020446]>[num,0] ", "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "MGR集群发生FC(流量控制)，集群处于暂停状态", "rule_name": "mgr_flow_control_paused", "id": "16390", "rule_expression": "[metric in time,5,2020154]>[num,0] ", "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "查看文件系统目录实时使用率", "knowledge_description": "查看文件系统目录实时使用率"}, {"knowledge_name": "检查log_bin数据库参数", "knowledge_description": "检查log_bin数据库参数"}], "description": "有30天以前生成的binlog未被清理，可能会导致磁盘空间不足", "rule_name": "mysql_no_del_binlog", "id": "16424", "rule_expression": "[metric,2020434] >  [num,$1] && [metric,2020114] >  [num,$2] ", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "MGR集群中有成员处于离线状态", "rule_name": "mgr_offline_members", "id": "16391", "rule_expression": "[metric in time,30,2020446]>[num,0] ", "db_type": "MySQL", "warning_level": "4", "warning_message": "MGR集群中离线节点数为：{[metric in time,30,2020446]>[num,0] }，请立即检查"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL锁等待分析"}, {"knowledge_description": "对MySQL的运行状态进行分析"}], "description": "非事务锁等待（包括等待刷新完成）并发数超过阀值", "rule_name": "mysql_rwlock_wait", "id": "16303", "rule_expression": null, "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL MGR分析"}, {"knowledge_description": "对MySQL的运行状态进行分析"}], "description": "MGR集群处于不可用状态", "rule_name": "mgr_unavailable", "id": "16392", "rule_expression": "[metric in time,30,2020446]>[num,0] && [metric in time,30,2020446]>[metric in time,30,2020447]", "db_type": "MySQL", "warning_level": "4", "warning_message": "MGR集群中离线成员数为：{[metric in time,30,2020446]} 大于 在线成员数：{[metric in time,30,2020447]}，集群处于不可用状态，请及时处理。"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "检查MySQL数据库参数", "knowledge_description": "检查MySQL数据库参数"}, {"knowledge_name": "分析服务器IO设备的IO情况", "knowledge_description": "分析服务器IO设备的IO情况"}], "description": "日志文件中存在大量page_cleaner警告，innodb_lru_scan_depth参数设置过大，建议调小该参数或提升IO能力", "rule_name": "more_page_cleaner_warn_in_logfile", "id": "16393", "rule_expression": "[cib,2210002,innodb_lru_scan_depth]>=[num,$1] && [metric,3000006]>[num,$2] && [metric,2020505]>[num,$3]", "db_type": "MySQL", "warning_level": "2", "warning_message": "日志文件中存在大量page_cleaner警告，innodb_lru_scan_depth参数设置过大，建议调小该参数或提升IO能力"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "对MySQL的运行状态进行分析"}, {"knowledge_name": "操作系统核心资源分析", "knowledge_description": "操作系统核心资源分析"}, {"knowledge_name": "分析CPU使用情况", "knowledge_description": "分析CPU使用情况"}, {"knowledge_description": "分析指标、SQL相似度"}], "description": "操作系统r队列超过CPU数量的2倍且CPU使用率超过90%，则可能存在CPU资源瓶颈", "rule_name": "more_running_proc_mysql", "id": "16394", "rule_expression": "[metric,3000009]/[metric,3000010]>[num,$1] && [metric,3000003]>[num,$2]", "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "活跃会话数突增，是近1小时平均值的2倍", "rule_name": "myql_more_active_session", "id": "16395", "rule_expression": "[metric,2020069]/[metric hour avg,2020069]>[num,5] && [metric,2020069]>[bsl upper,2020069]*[num,1.2][@Denominator0,0]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "每秒异常断开客户端连接次数过多，超过5次", "rule_name": "mysql_aborted_clients", "id": "16396", "rule_expression": "[metric in time,5,2020454][oper,>][num,$1] ", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "对MySQL的连接分布情况进行分析"}], "description": "每秒连接服务端失败次数过高，超过1次", "rule_name": "mysql_aborted_connects", "id": "16397", "rule_expression": "[metric in time,5,2020206][oper,>][num,$1] ", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "对MySQL的连接分布情况进行分析"}], "description": "客户端登录验证失败次数过多，可能应用配置的凭证信息未及时更新", "rule_name": "mysql_authentication_errors", "id": "16399", "rule_expression": "[metric in time,30,2020507]>[num,0]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "数据库点测超时或失败", "rule_name": "mysql_beacon", "id": "16400", "rule_expression": "[metric in time,30,1000106]>[num,60]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "分析MySQL Binlog缓存命中率"}], "description": "binlog缓存内存命中率较低，对记录binlog的性能有影响", "rule_name": "mysql_binlog_cache", "id": "16401", "rule_expression": "[metric,2020092] >[num,0] && ([metric,2020092]-[metric,2020091])*[num,100]/[metric,2020092] < [num,$1]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL Top SQL汇总"}, {"knowledge_description": "对MySQL的运行状态进行分析"}], "description": "每秒逻辑读增长异常，是近1小时平均值的5倍", "rule_name": "mysql_bp_read", "id": "16402", "rule_expression": "[metric,2020237]/[metric hour avg,2020237]>[num,$1]&&[metric,2020237]>[bsl upper,2020237]*[num,$2][@Denominator0,0]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "MySQL数据库InnoDB存储引擎参数检查", "knowledge_description": "MySQL数据库InnoDB存储引擎参数检查"}], "description": "BUFFER POOL的大小小于1G,但缓冲池实例个数大于1", "rule_name": "mysql_bufferpool_less_than1G", "id": "16404", "rule_expression": "[cib,2210002,innodb_buffer_pool_size]/[num,1024]/[num,1024]/[num,1024]<[num,$1]&&[cib,2210002,innodb_buffer_pool_instances]>[num,$2]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "显示指定时间间隔内的日志信息"}], "description": "日志文件增长过快", "rule_name": "mysql_logs", "id": "16415", "rule_expression": "[metric,2020437]/[metric hour avg,2020444]>[num,5] && [metric,2020437]>[bsl upper,2020444]*[num,1.2][@Denominator0,0]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL事务分析"}, {"knowledge_description": "MySQL锁等待分析"}, {"knowledge_description": "对MySQL的运行状态进行分析"}], "description": "事务持续时间超过阀值", "rule_name": "mysql_long_trx", "id": "16416", "rule_expression": null, "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL锁等待分析"}, {"knowledge_description": "MySQL锁等待分析"}], "description": "MySQL MDL锁时间过长，请及时处理", "rule_name": "mysql_mdl_lock_warn", "id": "16417", "rule_expression": "[metric,2020153]>[num,$1]", "db_type": "MySQL", "warning_level": "4", "warning_message": "当前MDL锁时间为：{[metric,2020153]} 秒，MDL锁数量为：{[metric,2020152]} "}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "显示MySQL Server分配的内存大小", "knowledge_description": "显示MySQL Server分配的内存大小"}], "description": "MySQL进程占用内存持续增长，存在内存泄露可能", "rule_name": "mysql_memory", "id": "16418", "rule_expression": "[metric in time,10,2020455]>[num,1048576] && [metric in time,10,2020456]>[num,10]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "每秒删除操作数过多，是最近1小时平均数的5倍", "rule_name": "mysql_more_delete", "id": "16419", "rule_expression": "[metric,2020159]/[metric hour avg,2020159]>[num,5] && [metric,2020159]>[bsl upper,2020159]*[num,1.2][@Denominator0,0]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "每秒插入操作数过多，是最近1小时平均数的5倍", "rule_name": "mysql_more_insert", "id": "16420", "rule_expression": "[metric,2020161]/[metric hour avg,2020161]>[num,5] && [metric,2020161]>[bsl upper,2020161]*[num,1.2][@Denominator0,0]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "每秒产生日志过多，是近1小时平均值的5倍", "rule_name": "mysql_more_log", "id": "16421", "rule_expression": "[metric,2020303]/[metric hour avg,2020303]>[num,5] && [metric,2020303]>[bsl upper,2020303]*[num,1.2][@Denominator0,0]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL并发SQL语句分析"}, {"knowledge_description": "SQL及等待链分析\t活跃会话过高时分析正在执行的的SQL语句及可能存在的等待链"}], "description": "相同SQL的并发数过多，超过5次", "rule_name": "mysql_similar_sqls", "id": "15236", "rule_expression": "[metric in time,30,2020170]>[num,4]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL文件IO汇总"}, {"knowledge_description": "MySQL Top SQL-按返回行数排序"}, {"knowledge_description": "MySQL Top SQL-按排序行数排序"}, {"knowledge_description": "MySQL Top SQL-按执行时间排序"}, {"knowledge_name": "显示数据库中未使用的索引信息", "knowledge_description": "显示数据库中未使用的索引信息"}], "description": "每秒物理读增长异常，是近1小时平均值的5倍", "rule_name": "mysql_physical_read", "id": "16426", "rule_expression": "[metric,2020238]/[metric hour avg,2020238]>[num,$1] && [metric,2020238]>[bsl upper,2020238]*[num,$2][@Denominator0,0]", "db_type": "MySQL", "warning_level": "3", "warning_message": "每秒物理读{[metric,2020238]}超出小时平均值{$1}倍，并且超过基线{$2}倍"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL锁等待分析"}, {"knowledge_description": "对MySQL的运行状态进行分析"}], "description": "非事务锁等待（包括等待刷新完成）并发数超过阀值", "rule_name": "mysql_rwlock_wait", "id": "16427", "rule_expression": null, "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "被驱动表的全表扫描次数过高", "rule_name": "mysql_select_full_join", "id": "16428", "rule_expression": "[metric in time,5,2020230][oper,>][num,$1]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "最外层的驱动表全表扫描次数过高", "rule_name": "mysql_select_scan", "id": "16429", "rule_expression": "[metric in time,5,2020229][oper,>][num,$1]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "仅支持实时分析", "knowledge_description": "MySQL主从复制分析"}], "description": "MySQL从库的IO或SQL线程状态不是Yes", "rule_name": "mysql_slave_io_sql_running", "id": "16431", "rule_expression": "[metric max in time,30,2020450]<[num,3]", "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "仅支持实时分析", "knowledge_description": "MySQL主从复制分析"}, {"knowledge_name": "MySQL操作系统维度诊断", "knowledge_description": "MySQL操作系统维度诊断"}], "description": "MySQL主从复制延迟达到3600秒以上", "rule_name": "mysql_slave_is_lagging", "id": "16432", "rule_expression": "[metric max,2020451]>[num,$1]", "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL锁等待分析"}, {"knowledge_description": "对MySQL的运行状态进行分析"}], "description": "Innodb事务锁等待并发数超过阀值", "rule_name": "mysql_txlock_wait", "id": "16433", "rule_expression": null, "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "发现有状态为\"Waiting in connection_control plugin\"的等待连接", "rule_name": "mysql_waiting_ connection_control", "id": "16434", "rule_expression": "[metric in time,5,2020450][oper,<][num,$1]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "获取oom_score较高的TOP进程", "knowledge_description": "获取oom_score较高的TOP进程"}, {"knowledge_name": "服务器内存分析", "knowledge_description": "服务器内存分析"}], "description": "SWAP使用率高于70%且MYSQL的OOM SCORE超过50，数据库存在风险", "rule_name": "oom_killer_risk", "id": "16435", "rule_expression": "[metric,3001031]>[num,$1] && [metric,2020198]>[num,$2]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "检查query_cache_size数据库参数", "knowledge_description": "检查query_cache_size数据库参数"}], "description": "查询缓存可能不足", "rule_name": "qcache_low", "id": "16436", "rule_expression": "[cib,2210002,query_cache_size]>[num,0] && [cib,2210002,query_cache_type][oper,neq][str,OFF] && [metric,2020284]>[num,$1]", "db_type": "MySQL", "warning_level": "1"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL命中率分析"}, {"knowledge_name": "检查query_cache_size数据库参数", "knowledge_description": "检查query_cache_size数据库参数"}], "description": "查询缓存命中率不理想", "rule_name": "qcache_suboptimal", "id": "16437", "rule_expression": "[metric,2020199]>[num,$1] && [cib,2210002,query_cache_size]>[num,0] && [cib,2210002,query_cache_type][oper,neq][str,OFF] && [metric,2020425]>[num,$2] && [metric,2020411]<[num,$3]", "db_type": "MySQL", "warning_level": "1"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "每秒异常断开客户端连接次数过多，超过5次", "rule_name": "mysql_aborted_clients", "id": "15152", "rule_expression": "[metric in time,5,2020454][oper,>][num,$1] ", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "分析MySQL Binlog缓存命中率"}], "description": "binlog缓存内存命中率较低，对记录binlog的性能有影响", "rule_name": "mysql_binlog_cache", "id": "11106", "rule_expression": "[metric,2020092] >[num,0] && ([metric,2020092]-[metric,2020091])*[num,100]/[metric,2020092] < [num,$1]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL Top SQL汇总"}, {"knowledge_description": "对MySQL的运行状态进行分析"}], "description": "每秒逻辑读增长异常，是近1小时平均值的5倍", "rule_name": "mysql_bp_read", "id": "11107", "rule_expression": "[metric,2020237]/[metric hour avg,2020237]>[num,$1]&&[metric,2020237]>[bsl upper,2020237]*[num,$2][@Denominator0,0]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "MySQL数据库InnoDB存储引擎参数检查", "knowledge_description": "MySQL数据库InnoDB存储引擎参数检查"}], "description": "BUFFER POOL的实例个数设置有误，超过了最大值64", "rule_name": "mysql_bufferpool_instances", "id": "11108", "rule_expression": "[cib,2210002,innodb_buffer_pool_instances]>[num,$1]", "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "已启用查询缓存，建议关闭", "rule_name": "mysql_enable_query_cache", "id": "15085", "rule_expression": "[cib,2210002,query_cache_type] [oper,eq][str,OFF]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "显示指定时间间隔内的日志信息"}], "description": "日志文件增长过快", "rule_name": "mysql_logs", "id": "15252", "rule_expression": "[metric,2020437]/[metric hour avg,2020444]>[num,5] && [metric,2020437]>[bsl upper,2020444]*[num,1.2][@Denominator0,0]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "显示MySQL Server分配的内存大小", "knowledge_description": "显示MySQL Server分配的内存大小"}], "description": "MySQL进程占用内存持续增长，存在内存泄露可能", "rule_name": "mysql_memory", "id": "15256", "rule_expression": "[metric in time,10,2020455]>[num,1048576] && [metric in time,10,2020456]>[num,10]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "每秒查询数过多，是最近1小时平均数的5倍", "rule_name": "mysql_more_select", "id": "15180", "rule_expression": "[metric,2020207]/[metric hour avg,2020207]>[num,5] && [metric,2020207]>[bsl upper,2020207]*[num,1.2][@Denominator0,0]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "查看文件系统目录实时使用率", "knowledge_description": "查看文件系统目录实时使用率"}, {"knowledge_name": "检查log_bin数据库参数", "knowledge_description": "检查log_bin数据库参数"}], "description": "有30天以前生成的binlog未被清理，可能会导致磁盘空间不足", "rule_name": "mysql_no_del_binlog", "id": "11114", "rule_expression": "[metric,2020434] >  [num,$1] && [metric,2020114] >  [num,$2] ", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "查看文件系统目录实时使用率", "knowledge_description": "查看文件系统目录实时使用率"}, {"knowledge_name": "检查log_bin数据库参数", "knowledge_description": "检查log_bin数据库参数"}], "description": "有90天以前生成的binlog未被清理，极大可能会导致磁盘空间不足", "rule_name": "mysql_no_del_binlog_90", "id": "11115", "rule_expression": "[metric,2020434] >  [num,$1]  && [metric,2020114] >  [num,$2] ", "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "发现有状态为\"Waiting in connection_control plugin\"的等待连接", "rule_name": "mysql_waiting_ connection_control", "id": "15097", "rule_expression": "[metric in time,5,2020450][oper,<][num,$1]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "获取oom_score较高的TOP进程", "knowledge_description": "获取oom_score较高的TOP进程"}, {"knowledge_name": "服务器内存分析", "knowledge_description": "服务器内存分析"}], "description": "SWAP使用率高于70%且MYSQL的OOM SCORE超过50，数据库存在风险", "rule_name": "oom_killer_risk", "id": "11122", "rule_expression": "[metric,3001031]>[num,$1] && [metric,2020198]>[num,$2]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "检查query_cache_size数据库参数", "knowledge_description": "检查query_cache_size数据库参数"}], "description": "查询缓存可能不足", "rule_name": "qcache_low", "id": "11123", "rule_expression": "[cib,2210002,query_cache_size]>[num,0] && [cib,2210002,query_cache_type][oper,neq][str,OFF] && [metric,2020284]>[num,$1]", "db_type": "MySQL", "warning_level": "1"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL Innodb引擎状态分析"}, {"knowledge_description": "对MySQL的运行状态进行分析"}], "description": "Innodb引擎出现大量等待进入查询", "rule_name": "queries_in_queue", "id": "16438", "rule_expression": null, "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL事务分析"}], "description": "事务回滚比例较大，应用可能出现异常", "rule_name": "rollback_ratio_high", "id": "16439", "rule_expression": "[metric,2020213]>[num,$1]&&[metric,2020214]<[num,$2]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "检查数据库参数", "knowledge_description": "检查数据库参数"}, {"knowledge_name": "检查数据库参数", "knowledge_description": "检查数据库参数"}], "description": "从库日志中频繁出现命中slave_pending_jobs_size_max的告警，slave_pending_jobs_size_max参数设置过小，可能会导致主从延迟", "rule_name": "slave_db_slave_pending_jobs_size_max_too_small", "id": "16441", "rule_expression": "[metric,2020506]>[num,$1] && [cib,2210002,slave_pending_jobs_size_max]<=[num,$1]", "db_type": "MySQL", "warning_level": "2", "warning_message": "从库日志中频繁出现命中slave_pending_jobs_size_max的告警，slave_pending_jobs_size_max参数设置过小，可能会导致主从延迟"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析服务器IO设备的IO情况", "knowledge_description": "分析服务器IO设备的IO情况"}, {"knowledge_name": "分析服务器IO设备的IO情况", "knowledge_description": "分析服务器IO设备的IO情况"}], "description": "脏页比例超过30%并且每秒日志量超过每秒写大小的1.5倍，IO延迟超过10ms，数据库IO可能存在问题", "rule_name": "slow_io_lead_to_more_dirty_buffer", "id": "16442", "rule_expression": "([metric ,2020137]>[num,$1]) && (([metric ,2020303]/[metric,2020247])>=[num,$2]) &&([metric,3000006] >=[num,$3])", "db_type": "MySQL", "warning_level": "3", "warning_message": "脏页比例超过30%并且每秒日志量超过每秒写大小的1.5倍，IO延迟超过10ms，数据库IO可能存在问题"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL慢查询日志分析"}], "description": "每秒慢查询数大于1且每秒慢查询超过每秒查询数量的20%，说明数据库性能存在较多的慢查询，数据库性能低下", "rule_name": "slow_query_too_more", "id": "15077", "rule_expression": "[metric,2020287]>=[num,$1] && ([metric,2020287]/[metric,2020207]>[num,$2] )", "db_type": "MySQL", "warning_level": "3", "warning_message": "每秒慢查询数大于1且每秒慢查询超过每秒查询数量的20%，说明数据库性能存在较多的慢查询，数据库性能低下"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL慢查询日志分析"}], "description": "每秒慢查询数大于1且每秒慢查询超过每秒查询数量的20%，说明数据库性能存在较多的慢查询，数据库性能低下", "rule_name": "slow_query_too_more", "id": "16443", "rule_expression": "[metric,2020287]>=[num,$1] && ([metric,2020287]/[metric,2020207]>[num,$2] )", "db_type": "MySQL", "warning_level": "3", "warning_message": "每秒慢查询数大于1且每秒慢查询超过每秒查询数量的20%，说明数据库性能存在较多的慢查询，数据库性能低下"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL Top SQL-按排序行数排序"}, {"knowledge_description": "MySQL Top SQL-按创建临时表数排序"}, {"knowledge_description": "MySQL Top SQL-按排序行数排序"}, {"knowledge_description": "MySQL Top SQL-按创建临时表数排序"}], "description": "排序过多且排序内存设置较小导致文件排序过多", "rule_name": "sort_buffer_size_too_small", "id": "16444", "rule_expression": "[cib,2210002,sort_buffer_size]<[num,$1] && [metric,2020504]>[num,$2] && [metric,2020267]>[num,$3]", "db_type": "MySQL", "warning_level": "3", "warning_message": "排序过多且排序内存设置较小导致文件排序过多"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "预编译语句执行比例过低分析", "knowledge_description": "预编译语句执行比例过低分析"}], "description": "未有效使用预编译语句", "rule_name": "stmt_used_suboptimal", "id": "16445", "rule_expression": "[metric,2020212]>[num,$1]&&[metric,2020211]/[metric,2020212]<[num,$2]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "mysql表缓存命中率分析", "knowledge_description": "mysql表缓存命中率分析"}, {"knowledge_name": "检查table_open_cache_instances数据库参数", "knowledge_description": "检查table_open_cache_instances数据库参数"}], "description": "表缓存不是最佳的", "rule_name": "table_cache_suboptimal", "id": "16447", "rule_expression": "[metric,2020076]>[cib,2210002,table_open_cache]*[num,0.95] && [metric,2020273]>[num,$1]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL锁等待分析"}, {"knowledge_description": "MySQL Top SQL-按锁时间排序"}, {"knowledge_name": "检查lock_wait_timeout数据库参数", "knowledge_description": "检查lock_wait_timeout数据库参数"}, {"knowledge_name": "检查innodb_lock_wait_timeout数据库参数", "knowledge_description": "检查innodb_lock_wait_timeout数据库参数"}], "description": "表锁过度竞争,每秒表锁等待数超过2次", "rule_name": "table_lock_contenion", "id": "16448", "rule_expression": "[metric,2020199]>[num,$1]&&[metric,2020404]<[num,$2]&&[metric,2020265]>[num,$3]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL Thread Cache命中率分析"}, {"knowledge_name": "检查innodb_thread_concurrency数据库参数", "knowledge_description": "检查innodb_thread_concurrency数据库参数"}], "description": "线程缓存大小可能不是最佳的", "rule_name": "thread_cache_suboptimal", "id": "16449", "rule_expression": "[metric,2020199]>[num,$1] && [metric,2020412]<[num,$2] && [cib,2210002,thread_cache_size]>[num,0]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "mysql临时表缓存命中率分析", "knowledge_description": "mysql临时表缓存命中率分析"}, {"knowledge_description": "MySQL Top SQL-按创建临时表数排序"}, {"knowledge_name": "MySQL数据库临时表及临时表空间分析", "knowledge_description": "MySQL数据库临时表及临时表空间分析"}, {"knowledge_name": "检查sort_buffer_size数据库参数", "knowledge_description": "检查sort_buffer_size数据库参数"}], "description": "检测到磁盘临时表使用量过多", "rule_name": "tmp_disk_tables", "id": "16450", "rule_expression": "[metric,2020199]>[num,$1]&&[metric,2020405]<[num,$2]&&[metric,2020267]>[num,$3]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "MySQL数据库临时表及临时表空间分析", "knowledge_description": "MySQL数据库临时表及临时表空间分析"}, {"knowledge_description": "MySQL Top SQL-按创建临时表数排序"}], "description": "最大临时表大小超过5GB", "rule_name": "tmp_table_size", "id": "16451", "rule_expression": "[metric,2020428]>[num,$1]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "MGR集群发生FC(流量控制)，集群处于暂停状态", "rule_name": "mgr_flow_control_paused", "id": "16264", "rule_expression": "[metric in time,5,2020154]>[num,0] ", "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL事务分析"}, {"knowledge_description": "MySQL锁等待分析"}, {"knowledge_description": "对MySQL的运行状态进行分析"}], "description": "事务持续时间超过阀值", "rule_name": "mysql_long_trx", "id": "16292", "rule_expression": null, "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL Top SQL-按排序行数排序"}, {"knowledge_description": "MySQL Top SQL-按创建临时表数排序"}, {"knowledge_description": "MySQL Top SQL-按排序行数排序"}, {"knowledge_description": "MySQL Top SQL-按创建临时表数排序"}], "description": "排序过多且排序内存设置较小导致文件排序过多", "rule_name": "sort_buffer_size_too_small", "id": "16320", "rule_expression": "[cib,2210002,sort_buffer_size]<[num,$1] && [metric,2020504]>[num,$2] && [metric,2020267]>[num,$3]", "db_type": "MySQL", "warning_level": "3", "warning_message": "排序过多且排序内存设置较小导致文件排序过多"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "仅支持实时分析", "knowledge_description": "MySQL主从复制分析"}, {"knowledge_name": "MySQL操作系统维度诊断", "knowledge_description": "MySQL操作系统维度诊断"}], "description": "MySQL主从复制延迟达到3600秒以上", "rule_name": "mysql_slave_is_lagging", "id": "8227", "rule_expression": "[metric max,2020451]>[num,$1]", "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL Latch等待检查"}], "description": "latch获取存在较长时间的等待", "rule_name": "mysql_latch", "id": "15282", "rule_expression": "[metric in time,30,2020172]>[num,0]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL Latch等待检查"}], "description": "latch获取存在较长时间的等待", "rule_name": "mysql_latch", "id": "16413", "rule_expression": "[metric in time,30,2020172]>[num,0]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL慢查询日志分析"}], "description": "每秒慢查询数大于1且每秒慢查询超过每秒查询数量的20%，说明数据库性能存在较多的慢查询，数据库性能低下", "rule_name": "slow_query_too_more", "id": "16694", "rule_expression": "[metric,2020287]>=[num,$1] && ([metric,2020287]/[metric,2020207]>[num,$2] )", "db_type": "MySQL", "warning_level": "3", "warning_message": "每秒慢查询数大于1且每秒慢查询超过每秒查询数量的20%，说明数据库性能存在较多的慢查询，数据库性能低下"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "InnoDB Buffer Pool等待空闲页次数超过每秒5次", "rule_name": "innodb_buffer_pool_wait", "id": "15098", "rule_expression": "[metric in time,5,2020426][oper,<][num,$1] && [metric in time,5,2020239][oper,>][num,$2] ", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "InnoDB Buffer Pool等待空闲页次数超过每秒5次", "rule_name": "innodb_buffer_pool_wait", "id": "15101", "rule_expression": "[metric in time,5,2020426][oper,<][num,$1] && [metric in time,5,2020239][oper,>][num,$2] ", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "InnoDB Buffer Pool等待空闲页次数超过每秒5次", "rule_name": "innodb_buffer_pool_wait", "id": "15100", "rule_expression": "[metric in time,5,2020426][oper,<][num,$1] && [metric in time,5,2020239][oper,>][num,$2] ", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "InnoDB Buffer Pool等待空闲页次数超过每秒5次", "rule_name": "innodb_buffer_pool_wait", "id": "16600", "rule_expression": "[metric in time,5,2020426][oper,<][num,$1] && [metric in time,5,2020239][oper,>][num,$2] ", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "分析MySQL InnoDB 写入日志等待", "knowledge_description": "分析MySQL InnoDB 写入日志等待"}, {"knowledge_name": "检查数据库innodb_log_buffer_size参数是否设置合理", "knowledge_description": "检查数据库innodb_log_buffer_size参数是否设置合理"}, {"knowledge_name": "检查sync_binlog数据库参数", "knowledge_description": "检查sync_binlog数据库参数"}, {"knowledge_name": "检查innodb_flush_log_at_trx_commit数据库参数是否设置合理", "knowledge_description": "检查innodb_flush_log_at_trx_commit数据库参数是否设置合理"}, {"knowledge_name": "检查log_bin数据库参数", "knowledge_description": "检查log_bin数据库参数"}], "description": "Innodb日志等待可能是性能瓶颈", "rule_name": "log_nowait_low", "id": "5774", "rule_expression": "[metric,2020427]<[num,$1]&&[metric,2020254]>[num,$2]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "查看文件系统目录实时使用率", "knowledge_description": "查看文件系统目录实时使用率"}, {"knowledge_name": "检查log_bin数据库参数", "knowledge_description": "检查log_bin数据库参数"}], "description": "有30天以前生成的binlog未被清理，可能会导致磁盘空间不足", "rule_name": "mysql_no_del_binlog", "id": "8255", "rule_expression": "[metric,2020434] >  [num,$1] && [metric,2020114] >  [num,$2] ", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [], "description": "InnoDB Buffer Pool等待空闲页次数超过每秒5次", "rule_name": "innodb_buffer_pool_wait", "id": "16254", "rule_expression": "[metric in time,5,2020426][oper,<][num,$1] && [metric in time,5,2020239][oper,>][num,$2] ", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "对MySQL的运行状态进行分析"}, {"knowledge_description": "对MySQL的Top SQL进行分析"}], "description": "活跃进程数量超过100", "rule_name": "mysql_active_threads", "id": "8892", "rule_expression": null, "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "对MySQL的运行状态进行分析"}, {"knowledge_description": "MySQL Top SQL-按执行时间排序"}, {"knowledge_name": "检查slow_query_log数据库参数", "knowledge_description": "检查slow_query_log数据库参数"}, {"knowledge_name": "检查long_query_time数据库参数", "knowledge_description": "检查long_query_time数据库参数"}], "description": "长时间运行的查询数过多", "rule_name": "long_running", "id": "16605", "rule_expression": "[metric,2020423]>[num,$1]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "对MySQL的运行状态进行分析"}, {"knowledge_description": "对MySQL的Top SQL进行分析"}], "description": "活跃进程数量超过100", "rule_name": "mysql_active_threads", "id": "5777", "rule_expression": null, "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL Latch等待检查"}], "description": "latch获取存在较长时间的等待", "rule_name": "mysql_latch", "id": "15232", "rule_expression": "[metric in time,30,2020172]>[num,0]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL死锁检查"}], "description": "存在死锁", "rule_name": "mysql_deadlock", "id": "16282", "rule_expression": "[metric in time,30,2020155]>[num,0] ", "db_type": "MySQL", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "预编译语句执行比例过低分析", "knowledge_description": "预编译语句执行比例过低分析"}], "description": "未有效使用预编译语句", "rule_name": "stmt_used_suboptimal", "id": "16321", "rule_expression": "[metric,2020212]>[num,$1]&&[metric,2020211]/[metric,2020212]<[num,$2]", "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "对MySQL的运行状态进行分析"}, {"knowledge_description": "对MySQL的Top SQL进行分析"}], "description": "活跃进程数量超过100", "rule_name": "mysql_active_threads", "id": "16272", "rule_expression": null, "db_type": "MySQL", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "MySQL并发SQL语句分析"}, {"knowledge_description": "SQL及等待链分析\t活跃会话过高时分析正在执行的的SQL语句及可能存在的等待链"}], "description": "相同SQL的并发数过多，超过5次", "rule_name": "mysql_similar_sqls", "id": "16430", "rule_expression": "[metric in time,30,2020170]>[num,4]", "db_type": "MySQL", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "对MySQL的运行状态进行分析"}, {"knowledge_description": "MySQL Top SQL-按执行时间排序"}, {"knowledge_name": "检查slow_query_log数据库参数", "knowledge_description": "检查slow_query_log数据库参数"}, {"knowledge_name": "检查long_query_time数据库参数", "knowledge_description": "检查long_query_time数据库参数"}], "description": "长时间运行的查询数过多", "rule_name": "long_running", "id": "5775", "rule_expression": "[metric,2020423]>[num,$1]", "db_type": "MySQL", "warning_level": "2"}}
