{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "集群状态检查"}, {"knowledge_description": "通用文件系统使用率分析"}, {"knowledge_description": "通用网络流量分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用IO分析"}], "description": "存在异常CN节点", "rule_name": "abnormal_cn_gsdb", "id": "13745", "rule_expression": "[metric,2823304]>=[num,$1]", "db_type": "GaussDB", "warning_level": "3", "warning_message": "存在异常CN节点，请尽快确认是否存在问题(故障CN节点数{[metric,2823302]})"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB CPU相关指标分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass 引发CPU异常的SQL相关指标分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库CPU分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "TOP SQL - CPU时间"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - 硬解析数"}, {"knowledge_description": "TOP SQL - 解析时间"}, {"knowledge_description": "TOP SQL - 生成执行计划时间"}], "description": "服务器CPU快速上升或者急剧波动", "rule_name": "cpu_rise_gsdb", "id": "14843", "rule_expression": "([metric,1000105,1001003-avg] [oper,eq] [str,3])||([metric,1000105,1001003-avg] [oper,eq] [str,5])", "db_type": "GaussDB", "warning_level": "2", "warning_message": "服务器CPU快速上升或者急剧波动"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "分布式数据库文件系统使用率指标分析"}, {"knowledge_description": "通用文件系统使用率分析"}], "description": "日志所在文件系统使用率过高", "rule_name": "filesystem_log_usage_gsdb", "id": "14857", "rule_expression": "([metric,1000322,_dn_max]>[num,$1])||([metric,1000322,_cn_max]>[num,$1])", "db_type": "GaussDB", "warning_level": "3", "warning_message": "DN节点日志所在文件系统使用率过高（DN-{[metric,1000322,_dn_max]},CN-{[metric,1000322,_cn_max]}）"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_description": "GaussDB锁等待分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "数据库锁相关指标分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用IO分析"}], "description": "锁过度竞争，可能会影响数据库性能", "rule_name": "lock_contenion_gsdb", "id": "12219", "rule_expression": "([metric,2823313,_cn_total]>[num,$1])||([metric,2823313,_dn_total]>[num,$2])", "db_type": "GaussDB", "warning_level": "2", "warning_message": "锁过度竞争，可能会影响数据库性能（CN:{[metric,2823313,_cn_total]},DN:{[metric,2823313,_dn_total]})"}}
{"type": "rule", "data": {"description": "数据库中出现过组件主从切换", "rule_name": "db_role_switch_gsdb", "id": "12244", "rule_expression": "([metric,2823317]>[num,$1])||([metric,2823318]>[num,$1])||([metric,2823319]>[num,$1])||([metric,2823320]>[num,$1])||([metric,2823321]>[num,$1])", "db_type": "GaussDB", "warning_level": "4", "warning_message": "数据库中出现过组件主从切换（CM：{[metric,2823317]}，ETCD：{[metric,2823318]}，CN：{[metric,2823319]}，DN：{[metric,2823320]}，GTM：{[metric,2823321]}）"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "分布式数据库文件系统使用率指标分析"}, {"knowledge_description": "通用文件系统使用率分析"}], "description": "日志所在文件系统使用率过高", "rule_name": "filesystem_log_usage_gsdb", "id": "14797", "rule_expression": "([metric,1000322,_dn_max]>[num,$1])||([metric,1000322,_cn_max]>[num,$1])", "db_type": "GaussDB", "warning_level": "3", "warning_message": "DN节点日志所在文件系统使用率过高（DN-{[metric,1000322,_dn_max]},CN-{[metric,1000322,_cn_max]}）"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "集群CN系统表一致性检查"}, {"knowledge_description": "集群状态检查"}], "description": "CN节点系统表存在不一致现象，相同存在严重问题", "rule_name": "systable_consistence_gsdb", "id": "13775", "rule_expression": "[metric,2823328]<[num,$1]", "db_type": "GaussDB", "warning_level": "4", "warning_message": "CN节点系统表存在不一致现象，相同存在严重问题"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "Top SQL-按逻辑读排序", "knowledge_description": "Top SQL-按逻辑读排序"}], "description": "每秒逻辑读异常，说明应用或者数据库出现了异常", "rule_name": "more_logic_read_pg", "id": "11244", "rule_expression": "(([metric,2820113,_dn_total]>[num,$1]) || ([metric in time,10,1000105,2820113-_dn_total][oper,eq][str,3])) && ([metric,2820113,_dn_total]>[num,$2])", "db_type": "GaussDB", "warning_level": "2", "warning_message": "每秒逻辑读异常增加，说明应用或者数据库出现了异常，当前每秒逻辑读{[metric,2820113,_dn_total]}"}}
{"type": "rule", "data": {"description": "数据库中出现过组件主从切换", "rule_name": "db_role_switch_gsdb", "id": "14594", "rule_expression": "([metric,2823317]>[num,$1])||([metric,2823318]>[num,$1])||([metric,2823319]>[num,$1])||([metric,2823320]>[num,$1])||([metric,2823321]>[num,$1])", "db_type": "GaussDB", "warning_level": "4", "warning_message": "数据库中出现过组件主从切换（CM：{[metric,2823317]}，ETCD：{[metric,2823318]}，CN：{[metric,2823319]}，DN：{[metric,2823320]}，GTM：{[metric,2823321]}）"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "Top SQL-按逻辑读排序", "knowledge_description": "Top SQL-按逻辑读排序"}], "description": "每秒逻辑读异常，说明应用或者数据库出现了异常", "rule_name": "more_logic_read_pg", "id": "3743", "rule_expression": "(([metric,2820113,_dn_total]>[num,$1]) || ([metric in time,10,1000105,2820113-_dn_total][oper,eq][str,3])) && ([metric,2820113,_dn_total]>[num,$2])", "db_type": "GaussDB", "warning_level": "2", "warning_message": "每秒逻辑读异常增加，说明应用或者数据库出现了异常，当前每秒逻辑读{[metric,2820113,_dn_total]}"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "TOP SQL - 硬解析数"}, {"knowledge_description": "TOP SQL - 解析时间"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_description": "通用CPU使用情况分析"}], "description": "DN节点每秒硬解析数量过多，数据库性能存在风险", "rule_name": "hard_parse_dn_gsdb", "id": "14393", "rule_expression": "([metric,2823167,_dn_total])>([num,$1])*[cib,2830002,_dn_cpu_total])", "db_type": "GaussDB", "warning_level": "2", "warning_message": "DN节点每秒硬解析数量过多（{[metric,2823167,_dn_total]}），数据库性能存在风险"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "GaussDB锁等待分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "数据库锁相关指标分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_description": "集群负载分析"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - 执行时间"}], "description": "每秒死锁数过多，系统存在风险", "rule_name": "dead_locks_gsdb", "id": "14595", "rule_expression": "[metric,2820118,total]>[num,$1]", "db_type": "GaussDB", "warning_level": "4", "warning_message": "每秒死锁数过多，系统存在风险(total:{[metric,2820118,total]},cn:{[metric,2820118,_cn_total]},dn:{[metric,2820118,_dn_total]})"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - CPU时间"}], "description": "CN或者DN节点的全表扫描次数过多", "rule_name": "table_scan_gsdb", "id": "14742", "rule_expression": "([metric,2822519,_cn_total])>([num,$1])*[cib,2830002,_cn_cpu_total])||([metric,2822519,_dn_total])>([num,$2]*[cib,2830002,_dn_cpu_total]))", "db_type": "GaussDB", "warning_level": "2", "warning_message": "CN或者DN节点的全表扫描次数过多"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_description": "GaussDB锁等待分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "数据库锁相关指标分析"}, {"knowledge_description": "TOP SQL - CPU时间"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用文件系统使用率分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用网络流量分析"}], "description": "活跃会话数过多，数据库可能存在风险", "rule_name": "active_session_gsdb_warn", "id": "14581", "rule_expression": "([metric,2820102,_cn_total]>([num,$1]*[cib,2830001,cn_cpu_total] ))||([metric,2820102,_dn_total]>([num,$1]*[cib,2830001,dn_cpu_total] ))", "db_type": "GaussDB", "warning_level": "2", "warning_message": "高斯集群的活跃会话数过多，数据库可能存在风险，计算节点总活跃会话数(cn:{[metric,2820102,_cn_total]},dn:{[metric,2820102,_dn_total]})"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "TOP 慢查询"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_description": "GaussDB锁等待分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "数据库锁相关指标分析"}, {"knowledge_description": "TOP SQL - CPU时间"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行器内执行时间"}, {"knowledge_description": "TOP SQL - 生成执行计划时间"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用文件系统使用率分析"}, {"knowledge_description": "通用内存使用情况分析"}], "description": "95分位SQL响应时间急剧上升，数据库性能存在风险", "rule_name": "95SQL_gsdb", "id": "14673", "rule_expression": "(([metric,1000105,2823208] [oper,eq] [str,3]))&&([metric,2823208]>[num,$1] )", "db_type": "GaussDB", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "分布式数据库文件系统使用率指标分析"}, {"knowledge_description": "通用文件系统使用率分析"}], "description": "数据库节点软件安装所在文件系统空间使用率过高", "rule_name": "filesystem_soft_usage_gsdb", "id": "14802", "rule_expression": "([metric,1000320,_dn_max]>[num,$1])||([metric,1000320,_cn_max]>[num,$2])", "db_type": "GaussDB", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB CPU相关指标分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass 引发CPU异常的SQL相关指标分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库CPU分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "TOP SQL - CPU时间"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - 硬解析数"}, {"knowledge_description": "TOP SQL - 解析时间"}, {"knowledge_description": "TOP SQL - 生成执行计划时间"}], "description": "服务器CPU快速上升或者急剧波动", "rule_name": "cpu_rise_gsdb", "id": "14377", "rule_expression": "([metric,1000105,1001003-avg] [oper,eq] [str,3])||([metric,1000105,1001003-avg] [oper,eq] [str,5])", "db_type": "GaussDB", "warning_level": "2", "warning_message": "服务器CPU快速上升或者急剧波动"}}
{"type": "rule", "data": {"description": "NAS使用率过高", "rule_name": "nas_usage_gsdb", "id": "14812", "rule_expression": "[metric,2823392]>[num,$1]", "db_type": "GaussDB", "warning_level": "2", "warning_message": "NAS使用率过高，备份存在容量风险（{[metric,2823392]}）"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GasusDB IO相关指标"}, {"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-数据库IO分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL引发IO异常的相关指标分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}], "description": "IO延时过高告警", "rule_name": "IO_latency_gsdb_warn", "id": "14381", "rule_expression": "[metric,1001006,max]>[num,$1] && ([metric,1001101,avg]>[num,$2]) ", "db_type": "GaussDB", "warning_level": "2"}}
{"type": "rule", "data": {"description": "NAS使用率过高", "rule_name": "nas_usage_gsdb", "id": "14813", "rule_expression": "[metric,2823392]>[num,$1]", "db_type": "GaussDB", "warning_level": "2", "warning_message": "NAS使用率过高，备份存在容量风险（{[metric,2823392]}）"}}
{"type": "rule", "data": {"description": "最近一小时出现过备份失败", "rule_name": "backup_failed_gsdb", "id": "14807", "rule_expression": "[metric,2823387]>[num,0]", "db_type": "GaussDB", "warning_level": "4", "warning_message": "最近一小时出现过备份失败({[metric,2823387]}次)，最后一次备份失败时间为{[metric,2823389]}"}}
{"type": "rule", "data": {"description": "最近一小时出现过备份失败", "rule_name": "backup_failed_gsdb", "id": "14808", "rule_expression": "[metric,2823387]>[num,0]", "db_type": "GaussDB", "warning_level": "4", "warning_message": "最近一小时出现过备份失败({[metric,2823387]}次)，最后一次备份失败时间为{[metric,2823389]}"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "集群内存分析"}, {"knowledge_description": "集群内存过载分析"}, {"knowledge_description": "集群会话的内存占用情况"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB内存方面指标异常分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库内存分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}], "description": "服务器物理内存不可用率较高，SWAP使用率较高，系统存在风险", "rule_name": "swap_used_gsdb_critical", "id": "12239", "rule_expression": "[metric,1001014,max]>[num,$1] && [metric,1001031,max]>[num,$2]", "db_type": "GaussDB", "warning_level": "4", "warning_message": "服务器物理内存不可用率较高，SWAP使用率较高，系统存在风险（内存不可用率{[metric,1001014.max]}，SWAP使用率{ [metric,1001031,max]}）"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - 硬解析数"}, {"knowledge_description": "TOP SQL - 解析时间"}, {"knowledge_description": "TOP SQL - 生成执行计划时间"}, {"knowledge_description": "TOP SQL - 重写时间"}, {"knowledge_description": "TOP SQL - 软解析数"}], "description": "CN节点每秒硬解析数量过大，数据库性能存在风险", "rule_name": "hard_parse_cn_gsdb", "id": "14391", "rule_expression": "([metric,2823167,_cn_total])>([num,$1])*[cib,2830002,_cn_cpu_total])", "db_type": "GaussDB", "warning_level": "2", "warning_message": "每秒硬解析数量过大（{[metric,2823167,_cn_total]}），数据库性能存在风险"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GasusDB IO相关指标"}, {"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-数据库IO分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - 执行时间"}], "description": "各DN节点的IOPS不均衡，数据库性能可能受影响", "rule_name": "IOPS_nobalance_gsdb", "id": "14609", "rule_expression": "(([metric,1001100,dn_min])<[num,8000])&&(([metric,1001100,dn_max]/[metric,1001100,dn_min])>[num,$1]))||(([metric,1001100,dn_min])>=[num,8000])&&(([metric,1001100,dn_max]/[metric,1001100,dn_min])>[num,$2]))", "db_type": "GaussDB", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_description": "GaussDB锁等待分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "数据库锁相关指标分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用IO分析"}], "description": "锁过度竞争，可能会影响数据库性能", "rule_name": "lock_contenion_gsdb", "id": "14610", "rule_expression": "([metric,2823313,_cn_total]>[num,$1])||([metric,2823313,_dn_total]>[num,$2])", "db_type": "GaussDB", "warning_level": "2", "warning_message": "锁过度竞争，可能会影响数据库性能（CN:{[metric,2823313,_cn_total]},DN:{[metric,2823313,_dn_total]})"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_name": "数据库负载维度分析", "knowledge_description": "数据库负载维度分析"}, {"knowledge_description": "GaussDB长事务分析"}, {"knowledge_description": "GaussDB锁等待分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "数据库锁相关指标分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}], "description": "回滚比例过高，数据库存在问题", "rule_name": "rollback_high_gsdb", "id": "14383", "rule_expression": "([metric,2829010,max])>[num,$1])&&([metric,2820117,total])>[num,$2])", "db_type": "GaussDB", "warning_level": "3", "warning_message": "回滚比例过高，数据库存在问题（{[metric,2829010,max]}）"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - CPU时间"}], "description": "CN或者DN节点的全表扫描次数过多", "rule_name": "table_scan_gsdb", "id": "14387", "rule_expression": "([metric,2822519,_cn_total])>([num,$1])*[cib,2830002,_cn_cpu_total])||([metric,2822519,_dn_total])>([num,$2]*[cib,2830002,_dn_cpu_total]))", "db_type": "GaussDB", "warning_level": "2", "warning_message": "CN或者DN节点的全表扫描次数过多"}}
{"type": "rule", "data": {"description": "存在死元组比例较大的大表", "rule_name": "dead_tuple_not_cleanup_on", "id": "11173", "rule_expression": "[metric,2823341,_dn_total]>[num,$1] ", "db_type": "GaussDB", "warning_level": "2", "warning_message": "存在死元组数到达清理阈值而未清理的表（{[metric,2823341,_dn_total]}），会造成空间浪费和性能问题"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "Top SQL-按物理写排序", "knowledge_description": "Top SQL-按物理写排序"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}], "description": "Backend写脏块比例过高，系统性能存在问题", "rule_name": "Pagewriter_flush_gsdb", "id": "14625", "rule_expression": " [metric,2829015,min]<[num,$1]", "db_type": "GaussDB", "warning_level": "2"}}
{"type": "rule", "data": {"description": "数据库复制不正常", "rule_name": "repl_gsdb", "id": "14626", "rule_expression": "[metric,2820147,cluster][oper,neq][str,Streaming] || [metric,2820149,cluster]>[num,$1]", "db_type": "GaussDB", "warning_level": "4", "warning_message": "数据库复制不正常（复制状态{[metric,2820147,cluster]}，备库应用延时{[metric,2820149,cluster]}）"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "集群会话分析"}, {"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-数据库活跃会话数分析"}, {"knowledge_description": "集群会话的内存占用情况"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用内存使用情况分析"}], "description": "线程池使用率过高，系统存在风险", "rule_name": "session_exceed_gsdb", "id": "14629", "rule_expression": "([metric,2823209,_cn_max]>[num,$1] )||([metric,2823209,_dn_max]>[num,$2])", "db_type": "GaussDB", "warning_level": "4", "warning_message": "线程池使用率过高，系统存在风险（CN:{[metric,2823209,_cn_max]},DN:{[metric,2823209,_dn_max]})"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "集群内存分析"}, {"knowledge_description": "集群内存过载分析"}, {"knowledge_description": "集群会话的内存占用情况"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB内存方面指标异常分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库内存分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}], "description": "服务器物理内存不可用率较高，SWAP使用率较高，系统存在风险", "rule_name": "swap_used_gsdb_critical", "id": "14630", "rule_expression": "[metric,1001014,max]>[num,$1] && [metric,1001031,max]>[num,$2]", "db_type": "GaussDB", "warning_level": "4", "warning_message": "服务器物理内存不可用率较高，SWAP使用率较高，系统存在风险（内存不可用率{[metric,1001014.max]}，SWAP使用率{ [metric,1001031,max]}）"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "TOP SQL - 硬解析数"}, {"knowledge_description": "TOP SQL - 解析时间"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_description": "通用CPU使用情况分析"}], "description": "DN节点每秒硬解析数量过多，数据库性能存在风险", "rule_name": "hard_parse_dn_gsdb", "id": "14604", "rule_expression": "([metric,2823167,_dn_total])>([num,$1])*[cib,2830002,_dn_cpu_total])", "db_type": "GaussDB", "warning_level": "2", "warning_message": "DN节点每秒硬解析数量过多（{[metric,2823167,_dn_total]}），数据库性能存在风险"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "GaussDB长事务分析"}, {"knowledge_description": "GaussDB锁等待分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "数据库锁相关指标分析"}, {"knowledge_description": "TOP SQL - CPU时间"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用网络流量分析"}], "description": "事务持续时间过长，超过300秒", "rule_name": "long_trans_gsdb", "id": "14613", "rule_expression": "[metric ,2820106,_cn_max] >[num,$1]", "db_type": "GaussDB", "warning_level": "4", "warning_message": "事务持续时间过长，超过{[metric ,2820106,_cn_max] }秒"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "集群状态检查"}], "description": "CN进程存在异常", "rule_name": "abnormal_cn_proc_gsdb", "id": "14820", "rule_expression": "[metric,2823325]>[num,0]", "db_type": "GaussDB", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "GaussDB长事务分析"}, {"knowledge_description": "GaussDB锁等待分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "数据库锁相关指标分析"}, {"knowledge_description": "TOP SQL - CPU时间"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用网络流量分析"}], "description": "事务持续时间过长，超过300秒", "rule_name": "long_trans_gsdb", "id": "14869", "rule_expression": "[metric ,2820106,_cn_max] >[num,$1]", "db_type": "GaussDB", "warning_level": "4", "warning_message": "事务持续时间过长，超过{[metric ,2820106,_cn_max] }秒"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}], "description": "DN节点上DML数量异常变化", "rule_name": "more_dml_dn_gsdb", "id": "14876", "rule_expression": "(([metric,2823156,_dn_total]>[num,$1]) || ([metric ,1000105,2823156-_dn_total][oper,eq][str,3])) && ([metric,2823156,_dn_total]>[num,$2])", "db_type": "GaussDB", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "数据库等待事件分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_name": "数据库负载维度分析", "knowledge_description": "数据库负载维度分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用网络流量分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - 解析时间"}], "description": "LwLock等待数量过多，系统存在风险", "rule_name": "lwlock_gsdb", "id": "14871", "rule_expression": "([metric,2820102]>[num,$1]) && ([metric,2829016,total]>[num,$2]*([cib,2830001,dn_nodes]+[cib,2830001,cn_nodes]))", "db_type": "GaussDB", "warning_level": "3", "warning_message": "LwLock等待数量过多（{[metric,2820317]}），系统存在风险"}}
{"type": "rule", "data": {"description": "CN节点每秒逻辑读异常，说明应用或者数据库出现了异常", "rule_name": "more_logic_read_cn_gsdb", "id": "14620", "rule_expression": "(([metric,2820113,_cn_total]>[num,$1]) || ([metric ,1000105,2820113-_cn_total][oper,eq][str,3])) && ([metric,2820113,_cn_total]>[num,$2])", "db_type": "GaussDB", "warning_level": "2", "warning_message": "CN节点每秒逻辑读异常增加，说明应用或者数据库出现了异常，当前每秒逻辑读{[metric,2820113,_cn_total]}"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_description": "TOP SQL - 执行次数"}], "description": "CN节点上SELECT数量异常变化", "rule_name": "more_select_cn_gsdb", "id": "14880", "rule_expression": "(([metric,2823151,_cn_total]>[num,$1]) || ([metric ,1000105,2823151-_cn_total][oper,eq][str,3])) && ([metric,2823151,_cn_total]>[num,$2])", "db_type": "GaussDB", "warning_level": "2", "warning_message": "CN节点上SELECT数量异常变化"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "Top SQL-按物理写排序", "knowledge_description": "Top SQL-按物理写排序"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}], "description": "Backend写脏块比例过高，系统性能存在问题", "rule_name": "Pagewriter_flush_gsdb", "id": "14883", "rule_expression": " [metric,2829015,min]<[num,$1]", "db_type": "GaussDB", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}], "description": "数据库DN中的DML比例异常（集中式专用）", "rule_name": "abnormal_dml_ratio_dn_gsdb", "id": "14936", "rule_expression": "(([metric,2829018,_dn_total]>[num,$1]) || ([metric ,1000105,2829018-_dn_total][oper,eq][str,3])) && ([metric,2829018,_dn_total]>[num,$2])", "db_type": "GaussDB", "warning_level": "2", "warning_message": "数据库DN中的DML比例异常({[metric,2829018,_dn_total]})(集中式专用)"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "集群状态检查"}], "description": "存在异常的DN进程", "rule_name": "abnormal_dn_proc_gsdb", "id": "14938", "rule_expression": "[metric,2823326]>[num,0]", "db_type": "GaussDB", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "集群状态检查"}], "description": "存在异常的DN进程", "rule_name": "abnormal_dn_proc_gsdb", "id": "14825", "rule_expression": "[metric,2823326]>[num,0]", "db_type": "GaussDB", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "死元组达到清理要求未清理的分析", "knowledge_description": "死元组达到清理要求未清理的分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_description": "GaussDB锁等待分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "数据库锁相关指标分析"}, {"knowledge_description": "GaussDB长事务分析"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用文件系统使用率分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用网络流量分析"}], "description": "长事务过多或持续时间过长", "rule_name": "long_trx_gsdb", "id": "14983", "rule_expression": "[metric,2820105,_cn_total]>[num,$1] || [metric,2820106,_cn_max]>[num,$2]", "db_type": "GaussDB", "warning_level": "2", "warning_message": "长事务数{[metric,2820105]}个，最长事务持续时间{[metric,2820106]}"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}], "description": "DN节点上DML数量异常变化", "rule_name": "more_dml_dn_gsdb", "id": "14989", "rule_expression": "(([metric,2823156,_dn_total]>[num,$1]) || ([metric ,1000105,2823156-_dn_total][oper,eq][str,3])) && ([metric,2823156,_dn_total]>[num,$2])", "db_type": "GaussDB", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用网络流量分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - CPU时间"}], "description": "80分位的SQL响应时间异常增长", "rule_name": "80SQL_gsdb", "id": "14672", "rule_expression": "(([metric,1000105,2823207] [oper,eq] [str,3]))&&([metric,2823207]>[num,$1] )", "db_type": "GaussDB", "warning_level": "2", "warning_message": "80分位的SQL响应时间异常增长"}}
{"type": "rule", "data": {"description": "CN节点每秒逻辑读异常，说明应用或者数据库出现了异常", "rule_name": "more_logic_read_cn_gsdb", "id": "14990", "rule_expression": "(([metric,2820113,_cn_total]>[num,$1]) || ([metric ,1000105,2820113-_cn_total][oper,eq][str,3])) && ([metric,2820113,_cn_total]>[num,$2])", "db_type": "GaussDB", "warning_level": "2", "warning_message": "CN节点每秒逻辑读异常增加，说明应用或者数据库出现了异常，当前每秒逻辑读{[metric,2820113,_cn_total]}"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "集群状态检查"}], "description": "GTM进程存在异常", "rule_name": "abnormal_gtm_proc_gsdb", "id": "14683", "rule_expression": "[metric,2823327]>[num,0]", "db_type": "GaussDB", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "GaussDB长事务分析"}, {"knowledge_description": "GaussDB锁等待分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "数据库锁相关指标分析"}, {"knowledge_description": "TOP SQL - CPU时间"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用网络流量分析"}], "description": "事务持续时间过长，超过300秒", "rule_name": "long_trans_gsdb", "id": "12420", "rule_expression": "[metric ,2820106,_cn_max] >[num,$1]", "db_type": "GaussDB", "warning_level": "4", "warning_message": "事务持续时间过长，超过{[metric ,2820106,_cn_max] }秒"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}], "description": "DN节点上SELECT数量异常变化", "rule_name": "more_select_dn_gsdb", "id": "14994", "rule_expression": "(([metric,2823151,_dn_total]>[num,$1]) || ([metric ,1000105,2823151-_dn_total][oper,eq][str,3])) && ([metric,2823151,_dn_total]>[num,$2])", "db_type": "GaussDB", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "正确配置archive_command命令", "knowledge_description": "分析数据库WAL日志归档失败"}, {"knowledge_description": "通用文件系统使用率分析"}], "description": "发生未成功归档现象", "rule_name": "failed_archive_pg", "id": "11237", "rule_expression": "[cib,2220002,archive_mode][oper,eq][str,on] && [metric,2820142]>[num,$1]", "db_type": "GaussDB", "warning_level": "4"}}
{"type": "rule", "data": {"description": "CMSERVER发生过切换", "rule_name": "switchover_cmserver_gsdb", "id": "15002", "rule_expression": "[metric,2823317]>[num,0]", "db_type": "GaussDB", "warning_level": "4"}}
{"type": "rule", "data": {"description": "DN节点发生过切换", "rule_name": "switchover_dn_gsdb", "id": "15004", "rule_expression": "[metric,2823320]>[num,0]", "db_type": "GaussDB", "warning_level": "4"}}
{"type": "rule", "data": {"description": "CN发生过切换", "rule_name": "switchover_cn_gsdb", "id": "15003", "rule_expression": "[metric,2823319]>[num,0]", "db_type": "GaussDB", "warning_level": "4"}}
{"type": "rule", "data": {"description": "ETCD发生过切换", "rule_name": "switchover_etcd_gsdb", "id": "15005", "rule_expression": "[metric,2823318]>[num,0]", "db_type": "GaussDB", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "集群内存分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB内存方面指标异常分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - 解析时间"}], "description": "DN节点服务器内存使用不均衡", "rule_name": "mem_nobalance_dn_gsdb", "id": "14405", "rule_expression": "(([metric,1001004,dn_min])<[num,50])&&(([metric,1001004,dn_max]/[metric,1001004,dn_min])>[num,$1]))||(([metric,1001004,dn_min])>=[num,50])&&(([metric,1001004,dn_max]/[metric,1001004,dn_min])>[num,$2]))", "db_type": "GaussDB", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GasusDB IO相关指标"}, {"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-数据库IO分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - 执行时间"}], "description": "各DN节点的IOPS不均衡，数据库性能可能受影响", "rule_name": "IOPS_nobalance_gsdb", "id": "14403", "rule_expression": "(([metric,1001100,dn_min])<[num,8000])&&(([metric,1001100,dn_max]/[metric,1001100,dn_min])>[num,$1]))||(([metric,1001100,dn_min])>=[num,8000])&&(([metric,1001100,dn_max]/[metric,1001100,dn_min])>[num,$2]))", "db_type": "GaussDB", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "集群状态检查"}], "description": "CN进程存在异常", "rule_name": "abnormal_cn_proc_gsdb", "id": "14411", "rule_expression": "[metric,2823325]>[num,0]", "db_type": "GaussDB", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "集群状态检查"}], "description": "存在异常的DN进程", "rule_name": "abnormal_dn_proc_gsdb", "id": "14409", "rule_expression": "[metric,2823326]>[num,0]", "db_type": "GaussDB", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "集群状态检查"}], "description": "GTM进程存在异常", "rule_name": "abnormal_gtm_proc_gsdb", "id": "14407", "rule_expression": "[metric,2823327]>[num,0]", "db_type": "GaussDB", "warning_level": "4"}}
{"type": "rule", "data": {"description": "存在死元组比例较大的大表", "rule_name": "dead_tuple_not_cleanup_on", "id": "8205", "rule_expression": "[metric,2823341,_dn_total]>[num,$1] ", "db_type": "GaussDB", "warning_level": "2", "warning_message": "存在死元组数到达清理阈值而未清理的表（{[metric,2823341,_dn_total]}），会造成空间浪费和性能问题"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "集群状态检查"}], "description": "GTM发生过切换", "rule_name": "switchover_gtm_gsdb", "id": "14421", "rule_expression": "[metric,2823321]>[num,0]", "db_type": "GaussDB", "warning_level": "4"}}
{"type": "rule", "data": {"description": "CMSERVER发生过切换", "rule_name": "switchover_cmserver_gsdb", "id": "14413", "rule_expression": "[metric,2823317]>[num,0]", "db_type": "GaussDB", "warning_level": "4"}}
{"type": "rule", "data": {"description": "CN发生过切换", "rule_name": "switchover_cn_gsdb", "id": "14417", "rule_expression": "[metric,2823319]>[num,0]", "db_type": "GaussDB", "warning_level": "4"}}
{"type": "rule", "data": {"description": "ETCD发生过切换", "rule_name": "switchover_etcd_gsdb", "id": "14415", "rule_expression": "[metric,2823318]>[num,0]", "db_type": "GaussDB", "warning_level": "4"}}
{"type": "rule", "data": {"description": "DN节点发生过切换", "rule_name": "switchover_dn_gsdb", "id": "14419", "rule_expression": "[metric,2823320]>[num,0]", "db_type": "GaussDB", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "Top SQL-按物理写排序", "knowledge_description": "Top SQL-按物理写排序"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}], "description": "Backend写脏块比例过高，系统性能存在问题", "rule_name": "Pagewriter_flush_gsdb", "id": "12220", "rule_expression": " [metric,2829015,min]<[num,$1]", "db_type": "GaussDB", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "分析数据库实例情况"}], "description": "出现多次错误或告警的SQL语句，可能是应用发出", "rule_name": "error_sql_pg", "id": "14706", "rule_expression": "[metric,2820204]>[num,$1]", "db_type": "GaussDB", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "分布式数据库文件系统使用率指标分析"}, {"knowledge_description": "通用文件系统使用率分析"}], "description": "数据库节点软件安装所在文件系统空间使用率过高", "rule_name": "filesystem_soft_usage_gsdb", "id": "14804", "rule_expression": "([metric,1000320,_dn_max]>[num,$1])||([metric,1000320,_cn_max]>[num,$2])", "db_type": "GaussDB", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB CPU相关指标分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass 引发CPU异常的SQL相关指标分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库CPU分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "TOP SQL - CPU时间"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - 硬解析数"}, {"knowledge_description": "TOP SQL - 解析时间"}, {"knowledge_description": "TOP SQL - 生成执行计划时间"}], "description": "服务器CPU快速上升或者急剧波动", "rule_name": "cpu_rise_gsdb", "id": "14591", "rule_expression": "([metric,1000105,1001003-avg] [oper,eq] [str,3])||([metric,1000105,1001003-avg] [oper,eq] [str,5])", "db_type": "GaussDB", "warning_level": "2", "warning_message": "服务器CPU快速上升或者急剧波动"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "集群状态检查"}], "description": "存在异常的DN进程", "rule_name": "abnormal_dn_proc_gsdb", "id": "14680", "rule_expression": "[metric,2823326]>[num,0]", "db_type": "GaussDB", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "正确配置archive_command命令", "knowledge_description": "分析数据库WAL日志归档失败"}, {"knowledge_description": "通用文件系统使用率分析"}], "description": "发生未成功归档现象", "rule_name": "failed_archive_pg", "id": "12213", "rule_expression": "[cib,2220002,archive_mode][oper,eq][str,on] && [metric,2820142]>[num,$1]", "db_type": "GaussDB", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "分析数据库实例情况"}], "description": "出现多次错误或告警的SQL语句，可能是应用发出", "rule_name": "error_sql_pg", "id": "12217", "rule_expression": "[metric,2820204]>[num,$1]", "db_type": "GaussDB", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "PostgreSQL长事务分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_description": "GaussDB锁等待分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "数据库锁相关指标分析"}, {"knowledge_description": "TOP SQL - 执行次数"}], "description": "如果事务提交比例低于历史平均水平的50%，系统可能存在隐患", "rule_name": "transaction_commit_ratio_low_gsdb", "id": "12225", "rule_expression": "[metric,2820108] < [metric hour avg,2820108]*[num,$1]", "db_type": "GaussDB", "warning_level": "3", "warning_message": "事务提交比例({[metric,2820108]})低于小时平均水平的50%，系统可能存在隐患"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "集群会话分析"}, {"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-数据库活跃会话数分析"}, {"knowledge_description": "集群会话的内存占用情况"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用内存使用情况分析"}], "description": "线程池使用率过高，系统存在风险", "rule_name": "session_exceed_gsdb", "id": "12212", "rule_expression": "([metric,2823209,_cn_max]>[num,$1] )||([metric,2823209,_dn_max]>[num,$2])", "db_type": "GaussDB", "warning_level": "4", "warning_message": "线程池使用率过高，系统存在风险（CN:{[metric,2823209,_cn_max]},DN:{[metric,2823209,_dn_max]})"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_description": "GaussDB锁等待分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "数据库锁相关指标分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "TOP SQL - CPU时间"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - 硬解析数"}, {"knowledge_description": "TOP SQL - 生成执行计划时间"}], "description": "集中式模式下阻塞或者等待会话数量过多，数据库性能存在风险", "rule_name": "block_session_dn_gsdb", "id": "14425", "rule_expression": "([metric,2820103]>([num,$1])*[cib,2830002,_dn_cpu_total]))", "db_type": "GaussDB", "warning_level": "3", "warning_message": "集中式模式下阻塞或者等待会话数量过多，数据库性能存在风险（{[metric,2820103]}）"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "数据库连接失败分析", "knowledge_description": "数据库连接失败分析"}], "description": "KYD连接PG数据库的用户密码错误", "rule_name": "dsmart_logon_failed_gsdb", "id": "12216", "rule_expression": "[metric,1000000][oper,contains][str,password authentication failed]", "db_type": "GaussDB", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "死元组达到清理要求未清理的分析", "knowledge_description": "死元组达到清理要求未清理的分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_description": "GaussDB锁等待分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "数据库锁相关指标分析"}, {"knowledge_description": "GaussDB长事务分析"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用文件系统使用率分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用网络流量分析"}], "description": "长事务过多或持续时间过长", "rule_name": "long_trx_gsdb", "id": "12226", "rule_expression": "[metric,2820105,_cn_total]>[num,$1] || [metric,2820106,_cn_max]>[num,$2]", "db_type": "GaussDB", "warning_level": "2", "warning_message": "长事务数{[metric,2820105]}个，最长事务持续时间{[metric,2820106]}"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "数据库连接失败分析", "knowledge_description": "数据库连接失败分析"}, {"knowledge_description": "通用网络流量分析"}], "description": "KYD客户端到PG数据库网络出现问题或者KYD到PG数据库连接串端口配置出错，请检查相关配置", "rule_name": "dsmart_network_failed_gsdb", "id": "12231", "rule_expression": "[metric,1000000][oper,contains][str,Check that the hostname and port are correct]", "db_type": "GaussDB", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "死元组达到清理要求未清理的分析", "knowledge_description": "死元组达到清理要求未清理的分析"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}], "description": "存在死元组比例较大的大表", "rule_name": "dead_tuple_not_cleanup_gsdb", "id": "12232", "rule_expression": "[metric,2823341,_dn_total]>[num,$1] ", "db_type": "GaussDB", "warning_level": "2", "warning_message": "存在死元组数到达清理阈值而未清理的表（{[metric,2823341,_dn_total]}），会造成空间浪费和性能问题"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "Top SQL-按处理行数排序", "knowledge_description": "Top SQL-按处理行数排序"}, {"knowledge_name": "显示数据库中无效索引", "knowledge_description": "显示数据库中无效索引"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_name": "获取执行时间比较高的TOP SQL", "knowledge_description": "获取执行时间比较高的TOP SQL"}, {"knowledge_name": "区分top sql是逻辑读还是执行次数增多进行进一步诊断", "knowledge_description": "逻辑读较多的TOP SQL"}], "description": "索引没有用被有效利用", "rule_name": "index_used_suboptimal_gsdb", "id": "12227", "rule_expression": " [metric,2820120,_dn_total]>[num,$1] && [metric,2820109]<[num,$2]", "db_type": "GaussDB", "warning_level": "2", "warning_message": "可能因为索引设计不合理而导致返回行数比例过低，索引使用效率过低"}}
{"type": "rule", "data": {"description": "CN节点每秒逻辑读异常，说明应用或者数据库出现了异常", "rule_name": "more_logic_read_cn_gsdb", "id": "13754", "rule_expression": "(([metric,2820113,_cn_total]>[num,$1]) || ([metric ,1000105,2820113-_cn_total][oper,eq][str,3])) && ([metric,2820113,_cn_total]>[num,$2])", "db_type": "GaussDB", "warning_level": "2", "warning_message": "CN节点每秒逻辑读异常增加，说明应用或者数据库出现了异常，当前每秒逻辑读{[metric,2820113,_cn_total]}"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_description": "GaussDB锁等待分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "数据库锁相关指标分析"}, {"knowledge_description": "TOP SQL - CPU时间"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用文件系统使用率分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用网络流量分析"}], "description": "活跃会话数过多，数据库可能存在风险", "rule_name": "active_session_gsdb_warn", "id": "12233", "rule_expression": "([metric,2820102,_cn_total]>([num,$1]*[cib,2830001,cn_cpu_total] ))||([metric,2820102,_dn_total]>([num,$1]*[cib,2830001,dn_cpu_total] ))", "db_type": "GaussDB", "warning_level": "2", "warning_message": "高斯集群的活跃会话数过多，数据库可能存在风险，计算节点总活跃会话数(cn:{[metric,2820102,_cn_total]},dn:{[metric,2820102,_dn_total]})"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用文件系统使用率分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用网络流量分析"}], "description": "数据库采集任务严重超时，数据库存在严重性能风险", "rule_name": "collector_exec_slow_gsdb", "id": "12229", "rule_expression": "[metric,1000101] >([metric hour avg,1000101]*[num,$1])", "db_type": "GaussDB", "warning_level": "4", "warning_message": "数据库采集任务严重超时，数据库存在严重性能风险(采集延时{[metric,1000101] })"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GasusDB IO相关指标"}, {"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-数据库IO分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL引发IO异常的相关指标分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}], "description": "IO延时过高告警", "rule_name": "IO_latency_gsdb_warn", "id": "14712", "rule_expression": "[metric,1001006,max]>[num,$1] && ([metric,1001101,avg]>[num,$2]) ", "db_type": "GaussDB", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "运维对象连接失败，请检查运维对象是否down", "knowledge_description": "运维对象连接状态分析"}], "description": "KYD采样SQL在pg数据库执行失败", "rule_name": "dsmart_monitor_sql_execute_failed_gsdb", "id": "12230", "rule_expression": "[metric,1000000] [oper,contains][str,SQL执行失败]", "db_type": "GaussDB", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "数据库连接失败分析", "knowledge_description": "数据库连接失败分析"}], "description": "KYD到pg数据库连接配置有问题，导致连接失败", "rule_name": "dsmart_connection_error_gsdb", "id": "12228", "rule_expression": "[metric,1000000][oper,contains][str,FATAL: database] && [metric,1000000][oper,contains][str,does not exist]", "db_type": "GaussDB", "warning_level": "4", "warning_message": "dsmart到pg数据库连接配置有问题，导致连接失败"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用网络流量分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - CPU时间"}], "description": "80分位的SQL响应时间异常增长", "rule_name": "80SQL_gsdb", "id": "14389", "rule_expression": "(([metric,1000105,2823207] [oper,eq] [str,3]))&&([metric,2823207]>[num,$1] )", "db_type": "GaussDB", "warning_level": "2", "warning_message": "80分位的SQL响应时间异常增长"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "集群CN系统表一致性检查"}, {"knowledge_description": "集群状态检查"}], "description": "CN节点系统表存在不一致现象，相同存在严重问题", "rule_name": "systable_consistence_gsdb", "id": "15007", "rule_expression": "[metric,2823328]<[num,$1]", "db_type": "GaussDB", "warning_level": "4", "warning_message": "CN节点系统表存在不一致现象，相同存在严重问题"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "集群内存分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB内存方面指标异常分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - 解析时间"}], "description": "DN节点服务器内存使用不均衡", "rule_name": "mem_nobalance_dn_gsdb", "id": "14617", "rule_expression": "(([metric,1001004,dn_min])<[num,50])&&(([metric,1001004,dn_max]/[metric,1001004,dn_min])>[num,$1]))||(([metric,1001004,dn_min])>=[num,50])&&(([metric,1001004,dn_max]/[metric,1001004,dn_min])>[num,$2]))", "db_type": "GaussDB", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库CPU分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB CPU相关指标分析"}, {"knowledge_name": "数据库CPU高分析", "knowledge_description": "数据库CPU高分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass 引发CPU异常的SQL相关指标分析"}], "description": "数据库CPU使用率过高，可能存在瓶颈", "rule_name": "cpu_used_higher_gsdb", "id": "12234", "rule_expression": "([metric,1001003,max] >[num,$1])||([metric,1001003,avg] >[num,$2])", "db_type": "GaussDB", "warning_level": "4", "warning_message": "当前CPU使用率过高，当前CPU使用率平均值为：{[metric,1001003,avg]}%，当前CPU使用率最大值为：{[metric,1001003,max]}%"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用文件系统使用率分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用网络流量分析"}], "description": "数据库采集任务严重超时，数据库存在严重性能风险", "rule_name": "collector_exec_slow_gsdb", "id": "14839", "rule_expression": "[metric,1000101] >([metric hour avg,1000101]*[num,$1])", "db_type": "GaussDB", "warning_level": "4", "warning_message": "数据库采集任务严重超时，数据库存在严重性能风险(采集延时{[metric,1000101] })"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "TOP 慢查询"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_description": "GaussDB锁等待分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "数据库锁相关指标分析"}, {"knowledge_description": "TOP SQL - CPU时间"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行器内执行时间"}, {"knowledge_description": "TOP SQL - 生成执行计划时间"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用文件系统使用率分析"}, {"knowledge_description": "通用内存使用情况分析"}], "description": "95分位SQL响应时间急剧上升，数据库性能存在风险", "rule_name": "95SQL_gsdb", "id": "14385", "rule_expression": "(([metric,1000105,2823208] [oper,eq] [str,3]))&&([metric,2823208]>[num,$1] )", "db_type": "GaussDB", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "数据库等待事件分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_name": "数据库负载维度分析", "knowledge_description": "数据库负载维度分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用网络流量分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - 解析时间"}], "description": "LwLock等待数量过多，系统存在风险", "rule_name": "lwlock_gsdb", "id": "12240", "rule_expression": "([metric,2820102]>[num,$1]) && ([metric,2829016,total]>[num,$2]*([cib,2830001,dn_nodes]+[cib,2830001,cn_nodes]))", "db_type": "GaussDB", "warning_level": "3", "warning_message": "LwLock等待数量过多（{[metric,2820317]}），系统存在风险"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用网络流量分析"}], "description": "DN节点每秒物理读异常增长，说明应用或者数据库出现了异常", "rule_name": "more_phyiscal_read_dn_gsdb", "id": "12243", "rule_expression": "(([metric,2820114,_dn_total]>[num,$1]) || ([metric ,1000105,2820114-_dn_total][oper,eq][str,3])) && ([metric,2820114,_dn_total]>[num,$2])", "db_type": "GaussDB", "warning_level": "2", "warning_message": "DN节点每秒物理读({[metric,2820114],_dn_total})异常增长，应用或者数据库出现了异常"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "分布式数据库文件系统使用率指标分析"}, {"knowledge_description": "通用文件系统使用率分析"}], "description": "数据文件存储的文件系统存在使用率过高现象", "rule_name": "filesystem_data_usage_gsdb", "id": "14397", "rule_expression": "([metric,1000321,_dn_max]>[num,$1])||([metric,1000321,_cn_max]>[num,$1])", "db_type": "GaussDB", "warning_level": "3", "warning_message": "数据文件存储的文件系统存在使用率过高现象(DN-{[metric,1000321,_dn_max]},CN-{[metric,1000321,_cn_max]})"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB CPU相关指标分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库CPU分析"}, {"knowledge_description": "通用文件系统使用率分析"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "TOP SQL - CPU时间"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - 硬解析数"}, {"knowledge_description": "TOP SQL - 解析时间"}, {"knowledge_description": "TOP SQL - 生成执行计划时间"}], "description": "不同CN节点CPU使用不均衡", "rule_name": "cpu_nobalance_cn_gsdb", "id": "14841", "rule_expression": "(([metric,1001003,cn_min])<[num,30])&&(([metric,1001003,cn_max]/[metric,1001003,cn_min])>[num,$1]))||(([metric,1001003,cn_min])>=[num,30])&&(([metric,1001003,cn_max]/[metric,1001003,cn_min])>[num,$2]))", "db_type": "GaussDB", "warning_level": "2", "warning_message": "不同CN节点CPU使用不均衡"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GasusDB IO相关指标"}, {"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-数据库IO分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL引发IO异常的相关指标分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}], "description": "IO延时严重超标，数据库存在风险", "rule_name": "IO_latency_gsdb_critical", "id": "12237", "rule_expression": "[metric,1001006,max]>[num,$1] && ([metric,1001101,avg]>[num,$2]) ", "db_type": "GaussDB", "warning_level": "4", "warning_message": "IO延时过高，数据库存在风险({[metric,1001006,max]})"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "GaussDB锁等待分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "数据库锁相关指标分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_description": "集群负载分析"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - 执行时间"}], "description": "每秒死锁数过多，系统存在风险", "rule_name": "dead_locks_gsdb", "id": "12238", "rule_expression": "[metric,2820118,total]>[num,$1]", "db_type": "GaussDB", "warning_level": "4", "warning_message": "每秒死锁数过多，系统存在风险(total:{[metric,2820118,total]},cn:{[metric,2820118,_cn_total]},dn:{[metric,2820118,_dn_total]})"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "GaussDB锁等待分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "数据库锁相关指标分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_description": "集群负载分析"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - 执行时间"}], "description": "每秒死锁数过多，系统存在风险", "rule_name": "dead_locks_gsdb", "id": "14846", "rule_expression": "[metric,2820118,total]>[num,$1]", "db_type": "GaussDB", "warning_level": "4", "warning_message": "每秒死锁数过多，系统存在风险(total:{[metric,2820118,total]},cn:{[metric,2820118,_cn_total]},dn:{[metric,2820118,_dn_total]})"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}], "description": "DN节点上SELECT数量异常变化", "rule_name": "more_select_dn_gsdb", "id": "14427", "rule_expression": "(([metric,2823151,_dn_total]>[num,$1]) || ([metric ,1000105,2823151-_dn_total][oper,eq][str,3])) && ([metric,2823151,_dn_total]>[num,$2])", "db_type": "GaussDB", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}], "description": "DN节点上DML数量异常变化", "rule_name": "more_dml_dn_gsdb", "id": "14431", "rule_expression": "(([metric,2823156,_dn_total]>[num,$1]) || ([metric ,1000105,2823156-_dn_total][oper,eq][str,3])) && ([metric,2823156,_dn_total]>[num,$2])", "db_type": "GaussDB", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_description": "TOP SQL - 执行次数"}], "description": "CN节点上DML数量异常变化", "rule_name": "more_dml_cn_gsdb", "id": "14433", "rule_expression": "(([metric,2823156,_cn_total]>[num,$1]) || ([metric ,1000105,2823156-_cn_total][oper,eq][str,3])) && ([metric,2823156,_cn_total]>[num,$2])", "db_type": "GaussDB", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用文件系统使用率分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用网络流量分析"}], "description": "数据库集群RTO过高", "rule_name": "rto_risk_gsdb", "id": "14395", "rule_expression": "[metric,2823114,_dn_max]>[num,$1]", "db_type": "GaussDB", "warning_level": "4", "warning_message": "数据库集群RTO过高({[metric,2823114,_dn_max]})"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "集群内存分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB内存方面指标异常分析"}, {"knowledge_description": "集群内存过载分析"}, {"knowledge_description": "集群会话的内存占用情况"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库内存分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - 解析时间"}], "description": "CN节点的内存使用率不均衡", "rule_name": "mem_nobalance_cn_gsdb", "id": "14401", "rule_expression": "(([metric,1001004,cn_min])<[num,50])&&(([metric,1001004,cn_max]/[metric,1001004,cn_min])>[num,$1]))||(([metric,1001004,cn_min])>=[num,50])&&(([metric,1001004,cn_max]/[metric,1001004,cn_min])>[num,$2]))", "db_type": "GaussDB", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_description": "TOP SQL - 执行次数"}], "description": "CN节点上SELECT数量异常变化", "rule_name": "more_select_cn_gsdb", "id": "14429", "rule_expression": "(([metric,2823151,_cn_total]>[num,$1]) || ([metric ,1000105,2823151-_cn_total][oper,eq][str,3])) && ([metric,2823151,_cn_total]>[num,$2])", "db_type": "GaussDB", "warning_level": "2", "warning_message": "CN节点上SELECT数量异常变化"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GasusDB IO相关指标"}, {"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-数据库IO分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL引发IO异常的相关指标分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}], "description": "IO延时严重超标，数据库存在风险", "rule_name": "IO_latency_gsdb_critical", "id": "14606", "rule_expression": "[metric,1001006,max]>[num,$1] && ([metric,1001101,avg]>[num,$2]) ", "db_type": "GaussDB", "warning_level": "4", "warning_message": "IO延时过高，数据库存在风险({[metric,1001006,max]})"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用文件系统使用率分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用网络流量分析"}], "description": "数据库集群RTO过高", "rule_name": "rto_risk_gsdb", "id": "14628", "rule_expression": "[metric,2823114,_dn_max]>[num,$1]", "db_type": "GaussDB", "warning_level": "4", "warning_message": "数据库集群RTO过高({[metric,2823114,_dn_max]})"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "集群内存分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB内存方面指标异常分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - 解析时间"}], "description": "DN节点服务器内存使用不均衡", "rule_name": "mem_nobalance_dn_gsdb", "id": "14986", "rule_expression": "(([metric,1001004,dn_min])<[num,50])&&(([metric,1001004,dn_max]/[metric,1001004,dn_min])>[num,$1]))||(([metric,1001004,dn_min])>=[num,50])&&(([metric,1001004,dn_max]/[metric,1001004,dn_min])>[num,$2]))", "db_type": "GaussDB", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "数据库连接失败分析", "knowledge_description": "数据库连接失败分析"}], "description": "KYD连接PG数据库的用户密码错误", "rule_name": "dsmart_logon_failed_gsdb", "id": "14849", "rule_expression": "[metric,1000000][oper,contains][str,password authentication failed]", "db_type": "GaussDB", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_description": "TOP SQL - 执行次数"}], "description": "CN节点上SELECT数量异常变化", "rule_name": "more_select_cn_gsdb", "id": "14728", "rule_expression": "(([metric,2823151,_cn_total]>[num,$1]) || ([metric ,1000105,2823151-_cn_total][oper,eq][str,3])) && ([metric,2823151,_cn_total]>[num,$2])", "db_type": "GaussDB", "warning_level": "2", "warning_message": "CN节点上SELECT数量异常变化"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_description": "GaussDB锁等待分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "数据库锁相关指标分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "TOP SQL - CPU时间"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - 硬解析数"}, {"knowledge_description": "TOP SQL - 生成执行计划时间"}], "description": "集中式模式下阻塞或者等待会话数量过多，数据库性能存在风险", "rule_name": "block_session_dn_gsdb", "id": "14949", "rule_expression": "([metric,2820103]>([num,$1])*[cib,2830002,_dn_cpu_total]))", "db_type": "GaussDB", "warning_level": "3", "warning_message": "集中式模式下阻塞或者等待会话数量过多，数据库性能存在风险（{[metric,2820103]}）"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库CPU分析"}, {"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-数据库IO分析"}, {"knowledge_description": "GaussDB锁等待分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "数据库锁相关指标分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用文件系统使用率分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用网络流量分析"}], "description": "数据库连接严重超时，数据库存在巨大风险", "rule_name": "connect_slow_gsdb", "id": "12245", "rule_expression": "[metric,1000102] >([metric hour avg,1000102]*[num,$1]) && ([metric,1000102] >[num,$2])", "db_type": "GaussDB", "warning_level": "4", "warning_message": "数据库连接严重超时，数据库存在巨大风险（{[metric,1000102}}"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "Top SQL-按物理写排序", "knowledge_description": "Top SQL-按物理写排序"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}], "description": "Backend写脏块比例过高，系统性能存在问题", "rule_name": "Pagewriter_flush_gsdb", "id": "14996", "rule_expression": " [metric,2829015,min]<[num,$1]", "db_type": "GaussDB", "warning_level": "2"}}
{"type": "rule", "data": {"description": "CN或者DN节点的总DB_TIME异常", "rule_name": "abnormal_db_time_gsdb", "id": "14439", "rule_expression": "([metric ,1000105,2823139-_cn_total][oper,eq][str,3])) && ([metric,2823139,_cn_total]>[num,$1])||([metric ,1000105,2823139-_dn_total][oper,eq][str,3])) && ([metric,2823139,_dn_total]>[num,$2])", "db_type": "GaussDB", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "数据库连接失败分析", "knowledge_description": "数据库连接失败分析"}, {"knowledge_description": "通用网络流量分析"}], "description": "数据库未知连接错误", "rule_name": "unkown_connect_failed_gsdb", "id": "12242", "rule_expression": "[metric,1000000][oper,notcontains][str,Check that the hostname and port are correct] && [metric,1000000][oper,notcontains][str,does not exist] && [metric,1000000][oper,notcontains][str,connection attempt failed] && [metric,1000000][oper,notcontains][str,password authentication failed] && [metric,1000000][oper,notcontains][str,not permitted to log in] && [metric,1000000][oper,notcontains][str,SQL执行失败] && [metric,1000000][oper,neq][str,连接成功]", "db_type": "GaussDB", "warning_level": "4", "warning_message": "pg数据库未知连接错误：{[metric,1000000]}"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}], "description": "数据库DN中的DML比例异常（集中式专用）", "rule_name": "abnormal_dml_ratio_dn_gsdb", "id": "14437", "rule_expression": "(([metric,2829018,_dn_total]>[num,$1]) || ([metric ,1000105,2829018-_dn_total][oper,eq][str,3])) && ([metric,2829018,_dn_total]>[num,$2])", "db_type": "GaussDB", "warning_level": "2", "warning_message": "数据库DN中的DML比例异常({[metric,2829018,_dn_total]})(集中式专用)"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "TOP 慢查询"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - CPU时间"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_description": "GaussDB锁等待分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "数据库锁相关指标分析"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用网络流量分析"}], "description": "可能是慢SQL过多而导致的活跃会话数过高", "rule_name": "active_session_slow_sql_gsdb", "id": "13998", "rule_expression": "(([metric,2820102] >([num,$1]*[cib,2830002,_cn_cpu_total]))||([metric,2820102] >([num,$2]*[cib,2830002,_dn_cpu_total])))&&(([metric,2820158] >([num,$3]*[cib,2830002,_cn_cpu_total]))||([metric,2820158] >([num,$4]*[cib,2830002,_dn_cpu_total])))", "db_type": "GaussDB", "warning_level": "2", "warning_message": "可能是慢SQL过多而导致的活跃会话数过高，慢sql数量{[metric,2820158]},活跃会话数{[metric,2820102]}"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用文件系统使用率分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用网络流量分析"}], "description": "数据库集群RTO过高", "rule_name": "rto_risk_gsdb", "id": "14733", "rule_expression": "[metric,2823114,_dn_max]>[num,$1]", "db_type": "GaussDB", "warning_level": "4", "warning_message": "数据库集群RTO过高({[metric,2823114,_dn_max]})"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_name": "数据库负载维度分析", "knowledge_description": "数据库负载维度分析"}, {"knowledge_description": "GaussDB长事务分析"}, {"knowledge_description": "GaussDB锁等待分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "数据库锁相关指标分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}], "description": "回滚比例过高，数据库存在问题", "rule_name": "rollback_high_gsdb", "id": "14732", "rule_expression": "([metric,2829010,max])>[num,$1])&&([metric,2820117,total])>[num,$2])", "db_type": "GaussDB", "warning_level": "3", "warning_message": "回滚比例过高，数据库存在问题（{[metric,2829010,max]}）"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "集群会话分析"}, {"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-数据库活跃会话数分析"}, {"knowledge_description": "集群会话的内存占用情况"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用内存使用情况分析"}], "description": "线程池使用率过高，系统存在风险", "rule_name": "session_exceed_gsdb", "id": "14734", "rule_expression": "([metric,2823209,_cn_max]>[num,$1] )||([metric,2823209,_dn_max]>[num,$2])", "db_type": "GaussDB", "warning_level": "4", "warning_message": "线程池使用率过高，系统存在风险（CN:{[metric,2823209,_cn_max]},DN:{[metric,2823209,_dn_max]})"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GasusDB IO相关指标"}, {"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-数据库IO分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "通用IO分析"}], "description": "可能因为IO异常缓慢而导致活跃会话数过高", "rule_name": "active_session_ioslow_gsdb", "id": "14001", "rule_expression": "(([metric,2820102] >([num,$1]*[cib,2830002,_cn_cpu_total]))||([metric,2820102] >([num,$2]*[cib,2830002,_dn_cpu_total])))&&([metric,1001006,max] >[num,$3])", "db_type": "GaussDB", "warning_level": "2", "warning_message": "可能因为IO异常缓慢而导致活跃会话数过高，当前活跃会话数{[metric,2820102]},IO延时{[metric,1001006,max]}"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "Top SQL-按临时读写排序", "knowledge_description": "Top SQL-按临时读写排序"}, {"knowledge_description": "检查temp_buffers参数"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}], "description": "检测到临时文件使用量过多", "rule_name": "tmp_files_gsdb", "id": "12223", "rule_expression": "[metric,2820001]>[num,$1] &&( [metric,2820125,total]>([num,$2]*([cib,2830001,cn_nodes]+[cib,2830001,dn_nodes])))", "db_type": "GaussDB", "warning_level": "2", "warning_message": "检测到临时文件使用量过多({[metric,2820125,total]})"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "集群CN系统表一致性检查"}, {"knowledge_description": "集群状态检查"}], "description": "CN节点系统表存在不一致现象，相同存在严重问题", "rule_name": "systable_consistence_gsdb", "id": "14636", "rule_expression": "[metric,2823328]<[num,$1]", "db_type": "GaussDB", "warning_level": "4", "warning_message": "CN节点系统表存在不一致现象，相同存在严重问题"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "集群状态检查"}], "description": "存在异常GTM节点", "rule_name": "abnormal_gtm_gsdb", "id": "14682", "rule_expression": "[metric,2823304]>=[num,$1]", "db_type": "GaussDB", "warning_level": "3", "warning_message": "存在异常GTM节点，请尽快确认是否存在问题(故障GTM节点数{[metric,2823303]})"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "正确配置archive_command命令", "knowledge_description": "分析数据库WAL日志归档失败"}, {"knowledge_description": "通用文件系统使用率分析"}], "description": "发生未成功归档现象", "rule_name": "failed_archive_pg", "id": "14159", "rule_expression": "[cib,2220002,archive_mode][oper,eq][str,on] && [metric,2820142]>[num,$1]", "db_type": "GaussDB", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB CPU相关指标分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库CPU分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - CPU时间"}, {"knowledge_description": "TOP SQL - 生成执行计划时间"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用网络流量分析"}], "description": "活跃会话数超过CPU数量，数据库可能存在性能风险", "rule_name": "active_session_gsdb_error", "id": "14579", "rule_expression": "([metric,2820102,_cn_total]>([num,$1]*[cib,2830001,cn_cpu_total] ))||([metric,2820102,_dn_total]>([num,$1]*[cib,2830001,dn_cpu_total] ))", "db_type": "GaussDB", "warning_level": "3", "warning_message": "高斯集群的活跃会话数过多，超过计算节点的CPU线程数数倍，数据库可能存在风险（计算节点总活跃会话数{[metric,2820102,_cn_total]}/{[metric,2820102,_dn_total]}）"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB CPU相关指标分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库CPU分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - CPU时间"}, {"knowledge_description": "TOP SQL - 生成执行计划时间"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用网络流量分析"}], "description": "活跃会话数超过CPU数量，数据库可能存在性能风险", "rule_name": "active_session_gsdb_error", "id": "14942", "rule_expression": "([metric,2820102,_cn_total]>([num,$1]*[cib,2830001,cn_cpu_total] ))||([metric,2820102,_dn_total]>([num,$1]*[cib,2830001,dn_cpu_total] ))", "db_type": "GaussDB", "warning_level": "3", "warning_message": "高斯集群的活跃会话数过多，超过计算节点的CPU线程数数倍，数据库可能存在风险（计算节点总活跃会话数{[metric,2820102,_cn_total]}/{[metric,2820102,_dn_total]}）"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB CPU相关指标分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_description": "TOP SQL - CPU时间"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - 硬解析数"}, {"knowledge_description": "TOP SQL - 生成执行计划时间"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用网络流量分析"}], "description": "活跃会话数超过CPU线程数数倍，数据库可能存在风险", "rule_name": "active_session_gsdb_fatal", "id": "14943", "rule_expression": "([metric,2820102,_cn_total]>([num,$1]*[cib,2830001,cn_cpu_total] ))||([metric,2820102,_dn_total]>([num,$1]*[cib,2830001,dn_cpu_total] ))", "db_type": "GaussDB", "warning_level": "4", "warning_message": "高斯集群的活跃会话数过多，超过计算节点的CPU线程数数倍，数据库可能存在风险（计算节点总活跃会话数{[metric,2820102,_cn_total]}/{[metric,2820102,_dn_total]}）"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB CPU相关指标分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_description": "TOP SQL - CPU时间"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - 硬解析数"}, {"knowledge_description": "TOP SQL - 生成执行计划时间"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用网络流量分析"}], "description": "活跃会话数超过CPU线程数数倍，数据库可能存在风险", "rule_name": "active_session_gsdb_fatal", "id": "14580", "rule_expression": "([metric,2820102,_cn_total]>([num,$1]*[cib,2830001,cn_cpu_total] ))||([metric,2820102,_dn_total]>([num,$1]*[cib,2830001,dn_cpu_total] ))", "db_type": "GaussDB", "warning_level": "4", "warning_message": "高斯集群的活跃会话数过多，超过计算节点的CPU线程数数倍，数据库可能存在风险（计算节点总活跃会话数{[metric,2820102,_cn_total]}/{[metric,2820102,_dn_total]}）"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB CPU相关指标分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_description": "TOP SQL - CPU时间"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - 硬解析数"}, {"knowledge_description": "TOP SQL - 生成执行计划时间"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用网络流量分析"}], "description": "活跃会话数超过CPU线程数数倍，数据库可能存在风险", "rule_name": "active_session_gsdb_fatal", "id": "14685", "rule_expression": "([metric,2820102,_cn_total]>([num,$1]*[cib,2830001,cn_cpu_total] ))||([metric,2820102,_dn_total]>([num,$1]*[cib,2830001,dn_cpu_total] ))", "db_type": "GaussDB", "warning_level": "4", "warning_message": "高斯集群的活跃会话数过多，超过计算节点的CPU线程数数倍，数据库可能存在风险（计算节点总活跃会话数{[metric,2820102,_cn_total]}/{[metric,2820102,_dn_total]}）"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GasusDB IO相关指标"}, {"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-数据库IO分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "通用IO分析"}], "description": "可能因为IO异常缓慢而导致活跃会话数过高", "rule_name": "active_session_ioslow_gsdb", "id": "14687", "rule_expression": "(([metric,2820102] >([num,$1]*[cib,2830002,_cn_cpu_total]))||([metric,2820102] >([num,$2]*[cib,2830002,_dn_cpu_total])))&&([metric,1001006,max] >[num,$3])", "db_type": "GaussDB", "warning_level": "2", "warning_message": "可能因为IO异常缓慢而导致活跃会话数过高，当前活跃会话数{[metric,2820102]},IO延时{[metric,1001006,max]}"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "TOP 慢查询"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - CPU时间"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_description": "GaussDB锁等待分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "数据库锁相关指标分析"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用网络流量分析"}], "description": "可能是慢SQL过多而导致的活跃会话数过高", "rule_name": "active_session_slow_sql_gsdb", "id": "14833", "rule_expression": "(([metric,2820102] >([num,$1]*[cib,2830002,_cn_cpu_total]))||([metric,2820102] >([num,$2]*[cib,2830002,_dn_cpu_total])))&&(([metric,2820158] >([num,$3]*[cib,2830002,_cn_cpu_total]))||([metric,2820158] >([num,$4]*[cib,2830002,_dn_cpu_total])))", "db_type": "GaussDB", "warning_level": "2", "warning_message": "可能是慢SQL过多而导致的活跃会话数过高，慢sql数量{[metric,2820158]},活跃会话数{[metric,2820102]}"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用文件系统使用率分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用网络流量分析"}], "description": "数据库采集任务严重超时，数据库存在严重性能风险", "rule_name": "collector_exec_slow_gsdb", "id": "14692", "rule_expression": "[metric,1000101] >([metric hour avg,1000101]*[num,$1])", "db_type": "GaussDB", "warning_level": "4", "warning_message": "数据库采集任务严重超时，数据库存在严重性能风险(采集延时{[metric,1000101] })"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB CPU相关指标分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库CPU分析"}, {"knowledge_description": "通用文件系统使用率分析"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "TOP SQL - CPU时间"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - 硬解析数"}, {"knowledge_description": "TOP SQL - 解析时间"}, {"knowledge_description": "TOP SQL - 生成执行计划时间"}], "description": "不同CN节点CPU使用不均衡", "rule_name": "cpu_nobalance_cn_gsdb", "id": "14345", "rule_expression": "(([metric,1001003,cn_min])<[num,30])&&(([metric,1001003,cn_max]/[metric,1001003,cn_min])>[num,$1]))||(([metric,1001003,cn_min])>=[num,30])&&(([metric,1001003,cn_max]/[metric,1001003,cn_min])>[num,$2]))", "db_type": "GaussDB", "warning_level": "2", "warning_message": "不同CN节点CPU使用不均衡"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "集群负载分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_description": "GaussDB锁等待分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "数据库锁相关指标分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - CPU时间"}, {"knowledge_description": "TOP SQL - 硬解析数"}, {"knowledge_description": "TOP SQL - 解析时间"}, {"knowledge_description": "TOP SQL - 生成执行计划时间"}], "description": "分布式模式下阻塞或者等待会话数量过多，数据库性能存在风险", "rule_name": "block_session_cn_gsdb", "id": "14423", "rule_expression": "([metric,2820103]>([num,$1])*[cib,2830002,_cn_cpu_total]))", "db_type": "GaussDB", "warning_level": "3", "warning_message": "分布式模式下阻塞或者等待会话数量过多，数据库性能存在风险（{[metric,2820103]}）"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "集群负载分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_description": "GaussDB锁等待分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "数据库锁相关指标分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - CPU时间"}, {"knowledge_description": "TOP SQL - 硬解析数"}, {"knowledge_description": "TOP SQL - 解析时间"}, {"knowledge_description": "TOP SQL - 生成执行计划时间"}], "description": "分布式模式下阻塞或者等待会话数量过多，数据库性能存在风险", "rule_name": "block_session_cn_gsdb", "id": "14835", "rule_expression": "([metric,2820103]>([num,$1])*[cib,2830002,_cn_cpu_total]))", "db_type": "GaussDB", "warning_level": "3", "warning_message": "分布式模式下阻塞或者等待会话数量过多，数据库性能存在风险（{[metric,2820103]}）"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "集群负载分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_description": "GaussDB锁等待分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "数据库锁相关指标分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - CPU时间"}, {"knowledge_description": "TOP SQL - 硬解析数"}, {"knowledge_description": "TOP SQL - 解析时间"}, {"knowledge_description": "TOP SQL - 生成执行计划时间"}], "description": "分布式模式下阻塞或者等待会话数量过多，数据库性能存在风险", "rule_name": "block_session_cn_gsdb", "id": "14584", "rule_expression": "([metric,2820103]>([num,$1])*[cib,2830002,_cn_cpu_total]))", "db_type": "GaussDB", "warning_level": "3", "warning_message": "分布式模式下阻塞或者等待会话数量过多，数据库性能存在风险（{[metric,2820103]}）"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_description": "集群负载分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_description": "GaussDB锁等待分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "数据库锁相关指标分析"}, {"knowledge_description": "TOP SQL - 执行时间"}], "description": "共享缓冲区命中率不理想", "rule_name": "buffer_cache_suboptimal_gsdb", "id": "14586", "rule_expression": "[metric,2820112]<[num,$1] && [metric,2820113,total]>[num,$2]", "db_type": "GaussDB", "warning_level": "2", "warning_message": "共享缓冲区命中率不理想,数据库性能存在问题。（共享池命中率{[metric,2820112]}]"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_description": "集群负载分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_description": "GaussDB锁等待分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "数据库锁相关指标分析"}, {"knowledge_description": "TOP SQL - 执行时间"}], "description": "共享缓冲区命中率不理想", "rule_name": "buffer_cache_suboptimal_gsdb", "id": "14691", "rule_expression": "[metric,2820112]<[num,$1] && [metric,2820113,total]>[num,$2]", "db_type": "GaussDB", "warning_level": "2", "warning_message": "共享缓冲区命中率不理想,数据库性能存在问题。（共享池命中率{[metric,2820112]}]"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB CPU相关指标分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass 引发CPU异常的SQL相关指标分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库CPU分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "TOP SQL - CPU时间"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - 硬解析数"}, {"knowledge_description": "TOP SQL - 解析时间"}, {"knowledge_description": "TOP SQL - 生成执行计划时间"}], "description": "服务器CPU快速上升或者急剧波动", "rule_name": "cpu_rise_gsdb", "id": "14696", "rule_expression": "([metric,1000105,1001003-avg] [oper,eq] [str,3])||([metric,1000105,1001003-avg] [oper,eq] [str,5])", "db_type": "GaussDB", "warning_level": "2", "warning_message": "服务器CPU快速上升或者急剧波动"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "正确配置archive_command命令", "knowledge_description": "分析数据库WAL日志归档失败"}, {"knowledge_description": "通用文件系统使用率分析"}], "description": "发生未成功归档现象", "rule_name": "failed_archive_pg", "id": "14225", "rule_expression": "[cib,2220002,archive_mode][oper,eq][str,on] && [metric,2820142]>[num,$1]", "db_type": "GaussDB", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "TOP SQL - 硬解析数"}, {"knowledge_description": "TOP SQL - 解析时间"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_description": "通用CPU使用情况分析"}], "description": "DN节点每秒硬解析数量过多，数据库性能存在风险", "rule_name": "hard_parse_dn_gsdb", "id": "14973", "rule_expression": "([metric,2823167,_dn_total])>([num,$1])*[cib,2830002,_dn_cpu_total])", "db_type": "GaussDB", "warning_level": "2", "warning_message": "DN节点每秒硬解析数量过多（{[metric,2823167,_dn_total]}），数据库性能存在风险"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GasusDB IO相关指标"}, {"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-数据库IO分析"}, {"knowledge_name": "数据库物理读IO分析", "knowledge_description": "数据库物理读IO分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}], "description": "不同服务器的IO延时差异较大，系统性能存在风险", "rule_name": "IO_LATENCY_nobalance_gsdb", "id": "14379", "rule_expression": "(([metric,1001006,min])<[num,5])&&(([metric,1001006,max]/[metric,1001006,min])>[num,$1]))||(([metric,1001006,min])>[num,8])&&(([metric,1001006,max]/[metric,1001006,min])>[num,$2]))", "db_type": "GaussDB", "warning_level": "2", "warning_message": "各组件的IO延时差异较大，系统性能存在风险（max{[metric,1001006,max]},min{[metric,1001006,min]}）"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GasusDB IO相关指标"}, {"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-数据库IO分析"}, {"knowledge_name": "数据库物理读IO分析", "knowledge_description": "数据库物理读IO分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}], "description": "不同服务器的IO延时差异较大，系统性能存在风险", "rule_name": "IO_LATENCY_nobalance_gsdb", "id": "14608", "rule_expression": "(([metric,1001006,min])<[num,5])&&(([metric,1001006,max]/[metric,1001006,min])>[num,$1]))||(([metric,1001006,min])>[num,8])&&(([metric,1001006,max]/[metric,1001006,min])>[num,$2]))", "db_type": "GaussDB", "warning_level": "2", "warning_message": "各组件的IO延时差异较大，系统性能存在风险（max{[metric,1001006,max]},min{[metric,1001006,min]}）"}}
{"type": "rule", "data": {"description": "CN节点每秒逻辑读异常，说明应用或者数据库出现了异常", "rule_name": "more_logic_read_cn_gsdb", "id": "14877", "rule_expression": "(([metric,2820113,_cn_total]>[num,$1]) || ([metric ,1000105,2820113-_cn_total][oper,eq][str,3])) && ([metric,2820113,_cn_total]>[num,$2])", "db_type": "GaussDB", "warning_level": "2", "warning_message": "CN节点每秒逻辑读异常增加，说明应用或者数据库出现了异常，当前每秒逻辑读{[metric,2820113,_cn_total]}"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "PostgreSQL长事务分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_description": "GaussDB锁等待分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "数据库锁相关指标分析"}, {"knowledge_description": "TOP SQL - 执行次数"}], "description": "如果事务提交比例低于历史平均水平的50%，系统可能存在隐患", "rule_name": "transaction_commit_ratio_low_gsdb", "id": "14897", "rule_expression": "[metric,2820108] < [metric hour avg,2820108]*[num,$1]", "db_type": "GaussDB", "warning_level": "3", "warning_message": "事务提交比例({[metric,2820108]})低于小时平均水平的50%，系统可能存在隐患"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "数据库连接失败分析", "knowledge_description": "数据库连接失败分析"}, {"knowledge_description": "通用网络流量分析"}], "description": "数据库未知连接错误", "rule_name": "unkown_connect_failed_gsdb", "id": "14898", "rule_expression": "[metric,1000000][oper,notcontains][str,Check that the hostname and port are correct] && [metric,1000000][oper,notcontains][str,does not exist] && [metric,1000000][oper,notcontains][str,connection attempt failed] && [metric,1000000][oper,notcontains][str,password authentication failed] && [metric,1000000][oper,notcontains][str,not permitted to log in] && [metric,1000000][oper,notcontains][str,SQL执行失败] && [metric,1000000][oper,neq][str,连接成功]", "db_type": "GaussDB", "warning_level": "4", "warning_message": "pg数据库未知连接错误：{[metric,1000000]}"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GasusDB IO相关指标"}, {"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-数据库IO分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL引发IO异常的相关指标分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}], "description": "IO延时严重超标，数据库存在风险", "rule_name": "IO_latency_gsdb_critical", "id": "14975", "rule_expression": "[metric,1001006,max]>[num,$1] && ([metric,1001101,avg]>[num,$2]) ", "db_type": "GaussDB", "warning_level": "4", "warning_message": "IO延时过高，数据库存在风险({[metric,1001006,max]})"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "TOP 慢查询"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_description": "GaussDB锁等待分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "数据库锁相关指标分析"}, {"knowledge_description": "TOP SQL - CPU时间"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行器内执行时间"}, {"knowledge_description": "TOP SQL - 生成执行计划时间"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用文件系统使用率分析"}, {"knowledge_description": "通用内存使用情况分析"}], "description": "95分位SQL响应时间急剧上升，数据库性能存在风险", "rule_name": "95SQL_gsdb", "id": "14818", "rule_expression": "(([metric,1000105,2823208] [oper,eq] [str,3]))&&([metric,2823208]>[num,$1] )", "db_type": "GaussDB", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB CPU相关指标分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass 引发CPU异常的SQL相关指标分析"}, {"knowledge_description": "集群负载分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_description": "TOP SQL - CPU时间"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用网络流量分析"}], "description": "长时间运行的查询数超出CPU线程数的一半，系统存在较大风险", "rule_name": "long_sql_over_cpu_gsdb", "id": "14868", "rule_expression": "([metric,2820158] >([num,$1]*[cib,2830002,_cn_cpu_total]))||([metric,2820158] >([num,$2]*[cib,2830002,_dn_cpu_total]))", "db_type": "GaussDB", "warning_level": "3", "warning_message": "长时间运行的查询数超出CPU线程数的一半，系统存在较大风险({[metric,2820158] })"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB CPU相关指标分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass 引发CPU异常的SQL相关指标分析"}, {"knowledge_description": "集群负载分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_description": "TOP SQL - CPU时间"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用网络流量分析"}], "description": "长时间运行的查询数超出CPU线程数的一半，系统存在较大风险", "rule_name": "long_sql_over_cpu_gsdb", "id": "14717", "rule_expression": "([metric,2820158] >([num,$1]*[cib,2830002,_cn_cpu_total]))||([metric,2820158] >([num,$2]*[cib,2830002,_dn_cpu_total]))", "db_type": "GaussDB", "warning_level": "3", "warning_message": "长时间运行的查询数超出CPU线程数的一半，系统存在较大风险({[metric,2820158] })"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GasusDB IO相关指标"}, {"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-数据库IO分析"}, {"knowledge_name": "数据库物理读IO分析", "knowledge_description": "数据库物理读IO分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}], "description": "不同服务器的IO延时差异较大，系统性能存在风险", "rule_name": "IO_LATENCY_nobalance_gsdb", "id": "14864", "rule_expression": "(([metric,1001006,min])<[num,5])&&(([metric,1001006,max]/[metric,1001006,min])>[num,$1]))||(([metric,1001006,min])>[num,8])&&(([metric,1001006,max]/[metric,1001006,min])>[num,$2]))", "db_type": "GaussDB", "warning_level": "2", "warning_message": "各组件的IO延时差异较大，系统性能存在风险（max{[metric,1001006,max]},min{[metric,1001006,min]}）"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GasusDB IO相关指标"}, {"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-数据库IO分析"}, {"knowledge_name": "数据库物理读IO分析", "knowledge_description": "数据库物理读IO分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}], "description": "不同服务器的IO延时差异较大，系统性能存在风险", "rule_name": "IO_LATENCY_nobalance_gsdb", "id": "14713", "rule_expression": "(([metric,1001006,min])<[num,5])&&(([metric,1001006,max]/[metric,1001006,min])>[num,$1]))||(([metric,1001006,min])>[num,8])&&(([metric,1001006,max]/[metric,1001006,min])>[num,$2]))", "db_type": "GaussDB", "warning_level": "2", "warning_message": "各组件的IO延时差异较大，系统性能存在风险（max{[metric,1001006,max]},min{[metric,1001006,min]}）"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_description": "GaussDB锁等待分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "数据库锁相关指标分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用IO分析"}], "description": "锁过度竞争，可能会影响数据库性能", "rule_name": "lock_contenion_gsdb", "id": "14866", "rule_expression": "([metric,2823313,_cn_total]>[num,$1])||([metric,2823313,_dn_total]>[num,$2])", "db_type": "GaussDB", "warning_level": "2", "warning_message": "锁过度竞争，可能会影响数据库性能（CN:{[metric,2823313,_cn_total]},DN:{[metric,2823313,_dn_total]})"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB CPU相关指标分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass 引发CPU异常的SQL相关指标分析"}, {"knowledge_description": "集群负载分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_description": "TOP SQL - CPU时间"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用网络流量分析"}], "description": "长时间运行的查询数超出CPU线程数的一半，系统存在较大风险", "rule_name": "long_sql_over_cpu_gsdb", "id": "12215", "rule_expression": "([metric,2820158] >([num,$1]*[cib,2830002,_cn_cpu_total]))||([metric,2820158] >([num,$2]*[cib,2830002,_dn_cpu_total]))", "db_type": "GaussDB", "warning_level": "3", "warning_message": "长时间运行的查询数超出CPU线程数的一半，系统存在较大风险({[metric,2820158] })"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "集群状态检查"}, {"knowledge_description": "通用文件系统使用率分析"}, {"knowledge_description": "通用网络流量分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用IO分析"}], "description": "存在异常CN节点", "rule_name": "abnormal_cn_gsdb", "id": "14819", "rule_expression": "[metric,2823304]>=[num,$1]", "db_type": "GaussDB", "warning_level": "3", "warning_message": "存在异常CN节点，请尽快确认是否存在问题(故障CN节点数{[metric,2823302]})"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用网络流量分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - CPU时间"}], "description": "80分位的SQL响应时间异常增长", "rule_name": "80SQL_gsdb", "id": "14817", "rule_expression": "(([metric,1000105,2823207] [oper,eq] [str,3]))&&([metric,2823207]>[num,$1] )", "db_type": "GaussDB", "warning_level": "2", "warning_message": "80分位的SQL响应时间异常增长"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}], "description": "数据库DN中的DML比例异常（集中式专用）", "rule_name": "abnormal_dml_ratio_dn_gsdb", "id": "14823", "rule_expression": "(([metric,2829018,_dn_total]>[num,$1]) || ([metric ,1000105,2829018-_dn_total][oper,eq][str,3])) && ([metric,2829018,_dn_total]>[num,$2])", "db_type": "GaussDB", "warning_level": "2", "warning_message": "数据库DN中的DML比例异常({[metric,2829018,_dn_total]})(集中式专用)"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_description": "TOP SQL - 执行次数"}], "description": "数据库CN中的DML比例异常（分布式专用）", "rule_name": "abnormal_dml_ratio_cn_gsdb", "id": "14822", "rule_expression": "(([metric,2829018,_cn_total]>[num,$1]) || ([metric ,1000105,2829018-_cn_total][oper,eq][str,3])) && ([metric,2829018,_cn_total]>[num,$2])", "db_type": "GaussDB", "warning_level": "2", "warning_message": "数据库CN中的DML比例异常（{[metric,2829018,_cn_total]}）(分布式专用)"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "集群负载分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "通用文件系统使用率分析"}], "description": "每秒WAL产生量过大，数据库性能存在风险", "rule_name": "wal_more_size_gsdb", "id": "14899", "rule_expression": "([metric,2823034,_dn_total]>([num,$1]*[cib,2830001,dn_nodes]))&&([metric,2820334,IO_EVENT WALWrite]>[num,$2])", "db_type": "GaussDB", "warning_level": "2", "warning_message": "每秒WAL产生量过大，数据库性能存在风险,每秒DN产生WAL的块数为{[metric,2823034,_dn_total]}，WAL写入平均等待延时为{[metric,2820334,IO_EVENT WALWrite]}"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_description": "GaussDB锁等待分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "数据库锁相关指标分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "TOP SQL - CPU时间"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - 硬解析数"}, {"knowledge_description": "TOP SQL - 生成执行计划时间"}], "description": "集中式模式下阻塞或者等待会话数量过多，数据库性能存在风险", "rule_name": "block_session_dn_gsdb", "id": "14836", "rule_expression": "([metric,2820103]>([num,$1])*[cib,2830002,_dn_cpu_total]))", "db_type": "GaussDB", "warning_level": "3", "warning_message": "集中式模式下阻塞或者等待会话数量过多，数据库性能存在风险（{[metric,2820103]}）"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "数据库连接失败分析", "knowledge_description": "数据库连接失败分析"}, {"knowledge_description": "通用网络流量分析"}], "description": "数据库未知连接错误", "rule_name": "unkown_connect_failed_gsdb", "id": "14640", "rule_expression": "[metric,1000000][oper,notcontains][str,Check that the hostname and port are correct] && [metric,1000000][oper,notcontains][str,does not exist] && [metric,1000000][oper,notcontains][str,connection attempt failed] && [metric,1000000][oper,notcontains][str,password authentication failed] && [metric,1000000][oper,notcontains][str,not permitted to log in] && [metric,1000000][oper,notcontains][str,SQL执行失败] && [metric,1000000][oper,neq][str,连接成功]", "db_type": "GaussDB", "warning_level": "4", "warning_message": "pg数据库未知连接错误：{[metric,1000000]}"}}
{"type": "rule", "data": {"description": "CMSERVER发生过切换", "rule_name": "switchover_cmserver_gsdb", "id": "14736", "rule_expression": "[metric,2823317]>[num,0]", "db_type": "GaussDB", "warning_level": "4"}}
{"type": "rule", "data": {"description": "CN发生过切换", "rule_name": "switchover_cn_gsdb", "id": "14737", "rule_expression": "[metric,2823319]>[num,0]", "db_type": "GaussDB", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "死元组达到清理要求未清理的分析", "knowledge_description": "死元组达到清理要求未清理的分析"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}], "description": "存在死元组比例较大的大表", "rule_name": "dead_tuple_not_cleanup_gsdb", "id": "14847", "rule_expression": "[metric,2823341,_dn_total]>[num,$1] ", "db_type": "GaussDB", "warning_level": "2", "warning_message": "存在死元组数到达清理阈值而未清理的表（{[metric,2823341,_dn_total]}），会造成空间浪费和性能问题"}}
{"type": "rule", "data": {"description": "DN节点发生过切换", "rule_name": "switchover_dn_gsdb", "id": "14738", "rule_expression": "[metric,2823320]>[num,0]", "db_type": "GaussDB", "warning_level": "4"}}
{"type": "rule", "data": {"description": "ETCD发生过切换", "rule_name": "switchover_etcd_gsdb", "id": "14739", "rule_expression": "[metric,2823318]>[num,0]", "db_type": "GaussDB", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "集群负载分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "通用文件系统使用率分析"}], "description": "每秒WAL产生量过大，数据库性能存在风险", "rule_name": "wal_more_size_gsdb", "id": "12241", "rule_expression": "([metric,2823034,_dn_total]>([num,$1]*[cib,2830001,dn_nodes]))&&([metric,2820334,IO_EVENT WALWrite]>[num,$2])", "db_type": "GaussDB", "warning_level": "2", "warning_message": "每秒WAL产生量过大，数据库性能存在风险,每秒DN产生WAL的块数为{[metric,2823034,_dn_total]}，WAL写入平均等待延时为{[metric,2820334,IO_EVENT WALWrite]}"}}
{"type": "rule", "data": {"description": "数据库中出现过组件主从切换", "rule_name": "db_role_switch_gsdb", "id": "14845", "rule_expression": "([metric,2823317]>[num,$1])||([metric,2823318]>[num,$1])||([metric,2823319]>[num,$1])||([metric,2823320]>[num,$1])||([metric,2823321]>[num,$1])", "db_type": "GaussDB", "warning_level": "4", "warning_message": "数据库中出现过组件主从切换（CM：{[metric,2823317]}，ETCD：{[metric,2823318]}，CN：{[metric,2823319]}，DN：{[metric,2823320]}，GTM：{[metric,2823321]}）"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - CPU时间"}], "description": "CN或者DN节点的全表扫描次数过多", "rule_name": "table_scan_gsdb", "id": "15008", "rule_expression": "([metric,2822519,_cn_total])>([num,$1])*[cib,2830002,_cn_cpu_total])||([metric,2822519,_dn_total])>([num,$2]*[cib,2830002,_dn_cpu_total]))", "db_type": "GaussDB", "warning_level": "2", "warning_message": "CN或者DN节点的全表扫描次数过多"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "数据库连接失败分析", "knowledge_description": "数据库连接失败分析"}], "description": "KYD到pg数据库连接配置有问题，导致连接失败", "rule_name": "dsmart_connection_error_gsdb", "id": "14848", "rule_expression": "[metric,1000000][oper,contains][str,FATAL: database] && [metric,1000000][oper,contains][str,does not exist]", "db_type": "GaussDB", "warning_level": "4", "warning_message": "dsmart到pg数据库连接配置有问题，导致连接失败"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "集群状态检查"}], "description": "GTM发生过切换", "rule_name": "switchover_gtm_gsdb", "id": "14740", "rule_expression": "[metric,2823321]>[num,0]", "db_type": "GaussDB", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - 硬解析数"}, {"knowledge_description": "TOP SQL - 解析时间"}, {"knowledge_description": "TOP SQL - 生成执行计划时间"}, {"knowledge_description": "TOP SQL - 重写时间"}, {"knowledge_description": "TOP SQL - 软解析数"}], "description": "CN节点每秒硬解析数量过大，数据库性能存在风险", "rule_name": "hard_parse_cn_gsdb", "id": "14859", "rule_expression": "([metric,2823167,_cn_total])>([num,$1])*[cib,2830002,_cn_cpu_total])", "db_type": "GaussDB", "warning_level": "2", "warning_message": "每秒硬解析数量过大（{[metric,2823167,_cn_total]}），数据库性能存在风险"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "TOP SQL - 硬解析数"}, {"knowledge_description": "TOP SQL - 解析时间"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_description": "通用CPU使用情况分析"}], "description": "DN节点每秒硬解析数量过多，数据库性能存在风险", "rule_name": "hard_parse_dn_gsdb", "id": "14860", "rule_expression": "([metric,2823167,_dn_total])>([num,$1])*[cib,2830002,_dn_cpu_total])", "db_type": "GaussDB", "warning_level": "2", "warning_message": "DN节点每秒硬解析数量过多（{[metric,2823167,_dn_total]}），数据库性能存在风险"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "数据库连接失败分析", "knowledge_description": "数据库连接失败分析"}, {"knowledge_description": "通用网络流量分析"}], "description": "数据库未知连接错误", "rule_name": "unkown_connect_failed_gsdb", "id": "15011", "rule_expression": "[metric,1000000][oper,notcontains][str,Check that the hostname and port are correct] && [metric,1000000][oper,notcontains][str,does not exist] && [metric,1000000][oper,notcontains][str,connection attempt failed] && [metric,1000000][oper,notcontains][str,password authentication failed] && [metric,1000000][oper,notcontains][str,not permitted to log in] && [metric,1000000][oper,notcontains][str,SQL执行失败] && [metric,1000000][oper,neq][str,连接成功]", "db_type": "GaussDB", "warning_level": "4", "warning_message": "pg数据库未知连接错误：{[metric,1000000]}"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用文件系统使用率分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用网络流量分析"}], "description": "DN备节点REDO延时过高，数据库的RTO存在风险", "rule_name": "slaver_redo_delay_gsdb", "id": "15047", "rule_expression": "[metric,2823396,_dn_max]>[num,$1]", "db_type": "GaussDB", "warning_level": "3", "warning_message": "DN备节点REDO延时过高，数据库的RTO存在风险（{[metric,2823396,_dn_max]}）"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - CPU时间"}], "description": "CN或者DN节点的全表扫描次数过多", "rule_name": "table_scan_gsdb", "id": "14637", "rule_expression": "([metric,2822519,_cn_total])>([num,$1])*[cib,2830002,_cn_cpu_total])||([metric,2822519,_dn_total])>([num,$2]*[cib,2830002,_dn_cpu_total]))", "db_type": "GaussDB", "warning_level": "2", "warning_message": "CN或者DN节点的全表扫描次数过多"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "集群内存分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB内存方面指标异常分析"}, {"knowledge_description": "集群内存过载分析"}, {"knowledge_description": "集群会话的内存占用情况"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库内存分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - 解析时间"}], "description": "CN节点的内存使用率不均衡", "rule_name": "mem_nobalance_cn_gsdb", "id": "14721", "rule_expression": "(([metric,1001004,cn_min])<[num,50])&&(([metric,1001004,cn_max]/[metric,1001004,cn_min])>[num,$1]))||(([metric,1001004,cn_min])>=[num,50])&&(([metric,1001004,cn_max]/[metric,1001004,cn_min])>[num,$2]))", "db_type": "GaussDB", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用文件系统使用率分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用网络流量分析"}], "description": "DN备节点REDO延时过高，数据库的RTO存在风险", "rule_name": "slaver_redo_delay_gsdb", "id": "15045", "rule_expression": "[metric,2823396,_dn_max]>[num,$1]", "db_type": "GaussDB", "warning_level": "3", "warning_message": "DN备节点REDO延时过高，数据库的RTO存在风险（{[metric,2823396,_dn_max]}）"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用文件系统使用率分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用网络流量分析"}], "description": "DN备节点REDO延时过高，数据库的RTO存在风险", "rule_name": "slaver_redo_delay_gsdb", "id": "15046", "rule_expression": "[metric,2823396,_dn_max]>[num,$1]", "db_type": "GaussDB", "warning_level": "3", "warning_message": "DN备节点REDO延时过高，数据库的RTO存在风险（{[metric,2823396,_dn_max]}）"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_name": "数据库负载维度分析", "knowledge_description": "数据库负载维度分析"}, {"knowledge_description": "GaussDB长事务分析"}, {"knowledge_description": "GaussDB锁等待分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "数据库锁相关指标分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}], "description": "回滚比例过高，数据库存在问题", "rule_name": "rollback_high_gsdb", "id": "14998", "rule_expression": "([metric,2829010,max])>[num,$1])&&([metric,2820117,total])>[num,$2])", "db_type": "GaussDB", "warning_level": "3", "warning_message": "回滚比例过高，数据库存在问题（{[metric,2829010,max]}）"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - 解析时间"}, {"knowledge_description": "TOP SQL - 生成执行计划时间"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用内存使用情况分析"}], "description": "DN节点每秒逻辑读异常，说明应用或者数据库出现了异常", "rule_name": "more_logic_read_dn_gsdb", "id": "14991", "rule_expression": "(([metric,2820113,_dn_total]>[num,$1]) || ([metric,1000105,2820113-_dn_total][oper,eq][str,3])) && ([metric,2820113,_dn_total]>[num,$2])", "db_type": "GaussDB", "warning_level": "2", "warning_message": "DN节点每秒逻辑读异常增加，说明应用或者数据库出现了异常，当前每秒逻辑读{[metric,2820113,_dn_total]}"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - 解析时间"}, {"knowledge_description": "TOP SQL - 生成执行计划时间"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用内存使用情况分析"}], "description": "DN节点每秒逻辑读异常，说明应用或者数据库出现了异常", "rule_name": "more_logic_read_dn_gsdb", "id": "14726", "rule_expression": "(([metric,2820113,_dn_total]>[num,$1]) || ([metric,1000105,2820113-_dn_total][oper,eq][str,3])) && ([metric,2820113,_dn_total]>[num,$2])", "db_type": "GaussDB", "warning_level": "2", "warning_message": "DN节点每秒逻辑读异常增加，说明应用或者数据库出现了异常，当前每秒逻辑读{[metric,2820113,_dn_total]}"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "正确配置archive_command命令", "knowledge_description": "分析数据库WAL日志归档失败"}, {"knowledge_description": "通用文件系统使用率分析"}], "description": "发生未成功归档现象", "rule_name": "failed_archive_pg", "id": "14291", "rule_expression": "[cib,2220002,archive_mode][oper,eq][str,on] && [metric,2820142]>[num,$1]", "db_type": "GaussDB", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB内存方面指标异常分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库内存分析"}, {"knowledge_description": "集群内存分析"}, {"knowledge_description": "集群内存过载分析"}, {"knowledge_description": "集群会话的内存占用情况"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - 解析时间"}], "description": "存在物理内存不可用率过高的服务器，数据库存在较大风险", "rule_name": "mem_usage_gsdb", "id": "14874", "rule_expression": "([metric,1001014,max]>[num,$1])||(([metric,1001014,max]>[num,$2])&&([metric,1001031,max]>[num,$3]))", "db_type": "GaussDB", "warning_level": "4", "warning_message": "存在物理内存不可用率过高的服务器（{[metric,1001014,max]}），数据库存在较大风险"}}
{"type": "rule", "data": {"description": "CMSERVER发生过切换", "rule_name": "switchover_cmserver_gsdb", "id": "14889", "rule_expression": "[metric,2823317]>[num,0]", "db_type": "GaussDB", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "集群内存分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB内存方面指标异常分析"}, {"knowledge_description": "集群内存过载分析"}, {"knowledge_description": "集群会话的内存占用情况"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库内存分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - 解析时间"}], "description": "CN节点的内存使用率不均衡", "rule_name": "mem_nobalance_cn_gsdb", "id": "14872", "rule_expression": "(([metric,1001004,cn_min])<[num,50])&&(([metric,1001004,cn_max]/[metric,1001004,cn_min])>[num,$1]))||(([metric,1001004,cn_min])>=[num,50])&&(([metric,1001004,cn_max]/[metric,1001004,cn_min])>[num,$2]))", "db_type": "GaussDB", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "集群内存分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB内存方面指标异常分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - 解析时间"}], "description": "DN节点服务器内存使用不均衡", "rule_name": "mem_nobalance_dn_gsdb", "id": "14873", "rule_expression": "(([metric,1001004,dn_min])<[num,50])&&(([metric,1001004,dn_max]/[metric,1001004,dn_min])>[num,$1]))||(([metric,1001004,dn_min])>=[num,50])&&(([metric,1001004,dn_max]/[metric,1001004,dn_min])>[num,$2]))", "db_type": "GaussDB", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "集群会话分析"}, {"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-数据库活跃会话数分析"}, {"knowledge_description": "集群会话的内存占用情况"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用内存使用情况分析"}], "description": "线程池使用率过高，系统存在风险", "rule_name": "session_exceed_gsdb", "id": "14887", "rule_expression": "([metric,2823209,_cn_max]>[num,$1] )||([metric,2823209,_dn_max]>[num,$2])", "db_type": "GaussDB", "warning_level": "4", "warning_message": "线程池使用率过高，系统存在风险（CN:{[metric,2823209,_cn_max]},DN:{[metric,2823209,_dn_max]})"}}
{"type": "rule", "data": {"description": "存在死元组比例较大的大表", "rule_name": "dead_tuple_not_cleanup_on", "id": "11234", "rule_expression": "[metric,2823341,_dn_total]>[num,$1] ", "db_type": "GaussDB", "warning_level": "2", "warning_message": "存在死元组数到达清理阈值而未清理的表（{[metric,2823341,_dn_total]}），会造成空间浪费和性能问题"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "集群CN系统表一致性检查"}, {"knowledge_description": "集群状态检查"}], "description": "CN节点系统表存在不一致现象，相同存在严重问题", "rule_name": "systable_consistence_gsdb", "id": "14894", "rule_expression": "[metric,2823328]<[num,$1]", "db_type": "GaussDB", "warning_level": "4", "warning_message": "CN节点系统表存在不一致现象，相同存在严重问题"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB CPU相关指标分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库CPU分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - CPU时间"}, {"knowledge_description": "TOP SQL - 生成执行计划时间"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用网络流量分析"}], "description": "活跃会话数超过CPU数量，数据库可能存在性能风险", "rule_name": "active_session_gsdb_error", "id": "14829", "rule_expression": "([metric,2820102,_cn_total]>([num,$1]*[cib,2830001,cn_cpu_total] ))||([metric,2820102,_dn_total]>([num,$1]*[cib,2830001,dn_cpu_total] ))", "db_type": "GaussDB", "warning_level": "3", "warning_message": "高斯集群的活跃会话数过多，超过计算节点的CPU线程数数倍，数据库可能存在风险（计算节点总活跃会话数{[metric,2820102,_cn_total]}/{[metric,2820102,_dn_total]}）"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "集群状态检查"}], "description": "GTM进程存在异常", "rule_name": "abnormal_gtm_proc_gsdb", "id": "14828", "rule_expression": "[metric,2823327]>[num,0]", "db_type": "GaussDB", "warning_level": "4"}}
{"type": "rule", "data": {"description": "最近一小时出现过备份失败", "rule_name": "backup_failed_gsdb", "id": "14834", "rule_expression": "[metric,2823387]>[num,0]", "db_type": "GaussDB", "warning_level": "4", "warning_message": "最近一小时出现过备份失败({[metric,2823387]}次)，最后一次备份失败时间为{[metric,2823389]}"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GasusDB IO相关指标"}, {"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-数据库IO分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL引发IO异常的相关指标分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}], "description": "IO延时严重超标，数据库存在风险", "rule_name": "IO_latency_gsdb_critical", "id": "14862", "rule_expression": "[metric,1001006,max]>[num,$1] && ([metric,1001101,avg]>[num,$2]) ", "db_type": "GaussDB", "warning_level": "4", "warning_message": "IO延时过高，数据库存在风险({[metric,1001006,max]})"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - 硬解析数"}, {"knowledge_description": "TOP SQL - 解析时间"}, {"knowledge_description": "TOP SQL - 生成执行计划时间"}, {"knowledge_description": "TOP SQL - 重写时间"}, {"knowledge_description": "TOP SQL - 软解析数"}], "description": "CN节点每秒硬解析数量过大，数据库性能存在风险", "rule_name": "hard_parse_cn_gsdb", "id": "14603", "rule_expression": "([metric,2823167,_cn_total])>([num,$1])*[cib,2830002,_cn_cpu_total])", "db_type": "GaussDB", "warning_level": "2", "warning_message": "每秒硬解析数量过大（{[metric,2823167,_cn_total]}），数据库性能存在风险"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GasusDB IO相关指标"}, {"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-数据库IO分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL引发IO异常的相关指标分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}], "description": "IO延时过高告警", "rule_name": "IO_latency_gsdb_warn", "id": "14863", "rule_expression": "[metric,1001006,max]>[num,$1] && ([metric,1001101,avg]>[num,$2]) ", "db_type": "GaussDB", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GasusDB IO相关指标"}, {"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-数据库IO分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - 执行时间"}], "description": "各DN节点的IOPS不均衡，数据库性能可能受影响", "rule_name": "IOPS_nobalance_gsdb", "id": "14865", "rule_expression": "(([metric,1001100,dn_min])<[num,8000])&&(([metric,1001100,dn_max]/[metric,1001100,dn_min])>[num,$1]))||(([metric,1001100,dn_min])>=[num,8000])&&(([metric,1001100,dn_max]/[metric,1001100,dn_min])>[num,$2]))", "db_type": "GaussDB", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "集群状态检查"}], "description": "CN进程存在异常", "rule_name": "abnormal_cn_proc_gsdb", "id": "14933", "rule_expression": "[metric,2823325]>[num,0]", "db_type": "GaussDB", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "集群状态检查"}], "description": "存在异常GTM节点", "rule_name": "abnormal_gtm_gsdb", "id": "14940", "rule_expression": "[metric,2823304]>=[num,$1]", "db_type": "GaussDB", "warning_level": "3", "warning_message": "存在异常GTM节点，请尽快确认是否存在问题(故障GTM节点数{[metric,2823303]})"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_description": "GaussDB锁等待分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "数据库锁相关指标分析"}, {"knowledge_description": "TOP SQL - CPU时间"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用文件系统使用率分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用网络流量分析"}], "description": "活跃会话数过多，数据库可能存在风险", "rule_name": "active_session_gsdb_warn", "id": "14944", "rule_expression": "([metric,2820102,_cn_total]>([num,$1]*[cib,2830001,cn_cpu_total] ))||([metric,2820102,_dn_total]>([num,$1]*[cib,2830001,dn_cpu_total] ))", "db_type": "GaussDB", "warning_level": "2", "warning_message": "高斯集群的活跃会话数过多，数据库可能存在风险，计算节点总活跃会话数(cn:{[metric,2820102,_cn_total]},dn:{[metric,2820102,_dn_total]})"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "集群负载分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "通用文件系统使用率分析"}], "description": "每秒WAL产生量过大，数据库性能存在风险", "rule_name": "wal_more_size_gsdb", "id": "14746", "rule_expression": "([metric,2823034,_dn_total]>([num,$1]*[cib,2830001,dn_nodes]))&&([metric,2820334,IO_EVENT WALWrite]>[num,$2])", "db_type": "GaussDB", "warning_level": "2", "warning_message": "每秒WAL产生量过大，数据库性能存在风险,每秒DN产生WAL的块数为{[metric,2823034,_dn_total]}，WAL写入平均等待延时为{[metric,2820334,IO_EVENT WALWrite]}"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "集群状态检查"}], "description": "GTM进程存在异常", "rule_name": "abnormal_gtm_proc_gsdb", "id": "14941", "rule_expression": "[metric,2823327]>[num,0]", "db_type": "GaussDB", "warning_level": "4"}}
{"type": "rule", "data": {"description": "最近一小时出现过备份失败", "rule_name": "backup_failed_gsdb", "id": "14947", "rule_expression": "[metric,2823387]>[num,0]", "db_type": "GaussDB", "warning_level": "4", "warning_message": "最近一小时出现过备份失败({[metric,2823387]}次)，最后一次备份失败时间为{[metric,2823389]}"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_description": "集群负载分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_description": "GaussDB锁等待分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "数据库锁相关指标分析"}, {"knowledge_description": "TOP SQL - 执行时间"}], "description": "共享缓冲区命中率不理想", "rule_name": "buffer_cache_suboptimal_gsdb", "id": "14950", "rule_expression": "[metric,2820112]<[num,$1] && [metric,2820113,total]>[num,$2]", "db_type": "GaussDB", "warning_level": "2", "warning_message": "共享缓冲区命中率不理想,数据库性能存在问题。（共享池命中率{[metric,2820112]}]"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用文件系统使用率分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用网络流量分析"}], "description": "数据库采集任务严重超时，数据库存在严重性能风险", "rule_name": "collector_exec_slow_gsdb", "id": "14952", "rule_expression": "[metric,1000101] >([metric hour avg,1000101]*[num,$1])", "db_type": "GaussDB", "warning_level": "4", "warning_message": "数据库采集任务严重超时，数据库存在严重性能风险(采集延时{[metric,1000101] })"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库CPU分析"}, {"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-数据库IO分析"}, {"knowledge_description": "GaussDB锁等待分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "数据库锁相关指标分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用文件系统使用率分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用网络流量分析"}], "description": "数据库连接严重超时，数据库存在巨大风险", "rule_name": "connect_slow_gsdb", "id": "14953", "rule_expression": "[metric,1000102] >([metric hour avg,1000102]*[num,$1]) && ([metric,1000102] >[num,$2])", "db_type": "GaussDB", "warning_level": "4", "warning_message": "数据库连接严重超时，数据库存在巨大风险（{[metric,1000102}}"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB CPU相关指标分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库CPU分析"}, {"knowledge_description": "通用文件系统使用率分析"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "TOP SQL - CPU时间"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - 硬解析数"}, {"knowledge_description": "TOP SQL - 解析时间"}, {"knowledge_description": "TOP SQL - 生成执行计划时间"}], "description": "不同CN节点CPU使用不均衡", "rule_name": "cpu_nobalance_cn_gsdb", "id": "14954", "rule_expression": "(([metric,1001003,cn_min])<[num,30])&&(([metric,1001003,cn_max]/[metric,1001003,cn_min])>[num,$1]))||(([metric,1001003,cn_min])>=[num,30])&&(([metric,1001003,cn_max]/[metric,1001003,cn_min])>[num,$2]))", "db_type": "GaussDB", "warning_level": "2", "warning_message": "不同CN节点CPU使用不均衡"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB CPU相关指标分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库CPU分析"}, {"knowledge_description": "TOP SQL - CPU时间"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用网络流量分析"}], "description": "DN节点CPU使用率不均衡（集中式勿开）", "rule_name": "cpu_nobalance_dn_gsdb", "id": "14955", "rule_expression": "(([metric,1001003,dn_min])<[num,30])&&(([metric,1001003,dn_max]/[metric,1001003,dn_min])>[num,$1]))||(([metric,1001003,dn_min])>=[num,30])&&(([metric,1001003,dn_max]/[metric,1001003,dn_min])>[num,$2]))", "db_type": "GaussDB", "warning_level": "2", "warning_message": "DN节点CPU使用率不均衡"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB内存方面指标异常分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库内存分析"}, {"knowledge_description": "集群内存分析"}, {"knowledge_description": "集群内存过载分析"}, {"knowledge_description": "集群会话的内存占用情况"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - 解析时间"}], "description": "存在物理内存不可用率过高的服务器，数据库存在较大风险", "rule_name": "mem_usage_gsdb", "id": "14784", "rule_expression": "([metric,1001014,max]>[num,$1])||(([metric,1001014,max]>[num,$2])&&([metric,1001031,max]>[num,$3]))", "db_type": "GaussDB", "warning_level": "4", "warning_message": "存在物理内存不可用率过高的服务器（{[metric,1001014,max]}），数据库存在较大风险"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库CPU分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB CPU相关指标分析"}, {"knowledge_name": "数据库CPU高分析", "knowledge_description": "数据库CPU高分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass 引发CPU异常的SQL相关指标分析"}], "description": "数据库CPU使用率过高，可能存在瓶颈", "rule_name": "cpu_used_higher_gsdb", "id": "14957", "rule_expression": "([metric,1001003,max] >[num,$1])||([metric,1001003,avg] >[num,$2])", "db_type": "GaussDB", "warning_level": "4", "warning_message": "当前CPU使用率过高，当前CPU使用率平均值为：{[metric,1001003,avg]}%，当前CPU使用率最大值为：{[metric,1001003,max]}%"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "分布式数据库文件系统使用率指标分析"}, {"knowledge_description": "通用文件系统使用率分析"}], "description": "数据文件存储的文件系统存在使用率过高现象", "rule_name": "filesystem_data_usage_gsdb", "id": "14969", "rule_expression": "([metric,1000321,_dn_max]>[num,$1])||([metric,1000321,_cn_max]>[num,$1])", "db_type": "GaussDB", "warning_level": "3", "warning_message": "数据文件存储的文件系统存在使用率过高现象(DN-{[metric,1000321,_dn_max]},CN-{[metric,1000321,_cn_max]})"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "正确配置archive_command命令", "knowledge_description": "分析数据库WAL日志归档失败"}, {"knowledge_description": "通用文件系统使用率分析"}], "description": "发生未成功归档现象", "rule_name": "failed_archive_pg", "id": "14968", "rule_expression": "[cib,2220002,archive_mode][oper,eq][str,on] && [metric,2820142]>[num,$1]", "db_type": "GaussDB", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB内存方面指标异常分析"}, {"knowledge_description": "集群会话的内存占用情况"}, {"knowledge_description": "集群内存分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - 生成执行计划时间"}], "description": "CN节点动态内存急剧上升", "rule_name": "dyn_mem_raise_cn_gsdb", "id": "14787", "rule_expression": "([metric ,1000105,2823230-_cn_total][oper,eq][str,3])) && ([metric,2823230,_cn_total]>[num,$1])", "db_type": "GaussDB", "warning_level": "2", "warning_message": "CN节点动态内存急剧上升(总计动态内存使用量{[metric,2823230,_cn_total]})"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB内存方面指标异常分析"}, {"knowledge_description": "集群会话的内存占用情况"}, {"knowledge_description": "集群内存分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - 生成执行计划时间"}], "description": "CN节点动态内存急剧上升", "rule_name": "dyn_mem_raise_cn_gsdb", "id": "14965", "rule_expression": "([metric ,1000105,2823230-_cn_total][oper,eq][str,3])) && ([metric,2823230,_cn_total]>[num,$1])", "db_type": "GaussDB", "warning_level": "2", "warning_message": "CN节点动态内存急剧上升(总计动态内存使用量{[metric,2823230,_cn_total]})"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB内存方面指标异常分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - 解析时间"}, {"knowledge_description": "TOP SQL - 生成执行计划时间"}, {"knowledge_description": "通用内存使用情况分析"}], "description": "DN节点动态内存急剧上升", "rule_name": "dyn_mem_raise_dn_gsdb", "id": "14792", "rule_expression": "([metric ,1000105,2823230-_dn_total][oper,eq][str,3])) && ([metric,2823230,_dn_total]>[num,$1])", "db_type": "GaussDB", "warning_level": "2", "warning_message": "DN节点动态内存急剧上升，可能负载出现上升（{[metric,2823230,_dn_total]}）"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB内存方面指标异常分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - 解析时间"}, {"knowledge_description": "TOP SQL - 生成执行计划时间"}, {"knowledge_description": "通用内存使用情况分析"}], "description": "DN节点动态内存急剧上升", "rule_name": "dyn_mem_raise_dn_gsdb", "id": "14793", "rule_expression": "([metric ,1000105,2823230-_dn_total][oper,eq][str,3])) && ([metric,2823230,_dn_total]>[num,$1])", "db_type": "GaussDB", "warning_level": "2", "warning_message": "DN节点动态内存急剧上升，可能负载出现上升（{[metric,2823230,_dn_total]}）"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "分析数据库实例情况"}], "description": "出现多次错误或告警的SQL语句，可能是应用发出", "rule_name": "error_sql_pg", "id": "14967", "rule_expression": "[metric,2820204]>[num,$1]", "db_type": "GaussDB", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GasusDB IO相关指标"}, {"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-数据库IO分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL引发IO异常的相关指标分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}], "description": "IO延时过高告警", "rule_name": "IO_latency_gsdb_warn", "id": "14976", "rule_expression": "[metric,1001006,max]>[num,$1] && ([metric,1001101,avg]>[num,$2]) ", "db_type": "GaussDB", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "GaussDB长事务分析"}, {"knowledge_description": "GaussDB锁等待分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "数据库锁相关指标分析"}, {"knowledge_description": "TOP SQL - CPU时间"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用网络流量分析"}], "description": "事务持续时间过长，超过300秒", "rule_name": "long_trans_gsdb", "id": "14982", "rule_expression": "[metric ,2820106,_cn_max] >[num,$1]", "db_type": "GaussDB", "warning_level": "4", "warning_message": "事务持续时间过长，超过{[metric ,2820106,_cn_max] }秒"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GasusDB IO相关指标"}, {"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-数据库IO分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL引发IO异常的相关指标分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}], "description": "IO延时过高告警", "rule_name": "IO_latency_gsdb_warn", "id": "14607", "rule_expression": "[metric,1001006,max]>[num,$1] && ([metric,1001101,avg]>[num,$2]) ", "db_type": "GaussDB", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "集群状态检查"}, {"knowledge_description": "通用文件系统使用率分析"}, {"knowledge_description": "通用网络流量分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用IO分析"}], "description": "存在异常CN节点", "rule_name": "abnormal_cn_gsdb", "id": "14569", "rule_expression": "[metric,2823304]>=[num,$1]", "db_type": "GaussDB", "warning_level": "3", "warning_message": "存在异常CN节点，请尽快确认是否存在问题(故障CN节点数{[metric,2823302]})"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用网络流量分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - CPU时间"}], "description": "80分位的SQL响应时间异常增长", "rule_name": "80SQL_gsdb", "id": "14567", "rule_expression": "(([metric,1000105,2823207] [oper,eq] [str,3]))&&([metric,2823207]>[num,$1] )", "db_type": "GaussDB", "warning_level": "2", "warning_message": "80分位的SQL响应时间异常增长"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "TOP 慢查询"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_description": "GaussDB锁等待分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "数据库锁相关指标分析"}, {"knowledge_description": "TOP SQL - CPU时间"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行器内执行时间"}, {"knowledge_description": "TOP SQL - 生成执行计划时间"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用文件系统使用率分析"}, {"knowledge_description": "通用内存使用情况分析"}], "description": "95分位SQL响应时间急剧上升，数据库性能存在风险", "rule_name": "95SQL_gsdb", "id": "14568", "rule_expression": "(([metric,1000105,2823208] [oper,eq] [str,3]))&&([metric,2823208]>[num,$1] )", "db_type": "GaussDB", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "集群状态检查"}], "description": "CN进程存在异常", "rule_name": "abnormal_cn_proc_gsdb", "id": "14570", "rule_expression": "[metric,2823325]>[num,0]", "db_type": "GaussDB", "warning_level": "4"}}
{"type": "rule", "data": {"description": "CN或者DN节点的总DB_TIME异常", "rule_name": "abnormal_db_time_gsdb", "id": "14934", "rule_expression": "([metric ,1000105,2823139-_cn_total][oper,eq][str,3])) && ([metric,2823139,_cn_total]>[num,$1])||([metric ,1000105,2823139-_dn_total][oper,eq][str,3])) && ([metric,2823139,_dn_total]>[num,$2])", "db_type": "GaussDB", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "正确配置archive_command命令", "knowledge_description": "分析数据库WAL日志归档失败"}, {"knowledge_description": "通用文件系统使用率分析"}], "description": "发生未成功归档现象", "rule_name": "failed_archive_pg", "id": "3894", "rule_expression": "[cib,2220002,archive_mode][oper,eq][str,on] && [metric,2820142]>[num,$1]", "db_type": "GaussDB", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "正确配置archive_command命令", "knowledge_description": "分析数据库WAL日志归档失败"}, {"knowledge_description": "通用文件系统使用率分析"}], "description": "发生未成功归档现象", "rule_name": "failed_archive_pg", "id": "11176", "rule_expression": "[cib,2220002,archive_mode][oper,eq][str,on] && [metric,2820142]>[num,$1]", "db_type": "GaussDB", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用文件系统使用率分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用网络流量分析"}], "description": "数据库集群RTO过高", "rule_name": "rto_risk_gsdb", "id": "14999", "rule_expression": "[metric,2823114,_dn_max]>[num,$1]", "db_type": "GaussDB", "warning_level": "4", "warning_message": "数据库集群RTO过高({[metric,2823114,_dn_max]})"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "集群负载分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "通用文件系统使用率分析"}], "description": "每秒WAL产生量过大，数据库性能存在风险", "rule_name": "wal_more_size_gsdb", "id": "15012", "rule_expression": "([metric,2823034,_dn_total]>([num,$1]*[cib,2830001,dn_nodes]))&&([metric,2820334,IO_EVENT WALWrite]>[num,$2])", "db_type": "GaussDB", "warning_level": "2", "warning_message": "每秒WAL产生量过大，数据库性能存在风险,每秒DN产生WAL的块数为{[metric,2823034,_dn_total]}，WAL写入平均等待延时为{[metric,2820334,IO_EVENT WALWrite]}"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "Top SQL-按逻辑读排序", "knowledge_description": "Top SQL-按逻辑读排序"}], "description": "每秒逻辑读异常，说明应用或者数据库出现了异常", "rule_name": "more_logic_read_pg", "id": "11183", "rule_expression": "(([metric,2820113,_dn_total]>[num,$1]) || ([metric in time,10,1000105,2820113-_dn_total][oper,eq][str,3])) && ([metric,2820113,_dn_total]>[num,$2])", "db_type": "GaussDB", "warning_level": "2", "warning_message": "每秒逻辑读异常增加，说明应用或者数据库出现了异常，当前每秒逻辑读{[metric,2820113,_dn_total]}"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用文件系统使用率分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用网络流量分析"}], "description": "DN备节点REDO延时过高，数据库的RTO存在风险", "rule_name": "slaver_redo_delay_gsdb", "id": "15043", "rule_expression": "[metric,2823396,_dn_max]>[num,$1]", "db_type": "GaussDB", "warning_level": "3", "warning_message": "DN备节点REDO延时过高，数据库的RTO存在风险（{[metric,2823396,_dn_max]}）"}}
{"type": "rule", "data": {"description": "数据库复制不正常", "rule_name": "repl_gsdb", "id": "12211", "rule_expression": "[metric,2820147,cluster][oper,neq][str,Streaming] || [metric,2820149,cluster]>[num,$1]", "db_type": "GaussDB", "warning_level": "4", "warning_message": "数据库复制不正常（复制状态{[metric,2820147,cluster]}，备库应用延时{[metric,2820149,cluster]}）"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "TOP 慢查询"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - CPU时间"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_description": "GaussDB锁等待分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "数据库锁相关指标分析"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用网络流量分析"}], "description": "可能是慢SQL过多而导致的活跃会话数过高", "rule_name": "active_session_slow_sql_gsdb", "id": "14583", "rule_expression": "(([metric,2820102] >([num,$1]*[cib,2830002,_cn_cpu_total]))||([metric,2820102] >([num,$2]*[cib,2830002,_dn_cpu_total])))&&(([metric,2820158] >([num,$3]*[cib,2830002,_cn_cpu_total]))||([metric,2820158] >([num,$4]*[cib,2830002,_dn_cpu_total])))", "db_type": "GaussDB", "warning_level": "2", "warning_message": "可能是慢SQL过多而导致的活跃会话数过高，慢sql数量{[metric,2820158]},活跃会话数{[metric,2820102]}"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "死元组达到清理要求未清理的分析", "knowledge_description": "死元组达到清理要求未清理的分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_description": "GaussDB锁等待分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "数据库锁相关指标分析"}, {"knowledge_description": "GaussDB长事务分析"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用文件系统使用率分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用网络流量分析"}], "description": "长事务过多或持续时间过长", "rule_name": "long_trx_gsdb", "id": "14870", "rule_expression": "[metric,2820105,_cn_total]>[num,$1] || [metric,2820106,_cn_max]>[num,$2]", "db_type": "GaussDB", "warning_level": "2", "warning_message": "长事务数{[metric,2820105]}个，最长事务持续时间{[metric,2820106]}"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "集群状态检查"}], "description": "存在异常DN节点", "rule_name": "abnormal_dn_gsdb", "id": "14679", "rule_expression": "[metric,2823304]>=[num,$1]", "db_type": "GaussDB", "warning_level": "3", "warning_message": "存在异常DN节点，请尽快确认是否存在问题(故障DN节点数{[metric,2823301]})"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB CPU相关指标分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库CPU分析"}, {"knowledge_description": "TOP SQL - CPU时间"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用网络流量分析"}], "description": "DN节点CPU使用率不均衡（集中式勿开）", "rule_name": "cpu_nobalance_dn_gsdb", "id": "14695", "rule_expression": "(([metric,1001003,dn_min])<[num,30])&&(([metric,1001003,dn_max]/[metric,1001003,dn_min])>[num,$1]))||(([metric,1001003,dn_min])>=[num,30])&&(([metric,1001003,dn_max]/[metric,1001003,dn_min])>[num,$2]))", "db_type": "GaussDB", "warning_level": "2", "warning_message": "DN节点CPU使用率不均衡"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB CPU相关指标分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库CPU分析"}, {"knowledge_description": "TOP SQL - CPU时间"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用网络流量分析"}], "description": "DN节点CPU使用率不均衡（集中式勿开）", "rule_name": "cpu_nobalance_dn_gsdb", "id": "14399", "rule_expression": "(([metric,1001003,dn_min])<[num,30])&&(([metric,1001003,dn_max]/[metric,1001003,dn_min])>[num,$1]))||(([metric,1001003,dn_min])>=[num,30])&&(([metric,1001003,dn_max]/[metric,1001003,dn_min])>[num,$2]))", "db_type": "GaussDB", "warning_level": "2", "warning_message": "DN节点CPU使用率不均衡"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_description": "集群负载分析"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用文件系统使用率分析"}, {"knowledge_description": "通用IO分析"}], "description": "DN节点未落盘脏页数量过多", "rule_name": "dirty_pages_dn_gsdb", "id": "15048", "rule_expression": "[metric,2823398,_dn_max]>[num,$1]", "db_type": "GaussDB", "warning_level": "2", "warning_message": "DN节点未落盘脏页数量过多（{[metric,2823398,_dn_max]}）"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_description": "集群负载分析"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用文件系统使用率分析"}, {"knowledge_description": "通用IO分析"}], "description": "DN节点未落盘脏页数量过多", "rule_name": "dirty_pages_dn_gsdb", "id": "15050", "rule_expression": "[metric,2823398,_dn_max]>[num,$1]", "db_type": "GaussDB", "warning_level": "2", "warning_message": "DN节点未落盘脏页数量过多（{[metric,2823398,_dn_max]}）"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_description": "集群负载分析"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用文件系统使用率分析"}, {"knowledge_description": "通用IO分析"}], "description": "DN节点未落盘脏页数量过多", "rule_name": "dirty_pages_dn_gsdb", "id": "15049", "rule_expression": "[metric,2823398,_dn_max]>[num,$1]", "db_type": "GaussDB", "warning_level": "2", "warning_message": "DN节点未落盘脏页数量过多（{[metric,2823398,_dn_max]}）"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_description": "集群负载分析"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用文件系统使用率分析"}, {"knowledge_description": "通用IO分析"}], "description": "DN节点未落盘脏页数量过多", "rule_name": "dirty_pages_dn_gsdb", "id": "15051", "rule_expression": "[metric,2823398,_dn_max]>[num,$1]", "db_type": "GaussDB", "warning_level": "2", "warning_message": "DN节点未落盘脏页数量过多（{[metric,2823398,_dn_max]}）"}}
{"type": "rule", "data": {"description": "最近一小时出现过备份失败", "rule_name": "backup_failed_gsdb", "id": "14809", "rule_expression": "[metric,2823387]>[num,0]", "db_type": "GaussDB", "warning_level": "4", "warning_message": "最近一小时出现过备份失败({[metric,2823387]}次)，最后一次备份失败时间为{[metric,2823389]}"}}
{"type": "rule", "data": {"description": "复制槽保留WAL数量过大", "rule_name": "repl_slot_keep_wal_gsdb", "id": "15053", "rule_expression": "[metric,2823400,_dn_max]>[num,$1]", "db_type": "GaussDB", "warning_level": "2"}}
{"type": "rule", "data": {"description": "复制槽保留WAL数量过大", "rule_name": "repl_slot_keep_wal_gsdb", "id": "15055", "rule_expression": "[metric,2823400,_dn_max]>[num,$1]", "db_type": "GaussDB", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "Top SQL-按处理行数排序", "knowledge_description": "Top SQL-按处理行数排序"}, {"knowledge_name": "显示数据库中无效索引", "knowledge_description": "显示数据库中无效索引"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_name": "获取执行时间比较高的TOP SQL", "knowledge_description": "获取执行时间比较高的TOP SQL"}, {"knowledge_name": "区分top sql是逻辑读还是执行次数增多进行进一步诊断", "knowledge_description": "逻辑读较多的TOP SQL"}], "description": "索引没有用被有效利用", "rule_name": "index_used_suboptimal_gsdb", "id": "14861", "rule_expression": " [metric,2820120,_dn_total]>[num,$1] && [metric,2820109]<[num,$2]", "db_type": "GaussDB", "warning_level": "2", "warning_message": "可能因为索引设计不合理而导致返回行数比例过低，索引使用效率过低"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "Top SQL-按处理行数排序", "knowledge_description": "Top SQL-按处理行数排序"}, {"knowledge_name": "显示数据库中无效索引", "knowledge_description": "显示数据库中无效索引"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_name": "获取执行时间比较高的TOP SQL", "knowledge_description": "获取执行时间比较高的TOP SQL"}, {"knowledge_name": "区分top sql是逻辑读还是执行次数增多进行进一步诊断", "knowledge_description": "逻辑读较多的TOP SQL"}], "description": "索引没有用被有效利用", "rule_name": "index_used_suboptimal_gsdb", "id": "14710", "rule_expression": " [metric,2820120,_dn_total]>[num,$1] && [metric,2820109]<[num,$2]", "db_type": "GaussDB", "warning_level": "2", "warning_message": "可能因为索引设计不合理而导致返回行数比例过低，索引使用效率过低"}}
{"type": "rule", "data": {"description": "复制槽保留WAL数量过大", "rule_name": "repl_slot_keep_wal_gsdb", "id": "15054", "rule_expression": "[metric,2823400,_dn_max]>[num,$1]", "db_type": "GaussDB", "warning_level": "2"}}
{"type": "rule", "data": {"description": "复制槽保留WAL数量过大", "rule_name": "repl_slot_keep_wal_gsdb", "id": "15056", "rule_expression": "[metric,2823400,_dn_max]>[num,$1]", "db_type": "GaussDB", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "分析数据库实例情况"}], "description": "出现多次错误或告警的SQL语句，可能是应用发出", "rule_name": "error_sql_pg", "id": "14601", "rule_expression": "[metric,2820204]>[num,$1]", "db_type": "GaussDB", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB CPU相关指标分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_description": "TOP SQL - CPU时间"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - 硬解析数"}, {"knowledge_description": "TOP SQL - 生成执行计划时间"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用网络流量分析"}], "description": "活跃会话数超过CPU线程数数倍，数据库可能存在风险", "rule_name": "active_session_gsdb_fatal", "id": "13749", "rule_expression": "([metric,2820102,_cn_total]>([num,$1]*[cib,2830001,cn_cpu_total] ))||([metric,2820102,_dn_total]>([num,$1]*[cib,2830001,dn_cpu_total] ))", "db_type": "GaussDB", "warning_level": "4", "warning_message": "高斯集群的活跃会话数过多，超过计算节点的CPU线程数数倍，数据库可能存在风险（计算节点总活跃会话数{[metric,2820102,_cn_total]}/{[metric,2820102,_dn_total]}）"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "集群状态检查"}, {"knowledge_description": "通用文件系统使用率分析"}, {"knowledge_description": "通用网络流量分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用IO分析"}], "description": "存在异常CN节点", "rule_name": "abnormal_cn_gsdb", "id": "14674", "rule_expression": "[metric,2823304]>=[num,$1]", "db_type": "GaussDB", "warning_level": "3", "warning_message": "存在异常CN节点，请尽快确认是否存在问题(故障CN节点数{[metric,2823302]})"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_description": "TOP SQL - 执行次数"}], "description": "CN节点上SELECT数量异常变化", "rule_name": "more_select_cn_gsdb", "id": "14993", "rule_expression": "(([metric,2823151,_cn_total]>[num,$1]) || ([metric ,1000105,2823151-_cn_total][oper,eq][str,3])) && ([metric,2823151,_cn_total]>[num,$2])", "db_type": "GaussDB", "warning_level": "2", "warning_message": "CN节点上SELECT数量异常变化"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB内存方面指标异常分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - 解析时间"}, {"knowledge_description": "TOP SQL - 生成执行计划时间"}, {"knowledge_description": "通用内存使用情况分析"}], "description": "DN节点动态内存急剧上升", "rule_name": "dyn_mem_raise_dn_gsdb", "id": "14794", "rule_expression": "([metric ,1000105,2823230-_dn_total][oper,eq][str,3])) && ([metric,2823230,_dn_total]>[num,$1])", "db_type": "GaussDB", "warning_level": "2", "warning_message": "DN节点动态内存急剧上升，可能负载出现上升（{[metric,2823230,_dn_total]}）"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB内存方面指标异常分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - 解析时间"}, {"knowledge_description": "TOP SQL - 生成执行计划时间"}, {"knowledge_description": "通用内存使用情况分析"}], "description": "DN节点动态内存急剧上升", "rule_name": "dyn_mem_raise_dn_gsdb", "id": "14966", "rule_expression": "([metric ,1000105,2823230-_dn_total][oper,eq][str,3])) && ([metric,2823230,_dn_total]>[num,$1])", "db_type": "GaussDB", "warning_level": "2", "warning_message": "DN节点动态内存急剧上升，可能负载出现上升（{[metric,2823230,_dn_total]}）"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "集群状态检查"}], "description": "存在异常DN节点", "rule_name": "abnormal_dn_gsdb", "id": "13751", "rule_expression": "[metric,2823304]>=[num,$1]", "db_type": "GaussDB", "warning_level": "3", "warning_message": "存在异常DN节点，请尽快确认是否存在问题(故障DN节点数{[metric,2823301]})"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_description": "TOP SQL - 执行次数"}], "description": "数据库CN中的DML比例异常（分布式专用）", "rule_name": "abnormal_dml_ratio_cn_gsdb", "id": "14435", "rule_expression": "(([metric,2829018,_cn_total]>[num,$1]) || ([metric ,1000105,2829018-_cn_total][oper,eq][str,3])) && ([metric,2829018,_cn_total]>[num,$2])", "db_type": "GaussDB", "warning_level": "2", "warning_message": "数据库CN中的DML比例异常（{[metric,2829018,_cn_total]}）(分布式专用)"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - CPU时间"}, {"knowledge_description": "TOP SQL - 执行器内执行时间"}, {"knowledge_description": "TOP SQL - 生成执行计划时间"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用网络流量分析"}], "description": "存在较多执行时间较长的SQL", "rule_name": "long_sql_gsdb", "id": "12424", "rule_expression": "([metric,2820158] >([num,$1]*[cib,2830001,dn_nodes]))||([metric,2820158] >([num,$2]*[cib,2830001,cn_nodes]))", "db_type": "GaussDB", "warning_level": "2", "warning_message": "存在较多执行时间较长的SQL({[metric,2820158]})，数据库性能可能 存在问题"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB CPU相关指标分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库CPU分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - CPU时间"}, {"knowledge_description": "TOP SQL - 生成执行计划时间"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用网络流量分析"}], "description": "活跃会话数超过CPU数量，数据库可能存在性能风险", "rule_name": "active_session_gsdb_error", "id": "13747", "rule_expression": "([metric,2820102,_cn_total]>([num,$1]*[cib,2830001,cn_cpu_total] ))||([metric,2820102,_dn_total]>([num,$1]*[cib,2830001,dn_cpu_total] ))", "db_type": "GaussDB", "warning_level": "3", "warning_message": "高斯集群的活跃会话数过多，超过计算节点的CPU线程数数倍，数据库可能存在风险（计算节点总活跃会话数{[metric,2820102,_cn_total]}/{[metric,2820102,_dn_total]}）"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_description": "集群负载分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_description": "GaussDB锁等待分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "数据库锁相关指标分析"}, {"knowledge_description": "TOP SQL - 执行时间"}], "description": "共享缓冲区命中率不理想", "rule_name": "buffer_cache_suboptimal_gsdb", "id": "12224", "rule_expression": "[metric,2820112]<[num,$1] && [metric,2820113,total]>[num,$2]", "db_type": "GaussDB", "warning_level": "2", "warning_message": "共享缓冲区命中率不理想,数据库性能存在问题。（共享池命中率{[metric,2820112]}]"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - 硬解析数"}, {"knowledge_description": "TOP SQL - 解析时间"}, {"knowledge_description": "TOP SQL - 生成执行计划时间"}, {"knowledge_description": "TOP SQL - 重写时间"}, {"knowledge_description": "TOP SQL - 软解析数"}], "description": "CN节点每秒硬解析数量过大，数据库性能存在风险", "rule_name": "hard_parse_cn_gsdb", "id": "14708", "rule_expression": "([metric,2823167,_cn_total])>([num,$1])*[cib,2830002,_cn_cpu_total])", "db_type": "GaussDB", "warning_level": "2", "warning_message": "每秒硬解析数量过大（{[metric,2823167,_cn_total]}），数据库性能存在风险"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - CPU时间"}, {"knowledge_description": "TOP SQL - 执行器内执行时间"}, {"knowledge_description": "TOP SQL - 生成执行计划时间"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用网络流量分析"}], "description": "存在较多执行时间较长的SQL", "rule_name": "long_sql_gsdb", "id": "14867", "rule_expression": "([metric,2820158] >([num,$1]*[cib,2830001,dn_nodes]))||([metric,2820158] >([num,$2]*[cib,2830001,cn_nodes]))", "db_type": "GaussDB", "warning_level": "2", "warning_message": "存在较多执行时间较长的SQL({[metric,2820158]})，数据库性能可能 存在问题"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB内存方面指标异常分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库内存分析"}, {"knowledge_description": "集群内存分析"}, {"knowledge_description": "集群内存过载分析"}, {"knowledge_description": "集群会话的内存占用情况"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - 解析时间"}], "description": "存在物理内存不可用率过高的服务器，数据库存在较大风险", "rule_name": "mem_usage_gsdb", "id": "14782", "rule_expression": "([metric,1001014,max]>[num,$1])||(([metric,1001014,max]>[num,$2])&&([metric,1001031,max]>[num,$3]))", "db_type": "GaussDB", "warning_level": "4", "warning_message": "存在物理内存不可用率过高的服务器（{[metric,1001014,max]}），数据库存在较大风险"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB内存方面指标异常分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库内存分析"}, {"knowledge_description": "集群内存分析"}, {"knowledge_description": "集群内存过载分析"}, {"knowledge_description": "集群会话的内存占用情况"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - 解析时间"}], "description": "存在物理内存不可用率过高的服务器，数据库存在较大风险", "rule_name": "mem_usage_gsdb", "id": "14987", "rule_expression": "([metric,1001014,max]>[num,$1])||(([metric,1001014,max]>[num,$2])&&([metric,1001031,max]>[num,$3]))", "db_type": "GaussDB", "warning_level": "4", "warning_message": "存在物理内存不可用率过高的服务器（{[metric,1001014,max]}），数据库存在较大风险"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GasusDB IO相关指标"}, {"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-数据库IO分析"}, {"knowledge_name": "数据库物理读IO分析", "knowledge_description": "数据库物理读IO分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}], "description": "不同服务器的IO延时差异较大，系统性能存在风险", "rule_name": "IO_LATENCY_nobalance_gsdb", "id": "14977", "rule_expression": "(([metric,1001006,min])<[num,5])&&(([metric,1001006,max]/[metric,1001006,min])>[num,$1]))||(([metric,1001006,min])>[num,8])&&(([metric,1001006,max]/[metric,1001006,min])>[num,$2]))", "db_type": "GaussDB", "warning_level": "2", "warning_message": "各组件的IO延时差异较大，系统性能存在风险（max{[metric,1001006,max]},min{[metric,1001006,min]}）"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_description": "GaussDB锁等待分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "数据库锁相关指标分析"}, {"knowledge_description": "TOP SQL - CPU时间"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用文件系统使用率分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用网络流量分析"}], "description": "活跃会话数过多，数据库可能存在风险", "rule_name": "active_session_gsdb_warn", "id": "14686", "rule_expression": "([metric,2820102,_cn_total]>([num,$1]*[cib,2830001,cn_cpu_total] ))||([metric,2820102,_dn_total]>([num,$1]*[cib,2830001,dn_cpu_total] ))", "db_type": "GaussDB", "warning_level": "2", "warning_message": "高斯集群的活跃会话数过多，数据库可能存在风险，计算节点总活跃会话数(cn:{[metric,2820102,_cn_total]},dn:{[metric,2820102,_dn_total]})"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用网络流量分析"}], "description": "DN节点每秒物理读异常增长，说明应用或者数据库出现了异常", "rule_name": "more_phyiscal_read_dn_gsdb", "id": "14992", "rule_expression": "(([metric,2820114,_dn_total]>[num,$1]) || ([metric ,1000105,2820114-_dn_total][oper,eq][str,3])) && ([metric,2820114,_dn_total]>[num,$2])", "db_type": "GaussDB", "warning_level": "2", "warning_message": "DN节点每秒物理读({[metric,2820114],_dn_total})异常增长，应用或者数据库出现了异常"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB CPU相关指标分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库CPU分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - CPU时间"}, {"knowledge_description": "TOP SQL - 生成执行计划时间"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用网络流量分析"}], "description": "活跃会话数超过CPU数量，数据库可能存在性能风险", "rule_name": "active_session_gsdb_error", "id": "14684", "rule_expression": "([metric,2820102,_cn_total]>([num,$1]*[cib,2830001,cn_cpu_total] ))||([metric,2820102,_dn_total]>([num,$1]*[cib,2830001,dn_cpu_total] ))", "db_type": "GaussDB", "warning_level": "3", "warning_message": "高斯集群的活跃会话数过多，超过计算节点的CPU线程数数倍，数据库可能存在风险（计算节点总活跃会话数{[metric,2820102,_cn_total]}/{[metric,2820102,_dn_total]}）"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_description": "GaussDB锁等待分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "数据库锁相关指标分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "TOP SQL - CPU时间"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - 硬解析数"}, {"knowledge_description": "TOP SQL - 生成执行计划时间"}], "description": "集中式模式下阻塞或者等待会话数量过多，数据库性能存在风险", "rule_name": "block_session_dn_gsdb", "id": "14690", "rule_expression": "([metric,2820103]>([num,$1])*[cib,2830002,_dn_cpu_total]))", "db_type": "GaussDB", "warning_level": "3", "warning_message": "集中式模式下阻塞或者等待会话数量过多，数据库性能存在风险（{[metric,2820103]}）"}}
{"type": "rule", "data": {"description": "CN或者DN节点的总DB_TIME异常", "rule_name": "abnormal_db_time_gsdb", "id": "14676", "rule_expression": "([metric ,1000105,2823139-_cn_total][oper,eq][str,3])) && ([metric,2823139,_cn_total]>[num,$1])||([metric ,1000105,2823139-_dn_total][oper,eq][str,3])) && ([metric,2823139,_dn_total]>[num,$2])", "db_type": "GaussDB", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "集群状态检查"}], "description": "CN进程存在异常", "rule_name": "abnormal_cn_proc_gsdb", "id": "14675", "rule_expression": "[metric,2823325]>[num,0]", "db_type": "GaussDB", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "TOP 慢查询"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - CPU时间"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_description": "GaussDB锁等待分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "数据库锁相关指标分析"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用网络流量分析"}], "description": "可能是慢SQL过多而导致的活跃会话数过高", "rule_name": "active_session_slow_sql_gsdb", "id": "14688", "rule_expression": "(([metric,2820102] >([num,$1]*[cib,2830002,_cn_cpu_total]))||([metric,2820102] >([num,$2]*[cib,2830002,_dn_cpu_total])))&&(([metric,2820158] >([num,$3]*[cib,2830002,_cn_cpu_total]))||([metric,2820158] >([num,$4]*[cib,2830002,_dn_cpu_total])))", "db_type": "GaussDB", "warning_level": "2", "warning_message": "可能是慢SQL过多而导致的活跃会话数过高，慢sql数量{[metric,2820158]},活跃会话数{[metric,2820102]}"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "集群状态检查"}], "description": "存在异常ETCD节点", "rule_name": "abnormal_etcd_gsdb", "id": "14826", "rule_expression": "[metric,2823304]>=[num,$1]", "db_type": "GaussDB", "warning_level": "3", "warning_message": "存在异常etcd节点，请尽快确认是否存在问题(故障节点数{[metric,2823304]})"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "集群状态检查"}], "description": "存在异常DN节点", "rule_name": "abnormal_dn_gsdb", "id": "14937", "rule_expression": "[metric,2823304]>=[num,$1]", "db_type": "GaussDB", "warning_level": "3", "warning_message": "存在异常DN节点，请尽快确认是否存在问题(故障DN节点数{[metric,2823301]})"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "集群状态检查"}], "description": "存在异常ETCD节点", "rule_name": "abnormal_etcd_gsdb", "id": "14576", "rule_expression": "[metric,2823304]>=[num,$1]", "db_type": "GaussDB", "warning_level": "3", "warning_message": "存在异常etcd节点，请尽快确认是否存在问题(故障节点数{[metric,2823304]})"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "正确配置archive_command命令", "knowledge_description": "分析数据库WAL日志归档失败"}, {"knowledge_description": "通用文件系统使用率分析"}], "description": "发生未成功归档现象", "rule_name": "failed_archive_pg", "id": "14707", "rule_expression": "[cib,2220002,archive_mode][oper,eq][str,on] && [metric,2820142]>[num,$1]", "db_type": "GaussDB", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "死元组达到清理要求未清理的分析", "knowledge_description": "死元组达到清理要求未清理的分析"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}], "description": "存在死元组比例较大的大表", "rule_name": "dead_tuple_not_cleanup_gsdb", "id": "14701", "rule_expression": "[metric,2823341,_dn_total]>[num,$1] ", "db_type": "GaussDB", "warning_level": "2", "warning_message": "存在死元组数到达清理阈值而未清理的表（{[metric,2823341,_dn_total]}），会造成空间浪费和性能问题"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "Top SQL-按物理写排序", "knowledge_description": "Top SQL-按物理写排序"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}], "description": "Backend写脏块比例过高，系统性能存在问题", "rule_name": "Pagewriter_flush_gsdb", "id": "14730", "rule_expression": " [metric,2829015,min]<[num,$1]", "db_type": "GaussDB", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "数据库连接失败分析", "knowledge_description": "数据库连接失败分析"}], "description": "KYD到pg数据库连接配置有问题，导致连接失败", "rule_name": "dsmart_connection_error_gsdb", "id": "14702", "rule_expression": "[metric,1000000][oper,contains][str,FATAL: database] && [metric,1000000][oper,contains][str,does not exist]", "db_type": "GaussDB", "warning_level": "4", "warning_message": "dsmart到pg数据库连接配置有问题，导致连接失败"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "集群状态检查"}], "description": "存在异常GTM节点", "rule_name": "abnormal_gtm_gsdb", "id": "13752", "rule_expression": "[metric,2823304]>=[num,$1]", "db_type": "GaussDB", "warning_level": "3", "warning_message": "存在异常GTM节点，请尽快确认是否存在问题(故障GTM节点数{[metric,2823303]})"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "集群状态检查"}], "description": "存在异常ETCD节点", "rule_name": "abnormal_etcd_gsdb", "id": "13753", "rule_expression": "[metric,2823304]>=[num,$1]", "db_type": "GaussDB", "warning_level": "3", "warning_message": "存在异常etcd节点，请尽快确认是否存在问题(故障节点数{[metric,2823304]})"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "集群状态检查"}], "description": "存在异常GTM节点", "rule_name": "abnormal_gtm_gsdb", "id": "14827", "rule_expression": "[metric,2823304]>=[num,$1]", "db_type": "GaussDB", "warning_level": "3", "warning_message": "存在异常GTM节点，请尽快确认是否存在问题(故障GTM节点数{[metric,2823303]})"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "集群状态检查"}], "description": "存在异常ETCD节点", "rule_name": "abnormal_etcd_gsdb", "id": "14681", "rule_expression": "[metric,2823304]>=[num,$1]", "db_type": "GaussDB", "warning_level": "3", "warning_message": "存在异常etcd节点，请尽快确认是否存在问题(故障节点数{[metric,2823304]})"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB CPU相关指标分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库CPU分析"}, {"knowledge_description": "通用文件系统使用率分析"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "TOP SQL - CPU时间"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - 硬解析数"}, {"knowledge_description": "TOP SQL - 解析时间"}, {"knowledge_description": "TOP SQL - 生成执行计划时间"}], "description": "不同CN节点CPU使用不均衡", "rule_name": "cpu_nobalance_cn_gsdb", "id": "14589", "rule_expression": "(([metric,1001003,cn_min])<[num,30])&&(([metric,1001003,cn_max]/[metric,1001003,cn_min])>[num,$1]))||(([metric,1001003,cn_min])>=[num,30])&&(([metric,1001003,cn_max]/[metric,1001003,cn_min])>[num,$2]))", "db_type": "GaussDB", "warning_level": "2", "warning_message": "不同CN节点CPU使用不均衡"}}
{"type": "rule", "data": {"description": "CN或者DN节点的总DB_TIME异常", "rule_name": "abnormal_db_time_gsdb", "id": "14571", "rule_expression": "([metric ,1000105,2823139-_cn_total][oper,eq][str,3])) && ([metric,2823139,_cn_total]>[num,$1])||([metric ,1000105,2823139-_dn_total][oper,eq][str,3])) && ([metric,2823139,_dn_total]>[num,$2])", "db_type": "GaussDB", "warning_level": "2"}}
{"type": "rule", "data": {"description": "CMSERVER发生过切换", "rule_name": "switchover_cmserver_gsdb", "id": "14631", "rule_expression": "[metric,2823317]>[num,0]", "db_type": "GaussDB", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_description": "TOP SQL - 执行次数"}], "description": "数据库CN中的DML比例异常（分布式专用）", "rule_name": "abnormal_dml_ratio_cn_gsdb", "id": "14572", "rule_expression": "(([metric,2829018,_cn_total]>[num,$1]) || ([metric ,1000105,2829018-_cn_total][oper,eq][str,3])) && ([metric,2829018,_cn_total]>[num,$2])", "db_type": "GaussDB", "warning_level": "2", "warning_message": "数据库CN中的DML比例异常（{[metric,2829018,_cn_total]}）(分布式专用)"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}], "description": "数据库DN中的DML比例异常（集中式专用）", "rule_name": "abnormal_dml_ratio_dn_gsdb", "id": "14573", "rule_expression": "(([metric,2829018,_dn_total]>[num,$1]) || ([metric ,1000105,2829018-_dn_total][oper,eq][str,3])) && ([metric,2829018,_dn_total]>[num,$2])", "db_type": "GaussDB", "warning_level": "2", "warning_message": "数据库DN中的DML比例异常({[metric,2829018,_dn_total]})(集中式专用)"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "集群状态检查"}], "description": "存在异常DN节点", "rule_name": "abnormal_dn_gsdb", "id": "14574", "rule_expression": "[metric,2823304]>=[num,$1]", "db_type": "GaussDB", "warning_level": "3", "warning_message": "存在异常DN节点，请尽快确认是否存在问题(故障DN节点数{[metric,2823301]})"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "集群状态检查"}], "description": "存在异常的DN进程", "rule_name": "abnormal_dn_proc_gsdb", "id": "14575", "rule_expression": "[metric,2823326]>[num,0]", "db_type": "GaussDB", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "集群状态检查"}], "description": "存在异常GTM节点", "rule_name": "abnormal_gtm_gsdb", "id": "14577", "rule_expression": "[metric,2823304]>=[num,$1]", "db_type": "GaussDB", "warning_level": "3", "warning_message": "存在异常GTM节点，请尽快确认是否存在问题(故障GTM节点数{[metric,2823303]})"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "集群状态检查"}], "description": "GTM进程存在异常", "rule_name": "abnormal_gtm_proc_gsdb", "id": "14578", "rule_expression": "[metric,2823327]>[num,0]", "db_type": "GaussDB", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库CPU分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB CPU相关指标分析"}, {"knowledge_name": "数据库CPU高分析", "knowledge_description": "数据库CPU高分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass 引发CPU异常的SQL相关指标分析"}], "description": "数据库CPU使用率过高，可能存在瓶颈", "rule_name": "cpu_used_higher_gsdb", "id": "14592", "rule_expression": "([metric,1001003,max] >[num,$1])||([metric,1001003,avg] >[num,$2])", "db_type": "GaussDB", "warning_level": "4", "warning_message": "当前CPU使用率过高，当前CPU使用率平均值为：{[metric,1001003,avg]}%，当前CPU使用率最大值为：{[metric,1001003,max]}%"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "数据库连接失败分析", "knowledge_description": "数据库连接失败分析"}], "description": "KYD到pg数据库连接配置有问题，导致连接失败", "rule_name": "dsmart_connection_error_gsdb", "id": "14597", "rule_expression": "[metric,1000000][oper,contains][str,FATAL: database] && [metric,1000000][oper,contains][str,does not exist]", "db_type": "GaussDB", "warning_level": "4", "warning_message": "dsmart到pg数据库连接配置有问题，导致连接失败"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "数据库连接失败分析", "knowledge_description": "数据库连接失败分析"}], "description": "KYD连接PG数据库的用户密码错误", "rule_name": "dsmart_logon_failed_gsdb", "id": "14598", "rule_expression": "[metric,1000000][oper,contains][str,password authentication failed]", "db_type": "GaussDB", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "运维对象连接失败，请检查运维对象是否down", "knowledge_description": "运维对象连接状态分析"}], "description": "KYD采样SQL在pg数据库执行失败", "rule_name": "dsmart_monitor_sql_execute_failed_gsdb", "id": "14599", "rule_expression": "[metric,1000000] [oper,contains][str,SQL执行失败]", "db_type": "GaussDB", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "分布式数据库文件系统使用率指标分析"}, {"knowledge_description": "通用文件系统使用率分析"}], "description": "数据库节点软件安装所在文件系统空间使用率过高", "rule_name": "filesystem_soft_usage_gsdb", "id": "14803", "rule_expression": "([metric,1000320,_dn_max]>[num,$1])||([metric,1000320,_cn_max]>[num,$2])", "db_type": "GaussDB", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB内存方面指标异常分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库内存分析"}, {"knowledge_description": "集群内存分析"}, {"knowledge_description": "集群内存过载分析"}, {"knowledge_description": "集群会话的内存占用情况"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - 解析时间"}], "description": "存在物理内存不可用率过高的服务器，数据库存在较大风险", "rule_name": "mem_usage_gsdb", "id": "14783", "rule_expression": "([metric,1001014,max]>[num,$1])||(([metric,1001014,max]>[num,$2])&&([metric,1001031,max]>[num,$3]))", "db_type": "GaussDB", "warning_level": "4", "warning_message": "存在物理内存不可用率过高的服务器（{[metric,1001014,max]}），数据库存在较大风险"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "正确配置archive_command命令", "knowledge_description": "分析数据库WAL日志归档失败"}, {"knowledge_description": "通用文件系统使用率分析"}], "description": "发生未成功归档现象", "rule_name": "failed_archive_pg", "id": "14602", "rule_expression": "[cib,2220002,archive_mode][oper,eq][str,on] && [metric,2820142]>[num,$1]", "db_type": "GaussDB", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用文件系统使用率分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用网络流量分析"}], "description": "数据库采集任务严重超时，数据库存在严重性能风险", "rule_name": "collector_exec_slow_gsdb", "id": "14587", "rule_expression": "[metric,1000101] >([metric hour avg,1000101]*[num,$1])", "db_type": "GaussDB", "warning_level": "4", "warning_message": "数据库采集任务严重超时，数据库存在严重性能风险(采集延时{[metric,1000101] })"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "Top SQL-按处理行数排序", "knowledge_description": "Top SQL-按处理行数排序"}, {"knowledge_name": "显示数据库中无效索引", "knowledge_description": "显示数据库中无效索引"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_name": "获取执行时间比较高的TOP SQL", "knowledge_description": "获取执行时间比较高的TOP SQL"}, {"knowledge_name": "区分top sql是逻辑读还是执行次数增多进行进一步诊断", "knowledge_description": "逻辑读较多的TOP SQL"}], "description": "索引没有用被有效利用", "rule_name": "index_used_suboptimal_gsdb", "id": "14605", "rule_expression": " [metric,2820120,_dn_total]>[num,$1] && [metric,2820109]<[num,$2]", "db_type": "GaussDB", "warning_level": "2", "warning_message": "可能因为索引设计不合理而导致返回行数比例过低，索引使用效率过低"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GasusDB IO相关指标"}, {"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-数据库IO分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "通用IO分析"}], "description": "可能因为IO异常缓慢而导致活跃会话数过高", "rule_name": "active_session_ioslow_gsdb", "id": "14582", "rule_expression": "(([metric,2820102] >([num,$1]*[cib,2830002,_cn_cpu_total]))||([metric,2820102] >([num,$2]*[cib,2830002,_dn_cpu_total])))&&([metric,1001006,max] >[num,$3])", "db_type": "GaussDB", "warning_level": "2", "warning_message": "可能因为IO异常缓慢而导致活跃会话数过高，当前活跃会话数{[metric,2820102]},IO延时{[metric,1001006,max]}"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "PostgreSQL长事务分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_description": "GaussDB锁等待分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "数据库锁相关指标分析"}, {"knowledge_description": "TOP SQL - 执行次数"}], "description": "如果事务提交比例低于历史平均水平的50%，系统可能存在隐患", "rule_name": "transaction_commit_ratio_low_gsdb", "id": "14639", "rule_expression": "[metric,2820108] < [metric hour avg,2820108]*[num,$1]", "db_type": "GaussDB", "warning_level": "3", "warning_message": "事务提交比例({[metric,2820108]})低于小时平均水平的50%，系统可能存在隐患"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_description": "GaussDB锁等待分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "数据库锁相关指标分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "TOP SQL - CPU时间"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - 硬解析数"}, {"knowledge_description": "TOP SQL - 生成执行计划时间"}], "description": "集中式模式下阻塞或者等待会话数量过多，数据库性能存在风险", "rule_name": "block_session_dn_gsdb", "id": "14585", "rule_expression": "([metric,2820103]>([num,$1])*[cib,2830002,_dn_cpu_total]))", "db_type": "GaussDB", "warning_level": "3", "warning_message": "集中式模式下阻塞或者等待会话数量过多，数据库性能存在风险（{[metric,2820103]}）"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库CPU分析"}, {"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-数据库IO分析"}, {"knowledge_description": "GaussDB锁等待分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "数据库锁相关指标分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用文件系统使用率分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用网络流量分析"}], "description": "数据库连接严重超时，数据库存在巨大风险", "rule_name": "connect_slow_gsdb", "id": "14588", "rule_expression": "[metric,1000102] >([metric hour avg,1000102]*[num,$1]) && ([metric,1000102] >[num,$2])", "db_type": "GaussDB", "warning_level": "4", "warning_message": "数据库连接严重超时，数据库存在巨大风险（{[metric,1000102}}"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB CPU相关指标分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库CPU分析"}, {"knowledge_description": "TOP SQL - CPU时间"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用网络流量分析"}], "description": "DN节点CPU使用率不均衡（集中式勿开）", "rule_name": "cpu_nobalance_dn_gsdb", "id": "14590", "rule_expression": "(([metric,1001003,dn_min])<[num,30])&&(([metric,1001003,dn_max]/[metric,1001003,dn_min])>[num,$1]))||(([metric,1001003,dn_min])>=[num,30])&&(([metric,1001003,dn_max]/[metric,1001003,dn_min])>[num,$2]))", "db_type": "GaussDB", "warning_level": "2", "warning_message": "DN节点CPU使用率不均衡"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "死元组达到清理要求未清理的分析", "knowledge_description": "死元组达到清理要求未清理的分析"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}], "description": "存在死元组比例较大的大表", "rule_name": "dead_tuple_not_cleanup_gsdb", "id": "14596", "rule_expression": "[metric,2823341,_dn_total]>[num,$1] ", "db_type": "GaussDB", "warning_level": "2", "warning_message": "存在死元组数到达清理阈值而未清理的表（{[metric,2823341,_dn_total]}），会造成空间浪费和性能问题"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_description": "集群负载分析"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用文件系统使用率分析"}, {"knowledge_description": "通用IO分析"}], "description": "DN节点未落盘脏页数量过多", "rule_name": "dirty_pages_dn_gsdb", "id": "15052", "rule_expression": "[metric,2823398,_dn_max]>[num,$1]", "db_type": "GaussDB", "warning_level": "2", "warning_message": "DN节点未落盘脏页数量过多（{[metric,2823398,_dn_max]}）"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "数据库连接失败分析", "knowledge_description": "数据库连接失败分析"}, {"knowledge_description": "通用网络流量分析"}], "description": "KYD客户端到PG数据库网络出现问题或者KYD到PG数据库连接串端口配置出错，请检查相关配置", "rule_name": "dsmart_network_failed_gsdb", "id": "14600", "rule_expression": "[metric,1000000][oper,contains][str,Check that the hostname and port are correct]", "db_type": "GaussDB", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "死元组达到清理要求未清理的分析", "knowledge_description": "死元组达到清理要求未清理的分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_description": "GaussDB锁等待分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "数据库锁相关指标分析"}, {"knowledge_description": "GaussDB长事务分析"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用文件系统使用率分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用网络流量分析"}], "description": "长事务过多或持续时间过长", "rule_name": "long_trx_gsdb", "id": "14614", "rule_expression": "[metric,2820105,_cn_total]>[num,$1] || [metric,2820106,_cn_max]>[num,$2]", "db_type": "GaussDB", "warning_level": "2", "warning_message": "长事务数{[metric,2820105]}个，最长事务持续时间{[metric,2820106]}"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - CPU时间"}, {"knowledge_description": "TOP SQL - 执行器内执行时间"}, {"knowledge_description": "TOP SQL - 生成执行计划时间"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用网络流量分析"}], "description": "存在较多执行时间较长的SQL", "rule_name": "long_sql_gsdb", "id": "14611", "rule_expression": "([metric,2820158] >([num,$1]*[cib,2830001,dn_nodes]))||([metric,2820158] >([num,$2]*[cib,2830001,cn_nodes]))", "db_type": "GaussDB", "warning_level": "2", "warning_message": "存在较多执行时间较长的SQL({[metric,2820158]})，数据库性能可能 存在问题"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB CPU相关指标分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass 引发CPU异常的SQL相关指标分析"}, {"knowledge_description": "集群负载分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_description": "TOP SQL - CPU时间"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用网络流量分析"}], "description": "长时间运行的查询数超出CPU线程数的一半，系统存在较大风险", "rule_name": "long_sql_over_cpu_gsdb", "id": "14612", "rule_expression": "([metric,2820158] >([num,$1]*[cib,2830002,_cn_cpu_total]))||([metric,2820158] >([num,$2]*[cib,2830002,_dn_cpu_total]))", "db_type": "GaussDB", "warning_level": "3", "warning_message": "长时间运行的查询数超出CPU线程数的一半，系统存在较大风险({[metric,2820158] })"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "数据库等待事件分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_name": "数据库负载维度分析", "knowledge_description": "数据库负载维度分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用网络流量分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - 解析时间"}], "description": "LwLock等待数量过多，系统存在风险", "rule_name": "lwlock_gsdb", "id": "14615", "rule_expression": "([metric,2820102]>[num,$1]) && ([metric,2829016,total]>[num,$2]*([cib,2830001,dn_nodes]+[cib,2830001,cn_nodes]))", "db_type": "GaussDB", "warning_level": "3", "warning_message": "LwLock等待数量过多（{[metric,2820317]}），系统存在风险"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "集群内存分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB内存方面指标异常分析"}, {"knowledge_description": "集群内存过载分析"}, {"knowledge_description": "集群会话的内存占用情况"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库内存分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - 解析时间"}], "description": "CN节点的内存使用率不均衡", "rule_name": "mem_nobalance_cn_gsdb", "id": "14616", "rule_expression": "(([metric,1001004,cn_min])<[num,50])&&(([metric,1001004,cn_max]/[metric,1001004,cn_min])>[num,$1]))||(([metric,1001004,cn_min])>=[num,50])&&(([metric,1001004,cn_max]/[metric,1001004,cn_min])>[num,$2]))", "db_type": "GaussDB", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_description": "TOP SQL - 执行次数"}], "description": "CN节点上SELECT数量异常变化", "rule_name": "more_select_cn_gsdb", "id": "14623", "rule_expression": "(([metric,2823151,_cn_total]>[num,$1]) || ([metric ,1000105,2823151-_cn_total][oper,eq][str,3])) && ([metric,2823151,_cn_total]>[num,$2])", "db_type": "GaussDB", "warning_level": "2", "warning_message": "CN节点上SELECT数量异常变化"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}], "description": "DN节点上SELECT数量异常变化", "rule_name": "more_select_dn_gsdb", "id": "14624", "rule_expression": "(([metric,2823151,_dn_total]>[num,$1]) || ([metric ,1000105,2823151-_dn_total][oper,eq][str,3])) && ([metric,2823151,_dn_total]>[num,$2])", "db_type": "GaussDB", "warning_level": "2"}}
{"type": "rule", "data": {"description": "NAS使用率过高", "rule_name": "nas_usage_gsdb", "id": "14816", "rule_expression": "[metric,2823392]>[num,$1]", "db_type": "GaussDB", "warning_level": "2", "warning_message": "NAS使用率过高，备份存在容量风险（{[metric,2823392]}）"}}
{"type": "rule", "data": {"description": "复制槽保留WAL数量过大", "rule_name": "repl_slot_keep_wal_gsdb", "id": "15057", "rule_expression": "[metric,2823400,_dn_max]>[num,$1]", "db_type": "GaussDB", "warning_level": "2"}}
{"type": "rule", "data": {"description": "CN发生过切换", "rule_name": "switchover_cn_gsdb", "id": "14632", "rule_expression": "[metric,2823319]>[num,0]", "db_type": "GaussDB", "warning_level": "4"}}
{"type": "rule", "data": {"description": "DN节点发生过切换", "rule_name": "switchover_dn_gsdb", "id": "14633", "rule_expression": "[metric,2823320]>[num,0]", "db_type": "GaussDB", "warning_level": "4"}}
{"type": "rule", "data": {"description": "ETCD发生过切换", "rule_name": "switchover_etcd_gsdb", "id": "14634", "rule_expression": "[metric,2823318]>[num,0]", "db_type": "GaussDB", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "集群状态检查"}], "description": "GTM发生过切换", "rule_name": "switchover_gtm_gsdb", "id": "14635", "rule_expression": "[metric,2823321]>[num,0]", "db_type": "GaussDB", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用网络流量分析"}], "description": "DN节点每秒物理读异常增长，说明应用或者数据库出现了异常", "rule_name": "more_phyiscal_read_dn_gsdb", "id": "14622", "rule_expression": "(([metric,2820114,_dn_total]>[num,$1]) || ([metric ,1000105,2820114-_dn_total][oper,eq][str,3])) && ([metric,2820114,_dn_total]>[num,$2])", "db_type": "GaussDB", "warning_level": "2", "warning_message": "DN节点每秒物理读({[metric,2820114],_dn_total})异常增长，应用或者数据库出现了异常"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "Top SQL-按临时读写排序", "knowledge_description": "Top SQL-按临时读写排序"}, {"knowledge_description": "检查temp_buffers参数"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}], "description": "检测到临时文件使用量过多", "rule_name": "tmp_files_gsdb", "id": "14638", "rule_expression": "[metric,2820001]>[num,$1] &&( [metric,2820125,total]>([num,$2]*([cib,2830001,cn_nodes]+[cib,2830001,dn_nodes])))", "db_type": "GaussDB", "warning_level": "2", "warning_message": "检测到临时文件使用量过多({[metric,2820125,total]})"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "数据库连接失败分析", "knowledge_description": "数据库连接失败分析"}, {"knowledge_description": "通用网络流量分析"}], "description": "KYD客户端到PG数据库网络出现问题或者KYD到PG数据库连接串端口配置出错，请检查相关配置", "rule_name": "dsmart_network_failed_gsdb", "id": "14705", "rule_expression": "[metric,1000000][oper,contains][str,Check that the hostname and port are correct]", "db_type": "GaussDB", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "集群负载分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "通用文件系统使用率分析"}], "description": "每秒WAL产生量过大，数据库性能存在风险", "rule_name": "wal_more_size_gsdb", "id": "14641", "rule_expression": "([metric,2823034,_dn_total]>([num,$1]*[cib,2830001,dn_nodes]))&&([metric,2820334,IO_EVENT WALWrite]>[num,$2])", "db_type": "GaussDB", "warning_level": "2", "warning_message": "每秒WAL产生量过大，数据库性能存在风险,每秒DN产生WAL的块数为{[metric,2823034,_dn_total]}，WAL写入平均等待延时为{[metric,2820334,IO_EVENT WALWrite]}"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_name": "数据库负载维度分析", "knowledge_description": "数据库负载维度分析"}, {"knowledge_description": "GaussDB长事务分析"}, {"knowledge_description": "GaussDB锁等待分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "数据库锁相关指标分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}], "description": "回滚比例过高，数据库存在问题", "rule_name": "rollback_high_gsdb", "id": "14627", "rule_expression": "([metric,2829010,max])>[num,$1])&&([metric,2820117,total])>[num,$2])", "db_type": "GaussDB", "warning_level": "3", "warning_message": "回滚比例过高，数据库存在问题（{[metric,2829010,max]}）"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - 解析时间"}, {"knowledge_description": "TOP SQL - 生成执行计划时间"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用内存使用情况分析"}], "description": "DN节点每秒逻辑读异常，说明应用或者数据库出现了异常", "rule_name": "more_logic_read_dn_gsdb", "id": "14621", "rule_expression": "(([metric,2820113,_dn_total]>[num,$1]) || ([metric,1000105,2820113-_dn_total][oper,eq][str,3])) && ([metric,2820113,_dn_total]>[num,$2])", "db_type": "GaussDB", "warning_level": "2", "warning_message": "DN节点每秒逻辑读异常增加，说明应用或者数据库出现了异常，当前每秒逻辑读{[metric,2820113,_dn_total]}"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}], "description": "DN节点上DML数量异常变化", "rule_name": "more_dml_dn_gsdb", "id": "14619", "rule_expression": "(([metric,2823156,_dn_total]>[num,$1]) || ([metric ,1000105,2823156-_dn_total][oper,eq][str,3])) && ([metric,2823156,_dn_total]>[num,$2])", "db_type": "GaussDB", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_description": "TOP SQL - 执行次数"}], "description": "CN节点上DML数量异常变化", "rule_name": "more_dml_cn_gsdb", "id": "14618", "rule_expression": "(([metric,2823156,_cn_total]>[num,$1]) || ([metric ,1000105,2823156-_cn_total][oper,eq][str,3])) && ([metric,2823156,_cn_total]>[num,$2])", "db_type": "GaussDB", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "GaussDB锁等待分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "数据库锁相关指标分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_description": "集群负载分析"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - 执行时间"}], "description": "每秒死锁数过多，系统存在风险", "rule_name": "dead_locks_gsdb", "id": "14700", "rule_expression": "[metric,2820118,total]>[num,$1]", "db_type": "GaussDB", "warning_level": "4", "warning_message": "每秒死锁数过多，系统存在风险(total:{[metric,2820118,total]},cn:{[metric,2820118,_cn_total]},dn:{[metric,2820118,_dn_total]})"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_description": "TOP SQL - 执行次数"}], "description": "数据库CN中的DML比例异常（分布式专用）", "rule_name": "abnormal_dml_ratio_cn_gsdb", "id": "14677", "rule_expression": "(([metric,2829018,_cn_total]>[num,$1]) || ([metric ,1000105,2829018-_cn_total][oper,eq][str,3])) && ([metric,2829018,_cn_total]>[num,$2])", "db_type": "GaussDB", "warning_level": "2", "warning_message": "数据库CN中的DML比例异常（{[metric,2829018,_cn_total]}）(分布式专用)"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}], "description": "数据库DN中的DML比例异常（集中式专用）", "rule_name": "abnormal_dml_ratio_dn_gsdb", "id": "14678", "rule_expression": "(([metric,2829018,_dn_total]>[num,$1]) || ([metric ,1000105,2829018-_dn_total][oper,eq][str,3])) && ([metric,2829018,_dn_total]>[num,$2])", "db_type": "GaussDB", "warning_level": "2", "warning_message": "数据库DN中的DML比例异常({[metric,2829018,_dn_total]})(集中式专用)"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库CPU分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB CPU相关指标分析"}, {"knowledge_name": "数据库CPU高分析", "knowledge_description": "数据库CPU高分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass 引发CPU异常的SQL相关指标分析"}], "description": "数据库CPU使用率过高，可能存在瓶颈", "rule_name": "cpu_used_higher_gsdb", "id": "14697", "rule_expression": "([metric,1001003,max] >[num,$1])||([metric,1001003,avg] >[num,$2])", "db_type": "GaussDB", "warning_level": "4", "warning_message": "当前CPU使用率过高，当前CPU使用率平均值为：{[metric,1001003,avg]}%，当前CPU使用率最大值为：{[metric,1001003,max]}%"}}
{"type": "rule", "data": {"description": "数据库中出现过组件主从切换", "rule_name": "db_role_switch_gsdb", "id": "14699", "rule_expression": "([metric,2823317]>[num,$1])||([metric,2823318]>[num,$1])||([metric,2823319]>[num,$1])||([metric,2823320]>[num,$1])||([metric,2823321]>[num,$1])", "db_type": "GaussDB", "warning_level": "4", "warning_message": "数据库中出现过组件主从切换（CM：{[metric,2823317]}，ETCD：{[metric,2823318]}，CN：{[metric,2823319]}，DN：{[metric,2823320]}，GTM：{[metric,2823321]}）"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "数据库连接失败分析", "knowledge_description": "数据库连接失败分析"}], "description": "KYD连接PG数据库的用户密码错误", "rule_name": "dsmart_logon_failed_gsdb", "id": "14703", "rule_expression": "[metric,1000000][oper,contains][str,password authentication failed]", "db_type": "GaussDB", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "运维对象连接失败，请检查运维对象是否down", "knowledge_description": "运维对象连接状态分析"}], "description": "KYD采样SQL在pg数据库执行失败", "rule_name": "dsmart_monitor_sql_execute_failed_gsdb", "id": "14704", "rule_expression": "[metric,1000000] [oper,contains][str,SQL执行失败]", "db_type": "GaussDB", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - CPU时间"}, {"knowledge_description": "TOP SQL - 执行器内执行时间"}, {"knowledge_description": "TOP SQL - 生成执行计划时间"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用网络流量分析"}], "description": "存在较多执行时间较长的SQL", "rule_name": "long_sql_gsdb", "id": "14716", "rule_expression": "([metric,2820158] >([num,$1]*[cib,2830001,dn_nodes]))||([metric,2820158] >([num,$2]*[cib,2830001,cn_nodes]))", "db_type": "GaussDB", "warning_level": "2", "warning_message": "存在较多执行时间较长的SQL({[metric,2820158]})，数据库性能可能 存在问题"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "GaussDB长事务分析"}, {"knowledge_description": "GaussDB锁等待分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "数据库锁相关指标分析"}, {"knowledge_description": "TOP SQL - CPU时间"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用网络流量分析"}], "description": "事务持续时间过长，超过300秒", "rule_name": "long_trans_gsdb", "id": "14718", "rule_expression": "[metric ,2820106,_cn_max] >[num,$1]", "db_type": "GaussDB", "warning_level": "4", "warning_message": "事务持续时间过长，超过{[metric ,2820106,_cn_max] }秒"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "集群负载分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_description": "GaussDB锁等待分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "数据库锁相关指标分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - CPU时间"}, {"knowledge_description": "TOP SQL - 硬解析数"}, {"knowledge_description": "TOP SQL - 解析时间"}, {"knowledge_description": "TOP SQL - 生成执行计划时间"}], "description": "分布式模式下阻塞或者等待会话数量过多，数据库性能存在风险", "rule_name": "block_session_cn_gsdb", "id": "14689", "rule_expression": "([metric,2820103]>([num,$1])*[cib,2830002,_cn_cpu_total]))", "db_type": "GaussDB", "warning_level": "3", "warning_message": "分布式模式下阻塞或者等待会话数量过多，数据库性能存在风险（{[metric,2820103]}）"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库CPU分析"}, {"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-数据库IO分析"}, {"knowledge_description": "GaussDB锁等待分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "数据库锁相关指标分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用文件系统使用率分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用网络流量分析"}], "description": "数据库连接严重超时，数据库存在巨大风险", "rule_name": "connect_slow_gsdb", "id": "14693", "rule_expression": "[metric,1000102] >([metric hour avg,1000102]*[num,$1]) && ([metric,1000102] >[num,$2])", "db_type": "GaussDB", "warning_level": "4", "warning_message": "数据库连接严重超时，数据库存在巨大风险（{[metric,1000102}}"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB CPU相关指标分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库CPU分析"}, {"knowledge_description": "通用文件系统使用率分析"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "TOP SQL - CPU时间"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - 硬解析数"}, {"knowledge_description": "TOP SQL - 解析时间"}, {"knowledge_description": "TOP SQL - 生成执行计划时间"}], "description": "不同CN节点CPU使用不均衡", "rule_name": "cpu_nobalance_cn_gsdb", "id": "14694", "rule_expression": "(([metric,1001003,cn_min])<[num,30])&&(([metric,1001003,cn_max]/[metric,1001003,cn_min])>[num,$1]))||(([metric,1001003,cn_min])>=[num,30])&&(([metric,1001003,cn_max]/[metric,1001003,cn_min])>[num,$2]))", "db_type": "GaussDB", "warning_level": "2", "warning_message": "不同CN节点CPU使用不均衡"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GasusDB IO相关指标"}, {"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-数据库IO分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL引发IO异常的相关指标分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}], "description": "IO延时严重超标，数据库存在风险", "rule_name": "IO_latency_gsdb_critical", "id": "14711", "rule_expression": "[metric,1001006,max]>[num,$1] && ([metric,1001101,avg]>[num,$2]) ", "db_type": "GaussDB", "warning_level": "4", "warning_message": "IO延时过高，数据库存在风险({[metric,1001006,max]})"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "TOP SQL - 硬解析数"}, {"knowledge_description": "TOP SQL - 解析时间"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_description": "通用CPU使用情况分析"}], "description": "DN节点每秒硬解析数量过多，数据库性能存在风险", "rule_name": "hard_parse_dn_gsdb", "id": "14709", "rule_expression": "([metric,2823167,_dn_total])>([num,$1])*[cib,2830002,_dn_cpu_total])", "db_type": "GaussDB", "warning_level": "2", "warning_message": "DN节点每秒硬解析数量过多（{[metric,2823167,_dn_total]}），数据库性能存在风险"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GasusDB IO相关指标"}, {"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-数据库IO分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - 执行时间"}], "description": "各DN节点的IOPS不均衡，数据库性能可能受影响", "rule_name": "IOPS_nobalance_gsdb", "id": "14714", "rule_expression": "(([metric,1001100,dn_min])<[num,8000])&&(([metric,1001100,dn_max]/[metric,1001100,dn_min])>[num,$1]))||(([metric,1001100,dn_min])>=[num,8000])&&(([metric,1001100,dn_max]/[metric,1001100,dn_min])>[num,$2]))", "db_type": "GaussDB", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_description": "GaussDB锁等待分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "数据库锁相关指标分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用IO分析"}], "description": "锁过度竞争，可能会影响数据库性能", "rule_name": "lock_contenion_gsdb", "id": "14715", "rule_expression": "([metric,2823313,_cn_total]>[num,$1])||([metric,2823313,_dn_total]>[num,$2])", "db_type": "GaussDB", "warning_level": "2", "warning_message": "锁过度竞争，可能会影响数据库性能（CN:{[metric,2823313,_cn_total]},DN:{[metric,2823313,_dn_total]})"}}
{"type": "rule", "data": {"description": "CN节点每秒逻辑读异常，说明应用或者数据库出现了异常", "rule_name": "more_logic_read_cn_gsdb", "id": "14725", "rule_expression": "(([metric,2820113,_cn_total]>[num,$1]) || ([metric ,1000105,2820113-_cn_total][oper,eq][str,3])) && ([metric,2820113,_cn_total]>[num,$2])", "db_type": "GaussDB", "warning_level": "2", "warning_message": "CN节点每秒逻辑读异常增加，说明应用或者数据库出现了异常，当前每秒逻辑读{[metric,2820113,_cn_total]}"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}], "description": "DN节点上SELECT数量异常变化", "rule_name": "more_select_dn_gsdb", "id": "14729", "rule_expression": "(([metric,2823151,_dn_total]>[num,$1]) || ([metric ,1000105,2823151-_dn_total][oper,eq][str,3])) && ([metric,2823151,_dn_total]>[num,$2])", "db_type": "GaussDB", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "数据库连接失败分析", "knowledge_description": "数据库连接失败分析"}, {"knowledge_description": "通用网络流量分析"}], "description": "数据库未知连接错误", "rule_name": "unkown_connect_failed_gsdb", "id": "14745", "rule_expression": "[metric,1000000][oper,notcontains][str,Check that the hostname and port are correct] && [metric,1000000][oper,notcontains][str,does not exist] && [metric,1000000][oper,notcontains][str,connection attempt failed] && [metric,1000000][oper,notcontains][str,password authentication failed] && [metric,1000000][oper,notcontains][str,not permitted to log in] && [metric,1000000][oper,notcontains][str,SQL执行失败] && [metric,1000000][oper,neq][str,连接成功]", "db_type": "GaussDB", "warning_level": "4", "warning_message": "pg数据库未知连接错误：{[metric,1000000]}"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "集群CN系统表一致性检查"}, {"knowledge_description": "集群状态检查"}], "description": "CN节点系统表存在不一致现象，相同存在严重问题", "rule_name": "systable_consistence_gsdb", "id": "14741", "rule_expression": "[metric,2823328]<[num,$1]", "db_type": "GaussDB", "warning_level": "4", "warning_message": "CN节点系统表存在不一致现象，相同存在严重问题"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "数据库等待事件分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_name": "数据库负载维度分析", "knowledge_description": "数据库负载维度分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用网络流量分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - 解析时间"}], "description": "LwLock等待数量过多，系统存在风险", "rule_name": "lwlock_gsdb", "id": "14720", "rule_expression": "([metric,2820102]>[num,$1]) && ([metric,2829016,total]>[num,$2]*([cib,2830001,dn_nodes]+[cib,2830001,cn_nodes]))", "db_type": "GaussDB", "warning_level": "3", "warning_message": "LwLock等待数量过多（{[metric,2820317]}），系统存在风险"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "Top SQL-按临时读写排序", "knowledge_description": "Top SQL-按临时读写排序"}, {"knowledge_description": "检查temp_buffers参数"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}], "description": "检测到临时文件使用量过多", "rule_name": "tmp_files_gsdb", "id": "14743", "rule_expression": "[metric,2820001]>[num,$1] &&( [metric,2820125,total]>([num,$2]*([cib,2830001,cn_nodes]+[cib,2830001,dn_nodes])))", "db_type": "GaussDB", "warning_level": "2", "warning_message": "检测到临时文件使用量过多({[metric,2820125,total]})"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "死元组达到清理要求未清理的分析", "knowledge_description": "死元组达到清理要求未清理的分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_description": "GaussDB锁等待分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "数据库锁相关指标分析"}, {"knowledge_description": "GaussDB长事务分析"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用文件系统使用率分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用网络流量分析"}], "description": "长事务过多或持续时间过长", "rule_name": "long_trx_gsdb", "id": "14719", "rule_expression": "[metric,2820105,_cn_total]>[num,$1] || [metric,2820106,_cn_max]>[num,$2]", "db_type": "GaussDB", "warning_level": "2", "warning_message": "长事务数{[metric,2820105]}个，最长事务持续时间{[metric,2820106]}"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "PostgreSQL长事务分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_description": "GaussDB锁等待分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "数据库锁相关指标分析"}, {"knowledge_description": "TOP SQL - 执行次数"}], "description": "如果事务提交比例低于历史平均水平的50%，系统可能存在隐患", "rule_name": "transaction_commit_ratio_low_gsdb", "id": "14744", "rule_expression": "[metric,2820108] < [metric hour avg,2820108]*[num,$1]", "db_type": "GaussDB", "warning_level": "3", "warning_message": "事务提交比例({[metric,2820108]})低于小时平均水平的50%，系统可能存在隐患"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用文件系统使用率分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用网络流量分析"}], "description": "DN备节点REDO延时过高，数据库的RTO存在风险", "rule_name": "slaver_redo_delay_gsdb", "id": "15044", "rule_expression": "[metric,2823396,_dn_max]>[num,$1]", "db_type": "GaussDB", "warning_level": "3", "warning_message": "DN备节点REDO延时过高，数据库的RTO存在风险（{[metric,2823396,_dn_max]}）"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用网络流量分析"}], "description": "DN节点每秒物理读异常增长，说明应用或者数据库出现了异常", "rule_name": "more_phyiscal_read_dn_gsdb", "id": "14727", "rule_expression": "(([metric,2820114,_dn_total]>[num,$1]) || ([metric ,1000105,2820114-_dn_total][oper,eq][str,3])) && ([metric,2820114,_dn_total]>[num,$2])", "db_type": "GaussDB", "warning_level": "2", "warning_message": "DN节点每秒物理读({[metric,2820114],_dn_total})异常增长，应用或者数据库出现了异常"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}], "description": "DN节点上DML数量异常变化", "rule_name": "more_dml_dn_gsdb", "id": "14724", "rule_expression": "(([metric,2823156,_dn_total]>[num,$1]) || ([metric ,1000105,2823156-_dn_total][oper,eq][str,3])) && ([metric,2823156,_dn_total]>[num,$2])", "db_type": "GaussDB", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_description": "TOP SQL - 执行次数"}], "description": "CN节点上DML数量异常变化", "rule_name": "more_dml_cn_gsdb", "id": "14723", "rule_expression": "(([metric,2823156,_cn_total]>[num,$1]) || ([metric ,1000105,2823156-_cn_total][oper,eq][str,3])) && ([metric,2823156,_cn_total]>[num,$2])", "db_type": "GaussDB", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "集群内存分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB内存方面指标异常分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - 解析时间"}], "description": "DN节点服务器内存使用不均衡", "rule_name": "mem_nobalance_dn_gsdb", "id": "14722", "rule_expression": "(([metric,1001004,dn_min])<[num,50])&&(([metric,1001004,dn_max]/[metric,1001004,dn_min])>[num,$1]))||(([metric,1001004,dn_min])>=[num,50])&&(([metric,1001004,dn_max]/[metric,1001004,dn_min])>[num,$2]))", "db_type": "GaussDB", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB CPU相关指标分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_description": "TOP SQL - CPU时间"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - 硬解析数"}, {"knowledge_description": "TOP SQL - 生成执行计划时间"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用网络流量分析"}], "description": "活跃会话数超过CPU线程数数倍，数据库可能存在风险", "rule_name": "active_session_gsdb_fatal", "id": "14830", "rule_expression": "([metric,2820102,_cn_total]>([num,$1]*[cib,2830001,cn_cpu_total] ))||([metric,2820102,_dn_total]>([num,$1]*[cib,2830001,dn_cpu_total] ))", "db_type": "GaussDB", "warning_level": "4", "warning_message": "高斯集群的活跃会话数过多，超过计算节点的CPU线程数数倍，数据库可能存在风险（计算节点总活跃会话数{[metric,2820102,_cn_total]}/{[metric,2820102,_dn_total]}）"}}
{"type": "rule", "data": {"description": "CN或者DN节点的总DB_TIME异常", "rule_name": "abnormal_db_time_gsdb", "id": "14821", "rule_expression": "([metric ,1000105,2823139-_cn_total][oper,eq][str,3])) && ([metric,2823139,_cn_total]>[num,$1])||([metric ,1000105,2823139-_dn_total][oper,eq][str,3])) && ([metric,2823139,_dn_total]>[num,$2])", "db_type": "GaussDB", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "集群状态检查"}], "description": "存在异常DN节点", "rule_name": "abnormal_dn_gsdb", "id": "14824", "rule_expression": "[metric,2823304]>=[num,$1]", "db_type": "GaussDB", "warning_level": "3", "warning_message": "存在异常DN节点，请尽快确认是否存在问题(故障DN节点数{[metric,2823301]})"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库CPU分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB CPU相关指标分析"}, {"knowledge_name": "数据库CPU高分析", "knowledge_description": "数据库CPU高分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass 引发CPU异常的SQL相关指标分析"}], "description": "数据库CPU使用率过高，可能存在瓶颈", "rule_name": "cpu_used_higher_gsdb", "id": "14844", "rule_expression": "([metric,1001003,max] >[num,$1])||([metric,1001003,avg] >[num,$2])", "db_type": "GaussDB", "warning_level": "4", "warning_message": "当前CPU使用率过高，当前CPU使用率平均值为：{[metric,1001003,avg]}%，当前CPU使用率最大值为：{[metric,1001003,max]}%"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "运维对象连接失败，请检查运维对象是否down", "knowledge_description": "运维对象连接状态分析"}], "description": "KYD采样SQL在pg数据库执行失败", "rule_name": "dsmart_monitor_sql_execute_failed_gsdb", "id": "14850", "rule_expression": "[metric,1000000] [oper,contains][str,SQL执行失败]", "db_type": "GaussDB", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_description": "GaussDB锁等待分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "数据库锁相关指标分析"}, {"knowledge_description": "TOP SQL - CPU时间"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用文件系统使用率分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用网络流量分析"}], "description": "活跃会话数过多，数据库可能存在风险", "rule_name": "active_session_gsdb_warn", "id": "14831", "rule_expression": "([metric,2820102,_cn_total]>([num,$1]*[cib,2830001,cn_cpu_total] ))||([metric,2820102,_dn_total]>([num,$1]*[cib,2830001,dn_cpu_total] ))", "db_type": "GaussDB", "warning_level": "2", "warning_message": "高斯集群的活跃会话数过多，数据库可能存在风险，计算节点总活跃会话数(cn:{[metric,2820102,_cn_total]},dn:{[metric,2820102,_dn_total]})"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GasusDB IO相关指标"}, {"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-数据库IO分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "通用IO分析"}], "description": "可能因为IO异常缓慢而导致活跃会话数过高", "rule_name": "active_session_ioslow_gsdb", "id": "14832", "rule_expression": "(([metric,2820102] >([num,$1]*[cib,2830002,_cn_cpu_total]))||([metric,2820102] >([num,$2]*[cib,2830002,_dn_cpu_total])))&&([metric,1001006,max] >[num,$3])", "db_type": "GaussDB", "warning_level": "2", "warning_message": "可能因为IO异常缓慢而导致活跃会话数过高，当前活跃会话数{[metric,2820102]},IO延时{[metric,1001006,max]}"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_description": "集群负载分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_description": "GaussDB锁等待分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "数据库锁相关指标分析"}, {"knowledge_description": "TOP SQL - 执行时间"}], "description": "共享缓冲区命中率不理想", "rule_name": "buffer_cache_suboptimal_gsdb", "id": "14837", "rule_expression": "[metric,2820112]<[num,$1] && [metric,2820113,total]>[num,$2]", "db_type": "GaussDB", "warning_level": "2", "warning_message": "共享缓冲区命中率不理想,数据库性能存在问题。（共享池命中率{[metric,2820112]}]"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库CPU分析"}, {"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-数据库IO分析"}, {"knowledge_description": "GaussDB锁等待分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "数据库锁相关指标分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用文件系统使用率分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用网络流量分析"}], "description": "数据库连接严重超时，数据库存在巨大风险", "rule_name": "connect_slow_gsdb", "id": "14840", "rule_expression": "[metric,1000102] >([metric hour avg,1000102]*[num,$1]) && ([metric,1000102] >[num,$2])", "db_type": "GaussDB", "warning_level": "4", "warning_message": "数据库连接严重超时，数据库存在巨大风险（{[metric,1000102}}"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB CPU相关指标分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库CPU分析"}, {"knowledge_description": "TOP SQL - CPU时间"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用网络流量分析"}], "description": "DN节点CPU使用率不均衡（集中式勿开）", "rule_name": "cpu_nobalance_dn_gsdb", "id": "14842", "rule_expression": "(([metric,1001003,dn_min])<[num,30])&&(([metric,1001003,dn_max]/[metric,1001003,dn_min])>[num,$1]))||(([metric,1001003,dn_min])>=[num,30])&&(([metric,1001003,dn_max]/[metric,1001003,dn_min])>[num,$2]))", "db_type": "GaussDB", "warning_level": "2", "warning_message": "DN节点CPU使用率不均衡"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "数据库连接失败分析", "knowledge_description": "数据库连接失败分析"}, {"knowledge_description": "通用网络流量分析"}], "description": "KYD客户端到PG数据库网络出现问题或者KYD到PG数据库连接串端口配置出错，请检查相关配置", "rule_name": "dsmart_network_failed_gsdb", "id": "14851", "rule_expression": "[metric,1000000][oper,contains][str,Check that the hostname and port are correct]", "db_type": "GaussDB", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "分析数据库实例情况"}], "description": "出现多次错误或告警的SQL语句，可能是应用发出", "rule_name": "error_sql_pg", "id": "14854", "rule_expression": "[metric,2820204]>[num,$1]", "db_type": "GaussDB", "warning_level": "3"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}], "description": "DN节点上SELECT数量异常变化", "rule_name": "more_select_dn_gsdb", "id": "14881", "rule_expression": "(([metric,2823151,_dn_total]>[num,$1]) || ([metric ,1000105,2823151-_dn_total][oper,eq][str,3])) && ([metric,2823151,_dn_total]>[num,$2])", "db_type": "GaussDB", "warning_level": "2"}}
{"type": "rule", "data": {"description": "数据库复制不正常", "rule_name": "repl_gsdb", "id": "14884", "rule_expression": "[metric,2820147,cluster][oper,neq][str,Streaming] || [metric,2820149,cluster]>[num,$1]", "db_type": "GaussDB", "warning_level": "4", "warning_message": "数据库复制不正常（复制状态{[metric,2820147,cluster]}，备库应用延时{[metric,2820149,cluster]}）"}}
{"type": "rule", "data": {"description": "CN发生过切换", "rule_name": "switchover_cn_gsdb", "id": "14890", "rule_expression": "[metric,2823319]>[num,0]", "db_type": "GaussDB", "warning_level": "4"}}
{"type": "rule", "data": {"description": "DN节点发生过切换", "rule_name": "switchover_dn_gsdb", "id": "14891", "rule_expression": "[metric,2823320]>[num,0]", "db_type": "GaussDB", "warning_level": "4"}}
{"type": "rule", "data": {"description": "ETCD发生过切换", "rule_name": "switchover_etcd_gsdb", "id": "14892", "rule_expression": "[metric,2823318]>[num,0]", "db_type": "GaussDB", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "分布式数据库文件系统使用率指标分析"}, {"knowledge_description": "通用文件系统使用率分析"}], "description": "数据库节点软件安装所在文件系统空间使用率过高", "rule_name": "filesystem_soft_usage_gsdb", "id": "14858", "rule_expression": "([metric,1000320,_dn_max]>[num,$1])||([metric,1000320,_cn_max]>[num,$2])", "db_type": "GaussDB", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用网络流量分析"}], "description": "DN节点每秒物理读异常增长，说明应用或者数据库出现了异常", "rule_name": "more_phyiscal_read_dn_gsdb", "id": "14879", "rule_expression": "(([metric,2820114,_dn_total]>[num,$1]) || ([metric ,1000105,2820114-_dn_total][oper,eq][str,3])) && ([metric,2820114,_dn_total]>[num,$2])", "db_type": "GaussDB", "warning_level": "2", "warning_message": "DN节点每秒物理读({[metric,2820114],_dn_total})异常增长，应用或者数据库出现了异常"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用文件系统使用率分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用网络流量分析"}], "description": "数据库集群RTO过高", "rule_name": "rto_risk_gsdb", "id": "14886", "rule_expression": "[metric,2823114,_dn_max]>[num,$1]", "db_type": "GaussDB", "warning_level": "4", "warning_message": "数据库集群RTO过高({[metric,2823114,_dn_max]})"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "分布式数据库文件系统使用率指标分析"}, {"knowledge_description": "通用文件系统使用率分析"}], "description": "数据文件存储的文件系统存在使用率过高现象", "rule_name": "filesystem_data_usage_gsdb", "id": "14856", "rule_expression": "([metric,1000321,_dn_max]>[num,$1])||([metric,1000321,_cn_max]>[num,$1])", "db_type": "GaussDB", "warning_level": "3", "warning_message": "数据文件存储的文件系统存在使用率过高现象(DN-{[metric,1000321,_dn_max]},CN-{[metric,1000321,_cn_max]})"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "正确配置archive_command命令", "knowledge_description": "分析数据库WAL日志归档失败"}, {"knowledge_description": "通用文件系统使用率分析"}], "description": "发生未成功归档现象", "rule_name": "failed_archive_pg", "id": "14855", "rule_expression": "[cib,2220002,archive_mode][oper,eq][str,on] && [metric,2820142]>[num,$1]", "db_type": "GaussDB", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB内存方面指标异常分析"}, {"knowledge_description": "集群会话的内存占用情况"}, {"knowledge_description": "集群内存分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - 生成执行计划时间"}], "description": "CN节点动态内存急剧上升", "rule_name": "dyn_mem_raise_cn_gsdb", "id": "14852", "rule_expression": "([metric ,1000105,2823230-_cn_total][oper,eq][str,3])) && ([metric,2823230,_cn_total]>[num,$1])", "db_type": "GaussDB", "warning_level": "2", "warning_message": "CN节点动态内存急剧上升(总计动态内存使用量{[metric,2823230,_cn_total]})"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB内存方面指标异常分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - 解析时间"}, {"knowledge_description": "TOP SQL - 生成执行计划时间"}, {"knowledge_description": "通用内存使用情况分析"}], "description": "DN节点动态内存急剧上升", "rule_name": "dyn_mem_raise_dn_gsdb", "id": "14853", "rule_expression": "([metric ,1000105,2823230-_dn_total][oper,eq][str,3])) && ([metric,2823230,_dn_total]>[num,$1])", "db_type": "GaussDB", "warning_level": "2", "warning_message": "DN节点动态内存急剧上升，可能负载出现上升（{[metric,2823230,_dn_total]}）"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "Top SQL-按临时读写排序", "knowledge_description": "Top SQL-按临时读写排序"}, {"knowledge_description": "检查temp_buffers参数"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}], "description": "检测到临时文件使用量过多", "rule_name": "tmp_files_gsdb", "id": "14896", "rule_expression": "[metric,2820001]>[num,$1] &&( [metric,2820125,total]>([num,$2]*([cib,2830001,cn_nodes]+[cib,2830001,dn_nodes])))", "db_type": "GaussDB", "warning_level": "2", "warning_message": "检测到临时文件使用量过多({[metric,2820125,total]})"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - CPU时间"}], "description": "CN或者DN节点的全表扫描次数过多", "rule_name": "table_scan_gsdb", "id": "14895", "rule_expression": "([metric,2822519,_cn_total])>([num,$1])*[cib,2830002,_cn_cpu_total])||([metric,2822519,_dn_total])>([num,$2]*[cib,2830002,_dn_cpu_total]))", "db_type": "GaussDB", "warning_level": "2", "warning_message": "CN或者DN节点的全表扫描次数过多"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_name": "数据库负载维度分析", "knowledge_description": "数据库负载维度分析"}, {"knowledge_description": "GaussDB长事务分析"}, {"knowledge_description": "GaussDB锁等待分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "数据库锁相关指标分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}], "description": "回滚比例过高，数据库存在问题", "rule_name": "rollback_high_gsdb", "id": "14885", "rule_expression": "([metric,2829010,max])>[num,$1])&&([metric,2820117,total])>[num,$2])", "db_type": "GaussDB", "warning_level": "3", "warning_message": "回滚比例过高，数据库存在问题（{[metric,2829010,max]}）"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - 解析时间"}, {"knowledge_description": "TOP SQL - 生成执行计划时间"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用内存使用情况分析"}], "description": "DN节点每秒逻辑读异常，说明应用或者数据库出现了异常", "rule_name": "more_logic_read_dn_gsdb", "id": "14878", "rule_expression": "(([metric,2820113,_dn_total]>[num,$1]) || ([metric,1000105,2820113-_dn_total][oper,eq][str,3])) && ([metric,2820113,_dn_total]>[num,$2])", "db_type": "GaussDB", "warning_level": "2", "warning_message": "DN节点每秒逻辑读异常增加，说明应用或者数据库出现了异常，当前每秒逻辑读{[metric,2820113,_dn_total]}"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_description": "TOP SQL - 执行次数"}], "description": "CN节点上DML数量异常变化", "rule_name": "more_dml_cn_gsdb", "id": "14875", "rule_expression": "(([metric,2823156,_cn_total]>[num,$1]) || ([metric ,1000105,2823156-_cn_total][oper,eq][str,3])) && ([metric,2823156,_cn_total]>[num,$2])", "db_type": "GaussDB", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "集群状态检查"}, {"knowledge_description": "通用文件系统使用率分析"}, {"knowledge_description": "通用网络流量分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用IO分析"}], "description": "存在异常CN节点", "rule_name": "abnormal_cn_gsdb", "id": "14932", "rule_expression": "[metric,2823304]>=[num,$1]", "db_type": "GaussDB", "warning_level": "3", "warning_message": "存在异常CN节点，请尽快确认是否存在问题(故障CN节点数{[metric,2823302]})"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "GaussDB锁等待分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "数据库锁相关指标分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_description": "集群负载分析"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - 执行时间"}], "description": "每秒死锁数过多，系统存在风险", "rule_name": "dead_locks_gsdb", "id": "14959", "rule_expression": "[metric,2820118,total]>[num,$1]", "db_type": "GaussDB", "warning_level": "4", "warning_message": "每秒死锁数过多，系统存在风险(total:{[metric,2820118,total]},cn:{[metric,2820118,_cn_total]},dn:{[metric,2820118,_dn_total]})"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_description": "TOP SQL - 执行次数"}], "description": "数据库CN中的DML比例异常（分布式专用）", "rule_name": "abnormal_dml_ratio_cn_gsdb", "id": "14935", "rule_expression": "(([metric,2829018,_cn_total]>[num,$1]) || ([metric ,1000105,2829018-_cn_total][oper,eq][str,3])) && ([metric,2829018,_cn_total]>[num,$2])", "db_type": "GaussDB", "warning_level": "2", "warning_message": "数据库CN中的DML比例异常（{[metric,2829018,_cn_total]}）(分布式专用)"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "集群状态检查"}], "description": "存在异常ETCD节点", "rule_name": "abnormal_etcd_gsdb", "id": "14939", "rule_expression": "[metric,2823304]>=[num,$1]", "db_type": "GaussDB", "warning_level": "3", "warning_message": "存在异常etcd节点，请尽快确认是否存在问题(故障节点数{[metric,2823304]})"}}
{"type": "rule", "data": {"description": "数据库中出现过组件主从切换", "rule_name": "db_role_switch_gsdb", "id": "14958", "rule_expression": "([metric,2823317]>[num,$1])||([metric,2823318]>[num,$1])||([metric,2823319]>[num,$1])||([metric,2823320]>[num,$1])||([metric,2823321]>[num,$1])", "db_type": "GaussDB", "warning_level": "4", "warning_message": "数据库中出现过组件主从切换（CM：{[metric,2823317]}，ETCD：{[metric,2823318]}，CN：{[metric,2823319]}，DN：{[metric,2823320]}，GTM：{[metric,2823321]}）"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "数据库连接失败分析", "knowledge_description": "数据库连接失败分析"}], "description": "KYD到pg数据库连接配置有问题，导致连接失败", "rule_name": "dsmart_connection_error_gsdb", "id": "14961", "rule_expression": "[metric,1000000][oper,contains][str,FATAL: database] && [metric,1000000][oper,contains][str,does not exist]", "db_type": "GaussDB", "warning_level": "4", "warning_message": "dsmart到pg数据库连接配置有问题，导致连接失败"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "数据库连接失败分析", "knowledge_description": "数据库连接失败分析"}], "description": "KYD连接PG数据库的用户密码错误", "rule_name": "dsmart_logon_failed_gsdb", "id": "14962", "rule_expression": "[metric,1000000][oper,contains][str,password authentication failed]", "db_type": "GaussDB", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "运维对象连接失败，请检查运维对象是否down", "knowledge_description": "运维对象连接状态分析"}], "description": "KYD采样SQL在pg数据库执行失败", "rule_name": "dsmart_monitor_sql_execute_failed_gsdb", "id": "14963", "rule_expression": "[metric,1000000] [oper,contains][str,SQL执行失败]", "db_type": "GaussDB", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "TOP 慢查询"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_description": "GaussDB锁等待分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "数据库锁相关指标分析"}, {"knowledge_description": "TOP SQL - CPU时间"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行器内执行时间"}, {"knowledge_description": "TOP SQL - 生成执行计划时间"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用文件系统使用率分析"}, {"knowledge_description": "通用内存使用情况分析"}], "description": "95分位SQL响应时间急剧上升，数据库性能存在风险", "rule_name": "95SQL_gsdb", "id": "14931", "rule_expression": "(([metric,1000105,2823208] [oper,eq] [str,3]))&&([metric,2823208]>[num,$1] )", "db_type": "GaussDB", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用网络流量分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - CPU时间"}], "description": "80分位的SQL响应时间异常增长", "rule_name": "80SQL_gsdb", "id": "14930", "rule_expression": "(([metric,1000105,2823207] [oper,eq] [str,3]))&&([metric,2823207]>[num,$1] )", "db_type": "GaussDB", "warning_level": "2", "warning_message": "80分位的SQL响应时间异常增长"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GasusDB IO相关指标"}, {"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-数据库IO分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "通用IO分析"}], "description": "可能因为IO异常缓慢而导致活跃会话数过高", "rule_name": "active_session_ioslow_gsdb", "id": "14945", "rule_expression": "(([metric,2820102] >([num,$1]*[cib,2830002,_cn_cpu_total]))||([metric,2820102] >([num,$2]*[cib,2830002,_dn_cpu_total])))&&([metric,1001006,max] >[num,$3])", "db_type": "GaussDB", "warning_level": "2", "warning_message": "可能因为IO异常缓慢而导致活跃会话数过高，当前活跃会话数{[metric,2820102]},IO延时{[metric,1001006,max]}"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "TOP 慢查询"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - CPU时间"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_description": "GaussDB锁等待分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "数据库锁相关指标分析"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用网络流量分析"}], "description": "可能是慢SQL过多而导致的活跃会话数过高", "rule_name": "active_session_slow_sql_gsdb", "id": "14946", "rule_expression": "(([metric,2820102] >([num,$1]*[cib,2830002,_cn_cpu_total]))||([metric,2820102] >([num,$2]*[cib,2830002,_dn_cpu_total])))&&(([metric,2820158] >([num,$3]*[cib,2830002,_cn_cpu_total]))||([metric,2820158] >([num,$4]*[cib,2830002,_dn_cpu_total])))", "db_type": "GaussDB", "warning_level": "2", "warning_message": "可能是慢SQL过多而导致的活跃会话数过高，慢sql数量{[metric,2820158]},活跃会话数{[metric,2820102]}"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "集群负载分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_description": "GaussDB锁等待分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "数据库锁相关指标分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - CPU时间"}, {"knowledge_description": "TOP SQL - 硬解析数"}, {"knowledge_description": "TOP SQL - 解析时间"}, {"knowledge_description": "TOP SQL - 生成执行计划时间"}], "description": "分布式模式下阻塞或者等待会话数量过多，数据库性能存在风险", "rule_name": "block_session_cn_gsdb", "id": "14948", "rule_expression": "([metric,2820103]>([num,$1])*[cib,2830002,_cn_cpu_total]))", "db_type": "GaussDB", "warning_level": "3", "warning_message": "分布式模式下阻塞或者等待会话数量过多，数据库性能存在风险（{[metric,2820103]}）"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB CPU相关指标分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass 引发CPU异常的SQL相关指标分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库CPU分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "TOP SQL - CPU时间"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - 硬解析数"}, {"knowledge_description": "TOP SQL - 解析时间"}, {"knowledge_description": "TOP SQL - 生成执行计划时间"}], "description": "服务器CPU快速上升或者急剧波动", "rule_name": "cpu_rise_gsdb", "id": "14956", "rule_expression": "([metric,1000105,1001003-avg] [oper,eq] [str,3])||([metric,1000105,1001003-avg] [oper,eq] [str,5])", "db_type": "GaussDB", "warning_level": "2", "warning_message": "服务器CPU快速上升或者急剧波动"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "死元组达到清理要求未清理的分析", "knowledge_description": "死元组达到清理要求未清理的分析"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}], "description": "存在死元组比例较大的大表", "rule_name": "dead_tuple_not_cleanup_gsdb", "id": "14960", "rule_expression": "[metric,2823341,_dn_total]>[num,$1] ", "db_type": "GaussDB", "warning_level": "2", "warning_message": "存在死元组数到达清理阈值而未清理的表（{[metric,2823341,_dn_total]}），会造成空间浪费和性能问题"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "数据库连接失败分析", "knowledge_description": "数据库连接失败分析"}, {"knowledge_description": "通用网络流量分析"}], "description": "KYD客户端到PG数据库网络出现问题或者KYD到PG数据库连接串端口配置出错，请检查相关配置", "rule_name": "dsmart_network_failed_gsdb", "id": "14964", "rule_expression": "[metric,1000000][oper,contains][str,Check that the hostname and port are correct]", "db_type": "GaussDB", "warning_level": "4"}}
{"type": "rule", "data": {"description": "数据库复制不正常", "rule_name": "repl_gsdb", "id": "14997", "rule_expression": "[metric,2820147,cluster][oper,neq][str,Streaming] || [metric,2820149,cluster]>[num,$1]", "db_type": "GaussDB", "warning_level": "4", "warning_message": "数据库复制不正常（复制状态{[metric,2820147,cluster]}，备库应用延时{[metric,2820149,cluster]}）"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "集群状态检查"}], "description": "GTM发生过切换", "rule_name": "switchover_gtm_gsdb", "id": "15006", "rule_expression": "[metric,2823321]>[num,0]", "db_type": "GaussDB", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "分布式数据库文件系统使用率指标分析"}, {"knowledge_description": "通用文件系统使用率分析"}], "description": "数据库节点软件安装所在文件系统空间使用率过高", "rule_name": "filesystem_soft_usage_gsdb", "id": "14971", "rule_expression": "([metric,1000320,_dn_max]>[num,$1])||([metric,1000320,_cn_max]>[num,$2])", "db_type": "GaussDB", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - CPU时间"}, {"knowledge_description": "TOP SQL - 执行器内执行时间"}, {"knowledge_description": "TOP SQL - 生成执行计划时间"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用网络流量分析"}], "description": "存在较多执行时间较长的SQL", "rule_name": "long_sql_gsdb", "id": "14980", "rule_expression": "([metric,2820158] >([num,$1]*[cib,2830001,dn_nodes]))||([metric,2820158] >([num,$2]*[cib,2830001,cn_nodes]))", "db_type": "GaussDB", "warning_level": "2", "warning_message": "存在较多执行时间较长的SQL({[metric,2820158]})，数据库性能可能 存在问题"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "分布式数据库文件系统使用率指标分析"}, {"knowledge_description": "通用文件系统使用率分析"}], "description": "日志所在文件系统使用率过高", "rule_name": "filesystem_log_usage_gsdb", "id": "14970", "rule_expression": "([metric,1000322,_dn_max]>[num,$1])||([metric,1000322,_cn_max]>[num,$1])", "db_type": "GaussDB", "warning_level": "3", "warning_message": "DN节点日志所在文件系统使用率过高（DN-{[metric,1000322,_dn_max]},CN-{[metric,1000322,_cn_max]}）"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GasusDB IO相关指标"}, {"knowledge_name": "根据智能诊断结论进行下钻分析", "knowledge_description": "泛路由-数据库IO分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - 执行时间"}], "description": "各DN节点的IOPS不均衡，数据库性能可能受影响", "rule_name": "IOPS_nobalance_gsdb", "id": "14978", "rule_expression": "(([metric,1001100,dn_min])<[num,8000])&&(([metric,1001100,dn_max]/[metric,1001100,dn_min])>[num,$1]))||(([metric,1001100,dn_min])>=[num,8000])&&(([metric,1001100,dn_max]/[metric,1001100,dn_min])>[num,$2]))", "db_type": "GaussDB", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "PostgreSQL长事务分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_description": "GaussDB锁等待分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "数据库锁相关指标分析"}, {"knowledge_description": "TOP SQL - 执行次数"}], "description": "如果事务提交比例低于历史平均水平的50%，系统可能存在隐患", "rule_name": "transaction_commit_ratio_low_gsdb", "id": "15010", "rule_expression": "[metric,2820108] < [metric hour avg,2820108]*[num,$1]", "db_type": "GaussDB", "warning_level": "3", "warning_message": "事务提交比例({[metric,2820108]})低于小时平均水平的50%，系统可能存在隐患"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_description": "TOP SQL - 执行次数"}], "description": "CN节点上DML数量异常变化", "rule_name": "more_dml_cn_gsdb", "id": "14988", "rule_expression": "(([metric,2823156,_cn_total]>[num,$1]) || ([metric ,1000105,2823156-_cn_total][oper,eq][str,3])) && ([metric,2823156,_cn_total]>[num,$2])", "db_type": "GaussDB", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "Top SQL-按临时读写排序", "knowledge_description": "Top SQL-按临时读写排序"}, {"knowledge_description": "检查temp_buffers参数"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}], "description": "检测到临时文件使用量过多", "rule_name": "tmp_files_gsdb", "id": "15009", "rule_expression": "[metric,2820001]>[num,$1] &&( [metric,2820125,total]>([num,$2]*([cib,2830001,cn_nodes]+[cib,2830001,dn_nodes])))", "db_type": "GaussDB", "warning_level": "2", "warning_message": "检测到临时文件使用量过多({[metric,2820125,total]})"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "Top SQL-按处理行数排序", "knowledge_description": "Top SQL-按处理行数排序"}, {"knowledge_name": "显示数据库中无效索引", "knowledge_description": "显示数据库中无效索引"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_name": "获取执行时间比较高的TOP SQL", "knowledge_description": "获取执行时间比较高的TOP SQL"}, {"knowledge_name": "区分top sql是逻辑读还是执行次数增多进行进一步诊断", "knowledge_description": "逻辑读较多的TOP SQL"}], "description": "索引没有用被有效利用", "rule_name": "index_used_suboptimal_gsdb", "id": "14974", "rule_expression": " [metric,2820120,_dn_total]>[num,$1] && [metric,2820109]<[num,$2]", "db_type": "GaussDB", "warning_level": "2", "warning_message": "可能因为索引设计不合理而导致返回行数比例过低，索引使用效率过低"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass SQL QPS相关指标分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - 硬解析数"}, {"knowledge_description": "TOP SQL - 解析时间"}, {"knowledge_description": "TOP SQL - 生成执行计划时间"}, {"knowledge_description": "TOP SQL - 重写时间"}, {"knowledge_description": "TOP SQL - 软解析数"}], "description": "CN节点每秒硬解析数量过大，数据库性能存在风险", "rule_name": "hard_parse_cn_gsdb", "id": "14972", "rule_expression": "([metric,2823167,_cn_total])>([num,$1])*[cib,2830002,_cn_cpu_total])", "db_type": "GaussDB", "warning_level": "2", "warning_message": "每秒硬解析数量过大（{[metric,2823167,_cn_total]}），数据库性能存在风险"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_description": "GaussDB锁等待分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "数据库锁相关指标分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用IO分析"}], "description": "锁过度竞争，可能会影响数据库性能", "rule_name": "lock_contenion_gsdb", "id": "14979", "rule_expression": "([metric,2823313,_cn_total]>[num,$1])||([metric,2823313,_dn_total]>[num,$2])", "db_type": "GaussDB", "warning_level": "2", "warning_message": "锁过度竞争，可能会影响数据库性能（CN:{[metric,2823313,_cn_total]},DN:{[metric,2823313,_dn_total]})"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB CPU相关指标分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "Guass 引发CPU异常的SQL相关指标分析"}, {"knowledge_description": "集群负载分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_description": "TOP SQL - CPU时间"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用网络流量分析"}], "description": "长时间运行的查询数超出CPU线程数的一半，系统存在较大风险", "rule_name": "long_sql_over_cpu_gsdb", "id": "14981", "rule_expression": "([metric,2820158] >([num,$1]*[cib,2830002,_cn_cpu_total]))||([metric,2820158] >([num,$2]*[cib,2830002,_dn_cpu_total]))", "db_type": "GaussDB", "warning_level": "3", "warning_message": "长时间运行的查询数超出CPU线程数的一半，系统存在较大风险({[metric,2820158] })"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "数据库等待事件分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_name": "数据库负载维度分析", "knowledge_description": "数据库负载维度分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用IO分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "通用网络流量分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - 解析时间"}], "description": "LwLock等待数量过多，系统存在风险", "rule_name": "lwlock_gsdb", "id": "14984", "rule_expression": "([metric,2820102]>[num,$1]) && ([metric,2829016,total]>[num,$2]*([cib,2830001,dn_nodes]+[cib,2830001,cn_nodes]))", "db_type": "GaussDB", "warning_level": "3", "warning_message": "LwLock等待数量过多（{[metric,2820317]}），系统存在风险"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "集群会话分析"}, {"knowledge_name": "根据智能诊断的结论分析异常指标，下钻分析", "knowledge_description": "泛路由-数据库活跃会话数分析"}, {"knowledge_description": "集群会话的内存占用情况"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用内存使用情况分析"}], "description": "线程池使用率过高，系统存在风险", "rule_name": "session_exceed_gsdb", "id": "15000", "rule_expression": "([metric,2823209,_cn_max]>[num,$1] )||([metric,2823209,_dn_max]>[num,$2])", "db_type": "GaussDB", "warning_level": "4", "warning_message": "线程池使用率过高，系统存在风险（CN:{[metric,2823209,_cn_max]},DN:{[metric,2823209,_dn_max]})"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "集群内存分析"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB内存方面指标异常分析"}, {"knowledge_description": "集群内存过载分析"}, {"knowledge_description": "集群会话的内存占用情况"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库内存分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - 解析时间"}], "description": "CN节点的内存使用率不均衡", "rule_name": "mem_nobalance_cn_gsdb", "id": "14985", "rule_expression": "(([metric,1001004,cn_min])<[num,50])&&(([metric,1001004,cn_max]/[metric,1001004,cn_min])>[num,$1]))||(([metric,1001004,cn_min])>=[num,50])&&(([metric,1001004,cn_max]/[metric,1001004,cn_min])>[num,$2]))", "db_type": "GaussDB", "warning_level": "2"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "正确配置archive_command命令", "knowledge_description": "分析数据库WAL日志归档失败"}, {"knowledge_description": "通用文件系统使用率分析"}], "description": "发生未成功归档现象", "rule_name": "failed_archive_pg", "id": "16869", "rule_expression": "[cib,2220002,archive_mode][oper,eq][str,on] && [metric,2820142]>[num,$1]", "db_type": "GaussDB", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_name": "正确配置archive_command命令", "knowledge_description": "分析数据库WAL日志归档失败"}, {"knowledge_description": "通用文件系统使用率分析"}], "description": "发生未成功归档现象", "rule_name": "failed_archive_pg", "id": "16793", "rule_expression": "[cib,2220002,archive_mode][oper,eq][str,on] && [metric,2820142]>[num,$1]", "db_type": "GaussDB", "warning_level": "4"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}, {"knowledge_description": "TOP SQL - 解析时间"}, {"knowledge_description": "TOP SQL - 生成执行计划时间"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB负载方面指标异常分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库负载分析"}, {"knowledge_description": "通用CPU使用情况分析"}, {"knowledge_description": "通用内存使用情况分析"}], "description": "DN节点每秒逻辑读异常，说明应用或者数据库出现了异常", "rule_name": "more_logic_read_dn_gsdb", "id": "12236", "rule_expression": "(([metric,2820113,_dn_total]>[num,$1]) || ([metric,1000105,2820113-_dn_total][oper,eq][str,3])) && ([metric,2820113,_dn_total]>[num,$2])", "db_type": "GaussDB", "warning_level": "2", "warning_message": "DN节点每秒逻辑读异常增加，说明应用或者数据库出现了异常，当前每秒逻辑读{[metric,2820113,_dn_total]}"}}
{"type": "rule", "data": {"description": "数据库复制不正常", "rule_name": "repl_gsdb", "id": "14731", "rule_expression": "[metric,2820147,cluster][oper,neq][str,Streaming] || [metric,2820149,cluster]>[num,$1]", "db_type": "GaussDB", "warning_level": "4", "warning_message": "数据库复制不正常（复制状态{[metric,2820147,cluster]}，备库应用延时{[metric,2820149,cluster]}）"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "集群内存分析"}, {"knowledge_description": "集群内存过载分析"}, {"knowledge_description": "集群会话的内存占用情况"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB内存方面指标异常分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库内存分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}], "description": "服务器物理内存不可用率较高，SWAP使用率较高，系统存在风险", "rule_name": "swap_used_gsdb_critical", "id": "14735", "rule_expression": "[metric,1001014,max]>[num,$1] && [metric,1001031,max]>[num,$2]", "db_type": "GaussDB", "warning_level": "4", "warning_message": "服务器物理内存不可用率较高，SWAP使用率较高，系统存在风险（内存不可用率{[metric,1001014.max]}，SWAP使用率{ [metric,1001031,max]}）"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "集群内存分析"}, {"knowledge_description": "集群内存过载分析"}, {"knowledge_description": "集群会话的内存占用情况"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB内存方面指标异常分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库内存分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}], "description": "服务器物理内存不可用率较高，SWAP使用率较高，系统存在风险", "rule_name": "swap_used_gsdb_critical", "id": "14888", "rule_expression": "[metric,1001014,max]>[num,$1] && [metric,1001031,max]>[num,$2]", "db_type": "GaussDB", "warning_level": "4", "warning_message": "服务器物理内存不可用率较高，SWAP使用率较高，系统存在风险（内存不可用率{[metric,1001014.max]}，SWAP使用率{ [metric,1001031,max]}）"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "集群内存分析"}, {"knowledge_description": "集群内存过载分析"}, {"knowledge_description": "集群会话的内存占用情况"}, {"knowledge_name": "对于异常指标通过关联性分析可进行泛化分析", "knowledge_description": "GaussDB内存方面指标异常分析"}, {"knowledge_name": "根据智能诊断结果进行下钻分析", "knowledge_description": "泛路由-高斯数据库内存分析"}, {"knowledge_description": "通用内存使用情况分析"}, {"knowledge_description": "TOP SQL - 执行时间"}, {"knowledge_description": "TOP SQL - 执行次数"}], "description": "服务器物理内存不可用率较高，SWAP使用率较高，系统存在风险", "rule_name": "swap_used_gsdb_critical", "id": "15001", "rule_expression": "[metric,1001014,max]>[num,$1] && [metric,1001031,max]>[num,$2]", "db_type": "GaussDB", "warning_level": "4", "warning_message": "服务器物理内存不可用率较高，SWAP使用率较高，系统存在风险（内存不可用率{[metric,1001014.max]}，SWAP使用率{ [metric,1001031,max]}）"}}
{"type": "rule", "data": {"knowledge_id": [{"knowledge_description": "集群状态检查"}], "description": "GTM发生过切换", "rule_name": "switchover_gtm_gsdb", "id": "14893", "rule_expression": "[metric,2823321]>[num,0]", "db_type": "GaussDB", "warning_level": "4"}}
{"type": "rule", "data": {"description": "NAS使用率过高", "rule_name": "nas_usage_gsdb", "id": "14995", "rule_expression": "[metric,2823392]>[num,$1]", "db_type": "GaussDB", "warning_level": "2", "warning_message": "NAS使用率过高，备份存在容量风险（{[metric,2823392]}）"}}
{"type": "rule", "data": {"description": "NAS使用率过高", "rule_name": "nas_usage_gsdb", "id": "14882", "rule_expression": "[metric,2823392]>[num,$1]", "db_type": "GaussDB", "warning_level": "2", "warning_message": "NAS使用率过高，备份存在容量风险（{[metric,2823392]}）"}}
